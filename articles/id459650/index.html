<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🚒 👘 👼🏼 Bagaimana tidak kehilangan uang di kotak hitam: metode pengujian penagihan 💂🏼 👨🏾‍🏫 🤵🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Validasi layanan berbayar adalah salah satu masalah teknis utama dalam pengujian Badoo. Aplikasi kami terintegrasi dengan 70 penyedia pembayaran di 25...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana tidak kehilangan uang di kotak hitam: metode pengujian penagihan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/459650/">  Validasi layanan berbayar adalah salah satu masalah teknis utama dalam pengujian Badoo.  Aplikasi kami terintegrasi dengan 70 penyedia pembayaran di 250 negara di dunia, dan bug di setidaknya satu dari mereka dapat menyebabkan konsekuensi yang tidak terduga. <br><br>  Pada artikel ini, saya akan berbicara tentang metode pengujian yang kami gunakan di Badoo, dan batasan penerapan metode ini - tahapan pengujian yang paling efektif. <br><br>  Artikel ini akan berguna untuk penguji, pengembang dan manajer produk, yang proyeknya sudah terintegrasi dengan penyedia pembayaran, atau proses integrasi baru saja dimulai.  Jika dalam pekerjaan Anda Anda dihadapkan dengan masalah memilih metode pengujian untuk integrasi seperti itu, selamat datang! <br><br><img src="https://habrastorage.org/webt/u0/dg/6k/u0dg6kdremnwjnqjqiabc_wq1m8.jpeg"><br><br><a name="habracut"></a><br>  <i>Nama saya Vladimir Solodov, saya Billing QA Engineer di Badoo: Saya terlibat dalam verifikasi integrasi pengujian dan pemrosesan pembayaran.</i>  <i>Kolega saya, Viktor Koronevich, membantu saya menyiapkan teks: bersama dengannya kami membuat laporan di konferensi Heisenbug ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video</a> ).</i>  <i>Dalam artikel tersebut, kami memperluas area deskripsi ke semua integrasi dengan penyedia pembayaran yang digunakan di Badoo, mengklasifikasikan dan menjelaskan praktik menghapus ketergantungan eksternal secara lebih rinci.</i> <br><br>  Menggunakan studi kasus bisnis sebagai contoh, saya akan menjelaskan mengapa Anda harus lebih memperhatikan pengujian layanan berbayar dan bagaimana tidak memperparah masalah jika tetap muncul.  Dan kemudian kita akan menjelaskan masalah teknis dari integrasi pengujian dan cara untuk menyelesaikannya. <br><br>  Bagian kedua dari artikel ini, di mana kita berbicara lebih banyak tentang otomatisasi pengujian layanan berbayar di aplikasi iOS, ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Ayo pergi! <br><br><h2>  Spesifikasi Tes Penagihan </h2><br>  Biasanya, tujuan bisnis adalah untuk menghasilkan pendapatan.  Di Badoo, jejaring sosial untuk kencan, pendapatan diperoleh dari pinjaman dan langganan premium.  Pinjaman adalah mata uang internal Badoo.  Dengan bantuan mereka, misalnya, Anda dapat meningkatkan profil Anda di hasil pencarian di tempat pertama, membuat hadiah kepada pengguna lain, dan banyak lagi.  Langganan premium berlaku untuk jangka waktu tertentu dan memberi Anda beberapa opsi sekaligus: nyalakan mode "tak terlihat", lihat orang-orang yang menunjukkan minat pada Anda, konfirmasikan keaslian akun Anda dan banyak lagi. <br><br>  Agar layanan berbayar ini berfungsi, kami menggunakan integrasi dengan lebih dari 70 penyedia pembayaran.  Pilihan penyedia tergantung pada platform, negara, perangkat, operator seluler dan faktor lainnya.  Karena itu, masalah pengujian layanan berbayar sangat mendesak. <br><br>  Untuk memulai, pertimbangkan mengapa pengujian layanan berbayar harus didekati dengan perhatian khusus.  Ada dua alasan. <br><br><h4>  1. Bug penagihan sangat penting untuk bisnis. </h4><br>  Masalah pertama adalah reputasi.  Pengguna yang membayar layanan menjadi lebih sensitif (dan kurang toleran) terhadap bug dalam aplikasi.  Setiap umpan balik di ruang publik, apakah itu ulasan aplikasi blog atau komentar di App Store atau Google Play, dari pengguna yang menemukan bug di layanan berbayar, akan lebih emosional - ini adalah faktor yang menyebabkan kehilangan reputasi. <br><br>  Masalah kedua adalah, segera setelah Anda mulai menerima uang dari pengguna untuk suatu layanan, Anda menjadi objek hukum yang melindungi konsumen dari layanan tersebut.  Dan kerugian reputasi dapat dengan mudah berubah menjadi kerugian finansial. <br><br>  Perusahaan kehilangan uang dalam tiga cara. <br><br>  Cara pertama adalah <b>pengembalian uang</b> .  Misalkan seorang pengguna menemukan bahwa Anda telah menjualnya layanan yang tidak memenuhi harapannya.  Dalam hal ini, dia akan menghubungi tim dukungan Anda.  Karyawannya melakukan penyelidikan dan mengetahui bahwa harapan pengguna benar-benar tidak terwujud karena bug dalam aplikasi.  Anda melakukan pengembalian uang.  Dalam hal ini, ada pengembalian uang: sebagai hasilnya, perusahaan dihadapkan pada untung yang hilang, dan ini adalah cara yang paling tidak berbahaya untuk kehilangan uang. <br><br>  Cara kedua adalah <b>tolak bayar</b> .  Misalkan situasi yang sama terjadi, hanya pengguna yang tidak menghubungi layanan dukungan Anda, tetapi bank yang mengeluarkannya kartu, atau penyedia pembayaran.  Bank / penyedia memulai pengembalian uang.  Dalam hal ini, kami berurusan dengan tolak bayar.  Bahaya untuk bisnis di sini bukan hanya pada untung yang hilang.  Setelah sejumlah tolak bayar tertentu, perusahaan menerima denda, dan peringkat risikonya menurun.  Penurunan peringkat, pada gilirannya, menyebabkan kenaikan biaya layanan penyedia pembayaran. <br><br>  Cara ketiga - <b>tuntutan hukum (klaim)</b> .  Dalam kasus-kasus yang paling diabaikan, tuntutan hukum (termasuk yang kolektif) dapat terjadi, yang mengarah ke konsekuensi paling serius.  Jadi, pada 2015, setelah gugatan oleh regulator Ofgem, British Gas terpaksa membayar kompensasi jutaan dolar kepada pengguna yang membebankan biaya lebih tinggi karena kesalahan dalam sistem pengisian.  Baca lebih lanjut tentang ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h4>  2. Untuk menguji integrasi, diperlukan pengetahuan dan keahlian. </h4><br>  Tim yang baru memulai proses integrasi dengan penyedia pembayaran sering menghadapi masalah ini.  Tidak mengetahui semua kemungkinan kasus tagihan, mereka kehilangan nuansa penting ketika mereka menyadari reaksi sistem terhadap pemberitahuan penyedia pembayaran. <br><br>  Ini dapat menyebabkan konsekuensi yang tidak terduga - mulai dari untung yang hilang hingga pengguna yang tidak puas. <br><br>  Mari kita lihat skema yang mencantumkan jenis layanan berbayar, dan pertimbangkan masalahnya dengan lebih cermat. <br><br><img src="https://habrastorage.org/webt/k0/qu/he/k0quhers6cgrorlijjpdjb8pex4.jpeg"><br>  <i><font color="gray">Gambar 1. Kasing penagihan yang memungkinkan</font></i> <br><br>  Ada tiga kasus utama: kesalahan, pembayaran yang berhasil, dan pengembalian uang kepada pengguna.  Tetapi setiap case memiliki detail, setiap case yang harus ditangani oleh sistem Anda secara berbeda. <br><br>  <b>Kesalahan</b> bisa menjadi kritis dan tidak kritis.  Kesalahan pemberitahuan dapat dikaitkan dengan non-kritis - ketika penyedia pembayaran menginformasikan tentang kurangnya dana di akun pengguna, dan pemblokiran kritis terhadap metode pembayaran pengguna.  Dan jika dalam kasus pertama Anda dapat mencoba untuk membayar nanti, maka dalam yang kedua - akan lebih baik untuk mencari tahu mengapa metode ini diblokir.  Mungkin pengguna terlihat dalam penipuan dan Anda harus lebih berhati-hati tentang transaksinya. <br><br>  <b>Pengembalian uang</b> .  Anda sudah tahu bahwa ada dua jenis pengembalian: pengembalian uang dan tagihan balik.  Sistem Anda harus merespons secara berbeda terhadap mereka.  Misalnya, setelah tolak bayar, masuk akal untuk berpikir tentang memblokir beberapa fungsi aplikasi Anda untuk pengguna, karena tolak bayar adalah salah satu metode penipuan paling populer. <br><br>  <b>Pembayaran yang berhasil</b> mungkin merupakan <b>pembayaran</b> satu kali, atau mungkin berlangganan. <br><br>  Pembayaran sekali saja dapat dikonsumsi dan tidak dapat dikonsumsi.  Sebagai contoh pembayaran yang dihabiskan, kami memeriksa di awal artikel - ini adalah pinjaman di Badoo.  Contoh pembayaran yang tidak dapat dihabiskan dapat diberikan dari game.  Misalkan Anda memiliki karakter yang Anda mainkan.  Anda ingin membeli untuknya kekuatan super yang telah ada selama beberapa waktu.  Dalam hal ini, pembelian termasuk dalam kelas pembayaran yang tidak dapat dibuang. <br><br>  <b>Berlangganan</b>  Ini adalah variasi terbesar kasus.  Selain pembelian awal berlangganan, Anda mungkin memiliki: <br><br><ul><li>  pembaruan langganan (perpanjangan); <br></li><li>  tutup langganan (batal berlangganan); <br></li><li>  langganan uji coba (uji coba); <br></li><li>  berlangganan masa tenggang: ketika kami tidak dapat memperbarui berlangganan dan mencoba membayar lagi untuk jangka waktu yang disebut masa tenggang.  Untuk pengguna, masa tenggang terlihat seperti ini.  Misalkan Anda membeli langganan koran bulanan.  Perusahaan yang mengirimi Anda surat kabar mencoba menghapus pembayaran untuk bulan berlangganan berikutnya setelah akhir bulan pertama, tetapi tidak dapat melakukan ini (karena kunci kartu, kurangnya dana di akun, dll.).  Jika masa berlaku masa tenggang adalah sepuluh hari, maka selama waktu ini perusahaan mencoba untuk menghapus pembayaran, sementara langganan tetap berlaku.  Jika perusahaan tidak dapat menghapus uang, langganan dibatalkan.  Jika ya, langganan diperbarui dari tanggal pembayaran terakhir; <br></li><li>  pembayaran parsial (tagihan parsial).  Misalnya, PayPal memungkinkan Anda melakukan pembayaran sebagian jika akun pengguna tidak memiliki cukup dana (pembayaran sebagian), atau memecah pembayaran menjadi beberapa bagian (sebagian faktur). <br></li></ul><br>  Anda juga perlu mempertimbangkan dua karakteristik yang sepenuhnya bergantung pada penyedia pembayaran: langganan dapat dikontrol oleh aplikasi Anda atau dikelola secara eksternal. <br><br><ul><li>  Langganan yang dikelola secara internal adalah, misalnya, langganan yang menggunakan kartu kredit atau PayPal, ketika setelah pembayaran pertama Anda diberikan token yang Anda gunakan untuk mendaftar ulang ke penyedia, tanpa memiliki rincian pembayaran pengguna. <br></li><li>  Langganan yang dikelola secara eksternal adalah ketika agregator pembayaran mengambil kendali penuh atas langganan Anda dan hanya mengirimi Anda pemberitahuan tentang status mereka saat ini. <br></li></ul><br>  Dalam gambar, area yang paling jelas, reaksi yang biasanya diwujudkan pada awalnya, disorot dengan warna ungu.  Semua yang lain mulai diperhitungkan jauh kemudian, sebagai akumulasi keahlian.  Ini sebagian besar difasilitasi oleh aplikasi yang salah dari metodologi pengembangan berulang di bidang penagihan. <br><br><img src="https://habrastorage.org/webt/7x/kf/bj/7xkfbjf-z3shfhzuftrl3p0tms4.jpeg"><br>  <i><font color="gray">Gambar 2. Kasus penagihan yang terutama diimplementasikan dalam sistem</font></i> <br><br>  Implementasi bertahap seperti itu dapat menyebabkan konsekuensi yang tidak terduga.  Misalnya, dalam salah satu proyek yang saya kerjakan sebelum Badoo, kemungkinan untuk melakukan pengembalian dana tidak diperhitungkan.  Akibatnya, semua pengembalian dilakukan bukan melalui pengembalian uang, tetapi melalui tolak bayar, yang secara negatif mempengaruhi peringkat risiko perusahaan dan menyebabkan kegagalan dalam mengumpulkan statistik pendapatan.  Ketidaktahuan tentang seluruh ragam kasus tagihan dapat menyebabkan hilangnya keuntungan atau kerentanan perusahaan terhadap pengguna yang merasa ditipu. <br><br>  Jadi, di satu sisi, bug dalam pemrosesan pembayaran harus ditemukan sebelum dirilis, karena mereka dapat menyebabkan konsekuensi paling negatif.  Jika tidak memungkinkan untuk melakukan ini, penting untuk segera menyadari bahwa bug masuk ke versi rilis aplikasi, memperbaikinya dan, yang paling penting, apa yang banyak orang lupa, "meyakinkan" pengguna yang menemukan bug ini. <br><br>  Di sisi lain, situasinya diperumit oleh fakta bahwa integrasi dengan penyedia pembayaran selalu berinteraksi dengan kotak hitam, yang menambahkan banyak variabel ke proses pengujian. <br><br><h2>  Masalah teknis selama pengujian penagihan </h2><br>  Mari kita pertimbangkan mereka pada contoh integrasi Badoo dengan App Store. <br><br>  Langganan di App Store milik kelas yang dikelola secara eksternal, yaitu, mereka dikelola sepenuhnya di pihak penyedia, dan sistem kami hanya dapat meminta status saat ini atau menerima pemberitahuan perubahannya. <br><br>  Kami secara khusus memilih integrasi ini, karena ini adalah yang paling kompleks dan berisi semua ragam kasus yang dapat ditemukan dalam proses mengintegrasikan layanan dengan penyedia pembayaran lainnya. <br><br>  Untuk mulai dengan, kami beralih ke pembelian sekali pakai. <br><br><img src="https://habrastorage.org/webt/ob/xi/rd/obxirdlzjhofj6uvioqwixp-r2k.png"><br>  <i><font color="gray">Gambar 3. Proses melakukan pembayaran sekali pakai</font></i> <br><br>  Pada langkah 1, pengguna membuat permintaan untuk membeli layanan.  Aplikasi memutuskan bahwa pembayaran harus dilakukan, dan pada langkah 2, kontrol ditransfer ke penyedia pembayaran (App Store).  Langkah 3: pengguna diberikan formulir untuk melakukan pembayaran.  Langkah 4: pengguna menyediakan data untuk pembayaran.  Langkah 5: penyedia menyelesaikan transaksi dan melaporkan hasilnya ke aplikasi, mengembalikan tanda terima yang berisi informasi lengkap tentang pembelian (tanggal, layanan, status, dll.).  Langkah 6: cek, ditambah dengan data pengguna, dikirim ke server untuk diproses.  Server memproses data pemeriksaan dan menghasilkan pemberitahuan push untuk aplikasi pada langkah ketujuh.  Pada langkah kedelapan, pemberitahuan ditampilkan kepada pengguna. <br><br>  Masalahnya adalah bahwa langkah 3, 4 dan 5 dilakukan di sisi penyedia pembayaran, secara praktis tidak dikendalikan oleh kami dan dapat memiliki berbagai variasi.  Dengan demikian, proses sebenarnya tidak memiliki struktur linier, seperti yang ditunjukkan pada Gambar 2, tetapi yang bercabang (lihat Gambar 4), dan masing-masing cabang harus ditangani secara berbeda oleh aplikasi. <br><br><img src="https://habrastorage.org/webt/8h/ur/mv/8hurmv5_d6mact7vy90jcdb9s_i.png"><br>  <i><font color="gray">Gambar 4. Percabangan diagram keadaan pembayaran satu kali</font></i> <br><br>  Membeli langganan dimulai dengan cara yang sama dengan pembayaran satu kali, tetapi kontrol lebih lanjut dari proses ini cukup sulit untuk dikendalikan. <br><br><img src="https://habrastorage.org/webt/lj/di/eb/ljdiebqce8tfo236xv8gir0jaa4.png"><br>  <i><font color="gray">Gambar 5. Status langganan yang dikelola secara eksternal</font></i> <br><br>  Biarkan saya mengingatkan Anda bahwa langganan Apple, yang kami anggap sebagai contoh, dikelola secara eksternal.  Ini berarti bahwa pengguna setelah pembelian dapat mengelolanya secara tidak sinkron: tutup, ubah tanggal kedaluwarsa, minta pengembalian dana.  Kita melihat ini pada langkah 9. Karena tindakan terjadi di luar sistem kami, pada gambar saya menandainya dengan garis putus-putus. <br><br>  Pada langkah 10, App Store dapat mengubah status berlangganan: perpanjang, tutup, masukkan masa tenggang di jendela. <br><br>  Agar kami dapat mengetahui status berlangganan, ada langkah 11, yang khusus untuk agregator seperti App Store dan Google Wallet.  Pada langkah ini, sistem mengirimkan token, yang digunakan sebagai tanda terima yang diterima di awal ketika membeli langganan atau setelah pembaruan sebelumnya. <br><br>  Langkah 12 adalah respons penyedia.  Kami menerima cek dengan status berlangganan saat ini.  Hasil dalam langkah ini tergantung pada langkah asinkron 9 dan 10. <br><br>  Pada musim gugur 2018, Apple untuk semua menerapkan mekanisme <b>notifikasi server-ke-server</b> , yang memungkinkan Anda memberi tahu tentang perubahan yang terjadi dengan berlangganan.  Tanda terima pemberitahuan tersebut ditunjukkan pada langkah 13. Untuk sebagian besar penyedia lain, mekanisme pemberitahuan server-ke-server adalah satu-satunya, sehingga dapat diperdebatkan bahwa contoh Apple mencakup seluruh variasi kasus.  Dalam hal penyedia lain, langkah 13 memungkinkan Anda untuk mengecualikan langkah 11 dan 12 dari skema. <br><br>  Pada langkah 14, server menghasilkan respons untuk aplikasi untuk mengubah status berlangganan. <br><br>  Dengan demikian, kami mendapat grafik lengkap negara yang harus dilewati untuk memeriksa layanan berbayar. <br><br><img src="https://habrastorage.org/webt/tg/he/vx/tghevxtlppxvc9xuqt4wczbav0s.png"><br>  <i><font color="gray">Gambar 6. Proses lengkap mengubah status pembayaran (menggunakan contoh berlangganan yang dikelola secara eksternal)</font></i> <br><br>  Bagian-bagian yang tidak kita kontrol dalam sistem kita berwarna oranye, dan mereka adalah kotak hitam untuk kita. <br><br><h2>  Metode Pengujian Penagihan </h2><br>  Jadi, masalah teknis utama ketika menguji layanan berbayar adalah keberadaan "kotak hitam", yang hanya sedikit kita kendalikan.  Ini mendefinisikan seperangkat metode yang dapat mencakup seluruh ragam kasus. <br><br>  Tidak banyak metode ini, dan kami membaginya menjadi tiga kategori: pembayaran riil, kotak pasir, dan penghapusan ketergantungan eksternal dari "kotak hitam". <br><br><h3>  Pembayaran nyata </h3><br>  Pembayaran riil sebagai metode uji bagus karena memberikan gagasan yang jelas tentang kondisi integrasi.  Kesalahan dalam melakukan pembayaran nyata adalah bukti bug tanpa syarat. <br><br>  Kalau tidak, pembayaran riil buruk.  Pertama, itu mahal: jelas bahwa untuk melakukan pembayaran nyata, Anda perlu menghabiskan uang nyata.  Anda salah jika Anda berpikir bahwa pada akhirnya seluruh jumlah akan dikembalikan ke perusahaan: pertama, penyedia membebankan biaya untuk setiap transaksi, ukurannya, seperti yang dijelaskan di atas, tergantung pada peringkat risiko organisasi dan dapat mencapai 40% (dan bahkan lebih) ;  kedua, Anda mungkin kehilangan uang saat menguji pembayaran di negara lain karena penyebaran mata uang - perbedaan antara kurs pembelian dan penjualan mata uang (Anda akan melakukan pembelian dengan kurs jual mata uang asing bank, dan pengembaliannya akan terjadi pada kurs pembelian). <br><br>  Selain itu, metode ini dapat memakan waktu lama, karena Anda harus menunggu akhir periode perpanjangan berlangganan, penyelesaian masa tenggang, dan ini bisa berbulan-bulan. <br><br><h3>  Kotak pasir </h3><br>  Kotak pasir itu indah.  Ini, pada kenyataannya, adalah fungsi yang sama yang diberikan penyedia pembayaran kepada kita dalam hal pembayaran nyata, tetapi tanpa menghabiskan uang nyata.  Ini sepenuhnya didukung oleh penyedia, yang berarti integrasi dengan kotak pasir itu murah. <br><br>  Masalah panjangnya pengujian dari waktu ke waktu diselesaikan, sebagai suatu peraturan, menggunakan berbagai trik.  Misalnya, kotak pasir App Store menggunakan konversi kedaluwarsa berlangganan berikut. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Berlangganan waktu nyata <br></td><td>  Waktu Berlangganan Apple Sandbox <br></td></tr><tr><td>  1 minggu <br></td><td>  3 menit <br></td></tr><tr><td>  1 bulan <br></td><td>  5 menit <br></td></tr><tr><td>  2 bulan <br></td><td>  10 menit <br></td></tr><tr><td>  3 bulan <br></td><td>  15 menit <br></td></tr><tr><td>  6 bulan <br></td><td>  30 menit <br></td></tr><tr><td>  1 tahun <br></td><td>  1 jam <br></td></tr></tbody></table></div>  <i><font color="gray">Tabel 1. Rasio masa berlaku berlangganan asli dan berlangganan di kotak pasir Apple</font></i> <br><br>  Langganan kotak pasir Google Wallet terdaftar di tabel 2 dan dapat dikonfigurasi di konsol penjual. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Berlangganan waktu nyata <br></td><td>  Waktu Berlangganan Google Sandbox <br></td></tr><tr><td>  1 minggu <br></td><td>  5 menit <br></td></tr><tr><td>  1 bulan <br></td><td>  5 menit <br></td></tr><tr><td>  3 bulan <br></td><td>  10 menit <br></td></tr><tr><td>  6 bulan <br></td><td>  15 menit <br></td></tr><tr><td>  1 tahun <br></td><td>  30 menit <br></td></tr></tbody></table></div>  <i><font color="gray">Tabel 2. Mengatur durasi berlangganan di kotak pasir Google</font></i> <br><br>  Berbeda dengan kotak pasir Apple, Anda juga dapat memeriksa uji coba, masa tenggang, dll., Di kotak pasir Google, menggunakan rasio dari Tabel 3. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Berlangganan waktu nyata <br></td><td>  Waktu Berlangganan Google Sandbox <br></td></tr><tr><td>  Masa percobaan <br></td><td>  3 menit <br></td></tr><tr><td>  Masa Uji Coba (pengantar) <br></td><td>  Sama dengan waktu berlangganan yang sesuai <br></td></tr><tr><td>  Masa tenggang (3/7 hari) <br></td><td>  5 menit <br></td></tr><tr><td>  Penguncian akun sementara (tahan) <br></td><td>  10 menit <br></td></tr><tr><td>  Jeda (1/2/3 bulan) <br></td><td>  5/10/15 menit (masing-masing) <br></td></tr></tbody></table></div>  <i><font color="gray">Tabel 3. Validitas fitur berlangganan tambahan di kotak pasir Google</font></i> <br><br>  Menutup langganan juga dapat diimplementasikan dengan berbagai cara: di kotak pasir App Store, penutupan dilakukan setelah pembaruan kelima, dan di Google Wallet itu dilakukan dari konsol penjual atau pada perangkat dari Play Store. <br><br>  Masalah dengan kotak pasir adalah bahwa penyedia memiliki sikap yang berbeda terhadap kualitas mereka.  Pengalaman kami menunjukkan bahwa dari lebih dari 70 penyedia pembayaran yang terintegrasi ke Badoo, hanya dua kotak pasir yang memiliki fungsionalitas penuh dan operasi yang stabil.  Ini adalah kotak pasir Adyen dan PayPal.  Penyedia lain memiliki stabil, tetapi terpotong dalam hal fungsi kotak pasir (seperti Google Wallet), atau tidak stabil dan sangat terpotong dalam fungsionalitas (seperti App Store dan Fortumo).  Dan ada penyedia yang tidak memiliki dan tidak akan memiliki kotak pasir sama sekali. <br><br><img src="https://habrastorage.org/webt/iz/as/im/izasimha0d95e0w214ym9kyfhcy.png"><br>  <i><font color="gray">Gambar 7. Klasifikasi kotak pasir berdasarkan stabilitas dan fungsionalitas</font></i> <br><br><h3>  Menghapus ketergantungan eksternal </h3><br>  Jika kami meyakinkan Anda bahwa pengujian menggunakan pembayaran riil mahal dan tidak efisien, dan penyedia pembayaran tidak menyediakan kotak pasir dengan kualitas yang tepat, maka tetap beralih ke berbagai cara untuk menghilangkan ketergantungan eksternal.  Hanya ada tiga di antaranya: moki, palsu, dan bertopik. <br><br>  Moki dalam penagihan adalah pembentukan reaksi sistem Anda terhadap permintaan dengan parameter yang telah ditentukan tanpa panggilan nyata ke penyedia pembayaran (lihat Gambar 8).  Misalnya, permintaan ke penyedia pembayaran SMS ke nomor + 7111-111-11-11 dicegat pada tahap pengiriman permintaan ke penyedia dan menghasilkan respons sistem dalam bentuk pembayaran yang berhasil.  Permintaan ke nomor + 7111-111-11-12 juga disadap, tetapi menyebabkan reaksi terhadap kesalahan dengan kode "Tidak ada cukup uang untuk menyelesaikan transaksi." <br><br><img width="340" src="https://habrastorage.org/webt/cb/zi/xy/cbzixy8v5c16-fjdnobzksxoij4.png"><br>  <i><font color="gray">Gambar 8. Diagram tiruan</font></i> <br><br>  Palsu dalam penagihan adalah palsu notifikasi (seolah-olah berasal dari penyedia nyata) (lihat Gambar 9).  Integrasi dengan masing-masing penyedia menyiratkan serangkaian reaksi sistem terbatas pada serangkaian jenis pemberitahuan atau pengaturan ulang yang terbatas.             (      ),          . <br><br><img width="340" src="https://habrastorage.org/webt/t5/nz/_h/t5nz_hwuq-49im9ow_csqennjh4.png"><br> <i><font color="gray"> 9.  </font></i> <br><br>    —               (. . 10),                        . <br><br><img width="340" src="https://habrastorage.org/webt/-z/3p/f8/-z3pf8attjz-fiitaqbanlhmbbe.png"><br> <i><font color="gray"> 10.  </font></i> <br><br>          ,      ,                     .      (, , )      .  ,      , ,             ,   . <br><br>      .  3, 4, 5    :    ,      .             -   :          ,    —   ,    —  .     «  ». <br><br><img src="https://habrastorage.org/webt/2p/cu/w-/2pcuw-rvhju4ngyzr3ez7rqlhco.png"><br> <i><font color="gray"> 11.            (     App Store)</font></i> <br><br>   ,       (,      ).   —      ,     .       . ,   ,           ,            .    ,          . ,              . <br><br><h2>     </h2><br>      .   ,          ?        : <br><br><ul><li>    —          ? <br></li><li>   end-to-end —    :             -  ? <br></li><li>  —   :     ,        . <br></li></ul><br>      . <br><br><img src="https://habrastorage.org/webt/ck/sn/re/cksnrehqrplo3q14juwsyrar31m.png"><br> <i><font color="gray"> 4.     </font></i> <br><br> <b> .</b>    .     .     ,      .   :     ,   . <br><br> <b>.</b> , ,  Apple  Google, .        (   ).      end-to-end :           .  , ,   . <br><br> <b>, , </b> —   .      .            .  :         . <br><br><h2>    </h2><br>    ,       ,     . <br><br>      ,        .         . <br><br>      :     .  ,     , —            . <br><br>         ,    :     — , , ;     —    :    . <br><br><img src="https://habrastorage.org/webt/hc/rg/ka/hcrgka-jxqtj6rftvexttwrlvqw.jpeg"><br> <i><font color="gray"> 12.        </font></i> <br><br><h2>     </h2><br>   ,  ,       ,      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> . <br><br>      ,      12,      Badoo. <br><br><h4>     </h4><br>          .       .    QA-      .   ,    . ,  -   ,              ,   .   ,         . <br><br>  :      . <br><br><h4>      </h4><br>  ,      , —     . ,    Apple      .         .   ,     .       :            -  . <br><br>   — ,   . -,       . -,    ,  -,   ,          . <br><br>      —    :                    ,   Apple   .       1  — ,         . <br><br><h4>      </h4><br>            .          ,       .        ,     -    . <br><br>          ,             (       ). <br><br><h2>  Kesimpulan </h2><br><ol><li>      ,          . <br></li><li>       (     )         .           ,          . <br></li><li>     « »  ,     .     -         —     .     ,  : ,    —  ,     —     . <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika menggunakan palsu, mokas, dan bertopik, penting untuk diingat bahwa ini adalah model pembayaran nyata, dan, seperti model lainnya, mereka memiliki tingkat perkiraan terhadap realitas dan risiko. </font><font style="vertical-align: inherit;">Risiko-risiko ini harus dinilai dan ditanggung oleh pembayaran aktual atau dengan cek tambahan.</font></font><br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang bagaimana kami berhasil mencapai otomatisasi yang stabil dan murah dari pengujian layanan berbayar di aplikasi iOS, kami akan memberi tahu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di artikel berikutnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih atas perhatian anda! </font><font style="vertical-align: inherit;">Semua keuntungan besar dan lebih sedikit bug!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459650/">https://habr.com/ru/post/id459650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459638/index.html">Menciptakan basis pengetahuan global tentang baterai</a></li>
<li><a href="../id459640/index.html">Dokumen sebagai Kode. Bagian 1: mengotomatiskan pembaruan</a></li>
<li><a href="../id459642/index.html">Akses aman untuk mendaftarkan bidang dalam C ++ tanpa mengorbankan efisiensi (menggunakan CortexM sebagai contoh)</a></li>
<li><a href="../id459644/index.html">Dimmer LED</a></li>
<li><a href="../id459648/index.html">Semuanya harus baik-baik saja dalam penganalisa: fungsionalitas dan antarmuka ... Kami sedang mengeksplorasi antarmuka appScreener 3.1 baru Solar</a></li>
<li><a href="../id459652/index.html">Pendekatan pengujian regresi otomatis</a></li>
<li><a href="../id459656/index.html">Layanan OData tanpa menulis kode</a></li>
<li><a href="../id459658/index.html">PVS-Studio ingin tetapi tidak dapat menemukan bug di robots.txt</a></li>
<li><a href="../id459662/index.html">PVS-Studio ingin, tetapi tidak dapat menemukan bug di robots.txt</a></li>
<li><a href="../id459668/index.html">Cara mengenali teks dari foto: fitur baru kerangka Visi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>