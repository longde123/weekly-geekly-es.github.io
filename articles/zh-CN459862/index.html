<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸš’ ğŸ‘©ğŸ»â€âœˆï¸ ğŸ‘ğŸ¿ Berkeley DB STLæ¥å£ ğŸ’´ ğŸ† â˜„ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHa ä¸ä¹…å‰ï¼Œå¯¹äºæˆ‘çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªåµŒå…¥å¼æ•°æ®åº“æ¥å­˜å‚¨é”®å€¼å…ƒç´ ï¼Œæä¾›äº‹åŠ¡æ”¯æŒä»¥åŠåŠ å¯†æ•°æ®ï¼ˆå¯é€‰ï¼‰ã€‚ ç»è¿‡çŸ­æš‚æœç´¢ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªBerkeley DBé¡¹ç›®ã€‚ é™¤äº†æˆ‘éœ€è¦çš„åŠŸèƒ½ä¹‹å¤–ï¼Œè¯¥æ•°æ®åº“è¿˜æä¾›äº†ä¸€ä¸ªä¸STLå…¼å®¹çš„æ¥å£ï¼Œä½¿æ‚¨å¯ä»¥åƒä½¿ç”¨å¸¸è§„ï¼ˆå‡ ä¹æ™®é€šï¼‰çš„STLå®¹å™¨ä¸€æ ·ä½¿ç”¨è¯¥æ•°æ®åº“ã€‚ å®é™…ä¸Šï¼Œä¸‹é¢...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Berkeley DB STLæ¥å£</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459862/"><p> å“ˆHa ä¸ä¹…å‰ï¼Œå¯¹äºæˆ‘çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªåµŒå…¥å¼æ•°æ®åº“æ¥å­˜å‚¨é”®å€¼å…ƒç´ ï¼Œæä¾›äº‹åŠ¡æ”¯æŒä»¥åŠåŠ å¯†æ•°æ®ï¼ˆå¯é€‰ï¼‰ã€‚ ç»è¿‡çŸ­æš‚æœç´¢ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Berkeley DB</a>é¡¹ç›®ã€‚ é™¤äº†æˆ‘éœ€è¦çš„åŠŸèƒ½ä¹‹å¤–ï¼Œè¯¥æ•°æ®åº“è¿˜æä¾›äº†ä¸€ä¸ªä¸STLå…¼å®¹çš„æ¥å£ï¼Œä½¿æ‚¨å¯ä»¥åƒä½¿ç”¨å¸¸è§„ï¼ˆå‡ ä¹æ™®é€šï¼‰çš„STLå®¹å™¨ä¸€æ ·ä½¿ç”¨è¯¥æ•°æ®åº“ã€‚ å®é™…ä¸Šï¼Œä¸‹é¢å°†è®¨è®ºæ­¤æ¥å£ã€‚ </p><a name="habracut"></a><br><h2 id="berkeley-db"> ä¼¯å…‹åˆ©åˆ†è´ </h2><br><p>  <strong>Berkeley DB</strong>æ˜¯ä¸€ä¸ªåµŒå…¥å¼ï¼Œå¯æ‰©å±•ï¼Œé«˜æ€§èƒ½çš„å¼€æºæ•°æ®åº“ã€‚ å®ƒå¯å…è´¹ç”¨äº<strong>å¼€æ”¾æºä»£ç </strong>é¡¹ç›®ï¼Œä½†å¯¹äºä¸“æœ‰é¡¹ç›®åˆ™æœ‰å¾ˆå¤šé™åˆ¶ã€‚ æ”¯æŒçš„åŠŸèƒ½ï¼š </p><br><ul><li> äº¤æ˜“ </li><li> æ•…éšœè½¬ç§»æ—¥å¿— </li><li>  <strong>AES</strong>æ•°æ®<strong>åŠ å¯†</strong> </li><li> å¤åˆ¶ </li><li> æŒ‡æ ‡ </li><li> å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºçš„åŒæ­¥å·¥å…· </li><li> è®¿é—®ç­–ç•¥-ä¸€ä½ä½œå®¶ï¼Œå¾ˆå¤šè¯»è€… </li><li> å¿«å– </li></ul><br><p> ä»¥åŠè®¸å¤šå…¶ä»–ã€‚ </p><br><p> åˆå§‹åŒ–ç³»ç»Ÿåï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šè¦ä½¿ç”¨çš„å­ç³»ç»Ÿã€‚ è¿™æ ·å¯ä»¥æ¶ˆé™¤ä¸å¿…è¦çš„èµ„æºæµªè´¹ï¼Œä¾‹å¦‚äº‹åŠ¡ï¼Œæ—¥å¿—ï¼Œé”ç­‰æ“ä½œã€‚ </p><br><p> å¯ä»¥é€‰æ‹©å­˜å‚¨ç»“æ„å’Œæ•°æ®è®¿é—®ï¼š </p><br><ul><li>  <strong>Btree-</strong>æ’åºå¹³è¡¡æ ‘çš„å®ç° </li><li>  <strong>å“ˆå¸Œ</strong> -çº¿æ€§å“ˆå¸Œå®ç° </li><li>  <strong>å †</strong> -ä½¿ç”¨æŒ‰é€»è¾‘åˆ†é¡µçš„<em>å †æ–‡ä»¶</em>è¿›è¡Œå­˜å‚¨ã€‚ æ¯ä¸ªæ¡ç›®å‡ç”±é¡µé¢åŠå…¶å†…çš„åç§»é‡æ ‡è¯†ã€‚ å­˜å‚¨çš„ç»„ç»‡æ–¹å¼ä½¿å¾—åˆ é™¤è®°å½•ä¸éœ€è¦å‹ç¼©ã€‚ è¿™ä½¿æ‚¨å¯ä»¥åœ¨ç¼ºä¹ç‰©ç†ç©ºé—´çš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒã€‚ </li><li>  <strong>é˜Ÿåˆ—</strong> -ä¸€ç§é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨å›ºå®šé•¿åº¦çš„è®°å½•ï¼Œå¹¶ä»¥é€»è¾‘æ•°å­—ä½œä¸ºé”®ã€‚ å®ƒè®¾è®¡ç”¨äºåœ¨æœ«å°¾å¿«é€Ÿæ’å…¥ï¼Œå¹¶æ”¯æŒä¸€ç§ç‰¹æ®Šæ“ä½œï¼Œè¯¥æ“ä½œå¯åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­ä»é˜Ÿåˆ—çš„å¼€å¤´åˆ é™¤å¹¶è¿”å›ä¸€ä¸ªæ¡ç›®ã€‚ </li><li>  <strong>Recno-</strong>å…è®¸æ‚¨ä½¿ç”¨é€»è¾‘æ•°å­—ä½œä¸ºé”®æ¥ä¿å­˜å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦çš„è®°å½•ã€‚ é€šè¿‡å…¶ç´¢å¼•æä¾›å¯¹å…ƒç´ çš„è®¿é—®ã€‚ </li></ul><br><p> ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæœ‰å¿…è¦å®šä¹‰å‡ ä¸ªç”¨äºæè¿°<strong>Berkeley DB</strong>å·¥ä½œçš„æ¦‚å¿µã€‚ </p><br><p>  <em>æ•°æ®åº“</em>æ˜¯é”®å€¼<em>æ•°æ®</em>å­˜å‚¨ã€‚ ä¸€ä¸ªè¡¨å¯ä»¥ä¸å…¶ä»–DBMSä¸­<em>çš„</em> <strong>Berkeley DB</strong>æ•°æ®åº“ç±»ä¼¼ã€‚ </p><br><p>  <em>æ•°æ®åº“ç¯å¢ƒ</em>æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª<em>æ•°æ®åº“</em>çš„åŒ…è£…ã€‚ å®šä¹‰æ‰€æœ‰<em>æ•°æ®åº“çš„</em>å¸¸è§„è®¾ç½®ï¼Œä¾‹å¦‚ç¼“å­˜å¤§å°ï¼Œæ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼Œé˜»å¡çš„ä½¿ç”¨å’Œé…ç½®ï¼Œäº‹åŠ¡ï¼Œæ—¥å¿—è®°å½•å­ç³»ç»Ÿã€‚ </p><br><p> åœ¨å…¸å‹çš„ç”¨ä¾‹ä¸­ï¼Œåˆ›å»ºå¹¶é…ç½®äº†ä¸€ä¸ª<em>ç¯å¢ƒ</em> ï¼Œè¯¥<em>ç¯å¢ƒ</em>å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª<em>æ•°æ®åº“</em> ã€‚ </p><br><h2 id="stl-interfeys">  STLæ¥å£ </h2><br><p>  <strong>Berkeley DB</strong>æ˜¯ç”¨<strong>C</strong>ç¼–å†™çš„åº“<strong>ã€‚</strong> å®ƒå…·æœ‰è¯¸å¦‚<strong>Perl</strong> ï¼Œ <strong>Java</strong> ï¼Œ <strong>PHP</strong>ç­‰è¯­è¨€çš„<strong>æ´»é¡µå¤¹</strong> ã€‚  <strong>C ++</strong>çš„æ¥å£æ˜¯å¸¦æœ‰å¯¹è±¡å’Œç»§æ‰¿çš„<strong>C</strong>ä»£ç çš„åŒ…è£…ã€‚ ä¸ºäº†èƒ½å¤Ÿåƒä½¿ç”¨<strong>STL</strong>å®¹å™¨è¿›è¡Œæ“ä½œä¸€æ ·è®¿é—®æ•°æ®åº“ï¼Œæœ‰ä¸€ä¸ª<strong>STL</strong>æ¥å£ä½œä¸º<strong>C ++</strong>çš„é™„åŠ ç»„ä»¶ã€‚ åœ¨å›¾å½¢å½¢å¼ä¸­ï¼Œç•Œé¢å±‚å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><p><img src="https://habrastorage.org/webt/k9/0u/gw/k90ugwajcb5xsts9zxn7e6urjew.png"></p><br><p>å› æ­¤ï¼Œ <strong>STL</strong>æ¥å£ç±»ä¼¼äº<code>std::map</code>æˆ–<code>std::vector</code>å®¹å™¨ï¼Œä½¿æ‚¨å¯ä»¥é€šè¿‡é”®ï¼ˆå¯¹äº<strong>Btree</strong>æˆ–<strong>Hash</strong> ï¼‰æˆ–é€šè¿‡ç´¢å¼•ï¼ˆå¯¹äº<strong>Recno</strong> ï¼‰ä»æ•°æ®åº“ä¸­æ£€ç´¢å…ƒç´ ï¼Œå¹¶é€šè¿‡æ ‡å‡†<code>std::find_if</code>åœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œé€šè¿‡<code>foreach</code>éå†æ•´ä¸ªæ•°æ®åº“ã€‚  <strong>Berkeley DB</strong> <strong>STL</strong>æ¥å£çš„æ‰€æœ‰ç±»å’ŒåŠŸèƒ½éƒ½åœ¨<strong>dbstl</strong>å‘½åç©ºé—´ä¸­ï¼Œç®€è€Œè¨€ä¹‹ï¼Œ <strong>dbstl</strong>ä¹Ÿè¡¨ç¤º<strong>STL</strong>æ¥å£ã€‚ </p><br><h2 id="ustanovka"> å®‰è£…æ–¹å¼ </h2><br><p> è¯¥æ•°æ®åº“æ”¯æŒå¤§å¤šæ•°<strong>Linux</strong> <strong>å¹³å°</strong> ï¼Œ <strong>Windows</strong> ï¼Œ <strong>Android</strong> ï¼Œ <strong>Apple iOS</strong>ç­‰ã€‚ </p><br><p> å¯¹äº<strong>Ubuntu 18.04ï¼Œ</strong>åªéœ€å®‰è£…ä»¥ä¸‹è½¯ä»¶åŒ…ï¼š </p><br><ul><li>  libdb5.3-stl-dev </li><li>  libdb5.3 ++-å¼€å‘ </li></ul><br><p> è¦ä»<strong>Linux</strong>æºç æ„å»ºï¼Œæ‚¨éœ€è¦å®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">autoconf</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">libtool</a> ã€‚ æœ€æ–°çš„æºä»£ç å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œæˆ‘ä¸‹è½½çš„å½’æ¡£æ–‡ä»¶çš„ç‰ˆæœ¬<strong>ä¸º</strong> 18.1.32-db-18.1.32.zipã€‚ æ‚¨éœ€è¦è§£å‹ç¼©å­˜æ¡£å¹¶è½¬åˆ°æºæ–‡ä»¶å¤¹ï¼š </p><br><pre> <code class="plaintext hljs">unzip db-18.1.32.zip cd db-18.1.32</code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç§»è‡³<strong>build_unix</strong>ç›®å½•å¹¶è¿è¡Œç»„è£…å’Œå®‰è£…ï¼š </p><br><pre> <code class="plaintext hljs">cd build_unix ../dist/configure --enable-stl --prefix=/home/user/libraries/berkeley-db make make install</code> </pre> <br><h2 id="dobavlenie-v-cmake-proekt"> æ·»åŠ åˆ°cmakeé¡¹ç›® </h2><br><p>  <strong>BerkeleyDBSamples</strong>é¡¹ç›®ç”¨äºè¯´æ˜<strong>Berkeley DBçš„</strong>ç¤ºä¾‹ã€‚ </p><br><p> è¯¥é¡¹ç›®çš„ç»“æ„å¦‚ä¸‹ï¼š </p><br><pre> <code class="plaintext hljs">+-- CMakeLists.txt +-- sample-usage | +-- CMakeLists.txt | +-- sample-map-usage.cpp | +-- submodules | +-- cmake | | +-- FindBerkeleyDB</code> </pre> <br><p> æ ¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CMakeLists.txt</a>æè¿°äº†é¡¹ç›®çš„å¸¸è§„å‚æ•°ã€‚ æ ·æœ¬æºæ–‡ä»¶åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">sample-usageä¸­</a> ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">sample-usage / CMakeLists.txt</a>æœç´¢åº“ï¼Œå®šä¹‰ç¤ºä¾‹çš„æ±‡ç¼–ã€‚ </p><br><p> åœ¨ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FindBerkeleyDB</a>å°†åº“è¿æ¥åˆ°<strong>cmake</strong>é¡¹ç›®ã€‚ å®ƒä½œä¸º<strong>git</strong>å­æ¨¡å—æ·»åŠ åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">submodules / cmakeä¸­</a> ã€‚ åœ¨ç»„è£…æœŸé—´ï¼Œæ‚¨å¯èƒ½éœ€è¦æŒ‡å®š<code>BerkeleyDB_ROOT_DIR</code> ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä»æºå®‰è£…çš„ä¸Šè¿°åº“ï¼Œå¿…é¡»æŒ‡å®šæ ‡å¿—<strong>cmake</strong> <code>-DBerkeleyDB_ROOT_DIR=/home/user/libraries/berkeley-db</code> ã€‚ </p><br><p> åœ¨æ ¹æ–‡ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CMakeLists.txtä¸­</a> ï¼Œå°†<strong>FindBerkeleyDB</strong>æ¨¡å—çš„è·¯å¾„æ·»åŠ åˆ°<strong>CMAKE_MODULE_PATH</strong> ï¼š </p><br><pre> <code class="plaintext hljs">list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/submodules/cmake/FindBerkeleyDB")</code> </pre> <br><p> ä¹‹åï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">sample-usage / CMakeLists.txt</a>ä»¥æ ‡å‡†æ–¹å¼æ‰§è¡Œåº“æœç´¢ï¼š </p><br><pre> <code class="plaintext hljs">find_package(BerkeleyDB REQUIRED)</code> </pre> <br><p> æ¥ä¸‹æ¥ï¼Œæ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶å¹¶å°†å…¶é“¾æ¥åˆ°<strong>Oracle :: BerkeleyDB</strong>åº“ï¼š </p><br><pre> <code class="plaintext hljs">add_executable(sample-map-usage "sample-map-usage.cpp") target_link_libraries(sample-map-usage PRIVATE Oracle::BerkeleyDB ${CMAKE_THREAD_LIBS_INIT} stdc++fs)</code> </pre> <br><h2 id="prakticheskiy-primer"> å®é™…ä¾‹å­ </h2><br><p> ä¸ºäº†æ¼”ç¤º<strong>dbstlçš„ç”¨æ³•ï¼Œè®©æˆ‘ä»¬</strong>æ£€æŸ¥æ¥è‡ª<a href="">sample-map-usage.cpp</a>æ–‡ä»¶çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚ æ­¤åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†<code>dbstl::db_map</code>åœ¨å•çº¿ç¨‹ç¨‹åºä¸­ä½¿ç”¨<code>dbstl::db_map</code> ã€‚ å®¹å™¨æœ¬èº«ç±»ä¼¼äº<code>std::map</code>å¹¶å°†æ•°æ®å­˜å‚¨ä¸ºé”®/å€¼å¯¹ã€‚ åŸºç¡€æ•°æ®åº“ç»“æ„å¯ä»¥æ˜¯<strong>Btree</strong>æˆ–<strong>Hash</strong> ã€‚ ä¸<code>std::map</code>ä¸åŒï¼Œå¯¹äº<code>dbstl::db_map&lt;std::string, TestElement&gt;</code>å®é™…å€¼ç±»å‹æ˜¯<code>dbstl::ElementRef&lt;TestElement&gt;</code> ã€‚ ä¾‹å¦‚ï¼Œå¯¹äº<code>dbstl::db_map&lt;std::string, TestElement&gt;::operator[]</code>è¿”å›æ­¤ç±»å‹ã€‚ å®ƒå®šä¹‰äº†åœ¨æ•°æ®åº“ä¸­å­˜å‚¨<code>TestElement</code>ç±»å‹çš„å¯¹è±¡çš„æ–¹æ³•ã€‚ ä¸€ç§è¿™æ ·çš„æ–¹æ³•æ˜¯<code>operator=</code> ã€‚ </p><br><p> åœ¨ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨æ•°æ®åº“çš„æ–¹æ³•å¦‚ä¸‹ï¼š </p><br><ul><li> åº”ç”¨ç¨‹åºè°ƒç”¨<strong>Berkeley DB</strong>æ–¹æ³•æ¥è®¿é—®æ•°æ® </li><li> è¿™äº›æ–¹æ³•è®¿é—®ç¼“å­˜ä»¥è¿›è¡Œè¯»å–æˆ–å†™å…¥ </li><li> å¦‚æœ‰å¿…è¦ï¼Œç›´æ¥è®¿é—®æ•°æ®æ–‡ä»¶ </li></ul><br><p> è¯¥è¿‡ç¨‹ä»¥å›¾å½¢æ–¹å¼æ˜¾ç¤ºåœ¨å›¾ä¸­ï¼š </p><br><p><img src="https://habrastorage.org/webt/xm/em/or/xmemorwh73yw9mnue-h1lp0gmbo.png"></p><br><p> ä¸ºäº†é™ä½ç¤ºä¾‹çš„å¤æ‚æ€§ï¼Œå®ƒä¸ä½¿ç”¨å¼‚å¸¸å¤„ç†ã€‚ å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒæŸäº›<strong>dbstl</strong>å®¹å™¨<strong>æ–¹æ³•</strong>å¯èƒ½ä¼šå¼•å‘å¼‚å¸¸ã€‚ </p><br><h2 id="razbor-koda"> ä»£ç è§£æ </h2><br><p> è¦ä½¿ç”¨<strong>Berkeley DBï¼Œ</strong>æ‚¨éœ€è¦è¿æ¥ä¸¤ä¸ªå¤´æ–‡ä»¶ï¼š </p><br><pre> <code class="plaintext hljs">#include &lt;db_cxx.h&gt; #include &lt;dbstl_map.h&gt;</code> </pre> <br><p> ç¬¬ä¸€ä¸ªæ·»åŠ äº†<strong>C ++</strong>æ¥å£åŸè¯­ï¼Œç¬¬äºŒä¸ªå®šä¹‰äº†ç”¨äºæ•°æ®åº“ï¼Œå…³è”å®¹å™¨ä»¥åŠè®¸å¤šå®ç”¨ç¨‹åºæ–¹æ³•çš„ç±»å’Œå‡½æ•°ã€‚  <strong>STL</strong>æ¥å£ä½äº<strong>dbstl</strong>å‘½åç©ºé—´ä¸­ã€‚ </p><br><p> å¯¹äºå­˜å‚¨ï¼Œä½¿ç”¨<strong>Btree</strong>ç»“æ„ï¼Œ <code>std::string</code>å……å½“é”®ï¼Œå€¼æ˜¯ç”¨æˆ·ç»“æ„<code>TestElement</code> ï¼š </p><br><pre> <code class="plaintext hljs">struct TestElement{ std::string id; std::string name; };</code> </pre> <br><p> åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨<code>dbstl::dbstl_startup()</code>åˆå§‹åŒ–åº“ã€‚ å®ƒå¿…é¡»ä½äºç¬¬ä¸€æ¬¡ä½¿ç”¨<strong>STL</strong>æ¥å£åŸè¯­ä¹‹å‰ã€‚ </p><br><p> ä¹‹åï¼Œæˆ‘ä»¬åœ¨ç”±<code>ENV_FOLDER</code>å˜é‡è®¾ç½®çš„ç›®å½•ä¸­åˆå§‹åŒ–å¹¶æ‰“å¼€<em>æ•°æ®åº“ç¯å¢ƒ</em> ï¼š </p><br><pre> <code class="plaintext hljs">auto penv = dbstl::open_env(ENV_FOLDER, 0u, DB_INIT_MPOOL | DB_CREATE);</code> </pre> <br><p>  <code>DB_INIT_MPOOL</code>æ ‡å¿—è´Ÿè´£åˆå§‹åŒ–ç¼“å­˜å­ç³»ç»Ÿ<code>DB_CREATE</code>åˆ›å»ºç¯å¢ƒæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ã€‚ è¯¥å›¢é˜Ÿè¿˜å°†è¿™ä¸ªå¯¹è±¡æ³¨å†Œåˆ°èµ„æºç®¡ç†å™¨ä¸­ã€‚ ä»–è´Ÿè´£å…³é—­æ‰€æœ‰å·²æ³¨å†Œçš„å¯¹è±¡ï¼ˆæ•°æ®åº“å¯¹è±¡ï¼Œæ¸¸æ ‡ï¼Œäº‹åŠ¡ç­‰ä¹Ÿå·²åœ¨å…¶ä¸­æ³¨å†Œï¼‰å¹¶æ¸…é™¤åŠ¨æ€å†…å­˜ã€‚ å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ª<em>æ•°æ®åº“ç¯å¢ƒ</em>å¯¹è±¡ï¼Œå¹¶ä¸”åªéœ€è¦åœ¨èµ„æºç®¡ç†å™¨ä¸­æ³¨å†Œå®ƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>dbstl::register_db_env</code>å‡½æ•°ã€‚ </p><br><p>  <em>å¯¹æ•°æ®åº“</em>æ‰§è¡Œç±»ä¼¼çš„æ“ä½œï¼š </p><br><pre> <code class="plaintext hljs">auto db = dbstl::open_db(penv, "sample-map-usage.db", DB_BTREE, DB_CREATE, 0u);</code> </pre> <br><p> ç£ç›˜ä¸Šçš„æ•°æ®å°†è¢«å†™å…¥<strong>sample-map-usage.dbæ–‡ä»¶</strong> ï¼Œè¯¥<strong>æ–‡ä»¶</strong>å°†åœ¨<code>ENV_FOLDER</code>ç›®å½•ä¸­ä¸å­˜åœ¨æ—¶ï¼ˆç”±äº<code>DB_CREATE</code>æ ‡å¿—ï¼‰è€Œ<code>ENV_FOLDER</code> ã€‚ ä¸€æ£µæ ‘ç”¨äºå­˜å‚¨ï¼ˆ <code>DB_BTREE</code>å‚æ•°ï¼‰ã€‚ </p><br><p> åœ¨<strong>Berkeley DBä¸­ï¼Œ</strong>é”®å’Œå€¼å­˜å‚¨ä¸ºå­—èŠ‚æ•°ç»„ã€‚ è¦ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸º<code>TestElement</code> ï¼‰ï¼Œå¿…é¡»ä¸ºä»¥ä¸‹åŠŸèƒ½å®šä¹‰å‡½æ•°ï¼š </p><br><ul><li> æ¥æ”¶ç”¨äºå­˜å‚¨å¯¹è±¡çš„å­—èŠ‚æ•°ï¼› </li><li> å°†å¯¹è±¡å°é€ä¸ºå­—èŠ‚æ•°ç»„ï¼› </li><li> è§£ç»„ã€‚ </li></ul><br><p> åœ¨ç¤ºä¾‹ä¸­ï¼Œæ­¤åŠŸèƒ½ç”±<code>TestMarshaller</code>ç±»çš„é™æ€æ–¹æ³•æ‰§è¡Œã€‚ å®ƒåœ¨å†…å­˜ä¸­<code>TestElement</code>å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><ul><li>  <code>id</code>å­—æ®µçš„é•¿åº¦è¢«å¤åˆ¶åˆ°ç¼“å†²åŒºçš„å¼€å¤´ </li><li> ä¸‹ä¸€ä¸ªå­—èŠ‚æ”¾ç½®<code>id</code>å­—æ®µçš„å†…å®¹ </li><li> ä¹‹åï¼Œå¤åˆ¶<code>name</code>å­—æ®µçš„å¤§å° </li><li> ç„¶åå°†å†…å®¹æœ¬èº«æ”¾ç½®åœ¨<code>name</code>å­—æ®µä¸­ </li></ul><br><p><img src="https://habrastorage.org/webt/ko/ad/ul/koaduleknjbnfvapxlo6wff4qvm.png"></p><br><p> æˆ‘ä»¬æè¿°äº†<code>TestMarshaller</code>çš„åŠŸèƒ½ï¼š </p><br><ul><li>  <code>TestMarshaller::restore</code> <code>TestElement</code>ç”¨ç¼“å†²åŒºä¸­çš„æ•°æ®å¡«å……<code>TestElement</code>å¯¹è±¡ </li><li>  <code>TestMarshaller::size</code>è¿”å›ä¿å­˜æŒ‡å®šå¯¹è±¡æ‰€éœ€çš„ç¼“å†²åŒºçš„å¤§å°ã€‚ </li><li>  <code>TestMarshaller::store</code>å°†å¯¹è±¡ä¿å­˜åœ¨ç¼“å†²åŒºä¸­ã€‚ </li></ul><br><p> è¦æ³¨å†Œå°é€/ <code>dbstl::DbstlElemTraits</code>åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨<code>dbstl::DbstlElemTraits</code> ï¼š </p><br><pre> <code class="plaintext hljs">dbstl::DbstlElemTraits&lt;TestElement&gt;::instance()-&gt;set_size_function(&amp;TestMarshaller::size); dbstl::DbstlElemTraits&lt;TestElement&gt;::instance()-&gt;set_copy_function(&amp;TestMarshaller::store); dbstl::DbstlElemTraits&lt;TestElement&gt;::instance()-&gt;set_restore_function( &amp;TestMarshaller::restore );</code> </pre> <br><p> åˆå§‹åŒ–å®¹å™¨ï¼š </p><br><pre> <code class="plaintext hljs">dbstl::db_map&lt;std::string, TestElement&gt; elementsMap(db, penv);</code> </pre> <br><p> è¿™å°±æ˜¯å°†å…ƒç´ ä»<code>std::map</code>å¤åˆ¶åˆ°åˆ›å»ºçš„å®¹å™¨çš„æ ·å­ï¼š </p><br><pre> <code class="plaintext hljs">std::copy( std::cbegin(inputValues), std::cend(inputValues), std::inserter(elementsMap, elementsMap.begin()) );</code> </pre> <br><p> ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥å°†æ•°æ®åº“çš„å†…å®¹æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼š </p><br><pre> <code class="plaintext hljs">std::transform( elementsMap.begin(dbstl::ReadModifyWriteOption::no_read_modify_write(), true), elementsMap.end(), std::ostream_iterator&lt;std::string&gt;(std::cout, "\n"), [](const auto data) -&gt; std::string { return data.first + "=&gt; { id: " + data.second.id + ", name: " + data.second.name + "}"; });</code> </pre> <br><p> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­è°ƒç”¨<code>begin</code>æ–¹æ³•çœ‹èµ·æ¥æœ‰ç‚¹ä¸å¯»å¸¸ï¼š <code>elementsMap.begin(dbstl::ReadModifyWriteOption::no_read_modify_write(), true)</code> ã€‚ <br> æ­¤è®¾è®¡ç”¨äºè·å–<em>åªè¯»</em>è¿­ä»£å™¨ã€‚  <strong>dbstl</strong>æ²¡æœ‰å®šä¹‰<code>cbegin</code>æ–¹æ³•ï¼›ç›¸åï¼Œä½¿ç”¨äº†<code>begin</code>æ–¹æ³•ä¸­çš„<code>readonly</code>å‚æ•°ï¼ˆç¬¬äºŒä¸ªï¼‰ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¯¹å®¹å™¨çš„<em>å¸¸é‡å¼•ç”¨</em>æ¥è·å–<em>åªè¯»çš„</em>è¿­ä»£å™¨ã€‚ è¿™æ ·çš„è¿­ä»£å™¨ä»…å…è®¸è¯»å–æ“ä½œï¼›åœ¨å†™å…¥æ—¶ï¼Œå®ƒå°†å¼•å‘å¼‚å¸¸ã€‚ </p><br><p> ä¸ºä»€ä¹ˆåœ¨ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨<em>åªè¯»</em>è¿­ä»£å™¨ï¼Ÿ é¦–å…ˆï¼Œå®ƒ<em>åªæ˜¯</em>é€šè¿‡è¿­ä»£å™¨æ‰§è¡Œè¯»å–æ“ä½œã€‚ å…¶æ¬¡ï¼Œæ–‡æ¡£è¯´ä¸å¸¸è§„ç‰ˆæœ¬ç›¸æ¯”ï¼Œå®ƒå…·æœ‰<em>æ›´å¥½çš„</em>æ€§èƒ½ã€‚ </p><br><p> æ·»åŠ æ–°çš„é”®/å€¼å¯¹ï¼Œæˆ–è€…ï¼Œå¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°å€¼å°±åƒåœ¨<code>std::map</code>ä¸€æ ·ç®€å•ï¼š </p><br><pre> <code class="plaintext hljs">elementsMap["added key 1"] = {"added id 1", "added name 1"};</code> </pre> <br><p> å¦‚ä¸Šæ‰€è¿°ï¼Œ <code>elementsMap["added key 1"]</code>æŒ‡ä»¤è¿”å›ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå…¶<code>operator=</code>é‡æ–°å®šä¹‰ï¼Œå…¶åç»­è°ƒç”¨ç›´æ¥å°†å¯¹è±¡ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚ </p><br><p> å¦‚æœéœ€è¦å°†é¡¹ç›®æ’å…¥å®¹å™¨ä¸­ï¼š </p><br><pre> <code class="plaintext hljs">auto [iter, res] = elementsMap.insert( std::make_pair(std::string("added key 2"), TestElement{"added id 2", "added name 2"}) );</code> </pre> <br><p> è°ƒç”¨<code>elementsMap.insert</code>è¿”å›<code>std::pair&lt;,  &gt;</code> ã€‚ å¦‚æœæ— æ³•æ’å…¥å¯¹è±¡ï¼Œåˆ™<em>æˆåŠŸæ ‡å¿—</em>å°†ä¸º<strong>false</strong> ã€‚ å¦åˆ™ï¼Œ <em>æˆåŠŸæ ‡å¿—</em>åŒ…å«<strong>true</strong> ï¼Œå¹¶ä¸”<em>è¿­ä»£å™¨</em>æŒ‡å‘æ’å…¥çš„å¯¹è±¡ã€‚ </p><br><p> é€šè¿‡é”®æŸ¥æ‰¾å€¼çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>dbstl::db_map::find</code>æ–¹æ³•ï¼Œç±»ä¼¼äº<code>std::map::find</code> ï¼š </p><br><pre> <code class="plaintext hljs">auto findIter = elementsMap.find("test key 1");</code> </pre> <br><p> é€šè¿‡è·å¾—çš„è¿­ä»£å™¨ï¼Œå¯ä»¥å°†é”®<code>findIter-&gt;first</code>è®¿é—®åˆ°<code>TestElement</code>å…ƒç´ çš„å­—æ®µ<code>findIter-&gt;second.id</code>å’Œ<code>findIter-&gt;second.name</code> ã€‚ è¦æå–<em>é”®</em> / <em>å€¼</em>å¯¹ï¼Œè¯·ä½¿ç”¨è§£å¼•ç”¨è¿ç®—ç¬¦<code>auto iterPair = *findIter;</code>  ã€‚ </p><br><p> å½“å°†å–æ¶ˆå¼•ç”¨è¿ç®—ç¬¦ï¼ˆ <strong>*</strong> ï¼‰æˆ–å¯¹ç±»æˆå‘˜çš„è®¿é—®ï¼ˆ <strong>-&gt;</strong> ï¼‰åº”ç”¨äºè¿­ä»£å™¨æ—¶ï¼Œå°†è®¿é—®æ•°æ®åº“å¹¶ä»ä¸­æå–æ•°æ®ã€‚ è€Œä¸”ï¼Œå³ä½¿å…ˆå‰æå–çš„æ•°æ®è¢«ä¿®æ”¹ï¼Œä¹Ÿå°†è¢«æ“¦é™¤ã€‚ è¿™æ„å‘³ç€åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå¯¹è¿­ä»£å™¨æ‰€åšçš„æ›´æ”¹å°†è¢«æ”¾å¼ƒï¼Œå¹¶ä¸”å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„å€¼å°†æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Šã€‚ </p><br><pre> <code class="plaintext hljs">findIter-&gt;second.id = "skipped id"; findIter-&gt;second.name = "skipped name"; std::cout &lt;&lt; "Found elem for key " &lt;&lt; "test key 1" &lt;&lt; ": id: " &lt;&lt; findIter-&gt;second.id &lt;&lt; ", name: " &lt;&lt; findIter-&gt;second.name &lt;&lt; std::endl;</code> </pre> <br><p> ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦é€šè¿‡è°ƒç”¨<code>findIter-&gt;second</code>ä»è¿­ä»£å™¨ä¸­è·å–å­˜å‚¨å¯¹è±¡çš„åŒ…è£…å¹¶å°†å…¶ä¿å­˜åœ¨å˜é‡ä¸­ã€‚ æ¥ä¸‹æ¥ï¼Œå¯¹è¯¥åŒ…è£…å™¨è¿›è¡Œæ‰€æœ‰æ›´æ”¹ï¼Œç„¶åé€šè¿‡è°ƒç”¨åŒ…è£…å™¨æ–¹æ³•<code>_DB_STL_StoreElement</code>å°†ç»“æœå†™å…¥æ•°æ®åº“ï¼š </p><br><pre> <code class="plaintext hljs">auto ref = findIter-&gt;second; ref.id = "new test id 1"; ref.name = "new test name 1"; ref._DB_STL_StoreElement();</code> </pre> <br><p> æ›´æ–°æ•°æ®ç”šè‡³æ›´åŠ å®¹æ˜“-åªéœ€ä½¿ç”¨<code>findIter-&gt;second</code>æ¡æŒ‡ä»¤è·å–åŒ…è£…å™¨ï¼Œç„¶åä¸ºå…¶åˆ†é…æ‰€éœ€çš„<code>TestElement</code>å¯¹è±¡ï¼Œå¦‚ç¤ºä¾‹ä¸­æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">if(auto findIter = elementsMap.find("test key 2"); findIter != elementsMap.end()){ findIter-&gt;second = {"new test id 2", "new test name 2"}; }</code> </pre> <br><p> åœ¨ç»ˆæ­¢ç¨‹åºä¹‹å‰ï¼Œå¿…é¡»è°ƒç”¨<code>dbstl::dbstl_exit();</code> å…³é—­å¹¶åˆ é™¤èµ„æºç®¡ç†å™¨ä¸­æ‰€æœ‰æ³¨å†Œçš„å¯¹è±¡ã€‚ </p><br><h2 id="v-zaklyuchenii"> æ€»ç»“ </h2><br><p> æœ¬æ–‡<strong>ä»¥</strong> <code>dbstl::db_map</code>åœ¨ä¸€ä¸ªç®€å•çš„å•çº¿ç¨‹ç¨‹åºä¸­æä¾›äº†<strong>dbstl</strong>å®¹å™¨ä¸»è¦åŠŸèƒ½çš„ç®€è¦æ¦‚è¿°ã€‚ è¿™åªæ˜¯ä¸€ä¸ªå°ä»‹ç»ï¼Œæ²¡æœ‰æ¶‰åŠè¯¸å¦‚äº‹åŠ¡æ€§ï¼Œé”å®šï¼Œèµ„æºç®¡ç†ï¼Œå¼‚å¸¸å¤„ç†å’Œå¤šçº¿ç¨‹æ‰§è¡Œç­‰åŠŸèƒ½ã€‚ </p><br><p> æˆ‘çš„ç›®çš„ä¸æ˜¯è¯¦ç»†æè¿°æ–¹æ³•åŠå…¶å‚æ•°ï¼Œå› æ­¤æœ€å¥½å‚è€ƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">C ++æ¥å£</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">STLæ¥å£</a>ä¸Šçš„ç›¸åº”æ–‡æ¡£ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN459862/">https://habr.com/ru/post/zh-CN459862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN459844/index.html">çª—å£ä¸­çš„ä¼é¹…ï¼šWSL2çš„æ½œåŠ›å’Œå‰æ™¯</a></li>
<li><a href="../zh-CN459850/index.html">ä¸šä½™æ— çº¿ç”µæŠ€æœ¯ï¼šæˆ‘å¦‚ä½•ä¸‹ä»¤åœ¨ä¸­å›½å·¥å‚å®‰è£…å°åˆ·ç”µè·¯æ¿</a></li>
<li><a href="../zh-CN459852/index.html">åœ¨é“¶è¡Œçš„ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å½©ç¥¨åº“çš„åšæ³•</a></li>
<li><a href="../zh-CN459858/index.html">æ¢ç´¢é€‚ç”¨äºAndroidçš„ç°ä»£æ¶æ„è½¯ä»¶Cerberus</a></li>
<li><a href="../zh-CN459860/index.html">åœ¨gitlab-ciä¸­é…ç½®ClickHouseè¿›è¡Œé›†æˆæµ‹è¯•</a></li>
<li><a href="../zh-CN459866/index.html">ä½¿ç”¨pwnable.kr 02è§£å†³é—®é¢˜-å†²çªã€‚ å“ˆå¸Œå†²çª</a></li>
<li><a href="../zh-CN459870/index.html">Fï¼ƒä¸­çš„ç¤ºä¾‹æ¨¡å‹-è§†å›¾-æ›´æ–°ä½“ç³»ç»“æ„</a></li>
<li><a href="../zh-CN459872/index.html">å·´é¡¿æ°å¤«ã€‚ è‡ªå®šä¹‰æ•…äº‹ã€‚ æ•æ·è½¯ä»¶å¼€å‘çš„è‰ºæœ¯</a></li>
<li><a href="../zh-CN459874/index.html">ä½ æœ‰ä¸œè¥¿è¦è—</a></li>
<li><a href="../zh-CN459878/index.html">åŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦çš„7æ¡CSSä¼˜åŒ–æŠ€å·§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>