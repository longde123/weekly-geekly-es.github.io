<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∑Ô∏è üëµüèΩ üë∑ Russian AI Cup 2018, historia 9 lugares üö≥ üïµüèª üîº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entonces 


 Mi nombre, como el a√±o pasado, es Andrei Rybalka, solo que esta vez tengo 33 a√±os. Y, como estaba entre los diez primeros, decid√≠ compart...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Russian AI Cup 2018, historia 9 lugares</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440574/"><h1 id="itak">  Entonces </h1><br><p>  Mi nombre, como el a√±o pasado, es Andrei Rybalka, solo que esta vez tengo 33 a√±os. Y, como estaba entre los diez primeros, decid√≠ compartir mi enfoque para escribir un bot de juego para la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Copa AI rusa 2018</a> nuevamente. </p><br><p>  Esta vez la tarea era f√∫tbol.  La tarea en s√≠ misma recordaba un poco el RAIC 2014, cuando era hockey, pero la soluci√≥n fue completamente diferente. </p><br><p>  Esta vez, el mundo era tridimensional y esta tridimensionalidad se utiliz√≥ por completo.  El juego en s√≠ era m√°s una reminiscencia de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rocket League</a> . </p><br><p>  No voy a aburrir la parte introductoria, es m√°s f√°cil mostrar c√≥mo se ve√≠a.  Puedes ver los juegos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el sitio web</a> o en el video: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/6g/jb/hf/6gjbhf4gdy_4qqrw74huttfudvq.jpeg"></a> </p><a name="habracut"></a><br><p>  Para que nuestra vida no parezca demasiado dulce, los desarrolladores, adem√°s del no determinismo del mundo del juego, tambi√©n dividieron el tic del juego en 100 subwoofers, que inicialmente pusieron fin a la simulaci√≥n precisa para la mayor√≠a de los participantes, y a√∫n m√°s para m√≠, con la intenci√≥n de escribir un bot en Java lento. </p><br><p>  Adem√°s, debo decir que el campeonato se divide en rondas, lo que probablemente ser√≠a m√°s correcto llamar rondas. </p><br><h3 id="kratko-o-turnirnoy-sisteme">  Brevemente sobre el sistema de torneos </h3><br><p>  Para empezar, se dan 2 semanas para el desarrollo.  Luego pasa la primera ronda.  Los 300 mejores van m√°s all√°. </p><br><p>  Despu√©s de la ronda, las reglas del juego cambian (espec√≠ficamente, se agrega nitro al juego) y se dan otras 2 semanas, despu√©s de lo cual pasa la segunda ronda. </p><br><p>  Luego las reglas se complican nuevamente (se agrega el tercer jugador), se da otra semana y jugamos la final. </p><br><p>  Pero este no es el final.  Despu√©s de la final, hay otra semana, al final de la cual el sandbox simplemente se detiene, y tambi√©n se otorgan los 6 mejores, excluyendo a los ganadores de la final.  La diferencia fundamental entre el final del sandbox y el final del campeonato es que en el sandbox, los juegos se crean en un formato aleatorio, y no solo en el formato de la ronda actual. </p><br><h1 id="istorii-uchastiya">  Historias de participaci√≥n </h1><br><p>  La parte t√©cnica ser√° m√°s baja.  Para quienes la historia no es interesante, puede desplazarse hacia abajo hasta que se vuelva buena. </p><br><h3 id="pervyy-raund">  Primera ronda </h3><br><p>  Comenz√≥, como la mayor√≠a, con una semana de beta.  Pas√© mucho tiempo, m√°s de 4 horas cada noche. <br>  Antes de completar la primera versi√≥n, tom√≥ varias iteraciones <br>  <em>codificamos hasta que comenzamos a superar la versi√≥n anterior, recopilamos, consideramos la versi√≥n actual de la anterior, repetimos</em> . </p><br><p>  No ten√≠a prisa con el primer relleno y sucedi√≥ unos d√≠as antes de la ronda.  Y, dado que, hasta ahora, mi bot no ha jugado con nadie, no ten√≠a idea de en qu√© tipo de mundo estaba y qu√© posiciones en el ranking podr√≠a reclamar.  Cuando vi que ya hab√≠a ganado m√°s de 100 juegos seguidos sin una sola p√©rdida, me tranquilic√©. </p><br><p>  En general, la primera derrota que tuve, al parecer, fue en el puesto 12, en el l√≠mite de tiempo, y el primer juego perdido en una fila ya estaba en el top 10. </p><br><p>  En resumen, me di cuenta de que tengo posibilidades de entrar en la segunda ronda, donde van los 300 mejores. <br>  Por lo tanto, no persegu√≠ el puesto y no inund√© nada m√°s para la ronda, sino que simplemente continu√© trabajando. </p><br><p>  En ese momento, vi que todav√≠a hab√≠a mucho espacio para mejorar sin conectar nitro (que apareci√≥ despu√©s de la primera ronda), as√≠ que me concentr√© en la parte principal de la estrategia, d√°ndome cuenta de que antes de la segunda ronda habr√≠a m√°s de 2 semanas o m√°s y tendr√≠a tiempo para fijar el nitro. </p><br><h3 id="vtoroy-raund">  Segunda ronda </h3><br><p>  La primera semana estaba programando activamente, pero todav√≠a no conectaba nitro.  Quer√≠a hacer esto en la segunda semana.  Pero todo result√≥ diferente, porque al final de la primera semana hab√≠a contra√≠do neumon√≠a.  No pude programar, as√≠ que sub√≠ lo que era y, se puede decir, la participaci√≥n activa en el campeonato para m√≠ en este lugar hab√≠a terminado. </p><br><p>  Durante las siguientes 3 semanas antes del final del campeonato, trabaj√© en una estrategia por una cantidad de tal vez 20 horas. </p><br><p>  Como resultado, en la segunda ronda, mi bot, en principio, no sab√≠a que hab√≠a nitro en el juego, pero de alguna manera todav√≠a ocup√≥ el puesto 16. </p><br><h3 id="final">  Final </h3><br><p>  En la final, se agreg√≥ un tercer jugador. </p><br><p>  Escrib√≠ en Java lento, y no en C ++, ya que 7 de cada 8 personas son m√°s altas que yo en la clasificaci√≥n, y antes de eso mi bot a menudo ca√≠a en el tiempo de espera, por lo que con la llegada del tercer jugador, comenz√≥ a caer en el 100% de los juegos.  Afortunadamente, los juegos en el sandbox se crean en un formato aleatorio, por lo que autom√°ticamente <br>  perdi√≥ solo cada tercer juego y por lo tanto vol√≥ no demasiado.  Parece haber ca√≠do al puesto 18. </p><br><p>  Excepto por la programaci√≥n, la edici√≥n de los coeficientes en la funci√≥n de evaluaci√≥n y la ejecuci√≥n de las pruebas, luego, por primera vez, despu√©s del inicio de la enfermedad, me sent√© en el bot la noche del d√≠a anterior a la final.  Agreg√≥ un nitro muy simple dirigido estrictamente hacia arriba para que dos atacantes dejaran de correr en el mismo punto y chocaran entre s√≠ all√≠, y cortaran todo lo que pudieran para un juego de 3x3, comenzando desde la profundidad de renderizado y terminando con la precisi√≥n de la simulaci√≥n, de modo que solo el bot no muri√≥ por tiempo de espera. <br>  De esta forma, jug√≥ el final. </p><br><p>  En el intervalo entre las mitades de las finales, nuevamente me sent√© en el bot y pas√© unas buenas horas 10. En su mayor parte, los cambios se refer√≠an a la selecci√≥n din√°mica de coeficientes, la interrupci√≥n temprana de la gen√©tica, etc.  En general, estaba buscando un equilibrio entre la precisi√≥n y la profundidad y la velocidad de c√°lculo err√≥neo. <br>  Adem√°s de la lucha contra la velocidad, hizo un par de cambios m√°s: </p><br><ul><li>  Envi√≥ a un atacante distante (relativo a la pelota) a un punto en el medio entre la pelota y la porter√≠a del oponente </li><li>  Arregl√© un poco el nitro (la descripci√≥n estar√° en la parte t√©cnica).  Todav√≠a era extremadamente simple, pero se volvi√≥ mucho m√°s eficiente. </li></ul><br><p>  Total, despu√©s de ejecutar las pruebas y ver el puntaje 395: 254 contra la versi√≥n anterior, me tranquilic√© al respecto.  Esto me permiti√≥ tomar el noveno lugar en la final. </p><br><h3 id="final-pesochnicy">  Sandbox Finale </h3><br><p>  Continu√© doliendo y no trabaj√© en el bot durante la mayor parte de la semana.  El d√≠a antes del final, vi que varias personas subieron versiones nuevas, que a menudo ganan contra m√≠ y pueden arrojar cajas de arena de los premios.  As√≠ que pas√© un par de horas m√°s. </p><br><p>  El √∫nico cambio importante es que desenterr√© mi rama en Git hace tres semanas, en la que tuve una simulaci√≥n del movimiento del enemigo usando mi algoritmo simplificado.  En ese momento funcion√≥ mal, pero lo record√©, realic√© pruebas, vi <br>  que supera a la versi√≥n anterior casi se duplic√≥ e inund√≥.  Total, al momento de parar, estaba en el d√©cimo lugar en la tabla general, que corresponde al 4to en la final de la caja de arena. </p><br><h1 id="kak-eto-vsyo-rabotaet-tehnicheskaya-chast">  C√≥mo funciona todo (parte t√©cnica) </h1><br><p>  Pido disculpas por adelantado en caso de que haya imprecisiones en la terminolog√≠a.  Adem√°s, escribo de memoria, por lo que es posible que en alg√∫n lugar no describa la versi√≥n final. </p><br><p>  Entonces, los algoritmos gen√©ticos est√°n en el n√∫cleo.  El cromosoma consta de varios genes: </p><br><ul><li>  N√∫mero fraccionario en el rango -PI..PI, que especifica la direcci√≥n del movimiento </li><li>  Un entero en el rango 0..10 que especifica el n√∫mero de repeticiones de esta acci√≥n. </li><li>  N√∫mero fraccionario de 0 a 1. Si el valor est√° por encima de alg√∫n umbral, realice un salto </li></ul><br><p>  El genotipo puede incluir un n√∫mero diferente de cromosomas, pero de tal manera que el n√∫mero total de acciones (incluidas las repeticiones) es 40. </p><br><p>  Inicialmente, creo varias docenas de genotipos aleatorios.  A ellos agrego: </p><br><ul><li>  La trayectoria justo en la pelota </li><li>  Trayectorias directas en todas las direcciones, solo 10 piezas con un desplazamiento de 36 grados </li><li>  Un genotipo que simplemente no hace nada (sin √©l, el bot siempre se ejecuta en alg√∫n lugar, incluso si ya se encuentra en el punto √≥ptimo) </li><li>  El mejor genotipo de la marca anterior </li></ul><br><p>  Entonces todo se simula y se ejecuta a trav√©s de la funci√≥n de evaluaci√≥n.  N mejores genotipos "sobreviven" y se clonan M veces con mutaciones.  Tras la mutaci√≥n, cada gen cambia en un rango dado con una probabilidad del 10%.  Bueno, esto se ha repetido por varias generaciones. <br>  No hay cruce, en este problema no veo ning√∫n sentido. </p><br><p>  En total, el n√∫mero m√°ximo posible de trayectorias por tic por jugador de f√∫tbol fue de aproximadamente 800, pero de hecho, en la mayor√≠a de los casos fue mucho menor, porque  En algunos casos (por ejemplo, cuando en el futuro cercano no podremos tocar la pelota), el movimiento de los jugadores fue reemplazado por una simple heur√≠stica.  Adem√°s, N, M y el n√∫mero de generaciones depend√≠an de la situaci√≥n en el campo.  En primer lugar, desde la distancia hasta la pelota.  Adem√°s, el error de c√°lculo se interrumpe antes de lo previsto (pero no antes de la 5¬™ generaci√≥n) si se encuentra una trayectoria con una estimaci√≥n aceptable. </p><br><h3 id="makro">  Macro </h3><br><p>  El portero corre hacia el punto frente al centro de la porter√≠a.  Mis pruebas mostraron que es mejor para m√≠ jugar parado frente a la porter√≠a, y no dentro de ellas, como la mayor√≠a de los jugadores en la parte superior. </p><br><p>  La posici√≥n del punto se desvi√≥ del centro dependiendo de varios factores: la posici√≥n y direcci√≥n del vuelo de la pelota, el punto en que la pelota golpe√≥ mi objetivo, si se planific√≥ un gol, la ubicaci√≥n del oponente atacante m√°s cercano, etc. </p><br><p>  Si la pelota est√° del lado del oponente y vuela hacia su objetivo, podemos ir por nitro. </p><br><p>  Si mi portero puede golpear la pelota antes que mi atacante (m√°s algunas condiciones m√°s), entonces el atacante ignora la pelota y corre hacia un punto en el medio entre la pelota y la porter√≠a del oponente.  Pas√© por muchas opciones, donde exactamente para √©l correr.  En mi caso, este funcion√≥ mejor. </p><br><p>  De lo contrario, si la pelota est√° demasiado lejos, el atacante corre en l√≠nea recta hasta el punto de contacto m√°s cercano de la pelota con el piso, en el que puede interceptar la pelota (si no tenemos tiempo para el primer punto de contacto, verifique el siguiente, etc.) </p><br><p>  De lo contrario (cuando la pelota llega), el atacante corre hacia donde la funci√≥n de evaluaci√≥n le dice.  S√≠, y tambi√©n, si el nitro se encuentra cerca y podemos recogerlo, lo seleccionamos. </p><br><p>  En un juego de 3x3, es m√°s probable que el segundo atacante apunte a la pelota y con menos carrera hacia adelante, esperando un pase del portero.  Pero si a√∫n funciona, entonces se elige otro punto, m√°s cerca de la l√≠nea central. </p><br><p>  Adem√°s, cada tic simul√≥ una vez la pelota 100 ticks hacia adelante con 100 microtics (con almacenamiento en cach√©). </p><br><p>  Esta trayectoria ha sido utilizada en muchos lugares.  Por ejemplo: </p><br><ul><li>  Para determinar los puntos de contacto de la pelota con el piso </li><li>  Para saber si la pelota amenaza mi gol y si el portero necesita cambiar al modo de simulaci√≥n </li></ul><br><p>  Se utiliz√≥ la misma trayectoria exacta en la simulaci√≥n de las trayectorias de los jugadores, para no contar la pelota cada vez.  Pero solo hasta la primera colisi√≥n del bal√≥n con cualquier jugador de f√∫tbol. </p><br><p>  Por cierto, escribir Footballist era vago, las palabras Player, Robot estaban reservadas por estrategia, <br>  entonces mi clase de contenedor simplemente se llamaba Dude :) </p><br><h3 id="simulyaciya">  Simulaci√≥n </h3><br><p>  En la mayor√≠a de los casos, fue con un micr√≥tico, pero en algunas situaciones cambi√≥ al modo preciso con una gran cantidad de micr√≥fonos (al principio era 100, luego se redujo a 50 en un juego 2x2, porque las pruebas mostraron que la diferencia en los resultados estaba dentro del margen de error, y a 10 en 3x3, porque de lo contrario vol√≥ en tiempos de espera). </p><br><p>  En el modo preciso, cambi√© al momento de rebotar o al estar tan cerca de la pelota que es posible una colisi√≥n en el siguiente tic.  Adem√°s, tambi√©n hab√≠a una gran cantidad de peque√±as muletas, hacks, optimizaciones, en las que yo mismo no lo entender√©. </p><br><p>  Por ejemplo, la bola voladora todav√≠a se simulaba con 1 Mikrotik, pero si despu√©s del siguiente Mikrotik vi que hab√≠a una colisi√≥n, volv√≠a a la posici√≥n anterior y la volv√≠a a simular con mayor precisi√≥n. </p><br><p>  Adem√°s, tambi√©n fing√≠ ser otros jugadores (tanto los m√≠os como los m√≠os) si estuvieran en el aire (y, por lo tanto, su trayectoria es m√°s f√°cil de predecir), o si estuvieran cerca de la pelota.  Para los oponentes, la versi√≥n final utilizaba una versi√≥n simplificada de mi propia estrategia de toma de decisiones, que se lanzaba cada 5 ticks (m√°s a menudo no permit√≠a la velocidad). </p><br><p>  Al simular cada personaje, calcul√©, la pelota y otros jugadores de f√∫tbol 40 ticks por delante (mi l√≠mite en la cantidad de acciones en el genotipo) y luego simul√© la misma cantidad de ticks solo una pelota. </p><br><h3 id="nitro">  Nitro </h3><br><p>  Simple a indecente. </p><br><p>  En la versi√≥n final, nitro siempre est√° activado si lo est√°, si el jugador est√° en el aire y si no ha golpeado la pelota en los √∫ltimos ticks. </p><br><p>  Al principio, siempre dirig√≠a el nitro hacia arriba, pero luego intent√© experimentar y la opci√≥n de ir exactamente al centro de la pelota funcion√≥ mejor.  Tambi√©n prob√© opciones para que la direcci√≥n del nitro fuera elegida por la gen√©tica. </p><br><p>  Funcion√≥ mucho peor.  Quiz√°s debido a la falta de profundidad de b√∫squeda. </p><br><h3 id="funkciya-ocenki">  Funci√≥n de calificaci√≥n </h3><br><p>  La suma de las puntuaciones para cada tic con la atenuaci√≥n del 2% por tic. </p><br><p>  El mayor peso, por supuesto, ten√≠a un objetivo.  Varias cosas influyeron en su peso: </p><br><ul><li>  La distancia desde la pelota hasta el portero enemigo en el momento del gol (cuanto m√°s lejos mejor) </li><li>  Coordenada Y de la pelota (porque en la parte superior de la porter√≠a es mucho m√°s dif√≠cil golpear) </li><li>  La velocidad de la pelota a lo largo del eje Z (que se dirige hacia la porter√≠a enemiga) </li></ul><br><p>  Al atacarme, todo es exactamente igual, solo que con el signo opuesto. </p><br><p>  Adem√°s, para el atacante, la puntuaci√≥n general depend√≠a de: </p><br><ul><li>  Distancias del jugador a la pelota (para que corra hacia la pelota incluso si no puede golpearlo) </li><li>  Penalizaci√≥n por el salto (saltar solo si trae tantos puntos que superar√°n esta penalizaci√≥n) </li><li>  Distancias en el pr√≥ximo tic de la simulaci√≥n desde la pelota hasta los oponentes. </li><li>  Coordenadas de la bola Y (cuanto m√°s alto es, menos posibilidades tiene el enemigo de interceptarlo) </li><li>  Coseno del √°ngulo entre la direcci√≥n de la pelota y el centro de la porter√≠a enemiga. </li><li>  Marcar si toqu√© la pelota </li><li>  Bandera, si el enemigo toc√≥ la pelota </li><li>  Bonificaci√≥n por la selecci√≥n de nitro </li></ul><br><p>  Adem√°s, hab√≠a una peque√±a bonificaci√≥n por golpear a un jugador enemigo.  Aunque, de hecho, ha sucedido, pero rara vez. </p><br><p>  Para el portero: </p><br><ul><li>  Bonificaci√≥n por distancia a la pelota, velocidad de la pelota en Z, posici√≥n de la pelota en Y </li><li>  Penalidad por el salto </li><li>  Penalizaci√≥n por encontrar el bal√≥n en el √°rea frente a mi porter√≠a </li><li>  Se tuvo en cuenta la distancia a los enemigos y a mis atacantes (para que la pelota vuele lejos de los enemigos, pero, si es posible, vuela m√°s cerca de mis atacantes) </li><li>  Y algunas cositas m√°s. </li></ul><br><h3 id="machine-learning">  Aprendizaje autom√°tico </h3><br><p>  Fue solo un poco en una de las ramas del git como experimento.  Pero me parece digno de mencionar de todos modos.  No logr√© recordarlo (y no estoy seguro de qu√© tiene sentido). </p><br><p>  En general, trat√© de predecir con su ayuda si el enemigo puede interceptar la pelota en funci√≥n de las posiciones y velocidades del enemigo y la pelota.  Planeaba usar esto en la funci√≥n de evaluaci√≥n.  Penalizar las trayectorias que son posibles de interceptar. </p><br><p>  Pero comprend√≠ de inmediato que no pod√≠a permitirme no solo una red neuronal, sino nada serio, porque esto tendr√≠a que hacerse 80 veces por trayectoria.  Bueno, incluso si son 40 o 20, si no se cuenta cada tic, pero de todos modos, no ten√≠a ninguna reserva de tiempo, por lo que ni siquiera consider√© estas opciones. </p><br><p>  Esto es lo que hice: </p><br><p>  Ejecut√© varios juegos con un bot modificado, en el que, al buscar una trayectoria, guardaba datos sobre m√≠ y la pelota, as√≠ como una bandera, si se encontr√≥ una trayectoria en la que intercepto la pelota. </p><br><p>  Consider√© todas las coordenadas relativas al jugador de f√∫tbol.  Es decir  Siempre lo tuve en la coordenada [0,0,0], as√≠ que mantuve solo 10 campos: la posici√≥n relativa de la pelota, el vector de velocidad de la pelota, el vector de velocidad del jugador de f√∫tbol, ‚Äã‚Äãla bandera de intercepci√≥n binaria.  Guard√© el conjunto de datos solo para la parte central del campo, porque  Me di cuenta de que los algoritmos simples a√∫n no funcionan y que representan los tableros. </p><br><p>  Luego alimente este conjunto de datos DecisionTreeClassifier con max_depth = 7. El √°rbol entrenado dio una precisi√≥n, por lo que recuerdo, del orden del 90%. </p><br><p>  Luego, export√© el √°rbol a un conjunto de ifs (que es esencialmente DecisionTree). </p><br><p>  Se parec√≠a a esto: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_z)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= <span class="hljs-number"><span class="hljs-number">6.4765448570251465</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_y &lt;= -<span class="hljs-number"><span class="hljs-number">6.087389945983887</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= -<span class="hljs-number"><span class="hljs-number">20.188323974609375</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_x &lt;= <span class="hljs-number"><span class="hljs-number">13.032730102539062</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_rel_pos_y &lt;= -<span class="hljs-number"><span class="hljs-number">1.1829500198364258</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ball_vel_y &lt;= <span class="hljs-number"><span class="hljs-number">18.906089782714844</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ............................</span></span></code> </pre> <br><p>  En esta etapa, realic√© las pruebas, no vi ninguna mejora y pospuse la prueba hasta m√°s tarde, que, debido a mis aventuras, nunca lleg√≥. </p><br><h3 id="shryodinbag">  Schroedinbag </h3><br><p>  En alg√∫n lugar despu√©s de la primera ronda, atrap√© a este extra√±o animal en mi casa. </p><br><p>  Qui√©n no sabe, este es un error que solo encuentran al leer el c√≥digo, y al encontrarlo, el desarrollador se pregunta c√≥mo podr√≠a funcionar el programa.  Y en mi caso, ella tambi√©n se mantuvo en el top 10. </p><br><p>  En general, el error fue que se llam√≥ a un constructor en la funci√≥n de copia del gen, en el que se omiti√≥ un argumento opcional que conten√≠a el valor de este gen.  En ausencia de este argumento, el valor se seleccion√≥ al azar.  Por lo tanto, al intentar copiar un gen, en lugar de una copia, cre√≥ una nueva instancia aleatoria. </p><br><p>  De hecho, en lugar de la gen√©tica, tuve una b√∫squeda aleatoria, porque cada marca simplemente generaba varios cientos de rutas aleatorias y seleccionaba la mejor. </p><br><p>  Despu√©s de la correcci√≥n (que consiste en agregar 2 caracteres al c√≥digo), el juego se volvi√≥ aproximadamente 3 veces mejor. </p><br><h3 id="ritualnye-tancy">  Baile ritual </h3><br><p>  En alg√∫n momento, not√© que los jugadores a veces rebotan sin raz√≥n, lejos de la pelota, a pesar de la penalizaci√≥n. </p><br><p>  La explicaci√≥n result√≥ ser tal que cont√© el momento del salto con una precisi√≥n de 100 microtics.  Y a veces result√≥ que justo en el momento del salto hubo una colisi√≥n de la pelota con la barra.  Y dependiendo de la precisi√≥n del c√°lculo precisamente en este tic, la trayectoria propuesta llev√≥ a una meta o no. </p><br><p>  En t√©rminos generales, la pelota vuela hacia la meta del oponente y golpea el poste.  mi jugador de f√∫tbol, ‚Äã‚Äãcorriendo en el otro extremo del campo, simula una trayectoria sin salto (con 1 mikrotik) y ve que la pelota no golpea la porter√≠a. </p><br><p>  Luego entra otra trayectoria, con un salto exactamente en el momento en que la pelota golpea la barra.  Y dado que cuento una marca con un salto de 100 microtics no solo para un jugador de f√∫tbol, ‚Äã‚Äãsino tambi√©n para una pelota, el √°ngulo de rebote calculado de la pelota difiere del √°ngulo obtenido en el camino con 1 micr√≥tico, y puede suceder que la pelota en esta trayectoria m√°s precisa caiga en La puerta. </p><br><p>  Y por lo tanto, es esta trayectoria la que se seleccionar√° y el bot saltar√°. </p><br><p>  En general, al realizar un baile ritual con rebotes, los jugadores namanizaron un gol :) </p><br><h3 id="killer-ficha">  Caracter√≠stica asesina </h3><br><p>  Ella no es </p><br><h3 id="testirovanie">  Prueba </h3><br><p>  Conduje juegos interminables en 8 hilos (4 en cada computadora y computadora port√°til).  Eleg√≠ el n√∫mero de juegos para que fuera estad√≠sticamente significativo. </p><br><p>  Con una mejora significativa en la estrategia podr√≠a satisfacerse con medio millar de objetivos en total, <br>  con correcciones m√°s peque√±as, se fueron por la noche y luego la factura fue de miles. </p><br><h3 id="geneticheskiy-podbor-konstant">  Selecci√≥n gen√©tica de constantes. </h3><br><p>  Lo intent√© antes de la primera ronda.  No dio nada por la raz√≥n de que para la gen√©tica necesitas jugar un torneo de una gran cantidad de juegos. </p><br><p>  Trat√© de jugar juegos de 100,000 ticks, pero eso no fue suficiente.  Con una peque√±a diferencia en la fuerza (y generalmente al elegir constantes, este es exactamente el caso), el ganador por 100k ticks depende demasiado del caso.  Necesitas jugar mucho m√°s para estar seguro del ganador.  Y no pod√≠a permitirme dejar la selecci√≥n por un d√≠a o m√°s, as√≠ que rechac√© esta aventura. </p><br><h1 id="v-zaklyuchenie">  En conclusi√≥n </h1><br><p>  Tradicional gracias a los organizadores.  La tarea fue interesante.  Es una pena que me haya obligado a perder casi la mitad del campeonato y realmente no haya hecho nada ni por nitro ni por tres jugadores. </p><br><p>  Como resultado, hasta el final vi en el sandbox c√≥mo mi estrategia gana en modo 2x2 sin nitro con un puntaje de 13: 2 contra cualquier Mr.Smile, que ocup√≥ el 3er lugar en la final, y despu√©s de algunos juegos pierde para √©l el mismo 12: 2 en modo 3x3 con nitro :) </p><br><p>  Y, por supuesto, el video de mi visualizador propietario: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/kh/hx/om/khhxombmg6eo4otune-_vdhdhbu.jpeg"></a> </p><br><p>  Solo que probablemente tendr√°s que despedirte de este visualizador en futuros campeonatos. <br>  Cada vez estoy m√°s y m√°s convencido de que si est√°s solicitando lugares normales, la √∫nica opci√≥n es escribir ... </p><br><p><img src="https://habrastorage.org/webt/gl/zj/1w/glzj1w_lztl_mhea9rqbs9rb5qq.jpeg"></p><br><p>  ... bueno, entiendes el punto. </p><br><p>  Cansado cada vez de descansar en la lentitud de Java y reducir la fuerza de la estrategia para cumplir con el tiempo asignado. </p><br><p>  Espero que alguien haya encontrado algo interesante o √∫til en esta obra m√≠a con una nota de car√°cter autobiogr√°fico :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440574/">https://habr.com/ru/post/440574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440562/index.html">Windows Phone - TODO, es una o otra vez</a></li>
<li><a href="../440564/index.html">Red neuronal GPT-2 de OpenAI. Inicio r√°pido</a></li>
<li><a href="../440566/index.html">Acelerar sin obst√°culos o conocer SIMD</a></li>
<li><a href="../440568/index.html">Estamos escribiendo una aplicaci√≥n de aprendizaje en Go y Javascript para evaluar el rendimiento real de las acciones. Parte 2 - Prueba del backend</a></li>
<li><a href="../440570/index.html">Mapas de sombras reflectantes: Parte 2 - Implementaci√≥n</a></li>
<li><a href="../440576/index.html">Cambios importantes en CTE en PostgreSQL 12</a></li>
<li><a href="../440582/index.html">¬øSe arrastran los autos el√©ctricos al fondo de la corporaci√≥n automotriz?</a></li>
<li><a href="../440584/index.html">¬øQu√© le pasa a la Raspberry Pi?</a></li>
<li><a href="../440586/index.html">Consenso de Exonum: c√≥mo funciona</a></li>
<li><a href="../440588/index.html">MIT aprendi√≥ a transmitir sonido con un l√°ser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>