<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽‍🤝‍🧑🏽 🤝 💻 Sur les courbes de Bézier et la vitesse Arduino, deuxième partie 😉 🔸 🔍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous passerons - et plus loin 


 Dans mon post précédent, j'ai montré comment vous pouvez améliorer la vitesse de calcul des points sur une courbe de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sur les courbes de Bézier et la vitesse Arduino, deuxième partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429254/"><h3>  Nous passerons - et plus loin </h3><br><img src="https://habrastorage.org/webt/hx/vp/j2/hxvpj2li3y68iwtzbikjgddqauy.jpeg"><br><br>  Dans mon post précédent, j'ai montré comment vous pouvez améliorer la vitesse de calcul des points sur une courbe de Bézier (KB) en: <br><br><ol><li>  Transformations des formules de calcul - accélération ~ 3 fois. </li><li>  Il n'y a presque pas d'accélération de PT à FT - mais cela permet 3. </li><li>  L'opération de remplacement de la division par multiplication et décalage est une accélération de 40% supplémentaires. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Triste retraite</b> <div class="spoiler_text">  - J'ai fait une erreur dans la dernière formule, il était possible d'accélérer un peu plus les calculs en repliant une autre expression constante et, hors multiplication, au lieu de 502 obtenir 410 cycles d'horloge par cycle de calcul.  Malheureusement, aucun des lecteurs du post précédent ne me l'a fait remarquer dans les commentaires ... mais j'espérais cela, ce qui signifie que je ne pouvais pas assez intéresser mes lecteurs pour qu'ils lisent correctement (c'est-à-dire attentivement) mes opus.  D'accord, essayez encore. </div></div><br><a name="habracut"></a><br>  À la fin du message mentionné, j'ai dit que les calculs peuvent être faits encore plus rapidement, mais ce que "le garçon a dit - le garçon l'a fait". <br><br>  Permettez-moi de vous rappeler encore une fois la formule obtenue pour calculer le point sur la base de connaissances <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mo>=&amp;gt;</mo><mn>2</mn><mo>&amp;#x2217;</mo><mn>2</mn><mo>+</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.566ex" height="2.66ex" viewBox="0 -832 17466.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-28" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-41" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-31" x="3225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="3948" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-65" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-74" x="5137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2B" x="5721" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-42" x="6721" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-31" x="7481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-29" x="7981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="8593" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-65" x="9316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-74" x="9782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2B" x="10366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-43" x="11367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-28" x="12127" y="0"></use><g transform="translate(12517,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-3D"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-3E" x="778" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-32" x="14352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="15074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-32" x="15797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2B" x="16298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-29" x="17076" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mo stretchy="false">(</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>C</mi><mo stretchy="false">(</mo><mo>=&gt;</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>+</mo><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P = (A1 * et + B1) * et + C (=> 2 * 2 +) </script></p>  La prochaine augmentation de la vitesse est liée à la particularité du problème - nous devons non seulement calculer la valeur de KB à différentes valeurs du paramètre "et", mais trouver une série de valeurs lors de la modification (dans ce cas, l'augmentation) de ce paramètre par une valeur fixe connue (en outre, dans notre case unit), qui vous permet d'utiliser la technique décrite ci-dessous.  À mon époque, cela s'appelait la méthode de calcul de la différence (si la mémoire est bonne, du moins c'était ce qu'on appelait dans les cours), tout Internet est à votre disposition, peut-être (même avec certitude), il y a un autre nom. <br><br>  Nous considérons le cas P = A * et (=&gt; 1 *), et supposons que nous connaissons la valeur de P0 avec un argument u0.  La valeur avec l'argument suivant u0 + 1 peut alors être calculée comme P = A * (u0 + 1) = A * u0 + A = P0 + A (=&gt; 1+).  Sans perdre de précision, nous avons pu remplacer l'opération de multiplication par l'opération d'addition, qui est beaucoup plus rapide. <br><br>  Maintenant un exemple plus complexe P = A * et * et (=&gt; 2 *), nous considérons par analogie P = A * (et + 1) * (et + 1) = A * (et * et + 2 * et + 1) = A * et * et + 2 * A * et + A = P0 + 2 * A * et + A (=&gt; 2 * 2 +).  À première vue, nous n'avons rien gagné, mais si nous calculons A '= 2 * A à l'avance, nous obtenons (=&gt; 1 * 2 +), une victoire est tout à fait possible.  Mais nous ne nous arrêterons pas sur ce qui a été réalisé et sur l'expression obtenue A '* et appliquerons la technique déjà connue de nous, alors nous aurons deux opérations sur deux variables: P = P + A' + A;  A '= A' + A (=&gt; 3+).  Si nous tenons compte du fait que la valeur initiale de A 'peut être effectuée davantage par A, alors en général il n'y a que deux additions au lieu de deux multiplications.  Oui, nous avons dû obtenir deux variables supplémentaires, mais c'est un échange classique - nous payons avec de la mémoire pour le moment. <br><br>  Il ne reste plus qu'à calculer les valeurs initiales correctes, mais cela n'est fait qu'une seule fois au début des itérations, et si la valeur initiale du paramètre est u = 0, alors c'est généralement trivial P = 0, A '= A.  Nous allons tester notre méthode sur plusieurs itérations (c'est complètement inutile, les mathématiques correctement appliquées ne peuvent pas donner la mauvaise réponse), mais cela nous permettra de mieux comprendre ce qui se passe.  Alors <br>  itération 0: et = 0;  P = 0 (vrai);  A '= A;  A '' = 2 * A; <br>  itération 1: et = 1;  P = 0 + A '= 0 + A = A (vrai);  A '= A' + A '' = A + 2 * A = 3 * A; <br>  itération 2: et = 2;  P = A + 3 * A = 4 * A (vrai);  A '= 3 * A + 2 * A = 5 * A; <br>  itération 3: et = 3;  P = 9 * A (vrai);  A '= 7 * A et ainsi de suite. <br><br>  On note le lien entre les formules obtenues et la méthode de Newton pour calculer la valeur d'une fonction au voisinage d'un point de valeur connue.  De plus, étant donné que notre fonction est du second ordre et que toutes les dérivées, à partir du troisième, sont égales à zéro, nous pouvons remplacer en toute sécurité le signe égal approximatif par le signe exact.  La seule différence avec cette méthode est que nous déplaçons constamment le point par rapport auquel nous construisons un nouveau voisinage afin d'éviter d'effectuer des opérations de multiplication dans la formulation d'origine. <br><br>  Réécrivez notre expression originale pour KB sous forme développée <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mi>t</mi><mo>&amp;#x2217;</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>C</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.476ex" height="2.178ex" viewBox="0 -780.1 13121.8 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-41" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-31" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="3558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-65" x="4281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-74" x="4748" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="5331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-65" x="6054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-74" x="6520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2B" x="7104" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-42" x="8105" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-31" x="8864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2217" x="9587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-65" x="10310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-74" x="10776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMAIN-2B" x="11360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhiH-XXalDh0s3T0j_LBYAbKIRkZIg#MJMATHI-43" x="12361" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mi>t</mi><mo>∗</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mi>t</mi><mo>+</mo><mi>C</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P = A1 * et * et + B1 * et + C </script></p>  puis pour les calculs utilisant cette méthode, nous avons besoin de 2+ pour le premier terme (et deux variables), 1+ pour le deuxième terme (et une variable) et 2+ pour tout additionner (=&gt; 5+).  On peut s'attendre à ce que même cette (mauvaise) approche donne un gain par rapport à 2 * 2 +, mais tout va bien mieux.  De toute évidence, l'opération d'addition est additive (merci, capitaine), vous pouvez donc regrouper les termes et remplacer les termes constants par de nouvelles expressions, ce qui donne l'algorithme suivant: <br><br>  1. Les valeurs initiales de P = C;  A '= A1 + B1;  A '' = 2 * A1; <br>  2. à l'étape suivante P = P + A ';  A '= A' + A '' (=&gt; 2+), ce qui est sans aucun doute plus rapide que le schéma de Horner. <br><br>  Nous implémentons notre algorithme sous la forme d'un programme (ce n'est pas aussi trivial que cela puisse paraître, car pour des raisons de simplicité j'ai oublié le besoin de décalages, mais ce n'est pas trop difficile ... pendant 20 minutes), nous obtenons la complexité de calcul (=&gt; 2 + 1 &gt;&gt;) et mesurons vitesse - il s'est avéré 140 (augmentation de la vitesse de 3 fois) cycles par cycle, mais c'est presque un résultat idéal.  Ce que nous devons faire pour obtenir l'option idéale (dans un sens) est de prêter attention à la dimension des opérandes dans les formules.  Maintenant, nous effectuons toutes les opérations sur des entiers longs (32 bits), et cela peut être inutile à certains endroits.  Si nous réduisons la capacité des opérandes au minimum nécessaire, nous pouvons obtenir un gain de 20 à 25%, mais cela nous obligera à passer à l'assembleur (C n'a pas les moyens appropriés pour de telles opérations) et à analyser attentivement les données du problème d'origine.  Que ce soit au lecteur de décider de le faire ou non, nous avons déjà accéléré les calculs de plus de 1900/140 = 13 fois par rapport à l'approche «naïve». <br><br>  La dernière remarque sur la mise en œuvre de l'algorithme est que nous excluons toujours l'opération de division en la changeant par une multiplication constante, que nous prenons en compte lors de la génération des données initiales et du décalage par un multiple constant de 8. Cela peut être fait de différentes manières avec des temps d'exécution légèrement différents, laissant ces expériences à l'attention d'un lecteur curieux . <br><br>  Cependant, un problème est survenu de manière totalement inattendue - nous voyons clairement deux opérations d'addition sur des nombres de 32 bits, qui devraient prendre 4 + 4 = 8 cycles d'horloge, mettre 8 * 3 * 2 = 48 cycles d'horloge supplémentaires pour l'envoi d'opérandes, 4 cycles d'horloge pour la réception du résultat du décalage, 4 un cycle d'horloge pour appeler la procédure de calcul et revenir, et 4 cycles d'horloge pour organiser le cycle - d'où 60 autres cycles d'horloge ne sont pas clairs.  Auparavant, nous ne l'avions tout simplement pas remarqué dans le contexte de centaines de cycles d'horloge, mais vous pouvez maintenant faire attention.  Des mesures excessives ont été facilement trouvées - au cours du cycle, il y a eu des opérations de débogage inutiles, si vous nettoyez tout soigneusement, il ne reste que 120 mesures et le but de chacune est tout à fait compréhensible (enfin, pas si clair, mais quand même).  Ensuite, nous découvrons le temps d'exécution du cycle vide - 22 mesures, je me demande ce qu'ils font là tout ce temps, mais eh bien, et effacez le temps de calcul réel, qui sera de 98 cycles.  Notez que l'évaluation de l'accélération de travail obtenue change: au lieu de 1900/140 = 13, nous obtenons (1900-50) / (140-40) = 19 fois, ce qui n'a aucun sens pratique, car le cycle est toujours nécessaire, mais il vous permet de l'augmenter encore plus l'estime de soi. <br><br>  Et la dernière remarque - comme il est facile de le voir, nous avons commencé à rechercher et à éliminer les puces uniquement lorsque nous avons traité les grands coléoptères et leur (puces) existence est devenue évidente et, de plus, significative.  Je recommande fortement exactement cette approche (et je ne suis pas le seul dans cette recommandation) lors de l'optimisation des programmes en termes de performances. <br><br>  Eh bien, en conclusion, à propos de la note «dans un sens» - si nous parlons de calculer séquentiellement les coordonnées du point suivant sur la base de connaissances lors de la modification du paramètre (représentant le temps), alors l'algorithme proposé (après toutes les optimisations) n'est plus possible à améliorer.  Mais si vous reformulez la tâche et, par exemple, fixez l'objectif de simplement construire un bureau d'études à l'écran (sans référence au temps), alors il existe une méthode très prometteuse, le mot-clé "Brezenheim", mais "c'est une histoire complètement différente", à laquelle je consacrerai un billet séparé (peut-être un jour si la sœur aînée ne s'en soucie pas). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429254/">https://habr.com/ru/post/fr429254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429244/index.html">Greedy Gnome: alors que j'écrivais des analyses de marché dans Lineage 2</a></li>
<li><a href="../fr429246/index.html">Stage d'été chez Mars IS: un regard intérieur</a></li>
<li><a href="../fr429248/index.html">Conseils polyglottes: comment apprendre n'importe quelle langue sans larmes et malédictions</a></li>
<li><a href="../fr429250/index.html">Cent recettes de tenue de livres numériques</a></li>
<li><a href="../fr429252/index.html">Analyse statique des applications mobiles</a></li>
<li><a href="../fr429256/index.html">Comment faire pousser une forêt sur Actionscript3 / Flash en quelques * lignes de code</a></li>
<li><a href="../fr429258/index.html">Comment créer des mécanismes de jeu fiables en utilisant uniquement Excel: modélisation et optimisation de solutions</a></li>
<li><a href="../fr429260/index.html">Notre chemin vers un stockage centralisé des journaux</a></li>
<li><a href="../fr429262/index.html">Bienvenue au Meetup Autumn DIYorDIE du 17 novembre</a></li>
<li><a href="../fr429264/index.html">Li-ion UPS time: un risque d'incendie ou une étape sûre vers l'avenir?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>