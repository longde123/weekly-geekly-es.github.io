<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜïÔ∏è üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø üåø Caract√©ristiques de l'utilisation de la biblioth√®que RxJs dans un syst√®me bancaire en ligne üë∏üèΩ üßîüèæ üë≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pr√©sentation 
 La conception d'un syst√®me bancaire en ligne moderne est une t√¢che assez compliqu√©e. Dans le m√™me temps, un certain nombre de t√¢ches de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Caract√©ristiques de l'utilisation de la biblioth√®que RxJs dans un syst√®me bancaire en ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/425897/"><h3>  Pr√©sentation </h3><br>  La conception d'un syst√®me bancaire en ligne moderne est une t√¢che assez compliqu√©e.  Dans le m√™me temps, un certain nombre de t√¢ches de d√©veloppement de la partie cliente de l'application sont associ√©es au processus de traitement d'une grande quantit√© de donn√©es provenant presque simultan√©ment de plusieurs sources d'information.  Les donn√©es du syst√®me bancaire √† distance (RBS), les services de messagerie instantan√©e, divers services d'information doivent √™tre re√ßus et trait√©s en temps r√©el ici et maintenant.  Pour r√©soudre des probl√®mes de ce type, les m√©thodes de programmation r√©active sont largement utilis√©es aujourd'hui. <br><a name="habracut"></a><br>  Le terme "programmation r√©active" au sens large d√©signe une telle organisation de l'application, dans laquelle la propagation des changements dans le syst√®me se produit √† la suite du traitement des √©tats des flux de donn√©es.  Les probl√®mes importants de cette m√©thode sont la simplicit√© de pr√©sentation des flux d'informations et la possibilit√© de r√©pondre aux erreurs qui se produisent lors du traitement asynchrone des r√©sultats de pr√©sentation. <br><br>  Au sens strict, la programmation r√©active de l'interface utilisateur Web peut signifier l'utilisation d'outils de d√©veloppement standard, tels que la biblioth√®que RxJs.  Cette biblioth√®que fournit une repr√©sentation discr√®te des s√©quences de donn√©es √† l'aide de l'objet observable, qui sert de source d'informations entrant dans l'application √† certains intervalles. <br><br>  Consid√©rez les caract√©ristiques de l'utilisation de la biblioth√®que sur l'exemple de la conception de l'interface Web d'une banque en ligne pour les petites entreprises.  Lors du d√©veloppement de l'interface utilisateur, nous avons utilis√© la plateforme Google Angular 6 avec la biblioth√®que RxJs int√©gr√©e version 6. <br><br><h3>  T√¢ches de conception d'interface utilisateur r√©actives </h3><br>  Pour l'utilisateur, la plupart des op√©rations de la banque Internet se r√©sument souvent √† trois √©tapes: <br><br><ul><li>  s√©lectionner l'op√©ration n√©cessaire dans la liste, par exemple, rembourser un pr√™t ou r√©approvisionner un compte; </li><li>  remplir partiellement le formulaire correspondant (les d√©tails du paiement sont remplis automatiquement par le nom de l'organisation ou le nom du b√©n√©ficiaire entr√© par l'utilisateur); </li><li>  confirmation automatis√©e des op√©rations par SMS ou signatures √©lectroniques. </li></ul><br>  Du point de vue du d√©veloppeur, la mise en ≈ìuvre de ces √©tapes comprend la solution des t√¢ches suivantes: <br><br><ul><li>  v√©rifier l'√©tat du syst√®me RBS, assurer la pertinence des donn√©es sur les op√©rations de la liste; </li><li>  traitement asynchrone des flux de donn√©es lors du remplissage d'un formulaire, y compris les donn√©es saisies par l'utilisateur et re√ßues des services de messagerie d'informations (nom, TIN et BIC de la banque par exemple); </li><li>  validation du formulaire rempli; </li><li>  sauvegarde automatique des donn√©es dans le formulaire. </li></ul><br><h3>  V√©rification de l'√©tat du syst√®me RBS </h3><br>  Le processus d'obtention de donn√©es pertinentes √† partir du syst√®me RB, par exemple des informations sur une ligne de cr√©dit ou le statut d'un ordre de paiement, comprend deux √©tapes: <br><br><ul><li>  v√©rifier l'√©tat de disponibilit√© des donn√©es; </li><li>  recevoir des donn√©es mises √† jour. </li></ul><br>  Pour v√©rifier l'√©tat actuel des donn√©es, des demandes sont faites √† l'API du syst√®me avec un certain laps de temps et jusqu'√† ce qu'une r√©ponse soit re√ßue sur l'√©tat de pr√©paration des donn√©es <br><br>  Il existe plusieurs r√©ponses possibles pour le syst√®me RB: <br><br><ul><li>  {vide: vrai} - les donn√©es ne sont pas encore pr√™tes; </li><li>  les donn√©es mises √† jour peuvent √™tre re√ßues par le client; </li></ul><br><pre><code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">empty</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">// -   }</span></span></code> </pre> <br><ul><li>  une erreur. </li></ul><br>  En cons√©quence, la r√©ception des donn√©es pertinentes s'effectue sous la forme de: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MIN_TIME = <span class="hljs-number"><span class="hljs-number">2000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_TIME = <span class="hljs-number"><span class="hljs-number">60000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EXP_BASE = <span class="hljs-number"><span class="hljs-number">1.4</span></span>; request() <span class="hljs-comment"><span class="hljs-comment">//     .pipe( expand((response, index) =&gt; { const delayTime = Math.min(MIN_TIME * Math.pow(EXP_BASE, index), MAX_TIME); return response.empty ? request().pipe(delay(delayTime)) : EMPTY; }), last() ) .subscribe((response) =&gt; { /** -  */ });</span></span></code> </pre><br><br>  Analysons √©tape par √©tape: <br><br><ol><li>  Nous envoyons une demande.  demande () </li><li>  La r√©ponse va s'√©largir.  Expand est une instruction RxJS qui r√©p√®te r√©cursivement le code dans son bloc pour chaque prochaine alerte pour l'Observable interne et externe, jusqu'√† ce que le thread annonce sa r√©ussite.  Par cons√©quent, afin de terminer le flux, il est n√©cessaire de renvoyer un tel observable afin qu'il n'y en ait pas un seul suivant - VIDE. </li><li>  Si la r√©ponse est venue {empty: true}, alors nous faisons une deuxi√®me demande apr√®s un certain d√©lai (delayTime).  Afin de ne pas surcharger le serveur de requ√™tes, nous augmentons l'intervalle de temps pour le ping √† chaque nouvelle requ√™te. </li><li>  Si lors de la prochaine requ√™te, quelque chose d'autre est venu en r√©ponse, arr√™tez le ping (retournez VIDE) et renvoyez le r√©sultat de la derni√®re requ√™te √† l'abonn√© (op√©rateur last ()). </li><li>  Apr√®s avoir re√ßu la r√©ponse, nous prenons le r√©sultat et le traitons.  Un objet du formulaire entrera en souscription: </li></ol><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">empty</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">// -   }</span></span></code> </pre><br><br><h3>  Formes r√©actives </h3><br>  Envisagez la t√¢che de concevoir un formulaire Web r√©actif d'un document de paiement √† l'aide de la biblioth√®que ReactiveForms du cadre angulaire. <br><br>  Les trois classes de base de la biblioth√®que FormControl, FormGroup et FormArray vous permettent d'utiliser une description d√©clarative des champs de formulaire, de d√©finir les valeurs initiales des champs et √©galement de d√©finir des r√®gles de validation pour chaque champ: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormGroup({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormControl(<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required), <span class="hljs-comment"><span class="hljs-comment">//          surname: new FormControl('') });</span></span></code> </pre><br><br>  Pour les formulaires avec un grand nombre de champs, il est d'usage d'utiliser le service FormBuilder, qui vous permet de les cr√©er en utilisant du code plus compact <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.group({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required], <span class="hljs-attr"><span class="hljs-attr">surname</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> });</code> </pre><br><br>  Apr√®s avoir cr√©√© le formulaire dans le mod√®le de la page d'ordre de paiement, il suffit de sp√©cifier un lien vers le formulaire myForm, ainsi que les noms de ses champs nom et pr√©nom <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formGroup</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myForm"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>Name: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>Surname: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  La conception qui en r√©sulte vous permet de g√©n√©rer et de suivre tout flux d'informations passant par les champs du formulaire √† la suite de la saisie de l'utilisateur et bas√© sur la logique m√©tier de l'application.  Pour ce faire, il vous suffit de vous abonner aux √©v√©nements g√©n√©r√©s par l'observateur asynchrone du formulaire ValueChanges <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.myForm.valueChanges .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> { ‚Ä¶ <span class="hljs-comment"><span class="hljs-comment">//     })</span></span></code> </pre><br><br>  Supposons que la logique m√©tier d√©finit les exigences pour remplir automatiquement les d√©tails de la destination de paiement lorsque l'utilisateur entre le NIF du destinataire ou le nom de l'organisation.  Le code de traitement des donn√©es saisies par l'utilisateur dans le NIF / nom de l'organisation ressemblera √†: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.payForm.valueChanges .pipe( mergeMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getRequisites(value)) <span class="hljs-comment"><span class="hljs-comment">//       ) .subscribe(requisites =&gt; { this.patchFormByRequisites(requisites) //        })</span></span></code> </pre><br><br><h3>  Validation </h3><br>  Les validateurs se pr√©sentent sous deux formes: <br><br><ul><li>  synchrone; </li><li>  asynchrone. </li></ul><br>  Nous rencontrons r√©guli√®rement des valideurs synchrones - ce sont des fonctions qui v√©rifient les donn√©es saisies lorsque vous travaillez avec le champ.  En termes de formes r√©actives: <br>  "Un valideur synchrone est une fonction qui prend des formes de contr√¥le et renvoie une valeur vraie s'il y a une erreur et une fausse sinon." <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">customValidator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isInvalid(control.value) ? { <span class="hljs-attr"><span class="hljs-attr">code</span></span>: <span class="hljs-string"><span class="hljs-string">"mistake"</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">"smth wents wrong"</span></span> } : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre><br><br>  Nous mettrons en place un validateur qui v√©rifiera si l'utilisateur a indiqu√© dans le formulaire une s√©rie de documents, si le passeport √©tait pr√©c√©demment indiqu√© comme type de document d'identification: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requredSeria</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> docType = control.parent.get(<span class="hljs-string"><span class="hljs-string">"docType"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (docType &amp;&amp; docType.value === <span class="hljs-string"><span class="hljs-string">"passport"</span></span> &amp;&amp; !control.value) { error = { <span class="hljs-attr"><span class="hljs-attr">code</span></span>: <span class="hljs-string"><span class="hljs-string">"wrongSeria"</span></span>, <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">"  "</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> error; }</code> </pre><br><br>  Ici, nous nous r√©f√©rons √©galement au formulaire parent et en l'utilisant, nous obtenons la valeur d'un autre champ.  Il √©tait possible de retourner juste vrai comme une erreur, mais dans ce cas, il a √©t√© d√©cid√© de faire autrement.  Vous pouvez intercepter ces messages d'erreur dans le champ d'erreurs d'un contr√¥le ou d'un formulaire.  Si le champ a plusieurs validateurs, vous pouvez sp√©cifier exactement lequel des validateurs n'a pas pu afficher le message d'erreur souhait√© ou ajuster la validation des autres champs. <br><br>  Le validateur sera ajout√© au formulaire comme suit: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.documentForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.group({ <span class="hljs-attr"><span class="hljs-attr">docType</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, Validators.required], <span class="hljs-attr"><span class="hljs-attr">seria</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, requredSeria], <span class="hljs-attr"><span class="hljs-attr">number</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> });</code> </pre><br><br>  Pr√™t √† l'emploi, plusieurs validateurs couramment rencontr√©s sont √©galement disponibles.  Tous sont repr√©sent√©s par des m√©thodes statiques de la classe Validators.  Il existe √©galement des m√©thodes de composition des validateurs. <br>  L'inexactitude d'un champ entra√Æne imm√©diatement la nullit√© de l'ensemble du formulaire.  Cela peut √™tre utilis√© lorsque vous devez d√©sactiver un certain bouton OK, si le formulaire contient au moins un champ non valide.  Ensuite, tout se r√©sume √† v√©rifier une condition ¬´myform.invalid¬ª, qui retournera vrai si le formulaire n'est pas valide. <br><br>  Le validateur asynchrone a une diff√©rence - le type de la valeur de retour.  La valeur v√©ridique ou fausse doit √™tre transmise dans une promesse ou dans un observable. <br><br>  Chaque contr√¥le ou chaque formulaire a un statut (mySuperForm.status), qui peut √™tre "VALIDE", "INVALIDE", "D√âSACTIV√â".  √âtant donn√© que lors de l'utilisation de validateurs asynchrones, il peut ne pas √™tre clair dans quel √©tat le formulaire est actuellement, il y a un statut sp√©cial de "EN ATTENTE".  Gr√¢ce √† cette condition (mySuperForm.status === "EN ATTENTE"), vous pouvez afficher le pr√©chargeur ou effectuer tout autre style de formulaire. <br><br><h3>  Sauvegarde automatique </h3><br>  Le d√©veloppement de logiciels bancaires (logiciels) implique de travailler avec diff√©rents documents standards.  Par exemple, il s'agit de formulaires de demande ou de questionnaires, qui peuvent comprendre des dizaines de champs obligatoires.  Lorsque vous travaillez avec de tels documents volumineux, la prise en charge de la sauvegarde automatique est requise pour plus de commodit√© pour l'utilisateur, de sorte que si vous perdez votre connexion Internet ou d'autres probl√®mes techniques, les donn√©es que l'utilisateur a saisies pr√©c√©demment restent dans la version provisoire sur le serveur. <br><br>  Voici les principaux aspects de la proc√©dure d'enregistrement automatique pour l'architecture client-serveur: <br><br><ol><li>  Les demandes de sauvegarde doivent √™tre trait√©es par le serveur dans l'ordre dans lequel les modifications ont √©t√© apport√©es.  Si vous envoyez imm√©diatement une demande √† chaque modification, vous ne pouvez pas garantir qu'une demande ant√©rieure ne viendra pas ensuite et n'√©crasera pas les nouvelles modifications. </li><li>  Il n'est pas n√©cessaire d'envoyer un grand nombre de requ√™tes au serveur jusqu'√† ce que l'utilisateur ait fini d'entrer, il suffit de le faire par chronom√©trage. </li><li>  Si plusieurs modifications ont √©t√© apport√©es avec un d√©lai relativement important et que la demande des premi√®res modifications n'est pas encore retourn√©e, il n'est pas n√©cessaire d'envoyer des demandes pour chaque modification suivante imm√©diatement apr√®s le retour de la premi√®re demande.  Vous ne pouvez prendre que ces derniers, afin de ne pas envoyer de donn√©es non pertinentes. </li></ol><br>  Le premier cas peut √™tre facilement trait√© √† l'aide de l'op√©rateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">concatMap</a> .  Le deuxi√®me cas sera r√©solu sans aucun probl√®me en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">debounceTime</a> .  La logique du troisi√®me peut √™tre d√©crite comme: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lastRequest$ = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BehaviorSubject(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   queue$.subscribe(lastRequest$); queue$ .pipe( debounceTime(1000), exaustMap(request$ =&gt; request$.pipe( //  ,     map(response =&gt; ({request$, response})), //       catchError(() =&gt; of(null) //   ) ) .subscribe(({request$, response}) =&gt; { if (lastRequest$.value !== request$) { queue$.next(lastRequest$.value); //     } });</span></span></code> </pre><br><br>  Il reste dans saveQueue $ pour envoyer une demande.  Notez la pr√©sence de l'op√©rateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exaustMap</a> au lieu de concatMap.  Cet op√©rateur est n√©cessaire pour ignorer toutes les notifications de l'Observable externe jusqu'√† ce que celle de l'Interne ait termin√© son observation ("compil√©e").  Mais dans notre cas, si lors de la demande il y aura une file d'attente de nouvelles notifications, nous devons prendre la derni√®re et jeter le reste.  exaustMap supprimera tout, y compris le dernier.  Par cons√©quent, nous enregistrons la derni√®re notification dans BehaviorSubject et dans l'abonnement, si la demande termin√©e en cours est diff√©rente de la derni√®re, nous jetterons √† nouveau la derni√®re demande dans la file d'attente. <br><br>  Il convient √©galement de noter l'ignorance des erreurs lors des requ√™tes, impl√©ment√©es √† l'aide de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">instruction catchError</a> .  Vous pouvez √©crire une gestion des erreurs plus complexe avec une notification pour l'utilisateur qu'une erreur s'est produite lors de l'enregistrement.  Mais son essence est que lorsqu'une erreur se produit dans le flux, le flux ne doit pas √™tre ferm√©, comme c'est le cas pour les notifications d'erreur et compl√®tes. <br><br><h3>  Conclusion </h3><br>  Le niveau de d√©veloppement actuel des technologies de programmation r√©active utilisant la biblioth√®que RxJS vous permet de cr√©er des applications client √† part enti√®re pour les syst√®mes bancaires en ligne sans frais de main-d'≈ìuvre suppl√©mentaires pour organiser l'interaction avec les interfaces tr√®s charg√©es des syst√®mes bancaires √† distance. <br><br>  La premi√®re connaissance de RxJS peut effrayer m√™me un d√©veloppeur exp√©riment√© qui est confront√© aux ¬´subtilit√©s¬ª de la biblioth√®que qui impl√©mentent le mod√®le de conception ¬´Observer¬ª.  Mais, surmontant peut-√™tre ces difficult√©s, √† l'avenir, RxJS deviendra un outil indispensable pour r√©soudre les probl√®mes de traitement asynchrone de flux de donn√©es h√©t√©rog√®nes en temps r√©el. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425897/">https://habr.com/ru/post/fr425897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425883/index.html">√Ä plein temps</a></li>
<li><a href="../fr425887/index.html">Et voici la neuvi√®me g√©n√©ration d'Intel Core</a></li>
<li><a href="../fr425889/index.html">R√©sum√© des √©v√©nements informatiques d'octobre (deuxi√®me partie)</a></li>
<li><a href="../fr425891/index.html">Bus 3D - une architecture prometteuse de syst√®mes informatiques</a></li>
<li><a href="../fr425893/index.html">¬´Flutter commence √† s√©duire la communaut√©, mais pas encore les clients¬ª: entretien avec Paulina Szklarska</a></li>
<li><a href="../fr425899/index.html">Colline de fourmis ou forteresse? Je construis une maison pour le prix d'un appartement. 1 partie</a></li>
<li><a href="../fr425901/index.html">Station m√©t√©o sur Arduino de A √† Z. Partie 1</a></li>
<li><a href="../fr425903/index.html">Les vacances arrivent: SCRF a doubl√© la bande ISM de 868 MHz</a></li>
<li><a href="../fr425905/index.html">Comment √©crire du code assembleur avec des instructions qui se chevauchent (une autre technique pour masquer le bytecode)</a></li>
<li><a href="../fr425907/index.html">Nous faisons un projet d'apprentissage automatique en Python. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>