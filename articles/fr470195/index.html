<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Ñ üàÇÔ∏è üìÑ F # 4: Let / Use / Do üõåüèæ üöµüèΩ üê¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous nous pencherons sur les liaisons en F #, en particulier sur Let / Use / Do. Maintenant, vous vous demandez peut-√™tre ce que son...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>F # 4: Let / Use / Do</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470195/">  Dans cet article, nous nous pencherons sur les liaisons en F #, en particulier sur Let / Use / Do.  Maintenant, vous vous demandez peut-√™tre ce que sont les liaisons, et puisque nous ne les avons pas encore examin√©es, il est maintenant temps d'en parler. <br><br>  En termes simples, une liaison associe un identifiant √† une valeur ou une fonction. <br><a name="habracut"></a><br><h4>  Soit </h4><br>  Vous utilisez le mot cl√© let pour associer un nom √† une valeur ou une fonction.  En fait, il y a une utilisation subtile et diff√©rente de Let, o√π l'un est d√©clar√© au niveau sup√©rieur dans le module, puis l'autre o√π nous d√©finissons un contexte local.  Voici un exemple des deux: <br><br><pre><code class="erlang hljs">module DemoModule = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someFunction = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = <span class="hljs-number"><span class="hljs-number">2</span></span> a * b</code> </pre> <br>  Nous pourrions acc√©der √† someFunction en utilisant un nom complet, tel que DemoModule.someFunction, mais les liaisons Let (a, b) imbriqu√©es ne sont disponibles que pour Let top level.  Habituellement, vous voyez plus de cas lorsque nous utilisons la liaison Let pour d√©clarer certaines valeurs du module interne, concentrons-nous l√†-dessus (bien qu'il soit important de savoir que vous pouvez utiliser Let au niveau du module). <br><br>  Voyons donc quelques exemples suppl√©mentaires. <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aString =<span class="hljs-string"><span class="hljs-string">"this is a string"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aInt = <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aDecimal = <span class="hljs-number"><span class="hljs-number">12.444</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aPiFunction () = Math.PI <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aSquareRootFunction (x) = Math.Sqrt(x) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aFullyTypedSquareRootFunction (x :float) = Math.Sqrt(x) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a,b = <span class="hljs-string"><span class="hljs-string">"a"</span></span>,<span class="hljs-string"><span class="hljs-string">"tuple"</span></span></code> </pre> <br>  Vous pouvez voir que nous pouvons utiliser la liaison Let pour se lier √† plusieurs valeurs, qui peuvent √™tre de diff√©rents types, telles que: <br><br><ul><li>  Entier </li><li>  D√©cimal </li><li>  Fonction sans param√®tres d'entr√©e </li><li>  Fonction avec param√®tres d'entr√©e (o√π le syst√®me d'inf√©rence logique de type F # choisira le type correctement) </li><li>  Une fonction qui a des types de param√®tres enti√®rement d√©finis </li><li>  Tuple (dans ce cas, String * String tuple) </li></ul><br>  Ailleurs, vous pouvez voir la liaison Let dans la classe, mais nous en discuterons plus en d√©tail dans le prochain article de cette s√©rie. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vous pouvez en savoir plus sur Let binding sur MSDN.</a> <br><br><h4>  Utiliser </h4><br>  La liaison Use est tr√®s similaire √† la liaison Let, car elle lie la valeur au r√©sultat de l'expression.  La principale diff√©rence est que la liaison Use est con√ßue pour fonctionner avec les types IDisposable et supprime automatiquement une valeur lorsqu'elle n'est plus dans la port√©e.  Ceci est tr√®s similaire au mot cl√© .NET using, bien que je ne pense pas que la liaison F # Use sera exactement la m√™me que celle utilis√©e dans .NET, car le mot cl√© using dans .NET est en fait un essai / enfin avec un appel √† Dispose ( ) enfin. <br><br>  Nous avons d√©j√† vu un exemple de la liaison Use dans le dernier article sur la mise en forme du texte, mais juste pour nous rappeler, regardons cela de nouveau. <br><br><pre> <code class="erlang hljs">use sw = new StreamWriter(@<span class="hljs-string"><span class="hljs-string">"c:\temp\fprintfFile.txt"</span></span>) fprintf sw <span class="hljs-string"><span class="hljs-string">"This is a string line %s\r\n"</span></span> <span class="hljs-string"><span class="hljs-string">"cat"</span></span> fprintf sw <span class="hljs-string"><span class="hljs-string">"This is a int line %i"</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> sw.Close()</code> </pre> <br>  Dans cet exemple, la liaison Use garantit que la m√©thode StreamWriter appellera sa m√©thode Dispose () apr√®s avoir appel√© sw.Close (), comme illustr√© ci-dessus. <br><br>  Utiliser ne fonctionne qu'avec IDisposables, et vous obtiendrez une erreur de compilation si vous essayez de l'utiliser avec autre chose, comme indiqu√© ci-dessous: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9cc/ddf/4cc/9ccddf4cca18ab8e635892c0c0e61ff5.png" alt="image"><br><br>  √âtant donn√© que la m√©thode Dispose () est appel√©e √† la fin de la liaison Use, il convient de veiller √† ne pas renvoyer la valeur associ√©e √† Let. <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Write = use sw = new StreamWriter(@<span class="hljs-string"><span class="hljs-string">"c:\temp\fprintfFile.txt"</span></span>) sw</code> </pre> <br>  Si vous devez absolument renvoyer IDisposable, qui fait partie de la liaison Use, vous pouvez utiliser le rappel √† la place.  Quelque chose comme √ßa fonctionnera, mais je m'arr√™terais et me demanderais si vous avez correctement con√ßu votre conception si vous faites de telles choses: <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Write callback = use sw = new StreamWriter(@<span class="hljs-string"><span class="hljs-string">"c:\temp\fprintfFile.txt"</span></span>) fprintf sw <span class="hljs-string"><span class="hljs-string">"Write is writing to the StreamWriter"</span></span> callback sw sw <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> callback sw = fprintf sw <span class="hljs-string"><span class="hljs-string">"sw is the StreamWriter"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disp = Write callback</code> </pre> <br><h4>  Faire </h4><br>  La liaison do est utilis√©e pour ex√©cuter du code sans d√©finir de fonction ou de valeur.  Une liaison DOIT toujours retourner une unit√© (aucune valeur / annulation).  Dans de nombreux cas, vous pouvez omettre la liaison Do et tout fonctionnera comme pr√©vu. <br><br>  Voici quelques exemples d'utilisation des liaisons Do. <br><br><pre> <code class="erlang hljs">do printf <span class="hljs-string"><span class="hljs-string">"doing the do"</span></span> //oh oh <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a unit do printf <span class="hljs-string"><span class="hljs-string">"print a sum %i"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> do <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Si je vous montre √† la place une capture d'√©cran avec le code ci-dessus, vous verrez que le compilateur se plaindra si vous essayez d'utiliser Do avec un r√©sultat non-Unit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e7a/20c/9d3/e7a20c9d3e18100e0f1a4ed11db911de.png" alt="image"><br><br>  Vous avez deux options: <br><br><ul><li>  Utilisez un op√©rateur en pipeline pour ignorer le r√©sultat </li><li>  Cr√©er une reliure let </li></ul><br>  J'ai montr√© un exemple de chacun d'eux ci-dessous: <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> do printf <span class="hljs-string"><span class="hljs-string">"print a sum %i"</span></span> x do (<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span> |&gt; ignore)</code> </pre> <br><h4>  Laissez!  Utilisez!  Faites! </h4><br>  Bien que je ne veuille pas encore en parler, vous pouvez parfois voir accidentellement Let!  Utilisez!  Faites!, Et lorsque vous faites cela, cela fait partie de ce qu'on appelle une expression de calcul.  Vous le verrez tr√®s probablement dans les workflows asynchrones F #, que nous couvrirons dans l'un des derniers articles.  Si je comprends suffisamment, je peux m√™me essayer d'expliquer comment vous pouvez cr√©er votre propre ¬´expression informatique¬ª, bien qu'il s'agisse d'un concept plut√¥t abstrait et d'un sujet plut√¥t compliqu√©, ce n'est donc pas le moment pour eux. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470195/">https://habr.com/ru/post/fr470195/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470181/index.html">Fonctionnement de la m√©thode Levenberg-Marquardt</a></li>
<li><a href="../fr470187/index.html">La fourchette de prix pour la conception et la conception d'un service en ligne est de 100 000 √† 5 millions de roubles. Raisons</a></li>
<li><a href="../fr470189/index.html">Envoi de messages poste √† poste avec PeerJS</a></li>
<li><a href="../fr470191/index.html">Web R√©solution de probl√®mes avec r0ot-mi. Partie 1</a></li>
<li><a href="../fr470193/index.html">Protection universelle contre les attaques xss et les injections sql</a></li>
<li><a href="../fr470197/index.html">Puis-je Haz? Consid√©rez le mod√®le Has</a></li>
<li><a href="../fr470199/index.html">M√©mo √† un d√©veloppeur novice de jeux informatiques</a></li>
<li><a href="../fr470203/index.html">L'aiguille d'approbation du karma, comme miroir de l'√©volution de l'Homo</a></li>
<li><a href="../fr470205/index.html">Localisation de jeux dans Unreal Engine 4</a></li>
<li><a href="../fr470207/index.html">1C Developer Tales: Epicafe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>