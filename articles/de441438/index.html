<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐁 🛍️ 🔸 Unified Services goszakup.gov.kz - Version 2 🛀🏾 👰🏿 🧑‍🤝‍🧑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich arbeite als Entwickler in der Firma Center for Electronic Finance JSC. 
 Eines unserer Projekte ist das Portal für das öffentliche Beschaffungswes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unified Services goszakup.gov.kz - Version 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441438/"> Ich arbeite als Entwickler in der Firma Center for Electronic Finance JSC. <br>  Eines unserer Projekte ist das Portal für das öffentliche Beschaffungswesen der Republik Kasachstan - goszakup.gov.kz. <br><br>  Vor einem Jahr haben wir ein großes Projekt gestartet - Unified Services (OpenData). <br>  Für die Implementierung wurde die RestAPI-Methodik verwendet. <br><br>  Heute werde ich über die neue Version unserer Dienste und die neue Schnittstelle für die Arbeit mit ihnen sprechen. <br><br><img src="https://habrastorage.org/webt/pt/bj/mx/ptbjmxtr9jqrdj0suzdnoztmabu.png"><br><a name="habracut"></a><br>  Wir haben 6 Open Data-Dienste entwickelt und eingeführt: <br><br><ul><li>  Teilnehmerregister </li><li>  Register skrupelloser Lieferanten </li><li>  Register der Jahrespläne </li><li>  Ankündigungen des Staates.  Beschaffung </li><li>  Losregister </li><li>  Registrierung von Verträgen </li></ul><br>  Viele Unternehmen in Kasachstan verbinden und empfangen bereits Daten zu diesen Diensten. <br>  Durch die Einführung von Open Data konnten wir die Datenbanklast um etwa 40% reduzieren, da Unternehmen keine unterschiedlichen Parser schreiben müssen, um Daten zum öffentlichen Beschaffungswesen zu sammeln.  Es ist genug, um eine schwierige Aufgabe zu bestehen :) <br><br><ol><li>  Schreiben Sie eine Anfrage für ein Zugriffstoken </li><li>  Lesen Sie die Dokumentation für Services auf unserem Portal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">goszakup.gov.kz/ru/developer/ows</a> </li><li>  Schreiben Sie Ihren RestAPI-Client </li></ol><br><h4>  Unified Services - Ein neuer Ansatz </h4><br>  RestAPI ermöglicht es, Daten bequemer und schneller abzurufen als das Parsen einer Site. Das Standard-RestAPI bietet Unternehmen jedoch keine Flexibilität. Um eine Verbindung mit Objekten herzustellen, müssen Sie zuerst alle Daten abrufen und erst dann die Verknüpfungen zwischen ihnen herstellen. <br>  Um Daten in einer Anzeige zu erhalten, muss RestAPI zuerst das Ankündigungsregister, dann das Losregister und schließlich das Planregister anfordern.  Dies bedeutet, dass zum Erhalt einer Ankündigung mindestens 3 Anfragen ausgeführt werden müssen. Wenn Sie Daten zu 50 Anzeigen erhalten möchten, benötigen Sie mindestens 101 Anfragen an RestAPI, vorausgesetzt, jede Ankündigung enthält 1 Los (1 zum Empfangen von 50 Anzeigen, 50 zum Empfangen von Losen, 50 zu Erhalt von Planpunkten). <br><br>  Wir haben einen Weg gefunden, diesen Betrag auf eine Anfrage zu reduzieren! <br><br>  Wir starten die 2. Version von Unified Services - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ows.goszakup.gov.kz/v2</a> . <br>  Neben der Erweiterung von Datensätzen erweitern wir die Möglichkeit, mit unserer API zu arbeiten. <br><br>  Jetzt können die Daten über RestAPI und die neue Schnittstelle - GraphQL - abgerufen werden. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ows.goszakup.gov.kz/v2/graphql</a> <br><br><img src="https://habrastorage.org/webt/jm/q-/tb/jmq-tbqg_fuph_g2mvshivb-gas.png"><br><br>  Ich werde nicht beschreiben, was GraphQL ist, dazu können Sie den Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">aliksend</a> lesen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist das GraphQL?</a> <br><br>  Ich werde Ihnen sagen, welche Vorteile wir nach dem Start von GraphQL haben: <br><br><ul><li>  Flexibilität anfordern; </li><li>  Verwandte Objekte abrufen; </li><li>  Vollständige Eingabe von Anfragen und Antworten; </li><li>  Neue Datensuchoberfläche. </li></ul><br><h4>  Flexibilität anfordern </h4><br>  Mit einer einfachen RestAPI-Anfrage erhalten Sie das Datenformat, das im Voraus festgelegt wurde. <br>  Wenn Sie GraphQL abfragen, erhalten Sie die Daten in dem Format, das Sie benötigen. <br><br>  Wenn Sie Daten anfordern, bestimmen Sie selbst das Format der Daten, die Sie benötigen, z. B. die ID und <br><br>  Vertragsnummer <br><br><pre><code class="javascript hljs">{ contract { id contract_number_sys } }</code> </pre> <br>  Als Antwort erhalten wir nur diese Daten: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span> } ] } }</code> </pre><br>  Nun, solche Abfragen sind am einfachsten zu implementieren.  Unternehmen haben die Möglichkeit zu wählen, welche Daten sie erhalten möchten, während wir keine Anpassungen vornehmen müssen, als ob dies bei der Arbeit mit RestAPI der Fall wäre.  Sie erhalten nur die erforderlichen Felder. <br><br><img src="https://habrastorage.org/webt/95/cr/jw/95crjwjr7wikz8fhajv-lh6w9iq.gif"><br><br><h4>  Verwandte Objekte abrufen </h4><br>  Wir haben nicht aufgehört, die Funktionalität von RestAPI zu wiederholen, indem wir einfach die teilweise Auswahl von Daten ermöglicht haben. <br><br>  Wir haben die zweite Funktion von GraphQL - Objektbeziehungen implementiert. <br><br>  Wenn Sie Daten gemäß RestAPI erhalten, muss der Kunde im Vertrag, um Daten zum Vertrag und zum Unternehmen zu erhalten, zunächst Daten aus dem <b>Teilnehmerregister</b> abrufen und erst dann Daten aus dem <b>Vertragsregister</b> empfangen und die Verbindung zwischen den Objekten selbst herstellen. <br><br>  Wenn Sie mit GraphQL arbeiten, müssen Sie keine Daten mehr vollständig aus dem Teilnehmerregister empfangen. Fordern Sie einfach Daten in dem Format an, an dem Sie interessiert sind: <br><br><pre> <code class="javascript hljs">{ contract { id contract_number_sys customer { name_ru } } }</code> </pre><br>  So erhalten wir mit einer Anfrage sowohl Vertragsdaten als auch Unternehmensdaten für den Kunden: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span>, <span class="hljs-string"><span class="hljs-string">"customer"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name_ru"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } } ] } }</code> </pre><br><img src="https://habrastorage.org/webt/9t/q6/_i/9tq6_ixwkyzzqnplhf2gpdfjd2e.gif"><br><br>  Und es gibt viele solcher Beziehungen, die implementiert wurden. Jetzt benötigen Unternehmen, um Daten zu erhalten, erheblich weniger Datenanforderungen.  Gleichzeitig muss man nicht mehr genau erraten, wie Objekte zueinander in Beziehung stehen, um vollständige Datensätze zu erhalten, um sie miteinander zu verbinden. <br><br>  Ich habe versucht, die Verbindungsstruktur, die ich erreicht habe, teilweise zu demonstrieren. <br><br><img src="https://habrastorage.org/webt/iv/db/sw/ivdbsw9gyxmh7cugosffdj6wcjy.png"><br><br><h4>  Anfragen und Antworten eingeben </h4><br>  Viele Befürworter von SOAP-Anfragen haben immer das wichtigste Plus gesetzt - die Datentypisierung. <br>  RestAPI hat im Gegensatz zu SOAP keine Beschreibung seiner Struktur und Sie wissen nicht im Voraus, welcher Datentyp.  Aber GraphQL ändert alles. <br><br>  Jetzt können Sie im gesamten Datenschema Daten von GraphQL anfordern und erhalten: <br><br><ul><li>  Vollständige Beschreibung der Datenstruktur; </li><li>  Beschreibung, welches Feld einen Datentyp hat (Int, String, Boolean); </li><li>  Beschreibung verschachtelter Objekte und Feldstruktur verschachtelter Objekte; </li><li>  Detaillierte Beschreibung zum Beispiel in russischer Sprache für jedes Feld; </li><li>  Erhalten Sie eine Benachrichtigung, dass ein Feld das Flag Veraltet mit einer Beschreibung erhalten hat. </li></ul><br>  Ich verwende das Insomnia REST Client-Programm - insomnia.rest, um mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GraphQL</a> zu arbeiten <br>  Bei der Arbeit mit GraphQL erhält es die gesamte Struktur von Objekten und fordert beim Erstellen einer Abfrage dazu auf. <br><br>  Ich werde ein paar Screenshots als Beispiel geben. <br><br>  1. Hilfe beim Erstellen von Abfragen seit  Das Programm erhielt eine vollständige Objektstruktur <br><br><img src="https://habrastorage.org/webt/xl/jj/fb/xljjfbpgh2j1xata_orj0aurhqi.png"><br><br>  2. Hinweis zur Beschreibung jedes Feldes mit Datentyp und Beschreibung <br><br><img src="https://habrastorage.org/webt/6v/ep/93/6vep93hfz0ynsplgm9_kraaktky.png"><br><br>  3. Hinweis, wenn ein Feld ein Flag erhalten hat - Veraltet <br><br><img src="https://habrastorage.org/webt/vg/rx/lt/vgrxlti7nowou4kqq1gsr6ov138.png"><br><br>  Mit dieser Funktion von GraphQL erhalten Sie ein vollständiges Bild davon, mit welchen Feldern und Objekten Sie arbeiten. <br><br><img src="https://habrastorage.org/webt/4f/lg/ux/4flguxg9ruc1mgbvyif7ffcwr9e.gif"><br><br><h4>  Neue Datenabrufschnittstelle </h4><br>  Und am Ende habe ich das interessanteste verlassen. <br><br>  Alles scheint cool zu sein, es ist möglich, eine eigene Datenstruktur aufzubauen, es besteht eine Verbindung zu anderen Objekten, alle Daten werden eingegeben.  Aber es fehlt noch etwas ... <br><br>  Es gibt nicht genügend Gelegenheit, nach diesen Daten zu suchen. <br><br>  Von Anfang an wurde ein Suchformat mit den Parametern in der Anfrage selbst implementiert: <br><br><pre> <code class="javascript hljs">{ trd_buy(ref_buy_status_id: <span class="hljs-number"><span class="hljs-number">1</span></span>) { name_kz name_ru } }</code> </pre><br>  Aber hier bin ich auf eine Reihe von Problemen gestoßen: <br><br><ol><li>  Bei einer großen Anzahl von Suchkriterien wird die Abfrage einfach unlesbar. </li><li>  Es ist unmöglich, das Array bei der Suche nach Daten zu bestimmen, um nach mehreren Varianten desselben Feldes zu suchen. </li></ol><br>  Um die Erstellung von Abfragen zu vereinfachen und die Suchfunktion zu erweitern, habe ich verschachtelte Objekte zum Filtern von Daten implementiert. <br><br>  Wir definieren eine Variable in der Anfrage, die das Filterobjekt angibt. <br><br><pre> <code class="javascript hljs">query($filter: TrdBuyFiltersInput){ trd_buy(filters: $filter) { name_kz name_ru } }</code> </pre><br>  Wir beschreiben die Datensuchparameter selbst: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ref_buy_status_id"</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>] } }</code> </pre><br>  Als Ergebnis erhalten wir alle Anzeigen mit den Status 1 und 2. <br><br>  In der Anfrage selbst geben wir nur die Datenstruktur an, und alle Suchparameter fließen in die Übertragung von Parametern ein, bei denen wir bereits Datenarrays zur Filterung nach mehreren Kriterien übertragen können. <br><br><img src="https://habrastorage.org/webt/cl/gl/di/clgldijd6pe0y7evhlw0k37eawg.gif"><br><br>  Darüber hinaus haben wir alle im GraphQL-Schema selbst eine Beschreibung eines solchen Suchobjekts: <br><br><img src="https://habrastorage.org/webt/t5/ns/i1/t5nsi1rf4yy4ubvk3cxakvmqmci.png"><br><br><h4>  Unified Services - Version 2.0: </h4><br>  Dienstleistungen arbeiten: <br><br><ul><li>  Teilnehmerregister </li><li>  Registrierung von Ankündigungen </li><li>  Registrierung von Verträgen </li><li>  Register der Handlungen </li><li>  Losregister </li><li>  Register der Jahrespläne </li><li>  Register skrupelloser Lieferanten </li></ul><br>  Wir haben eine neue Funktionalität eingeführt, die die Arbeit mit unserer API erheblich vereinfacht, über eine flexible Abfragestruktur verfügt und die Möglichkeit bietet, nach festgelegten Kriterien nach Daten zu suchen. <br><br>  Wir haben nicht an Geschwindigkeit beim Abrufen von Daten verloren, sondern nur die Anzahl der zum Abrufen von Daten erforderlichen Anforderungen verringert. <br><br>  Wir konnten im Datenschema vor deaktivierten oder umbenannten Feldern warnen. <br><br>  Wir planen, die API weiterzuentwickeln und auch die morphologische Suche nach Daten zu Diensten zu ermöglichen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de441438/">https://habr.com/ru/post/de441438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de441424/index.html">So schützen Sie sich vor Markentrollen</a></li>
<li><a href="../de441426/index.html">Apples Top-Manager wurde des Insiderhandels beschuldigt. Er musste gegen sie kämpfen</a></li>
<li><a href="../de441428/index.html">PowerShell-Grundlagen: Definieren des Zeilenende mit einem bestimmten Zeichen</a></li>
<li><a href="../de441430/index.html">Zum ersten Mal probieren wir App Center aus und berichten über unsere Erfahrungen</a></li>
<li><a href="../de441436/index.html">Wissenschaftler haben mithilfe der CRISPR-Technik universelle Stammzellen gezüchtet</a></li>
<li><a href="../de441442/index.html">YouTube hat Anti-Impfstoff-Anzeigen deaktiviert</a></li>
<li><a href="../de441444/index.html">An den Fingern: zugeordnete Typen in Rust und was ist ihr Unterschied zu Typargumenten</a></li>
<li><a href="../de441446/index.html">Computer lernen: Wie man neue Fähigkeiten erlangt</a></li>
<li><a href="../de441448/index.html">Unmögliche Pfanne und andere Penrose-Kacheln gewinnen</a></li>
<li><a href="../de441450/index.html">Pentesting Azure - Gedanken zur Sicherheit im Cloud Computing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>