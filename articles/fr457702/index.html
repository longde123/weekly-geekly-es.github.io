<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤮 🤦 👧🏽 Travailler avec l'API KOMPAS-3D → Leçon 16 → Contrôler les caractères 👩🏿‍🤝‍👨🏾 🐄 🌉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous continuons la série d'articles sur l'utilisation de l'API CAD COMPASS-3D. Les personnages de contrôle ont déjà été vus plusieurs fois dans les le...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Travailler avec l'API KOMPAS-3D → Leçon 16 → Contrôler les caractères</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/457702/">  Nous continuons la série d'articles sur l'utilisation de l'API CAD COMPASS-3D.  Les personnages de contrôle ont déjà été vus plusieurs fois dans les leçons précédentes du cycle.  Ensuite, à chaque fois, il a été dit que les lignes de sortie ne devraient pas les contenir, car COMPAS les traite de manière spéciale.  Il est maintenant temps de mieux les connaître. <br><br>  Après avoir maîtrisé le travail avec eux, vous comprendrez que la création de chaînes composées complexes est une tâche triviale, dans la plupart des cas, ne nécessitant pas d'écrire une grande quantité de code. <br><br>  Dans la leçon, nous verrons comment utiliser des caractères spéciaux et des caractères de police avec des caractères de contrôle, parlerons de la façon de créer des fractions et des écarts avec leur aide, et envisagerons également leur utilisation conjointement avec les paragraphes. <br><br><img src="https://habrastorage.org/webt/5c/cs/bd/5ccsbdc8ufpd1vavz6hzfbqasas.png"><br><a name="habracut"></a><br><blockquote><h4>  Le contenu de la série de leçons «Travailler avec l'API KOMPAS-3D» </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les bases</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conception de dessin</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Connexion correcte à KOMPAS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Inscription principale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Primitives graphiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Enregistrement d'un document dans différents formats</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Connaître les paramètres</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Méthodes d'écriture plus sophistiquées dans le cartouche</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lecture des cellules de légende</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Caractères spéciaux dont une chaîne</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Étiquettes de texte simples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chaînes composées</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Paragraphes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Texte multiligne</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lignes composées basées sur des paragraphes</a> </li><li>  <b>Caractères de contrôle</b> </li></ol></blockquote><br><h2>  <font color="#00B2FF">Examen du cursus</font> </h2><br>  Les caractères de contrôle sont: @, $, &amp;,;, ~, ^ et #.  Malheureusement, le SDK KOMPAS contient très peu d'informations sur la façon de les utiliser.  Pour plus d'informations, consultez l'aide de KOMPAS, dans la section <i>«9.</i>  <i>Paramètres KOMPAS-3D / Stockage des paramètres système / Fichiers de service / Fichier de menu utilisateur / Syntaxe de fichier</i> . <i>”</i> <br><br><img src="https://habrastorage.org/webt/ya/jc/cx/yajccx87d-06xfzy5rjhfdlc2wa.png"><br><br>  Tous les caractères de contrôle peuvent être conditionnellement divisés en deux groupes: principal et auxiliaire.  Les symboles auxiliaires ne sont utilisés qu'en conjonction avec les principaux et, en eux-mêmes, ne décrivent aucun composant.  Le tableau ci-dessous fournit une brève description des caractères de contrôle. <br><br><img src="https://habrastorage.org/webt/bg/tj/ap/bgtjapszut_xvfq_u2vq0l3rak4.png"><br><br>  Examinons-les plus en détail. <br><br><h2>  <font color="#00B2FF">Insérer des caractères spéciaux</font> </h2><br>  Nous avons déjà considéré les caractères spéciaux (voir les leçons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">4</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">10</a> ).  Ensuite, pour insérer un caractère spécial, une instance distincte de l'interface <b>ksTextItemParam a</b> été <b>utilisée</b> .  À l'aide de caractères de contrôle, vous pouvez insérer autant de caractères spéciaux que vous le souhaitez sans <b>réutiliser l'</b> interface <b>ksTextItemParam dans la chaîne</b> . <br>  La syntaxe d'insertion de caractères spéciaux est la suivante: <br><br>  <i><b>AA</b> @ <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  où <br>  <b>AA</b> - une chaîne située avant un caractère spécial, <br>  <b>Y</b> - modificateur pour la représentation du code de caractère spécial, <br>  <b>XXXX</b> - code du caractère spécial inséré. <br>  <b>BB</b> - une ligne située après le caractère spécial. <br><br>  Le code du caractère spécial inséré est spécifié entre <i>@</i> et <i>~</i> .  De plus, selon la valeur du modificateur <b>Y</b> , il peut être spécifié en notation décimale ou hexadécimale.  Les valeurs valides du modificateur <b>Y</b> sont indiquées dans le tableau ci-dessous. <br><br><img src="https://habrastorage.org/webt/pk/td/jq/pktdjqgmgj8ftldxtei4-614ct0.png"><br><br>  <i>Remarque:</i> comme mes expériences le montrent, COMPASS traite normalement l'absence du caractère <i>~</i> .  Dans ce cas, des caractères spéciaux sont insérés au besoin.  Cependant, je recommande fortement de ne pas compter sur ce comportement et de toujours terminer l'opération d'insertion avec le caractère <i>~</i> . <br><br>  Ce qui suit est un exemple de programme démontrant la sortie de caractères spéciaux. <br><br><pre><code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @+51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" @*33~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre> <br>  Dans cet exemple, le même caractère (α alpha) s'affiche deux fois.  La première fois que son code est spécifié en décimal, la deuxième fois en hexadécimal.  La figure ci-dessous montre le résultat du programme. <br><br><img src="https://habrastorage.org/webt/o3/4b/3i/o34b3igkqgkvdrmze1ky6w4a1es.png"><br><br>  Les caractères de contrôle vous permettent d'afficher plusieurs caractères spéciaux sur la même ligne.  Ainsi, dans l'exemple suivant, les trois premières lettres de l'alphabet grec sont affichées dans un appel à la méthode <b>ksText</b> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@+51~ @+52~ @+53~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/mg/_v/xv/mg_vxv17mpco689p7gm6fzhp-ms.png"><br><br>  Modifier + est le modificateur par défaut.  Par conséquent, la ligne ci-dessus peut être écrite comme ceci: <br><br>  <i>"@ 51 ~ @ 52 ~ @ 53 ~"</i> <br><br>  Dans ce cas, le résultat du programme restera le même. <br><br>  Si un <i>@ n'est</i> pas un caractère valide, la ligne entre <i>@</i> et <i>~</i> s'affiche telle quelle.  Les caractères <i>@</i> et <i>~ sont</i> omis.  Par exemple, avec la ligne: <br><br>  <i>«Avant @ T51 ~ Après»</i> <br><br>  Le document affichera: <br><br>  <i>Avant T51 Après</i> <br><br>  <i>Remarque:</i> ce comportement de KOMPAS n'est pas documenté et peut varier selon les différentes versions du programme. <br><br>  <i>Remarque:</i> les caractères de contrôle ne conviennent pas pour insérer des caractères spéciaux contenant une chaîne.  Le fait est que pour limiter leur action, vous devez utiliser le drapeau SPECIAL_SYMBOL_END (pour plus de détails, voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">10 leçon du</a> cycle), mais les caractères de contrôle ne permettent pas l'utilisation de drapeaux. <br><br><h2>  <font color="#00B2FF">Insérer des caractères de police</font> </h2><br>  En plus des caractères spéciaux, vous pouvez insérer des caractères ordinaires par leur code.  Les caractères de contrôle <i>^</i> et <i>~</i> sont utilisés pour cela.  Leur syntaxe est donnée ci-dessous. <br><br>  <i><b>AA</b> ^ ( <b>FNAME</b> ) <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  où <br>  <b>AA</b> - une chaîne située avant le caractère inséré, <br>  <b>FNAME</b> - le nom de la police dont le caractère est tiré, <br>  <b>Y</b> - modificateur pour la représentation du code de caractère (similaire à @), <br>  <b>XXXX</b> - code numérique du caractère inséré, <br>  <b>BB</b> - une ligne située après le caractère inséré. <br><br>  De par sa fonction, le caractère de contrôle <i>^</i> est similaire à <i>@</i> .  Ils ont même une syntaxe similaire.  Mais il y a deux différences importantes entre eux: <br><br><ol><li>  <i>^</i> insère non pas un caractère spécial, mais un caractère de police par son code; </li><li>  pour le caractère à insérer, vous pouvez définir la police dans le champ <b>FNAME</b> (@ ne le permet pas). </li></ol><br>  Les codes de symboles peuvent être consultés à l'aide de l'application charmap (Symbol Table), qui fait partie du système d'exploitation Windows. <br><br>  Si aucune police n'est spécifiée, la police par défaut est utilisée.  Voici un exemple utilisant le caractère <i>^</i> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" ^(Arial)*B1~  ^*39~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  Dans cet exemple, deux caractères sont insérés dans la chaîne résultante, pour le premier nous sélectionnons la police <i>Arial</i> , pour le second nous laissons la police par défaut.  La figure ci-dessous montre la ligne qui est sortie dans le document. <br><br><img src="https://habrastorage.org/webt/lj/8i/5k/lj8i5kqw_acqwuvq0lulgnmgolw.png"><br><br>  Remarque: la police est définie uniquement pour le caractère affiché.  Comme mes expériences le montrent, KOMPAS traite normalement l'absence de terminateur.  Cependant, je ne recommande pas de compter sur ce comportement et de toujours définir un finaliseur. <br><br>  Si un caractère non valide (ou un code non valide) est spécifié après <i>^</i> , alors <i>^</i> et <i>~ sont</i> omis et la ligne entre eux est affichée telle quelle en utilisant la police par défaut.  Par exemple, avec la ligne <br><br>  <i>"Avant ^ Q (Arial) * B1 ~ Après"</i> <br><br>  Le document affichera: <br><br>  <i>"Avant Q (Arial) * B1 Après"</i> <br><br>  Si un nom de police incorrect est indiqué dans le champ <b>FNAME</b> , KOMPAS sélectionnera la police et affichera le caractère qu'il contient. <br><br>  S'il n'y a pas de parenthèse fermante dans la ligne, alors une telle ligne ne sera pas entièrement affichée.  Par exemple, avec la ligne: <br><br>  <i>"Avant ^ Q (Arial * B1 ~ Après"</i> <br><br>  Le document n'affichera que <br><br>  <i>"Jusqu'à"</i> <br><br>  <i>Remarque:</i> le comportement ci-dessus avec une syntaxe de caractères de contrôle incorrecte est valide pour KOMPAS-3D V17 et n'est pas documenté.  Dans d'autres versions, cela peut être différent. <br><br><h2>  <font color="#00B2FF">Autres moyens d'insérer des caractères</font> </h2><br>  Les caractères <i>@</i> et <i>^</i> ont respectivement des analogues - <i>&amp;</i> et <i>#</i> .  Ils ont une syntaxe similaire: <br><br>  <i><b>AA</b> &amp; <b>XX</b> ~ <b>BB</b></i> <i><br></i>  <i><b>AA</b> # ( <b>FNAME</b> ) <b>XX</b> ~ <b>BB</b></i> <br><br>  où <br><br>  <b>AA</b> - une chaîne affichée avant le caractère inséré, <br>  <b>XX</b> - code du caractère inséré (pour &amp; - caractère spécial, pour # - caractère de police), <br>  <b>BB</b> - une chaîne affichée après le caractère inséré, <br>  <b>FNAME</b> - le nom de la police. <br><br>  Il n'y a que deux différences entre les caractères <i>@</i> et <i>^</i> et leurs homologues: <br><br><ol><li>  Les caractères &amp; et # n'ont pas de modificateur Y. Le code de caractère est toujours spécifié en notation décimale. </li><li>  Le code du caractère à insérer est spécifié par un maximum de deux chiffres. </li></ol><br>  Ce qui suit est le code source d'un programme montrant comment utiliser les caractères <i>&amp;</i> et <i>#</i> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" &amp;51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" #(Arial)37~  #37~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/xq/ku/tw/xqkutwd7x225k5zx8dd-lsriorg.png"><br><br><h2>  <font color="#00B2FF">Texte multiligne</font> </h2><br>  En utilisant des caractères de contrôle, du texte sur plusieurs lignes peut être affiché.  Pour ce faire, au lieu du transfert vers une nouvelle ligne, vous devez insérer la séquence: <i>@ /</i> .  Remarque: le caractère <i>@</i> est utilisé sans terminateur <i>~</i> .  Voici le code source d'un programme qui affiche du texte multiligne à l'aide de caractères de contrôle. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @/ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  Remarque: grâce à l'utilisation de caractères de contrôle, nous <b>affichons</b> du texte sur deux lignes avec un seul appel à la méthode <b>ksText</b> .  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/tp/-3/fm/tp-3fmwgsjpyrgrhhw9icccok70.png"><br><br><h2>  <font color="#00B2FF">Insérer des caractères de contrôle</font> </h2><br>  Nous avons compris comment insérer des caractères spéciaux arbitraires et des caractères Unicode.  Mais que faire si vous souhaitez insérer le caractère de contrôle lui-même?  Ici, vous pouvez procéder de deux manières.  La première façon consiste à utiliser le caractère <i>^</i> et à les coller comme des caractères de police standard.  Mais il existe un moyen plus simple. <br><br>  Symbole <i>;</i>  est auxiliaire et peut être inséré directement dans le texte.  Pour insérer d'autres caractères de contrôle, vous devez les doubler.  Autrement dit, une paire de caractères <i>@@</i> insère un seul caractère <i>@</i> dans le texte.  Il en va de même pour les autres caractères de contrôle. <br><br>  Voici un exemple de programme qui illustre l'insertion de caractères de contrôle dans une chaîne. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" : @@ $$ &amp;&amp; ; ~~ ^^ ##")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/4t/jv/rx/4tjvrxux7i2epcfivimh8aai-2g.png"><br><br><h2>  <font color="#00B2FF">Écarts supérieurs et inférieurs</font> </h2><br>  La syntaxe suivante est utilisée pour insérer des écarts: <br><br>  <i><b>AA</b> $ <b>XX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <br><br>  où <br><br>  <b>AA</b> - texte affiché avant les écarts; <br>  <b>XX</b> - déviation supérieure; <br>  <b>YY</b> est l'écart le plus faible; <br>  <b>BB</b> - texte affiché après les écarts. <br><br>  Veuillez noter: la construction entière est limitée à <i>$</i> caractères, et le « <i>;</i>  »Sert de séparateur entre les écarts supérieurs et inférieurs. <br><br>  S'il n'y a pas de délimiteur "entre les caractères <i>$</i> <i>;</i>  ", Ensuite, la ligne entière entre eux est interprétée comme la déviation supérieure.  Si le composant <b>XX est</b> absent, c'est-à-dire après que le premier <i>$</i> aille immédiatement “ <i>;</i>  ", Ensuite, la ligne suivante entière au <i>$</i> le plus proche <i>est</i> interprétée comme l'écart inférieur. <br><br>  <i>Remarque: le</i> texte de l'écart supérieur ne doit pas commencer par les lettres <i>b</i> , <i>d</i> , <i>s</i> , <i>m</i> et <i>l</i> ( <i>L</i> minuscule).  La raison de cela sera expliquée un peu plus tard. <br><br>  Voici un exemple de programme qui affiche la sortie avec des écarts <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme: <br><br><img src="https://habrastorage.org/webt/-w/hr/ql/-whrqlu38elpopxgq22zblob6tm.png"><br><br>  Veuillez noter que KOMPAS ne traite qu’un seul caractère " <i>;</i>  ".  Le deuxième caractère est " <i>;</i>  "Peut être interprété comme le finaliseur de toute la structure.  Par exemple, avec la ligne " <i>11 $ 22; 33; 44 $</i> " l'écran affichera: <br><br><img src="https://habrastorage.org/webt/pf/22/0i/pf220i_rer29nw_nsx2h88ja_le.png"><br><br>  <i>Remarque:</i> ce comportement de KOMPAS n'est pas documenté, vous ne pouvez donc pas vous y fier. <br><br><h2>  <font color="#00B2FF">Fraction</font> </h2><br>  La syntaxe de fraction est similaire à la syntaxe de déviation et a deux options équivalentes: <br><br>  <i><b>AA</b> $ <b>bXX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <i><br></i>  <i><b>AA</b> $ <b>dXX</b> ;</i>  <i><b>AA</b> $ <b>BB</b></i> <br><br>  où <br><br>  <b>AA</b> - sortie de texte en fractions; <br>  <b>XX</b> est le numérateur; <br>  <b>YY</b> est le dénominateur; <br>  <b>BB</b> - texte affiché après la fraction. <br><br>  Remarque: la seule différence entre la sortie de la fraction et la sortie des écarts est la présence de la lettre <i>d</i> ou <i>b</i> immédiatement après le premier signe de <i>$</i> .  Sinon, leurs syntaxes sont identiques. <br><br>  S'il n'y a pas de « <i>;</i> » entre les caractères <i>$ d</i> ( <i>$ b</i> ) et <i>$</i>  ", Ensuite, la ligne entière entre eux sera interprétée comme un numérateur.  Si le composant <b>XX est</b> absent, c'est-à-dire après que <i>$ d</i> ( <i>$ b</i> ) arrive immédiatement " <i>;</i>  ", Ensuite, la ligne suivante entière au <i>$</i> le plus proche <i>est</i> interprétée comme le dénominateur. <br><br>  <i>Remarque:</i> le texte du numérateur ne doit pas commencer par les lettres <i>s</i> , <i>m</i> ou <i>l</i> ( <i>L</i> minuscule).  La raison de cela sera expliquée un peu plus tard. <br><br>  Voici un exemple d'un programme qui illustre la sortie de fraction à l'aide de caractères de contrôle. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/ha/sm/dd/hasmddwd9o67w8t747vhwceoae0.png"><br><br>  Veuillez noter que KOMPAS traite les caractères "supplémentaires" " <i>;</i>  »Ainsi qu'en cas d'écarts.  Ce comportement n'est pas documenté et ne peut pas être invoqué. <br><br><h2>  <font color="#00B2FF">Contrôle de la variation et de la taille des fractions</font> </h2><br>  Au tout début de la construction des écarts ou des fractions, l'une des lettres peut être localisée: <i>s</i> , <i>m</i> ou <i>l</i> ( <i>L</i> minuscule).  Ils précisent la taille des écarts et des éléments de la fraction (numérateur et dénominateur).  Leur objectif est décrit dans le tableau ci-dessous. <br><br><img src="https://habrastorage.org/webt/mp/ez/1u/mpez1un_2njdu3jxixivvwqbdz4.png"><br><br>  Si aucune de ces lettres n'est spécifiée, alors <i>l est</i> utilisé pour la fraction et <i>m est</i> utilisé pour les écarts.  Voici un exemple de programme qui illustre l'utilisation de ces lettres. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dl;$ ")); document2D-&gt;ksText(100.0,85.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dm;$ ")); document2D-&gt;ksText(100.0,70.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $ds;$ ")); document2D-&gt;ksText(100.0,60.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/z2/2_/dj/z22_djahn5b1uiugptca_0doqui.png"><br><br>  Bien que les lettres <i>s</i> , <i>m</i> et <i>l</i> soient utilisées pour les fractions dans cet exemple, leur utilisation pour les écarts n'est pas différente. <br><br>  Notez que si entre le début d'une fraction ou d'un écart ( <i>$</i> , <i>$ d</i> ou <i>$ b</i> ) et la lettre <i>s</i> , <i>m</i> ou <i>l</i> il y a au moins un caractère «étranger» (par exemple, un espace), alors COMPAS ne «verra» pas les lettres, et la fraction ou L'écart sera la taille par défaut. <br><br><h2>  <font color="#00B2FF">Caractères de contrôle imbriqués</font> </h2><br>  Lors de la sortie de fractions et d'écarts, les lignes incluses dans leur composition sont traitées de manière récursive.  Cela signifie que lors de la formation du numérateur et du dénominateur, des caractères de contrôle peuvent également être utilisés.  Cette approche est illustrée dans l'exemple suivant. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@54~$s2$ + $d@+51~;@+52~$ - ^(Symbol)*70~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/qq/f_/9a/qqf_9au_d7ijxvxhvopiuzlhpbk.png"><br><br>  Pour insérer des lettres de l'alphabet grec, nous utilisons les caractères de contrôle @ et ^ (pour la lettre  pi).  Le degré dans le premier terme est dérivé en utilisant des écarts.  La sous-chaîne <i>$ s2 $ l'</i> affiche.  La lettre <i>s</i> indique la petite taille de l'écart, mais en raison de l'absence de séparateur " <i>;</i>  »Seul l'écart supérieur est affiché. <br><br>  Pour former une fraction, la combinaison <i>$ d; $ est utilisée</i> .  De plus, le numérateur et le dénominateur comprennent des caractères de contrôle qui fournissent la sortie des lettres de l'alphabet grec. <br><br>  Le dernier soustrait (π pi) est affiché comme le symbole de la police Symbol en utilisant les caractères de contrôle <i>^</i> et <i>~</i> . <br><br>  Malheureusement, les possibilités d'une telle "récursivité" sont très limitées.  Nous ne pouvons pas investir les fractions et les écarts les uns dans les autres.  Le problème est que les deux sont formés en utilisant le caractère <i>$</i> control.  Pour cette raison, COMPASS ne peut pas correctement analyser quel <i>$</i> appartient à quel élément. <br><br><h2>  <font color="#00B2FF">Contrôler les caractères dans le paragraphe</font> </h2><br>  Vous pouvez contourner partiellement la restriction avec des caractères de contrôle imbriqués à l'aide de paragraphes.  L'utilisation simultanée de caractères de contrôle et de paragraphes vous permet de créer des structures encore plus complexes.  L'exemple ci-dessous montre la construction d'une fraction à 4 niveaux. <br><br><div class="spoiler">  <b class="spoiler_title">Code de programme pour construire une fraction à 4 niveaux</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">//   DynamicArrayPtr dynamicArray; dynamicArray = static_cast&lt;DynamicArrayPtr&gt;(kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR)); dynamicArray-&gt;ksClearArray(); TextItemParamPtr textItemParam; textItemParam = static_cast&lt;TextItemParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextItemParam)); //     BSTR str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //     TextItemFontPtr textItemFont; textItemFont = static_cast&lt;TextItemFontPtr&gt;(textItemParam-&gt;GetItemFont()); textItemFont-&gt;set_bitVector(NUMERATOR); str = SysAllocString(OLESTR("1 + $d@+51~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //    textItemFont-&gt;set_bitVector(DENOMINATOR); str = SysAllocString(OLESTR("1 + $d@+56~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //  textItemFont-&gt;set_bitVector(END_FRACTION); str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //   textItemFont.Unbind(); textItemParam.Unbind(); //    ksTextLineParam TextLineParamPtr textLineParam; textLineParam = static_cast&lt;TextLineParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextLineParam)); textLineParam-&gt;Init(); textLineParam-&gt;SetTextItemArr(dynamicArray); dynamicArray.Unbind(); //  ParagraphParamPtr paragraphParam; paragraphParam=static_cast&lt;ParagraphParamPtr&gt;(kompas-&gt;GetParamStruct(ko_ParagraphParam)); paragraphParam-&gt;Init(); paragraphParam-&gt;set_x(100.0); paragraphParam-&gt;set_y(100.0); document2D-&gt;ksParagraph(paragraphParam); document2D-&gt;ksTextLine(textLineParam); document2D-&gt;ksEndObj(); //   textLineParam.Unbind(); paragraphParam.Unbind();</code> </pre><br></div></div><br>  Dans cet exemple, les caractères de contrôle sont utilisés pour construire des fractions dans le numérateur et le dénominateur de la fraction principale, ainsi que pour insérer des lettres de l'alphabet grec.  La figure ci-dessous montre le résultat de ce programme. <br><br><img src="https://habrastorage.org/webt/ji/x6/lo/jix6loqqynqpondf3g47pvhopj0.png"><br><br><h2>  Conclusion </h2><br>  Dans cette leçon, nous avons rencontré des caractères de contrôle et appris à les utiliser pour afficher des caractères spéciaux et des caractères de police.  Comme vous pouvez le voir, ils fournissent une syntaxe simple pour créer des chaînes qui incluent des caractères spéciaux, des fractions et des écarts.  Malheureusement, ils ne sont pas bien adaptés pour insérer des caractères spéciaux contenant des chaînes.  Mais ces caractères spéciaux sont extrêmement rares.  C'est l'une des limitations des caractères de contrôle.  En outre, ils ne peuvent pas être utilisés pour créer des sous-chaînes et des sous-chaînes, et il existe des limitations lorsque vous travaillez avec des caractères spéciaux qui incluent des chaînes.  Mais cela n'enlève rien à leurs mérites.  Ceci conclut notre discussion sur les caractères de contrôle. <br><br>  <b>Pour continuer, suivez l'actualité du blog.</b> <br><br> <a href=""><img src="https://habrastorage.org/web/595/eee/f27/595eeef271b24830b3578751fcb52716.png"></a>  Sergey Norseev, Ph.D., auteur du livre "Application Development for COMPAS in Delphi". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457702/">https://habr.com/ru/post/fr457702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457692/index.html">Réflexions sur la norme nationale NB-Fi et les systèmes de facturation</a></li>
<li><a href="../fr457694/index.html">Les dangers de l'utilisation de constantes multi-caractères</a></li>
<li><a href="../fr457696/index.html">Les dangers de l'utilisation de constantes multi-caractères</a></li>
<li><a href="../fr457698/index.html">Expérience: nous utilisons des proxys comme outil pour lutter contre les attaques DoS</a></li>
<li><a href="../fr457700/index.html">Guide d'authentification Node.js sans passport.js et services tiers</a></li>
<li><a href="../fr457704/index.html">Comment les GPU gèrent les branchements</a></li>
<li><a href="../fr457706/index.html">Robot teste SAP ERP</a></li>
<li><a href="../fr457710/index.html">Les fonctionnalités étonnantes des réseaux de neurones 2019</a></li>
<li><a href="../fr457712/index.html">Comment Verizon et BGP Optimizer ont-ils mis en place d'excellents outils hors ligne</a></li>
<li><a href="../fr457714/index.html">Débordement de pile en anglais: Community Kill Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>