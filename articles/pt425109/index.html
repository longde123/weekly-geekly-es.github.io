<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôáüèø üëêüèæ üßîüèª O livro ‚ÄúJava na nuvem. Bota de Primavera, Nuvem de Primavera, Fundi√ß√£o em Nuvem ¬ª üë®üèΩ‚Äçüé® üë® ü§∂üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! Este livro √© destinado principalmente a desenvolvedores de m√°quinas Java e JVM que procuram maneiras de criar software melhor em pouco te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro ‚ÄúJava na nuvem. Bota de Primavera, Nuvem de Primavera, Fundi√ß√£o em Nuvem ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/425109/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/g5/vp/gz/g5vpgzgoyh2hlalmrajcysuwvwo.jpeg" align="left" alt="imagem"></a>  Ol√° pessoal!  Este livro √© destinado principalmente a desenvolvedores de m√°quinas Java e JVM que procuram maneiras de criar software melhor em pouco tempo usando o Spring Boot, o Spring Cloud e o Cloud Foundry.  √â para aqueles que j√° ouviram o ru√≠do aumentar em torno dos microsservi√ßos.  Voc√™ j√° deve ter percebido qual altura estratosf√©rica o Spring Boot decolou e est√° surpreso que as empresas hoje usem a plataforma Cloud Foundry.  Nesse caso, este livro √© para voc√™. <br><br><h3>  Trecho.  3. Estilo de configura√ß√£o de aplicativo de doze fatores </h3><br>  Este cap√≠tulo discutir√° como implementar a configura√ß√£o do aplicativo. <br><a name="habracut"></a><br>  Defina v√°rios termos de vocabul√°rio.  Quando se trata de configura√ß√£o no Spring, na maioria das vezes, quero dizer entrar no ambiente do Spring v√°rias implementa√ß√µes do contexto do aplicativo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ApplicationContext</a> , que ajuda o cont√™iner a entender como conectar os componentes do bean.  Essa configura√ß√£o pode ser representada como um arquivo XML a ser enviado para as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classes ClassPathXmlApplicationContext</a> ou Java anotadas de uma maneira que permita que voc√™ seja fornecido ao objeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AnnotationConfigApplicationContext</a> .  E, claro, ao estudar a √∫ltima op√ß√£o, nos referiremos √† <i>configura√ß√£o Java.</i> <br><br>  Mas neste cap√≠tulo, examinaremos a configura√ß√£o na forma em que ela √© definida no manifesto da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplica√ß√£o de 12 fatores</a> .  Nesse caso, trata-se de valores literais que podem mudar de um ambiente para outro: estamos falando sobre senhas, portas e nomes de host ou sobre sinalizadores de propriedade.  A configura√ß√£o ignora as constantes m√°gicas incorporadas no c√≥digo.  O manifesto inclui um excelente crit√©rio para a configura√ß√£o correta: a base de c√≥digo do aplicativo pode ser de c√≥digo aberto a qualquer momento, sem divulgar e comprometer credenciais importantes?  Esse tipo de configura√ß√£o se refere exclusivamente aos valores que variam de um ambiente para outro e n√£o se aplica, por exemplo, √† conex√£o de beans Spring ou √† configura√ß√£o de rotas Ruby. <br><br><h3>  Suporte no quadro Spring </h3> <br>  No Spring, um estilo de configura√ß√£o de 12 fatores √© suportado desde o advento da classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PropertyPlaceholderConfigurer</a> .  Uma vez definida sua inst√¢ncia, ela substitui os literais na configura√ß√£o XML pelos valores extra√≠dos do arquivo pela extens√£o .properties.  No ambiente Spring, a classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PropertyPlaceholderConfigurer</a> √© oferecida desde 2003.  O Spring 2.5 introduziu suporte para o espa√ßo para nome XML e, ao mesmo tempo, suporte para substitui√ß√£o de propriedade nesse espa√ßo.  Isso permite a substitui√ß√£o na configura√ß√£o XML dos valores literais das defini√ß√µes dos componentes do bean pelos valores designados √†s chaves no arquivo de propriedades externas (nesse caso, no arquivo simple.properties, que pode aparecer no caminho da classe ou ser externo ao aplicativo). <br><br>  A configura√ß√£o no estilo de 12 fatores visa eliminar a falta de confiabilidade das seq√º√™ncias m√°gicas existentes, ou seja, valores como os endere√ßos dos bancos de dados e as contas para conex√£o com eles, portas, etc., codificados no aplicativo compilado.  Se a configura√ß√£o for movida para fora do aplicativo, poder√° ser substitu√≠da sem recorrer a um novo conjunto de c√≥digos. <br><br><h3>  Classe PropertyPlaceholderConfigurer </h3><br>  Vejamos um exemplo de uso da classe PropertyPlaceholderConfigurer, defini√ß√µes XML dos componentes do bean Spring e um arquivo com uma extens√£o .properties removida dos limites do aplicativo.  Apenas precisamos imprimir o valor dispon√≠vel neste arquivo de propriedades.  Isso ajudar√° a executar o c√≥digo mostrado no Exemplo 3.1. <br><br>  Exemplo 3.1  Arquivo de propriedades: some.properties <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.projectName=Spring Framework</code> </pre> <br>  Esta √© a classe ClassPathXmlApplicationContext do Spring, portanto, usamos o espa√ßo para nome XML no contexto do Spring e apontamos para o arquivo some.properties.  Em seguida, usamos literais na forma de $ {configuration.projectName} nas defini√ß√µes dos componentes do bean, e o Spring os substituir√° pelos valores do nosso arquivo de propriedades durante a execu√ß√£o (exemplo 3.2). <br><br>  Exemplo 3.2  Arquivo XML de configura√ß√£o do Spring <br><br><pre> <code class="hljs pgsql">&lt;context:property-placeholder <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>="classpath:some.properties"/&gt; (<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;bean <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="classic.Application"&gt; &lt;property <span class="hljs-type"><span class="hljs-type">name</span></span>="configurationProjectName" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="${configuration.projectName}"/&gt; &lt;/bean&gt;</code> </pre> <br>  (1) classpath: local que se refere ao arquivo no atual bloco de c√≥digo compilado (.jar, .war etc.).  O Spring suporta muitas alternativas, incluindo file: e url :, que permitem que o arquivo exista al√©m do bloco de c√≥digo. <br><br>  Por fim, vamos ver como √© a classe Java, gra√ßas √† qual √© poss√≠vel reunir tudo isso (Exemplo 3.3). <br><br>  Exemplo 3.3  A classe Java que deve ser configurada com o valor da propriedade <br>  pacote cl√°ssico; <br><br><pre> <code class="hljs actionscript"><span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.apache.commons.logging.LogFactory;</span></span> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.springframework.context.support.ClassPathXmlApplicationContext;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> main(String[] args) { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathXmlApplicationContext(<span class="hljs-string"><span class="hljs-string">"classic.xml"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> setConfigurationProjectName(String pn) { LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"the configuration project name is "</span></span> + pn); } }</code> </pre> <br>  O primeiro exemplo usa o formato XML de configura√ß√£o do bean Spring.  No Spring 3.0 e 3.1, a situa√ß√£o dos desenvolvedores que usam a configura√ß√£o Java melhorou significativamente.  A anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Value</a> e a abstra√ß√£o Environment foram introduzidas nesses releases. <br><br><h3>  Ambiente e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">valor</a> abstratos </h3><br>  A abstra√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ambiente</a> representa, durante a execu√ß√£o do c√≥digo, sua rela√ß√£o indireta com o ambiente em que est√° sendo executado e permite que o aplicativo fa√ßa a pergunta (‚ÄúQual separador de linha √© line.separator nesta plataforma?‚Äù) Sobre as propriedades do ambiente.  Uma abstra√ß√£o atua como um mapeamento de chaves e valores.  Ao configurar o PropertySource no ambiente, voc√™ pode configurar de onde esses valores ser√£o lidos.  Por padr√£o, o Spring carrega chaves do sistema e valores do ambiente, como line.separator.  Voc√™ pode instruir o Spring a carregar chaves de configura√ß√£o de um arquivo na mesma ordem que poderia ser usada em vers√µes anteriores da solu√ß√£o de substitui√ß√£o de propriedades do Spring usando a anota√ß√£o @PropertySource. <br><br>  A anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Value</a> fornece uma maneira de incorporar valores de ambiente em construtores, setters, campos etc. Esses valores podem ser calculados usando o Spring Expression Language ou a sintaxe de substitui√ß√£o de propriedade, desde que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PropertySourcesPlaceholderConfigurer esteja</a> registrado, como no Exemplo 3.4. <br><br>  Exemplo 3.4  Registrar PropertySourcesPlaceholderConfigurer <br>  pacote env; <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.AnnotationConfigApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Bean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PropertySource; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PostConstruct; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) throws Throwable { new AnnotationConfigApplicationContext(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fieldValue; (<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> Application(<span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String pn) { log.info(<span class="hljs-string"><span class="hljs-string">"Application constructor: "</span></span> + pn); } (<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> void setProjectName(String projectName) { log.info(<span class="hljs-string"><span class="hljs-string">"setProjectName: "</span></span> + projectName); } (<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> void setEnvironment(Environment env) { log.info(<span class="hljs-string"><span class="hljs-string">"setEnvironment: "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); } (<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean both(Environment env, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (projectName): "</span></span> + projectName); log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (env): "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); }; } <span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> void afterPropertiesSet() throws Throwable { log.info(<span class="hljs-string"><span class="hljs-string">"fieldValue: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fieldValue); } }</code> </pre> <br>  (1) A anota√ß√£o @PropertySource √© uma abrevia√ß√£o similar ao property-placeholder, que configura um PropertySource a partir de um arquivo com a extens√£o .properties. <br><br>  (2) PropertySourcesPlaceholderConfigurer precisa ser registrado como um bean est√°tico, pois √© uma implementa√ß√£o do BeanFactoryPostProcessor e deve ser chamado em um est√°gio inicial do ciclo de vida de inicializa√ß√£o no bean Spring.  Ao usar componentes de bean na configura√ß√£o XML da Spring, essa nuance n√£o √© vis√≠vel. <br><br>  (3) Voc√™ pode decorar os campos com a anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Valor</a> (mas n√£o fa√ßa isso, caso contr√°rio, o c√≥digo n√£o passar√° no teste!) ... <br><br>  (4) ... ou a anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Value</a> pode decorar os par√¢metros do construtor ... <br><br>  (5) ... ou use m√©todos de instala√ß√£o ... <br><br>  (6) ... ou incorpore um objeto Spring Environment e execute a resolu√ß√£o das teclas manualmente. <br><br>  (7) Os par√¢metros com a anota√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Value</a> tamb√©m podem ser usados ‚Äã‚Äãno provedor de argumentos do m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Bean</a> na configura√ß√£o Spring Java. <br><br>  Neste exemplo, os valores s√£o carregados no arquivo simple.properties e, em seguida, ele possui o valor configuration.projectName, que √© fornecido de v√°rias maneiras. <br><br><h3>  Perfis </h3><br>  Entre outras coisas, a abstra√ß√£o do ambiente apresenta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">perfis</a> .  Isso permite atribuir etiquetas (perfis) para agrupar componentes do bean.  Os perfis devem ser utilizados para descrever componentes e gr√°ficos de beans que variam de ambiente para ambiente.  V√°rios perfis podem ser ativados simultaneamente.  Os beans que n√£o possuem perfis atribu√≠dos a eles s√£o sempre ativados.  Os gr√£os que t√™m um perfil padr√£o s√£o ativados apenas se n√£o tiverem outros perfis ativos.  O atributo profile pode ser especificado na defini√ß√£o do componente do bean em XML ou nas classes de tags, classes de configura√ß√£o, componentes individuais do bean ou nos m√©todos do provedor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Bean</a> usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Profile</a> . <br><br>  Os perfis permitem descrever conjuntos de componentes de bean que devem ser criados em um ambiente de maneira um pouco diferente do que em outro.  Em um perfil de desenvolvedor de desenvolvimento local, por exemplo, voc√™ pode usar a fonte de dados H2 incorporada javax.sql.DataSource e, quando o perfil do produto estiver ativo, alterne para a fonte de dados javax.sql.DataSource obtida usando a pesquisa JNDI ou lendo propriedades de uma vari√°vel de ambiente no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cloud Foundry</a> .  Nos dois casos, seu c√≥digo funcionar√°: voc√™ obt√©m o javax.sql.DataSource, mas a decis√£o sobre qual inst√¢ncia espec√≠fica usar √© tomada ativando um perfil ou v√°rios (exemplo 3.5). <br><br>  Exemplo 3.5  Demonstra√ß√£o de que as classes @Configuration podem carregar v√°rios arquivos de configura√ß√£o e fornecer beans diferentes com base em <br>  perfil ativo <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> profiles; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.util.StringUtils; <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"prod"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some-prod.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProdConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"prod InitializingBean"</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile({ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"default"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"dev"</span></span></span><span class="hljs-meta"> })</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"default InitializingBean"</span></span>); } } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean which(Environment e, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"activeProfiles: '"</span></span> + StringUtils.arrayToCommaDelimitedString(e.getActiveProfiles()) + <span class="hljs-string"><span class="hljs-string">"'"</span></span>); log.info(<span class="hljs-string"><span class="hljs-string">"configuration.projectName: "</span></span> + projectName); }; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) { AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(); ac.getEnvironment().setActiveProfiles(<span class="hljs-string"><span class="hljs-string">"dev"</span></span>); (<span class="hljs-number"><span class="hljs-number">4</span></span>) ac.register(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); ac.refresh(); } }</code> </pre> <br>  (1) Esta classe de configura√ß√£o e todas as defini√ß√µes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Bean</a> contidas nela ser√£o calculadas apenas se o perfil do produto estiver ativo. <br><br>  (2) Esta classe de configura√ß√£o e todas as defini√ß√µes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Bean</a> contidas nela ser√£o calculadas apenas se o perfil do desenvolvedor estiver ativo ou se nenhum perfil estiver ativo, incluindo o desenvolvedor. <br><br>  (3) Esse componente InitializingBean simplesmente registra o perfil ativo no momento e insere o valor que foi inserido no arquivo de propriedades. <br><br>  (4) A ativa√ß√£o de um perfil (ou perfis) programaticamente √© bastante simples. <br><br>  O Spring responde a v√°rios outros m√©todos de ativa√ß√£o de perfil usando o token spring_profiles_active ou spring.profiles.active.  Um perfil pode ser configurado usando uma vari√°vel de ambiente (por exemplo, SPRING_PROFILES_ACTIVE), uma propriedade da JVM (‚ÄëDspring.profiles.active = ...), um par√¢metro de inicializa√ß√£o do aplicativo de servlet ou programaticamente. <br><br><h3>  Configura√ß√£o Bootiful </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spring Boot</a> melhora significativamente a situa√ß√£o.  O ambiente inicialmente carregar√° propriedades automaticamente de uma hierarquia de locais predefinidos.  Os argumentos da linha de comandos substituem os valores de propriedade derivados de JNDI, que substituem as propriedades obtidas de System.getProperties () etc. <br><br>  - argumentos de linha de comando. <br>  - Atributos JNDI de java: comp / env. <br>  - Propriedades de System.getProperties (). <br>  - Vari√°veis ‚Äã‚Äãde ambiente do sistema operacional. <br>  - Arquivos de propriedades externas no sistema de arquivos: (config /)? Application. (Yml.properties). <br>  - Arquivos de propriedades internas no arquivo morto (config /)? Aplicativo. (Yml.properties). <br>  - Anota√ß√£o @PropertySource nas classes de configura√ß√£o. <br>  - Propriedades de origem de SpringApplication.getDefaultProperties (). <br><br>  Se o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">perfil estiver ativo, os</a> dados dos arquivos de configura√ß√£o baseados no nome do perfil ser√£o lidos automaticamente, por exemplo, de um arquivo como src / main / resources / application-foo.properties, em que foo √© o perfil atual. <br><br>  Se a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SnakeYAML for</a> mencionada nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">caminhos</a> da classe, os arquivos YAML tamb√©m ser√£o carregados automaticamente, seguindo basicamente a mesma conven√ß√£o. <br><br><blockquote>  A p√°gina de especifica√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YAML</a> afirma que "YAML √© um padr√£o leg√≠vel por humanos para serializar dados para todas as linguagens de programa√ß√£o".  YAML √© uma representa√ß√£o hier√°rquica de valores.  Em arquivos regulares com a extens√£o .properties, a hierarquia √© indicada por um ponto (‚Äú.‚Äù). Nos arquivos YAML, uma nova linha e um n√≠vel de recuo adicional s√£o usados.  Seria bom usar esses arquivos para evitar a necessidade de especificar ra√≠zes comuns na presen√ßa de √°rvores de configura√ß√£o altamente ramificadas. </blockquote><br>  O conte√∫do de um arquivo com a extens√£o .yml √© mostrado no Exemplo 3.6. <br><br>  Exemplo 3.6  Arquivo de propriedades Application.yml.  Os dados s√£o apresentados em ordem hier√°rquica. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>: projectName : Spring Boot management: <span class="hljs-keyword"><span class="hljs-keyword">security</span></span>: enabled: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br>  Al√©m disso, o ambiente Spring Boot facilita muito a obten√ß√£o do resultado certo em casos gerais.  Ele transforma os argumentos -D em vari√°veis ‚Äã‚Äãde ambiente do processo e java dispon√≠veis como propriedades.  Ele ainda realiza sua normaliza√ß√£o, na qual a vari√°vel de ambiente $ CONFIGURATION_PROJECTNAME (PROJECT_NAME CONFIGURATION) ou o argumento -D no formato -Dconfiguration.projectName (configuration.project_name) s√£o disponibilizados usando a chave configuration.projectName (configuration.project_name) como antes. o token spring_profiles_active est√° dispon√≠vel. <br><br>  Os valores de configura√ß√£o s√£o cadeias e, se forem suficientes, podem se tornar ileg√≠veis ao tentar garantir que essas chaves n√£o se tornem cadeias m√°gicas no c√≥digo.  O Spring Boot apresenta o tipo de componente @ConfigurationProperties.  Ao anotar um POJO - Objeto Java Antigo Simples - usando @ConfigurationProperties e especificando um prefixo, o Spring tentar√° mapear todas as propriedades come√ßando com esse prefixo para as propriedades do POJO.  No exemplo abaixo, o valor para configuration.projectName ser√° mapeado para uma inst√¢ncia do POJO, na qual todo o c√≥digo poder√° injetar e desreferenciar para ler valores de seguran√ßa de tipo.  Como resultado, voc√™ ter√° apenas um mapeamento a partir da chave (String) em um √∫nico local (Exemplo 3.7). <br><br>  Exemplo 3.7  Resolu√ß√£o autom√°tica de propriedades em src / main / resources / application.yml <br>  inicializa√ß√£o do pacote; <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.ConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.EnableConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Component; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@EnableConfigurationProperties</span></span> <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class); } <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConfigurationProjectProperties cp)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"configurationProjectProperties.projectName = "</span></span> + cp.getProjectName()); } } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ConfigurationProperties</span></span>(<span class="hljs-string"><span class="hljs-string">"configuration"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigurationProjectProperties</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String projectName; (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> projectName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String projectName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.projectName = projectName; } }</code> </pre> <br>  (1) A anota√ß√£o @EnableConfigurationProperties diz ao Spring para mapear propriedades para POJOs anotados com @ConfigurationProperties. <br><br>  (2) A anota√ß√£o @ConfigurationProperties mostra ao Spring que este bean deve ser usado como raiz para todas as propriedades que come√ßam com a configura√ß√£o., Seguido por tokens que mapeiam as propriedades do objeto. <br><br>  (3) O campo projectName ter√° o valor atribu√≠do √† chave de propriedade configuration.projectName. <br><br>  O Spring Boot usa ativamente o mecanismo @ConfigurationProperties para fornecer aos usu√°rios a capacidade de substituir os componentes elementares do sistema.  Voc√™ pode observar que as chaves de propriedade permitem fazer altera√ß√µes, por exemplo, adicionando a depend√™ncia org.springframework.boot: spring-boot-starter-actuator a um aplicativo Web baseado no Spring Boot e, em seguida, visitando a p√°gina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">127.0.0.1</a> : 8080 / configprops. <br><br><blockquote>  Os pontos de extremidade do atuador ser√£o discutidos em mais detalhes no Cap√≠tulo 13. Eles est√£o bloqueados e requerem um nome de usu√°rio e senha padr√£o.  As medidas de seguran√ßa podem ser desativadas (mas apenas para examinar esses pontos), especificando management.security.enabled = false no arquivo application.properties (ou em application.yml). </blockquote><br>  Voc√™ obter√° uma lista de propriedades de configura√ß√£o suportadas com base nos tipos apresentados nos caminhos de classe em tempo de execu√ß√£o.  √Ä medida que o n√∫mero de tipos de inicializa√ß√£o Spring aumenta, propriedades adicionais ser√£o mostradas.  Esse terminal tamb√©m exibir√° propriedades exportadas pelos seus POJOs que possuem a anota√ß√£o @ConfigurationProperties. <br><br><h3>  Configura√ß√£o registrada centralizada usando o Spring Cloud Configuration Server </h3><br>  At√© agora, est√° tudo bem, mas as coisas precisam ser ainda mais bem-sucedidas.  Ainda n√£o respondemos perguntas sobre casos de uso comuns: <br><br><ul><li>  ap√≥s as altera√ß√µes feitas na configura√ß√£o do aplicativo, √© necess√°ria uma reinicializa√ß√£o; </li><li>  sem rastreabilidade: como determinar as altera√ß√µes colocadas em opera√ß√£o e, se necess√°rio, revert√™-las? </li><li>  a configura√ß√£o √© descentralizada;  n√£o est√° claro imediatamente onde as altera√ß√µes devem ser feitas para alterar um ou outro aspecto; </li><li>  nenhum suporte de instala√ß√£o para codifica√ß√£o e decodifica√ß√£o por motivos de seguran√ßa. </li></ul><br><h3>  Servidor de configura√ß√£o do Spring Cloud </h3><br>  O problema de centralizar a configura√ß√£o pode ser resolvido salvando a configura√ß√£o em um diret√≥rio e apontando todos os aplicativos para ele.  Voc√™ tamb√©m pode instalar o controle de vers√£o deste diret√≥rio usando o Git ou o Subversion.  Em seguida, o suporte necess√°rio para verifica√ß√£o e registro ser√° recebido.  Mas os dois √∫ltimos requisitos ainda n√£o ser√£o atendidos, portanto, √© necess√°rio algo mais sofisticado.  V√° para o servidor de configura√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spring Cloud</a> .  A plataforma Spring Cloud oferece um servidor de configura√ß√£o e um cliente para esse servidor. <br><br>  O servidor Spring Cloud Config √© uma API REST √† qual nossos clientes se conectam para recuperar sua configura√ß√£o.  O servidor tamb√©m gerencia o reposit√≥rio de configura√ß√£o de controle de vers√£o.  Ele √© um intermedi√°rio entre nossos clientes e o reposit√≥rio de configura√ß√£o e, portanto, est√° em uma posi√ß√£o favor√°vel para implementar ferramentas de seguran√ßa para conectar conex√µes de clientes ao servi√ßo e conex√µes do servi√ßo ao reposit√≥rio de configura√ß√£o com controle de vers√£o.  O cliente Spring Cloud Config fornece aos aplicativos clientes um novo escopo, atualiza√ß√£o, que permite configurar os componentes do Spring novamente sem precisar reiniciar o aplicativo. <br><br><blockquote>  Tecnologias como o servidor Spring Cloud Config desempenham um papel importante, mas exigem sobrecarga adicional.  Idealmente, essa responsabilidade deve ser transferida para a plataforma e automatizada.  Ao usar o Cloud Foundry, voc√™ pode encontrar o servi√ßo do Servidor de Configura√ß√£o no cat√°logo de servi√ßos, cujas a√ß√µes s√£o baseadas no uso do servidor Spring Cloud Config. </blockquote><br>  Considere um exemplo simples.  Primeiro, configure o servidor Spring Cloud Config.  Um desses servi√ßos pode ser acessado por v√°rios aplicativos Spring Boot ao mesmo tempo.  Voc√™ precisa faz√™-lo funcionar em algum lugar e de alguma forma.  Resta apenas notificar todos os nossos servi√ßos sobre onde encontrar o servi√ßo de configura√ß√£o.  Ele funciona como um tipo de intermedi√°rio para chaves de configura√ß√£o e valores que ele l√™ do armazenamento Git na rede ou no disco.  Adicione a sequ√™ncia org.springframework.cloud: spring-cloud-config-server ao assembly do seu aplicativo Spring Boot para entrar no servidor Spring Cloud Config (exemplo 3.8). <br><br>  Exemplo 3.8  Para incorporar um servidor de configura√ß√£o no assembly, use a anota√ß√£o @EnableConfigServer <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> demo; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.cloud.config.server.EnableConfigServer; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableConfigServer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  (1) O uso da anota√ß√£o @EnableConfigServer faz com que o servidor Spring Cloud Config seja instalado. <br><br>  O Exemplo 3.9 mostra a configura√ß√£o para o servi√ßo de configura√ß√£o. <br><br>  Exemplo 3.9  Configura√ß√£o do servidor src / main / resources / application.yml <br><br>  server.port = 8888 <br>  spring.cloud.config.server.git.uri = \ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/cloud-native-java/config-server-configuration-repository</a> (1) <br><br>  (1) Uma indica√ß√£o de um reposit√≥rio Git em funcionamento, de natureza local ou acess√≠vel pela rede (por exemplo, no GitHub (https://github.com/)) e usado pelo servidor Spring Cloud Config. <br><br>  Aqui, o servi√ßo de configura√ß√£o do Spring Cloud √© instru√≠do a procurar arquivos de configura√ß√£o para clientes individuais no reposit√≥rio Git no GitHub.  Apontamos para este reposit√≥rio, mas seria necess√°rio um link para qualquer URI do Git v√°lido.  Obviamente, ele nem precisa se inscrever no sistema Git, voc√™ pode usar o Subversion ou mesmo diret√≥rios n√£o gerenciados (embora seja altamente recomend√°vel n√£o fazer isso).  Nesse caso, o URI de armazenamento √© codificado permanentemente, mas n√£o h√° nada para impedi-lo de obter do argumento -D, do argumento ou de uma vari√°vel de ambiente. <br><br>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  20% de desconto no cupom para <b>Java</b> Fermenters - <b>Java</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425109/">https://habr.com/ru/post/pt425109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425099/index.html">O que eu entendi e que problemas encontrei ao criar um clone do Hacker News</a></li>
<li><a href="../pt425101/index.html">Docker + Laravel = ‚ù§</a></li>
<li><a href="../pt425103/index.html">Pare o Google Predators de perseguir seus filhos</a></li>
<li><a href="../pt425105/index.html">Modo de fabrica√ß√£o Intel ME - uma amea√ßa oculta ou o que est√° por tr√°s da vulnerabilidade CVE-2018-4251 no MacBook</a></li>
<li><a href="../pt425107/index.html">Fintech Digest: problemas de biometria no celular, leasing de telefones Samsung, valores mobili√°rios no blockchain</a></li>
<li><a href="../pt425111/index.html">Truques publicit√°rios que podem custar dinheiro e reputa√ß√£o</a></li>
<li><a href="../pt425113/index.html">"Tipografia digital" ou minha experi√™ncia em digitaliza√ß√£o m√≥vel de livros</a></li>
<li><a href="../pt425115/index.html">DevOps completo: trag√©dia grega em tr√™s atos</a></li>
<li><a href="../pt425117/index.html">Dois bits por transistor: ROM de alta densidade em um chip de ponto flutuante Intel 8087</a></li>
<li><a href="../pt425123/index.html">O cora√ß√£o misterioso da bateria eletr√¥nica Roland TR-808</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>