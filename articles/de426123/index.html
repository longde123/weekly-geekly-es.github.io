<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòä üì° üçù Lerne OpenGL. Lektion 6.1. PBR oder physikalisch korrektes Rendern. Theorie üëºüèΩ üë©üèø‚Äçü§ù‚Äçüë®üèº üç®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Physikalisch korrektes Rendern 


 PBR oder physikalisch basiertes Rendering ist eine Reihe von Visualisierungstechniken, die auf einer Theorie basier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lerne OpenGL. Lektion 6.1. PBR oder physikalisch korrektes Rendern. Theorie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426123/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br><h2>  Physikalisch korrektes Rendern </h2><br><p>  PBR oder physikalisch basiertes Rendering ist eine Reihe von Visualisierungstechniken, die auf einer Theorie basieren, die recht gut mit der realen Theorie der Lichtausbreitung √ºbereinstimmt.  Da der Zweck von PBR eine physikalisch zuverl√§ssige Lichtsimulation ist, sieht es im Vergleich zu den zuvor verwendeten Beleuchtungsmodellen Phong und Blinn-Fong viel realistischer aus.  Es sieht nicht nur besser aus, sondern bietet auch eine gute Ann√§herung an die reale Physik, die es uns (und insbesondere K√ºnstlern) erm√∂glicht, Materialien basierend auf den physikalischen Eigenschaften von Oberfl√§chen zu erstellen, ohne auf billige Tricks zur√ºckgreifen zu m√ºssen, um die Beleuchtung realistisch erscheinen zu lassen.  Der Hauptvorteil dieses Ansatzes besteht darin, dass die von uns erstellten Materialien unabh√§ngig von den Lichtverh√§ltnissen wie geplant aussehen, was nicht √ºber andere, nicht √ºber PBR-Ans√§tze gesagt werden kann. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Inhalt</b> <div class="spoiler_text"><p>  <strong>Teil 1. Erste Schritte</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fenstererstellung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hallo Fenster</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hallo Dreieck</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Texturen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Transformationen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Koordinatensysteme</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kamera</a> </li></ol><br><p>  <strong>Teil 2. Grundbeleuchtung</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Farben</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grundlagen der Beleuchtung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Material</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Texturkarten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lichtquellen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mehrere Lichtquellen</a> </li></ol><br><p>  <strong>Teil 3. Laden Sie 3D-Modelle herunter</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Assimp-Bibliothek</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mesh-Polygon-Klasse</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">3D-Modellklasse</a> </li></ol><br><p>  <strong>Teil 4. Erweiterte OpenGL-Funktionen</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tiefentest</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schablonentest</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Farbmischung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gesichter schneiden</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bildpuffer</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kubische Karten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erweiterte Datenverarbeitung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erweiterte GLSL</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Geometrischer Shader</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Instanz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gl√§tten</a> </li></ol><br><p>  <strong>Teil 5. Erweiterte Beleuchtung</strong> </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erweiterte Beleuchtung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Blinn-Fong-Modell.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gammakorrektur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schattenkarten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Omnidirektionale Schattenkarten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Normale Zuordnung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Parallaxenabbildung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bl√ºte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufgeschobenes Rendern</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SSAO</a> </li></ol><br><p>  <strong>Teil 6. Z√ºchterrechte</strong> </p><br><ol><li>  Theorie </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Analytische Lichtquellen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diffuse Bestrahlung.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spiegelbelichtung.</a> </li></ol><br></div></div><br><p>  PBR ist jedoch immer noch eine Ann√§herung an die Realit√§t (basierend auf den Gesetzen der Physik), weshalb es eher als physikalisch korrektes Rendering als als physikalisches Rendering bezeichnet wird.  Damit das Beleuchtungsmodell als physikalisch korrekt bezeichnet werden kann, muss es drei Bedingungen erf√ºllen (keine Sorge, wir werden sie bald erreichen): <br><br></p><ul><li>  Basierend auf einem Modell reflektierender Mikrofacetten </li><li>  Befolgen Sie das Gesetz der Energieerhaltung </li><li>  Verwenden Sie die Doppelstrahl-Reflexionsverteilungsfunktion (BRDF). </li></ul><br>  In dieser Tutorial-Reihe konzentrieren wir uns auf den PBR-Ansatz, der urspr√ºnglich bei Disney entwickelt und f√ºr die Echtzeitvisualisierung durch Epic Games angepasst wurde.  Ihr Ansatz, der auf einem <i>metalldielektrischen Arbeitsablauf</i> basiert (engl. Metallischer Arbeitsablauf, <i>konnte keine bessere √úbersetzung finden - ca. Hrsg.</i> ), <i>Ist</i> gut dokumentiert, in vielen g√§ngigen Motoren weit verbreitet und sieht erstaunlich aus.  Am Ende dieses Abschnitts erhalten wir etwas √Ñhnliches: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/0c/0c/dn0c0ctjrjf1o3uzwl7b0eyinwm.png"></div><br><p>  Beachten Sie, dass die Artikel in diesem Abschnitt ziemlich fortgeschritten sind. Es wird daher empfohlen, dass Sie sich mit OpenGL und Shader-Beleuchtung gut auskennen.  Hier sind einige der Kenntnisse, die Sie ben√∂tigen, um diesen Abschnitt zu studieren: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bildpuffer</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kubische Karten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gammakorrektur</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HDR</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">normale Karten</a> .  Wir werden auch etwas tiefer in die Mathematik gehen, aber ich verspreche, alles zu tun, um alles so klar wie m√∂glich zu erkl√§ren. </p><br><h3>  Modell reflektierender Mikrofacetten </h3><br><p>  Alle PBR-Techniken basieren auf der Theorie der Mikrogesichter.  Diese Theorie besagt, dass jede Oberfl√§che mit hoher Vergr√∂√üerung als ein Satz mikroskopischer Spiegel dargestellt werden kann, die als Mikrofl√§chen bezeichnet werden.  Aufgrund der Oberfl√§chenrauheit k√∂nnen diese Mikrospiegel in verschiedene Richtungen ausgerichtet werden: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/ph/jk/y4phjkuajlfpqqhljbnxy3em7ya.png"></div><br><p>  Je rauer die Oberfl√§che ist, desto zuf√§lliger sind die Mikrofl√§chen ausgerichtet.  Das Ergebnis dieser Anordnung dieser kleinen Spiegel ist (insbesondere bei Spiegelreflexionen und Reflexionen), dass die einfallenden Lichtstrahlen auf rauen Oberfl√§chen in verschiedene Richtungen gestreut werden, was zu einer breiteren Spiegelreflexion f√ºhrt.  Und umgekehrt: Auf glatten Oberfl√§chen werden die einfallenden Strahlen eher in eine Richtung reflektiert, was zu einer kleineren und sch√§rferen Blendung f√ºhrt: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ip/l3/bc/ipl3bc72ratqe4nh3sf_1nzogxq.png"></div><br><p>  Auf mikroskopischer Ebene gibt es keine absolut glatten Oberfl√§chen. Angesichts der Tatsache, dass die Mikrofl√§chen klein genug sind und wir sie innerhalb unseres Pixelraums nicht unterscheiden k√∂nnen, approximieren wir die Oberfl√§chenrauheit statistisch, indem wir einen <b>Rauheitskoeffizienten</b> einf√ºhren.  Mit diesem Koeffizienten k√∂nnen wir den Anteil der Mikrofl√§chen berechnen, die in Richtung eines bestimmten Vektors ausgerichtet sind <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-68" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> h </script>  .  Dieser Vektor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.339ex" height="2.057ex" viewBox="0 -780.1 576.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-68" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> h </script>  nichts weiter als ein Medianvektor, der in der Mitte zwischen der Richtung des einfallenden Lichts liegt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> l </script>  und Richtung des Beobachters <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-76" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> v </script>  .  Wir haben bereits in einer Lektion √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fortgeschrittene Beleuchtung dar√ºber gesprochen</a> , in der wir das Verh√§ltnis der Summe der Vektoren definiert haben <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> l </script>  und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-76" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> v </script>  auf die L√§nge des resultierenden Vektors: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;">f </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">c </font></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;">v </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">| </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-28"><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">| </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;">l </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;">v </font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">| </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-35"><span class="MJXp-mo" id="MJXp-Span-36" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;">|</font></span></span></span></font><span class="MJXp-mtext" id="MJXp-Span-16">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-25"><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-28"><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-35"><span class="MJXp-mo" id="MJXp-Span-36" style="margin-left: 0.167em; margin-right: 0.167em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.492ex" height="2.66ex" viewBox="0 -832 9253.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-3D" x="854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-66" x="2160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-72" x="2711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="3162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-63" x="3692" y="0"></use><g transform="translate(4125,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2B" x="520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-76" x="1521" y="0"></use></g><g transform="translate(6132,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-7C" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6C" x="557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2B" x="1077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-76" x="2078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-7C" x="2563" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-7C" x="2842" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> h = \ frac {l + v} {|| l + v ||} </script></p><br><p>  Je mehr Mikrofl√§chen in Richtung des Medianvektors ausgerichtet sind, desto sch√§rfer und heller wird das Glanzlicht.  Aufgrund des Rauheitskoeffizienten, der zwischen 0 und 1 liegt, k√∂nnen wir die Ausrichtung der Mikrofl√§chen statistisch approximieren: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  Wie Sie sehen k√∂nnen, ergibt ein h√∂herer Wert des Rauheitskoeffizienten einen gr√∂√üeren Spiegelfleckfleck als ein kleiner und scharfer Fleck auf glatten Oberfl√§chen. </p><br><h3>  Energieeinsparung. </h3><br><p>  Die Verwendung der N√§herung unter Ber√ºcksichtigung von Mikrofl√§chen bringt bereits eine bestimmte Form der Energieeinsparung mit sich: Die Energie des reflektierten Lichts wird niemals die Energie des einfallenden Lichts √ºberschreiten (wenn die Oberfl√§che nicht von selbst leuchtet).  Wenn wir das obige Bild betrachten, sehen wir, dass mit zunehmender Oberfl√§chenrauheit der Punkt des reflektierten Lichts zunimmt, gleichzeitig aber seine Helligkeit abnimmt.  Wenn die Intensit√§t des reflektierten Lichts unabh√§ngig von der Gr√∂√üe des Spots f√ºr alle Pixel gleich w√§re, w√ºrden rauere Oberfl√§chen viel mehr Energie emittieren, was gegen das Gesetz der Energieerhaltung versto√üen w√ºrde.  Daher sind Spiegelreflexionen auf glatten Oberfl√§chen heller und auf rauen Oberfl√§chen dunkler. </p><br><p>  Um Energie zu sparen, m√ºssen wir eine klare Trennung zwischen der diffusen und der Spiegelkomponente vornehmen.  In diesem Moment, wenn ein Lichtstrahl die Oberfl√§che erreicht, wird er in <i>reflektierte</i> und <i>gebrochene</i> Komponenten unterteilt.  Die reflektierte Komponente ist direkt reflektiertes Licht und dringt nicht in die Oberfl√§che ein. Wir kennen sie als Spiegelkomponente des Lichts.  Die gebrochene Komponente ist Licht, das die Oberfl√§che durchdringt und von dieser absorbiert wird - es ist uns als diffuse Komponente des Lichts bekannt. </p><br><p>  Mit der Absorption von Licht sind jedoch einige Nuancen verbunden - dies geschieht nicht sofort, sobald das Licht die Oberfl√§che ber√ºhrt.  Aus der Physik wissen wir, dass Licht als ein Photonenstrahl mit Energie beschrieben werden kann, der sich in einer geraden Linie bewegt, bis er infolge einer Kollision mit Hindernissen die gesamte Energie verliert.  Jedes Material besteht aus Mikropartikeln, die mit einem Lichtstrahl interagieren k√∂nnen, wie in der folgenden Abbildung gezeigt.  Diese Partikel absorbieren bei jeder Kollision einen Teil oder die gesamte Energie des Lichts und wandeln es in W√§rme um. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_z/xx/px/_zxxpxhlbmarr70ym_wdp_ndrio.png"></div><br><p>  Im allgemeinen Fall wird nicht die gesamte Energie absorbiert, und das Licht streut weiterhin in (√ºberwiegend) zuf√§lligen Richtungen, wo es erneut mit anderen Partikeln kollidiert, bis ihm die Energie ausgeht oder die Oberfl√§che wieder verl√§sst.  Somit beginnt die Oberfl√§che, Lichtstrahlen wieder zu emittieren, was einen Beitrag in Form der beobachteten (diffusen) Farbe der Oberfl√§che leistet.  Mit PBR gehen wir vereinfacht davon aus, dass das gesamte gebrochene Licht √ºber einen kleinen Einflussbereich absorbiert und gestreut wird, wobei der Effekt des gestreuten Lichts, das die Oberfl√§che in einem Abstand von diesem Bereich verl√§sst, ignoriert wird.  Spezielle Shadertechniken, die dies ber√ºcksichtigen, sogenannte <i>Streutechniken unter der Oberfl√§che</i> , verbessern die visuelle Qualit√§t von Materialien wie Leder, Marmor, Wachs erheblich, sind jedoch hinsichtlich der Leistung teuer. </p><br><p>  Zus√§tzliche Feinheiten treten auf, wenn Licht auf <i>Metalloberfl√§chen</i> gebrochen und reflektiert wird.  Metalloberfl√§chen interagieren anders mit Licht als <i>nichtmetallische</i> (d. H. Dielektrika).  Sie gehorchen denselben Gesetzen der Brechung und Reflexion, mit einer Ausnahme: Alles gebrochene Licht wird von der Oberfl√§che absorbiert, ohne zu streuen, nur spiegelreflektiertes Licht bleibt √ºbrig;  Mit anderen Worten, Metalloberfl√§chen haben keine diffuse Farbe.  Aufgrund dieses offensichtlichen Unterschieds zwischen Metallen und Dielektrika werden sie im PBR-F√∂rderer, in den wir im Verlauf dieses Artikels weiter gehen, unterschiedlich verarbeitet. </p><br><p>  Dieser Unterschied zwischen reflektiertem und gebrochenem Licht f√ºhrt uns zu einer weiteren Beobachtung hinsichtlich der Energieeinsparung: Ihre Werte schlie√üen sich gegenseitig aus.  Die Energie des reflektierten Lichts kann vom Material nicht absorbiert werden.  Daher ist die von der Oberfl√§che in Form von gebrochenem Licht absorbierte Energie die verbleibende Energie nach Ber√ºcksichtigung des reflektierten Lichts. <br>  Wir verwenden dieses Verh√§ltnis, indem wir zuerst den reflektierten Teil als Prozentsatz der Energie der einfallenden Strahlen berechnen, die von der Oberfl√§che reflektiert werden, und dann den Anteil des gebrochenen Lichts direkt von der reflektierten, als: </p><br><pre><code class="plaintext hljs">float kS = calculateSpecularComponent(...); // /  float kD = 1.0 - kS; // / </code> </pre> <br><p>  Auf diese Weise lernen wir dank des Gesetzes der Energieerhaltung die Bedeutung sowohl der reflektierten als auch der gebrochenen Teile.  Bei diesem Ansatz wird weder der gebrochene (diffuse) noch der reflektierte Teil 1,0 √ºberschreiten, wodurch sichergestellt wird, dass ihre Gesamtenergie den Wert der einfallenden Lichtenergie nicht √ºberschreitet, den wir in fr√ºheren Lektionen nicht ber√ºcksichtigen konnten. </p><br><h3>  Reflexionsgleichung </h3><br><p>  Das Obige f√ºhrt uns zu der sogenannten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rendering-Gleichung</a> : Eine komplexe Gleichung, die von sehr klugen Leuten erfunden wurde und heute das beste Modell f√ºr die Simulation von Beleuchtung ist.  PBR folgt streng einer spezifischeren Version dieser Gleichung, die als <b>Reflexionsgleichung bekannt ist</b> .  Um PBR gut zu verstehen, ist es wichtig, zun√§chst die Reflexionsgleichung vollst√§ndig zu verstehen: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-37"><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">p</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">g</span><span class="MJXp-msubsup" id="MJXp-Span-49"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-51" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-54">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">t</span><span class="MJXp-mtext" id="MJXp-Span-58">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">i</span><span class="MJXp-msubsup" id="MJXp-Span-63"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64" style="margin-right: 0.05em;">t</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-65" style="vertical-align: -0.4em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">a</span><span class="MJXp-msubsup" id="MJXp-Span-71"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-73" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">p</span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-77">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">g</span><span class="MJXp-msubsup" id="MJXp-Span-82"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-84" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-86">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">g</span><span class="MJXp-msubsup" id="MJXp-Span-91"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-93" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-94" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-95"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-97" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">p</span><span class="MJXp-mo" id="MJXp-Span-100" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-101">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">g</span><span class="MJXp-msubsup" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-108" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">n</span><span class="MJXp-mtext" id="MJXp-Span-111">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">t</span><span class="MJXp-mtext" id="MJXp-Span-116">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">g</span><span class="MJXp-msubsup" id="MJXp-Span-121"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-123" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">d</span><span class="MJXp-mtext" id="MJXp-Span-125">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">g</span><span class="MJXp-msubsup" id="MJXp-Span-130"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-132" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="96.417ex" height="2.66ex" viewBox="0 -832 41512.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="11050" y="0"></use><g transform="translate(11395,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-74" x="0" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-4F" x="12107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="12870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="13749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="14215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="14696" y="0"></use><g transform="translate(15225,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-28" x="16135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-70" x="16525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2C" x="17028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="17723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="18209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="19087" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="19554" y="0"></use><g transform="translate(20034,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2C" x="20908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="21603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="22089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="22967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="23434" y="0"></use><g transform="translate(23914,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-29" x="24887" y="0"></use><g transform="translate(25277,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-28" x="26302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-70" x="26692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-2C" x="27195" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="27890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="28376" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="29254" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="29721" y="0"></use><g transform="translate(30201,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-29" x="31075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6E" x="31465" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-63" x="32315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-64" x="32749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="33272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-74" x="33758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="34369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="34855" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="35733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="36200" y="0"></use><g transform="translate(36680,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-64" x="37554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="38328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="38813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="39692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="40158" y="0"></use><g transform="translate(40639,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> L_o (p, \ omega_o) = \ int \ limit_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  Zuerst sieht es be√§ngstigend aus, aber wir werden es nach und nach teilweise auseinander nehmen, und Sie werden sehen, wie langsam es Sinn macht.  Um diese Gleichung zu verstehen, m√ºssen wir etwas tiefer in die Radiometrie gehen.  <b>Radiometrie</b> ist die Wissenschaft der Messung elektromagnetischer Strahlung (einschlie√ülich sichtbarem Licht).  Es gibt mehrere radiometrische Gr√∂√üen, mit denen wir die Beleuchtung messen k√∂nnen, aber wir werden nur eine verwenden, die sich auf die Reflexionsgleichung bezieht, die als Energieluminanz (englische Strahlung) bekannt ist und hier mit dem Buchstaben L bezeichnet wird. EI wird verwendet, um die Gr√∂√üe oder Intensit√§t des Lichts zu quantifizieren. aus einer bestimmten Richtung kommen.  EJ wiederum ist eine Kombination mehrerer physikalischer Gr√∂√üen, und damit wir uns das leichter vorstellen k√∂nnen, werden wir uns auf jede einzelne konzentrieren. </p><br><h4>  Strahlungsfluss </h4><br><p>  Strahlungsfluss ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-133"><span class="MJXp-mtext" id="MJXp-Span-134">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.468ex" height="2.057ex" viewBox="0 -780.1 1923.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-50" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-68" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="1578" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ Phi </script>  ) ist die Leistung der durch Licht √ºbertragenen Energie, gemessen in Watt.  Die Gesamtenergie des Lichts besteht aus vielen Begriffen f√ºr verschiedene Wellenl√§ngen, von denen jeder seiner eigenen Farbe des Spektrums entspricht.  Die von der Lichtquelle emittierte Energie kann in diesem Fall als Funktion aller dieser Wellenl√§ngen dargestellt werden.  Wellenl√§ngen von 390 nm bis 700 nm bilden den sichtbaren Teil des Spektrums, dh Strahlung in diesem Bereich kann vom menschlichen Auge wahrgenommen werden.  Im Bild unten sehen Sie die Werte der Energien f√ºr verschiedene Wellenl√§ngen, aus denen das Tageslicht besteht: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j2/zh/ua/j2zhuav_87v_hkjgtnrfdx6zfku.png"></div><br><p>  Der Strahlungsfluss entspricht f√ºr alle Wellenl√§ngen der Fl√§che unter dem Diagramm dieser Funktion.  Die direkte Verwendung von Lichtwellenl√§ngen als Eingabe in Computergrafiken ist unpraktisch, daher greifen wir auf eine vereinfachte Darstellung des Strahlungsflusses zur√ºck, anstatt eine Funktion aller Wellenl√§ngen, ein Triplett von Farben, bekannt als RGB (oder, wie wir es normalerweise nennen, die Farbe der Beleuchtung) zu verwenden.  Eine solche Ansicht f√ºhrt zu einem gewissen Informationsverlust, wirkt sich jedoch insgesamt geringf√ºgig auf das endg√ºltige Bild aus. </p><br><h4>  Raumwinkel </h4><br><p>  <b>Raumwinkel</b> bezeichnet mit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-138"><span class="MJXp-mtext" id="MJXp-Span-139">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="2561" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ omega </script>  gibt uns die Gr√∂√üe oder Fl√§che der Figur, die auf die Einheitskugel projiziert wird.  Sie k√∂nnen es sich als eine Richtung vorstellen, die ein Volumen von: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/ny/ye/wenyyer9rdwbemjnf2tphc1w834.png"></div><br><p>  Stellen Sie sich vor, Sie befinden sich in der Mitte einer Kugel und schauen in Richtung der Figur.  Die Gr√∂√üe der resultierenden Silhouette ist ein Raumwinkel. </p><br><h4>  Strahlungsintensit√§t </h4><br><p>  Die Strahlungsst√§rke misst die Menge des Strahlungsflusses pro Raumwinkel oder die St√§rke einer Lichtquelle pro Fl√§cheneinheit, die durch den Raumwinkel definiert wird.  Beispielsweise bedeutet f√ºr eine omnidirektionale Lichtquelle, die gleichm√§√üig in alle Richtungen emittiert, die Strahlungskraft die Energie des Lichts pro bestimmten Bereich (Raumwinkel): </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/su/lr/ehsulrpsqjeqji2j0cypfxonzxa.png"></div><br><p>  Die Gleichung, die die St√§rke der Strahlung beschreibt, sieht folgenderma√üen aus: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-145"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">I</span><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-148">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">c</span><span class="MJXp-mrow" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">d</span><span class="MJXp-mtext" id="MJXp-Span-155">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">i</span></span><span class="MJXp-mrow" id="MJXp-Span-159"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">d</span><span class="MJXp-mtext" id="MJXp-Span-161">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">a</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.492ex" height="2.419ex" viewBox="0 -780.1 10114.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-66" x="2088" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-72" x="2639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-63" x="3620" y="0"></use><g transform="translate(4053,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-50" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-68" x="1525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-69" x="2101" y="0"></use></g><g transform="translate(6500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6F" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-6D" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-65" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-67" x="2604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/426123/&amp;usg=ALkJrhg24BJYEpOvZsIspmf5gKuAouzFjQ#MJMATHI-61" x="3084" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> I = \ frac {d \ Phi} {d \ omega} </script></p><br><p>  , wobei I der Strahlungsfluss f pro Raumwinkel ist <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-167"><span class="MJXp-mrow" id="MJXp-Span-168"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">d</span><span class="MJXp-mtext" id="MJXp-Span-170">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">a</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> {d \ omega} </script></p><br><p>  Wenn wir den Strahlungsfluss, die Kraft und den Raumwinkel kennen, k√∂nnen wir die Energiehelligkeitsgleichung beschreiben, die die gesamte beobachtete Energie im Bereich A beschreibt, begrenzt durch den Raumwinkel O f√ºr Licht durch Kraft <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-176"><span class="MJXp-mtext" id="MJXp-Span-177">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> \ Phi </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-181"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">L</span><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-184">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">c</span><span class="MJXp-mrow" id="MJXp-Span-189"><span class="MJXp-msubsup" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191" style="margin-right: 0.05em;">d</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-192" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-193">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">i</span></span><span class="MJXp-mrow" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">d</span><span class="MJXp-mtext" id="MJXp-Span-201">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">a</span><span class="MJXp-mtext" id="MJXp-Span-207">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">s</span><span class="MJXp-mtext" id="MJXp-Span-211">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">a</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> L = \ frac {d ^ 2 \ Phi} {dA d \ omega \ cos \ theta} </script></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/lk/lf/svlklfokpxawonv99tzx8a2fg-a.png"></div><br><p>  Die Energiehelligkeit ist die radiometrische Lichtmenge in einem Bereich, die vom Einfallswinkel abh√§ngt. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-217"><span class="MJXp-mtext" id="MJXp-Span-218">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> \ theta </script>  (Winkel zwischen der Lichtrichtung und der Normalen zur Oberfl√§che) durch <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-224"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">s</span><span class="MJXp-mtext" id="MJXp-Span-228">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> cos \ theta </script>  : Licht ist schw√§cher, wenn es entlang der Oberfl√§che emittiert wird, und st√§rker, wenn es senkrecht dazu steht.  Dies √§hnelt unseren Berechnungen f√ºr diffuses Licht im Tutorial zu den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grundlagen der Beleuchtung</a> seitdem <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-234"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">s</span><span class="MJXp-mtext" id="MJXp-Span-238">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> cos \ theta </script>  nichts weiter als ein Skalarprodukt zwischen der Lichtrichtung und dem Normalenvektor zur Oberfl√§che: <br></p><pre> <code class="plaintext hljs">float cosTheta = dot(lightDir, N);</code> </pre> <br><p>  Die Energiehelligkeitsgleichung ist f√ºr uns sehr n√ºtzlich, da sie die meisten physikalischen Gr√∂√üen enth√§lt, die uns interessieren.  Wenn wir annehmen, dass der Raumwinkel œâ und die Fl√§che A infinitesimal sind, k√∂nnen wir mit dem EE den Fluss eines Lichtstrahls pro Punkt im Raum messen.  Auf diese Weise k√∂nnen wir den EI eines einzelnen Lichtstrahls berechnen, der auf einen einzelnen Punkt (Fragment) wirkt.  Wir √ºbersetzen tats√§chlich den Raumwinkel <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-244"><span class="MJXp-mtext" id="MJXp-Span-245">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> \ omega </script>  in Richtungsvektor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-251"><span class="MJXp-mtext" id="MJXp-Span-252">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> \ omega </script>  und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-258"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">A</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> A </script>  auf den Punkt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-260"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> p </script>  .  Somit k√∂nnen wir den EI in unseren Shadern direkt verwenden, um den Beitrag eines einzelnen Lichtstrahls f√ºr jedes Fragment zu berechnen. </p><br><p>  Wenn es um EE geht, interessieren wir uns normalerweise f√ºr das gesamte einfallende Licht, das auf den Punkt p f√§llt, der die Summe des gesamten EE darstellt und als Bestrahlungsst√§rke bezeichnet wird.  Wenn wir den EI und die Bestrahlung kennen, k√∂nnen wir zur Reflexionsgleichung zur√ºckkehren: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-262"><span class="MJXp-msubsup" id="MJXp-Span-263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-265" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-266" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">p</span><span class="MJXp-mo" id="MJXp-Span-268" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-269">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">g</span><span class="MJXp-msubsup" id="MJXp-Span-274"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-276" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-277" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-278" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-279">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">t</span><span class="MJXp-mtext" id="MJXp-Span-283">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">i</span><span class="MJXp-msubsup" id="MJXp-Span-288"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289" style="margin-right: 0.05em;">t</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-290" style="vertical-align: -0.4em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">a</span><span class="MJXp-msubsup" id="MJXp-Span-296"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-298" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-299" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">p</span><span class="MJXp-mo" id="MJXp-Span-301" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-302">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">g</span><span class="MJXp-msubsup" id="MJXp-Span-307"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-309" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-310" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-311">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">g</span><span class="MJXp-msubsup" id="MJXp-Span-316"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-318" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-319" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-320"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-322" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-323" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">p</span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-326">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">g</span><span class="MJXp-msubsup" id="MJXp-Span-331"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-333" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-334" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">n</span><span class="MJXp-mtext" id="MJXp-Span-336">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">t</span><span class="MJXp-mtext" id="MJXp-Span-341">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">g</span><span class="MJXp-msubsup" id="MJXp-Span-346"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-348" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">d</span><span class="MJXp-mtext" id="MJXp-Span-350">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">g</span><span class="MJXp-msubsup" id="MJXp-Span-355"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-357" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> L_o (p, \ omega_o) = \ int \ limit_ \ Omega f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_id \ omega_i </script></p><br><p>  Jetzt wissen wir das <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-358"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> L </script>  in der Rendering-Gleichung ist der EI f√ºr einen Punkt auf der Oberfl√§che p und einen unendlich kleinen Raumwinkel des einfallenden Lichts <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-360"><span class="MJXp-mtext" id="MJXp-Span-361">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">g</span><span class="MJXp-msubsup" id="MJXp-Span-366"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-368" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ omega_i </script>  , die als Eingangsrichtungsvektor betrachtet werden kann <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-369"><span class="MJXp-mtext" id="MJXp-Span-370">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">g</span><span class="MJXp-msubsup" id="MJXp-Span-375"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-377" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> \ omega_i </script>  .  Denken Sie daran, dass Energie mit multipliziert wird <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">s</span><span class="MJXp-mtext" id="MJXp-Span-382">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> cos \ theta </script>  - der Winkel zwischen der Einfallsrichtung des Lichts und der Normalen zur Oberfl√§che, der in der Reflexionsgleichung des Produkts ausgedr√ºckt wird <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">n</span><span class="MJXp-mtext" id="MJXp-Span-390">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">t</span><span class="MJXp-mtext" id="MJXp-Span-395">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">g</span><span class="MJXp-msubsup" id="MJXp-Span-400"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-402" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> n \ cdot \ omega_i </script>  .  Die Reflexionsgleichung berechnet die Summe der reflektierten EI <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-403"><span class="MJXp-msubsup" id="MJXp-Span-404"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-406" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-407" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">p</span><span class="MJXp-mo" id="MJXp-Span-409" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-410">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">g</span><span class="MJXp-msubsup" id="MJXp-Span-415"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-417" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-418" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> L_o (p, \ omega_o) </script>  Punkte <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-419"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> p </script>  in Richtung <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-421"><span class="MJXp-msubsup" id="MJXp-Span-422"><span class="MJXp-mrow" id="MJXp-Span-423" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-424" style="margin-left: 0em; margin-right: 0em;">œâ</span></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-425" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> œâ_o </script>  Dies ist die ausgehende Richtung zum Beobachter.  Oder sonst: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-426"><span class="MJXp-msubsup" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-429" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> L_o </script>  misst die reflektierte Bestrahlungsst√§rke eines Punktes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> p </script>  wenn von <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mtext" id="MJXp-Span-433">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">g</span><span class="MJXp-msubsup" id="MJXp-Span-438"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-440" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ omega_o </script>  . </p><br><p>  Da die Reflexionsgleichung auf der Bestrahlung basiert, die die Summe aller einfallenden Strahlung ist, messen wir das Licht nicht nur aus einer einfallenden Lichtrichtung, sondern aus allen einfallenden Lichtrichtungen innerhalb der Hemisph√§re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-441"><span class="MJXp-mtext" id="MJXp-Span-442">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ Omega </script>  zentriert bei <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-448"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> p </script>  .  Es kann als eine halbe Kugel beschrieben werden, die entlang der Oberfl√§chennormalen ausgerichtet ist <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-450"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> n </script>  :: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/nq/lo/gtnqlobxm8_ovo8fu5p2xtrls1i.png"></div><br><p>  Um die Summe aller Werte innerhalb der Region oder im Fall einer Halbkugel das Volumen zu berechnen, integrieren wir die Gleichung in alle eingehenden Richtungen <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-452"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">d</span><span class="MJXp-mtext" id="MJXp-Span-454">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">g</span><span class="MJXp-msubsup" id="MJXp-Span-459"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-461" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> d \ omega_i </script>  innerhalb der Hemisph√§re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-462"><span class="MJXp-mtext" id="MJXp-Span-463">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> \ Omega </script>  .  Da es sowohl f√ºr die Rendergleichung als auch f√ºr die Reflexionsgleichung keine analytische L√∂sung gibt, werden wir das Integral numerisch l√∂sen.  Dies bedeutet, dass wir Ergebnisse f√ºr kleine diskrete Schritte der Halbkugelreflexionsgleichung erhalten <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-469"><span class="MJXp-mtext" id="MJXp-Span-470">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> \ Omega </script>  und mittle sie √ºber die Gr√∂√üe der Stufe.  Dies nennt man die <b>Riemannsche Summe</b> , die wir grob mit folgendem Code darstellen k√∂nnen: </p><br><pre> <code class="plaintext hljs">int steps = 100; float sum = 0.0f; vec3 P = ...; vec3 Wo = ...; vec3 N = ...; float dW = 1.0f / steps; for(int i = 0; i &lt; steps; ++i) { vec3 Wi = getNextIncomingLightDir(i); sum += Fr(P, Wi, Wo) * L(P, Wi) * dot(N, Wi) * dW; }</code> </pre><br><p>  dW f√ºr jeden einzelnen Schritt kann als betrachtet werden <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-476"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">d</span><span class="MJXp-mtext" id="MJXp-Span-478">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">g</span><span class="MJXp-msubsup" id="MJXp-Span-483"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-485" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> d \ omega_i </script>  in der Reflexionsgleichung.  Mathematisch <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-486"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">d</span><span class="MJXp-mtext" id="MJXp-Span-488">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">g</span><span class="MJXp-msubsup" id="MJXp-Span-493"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-495" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> d \ omega_i </script>  ist das Differential, mit dem wir das Integral berechnen, und obwohl es nicht dasselbe wie dW im Code ist (da dies ein diskreter Schritt der Riemann-Summe ist), k√∂nnen wir es zur Vereinfachung der Berechnung als solches betrachten.  Denken Sie daran, dass die Verwendung diskreter Schritte immer einen ungef√§hren Betrag ergibt, nicht den genauen Wert des Integrals.  Ein aufmerksamer Leser wird feststellen, dass wir die Genauigkeit der Riemannschen Summe erh√∂hen k√∂nnen, indem wir die Anzahl der Schritte erh√∂hen. </p><br><p>  Die Reflexionsgleichung summiert die Strahlung aller einfallenden Lichtrichtungen <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-496"><span class="MJXp-mtext" id="MJXp-Span-497">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">g</span><span class="MJXp-msubsup" id="MJXp-Span-502"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-504" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> \ omega_i </script>  Hemisph√§re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-505"><span class="MJXp-mtext" id="MJXp-Span-506">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> \ Omega </script>  das erreicht den Punkt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-512"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> p </script>  und gibt die Menge des reflektierten Lichts zur√ºck <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-514"><span class="MJXp-msubsup" id="MJXp-Span-515"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-517" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> L_o </script>  in Richtung des Betrachters.  Die einfallende Strahlung kann von Lichtquellen stammen, mit denen wir bereits vertraut sind, oder von Umgebungskarten, die den EI jeder einfallenden Richtung bestimmen, √ºber die wir im IBL-Tutorial sprechen werden. </p><br><p>  Jetzt ist das einzige Unbekannte auf der linken Seite das Symbol <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-518"><span class="MJXp-msubsup" id="MJXp-Span-519"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-521" style="vertical-align: -0.4em;">r</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46"> f_r </script>  , bekannt als <b>BRDF-</b> Funktion oder <b>Zweistrahl</b> <b>-Reflexionsfunktion</b> , die den Wert der einfallenden Strahlung basierend auf den Eigenschaften des Oberfl√§chenmaterials skaliert (oder wiegt). </p><br><h3>  BRDF </h3><br><p>  BRDF ist eine Funktion, die die Richtung des einfallenden Lichts akzeptiert. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-522"><span class="MJXp-mtext" id="MJXp-Span-523">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">g</span><span class="MJXp-msubsup" id="MJXp-Span-528"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-530" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> \ omega_i </script>  Richtung zum Betrachter <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-531"><span class="MJXp-mtext" id="MJXp-Span-532">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">g</span><span class="MJXp-msubsup" id="MJXp-Span-537"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-539" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> \ omega_o </script>  normal zur Oberfl√§che <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-540"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> n </script>  und Parameter <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-542"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> a </script>  , das ist die Oberfl√§chenrauheit.  BRDF approximiert ungef√§hr, wie viel jeder einzelne Lichtstrahl ist <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-544"><span class="MJXp-mtext" id="MJXp-Span-545">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">g</span><span class="MJXp-msubsup" id="MJXp-Span-550"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-552" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> \ omega_i </script>  tr√§gt unter Ber√ºcksichtigung der Materialeigenschaften zum endg√ºltigen reflektierten Licht einer opaken Oberfl√§che bei.  Wenn die Oberfl√§che beispielsweise vollst√§ndig glatt ist (fast wie ein Spiegel), gibt die BRDF-Funktion f√ºr alle einfallenden Lichtstrahlen 0,0 zur√ºck <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-553"><span class="MJXp-mtext" id="MJXp-Span-554">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">g</span><span class="MJXp-msubsup" id="MJXp-Span-559"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-561" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> \ omega_i </script>  mit Ausnahme eines mit dem gleichen Winkel (nach Reflexion) wie der Strahl <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-562"><span class="MJXp-mtext" id="MJXp-Span-563">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">g</span><span class="MJXp-msubsup" id="MJXp-Span-568"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-570" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> \ omega_o </script>  f√ºr die die Funktion 1.0 zur√ºckgibt. </p><br><p>  BRDF approximiert die Reflexions- und Brechungseigenschaften eines Materials basierend auf der zuvor erw√§hnten Theorie der Mikrofl√§chen.  Damit das BRDF physikalisch plausibel ist, muss es dem Gesetz der Energieerhaltung entsprechen, dh die Gesamtenergie des reflektierten Lichts sollte niemals die Energie des einfallenden Lichts √ºberschreiten.  Technisch gesehen wird das Blinn-Fong-Modell als BRDF angesehen, das dasselbe akzeptiert <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-571"><span class="MJXp-mtext" id="MJXp-Span-572">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">g</span><span class="MJXp-msubsup" id="MJXp-Span-577"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-579" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> \ omega_i </script>  und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-580"><span class="MJXp-mtext" id="MJXp-Span-581">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">g</span><span class="MJXp-msubsup" id="MJXp-Span-586"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-588" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> \ omega_o </script>  am Eingang.  Das Blinn-Fong-Modell wird jedoch nicht als physikalisch korrekt angesehen, da es nicht die Einhaltung des Energieerhaltungsgesetzes garantiert.  Es gibt mehrere physikalisch korrekte BRDFs, um die Oberfl√§chenreaktion auf Beleuchtung zu approximieren.  Fast alle Echtzeit-Grafik-Pipelines verwenden jedoch das BRDF, das als <b>Cook-Torrance BRDF bekannt ist</b> . </p><br><p>  Cook-Torrens BRDF enth√§lt sowohl einen diffusen als auch einen Spiegelteil: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-589"><span class="MJXp-msubsup" id="MJXp-Span-590"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-592" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-593" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-594"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-596" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-msubsup" id="MJXp-Span-597"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-599" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-607" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-608"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-610" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-msubsup" id="MJXp-Span-611"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-613" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">k</span><span class="MJXp-mo" id="MJXp-Span-618">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-622">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">e</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-56"> f_r = k_df_ {lambert} + k_sf_ {cook - torrance} </script></p><br><p>  hier <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-627"><span class="MJXp-msubsup" id="MJXp-Span-628"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-630" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> k_d </script>  - gebrochener Anteil der einfallenden Lichtenergie, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-631"><span class="MJXp-msubsup" id="MJXp-Span-632"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-634" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> k_s </script>  - reflektiert.  Die linke Seite des BRDF enth√§lt den diffusen Teil der Gleichung, der hier als bezeichnet wird <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-635"><span class="MJXp-msubsup" id="MJXp-Span-636"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-638" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">t</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> f_ {lambert} </script>  .  Dies ist die sogenannte Lambert-Streuung.  Es √§hnelt dem, was wir f√ºr diffuses Licht verwendet haben, und ist konstant: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-646"><span class="MJXp-msubsup" id="MJXp-Span-647"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-649" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-657" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-658">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-660">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-661">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">c</span><span class="MJXp-mrow" id="MJXp-Span-663"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">c</span></span><span class="MJXp-mrow" id="MJXp-Span-665"><span class="MJXp-mtext" id="MJXp-Span-666">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-60"> f_ {lambert} = \ frac {c} {\ pi} </script></p><br><p>  wo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-669"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> c </script>  - Albedo oder Oberfl√§chenfarbe (diffuse Oberfl√§chentextur).  Division durch <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-671"><span class="MJXp-mtext" id="MJXp-Span-672">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> \ pi </script>  ben√∂tigt, um das gestreute Licht zu normalisieren, da das zuvor angegebene Integral, das BRDF enth√§lt, mit multipliziert wird <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-675"><span class="MJXp-mtext" id="MJXp-Span-676">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-678">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> \ pi </script>  (Wir werden dies im IBL-Tutorial erfahren). </p><br><blockquote>  Sie werden √ºberrascht sein, wie diese Lambertsche Streuung wie der Ausdruck f√ºr diffuses Licht aussieht, den wir zuvor verwendet haben: Die Oberfl√§chenfarbe multipliziert mit dem Skalarprodukt zwischen der Oberfl√§chennormalen und der Richtung des Lichts.  Das Skalarprodukt ist noch vorhanden, wird aber aus BRDF abgeleitet, da wir es haben <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-679"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">n</span><span class="MJXp-mtext" id="MJXp-Span-681">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">t</span><span class="MJXp-mtext" id="MJXp-Span-686">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-689">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">g</span><span class="MJXp-msubsup" id="MJXp-Span-691"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-693" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> n \ cdot \ omega_i </script>  im Integral <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-694"><span class="MJXp-msubsup" id="MJXp-Span-695"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-697" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65"> L_o </script>  . </blockquote><br><p>  Es gibt verschiedene Gleichungen f√ºr den diffusen Teil von BRDF, die realistischer aussehen, aber in Bezug auf die Leistung teurer sind.  Dar√ºber hinaus, wie die Epic Games feststellten: Lambertsche Streuung ist f√ºr die meisten Echtzeit-Rendering-Zwecke ausreichend. </p><br><p>  Der Spiegelanteil des Cook-Torrens BRDF ist leicht verbessert und wird beschrieben als: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-698"><span class="MJXp-msubsup" id="MJXp-Span-699"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-701" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-704">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705">k</span><span class="MJXp-mo" id="MJXp-Span-706">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-713">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-715" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-716">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">c</span><span class="MJXp-mrow" id="MJXp-Span-721"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">G</span></span><span class="MJXp-mrow" id="MJXp-Span-725"><span class="MJXp-mn" id="MJXp-Span-726">4</span><span class="MJXp-mo" id="MJXp-Span-727" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-728">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732">g</span><span class="MJXp-msubsup" id="MJXp-Span-733"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-735" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-736">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-739">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-741">n</span><span class="MJXp-mo" id="MJXp-Span-742" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-743" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-744">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">g</span><span class="MJXp-msubsup" id="MJXp-Span-749"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-751" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-752">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">n</span><span class="MJXp-mo" id="MJXp-Span-758" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-66"> f_ {cook - torrance} = \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br><p>  Es besteht aus drei Funktionen und einem Standardisierungskoeffizienten im Nenner.  Jeder der Buchstaben D, F und G repr√§sentiert eine bestimmte Art von Funktion, die sich einem bestimmten Teil der Reflexionseigenschaften der Oberfl√§che ann√§hert.  Sie sind als Normalverteilungsfunktion (NDF), Fresnel-Gleichung und Geometriefunktion bekannt: <br></p><ul><li>  Normalverteilungsfunktion: Ann√§herung an die Anzahl der Oberfl√§chenmikrofl√§chen entlang des Medianvektors basierend auf der Oberfl√§chenrauheit;  Dies ist die Hauptfunktion zur Ann√§herung an Mikrofl√§chen. </li><li>  Geometriefunktion: Beschreibt die Selbstschattierungseigenschaft von Mikrofl√§chen.  Wenn die Oberfl√§che ziemlich rau ist, k√∂nnen einige Mikrofl√§chen der Oberfl√§che andere √ºberlappen, wodurch die von der Oberfl√§che reflektierte Lichtmenge verringert wird. </li><li>  Fresnel-Gleichung: beschreibt den Oberfl√§chenreflexionskoeffizienten unter verschiedenen Winkeln. </li></ul><br><p>  Jede dieser Funktionen ist eine Ann√§herung an ihr physikalisches √Ñquivalent, und f√ºr sie gibt es verschiedene Implementierungen, die auf eine genauere Ann√§herung an das zugrunde liegende physikalische Modell abzielen.  Einige liefern realistischere Ergebnisse, andere sind in Bezug auf die Leistung effektiver.  Brian Caris von Epic Games hat viel √ºber verschiedene Arten von Approximationen geforscht, √ºber die Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> mehr erfahren k√∂nnen.  Wir werden die gleichen Funktionen wie in Unreal Engine 4 von Epic Games verwenden, n√§mlich: <i>Trowbridge-Reitz GGX</i> f√ºr D, <i>Fresnel-Schlick-</i> N√§herung f√ºr F und <i>Smiths Schlick-GGX</i> f√ºr G. </p><br><h3>  Normalverteilungsfunktion </h3><br><p>  Die Normalverteilungsfunktion D approximiert statistisch die relative Oberfl√§che der Mikrofl√§chen, die genau entlang des Medianvektors ausgerichtet sind <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-759"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67"> h </script>  .  Es gibt viele NDFs, die die statistische Ann√§herung der Gesamtausrichtung von Mikrofl√§chen unter Ber√ºcksichtigung einiger Rauheitsparameter bestimmen.  Wir werden eine verwenden, die als Trowbridge-Reitz GGX bekannt ist: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-761"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762">N</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">D</span><span class="MJXp-msubsup" id="MJXp-Span-764"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765" style="margin-right: 0.05em;">F</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-766" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-767">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">X</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-770">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771">R</span></span></span><span class="MJXp-mo" id="MJXp-Span-772" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773">n</span><span class="MJXp-mo" id="MJXp-Span-774" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">h</span><span class="MJXp-mo" id="MJXp-Span-776" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-777">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-779">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-782">a</span><span class="MJXp-mo" id="MJXp-Span-783" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-784" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-785">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789">c</span><span class="MJXp-mrow" id="MJXp-Span-790"><span class="MJXp-mtext" id="MJXp-Span-791">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">h</span><span class="MJXp-msubsup" id="MJXp-Span-796"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-798" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-799"><span class="MJXp-mtext" id="MJXp-Span-800">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802">i</span><span class="MJXp-mo" id="MJXp-Span-803" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-804" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-805">n</span><span class="MJXp-mtext" id="MJXp-Span-806">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-809">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811">h</span><span class="MJXp-msubsup" id="MJXp-Span-812"><span class="MJXp-mo" id="MJXp-Span-813" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-814" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-815" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-816">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-818">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-819">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">h</span><span class="MJXp-msubsup" id="MJXp-Span-821"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-823" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-824" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-825">1</span><span class="MJXp-mo" id="MJXp-Span-826" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-828">1</span><span class="MJXp-msubsup" id="MJXp-Span-829"><span class="MJXp-mo" id="MJXp-Span-830" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-831" style="vertical-align: 0.5em;">2</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-68-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-68"> NDF_ {GGXTR} (n, h, \ alpha) = \ frac {\ alpha ^ 2} {\ pi ((n \ cdot h) ^ 2 (\ alpha ^ 2‚àí1) +1) ^ 2} </script></p><br><p>  hier <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-832"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-69"> h </script>  Ist der Medianvektor, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-834"><span class="MJXp-mtext" id="MJXp-Span-835">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-838">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-70"> \ alpha </script>  - Wert der Oberfl√§chenrauheit.  Wenn wir uns entscheiden <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-841"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-71"> h </script>  Als Medianvektor zwischen der Normalen zur Oberfl√§che und der Richtung des Lichts und anschlie√üender √Ñnderung des Rauheitsparameters erhalten wir das folgende Bild: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/xh/kr/soxhkr5idspt29qlldjrkq4rhqm.png"></div><br><p>  Wenn die Rauheit klein ist (d. H. Die Oberfl√§che ist glatt), sind die in Richtung des Medianvektors orientierten Mikrofl√§chen in einem kleinen Radius konzentriert.  Aufgrund dieser hohen Konzentration ergibt NDF einen sehr hellen Fleck.  Auf einer rauen Oberfl√§che, auf der Mikrofl√§chen in zuf√§lligeren Richtungen ausgerichtet sind, finden Sie eine viel gr√∂√üere Anzahl von Mikrofl√§chen, die in Richtung des Medianvektors ausgerichtet sind <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-843"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">h</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-72"> h </script>  befindet sich jedoch in einem gr√∂√üeren Radius, wodurch die Sonderfarbe grauer wird. </p><br><p>  Im GLSL-Code sieht die Normalverteilungsfunktion von Trowbridge-Reitz GGX ungef√§hr so ‚Äã‚Äãaus: </p><br><pre> <code class="plaintext hljs">float DistributionGGX(vec3 N, vec3 H, float a) { float a2 = a*a; float NdotH = max(dot(N, H), 0.0); float NdotH2 = NdotH*NdotH; float nom = a2; float denom = (NdotH2 * (a2 - 1.0) + 1.0); denom = PI * denom * denom; return nom / denom; }</code> </pre> <br><h3>  Geometriefunktion </h3><br><p>  Die Geometriefunktion n√§hert sich statistisch der relativen Oberfl√§che an, wo sich ihre mikroskopischen Unregelm√§√üigkeiten √ºberlappen, wodurch das Eindringen von Lichtstrahlen verhindert wird. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4v/gq/zv/4vgqzvlt9uye7cbn_ejq9v6b8cm.png"></div><br><p>  Wie im Fall von NDF akzeptiert die Geometriefunktion den Oberfl√§chenrauheitskoeffizienten als Eingabe, was in diesem Fall Folgendes bedeutet: Bei raueren Oberfl√§chen ist die Wahrscheinlichkeit einer Schattierung von Mikrofl√§chen h√∂her.  Die Geometriefunktion, die wir verwenden werden, ist eine Kombination der GGX- und Schlick-Beckmann-N√§herungen und wird als Schlick-GGX bezeichnet: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-845"><span class="MJXp-msubsup" id="MJXp-Span-846"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-847" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-848" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-852">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-856">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-857">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-858">X</span></span></span><span class="MJXp-mo" id="MJXp-Span-859" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">n</span><span class="MJXp-mo" id="MJXp-Span-861" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-862">v</span><span class="MJXp-mo" id="MJXp-Span-863" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864">k</span><span class="MJXp-mo" id="MJXp-Span-865" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-867">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-869">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871">c</span><span class="MJXp-mrow" id="MJXp-Span-872"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-873">n</span><span class="MJXp-mtext" id="MJXp-Span-874">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-876">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-878">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-879">v</span></span><span class="MJXp-mrow" id="MJXp-Span-880"><span class="MJXp-mo" id="MJXp-Span-881" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882">n</span><span class="MJXp-mtext" id="MJXp-Span-883">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-885">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-886">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-888">v</span><span class="MJXp-mo" id="MJXp-Span-889" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-890" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-891">1</span><span class="MJXp-mo" id="MJXp-Span-892" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-893">k</span><span class="MJXp-mo" id="MJXp-Span-894" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-895" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-896">k</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-73-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-73"> G_ {SchlickGGX} (n, v, k) = \ frac {n \ cdot v} {(n \ cdot v) (1 - k) + k} </script></p><br><p>  Hier <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-897"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-898">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-74"> k </script>  ist eine Umbenennung <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-899"><span class="MJXp-mtext" id="MJXp-Span-900">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-902">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-903">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-905">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-75"> \ alpha </script>  abh√§ngig davon, ob wir die Geometriefunktion f√ºr Direktbeleuchtung oder IBL-Beleuchtung verwenden: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-906"><span class="MJXp-msubsup" id="MJXp-Span-907"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908" style="margin-right: 0.05em;">k</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-909" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-912">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-913">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-914">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-917">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">c</span><span class="MJXp-mrow" id="MJXp-Span-922"><span class="MJXp-mo" id="MJXp-Span-923" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-924">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-928">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929">a</span><span class="MJXp-mo" id="MJXp-Span-930" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-931">1</span><span class="MJXp-msubsup" id="MJXp-Span-932"><span class="MJXp-mo" id="MJXp-Span-933" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-934" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-935"><span class="MJXp-mn" id="MJXp-Span-936">8</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-76-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-76"> k_ {direct} = \ frac {(\ alpha + 1) ^ 2} {8} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-937"><span class="MJXp-msubsup" id="MJXp-Span-938"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939" style="margin-right: 0.05em;">k</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-940" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-941">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-942">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-943">L</span></span></span><span class="MJXp-mo" id="MJXp-Span-944" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-945">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-949">c</span><span class="MJXp-mrow" id="MJXp-Span-950"><span class="MJXp-mtext" id="MJXp-Span-951">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-952">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-953">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-954">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-955">h</span><span class="MJXp-msubsup" id="MJXp-Span-956"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-957" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-958" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-959"><span class="MJXp-mn" id="MJXp-Span-960">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-77-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-77"> k_ {IBL} = \ frac {\ alpha ^ 2} {2} </script></p><br><p>  Bitte beachten Sie, dass der Wert <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-961"><span class="MJXp-mtext" id="MJXp-Span-962">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-963">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-964">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-966">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-967">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-78"> \ alpha </script>  kann variieren, je nachdem, wie Ihr Motor die Rauheit √ºbersetzt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-968"><span class="MJXp-mtext" id="MJXp-Span-969">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-971">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-79"> \ alpha </script>  .  In den folgenden Lektionen werden wir detailliert diskutieren, wie und wo diese Neuzuweisung relevant wird. </p><br><p>  Um die Geometrie effektiv zu approximieren, m√ºssen wir sowohl die Blickrichtung (√ºberlappende Geometrie) als auch den Richtungsvektor des Lichts (Selbstbeschattung der Geometrie) ber√ºcksichtigen.  Wir k√∂nnen beide F√§lle mit <i>der Smith-Methode betrachten</i> : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-975"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-976">G</span><span class="MJXp-mo" id="MJXp-Span-977" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978">n</span><span class="MJXp-mo" id="MJXp-Span-979" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">v</span><span class="MJXp-mo" id="MJXp-Span-981" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-982">l</span><span class="MJXp-mo" id="MJXp-Span-983" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-984">k</span><span class="MJXp-mo" id="MJXp-Span-985" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-986" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-987"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-988" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-989" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-990">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-991">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-992">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-993" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-994">n</span><span class="MJXp-mo" id="MJXp-Span-995" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-996">v</span><span class="MJXp-mo" id="MJXp-Span-997" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998">k</span><span class="MJXp-mo" id="MJXp-Span-999" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1000"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1002" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1003">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1004">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-1006" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1007">n</span><span class="MJXp-mo" id="MJXp-Span-1008" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009">l</span><span class="MJXp-mo" id="MJXp-Span-1010" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1011">k</span><span class="MJXp-mo" id="MJXp-Span-1012" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-80-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-80"> G (n, v, l, k) = G_ {sub} (n, v, k) G_ {sub} (n, l, k) </script></p><br><p>  Verwendung der Smith-Methode mit Schlick-GGX als <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1013"><span class="MJXp-msubsup" id="MJXp-Span-1014"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1015" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1016" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1017">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1019">b</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-81"> G_ {sub} </script>  ergibt folgendes Bild mit unterschiedlicher Rauheit R: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vk/st/b5/vkstb5lml6vvdrr5i9aiexawkuq.png"></div><br><p>  Die Geometriefunktion ist ein Faktor zwischen [0.0, 1.0], wobei Wei√ü (oder 1.0) keine Schattierung der Mikrofl√§chen bedeutet und Schwarz (oder 0.0) eine vollst√§ndige Schattierung der Mikrofl√§chen bedeutet. </p><br><p>  In GLSL wird eine Geometriefunktion in den folgenden Code konvertiert: </p><br><pre> <code class="plaintext hljs">float GeometrySchlickGGX(float NdotV, float k) { float nom = NdotV; float denom = NdotV * (1.0 - k) + k; return nom / denom; } float GeometrySmith(vec3 N, vec3 V, vec3 L, float k) { float NdotV = max(dot(N, V), 0.0); float NdotL = max(dot(N, L), 0.0); float ggx1 = GeometrySchlickGGX(NdotV, k); float ggx2 = GeometrySchlickGGX(NdotL, k); return ggx1 * ggx2; }</code> </pre><br><h3>  Fresnel-Gleichung </h3><br><p>  Die Fresnel-Gleichung beschreibt das Verh√§ltnis von reflektiertem und gebrochenem Licht, das von dem Winkel abh√§ngt, unter dem wir die Oberfl√§che betrachten.  Wenn Licht auf eine Oberfl√§che trifft, gibt uns die Fresnel-Gleichung den Prozentsatz des reflektierten Lichts basierend auf dem Winkel, unter dem wir diese Oberfl√§che sehen.  Aus diesem Reflexionsverh√§ltnis und dem Energieerhaltungsgesetz k√∂nnen wir direkt den gebrochenen Teil des Lichts erhalten, der gleich der verbleibenden Energie ist. </p><br><p>  Jede Oberfl√§che oder jedes Material weist ein <i>Grundreflexionsverm√∂gen auf</i> , das beim direkten Betrachten der Oberfl√§che beobachtet wird. Wenn Sie jedoch die Oberfl√§che in einem Winkel betrachten, werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alle</a> Reflexionen deutlicher.  Sie k√∂nnen dies selbst √ºberpr√ºfen, indem Sie Ihren senkrechten Holz- oder Metalltisch zuerst senkrecht und dann in einem Winkel von nahezu 90 Grad betrachten.  Sie werden sehen, dass Reflexionen viel deutlicher werden.  Theoretisch reflektieren alle Oberfl√§chen das Licht vollst√§ndig, wenn sie von ihnen in einem idealen Winkel von 90 Grad betrachtet werden.  Dieser Effekt wird als Fresnel bezeichnet und <b>durch die Fresnel-Gleichung beschrieben</b> . </p><br><p>  Die Fresnel-Gleichung ist recht komplex, kann aber gl√ºcklicherweise mit <b>der Fresnel-Schlick-N√§herung</b> vereinfacht werden: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1020"><span class="MJXp-msubsup" id="MJXp-Span-1021"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1022" style="margin-right: 0.05em;">F</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1023" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1024">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1025">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1026">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1027">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1028">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1029">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1030">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-1031" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032">h</span><span class="MJXp-mo" id="MJXp-Span-1033" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034">v</span><span class="MJXp-mo" id="MJXp-Span-1035" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1036"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1038" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1039" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1040" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1041"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1042" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1043" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1044" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1045" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1046">1</span><span class="MJXp-mo" id="MJXp-Span-1047" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1048"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1050" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1051" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1052" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1053">1</span><span class="MJXp-mo" id="MJXp-Span-1054" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mo" id="MJXp-Span-1055" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056">h</span><span class="MJXp-mtext" id="MJXp-Span-1057">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1058">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1059">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1060">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1061">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062">v</span><span class="MJXp-mo" id="MJXp-Span-1063" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1064"><span class="MJXp-mo" id="MJXp-Span-1065" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1066" style="vertical-align: 0.5em;">5</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-82-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-82"> F_ {Schlick} (h, v, F_0) = F_0 + (1 - F_0) (1 - (h \ cdot v)) ^ 5 </script></p><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1067"><span class="MJXp-msubsup" id="MJXp-Span-1068"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1069" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1070" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-83-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-83"> F_0 </script>  stellt das grundlegende Reflexionsverm√∂gen der Oberfl√§che dar, das wir unter Verwendung von sogenannten Brechungsindizes oder <b>IORs</b> (Brechungsindizes) berechnen. Wie Sie auf der Oberfl√§che der Kugel sehen k√∂nnen, ist die Blickrichtung n√§her an den Grenzen der sichtbaren Kugel (dem Winkel zwischen der Blickrichtung und dem Median), wie Sie auf der Oberfl√§che der Kugel sehen k√∂nnen   90  ),     , , : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/mq/ii/xvmqiib7njmsiwhb0c3scdmc53c.png"></div><br><p>   ,    .    ,   -    <i></i>   .    (),          ,         .   ,           ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1071"><span class="MJXp-msubsup" id="MJXp-Span-1072"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1073" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1074" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-84-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-84">F_0</script> ) (  0 ,        )             -,             ,    . </p><br><p>                  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> .   ,  ,       : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/on/0f/zz/on0fzzo6gxv4qtilz0jwu4s-nqc.png"></div><br><p>  :            0.17,    ,  ,            ( )     0.5  1.0.  ,         ‚Äú‚Äù,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1075"><span class="MJXp-msubsup" id="MJXp-Span-1076"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1077" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1078" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-85-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-85">F_0</script>    RGB (           ). </p><br><p>           ,  metallic workflow:        ,    (metalness),  ,     . </p><br><blockquote>       :   ,  ;      ,  .   ,          0.0  1.0.     -         , ,      ,    .          ,      . <br></blockquote><br><p>   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1079"><span class="MJXp-msubsup" id="MJXp-Span-1080"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1081" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1082" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-86-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-86">F_0</script>   ,    ,         -    ,       ,      .      : </p><br><pre> <code class="plaintext hljs">vec3 F0 = vec3(0.04); F0 = mix(F0, surfaceColor.rgb, metalness);</code> </pre><br><p>     ,      .    ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1083"><span class="MJXp-msubsup" id="MJXp-Span-1084"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1085" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1086" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-87-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-87">F_0</script>     .    0.04               . ,     ,       ,   F0   .       ,     ,             . </p><br><p>   -  : </p><br><pre> <code class="plaintext hljs">vec3 fresnelSchlick(float cosTheta, vec3 F0) { return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0); }</code> </pre><br><p>  cosTheta           . </p><br><h3>   - </h3><br><p>    BRDF -        : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1087"><span class="MJXp-msubsup" id="MJXp-Span-1088"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1089" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1090" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1091" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1092">p</span><span class="MJXp-mo" id="MJXp-Span-1093" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1094"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1095" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1096" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1097" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1098" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-munderover" id="MJXp-Span-1099"><span class=""><span class="MJXp-mo" id="MJXp-Span-1100" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mi" id="MJXp-Span-1101" style="margin-left: 0px;">Œ©</span></span></span><span class="MJXp-mo" id="MJXp-Span-1102" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1103"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1105" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mfrac" id="MJXp-Span-1106" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107">c</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1108">œÄ</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1109" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-1110"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1111" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1112" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mfrac" id="MJXp-Span-1113" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1114">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1115">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1116">G</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1117">4</span><span class="MJXp-mo" id="MJXp-Span-1118" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1119"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1120" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1121" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1122" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123">n</span><span class="MJXp-mo" id="MJXp-Span-1124" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1125" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1127" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1128" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1129" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1130">n</span><span class="MJXp-mo" id="MJXp-Span-1131" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1132" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1133"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1134" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1135" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1136" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1137">p</span><span class="MJXp-mo" id="MJXp-Span-1138" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1140" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1141" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1142" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1143">n</span><span class="MJXp-mo" id="MJXp-Span-1144" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1145"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1146" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1147" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1148">d</span><span class="MJXp-msubsup" id="MJXp-Span-1149"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1150" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1151" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-88-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-88">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+k_s\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>       . ,  ,    F       .       <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1152"><span class="MJXp-msubsup" id="MJXp-Span-1153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1154" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1155" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-89-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-89">k_s</script> ,  ,        <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1156"><span class="MJXp-msubsup" id="MJXp-Span-1157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1158" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1159" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-90-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-90">k_s</script>  .  ,      : </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1160"><span class="MJXp-msubsup" id="MJXp-Span-1161"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1162" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1163" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1164" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165">p</span><span class="MJXp-mo" id="MJXp-Span-1166" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1167"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1168" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1169" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1170" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1171" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-munderover" id="MJXp-Span-1172"><span class=""><span class="MJXp-mo" id="MJXp-Span-1173" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mi" id="MJXp-Span-1174" style="margin-left: 0px;">Œ©</span></span></span><span class="MJXp-mo" id="MJXp-Span-1175" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1176"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1177" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1178" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mfrac" id="MJXp-Span-1179" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1180">c</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1181">œÄ</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1182" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mfrac" id="MJXp-Span-1183" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1184">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1185">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1186">G</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1187">4</span><span class="MJXp-mo" id="MJXp-Span-1188" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1191" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1192" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193">n</span><span class="MJXp-mo" id="MJXp-Span-1194" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1195" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1196"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1197" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1198" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1199" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1200">n</span><span class="MJXp-mo" id="MJXp-Span-1201" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1202" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1203"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1205" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1206" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207">p</span><span class="MJXp-mo" id="MJXp-Span-1208" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1209"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1210" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1211" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1212" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1213">n</span><span class="MJXp-mo" id="MJXp-Span-1214" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1215"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1216" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1217" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1218">d</span><span class="MJXp-msubsup" id="MJXp-Span-1219"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1220" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1221" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-91-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-91">L_o(p,\omega_o)=\int\limits_\Omega(k_d\frac{c}{\pi}+\frac{DFG}{4(\omega_o\cdot n)(\omega_i \cdot n)}) L_i(p, \omega_i)n\cdot \omega_i d\omega_i</script></p><br><p>         ,         PBR.  ,      ,          .         ,          ,        . </p><br><h3>    PBR </h3><br><p> ,     PBR,     ,       ,        PBR.    ,      PBR,      .        ,         :    ,             . </p><br><p>     ,       PBR,     : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/rt/jn/wlrtjnjhkbjfj-8lsqe1xanv_30.png"></div><br><p> <b></b> :            ,    .          ,        .           ,      ;      . </p><br><p> <b></b> :   ,   ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> .          ,   ,    . </p><br><p> <b></b> :        .    ,   PBR-,       ,     :   . </p><br><p> <b></b> :   ,       .          .          ,         .  PBR-      ,       ,       (1.0 ‚Äî )   . </p><br><p> <b>AO (ambient occlusion)</b> :     AO        .      , ,            .  AO      ,     .             .         ,      3D-. </p><br><p>                    .        PBR,              ,        . ,    PBR,       PBR-,       ,    ,       . </p><br><h4>  Verwandte Materialien </h4><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Background: Physics and Math of Shading by Naty Hoffmann:</a>   ,      ,      ;                 PBR,   must-read  . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Real shading in Unreal Engine 4</a> :   PBR,  Epic Games  Unreal Engine 4. PBR,       ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Marmoset: PBR Theory</a> :   PBR.     , ,   ,  . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Coding Labs: Physically based rendering</a> :     ,     PBR. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Coding Labs: Physically Based Rendering ‚Äî Cook‚ÄìTorrance</a> :   BRDF - </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wolfire Games ‚Äî Physically based rendering</a> :   PBR  Lukas Orsv√§rn. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[SH17C] Physically Based Shading</a> :   shadertoy (:   )  Krzysztof Narkowi,      PBR. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de426123/">https://habr.com/ru/post/de426123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de426113/index.html">Google News und Leo Tolstoy: Visualisierung von Vektordarstellungen von W√∂rtern mit t-SNE</a></li>
<li><a href="../de426115/index.html">Die Praxis der Verwendung des Schauspielermodells in der Backend-Plattform von Quake Champions</a></li>
<li><a href="../de426117/index.html">Der B√ºrgerbeauftragte schl√§gt vor, Anzeigen mit potenziell gef√§hrlichen Babyprodukten zu blockieren</a></li>
<li><a href="../de426119/index.html">Altert√ºmer: Cryptonomicon Iron</a></li>
<li><a href="../de426121/index.html">MC.exe (Nachrichten-Compiler), rc.exe, link.exe zum Generieren einer DLL f√ºr EventMessageFile</a></li>
<li><a href="../de426125/index.html">Karriere Steroide. Aufz√ºge</a></li>
<li><a href="../de426131/index.html">Laden Sie die Konfiguration √ºber USB auf das FPGA herunter oder zerlegen Sie FTDI MPSSE</a></li>
<li><a href="../de426133/index.html">Einf√ºhrung in die Alpha-Version von Volume Snapshots in Kubernetes</a></li>
<li><a href="../de426135/index.html">Private Cloud f√ºr das Internet der Dinge</a></li>
<li><a href="../de426137/index.html">Zeitalter der Ehrlichkeit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>