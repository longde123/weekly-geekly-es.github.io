<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐ฟ ๐ค๐ป ุฃูู ุฃุฎุทุงุก ุงูุชุทููุฑ ุนูุฏ ุงูุนูู ูุน PostgreSQL ๐ก๏ธ ๐๐ฟ โ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="HighLoad ++ ููุฌูุฏ ููุฐ ูุชุฑุฉ ุทูููุฉ ุ ููุชุญุฏุซ ุนู ุงูุนูู ูุน PostgreSQL ุจุงูุชุธุงู. ููู ุงููุทูุฑูู ูุง ุฒุงููุง ููุงุฌููู ููุณ ุงููุดููุงุช ูู ุดูุฑ ูุขุฎุฑ ุ ูู ุณูุฉ ุฅูู ุฃุฎุฑู. ุนู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฃูู ุฃุฎุทุงุก ุงูุชุทููุฑ ุนูุฏ ุงูุนูู ูุน PostgreSQL</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/455248/" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">HighLoad ++</a> ููุฌูุฏ ููุฐ ูุชุฑุฉ ุทูููุฉ ุ ููุชุญุฏุซ ุนู ุงูุนูู ูุน PostgreSQL ุจุงูุชุธุงู.  ููู ุงููุทูุฑูู ูุง ุฒุงููุง ููุงุฌููู ููุณ ุงููุดููุงุช ูู ุดูุฑ ูุขุฎุฑ ุ ูู ุณูุฉ ุฅูู ุฃุฎุฑู.  ุนูุฏูุง ุชููู ููุงู ุฃุฎุทุงุก ูู ุงูุชุนุงูู ูุน ููุงุนุฏ ุงูุจูุงูุงุช ูู ุงูุดุฑูุงุช ุงูุตุบูุฑุฉ ุงูุชู ูุง ุชุญุชูู ุนูู ููุงุนุฏ ุจูุงูุงุช DBA ุ ููุฐุง ููุณ ููุงุฌุฆูุง.  ุชุญุชุงุฌ ุงูุดุฑูุงุช ุงููุจูุฑุฉ ุฃูุถูุง ุฅูู ููุงุนุฏ ุจูุงูุงุช ุ ูุญุชู ูุน ุงูุนูููุงุช ุงูุชู ูุชู ุชุตุญูุญูุง ุ ูุง ุชุฒุงู ุงูุฃุฎุทุงุก ุชุญุฏุซ ูุชุณูุท ููุงุนุฏ ุงูุจูุงูุงุช.  ูุง ููู ุญุฌู ุงูุดุฑูุฉ - ูุง ุชุฒุงู ุชุญุฏุซ ุฃุฎุทุงุก ุ ุชุนุทู ููุงุนุฏ ุงูุจูุงูุงุช ุจุดูู ุฏูุฑู ุ ุชุนุทู. <br><br><img src="https://habrastorage.org/webt/k7/dz/pb/k7dzpbs_rg2wat7ac4awvar2h-e.png"><br><br>  ุจุงูุทุจุน ุ ูู ูุญุฏุซ ูุฐุง ูู ุฃุจุฏูุง ุ ูููู ุงูุชุญูู ูู ูุงุฆูุฉ ุงูุชุญูู ููุณ ุจุงูุฃูุฑ ุงูุตุนุจ ุ ููุฏ ูููู ูู ุงูููุงุณุจ ููุบุงูุฉ ุฅููุงุฐ ุงูุฃุนุตุงุจ ุงููุณุชูุจููุฉ.  ุชุญุช ุงููุทุฉ ุ ุณูุฐูุฑ ุฃูู ุงูุฃุฎุทุงุก ุงููููุฐุฌูุฉ ุงูุชู ูุฑุชูุจูุง ุงููุทูุฑูู ุนูุฏ ุงูุนูู ูุน PostgreSQL ุ ููุฑู ููุงุฐุง ูุง ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุฐูู ุ ููุนุฑูุฉ ููู. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/HjLnY0aPQZo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>ุญูู ุงููุชุญุฏุซ:</b> ุจุฏุฃ <b>Alexey Lesovsky</b> ููุณุคูู ููุธุงู Linux.  ูู ููุงู ุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ููุธู ุงูุฑุตุฏ ุฌุงุกุช ุชุฏุฑูุฌูุง ุฅูู PostgreSQL.  ุงูุขู PostgreSQL DBA ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Data Egret</a> ุ ููู ุดุฑูุฉ ุงุณุชุดุงุฑูุฉ ุชุนูู ูุน ุงููุซูุฑ ูู ุงููุดุงุฑูุน ุงููุฎุชููุฉ ูุชุฑู ุงูุนุฏูุฏ ูู ุงูุฃูุซูุฉ ุนูู ุงููุดููุงุช ุงููุชูุฑุฑุฉ.  ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุงุจุท</a> ูุนุฑุถ ุงูุชูุฑูุฑ ูู HighLoad ++ 2018. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูู ุฃูู ุชุฃุชู ุงููุดุงููุ </h2><br>  ููุชุฏูุฆุฉ ุ ุจุนุถ ุงููุตุต ุญูู ููููุฉ ุญุฏูุซ ุงูุฃุฎุทุงุก. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุงุฑูุฎ 1. ุงูููุฒุงุช </h3><br>  ุฅุญุฏู ุงููุดููุงุช ูู ุงูููุฒุงุช ุงูุชู ุชุณุชุฎุฏููุง ุงูุดุฑูุฉ ุนูุฏ ุงูุนูู ูุน PostgreSQL.  ูู ุดูุก ูุจุฏุฃ ุจุณูุท: PostgreSQL ุ ูุฌููุนุงุช ุงูุจูุงูุงุช ุ ุงุณุชุนูุงูุงุช ุจุณูุทุฉ ูุน JOIN.  ูุญู ูุฃุฎุฐ ุงูุจูุงูุงุช ุ ูุงูููุงู SELECT - ูู ุดูุก ุจุณูุท. <br><br>  ุซู ูุจุฏุฃ ูู ุงุณุชุฎุฏุงู ูุธููุฉ PostgreSQL ุงูุฅุถุงููุฉ ุ ูุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉ ุ ูููุญูุงุช.  ุงูููุฒุฉ ุชูุจุฑ.  ูุญู ุฑุจุท ุชุฏูู ุงููุณุฎ ุงููุชูุงุซู ุ sharding.  ุชุธูุฑ ุงููุฑุงูู ุงููุฎุชููุฉ ููุฌููุนุงุช ุงูุฌุณู ุญูู - pgbouncer ุ pgpool ุ patroni.  ุดูุก ูู ูุฐุง ุงููุจูู. <br><br><img src="https://habrastorage.org/webt/_i/kr/an/_ikran7pf4ni9e4hyxiwptuhwy4.png"><br><br><blockquote style=";text-align:right;direction:rtl">  ูู ูููุฉ ุฑุฆูุณูุฉ ูู ุณุจุจ ูุธููุฑ ุฎุทุฃ. </blockquote><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุงุฑูุฎ 2. ุชุฎุฒูู ุงูุจูุงูุงุช </h3><br>  ุทุฑููุฉ ุชุฎุฒูู ุงูุจูุงูุงุช ูู ุฃูุถูุง ูุตุฏุฑ ููุฃุฎุทุงุก. <br><br>  ุนูุฏูุง ุธูุฑ ุงููุดุฑูุน ูุฃูู ูุฑุฉ ุ ูุงู ููุงู ุนุฏุฏ ูููู ูู ุงูุจูุงูุงุช ูุงูุฌุฏุงูู ููู.  ุงุณุชุนูุงูุงุช ุจุณูุทุฉ ุชููู ูุชููู ูุชุณุฌูู ุงูุจูุงูุงุช.  ูููู ุจุนุฏ ุฐูู ููุงู ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงูุฌุฏุงูู.  ูุชู ุชุญุฏูุฏ ุงูุจูุงูุงุช ูู ุฃูุงูู ูุฎุชููุฉ ุ ุชุธูุฑ JOINs.  ุงูุงุณุชุนูุงูุงุช ูุนูุฏุฉ ูุชุชุถูู ุชุตูููุงุช CTE ุ SUBQUERY ุ IN IN ุ LATERAL.  ูุตุจุญ ุงุฑุชูุงุจ ุฎุทุฃ ููุชุงุจุฉ ุงุณุชุนูุงู ููุญูู ุฃุณูู ุจูุซูุฑ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff9/37e/620/ff937e6202947bba4393531475868c74.png"><br><br>  ููุฐู ูู ูุฌุฑุฏ ููุฉ ุฌุจู ุงูุฌููุฏ - ูู ููุงู ูุง ุนูู ุงูุฌุงูุจ ุ ูููู ุฃู ูููู ููุงู 400 ุฌุฏูู ุ ูุณู ุ ูุชู ุฃูุถูุง ูู ุฎูุงููุง ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุญูู ูุขุฎุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุงุฑูุฎ 3. ุฏูุฑุฉ ุงูุญูุงุฉ </h3><br>  ูุตุฉ ููู ูุชู ุงุชุจุงุน ุงูููุชุฌ.  ูุฌุจ ุฏุงุฆููุง ุชุฎุฒูู ุงูุจูุงูุงุช ูู ููุงู ูุง ุ ูุฐูู ููุงู ุฏุงุฆููุง ูุงุนุฏุฉ ุจูุงูุงุช.  ููู ุชุชุทูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏูุง ูุชุทูุฑ ุงูููุชุฌุ <br><br>  ูู ูุงุญูุฉ ุ ููุงู <b>ูุทูุฑูู</b> ูุดุบูููู ุจูุบุงุช ุงูุจุฑูุฌุฉ.  ููุชุจูู ุชุทุจููุงุชูู ููุทูุฑูู ููุงุฑุงุช ูู ูุฌุงู ุชุทููุฑ ุงูุจุฑูุฌูุงุช ุ ุฏูู ุงูุงูุชูุงู ุจุงูุฎุฏูุงุช.  ุบุงูุจูุง ูุง ูููููู ุบูุฑ ููุชููู ุจููููุฉ ุนูู Kafka ุฃู PostgreSQL - ููู ูุทูุฑูู ููุฒุงุช ุฌุฏูุฏุฉ ูู ุชุทุจููุงุชูู ุ ููุง ููุชููู ุจุงูุจุงูู. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/1c3/00a/0561c300abe5623898768ad7d334a334.png"><br><br>  <b>ูุฏุฑุงุก ุ</b> ูู ูุงุญูุฉ ุฃุฎุฑู.  ุฅููุง ุชุฑูุน ูุซููุงุช Amazon ุงูุฌุฏูุฏุฉ ุนูู Bare-metal ูุชุดุบููุง ุงูุฃุชูุชุฉ: ููู ุชููู ุจุฅุนุฏุงุฏ ุนูููุงุช ุงููุดุฑ ูุฌุนู ุงูุชุฎุทูุท ูุนูู ุจุดูู ุฌูุฏ ุ ููููู ุจุงูุชููุฆุฉ ุจุญูุซ ุชุชูุงุนู ุงูุฎุฏูุงุช ุจุดูู ุฌูุฏ ูุน ุจุนุถูุง ุงูุจุนุถ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/961/3f5/8fb/9613f58fb950f69b235d5b80cc29e1b4.png"><br><br>  ููุงู ูููู ุนูุฏูุง ูุง ูููู ููุงู ููุช ุฃู ุฑุบุจุฉ ูู ุถุจุท ุงูููููุงุช ุ ููุฐูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ุชุนูู ููุงุนุฏ ุงูุจูุงูุงุช ูุน ุงูุชููููุงุช ุงูุงูุชุฑุงุถูุฉ ุ ุซู ููุณูููุง ุชูุงููุง - "ูุง ุชุนูู ุ ูุง ุชููุณูุง". <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุชูุชุดุฑ ุงูุฎููุนูู ูู ุฃูุงูู ูุฎุชููุฉ ุ ูุงูุชู ุชุทูุฑ ุจูู ุงูุญูู ูุงูุขุฎุฑ ูู ููุฏูุฉ ุงููุทูุฑูู.  ูู ูุฐู ุงูููุงูุฉ ุ ุณูุญุงูู ุฌูุน ูู ูุฐู ุงูููุงุจุณ ูู ุณูููุฉ ูุงุญุฏุฉ ุญุชู ุชุนุฑููุง ููุง ุชุชุฎุทุงูุง ุนูุฏ ุงูุนูู ูุน PostgreSQL. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชุฎุทูุท ูุงููุฑุงูุจุฉ </h2><br>  ุฃููุงู ุ ุชุฎูู ุฃู ูุฏููุง ูุดุฑูุนูุง ุฌุฏูุฏูุง - ุฅูู ุฏุงุฆููุง ุชุทูุฑ ูุดุท ูุงุฎุชุจุงุฑ ุงููุฑุถูุงุช ูุชูููุฐ ููุฒุงุช ุฌุฏูุฏุฉ.  ูู ุงูููุช ุงูุฐู ุธูุฑ ููู ุงูุชุทุจูู ููุชู ููู ููุฏ ุงูุชุทููุฑ ุ ูุฅูู ูุญุชูู ุนูู ุนุฏุฏ ูููู ูู ุงูุฒูุงุฑุงุช ูุงููุณุชุฎุฏููู ูุงูุนููุงุก ุ ููููููู ุฌููุนูู ุจุฅูุดุงุก ูููุงุช ุตุบูุฑุฉ ูู ุงูุจูุงูุงุช.  ุชุญุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ุงุณุชุนูุงูุงุช ุจุณูุทุฉ ูุชู ูุนุงูุฌุชูุง ุจุณุฑุนุฉ.  ูุง ุญุงุฌุฉ ูุณุญุจ ูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุ ูุง ุชูุฌุฏ ูุดุงูู. <br><br>  ูููู ููุงู ุนุฏุฏ ุฃูุจุฑ ูู ุงููุณุชุฎุฏููู ุ ูุชุฃุชู ุญุฑูุฉ ุงููุฑูุฑ: ุชุธูุฑ ุจูุงูุงุช ุฌุฏูุฏุฉ ุ ูุชููู ููุงุนุฏ ุงูุจูุงูุงุช ูุชุชููู ุงูุงุณุชุนูุงูุงุช ุงููุฏููุฉ ุนู ุงูุนูู.  ูู ุงูุถุฑูุฑู ุฅููุงู ุงูููุงุฑุณ ูุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุงุณุชุนูุงูุงุช ูุชุญุณูููุง.  ููุงู ูุดุงูู ูู ุงูุฃุฏุงุก.  ูู ูุฐุง ูุคุฏู ุฅูู ุงูุชูุจููุงุช ูู ุงูุณุงุนุฉ 4 ุตุจุงุญูุง ุ ูุงูุชูุชุฑ ูููุณุคูููู ูุณุฎุท ุงูุฅุฏุงุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุง ูู ุงูุฎุทุฃุ </h3><br><blockquote style=";text-align:right;direction:rtl">  ูู ุชุฌุฑุจุชู ุ ูู ูุนุธู ุงูุฃุญูุงู ูุง ุชูุฌุฏ ุฃูุฑุงุต ูุงููุฉ. </blockquote><br>  <b>ุงููุซุงู ุงูุฃูู</b> .  ููุชุญ ุงูุฌุฏูู ุงูุฒููู ููุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงููุฑุต ุ ููุฑู ุฃู <b>ุงููุณุงุญุฉ ุงูุฎุงููุฉ ุนูู ุงููุฑุต ุชููุฏ</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65b/245/c83/65b245c834e20a94ed7e698b08cfabaf.png"><br><br>  ูุญู ููุธุฑ ุฅูู ููุฏุงุฑ ุงููุณุงุญุฉ ููุง ูุชู ุชูุงููู - ุงุชุถุญ ุฃู ููุงู ุฏููู pg_xlog: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">$ du -csh -t 100M /pgdb/9.6/main/* 15G /pgdb/9.6/main/base 58G /pgdb/9.6/main/pg_xlog 72G </code> </pre> <br>  ูุนุฑู ูุฏุฑุงุก ููุงุนุฏ ุงูุจูุงูุงุช ุนุงุฏุฉู ูุง ูู ูุฐุง ุงูุฏููู ุ ููุง ููุณููู - ุฅูู ููุฌูุฏ ูููุฌูุฏ.  ููู ุงููุทูุฑ ุ ุฎุงุตุฉู ุฅุฐุง ูุธุฑ ุฅูู ุงูุชุฏุฑูุฌ ุ ูุฎุฏุด ุฑุฃุณู ููููุฑ: <br><br>  <i>- ููุน ูู ุงูุณุฌูุงุช ... ุฏุนูุง ูุญุฐู pg_xlog!</i> <br><br>  <b>ุญุฐู ุงูุฏููู ุ ุชููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนู ุงูุนูู</b> .  ุนูู ุงูููุฑ ุ ูุชุนูู ุนููู google ููููุฉ ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุนุฏ ุญุฐู ุณุฌูุงุช ุงููุนุงููุงุช. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2b8/1af/30c/2b81af30c865d529e6f7ff3fd66339ce.png"><br><br>  <b>ุงููุซุงู ุงูุซุงูู</b> .  ูุฑุฉ ุฃุฎุฑู ุ ููุชุญ ุงููุฑุงูุจุฉ ููุฑู ุฃูู ูุง ุชูุฌุฏ ูุณุงุญุฉ ูุงููุฉ.  ูุฐู ุงููุฑุฉ ุงูููุงู ุงูุฐู ูุดุบูู ููุน ูู ุงููุงุนุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ du -csh -t 100M /pgdb/9.6/main/* 70G /pgdb/9.6/main/base 2G /pgdb/9.6/main/pg_xlog 72G </code> </pre> <br>  ูุญู ูุจุญุซ ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุชุดุบู ูุณุงุญุฉ ุฃูุจุฑ ุ ุฃู ุงูุฌุฏุงูู ูุงูููุงุฑุณ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d88/ffc/4e9/d88ffc4e98ca1fd4648ac7aea1c8d019.png"><br><br>  ุงุชุถุญ ุฃู ูุฐุง ูู ุงูุฌุฏูู ูุน ุงูุณุฌูุงุช ุงูุชุงุฑูุฎูุฉ.  ูู ูุญุชุงุฌ ุฃุจุฏูุง ุฅูู ุณุฌูุงุช ุชุงุฑูุฎูุฉ.  ููุชูุจุฉ ููุท ูู ุญุงูุฉ ุ ูุฅุฐุง ูู ููู ููุดููุฉ ุงูููุงู ุ ููู ููุธุฑ ุฅูููุง ุฃุญุฏ ุญุชู ูุฃุชู ุงูุซุงูู: <br><br>  <i>- ุฏุนููุง ุชูุธูู ูู ุดูุก ูู ... ุฃูุฏู ูู ุฃูุชูุจุฑ!</i> <br><br>  ูู ุจุชูุฏูู ุทูุจ ุชุญุฏูุซ ุ ููู ุจุชุดุบููู ุ ูุณูุนูู ุนูู ุญุฐู ุจุนุถ ุงูุฎุทูุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">=# DELETE FROM history_log -# WHERE created_at &lt; ยซ2018-10-01ยป; DELETE 165517399 Time: 585478.451 ms</code> </pre> <br>  ูุนูู ุงูุงุณุชุนูุงู ููุฏุฉ 10 ุฏูุงุฆู ุ ููู ุงูุฌุฏูู ูุง ูุฒุงู ูุดุบู ููุณ ุงููุณุงุญุฉ. <br><br>  PostgreSQL ูุฒูู ุงูุตููู ูู ุงูุฌุฏูู - ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูููู ูุง ูุนูุฏ ุงูููุงู ุฅูู ูุธุงู ุงูุชุดุบูู.  ุณููู PostgreSQL ูุฐุง ุบูุฑ ูุนุฑูู ููุนุธู ุงููุทูุฑูู ููููู ุฃู ูููู ููุงุฌุฆูุง ููุบุงูุฉ. <br><br>  <b>ุงููุซุงู ุงูุซุงูุซ</b> .  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏู ORM ุทูุจูุง ูุซูุฑูุง ููุงูุชูุงู.  ุนุงุฏุฉู ูุง ูููู ุงูุฌููุน ORM ูุฅุฌุฑุงุก ุงุณุชุนูุงูุงุช "ุณูุฆุฉ" ุชูุฑุฃ ุจุนุถ ุงูุฌุฏุงูู. <br><br>  ุงูุชุฑุถ ุฃู ููุงู ุงูุนุฏูุฏ ูู ุนูููุงุช JOIN ุงูุชู ุชูุฑุฃ ุงูุฌุฏุงูู ุจุงูุชูุงุฒู ูู ุนุฏุฉ ูุคุดุฑุงุช ุชุฑุงุจุท.  ูููู ูู PostgreSQL ุฃู ููุงุฒู ุนูููุงุช ุงูุจูุงูุงุช ูููููู ูุฑุงุกุฉ ุงูุฌุฏุงูู ูู ุฎููุท ูุชุนุฏุฏุฉ.  ูููู ูุธุฑูุง ููุฌูุฏ ุงูุนุฏูุฏ ูู ุฎูุงุฏู ุงูุชุทุจููุงุช ุ ููุฑุฃ ูุฐุง ุงูุงุณุชุนูุงู ุฌููุน ุงูุฌุฏุงูู ุนุฏุฉ ุขูุงู ูู ุงููุฑุงุช ูู ุงูุซุงููุฉ.  ุงุชุถุญ ุฃู ุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุญููู ุจุดูู ุฒุงุฆุฏ ุ ููุง ูููู ุฃู ุชุชุนุงูู ุงูุฃูุฑุงุต ุ ููู ูุฐุง ูุคุฏู ุฅูู ุฎุทุฃ <b>502 Bad Gateway</b> ูู ุงููุงุฌูุฉ ุงูุฎูููุฉ - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชููุฑุฉ. <br><br>  ููู ูุฐุง ููุณ ูู ุดูุก.  ููููู ุงุณุชุฏุนุงุก ููุฒุงุช ุฃุฎุฑู ูู PostgerSQL. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงููุฑุงูู ูุนูููุงุช DBMS ุงูุฎูููุฉ</b> - PostgreSQL ูุฏูู ุฌููุน ุฃููุงุน ููุงุท ุงูุชูุชูุด ุ ูุงููุฑุงุบุงุช ุ ูุงููุณุฎ ุงููุชูุงุซู. <br></li><li style=";text-align:right;direction:rtl">  <b>ุงููููุงุช ุงูุนุงูุฉ ุงูุงูุชุฑุงุถูุฉ</b> .  ุนูุฏูุง ูุชู ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ุฌูุงุฒ ุงูุชุฑุงุถู ุ ุนูู ููุณ ูุทุนุฉ ุงูุญุฏูุฏ ุ ุชูุฌุฏ ุฃูุถูุง ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ ุนูู ุงูุฌุงูุจ ุ ููููู ุฃู ุชุชุนุงุฑุถ ุญูู ุงูููุงุฑุฏ. <br></li><li style=";text-align:right;direction:rtl">  <b>ูุชู ุงูุชุฎุฒูู ูู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุงูุตูููุฉ NoName</b> ุ ุงูุชู ูุนุชูุฏ ุฃุฏุงุกูุง ุนูู ุงูููุฑ ูู ุงูุฌุฏู ุฃู ููุถุน ุฒุญู ุ ููุง ุชูุฌุฏ ุทุฑููุฉ ููุนุฑูุฉ ุณุจุจ ุนููู ุจูุฐู ุงูุทุฑููุฉ.  ุงููุงุนุฏุฉ ุชุนุงูู. <br></li><li style=";text-align:right;direction:rtl">  <b>ุงูุชูููู ุงูุงูุชุฑุงุถู</b> .  ูุฐุง ูู ุงูููุถูุน ุงูููุถู ูุฏู: ูููู ุงูุนููู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุชุชุจุงุทุฃ - ุฃูุช ุชูุธุฑ ุ ููุฏูู ุชูููู ุงูุชุฑุงุถู.  ุงูุญูููุฉ ูู ุฃู ุชูููู PostgreSQL ุงูุงูุชุฑุงุถู ูุตูู <b>ููุนูู ุนูู ุฃูุฏุงุญ ุฅุจุฑูู ุงูุดุงู</b> .  ุชู ุฅุทูุงู ุงููุงุนุฏุฉ ุ ููู ุชุนูู ุ ููู ุนูุฏูุง ุชุนูู ุจุงููุนู ุนูู ุฃุฌูุฒุฉ ูุชูุณุทุฉ ุงููุณุชูู ุ ูุฅู ูุฐุง ุงูุชูููู ูุง ูููู ุ ูุฌุจ ุถุจุทู. <br></li></ul><br><blockquote style=";text-align:right;direction:rtl">  ูู ูุนุธู ุงูุฃุญูุงู ุ ุชูุชูุฑ PostgreSQL ุฅูุง ุฅูู ูุณุงุญุฉ ุงููุฑุต ุฃู ุฃุฏุงุก ุงููุฑุต.  ูุญุณู ุงูุญุธ ุ ูุน ูู ูู ุงููุนุงูุฌุงุช ูุงูุฐุงูุฑุฉ ูุงูุดุจูุฉ ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุดูุก ูู ุชุฑุชูุจ ุฃูุซุฑ ุฃู ุฃูู. </blockquote><br>  ููู ุชููู  ุชุญุชุงุฌ ุงูุฑุตุฏ ูุงูุชุฎุทูุท!  ูุจุฏู ุงูุฃูุฑ ูุงุถุญูุง ุ ูููู ูุณุจุจ ูุง ุ ูู ูุนุธู ุงูุญุงูุงุช ุ ูุง ุฃุญุฏ ูุฎุทุท ููุงุนุฏุฉ ุ ูุงูุฑุตุฏ ูุง ูุบุทู ูู ูุง ูุฌุจ ูุฑุงูุจุชู ุฃุซูุงุก ุชุดุบูู PostgreSQL.  ููุงู ูุฌููุนุฉ ูู ุงูููุงุนุฏ ุงููุงุถุญุฉ ุ ูุงูุชู ุณูุนูู ุจูุง ูู ุดูุก ุจุดูู ุฌูุฏ ุ ูููุณ "ุจุดูู ุนุดูุงุฆู". <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฎุทูุท </h3><br>  <b>ุงุณุชุถุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู SSD ุฏูู ุชุฑุฏุฏ</b> .  ุณูุงูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุฃุตุจุญุช ุทูููุฉ ููุซููุฉ ููุณุชูุฑุฉ ููุซูุฑุฉ.  ูุงูุช ููุงุฐุฌ SSD ูููุคุณุณุงุช ููุฌูุฏุฉ ููุฐ ุณููุงุช. <br><br>  <b>ุฏุงุฆูุง ุฎุทุฉ ูุฎุทุท ุงูุจูุงูุงุช</b> .  ูุง ุชูุชุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุชุดู ูู ูุง ูู ูุทููุจ - ูุถูููุฉ ุจุนุฏู ุงูุญุงุฌุฉ ุฅูููุง.  ูุซุงู ุจุณูุท ูู ุฌุฏูู ุชู ุชุนุฏููู ููููุงู ูุฃุญุฏ ุนููุงุฆูุง. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9e1/56f/9ec/9e156f9ec534a11c5e80180c1c72a987.png"><br><br>  ูุฐุง ูู ุฌุฏูู ุงูุณุฌู ุงูุฐู ููุฌุฏ ููู ุนููุฏ ุจูุงูุงุช ูู ุงูููุน json.  ูู ุงููุงุญูุฉ ุงููุณุจูุฉ ุ ููููู ูุชุงุจุฉ ุฃู ุดูุก ูู ูุฐุง ุงูุนููุฏ.  ูู ุงูุณุฌู ุงูุฃุฎูุฑ ูู ูุฐุง ุงูุฌุฏูู ุ ูููู ููุงุญุธุฉ ุฃู ุงูุณุฌูุงุช ุชุดุบู 8 ููุบุงุจุงูุช.  ููุณ ูุฏู PostgreSQL ูุดููุฉ ูู ุชุฎุฒูู ุงูุณุฌูุงุช ุจูุฐุง ุงูุทูู.  ูุญุชูู PostgreSQL ุนูู ุชุฎุฒูู ุฌูุฏ ุฌุฏูุง ููุถุบ ูุฐู ุงูุณุฌูุงุช. <br><br>  ูููู ุงููุดููุฉ ูู ุฃูู ุนูุฏูุง ุชูุฑุฃ ุฎูุงุฏู ุงูุชุทุจููุงุช ุงูุจูุงูุงุช ูู ูุฐุง ุงูุฌุฏูู ุ ูุฅููุง ุชุณุฏ ูุทุงู ุงูุดุจูุฉ ุจุงููุงูู ุจุงููุงูู ุ ูุณุชุนุงูู ุงูุทูุจุงุช ุงูุฃุฎุฑู.  ูุฐู ูู ูุดููุฉ ุชุฎุทูุท ูุฎุทุท ุงูุจูุงูุงุช. <br><br>  <b>ุงุณุชุฎุฏู ุงูุชูุณูู ูุฃู ุชูููุญ ููุตุฉ ูุญุชุงุฌ ุฅูู ุชุฎุฒููู ูุฃูุซุฑ ูู ุนุงููู</b> .  ูุจุฏู ุงูุชูุณูู ูู ุจุนุถ ุงูุฃุญูุงู ูุนูุฏูุง - ุชุญุชุงุฌ ุฅูู ุนูุงุก ูุน ุงููุดุบูุงุช ุ ูุน ูุธุงุฆู ูู ุดุฃููุง ุฅูุดุงุก ุฃูุณุงู.  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู PostgreSQL ุ ูููู ุงููููู ุฃูุถู ูุฃุตุจุญ ุงูุขู ุฅุนุฏุงุฏ ุงูุชูุณูู ุฃุจุณุท ุจูุซูุฑ - ุจูุฌุฑุฏ ุงูุงูุชูุงุก ุ ููุนูู. <br><br>  ูู ุงููุซุงู ุงููุฏุฑูุณ ูุญุฐู ุงูุจูุงูุงุช ูู 10 ุฏูุงุฆู ุ ูููู ุงุณุชุจุฏุงู <code>DELETE</code> ุจู <code>DROP TABLE</code> - ุชุณุชุบุฑู ูุฐู ุงูุนูููุฉ ูู ุธุฑูู ููุงุซูุฉ ุจุถุน ุซูุงูู ููุท. <br><br>  ุนูุฏูุง ูุชู ูุฑุฒ ุงูุจูุงูุงุช ุญุณุจ ุงููุณู ุ ูุชู ุญุฐู ุงููุณู ุญุฑูููุง ูู ุจุถุน ูููู ุซุงููุฉ ุ ููุชููู ูุธุงู ุงูุชุดุบูู ุนูู ุงูููุฑ.  ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ุฃุณูู ูุฃุณูู ูุฃูุซุฑ ุฃูุงููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ </h3><br>  ุงููุฑุงูุจุฉ ููุถูุน ูุจูุฑ ูููุตู ุ ูููู ูู ูุฌูุฉ ูุธุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุงู ุชูุตูุงุช ูููู ุฃู ุชูุณุฌู ูุน ูุณู ูุงุญุฏ ูู ุงูููุงู. <br><br>  ุจุดูู ุงูุชุฑุงุถู ุ ุชููุฑ ุงูุนุฏูุฏ ูู ุฃูุธูุฉ ุงููุฑุงูุจุฉ ูุฑุงูุจุฉ ุงููุนุงูุฌุงุช ูุงูุฐุงูุฑุฉ ูุงูุดุจูุฉ ููุณุงุญุฉ ุงููุฑุต ุ ูููู ููุงุนุฏุฉ ุนุงูุฉ ุ <b>ูุง ููุฌุฏ ุงูุชุฎูุต ูู ุฃุฌูุฒุฉ ุงููุฑุต</b> .  ูุนูููุงุช ุญูู ููููุฉ ุชุญููู ุงูุฃูุฑุงุต ุ ูุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ุงูููุฌูุฏ ุญุงูููุง ุนูู ุงูุฃูุฑุงุต ุ ููุฌุจ ุฏุงุฆููุง ุฅุถุงูุฉ ูููุฉ ุฒูู ุงููุตูู ุฅูู ุงููุฑุงูุจุฉ.  ุณูุณุงุนุฏู ูุฐุง ูู ุชูููู ููููุฉ ุชุญููู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุจุณุฑุนุฉ. <br><br>  ููุงู ุงููุซูุฑ ูู ุฎูุงุฑุงุช ูุฑุงูุจุฉ PostgreSQL ุ ููู ุฐูู.  ูููุง ุจุนุถ ุงูููุงุท ุงูุชู ูุฌุจ ุฃู ุชููู ููุฌูุฏุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุนููุงุก ูุชุตููู</b> .  ูู ุงูุถุฑูุฑู ูุฑุงูุจุฉ ุงูุญุงูุงุช ุงูุชู ูุนูููู ูุนูุง ุ ูุงูุนุซูุฑ ุจุณุฑุนุฉ ุนูู ุงูุนููุงุก "ุงูุถุงุฑูู" ุงูุฐูู ูุถุฑูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููููููู ุชุดุบูููุง. </li><li style=";text-align:right;direction:rtl">  <b>ุฎุทุฃ.</b>  ูู ุงูุถุฑูุฑู ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก ูู ุฃุฌู ุชุชุจุน ูุฏู ูุฌุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช: ูุง ุชูุฌุฏ ุฃุฎุทุงุก - ูุจูุฑุฉ ุ ุธูุฑุช ุฃุฎุทุงุก - ุณุจุจ ูููุธุฑ ุฅูู ุงูุณุฌูุงุช ูุงูุจุฏุก ูู ููู ุงูุฃุฎุทุงุก ุงูุชู ุชุญุฏุซ. </li><li style=";text-align:right;direction:rtl">  <b>ุงูุทูุจุงุช (ุงูุจูุงูุงุช)</b> .  ูุญู ูุฑุงูุจ ุงูุฎุตุงุฆุต ุงููููุฉ ูุงูููุนูุฉ ููุทูุจุงุช ูู ุฃุฌู ุชูููู ูุง ุฅุฐุง ูุงู ูุฏููุง ุทูุจุงุช ุจุทูุฆุฉ ุฃู ุทูููุฉ ุฃู ูุซููุฉ ุงูุงุณุชุฎุฏุงู ููููุงุฑุฏ. </li></ul><br>  ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฑุงุฌุน ุชูุฑูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุฃุณุงุณูุงุช ูุฑุงูุจุฉ PostgreSQL"</a> ูุน HighLoad ++ Siberia ูุตูุญุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฑุงูุจุฉ</a> ูู ูููู PostgreSQL. <br><br>  ุนูุฏูุง ุฎุทุทูุง ูู ุดูุก ู "ุบุทููุง ุฃููุณูุง" ุจุงูุฑุตุฏ ุ ูุง ูุฒุงู ุจุฅููุงููุง ููุงุฌูุฉ ุจุนุถ ุงููุดุงูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฏุฑูุฌ </h3><br>  ุนุงุฏุฉู ูุง ูุฑู ุงููุทูุฑ ุณุทุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุชูููู.  ูุง ููุชู ุจุดูู ุฎุงุต ุจููููุฉ ุชุฑุชูุจูุง ุฏุงุฎูููุง - ููู ุชุนูู ููุงุท ุงูุชูุชูุด ูุงููุณุฎ ุงููุชูุงุซู ูุฌุฏููุฉ ุงูููุงุนูุฏ.  ูุฏู ุงููุทูุฑ ุดูุก ูุง ูุฌุจ ูุนูู ุจุงููุนู - ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููุซูุฑุฉ ููุงูุชูุงู ุงูุชู ูุฑูุฏ ุชุฌุฑุจุชูุง. <br><br><blockquote style=";text-align:right;direction:rtl">  "ุฃุนุทูู ุนููุงู ุงููุงุนุฏุฉ ุ ุซู ุฃูุง ููุณู."  ยฉ ูุทูุฑ ูุฌููู. </blockquote><br>  ูุคุฏู ุงูุฌูู ุจุงูููุถูุน ุฅูู ุนูุงูุจ ูุซูุฑุฉ ุฌุฏูุง ุนูุฏูุง ูุจุฏุฃ ุงููุทูุฑ ูู ูุชุงุจุฉ ุงุณุชุนูุงูุงุช ุชุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฐู.  ุงูุชุฎููุงุช ุนูุฏ ูุชุงุจุฉ ุงูุงุณุชุนูุงูุงุช ูู ุจุนุถ ุงูุฃุญูุงู ุชุนุทู ุชุฃุซูุฑุงุช ูุฐููุฉ. <br><br>  ููุงู ููุนุงู ูู ุงููุนุงููุงุช.  <b>ูุนุงููุงุช OLTP</b> ุณุฑูุนุฉ ููุตูุฑุฉ ูุฎูููุฉ ุงููุฒู ุชุฃุฎุฐ ูุณูุฑ ูู ุงูุซุงููุฉ.  ุฅููู ููุฌุญูู ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ูููุงู ุงููุซูุฑ ูููู.  <b>OLAP - ุงุณุชุนูุงูุงุช ุชุญููููุฉ</b> - ุจุทูุฆุฉ ูุทูููุฉ ูุซูููุฉ ุ ููุฑุงุกุฉ ุตูุงุฆู ูุจูุฑุฉ ูู ุงูุฌุฏุงูู ููุฑุงุกุฉ ุงูุฅุญุตุงุกุงุช. <br><br>  <b>ุนูู ูุฏุงุฑ ุงูุฃุนูุงู ุงูุซูุงุซุฉ ุฅูู ุงูุซูุงุซุฉ</b> ุงููุงุถูุฉ ุ ุบุงูุจูุง ูุง ูุจุฏู ุงุฎุชุตุงุฑ <b>HTAP</b> - ุงููุนุงูุฌุฉ <b>ุงููุฎุชูุทุฉ</b> ูููุนุงูุฌุฉ / ุงูุชุญููู ุฃู ุงููุนุงูุฌุฉ <b>ุงููุฎุชูุทุฉ ูููุนุงููุงุช ุงูุชุญููููุฉ</b> .  ุฅุฐุง ูู ููู ูุฏูู ููุช ููุชูููุฑ ูู ุชูุณูุน ูุทุงู ูุชููุน ุทูุจุงุช OLAP ู OLTP ุ ููููู ุฃู ุชููู: "ูุฏููุง HTAP!"  ููู ุชุฌุฑุจุฉ ูุฃูู ุงูุฃุฎุทุงุก ููุธูุฑ ุฃูู ุ ุจุนุฏ ูู ุดูุก ุ ูุฌุจ ุฃู ุชุนูุด ุฃููุงุน ุงูุทูุจุงุช ุงููุฎุชููุฉ ุจุดูู ูููุตู ุนู ุจุนุถูุง ุงูุจุนุถ ุ ูุฃู ุทูุจุงุช OLAP ุงูุทูููุฉ ุชููุน ุทูุจุงุช OLTP ุงูุฎูููุฉ. <br><br>  ูุฐูู ูุฃุชู ุฅูู ูุณุฃูุฉ ููููุฉ ุชูุณูุน ูุทุงู PostgreSQL ูุฐูู ููุดุฑ ุงูุญูู ุ ููุงู ุงูุฌููุน ุฑุงุถูู. <br><br>  <b>ุชุฏูู ุงููุณุฎ ุงููุชูุงุซู</b> .  ุงูุฎูุงุฑ ุงูุฃุณูู ูู <b>ุฏูู ุงููุณุฎ ุงููุชูุงุซู</b> .  ุนูุฏูุง ูุนูู ุงูุชุทุจูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูููู ุจุชูุตูู ุงูุนุฏูุฏ ูู ุงููุณุฎ ุงููุชูุงุซูุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฐู ูุชูุฒูุน ุงูุญูู.  ูุง ูุฒุงู ุงูุชุณุฌูู ูุฐูุจ ุฅูู ุงููุงุนุฏุฉ ุงูุฑุฆูุณูุฉ ุ ูุงููุฑุงุกุฉ ุฅูู ุงููุณุฎ ุงููุชูุงุซูุฉ.  ูุฐู ุงูุทุฑููุฉ ุชุณูุญ ูู ุจุชูุณูุน ูุทุงู ูุงุณุน ุฌุฏุง. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููููู ุชูุตูู ุงููุฒูุฏ ูู ุงููุณุฎ ุงููุชูุงุซูุฉ <b>ูููุณุฎ</b> ุงููุชูุงุซูุฉ ุงููุฑุฏูุฉ ูุงูุญุตูู ุนูู <b>ุงููุณุฎ ุงููุชูุงุซู ุงููุชุชุงูู</b> .  ูููู ูุตู ูุฌููุนุงุช ุงููุณุชุฎุฏููู ุฃู ุงูุชุทุจููุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฑุงุกุฉ ุงูุชุญูููุงุช ุ ุฅูู ูุณุฎุฉ ูุชูุงุซูุฉ ูููุตูุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f4/5b3/2d7/7f45b32d7eeb8dfcd7e19cfb38210134.png"><br><br>  <b>ุงูููุดูุฑุงุช ุงูููุทููุฉ ูุงูุงุดุชุฑุงูุงุช</b> - ุชุชุถูู ุขููุฉ ุงูููุดูุฑุงุช ูุงูุงุดุชุฑุงูุงุช ุงูููุทููุฉ ูุฌูุฏ ุงูุนุฏูุฏ ูู ุฎูุงุฏู PostgreSQL ุงููุณุชููุฉ ูุน ููุงุนุฏ ุจูุงูุงุช ูููุตูุฉ ููุฌููุนุงุช ูู ุงูุฌุฏุงูู.  ูููู ุชูุตูู ูุฌููุนุงุช ุงูุฌุฏุงูู ูุฐู ุจููุงุนุฏ ุงูุจูุงูุงุช ุงููุฌุงูุฑุฉ ุ ูุณุชููู ูุฑุฆูุฉ ููุชุทุจููุงุช ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ุจุดูู ุทุจูุนู.  ุจูุนูู ุ ูุชู ูุณุฎ ูุงูุฉ ุงูุชุบููุฑุงุช ุงูุชู ุชุญุฏุซ ูู ุงููุตุฏุฑ ุฅูู ูุงุนุฏุฉ ุงููุฌูุฉ ูุชููู ูุฑุฆูุฉ ููุงู.  ูุนูู ุจุดูู ุฑุงุฆุน ูุน PostgreSQL 10. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13a/4aa/068/13a4aa06893b4ae9f1a1b7523c407b06.png"><br><br>  <b>ุงูุฌุฏุงูู ุงูุฎุงุฑุฌูุฉ ุ ุงูุชูุณูู ุงูุชุนุฑููู - ุงูุชูุณูู ุงูุชุนุฑููู ูุงูุฌุฏุงูู ุงูุฎุงุฑุฌูุฉ</b> .  ููููู ุฃู ุชุฃุฎุฐ ุนุฏุฉ PostgreSQL ูุฅูุดุงุก ูุฌููุนุงุช ูุชุนุฏุฏุฉ ูู ุงูุฌุฏุงูู ุงูุชู ุชุฎุฒู ูุทุงูุงุช ุงูุจูุงูุงุช ุงููุทููุจุฉ.  ูููู ุฃู ุชููู ูุฐู ุจูุงูุงุช ูุณูุฉ ูุญุฏุฏุฉ ุฃู ุจูุงูุงุช ุชู ุฌูุนูุง ุนุจุฑ ุฃู ูุทุงู. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/109/929/cb9/109929cb936d0c040651ad30c130258b.png"><br><br>  ุจุงุณุชุฎุฏุงู ุขููุฉ ุงูุฌุฏุงูู ุงูุฎุงุฑุฌูุฉ ุ ููููู ุฏูุฌ ูู ููุงุนุฏ ุงูุจูุงูุงุช ูุฐู ูู ุดูู ุฌุฏูู ููุณู ูู PostgreSQL ูููุตู.  ูุฏ ูุนูู ุงูุชุทุจูู ุจุงููุนู ูุน ูุฐุง ุงูุฌุฏูู ุงูููุณู ุ ููููู ูู ุงููุงูุน ุณูู ููุฑุฃ ุงูุจูุงูุงุช ูู ุงูุฃูุณุงู ุงูุจุนูุฏุฉ.  ุนูุฏูุง ุชููู ูุญุฏุงุช ุชุฎุฒูู ุงูุจูุงูุงุช ุฃูุซุฑ ูู ุฅููุงูุงุช ุฎุงุฏู ูุงุญุฏ ุ ูุฅู ูุฐุง ุฃูุฑ ูุชูุงุณู. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/446/d13/a39/446d13a394143b988ec04f60e645ea21.png"><br><br>  ูููู ุฏูุฌ ูู ูุฐุง ูู ูุดุฑ ุงูุชูุตููุงุช ุ ููุชูุตู ุฅูู ุทุจูููุฌูุง ูุณุฎ ูุชูุงุซู ูุฎุชููุฉ ูู PostgreSQL ุ ูููู ููู ูุนูู ูู ุดูุก ูููููุฉ ุฅุฏุงุฑุชู ูู ููุถูุน ุชูุฑูุฑ ูููุตู. <br><br><h3 style=";text-align:right;direction:rtl">  ูู ุฃูู ุชุจุฏุฃุ </h3><br>  ุงูุฎูุงุฑ ุงูุฃุณูู ูู <b>ูุน ุงููุณุฎ ุงููุชูุงุซู</b> .  ุงูุฎุทูุฉ ุงูุฃููู ูู ูุดุฑ ุงูุนุจุก ุนูู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ููุฐุง ูู ุ ูุงููุชุงุจุฉ ุฅูู ุงูุณูุฏ ุ ููุฑุงุกุฉ ูู ุงููุณุฎ ุงููุชูุงุซูุฉ.  ูุฐูู ูุญู ุฒูุงุฏุฉ ุญุฌู ุงูุญูู ูุชูููุฐ ุงููุฑุงุกุฉ ูู ุงููุนุงูุฌ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุณู ุงููุญูููู.  ุชุนูู ุงูุงุณุชุนูุงูุงุช ุงูุชุญููููุฉ ููุชุฑุฉ ุทูููุฉ ุ ููู ุชุญุชุงุฌ ุฅูู ูุณุฎุฉ ูุชูุงุซูุฉ ูููุตูุฉ ูุน ุฅุนุฏุงุฏุงุช ูููุตูุฉ ุจุญูุซ ูุง ูููู ุฃู ุชุชุฏุงุฎู ุงูุงุณุชุนูุงูุงุช ุงูุชุญููููุฉ ุงูุทูููุฉ ูุน ุงูุจุงูู. <br><br>  ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู <b>ุชุญููู ุงูุชูุงุฒู</b> .  ูุง ูุฒุงู ูุฏููุง ููุณ ุงูุณุทุฑ ูู ุงูุชูููู ุงูุฐู ูุนูู ุนููู ุงููุทูุฑ.  ุฅูู ูุญุชุงุฌ ุฅูู ููุงู ุญูุซ ุณููุชุจ ูููุฑุฃ.  ููุงู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ููุง. <br><br>  ุงููุซุงูู ูู ุชุทุจูู ุงูููุงุฒูุฉ <b>ุนูู ูุณุชูู ุงูุชุทุจูู</b> ุ ุนูุฏูุง ูุนุฑู ุงูุชุทุจูู ููุณู ูู ุฃูู ููุฑุฃ ุงูุจูุงูุงุช ุ ููุนุฑู ููููุฉ ุงุฎุชูุงุฑ ูุณุฎุฉ ูุชูุงุซูุฉ.  ุงูุชุฑุถ ุฃู ููุงู ุญุงุฌุฉ ุฏุงุฆููุง ุฅูู ุชุญุฏูุซ ุฑุตูุฏ ุงูุญุณุงุจ ููุญุชุงุฌ ุฅูู ูุฑุงุกุชู ูู ุงูุฑุฆูุณู ุ ููููู ูุฑุงุกุฉ ุตูุฑุฉ ุงูููุชุฌ ุฃู ุงููุนูููุงุช ุงููุชุนููุฉ ุจู ูุน ุจุนุถ ุงูุชุฃุฎูุฑ ููุชู ุฐูู ูู ูุณุฎุฉ ูุชูุงุซูุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุฑุฃูู ุ ููุณ <b>DNS Round Robin</b> ุชุทุจูููุง ููุงุฆููุง ููุบุงูุฉ ุ ูุฃูู ูุนูู ุฃุญูุงููุง ููุชุฑุฉ ุทูููุฉ ููุง ูุนุทู ุงูููุช ุงููุงุฒู ุนูุฏ ุชุจุฏูู ุฃุฏูุงุฑ ุงููุนุงูุฌ ุจูู ุงูุฎูุงุฏู ูู ุญุงูุงุช ุงููุดู. </li><li style=";text-align:right;direction:rtl">  ุฎูุงุฑ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงุณุชุฎุฏุงู <b>Keepalived ู HAProxy</b> .  ูุชู ุทุฑุญ ุนูุงููู ุงูุชุฑุงุถูุฉ ููุณูุฏ ููุฌููุนุฉ ุงููุณุฎ ุงููุชูุงุซูุฉ ุจูู ุฎูุงุฏู HAProxy ุ ููููู HAProxy ุจุงููุนู ุจููุงุฒูุฉ ุญุฑูุฉ ุงููุฑูุฑ. </li><li style=";text-align:right;direction:rtl">  <b>Patroni ุ DCS</b> ุจุงูุชุฒุงูู ูุน ุดูุก ูุซู ZooKeeper ุ ูุบูุฑูุง ุ ุงูููุตู - ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุ ูู ุฑุฃูู.  ุจูุนูู ุฃู ุงูุชุดุงู ุงูุฎุฏูุฉ ูู ุงููุณุคูู ุนู ุงููุนูููุงุช ุงูุชู ูู ุงูุฑุฆูุณูุฉ ุงูุขู ููู ูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ.  ูุฏูุฑ Patroni ูุฌููุนุฉ ูู PostgreSQL's ุ ููููุฐ ุงูุชุจุฏูู - ุฅุฐุง ุชู ุชุบููุฑ ุงููููู ุ ุณุชุธูุฑ ูุฐู ุงููุนูููุงุช ูู ุงูุชุดุงู ุงูุฎุฏูุฉ ุ ููููู ููุชุทุจููุงุช ุงูุชุดุงู ุงูุทุจูููุฌูุง ุงูุญุงููุฉ ุจุณุฑุนุฉ. </li></ul><br>  ูููุงู ูุฑูู ุฏูููุฉ ูู ุงููุณุฎ ุงููุชูุงุซู ุ ูุฃูุซุฑูุง ุดููุนูุง ูู <b>ุชุฃุฎุฑ ุงููุณุฎ ุงููุชูุงุซู</b> .  ููููู ุงูููุงู ุจุฐูู ูุซู GitLab ุ ูุนูุฏูุง ุชุชุฑุงูู ุงููุฌูุฉ ุ ูุง ุนููู ุณูู ุฅุณูุงุท ุงููุงุนุฏุฉ.  ููู ูุฏููุง ูุฑุงูุจุฉ ุดุงููุฉ - ูุญู ููุธุฑ ุฅูููุง ููุฑู ุงููุนุงููุงุช ุงูุทูููุฉ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/619/9a0/fae/6199a0fae7ed88fb1646e232cc1f2953.png"><br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุทุจููุงุช ูุงููุนุงููุงุช DBMS </h3><br>  ุจุดูู ุนุงู ุ ุชุคุฏู ุงููุนุงููุงุช ุงูุจุทูุฆุฉ ูุงูุฎุงููุฉ ุฅูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงูุฎูุงุถ ูู ุงูุฅูุชุงุฌูุฉ</b> - ููุณ ุฅูู ุชุดูุฌ ุญุงุฏ ุ ูููู ุนูู ูุญู ุณูุณ ุ <br></li><li style=";text-align:right;direction:rtl">  <b>ุงูุฃููุงู ูุงูุฌููุฏ</b> ุ ูุฃู ุงููุนุงููุงุช ุงูุทูููุฉ ุชูุณู ุจุงูุฃููุงู ูุชููุน ุงููุนุงููุงุช ุงูุฃุฎุฑู ูู ุงูุนูู ุ <br></li><li style=";text-align:right;direction:rtl">  <b>50 * ุฃุฎุทุงุก HTTP ุนูู ุงููุงุฌูุฉ ุงูุฎูููุฉ</b> ุฃู ุฃุฎุทุงุก ุงููุงุฌูุฉ ุฃู ุฃู ููุงู ุขุฎุฑ. <br></li></ul><br><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุธุฑูุฉ ุตุบูุฑุฉ ุญูู ููููุฉ ุธููุฑ ูุฐู ุงููุดุงูู ุ ูููุงุฐุง ุขููุฉ ุงููุนุงููุงุช ุงูุทูููุฉ ูุงูุฎุงููุฉ ุถุงุฑุฉ. <br><br>  PostgreSQL ูุฏูู MVCC - ูุณุจูุง ุ ูุญุฑู ูุงุนุฏุฉ ุจูุงูุงุช.  ุฅููุง ุชุชูุญ ููุนููุงุก ุงูุนูู ุนูู ูุญู ุชูุงูุณู ูุน ุงูุจูุงูุงุช ุฏูู ุงูุชุฏุงุฎู ูุน ุจุนุถูู ุงูุจุนุถ: ุงููุฑุงุก ูุง ูุชุนุงุฑุถูู ูุน ุงููุฑุงุก ุ ูุงููุชุงุจ ูุง ูุชุนุงุฑุถูู ูุน ุงููุชุงุจ.  ุจุงูุทุจุน ุ ููุงู ุจุนุถ ุงูุงุณุชุซูุงุกุงุช ุ ููููุง ูู ูุฐู ุงูุญุงูุฉ ููุณุช ูููุฉ. <br><br>  ุงุชุถุญ ุฃูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุตู ูุงุญุฏ ูููู ุฃู ูููู ููุงู ุนุฏุฉ ุฅุตุฏุงุฑุงุช ููุนุงููุงุช ูุฎุชููุฉ.  ูุชุตู ุงูุนููุงุก ุ ูุชููุฑ ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุทุงุช ูู ุงูุจูุงูุงุช ุ ูุฏุงุฎู ูุฐู ุงูููุทุงุช ุ ูุฏ ุชูุฌุฏ ุฅุตุฏุงุฑุงุช ูุฎุชููุฉ ูู ููุณ ุงูุณุทุฑ.  ููููุง ูุฐูู ุ ูู ุฏูุฑุฉ ุญูุงุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุชู ููู ุงููุนุงููุงุช ูุงุณุชุจุฏุงู ุจุนุถูุง ุงูุจุนุถ ุ ูุชุธูุฑ ุฅุตุฏุงุฑุงุช ุงูุตููู ุงูุชู ูุง ูุญุชุงุฌูุง ุฃุญุฏ. <br><br>  ูุฐูู ููุงู <b>ุญุงุฌุฉ ูุฌูุน ุงูููุงูุฉ - ูุฑุงุบ ุงูุณูุงุฑุงุช</b> .  ุชูุฌุฏ ูุนุงููุงุช ุทูููุฉ ูุชููุน ุงููุฑุงุบ ุงูุชููุงุฆู ูู ุชูุธูู ุฅุตุฏุงุฑุงุช ุงูุตู ุบูุฑ ุงูุถุฑูุฑูุฉ.  ุชุจุฏุฃ ูุฐู ุงูุจูุงูุงุช ุบูุฑ ุงููููุฉ ูู ุงูุชุฌูู ูู ุงูุฐุงูุฑุฉ ุฅูู ุงููุฑุต ููู ุงููุฑุต ุฅูู ุงูุฐุงูุฑุฉ.  ูุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช ุงูููููุฉ ุ ูุชู ุฅูุฏุงุฑ ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฐุงูุฑุฉ. <br><br><blockquote style=";text-align:right;direction:rtl">  ูููุง ุทุงูุช ุงููุนุงููุฉ ุ ุฒุงุฏ ุงูุฃุฏุงุก ุบูุฑ ุงููุงู ูุงูุฃุฏูู. </blockquote><br>  ูู ูุฌูุฉ ูุธุฑ "ูู ููุน ุงููููุ" ุ ุงูุชุทุจูู ูู ุงููุณุคูู ุนู ุธููุฑ ุงููุนุงููุงุช ุงูุทูููุฉ.  ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ ููุญุฏูุง ุ ููู ุชุคุฎุฐ ูุนุงููุงุช ุทูููุฉ ูุง ุชูุนู ุดูุฆูุง ูู ุฃู ููุงู.  ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ููุงู ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ ูุธููุฑ ุงููุนุงููุงุช ุงูุฎุงููุฉ. <br><br>  <b>"ุฏุนูุง ูุฐูุจ ุฅูู ูุตุฏุฑ ุฎุงุฑุฌู</b> . <b>"</b>  ููุชุญ ุงูุชุทุจูู ูุนุงููุฉ ุ ูููุนู ุดูุฆูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุซู ููุฑุฑ ุงูุงูุชูุงู ุฅูู ูุตุฏุฑ ุฎุงุฑุฌู ุ ุนูู ุณุจูู ุงููุซุงู ุ Memcached ุฃู Redis ุ ุนูู ุฃูู ุฃู ูุนูุฏ ุจุนุฏ ุฐูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููุชุงุจุนุฉ ุงูุนูู ูุฅุบูุงู ุงููุนุงููุฉ.  ูููู ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ูู ุงููุตุฏุฑ ุงูุฎุงุฑุฌู ุ ุชุนุทู ุงูุชุทุจูู ูุชุธู ุงููุนุงููุฉ ูุบููุฉ ุญุชู ููุงุญุธูุง ุดุฎุต ูุง ูููุชููุง. <br><br>  <b>ูุง ุฎุทุฃ ูุนุงูุฌุฉ</b> .  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฏ ูููู ููุงู ูุดููุฉ ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก.  ุนูุฏูุง ุ ูุฑุฉ ุฃุฎุฑู ุ ูุชุญ ุงูุชุทุจูู ูุนุงููุฉ ุ ูุญู ุจุนุถ ุงููุดุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุนุงุฏ ุฅูู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุฃุฏุงุก ุจุนุถ ุงููุธุงุฆู ูุงูุญุณุงุจุงุช ุ ูู ุฃุฌู ููุงุตูุฉ ุงูุนูู ูู ุงูุตููุฉ ูุฅุบูุงูู.  ุนูุฏูุง ุชูุช ููุงุทุนุฉ ุนูููุฉ ุงูุชุทุจูู ุจุณุจุจ ุฎุทุฃ ูุง ุ ุนุงุฏ ุงูุฑูุฒ ุฅูู ุจุฏุงูุฉ ุงูุฏูุฑุฉ ุ ูุจููุช ุงููุนุงููุฉ ูุบููุฉ ูุฑุฉ ุฃุฎุฑู. <br><br>  <b>ุงูุนุงูู ุงูุจุดุฑู</b> .  ุนูู ุณุจูู ุงููุซุงู ุ ูุนูู ูุณุคูู ุฃู ูุทูุฑ ุฃู ูุญูู ูู ุจุนุถ ุตูุญุงุช pgAdmin ุฃู ูู DBeaver - ูุชุญ ูุนุงููุฉ ุ ูููุนู ุดูุฆูุง ูููุง.  ุซู ุงูุตุฑู ุงูุดุฎุต ุ ูุงูุชูู ุฅูู ูููุฉ ุฃุฎุฑู ุ ุซู ุฅูู ุงููููุฉ ุงูุซุงูุซุฉ ุ ููุณู ุงููุนุงููุฉ ุ ูุบุงุฏุฑ ูุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน ุ ูุชุณุชูุฑ ุงูุตููุฉ ูู ุงูุชุนุทู.  ุฃุฏุงุก ูุงุนุฏุฉ ูุนุงูู. <br><br>  ุฏุนููุง ูุฑู ูุง ูุฌุจ ุงูููุงู ุจู ูู ูุฐู ุงูุญุงูุงุช. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏููุง ูุฑุงูุจุฉ ุ ูุจุงูุชุงูู ุ ูุญุชุงุฌ ุฅูู <b>ุชูุจููุงุช ูู ุงููุฑุงูุจุฉ</b> .  ุฃู ูุนุงููุฉ ูุนููุฉ ูุฃูุซุฑ ูู ุณุงุนุฉ ููุง ุชูุนู ุดูุฆูุง ูู ููุงุณุจุฉ ููุนุฑูุฉ ูู ุฃูู ุฌุงุกุช ูููู ุงูุฎุทุฃ. </li><li style=";text-align:right;direction:rtl">  ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู <b>ุฅุทูุงู ูุฐู ุงููุนุงููุงุช ูู ุฎูุงู ุงููููุฉ ูู ุงูุชุงุฌ</b> (pg_terminate_backend (pid)) ุฃู ุงูุชููุฆุฉ ูู ุชููุฆุฉ PostgreSQL.  ููุงู ุญุงุฌุฉ ุฅูู ุนุชุจุฉ 10-30 ุฏูููุฉ ุ ูุจุนุฏ ุฐูู ูุชู ุงูุงูุชูุงุก ูู ุงููุนุงููุงุช ุชููุงุฆูุง. </li><li style=";text-align:right;direction:rtl">  <b>ุฅุนุงุฏุฉ ุจูุงุก ุงูุชุทุจูู</b> .  ุจุงูุทุจุน ุ ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูู ุฃูู ุชุฃุชู ุงููุนุงููุงุช ุงูุฎุงููุฉ ุ ูููุงุฐุง ุชุญุฏุซ ูุชุฎูุต ูู ูุฐู ุงูุฃูุงูู. </li></ul><br><blockquote style=";text-align:right;direction:rtl">  ุชุฌูุจ ุงููุนุงููุงุช ุงูุทูููุฉ ุจุฃู ุซูู ุ ูุฃููุง ุชุคุซุฑ ุจุดูู ูุจูุฑ ุนูู ุฃุฏุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช. </blockquote><br>  ูุตุจุญ ูู ุดูุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุนูุฏูุง ุชุธูุฑ ุงูููุงู ุงููุนููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุชุญุชุงุฌ ุฅูู ุญุณุงุจ ุงููุญุฏุงุช ุจุนูุงูุฉ.  ููุญู ูุฃุชู ุฅูู ูุณุฃูุฉ ุจูุงุก ุงูุฏุฑุงุฌุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุจูุงุก ุงูุฏุฑุงุฌุงุช </h3><br>  ูุฑุญุฉ ุงูููุถูุน.  ูุญุชุงุฌ ุงูุนูู ุนูู ุฌุงูุจ ุงูุชุทุจูู ุฅูู ุฅุฌุฑุงุก ูุนุงูุฌุฉ ุฎูููุฉ ููุฃุญุฏุงุซ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุญุณุงุจ ุงููุฌุงููุน: ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู ููุชูุณุท โโุงููููุฉ ุ ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุฅูู ุงููุณุชุฎุฏููู ุ ูุฅุตุฏุงุฑ ุงูููุงุชูุฑ ููุนููุงุก ุ ูุฅุนุฏุงุฏ ุญุณุงุจ ูุณุชุฎุฏู ุจุนุฏ ุงูุชุณุฌูู ุฃู ุงูุชุณุฌูู ูู ุงูุฎุฏูุงุช ุงููุฌุงูุฑุฉ - ุชุฃุฎุฑ ุงููุนุงูุฌุฉ. <br><br>  ุฌููุฑ ูุฐู ุงูููุงู ูู ููุณู - ุชู ุชุฃุฌูููุง ูููุช ูุงุญู.  ุชุธูุฑ ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุชููู ููุท ุจุชูููุฐ ููุงุฆู ุงูุงูุชุธุงุฑ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef4/bfa/f20/ef4bfaf20634c6d43941c9c8325a09ff.png"><br><br>  ูู ูุง ููู ูุนุฑูู ุงููููุฉ ุ ููุช ุฅูุดุงุก ุงููููุฉ ุ ูุนูุฏูุง ูุชู ุชุญุฏูุซูุง ุ ูุงููุนุงูุฌ ุงูุฐู ุฃุฎุฐูุง ุ ูุนุฏุฏ ูุญุงููุงุช ุงูุฅููุงู.  ุฅุฐุง ูุงู ูุฏูู ุฌุฏูู ูุดุจู ูุฐุง ุงูุฌุฏูู ุนู ุจูุนุฏ ุ ุนูุฏุฆุฐ ูููู ูุฏูู <b>ุทูุงุจูุฑ ููุชูุจุฉ ุฐุงุชููุง</b> . <br><br>  ูู ูุฐุง ูุนูู ุจุดูู ุฌูุฏ ุญุชู ุชุธูุฑ ุงููุนุงููุงุช ุงูุทูููุฉ.  ุจุนุฏ ุฐูู ุ <b>ุชูุชูุฎ ุงูุฌุฏุงูู ุงูุชู ุชุนูู ูุน ููุงุฆู ุงูุงูุชุธุงุฑ</b> .  ุชุชู ุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉ ูู ูู ููุช ุ ูุชู ุญุฐู ุงููุธุงุฆู ุงููุฏููุฉ ุ ุชุญุฏุซ ุงูุชุญุฏูุซุงุช - ูุชู ุงูุญุตูู ุนูู ุฌุฏูู ูุน ุชุณุฌูู ููุซู.  ูุฌุจ ุชูุธููู ุจุงูุชุธุงู ูู ุงูุฅุตุฏุงุฑุงุช ุงููุฏููุฉ ูู ุงูุณูุงุณู ุจุญูุซ ูุง ูุนุงูู ุงูุฃุฏุงุก. <br><br>  <b>ูุฒุฏุงุฏ ููุช ุงููุนุงูุฌุฉ</b> - ุงูุตููุฉ ุงูุทูููุฉ ุชุญูู ููููุง ุนูู ุงูุฅุตุฏุงุฑุงุช ุงููุฏููุฉ ูู ุงูุตููู ุฃู ุชููุน ุงููุฑุงุบ ูู ุชูุธูููุง.  ุนูุฏูุง ูุฒุฏุงุฏ ุญุฌู ุงูุฌุฏูู ุ ูุฒุฏุงุฏ ุฃูุถูุง ููุช ุงููุนุงูุฌุฉ ุ ูุธุฑูุง ูุฃูู ุชุญุชุงุฌ ุฅูู ูุฑุงุกุฉ ุงูุนุฏูุฏ ูู ุงูุตูุญุงุช ุจุงูููุงูุฉ.  ูุฒูุฏ ุงูููุช ุ <b>ูุชุชููู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูู ูุฑุญูุฉ ูุง ุนู ุงูุนูู</b> . <br><br>  ูููุง ููู ูุซุงู ุนูู ุงูุฌุฒุก ุงูุนููู ูุฃุญุฏ ุนููุงุฆูุง ุงูุฐูู ูุฏููู ูุงุฆูุฉ ุงูุชุธุงุฑ.  ุฌููุน ุงูุทูุจุงุช ูุฑุชุจุทุฉ ููุท ุจูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/344/203/7ac/3442037ac837daec02ee89a83bd53dd7.png"><br><br>  ุงูุชุจู ุฅูู ููุช ุชูููุฐ ูุฐู ุงูุทูุจุงุช - ุฌููุนูุง ุนุฏุง ูุงุญุฏุฉ ุชุนูู ูุฃูุซุฑ ูู ุนุดุฑูู ุซุงููุฉ. <br><br>  ูุญู ูุฐู ุงููุดููุงุช ุ ุชู <b>ุงุฎุชุฑุงุน Skytools PgQ</b> ุ ูุฏูุฑ ูุงุฆูุฉ ุงูุชุธุงุฑ PostgreSQL ุ ููุฐ ูุชุฑุฉ ุทูููุฉ.  ูุง ุชูู ุจุฅุนุงุฏุฉ ุงุฎุชุฑุงุน ุฏุฑุงุฌุชู - ุฎุฐ PgQ ุ ููู ุจุฅุนุฏุงุฏู ูุฑุฉ ูุงุญุฏุฉ ููุณูุงู ุงูุฎุทูุท. <br><br>  ุตุญูุญ ุ ูุฏูู ุฃูุถุง ุงูููุฒุงุช.  Skytools PgQ ูุฏูู <b>ุงููููู ูู ุงููุซุงุฆู</b> .  ุจุนุฏ ูุฑุงุกุฉ ุงูุตูุญุฉ ุงูุฑุณููุฉ ุ ูุดุนุฑ ุงููุฑุก ุจุฃูู ูู ูููู ุดูุฆูุง.  ูููู ุงูุดุนูุฑ ุนูุฏ ูุญุงููุฉ ุงูููุงู ุจุดูุก ูุง.  ูู ุดูุก ูุนูู ุ ูููู <b>ููู ูุนูู ุบูุฑ ูุงุถุญ</b> .  ููุน ูู ุงูุณุญุฑ ุฌุฏู.  ูููู ูููู ุงูุนุซูุฑ ุนูู ุงููุซูุฑ ูู ุงููุนูููุงุช ูู <b>ุงูููุงุฆู ุงูุจุฑูุฏูุฉ</b> .  ูุฐุง ููุณ ุชูุณูููุง ููุงุณุจูุง ููุบุงูุฉ ุ ูููู ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููุซูุฑุฉ ููุงูุชูุงู ุ ูุณูุชุนูู ุนููู ูุฑุงุกุฉ ูุฐู ุงูุฃูุฑุงู. <br><br>  ุนูู ุงูุฑุบู ูู ุงูุณูุจูุงุช ุ ูุนูู Skytools PgQ ุนูู ูุจุฏุฃ "ุงูุฅุนุฏุงุฏ ูุงููุณูุงู".   ,    ,     ,    .   PgQ ,        .  PgQ ,      . <br><br><blockquote style=";text-align:right;direction:rtl">    ,   -     โ  ,   .     . </blockquote><br>              PgQ. ,    PostgreSQL, ,  ,   PgQ  .    ,   . <br><br><h3 style=";text-align:right;direction:rtl">  </h3><br>        ,          .   ,    , ,     - ,   , ,      . ,       ,       ,   alter. <br><br>     <b>auto-failover</b> โ       PostgreSQL  - ,       ,        .      ,    auto-failover. <br><br> <b>Split-brain</b> .    PostgreSQL     ,     ,  โ  .   ,   .   PostgreSQL     fencing,     Kubernets    .     -    ,         .   Split-brain. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/327/239/97e/32723997e13e8427e4cddc59ea7c964f.png"><br><br>           .  GitHub   Split-brain,       . <br><br> <b>Cascade failover</b> . ,     .  ,         . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea9/864/d63/ea9864d63b7cebd46ff8b185ddb5d639.png"><br><br>        ,       .    ,       . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81d/243/fc1/81d243fc1500011f0f3c24576f81786a.png"><br><br>         โ   failover. <br><br>      auto-failover,    . <br><br> <b>Bash </b> โ  ,      .   ,     ,   .   - ,   ,   .     . <br><br> <b>Ansible playbooks</b> โ bash-  .    ,   ,    . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>Patroni</b></a> โ   ,    ,      auto-failover,   ,       service discovery. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>PAF</b></a> โ <b>  Pacemaker</b> .     auto-failover  PostgreSQL,        Pacemaker. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>Stolon</b></a>     .  Kubernetes, . Stolon  Patroni,        . <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>    Docker  Kubernetes .    ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b99/aba/8c4/b99aba8c4f9c959cd96840bfcd3359b2.png"><br><br>        ,       . <i> ยซ      Kubernetes...ยป</i>    . <br><br> <b> โ   stateful</b> ,   - .  ุฅูู ุฃููุ      .   Open Source: CEPH, GlusterFS, LinStor DRBD.    ,       , ,     . <br><br>       โ <b>    </b> . ,      Kubernetes,     CEPH.         โ    .           ,       . <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <b>  </b> ,           . </li><li style=";text-align:right;direction:rtl"> <b>     latency</b> .  latency        โ    . </li><li style=";text-align:right;direction:rtl"> <b>   </b> . Kubernetes ,    - . ,    shared storage  Kubernetes,       .  -         . </li></ul><br>     ,    Kubernetes  Docker    staging  dev-     .    ,   , Kubernetes      . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b04/8dd/fd0/b048ddfd0b6212ef2d1eb49eda02386b.png"><br><br>    ,     <b>local volumes โ  </b>     , <b>streaming replication โ   </b> ,       <b>PostgreSQL-</b> ,       โ ,   .       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Zalando</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Crunchy</a> . <br><br>    ,     .    issues  pull requests.   ,     ,     . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br> <b>         SSD</b> โ          ,    . <br><br> <b>     </b> .   JSON  8  โ  ,   . <br><br> <b> </b> ,        .  PostgreSQL,   . <br><br> <b>  โ Postgres is ready</b> .          . PostgreSQL   ,        .    : <b>streaming replication; publications, subscriptions; foreign Tables; declarative partitioning</b> . <br><br> <b>    </b> .      ,    . <br><br>    -,      ,   โ <b>   </b> .    .    ,  Skytools PgQ! <br><br> <b>     Kubernetes,  local volumes, streaming replication  PostgreSQL </b> .     - ,   ,      . <br><br><blockquote style=";text-align:right;direction:rtl">               .     ,   24  25   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">HighLoad++ Siberia</a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>  ,    ,           .   38    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> โ     ! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar455248/">https://habr.com/ru/post/ar455248/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar455236/index.html">ููููุฏู ููุบู ุงูุดูุงุฏุงุช ุฏูู ุณุจุจ</a></li>
<li><a href="../ar455240/index.html">ุงุณุชุฎุฏุงู ูุนุฏู ุงูุฎูู ุงููุฑููุถ ูุชุญุณูู ุงูุฅุจูุงุบ ุนู ุงูุฃุฎุทุงุก</a></li>
<li><a href="../ar455242/index.html">ุขุฐุงู ุฃูู ุฃู ููู ูุง ุชูุณุฏ ุงูุตูุช ูู ุงููุนุจุฉ ูู ุงูุจุฏุงูุฉ</a></li>
<li><a href="../ar455244/index.html">ููููุฏู "ูุญุงู ุณูู" ูู ุงูุฅุตุฏุงุฑ ุงููุญุฏุซ (2019)</a></li>
<li><a href="../ar455246/index.html">ุงูุชุณุฌูู ูู ููู ุชุฌุฑุจุฉ ุงูุนููุงุก ูู ุณุงูุช ุจุทุฑุณุจุฑุบ ููุชูุญ ูู 20 ููููู</a></li>
<li><a href="../ar455250/index.html">ุงูุดุฎุต ุงูุฐู ูุงู ุจุฅุญูุงุก ุฏููู ููููู: ููุงุจูุฉ ูุน ุฑุงูุฏู ุจูุชุดููุฑุฏ ุ ุณุงุญุฑ ูู ุฌูุฑุจููุณ</a></li>
<li><a href="../ar455252/index.html">.NET: ุฃุฏูุงุช ููุนูู ูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงููุชุนุฏุฏุฉ ูุงูุชุฒุงูู - ุงูุฌุฒุก 1</a></li>
<li><a href="../ar455256/index.html">Habr Weekly # 4 / Computex ุ ููู ูููููุง ุฃู ูุจุชูุฑ Apple ุ Durov ูุชุถูุฑูู ุฌูุนูุง ุ ูุทุฉ BadComedian ุ ููุงุฐุง ุชุจุญุซ ุงูุดุจูุฉ ุงูุนุตุจูุฉ ุนู ุงูููุซููู ุนู ุงูุฏุนุงุฑู</a></li>
<li><a href="../ar455258/index.html">ุจุฏุฃ ุงูุชุตููุช ูุชูุงุฑูุฑ ูุณู Backend ูู ุฐูุฑู DevConfX ุ ูุงูุชู ุณุชุนูุฏ ูููู 21 ู 22 ููููู ูู ููุณูู</a></li>
<li><a href="../ar455260/index.html">ุดุฌุฑุฉ ููุฑูู: ุตุฏุฆ ูุณุฑูุน</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>