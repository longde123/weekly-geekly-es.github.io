<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦄 👨🏻‍🎓 🍑 Verwenden von Conditional im Frühjahr 👨‍🌾 💇🏼 👩🏽‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel möchte ich eine sehr nützliche und häufig verwendete Schnittstelle für bedingte Anmerkungen und Bedingungen beschreiben . 


 Der Fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verwenden von Conditional im Frühjahr</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462541/"><p>  In diesem Artikel möchte ich eine sehr nützliche und häufig verwendete Schnittstelle für <strong>bedingte</strong> Anmerkungen und <strong>Bedingungen beschreiben</strong> . </p><br><p> Der Frühlingskontext ist ein riesiger Behälter mit verschiedenen Bohnen, sowohl dem Frühling selbst als auch den benutzerdefinierten.  Sie möchten immer flexible Verwaltungstools für diesen Bin Zoo haben.  Die <strong>@ Bedingte Annotation</strong> wird gerade dafür erstellt. </p><a name="habracut"></a><br><p>  Die häufigste Methode zum Verwalten des Frühlingskontexts sind Profile.  Mit ihnen können Sie die Erstellung von Bohnen schnell und einfach steuern.  Manchmal ist jedoch eine genauere Abstimmung erforderlich. </p><br><p>  Während des Testens tritt beispielsweise ein Problem auf: Für einen Komponententest auf dem Computer des Entwicklers ist ein X-Typ-Bin für seine Arbeit erforderlich. Wenn derselbe Test auf dem Build-Server ausgeführt wird, ist ein Y-Bin und ein Z-Bin für die Produktion erforderlich. <strong>@Conditional</strong> bietet in diesem Fall eine einfache und einfache <strong>Möglichkeit</strong> die Entscheidung.  Genau wie so oft, wenn Sie in nicht synchronisierten Teams arbeiten, hat jemand keine Zeit, seine Überarbeitung fristgerecht abzuschließen, und Ihre Funktionalität ist bereits bereit.  Es ist notwendig, sich an diese Bedingungen anzupassen und das Verhalten zu ändern.  Fügen Sie also die Möglichkeit hinzu, den Anwendungskontext zu ändern, ohne ihn neu zu kompilieren, indem Sie beispielsweise nur einen Parameter in der Konfiguration ändern. </p><br><p>  Betrachten Sie diese Anmerkung genauer.  Über jedem Bin im Quellcode können wir <strong>@Conditional</strong> hinzufügen, und die Feder überprüft automatisch die in dieser Anmerkung angegebenen Bedingungen, wenn sie erstellt wird. </p><br><p>  In der offiziellen Dokumentation heißt es folgendermaßen: </p><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>(value={TYPE,METHOD}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(value=RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@Documented</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Conditional</code> </pre> <br><p>  Gleichzeitig müssen Sie eine Reihe von Bedingungen darin übertragen: </p><br><pre> <code class="java hljs">Class&lt;? extends Condition&gt;[]</code> </pre> <br><p>  Wobei bedingt die funktionale Schnittstelle ist, die die Methode enthält </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matches</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span></span></span></code> </pre> <br><p>  Lassen Sie uns anhand eines lebenden Beispiels überprüfen, wie es in der Praxis funktioniert.  Unsere Anwendung verfügt über Schnittstellen sowohl in Form von Seifen- / Rest-Services als auch in Form von JMS.  Die Administratoren hatten jedoch keine Zeit, die entsprechende Infrastruktur rechtzeitig vorzubereiten - wir können JMS nicht verwenden. <br>  In unserem Projekt gibt es eine Java-Konfiguration für JMS: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JmsConfig</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre> <br><p>  <strong>Spring</strong> findet diese Konfiguration und beginnt mit der Initialisierung.  Als nächstes werden alle anderen abhängigen Beans aufgerufen, z. B. aus der Warteschlange.  Um die Erstellung dieser Konfiguration zu deaktivieren, verwenden wir die Annotation " <strong>Bedingte</strong> Ableitung" <strong>- "ConditioanalOnProperty"</strong> </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ConditionalOnProperty</span></span>( value=<span class="hljs-string"><span class="hljs-string">"project.mq.enabled"</span></span>, matchIfMissing = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JmsConfig</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre> <br><p>  Hier teilen wir dem Builder den Kontext mit, dass wir diese Konfiguration nur erstellen, wenn die Einstellungsdatei einen positiven Wert der Konstante <strong>project.mq.enabled</strong> enthält. <br>  Fahren wir nun mit den abhängigen Beans fort und markieren Sie sie mit der Annotation <strong>ConditioanalOnBean</strong> , die verhindert, dass der Frühling Beans erstellt, die von unserer Konfiguration abhängig sind. </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ConditionalOnBean</span></span>(JmsConfig.class) <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JmsConsumer</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre> <br><p>  Mit einem einzigen Parameter können wir daher die Komponenten der Anwendung deaktivieren, die wir nicht benötigen, und sie dann durch Ändern der Konfiguration zum Kontext hinzufügen. </p><br><p>  Zusammen mit dem Framework gibt es eine große Anzahl vorgefertigter Anmerkungen, die 99% der Anforderungen des Entwicklers abdecken (die später in diesem Artikel beschrieben werden).  Aber was ist, wenn Sie mit einer bestimmten Situation umgehen müssen?  Zu diesem Zweck können Sie der Feder Ihre eigene benutzerdefinierte Logik hinzufügen. </p><br><p>  Angenommen, wir haben einen Bean - <strong>SuperDBLogger</strong> , den wir nur erstellen möchten, wenn über einem unserer <strong>Bins</strong> eine <strong>@ Loggable-</strong> Annotation vorhanden ist.  Wie es im Code aussehen wird: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ConditionalOnLoggableAnnotation</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SuperDBLogger</span></span></span><span class="hljs-class"> …</span></span></code> </pre> <br><p>  Überlegen Sie, wie die Annotation <strong>@ConditionalOnLoggableAnnotation funktioniert</strong> : </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({ ElementType.TYPE, ElementType.METHOD }) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@Conditional</span></span>(OnLoggableAnnotation.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> ConditionalOnLoggableAnnotation { }</code> </pre> <br><p>  Wir brauchen keine weiteren Parameter, jetzt gehen wir zur Logik selbst über - dem Inhalt der <strong>OnLoggableAnnotation-</strong> Klasse.  Darin definieren wir die <strong>Übereinstimmungsmethode</strong> neu, bei der wir die Suche nach markierten Beans in unserem Paket implementieren. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnLoggableAnnotation</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Condition</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matches</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span></span><span class="hljs-function"> </span></span>{ ClassPathScanner scanner = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathScanner(); scanner.addIncludeFilter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnnotationTypeFilter(Loggable.class)); Set&lt;BeanDefinition&gt; bd = scanner.findInPackage(<span class="hljs-string"><span class="hljs-string">"ru.habr.mybeans"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!bd.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre> <br><p>  Daher haben wir eine Regel erstellt, nach der <strong>Spring</strong> jetzt <strong>SuperDBLogger</strong> erstellt.  Für SpringBoot-Anhänger haben die Ersteller des Frameworks <strong>SpringBootCondition erstellt</strong> , den Nachfolger von <strong>Condition</strong> .  Es unterscheidet sich in der Signatur der neu definierten Methode: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> ConditionOutcome </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMatchOutcome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span></span></span>;</code> </pre> <br><p>  Das heißt, zusätzlich zur Antwort benötigen wir einen Papierkorb oder nicht. Sie können eine Nachricht hinzufügen, die dann in den Frühlingsprotokollen angezeigt wird, um zu verstehen, warum der Papierkorb erstellt wurde oder nicht. </p><br><p>  Um komplexere Bedingungen zu erstellen, können verschiedene Bedingungen kombiniert werden. Diese Mechanismen stellen die Klassen <strong>AnyNestedCondition, AllNestedConditions und NoneNestedConditions bereit</strong> .  Angenommen, wir möchten zwei Bedingungen erstellen, damit bei Ausführung einer davon unsere Bean erstellt wird.  Erstellen Sie dazu Ihre eigene Klasse und erben Sie sie von <strong>AnyNestedCondition</strong> . </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnnotationAndPropertyCondition</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyNestedCondition</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AnnotationAndPropertyCondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(REGISTER_BEAN); } <span class="hljs-meta"><span class="hljs-meta">@ConditionalOnProperty</span></span>(value = <span class="hljs-string"><span class="hljs-string">"db.superLogger"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Condition1</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@ConditionalOnLoggableAnnotation</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Condition2</span></span></span><span class="hljs-class"> </span></span>{} }</code> </pre> <br><p>  Die Klasse muss nicht zusätzlich mit Anmerkungen versehen werden, die Feder selbst findet sie und verarbeitet sie korrekt.  Der Benutzer muss nur angeben, in welcher Phase der Konfiguration die Bedingungen erfüllt sind: <strong><em>ConfigurationPhase</em> .REGISTER_BEAN</strong> - beim Erstellen regulärer Beans, <strong><em>ConfigurationPhase</em> .PARSE_CONFIGURATION</strong> - beim Arbeiten mit Konfigurationen ( <strong>dh</strong> für mit <strong>@ Configuration</strong> Annotation gekennzeichnete <strong>Bins</strong> ). </p><br><p>  In ähnlicher Weise überwacht für die Klassen <strong>AllNestedConditions</strong> und <strong>NoneNestedConditions</strong> die erste alle Bedingungen und die zweite stellt sicher, dass keine Bedingungen erfüllt sind. </p><br><p>  Um mehrere Bedingungen zu überprüfen, können Sie auch mehrere Klassen mit Bedingungen an <strong>@Conditional übergeben</strong> .  Zum Beispiel <strong>@Conditional ({OnLoggableAnnotation.class, AnnotationAndPropertyCondition.class})</strong> .  Beide müssen <strong>true zurückgeben,</strong> damit die Bedingung erfüllt ist und die Bean erstellt wird. </p><br><p>  Wie oben erwähnt, gibt es bereits viele vorgefertigte Lösungen mit Feder, die in der folgenden Tabelle dargestellt sind. </p><br><div class="scrollable-table"><table><thead><tr><th>  Anmerkung </th><th>  Beschreibung </th></tr></thead><tbody><tr><td>  ConditionalOnBean </td><td>  Die Bedingung ist erfüllt, wenn die gewünschte Bean in BeanFactory vorhanden ist. </td></tr><tr><td>  ConditionalOnClass </td><td>  Die Bedingung ist erfüllt, wenn sich die erforderliche Klasse im Klassenpfad befindet. </td></tr><tr><td>  ConditionalOnCloudPlatform </td><td>  Die Bedingung ist erfüllt, wenn eine bestimmte Plattform aktiv ist. </td></tr><tr><td>  ConditionalOnExpression </td><td>  Die Bedingung ist wahr, wenn der SpEL-Ausdruck einen positiven Wert zurückgibt. </td></tr><tr><td>  ConditionalOnJava </td><td>  Die Bedingung ist erfüllt, wenn die Anwendung mit einer bestimmten Version der JVM gestartet wird. </td></tr><tr><td>  ConditionalOnJndi </td><td>  Die Bedingung ist nur erfüllt, wenn eine bestimmte Ressource über JNDI verfügbar ist. </td></tr><tr><td>  ConditionalOnMissingBean </td><td>  Die Bedingung ist erfüllt, wenn die gewünschte Bean in BeanFactory fehlt. </td></tr><tr><td>  ConditionalOnMissingClass </td><td>  Die Bedingung ist wahr, wenn sich die erforderliche Klasse nicht im Klassenpfad befindet. </td></tr><tr><td>  ConditionalOnNotWebApplication </td><td>  Die Bedingung ist erfüllt, wenn der Anwendungskontext kein Webkontext ist. </td></tr><tr><td>  ConditionalOnProperty </td><td>  Die Bedingung ist erfüllt, wenn die erforderlichen Parameter in der Einstellungsdatei angegeben sind. </td></tr><tr><td>  ConditionalOnResource </td><td>  Die Bedingung ist erfüllt, wenn die gewünschte Ressource im Klassenpfad vorhanden ist. </td></tr><tr><td>  ConditionalOnSingleCandidate </td><td>  Die Bedingung ist erfüllt, wenn die Bean der angegebenen Klasse bereits in der BeanFactory enthalten ist und die einzige ist. </td></tr><tr><td>  ConditionalOnWebApplication </td><td>  Die Bedingung ist erfüllt, wenn der Anwendungskontext ein Webkontext ist. </td></tr></tbody></table></div><br><p>  Alle können zusammen auf eine Definition einer Bohne angewendet werden. </p><br><p>  Daher ist <strong>@Conditional</strong> ein ziemlich leistungsfähiges <strong>Kontextkonfigurationstool</strong> , das Anwendungen noch flexibler macht.  Es ist jedoch zu berücksichtigen, dass Sie diese Anmerkung sorgfältig verwenden müssen, da das Verhalten des Kontexts nicht so offensichtlich wird wie bei der Verwendung von Profilen. Bei einer großen Anzahl konfigurierter Bins können Sie schnell verwirrt werden.  Es ist ratsam, die Anwendung in Ihrem Projekt sorgfältig zu dokumentieren und zu protokollieren, da sonst die Codeunterstützung zu Schwierigkeiten führt. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de462541/">https://habr.com/ru/post/de462541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de462527/index.html">Wie ein neuronales SincNet-Netzwerk durch Rückausbreitung signifikante Schallfrequenzen zuweist</a></li>
<li><a href="../de462529/index.html">Die Idee der NASA-Mondstation ist schlecht und gut</a></li>
<li><a href="../de462533/index.html">IntelliJ IDEA 2019.2: Java 13 Preview-Unterstützung, Profiling-Tools, ein neues Service-Fenster und vieles mehr</a></li>
<li><a href="../de462537/index.html">Cloud-Migration</a></li>
<li><a href="../de462539/index.html">Trigonometrie vermeiden</a></li>
<li><a href="../de462543/index.html">Java-Treffen bei der Raiffeisenbank</a></li>
<li><a href="../de462545/index.html">Telegrammblockierung, Hetzner Subnetz / 16, Erfahrung mit ILV</a></li>
<li><a href="../de462547/index.html">SGX Malvar: Wie Bösewichte die neue Technologie von Intel für die falschen Zwecke nutzen</a></li>
<li><a href="../de462549/index.html">Quorum Blockchain: Integration in Java-Code</a></li>
<li><a href="../de462551/index.html">Beliebte Entwicklerfragen zum Testen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>