<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò¨ üñêüèª ‚¨úÔ∏è HL 2018. R√©sum√© du rapport ¬´Rendez les mots de passe g√©niaux √† nouveau! Comment vaincre la force brute et ne rien laisser aux pirates ¬ª üë©üèø‚Äçü§ù‚Äçüë®üèæ ‚úîÔ∏è üë©üèª‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je m'appelle Akhmadeev Rinat, je suis Sr. D√©veloppeur PHP. 


 Je vous pr√©sente le r√©sum√© du rapport Rendez les mots de passe g√©niaux √†...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HL 2018. R√©sum√© du rapport ¬´Rendez les mots de passe g√©niaux √† nouveau! Comment vaincre la force brute et ne rien laisser aux pirates ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434708/"><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt="Les mots de passe sont comme des sous-v√™tements"></p><br><p>  Bonjour, Habr!  Je m'appelle Akhmadeev Rinat, je suis Sr.  D√©veloppeur PHP. </p><br><p>  Je vous pr√©sente le r√©sum√© du rapport <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rendez les mots de passe g√©niaux √† nouveau!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment vaincre bruteforce et laisser les pirates avec rien</a> d'Alexey Ermishkin de Virgil Security avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HighLoad ++ 2018</a> . </p><br><p>  Quand je suis all√© au rapport, j'√©tais pessimiste.  Mais depuis  Puisque c'est Virgil Security, j'ai quand m√™me d√©cid√© d'y aller.  Au d√©but, le rapport semblait vraiment du capitaine, et j'ai m√™me commenc√© √† perdre tout int√©r√™t, mais ensuite, comme il s'est av√©r√©, j'ai m√™me d√©couvert plusieurs nouvelles approches de protection par mot de passe qui sont diff√©rentes du hachage de sel habituel. </p><br><p>  Le rapport examine les moyens de prot√©ger les mots de passe des hachages vers des approches plus modernes, telles que le mot de passe Facebook, Oignon, Sphinx et Pythia.  √Ä la toute fin, les nouveaux services de chiffrement renforc√© par mot de passe (PHE) sont introduits. </p><br><p>  J'ai tellement aim√© le rapport que j'ai pr√©par√© un recueil.  Je recommande √† chacun de se familiariser. </p><a name="habracut"></a><br><p>  Alexey Ermishkin a partag√© les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diapositives</a> et le rapport vid√©o dans les commentaires: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/y1MQyl13ssc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="konspekt">  R√©sum√© </h2><br><h3 id="vstuplenie">  Entr√©e </h3><br><p><img src="https://habrastorage.org/webt/wd/sg/tu/wdsgtu8tz1yjoswesm2sjy7gs0k.png" alt="Slide 0. Rendez les mots de passe superbes"></p><br><p>  Bonjour √† tous, bonjour √† tous!  Je suis heureux de vous voir tous √† la Conf√©rence Highload.  Je m'appelle Alexey Ermishkin, je travaille pour Virgil Security. </p><br><p><img src="https://habrastorage.org/webt/p_/dm/2o/p_dm2o99hyouir1mw0qn1nq_k0s.png" alt="Virgilsecurity"></p><br><p>  Nous sommes engag√©s dans le d√©veloppement de divers produits cryptographiques pour les d√©veloppeurs individuels et les entreprises.  Nous nous concentrons sur des solutions de bout en bout, c'est lorsque vous n'avez pas besoin de faire confiance au service pour effectuer des actions telles que le transfert de donn√©es, l'authentification, etc.  Nos SDK sont ouverts et accessibles √† tous. </p><br><p><img src="https://habrastorage.org/webt/mt/_q/ey/mt_qeyv-o-f8tcltewqjz5bdxze.png" alt="Diapositive 7. Performance, commodit√©, s√©curit√©"></p><br><p>  Les mots de passe sont depuis longtemps utilis√©s comme moyen d'authentification, comme moyen de se rendre quelque part.  C'√©tait bien avant l'apparition des ordinateurs.  Mais avec l'av√®nement des ordinateurs, avec l'av√®nement des syst√®mes informatiques, les gens n'ont pas abandonn√© l'habitude d'utiliser des mots de passe.  Cela est devenu un tr√®s gros probl√®me pour les d√©veloppeurs, car ils se sont heurt√©s √† la difficult√© de rendre les syst√®mes √† la fois pratiques, rapides et s√©curis√©s.  Tr√®s souvent, lorsque deux de ces aspects essaient de bien faire, le troisi√®me ne fonctionne pas tr√®s bien.  Si vous rendez le syst√®me productif et s√©curis√©, cela peut √™tre g√™nant, etc. </p><br><p><img src="https://habrastorage.org/webt/yf/vy/8n/yfvy8nslfegffzdm8ldboycqpvc.png" alt="Diapositive 8. De quoi nous prot√©geons-nous?"></p><br><p>  Alors, de quoi allons-nous parler aujourd'hui? </p><br><p>  Je vais parler de la protection contre les attaques hors ligne.  Lorsque des mots de passe entrent dans vos bases de donn√©es, l'utilisateur ne les contr√¥le pas.  Si votre base de donn√©es est pirat√©e, elle fuit quelque part, puis les pirates peuvent tout faire avec.  M√™me si vous avez en quelque sorte prot√©g√© les mots de passe, ils peuvent commencer √† les trier et ils n'ont besoin d'interagir avec personne pour cela, ils ont d√©j√† tout pour cela.  De plus, les utilisateurs n'arr√™tent pas d'utiliser des mots de passe faibles.  Les politiques de mot de passe sont bien s√ªr utiles, mais pas toujours pratiques, c'est-√†-dire  m√™me lorsque les gens entrent, cela semble √™tre un mot de passe fort, la politique dit toujours que vous devez ajouter une lettre ou un chiffre, alors pour eux, ce n'est pas pratique.  Il est √©galement √©vident que le probl√®me est la n√©cessit√© de comparer ce que l'utilisateur a entr√© avec ce que vous avez dans la base de donn√©es.  Comment le faire en toute s√©curit√©?  Eh bien, n'oublions pas qu'√† l'int√©rieur de l'entreprise, il y a aussi des gens qui ne sont pas compl√®tement sympathiques et qui voudraient aussi s'en prot√©ger. </p><br><h3 id="heshi">  Hashs </h3><br><p><img src="https://habrastorage.org/webt/-w/aj/lj/-wajlj6zqzv9v52a1tm-jyykii0.png" alt="Slide 9. Quel est le probl√®me avec les mots de passe?"></p><br><p>  En principe, pourquoi les mots de passe sont-ils un sujet si douloureux, pourquoi vaut-il la peine de travailler avec eux plus soigneusement?  Le probl√®me est que le mot de passe a une petite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">entropie</a> .  Qu'est-ce que l'entropie?  Il s'agit de la quantit√© d'informations contenues dans les donn√©es, c'est-√†-dire  par exemple, dans le mot Highload, 8 lettres correspondent √† 8 octets, mais si l'on compte l'entropie, ce ne sera pas 64 bits comme le mot entier, mais moins de 30 bits.  Aujourd'hui, quand ils parlent de briser le mot de passe, ils disent qu'il est possible de casser des mots de passe avec entropie en un tel temps ni plus ni moins que de bits.  C'est-√†-dire  m√™me le nombre m√™me de mots de passe n'est pas pris en compte. </p><br><p><img src="https://habrastorage.org/webt/2u/ry/lh/2urylhxlc1vap1pdvcq8wqubgai.png" alt="Diapositive 10.1. Hashs"></p><br><p>  Comment les gens ont-ils commenc√© √† utiliser la s√©curit√© par mot de passe?  La premi√®re chose qui m'est venue √† l'esprit √©tait d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des hachages cryptographiques</a> unidirectionnels. </p><br><p><img src="https://habrastorage.org/webt/ny/ng/3e/nyng3eb-ukqoj_siqeyekl-m6ys.png" alt="Diapositive 10.2. Hashs"></p><br><p>  Leur caract√©ristique remarquable est qu'ils ne peuvent pas √™tre refus√©s.  C'est-√†-dire  Si vous avez transf√©r√© des informations sur ce hachage, re√ßu une valeur en sortie, vous ne pouvez pas r√©cup√©rer ces informations √† partir de cette valeur.  Mais, malheureusement, ils sont calcul√©s tr√®s rapidement.  Par exemple, un cluster moderne de 4 cartes graphiques NVidia peut traiter plusieurs milliards de mots de passe par seconde.  C'est-√†-dire  si l'entropie de votre mot de passe est inf√©rieure √† 40 bits, un cluster de 4 cartes vid√©o le r√©cup√©rera en une minute, voire moins. </p><br><h3 id="raduzhnye-tablicy">  Tables arc-en-ciel </h3><br><p><img src="https://habrastorage.org/webt/rw/bd/ku/rwbdku7uc7nlyovcvlp7fh19zbk.png" alt="Diapositive 11.1. Tables arc-en-ciel"></p><br><p>  De plus, chaque hachage d√©licat a sa propre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">table arc-en-ciel</a> .  Quelle est cette table et comment sont-elles fabriqu√©es? </p><br><p><img src="https://habrastorage.org/webt/m_/sj/yy/m_sjyylroq0g4wcqjj8stum8yq4.png" alt="Diapositive 11.2. Tables arc-en-ciel"></p><br><p>  C'est-√†-dire  ils prennent les mots de passe et les combinaisons de caract√®res les plus populaires qui peuvent tenir sur le disque dur, consid√®rent les hachages pour eux et les mettent sur un peu plus de stockage pour plusieurs t√©raoctets.  Lorsqu'il existe une sorte de hachage, vous ne pouvez pas le calculer, mais trouvez-le tr√®s rapidement √† partir de ces tableaux et comparez-le avec le mot de passe qui a √©t√© calcul√© pr√©c√©demment.  C'est-√†-dire  Les avantages des tables sont qu'elles fonctionnent tr√®s rapidement, mais vous avez besoin de beaucoup d'espace pour les stocker.  N√©anmoins, il existe des tableaux pour les hachages les plus populaires sur Internet, ils peuvent √™tre t√©l√©charg√©s, voire achet√©s. </p><br><p>  <em>Note de l'auteur du synopsis: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> n'est pas d'accord avec le locuteur: "Rainbow table est une version sp√©ciale des tables de recherche pour inverser les fonctions de hachage cryptographiques en utilisant le m√©canisme d'un compromis raisonnable entre le temps de recherche dans la table et la m√©moire occup√©e."</em>  <em>C'est-√†-dire</em>  <em>il ne stocke pas les hachages des mots de passe les plus populaires qui tiendront sur le disque, mais simplement les hachages de certains mots de passe, le reste est calcul√© sur la base de ceux qui existent - il y a plusieurs mots de passe par enregistrement dans le tableau.</em> </p><br><h3 id="sol">  Du sel </h3><br><p><img src="https://habrastorage.org/webt/nx/cx/l3/nxcxl3ijlwytnvaumlbt9zlnjdo.png" alt="Diapositive 12.1. Du sel"></p><br><p>  Mais l√† encore, chaque table arc-en-ciel a son propre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sel</a> .  Qu'est-ce que le sel?  Il s'agit d'un ensemble al√©atoire d'octets, qui est ajout√© au mot de passe.  Il est stock√© dans une table quelque part pr√®s du hachage et prot√®ge des tables arc-en-ciel. </p><br><p><img src="https://habrastorage.org/webt/xl/z1/_j/xlz1_j7oasnp6wpvijtlbmpw5n8.png" alt="Diapositive 12.2. Du sel"></p><br><p>  C'est-√†-dire  les personnes qui mettent la main sur une base avec des hachages sal√©s devront toujours calculer ces hachages.  Mais le probl√®me est que ces hachages sont calcul√©s tr√®s rapidement et le sel n'aide pas beaucoup ici. </p><br><h3 id="kak-zamedlit-perebor">  Comment ralentir la recherche? </h3><br><p><img src="https://habrastorage.org/webt/tb/vh/of/tbvhoftqtm7hlvgibwwvafv9cl4.png" alt="Diapositive 13.1. Comment ralentir la recherche?"></p><br><p>  Une solution naturelle pourrait √™tre de ralentir le tri du hachage d'une mani√®re ou d'une autre.  Comment cela peut-il se faire? </p><br><p><img src="https://habrastorage.org/webt/6j/9c/x0/6j9cx0nof6w-dzgbc3b6nx5qw-8.png" alt="Diapositive 13.2. Comment ralentir la recherche?"></p><br><p>  L'approche la plus na√Øve consiste √† prendre une sorte de fonction de hachage, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sha256,</a> et √† la calculer de mani√®re it√©rative, c'est-√†-dire  calculer le hachage, √† partir de ce hachage, le hachage √† nouveau, etc.  Vous pouvez le faire plusieurs milliers voire plusieurs millions de fois.  Le probl√®me est que si vous √©crivez une telle impl√©mentation vous-m√™me, elle sera tr√®s probablement plus lente que l'impl√©mentation de personnes professionnellement impliqu√©es dans la recherche de mots de passe. </p><br><p><img src="https://habrastorage.org/webt/nj/f3/hr/njf3hrodtzqbbu5w3purv-vsm6u.png" alt="Diapositive 14. Fonctions de hachage de mot de passe"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SCrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bcrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Argon2</a> </p><br><p>  Et par cons√©quent, les cryptographes ont propos√© plusieurs fonctions sp√©cialement con√ßues pour ralentir la recherche de mot de passe - ils utilisent une grande quantit√© de m√©moire et toutes les instructions de processeur modernes possibles.  Si le mot de passe prot√©g√© par une telle fonction tombe entre les mains des attaquants, ils devront alors utiliser du mat√©riel tr√®s puissant. </p><br><p><img src="https://habrastorage.org/webt/-e/ed/gw/-eedgw4f2c-6q3khy9pywdotzwa.png" alt="Diapositive 15. Argon2"></p><br><p>  Par exemple, la fonction <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Argon2</a> la plus moderne fonctionne comme suit: dans le diagramme, vous pouvez voir qu'il y a beaucoup de blocs de m√©moire diff√©rents √† travers lesquels le hachage est ex√©cut√©.  Il le fait de diff√©rentes mani√®res aller-retour, la m√©moire est utilis√©e de mani√®re tr√®s intensive, toute la m√©moire est utilis√©e.  Il est assez difficile d'optimiser une telle fonction (vitesse de recherche). </p><br><p><img src="https://habrastorage.org/webt/eu/gn/u2/eugnu2x_t3tsbyfzqmyesuwlmse.png" alt="Diapositive 16. Fonctions de hachage de mot de passe"></p><br><p>  Mais ces approches ont aussi leurs inconv√©nients.  Ces fonctions sont ralenties sp√©cialement, mais elles sont sp√©cialement lentes non seulement pour les attaquants, elles le seront √©galement sp√©cialement pour vous.  Ils chargeront votre fer.  Ces fonctions sont personnalisables, c'est-√†-dire  vous pouvez choisir la quantit√© de m√©moire qui sera utilis√©e pour calculer le hachage d'un mot de passe unique, jusqu'√† plusieurs gigaoctets, combien de passages sur cette m√©moire.  Si vous r√©glez ces param√®tres tr√®s s√©rieusement, votre propre mat√©riel en souffrira et si beaucoup de personnes se connectent au syst√®me, il vous suffit d'allouer des ressources assez importantes pour la protection par mot de passe et les mots de passe simples, eh bien, des mots de passe tr√®s simples peuvent toujours √™tre r√©cup√©r√©s . </p><br><h3 id="facebooks-password-onion">  Mot de passe de Facebook Oignon </h3><br><p><img src="https://habrastorage.org/webt/jg/ij/6k/jgij6ksfudwqixuwbidyqos8g_y.png" alt="Slide 17. Et ne pouvez-vous pas charger le backend?"></p><br><p>  Les gens y ont r√©fl√©chi et ont pos√© la question: est-il possible d'obtenir les m√™mes propri√©t√©s sans charger le backend, sans charger leurs propres serveurs? </p><br><p><img src="https://habrastorage.org/webt/3t/bt/i5/3tbti5mfy7-5smkvkfpkzyw8cq0.png" alt="Slide 18. Mot de passe de Facebook Oignon"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Facebook a √©t√© l'</a> un des pionniers dans ce domaine.  Ces lignes que vous voyez sont les √©tapes historiques de Facebook, comment elles prot√©geaient les mots de passe, au d√©but ce n'√©taient que des mots de passe, puis elles ont pris l'ancienne fonction <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">md5</a> , qui a √©t√© fissur√©e pendant longtemps, puis elles y ont ajout√© du sel et ont pris le hash <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sha1</a> , et puis c'est arriv√© chose int√©ressante, ils ont apport√© le calcul de la fonction <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hmac</a> (c'est un hachage avec une cl√©) au service distant. </p><br><p><img src="https://habrastorage.org/webt/at/hg/59/athg59eofneynp9pmmn1ffzdbg8.png" alt="Diapositive 19. Facebook"></p><br><p>  Comment √ßa marche?  Il y a un backend, il y a un service √† distance.  Il existe une sorte de cl√© secr√®te sur ce service.  Une personne entre dans le backend, entre son mot de passe.  Ce mot de passe est m√©lang√© avec le sel qui se trouve dans la base de donn√©es, ex√©cut√© via un hachage et envoy√© au service.  Le service prend sa cl√© priv√©e, calcule la fonction hmac et la renvoie enti√®rement.  Sur le backend, il est plac√© dans la base. </p><br><p><img src="https://habrastorage.org/webt/nj/hw/ac/njhwackeuo-kschvhkkvaxstmky.png" alt="Diapositive 20. Facebook"></p><br><p>  Qu'est-ce que √ßa donne?  Si Facebook a une base de donn√©es d'utilisateurs, cela ne vaut pas la peine d'y trier les mots de passe, car ils n'ont pas de cl√© secr√®te distante.  Mais le probl√®me avec l'approche de Facebook est que si quelque chose arrive √† leur cl√© priv√©e distante, ils auront de gros probl√®mes.  Ils ne peuvent rien y faire car ils utilisent des hachages, ils utilisent hmac.  Ils n'ont aucun moyen de r√©soudre cette situation de mani√®re √† ce que les utilisateurs ne remarquent rien et cela se retrouvera dans un coin. </p><br><h3 id="sphinx">  Sphinx </h3><br><p><img src="https://habrastorage.org/webt/_t/kq/nd/_tkqnduhchzryj-sgjt-kqytyo0.png" alt="Diapo 21. Est-ce mieux?"></p><br><p>  Les cryptographes ont regard√© le tout.  Ils ont aim√© l'id√©e d'utiliser des services √† distance et ont d√©cid√© de r√©fl√©chir: est-il possible de faire encore mieux?  Est-il possible de cr√©er un syst√®me similaire, mais sans les inconv√©nients dont Facebook l'a dot√©? </p><br><p><img src="https://habrastorage.org/webt/hh/04/o5/hh04o5poadnr-d4diswhuaferuq.png" alt="Diapositive 22. Le mot de passe est-il un nombre?"></p><br><p> Et ils ont d√©cid√© d'aborder ce probl√®me comme suit: que faire si le mot de passe ou le hachage de mot de passe est repr√©sent√© sous forme de nombre?  Si nous avons le mot <code>passw0rd</code> , il se compose de 8 octets.  Dans presque tous les langages de programmation, il existe des types entiers de huit octets, c'est-√†-dire  En principe, c'est la m√™me chose.  C'est-√†-dire  8 octets, le mot <code>passw0rd</code> et nous pouvons le repr√©senter comme un nombre d√©cimal r√©gulier.  Qu'est-ce que cela nous donne?  Cela nous donne une libert√© d'action compl√®tement diff√©rente.  Nous pouvons ajouter des mots de passe ou des hachages, les multiplier, les transformer en d'autres nombres.  Nous pouvons effectuer de v√©ritables op√©rations math√©matiques s√©rieuses avec eux. </p><br><p><img src="https://habrastorage.org/webt/6h/3d/wm/6h3dwmeitk9jftagy1hszcqbmgo.png" alt="Diapositive 23.1. Sphinx - gestionnaire de mots de passe"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sphinx</a> est l'un des premiers syst√®mes √† utiliser cette technologie.  Elle est apparue il y a quelques ann√©es.  Il s'agit d'un gestionnaire de mots de passe d√©terministe.  Il existe de nombreux programmes diff√©rents tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">keepass</a> , o√π vous avez un mot de passe principal et pour chaque site, il en g√©n√®re un au hasard.  Mais il y a aussi des choses d√©terministes o√π vous entrez votre mot de passe principal, le site auquel vous souhaitez acc√©der et il y calcule quelque chose et √©met un mot de passe unique pour chaque site.  Mais il est clair que si ce mot de passe principal va quelque part, tous les mots de passe de vos sites seront d√©finitivement compromis. </p><br><p><img src="https://habrastorage.org/webt/qs/9j/0z/qs9j0z8enfk9_j_p53msuqcxufu.png" alt="Diapositive 23.2. Sphinx - gestionnaire de mots de passe"></p><br><p>  Comment Sphinx a-t-il abord√© ce probl√®me?  Il prend le mot de passe principal, il prend le domaine auquel vous souhaitez vous connecter, ex√©cute le tout via un hachage et le transforme en un nombre.  Mais en fait, la cryptographie elliptique y est utilis√©e, pour plus de simplicit√© j'expliquerai tout cela sur des nombres ordinaires avec des math√©matiques ordinaires.  Il le transforme en nombre (appelons-le <code>a</code> ) et que fait-il ensuite? </p><br><p><img src="https://habrastorage.org/webt/wx/ba/hk/wxbahkcpmzzmwsaxj1_abbdwrpq.png" alt="Slide 24. Sphinx - le &quot;gestionnaire&quot; des mots de passe, d√©guisez-vous!"></p><br><p>  Une chose absolument merveilleuse, chaque fois que nous pouvons g√©n√©rer un grand nombre al√©atoire <code>r</code> .  Si nous √©levons le nombre <code>a</code> √† la puissance de <code>r</code> , et quelque temps plus tard, nous √©levons ce nombre √† la puissance inverse du nombre <code>r</code> , alors nous obtenons le m√™me nombre <code>a</code> , non?  C'est-√†-dire  nous pouvons masquer quelque chose depuis le d√©but, puis le d√©masquer. </p><br><p><img src="https://habrastorage.org/webt/pu/yp/5t/puyp5t7x6yprlu_xyybj4z8llna.png" alt="Diapositive 25.1. Sphinx - gestionnaire de mots de passe"></p><br><p>  Et que fait le sphinx?  Encore une fois, il y a un utilisateur, il y a un service √† distance.  Un num√©ro masqu√© est envoy√© √† ce service distant.  Sur le service distant, il existe une cl√© priv√©e <code>b</code> .  Que fait-il?  Il multiplie le nombre envoy√© <code>a^r</code> par sa cl√© secr√®te <code>b</code> et le renvoie.  ( <em>Note de l'auteur du recueil: sur la diapositive, le nombre envoy√© n'est pas multipli√© par la cl√© priv√©e, mais est √©lev√© au degr√© de la cl√© priv√©e, mais l'essentiel est</em> ).  √âtant donn√© que le nombre <code>r</code> diff√©rent √† chaque fois, le service distant ne peut rien dire sur le mot de passe et le domaine masqu√©s, c'est-√†-dire  chaque fois qu'il voit des nombres al√©atoires diff√©rents.  Et il multiplie simplement par sa cl√© priv√©e <code>b</code> et renvoie. </p><br><p><img src="https://habrastorage.org/webt/gs/nm/bx/gsnmbxvngd2m2ziqnuqo-mdtney.png" alt="Diapositive 25.2. Sphinx - gestionnaire de mots de passe"></p><br><p>  L'utilisateur d√©masque ce que le serveur lui a envoy√© et il obtient un num√©ro - son mot de passe principal avec le domaine multipli√© par la cl√© secr√®te du serveur <code>a^b</code> .  Il s'av√®re qu'il ne conna√Æt pas la cl√© secr√®te du serveur, le serveur ne sait pas ce que l'utilisateur lui a envoy√©, mais au final, il obtient √©galement une sorte de num√©ro d√©terministe.  Chaque fois que vous ex√©cutez ce protocole, le d√©guisement sera diff√©rent, mais le r√©sultat sera toujours le m√™me et ce r√©sultat peut ensuite √™tre reconverti en une sorte de mot de passe et utilis√© pour acc√©der √† divers sites. </p><br><p><img src="https://habrastorage.org/webt/7v/zd/hv/7vzdhvrksyvyg_awii2rkvphdgy.png" alt="Slide 26. Sphinx - le &quot;gestionnaire&quot; des mots de passe"></p><br><p>  Une technologie vraiment merveilleuse.  Tout d'abord, vous pouvez g√©n√©rer des mots de passe volumineux, c'est-√†-dire  il prot√®ge de la casse.  Deuxi√®mement, si un pirate acc√®de √† plusieurs mots de passe, il ne pourra rien dire des autres, car  ils sont g√©n√©r√©s ind√©pendamment les uns des autres.  Troisi√®mement, si le mot de passe de l'utilisateur dispara√Æt quelque part, cela ne donnera rien non plus, car les pirates n'auront pas de cl√© secr√®te.  Quatri√®mement, cela fonctionne tr√®s rapidement, car  aucun grand hachage it√©ratif n'est n√©cessaire ici, c'est-√†-dire  litt√©ralement 2-3 multiplications sont effectu√©es et tout fonctionne instantan√©ment. </p><br><p>  Mais ce syst√®me a ses inconv√©nients.  Le serveur avec lequel l'utilisateur parle ne sait rien de lui.  Il re√ßoit simplement des nombres al√©atoires en entr√©e, les multiplie par quelque chose et les renvoie.  Le client ne sait rien non plus sur le serveur, il envoie quelque chose quelque part, re√ßoit le r√©sultat, cela fonctionne - bien.  Mais si quelque chose arrive au service, l'utilisateur ne pourra rien en dire, il n'a pas d'informations √† ce sujet.  La cl√© secr√®te ne peut pas non plus √™tre modifi√©e, rien ne peut √™tre fait avec. </p><br><h3 id="pythia">  Pythia </h3><br><p><img src="https://habrastorage.org/webt/cp/kt/3z/cpkt3zvvpwx7svjbydprtntli5i.png" alt="Diapo 27. Cela pourrait-il √™tre mieux?"></p><br><p>  Cela pourrait-il √™tre mieux? </p><br><p><img src="https://habrastorage.org/webt/ot/jg/ms/otjgmsc63aic6zb8mpod01tn9jy.png" alt="Slide 28. DE BOUT EN BOUT!"></p><br><p>  Les cryptographes ont examin√© ce syst√®me et ont pens√©, est-il possible d'am√©liorer le syst√®me et de le compl√©ter avec des propri√©t√©s qui nous permettraient de dire qu'il est conforme aux principes de bout en bout?  C'est-√†-dire  le client peut communiquer avec le serveur, mais en m√™me temps, il peut √©galement l'authentifier et lui faire confiance dans une certaine mesure. </p><br><p><img src="https://habrastorage.org/webt/gv/2o/p8/gv2op8fshghvw1rvt0dnqnqwxnw.png" alt="Diapositive 29.1. Pythia"></p><br><p>  Et ils ont trouv√© un protocole appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pythia</a> . </p><br><p><img src="https://habrastorage.org/webt/kq/wd/in/kqwdin-__0xxfcerqmva6s2vewo.png" alt="Diapositive 29.2. Pythia"></p><br><p>  Il a √©t√© r√©alis√© par le merveilleux homme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Adam Everspaugh</a> avec ses coll√®gues.  Qu'est-ce qui le rend unique?  Premi√®rement, le service sait qui entre le mot de passe, c'est-√†-dire  l'ID utilisateur est transmis au serveur apr√®s le mot de passe.  Il peut s'agir d'une bo√Æte d'identification al√©atoire situ√©e √† c√¥t√©, ou simplement d'un nom d'utilisateur.  Peu importe.  Mais le service le sait.  Mais le serveur n'en sait pas seulement un peu, il peut prouver strictement math√©matiquement que c'est bien lui. </p><br><p><img src="https://habrastorage.org/webt/pf/lo/zf/pflozf9qji8nzq_nhpswlqd-3xa.png" alt="Diapositive 30.1. Pythia"></p><br><p>  Comment √ßa marche?  Il y a un backend (une sorte de service web, un site) et il y a un service Pythia.  Que fait le backend et que fait le service?  Il existe une cl√© priv√©e <code>k</code> sur le service, mais il transf√®re √©galement sa cl√© publique au backend.  Le backend de service envoie non seulement le num√©ro masqu√© <code>a^r</code> , comme dans le protocole Sphinx, mais envoie √©galement une sorte d'identifiant d'utilisateur ( <code>UserID</code> ).  Le service multiplie l'ID utilisateur et le mot de passe par sa cl√© priv√©e et le r√©sultat <code>(UserID, a)^(r*k)</code> envoie le backend.  Il renvoie √©galement une certaine <code>Proof</code> , qui peut √™tre utilis√©e par le backend pour v√©rifier que le serveur n'a pas √©t√© pirat√©, qu'il r√©pond comme il se doit. </p><br><p><img src="https://habrastorage.org/webt/re/qr/x2/reqrx276lka5gxfal99x0_l9esy.png" alt="Diapositive 30.2. Pythia"></p><br><p>  Ensuite, il y a un d√©masquage et le nombre <code>y</code> qui en r√©sulte est mis dans une base de donn√©es.  Dans la base de donn√©es, nous avons non seulement un hachage, mais un nombre, un point d'une courbe elliptique. </p><br><p><img src="https://habrastorage.org/webt/xx/qc/jt/xxqcjtbljojosjg0ssvhptf3oj0.png" alt="Diapositive 31. Pythie"></p><br><p>  Il y a quelques points int√©ressants ici: </p><br><ul><li>  La possibilit√© pour le serveur de combiner l'ID utilisateur et le mot de passe en un seul num√©ro.  C'est ce qu'on appelle une op√©ration bilin√©aire ou appariement bilin√©aire.  Il s'agit d'un calcul relativement nouveau, qui a r√©cemment commenc√© √† √™tre utilis√©.  Elle a toutes les propri√©t√©s des nouveaux math√©maticiens en ce que 30 ans ne se sont pas √©coul√©s pour que tout le monde soit convaincu que tout est normal avec √ßa. </li><li>  Mais la <code>Proof</code> qui envoie le service est une technologie assez ancienne.  C'est ce qu'on appelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le protocole Schnorr</a> .  La g√©n√©ration de cl√© publique est la multiplication d'un point de base par une cl√© secr√®te.  Le protocole Schnorr prouve que la cl√© secr√®te utilis√©e pour g√©n√©rer la cl√© publique a √©t√© utilis√©e pour multiplier le mot de passe de l'utilisateur par le m√™me num√©ro.  Ce protocole existe depuis longtemps, il est beaucoup utilis√© o√π et il vous permet de le prouver.  C'est ce qu'on appelle la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">preuve √† l'√©preuve du z√©ro</a> - le serveur n'affiche pas sa cl√© publique, mais il dit que l'op√©ration que j'ai effectu√©e a √©t√© effectu√©e par cette cl√© priv√©e, ce que nous avions initialement convenu. </li></ul><br><p><img src="https://habrastorage.org/webt/jz/pg/lo/jzpglodcswcwxprayrpud8semws.png" alt="Diapositive 32.1. Avantages de la Pythie"></p><br><p>  Quels sont les avantages de ce syst√®me? </p><br><p><img src="https://habrastorage.org/webt/xn/dg/zg/xndgzgr-to_dgnypnwarbyxengg.png" alt="Diapositive 32.2. Avantages de la Pythie"></p><br><p>  Et elle n'en a pas beaucoup. </p><br><ul><li>  Le syst√®me ne charge pas le backend.  Parce que le backend fait tout, il transforme le mot de passe en nombre, le d√©guise, l'envoie, puis d√©masque √©galement le r√©sultat. </li><li>  Si une base de donn√©es avec de tels num√©ros vous est vol√©e, le tri des mots de passe n'a √©galement aucun sens sans cl√© priv√©e. </li><li>  Le service Pythia peut bloquer les tentatives de force brute, ce qui signifie que le backend n'a pas √† le faire en principe.  S'il voit que sous le m√™me ID utilisateur, ils essaient d'effectuer cette op√©ration de transformation plusieurs fois, il peut simplement le couper et le bloquer √† la limite de d√©bit. </li><li>  Gr√¢ce √† un d√©guisement, le service ne sait rien du mot de passe.  Chaque fois qu'un nouveau num√©ro al√©atoire lui est envoy√©.  Seul l'identifiant utilisateur reste constant. </li><li>  Gr√¢ce √† ZKP (Zero-knowledge proof), le backend sait toujours que c'est le service m√™me qu'il avait contact√© une fois. </li><li>  Si vous avez une base de donn√©es avec des hachages et du sel par exemple, vous pouvez migrer vers une telle solution de mani√®re transparente pour les utilisateurs.  Ils peuvent m√™me ne rien remarquer.  Au lieu du mot de passe de l'utilisateur, vous prenez son hachage, le conduisez en Pythia et √† l'avenir utilisez simplement ce protocole, obtenez le nombre <code>y</code> , remettez-le dans votre base de donn√©es.  Le hachage peut ensuite √™tre supprim√©.  Chaque fois qu'un utilisateur se connecte √† votre syst√®me, ce protocole sera ex√©cut√©, un certain nombre sera obtenu en cons√©quence, que vous comparerez avec ce qui est dans la base de donn√©es.  Le syst√®me d'authentification lui-m√™me restera inchang√©, car  les utilisateurs se connecteront plus t√¥t et se connecteront, avec les m√™mes mots de passe, m√™me les plus faibles.  Dans ce cas, le syst√®me sera beaucoup plus s√©curis√©. </li></ul><br><p><img src="https://habrastorage.org/webt/2i/63/ja/2i63jae0xiucsx-dqailxoaqiuw.png" alt="Diapositive 33.1. Ce n'est pas tout"></p><br><p>  Mais ce ne sont pas tous les goodies. </p><br><p><img src="https://habrastorage.org/webt/oa/dy/h9/oadyh9nurjtlv5qdbgo8f2xfcui.png" alt="Diapositive 33.2. Ce n'est pas tout"></p><br><p>  L'une des principales caract√©ristiques est que m√™me si le service Pythia est pirat√©, il est possible de g√©n√©rer une nouvelle cl√© priv√©e.  Dans notre base de donn√©es, un nombre est stock√©, pas un hachage.  Si nous repr√©sentons l'ancienne cl√© comme le nombre <code>k</code> et la nouvelle comme le nombre <code>k'</code> , alors nous pouvons calculer un nombre appel√© jeton de mise √† jour.  Pour ce faire, nous multiplions le nouveau nombre par le nombre inverse de l'ancien.  Et avec ce jeton de mise √† jour, vous pouvez parcourir la base de donn√©es pour chaque utilisateur et multiplier ce nombre <code>y</code> par le jeton de mise √† jour.  Une fois cette op√©ration effectu√©e, votre syst√®me continue de fonctionner avec la nouvelle cl√© priv√©e du service distant.  Tout se passe instantan√©ment.  Si une catastrophe survient, votre base de donn√©es avec des mots de passe vous est vol√©e, vous lib√©rez un jeton de mise √† jour d'un simple clic et le fait que des pirates vous ont vol√© devient instantan√©ment inutile.  Vous parcourez simplement tous les enregistrements en arri√®re-plan, les mettez √† jour et ils fonctionnent avec la nouvelle cl√© secr√®te pour vous.  Les utilisateurs ne remarquent g√©n√©ralement rien.  C'est-√†-dire  La mise √† jour transparente et l'invalidation instantan√©e de la base de donn√©es de mots de passe sont quelques-unes des principales fonctionnalit√©s innovantes de ce syst√®me. </p><br><p><img src="https://habrastorage.org/webt/uu/cb/_z/uucb_z0ikld1bufittz0asq5m84.png" alt="Diapositive 34.1. Bonus"></p><br><p>  Mais ce n'est pas tout. </p><br><p><img src="https://habrastorage.org/webt/vr/jo/3k/vrjo3kpwbw1xuzdr6wklxmwkrgw.png" alt="Diapositive 34.2. Bonus"></p><br><p>  Le nombre qui se trouve dans la base est grand <code>y</code> , il est fondamentalement grand et semble assez pseudo-al√©atoire, c'est-√†-dire  c'est si facile de ne pas le ramasser.  Si nous transf√©rons les fonctionnalit√©s que nous avons sur le backend, par exemple, sur les appareils clients, sur les t√©l√©phones, nous pouvons utiliser ce <code>y</code> pour g√©n√©rer des cl√©s.  Nous avons appel√© cette chose BrainKey.  Cela signifie que l'utilisateur entre le mot de passe quelque part sur le t√©l√©phone, le d√©guise √©galement et l'envoie au service distant.  Le service lui renvoie un certain nombre <code>y</code> puis vous pouvez utiliser ce <code>y</code> pour g√©n√©rer des cl√©s asym√©triques.  Ainsi, l'utilisateur de son mot de passe peut obtenir une paire de cl√©s.  Ceci est utilis√© dans toutes sortes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BrainWallets</a> .  C'est lorsque vous entrez le mot de passe et que le portefeuille Bitcoin est g√©n√©r√© pour cela.  Mais cette application n'est pas limit√©e aux crypto-monnaies, c'est une signature num√©rique, des sauvegardes et la r√©cup√©ration de compte, c'est-√†-dire  partout o√π la cryptographie asym√©trique est utilis√©e, o√π des cl√©s asym√©triques sont n√©cessaires.  Tout cela peut √™tre utilis√©, mais en m√™me temps une paire de cl√©s, et elles peuvent, selon les besoins, √™tre g√©n√©r√©es autant que vous le souhaitez.  Ils d√©pendent donc tous du mot de passe de l'utilisateur, ce qui est tr√®s pratique. </p><br><p><img src="https://habrastorage.org/webt/sy/cw/nl/sycwnl1rpbmtpsc_0ddxi3fjlx0.png" alt="Diapositive 35.1. Contre?"></p><br><p>  Dans un baril de miel, ce n'est pas sans une mouche dans la pommade. </p><br><p><img src="https://habrastorage.org/webt/wx/jw/an/wxjwanacuusmfnb_ptce1peh_cg.png" alt="Diapositive 35.2. Contre?"></p><br><p>  Et les caract√©ristiques de cette technologie sont qu'elle est tr√®s nouvelle.  Il utilise une courbe elliptique, qui est destin√©e aux op√©rations bilin√©aires ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BLS12-381</a> ).  Les math√©matiques elles-m√™mes existent depuis un certain temps, mais cette courbe particuli√®re, qui est notamment utilis√©e dans notre impl√©mentation, n'est utilis√©e que dans <nobr>ZCash</nobr> sauf nous.  En cons√©quence, les biblioth√®ques qui utilisent ce nouveau calcul peuvent √™tre compt√©es sur les doigts d'une main.  Pour mettre cela en √©tat de production, vous devez consacrer un certain temps et des efforts.  N√©anmoins, l'industrie ne reste pas immobile et tous ces inconv√©nients sont temporaires.  En raison des deux premi√®res propri√©t√©s, la vitesse de ces op√©rations bilin√©aires n'est pas tr√®s coh√©rente avec les math√©matiques modernes, elliptiques en particulier, que nous utilisons tous maintenant, lorsque nous utilisons le protocole TLS, lorsque nous utilisons certains sites.  Il s'agit de plusieurs centaines d'op√©rations sur un service sur un c≈ìur.  En fait, cela ne nous a pas arr√™t√©s et au printemps, nous avons impl√©ment√© ce protocole, l'avons publi√© en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">production</a> et traduit tous nos enregistrements, les avons prot√©g√©s √† l'aide de ce protocole.  En principe, nous sommes satisfaits des performances de nos t√¢ches en cours, si n√©cessaire, nous l√®verons un autre n≈ìud avec le service Pythia et, en principe, vous pouvez d√©j√† jouer avec tout cela. </p><br><h3 id="phe">  PHE </h3><br><p><img src="https://habrastorage.org/webt/hv/1e/1l/hv1e1lslzyk31hgsw2fu5sffk_o.png" alt="Diapo 36. Est-ce encore mieux?"></p><br><p>  Mais nous nous sommes demand√© si nous pouvions faire encore mieux?  Est-il possible d'obtenir les propri√©t√©s que Pythia fournit en utilisant les math√©matiques d'hier?  Pas demain, pas aujourd'hui, mais m√™me hier, qui est utilis√© depuis de nombreuses ann√©es. </p><br><p><img src="https://habrastorage.org/webt/6r/rn/0x/6rrn0xaorj5qjkyuk2hhamqaqyk.png" alt="Diapositive 37.1. Services de cryptage renforc√©s par mot de passe (PHE)"></p><br><p>  Et litt√©ralement en juillet de cette ann√©e, les scientifiques ont publi√© un nouveau protocole appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Simple Password-Hardened Encryption Services,</a> ou PHE pour faire court. </p><br><p><img src="https://habrastorage.org/webt/hx/o5/zv/hxo5zveu2y75lmqm-t3pqknaq0e.png" alt="Diapositive 37.2. Services de cryptage renforc√©s par mot de passe (PHE)"></p><br><p>  Voici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Russell Lai</a> , un scientifique europ√©en. </p><br><p>  Quel est l'avantage de ce service?  Premi√®rement, il utilise la courbe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">P-256</a> standard, qui est utilis√©e partout, dans tous les navigateurs, produits, partout la courbe par d√©faut, qui existe depuis de nombreuses ann√©es.  Deuxi√®mement, cette chose fonctionne environ 10 fois plus rapidement que Pythia et utilise des primitives standard.  C'est un peu difficile, mais vous pouvez l'impl√©menter de vos propres mains sans utiliser de biblioth√®ques obscures.  Vous pouvez utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenSSL</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bouncy Castle</a> , n'importe quoi. </p><br><p><img src="https://habrastorage.org/webt/el/f0/ho/elf0hoawmvsekav9jgvkqxp0_ju.png" alt="Diapositive 38. Services de cryptage renforc√©s par mot de passe (PHE)"></p><br><p>  Mais cela fonctionne un peu diff√©remment.  Encore une fois, il y a un backend, il y a un service PHE.  Le backend a une cl√© publique, le service a une cl√© priv√©e <code>y</code> .  Contrairement √† Pythia, le processus d'enregistrement et le processus de v√©rification du mot de passe sont un peu diff√©rents.  Lorsqu'un nouvel utilisateur arrive sur le service et souhaite s'enregistrer, que fait le backend?  D√®s le d√©but, il a demand√© au service PHE, veuillez me donner quelques donn√©es que je peux utiliser pour m'inscrire, une sorte de fiche d'inscription.  Le service dit OK et r√©pond au backend avec les choses suivantes.  Il g√©n√®re un sel al√©atoire de 32 octets ( <code>sNonce</code> ).  Sur la base de ce sel et de sa cl√© priv√©e y, il g√©n√®re deux nombres, appelons-les <code>C0</code> et <code>C1</code> .  Il g√©n√®re √©galement des preuves ( <code>Proof</code> ) que ces deux nombres ou 2 points ont √©t√© g√©n√©r√©s pr√©cis√©ment √† l'aide de sa cl√© priv√©e <code>y</code> , en utilisant le protocole Schnorr (comme dans les protocoles pr√©c√©dents).  Le backend v√©rifie la <code>Proof</code> .  Il n'y a pas encore de mot de passe ici.  Que fait le backend?  Pour sa part, il poss√®de √©galement sa propre cl√© priv√©e cliente <code>x</code> et, ayant re√ßu le mot de passe de l'utilisateur, il fait √† peu pr√®s la m√™me chose que le service, n'y ajoute que le mot de passe.  Il prend au hasard <code>cNonce</code> (sel client al√©atoire), un mot de passe, et g√©n√®re √† nouveau 2 nombres <code>HC0</code> et <code>HC1</code> .  Pourquoi 2?  Parce que le premier <code>HC0</code> utilis√© pour l'authentification, et le deuxi√®me num√©ro <code>HC1</code> m√©lange un certain nombre al√©atoire <code>M</code> multipli√© par la cl√© priv√©e <code>x</code> ( <code>MC</code> ).  Le nombre <code>M</code> est √©galement de 32 octets et peut ensuite √™tre utilis√© pour crypter les donn√©es utilisateur (nous avons les services de cryptage) ( <em>note de l'auteur de la note: la cl√© de cryptage dans ce cas sera <code>MC</code></em> ).  Le num√©ro <code>MC</code> ne sera disponible sous forme de cl√© qu'apr√®s que l'utilisateur aura entr√© le mot de passe correct.  Il s'av√®re qu'au stade de l'enregistrement, vous pouvez g√©n√©rer non seulement un enregistrement d'autorisation, mais √©galement une cl√© de cryptage, unique pour chaque utilisateur, avec laquelle vous pouvez crypter son profil, certaines donn√©es et autre chose.  Ensuite, le backend additionne simplement ce que le service a envoy√© et ce qu'il a fait - additionne ces points et obtient <code>T0</code> et <code>T1</code> .  Dans le premier cas, il en additionne deux ( <code>C0 + HC0</code> ) et dans le second trois ( <code>C1 + HC1 + MC</code> ).  Et il met les sels de base 2 ( <code>sNonce</code> , <code>cNonce</code> ), √† l'aide desquels ces nombres ont √©t√© obtenus et 2 nombres ( <code>T0</code> et <code>T1</code> ), qui se sont r√©v√©l√©s √† la suite de la somme. </p><br><p><img src="https://habrastorage.org/webt/ly/9d/fj/ly9dfjao1laxszgo9okoovsvzjy.png" alt="Slide 39. Connexion PHE"></p><br><p>  Par cons√©quent, le processus d'authentification de l'utilisateur se produit dans l'ordre inverse.  L'utilisateur entre son mot de passe sur le backend.  Le backend calcule <code>HC0</code> et de ce qu'il a dans la base de donn√©es, soustrait <code>HC0</code> de <code>T0</code> et envoie le <code>C0</code> r√©sultant au service avec le sel du serveur.  Le service, connaissant le sel du serveur, calcule le m√™me point en lui-m√™me et regarde, il co√Øncide avec s'il a envoy√© un backend ou non, s'il correspond, alors le mot de passe est correct et vous pouvez y r√©pondre avec le deuxi√®me nombre <code>C1</code> , qu'il soustraira avec <code>HC1</code> du nombre <code>T1</code> et obtenez la cl√© de cryptage.  Ainsi, le mot de passe du service PHE ne dispara√Æt m√™me pas.  Il ne quitte m√™me pas le backend.  Il se pr√©sente sous la forme de quelques points multipli√©s par la cl√© priv√©e du backend.  Il n'existe m√™me pas en tant que tel, mais en m√™me temps, le service √† distance peut tirer une conclusion stricte quant √† savoir si ce mot de passe est correct ou non, et prouver par l√† qu'il a effectu√© tous les calculs √† l'aide de sa cl√© priv√©e <code>y</code> . </p><br><p><img src="https://habrastorage.org/webt/bi/7-/op/bi7-opjxk_7cwvgb4lm4wkwgtbi.png" alt="Diapositive 40.1. Caract√©ristiques PHE"></p><br><p>  Quelles sont les fonctionnalit√©s de ce syst√®me? </p><br><p><img src="https://habrastorage.org/webt/2t/ar/rm/2tarrmmsr5j4sgk5zlrtcsu1eyc.png" alt="Diapositive 40.2. Caract√©ristiques PHE"></p><br><p>  Le mot de passe, comme je l'ai dit, ne quitte pas le backend.  Mais contrairement √† Pythia, vous avez besoin d'une cl√© priv√©e sur le backend.  Eh bien, nous avons besoin et avons besoin, √©conomisons quelque part.  PHE poss√®de toutes les fonctions de base de Pythia: </p><br><ul><li>  Vous pouvez √©galement √©mettre un jeton de mise √† jour si quelque chose vous arrive avec la cl√© priv√©e; </li><li>  Vous pouvez √©galement parcourir toute la base de donn√©es, mettre √† jour et tout sera comme il √©tait; </li><li>  protection contre les fouilles; </li><li>  le service ne sait rien du mot de passe; </li><li>   (Pythia , ,  ,    ,  PHE ); </li><li>     . </li></ul><br><p><img src="https://habrastorage.org/webt/vq/_m/yr/vq_myrj2venkvtkjqaij3ujapd4.png" alt=" 41. ..."></p><br><p>      ... </p><br><p><img src="https://habrastorage.org/webt/hp/s9/_t/hps9_tr6ha4ysxt6szxsdhseuoe.png" alt=" 42. passw0rd.io"></p><br><p> ‚Ä¶      .      .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passw0rd.io</a>  .    password  ,    18-        ,    ,    zero trust, ..    .     , , ..  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Let's encrypt</a> .  ,   .    CLI     ,   .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 SDK</a> ,  GO  .Net,     . </p><br><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt=" 43. Passwords are like underwear"></p><br><p>           : </p><br><ol><li>    . </li><li>      . </li><li>     . </li></ol><br><p><img src="https://habrastorage.org/webt/d4/nh/d4/d4nhd4nzbnhgfq21j-8yqs1ps0m.png" alt=" 44. "></p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VirgilSecurity.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub.com/VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NoiseSocket.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passw0rd.io</a> </li></ul><br><p>     ,             . </p><br><h3 id="voprosy"> ? </h3><br><p> <strong> 37. ?</strong> </p><br><p><img src="https://habrastorage.org/webt/z_/t0/05/z_t005mcdxnznvcinnqsg-z750a.png" alt=" 45. ?"></p><br><p>     . </p><br><p> Q: ,    !   .     ,      Pythia       update token,        ?        private key  .         update token?  Ou pas? <br> A: , update token-     . <br> Q:    .      -        update token-,       Private key         ? <br> A: ,    update token-,     ,  - ,   ,  ,    update token.     , ..   . <br> Q: , ,    ,   . <br> A: ..     . </p><br><p> Q: ,   ,     ,     -   Pythia  -    ,       ,     ,   ? <br> A:  . <br> Q:      ? <br> A: ,      Pythia   .  C'est-√†-dire     ,        . <br> Q: ( )  bcrypt      ? <br> A: ,      ,   ,      . </p><br><p> Q:  ,    .      ?  , ‚Ä¶ <br> A: password   <br> Q: password  ?  Feu!  G√©n√©ralement. <br> A: 123456   ,        12345, 123456. <br> Q: .    Pythia  ,  PHE   . <br> A:    ,           . <br> Q: .   .         ?  production   ? <br> A:  . !   Pythia. <br> Q:   Pythia,    , ? <br> A:  . <br> Q:   ,  ? <br> A:   . <br> Q: , , ! <br> A:     SDK,     . </p><br><p> Q: ,  ,  ,     , ..   -  ,     ?    ?    ? <br> A: ,    ,    , ..       PHE,    ,    5   2 ,   2   5  .    ,     .    PHE ( ,    ),    ,     10 ,    . <br> Q: ..      - ,      -  ?   ? <br> A:   .     rate limiting,   ,                . <br> Q: ..             , ? <br> A: . </p><br><p> Q: . , ..       Pythia      (),          , ? ? <br> A: ,    ,     . <br> Q:  ,   update   ? <br> A: ,    Pythia  ,         ,  -     -  ,   ,        ,     ) </p><br><p> A: ?   !   .     , ,   PHE,   , . </p><br><h2 id="vyvody">  Conclusions </h2><br><p>      PHE (    )          + ‚Äî    (  ,   ,  )      (     ).   PHE      ,                   . </p><br><p>         : </p><br><ul><li>       ( <strong></strong> )   ; </li><li>              (      ). </li></ul><br><p>  ,         . </p><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Scratch</a>   Virgil Security  ,    ,      ! </p><br><p>      (  )? </p><br><p> <strong>UPD</strong> :   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Scratch</a> .          .     ,     .    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434708/">https://habr.com/ru/post/fr434708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434698/index.html">Pessimisme √† propos du multithreading</a></li>
<li><a href="../fr434700/index.html">Avantages de suivre les guides de style lors du d√©veloppement d'applications angulaires</a></li>
<li><a href="../fr434702/index.html">Pourquoi le SSD moderne me plante</a></li>
<li><a href="../fr434704/index.html">Raisons de la baisse du co√ªt du trafic mobile en Russie et pr√©visions pour 2019</a></li>
<li><a href="../fr434706/index.html">UDB. Qu'est-ce que c'est? Partie 3. FIFAP Datapath</a></li>
<li><a href="../fr434710/index.html">Blog RUVDS sur Habr: trois ans</a></li>
<li><a href="../fr434712/index.html">Troisi√®me test de Turing en russe</a></li>
<li><a href="../fr434714/index.html">Synchronisation des demandes client au printemps</a></li>
<li><a href="../fr434716/index.html">Passer au centre de donn√©es: pr√©paration</a></li>
<li><a href="../fr434718/index.html">Deux ans plus tard, la prise casque me manque toujours</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>