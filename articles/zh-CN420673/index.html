<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤²ğŸ¼ ğŸ ğŸ‚ é€‚ç”¨äºSymfony 4çš„Docker-ä»LANåˆ°ç”Ÿäº§ âœ¡ï¸ ğŸ‘©ğŸ¾â€ğŸ’¼ ğŸ‘©ğŸ¾â€ğŸŒ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å²å‰å² 
 æœ‰ä¸€å¤©ï¼Œæˆ‘éœ€è¦ä¸ºæˆ‘çš„é¡¹ç›®éƒ¨ç½²å¼€å‘ç¯å¢ƒã€‚ Vagrantå·²ç»å—å¤Ÿäº†ï¼Œå¸Œæœ›ä¸ºæ‰€æœ‰é¡¹ç›®å‚ä¸è€…æä¾›ä¸€ä¸ªä¸ç”Ÿäº§æœåŠ¡å™¨ç›¸åŒçš„å¼€å‘ç¯å¢ƒã€‚ å› æ­¤ï¼Œåœ¨å¬äº†æœ‰å…³æ—¶é«¦æ³Šåçª—çš„ä¿¡æ¯ä¹‹åï¼Œæˆ‘å†³å®šå¼€å§‹å¤„ç†å®ƒã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å°è¯•å°½å¯èƒ½è¯¦ç»†åœ°æè¿°ä»åœ¨LANä¸Šå®‰è£…dockeråˆ°å°†äº§å“éƒ¨ç½²åˆ°KVMçš„æ‰€æœ‰æ­¥éª¤ã€‚ 

 åŸå§‹æŠ€...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é€‚ç”¨äºSymfony 4çš„Docker-ä»LANåˆ°ç”Ÿäº§</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420673/"><h2> å²å‰å² </h2><br> æœ‰ä¸€å¤©ï¼Œæˆ‘éœ€è¦ä¸ºæˆ‘çš„é¡¹ç›®éƒ¨ç½²å¼€å‘ç¯å¢ƒã€‚  Vagrantå·²ç»å—å¤Ÿäº†ï¼Œå¸Œæœ›ä¸ºæ‰€æœ‰é¡¹ç›®å‚ä¸è€…æä¾›ä¸€ä¸ªä¸ç”Ÿäº§æœåŠ¡å™¨ç›¸åŒçš„å¼€å‘ç¯å¢ƒã€‚ å› æ­¤ï¼Œåœ¨å¬äº†æœ‰å…³æ—¶é«¦æ³Šåçª—çš„ä¿¡æ¯ä¹‹åï¼Œæˆ‘å†³å®šå¼€å§‹å¤„ç†å®ƒã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å°è¯•å°½å¯èƒ½è¯¦ç»†åœ°æè¿°ä»åœ¨LANä¸Šå®‰è£…dockeråˆ°å°†äº§å“éƒ¨ç½²åˆ°KVMçš„æ‰€æœ‰æ­¥éª¤ã€‚ <br><br>  <b>åŸå§‹æŠ€æœ¯æ ˆï¼š</b> <br><br>  -ç å¤´å·¥äºº <br>  -symfony 4 <br>  -Nginx <br>  -php-fpm <br>  -PostgreSQLçš„ <br>  -elasticsearch <br>  -Rabbitmq <br>  -è©¹é‡‘æ–¯ <br><br>  <b>é“ï¼š</b> <br><br>  -æ“ä½œç³»ç»ŸUbuntu 16.04ä¸‹çš„ç¬”è®°æœ¬ç”µè„‘ <br>  -KVMæ‰˜ç®¡ä¸Šçš„ç”Ÿäº§æœåŠ¡å™¨ <br><br>  <i>ä¸ºä»€ä¹ˆé™¤äº†æŠ€æœ¯å †æ ˆä¹‹å¤–ï¼Œæˆ‘è¿˜åˆ—å‡ºäº†é“å †æ ˆï¼Ÿ</i> <br><br> å¦‚æœæ‚¨ä»¥å‰ä»æœªä½¿ç”¨è¿‡Dockerï¼Œåˆ™å¯èƒ½ä¼šé‡åˆ°è®¸å¤šä¸ç¡¬ä»¶ï¼Œç¬”è®°æœ¬ç”µè„‘çš„æ“ä½œç³»ç»Ÿæˆ–æ‰˜ç®¡è™šæ‹ŸåŒ–ç±»å‹æœ‰å…³çš„é—®é¢˜ã€‚ <br><br> å¼€å§‹ä½¿ç”¨Dockeræ—¶ï¼Œç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€é‡è¦çš„æ–¹é¢æ˜¯ç¬”è®°æœ¬ç”µè„‘çš„æ“ä½œç³»ç»Ÿã€‚ ä½¿ç”¨dockerçš„æœ€ç®€å•æ–¹æ³•æ˜¯åœ¨linuxç³»ç»Ÿä¸Šã€‚ å¦‚æœæ‚¨åœ¨Windowsæˆ–Macä¸Šå·¥ä½œï¼Œé‚£ä¹ˆæ‚¨å°†é‡åˆ°100ï¼…çš„å›°éš¾ï¼Œä½†æ˜¯è¿™äº›å›°éš¾å¹¶ä¸é‡è¦ï¼Œå¹¶ä¸”å¦‚æœæ‚¨æƒ³â€œè°·æ­Œâ€å¦‚ä½•è§£å†³æ­¤é—®é¢˜ï¼Œå°†æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ <br><br> ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æ‰˜ç®¡ã€‚ ä¸ºä»€ä¹ˆKVMè™šæ‹ŸåŒ–ç±»å‹éœ€è¦æ‰˜ç®¡ï¼Ÿ åŸå› æ˜¯VPSè™šæ‹ŸåŒ–ä¸KVMå®Œå…¨ä¸åŒï¼Œå¹¶ä¸”æ‚¨æ ¹æœ¬æ— æ³•åœ¨VPSä¸Šå®‰è£…dockerï¼Œå› ä¸ºVPSåŠ¨æ€åˆ†é…æœåŠ¡å™¨èµ„æºã€‚ <br><br> å°è®¡ï¼šè¦åœ¨Dockerä¸Šæœ€å¿«å¯åŠ¨ï¼Œæœ€å¥½é€‰æ‹©Ubuntuä½œä¸ºæœ¬åœ°OSå’ŒKVMæ‰˜ç®¡ï¼ˆæˆ–æ‚¨è‡ªå·±çš„æœåŠ¡å™¨ï¼‰ã€‚ æ­¤å¤–ï¼Œæ•…äº‹å°†ç²¾ç¡®åœ°ä¾èµ–äºè¿™ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ã€‚ <br><a name="habracut"></a><br><h2>  Docker-ç»„æˆå±€åŸŸç½‘ </h2><br><h3> å®‰è£…æ–¹å¼ </h3><br> é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨æœ¬åœ°å®‰è£…dockeræœ¬èº«ã€‚ æ‚¨å¯ä»¥åœ¨å®˜æ–¹ç½‘ç«™ä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æŸ¥çœ‹åˆ°ubuntuå®˜æ–¹æ–‡æ¡£é“¾æ¥</a>çš„å®‰è£…è¯´æ˜ï¼ˆæ‚¨éœ€è¦å®‰è£…dockerå’Œdocker-composeï¼‰ï¼Œæˆ–è€…é€šè¿‡åœ¨æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š <br><br><pre><code class="bash hljs">curl -sSl https://get.docker.com/ | sh</code> </pre> <br> è¯¥å‘½ä»¤å°†åŒæ—¶å®‰è£…dockerå’Œdocker-composeã€‚ ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥dockerç‰ˆæœ¬ï¼š <br><br><pre> <code class="bash hljs">docker --version</code> </pre> <br> æˆ‘å°†ä»Docker 18.06.0-ceç‰ˆæœ¬å¼€å§‹æ•´ä¸ªå·¥ä½œã€‚ <br><br> å®‰è£…å®Œæˆï¼ <br><br><h3> æ„è¯† </h3><br> è¦å¤„ç†ä¸å¤ªæˆåŠŸçš„å†…å®¹-æ‚¨éœ€è¦äº†è§£å…¶å·¥ä½œæ–¹å¼ã€‚ å¦‚æœæ‚¨ä»¥å‰åªä½¿ç”¨Vagrantæˆ–ç±»ä¼¼å·¥å…·ï¼Œé‚£ä¹ˆä¸€å¼€å§‹è¿™å°†æ˜¯éå¸¸ä¸å¯»å¸¸ä¸”éš¾ä»¥ç†è§£çš„ï¼Œä½†è¿™åªæ˜¯ä¸€å¼€å§‹ã€‚ <br><br> æˆ‘å°†å°è¯•ä¸ºVagrantæ‰“ä¸ªæ¯”å–»ã€‚ ç°åœ¨è®¸å¤šäººå¯ä»¥è¯´ï¼Œæ¯”è¾ƒVagrantå’ŒDockeræ ¹æœ¬æ˜¯é”™è¯¯çš„ã€‚ æ˜¯çš„ï¼Œæˆ‘åŒæ„è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä¸æ‰“ç®—å°†å®ƒä»¬è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘åªä¼šå°è¯•å‘ä»…ä¸Vagrantåˆä½œDockerå·¥ä½œç³»ç»Ÿçš„æ–°äººä¼ è¾¾ä¿¡æ¯ï¼Œä»¥å¸å¼•æ–°äººäº†è§£ã€‚ <br><br> æˆ‘å¯¹â€œæ‰‹æŒ‡ä¸Šçš„â€å®¹å™¨çš„çœ‹æ³•å¦‚ä¸‹ï¼šæ¯ä¸ªå®¹å™¨éƒ½æ˜¯ä¸€ä¸ªå­¤ç«‹çš„å°ä¸–ç•Œã€‚ å¯ä»¥å°†æ¯ä¸ªå®¹å™¨æƒ³è±¡æˆä¸€ä¸ªå¾ˆå°çš„Vagrantï¼Œä¸Šé¢åªå®‰è£…äº†1ä¸ªå·¥å…·ï¼Œä¾‹å¦‚nginxæˆ–phpã€‚ æœ€åˆï¼Œå®¹å™¨é€šå¸¸ä¸å‘¨å›´çš„ä¸€åˆ‡éƒ½éš”ç¦»å¼€æ¥ï¼Œä½†æ˜¯é€šè¿‡æ£˜æ‰‹çš„æ“ä½œï¼Œæ‚¨å¯ä»¥é…ç½®æ‰€æœ‰å†…å®¹ï¼Œä»¥ä¾¿å®ƒä»¬å½¼æ­¤é€šä¿¡å¹¶ä¸€èµ·å·¥ä½œã€‚ è¿™å¹¶ä¸æ„å‘³ç€æ¯ä¸ªå®¹å™¨éƒ½ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„è™šæ‹Ÿæœºã€‚ ä½†æ˜¯ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œåˆæ­¥äº†è§£èµ·æ¥æ¯”è¾ƒå®¹æ˜“ã€‚ <br><br>  Vagrantåªæ˜¯æ¶ˆè€—æ‰éƒ¨åˆ†è®¡ç®—æœºèµ„æºï¼Œåˆ›å»ºè™šæ‹Ÿæœºï¼Œåœ¨å…¶ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿï¼Œå®‰è£…åº“ï¼Œå®‰è£…æ‚¨åœ¨æµæµªæ±‰ä¹‹ååœ¨è„šæœ¬ä¸­ç¼–å†™çš„æ‰€æœ‰å†…å®¹ã€‚ æœ€ç»ˆï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br>  â†’ <a href="">æŸ¥çœ‹ç¤ºæ„å›¾</a> <br><br> åè¿‡æ¥ï¼ŒDockerçš„å·¥ä½œåŸç†åˆ™æˆªç„¶ä¸åŒã€‚ å®ƒä¸ä¼šåˆ›å»ºè™šæ‹Ÿæœºã€‚  Dockerä½¿ç”¨å…¶Alpineæ“ä½œç³»ç»Ÿå’Œè¯¥åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œæ‰€éœ€çš„1-3ä¸ªåº“ï¼ˆä¾‹å¦‚phpæˆ–nginxï¼‰æ¥åˆ›å»ºå®¹å™¨ï¼ˆç›®å‰ï¼Œæ‚¨å¯ä»¥å°†å®ƒä»¬è§†ä¸ºå¾®è™šæ‹Ÿæœºï¼‰ã€‚ åŒæ—¶ï¼ŒDockerä¸ä¼šè‡ªå·±é˜»æ­¢ç³»ç»Ÿèµ„æºï¼Œè€Œä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨å®ƒä»¬ã€‚ æœ€ç»ˆï¼Œä¸ºäº†è¯´æ˜ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br>  â†’ <a href="">æŸ¥çœ‹ç¤ºæ„å›¾</a> <br><br> æ¯ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ªä»ä¸­åˆ›å»ºæ˜ åƒã€‚ ç»å¤§å¤šæ•°æ˜ åƒæ˜¯å¦ä¸€ä¸ªæ˜ åƒçš„æ‰©å±•ï¼Œä¾‹å¦‚ï¼ŒUbuntu xenialæˆ–Alpineæˆ–Debianï¼Œåœ¨ä¸Šé¢é™„åŠ äº†é©±åŠ¨ç¨‹åºå’Œå…¶ä»–ç»„ä»¶ã€‚ <br><br> æˆ‘çš„ç¬¬ä¸€å¼ å›¾ç‰‡æ˜¯ç”¨äºphp-fpmçš„ã€‚ æˆ‘çš„å›¾åƒæ‰©å±•äº†å®˜æ–¹çš„phpå›¾åƒï¼š7.2-fpm-alpine3.6ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œå®ƒä½¿ç”¨æ­£å¼å›¾åƒå¹¶æä¾›æˆ‘éœ€è¦çš„ç»„ä»¶ï¼Œä¾‹å¦‚pdo_pgsqlï¼Œimagickï¼Œzipç­‰ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ‰€éœ€çš„å›¾åƒã€‚ å¦‚æœéœ€è¦ï¼Œå¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>ä½¿ç”¨å®ƒã€‚ <br><br> é€šè¿‡å›¾åƒçš„åˆ›å»ºï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå¦‚æœå®ƒä»¬ä¾‹å¦‚æ˜¯åŸºäºxenialåˆ¶ä½œçš„ï¼Œåˆ™ä¸€åˆ‡éƒ½éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬æ˜¯åŸºäºAlpineåˆ¶ä½œçš„ï¼Œåˆ™å®ƒä»¬ä¼šæ•£å‘å‡ºä¸€ç‚¹ç—”ç–®ã€‚ åœ¨å¼€å§‹ä½¿ç”¨dockerä¹‹å‰ï¼Œæˆ‘åŸºæœ¬ä¸Šæ²¡æœ‰å¬è¯´è¿‡Alpineï¼Œå› ä¸ºVagrantå§‹ç»ˆåœ¨Ubuntu xenialä¸‹ä¸ºæˆ‘å·¥ä½œã€‚  Alpineæ˜¯ä¸€ä¸ªç©ºçš„Linuxæ“ä½œç³»ç»Ÿï¼Œå…¶ä¸­æ ¹æœ¬æ²¡æœ‰ä»»ä½•ä¸œè¥¿ï¼ˆæœ€ä½è¦æ±‚ï¼‰ã€‚ å› æ­¤ï¼Œèµ·åˆä½¿ç”¨å®ƒéå¸¸ä¸æ–¹ä¾¿ï¼Œå› ä¸ºä¾‹å¦‚æ²¡æœ‰ç›¸åŒçš„apt-getå®‰è£…ï¼ˆæ‚¨å·²ç»ä¹ æƒ¯äº†ï¼‰ï¼Œä½†æ˜¯åªæœ‰apk addå’Œä¸€å¥—ä¸å¤ªåˆç†çš„è½¯ä»¶åŒ…ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœXenialï¼ˆæŠ½è±¡ï¼‰é‡500è¢‹ï¼Œé‚£ä¹ˆAlpineå°±æ˜¯å…¶æœ€å¤§çš„ä¼˜åŠ¿ï¼Œè€ŒAlpineï¼ˆæŠ½è±¡ï¼‰é‡çº¦78è¢‹ã€‚ è¿™ç”šè‡³ä¼šå½±å“ä»€ä¹ˆï¼Ÿ è¿™ä¼šå½±å“æœ€ç»ˆå°†å­˜å‚¨åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æ˜ åƒçš„ç”Ÿæˆé€Ÿåº¦å’Œæœ€ç»ˆæƒé‡ã€‚ å‡è®¾æ‚¨æœ‰5ä¸ªä¸åŒçš„å®¹å™¨ï¼Œå¹¶ä¸”æ‰€æœ‰åŸºäºxenialçš„å®¹å™¨çš„æ€»é‡é‡å°†è¶…è¿‡2.5ä¸ªæ¼”å‡ºå’Œé˜¿å°”å‘æ–¯å±±-ä»…çº¦500è¢‹ã€‚ å› æ­¤ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”åŠªåŠ›ç¡®ä¿å®¹å™¨å°½å¯èƒ½çš„è–„ã€‚  ï¼ˆåœ¨Alpineä¸­å®‰è£…è½¯ä»¶åŒ…çš„æœ‰ç”¨é“¾æ¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-Alpineè½¯ä»¶åŒ…</a> ï¼‰ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»–ä»¬</a>åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docker hub</a>ä¸Šçš„æ¯ä¸ªåœ°æ–¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éƒ½</a>å†™äº†å¦‚ä½•ä½¿ç”¨<code>docker run</code>å¯åŠ¨å®¹å™¨ï¼Œç”±äºæŸç§åŸå› ï¼Œä»–ä»¬æ²¡æœ‰å†™å‡ºå¦‚ä½•é€šè¿‡docker-composeæ¥å¯åŠ¨å®¹å™¨ï¼Œè€Œé€šè¿‡docker-composeï¼Œå®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šå¯åŠ¨ï¼Œå› ä¸ºå¾ˆå°‘æœ‰ç‹©çŒæ‰‹åŠ¨å¯åŠ¨æ‰€æœ‰å®¹å™¨ï¼Œç½‘ç»œï¼Œå¼€æ”¾ç«¯å£ç­‰ã€‚ ä»£è¡¨ç”¨æˆ·çš„Docker-composeçœ‹èµ·æ¥å°±åƒæ˜¯å¸¦æœ‰è®¾ç½®çš„yamlæ–‡ä»¶ã€‚ å®ƒåŒ…æ‹¬å¯¹å¿…é¡»å¯åŠ¨çš„æ¯ä¸ªæœåŠ¡çš„æè¿°ã€‚ æˆ‘é’ˆå¯¹æœ¬åœ°ç¯å¢ƒçš„æ„å»ºå¦‚ä¸‹ï¼š <br><br><pre> <code class="hljs powershell">version: <span class="hljs-string"><span class="hljs-string">'3.1'</span></span> services: php<span class="hljs-literal"><span class="hljs-literal">-fpm</span></span>: image: otezvikentiy/php7.<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-literal"><span class="hljs-literal">-fpm</span></span>:<span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">11</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'9000:9000'</span></span> volumes: - ../:/app working_dir: /app container_name: <span class="hljs-string"><span class="hljs-string">'php-fpm'</span></span> nginx: image: nginx:<span class="hljs-number"><span class="hljs-number">1.15</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> container_name: <span class="hljs-string"><span class="hljs-string">'nginx'</span></span> working_dir: /app ports: - <span class="hljs-string"><span class="hljs-string">'7777:80'</span></span> volumes: - ../:/app - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf postgres: image: postgres:<span class="hljs-number"><span class="hljs-number">9.6</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'5432:5432'</span></span> container_name: <span class="hljs-string"><span class="hljs-string">'postgresql'</span></span> working_dir: /app restart: always environment: POSTGRES_DB: <span class="hljs-string"><span class="hljs-string">'db_name'</span></span> POSTGRES_USER: <span class="hljs-string"><span class="hljs-string">'db_user'</span></span> POSTGRES_PASSWORD: <span class="hljs-string"><span class="hljs-string">'db_pass'</span></span> volumes: - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/dump:/app/dump - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/postgresql:/var/lib/postgresql/<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> rabbitmq: image: rabbitmq:<span class="hljs-number"><span class="hljs-number">3.7</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-literal"><span class="hljs-literal">-management</span></span> working_dir: /app hostname: rabbit<span class="hljs-literal"><span class="hljs-literal">-mq</span></span> container_name: <span class="hljs-string"><span class="hljs-string">'rabbit-mq'</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'15672:15672'</span></span> - <span class="hljs-string"><span class="hljs-string">'5672:5672'</span></span> environment: RABBITMQ_DEFAULT_USER: user RABBITMQ_DEFAULT_PASS: password RABBITMQ_DEFAULT_VHOST: my_vhost elasticsearch: image: docker.elastic.co/elasticsearch/elasticsearch:<span class="hljs-number"><span class="hljs-number">6.3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> container_name: <span class="hljs-string"><span class="hljs-string">'elastic-search'</span></span> environment: - discovery.type=single<span class="hljs-literal"><span class="hljs-literal">-node</span></span> - <span class="hljs-string"><span class="hljs-string">"discovery.zen.ping.unicast.hosts=elasticsearch"</span></span> - bootstrap.memory_lock=true - <span class="hljs-string"><span class="hljs-string">"ES_JAVA_OPTS=-Xms512m -Xmx512m"</span></span> ports: - <span class="hljs-number"><span class="hljs-number">9200</span></span>:<span class="hljs-number"><span class="hljs-number">9200</span></span> - <span class="hljs-number"><span class="hljs-number">9300</span></span>:<span class="hljs-number"><span class="hljs-number">9300</span></span> working_dir: /app volumes: - ../:/app - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/elasticsearch:/usr/share/elasticsearch/<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> volumes: elasticsearch: postgresql:</code> </pre><br>  SF4çš„docker-compose.yamlæ˜¯ä¸€ç»„ç‰¹å®šçš„æœåŠ¡ï¼šnginxï¼Œphp-fpmï¼Œpostgresqlï¼Œrabbitmqï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼Œelasticsearchï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚ å¯¹äºæœ¬åœ°ç¯å¢ƒï¼Œè¿™è¶³å¤Ÿäº†ã€‚ è¦ä½¿å…¶å…¨éƒ¨æ­£å¸¸å·¥ä½œ-ä»…æœ‰æå°‘æ•°è®¾ç½®ï¼Œæ²¡æœ‰è¿™äº›è®¾ç½®å°†æ— æ³•å·¥ä½œã€‚ æœ€å¸¸è§çš„æ˜¯æ˜ åƒï¼Œå·ï¼Œç«¯å£ï¼Œç¯å¢ƒï¼Œworking_dirå’Œcontainer_nameã€‚ åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">hub.docker.comä¸Šçš„</a>æ–‡æ¡£ä¸­æè¿°äº†ç”¨äºå¯åŠ¨è¯¥æ˜ åƒæˆ–è¯¥æ˜ åƒçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰€æœ‰å†…å®¹</a> ã€‚ å¹¶éæ€»æ˜¯æœ‰å…³äºdocker-composeçš„æè¿°ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ— æ³•ä½¿ç”¨ã€‚ ä»…éœ€è¦å°†æ‰€æœ‰ä¼ å…¥æ•°æ®ä»docker runå‘½ä»¤ä¼ è¾“åˆ°docker-composeï¼Œä¸€åˆ‡éƒ½ä¼šæ­£å¸¸è¿›è¡Œã€‚ <br><br> ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰RabbitMQçš„å›¾åƒã€‚ å½“æ‚¨ç¬¬ä¸€æ¬¡çœ‹åˆ°æ­¤å†…å®¹æ—¶ï¼Œå®ƒä¼šå¼•èµ·æ··æ‚çš„æ„Ÿè§‰å’Œæƒ…ç»ªï¼Œä½†å¹¶éæ‰€æœ‰å†…å®¹éƒ½å¦‚æ­¤å¯æ€•ã€‚ æ ‡ç­¾åœ¨æ­¤å›¾åƒä¸­æŒ‡ç¤ºã€‚ é€šå¸¸ï¼Œæ ‡è®°-ä»£è¡¨ä¸åŒçš„å›¾åƒï¼Œå…·æœ‰ä¸åŒå¯æ‰©å±•å›¾åƒçš„ä¸åŒç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚ ä¾‹å¦‚ï¼Œæ ‡ç­¾3.7.7-alpineè¡¨ç¤ºæ­¤å›¾åƒæ¯”ä¾‹å¦‚3.7.7è–„ï¼Œå› ä¸ºå®ƒåŸºäºAlpineã€‚ å¾ˆå¥½ï¼Œè€Œä¸”åœ¨æ ‡ç­¾ä¸­ï¼Œæœ€ç»å¸¸æŒ‡å‡ºåº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ã€‚ æˆ‘é€šå¸¸é€‰æ‹©åº”ç”¨ç¨‹åºæœ¬èº«å’Œé«˜å±±æ˜ åƒçš„æœ€æ–°ç‰ˆæœ¬å’Œç¨³å®šç‰ˆæœ¬ã€‚ <br><br> å­¦ä¹ å¹¶é€‰æ‹©æ ‡ç­¾åï¼Œæ‚¨é€šå¸¸ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š <br><br><pre> <code class="bash hljs">docker run -d --hostname my-rabbit --name some-rabbit -e RABBITMQ_DEFAULT_USER=user -e RABBITMQ_DEFAULT_PASS=password rabbitmq:3-management</code> </pre> <br> ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯WTFï¼Ÿ å¦‚ä½•å°†å…¶è½¬ç§»åˆ°docker-composeï¼Ÿ <br><br> ä¸€åˆ‡éƒ½å¾ˆå®¹æ˜“ã€‚ å®é™…ä¸Šï¼Œæ­¤è¡ŒæŒ‡ç¤ºä¸yamlæ–‡ä»¶ä¸­æ‰€æœ‰ç›¸åŒçš„å‚æ•°ï¼Œä»…ç¼©å†™ã€‚ ä¾‹å¦‚ï¼Œ-eæ˜¯åœ¨å…¶ä¸­ä¼ é€’å„ç§å‚æ•°çš„ç¯å¢ƒï¼Œä¹Ÿå¯èƒ½æœ‰-pä¹‹ç±»çš„æ¡ç›®-è¿™äº›ç«¯å£åœ¨yamlä¸­ç§°ä¸ºç«¯å£ã€‚ å› æ­¤ï¼Œä¸ºäº†ä»¥é«˜è´¨é‡çš„æ–¹å¼ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„å›¾åƒï¼Œæ‚¨åªéœ€è¦â€œ googleâ€ docker runç¼©å†™å¹¶åœ¨yamlæ–‡ä»¶ä¸­åº”ç”¨å…¨åã€‚ <br><br> ç°åœ¨å›åˆ°docker-compose.ymlï¼Œæˆ‘åœ¨ä¸Šé¢ä½œä¸ºç¤ºä¾‹å¼•ç”¨äº†å®ƒã€‚ <br><br> è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†æˆ‘çš„php7.2é•œåƒä½œä¸ºå®˜æ–¹php7.2-fpm-alpineé•œåƒçš„æ‰©å±•ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä¸éœ€è¦é‚£ä¹ˆå¤šé¢å¤–çš„åº“ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥æ„å»ºå®˜æ–¹é•œåƒçš„æ‰©å±•å¹¶ä½¿ç”¨å®ƒã€‚  LANçš„å…¶ä½™å›¾åƒå®Œå…¨æ˜¯åŸå§‹çš„å’Œæ­£å¼çš„ã€‚ <br><br>  <b>å›¾åƒ</b> -æŒ‡ç¤ºè¦ä¸‹è½½çš„å›¾åƒã€‚ ä¾‹å¦‚ï¼ˆrabbitmqï¼š3.7.7-management-alpineï¼‰ã€‚ <br><br>  <b>ports-</b>æŒ‡å®šå®¹å™¨å°†ä½¿ç”¨çš„ç«¯å£ï¼ˆè¯·å‚é˜…æ˜ åƒæ–‡æ¡£ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç¤ºä¾‹nginxç«¯å£ä¸º80ã€‚ å› æ­¤ï¼Œå¦‚æœè¦ä½¿ç”¨ç«¯å£80ï¼Œåˆ™å¿…é¡»åœ¨æ­¤å¤„æŒ‡å®š80:80ï¼Œå¹¶ä¸”æ‚¨çš„ç«™ç‚¹å°†åœ¨localhostä¸Šå¯ç”¨ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥æŒ‡å®š7777ï¼š80ï¼Œç„¶åæ‚¨çš„ç«™ç‚¹å°†ä½äºurl localhostï¼š7777ã€‚ è¿™æ˜¯å¿…è¦çš„ï¼Œä»¥ä¾¿å¯ä»¥åœ¨åŒä¸€ä¸»æœºä¸Šéƒ¨ç½²å¤šä¸ªé¡¹ç›®ã€‚ <br><br>  <b>å·</b> -å…±äº«ç›®å½•åœ¨æ­¤å¤„æŒ‡ç¤ºã€‚ ä¾‹å¦‚ï¼Œæ‚¨çš„é¡¹ç›®ä½äºã€œ/ projects / my-sf4-appç›®å½•ä¸­ï¼Œå¹¶ä¸”phpå®¹å™¨é…ç½®ä¸ºä¸/ appç›®å½•ä¸€èµ·ä½¿ç”¨ï¼ˆä¸/ var / www / my-sf4-appä¸­çš„ç›®å½•ç›¸åŒï¼‰ã€‚ å› æ­¤ï¼Œå¯¹äºå®¹å™¨è€Œè¨€ï¼Œè®¿é—®è¯¥é¡¹ç›®å°†æ˜¯æ–¹ä¾¿çš„ã€‚ å› æ­¤ï¼Œåœ¨å·ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™<code>~/projects/my-sf4-app:/app</code> ï¼ˆè¯·å‚è§ä¸Šé¢çš„docker-compose.ymlä¸­çš„ç¤ºä¾‹ï¼ˆæˆ‘ç”¨ç›¸å¯¹æ–¹å¼../:/appè¡¨ç¤ºï¼‰ã€‚ <br><br> å› æ­¤ï¼Œè¯¥æ–‡ä»¶å¤¹å°†ä¸ºå®¹å™¨å…±äº«ï¼Œå¹¶ä¸”å°†èƒ½å¤Ÿåœ¨å…¶ä¸­æ‰§è¡Œå„ç§æ“ä½œï¼Œä¾‹å¦‚<code>php bin/console doctrine:migrations:migrate</code> ã€‚ ä½¿ç”¨è¿™äº›ç›®å½•æ¥ä¿å­˜åº”ç”¨ç¨‹åºæ•°æ®ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ ä¾‹å¦‚ï¼Œåœ¨postgresqlä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”¨äºå­˜å‚¨æ•°æ®åº“æ•°æ®çš„ç›®å½•ï¼Œç„¶ååœ¨é‡æ–°åˆ›å»ºå®¹å™¨æ—¶ï¼Œæ— éœ€æ»šåŠ¨è½¬å‚¨æˆ–å›ºå®šè£…ç½®ã€‚ <br><br>  <b>working_dir-</b>æŒ‡ç¤ºå®¹å™¨çš„å·¥ä½œç›®å½•ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨/ appï¼ˆæˆ–ç±»ä¼¼äºæ— ä¸šæ¸¸æ°‘çš„/ var / www / my-sf4-appï¼‰ã€‚ <br><br>  <b>ç¯å¢ƒ</b> -å®¹å™¨çš„æ‰€æœ‰å˜é‡éƒ½åœ¨æ­¤å¤„ä¼ é€’ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºrabbitmqï¼Œå°†å‘é€ç”¨æˆ·åå’Œå¯†ç ï¼Œå¯¹äºpostgresqlï¼Œå°†ä¼ é€’åŸºæœ¬åç§°ï¼Œç”¨æˆ·åå’Œå¯†ç ã€‚ <br><br>  <b>container_name</b>æ˜¯ä¸€ä¸ªå¯é€‰å­—æ®µï¼Œä½†æ˜¯ä¸ºäº†è¿æ¥åˆ°å®¹å™¨ï¼Œæˆ‘æ›´æ„¿æ„æŒ‡å®šã€‚ å¦‚æœæœªæŒ‡å®šï¼Œå°†åˆ†é…å¸¦æœ‰å“ˆå¸Œçš„é»˜è®¤åç§°ã€‚ <br><br> è¿™äº›æ˜¯å¿…é¡»æŒ‡å®šçš„ä¸»è¦å‚æ•°ã€‚ å…¶ä½™çš„å¯ä»¥æ˜¯å¯é€‰çš„ï¼Œç”¨äºå…¶ä»–è®¾ç½®ï¼Œæˆ–æ ¹æ®å®¹å™¨çš„æ–‡æ¡£ã€‚ <br><br> ç°åœ¨ï¼Œè¦å¼€å§‹æ‰€æœ‰è¿™äº›æ“ä½œï¼Œæ‚¨éœ€è¦åœ¨docker-composeæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­è¿è¡Œ<code>docker-compose up -d</code> ã€‚ <br><br><h3> å¦‚ä½•ä»¥åŠåœ¨å“ªé‡Œä¸ºå±€åŸŸç½‘å­˜å‚¨æ‰€æœ‰è¿™äº›ï¼Ÿ </h3><br> å¯¹äºå±€åŸŸç½‘ï¼Œæˆ‘ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•ä¸­çš„dockeræ–‡ä»¶å¤¹ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/rg/a8/pvrga87xk7vcujz2-qwbjnqmtjk.png"></div><br> å®ƒåŒ…å«æ•°æ®æ–‡ä»¶å¤¹ï¼Œæˆ‘åœ¨å…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰ä¿¡æ¯postgresqlå’Œelasticsearchï¼Œå› æ­¤ï¼Œå½“æ‚¨é‡æ–°åˆ›å»ºé¡¹ç›®æ—¶ï¼Œä¸å¿…ä»å¤´å¼€å§‹æ»šåŠ¨å›ºå®šè£…ç½®ã€‚ è¿˜æœ‰ä¸€ä¸ªNginxçˆ¸çˆ¸ï¼Œæˆ‘åœ¨å…¶ä¸­å­˜å‚¨æœ¬åœ°Nginxå®¹å™¨çš„é…ç½®ã€‚ æˆ‘å°†docker-compose.ymlä¸­çš„è¿™äº›æ–‡ä»¶å¤¹ä¸å®¹å™¨ä¸­çš„ç›¸åº”æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åŒæ­¥ã€‚ æˆ‘ä¹Ÿè®¤ä¸ºç¼–å†™ç”¨äºä¸dockerä¸€èµ·å·¥ä½œçš„bashè„šæœ¬éå¸¸æ–¹ä¾¿ã€‚ ä¾‹å¦‚ï¼Œstart.shè„šæœ¬å¯åŠ¨å®¹å™¨ï¼Œç„¶åå®‰è£…ä½œæ›²å®¶ï¼Œæ¸…ç†ç¼“å­˜å¹¶è¿ç§»ã€‚ å¯¹äºé¡¹ç›®åŒäº‹æ¥è¯´ï¼Œè¿™ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä»–ä»¬æ— éœ€æ‰§è¡Œä»»ä½•æ“ä½œï¼Œåªéœ€è¿è¡Œè„šæœ¬å³å¯æ­£å¸¸è¿è¡Œã€‚ <br><br>  Start.shè„šæœ¬ç¤ºä¾‹ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env bash green=$(tput setf 2) toend=$(tput hpa $(tput cols))$(tput cub 6) echo -n '   ?: ' read name echo "  $name!       tutmesto.ru" echo -n "$name,      ? (y/n): " read use_dump echo '    !' docker-compose up -d || exit echo -en '\n' echo -n "  ! ${green}${toend}[OK]" echo -en '\n' echo '    .' ./composer-install.sh echo -en '\n' echo -n "   ${green}${toend}[OK]" echo -en '\n' echo '     40 ,    postgres-' sleep 5 echo '  35 ...' sleep 5 echo '  30 ...' sleep 5 echo '  25 ...' sleep 5 echo '  20 ...' sleep 5 echo '  15 ...' sleep 5 echo '  10 ...' sleep 5 echo '  5 ...' sleep 5 echo ' .   postgres-        !' case "$use_dump" in y|Y) ./dump.sh echo -en '\n' echo -n "  ! ${green}${toend}[OK]" echo -en '\n' ;; *) echo "$name, ,   ! =)" ;; esac echo '    !' ./migrations-migrate.sh echo -en '\n' echo -n "  ! ${green}${toend}[OK]" echo -en '\n' echo '  !' ./php-fpm-command.sh rm -rf var/cache/* ./php-fpm-command.sh chmod 777 var/ -R ./cache-clear.sh echo -en '\n' echo -n "  ! ${green}${toend}[OK]" echo -en '\n' echo '    !' ./env.sh echo -en '\n' echo -n "   ! ${green}${toend}[OK]" echo -en '\n' echo ", $name,    !    localhost:7777  !" echo -en '\n' echo "------------------------------------------------------------------------------" echo -en '\n' echo "    :" echo "./cache-clear.sh |  symfony 4" echo "./composer.sh [command(ex. install)] |  " echo "./composer-install.sh | composer install" echo "./connect-to-php-fpm.sh |   php" echo "./console.sh [command(ex. cache:clear)] |  php bin/console" echo "./destroy.sh |  .    ." echo "./dump.sh | ,     (dump.sql)" echo "./env.sh |   " echo "./migrations-migrate.sh | " echo "./php-fpm-command.sh [command(ex. php -m)] |   php-fpm " echo "./start.sh |  ( )" echo "./stop.sh |Gracefull shutdown " echo -en '\n' echo "        :" echo "client@c.cc | QWEasd123" echo "admin@a.aa | QWEasd123" echo "moderator@m.mm | QWEasd123" echo -en '\n' echo "------------------------------------------------------------------------------" echo -en '\n' echo -en '\n' echo 'OtezVikentiy brain corporation!' echo -en '\n' echo -en '\n'</span></span></code> </pre><br>  <i>php-fpm-command.sh</i>è„šæœ¬<i>ç¤ºä¾‹</i> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env bash cd "`dirname \"$0\"`" &amp;&amp; \ docker-compose exec -T "php-fpm" sh -c "cd /app &amp;&amp; $*"</span></span></code> </pre><br>  <i>Connect-to-php-fpm.sh</i>è„šæœ¬<i>ç¤ºä¾‹</i> <br><br><pre> <code class="bash hljs"><span class="hljs-meta"><span class="hljs-meta">#!/usr/bin/env bash docker exec -i -t --privileged php-fpm bash</span></span></code> </pre><br> æœ¬åœ°å¼€å‘ç¯å¢ƒåˆ°æ­¤ç»“æŸã€‚ æ­å–œï¼Œæ‚¨å¯ä»¥ä¸åŒäº‹åˆ†äº«æœ€ç»ˆç»“æœï¼  ï¼‰ <br><br><h2> é«˜äº§çš„ </h2><br><h3> å‡†å¤‡å·¥ä½œ </h3><br> å‡è®¾æ‚¨å·²ç»åœ¨LANä¸Šç¼–å†™äº†ä¸€äº›å†…å®¹ï¼Œå¹¶å¸Œæœ›å°†å…¶æ”¾åœ¨ç”Ÿäº§æœåŠ¡å™¨æˆ–æµ‹è¯•æœåŠ¡å™¨ä¸Šã€‚ æ‚¨å¯ä»¥åœ¨KVMè™šæ‹ŸåŒ–ä¸­æ‰˜ç®¡æœåŠ¡å™¨ï¼Œæˆ–è€…åœ¨éš”å£çš„æˆ¿é—´ä¸­ä½¿ç”¨ç©ºè°ƒæ‰˜ç®¡æœåŠ¡å™¨ã€‚ <br><br> è¦éƒ¨ç½²äº§å“æˆ–Beta-æœåŠ¡å™¨å¿…é¡»å®‰è£…æ“ä½œç³»ç»Ÿï¼ˆæœ€å¥½æ˜¯linuxï¼‰å’Œdockerã€‚  Dockerçš„å®‰è£…æ–¹å¼ä¸LANä¸Šçš„å®‰è£…æ–¹å¼ç›¸åŒï¼Œæ²¡æœ‰åŒºåˆ«ã€‚ <br><br>  Dockerçš„ç”Ÿäº§åŠ›ä¸LANç•¥æœ‰ä¸åŒã€‚ é¦–å…ˆï¼Œæ‚¨ä¸èƒ½åªæ¥å—å¹¶æŒ‡å®šå¯†ç å’Œå…¶ä»–ä¿¡æ¯ä»¥åŠdocker-composeã€‚ å…¶æ¬¡ï¼Œæ‚¨ä¸èƒ½ç›´æ¥ä½¿ç”¨docker-composeã€‚ <br><br>  Dockerä½¿ç”¨docker swarmå’Œdocker stackæ¥æé«˜ç”Ÿäº§åŠ›ã€‚ å¦‚æœæ­£ç¡®ä½¿ç”¨æ­¤ç³»ç»Ÿï¼Œåˆ™è¯¥ç³»ç»Ÿä»…åœ¨å…¶ä»–å‘½ä»¤ä¸Šæœ‰æ‰€ä¸åŒï¼Œå¹¶ä¸”docker swarmæ˜¯ç¾¤é›†çš„è´Ÿè½½å¹³è¡¡å™¨ï¼ˆå†æ¬¡æœ‰ç‚¹æŠ½è±¡ï¼Œä½†æ›´æ˜“äºç†è§£ï¼‰ã€‚ <br><br>  PSï¼šæˆ‘å»ºè®®æ‚¨ç»ƒä¹ åœ¨Vagrantä¸Šè®¾ç½®docker swarmï¼ˆæ— è®ºè¿™å¬èµ·æ¥æœ‰å¤šçŸ›ç›¾ï¼‰ã€‚ åŸ¹è®­çš„ç®€å•æ–¹æ³•-ä½¿ç”¨ä¸äº§å“ä¸­ç›¸åŒçš„æ“ä½œç³»ç»Ÿæ¥æŒ‘é€‰ä¸€ä¸ªç©ºçš„Vagrantï¼Œå¹¶å°†å…¶é…ç½®ä¸ºå¯åŠ¨ã€‚ <br><br> è¦é…ç½®docker swarmï¼Œæ‚¨åªéœ€è¦è¿è¡Œä¸€äº›å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">docker swarm init --advertise-addr 192.168.***.** (ip-  ) mkdir /app (          app) chown docker /app (     ) docker stack deploy -c docker-compose.yml my-first-sf4-docker-app</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°è€ƒè™‘æ‰€æœ‰è¿™äº›ã€‚ <br><br>  <b>docker swarm init --advertise-addr-</b>å®ƒç›´æ¥å¯åŠ¨<b>docker</b> swarmæœ¬èº«ï¼Œå¹¶<b>å¼„ä¹±</b>é“¾æ¥ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å°†å…¶ä»–æœåŠ¡å™¨è¿æ¥åˆ°è¯¥â€œç¾¤é›†â€ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨ç¾¤é›†ä¸­å·¥ä½œã€‚ <br>  <b>mkdir / app &amp;&amp; chown ..-</b>æ‚¨å¿…é¡»é¢„å…ˆåˆ›å»ºæ‰€æœ‰å¿…è¦çš„ç›®å½•ï¼Œä»¥ä½¿dockerèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä»¥ä¾¿åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¸ä¼šæŠ±æ€¨ç¼ºå°‘ç›®å½•ã€‚ <br>  <b>docker stack deploy -c docker-compose.yml my-first-sf4-docker-app-</b>æ­¤å‘½ä»¤å°†å¯åŠ¨åº”ç”¨ç¨‹åºæœ¬èº«çš„æ±‡ç¼–ï¼Œè¿™ç±»ä¼¼äºdocker-compose up -dï¼Œä»…é€‚ç”¨äºdocker swarmã€‚ <br><br> è¦å¼€å§‹ä»»ä½•ç¨‹åºé›†ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ç›¸åŒçš„docker-compose.yamlï¼Œä½†å·²é’ˆå¯¹ç”Ÿäº§æ€§/ Betaç‰ˆè¿›è¡Œäº†å°‘è®¸ä¿®æ”¹ã€‚ <br><br><pre> <code class="hljs powershell">version: <span class="hljs-string"><span class="hljs-string">'3.1'</span></span> services: php<span class="hljs-literal"><span class="hljs-literal">-fpm</span></span>: image: otezvikentiy/php7.<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-literal"><span class="hljs-literal">-fpm</span></span>:<span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">11</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'9000:9000'</span></span> networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> depends_on: - postgres - rabbitmq volumes: - /app:/app working_dir: /app deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] nginx: image: nginx:<span class="hljs-number"><span class="hljs-number">1.15</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> working_dir: /app ports: - <span class="hljs-string"><span class="hljs-string">'80:80'</span></span> depends_on: - php<span class="hljs-literal"><span class="hljs-literal">-fpm</span></span> volumes: - /app:/app - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] postgres: image: postgres:<span class="hljs-number"><span class="hljs-number">9.6</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'5432:5432'</span></span> working_dir: /app networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> secrets: - postgres_db - postgres_user - postgres_pass environment: POSTGRES_DB_FILE: /run/secrets/postgres_db POSTGRES_USER_FILE: /run/secrets/postgres_user POSTGRES_PASSWORD_FILE: /run/secrets/postgres_pass volumes: - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/dump:/app/dump - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/postgresql:/var/lib/postgresql/<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] rabbitmq: image: rabbitmq:<span class="hljs-number"><span class="hljs-number">3.7</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-literal"><span class="hljs-literal">-management</span></span> networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> working_dir: /app hostname: my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-sf4</span></span><span class="hljs-literal"><span class="hljs-literal">-app</span></span><span class="hljs-literal"><span class="hljs-literal">-rabbit</span></span><span class="hljs-literal"><span class="hljs-literal">-mq</span></span> volumes: - /app:/app ports: - <span class="hljs-string"><span class="hljs-string">'5672:5672'</span></span> - <span class="hljs-string"><span class="hljs-string">'15672:15672'</span></span> secrets: - rabbitmq_default_user - rabbitmq_default_pass - rabbitmq_default_vhost environment: RABBITMQ_DEFAULT_USER_FILE: /run/secrets/rabbitmq_default_user RABBITMQ_DEFAULT_PASS_FILE: /run/secrets/rabbitmq_default_pass RABBITMQ_DEFAULT_VHOST_FILE: /run/secrets/rabbitmq_default_vhost deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] elasticsearch: image: docker.elastic.co/elasticsearch/elasticsearch:<span class="hljs-number"><span class="hljs-number">6.3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> depends_on: - postgres environment: - discovery.type=single<span class="hljs-literal"><span class="hljs-literal">-node</span></span> - discovery.zen.ping.unicast.hosts=elasticsearch - bootstrap.memory_lock=true - ES_JAVA_OPTS=<span class="hljs-literal"><span class="hljs-literal">-Xms512m</span></span> <span class="hljs-literal"><span class="hljs-literal">-Xmx512m</span></span> ports: - <span class="hljs-number"><span class="hljs-number">9200</span></span>:<span class="hljs-number"><span class="hljs-number">9200</span></span> - <span class="hljs-number"><span class="hljs-number">9300</span></span>:<span class="hljs-number"><span class="hljs-number">9300</span></span> working_dir: /app volumes: - /app:/app - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/elasticsearch:/usr/share/elasticsearch/<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] jenkins: image: otezvikentiy/jenkins:<span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> networks: - my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span> ports: - <span class="hljs-string"><span class="hljs-string">'8080:8080'</span></span> - <span class="hljs-string"><span class="hljs-string">'50000:50000'</span></span> volumes: - /app:/app - ./<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/jenkins:/var/jenkins_home - /var/run/docker.sock:/var/run/docker.sock - /usr/bin/docker:/usr/bin/docker deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>] volumes: elasticsearch: postgresql: jenkins: networks: my<span class="hljs-literal"><span class="hljs-literal">-test</span></span><span class="hljs-literal"><span class="hljs-literal">-network</span></span>: secrets: rabbitmq_default_user: file: ./secrets/rabbitmq_default_user rabbitmq_default_pass: file: ./secrets/rabbitmq_default_pass rabbitmq_default_vhost: file: ./secrets/rabbitmq_default_vhost postgres_db: file: ./secrets/postgres_db postgres_user: file: ./secrets/postgres_user postgres_pass: file: ./secrets/postgres_pass</code> </pre><br> å¦‚æ‚¨æ‰€è§ï¼Œäº§å“çš„è®¾ç½®æ–‡ä»¶ä¸LANçš„æ–‡ä»¶ç•¥æœ‰ä¸åŒã€‚ å®ƒå¢åŠ äº†æœºå¯†ï¼Œéƒ¨ç½²å’Œç½‘ç»œã€‚ <br><br>  <b>æœºå¯†</b> -ç”¨äºå­˜å‚¨å¯†é’¥çš„æ–‡ä»¶ã€‚ å¯†é’¥çš„åˆ›å»ºéå¸¸ç®€å•ã€‚ æ‚¨ä½¿ç”¨å¯†é’¥åç§°åˆ›å»ºæ–‡ä»¶-åœ¨å…¶ä¸­å†™å…¥å€¼ã€‚ ä¹‹åï¼Œåœ¨docker-compose.ymlä¸­ï¼ŒæŒ‡å®šsecretséƒ¨åˆ†å¹¶ä¼ è¾“å¸¦æœ‰å¯†é’¥çš„æ–‡ä»¶çš„æ•´ä¸ªåˆ—è¡¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ›´å¤šç»†èŠ‚</a> ã€‚ <br>  <b>ç½‘ç»œ</b> -è¿™ä¼šåˆ›å»ºä¸€ä¸ªç‰¹å®šçš„å†…éƒ¨ç½‘æ ¼ï¼Œå®¹å™¨å¯ä»¥é€šè¿‡è¿™äº›å†…éƒ¨ç½‘æ ¼ç›¸äº’é€šä¿¡ã€‚ åœ¨å±€åŸŸç½‘ä¸Š-è¿™æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œä½†åœ¨ç”Ÿäº§ä¸Š-éœ€è¦æ‰‹åŠ¨è¿›è¡Œä¸€äº›æ“ä½œã€‚ å¦å¤–ï¼Œæ‚¨å¯ä»¥æŒ‡å®šé»˜è®¤è®¾ç½®ä»¥å¤–çš„å…¶ä»–è®¾ç½®ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ›´å¤šç»†èŠ‚</a> ã€‚ <br>  <b>éƒ¨ç½²</b>æ˜¯å±€åŸŸç½‘å’Œäº§å“/æµ‹è¯•ç‰ˆä¹‹é—´çš„ä¸»è¦åŒºåˆ«ã€‚ <br><br><pre> <code class="hljs powershell"> deploy: replicas: <span class="hljs-number"><span class="hljs-number">1</span></span> restart_policy: condition: on<span class="hljs-literal"><span class="hljs-literal">-failure</span></span> placement: constraints: [<span class="hljs-type"><span class="hljs-type">node.role</span></span> == <span class="hljs-type"><span class="hljs-type">manager</span></span>]</code> </pre><br> æœ€å°æˆ˜æ–—æœºè®¾ç½®ï¼š <br><br>  <b>å‰¯æœ¬</b> -æŒ‡ç¤ºæ‚¨éœ€è¦è¿è¡Œçš„å‰¯æœ¬æ•°é‡ï¼ˆå®é™…ä¸Šï¼Œå¦‚æœæ‚¨æœ‰é›†ç¾¤å¹¶ä¸”ä½¿ç”¨äº†dockerçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œåˆ™ä½¿ç”¨æ­¤å‰¯æœ¬ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæ‚¨æœ‰ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡docker swarmè¿æ¥å®ƒä»¬ã€‚ ä¾‹å¦‚ï¼Œåœ¨æ­¤å¤„æŒ‡å®šæ•°å­—2ï¼Œå°†åœ¨1å°æœåŠ¡å™¨ä¸Šåˆ›å»º1ä¸ªå®ä¾‹ï¼Œåœ¨ç¬¬äºŒå°æœåŠ¡å™¨ä¸Šåˆ›å»ºç¬¬äºŒä¸ªå®ä¾‹ã€‚ å› æ­¤ï¼ŒæœåŠ¡å™¨ä¸Šçš„è´Ÿè½½å°†è¢«åˆ†æˆä¸¤åŠã€‚ <br>  <b>restart_policy-</b>å¦‚æœå®¹å™¨ç”±äºæŸç§åŸå› æ‰è½ï¼Œè‡ªåŠ¨â€œé‡æ–°å‡é«˜â€å®¹å™¨çš„ç­–ç•¥ã€‚ <br>  <b>æ”¾ç½®</b> -å®¹å™¨å®ä¾‹çš„ä½ç½®ã€‚ ä¾‹å¦‚ï¼Œæœ‰æ—¶æ‚¨å¸Œæœ›å®¹å™¨çš„æ‰€æœ‰å®ä¾‹ä»…åœ¨5å°æœåŠ¡å™¨ä¸­çš„1å°ä¸Šæ—‹è½¬ï¼Œè€Œä¸åœ¨å®ƒä»¬ä¹‹é—´åˆ†é…ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘æƒ³é˜…è¯»æ–‡æ¡£ï¼</a> <br><br> å› æ­¤ï¼Œæˆ‘ä»¬åœ¨åŒºåˆ†LANçš„docker-compose.yamlå’Œäº§å“/æµ‹è¯•ç‰ˆæ–¹é¢æœ‰ä¸€äº›æ”¹è¿›ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•ç»è¥è¿™é¡¹ä¸šåŠ¡ã€‚ <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡è®¾æ‚¨æ­£åœ¨Vagrantä¸Šè¿›è¡ŒåŸ¹è®­ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸­å·²ç»å…·æœ‰docker-compose.ymläº§å“çš„é…ç½®æ–‡ä»¶</font></font></i> <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get -y upgrade sudo apt-get install -y language-pack-en-base <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LC_ALL=en_US.UTF-8 <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LANGUAGE=en_US.UTF-8 <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LANG=en_US.UTF-8 curl -sSl https://get.docker.com/ | sh sudo usermod -aG docker ubuntu sudo apt-get install git sudo docker swarm init --advertise-addr 192.168.128.77 sudo mkdir /app sudo chmod 777 /app -R docker stack deploy -c /docker-compose.yml my-app git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git@bitbucket.org:JohnDoe/my-app.git /app docker stack ps my-app docker stack ls docker stack services my-app</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸è¦ä¸ºsudoå’Œ777è¸¢çƒï¼Œå½“ç„¶åœ¨ç”Ÿäº§åŠ›ä¸Šä¸å€¼å¾—è¿™æ ·åšã€‚</font><font style="vertical-align: inherit;">è¿™åªæ˜¯ä¸ºäº†å­¦ä¹ é€Ÿåº¦ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘ä»¬å¯¹ä¸dockerç›¸å…³çš„è¡Œæœ€æ„Ÿå…´è¶£ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–â€œ swarmâ€ï¼ˆdocker swarmï¼‰ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºå·¥ä½œæ‰€éœ€çš„ç›®å½•ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨/ appç›®å½•ä¸­ä¸‹è½½åŒ…å«æˆ‘ä»¬SF4ä»£ç çš„èåœã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹åï¼Œæœ‰ä¸‰ä¸ªå‘½ä»¤ï¼špsï¼Œlså’Œservicesã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»–ä»¬æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç”¨å¤„ã€‚</font><font style="vertical-align: inherit;">æˆ‘ç»å¸¸ä½¿ç”¨psï¼Œå› ä¸ºå®ƒæ˜¾ç¤ºäº†å®¹å™¨çš„çŠ¶æ€ä»¥åŠéƒ¨åˆ†é”™è¯¯ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡è®¾å®¹å™¨å·²ç»ä¸Šå‡ï¼Œä½†æ˜¯å…¶ä¸­ä¸€äº›å®¹å™¨ä¸æ–­å› é”™è¯¯è€Œå´©æºƒï¼Œå¹¶ä¸”åœ¨docker stack ps my-appä¸­ï¼Œæ‚¨çœ‹åˆ°å¤§é‡é‡å¯ã€‚</font><font style="vertical-align: inherit;">è¦æŸ¥çœ‹è·Œå€’çš„åŸå› ï¼Œæ‚¨éœ€è¦è¿è¡Œdocker container ps -a-ï¼Œç„¶åå°†å‡ºç°ä¸€ä¸ªä¸æ–­æ‰è½çš„å®¹å™¨ã€‚</font><font style="vertical-align: inherit;">åŒä¸€å®¹å™¨å°†æœ‰è®¸å¤šå®ä¾‹ï¼Œä¾‹å¦‚my-app_php-fpm.1ã€‚*ä¸€äº›å‰§çƒˆçš„å“ˆå¸Œ*ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œç°åœ¨ï¼ŒçŸ¥é“äº†å®¹å™¨çš„åç§°ï¼Œå°±å¯ä»¥æ‰§è¡Œdockeræ—¥å¿—my-app_php-fpm.1.ã€‚</font><font style="vertical-align: inherit;">æ›´æ­£é”™è¯¯ï¼Œç„¶åé‡æ–°å¯åŠ¨æ‰€æœ‰å†…å®¹ã€‚</font><font style="vertical-align: inherit;">è¦ä½¿æ‰€æœ‰å®¹å™¨çˆ†ç‚¸ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</font></font><br><br><pre> <code class="bash hljs">docker stack rm my-app</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹åï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªå¹²å‡€çš„æ— ç¾¤çš„å®¹å™¨ã€‚</font><font style="vertical-align: inherit;">ä¿®å¤é”™è¯¯-å¹¶å†æ¬¡å°†docker stack deploy -c docker-compose.yml my-appä¿®å¤ã€‚</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN420673/">https://habr.com/ru/post/zh-CN420673/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN420663/index.html">æŸ¥æ‰¾åŸºç¡€æ¶æ„ä¸­çš„é—®é¢˜æ—¶ï¼Œç®€å•çš„æŒ‡æ ‡å’ŒèŠ‚çœæ—¶é—´çš„æ–¹æ³•</a></li>
<li><a href="../zh-CN420665/index.html">åœ¨.NET Coreå’ŒKubernetesä¸Šæ„å»ºåº”ç”¨ç¨‹åºï¼šæˆ‘ä»¬çš„ç»éªŒ</a></li>
<li><a href="../zh-CN420667/index.html">EIGRPåè®®çš„æ“ä½œåŸç†</a></li>
<li><a href="../zh-CN420669/index.html">ä¼ä¸šè‡ªåŠ¨åŒ–å¸‚åœºæ¦‚è¿°ï¼šä½æˆ¿å’Œå…¬ç”¨äº‹ä¸šå»ºè®¾ä¸ç®¡ç†å…¬å¸çš„è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="../zh-CN420671/index.html">[Ekaterinburgï¼Œå…¬å‘Š] UralJSï¼ƒ9-æœ‰å…³å‰ç«¯å¾®æœåŠ¡ï¼Œæµ‹è¯•å’Œé”™è¯¯è®°å½•çš„ä¸‰ä»½æŠ¥å‘Š</a></li>
<li><a href="../zh-CN420675/index.html">SOCæ˜¯äººã€‚ â€œæ‚¨å¥½ï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾äººæ‰â€ï¼Œæˆ–è€…ç½‘ç»œæ”»å‡»ç›‘æ§å’Œå“åº”ä¸­å¿ƒçš„åˆ†æå¸ˆæ¥è‡ªå“ªé‡Œï¼Ÿ</a></li>
<li><a href="../zh-CN420677/index.html">çˆ±æ™®ç”Ÿå¦‚ä½•ä¸ºåœ°çƒæä¾›3000ä¸‡ä¸ªâ€œå·¥å‚â€çš„æ•…äº‹</a></li>
<li><a href="../zh-CN420679/index.html">Mail.Rué›†å›¢çš„æ–°Pythonè¯¾ç¨‹</a></li>
<li><a href="../zh-CN420681/index.html">AMD ThreadRipper 2ï¼šé¦–æ¬¡ä»‹ç»</a></li>
<li><a href="../zh-CN420685/index.html">ä¿®å¤å¹¶ä¸­å’Œï¼šæˆ‘ä»¬å¦‚ä½•é©¯æœé“¶ã€‚ å…³äºæ°´æ€èŒå‰‚çš„è¯</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>