<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๏ธ ๐ฉ๐ฝโ๐คโ๐จ๐ผ ๐ ุฅูุดุงุก ุนุฏุฏ ูุนุงู ูู ูุงุตู ุฒููู ูุนูู โ๐ฟ ๐ ๐ฉโโ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ูุดุงุฑูุงุชู ุนูู ุชูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ุชุชุนุงูู ุจุดูู ุฃุณุงุณู ูุน ุฎุตุงุฆุต ูุฎุทุทุงุช ุงูุชูููุฏ ุงููุฎุชููุฉ. ูุฏ ูููู ูุฐุง ุบูุฑ ูุชููุน ุ ููู ุฃุฏุงุก ุฎูุงุฑุฒููุฉ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅูุดุงุก ุนุฏุฏ ูุนุงู ูู ูุงุตู ุฒููู ูุนูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455702/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/21b/913/a41/21b913a412f4fcae1d02afabc90b236c.svg" alt="ุตูุฑุฉ"></div><br>  ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ูุดุงุฑูุงุชู ุนูู ุชูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ุชุชุนุงูู ุจุดูู ุฃุณุงุณู ูุน ุฎุตุงุฆุต ูุฎุทุทุงุช ุงูุชูููุฏ ุงููุฎุชููุฉ.  ูุฏ ูููู ูุฐุง ุบูุฑ ูุชููุน ุ ููู ุฃุฏุงุก ุฎูุงุฑุฒููุฉ ุงูุชูุฒูุน ุงูุนุดูุงุฆู ูุฏ ูุง ูุนุชูุฏ ุนูู ูุฎุทุท ุงูุชูููุฏ ุงููุฎุชุงุฑ ุ ูููู ูุนุชูุฏ ุนูู ุนูุงูู ุฃุฎุฑู.  ูู ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุดูุฑ</a> (ุงูุฐู ุงุณุชูููุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู</a> ููุชุงุฒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุฅุนุฏุงุฏ ุฏุงููุงู ููููุฑ</a> ) ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุจุญุซ</a> ุงูุฃุณุจุงุจ ุงูุฑุฆูุณูุฉ ููุงูุฎูุงุถ ูู ุฃุฏุงุก ุชูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ุ ูุงูุชู ุบุงูุจุงู ูุง ุชููู ุฃุฏุงุก ูุญุฑู PRN. <br><br>  ุชุฎูู ูุฐุง ุงููููู: <br><br>  ููุงุฌุจ ููุฒูู ุ ูููู ูู ูู Juan ู Sasha ุจุชูููุฐ ููุณ ุงูุฎูุงุฑุฒููุฉ ุงูุนุดูุงุฆูุฉ ูู C ++ ุ ูุงูุชู ุณูุชู ุชุดุบูููุง ุนูู ุงูููุจููุชุฑ ุงูุฌุงูุนู ููุณู ููุน ูุฌููุนุฉ ุจูุงูุงุช ูุงุญุฏุฉ.  ุฑูุฒูู ูุชุทุงุจู ุชูุฑูุจูุง ููุฎุชูู ููุท ูู ุชูููุฏ ุฃุฑูุงู ุนุดูุงุฆูุฉ.  ุฎูุงู ูู ุนุฌูุฉ ูู ุฃูุฑู ูุฏุฑูุณู ุงูููุณูููุฉ ุ ูุฐูู ุงุฎุชุงุฑ ุจุจุณุงุทุฉ ุฒูุจุนุฉ ูุฑุณูู.  ุณุงุดุง ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฃูุถู ุจุถุน ุณุงุนุงุช ุฅุถุงููุฉ ูู ุงูุจุญุซ.  ุฃุฌุฑู ุณุงุดุง ููุงููุณ ููุนุฏูุฏ ูู ุฃุณุฑุน PRNGs ุ ูุงูุชู ุชุนูููุง ูุคุฎุฑูุง ูู ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ ุ ูุงุฎุชุงุฑ ุงูุฃุณุฑุน.  ูู ุงูุงุฌุชูุงุน ุ ูุงู ุณุงุดุง ุบูุฑ ูุชููู ููุชูุงุฎุฑ ุ ูุณุฃู ุฎูุงู: "ูุง ูู ูุธุงู PRNG ุงูุฐู ุงุณุชุฎุฏูุชูุ" <br><br>  "ุดุฎุตูุงู ุ ุฃุฎุฐุช ุฏูุงูุฉ ูุฑุณูู - ููู ูุจููุฉ ุนูู ุงููุบุฉ ููุจุฏู ุฃููุง ุชุนูู ุจุดูู ุฌูุฏ." <br><br>  "ูุง!" ุฃุฌุงุจ ุณุงุดุง.  "ููุฏ ุงุณุชุฎุฏูุช <code>jsf32</code> .  ุฅูู ุฃุณุฑุน ุจูุซูุฑ ูู ุฒูุจุนุฉ ูุฑุณูู ุงููุฏููุฉ ูุงูุจุทูุฆุฉ!  ูุนูู ุจุฑูุงูุฌู ูู 3 ุฏูุงุฆู ู 15 ุซุงููุฉ! " <br><br>  ูููู ุฎูุงู ููุณุชูุฒุฆ ุจูููู: "ุญุณููุง ุ ููุณ ุณูุฆูุง ุ ููู ูููู ูู ุฃู ุฃูุนู ุฐูู ูู ุฃูู ูู ุฏูููุฉ".  "ุญุณููุง ุ ูุฌุจ ุนูู ุงูุฐูุงุจ ุฅูู ุงูุญููุฉ ุงูููุณูููุฉ.  ูู ุณุชุฃุชู ูุนูุ " <br><br>  "ูุง" ุ ูุฌูุจ ุณุงุดุง.  "ุฃูุง ... ุฃู ... ุจุญุงุฌุฉ ุฅูู ุฅููุงุก ูุธุฑุฉ ุนูู ุงูููุฏ ูุฑุฉ ุฃุฎุฑู." <br><br>  ูุฐุง ุงููููู ุงูุฎูุงูู ุงููุญุฑุฌ <em>ููุณ</em> ุฎูุงูููุง ุจุดูู ุฎุงุต.  ูุนุชูุฏ ุนูู ูุชุงุฆุฌ ุญููููุฉ.  ุฅุฐุง ูู ุชูู ุงูุฎูุงุฑุฒููุฉ ุงูุนุดูุงุฆูุฉ ุชุนูู ุจุงูุณุฑุนุฉ ุงูุชู ูุฑุบุจ ูููุง ุ ููุจุฏู ุฃู ุนูู ุงูุฒุฌุงุฌุฉ ูู ุชูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ุ ููู ุงูุบุฑูุจ ุฃู ุงููุดููุฉ ูุฏ ูุง ุชููู ูู ูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ! <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ: ุฃุฑูุงู ุนุดูุงุฆูุฉ ูู ุงูููุงุฑุณุฉ </h3><br>  ุชููู ูุนุธู ูููุฏุงุช ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ุงูุญุฏูุซุฉ ุจุฅูุดุงุก ูููุงุช ุขููุฉ ููููุกุฉ ุจุชุงุช ุนุดูุงุฆูุฉ ุ ุฃู ุฃููุง ุนุงุฏุฉู ูุง ุชููุฏ ุฃุฑูุงููุง ูู ุงููุงุตู ุงูุฒููู [0..2 <sup>32</sup> ) ุฃู [0..2 <sup>64</sup> ).  ูููู ูู ุงูุนุฏูุฏ ูู ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุ ูุญุชุงุฌ ุงููุณุชุฎุฏููู ุฅูู ุฃุฑูุงู ูู ูุงุตู ุฒููู ูุนูู - ุนูู ุณุจูู ุงููุซุงู ุ ููุงูุฉ ูููุช ุฃู ุงุฎุชูุงุฑ ุจุทุงูุฉ ูุนุจ ุนุดูุงุฆูุฉ ุ ููุงู ุญุงุฌุฉ ุฅูู ุฃุฑูุงู ูู ููุงุตู ุฒูููุฉ ุตุบูุฑุฉ ุซุงุจุชุฉ.  ููุน ุฐูู ุ ูุฅู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุฒููุงุช ุ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฒุฌ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฃุฎุฐ ุนููุงุช ุงูุฎุฒุงู</a> ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุดุฌุงุฑ ุงูุจุญุซ ุงูุซูุงุฆูุฉ ุงูุนุดูุงุฆูุฉ ุ</a> ุชุชุทูุจ ุฃุฑูุงููุง ูุฃุฎูุฐุฉ ูู ููุงุตู ุฒูููุฉ ุฃุฎุฑู. <br><br><h3 style=";text-align:right;direction:rtl">  ุทุฑู </h3><br>  ุณูู ููุธุฑ ูู ุงูุนุฏูุฏ ูู ุงูุทุฑู ุงููุฎุชููุฉ.  ูุชุจุณูุท ุงูููุงูุดุฉ ุ ุจุฏูุงู ูู ุฅูุดุงุก ุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู [ <em>i</em> .. <em>j</em> ) ุฃู [ <em>i</em> .. <em>j</em> ] ุ ุณูููู ุจุฅูุดุงุก ุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู [0 .. <em>k</em> ).  ุงูุชูุงู ูุซู ูุฐุง ุงููุฎุทุท ุ ูููููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูุดุงุก ุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู [ <em>i</em> .. <em>j</em> ) ุนู ุทุฑูู ุชุนููู <em>k</em> = <em>j</em> - <em>i</em> ุ ูุฅูุดุงุก ุฑูู ูู ุงููุงุตู ุงูุฒููู [0 .. <em>k</em> ) ุ ุซู ุฅุถุงูุฉ <em>i</em> ุฅููู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุฏูุฌ ูู ุฃุฏูุงุช C ++ </h4><br>  ุชุญุชูู ุงูุนุฏูุฏ ูู ุงููุบุงุช ุนูู ุฃุฏูุงุช ูุถูููุฉ ููุญุตูู ุนูู ุฑูู ุนุดูุงุฆู ูู ูุงุตู ุฒููู ูุญุฏุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฅุฒุงูุฉ ุจุทุงูุฉ ูู ูุฌููุนุฉ ุฃูุฑุงู ุจูุง 52 ูุฑูุฉ ูู ูุบุงุช ุงูุจุฑูุฌุฉ ุงููุตูุฉ ูุซู Perl ู Python ุ ูููููุง ูุชุงุจุฉ <code>int(rand(52))</code> ู <code>random.randint(0,52)</code> .  [ููุงุญุธุฉ.  ูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">CryptoPirate</a> : <i>ูุจุฏู ูู ุฎุทุฃ ููุง ุ ูู ุจูุซูู ุฑุงูุฏูุช (ุฃ ุ ุจ) ูููุฏ ุฃุฑูุงู ูู ุฃ ุฅูู ุจ ุจูุง ูู ุฐูู ุจ.</i>  <i>ููุธุฑูุง ููุฌูุฏ 52 ุจุทุงูุฉ ูู ุงููุฌููุนุฉ ูุงูุฃูู ูู "0" ุ ููุฌุจ ุฃู ูููู ููุงู random.randint (0ุ51)</i> .] ูู C ++ ุ ูููููุง ุงุณุชุฎุฏุงู <code>uniform_int_distribution</code> ุจููุณ <code>uniform_int_distribution</code> . <br><br>  ุฑูุฒ C ++ ูุชุทุจูู ูุฐุง ุงูููุฌ ุจุณูุท: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::uniform_int_distribution&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>&gt; dist(<span class="hljs-number"><span class="hljs-number">0</span></span>, range<span class="hljs-number"><span class="hljs-number">-1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dist(rng); }</code> </pre> <br>  ุนุงุฏุฉู ูุง ูุชู ุงุณุชุฎุฏุงู ุฅุญุฏู ุงูุชูููุงุช ุงูููุถุญุฉ ุฃุฏูุงู ูู ุงูุฃุฏูุงุช ุงููุฏูุฌุฉ ุ ูููู ูุนุธู ุงููุณุชุฎุฏููู ูุณุชุฎุฏููู ูุฐู ุงูุฃุฏูุงุช ุจุจุณุงุทุฉ ุ ูููุณ ุงูุชูููุฑ ูููุง ูุญุฏุซ "ุชุญุช ุงูุบุทุงุก" ุ ูุนุชูุฏูู ุฃู ูุฐู ุงูุฃุฏูุงุช ูุตููุฉ ุจุดูู ุตุญูุญ ููุนุงูุฉ ููุบุงูุฉ.  ูู C ++ ุ ุชููู ุงูุฃุฏูุงุช ุงููุฏูุฌุฉ ุฃูุซุฑ ุชุนููุฏูุง ูุฃููุง ูุฌุจ ุฃู ุชููู ูุงุฏุฑุฉ ุนูู ุงูุนูู ูุน ูุญุฑูุงุช ุชูููุฏ ุชุนุณููุฉ ุฅูู ุญุฏ ูุง - ูููู ุฃู ูููู ุงููููุฏ ุงูุฐู ููุชุฌ ููููุง ูู ุงููุทุงู ูู -3 ุฅูู 17 ุตุงูุญูุง ุชูุงููุง ููููู ุงุณุชุฎุฏุงูู ูุน <code>std::uniform_int_distribution</code> ูุฅูุดุงุก ุฃุฑูุงู ูู ุฃู ูุงุตู ุฒููู ุ ุนูู ุณุจูู ุงููุซุงู [0..1000).  ุฃู ุฃู ุฃุฏูุงุช C ++ ุงููุถููุฉ ูุนูุฏุฉ ููุบุงูุฉ ุจุงููุณุจุฉ ููุนุธู ุงูุญุงูุงุช ุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ูููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ูุง ุชุจูู ูู ุงูุชูุณูู ุงูููุงุณููู (ููุญุฑู) </h4><br>  ุฏุนูุง ููุชูู ูู ููุฌ ูุจุณุท ููุบุงูุฉ ุฅูู ููุฌ ูุจุณุท ููุบุงูุฉ. <br><br>  ุนูุฏูุง ุฏุฑุณุช ุงูุจุฑูุฌุฉ ุ ุฃูุดุฃูุง ุฃุฑูุงููุง ูู ุงููุงุตู ุงูุฒููู (ุนูู ุณุจูู ุงููุซุงู ุ ูุชุญุฏูุฏ ุจุทุงูุฉ ูู ูุฌููุนุฉ ูู 52 ูุฑูุฉ) ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู ุงููุชุจูู.  ููุญุตูู ุนูู ุงูุฑูู ูู ุงููุงุตู ุงูุฒููู [0..52) ุ ูุชุจูุง <code>rand() % 52</code> . <br><br>  ูู C ++ ุ ูููู ุชูููุฐ ูุฐุง ุงูููุฌ ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rng() % range; }</code> </pre> <br>  ุนูู ุงูุฑุบู ูู ุจุณุงุทุฉ ูุฐุง ุงูููุฌ ุ ุฅูุง ุฃูู ููุถุญ ุงูุณุจุจ ูู ุฃู ุงูุญุตูู ุนูู ุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู ุงูุตุญูุญ ุนุงุฏุฉ ูุง ูููู ูููุฉ ุจุทูุฆุฉ - ูุชุทูุจ ุชูุณูู (ูุญุณุงุจ ุงูุจุงูู ุงูุฐู ุญุตู ุนููู ุนุงูู ุงูุชุดุบูู <code>%</code> ).  ูููู ุงูุชูุณูู ุนุงุฏุฉู ุนูู ุงูุฃูู ุจุชุฑุชูุจ ูู ุญูุซ ุงูุญุฌู ุฃุจุทุฃ ูู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงูุฃุฎุฑู ุ ูุฐุง ูุฅู ุงูุนูููุฉ ุงูุญุณุงุจูุฉ ุงููุฑุฏูุฉ ุชุณุชุบุฑู ููุชูุง ุฃุทูู ูู ุฌููุน ุงูุฃุนูุงู ุงูุชู ุชููู ุจูุง PRNG ุณุฑูุนุฉ. <br><br>  ูููู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุณุฑุนุฉ ุงูููุฎูุถุฉ ุ ูุฅูู <em>ููุญุฑู</em> ุฃูุถูุง.  ูููู ุงูุณุจุจ ูุฑุงุก ุฅุฑุฌุงุน <code>rand() % 52</code> ุฃุฑูุงููุง ููุญุฑูุฉ ุ ุงูุชุฑุถ ุฃู <code>rand()</code> ุชูุดุฆ ุฃุฑูุงููุง ูู ุงููุงุตู ุงูุฒููู [0..2 <sup>32</sup> ) ุ ููุงุญุธ ุฃู 52 ูุง ููุณู 2 <sup>32</sup> ุชูุงููุง ุ ูุฅูู ููุณููุง 82 595 524 ูุฑุฉ ูุน ุงูุจุงูู 48. ูุฐุง ูู ุ ุฅุฐุง ุงุณุชุฎุฏููุง <code>rand() % 52</code> ุ ูุณูุญุตู ุนูู 82 595 525 ุทุฑููุฉ ูุงุฎุชูุงุฑ ุฃูู 48 ุจุทุงูุฉ ูู ูุฌููุนุฉ ุงููุฑู ู 82 595 524 ููุท ูู ุทุฑู ุงุฎุชูุงุฑ ุงูุจุทุงูุงุช ุงูุฃุฑุจุน ุงูุฃุฎูุฑุฉ.  ุจูุนูู ุขุฎุฑ ุ ููุงู ุงูุญุฑุงู ูุฏุฑู 0.00000121ูช ููุงุจู ูุฐู ุงูุจุทุงูุงุช ุงูุฃุฑุจุน ุงูุฃุฎูุฑุฉ (ุฑุจูุง ูุคูุงุก ูููู!).  ุนูุฏูุง ููุช ุทุงูุจุงู ููุชุจุช ูุงุฌุจุงุช ููุฒููุฉ ุญูู ุฅููุงุก ุงูุฒูุฑ ุฃู ุฑุณู ุงูุจุทุงูุงุช ุ ูู ูุฒุนุฌ ุฃุญุฏ ุนุงุฏุฉ ุจูุซู ูุฐู ุงูุชุดููุงุช ุงูุตุบูุฑุฉ ุ ููู ูุน ุฒูุงุฏุฉ ุงููุงุตู ุงูุฒููู ุ ูุฒุฏุงุฏ ุงูุชุดูู ุฎุทููุง.  ุจุงููุณุจุฉ ูู PRNG ุฐู 32 ุจุช ุ ูุฅู ุงููุงุตู ุงูุฒููู ุงููุญุฏูุฏ ุงูุฐู ููู ุนู 2 <sup>24</sup> ูููู ุจู ุงูุญุฑุงู ุฃูู ูู 0.5ูช ุ ูููู ููู 2 <sup>31</sup> ุงูุญุฑุงู ุจูุณุจุฉ 50ูช - ุณุชุนูุฏ ุจุนุถ ุงูุฃุฑูุงู ุฅูู ุถุนูู ุนุฏุฏ ูุฑุงุช ุธููุฑ ุงูุฃุฑูุงู ุงูุฃุฎุฑู. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณููุธุฑ ุจุดูู ุฃุณุงุณู ูู ุงูุชูููุงุช ุงูุชู ุชุณุชุฎุฏู ุงูุงุณุชุฑุงุชูุฌูุงุช ููุชุฎูุต ูู ุฎุทุฃ ููุชุธู ุ ูููู ุฑุจูุง ูุฌุฏุฑ ุจูุง ุงูููู ุฃูู ุจุงููุณุจุฉ ุฅูู PRNG 64 ุจุช ุ ูู ุงููุฑุฌุญ ุฃู ุชููู ูููุฉ ุงูุงูุญุฑุงู ูู ุงูุชุทุจููุงุช ุงูุนุงุฏูุฉ ุถุฆููุฉ. <br><br>  ูุดููุฉ ุฃุฎุฑู ูุฏ ุชููู ุฃู ุจุนุถ ุงููููุฏุงุช ุงูููุฑุจุงุฆูุฉ ูุฏููุง ุจุชุงุช ููุฎูุถุฉ ุถุนููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชูุชูู ุนุงุฆูุฉ GPRS Xoroshiro + ู Xoshiro + ูุญุฏุงุช ุจุช ููุฎูุถุฉ ูุง ุชุฌุชุงุฒ ุงูุงุฎุชุจุงุฑุงุช ุงูุฅุญุตุงุฆูุฉ.  ุนูุฏูุง ูููุฐ <code>% 52</code> (ูุฃู 52 ูุชุณุงููุฉ) ุ ููุญู ููุฑ ุจุช ุงูุฑุชุจุฉ ุงูููุฎูุถุฉ ูุจุงุดุฑุฉ ุฅูู ุงููุฎุฑุฌุงุช. <br><br><h4 style=";text-align:right;direction:rtl">  ุถุฑุจ ุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ (ููุญุฑูุฉ) </h4><br>  ุฃุณููุจ ุดุงุฆุน ุขุฎุฑ ูู ุงุณุชุฎุฏุงู PRNG ุงูุฐู ูููุฏ ุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ูู ุงููุงุตู ุงูุฒููู [0..1) ูุน ุงูุชุญููู ุงููุงุญู ููุฐู ุงูุฃุฑูุงู ุฅูู ุงููุงุตู ุงูุฒููู ุงููุทููุจ.  ูุณุชุฎุฏู ูุฐุง ุงูุฃุณููุจ ูู Perl ุ <a href="">ููุตู</a> ุจุงุณุชุฎุฏุงู <code>int(rand(10))</code> ูุฅูุดุงุก ุนุฏุฏ ุตุญูุญ ูู ุงููุงุตู ุงูุฒููู [0..10) ุนู ุทุฑูู ุฅูุดุงุก ุฑูู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ูุชุจูุนูุง ุจุงูุชูุฑูุจ ูุฃุณูู. <br><br>  ูู C ++ ุ ุชุชู ูุชุงุจุฉ ูุฐุง ุงูููุฌ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> uint32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bounded_rand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rng_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; rng, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> range)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> zeroone = <span class="hljs-number"><span class="hljs-number">0x1</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>p<span class="hljs-number"><span class="hljs-number">-32</span></span> * rng(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> range * zeroone; }</code> </pre> <br>  (ูุงุญุธ ุฃู <code>0x1.0p-32</code> ูู ุซุงุจุช ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ููุฏุฉ 2 <sup>-32</sup> ุ ูุงูุชู ูุณุชุฎุฏููุง ูุชุญููู ุนุฏุฏ ุตุญูุญ ุนุดูุงุฆู ูู ุงููุงุตู ุงูุฒููู [0..2 <sup>32</sup> ) ููุถุงุนูุฉ ูู ุงููุงุตู ุงูุฒููู ูููุญุฏุฉ ุ  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุฅุฌุฑุงุก ูุฐุง ุงูุชุญููู ุจุงุณุชุฎุฏุงู <code>ldexp(rng(), -32)</code> ุ ููู ุนูุฏูุง ุญุฏุฏุช ูุฐุง ุงูููุฌ ุ ุงุชุถุญ ุฃูู ุฃุจุทุฃ ูุซูุฑูุง.) <br><br>  ูุฐุง ุงูููุฌ ููุญุฑู ูุซู ุจููุฉ ุงูุชูุณูู ุงูููุงุณูููุฉ ุ ููู ุงูุงูุญุฑุงู ูุธูุฑ ุจุดูู ูุฎุชูู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุง ูุฎุชุงุฑ ุงูุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู [0..52) ุ ูุฅู ุงูุฃุฑูุงู 0 ู 13 ู 26 ู 39 ุณุชุญุฏุซ ูุฑุฉ ูุงุญุฏุฉ ุฃูู ูู ุบูุฑูุง. <br><br>  ูุฐุง ุงูุฅุตุฏุงุฑ ุ ุนูุฏ ุชุนูููู ุฅูู 64 ุจุช ุ ูู ุฃูุซุฑ ุบูุฑ ุณุงุฑุฉ ุ ูุฃูู ูุชุทูุจ ููุน ููุทุฉ ุนุงุฆูุฉ ูููู ุณุฑุนุชู 64 ุจุช ุนูู ุงูุฃูู.  ุนูู ุฃุฌูุฒุฉ x86 ุงูุชู ุชุนูู ุจูุธุงู Linux ู macOS ุ ูููููุง ุงุณุชุฎุฏุงู <code>long double</code> ููุงุณุชูุงุฏุฉ ูู ุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุจุฏูุฉ x86 ุงูุชู ุชุญุชูู ุนูู ุณุฑุนุชู 64 ุจุช ุ ููู <code>long double</code> ูุง <code>long double</code> ูููู ุนุงููููุง ุฅูู ุฌููุน ุงูุฃูุธูุฉ - ูู ุจุนุถ ุงูุฃูุธูุฉ ุ <code>long double</code> ุชุนุงุฏู <code>double</code> . <br><br>  ููุงู ุฌุงูุจ ุฌูุฏ - ูุฐุง ุงูููุฌ ุฃุณุฑุน ูู ุงูุญููู ุงููุชุจููุฉ ูู PRNGs ุฐุงุช ุงูุจุชุงุช ุงูููุฎูุถุฉ ุงูุถุนููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุนุฏุฏ ุตุญูุญ ุงูุถุฑุจ (ููุญุฑู) </h4><br>  ูููู ุชูููู ุทุฑููุฉ ุงูุถุฑุจ ููููุง ููุญุณุงุจ ุงูุซุงุจุช ุจุฏูุงู ูู ุงูุญุณุงุจ ุงูุนุงุฆู.  ูู ุงููุงูุน ุ ูุญู ูุชุถุงุนู ุจุงุณุชูุฑุงุฑ ุจูุนุฏู 2 <sup>32</sup> ุ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> x = rng(); <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(x) * <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(range); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m &gt;&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>; }</code> </pre> <br>  ูุฏ ูุจุฏู ุฃู ูุฐุง ุงูุฅุตุฏุงุฑ ูุชุทูุจ ุญุณุงุจ 64 ุจุช ุ ููู x 86 ูุนุงูุฌุงุช ุ ุณูููู ุงููุชุฑุฌู ุงูุฌูุฏ ุจุชุฑุฌูุฉ ูุฐุง ุงูุฑูุฒ ุฅูู ุชุนูููุฉ ูุชุนุฏุฏุฉ 32 ุจุช (ูุงูุชู ุชุนุทููุง ูููุชู ุฅุฎุฑุงุฌ 32 ุจุช ุ ุฅุญุฏุงููุง ูู ูููุฉ ุงูุฅุฑุฌุงุน).  ูู ุงููุชููุน ุฃู ูููู ูุฐุง ุงูุฅุตุฏุงุฑ ุณุฑูุนูุง ุ ูููู ููุญุฑู ุชูุงููุง ูุซู ุทุฑููุฉ ุถุฑุจ ุฃุฑูุงู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุชูุณูู ุงูุงููุณุงู (ุจุฏูู ุงูุญุฑุงู) </h4><br>  ูููููุง ุชุนุฏูู ูุฎุทุท ุถุฑุจ ุงูููุทุฉ ุงูุนุงุฆูุฉ ูู ูุฎุทุท ูุงุฆู ุนูู ุงูุชูุณูู.  ุจุฏูุงู ูู ุถุฑุจ <code>x * range / 2**32</code> ูุญุณุจ <code>x / (2**32 / range)</code> .  ูุธุฑูุง ูุฃููุง ูุนูู ุจุงุณุชุฎุฏุงู ุนุฏุฏ ุตุญูุญ ูู ุงูุญุณุงุจุงุช ุ ุณูุชู ุฅุฌุฑุงุก ุงูุชูุฑูุจ ูู ูุฐุง ุงูุฅุตุฏุงุฑ ุจุดูู ูุฎุชูู ุ ูุฃุญูุงููุง ูุชู ุฅูุดุงุก ููู ุฎุงุฑุฌ ุงููุงุตู ุงูุฒููู ุงููุทููุจ.  ุฅุฐุง ุชุฌุงูููุง ูุฐู ุงูููู (ุนูู ุณุจูู ุงููุซุงู ุ ุชุฎูุต ูููุง ูููุฏูุง ููููุง ุฌุฏูุฏุฉ) ุ ููุชูุฌุฉ ูุฐูู ูุญุตู ุนูู ุชูููุฉ ุจุฏูู ุชุดููุงุช. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุญุงูุฉ ุณุญุจ ุงูุจุทุงูุฉ ุจุงุณุชุฎุฏุงู PRNG 32 ุจุช ุ ูููููุง ุฅูุดุงุก ุฑูู 32 ุจุช ูุชูุณููู ุนูู 2 32/52 = 82 595 524 ูุชุญุฏูุฏ ุงูุจุทุงูุฉ.  ุชุนูู ูุฐู ุงูุชูููุฉ ุฅุฐุง ูุงูุช ุงููููุฉ ุงูุนุดูุงุฆูุฉ ูู PRNG 32 ุจุช ุฃูู ูู 52 ร 82595524 = 2 32/32 - 48. ุฅุฐุง ูุงูุช ุงููููุฉ ุงูุนุดูุงุฆูุฉ ูู PRNR ูู ูุงุญุฏุฉ ูู ุขุฎุฑ 48 ููููุง ููุฌุฒุก ุงูุนููู ูู ุงููุงุตู ุงูุฒููู ูููููุฏ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุชุฎูุต ูููุง ูุงูุจุญุซ ุนู ูููุฉ ุฃุฎุฑู. <br><br>  ูุณุชุฎุฏู ุงูุฑูุฒ ุงูุฎุงุต ุจูุง ููุฐุง ุงูุฅุตุฏุงุฑ ุฎุฏุนุฉ ูุน ุชูุณูู 2 <sup>32</sup> ุญุณุจ <code>range</code> ุฏูู ุงุณุชุฎุฏุงู ุงูุฑูุงุถูุงุช 64 ุจุช.  ูู ุฃุฌู ุงูุญุณุงุจ ุงููุจุงุดุฑ ูู <code>2**32 / range</code> ูุญุชุงุฌ ุฅูู ุชูุซูู ุงูุฑูู 2 <sup>32</sup> ุ ููู ูุจูุฑ ุฌุฏูุง (ุจูุงุญุฏ!) ูุชูุซูู ูุนุฏุฏ ุตุญูุญ 32 ุจุช.  ุจุฏูุงู ูู ุฐูู ุ ูุญู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃูู ุจุงููุณุจุฉ ููุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ุบูุฑ ุงููููุนุฉ ุ ูุฅู <code>range</code> ุนูููุฉ ุงูุฅููุงุฑ ุงูุฃุญุงุฏู ูุญุณุจ ูููุฉ ููุฌุจุฉ ูู 2 - <sup>32</sup> <code>range</code> ุ  ุจูุณูุฉ ูุฐู ุงููููุฉ ุนูู <code>range</code> ุ ูุญุตู ุนูู ุงุณุชุฌุงุจุฉ ุฃูู ูู <code>2**32 / range</code> . <br><br>  ูุฐูู ุ ูุจุฏู ุฑูุฒ C ++ ูุฅูุดุงุก ุงูุฃุฑูุงู ุจุงุณุชุฎุฏุงู ุงููุณูุฉ ูุงูุฅููุงุช ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-comment"><span class="hljs-comment">// calculates divisor = 2**32 / range uint32_t divisor = ((-range) / range) + 1; if (divisor == 0) // overflow, it's really 2**32 return 0; for (;;) { uint32_t val = rng() / divisor; if (val &lt; range) return val; } }</span></span></code> </pre> <br>  ุจุงูุทุจุน ุ ูุชุทูุจ ูุฐุง ุงูููุฌ ุนูููุชูู ุจุทูุฆุชูู ุนูู ุฃุณุงุณ ุงููุณูุฉ ุ ูุงูุชู ุนุงุฏุฉ ูุง ุชููู ุฃุจุทุฃ ูู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงูุฃุฎุฑู ุ ูุฐูู ูุฌุจ ุฃูุง ุชุชููุน ุฃู ุชููู ุณุฑูุนุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ูุง ุชุจูู ูู ุงูุชูุณูู (ูุฒุฏูุฌ) ุฏูู ุชุดููุงุช - ุชูููุฉ OpenBSD </h4><br>  ูููููุง ุฃูุถูุง ุงุชุจุงุน ููุฌ ุงูุฅุณูุงุท ูุฅุฒุงูุฉ ุงูุงูุญุฑุงู ูู ุงูุทุฑููุฉ ุงูุจุงููุฉ ููุชูุณูู ุงูููุงุณููู.  ูู ุงููุซุงู ูุน ุฃูุฑุงู ุงููุนุจ ุ ูุญุชุงุฌ ูุฑุฉ ุฃุฎุฑู ุฅูู ุฅุณูุงุท 48 ูููุฉ.  ูู ูุฐุง ุงูุฅุตุฏุงุฑ ุ ุจุฏูุงู ูู ุชุฌุงูู <em>ุขุฎุฑ</em> 48 ูููุฉ ุ ูุฅููุง (ูุนุงุฏููุง) ูุชุฌุงูู <em>ุฃูู</em> 48 ูููุฉ. <br><br>  ููุง ูู ุชูููุฐ ูุฐุง ุงูููุฌ ูู C ++: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-comment"><span class="hljs-comment">// calculates 2**32 % range uint32_t t = (-range) % range; for (;;) { uint32_t r = rng(); if (r &gt;= t) return r % range; } }</span></span></code> </pre> <br>  ุชุฒูู ูุฐู ุงูุชูููุฉ ุงูุงูุญุฑุงู ุ ูููููุง ุชุชุทูุจ ุนูููุชูู ูููุตูุชูู ูุชูุณูู ุงูููุช ูุน ุจุงูู ูููุฉ ูู ูุงุชุฌ (ููุฏ ุชุญุชุงุฌ ุฅูู ูููุฏ ุฏุงุฎูู ูุฅูุดุงุก ุนุฏุฉ ุฃุฑูุงู).  ูุฐูู ุ ููุจุบู ุชููุน ุฃู ุชููู ุงูุทุฑููุฉ ุฃุจุทุฃ ูุฑุชูู ุชูุฑูุจูุง ูู ุทุฑููุฉ ุงูุงูุญุฑุงู ุงูููุงุณูููุฉ. <br><br>  <a href=""><code> arc4random_uniform</code> OpenBSD</a> (ูุงูุฐู ูุณุชุฎุฏู ุฃูุถูุง ุนูู OS X ู iOS) ูุฐู ุงูุงุณุชุฑุงุชูุฌูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุจูุงูุง ุงูุงููุณุงู (ูุฑุฏู) ุจุฏูู ุงูุญุฑุงู - ูููุฌูุฉ ุฌุงูุง </h4><br>  ุชุณุชุฎุฏู Java ุทุฑููุฉ ูุฎุชููุฉ ูุฅูุดุงุก ุฑูู ูู ูุงุตู ุฒููู ูุณุชุฎุฏู ุนูููุฉ ุชูุณูู ุงูุจุงูู ูุงุญุฏุฉ ููุท ุ ุจุงุณุชุซูุงุก ุญุงูุงุช ูุงุฏุฑุฉ ุฅูู ุญุฏ ูุง ูู ุชุฌุงูู ุงููุชูุฌุฉ.  ููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> uint32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bounded_rand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rng_t&amp; rng, uint32_t range)</span></span></span><span class="hljs-function"> </span></span>{ uint32_t x, r; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { x = rng(); r = x % range; } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (x - r &gt; (-range)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r; }</code> </pre> <br>  ูููู ููุงุฐุง ูุนูู ูุฐุง ุงูุฎูุงุฑ ุ ุชุญุชุงุฌ ุฅูู ุงูุชูููุฑ ููููุงู.  ุจุฎูุงู ุงูุฅุตุฏุงุฑ ุงูุณุงุจู ุงุณุชูุงุฏูุง ุฅูู ุงููุฎููุงุช ุงููุชุจููุฉ ุ ูุงูุฐู ููุบู ุงูุชุญูุฒ ุนู ุทุฑูู ุฅุฒุงูุฉ ุฌุฒุก ูู ุฃูู ุงูููู ูู ูุญุฑู ุงูุชูููุฏ ุงูุฏุงุฎูู ุ ูููู ูุฐุง ุงูุฅุตุฏุงุฑ ุจุชุตููุฉ ุงูููู ูู ุงูุฌุฒุก ุงูุนููู ูู ุงููุงุตู ุงูุฒููู ูููุญุฑู. <br><br><h4 style=";text-align:right;direction:rtl">  ุนุฏุฏ ุตุญูุญ ุงูุงูุญุฑุงู - ุทุฑููุฉ Lemira </h4><br>  ุจููุณ ุงูุทุฑููุฉ ุงูุชู ุฃุฒููุง ุจูุง ุงูุชุญูุฒ ูู ุจููุฉ ุทุฑููุฉ ุงููุณูุฉ ุ ูููููุง ุงููุถุงุก ุนูู ุงูุชุญูุฒ ูู ุชูููุฉ ุงูุถุฑุจ ุงูุตุญูุญ.  ุงุฎุชุฑุน ูุฐุง Lemyr ูุฐู ุงูุชูููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> t = (-range) % range; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> x = rng(); <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(x) * <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(range); <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> l = <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>(m); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (l &lt; t); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m &gt;&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>; }</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุฅุณูุงุท ููุงุน ููุทู (ุจุฏูู ุงูุญุฑุงู) - ุชูููุฉ Apple </h4><br>  ูู ููุฌูุง ุงูุฃุฎูุฑ ุ ูุชู ุงููุถุงุก ุนูู ุงูุชูุณูู ูุงูุนูููุงุช ุงููุชุจููุฉ ุจุงููุงูู.  ุจุฏูุงู ูู ุฐูู ุ ูุณุชุฎุฏู ุนูููุฉ ุฅุฎูุงุก ุจุณูุทุฉ ููุญุตูู ุนูู ุฑูู ุนุดูุงุฆู ูู ุงููุงุตู ุงูุฒููู [0..2 <sup><em>ู</em></sup> ) ุ ุญูุซ <em>k</em> ูู ุฃุตุบุฑ ูููุฉ ุ ุจุญูุซ ูููู 2 <sup><em>ู</em></sup> ุฃูุจุฑ ูู ุงููุงุตู.  ุฅุฐุง ูุงูุช ุงููููุฉ ูุจูุฑุฉ ุฌุฏูุง ุจุงููุณุจุฉ ูููุงุตู ุงูุฒููู ูุฏููุง ุ ูุฅููุง ูุชุฌุงูููุง ููุญุงูู ุงูุญุตูู ุนูู ุฃุฎุฑู.  ุงูููุฏ ูู ูุจูู ุฃุฏูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> mask = ~<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>); --range; mask &gt;&gt;= __builtin_clz(range|<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { x = rng() &amp; mask; } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (x &gt; range); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; }</code> </pre> <br>  ุชู ุชุจูู ูุฐุง ุงูููุฌ ูู ููุจู Apple ุนูุฏูุง ูุงูุช (ูู ุฅุตุฏุงุฑ macOS Sierra) ุจุฅุฌุฑุงุก <a href="">ุชูููุญูุง ุงูุฎุงุต</a> <code>arc4random_uniform</code> . <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุฑูุฉ ุงูุชูููุงุช ุงูุฃุณุงุณูุฉ </h3><br>  ุงูุขู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุฃุณุงููุจ ุงูุชู ูููู ุชูููููุง.  ูุณูุก ุงูุญุธ ุ ุนูุฏูุง ูุดุนุฑ ุจุงูููู ุฅุฒุงุก ุชูุงููู ุนูููุฉ ุชูุณูู ูุงุญุฏุฉ ุ ูุตุจุญ ุงูุชูููู ุฃูุฑูุง ุบูุฑ ุชุงูู.  ูุง ููุฌุฏ ูุนูุงุฑ ูููู ุฃู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงูุนูุงูู ุงูุชู ุชุคุซุฑ ุนูู ูุฌุงู ุงูุชุทุจูู ุ ูููุณ ููุงู ูุง ูุถูู ุฃู ุงูุฎูุงุฑ ุงูุฃูุถู ููุชุทุจูู ุงูุฎุงุต ุจู ุณูููู ุจุงูุชุฃููุฏ ุงูุฃูุถู ุจุงููุณุจุฉ ูู. <br><br>  ูุญู ูุณุชุฎุฏู ุซูุงุซุฉ ูุนุงููุฑ ูุงุฎุชุจุงุฑ ุงูุชูููุงุช ูุน ุงูุนุฏูุฏ ูู PRNGs ุงููุฎุชููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุนูุงุฑ ุงููุจูุฑ ุฎูุท ูุฑู ุงููุนุจ </h4><br>  ุฑุจูุง ูุงู ุงููุคุดุฑ ุงูุฃูุซุฑ ูุถูุญุง ูู ุงูุงุฎุชูุงุท.  ูู ูุฐุง ุงููุนูุงุฑ ุ ูุญุงูู ุฃุฏุงุก ุงูุฎูุท ุนูู ูุทุงู ูุงุณุน.  ููุฑุฒ ุตููู ูู ุงูุญุฌู <em>N ุ</em> ูุฌุจ ุนูููุง ุฅูุดุงุก ุฃุฑูุงู ูู ุงูููุงุตู ุงูุฒูููุฉ [0 .. <em>N</em> ) ุ [0 .. ( <em>N</em> -1)) ุ ... ุ [0..1).  ูู ูุฐุง ุงููุนูุงุฑ ุ ุณูู ููุชุฑุถ ุฃู <em>N</em> ูู ุฃูุตู ุนุฏุฏ ูููู (ูุฃู <code>uint32_t</code> ูู 2 <sup>32</sup> -1).  ููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0xffffffff</span></span>; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; --i) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bval = bounded_rand(rng, i); assert(bval &lt; i); sum += bval; }</code> </pre> <br>  ูุงุญุธ ุฃููุง "ูุณุชุฎุฏู" ูู ุฑูู ุนู ุทุฑูู ุฅุถุงูุชู ุฅูู <code>sum</code> (ุจุญูุซ ูู ูุชู ุงูุชุฎูุต ููู ุนู ุทุฑูู ุงูุชุญุณูู) ุ ููููุง ูุง ูููู ุจุฃู ูุฒุฌ ููุชุฑููุฒ ุนูู ุชูููุฏ ุงูุฃุฑูุงู. <br><br>  ูุงุฎุชุจุงุฑ ุงูุฌูู 64 ุจุช ุ ูุฏููุง ุงุฎุชุจุงุฑ ููุงุซู ุ ูููู ุณูููู ูู ุบูุฑ ุงูุนููู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ูุชูุงูู ูุน ุฎูุท ูุฌููุนุฉ ูู 2 <sup>64</sup> - 1 ูู ุงูุญุฌู (ูุฃูู ุณูุณุชุบุฑู ุนุฏุฉ ุขูุงู ูู ุงูุณููู ูุฅููุงู ูุฐุง ุงููุนูุงุฑ ุงูุฃูุจุฑ).  ุจุฏูุงู ูู ุฐูู ุ ูุนุจุฑ ุงููุงุตู 64 ุจุช ุจุฃูููู ุ ูููููุง ูููุฏ ููุณ ุนุฏุฏ ููู ุงููุฎุฑุฌุงุช ููุง ูู ุงูุญุงู ูู ุงุฎุชุจุงุฑ 32 ุจุช.  ููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0xffffffff</span></span>; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; --i) { <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> bound = (<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(i)&lt;&lt;<span class="hljs-number"><span class="hljs-number">32</span></span>) | i; <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> bval = bounded_rand(rng, bound ); assert(bval &lt; bound); sum += bval; }</code> </pre> <br><h5 style=";text-align:right;direction:rtl">  ูุชุงุฆุฌ ุฏูุงูุฉ ูุฑุณูู </h5><br>  ุชูุถุญ ุงููุชุงุฆุฌ ุงูููุถุญุฉ ุฃุฏูุงู ุฃุฏุงุก ูุฐุง ุงููุนูุงุฑ ููู ูู ุงูุฃุณุงููุจ ุงูุชู ุฏุฑุณูุงูุง ุนูุฏ ุงุณุชุฎุฏุงู ุฏูุงูุฉ Mersenne ูุงุฎุชุจุงุฑูุง ุนูู 32 ุจุช (ุจุงุณุชุฎุฏุงู <code>std::mt19937</code> ูู <code>std::mt19937</code> <code>libstdc++</code> ) ูุฑูุฒ 64 ุจุช ูุดุงุจู (ุจุงุณุชุฎุฏุงู <code>std:mt19937_64</code> ูู <code>std:mt19937_64</code> <code>libstdc++</code> ).  ุงููุชุงุฆุฌ ูู ุงููุชูุณุท โโุงูููุฏุณู ูู 15 ุฃุดูุงุท ูุน ููู ุฃูููุฉ ูุฎุชููุฉ ุ ูุงูุชู ูุชู ุจุนุฏ ุฐูู ุชุทุจูุนูุง ุจุญูุซ ูููู ูุทุฑููุฉ ุงูุชูุณูู ุงูููุงุณูููุฉ ูุชุฑุฉ ุชุดุบูู ูุงุญุฏุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b9f/3eb/53f/b9f3eb53f894a14ac2698f44090b23a6.svg"></div><br>  ูุฏ ูุจุฏู ุฃู ูุฏููุง ุฅุฌุงุจุงุช ูุงุถุญุฉ ุญูู ุงูุฃุฏุงุก - ูุจุฏู ุฃูู ููููู ุฅูุดุงุก ุชูููุงุช ูุชุญููู ุงูููุงู ุ ูุงุณุฃู ููุณู ุนู ูุทูุฑู <code>libstdc++</code> ูุงููุง ูููุฑูู ุนูุฏูุง ูุชุจูุง ูุซู ูุฐุง ุงูุชุทุจูู ุงูุฑููุจ ููุฃุฑูุงู 32 ุจุช.  ูููู ุ ููุง ูู ุงูุญุงู ุบุงูุจูุง ูุน ุงูููุงุณ ุ ูุฅู ุงููููู ุฃูุซุฑ ุชุนููุฏูุง ููุง ูุจุฏู ูู ูุฐู ุงููุชุงุฆุฌ.  ุฃููุงู ุ ููุงู ุงุญุชูุงู ุฃู ุชููู ุงููุชุงุฆุฌ ุฎุงุตุฉ ุจุฏูุฑุฉ ูุฑุณูู ุ ูุฐูู ุณูููู ุจุชูุณูุน PRNGs ุงููุฎุชุจุฑุฉ.  ุซุงููุง ุ ูุฏ ุชููู ููุงู ูุดููุฉ ุฎููุฉ ูุน ุงููุคุดุฑ ููุณู.  ุฏุนูุง ุฃููุงู ูุชุนุงูู ูุน ุงูุณุคุงู ุงูุฃูู. <br><br><h5 style=";text-align:right;direction:rtl">  ูุชุงุฆุฌ PRNGs ูุฎุชููุฉ </h5><br>  <code>arc4_rand32</code> 32 ุจุช ุจุงุณุชุฎุฏุงู <code>arc4_rand32</code> ู <code>chacha8r</code> ู <code>gjrand32</code> ู <code>jsf32</code> ู <code>mt19937</code> ู <code>pcg32</code> ู <code>pcg32_fast</code> ู <code>sfc32</code> ู <code>splitmix32</code> ู <code>xoroshiro64+</code> ู <code>xorshift*64/32</code> <code>xoshiro128+</code> ู <code>xoshiro128+</code> ู <code>xoshiro128**</code> ู <code>jsf64</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> <code>xoshiro256+</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> ู <code>xoshiro256*</code> .  ูุฐู ุงููุฌููุนุงุช ุณูู ุชุนุทููุง ุจุนุถ PRNs ุจุทูุฆุฉ ูุงููุซูุฑ ูู ุชูู ุณุฑูุน ุฌุฏุง. <br><br>  ูููุง ุงููุชุงุฆุฌ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2dc/8c8/f1a/2dc8c8f1af9aa517a92260e7cbd3a73e.svg"></div><br>  ูููููุง ุฃู ูุฑู ุงูุงุฎุชูุงูุงุช ุงูุฑุฆูุณูุฉ ูู ุงููุชุงุฆุฌ ูุน ุฏูุงูุฉ ูุฑุณูู.  ุฃุณุฑุน PRNGs ุจุชุญููู ุงูุชูุงุฒู ูุญู ุงูููุฏ ุงููุญูุท ุ ูุจุงูุชุงูู ูุตุจุญ ุงููุฑู ุจูู ุงูุทุฑู ุงููุฎุชููุฉ ุฃูุซุฑ ูุถูุญูุง ุ ุฎุงุตุฉ ูู ุญุงูุฉ PRNRs 64 ุจุช.  ูุน ูุฌููุนุฉ ุฃูุณุน ูู <code>libstc++</code> ุชููู ุชุทุจูู <code>libstc++</code> ุนู ุฃู ูุจุฏู ูุธูุนูุง ุฌุฏูุง. <br><br><h5 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h5><br>  ูู ูุฐุง ุงููุนูุงุฑ ุจูุงูุด ูุจูุฑ ุ ูุฅู ุงูููุฌ ุงููุงุฆู ุนูู ุงูุถุฑุจ ูุน ุงูุชุญูุฒ ูููุฒ ูู ุงูุณุฑุนุฉ.  ููุงู ุงูุนุฏูุฏ ูู ุงูููุงูู ุงูุชู ุชููู ูููุง ุงูุญุฏูุฏ ุตุบูุฑุฉ ุจุงููุณุจุฉ ูุญุฌู PRNG ุ ูุงูุฃุฏุงุก ููู ููุบุงูุฉ.  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ูููู ููุงูุญูุงุฒ ุงูุทููู ุชุฃุซูุฑ ููุญูุธ ุ ูููู ุณูููู ูุณุฑุนุฉ PRNG.  ูุซุงู ุนูู ุฐูู ูู Quicksort ุจููุทุฉ ูุฑุฌุนูุฉ ุนุดูุงุฆูุฉ.  ูู ุงูุฃุณุงููุจ ุงูููุญุฑูุฉ ุ ุชุจุฏู ุชูููุฉ bitmask ูุงุนุฏุฉ. <br><br>  ูููู ูุจู ุงูุชูุตู ุฅูู ุงุณุชูุชุงุฌุงุช ุฌุงุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุฅุดุงุฑุฉ ุฅูู ุงููุดููุฉ ุงูุถุฎูุฉ ููุฐุง ุงููุนูุงุฑ - ุญูุซ ูุชู ูุถุงุก ูุนุธู ุงูููุช ุนูู ุญุฏูุฏ ุนุงููุฉ ุฌุฏูุง ุ ูุงูุชู ุนูู ุงูุฃุฑุฌุญ ุชุนุทู ุฃูููุฉ ููุฑุทุฉ ููุชุฑุงุช ูุจูุฑุฉ.  ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ููุฐูุงุจ ุฅูู ุงููุคุดุฑ ุงูุซุงูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุนูุงุฑ ุตุบูุฑ ุฎูุท ูุฑู ุงููุนุจ </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดุจู ูุฐุง ุงููุนูุงุฑ ุงููุนูุงุฑ ุงูุณุงุจู ุ ููููู ูุคุฏู "ุงุฎุชูุงุท ุงูุตููู" ุฃูู ูู ุฐูู ุจูุซูุฑ. </font></font> ููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; <span class="hljs-number"><span class="hljs-number">0xffff</span></span>; ++j) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0xffff</span></span>; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; --i) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bval = bounded_rand(rng, i); assert(bval &lt; i); sum += bval; } }</code> </pre> <br><h5 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุฆุฌ ุฏูุงูุฉ ูุฑุณูู </font></font></h5><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6c5/d3b/4bd/6c5d3b4bdb5f2e45cd805a051d79ab9a.svg"></div><br><h5 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุฆุฌ PRNGs ูุฎุชููุฉ </font></font></h5><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/45a/9ae/8c0/45a9ae8c040cb4d297fe82f00fa06e3c.svg"></div><br><h5 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุฌูุจ ูุฐุง ุงููุนูุงุฑ ุงูุชุฑููุฒ ุงูุฒุงุฆุฏ ุนูู ุงูุญุฏูุฏ ุงููุจูุฑุฉ ููุนูุณ ุจุดูู ุฃูุซุฑ ุฏูุฉ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ูู ุงูุนุงูู ุงูุญูููู ุ ูููู ูุชุฌุงูู ุงูุขู ุงูุญุฏูุฏ ุงููุจูุฑุฉ ุชูุงููุง. </font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุนูุงุฑ ูุฌููุน ุงููุชุฑุงุช </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏู ูุฐุง ุงููุคุดุฑ ุฅูู ุชุฌูุจ ุนููุจ ุงูุงุซููู ุงูุณุงุจูุชูู ุ </font><font style="vertical-align: inherit;">ูููู ุจุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ูู ูู ุญุฌู ูู ููุฉ ุงุซููู ุจุญูุซ ูู ุญุฌู ููุฌูุฏ ุ ูููู ุชุฃุซูุฑู ูุง ูุจุงูุบ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bit = <span class="hljs-number"><span class="hljs-number">1</span></span>; bit != <span class="hljs-number"><span class="hljs-number">0</span></span>; bit &lt;&lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">0x1000000</span></span>; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bound = bit | (i &amp; (bit - <span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bval = bounded_rand(rng, bound); assert(bval &lt; bound); sum += bval; } }</code> </pre> <br><h5 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุฆุฌ ุฏูุงูุฉ ูุฑุณูู </font></font></h5><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f34/65c/447/f3465c447f9b19b430bb43533a655c2f.svg"></div><br><h5 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุฆุฌ PRNGs ูุฎุชููุฉ </font></font></h5><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/64b/c58/2a2/64bc582a2fde24fd0faedbeaabb9f64c.svg"></div><br><h5 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h5><br>      .     ,      ,     , ,    . <br><br>      ,      ,          . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>             , -     ,    .   ,       . <br><br><h4 style=";text-align:right;direction:rtl">       </h4><br>          , : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-comment"><span class="hljs-comment">// calculates 2**32 % range uint32_t t = (-range) % range; for (;;) { uint32_t r = rng(); if (r &gt;= t) return r % range; } }</span></span></code> </pre> <br>  <code>range</code>       ,     <em> </em> .         ,     ,        . <br><br>      : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> r = rng(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r &lt; range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> t = (-range) % range; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (r &lt; t) r = rng(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r % range; }</code> </pre> <br>       ยซ Mod  ยป (. ),   ยซ   ยป.   ,       (   ). <br><br><h5 style=";text-align:right;direction:rtl">   Large-Shuffle </h5><br>        64-  (  mod  ),         32- .   ,       . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bb4/61d/b52/bb461db52be4a7d983dd7f97844179c0.svg"></div><br><h5 style=";text-align:right;direction:rtl">   Small-Shuffle </h5><br>   ,      small-shuffle      ,       .            .     (OpenBSD)        (Java). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f07/2bd/fe2/f072bdfe2660cf0f8789b124a8f02646.svg"></div><br><h5 style=";text-align:right;direction:rtl">      </h5><br>          . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/219/b1d/add/219b1daddfa6a55a2cb485b3ae774016.svg"></div><br> ,       :        . <br><br><h4 style=";text-align:right;direction:rtl">     </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงุฏุฉู ูุง </font></font><code>a % b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุจ </font><font style="vertical-align: inherit;">ุงูุญุณุงุจ </font><font style="vertical-align: inherit;">ูุณูุฉ ุ ูููู ูู ุงูููุงูู ุงูุชู ุชููู ูููุง </font></font><code>a &lt; b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ ุจุณูุทุฉ </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุชููู ุงููุณูุฉ ูุทููุจุฉ. </font><font style="vertical-align: inherit;">ูุนูุฏูุง </font></font><code>a/2 &lt; b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู ุงููุชูุฌุฉ ุจุณูุทุฉ </font></font><code>a - b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุฏูุง ูู ุงูุญูุณุจุฉ</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">a %= b;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุงูููุงุก </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &gt;= b) { a -= b; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &gt;= b) a %= b; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุฏ ุชูููุฉ ุงููุณูุฉ ูุจูุฑุฉ ุฌุฏูุง ุ ุญูุซ ุฅู ุฒูุงุฏุฉ ุชูููุฉ ูุฐุง ุงูุฑูุฒ ุงูุฃูุซุฑ ุชุนููุฏูุง ูููู ุฃู ูุจุฑุฑ ููุณู ุนู ุทุฑูู ุชูููุฑ ุงูููุช ุจุณุจุจ ููุต ุงูุชูุณูู. </font></font><br><br><h5 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุฎูุท ูุฑู ุงููุนุจ ุงููุจูุฑุฉ </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุคุฏู ุฅุถุงูุฉ ูุฐุง ุงูุชุญุณูู ุฅูู ุชุญุณู ูุจูุฑ ูู ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูููุงุณ ุงููุจูุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูู ูุฑุฉ ุฃุฎุฑู ุฃูุซุฑ ูุถูุญุง ูู ุฑูุฒ 64 ุจุช ุ ุญูุซ ุชููู ุนูููุฉ ุฃุฎุฐ ุงูุจุงูู ุฃูุซุฑ ุชูููุฉ. </font><font style="vertical-align: inherit;">ุชูุธูุฑ ุทุฑููุฉ ุงูุจุงูู ุงููุฒุฏูุฌ (ุฃุณููุจ OpenBSD) ุงูุฅุตุฏุงุฑุงุช ุฐุงุช ุงูุชุญุณููุงุช ูุนูููุฉ ุงูุจุงูู ูุงุญุฏุฉ ููุท ูููููููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c56/e1a/669/c56e1a669836477e46f870bd1bc7a6c9.svg"></div><br>      -  ,         . <br><br><h5 style=";text-align:right;direction:rtl">   Small-Shuffle </h5><br>        small-shuffle,      ,     .    ,     . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6fa/4db/b65/6fa4dbb65b9a3f6c6f9e8ba4f7b455db.svg"></div><br><h5 style=";text-align:right;direction:rtl">      </h5><br>        . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e0e/ae7/758/e0eae77583cc457a9e923540ad954257.svg"></div><br><h4 style=";text-align:right;direction:rtl"> :    </h4><br>              ,           .               . <br><br><h5 style=";text-align:right;direction:rtl">    32-  </h5><br>      32-  ,       ,    32-  : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/21b/913/a41/21b913a412f4fcae1d02afabc90b236c.svg"></div><br>   ,   ,  <code>pcg32_fast</code>      โ      Xoroshiro (    ).     ,     -       โ      .  ,           5%,   ,     ยซยป. <br><br><h5 style=";text-align:right;direction:rtl">    64-  </h5><br>      64-  ,       ,    32-  .   ,     32-  ,          64-   ,   32- . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/928/16c/b24/92816cb249e7f76c4ed4e11c65f67475.svg"></div><br>   ,  <code>mcg128_fast</code>  ,          5%,       . <code>pcg64</code>  <code>pcg64_fast</code>    <code>mcg128_fast</code> ,       128-    (, LCG)  128-    (, MCG).   ,          , <code>pcg64</code>    20%  64-  . <br><br>     ,     ,      64- ,  64-   ,  32-. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br>      ,       (, 32-  )          45%.                     66%;  ,      . <br><br>    ( ) โ    (   ).  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bounded_rand(<span class="hljs-keyword"><span class="hljs-keyword">rng_t</span></span>&amp; rng, <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> x = rng(); <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> m = <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(x) * <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(range); <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> l = <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>(m); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l &lt; range) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> t = -range; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t &gt;= range) { t -= range; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t &gt;= range) t %= range; } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (l &lt; t) { x = rng(); m = <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(x) * <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>(range); l = <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>(m); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m &gt;&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>; }</code> </pre> <br>         ,          . <br><br><h3 style=";text-align:right;direction:rtl"> :    </h3><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitHub</a> .     23   <code>bounded_rand</code>   26   (13 32-   13 64-),    (GCC 8  LLVM 6),    26 * 23 * 2 = 1196  ,       15 seed,   1196 * 15 = 17 940   ,       .       48-     Xeon E7-4830v3   2,1 .          . <br><br>        . ,    <code>jsf32.STD-libc++</code> ,   โ <code>mt19937.BIASED_FP_MULT_SCALE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงููุนูุงุฑ 3 ุ ูุฃุฎุฐ ุงูุฃุฎูุฑ 69.6ูช ููุชูุง ุฃูู. </font><font style="vertical-align: inherit;">ููุฐุง ูู ุ ุงูููุช ูู ูุฐุง ุงููููู ุงูุฎูุงูู ูุณุชูุฏ ุฅูู ุจูุงูุงุช ูู ุงููุงูุน.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar455702/">https://habr.com/ru/post/ar455702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar455692/index.html">ASZP: ุฅุนุงุฏุฉ ุชุตููู ุงูุดุนุฑ ุฃู ุงููุณุฑุญ ูุจุฏุฃ ุจุดูุงุนุงุช</a></li>
<li><a href="../ar455694/index.html">ุจููุฉ ุฅุนุฏุงุฏ ุงูููุงุชูุฑ ูู ุงูุฌูู ุงูุชุงูู: ุงูุงูุชูุงู ุฅูู Tarantool</a></li>
<li><a href="../ar455696/index.html">ุงูุญุงูุฉ ุงูุฅููุชุฑูููุฉ ูููุณุชูุจู. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar455698/index.html">ูุชุงุจ "ููู ุชุนูู ุฌุงูุง ุณูุฑูุจุช"</a></li>
<li><a href="../ar455700/index.html">4 ุงูุญูู ุงูุชู ุณุงุนุฏุชูุง ุนูู ุชุญุณูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ</a></li>
<li><a href="../ar455710/index.html">ููุงุฐุง ูุญุชุงุฌ ูู Leroy Merlin ุฅูู ูุณู ุงูุชุทููุฑ ุงูุฑูุณู ุงูุฎุงุต ุจูุง ูู 200 ุดุฎุต</a></li>
<li><a href="../ar455714/index.html">ุชุตุฏูุฑ ููุงุฐุฌ Google ุชููุงุฆููุง ุฅูู Notion ุจุงุณุชุฎุฏุงู IFTTT ู Django</a></li>
<li><a href="../ar455716/index.html">15 ุฃูุถู ุงูููุงุฑุณุงุช ููุดุฑ ุจุฑุงูุฌ ุฐูุงุก ุงูุฃุนูุงู</a></li>
<li><a href="../ar455720/index.html">ููู ูุจูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฃูุธูุฉ ุงูุฅุนูุงู</a></li>
<li><a href="../ar455722/index.html">ุจุงูุซูู ูุณุชููู ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ ุฃู ููููุฉ ุชูููู ุญุฌู ุงูุฃุดูุงุกุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>