<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø üôÜüèº üöÇ Introducci√≥n al nuevo sistema de tarjeta de mosaico Unity üî§ üòî üë©üèΩ‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La familiaridad con el sistema de mosaico 2D Unity ofrece una excelente oportunidad para ahorrar tiempo a los desarrolladores independientes y estudio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introducci√≥n al nuevo sistema de tarjeta de mosaico Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412765/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  La familiaridad con el sistema de mosaico 2D Unity ofrece una excelente oportunidad para ahorrar tiempo a los desarrolladores independientes y estudios de juegos para crear prototipos y crear juegos 2D de alta calidad. <br><br>  Sin este sistema, puede pasar d√≠as, si no semanas, escribiendo su propio sistema de tarjeta de mosaico o procesando el de otra persona.  Y esto es solo programaci√≥n, pero ¬øqu√© pasa con el editor de mapas de mosaico? <br><br>  El nuevo sistema es gratuito y est√° integrado directamente en el editor de Unity.  Proporciona muchas caracter√≠sticas que cubriremos en este tutorial. <br><br>  En este art√≠culo, utilizaremos un simple juego de mosaicos en 2D para descubrir lo siguiente: <br><br><ul><li>  C√≥mo funcionan las fichas. </li><li>  C√≥mo habilitar mapas de mosaico en Unity y personalizar la cuadr√≠cula. </li><li>  C√≥mo agregar sprites a un proyecto, convertirlos en mosaicos y luego agregarlos a la paleta de mosaicos. </li><li>  C√≥mo usar las herramientas del editor de mosaicos para crear niveles. </li><li>  C√≥mo ordenar los mosaicos y colocarlos en diferentes capas. </li><li>  C√≥mo agregar fichas de f√≠sica de Unity. </li><li>  C√≥mo colorear din√°micamente los azulejos. </li><li>  C√≥mo cambiar mosaicos prefabricados usando c√≥digo nativo y l√≥gica. </li><li>  C√≥mo agregar sus propias extensiones y scripts de mapas en mosaico al proyecto. </li></ul><a name="habracut"></a><br>  S√≠, la lista fue genial.  Pero no tenga miedo: cuando comencemos a comprender, comprender√° r√°pidamente cu√°n simples son estas herramientas. <br><br><blockquote>  <em>Nota:</em> este tutorial asume que eres bueno trabajando con el editor de Unity.  Si cree que no est√° familiarizado con √©l, el tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Introducci√≥n a Unity</a> tiene todo lo que necesita para aprender este tutorial.  Adem√°s, necesita Unity versi√≥n 2017.3 o superior. </blockquote><br><h2>  ¬øQu√© es un juego de fichas? </h2><br>  Un juego de fichas 2D es cualquier juego en el que los niveles o √°reas de juego consisten en muchas fichas peque√±as (fichas) que juntas forman una cuadr√≠cula de fichas.  A veces, las diferencias entre las fichas pueden ser obvias, y a veces parecen s√≥lidas e indistinguibles para los jugadores. <br><br>  La colecci√≥n de fichas en el juego se llama un conjunto de fichas, y cada ficha suele ser un sprite, parte de una hoja de sprites.  Si desea lidiar mejor con las hojas de sprites, tenemos un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutorial</a> que describe las hojas de sprites de Unity. <br><br>  Como puede ver en este tutorial, generalmente los mosaicos son cuadrados.  Pero pueden tomar otra forma: rect√°ngulos, paralelogramos o hex√°gonos.  En los juegos, generalmente se usa una vista superior o lateral, pero a veces en los juegos de fichas, tambi√©n se usa 2.5D. <br><br>  Quiz√°s ya conozcas los dos juegos m√°s populares que usan el sistema de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i>fichas</i></a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i>Starbound</i></a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i>Terraria</i></a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aac/428/8ee/aac4288ee7c7868202364a050a82e34a.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/650/d2d/db4/650d2ddb41661d2b4ae2b948fccee019.png"></div><br><h2>  Llegar al trabajo </h2><br>  Descargue los <a href="">materiales</a> del proyecto para este tutorial y descomprima el archivo .zip. <br><br>  Inicie el editor de Unity y cargue el <em>proyecto de inicio de Rayzor</em> desde los materiales del proyecto desempaquetados. <br><br>  Esto es con lo que trabajar√° en este proyecto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e3/ae3/784/2e3ae3784a7e0cda552c51902367eb8a.png"></div><br><ul><li>  Cinemachine / Gizmos: Unity Cinemachine se agrega solo para implementar una c√°mara f√°cil de usar despu√©s del reproductor. </li><li>  Paletas: en esta carpeta almacenaremos nuestras propias paletas de mosaicos. </li><li>  Prefabricados: algunos prefabricados prefabricados que usamos m√°s adelante en el juego. </li><li>  Escenas: aqu√≠ abriremos y guardaremos escenas. </li><li>  Guiones: unos simples guiones para controlar el movimiento del jugador, la l√≥gica de la colisi√≥n de trampas y ganar / perder en el juego.  Esta carpeta tambi√©n contiene secuencias de comandos Unity Tilemap del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio Unity 2D Extras Github</a> , que usaremos m√°s adelante. </li><li>  Sfx: sonidos para el juego. </li><li>  Sprites: sprites 2D a partir de los cuales crearemos paletas de mosaicos.  Se toman de un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paquete de cuevas y mazmorras para roguelike</a> .  El autor del paquete es kenney.nl. </li></ul><br><h2>  Creaci√≥n de juegos </h2><br>  Abra la escena del <em>juego</em> desde la carpeta <em>Escenas</em> . <br><br>  Haga clic en el bot√≥n <em>Reproducir</em> en el editor para iniciar el juego.  En la ventana <em>Juego</em> , mueve al h√©roe con las teclas WASD o las "flechas". <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20e/1a1/8a8/20e1a18a8e44d9eeef984cb19e43527e.gif"></div></div></div><br>  Mientras el h√©roe deambula por el fondo aparentemente interminable de la c√°mara con el color # 00000, perdido en el vac√≠o. <br><br>  Para solucionar esto, necesitamos herramientas de mosaico 2D para construir niveles y mec√°nicas de juego interesantes. <br><br><h3>  Conociendo la paleta de mosaicos </h3><br>  En el editor, haga clic en <em>Ventana -&gt; Paleta</em> de <em>mosaicos</em> para abrir la ventana Paleta de mosaicos 2D. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9c/4c4/681/e9c4c46814518dadf262f42ceab70563.png"></div><br>  Esta ventana ser√° tu mejor amigo cuando trabajes en juegos de fichas en Unity. <br><br><ol><li>  Esta serie de iconos proporciona herramientas b√°sicas para manipular mosaicos, dibujar y eliminar </li><li>  Este selector le permite crear diferentes paletas que se pueden percibir como paletas para dibujar, en las que colocamos los "colores" y, en este caso, los mosaicos. </li><li>  Este selector le permite crear pinceles con diferentes comportamientos.  Puede agregar sus propios pinceles, cuyo comportamiento es diferente del pincel predeterminado (por ejemplo, dibujar mosaicos prefabricados con funcionalidad adicional) </li></ol><br>  Haga clic en <em>Crear nueva paleta</em> y nombre la paleta <em>RoguelikeCave</em> .  No cambie las opciones de cuadr√≠cula y celda. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab3/a35/339/ab3a35339e71da7a385d6c778abd4f7d.png"></div><br>  Haga clic en <em>Crear</em> y elija guardar la nueva paleta en la <em>carpeta Activos \ Paletas del</em> proyecto.  En √©l, cree una nueva carpeta <em>RoguelikeCave</em> . <br><br>  Ahora la estructura de carpetas de su proyecto deber√≠a verse as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/362/087/33a/36208733a60c0a788173c9cb199a1423.png"></div><br>  En la ventana del editor de <em>paleta de</em> <em>mosaico</em> , se debe seleccionar <em>RoguelikeCave</em> ;  en este punto todav√≠a no tenemos ning√∫n mosaico: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/0f3/e89/9f80f3e894a6a3d64c3f9951b03046e5.png"></div><br>  ¬øC√≥mo puede un artista crear sus obras maestras si no tiene materiales? <br><br>  Sin cerrar la ventana Tile Palette, seleccione la carpeta del proyecto <em>Sprites / roguelike-cave-pack</em> y expanda el activo <em>roguelikeDungeon transparent.png</em> .  Luego seleccione todos los sprites en esta hoja de sprites: seleccione el primer sprite, mantenga presionada la tecla shift y seleccione el √∫ltimo sprite. <br><br>  Arrastre todos los sprites seleccionados a la ventana RoguelikeCave de Tile Palette: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/d5b/aae/055d5baae6a8c222f66f0fec36824e05.gif"></div></div></div><br>  Arrastre y suelte los sprites en la ventana Tile Palette y seleccione un lugar para almacenar activos en Unity. <br><br>  Cree una nueva carpeta <em>Tiles</em> en <em>Assets / Palettes / RoguelikeCave</em> y seleccione esta carpeta como ubicaci√≥n de almacenamiento: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16f/609/327/16f6093279a3a3b3c5c728ebdcd07afd.png"></div><br>  Unity generar√° un activo de mosaico para cada sprite agregado desde la hoja de sprites.  Espere a que se complete el proceso, luego aumente el tama√±o de la ventana Paleta de mosaicos y admire las filas pares de hermosos mosaicos nuevos ubicados en la paleta RoguelikeCave: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27d/c87/f36/27dc87f368115a032b42d4b8058bdd1d.png"></div><br>  Repita el proceso anterior para crear una paleta de mosaicos usando la ventana <em>Paleta de</em> mosaicos, pero esta vez <em>asigne un</em> nombre a la nueva paleta <em>RoguelikeCustom</em> . <br><br>  Coloque la nueva paleta en una nueva carpeta.  Asigne un nombre a la carpeta <em>RoguelikeCustom</em> y <em>mu√©vala a la</em> carpeta <em>Activos / Paletas del</em> proyecto. <br><br>  Esta vez, usando el proceso descrito anteriormente, use los sprites de la <em>hoja Assets / Sprites / roguelike-custom / roguelike-normal-cutdown-sheet.png</em> para completar los mosaicos de la nueva paleta.  Cree una carpeta de <em>mosaicos</em> dentro de la carpeta de paleta <em>RoguelikeCustom</em> y mueva los activos de mosaico all√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/402/c0d/fb6/402c0dfb6ca659f755ba63cafa6c288b.png"></div><br>  Al√©grate por ti mismo, ¬°ahora conoces la magia de crear una paleta de mosaicos! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/782/ed3/b0f/782ed3b0f5bc2546c2116c07f9652f7f.png"></div><br><h3>  Mapa de mosaico de malla </h3><br>  Abra el men√∫ <em>GameObject</em> en la parte superior del editor de Unity (o la barra de men√∫ de Unity si est√° utilizando MacOS), haga clic en <em>Objeto 2D</em> y luego en <em>Tilemap</em> para crear una nueva cuadr√≠cula de Tilemap: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/99d/e4e/25999de4efb34557bac40669f988fcdd.png"></div><br>  Deber√≠a ver que <em>se ha</em> agregado una nueva <em>cuadr√≠cula de</em> GameObject a la jerarqu√≠a de escenas.  Expanda y seleccione el mapa de <em>mosaico de</em> GameObject <em>incorporado</em> . <br><br>  <em>Piensa en</em> este <em>Tilemap</em> como una capa (quiz√°s una de muchas) en tu juego.  Puede agregar nuevos objetos para crear capas adicionales de Tilemap. <br><br>  En el inspector, ver√° dos componentes que Unity agreg√≥ autom√°ticamente a este GameObject: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a0/f58/3fa/1a0f583faa33dfc44002dde103c8d97e.png"></div><br><ul><li> El motor de Unity utiliza el componente <code>Tilemap</code> para almacenar sprites en el circuito marcado con el componente <code>Grid</code> ; en nuestro caso, se trata de GameObject <em>Grid</em> .  Cuando crea Tilemap por primera vez, realmente no tiene que preocuparse por todas las caracter√≠sticas t√©cnicas de c√≥mo Unity se comunica entre todos estos componentes. </li><li>  <code>Tilemap Renderer</code> designa el material que se utilizar√° para representar los mosaicos en Tilemap.  Tambi√©n le permite configurar las propiedades de clasificaci√≥n de esta capa Tilemap. </li></ul><br>  Cambie el nombre de GameObject <em>Tilemap</em> a <em>BaseLayer</em> . <br><br><h3>  Usar varias herramientas de dibujo de paleta de mosaicos </h3><br>  Cambie en el editor al modo Escena. <br><br>  Sin cerrar la paleta de mosaico, seleccione la paleta RoguelikeCave y luego seleccione la herramienta <em>Pincel</em> (o presione <em>B</em> ).  Seleccione un azulejo de arena como se muestra a continuaci√≥n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcd/44c/cb4/dcd44ccb47904a96bcae52075ea37e3e.png"></div><br>  En la ventana de escena, mueva el cursor a la cuadr√≠cula al lado del jugador.  El cepillo de baldosas de arena se ajustar√° a la cuadr√≠cula. <br><br>  Manteniendo presionado el bot√≥n izquierdo del mouse, dibuje un √°rea rectangular alrededor del jugador.  Se dibujar√° en la capa Tilemap BaseLayer: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c5/6d6/068/3c56d606885a624960d5ed83106893dd.gif"></div></div></div><br>  Dibujar √°reas grandes puede ser una tarea mon√≥tona, por lo que hay un pincel de <em>caja llena</em> que se puede usar para pintar √°reas grandes.  En la ventana Paleta de mosaicos, haga clic en el <em>icono del pincel cuadrado</em> (o presione <em>U</em> ). <br><br>  Regrese al editor y dibuje un rect√°ngulo a√∫n m√°s grande alrededor del jugador presionando y manteniendo presionado el bot√≥n izquierdo del mouse, arrastrando el cursor desde la esquina superior izquierda a la esquina inferior derecha: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85d/f5f/35c/85df5f35c7f37f325e814568d970553f.gif"></div></div></div><br>  Aunque agregamos un poco de color al juego, este calabozo de arena se ve aburrido.  ¬°Es hora de agregar algunos detalles! <br><br>  Use la opci√≥n de men√∫ <em>GameObject -&gt; Objeto 2D -&gt; Tilemap</em> para crear una nueva capa de Tilemap.  Esta vez ser√° el √∫nico objeto creado en la jerarqu√≠a, porque ya tenemos una cuadr√≠cula adecuada.  Cambie el nombre de esta capa a <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/074/4a8/b33/0744a8b330652fe6f4ba7b3939d987ec.png"></div><br>  En la ventana Paleta de <em>mosaicos</em> , cambie el <em>Mapa</em> de <em>mosaicos activo</em> a la capa <em>DungeonFloorDecoration</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/272/dc3/87c/272dc387cdf5f84261eebf6da3dde2a9.png"></div><br>  Seleccione la herramienta <em>Pincel</em> ( <em>B</em> ), luego dibuje los objetos dispersos en el mapa en la ventana Escena: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbb/4dd/f6b/bbb4ddf6b3f5ba0393f5a6d3d04254eb.png"></div><br>  Deshabilite y vuelva a habilitar <em>DungeonFloorDecoration</em> en la jerarqu√≠a de GameObject para ver c√≥mo el renderizado en el Tilemap activo cambia la capa DungeonFloorDecoration y todos los mosaicos renderizados caen en esta nueva capa: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe3/416/3a0/fe34163a070ac1c85f8d0aee80356a90.gif"></div></div></div><br>  Crea una nueva capa de Tilemap usando la <em>opci√≥n GameObject -&gt; 2D Object -&gt; Tilemap nuevamente</em> .  Ll√°malo <em>Collideable</em> .  En el futuro, lo usamos para crear muros y bordes. <br><br>  Cambie Active Tilemap en la ventana Tile Palette a <em>Collideable</em> .  Seleccione la herramienta Pincel ( <em>B</em> ) y luego dibuje los siguientes mosaicos para construir un muro alrededor del √°rea de juego.  Las √°reas resaltadas en rojo en la imagen a continuaci√≥n son las partes nuevas que deben agregarse: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f0/7e3/004/3f07e30041691b855a4d1870d69f2e34.png"></div><br>  Eche un vistazo a la captura de pantalla a continuaci√≥n de la ventana Paleta de mosaicos para averiguar d√≥nde encontrar los mosaicos necesarios para construir el muro.  No olvide que puede usar las combinaciones CTRL-Z o CMD-Z para deshacer la acci√≥n o borrar errores usando el pincel actual (mientras mantiene presionada la <em>tecla May√∫s</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c94/67e/f7c/c9467ef7c3ac69be35fea0375965760d.png"></div><br>  Inicia el juego en el editor e intenta atravesar el muro: <br><br><div class="spoiler">  <b class="spoiler_title">¬øQui√©n activ√≥ el modo noclip?</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49d/6fb/e88/49d6fbe88e6368ae9d9d47caa6ed2ece.gif"></div></div></div><br>  ¬øNo esperabas esto? <br><br>  El problema es que acabamos de dibujar los mosaicos est√°ndar y todav√≠a no hemos aplicado la unidad de f√≠sica m√°gica a la capa Tilemap. <br><br>  Seleccione GameObject <em>Collideable</em> y agregue un nuevo componente haciendo clic en el bot√≥n <em>Agregar componente</em> en la ventana del <em>Inspector</em> ;  En el campo de b√∫squeda, ingrese <em>Tilemap Collider 2D</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15e/7ec/614/15e7ec614a110e3de5020f7b5f6a2d4d.png"></div><br>  Este componente fue creado espec√≠ficamente para los juegos de fichas Unity 2D.  Simplemente aplica la forma del colisionador f√≠sico a todos los mosaicos en la capa a la que se agreg√≥, sin realizar ning√∫n otro trabajo. <br><br>  Comienza el juego nuevamente e intenta atravesar la pared.  ¬°Acceso denegado! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/8f1/a3a/2b28f1a3a2f60422649719e084a9fd08.gif"></div></div></div><br><blockquote>  <em>Nota: a</em> veces, al mover la c√°mara, puede observar peque√±as l√≠neas negras entre algunos mosaicos.  Esto parece ser un problema de movimiento de la c√°mara en proyectos con el sistema 2D Tilemap Unity.  Puede deshacerse de √©l casi por completo deshabilitando Anti-Aliasing en la configuraci√≥n de gr√°ficos.  Sin embargo, incluso si esto se hace en el proyecto de adquisici√≥n, el efecto todav√≠a es ligeramente notable.  La soluci√≥n a este problema puede ser agregar su propio script de movimiento de c√°mara con desplazamiento de p√≠xeles.  Una buena discusi√≥n de este problema se puede encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </blockquote><br>  Las colisiones funcionan bien, y podr√≠as pensar que es suficiente.  Pero por ahora, los colisionadores no est√°n optimizados de manera eficiente.  En el modo Escena, ampl√≠e una parte de la pared y observe los contornos de los colisionadores: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ea/3f8/af3/4ea3f8af32c2e23852a146578a7f9f49.png"></div><br>  Hay un colisionador alrededor de cada mosaico.  Las secciones de la pared intermedia no necesitan estos colisionadores adicionales. <br><br>  Con GameObject <em>Collideable seleccionado</em> , agregue el componente <em>Composite Collider 2D</em> .  Esto tambi√©n agregar√° autom√°ticamente RigidBody2D. <br><br>  Establezca el par√°metro <em>BodyType</em> RigidBody2D en <em>Est√°tico</em> , y luego seleccione la casilla de verificaci√≥n <em>Usado por Compuesto</em> en el componente <em>2D de Tilemap Collider</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ca/12b/9e0/2ca12b9e01baa5b477288bc06cf546cf.png"></div><br>  Despu√©s de eso, notar√° que estos colisionadores cuadrados innecesarios en el medio de las paredes desaparecen. <br><br>  Termine de crear los muros construy√©ndolos y cerr√°ndolos en la parte superior, de unos 16 azulejos de altura.  No te olvides  que el Collideable debe seleccionarse como el mapa de mosaico activo de la <em>ventana de</em> paleta de mosaico: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e6/33f/81d/7e633f81d090fd304dcee26abb4cf760.png"></div><br>  La secci√≥n de mazmorra no ser√° de ninguna dificultad para nuestro h√©roe sin obst√°culos.  Ahora comenzaremos a trabajar en la creaci√≥n de la sala de la muerte, complementada por hermosos corredores de m√°rmol antiguos.  Despu√©s de superar todos estos obst√°culos, el jugador recibir√° una recompensa: una monta√±a de oro. <br><br>  Para dibujar estos corredores, usaremos el pincel de mosaico especial <em>Rule Tile</em> .  Como viste al comienzo del tutorial, ya se han agregado al proyecto scripts de mosaico adicionales del repositorio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Unity 2D Extras</a> Github.  Uno de ellos es Rule Tile. <br><br>  Rule Tile nos permite establecer reglas sobre qu√© mosaicos dibujar en funci√≥n de los mosaicos vecinos que tenemos. <br><br>  Haga clic derecho en la carpeta <em>Prefabs</em> del proyecto y seleccione <em>Crear -&gt; Mosaico de reglas</em> (este elemento debe estar en la parte superior del men√∫).  Nombre el nuevo elemento <em>MarbleFloorRuleTile</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/702/42b/66c/70242b66c05805fb9a147521da24aa89.png"></div><br>  Seleccione este nuevo <em>MarbleFloorRuleTile</em> y use el inspector para establecer el <em>Sprite predeterminado</em> en <code>roguelikeDungeon_transparent_335</code> .  Luego agregue una nueva regla de Regla de mosaico haciendo clic en el √≠cono <em>+</em> .  Seleccione el valor de <code>roguelikeDungeon_transparent_339</code> para <em>Sprite de</em> esta regla y haga clic en todos los cuadrados exteriores en el esquema de la regla para que cada uno tenga una flecha verde que apunte hacia afuera: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/546/707/124/546707124181cac98c682dfadeb56491.gif"></div></div></div><br>  Usando la herramienta Pincel de relleno de caja ( <em>B</em> ) en la Paleta de mosaicos y seleccionando la Capa base de <em>Tilemap</em> , dibuje una secci√≥n recta de la pared de m√°rmol.  Es necesario que cubra todo el espacio libre del piso. <br><br>  Puede notar que cuando hacemos esto, la capa cerrar√° los azulejos de la pared con colisionadores, porque el orden de las capas a√∫n no se ha establecido.  Esto se puede solucionar f√°cilmente seleccionando GameObject <em>Collideable</em> y cambiando el <em>orden en la capa</em> del componente <em>Tilemap Renderer</em> a un valor m√°s alto ( <em>5</em> ser√° suficiente): <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/314/631/467/314631467ec638cad00a0082fae58113.gif"></div></div></div><br>  Regrese a la carpeta <em>Prefabs</em> del proyecto, abra la ventana Mosaico y seleccione la paleta RoguelikeCave, y luego arrastre <em>MarbleFloorRuleTile</em> a un espacio vac√≠o en la paleta: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de3/c7b/15b/de3c7b15b5b9e8531b15824c196d480d.gif"></div></div></div><br>  Use el pincel de relleno de caja y dibuje algunas secciones del piso de m√°rmol en la habitaci√≥n: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/092/120/1ff/0921201ff5eb1be81f34bfebff121079.gif"></div></div></div><br>  Tenga en cuenta que un mosaico de reglas personalizado, completamente rodeado desde todos los √°ngulos y caras, se convierte en un mosaico decorado (el sprite seleccionado en el editor de Reglas de mosaico). <br><br><h3>  Esta es una trampa! </h3><br>  No, no agregaremos al Almirante Akbar al juego como personaje.  ¬°Crearemos un pincel de mosaico para la prefabricaci√≥n de la trampa, que usaremos para dibujar trampas que disparan con cuchillas giratorias! <br><br>  Cree un nuevo GameObject vac√≠o en la jerarqu√≠a y as√≠gnele el nombre <em>ShootingTrap</em> .  Cree un ni√±o GameObject vac√≠o en ShootingTrap.  N√≥mbralo <em>Sprite</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66e/754/55e/66e75455eda0bbdb02033ebc5cff618f.png"></div><br>  Seleccione <em>Sprite</em> y agregue el componente <em>Renderizador de Sprite</em> .  Establezca la <em>Capa de clasificaci√≥n</em> en <em>Reproductor</em> y el <em>Orden en Capa</em> en <em>1</em> para que se represente sobre el resto de las capas.  Seleccione el campo <em>Sprite</em> y configure <em>roguelikeDungeon_transparent_180</em> como el sprite. <br><br>  Ahora gire la Transformaci√≥n del objeto <em>Sprite</em> en <em>-90</em> en el eje <em>Z</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/540/666/ded/540666ded98bc99613b7dd5d6c7beeb7.png"></div><br>  A continuaci√≥n, regrese a GameObject <em>ShootingTrap</em> y agregue un nuevo componente utilizando el inspector.  En el campo de b√∫squeda, encuentre <em>Shooting Trap</em> y adjunte este script. <br><br>  Este script se agrega a los archivos de proyecto que descarg√≥;  de hecho, lanza corutina cada dos segundos, creando una instancia prefabricada de la hoja de sierra giratoria (o cualquier otra prefabricada) en la posici√≥n actual de la trampa. <br><br>  Establezca el par√°metro <em>Item to Shoot Prefab</em> del componente Shooting Trap en <em>Projectile</em> (el prefab se encuentra en <em>/ Assets / Prefabs</em> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a59/614/6dc/a596146dc4ec7d91eb3f17e9976f5945.png"></div><br>  Inicie el juego nuevamente en el editor y use el modo Escena para encontrar la trampa.  Ella trabaja! <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef0/771/5ae/ef07715aed64732a12386defeec1b1cb.gif"></div></div></div><br>  Arrastre una copia de <em>ShootingTrap</em> desde la jerarqu√≠a a la <em>carpeta / Assets / Prefabs del</em> proyecto para crear un prefab.  Eliminar ShootingTrap de la jerarqu√≠a. <br><br>  Utilizamos otro script de pincel de mosaico llamado <em>PrefabBrush</em> para crear un pincel que pueda dibujar prefabricados en capas de Tilemap. <br><br>  Haga clic derecho en la <em>carpeta / Assets / Prefabs del</em> proyecto y seleccione <em>Crear -&gt; Pincel prefabricado</em> .  Denomine el objeto <em>PrefabBrush</em> . <br><br>  Utilice el inspector para establecer el par√°metro <em>Prefabs Size</em> PrefabBrush en <em>1</em> y el par√°metro <em>Elemento 0</em> en <em>ShootingTrap</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/58e/0df/c8458e0df00c239708a275d5c17fd25b.png"></div><br>  Cree una nueva capa de mapa de mosaico llamada <em>Trampas</em> en la <em>cuadr√≠cula</em> y abra la ventana Paleta de mosaico. <br><br>  Seleccione el pincel de mosaico normal ( <em>B</em> ) y use el men√∫ desplegable en la parte inferior de la ventana Paleta de <em>mosaico</em> para seleccionar <em>PrefabBrush</em> .  Seleccione Active Tilemap <em>Traps</em> como la capa y use la ventana Scene para dibujar varias trampas prefabricadas a lo largo del borde izquierdo de la habitaci√≥n. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce1/f3a/3b6/ce1f3a3b6fbea97b23f8a388404772e8.gif"></div></div></div><br>  Expanda las <em>trampas de</em> GameObject en la jerarqu√≠a y experimente con el valor de <em>Demora de inicio de</em> <em>disparo</em> para cada valor en cada Gameobject <em>ShootingTrap</em> utilizando el script de la trampa de disparo en el inspector.  Agregue 0.25 al valor de cada trampa, es decir: <br><br><ul><li>  First ShootingTrap -&gt; Shoot Start Delay = 0.1 </li><li>  Second ShootingTrap -&gt; Shoot Start Delay = 0.35 </li><li>  Third ShootingTrap -&gt; Shoot Start Delay = 0.6 </li><li>  Y as√≠ sucesivamente ... </li></ul><br>  Inicia el juego y pasa la prueba, si te atreves. <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/809/ea5/02b809ea5ea2b177b3da6d537a447794.gif"></div></div></div><br><h3>  Objetivo final </h3><br>  El objetivo de esta mini mazmorra es conseguir un mont√≥n de oro.  La fama y la fortuna esperan a quienes lo alcanzan, evitando las espadas voladoras mortales. <br><br>  Crea una nueva capa de Tilemap llamada <em>Goal</em> en GameObject <em>Grid</em> .  Seleccione <em>Objetivo</em> y cambie el valor del <em>Orden de representaci√≥n de Tilemap en Capa</em> a <em>2</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ece/7bf/f1f/ece7bff1f2eec46dab6974ec9293d8e8.png"></div><br>  Sin cerrar la ventana Paleta de mosaicos, aseg√∫rese de que PrefabBrush todav√≠a est√© seleccionado.  Haga que el <em>Elemento 0 se</em> refiera al <em>Objetivo</em> <em>preestablecido</em> de la <em>carpeta / Assets / Prefabs del</em> proyecto. <br><br>  Esta es una casa prefabricada con una monta√±a de sprites dorados, con Box Collider 2D con Is Trigger activado, una fuente de sonido adicional y con un simple script <code>Goal.cs</code> que reproduce el sonido de alcanzar el objetivo y reinicia el nivel cuando el jugador cae en el √°rea de activaci√≥n. <br><br>  Use el pincel de mosaico est√°ndar para dibujar un mosaico prefabricado objetivo en la parte superior de la habitaci√≥n detr√°s de las trampas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/970/1c0/ee49701c003075b4bb2a048b6d2e8039.png"></div><br>  Comienza el juego nuevamente e intenta alcanzar la meta.  Cuando llegue a este mosaico, se <code>OnTriggerEnter2D()</code> l√≥gica <code>OnTriggerEnter2D()</code> de <code>Goal.cs</code> , que reproducir√° el efecto de sonido y reiniciar√° el nivel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c1/736/d0e/2c1736d0e9eb131101cef9c7ee08a18d.png"></div><br><h3>  Toques finales </h3><br>  Ahora la mazmorra es demasiado ligera y libre.  Podemos agregarle estilo cambiando a un material de sprite 2D que pueda responder a la luz. <br><br>  Seleccione los objetos Sprite Player, Goal y ShootingTrap, y <em>haga que el</em> <em>material</em> Sprite Renderer use <em>SpriteLightingMaterial</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e8/7ce/36a/9e87ce36a51b69b514f71cf71992f4b5.png"></div><br>  Este es un material con un sombreador <em>Sprite / Diffuse</em> adjunto.  Permite que la iluminaci√≥n de la escena afecte a los sprites. <br><br>  En la <em>cuadr√≠cula de</em> GameObject <em>,</em> seleccione los <em>objetos BaseLayer, DungeonFloorDecoration, Collideable y Goal</em> , y luego use el inspector para usar tambi√©n el <em>Material de representaci√≥n de</em> <em>mosaico SpriteLightingMaterial</em> en el material. <br><br>  Luego seleccione <em>Luz direccional</em> en GameObject <em>Lights</em> y reduzca la Luz de <em>intensidad</em> a <em>0.3</em> . <br><br>  ¬°Mucho mejor! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fe/cb2/4ed/6fecb24ed773ea4b843e2ee32d3be164.png"></div><br>  Adem√°s, ahora notar√° que el jugador lleva una <em>luz de punto</em> , es decir, la <em>linterna</em> brilla a su alrededor. <br><br>  Ahora que los sprites en la escena usan el material correcto, la iluminaci√≥n de Unity afecta a todos los sprites circundantes. <br><br>  Arrastre dos copias del <em>prefabricado</em> FlickerLight desde la <em>carpeta / Assets / Prefabs del</em> proyecto en Scene y col√≥quelas en GameObject <em>Lights</em> . <br><br>  Establezca la primera posici√≥n prefabricada <em>(X: -11.25, Y: 4, Z: -1.35)</em> y la segunda - <em>(X: 2.75, Y: 4, Z: -1.35)</em> . <br><br>  Cree una nueva capa de Tilemap llamada <em>WallsAndObjects</em> y establezca el <em>Orden</em> del <em>renderizador de Tilemap en el</em> inspector de <em>capas</em> en <em>15</em> .  Recuerde que <em>Material</em> tambi√©n usa <em>SpriteLightingMaterial</em> . <br><br>  Cambie el pincel de la paleta de mosaico a <em>Pincel predeterminado</em> y el <em>Mapa</em> de <em>mosaico</em> <em>activo</em> a <em>WallsAndObjects</em> . <br><br>  Use la herramienta Pincel ( <em>B</em> ) para dibujar dos mosaicos de "l√°mpara de luz" debajo de cada uno de los nuevos FlickerLight que colocamos en las esquinas del √°rea inicial: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a8/2ae/b82/6a82aeb824326ec78184559b0986ef78.png"></div><br><h3>  Tiempo de dificultad </h3><br>  Veamos si podemos mejorar la mazmorra a√∫n m√°s.  Usa la capa Tilemap <em>WallsAndObjects</em> para crear estanter√≠as en la parte superior de la sala de mazmorras usando otra paleta de mosaicos llamada <em>RoguelikeCustom</em> .  Tambi√©n dibuje una o dos partes de la pared agrietada. <br><br>  Regrese a la capa Tilemap <em>DungeonFloorDecoration</em> y agregue algunos detalles m√°s al piso de m√°rmol, por ejemplo, grietas en varias baldosas: <br><br><div class="spoiler">  <b class="spoiler_title">GIF</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/611/5d7/f2a/6115d7f2a96969a47b9c262dd215623b.gif"></div></div></div><br>  ¬°Felicitaciones, has completado tu primer nivel de mini mazmorra!  Como resultado, deber√≠a obtener algo similar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f1b/190/063/f1b1900633e1a0fdad59453a238c5a17.png"></div><br><h2>  ¬øA d√≥nde ir despu√©s? </h2><br>  Si se salt√≥ un paso, puede ver el resultado final de este tutorial abriendo el proyecto <em>final de</em> Unity <em>Rayzor a</em> partir de <a href="">materiales</a> descargables. <br><br>  Aprendimos mucho en este tutorial, pero como con cualquier otro negocio, ¬°siempre hay algo m√°s! <br><br>  Hay interesantes secuencias de comandos de pincel de mosaico que no se tratan en este tutorial.  Lea sobre ellos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y piense si puede usarlos. <br><br>  Tambi√©n puede aprender c√≥mo crear mosaicos animados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es412765/">https://habr.com/ru/post/es412765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es412753/index.html">Inicie la pantalla en STM32 a trav√©s de LTDC ... en los registros</a></li>
<li><a href="../es412755/index.html">Telegram lanz√≥ el servidor proxy oficial MTProto</a></li>
<li><a href="../es412757/index.html">Bombillas LED en Jap√≥n</a></li>
<li><a href="../es412759/index.html">Nuevo servidor MTProto-proxy de Telegram</a></li>
<li><a href="../es412763/index.html">Uso de la placa de recarga Firefly-RK3288 con el SoC RockChip RK3288 Sensor t√©rmico digital Microchip I2C - MCP9808</a></li>
<li><a href="../es412767/index.html">CMG impacto 2016 revisi√≥n de la conferencia</a></li>
<li><a href="../es412769/index.html">Hice PWA y lo puse en tres tiendas de aplicaciones. Y aqu√≠ est√° lo que descubr√≠.</a></li>
<li><a href="../es412773/index.html">Astro-aeroespacial de Minsk</a></li>
<li><a href="../es412775/index.html">Experiencia personal: pasar del desarrollo de C de bajo nivel a la programaci√≥n Java</a></li>
<li><a href="../es412777/index.html">Construcci√≥n de columnas de obras maestras del mundo: QUAD 11L: los mejores "estantes" de las dos mil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>