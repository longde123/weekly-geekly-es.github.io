<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•µğŸ» ğŸ’° ğŸ™… Yandex.Mapsï¼šæˆ‘å»äº†å¡æ§åˆ¶å™¨-æˆ‘ç«‹å³è·å¾—äº†ç”¨æˆ·çš„ä½ç½®ï¼ˆå¥½å§ï¼Œç°åœ¨è®¤çœŸäº†ï¼‰ ğŸ•¦ âœ‹ğŸ» ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å†æ¬¡é—®å€™ï¼ 

 æœ€è¿‘ï¼Œæˆ‘å‘è¡¨äº†ä¸€ç¯‡å¯¹Yandex.Mapsçš„çƒ­çˆ±ã€‚ è¿™é¦–è¯—ã€‚ é¢‚ å®é™…ä¸Šï¼Œå¥¹åœ¨è¿™é‡Œhabr.com/en/post/479102 

 åœ¨ç¡®ä¿ç¨‹åºå‘˜ä¸­å¾ˆå°‘æœ‰è¯—æ­Œçˆ±å¥½è€…ä¹‹åï¼Œæˆ‘è¿˜æ˜¯å†³å®šä»¥ä¸€ç§æ›´åŠ â€œ HABRovskyâ€çš„æ–¹å¼é˜æ˜è¿™ç§æƒ…å†µã€‚ æ•è·å¤§é‡ä»£ç ï¼Œæƒ³æ³•å’Œå±å¹•æˆªå›¾ã€‚ èµ°å§ 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Yandex.Mapsï¼šæˆ‘å»äº†å¡æ§åˆ¶å™¨-æˆ‘ç«‹å³è·å¾—äº†ç”¨æˆ·çš„ä½ç½®ï¼ˆå¥½å§ï¼Œç°åœ¨è®¤çœŸäº†ï¼‰</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479432/">å†æ¬¡é—®å€™ï¼ <br><br> æœ€è¿‘ï¼Œæˆ‘å‘è¡¨äº†ä¸€ç¯‡å¯¹Yandex.Mapsçš„çƒ­çˆ±ã€‚ è¿™é¦–è¯—ã€‚ é¢‚ å®é™…ä¸Šï¼Œå¥¹åœ¨è¿™é‡Œ<a href="https://habr.com/ru/post/479102/">habr.com/en/post/479102</a> <br><br> åœ¨ç¡®ä¿ç¨‹åºå‘˜ä¸­å¾ˆå°‘æœ‰è¯—æ­Œçˆ±å¥½è€…ä¹‹åï¼Œæˆ‘è¿˜æ˜¯å†³å®šä»¥ä¸€ç§æ›´åŠ â€œ HABRovskyâ€çš„æ–¹å¼é˜æ˜è¿™ç§æƒ…å†µã€‚ æ•è·å¤§é‡ä»£ç ï¼Œæƒ³æ³•å’Œå±å¹•æˆªå›¾ã€‚ èµ°å§ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c36/cfb/219/c36cfb21967c60f0ee4a932e7e60dc43.jpg" alt="å›¾ç‰‡"><br><a name="habracut"></a><br> è®©æˆ‘ä»¬é‡æ–°å¼€å§‹ã€‚ <br><br> ä»»åŠ¡å¾ˆç®€å•ï¼š <b>å½“æ‚¨å¸¦ç€å¡ç‰‡è¿›å…¥æ§åˆ¶å™¨æ—¶ï¼Œæ‚¨éœ€è¦ç«‹å³â€œç¼©å°â€åˆ°ç”¨æˆ·çš„ä½ç½®ï¼ˆæ³¨æ„ï¼šæ‚¨è¿˜éœ€è¦ä»¥å¯è¯»çš„å½¢å¼è·å–åœ°å€ä»¥åŠæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤ï¼‰ã€‚</b> <br><br>  <u>æˆ‘ä»¬è£æ‰åˆ†æå¸ˆï¼šâ€œåˆ†è€Œæ²»ä¹‹â€ã€‚</u> <br><br> ä¸ºäº†å®ç°æ­¤ç›®æ ‡ï¼Œæœ‰å¿…è¦è§£å†³è®¸å¤šæŠ€æœ¯å’Œä¸šåŠ¡é—®é¢˜ï¼Œå³ï¼š <br><br>  0.è½¬åˆ°å¸¦æœ‰æ½œåœ¨æ¨¡å—çš„æ§åˆ¶å™¨ï¼Œä»¥ä½¿ç”¨åœ°ç†å®šä½ï¼ˆMRSGï¼‰ï¼Œå›è°ƒç­‰ã€‚ <br><br>  1.å·¥ä½œç»„ <br>  1.1å®æ–½å·¥ä½œç»„ <br>  1.2å¯åŠ¨IWG <br>  1.2.1è·å–ç”¨æˆ·åæ ‡ <br>  1.2.2çœ‹ä»– <br>  2 *ã€‚ ä»¥å¯è¯»æ ¼å¼è·å–èŒä½åœ°å€ã€‚ <br><br> åˆ‡æ¢åˆ°æ§åˆ¶å™¨ï¼ˆVIPER + Configuratorï¼‰ <br><br><pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddPresenter</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddPresentationLogic</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... func openMap(_ delegate: YandexMapSetPointViewControllerProtocol?) { router.routeTo(target: .addPlace(delegate)) } // ... }</span></span></code> </pre> <br> å§”æ‰˜åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå› æ­¤å½“æ‚¨æŒ‡å®šæ‰€éœ€çš„ç‚¹æ—¶ï¼Œå¯ä»¥é€šè¿‡åè®®å°†å…¶è¿”å›ç»™ä½¿ç”¨å¡è°ƒç”¨æ§åˆ¶å™¨çš„æ§åˆ¶å™¨ï¼š <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YandexMapSetPointViewControllerProtocol</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">didSelectPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> place: Place)</span></span></span></span> }</code> </pre> <br> ç»™å§”æ‰˜ï¼Œæˆ‘ä»¬å‘é€è°ƒç”¨ä»£ç çš„æ§åˆ¶éƒ¨åˆ†ã€‚ è¿™é‡Œçš„ä¸€åˆ‡ä¼¼ä¹éƒ½å¾ˆæ¸…æ¥šã€‚ <br><br> è¿™å°±æ˜¯æˆ‘ä»¬å»æ§åˆ¶å™¨çš„æœ´å®æ— å... <br><br><img src="https://habrastorage.org/webt/zx/7v/yu/zx7vyupurluv41qjgddrpsseehk.png" alt="å›¾ç‰‡"><br><br> ä¸­å¿ƒçš„åå­—å‡†çº¿æ°å¥½ä½äºæ§åˆ¶å™¨çš„ä¸­å¿ƒå’ŒUIViewåœ°å›¾çš„ä¸­å¿ƒã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ”¾å¤§åœ°å›¾å†…éƒ¨çš„å‡è®¾å°†åœ¨çª—å£ä¸­å¿ƒèµ·ä½œç”¨ã€‚ åŸæ¥å¦‚æ­¤ã€‚ <br><br> åå­—çº¿çš„å·¦ä¾§å’Œæ­£ä¸‹æ–¹-UILabelã€‚ è®¡åˆ’åœ¨é‚£é‡Œæ˜¾ç¤ºä¸€ä¸ªå¯è¯»çš„åœ°å€ã€‚ å¸¦æœ‰UIActivityIndiâ€‹â€‹catorçš„å³é”®ã€‚ å…³é”®æ˜¯ï¼Œåœ¨ç”¨æˆ·åæ ‡åˆ°è¾¾ä¹‹å‰ï¼Œä»–ä¼šâ€œæ—‹è½¬â€å¹¶ä¸”æŒ‰é’®å˜æš—å¹¶è¢«ç¦ç”¨ã€‚ é€šè¿‡å•å‡»å¸¦æœ‰ç”¨æˆ·åæ ‡çš„æŒ‰é’®ï¼Œæˆ‘ä»¬å°†åå­—å‡†çº¿è¿”å›ç»™ä»–ã€‚  <b>è¿™æ˜¯ä»ç”¨æˆ·çš„ä½ç½®å¼€å§‹çš„ä½ç½®æŒ‡ç¤ºã€‚</b> <br><br> åº•éƒ¨æ˜¯â€œé€‰æ‹©ç‚¹â€æŒ‰é’®ã€‚ é€šè¿‡å•å‡»ï¼Œå‘ç”Ÿäº†ä¸šåŠ¡é€»è¾‘çš„é­”åŠ›ï¼š <br><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@IBAction</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectButtonWasPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> place = <span class="hljs-type"><span class="hljs-type">Place</span></span>() place.name = <span class="hljs-string"><span class="hljs-string">" "</span></span> place.point.latitude = <span class="hljs-string"><span class="hljs-string">"\(String(describing: selectedPoint!.latitude))"</span></span> place.point.longitude = <span class="hljs-string"><span class="hljs-string">"\(String(describing: selectedPoint!.longitude))"</span></span> place.addressText = selectedPointGeocoderedAddress delegate?.didSelectPoint(place) navigationController?.popViewController(animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) }</code> </pre><br>  <u>ä¸‡å²ï¼</u>  <u>æˆ‘ä»¬è®¨è®ºäº†å‡†å¤‡é˜¶æ®µï¼</u> <br><br> æˆ‘ä»¬è¿›å…¥MRSGã€‚ <br><br> ä»¥ä¸‹æ˜¯è¡¨æ ¼æ ¼å¼çš„æ–‡å­—ï¼Œå¯ä»¥<b>ä¸ªäºº</b>åæ˜ <b>æˆ‘å¯¹</b>æœ€è‘—åçš„å†…ç½®åœ°å›¾æ¨¡å—ï¼ˆå½“æ—¶æˆ‘è¿˜ä¸äº†è§£<u><i><a href="http://www.openstreetmap.org/">www.openstreetmap.org</a></i></u> ï¼Œè°¢è°¢ï¼Œ <a href="https://habr.com/ru/users/daglob/" class="user_link">daglob</a> ï¼‰çš„<b>è¯„ä¼°</b> ï¼ˆå¸¦æœ‰æ¨¡ç³Šå…ƒç´ ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/qx/sa/mv/qxsamvrveuo9d9cnrk_0cc9x73e.png"><br><br>  â€œç”±äºä»»åŠ¡å¾ˆç®€å•ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨Yandex.Mapsã€‚ ä»–ä»¬æ˜¯ç¾ä¸½ï¼Œæ•æ·çš„â€¦â€¦â€-æˆ‘æƒ³ã€‚ <br><br> å¦‚æœæ‚¨å¯¹å¦‚ä½•é…ç½®å®ƒæ„Ÿå…´è¶£ï¼Œè¯·ç¼–å†™ä¸€ä¸ªå°å‹é¡¹ç›®ï¼Œä½†æ˜¯å¦‚æœæ‚¨å¤ªæ‡’äº†<a href="https://tech.yandex.ru/maps/mapkit/%3Ffrom%3Dmapsapi">-tech.yandex.ru/maps/mapkit/?from=mapsapi</a> ï¼Œè¯·èµ°ä¸Šæˆ‘çš„è·¯ã€‚ å…¥é—¨å¾ˆå®¹æ˜“ã€‚ <br><br> äº‹å®æ˜¯ï¼Œæ–‡æ¡£ä»¥ä»¥ä¸‹å½¢å¼æ˜¾ç¤ºï¼š <br><br><img src="https://habrastorage.org/webt/7s/zu/aa/7szuaaqboitjjfwfa7rib56wcfg.png"><br><br> è¯·æ³¨æ„å¾®ä¸è¶³é“çš„æè¿°å’Œå·¦ä¾§çš„å¤§é‡å¯¹è±¡ã€‚ è¯¥æ­»çš„è…¿ã€‚ <br>  â€œæµ‹è¯•é¡¹ç›®å¯èƒ½ä¼šå›ç­”æˆ‘çš„é—®é¢˜ã€‚â€ å¥½å§å¥½å§ <br><br> è¿™æ˜¯é‡å…½ã€‚  <a href="https://github.com/yandex/mapkit-ios-demo">github.com/yandex/mapkit-ios-demo</a> <br> æˆ‘åœ¨é‚£é‡Œæ²¡æœ‰çœ‹åˆ°æˆ‘çš„çç¢ä»»åŠ¡çš„è§£å†³æ–¹æ¡ˆã€‚ <br>  -å¥½çš„-æˆ‘æƒ³-å¦‚æœæˆ‘ä¸æ˜¯å¼€å‘äººå‘˜ï¼Œæˆ‘æœ‰è¶³å¤Ÿçš„ç»éªŒã€‚ <br><br><img src="https://habrastorage.org/webt/dl/-h/7t/dl-h7tjvei8fgovgu0ztbcx6eyy.gif"><br><br> æˆ‘ç»„è£…äº†ä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼Œå¹¶ç ”ç©¶äº†é•¿æ—¶é—´å®šåˆ¶ç”¨æˆ·æ ‡è®°çš„åŠŸèƒ½ã€‚ <br><br> é‡ç‚¹ï¼š <br> æœ‰ä¸€ä¸ªå¯¹è±¡ï¼š <br><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mapView: <span class="hljs-type"><span class="hljs-type">YMKMapView!</span></span> <span class="hljs-comment"><span class="hljs-comment">//  YMKUserLocationObjectListener - ,  </span></span></code> </pre> <br> æ‚¨è¯´ï¼šâ€œä¸€åˆ‡ä¼¼ä¹éƒ½æ˜¯åˆä¹é€»è¾‘çš„ã€‚â€ ä½†æ˜¯æ²¡æœ‰ æ›¿ä»£æ–¹æ³•ï¼š <br><br><pre> <code class="swift hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onObjectAdded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with view: YMKUserLocationView)</span></span></span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onObjectRemoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with view: YMKUserLocationView)</span></span></span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onObjectUpdated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with view: YMKUserLocationView, event: YMKObjectEvent)</span></span></span></span> {}</code> </pre> <br> æˆ‘ä»¬æœ‰æœºä¼šä»¥æå…¶å›°éš¾çš„æ–¹å¼åˆ°è¾¾point.latå’Œpoint.longã€‚ <br> ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š <br><br><pre> <code class="swift hljs">userLocation = <span class="hljs-type"><span class="hljs-type">YMKPoint</span></span>(latitude: view.pin.geometry.latitude, longitude: view.pin.geometry.longitude)</code> </pre> <br> åŠ è½½åæ ‡çš„ç­‰å¾…æ—¶é—´åœ¨2åˆ°50ç§’ä¹‹é—´å˜åŒ–ã€‚ <br><br> æˆ‘å‘Šè¯‰è‡ªå·±ï¼šâ€œä½ é”™äº†ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä¸“æ³¨çš„LocationManagerã€‚â€ åæ¥è¯æ˜-å®é™…ä¸Šï¼Œæ–‡æ¡£ä¸­æœ‰è¿™æ ·çš„â€œæœ‹å‹â€â€¦â€¦ä½†ä»–åœ¨å“ªé‡Œæœ‰ä¾‹å­ï¼Ÿï¼ï¼Ÿ <br> åœ¨ç¤ºä¾‹é¡¹ç›®ä¸­ï¼Œæ²¡æœ‰ä½¿ç”¨è¿™ç§ç®¡ç†å™¨çš„ç¤ºä¾‹ï¼š <br><br><img src="https://habrastorage.org/webt/pw/ok/fi/pwokfiikcpwl70dbvsixdmnedxi.png"><br><br>  -å¥½å§ï¼Œæ–‡ä»¶ï¼Œåªå‰©ä¸‹ä½ å’Œæˆ‘ã€‚ <br>  -æ˜¯çš„ï¼Œæ²¡æœ‰é—®é¢˜çš„â€œåˆ›æ–°è€…â€ï¼Œäº«å—ï¼š <br><br><img src="https://habrastorage.org/webt/6f/ze/hl/6fzehl2usa1mxgciyziz6h3rl1u.png"><br><br> æˆ‘ä»¬å‘UIViewControllerè®¢é˜…äº†è¯¥åè®®ï¼ˆæˆ‘å¸Œæœ›æ²¡æœ‰å¿…è¦åœ¨è¿™é‡Œè¿›ä¸€æ­¥è§£é‡Šä»»ä½•å†…å®¹ï¼ŒçœŸçš„ï¼Œä¼™è®¡ä»¬ï¼‰ï¼š <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// MARK: - // Params var userLocation: YMKPoint? { didSet { guard userLocation != nil &amp;&amp; userLocation?.latitude != 0 &amp;&amp; userLocation?.longitude != 0 else { return } if isItFirstSelection { isItFirstSelection = false selectedPoint = userLocation mapView.mapWindow.map.move( with: YMKCameraPosition.init(target: userLocation!, zoom: 16, azimuth: 0, tilt: 0), animationType: YMKAnimation(type: YMKAnimationType.smooth, duration: 1), cameraCallback: nil) } activityIndicator.stopAnimating() } } // MARK: - // Some like didLoad setupLocationManager() // MARK: - // Setup private func setupLocationManager() { locationManager = YMKMapKit.sharedInstance()!.createLocationManager() locationManager.subscribeForLocationUpdates(withDesiredAccuracy: 0, minTime: 10, minDistance: 0, allowUseInBackground: true, filteringMode: .on, locationListener: self) } // MARK: - // MARK: YMKLocationDelegate extension YandexMapSetPointViewController: YMKLocationDelegate { func onLocationUpdated(with location: YMKLocation) { userLocation = YMKPoint(latitude: location.position.latitude, longitude: location.position.longitude) } func onLocationStatusUpdated(with status: YMKLocationStatus) {} }</span></span></code> </pre><br> è¿˜æœ‰... <br><br><img src="https://habrastorage.org/webt/vy/se/rx/vyserx968bbz28plbyag_jc-mmk.jpeg"><br><br>  1-15ç§’ï¼Œå¡å°”ï¼  15ï¼ æœ‰æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¿«åœ°è§£å†³ä¸Šä¸€ä¸ªé€‰é¡¹ï¼ æ€ä¹ˆ?? <br>  Yandexï¼Œä»€ä¹ˆç©ç¬‘ï¼Ÿ èŠ±è¿™ä¹ˆå¤šæ—¶é—´èŠ±æ‰€æœ‰çš„æ—¶é—´å»å°è¯•å¹¶è·å¾—è¿™æ ·çš„ç»“æœ-å¥½å§ï¼Œè¿™é€šå¸¸å¾ˆå¯æ‚²ã€‚ <br><br> æˆ‘ä»¥ä¸ºï¼Œä»¥ä¸º...å¥½å§ï¼Œä¸æ˜¯å®Œå…¨ä¸€æ ·ã€‚ ç»™ä¸€ä¸ªæŒå¡äººçš„æ§åˆ¶å™¨ï¼Œå¹¶ä½¿å…¶åˆ‡æ¢åˆ°æœ¨å‡³ä¸Šè¶…è¿‡4ç§’é’Ÿ-è¿™å¯¹äºè¯¥åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯è‡ªæ€çš„ã€‚ æ²¡æœ‰äººä¼šå®Œå…¨æœ‰ç†ç”±ç›¸ä¿¡è¿™ä¼šèˆ’é€‚è¶…è¿‡5ç§’ï¼ˆå¦‚æœæ‚¨ä¸ç›¸ä¿¡æˆ‘ï¼Œè¯·å¬Vitaliy Fridmanå…³äºUI / UXçš„æŠ¥å‘Šï¼‰ã€‚ <br><br> æˆ‘æƒ³äº†æ›´å¤šâ€¦â€¦ä¸‹é¢çš„æƒ…æ„Ÿæ˜¯è¿™æ ·çš„ï¼š <br><br><img src="https://habrastorage.org/webt/-8/f_/wb/-8f_wbwxosvigxvw_qu905rrpla.gif"><br>  <i>è°æƒ³è¦å£°éŸ³<a href="https://www.youtube.com/watch%3Fv%3DpTZaNHZGsQo">-www.youtube.com/watch?v=pTZaNHZGsQo</a></i> <br><br> æˆåŠŸçš„ç§˜è¯€æ˜¯è¿™æ ·çš„ï¼š <br> èŠ±ä¸€<s>å…¬æ–¤...</s> CLLocationManagerå’ŒYMKLocationManagerå¹¶...ä½¿å®ƒä»¬ä¸€èµ·å·¥ä½œã€‚ <br><br><img src="https://habrastorage.org/webt/zu/qt/b9/zuqtb90bcok18z_qs7pw1zxd88g.jpeg"><br><br> è¿™ä¸ªè”åˆ...â€œå·¥ä½œâ€çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Params private var locationManager: YMKLocationManager! private var nativeLocationManager = CLLocationManager() // MARK: - // Some like didLoad setupNativeLocationManager() // MARK: - // Setup private func setupNativeLocationManager() { if CLLocationManager.locationServicesEnabled() { nativeLocationManager.delegate = self nativeLocationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters nativeLocationManager.startUpdatingLocation() } } // MARK: - // CLLocationManagerDelegate extension YandexMapSetPointViewController: CLLocationManagerDelegate { func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) { userLocation = YMKPoint(latitude: locations.last!.coordinate.latitude, longitude: locations.last!.coordinate.longitude) } }</span></span></code> </pre><br><br>  <s>...æŠ“é¥­å‡†å¤‡å¥½äº†</s> <br><br> å¿«é€Ÿè·å¾—ç”¨æˆ·åˆ†æ•°çš„ç»“æœæ˜¯ï¼šå¤šäº0ç§’ã€‚ <br><br> åœ¨æˆ‘çœ‹æ¥ï¼Œå½“è§£å†³ä¸€ä¸ªçç¢çš„é—®é¢˜æ—¶ï¼Œæœ¬æœºå’ŒåµŒå…¥å¼éƒ¨åˆ†çš„å¯¹ç«‹çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><img src="https://habrastorage.org/webt/lk/we/ub/lkweublnp6onabh3cdpfigc5z-m.gif"><br><br><div class="spoiler">  <b class="spoiler_title">åœ°ç†ç¼–ç å™¨*</b> <div class="spoiler_text"> å¦å¤–ï¼Œæˆ‘å°†å±•ç¤ºåœ°ç†ç¼–ç å™¨çš„å®ç°ã€‚ <br> äºŒæ‰‹çš„Yandex <a href="https://tech.yandex.ru/maps/geocoder/">Geocoder tech.yandex.ru/maps/geocoder</a> <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Params private let geocoderManager = GeocoderManager.shared //      .     import Foundation import Alamofire import Alamofire_SwiftyJSON import SwiftyJSON import PromiseKit import UIKit // MARK: - // MARK: GeocoderManager class GeocoderManager { static let shared = GeocoderManager() private init() {} func getAddressBy(latitude: String, longitude: String, completion: @escaping (Bool, String?, Error?)-&gt;()) { GeocoderAPI().request(latitude: latitude, longitude: longitude).done { (response) in completion(true, response.getAddress(), nil) print("success") }.catch { (error) in completion(false, nil, error) } } } // import Foundation import Alamofire import PromiseKit // MARK: - // MARK: Request enum GeocoderRequest { case addressRequest(String, String) } // MARK: - // MARK: GeocoderRequest extension GeocoderRequest: DefaultRequest { var path: String { switch self { case .addressRequest: return "1.x/" } } var method: HTTPMethod { switch self { case .addressRequest: return .get } } var headers: HTTPHeaders { return [:] } var parameters: [String: Any]? { switch self { case .addressRequest(let latitude, let longitude): return [ "apikey" : Consts.APIKeys.yandexGeocoderKey, "format" : "json", "results" : 1, "spn" : "3.552069,2.400552", "geocode" : "\(longitude),\(latitude)" ] } } func asURLRequest() throws -&gt; URLRequest { let url = try GlobalConsts.Links.geocoderBaseURL.asURL()// not good, need new idea for this var urlRequest = URLRequest(url: url.appendingPathComponent(path)) urlRequest.httpMethod = method.rawValue urlRequest.allHTTPHeaderFields = headers switch method { case .get: urlRequest = try URLEncoding.default.encode(urlRequest, with: parameters) case .post: urlRequest = try JSONEncoding.default.encode(urlRequest, with: parameters) case .put: urlRequest = try JSONEncoding.default.encode(urlRequest, with: parameters) case .patch: urlRequest = try JSONEncoding.default.encode(urlRequest, with: parameters) case .delete: urlRequest = try JSONEncoding.default.encode(urlRequest, with: parameters) default: break } return urlRequest } }</span></span></code> </pre><br> æ­¤èµ„æºå¯¹å°†æœåŠ¡å™¨çš„å“åº”è½¬æ¢ä¸ºæ¨¡å‹æœ‰å¾ˆå¤§å¸®åŠ©ï¼š <a href="https://app.quicktype.io/">app.quicktype.io</a> </div></div><br> è§†è§‰ä¸Šçš„å·¥ä½œç»“æœå¦‚ä¸‹ï¼š <br><br><img src="https://habrastorage.org/webt/co/19/u7/co19u7hvhmnhdr8r_bh2ek_nl9k.jpeg"><br><br> æ€»ç»“ä»¥ä¸Šå†…å®¹ï¼š <br> åŒäº‹ä»¬ï¼Œå†™è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†ä½¿æ‚¨åœ¨è§£å†³æ­¤ç±»é—®é¢˜æ—¶æ‰€èŠ±çš„æ—¶é—´ä¸ä¼šæ¯”æˆ‘èŠ±è´¹çš„æ—¶é—´å¤šï¼Œè€Œæ˜¯é€‰æ‹©ä¸€æ¡ä¸åŒçš„è·¯å¾„æˆ–å¿«é€Ÿèµ°è¿™æ¡è·¯ã€‚ <br><br> æˆ‘å¸Œæœ›çœ‹åˆ°å»ºè®¾æ€§çš„æ‰¹è¯„å’Œ/æˆ–å…¶ä»–<b>æ­£ç¡®çš„</b>è§£å†³æ–¹æ¡ˆã€‚ <br><br> å¦‚æœå‘ç°è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·ç”¨Loisè¯„åˆ†çº æ­£æˆ‘ï¼Œæœ€å¥½ä»¥æ–°çš„æ–¹å¼æŸ¥çœ‹<a href="https://habr.com/ru/post/479102/">æ­¤æ•…äº‹</a>çš„<a href="https://habr.com/ru/post/479102/">åŸå§‹ç‰ˆæœ¬</a> ã€‚ <br><br> æ‰€æœ‰åˆ›é€ æ€§çš„æˆåŠŸå’Œç§¯æçš„å¿ƒæƒ…ï¼ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN479432/">https://habr.com/ru/post/zh-CN479432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN479420/index.html">æ‰“å¼€éº¦å…‹é£ï¼šåç«¯ã€‚ æ¥å®¾æ³¨å†Œ</a></li>
<li><a href="../zh-CN479422/index.html">[è§†é¢‘åŠ¨ç”»]æœ‰çº¿ä¸–ç•Œï¼š35å¹´å†…æµ·åº•ç”µç¼†ç½‘ç»œå¦‚ä½•è¦†ç›–å…¨çƒ</a></li>
<li><a href="../zh-CN479426/index.html">å®‰å…¨å‘¨50ï¼šConfluenceå’ŒLinuxä¸­çš„ä¸­é—´äººæ”»å‡»</a></li>
<li><a href="../zh-CN479428/index.html">12æœˆ9æ—¥è‡³15æ—¥åœ¨è«æ–¯ç§‘ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN479430/index.html">12æœˆ9æ—¥è‡³15æ—¥åœ¨åœ£å½¼å¾—å ¡ä¸¾è¡Œçš„æ•°å­—æ´»åŠ¨</a></li>
<li><a href="../zh-CN479438/index.html">Postgres-Tuesdayï¼ƒ5ï¼šâ€œ PostgreSQLå’ŒKubernetesã€‚ CI / CDã€‚ æµ‹è¯•è‡ªåŠ¨åŒ–Â»</a></li>
<li><a href="../zh-CN479442/index.html">Alexey Savvateevï¼šç¤¾ä¼šåˆ†è£‚çš„åšå¼ˆè®ºæ¨¡å‹ï¼ˆ+ Nginxè°ƒæŸ¥ï¼‰</a></li>
<li><a href="../zh-CN479446/index.html">æ±½è½¦åœ¨é˜…è¯»æµ‹è¯•æ–¹é¢å·²ç»é¢†å…ˆäºäººä»¬ã€‚ ä½†æ˜¯ä»–ä»¬äº†è§£ä»–ä»¬é˜…è¯»çš„å†…å®¹å—ï¼Ÿ</a></li>
<li><a href="../zh-CN479450/index.html">AppCode 2019.3ï¼šé€Ÿåº¦æ›´å¿«ï¼Œå¯¹Swiftçš„äº†è§£æ›´å¥½ï¼Œå¯¹Mac Catalystçš„äº†è§£ï¼Œæ–¹ä¾¿åœ°æ˜¾ç¤ºç»„è£…æ¶ˆæ¯</a></li>
<li><a href="../zh-CN479452/index.html">åŸŸåç³»ç»Ÿå¦‚ä½•å‘å±•ï¼šARPANETæ—¶ä»£</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>