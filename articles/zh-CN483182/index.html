<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍊 ⏸️ 🥨 使用Array.reduce（）的五种有趣方式（一种无聊的方式） 🤦🏽 🐛 🚣🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！ 我向您介绍克里斯· 费迪南迪（ Chris Ferdinandi ）的文章“使用Array.reduce（）的五种有趣方式（以及一种无聊的方式）”的翻译。 


 在使用数组的所有现代方法中，我必须使用的最困难的方法是Array.reduce（）。 


 乍一看，这似乎是一种简单，无聊的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用Array.reduce（）的五种有趣方式（一种无聊的方式）</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483182/"><p> 哈Ha！ 我向您介绍克里斯· <a href="https://24ways.org/2019/five-interesting-ways-to-use-array-reduce/" rel="nofollow">费迪南迪（</a> Chris Ferdinandi <a href="https://24ways.org/2019/five-interesting-ways-to-use-array-reduce/" rel="nofollow">）</a>的文章<a href="https://24ways.org/2019/five-interesting-ways-to-use-array-reduce/" rel="nofollow">“使用Array.reduce（）的五种有趣方式（以及一种无聊的方式）”</a>的翻译。 </p><br><p> 在使用数组的所有现代方法中，我必须使用的最困难的方法是Array.reduce（）。 </p><br><p> 乍一看，这似乎是一种简单，无聊的方法，几乎​​没有效果。 但是，尽管外观不大，但Array.reduce（）是您开发人员工具集的强大而灵活的补充。 </p><br><p> 今天，让我们看一下可以使用Array.reduce（）做的一些有趣的事情。 </p><a name="habracut"></a><br><h4>  Array.reduce（）如何工作 </h4><br><p> 大多数现代数组方法都会返回一个新数组。  Array.reduce（）方法更加灵活。 他可以退还任何东西。 其目的是获取一个数组并将其内容压缩为一个值。 </p><br><p> 该值可以是数字，字符串，甚至是对象或新数组。 这是一直困扰我的部分-我不知道它有多灵活！ </p><br><h4> 句法 </h4><br><p>  Array.reduce（）具有两个参数：回调方法（用于启动数组中的每个元素）和初始值initialValue。 </p><br><p>回调也有两个参数：累加器（它是当前的组合值）和currentValue循环中的当前项。 您返回的所有内容都将用作循环中下一个元素的累加器。 第一个循环使用初始值代替。 </p><br><pre><code class="plaintext hljs">var myNewArray = [].reduce(function (accumulator, current) { return accumulator;}, starting); }, starting);</code> </pre> <br><p> 让我们看一些例子。 </p><br><pre> <code class="plaintext hljs">var myNewArray = [].reduce(function (accumulator, current) { return accumulator;}, starting);</code> </pre> <br><p>  <strong>1.数字求和</strong> </p><br><p> 假设您有一个要加在一起的数字数组。 使用Array.forEach（），我们可以执行以下操作： </p><br><pre> <code class="plaintext hljs">var total = 0; [1, 2, 3].forEach(function (num) { total += num; });</code> </pre> <br><p> 这是使用Array.reduce（）的示例陈词滥调。  “累加器”一词令人困惑，因此在此示例中，我们将其称为“求和”，因为它是固有的。 </p><br><pre> <code class="plaintext hljs">var total = [1, 2, 3].reduce(function (sum, current) { return sum + current; }, 0);    0    .</code> </pre> <br><p> 在回调中，我们将当前值添加到第一个循环中初始值为0的数量，然后是1（初始值0加元素值1），然后是3（总值1加元素值2），依此类推。 <br>  <a href="https://codepen.io/cferdinandi/pen/drJOOB" rel="nofollow">一个例子。</a> </p><br><p>  <strong>2，一步一步组合Array.map（）和Array.filter（）数组方法</strong> </p><br><p> 想象一下，霍格沃茨有很多巫师。 </p><br><pre> <code class="plaintext hljs">var wizards = [ { name: 'Harry Potter', house: 'Gryfindor' }, { name: 'Cedric Diggory', house: 'Hufflepuff' }, { name: 'Tonks', house: 'Hufflepuff' }, { name: 'Ronald Weasley', house: 'Gryfindor' }, { name: 'Hermione Granger', house: 'Gryfindor' }];</code> </pre> <br><p> 我们要创建一个新数组，其中仅包含Hufflepuff中的母版名称。 一种方法是使用Array.filter（）方法仅返回那些在家中具有Hufflepuff属性的向导。 然后，我们使用Array.map（）方法创建一个仅包含其余母版的name属性的新数组。 </p><br><pre> <code class="plaintext hljs">//      var hufflepuff = wizards.filter(function (wizard) { return wizard.house === 'Hufflepuff'; }).map(function (wizard) { return wizard.name; });</code> </pre> <br><p> 使用Array.reduce（）方法，您可以一次性获得相同的数组，这将提高我们的性能。 我们传递一个空数组（[]）作为初始值。 每次通过时，我们都要检查一下Wizard.house是否是赫奇帕奇。 如果是这样，请将其发送到newArr（在此示例中为我们的累加器）。 如果没有，则什么也不做。 </p><br><p> 无论如何，都返回newArr以在下一遍中获取累加器。 </p><br><pre> <code class="plaintext hljs">//      var hufflepuff = wizards.reduce(function (newArr, wizard) { if (wizard.house === 'Hufflepuff') { newArr.push(wizard.name); } return newArr; }, []);</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/jJYVyL" rel="nofollow">一个例子。</a> </p><br><p>  <strong>3，从数组创建标记</strong> </p><br><p> 如果不是要创建一个名称数组，而是要在赫奇帕奇中创建一个无序的母版列表怎么办？ 而不是将Array.reduce（）中的空数组作为初始值，而是传递一个空字符串（''）并将其称为html。 </p><br><p> 如果Wizard.house等于Hufflepuff，我们将html字符串与包含在开始和结束列表元素（li）中的Wizard.name组合。 然后在下一个循环中将HTML作为累加器返回。 </p><br><pre> <code class="plaintext hljs">//      var hufflepuffList = wizards.reduce(function (html, wizard) { if (wizard.house === 'Hufflepuff') { html += '&lt;li&gt;' + wizard.name + '&lt;/li&gt;'; } return html; }, '');</code> </pre> <br><p> 在Array.reduce（）之前和之后添加开头和结尾的无序列表项。 现在，您可以将标记添加到DOM了。 </p><br><pre> <code class="plaintext hljs">//      var hufflepuffList = '&lt;ul&gt;' + wizards.reduce(function (html, wizard) { if (wizard.house === 'Hufflepuff') { html += '&lt;li&gt;' + wizard.name + '&lt;/li&gt;'; } return html; }, '') + '&lt;/ul&gt;';</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/oNgYRZZ" rel="nofollow">一个例子。</a> </p><br><p>  <strong>4.将相似的元素分组到一个数组中</strong> </p><br><p>  <a href="https://lodash.com/" rel="nofollow">lodash</a>库具有<a href="" rel="nofollow">groupBy（）</a>方法，该方法将元素的集合作为数组，并根据某些条件将它们分组为对象。 </p><br><p> 假设我们需要一个数字数组。 </p><br><p> 如果我们想将所有元素按其整数值分组为数字，则应使用lodash进行。 </p><br><pre> <code class="plaintext hljs">var numbers = [6.1, 4.2, 6.3]; // returns {'4': [4.2], '6': [6.1, 6.3]} _.groupBy(numbers, Math.floor);</code> </pre> <br><p> 如果有一个单词数组，并且您需要按单词的长度对元素进行分组，则可以这样做。 </p><br><pre> <code class="plaintext hljs">var words = ['one', 'two', 'three']; // returns {'3': ['one', 'two'], '5': ['three']} _.groupBy(words, 'length');</code> </pre> <br><p>  <strong>使用Array.reduce（）创建一个groupBy（）函数</strong> </p><br><p> 您可以使用Array.reduce（）方法重新创建相同的功能。 </p><br><p> 我们创建一个辅助函数groupBy（），该函数将一个数组和用于排序的条件作为参数。 在groupBy（）内部，我们将为数组运行Array.reduce（），以空对象（{}）作为起点并返回结果。 </p><br><pre> <code class="plaintext hljs">var groupBy = function (arr, criteria) { return arr.reduce(function (obj, item) { // Some code will go here... }, {}); };</code> </pre> <br><p> 在Array.reduce（）内部，我们调用回调函数以检查条件是应用于元素的函数还是元素的属性。 然后我们从当前元素中获取它的值。 </p><br><p> 如果对象尚不具有此值的属性，则创建它[property]并将一个空数组分配为其值。 最后，向该属性添加一个元素，并将该对象作为下一个循环的累加器返回。 </p><br><pre> <code class="plaintext hljs">var groupBy = function (arr, criteria) { return arr.reduce(function (obj, item) { //   ,        //  var key = typeof criteria === 'function' ? criteria(item) : item[criteria]; //    ,  . if (!obj.hasOwnProperty(key)) { obj[key] = []; } //     obj[key].push(item); //      return obj; }, {});};</code> </pre> <br><p> 演示完成的助手功能。 </p><br><p> 特别感谢<a href="https://tbremer.com/" rel="nofollow">Tom Bremer</a>的帮助。 可以在<a href="https://vanillajstoolkit.com/" rel="nofollow">Vanilla JS Toolkit中</a>找到该辅助功能以及更多其他功能。 </p><br><p>  <strong>5.将来自两个来源的数据合并到一个数组中</strong> </p><br><p> 回顾我们的向导列表。 </p><br><pre> <code class="plaintext hljs">var wizards = [ { name: 'Harry Potter', house: 'Gryfindor' }, { name: 'Cedric Diggory', house: 'Hufflepuff' }, { name: 'Tonks', house: 'Hufflepuff' }, { name: 'Ronald Weasley', house: 'Gryfindor' }, { name: 'Hermione Granger', house: 'Gryfindor' }];</code> </pre> <br><p> 如果存在不同的数据集，该数据集-每个魔术师所获得的带有房屋和积分的物体，该怎么办？ </p><br><pre> <code class="plaintext hljs">var points = { HarryPotter: 500, CedricDiggory: 750, RonaldWeasley: 100, HermioneGranger: 1270 };</code> </pre> <br><p> 想象一下，我们想将两组数据合并到一个数组中，并在向导数组中的每个向导的数据中添加点数。 怎么做？ </p><br><p>  Array.reduce（）方法非常适合！ </p><br><pre> <code class="plaintext hljs">var wizardsWithPoints = wizards.reduce(function (arr, wizard) { //     points,     // var key = wizard.name.replace(' ', ' '); //     ,  , //   0. if (points[key]) { wizard.points = points[key]; } else { wizard.points = 0; } //   wizard   . arr.push(wizard); //  . return arr; }, []);</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/RwNoXEo" rel="nofollow">将两个来源的数据合并到一个数组中的示例</a> 。 </p><br><p>  <strong>6.将来自两个来源的数据合并到一个对象中</strong> </p><br><p> 相反，如果有必要将两个数据源组合成一个对象，其中每个向导的名称为键，而他们的房屋和眼镜为属性，该怎么办？ 同样，Array.reduce（）方法非常适合此操作。 </p><br><pre> <code class="plaintext hljs">var wizardsAsAnObject = wizards.reduce(function (obj, wizard) { //      points,     // var key = wizard.name.replace(' ', ' '); //     ,  , //   0. if (points[key]) { wizard.points = points[key]; } else { wizard.points = 0; } //   name delete wizard.name; //   wizard    obj[key] = wizard; //   return obj; }, {});</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/bGNBXZL" rel="nofollow">将两个来源的数据合并到一个对象中的示例</a> 。 </p><br><p>  <strong>我应该使用Array.reduce（）吗？</strong> </p><br><p>  Array.reduce（）方法已从无意义演变为我最喜欢的JavaScript方法。 那么值得使用吗？ 什么时候 </p><br><p>  Array.reduce（）方法具有出色的浏览器支持。 它适用于所有现代浏览器和IE9。 长期以来，移动浏览器都支持它。 如果需要更多，可以添加一个polyfill以返回IE6中的支持。 </p><br><p> 最严重的问题可能是Array.reduce（）对于以前从未遇到过它的人（方法）感到困惑。  Array.filter（）方法与Array.map（）的组合比较慢，并且涉及其他步骤，但更易于阅读。 方法的名称显示了它们应该做什么。 </p><br><p> 如前所述，通常，Array.reduce（）方法简化了更复杂的事情。 辅助函数groupBy（）是一个很好的例子。 </p><br><p> 最终，这是您工具箱中的另一个工具。 如果使用得当，可以赋予超能力的工具。 </p><br><h4 id="ob-avtore"> 关于作者 </h4><br><p> 克里斯·费迪南迪（Chris Ferdinandi）帮助人们学习普通JavaScript。 他认为，有一种更简单，更可靠的方法来为Internet做事。 </p><br><p> 克里斯是《 <a href="https://vanillajsguides.com/" rel="nofollow">香草JS袖珍指南》</a>系列的作者，《 <a href="https://vanillajsacademy.com/" rel="nofollow">香草JS学院》</a>课程的创建者以及《 <a href="https://vanillajspodcast.com/" rel="nofollow">香草JS播客》的</a>演示者。 每个工作日都有成千上万的开发人员阅读其<a href="https://gomakethings.com/" rel="nofollow">开发人员</a>咨询<a href="https://gomakethings.com/" rel="nofollow">通讯</a> 。 </p><br><p> 他在Chobani和Boston Globe等组织中培训了开发人员，他的JavaScript插件被Apple和哈佛商学院使用。  CSS-Tricks和CodePen的创始人Chris Coyer将他的工作描述为“被无休止地引用”。 </p><br><p> 克里斯热爱海盗，幼犬和皮克斯电影，也住在马萨诸塞州乡村的养马场附近。 他与贝利小狗一起带领<a href="https://gomakethings.com/" rel="nofollow">Go Make Things</a> 。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN483182/">https://habr.com/ru/post/zh-CN483182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN483170/index.html">Messenger数据库（第2部分）：我们对“利润”进行划分</a></li>
<li><a href="../zh-CN483172/index.html">如何本地化应用或游戏？ 十大免费电子学习资源</a></li>
<li><a href="../zh-CN483174/index.html">使用Multipeer Connectivity在设备之间录制和传输声音</a></li>
<li><a href="../zh-CN483176/index.html">Messenger数据库（第1部分）：我们设计基础框架</a></li>
<li><a href="../zh-CN483178/index.html">这是Flutter 1.9发行版与Dart 2.5编程结合的更新</a></li>
<li><a href="../zh-CN483184/index.html">自动将代码升级到TensorFlow 2</a></li>
<li><a href="../zh-CN483186/index.html">Java 13简介：让我们深入了解JDK的新功能</a></li>
<li><a href="../zh-CN483190/index.html">3CX技术支持答案：从以前的版本升级到3CX v16</a></li>
<li><a href="../zh-CN483194/index.html">机器人收费。 用新技术去踢足球</a></li>
<li><a href="../zh-CN483198/index.html">阿里云如何通过... Kubernetes管理数万个Kubernetes集群</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>