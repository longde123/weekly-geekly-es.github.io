<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÇ ‚úåÔ∏è üïë Reverse Engineering-Anwendungen nach Verschleierung (Teil 2) üë©üèæ‚Äçüíª üßë üëºüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 
 Diese Ver√∂ffentlichung zielt darauf ab, einige Reverse Engineering-Techniken zu untersuchen. Alle Materialien werden nur zu Informationsz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reverse Engineering-Anwendungen nach Verschleierung (Teil 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445126/"><h2>  Einf√ºhrung </h2><br>  <i>Diese Ver√∂ffentlichung zielt darauf ab, einige Reverse Engineering-Techniken zu untersuchen.</i>  <i>Alle Materialien werden nur zu Informationszwecken pr√§sentiert und sind nicht f√ºr pers√∂nliche Zwecke bestimmt.</i> <br><br>  Empfohlene Lekt√ºre nach dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Teil</a> <br>  Wenn einem Chirurgen beigebracht wird, wie eine Person arbeitet, und ihm ein Skalpell gibt, bedeutet dies nicht, dass er dieses Wissen zum Nachteil einer Person nutzt, und ein sachkundiger Assembler tr√§umt nicht davon, einen Supervirus zu schreiben. <br>  In diesen Lektionen sollten Sie also nicht nach Hinweisen auf Risse und Hacks suchen. <br><br><h2>  Forschungsgegenstand </h2><br>  Wir untersuchen weiterhin den Plug-In-Code f√ºr die Visual Studio Atomineer Pro-Dokumentation (im Folgenden: APD).  Machen wir uns mit dem Tool und seinen Funktionen vertraut. <a name="habracut"></a>  Nehmen wir also an, wir haben eine Klasse in C ++. <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ClassForReadFile(); };</code> </pre> <br>  Konfigurieren Sie die APD so, dass die Kommentare im Doxygen-Stil vorliegen.  Wir bewegen den Cursor auf die <b>Klasse</b> und dr√ºcken <b>STRG + UMSCHALT + D.</b>  Wir bekommen folgendes: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ClassForReadFile(); };</code> </pre> <br>  Das Plugin hat eine sch√∂ne Beschreibung der Klasse hinzugef√ºgt.  Alles in Ordnung ist!  Wir gehen weiter.  Angenommen, eine Klasse geh√∂rt zu einer Bibliothek und wir m√ºssen sie exportieren.  F√ºgen Sie ein Makro hinzu und √§ndern Sie die Klassendefinition <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> DLL_EXPORTS #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_READER_DLL_EXPORTS __declspec(dllexport) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_READER_DLL_EXPORTS __declspec(dllimport) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> class DATA_READER_DLL_EXPORTS ClassForReadFile { public: ClassForReadFile(); };</span></span></code> </pre> <br>  F√ºr C ++ (Windows OS) ist die Situation Standard.  Schauen Sie sich unser Plugin an.  <b>Dr√ºcken Sie STRG + UMSCHALT + D</b> und erhalten Sie √ºberhaupt nicht das, was wir erwartet haben <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** A data reader DLL exports. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DATA_READER_DLL_EXPORTS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br>  Der Name der <b>Definition</b> DATA_READER_DLL_EXPORTS <b>wurde</b> als Name der Klasse anstelle von ClassForReadFile definiert, und die Klassenbeschreibung wurde aus diesem Namen generiert.  Das hei√üt, im Plugin-Code wird diese Situation, n√§mlich der Export der Klasse, entweder nicht oder fehlerhaft verarbeitet.  Dies werden wir versuchen zu korrigieren. <br><br><h2>  Schritt 1 </h2><br>  Wir werden nach Hinweisen suchen.  Erstens, da der Export von Funktionen und Klassen aus C / C ++ eine Standardsituation ist, versuchen wir immer noch, das Plugin korrekt zu "erzwingen".  F√ºgen Sie anstelle der <b>Definition von DATA_READER_DLL_EXPORTS die</b> Anweisung <b>__declspec</b> <i>selbst ein</i> und generieren Sie die Dokumentation <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> __</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">declspec</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dllexport</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br>  Und siehe da, sie haben die richtige Klassenbeschreibung!  Wir schlie√üen daraus, dass es in APD einen Code gibt, der das Vorhandensein der Zeichenfolge "__declspec" in der Klassenbeschreibung √ºberpr√ºft und den weiteren Algorithmus zum Erstellen der Dokumentation ignoriert. <br><br>  Wir dekompilieren die Bibliothek mit der Standarddatei ildasm.exe aus den Microsoft SDKs.  Suchen Sie die Zeile "__declspec".  Es wird in 2 Methoden CmdDocComment :: a und CmdDocComment :: b gefunden.  Klasse eins.  Wir werden es weiter untersuchen. <br><br><h2>  Schritt 2 </h2><br>  Ich muss sofort sagen, dass das, wonach wir suchen, in der CmdDocComment :: a-Methode enthalten ist <br><br>  Hier trifft sich <i>__declspec</i> .  Es werden nur die interessantesten Zeilen angezeigt. <br><br><div class="spoiler">  <b class="spoiler_title">Zeichenfolge a (CmdDocComment.GeneratorInfo A_0)</b> <div class="spoiler_text"><pre> <code class="cpp hljs">List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; e = A_0.e; <span class="hljs-comment"><span class="hljs-comment">//....... List&lt;string&gt; list = A_0.e; int num3 = 0; while (num3 &lt; list.Count &amp;&amp; !(list[num3] == "where") &amp;&amp; !(list[num3] == ":")) { if (list[num3] == A_0.b &amp;&amp; num2 &lt; 0) { num2 = num3; } if (list[num3] == "__declspec") { if (num3 + 1 &lt; list.Count) { num = list[num3 + 1].IndexOf(')'); if (num &gt;= 0) { list[num3 + 1] = list[num3 + 1].Substring(num + 1).Trim(); } } list.RemoveAt(num3); num3--; } num3++; } if (list.Count &gt; 0 &amp;&amp; (list[0] == "struct" || list[0] == "union")) { if (list.Count == 1) { //......</span></span></code> </pre><br></div></div><br>  Wir sind zu dem Schluss gekommen, dass nach √úberpr√ºfung <blockquote>  list [num3] == "__declspec" </blockquote>  L√∂schmethode wird aufgerufen <blockquote>  list.RemoveAt (num3); </blockquote>  Argumentation (laut denken): <br><br><ol><li>  Die CmdDocComment :: a-Methode verf√ºgt √ºber eine lokale Variable, die ein Array von Zeichenfolgen enth√§lt <br><br><pre> <code class="cpp hljs">List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> = A_0.e;</code> </pre> </li><li>  Das erste Element dieses Arrays speichert den Anfang der Beschreibung der Funktion, Struktur, Klasse usw., dh des Schl√ºsselworts "Klasse", "Struktur", "Vereinigung". <pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">list</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">"struct"</span></span></code> </pre> </li><li>  Jedes Element des Arrays enth√§lt ein separates Wort.  In unserem Fall ist es {"class", "DATA_READER_DLL_EXPORTS", "ClassForReadFile"} </li><li>  Es gibt eine Schleife, die alle Elemente des Arrays "e" umgeht, nach dem Element "__declspec" sucht und es und alles, was in Klammern steht, entfernt <br></li><li>  Es gibt eine zus√§tzliche Bedingung zum Verlassen des Zyklus.  Dies ist die Position der W√∂rter "wo" oder ":".  Das offizielle Wort "wo" ist, um ehrlich zu sein, nicht vertraut, aber ":" wird beim Erben von Klassen verwendet </li></ol><br>  Definieren Sie einen neuen Algorithmus und den Zweck der √Ñnderungen: <br><br>  1. √Ñnderungen sollten den Rest der Funktionalit√§t nicht beeintr√§chtigen <br><br>  2. Wir werden die Elemente des "list" -Arrays gem√§√ü dem Algorithmus l√∂schen <br>  - das erste Element √ºberspringen; <br>  - Wenn das n√§chste Element nicht ":" und nicht "where" und nicht das Ende des Arrays ist, l√∂schen Sie es. <br><br>  Schreiben Sie den gew√ºnschten Zyklus <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     ,          num2 while (num3 &lt; list.Count &amp;&amp; !(list[num3] == "where") &amp;&amp; !(list[num3] == ":")) { // ,      .     if (list[num3] == A_0.b &amp;&amp; num2 &lt; 0) { num2 = num3; } //  if (list[num3] == "__declspec"),  if (num3 != 0 &amp;&amp; num3 &lt; (list.Count - 1) &amp;&amp; list[num3 + 1] != ":" &amp;&amp; list[num3 + 1] != "where") { e.RemoveAt(index); --index; } num3++; }</span></span></code> </pre><br>  Es bleibt zu programmieren. <br><br><h2>  Schritt 3 </h2><br>  Laut programmieren.  Programmieren im allgemeinen Fall ist das Schreiben von Quellcodes, Kompilieren, Verkn√ºpfen.  Aber der Verschleierer hat uns eine solche Gelegenheit genommen.  Wir werden das empfohlene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dnSpy-Tool verwenden</a> .  Wir werden die HEX-Codes von CIL-Befehlen direkt in der Bibliothek √§ndern, was, wie sich herausstellte, sehr aufregend und informativ ist!  Fangen wir an.  √ñffnen Sie dnSpy und laden Sie die Bibliothek. <br><br><div class="spoiler">  <b class="spoiler_title">Finden Sie unsere Methode</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/cn/eg/vq/cnegvq2ntmy7sl_hpymzoltkyuu.png" alt="Bild"><br></div></div><br>  W√§hlen Sie while und √§ndern Sie die Ansicht in IL <br><div class="spoiler">  <b class="spoiler_title">Unser Zyklus</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/d4/va/im/d4vaimuwft7cbsafodygqtkn_z8.png" alt="Bild"><br></div></div><br>  Ich werde auch eine Auflistung geben, obwohl es ziemlich sperrig ist <br><br><div class="spoiler">  <b class="spoiler_title">Unser Zyklus</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/* 0x00016710 07 */</span></span> IL_018C: ldloc<span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-comment"><span class="hljs-comment">//         1. /* 0x00016711 1119 */ IL_018D: ldloc.s V_25 //          ( ). /* 0x00016713 6FF900000A */ IL_018F: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016718 72925E0070 */ IL_0194: ldstr "where" //       ,   ,   . /* 0x0001671D 287000000A */ IL_0199: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016722 3AAB000000 */ IL_019E: brtrue IL_024E //    ,   value  true,    null   . /* 0x00016727 07 */ IL_01A3: ldloc.1 //         1. /* 0x00016728 1119 */ IL_01A4: ldloc.s V_25 //          ( ). /* 0x0001672A 6FF900000A */ IL_01A6: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x0001672F 72A31D0070 */ IL_01AB: ldstr ":" //       ,   ,   . /* 0x00016734 287000000A */ IL_01B0: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016739 3A94000000 */ IL_01B5: brtrue IL_024E //    ,   value  true,    null   . /* 0x0001673E 07 */ IL_01BA: ldloc.1 //         1. /* 0x0001673F 1119 */ IL_01BB: ldloc.s V_25 //          ( ). /* 0x00016741 6FF900000A */ IL_01BD: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016746 03 */ IL_01C2: ldarg.1 //     1   . /* 0x00016747 7B12010004 */ IL_01C3: ldfld string Atomineer.Utils.CmdDocComment/GeneratorInfo::b //      ,       . /* 0x0001674C 287000000A */ IL_01C8: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016751 2C07 */ IL_01CD: brfalse.s IL_01D6 //    ,   value  false,    . /* 0x00016753 09 */ IL_01CF: ldloc.3 //         3. /* 0x00016754 16 */ IL_01D0: ldc.i4.0 //    0     int32. /* 0x00016755 2F03 */ IL_01D1: bge.s IL_01D6 //     ( ),        . /* 0x00016757 1119 */ IL_01D3: ldloc.s V_25 //          ( ). /* 0x00016759 0D */ IL_01D5: stloc.3 //                3. /* 0x0001675A 07 */ IL_01D6: ldloc.1 //         1. /* 0x0001675B 1119 */ IL_01D7: ldloc.s V_25 //          ( ). /* 0x0001675D 6FF900000A */ IL_01D9: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016762 729E5E0070 */ IL_01DE: ldstr "__declspec" //       ,   ,   . /* 0x00016767 287000000A */ IL_01E3: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x0001676C 2C51 */ IL_01E8: brfalse.s IL_023B //    ,   value  false,    . /* 0x0001676E 1119 */ IL_01EA: ldloc.s V_25 //          ( ). /* 0x00016770 17 */ IL_01EC: ldc.i4.1 //    1     int32. /* 0x00016771 58 */ IL_01ED: add //         . /* 0x00016772 07 */ IL_01EE: ldloc.1 //         1. /* 0x00016773 6FF700000A */ IL_01EF: callvirt instance int32 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Count() //             . /* 0x00016778 2F37 */ IL_01F4: bge.s IL_022D //     ( ),        . /* 0x0001677A 07 */ IL_01F6: ldloc.1 //         1. /* 0x0001677B 1119 */ IL_01F7: ldloc.s V_25 //          ( ). /* 0x0001677D 17 */ IL_01F9: ldc.i4.1 //    1     int32. /* 0x0001677E 58 */ IL_01FA: add //         . /* 0x0001677F 6FF900000A */ IL_01FB: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016784 1F29 */ IL_0200: ldc.i4.s 41 //      int8     int32 ( ). /* 0x00016786 6FC800000A */ IL_0202: callvirt instance int32 [mscorlib]System.String::IndexOf(char) //             . /* 0x0001678B 0C */ IL_0207: stloc.2 //                2. /* 0x0001678C 08 */ IL_0208: ldloc.2 //         2. /* 0x0001678D 16 */ IL_0209: ldc.i4.0 //    0     int32. /* 0x0001678E 3221 */ IL_020A: blt.s IL_022D //     ( ),      . /* 0x00016790 07 */ IL_020C: ldloc.1 //         1. /* 0x00016791 1119 */ IL_020D: ldloc.s V_25 //          ( ). /* 0x00016793 17 */ IL_020F: ldc.i4.1 //    1     int32. /* 0x00016794 58 */ IL_0210: add //         . /* 0x00016795 07 */ IL_0211: ldloc.1 //         1. /* 0x00016796 1119 */ IL_0212: ldloc.s V_25 //          ( ). /* 0x00016798 17 */ IL_0214: ldc.i4.1 //    1     int32. /* 0x00016799 58 */ IL_0215: add //         . /* 0x0001679A 6FF900000A */ IL_0216: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x0001679F 08 */ IL_021B: ldloc.2 //         2. /* 0x000167A0 17 */ IL_021C: ldc.i4.1 //    1     int32. /* 0x000167A1 58 */ IL_021D: add //         . /* 0x000167A2 6FCB00000A */ IL_021E: callvirt instance string [mscorlib]System.String::Substring(int32) //             . /* 0x000167A7 6F8600000A */ IL_0223: callvirt instance string [mscorlib]System.String::Trim() //             . /* 0x000167AC 6FFF00000A */ IL_0228: callvirt instance void class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::set_Item(int32, !0) //             . /* 0x000167B1 07 */ IL_022D: ldloc.1 //         1. /* 0x000167B2 1119 */ IL_022E: ldloc.s V_25 //          ( ). /* 0x000167B4 6F6701000A */ IL_0230: callvirt instance void class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::RemoveAt(int32) //             . /* 0x000167B9 1119 */ IL_0235: ldloc.s V_25 //          ( ). /* 0x000167BB 17 */ IL_0237: ldc.i4.1 //    1     int32. /* 0x000167BC 59 */ IL_0238: sub //           . /* 0x000167BD 1319 */ IL_0239: stloc.s V_25 //                index ( ). /* 0x000167BF 1119 */ IL_023B: ldloc.s V_25 //          ( ). /* 0x000167C1 17 */ IL_023D: ldc.i4.1 //    1     int32. /* 0x000167C2 58 */ IL_023E: add //         . /* 0x000167C3 1319 */ IL_023F: stloc.s V_25 //                index ( ). /* 0x000167C5 1119 */ IL_0241: ldloc.s V_25 //          ( ). /* 0x000167C7 07 */ IL_0243: ldloc.1 //         1. /* 0x000167C8 6FF700000A */ IL_0244: callvirt instance int32 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Count() //             . /* 0x000167CD 3F3EFFFFFF */ IL_0249: blt IL_018C //    ,     .</span></span></code> </pre><br></div></div><br>  Jetzt haben wir ein Fenster in CIL-Befehlen, deren HEX-Darstellung, Dateiversatz und Beschreibung.  Alles an einem Ort.  Sehr praktisch (danke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CrazyAlex25</a> ). <br>  Achten wir auf den Block, in dem "__declspec" erw√§hnt wird.  Blockoffset 0x0001675A.  Dies wird der Beginn unserer √Ñnderungen sein.  Suchen Sie als N√§chstes die RemoveAt-Methode.  Es wird uns unver√§ndert n√ºtzlich sein.  Das letzte Byte des Blocks ist 0x000167BF.  Gehen Sie zum HEX-Editor <b>Strg + X</b> und schreiben Sie 0x00 in diesen Bereich.  Wir werden speichern und pr√ºfen, wozu die √Ñnderungen gef√ºhrt haben. <br><div class="spoiler">  <b class="spoiler_title">leere Schleife</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } list.RemoveAt(num3); num3--; num3++; }</code> </pre> <br></div></div><br>  Jetzt werden wir die neue Logik implementieren.  F√ºgen Sie zun√§chst die Bedingung hinzu <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (num3 != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; num3 &lt; list.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Die Tabelle zeigt die neuen Befehle und ihre Beschreibung. <br><table><tbody><tr><th>  1119 </th><th>  ldloc.s </th><th>  L√§dt eine lokale Variable mit dem angegebenen Index auf den Berechnungsstapel (Kurzform). </th></tr><tr><th>  2C61 </th><th>  brfalse.s </th><th>  √úbergibt die Steuerung an die endg√ºltige Anweisung, wenn der Wert false, eine Nullreferenz oder Null ist.  <u>Hinweis</u> : Wenn num3 == 0 ist, fahren Sie mit dem Erh√∂hen des Schleifeniterators fort.  Der Wert 0x64 ist der Adressoffset zur Anweisung 0x000167BF (siehe Auflistung) </th></tr><tr><th>  1119 </th><th>  ldloc.s </th><th>  L√§dt eine lokale Variable mit dem angegebenen Index auf den Berechnungsstapel (Kurzform) </th></tr><tr><th>  07 </th><th>  ldloc.1 </th><th>  L√§dt eine lokale Variable mit Index 1 auf den Berechnungsstapel </th></tr><tr><th>  6FF700000A </th><th>  callvirt </th><th>  get_Count () - Ruft eine sp√§t gebundene Objektmethode auf und verschiebt den R√ºckgabewert auf den Berechnungsstapel </th></tr><tr><th>  17 </th><th>  ldc.i4.1 </th><th>  Schiebt den ganzzahligen Wert 1 auf dem Berechnungsstapel als int32 </th></tr><tr><th>  59 </th><th>  sub </th><th>  Subtrahiert einen Wert von einem anderen und schiebt das Ergebnis auf den Berechnungsstapel. </th></tr><tr><th>  2F55 </th><th>  bge.s. </th><th>  Es √ºbertr√§gt die Kontrolle auf die endg√ºltige Anweisung (Kurzform), wenn der erste Wert gr√∂√üer oder gleich dem zweiten ist.  <u>Hinweis</u> : Wenn num3&gt; list.Count - 1 ist, fahren Sie mit dem Schritt des Erh√∂hens des Schleifeniterators fort.  Der Wert 0x55 ist der Adressoffset vor dem Befehl 0x000167BF </th></tr></tbody></table><br>  Wir schreiben diese Bytes ab dem Offset 0x0001675A.  Speichern und erneut dekompilieren <br><br><div class="spoiler">  <b class="spoiler_title">Erste Bedingung</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } <span class="hljs-comment"><span class="hljs-comment">//     if (num3 != 0 &amp;&amp; num3 &lt; list.Count - 1) { list.RemoveAt(num3); num3--; } num3++; }</span></span></code> </pre><br></div></div><br>  Jetzt f√ºgen wir die Zeichenfolgenpr√ºfung "where" und ":" hinzu.  Ich zitiere den folgenden HEX-Code ohne zus√§tzliche Kommentare: <br><br><pre> <code class="plaintext hljs">07 11 19 17 58 6F F9 00 00 0A 72 A3 1D 00 70 28 70 00 00 0A 2D 3F 07 11 19 17 58 6F F9 00 00 0A 72 92 5E 00 70 28 70 00 00 0A 2D 29</code> </pre> <br>  dekompilieren und bekommen, was Sie geplant haben <br><br><div class="spoiler">  <b class="spoiler_title">Neuer Zyklus</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (num3 != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; num3 &lt; list.Count - <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; !(list[num3 + <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">":"</span></span>) &amp;&amp; !(list[num3 + <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>)) { list.RemoveAt(num3); num3--; } num3++; }</code> </pre> <br></div></div><br>  Mit diesen √Ñnderungen generiert das Plugin die folgende Dokumentation des Codes: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DATA_READER_DLL_EXPORTS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br><h3>  Fazit </h3><br>  In dieser Lektion haben wir gelernt, wie wir unser Wissen anwenden k√∂nnen, um Fehler zu beheben.  Nat√ºrlich spiegelt dieses Beispiel nicht die gesamte Vielfalt der Fehler und ihre Behandlung wider, aber dies ist kein ‚Äûbanaler Riss‚Äú.  Wir haben den offensichtlichen Fehler behoben, ohne den Quellcode zu haben und ohne die Anwendung neu zu erstellen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445126/">https://habr.com/ru/post/de445126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445116/index.html">Die US Air Force arbeitet an einer KI-Drohne namens Skyborg</a></li>
<li><a href="../de445118/index.html">In einem privaten Telegramm-Chat k√∂nnen Sie alle Nachrichten l√∂schen - auch Fremde (ein Abstimmungsergebnis wurde hinzugef√ºgt).</a></li>
<li><a href="../de445120/index.html">Frontend Weekly Digest (18. - 24. M√§rz 2019)</a></li>
<li><a href="../de445122/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 357 (18.-24. M√§rz 2019)</a></li>
<li><a href="../de445124/index.html">M√§√üige H√§rtung f√ºr Firefox</a></li>
<li><a href="../de445128/index.html">Oracle Application Express-Lernprogramm IDE-√úbersicht</a></li>
<li><a href="../de445130/index.html">Das Innenministerium hat PCs f√ºr 180 Millionen Rubel gekauft - das ganze Geld ging an ausl√§ndische Hersteller</a></li>
<li><a href="../de445134/index.html">Dies ist Ihr Haskell (nicht) nur faktoriell und gut f√ºr</a></li>
<li><a href="../de445136/index.html">Sei nicht nerv√∂s, beeile dich nicht, unterbreche nicht: die Geschichte einer Trag√∂die</a></li>
<li><a href="../de445138/index.html">IBM Integration Bus und was es isst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>