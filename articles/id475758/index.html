<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ´ â™»ï¸ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¾ Tingkat berlangganan yang dapat diperpanjang secara otomatis di aplikasi iOS ğŸ¤¯ â¹ï¸ ğŸ™ŒğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, ini Renat dari Apphud . Dalam artikel ini, kami akan memberi tahu Anda tingkat langganan yang dapat diperbarui secara otomatis, cara mengonfigura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tingkat berlangganan yang dapat diperpanjang secara otomatis di aplikasi iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/475758/"><p><img src="https://habrastorage.org/webt/ak/pz/18/akpz184-wzln3efdt6el6whs19o.png" alt="gambar"></p><br><p>  Hai, ini Renat dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apphud</a> .  Dalam artikel ini, kami akan memberi tahu Anda tingkat langganan yang dapat diperbarui secara otomatis, cara mengonfigurasinya dengan benar dan dalam hal apa pengguna dikembalikan uang untuk periode berbayar yang tidak digunakan. <a name="habracut"></a></p><br><h2 id="chto-takoe-uroven-podpiski">  Apa tingkat berlangganan? </h2><br><p>  Ini adalah penunjukan kelas berlangganan, tergantung pada tingkat layanan yang ditawarkannya.  Berlangganan kelas pertama berarti tingkat layanan tertinggi, kelas kedua - lebih rendah, dan seterusnya.  Bahkan, jarang di aplikasi mana Anda dapat menemukan dua tingkat langganan, belum lagi tiga atau lebih. </p><br><img src="https://habrastorage.org/webt/ek/ow/4r/ekow4rj6bw6nunu1yi078dzat1c.png"><br><p>  <em>Dua tingkat berlangganan di aplikasi surat kabar The New York Times.</em> </p><br><h2 id="kak-nastroit-urovni-podpiski">  Bagaimana cara mengatur level berlangganan? </h2><br><p>  Untuk mengonfigurasi level langganan Anda, buka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">App Store Connect</a> , pilih aplikasi Anda dan pergi ke tab <em>Fitur</em> .  Di bagian pembelian dalam aplikasi, gerakkan langganan Anda satu tingkat ke atas atau ke bawah.  Untuk melakukan ini, pilih langganan yang diinginkan dengan menekan dan menahan ikon seret dan lepas dan memindahkan langganan ke tingkat yang diinginkan. </p><br><img src="https://habrastorage.org/webt/mq/aq/8v/mqaq8vvrm_z0hkqsn8gvqso9fdc.gif"><br><p>  <em>Seret dan lepaskan langganan ke tingkat yang lebih tinggi.</em> </p><br><p>  Berlangganan nomor 1 harus menawarkan tingkat layanan tertinggi, misalnya, berlangganan semua kategori majalah.  Tidak ada ketergantungan antara durasi berlangganan dan levelnya.  Jadi, langganan tertinggi bisa tahunan, dan langganan pada tingkat yang lebih rendah dari sebulan. </p><br><h2 id="izmenenie-podpiski">  Ubah langganan </h2><br><p>  Pengguna dapat mengubah langganan di aplikasi App Store setelah pendaftarannya.  Ini dapat meningkatkan (meningkatkan), menurunkan (menurunkan) tingkat atau mengubah langganan dalam tingkat yang sama (lintas kelas). </p><br><h4 id="povyshenie-urovnya-podpiski-apgreyd">  Peningkatan tingkat langganan (peningkatan) </h4><br><p>  Jika langganan pengguna saat ini aktif, maka ia akan segera beralih ke tarif baru, dan bagian yang tidak digunakan dari periode berbayar akan dikembalikan ke kartu. </p><br><img src="https://habrastorage.org/webt/y-/fl/7d/y-fl7dwabjscib2zi6wwkwnwmdq.png"><br><p>  <em>Pemberitahuan bahwa sebagian dana akan dikembalikan saat meningkatkan langganan.</em> </p><br><p>  Di akhir artikel, kita akan melihat bagaimana cara menangkap kenaikan tingkat berlangganan dan menghitung jumlah pengembalian. </p><br><h4 id="ponizhenie-urovnya-podpiski-daungreyd">  Downgrade langganan (downgrade) </h4><br><p>  Dengan menurunkan level, pengguna beralih ke yang baru di akhir periode pembayaran saat ini.  Dana tidak dapat dikembalikan, dan biaya langganan baru didebet saat aktivasi. </p><br><h4 id="smena-podpiski-v-ramkah-odnogo-urovnya-krossgreyd">  Perubahan langganan pada level yang sama (lintas kelas) </h4><br><p>  Ini adalah situasi yang umum, dibagi menjadi dua jenis: perubahan langganan satu durasi dan berbeda.  Saat mengubah langganan dengan durasi berbeda, hal yang sama akan terjadi dengan penurunan peringkat: langganan akan diterapkan pada akhir periode pembayaran saat ini. </p><br><p>  Jika durasinya cocok, langganan saat ini akan dibatalkan dan yang baru akan segera dimulai.  Uang akan didebit untuk langganan baru, dan bagian langganan lama yang tidak digunakan akan dikembalikan kepada pengguna. </p><br><h2 id="kak-uznat-o-smene-podpiski-na-servere">  Bagaimana cara mengetahui tentang mengubah langganan di server? </h2><br><p>  Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memvalidasi App Store memeriksa</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mendengarkan pemberitahuan server</a> Apple. </p><br><p>  Saat memeriksa setiap transaksi baru, Anda perlu melihat apakah <em>product_id</em> telah berubah.  Mengubah <em>product_id</em> berarti pengguna telah mengubah langganan mereka di pengaturan App Store. </p><br><p> Selain itu, Anda dapat melihat nilai <code>auto_renew_product_id</code> di <code>pending_renewal_info</code> .  Ini akan membantu Anda mempelajari tentang perubahan ke <em>product_id</em> sebelum berlangganan baru berlaku. </p><br><p>  Jika Anda memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemberitahuan server yang</a> dikonfigurasi, dengarkan pemberitahuan <em>DID_CHANGE_RENEWAL_PREF</em> yang dipanggil saat suatu produk <em>diubah</em> .  Anda dapat membatasi diri pada pemberitahuan ini dan mendapatkan <em>product_id</em> baru dari parameter permintaan, atau Anda dapat memeriksa kembali tanda terima App Store.  Dalam kasus yang terakhir, pemberitahuan server Apple hanya akan berfungsi sebagai pemicu untuk pemeriksaan tidak terjadwal. </p><br><h2 id="kak-vychislit-summu-vozvrata-pri-apgreydah">  Bagaimana cara menghitung jumlah pengembalian untuk peningkatan? </h2><br><p>  Untuk memahami apakah ada peningkatan, Anda perlu memeriksa nilai bidang <code>is_upgraded</code> .  Nilai <code>true</code> berarti bahwa transaksi berikutnya sudah ada dalam langganan baru. </p><br><p>  Perhatikan bahwa <code>is_upgraded</code> akan <code>true</code> bahkan ketika mengubah langganan dengan durasi yang sama dalam level yang sama.  Yaitu, <code>is_upgraded = true</code> tidak berarti peningkatan level, tetapi fakta bahwa perubahan berlangganan dilakukan dengan pengembalian uang. </p><br><p>  Selain bidang <code>is_upgraded</code> , bidang <code>cancellation_date</code> akan muncul dalam transaksi ini, yang menunjukkan waktu pembatalan.  Itu sama atau hampir bertepatan dengan tanggal mulai dari transaksi berikutnya. </p><br><p>  Ternyata bidang <code>cancellation_date</code> muncul <strong>tidak hanya ketika berlangganan dikembalikan</strong> , tetapi juga ketika meningkatkan. </p><br><p>  Perhatikan bahwa <strong>saat memutakhirkan langganan Sandbox, bidang <code>cancellation_date</code> tidak ada</strong> .  Oleh karena itu, saat menguji di Sandbox, Anda harus menggunakan <code>purchase_date</code> transaksi berikutnya alih-alih <code>cancellation_date</code> .  Baca lebih lanjut tentang tanggal pembatalan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam dokumentasi Apple</a> . </p><br><p>  Untuk menghitung jumlah yang harus dikembalikan kepada pengguna, Anda perlu membagi periode yang tidak digunakan dengan periode penuh dari langganan sebelumnya dan dikalikan dengan biayanya: </p><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># upgrade_date is `cancellation_date` in prodiction or `purchase_date` of new transaction in sandbox # to_f converts date to float timestamp value prorate_amount = price * (upgrade_date.to_f - cancellation_date.to_f) / (expires_date.to_f - purchase_date.to_f)</span></span></code> </pre> <br><h2 id="kak-eto-realizovano-v-apphud">  Bagaimana ini diterapkan di Apphud? </h2><br><p>  Apphud secara otomatis melacak perubahan dalam langganan dan menghitung kembalinya bagian yang tidak digunakan. </p><br><img src="https://habrastorage.org/webt/i-/ni/wk/i-niwkapdw5jjoaztapmznegq-c.png"><br><p>  <em>Contoh perubahan langganan pada tingkat yang sama dengan pengembalian sebagian dana di Apphud.</em> </p><br><p>  Pengembang iOS tidak diharuskan menangani sendiri situasi ini.  Anda hanya perlu mengintegrasikan SDK, sisanya akan dilakukan oleh Apphud. </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Ternyata hanya memperbarui nilai <code>product_id</code> tidak cukup: Anda juga perlu mempertimbangkan pengembalian dana untuk peningkatan.  Bekerja dengan langganan membutuhkan penanganan banyak situasi batas.  Kami membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apphud</a> - layanan yang sangat menyederhanakan pekerjaan dengan langganan.  Anda dapat mulai menggunakannya secara gratis.  Registrasi - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di tautan ini</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id475758/">https://habr.com/ru/post/id475758/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id475746/index.html">Anatomi Sistem Akustik: Cermet dan Komposit - Tentang Monitor Audio Diffusers</a></li>
<li><a href="../id475748/index.html">22 November, Moskwa - MenganalisisIT MeetUp No. 3</a></li>
<li><a href="../id475750/index.html">Transfer Pengetahuan dan Terjemahan Mesin Saraf Tiruan dalam Praktek</a></li>
<li><a href="../id475754/index.html">Celana pendek tentang Scrum</a></li>
<li><a href="../id475756/index.html">Intisari Desain Makanan Oktober 2019</a></li>
<li><a href="../id475760/index.html">Pengembang junior - mengapa kami mempekerjakan mereka dan bagaimana kami bekerja dengannya</a></li>
<li><a href="../id475764/index.html">Rantai Markov untuk pembuatan bangunan prosedural</a></li>
<li><a href="../id475768/index.html">Kotlin: Bagaimana Ini Merupakan Pilihan Luar Biasa Untuk Pengembangan Aplikasi Android?</a></li>
<li><a href="../id475770/index.html">Universitas Stanford - Kunjungi dan Tinjau</a></li>
<li><a href="../id475772/index.html">6 poin aplikasi untuk industri Internet hal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>