<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ú¥Ô∏è üèΩ üí™üèæ Alami 2 juta sesi tanpa kepala üèúÔ∏è ü§≤üèø ü§∑üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diterbitkan 4 Juni 2018 di blog perusahaan tanpa browser. 

 Kami senang mengumumkan bahwa kami baru saja melewati garis dua juta sesi yang dilayani !...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alami 2 juta sesi tanpa kepala</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413547/">  <font color="gray">Diterbitkan 4 Juni 2018 di blog perusahaan tanpa browser.</font> <br><br>  Kami senang mengumumkan bahwa kami baru saja melewati garis <b>dua juta sesi yang dilayani</b> !  Ini adalah <i>jutaan</i> tangkapan layar yang dihasilkan, cetak PDF dan situs yang diuji.  Kami telah melakukan hampir semua yang dapat Anda pikirkan dengan browser tanpa kepala. <br><br>  Meskipun itu bagus untuk mencapai tonggak sejarah, tetapi dalam perjalanan jelas ada <i>banyak</i> tumpang tindih dan masalah.  Karena banyaknya lalu lintas yang diterima, saya ingin mengambil langkah mundur dan menyatakan rekomendasi umum untuk meluncurkan browser tanpa kepala (dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalang</a> ) dalam produksi. <br><br>  Berikut ini beberapa tipsnya. <br><a name="habracut"></a><br><h1>  1. Jangan menggunakan browser tanpa kepala sama sekali </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/cae/85f/438/cae85f438e0037a0f87f1ae6619cfc33.png"><br><br><h3>  Konsumsi Sumber Daya Chrome Tanpa Kepala </h3><br>  Sama sekali tidak, jika <i>keadaan</i> memungkinkan, <i>jangan memulai browser sama sekali dalam mode tanpa kepala</i> .  Terutama pada infrastruktur yang sama dengan aplikasi Anda (lihat di atas).  Browser tanpa kepala tidak dapat diprediksi, rakus dan berkembang biak seperti Mr. Misix dari Rick dan Morty.  Hampir semua yang dapat dilakukan browser (kecuali untuk interpolasi dan menjalankan JavaScript) dapat dilakukan dengan menggunakan alat Linux sederhana.  Perpustakaan Cheerio dan lainnya menawarkan Node API yang elegan untuk mengambil data dengan permintaan dan pengikisan HTTP, jika itu adalah tujuan Anda. <br><br>  Misalnya, Anda dapat mengambil halaman (dengan asumsi itu semacam HTML) dan memo dengan perintah sederhana seperti ini: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cheerio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'cheerio'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fetch <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node-fetch'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> fetch(url); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> res.test(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = cheerio.load(html); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $(<span class="hljs-string"><span class="hljs-string">'buy-now.price'</span></span>).text(); } getPrice(<span class="hljs-string"><span class="hljs-string">'https://my-cool-website.com/'</span></span>);</code> </pre> <br>  Jelas, skrip tidak mencakup semua kasus penggunaan, dan jika Anda membaca artikel ini, maka kemungkinan besar Anda harus menggunakan browser tanpa kepala.  Jadi mari kita mulai. <br><br><h1>  2. Jangan meluncurkan browser tanpa kepala secara tidak perlu </h1><br>  Kami telah menjumpai banyak pengguna yang mencoba menjaga peramban tetap berjalan meskipun tidak digunakan (dengan koneksi terbuka).  Meskipun ini mungkin strategi yang baik untuk mempercepat sesi, itu akan macet dalam beberapa jam.  Sebagian besar karena browser <i>suka</i> men <i>-</i> cache semuanya dalam satu baris dan secara bertahap memakan memori.  Segera setelah Anda berhenti menggunakan browser secara intensif, segera tutup! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> puppeteer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> browser = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> puppeteer.launch(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> browser.newPage(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.goto(<span class="hljs-string"><span class="hljs-string">'https://www.example.com/'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// More stuff ...page.click() page.type() browser.close(); // &lt;- Always do this! }</span></span></code> </pre> <br>  Di browserless, kami biasanya memperbaiki sendiri kesalahan ini untuk pengguna, selalu mengatur semacam waktu untuk sesi dan menutup browser saat WebSocket terputus.  Tetapi jika Anda tidak menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layanan</a> kami atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gambar Docker cadangan</a> , pastikan untuk memastikan bahwa Anda <i>secara otomatis</i> menutup browser, karena itu akan tidak menyenangkan ketika semuanya jatuh di tengah malam. <br><br><h1>  3. Halaman teman Anda. <code>page.evaluate</code> </h1><br><blockquote>  Hati-hati dengan transponder seperti babel atau naskah, karena mereka suka membuat fungsi pembantu dan menganggap bahwa mereka dapat diakses dengan penutupan.  Artinya, panggilan balik .evaluate <i>mungkin tidak</i> berfungsi dengan benar. </blockquote><br>  Dalang memiliki banyak metode bagus, seperti menyimpan pemilih DOM dan hal-hal lain di lingkungan Node.  Meskipun sangat nyaman, Anda dapat dengan mudah menembak diri sendiri jika ada sesuatu di halaman yang memaksa simpul DOM ini untuk <i>bermutasi</i> .  Ini mungkin tidak terlalu keren, tetapi pada kenyataannya lebih baik melakukan semua pekerjaan di sisi browser <i>dalam konteks browser</i> .  Ini biasanya berarti memuat <code>page.evaulate</code> untuk semua pekerjaan yang perlu dilakukan. <br><br>  Misalnya, alih-alih sesuatu seperti ini ( <i>tiga</i> tindakan asinkron): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $anchor = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.$(<span class="hljs-string"><span class="hljs-string">'a.buy-now'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> link = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> $anchor.getProperty(<span class="hljs-string"><span class="hljs-string">'href'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> $anchor.click(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> link;</code> </pre> <br>  Lebih baik melakukan ini (satu tindakan asinkron): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.evaluate(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $anchor = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'a.buy-now'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> text = $anchor.href; $anchor.click(); });</code> </pre> <br>  Keuntungan lain untuk membungkus tindakan dalam panggilan <code>evaluate</code> adalah portabilitas: kode ini dapat dijalankan di browser untuk memverifikasi alih-alih mencoba menulis ulang kode Node.  Tentu saja, selalu disarankan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan debugger</a> untuk mengurangi waktu pengembangan. <br><br>  Aturan praktis yang sederhana adalah menghitung jumlah <code>await</code> atau <code>then</code> dalam kode.  Jika ada lebih dari satu, maka mungkin yang terbaik adalah menjalankan kode di dalam <code>page.evaluate</code> . <code>page.evaluate</code> panggilan.  Alasannya adalah bahwa semua tindakan async bolak-balik antara Node runtime dan browser, yang berarti serialisasi dan deserialisasi JSON yang konstan.  Meskipun tidak ada jumlah parsing yang begitu besar (karena semuanya didukung oleh WebSockets), masih membutuhkan waktu, yang lebih baik dihabiskan untuk hal lain. <br><br><h1>  4. Paralelkan browser, bukan halaman web </h1><br>  Jadi, kami menyadari bahwa meluncurkan browser tidak baik dan kami perlu melakukan ini hanya dalam keadaan darurat.  Kiat berikutnya adalah menjalankan hanya satu sesi per browser.  Meskipun pada kenyataannya adalah mungkin untuk menghemat sumber daya dengan memparalelkan kerja melalui <code>pages</code> , tetapi jika satu halaman jatuh, itu dapat merusak seluruh browser.  Selain itu, tidak dijamin bahwa setiap halaman benar-benar bersih (cookie dan penyimpanan dapat menjadi sakit kepala, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seperti yang kita lihat</a> ). <br><br>  Sebaliknya: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> puppeteer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Launch one browser and capture the promise const launch = puppeteer.launch(); const runJob = async (url) { // Re-use the browser here const browser = await launch; const page = await browser.newPage(); await page.goto(url); const title = await page.title(); browser.close(); return title; };</span></span></code> </pre> <br>  Lebih baik lakukan ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> puppeteer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> runJob = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (url) { <span class="hljs-comment"><span class="hljs-comment">// Launch a clean browser for every "job" const browser = puppeteer.launch(); const page = await browser.newPage(); await page.goto(url); const title = await page.title(); browser.close(); return title; };</span></span></code> </pre> <br>  Setiap instance browser baru mendapatkan <code>--user-data-dir</code> ( <a href="">kecuali jika dinyatakan lain</a> ).  Artinya, itu sepenuhnya diproses sebagai sesi baru yang baru.  Jika Chrome macet karena suatu alasan, Chrome tidak akan melakukan sesi lain dengannya. <br><br><h1>  5. Batasan antrian dan konkurensi </h1><br>  Salah satu fitur utama dari browserless adalah kemampuan untuk membatasi paralelisasi dan antrian dengan rapi.  Jadi aplikasi klien hanya menjalankan <code>puppeteer.connect</code> , tetapi mereka tidak memikirkan implementasi antrian.  Ini mencegah sejumlah besar masalah, terutama dengan Chrome bersamaan yang melahap semua sumber daya yang tersedia dari aplikasi Anda. <br><br>  Cara terbaik dan termudah adalah mengambil gambar Docker kami dan menjalankannya dengan parameter yang diperlukan: <br><br><pre> <code class="hljs pgsql"># Pull <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Puppeteer@<span class="hljs-number"><span class="hljs-number">1.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> support $ docker pull browserless/chrome:<span class="hljs-keyword"><span class="hljs-keyword">release</span></span>-puppeteer<span class="hljs-number"><span class="hljs-number">-1.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> $ docker run -e "MAX_CONCURRENT_SESSIONS=10" browserless/chrome:<span class="hljs-keyword"><span class="hljs-keyword">release</span></span>-puppeteer<span class="hljs-number"><span class="hljs-number">-1.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Ini membatasi jumlah permintaan bersamaan hingga sepuluh (termasuk sesi debugging dan banyak lagi).  Antrian dikonfigurasi oleh variabel <code>MAX_QUEUE_LENGTH</code> .  Biasanya, Anda dapat melakukan sekitar 10 permintaan bersamaan per gigabyte memori.  Persentase penggunaan CPU dapat bervariasi untuk tugas yang berbeda, tetapi pada dasarnya Anda akan membutuhkan banyak dan banyak RAM. <br><br><h1>  6. Jangan lupa tentang <code>page.waitForNavigation</code> </h1><br>  Salah satu masalah paling umum yang kami temui adalah tindakan yang mulai memuat halaman dengan penghentian skrip mendadak berikutnya.  Ini karena tindakan yang memicu <code>pageload</code> sering menyebabkan menelan pekerjaan berikutnya.  Untuk menyelesaikan masalah, Anda biasanya perlu memanggil tindakan memuat halaman - dan segera setelah itu menunggu untuk memuat. <br><br>  Misalnya, <code>console.log</code> tersebut tidak berfungsi di satu tempat ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://chrome.browserless.io/%3Fscript%3Dawait%2520page.goto(%2527">lihat demo</a> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.goto(<span class="hljs-string"><span class="hljs-string">'https://example.com'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.click(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.title(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(title);</code> </pre> <br>  Tapi itu <i>berfungsi</i> di yang lain ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://chrome.browserless.io/%3Fscript%3Dawait%2520page.goto(%2527">lihat demo</a> ). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.goto(<span class="hljs-string"><span class="hljs-string">'https://example.com'</span></span>); page.click(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.waitForNavigation(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.title(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(title);</code> </pre> <br>  Anda dapat membaca lebih lanjut tentang waitForNavigation di <a href="">sini</a> .  Fungsi ini memiliki kira-kira parameter antarmuka yang sama seperti <code>page.goto</code> , tetapi hanya dengan bagian "tunggu". <br><br><h1>  7. Gunakan Docker untuk semua yang Anda butuhkan. </h1><br>  Chrome membutuhkan banyak dependensi untuk berfungsi dengan baik.  Sangat banyak.  Bahkan setelah menginstal semua yang Anda perlu khawatir tentang hal-hal seperti font dan proses phantom.  Karenanya, sangat ideal untuk menggunakan semacam wadah untuk meletakkan semuanya di sana.  Docker hampir secara khusus dirancang untuk tugas ini, karena Anda dapat membatasi jumlah sumber daya yang tersedia dan mengisolasinya.  Jika Anda ingin membuat <code>Dockerfile</code> Anda sendiri, periksa di bawah ini semua dependensi yang diperlukan: <br><br><pre> <code class="hljs tex"># Dependencies needed for packages downstream RUN apt-get update &amp;&amp; apt-get install -y <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>unzip <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>fontconfig <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>locales <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>gconf-service <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libasound2 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libatk1.0-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libc6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libcairo2 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libcups2 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libdbus-1-3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libexpat1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libfontconfig1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libgcc1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libgconf-2-4 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libgdk-pixbuf2.0-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libglib2.0-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libgtk-3-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libnspr4 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libpango-1.0-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libpangocairo-1.0-0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libstdc++6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libx11-6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libx11-xcb1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxcb1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxcomposite1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxcursor1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxdamage1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxext6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxfixes3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxi6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxrandr2 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxrender1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxss1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libxtst6 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>ca-certificates <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>fonts-liberation <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libappindicator1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>libnss3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>lsb-release <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>xdg-utils <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>wget</code> </pre> <br>  Dan untuk menghindari proses zombie (hal yang umum di Chrome), lebih baik menggunakan sesuatu seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dumb-init</a> untuk berjalan dengan benar: <br><br><pre> <code class="hljs powershell">ADD https://github.com/Yelp/dumb<span class="hljs-literal"><span class="hljs-literal">-init</span></span>/releases/download/v1.<span class="hljs-number"><span class="hljs-number">2.0</span></span>/dumb<span class="hljs-literal"><span class="hljs-literal">-init_1</span></span>.<span class="hljs-number"><span class="hljs-number">2.0</span></span>_amd64 /usr/local/bin/dumb<span class="hljs-literal"><span class="hljs-literal">-init</span></span> RUN chmod +x /usr/local/bin/dumb<span class="hljs-literal"><span class="hljs-literal">-init</span></span></code> </pre> <br>  Jika Anda ingin tahu lebih banyak, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dockerfile kami</a> . <br><br><h1>  8. Ingat dua runtime yang berbeda. </h1><br>  Sangat berguna untuk mengingat bahwa ada <i>dua</i> runtime JavaScript (Node dan browser).  Ini bagus untuk memisahkan tugas, tetapi kebingungan pasti terjadi karena beberapa metode akan memerlukan melewati tautan eksplisit alih-alih hoisting. <br><br>  Misalnya, ambil <code>page.evaluate</code> .  Jauh di dalam perut protokol ada <a href="">pengetatan <i>literal</i> fungsi dan transfernya ke Chrome</a> .  Karena itu, hal-hal seperti penutupan dan lift <i>tidak akan berfungsi sama sekali</i> .  Jika Anda perlu memberikan beberapa referensi atau nilai ke panggilan evaluasi, tambahkan saja sebagai argumen yang akan diproses dengan benar. <br><br>  Jadi, alih-alih merujuk <code>selector</code> melalui penutupan: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> anchor = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.goto(<span class="hljs-string"><span class="hljs-string">'https://example.com/'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// `selector` here is `undefined` since we're in the browser context const clicked = await page.evaluate(() =&gt; document.querySelector(anchor).click());</span></span></code> </pre> <br>  Parameter lulus yang lebih baik: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> anchor = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> page.goto(<span class="hljs-string"><span class="hljs-string">'https://example.com/'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Here we add a `selector` arg and pass in the reference in `evaluate` const clicked = await page.evaluate((selector) =&gt; document.querySelector(selector).click(), anchor);</span></span></code> </pre> <br>  <code>page.evaluate</code> dapat menambahkan satu atau lebih argumen ke fungsi <code>page.evaluate</code> , karena variabel di sini.  Pastikan untuk memanfaatkan ini! <br><br><h1>  Masa depan </h1><br>  Kami sangat optimis tentang masa depan browser tanpa kepala dan semua otomatisasi yang dapat mereka capai.  Menggunakan alat canggih seperti dalang dan tanpa browser, kami berharap bahwa debugging dan menjalankan otomatisasi tanpa kepala dalam produksi akan lebih mudah dan lebih cepat.  Segera kami akan meluncurkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penagihan pay-as-you-go untuk akun</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsi</a> yang akan membantu Anda mengatasi pekerjaan tanpa kepala Anda dengan lebih baik! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id413547/">https://habr.com/ru/post/id413547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id413529/index.html">Mengapa perangkat i-SENSYS baru dapat disebut revolusioner</a></li>
<li><a href="../id413531/index.html">Buku "Persatuan untuk pengembang. Game multi-platform seluler ¬ª</a></li>
<li><a href="../id413539/index.html">Kontroler sederhana berdasarkan logika fuzzy. Penciptaan dan kustomisasi</a></li>
<li><a href="../id413543/index.html">Angular cli 6: mengapa Anda membutuhkannya dan cara menggunakannya</a></li>
<li><a href="../id413545/index.html">Humor dalam branding - mengapa itu tidak selalu baik</a></li>
<li><a href="../id413549/index.html">Kursus Kuliah Pengembangan Web</a></li>
<li><a href="../id413551/index.html">Scrolling dan perhatian (studi 2018)</a></li>
<li><a href="../id413553/index.html">Registrar REG.RU menghilangkan mitra akses ke 70 ribu domain dan mengambil layanan mereka sendiri</a></li>
<li><a href="../id413555/index.html">Interoperabilitas yang Aman dalam Sistem Terdistribusi</a></li>
<li><a href="../id413557/index.html">NewSQL: SQL tidak ke mana-mana</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>