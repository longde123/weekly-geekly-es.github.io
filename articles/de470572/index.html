<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😬 💑 🥥 „Automatisierung der Infrastruktur. Warum machen wir das? " (Denis Yakovlev) 🚒 👏🏾 👩🏽‍🤝‍👨🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich schlage vor, mich mit der Entschlüsselung des Berichts von Denis Yakovlev "Automatisierung der Infrastruktur. Warum machen wir das?" 


 Der Beric...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>„Automatisierung der Infrastruktur. Warum machen wir das? " (Denis Yakovlev)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470572/"><h4 id="predlagayu-oznakomitsya-s-rasshifrovkoy-doklada-denisa-yakovleva-avtomatizaciya-infrastruktury-zachem-my-eto-delaem">  Ich schlage vor, mich mit der Entschlüsselung des Berichts von Denis Yakovlev "Automatisierung der Infrastruktur. Warum machen wir das?" </h4><br><p>  <strong>Der Bericht 2016 selbst.</strong>  <strong>Der Bericht wurde speziell für diejenigen entschlüsselt, die virtuelle Maschinen mit ihren Händen erstellen.</strong> </p><br><p>  Bericht darüber, wie wir bei 2GIS automatisiert mit der Infrastruktur arbeiten. </p><br><p>  „Man muss genauso schnell laufen, um an Ort und Stelle zu bleiben, aber um irgendwohin zu gelangen, muss man mindestens doppelt so schnell laufen“ (Alice im Wunderland). </p><br><p>  Was bedeutet dieser Satz für uns?  In einem hart umkämpften Umfeld sollten sich Unternehmen bemühen, ihre Produkte so schnell wie möglich an die Benutzer zu liefern.  Die Verkürzung der Time-to-Market-Parameter ist eine mehrstufige Aufgabe.  Um dies zu lösen, müssen Sie sowohl Entwicklungsprozesse als auch Tools ändern.  Eine wichtige Grundlage für den gesamten Entwicklungsprozess ist die Infrastruktur.  Je größer die Infrastruktur, desto mehr Probleme, Anwendungsfälle usw.  Wenn nicht alle damit verbundenen Vorgänge automatisiert sind, steigt die Anzahl der Probleme.  Eine davon ist die Zeit, die ein Entwickler mit Infrastrukturproblemen verbringt, anstatt Geschäftslogik zu schreiben. </p><br><p>  Reden wir über: </p><br><ul><li>  Welche Infrastrukturprobleme hatten die Teams? </li><li>  Wie die Entwicklungs- und Testprozesse darunter litten; </li><li>  Wie wir OpenStack implementiert haben; </li><li>  Was sind unsere Szenarien für die Verwendung von OpenStack? </li><li>  Wie die Automatisierung zusätzliche Impulse in der Entwicklung erhielt und neue interne Produkte auftauchten; </li><li>  Welche Aspekte wir noch haben, ist nicht automatisiert. </li></ul><br><iframe width="560" height="315" src="https://www.youtube.com/embed/18b-OWRKrO4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><p>  Über mich.  Firma 2GIS.  Ich arbeite seit zwei Jahren in der Firma. </p><br><p><img src="https://habrastorage.org/webt/gy/ag/2-/gyag2-xckvwdkl7gdm_7hx6pvwk.png"></p><br><p>  Infrastruktur- und Betriebsteam.  Wir unterstützen hauptsächlich die interne Infrastruktur der Webabteilung.  Kürzlich haben sich andere interne Produktteams uns angeschlossen.  Wir sind auch für den Betrieb der Webprodukte des Unternehmens in der Produktion verantwortlich.  Außerdem erforschen und entwickeln wir neue Tools, um unser Leben zu erleichtern und das Leben unserer geliebten Entwickler zu verbessern.  Wir sind nur 9. </p><br><p><img src="https://habrastorage.org/webt/c3/uz/zk/c3uzzkplsh7pvj68b9jf3w0x6fw.png"></p><br><p>  Zuerst verstehen wir die Infrastruktur.  Warum reden wir über sie?  Was ist das?  Wann fangen wir an über sie zu reden? </p><br><p><img src="https://habrastorage.org/webt/kt/le/hu/ktlehulbfvgz5uniizdomjk3ksi.png"></p><br><p>  Von den ersten Momenten der Arbeit an dem Produkt und einigen Projekten an haben wir eine Frage: Wo werden wir sie einsetzen?  Wo kann man die Ergebnisse überprüfen?  wo zu testen und so weiter. </p><br><p><img src="https://habrastorage.org/webt/vc/f1/og/vcf1ogp7ucfxxsl7fcr0a1ovn4i.png"></p><br><p>  Sofort ist die erste Antwort lokal.  Vor Ort, weil es sehr einfach ist.  Entwickelt auf seinem Laptop, gestartet, überprüft - alles ist in Ordnung.  Sie sitzen und denken - warum neben Ihrem Laptop überprüfen?  Alles funktioniert bei mir. </p><br><p><img src="https://habrastorage.org/webt/tv/fo/8s/tvfo8s67s_3qr_lddgivqgufr1q.png"></p><br><p>  Und wenn wir ein Betriebssystem auf dem Laptop haben und ein anderes in der Produktion läuft?  Oder sollte unser Produkt mehrere Betriebssysteme unterstützen? </p><br><p><img src="https://habrastorage.org/webt/oi/1v/3v/oi1v3vxhil-0wjcz2nccgv35ane.png"></p><br><p>  Der Fall ist nicht abgedeckt.  Das heißt, verschiedene Betriebssysteme. </p><br><p><img src="https://habrastorage.org/webt/cz/az/nd/czaznduqrmabsvhdrj3ghflrjmk.png"></p><br><p>  Wenn wir die Gelegenheit haben und eine willensstarke Entscheidung treffen, haben wir überall Linux.  Zum Beispiel einige Ubuntu.  Der Rest ist alles vom Bösen.  Es scheint uns, dass wir alle unsere Probleme gelöst haben. </p><br><p><img src="https://habrastorage.org/webt/fk/cm/n4/fkcmn40rxtplxg4wqwwrc5rfqzk.png"></p><br><p>  Es reicht jedoch nicht aus, nur das Betriebssystem anzupassen.  Wir brauchen Pakete einer bestimmten Version. </p><br><p><img src="https://habrastorage.org/webt/ur/wk/v2/urwkv23z-j7zrihbl1khhw-w15y.png"></p><br><p>  Wir überlegen, wie wir dieses Problem lösen können.  Und denken Sie daran - wir haben Isolation.  Sehr hohes Zeug.  Gott sei Dank gibt es so viele Produkte auf dem Markt.  Wir nehmen Virtualbox.  Erstellen Sie eine virtuelle Maschine.  Wir rollen unser Produkt.  Wir machen Schnappschüsse.  Wir haben die Umwelt. </p><br><p><img src="https://habrastorage.org/webt/r-/n9/bk/r-n9bka6ertxpzyqxpbhupanpky.png"></p><br><p>  Wir entwickeln uns.  Unser Produkt wird immer schwieriger.  Dies ist nicht mehr nur eine PHP-Datenbankanwendung.  Die Anwendung hat sich zu einem verteilten System entwickelt.  Wir haben andere Produkte auf dem Markt. </p><br><p><img src="https://habrastorage.org/webt/6s/i2/hk/6si2hkul51ld2phlv1mpz__aixw.png"></p><br><p>  Das Unternehmen entwickelt sich.  Und wir haben neue Anwendungsfälle.  Alle diese Produkte wollen sich integrieren, um zusammenarbeiten zu können.  Wir haben Funktionen, die mehrere Produkte durchlaufen.  Wir werden ständig gebeten zu zeigen, was Sie entwickelt haben.  Lass es uns irgendwo sehen.  Wir haben keine Ressourcen mehr für manuelle Tests.  Wir erinnern uns, dass es eine kontinuierliche Integration gibt, Autotests.  Dazu benötigen Sie zusätzliche Software.  Die lokale Umgebung von uns reicht trotz aller Isolation nicht mehr aus.  Hier kommt die Infrastruktur ins Spiel.  Wir brauchen einen Ort, an dem wir unsere Produkte einsetzen und jemandem die Ergebnisse zeigen können.  Wir müssen das alles irgendwie schaffen und es sollte bequem sein. </p><br><p><img src="https://habrastorage.org/webt/pr/vf/uh/prvfuhn624yrkiadhp2hsbuyvfe.png"></p><br><p>  Schauen wir uns unsere Firma 2GIS an. </p><br><p><img src="https://habrastorage.org/webt/e-/a8/j-/e-a8j-63rvzelvponft65ysnbmw.png"></p><br><p>  Dies ist eine Anleitung und Karten.  Sie können auf den Stadtplan schauen, nach Organisationen suchen. </p><br><p><img src="https://habrastorage.org/webt/iy/lp/rc/iylprcfa5i3k3gevbgac_aun2ai.png"></p><br><p>  Wir haben: Webprodukte, mobile, Desktop-Anwendungen.  Es gibt ungefähr fünfunddreißig verschiedene Teams unterschiedlicher Größe. </p><br><p><img src="https://habrastorage.org/webt/g4/za/ei/g4zaeixca9qx5xbjlb7c7pdhg-e.png"></p><br><p>  Welche Probleme hatten wir mit der Infrastruktur?  Ende 2013 haben wir proxmox verwendet.  Dies ist ein Virtualisierungsverwaltungssystem.  Mit ihm können Sie entweder virtuelle KVM-Maschinen oder OpenVZ-Container erstellen.  All dies erfolgt jedoch von Hand über Schnittstellen.  Um voll funktionsfähig zu sein, müssen Sie noch in die virtuelle Maschine gehen und das Netzwerk DNS konfigurieren. </p><br><p><img src="https://habrastorage.org/webt/jh/un/um/jhunumwvdccmklzouppnrkzu3ns.png"></p><br><p>  Daher sah der Ablauf unserer Entwicklung für einige Zeit wie folgt aus.  Als Entwickler suche ich nach Ticketadministratoren.  Administratoren erstellen, wenn sie Zeit haben, eine virtuelle Maschine.  Sie geben eine IP-Adresse, ein Login und ein Passwort heraus.  Wenn ich diese virtuelle Maschine jedoch erneut bereitstellen muss, gehe ich erneut zu Administratoren, die mich bereits misstrauisch ansehen.  Sie sagen - ein Typ so viel wie möglich? </p><br><p><img src="https://habrastorage.org/webt/hm/1a/ls/hm1alsxmnf5lmpfgtmminlzvtdq.png"></p><br><p>  Es gab keine Trennung der Projekte.  Es gab eine Reihe von virtuellen Maschinen auf mehreren Servern, auf denen Administratoren alles mit ihren Händen erstellten.  Es bestand eine hohe Wahrscheinlichkeit menschlicher Fehler.  Sie könnten die IP-Adresse verwechseln oder die falsche virtuelle Maschine löschen.  Sehr, sehr viele solcher Fälle.  Und die Verantwortung für die virtuelle Maschine ist unverständlich.  Entwickler tragen keine Verantwortung, Administratoren nehmen auch kein Dampfbad.  Es ist nicht klar, dass jemand anderes eine virtuelle Maschine benötigt oder jeder sie lange vergessen hat und nichts davon weiß. </p><br><p><img src="https://habrastorage.org/webt/3y/9e/pw/3y9epwkzviqkgupe0toc_9pbioo.png"></p><br><p>  Außerdem gibt es eine schwache API.  Plugins sind entweder kostenpflichtig oder perl. </p><br><p><img src="https://habrastorage.org/webt/vb/pq/9y/vbpq9yat0roahzxzqzhca9i23hy.png"></p><br><p>  Aber neben den Problemen hatten wir noch etwas Nützliches.  Wir hatten unser eigenes Eisen, auf dem sich das alles drehte.  Unsere Systemadministratoren sind großartige Leute, sie wissen, wie man dieses Bügeleisen kocht, sich darum kümmert und es richtig kauft.  Und sie hatten einige Erfahrungen mit Virtualisierung. </p><br><p><img src="https://habrastorage.org/webt/kn/tl/ic/kntlic-tm5c91z9ogulyo9zweqa.png"></p><br><p>  Wir begannen zu überlegen: Welche Lösung würde zu uns passen?  Wie sollte unsere Infrastruktur aussehen, um den Entwicklungsprozess nicht zu stören, sondern zu helfen? </p><br><p>  Als Ergebnis der Studie haben wir die folgende Liste von Anforderungen erhalten: </p><br><ul><li><p>  Effektive Nutzung von Eisen.  Wir möchten keine verwaisten virtuellen Maschinen haben.  Wir wollen nicht nur die Luft im Rechenzentrum erwärmen. </p><br></li><li><p>  Wir möchten Teamressourcen haben, damit das Team die Verantwortung für die verwendeten Ressourcen übernimmt.  Und sie war aufmerksam auf sie. </p><br></li><li><p>  Wir möchten, dass die Lösung modular aufgebaut ist und nur die Dienste auswählt, die wir benötigen.  Und im Bedarfsfall mit Weiterentwicklung expandieren können. </p><br></li><li><p>  Die Lösung sollte leicht zu finalisieren sein.  Wenn neue Anforderungen auftreten, können wir die Lösung an unsere spezifischen Anforderungen anpassen. </p><br></li><li><p>  Wir brauchen nicht nur eine Benutzeroberfläche, sondern auch eine API, um unsere Bindungen zu schreiben und die Infrastruktur zu verwalten. </p><br></li><li><p>  Wir wollen die Teams und insbesondere das Lasttest-Team isolieren.  Ich wollte, dass sie den Rest überhaupt nicht störte. </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/fg/nc/xf/fgncxfm2nnnkbfslzo0nnl35cfk.png"></p><br><p>  Was waren unsere Optionen? </p><br><p>  Wir haben uns die öffentliche Cloud angesehen: AWS und mehr.  Die Option ist insofern attraktiv, als sie fast alle Fragen im Zusammenhang mit der Infrastruktur übernehmen.  Es war möglich, diesen berühmten Unternehmen viel Geld abzunehmen und zu zahlen, aber wir waren durch die widerliche Situation mit dem Dollar (oder den Sanktionen) eingeschränkt.  Ich wollte eigentlich keine Anbietersperre bekommen.  Die dritte Option, bei der wir uns angesehen haben, was wir auf dem Open Source-Markt haben?  Welche Lösungen werden angeboten?  Wir haben unsere eigene Hardware, es bleibt noch etwas aus diesen vielen Open-Source-Anwendungen auszuwählen. </p><br><p><img src="https://habrastorage.org/webt/qk/ii/sw/qkiiswbwmdnunz_qpef2z7vpdso.png"></p><br><p>  Am Ende führten uns unsere Forschungen und Experimente zu einer Software namens OpenStack.  Softinke klingt natürlich zu unhöflich. </p><br><p><img src="https://habrastorage.org/webt/o9/-8/rd/o9-8rd06u7nff83ufgzbdagqage.png"></p><br><p>  OpenStack ist eine vollwertige Software. Tatsächlich handelt es sich um eine Reihe von Diensten zum Aufbau einer öffentlichen oder privaten Cloud.  OpenStack ist eine Open Source-Lösung.  Alle Dienste sind in Python geschrieben.  Jeder Dienst ist für seine Aufgabe verantwortlich und verfügt über eine eigene API. </p><br><p><img src="https://habrastorage.org/webt/vw/x9/gm/vwx9gmn5e_jp0m9wcer_ajrj4e0.png"></p><br><p>  Und so sieht es aus.  Erinnere dich an dieses Bild.  Dann werden wir zu ihr zurückkehren.  Es gibt gemeinsame (allgemeine) Dienste.  Es gibt Dienste für diesen Zweck: Compute, Networking, Storage.  Und unsere Anwendung oder unser Benutzer arbeitet mit diesen Diensten. </p><br><p><img src="https://habrastorage.org/webt/1i/eg/1e/1ieg1ek2kopjwzgf_3_tsatwdtg.png"></p><br><p>  Open Source Lösung.  Die Veröffentlichung erfolgt ein halbes Jahr.  Die Version enthält grundlegende Komponenten.  Jede Version enthält neue Komponenten, die anfänglich in diesem Inkubator erscheinen.  Sie verbringen einige Zeit dort, beheben dort Fehler, stabilisieren sich und so weiter.  Und irgendwann entscheidet die Community, dass diese Komponente ab der nächsten Version in den Basiskomponenten enthalten sein soll.  Es gibt auch viele verschiedene Mailings, Meetings, Konferenzen.  Die größte Konferenz ist der OpenStack Summit.  Findet jedes Jahr statt.  Und beim letzten OpenStack-Gipfel waren ungefähr viertausend oder fünftausend Teilnehmer anwesend.  So ein großes Ereignis.  Viele Berichte. </p><br><p><img src="https://habrastorage.org/webt/ac/ms/go/acmsgowharhocay2-ypwcuhhwky.png"></p><br><p>  Viele Menschen tragen zu dieser Entscheidung bei.  Hier habe ich nur eine Liste solcher Tops gegeben.  Diese Liste reicht aus, um zu verstehen, wie ernst das Projekt ist und welche Unternehmen und wie viel Ressourcen sie in es investieren. </p><br><p><img src="https://habrastorage.org/webt/mu/jd/i_/mujdi_xe4zcvroyq_czco2ccwvm.png"></p><br><p>  Wie wir unsere Infrastrukturprobleme gelöst haben. </p><br><ul><li>  Eine der Komponenten von OpenStack ist der Scheduler, der den Host auswählt, auf dem die virtuelle Maschine erstellt wird. </li><li>  Das Team verfügt nun über eigene Ressourcen.  Dies ist die Menge an CPU, Speicher und mehr.  Wir haben dieses Szenario für die Erstellung eines virtuellen On-Tiket (Anwendung) beseitigt. </li><li>  OpenStack ist eine Reihe von Diensten.  Wir haben nur das Basis-Kit genommen, das unsere Bedürfnisse erfüllt. </li><li>  Da OpenStack Open Source ist, kann es geändert werden. </li><li>  Jeder Dienst verfügt über eine API.  Es gibt Python-Builds.  Das heißt, es ist ganz einfach, mit jedem Dienst zu interagieren und eigene Bindungen zu schreiben. </li><li>  Isolierung.  Wir können Teams für uns in Projekten, in Aggregationszonen, in Netzwerken usw. isolieren. </li></ul><br><p><img src="https://habrastorage.org/webt/db/th/sr/dbthsrjfwry6lmqpejowmzephv4.png"></p><br><p>  Teamentwickler erhielten Infrastruktur als Service.  Wie sieht es aus? </p><br><p><img src="https://habrastorage.org/webt/e7/q8/6y/e7q86ycmgunc1i0clqgi13hosza.png"></p><br><p>  Es gibt zwei Konzepte für Stapel und Vorlage.  Stack besteht aus einer Reihe von Cloud-Ressourcen: virtuelle Maschinen, Netzwerk, DNS-Datensätze und mehr.  Eine Vorlage ist eine Beschreibung dieses Stapels.  Bei OpenStack handelt es sich um eine reguläre YAML-Datei.  Hier ist ein Teil der Datei.  Es heißt, dass es eine Entität wie einen Server mit einem internen OS Nova-Server gibt.  Für den normalen Betrieb benötigen Sie eine IP-Adresse und einen DNS-Eintrag.  Hier werden die Namensparameter als Eingabe akzeptiert. Flavour ist eine Beschreibung der Ressourcen, die dieser Server benötigt.  Image-Betriebssystem.  Schlüsselname - welcher öffentliche Schlüssel beim Bereitstellen des Servers verwendet werden soll.  Wir haben alle diese Vorlagen im Repository von jedem haben in Git.  Jeder hat Zugang.  Jeder kann eine Pull-Anfrage senden. </p><br><p><img src="https://habrastorage.org/webt/ue/cn/yb/uecnybkseypqwackevttdl_urym.png"></p><br><p>  Und die Erstellung von Stack ist wie folgt.  Heat ist die OpenStack-Komponente, die für die Orchestrierung verantwortlich ist.  Wir sagen dies in diesem Zusammenhang.  Dies ist ein großartiges Dienstprogramm, das wir für uns selbst installiert haben.  Wir sagen, liebe Hitze, erstellen Sie uns einen Stapel mit diesem Namen. Hier finden Sie eine Beschreibung der Ressourcen, die wir zum Erstellen dieses Stapels benötigen.  Und hier ist die Eingabe, die unsere Vorlage benötigt, die unseren Stapel beschreibt.  Wir laden es in Hitze.  Er raschelt dort eine Weile, schafft alle notwendigen Ressourcen für uns in sich.  Und auch wir können in dieser Vorlage hier die Ausgabe angeben.  Wenn durch Hitze ein Stapel erzeugt wird, kann er Informationen ausgeben: IP-Adresse, Zugriff und den Rest, den wir fragen.  Weiterhin können wir diese Informationen bereits zur weiteren Automatisierung anwenden. </p><br><p><img src="https://habrastorage.org/webt/8o/rw/wr/8orwwrabyca0-nmfxfeg8s9yrxg.png"></p><br><p>  Damit Sie nicht glauben, dass OpenStack einfach und billig ist, sage ich Ihnen, für welche Hardware OpenStack funktioniert.  Das Bedienfeld dreht sich auf 3 Infra-Knoten.  Dies sind Eisenserver mit solchen Ressourcen.  Dies ist die empfohlene Konfiguration für das Failover. </p><br><p><img src="https://habrastorage.org/webt/kv/r1/nv/kvr1nvsoifsdsnvnf9lnyxrcdvw.png"></p><br><p>  Wir haben auch zwei KVM-Netzwerkknoten, die unser Netzwerk bedienen. </p><br><p><img src="https://habrastorage.org/webt/ql/gw/oh/qlgwohgkf6ry1g_iiy8ousjoaum.png"></p><br><p>  Teamressourcen drehen wir auf 8 Rechenknoten.  Sie sind in 3 Aggregationszonen unterteilt.  Pro Zone wird ein Rechenknoten für Lasttests zugewiesen.  Dort werden Server nur vom Lasttest-Team erstellt.  Um den Rest nicht zu stören.  Wir haben eine Aggregationszone für unser internes GUI-Testautomatisierungsprojekt.  Er hat bestimmte Anforderungen.  Es befindet sich in einer separaten Aggregationszone.  Alle anderen Entwicklungsumgebungen, Server und Testumgebungen drehen sich in der dritten großen Aggregationszone.  Wir brauchen 6 Rechenknoten. </p><br><p><img src="https://habrastorage.org/webt/uq/qh/wb/uqqhwbqsf0aqg4xl4hibkvdjcyw.png"></p><br><p>  Wir drehen ungefähr 350 virtuelle Maschinen für alle Teams. </p><br><p><img src="https://habrastorage.org/webt/q9/u5/nw/q9u5nwuk8lajoby71bgk8ttftea.png"></p><br><p>  Was haben wir verstanden, als wir schon einen Weg gegangen waren?  Für die Bereitstellung und Unterstützung dieser Software benötigen Sie ein Team.  Team abhängig von Ihren Ressourcen. </p><br><p><img src="https://habrastorage.org/webt/8b/cs/eb/8bcsebrogamrpv-i4aevm6brqsu.png"></p><br><p>  Teams müssen bestimmte Kompetenzen haben. </p><br><p>  Zuallererst ist es natürlich Ansible.  OpenStack-Bereitstellung ist in Ansible geschrieben.  Es gibt ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">OpenStack-Ansible-</a> Projekt.  Wenn Sie OpenStack-Ansible zu Ihren Anforderungen hinzufügen möchten, müssen die Personen, die dies tun, Ansible besitzen. </p><br><p>  Virtualisierungserfahrung.  Sie müssen in der Lage sein, Virtualisierung zu kochen, Sie müssen optimieren.  Verstehe, wie es funktioniert. </p><br><p>  Das gleiche Netzwerk. </p><br><p>  Gleiches gilt für Backend-Services, die OpenStack für seine Arbeit verwendet.  Diese Datenbank ist MySQL Galera und RabbitMQ als Warteschlange. </p><br><p>  Verstehen, wie DNS funktioniert.  So konfigurieren Sie es. </p><br><p>  OpenStack ist in Python geschrieben.  Sie müssen den Code lesen können.  Idealerweise müssen Sie in der Lage sein, zu patchen.  Community-Fixes suchen.  In der Lage sein, den Code zu debütieren.  Das ist alles sehr hilfreich.  Wenn ein Team einen solchen Ansatz hat und weiß, wie ein Ansatz wie Infrastruktur als Code verwendet wird, wie z. B. ansible, werden alle Änderungen im Code gespeichert, und es treten keine Probleme auf, die beim Konfigurieren von Händen auftreten. </p><br><p>  Kontinuierliche Integration.  Die OpenStack-Servicesuite enthält einen Service wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Tempest</a> .  Darin sind alle Tests auf alle Komponenten geschrieben.  Wenn wir die Konfiguration ändern, ein separates Diplom in der All-In-One-Installation ausführen und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Sturm</a> ausführen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">prüfen</a> wir, ob bei uns etwas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">abgefallen</a> ist.  CI ist konfiguriert und das Team muss dies verstehen und in der Lage sein, all dies zu konfigurieren. </p><br><p><img src="https://habrastorage.org/webt/tf/ys/f5/tfysf5fh56lvcmsdh8ae1oqupnu.png"></p><br><p>  Weil alles einfach und attraktiv aussieht. </p><br><p><img src="https://habrastorage.org/webt/pn/yw/d3/pnywd3j3eyzqffrnz3egw_wfyg8.png"></p><br><p>  Aber wenn Sie anfangen, sich mehr damit zu beschäftigen, verstehen Sie, dass tatsächlich alles so aussieht.  Dies kann für jemanden eine Überraschung sein. </p><br><p><img src="https://habrastorage.org/webt/5p/9d/uj/5p9dujin57sxp6qs8akdiw3fgxw.png"></p><br><p>  Die Einführung von OpenStack ist nicht nur eine technische Lösung.  Darüber hinaus müssen Sie in der Lage sein, zu verkaufen und den Teams das neue Paradigma zu erklären, wie sie jetzt funktionieren und welche Vorteile es bringt.  Wie man damit arbeitet, um einen Gewinn zu erzielen.  Wir haben viel Dokumentation geschrieben.  Die Dokumentation besteht aus dem Formular Schnellstart (Schnellstart), erste Schritte (erste Schritte).  Das heißt, was getan werden muss, um Ihr Leben schnell zu erleichtern und nicht viel Zeit damit zu verbringen. </p><br><p>  Wir haben TechTalk durchgeführt, wir haben gesprochen, Themen erstellt, gezeigt, gesprochen, jetzt können Sie Ihr Produkt wie folgt erhalten.  Hier schreiben wir buchstäblich eine Vorlage, wir starten sie.  Alles ist ganz einfach.  Jetzt müssen Sie nicht mehr zu den Admins gehen und sie dort um etwas bitten. </p><br><p>  In besonders schwierigen Fällen, in denen das Projekt komplex ist, hat es viele Fälle, wir kamen zu Teams, arbeiteten direkt mit Teams.  Das heißt, sie haben irgendwie versucht, ihnen bei der Automatisierung von Prozessen zu helfen.  Richten Sie alle Teams ein.  Einige Fehler aufgewickelt.  Sie haben verstanden, dass wir dort nichts falsch konfiguriert haben.  Im Allgemeinen enge Arbeit mit Teams. </p><br><p><img src="https://habrastorage.org/webt/rh/kv/xo/rhkvxoaqqbbicptnizpn1iouykg.png"></p><br><p>  Wir haben eine schnelle Bereitstellung von Produkten erhalten.  Früher war es zum Erhalt von Produkten erforderlich, viele manuelle Aktionen auszuführen und mit vielen Menschen zu interagieren.  Jetzt erhalten wir die Erstellung von Envinronment (Umgebung, Server) per Button.  Wenn die Bereitstellung geschrieben ist und für das Projekt funktioniert, erfolgt die Bereitstellung über die Schaltfläche oder eine neue Umgebung (Umgebung, Server) mit dem installierten Produkt. </p><br><p>  Das Fehlen einer normalen Infrastruktur war für einige Teams ein Blocker bei der Implementierung des CI-Prozesses innerhalb des Teams.  Wir haben die Infrastrukturprobleme gelöst, die Teams auf dem CI-Server zusammengestellt, die Pipeline konfiguriert und virtuelle Maschinen in der Pipeline erstellt.  Im Allgemeinen gaben sie der Entwicklung dieser Prozesse Impulse. </p><br><p>  Sie halfen auch einigen internen Produkten, die die Infrastruktur zur Automatisierung von Tests nutzen.  VM Master ist ein Produkt, das unser Online testet.  Er muss viele virtuelle Maschinen erstellen, um von verschiedenen Browsern aus auf die Site zugreifen zu können. Führen Sie einige Schritte aus, um zu verstehen, dass unser Online-Browser in allen bekannten Browsern funktioniert.  Das heißt, sie haben ihm sehr geholfen. </p><br><p>  Ein schöner Bonus ist, dass sie die Admins (selbst) entladen haben.  Denn irgendwann nahm die Aktivität zum Erstellen einer virtuellen Maschine Platz in Anspruch.  Und alle wurden nervös.  Jetzt machen wir interessante Dinge, komplexe Produkte.  Wir haben die Routineaufgabe losgeworden. </p><br><p><img src="https://habrastorage.org/webt/ho/0f/4z/ho0f4zmwursgmh8xbvcx8anakg8.png"></p><br><p>  Fragen? </p><br><p>  Frage: Wie lange hat die Bereitstellung von OpenStack gedauert? </p><br><p>  Antwort: Die Frage ist kompliziert, weil wir einen Prozess hatten, der eine Comedy-Serie aufnehmen kann.  Er hat eine hohe Eintrittsschwelle.  Wir haben unsere gesamte Infrastruktur verstanden und nach einer Lösung gesucht - es hat drei Monate gedauert.  Dann haben wir in einem Monat irgendwo die erste Installation eingeführt.  Wir haben dort einige Projekte hinzugefügt.  Sie lebten dort.  Dann passierte der menschliche Faktor - sie schossen den Kopf dieser Installation.  Wir haben festgestellt, dass die fehlende Fehlertoleranz schlecht ist.  Dann warteten wir auf das Eisen. </p><br><p>  Frage: Verwenden Sie kostenpflichtigen Support? </p><br><p>  Antwort: Nein, wir verwenden es nicht. </p><br><p>  Frage: Welche Version von OpenStack verwenden Sie? </p><br><p>  Antwort: OpenStack-Versionen werden als Wörter bezeichnet.  Zuerst war Juno, dann haben wir ein Upgrade auf Liberty durchgeführt. </p><br><p>  Frage: Werden virtuelle Maschinen in der Pipeline erstellt? Kontinuierliche Integration? </p><br><p>  Antwort: Das Bauen in Jenkins kann Hitze verursachen und eine virtuelle Maschine erstellen. </p><br><p>  Frage: Haben Sie Probleme mit der gemeinsamen Nutzung von Ressourcen festgestellt?  Grob gesagt befinden sich zwei virtuelle Maschinen auf demselben physischen Server.  Einer von ihnen beginnt mit dem Laden einer Festplatte, beispielsweise einer Datenbank.  Wie haben Sie sich entschieden? </p><br><p>  Antwort: Bei der gemeinsamen Nutzung von Ressourcen sind keine Probleme aufgetreten.  Die Produkte des anderen stören nicht viel.  Wir haben die Skripte angelegt.  Wenn Sie ein schweres Szenario ausführen müssen, führen Sie Lasttests aus, und wenden Sie sich an das Lasttestteam, das Lasttests durchführt. </p><br><p> :            - ? </p><br><p> :      OpenStack .   .       .         . </p><br><p> :     .         .   OpenStack      ? </p><br><p> :     .  OpenStack  .   . </p><br><p> :          OpenStack? </p><br><p> :     .      proxmox.     OpenStack. </p><br><p> :   DevOps? </p><br><p> : DevOps  ,          .    , ,           . </p><br><p> PS  2019       OpenStack  heat   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Terraform</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470572/">https://habr.com/ru/post/de470572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470561/index.html">Meine Erfahrung in 1C Firm</a></li>
<li><a href="../de470563/index.html">Wie leben Entwickler in Uljanowsk und was machen sie neben der Arbeit?</a></li>
<li><a href="../de470566/index.html">Vorbereitung auf die Spring Professional-Zertifizierung. Fragen zu Spring MVC</a></li>
<li><a href="../de470568/index.html">Blaugrüne Bereitstellung von Spring-Anwendungen mit Nginx Web Server</a></li>
<li><a href="../de470570/index.html">GridmiAPI - eine einfache und flexible Android-Bibliothek für die Arbeit mit REST & RPC</a></li>
<li><a href="../de470576/index.html">Banks of America wird in den kommenden Jahren 200.000 Arbeitsplätze abbauen</a></li>
<li><a href="../de470578/index.html">Wie wir die Buchhaltung in einer mobilen Bank „humanisiert“ haben</a></li>
<li><a href="../de470582/index.html">Überprüfen der Telerik-Benutzeroberfläche auf UWP als Einstieg in PVS-Studio</a></li>
<li><a href="../de470584/index.html">Überprüfen Sie die Telerik-Benutzeroberfläche auf UWP, um sich mit PVS-Studio vertraut zu machen</a></li>
<li><a href="../de470594/index.html">Bericht von der Lichtshow „Circle of Light“ 2019 in Moskau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>