<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕒 ‼️ 👩🏼‍🚀 Le voyage de Gocritic dans le passé 🕦 🤦🏿 🧓🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je veux partager les résultats des derniers jours, qui comprenaient l'analyse git de l'historique de certains grands projets Go dans le but de trouver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le voyage de Gocritic dans le passé</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432848/"><p><img src="https://habrastorage.org/webt/de/ui/zg/deuizg9w3z_5h9mc9him0m50a3e.png"></p><br><p>  Je veux partager les résultats des derniers jours, qui comprenaient l'analyse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">git</a> de l'historique de certains grands projets <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Go</a> dans le but de trouver des commits qui corrigeaient les erreurs, puis les formalisaient pour la détection si elles apparaissaient dans le nouveau code. </p><br><p>  Dans la deuxième partie de l'article, nous considérerons quelques nouveaux diagnostics dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-critique</a> , qui vous permettent de trouver du code qui est très susceptible de contenir une erreur. </p><a name="habracut"></a><br><h1 id="poisk-idey-v-proshlom">  Rechercher des idées dans le passé </h1><br><p> Pour trouver des idées pour de nouvelles inspections de code, vous pouvez jeter un œil aux analyseurs statiques pour d'autres langages de programmation, vous pouvez examiner manuellement le code open source dans le but d'y trouver des modèles de code erronés, ou vous pouvez consulter l'historique. </p><br><p> Supposons que vous vérifiez le projet <code>Go-Files</code> .  Après le démarrage du linter (analyseur statique), il n'y a pas de problème; l'audit des textes sources n'a pas non plus apporté de grands résultats.  Dois-je me précipiter pour mettre de côté <code>Go-Files</code> ?  Pas vraiment. </p><br><p>  Au cours de son existence, <code>Go-Files</code> avait un certain nombre de défauts facilement détectables, mais maintenant ils sont déjà corrigés.  Ce que nous devons faire, c'est commencer à analyser l'historique du référentiel git. </p><br><p><img src="https://habrastorage.org/webt/jh/mn/nb/jhmnnbbrjp-yrbpqsklp25md5ju.png"></p><br><p>  Les insectes sont quelque part à proximité. </p><br><h1 id="sbor-interesuyuschih-nas-kommitov">  Collection de commits qui nous intéressent </h1><br><p>  <strong>Les problèmes:</strong> </p><br><ul><li>  Il peut y avoir beaucoup de commits </li><li>  Parfois, dans la même révision, les choses ne sont pas liées les unes aux autres </li><li>  Parfois, un commentaire sur une validation ne correspond pas exactement aux modifications réelles. </li><li>  Certains sous-estiment l'utilisation d'un bon message de validation (ne pointons pas du doigt) </li></ul><br><p>  Tout d'abord, nous voulons réduire la quantité d'informations qui devront être traitées sans automatisation.  Le problème des réponses faussement négatives peut être résolu en augmentant la taille de l'échantillon (téléchargez plus de paquets Go dans le groupe de contrôle). </p><br><p>  Vous pouvez l'analyser de différentes manières, il me suffisait de " <code>git log --grep</code> " en fonction de l'ensemble des modèles, avec surestimation et sous-estimation du poids (score) du commit en fonction du contenu de son message de commit.  Si le commit est trop important, vous pouvez le rejeter immédiatement, car il est très probable qu'il comprendra ce qui se passera ne sera pas trivial. </p><br><p>  Je voudrais également ajouter qu'à côté des corrections ou des erreurs de recherche, il n'y a pas souvent de descriptions très optimistes et parfois pas tout à fait culturelles des correctifs: </p><br><pre> <code class="plaintext hljs">- "We check length later, but we assumed it was always 1 bytes long. Not always the case. I'm a little depressed that this bug was there" - "Really fixed the bug now" - "WTF, the changes that actually fixed the bug for the accesspattern wasn't actually committed" - "how do i pronounce this damn project" ( traefic) - "damnit travis" - "one f*cking dot" (./.. =&gt; ./...  .travis.yml)</code> </pre> <br><p>  Les «corrections de bugs» les plus inutiles sont l'édition d'erreurs de syntaxe ou d'autres problèmes qui empêchent même le projet de se compiler via <code>go build</code> .  Tous les projets n'utilisent pas le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CI</a> ou le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hook de pré-validation</a> , de telles révisions brisées finissent parfois dans la branche principale. </p><br><h1 id="istoricheskie-oshibki">  Erreurs historiques </h1><br><p>  Passons en revue certaines des erreurs les plus intéressantes qui ont été trouvées sous les couvertures des journaux git. </p><br><h2 id="vozvrat-nil-vmesto-realnogo-rezultata">  Renvoie zéro au lieu du résultat réel </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gin-gonic / gin: correction d'un bug, retourne une erreur en cas d'échec de la liaison bool</a> : </p><br><pre> <code class="diff hljs"> if err == nil { field.SetBool(boolVal) } - return nil + return err }</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-pg / pg: correction du bogue AppendParam</a> : </p><br><pre> <code class="diff hljs"> return method.AppendValue(b, m.strct.Addr(), 1), true } - return nil, false + return b, false }</code> </pre> <br><h2 id="otsutstvie-return-v-fast-path">  Manque de retour sur la voie rapide </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gonum / gonum: correction d'un bug dans le raccourci dswap</a> : </p><br><pre> <code class="diff hljs"> for i := 0; i &lt; n; i++ { x[i], y[i] = y[i], x[i] } + return }</code> </pre> <br><h2 id="zapusk-gorutiny-bez-wgadd1">  Exécuter des goroutines sans wg.Add (1) </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: correction de plusieurs bogues lors de l'arrêt du serveur RPC</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-addition"><span class="hljs-addition">+s.wg.Add(1) go s.walletListenerDuplicator()</span></span></code> </pre> <br><h2 id="nekorrektnoe-logicheskoe-uslovie">  Condition logique non valide </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gorgonia / gorgonia: correction de quelques bugs également</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-for i := 0; i &gt; start; i++ { +for i := 0; i &lt; start; i++ { retVal[i] = 0 }</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">src-d / go-git: plomberie / idxfile: correction d'un bug de recherche dans MemoryIndex</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if low &lt; high { +if low &gt; high { break }</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-xorm / xorm: correction d'un bug sur la somme</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if !strings.Contains(colName, " ") &amp;&amp; strings.Contains(colName, "(") { +if !strings.Contains(colName, " ") &amp;&amp; !strings.Contains(colName, "(") {</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: server: Correction d'un bug de déconnexion d'homologue sur filteradd</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if sp.filter.IsLoaded() { +if !sp.filter.IsLoaded() {</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: Correction d'un bug de test inversé avec la gestion des opérations max</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if pop.opcode.value &lt; OP_16 { +if pop.opcode.value &gt; OP_16 { s.numOps++</span></span></code> </pre> <br><h2 id="obnovlenie-receivera-thisself-peredavaemogo-po-znacheniyu">  Récepteur de mise à jour (this / self) passé par valeur </h2><br><p>  Classique  Une copie de l'objet est modifiée à l'intérieur de la méthode, à cause de quoi l'appelant ne verra pas les résultats attendus. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Correction d'un bug de pile / file d'attente / deque (récepteur de pointeur)</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-func (s Stack) Push(x interface{}) { - s = append(s, x) +func (s *Stack) Push(x interface{}) { + *s = append(*s, x) }</span></span></code> </pre> <br><h2 id="obnovlenie-kopiy-obektov-vnutri-cikla">  Mise à jour des copies d'objets dans une boucle </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">containous / traefik: Attribuez des tâches filtrées aux applications contenues dans la tranche</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-for _, app := range filteredApps { - app.Tasks = fun.Filter(func(task *marathon.Task) bool { +for i, app := range filteredApps { + filteredApps[i].Tasks = fun.Filter(func(task *marathon.Task) bool { return p.taskFilter(*task, app) }, app.Tasks).([]*marathon.Task)</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">containous / traefik: Ajouter des tests unitaires pour la sécurité du paquet</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-for _, routine := range p.routines { +for i := range p.routines { p.waitGroup.Add(1) - routine.stop = make(chan bool, 1) + p.routines[i].stop = make(chan bool, 1) Go(func() { - routine.goroutine(routine.stop) + p.routines[i].goroutine(p.routines[i].stop) p.waitGroup.Done() }) }</span></span></code> </pre> <br><h2 id="rezultat-oborachivayuschey-funkcii-ne-ispolzuetsya">  Le résultat de la fonction d'habillage n'est pas utilisé. </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gorgonia / gorgonia: correction d'un minuscule bogue non consécutif dans Grad ()</a> : </p><br><pre> <code class="diff hljs">if !n.isInput() { - errors.Wrapf(err, ...) - // return + err = errors.Wrapf(err, ...) + return nil, err }</code> </pre> <br><h2 id="nepravilnaya-rabota-s-make">  Travail incorrect avec make </h2><br><p>  Parfois, les jeunes gophers " <code>make([]T, count)</code> ", puis <code>append</code> à l'intérieur de la boucle.  L'option correcte ici est " <code>make([]T, 0, count)</code> ". </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HouzuoGuo / Tiedot: correction d'un bug d'analyse de collection</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-ids := make([]uint64, benchSize) +ids := make([]uint64, 0)</span></span></code> </pre> <br><p>  Le correctif ci-dessus corrige l'erreur d'origine, mais présente un défaut qui a été corrigé dans l'une des validations suivantes: </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-ids := make([]uint64, 0) +ids := make([]uint64, 0, benchSize)</span></span></code> </pre> <br><p>  Mais certaines opérations, telles que la <code>copy</code> ou <code>ScanSlice</code> peuvent nécessiter la longueur "correcte". </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-xorm / xorm: correction d'un bug pour SumsInt retourne une tranche vide</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-var res = make([]int64, 0, len(columnNames)) +var res = make([]int64, len(columnNames), len(columnNames)) if session.IsAutoCommit { err = session.DB().QueryRow(sqlStr, args...).ScanSlice(&amp;res) } else {</span></span></code> </pre> <br><p>  Bientôt, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">critique vous</a> aidera à trouver des erreurs dans cette classe. </p><br><h2 id="ostalnye-oshibki">  Autres erreurs </h2><br><p>  Le dénombrement se révèle assez lourd, je sors le reste sous le becquet.  Cette partie est facultative, vous pouvez donc la laisser pour plus tard ou avancer audacieusement. </p><br><div class="spoiler">  <b class="spoiler_title">J'en veux plus!</b> <div class="spoiler_text"><hr><br><p>  Le fragment suivant est intéressant en ce que, malgré le fait qu'il corrige l'erreur, la clé itérable porte le nom du même nom que celui utilisé pour la valeur itérable.  Le nouveau code ne semble pas correct et peut dérouter le prochain programmeur. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gonum / gonum: correction d'un bug dans les fonctions du sous-ensemble</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-for _, el := range *s1 { +for el := range *s1 { if _, ok := (*s2)[el]; !ok { return false }</span></span></code> </pre> <br><p>  Les résultats nommés sont presque les mêmes variables ordinaires, ils sont donc initialisés selon les mêmes règles.  Les pointeurs auront la valeur <code>nil</code> et si vous souhaitez travailler avec cet objet, vous devez initialiser explicitement ce pointeur (par exemple, via <code>new</code> ). </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dgraph-io / dgraph: correction du bug de référence du pointeur nil dans server / main.go</a> : </p><br><pre> <code class="diff hljs">func (s *server) Query(ctx context.Context, - req *graph.Request) (resp *graph.Response, err error) { + req *graph.Request) (*graph.Response, error) { + resp := new(graph.Response)</code> </pre> <br><p>  Les piqûres les plus fréquentes et les plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sombres</a> en cas d'erreur. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: blockchain / indexers: correction d'un bug dans le rattrapage de la réorganisation de l'indexeur</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-block, err := btcutil.NewBlockFromBytes(blockBytes) +block, err = btcutil.NewBlockFromBytes(blockBytes) if err != nil { return err }</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-xorm / xorm: correction d'un bug d'erreur d'insertion</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-err = session.Rollback() +err1 := session.Rollback() +if err1 == nil { + return lastId, err +} +err = err1</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gin-gonic / gin: Correction d'un problème de nouvelle ligne avec debugPrint dans les fonctions Run *</a> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-debugPrint("Listening and serving HTTP on %s", addr) +debugPrint("Listening and serving HTTP on %s\n", addr)</span></span></code> </pre> <br><p>  La mise en œuvre du mutex dans l'exemple ci-dessous m'a conduit à l'idée d'écrire un chèque qui rend compte de l'utilisation de <code>*sync.Mutex</code> tant que membre de la structure.  Dave Cheney recommande de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">toujours utiliser une valeur mutex</a> , pas un pointeur vers celle-ci. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tealeg / xlsx: correction d'un bug lors du chargement de la feuille de calcul</a> : </p><br><pre> <code class="diff hljs"> styleCache map[int]*Style `-` + lock *sync.RWMutex }</code> </pre> <br><hr></div></div><br><h1 id="krestovyy-pohod-protiv-podozritelnogo-koda">  Croisade contre le code suspect </h1><br><h2 id="badcond">  badCond </h2><br><p>  La vérification <code>badCond</code> trouve des expressions logiques potentiellement incorrectes. </p><br><p>  Exemples d'expressions logiques suspectes: </p><br><ul><li>  Le résultat est toujours <code>true</code> ou <code>false</code> </li><li>  L'expression est écrite sous une forme qui est presque impossible à distinguer de l'erreur </li></ul><br><p>  Cette vérification fonctionne également sur des opérations telles que " <code>x == nil &amp;&amp; x == y</code> ".  Une solution simple consiste à réécrire " <code>x == nil &amp;&amp; y == nil</code> ".  La lisibilité du code ne souffre pas, mais le linter ne verra rien de suspect dans ce code. </p><br><p>  Voici un exemple de correction de bogue qui peut être trouvé par <code>badCond</code> : </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if err1 := f(); err != nil &amp;&amp; err == nil { +if err1 := f(); err1 != nil &amp;&amp; err == nil { err = err1 }</span></span></code> </pre> <br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moby / buildkit: instantané: correction d'une condition impossible</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tdewolff / parse: EqualFold de util.go a une condition étrange</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HouzuoGuo / tieot: httpapi: condition suspecte dans srv_test.go</a> </li></ul><br><h2 id="weakcond">  faibleCond </h2><br><p>  <code>weakCond</code> est similaire à <code>badCond</code> , mais le niveau de confiance des alertes est légèrement inférieur. </p><br><p>  Une condition faible est une condition qui ne couvre pas suffisamment complètement l'entrée. </p><br><p>  Un bon exemple de condition faible (insuffisante) est de vérifier la tranche pour <code>nil</code> puis d'utiliser le premier élément.  Les conditions " <code>s != nil</code> " ne suffisent pas ici.  La condition correcte est " <code>len(s) != 0</code> " ou son équivalent: </p><br><pre> <code class="diff hljs">func addRequiredHeadersToRedirectedRequests( req *http.Request, via []*http.Request) error { - if via != nil &amp;&amp; via[0] != nil { + if len(via) != 0 &amp;&amp; via[0] != nil {</code> </pre> <br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">etcd-io / etcd: etcdserver / api / v2v3: indexation après vérification nulle sans vérification len</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moby / moby: registre: indexation après chèque nul sans chèque len</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">inkyblackness / piraté: ss1 / contenu / texte: indexation après vérification nulle sans vérification len</a> </li></ul><br><h2 id="duparg">  dupArg </h2><br><p>  Pour certaines fonctions, transmettre la même valeur (ou variable) que plusieurs arguments n'a pas beaucoup de sens.  Très souvent, cela signale une erreur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">copier / coller</a> . </p><br><p>  Un exemple d'une telle fonction est la <code>copy</code> .  La <code>copy(xs, xs)</code> expression <code>copy(xs, xs)</code> n'a pas de sens. </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if !bytes.Equal(i2.Value, i2.Value) { +if !bytes.Equal(i1.Value, i2.Value) { return fmt.Errorf("tries differ at key %x", i1.Key) }</span></span></code> </pre> <br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ethereum / go-ethereum: light: correction de l'argument dupliqué en octets. Appel égal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">openshift / origin: correction du bogue reflect.DeepEqual (x, x)</a> </li></ul><br><h2 id="dupcase">  dupCase </h2><br><p>  Vous savez probablement que dans Go, vous ne pouvez pas utiliser de valeurs de <code>case</code> double dans le <code>switch</code> . </p><br><p>  L'exemple ci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-</a> dessous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ne compile pas</a> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> x := <span class="hljs-number"><span class="hljs-number">0</span></span>; x { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: fmt.Println(<span class="hljs-string"><span class="hljs-string">"first"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: fmt.Println(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) }</code> </pre> <br><blockquote>  Erreur de compilation: dupliquez le cas 1 dans le commutateur. </blockquote><p>  Mais que se passe-t-il si nous prenons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un exemple plus intéressant</a> : </p><br><pre> <code class="go hljs">one := <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> x := <span class="hljs-number"><span class="hljs-number">1</span></span>; x { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> one: fmt.Println(<span class="hljs-string"><span class="hljs-string">"first"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> one: fmt.Println(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) }</code> </pre> <br><p>  Les valeurs en double sont autorisées via la variable.  De plus, le <code>switch true</code> donne encore plus de place aux erreurs: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> x := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-literal"><span class="hljs-literal">true</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> x == <span class="hljs-number"><span class="hljs-number">1</span></span>: fmt.Println(<span class="hljs-string"><span class="hljs-string">"first"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> x == <span class="hljs-number"><span class="hljs-number">1</span></span>: fmt.Println(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) }</code> </pre> <br><p>  Et voici un exemple de correction d'une erreur réelle: </p><br><pre> <code class="diff hljs">switch { case m &lt; n: // Upper triangular matrix. //   . case m == n: // Diagonal matrix. //   . -case m &lt; n: // Lower triangular matrix. +case m &gt; n: // Lower triangular matrix. //   . }</code> </pre> <br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mellium / sasl: retirer le boîtier de commutateur en double</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gonum / gonum: correction du boîtier de commutation dupliqué</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pact-foundation / pact-go: supprimer le boîtier de commutation en double</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">minio / minio: clause de cas de commutateur dupliqué suspect dans cmd / object-api-error.go</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">henrylee2cn / pholcus: commun / octets: supprimer le boîtier de commutateur dupliqué</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-ble / ble: linux / att: correction d'une erreur de cas de commutateur dupliqué</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">docker / distribution: registre / stockage: correction du boîtier de commutation dupliqué</a> </li></ul><br><h2 id="dupbranchbody">  dupBranchBody </h2><br><p>  Les instructions conditionnelles telles que <code>if/else</code> et <code>switch</code> ont des corps à exécuter.  Lorsque la condition est remplie, le contrôle est transféré à l'unité opérationnelle associée.  Alors que d'autres diagnostics vérifient que les conditions de ces blocs sont différentes, <code>dupBranchBody</code> vérifie que les blocs exécutables eux-mêmes ne sont pas complètement identiques. </p><br><p>  La présence de corps en double dans les instructions conditionnelles, sauf s'il s'agit d'un <code>type switch</code> , est au moins suspecte. </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-if s, err := r.ReceivePack(context.Background(), req); err != nil { - return s, err -} else { - return s, err -} +return r.ReceivePack(context.Background(), req)</span></span></code> </pre> <br><p>  Les jugements sur le degré d'exactitude du code ci-dessous sont laissés au lecteur: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> field.IsMessage() || p.IsGroup(field) { <span class="hljs-comment"><span class="hljs-comment">//   . } else if field.IsString() { if nullable &amp;&amp; !proto3 { p.generateNullableField(fieldname, verbose) } else { pP(`if this.`, fieldname, ` != that1.`, fieldname, `{`) } } else { if nullable &amp;&amp; !proto3 { p.generateNullableField(fieldname, verbose) } else { pP(`if this.`, fieldname, ` != that1.`, fieldname, `{`) } } }</span></span></code> </pre> <br><p>  Les corps à l'intérieur de " <code>if field.IsString()</code> " et le " <code>else</code> " associé sont identiques. </p><br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">src-d / go-git: Organes de branche dupliqués suspects</a> </li></ul><br><h2 id="caseorder">  caseOrder </h2><br><p>  Tous les types à l'intérieur du <code>type switch</code> triés séquentiellement, selon le premier compatible.  Si la valeur de la balise est de type <code>*T</code> et implémente l'interface <code>I</code> , alors vous devez mettre une étiquette avec " <code>case *T</code> " <em>avant l'</em> étiquette avec " <code>case I</code> ", sinon seul " <code>case I</code> " sera exécuté, car <code>*T</code> compatible avec <code>I</code> (mais pas l'inverse). </p><br><pre> <code class="diff hljs">case string: res = append(res, NewTargetExpr(v).toExpr().(*expr)) -case Expr: - res = append(res, v.toExpr().(*expr)) case *expr: res = append(res, v) +case Expr: + res = append(res, v.toExpr().(*expr))</code> </pre> <br><p>  <strong>Trophées:</strong> </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cmd / guru: correction de l'ordre des cas incorrect dans describe.go</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">message / pipeline: ordre de cas de commutateur de type fixe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">coyove / goflyway: proxy: correction de l'ordre des cas dans un commutateur de type</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-graphite / carbonapi: pkg / parser: ordre de boîtier de commutateur de type fixe</a> </li></ul><br><h2 id="offby1">  offBy1 </h2><br><p>  L'erreur par unité est si populaire qu'elle a même <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sa propre page wikipedia</a> . </p><br><pre> <code class="diff hljs">if len(optArgs) &gt; 1 { return nil, ErrTooManyOptArgs } -node = optArgs[1] +node = optArgs[0]</code> </pre> <br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">-last := xs[len(xs)] +last := xs[len(xs) - 1]</span></span></code> </pre> <br><p>  <code>go-critic</code> a des options limitées pour trouver de telles erreurs, mais jusqu'à présent, aucun correctif n'a été envoyé au référentiel public.  Voici quelques correctifs qui ont été trouvés lors de la lecture de l'histoire: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: tester et corriger les bogues dans getaddednodeinfo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">btcsuite / btcd: améliore la couverture des tests et corrige certains bugs trouvés par les tests</a> </li></ul><br><h1 id="nemnogo-uzhasov-naposledok">  Un peu d'horreur au final </h1><br><p>  <code>go vet</code> a une bonne vérification pour les expressions comme " <code>x != a || x != b</code> ".  Il semblerait que les gens ne connaissent peut-être pas <code>gometalinter</code> , mais <code>go vet</code> lance presque tout le monde, non? </p><br><p>  En utilisant l'utilitaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gogrep,</a> j'ai rassemblé une petite liste d'expressions similaires qui se trouvent toujours dans les branches principales de certains projets. </p><br><div class="spoiler">  <b class="spoiler_title">Pour les chats les plus courageux</b> <div class="spoiler_text"><hr><br><p>  Je propose d'examiner cette liste et d'envoyer des demandes de tirage. </p><br><pre> <code class="plaintext hljs">cloud.google.com/go/trace/trace_test.go:943:7: expectTraceOption != ((o2&amp;1) != 0) || expectTraceOption != ((o3&amp;1) != 0) github.com/Shopify/sarama/mocks/sync_producer_test.go:36:5: offset != 1 || offset != msg.Offset github.com/Shopify/sarama/mocks/sync_producer_test.go:44:5: offset != 2 || offset != msg.Offset github.com/docker/libnetwork/api/api_test.go:376:5: id1 != i2e(i2).ID || id1 != i2e(i3).ID github.com/docker/libnetwork/api/api_test.go:408:5: "sh" != epList[0].Network || "sh" != epList[1].Network github.com/docker/libnetwork/api/api_test.go:1196:5: ep0.ID() != ep1.ID() || ep0.ID() != ep2.ID() github.com/docker/libnetwork/api/api_test.go:1467:5: ep0.ID() != ep1.ID() || ep0.ID() != ep2.ID() github.com/docker/libnetwork/ipam/allocator_test.go:1261:5: len(indices) != len(allocated) || len(indices) != num github.com/esimov/caire/grayscale_test.go:27:7: r != g || r != b github.com/gogo/protobuf/test/bug_test.go:99:5: protoSize != mSize || protoSize != lenData github.com/gogo/protobuf/test/combos/both/bug_test.go:99:5: protoSize != mSize || protoSize != lenData github.com/gogo/protobuf/test/combos/marshaler/bug_test.go:99:5: protoSize != mSize || protoSize != lenData github.com/gogo/protobuf/test/combos/unmarshaler/bug_test.go:99:5: protoSize != mSize || protoSize != lenData github.com/gonum/floats/floats.go:65:5: len(dst) != len(s) || len(dst) != len(y) github.com/gonum/lapack/testlapack/dhseqr.go:139:7: wr[i] != h.Data[i*h.Stride+i] || wr[i] != h.Data[(i+1)*h.Stride+i+1] github.com/gonum/stat/stat.go:1053:5: len(x) != len(labels) || len(x) != len(weights) github.com/hashicorp/go-sockaddr/ipv4addr_test.go:659:27: sockaddr.IPPort(p) != test.z16_portInt || sockaddr.IPPort(p) != test.z16_portInt github.com/hashicorp/go-sockaddr/ipv6addr_test.go:430:27: sockaddr.IPPort(p) != test.z16_portInt || sockaddr.IPPort(p) != test.z16_portInt github.com/nats-io/gnatsd/server/monitor_test.go:1863:6: v.ID != c.ID || v.ID != r.ID github.com/nbutton23/zxcvbn-go/adjacency/adjcmartix.go:85:7: char != "" || char != " " github.com/openshift/origin/pkg/oc/cli/admin/migrate/migrator_test.go:85:7: expectedInfos != writes || expectedInfos != saves github.com/openshift/origin/test/integration/project_request_test.go:120:62: added != deleted || added != 1 github.com/openshift/origin/test/integration/project_request_test.go:126:64: added != deleted || added != 4 github.com/openshift/origin/test/integration/project_request_test.go:132:62: added != deleted || added != 1 gonum.org/v1/gonum/floats/floats.go:60:5: len(dst) != len(s) || len(dst) != len(y) gonum.org/v1/gonum/lapack/testlapack/dhseqr.go:139:7: wr[i] != h.Data[i*h.Stride+i] || wr[i] != h.Data[(i+1)*h.Stride+i+1] gonum.org/v1/gonum/stat/stat.go:1146:5: len(x) != len(labels) || len(x) != len(weights)</code> </pre> <br><hr></div></div><br><h1 id="uchimsya-na-chuzhih-oshibkah">  Apprendre des erreurs des autres </h1><br><p><img src="https://habrastorage.org/webt/ys/9n/qo/ys9nqo2yu_gvopttkccqvn3cd4c.png"></p><br><p>  Non, même dans la dernière partie, il n'y aura rien sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'apprentissage automatique</a> . </p><br><p>  Mais ce qui sera écrit ici concerne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">golangci-lint</a> , qui a intégré <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">go-critique</a> dans l'une des dernières versions.  <code>golangci-lint</code> est un analogue de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gometalinter</a> , que vous pouvez lire sur ses avantages, par exemple, dans l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Analyse statique dans Go: comment nous gagnons du temps lors de la vérification du code"</a> . </p><br><p>  <code>go-critic</code> a récemment été réécrit avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lintpack</a> .  Les détails peuvent être trouvés dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Go lintpack: un gestionnaire de linter composable</a> . </p><br><p>  Si vous n'avez pas encore commencé à utiliser activement des outils pour analyser vos programmes pour les erreurs potentielles, à la fois stylistiques et logiques, je vous recommande aujourd'hui de réfléchir à nouveau à votre comportement autour d'une tasse de thé avec des collègues.  Vous réussirez. </p><br><p>  Bon à tous. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr432848/">https://habr.com/ru/post/fr432848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr432838/index.html">Développement de logiciels à travers le prisme de l'expérience Milgram "Soumission à l'autorité"</a></li>
<li><a href="../fr432840/index.html">Comment augmenter l'efficacité de l'apprentissage de l'anglais et commencer à mieux écrire: choisissez un assistant en ligne</a></li>
<li><a href="../fr432842/index.html">Quelques notes sur la conception des systèmes d'information</a></li>
<li><a href="../fr432844/index.html">Enquête de pré-conception dans le développement d'un système d'information</a></li>
<li><a href="../fr432846/index.html">Noam Chomsky: où l'intelligence artificielle s'est-elle trompée?</a></li>
<li><a href="../fr432852/index.html">L'élaboration des spécifications techniques conformément à GOST 34 est simple et facile</a></li>
<li><a href="../fr432858/index.html">Very Corporate Post 2: Rapport d'ouverture de Moscou</a></li>
<li><a href="../fr432860/index.html">PlayStation Classic piraté, les jeux peuvent désormais être exécutés à partir d'une clé USB</a></li>
<li><a href="../fr432862/index.html">Un prototype de plateforme de profil numérique citoyen sera lancé en Fédération de Russie jusqu'à fin 2019</a></li>
<li><a href="../fr432866/index.html">A fait une refonte - a perdu un milliard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>