<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô®Ô∏è üêô ü¶ó Prosedur pemberitahuan untuk aplikasi Electron untuk macOS 10.14.5 üê≠ ‚ùå ü§≤üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dengan rilis macOS 10.14.5, Apple menambahkan proses Notarisisasi wajib untuk aplikasi sebelum mendistribusikannya. Saya ingin memberi tahu Anda apa i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prosedur pemberitahuan untuk aplikasi Electron untuk macOS 10.14.5</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455874/"><p>  Dengan rilis macOS 10.14.5, Apple menambahkan proses Notarisisasi wajib untuk aplikasi sebelum mendistribusikannya.  Saya ingin memberi tahu Anda apa itu dan kesulitan apa yang muncul dengan pembaruan ini ketika berkembang di Electron.js. </p><br><p><img src="https://habrastorage.org/webt/7c/vo/qz/7cvoqzkecwn_jtlk82d33eghvda.png"></p><a name="habracut"></a><br><h2 id="vvedenie">  Pendahuluan </h2><br><p>  2 tahun setelah booming Electron.js, semua berita hangat tentang betapa buruknya dan mengapa itu diperlukan adalah tenang.  Jangan menghidupkan kembali mereka di komentar.  Terima kasih </p><br><p>  Proyek kami menggunakan pembangun-elektron untuk membangun aplikasi, tetapi untuk paket-elektron, prosedur ini kira-kira sama. </p><br><p>  Proyek itu sendiri adalah peluncur untuk cloud gaming, di mana klien asli diluncurkan untuk mengakses komputer jarak jauh. </p><br><p>  Menandatangani aplikasi dengan pembangun-elektron tidak terlihat rumit, tetapi demi kelengkapan, saya akan membahas secara singkat tentang prosedur ini.  Jika Anda tidak memiliki masalah dalam menandatangani aplikasi, Anda dapat melewati bab ini. </p><br><h3 id="podpisanie-prilozheniya">  Penandatanganan aplikasi </h3><br><p>  Untuk menandatangani aplikasi, kita perlu mengekspor sertifikat dari akun pribadi pengembang Apple.  Kami akan membutuhkan: </p><br><ul><li>  Aplikasi ID Pengembang </li><li>  Pemasang ID Pengembang </li><li>  * Aplikasi Pengembang Pihak Ketiga dan Pemasang Pengembang Pihak Ketiga (Jika Anda berencana untuk menerbitkan aplikasi di AppStore) </li></ul><br><p>  Sertifikat Penginstal ID Pengembang dikeluarkan untuk aplikasi tertentu, untuk bundleID ini diperlukan.  Untuk pembangun-elektron, ditentukan oleh parameter appId di package.json </p><br><p><img src="https://habrastorage.org/webt/pz/xc/ut/pzxcutr2ad_xxln6bqd5dlegi1q.png"></p><br><p>  Sertifikat harus dikumpulkan dalam satu file.  Untuk melakukan ini, tambahkan ke gantungan kunci (2 klik pada sertifikat). <br>  Kemudian kita pergi ke gantungan kunci, pilih sertifikat yang diperlukan dan klik "ekspor barang" di menu konteks.  Setelah ekspor, kami mendapatkan satu file dengan ekstensi .p12. </p><br><p><img src="https://habrastorage.org/webt/uq/si/no/uqsinodlzfxhbrk0y3eqcyw2igi.png"></p><br><p>  Setelah file sertifikat diterima, tambahkan entri berikut ke variabel lingkungan </p><br><ul><li>  CSC_LINK (path ke file sertifikat .p12) </li><li>  CSC_KEY_PASSWORD (kata sandi akses sertifikat) </li></ul><br><p>  Jika Anda tidak menambahkan variabel-variabel ini, pengumpul akan secara otomatis mencari kunci yang sesuai di repositori gantungan kunci.  Menambahkan entri ini memungkinkan Anda menentukan dengan tepat sertifikat yang ingin Anda gunakan untuk penandatanganan. </p><br><p>  Setelah operasi ini, Anda dapat memulai proses pembuatan dan semuanya harus berjalan dengan lancar. </p><br><p>  Ini bekerja dengan lancar sampai macOS 10.14.5 dirilis .... </p><br><h2 id="chto-izmenilos-s-vyhodom-macos-10145">  Apa yang telah berubah dengan macOS 10.14.5 </h2><br><p>  Penyimpangan kecil.  Melakukan pekerjaan terakhir pada tambalan baru di malam hari, saya memutuskan untuk meninggalkan perakitan versi produksi di pagi hari.  Memperhatikan bahwa ada pembaruan pada MacOS, diluncurkan dan tertidur. </p><br><p>  Pagi berikutnya, saya terkejut melihat bahwa majelis jatuh dari kesalahan yang tidak diketahui pada saat menandatangani aplikasi - "ID Pengembang Tidak Diketahui". </p><br><blockquote>  Jangan menunda sampai besok apa yang bisa dilakukan hari ini.  Benjamin Franklin </blockquote><br><h4 id="sut-problemy">  Inti dari masalah </h4><br><p>  Dimulai dengan macOS 10.14.5, Apple telah memperkenalkan prosedur notaris wajib.  Artikel pertama Apple tentang ini adalah pada tahun 2018, tetapi dengan pembaruan ini prosedur ini menjadi wajib.  Seperti apa tampangnya. </p><br><p>  Anda mengumpulkan aplikasi -&gt; mengirimnya ke server Apple -&gt; Apple mengesahkannya -&gt; Mengembalikan status sertifikasi yang berhasil -&gt; Perintah untuk mengatur stempel sertifikasi dijalankan. </p><br><p>  Untuk pengembang di Xcode, Anda hanya perlu menandai notaris </p><br><p><img src="https://habrastorage.org/webt/-x/sa/t4/-xsat4hgljlntg9x36agif_k13c.png"></p><br><p>  Juga, proses notaris dari aplikasi yang dirakit dapat dilakukan dengan perintah di terminal. </p><br><pre><code class="plaintext hljs">$ xcrun altool --notarize-app --primary-bundle-id "com.example.ote.zip" --username "AC_USERNAME" --password "@keychain:AC_PASSWORD" --file OvernightTextEditor_11.6.8.zip</code> </pre> <br><ul><li>  primary-bundle-id - bundleID aplikasi </li><li>  nama pengguna - login pengguna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">developer.apple.com</a> </li><li>  kata sandi - "kata sandi khusus aplikasi".  Itu dapat dibuat di akun pribadi Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">appleid.apple.com di</a> bawah akun pengembang. </li></ul><br><p>  Jika Anda tidak melakukan prosedur notaris, maka ketika pengguna mencoba menginstal aplikasi, sebuah jendela dengan kesalahan macet.  Gatekeeper bertanggung jawab untuk memeriksa keamanan aplikasi.  Dialah yang memecahkan perakitan aplikasi pada pembangun-elektron. </p><br><p><img src="https://habrastorage.org/webt/v6/gm/-a/v6gm-azhc2cgsxtvrqylh4hz_l0.jpeg"></p><br><h4 id="kak-vyglyadel-process-sborki-electron-builder">  Bagaimana proses pembangunan pembangun elektron terlihat </h4><br><p>  Setelah membangun aplikasi dalam file .app, menggunakan utilitas electron-osx-sign, aplikasi ditandatangani.  Setelah menandatangani dengan sertifikat, proses memeriksa aplikasi dengan gatekepper diluncurkan.  Tetapi dengan dirilisnya pembaruan, gatekeeper mulai memeriksa notaris aplikasi yang benar, dan ini tidak memungkinkan untuk berhasil menyelesaikan prosedur penandatanganan aplikasi. </p><br><p><img src="https://habrastorage.org/webt/gs/-v/g0/gs-vg0zydktmqzserrjzfqrjmi0.png"></p><br><h4 id="patch-dlya-vozmozhnosti-notarizacii">  Menambal untuk notaris </h4><br><p>  Pengguna Github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kallin</a> segera menyarankan solusi, dengan penambahan dua parameter baru ke pengaturan.  Yang pertama adalah "gatekeeperAssess" - menonaktifkan validasi perakitan setelah penandatanganan, dan yang kedua adalah "tanda" - yang menonaktifkan penandatanganan file instalasi (dmg) dengan sertifikat.  Komit ini termasuk dalam pelepasan pembangun elektron 20.43.0. </p><br><p>  Untuk proses notaris itu sendiri, electron-userland memiliki modul notaris-elektron yang melakukan tugas ini, Anda hanya perlu menulis skrip kecil dan menjalankannya menggunakan kait afterSign. </p><br><h2 id="process-podpisaniya-i-notarizacii-prilozheniya">  Penandatanganan aplikasi dan proses notaris </h2><br><p><img src="https://habrastorage.org/webt/mc/qg/n5/mcqgn5yehovsqcheiyq_5a1b-qo.png"></p><br><p>  Pada awalnya, Anda perlu memeriksa bahwa Anda telah menginstal versi pembangun-elektron&gt; = 20.43.0 dan menginstal paket notaris-elektron. </p><br><p>  Tambahkan 2 entri ke variabel lingkungan: </p><br><ul><li>  appleId - login <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">developer.apple.com</a> </li><li>  appleASP - "kata sandi khusus aplikasi", yang dapat dibuat di akun pribadi Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">appleid.apple.com</a> . </li></ul><br><p><img src="https://habrastorage.org/webt/q0/co/bv/q0cobvddzumimcg6kzffx9hzjkg.png"></p><br><p>  Sekarang buat skrip notaris yang akan dieksekusi setelah menandatangani aplikasi. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> notarize = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'electron-notarize'</span></span>).notarize; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (context) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { electronPlatformName } = context; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (electronPlatformName === <span class="hljs-string"><span class="hljs-string">'darwin'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Try notarize app'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> notarize({ <span class="hljs-attr"><span class="hljs-attr">appBundleId</span></span>: <span class="hljs-string"><span class="hljs-string">'APP_BUNDLE_ID'</span></span>, <span class="hljs-attr"><span class="hljs-attr">appPath</span></span>: <span class="hljs-string"><span class="hljs-string">'./dist/mac/APP_NAME.app'</span></span>, <span class="hljs-attr"><span class="hljs-attr">appleId</span></span>: process.env.appleId, <span class="hljs-attr"><span class="hljs-attr">appleIdPassword</span></span>: process.env.appleASP, }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Success notarize'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(err); } } };</code> </pre> <br><p>  Kami menyimpannya di tempat yang nyaman bagi Anda. </p><br><p>  Juga, untuk notaris yang tepat, kita perlu menentukan hak akses <br>  ke sumber daya sistem untuk aplikasi kita.  Untuk melakukan ini, buat file build / entitlements.mac.inherit.plist </p><br><pre> <code class="plaintext hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt; &lt;key&gt;com.apple.security.cs.allow-jit&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.cs.allow-dyld-environment-variables&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.cs.disable-library-validation&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.cs.disable-executable-page-protection&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.cs.debugger&lt;/key&gt; &lt;true/&gt; &lt;key&gt;com.apple.security.automation.apple-events&lt;/key&gt; &lt;true/&gt; &lt;/dict&gt; &lt;/plist&gt;</code> </pre> <br><p>  Isi file dalam kasus saya.  Mungkin ada konfigurasi yang berbeda untuk Anda.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Deskripsi semua bidang</a> . <br>  Wajib untuk Electron.js adalah - com.apple.security.cs.allow-unsigned-executable-memory. </p><br><p>  Sekarang perbarui pengaturan di package.json </p><br><p>  Di bagian untuk macOS: </p><br><p><img src="https://habrastorage.org/webt/lg/-2/tn/lg-2tnabm6hagn1s17mrcfgzhbw.png"></p><br><ul><li>  gatekeeperAssess (menonaktifkan validasi aplikasi pada sisi tanda-elektron-osx) </li><li>  hardenedRuntime (memungkinkan Anda membuat daftar izin keamanan dan akses ke sumber daya sistem) </li><li>  hak (jalur ke file izin akses untuk aplikasi kami) </li></ul><br><p>  Di bagian umum pengaturan pembangun elektron: </p><br><p><img src="https://habrastorage.org/webt/jb/6e/ek/jb6eekoqrg9qvfm2wxhilunfdjk.png"></p><br><ul><li>  afterSign (jalur ke skrip notaris, yang akan diluncurkan setelah menandatangani aplikasi) </li></ul><br><p>  Kami memulai proses perakitan.  Mungkin sepertinya sedikit ditangguhkan, tetapi mentransfer file ke server Apple dan menunggu respons memerlukan waktu (dari 3 hingga 10 menit) </p><br><p>  Status pemberitahuan dapat dilihat di terminal dengan menjalankan perintah: </p><br><p> <code>$ xcrun altool --notarization-history 0 -u $appleId -p $appleASP</code> </p> <br><p>  Jawabannya akan disajikan dalam sebuah tabel.  Bidang status mungkin memiliki nilai 'proses', 'disetujui', 'tidak valid' </p><br><p><img src="https://habrastorage.org/webt/lf/-c/gt/lf-cgtkjf3jwkwses9dnbaztnig.png"></p><br><p>  Jika statusnya 'tidak valid', Anda dapat melihat dari nomor permintaan apa yang salah. </p><br><p> <code>$ xcrun altool --notarization-info "RequestUUID" -u $appleId</code> </p> <br><p>  Itulah keseluruhan proses penandatanganan dan notaris.  Semoga artikel ini bermanfaat.  Terima kasih </p><br><h4 id="nebolshoe-dopolnenie">  Selain kecil </h4><br><p>  Saat mentransfer aplikasi untuk pengujian, kesalahan menarik ditemukan.  Aplikasi yang diterima melalui Telegram hanya menolak untuk memulai.  Saat melihat log, ditemukan bahwa aplikasi itu dikarantina oleh Telegram.  Untuk alasan apa dan bagaimana ini terjadi, saya tidak dapat menemukan jawabannya.  Saat mengirim file melalui Yandex.Disk (atau cara lain untuk mengunduh melalui browser), masalah ini tidak terjadi. </p><br><p><img src="https://habrastorage.org/webt/ww/3j/4k/ww3j4kakytwimj8uvz89d0jm2l0.png"></p><br><h3 id="poleznye-ssylki">  Tautan yang bermanfaat </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori notaris-elektron</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel Apple tentang notaris aplikasi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kallin artikel tentang proses notaris, menemukannya ketika saya selesai menulis</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id455874/">https://habr.com/ru/post/id455874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id455858/index.html">Jaringan TV kabel untuk yang terkecil. Bagian 9: Headend</a></li>
<li><a href="../id455860/index.html">Pengembangan BPM muda yang modis, modis, di Camunda</a></li>
<li><a href="../id455862/index.html">Apa yang Baru di AWS: DATA API, Analisis Data Kinesis, S3 Path</a></li>
<li><a href="../id455868/index.html">Mengatasi Hukum Moore: Teknologi Transistor Masa Depan</a></li>
<li><a href="../id455872/index.html">Taruhan apa yang dibuat Bezos pada tahun 1997 sehingga Amazon sekarang memegang 50% pasar e-commerce di AS dan 14% di dunia?</a></li>
<li><a href="../id455878/index.html">Skenario untuk penggunaan analitik video dalam ritel. Mengikuti jejak Video Analytics di Retail</a></li>
<li><a href="../id455880/index.html">Serialisasi baru dapat muncul di Java</a></li>
<li><a href="../id455882/index.html">Pabrik Jaringan untuk Pusat Data Cisco ACI - Bantuan Admin</a></li>
<li><a href="../id455886/index.html">Berikan nama pada bintang dan planet ekstrasurya dalam sistem HAT-P-3</a></li>
<li><a href="../id455888/index.html">Internet untuk penduduk musim panas. Bagian 3. Rusia akan datang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>