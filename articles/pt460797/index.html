<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ü üìÆ ‚èÆÔ∏è Desenvolvimento de JavaScript respons√°vel, parte 2 üè® üèΩ üíØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em abril deste ano, publicamos uma tradu√ß√£o do primeiro material de uma s√©rie dedicada a uma abordagem respons√°vel ao desenvolvimento do JavaScript. L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de JavaScript respons√°vel, parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460797/">  Em abril deste ano, publicamos uma tradu√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro material</a> de uma s√©rie dedicada a uma abordagem respons√°vel ao desenvolvimento do JavaScript.  L√°, o autor refletiu sobre as modernas tecnologias da Web e seu uso racional.  Agora, oferecemos uma tradu√ß√£o do segundo artigo desta s√©rie.  Ele √© dedicado a alguns detalhes t√©cnicos sobre o design de projetos da web. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Tenha uma ideia</font> </h2><br>  Voc√™ e sua equipe promoveram entusiasticamente a id√©ia de uma revis√£o completa do site antigo da empresa.  Seus pedidos chegaram √† lideran√ßa e chegaram at√© √† vista daqueles que est√£o no topo.  Voc√™ recebeu uma luz verde.  Sua equipe entusiasticamente come√ßou a trabalhar, atraindo designers, redatores e outros especialistas.  Logo voc√™ lan√ßou um novo c√≥digo. <br><br>  O trabalho come√ßou inocentemente.  O comando <code>npm install</code> est√° aqui, o comando <code>npm install</code> est√° l√°.  Assim que voc√™ olhou em volta, as depend√™ncias de produ√ß√£o j√° estavam sendo estabelecidas como se o desenvolvimento do projeto fosse uma bebida selvagem e voc√™ foi quem n√£o se importou com o que seria amanh√£ de manh√£. <br><br>  Ent√£o voc√™ come√ßou. <br><br>  Mas, ao contr√°rio das consequ√™ncias da festa mais louca de beber, a coisa terr√≠vel n√£o come√ßou na manh√£ seguinte.  Infelizmente - n√£o na manh√£ seguinte.  O acerto de contas veio em meses.  Ela assumiu a forma desagrad√°vel de leve n√°usea e dor de cabe√ßa para propriet√°rios de empresas e gerentes de n√≠vel m√©dio que se perguntaram por que, ap√≥s o lan√ßamento do novo site, as convers√µes e as receitas ca√≠ram.  Ent√£o o desastre ganhou for√ßa.  Isso aconteceu quando o diretor t√©cnico voltou do fim de semana, que passou em algum lugar fora da cidade.  Ele se perguntou por que o site da empresa estava carregando t√£o lentamente (se √© que havia) em seu telefone. <br><br>  Costumava ser bom para todos.  Agora outros tempos sombrios chegaram.  Conhe√ßa sua primeira ressaca depois de consumir uma grande dose de JavaScript. <br><br><h2>  <font color="#3AC1EF">Isso n√£o √© culpa sua.</font> </h2><br>  Enquanto voc√™ estava tentando lidar com uma ressaca infernal, palavras como ‚Äúeu te disse‚Äù pareceriam uma repreens√£o bem merecida para voc√™.  E se voc√™ pudesse lutar naquele momento, eles poderiam servir como uma ocasi√£o para uma luta. <br><br>  Quando se trata das consequ√™ncias do uso imprudente de JavaScript, voc√™ pode culpar tudo e todos.  Mas procurar os culpados √© uma perda de tempo.  O pr√≥prio dispositivo da web moderno exige que as empresas resolvam problemas mais rapidamente do que seus concorrentes.  Essa press√£o significa que n√≥s, nos esfor√ßando para aumentar nossa produtividade o m√°ximo poss√≠vel, provavelmente agarraremos qualquer coisa.  Isso significa que n√≥s, com um alto grau de probabilidade (embora isso n√£o possa ser chamado de inevit√°vel), criaremos aplicativos nos quais haver√° muitos excessos e, muito provavelmente, usaremos padr√µes que prejudicam o desempenho e a disponibilidade dos aplicativos. <br><br>  Desenvolvimento Web n√£o √© uma tarefa f√°cil.  Este √© um trabalho longo.  Raramente √© executado bem na primeira tentativa.  A melhor coisa sobre esse trabalho, no entanto, √© que n√£o precisamos fazer tudo perfeitamente desde o in√≠cio.  Podemos fazer melhorias nos projetos depois que eles s√£o lan√ßados e, de fato, este material √© dedicado a isso, o segundo de uma s√©rie de artigos sobre uma abordagem respons√°vel ao desenvolvimento de JS.  A perfei√ß√£o √© um objetivo muito distante.  Enquanto isso, vamos lidar com a ressaca do JavaScript, melhorando, por assim dizer, os <i>scripts</i> <br>  no site em um futuro pr√≥ximo. <br><br><h2>  <font color="#3AC1EF">Lidamos com problemas comuns</font> </h2><br>  Isso pode parecer uma abordagem mec√¢nica para resolver problemas, mas primeiro fa√ßa uma lista de problemas t√≠picos e maneiras de lidar com eles.  Em grandes equipes de desenvolvimento, essas coisas s√£o frequentemente esquecidas.  Isso √© especialmente verdade para as equipes que trabalham com v√°rios reposit√≥rios ou n√£o usam um modelo otimizado para seus projetos. <br><br><h3>  <font color="#3AC1EF">‚ñç Aplique o algoritmo de agita√ß√£o de √°rvore</font> </h3><br>  Primeiro, verifique se suas ferramentas est√£o configuradas para implementar o algoritmo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">agita√ß√£o de √°rvore</a> .  Se voc√™ nunca se deparou com esse conceito antes, d√™ uma olhada neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meu</a> material escrito no ano passado.  Se explicarmos a opera√ß√£o desse algoritmo em poucas palavras, podemos dizer que, devido ao seu uso nas montagens de produ√ß√£o do aplicativo, n√£o incluem os pacotes que, embora importados para o projeto, n√£o s√£o usados ‚Äã‚Äãnele. <br><br>  A implementa√ß√£o do algoritmo de agita√ß√£o de √°rvore √© um recurso padr√£o dos empacotadores modernos, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">webpack</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rollup</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parcel</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Grunhido</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gole</a> s√£o gerenciadores de tarefas.  Eles n√£o fazem isso.  O gerenciador de tarefas, diferentemente do bundler, n√£o cria um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gr√°fico de depend√™ncia</a> .  O gerenciador de tarefas est√° envolvido, usando os plug-ins necess√°rios, executando manipula√ß√µes separadas nos arquivos transferidos para ele.  A funcionalidade dos gerenciadores de tarefas pode ser expandida usando plug-ins, oferecendo a capacidade de processar JavaScript usando empacotadores.  Se a expans√£o dos recursos do gerenciador de tarefas nessa dire√ß√£o parecer um problema, voc√™ provavelmente precisar√° verificar manualmente a base de c√≥digo e remover o c√≥digo n√£o utilizado. <br><br>  Para que o algoritmo de agita√ß√£o de √°rvore funcione com efici√™ncia, as seguintes condi√ß√µes devem ser atendidas: <br><br><ol><li>  O c√≥digo do aplicativo e os pacotes instalados devem ser apresentados como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≥dulos ES6</a> .  Usar o algoritmo de agita√ß√£o de √°rvore para m√≥dulos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CommonJS</a> √© quase imposs√≠vel. </li><li>  Seu empacotador n√£o deve transformar os m√≥dulos ES6 em m√≥dulos de outro formato durante a constru√ß√£o do projeto.  Se isso acontecer na cadeia de ferramentas que usa Babel, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@ Babel / present-env</a> deve ter a configura√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modules: false</a> .  Isso far√° com que o c√≥digo ES6 n√£o seja convertido em c√≥digo que usa CommonJS. </li></ol><br>  Se, de repente, ao criar seu projeto, o algoritmo de agita√ß√£o da √°rvore n√£o for aplicado - ativar esse mecanismo pode melhorar a situa√ß√£o.  Obviamente, a efic√°cia desse algoritmo varia de projeto para projeto.  Al√©m disso, a possibilidade de seu uso depende se os m√≥dulos importados t√™m <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">efeitos colaterais</a> .  Isso pode afetar a capacidade do bundler de se livrar da inclus√£o de m√≥dulos importados desnecess√°rios no assembly. <br><br><h3>  <font color="#3AC1EF">‚ñçDivida o c√≥digo em partes</font> </h3><br>  √â muito prov√°vel que voc√™ j√° esteja usando alguma forma de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">separa√ß√£o</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo</a> .  No entanto, voc√™ deve verificar como isso √© feito.  Independentemente de como voc√™ separa o c√≥digo, quero lhe oferecer as duas perguntas muito valiosas a seguir: <br><br><ol><li>  Voc√™ remove o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo duplicado</a> dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pontos de entrada</a> ? </li><li>  Voc√™ carrega pregui√ßosamente tudo o que pode ser carregado dessa maneira com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">importa√ß√µes din√¢micas</a> ? </li></ol><br>  Esses problemas s√£o importantes porque reduzir a quantidade de c√≥digo redundante √© um elemento crucial de desempenho.  O carregamento lento do c√≥digo tamb√©m melhora o desempenho, reduzindo a quantidade de c√≥digo JavaScript que faz parte da p√°gina e carrega quando √© carregado.  Se falarmos sobre a an√°lise do projeto quanto √† presen√ßa de c√≥digo redundante, ent√£o para isso voc√™ pode usar algum tipo de ferramenta como o Bundle Buddy.  Se o seu projeto tiver um problema com isso, esta ferramenta informar√° sobre ele. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>  <i><font color="#999999">A ferramenta Bundle Buddy pode verificar as informa√ß√µes de compila√ß√£o do webpack e descobrir quanto do mesmo c√≥digo √© usado em seus pacotes configur√°veis.</font></i> <br><br>  Se falarmos sobre carregamento lento de materiais, descobrir onde procurar oportunidades para aplicar essa otimiza√ß√£o pode ser uma dificuldade.  Quando pesquiso em um projeto existente a possibilidade de usar carregamento lento, procuro na base de c√≥digo os locais que envolvem intera√ß√µes do usu√°rio com o c√≥digo.  Pode ser, por exemplo, manipuladores de eventos de mouse ou teclado, al√©m de outras coisas semelhantes.  Qualquer c√≥digo que exija a execu√ß√£o de alguma a√ß√£o do usu√°rio √© um bom candidato para aplicar o comando dynamic <code>import()</code> a ele. <br><br>  Obviamente, o carregamento de scripts sob demanda acarreta o risco de atrasos vis√≠veis na mudan√ßa do sistema para o modo interativo.  De fato, antes que o programa possa interagir interativamente com o usu√°rio, √© necess√°rio fazer o download do script apropriado.  Se a quantidade de dados transferidos n√£o o incomoda, considere usar a dica de recurso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rel = pr√©-busca</a> para carregar esses scripts de baixa prioridade.  Esses recursos n√£o competir√£o por largura de banda com recursos cr√≠ticos.  Se o navegador do usu√°rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suportar</a> <code>rel=prefetch</code> , o uso dessa dica de ferramenta ser√° ben√©fico.  Caso contr√°rio, nada de ruim acontecer√°, pois os navegadores simplesmente ignoram as marca√ß√µes que eles n√£o entendem. <br><br><h3>  <font color="#3AC1EF">‚ñçUtilize a op√ß√£o externa do webpack para marcar recursos localizados em servidores estrangeiros</font> </h3><br>  Idealmente, voc√™ deve hospedar o maior n√∫mero poss√≠vel de depend√™ncias do site em seus pr√≥prios servidores.  Se, por algum motivo, voc√™, sem op√ß√µes, precisar baixar depend√™ncias dos servidores de outras pessoas - coloque-as no bloco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">externo</a> nas configura√ß√µes do webpack.  Se isso n√£o for feito, isso pode significar que os visitantes do seu site baixar√£o o c√≥digo que voc√™ hospeda e o mesmo c√≥digo dos servidores de outras pessoas. <br><br>  D√™ uma olhada em uma situa√ß√£o hipot√©tica em que algo assim poderia prejudicar seu recurso.  Suponha que seu site baixe a biblioteca Lodash de um recurso p√∫blico da CDN.  Voc√™ tamb√©m instalou o Lodash no projeto para fins de desenvolvimento local.  No entanto, se voc√™ n√£o especificar nas configura√ß√µes do webpack que o Lodash √© uma depend√™ncia externa, seu c√≥digo de produ√ß√£o carregar√° a biblioteca da CDN, mas ao mesmo tempo ser√° inclu√≠da no pacote que est√° hospedado no servidor. <br><br>  Se voc√™ conhece bem os empacotadores, tudo isso pode lhe parecer verdades comuns.  Mas vi como essas coisas n√£o est√£o prestando aten√ß√£o.  Portanto, n√£o se apresse em verificar seu projeto quanto aos problemas acima. <br><br>  Se voc√™ n√£o considerar necess√°rio hospedar suas depend√™ncias criadas por desenvolvedores de terceiros por conta pr√≥pria, considere o uso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dns-prefetch</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">preconnect</a> ou talvez at√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pr√©-carregar</a> dicas com elas.  Isso pode reduzir a pontua√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TTI</a> (tempo para interatividade, tempo do site para a primeira interatividade).  E se os recursos JavaScript forem necess√°rios para exibir o conte√∫do do site, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√çndice de Velocidade</a> do site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tamb√©m ser√°</a> necess√°rio. <br><br><h2>  <font color="#3AC1EF">Bibliotecas alternativas menores e sobrecarga reduzida nos sistemas do usu√°rio</font> </h2><br>  O que √© chamado de " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Userland JavaScript</a> " (bibliotecas JS desenvolvidas pelo usu√°rio) parece uma enorme loja de doces obscena.  Toda essa magnific√™ncia e variedade de c√≥digo aberto nos inspira, desenvolvedores, com admira√ß√£o.  Estruturas e bibliotecas nos permitem expandir nossos aplicativos, equipando-os rapidamente com recursos que ajudam a resolver uma variedade de problemas.  Se tiv√©ssemos que implementar a mesma funcionalidade por n√≥s mesmos, levaria muito tempo e energia. <br><br>  Embora eu defenda pessoalmente a minimiza√ß√£o agressiva do uso de estruturas e bibliotecas de clientes em meus projetos, n√£o posso deixar de reconhecer seu enorme valor e utilidade.  Mas, apesar disso, quando se trata de instalar novas depend√™ncias no projeto, devemos tratar cada uma delas com uma boa dose de suspeita.  Se j√° criamos e lan√ßamos algo, cuja opera√ß√£o depende de muitas depend√™ncias instaladas, isso significa que suportamos a carga adicional no sistema que tudo isso cria.  √â prov√°vel que apenas desenvolvedores de pacotes possam lidar com esse problema otimizando seu desenvolvimento.  √â isso mesmo? <br><br>  Talvez seja assim, mas talvez n√£o.  Depende das depend√™ncias usadas.  Por exemplo, o React √© uma biblioteca extremamente popular.  Mas o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Preact</a> √© uma alternativa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muito pequena</a> ao React, que oferece ao desenvolvedor quase as mesmas APIs e permanece compat√≠vel com muitos complementos do React.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Luxon</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">date-fns</a> s√£o alternativas ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moment.js</a> , muito mais compactos que esta biblioteca, que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">t√£o pequena</a> . <br><br>  Em bibliotecas como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lodash,</a> voc√™ pode encontrar muitos m√©todos √∫teis.  Mas alguns deles s√£o f√°ceis de substituir pelos m√©todos ES6 padr√£o.  Por exemplo, o m√©todo <a href="">compacto</a> Lodash pode ser substitu√≠do pelo m√©todo padr√£o de matrizes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">filtro</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Muitos</a> outros m√©todos Lodash tamb√©m podem ser substitu√≠dos com seguran√ßa pelos m√©todos padr√£o.  A vantagem dessa substitui√ß√£o √© que obtemos os mesmos recursos que o uso da biblioteca, mas eliminamos uma depend√™ncia bastante grande. <br><br>  O que quer que voc√™ use, a id√©ia geral permanece a mesma: pergunte se sua escolha tem alternativas mais compactas.  Descubra se voc√™ pode resolver os mesmos problemas com as ferramentas de idioma padr√£o.  Talvez voc√™ fique agradavelmente surpreso com o pouco esfor√ßo necess√°rio para reduzir seriamente o tamanho do aplicativo e a quantidade de carga desnecess√°ria que ele exerce nos sistemas do usu√°rio. <br><br><h2>  <font color="#3AC1EF">Use tecnologias de carregamento diferencial de script</font> </h2><br>  Provavelmente, Babel est√° na sua cadeia de ferramentas.  Essa ferramenta √© usada para transformar c√≥digo-fonte compat√≠vel com ES6 em c√≥digo que os navegadores herdados podem executar.  Isso significa que estamos condenados a oferecer pacotes enormes mesmo para navegadores que n√£o precisam deles, at√© que todos os navegadores antigos simplesmente desapare√ßam?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Claro que n√£o</a> !  O carregamento diferencial de recursos ajuda a contornar esse problema criando dois assemblies diferentes com base no c√≥digo ES6: <br><br><ul><li>  O primeiro assembly inclui todas as convers√µes de c√≥digo e polyfill necess√°rias para o seu site funcionar em navegadores herdados.  Provavelmente agora voc√™ est√° dando aos clientes essa montagem espec√≠fica. </li><li>  O segundo assembly cont√©m um m√≠nimo de convers√µes de c√≥digo e polyfill, ou ocorre sem elas.  Ele foi projetado para navegadores modernos.  Esta √© uma montagem que voc√™ pode n√£o ter.  Pelo menos ainda n√£o. </li></ul><br>  Para usar a tecnologia de carregamento diferencial de montagens, voc√™ precisa trabalhar um pouco.  N√£o vou entrar em detalhes aqui - darei um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> melhor para o meu material, que discute uma das maneiras de implementar essa tecnologia.  A ess√™ncia de tudo isso √© que voc√™ pode modificar sua configura√ß√£o de constru√ß√£o para que, durante a constru√ß√£o do projeto, uma vers√£o adicional do pacote JS do seu site seja criada.  Esse pacote adicional ser√° menor que o principal.  Destina-se apenas a navegadores modernos.  A melhor parte √© que essa abordagem permite otimizar o tamanho do pacote e, ao mesmo tempo, n√£o sacrificar absolutamente nada dos recursos do projeto.  Dependendo do c√≥digo do aplicativo, a economia no tamanho do pacote pode ser bastante significativa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>  <i><font color="#999999">An√°lise de pacotes configur√°veis ‚Äã‚Äãpara navegadores herdados (√† esquerda) e pacotes configur√°veis ‚Äã‚Äãpara novos navegadores (√† direita).</font></i>  <i><font color="#999999">O estudo do pacote foi realizado usando o webpack-bundle-analyzer.</font></i>  <i><font color="#999999"><a href="">Aqui est√° a</a> vers√£o em tamanho real desta imagem.</font></i> <br><br>  √â mais f√°cil oferecer pacotes diferentes para navegadores diferentes usando o seguinte truque.  Funciona bem em navegadores modernos: <br><br><pre> <code class="javascript hljs">&lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.mjs"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Infelizmente, essa abordagem tem desvantagens.  Navegadores desatualizados como o IE11 e at√© relativamente modernos, como as vers√µes 15-18 do Edge, carregam os dois pacotes.  Se voc√™ estiver pronto para atend√™-lo - use essa t√©cnica e n√£o se preocupe com nada. <br><br>  Por outro lado, voc√™ precisa criar algo para o caso de estar preocupado com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">impacto</a> no desempenho do aplicativo, pois os navegadores mais antigos precisam fazer o download dos dois pacotes.  Aqui est√° uma solu√ß√£o potencial para esse problema que usa inje√ß√£o de script (em vez da tag <code>&lt;script&gt;</code> que usamos acima).  Evita o carregamento duplo de pacotes pelos navegadores apropriados.  Aqui est√° o que estamos falando: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scriptEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"noModule"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> scriptEl) {  <span class="hljs-comment"><span class="hljs-comment">//     scriptEl.src = "/js/app.mjs";  scriptEl.type = "module"; } else {  //     scriptEl.src = "/js/app.js";  scriptEl.defer = true; // type="module"   ,    . } //  ! document.body.appendChild(scriptEl);</span></span></code> </pre> <br>  Esse script pressup√µe que, se o navegador suportar o atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nomodule</a> no elemento <code>script</code> , ele entender√° a constru√ß√£o <code>type="module"</code> .  Isso garante que os navegadores herdados recebam apenas scripts projetados para eles, e os modernos receber√£o scripts projetados para eles.  No entanto, lembre-se de que os scripts incorporados dinamicamente s√£o carregados de forma ass√≠ncrona por padr√£o.  Portanto, se a ordem de carregamento de depend√™ncias for importante para voc√™, defina o atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">async</a> como <code>false</code> . <br><br><h2>  <font color="#3AC1EF">Transmitir menos</font> </h2><br>  Eu n√£o vou atacar Babel aqui.  Essa ferramenta √© necess√°ria no desenvolvimento moderno da Web, mas √© uma entidade muito inst√°vel.  Babel adiciona muitas coisas ao c√≥digo que gera, que o desenvolvedor talvez n√£o conhe√ßa.  Portanto, voc√™ n√£o se arrepender√° se olhar para as entranhas de Babel e descobrir exatamente o que ele est√° fazendo.  Em particular, o conhecimento dos mecanismos internos de Babel deixa claro que pequenas mudan√ßas na maneira como algu√©m escreve c√≥digo podem ter um efeito positivo no que Babel gera. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>  <i><font color="#999999"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Transmitir menos</a></font></i> <br><br>  Ou seja, √© disso que estamos falando.  Por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">as op√ß√µes padr√£o</a> s√£o um recurso muito √∫til do ES6 que voc√™ j√° pode estar usando: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, level = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"log"</span></span></span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Aqui vale a pena prestar aten√ß√£o no par√¢metro <code>level</code> , cujo valor padr√£o √© o <code>log</code> strings.  Isso significa que, se quisermos chamar <code>console.log</code> usando a fun√ß√£o wrapper do <code>logger</code> , n√£o precisamos passar de <code>level</code> para essa fun√ß√£o.  Conveniente, certo?  Tudo isso √© bom - exceto pelo c√≥digo que Babel obt√©m ao transformar esta fun√ß√£o: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] : <span class="hljs-string"><span class="hljs-string">"log"</span></span>;  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Este √© um exemplo de como, apesar de sermos guiados por boas inten√ß√µes, os confortos que Babel d√° podem levar a consequ√™ncias negativas.  O que eram apenas alguns caracteres no c√≥digo-fonte se transformou em uma constru√ß√£o muito mais longa na vers√£o de produ√ß√£o do programa.       - ,      ,     <code>arguments</code>  . <br><br> ,    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ?  ,   Babel      : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function logger(...args) {  const [level, message] = args;  console[level](message); } //   Babel function logger() {  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {    args[_key] = arguments[_key];  }  const level = args[0],        message = args[1];  console[level](message); }</span></span></code> </pre> <br>     ,  Babel         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@babel/preset-env</a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> .  , ,     , ,    ,        !       ‚Äî    ¬´¬ª   (  <code>true</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">loose</a> ).  ‚Äî  ,   ,     ,     ,  ,     .   ¬´¬ª       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>   ,     Babel   ,    . <br><br>    ,    ¬´¬ª   ,         ,     Babel   : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Babel      function logger(message, level) {  console[level || "log"](message); }</span></span></code> </pre> <br> ,    ‚Äî      JavaScript,       ,    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> spread</a> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> . <br><br>          ‚Äî              : <br><br><ol><li>     ‚Äî    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@babel/runtime</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@babel/plugin-transform-runtime</a>  ,      ,  Babel    . </li><li>        ,       .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@babel/polyfill</a> .   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">babel</a> /preset-env <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">useBuiltins</a>   <code>usage</code> . </li></ol><br>      ,    ,   ,   ,    ,      .    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSX</a> ,      ,       ,       .        ,          ,          . ,   ,  .     ,     Babel       ‚Äî         .       ,  Babel.  ,             . <br><br><h2> <font color="#3AC1EF">:   ‚Äî   </font> </h2><br>   ,    . ,    JavaScript-,       ,     .      ,      ,       .  -       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> .  ,           ,   ,  ,    ,   ,  ,    . <br><br>   ,  ,    ,      ,   ,    ,   ,  . - ‚Äî  . ,    ,  ,            .    .   ,  ,  ,    ,    .      ,      ,   ,          . <br><br>  <b>Caros leitores!</b>         JS-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460797/">https://habr.com/ru/post/pt460797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460783/index.html">Consenso sobre a reputa√ß√£o do n√≥. √â necess√°rio?</a></li>
<li><a href="../pt460785/index.html">Aplicativos para e-books no sistema operacional Android. Parte 1. Introdu√ß√£o e aplicativos de escrit√≥rio</a></li>
<li><a href="../pt460789/index.html">Finalmente, rejuvenescimento √© uma coisa</a></li>
<li><a href="../pt460793/index.html">Estruturando aplica√ß√µes de rea√ß√£o</a></li>
<li><a href="../pt460795/index.html">12 dicas para melhorar o desempenho do aplicativo JavaScript</a></li>
<li><a href="../pt460799/index.html">Solicita√ß√£o de pagamento da API do navegador padr√£o</a></li>
<li><a href="../pt460801/index.html">27 ferramentas incr√≠veis do VS Code para desenvolvedores modernos de JavaScript</a></li>
<li><a href="../pt460803/index.html">Leitura para o ver√£o: livros para t√©cnicos</a></li>
<li><a href="../pt460805/index.html">Como transferir dados entre microcontroladores a 100 Mbps</a></li>
<li><a href="../pt460807/index.html">Me√ßa sete vezes, uma vez que implemente a ferramenta de BI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>