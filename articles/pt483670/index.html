<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüîß üë©üèª‚Äç‚úàÔ∏è üó≥Ô∏è Tudo o que voc√™ queria saber sobre o endere√ßo MAC üë©üèø‚ÄçüöÄ üêû ü•ß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todo mundo sabe que esses s√£o seis bytes, geralmente exibidos em formato hexadecimal, atribu√≠dos a uma placa de rede na f√°brica e, √† primeira vista, s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tudo o que voc√™ queria saber sobre o endere√ßo MAC</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483670/"><p><img src="https://habrastorage.org/webt/so/w5/21/sow5218j24fiojm2deevv3xnko8.jpeg" align="right">  Todo mundo sabe que esses s√£o seis bytes, geralmente exibidos em formato hexadecimal, atribu√≠dos a uma placa de rede na f√°brica e, √† primeira vista, s√£o aleat√≥rios.  Algumas pessoas sabem que os tr√™s primeiros bytes do endere√ßo s√£o o identificador do fabricante e os tr√™s bytes restantes s√£o atribu√≠dos a eles.  Tamb√©m √© sabido que voc√™ pode definir <em>um</em> endere√ßo <em>arbitr√°rio</em> .  Muitos j√° ouviram falar dos "endere√ßos aleat√≥rios" no Wi-Fi. </p><br><p>  Vamos descobrir o que √© isso. </p><br><p> Endere√ßo MAC (endere√ßo de controle de acesso √† m√≠dia) - um identificador exclusivo atribu√≠do a um adaptador de rede; √© usado em redes padr√£o IEEE 802, principalmente Ethernet, Wi-Fi e Bluetooth.  Oficialmente, √© chamado de "identificador do tipo EUI-48".  √â √≥bvio pelo nome que o endere√ßo tem 48 bits, ou seja,  6 bytes.  Geralmente, n√£o h√° um padr√£o aceito para escrever um endere√ßo (em vez de um endere√ßo IPv4, onde os octetos s√£o sempre separados por pontos). Geralmente √© escrito como seis n√∫meros hexadecimais, separados por dois pontos: 00: AB: CD: EF: 11: 22, embora alguns fabricantes de equipamentos prefiram escrever como 00 -AB-CD-EF-11-22 e at√© 00ab.cdef.1122. </p><a name="habracut"></a><br><p>  Historicamente, os endere√ßos eram costurados na ROM do chipset da placa de rede sem a possibilidade de sua modifica√ß√£o sem um programador flash, mas atualmente o endere√ßo pode ser alterado programaticamente a partir do sistema operacional.  Voc√™ pode definir manualmente o endere√ßo MAC da placa de rede no Linux e MacOS (sempre), Windows (quase sempre, se o driver permitir), Android (apenas raiz);  com o iOS (sem raiz), um truque semelhante √© imposs√≠vel. </p><br><h3>  Estrutura de Endere√ßos </h3><br><p>  O endere√ßo consiste em uma parte do identificador do fabricante, OUI, e o identificador atribu√≠do pelo fabricante.  O OUI (Organizationally Unique Identifier) <a href="https://standards.ieee.org/products-services/regauth/oui/index.html" rel="nofollow">√©</a> atribu√≠do pelo IEEE.  De fato, seu comprimento pode ser n√£o apenas de 3 bytes (24 bits), mas de 28 ou 36 bits, dos quais s√£o formados os blocos MAC Address Block (MA) dos tipos Grande (MA-L), M√©dio (MA-M) e Pequeno (MA-S), respectivamente.  O tamanho do bloco emitido, neste caso, ser√° de 24, 20, 12 bits ou 16 milh√µes, 1 milh√£o e 4 mil endere√ßos.  Atualmente, cerca de 38 mil blocos s√£o distribu√≠dos, eles podem ser visualizados com in√∫meras ferramentas online, por exemplo, <a href="https://regauth.standards.ieee.org/standards-ra-web/pub/view.html" rel="nofollow">IEEE</a> ou <a href="https://www.wireshark.org/tools/oui-lookup.html" rel="nofollow">Wireshark</a> . </p><br><h3>  Quem possui os endere√ßos </h3><br><p>  O processamento simples do <a href="https://code.wireshark.org/review/gitweb%3Fp%3Dwireshark.git%3Ba%3Dblob_plain%3Bf%3Dmanuf%3Bhb%3DHEAD" rel="nofollow">banco de dados de upload</a> IEEE dispon√≠vel ao p√∫blico fornece muitas informa√ß√µes.  Por exemplo, algumas organiza√ß√µes adotaram muitos blocos de OUI.  Aqui est√£o nossos her√≥is: </p><br><div class="scrollable-table"><table><thead><tr><th>  Fornecedor </th><th>  O n√∫mero de blocos / registros </th><th>  O n√∫mero de endere√ßos, milh√µes </th></tr></thead><tbody><tr><td>  Cisco Systems Inc </td><td>  888 </td><td>  14208 </td></tr><tr><td>  Ma√ß√£ </td><td>  772 </td><td>  12352 </td></tr><tr><td>  Samsung </td><td>  636 </td><td>  10144 </td></tr><tr><td>  Huawei Technologies Co. Ltd </td><td>  606 </td><td>  9696 </td></tr><tr><td>  Intel Corporation </td><td>  375 </td><td>  5776 </td></tr><tr><td>  ARRIS Group Inc. </td><td>  319 </td><td>  5104 </td></tr><tr><td>  Nokia Corporation </td><td>  241 </td><td>  3856 </td></tr><tr><td>  Particular </td><td>  232 </td><td>  2704 </td></tr><tr><td>  Texas Instruments </td><td>  212 </td><td>  3392 </td></tr><tr><td>  corpora√ß√£o zte </td><td>  198 </td><td>  3168 </td></tr><tr><td>  Autoridade de Registro IEEE </td><td>  194 </td><td>  3072 </td></tr><tr><td>  Hewlett packard </td><td>  149 </td><td>  2384 </td></tr><tr><td>  Hon Hai Precision </td><td>  136 </td><td>  2176 </td></tr><tr><td>  TP-LINK </td><td>  134 </td><td>  2144 </td></tr><tr><td>  Dell Inc. </td><td>  123 </td><td>  1968 </td></tr><tr><td>  Juniper Networks </td><td>  110 </td><td>  1760 </td></tr><tr><td>  Sagemcom Broadband SAS </td><td>  97 </td><td>  1552 </td></tr><tr><td>  Fiberhome Telecomunica√ß√µes Tecnologias Co.  LTD </td><td>  97 </td><td>  1552 </td></tr><tr><td>  Xiaomi Communications Co Ltd </td><td>  88 </td><td>  1408 </td></tr><tr><td>  Guangdong Oppo Telecomunica√ß√µes M√≥veis Corp.Ltd </td><td>  82 </td><td>  1312 </td></tr></tbody></table></div><br><p>  O Google tem apenas 40 deles, e isso n√£o √© surpreendente: eles pr√≥prios n√£o produzem tantos dispositivos de rede. </p><br><p>  Os blocos MA n√£o s√£o fornecidos gratuitamente, eles podem ser adquiridos por dinheiro razo√°vel (sem uma taxa mensal) por US $ 3000, US $ 1800 ou US $ 755, respectivamente.  √â interessante que, pelo dinheiro extra (por ano), voc√™ possa comprar "oculta√ß√£o" de informa√ß√µes p√∫blicas sobre o bloco alocado.  Existem 232 deles agora, como pode ser visto acima. </p><br><h3 id="kogda-zakonchatsya-mas-adresa">  Quando o endere√ßo MAC vai acabar? </h3><br><p>  Estamos todos cansados ‚Äã‚Äãda hist√≥ria de dez anos de que "os endere√ßos IPv4 est√£o prestes a acabar".  Sim, novos blocos IPv4 n√£o s√£o mais f√°ceis de obter.  Tamb√©m √© sabido que os endere√ßos IP s√£o <a href="https://habr.com/ru/company/globalsign/blog/355006/">distribu√≠dos de maneira extremamente desigual</a> ;  existem blocos gigantes e pouco usados, de propriedade de grandes corpora√ß√µes e do governo dos EUA, no entanto, sem muita esperan√ßa de sua redistribui√ß√£o em favor dos necessitados.  A prolifera√ß√£o de NAT, CG-NAT e IPv6 tornou o problema da falta de endere√ßos p√∫blicos menos grave. </p><br><p>  O endere√ßo MAC possui 48 bits, dos quais 46 s√£o √∫teis (por qu√™? Continue lendo), que fornece 2 <sup>46</sup> ou 10 <sup>14</sup> endere√ßos, o que representa 2 <sup>14</sup> vezes o espa√ßo de endere√ßo IPv4. <br>  No momento, s√£o distribu√≠dos aproximadamente meio trilh√£o de endere√ßos, ou apenas 0,73% do volume total.  A exaust√£o dos endere√ßos MAC ainda √© muito, muito longe. </p><br><h3 id="sluchaynost-bit">  Bit aleat√≥rio </h3><br><p>  Pode-se supor que as OUIs sejam distribu√≠das aleatoriamente, e o fornecedor tamb√©m atribui endere√ßos aleatoriamente a dispositivos de rede individuais.  √â isso mesmo?  Vejamos a distribui√ß√£o de bits nas bases MAC dos endere√ßos que tenho √† minha disposi√ß√£o para dispositivos 802.11 coletados por sistemas de autoriza√ß√£o de trabalho em redes sem fio <a href="https://www.netams.com/wnam/" rel="nofollow">WNAM</a> .  Os endere√ßos pertencem a dispositivos reais que foram conectados ao Wi-Fi por v√°rios anos em tr√™s pa√≠ses.  Al√©m disso, h√° uma pequena base de dispositivos LAN com fio 802.3. </p><br><p>  Dividimos cada endere√ßo MAC (seis bytes) de cada uma das amostras em bits por bytes, e observamos a frequ√™ncia de ocorr√™ncia do bit "1" em cada uma das 48 posi√ß√µes.  Se o bit for definido de maneira completamente arbitr√°ria, a probabilidade de obter "1" deve ser de 50%. </p><br><div class="scrollable-table"><table><thead><tr><th></th><th>  Amostra de Wi-Fi n¬∫ 1 (RF) </th><th>  Amostra de Wi-Fi n.¬∫ 2 (Bielorr√∫ssia) </th><th>  Amostra de Wi-Fi n¬∫ 3 (Uzbequist√£o) </th><th>  Amostra de LAN (RF) </th></tr></thead><tbody><tr><td>  O n√∫mero de registros no banco de dados </td><td>  5929000 </td><td>  1274000 </td><td>  366000 </td><td>  1000 </td></tr><tr><td>  N√∫mero do bit: </td><td>  % bit "1" </td><td>  % bit "1" </td><td>  % bit "1" </td><td>  % bit "1" </td></tr><tr><td>  1 </td><td>  48,6% </td><td>  49,2% </td><td>  50,7% </td><td>  28,7% </td></tr><tr><td>  2 </td><td>  44,8% </td><td>  49,1% </td><td>  47,7% </td><td>  30,7% </td></tr><tr><td>  3 </td><td>  46,7% </td><td>  48,3% </td><td>  46,8% </td><td>  35,8% </td></tr><tr><td>  4 </td><td>  48,0% </td><td>  48,6% </td><td>  49,8% </td><td>  37,1% </td></tr><tr><td>  5 </td><td>  45,7% </td><td>  46,9% </td><td>  47,0% </td><td>  32,3% </td></tr><tr><td>  6 </td><td>  46,6% </td><td>  46,7% </td><td>  47,8% </td><td>  27,1% </td></tr><tr><td>  7 </td><td>  <strong>0,3%</strong> </td><td>  <strong>0,3%</strong> </td><td>  <strong>0,2%</strong> </td><td>  <strong>0,7%</strong> </td></tr><tr><td>  8 </td><td>  <strong>0,0%</strong> </td><td>  <strong>0,0%</strong> </td><td>  <strong>0,0%</strong> </td><td>  <strong>0,0%</strong> </td></tr><tr><td></td></tr><tr><td>  9 </td><td>  48,1% </td><td>  50,6% </td><td>  49,4% </td><td>  38,1% </td></tr><tr><td>  10 </td><td>  49,1% </td><td>  50,2% </td><td>  47,4% </td><td>  42,7% </td></tr><tr><td>  11 </td><td>  50,8% </td><td>  50,0% </td><td>  50,6% </td><td>  42,9% </td></tr><tr><td>  12 </td><td>  49,0% </td><td>  48,4% </td><td>  48,2% </td><td>  53,7% </td></tr><tr><td>  13 </td><td>  47,6% </td><td>  47,0% </td><td>  46,3% </td><td>  48,5% </td></tr><tr><td>  14 </td><td>  47,5% </td><td>  47,4% </td><td>  51,7% </td><td>  46,8% </td></tr><tr><td>  15 </td><td>  48,3% </td><td>  47,5% </td><td>  48,7% </td><td>  46,1% </td></tr><tr><td>  16 </td><td>  50,6% </td><td>  50,4% </td><td>  51,2% </td><td>  45,3% </td></tr><tr><td></td></tr><tr><td>  17 </td><td>  49,4% </td><td>  50,4% </td><td>  54,3% </td><td>  38,2% </td></tr><tr><td>  18 </td><td>  49,8% </td><td>  50,5% </td><td>  51,5% </td><td>  51,9% </td></tr><tr><td>  19 </td><td>  51,6% </td><td>  53,3% </td><td>  53,9% </td><td>  42,6% </td></tr><tr><td>  20 </td><td>  46,6% </td><td>  46,1% </td><td>  45,5% </td><td>  48,4% </td></tr><tr><td>  21 </td><td>  51,7% </td><td>  52,9% </td><td>  47,7% </td><td>  48,9% </td></tr><tr><td>  22 </td><td>  49,2% </td><td>  49,6% </td><td>  41,6% </td><td>  49,8% </td></tr><tr><td>  23 </td><td>  51,2% </td><td>  50,9% </td><td>  47,0% </td><td>  41,9% </td></tr><tr><td>  24 </td><td>  49,5% </td><td>  50,2% </td><td>  50,1% </td><td>  47,5% </td></tr><tr><td></td></tr><tr><td>  25 </td><td>  47,1% </td><td>  47,3% </td><td>  47,7% </td><td>  44,2% </td></tr><tr><td>  26 </td><td>  48,6% </td><td>  48,6% </td><td>  49,2% </td><td>  43,9% </td></tr><tr><td>  27 </td><td>  49,8% </td><td>  49,0% </td><td>  49,7% </td><td>  48,9% </td></tr><tr><td>  28. </td><td>  49,3% </td><td>  49,3% </td><td>  49,7% </td><td>  55,1% </td></tr><tr><td>  29 </td><td>  49,5% </td><td>  49,4% </td><td>  49,8% </td><td>  49,8% </td></tr><tr><td>  30 </td><td>  49,8% </td><td>  49,8% </td><td>  49,7% </td><td>  52,1% </td></tr><tr><td>  31 </td><td>  49,5% </td><td>  49,7% </td><td>  49,6% </td><td>  46,6% </td></tr><tr><td>  32. </td><td>  49,4% </td><td>  49,7% </td><td>  49,5% </td><td>  47,5% </td></tr><tr><td></td></tr><tr><td>  33 </td><td>  49,4% </td><td>  49,8% </td><td>  49,7% </td><td>  48,3% </td></tr><tr><td>  34 </td><td>  49,7% </td><td>  50,0% </td><td>  49,6% </td><td>  44,9% </td></tr><tr><td>  35 </td><td>  49,9% </td><td>  50,0% </td><td>  50,0% </td><td>  50,6% </td></tr><tr><td>  36. </td><td>  49,9% </td><td>  49,9% </td><td>  49,8% </td><td>  49,1% </td></tr><tr><td>  37. </td><td>  49,8% </td><td>  50,0% </td><td>  49,9% </td><td>  51,4% </td></tr><tr><td>  38. </td><td>  50,0% </td><td>  50,0% </td><td>  49,8% </td><td>  51,8% </td></tr><tr><td>  39. </td><td>  49,9% </td><td>  50,0% </td><td>  49,9% </td><td>  55,7% </td></tr><tr><td>  40. </td><td>  50,0% </td><td>  50,0% </td><td>  50,0% </td><td>  49,5% </td></tr><tr><td></td></tr><tr><td>  41. </td><td>  49,9% </td><td>  50,0% </td><td>  49,9% </td><td>  52,2% </td></tr><tr><td>  42. </td><td>  50,0% </td><td>  50,0% </td><td>  50,0% </td><td>  53,9% </td></tr><tr><td>  43 </td><td>  50,1% </td><td>  50,0% </td><td>  50,3% </td><td>  56,1% </td></tr><tr><td>  44 </td><td>  50,1% </td><td>  50,0% </td><td>  50,1% </td><td>  45,8% </td></tr><tr><td>  45 </td><td>  50,0% </td><td>  50,0% </td><td>  50,1% </td><td>  50,1% </td></tr><tr><td>  46. </td><td>  50,0% </td><td>  50,0% </td><td>  50,1% </td><td>  49,5% </td></tr><tr><td>  47 </td><td>  49,2% </td><td>  49,4% </td><td>  49,7% </td><td>  45,2% </td></tr><tr><td>  48. </td><td>  49,9% </td><td>  50,1% </td><td>  50,7% </td><td>  54,6% </td></tr></tbody></table></div><br><p>  De onde vem essa injusti√ßa nos bits 7 e 8?  Quase sempre h√° zeros. </p><br><p>  De fato, o padr√£o define esses bits como especiais ( <a href="https://ru.wikipedia.org/wiki/MAC-%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581" rel="nofollow">Wikipedia</a> ): <br><img src="https://habrastorage.org/webt/0-/oc/jk/0-ocjkovhfyalpqzrsjdecvg7na.png"></p><br><p>  O oitavo bit (desde o in√≠cio) do primeiro byte do endere√ßo MAC √© chamado de bit Unicast / Multicast e determina que tipo de quadro (quadro) √© transmitido com esse endere√ßo, normal (0) ou broadcast (1) (multicast ou broadcast).  Para a intera√ß√£o normal do adaptador de rede unicast, esse bit √© definido como "0" em todos os pacotes enviados a ele. </p><br><p>  O s√©timo bit (desde o in√≠cio) do primeiro byte do endere√ßo MAC √© chamado de bit U / L (Universal / Local) e determina se o endere√ßo √© globalmente exclusivo (0) ou localmente exclusivo (1).  Por padr√£o, todos os endere√ßos "costurados pelo fabricante" s√£o globalmente exclusivos, portanto, o n√∫mero esmagador de endere√ßos MAC coletados cont√©m o s√©timo bit definido como "0".  Na tabela de identificadores OUI atribu√≠dos, apenas cerca de 130 entradas t√™m um bit U / L de "1" e, aparentemente, esses s√£o blocos de endere√ßos MAC para necessidades especiais. </p><br><p>  Do sexto ao primeiro bits do primeiro byte, os bits do segundo e terceiro bytes nos identificadores OUI e, mais ainda, os bits em 4-6 bytes do endere√ßo atribu√≠do pelo fabricante, s√£o distribu√≠dos de maneira mais ou menos uniforme. </p><br><p>  Assim, no endere√ßo MAC real do adaptador de rede, os bits s√£o praticamente equivalentes e n√£o possuem significado tecnol√≥gico, com exce√ß√£o de dois bits de servi√ßo do byte alto. </p><br><h3 id="rasprostranennost">  Preval√™ncia </h3><br><p>  Gostaria de saber quais fabricantes de equipamentos sem fio s√£o os mais populares?  Combine a pesquisa OUI com os dados de amostra n¬∫ 1. </p><br><div class="scrollable-table"><table><thead><tr><th>  Fornecedor </th><th>  O compartilhamento de dispositivos,% </th></tr></thead><tbody><tr><td>  Ma√ß√£ </td><td>  26,09 </td></tr><tr><td>  Samsung </td><td>  19,79 </td></tr><tr><td>  Huawei Technologies Co.  Ltd </td><td>  7,80 </td></tr><tr><td>  Xiaomi Communications Co Ltd </td><td>  6,83 </td></tr><tr><td>  Sony Mobile Communications Inc </td><td>  3,29 </td></tr><tr><td>  LG Electronics (Comunica√ß√µes M√≥veis) </td><td>  2,76 </td></tr><tr><td>  ASUSTek COMPUTER INC. </td><td>  2,58 </td></tr><tr><td>  TCT mobile ltd </td><td>  2,13 </td></tr><tr><td>  corpora√ß√£o zte </td><td>  2,00 </td></tr><tr><td>  n√£o encontrado no banco de dados IEEE </td><td>  1,92 </td></tr><tr><td>  Tecnologia de comunica√ß√£o m√≥vel Lenovo Ltd. </td><td>  1,71 </td></tr><tr><td>  HTC Corporation </td><td>  1,68 </td></tr><tr><td>  Murata Manufactuaring </td><td>  1,31 </td></tr><tr><td>  Inpro comm </td><td>  1,26 </td></tr><tr><td>  Microsoft Corporation </td><td>  1,11 </td></tr><tr><td>  Shenzhen TINNO Mobile Technology Corp. </td><td>  1,02 </td></tr><tr><td>  Comunica√ß√£o Co. das tecnologias de mobilidade da Motorola (Wuhan)  Ltd. </td><td>  0,93 </td></tr><tr><td>  Nokia Corporation </td><td>  0,88 </td></tr><tr><td>  Tecnologias de vento de Shanghai Co.  Ltd </td><td>  0,74 </td></tr><tr><td>  Companhia de Comunica√ß√£o M√≥vel Lenovo (Wuhan) Limited </td><td>  0,71 </td></tr></tbody></table></div><br><p>  A pr√°tica mostra que, quanto mais pr√≥spero o contingente de assinantes sem fio neste local, maior a propor√ß√£o de dispositivos Apple. </p><br><h3 id="unikalnost">  Exclusividade </h3><br><p>  Os endere√ßos MAC s√£o √∫nicos?  Em teoria, sim, uma vez que cada um dos fabricantes de dispositivos (propriet√°rios da unidade MA) deve fornecer um endere√ßo exclusivo para cada um de seus adaptadores de rede.  No entanto, alguns fabricantes de chips, a saber: </p><br><ul><li>  00: 0A: F5 Airgo Networks, Inc. Empresas  (agora Qualcomm) </li><li>  00:08:22 InPro Comm (agora MediaTek) </li></ul><br><p>  defina os tr√™s √∫ltimos bytes do endere√ßo MAC como um n√∫mero aleat√≥rio, aparentemente ap√≥s cada reinicializa√ß√£o do dispositivo.  Havia 82 mil desses endere√ßos na minha amostra n¬∫ 1. </p><br><p>  Voc√™ pode se definir como um estranho, n√£o como um endere√ßo exclusivo, √© claro, configurando-o propositadamente "como um vizinho", definindo-o como um farejador ou escolhendo aleatoriamente.  Tamb√©m √© poss√≠vel definir acidentalmente um endere√ßo n√£o exclusivo executando, por exemplo, a restaura√ß√£o de uma configura√ß√£o de backup de um roteador como Mikrotik ou OpenWrt. </p><br><p>  O que acontece se dois dispositivos com o mesmo endere√ßo MAC estiverem presentes na rede?  Tudo depende da l√≥gica do equipamento de rede (roteador com fio, controlador de rede sem fio).  Provavelmente, ambos os dispositivos n√£o funcionar√£o ou funcionar√£o intermitentemente.  Do ponto de vista dos padr√µes IEEE, prop√µe-se resolver a prote√ß√£o contra a falsifica√ß√£o de endere√ßos MAC usando, por exemplo, MACsec ou 802.1X. </p><br><p>  E se voc√™ colocar um MAC com o s√©timo ou oitavo bit definido como "1", ou seja,  endere√ßo local ou multicast?  Provavelmente, sua rede n√£o prestar√° aten√ß√£o a isso, mas formalmente, esse endere√ßo n√£o estar√° em conformidade com o padr√£o, e √© melhor n√£o faz√™-lo. </p><br><h3 id="kak-rabotaet-randomizaciya">  Como a randomiza√ß√£o funciona </h3><br><p>  Sabemos que, para impedir o rastreamento do movimento de pessoas atrav√©s da varredura no ar e da coleta de sistemas operacionais de smartphones com MAC, a tecnologia de randomiza√ß√£o vem sendo utilizada h√° v√°rios anos.  Teoricamente, ao varrer o ar em busca de redes conhecidas, o smartphone envia um pacote (grupo de pacotes) do tipo de solicita√ß√£o do probe 802.11 com o endere√ßo MAC como fonte: </p><br><p><img src="https://habrastorage.org/webt/ys/xx/sp/ysxxspu7y2giwvvdflhwrgiar-m.gif"></p><br><p>  A randomiza√ß√£o inclu√≠da permite que voc√™ especifique n√£o "piscou", mas algum outro endere√ßo de origem do pacote, mudando a cada ciclo de varredura, a tempo ou de alguma forma.  Isso funciona?  Vejamos as estat√≠sticas dos endere√ßos MAC coletados a partir do ar com o chamado "Wi-Fi Radar": </p><br><div class="scrollable-table"><table><thead><tr><th></th><th>  Amostra inteira </th><th>  Amostragem com apenas 7m de bit </th></tr></thead><tbody><tr><td>  O n√∫mero de registros no banco de dados </td><td>  3920000 </td><td>  305.000 </td></tr><tr><td>  N√∫mero do bit: </td><td>  % bit "1" </td><td>  % bit "1" </td></tr><tr><td>  1 </td><td>  66,1% </td><td>  43,3% </td></tr><tr><td>  2 </td><td>  66,5% </td><td>  43,4% </td></tr><tr><td>  3 </td><td>  31,7% </td><td>  43,8% </td></tr><tr><td>  4 </td><td>  66,6% </td><td>  46,4% </td></tr><tr><td>  5 </td><td>  66,7% </td><td>  45,7% </td></tr><tr><td>  6 </td><td>  31,9% </td><td>  46,4% </td></tr><tr><td>  7 </td><td>  <strong>92,2%</strong> </td><td>  0,0% </td></tr><tr><td>  8 </td><td>  0,0% </td><td>  0,0% </td></tr><tr><td></td><td></td><td></td></tr><tr><td>  9 </td><td>  67,2% </td><td>  47,5% </td></tr><tr><td>  10 </td><td>  32,3% </td><td>  45,6% </td></tr><tr><td>  11 </td><td>  66,9% </td><td>  45,3% </td></tr><tr><td>  12 </td><td>  32,3% </td><td>  46,8% </td></tr><tr><td>  13 </td><td>  32,6% </td><td>  50,1% </td></tr><tr><td>  14 </td><td>  33,0% </td><td>  56,1% </td></tr><tr><td>  15 </td><td>  32,5% </td><td>  45,0% </td></tr><tr><td>  16 </td><td>  67,2% </td><td>  48,3% </td></tr><tr><td></td><td></td><td></td></tr><tr><td>  17 </td><td>  33,2% </td><td>  56,9% </td></tr><tr><td>  18 </td><td>  33,3% </td><td>  56,8% </td></tr><tr><td>  19 </td><td>  33,3% </td><td>  56,3% </td></tr><tr><td>  20 </td><td>  66,8% </td><td>  43,2% </td></tr><tr><td>  21 </td><td>  67,0% </td><td>  46,4% </td></tr><tr><td>  22 </td><td>  32,6% </td><td>  50,1% </td></tr><tr><td>  23 </td><td>  32,9% </td><td>  51,2% </td></tr><tr><td>  24 </td><td>  67,6% </td><td>  52,2% </td></tr><tr><td></td><td></td><td></td></tr><tr><td>  25 </td><td>  49,8% </td><td>  47,8% </td></tr><tr><td>  26 </td><td>  50,0% </td><td>  50,0% </td></tr><tr><td>  27 </td><td>  50,0% </td><td>  50,2% </td></tr><tr><td>  28. </td><td>  50,0% </td><td>  49,8% </td></tr><tr><td>  29 </td><td>  50,0% </td><td>  49,4% </td></tr><tr><td>  30 </td><td>  50,0% </td><td>  50,0% </td></tr><tr><td>  31 </td><td>  50,0% </td><td>  49,7% </td></tr><tr><td>  32. </td><td>  50,0% </td><td>  49,9% </td></tr><tr><td></td><td></td><td></td></tr><tr><td>  33 </td><td>  50,0% </td><td>  49,7% </td></tr><tr><td>  34 </td><td>  50,0% </td><td>  49,6% </td></tr><tr><td>  35 </td><td>  50,0% </td><td>  50,1% </td></tr><tr><td>  36. </td><td>  50,0% </td><td>  49,5% </td></tr><tr><td>  37. </td><td>  50,0% </td><td>  49,9% </td></tr><tr><td>  38. </td><td>  50,0% </td><td>  49,8% </td></tr><tr><td>  39. </td><td>  50,0% </td><td>  49,9% </td></tr><tr><td>  40. </td><td>  50,0% </td><td>  50,1% </td></tr><tr><td></td><td></td><td></td></tr><tr><td>  41. </td><td>  50,0% </td><td>  50,2% </td></tr><tr><td>  42. </td><td>  50,0% </td><td>  50,2% </td></tr><tr><td>  43 </td><td>  50,0% </td><td>  50,1% </td></tr><tr><td>  44 </td><td>  50,0% </td><td>  50,1% </td></tr><tr><td>  45 </td><td>  50,0% </td><td>  50,0% </td></tr><tr><td>  46. </td><td>  50,0% </td><td>  49,8% </td></tr><tr><td>  47 </td><td>  50,0% </td><td>  49,8% </td></tr><tr><td>  48. </td><td>  50,1% </td><td>  50,9% </td></tr></tbody></table></div><br><p>  A imagem √© completamente diferente. </p><br><p>  O oitavo bit do primeiro byte do endere√ßo MAC ainda corresponde √† natureza Unicast do endere√ßo SRC no pacote de solicita√ß√£o de an√°lise. </p><br><p>  O s√©timo bit em 92,2% dos casos √© definido como Local, ou seja,  com uma quantidade razo√°vel de certeza, podemos assumir que apenas tantos endere√ßos coletados s√£o randomizados e menos de 8% s√£o reais.  Al√©m disso, a distribui√ß√£o de bits na OUI para esses endere√ßos reais coincide aproximadamente com os dados da tabela anterior. </p><br><p>  De acordo com a OUI, a qual fabricante os endere√ßos aleat√≥rios pertencem (ou seja, com o s√©timo bit em "1")? </p><br><div class="scrollable-table"><table><thead><tr><th>  Fabricante por OUI </th><th>  Compartilhar entre todos os endere√ßos </th></tr></thead><tbody><tr><td>  n√£o encontrado no banco de dados IEEE </td><td>  62,45% </td></tr><tr><td>  Google Inc. </td><td>  37,54% </td></tr><tr><td>  o resto </td><td>  0,01% </td></tr></tbody></table></div><br><p>  Al√©m disso, todos os endere√ßos aleat√≥rios atribu√≠dos ao Google pertencem a uma OUI com o prefixo <strong>DA: A1: 19</strong> .  Qual √© esse prefixo?  Vamos dar uma olhada no <a href="" rel="nofollow">c√≥digo fonte do Android</a> . </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> MacAddress BASE_GOOGLE_MAC = MacAddress.fromString(<span class="hljs-string"><span class="hljs-string">"da:a1:19:0:0:0"</span></span>);</code> </pre> <br><p>  O Android padr√£o usa um OUI especial e registrado, um dos poucos com o s√©timo bit definido, na busca por redes sem fio. </p><br><h3 id="vychislit-realnyy-mas-iz-randomnogo">  Calcular MAC real de forma aleat√≥ria </h3><br><p>  Vamos olhar l√°: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> VALID_LONG_MASK = (<span class="hljs-number"><span class="hljs-number">1L</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">48</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> LOCALLY_ASSIGNED_MASK = MacAddress.fromString(<span class="hljs-string"><span class="hljs-string">"2:0:0:0:0:0"</span></span>).mAddr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> MULTICAST_MASK = MacAddress.fromString(<span class="hljs-string"><span class="hljs-string">"1:0:0:0:0:0"</span></span>).mAddr; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-function"><span class="hljs-function">MacAddress </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRandomUnicastAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MacAddress base, Random r)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> addr; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (base == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { addr = r.nextLong() &amp; VALID_LONG_MASK; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { addr = (base.mAddr &amp; OUI_MASK) | (NIC_MASK &amp; r.nextLong()); } addr |= LOCALLY_ASSIGNED_MASK; addr &amp;= ~MULTICAST_MASK; MacAddress mac = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MacAddress(addr); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mac.equals(DEFAULT_MAC_ADDRESS)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createRandomUnicastAddress(base, r); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mac; }</code> </pre><br><p>  O endere√ßo inteiro, ou seus pelo menos tr√™s bytes, √© <em>Random.nextLong ()</em> puro.  ‚ÄúRecupera√ß√£o patenteada de MAS real‚Äù - uma fraude.  Com um alto grau de certeza, pode-se esperar que os fabricantes de telefones Android usem outras OUIs n√£o registradas.  N√£o temos fontes para iOS, mas provavelmente um algoritmo semelhante √© usado l√°. </p><br><p>  O exposto acima n√£o cancela a opera√ß√£o de outros mecanismos de des-anonimiza√ß√£o de assinantes de Wi-Fi, com base na an√°lise de outros campos do quadro de solicita√ß√£o do probe ou na correla√ß√£o da frequ√™ncia relativa de solicita√ß√µes enviadas pelo dispositivo.  No entanto, o rastreamento confi√°vel de um assinante por meios externos √© extremamente problem√°tico.  Os dados coletados s√£o mais adequados para analisar a carga m√©dia / pico por local e hor√°rio, com base em grandes n√∫meros, sem refer√™ncia a dispositivos e pessoas espec√≠ficos.  Dados precisos s√£o apenas para aqueles que est√£o "dentro", os pr√≥prios fabricantes de sistemas operacionais m√≥veis, aplicativos instalados. </p><br><p>  O que poderia ser perigoso se algu√©m descobrir o endere√ßo MAC do seu dispositivo?  Para redes com fio e sem fio, um ataque de nega√ß√£o de servi√ßo pode ser organizado.  Al√©m disso, para um dispositivo sem fio, com alguma probabilidade, √© poss√≠vel fixar o momento da apar√™ncia no local em que o sensor est√° instalado.  Ao falsificar o endere√ßo, voc√™ pode tentar ‚Äúfingir‚Äù ser o seu dispositivo, o que s√≥ funcionar√° se medidas de seguran√ßa adicionais n√£o forem aplicadas (autoriza√ß√£o e / ou criptografia).  99,9% das pessoas aqui n√£o t√™m nada com que se preocupar. </p><br><p>  O endere√ßo MAC √© mais complexo do que parece, mas mais simples do que poderia ser. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483670/">https://habr.com/ru/post/pt483670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483660/index.html">Telegram-bot para gerenciamento de infraestrutura</a></li>
<li><a href="../pt483662/index.html">Integra√ß√£o do Cisco Threat Response e Cisco Stealthwatch Enterprise</a></li>
<li><a href="../pt483664/index.html">API funcional Keras no TensorFlow</a></li>
<li><a href="../pt483666/index.html">Sobre Volodya e o ozonizador</a></li>
<li><a href="../pt483668/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n¬∫ 397 (6 a 12 de janeiro de 2020)</a></li>
<li><a href="../pt483674/index.html">Como as redes neurais bin√°rias funcionam e por que elas ser√£o populares em 2020</a></li>
<li><a href="../pt483678/index.html">Desenvolvendo programas Python extremamente r√°pidos</a></li>
<li><a href="../pt483680/index.html">Falhas comuns de programa√ß√£o para evitar</a></li>
<li><a href="../pt483682/index.html">Pacote e desempenho de JavaScript: pr√°ticas recomendadas</a></li>
<li><a href="../pt483684/index.html">PHP Digest No. 171 (1 a 13 de janeiro de 2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>