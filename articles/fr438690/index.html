<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëô üåë ü§´ Si le module CRT de Pascal √©tait en JavaScript ‚èØÔ∏è üëêüèª üñ§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une tentative d'impl√©mentation du module CRT bien connu utilis√© en Pascal en JavaScript. Ce qui en est sorti et ce qui ne l‚Äôest pas, je vais vous le d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Si le module CRT de Pascal √©tait en JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438690/">  Une tentative d'impl√©mentation du module CRT bien connu utilis√© en Pascal en JavaScript.  Ce qui en est sorti et ce qui ne l‚Äôest pas, je vais vous le dire <br><a name="habracut"></a><br><h3>  Entr√©e </h3><br>  Ma connaissance de la programmation a commenc√© en 8e ann√©e, lorsque j'ai appris pour la premi√®re fois dans une le√ßon d'informatique ce qu'est Pascal et quelles opportunit√©s il offre.  Puis Turbo Pascal a √©t√© install√© sur les ordinateurs des √©coles, bien que le professeur d'informatique ait longtemps voulu y mettre PascalABC.NET.  Bien s√ªr, tout a commenc√© avec les conclusions banales de la ligne dans la console, mon activit√© visait principalement une excellente pr√©paration √† l'OGE.  Aucun module n'a √©t√© √©tudi√©, car personne ne l'avait demand√© √† l'examen. <br><br>  Mais m√™me quand je pouvais ¬´subordonner¬ª la fen√™tre de la console √† moi-m√™me, afficher tout ce que je voulais l√†-bas, faire des calculs, accepter les entr√©es de l'utilisateur, j'√©tais surpris de voir √† quel point c'√©tait cool! <br><br>  Mais le temps passe, la vie change: l'examen r√©ussi, l'examen r√©ussi, l'admission r√©ussie √† l'universit√©.  Pendant tout ce temps, j'ai √©tudi√© de nouvelles langues avec beaucoup d'int√©r√™t, ce qui me permet d'√©crire des sites en toute s√©curit√©, que ce soit sur le devant ou sur le dos.  Pour une raison quelconque, la programmation Web m'int√©resse le plus. <br><br><h3>  Comment est-il arriv√© au CRT </h3><br>  De retour √† l'√©cole, j'ai √©tudi√© l'un des modules Pascal int√©ressants appel√© CRT.  En fait, il n'y a rien de compliqu√© dedans, l'ensemble des commandes est, en fait, petit, mais elles vous ont permis de faire de nouvelles choses dans la fen√™tre de la console: d√©placer le curseur sur un √©cran 80x25 (taille d'√©cran DOS), changer l'arri√®re-plan et la couleur du texte, jouer le son d'une certaine fr√©quence et dur√©e.  Il √©tait possible d'y cr√©er des jeux ASCII √† part enti√®re, qui ne prenaient pratiquement pas de place sur le disque dur en raison de leur petite taille. <br><br>  Et maintenant, apr√®s plusieurs ann√©es, j'ai d√©cid√©, en fonction de l'int√©r√™t, d'√©crire un petit fichier js, une fois connect√© avec lequel vous pouvez travailler avec la fen√™tre du navigateur comme avec la fen√™tre de la console.  Je dirai tout de suite qu'il est tr√®s difficile, si possible, de restaurer toutes les commandes de module √† leur int√©grit√© et leur s√©curit√©.  Pourtant, JavaScript n'est pas Pascal, √† cause de cela il y a quelques fonctionnalit√©s ici. <br><br><h3>  L'id√©e elle-m√™me </h3><br>  Le projet a une structure tr√®s simple de trois fichiers: <br><br><ul><li>  <b>crt.js</b> - fichier avec fonctions √† connecter au fichier html </li><li>  <b>index.html</b> - fichier - la base qui doit √™tre ouverte dans le navigateur </li><li>  <b>user.js</b> - un fichier vide dans lequel le programmeur doit √©crire son code </li></ul><br>  Tout d'abord, je nommerai les √©quipes actuellement mises en ≈ìuvre, puis je montrerai comment elles fonctionnent. <br><br>  Les commandes impl√©ment√©es: <br><br><ul><li>  <b>gotoxy (x, y)</b> - d√©place le curseur sur les coordonn√©es </li><li>  <b>write (str)</b> - affiche une cha√Æne √† l'√©cran </li><li>  <b>clrscr ()</b> - <b>efface</b> l'√©cran avec un arri√®re-plan pr√©s√©lectionn√© et d√©place le curseur sur les coordonn√©es 1,1 </li><li>  <b>textcolor (int)</b> - change la couleur du texte </li><li>  <b>textbackground (int)</b> - change la couleur d'arri√®re-plan </li><li>  <b>son (fr, 1000)</b> - jouez un son avec une fr√©quence de fr et une dur√©e de 1 seconde </li></ul><br>  Montrons un exemple du ¬´module¬ª: <br><br>  Code: <br><br><img src="https://habrastorage.org/webt/wy/sq/_b/wysq_bhpgj0xgf4n2poik6sz5as.png" alt="image"><br><br>  R√©sultat: <br><br><img src="https://habrastorage.org/webt/f5/k4/va/f5k4va4q42wu6sopkl1-zo7ihjy.png" alt="image"><br><br>  Il peut vous sembler que les lettres sont distinctes les unes des autres.  Oui, √ßa l'est.  Le fait est qu'ici le contenu de la page est divis√© en parties par divs.  Rappelons-nous la taille de la fen√™tre DOS (80x25).  Alors, combien y a-t-il de divs?  C'est vrai, 2000. Chacun d'eux est de taille √©gale.  En g√©n√©ral, lorsque vous d√©marrez une page, la fonction suivante est automatiquement ex√©cut√©e: <br><br><img src="https://habrastorage.org/webt/kl/bg/ne/klbgneghn5wypaqndgk4uzi-kda.png" alt="image"><br><br>  J'ai sp√©cifiquement post√© ce travail sur JS.  Je voulais que le fichier html soit propre et clair. <br><br><img src="https://habrastorage.org/webt/2_/lg/kp/2_lgkpnwnfahl5iyhjzwrl5qkg4.png" alt="image"><br><br>  Oui, √† cause de ce sch√©ma, il y a un effet, lorsque je d√©marre la page sur un PC faible, je pense que seul le chargement se produira pendant 4-5 secondes, car le cycle est assez compliqu√©.  Je ne vois pas l'int√©r√™t de commenter sur chaque ligne, les principales actions de la photo sont expliqu√©es.  Chaque fois que nous g√©n√©rons un div avec certains id et param√®tres et les ajoutons au corps.  Chaque div <b>ne</b> contient <b>qu'un seul caract√®re</b> , comme c'√©tait par analogie sous DOS (une cellule - un caract√®re). <br><br>  Le travail avec les coordonn√©es et les couleurs est bas√© sur ces variables: <br><br><img src="https://habrastorage.org/webt/9p/tt/i1/9ptti1c4sxppjds3nxkog-masie.png" alt="image"><br><br>  Les commandes <b>gotoxy (x, y), textcolor (int), textbackground (int)</b> changent simplement le contenu des variables xnow, ynow, color, bgcolor. <br><br>  Avec les fleurs, il y a des points int√©ressants.  En DOS, comme nous le savons, il √©tait possible de choisir une couleur dans un ensemble dans lequel il n'y avait que 16 couleurs.  En Pascal, vous pouvez acc√©der √† la couleur en utilisant le num√©ro (0-15).  De plus, sous DOS, l'arri√®re-plan a √©t√© s√©lectionn√© uniquement parmi les huit premi√®res couleurs, et le texte parmi les 16. Dans Windows sous PascalABC.NET, lorsque le module est connect√©, l'arri√®re-plan peut √™tre modifi√© √† partir des 16 couleurs.  Peut-√™tre que tout le monde n'a pas compris ce que je voulais transmettre maintenant, mais expliquons avec un exemple: <br><br><img src="https://habrastorage.org/webt/nu/cw/6v/nucw6vpmuqfohvykokpxgoepthu.png" alt="image"><br><br>  Toutes les couleurs utilis√©es dans la console sont r√©pertori√©es ici.  Si nous essayons de changer l'arri√®re-plan sous DOS en vert clair (10), l'arri√®re-plan deviendra vert (2), tandis que la police deviendra la couleur que nous voulions.  Pour une raison quelconque, la possibilit√© de changer l'arri√®re-plan sous DOS (Free Pascal) est limit√©e √† huit couleurs. <br><br>  Et maintenant sur la commande clrscr, qui a effac√© l'√©cran avec une couleur sp√©cifique.  Dans JS, je l'ai impl√©ment√© comme ceci: <br><br><img src="https://habrastorage.org/webt/ua/tb/fj/uatbfjipqcspm1vl68wgmhxiytc.png" alt="image"><br><br>  Il n'y a rien de compliqu√© ici.  Nous parcourons toutes les divs, o√π dans chaque contenu nous le rendons vide (car dans les caract√®res DOS sont effac√©s) et changeons l'arri√®re-plan en la couleur s√©lectionn√©e √† l'avance par la commande textbackground.  Et, bien s√ªr, n'oubliez pas de remettre le curseur en position 1.1 (le coin sup√©rieur gauche de la fen√™tre). <br><br>  La chose la plus int√©ressante est la sortie de la cha√Æne avec la commande d' <b>√©criture</b> .  Oui, je me souviens qu‚Äôil y a encore des √©critures, mais je pensais qu‚Äôune commande serait suffisante, car dans cette situation, nous ne serons pas int√©ress√©s √† d√©placer le curseur sur une nouvelle ligne. <br><br>  R√©alisation: <br><br><img src="https://habrastorage.org/webt/xj/c3/wy/xjc3wyi72fuarpj8unmj3fx_3-k.png" alt="image"><br><br>  Ici, il √©tait n√©cessaire de prot√©ger le navigateur contre les erreurs, au cas o√π la ligne utilisateur allait d√©passer les limites de la fen√™tre (et il n'y a pas de div!).  Par cons√©quent, il a √©t√© d√©cid√© de faire une boucle avec coupure de protection. <br><br>  Chaque lettre doit occuper la cellule enti√®rement allou√©e, donc la taille de la police est r√©gie par la taille de la div.  De plus, n'oubliez pas que l'arri√®re-plan derri√®re les lettres doit changer pour celui qui a √©t√© d√©fini par la commande textbackground. <br><br>  Et enfin, la derni√®re fonction est saine.  Ici, malheureusement, j'ai d√ª modifier le sch√©ma de travail de l'√©quipe, car il est difficile de mettre en ≈ìuvre la cha√Æne son - retard - nosound.  Soit dit en passant, je n'ai pas encore pu impl√©menter de d√©lai, il n'y a pas d'id√©es, car setTimeout ne convient pas ici. <br><br>  On se souvient que pour sortir, par exemple, du son avec une fr√©quence de 200 Hz et une dur√©e de 1 seconde, il faut √©crire le code: <br><br><pre><code class="plaintext hljs">sound(200); delay(1000); nosound;</code> </pre> <br>  Dans JS, je devais faire ceci: <br><br><img src="https://habrastorage.org/webt/jd/lw/jc/jdlwjc-mogc_ofeoyu4ff1u7gp0.png" alt="image"><br><br>  Mais alors √ßa marche!  R√©alisation: <br><br><img src="https://habrastorage.org/webt/wx/sx/zf/wxsxzfduayyubqpl9oi1uglisha.png" alt="image"><br><br>  Je n'ai jamais utilis√© une fonction aussi sp√©cifique dans mon activit√©.  Elle a d√ª jeter un ≈ìil √† la documentation.  Si quelqu'un veut v√©rifier le travail, alors faites attention, apr√®s une √©coute forte, les oreilles peuvent faire mal. <br><br>  Certes, lorsque vous utilisez cette fonction, Chrome, pour des raisons √©videntes, commence √† jurer: <br><br><img src="https://habrastorage.org/webt/ot/ft/y6/otfty6yghgvgsaaucicrukuw99m.png" alt="image"><br><br>  J'ai essay√© de r√©soudre le probl√®me avec setTimeout, mais cela ne fonctionne pas toujours. <br><br>  Mais si vous cliquez rapidement sur la page pendant le chargement, le son est reproduit, mais c'est une histoire compl√®tement diff√©rente. <br><br><h3>  Conclusion </h3><br>  M√™me apr√®s la mise en page active des sites, je veux essayer d'√©crire quelque chose d'inhabituel, m√™me si cela n'a aucun avantage pratique.  Pascal avec son module CRT a vraiment eu un effet sur moi √† l'√©poque, ce qui m'a encourag√© √† apprendre davantage les langages de programmation.  Ou peut-√™tre devriez-vous √©crire quelque chose en style ASCII? <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>Juste au cas o√π, l'a publi√© sur GitHub</b></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438690/">https://habr.com/ru/post/fr438690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438674/index.html">"Rostec" a commenc√© √† vendre le t√©l√©phone de bureau "Cruise-K" pour 85 000 roubles</a></li>
<li><a href="../fr438676/index.html">Plugin Webinaire 3CX pour votre site WordPress</a></li>
<li><a href="../fr438678/index.html">Des applications de Google Play avec des millions de t√©l√©chargements ont vol√© des photos d'utilisateurs et du porno annonc√©</a></li>
<li><a href="../fr438682/index.html">Lancement du jubil√© de l'astronautique iranienne</a></li>
<li><a href="../fr438688/index.html">Bus PCIe 5.0 pr√™t pour la mise en service</a></li>
<li><a href="../fr438692/index.html">Soucoupe volante inertielle. Poussez tout</a></li>
<li><a href="../fr438694/index.html">Comment le processus de support du site a chang√© au cours des vingt derni√®res ann√©es</a></li>
<li><a href="../fr438696/index.html">Dispositif de compilateur Swift. 3e partie</a></li>
<li><a href="../fr438698/index.html">Trag√©die systemd</a></li>
<li><a href="../fr438700/index.html">Carte des accidents</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>