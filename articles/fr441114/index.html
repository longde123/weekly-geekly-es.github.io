<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“ª ğŸ™ğŸ¼ ğŸ’· Programmation relationnelle: douleur, intÃ©rÃªt et douleur Ã  nouveau ğŸ˜¦ âœ‹ğŸ» ğŸ’ƒğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le post prÃ©cÃ©dent, nous avons expliquÃ© en dÃ©tail ce que nous enseignons aux Ã©tudiants dans le domaine de la "programmation industrielle". Pour ce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programmation relationnelle: douleur, intÃ©rÃªt et douleur Ã  nouveau</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hsespb/blog/441114/"> Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">post</a> prÃ©cÃ©dent, nous avons expliquÃ© en dÃ©tail ce que nous enseignons aux Ã©tudiants dans le domaine de la "programmation industrielle".  Pour ceux dont le domaine d'intÃ©rÃªt se situe dans un domaine plus thÃ©orique, par exemple, attirÃ© par les nouveaux paradigmes de programmation ou les mathÃ©matiques abstraites utilisÃ©es dans la recherche thÃ©orique sur la programmation, il existe une autre spÃ©cialisation - Â«Langages de programmationÂ». <br><br>  Aujourd'hui je vais vous parler de mes recherches dans le domaine de la programmation relationnelle, que je fais Ã  l'universitÃ© et en tant qu'Ã©tudiant-chercheur au laboratoire des outils linguistiques JetBrains Research. <br><br>  Qu'est-ce que la programmation relationnelle?  Habituellement, nous exÃ©cutons une fonction avec des arguments et obtenons le rÃ©sultat.  Et dans le cas relationnel, vous pouvez faire le contraire: corriger le rÃ©sultat et un argument, et obtenir le deuxiÃ¨me argument.  L'essentiel est d'Ã©crire le code correctement et d'Ãªtre patient et d'avoir un bon cluster. <br><br><img src="https://habrastorage.org/webt/_u/8b/t2/_u8bt2bceznm8e2ujbrvhwn8awy.jpeg"><br><a name="habracut"></a><br><h2>  Ã€ propos de moi </h2><br>  Je m'appelle Dmitry Rozplohas, je suis un Ã©tudiant de premiÃ¨re annÃ©e du HSE de Saint-PÃ©tersbourg, et l'annÃ©e derniÃ¨re j'ai obtenu mon diplÃ´me du programme de baccalaurÃ©at de l'UniversitÃ© acadÃ©mique dans le domaine des Â«langages de programmationÂ».  Depuis la troisiÃ¨me annÃ©e d'Ã©tudes de premier cycle, je suis Ã©galement Ã©tudiante de recherche au laboratoire d'outils linguistiques JetBrains Research. <br><br><h2>  Programmation relationnelle </h2><br><h3>  Faits gÃ©nÃ©raux </h3><br>  La programmation relationnelle, c'est quand, au lieu de fonctions, vous dÃ©crivez la relation entre les arguments et le rÃ©sultat.  Si le langage est affinÃ© pour cela, vous pouvez obtenir certains bonus, par exemple, la possibilitÃ© d'exÃ©cuter la fonction dans le sens opposÃ© (restaurer les valeurs possibles des arguments en consÃ©quence). <br><br>  En gÃ©nÃ©ral, cela peut Ãªtre fait dans n'importe quel langage logique, mais l'intÃ©rÃªt pour la programmation relationnelle est apparu simultanÃ©ment avec l'avÃ¨nement d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">miniKanren en</a> langage logique pur minimaliste il y a une dizaine d'annÃ©es, ce qui a permis de dÃ©crire et d'utiliser commodÃ©ment de telles relations. <br><br>  Voici certains des cas d'utilisation les plus avancÃ©s: vous pouvez Ã©crire un vÃ©rificateur de preuve et l'utiliser pour trouver des preuves ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Near et al., 2008</a> ) ou crÃ©er un interprÃ©teur pour une langue et l'utiliser pour gÃ©nÃ©rer des programmes de suite de tests ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Byrd et al., 2017</a> ). <br><br><h3>  Exemple de syntaxe et de jouet </h3><br>  miniKanren est un petit langage; seules les constructions mathÃ©matiques de base sont utilisÃ©es pour dÃ©crire les relations.  Il s'agit d'un langage intÃ©grÃ©, ses primitives sont une bibliothÃ¨que pour certains langages externes et de petits programmes miniKanren peuvent Ãªtre utilisÃ©s dans un programme dans une autre langue. <br><br>  Langues Ã©trangÃ¨res adaptÃ©es Ã  miniKanren, tout un tas.  Initialement, il y avait Scheme, nous travaillons avec la version pour Ocaml ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OCanren</a> ), et la liste complÃ¨te peut Ãªtre consultÃ©e sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">minikanren.org</a> .  Les exemples de cet article concerneront Ã©galement OCanren.  De nombreuses implÃ©mentations ajoutent des fonctions d'assistance, mais nous nous concentrerons uniquement sur le langage principal. <br><br>  CommenÃ§ons par les types de donnÃ©es.  Classiquement, ils peuvent Ãªtre divisÃ©s en deux types: <br><br><ul><li>  Les constantes sont des donnÃ©es du langage dans lequel nous sommes intÃ©grÃ©s.  ChaÃ®nes, nombres, mÃªme tableaux.  Mais pour le miniKanren de base, tout cela est une boÃ®te noire, l'Ã©galitÃ© des constantes ne peut Ãªtre vÃ©rifiÃ©e. <br></li><li>  Un Â«termeÂ» est un tuple de plusieurs Ã©lÃ©ments.  Couramment utilisÃ© de la mÃªme maniÃ¨re que les constructeurs de donnÃ©es dans Haskell: constructeur de donnÃ©es (chaÃ®ne) plus zÃ©ro ou plusieurs paramÃ¨tres.  OCanren utilise des constructeurs de donnÃ©es rÃ©guliers d'OCaml. <br></li></ul><br>  Par exemple, si nous voulons travailler avec des tableaux dans miniKanren lui-mÃªme, alors il doit Ãªtre dÃ©crit en termes de termes similaires aux langages fonctionnels - comme une liste liÃ©e individuellement.  Une liste est soit une liste vide (indiquÃ©e par un terme simple), soit une paire du premier Ã©lÃ©ment de la liste (Â«tÃªteÂ») et d'autres Ã©lÃ©ments (Â«queueÂ»). <br><br><pre><code class="plaintext hljs">let emptyList = Nil let list_123 = Cons (1, Cons (2, Cons (3, Nil)))</code> </pre> <br>  Un programme miniKanren est la relation entre certaines variables.  Au dÃ©marrage, le programme donne toutes les valeurs possibles des variables sous une forme gÃ©nÃ©rale.  Souvent, les implÃ©mentations vous permettent de limiter le nombre de rÃ©ponses dans la sortie, par exemple, ne trouvez que la premiÃ¨re - la recherche ne s'arrÃªte pas toujours aprÃ¨s avoir trouvÃ© toutes les solutions. <br><br>  Vous pouvez Ã©crire plusieurs relations dÃ©finies les unes par rapport aux autres et mÃªme appelÃ©es de maniÃ¨re rÃ©cursive en tant que fonctions.  Par exemple, ci-dessous, nous au lieu de la fonction <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>a</mi><mi>v</mi><mi>e</mi><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.395ex" height="2.66ex" viewBox="0 -832 8781.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-28" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-2C" x="4046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="4491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-29" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-2192" x="5587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="6866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-76" x="7395" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-65" x="7881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-63" x="8347" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â†’</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> append (a, b) â†’ avec </script>  dÃ©finir la relation <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.502ex" height="2.66ex" viewBox="0 -832 6674.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-6F" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-28" x="3612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-2C" x="4531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="4976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-2C" x="5406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-63" x="5851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-29" x="6284" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> appendo (a, b, c) </script>  : liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.007ex" height="1.455ex" viewBox="0 -520.7 433.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-63" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> c </script>  est une concatÃ©nation de listes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> a </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> b </script>  .  Les fonctions qui renvoient des relations se terminent traditionnellement par un Â«oÂ» pour les distinguer des fonctions ordinaires. <br><br>  Une relation est Ã©crite comme une dÃ©claration concernant ses arguments.  Nous avons <b>quatre opÃ©rations de base</b> : <br><br><ul><li>  Unification ou Ã©galitÃ© (===) de deux termes, les termes peuvent inclure des variables.  Par exemple, vous pouvez Ã©crire la relation Â«liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> l </script>  se compose d'un Ã©lÃ©ment <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> x </script>  ": <br><br><pre> <code class="plaintext hljs">let isSingletono xl = l === Cons (x, Nil)</code> </pre></li><li>  Conjonction (logique Â«etÂ») et disjonction (logique Â«ouÂ») - comme dans la logique ordinaire.  OCanren sont appelÃ©s &amp;&amp;&amp; et |||.  Mais il n'y a fondamentalement aucun dÃ©ni logique dans MiniKanren. <br></li><li>  Ajout de nouvelles variables.  En logique, c'est un quantificateur d'existence.  Par exemple, pour vÃ©rifier la liste de non-vide, vous devez vÃ©rifier que la liste se compose d'une tÃªte et d'une queue.  Ce ne sont pas des arguments de la relation, vous devez donc crÃ©er de nouvelles variables: <br><br><pre> <code class="plaintext hljs">let nonEmptyo l = fresh (ht) (l === Cons (h, t))</code> </pre></li></ul><br>  Une relation peut s'invoquer rÃ©cursivement.  Par exemple, vous devez dÃ©finir l'Ã©lÃ©ment "relation" <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> x </script>  se trouve sur la liste. "  Nous allons rÃ©soudre ce problÃ¨me en analysant des cas triviaux, comme dans les langages fonctionnels: <br><br><ol><li>  Ou la tÃªte de liste est <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> x </script><br></li><li>  Soit <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> x </script>  se trouve dans la queue <br></li></ol><br><pre> <code class="plaintext hljs">let membero lx = fresh (ht) ( (l === Cons (h, t)) &amp;&amp;&amp; (x === h ||| membero tx) )</code> </pre><br>  La version de base du langage est construite sur ces quatre opÃ©rations.  Il existe Ã©galement des extensions qui vous permettent d'utiliser d'autres opÃ©rations.  Le plus utile d'entre eux est la contrainte de dÃ©sÃ©quilibre pour fixer l'inÃ©galitÃ© de deux termes (= / =). <br><br>  MalgrÃ© le minimalisme, miniKanren est un langage assez expressif.  Par exemple, regardez la concatÃ©nation relationnelle de deux listes.  La fonction de deux arguments se transforme en une triple relation " <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.227ex" height="2.057ex" viewBox="0 -780.1 959 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="529" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> ab </script>  est une concatÃ©nation de listes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> a </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> b </script>  ". <br><br><pre> <code class="plaintext hljs">let appendo ab ab = (a === Nil &amp;&amp;&amp; ab === b) ||| (fresh (ht tb) (*  :  fresh   &amp;&amp;&amp; *) (a = Cons (h, t)) (appendo tb tb) (ab === Cons (h, tb)))</code> </pre><br>  La solution n'est pas structurellement diffÃ©rente de la faÃ§on dont nous l'Ã©cririons dans un langage fonctionnel.  Nous analysons deux cas unis par une clause: <br><br><ol><li>  Si la premiÃ¨re liste est vide, la deuxiÃ¨me liste et le rÃ©sultat de la concatÃ©nation sont Ã©gaux. <br></li><li>  Si la premiÃ¨re liste n'est pas vide, alors nous l'analysons dans la tÃªte et la queue et construisons le rÃ©sultat en utilisant un appel rÃ©cursif de la relation. <br></li></ol><br>  Nous pouvons faire une demande Ã  cette relation, en fixant le premier et le deuxiÃ¨me argument - nous obtenons la concatÃ©nation des listes: <br><br><pre> <code class="plaintext hljs">run 1 (Î» q -&gt; appendo (Cons (1, Cons (2, Nil))) (Cons (3, Cons (4, Nil))) q)</code> </pre> <br>  â‡’ <br><pre> <code class="plaintext hljs">q = Cons (1, Cons (2, Cons (3, Cons (4, Nil))))</code> </pre> <br>  Nous pouvons corriger le dernier argument - nous obtenons toutes les partitions de cette liste en deux. <br><br><pre> <code class="plaintext hljs">run 4 (Î» qr -&gt; appendo qr (Cons (1, Cons (2, Cons (3, Nil)))))</code> </pre> <br>  â‡’ <br><pre> <code class="plaintext hljs">q = Nil, r = Cons (1, Cons (2, Cons (3, Nil))) | q = Cons (1, Nil), r = Cons (2, Cons (3, Nil)) | q = Cons (1, Cons (2, Nil)), r = Cons (3, Nil) | q = Cons (1, Cons (2, Cons (3, Nil))), r = Nil</code> </pre><br>  Vous pouvez faire autre chose.  Un exemple lÃ©gÃ¨rement plus non standard, dans lequel nous ne corrigeons qu'une partie des arguments: <br><br><pre> <code class="plaintext hljs">run 1 (Î» qr -&gt; appendo (Cons (1, Cons (q, Nil))) r (Cons (1, Cons (2, Cons (3, Cons (4, Nil))))))</code> </pre> <br>  â‡’ <br><pre> <code class="plaintext hljs">q = 2, r = Cons (3, Cons (4, Nil))</code> </pre> <br><br><h3>  Comment Ã§a marche </h3><br>  Du point de vue de la thÃ©orie, il n'y a rien d'impressionnant ici: vous pouvez toujours simplement commencer Ã  rechercher toutes les options possibles pour tous les arguments, en vÃ©rifiant pour chaque ensemble s'ils se comportent par rapport Ã  une fonction / relation donnÃ©e comme nous le souhaiterions (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"The British Museum Algorithm"</a> ) .  Il est intÃ©ressant de noter qu'ici, la recherche (en d'autres termes, la recherche d'une solution) utilise uniquement la structure de la relation dÃ©crite, grÃ¢ce Ã  laquelle elle peut Ãªtre relativement efficace dans la pratique. <br><br>  La recherche est en relation avec l'accumulation d'informations sur diverses variables dans l'Ã©tat actuel.  Soit nous ne savons rien de chaque variable, soit nous savons comment elle est exprimÃ©e en termes, valeurs et autres variables.  Par exemple: <br><br> <code>b = Cons (x, y) <br> c = Cons (10, z) <br> x = ? <br> y = ? <br> z = ? <br></code> <br>  En passant par l'unification, nous examinons deux termes avec ces informations Ã  l'esprit et mettons Ã  jour l'Ã©tat ou terminons la recherche si deux termes ne peuvent pas Ãªtre unifiÃ©s.  Par exemple, en complÃ©tant l'unification b = c, nous obtenons de nouvelles informations: x = 10, y = z.  Mais l'unification b = Nil provoquera une contradiction. <br><br>  Nous recherchons les conjoints de maniÃ¨re sÃ©quentielle (afin que les informations s'accumulent), et dans une disjonction, nous divisons la recherche en deux branches parallÃ¨les et continuons, en alternant les Ã©tapes en elles - c'est ce que l'on appelle la recherche entrelacÃ©e.  GrÃ¢ce Ã  cette alternance, la recherche est terminÃ©e - chaque solution appropriÃ©e sera trouvÃ©e aprÃ¨s un temps limitÃ©.  Par exemple, dans le langage Prolog, ce n'est pas le cas.  Il fait quelque chose comme une exploration profonde (qui peut s'accrocher Ã  une branche infinie), et la recherche entrelacÃ©e est essentiellement une modification de l'analyse large dÃ©licate. <br><br>  Voyons maintenant comment fonctionne la premiÃ¨re requÃªte de la section prÃ©cÃ©dente.  Puisque appendo a des appels rÃ©cursifs, nous ajouterons des index aux variables pour les distinguer.  La figure ci-dessous montre l'arbre d'Ã©numÃ©ration.  Les flÃ¨ches indiquent le sens de diffusion de l'information (Ã  l'exception du retour de rÃ©cursivitÃ©).  Entre les disjonctions, l'information n'est pas distribuÃ©e, et entre les conjonctions est distribuÃ©e de gauche Ã  droite. <br><br><img src="https://habrastorage.org/webt/3j/np/fg/3jnpfgkkgbyyf5-or5g_noicxg4.png"><br><br><ol><li>  Nous commenÃ§ons par un appel externe Ã  appendo.  La branche gauche de la disjonction dÃ©cÃ¨de en raison d'une controverse: liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> a </script>  pas vide. <br></li><li>  Dans la branche de droite, des variables auxiliaires sont introduites, qui sont ensuite utilisÃ©es pour Â«analyserÂ» la liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.284ex" height="1.696ex" viewBox="0 -520.7 983.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-31" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-15"> a_1 </script>  sur la tÃªte et la queue. <br></li><li>  AprÃ¨s cela, l'appel rÃ©cursif appendo se produit pour a = [2], b = [3, 4], ab = ?, dans lequel des opÃ©rations similaires se produisent. <br></li><li>  Mais dans le troisiÃ¨me appel Ã  appendo, nous avons dÃ©jÃ  a = [], b = [3,4], ab =?, Puis la disjonction gauche fonctionne, aprÃ¨s quoi nous obtenons les informations ab = b.  Mais dans la bonne branche, il y a une contradiction. <br></li><li>  Nous pouvons maintenant Ã©crire toutes les informations disponibles et restaurer la rÃ©ponse en substituant les valeurs des variables: <br><br> <code>a_1 = [1, 2] <br> b_1 = [3, 4] <br> ab_1 = Cons h_1 tb_1 <br> h_1 = 1 <br> a_2 = t_1 = [2] <br> b_2 = b_1 = [3, 4] <br> ab_2 = tb_1 = Cons h_2 tb_2 <br> h_2 = 2 <br> a_3 = t_2 = Nil <br> b_3 = b_2 = b_1 = [3, 4] <br> ab_3 = tb_2 = b_3 = [3, 4] <br></code> <br></li><li>  Il s'ensuit que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.282ex" height="2.298ex" viewBox="0 -780.1 1412.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un</font></font></mi><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-16"> ab_1 </script>  = Contre (1, Contre (2, [3, 4])) = [1, 2, 3, 4], selon les besoins. <br></li></ol><br><br><h2>  Ce que j'ai fait au premier cycle </h2><br><h3>  Tout ralentit </h3><br>  Comme toujours: ils vous promettent que tout sera super dÃ©claratif, mais en rÃ©alitÃ©, vous devez vous adapter Ã  la langue et tout Ã©crire de maniÃ¨re spÃ©ciale (en gardant Ã  l'esprit comment tout sera exÃ©cutÃ©) afin qu'au moins quelque chose fonctionne, Ã  l'exception des exemples les plus simples.  C'est dÃ©cevant. <br><br>  L'un des premiers problÃ¨mes auxquels est confrontÃ© un programmeur dÃ©butant de miniKanren est qu'il dÃ©pend beaucoup de l'ordre dans lequel vous dÃ©crivez les conditions (conjoints) dans le programme.  Avec une seule commande, tout va bien, mais deux conjonctions ont Ã©tÃ© Ã©changÃ©es et tout a commencÃ© Ã  fonctionner trÃ¨s lentement ou n'a pas fini du tout.  C'est inattendu. <br><br>  MÃªme dans l'exemple avec appendo, le lancement dans la direction opposÃ©e (gÃ©nÃ©rant la division de la liste en deux) ne se termine pas sauf si vous spÃ©cifiez explicitement le nombre de rÃ©ponses que vous souhaitez (alors la recherche se terminera une fois le nombre requis trouvÃ©). <br><br>  Supposons que nous fixions les variables d'origine comme suit: a = ?, B = ?, Ab = [1, 2, 3] (voir la figure ci-dessous) Dans la deuxiÃ¨me branche, ces informations ne seront en aucun cas utilisÃ©es lors d'un appel rÃ©cursif (la variable ab et les restrictions sur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>h</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.393ex" height="2.298ex" viewBox="0 -780.1 1030.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-31" x="815" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> h_1 </script>  et <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.891ex" height="2.298ex" viewBox="0 -780.1 1244.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> tb_1 </script>  n'apparaissent qu'aprÃ¨s cet appel).  Par consÃ©quent, au premier appel rÃ©cursif, tous ses arguments seront des variables libres.  Cet appel gÃ©nÃ©rera toutes sortes de triplets Ã  partir de deux listes et de leur concatÃ©nation (et cette gÃ©nÃ©ration ne se terminera jamais), puis parmi eux seront choisis ceux pour lesquels le troisiÃ¨me Ã©lÃ©ment s'est avÃ©rÃ© exactement la faÃ§on dont nous avons besoin. <br><br><img src="https://habrastorage.org/webt/pg/gn/jg/pggnjghrld84iyiybo9au0nyilk.png"><br><br>  Tout n'est pas aussi mauvais que cela puisse paraÃ®tre Ã  premiÃ¨re vue, car nous allons trier ces triplets en grands groupes.  Les listes avec la mÃªme longueur mais des Ã©lÃ©ments diffÃ©rents ne diffÃ¨rent pas du point de vue de la fonction, donc elles tomberont dans une solution - il y aura des variables libres Ã  la place des Ã©lÃ©ments.  NÃ©anmoins, nous allons toujours trier toutes les longueurs de liste possibles, bien que nous n'en ayons besoin que d'une seule, et nous savons laquelle.  Il s'agit d'une utilisation trÃ¨s irrationnelle (non-utilisation) des informations dans la recherche. <br><br>  Cet exemple spÃ©cifique est facile Ã  corriger: il vous suffit de dÃ©placer l'appel rÃ©cursif Ã  la fin et tout fonctionnera comme il se doit.  Avant l'appel rÃ©cursif, l'unification avec la variable ab aura lieu et l'appel rÃ©cursif sera effectuÃ© Ã  partir de la fin de la liste donnÃ©e (comme une fonction rÃ©cursive normale).  Cette dÃ©finition avec un appel rÃ©cursif Ã  la fin fonctionnera bien dans toutes les directions: Ã  l'appel rÃ©cursif, nous parvenons Ã  accumuler toutes les informations possibles sur les arguments. <br><br>  Cependant, dans tout exemple lÃ©gÃ¨rement plus complexe, lorsqu'il y a plusieurs appels significatifs, un ordre spÃ©cifique pour lequel tout ira bien n'existe pas.  L'exemple le plus simple: dÃ©velopper une liste en utilisant la concatÃ©nation.  Nous corrigeons le premier argument - nous avons besoin de cet ordre particulier, nous corrigeons le second - nous devons Ã©changer les appels.  Sinon, la recherche est longue et la recherche ne s'arrÃªte pas. <br><br><pre> <code class="plaintext hljs">reverso x xr = (x === Nil &amp;&amp;&amp; xr == Nil) ||| (fresh (ht tr) (x === Cons (h, t)) (reverso t tr) (appendo tr (Cons (h, Nil)) xr))</code> </pre><br>  En effet, l'entrelacement des processus de recherche se conjugue de maniÃ¨re sÃ©quentielle, et personne ne pouvait penser Ã  comment le faire diffÃ©remment sans perdre une efficacitÃ© acceptable, bien qu'ils aient essayÃ©.  Bien sÃ»r, toutes les solutions seront un jour trouvÃ©es, mais avec le mauvais ordre, elles seront recherchÃ©es de maniÃ¨re si irrÃ©aliste qu'il n'y a aucun sens pratique Ã  cela. <br><br>  Il existe des techniques pour Ã©crire des programmes pour Ã©viter ce problÃ¨me.  Mais beaucoup d'entre eux nÃ©cessitent des compÃ©tences et une imagination particuliÃ¨res pour Ãªtre utilisÃ©s, et le rÃ©sultat est de trÃ¨s gros programmes.  Un exemple est le terme technique de dÃ©limitation de taille et la dÃ©finition de la division binaire avec le reste par multiplication avec son aide.  Au lieu d'Ã©crire bÃªtement une dÃ©finition mathÃ©matique <br><br><pre> <code class="plaintext hljs">divo nmqr = (fresh (mq) (multo mq mq) (pluso mq rn) (lto rm))</code> </pre><br>  Je dois Ã©crire une dÃ©finition rÃ©cursive de 20 lignes + une grande fonction auxiliaire qui n'est pas rÃ©aliste Ã  lire (je ne comprends toujours pas ce qui se fait lÃ -bas).  Il peut Ãªtre trouvÃ© dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dissertation de</a> Will Bird dans la section Pure Binary Arithmetic. <br><br>  Compte tenu de ce qui prÃ©cÃ¨de, je voudrais proposer une sorte de modification de la recherche afin que des programmes simples et Ã©crits naturellement fonctionnent Ã©galement. <br><br><h3>  Optimiser </h3><br>  Nous avons remarquÃ© que lorsque tout va mal, la recherche ne se terminera que si vous indiquez explicitement le nombre de rÃ©ponses et le cassez.  Par consÃ©quent, ils ont dÃ©cidÃ© de lutter prÃ©cisÃ©ment contre le caractÃ¨re incomplet de la recherche - il est beaucoup plus facile Ã  concrÃ©tiser que Â«Ã§a marche depuis longtempsÂ».  En gÃ©nÃ©ral, bien sÃ»r, je veux juste accÃ©lÃ©rer la recherche, mais c'est beaucoup plus difficile Ã  formaliser, alors nous avons commencÃ© avec une tÃ¢che moins ambitieuse. <br><br>  Dans la plupart des cas, lorsque la recherche diverge, une situation se produit qui est facile Ã  suivre.  Si une fonction est appelÃ©e rÃ©cursivement, et dans un appel rÃ©cursif, les arguments sont identiques ou moins spÃ©cifiques, puis dans l'appel rÃ©cursif une autre de ces sous-tÃ¢ches est Ã  nouveau gÃ©nÃ©rÃ©e et une rÃ©cursion infinie se produit.  Formellement, cela ressemble Ã  ceci: il y a une substitution, en appliquant laquelle aux nouveaux arguments, nous obtenons les anciens.  Par exemple, dans la figure ci-dessous, un appel rÃ©cursif est une gÃ©nÃ©ralisation de l'original: vous pouvez remplacer <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>c</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.061ex" height="1.696ex" viewBox="0 -520.7 887.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-32" x="613" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> c_2 </script>  = [x, 3], <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.263ex" height="2.298ex" viewBox="0 -780.1 974.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhgnkxj88EcT0n9IjXy4ugWkhLaVKQ#MJMAIN-32" x="736" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> d_2 </script>  = x et obtenez l'appel d'origine. <br><br><img src="https://habrastorage.org/webt/kh/22/mk/kh22mkjyiwzn3as3manr6jftdrm.png"><br><br>  On peut constater que cette situation se produit Ã©galement dans les exemples de divergence que nous avons dÃ©jÃ  rencontrÃ©s.  Comme je l'ai Ã©crit plus tÃ´t, lorsque vous exÃ©cutez appendo dans la direction opposÃ©e, un appel rÃ©cursif sera effectuÃ© avec des variables libres au lieu de toutes les variables, ce qui, bien sÃ»r, est moins spÃ©cifique que l'appel d'origine, dans lequel le troisiÃ¨me argument a Ã©tÃ© fixÃ©. <br><br>  Si nous exÃ©cutons reverso avec x =?  et xr = [1, 2, 3], on peut voir que le premier appel rÃ©cursif se produira Ã  nouveau avec deux variables libres, donc de nouveaux arguments peuvent de nouveau Ãªtre Ã©videmment transfÃ©rÃ©s aux prÃ©cÃ©dents. <br><br><pre> <code class="plaintext hljs">reverso x x_r  (* x = ?, x_r = [1, 2, 3] *) fresh (ht t_r) (x === Cons (h, t)) (* x_r = [1, 2, 3] = Cons 1 (Cons 2 (Cons 3 Nil))) x = Cons (h, t) *) (reverso t t_r) (* :   t=x, t_r=[1,2,3],    *)</code> </pre><br>  En utilisant ce critÃ¨re, nous pouvons dÃ©tecter une divergence dans le processus d'exÃ©cution du programme, comprendre que tout va mal avec cet ordre et le changer dynamiquement en un autre.  GrÃ¢ce Ã  cela, idÃ©alement, la bonne commande sera sÃ©lectionnÃ©e pour chaque appel. <br>  Vous pouvez le faire naÃ¯vement: si une divergence est trouvÃ©e dans le conjonctif, alors nous martelons toutes les rÃ©ponses qu'il a dÃ©jÃ  trouvÃ©es et reportons son exÃ©cution pour plus tard, Â«sautant en avantÂ» le prochain conjonctif.  Ensuite, peut-Ãªtre, lorsque nous continuerons Ã  l'exÃ©cuter, plus d'informations seront dÃ©jÃ  connues et aucune divergence ne se produira.  Dans nos exemples, cela conduira aux conjonctions de swap souhaitÃ©es. <br><br>  Il existe des moyens moins naÃ¯fs qui permettent, par exemple, de ne pas perdre le travail dÃ©jÃ  fait, de reporter la performance.  DÃ©jÃ  avec la variante la plus stupide de changer l'ordre, la divergence a disparu dans tous les exemples simples souffrant de la non-commutativitÃ© de la conjonction, que nous connaissons, notamment: <br><br><ul><li>  trier la liste des nombres (c'est aussi la gÃ©nÃ©ration de toutes les permutations de la liste), <br></li><li>  ArithmÃ©tique peano et arithmÃ©tique binaire, <br></li><li>  gÃ©nÃ©ration d'arbres binaires d'une taille donnÃ©e. <br></li></ul><br>  Ce fut une surprise inattendue pour nous.  En plus de la divergence, l'optimisation lutte Ã©galement contre les ralentissements de programme.  Les diagrammes ci-dessous montrent le temps d'exÃ©cution de programmes avec deux ordres diffÃ©rents en conjonction (relativement parlant, l'un des meilleurs et l'un des nombreux mauvais).  Il a Ã©tÃ© lancÃ© sur un ordinateur avec la configuration du processeur Intel Core i7 M 620, 2,67 GHz x 4, 8 Go de RAM avec le systÃ¨me d'exploitation Ubuntu 16.04. <br><br>  Lorsque l' <b>ordre est dÃ©jÃ  optimal</b> (nous le sÃ©lectionnons Ã  la main), l'optimisation ralentit un peu l'exÃ©cution, mais pas critique <br><img src="https://habrastorage.org/webt/3a/si/4z/3asi4zevbggj_7hmjk6j2lilk0u.png"><br><br>  Mais lorsque la <b>commande n'est pas optimale</b> (par exemple, ne convient que pour un lancement dans la direction opposÃ©e), avec l'optimisation, cela se rÃ©vÃ¨le beaucoup plus rapide.  Les croix signifient que nous ne pouvions tout simplement pas attendre la fin, cela fonctionne beaucoup plus longtemps <br><img src="https://habrastorage.org/webt/yw/-_/sn/yw-_snesnrnadqet8zmgbbpk3la.png"><br><br><h3>  Comment ne rien casser </h3><br>  Tout cela Ã©tait basÃ© uniquement sur l'intuition et nous voulions le prouver strictement.  ThÃ©orie aprÃ¨s tout. <br><br>  Pour prouver quelque chose, nous avons besoin d'une sÃ©mantique formelle du langage.  Nous avons dÃ©crit la sÃ©mantique opÃ©rationnelle pour miniKanren.  Il s'agit d'une version simplifiÃ©e et mathÃ©matique d'une implÃ©mentation de langage rÃ©el.  Il utilise une version trÃ¨s limitÃ©e (donc facile Ã  utiliser), dans laquelle vous ne pouvez spÃ©cifier que l'exÃ©cution finale des programmes (la recherche doit Ãªtre finale).  Mais pour nos besoins, c'est exactement ce dont nous avons besoin. <br><br>  Pour prouver le critÃ¨re, le lemme est d'abord formulÃ©: l'exÃ©cution du programme Ã  partir d'un Ã©tat plus gÃ©nÃ©ral fonctionnera plus longtemps.  Formellement: l'arborescence de sortie en sÃ©mantique a une grande hauteur.  Cela est prouvÃ© par induction, mais l'Ã©noncÃ© doit Ãªtre trÃ¨s soigneusement gÃ©nÃ©ralisÃ©, sinon l'hypothÃ¨se inductive ne sera pas assez forte.  Il rÃ©sulte de ce lemme que si un critÃ¨re a fonctionnÃ© pendant l'exÃ©cution du programme, alors l'arbre de sortie a son propre sous-arbre de hauteur supÃ©rieure ou Ã©gale.  Cela donne une contradiction, car pour une sÃ©mantique inductive, tous les arbres sont finis.  Cela signifie que dans notre sÃ©mantique, l'exÃ©cution de ce programme est inexprimable, ce qui implique que sa recherche ne se termine pas. <br><br>  La mÃ©thode proposÃ©e est conservatrice: nous ne changeons quelque chose que lorsque nous sommes convaincus que tout est dÃ©jÃ  complÃ¨tement mauvais et impossible de faire pire, donc nous ne cassons rien en termes d'achÃ¨vement du programme. <br><br>  La preuve principale contient beaucoup de dÃ©tails, nous avons donc voulu la vÃ©rifier formellement en Ã©crivant Ã  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Coq</a> .  Cependant, cela s'est avÃ©rÃ© assez difficile techniquement, nous avons donc calmÃ© notre ardeur et nous nous sommes sÃ©rieusement engagÃ©s dans la vÃ©rification automatique uniquement dans la magistrature. <br><br><h3>  Publication </h3><br>  Au milieu du travail, nous avons prÃ©sentÃ© cette Ã©tude lors de la session d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">affiches</a> de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ICFP-2017 au Concours de recherche des Ã©tudiants</a> .  Nous y avons rencontrÃ© les crÃ©ateurs de la langue - Will Bird et Daniel Friedman - et ils ont dit qu'elle Ã©tait significative et que nous devions la regarder plus en dÃ©tail.  Soit dit en passant, Will est gÃ©nÃ©ralement ami avec notre laboratoire de JetBrains Research.  Toutes nos recherches sur miniKanren ont commencÃ© quand, en 2015, Will a organisÃ© une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã©cole d'Ã©tÃ©</a> en programmation relationnelle Ã  Saint-PÃ©tersbourg. <br><br>  Un an plus tard, nous avons amenÃ© notre travail sous une forme plus ou moins complÃ¨te et prÃ©sentÃ© l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> aux Principes et pratiques de la programmation dÃ©clarative 2018. <br><br><h2>  Que dois-je faire Ã  l'Ã©cole d'Ã©tudes supÃ©rieures </h2><br>  Nous voulions continuer Ã  nous engager dans une sÃ©mantique formelle pour miniKanren et une preuve rigoureuse de toutes ses propriÃ©tÃ©s.  Dans la littÃ©rature, les propriÃ©tÃ©s (souvent loin d'Ãªtre Ã©videntes) sont simplement postulÃ©es et dÃ©montrÃ©es Ã  l'aide d'exemples, mais personne ne prouve rien.  Par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">livre principal</a> sur la programmation relationnelle est une liste de questions et rÃ©ponses, chacune Ã©tant consacrÃ©e Ã  un morceau de code spÃ©cifique.  MÃªme pour la dÃ©claration d'intÃ©gralitÃ© de la recherche entrelacÃ©e (et c'est l'un des avantages les plus importants de miniKanren par rapport au Prolog standard), il est impossible de trouver une formulation stricte.  Vous ne pouvez pas vivre comme Ã§a, nous avons dÃ©cidÃ©, et, aprÃ¨s avoir reÃ§u une bÃ©nÃ©diction de Will, nous nous sommes mis au travail. <br><br>  Permettez-moi de vous rappeler que la sÃ©mantique que nous avons dÃ©veloppÃ©e Ã  l'Ã©tape prÃ©cÃ©dente avait une limitation importante: seuls les programmes Ã  recherche finie ont Ã©tÃ© dÃ©crits.  Dans miniKanren, les programmes en cours d'exÃ©cution sont Ã©galement intÃ©ressants car ils peuvent rÃ©pertorier un nombre infini de rÃ©ponses.  Par consÃ©quent, nous avions besoin d'une sÃ©mantique plus cool. <br><br>  Il existe de nombreuses faÃ§ons standard de dÃ©finir la sÃ©mantique d'un langage de programmation, nous n'avons eu qu'Ã  en choisir une et Ã  l'adapter Ã  un cas spÃ©cifique.  Nous avons dÃ©crit la sÃ©mantique comme un systÃ¨me de transition Ã©tiquetÃ© - un ensemble d'Ã©tats possibles dans le processus de recherche et les transitions entre ces Ã©tats, dont certains sont marquÃ©s, ce qui signifie qu'Ã  ce stade de la recherche, une autre rÃ©ponse a Ã©tÃ© trouvÃ©e.  L'exÃ©cution d'un programme particulier est ainsi dÃ©terminÃ©e par la sÃ©quence de ces transitions.  Ces sÃ©quences peuvent Ãªtre finies (arriver Ã  un Ã©tat terminal) ou infinies, dÃ©crivant simultanÃ©ment la fin et la fin de programmes.  Afin de spÃ©cifier complÃ¨tement un tel objet mathÃ©matiquement, il faut utiliser une dÃ©finition coinductive. <br><br>     <b></b> â€”     .      <b></b> ,            (,          ,  â€”     ..).          ,   miniKanren'      (   ). <br><br>      ,    ,        â€”        .    .  (  ),       ,       . <br>            (    ):        , ,        ,      . <br><br>           , ,  /     . <br><br>             Coq'a.        ,             ,      Â«. QedÂ».      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441114/">https://habr.com/ru/post/fr441114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441098/index.html">Profondeurs SIEM: corrÃ©lations prÃªtes Ã  l'emploi. Partie 4. ModÃ¨le de systÃ¨me comme contexte de rÃ¨gles de corrÃ©lation</a></li>
<li><a href="../fr441102/index.html">Kaspersky Mobile Talks - une rÃ©union pour les dÃ©veloppeurs avancÃ©s</a></li>
<li><a href="../fr441104/index.html">Obtention d'informations et contournement de l'authentification Ã  deux facteurs sur les cartes bancaires du TOP-10 (Ukraine)</a></li>
<li><a href="../fr441108/index.html">DÃ©jÃ  pas un concept: Samsung a prÃ©sentÃ© le tÃ©lÃ©phone pliable Galaxy Fold pour 1980 $</a></li>
<li><a href="../fr441112/index.html">Nous attachons l'autorisation LDAP Ã  Kubernetes</a></li>
<li><a href="../fr441116/index.html">KubeSail et son cluster Kubernetes gratuit pour les dÃ©veloppeurs</a></li>
<li><a href="../fr441118/index.html">Les rÃ©sultats de l'expÃ©rience d'une semaine de travail de quatre jours pour les employÃ©s de bureau en Nouvelle-ZÃ©lande</a></li>
<li><a href="../fr441122/index.html">Magento 2 EAV: PrÃ©sentation des structures de donnÃ©es</a></li>
<li><a href="../fr441124/index.html">Faux positifs dans PVS-Studio: la profondeur du trou du lapin</a></li>
<li><a href="../fr441126/index.html">Faux positifs dans PVS-Studio: Ã  quelle profondeur le trou du lapin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>