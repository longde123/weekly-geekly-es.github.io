<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❓ 🎰 🎌 De combien de façons puis-je écrire factorielle dans Scheme? 🛴 🌵 🕟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les langages mauvais prétendent que les langages de programmation fonctionnels sont des «langages d'écriture factoriels». Ceci est le plus souvent déf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>De combien de façons puis-je écrire factorielle dans Scheme?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436698/"><p> Les langages mauvais prétendent que les langages de programmation fonctionnels sont des «langages d'écriture factoriels».  Ceci est le plus souvent défini comme le langage Haskell, mais nous commencerons par le langage fonctionnel qui a grandement influencé à la fois Haskell et un sous-ensemble des outils de programmation fonctionnelle pour de nombreux autres langages - Scheme.  Au moins <code>map</code> et <code>for-each</code> , <code>filter</code> et <code>reduce</code> , ainsi <code>eval</code> et <code>eval</code> sont venus à nos langages de programmation préférés, sinon de Scheme, puis de là. </p><br><p>  Examinez <em>quelques</em> façons possibles d'écrire des calculs factoriels.  En même temps, vous obtenez une sorte d'ode au langage de programmation Scheme.  Je pense que cette merveilleuse langue le mérite. </p><br><p>  J'ai eu 10 options pour écrire des définitions de fonctions, qui peuvent être réduites à 3 méthodes de calcul principales: le processus de calcul récursif linéaire traditionnel, l'itération, la génération d'une séquence de nombres, suivie d'une multiplication par convolution.  Je propose d'examiner ces options plus en détail.  En cours de route, nous considérerons: l'optimisation de la récursivité de la queue, les fonctions et métaprogrammations d'ordre supérieur, les calculs différés, les listes sans fin, la mémorisation, un moyen de créer une variable statique dans Scheme et des macros d'hygiène. </p><a name="habracut"></a><br><p>  Pour les expériences, nous avons utilisé le bon vieux dialecte Schéma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R5RS</a> et le principe populaire des beaux-arts «moyens minimaux - impressions maximales». </p><br><p>  Tous les exemples de schéma ont été préparés dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DrRacket</a> 6.2 en mode R5RS.  Les mesures d'exécution ont été effectuées dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guile</a> 2.0 dans l'environnement OpenSUSE Leap 15 OS. </p><br><p>  Pour commencer, vous pouvez prendre une définition récursive de factorielle et simplement réécrire la formule sur Scheme: </p><br><pre> <code class="plaintext hljs">(define (factorial-classic n) (if (zero? n) 1 (* n (factorial-classic (- n 1)))))</code> </pre> <br><p>  Le résultat a été une définition d'une fonction (en termes de Scheme - une procédure, bien qu'il s'agisse en fait d'une fonction) pour calculer la factorielle, qui peut être vue dans d'innombrables guides de programmation, à commencer par le livre immortel de H. Abelson et D. Sassman «Structure et interprétation des programmes informatiques» . </p><br><p>  Vous pouvez lire et comprendre ce code comme ceci: factoriel <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> n </script>  est là <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 1 </script>  si <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">n</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-8">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1934" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> n = 0 </script>  sinon - <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">n</span><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">t</span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">n</span><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-19">1</span><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.019ex" height="2.66ex" viewBox="0 -832 6035.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-28" x="2654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-2212" x="3866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="4867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-29" x="5367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-21" x="5757" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> n \ cdot (n-1)! </script>  .  Ainsi, ce code correspond à la définition récursive de factorielle, adoptée en mathématiques.  La seule chose que nous ne vérifions pas l'affiliation <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> n </script>  nombres non négatifs. </p><br><p>  Étant récursif, le code ci-dessus contient une restriction évidente sur la valeur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> n </script>  : les données d'appel récursives s'accumuleront sur la pile jusqu'à <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-26"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> n </script>  n'atteindra pas 0. Cela peut entraîner un débordement de pile dans son ensemble <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> n </script>  . </p><br><p>  Comment puis-je supprimer cette restriction?  Il est nécessaire d'optimiser la récursivité de la queue: réécrivez le code afin que l'appel récursif devienne la <em>queue</em> (c'est-à-dire le dernier de la procédure).  Cela permettra à l'interpréteur Scheme d'effectuer l'optimisation - remplacer le calcul récursif par le calcul itératif. </p><br><p>  Si vous utilisez les recommandations des auteurs du livre ci-dessus, vous pouvez obtenir les éléments suivants: </p><br><pre> <code class="plaintext hljs">(define (factorial-classic-tco n) (define (iteration product counter) (if (&gt; counter n) product (iteration (* product counter) (+ counter 1)))) (iteration 1 1))</code> </pre> <br><p>  Ce code est un exemple courant, et à partir du livre «La structure et l'interprétation des programmes informatiques», c'est sur lui que l'on explique généralement l'optimisation de la récursivité de la queue. </p><br><p>  C'était un classique.  Mais le schéma est la flexibilité elle-même, est-il possible d'écrire la même chose d'une manière fondamentalement différente?  Et de préférence encore plus court?  Par exemple, selon l'entrée <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">n</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0.111em; margin-right: 0em;">!</span><span class="MJXp-mo" id="MJXp-Span-33" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-34">1</span><span class="MJXp-mtext" id="MJXp-Span-35">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">t</span><span class="MJXp-mn" id="MJXp-Span-40">2</span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">t</span><span class="MJXp-mn" id="MJXp-Span-46">3</span><span class="MJXp-mtext" id="MJXp-Span-47">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">t</span><span class="MJXp-mtext" id="MJXp-Span-52">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-53">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">s</span><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-60">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.127ex" height="2.057ex" viewBox="0 -780.1 15554.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-21" x="600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3D" x="1156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="2213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="2963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="3397" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="3920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="4406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-32" x="4767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="5518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="5951" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="6475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="6960" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-33" x="7322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="8072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="8506" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="9029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="9515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="10376" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="10810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="11333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="11819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-73" x="12180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-63" x="13150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-64" x="13583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6F" x="14107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-74" x="14592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="14954" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> n! = 1 \ cdot 2 \ cdot 3 \ cdot ~ \ cdots ~ \ cdot n </script>  former une séquence à partir de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mn" id="MJXp-Span-67">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> 1 </script>  avant <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> n </script>  (ou de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-70"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> n </script>  avant <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-72"><span class="MJXp-mn" id="MJXp-Span-73">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> 1 </script>  ) puis l'effondrer par multiplication?  Heureusement, dans Scheme, c'est assez simple grâce à la procédure d' <code>apply</code> intégrée, qui applique une procédure avec un nombre arbitraire d'arguments à la liste: </p><br><pre> <code class="plaintext hljs">(define (iota n) (define (iteration sequence i) (if (&gt; in) sequence (iteration (cons i sequence) (+ i 1)))) (iteration '() 1)) (define (factorial-fold n) (apply * (iota n)))</code> </pre> <br><p>  Scheme est célèbre pour sa commodité pour les calculs symboliques en raison de «l'unité de code et de données» (comme on dit parfois sur les langages de la famille Lisp).  Nous utilisons cette fonctionnalité: nous formons une expression pour calculer la factorielle d'un nombre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> n </script>  puis calculez-le: </p><br><pre> <code class="plaintext hljs">(define (factorial-eval n) (define expression `(* ,@(iota n))) (eval expression (interaction-environment)))</code> </pre> <br><p>  Le symbole «retour guillemet simple» signifie quasiquotation.  Sans quasi-citation, l'obtention d'une expression pour un calcul ultérieur pourrait être obtenue en utilisant le code <code>(cons '* (iota n))</code> .  Une citation simple (citation, citation) signifie que <code>*</code> doit être substitué dans l'expression exactement comme un nom (symbole), et non la valeur correspondante (ici - la procédure).  Donc, avec <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-76"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">n</span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-79">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-33" x="1934" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> n = 3 </script>  nous obtenons <code>(* 3 2 1)</code> .  Cette liste est une expression dans Scheme.  Sa valeur peut être réalisée dans un environnement approprié, le meilleur de tous - dans un environnement <code>(interaction-environment)</code> contenant les procédures intégrées et les procédures définies par nous dans le programme.  En fait, c'est ce que nous faisons dans le corps de l' <code>factorial-eval</code> . </p><br><p>  Le schéma prend en charge l'informatique différée.  Haskell, qui a été fortement influencé par Scheme, utilise un modèle de calcul paresseux, c'est-à-dire  ne calcule pas la valeur de l'expression tant que le résultat de ces calculs n'est pas revendiqué.  Cela permet aux programmes d'avoir des structures de données particulières comme des listes sans fin.  Si seule la partie nécessaire à d'autres calculs leur est prélevée, le programme ne se déroulera pas en cycles: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">ghci</span></span>&gt; take <span class="hljs-number"><span class="hljs-number">4</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span> ..] [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]</code> </pre> <br><p>  L'expression <code>[1 ..]</code> génère une liste infinie d'entiers.  L'expression <code>take 4</code> obtient les 4 premiers éléments de cette liste.  Étant donné que les éléments de liste suivants ne sont pas réclamés, ils ne sont pas calculés. </p><br><p>  Chez Haskell, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-80"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">n</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.042ex" height="2.057ex" viewBox="0 -780.1 879 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-21" x="600" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> n! </script>  à partir d'une liste sans fin, vous pouvez écrire comme ceci: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">factorials</span></span> :: [<span class="hljs-type"><span class="hljs-type">Integer</span></span>] factorials = next <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> next n fact = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> n' = n + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fact : next n' (fact * n') factorial :: <span class="hljs-type"><span class="hljs-type">Integer</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Integer</span></span> factorial n = factorials !! fromIntegral n</code> </pre> <br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">ghci</span></span>&gt; take <span class="hljs-number"><span class="hljs-number">7</span></span> $ factorials [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>,<span class="hljs-number"><span class="hljs-number">120</span></span>,<span class="hljs-number"><span class="hljs-number">720</span></span>] ghci&gt; factorial <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">720</span></span></code> </pre> <br><p>  En utilisant quelques formes de <code>delay</code> / <code>force</code> du schéma <code>force</code> essayons de faire quelque chose de similaire.  Le mot clé <code>delay</code> crée une promesse pour évaluer la valeur d'une expression.  Le mot <code>force</code> clé <code>force</code> demande d'effectuer ces calculs, la valeur résultante est calculée et stockée.  Lors d'un accès répété, de nouveaux calculs ne sont pas effectués, mais la valeur calculée précédemment est renvoyée. </p><br><p>  Dans les langages de la famille Lisp, les listes sont construites à partir de paires.  Afin de construire des listes infinies, nous introduisons le type de «paire paresseuse» - une paire dans laquelle le premier élément est la valeur calculée, et le second est la promesse de calculer la valeur.  Pour ce faire, nous devons compléter la «sainte trinité» des langages de la famille Lisp ( <code>cons</code> , <code>car</code> , <code>cdr</code> ) avec leurs versions paresseuses: </p><br><pre> <code class="plaintext hljs">(define-syntax lazy-cons (syntax-rules () ((_ first second) (cons first (delay second))))) (define lazy-car car) (define (lazy-cdr lazy-pair) (force (cdr lazy-pair)))</code> </pre> <br><p>  Le constructeur de la paire lazy <code>lazy-cons</code> est implémenté sous forme de macro.  Ceci est fait afin d'éviter de calculer la valeur du deuxième élément de la paire lors de sa création. </p><br><p>  L'idée est de créer une liste infinie de valeurs, puis d'en tirer ce dont vous avez besoin.  Pour ce faire, définissez la version paresseuse de la procédure d'obtention de l'élément par index: </p><br><pre> <code class="plaintext hljs">(define (lazy-list-ref lazy-list index) (if (zero? index) (lazy-car lazy-list) (lazy-list-ref (lazy-cdr lazy-list) (- index 1)))) (define (generate-factorials) (define (next nn!) (define n+1 (+ n 1)) (lazy-cons n! (next n+1 (* n! n+1)))) (next 0 1))</code> </pre> <br><p>  Ici <code>n!</code>  et <code>n+1</code> sont les noms des variables.  Dans Scheme, par rapport à d'autres langues, il y a très peu de caractères qui ne peuvent pas être utilisés dans les identificateurs. </p><br><p>  Notez que le générateur de listes infinies <code>generate-factorials</code> ne contient aucun moyen de sortir de la récursivité.  Cependant, il ne sera pas bouclé, car lors de son appel, seule la tête de liste sera calculée, tandis que la queue sera représentée par une promesse de calculer la valeur. </p><br><p>  Vous pouvez maintenant définir <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">n</span><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0.111em; margin-right: 0em;">!</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.042ex" height="2.057ex" viewBox="0 -780.1 879 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-21" x="600" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> n! </script>  comment arriver <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-86"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> n </script>  e élément de la liste des factorielles: </p><br><pre> <code class="plaintext hljs">(define lazy-factorials (generate-factorials)) (define (factorial-lazy n) (lazy-list-ref lazy-factorials n))</code> </pre> <br><p>  Ça marche.  Dans le même temps, si des factorielles de nombres différents sont calculées en une seule session de l'interpréteur, les calculs se produiront plus rapidement que dans les versions strictes, car certaines des valeurs de la liste paresseuse seront déjà calculées. </p><br><p>  Soit dit en passant, le code sur Scheme est très proche de celui sur Haskell.  Donc, la déclaration de réception <code>!!</code>  correspond approximativement à la procédure <code>lazy-list-ref</code> constructeur de <code>lazy-list-ref</code> <code>:</code> correspond à <code>lazy-cons</code> .  En conséquence, parce que Haskell, bien qu'il professe un modèle de calcul paresseux, cependant, contrairement au <code>delay</code> / <code>force</code> dans Scheme, il ne se souvient pas des valeurs calculées. </p><br><p>  Par ailleurs, pour augmenter la productivité, vous pouvez appliquer la mémorisation de valeurs déjà calculées - mémorisation.  Nous allons stocker les valeurs calculées dans une liste associative, dans laquelle les clés sont des nombres et les valeurs sont leurs factorielles.  Une fois appelé, nous allons parcourir la liste pour les valeurs déjà calculées.  Si la valeur est dans la liste, nous retournerons cette valeur stockée.  Si la valeur n'est pas dans la liste, nous la calculerons, la mettrons dans la liste et la renverrons ensuite.  Pour nous assurer que cette liste est toujours avec la fonction appelée, et non dans l'environnement global, nous la plaçons dans une variable statique: </p><br><pre> <code class="plaintext hljs">(define factorial-memoized (let ((memo '())) (lambda (n) (let ((memoized (assq n memo))) (if memoized (cadr memoized) (if (zero? n) 1 (let ((computed (* n (factorial-memoized (- n 1))))) (set! memo (cons (list n computed) memo)) computed)))))))</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Variables statiques dans le schéma</b> <div class="spoiler_text"><p>  Afficher le code </p><br><pre> <code class="plaintext hljs">(define proc (let ((static-var initial-value)) (lambda args ...)))</code> </pre> <br><p>  est une méthode acceptée par Scheme pour créer une procédure avec une variable statique.  Le principe d'une telle annonce peut être facilement expliqué par un exemple plus court - une procédure qui renvoie le nombre d'appels: </p><br><pre> <code class="plaintext hljs">(define count (let ((n 0)) (lambda () (set! n (+ n 1)) n)))</code> </pre> <br><p>  Dans une session d'interprète, le premier appel <code>(count)</code> renverra 1, le second - 2, le troisième - 3, etc.  Comment ça marche? </p><br><p>  Sans sucre syntaxique, la définition du <code>count</code> ressemble à ceci: </p><br><pre> <code class="plaintext hljs">(define count ((lambda (n) (lambda () (set! n (+ n 1)) n)) 0))</code> </pre> <br><p>  Ainsi, la procédure sans arguments <code>(lambda () (set! n (+ n 1)) n)</code> , qui inclut librement <code>n</code> est associée au <code>count</code> noms.  Il s'avère que <code>n</code> défini dans l'environnement externe par rapport à <code>(lambda () (set! n (+ n 1)) n)</code> , ce qui signifie que la valeur de <code>n</code> sera stockée entre les appels à <code>count</code> .  La valeur <code>n</code> initialisée à zéro au démarrage du programme, car <code>(lambda (n) ...)</code> est appliquée à l'argument 0. Par conséquent, <code>n</code> absent dans l'environnement global, mais est toujours accessible à partir de <code>count</code> . </p></div></div><br><p>  Cette implémentation promet également des gains de performances en calculant à plusieurs reprises les factorielles de divers nombres dans une même session d'interpréteur. </p><br><p>  Bien sûr, l'optimisation de la récursivité de queue est également possible ici: </p><br><pre> <code class="plaintext hljs">(define factorial-memoized-tco (let ((memo '())) (lambda (n) (define (iteration product counter) (cond ((&gt; counter n) product) (else (set! memo (cons (list counter product) memo)) (iteration (* product counter) (+ counter 1))))) (iteration 1 1))))</code> </pre> <br><p>  «Pourquoi ces danses au tambourin?», Dira le lecteur.  Dans les langages de programmation impératifs, la même chose est écrite simplement - à travers une boucle, cela fonctionne rapidement et sans coûts de mémoire inutiles.  Le schéma a un sous-ensemble pour la programmation impérative, il a également un moyen d'organiser les boucles - une <em>forme spéciale de</em> <code>do</code> .  La procédure de calcul de la factorielle, écrite avec son aide, peut ressembler à ceci: </p><br><pre> <code class="plaintext hljs">(define (factorial-do n) (define product 1) (do ((i 1 (+ i 1))) ((&gt; in) product) (set! product (* product i))))</code> </pre> <br><p>  La construction <code>do</code> est assez polyvalente, et c'est pourquoi elle n'est pas trop lisible.  N'est-il pas préférable d'organiser son propre cycle dans un style impératif?  Les macros aideront à cela: </p><br><pre> <code class="plaintext hljs">(define-syntax for (syntax-rules () ((_ (variable init test step) . body) (let loop ((variable init)) (if test (begin (begin . body) (loop step)))))))</code> </pre><br><p>  Grâce à l'optimisation de la récursivité de queue par l'interpréteur, nous obtenons une boucle à laquelle nous sommes habitués dans les langages de programmation impératifs.  En optimisant la récursivité de la queue, la pile ne se développera pas. </p><br><p>  Définition de la factorielle à l'aide <code>for</code> : </p><br><pre> <code class="plaintext hljs">(define (factorial-for n) (define product 1) (for (i 1 (&lt;= in) (+ i 1)) (set! product (* product i))) product)</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Comment ça marche</b> <div class="spoiler_text"><p>  Dans cet exemple, l'expression <code>(for (i 1 (&lt;= in) (+ i 1)) (set! product (* product i)))</code> sera mise en correspondance avec le modèle <code>(_ (variable init test step) . body)</code> règle de syntaxe.  Les substitutions suivantes seront effectuées: </p><br><pre> <code class="plaintext hljs">for → _ i → variable 1 → init (&lt;= in) → test (+ i 1) → step (set! product (* product i)) → body</code> </pre> <br><p>  À partir d'ici, le code suivant sera généré par le modèle de règle de syntaxe: </p><br><pre> <code class="plaintext hljs">(define (factorial-for n) (define product 1) (let loop ((i 1)) ;   (if (&lt;= in) ;  (begin (begin (set! product (* product i))) ;  (loop (+ i 1))))) ;  for product)</code> </pre> </div></div><br><p>  Il existe une autre option qui ressemble à l'impératif <code>for</code> loop - avec la procédure <code>for-each</code> intégrée: </p><br><pre> <code class="plaintext hljs">(define (factorial-for-each n) (define product 1) (for-each (lambda (i) (set! product (* product i))) (iota n)) product)</code> </pre> <br><p>  Langage Scheme grand et puissant!  Et la performance? </p><br><p>  Nous utiliserons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GNU Guile</a> pour mesurer les performances - dans cet environnement, vous pouvez mesurer le temps nécessaire pour évaluer une expression le plus simplement possible. </p><br><p>  Guile fonctionne comme suit: compile le code source du programme en bytecode, qui est ensuite exécuté par la machine virtuelle.  Ce n'est qu'une des implémentations et l'une des nombreuses façons possibles d'exécuter un programme Scheme, il y en a d'autres: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Racket</a> (utilise la compilation JIT), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chicken Scheme</a> (utilise une interprétation ou compilation «honnête» dans un sous-ensemble de C), etc.  De toute évidence, les limitations et les performances des programmes dans ces environnements peuvent varier légèrement. </p><br><p>  Nous prendrons des mesures à une certaine valeur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-88"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> n </script>  .  Que devrait-il être <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> n </script>  ?  Alors avec qui le plus grand <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> n </script>  sera en mesure de "faire face" aux options proposées.  Avec les paramètres par défaut de Guile 2.0, sur un PC avec Intel Core i5 et 4 Go de RAM, j'ai obtenu ce qui suit: </p><br><table><thead><tr><th>  Procédure </th><th>  Le problème </th></tr></thead><tbody><tr><td> <code>factorial-classic</code> </td> <td>  débordement de pile sur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-94"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">n</span><span class="MJXp-mo" id="MJXp-Span-96" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-97">10</span><span class="MJXp-mspace" id="MJXp-Span-98" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-99">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.693ex" height="1.937ex" viewBox="0 -728.2 4603.7 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3E" x="878" y="0"></use><g transform="translate(1934,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(3102,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-22"> n> 10 \, 000 </script></td></tr><tr><td> <code>factorial-classic-tco</code> </td> <td>  non ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">n</span><span class="MJXp-mo" id="MJXp-Span-102" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-103">100</span><span class="MJXp-mspace" id="MJXp-Span-104" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-105">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.855ex" height="1.937ex" viewBox="0 -728.2 5104.2 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3D" x="878" y="0"></use><g transform="translate(1934,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g><g transform="translate(3602,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-23"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-fold</code> </td> <td>  débordement de pile sur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">n</span><span class="MJXp-mo" id="MJXp-Span-108" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-109">10</span><span class="MJXp-mspace" id="MJXp-Span-110" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-111">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.693ex" height="1.937ex" viewBox="0 -728.2 4603.7 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3E" x="878" y="0"></use><g transform="translate(1934,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(3102,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-24"> n> 10 \, 000 </script></td></tr><tr><td> <code>factorial-eval</code> </td> <td>  débordement de pile sur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">n</span><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-115">8</span><span class="MJXp-mspace" id="MJXp-Span-116" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-117">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.53ex" height="1.937ex" viewBox="0 -728.2 4103.2 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3E" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-38" x="1934" y="0"></use><g transform="translate(2601,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-25"> n> 8 \, 000 </script></td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  à <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-118"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">n</span><span class="MJXp-mo" id="MJXp-Span-120" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-121">100</span><span class="MJXp-mspace" id="MJXp-Span-122" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-123">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.855ex" height="1.937ex" viewBox="0 -728.2 5104.2 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3D" x="878" y="0"></use><g transform="translate(1934,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g><g transform="translate(3602,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-26"> n = 100 \, 000 </script>  utilise la partition de swap et se fige </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  débordement de pile sur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">n</span><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-127">10000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.305ex" height="1.937ex" viewBox="0 -728.2 4437.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3E" x="878" y="0"></use><g transform="translate(1934,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="2002" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-27"> n> 10000 </script>  uniquement au premier démarrage </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  à <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">n</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-131">1</span><span class="MJXp-mspace" id="MJXp-Span-132" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-133">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.53ex" height="1.937ex" viewBox="0 -728.2 4103.2 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-3E" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-31" x="1934" y="0"></use><g transform="translate(2601,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436698/&amp;usg=ALkJrhj3te87EQP-Pwy7vZLpfQxSLyV08A#MJMAIN-30" x="1001" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-28"> n> 1 \, 000 </script>  utilise la partition de swap et se fige </td></tr><tr><td> <code>factorial-do</code> </td> <td>  non ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">n</span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-137">100</span><span class="MJXp-mspace" id="MJXp-Span-138" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-139">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-for</code> </td> <td>  non ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">n</span><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-143">100</span><span class="MJXp-mspace" id="MJXp-Span-144" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-145">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> n = 100 \, 000 </script>  ) </td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  non ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">n</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-149">100</span><span class="MJXp-mspace" id="MJXp-Span-150" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-151">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> n = 100 \, 000 </script>  ) </td></tr></tbody></table><br><p>  De là, des tests de performance ont été effectués à <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">n</span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-155">8</span><span class="MJXp-mspace" id="MJXp-Span-156" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-157">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> n = 8 \, 000 </script>  .  Les résultats sont présentés dans le tableau ci-dessous, où <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-158"><span class="MJXp-msubsup" id="MJXp-Span-159"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-161" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> t_ {run} </script>  - délai <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-165"><span class="MJXp-msubsup" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-168" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> t_ {GC} </script>  - durée d'exécution du ramasse-miettes en secondes. <br>  Pour toutes les procédures, sauf paresseux et mémorisés, les plus petites valeurs de l'exécution et l'heure correspondante du garbage collector sont obtenues, obtenues à partir des résultats de trois démarrages à <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-171"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">n</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-174">8</span><span class="MJXp-mspace" id="MJXp-Span-175" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-176">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> n = 8 \, 000 </script>  . <br>  Pour les procédures mémorisées et paresseuses, le temps d'exécution du premier appel est indiqué, puis le plus petit des trois appels. </p><br><table><thead><tr><th>  Procédure </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-msubsup" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-180" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> t_ {run} </script>  avec </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-184"><span class="MJXp-msubsup" id="MJXp-Span-185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-187" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> t_ {GC} </script>  avec </th><th>  Remarques </th></tr></thead><tbody><tr><td> <code>factorial-classic</code> </td> <td>  0,051 </td><td>  0,034 </td><td></td></tr><tr><td> <code>factorial-classic-tco</code> </td> <td>  0,055 </td><td>  0,041 </td><td></td></tr><tr><td> <code>factorial-fold</code> </td> <td>  0,065 </td><td>  0,059 </td><td></td></tr><tr><td> <code>factorial-eval</code> </td> <td>  0,070 </td><td>  0,040 </td><td></td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  0,076 </td><td>  0,036 </td><td>  premier appel </td></tr><tr><td> <code>factorial-lazy</code> </td> <td>  0,009 </td><td>  - </td><td>  appels suivants </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  0,077 </td><td>  0,041 </td><td>  premier appel </td></tr><tr><td> <code>factorial-memoized</code> </td> <td>  0,002 </td><td>  - </td><td>  appels suivants </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  0,077 </td><td>  0,041 </td><td>  premier appel </td></tr><tr><td> <code>factorial-memoized-tco</code> </td> <td>  0,002 </td><td>  - </td><td>  appels suivants </td></tr><tr><td> <code>factorial-do</code> </td> <td>  0,052 </td><td>  0,025 </td><td></td></tr><tr><td> <code>factorial-for</code> </td> <td>  0,059 </td><td>  0,044 </td><td></td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  0,066 </td><td>  0,042 </td><td></td></tr></tbody></table><br><p>  Nous avons 4 options qui peuvent fonctionner avec de grandes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> n </script>  .  À <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">n</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-195">100</span><span class="MJXp-mspace" id="MJXp-Span-196" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-197">000</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> n = 100 \, 000 </script>  ils ont les temps de calcul et de récupération de place suivants: </p><br><table><thead><tr><th>  Procédure </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-198"><span class="MJXp-msubsup" id="MJXp-Span-199"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-201" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">n</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> t_ {run} </script>  avec </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-205"><span class="MJXp-msubsup" id="MJXp-Span-206"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-208" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">C</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> t_ {GC} </script>  avec </th></tr></thead><tbody><tr><td> <code>factorial-classic-tco</code> </td> <td>  8 468 </td><td>  6 628 </td></tr><tr><td> <code>factorial-do</code> </td> <td>  8 470 </td><td>  6 632 </td></tr><tr><td> <code>factorial-for</code> </td> <td>  8 440 </td><td>  6 601 </td></tr><tr><td> <code>factorial-for-each</code> </td> <td>  9,998 </td><td>  7 985 </td></tr></tbody></table><br><p>  Vous pouvez voir qu'avec pas trop grand <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-211"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> n </script>  le plus rapide et, en même temps, le plus court est le premier.  La même option correspond le mieux à la définition mathématique de factorielle.  L'option d'optimisation de la récursivité de queue ne lui est pas très inférieure en termes de performances.  Ces deux options sont idiomatiques recommandées par les auteurs de la langue.  La conclusion est à bien des égards évidente: sauf indication contraire, l'approche, qui est «typique» du langage, est préférée, au moins pour la première implémentation d'un algorithme ou d'une méthode. </p><br><p>  Dans le même temps, le langage Scheme nous a permis d'écrire de nombreuses options pour implémenter le calcul factoriel, en utilisant un ensemble très limité de primitives (les très «moyennes minimales - impressions maximales»).  Par conséquent, malgré son âge vénérable et pas trop répandu, ce langage peut toujours être recommandé pour la programmation de recherche: il semble que vous pouvez implémenter n'importe quoi dessus de n'importe quelle <em>manière</em> (et de <em>n'importe quelle</em> manière). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436698/">https://habr.com/ru/post/fr436698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436688/index.html">Le géant informatique quitte le marché des puces pour les centres de données - dites-nous ce que cela signifie pour l'industrie</a></li>
<li><a href="../fr436690/index.html">[Demande - réponse] sur la propriété intellectuelle et la protection des données</a></li>
<li><a href="../fr436692/index.html">(in) Guerre finie</a></li>
<li><a href="../fr436694/index.html">My Pascal Compiler et l'art contemporain polonais</a></li>
<li><a href="../fr436696/index.html">Comment générer du son binaural sur une piste audio mono-canal - la vidéo vous aidera</a></li>
<li><a href="../fr436700/index.html">Anti-spoofing: comment les systèmes de reconnaissance faciale résistent-ils aux escrocs?</a></li>
<li><a href="../fr436704/index.html">L'histoire de la façon dont nous avons choisi les balances pour l'automatisation des caisses enregistreuses</a></li>
<li><a href="../fr436708/index.html">En quoi consiste l'IoT</a></li>
<li><a href="../fr436710/index.html">Les tendances du marché gamedev de l'année 2019 à mon humble avis. Décentralisation?</a></li>
<li><a href="../fr436712/index.html">Comment promouvoir un jeu incrémental? Gratuit, rapide et efficace *</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>