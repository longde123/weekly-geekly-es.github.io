<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🏭 💼 🙋🏿 Pemantauan SMS dari berat tiga sarang untuk $ 30 🌺 👩‍🎨 👱🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tidak, ini bukan penawaran komersial, seperti biaya komponen sistem yang dapat Anda kumpulkan setelah membaca artikel. 


 Sedikit latar belakang: 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemantauan SMS dari berat tiga sarang untuk $ 30</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444326/"><p><img src="https://habrastorage.org/getpro/habr/post_images/f9b/e29/cd3/f9be29cd3be301fe1554f261ae6d0dcb.jpg" alt="Logo saya"></p><br><p>  Tidak, ini bukan penawaran komersial, seperti biaya komponen sistem yang dapat Anda kumpulkan setelah membaca artikel. </p><br><p>  Sedikit latar belakang: </p><br><p>  Beberapa waktu lalu, saya memutuskan untuk mendapatkan lebah, dan mereka muncul ... sepanjang musim, tetapi tidak keluar dari musim dingin. <br>  Dan ini terlepas dari kenyataan bahwa semuanya tampak baik-baik saja - godaan musim gugur, pemanasan sebelum dingin. <br>  Sarangnya adalah sistem kayu Dadan klasik dengan 10 bingkai dari papan 40 mm. <br>  Tapi musim dingin itu, peternak lebah yang berpengalaman bahkan kehilangan lebih banyak dari biasanya karena perubahan suhu. </p><br><p>  Jadi ide sistem pemantauan kondisi sarang muncul. <br>  Setelah penerbitan beberapa artikel tentang Habr-e dan komunikasi di forum peternak lebah, saya memutuskan untuk beralih dari yang sederhana menjadi kompleks. <br>  Bobot adalah satu-satunya parameter yang tak terbantahkan, tetapi sebagai aturan, sistem yang ada hanya memantau satu sarang "referensi". <br>  Jika ada yang salah dengannya (misalnya, penerbangan segerombolan, penyakit lebah), maka indikatornya menjadi tidak relevan. </p><br><p>  Oleh karena itu, diputuskan untuk memantau perubahan berat tiga sarang sekaligus dengan satu mikrokontroler, dan menambahkan "roti" lainnya setelahnya. <br>  Hasilnya adalah sistem otonom dengan waktu operasi sekitar sebulan dengan sekali pengisian baterai 18650 dan mengirimkan statistik sekali sehari. <br>  Saya mencoba menyederhanakan desain sebanyak mungkin, sehingga dapat diulang bahkan tanpa skema, menurut satu foto. </p><br><p>  Logika kerja adalah sebagai berikut: pada awal / reset pertama, pembacaan sensor yang dipasang di bawah sarang disimpan di EEPROM. <br>  Selanjutnya, setiap hari, setelah matahari terbenam, sistem "bangun", membaca bacaan dan mengirim SMS dengan perubahan berat per hari dan sejak saat dihidupkan. <br>  Selain itu, nilai tegangan baterai ditransmisikan, dan ketika turun ke 3,5 V, peringatan tentang perlunya pengisian dikeluarkan, karena di bawah 3,4 V modul komunikasi tidak menyala, dan pembacaan berat sudah "mengambang". </p><a name="habracut"></a><br><p>  "Apakah kamu ingat bagaimana semuanya dimulai. Semuanya adalah pertama kalinya dan lagi." <br><img src="https://habrastorage.org/getpro/habr/post_images/2f2/432/274/2f24322742ff9b620f05bb2804a5bb03.jpg" alt="Bagaimana ini dimulai"><br>  Ya, itu adalah set "besi" yang awalnya, meskipun hanya memuat sel dan kabel yang bertahan hingga versi final, tetapi hal pertama yang pertama. <br>  Bahkan, bay kabel tidak diperlukan, hanya saja ternyata dengan harga yang sama dengan 30m datar. </p><br><p>  Jika Anda tidak takut membongkar 3 smd-LED dan setengah ratus titik solder (output) normal - maka pergilah! </p><br><p>  Jadi, kita membutuhkan seperangkat peralatan / bahan berikut: </p><br><ol><li>  Arduino Pro Mini 3V <br>  Anda harus memperhatikan microchip konverter linier - harus persis 3.3V - pada chip marking KB 33 / LB 33 / DE A10 - orang Cina telah mencampuradukkan sesuatu dengan saya, dan seluruh batch <br>  papan sirkuit di toko ternyata dengan regulator 5-volt dan kuarsa 16MHz. </li><li>  USB-Ttl pada chip CH340 - Anda bahkan dapat 5 volt, tetapi kemudian selama firmware mikrokontroler, Arduino harus diputuskan dari modul GSM, agar tidak membakar yang terakhir. <br>  Papan pada chip PL2303 tidak berfungsi di bawah Windows 10. </li><li>  Modul komunikasi GSM Goouu Tech IOT GA-6-B atau AI-THINKER A-6 Mini. <br>  Mengapa Anda berhenti melakukannya?  Neoway M590 - seorang perancang yang membutuhkan tarian terpisah dengan rebana, GSM SIM800L - tidak menyukai tingkat logika 2.8V yang tidak standar, membutuhkan koordinasi bahkan dengan arduino tiga volt. <br>  Selain itu, solusi dari AiThinker memiliki konsumsi energi minimal (saat mengirim SMS, saya tidak melihat arus di atas 100mA). </li><li>  Antena GSM GPRS 3DBI (dalam foto di atas - syal persegi panjang dengan "ekor", selama 9 jam) </li><li>  Paket pemula untuk operator yang memiliki jangkauan yang baik di lokasi pemeliharaan lebah Anda. <br>  Ya, paket pertama-tama harus diaktifkan di telepon biasa, Nonaktifkan PIN PERMINTAAN di pintu masuk, dan isi kembali akun. <br>  Sekarang ada banyak opsi dengan nama dalam gaya "Sensor", "IOT" - mereka memiliki biaya bulanan yang sedikit lebih rendah. </li><li>  kawat dupont ibu 20cm ibu - 3 pcs.  (untuk menghubungkan Arduino ke USB-TTL) </li><li>  3 pcs  HX711 - ADC untuk skala </li><li>  6 memuat sel dengan berat hingga 50 kg </li><li>  Kabel telepon 4-inti 15 meter - untuk menghubungkan modul berat dengan ARDUINO. </li><li>  GL5528 photoresistor (ini penting, dengan resistansi gelap 1MOhm dan resistansi cahaya 10-20kOhm) dan dua resistor 20k konvensional </li><li>  Sepotong pita perekat tebal 18x18mm dua sisi - untuk memasang arduino ke modul komunikasi. </li><li>  Tempat baterai 18650 dan, pada kenyataannya, baterai itu sendiri ~ 2600mAh. </li><li>  Sedikit lilin atau parafin (lilin lilin lampu aroma) - untuk perlindungan kelembaban HX711 </li><li>  Sepotong balok kayu 25x50x300mm untuk dasar sel beban. </li><li>  Selusin sekrup self-tapping dengan mesin cuci tekan 4,2x19 mm untuk memasang sensor ke pangkalan. </li></ol><br><p>  Baterai dapat diambil dari pembongkaran laptop - berkali-kali lebih murah daripada yang baru, dan kapasitasnya akan jauh lebih banyak daripada Chinese UltraFire - Saya mendapat 1.500 berbanding 450 (ini dari firewall 6800 ;-) </p><br><p>  Selain itu, akan membutuhkan tangan yang bengkok, solder besi EPSN-25, rosin dan solder POS-60. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0a9/222/e6a/0a9222e6acd4d43631f777dfa995dcab.jpg" alt="Solder besi"></p><br><p>  5 tahun yang lalu, saya menggunakan besi solder Soviet dengan sengatan tembaga (saya tidak mendapatkan stasiun solder - saya mengambilnya untuk test drive, dan menyelesaikan sirkuit EPSN). <br>  Tetapi setelah kegagalannya dan beberapa monster Cina di bawah (d) pohon Natal, yang terakhir disebut Sparta - suatu hal yang separah nama itu berhenti <br>  pada produk dengan pengontrol suhu. </p><br><p>  Jadi ayo pergi! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eba/218/027/eba21802786557630e811458e9a07eaa.jpg" alt="GSM A6"></p><br><p>  Untuk memulai, dua LED disolder dari modul GSM (tempat mereka dilingkari dalam oval oranye) <br>  Kami memasukkan kartu SIM dengan bantalan ke papan sirkuit tercetak, sudut miring pada foto ditunjukkan oleh panah. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/463/027/4e6/4630274e63f3710ea1b69f94a3d2dd8b.jpg" alt="Arduino Pro Mini 3v"></p><br><p>  Kemudian kami melakukan prosedur serupa dengan LED pada papan Arduino (oval di sebelah kiri chip persegi), <br>  Solder sisir menjadi empat kontak (1), <br>  Kami mengambil dua resistor 20k, memutar lead di satu sisi, menyolder twist ke lubang kontak A5, lead yang tersisa di RAW dan GND arduinki (2), <br>  Kami mempersingkat fotoresistor menjadi 10 mm dan menyoldernya ke kesimpulan papan GND dan D2 (3). </p><br><p>  Sekarang saatnya <del>  pita listrik biru </del>  pita dua sisi - rekatkan pada dudukan kartu SIM pada modul komunikasi, dan di atas - arduino - tombol merah (perak) menghadap kita dan terletak di atas kartu SIM. </p><br><p>  Solder daya: ditambah dari kapasitor modul komunikasi (4) ke pin Arduino RAW. <br>  Faktanya adalah bahwa modul komunikasi itu sendiri membutuhkan 3.4-4.2V untuk catu dayanya, dan kontak PWR-nya terhubung ke konverter step-down step-down, sehingga untuk operasi dari tegangan li-ion harus diterapkan melewati bagian sirkuit ini. </p><br><p>  Di Arduino, sebaliknya, kami memulai catu daya melalui konverter linier - pada arus rendah, drop-out voltage drop adalah 0.1V. <br>  Tetapi dengan menerapkan tegangan stabil ke modul HX711, kami menyingkirkan kebutuhan untuk memperbaikinya di bawah tegangan yang lebih rendah (dan pada saat yang sama meningkatkan kebisingan sebagai hasil dari operasi ini). </p><br><p>  Kemudian kami menyolder jumper (5) antara kontak PWR-A1, URX-D4 dan UTX-D5, ground GND-G (6) dan akhirnya daya dari dudukan baterai 18650 (7), sambungkan antena (8). <br>  Sekarang kita mengambil konverter USB-TTL dan menghubungkan kontak RXD-TXD dan TXD-RXD, GND-GND dengan kabel Dupont ke ARDUINO (sisir 1): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/651/7dc/8ff/6517dc8ffbb81e4be9f1793db3eb66aa.jpg" alt="Versi pertama"></p><br><p>  Dalam foto di atas - versi pertama (dari tiga) sistem, yang digunakan untuk debugging. </p><br><p>  Dan sekarang untuk beberapa waktu kita ngelantur dari besi solder, dan beralih ke bagian perangkat lunak. <br>  Saya akan menjelaskan urutan tindakan untuk Windows: <br>  Pertama, Anda perlu mengunduh dan menginstal / unzip program <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Arduino IDE</a> - versi saat ini adalah 1.8.9, tetapi saya menggunakan 1.6.4 </p><br><p>  Untuk mempermudah, kami membongkar arsip ke folder C: \ arduino- "your_version_number", di dalamnya kita akan memiliki / dist, driver, contoh, perangkat keras, java, lib, perpustakaan, referensi, folder alat, serta file yang dapat dieksekusi arduino (antara lain). </p><br><p>  Sekarang kita membutuhkan perpustakaan untuk bekerja dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">HX711</a> ADC - tombol "clone or download" berwarna hijau - unduh ZIP. <br>  Konten (folder HX711-master) ditempatkan di direktori C: \ arduino- "your_version_number" \ libraries </p><br><p>  Dan tentu saja, driver untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">USB-TTL berasal</a> dari github yang sama - dari arsip yang tidak dibongkar, file SETUP pemasang diluncurkan. </p><br><p>  Oke, jalankan dan konfigurasikan program C: \ arduino- "your_version_number" \ arduino </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2fd/429/2d5/2fd4292d54f67c31052b54ca853be5b3.jpg" alt="Program antarmuka"></p><br><p>  Kita pergi ke item "Tools" - pilih papan "Arduino Pro atau Pro Mini", prosesor Atmega 328 3.3V 8 MHz, port adalah nomor selain sistem COM1 (muncul setelah menginstal driver CH340 dengan adaptor USB-TTL terhubung) </p><br><p>  Oke, salin sketsa (program) berikut dan tempel ke jendela IDE Arduino </p><br><pre><code class="plaintext hljs">char phone_no[]="+123456789012"; // Your phone number that receive SMS with counry code #include &lt;avr/sleep.h&gt; // ARDUINO sleep mode library #include &lt;SoftwareSerial.h&gt; // Sofrware serial library #include "HX711.h" // HX711 lib. https://github.com/bogde/HX711 #include &lt;EEPROM.h&gt; // EEPROM lib. HX711 scale0(10, 14); HX711 scale1(11, 14); HX711 scale2(12, 14); #define SENSORCNT 3 HX711 *scale[SENSORCNT]; SoftwareSerial mySerial(5, 4); // Set I/O-port TXD, RXD of GSM-shield byte pin2sleep=15; // Set powerON/OFF pin float delta00; // delta weight from start float delta10; float delta20; float delta01; // delta weight from yesterday float delta11; float delta21; float raw00; //raw data from sensors on first start float raw10; float raw20; float raw01; //raw data from sensors on yesterday float raw11; float raw21; float raw02; //actual raw data from sensors float raw12; float raw22; word calibrate0=20880; //calibration factor for each sensor word calibrate1=20880; word calibrate2=20880; word daynum=0; //numbers of day after start int notsunset=0; boolean setZero=false; float readVcc() { // Read battery voltage function long result1000; float rvcc; result1000 = analogRead(A5); rvcc=result1000; rvcc=6.6*rvcc/1023; return rvcc; } void setup() { // Setup part run once, at start pinMode(13, OUTPUT); // Led pin init pinMode(2, INPUT_PULLUP); // Set pullup voltage Serial.begin(9600); mySerial.begin(115200); // Open Software Serial port to work with GSM-shield pinMode(pin2sleep, OUTPUT);// Itit ON/OFF pin for GSM digitalWrite(pin2sleep, LOW); // Turn ON modem delay(16000); // Wait for its boot scale[0] = &amp;scale0; //init scale scale[1] = &amp;scale1; scale[2] = &amp;scale2; scale0.set_scale(); scale1.set_scale(); scale2.set_scale(); delay(200); setZero=digitalRead(2); if (EEPROM.read(500)==EEPROM.read(501) || setZero) // first boot/reset with hiding photoresistor //if (setZero) { raw00=scale0.get_units(16); //read data from scales raw10=scale1.get_units(16); raw20=scale2.get_units(16); EEPROM.put(500, raw00); //write data to eeprom EEPROM.put(504, raw10); EEPROM.put(508, raw20); for (int i = 0; i &lt;= 24; i++) { //blinking LED13 on reset/first boot digitalWrite(13, HIGH); delay(500); digitalWrite(13, LOW); delay(500); } } else { EEPROM.get(500, raw00); // read data from eeprom after battery change EEPROM.get(504, raw10); EEPROM.get(508, raw20); digitalWrite(13, HIGH); // turn on LED 13 on 12sec. delay(12000); digitalWrite(13, LOW); } delay(200); // Test SMS at initial boot // mySerial.println("AT+CMGF=1"); // Send SMS part delay(2000); mySerial.print("AT+CMGS=\""); mySerial.print(phone_no); mySerial.write(0x22); mySerial.write(0x0D); // hex equivalent of Carraige return mySerial.write(0x0A); // hex equivalent of newline delay(2000); mySerial.println("INITIAL BOOT OK"); mySerial.print("V Bat= "); mySerial.println(readVcc()); if (readVcc()&lt;3.5) {mySerial.print("!!! CHARGE BATTERY !!!");} delay(500); mySerial.println (char(26));//the ASCII code of the ctrl+z is 26 delay(3000); // raw02=raw00; raw12=raw10; raw22=raw20; //scale0.power_down(); //power down all scales //scale1.power_down(); //scale2.power_down(); } void loop() { attachInterrupt(0, NULL , RISING); // Interrupt on high lewel set_sleep_mode(SLEEP_MODE_PWR_DOWN); //Set ARDUINO sleep mode digitalWrite(pin2sleep, HIGH); // Turn OFF GSM-shield delay(2200); digitalWrite(pin2sleep, LOW); // Turn OFF GSM-shield delay(2200); digitalWrite(pin2sleep, HIGH); digitalWrite(13, LOW); scale0.power_down(); //power down all scales scale1.power_down(); scale2.power_down(); delay(90000); sleep_mode(); // Go to sleep detachInterrupt(digitalPinToInterrupt(0)); // turn off external interrupt notsunset=0; for (int i=0; i &lt;= 250; i++){ if ( !digitalRead(2) ){ notsunset++; } //is a really sunset now? you shure? delay(360); } if ( notsunset==0 ) { digitalWrite(13, HIGH); digitalWrite(pin2sleep, LOW); // Turn-ON GSM-shield scale0.power_up(); //power up all scales scale1.power_up(); scale2.power_up(); raw01=raw02; raw11=raw12; raw21=raw22; raw02=scale0.get_units(16); //read data from scales raw12=scale1.get_units(16); raw22=scale2.get_units(16); daynum++; delta00=(raw02-raw00)/calibrate0; // calculate weight changes delta01=(raw02-raw01)/calibrate0; delta10=(raw12-raw10)/calibrate1; delta11=(raw12-raw11)/calibrate1; delta20=(raw22-raw20)/calibrate2; delta21=(raw22-raw21)/calibrate2; delay(16000); mySerial.println("AT+CMGF=1"); // Send SMS part delay(2000); mySerial.print("AT+CMGS=\""); mySerial.print(phone_no); mySerial.write(0x22); mySerial.write(0x0D); // hex equivalent of Carraige return mySerial.write(0x0A); // hex equivalent of newline delay(2000); mySerial.print("Turn "); mySerial.println(daynum); mySerial.print("Hive1 "); mySerial.print(delta01); mySerial.print(" "); mySerial.println(delta00); mySerial.print("Hive2 "); mySerial.print(delta11); mySerial.print(" "); mySerial.println(delta10); mySerial.print("Hive3 "); mySerial.print(delta21); mySerial.print(" "); mySerial.println(delta20); mySerial.print("V Bat= "); mySerial.println(readVcc()); if (readVcc()&lt;3.5) {mySerial.print("!!! CHARGE BATTERY !!!");} delay(500); mySerial.println (char(26));//the ASCII code of the ctrl+z is 26 delay(3000); } }</code> </pre> <br><p>  Di baris pertama, dalam tanda kutip char phone_no [] = "+ 123456789012";  - alih-alih 123456789012 kami memasukkan nomor telepon kami dengan kode negara ke mana SMS akan dikirim. </p><br><p>  Sekarang klik tombol centang (di atas nomor satu di tangkapan layar di atas) - jika di bawah (di bawah triple di tangkapan layar) "Kompilasi selesai" - maka kita dapat mem-flash mikrokontroler. </p><br><p>  Jadi, USB-TTL terhubung ke ARDUINO dan komputer, kami memasukkan baterai yang sudah diisi ke dalam dudukan (biasanya pada arduino baru, LED mulai berkedip sekali dalam satu detik). </p><br><p>  Sekarang firmware - kami sedang berlatih untuk menekan tombol merah (perak) mikrokontroler - ini perlu dilakukan secara ketat pada saat tertentu !!! <br>  Apakah disana  Klik tombol "Unggah" (di atas dua di tangkapan layar), dan hati-hati melihat garis di bagian bawah antarmuka (di bawah tiga layar). <br>  Segera setelah tulisan "kompilasi" diganti dengan "unduh" - tekan tombol merah (reset) - jika semuanya beres - adaptor USB-TTL berkedip dengan gembira, dan tulisan "Diunduh" di bagian bawah antarmuka </p><br><p>  Sekarang sementara kami menunggu SMS tes untuk tiba di telepon, saya akan memberi tahu Anda bagaimana program ini bekerja: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/bb0/555/3f9/bb05553f9fb11ef00ae30a92be52839b.jpg" alt="Versi kedua dudukan debug"></p><br><p>  Dalam foto - versi kedua dudukan debug. </p><br><p>  Pertama kali sistem dihidupkan, ia memeriksa byte 500 dan 501 dari EEPROM, jika mereka sama, maka data kalibrasi belum ditulis, dan algoritma melanjutkan ke bagian pengaturan. <br>  Hal yang sama terjadi jika, ketika dihidupkan, photoresistor diarsir (dengan tutup dari pena) - mode reset parameter diaktifkan. </p><br><p>  Pengukur regangan harus sudah dipasang di bawah sarang, karena kami hanya memperbaiki tingkat awal nol dan kemudian mengukur perubahan berat (sekarang nol akan datang, karena kami belum menghubungkan apa pun). <br>  Pada Arduino, LED bawaan dari pin 13 akan berkedip. <br>  Jika reset tidak terjadi, LED menyala selama 12 detik. <br>  Setelah itu, SMS uji dikirim dengan pesan "INITIAL BOOT OK" dan tegangan baterai. <br>  Modul komunikasi mati, dan setelah 3 menit papan Arduino menempatkan papan HX711 ADC ke mode tidur dan tertidur dengan sendirinya. <br>  Penundaan seperti itu dilakukan agar tidak menangkap gangguan dari modul GSM yang berfungsi (setelah mematikannya, itu "font" untuk beberapa waktu). </p><br><p>  Selanjutnya, kami memiliki interupsi pada fotosensor atau bekerja pada pin kedua (ditambah mengangkat diaktifkan oleh fungsi pullup). <br>  Dalam hal ini, setelah tersandung selama 3 menit, keadaan photoresistor diperiksa untuk mengecualikan positif berulang atau salah. <br>  Apa karakteristiknya, tanpa penyesuaian apa pun, sistem ini bekerja 10 menit setelah matahari terbenam astronomi dalam cuaca mendung dan setelah 20 dalam cuaca cerah. <br>  Ya, sehingga setiap kali sistem tidak diatur ulang, setidaknya modul HX711 pertama harus terhubung (pin DT-D10, SCK-A0) </p><br><p>  Kemudian pembacaan load cell diambil, perubahan berat dari operasi sebelumnya (angka pertama dalam baris setelah Hive) dihitung dan dari mulai pertama, tegangan baterai diperiksa dan informasi ini dikirim dalam bentuk SMS: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c05/360/360/c05360360e4ac01a63cd0daa0f138a99.png" alt="Sistem sampel"></p><br><p>  Omong-omong, apakah Anda menerima SMS?  Selamat!  Kami setengah jalan!  Meskipun baterai dapat dilepas dari dudukannya, kita tidak perlu komputer lebih jauh. </p><br><p>  Ngomong-ngomong, pusat kontrol penerbangan ternyata sangat kompak sehingga bisa muat di stoples mayones, dalam kasus saya, kotak transparan berukuran 30x60x100mm (dari kartu nama) sangat pas. </p><br><p>  Ya, sistem tidur mengkonsumsi ~ 2.3mA - 90% karena modul komunikasi - tidak mati sepenuhnya, tetapi masuk ke mode siaga. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/26b/994/07e/26b99407efab87e00ffe017eea588666.jpg" alt="Bukan houston"></p><br><p>  Kami melanjutkan ke pembuatan sensor, sebagai permulaan, mari kita sentuh tata letak sensor: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/182/43b/cec/18243bcecc904c4018d7b2217cc72d9b.jpg" alt="Sensor lokasi"></p><br><p>  Ini adalah paket dari hive-top view. </p><br><p>  Secara klasik, 4 sensor dipasang di sudut-sudut (1,2,3,4) </p><br><p>  Kami akan mengukur secara berbeda.  Atau lebih tepatnya, bahkan di yang ketiga.  Seperti yang dilakukan orang-orang dari BroodMinder secara berbeda: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b49/fbe/1f3/b49fbe1f378d3e5b4b7320bf6ac83520.jpg" alt="Induk"></p><br><p>  Dalam desain ini, sensor dipasang pada posisi 1 dan 2, poin 3.4 didasarkan pada balok. <br>  Maka hanya setengah dari berat jatuh pada sensor. <br>  Ya, metode semacam itu kurang akurat, tetapi sulit untuk membayangkan bahwa lebah membangun semua bingkai dengan “lidah” dari sarang madu di sepanjang satu dinding sarang. </p><br><p>  Jadi, saya mengusulkan untuk mengurangi sensor ke titik 5 sama sekali - maka tidak perlu melindungi sistem, dan ketika menggunakan sarang cahaya, itu benar-benar perlu dilakukan dengan satu sensor. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/67b/10b/4cc/67b10b4ccdaf51f4f81574927ac21ca3.jpg" alt="Sensor dan Opsi Sensor"></p><br><p>  Secara umum, kami menguji dua jenis modul pada HX711, dua jenis sensor, dan dua opsi untuk menghubungkan mereka - dengan jembatan Wheatstone penuh (2 sensor) dan setengah ketika bagian kedua dilengkapi dengan resistor 1k dengan toleransi 0,1%. <br>  Tetapi metode yang terakhir tidak diinginkan dan bahkan tidak direkomendasikan oleh produsen sensor, jadi saya hanya akan menjelaskan yang pertama. </p><br><p>  Jadi, pada satu sarang, kita akan menginstal dua sel beban dan satu modul HX711, diagram pengkabelan adalah sebagai berikut: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6d2/39b/bef/6d239bbef099b427b0f6127a323a7e69.jpg"></p><br><p>  Dari papan ADC ke Arduino ada 5 meter dari kabel telepon 4-core - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kita ingat bagaimana lebah tidak menyukai perangkat GSM di dalam sarang</a> . </p><br><p>  Secara umum, pada sensor kami meninggalkan "ekor" 8 cm, kami membersihkan pasangan bengkok dan kami membuka semua seperti pada foto di atas. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/30d/ab9/f9c/30dab9f9cc87cd43929d9b86fec36f62.jpg" alt="Amati polaritasnya!"></p><br><p>  Saya ulangi sekali lagi - perhatikan polaritasnya! </p><br><p>  Jika kabel hitam dari load cell terhubung ke E + dari papan HX711, maka merah menuju ke A + </p><br><p>  Kalau tidak, alih-alih menambah berat, Anda akan menerima pengurangan, tetapi tidak masalah, dalam hal ini, cukup untuk menukar kabel merah dari sel beban (A + dan A-) pada papan ADC. </p><br><p>  Sebelum memulai bengkel tukang kayu, letakkan lilin / parafin dalam wadah yang cocok untuk melebur dalam bak air. </p><br><p>  Sekarang kita ambil balok kita dan membaginya menjadi tiga segmen 100 mm </p><br><p>  Selanjutnya, tandai alur longitudinal dengan lebar 25 mm, kedalaman 7-8 mm, menggunakan gergaji besi dan pahat untuk menghilangkan kelebihannya - profil berbentuk u harus keluar. </p><br><p>  Wax menghangat?  - Kami mencelupkan papan ADC kami di sana - ini akan melindungi mereka dari kelembaban / kabut: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a57/672/7f1/a576727f1b4385933b640b0dd1ef2a01.jpg" alt="Perlindungan adc terhadap kelembaban"></p><br><p>  Kami memiliki semuanya di atas dasar kayu (perlu untuk mengobatinya dengan antiseptik dari pembusukan): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a57/a6b/347/a57a6b34743c1f8b8add453e729fadea.jpg" alt="Majelis"></p><br><p>  Dan akhirnya, kami memperbaiki sensor dengan sekrup: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/94d/e43/541/94de435418f3d001e47b181935612e5f.jpg" alt="Sensor siap"></p><br><p>  Ada pilihan lain dengan pita listrik biru, tetapi untuk alasan kemanusiaan saya tidak membawanya ;-) </p><br><p>  Dari sisi Arduino kami melakukan hal berikut: </p><br><p>  Kami membersihkan kabel telepon kami, memutar kabel berwarna bersama-sama, nyaring. </p><br><p>  Setelah itu, kami menyolder ke kontak papan seperti pada foto: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a0c/6fc/0fe/a0c6fc0fedd0bc6a1c4f1e6929d5e4bc.jpg" alt="Terakhir"></p><br><p>  Itu saja, sekarang untuk pemeriksaan terakhir, letakkan sensor di sektor lingkaran, di atas - sepotong kayu lapis, nol pengontrol (kami meletakkan baterai dengan tutup di fotodioda dari pena). </p><br><p>  Dalam hal ini, LED pada Arduino akan berkedip dan SMS tes akan datang. </p><br><p>  Lalu kami melepas tutup dari sel fotosel, dan kami mengambil air dalam botol plastik 1,5 liter. <br>  Kami meletakkan botol di atas kayu lapis dan jika beberapa menit telah berlalu dari menyalakannya, pasang kembali tutup photoresistor (mensimulasikan matahari terbenam). </p><br><p>  Setelah tiga menit, LED pada arduino akan menyala, dan Anda akan menerima SMS dengan nilai berat sekitar 1 kg di semua posisi. </p><br><p>  Selamat!  Sistem berhasil dirakit! </p><br><p>  Jika sekarang kita membuat sistem bekerja kembali, maka pada kolom pertama dari bobot kita mendapatkan nol. </p><br><p>  Ya, dalam kondisi nyata diinginkan untuk mengarahkan fotoresistor secara vertikal ke atas. </p><br><p>  Sekarang saya akan memberikan panduan singkat tentang penggunaan: </p><br><ol><li>  Pasang pengukur regangan di bawah dinding belakang sarang (di bawah balok / papan pengganti ~ tebal 30 mm) </li><li>  Naungan photoresistor dan masukkan baterai - LED harus berkedip dan SMS tes dengan teks "BOOT AWAL OK" harus datang </li><li>  Posisikan unit pusat sejauh mungkin dari sarang dan agar kabel tidak mengganggu saat bekerja dengan lebah. <br>  Setiap malam, setelah matahari terbenam, SMS akan tiba dengan perubahan berat per hari dan sejak saat peluncuran. <br>  Ketika tegangan baterai mencapai 3.5V, SMS akan diakhiri dengan baris "!!! BATERAI BIAYA !!!" <br>  Waktu pengoperasian dari satu baterai dengan kapasitas 2600mAh adalah sekitar satu bulan. <br>  Dalam hal penggantian baterai, perubahan harian dalam berat sarang tidak diingat. </li></ol><br><p>  Apa selanjutnya </p><br><ol><li>  Untuk mengetahui cara memasukkan semua ini ke dalam proyek untuk github </li><li>  Mulai 3 keluarga lebah di sarang sistem Palivoda (atau orang bertanduk) </li><li>  Tambahkan "roti" - pengukuran kelembaban, suhu, dan yang paling penting - analisis dengung lebah. </li></ol><br><p>  Mari kita penuhi segalanya, milikmu dengan tulus, peternak lebah listrik Andrey </p><br><p>  PS Untuk publikasi baru tentang topik ini, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">beefree.xyz</a> <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444326/">https://habr.com/ru/post/id444326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444316/index.html">Surat dari jejaring sosial: apakah privasi Anda cukup baik? Dua masalah dan solusinya</a></li>
<li><a href="../id444318/index.html">Kisah sukses Nginx, atau "Segalanya mungkin, cobalah!"</a></li>
<li><a href="../id444320/index.html">Pensil eksotis: mendeteksi bunyi kedua dalam grafit biasa</a></li>
<li><a href="../id444322/index.html">Mengikuti jejak kalkulator: SpeedCrunch</a></li>
<li><a href="../id444324/index.html">Mengikuti Jejak Kalkulator: SpeedCrunch</a></li>
<li><a href="../id444328/index.html">Redesign UI sering buang-buang waktu</a></li>
<li><a href="../id444330/index.html">Serverless CMS akhirnya merupakan pesaing yang layak untuk Wordpress</a></li>
<li><a href="../id444332/index.html">Keamanan dan katering informasi: bagaimana manajer berpikir tentang produk TI</a></li>
<li><a href="../id444336/index.html">Daftar tangkapan cepat: apa perbedaan antara tautan yang lemah, kuat dan tidak dimiliki?</a></li>
<li><a href="../id444338/index.html">Enkapsulasi dalam Python 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>