<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∏ üïµüèª üëåüèæ Plataformas de prueba m√≥viles en la nube üïäÔ∏è üñï üòÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Y ahora ha llegado el momento en que nuestras necesidades de prueba se han llenado en el escritorio del probador. El alma pregunt√≥ a las nubes. En rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plataformas de prueba m√≥viles en la nube</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464433/"><p>  Y ahora ha llegado el momento en que nuestras necesidades de prueba se han llenado en el escritorio del probador.  El alma pregunt√≥ a las nubes.  En realidad no  En realidad no </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/7s/ww/2o7swwlml3ipcdpgc8qzmkyfdja.jpeg"></div><a name="habracut"></a><br><h1>  Nuestras metas y objetivos </h1><br><p>  <i>(lector apurado, puedes terminar en la siguiente secci√≥n)</i> </p><br><p>  Estamos desarrollando una aplicaci√≥n financiera para el mercado extranjero, que est√° disponible en diferentes formatos: para navegadores de escritorio (sitio web y extensi√≥n para Google Chrome), para navegadores m√≥viles, as√≠ como una aplicaci√≥n h√≠brida para tel√©fonos.  Debido a los detalles de la aplicaci√≥n, prestamos especial atenci√≥n a probar la aplicaci√≥n en varias configuraciones y dispositivos.  Para nosotros, el funcionamiento estable y seguro de la aplicaci√≥n es importante tanto en los navegadores de escritorio de nuestros clientes como en sus dispositivos. </p><br><p>  La raz√≥n para encontrar una granja de dispositivos basada en la nube para realizar pruebas para nosotros fue un cambio en el formato de trabajo desde la oficina a completamente remoto y distribuido (entre ciudades y pa√≠ses).  Es decir, si antes para la prueba pudi√©ramos ensamblar diferentes dispositivos en un grupo (literalmente) y probar manualmente el siguiente ensamblaje en una tabla al mismo tiempo, ahora se ha vuelto imposible hacer esto.  Adem√°s, con el crecimiento de la funcionalidad, con el fin de reducir el trabajo manual, automatizamos los conjuntos de regresi√≥n de pruebas importantes, lo que significa que despu√©s del ensamblaje debemos poder llamar a las pruebas en la configuraci√≥n y dispositivo deseados, y es mejor hacerlo tan pronto como el ensamblaje pase a la puesta en escena. </p><br><p>  En este caso, la soluci√≥n m√°s simple y obvia es usar emuladores para Android y simuladores para dispositivos iOS en nuestra cartera de DevOps.  Sin embargo, que es relativamente f√°cil de implementar en la computadora de trabajo del desarrollador, se convierte en una tarea dif√≠cil y costosa de usar en la nube.  Para que el mismo emulador de Android funcione r√°pidamente, se requiere un servidor x86 con soporte HAXVM, y para un simulador de iOS, solo se requiere un dispositivo MacOS con xcode.  Pero, desafortunadamente, incluso habiendo resuelto este problema, la pregunta sigue siendo la brecha entre el comportamiento del software en emuladores y dispositivos reales.  Por ejemplo, cada segundo lanzamiento detectamos errores extra√±os en dispositivos Samsung que no se pueden reproducir en emuladores.  Bueno, y, por supuesto, la ex√≥tica "delicia" ex√≥tica "china" con errores √∫nicos y que tambi√©n me gustar√≠a encontrar en la etapa de desarrollo. </p><br><p>  Como resultado, entendimos la necesidad de usar una granja de dispositivos m√≥viles en la nube, en la que pudi√©ramos ejecutar r√°pidamente nuestras pruebas y, si fuera necesario, depurar manualmente.  Y a lo que todo nuestro equipo tendr√≠a acceso desde cualquier parte del mundo (nos encanta trabajar incluso cuando viajamos). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/mv/-3/tkmv-3efjgaskkz1tbveeo0rh-4.jpeg"></div><br><p>  Nuestras pruebas est√°n escritas en Python 3.7 (esto ser√° importante m√°s adelante), ya que en la pila usamos tox + pytest + Selenium + Appium, bueno, un peque√±o conjunto de bibliotecas de python √∫tiles.  Definitivamente probaremos m√°quinas en Windows y MacOS con los navegadores Edge, Firefox, Chrome, Safari, as√≠ como dispositivos Android e iOS con navegadores y una aplicaci√≥n.  No tenemos muchas pruebas para cada dispositivo (menos de mil), pero cuando las pruebas en un solo hilo en los dispositivos, un conjunto completo lleva un par de horas.  Por lo tanto, el criterio para elegir un servicio para nosotros ser√°: </p><br><ul><li>  Pruebas API (Selenium / Appium) </li><li>  IOS, dispositivos Android </li><li>  Admite pruebas de navegador m√≥vil </li><li>  Soporte para descargar y probar aplicaciones </li><li>  Dispositivo de referencia (GooglePixel (Android 9) y iPhone X (iOS 12+)) </li><li>  Depuraci√≥n manual </li><li>  Registro (m√°s capturas de pantalla, grabaci√≥n de una ejecuci√≥n de video) </li><li>  Parque de dispositivos y disponibilidad </li><li>  Tiempo promedio de prueba </li><li>  Precio </li></ul><br><p>  Deseable, pero no necesario: </p><br><ul><li>  Nivel de servicio de soporte de Python (lo que sea que eso signifique) </li><li>  Soporte para dispositivos de escritorio \ navegadores </li></ul><br><h1>  Resultados de estudios de mercado </h1><br><p>  Durante una semana navegu√© por Internet y prob√© una docena de servicios diferentes.  La mayor√≠a de ellos proporcionan tiempo libre para oportunidades de prueba.  Los resultados de mi investigaci√≥n, m√°s conclusiones son subjetivas.  Su opini√≥n y resultados pueden diferir de los m√≠os. </p><br><p>  En Habr√© encontr√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo para 2017</a> dedicado al mismo tema, pero desde entonces han aparecido nuevos servicios y nuestra tarea es un poco m√°s estricta.  Entonces, por ejemplo, los servicios ‚Äúsabrosos‚Äù como Samsung Remote Test Lab, Firebase Test Lab, Xamarin Test Cloud, por desgracia, no nos convienen. </p><br><h2>  Fuera del juego </h2><br><h3>  Laboratorio de prueba remota de Samsung </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/jg/ky/hdjgkycr6wiajxi8ucwp6spgasa.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  El servicio brinda una oportunidad gratuita para intentar trabajar con varios dispositivos Samsung, incluidos los m√°s nuevos, incluidos televisores o relojes inteligentes en Tizen (la limitaci√≥n es un m√°ximo de 10 horas por d√≠a, por d√≠a, el servicio otorga 10 cr√©ditos gratis, lo que equivale a 2.5 horas por d√≠a , la sesi√≥n m√≠nima es de media hora (2 cr√©ditos)).  Esto es muy bueno para la depuraci√≥n y para encontrar las causas ra√≠z de los errores en ciertos dispositivos, el servicio incluso proporciona acceso a la depuraci√≥n remota (puente de depuraci√≥n remota, acceso a la consola y registros del sistema), pero, desafortunadamente, el servicio no proporciona acceso API a los dispositivos.  La √∫nica forma de "automatizar" es registrar las acciones del usuario y luego reproducirlas en su herramienta de automatizaci√≥n local. </p><br><h3>  Laboratorio de pruebas de Firebase </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/4r/t0/ix4rt0ohclapstllgnbyl5726qm.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Un servicio de Google le permite probar su aplicaci√≥n en dispositivos con Android e iOS de forma gratuita (no del todo).  Pero hay una advertencia: el servicio requiere el uso de herramientas de automatizaci√≥n nativas (UIAtomator2 y Espresso para Android y XCTest para iOS), o el uso de ara√±as autom√°ticas (rastreador) para Android: Robo Test y Game Loop Test.  Es decir, usar UIAutomator y Selenium, por desgracia, no funcionar√°.  En cuanto a gratis, el paquete gratuito est√° limitado a 10 pruebas en emuladores y cinco en dispositivos reales por d√≠a.  Si necesita m√°s, entonces por cada hora adicional tendr√° que pagar otros $ 1 y $ 5, respectivamente.  En general, para nuestras tareas, esta ser√≠a una buena opci√≥n si escribi√©ramos pruebas desde cero, pero no tengo ganas de reelaborar varios cientos de pruebas, es simplemente costoso.  Y resulta que tendr√≠amos que divergir mucho en las pruebas entre versiones de escritorio y dispositivos m√≥viles, lo que complicar√≠a en gran medida el soporte. </p><br><h3>  Centro de aplicaciones de Visual Studio </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/_o/pr/3g_oprmudubtaulwkgqjahqot74.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Antigua nube de prueba de Xamarin.  Este servicio finalmente es compatible con Appium y permite realizar pruebas en miles de dispositivos diferentes.  Pero, como en el caso de otros productos de Microsoft, est√° firmemente clavado en la pila nativa, lo que significa que para usar este servicio necesitar√° la presencia de VisualStudio y el requisito de escribir el proyecto y las pruebas exclusivamente en Java.  Pero si de repente tienes una pila Java (con MS VS), entonces el precio es de $ 99 por ranura de dispositivo por mes, lo cual es relativamente liberal. </p><br><h2>  Servicios para elegir </h2><br><h3>  AWS Device Farm </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/pb/r9/znpbr9hu4dkgiqjcwoudrviaid8.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Quiz√°s la granja m√°s poderosa para probar en dispositivos virtuales y reales hoy (m√°s de 2500 dispositivos).  Para nosotros, este era un servicio prioritario, ya que nuestros servicios se acaban de implementar en la nube de AWS, adem√°s, los precios por minuto del dispositivo a partir de 17 centavos.  AWS le permite trabajar con marcos nativos, as√≠ como con Appium, Calabash y otros marcos de prueba automatizados.  Adem√°s de las pruebas automatizadas, el servicio proporciona la capacidad de depurar manualmente.  Bueno, 1000 minutos "para probar" es muy tentador.  Sin embargo, el diablo, como siempre, est√° en los detalles.  En t√©rminos de pruebas, AWS tiene varias caracter√≠sticas. </p><br><p>  Nosotros, como ya mencion√©, usamos Python 3.7, sin embargo, AWS Device Farm todav√≠a funciona con Python 2.7.6 (consulte el manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ).  Y fuera de la caja no sabe nada sobre tox.  Para nosotros, esto significa la ausencia de una serie de capacidades y la necesidad de procesar parte de las pruebas para garantizar la compatibilidad con versiones anteriores y crear un entorno que evite el tox.  Adem√°s, un mecanismo bastante extra√±o para descargar un paquete de prueba (archivo) tambi√©n implica descargar la aplicaci√≥n para la prueba.  En nuestro caso, si probamos nuestro servicio a trav√©s de un navegador m√≥vil, descargar la aplicaci√≥n es un paso adicional.  Sin embargo, puede reemplazar la aplicaci√≥n con un "c√≥digo auxiliar" y crear un venv con Python 3.7 en el entorno Python 2.7, y luego crear un entorno con toxina, que ... </p><br><div style="text-align:center;"><img src="https://i.gifer.com/embedded/download/S5u.gif"></div><br><p>  Amazon no ser√≠a Amazon si todo se basara en versiones antiguas.  Como alternativa (y ning√∫n servicio tendr√° esa oportunidad a continuaci√≥n) AWS sugiere usar AWS Device Farm a trav√©s de la AWS CLI (interfaz de l√≠nea de comandos) (consulte el manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ).  Es decir, podemos conectar el dispositivo desde la nube como un dispositivo real a nuestra computadora en el modo de depuraci√≥n remota, sin embargo, habiendo reemplazado previamente adb con el parcheado (no hay binario para linux en la lista de binarios, pero estoy seguro de que existe en la naturaleza).  Es decir, al configurar la CLI de AWS, para las pruebas tendremos que ejecutar solo unos pocos comandos (porque no vamos a utilizar la GUI como una aplicaci√≥n de granja de dispositivos de AWS). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ln/tv/kalntvkkefpkcemawikixglisfq.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de c√≥digo</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 <span class="hljs-comment"><span class="hljs-comment">#  AWS SDK https://pypi.org/project/boto3/ aws_client = boto3.client('devicefarm') response = aws_client.list_devices() #     device_arn = '' for phone in response["devices"]: if phone['name'] == "Google Pixel XL": #      (  ) device_arn = phone['arn'] #   Amazon Resource Name break project_arn = aws_client.list_projects()['projects'][0]['arn'] #        #      ,    SSH    response = aws_client.create_remote_access_session(projectArn=project_arn, deviceArn=device_arn, remoteDebugEnabled=True, ssh-public-key=SSH_KEY) #     adb devices     uuid Google Pixel XL  AWS Device Farm,   iOS #     ... RUN_TESTS() ... #    ( )    aws_client.stop-remote-access-session(arn=response['remoteAccessSession']['arn']) aws_client.delete_remote_access_session(arn=response['remoteAccessSession']['arn'])</span></span></code> </pre> </div></div><br><p>  Si queremos probar la aplicaci√≥n, tambi√©n se puede descargar a trav√©s del SDK de AWS. </p><br><p>  Pero no dije un matiz clave aqu√≠.  Nos topamos con el diablo nuevamente en detalle.  El hecho es que la opci√≥n de depuraci√≥n remota est√° disponible solo si usamos el plan de dispositivos privados para AWS.  En primer lugar, esta funci√≥n est√° disponible solo a pedido (debe escribir una carta a Amazon), en segundo lugar, la opci√≥n est√° disponible para la regi√≥n us-west-2 y, en tercer lugar, esta opci√≥n nos devuelve al escenario cuando tenemos un servidor para prueba con un conjunto (o al menos uno) de dispositivos conectados a √©l.  Las ventajas son obvias: podemos usar este dispositivo exclusivamente, que obviamente es m√°s seguro y r√°pido, por otro lado, perdemos la principal ventaja: la elecci√≥n y la variedad de dispositivos. </p><br><p>  Me gust√≥ el servicio en su conjunto, pero para nuestro equipo, por desgracia, hay demasiados "peros" en √©l. </p><br><h3>  Bitbar </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5a/gg/lp/5agglpijttxv29qnnlrgr12ksgu.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Esta granja m√≥vil basada en la nube es la primera en caer en los motores de b√∫squeda.  Y no en vano.  Mirando hacia el futuro, dir√© que este servicio tiene la mejor opci√≥n de dispositivos (solo dispositivos reales) y el mejor rendimiento en t√©rminos de una prueba en comparaci√≥n con otras.  Bitbar ofrece servicios para pruebas remotas manuales y automatizadas (usando Appium y otros marcos), y tambi√©n, si lo desea, le permite usar algo similar al rastreador de Firebase Test Lab (Robot Test) - AI TestBot.  La principal ventaja de BitBar es un n√∫mero ilimitado de subprocesos de prueba (es decir, puede probar inmediatamente su aplicaci√≥n en cientos de dispositivos) seleccionando de antemano el conjunto de dispositivos requerido.  Si el dispositivo est√° ocupado, se seleccionar√° otro igual o la sesi√≥n se pondr√° en cola.  Al final de la ejecuci√≥n de la prueba, se genera un registro, un registro de prueba, los resultados se guardan y la notificaci√≥n se env√≠a por correo.  Aunque existen oportunidades para configurar la interacci√≥n con diferentes herramientas de CI / CD.  El servicio tambi√©n proporciona la capacidad de probar los navegadores de escritorio en diferentes resoluciones y, si lo desea, crear, como en AWS, sus dispositivos privados.  Es cierto que debe pagar todos estos chips: cada minuto de prueba costar√° $ 0.29. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oq/te/_v/oqte_v0jovfktqprbfpjzyt6kbw.jpeg"></div><br><p>  El proceso de configuraci√≥n es simple, como la interacci√≥n de dos dedos con asfalto: </p><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://appium.bitbar.com/wd/hub'</span></span> desired_capabilities = { <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Motorola Google Nexus 6'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceId'</span></span>: <span class="hljs-string"><span class="hljs-string">'FA7AN1A00253'</span></span>, <span class="hljs-string"><span class="hljs-string">'newCommandTimeout'</span></span>: <span class="hljs-number"><span class="hljs-number">12000</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-comment"><span class="hljs-comment">#     Chrome,    app 'bitbar_apiKey': 'BITBAR_API_KEY', 'bitbar_project': 'Software Testing', 'bitbar_testrun': 'Test run #N', 'bitbar_device': 'Motorola Google Nexus 6', 'bitbar_app': '23425235' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """</span></span></code> </pre></div></div><br><h3>  Kobiton </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/jx/7z/pmjx7zlxb9om476zsp_qd24tqb0.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Otro servicio que brinda servicios de prueba en dispositivos reales.  La elecci√≥n de dispositivos es m√°s modesta que Bitbar (350+), la disponibilidad de dispositivos tambi√©n es menor.  En general, es muy similar en su funcionalidad b√°sica a BitBar, permite pruebas manuales y autom√°ticas (usando Appium, aqu√≠ sin elegir marcos).  No hay forma de probar en navegadores de escritorio.  El servicio tambi√©n le permite organizar pruebas con un n√∫mero ilimitado de sesiones y dispositivos, pero no puede crear un grupo de dispositivos aqu√≠.  El precio del servicio es muy liberal: desde $ 0,10 por minuto adicional de prueba, pero durante el per√≠odo de prueba not√© cierta inestabilidad del servicio, Internet a menudo se cay√≥ en los dispositivos, una vez que el dispositivo se colg√≥.  Adem√°s, si el dispositivo est√° ocupado o reservado, todas las pruebas en ejecuci√≥n fallar√°n.  Es decir, a diferencia de Bitbar, no hay colas de las sesiones.  Es cierto que se puede organizar a bajo costo.  Kobiton tiene su propia API peque√±a. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0b/8n/p9/0b8np9ceky_s0e2schcgitmgi4w.jpeg"></div><br><p>  La configuraci√≥n tambi√©n es muy simple, a diferencia del bitbar, casi el Appium original. </p><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> <span class="hljs-comment"><span class="hljs-comment">#  base64EncodedBasicAuth = base64.b64encode(bytes(f'{USERNAME}:{API_KEY}', 'utf-8')) headers = { 'Authorization': f'Basic {base64EncodedBasicAuth}' } reply = requests.get(f'https://api.kobiton.com/v1/apps', params={ }, headers = headers) #     deviceId headers = { 'Authorization': base64EncodedBasicAuth, 'Accept': 'application/json' } reply = requests.get(f'https://api.kobiton.com/v1/devices/{deviceId}/status', params={ }, headers = headers) #   ,      while (reply['isOnline'] == False or reply['isBooked'] == True): sleep(60) #   com_executor = f'https://{USERNAME}:{API_KEY}@api.kobiton.com/wd/hub' desired_capabilities = { 'browserName': 'Chrome', # The generated session will be visible to you only. 'sessionName': 'Automation test session', 'sessionDescription': '', 'deviceOrientation': 'portrait', 'captureScreenshots': True, 'deviceGroup': 'KOBITON', # For deviceName, platformVersion Kobiton supports wildcard # character *, with 3 formats: *text, text* and *text* # If there is no *, Kobiton will match the exact text provided 'deviceName': 'Pixel 2', 'platformName': 'Android', 'platformVersion': '9' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """ #   RUN_TESTS() """ ... """ #       ,     (   ) headers = { 'Authorization': {base64EncodedBasicAuth} } requests.delete(f'https://api.kobiton.com/v1/sessions/{sessionId}/terminate', params={ }) """ ... """</span></span></code> </pre></div></div><br><h3>  Pila de navegador </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/zt/ed/ugztedawkg6ed9okmi1htaactgc.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Buen viejo BrowserStack.  Se escribieron muchas cosas sobre √©l y muchos de los que lo usan.  S√≠, permite realizar pruebas no solo en diferentes navegadores, sino tambi√©n en diferentes dispositivos.  Tanto en modo manual como usando Selenium / Appium.  Dependiendo de sus necesidades, en navegadores m√≥viles o usando su aplicaci√≥n.  En t√©rminos de capacidades, todo es igual a los dos servicios en la parte superior, pero a diferencia de ellos, ya hay restricciones en el n√∫mero de sesiones simult√°neas.  Es cierto, por el contrario, paga $ 199 por mes y prueba por tiempo ilimitado.  Hay complementos para Jenkins, Travis CI, TeamCity, su rica API, excelentes registros y una gran selecci√≥n de dispositivos y navegadores de escritorio en diferentes configuraciones.  Es cierto que, seg√∫n lo que est√© probando, la configuraci√≥n variar√°, para probar los navegadores (incluso los m√≥viles), se utiliza un concentrador Selenium y, para las aplicaciones, un concentrador Appium.  Adem√°s, para probar la aplicaci√≥n, deber√° pagar por separado.  Es decir, para probar tanto los navegadores m√≥viles como las aplicaciones, debe pagar $ 199 y otros $ 159 (el precio de un dispositivo para probar al mismo tiempo). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/xv/zz/xixvzzad9ae94ktoao0yzkodra8.png"></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de muestra para la aplicaci√≥n</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://USERNAME:API_KEY@hub-cloud.browserstack.com/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'app'</span></span>: app_name, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de muestra para un navegador m√≥vil</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> selenium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'http://USERNAME:API_KEY@hub.browserstack.com:80/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Experimental </h3><br><img src="https://habrastorage.org/webt/do/7d/uv/do7duvaiufyiok6muyz_zuerya4.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Otro servicio que brinda la capacidad de probar de forma manual y autom√°tica tanto los dispositivos m√≥viles como los navegadores de escritorio utilizando Appium, Selenium y otros marcos.  Como en el caso de BrowserStack, el n√∫mero de sesiones simult√°neas es limitado, pero los precios son ligeramente diferentes: para probar aplicaciones m√≥viles, el servicio solicita $ 199 por mes, y para las pruebas entre navegadores solo $ 39 (para una sesi√≥n simult√°nea).  Adem√°s, al igual que Bitbar con AWS, puede construir su propio laboratorio privado con dispositivos que, sin embargo, se pueden mezclar con una nube p√∫blica de miles de dispositivos, emuladores y navegadores de diferentes versiones y plataformas (MacOS, Windows), si lo desea.  De las caracter√≠sticas interesantes: la disponibilidad de extensiones para IntelliJ y Eclipse, su propia herramienta Appium Studio, que le permite utilizar la funcionalidad avanzada de dispositivos como interactuar con FaceID, control de voz, escaneo de c√≥digos de barras, configuraci√≥n de calidad de comunicaci√≥n, ubicaci√≥n geogr√°fica y m√°s.  De las desventajas, puedo nombrar un conjunto extra√±o de dispositivos para el per√≠odo de prueba, la arancelizaci√≥n draconiana para el per√≠odo de prueba, as√≠ como el requisito de usar el correo corporativo (gmail no funcionar√°). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/z3/wy/fiz3wy8hud0aa5zd28-86zluljg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de c√≥digo</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://Uhttps://cloud.seetest.io/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">"deviceName"</span></span>: <span class="hljs-string"><span class="hljs-string">"iPhone X"</span></span>, <span class="hljs-string"><span class="hljs-string">"accessKey"</span></span>: API_KEY, <span class="hljs-string"><span class="hljs-string">"platformName"</span></span>: <span class="hljs-string"><span class="hljs-string">"ios"</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceQuery"</span></span>: <span class="hljs-string"><span class="hljs-string">"'@os='ios' and @version='12.1.3' and @category='PHONE'"</span></span>, } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Saucelabs </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/vz/sy/jovzsyon88bmkdxcknin36wro8k.jpeg"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  Uno de los servicios de prueba en la nube m√°s antiguos.  Casi 400 dispositivos reales diferentes, una amplia selecci√≥n de simuladores y emuladores, incluidos emuladores at√≠picos de dispositivos Samsung, existen navegadores de escritorio para varios sistemas operativos, incluido Linux.  Automatizaci√≥n en Appium / Selenium y frameworks nativos.  La principal ventaja del servicio es la presencia de una amplia colecci√≥n de configuraciones, incluidos sistemas operativos antiguos, navegadores y dispositivos.  SauceLabs tambi√©n tiene un l√≠mite en el n√∫mero de sesiones simult√°neas, pero aqu√≠ la opci√≥n m√°s barata incluye no una, sino dos sesiones simult√°neas.  Lo que es inusual: los planes de tarifas en dispositivos reales y en emuladores son diferentes.  Por lo tanto, las opciones m√°s baratas, que incluyen dos sesiones con 2000 minutos de prueba por mes en emuladores, costar√°n $ 149 y en dispositivos reales ya $ 349.  Hay integraci√≥n con CI / CD, Slack. Desafortunadamente, no pude probar SauceLabs en vivo, porque lamentablemente, el registro falla, posiblemente debido a la regi√≥n, pero no puedo decirlo con certeza. </p><br><h3>  Perfecto </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/bj/h2/plbjh2r1jax9nmtdxkq08sxzfvs.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> </p><br><p>  El √∫ltimo proveedor de pruebas en la nube es visualmente m√°s similar a Experitest, pero sin funcionalidad avanzada.  Hay un lenguaje de script simple.  Es muy extra√±o, pero en el servicio de tarifas no corporativas (Enterprise) no hay una propuesta para probar en navegadores de escritorio, tambi√©n es imposible monitorear la ejecuci√≥n de las pruebas en tiempo real (solo si esto no es una prueba manual).  Cerca de cien dispositivos diferentes est√°n disponibles para pruebas.  Existe integraci√≥n con Jenkins y, curiosamente, con herramientas de administraci√≥n de pruebas como HP ALM, IBM Rational, TFS.  Tambi√©n est√°n disponibles planes de tarifas muy extra√±os, como 5 horas de prueba por mes (en t√©rminos de minutos hasta $ 0.33 (este es el servicio m√°s caro)), aunque con la capacidad de comprar un paquete con horas adicionales, pero de nuevo, es extra√±o que no haya por minuto o al menos facturaci√≥n por hora despu√©s del hecho.  En cuanto a la facilidad de uso, durante el per√≠odo de prueba solo est√°n disponibles las pruebas manuales, as√≠ como un laboratorio com√∫n, para que todos los lanzamientos de diferentes usuarios caigan en un mont√≥n.  Por lo tanto, es imposible juzgar exactamente la conveniencia y la velocidad del servicio.  Se puede ver que el servicio se centra principalmente en grandes clientes corporativos, mientras que, al menos seg√∫n la informaci√≥n disponible, las capacidades de este proveedor son las m√°s modestas que he probado. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/l_/so/4xl_so-pdliodrvlt7huphfnybe.jpeg"></div><br><br><h2>  Resultados resumidos </h2><br><p>  Seg√∫n todos los criterios de selecci√≥n, los servicios son muy similares, la diferencia entre los servicios en su rendimiento y precio (si no hay caracter√≠sticas, por ejemplo, como en el caso de AWS).  Por lo tanto, resumiremos los datos de la investigaci√≥n en una tabla, veremos la velocidad de los servicios (teniendo en cuenta la conexi√≥n a trav√©s de la VPN de EE. UU.), As√≠ como el precio, por conveniencia, comparando el tiempo promedio de prueba mensual en dispositivos (5 lanzamientos por mes, 2 horas de prueba en dispositivos Android e iOS = 20 horas).  Como valores de referencia, uso datos de mi computadora local con un emulador, de nuevo conect√°ndome para la pureza del experimento a trav√©s de una VPN en los EE. UU.). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/1k/ym/m91kymmminidgp5q_ivtq110dqs.png"></div><br><h1>  Conclusiones </h1><br><p>  Fue bastante interesante para m√≠ investigar y elegir el servicio adecuado para nuestro equipo.  En general, existen soluciones para todos los gustos y para cualquier tarea, y los servicios resultaron ser muy similares en t√©rminos de caracter√≠sticas e implementaci√≥n.  Como resultado, dependiendo de sus tareas, recomendar√≠a la siguiente opci√≥n: </p><br><p>  <b>Opci√≥n A</b> : si la velocidad de verificaci√≥n es importante para usted y necesita verificar docenas de dispositivos diferentes a la vez, su elecci√≥n es <b>Bitbar</b> . </p><br><p>  <b>Opci√≥n B</b> : si tiene prioridad en los resultados de los dispositivos de referencia y las pruebas de configuraci√≥n son secundarias (pero necesarias), su elecci√≥n es <b>BrowserStack</b> .  Este es solo nuestro caso, ya que estad√≠sticamente, el 90% de todos los errores son errores de plataformas y dispositivos de referencia (la mayor√≠a de las veces los errores son comunes para todas las plataformas de referencia a la vez).  El 8% restante son errores de MS IE, con la negativa del soporte de IE: 2% de errores de MS Edge y 0.5% de errores en configuraciones espec√≠ficas. </p><br><p>  <b>Opci√≥n B</b> : si est√° interesado en verificar condiciones especiales, como comunicaciones de baja calidad, geolocalizaci√≥n o Touch / FaceID, su elecci√≥n es <b>Experitest</b> . </p><br><p>  Pero a largo plazo, si su empresa ocupa una oficina grande, su trabajo es a tiempo completo, entonces, como regla, organizar sus propios, incluso mini laboratorios con un servidor para emuladores con 2-3 dispositivos conectados, costar√° menos y m√°s conveniente que usar servicios </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464433/">https://habr.com/ru/post/464433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464415/index.html">Nuevo servicio de sugerencias para buscar hh.ru</a></li>
<li><a href="../464417/index.html">10 marcos PHP populares en 2019</a></li>
<li><a href="../464421/index.html">Radio Viber - todas las estaciones de radio en el messenger en l√≠nea</a></li>
<li><a href="../464423/index.html">¬øC√≥mo gestionar el tiempo? Respuesta independiente</a></li>
<li><a href="../464429/index.html">Los 10 errores m√°s comunes al trabajar con la plataforma Spring. Parte 1</a></li>
<li><a href="../464435/index.html">C√≥mo no ahogarse en un mar de tecnolog√≠a y enfoques: la experiencia de 50 expertos</a></li>
<li><a href="../464437/index.html">C√≥mo el equipo de desarrollo puede ganar m√°s creando sitios de tr√°fico [Gu√≠a de implementaci√≥n]</a></li>
<li><a href="../464443/index.html">Natas Web. Paso de la plataforma CTF destinada a explotar vulnerabilidades web. Parte 2</a></li>
<li><a href="../464445/index.html">¬øPor qu√© es realmente imposible ser vegetariano?</a></li>
<li><a href="../464447/index.html">Cuente Scoring de la Fer o un estudio sobre calificaci√≥n crediticia como parte de la ampliaci√≥n de los horizontes. Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>