<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèº‚Äçü§ù‚Äçüßëüèº ü§® üìà Biblioth√®que Java Open Source avec filtrage stacktrace, analyse de cha√Æne silencieuse et comparaison de version üëºüèΩ ‚ôãÔ∏è ü•ã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au fil du temps dans diff√©rents emplois, je suis tomb√© sur un besoin de plusieurs utilitaires que je ne pouvais pas trouver disponibles √† l'√©poque. Et...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Biblioth√®que Java Open Source avec filtrage stacktrace, analyse de cha√Æne silencieuse et comparaison de version</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> Au fil du temps dans diff√©rents emplois, je suis tomb√© sur un besoin de plusieurs utilitaires que je ne pouvais pas trouver disponibles √† l'√©poque.  Et j'ai vu que j'en avais plusieurs fois besoin.  J'ai donc √©crit ma propre petite biblioth√®que que j'ai trouv√©e tr√®s utile.  Je viens donc de le publier en tant que biblioth√®que java open-source. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Voici le lien Github</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc en ligne est disponible ici</a> <br><br>  De plus, cette biblioth√®que est disponible sur Maven Central.  Voici les artefacts Maven (la version 1.5.0.8 est la derni√®re au moment de la r√©daction de cet article mais pourrait changer √† l'avenir. Pour rechercher la derni√®re version, recherchez l'artefact "MgntUtils" sur <a href="http://search.maven.org/">http: //search.maven. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Vous trouverez ci-dessous une br√®ve explication de ce qui s'y trouve.  La biblioth√®que est livr√©e avec un JavaDoc joliment √©crit (j'esp√®re) avec une description d√©taill√©e.  Voici donc la liste des fonctionnalit√©s: <br><a name="habracut"></a><br><h3>  Filtre de bruit Stacktrace </h3><br>  D'apr√®s mon exp√©rience, cette fonctionnalit√© √©tait la plus g√©n√©rique et la plus utile pour moi.  Stacktrace est une bou√©e de sauvetage lorsque vous d√©boguez ou essayez de comprendre ce qui s'est mal pass√© dans votre application.  Cependant, lorsque vous travaillez avec des journaux c√¥t√© serveur, vous pouvez rencontrer une trace de pile √©norme qui contient la plus longue queue inutile de divers cadres et packages li√©s au serveur d'applications.  Et quelque part dans cette pile, il y a plusieurs lignes d'une trace pertinente et elles peuvent √™tre dans diff√©rents segments s√©par√©s par des informations inutiles.  Cela devient un cauchemar de rechercher une substance pertinente.  Voici un lien qui d√©crit le m√™me probl√®me avec des exemples r√©els (pas pour les plus timides) <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  Donc dans ma biblioth√®que, il y a une classe qui s'appelle <i>TextUtils</i> et elle a la m√©thode <i>getStacktrace ()</i> avec plusieurs signatures surcharg√©es.  Il prend une instance Throwable et permet de d√©finir un pr√©fixe de package des packages pertinents. <br><br>  De plus, le m√™me utilitaire (√† partir de la version 1.5.0.3) a la m√©thode <i>getStacktrace ()</i> qui prend l'interface CharSequence au lieu de Throwable et permet ainsi de filtrer et de raccourcir stacktrace stock√© sous forme de cha√Æne de la m√™me mani√®re qu'un stacktrace extrait de Throwable.  Ainsi, essentiellement les traces de pile peuvent √™tre filtr√©es "√† la vol√©e" au moment de l'ex√©cution ou ult√©rieurement √† partir de n'importe quelle source de texte telle qu'un journal.  (Juste pour clarifier - l'utilitaire ne prend pas en charge l'analyse et la modification de l'int√©gralit√© du fichier journal. Il prend en charge le filtrage uniquement d'une trace de pile transmise sous forme de cha√Æne. Donc, si quelqu'un veut filtrer les exceptions dans le fichier journal, il devra analyser le fichier journal et extraire les traces de pile en tant que cha√Ænes distinctes, puis peut utiliser cet utilitaire pour filtrer chaque trace de pile individuelle). <br><br>  Voici un exemple d'utilisation.  Supposons que votre code d'entreprise r√©side toujours dans des packages commen√ßant par "com.plain. *". Vous d√©finissez donc un tel pr√©fixe et proc√©dez ainsi <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  cela filtrera tr√®s intelligemment toutes les parties inutiles de la trace, vous laissant un stacktrace tr√®s concis.  De plus, j'ai trouv√© tr√®s pratique de pr√©d√©finir le pr√©fixe, puis d'utiliser simplement la m√©thode pratique <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Il en sera de m√™me.  Pour pr√©d√©finir le pr√©fixe, utilisez simplement la m√©thode <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Si vous souhaitez pr√©d√©finir cette valeur par configuration, √† partir de la version 1.1.0.1 de la biblioth√®que, vous pouvez d√©finir la variable d'environnement " <b>MGNT_RELEVANT_PACKAGE</b> " ou la propri√©t√© syst√®me " <b>mgnt.relevant.package</b> " sur la valeur " <i>com.plain</i> " <i>.</i> Et la propri√©t√© sera d√©fini sur cette valeur sans que vous <i>appeliez la</i> m√©thode <i>TextUtils.setRelevantPackage ("com.plain.");</i>  explicitement dans votre code.  Notez que la valeur de la propri√©t√© System aurait priorit√© sur la variable d'environnement si les deux √©taient d√©finies.  Juste un rappel qu'avec la propri√©t√© System vous pouvez l'ajouter dans votre ligne de commande en utilisant l'option -D: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  De plus, si vous utilisez une version ant√©rieure √† 1.1.0.1 de cette biblioth√®que ou si vous ne souhaitez pas utiliser la variable d'environnement ou la propri√©t√© syst√®me mentionn√©e ci-dessus et que vous utilisez l'environnement Spring, vous pouvez pr√©d√©finir le pr√©fixe en ajoutant le segment suivant √† votre configuration Spring: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc explique tout en d√©tail.  Mais voici un petit teaser: vous obtiendrez un stacktrace suivant: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  au lieu de <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Analyse silencieuse des cha√Ænes en entier, long, etc. </h3><br>  La m√™me classe <i>TextUtils</i> fournit des m√©thodes pour analyser silencieusement String (sans exception jamais jet√©e) en types Double, Long, Integer, Short et Byte.  Les m√©thodes sont appel√©es <i>parseStringToLong ()</i> <i>parseStringToInteger ()</i> etc.  Ils prennent tous 4 arguments: <br><br><ol><li>  Une cha√Æne √† analyser </li><li>  Une impl√©mentation de Number (Double, Long, Integer, Short ou Byte) pour servir de valeur par d√©faut en cas de probl√®me d'analyse </li><li>  Une cha√Æne √† imprimer en tant que message d'erreur dans le journal si le premier argument est nul (peut √™tre nul, puis aucune erreur n'est imprim√©e) </li><li>  Une cha√Æne √† imprimer en tant que message d'erreur si NumberFormatException s'est produite (peut √™tre nulle, puis aucune erreur n'est imprim√©e) </li></ol><br><h3>  Analyse de la cha√Æne √† l'intervalle de temps </h3><br>  Dans la m√™me classe <i>TextUtils</i> , il existe une m√©thode <i>parseStringToTimeInterval (valeur de cha√Æne)</i> .  Cette m√©thode analyse une cha√Æne qui devrait contenir une valeur d'intervalle de temps - une valeur num√©rique avec un suffixe d'unit√© de temps facultatif.  Par exemple, la cha√Æne "38s" sera analys√©e en 38 secondes, "24m" - 24 minutes "4h" - 4 heures, "3d" - 3 jours et "45" en 45 millisecondes.  Les suffixes pris en charge sont " <b>s</b> " pour les secondes, " <b>m</b> " pour les minutes, " <b>h</b> " pour les heures et " <b>d</b> " pour les jours.  Une cha√Æne sans suffixe est consid√©r√©e comme contenant une valeur en millisecondes.  Les suffixes ne sont pas sensibles √† la casse.  Si la cha√Æne fournie contient un suffixe non pris en charge ou contient une valeur num√©rique n√©gative ou z√©ro ou contient une valeur non num√©rique, alors IllegalArgumentException est lev√©e.  Cette m√©thode renvoie la classe TimeInterval - une classe √©galement d√©finie dans cette biblioth√®que.  Essentiellement, il contient deux propri√©t√©s avec des getters et setters pertinents: long "value" et java.util.concurrent.TimeUnit.  Mais en plus des getters et setters, cette classe poss√®de les m√©thodes <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Ces m√©thodes renvoient une valeur longue dans l'√©chelle de temps sp√©cifi√©e (de la m√™me mani√®re que les m√©thodes correspondantes dans la classe <i>java.util.concurrent.TimeUnit</i> ) <br><br>  Cette m√©thode peut √™tre tr√®s utile pour analyser les propri√©t√©s d'intervalle de temps telles que les d√©lais d'expiration ou les p√©riodes d'attente √† partir des fichiers de configuration.  Il √©limine les calculs inutiles de diff√©rentes √©chelles de temps aux millisecondes dans les deux sens.  Consid√©rez que vous avez une propri√©t√© <b>methodInvokingInterval</b> que vous devez d√©finir pour 5 jours.  Donc, pour d√©finir la valeur en millisecondes, vous devrez calculer que 5 jours correspondent √† 432000000 millisecondes (√©videmment pas une t√¢che impossible mais ennuyeuse et sujette aux erreurs), puis toute personne qui voit la valeur 432000000 devra la calculer √† nouveau √† 5 jours qui est frustrant.  Mais en utilisant cette m√©thode, vous aurez une valeur de propri√©t√© d√©finie sur "5d" et en invoquant le code <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  r√©soudra votre probl√®me de conversion.  √âvidemment, ce n'est pas une fonctionnalit√© trop complexe, mais cela pourrait ajouter de la simplicit√© et de la clart√© dans vos fichiers de configuration et sauver de la frustration et des erreurs de calcul "stupides" en bogues de millisecondes. <br><br><h3>  Comparer les versions </h3><br>  Cet utilitaire permet de convertir String en version et vice-versa et de comparer correctement les versions et les plages de versions.  Souvent, si vous devez comparer des versions, vous comparez simplement des cha√Ænes.  Disons donc que la version "1.5.3" sera sup√©rieure √† la version "1.3.1".  Cependant, si vous comparez les cha√Ænes "1.4.2" et "1.12.3", la cha√Æne "1.4.2" sera par erreur plus grande.  Cet utilitaire s'occupe donc d'un tel probl√®me et, en plus, pr√©sente la classe VersionRange et autorise les op√©rations sur les plages de versions.  (Voir les m√©thodes <i>compareVersions</i> dans la classe <i>TextUtils</i> et la classe <i>VersionRange</i> ) <br><br><h3>  Convertisseur Unicode de cha√Æne </h3><br>  La classe <i>StringUnicodeEncoderDecoder</i> a des m√©thodes qui peuvent convertir une cha√Æne (dans n'importe quelle langue) en une s√©quence de caract√®res Unicode et vice versa.  Par exemple, une cha√Æne "Hello World" sera convertie en <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  et peut √™tre restaur√© en arri√®re. <br><br><h3>  Gestion du cycle de vie (usines auto-instanciables) </h3><br>  Cette fonctionnalit√© est un package qui contient une petite infrastructure qui simplifie et automatise le travail avec des usines qui fournissent des impl√©mentations concr√®tes d'une interface.  Le package contient seulement 2 classes: <i>BaseEntityFactory</i> et <i>BaseEntity</i> .  En bref, ce que fait cette infrastructure, c'est que si vous cr√©ez une fabrique qui √©tend <i>BaseEntityFactory</i> et une interface avec toutes ses impl√©mentations concr√®tes √©tendant <i>BaseEntity,</i> chacune de vos instances de classe de classe d'impl√©mentation concr√®te sera automatiquement ins√©r√©e dans votre fabrique.  Vous n'aurez pas √† vous soucier de savoir comment et quand remplir votre usine.  L'infrastructure le fera pour vous lorsque le constructeur de votre classe d'impl√©mentation concr√®te sera invoqu√©.  Donc, tout ce que vous aurez √† faire est de cr√©er un nombre quelconque de classes d'impl√©mentation concr√®tes et de vous assurer que pour chaque constructeur est invoqu√©.  Apr√®s cela, vous pouvez utiliser votre usine pour obtenir n'importe laquelle de vos classes d'impl√©mentation concr√®tes n'importe o√π dans votre code.  Ceci est une courte explication.  Il y a quelques d√©tails suppl√©mentaires mais pas tant que √ßa.  Pour une description d√©taill√©e de ce package, reportez-vous √† la description de l'API Javadoc du package <b>com.mgnt.lifecycle.management</b> .  De plus, le code source contient le package com.mgnt.lifecycle.management.example qui contient un exemple de code bien comment√© et d√©taill√© sur la fa√ßon d'utiliser cette fonctionnalit√©. <br><br>  Quant √† l'utilisation pratique, je l'ai trouv√©e tr√®s utile pour le framework Spring.  N'oubliez pas que Spring instancie tous ses beans d√©finis lors de son initialisation.  Donc, dans le contexte de Spring, si nous d√©clarons simplement nos impl√©mentations concr√®tes en tant que beans Spring, Spring les instancierait pour nous, initialisant ainsi automatiquement leur usine.  Cela pourrait √™tre tr√®s pratique.  Imaginez que vous ayez un bean qui poss√®de une propri√©t√© du type d'interface d√©finie par l'utilisateur qui a plusieurs impl√©mentations, mais quelle impl√©mentation r√©elle serait n√©cessaire est d√©termin√©e lors de l'ex√©cution.  Ainsi, √† ce moment-l√†, vous pouvez utiliser la m√©thode <i>getInstance (java.lang.String)</i> de votre usine pour acc√©der √† l'impl√©mentation requise.  Cela vous permettra de ne pas injecter TOUTES vos instanciations concr√®tes dans votre bean et vous n'aurez pas √† utiliser Spring <i>Bean Factory</i> pour acc√©der √† un bean d√©fini par Spring car cela violerait la non-intrusion de Spring (ce qui signifie que vous pouvez √©crire des composants qui ne d√©pendent pas de Printemps).  De plus, si, √† un stade ult√©rieur, vous devrez ajouter des impl√©mentations plus concr√®tes, tout ce que vous aurez √† faire est d'ajouter vos classes d'impl√©mentation √† votre code et de les d√©clarer comme des beans Spring.  Le reste se fera d'ici le printemps et cette infrastructure! <br><br><h3>  Utilitaires de fichier </h3><br>  Cet utilitaire permet de lire un fichier sous forme de cha√Æne avec ou sans sp√©cifier de jeu de caract√®res ou simplement de le lire sous forme de tableau d'octets.  Cet utilitaire utilise le package nio et les tampons pour des performances plus rapides.  La taille de fichier maximale pour cet utilitaire est de 2G. <br><br><h3>  Utilisation du temps </h3><br>  Il s'agit simplement d'une m√©thode simple qui offre les m√™mes fonctionnalit√©s que Thread.sleep () mais elle est silencieuse.  C'est √† dire qu'il "avale" IterruptedException.  En outre, il faut 2 arguments: le temps de sommeil et l'unit√© de mesure.  Donc au lieu de <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Vous pouvez simplement √©crire: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Je pensais que c'√©tait mignon <br><br>  C'est donc √ßa.  N'h√©sitez pas √† t√©l√©charger cette biblioth√®que.  Il est livr√© avec une licence MIT - l'une des licences les plus permissives que je connaisse.  Le code source, Javadoc et la version binaire sont disponibles sur le lien ci-dessus.  Le code a √©t√© compil√© par JDK 8 mais n'a aucune fonctionnalit√© de la version 8.  Cela devrait fonctionner avec java 7, je pense que cela fonctionnera avec java 6 et m√™me 5, mais je ne l'ai pas test√© avec ces versions.  N'h√©sitez pas √† l'utiliser comme bon vous semble, parlez-en aux autres si vous l'aimez et n'h√©sitez pas √† m'envoyer une note √† michael_gantman@yahoo.com si vous avez des commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480268/">https://habr.com/ru/post/fr480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480256/index.html">√âcrasement de fichiers Java</a></li>
<li><a href="../fr480258/index.html">React Native init vs Expo</a></li>
<li><a href="../fr480262/index.html">Java Digest du 14 d√©cembre</a></li>
<li><a href="../fr480264/index.html">Retour de solidarit√©: l'informatique et les ind√©pendants doivent s'organiser</a></li>
<li><a href="../fr480266/index.html">L'histoire du cloud gaming</a></li>
<li><a href="../fr480270/index.html">La baisse de popularit√© de PHP: n'est-ce pas si simple?</a></li>
<li><a href="../fr480272/index.html">L'intelligence artificielle et la complexit√© du cerveau humain</a></li>
<li><a href="../fr480274/index.html">Comptoir d'alcool ou Comment survivre aux r√©ceptions sous forme de buffet</a></li>
<li><a href="../fr480276/index.html">Entretien de jeu: strat√©gies d'embauche. Partie I</a></li>
<li><a href="../fr480280/index.html">√âtude de s√©curit√© TurboConf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>