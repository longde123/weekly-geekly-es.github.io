<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏼‍🤝‍🧑🏼 🤨 📈 Bibliothèque Java Open Source avec filtrage stacktrace, analyse de chaîne silencieuse et comparaison de version 👼🏽 ♋️ 🥋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au fil du temps dans différents emplois, je suis tombé sur un besoin de plusieurs utilitaires que je ne pouvais pas trouver disponibles à l'époque. Et...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bibliothèque Java Open Source avec filtrage stacktrace, analyse de chaîne silencieuse et comparaison de version</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480268/"> Au fil du temps dans différents emplois, je suis tombé sur un besoin de plusieurs utilitaires que je ne pouvais pas trouver disponibles à l'époque.  Et j'ai vu que j'en avais plusieurs fois besoin.  J'ai donc écrit ma propre petite bibliothèque que j'ai trouvée très utile.  Je viens donc de le publier en tant que bibliothèque java open-source. <br><br>  <a href="https://github.com/michaelgantman/Mgnt/releases">Voici le lien Github</a> <br><br>  <a href="http://michaelgantman.github.io/Mgnt/docs">Javadoc en ligne est disponible ici</a> <br><br>  De plus, cette bibliothèque est disponible sur Maven Central.  Voici les artefacts Maven (la version 1.5.0.8 est la dernière au moment de la rédaction de cet article mais pourrait changer à l'avenir. Pour rechercher la dernière version, recherchez l'artefact "MgntUtils" sur <a href="http://search.maven.org/">http: //search.maven. org /</a> ): <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>javadoc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.michaelgantman<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>MgntUtils<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.5.0.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span>sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classifier</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Vous trouverez ci-dessous une brève explication de ce qui s'y trouve.  La bibliothèque est livrée avec un JavaDoc joliment écrit (j'espère) avec une description détaillée.  Voici donc la liste des fonctionnalités: <br><a name="habracut"></a><br><h3>  Filtre de bruit Stacktrace </h3><br>  D'après mon expérience, cette fonctionnalité était la plus générique et la plus utile pour moi.  Stacktrace est une bouée de sauvetage lorsque vous déboguez ou essayez de comprendre ce qui s'est mal passé dans votre application.  Cependant, lorsque vous travaillez avec des journaux côté serveur, vous pouvez rencontrer une trace de pile énorme qui contient la plus longue queue inutile de divers cadres et packages liés au serveur d'applications.  Et quelque part dans cette pile, il y a plusieurs lignes d'une trace pertinente et elles peuvent être dans différents segments séparés par des informations inutiles.  Cela devient un cauchemar de rechercher une substance pertinente.  Voici un lien qui décrit le même problème avec des exemples réels (pas pour les plus timides) <a href="https://dzone.com/articles/filtering-stack-trace-hell">https://dzone.com/articles/filtering-stack-trace-hell</a> .  Donc dans ma bibliothèque, il y a une classe qui s'appelle <i>TextUtils</i> et elle a la méthode <i>getStacktrace ()</i> avec plusieurs signatures surchargées.  Il prend une instance Throwable et permet de définir un préfixe de package des packages pertinents. <br><br>  De plus, le même utilitaire (à partir de la version 1.5.0.3) a la méthode <i>getStacktrace ()</i> qui prend l'interface CharSequence au lieu de Throwable et permet ainsi de filtrer et de raccourcir stacktrace stocké sous forme de chaîne de la même manière qu'un stacktrace extrait de Throwable.  Ainsi, essentiellement les traces de pile peuvent être filtrées "à la volée" au moment de l'exécution ou ultérieurement à partir de n'importe quelle source de texte telle qu'un journal.  (Juste pour clarifier - l'utilitaire ne prend pas en charge l'analyse et la modification de l'intégralité du fichier journal. Il prend en charge le filtrage uniquement d'une trace de pile transmise sous forme de chaîne. Donc, si quelqu'un veut filtrer les exceptions dans le fichier journal, il devra analyser le fichier journal et extraire les traces de pile en tant que chaînes distinctes, puis peut utiliser cet utilitaire pour filtrer chaque trace de pile individuelle). <br><br>  Voici un exemple d'utilisation.  Supposons que votre code d'entreprise réside toujours dans des packages commençant par "com.plain. *". Vous définissez donc un tel préfixe et procédez ainsi <br><br><pre> <code class="java hljs">logger.info(TextUtils.getStacktrace(e,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>));</code> </pre> <br>  cela filtrera très intelligemment toutes les parties inutiles de la trace, vous laissant un stacktrace très concis.  De plus, j'ai trouvé très pratique de prédéfinir le préfixe, puis d'utiliser simplement la méthode pratique <br><br><pre> <code class="java hljs">TextUtils.getStacktrace(e);</code> </pre> <br>  Il en sera de même.  Pour prédéfinir le préfixe, utilisez simplement la méthode <br><br><pre> <code class="java hljs">setRelevantPackage(<span class="hljs-string"><span class="hljs-string">"com.plain."</span></span>);</code> </pre> <br>  Si vous souhaitez prédéfinir cette valeur par configuration, à partir de la version 1.1.0.1 de la bibliothèque, vous pouvez définir la variable d'environnement " <b>MGNT_RELEVANT_PACKAGE</b> " ou la propriété système " <b>mgnt.relevant.package</b> " sur la valeur " <i>com.plain</i> " <i>.</i> Et la propriété sera défini sur cette valeur sans que vous <i>appeliez la</i> méthode <i>TextUtils.setRelevantPackage ("com.plain.");</i>  explicitement dans votre code.  Notez que la valeur de la propriété System aurait priorité sur la variable d'environnement si les deux étaient définies.  Juste un rappel qu'avec la propriété System vous pouvez l'ajouter dans votre ligne de commande en utilisant l'option -D: <br><br>  "-Dmgnt.relevant.package = com.plain." <br><br>  De plus, si vous utilisez une version antérieure à 1.1.0.1 de cette bibliothèque ou si vous ne souhaitez pas utiliser la variable d'environnement ou la propriété système mentionnée ci-dessus et que vous utilisez l'environnement Spring, vous pouvez prédéfinir le préfixe en ajoutant le segment suivant à votre configuration Spring: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.beans.factory.config.MethodInvokingFactoryBean"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mgnt.utils.TextUtils"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"targetMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setRelevantPackage"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"arguments"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.plain."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Javadoc explique tout en détail.  Mais voici un petit teaser: vous obtiendrez un stacktrace suivant: <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() ... at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() ... at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br>  au lieu de <br><br><pre> <code class="java hljs">at com.plain.BookService.listBooks() at com.plain.BookService$$FastClassByCGLIB$$e7645040.invoke() at net.sf.cglib.proxy.MethodProxy.invoke() at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed() at com.plain.LoggingAspect.logging() at sun.reflect.NativeMethodAccessorImpl.invoke0() at sun.reflect.NativeMethodAccessorImpl.invoke() at sun.reflect.DelegatingMethodAccessorImpl.invoke() at java.lang.reflect.Method.invoke() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs() at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod() at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.AbstractTraceInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.transaction.interceptor.TransactionInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke() at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed() at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept() at com.plain.BookService$$EnhancerByCGLIB$$<span class="hljs-number"><span class="hljs-number">7</span></span>cb147e4.listBooks() at com.plain.web.BookController.listBooks()</code> </pre> <br><h3>  Analyse silencieuse des chaînes en entier, long, etc. </h3><br>  La même classe <i>TextUtils</i> fournit des méthodes pour analyser silencieusement String (sans exception jamais jetée) en types Double, Long, Integer, Short et Byte.  Les méthodes sont appelées <i>parseStringToLong ()</i> <i>parseStringToInteger ()</i> etc.  Ils prennent tous 4 arguments: <br><br><ol><li>  Une chaîne à analyser </li><li>  Une implémentation de Number (Double, Long, Integer, Short ou Byte) pour servir de valeur par défaut en cas de problème d'analyse </li><li>  Une chaîne à imprimer en tant que message d'erreur dans le journal si le premier argument est nul (peut être nul, puis aucune erreur n'est imprimée) </li><li>  Une chaîne à imprimer en tant que message d'erreur si NumberFormatException s'est produite (peut être nulle, puis aucune erreur n'est imprimée) </li></ol><br><h3>  Analyse de la chaîne à l'intervalle de temps </h3><br>  Dans la même classe <i>TextUtils</i> , il existe une méthode <i>parseStringToTimeInterval (valeur de chaîne)</i> .  Cette méthode analyse une chaîne qui devrait contenir une valeur d'intervalle de temps - une valeur numérique avec un suffixe d'unité de temps facultatif.  Par exemple, la chaîne "38s" sera analysée en 38 secondes, "24m" - 24 minutes "4h" - 4 heures, "3d" - 3 jours et "45" en 45 millisecondes.  Les suffixes pris en charge sont " <b>s</b> " pour les secondes, " <b>m</b> " pour les minutes, " <b>h</b> " pour les heures et " <b>d</b> " pour les jours.  Une chaîne sans suffixe est considérée comme contenant une valeur en millisecondes.  Les suffixes ne sont pas sensibles à la casse.  Si la chaîne fournie contient un suffixe non pris en charge ou contient une valeur numérique négative ou zéro ou contient une valeur non numérique, alors IllegalArgumentException est levée.  Cette méthode renvoie la classe TimeInterval - une classe également définie dans cette bibliothèque.  Essentiellement, il contient deux propriétés avec des getters et setters pertinents: long "value" et java.util.concurrent.TimeUnit.  Mais en plus des getters et setters, cette classe possède les méthodes <i>toMillis ()</i> , <i>toSeconds ()</i> , <i>toMinutes ()</i> , <i>toHours ()</i> <i>toDays ()</i> .  Ces méthodes renvoient une valeur longue dans l'échelle de temps spécifiée (de la même manière que les méthodes correspondantes dans la classe <i>java.util.concurrent.TimeUnit</i> ) <br><br>  Cette méthode peut être très utile pour analyser les propriétés d'intervalle de temps telles que les délais d'expiration ou les périodes d'attente à partir des fichiers de configuration.  Il élimine les calculs inutiles de différentes échelles de temps aux millisecondes dans les deux sens.  Considérez que vous avez une propriété <b>methodInvokingInterval</b> que vous devez définir pour 5 jours.  Donc, pour définir la valeur en millisecondes, vous devrez calculer que 5 jours correspondent à 432000000 millisecondes (évidemment pas une tâche impossible mais ennuyeuse et sujette aux erreurs), puis toute personne qui voit la valeur 432000000 devra la calculer à nouveau à 5 jours qui est frustrant.  Mais en utilisant cette méthode, vous aurez une valeur de propriété définie sur "5d" et en invoquant le code <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> milliseconds = TextUtils.parsingStringToTimeInterval(<span class="hljs-string"><span class="hljs-string">"5d"</span></span>).toMillis();</code> </pre> <br>  résoudra votre problème de conversion.  Évidemment, ce n'est pas une fonctionnalité trop complexe, mais cela pourrait ajouter de la simplicité et de la clarté dans vos fichiers de configuration et sauver de la frustration et des erreurs de calcul "stupides" en bogues de millisecondes. <br><br><h3>  Comparer les versions </h3><br>  Cet utilitaire permet de convertir String en version et vice-versa et de comparer correctement les versions et les plages de versions.  Souvent, si vous devez comparer des versions, vous comparez simplement des chaînes.  Disons donc que la version "1.5.3" sera supérieure à la version "1.3.1".  Cependant, si vous comparez les chaînes "1.4.2" et "1.12.3", la chaîne "1.4.2" sera par erreur plus grande.  Cet utilitaire s'occupe donc d'un tel problème et, en plus, présente la classe VersionRange et autorise les opérations sur les plages de versions.  (Voir les méthodes <i>compareVersions</i> dans la classe <i>TextUtils</i> et la classe <i>VersionRange</i> ) <br><br><h3>  Convertisseur Unicode de chaîne </h3><br>  La classe <i>StringUnicodeEncoderDecoder</i> a des méthodes qui peuvent convertir une chaîne (dans n'importe quelle langue) en une séquence de caractères Unicode et vice versa.  Par exemple, une chaîne "Hello World" sera convertie en <br><br>  "\ u0048 \ u0065 \ u006c \ u006c \ u006f \ u0020 \ u0057 \ u006f \ u0072 \ u006c \ u0064" <br><br>  et peut être restauré en arrière. <br><br><h3>  Gestion du cycle de vie (usines auto-instanciables) </h3><br>  Cette fonctionnalité est un package qui contient une petite infrastructure qui simplifie et automatise le travail avec des usines qui fournissent des implémentations concrètes d'une interface.  Le package contient seulement 2 classes: <i>BaseEntityFactory</i> et <i>BaseEntity</i> .  En bref, ce que fait cette infrastructure, c'est que si vous créez une fabrique qui étend <i>BaseEntityFactory</i> et une interface avec toutes ses implémentations concrètes étendant <i>BaseEntity,</i> chacune de vos instances de classe de classe d'implémentation concrète sera automatiquement insérée dans votre fabrique.  Vous n'aurez pas à vous soucier de savoir comment et quand remplir votre usine.  L'infrastructure le fera pour vous lorsque le constructeur de votre classe d'implémentation concrète sera invoqué.  Donc, tout ce que vous aurez à faire est de créer un nombre quelconque de classes d'implémentation concrètes et de vous assurer que pour chaque constructeur est invoqué.  Après cela, vous pouvez utiliser votre usine pour obtenir n'importe laquelle de vos classes d'implémentation concrètes n'importe où dans votre code.  Ceci est une courte explication.  Il y a quelques détails supplémentaires mais pas tant que ça.  Pour une description détaillée de ce package, reportez-vous à la description de l'API Javadoc du package <b>com.mgnt.lifecycle.management</b> .  De plus, le code source contient le package com.mgnt.lifecycle.management.example qui contient un exemple de code bien commenté et détaillé sur la façon d'utiliser cette fonctionnalité. <br><br>  Quant à l'utilisation pratique, je l'ai trouvée très utile pour le framework Spring.  N'oubliez pas que Spring instancie tous ses beans définis lors de son initialisation.  Donc, dans le contexte de Spring, si nous déclarons simplement nos implémentations concrètes en tant que beans Spring, Spring les instancierait pour nous, initialisant ainsi automatiquement leur usine.  Cela pourrait être très pratique.  Imaginez que vous ayez un bean qui possède une propriété du type d'interface définie par l'utilisateur qui a plusieurs implémentations, mais quelle implémentation réelle serait nécessaire est déterminée lors de l'exécution.  Ainsi, à ce moment-là, vous pouvez utiliser la méthode <i>getInstance (java.lang.String)</i> de votre usine pour accéder à l'implémentation requise.  Cela vous permettra de ne pas injecter TOUTES vos instanciations concrètes dans votre bean et vous n'aurez pas à utiliser Spring <i>Bean Factory</i> pour accéder à un bean défini par Spring car cela violerait la non-intrusion de Spring (ce qui signifie que vous pouvez écrire des composants qui ne dépendent pas de Printemps).  De plus, si, à un stade ultérieur, vous devrez ajouter des implémentations plus concrètes, tout ce que vous aurez à faire est d'ajouter vos classes d'implémentation à votre code et de les déclarer comme des beans Spring.  Le reste se fera d'ici le printemps et cette infrastructure! <br><br><h3>  Utilitaires de fichier </h3><br>  Cet utilitaire permet de lire un fichier sous forme de chaîne avec ou sans spécifier de jeu de caractères ou simplement de le lire sous forme de tableau d'octets.  Cet utilitaire utilise le package nio et les tampons pour des performances plus rapides.  La taille de fichier maximale pour cet utilitaire est de 2G. <br><br><h3>  Utilisation du temps </h3><br>  Il s'agit simplement d'une méthode simple qui offre les mêmes fonctionnalités que Thread.sleep () mais elle est silencieuse.  C'est à dire qu'il "avale" IterruptedException.  En outre, il faut 2 arguments: le temps de sommeil et l'unité de mesure.  Donc au lieu de <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Thread.sleep(<span class="hljs-number"><span class="hljs-number">2000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InterruptedException ie) { }</code> </pre> <br>  Vous pouvez simplement écrire: <br><br><pre> <code class="java hljs">TimeUtils.sleepFor(<span class="hljs-number"><span class="hljs-number">2</span></span>, TimeUnit.SECONDS);</code> </pre> <br>  Je pensais que c'était mignon <br><br>  C'est donc ça.  N'hésitez pas à télécharger cette bibliothèque.  Il est livré avec une licence MIT - l'une des licences les plus permissives que je connaisse.  Le code source, Javadoc et la version binaire sont disponibles sur le lien ci-dessus.  Le code a été compilé par JDK 8 mais n'a aucune fonctionnalité de la version 8.  Cela devrait fonctionner avec java 7, je pense que cela fonctionnera avec java 6 et même 5, mais je ne l'ai pas testé avec ces versions.  N'hésitez pas à l'utiliser comme bon vous semble, parlez-en aux autres si vous l'aimez et n'hésitez pas à m'envoyer une note à michael_gantman@yahoo.com si vous avez des commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480268/">https://habr.com/ru/post/fr480268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480256/index.html">Écrasement de fichiers Java</a></li>
<li><a href="../fr480258/index.html">React Native init vs Expo</a></li>
<li><a href="../fr480262/index.html">Java Digest du 14 décembre</a></li>
<li><a href="../fr480264/index.html">Retour de solidarité: l'informatique et les indépendants doivent s'organiser</a></li>
<li><a href="../fr480266/index.html">L'histoire du cloud gaming</a></li>
<li><a href="../fr480270/index.html">La baisse de popularité de PHP: n'est-ce pas si simple?</a></li>
<li><a href="../fr480272/index.html">L'intelligence artificielle et la complexité du cerveau humain</a></li>
<li><a href="../fr480274/index.html">Comptoir d'alcool ou Comment survivre aux réceptions sous forme de buffet</a></li>
<li><a href="../fr480276/index.html">Entretien de jeu: stratégies d'embauche. Partie I</a></li>
<li><a href="../fr480280/index.html">Étude de sécurité TurboConf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>