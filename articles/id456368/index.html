<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🎓 🅾️ 🐿️ Melakukan transaksi publik dan pribadi di JPMorgan Quorum blockchain menggunakan Web3 👇🏾 👩🏾‍⚕️ 👃🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quorum adalah blockchain berbasis Ethereum yang dikembangkan oleh JPMorgan dan yang terbaru menjadi platform registri terdistribusi pertama yang ditaw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Melakukan transaksi publik dan pribadi di JPMorgan Quorum blockchain menggunakan Web3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456368/"><p><img src="https://habrastorage.org/webt/dn/2r/f3/dn2rf3fmls1j424_o0ejhkjcxxe.jpeg"><br></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Quorum</a> adalah blockchain berbasis Ethereum yang dikembangkan oleh JPMorgan dan yang terbaru menjadi platform registri terdistribusi pertama yang ditawarkan Microsoft Azure. </p><br><p>  Kuorum mendukung transaksi pribadi dan publik dan memiliki banyak kasus penggunaan komersial. </p><br><p>  Pada artikel ini, kami akan menganalisis salah satu skenario ini - penyebaran jaringan registri terdistribusi antara supermarket dan pemilik gudang untuk memberikan informasi yang relevan tentang suhu gudang. </p><br><p>  Kode yang digunakan dalam panduan ini terletak di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori di GitHub</a> . </p><br><p>  Artikel tersebut meliputi: </p><br><ul><li>  menciptakan kontrak yang cerdas; </li><li>  Menyebarkan jaringan Kuorum dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chainstack</a> </li><li>  Transaksi publik kuorum </li><li>  Transaksi pribadi kuorum. </li></ul><br><p>  Untuk menggambarkan hal ini, kami menggunakan skenario pemantauan suhu di ruang penyimpanan peserta jaringan Kuorum sebagai bagian dari Internet of Things (IoT). </p><a name="habracut"></a><br><h2 id="kontekst">  Konteks </h2><br><p>  Sekelompok perusahaan gudang disatukan dalam konsorsium untuk penyimpanan informasi dan otomatisasi proses bersama pada blockchain.  Untuk ini, perusahaan memutuskan untuk menggunakan Kuorum.  Dalam artikel ini, kita akan membahas dua skenario: transaksi publik dan transaksi pribadi. </p><br><p>  Transaksi dibuat oleh peserta yang berbeda untuk berinteraksi dengan konsorsium tempat mereka berada.  Setiap transaksi baik menyebarkan kontrak atau memanggil fungsi dalam kontrak untuk mengunggah data ke jaringan.  Tindakan ini direplikasi ke semua node di jaringan. </p><br><p>  Transaksi publik tersedia untuk dilihat oleh semua anggota konsorsium.  Transaksi pribadi menambah lapisan kerahasiaan dan hanya tersedia bagi para peserta yang memiliki hak untuk itu. </p><br><p>  Untuk kedua skenario, kami menggunakan kontrak yang sama untuk kejelasan. </p><br><h2 id="smart-kontrakt">  Kontrak pintar </h2><br><p> Di bawah ini adalah kontrak pintar sederhana yang dibuat untuk skenario kami.  Ini memiliki <code>temperature</code> variabel publik, yang dapat diubah menggunakan metode <code>set</code> dan diperoleh dengan menggunakan metode <code>get</code> . </p><br><pre> <code class="javascript hljs">pragma solidity ^<span class="hljs-number"><span class="hljs-number">0.4</span></span><span class="hljs-number"><span class="hljs-number">.25</span></span>; contract TemperatureMonitor { int8 public temperature; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">int8 temp</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span></span>{ temperature = temp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">int8</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temperature; } }</code> </pre> <br><p>  Agar kontrak dapat bekerja dengan <a href="">web3.js</a> , itu harus dikonversi ke format dan bytecode ABI.  Menggunakan fungsi <code>formatContract</code> bawah ini mengkompilasi kontrak menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">solc-js</a> . </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatContract</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-string"><span class="hljs-string">'./contracts/temperatureMonitor.sol'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> source = fs.readFileSync(path,<span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> solc.compile(source, <span class="hljs-number"><span class="hljs-number">1</span></span>).contracts[<span class="hljs-string"><span class="hljs-string">':TemperatureMonitor'</span></span>]; }</code> </pre> <br><p>  Kontrak yang telah selesai adalah sebagai berikut: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// interface [ { constant: true, inputs: [], name: 'get', outputs: [Array], payable: false, stateMutability: 'view', type: 'function' }, { constant: true, inputs: [], name: 'temperature', outputs: [Array], payable: false, stateMutability: 'view', type: 'function' }, { constant: false, inputs: [Array], name: 'set', outputs: [], payable: false, stateMutability: 'nonpayable', type: 'function' } ]</span></span></code> </pre> <br><pre> <code class="plaintext hljs">// bytecode</code> </pre><br><p>  Sekarang setelah kontrak siap, kami akan menyebarkan jaringan dan menyebarkan kontrak. </p><br><h2 id="razvertyvanie-nod">  Penempatan node </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4e5/8d2/0d2/4e58d20d27bfa4aa8b4da4bbf990ac53.jpg" alt="gambar"></p><br><p>  Menyebarkan simpul bisa sangat memakan waktu dan proses ini dapat diganti menggunakan layanan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chainstack</a> . </p><br><p>  Berikut ini adalah proses penyebaran jaringan Kuorum dengan konsensus Raft dan tiga node. </p><br><p>  Untuk memulai, mari kita mulai sebuah proyek dan menyebutnya Proyek Kuorum: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/193/316/b8e/193316b8ef875ed68e491804b5a7ff7d.gif" alt="gambar"></p><br><p>  Buat jaringan Kuorum dengan konsensus Raft di Google Cloud Platform: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2f3/650/f1e/2f3650f1e98174694c46f6cd31040d4c.gif" alt="gambar"></p><br><p>  Untuk simpul default yang sudah dibuat, tambahkan dua node lagi: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cb5/77b/5f7/cb577b5f7516664e64951f6404711eaa.gif" alt="gambar"></p><br><p>  Tiga node berjalan: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/243/c4d/056/243c4d0569c5d6b3accb3d1166e2b2f6.png" alt="gambar"></p><br><p>  Halaman detail node menunjukkan titik akhir RPC, kunci publik, dll. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a35/61a/29a/a3561a29a5f38d410ed92c99a645b2c1.png" alt="gambar"></p><br><p>  Jaringan dikerahkan.  Sekarang kita akan menggunakan kontrak pintar dan melakukan transaksi menggunakan <a href="">web3.js.</a> </p><br><h2 id="publichnye-tranzakcii">  Transaksi publik </h2><br><h3 id="kontekst-1">  Konteks </h3><br><p>  Suhu gudang sangat penting untuk mengurangi biaya, terutama untuk produk yang dimaksudkan untuk penyimpanan pada suhu di bawah nol. </p><br><p>  Dengan memberi perusahaan kemampuan untuk berbagi nilai waktu-nyata dari suhu eksternal dari lokasi geografis mereka dan mencatatnya dalam registri yang tidak dapat diubah, anggota jaringan mengurangi biaya dan waktu. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/03e/028/5ca/03e0285ca0b59b6b96351d5b99d95408.png" alt="gambar"></p><br><p>  Kami akan menyelesaikan tiga tugas yang diilustrasikan dalam diagram: </p><br><ol><li><p>  Kami akan mengakhiri kontrak melalui <b>Node 1</b> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> contractAddress = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> deployContract(raft1Node); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Contract address after deployment: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${contractAddress}</span></span></span><span class="hljs-string">`</span></span>);</code> </pre> <br></li><li><p>  Atur suhu melalui <b>Node 2</b> hingga 3 derajat: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> status = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> setTemperature(raft2Node, contractAddress, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Transaction status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${status}</span></span></span><span class="hljs-string">`</span></span>);</code> </pre> <br></li><li><p>  <b>Node 3</b> akan menerima informasi dari kontrak pintar.  Kontrak akan mengembalikan nilai 3 derajat: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> temp = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getTemperature(raft3Node, contractAddress); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Retrieved contract Temperature'</span></span>, temp);</code> </pre> <br><p>  Selanjutnya, kita <a href="">akan</a> melihat bagaimana melakukan transaksi publik di jaringan Kuorum menggunakan <a href="">web3.js.</a> </p><br></li></ol><br><p>  Kami memulai sebuah instance melalui RPC untuk tiga node: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> raft1Node = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(process.env.RPC1), <span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">transactionConfirmationBlocks</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> raft2Node = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(process.env.RPC2), <span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">transactionConfirmationBlocks</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> raft3Node = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(process.env.RPC3), <span class="hljs-literal"><span class="hljs-literal">null</span></span>, { <span class="hljs-attr"><span class="hljs-attr">transactionConfirmationBlocks</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, }, );</code> </pre> <br><p>  Hancurkan kontrak pintar: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// returns the default account from the Web3 instance initiated previously function getAddress(web3) { return web3.eth.getAccounts().then(accounts =&gt; accounts[0]); } // Deploys the contract using contract's interface and node's default address async function deployContract(web3) { const address = await getAddress(web3); // initiate contract with contract's interface const contract = new web3.eth.Contract( temperatureMonitor.interface ); return contract.deploy({ // deploy contract with contract's bytecode data: temperatureMonitor.bytecode, }) .send({ from: address, gas: '0x2CD29C0', }) .on('error', console.error) .then((newContractInstance) =&gt; { // returns deployed contract address return newContractInstance.options.address; }); }</span></span></code> </pre> <br><p>  <a href="">web3.js</a> menyediakan dua metode untuk berinteraksi dengan kontrak: <code>call</code> dan <code>send</code> . </p><br><p>  Perbarui suhu kontrak dengan mengeksekusi <code>set</code> menggunakan metode <code>send</code> web3. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// get contract deployed previously async function getContract(web3, contractAddress) { const address = await getAddress(web3); return web3.eth.Contract( temperatureMonitor.interface, contractAddress, { defaultAccount: address, } ); } // calls contract set method to update contract's temperature async function setTemperature(web3, contractAddress, temp) { const myContract = await getContract(web3, contractAddress); return myContract.methods.set(temp).send({}).then((receipt) =&gt; { return receipt.status; }); }</span></span></code> </pre> <br><p>  Selanjutnya, kami menggunakan metode <code>call</code> web3 untuk mendapatkan suhu kontrak.  Harap dicatat bahwa metode <code>call</code> dijalankan pada node lokal dan transaksi tidak akan dibuat di blockchain. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// calls contract get method to retrieve contract's temperature async function getTemperature(web3, contractAddress) { const myContract = await getContract(web3, contractAddress); return myContract.methods.get().call().then(result =&gt; result); }</span></span></code> </pre> <br><p>  Sekarang Anda dapat menjalankan <a href="">public.js</a> untuk mendapatkan hasil berikut: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Execute public script node public.js Contract address after deployment: 0xf46141Ac7D6D6E986eFb2321756b5d1e8a25008F Transaction status: true Retrieved contract Temperature 3</span></span></code> </pre> <br><p>  Selanjutnya, kita dapat melihat entri di penjelajah Quorum di panel Chainstack, seperti yang ditunjukkan di bawah ini. </p><br><p>  Ketiga node berinteraksi dan transaksi diperbarui: </p><br><ol><li>  Transaksi pertama telah mendapatkan kontrak. </li><li>  Transaksi kedua mengatur suhu kontrak menjadi 3 derajat. </li><li>  Temperatur diperoleh melalui simpul lokal, sehingga transaksi belum dibuat. </li></ol><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6fb/104/097/6fb10409705859a6672a53d76356a55c.png" alt="gambar"></p><br><h2 id="privatnye-tranzakcii">  Transaksi Pribadi </h2><br><h3 id="kontekst-2">  Konteks </h3><br><p>  Persyaratan umum organisasi adalah perlindungan data.  Sebagai contoh, perhatikan skenario di mana <i>supermarket</i> menyewa gudang untuk menyimpan makanan laut dari <i>vendor</i> terpisah: </p><br><ul><li>  <i>Vendor</i> dengan bantuan sensor IoT membaca nilai suhu setiap 30 detik dan meneruskannya ke <i>Supermarket</i> ; </li><li>  nilai-nilai ini harus tersedia hanya untuk <i>Vendor</i> dan <i>Supermarket</i> , sebuah jaringan konsorsium. </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/deb/3b1/a51/deb3b1a51e681fe664bc49b2d6eb8307.png" alt="gambar"></p><br><p>  Kami akan menyelesaikan empat tugas yang diilustrasikan dalam diagram di atas. </p><br><ul><li>  Kami menggunakan tiga simpul yang sama dari skenario sebelumnya untuk menunjukkan transaksi pribadi: </li><li>  <i>Supermarket</i> menyebarkan kontrak pintar yang bersifat pribadi ke <i>supermarket</i> dan <i>vendor</i> . </li><li>  <i>Pihak ketiga</i> tidak memiliki akses ke kontrak pintar. </li></ul><br><p>  Kami akan memanggil metode <code>get</code> and <code>set</code> atas nama <i>Supermarket</i> dan <i>Vendor</i> untuk mendemonstrasikan transaksi kuorum pribadi. </p><br><ol><li><p>  Kami akan mengakhiri kontrak pribadi untuk peserta <i>Supermarket</i> dan <i>Vendor</i> melalui peserta <i>Supermarket</i> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> contractAddress = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> deployContract( raft1Node, process.env.PK2, ); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Contract address after deployment: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${contractAddress}</span></span></span><span class="hljs-string">`</span></span>);</code> </pre> <br></li><li><p>  Atur suhu dari <i>Pihak Ketiga</i> (simpul luar) dan dapatkan nilai suhu: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Attempts to set Contract temperature to 10, this will not mutate contract's temperature await setTemperature( raft3Node, contractAddress, process.env.PK1, 10, ); // This returns null const temp = await getTemperature(raft3Node, contractAddress); console.log(`[Node3] temp retrieved after updating contract from external nodes: ${temp}`);</span></span></code> </pre> <br></li><li><p>  Atur suhu dari <i>Vendor</i> (simpul dalam) dan dapatkan nilai suhu: </p><br><p>  Suhu dalam skenario ini harus kembali dari kontrak pintar ke 12. Harap dicatat bahwa <i>vendor di</i> sini telah mengizinkan akses ke kontrak pintar. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Updated Contract temperature to 12 degrees await setTemperature( raft2Node, contractAddress, process.env.PK1, 12, ); // This returns 12 const temp2 = await getTemperature(raft2Node, contractAddress); console.log(`[Node2] temp retrieved after updating contract from internal nodes: ${temp2}`);</span></span></code> </pre> <br></li><li><p>  Dapatkan suhu dari <i>Pihak Ketiga</i> (simpul luar): </p><br><p>  Pada langkah 3, suhu ditetapkan ke 12, tetapi <i>Pihak Ketiga</i> tidak memiliki akses ke kontrak pintar.  Oleh karena itu, nilai balik harus nol. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// This returns null const temp3 = await getTemperature(raft3Node, contractAddress); console.log(`[Node3] temp retrieved from external nodes after update ${temp}`);</span></span></code> </pre> <br><p>  Selanjutnya, kami akan mempertimbangkan secara lebih rinci pelaksanaan transaksi pribadi di jaringan Kuorum dengan <a href="">web3.js.</a>  Karena sebagian besar kode bertepatan dengan transaksi publik, kami hanya memilih bagian-bagian yang berbeda untuk transaksi pribadi. </p><br></li></ol><br><p>  Harap dicatat bahwa kontrak yang diunggah ke jaringan tidak dapat diubah, oleh karena itu akses dengan izin harus diberikan ke node yang sesuai dengan memasukkan kontrak publik pada saat penyebaran kontrak, dan bukan setelahnya. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deployContract</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">web3, publicKey</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> address = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getAddress(web3); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> contract = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> web3.eth.Contract( temperatureMonitor.interface, ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contract.deploy({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: temperatureMonitor.bytecode, }) .send({ <span class="hljs-attr"><span class="hljs-attr">from</span></span>: address, <span class="hljs-attr"><span class="hljs-attr">gas</span></span>: <span class="hljs-string"><span class="hljs-string">'0x2CD29C0'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// Grant Permission to Contract by including nodes public keys privateFor: [publicKey], }) .then((contract) =&gt; { return contract.options.address; }); }</span></span></code> </pre> <br><p>  Transaksi pribadi dilakukan dengan cara yang sama - dengan memasukkan kunci publik dari peserta pada saat eksekusi. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setTemperature</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">web3, contractAddress, publicKey, temp</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> address = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getAddress(web3); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myContract = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getContract(web3, contractAddress); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myContract.methods.set(temp).send({ <span class="hljs-attr"><span class="hljs-attr">from</span></span>: address, <span class="hljs-comment"><span class="hljs-comment">// Grant Permission by including nodes public keys privateFor: [publicKey], }).then((receipt) =&gt; { return receipt.status; }); }</span></span></code> </pre> <br><p>  Sekarang kita dapat menjalankan <a href="">private.js</a> dengan hasil berikut: </p><br><pre> <code class="bash hljs">node private.js Contract address after deployment: 0x85dBF88B4dfa47e73608b33454E4e3BA2812B21D [Node3] temp retrieved after updating contract from external nodes: null [Node2] temp retrieved after updating contract from internal nodes: 12 [Node3] temp retrieved from external nodes after update null</code> </pre> <br><p>  Penjelajah Kuorum di Chainstack akan memperlihatkan yang berikut: </p><br><ul><li>  Penyebaran kontrak dari peserta di <i>supermarket</i> ; </li><li>  Melakukan <code>SetTemperature</code> dari <i>Pihak Ketiga</i> ; </li><li>  Lakukan <code>SetTemperature</code> dari peserta <i>vendor</i> . </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e14/6d2/660/e146d2660771f328fda7087facaec1e7.png" alt="gambar"></p><br><p>  Seperti yang Anda lihat, kedua transaksi selesai, tetapi hanya transaksi dari <i>vendor</i> peserta yang memperbarui suhu dalam kontrak.  Dengan demikian, transaksi pribadi memberikan kekekalan, tetapi pada saat yang sama mereka tidak memberikan data kepada pihak ketiga. </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Kami memeriksa skenario komersial untuk menggunakan Quorum untuk menyediakan informasi suhu terkini di gudang dengan menyebarkan jaringan antara dua pihak - supermarket dan pemilik gudang. </p><br><p>  Kami telah menunjukkan bagaimana informasi suhu saat ini dapat dipertahankan baik melalui transaksi publik maupun pribadi. </p><br><p>  Mungkin ada banyak skenario aplikasi dan, seperti yang Anda lihat, itu sama sekali tidak sulit. </p><br><p>  Eksperimen, coba gunakan skrip Anda.  Selain itu, industri teknologi blockchain <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dapat tumbuh hampir sepuluh kali lipat pada tahun 2024</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id456368/">https://habr.com/ru/post/id456368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id456352/index.html">Modul komunikasi objek nirkabel WISE-4000</a></li>
<li><a href="../id456354/index.html">Bagaimana cara kami mengumpulkan kotak TV</a></li>
<li><a href="../id456358/index.html">13 artikel paling terkenal tahun lalu</a></li>
<li><a href="../id456362/index.html">Perancang Tingkat 6: bagaimana kita memotivasi dan mengembangkan perancang</a></li>
<li><a href="../id456366/index.html">Bagaimana Saya Merancang Kotak HATI LED</a></li>
<li><a href="../id456370/index.html">Menerapkan QoS di Qsan Storage</a></li>
<li><a href="../id456372/index.html">SimbirSoft mengundang para profesional TI ke Intensive Summer 2019</a></li>
<li><a href="../id456376/index.html">Not One Spring Boot: Tinjauan Alternatif</a></li>
<li><a href="../id456380/index.html">Open Day dari Fakultas Pemrograman Netologi</a></li>
<li><a href="../id456382/index.html">Kolaborasi dan otomatisasi di frontend. Apa yang kami pelajari dari 13 sekolah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>