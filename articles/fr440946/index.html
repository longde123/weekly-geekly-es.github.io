<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè≥Ô∏è‚Äçüåà üôåüèΩ üëØ Rollup: vous pouvez d√©j√† cr√©er des applications ü§§ ‚ôçÔ∏è üßñüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rollup est un g√©n√©rateur d'applications et de biblioth√®ques javascript de nouvelle g√©n√©ration. Beaucoup le connaissent depuis longtemps comme un const...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rollup: vous pouvez d√©j√† cr√©er des applications</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440946/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rollup</a> est un g√©n√©rateur d'applications et de biblioth√®ques javascript de nouvelle g√©n√©ration.  Beaucoup le connaissent depuis longtemps comme un constructeur prometteur qui est bien adapt√© √† la construction de biblioth√®ques, mais mal adapt√© aux applications de construction.  Cependant, avec le temps, le produit se d√©veloppe activement. <br><br>  Je l'ai essay√© pour la premi√®re fois d√©but 2017.  J'ai tout de suite aim√© la prise en charge de la compilation dans ES2015, le tremblement d'arbre, le manque de modules dans l'assemblage et bien s√ªr une simple configuration.  Mais c'√©tait un produit brut, avec un petit nombre de plugins et des fonctionnalit√©s tr√®s limit√©es, et j'ai d√©cid√© de le laisser pour plus tard et j'ai continu√© √† construire via browserify.  La deuxi√®me tentative a eu lieu en 2018, puis elle avait d√©j√† largement d√©pass√© la communaut√©, les plugins et les fonctionnalit√©s, mais il n'y avait toujours pas assez de qualit√© dans certaines fonctions, y compris l'observateur.  Et enfin, au d√©but de 2019, nous pouvons dire en toute s√©curit√© - avec l'aide de Rollup, vous pouvez cr√©er des applications modernes de mani√®re simple et pratique. <br><a name="habracut"></a><br>  Pour comprendre les avantages, passons en revue les principales fonctionnalit√©s et comparons avec Webpack (la situation est la m√™me pour Browserify). <br><br><h3>  Configuration simple </h3><br>  Imm√©diatement, ce qui attire votre attention est une configuration tr√®s simple et compr√©hensible: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">// todo:     ], }];</span></span></code> </pre> <br>  Entrez <i>rollup -c</i> dans le cosnol et votre paquet commence √† s'assembler.  Pour l'exportation, vous pouvez fournir un tableau de bundles pour l'assemblage, par exemple, si vous collectez s√©par√©ment des polyphiles, plusieurs programmes, des travailleurs, etc.  En entr√©e, vous pouvez soumettre un tableau de fichiers, puis des morceaux seront collect√©s.  En sortie, vous pouvez alimenter un tableau de fichiers de sortie et les assembler dans diff√©rents syst√®mes modulaires: iife, commonjs, umd. <br><br><h3>  Assistance Iife </h3><br>  Prise en charge de l'assemblage dans la fonction elle-m√™me appel√©e sans modules.  Pour comprendre, prenons le programme le plus c√©l√®bre: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>);</code> </pre><br>  conduisez-le via Rollup au format iife et voyez le r√©sultat: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>); }());</code> </pre><br>  La sortie est un code tr√®s compact, seulement 69 octets.  Si vous ne comprenez toujours pas l'avantage, Webpack / Browserify compilera le code suivant: <br><br><div class="spoiler">  <b class="spoiler_title">R√©sultat de la construction du Webpack</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, exports) { console.log("Hello, world!"); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Comme vous pouvez le voir, cela s'est av√©r√© un peu plus d√ª au fait que Webpack / Browserify ne peut √™tre construit que dans CommonJS.  Le gros avantage de l'IIFE est sa compacit√© et l'absence de conflits entre les diff√©rentes versions de CommonJS.  Mais il y a un inconv√©nient, vous ne pouvez pas collecter de morceaux, pour eux, vous devez passer √† CommonJS. <br><br><h3>  Compilation dans ES2015 </h3><br>  Le nom ¬´roll-up collector de nouvelle g√©n√©ration¬ª re√ßu en 2016 pour la possibilit√© de se r√©unir en ES2015.  Et jusqu'√† fin 2018, c'√©tait le seul collectionneur qui savait faire √ßa. <br>  Par exemple, si vous prenez le code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestA</span></span></span><span class="hljs-class"> </span></span>{ getData(){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"A"</span></span>} } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB().getData());</code> </pre><br>  et conduire √† travers Rollup, puis √† la sortie, nous obtenons la m√™me chose.  Et oui!  D√©but 2019, d√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">87% des</a> navigateurs pouvaient l'ex√©cuter nativement. <br><br>  Puis en 2016, cela a sembl√© √™tre une perc√©e, car il y avait un grand nombre d'applications qui n'avaient pas besoin de prise en charge pour les anciens navigateurs: les administrateurs, les kiosques, pas les applications Web, et il n'y avait pas d'outils de construction pour eux.  Et maintenant, avec Rollup, nous pouvons collecter plusieurs bundles en un seul passage, en es3, es5, es2015, exnext et en fonction du navigateur t√©l√©charger le n√©cessaire. <br><br>  Un autre grand avantage d'ES2015 est sa taille et sa vitesse d'ex√©cution.  En raison du manque de transposition vers une couche inf√©rieure, le code se r√©v√®le beaucoup plus compact, et en raison de l'absence de code auxiliaire g√©n√©r√© par les transpilateurs, ce code fonctionne √©galement 3 fois plus rapidement (selon mes tests subjectifs). <br><br><h3>  Tremblement d'arbre </h3><br>  C'est une puce Rollup, il l'a invent√©e!  Webpack a essay√© de l'impl√©menter pendant de nombreuses ann√©es d'affil√©e, mais ce n'est qu'avec la version 4 que quelque chose a commenc√© √† fonctionner.  Browserify se porte tr√®s mal. <br>  Quel genre d'animal est-ce?  Prenons l'exemple des deux fichiers suivants: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// module.ts export class TestA { getData(){return "A"} } export class TestB { getData(){return "B"} } // index.ts import { TestB } from './module'; const test = new TestB(); console.log("Hello, world!", test.getData());</span></span></code> </pre><br>  ex√©cuter Rollup et obtenir: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestB</span></span></span><span class="hljs-class"> </span></span>{ getData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"B"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> test = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, test.getData()); }());</code> </pre><br>  √Ä la suite de TreeShaking, le code mort a √©t√© supprim√© m√™me au stade de la r√©solution des d√©pendances.  Gr√¢ce √† cela, les assemblages Rollup se r√©v√®lent beaucoup plus compacts.  Voyons maintenant ce que Webpack g√©n√®re: <br><br><div class="spoiler">  <b class="spoiler_title">R√©sultat de la construction du Webpack</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); // CONCATENATED MODULE: ./src/module.ts class TestA { getData() { return "A"; } } class TestB { getData() { return "B"; } } // CONCATENATED MODULE: ./src/index.ts const test = new TestB(); console.log("Hello, world!", test.getData()); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Et ici, nous pouvons tirer deux conclusions.  Fin 2018, le premier Webpack a encore appris √† comprendre et √† construire ES2015.  Le second, absolument tout le code tombe dans l'assembly, mais le code mort est d√©j√† supprim√© √† l'aide du minifieur Terser (fork et successeur d'UglifyES).  √Ä la suite de cette approche, des paquets plus √©pais que Rollup, sur un habr a d√©j√† beaucoup √©crit √† ce sujet, nous ne nous arr√™terons pas l√†-dessus. <br><br><h3>  Plugins </h3><br>  Seul l'ES2015 + nu peut √™tre assembl√© √† partir d'une bo√Æte Rollup.  Afin de lui enseigner des fonctionnalit√©s suppl√©mentaires, telles que la connexion de commonjs, de modules dactylographi√©s, le chargement de html et scss, etc., vous devez connecter des plugins. <br><br>  Cela se fait tr√®s simplement: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {sizeSnapshot} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {terser} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.r.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ nodeResolve(), <span class="hljs-comment"><span class="hljs-comment">//   node commonJs(), //   commonjs postcss(), //   postcc,    scss  less html(), //  html  typeScript({tsconfig: "tsconfig.json"}), //  typescript sizeSnapshot(), //      terser(), //    ES2015+,    UglifyES visualizer() //   ] }];</span></span></code> </pre><br>  Si simple, un plug-in est connect√© en un seul mot.  Cette configuration peut collecter n'importe quelle application complexe et g√©n√®re m√™me une analyse de bundle en sortie. <br><br><h3>  R√©sum√© </h3><br>  Et maintenant, arm√©s de nouvelles connaissances, faisons une configuration qui collectera s√©par√©ment les polyphiles, une application distincte pour les anciens et les nouveaux navigateurs, un travailleur de service pour pwa et un travailleur Web pour des calculs complexes dans le brounund. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { sizeSnapshot } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { terser } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getPlugins = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) =&gt;</span></span> [ nodeResolve(), commonJs(), postcss(), html(), typeScript({ <span class="hljs-attr"><span class="hljs-attr">tsconfig</span></span>: <span class="hljs-string"><span class="hljs-string">"tsconfig.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tsconfigOverride</span></span>: { <span class="hljs-attr"><span class="hljs-attr">compilerOptions</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: options.target } } }), sizeSnapshot(), terser(), visualizer() ]; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/polyfills.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/polyfills.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.next.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"esnext"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es5.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es3.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es3"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/serviceworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/serviceworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/webworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/webworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) }];</code> </pre><br><br>  Tous les bundles faciles et les applications Web rapides! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440946/">https://habr.com/ru/post/fr440946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440932/index.html">Un peu sur l'informatique d√©cisionnelle</a></li>
<li><a href="../fr440938/index.html">Pourquoi Google avait-il besoin d'un graphique de connaissances?</a></li>
<li><a href="../fr440940/index.html">Redux - r√©vision de la logique et des actions du r√©ducteur</a></li>
<li><a href="../fr440942/index.html">BYD annonce une croissance des ventes de v√©hicules √©lectriques rechargeables</a></li>
<li><a href="../fr440944/index.html">Comment √©crire rapidement un site Web ou une application Web et ne pas se laisser prendre aux collectionneurs</a></li>
<li><a href="../fr440948/index.html">Ne soyez pas intelligent avec les formulaires de connexion</a></li>
<li><a href="../fr440950/index.html">Chrome Audit 500: Partie 1. Atterrissage</a></li>
<li><a href="../fr440954/index.html">Cycle de vie d'un article sur Habr√©: nous √©crivons un habraparser. Deuxi√®me partie</a></li>
<li><a href="../fr440956/index.html">Orchestrateur nomade alternatif sur le bureau</a></li>
<li><a href="../fr440958/index.html">Comment j'ai essay√© de corriger une recherche de carte pour les pilotes. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>