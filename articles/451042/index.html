<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòí üë©üèº‚Äçü§ù‚Äçüë©üèª ü§¶üèΩ Conceptos b√°sicos de dise√±o de bases de datos: comparaci√≥n de PostgreSQL, Cassandra y MongoDB üë≥ üë©üèø‚Äçü§ù‚Äçüë©üèª ‚õ∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola amigos Antes de partir para la segunda parte de las vacaciones de mayo, compartimos con ustedes el material que tradujimos en la v√≠spera del lanz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Conceptos b√°sicos de dise√±o de bases de datos: comparaci√≥n de PostgreSQL, Cassandra y MongoDB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/451042/">  Hola amigos  Antes de partir para la segunda parte de las vacaciones de mayo, compartimos con ustedes el material que tradujimos en la v√≠spera del lanzamiento de una nueva transmisi√≥n al ritmo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"DBMS relacional"</a> . <br><br><img src="https://habrastorage.org/webt/tg/jk/pk/tgjkpk23xr333l_ee0lddnylafa.png"><br><br>  Los desarrolladores de aplicaciones pasan mucho tiempo comparando m√∫ltiples bases de datos operativas para elegir la que mejor funcione para su carga de trabajo prevista.  Las necesidades pueden incluir modelado de datos simplificado, garant√≠as transaccionales, rendimiento de lectura / escritura, escala horizontal y tolerancia a fallas.  Por tradici√≥n, la elecci√≥n comienza con una categor√≠a de base de datos, SQL o NoSQL, ya que cada categor√≠a proporciona un conjunto claro de compensaciones.  El alto rendimiento en t√©rminos de baja latencia y alto rendimiento generalmente se considera un requisito de compensaci√≥n y, por lo tanto, es necesario para cualquier base de datos en la muestra. <a name="habracut"></a><br><br>  El prop√≥sito de este art√≠culo es ayudar a los desarrolladores de aplicaciones a tomar la decisi√≥n correcta entre SQL y NoSQL en el contexto del modelado de datos de aplicaciones.  Analizaremos una base de datos SQL, a saber, PostgreSQL y dos bases de datos NoSQL, Cassandra y MongoDB, para hablar sobre los conceptos b√°sicos del dise√±o de la base de datos, como crear tablas, rellenarlas, leer datos de la tabla y eliminarlas.  En el pr√≥ximo art√≠culo, definitivamente veremos los √≠ndices, las transacciones, las UNIONES, las directivas TTL y el dise√±o de bases de datos basadas en JSON. <br><br>  <b>¬øCu√°l es la diferencia entre SQL y NoSQL?</b> <br><br><blockquote>  Las bases de datos SQL aumentan la flexibilidad de la aplicaci√≥n con garant√≠as transaccionales ACID, as√≠ como su capacidad de consultar datos utilizando JOIN de manera inesperada adem√°s de los modelos de bases de datos relacionales normalizados existentes. </blockquote><br>  Dada su arquitectura monol√≠tica / de nodo √∫nico y el uso de un modelo de replicaci√≥n maestro-esclavo para la redundancia, las bases de datos SQL tradicionales no tienen dos caracter√≠sticas importantes: escalabilidad lineal del registro (es decir, divisi√≥n autom√°tica en varios nodos) y p√©rdida de datos autom√°tica / cero.  Esto significa que la cantidad de datos recibidos no puede exceder el rendimiento m√°ximo de escritura de un nodo.  Adem√°s, se debe tener en cuenta cierta p√©rdida temporal de datos durante la tolerancia a fallas (en una arquitectura sin compartir recursos).  Aqu√≠ debe tener en cuenta que las confirmaciones recientes a√∫n no se han reflejado en la copia esclava.  Las actualizaciones sin tiempo de inactividad tambi√©n son dif√≠ciles de lograr en las bases de datos SQL. <br><br>  Las bases de datos NoSQL generalmente se distribuyen por naturaleza, es decir  en ellos, los datos se dividen en secciones y se distribuyen en varios nodos.  Requieren desnormalizaci√≥n.  Esto significa que los datos ingresados ‚Äã‚Äãtambi√©n deben copiarse varias veces para responder a las solicitudes espec√≠ficas que env√≠e.  El objetivo general es obtener un alto rendimiento al reducir la cantidad de fragmentos disponibles durante la lectura.  Sigue la afirmaci√≥n de que NoSQL requiere que modele sus consultas, mientras que SQL requiere que modele sus datos. <br><br><blockquote>  NoSQL se enfoca en lograr un alto rendimiento en un cl√∫ster distribuido, y esta es la raz√≥n principal para muchas compensaciones de dise√±o de bases de datos que incluyen ACID de p√©rdida de transacciones, UNIONES e √≠ndices secundarios globales consistentes. </blockquote><br>  Se cree que aunque las bases de datos NoSQL proporcionan escalabilidad de escritura lineal y alta tolerancia a fallas, la p√©rdida de garant√≠as transaccionales las hace inadecuadas para datos cr√≠ticos para la misi√≥n. <br><br>  La siguiente tabla muestra c√≥mo el modelado de datos en NoSQL difiere de SQL. <br><br><img src="https://habrastorage.org/webt/sv/6k/or/sv6kor2fwminli9ywljf1hf5h34.png"><br><br>  <b>SQL y NoSQL: ¬øPor qu√© se necesitan ambos?</b> <br><br>  Las aplicaciones del mundo real con una gran cantidad de usuarios, como Amazon.com, Netflix, Uber y Airbnb, llevan a cabo tareas complejas y de clasificaci√≥n m√∫ltiple.  Por ejemplo, una aplicaci√≥n de comercio electr√≥nico como Amazon.com necesita almacenar datos livianos y altamente cr√≠ticos, como informaci√≥n sobre usuarios, productos, pedidos, facturas, junto con datos pesados ‚Äã‚Äãpero menos confidenciales, como revisiones de productos, mensajes de soporte , actividad del usuario, opiniones de los usuarios y recomendaciones.  Naturalmente, estas aplicaciones se basan en al menos una base de datos SQL junto con al menos una base de datos NoSQL.  En los sistemas interregionales y globales, la base de datos NoSQL funciona como un cach√© geo-distribuido para los datos almacenados en una fuente confiable, una base de datos SQL, trabajando en cualquier regi√≥n. <br><br>  <b>¬øC√≥mo combina YugaByte DB SQL y NoSQL?</b> <br><br>  Construido sobre un motor de almacenamiento mixto orientado a registros, fragmentaci√≥n autom√°tica, replicaci√≥n de consenso distribuida fragmentada y transacciones distribuidas ACID (inspiradas en Google Spanner), YugaByte DB es la primera base de datos de c√≥digo abierto del mundo que es simult√°neamente compatible con NoSQL (Cassandra &amp; Redis ) y SQL (PostgreSQL).  Como se muestra en la tabla a continuaci√≥n, YSQL, la API YugaByte DB compatible con Cassandra, agrega los conceptos de transacciones ACID simples y de m√∫ltiples claves e √≠ndices secundarios globales a las API NoSQL, abriendo as√≠ la era de las bases de datos NoSQL transaccionales.  Adem√°s, YSQL, una API YugaByte DB compatible con PostgreSQL, agrega la noci√≥n de escala de escritura lineal y tolerancia autom√°tica a fallas a la API SQL, presentando bases de datos SQL distribuidas al mundo.  Dado que la base de datos YugaByte DB es esencialmente transaccional, la API NoSQL ahora se puede usar en el contexto de datos de misi√≥n cr√≠tica. <br><br><img src="https://habrastorage.org/webt/ln/1a/_9/ln1a_9ouduu15ccxhvud1nssmme.png"><br><br>  Como se indic√≥ anteriormente en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Introducci√≥n de YSQL: una API SQL distribuida compatible con PostgreSQL para YugaByte DB"</a> , la elecci√≥n entre SQL o NoSQL en YugaByte DB depende completamente de las caracter√≠sticas de la carga de trabajo principal: <br><br><ul><li>  Si la carga de trabajo principal es operaciones de m√∫ltiples claves con JOIN, al elegir YSQL, comprenda que sus claves se pueden distribuir en varios nodos, lo que conducir√° a un mayor retraso y / o menor rendimiento que en NoSQL. </li><li>  De lo contrario, seleccione cualquiera de las dos API NoSQL, teniendo en cuenta que obtendr√° un mejor rendimiento como resultado de las consultas que se atienden desde un nodo a la vez.  YugaByte DB puede servir como una √∫nica base de datos operativa para aplicaciones complejas reales en las que necesita administrar m√∫ltiples cargas de trabajo al mismo tiempo. </li></ul><br>  El laboratorio de modelado de datos en la siguiente secci√≥n se basa en las bases de datos YugaByte DB compatibles con PostgreSQL y Cassandra API, a diferencia de las bases de datos de origen.  Este enfoque enfatiza la facilidad de interacci√≥n con dos API diferentes (en dos puertos diferentes) del mismo grupo de bases de datos, en lugar de usar grupos completamente independientes de dos bases de datos diferentes. <br><br>  En las siguientes secciones, nos reuniremos con el laboratorio de modelado de datos para ilustrar las diferencias y algunas caracter√≠sticas comunes de las bases de datos en cuesti√≥n. <br><br>  <b>Laboratorio de modelado de datos</b> <br><br>  <b>Instalaci√≥n de base de datos</b> <br><br>  Dado el √©nfasis en el dise√±o de un modelo de datos (en lugar de arquitecturas de implementaci√≥n complejas), instalaremos las bases de datos en contenedores Docker en la computadora local, y luego interactuaremos con ellos utilizando sus correspondientes shells de l√≠nea de comandos. <br><br>  <b>Compatible con PostgreSQL y Cassandra, base de datos YugaByte DB</b> <br><br><pre><code class="sql hljs">mkdir ~/yugabyte &amp;&amp; cd ~/yugabyte wget https://downloads.yugabyte.com/yb-docker-ctl &amp;&amp; chmod +x yb-docker-ctl docker pull yugabytedb/yugabyte ./yb-docker-ctl <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-comment"><span class="hljs-comment">--enable_postgres</span></span></code> </pre> <br>  <b>Mongodb</b> <br><br><pre> <code class="sql hljs">docker run <span class="hljs-comment"><span class="hljs-comment">--name my-mongo -d mongo:latest</span></span></code> </pre> <br>  <b>L√≠nea de comando de acceso</b> <br><br>  Vamos a conectarnos a las bases de datos utilizando el shell de la l√≠nea de comandos para las API correspondientes. <br><br>  <b>PostgreSQL</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">psql</a> es un shell de l√≠nea de comando para interactuar con PostgreSQL.  Para facilitar su uso, YugaByte DB viene con psql directamente en la carpeta bin. <br><br><pre> <code class="sql hljs">docker exec -it yb-postgres-n1 /home/yugabyte/postgres/bin/psql -p 5433 -U postgres</code> </pre> <br>  <b>Cassandra</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cqlsh</a> es un shell de l√≠nea de comandos para interactuar con Cassandra y sus bases de datos compatibles a trav√©s de CQL (lenguaje de consulta Cassandra).  Para facilitar su uso, YugaByte DB viene con <code>cqlsh</code> en el <code>bin</code> . <br><br>  Tenga en cuenta que CQL se inspir√≥ en SQL y tiene conceptos similares a tablas, filas, columnas e √≠ndices.  Sin embargo, como lenguaje NoSQL, agrega un cierto conjunto de restricciones, la mayor√≠a de las cuales tambi√©n cubriremos en otros art√≠culos. <br><br><pre> <code class="sql hljs">docker exec -it yb-tserver-n1 /home/yugabyte/bin/cqlsh</code> </pre> <br>  <b>Mongodb</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mongo</a> es un shell de l√≠nea de comando para interactuar con MongoDB.  Se puede encontrar en el directorio bin de la instalaci√≥n de MongoDB. <br><br><pre> <code class="sql hljs">docker exec -it my-mongo bash cd bin mongo</code> </pre> <br>  <b>Creaci√≥n de tabla</b> <br><br>  Ahora podemos interactuar con la base de datos para realizar varias operaciones utilizando la l√≠nea de comando.  Comencemos creando una tabla que almacene informaci√≥n sobre canciones escritas por diferentes artistas.  Estas canciones pueden ser parte de un √°lbum.  Tambi√©n atributos opcionales para la canci√≥n: a√±o de lanzamiento, precio, g√©nero y calificaci√≥n.  Necesitamos considerar atributos adicionales que pueden ser necesarios en el futuro a trav√©s del campo "etiquetas".  Puede almacenar datos semiestructurados como pares clave-valor. <br><br>  <b>PostgreSQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Music ( Artist <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, SongTitle <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, AlbumTitle <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">25</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">Year</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span>, Price <span class="hljs-built_in"><span class="hljs-built_in">FLOAT</span></span>, Genre <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>), CriticRating <span class="hljs-built_in"><span class="hljs-built_in">FLOAT</span></span>, Tags <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span>(Artist, SongTitle) );</code> </pre> <br>  <b>Cassandra</b> <br><br>  Crear una tabla en Cassandra es muy similar a PostgreSQL.  <b>Una de las principales diferencias es la falta de restricciones de integridad (por ejemplo, NO NULL), pero esto es responsabilidad de la aplicaci√≥n, no de la base de datos NoSQL</b> .  La clave principal consta de una clave de secci√≥n (columna Artista en el ejemplo a continuaci√≥n) y un conjunto de columnas de agrupaci√≥n (columna SongTitle en el ejemplo a continuaci√≥n).  La clave de partici√≥n determina en qu√© partici√≥n / fragmento colocar la fila, y las columnas de agrupamiento indican c√≥mo deben organizarse los datos dentro del fragmento actual. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> KEYSPACE myapp; <span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> myapp; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Music ( Artist <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, SongTitle <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, AlbumTitle <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Year</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span>, Price <span class="hljs-built_in"><span class="hljs-built_in">FLOAT</span></span>, Genre <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, CriticRating <span class="hljs-built_in"><span class="hljs-built_in">FLOAT</span></span>, Tags <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span>(Artist, SongTitle) );</code> </pre> <br>  <b>Mongodb</b> <br><br>  MongoDB organiza los datos en bases de datos (Base de datos) (similar a Keyspace en Cassandra), donde hay colecciones (Colecciones) (similares a tablas), que contienen documentos (Documentos) (similares a filas en una tabla).  MongoDB b√°sicamente no requiere la definici√≥n del esquema original.  El comando <i>"usar base de datos" que se</i> muestra a continuaci√≥n crea una instancia de la base de datos en la primera llamada y cambia el contexto de la base de datos reci√©n creada.  Incluso las colecciones no necesitan ser creadas expl√≠citamente, se crean autom√°ticamente, simplemente cuando agrega el primer documento a una nueva colecci√≥n.  Tenga en cuenta que MongoDB usa la base de datos de prueba de forma predeterminada, por lo tanto, cualquier operaci√≥n de nivel de recopilaci√≥n sin especificar una base de datos espec√≠fica se realizar√° de forma predeterminada. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> myNewDatabase;</code> </pre> <br>  <b>Recuperando informaci√≥n de la tabla PostgreSQL</b> <br><br><pre> <code class="sql hljs">\d Music Table "public.music" Column | Type | Collation | Nullable | Default <span class="hljs-comment"><span class="hljs-comment">--------------+-----------------------+-----------+----------+-------- artist | character varying(20) | | not null | songtitle | character varying(30) | | not null | albumtitle | character varying(25) | | | year | integer | | | price | double precision | | | genre | character varying(10) | | | criticrating | double precision | | | tags | text | | | Indexes: "music_pkey" PRIMARY KEY, btree (artist, songtitle)</span></span></code> </pre> <br>  <b>Cassandra</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DESCRIBE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> MUSIC; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> myapp.music ( artist <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, songtitle <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, albumtitle <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">year</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>, price <span class="hljs-built_in"><span class="hljs-built_in">float</span></span>, genre <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, tags <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (artist, songtitle) ) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CLUSTERING</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> (songtitle <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> default_time_to_live = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> transactions = {<span class="hljs-string"><span class="hljs-string">'enabled'</span></span>: <span class="hljs-string"><span class="hljs-string">'false'</span></span>};</code> </pre> <br>  <b>Mongodb</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> myNewDatabase; <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> collections;</code> </pre> <br>  <b>Publicar datos en una tabla PostgreSQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Music (Artist, SongTitle, AlbumTitle, <span class="hljs-keyword"><span class="hljs-keyword">Year</span></span>, Price, Genre, CriticRating, Tags) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span>( <span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span>, <span class="hljs-string"><span class="hljs-string">'Call Me Today'</span></span>, <span class="hljs-string"><span class="hljs-string">'Somewhat Famous'</span></span>, <span class="hljs-number"><span class="hljs-number">2015</span></span>, <span class="hljs-number"><span class="hljs-number">2.14</span></span>, <span class="hljs-string"><span class="hljs-string">'Country'</span></span>, <span class="hljs-number"><span class="hljs-number">7.8</span></span>, <span class="hljs-string"><span class="hljs-string">'{"Composers": ["Smith", "Jones", "Davis"],"LengthInSeconds": 214}'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Music (Artist, SongTitle, AlbumTitle, Price, Genre, CriticRating) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span>( <span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span>, <span class="hljs-string"><span class="hljs-string">'My Dog Spot'</span></span>, <span class="hljs-string"><span class="hljs-string">'Hey Now'</span></span>, <span class="hljs-number"><span class="hljs-number">1.98</span></span>, <span class="hljs-string"><span class="hljs-string">'Country'</span></span>, <span class="hljs-number"><span class="hljs-number">8.4</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Music (Artist, SongTitle, AlbumTitle, Price, Genre) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span>( <span class="hljs-string"><span class="hljs-string">'The Acme Band'</span></span>, <span class="hljs-string"><span class="hljs-string">'Look Out, World'</span></span>, <span class="hljs-string"><span class="hljs-string">'The Buck Starts Here'</span></span>, <span class="hljs-number"><span class="hljs-number">0.99</span></span>, <span class="hljs-string"><span class="hljs-string">'Rock'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Music (Artist, SongTitle, AlbumTitle, Price, Genre, Tags) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span>( <span class="hljs-string"><span class="hljs-string">'The Acme Band'</span></span>, <span class="hljs-string"><span class="hljs-string">'Still In Love'</span></span>, <span class="hljs-string"><span class="hljs-string">'The Buck Starts Here'</span></span>, <span class="hljs-number"><span class="hljs-number">2.47</span></span>, <span class="hljs-string"><span class="hljs-string">'Rock'</span></span>, <span class="hljs-string"><span class="hljs-string">'{"radioStationsPlaying": ["KHCR", "KBQX", "WTNR", "WJJH"], "tourDates": { "Seattle": "20150625", "Cleveland": "20150630"}, "rotation": Heavy}'</span></span> );</code> </pre> <br>  <b>Cassandra</b> <br><br>  En general, la expresi√≥n <code>INSERT</code> en Cassandra es muy similar a la de PostgreSQL.  Sin embargo, hay una gran diferencia en la sem√°ntica.  En Cassandra, <code>INSERT</code> realidad una operaci√≥n <code>UPSERT</code> donde los √∫ltimos valores se agregan a la cadena en caso de que la cadena ya exista. <br><blockquote>  La entrada de datos es similar a la inserci√≥n de PostgreSQL anterior </blockquote><br>  <b>Mongodb</b> <br><br>  Aunque MongoDB es una base de datos NoSQL, como Cassandra, su operaci√≥n de inserci√≥n no tiene nada que ver con el comportamiento sem√°ntico en Cassandra.  En MongoDB, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">insert ()</a> no tiene capacidades <code>UPSERT</code> , lo que lo hace parecer PostgreSQL.  Agregar datos predeterminados sin <code>_idspecified</code> agregar√° un nuevo documento a la colecci√≥n. <br><br> <code>db.music.insert( { <br> artist: "No One You Know", <br> songTitle: "Call Me Today", <br> albumTitle: "Somewhat Famous", <br> year: 2015, <br> price: 2.14, <br> genre: "Country", <br> tags: { <br> Composers: ["Smith", "Jones", "Davis"], <br> LengthInSeconds: 214 <br> } <br> } <br> ); <br> db.music.insert( { <br> artist: "No One You Know", <br> songTitle: "My Dog Spot", <br> albumTitle: "Hey Now", <br> price: 1.98, <br> genre: "Country", <br> criticRating: 8.4 <br> } <br> ); <br> db.music.insert( { <br> artist: "The Acme Band", <br> songTitle: "Look Out, World", <br> albumTitle:"The Buck Starts Here", <br> price: 0.99, <br> genre: "Rock" <br> } <br> ); <br> db.music.insert( { <br> artist: "The Acme Band", <br> songTitle: "Still In Love", <br> albumTitle:"The Buck Starts Here", <br> price: 2.47, <br> genre: "Rock", <br> tags: { <br> radioStationsPlaying:["KHCR", "KBQX", "WTNR", "WJJH"], <br> tourDates: { <br> Seattle: "20150625", <br> Cleveland: "20150630" <br> }, <br> rotation: "Heavy" <br> } <br> } <br> );</code> <br> <br>  <b>Consulta de tabla</b> <br><br>  Quiz√°s la diferencia m√°s significativa entre SQL y NoSQL en t√©rminos de dise√±o de consultas es el uso de las instrucciones <code>FROM</code> y <code>WHERE</code> .  SQL le permite seleccionar varias tablas despu√©s de una <code>FROM</code> , y una <code>WHERE</code> puede ser de cualquier complejidad (incluidas las operaciones <code>JOIN</code> entre tablas).  Sin embargo, NoSQL tiende a imponer una restricci√≥n estricta en <code>FROM</code> y funciona con una sola tabla especificada, y en <code>WHERE</code> , la clave primaria siempre debe especificarse.  Esto se debe al deseo de mejorar el rendimiento de NoSQL, del que hablamos anteriormente.  Este deseo conduce a todas las reducciones posibles en cualquier interacci√≥n entre tablas y claves.  Puede dar lugar a una gran demora en la comunicaci√≥n internodal al responder a una solicitud y, por lo tanto, es mejor evitarlo en principio.  Por ejemplo, Cassandra requiere que las consultas se limiten a ciertos operadores (solo se permiten <code>=, IN, &lt;, &gt;, =&gt;, &lt;=</code> ) en las teclas de partici√≥n, excepto cuando se solicita un √≠ndice secundario (aqu√≠ solo se permite el operador =). <br><br>  <b>PostgreSQL</b> <br><br>  A continuaci√≥n se ofrecen tres ejemplos de consultas que una base de datos SQL puede ejecutar f√°cilmente. <br><br><ul><li>  Imprime todas las canciones del artista; </li><li>  Imprima todas las canciones del artista que coincidan con la primera parte del nombre; </li><li>  Enumere todas las canciones del artista que tengan una palabra espec√≠fica en el t√≠tulo y que tengan un precio inferior a 1.00. </li></ul><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist=<span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist=<span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> SongTitle <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'Call%'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist=<span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> SongTitle <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%Today%'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> Price &gt; <span class="hljs-number"><span class="hljs-number">1.00</span></span>;</code> </pre> <br>  <b>Cassandra</b> <br><br>  De las consultas PostgreSQL anteriores, solo la primera funcionar√° en Cassandra sin cambios, ya que la instrucci√≥n <code>LIKE</code> no se puede aplicar a columnas de agrupaci√≥n como <code>SongTitle</code> .  En este caso, solo se permiten operadores <code>=</code> e <code>IN</code> . <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist=<span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist=<span class="hljs-string"><span class="hljs-string">'No One You Know'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> SongTitle <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'Call Me Today'</span></span>, <span class="hljs-string"><span class="hljs-string">'My Dog Spot'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> Price &gt; <span class="hljs-number"><span class="hljs-number">1.00</span></span>;</code> </pre> <br>  <b>Mongodb</b> <br><br>  Como se muestra en ejemplos anteriores, el m√©todo principal para crear consultas en MongoDB es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">db.collection.find ()</a> .  Este m√©todo contiene expl√≠citamente el nombre de la colecci√≥n ( <code>music</code> en el ejemplo a continuaci√≥n), por lo que est√° prohibida la solicitud de varias colecciones. <br><br><pre> <code class="sql hljs">db.music.find( { artist: "No One You Know" } ); db.music.find( { artist: "No One You Know", songTitle: /<span class="hljs-keyword"><span class="hljs-keyword">Call</span></span>/ } );</code> </pre> <br>  <b>Leer todas las filas de la tabla</b> <br><br>  Leer todas las l√≠neas es solo un caso especial de la plantilla de consulta que examinamos anteriormente. <br><br>  <b>PostgreSQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music;</code> </pre> <br><br>  <b>Cassandra</b> <br><br><blockquote>  Similar al ejemplo en PostgreSQL anterior. </blockquote><br><br>  Mongodb <br><br><pre> <code class="sql hljs">db.music.find( {} );</code> </pre> <br>  <b>Edici√≥n de datos en una tabla</b> <br><br>  <b>PostgreSQL</b> <br><br>  PostgreSQL proporciona una <code>UPDATE</code> para modificar datos.  No tiene capacidades <code>UPSERT</code> , por lo que la ejecuci√≥n de esta instrucci√≥n fallar√° si la fila ya no est√° en la base de datos. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> Genre = <span class="hljs-string"><span class="hljs-string">'Disco'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist = <span class="hljs-string"><span class="hljs-string">'The Acme Band'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> SongTitle = <span class="hljs-string"><span class="hljs-string">'Still In Love'</span></span>;</code> </pre> <br>  <b>Cassandra</b> <br><br>  Cassandra tiene una <code>UPDATE</code> similar a PostgreSQL.  <code>UPDATE</code> tiene la misma sem√°ntica <code>UPSERT</code> <code>INSERT</code> . <br><br><blockquote>  Similar al ejemplo en PostgreSQL anterior. </blockquote><br>  <b>Mongodb</b> <br>  La operaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">update ()</a> en MongoDB puede actualizar completamente un documento existente o actualizar solo ciertos campos.  Por defecto, actualiza solo un documento con la sem√°ntica <code>UPSERT</code> .  La actualizaci√≥n de m√∫ltiples documentos y comportamientos similares a <code>UPSERT</code> se puede aplicar estableciendo indicadores adicionales para la operaci√≥n.  Por ejemplo, en el ejemplo a continuaci√≥n, su canci√≥n actualiza el g√©nero de un artista en particular. <br><br><pre> <code class="sql hljs">db.music.update( {"artist": "The Acme Band"}, { $<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: { <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"Disco"</span></span> } }, {<span class="hljs-string"><span class="hljs-string">"multi"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"upsert"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>} );</code> </pre> <br>  <b>Eliminar datos de una tabla</b> <br><br>  <b>PostgreSQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Music <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Artist = <span class="hljs-string"><span class="hljs-string">'The Acme Band'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> SongTitle = <span class="hljs-string"><span class="hljs-string">'Look Out, World'</span></span>;</code> </pre> <br>  <b>Cassandra</b> <br><br><blockquote>  Similar al ejemplo en PostgreSQL anterior. </blockquote><br>  <b>Mongodb</b> <br><br>  MongoDB tiene dos tipos de operaciones para eliminar documentos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">deleteOne ()</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ deleteMany ()</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">remove ()</a> .  Ambos tipos eliminan documentos, pero devuelven resultados diferentes. <br><br><pre> <code class="sql hljs">db.music.deleteMany( { artist: "The Acme Band" } );</code> </pre><br>  <b>Eliminar tabla</b> <br><br>  <b>PostgreSQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Music;</code> </pre> <br>  <b>Cassandra</b> <br><br><blockquote>  Similar al ejemplo en PostgreSQL anterior. </blockquote><br>  <b>Mongodb</b> <br><br><pre> <code class="sql hljs">db.music.drop();</code> </pre> <br>  <b>Conclusi√≥n</b> <br><br>  El debate sobre la elecci√≥n entre SQL y NoSQL ha sido furioso durante m√°s de 10 a√±os.  Hay dos aspectos principales de este debate: la arquitectura del motor de la base de datos (SQL monol√≠tico, transaccional versus NoSQL distribuido, no transaccional) y el enfoque del dise√±o de la base de datos (modelar datos en SQL versus modelar sus consultas en NoSQL). <br><br>  Con una base de datos transaccional distribuida como YugaByte DB, el debate sobre la arquitectura de la base de datos se puede disipar f√°cilmente.  A medida que los vol√∫menes de datos se hacen m√°s grandes de lo que se puede escribir en un solo nodo, se hace necesaria una arquitectura completamente distribuida que admita escalabilidad lineal de grabaciones con fragmentaci√≥n / reequilibrio autom√°tico. <br><br>  Adem√°s de ser dicho en un art√≠culo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google Cloud</a> , las arquitecturas transaccionales estrictamente consistentes ahora se usan m√°s ampliamente para proporcionar una mejor flexibilidad de desarrollo que las arquitecturas no transaccionales y, en √∫ltima instancia, consistentes. <br><br>  Volviendo a la discusi√≥n del dise√±o de la base de datos, es justo decir que ambos enfoques de dise√±o (SQL y NoSQL) son necesarios para cualquier aplicaci√≥n real compleja.  El enfoque de "modelado de datos" del enfoque SQL permite a los desarrolladores cumplir m√°s f√°cilmente los requisitos comerciales cambiantes, mientras que el "datos de modelado" del enfoque NoSQL permite a los mismos desarrolladores manejar grandes cantidades de datos con baja latencia y alto rendimiento.  Es por esta raz√≥n que YugaByte DB proporciona API SQL y NoSQL en un n√∫cleo com√∫n, en lugar de promover uno de los enfoques.  Adem√°s, al garantizar la compatibilidad con los lenguajes de bases de datos populares, incluidos PostgreSQL y Cassandra, YugaByte DB garantiza que los desarrolladores no tengan que aprender otro idioma para trabajar con un motor de base de datos distribuido y estrictamente coherente. <br><br>  En este art√≠culo, descubrimos c√≥mo los fundamentos del dise√±o de la base de datos difieren en PostgreSQL, Cassandra y MongoDB.  En los siguientes art√≠culos, profundizaremos en conceptos de dise√±o avanzados, como √≠ndices, transacciones, uniones, directivas TTL y documentos JSON. <br><br>  Le deseamos una maravillosa estad√≠a el resto del fin de semana y lo invitamos a un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seminario web gratuito</a> , que se realizar√° el 14 de mayo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451042/">https://habr.com/ru/post/451042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451026/index.html">¬øPor qu√© nos queda tan poco de Internet temprano?</a></li>
<li><a href="../451028/index.html">Gu√≠a: tipos de ensayos en ingl√©s y consejos para escribirlos.</a></li>
<li><a href="../451032/index.html">Escribir HTTP / 1.1 y HTTP / 2 Cliente y Servidor en Golang</a></li>
<li><a href="../451034/index.html">Consultas SQL fantasma</a></li>
<li><a href="../451040/index.html">Diversi√≥n fuera de control en mayo, o acercamiento al enfrentamiento</a></li>
<li><a href="../451044/index.html">IMaskjs - 3 a√±os en c√≥digo abierto</a></li>
<li><a href="../451050/index.html">Ember.js: (nuevamente) hora de intentar</a></li>
<li><a href="../451054/index.html">DO-RA: preparaci√≥n para la producci√≥n industrial</a></li>
<li><a href="../451056/index.html">Introducci√≥n a MS Dynamics CRM</a></li>
<li><a href="../451058/index.html">Taller corporativo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>