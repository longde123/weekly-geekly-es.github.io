<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€ğŸ”¬ â˜ªï¸ ğŸŒ½ ä½¿ç”¨imapsyncè¿ç§»åˆ°Zimbra ğŸ‘©ğŸ»â€âœˆï¸ ğŸ›¸ ğŸ¤ŸğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="é™¤äº†äººä»¬æœŸå¾…å·²ä¹…çš„åŠŸèƒ½ï¼ˆå¦‚åˆ†å±‚é€šè®¯ç°¿ï¼‰å’Œå¯¹Ubuntu 18.10 LTSçš„å®˜æ–¹æ”¯æŒä¹‹å¤–ï¼ŒZimbra 8.8.12çš„å‘å¸ƒè¿˜ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å³å°†å–æ¶ˆå¯¹ä»å…¶ä»–é‚®ä»¶ç³»ç»Ÿè¿ç§»åˆ°Zimbra Collaboration Suiteæ‰€éœ€çš„è®¸å¤šå®ç”¨ç¨‹åºçš„æ”¯æŒçš„æ¶ˆæ¯ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå¯¹Dominoçš„ZCSè¿ç§»å‘å¯¼çš„æ”¯æŒå·²å®Œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨imapsyncè¿ç§»åˆ°Zimbra</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/458912/"> é™¤äº†äººä»¬æœŸå¾…å·²ä¹…çš„åŠŸèƒ½ï¼ˆå¦‚åˆ†å±‚é€šè®¯ç°¿ï¼‰å’Œå¯¹Ubuntu 18.10 LTSçš„å®˜æ–¹æ”¯æŒä¹‹å¤–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼ŒZimbra 8.8.12</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‘å¸ƒè¿˜</a>ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å³å°†å–æ¶ˆå¯¹ä»å…¶ä»–é‚®ä»¶ç³»ç»Ÿè¿ç§»åˆ°Zimbra Collaboration Suiteæ‰€éœ€çš„è®¸å¤šå®ç”¨ç¨‹åºçš„æ”¯æŒçš„æ¶ˆæ¯ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå¯¹Dominoçš„ZCSè¿ç§»å‘å¯¼çš„æ”¯æŒå·²å®Œå…¨åœæ­¢ï¼Œå¹¶ä¸”Exchangeçš„ZCSè¿ç§»å‘å¯¼ç°åœ¨å°†ä»…æ”¯æŒä»Outlookå¯¼å…¥PSTæ–‡ä»¶ã€‚ ä¸ºäº†å®ç°å…¨é¢çš„è¿ç§»ï¼ŒZimbra Collaboration Suiteçš„å¼€å‘äººå‘˜æä¾›äº†ä½¿ç”¨ä»˜è´¹åœ¨çº¿æœåŠ¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯å‡ºäºå®‰å…¨åŸå› ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªå…¬å¸éƒ½å‡†å¤‡å¥½å°†å…¶é‚®ç®±æ•°æ®æä¾›ç»™ç¬¬ä¸‰æ–¹ï¼Œå¹¶ä¸”å¹¶éæ¯ä¸ªå…¬å¸éƒ½èƒ½è´Ÿæ‹…ä¸è¿ç§»åˆ°Zimbraç›¸å…³çš„é¢å¤–è´¹ç”¨ã€‚ ç‰¹åˆ«æ˜¯å¯¹äºæ­¤ç±»ç”¨æˆ·ï¼Œæœ‰imapsyncç¨‹åºï¼Œè¯¥ç¨‹åºèƒ½å¤Ÿæä¾›ä»ä»»ä½•é‚®ä»¶ç³»ç»Ÿåˆ°Zimbraçš„å¯é å¢é‡è¿ç§»ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="å›¾ç‰‡"><a name="habracut"></a><br><br>  Imapsyncæ˜¯ä¸€ä¸ªå…è´¹çš„å…è´¹å®ç”¨ç¨‹åºï¼Œå¯åœ¨ä»»ä½•å®˜æ–¹æ”¯æŒçš„Zimbra Linuxå‘è¡Œç‰ˆçš„å­˜å‚¨åº“ä¸­ä½¿ç”¨ã€‚ è¯¥ç¨‹åºçš„ç›®çš„æ˜¯åœ¨ä¸åŒçš„é‚®ä»¶æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“ç”µå­é‚®ä»¶ï¼Œå¹¶ä¸”å¯ä»¥å®Œç¾åº”å¯¹ã€‚ ç”±äºè®¾ç½®çš„çµæ´»æ€§ï¼Œå¯ä»¥ä»¥å…¨è‡ªåŠ¨æ¨¡å¼é€æ­¥ä¼ è¾“é‚®ä»¶ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨imapsyncä»Lotus Dominoå’ŒMS Exchangeè¿ç§»åˆ°Zimbra Collaboration Suiteã€‚ <br><br><h3> ä»MS Exchangeè¿ç§»åˆ°Zimbra </h3><br> ä¸ºäº†ä½¿ç”µå­é‚®ä»¶è¿ç§»æˆåŠŸï¼Œæ‚¨éœ€è¦å®Œæˆä¸€ç³»åˆ—å‡†å¤‡å·¥ä½œã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›¸åŒçš„å¯†ç åœ¨ZimbraæœåŠ¡å™¨ä¸Šåˆ›å»ºä¸MS ExchangeæœåŠ¡å™¨ä¸Šç›¸åŒçš„ç”¨æˆ·ã€‚ åœ¨æ‰§è¡Œæ­¤ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨ADè‡ªåŠ¨é…ç½®Zimbraç”¨æˆ·éå¸¸æœ‰ç”¨ã€‚ æˆ‘ä»¬ä»¥å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»‹ç»</a>äº†è¿™ç§è‡ªåŠ¨è°ƒæ•´çš„è¿‡ç¨‹ã€‚ <br><br> ä»ADæˆ–Exchangeè¿ç§»æ‰€æœ‰å¸æˆ·ä¹‹åï¼Œæ‚¨éœ€è¦ä½¿ç”¨Zimbraåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…imapsyncè½¯ä»¶åŒ…ã€‚ å¦‚æœå°†Ubuntuç”¨ä½œZimbraçš„æ“ä½œç³»ç»Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨å‘½ä»¤<b>sudo apt-get install imapsync -yå®‰è£…ç¨‹åº</b> ï¼Œåœ¨CentOSå’ŒRHELä¸­ï¼Œå°†ä½¿ç”¨å‘½ä»¤<b>sudo yum install imapsync -y</b>æ‰§è¡Œ<b>å®‰è£…</b> ã€‚ <br><br> è½¯ä»¶åŒ…å’Œæ‰€æœ‰ä¾èµ–é¡¹çš„å®‰è£…å®Œæˆåï¼Œè®©æˆ‘ä»¬ç»§ç»­é…ç½®ExchangeæœåŠ¡å™¨ã€‚ åœ¨å®ƒä¸Šé¢ï¼Œæˆ‘ä»¬å°†éœ€è¦å¯ç”¨IMAP4æœåŠ¡ã€‚ è¿™æ˜¯é€šè¿‡è¿è¡Œ<b>services.msc</b>æ–‡ä»¶å®Œæˆçš„ï¼Œä¹‹åæ‚¨éœ€è¦è½¬åˆ°â€œå·¥å…·â€&gt;â€œæœåŠ¡â€-&gt;â€œ IMAP4 Microsoft Exchangeâ€-&gt;â€œå¯åŠ¨â€ã€‚ æ­¤åï¼Œæ‚¨å°†éœ€è¦æˆäºˆç®¡ç†å‘˜è®¿é—®ç”¨æˆ·é‚®ç®±çš„æƒé™ï¼Œä»¥é¿å…åœ¨è¿ç§»è¿‡ç¨‹ä¸­ä½¿ç”¨ç”¨æˆ·å¯†ç ï¼Œè¿˜éœ€è¦ç¦ç”¨æˆ–é…ç½®é€Ÿåº¦é™åˆ¶ç­–ç•¥ï¼Œä»¥å…å®ƒä»¬æˆä¸ºè¿ç§»çš„éšœç¢ã€‚ ç°åœ¨ï¼Œæ‚¨å¯ä»¥å¼€å§‹åœ¨æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“é‚®ä»¶äº†ã€‚ <br><br> åœ¨æˆ‘ä»¬çš„åŸºç¡€ç»“æ„ä¸­ï¼ŒMS Exchangeå°†ä½äºä¸»æœº<b>exchange.company.ruä¸Š</b> ï¼Œè€ŒZimbraå°†ä½äºä¸»æœº<b>zimbra.company.ruä¸Š</b> ã€‚ ä½¿ç”¨å‘½ä»¤è¡Œå°†ä¸€ä¸€è½¬ç§»ç”¨æˆ·ï¼Œåœ¨è¯¥å‘½ä»¤è¡Œä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿ç§»æ‰€éœ€çš„è®¸å¤šå‚æ•°æ¥è¿è¡Œimapsyncå®ç”¨ç¨‹åºã€‚ é¦–å…ˆï¼Œåº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œåœ¨Zimbraä¸­ï¼Œå°±åƒåœ¨MS Exchangeä¸­ä¸€æ ·ï¼Œç®¡ç†å‘˜å¸æˆ·å¯ä»¥è®¿é—®æ‰€æœ‰ç”¨æˆ·é‚®ç®±çš„å†…å®¹ï¼Œè¿™æ„å‘³ç€è¦è¿ç§»åˆ°æ–°çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œç³»ç»Ÿç®¡ç†å‘˜æ— éœ€çŸ¥é“æ™®é€šç”¨æˆ·å¸æˆ·çš„å¯†ç ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°†ä½¿ç”¨ä»¥ä¸‹æ ¼å¼çš„å‘½ä»¤å°†æ¯ä¸ªç”¨æˆ·ä»MS Exchangeè¿ç§»åˆ°Zimbraçš„åŸå› ï¼š <br><br><pre><code class="plaintext hljs">imapsync --host1 exchange.company.ru --user1 "xxxxx" --authuser1 "yyyyy" --password1 "zzzzz" --nosslcheck --host2 zimbra.company.ru --user2 "XXXXX" --authuser1 "YYYYY" --password2 "ZZZZZ"</code> </pre> <br> åœ¨æ­¤å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®š<b>imapsync</b>å°†ä»å…¶è·å–å¸æˆ·æ•°æ®çš„æºä¸»æœºï¼ˆ <b>--host1</b> ï¼‰ï¼Œä»¥åŠå°†å†™å…¥æ­¤æ•°æ®çš„ä¸»æœºï¼ˆ <b>--host2</b> ï¼‰ã€‚ æˆ‘ä»¬è¿˜åœ¨ç¬¬ä¸€å°ä¸»æœºä¸ŠæŒ‡å®šç”¨æˆ·åï¼ˆ <b>--user1</b> ï¼‰ï¼Œåœ¨ç¬¬äºŒå°ä¸»æœºä¸ŠæŒ‡å®šç›¸åº”çš„ç”¨æˆ·åï¼ˆ <b>--user2</b> ï¼‰ã€‚ ä¸ºäº†è®¿é—®å…¶æ•°æ®ï¼Œæˆ‘ä»¬æŒ‡å®šç¬¬ä¸€ä¸ªä¸»æœºçš„ç®¡ç†å‘˜å¸æˆ·åï¼ˆ <b>--authuser1</b> ï¼‰å’Œç®¡ç†å‘˜å¯†ç ï¼ˆ <b>--password1</b> ï¼‰ï¼Œå¹¶ä¸”ä¸ºäº†è®°å½•ä¼ è¾“çš„æ•°æ®ï¼Œè¯·æŒ‡å®šç®¡ç†å‘˜å¸æˆ·åï¼ˆ <b>--authuser2</b> ï¼‰å’Œå¯†ç ç¬¬äºŒä¸ªä¸»æœºçš„ç®¡ç†å‘˜ï¼ˆ <b>--password2</b> ï¼‰ã€‚ <br><br> åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„å‘½ä»¤è¶³ä»¥åœ¨ä½¿ç”¨MS Exchangeå’ŒZimbraçš„æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼Œä½†æ˜¯ï¼Œç»å¸¸å‘ç”Ÿçš„æ˜¯ï¼Œè§£å†³æ–¹æ¡ˆä¹‹é—´çš„å·®å¼‚ä¼šè‡ªè¡Œçº æ­£ï¼Œå› æ­¤ï¼Œä»MS Exchangeè¿›è¡Œæ•°æ®çš„ç®€å•ä¼ è¾“å°†å¯¼è‡´Zimbraé‚®ç®±çš„æ··ä¹±ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»Šè„šçŸ³æ˜¯é‚®ç®±ä¸­æ–‡ä»¶å¤¹çš„ä¸åŒåç§°ã€‚ ä¸ºäº†é¿å…åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­é€ æˆæ··ä¹±ï¼Œæœ‰å¿…è¦ä½¿æˆ‘ä»¬çš„å›¢é˜Ÿé‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š <br><br><pre> <code class="plaintext hljs">imapsync --subscribe_all --maxmessagespersecond 4 --addheader --f1f2 "Inbox=INBOX" \ --f1f2 "Sent Items=Sent" --f1f2 "Sent items=Sent" --exclude "^Journal|^Tasks|^Trash|Contacts|Calendar|RSS Feeds" \ --useheader "Message-ID" --buffersize 8192000 --nosyncacls --allowsizemismatch --usecache --syncinternaldates --skipsize --nofoldersizes \ --tls1 --port1 143 --user1 "xxxxxxxxxx" --authuser1 "besadmin" --password1 "XXXXXXX" \ --host2 'xxxxxxx' --user2 "xxxxxx" --authuser2 "XXXXXX" --password2 "XXXX" --tls2 --port2 7143 \ --regextrans2 "s/Inbox1/INBOX/i" --regextrans2 "s/Sent Items/Sent/i" --regextrans2 "s/sent-mail/Sent/i" --regextrans2 "s/Deleted Items/Trash/i" --regextrans2 "s/Deleted Messages/Trash/" \ --delete2duplicates --timeout 600 --pidfile "impasync.local.pid" --logfile "imapsync.log" --sep1 "/" --errorsmax "100"</code> </pre> <br> è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé€šç”¨è„šæœ¬ï¼Œæ— æ³•åœ¨ä»»ä½•åŸºç¡€æ¶æ„ä¸­æ­£å¸¸å·¥ä½œã€‚ å…¶ä¸­çš„è®¸å¤šå†…å®¹å¯èƒ½å–å†³äºåŸºç¡€æ¶æ„çš„å„ç§åŠŸèƒ½ã€‚ å› æ­¤ï¼Œåœ¨å¼€å§‹å…¨é¢è¿ç§»ä¹‹å‰ï¼Œä¸€å®šè¦æµ‹è¯•å¤šä¸ªéå…³é”®ä¸šåŠ¡å¸æˆ·åœ¨ç³»ç»Ÿä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ <br><br> è®©å¯åŠ¨imapsyncçš„å¤§é‡å‚æ•°ä¸ä¼šå“åˆ°æ‚¨ã€‚ ç²¾ç¡®åœ°éœ€è¦å®ƒä»¬ä¸­çš„å¤§å¤šæ•°ï¼Œä»¥ä¾¿ä»é‚®ç®±ä¼ è¾“æ–‡ä»¶å¤¹æ—¶ä¸ä¼šé€ æˆæ··ä¹±ï¼Œå¹¶ä¸”æ¥è‡ªMS Exchangeçš„æ‰€æœ‰å…ƒç´ éƒ½å°†ä¼ è¾“åˆ°Zimbraã€‚ ä¾‹å¦‚ï¼Œ-- <b>subscribe_all</b>å‚æ•°å…è®¸imapsyncè·å–æ‚¨å¸æˆ·ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿æ‚¨ä»¥åå¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ ä½¿ç”¨<b>--f1f2é€‰é¡¹</b> ï¼Œ <b>æ‚¨</b>å¯ä»¥åœ¨åŒæ­¥æœŸé—´æ›´æ”¹æ–‡ä»¶å¤¹çš„åç§°ã€‚ å³ï¼Œä¾‹å¦‚åœ¨åŒæ­¥æ—¶ã€‚  â€œå·²å‘é€é‚®ä»¶â€æ–‡ä»¶å¤¹å°†å…¶åç§°æ›´æ”¹ä¸ºâ€œå·²å‘é€â€ï¼Œä»è€Œä½¿æ‚¨çš„å†…å®¹å®Œå…¨é€‚åˆZimbra Collaboration Suiteçš„æ–‡ä»¶å¤¹ç»“æ„ã€‚  <b>--regextrans2</b>å‚æ•°è¿˜å…è®¸æ‚¨æ›´æ”¹æ–‡ä»¶å¤¹åç§°ï¼Œå¹¶ä¸”åŸºäºPerlç¼–ç¨‹è¯­è¨€çš„regexæœºåˆ¶ï¼Œå› æ­¤ç†Ÿæ‚‰è¯¥è¯­è¨€çš„äººå°†å¯ä»¥è½»æ¾å­¦ä¹ æ­¤å‚æ•°ã€‚ <br><br> ä¸ºäº†è§£é‡Š<b>--addheader</b>å’Œ<b>--useheaderé€‰é¡¹çš„ä½œç”¨</b> ï¼Œæœ‰å¿…è¦æ·±å…¥ç ”ç©¶imapsyncä¸­å­—æ¯çš„åŒæ­¥æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ äº‹å®æ˜¯ï¼Œä¸ºäº†åŒæ­¥imapsyncï¼Œæœ‰å¿…è¦åœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šæ ‡è¯†å­—æ¯ä»¥å†³å®šæ˜¯å¦åŒæ­¥å®ƒä»¬ã€‚ ä¸ºäº†éªŒè¯å®ƒä»¬ï¼Œæ­¤å®ç”¨ç¨‹åºä½¿ç”¨è¯¸å¦‚â€œè‰ç¨¿â€ä¹‹ç±»çš„ç”µå­é‚®ä»¶ä¸­æ‰€æ²¡æœ‰çš„å‚æ•°ï¼Œä¾‹å¦‚â€œ Message-Idï¼šâ€å’Œâ€œ Receivedï¼šâ€ï¼ˆæ ‡è¯†å·å’Œæ¥æ”¶æ—¶é—´ï¼‰ã€‚ ä¸ºäº†æ­£å¸¸åŒæ­¥å®ƒä»¬ï¼Œæˆ‘ä»¬éœ€è¦--addheaderå‘½ä»¤ã€‚ å®ƒå…è®¸æ‚¨å‘å®ƒä»¬æ·»åŠ ä¸€ä¸ªæ ‡è¯†å·ï¼Œä»¥ä¾¿åœ¨åŒæ­¥æœŸé—´ä»¥æŸç§æ–¹å¼æ ‡è¯†å’Œæ¯”è¾ƒè¿™äº›å­—æ¯ã€‚ ä½¿ç”¨--useheaderå‚æ•°å¯ä»¥åœ¨åŒæ­¥æœŸé—´ä»…ä½¿ç”¨ä¸¤ä¸ªå‚æ•°ä¹‹ä¸€æ¥æ¯”è¾ƒå­—æ¯ã€‚ <br><br> ç¼–å†™äº†ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†å¸æˆ·ä»MS Exchangeå®Œç¾è½¬ç§»åˆ°Zimbraçš„å®Œç¾è„šæœ¬ä¹‹åï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªé‡å¤§é—®é¢˜ï¼Œè¯¥é—®é¢˜ä¸æˆ‘ä»¬ä»ç„¶å¿…é¡»ä¸€æ¬¡åœ¨æœåŠ¡å™¨ä¹‹é—´è½¬ç§»ç”¨æˆ·è¿™ä¸€äº‹å®æœ‰å…³ã€‚ è¿™ä¸æ˜¯å¾ˆç†æƒ³ï¼Œç‰¹åˆ«æ˜¯åœ¨é‚£äº›æœ‰å¾ˆå¤šå‘˜å·¥å¹¶ä¸”é‚®ç®±æ•°ä»¥åƒè®¡çš„å…¬å¸ä¸­ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºå¸æˆ·åˆ—è¡¨ï¼Œç„¶åç¼–å†™ä¸€ä¸ªå°çš„è„šæœ¬æ¥æ ¹æ®å¸æˆ·åç§°è‡ªåŠ¨ä¼ è¾“é‚®ä»¶æ¥æå¤§åœ°ä¼˜åŒ–æ­¤è¿‡ç¨‹ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»º<b>imap_users</b>æ–‡ä»¶ï¼Œå¹¶ä»¥ä»¥ä¸‹å½¢å¼å°†æ‰€æœ‰å¿…è¦çš„æ•°æ®æ·»åŠ åˆ°å…¶ä¸­ï¼š <br><br><pre> <code class="plaintext hljs">domains=( domain1\ domain2) users=( user1@domain1\ user2@domain1\ user3@domain1\ user1@domain2\ user2@domain2\ user3@domain2)</code> </pre> <br> ä¹‹åï¼Œæˆ‘ä»¬å°†ç¼–å†™è„šæœ¬æœ¬èº«ã€‚ æˆ‘ä»¬å¾—åˆ°è¿™æ ·çš„ä¸œè¥¿ï¼š <br><br><pre> <code class="plaintext hljs">. imap_users src_srv = exchange.company.ru dest_srv = zimbra.company.ru for ((i = 0; i &lt; ${#users[@]}; i++ )) do /usr/bin/imapsync --subscribe_all --maxmessagespersecond 4 --addheader --f1f2 "Inbox=INBOX" \ --f1f2 "Sent Items=Sent" --f1f2 "Sent items=Sent" --exclude "^Journal|^Tasks|^Trash|Contacts|Calendar|RSS Feeds" \ --useheader "Message-ID" --buffersize 8192000 --nosyncacls --allowsizemismatch --usecache --syncinternaldates --skipsize --nofoldersizes \ --tls1 --port1 143 --host1 $src_srv --user1 ${users[$i]} --authuser1 "besadmin" --password1 "XXXXXXX" --nosslcheck \ --host2 $dest_srv --user2 ${users[$i]} --authuser2 "XXXXXX" --password2 "XXXX" --tls2 --port2 7143 \ --regextrans2 "s/Inbox1/INBOX/i" --regextrans2 "s/Sent Items/Sent/i" --regextrans2 "s/sent-mail/Sent/i" --regextrans2 "s/Deleted Items/Trash/i" --regextrans2 "s/Deleted Messages/Trash/" \ --delete2duplicates --timeout 600 --pidfile "impasync.local.pid" --logfile "imapsync.log" --sep1 "/" --errorsmax "100" done</code> </pre> <br> ç”±äºæ•°æ®ä¼ è¾“æ˜¯å¢é‡ä¼ è¾“ï¼Œå› æ­¤æ‚¨å¯ä»¥é¦–å…ˆåœ¨æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“å¤§é‡æ•°æ®ï¼Œç„¶ååœ¨çŸ­æš‚çš„æŠ€æœ¯çªç ´å†…ä¼ è¾“è‡ªä¸Šæ¬¡åŒæ­¥ä»¥æ¥ç´¯ç§¯çš„å°‘é‡æ•°æ®ï¼Œç„¶åå°†æ‰€æœ‰ä¼ å…¥çš„é‚®ä»¶ä¼ è¾“åˆ°Zimbraå¹¶ä½¿å…¶æˆä¸ºä¸»è¦é‚®ä»¶ç³»ç»Ÿã€‚ æˆ‘ä»¬æé†’æ‚¨ï¼Œåœ¨è¿ç§»åˆ°æ–°çš„é‚®æ”¿ç³»ç»Ÿä¹‹å‰ï¼Œæ‚¨éœ€è¦é€šçŸ¥å‘˜å·¥å³å°†è¿›è¡Œçš„è¿‡æ¸¡ï¼Œä¸ä»–ä»¬è¿›è¡ŒåŸ¹è®­ï¼Œå¹¶å‡†å¤‡å¤‡å¿˜å½•ï¼Œä»¥äº†è§£å…¶åœ¨Zimbraä¸­é€šå¸¸ä½ç½®çš„ä½ç½®ã€‚ å› æ­¤ï¼Œè¿ç§»å°†æ›´åŠ é¡ºåˆ©ï¼Œå¹¶ä¸”ä¸ä¼šç»™ä¸šåŠ¡é€ æˆé—®é¢˜ã€‚ <br><br><h3> ä»Lotus / Dominoè¿ç§»åˆ°Zimbra </h3><br> åœ¨è®¸å¤šæ–¹é¢ï¼Œä½¿ç”¨imapsyncä»IBMé‚®ä»¶ç³»ç»Ÿè¿›è¡Œçš„è¿ç§»è¿‡ç¨‹é‡å¤äº†ä»MS Exchangeå’Œä»»ä½•å…¶ä»–é‚®ä»¶ç³»ç»Ÿè¿›è¡Œçš„è¿ç§»è¿‡ç¨‹ã€‚ ä½†æ˜¯ï¼Œåœ¨ç›´æ¥è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè®¸å¤šç®¡ç†å‘˜åœ¨é€šè¿‡IMAPæ–­å¼€è¿æ¥å¹¶å› æ­¤ç»ˆæ­¢åŒæ­¥æ—¶é‡åˆ°é”™è¯¯ã€‚ åŒæ—¶ï¼Œæ—¥å¿—ä¸­æ²¡æœ‰é”™è¯¯æ¶ˆæ¯å‡ºç°ã€‚ å¦‚æœåœ¨ä»Lotus / Dominoè¿ç§»æœŸé—´é‡åˆ°æ­¤é—®é¢˜ï¼Œé‚£ä¹ˆä»¥ä¸‹æ“ä½œå°†æœ‰åŠ©äºè§£å†³æ­¤é—®é¢˜ï¼š <br><br><ul><li> ä»¥ç®¡ç†å‘˜æƒé™å¯åŠ¨Lotus Notesï¼Œç„¶åè½¬åˆ°é€šè®¯ç°¿ã€‚ </li><li> åœ¨â€œé€šè®¯ç°¿â€è®¾ç½®ä¸­ï¼Œå°†é»˜è®¤é‚®ä»¶æ ¼å¼æ›´æ”¹ä¸ºâ€œé¦–é€‰MIMEâ€ </li><li> åœ¨ä»¥ç®¡ç†å‘˜ç‰¹æƒè¿è¡Œçš„åŒä¸€Lotus Notesä¸­ï¼Œå°†ç”¨æˆ·æ•°æ®åº“æ ¼å¼æ›´æ”¹ä¸ºMailï¼ˆR6ï¼‰ï¼Œè¯¥æ ¼å¼æ˜¯ä»æœåŠ¡å™¨è€Œä¸æ˜¯ä»é‚®ä»¶å®¢æˆ·ç«¯è·å–çš„ </li><li> ä½¿ç”¨tell router quitå‘½ä»¤ä»Dominoç®¡ç†æ§åˆ¶å°ä¸­å…³é—­Lotus Domino Routerã€‚ </li><li> ä½¿ç”¨â€œ load compact userdb.nsfâ€å‘½ä»¤ä»Dominoç®¡ç†æ§åˆ¶å°æ‰“åŒ…ç”¨æˆ·æ•°æ®åº“ã€‚ </li><li> é€šè¿‡ä»Dominoæ§åˆ¶å°ï¼ˆè€Œä¸æ˜¯ä»ç®¡ç†å‘˜æ§åˆ¶å°ï¼‰è¿è¡Œfixup userdb.nsfå‘½ä»¤æ¥æ£€æŸ¥æ•°æ®åº“ä¸­çš„é”™è¯¯ã€‚ </li><li> åœ¨Dominoç®¡ç†æ§åˆ¶å°ä¸­ï¼Œè¿è¡Œå‘½ä»¤â€œ convert -e userdb.nsfâ€ä»¥å‡†å¤‡æ•°æ®åº“ä»¥è¿›è¡Œimapä¼ è¾“ </li><li> åœ¨Dominoç®¡ç†æ§åˆ¶å°ä¸­ï¼Œè¿è¡Œå‘½ä»¤â€œ convert -h userdb.nsfâ€ï¼Œå°†imapå¤´æ·»åŠ åˆ°æ‰€æœ‰æ¶ˆæ¯ä¸­ã€‚ </li></ul><br> å®Œæˆæ‰€æœ‰è¿™äº›æ­¥éª¤ä¹‹åï¼Œä½¿ç”¨imapsyncå°†é‚®ä»¶ä»Lotus / Dominoä¼ è¾“åˆ°Zimbraçš„è¿‡ç¨‹åº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚ <br><br> é™¤äº†ç”¨äºè¿ç§»çš„å®ç”¨ç¨‹åºå¤–ï¼Œå°å¼æœºå’Œç§»åŠ¨è®¾å¤‡çš„Zimbraå®¢æˆ·ç«¯ä¹Ÿæ²¡æœ‰æ”¯æŒã€‚ æ­¤å¤–ï¼ŒHTML Webå®¢æˆ·ç«¯ä¹Ÿä»æ”¯æŒä¸­åˆ é™¤ï¼Œè¯¥å®¢æˆ·ç«¯ç”¨äºç¡®ä¿ä¸æ—§ç‰ˆæµè§ˆå™¨å’Œä½åŠŸè€—è®¾å¤‡çš„å…¼å®¹æ€§ã€‚ ç”±äºZimbraæ”¯æŒå‡ ä¹æ‰€æœ‰å¼€æ”¾æ ‡å‡†å’Œåè®®ï¼Œå› æ­¤æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥ç”±ç¬¬ä¸‰æ–¹å®¢æˆ·è½»æ¾æ›¿æ¢ã€‚ <br><br> å›æƒ³ä¸€ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å…è´¹çš„Zextrasè¿ç§»å·¥å…·å®ŒæˆZimbraæœåŠ¡å™¨ä¹‹é—´çš„è¿ç§»ï¼Œæ‚¨å¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Zextras</a>å®˜æ–¹ç½‘ç«™ä¸Šä¸‹è½½è¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å·¥å…·</a> ã€‚ <br><br> æœ‰å…³Zextras Suiteçš„æ‰€æœ‰é—®é¢˜ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶katerina@zextras.comä¸Zextras Katerina Triandafilidiçš„ä»£è¡¨è”ç³»ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458912/">https://habr.com/ru/post/zh-CN458912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458902/index.html">5ä¸ªå¸¸è§çš„åˆå­¦è€…Pythoné”™è¯¯</a></li>
<li><a href="../zh-CN458904/index.html">ä½¿ç”¨Rä¸­çš„åŠ¨ç”»æ¡å½¢å›¾å¯è§†åŒ–NBAçƒé˜Ÿçš„è·èƒœæ¬¡æ•°</a></li>
<li><a href="../zh-CN458906/index.html">[å¶å¡æ·ç³å ¡ï¼Œå…¬å‘Š] Flutteron-Flutterå¼€å‘ç ”è®¨ä¼š</a></li>
<li><a href="../zh-CN458908/index.html">é€šè¿‡ç½‘ç»œæ‰«ææ–‡æ¡£</a></li>
<li><a href="../zh-CN458910/index.html">ä½¿ç”¨å¤§å‹Linuxé¡µé¢å¯¹PostgreSQLè¿›è¡ŒåŸºå‡†æµ‹è¯•</a></li>
<li><a href="../zh-CN458914/index.html">åœ¨Unityä¸Šåˆ›å»ºæ¸¸æˆéœ€è¦äº†è§£ä»€ä¹ˆï¼ˆä¸æ˜¯ï¼‰</a></li>
<li><a href="../zh-CN458916/index.html">åœ¨Reactçš„å¹•å æˆ‘ä»¬ä»å¤´å¼€å§‹ç¼–å†™å®ç°</a></li>
<li><a href="../zh-CN458918/index.html">æ‚¨å¯ä»¥ä»è¶…ä¼‘é—²æ¸¸æˆçš„è®¾è®¡ä¸­å­¦åˆ°ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN458920/index.html">DevOpsç²‰ä¸å¤§ä¼š</a></li>
<li><a href="../zh-CN458922/index.html">å¦‚ä½•ä»ESXiè¿ç§»åˆ°KVM / LXDè€Œä¸å¤±ä¸»æ„</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>