<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ ๐๐ฟ ๐บ๐ฟ ุชูููุฐ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Spring Framework ูู ุงูุตูุฑ. ุชุฌูู ูููุจุชุฏุฆูู. ุงูุฌุฒุก ุงูุฃูู ๐ท ๐๐พ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Spring Framework ูู ูุงุญุฏุฉ ูู ุฃูุซุฑ ุฃุทุฑ ุงูุนูู ุงููุนูุฏุฉ ููููู ูุงูุชุนูู. ูุชุนููู ูุนุธู ุงููุทูุฑูู ุจุจุทุก ุ ูู ุฎูุงู ุงูููุงู ุงูุนูููุฉ ูุฌูุฌู. ูุฐุง ุงูููุฌ ุบูุฑ ูุนุงู ุ ูุฃูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููุฐ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Spring Framework ูู ุงูุตูุฑ. ุชุฌูู ูููุจุชุฏุฆูู. ุงูุฌุฒุก ุงูุฃูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419679/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/iw/mz/82/iwmz824_ptetkxwvc6sqtwjmbjw.png"><br><br>  Spring Framework ูู ูุงุญุฏุฉ ูู ุฃูุซุฑ ุฃุทุฑ ุงูุนูู ุงููุนูุฏุฉ ููููู ูุงูุชุนูู.  ูุชุนููู ูุนุธู ุงููุทูุฑูู ุจุจุทุก ุ ูู ุฎูุงู ุงูููุงู ุงูุนูููุฉ ูุฌูุฌู.  ูุฐุง ุงูููุฌ ุบูุฑ ูุนุงู ุ ูุฃูู ูุง ูุนุทู ุตูุฑุฉ ูุงููุฉ ููู ููุณ ุงูููุช ุจุงูุธ ุงูุซูู. <br><br>  ุฃูุฏ ุฃู ุฃูุฏู ููู ููุงุฑุจุฉ ุฌุฏูุฏุฉ ุจุดูู ุฃุณุงุณู ูุฏุฑุงุณุฉ ุงูุฑุจูุน.  ููู ูุชุฃูู ูู ุญูููุฉ ุฃู ุงูุดุฎุต ููุฑ ุจุณูุณูุฉ ูู ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ ุงููุนุฏุฉ ุจุดูู ุฎุงุต ููููุฐ ุจุดูู ูุณุชูู ูุธููุฉ ุงูุฑุจูุน.  ุชููู ุฎุตูุตูุฉ ูุฐุง ุงูููุฌ ูู ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ููู 100ูช ููุฌูุงูุจ ุงููุฏุฑูุณุฉ ููุฑุจูุน ุ ูุฅูู ูุนุทู ุฃูุถูุง ุฒูุงุฏุฉ ูุจูุฑุฉ ูู Java Core (ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุ ุงูุชุฃูู ุ ุงููููุงุช ุ ุงููุฑุงุซุฉ). <br><br>  ุณุชููุญู ุงูููุงูุฉ ุชุฌุฑุจุฉ ูุง ุชูุณู ูุชุฌุนูู ุชุดุนุฑ ุจุฃูู ูุทูุฑ ูุญูุฑู.  ุฎุทูุฉ ุจุฎุทูุฉ ุ ุณูู ุชุฌุนู ุงููุตูู ุงูุฏุฑุงุณูุฉ ุงูุฎุงุตุฉ ุจู ูุชูุธู ุฏูุฑุฉ ุญูุงุชูุง (ูุซู ุงูุฑุจูุน ุงูุญูููู).  ุงููุฆุงุช ุงูุชู <b>ุณุชููุฐูุง</b> ูู <b>BeanFactory</b> ู <b>Component</b> ู <b>Service</b> ู <b>BeanPostProcessor</b> ู <b>BeanNameAware</b> ู <b>BeanFactoryAware</b> ู <b>InitializingBean</b> ู <b>PostConstruct</b> ู <b>PreDestroy</b> ู <b>DisposableBean</b> ู <b>ApplicationContext</b> ู <b>ApplicationListener</b> ู <b>ContextClosedEvent</b> . <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงููููู ุนู ููุณู </h2><br>  ุงุณูู ูุงุฑูุณูุงู ูุฃูุง ูุทูุฑ ุฌุงูุง ูุน 4 ุณููุงุช ูู ุงูุฎุจุฑุฉ.  ูู ุงูููุช ุงูุญุงูู ุฃุนูู ูุฏู EPAM Systems (SPB) ุ ูุฃุชุนูู ูุซูุฑูุง ูู ุงูุชูููุงุช ุงูุชู ูุณุชุฎุฏููุง.  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูุฌุจ ุฃู ุฃุชุนุงูู ูุน ุงูุฑุจูุน ุ ูุฃุฑู ููู ุจุนุถ ุงููุณุท ุงูุฐู ููููู ููู ุงูููู (ุฌุงูุง ูุนุฑู ุงูุฌููุน ุฌูุฏูุง ุ ููููู ููุฃุฏูุงุช ูุงูุชูููุงุช ุงููุญุฏุฏุฉ ุฃู ุชุฃุชู ูุชุฐูุจ). <br><br>  ูุจู ุดูุฑูู ุ ุญุตูุช ุนูู ุดูุงุฏุฉ Spring Professional v5.0 (ุจุฏูู ุฃุฎุฐ ุฏูุฑุงุช).  ุจุนุฏ ุฐูู ุ ููุฑุช ูู ููููุฉ ุชุนููู ุงูุขุฎุฑูู ููุจูุน.  ูุณูุก ุงูุญุธ ุ ูุง ุชูุฌุฏ ูู ุงูููุช ุงูุญุงูู ูููุฌูุฉ ุชุฏุฑูุณ ูุนุงูุฉ.  ูุนุธู ุงููุทูุฑูู ูุฏููู ููุฑุฉ ุณุทุญูุฉ ููุบุงูุฉ ุนู ุงูุฅุทุงุฑ ูููุฒุงุชู.  ูุนุฏ ุชุตุญูุญ ูุตุงุฏุฑ ุงูุฑุจูุน ุฃูุฑูุง ุตุนุจูุง ููุบุงูุฉ ูุบูุฑ ูุนุงู ุนูู ุงูุฅุทูุงู ูู ูุฌูุฉ ูุธุฑ ุงูุชุฏุฑูุจ (ููุช ูููุนูุง ุจุฐูู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู).  ูู 10 ูุดุงุฑูุนุ  ูุนู ุ ูู ููุงู ูุง ููููู ุชุนููู ูุนุฑูุชู ูุงูุชุณุงุจ ุงููุซูุฑ ูู ุงูุฎุจุฑุฉ ุงูุนูููุฉ ุ ูููู ุงููุซูุฑ ููุง ูู "ุชุญุช ุบุทุงุก ุงููุญุฑู" ูู ููุชุญ ุฃูุงูู ุฃุจุฏูุง.  ูุฑุงุกุฉ ุงูุฑุจูุน ูู ุงูุนููุ  ุฑุงุฆุน ุ ููููู ูููู ูู ุงูุฌูุฏ.  ููุฏ ุนููุช 40 ูช (ุฃุซูุงุก ุงูุชุญุถูุฑ ููุดูุงุฏุฉ) ุ ููู ุฐูู ูู ููู ุณููุงู. <br><br>  ุงูุทุฑููุฉ ุงููุญูุฏุฉ ูููู ุดูุก ุญุชู ุงูููุงูุฉ ูู ุชุทููุฑู ุจููุณู.  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ูุงูุช ูุฏู ููุฑุฉ ุฃูู ููููู ููุงุฏุฉ ุดุฎุต ูู ุฎูุงู ุจุฑูุงูุฌ ุชุนูููู ูุซูุฑ ููุงูุชูุงู ุณูุดุฑู ุนูู ุชุทููุฑ ุฅุทุงุฑ ุนูู DI.  ูุณุชููู ููุฒุชู ุงูุฑุฆูุณูุฉ ุฃู API ุชุชุฒุงูู ูุน API ููุฏ ุงูุฏุฑุงุณุฉ.  ุฅู ุฑูุนุฉ ูุฐุง ุงูููุฌ ูู ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ููู ุนููู (ุจุฏูู ูุณุงูุงุช) ููุฑุจูุน ุ ุณูุญุตู ุงูุดุฎุต ุนูู ูุฏุฑ ูุจูุฑ ูู ุงูุฎุจุฑุฉ ูู Java Core.  ุจุตุฑุงุญุฉ ุ ููุฏ ุชุนููุช ุจููุณู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงูุฌุฏูุฏุฉ ุฃุซูุงุก ุฅุนุฏุงุฏ ุงูููุงูุฉ ุ ูู ูู ูู Spring ู Java Core.  ุฏุนูุง ูุจุฏุฃ ุชุทููุฑ! <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุดุฑูุน ูู ุงูุตูุฑ </h2><br>  ูุฐุง ุ ูุฅู ุฃูู ุดูุก ุชูุนูู ูู ูุชุญ IDE ุงูููุถู ูุฏูู ูุฅูุดุงุก ูุดุฑูุน ูู ุงูุจุฏุงูุฉ.  ูู ูููู ุจุชูุตูู ุฃู Maven ุฃู ุฃู ููุชุจุงุช ุทุฑู ุซุงูุซ.  ูู ูููู ุญุชู ุจุฑุจุท ุชุจุนูุงุช ุงูุฑุจูุน.  ูุฏููุง ูู ุชุทููุฑ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุชุดุจู ุฅูู ุญุฏ ูุจูุฑ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Spring ุ ูุชูููุฐูุง ุจุฃููุณูุง. <br><br>  ูู ูุดุฑูุน ูุธูู ุ ุฃูุดุฆ ุญุฒูุชูู ุฑุฆูุณูุชูู.  ุงูุญุฒูุฉ ุงูุฃููู ูู ุชุทุจููู ( <code>com.kciray</code> ) ุ ููุฆุฉ <code>Main.java</code> ุจุฏุงุฎูู.  ุงูุญุฒูุฉ ุงูุซุงููุฉ ูู org.springframework.  ูุนู ุ ุณูููู ุจุชูุฑุงุฑ ุจููุฉ ุงูุญุฒูุฉ ููุฑุจูุน ุงูุฃุตูู ุ ูุงุณู ูุฆุงุชูุง ูุทุฑููุง.  ููุงู ูุซู ูุฐุง ุงูุชุฃุซูุฑ ุงููุซูุฑ ููุงูุชูุงู - ุนูุฏูุง ุชูุดุฆ ุดูุฆูุง ุฎุงุตูุง ุจู ุ ูุจุฏุฃ ุชุฃุซูุฑู ุงูุฎุงุต ูู ุฃู ูุจุฏู ุจุณูุทูุง ูููููููุง.  ุจุนุฏ ุฐูู ุ ุนูุฏูุง ุชุนูู ูู ูุดุงุฑูุน ูุจูุฑุฉ ุ ูุจุฏู ูู ุฃู ูู ุดูุก ูุชู ุฅูุดุงุคู ููุงู ุจูุงุกู ุนูู ูุทุนุฉ ุนููู.  ูููู ุฃู ูููู ููุฐุง ุงูููุฌ ุชุฃุซูุฑ ุฅูุฌุงุจู ููุบุงูุฉ ุนูู ููู ุงููุธุงู ููู ุ ูุชุญุณููู ุ ูุฅุตูุงุญ ุงูุฃุฎุทุงุก ุ ูุญู ุงููุดููุงุช ุ ููุง ุฅูู ุฐูู. <br><br>  ุฅุฐุง ูุงู ูุฏูู ุฃู ูุดุงูู ุ ููููู ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฃุฎุฐ</a> ูุดุฑูุน ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ุญุงููุฉ </h2><br>  ููุจุฏุก ุ ูู ุจุชุนููู ุงููููุฉ.  ูููุชุฑุถ ุฃู ูุฏููุง ูุฆุชูู - <code>ProductFacade</code> ู <code>PromotionService</code> .  ุชุฎูู ุงูุขู ุฃูู ุชุฑูุฏ ุฑุจุท ูุฐู ุงููุฆุงุช ุจุจุนุถูุง ุงูุจุนุถ ุ ูููู ุญุชู ูุง ุชุนุฑู ุงููุฆุงุช ููุณูุง ุนู ุจุนุถูุง ุงูุจุนุถ (ููุท DI).  ูุญู ุจุญุงุฌุฉ ุฅูู ูุตู ูููุตู ูุฏูุฑ ูู ูุฐู ุงููุฆุงุช ููุญุฏุฏ ุงูุชุจุนูุงุช ุจูููุง.  ุฏุนููุง ูุณูููุง ุญุงููุฉ.  ูููู ุจุฅูุดุงุก ูุฆุฉ <code>Container</code> ... ุนูู ุงูุฑุบู ูู ูุง ุ ุงูุชุธุฑ!  ูุง ูุญุชูู ุงูุฑุจูุน ุนูู ูุฆุฉ ุญุงููุฉ ูุงุญุฏุฉ.  ูุฏููุง ุงูุนุฏูุฏ ูู ุชุทุจููุงุช ุงูุญุงููุงุช ุ ููููู ุชูุณูู ุฌููุน ูุฐู ุงูุชุทุจููุงุช ุฅูู ููุนูู - ูุตุงูุน ุงูุญุงููุงุช ูุงูุณูุงูุงุช.  ูููู ูุตูุน ุจู ุจุฅูุดุงุก ุงููุงุตูููุง ูุฑุจุทูุง ูุนูุง (ุญูู ุงูุชุจุนูุฉ ุ DI) ุ ูุงูุณูุงู ููุนู ููุณ ุงูุดูุก ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃูู ูุถูู ุจุนุถ ุงูููุฒุงุช ุงูุฅุถุงููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุชุฏููู ุงูุฑุณุงุฆู).  ููููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ูุฐู ุงููุธุงุฆู ุงูุฅุถุงููุฉ ุงูุขู ุ ูุฐูู ุณูุนูู ูุน ูุตูุน ุจู. <br><br>  ุฃูุดุฆ ูุฆุฉ <code>BeanFactory</code> ุฌุฏูุฏุฉ ูุถุนูุง ูู ูุฌููุนุฉ <code>org.springframework.beans.factory</code> .  ุงุณูุญ ุจุชุฎุฒูู <code>Map&lt;String, Object&gt; singletons</code> ุฏุงุฎู ูุฐู ุงููุฆุฉ ุ ุญูุซ ูุชู ุชุนููู <code>id</code> ุงูุญุงููุฉ ุฅูู ุงูุญุงููุฉ ููุณูุง.  ุฃุถู ุฅูููุง ุทุฑููุฉ <code>Object getBean(String beanName)</code> ุ ูุงูุชู ุชุณุญุจ ุงููุงุตูููุง ุญุณุจ ุงููุนุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Map&lt;String, Object&gt; singletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String beanName)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singletons.get(beanName); } }</code> </pre> <br>  ูุฑุฌู ููุงุญุธุฉ ุฃู <code>BeanFactory</code> ู <code>FactoryBean</code> ุดูุฆุงู ูุฎุชููุงู.  ุงูุฃูู ูู ูุตูุน ุงูุญุงููุฉ (ุงูุญุงููุฉ) ุ ูุงูุซุงูู ูู ูุตูุน ุงูุญุงููุฉ ุ ุงูุฐู ููุน ุฏุงุฎู ุงูุญุงููุฉ ูููุชุฌ ุงูุตูุงุฏูู ุฃูุถูุง.  ูุตูุน ุฏุงุฎู ุงููุตูุน.  ุฅุฐุง ููุช ูุฑุชุจููุง ุจูู ูุฐู ุงูุชุนุฑููุงุช ุ ููุฏ ุชุชุฐูุฑ ุฃู ุงูุงุณู ุงูุซุงูู ูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูู ุงูุงุณู ุงูุฃูู ุ ูุงูุฃูู ูู ุดูุก ูุซู ุงูุตูุฉ.  ูู <b>ูุตูุน</b> ุงูููู <b>ุ</b> ุงููููุฉ ุงูุฑุฆูุณูุฉ ูู ุงููุตูุน ุ ููู ูุตูุน <b>ููู</b> ุ ุงูููู. <br><br>  ุงูุขู ุ ูู ุจุฅูุดุงุก ูุฆุชู <code>ProductService</code> ู <code>PromotionsService</code> .  ุณุชููู <code>ProductService</code> ุจุฅุนุงุฏุฉ ุงูููุชุฌ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูููู ูุจู ุฐูู ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ููุงู ุฃู ุฎุตููุงุช (ุนุฑูุถ ุชุฑููุฌูุฉ) ุชูุทุจู ุนูู ูุฐุง ุงูููุชุฌ.  ูู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ุ ุบุงูุจูุง ูุง ูุชู ุชุฎุตูุต ุงูุนูู ุงููุฎุตูู ููุฆุฉ ุฎุฏูุฉ ูููุตูุฉ (ูุฃุญูุงููุง ูุฎุฏูุฉ ููุจ ูุฌูุฉ ุฎุงุฑุฌูุฉ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PromotionsService promotionsService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PromotionsService </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPromotionsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> promotionsService; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPromotionsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PromotionsService promotionsService)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.promotionsService = promotionsService; } }</code> </pre><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุฌุนู ุงูุญุงููุฉ ุงูุฎุงุตุฉ ุจูุง ( <code>BeanFactory</code> ) ุชูุชุดู <code>BeanFactory</code> ููุง ูุญูู ูุงุญุฏุฉ ูู ุงูุฃุฎุฑู.  ูุฌุจ ุฃู ุชููู ุงูุนูููุงุช ูุซู <code>new ProductService()</code> ุฏุงุฎู ุงูุญุงููุฉ ููุชู ุฅุฌุฑุงุคูุง ูููุทูุฑ.  ุฏุนููุง ูุณุชุฎุฏู ุฃุญุฏุซ ุงูุฃุณุงููุจ (ุงููุณุญ ุงูุทุจูู ูุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ).  ูุฅุฌุฑุงุก ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุชุนููู ุชูุถูุญู <code>@Component</code> ุจุงุณุชุฎุฏุงู <code>@Component</code> ( <code> org.springframework.beans.factory.stereotype</code> ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Component { }</code> </pre><br>  ุจุดูู ุงูุชุฑุงุถู ุ ูุง ูุชู ุชุญููู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูู ุงูุฐุงูุฑุฉ ุฃุซูุงุก ุชุดุบูู ุงูุจุฑูุงูุฌ ( <code>RetentionPolicy.CLASS</code> ).  ูููุง ุจุชุบููุฑ ูุฐุง ุงูุณููู ูู ุฎูุงู ุณูุงุณุฉ ุงุญุชูุงุธ ุฌุฏูุฏุฉ ( <code>RetentionPolicy.RUNTIME</code> ). <br><br>  ุฃุถู ุงูุขู <code>@Component</code> ูุจู ูุฆุงุช <code>ProductService</code> ููุจู <code>PromotionService</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... } @Component public class PromotionService { //... }</span></span></code> </pre> <br><br>  ูุญุชุงุฌ <code>BeanFactory</code> ููุญุต ุงูุญุฒูุฉ ( <code>com.kciray</code> ) ูุงูุนุซูุฑ ุนูู ูุฆุงุช ูููุง ูุดุฑูุญุฉ ุจูุงุณุทุฉ <code>@Component</code> .  ูุฐู ุงููููุฉ ุจุนูุฏุฉ ุนู ุฃู ุชููู ุชุงููุฉ.  ูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฌุฏ ุญู ุฌุงูุฒ</a> ูู Java Core ุ ูุนูููุง ุฃู ูุตูุน ุนูุงุฒูุง ุจุฃููุณูุง.  ุชุณุชุฎุฏู ุงูุขูุงู ูู ุชุทุจููุงุช ุงูุฑุจูุน ุงููุณุญ ุงูุถูุฆู ููููููุงุช ูู ุฎูุงู ูุฐุง ุงูุนูุงุฒ.  ููุฏ ุชุนููุช ุงูุญูููุฉ ุงูุฑููุจุฉ.  ุณูุชุนูู ุนููู ุงุณุชุฎุฑุงุฌ ุฃุณูุงุก <code>ClassLoader</code> ูู <code>ClassLoader</code> ูุงูุชุญูู ููุง <code>ClassLoader</code> ูุงูุช ุชูุชูู ุจู ".class" ุฃู ูุง ุ ุซู ุจูุงุก ุงุณููุง ุงููุงูู ูุณุญุจ ูุงุฆูุงุช ุงููุฆุฉ ููู! <br><br>  ุฃุฑูุฏ ุฃู ุฃุญุฐุฑู ุนูู ุงูููุฑ ุฃูู ุณูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุงุณุชุซูุงุกุงุช ุงููุญุฏุฏุฉ ุ ูุฐุง ูู ูุณุชุนุฏูุง ูููุง.  ููู ุฃููุงู ุ ุฏุนูุง ููุฑุฑ ูุง ูุฑูุฏ.  ูุฑูุฏ ุฅุถุงูุฉ ุทุฑููุฉ ุฎุงุตุฉ ุฅูู <code>BeanFactory</code> ุจุดูู <code>Main</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//BeanFactory.java public class BeanFactory{ public void instantiate(String basePackage) { } } //Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.instantiate("com.kciray");</span></span></code> </pre><br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู <code>ClassLoader</code> .  ููู ูุณุคููุฉ ุนู ุชุญููู ุงููุฆุงุช ุ ููุชู ุงุณุชุฎูุงุตูุง ุจูู ุจุณุงุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">ClassLoader classLoader = ClassLoader.getSystemClassLoader();</code> </pre> <br>  ุฑุจูุง ูุงุญุธุช ุจุงููุนู ุฃู ุงูุญุฒู ููุตููุฉ ุจููุทุฉ ุ ูุงููููุงุช ุจุดุฑุทุฉ ูุงุฆูุฉ ููุฃูุงู.  ูุญุชุงุฌ ุฅูู ุชุญููู ูุณุงุฑ ุงูุฏููุนุงุช ุฅูู ูุณุงุฑ ุงููุฌูุฏ ุ ูุงูุญุตูู ุนูู ุดูุก ูุซู <code>List&lt;URL&gt;</code> (ุงููุณุงุฑุงุช ูู ูุธุงู ุงููููุงุช ุงูุฎุงุต ุจู ุญูุซ ููููู ุงูุจุญุซ ุนู ูููุงุช ุงููุฆุฉ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">String path = basePackage.replace(<span class="hljs-string"><span class="hljs-string">'.'</span></span>, <span class="hljs-string"><span class="hljs-string">'/'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//"com.kciray" -&gt; "com/kciray" Enumeration&lt;URL&gt; resources = classLoader.getResources(path);</span></span></code> </pre> <br>  ูุฐุง ุงูุชุธุฑ ูุญุธุฉ!  <code>Enumeration&lt;URL&gt;</code> ููุณ <code>List&lt;URL&gt;</code> .  ูุง ูู ูู ูุฐุงุ  ุฃูู ุ ุฑุนุจ ุ ูุฐุง ุงูุณูู ุงููุฏูู ูู <code>Iterator</code> ุ ูุชุงุญ ููุฐ Java 1.0.  ูุฐุง ูู ุงูุฅุฑุซ ุงูุฐู ุนูููุง ุฃู ูุชุนุงูู ูุนู.  ุฅุฐุง ูุงู ูู ุงููููู ุงูุณูุฑ ุนุจุฑ <code>Iterable</code> ุจุงุณุชุฎุฏุงู (ุฌููุน ุงููุฌููุนุงุช ุชููุฐูุง) ุ ูู ุญุงูุฉ <code>Enumeration</code> ุณูุชุนูู ุนููู ุฅุฌุฑุงุก ุชุฌุงูุฒ ุฌุงูุจู ุ ุญุชู <code>while(resources.hasMoreElements())</code> ู <code>nextElement()</code> .  ููุน ุฐูู ุ ูุง ุชูุฌุฏ ุทุฑููุฉ ูุฅุฒุงูุฉ ุงูุนูุงุตุฑ ูู ุงููุฌููุนุฉ.  ููุท ุนุงู 1996 ุ ุงููุชุดุฏุฏูู ููุท.  ุฃูู ูุนู ุ ูู Java 9 ุฃุถุงููุง ุทุฑููุฉ <code>Enumeration.asIterator()</code> ุ ุญุชู ุชุชููู ูู ุงูุนูู ูู ุฎูุงููุง. <br><br>  ุฏุนูุง ูุฐูุจ ุฃุจุนุฏ ูู ุฐูู.  ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฑุงุฌ ุงููุฌูุฏุงุช ูุงูุนูู ูู ุฎูุงู ูุญุชููุงุช ูู ูููุง.  ูู ุจุชุญููู ุนููุงู URL ุฅูู ููู ุ ุซู ุงุญุตู ุนูู ุงุณูู.  ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ููุง ุฅูู ุฃููุง ูู ููุญุต ุงูุญุฒู ุงููุชุฏุงุฎูุฉ ุญุชู ูุง ูุนูุฏ ุงูููุฏ.  ููููู ุชุนููุฏ ูููุชู ูุฅุฌุฑุงุก ุนูุฏูุฉ ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฐูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (resources.hasMoreElements()) { URL resource = resources.nextElement(); File file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(resource.toURI()); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(File classFile : file.listFiles()){ String fileName = classFile.getName();<span class="hljs-comment"><span class="hljs-comment">//ProductService.class } }</span></span></code> </pre><br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ุงุณู ุงูููู ุจุฏูู ุงูุงูุชุฏุงุฏ.  ูู ุงูููุงุก ูู ุนุงู 2018 ุ ุทูุฑุช Java ุงูููู I / O (NIO 2) ูุณููุงุช ุนุฏูุฏุฉ ุ ูููู ูุง ูุฒุงู ูุชุนุฐุฑ ูุตู ุงูุงูุชุฏุงุฏ ุนู ุงุณู ุงูููู.  ูุง ุจุฏ ูู ูู ุฅูุดุงุก ุฏุฑุงุฌุชู ุงูุฎุงุตุฉ ุ ูุฃู  ูุฑุฑูุง ุนุฏู ุงุณุชุฎุฏุงู ููุชุจุงุช ุฎุงุฑุฌูุฉ ูุซู Apache Commons.  ุฏุนููุง ูุณุชุฎุฏู ุทุฑููุฉ ุงูุฌุฏ ุงููุฏููุฉ <code>lastIndexOf(".")</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(fileName.endsWith(<span class="hljs-string"><span class="hljs-string">".class"</span></span>)){ String className = fileName.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, fileName.lastIndexOf(<span class="hljs-string"><span class="hljs-string">"."</span></span>)); }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูููููุง ุงูุญุตูู ุนูู ูุงุฆู ุงููุฆุฉ ุจุงุณุชุฎุฏุงู ุงูุงุณู ุงููุงูู ูููุฆุฉ (ููุฐุง ูุณูู ูุฆุฉ ูุฆุฉ <code>Class</code> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Class classObject = Class.forName(basePackage + <span class="hljs-string"><span class="hljs-string">"."</span></span> + className);</code> </pre> <br>  ุญุณูุง ุ ุงูุขู ูุตูููุง ูู ุฃูุฏููุง.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุจูู ููุท ุฃู ูุจุฑุฒ ูู ุจูููุง ุชูู ุงูุชู ุชุญุชูู ุนูู ุชุนููู ุชูุถูุญู <code>@Component</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(classObject.isAnnotationPresent(Component.class)){ System.out.println(<span class="hljs-string"><span class="hljs-string">"Component: "</span></span> + classObject); }</code> </pre> <br>  ุงุฑูุถ ูุงูุญุต.  ูุฌุจ ุฃู ุชููู ูุญุฏุฉ ุงูุชุญูู ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Component: class com.kciray.ProductService Component: class com.kciray.PromotionsService</code> </pre> <br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ุงูููู ูุฏููุง.  ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจุดูุก ูุซู <code>new ProductService()</code> ุ ูููู ููู ุญุจุฉ ูุฏููุง ูุฆุฉ ุฎุงุตุฉ ุจูุง.  ูุฒูุฏูุง ุงูุชุฃูู ูู Java ุจุญู ุนุงููู (ูุณูู ุงููููุดุฆ ุงูุงูุชุฑุงุถู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Object instance = classObject.newInstance();<span class="hljs-comment"><span class="hljs-comment">//=new CustomClass()</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ูุถุน ูุฐู ุงูุญุจุฉ ูู <code>Map&lt;String, Object&gt; singletons</code> .  ููููุงู ุจุฐูู ุ ุญุฏุฏ ุงุณู ุงูููู (ูุนุฑูู).  ูู Java ุ ูุณูู ูุชุบูุฑุงุช ูุซู ุงููุฆุงุช (ุงูุญุฑู ุงูุฃูู ููุท ูู ุฃุญุฑู ุตุบูุฑุฉ).  ูููู ุชุทุจูู ูุฐุง ุงูููุฌ ุนูู ุงููุงุตูููุง ุฃูุถูุง ุ ูุฃู Spring ุฅุทุงุฑ Java!  ูู ุจุชุญููู ุงุณู ุงูุญุงููุฉ ุจุญูุซ ูููู ุงูุญุฑู ุงูุฃูู ุตุบูุฑูุง ุ ูุฃุถูู ุฅูู ุงูุฎุฑูุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">String beanName = className.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).toLowerCase() + className.substring(<span class="hljs-number"><span class="hljs-number">1</span></span>); singletons.put(beanName, instance);</code> </pre> <br>  ุงูุขู ุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู.  ูุฌุจ ุฃู ุชุฎูู ุงูุญุงููุฉ ุงููุงุตูููุง ุ ููุฌุจ ุงุณุชุฑุฌุงุนูุง ุจุงูุงุณู.  ูุฑุฌู ููุงุญุธุฉ ุฃู ุงุณู ุทุฑููุฉ <code>classObject.newInstance();</code> ุงูุฎุงุตุฉ ุจู ูุงุณู ุฃุณููุจ <code>classObject.newInstance();</code>  ููุง ุฌุฐุฑ ูุดุชุฑู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู <code>instantiate()</code> ูู ุฌุฒุก ูู ุฏูุฑุฉ ุญูุงุฉ ุงูููู.  ูู ุฌุงูุง ุ ูู ุดูุก ูุชุฑุงุจุท! <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.instantiate("com.kciray"); ProductService productService = (ProductService) beanFactory.getBean("productService"); System.out.println(productService);//ProductService@612</span></span></code> </pre> <br><br>  ุฌุฑุจ ุฃูุถูุง ุชูููุฐ <code>org.springframework.beans.factory.stereotype.Service</code> ุดุฑุญ ุงูุฎุฏูุฉ.  ุฅูู ูุคุฏู ููุณ ุงููุธููุฉ ุงูุชู <code>@Component</code> ุ ูููู ูุทูู ุนููู ุจุดูู ูุฎุชูู.  ุงูููุทุฉ ูููุง ูู ุงูุงุณู - ุฃูุช ุชุซุจุช ุฃู ุงูุตู ุฎุฏูุฉ ูููุณ ูุฌุฑุฏ ูููู.  ูุฐุง ุดูุก ูุซู ุงููุชุงุจุฉ ุงูููุงููููุฉ.  ูู ุดูุงุฏุฉ ุงูุฑุจูุน ูุงู ููุงู ุณุคุงู "ูุง ูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงูููุทูุฉุ"  (ูู ุชูู ุงููุฐููุฑุฉ). "  ูุฐุง ุ ูุฅู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงูููุทูุฉ ูู ุชูู ุงูููุฌูุฏุฉ ูู ุญุฒูุฉ <code>stereotype</code> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุฃ ุงูุฎุตุงุฆุต </h2><br>  ุงูุธุฑ ุฅูู ุงูุฑุณู ุงูุจูุงูู ุฃุฏูุงู ุ ููู ููุถุญ ุจุฏุงูุฉ ุฏูุฑุฉ ุญูุงุฉ ุงูููู.  ูุง ูุนููุงู ูุจู ุฐูู ูู Instantiate (ุฅูุดุงุก ุงููุงุตูููุง ูู ุฎูุงู <code>newInstance()</code> ).  ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุงูุญูู ุงููุชูุงุทุน ูููุงุตูููุง (ุญูู ุงูุชุจุนูุฉ ุ ููู ุฃูุถูุง ุงูุนูุงุณ ุงูุชุญูู (IoC)).  ุชุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุฎุตุงุฆุต ุงููุงุตูููุง ูููู ุงูุฎุตุงุฆุต ุงูุชู ุชุญุชุงุฌ ุฅูู ุญูููุง.  ุฅุฐุง ุงุชุตูุช ุจู <code>productService.getPromotionsService()</code> ุ ุณุชุญุตู ุนูู ูููุฉ <code>null</code> ุ ูุฃู  ุงูุชุจุนูุฉ ูู ุชุถุงู ุจุนุฏ. <br><br><img src="https://habrastorage.org/webt/2i/4v/4c/2i4v4cbsb-bdpdrgb0grh_swclu.png"><br><br>  ุฃููุงู ุ ุฃูุดุฆ ุญุฒูุฉ <code>org.springframework.beans.factory.annotation</code> ูุฃุถู ุงูุชุนููู ุงูุชูุถูุญู <code>@Autowired</code> .  ูุงูููุฑุฉ ูู ูุถุน ุนูุงูุฉ ุนูู ุงูุญููู ุงูุชุงุจุนุฉ ูุน ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Autowired { }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูู ุจุฅุถุงูุชู ุฅูู ุงูุนูุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> PromotionsService promotionsService; <span class="hljs-comment"><span class="hljs-comment">//... }</span></span></code> </pre> <br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุนููู <code>BeanFactory</code> ูุฏููุง ููุนุซูุฑ ุนูู ูุฐู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูุญูู ุงูุชุจุนูุงุช ุนูููุง.  ุฃุถู ุทุฑููุฉ ูููุตูุฉ ููุฐุง ุ ูุงุณูููุง ูู <code>Main</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... public void populateProperties(){ System.out.println("==populateProperties=="); } }</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ููุท ุฅูู <code>object.getClass().getDeclaredFields()</code> ุฌููุน <code>object.getClass().getDeclaredFields()</code> ุ ูููู ุตูุฏูู ููุฑ ุนุจุฑ ุฌููุน ุญูููู ( <code>object.getClass().getDeclaredFields()</code> ุฌููุน ุงูุญููู ุ ุจูุง ูู ุฐูู ุงูุญููู ุงูุฎุงุตุฉ).  ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุญูู ูุญุชูู ุนูู ุชุนููู ุชูุถูุญู <code>@Autowired</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object object : singletons.values()) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Field field : object.getClass().getDeclaredFields()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (field.isAnnotationPresent(Autowired.class)) { } } }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุฌููุน ุงูุตูุงุฏูู ูุฑุฉ ุฃุฎุฑู ููุนุฑูุฉ ููุนูุง - ููุฌุฃุฉ ูุฐุง ูู ุงูููุน ุงูุฐู ูุฑูุฏ ุตูุฏูููุง ุฃุฎุฐู ูููุณู.  ูุนู ุ ูุฏููุง ุฏูุฑุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ! <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object dependency : singletons.values()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dependency.getClass().equals(field.getType())) { } }</code> </pre> <br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุนูุฏูุง ูุฌุฏูุง ุงูุฅุฏูุงู ุ ูุญุชุงุฌ ุฅูู ุญููู.  ุฃูู ุดูุก ูุฏ ุชููุฑ ููู ูู ูุชุงุจุฉ ุญูู ุฎุฏูุฉ <code>promotionsService</code> ุจุงุณุชุฎุฏุงู ุงูุชูููุฑ ุงููุจุงุดุฑ.  ููู ุงูุฑุจูุน ูุง ูุนูู ุจูุฐู ุงูุทุฑููุฉ.  ุจุนุฏ ูู ุดูุก ุ ุฅุฐุง ูุงู ุงูุญูู ูุญุชูู ุนูู ููุนุฏููู <code>private</code> ุ ูุณูุถุทุฑ ุฃููุงู ุฅูู ุชุนูููู ุนูู ุฃูู ุนุงู ุ ุซู ูุชุงุจุฉ ูููุชูุง ุ ุซู ุชุนูููู ุนูู <code>private</code> ูุฑุฉ ุฃุฎุฑู (ููุญูุงุธ ุนูู ุงูุชูุงูู).  ูุจุฏู ูุซู ุนูุงุฒ ูุจูุฑ.  ุจุฏูุงู ูู ุนูุงุฒ ูุจูุฑ ุ ุฏุนูุง ูุตูุน ุนูุงุฒูุง ุตุบูุฑูุง (ุณูููู ุจุชุดููู ุงุณู ุงูุนุฏุงุฏ ููุทูู ุนููู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">String setterName = <span class="hljs-string"><span class="hljs-string">"set"</span></span> + field.getName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).toUpperCase() + field.getName().substring(<span class="hljs-number"><span class="hljs-number">1</span></span>);<span class="hljs-comment"><span class="hljs-comment">//setPromotionsService System.out.println("Setter name = " + setterName); Method setter = object.getClass().getMethod(setterName, dependency.getClass()); setter.invoke(object, dependency);</span></span></code> </pre> <br>  ุงูุขู ูู ุจุชุดุบูู ูุดุฑูุนู ูุชุฃูุฏ ูู ุฃูู ุนูุฏ ุงุณุชุฏุนุงุก <code>productService.getPromotionsService()</code> ุจุฏูุงู ูู <code>null</code> ุ ูุชู ุฅุฑุฌุงุน ุงูููู ูุฏููุง. <br><br>  ูุง ูููุง ุจุชุทุจููู ูู ุงูุญูู ุญุณุจ ุงูููุน.  ููุงู ุฃูุถูุง ุญููุฉ ุจุงูุงุณู ( <code>javax.annotation.Resource</code> ุดุฑุญ).  ูุฎุชูู ูู ุฃูู ุจุฏูุงู ูู ููุน ุงูุญูู ุ ุณูุชู ุงุณุชุฎุฑุงุฌ ุงุณูู ุ ูููููุง ูู - ุงูุงุนุชูุงุฏ ูู ุงูุฎุฑูุทุฉ.  ูู ุดูุก ูุดุงุจู ููุง ุ ุญุชู ูู ุดูุก ุฃุจุณุท.  ุฃูุตู ุจุชุฌุฑุจุฉ ูุฅูุดุงุก ุงูููู ุงูุฎุงุต ุจู ุ ุซู ุญููู ุจุงุณุชุฎุฏุงู <code>@Resource</code> ูุชูุณูุน ุทุฑููุฉ <code>populateProperties()</code> . <br><br><h2 style=";text-align:right;direction:rtl">  ูุญู ูุฏุนู ุงููุงุตูููุง ุงูุชู ุชุนุฑู ุจุงุณููุง </h2><br><img src="https://habrastorage.org/webt/ds/ge/nn/dsgennl2rvz-spa6h51l_yox81o.png"><br><br>  ููุงู ุฃููุงุช ุชุญุชุงุฌ ูููุง ุฅูู ุฅุฏุฎุงู ุงุณูู ุฏุงุฎู ุงูุญุงููุฉ.  ูุซู ูุฐู ุงูุญุงุฌุฉ ูุง ุชูุดุฃ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุฃูู  ุตูุงุฏูู ุ ูู ุฌููุฑูุง ุ ูุง ููุจุบู ุฃู ุชุนุฑู ุนู ุจุนุถูุง ุงูุจุนุถ ูุฃููู ุตูุงุฏูู.  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃููู ูู ุงูุฑุจูุน ุ ูุงู ูู ุงูููุชุฑุถ ุฃู ุงูููู ูู POJO (ูุงุฆู ุฌุงูุง ูุฏูู ุนุงุฏู ุ ูุงุฆู ุฌุงูุง ุงููุฏูู ุงูุฌูุฏ) ุ ููุชู ุชูุฏูู ุงูุชูููู ุจุงููุงูู ูู ูููุงุช XML ููุชู ูุตูู ุนู ุงูุชูููุฐ.  ููููุง ูุทุจู ูุฐู ุงููุธููุฉ ุ ูุฃู ุญูู ุงูุงุณู ุฌุฒุก ูู ุฏูุฑุฉ ุญูุงุฉ ุณูุฉ ุงูููููุงุช. <br><br>  ููู ูุนุฑู ุงูููู ุงูุฐู ูุฑูุฏ ุฃู ูุนุฑู ูุง ูู ุงุณูู ููุง ูุง ูุฑูุฏูุ  ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุนูู ุชุนููู ุชูุถูุญู ุฌุฏูุฏ ูู ุงูููุน <code>@InjectName</code> ูู ุญููู ูู ุงูููุน String.  ููู ูุฐุง ุงูุญู ุณูููู ุนุงููุง ุฌุฏูุง ููุณูุญ ูู ุจุชุตููุฑ ููุณู ูู ุงููุฏู ุนุฏุฉ ูุฑุงุช (ุถุน ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู ุนูู ุญููู ุงูุฃููุงุน ุบูุฑ ุงูููุงุณุจุฉ (ูููุณ ุณูุณูุฉ) ุ ุฃู ุญุงูู ุฅุฏุฎุงู ุงุณู ูู ุนุฏุฉ ุญููู ูู ููุณ ุงููุตู).  ููุงู ุญู ุขุฎุฑ ุ ุฃูุซุฑ ุฏูุฉ - ูุฅูุดุงุก ูุงุฌูุฉ ุฎุงุตุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุถุจุท ูุงุญุฏุฉ.  ุฌููุน ุงูุตูุงุฏูู ุงูุชู ุชููุฐูุง ููุง ุงุณููุง.  ุฃูุดุฆ ูุฆุฉ <code>BeanNameAware</code> ูู ุญุฒูุฉ <code>org.springframework.beans.factory</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ุฏุน ุฎุฏูุฉ <code>PromotionsService</code> ุชููุฐูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String beanName; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ beanName = name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> beanName; } }</code> </pre> <br>  ูุฃุฎูุฑูุง ุ ุฃุถู ุทุฑููุฉ ุฌุฏูุฏุฉ ุฅูู ูุตูุน ุงููุงุตูููุง.  ูู ุดูุก ุจุณูุท ููุง - ููุชูู ุฅูู bin-singleton ุ ููุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุญุงููุฉ ุชููุฐ ูุงุฌูุชูุง ุ ูุงุณุชุฏุนู ุฃุฏุงุฉ ุงูุฅุนุฏุงุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">injectBeanNames</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String name : singletons.keySet()) { Object bean = singletons.get(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BeanNameAware){ ((BeanNameAware) bean).setBeanName(name); } } }</code> </pre> <br>  ุงุฑูุถ ูุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">BeanFactory beanFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BeanFactory(); beanFactory.instantiate(<span class="hljs-string"><span class="hljs-string">"com.kciray"</span></span>); beanFactory.populateProperties(); beanFactory.injectBeanNames(); <span class="hljs-comment"><span class="hljs-comment">//... System.out.println("Bean name = " + promotionsService.getBeanName());</span></span></code> </pre><br>  ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ุงูุฑุจูุน ููุงู ูุงุฌูุงุช ุฃุฎุฑู ููุงุซูุฉ.  ุฃูุตู ุจุฃู ุชููู ุจุชุทุจูู ูุงุฌูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BeanFactoryAware ุจููุณู</a> ุ ููุง ูุณูุญ ูููุงุตูููุง ุจุชููู ุฑุงุจุท ุฅูู ูุตูุน ุงูููู.  ูุชู ุชูููุฐู ุจุทุฑููุฉ ููุงุซูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชููุฆุฉ ุงููุงุตูููุง </h2><br><img src="https://habrastorage.org/webt/yq/0w/5t/yq0w5t8x0kqrgqwllfuxsi77xug.png"><br><br>  ุชุฎูู ุฃู ูุฏูู ุญุงูุฉ ุชุญุชุงุฌ ูููุง ุฅูู ุชูููุฐ ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุนุฏ ุญูู ุงูุชุจุนูุงุช (ูุชู ุชุนููู ุฎุตุงุฆุต ุงูุญุงููุฉ).  ุจุนุจุงุฑุงุช ุจุณูุทุฉ ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุนุทุงุก ุงูุญุงููุฉ ุงููุฏุฑุฉ ุนูู ุชููุฆุฉ ููุณูุง.  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุฅูุดุงุก ูุงุฌูุฉ <code>InitializingBean</code> ุ ููุถุน ุชูููุน ุทุฑููุฉ <code>void afterPropertiesSet()</code> ููู.  ุฅู ุชูููุฐ ูุฐู ุงูุขููุฉ ูู ููุณู ุชูุงููุง ูุซู ุฐูู ุงูุฐู ุชู ุชูุฏููู ููุงุฌูุฉ <code>BeanNameAware</code> ุ ูุฐุง ูุฅู ุงูุญู ููุฌูุฏ ุชุญุช ุงูููุณุฏ.  ุชุฏุฑุจ ูุงูุนู ุฐูู ุจููุณู ูู ุฏูููุฉ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุญู ุชููุฆุฉ ุงููุงุตูููุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//InitializingBean.java package org.springframework.beans.factory; public interface InitializingBean { void afterPropertiesSet(); } //BeanFactory.java public void initializeBeans(){ for (Object bean : singletons.values()) { if(bean instanceof InitializingBean){ ((InitializingBean) bean).afterPropertiesSet(); } } } //Main.java beanFactory.initializeBeans();</span></span></code> </pre> <br></div></div><br><br><h2 style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ูุนุงูุฌุงุช ูุง ุจุนุฏ </h2><br>  ุชุฎูู ููุณู ูู ููุงู ุฃูู ูุทูุฑู ุงูุฑุจูุน.  ุฅู ุฅุทุงุฑ ุงูุนูู ุงูุฎุงุต ุจู ูููู ููุญุธู ุจุดุนุจูุฉ ูุจูุฑุฉ ุจูู ุงููุทูุฑูู ุ ููุชู ุฅุฑุณุงู ุงูุฑุณุงุฆู ุฅูู ุงูุจุฑูุฏ ูู ููู ูุน ุทูุจุงุช ุฅุถุงูุฉ ููุฒุฉ ูููุฏุฉ ุฃู ุฃุฎุฑู.  ุฅุฐุง ููุช ุจุฅุถุงูุฉ ูู ูุงุฌูุฉ ูู ูุฐู ุงูููุฒุงุช ูุงูุชุญูู ูููุง ูู ุฏูุฑุฉ ุญูุงุฉ ุงูููู ุ ูุณุชุตุจุญ (ุฏูุฑุฉ ุงูุญูุงุฉ) ูุณุฏูุฏุฉ ุจุงููุนูููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุฅูุดุงุก ูุงุฌูุฉ ุนุงูููุฉ ูุงุญุฏุฉ ุชุณูุญ ูู ุจุฅุถุงูุฉ ุจุนุถ ุงูููุทู (ุนูู ุงูุฅุทูุงู ุ ุณูุงุก ูุงู ุฐูู ููุชุญูู ูู ูุฌูุฏ ุชุนููู ุชูุถูุญู ุ ูุงุณุชุจุฏุงู ุงูุตูุฏูู ุจุนูุจุฉ ุฃุฎุฑู ุ ูุชุนููู ุจุนุถ ุงูุฎุตุงุฆุต ุงูุฎุงุตุฉ ุ ููุง ุฅูู ุฐูู). <br><br>  ุฏุนููุง ูููุฑ ูู ุงูุบุฑุถ ูู ูุฐู ุงููุงุฌูุฉ.  ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุจุนุถ ูุนุงูุฌุฉ ูุง ุจุนุฏ ุงููุงุตูููุง ุ ูุจุงูุชุงูู ูููู ุฃู ูุทูู ุนููู BeanPostProcessor.  ููููุง ููุงุฌู ุณุคุงููุง ุตุนุจูุง - ูุชู ูุฌุจ ุงุชุจุงุน ุงูููุทูุ  ุจุนุฏ ูู ุดูุก ุ ูููููุง ุชูููุฐู ูุจู ุงูุชููุฆุฉ ุ ูููู ูููููุง ุชูููุฐู ุจุนุฏ ุฐูู.  ุจุงููุณุจุฉ ูุจุนุถ ุงูููุงู ุ ุงูุฎูุงุฑ ุงูุฃูู ูู ุงูุฃูุถู ุ ุจุงููุณุจุฉ ููุจุนุถ ุงูุขุฎุฑ - ุงูุซุงูู ... ููู ุชูููุ <br><br>  ูููููุง ุชูููู ููุง ุงูุฎูุงุฑูู ุฏูุนุฉ ูุงุญุฏุฉ.  ุฏุน ูุนุงูุฌ ูุง ุจุนุฏ ูุงุญุฏ ูุญูู ููุทููู ูุทุฑููุชูู.  ูุชู ุชูููุฐ ุฃุญุฏููุง ูุจู ุงูุชููุฆุฉ (ูุจู ุงูุทุฑููุฉ <code>afterPropertiesSet()</code> ) ุ ูุงูุขุฎุฑ ุจุนุฏ.  ุงูุขู ุฏุนููุง ูููุฑ ูู ุงูุฃุณุงููุจ ููุณูุง - ูุง ูู ุงููุนููุงุช ุงูุชู ูุฌุจ ุฃู ุชููู ูุฏูููุ  ูู ุงููุงุถุญ ุฃู <code>Object bean</code> ููุณู ูุฌุจ ุฃู ูููู ููุงู.  ููุฑุงุญุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงููุงุตูููุง ุ ููููู ุชูุฑูุฑ ุงุณู ูุฐู ุงูุญุจุฉ.  ุชุชุฐูุฑ ุฃู ุงูุณูุฉ ููุณูุง ูุง ุชุนุฑู ุงุณููุง.  ููุง ูุฑูุฏ ุฅุฌุจุงุฑ ุฌููุน ุงููุงุตูููุง ุนูู ุชูููุฐ ูุงุฌูุฉ BeanNameAware.  ูููู ุ ุนูู ูุณุชูู ูุง ุจุนุฏ ุงููุนุงูุฌ ุ ูููู ุฃู ูููู ุงุณู ุงูููู ูููุฏูุง ุฌุฏูุง.  ูุฐูู ุ ูุถููู ููุนููุฉ ุซุงููุฉ. <br><br>  ููุงุฐุง ูุฌุจ ุฃู ุชุนูุฏ ุงูุทุฑููุฉ ุนูุฏ ูุนุงูุฌุฉ ุงูููู ุจุนุฏ ุฐููุ  ุฏุนููุง ูุฌุนููุง ุชุนูุฏ ุงูุญุงููุฉ ููุณูุง.  ูููุญูุง ูุฐุง ูุฑููุฉ ูุงุฆูุฉ ุ ูุฃูู ุจุฏูุงู ูู ุงูุญุงููุฉ ุ ููููู ุชูุฑูุฑ ูุงุฆู ูููู ููุชู ููุงููุงุชู (ููุถูู ุฃูุงููุง).  ุฃู ููููู ุฅุฑุฌุงุน ูุงุฆู ุขุฎุฑ ุจุงููุงูู ุนู ุทุฑูู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.  ูุชูุชุน ุงููุทูุฑูู ุจุญุฑูุฉ ูุจูุฑุฉ ูู ุงูุนูู.  ูููุง ููู ุงูุฅุตุฏุงุฑ ุงูููุงุฆู ูููุงุฌูุฉ ุงููุตููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.beans.factory.config; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanPostProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessBeforeInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessAfterInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span></span>; }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุงุฆูุฉ ุจุงููุนุงูุฌุงุช ุงูุจุณูุทุฉ ุฅูู ูุตูุน ุงููุงุตูููุง ูุงููุฏุฑุฉ ุนูู ุฅุถุงูุฉ ูุนุงูุฌุงุช ุฌุฏูุฏุฉ.  ูุนู ุ ูุฐู ูุงุฆูุฉ ArrayList ุนุงุฏูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//BeanFactory.java private List&lt;BeanPostProcessor&gt; postProcessors = new ArrayList&lt;&gt;(); public void addPostProcessor(BeanPostProcessor postProcessor){ postProcessors.add(postProcessor); }</span></span></code> </pre> <br>  ุงูุขู ูู ุจุชุบููุฑ ุทุฑููุฉ <code>initializeBeans</code> ุจุญูุซ ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงููุนุงูุฌุงุช ุงููุงุญูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initializeBeans</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String name : singletons.keySet()) { Object bean = singletons.get(name); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (BeanPostProcessor postProcessor : postProcessors) { postProcessor.postProcessBeforeInitialization(bean, name); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> InitializingBean) { ((InitializingBean) bean).afterPropertiesSet(); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (BeanPostProcessor postProcessor : postProcessors) { postProcessor.postProcessAfterInitialization(bean, name); } } }</code> </pre> <br>  ูููู ุจุฅูุดุงุก ูุนุงูุฌ ุจุฑูุฏ ุตุบูุฑ ูุชุชุจุน ุจุจุณุงุทุฉ ุงูููุงููุงุช ุฅูู ูุญุฏุฉ ุงูุชุญูู ููุถูููุง ุฅูู ูุตูุน ุงูููู ูุฏููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomPostProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanPostProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessBeforeInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"---CustomPostProcessor Before "</span></span> + beanName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bean; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessAfterInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"---CustomPostProcessor After "</span></span> + beanName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bean; } }</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.addPostProcessor(new CustomPostProcessor());</span></span></code> </pre> <br><br>  ุงุฑูุถ ุงูุขู ูุชุฃูุฏ ูู ุนูู ูู ุดูุก.  ููููุฉ ุชุฏุฑูุจ ุ ูู ุจุฅูุดุงุก ูุนุงูุฌ ุจุฑูุฏ ูููุฑ ุงูุชุนููู ุงูุชูุถูุญู <code>@PostConstruct (javax.annotation.PostConstruct)</code> .  ูููุฑ ุทุฑููุฉ ุจุฏููุฉ ููุชููุฆุฉ (ูุชุฌุฐุฑุฉ ูู Java ุ ูููุณ ูู ุงูุฑุจูุน).  ุฌููุฑูุง ูู ุฃูู ุชุถุน ุงูุชุนููู ุงูุชูุถูุญู ุนูู ุจุนุถ ุงูุทุฑู ุ ูุณุชุณูู ูุฐู ุงูุทุฑููุฉ ูุจู ุงูุชููุฆุฉ ุงูููุงุณูุฉ ุงูุฑุจูุนูุฉ (InitializingBean). <br><br>  ุชุฃูุฏ ูู ุฅูุดุงุก ุฌููุน ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ูุงูุญุฒู (ุญุชู javax.annotation) ูุฏูููุง ุ ูุง ุชูู ุจุฑุจุท ุงูุชุจุนูุงุช!  ูุฐุง ุณูุณุงุนุฏู ุนูู ุฑุคูุฉ ุงููุฑู ุจูู ููุจ ุงูุฑุจูุน ูุงูุชุฏุงุฏุงุชู (ุฏุนู javax) ุ ูุชุฐูุฑู.       . <br><br>     ,      <code>@PostConstruct</code>    ,  - CommonAnnotationBeanPostProcessor.    ,   . <br><br>  ,      <code>void close()</code>   <code>BeanFactory</code>     .  โ  <code>@PreDestroy (javax.annotation.PreDestroy)</code> ,   ,       .  โ  <code>org.springframework.beans.factory.DisposableBean</code> ,    <code>void destroy()</code> .  ,   ,       ( , ). <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">@PreDestroy + DisposableBean</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//DisposableBean.java package org.springframework.beans.factory; public interface DisposableBean { void destroy(); } //PreDestroy.java package javax.annotation; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; @Retention(RetentionPolicy.RUNTIME) public @interface PreDestroy { } //DisposableBean.java public void close() { for (Object bean : singletons.values()) { for (Method method : bean.getClass().getMethods()) { if (method.isAnnotationPresent(PreDestroy.class)) { try { method.invoke(bean); } catch (IllegalAccessException e) { e.printStackTrace(); } catch (InvocationTargetException e) { e.printStackTrace(); } } } if (bean instanceof DisposableBean) { ((DisposableBean) bean).destroy(); } } }</span></span></code> </pre> <br></div></div><br><br><h2 style=";text-align:right;direction:rtl">     </h2><img src="https://habrastorage.org/webt/ns/uh/lk/nsuhlk9ko9d9gxtzmcytopfruim.png"><br>        ,    .  ,       . <br><br><h2 style=";text-align:right;direction:rtl">    </h2><br>      ,    ,       .     -.       ,  โ   ,   <code>BeanFactory</code> . ,    (DI),      .     โ       . <br><br>        ,        . <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl">    .   <code>org.springframework.context</code> ,   <code>ApplicationContext</code>  .        <code>BeanFactory</code> .      ,      <code>close()</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationContext</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BeanFactory beanFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BeanFactory(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationContext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String basePackage)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ReflectiveOperationException</span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"******Context is under construction******"</span></span>); beanFactory.instantiate(basePackage); beanFactory.populateProperties(); beanFactory.injectBeanNames(); beanFactory.initializeBeans(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ beanFactory.close(); } }</code> </pre> <br><br>     <code>Main</code> ,   ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">ApplicationContext applicationContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApplicationContext(<span class="hljs-string"><span class="hljs-string">"com.kciray"</span></span>); applicationContext.close();</code> </pre> <br>   ,   .       <code>close()</code> ,     ยซ ยป     - .   ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.context.event; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextClosedEvent</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>      <code>ApplicationListener</code> ,      .        ,          ( <code>ApplicationListener&lt;E&gt;</code> ). ,    Java-,         . ,      ,    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.context; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationListener</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt;</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApplicationEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E event)</span></span></span></span>; }</code> </pre> <br>     <code>ApplicationContext</code> .     <code>close()</code>     ,  ,      .    <code>ApplicationListener&lt;ContextClosedEvent&gt;</code> ,     <code>onApplicationEvent(ContextClosedEvent)</code> .    ,   ? <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ beanFactory.close(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Object bean : beanFactory.getSingletons().values()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ApplicationListener) { } } }</code> </pre> <br>  .   .       <code>bean instanceof ApplicationListener&lt;ContextClosedEvent&gt;</code> .      Java.      <i>  (type erasure)</i> ,    &lt;T&gt;   &lt;Object&gt;.   ,   ?    ,    <code>ApplicationListener&lt;ContextClosedEvent&gt;</code> ,     ? <br><br>   ,       ,       .  ,      ,    ,     ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Type type: bean.getClass().getGenericInterfaces()){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(type <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ParameterizedType){ ParameterizedType parameterizedType = (ParameterizedType) type; } }</code> </pre> <br> ,       ,  ,   โ   .   ,         : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Type firstParameter = parameterizedType.getActualTypeArguments()[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(firstParameter.equals(ContextClosedEvent.class)){ Method method = bean.getClass().getMethod(<span class="hljs-string"><span class="hljs-string">"onApplicationEvent"</span></span>, ContextClosedEvent.class); method.invoke(bean, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContextClosedEvent()); }</code> </pre> <br>        ApplicationListener: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationListener</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextClosedEvent</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... @Override public void onApplicationEvent(ContextClosedEvent event) { System.out.println("&gt;&gt; ContextClosed EVENT"); } }</span></span></code> </pre> <br> ,     Main  ,    ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java void testContext() throws ReflectiveOperationException{ ApplicationContext applicationContext = new ApplicationContext("com.kciray"); applicationContext.close(); }</span></span></code> </pre> <br></div></div><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>       Baeldung  ,   ,          .     ,   .      30,   .   ,       Spring Core,    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Core Spring 5.0 Certification Study Guide</a> .  ,               Java-. <br><br><h2 style=";text-align:right;direction:rtl"> Update 10/05/2018 </h2><br>       ยซ  ,   ยป.     ,      . ,  -     ,         -.      ,             . <br><br>  : <br> Spring Container โ [ ] <br> Spring AOP โ [ ] <br> Spring Web โ [ ] <br> Spring Cloud โ [ ] </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar419679/">https://habr.com/ru/post/ar419679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar419669/index.html">ุนุดุฑุฉ ุฃูุถู ูุฃุฑุฉ ุฃูุนุงุจ ูุฃู ูุญูุธุฉ</a></li>
<li><a href="../ar419671/index.html">ุงููููุฏ ุงูุชู ูุฌุจ ุงูุชูุงููุง ุฃู ููู ูููุง ุจุชุณุฑูุน ุงูุงุฎุชุจุงุฑุงุช ุงููุธูููุฉ ุซูุงุซ ูุฑุงุช</a></li>
<li><a href="../ar419673/index.html">ุงูููู ุงููุจูุฑ 6. ุฏููุงููุงุช ููู ูุชูุฏุฏ ูุชุฌุงูุณ ุ ุงูุฌุฒุก 2</a></li>
<li><a href="../ar419675/index.html">ุงุณุชุนุฑุงุถ ุชุฃุฌูุฑ ุงูุฏุฑุงุฌุงุช ุงูุจุฎุงุฑูุฉ ุงูููุฑุจุงุฆูุฉ ูู ุงูุฏูููุฉ ูู ููุณูู ุ ุตูู 2018</a></li>
<li><a href="../ar419677/index.html">ููููุฉ ุงูุชุนุฑู ุนูู ุญุฑูุฉ ูุฑูุฑ HTTPS ูุฌูุงุฒ iOS</a></li>
<li><a href="../ar419683/index.html">ูุงุฐุง ุชุนูู ุงูููุงููุณ ูููุฑู ุงูุฑุดููุฉุ</a></li>
<li><a href="../ar419685/index.html">ุฃูู ููุงูู ุงูุจูุงูุงุช ุงูุชู ูุฌุจ ุฃู ุชุนุฑููุง ุนู ููุงุจูุชู ุงูุจุฑูุฌูุฉ</a></li>
<li><a href="../ar419687/index.html">ููุญุฉ ุงูููุงุชูุญ ุงูุณุฑูุฉ ุงููุณุชูู 3 ุฃู ููููุฉ ุทุจุงุนุฉ ุดุฑุทุฉ ุทูููุฉ</a></li>
<li><a href="../ar419689/index.html">I. ุงูุชุนุทูู. II. ADHD ุฃู ูุนุชูู ูุณููุ</a></li>
<li><a href="../ar419693/index.html">Mikrotik: ุฅุนุงุฏุฉ ุชุนููู ููุณุฎ ุงุญุชูุงุทูุฉ ู DualBoot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>