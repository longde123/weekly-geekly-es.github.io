<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯХ╡я╕П ЁЯС╢ЁЯП╛ ЁЯТ╡ Celesta 7.x: ORM, рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдФрд░ рдкрд░реАрдХреНрд╖рдг "рдПрдХ рдкреИрдХреЗрдЬ рдореЗрдВ" ЁЯеД ЁЯТЫ ЁЯзСЁЯП╛тАНЁЯдЭтАНЁЯзСЁЯП╛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╢рд╛рдпрдж рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЦреБрд▓реЗ рд╕реНрд░реЛрдд Celesta рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдЬрд╛рдирддреЗ рд╣реИрдВред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВ, рдЕрдм рд╣рдо рдЖрдкрдХреЛ рд╕рдм рдХреБрдЫ рдмрддрд╛рдПрдВрдЧреЗред рдПрдХ рдФрд░ рд╕рд╛рд▓ рдмреАрдд рдЧрдпрд╛, рд╕рдВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Celesta 7.x: ORM, рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдФрд░ рдкрд░реАрдХреНрд╖рдг "рдПрдХ рдкреИрдХреЗрдЬ рдореЗрдВ"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455746/"><p>  рд╢рд╛рдпрдж рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЦреБрд▓реЗ рд╕реНрд░реЛрдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Celesta</a> рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдЬрд╛рдирддреЗ рд╣реИрдВред  рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВ, рдЕрдм рд╣рдо рдЖрдкрдХреЛ рд╕рдм рдХреБрдЫ рдмрддрд╛рдПрдВрдЧреЗред  рдПрдХ рдФрд░ рд╕рд╛рд▓ рдмреАрдд рдЧрдпрд╛, рд╕рдВрд╕реНрдХрд░рдг 7.x рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдмрд╣реБрдд рд╕рд╛рд░реА рдЪреАрдЬреЗрдВ рдмрджрд▓ рдЧрдИ рдереАрдВ, рдФрд░ рдпрд╣ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдерд╛, рдФрд░ рд╕рд╛рде рд╣реА рдпрд╣ рдпрд╛рдж рджрд┐рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреНрдпрд╛ рд╣реИред </p><br><div style="text-align:center;"><img width="350" src="https://habrastorage.org/webt/jj/7z/jt/jj7zjthmrh2dhdo4v0ueefqj6uq.png"></div><a name="habracut"></a><br><p> рдпрджрд┐ рдЖрдкрдиреЗ рдЕрднреА рддрдХ Celesta рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╕реБрдирд╛ рд╣реИ, рдФрд░ рдЗрд╕ рд▓реЗрдЦ рдХреЛ рдкрдврд╝рддреЗ рд╕рдордп, рдЖрдк рдпрд╣ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реЗ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдХрд╛рд░реНрдп рд╕рдмрд╕реЗ рдкреНрд░рднрд╛рд╡реА рд╣реИрдВ, рддреЛ рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреБрд░рд╛рдиреЗ рдкреЛрд╕реНрдЯ</a> рдХреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ рдпрд╛ рдЗрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдзреЗ рдШрдВрдЯреЗ рдХреЗ рд╡реАрдбрд┐рдпреЛ</a> (рдкрд╛рдпрдерди рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╢рдмреНрджреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░) рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред  рд▓реЗрдХрд┐рди рдмреЗрд╣рддрд░ рдЕрднреА рднреА, рдЗрд╕ рд▓реЗрдЦ рдХреЛ рдкрд╣рд▓реЗ рдкрдврд╝реЗрдВред  рдореИрдВ рд╕рдВрд╕реНрдХрд░рдг 7 рдореЗрдВ рд╣реБрдП рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реВрдВрдЧрд╛, рдФрд░ рдлрд┐рд░ рдореИрдВ рд╕реНрдкреНрд░рд┐рдВрдЧ рдмреВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬрд╛рд╡рд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯрд╛ рдмреИрдХреЗрдВрдб рд╕реЗрд╡рд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреЗ рдЖрдзреБрдирд┐рдХ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдкреВрд░рд╛ рддрдХрдиреАрдХреА рдЙрджрд╛рд╣рд░рдг рд▓реВрдВрдЧрд╛ред </p><br><h2 id="chto-izmenilos-v-versii-7x">  рд╕рдВрд╕реНрдХрд░рдг 7.x рдореЗрдВ рдХреНрдпрд╛ рдмрджрд▓рд╛рд╡ рдЖрдпрд╛ рд╣реИ? </h2><br><ol><li>  рд╣рдордиреЗ рдЬреЗрдереЙрди рдХреЛ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ред  рдЕрдЧрд░ рдкрд╣рд▓реЗ рд╣рдордиреЗ рд╕реЗрд▓рд╕реНрдЯрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ рдХрд┐ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдкрд╛рдпрдерди рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЕрдм ... рдХреЛрдИ рднреА рдЬрд╛рд╡рд╛ рднрд╛рд╖рд╛ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреА рднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░ рд╕рдХрддреА рд╣реИ: рдЬрд╛рд╡рд╛, рдЧреНрд░реВрд╡реА, рдЖрд░рдпреВрдмреА рдпрд╛ рд╡рд╣реА рдЬрд╛рдЗрдердиред  рдЕрдм Celesta рд╡реНрдпрд╡рд╕рд╛рдп рддрд░реНрдХ рдХреЛрдб рдХреЛ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡реНрдпрд╡рд╕рд╛рдп рддрд░реНрдХ рдХреЛрдб Celesta рдФрд░ рдЙрд╕рдХреЗ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рд╕рдмрд╕реЗ рдЖрдо рдЬрд╛рд╡рд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рдВ, рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ рдкрд┐рдЫрдбрд╝реЗ рд╕рдВрдЧрддрддрд╛ рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд╣ рдХреАрдордд рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рджреЗрдиреЗ рдХреЛ рддреИрдпрд╛рд░ рдереЗред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, Jython рдкрд░ рд╣рдорд╛рд░рд╛ рджрд╛рдВрд╡ рд╣рд╛рд░ рдЧрдпрд╛ред  рдЬрдм рд╣рдордиреЗ рдХреБрдЫ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рдЬрд╛рдЗрдерди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдерд╛, рддреЛ рдпрд╣ рдПрдХ рдЬреАрд╡рдВрдд рдФрд░ рдЖрд╢рд╛рдЬрдирдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдереА, рд▓реЗрдХрд┐рди рд╡рд░реНрд╖реЛрдВ рдореЗрдВ рдЗрд╕рдХрд╛ рд╡рд┐рдХрд╛рд╕ рдзреАрдорд╛ рд╣реЛ рдЧрдпрд╛, рднрд╛рд╖рд╛ рд╡рд┐рдирд┐рд░реНрджреЗрд╢рди рд╕реЗ рдмреИрдХрд▓реЙрдЧ рдЬрдорд╛ рд╣реЛ рдЧрдпрд╛, рдЕрдзрд┐рдХрд╛рдВрд╢ рдкрд╛рдЗрдк рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрдЧрддрддрд╛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реБрдЖред  рдЕрдВрддрд┐рдо рднреВрд╕рд╛ рдирд╡реАрдирддрдо рднрд╛рд╖рд╛ рд░рд┐рд▓реАрдЬ рдореЗрдВ рдирдП рдХреАрдбрд╝реЗ рдереЗ, рдЬреЛ рдЙрддреНрдкрд╛рджрди рднрд╛рд░ рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдЦреБрдж рдХреЛ рдкреНрд░рдХрдЯ рдХрд░рддреЗ рдереЗред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЬрд╛рдЗрдерди рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрди рдирд╣реАрдВ рд╣реИрдВ, рдФрд░ рд╣рдордиреЗ рдЗрд╕рдХреЗ рд╕рд╛рде рднрд╛рдЧреАрджрд╛рд░реА рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред  Celesta рдЕрдм Jython рдкрд░ рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рд╣реИред </li><li>  рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХреНрд▓рд╛рд╕реЗрд╕ рдЕрдм рдЬрд╛рд╡рд╛ рд▓реИрдВрдЧреНрд╡реЗрдЬ (рдФрд░ рдкрд╣рд▓реЗ рдХреА рддрд░рд╣ рдкрд╛рдЗрдерди рдирд╣реАрдВ) рдореЗрдВ рдорд╛рд╡реЗрди рдкреНрд▓рдЧрдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЛрдб-рдЬрдирд░реЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдФрд░ рдЪреВрдБрдХрд┐ рд╣рдо рдбрд╛рдпрдиреЗрдорд┐рдХ рдЯрд╛рдЗрдкрд┐рдВрдЧ рд╕реЗ рд╕реНрдерд┐рд░ рдЯрд╛рдЗрдкрд┐рдВрдЧ рдХреА рдУрд░ рдЪрд▓реЗ рдЧрдП рдереЗ, рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ рдЗрд╕рдореЗрдВ рд░рд┐рдлреИрдХреНрдЯрд░рд┐рдВрдЧ рдХреЗ рдЕрдзрд┐рдХ рдЕрд╡рд╕рд░ рдереЗ рдФрд░ рд╡рд┐рд╖рдпрд╡рд╛рд░ рд╕рд╣реА рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЧрдпрд╛ред </li><li>  JUnit5 рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕рдЯреЗрдВрд╢рди рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛, рдЗрд╕рд▓рд┐рдП JUnit5 рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рддрд░реНрдХ рдХреЗ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛ рдЧрдпрд╛ (рдЬрд┐рд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреА)ред </li><li>  рдПрдХ рдЕрд▓рдЧ рдкрд░рд┐рдпреЛрдЬрдирд╛ рджрд┐рдЦрд╛рдИ рджреА рд╣реИ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдкреНрд░рд┐рдВрдЧ-рдмреВрдЯ-рд╕реНрдЯрд╛рд░реНрдЯрд░-рд╕реЗрд▓реЗрд╕реНрдЯрд╛</a> , рдЬреЛ, рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, рд╕реНрдкреНрд░рд┐рдВрдЧ рдмреВрдЯ рдореЗрдВ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╕реНрдЯрд╛рд░реНрдЯрд░ рд╣реИред  рдЖрд╕рд╛рдиреА рд╕реЗ рдкрд░рд┐рдирд┐рдпреЛрдЬрд┐рдд рд╕реНрдкреНрд░рд┐рдВрдЧ рдмреВрдЯ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдкреИрдХ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдиреЗ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдмрджрд▓рдХрд░ рд╕рд░реНрд╡рд░ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЗ рд▓рд┐рдП рдореБрдЖрд╡рдЬрд╛ рджрд┐рдпрд╛ред </li><li>  рд╣рдордиреЗ рд╡рд┐рдХреА рд╕реЗ рд▓реЗрдХрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрд╕рд┐рд╕реАрдбреЙрдХреНрдЯрд░</a> рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╕рднреА рджрд╕реНрддрд╛рд╡реЗрдЬ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд┐рдП</a> , рдЗрд╕реЗ рдХреЛрдб рдХреЗ рд╕рд╛рде рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдореЗрдВ рд░рдЦрд╛, рдФрд░ рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд░рд┐рд▓реАрдЬ рдХреЗ рд▓рд┐рдП рдЕрдк-рдЯреВ-рдбреЗрдЯ рдкреНрд░рд▓реЗрдЦрди рд╣реИред  рдирд╡реАрдирддрдо рд░рд┐рд▓реАрдЬрд╝ рдХреЗ рд▓рд┐рдП, рдСрдирд▓рд╛рдЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдпрд╣рд╛рдБ рдЙрдкрд▓рдмреНрдз рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://courseorchestra.github.io/celesta/</a> </li><li>  рд╣рдорд╕реЗ рдЕрдХреНрд╕рд░ рдкреВрдЫрд╛ рдЬрд╛рддрд╛ рдерд╛ рдХрд┐ рдХреНрдпрд╛ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╕реЗ рдЕрд▓рдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреАрдбреАрдПрдордПрд▓ рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдЕрдм <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2bass</a> рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдРрд╕рд╛ рдЕрд╡рд╕рд░ рд╣реИред </li></ol><br><h2 id="chto-takoe-selesta-i-chto-ona-umeet">  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреНрдпрд╛ рд╣реИ рдФрд░ рд╡рд╣ рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреА рд╣реИ? </h2><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╣реИ: </p><br><ul><li>  <em>рдбреЗрдЯрд╛рдмреЗрд╕-рдкреНрд░рдердо</em> рдбрд┐рдЬрд╝рд╛рдЗрди рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд░рд┐рд▓реЗрд╢рдирд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдХреЛрдб рдХреЗ рдмреАрдЪ рдПрдХ рдордзреНрдпрд╡рд░реНрддреА рдкрд░рдд, </li><li>  рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдкреНрд░рд╡рд╛рд╕рди рддрдВрддреНрд░, </li><li>  рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкрд░реАрдХреНрд╖рдг рдХреЛрдб рдХреА рд░реВрдкрд░реЗрдЦрд╛ред </li></ul><br><p>  рд╣рдо рдЪрд╛рд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рд░рд┐рд▓реЗрд╢рдирд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ: PostgreSQL, MS SQL рд╕рд░реНрд╡рд░, Oracle рдФрд░ H2ред </p><br><p>  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ: </p><br><ol><li>  рдЬрд╛рд╡рд╛ рдХреЗ рдореВрд▓ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд╕рдорд╛рди рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд: "рдПрдХ рдмрд╛рд░ рд▓рд┐рдЦреЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рд╕рдорд░реНрдерд┐рдд рдЖрд░рдбреАрдмреАрдПрдордПрд╕ рдкрд░ рдЪрд▓рд╛рдПрдВред"  рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рдХреЛрдб рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рдЪрд▓реЗрдЧрд╛ред  рдЖрдк рд╡реНрдпрд╡рд╕рд╛рдп рддрд░реНрдХ рдХреЛрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ MS SQL рд╕рд░реНрд╡рд░ рдореЗрдВ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдлрд┐рд░ PostgreSQL рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдЬрдЯрд┐рд▓рддрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рд╣реЛрдЧрд╛ (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рд▓рдЧрднрдЧ :) </li><li>  рд▓рд╛рдЗрд╡ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкреБрдирд░реНрдЧрдардиред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛-рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХрд╛ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЬреАрд╡рди рдЪрдХреНрд░ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдХрд╛рд░реНрдпрд╢реАрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдРрд╕реЗ рдбреЗрдЯрд╛ рд╕реЗ рднрд░рд╛ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд╕рд╣реЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЙрдирдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдмрджрд▓рдирд╛ рднреА рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреА рдкреНрд░рдореБрдЦ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЖрдкрдХреЗ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ "рдлрд┐рдЯ" рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред </li><li>  рдкрд░реАрдХреНрд╖рдгред  рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдкрд░реАрдХреНрд╖рдг рдпреЛрдЧреНрдп рд╣реИ, рддрд╛рдХрд┐ рд╣рдо рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рддрд░реАрдХреЛрдВ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХреЗрдВ, рдпрд╣ рдЖрд╕рд╛рдиреА рд╕реЗ, рдЬрд▓реНрджреА рдФрд░ рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдврдВрдЧ рд╕реЗ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рдЬреИрд╕реЗ рдХрд┐ рдбрдмрдиреЗрдЯ рдФрд░ рдХрдВрдЯреЗрдирд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ред </li></ol><br><h2 id="dlya-chego-nuzhna-nezavisimost-ot-tipa-subd">  рдЖрдкрдХреЛ рдбреАрдмреАрдПрдордПрд╕ рдХреЗ рдкреНрд░рдХрд╛рд░ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ? </h2><br><p>  DBMS рдХреЗ рдкреНрд░рдХрд╛рд░ рд╕реЗ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рд▓реЙрдЬрд┐рдХ рдХреЛрдб рдХреА рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рд╣рдо рдкрд╣рд▓реЗ рдмрд┐рдВрджреБ рдирд╣реАрдВ рдереЗ: рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦреЗ рдЧрдП рдХреЛрдб рдХреЛ рдпрд╣ рдирд╣реАрдВ рдкрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рд╕ DBMS рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИред  рдХреНрдпреЛрдВ? </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдбреАрдмреАрдПрдордПрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдкрд╕рдВрдж рдПрдХ рддрдХрдиреАрдХреА рдореБрджреНрджрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд░рд╛рдЬрдиреАрддрд┐рдХ рд╣реИред  рдПрдХ рдирдП рд╡реНрдпрд╛рдкрд╛рд░ рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд▓рд┐рдП рдЖ рд░рд╣рд╛ рд╣реИ, рд╣рдо рдЕрдХреНрд╕рд░ рдкрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЙрд╕рдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд╕рдВрджреАрджрд╛ рдкреНрд░рдХрд╛рд░ рдХрд╛ DBMS рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдзрди рдХрд╛ рдирд┐рд╡реЗрд╢ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЧреНрд░рд╛рд╣рдХ рдореМрдЬреВрджрд╛ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдкрд░ рдЕрдиреНрдп рд╕рдорд╛рдзрд╛рди рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред  рддрдХрдиреАрдХреА рдкрд░рд┐рджреГрд╢реНрдп рдмрджрд▓ рд░рд╣рд╛ рд╣реИ: PostgreSQL рддреЗрдЬреА рд╕реЗ рд╕рд░рдХрд╛рд░реА рдПрдЬреЗрдВрд╕рд┐рдпреЛрдВ рдФрд░ рдирд┐рдЬреА рдХрдВрдкрдирд┐рдпреЛрдВ рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХреБрдЫ рд╕рдордп рдкрд╣рд▓реЗ рдПрдордПрд╕ рдПрд╕рдХреНрдпреВрдПрд▓ рд╕рд░реНрд╡рд░ рд╣рдорд╛рд░реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдкреНрд░рдмрд▓ рдерд╛ред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╕рдмрд╕реЗ рдЖрдо DBMSs рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╣рдо рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд┐рдд рдирд╣реАрдВ рд╣реИрдВред </p><br><p>  рджреВрд╕рд░реЗ, рдореИрдВ рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп рдкреБрд╕реНрддрдХрд╛рд▓рдп рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕реЗ рджреВрд╕рд░реА рдореЗрдВ рдорд╛рдирдХ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдХреЛрдб рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред  рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдпрд╛ рдИрдореЗрд▓ рдЕрдзрд┐рд╕реВрдЪрдирд╛ рд╡рд┐рддрд░рдг рдореЙрдбреНрдпреВрд▓ рдЬреИрд╕реА рдЪреАрдЬреЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдорд╛рдирдХ рд╣реИрдВ, рдФрд░ рд╣рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрдмрдВрдзреЛрдВ рд╡рд╛рд▓реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдИ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ? </p><br><p>  рддреАрд╕рд░реЗ, рдЕрдВрддрд┐рдо рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо, рдПрдХ рдЗрди-рдореЗрдореЛрд░реА H2 рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ DbUnit рдФрд░ рдХрдВрдЯреЗрдирд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред  рдЗрд╕ рдореЛрдб рдореЗрдВ, H2 рдмреЗрд╕ рддреБрд░рдВрдд рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдмрд╣реБрдд рдЬрд▓реНрджреА рдЗрд╕рдореЗрдВ рдПрдХ рдбреЗрдЯрд╛ рд╕реНрдХреАрдо рдмрдирд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдЖрдк рдЖрд╡рд╢реНрдпрдХ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рднреВрд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдЪреВрдВрдХрд┐ рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рдХреЛрдб рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдХрд┐рд╕ рдЖрдзрд╛рд░ рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рддрджрдиреБрд╕рд╛рд░, рдпрджрд┐ рдпрд╣ рдПрдЪ 2 рдкрд░ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рддреЛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдпрд╣ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕реАрдХреНрдпреВрдПрд▓ рдкрд░ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред  рдмреЗрд╢рдХ, рдЦреБрдж рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХрд╛ рдХрд╛рд░реНрдп рд╡рд╛рд╕реНрддрд╡рд┐рдХ DBMS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рд╣реИ рддрд╛рдХрд┐ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛ рд╕рдХреЗ рдХрд┐ рд╣рдорд╛рд░рд╛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдВрдмрдВрдзреЛрдВ рдкрд░ рдЕрдкрдиреЗ рдПрдкреАрдЖрдИ рдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдФрд░ рд╣рдо рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рдбреЗрд╡рд▓рдкрд░ рдХреА рдЕрдм рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </p><br><h2 id="celestasql">  CelestaSQL </h2><br><p>  рдХреНрд░реЙрд╕-рдмреЗрд╕рдореЗрдВрдЯрд╡рд╛рдж рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдмреЗрд╢рдХ, рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдПрдкреАрдЖрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдХреАрдордд рдкрд░ рдЬреЛ рддрд░реНрдХ рдХреЛ рдХрд┐рд╕реА рднреА рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдПрдХ рддрд░рдл рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╛рд╡рд╛ рдХрдХреНрд╖рд╛рдПрдВ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░реА рдУрд░ SQL рдХреЛрдб рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдХреБрдЫ рд╕рд╣рд╛рдпрдХ рд╡рд╕реНрддреБрдПрдВред </p><br><p>  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдЕрдкрдиреЗ рд╢реБрджреНрдз рд░реВрдк рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ-рд░рд┐рд▓реЗрд╢рдирд▓ рдореИрдкрд┐рдВрдЧ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдХреЛ рдбрд┐рдЬрд╛рдЗрди рдХрд░рддреЗ рд╕рдордп рд╣рдо рдХрдХреНрд╖рд╛рдУрдВ рд╕реЗ рдирд╣реАрдВ рдЖрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рд╕реЗред  рдпрд╣реА рд╣реИ, рдкрд╣рд▓реЗ рд╣рдо рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рдИрдЖрд░-рдореЙрдбрд▓ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░, рдЗрд╕ рдореЙрдбрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╕реНрд╡рдпрдВ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░реНрд╕рд░ рдХрдХреНрд╖рд╛рдПрдВ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЖрдк рдХреЗрд╡рд▓ рд╕рдорд░реНрдерд┐рдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдП рд╕рднреА рд╕рдорд░реНрдерд┐рдд DBMS рдкрд░ рд╕рдорд╛рди рдХрд╛рд░реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рд▓рдЧрднрдЧ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрджрд┐ рд╣рдо рд╕рд╢рд░реНрдд рд░реВрдк рд╕реЗ "рдпреВрд▓рд░ рд╕рд░реНрдХрд▓" рдХреЗ рд░реВрдк рдореЗрдВ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдЖрдзрд╛рд░реЛрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреА рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рд╕реЗрдЯ рдХреЛ рдЪрд┐рддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд┐рддреНрд░ рдорд┐рд▓рддреЗ рд╣реИрдВ: </p><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/getpro/habr/post_images/7d9/2ad/1e1/7d92ad1e1a3bc0bb83b5c4bcc511ec66.png"></div><br><p>  рдпрджрд┐ рд╣рдо рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреНрд░рдХрд╛рд░ рд╕реЗ рдкреВрд░реНрдг рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЬреЛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣рдо рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд▓рд┐рдП рдЦреЛрд▓рддреЗ рд╣реИрдВ, рдЙрд╕реЗ рд╕рднреА рдард┐рдХрд╛рдиреЛрдВ рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХреЗ рдЕрдВрджрд░ рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ, рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реАрдорд╛ рд╣реИред  рд╣рд╛рдВ: рдХреБрдЫ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдо SQL рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЕрдкрд╡рд╛рдж рдХреЗ рдмрд┐рдирд╛, рд░рд┐рд▓реЗрд╢рдирд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдЯреЗрдмрд▓, рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬреА, рд╡рд┐рдЪрд╛рд░, рдЕрдиреБрдХреНрд░рдо, рдЬреЙрдЗрди рдФрд░ рдЧреНрд░реБрдк рдмрд╛рдп рдХреЗ рд╕рд╛рде рдПрд╕рдХреНрдпреВрдПрд▓ рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред  рддрджрдиреБрд╕рд╛рд░, рд╣рдо рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рдпреЗ рдЕрд╡рд╕рд░ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ "рдкреНрд░рддрд┐рд░реВрдкрд┐рдд SQL" рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рд╣рдо "CelestaSQL" рдХрд╣рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣рдо рд╕рдВрдмрдВрдзрд┐рдд рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдмреЛрд▓рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП SQL рдХреНрд╡реЗрд░реА рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  CelestaSQL рднрд╛рд╖рд╛ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рд╡рд┐рдЪрд╛рд░реЛрдВ рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рдХреЗ рд▓рд┐рдП рд╕реЗрд▓реЗрдХреНрдЯ рдХреНрд╡реЗрд░реАрдЬрд╝ рдХреЗ рд▓рд┐рдП DDL рд╢рд╛рдорд┐рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ DML рдХрдорд╛рдВрдб рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИрдВ: рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░реНрд╕рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рди рдкрд░ рдЕрднреА рднреА рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдиреА рд╣реИред </p><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдЕрдкрдирд╛ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИред  CelestaSQL рдХреЗ рдЕрдкрдиреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕реЗрдЯ рднреА рд╣реИрдВред  рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдЙрдирдореЗрдВ рд╕реЗ рдиреМ рд╣реИрдВ, рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣ рддрд╛рд▓рд┐рдХрд╛</a> рд╡рд┐рднрд┐рдиреНрди рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдЬрд╛рд╡рд╛ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдЙрдирдХреА рддреБрд▓рдирд╛ рдХрд░рддреА рд╣реИред </p><br><p>  рдРрд╕рд╛ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдиреМ рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, PostgreSQL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ</a> ) рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпреЗ рдРрд╕реЗ рдкреНрд░рдХрд╛рд░ рд╣реИрдВ рдЬреЛ рд╡рд┐рддреНрддреАрдп, рд╡реНрдпрд╛рдкрд╛рд░ рдФрд░ рд▓реЙрдЬрд┐рд╕реНрдЯрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ: рддрд╛рд░, рдкреВрд░реНрдгрд╛рдВрдХ, рдЖрдВрд╢рд┐рдХ рдЗрд╕ рддрд░рд╣ рдХреЗ рдбреЗрдЯрд╛ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рджрд┐рдирд╛рдВрдХ, рдмреВрд▓рд┐рдпрди рдорд╛рди рдФрд░ рдмреНрд▓рдм рд╣рдореЗрд╢рд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВред </p><br><p>  CelestaSQL рднрд╛рд╖рд╛ рдХреЛ рд╕реНрд╡рдпрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдЖрд░реЗрдЦреЛрдВ рдХреЗ рд╕рд╛рде рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><h2 id="modifikaciya-struktury-bazy-dannyh-idempotentnyy-ddl">  рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╕рдВрд╢реЛрдзрдиред  рдмреЗрд░реЛрдЬрдЧрд╛рд░ рдбреАрдбреАрдПрд▓ </h2><br><p>  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХреА рдПрдХ рдЕрдиреНрдп рдкреНрд░рдореБрдЦ рд╡рд┐рд╢реЗрд╖рддрд╛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдпрд╢реАрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, idempotent DDL рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЬрдм рд╣рдо CelestaSQL рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд╛рда рд▓рд┐рдЦрддреЗ рд╣реИрдВ: </p><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> OrderLine( order_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, line_no <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_name <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), qty <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> <span class="hljs-built_in"><span class="hljs-built_in">REAL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> Idx_OrderLine PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (order_id, line_no) );</code> </pre> <br><p>  - рдЗрд╕ рдкрд╛рда рдХреЛ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рджреНрд╡рд╛рд░рд╛ "рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдирд╣реАрдВ рдХреА рдЧрдИ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╣реИ, рддреЛ рдПрдХ рддреНрд░реБрдЯрд┐ рджреЗрдВ", рд▓реЗрдХрд┐рди "рд╡рд╛рдВрдЫрд┐рдд рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рддрд╛рд▓рд┐рдХрд╛ рд▓рд╛рдПрдВ"ред  рд╡рд╣ рдпрд╣ рд╣реИ: тАЬрдпрджрд┐ рдХреЛрдИ рддрд╛рд▓рд┐рдХрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ рдмрдирд╛рдПрдВ, рдпрджрд┐ рдХреЛрдИ рддрд╛рд▓рд┐рдХрд╛ рд╣реИ, рддреЛ рджреЗрдЦреЗрдВ рдХрд┐ рдЗрд╕рдореЗрдВ рдХреМрди рд╕реЗ рдлрд╝реАрд▓реНрдб рд╣реИрдВ, рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реИрдВ, рдХреМрди рд╕реЗ рдЕрдиреБрдХреНрд░рдорд┐рдд рд╣реИрдВ, рдХреМрди рд╕реА рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬрд┐рдпрд╛рдБ рд╣реИрдВ, рдХреНрдпрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рд╣реИрдВ, рдЖрджрд┐, рдФрд░ рдХреНрдпрд╛ рдЗрд╕рдореЗрдВ рдХреБрдЫ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рд╕рд╣реА рддрд░рд╣ рд╕реЗ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдПред тАЭ </p><br><p>  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рд╣рдо рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рд┐рдлрд▓реЗрдХреНрдЯрд░ рдФрд░ рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  рд╣рдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╕рдВрд░рдЪрдирд╛ рдХреА рд╡рд░реНрддрдорд╛рди "рд╡рд╛рдВрдЫрд┐рдд рдЫрд╡рд┐" рджреЗрдЦрддреЗ рд╣реИрдВ, </li><li>  рдХреНрдпрд╛, рдХрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рдФрд░ рдХреНрдпреЛрдВ рд╕рдВрд░рдЪрдирд╛ рд╕рдордп рдХреЗ рд╕рд╛рде рдмрджрд▓ рдЧрдИ рд╣реИ, рд╣рдо рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдгрд╛рд▓реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, </li><li>  ALTER рдХрдорд╛рдВрдб рдХреЗ рд▓рд┐рдП, рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ "рд╣реБрдб рдХреЗ рддрд╣рдд" рдЙрддреНрдкрдиреНрди рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИред </li></ul><br><p>  рдмреЗрд╢рдХ, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдЕрдкрдиреА рд╕реАрдорд╛рдПрдВ рд╣реИрдВред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рд░ рд╕рдВрднрд╡ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкреНрд░рд╡рд╛рд╕ рджрд░реНрдж рд░рд╣рд┐рдд рдФрд░ рдирд┐рд░реНрдмрд╛рдз рд╣реЛ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рднреА рдорд╛рдорд▓реЛрдВ рдореЗрдВ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдкреНрд░реЗрд░рдгрд╛, рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рдФрд░ рд╕реАрдорд╛рдПрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ</a> рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдереАрдВ (рдЗрд╕рдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдВрдЧреНрд░реЗрдЬреА рд╕рдВрд╕реНрдХрд░рдг</a> рднреА рдЙрдкрд▓рдмреНрдз рд╣реИ)ред </p><br><p>  рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреА рдЬрд╛рдБрдЪ / рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рддреЗрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, Celesta рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ DDL рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪреЗрдХрд╕рдо рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ (рдЬрдм рддрдХ рдХрд┐ рдЪреЗрдХрд╕рдо рдХреЛ рдмрджрд▓ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреА рдЬрд╛рдБрдЪ рдФрд░ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ)ред  рдПрдХ рджреВрд╕рд░реЗ рдкрд░ рдирд┐рд░реНрднрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдХреНрд░рдо рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрджреНрдпрддрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП, рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рдмреАрдЪ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рд╕рд╛рдордпрд┐рдХ рдЫрдВрдЯрд╛рдИ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><h2 id="sozdanie-proekta-celesta-i-modeli-dannyh">  рдПрдХ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдмрдирд╛рдирд╛ </h2><br><p>  рдбреЗрдореЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ, рдЬрд┐рд╕ рдкрд░ рд╣рдо рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреАрдердм рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ</a> ред  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╕реНрдкреНрд░рд┐рдВрдЧ рдмреВрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓рд┐рдЦрддреЗ рд╕рдордп рдЖрдк рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХ рдорд╛рд╡реЗрди рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рд╣реИрдВ: </p><br><ul><li>  <code>org.springframework.boot:spring-boot-starter-web</code> рдФрд░ <code>ru.curs:spring-boot-starter-celesta</code> (рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ <code>ru.curs:spring-boot-starter-celesta</code> )ред </li><li>  рдпрджрд┐ рдЖрдк рд╕реНрдкреНрд░рд┐рдВрдЧ рдмреВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк <code>ru.curs:celesta-system-services</code> рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code>ru.curs:celesta-system-services</code> рдирд┐рд░реНрднрд░рддрд╛ рд╕реАрдзреЗред </li><li>  <code>ru.curs:celesta-maven-plugin</code> -рдПрд╕рдХреНрдпреВрдПрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХрдХреНрд╖рд╛рдУрдВ рдХреА рдХреЛрдб рдкреАрдврд╝реА рдХреЗ рд▓рд┐рдП, <code>ru.curs:celesta-maven-plugin</code> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ <code>ru.curs:celesta-maven-plugin</code> - рдПрдХ рдбреЗрдореЛ рдЙрджрд╛рд╣рд░рдг рдпрд╛ рдкреНрд░рд▓реЗрдЦрди рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдХреЛрдб рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдХреИрд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПред </li><li>  рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рддрд░реАрдХреЛрдВ рдХреЗ рд▓рд┐рдП JUnit5 рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <code>ru.curs:celesta-unit</code> рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ <code>ru.curs:celesta-unit</code> рдкрд░реАрдХреНрд╖рдг рдХреЗ рджрд╛рдпрд░реЗ рдореЗрдВ <code>ru.curs:celesta-unit</code> ред </li></ul><br><p>  рдЕрдм рдПрдХ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдмрдирд╛рдПрдВ рдФрд░ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВред </p><br><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рдПрдХ рдИ-рдХреЙрдорд░реНрд╕ рдХрдВрдкрдиреА рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рджреВрд╕рд░реА рдХрдВрдкрдиреА рдореЗрдВ рд╡рд┐рд▓рдп рд╣реБрдЖ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдХрд╛ рдЕрдкрдирд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рд╣реИред  рд╡реЗ рдЖрджреЗрд╢ рдПрдХрддреНрд░ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЬрдм рддрдХ рд╡реЗ рдЕрдкрдиреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд╡рд┐рд▓рдп рдирд╣реАрдВ рдХрд░рддреЗ, рддрдм рддрдХ рдЙрдиреНрд╣реЗрдВ рдмрд╛рд╣рд░ рд╕реЗ рдЖрджреЗрд╢ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рдЗрд╕ "рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ" рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛рдлреА рдкрд╛рд░рдВрдкрд░рд┐рдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: CRUD рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдПрдХ HTTP рд╕реЗрд╡рд╛ рдЬреЛ рдПрдХ рд╕рдВрдмрдВрдзрдкрд░рдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИред </p><br><p>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдбреЗрдЯрд╛рдмреЗрд╕-рдкреНрд░рдердо рдбрд┐рдЬрд╝рд╛рдЗрди рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдкрд╣рд▓реЗ рд╣рдореЗрдВ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдСрд░реНрдбрд░ рд╕реНрдЯреЛрд░ рдХрд░рддреА рд╣реИред  рдПрдХ рдЖрджреЗрд╢, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рдПрдХ рд╕рдордЧреНрд░ рдЗрдХрд╛рдИ рд╣реИ: рдЗрд╕рдореЗрдВ рдПрдХ рд╣реЗрдбрд░ рд╣реЛрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдЧреНрд░рд╛рд╣рдХ, рдСрд░реНрдбрд░ рдХреА рддрд╛рд░реАрдЦ рдФрд░ рдСрд░реНрдбрд░ рдХреА рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреА рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде рдХрдИ рд▓рд╛рдЗрдиреЗрдВ (рдХрдореЛрдбрд┐рдЯреА рдЖрдЗрдЯрдо) рднреА рд╣реЛрддреА рд╣реИрдВред </p><br><p>  рддреЛ, рдиреМрдХрд░реА рдХреЗ рд▓рд┐рдП: рдмрдирд╛рдПрдБ </p><br><ul><li>  <code>src/main/celestasql</code> - рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ CelestaSQL рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдкрде рд╣реИ </li><li>  рдЗрд╕рдореЗрдВ рд╕рдмрдлрд╝реЛрд▓реНрдбрд░реНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ рдЬрд╛рд╡рд╛ рдкреИрдХреЗрдЬ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ <code>ru/curs/demo</code> ) рдХреА рдлрд╝реЛрд▓реНрдбрд░ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рджреЛрд╣рд░рд╛рддреЗ рд╣реИрдВред </li><li>  рдкреИрдХреЗрдЬ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ, рдирд┐рдореНрди рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рдПрдХ <code>.sql</code> рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ: </li></ul><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SCHEMA</span></span> demo <span class="hljs-keyword"><span class="hljs-keyword">VERSION</span></span> <span class="hljs-string"><span class="hljs-string">'1.0'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> OrderHeader( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> DATETIME, customer_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>), <span class="hljs-comment"><span class="hljs-comment">/**  */</span></span> customer_name <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>), manager_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> Pk_OrderHeader PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-comment"><span class="hljs-comment">/** */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> OrderLine( order_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, line_no <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_id <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_name <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), qty <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> <span class="hljs-built_in"><span class="hljs-built_in">REAL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> Idx_OrderLine PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (order_id, line_no) ); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> OrderLine <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_OrderLine <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (order_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> OrderHeader(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIEW</span></span> OrderedQty <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> item_id, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(qty) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> qty <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> OrderLine <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> item_id;</code> </pre> <br><p>  рдпрд╣рд╛рдВ рд╣рдордиреЗ рдПрдХ рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬреА рд╕реЗ рдЬреБрдбрд╝реА рджреЛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рд╣реИ, рдФрд░ рдПрдХ рджреГрд╢реНрдп рдЬреЛ рд╕рднреА рдСрд░реНрдбрд░ рдореЗрдВ рдореМрдЬреВрдж рд╕рд╛рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рд░рд╛рдВрд╢ рдорд╛рддреНрд░рд╛ рд▓реМрдЯрд╛рдПрдЧрд╛ред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ <code>CREATE SCHEMA</code> рд╕реНрдХреАрдорд╛ рдХрдорд╛рдВрдб рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде, рдирд┐рдпрдорд┐рдд рдПрд╕рдХреНрдпреВрдПрд▓ рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣рдордиреЗ <code>demo</code> рд╕реНрдХреАрдорд╛ рд╕рдВрд╕реНрдХрд░рдг рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдерд╛ (рдХреИрд╕реЗ рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЦреНрдпрд╛ рд╕реНрд╡рдд: рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреА рд╣реИ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рджреЗрдЦреЗрдВ)ред  рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рднреА рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдФрд░ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рд╕рднреА рдирд╛рдо рдХреЗрд╡рд▓ рдРрд╕реЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдЬрд╛рд╡рд╛ рднрд╛рд╖рд╛ рдореЗрдВ рдорд╛рдиреНрдп рд╡рд░реНрдЧ рдФрд░ рдЪрд░ рдирд╛рдореЛрдВ рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд░рд┐рдХреНрдд рд╕реНрдерд╛рди, рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдгреЛрдВ рдХреЛ рдмрд╛рд╣рд░ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред  рдЖрдк рдпрд╣ рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЬреЛ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рд╣рдордиреЗ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдФрд░ рдХреБрдЫ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рдирд╛рдо рдкрд░ рд░рдЦреА рдереАрдВ, рд╣рдо рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ / * рд╕реЗ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реБрдП, рд▓реЗрдХрд┐рди / ** рдХреЗ рд╕рд╛рде, рдХреИрд╕реЗ JavaDoc рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИрдВ - рдФрд░ рдпрд╣ рдХреЛрдИ рджреБрд░реНрдШрдЯрдирд╛ рдирд╣реАрдВ рд╣реИ!  / ** рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдЗрдХрд╛рдИ рдкрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдЙрд╕ рдЗрдХрд╛рдИ рдХреЗ <code>.getCelestaDoc()</code> рд╕рдВрдкрддреНрддрд┐ рдореЗрдВ рд░рдирдЯрд╛рдЗрдо рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реЛрдЧреАред  рдпрд╣ рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬрдм рд╣рдо рдЕрддрд┐рд░рд┐рдХреНрдд рдореЗрдЯрд╛-рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛рдмреЗрд╕ рддрддреНрд╡ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдорд╛рдирд╡ рдкрдардиреАрдп рдлрд╝реАрд▓реНрдб рдирд╛рдо, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдлрд╝реАрд▓реНрдб рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХреИрд╕реЗ рдХрд░реЗрдВ рдЖрджрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реАред </p><br><p>  CelestaSQL рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрд╛рд░реНрдп рдХрд░рддреА рд╣реИ: рдкрд╣рд▓рд╛, рд░рд┐рд▓реЗрд╢рдирд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдкрд░рд┐рдирд┐рдпреЛрдЬрди / рд╕рдВрд╢реЛрдзрди рдХреЗ рд▓рд┐рдП рдФрд░ рджреВрд╕рд░рд╛, рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХреНрд▓рд╛рд╕реЗрд╕ рдХреА рдХреЛрдб рдЬрдирд░реЗрд╢рди рдХреЗ рд▓рд┐рдПред </p><br><p>  рд╣рдо рдЕрднреА рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХреНрд▓рд╛рд╕реЗрд╕ рдЬреЗрдирд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмрд╕ <code>mvn generate-sources</code> рдХрдорд╛рдВрдб рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛, рдЕрдЧрд░ рдЖрдк IDEA рдореЗрдВ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдорд╛рд╡реЗрди рдХрдВрдЯреНрд░реЛрд▓ рдкреИрдирд▓ рдореЗрдВ 'рдЬреЗрдирд░реЗрдЯ рд╕реЛрд░реНрд╕ рдПрдВрдб рдлреЛрд▓реНрдбрд░реНрд╕ рдлреЛрд▓реНрдбрд░' рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, IDEA <code>target/generated-sources/celesta</code> рдореЗрдВ рдмрдирд╛рдП <code>target/generated-sources/celesta</code> рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ " <code>target/generated-sources/celesta</code> рдФрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдЖрдпрд╛рдд рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рд╕рд╛рдордЧреНрд░реА рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рддрд╛ рд╣реИред  рдХреЛрдб рдкреАрдврд╝реА рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реЛрдЧрд╛ - рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд░реНрдЧ: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2x/3q/cs/2x3qcsydsu3y5vplbyh7oz15z-s.png"></div><br><p>  рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдХрдиреЗрдХреНрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <code>src/main/resources/application.yml</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИред  рд╕реНрдкреНрд░рд┐рдВрдЧ-рдмреВрдЯ-рд╕реНрдЯрд╛рд░реНрдЯрд░-рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, IDEA рдЖрдкрдХреЛ рдХреЛрдб рдкреВрд░рд╛ рдХрд░рдиреЗ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдХреЛрдб рд╡рд┐рдХрд▓реНрдк рдмрддрд╛рдПрдЧрд╛ред </p><br><p>  рдпрджрд┐ рд╣рдо рдкреНрд░рджрд░реНрд╢рди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП "рд╡рд╛рд╕реНрддрд╡рд┐рдХ" RDBMS рд╕реЗ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрди-рдореЗрдореЛрд░реА рдореЛрдб рдореЗрдВ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд H2 рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Celesta рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">celesta: h2: inMemory: true</code> </pre> <br><p>  "рд╡рд╛рд╕реНрддрд╡рд┐рдХ" рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдмрджрд▓реЗрдВ </p><br><pre> <code class="plaintext hljs">celesta: jdbc: url: jdbc:postgresql://127.0.0.1:5432/celesta username: &lt;your_username&gt; password: &lt;your_password&gt;</code> </pre> <br><p>  (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдорд╛рд╡реЗрди рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдореЗрдВ PostgreSQL JDBC рдбреНрд░рд╛рдЗрд╡рд░ рднреА рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛)ред </p><br><p>  рдЬрдм рдЖрдк рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдПрдХ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрд╡рд╢реНрдпрдХ рдбреЗрдЯрд╛рдмреЗрд╕, рд╡реНрдпреВ, рдЗрдВрдбреЗрдХреНрд╕, рдЖрджрд┐ рдПрдХ рдЦрд╛рд▓реА рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рдЧрдП рд╣реИрдВ, рдФрд░ рдПрдХ рдЧреИрд░-рдЦрд╛рд▓реА рдХреЗ рд▓рд┐рдП, рд╡реЗ рдбреАрдбреАрдПрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдВрд░рдЪрдирд╛рдУрдВ рд╕реЗ рдЕрдкрдбреЗрдЯ рд╣реИрдВред </p><br><h2 id="sozdanie-metodov-rabotayuschih-s-dannymi">  рдбреЗрдЯрд╛ рд╣реЗрд░рдлреЗрд░ рдХреЗ рддрд░реАрдХреЗ рдмрдирд╛рдирд╛ </h2><br><p>  рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓ рдЧрдпрд╛ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреИрд╕реЗ рдмрдирд╛рдИ рдЬрд╛рдП, рддреЛ рдЖрдк рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдПрдХреНрд╕реЗрд╕ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдХрд░рдиреЗ рдФрд░ рд▓реЙрдЧрд┐рдВрдЧ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, Celesta рдореЗрдВ рдбреЗрдЯрд╛ рдкрд░ рдХреЛрдИ рднреА рдСрдкрд░реЗрд╢рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдУрд░ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреЛрдИ "рдЕрдирд╛рдо" рдСрдкрд░реЗрд╢рди рдирд╣реАрдВ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдХрд┐рд╕реА рднреА Celesta рдХреЛрдб рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CallContext</a> рд╡рд░реНрдЧ рдореЗрдВ рд╡рд░реНрдгрд┐рдд <em>рдХреЙрд▓</em> рдХреЗ <em>рд╕рдВрджрд░реНрдн</em> рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ <em>рд╣реИ</em> ред </p><br><ul><li>  рдПрдХ рдСрдкрд░реЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЬреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, <code>CallContext</code> рд╕рдХреНрд░рд┐рдп рд╣реИред </li><li>  рд╕рдХреНрд░рд┐рдпрдг рдХреЗ рд╕рдордп, рдХрдиреЗрдХреНрд╢рди рдкреВрд▓ рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдПрдХ рдХрдиреЗрдХреНрд╢рди рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд▓реЗрдирджреЗрди рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред </li><li>  рдСрдкрд░реЗрд╢рди <code>CallContext</code> рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж <code>CallContext</code> рдпрд╛ рддреЛ <code>commit()</code> рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ <code>CallContext</code> рдпрджрд┐ рдСрдкрд░реЗрд╢рди рд╕рдлрд▓ рд░рд╣рд╛ рдерд╛, рдпрд╛ <code>rollback()</code> рдпрджрд┐ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдХреЛрдИ рдЕрдЦрдВрдб рдЕрдкрд╡рд╛рдж рд╣реБрдЖ, рддреЛ <code>CallContext</code> рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрдиреЗрдХреНрд╢рди рдкреВрд▓ рдореЗрдВ рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИред </li></ul><br><p>  рдпрджрд┐ рд╣рдо рд╕реНрдкреНрд░рд┐рдВрдЧ-рдмреВрдЯ-рд╕реНрдЯрд╛рд░реНрдЯрд░-рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпреЗ рдХреНрд░рд┐рдпрд╛рдПрдВ <code>@CelestaTransaction</code> рджреНрд╡рд╛рд░рд╛ рдПрдиреЛрдЯреЗрдЯ рдХрд┐рдП рдЧрдП рд╕рднреА рддрд░реАрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреА <code>@CelestaTransaction</code> ред </p><br><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рд╣рдо рдПрдХ рд╣реИрдВрдбрд▓рд░ рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдЪрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдирд┐рдпрдВрддреНрд░рдХ-рд╕реНрддрд░ рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/api"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DocumentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> DocumentService srv; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DocumentController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DocumentService srv)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.srv = srv; } <span class="hljs-meta"><span class="hljs-meta">@PutMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/save"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@RequestBody OrderDto order)</span></span></span><span class="hljs-function"> </span></span>{ CallContext ctx = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CallContext(<span class="hljs-string"><span class="hljs-string">"user1"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//new SystemCallContext(); srv.postOrder(ctx, order); }</span></span></code> </pre> <br><p>  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдирд┐рдпрдВрддреНрд░рдХ рд╡рд┐рдзрд┐ рдХреЗ рд╕реНрддрд░ рдкрд░ (рдпрд╛рдиреА, рдЬрдм рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкрд╣рд▓реЗ рд╣реА рдмреАрдд рдЪреБрдХрд╛ рд╣реИ), рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЖрдИрдбреА рдХреЛ рдЬрд╛рдирддреЗ рд╣реИрдВ рдФрд░ <code>CallContext</code> рдмрдирд╛рддреЗ рд╕рдордп рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХрд┐рд╕реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХрд┐рд╕реА рд╕рдВрджрд░реНрдн рдореЗрдВ рдмрд╛рдБрдзрдирд╛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреА рдУрд░ рд╕реЗ рдХрд┐рдП рдЧрдП рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд▓реЙрдЧ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд╕рдЪ рд╣реИ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдб рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд┐рд╕реНрдЯрдо рдЯреЗрдмрд▓</a> рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ "user1" рдХреЗ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдЖрдк Celesta рдПрдХреНрд╕реЗрд╕ рдбрд┐рд╕реНрдЯреНрд░реАрдмреНрдпреВрд╢рди рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рд╕рддреНрд░ рд╕рдВрджрд░реНрдн рдХреЛ рдХрд┐рд╕реА рднреА рдЯреЗрдмрд▓ рдкрд░ рд╕рднреА рдЕрдзрд┐рдХрд╛рд░ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХ <code>SystemCallContext</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╕реЗрд╡рд╛ рд╕реНрддрд░ рдкрд░ рдЪрд╛рд▓рд╛рди рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреА рд╡рд┐рдзрд┐ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддреА рд╣реИ: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DocumentService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@CelestaTransaction</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CallContext context, OrderDto doc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (OrderHeaderCursor header = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderHeaderCursor(context); OrderLineCursor line = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderLineCursor(context)) { header.setId(doc.getId()); header.setDate(Date.from(doc.getDate().atStartOfDay(ZoneId.systemDefault()).toInstant())); header.setCustomer_id(doc.getCustomerId()); header.setCustomer_name(doc.getCustomerName()); header.insert(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lineNo = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (OrderLineDto docLine : doc.getLines()) { lineNo++; line.setLine_no(lineNo); line.setOrder_id(doc.getId()); line.setItem_id(docLine.getItemId()); line.setQty(docLine.getQty()); line.insert(); } } }</code> </pre> <br><p>  <code>@CelestaTransaction</code> рдПрдиреЛрдЯреЗрд╢рди рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдкреНрд░реЙрдХреНрд╕реА рдСрдмреНрдЬреЗрдХреНрдЯ <code>DocumentService</code> рд╕рд░реНрд╡рд┐рд╕ рдЙрди рд╕рднреА рд╕реЗрд╡рд╛ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд <code>CallContext ctx</code> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд░реЗрдЧрд╛ред  рдпрд╣реА рд╣реИ, рд╡рд┐рдзрд┐ рдирд┐рд╖реНрдкрд╛рджрди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдбреЗрдЯрд╛рдмреЗрд╕ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рд╣реЛрдЧрд╛, рдФрд░ рд▓реЗрдирджреЗрди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реЛрдЧрд╛ред  рд╣рдо рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рд▓рд┐рдЦрдиреЗ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <code>OrderDto</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрдврд╝рдирд╛ рдФрд░ рдЗрд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕рд╣реЗрдЬрдирд╛ рд╣реИред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рддрдерд╛рдХрдерд┐рдд <code>celesta-maven-plugin</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ - <code>celesta-maven-plugin</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрддреНрдкрдиреНрди рдХрдХреНрд╖рд╛рдПрдВред  рд╣рдо рдкрд╣рд▓реЗ рд╣реА рджреЗрдЦ рдЪреБрдХреЗ рд╣реИрдВ рдХрд┐ рд╡реЗ рдХреНрдпрд╛ рд╣реИрдВред  рд╕реНрдХреАрдорд╛ рд╡рд╕реНрддреБрдУрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рджреЛ рдЯреЗрдмрд▓ рдФрд░ рдПрдХ рджреГрд╢реНрдпред  рдФрд░ рдЕрдм рд╣рдо рдЕрдкрдиреЗ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдХрдХреНрд╖рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдСрд░реНрдбрд░ рдЯреЗрдмрд▓ рдкрд░ рдПрдХ рдХрд░реНрд╕рд░ рдмрдирд╛рдиреЗ рдФрд░ рдкрд╣рд▓рд╛ рд░рд┐рдХреЙрд░реНрдб рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="java hljs">OrderHeaderCursor header = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderHeaderCursor(context); header.tryFirst();</code> </pre> <br><p>  рд╣реЗрдбрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЧреЗрдЯ рдПрдВрдЯреНрд░реА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдЧреЗрдЯрд░реНрд╕ рдФрд░ рд╕реЗрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><div style="text-align:center;"><img width="450" src="https://habrastorage.org/webt/_8/gl/9i/_8gl9ikjbprpjano2dbvj0reme8.png"></div><br><p>  рдХрд░реНрд╕рд░ рдмрдирд╛рддреЗ рд╕рдордп, рд╣рдореЗрдВ рд╕рдХреНрд░рд┐рдп рдХреЙрд▓ рд╕рдВрджрд░реНрдн рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП - рдпрд╣ рдХрд░реНрд╕рд░ рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИред  рдХреЙрд▓ рд╕рдВрджрд░реНрдн рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЙрд╕рдХреЗ рдЙрдкрдпреЛрдЧ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдХрд░реНрд╕рд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд╕рд╛рде, рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЪреАрдЬреЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рдлрд╝рд┐рд▓реНрдЯрд░, рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдирд╛, рдФрд░ рднреА, рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рд░рд┐рдХреЙрд░реНрдб рдбрд╛рд▓реЗрдВ, рд╣рдЯрд╛рдПрдВ рдФрд░ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред  рдкреВрд░реЗ рдХрд░реНрд╕рд░ рдПрдкреАрдЖрдИ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рдХреЛрдб рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs">OrderHeaderCursor header = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderHeaderCursor(context); header.setRange(<span class="hljs-string"><span class="hljs-string">"manager_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"manager1"</span></span>); header.tryFirst(); header.setCounter(header.getCounter() + <span class="hljs-number"><span class="hljs-number">1</span></span>); header.update();</code> </pre> <br><p>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо manager_id рдлрд╝реАрд▓реНрдб рджреНрд╡рд╛рд░рд╛ рдлрд╝рд┐рд▓реНрдЯрд░ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдлрд┐рд░ рд╣рдо TryFirst рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд╣рд▓рд╛ рд░рд┐рдХреЙрд░реНрдб рдкрд╛рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">(рдХреНрдпреЛрдВ "рдХреЛрд╢рд┐рд╢")</b> <div class="spoiler_text"><p>  <code>get</code> , <code>first</code> , <code>insert</code> , <code>update</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдореЗрдВ рджреЛ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: рдмрд┐рдирд╛ рдХреЛрд╢рд┐рд╢ рдХреЗ рдЙрдкрд╕рд░реНрдЧ (рдмрд╕ <code>get(...)</code> , рдЖрджрд┐) рдФрд░ рдХреЛрд╢рд┐рд╢ рдЙрдкрд╕рд░реНрдЧ рдХреЗ рд╕рд╛рде ( <code>tryGet(...)</code> , <code>tryFirst()</code> , рдЖрджрд┐) ред  рдпрджрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЙрдкрд╕рд░реНрдЧ рдХреЗ рдмрд┐рдирд╛ рддрд░реАрдХреЗ рдПрдХ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ () рдПрдХ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджреЗрдЧрд╛ рдпрджрд┐ рдХреЛрдИ рд░рд┐рдХреЙрд░реНрдб рдХрд░реНрд╕рд░ рдкрд░ рд╕реЗрдЯ рдлрд╝рд┐рд▓реНрдЯрд░ рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓рддрд╛ рд╣реИред  рдЗрд╕реА рд╕рдордп, рдХреЛрд╢рд┐рд╢ рдЙрдкрд╕рд░реНрдЧ рд╡рд╛рд▓реЗ рддрд░реАрдХреЗ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рдлреЗрдВрдХрддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдПрдХ рдмреВрд▓рд┐рдпрди рдорд╛рди рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ рдЬреЛ рд╕рдВрдмрдВрдзрд┐рдд рдСрдкрд░реЗрд╢рди рдХреА рд╕рдлрд▓рддрд╛ рдпрд╛ рд╡рд┐рдлрд▓рддрд╛ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрддрд╛ рд╣реИред  рдЕрдиреБрд╢рдВрд╕рд┐рдд рдЕрднреНрдпрд╛рд╕, рдЬрд╣рд╛рдВ рдХрд╣реАрдВ рднреА рд╕рдВрднрд╡ рд╣реЛ, рдЙрдкрд╕рд░реНрдЧ рдХреЗ рдмрд┐рдирд╛ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣, "рд╕реЗрд▓реНрдл-рдЯреЗрд╕реНрдЯрд┐рдВрдЧ" рдХреЛрдб рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд▓реЙрдЬрд┐рдХ рдФрд░ / рдпрд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдбреЗрдЯрд╛ рдореЗрдВ рд╕рдордп рдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </p></div></div><br><p>  рдЬрдм <code>tryFirst</code> рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдпрд╛ <code>tryFirst</code> рд╣реИ, рддреЛ <code>tryFirst</code> рдЪрд░ рдПрдХ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдбреЗрдЯрд╛ рд╕реЗ рднрд░реЗ рд╣реЛрддреЗ рд╣реИрдВ, рд╣рдо рдЙрдиреНрд╣реЗрдВ рдорд╛рди рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрд╕рд╛рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдФрд░ рдЬрдм рдХрд░реНрд╕рд░ рдореЗрдВ рдбреЗрдЯрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╣рдо <code>update()</code> рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдХрд░реНрд╕рд░ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рдХреЛрдб рдХрд┐рд╕ рд╕рдорд╕реНрдпрд╛ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ?  рдмреЗрд╢рдХ, рджреМрдбрд╝ рд╣рд╛рд▓рдд / рдЦреЛ рдЕрджреНрдпрддрди рдХреЗ рдЙрджреНрднрд╡!  рдХреНрдпреЛрдВрдХрд┐ рдЙрд╕ рдХреНрд╖рдг рдХреЗ рдмреАрдЪ рдЬрдм рд╣рдордиреЗ "tryFirst" рдХреЗ рд╕рд╛рде рд▓рд╛рдЗрди рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдЙрд╕ рдкрд▓ рдЬрдм рд╣рдо "рдЕрдкрдбреЗрдЯ" рдмрд┐рдВрджреБ рдкрд░ рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреЛрдИ рдЕрдиреНрдп рд╡реНрдпрдХреНрддрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рдкрд╣рд▓реЗ рд╣реА рдкреНрд░рд╛рдкреНрдд, рд╕рдВрд╢реЛрдзрд┐рдд рдФрд░ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдбреЗрдЯрд╛ рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдХрд░реНрд╕рд░ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдирдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ!  рдЦреЛрдП рд╣реБрдП рдЕрдкрдбреЗрдЯ рд╕реЗ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдЖрд╢рд╛рд╡рд╛рджреА рд▓реЙрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, Celesta рдПрдХ <code>recversion</code> рдлрд╝реАрд▓реНрдб рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ UPDATE рдЯреНрд░рд┐рдЧрд░ рдХреЗ рд╕реНрддрд░ рдкрд░ рдпрд╣ рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рд╛рддрд╛ рд╣реИ рдФрд░ рдЬрд╛рдБрдЪрддрд╛ рд╣реИ рдХрд┐ рдЕрджреНрдпрддрди рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдореЗрдВ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╕рдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рд╣реИред  рдпрджрд┐ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдПрдХ рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрддрд╛ рд╣реИред  рдЖрдк рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реБрд░рдХреНрд╖рд╛ рдЦреЛ рдЕрджреНрдпрддрди рдХреЗ рдЦрд┐рд▓рд╛рдл</a> "ред </p><br><p>  рдлрд┐рд░ рд╕реЗ рдпрд╛рдж рдХрд░реЗрдВ рдХрд┐ рдХреЙрд▓рдХреЙрдиреНрдЯреЗрдХреНрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рд▓реЗрдирджреЗрди рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред  рдпрджрд┐ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рдлрд▓ рд╣реЛрддреА рд╣реИ, рддреЛ рдПрдХ рдкреНрд░рддрд┐рдмрджреНрдзрддрд╛ рд╣реЛрддреА рд╣реИред  рдпрджрд┐ рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рд╡рд┐рдзрд┐ рдПрдХ рдЕрдЦрдВрдб рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИ, рддреЛ рд░реЛрд▓рдмреИрдХ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрджрд┐ рдХреБрдЫ рдЬрдЯрд┐рд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ, рддреЛ рдХреЙрд▓ рд╕рдВрджрд░реНрдн рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╕рдВрдкреВрд░реНрдг рд▓реЗрди-рджреЗрди рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рд╣рдордиреЗ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХреБрдЫ рднреА рдХрд░рдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдерд╛, рдбреЗрдЯрд╛ рджреВрд╖рд┐рдд рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЖрдкрдХреЛ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдмрдбрд╝реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдмреАрдЪ рдореЗрдВ рдПрдХ рдХрдореЗрдЯреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рд╡рд╣ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдкреНрд░рддрд┐рдмрджреНрдз рд╣реИ, рдЬрд┐рд╕реЗ <code>context.commit()</code> рдХрд╣рдХрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h2 id="testirovanie-metodov-rabotayuschih-s-dannymi">  рдбреЗрдЯрд╛ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг </h2><br><p>  рдЖрдЗрдП рдПрдХ рдпреВрдирд┐рдЯ рдЯреЗрд╕реНрдЯ рдмрдирд╛рдПрдВ рдЬреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ <code>OrderDto</code> рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛ рдкрджреНрдзрддрд┐ рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред </p><br><p>  JUnit5 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдФрд░ celesta- <code>celesta-unit</code> рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдЙрдкрд▓рдмреНрдз JUnit5 рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИред  рдкрд░реАрдХреНрд╖рдг рдХреА рд╕рдВрд░рдЪрдирд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@CelestaTest</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DocumentServiceTest</span></span></span><span class="hljs-class"> </span></span>{ DocumentService srv = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DocumentService(); <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">documentIsPutToDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CallContext context)</span></span></span><span class="hljs-function"> </span></span>{ OrderDto doc =... srv.postOrder(context, doc); <span class="hljs-comment"><span class="hljs-comment">//Check the fact that records are in the database OrderHeaderCursor header = new OrderHeaderCursor(context); header.tryFirst(); assertEquals(doc.getId(), header.getId()); OrderLineCursor line = new OrderLineCursor(context); line.setRange("order_id", doc.getId()); assertEquals(2, line.count()); } }</span></span></code> </pre> <br><p>  рдПрдиреЛрдЯреЗрд╢рди <code>@CelestaTest</code> рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЬреЛ JUnit5 рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИ, рд╣рдо рдкрд░реАрдХреНрд╖рдг рд╡рд┐рдзрд┐рдпреЛрдВ рдореЗрдВ <code>CallContext context</code> рдкреИрд░рд╛рдореАрдЯрд░ рдШреЛрд╖рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реИрдВред  рдпрд╣ рд╕рдВрджрд░реНрдн рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдХреНрд░рд┐рдп рд╣реИ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ (рдЗрди-рдореЗрдореЛрд░реА рдПрдЪ 2) рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдПрдХ рдкреНрд░реЙрдХреНрд╕реА рдореЗрдВ рд╕реЗрд╡рд╛ рд╡рд░реНрдЧ рдХреЛ рд▓рдкреЗрдЯрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рд╣рдо рдЗрд╕реЗ <code>new</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдмрдирд╛рддреЗ рд╣реИрдВ, рдФрд░ рд╡рд╕рдВрдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рд╕реНрдкреНрд░рд┐рдВрдЧ рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реЗрд╡рд╛ рдХреЛ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░реЗрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдмрд╛рдзрд╛ рдирд╣реАрдВ рд╣реИред </p><br><p>  рд╣рдо рдЗрд╕ рдзрд╛рд░рдгрд╛ рдХреЗ рддрд╣рдд рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг рдмрдирд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЙрдирдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд╕рдордп рддрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЦрд╛рд▓реА рд╣реЛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдЙрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рд╛рде рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЬрд╝рд░реВрд░рдд рд╣реИ, рдФрд░ рдЙрдирдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдмрд╛рдж рд╣рдо рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдХрд┐ рд╣рдордиреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ "рдХрдЪрд░рд╛" рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рд╣реИред  рдпреЗ рдкрд░реАрдХреНрд╖рдг рдмрд╣реБрдд рддреЗрдЬ рдЧрддрд┐ рд╕реЗ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред </p><br><p>  рдЖрдЗрдП рдПрдХ рджреВрд╕рд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рдПрдВ рдЬреЛ JSON рдХреЛ рдХреБрд▓ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рд▓реМрдЯрд╛рддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рд╣рдордиреЗ рдХрд┐рддрдиреЗ рдЙрддреНрдкрд╛рджреЛрдВ рдХрд╛ рдСрд░реНрдбрд░ рджрд┐рдпрд╛ рд╣реИред </p><br><p>  рдкрд░реАрдХреНрд╖рдг рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рджреЛ рдЖрджреЗрд╢ рд▓рд┐рдЦрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╡рд╣ рдирдП <code>getAggregateReport</code> рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдХреБрд▓ рдореВрд▓реНрдп рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reportReturnsAggregatedQuantities</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CallContext context)</span></span></span><span class="hljs-function"> </span></span>{ srv.postOrder(context, . . .); srv.postOrder(context, . . .); Map&lt;String, Integer&gt; result = srv.getAggregateReport(context); assertEquals(<span class="hljs-number"><span class="hljs-number">5</span></span>, result.get(<span class="hljs-string"><span class="hljs-string">"A"</span></span>).intValue()); assertEquals(<span class="hljs-number"><span class="hljs-number">7</span></span>, result.get(<span class="hljs-string"><span class="hljs-string">"B"</span></span>).intValue()); }</code> </pre> <br><p>  <code>getAggregateReport</code> рдореЗрдердб рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>getAggregateReport</code> рд╣рдо рдСрд░реНрдбрд░рдбреЗрдХреНрдЯреА рд╡реНрдпреВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рдЬреЛ, рдореБрдЭреЗ рдпрд╛рдж рд╣реИ, CelestaSQL рдлрд╛рдЗрд▓ рдореЗрдВ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> OrderedQty <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> item_id, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(qty) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> qty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> OrderLine <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> item_id;</code> </pre> <br><p>  рдЕрдиреБрд░реЛрдз рдорд╛рдирдХ рд╣реИ: рд╣рдо рдЙрддреНрдкрд╛рдж рдХреЛрдб рджреНрд╡рд╛рд░рд╛ рдорд╛рддреНрд░рд╛ рдФрд░ рд╕рдореВрд╣ рджреНрд╡рд╛рд░рд╛ рдЖрджреЗрд╢ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рд╕рд╛рд░рд╛рдВрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╡реНрдпреВ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдЖрд░реНрдбрд░рдХреНрдпреВрдЯреАрдХреЛрд░реНрд╕ рдХрд░реНрд╕рд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рд╣рдо рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЗрд╕ рдХрд░реНрд╕рд░ рдХреЛ рдШреЛрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЙрд╕ рдкрд░ рдкреБрдирд░рд╛рд╡реГрддрд┐ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╡рд╛рдВрдЫрд┐рдд <code>Map&lt;String, Integer&gt;</code> рдПрдХрддреНрд░ рдХрд░рддреЗ рд╣реИрдВ <code>Map&lt;String, Integer&gt;</code> : </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@CelestaTransaction</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAggregateReport</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CallContext context)</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Integer&gt; result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (OrderedQtyCursor ordered_qty = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderedQtyCursor(context)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (OrderedQtyCursor line : ordered_qty) { result.put(ordered_qty.getItem_id(), ordered_qty.getQty()); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><h2 id="materializovannye-predstavleniya-celesta">  рднреМрддрд┐рдХрддрд╛рд╡рд╛рджреА Celesta рджреГрд╢реНрдп </h2><br><p>  рдПрдХрддреНрд░рд┐рдд рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рджреГрд╢реНрдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдмреБрд░рд╛ рд╣реИ?  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛рдлреА рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рд╣рдорд╛рд░реЗ рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рддрд╣рдд рдПрдХ рд╕рдордп рдмрдо рд░рдЦрддрд╛ рд╣реИ: рдЖрдЦрд┐рд░рдХрд╛рд░, рдПрдХ рджреГрд╢реНрдп, рдЬреЛ рдПрдХ SQL рдХреНрд╡реЗрд░реА рд╣реИ, рдзреАрдореА рдФрд░ рдзреАрдореА рдЪрд▓рд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдЬрдорд╛ рд╣реЛрддрд╛ рд╣реИред  рдЙрд╕реЗ рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢ рдФрд░ рд╕рдореВрд╣ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕рд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛ рдЬрд╛рдП? </p><br><p>  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдЙрди рд╕рднреА рдорд╛рдирдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд▓рдЧрд╛рддрд╛рд░ рдордВрдЪ рд╕реНрддрд░ рдкрд░ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  MS SQL рд╕рд░реНрд╡рд░ рдореЗрдВ рднреМрддрд┐рдХреАрдХреГрдд (рдЕрдиреБрдХреНрд░рдорд┐рдд) рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИ, рдЬреЛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВ рдФрд░ рд╕реНрд░реЛрдд рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд▓реНрджреА рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдпрджрд┐ рд╣рдо "рдХреНрд▓реАрди" рдПрдордПрд╕ SQL тАЛтАЛрд╕рд░реНрд╡рд░ рдореЗрдВ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рдереЗ, рддреЛ рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдиреБрдХреНрд░рдорд┐рдд рджреГрд╢реНрдп рдХреЗ рд╕рд╛рде рджреГрд╢реНрдп рдХрд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╕рд┐рд░реНрдл рд╡рд╣реА рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА: рдПрдХрддреНрд░рд┐рдд рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдбреЗрдЯрд╛ рдХреЗ рдЬрдорд╛ рд╣реЛрдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдзреАрдорд╛ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдФрд░ рдПрдХрддреНрд░рд┐рдд рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рдо рдлрд┐рд▓рд╣рд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдЖрджреЗрд╢ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдбреЗрдЯрд╛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдирд╛ рдФрд░ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдЕрдзрд┐рдХ рдирд╣реАрдВ рдмрдврд╝реЗрдЧрд╛ред </p><br><p>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо Celesta рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ PostgreSQL рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  рднреМрддрд┐рдХ рд╢рдмреНрдж рдХреЛ рдЬреЛрдбрд╝рдХрд░ рджреГрд╢реНрдп рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> OrderedQty <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> item_id, <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>(qty) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> qty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> OrderLine <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> item_id;</code> </pre> <br><p>  рдЖрдЗрдП рд╕рд┐рд╕реНрдЯрдо рд╢реБрд░реВ рдХрд░реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдХреНрдпрд╛ рд╣реБрдЖред </p><br><p>  рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ <code>OrderedQty</code> рдЧрд╛рдпрдм рд╣реЛ рдЧрдпрд╛ рд╣реИ, рдФрд░ <code>OrderedQty</code> рддрд╛рд▓рд┐рдХрд╛ рджрд┐рдЦрд╛рдИ рджреА рд╣реИред  рдЙрд╕реА рд╕рдордп, рдЬреИрд╕рд╛ рдХрд┐ рдСрд░реНрдбрд░рд▓рд╛рдЗрди рддрд╛рд▓рд┐рдХрд╛ рдбреЗрдЯрд╛ рд╕реЗ рднрд░реА рд╣реБрдИ рд╣реИ, рдСрд░реНрдбрд░рдбреЗрдХреНрдЯреА рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА "рдЬрд╛рджреБрдИ рд░реВрдк рд╕реЗ" рдЕрдкрдбреЗрдЯ рдХреА рдЬрд╛рдПрдЧреА, рдЬреИрд╕реЗ рдХрд┐ рдСрд░реНрдбрд░рдбреАрдХрдЯреА рдПрдХ рджреГрд╢реНрдп рд╣реЛрдЧрд╛ред </p><br><p>  рдпрд╣рд╛рдВ рдХреЛрдИ рдЬрд╛рджреВ рдирд╣реАрдВ рд╣реИ рдЕрдЧрд░ рд╣рдо <code>OrderLine</code> рдЯреЗрдмрд▓ рдкрд░ рдмрдиреЗ рдЯреНрд░рд┐рдЧрд░реНрд╕ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВред  рд╕реЗрд▓реЗрд╕реНрдЯрд╛ рдиреЗ "рднреМрддрд┐рдХ рджреГрд╖реНрдЯрд┐" рдмрдирд╛рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛, рдХреНрд╡реЗрд░реА рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд┐рдпрд╛ рдФрд░ <code>OrderedQty</code> рддрд╛рд▓рд┐рдХрд╛ рдкрд░ <code>OrderedQty</code> рдмрдирд╛рдпрд╛ рдЬреЛ рдХрд┐ <code>OrderedQty</code> рдЕрдкрдбреЗрдЯ <code>OrderedQty</code> ред  CelestaSQL-file рдореЗрдВ рдПрдХ рднреА рдХреАрд╡рд░реНрдб - рднреМрддрд┐рдХреАрдХреГрдд - рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдХреЗ, рд╣рдордиреЗ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдЧрд┐рд░рд╛рд╡рдЯ рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд┐рдпрд╛, рдФрд░ рд╡реНрдпрд╛рдкрд╛рд░ рддрд░реНрдХ рдХреЛрдб рдХреЛ рднреА рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рдереА! </p><br><p> ,    ,   , . ┬л┬╗  Celesta    ,    ,  JOIN-,    GROUP BY.     ,  , ,     ,      . .     . </p><br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>       Celesta.     тАФ    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi455746/">https://habr.com/ru/post/hi455746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi455736/index.html">рд╣рд╛рдЗрдмреНрд░рд┐рдб рдФрд░ рдорд▓реНрдЯреА-рдкреАрдУрдбрдмреНрд▓реНрдпреВ рдЦрдирди рдХреЗ рд╕рд╛рде рдХреНрд░рд┐рдкреНрдЯреЛрдХрд░реЗрдВрд╕реА рдореЗрдВ рд╕рд╣рдорддрд┐</a></li>
<li><a href="../hi455738/index.html">рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдХрд╛ рдореБрджреНрд░реАрдХрд░рдг рдХрд░рдХреЗ рдПрдХ рдмрд┐рд▓рд┐рдпрди рдХреИрд╕реЗ рдмрдирд╛рдПрдВ?</a></li>
<li><a href="../hi455740/index.html">рдирд┐рд╡реЗрд╢ рдХрдВрдкрдиреА рдореЗрдВ рдорд╢реАрди рд╕реАрдЦрдирд╛: рд╣рдо рддрдХрдиреАрдХреА рд╕рд╣рд╛рдпрддрд╛ рдХреЙрд▓ рдХреЛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi455742/index.html">рд╕рдВрдЧреАрдд рдмрдирд╛рдирд╛: рдЬрдм рд╕рд░рд▓ рд╕рдорд╛рдзрд╛рди рдЧрд╣рд░реА рд╢рд┐рдХреНрд╖рд╛ рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi455744/index.html">рдмреЗрд╣рддрд░ рджреГрд╢реНрдп рдпрдерд╛рд░реНрдерд╡рд╛рдж рдХреЗ рд╕рд╛рде рднреВрд▓рднреБрд▓реИрдпрд╛ рдкрд░рд┐рджреГрд╢реНрдп рдкреАрдврд╝реА рдкреНрд░рдгрд╛рд▓реА [рдЬрд┐рдирдореЛ рдХрд┐рдо рджреНрд╡рд╛рд░рд╛ рд▓реЗрдЦ рдХрд╛ рдЕрдиреБрд╡рд╛рдж]</a></li>
<li><a href="../hi455754/index.html">рдПрдХ рдмрд╣рддреА рд╕реНрдЯреНрд░реИрдЯреЛрд╕реНрдЯреИрдЯ рдХреЗ рдЯреЗрд╕реНрдЯред рд░реЛрдЬреЛрдЬрд╝рд┐рди рдФрд░ рд▓реЛрд░рд╛ рдХрд╛ рд╕рдорддрд╛рдк рдордВрдбрд▓ рдореЗрдВ рдкреНрд░рдХреНрд╖реЗрдкрдг</a></li>
<li><a href="../hi455756/index.html">[рдПрд╣рд╕рд╛рди] рд╡реЗрдВ</a></li>
<li><a href="../hi455758/index.html">рд░рд┐рдЯреЗрд▓ рд░реЙрдХреЗрдЯ рдкрд░ рдЧреНрд░реЛрде рд╣реИрдХрд┐рдВрдЧ: рд╣рд╛рдЗрдкреЛрдереАрд╕рд┐рд╕ рд╕рд░реНрдЪ рд╕реЗ рд▓реЗрдХрд░ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рддрдХрдиреАрдХ рддрдХ</a></li>
<li><a href="../hi455760/index.html">SwiftUI рдХрд╛ рдЬрд╛рджреВ рдпрд╛ рдлрдВрдХреНрд╢рди рдмрд┐рд▓реНрдбрд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi455762/index.html">рдорд╛рд░реНрдХреЛрд╡ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>