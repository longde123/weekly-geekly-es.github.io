<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë®üèæ üåî üçí Sobre a PBR nos dedos üì• üç£ üíÉüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste texto, falarei um pouco sobre a PBR, um conceito de renderiza√ß√£o baseado em princ√≠pios f√≠sicos. O PBR √© usado em computa√ß√£o gr√°fica moderna, e f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre a PBR nos dedos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/465457/"><p><img src="https://habrastorage.org/webt/p7/wx/7w/p7wx7wdov7bj2wuvrn-tezyyani.png"></p><br><p>  Neste texto, falarei um pouco sobre a PBR, um conceito de renderiza√ß√£o baseado em princ√≠pios f√≠sicos.  O PBR √© usado em computa√ß√£o gr√°fica moderna, e falaremos sobre o que √© e como √© preparado, e quais s√£o as coisas importantes que vale a pena saber para quem vai ou j√° est√° lidando com a prepara√ß√£o de materiais.  A √™nfase √© voltada mais para jogos e mecanismos de jogos, onde esse conceito agora √© amplamente utilizado. </p><a name="habracut"></a><br><p>  Antes de passar a detalhes, algumas palavras para "cobrir a parte traseira". </p><br><p> Cada mecanismo e renderiza√ß√£o tem seu pr√≥prio pipeline de desenvolvimento, que geralmente √© √∫nico, como um floco de neve, e n√£o se cruza completamente com os outros.  Isso se deve, entre outras coisas, ao fato de a PBR ser uma metodologia relativamente jovem, e podemos dizer que estamos vendo a primeira gera√ß√£o de tais motores; os padr√µes est√£o apenas come√ßando a surgir, portanto, h√° diferen√ßas e nuances em diferentes implementa√ß√µes.  E tamb√©m porque o PBR n√£o √© um conjunto estrito de requisitos, mas uma dire√ß√£o geral de desenvolvimento. </p><br><p>  Ao escrever este texto, contei com minha pr√≥pria experi√™ncia, al√©m da teoria relativa a v√°rios pacotes: Unreal Engine 4, Marmoset Toolbag 3, Substance Painter.  Portanto, algumas coisas em outros pacotes parecer√£o diferentes, mas, em geral, a teoria √© universal. </p><br><p>  Mais detalhadamente, descreverei as coisas mais importantes e, no final, pelo princ√≠pio residual, mencionarei que no PBR √© usado, mas n√£o t√£o importante ou astuto no dispositivo. </p><br><p>  Uso intencionalmente os termos de uma forma n√£o traduzida, porque as fontes de informa√ß√µes mais atuais e completas est√£o sempre em ingl√™s e, se algu√©m senta e espera por uma tradu√ß√£o, ele automaticamente cai naqueles que est√£o atrasados ‚Äã‚Äãe dependentes dele.  Na minha opini√£o, √© correto lembrar imediatamente dos termos usados ‚Äã‚Äãno setor.  E google, √© claro. </p><br><p>  <em>O material foi preparado com a participa√ß√£o da comunidade do Maya3D Telegram.</em> </p><br><h2>  Sobre o b√°sico </h2><br><p>  Primeiro, vamos aprofundar um pouco a hist√≥ria.  A experi√™ncia sugere que √© melhor explicar imediatamente o significado dos termos e conceitos b√°sicos, mas se voc√™ j√° os conhece, pode pular esta se√ß√£o com seguran√ßa. </p><br><blockquote>  Al√©m disso, voc√™ notar√° que a PBR empresta termos de qualquer lugar, alterando-os um pouco, e isso √© bom. </blockquote><p>  PBR √© uma abrevia√ß√£o de <em>renderiza√ß√£o com base f√≠sica</em> , que significa aproximadamente <em>visualiza√ß√£o fisicamente correta</em> , e essas palavras falam por si.  √Äs vezes, o termo PBS √© usado (aqui a <em>renderiza√ß√£o √©</em> alterada para <em>sombreador</em> ), em alguns lugares h√° at√© PBT (e aqui a <em>texturiza√ß√£o</em> aparece).  No entanto, a diferen√ßa √© m√≠nima - √© uma quest√£o de tradi√ß√£o, e o termo PBR √© tradicionalmente usado com mais frequ√™ncia. </p><br><p>  Os √∫ltimos anos t√™m sido o mainstream dos sistemas de renderiza√ß√£o modernos, do tempo real e dos jogos √†s chamadas renderiza√ß√µes offline.  O nome implica uma certa ader√™ncia √†s leis da f√≠sica, √†s leis do mundo real, e esse esclarecimento, por assim dizer, nos diz: antes n√£o era assim.  Vamos descobrir como foi e como se tornou, e como tudo isso veio para n√≥s. </p><br><p>  Nos gr√°ficos tridimensionais, desde o in√≠cio de sua vida, foram implementadas v√°rias abordagens para exibir na tela, at√© ficar claro que a reprodu√ß√£o dos mecanismos da realidade produz resultados mais realistas, por assim dizer. </p><br><blockquote>  Aproximadamente a mesma hist√≥ria aconteceu com a anima√ß√£o esquel√©tica dos personagens, que "enterraram" o v√©rtice. </blockquote><p>  Se modelarmos a realidade, vamos usar suas leis e arquitetura, automatizando constantes e transferindo parte do trabalho para o software.  As renderiza√ß√µes est√£o se esfor√ßando cada vez mais para trabalhar da maneira que nossa realidade funciona, com cada gera√ß√£o de ferro introduzindo novas abordagens que permitem abandonar falsifica√ß√µes. </p><br><blockquote>  Renderiza√ß√µes offline s√£o renderiza√ß√µes que n√£o funcionam em tempo real, por exemplo, Vray ou Arnold. </blockquote><p>  Por alguma raz√£o, provavelmente, ele restringe o v√¥o da fantasia e interrompe as filmagens da estiliza√ß√£o, mas <em>provavelmente</em> √© isso. </p><br><p>  Por outro lado, truques e falsifica√ß√µes est√£o se movendo para um novo n√≠vel, que tamb√©m √© progresso. </p><br><p>  No mundo real que nos rodeia, o campo eletromagn√©tico √© a base para a intera√ß√£o em uma escala maior que a at√¥mica e menor que a planet√°ria.  Tudo o que vemos e podemos tocar √© acess√≠vel a n√≥s, gra√ßas a ele.  O homem √© um ser imperfeito, n√£o podemos ver a maior parte do espectro eletromagn√©tico, mas com ele existem muitas sutilezas que usamos em virtude da compreens√£o.  Tudo o que vemos ao nosso redor √© luz e seus caprichos.  Entrada agrad√°vel, e mais importante, √≥bvio, certo? </p><br><blockquote>  A grande maioria das pessoas √© tricromata, mas h√° uma pequena porcentagem de mutantes de tetracromat que distinguem mais tons e v√™em o mundo mais diverso.  E mais frequentemente s√£o mulheres. </blockquote><p>  Na PBR, a luz se tornou menos convencional do que antes.  O BxDF descreve n√£o apenas como atinge a superf√≠cie, mas tamb√©m como √© refletido a partir dela, dadas as caracter√≠sticas dos materiais.  Isso permite que voc√™ descreva com mais precis√£o a cena e transmita o resultado, o mais pr√≥ximo poss√≠vel da realidade. <br>  Uma das principais mudan√ßas que a PBR trouxe √© a versatilidade dos materiais em qualquer ilumina√ß√£o.  Os materiais configurados corretamente sempre parecer√£o corretos em qualquer cena. </p><br><p>  Na gera√ß√£o anterior de renderiza√ß√µes, a micro-superf√≠cie e a natureza do alargamento, os tipos de materiais condutor / isolador n√£o foram levados em considera√ß√£o;  a reflex√£o difusa carregava sombra parcial e at√© brilho ofuscado;  n√£o havia valores de reflex√£o do mundo real;  Os materiais n√£o eram universais para nenhuma cena e ilumina√ß√£o. </p><br><h2>  Sobre a subst√¢ncia </h2><br><p>  Existem dois tipos: </p><br><ul><li>  condutores ou metais - <em>condutores</em> ; </li><li>  isoladores ou diel√©tricos, isto √©, n√£o metais - <em>isoladores</em> . </li></ul><br><p>  A classifica√ß√£o √© tirada do mundo real (com simplifica√ß√µes) e tenta seguir o nome. <br>  Os condutores conduzem corrente el√©trica, possuem uma treli√ßa de cristal e outras "alegrias" do curso escolar de f√≠sica.  Eles n√£o t√™m reflex√£o difusa e dispers√£o de subsuperf√≠cie, sua superf√≠cie n√£o dispersa a luz, √© imperme√°vel a ela, mas absorve uma parte dela, refletindo ondas de comprimentos espec√≠ficos - um brilho de cor. </p><br><blockquote>  No entanto, a corrente n√£o √© importante para a PBR.  A pele tamb√©m conduz corrente, mas na PBR n√£o √© metal, o que significa que n√£o √© um condutor. </blockquote><p>  Os isoladores dispersam a luz, que penetra na superf√≠cie;  eles t√™m reflex√£o difusa e dispers√£o na superf√≠cie, brilham com luz branca. <br>  Ambos os tipos de materiais t√™m um efeito Fresnel. </p><br><h2>  Sobre os gasodutos </h2><br><p>  Tradicionalmente, temos dois oleodutos para materiais e sua prepara√ß√£o: <em>especular</em> e <em>metalicidade</em> .  Geralmente, entende-se que no <em>especular</em> existe um mapa de imagem espelhada correspondente, enquanto no <em>metal</em> n√£o existe, mas existe uma m√°scara de metalicidade, e isso pode ser feito. </p><br><p>  Claro, nem tudo √© t√£o simples aqui. </p><br><p>  O pipeline <em>especular</em> realmente tem um mapa <em>especular</em> , que controla a intensidade e a cor do brilho em <em>F0</em> , cujos valores est√£o completamente nas m√£os do artista e n√£o possui constantes internas no shader.  √Äs vezes, Fresnel √© controlado separadamente, <em>albedo</em> controla apenas cores, <em>brilho / rugosidade</em> controla a natureza das reflex√µes, tudo aqui √© simples. </p><br><p>  <em>A metalicidade</em> n√£o possui um mapa de intensidade de brilho separado; esses valores s√£o costurados em shaders dentro de 2-5% para diel√©tricos e 70-100% para condutores.  A rela√ß√£o das cartas aqui √© um pouco mais alta: <em>albedo</em> , <em>metalidez</em> e <em>rugosidade das</em> cartas afetam a cor, a intensidade e a natureza da reflex√£o especular no total.  H√° um cart√£o a menos nesse pipeline e, levando em considera√ß√£o a possibilidade de empacotar cart√µes em escala de cinza em um RGB, esses materiais ocupam menos mem√≥ria do sistema. </p><br><p>  A escolha de renderiza√ß√µes modernas caiu quase completamente na <em>metalicidade,</em> em vista de sua efici√™ncia e maior automa√ß√£o, porque esses shaders cuidam dos c√°lculos corretos de Fresnel.  Embora <em>especular</em> d√™ mais controle, esse controle geralmente √© redundante e leva mais tempo e esfor√ßo com resultados semelhantes.  Portanto, falaremos especificamente sobre o oleoduto de <em>metalicidade</em> em geral. </p><br><p><img src="https://habrastorage.org/webt/4y/nx/vn/4ynxvnwcpw7607fqx4hb4zl0q1c.png"><br>  <em>Pipelines e mapas de diferen√ßas.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><h2>  Sobre o BRDF e o GGX </h2><br><p>  A base da diferen√ßa entre o PBR da gera√ß√£o anterior na mudan√ßa de BxDF.  BxDF √© uma <em>fun√ß√£o de distribui√ß√£o X bidirecional</em> , que soa aproximadamente como uma <em>fun√ß√£o de capacidade X de dois feixes</em> .  E essa fam√≠lia de fun√ß√µes tem v√°rias habilidades: √© pelo menos <em>reflet√¢ncia</em> , <em>transmiss√£o</em> e <em>dispers√£o</em> - reflex√£o, transmiss√£o e dispers√£o, respectivamente (na literatura e nos artigos especializados, o artista mais frequentemente encontra a vers√£o do BRDF). </p><br><p>  Essas fun√ß√µes descrevem o comportamento do feixe ao interagir com a superf√≠cie: como ele se espalha (isto √©, penetra na camada superior e retorna), √© espelhado ou passa atrav√©s de um material transparente. </p><br><p>  Em nossa hist√≥ria, o BxDF est√° intimamente relacionado √† <em>teoria dos microfacetos</em> , que tamb√©m possui muitas implementa√ß√µes, geralmente nomeadas com o nome dos autores: Cook-Torrance, Ashikhmin-Shirley, GGX e assim por diante.  O GGX √© apenas uma das implementa√ß√µes da <em>teoria</em> dos <em>microfacetos</em> - a teoria das <em>micro-superf√≠cies</em> , usada em quase todos os lugares.  Apresenta um modelo simplificado da micro-superf√≠cie, que em conjunto com o BxDF imita a rea√ß√£o √† luz para todos os tipos de intera√ß√£o. </p><br><blockquote>  Faceta tamb√©m pode ser traduzida como uma "face", o que tamb√©m faz sentido.  Em uma teoria simplificada, uma superf√≠cie √© uma cole√ß√£o de rostos pequenos. </blockquote><p>  O GGX n√£o √© descriptografado, o conjunto de letras √© retirado das vari√°veis ‚Äã‚Äãusadas nas f√≥rmulas (ou o sobrenome de algu√©m √© desordenado - a hist√≥ria o oculta).  Os artistas podem ver esse termo nas configura√ß√µes de par√¢metros de <em>rugosidade / brilho</em> . </p><br><blockquote>  Por exemplo, um de G √© a fun√ß√£o de m√°scara de sombreamento bidirecional, uma fun√ß√£o de sombreamento / m√°scara de dois feixes. </blockquote><p><img src="https://habrastorage.org/webt/_f/fj/gc/_ffjgcfumvsq6sgwhssekpffawa.png"><br>  <em>Microsuperf√≠cie e seu efeito na reflex√£o especular.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><h2>  Conserva√ß√£o de energia </h2><br><p>  <em>A conserva√ß√£o de energia</em> tamb√©m √© uma das constantes fundamentais da PBR e significa que a superf√≠cie n√£o pode retornar mais luz do que recebe.  Em particular, <em>albedo</em> e <em>reflex√£o especular se</em> somam, e se <em>especular √©</em> mais brilhante, <em>albedo √©</em> menos brilhante e vice-versa.  Em geral, isso √© algo automatizado nos motores; √†s vezes √© poss√≠vel lig√°-lo e deslig√°-lo, por exemplo, no Marmoset Toolbag. </p><br><h2>  Sobre Fresnel </h2><br><p>  Augustin-Jean Fresnel (Augustin-Jean Fresnel), f√≠sico franc√™s do s√©culo XIX, criador da teoria das ondas de luz e montes de outras coisas legais, descreveu o efeito do pr√≥prio nome, que consiste no fato de que o n√≠vel de luz refletido de uma superf√≠cie depende diretamente do √¢ngulo de vis√£o dessa superf√≠cie.  Em um √¢ngulo reto, ou seja, <em>F0</em> , obtemos o n√≠vel m√≠nimo de luz refletida especularmente dispon√≠vel para o material.  E quanto maior o √¢ngulo, mais luz capturaremos, aproximando-se de 100%. </p><br><p>  De acordo com esse efeito, qualquer material tem um brilho, em princ√≠pio, tudo brilha, basta encontrar o √¢ngulo certo. </p><br><p>  Quando falamos sobre a intensidade do brilho em geral, sempre queremos dizer o brilho em <em>F0</em> - √© isso que √© controlado pelo artista atrav√©s dos par√¢metros <em>albedo / rugosidade / metalidade</em> . <br><img src="https://habrastorage.org/webt/qb/mc/3d/qbmc3dtizu2o3dtyaeadoaknoh8.png"><br>  <em>Esquema do efeito Fresnel.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><h2>  Sobre reflex√£o difusa </h2><br><h3>  Albedo.  Difusa  Cor base. </h3><br><p><img src="https://habrastorage.org/webt/o_/1b/qd/o_1bqdvlsufu0sjpawl6jvswr_s.png"><br>  <em>Esquema de intera√ß√£o em reflex√£o difusa.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><p>  Esta √© a luz que cai na superf√≠cie e √© parcialmente absorvida por ela, e parcialmente refletida, espalhando-se aleatoriamente nas camadas superiores e retornando ao observador a cor dessa mesma superf√≠cie.  √Äs vezes, nesse caso, eles dizem que √© pintado na cor da superf√≠cie, mas estamos falando de corre√ß√£o f√≠sica, por isso vale a pena repetir - a luz n√£o pinta, a parte do espectro que n√£o foi absorvida e n√£o perdida retorna para n√≥s.  A parte da luz vis√≠vel que √© absorvida pela superf√≠cie no mundo real entra em energia t√©rmica, e no PBR isso tamb√©m pode ser levado em considera√ß√£o, mas depende muito do shader usado e, neste caso, √© secund√°rio. </p><br><p><img src="https://habrastorage.org/webt/8m/az/h6/8mazh6-uv3x5_ygatmtgar0tyta.png"><br>  <em>Absor√ß√£o da luz e retorno ao observador apenas de ondas n√£o absorvidas.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><p>  O comportamento do material durante a reflex√£o difusa √© determinado pelo mapa de <em>albedo</em> , ou <em>cor de base</em> , ou mesmo <em>difuso em</em> alguns lugares.  A diferen√ßa nesses nomes decorre da tradi√ß√£o e dos diferentes pipelines de desenvolvimento de mecanismo, mas o comportamento √© o mesmo em todo lugar - em qualquer caso, deveria ser.  A cor deve ser capturada no mapa de albedo, com a apar√™ncia de um √¢ngulo reto em rela√ß√£o √† superf√≠cie da c√¢mera e com ilumina√ß√£o 100% branca.  Sem sombras, penumbra, brilho e tudo o que n√£o √© espremido na defini√ß√£o de "cor pura".  Essa √© a principal diferen√ßa entre a reflex√£o difusa atual no PBR e a gera√ß√£o anterior de renderizadores, onde o termo <em>difuso</em> tamb√©m <em>√©</em> usado, mas de uma maneira ligeiramente diferente. </p><br><blockquote>  Uma fotografia de um objeto com um filtro de polariza√ß√£o sob ilumina√ß√£o direta captura seu <em>albedo</em> , por exemplo.  A polariza√ß√£o remove o brilho. </blockquote><p>  Parece que n√£o h√° mais nada a dizer sobre cores, mas ainda h√° sutilezas. </p><br><p>  O mapa de reflex√£o difusa afeta a renderiza√ß√£o de metais puros na tubula√ß√£o de metalidade, manchando o destaque na cor correspondente.  Al√©m disso, o mapa de <em>albedo</em> afeta diretamente a <em>reflet√¢ncia especular</em> para metais, permitindo que voc√™ o varie em combina√ß√£o com um cart√£o de <em>metalidade</em> .  Este √© um design bastante complicado, mas, em geral, √© assim: quando fabricamos o material do isolador, desenhamos uma m√°scara de <em>metal</em> preta e o shader atribui um brilho a <em>F0</em> de 4%.  Quando fazemos transi√ß√µes de <em>metal</em> at√© branco, ou seja, metal puro, o brilho no mapa de <em>albedo</em> afeta a intensidade de seu brilho.  Quanto mais brilhante a cor no <em>albedo</em> , mais intenso √© o brilho, que se aproxima de um valor de 100%.  N√£o temos controle sobre o n√≠vel de brilho do isolador.  Sup√µe-se que a diferen√ßa de 2-4% seja acr√≠tica e mascarada atrav√©s da <em>rugosidade</em> ou ajustada atrav√©s da <em>reflet√¢ncia especular</em> , se necess√°rio e poss√≠vel. </p><br><blockquote>  Este exemplo √© descrito levando em considera√ß√£o os produtos UE4 shaders, Marmoset Toolbag e Substance.  Mas no geral funciona em qualquer lugar. </blockquote><p>  O efeito art√≠stico da cor da superf√≠cie n√£o pode ser subestimado.  Muitas vezes isso escapa √† aten√ß√£o dos artistas, e eles fazem pl√°stico preto preto para torn√°-lo "como na vida".  Mas geralmente n√£o h√° cores monol√≠ticas na realidade, e varia√ß√µes de cores est√£o quase sempre presentes no material, isso deve ser entendido e utilizado. </p><br><p>  A reflex√£o difusa √© descrita por uma placa RGB, ou em termos de mecanismo, por uma matriz do Vector3, que √© l√≥gica, estamos falando de cores. </p><br><h3>  Valida√ß√£o PBR </h3><br><p>  Como o PBR busca par√¢metros e caracter√≠sticas reais, os valores do brilho do <em>albedo</em> devem ser validados e reduzidos a intervalos de valores reais, mas eles n√£o podem cair abaixo de 30-50 sRGB e subir acima de 240 para diel√©tricos.  No caso de metais puros, o valor de 240 pode aumentar para 255, porque esse n√£o √© o valor da reflex√£o difusa, mas o valor da <em>reflet√¢ncia especular</em> . </p><br><p>  Mas, √© claro, existem sutilezas aqui. </p><br><p>  Por exemplo, uma das subst√¢ncias mais escuras do mundo comum √© o carv√£o.  O valor do brilho do <em>albedo</em> , traduzido para sRGB, √© 50, e isso est√° pr√≥ximo do limite m√≠nimo que a PBR pode pagar por diel√©trico.  Os valores abaixo est√£o muito escuros e podem n√£o parecer corretos sob diferentes condi√ß√µes de ilumina√ß√£o. </p><br><blockquote>  H√° pouco tempo, algumas pessoas ficaram tensas e criaram um material que absorve 99% da luz e parece um buraco negro no espa√ßo. </blockquote><p>  Por que isso √© importante? </p><br><p>  Porque reflex√µes difusas e especulares funcionam em pares.  Valores muito escuros de <em>albedo</em> afetar√£o a diferen√ßa entre o pr√≥prio <em>albedo</em> e a <em>reflet√¢ncia especular</em> , e os artistas ter√£o que ‚Äútorcer‚Äù a luz para normalizar o brilho em <em>F0</em> e a reflex√£o difusa, o que implicar√° a superexposi√ß√£o de toda a cena, e os materiais acabar√£o se tornando n√£o universais e se aplicar√£o apenas a uma determinada ilumina√ß√£o. </p><br><p>  Por que isso n√£o importa? </p><br><p>  Porque isso depende da composi√ß√£o.  Se a apresenta√ß√£o de um modelo separado for renderizada e n√£o houver ilumina√ß√£o global e reflexo de reflex√£o na cena, mas houver ilumina√ß√£o HDR, em geral, voc√™ poder√° criar valores fora de 30-50 sRGB.  E h√° tamb√©m uma fera semi-m√≠tica "arte".  "O que importa mais n√£o √© a corre√ß√£o f√≠sica", diz ele, "mas a percep√ß√£o".  E aqui √© poss√≠vel e √†s vezes necess√°rio violar as leis que s√£o dif√≠ceis de estabelecer. </p><br><blockquote>  √â uma quest√£o altamente controversa em rela√ß√£o √† admissibilidade de violar as leis da PBR e combinar a realidade.  Em algum lugar, ele atua nas m√£os da percep√ß√£o e em algum lugar √© necess√°rio manter todos os padr√µes.  Exemplos e discuss√£o est√£o al√©m do escopo deste texto. </blockquote><p>  Em geral, a manuten√ß√£o do limite de brilho <em>albedo</em> permanece na consci√™ncia do artista ou de seu l√≠der de arte, e grande parte do trabalho na PBR que existe hoje n√£o passa nessa valida√ß√£o no limite inferior, o que n√£o impede que sejam qualitativos e corretos em um olhar inexperiente.  A diferen√ßa se torna vis√≠vel apenas se voc√™ verificar os valores e subir at√© o limite inferior ou se um modelo executado separadamente for colocado em uma cena com a ilumina√ß√£o correta. </p><br><p>  Mas mesmo se n√£o nos preocuparmos com a valida√ß√£o, n√£o use cor preta pura a 0 sRGB para diel√©trico. </p><br><p>  A valida√ß√£o de PBR √© fornecida por v√°rias ferramentas nos mecanismos e nos editores.  Por exemplo, no Substance Painter, h√° um filtro que funciona no topo de toda a pilha de camadas, verificando os valores. </p><br><p><img src="https://habrastorage.org/webt/vt/7l/sk/vt7lsk-qarr0_h1xcytgync8-yk.png"><br>  <em>Valida√ß√£o de PBR no Substance Painter.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><p><img src="https://habrastorage.org/webt/8_/c_/fc/8_c_fcnsy5-zl9aw4tedt-d0pgg.png"><br>  <em>Fa√ßa um gr√°fico dos valores de intensidade para alguns materiais.</em>  <em>Dados extra√≠dos de S√©bastien Lagarde e DONTDNOD.</em> </p><br><h2>  Sobre o reflexo do espelho </h2><br><h3>  Reflet√¢ncia especular </h3><br><blockquote>  Specular √© uma palavra latina que se traduz como "espelho". </blockquote><p><img src="https://habrastorage.org/webt/ts/ot/d6/tsotd6j2ix5xr3jp4btcb_v2b6c.png"><br>  <em>Esquema da intera√ß√£o da luz na reflex√£o especular.</em>  <em>Wes McDermott e aleg√≥rico.</em> </p><br><p>  Refere-se √† parte do fluxo de luz que √© refletida da superf√≠cie de acordo com a lei do √¢ngulo de incid√™ncia e retorna ao observador na √≠ntegra.  <em>A reflet√¢ncia especular</em> , ou reflex√£o especular, √© ofuscante e est√° intimamente relacionada √†s caracter√≠sticas da micro-superf√≠cie.  √â encontrado nos dois oleodutos, mas √© controlado diretamente no oleoduto <em>especular</em> e indiretamente na <em>metalicidade</em> . </p><br><p>  O fato √© que o controle direto do brilho √© uma coisa muito vil.  Lembramos de condutores e isoladores, mas poucos artistas sem uma mesa diante dos olhos se lembram dos valores exatos de intensidade e tamb√©m h√° exce√ß√µes na forma de pedras preciosas.  Tendo acesso a essa configura√ß√£o de sombreador, √© muito f√°cil afastar-se dos valores fisicamente corretos em algum lugar do plano astral, quebrando toda a faixa visual e at√© mesmo preparar materiais sobre nossos ombros e a mem√≥ria da placa de v√≠deo √© outra placa. </p><br><p>  Al√©m disso, as medi√ß√µes dos valores do mundo real se encaixam em uma pequena estrutura que pode ser automatizada, o que eles fizeram na <em>metalicidade</em> , tendo selecionado o controle direto e a necessidade de pensar nisso tamb√©m. </p><br><p>  Em um pipeline <em>especular</em> , o par√¢metro <em>especular</em> √© controlado por um mapa em escala de cinza nos valores de 0 a 255, uma cor linear ou um par√¢metro escalar. </p><br><blockquote>  O par√¢metro escalar aqui √© o valor definido para o espa√ßo bidimensional projetado no modelo.  Em outras palavras, quando voc√™ move o controle deslizante no Marmoset para especular, esse √© o par√¢metro escalar. </blockquote><p>  Em uma tubula√ß√£o de <em>metalidade</em> , geralmente n√£o h√° controle direto da intensidade do brilho atrav√©s do par√¢metro especular.          F0: 4-5%    80-100%   ,     .            ,         <em>roughness</em>  <em>albedo</em> . </p><br><h3> Cavity </h3><br><p>  <em>specular reflectance</em>     ,    ,      ,     ,     ,   .      ,       ,     .      <em>cavity</em> ;     ,     .  UE4, ,   specular  ,       ,   ,      <em>specular</em> ,   ,     <em>cavity</em>      0-4%.      Substance-   .         ,           .    . </p><br><p><img src="https://habrastorage.org/webt/if/aa/3l/ifaa3lo0zh7jbqeg9xh9kbjefyq.jpeg"></p><br><p><img src="https://habrastorage.org/webt/dc/yd/8n/dcyd8nfosw2l6ublorhoy1qptve.jpeg"><br> <em>  cavity  specular reflectance.              .        cavity         ,      .   Marmoset Toolbag 3</em> </p><br><h2>   </h2><br><h3> Metalness </h3><br><p>   PBR   ,      -    .         ,      ‚Äî       -  .    2-5%  ,  ‚Äî 70-100%,        . </p><br><p>  ,     ,             , ,       ,       -  <em>metalness</em> .      ,       .                 ,     UE4      Unity.    ( ¬´  ¬ª) ‚Äî       :   <em>texel density</em>      . </p><br><blockquote>   /    specular-,       ,   . </blockquote><p><img src="https://habrastorage.org/webt/yy/u5/_3/yyu5_3xbui07l_eya7jpeweb1tq.png"><br> <em>  /. Wes McDermott  Allegorithmic.</em> </p><br><p>   PBR,      .       ,    ,    -   ,  ,       .    <em>specular</em> -       RGB-   <em>specular</em> ,     ,   <em>metalness</em>      <em>albedo</em> . ,   <em>metalness</em> ,    ,     ,  ,  . . </p><br><p> ,     ‚Äî  ,    .     ,       ,   . </p><br><p>  ,       .           <em>albedo</em>  , ,  Substance Painter,   ,  .    ,   : <em>albedo</em>          . </p><br><p>   -  0-255          . </p><br><h2>   </h2><br><h3> Roughness. Glossiness. Smoothness. </h3><br><p>         ,     ,  ,     .   ,    ,     ,     .  PBR     <em>microfacet theory</em>    BRDF,            ,     <em>roughness</em> ,  <em>gloss</em> ,   <em>smoothness</em> -. </p><br><blockquote>   ‚Äî     roughness    .       . </blockquote><p>       ,   roughness   ‚Äî   ,            ,   ‚Äî ,       ,    ,   .   <em>gloss</em>   . </p><br><p>  specular    (    <em>metalness</em> ),      .          ,     ,           ,   ,      . <br> <em>Roughness</em>      ,     ,      ,      ‚Äî    , ,  . </p><br><p>   grayscale-  0-255,    . </p><br><p><img src="https://habrastorage.org/webt/mn/fw/0p/mnfw0pktzv7wrjsq340sbxzmb1o.png"><br> <em>Roughness-   . Wes McDermott  Allegorithmic.</em> </p><br><h2>   </h2><br><h3> Normal bump </h3><br><p>  ,    ,       .  ‚Äî  ,   ,        . </p><br><blockquote>       ,   . </blockquote><p>       : <em>vertex normal</em>  <em>face normal</em> , ,     .       ,     <em>hard edges</em> . </p><br><blockquote> , Zbrush      ,        .      ,     . <br><br>  <em>hard/soft edges</em>    ,    ,  <em>hard edges</em>       -   .      UV,    .  PBR   ,       -. </blockquote><p>         .  <em></em>      .        ¬´¬ª,      ‚Äî   ,      3+n .     <em>face</em>    . <em>Face normal</em>    ‚Äî  . </p><br><blockquote>   ,    3+n     . </blockquote><p>     ,   ,     .      ,     ¬´¬ª         .        ,     ,       .  ,      ,   ( <em>tangent space</em> ,  )   ( <em>object space</em> ,  ) ,       ,  . </p><br><p>    ( <em>bump</em> )  ,     ,        .        ,    ‚Äî <em>normal bump</em>     bump.      ‚Äî  .        ,   <em>bump</em> ,  , .           ,  ,     Mikk,       (  Y,     ). <br> <em>Normal bump</em>    PBR-,   ,        ‚Äî ,   .   ,        .             ,      .    ,    ¬´ ¬ª;  ,   ,               .      Rockstar   RAGE ‚Äî  GTAIV/V, RDR1/2,   Star Citizen   CryEngine/Lambeyard.   ,   , ,     ,              . </p><br><p> PBR     . </p><br><h2>    </h2><br><h3> Subsurface scattering, SSS. </h3><br><p>  ,    ,           : ,    .       ,    ,       ,    . </p><br><p>    , SSS,  ,    :   (      )       RGB-.      . </p><br><p><img src="https://habrastorage.org/webt/jc/ai/8f/jcai8frgs4rpzcqduwvnwedw988.png"><br> <em>  SSS.    .</em> </p><br><h2>   </h2><br><h3> Translucency </h3><br><p>  ,      SSS,        . <em>Translucency</em> ‚Äî   ,       . <em>Translucency</em>  -    . </p><br><p><img src="https://habrastorage.org/webt/8q/-d/ww/8q-dww9kndq-jhkolumjyqgjk5q.png"><br> <em>        :  ,    .    .</em> </p><br><h2>    </h2><br><h3> Ambient occlusion </h3><br><p>    <em>ambient occlusion</em> ‚Äî    ,        .       <em>  </em> ,      . AO ‚Äî             ,     .    <em>cavity</em>  PBR-,      .     PBR-    ,     .     AO,               .  ,  SSAO ( <em>screen space ambient occlusion</em> ), HBAO ( <em>horizon based ambient occlusion</em> )    ,     .    ,       ‚Äî    <em>deferred rendering</em> . </p><br><p>    , -   PBR     ,           ,  <em>roughness</em> ,       . </p><br><p><img src="https://habrastorage.org/webt/ad/lv/gw/adlvgwyydcpwgxm_8_uv9vcfsty.png"><br> <em>  ,     ,   . : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.gamingscan.com/what-is-ambient-occlusion/</a></em> </p><br><p> ,   RTX        GI      ,       . </p><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O que ler </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como este artigo n√£o √© um guia ou manual detalhado, mas um memorando, para um estudo detalhado do t√≥pico, voc√™ pode ler os materiais nos links abaixo. </font></font></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apresenta√ß√£o GGX, um monte de teoria e matem√°tica</a> </p><br><p>  Guias aleg√≥ricos de PBR: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-2</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Theory by Marmoset</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria do mecanismo de filamentos</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Descri√ß√£o e implementa√ß√£o de PBR no 3dCoat</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Documenta√ß√£o UE4</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apresenta√ß√£o de Sebastien Lagarde</a> </p><br><p>  Se n√£o est√° claro quem √© Sebastian Lagarde, ent√£o aqui est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma extensa apresenta√ß√£o sobre Frostbite</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Documenta√ß√£o do Unity</a> </p><br><p>  <em>Introdu√ß√£o fixa, obrigado pela dica para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">zhovner</a> .</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt465457/">https://habr.com/ru/post/pt465457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt465441/index.html">LuaVela: implementa√ß√£o Lua 5.1 baseada em LuaJIT 2.0</a></li>
<li><a href="../pt465445/index.html">Notas do provedor de IoT. Maldi√ß√£o por Sa√≠da de Impulso</a></li>
<li><a href="../pt465449/index.html">Como os problemas do Mail.ru e do FSB foram forjados pela reputa√ß√£o de Pavel Durov e pela f√© no Telegram</a></li>
<li><a href="../pt465453/index.html">3 de setembro - Dia do CTO em S√£o Petersburgo</a></li>
<li><a href="../pt465455/index.html">Trabalhe com incidentes, melhorando a resposta a incidentes e o valor da d√≠vida t√©cnica. Backend United 4 materiais mitap: Okroshka</a></li>
<li><a href="../pt465459/index.html">Uma Breve Hist√≥ria da Videoconfer√™ncia: Do In√≠cio ao Uso Comercial Total</a></li>
<li><a href="../pt465461/index.html">Digita√ß√£o est√°tica em um aplicativo React</a></li>
<li><a href="../pt465463/index.html">Bom nunca √© barato. Mas √© gr√°tis</a></li>
<li><a href="../pt465467/index.html">Toda a verdade sobre o RTOS. Artigo 32. Migra√ß√£o do Nucleus SE: recursos e compatibilidade n√£o realizados</a></li>
<li><a href="../pt465471/index.html">Voc√™ tentou registrar seu site como uma publica√ß√£o de rede em Roskomnadzor?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>