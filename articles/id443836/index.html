<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛥️ 🌜 🏳️‍🌈 Menggunakan Waves Akun Pintar dan Aset Cerdas di Instrumen Keuangan 🔠 🧝🏼 👩🏿‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya , kami melihat beberapa kasus menggunakan akun pintar dalam bisnis - termasuk program lelang dan loyalitas. 
 Hari ini kita a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menggunakan Waves Akun Pintar dan Aset Cerdas di Instrumen Keuangan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/waves/blog/443836/"><img src="https://habrastorage.org/webt/og/ub/mr/ogubmruoxy2myy1xvnnh64axnec.png" alt="gambar"><br><br>  <i>Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> sebelumnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">,</a> kami melihat beberapa kasus menggunakan akun pintar dalam bisnis - termasuk program lelang dan loyalitas.</i> <i><br></i>  <i>Hari ini kita akan berbicara tentang bagaimana akun pintar dan aset pintar dapat meningkatkan transparansi dan keandalan instrumen keuangan seperti opsi, futures, dan tagihan.</i> <i><br></i> <a name="habracut"></a><br>  <b>Opsi</b> <br><br>  Opsi adalah kontrak bursa yang memberi pembeli hak untuk membeli aset pada harga tertentu atau sebelum tanggal tertentu, tetapi tidak mewajibkannya untuk melakukannya. <br><br>  Pelaksanaan opsi dapat sebagai berikut: <br><br>  Kami menggunakan aset pintar untuk opsi itu sendiri sebagai alat dan akun pintar untuk peserta yang bertindak sebagai pertukaran dan mengeluarkan opsi.  Anggota bursa berjanji bahwa ia akan menjual sejumlah tertentu dari aset tertentu dengan harga jual. Harga antara ketinggian kedaluwarsa Mulai dan blok kedaluwarsa). <br><br>  Dalam kode aset cerdas, kami cukup memverifikasi bahwa aset itu hanya diperdagangkan di antara ketinggian yang ditunjukkan, dan kami tidak akan memeriksa yang lain, kami akan meninggalkan semua tanggung jawab untuk mematuhi aturan dengan kode peserta pertukaran. <br><br>  <b><i>Kode Aset Cerdas:</i></b> <br><br><pre><code class="scala hljs">let expirationStart = <span class="hljs-number"><span class="hljs-number">100000</span></span> let expirationEnd = <span class="hljs-number"><span class="hljs-number">101440</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> some : <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; height &gt; expirationStart &amp;&amp; height &lt;= expirationEnd <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  <i>Kami berasumsi bahwa tindakannya adalah sebagai berikut: anggota bursa menjual opsi untuk pembelian beberapa aset, dan seluruh peserta dapat mentransfer opsi ini atau memperdagangkannya.</i>  <i>Untuk menggunakan haknya untuk membeli, pembeli potensial harus mentransfer jumlah opsi yang diinginkan ke akun penjual, yaitu peserta pertukaran.</i>  <i>Kemudian ia menuliskan informasi tentang transfer yang selesai ke status akun anggota bursa dan hanya kemudian ExchangeTransaction akan dapat melewati kondisi pembelian dan penjualan yang ditentukan.</i> <i><br><br></i>  <i>Dalam kode akun pintar, kita harus memastikan bahwa setiap transaksi ExchangeTransaksi untuk tindakan pembelian dan penjualan akhir memenuhi persyaratan yang ditentukan, dan peserta membeli persis jumlah unit yang dia kirim ke akun peserta pertukaran.</i>  <i>Pembeli potensial harus mengirim DataTransaction yang benar tentang transfer yang terjadi, sehingga anggota pertukaran dapat menghindari pengeluaran ganda.</i>  <i>Dalam Transaksi Data ini, pembeli memberikan kunci yang sama dengan alamatnya, nilai yang sama dengan jumlah opsi yang ditransfer ke akun anggota bursa, yaitu jumlah unit aset yang dapat ia beli.</i> <br><br>  <b><i>Kode Akun Cerdas:</i></b> <br><br><pre> <code class="scala hljs">#         #  sellPrice    expirationStart  expirationEnd let expirationStart = <span class="hljs-number"><span class="hljs-number">100000</span></span> let expirationEnd = <span class="hljs-number"><span class="hljs-number">101440</span></span> let sellPrice = <span class="hljs-number"><span class="hljs-number">10000</span></span> let amountAsset = base58<span class="hljs-symbol"><span class="hljs-symbol">'8jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' let priceAsset = base58<span class="hljs-symbol"><span class="hljs-symbol">'9jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' #<span class="hljs-type"><span class="hljs-type">ID</span></span> - let optionsAsset = base58<span class="hljs-symbol"><span class="hljs-symbol">'7jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' #     let <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> = extract(tx.sender) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> dataTx : <span class="hljs-type"><span class="hljs-type">DataTransaction</span></span> =&gt; #    -   (<span class="hljs-type"><span class="hljs-type">ID</span></span> ) let units = extract(getInteger(dataTx.data, dataTx.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key)) # -    let e = transactionById(dataTx.proofs[<span class="hljs-number"><span class="hljs-number">2</span></span>]) # <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> e { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> transferTx : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; #,       (transferTx.recipient == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) &amp;&amp; #,         <span class="hljs-type"><span class="hljs-type">ID</span></span> dataTx.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key == toBase58String(transferTx.sender.bytes) &amp;&amp; sigVerify(dataTx.bodyBytes, dataTx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], transferTx.senderPublicKey) &amp;&amp; #,         (units == transferTx.amount) &amp;&amp; #,     - (transferTx.assetId == optionsAsset) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } &amp;&amp; size(dataTx.data) == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; !isDefined(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, dataTx.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key)) &amp;&amp; height &gt; expirationStart &amp;&amp; height &lt;= expirationEnd <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> order : <span class="hljs-type"><span class="hljs-type">Order</span></span> =&gt; #,         let correctAssetPair = order.assetPair.amountAsset == amountAsset &amp;&amp; order.assetPair.priceAsset == priceAsset let correctPrice = order.price == sellPrice # -   let d = transactionById(order.proofs[<span class="hljs-number"><span class="hljs-number">2</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> d{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> dataTx : <span class="hljs-type"><span class="hljs-type">DataTransaction</span></span> =&gt; let buyOrderSender = dataTx.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key toBase58String(order.sender.bytes) == buyOrderSender &amp;&amp; order.amount == extract(getInteger(dataTx.data, buyOrderSender)) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } &amp;&amp; order.sender == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> &amp;&amp; correctAssetPair &amp;&amp; correctPrice &amp;&amp; height &gt; expirationStart &amp;&amp; height &lt;= expirationEnd <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Akun Cerdas Berjangka</b> <br><br>  Tidak seperti opsi, futures (kontrak berjangka) bukan hak, tetapi kewajiban pembeli untuk membeli aset dengan harga tetap pada titik tertentu di masa depan. <br><br>  Secara umum, implementasi futures mirip dengan penerapan opsi.  Di sini, aset pintar bertindak sebagai masa depan. <br><br>  Anda juga harus memastikan bahwa pembeli dan penjual menandatangani pesanan pembelian.  Futures adalah kewajiban yang harus dipenuhi dalam hal apa pun.  Ini berarti bahwa jika penjual atau peserta menolak kewajibannya, setiap peserta jaringan dapat mengirim transaksi, sehingga melaksanakan masa depan. <br><br>  Smart Asset Script mengontrol semua Futures TransactionTransaction dan ExchangeTransaction Asset, menyetujuinya hanya jika Anggota Pembelian telah membuat pesanan untuk pembelian Futures Aset di masa depan dari Anggota Bursa. <br><br>  Pesanan ini harus valid dan memenuhi persyaratan penerbitan berjangka.  Untuk memeriksa pesanan, Anda dapat memasukkan semua bidangnya ke dalam status akun pembeli bersama dengan representasi byte dari pesanan yang ditandatangani, dan kemudian memvalidasi dari luar. <br><br>  Saat ini, RIDE tidak mengandung fungsi asli untuk mem-parsing byte transaksi, tetapi mencakup semua alat yang diperlukan untuk implementasinya.  Oleh karena itu, pengembang dapat mencoba mengimplementasikan fitur ini sendiri. <br><br>  <b>Akun / Escrow Multi-Signed</b> <br><br>  Akun dengan multi-signature memungkinkan beberapa pengguna untuk bersama-sama mengelola aset (misalnya, transaksi dengan aset hanya dapat dimungkinkan jika tiga dari empat pengguna memiliki tanda tangan).  Untuk membuat akun dengan banyak tanda tangan dalam bahasa RIDE, kami dapat menggunakan bukti transaksi. <br><br>  Akun dengan multi-tanda tangan juga dapat digunakan untuk rekening escrow, di mana uang disimpan sampai para pihak dalam perjanjian memenuhi kewajiban mereka. <br><br><pre> <code class="scala hljs">let alicePubKey = base58<span class="hljs-symbol"><span class="hljs-symbol">'5AzfA9UfpWVYiwFwvdr77k6LWupSTGLb14b24oVdEpM</span></span>M' let bobPubKey = base58<span class="hljs-symbol"><span class="hljs-symbol">'2KwU4vzdgPmKyf7q354H9kSyX9NZjNiq4qbnH2wi2VD</span></span>F' let cooperPubKey = base58<span class="hljs-symbol"><span class="hljs-symbol">'GbrUeGaBfmyFJjSQb9Z8uTCej5GzjXfRDVGJGrmgt5c</span></span>D' #,     let aliceSigned = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], alicePubKey)) then <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> let bobSigned = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>], bobPubKey)) then <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> let cooperSigned = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">2</span></span>], cooperPubKey)) then <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> #        aliceSigned + bobSigned + cooperSigned &gt;= <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre><br>  <b>Registri yang dikelola Token (TCR)</b> <br><br>  Pada banyak platform blockchain, ada masalah aset beracun.  Misalnya, alamat apa pun yang telah membayar komisi dapat membuat aset di Waves. <br><br>  Registri kurasi token (TCR) yang dihasilkan oleh pemegang token membantu memecahkan masalah melindungi pengguna dan blockchain dari aset beracun. <br><br>  Untuk memberikan suara untuk menambahkan token tertentu ke daftar, pemegang membuat taruhan sama dengan bagian tokennya dari jumlah total yang dikeluarkan.  Token disertakan dalam registri jika sebagian besar pemegangnya memilihnya. <br><br>  Dalam contoh kami, kami mengizinkan pengguna untuk menambahkan token ke daftar untuk dipertimbangkan (selama periode "tantangan") dengan kunci dari kunci = status asset_name, hanya jika nilai saat ini dihitung = 0. <br><br>  Selain itu, pengguna di dompet harus memiliki saldo token yang tidak nol ini.  Kemudian datang periode pemungutan suara di mana pengguna dapat memberikan suara untuk setiap aset di dompetnya, tetapi hanya sekali, memberikan peringkat 1 sampai 10. Suara pengguna diwakili oleh kunci dari form user_address + assetID. <br><br><pre> <code class="scala hljs">let asset = base58<span class="hljs-symbol"><span class="hljs-symbol">'8jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' let addingStartHeight = <span class="hljs-number"><span class="hljs-number">1000</span></span> let votingStartHeight = <span class="hljs-number"><span class="hljs-number">2000</span></span> let votingEndHeight = <span class="hljs-number"><span class="hljs-number">3000</span></span> let <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> = extract(tx.sender) #     let address = addressFromPublicKey(tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">DataTransaction</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(height &gt; addingStartHeight) then( <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(height &lt; votingStartHeight) then( #adding #,        let hasTokens = assetBalance(address, asset) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> size(t.data) == <span class="hljs-number"><span class="hljs-number">1</span></span> #,        &amp;&amp; !isDefined(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toBase58String(asset))) #,   -    <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; extract(getInteger(t.data, toBase58String(asset))) == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; hasTokens ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(height &lt; votingEndHeight) then ( #voting #          let currentAmount = extract(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toBase58String(asset))) let newAmount = extract(getInteger(t.data, toBase58String(asset))) let betString = toBase58String(address.bytes) + toBase58String(asset) #,          let noBetBefore = !isDefined(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, betString)) let isBetCorrect = extract(getInteger(t.data, betString)) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; extract(getInteger(t.data, betString)) &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span> #,       let hasTokens = assetBalance(address, asset) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> #    size(t.data) == <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; isDefined(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toBase58String(asset))) &amp;&amp; newAmount == currentAmount + <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; noBetBefore &amp;&amp; isBetCorrect &amp;&amp; hasTokens ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> ) &amp;&amp; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>]) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Biaya berlangganan</b> <br><br>  Dalam contoh ini, kami akan mempertimbangkan penggunaan akun pintar untuk melakukan pembayaran reguler untuk suatu produk atau layanan pada interval yang telah ditentukan - "biaya bulanan". <br>  Jika pengguna memberikan akun pintar (melalui bukti transaksi) dengan ID TransferTransaction dengan jumlah dana yang diperlukan ditransfer, ia dapat menulis {key: address, value: <b>true</b> } ke dalam status akun. <br><br>  Ini berarti bahwa pengguna mengkonfirmasi berlangganan ke produk atau layanan.  Ketika langganan kedaluwarsa, setiap pengguna jaringan dapat mengatur kunci yang sesuai dalam statusnya ke <b>false</b> . <br><br><pre> <code class="scala hljs">let subscriptionPeriod = <span class="hljs-number"><span class="hljs-number">44000</span></span> let signature = tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>] let pk = tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>] let requiredAmount = <span class="hljs-number"><span class="hljs-number">100000</span></span> let <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> = extract(tx.sender) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> d: <span class="hljs-type"><span class="hljs-type">DataTransaction</span></span> =&gt; #    let lastPaymentHeight = extract(getInteger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, d.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key + <span class="hljs-string"><span class="hljs-string">"_lastPayment"</span></span>)) size(d.data) == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; d.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].value == <span class="hljs-string"><span class="hljs-string">"false"</span></span> &amp;&amp; lastPaymentHeight + subscriptionPeriod &lt; height || ( let address = d.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key # -  <span class="hljs-type"><span class="hljs-type">ID</span></span>,    let ttx = transactionById(d.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>]) size(d.data) == <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; d.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].value == <span class="hljs-string"><span class="hljs-string">"true"</span></span> &amp;&amp; d.data[<span class="hljs-number"><span class="hljs-number">1</span></span>].key == address + <span class="hljs-string"><span class="hljs-string">"_lastPayment"</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> ttx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> purchase : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; d.data[<span class="hljs-number"><span class="hljs-number">1</span></span>].value == transactionHeightById(purchase.id) &amp;&amp; toBase58String(purchase.sender.bytes) == address &amp;&amp; purchase.amount == requiredAmount &amp;&amp; purchase.recipient == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> #,   waves &amp;&amp; !isDefined(purchase.assetId) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Voting</b> <br><br>  Akun pintar dapat digunakan untuk menerapkan pemungutan suara di blockchain.  Contohnya adalah pemungutan suara untuk laporan duta besar terbaik dalam kerangka program duta besar.  Status akun digunakan sebagai platform untuk merekam suara untuk satu atau opsi lain. <br><br>  Dalam contoh ini, pemungutan suara hanya diperbolehkan bagi mereka yang membeli token "pemungutan suara" khusus.  Peserta mengirimkan DataTransaction di muka dengan sepasang (kunci, nilai) = (purchaseTransactionId, buyTransactionId).  Menetapkan nilai berbeda untuk kunci ini dilarang.  Menggunakan alamat dan opsi pemungutan suara Anda, Anda dapat menginstal DataEntry hanya sekali.  Voting hanya dimungkinkan selama periode yang ditentukan. <br><br><pre> <code class="scala hljs">let asset = base58<span class="hljs-symbol"><span class="hljs-symbol">'8jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' let address = addressFromPublicKey(tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>]) let votingStartHeight = <span class="hljs-number"><span class="hljs-number">2000</span></span> let votingEndHeight = <span class="hljs-number"><span class="hljs-number">3000</span></span> let <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> = extract(tx.sender) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">DataTransaction</span></span> =&gt; (height &gt; votingStartHeight &amp;&amp; height &lt; votingEndHeight) &amp;&amp; #,      sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], tx.proofs[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &amp;&amp; #,         <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key == toBase58String(address.bytes)) then ( #       let purchaseTx = transactionById(t.proofs[<span class="hljs-number"><span class="hljs-number">7</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> purchaseTx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> purchase : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let correctSender = purchase.sender == t.sender let correctAsset = purchase.assetId == asset let correctPrice = purchase.amount == <span class="hljs-number"><span class="hljs-number">1</span></span> let correctProof = extract(getBinary(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toBase58String(purchase.id))) == t.id correctSender &amp;&amp; correctAsset &amp;&amp; correctPrice &amp;&amp; correctProof <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> size(t.data) == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; !isDefined(getBinary(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, t.data[<span class="hljs-number"><span class="hljs-number">0</span></span>].key)) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Bill of exchange</b> <br><br>  Bill of exchange adalah kewajiban tertulis di mana satu pihak harus membayar yang lain jumlah yang tetap pada saat permintaan atau pada tanggal yang telah ditentukan. <br><br>  Dalam contoh kami, akun pintar digunakan, tanggal kedaluwarsa yang sesuai dengan tanggal pembayaran tagihan. <br><br><pre> <code class="scala hljs">let expiration = <span class="hljs-number"><span class="hljs-number">100000</span></span> let amount = <span class="hljs-number"><span class="hljs-number">10</span></span> let asset = base58<span class="hljs-symbol"><span class="hljs-symbol">'9jfD2JBLe23XtCCSQoTx5eAW5QCU6Mbxi3r78aNQLcN</span></span>f' let <span class="hljs-type"><span class="hljs-type">Bob</span></span> = <span class="hljs-type"><span class="hljs-type">Address</span></span>(base58<span class="hljs-symbol"><span class="hljs-symbol">'3NBVqYXrapgJP9atQccdBPAgJPwHDKkh6A</span></span>8') let <span class="hljs-type"><span class="hljs-type">Alice</span></span> = <span class="hljs-type"><span class="hljs-type">Address</span></span>(base58<span class="hljs-symbol"><span class="hljs-symbol">'3PNX6XwMeEXaaP1rf5MCk8weYeF7z2vJZB</span></span>g') <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; (t.assetId == asset)&amp;&amp; (t.amount == amount)&amp;&amp; (t.sender == <span class="hljs-type"><span class="hljs-type">Bob</span></span>)&amp;&amp; (t.recipient == <span class="hljs-type"><span class="hljs-type">Alice</span></span>)&amp;&amp; (sigVerify(t.bodyBytes, t.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], t.senderPublicKey))&amp;&amp; (height &gt;= expiration) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Setoran</b> <br><br>  Deposit - penempatan dana di bank pada kondisi tertentu (jangka waktu, persentase). <br>  Dalam contoh kami, fungsi bank dilakukan oleh akun pintar.  Setelah sejumlah blok, yang sesuai dengan jangka waktu setoran, pengguna dapat mengembalikan uangnya dengan persentase.  Script mengatur ketinggian blok (finalHeight), setelah itu pengguna dapat menarik uang dari akun. <br><br>  heightUnit - jumlah blok dalam satu unit waktu (misalnya, bulan, tahun, dll.).  Pertama, kami memeriksa entri dengan pasangan (kunci, nilai) = (initialTransferTransaction, futureDataTransaction).  Kemudian, pengguna harus mengirim TransferTransaksi dengan informasi yang benar tentang jumlah setoran dan bunga yang timbul untuk periode setoran.  Informasi ini diperiksa terhadap TransferTransaksi asli yang terkandung dalam bukti TransferTransaksi saat ini.  depositDivisor adalah angka yang terbalik dengan bagian dari setoran (jika setoran diterima pada 10%, bagian dari setoran adalah 0,1, dan depositDevisor = 1 / 0,1 = 10). <br><br><pre> <code class="scala hljs">let depositDivisor = <span class="hljs-number"><span class="hljs-number">10</span></span> let heightUnit = <span class="hljs-number"><span class="hljs-number">1000</span></span> let finalHeight = <span class="hljs-number"><span class="hljs-number">100000</span></span> let <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> = extract(tx.sender) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> e : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; #    <span class="hljs-type"><span class="hljs-type">ID</span></span>     let depositHeight = extract(transactionHeightById(e.proofs[<span class="hljs-number"><span class="hljs-number">7</span></span>])) #   let purchaseTx = transactionById(e.proofs[<span class="hljs-number"><span class="hljs-number">7</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> purchaseTx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> deposit : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let correctSender = deposit.sender == e.sender #,        +  let correctAmount = deposit.amount + deposit.amount / depositDivisor * (height - depositHeight) / heightUnit == e.amount let correctProof = extract(getBinary(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toBase58String(deposit.id))) == e.id correctSender &amp;&amp; correctProof &amp;&amp; correctAmount <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } &amp;&amp; finalHeight &lt;= height <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], tx.senderPublicKey) }</code> </pre><br>  Pada artikel ketiga dan terakhir dalam seri ini, kita akan melihat lebih banyak opsi untuk menggunakan aset pintar, termasuk membekukan dan membatasi transaksi untuk alamat tertentu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443836/">https://habr.com/ru/post/id443836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443824/index.html">5 alasan untuk beralih ke pencetakan 3D produk logam</a></li>
<li><a href="../id443826/index.html">Mencegah keusangan bahan ajar</a></li>
<li><a href="../id443828/index.html">Asal Mula Budaya Startup: Bagaimana Kisah Sukses Awal Membentuk Keadaan Modern dari Industri Teknologi</a></li>
<li><a href="../id443830/index.html">Tesla memperkenalkan Model Y baru - detail, foto dari presentasi dan tayangan uji coba</a></li>
<li><a href="../id443834/index.html">Runet pada pergantian milenium: apa yang Anda ingat tentang itu?</a></li>
<li><a href="../id443838/index.html">Secara otomatis membuat akun dari AD di Zimbra Collaboration Suite</a></li>
<li><a href="../id443840/index.html">Univention Corporate Server (UCS) - pemasangan server LDAP yang sederhana dan nyaman dengan panel web dan hubungannya dengan Nextcloud</a></li>
<li><a href="../id443842/index.html">Apakah kita gesit atau gesit?</a></li>
<li><a href="../id443844/index.html">Arsitektur Strategis OpenSSL</a></li>
<li><a href="../id443846/index.html">Akses ke server linux menggunakan bot Python Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>