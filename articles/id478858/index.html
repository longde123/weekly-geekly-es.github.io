<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💸 🔠 🎵 Membandingkan Sesi Pembuatan Profil di Admin XHProf 🕋 💪 👶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini berbicara tentang alat yang mudah digunakan untuk membandingkan sesi untuk profiling kode PHP, yang memungkinkan untuk dengan cepat menemu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membandingkan Sesi Pembuatan Profil di Admin XHProf</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478858/"><p>  Artikel ini berbicara tentang alat yang mudah digunakan untuk membandingkan sesi untuk profiling kode PHP, yang memungkinkan untuk dengan cepat menemukan kemacetan dalam proyek pada Bitrix CMS. </p><a name="habracut"></a><br><h2 id="iz-daleka">  Dari jauh </h2><br><p>  Pada bulan Juli, Bitrix diperbarui ke versi terbaru pada waktu itu ... Dan kecepatan pemuatan halaman menurun: suatu tempat sebesar 20%, suatu tempat sebesar 300 +%.  Terutama pada tahap pemesanan pelanggan. </p><br><p>  Jumlahnya mengesankan dan menyedihkan.  Mengapa diperbarui? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b06/a95/419/b06a95419ddf005efa67abf943d51c28.png" alt="N | Solid"></p><br><p> Yaitu  ada risiko bahwa jika kami tidak memperbarui, kami harus menyelesaikan dua masalah sekaligus: benar-benar memperbarui Bitrix dan memperbarui basis kode kami ke PHP&gt; 7.1. </p><br><h2 id="prichina-tormozov">  Alasan untuk rem </h2><br><p>  Alasan untuk rem terbesar, ternyata, adalah logika kode baru untuk bekerja dengan profil pengiriman.  Menurut kode, mereka melakukannya dengan lebih benar, atau sesuatu: pengiriman muncul sebagai entitas terpisah.  Sekarang pesanan dapat dikirim dalam beberapa pengiriman (dengan karakteristiknya sendiri dalam hal biaya, metode pengiriman dan komposisi barang). </p><br><p>  Namun, sekarang profil pengiriman adalah entri terpisah dalam database dengan keterbatasannya dari kernel Bitrix, yang akan muncul setiap kali Anda perlu memeriksa kemungkinan menampilkan profil ini ketika melakukan pemesanan. </p><br><p>  Secara umum, artikel ini tidak akan fokus pada apa yang sebenarnya diperbaiki untuk mengatasi rem, tetapi pada alat yang memungkinkan untuk dengan cepat menemukan kemacetan dalam kode dan memperbaikinya. </p><br><h2 id="xhprof-admin">  Admin XHProf </h2><br><p>  Yang kami miliki adalah profiler populer dari Facebook - XHProf.  Kerugian yang menghambat pengoperasian alat terkait dengan GUI-nya: </p><br><ul><li>  Kurangnya navigasi yang jelas antara sesi pembuatan profil </li><li>  Ketidakmampuan untuk membandingkan lebih dari dua sesi secara bersamaan di luar namespace yang sama. </li><li>  Anda tidak dapat membuat komentar pada mereka dalam daftar sesi.  Setelah sesi kesepuluh, Anda sudah lupa perubahan apa yang terkait dengan hasil profil sebelumnya. </li></ul><br><p>  Akibatnya, melihat SUMBER GUI XHProf asli, dan, sedikit ngeri, GUI baru ditulis untuknya, mencakup kerugian yang tercantum. </p><br><h2 id="ustanovka">  Instalasi </h2><br><p>  → <a href="https://github.com/SergeyRock/xhprof-admin" rel="nofollow">Tautan ke proyek</a> </p><br><p>  Saya tidak akan menjelaskan cara menginstal XHProf dan profil, setidaknya ada beberapa tutorial yang baik tentang Habré. </p><br><p>  Untuk menginstal XHProf Admin, letakkan folder xhprof_admin di folder xhprof_html dari XHProf asli.  Atau mengkloning seluruh proyek (sudah mengandung XHProf dan GUI baru). </p><br><p>  Kemudian buka halaman &lt;Path to xhprof&gt; / xhprof_html / xhprof_admin / <br>  Jika pemetaan diaktifkan, seperti yang direkomendasikan dalam dokumentasi, Anda perlu membuka &lt;Path to xhprof&gt; / xhprof_admin / </p><br><h2 id="glavnaya--stranica">  Halaman rumah </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2ad/de6/6e6/2adde66e6ba9b0ca7b8b2f3e74038c3c.png" alt="N"></p><br><p>  Berisi: </p><br><ul><li>  Daftar semua sesi pembuatan profil yang diurutkan berdasarkan tanggal </li><li>  Bidang Komentar Sesi </li><li>  Gagak yang dengannya Anda dapat memilih sesi untuk dihapus, dibandingkan, dikumpulkan </li><li>  Tautkan ke laporan baru </li><li>  Tautan ke laporan dan kaligrafi asli </li><li>  Bidang Berat Sesi untuk Diff dan Agregat </li><li>  Bidang yang menentukan urutan sesi akan ditampilkan dalam mode Bandingkan dan juga dalam mode Diff </li><li>  Tombol: <br><ul><li>  Bandingkan - bandingkan sesi yang dipilih (laporan baru) </li><li>  Diff - laporan standar untuk membandingkan sesi dalam satu ruang nama </li><li>  Agregat - laporan standar dengan agregasi sesi dalam satu ruang nama </li><li>  Simpan komentar khusus - menyimpan komentar untuk sesi (dalam file terpisah) </li><li>  Hapus proses yang dipilih - menghapus file sesi dan file komentar </li><li>  Tautan ke halaman daftar sesi asli </li></ul></li></ul><br><p>  Lihat laporan asli, Diff berjalan, Agregat berjalan, Lihat callgraph - fitur asli XHProf GUI - Saya tidak akan menjelaskannya.  Saya hanya bisa mengatakan bahwa Admin XHProf memungkinkan Anda untuk menavigasi dengan mudah, daripada menyusun tautan secara manual. </p><br><h2 id="compare-runs">  Bandingkan lari </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/70e/4d2/1ca/70e4d21caaf3a804af695716c673a179.png" alt="N | Solid"></p><br><p>  Laporan baru yang memungkinkan Anda untuk dengan cepat mengevaluasi pertumbuhan atau regresi dalam produktivitas. <br>  Untuk menggunakannya, di halaman utama: </p><br><ul><li>  Pilih sesi yang ingin kita bandingkan. </li><li>  Kami menetapkan bidang semacam "Urutkan" untuk menentukan urutan sesi yang ditampilkan: semakin kecil nilai bidang, semakin awal sesi akan ditampilkan.  Sesi pertama akan diambil sebagai sesi pertama - semua sesi berikutnya akan dibandingkan dengannya. </li><li>  Jika kami ingin menampilkan nilai rata-rata metrik, maka tandai "tampilkan rata-rata". </li><li>  Klik "Bandingkan." <br><img src="https://habrastorage.org/getpro/habr/post_images/28d/452/9f2/28d4529f2011bd7df9a57b2ac1f90641.png" alt="N | Solid"></li></ul><br><p>  Laporan tidak menunjukkan% bahwa fungsi “menempati” untuk setiap metrik agar tidak mengacaukan halaman, tetapi menampilkan nilai absolut.  Jika ada perbedaan lebih dari 1% dalam metrik untuk fungsi yang diprofilkan antara sesi dasar dan yang berikutnya, ini jelas ditunjukkan: hijau menunjukkan peningkatan, merah menunjukkan regresi. </p><br><p>  Secara default: </p><br><ul><li>  Laporan ini menampilkan 100 fungsi pertama.  Jika Anda membutuhkan lebih banyak, klik "tampilkan semua". </li><li>  Data diurutkan berdasarkan “Incl.  Waktu Dinding (microsec) ”, tetapi Anda dapat mengeklik pada metrik apa saja dan mengurutkannya. </li></ul><br><p>  Untuk mengecualikan sesi dari laporan, klik "kecualikan". </p><br><p>  Penyortiran menurut setiap metrik tersedia - cukup klik pada tajuk kolom. </p><br><p>  Untuk menampilkan nilai rata-rata untuk semua sesi yang dipilih, klik "Tampilkan nilai rata-rata". </p><br><p>  Untuk menelusuri fungsi, Anda dapat mengklik sel di persimpangan fungsi dan metrik dengan sesi yang ditampilkan. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1cf/114/e12/1cf114e12049d9514d052240e6e0dc27.png" alt="N | Solid"></p><br><h1 id="primer-ispolzovaniya">  Contoh penggunaan </h1><br><ol><li>  Kami memulai profiler pada kode sumber.  Kami membuka daftar sesi dan menambahkan komentar. </li><li>  Kami memulai profiler pada kode yang ditingkatkan.  Juga menambahkan komentar. </li><li>  Apakah item 2 beberapa kali. </li><li>  Kemudian kami membuka daftar sesi pembuatan profil, memilih semua sesi secara berurutan dan mengklik Bandingkan. </li><li>  Kami melihat perubahannya. </li><li>  Mereka memutuskan apa lagi untuk mempercepat. </li></ol><br><p>  <a href="https://github.com/SergeyRock/xhprof-admin" rel="nofollow">XHProf Admin</a> mudah digunakan untuk mengidentifikasi fungsi-fungsi berat yang biasa digunakan yang dilakukan oleh satu pengguna.  Misalnya, dalam Bitrix, ketika melakukan pemesanan ketika berpindah dari satu tahap ke tahap lain (pengiriman, pembayaran, kontak, dll.) Setiap kali sejumlah fungsi dipanggil untuk mengontrol integritas keranjang, dll. Tahap-tahap ini diprofilkan secara terpisah dan kemudian ditampilkan bersama dalam laporan Bandingkan.  Hasil dari fungsi-fungsi ini dapat di-cache, secara signifikan mempercepat waktu transisi dari tahap ke tahap. </p><br><h1 id="itog">  Ringkasan </h1><br><p>  Sebagai hasilnya, kami menaikkan penurunan kecepatan pada tahap penempatan pesanan saat memperbarui Bitrix, secara bersamaan menganalisis bagian lain dari situs dan mempercepatnya. <br>  Dari waktu ke waktu kami menggunakan Admin XHProf pada proyek-proyek sebagai GUI yang lebih intuitif. <br>  Tautan dokumentasi ke Admin XHProf: <a href="" rel="nofollow">buka</a> </p><br><p>  Siapa yang tertarik dengan topik optimasi kode dan alat untuk ini, tulis di komentar. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id478858/">https://habr.com/ru/post/id478858/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id478848/index.html">Evolusi fotografi digital</a></li>
<li><a href="../id478850/index.html">Penamaan Kotak CSS</a></li>
<li><a href="../id478852/index.html">Pengantar GitOps untuk OpenShift</a></li>
<li><a href="../id478854/index.html">Pertempuran server web. Bagian 1 - HTTP bercerai dari kenyataan:</a></li>
<li><a href="../id478856/index.html">SD-WAN - tren dan perkiraan terkini untuk tahun 2020</a></li>
<li><a href="../id478862/index.html">Bagaimana pengujian frontend diatur di Yandex.Market dan mengapa kami menolak rilis mingguan</a></li>
<li><a href="../id478866/index.html">Meet Space - Produk Baru dari JetBrains</a></li>
<li><a href="../id478872/index.html">DIY: cara kami mengotomatiskan pemantauan gudang</a></li>
<li><a href="../id478878/index.html">Sepotong kode paling populer dalam sejarah StackOverflow memiliki bug!</a></li>
<li><a href="../id478884/index.html">Cara menyiapkan RTSP di situs pada tahun 2020, atau mengapa babi hutan tidak punya waktu untuk melarikan diri</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>