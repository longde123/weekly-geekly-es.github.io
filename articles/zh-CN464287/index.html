<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧙🏾 👎 👩🏻‍🍳 渗透仪“ Hackthebox-Friendzone”的实验室机器通过 🤧 🌜 🚬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！ 在本文中，我想向您介绍我在hackthebox门户上通过Friendzone Lab的经验。 对于那些还没听说过hackthebox的人来说，这是一个门户网站，您可以在其中测试自己的笔试技能，其中包括CTF面罩和实验室机器本身，本文将讨论其中的一种。 

 我马上要说的是，该服务的规则是：...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>渗透仪“ Hackthebox-Friendzone”的实验室机器通过</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464287/"> 哈Ha！ 在本文中，我想向您介绍我在hackthebox门户上通过<b>Friendzone</b> Lab的经验。 对于那些还没听说过<b>hackthebox的人</b>来说，这是一个门户网站，您可以在其中测试自己的笔试技能，其中包括CTF面罩和实验室机器本身，本文将讨论其中的一种。 <br><a name="habracut"></a><br> 我<b>马上</b>要说的是，该服务的规则是： <b>“不要与其他成员分享您如何入侵每台计算机。</b>  <b>这包括邀请代码的产生和所有的挑战</b> 。 <b>“</b> 但是，由于此计算机不再处于活动状态，并且存储在“已淘汰的计算机”部分中，因此只有VIP成员才能访问此部分中的计算机并撰写文章，因此本文没有违反任何法律，并且完全合法。 因此，让我们开始吧！ <br><br><img src="https://habrastorage.org/webt/eq/c3/2b/eqc32b6y9bqmtr-gocy8b5de2da.png"><br><br><h3> 信息收集 </h3><br> 让我们通过使用nmap启动端口扫描开始我们的探索。 <br><br><img src="https://habrastorage.org/webt/y6/aa/eu/y6aaeufi_gf2tbuemuoimktmude.png"><br><br> 从上面可以看到端口21（ftp），22（ssh），53（域），80（http），139（netbios-ssn），443（https）已打开。 让我们看看它们。 <br><br><h3> 枚举139 / TCP（netbios-ssn） </h3><br> 我们将使用<b>enum4linux</b>实用程序列出主机上的共享资源。 从实用程序的输出中可以清楚地看到，允许输入资源/ general和/ Development <br><br><img src="https://habrastorage.org/webt/vg/sh/hl/vgshhlujrsbezshcja0urpag5y0.png"><br><br> 现在我们需要检查这些资源。 <br><br> 使用<b>smbclient //10.10.10.123/general，</b>我们找到包含一些凭据的<b>creds.txt</b>文件，将其保存。 <br><br><img src="https://habrastorage.org/webt/c4/rs/7e/c4rs7ebm4tetaqljpogb8rgiaby.png"><br><br><img src="https://habrastorage.org/webt/ya/z0/vp/yaz0vpdw-rtdeq_3ngntoyxqroy.png"><br><br><h3>  DNS枚举 </h3><br> 我们将使用<b>dig</b>实用程序，它使检查域/子域的指定DNS服务器上的记录成为可能。  friendzone.red域名来自CommonName ssl证书（nmap输出为443 / tcp）。 <br><br><img src="https://habrastorage.org/webt/tw/x6/pf/twx6pfqush4ezmpisdojdftvh_k.png"><br><br> 我们去<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">10.10.10.123</a> <br><br><img src="https://habrastorage.org/webt/cm/vt/xe/cmvtxe7nvbywfhvnoq7-xdhmcas.png"><br><br> 我们注意到邮箱info@friendportal.red，然后再次使用dig。 <br><br><img src="https://habrastorage.org/webt/rc/wt/wa/rcwtwaslpdidruaejqb_bvjcjvo.png"><br><br> 将结果条目添加到<b>/ etc / hosts</b> <br><br> 我们现在有一个地址列表，需要针对以下线索进行审核。 我将省略故事的一部分，其中的页面原来是兔子洞。 我们仅考虑有用的发现。 <br><br> 我们转到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">administartor1.friendzone.red</a>并输入//10.10.10.123/general/creds.txt上的凭证 <br><br><img src="https://habrastorage.org/webt/bg/ww/2_/bgww2_7jcqsrjdohhrsftkjg46s.png"><br><br><img src="https://habrastorage.org/webt/ts/ky/mr/tskymrrw0nqffphtsoa5ncpivjs.png"><br><br> 访问/dashboard.php <br><br><img src="https://habrastorage.org/webt/lf/sr/ms/lfsrms43xriuohqnmrszegpzgdg.png"><br><br> 要求他们输入某些参数以获得照片。 因此，我们可以使用2张图像。 <br><br><img src="https://habrastorage.org/webt/gi/a7/1l/gia71lf3k7yy8cibm2vl52ww9qc.png"><br><br><img src="https://habrastorage.org/webt/to/n8/vi/ton8viauvoykejw2rct75hj5xdm.png"><br><br> 通过反复试验，我们了解到该页面容易受到<b>LFI（本地文件包含）的</b>攻击。 而且我们可以通过smbclient加载外壳程序并使用此漏洞进行访问。 我们尝试！ <br><br> 在“开发”中下载外壳程序。 <br><br><img src="https://habrastorage.org/webt/3k/q6/76/3kq676gyempuswwurtostwc3f58.png"><br><br><img src="https://habrastorage.org/webt/px/8g/ha/px8ghamniwu51v0nypfsil4fsnu.png"><br><br> 我们返回页面并参考已加载的外壳。 <br><br><img src="https://habrastorage.org/webt/fe/au/zi/feauzivhafaeprlajjclxgqceey.png"><br><br> 当然，在此之前，通过运行netcat来监听端口1234。 <br><br><img src="https://habrastorage.org/webt/n3/qa/hc/n3qahcsmjw-zw9veopkvslq4abu.png"><br><br> 我们获得了www-data用户的外壳。 <br><br> 浏览了volunbox之后，我们找到mysql_data.conf文件，其中包含来自用户朋友的凭证。 <br><br><img src="https://habrastorage.org/webt/gl/w_/hy/glw_hytdkwyxt1im_jj4btv0o10.png"><br><br><img src="https://habrastorage.org/webt/0j/_8/z0/0j_8z0t-dfivc8j0c-gwdkjas0u.png"><br><br> 让我们尝试获得一个终端并以朋友身份登录。 <br><br><img src="https://habrastorage.org/webt/5c/zp/nc/5czpncy59cpndw3zfr6s_n80nee.png"><br><br> 我们进入主目录/ home / friend，并选择用户标志。 <br><br><h3> 抓取root.txt </h3><br> 将pspy64下载到volunbox中以跟踪正在运行的进程。 <br><br><div class="spoiler">  <b class="spoiler_title">扰流板方向</b> <div class="spoiler_text">  <b>pspy</b>是旨在跟踪进程而无需root特权的工具。 它允许您查看其他用户执行的命令，cron作业等。 随着他们的进步。 <br></div></div><br><img src="https://habrastorage.org/webt/br/i0/oc/bri0ocr8gyd4g_pahbi6dj3ku8q.png"><br><br> 在将“执行”设置为chmod + x文件之前，我们启动pspy64。 <br><br><img src="https://habrastorage.org/webt/xu/qj/kw/xuqjkweareuwwnncfcwacq7t3pi.png"><br><br> 我们注意到，reporter.py是从UID = 0（即root）的用户启动的。 让我们看看reporter.py文件的内容 <br><br><img src="https://habrastorage.org/webt/rm/xx/xv/rmxxxvbfpesxa4ht7dyacfbcgje.png"><br><br> 除了导入os模块的第一行外，几乎所有的行都被注释掉了，没有任何意义。  <b>图书馆劫持</b> ？ <br><br> 该os.py模块的分辨率为777，因此我们可以安全地从Friend用户进行更改。 <br><br> 通过将行<b>系统（“ cp /root/root.txt /home/Friend/root.txt”）添加到os.py模块，</b>并等待一段时间才能启动脚本。 <br><br><img src="https://habrastorage.org/webt/r1/a0/zu/r1a0zuie9lbufwdpgie6tmestzk.png"><br><br> 我们得到了根标志。 胜利了！ <br><br><img src="https://habrastorage.org/webt/ct/pf/tn/ctpftnwwsvlolcbzzlikeuleo1g.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN464287/">https://habr.com/ru/post/zh-CN464287/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN464265/index.html">积极思考的专制威胁您的健康和幸福</a></li>
<li><a href="../zh-CN464277/index.html">随机表面隐藏复杂的顺序</a></li>
<li><a href="../zh-CN464279/index.html">自制氯化铜蒸气激光</a></li>
<li><a href="../zh-CN464283/index.html">Android操作系统上的电子书应用程序。 第3部分。词典和注释</a></li>
<li><a href="../zh-CN464285/index.html">自动更新Vkontakte的个人资料照片</a></li>
<li><a href="../zh-CN464289/index.html">如何编写Go软件包</a></li>
<li><a href="../zh-CN464291/index.html">过去50年中十种最具影响力的编程语言及其创建者</a></li>
<li><a href="../zh-CN464293/index.html">钩子可以在React Redux中替换吗？</a></li>
<li><a href="../zh-CN464295/index.html">使用一些新的JavaScript功能的示例</a></li>
<li><a href="../zh-CN464299/index.html">0、0、1、0、2、0、2、2、1、6、0、5、0、2、6、5、4、0、5、3、0、3、2、9、0， 4，9，3，6，14，0，6，3，5，15，0，5，3，5 ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>