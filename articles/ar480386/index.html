<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฉ๐พโ๐ฌ ๐ฆ ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ููุนุฏุงุช ุงูุดุจูุฉ ูุชุฎุฒูููุง ูู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ๐ฉ๐ฟโ๐คโ๐จ๐ฝ ๐ ๐ฑ๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชูุถูุญ: ุชู ุชูููู ุงูุญู ูู D-Link DFL ู cisco 29xx ู WatchGuard Firebox ุ ููููู ููุงุณุจ ููู ุดูุก ููููู ุงููุณุฎ ุงูุงุญุชูุงุทู ุนูุฏ ุงูุงุชุตุงู ุนุจุฑ ssh ู / ุฃู ุชุญููููุง ุนู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ููุนุฏุงุช ุงูุดุจูุฉ ูุชุฎุฒูููุง ูู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480386/" style=";text-align:right;direction:rtl">  ุชูุถูุญ: ุชู ุชูููู ุงูุญู ูู D-Link DFL ู cisco 29xx ู WatchGuard Firebox ุ ููููู ููุงุณุจ ููู ุดูุก ููููู ุงููุณุฎ ุงูุงุญุชูุงุทู ุนูุฏ ุงูุงุชุตุงู ุนุจุฑ ssh ู / ุฃู ุชุญููููุง ุนูู ุฌุฏูู ุฒููู / ุญุฏุซ ุฅูู ุฎุงุฏู ftp / tftp. <br><br>  ุจุฏุฃ ูู ุดูุก ุจุญูููุฉ ุฃู ุตุฏููู ูุจุฑูุฌ ุณุฃู: "ููุงุฐุง ูุง ุชุฎุฒู ุชููููุงุช ุงูุดุจูุฉ ูู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑุ"  ูุงูุญูููุฉ - ููุฑุช - ููุงุฐุงุ  ูููู ุชูุฒูู ูุนุธู ูููุงุช ุงูุชูููู ุจุชูุณูู ูุตู (ุญุณููุง ุ ูุฐู ุซูุงุฆูุงุช ุ ุจุงูุทุจุน ุ ูููู ูุชู ูุชุญ ุงููุนูููุงุช ุงููุงุจูุฉ ูููุฑุงุกุฉ ูุนุฑุถูุง ูู ูุญุฑุฑ ูุตู). <br><a name="habracut"></a><br>  ุนูู ุงูุดุจูุฉ ุ ูุฏููุง ุญูุงูู 30 DFLs ุฏู ูููู ูุฎุชููุฉ ุ ูุนุดุฑุงุช ูู ุณูุณูู 29xx ูุงุซููู ูู WatchGuard Firebox.  ุจุงููุณุจุฉ ููู ุฌูุงุฒ ุ ูุชูุชุน ุงูููุธููู ุนูู ูุณุชูู ุงููุณุคูู ูู ูุฑุน ุชูููููุฌูุง ุงููุนูููุงุช ุ ุญูุซ ููุฌุฏ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูููุฉ ุงููุนูููุงุช ูู ุงูููุชุจ ุงูุฑุฆูุณู ุ ุจูุตูู ุฅูู ูุณุชูู ุงููุณุคูู.  ูุณุชูุฒู ุฐูู ูุดููุงุช ูุซู "ูู ุฃูู ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ููุฏุฉ ุณุชุฉ ุฃุดูุฑ ููุณุฑุช ูู ุดูุก ุ ูู ูุฏูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุฏููุงุ" ู "ุงููุนุฏุงุช ุงูุชู ุชู ุญุฑููุง ูู ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุนูุช ุงููุดุฑู ุงูุณุงุจู ุ ููุง ุฃุนุฑู ุฃูู ุ ููู ุจุชูููููุง ููุง ูุงู".  ูุฅุฐุง ูุงูุช ุดุฑูุฉ ุณูุณูู ุชุนูุฏ ุจุงููุนู ุถุจุท ุฅุนุฏุงุฏุงุช ุงูุชุดุบูู ุชููุงุฆููุง ุนูู ุจุฑูุชูููู ููู ุงููููุงุช ูู ูู ูุฑุฉ ูุชู ุญูุธูุง ุ ููู ูููู ูุฐุง ูู ุงูุญุงู ูุน D-Link.  ูุณูุณุงุนุฏ ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ุนูู ุชุชุจุน ูุดุงูู ูุซู "ูุง ุฃุชุฐูุฑ ูุงุฐุง ููุชู ููุช ุจุชุบููุฑู ุ ููู ูุฏููุง ุดูุก ูุณุชุฎุฏู ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุดูุฑ".  ุชูุธูู ุงููุณุฎ ุงูุงุญุชูุงุทู ูุง ูููุฐู ูู ุงูุนุงูู ุงูุจุดุฑู ููุง ูุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุ ูุฐูู ูู ุงูุฃูุถู ุงูุชุญุฐูุฑ ููู ุนุฏู ูู ุงูุงุฑุชุจุงุท. <br><br>  ุฃุนุชุฑู ุจุฃูุงูุฉ ุ ูุจู ุฃู ุฃุฌูุณ ููุชุงุจุฉ ููุดูุฑ ุ ูู ุฃูู ุฃุนุฑู ุนู ุฒูุฌู ูุฃูุณุฏุฉ.  ููู ููุงููุง ูุง ูุนุฑู ูุง ุฃุญุชุงุฌู ุจุงููุงูู.  ุงูุฃููู ููุฌูุฉ ุฅูู ุณูุณูู ููุง ุชุนูู ุจุดูู ุฌูุฏ ูุน ุฃู ุดูุก ุบุฑูุจ ุ ูุงูุซุงูู ููุณ ูุฏูู ุฅุฐู ุงููุณุชุฎุฏู (ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูููู ุฃู ูุชู ุนู ุทุฑูู ุงูุชูุงุนุจ ุงูุจุณูุท ูุน ุฎุงุฏู ุงูููุจ) ุ ูุงูุฃูู ูู ุฐูู ุ ููุงููุง ูุชุทูุจ ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ ูููุธุงู ุงูููุฑุฑ.  ุฌููุน ูุฏุงูุน DFL-link ุชุฏุนู ุชุณุฌูู ุงูุฏุฎูู ssh.  ุชููู Cisco ุจุฏูุฌ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ููุณูุง ููุง ุชุชุทูุจ ุงุชุตุงููุง ุจุดูู ุนุงู.  ููููุง ูุฐูู ุ ููุงุฐุง ุชุชุบูุฑ ูููุงุช ุงููุฑูุฑ ุจุดูู ุฏูุฑู ุ ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ูุงู ููููู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุงูููุชุงุญ. <br><br>  ุชูุฑุฑ ุฃู ุฃูุนู ุดูุฆูุง ููุงุณุจูู ุจููุฑุฏู. <br><br>  ูู ุงููุงูุน ุ ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ุงูุชุณูู ููุชุฑุฉ ุทูููุฉ.  ููู ูุธุงู ุงูุชุญูู ุงูุฅุตุฏุงุฑ - ูุงู ุฌุฏูุฏุง. <br><br>  <i>ูุฐุง ุ ูุฅู ุงููููุฉ: ูุฌูุน ุฌููุน ุงูุชููููุงุช ุงููููุฉ ูู ูุนุฏุงุช ุงูุดุจูุฉ ูู ููุงู ูุงุญุฏ ูุน ุฏุนู ูุฅุตุฏุงุฑ ุงููููุงุช ุ ูุชุญุฏูุซูุง ุจุงูุชุธุงู ููุงู ุ ููุณูุงุญ ูููุณุคูููู ูู ููุทูุฉ ุฒูููุฉ ุฃุฎุฑู ูุชูุฒูููุง ุจุทุฑููุฉ ุจุณูุทุฉ ุ ุฏูู ุงูุงุชุตุงู ุจู ูู 3 ูู ุงูุตุจุงุญ.</i>  <i>ูู ูุฐุง ุ ุจุงูุทุจุน ุ ูุฌุงูู.</i> <br><br>  ุจุงููุณุจุฉ ูุฌููุน DFLs ุ ููุทูู ุนูู ููู ุงูุชูููู ููุณ ุงูุดูุก ุ ูุฐูู ูุงู ูู ุงูุถุฑูุฑู ุชุณููุชู ุจูุถูุญ ุนูุฏ ุงููุณุฎ.  ููุง ุฃููู ูู ุฃุฑุบุจ ูู ุฅุนุงุฏุฉ ุชูููู ูุธุงู ุชุนุจุฆุฉ ุงูุชูููู ุงูุญุงูู ูุชุดุบูู ุจุฑูุชูููู ููู ุงููููุงุช ูุน cisco. <br><br><h4 style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูู ุจุฅุนุฏุงุฏ ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ </h4><br>  ุฃุฎุฐุช SVN ุ ุงููุนุงุฑู ุงูุชูููุฏูุฉ.  svn ูู ุงููุญูุฏ ุงููุดููุฑ ุงูุฐู ูุฎุฒู ุซูุงุฆูุงุช ุงููุฑู ุ ูููุณ ูู ุงููููุงุช ูู ุงูุชุงุฑูุฎ.  ููุณ ูุฐุง ูู ุงูููู ุนูู ูุฌูุฏุงุช ุตุบูุฑุฉ ุ ูููู ูุทููุฉ.  ุจุดูู ุนุงู ุ ุฃูุง ุขุฎุฐ ูู ุงูุงุนุชุจุงุฑ ูููุฉ ุตุบูุฑุฉ ูู ูููุงุช ุงูุชูููู ุ ูุงูุชู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ูุงุชุฎุงุฐ - ูุง ูุฑู. <br><br>  ุชู ุชุซุจูุช ุฎุงุฏู Visual SVN ูู <a href="https://www.visualsvn.com/server/getting-started/">ุงููููุน ุงูุฑุณูู</a> ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุงูุฅุนุฏุงุฏ ุงูุฌุงูุฒ.  ุฃุถุนู ุนูู ุฎุงุฏู ุชุญุช Windows ุ ุจุญูุซ ูุงู ูู ุงูุณูู ุนูู ุงูุฒููุงุก ุฅุฏุงุฑุฉ (ุฅูุดุงุก ูุณุชุฎุฏููู ุ ูุชูุฒูุน ุญููู).  ุจุนุฏ ุฐูู ุ ูุชู ุฅูุดุงุก ูุณุชูุฏุน ุ ููุชู ุฅูุดุงุก ุงูุฃูุณุงู ุงููุงุฒูุฉ ููู ููุชู ุฅูุดุงุก ุงููุณุชุฎุฏู ุงููุญูุฏ ุงูุฐู ูุชูุชุน ุจุญููู ูุงููุฉ ูู ุงููุณุชูุฏุน (ุงูุขู).  ุนูู ูููุฏูุฒ ุ ูุชู ุงูุงูุชูุงุก ูู ุงูุฅุฌุฑุงุกุงุช. <br><br>  ูุชู ุฅุฌุฑุงุก ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ุจูุงุณุทุฉ ุฌูุงุฒ Linux ูุงุญุฏ (ุชุญุช Debian). <br><br>  ุฃููุงู ุ ูููุง ุจุชุนููู svn ุจุญูุซ ูููู ูุฏููุง ุนููู: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">sudo apt-get install svn</code> </pre> <br>  ุงูุขู ูุชู ุฅูุดุงุก ูุณุฎุฉ ูู ุงููุดุฑูุน ุจุงููุฏ (ุชู ุฅูุดุงุคูุง ูู ุงูุฏููู ุงูุญุงูู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">svn checkout https://servername.mydomain.ru/svn/DFL_BACKUPS/ DFL_BACKUPS --username go</code> </pre> <br>  ูุฏู ุงูุขู ุซูุงุซุฉ ุฃูุณุงู ูู ุงููุณุชูุฏุน: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Current_backup ุ ุญูุซ ูุชู ุชุฎุฒูู ุชููููุงุช D-Link DFL ูุงููุชุงุจุฉ ููููุง. </li><li style=";text-align:right;direction:rtl">  Old_versions ุ ุญูุซ ูุชู ุชุฎุฒูู ุงูุชููููุงุช ุฐุงุช ุงูุชุงุฑูุฎ ุงููุญุฏุฏ ูุณูููุฉ ุงูุชูุฒูู ุจูุงุณุทุฉ ูุณุคููู ุงููุฑูุน. </li><li style=";text-align:right;direction:rtl">  Cisco ุ ุญูุซ ูุชู ุชุฎุฒูู ุชููููุงุช cisco ู WatchGuard Firebox (ุฌูุฏูุง ุ ููุฏ ุญุฏุซ ุฐูู). </li></ul><br><h4 style=";text-align:right;direction:rtl">  ููุจุฏุฃ ูุน ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ูู DFL ูุฅุนุฏุงุฏ DFL ููุณู </h4><br>  ุงุชุตุงู ูุฐูุจ ุนูู ุณู.  ูู ุฃุฌู ุนุฏู ุชุฃูู ูููุงุช ุงููุฑูุฑ ุจุดูู ููุชูุญ ุ ูุชู ุงุณุชุฎุฏุงู ุฒูุฌ ููุงุชูุญ ุนุงู-ุฎุงุต.  ูุชู ุชุฎุฒูู ุงูุฎุงุต ุนูู ุงูุฎุงุฏู ูู / usr / dfl_scripts / sshkeys / dfl_key. <br><br>  ูููู ุจุฅูุดุงุก ุฒูุฌ ูู ุงูููุงุชูุญ ุงูุนุงูุฉ ูุงูุฎุงุตุฉ ุนูู ุฎุงุฏู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">ssh-keygen โt rsa</code> </pre> <br>  ูุชู ุณูุจ ุงูููุชุงุญ ุงูููุชูุญ ูู ุฌููุน DFLs ููุชู ุฅุฌุฑุงุก ูุงุนุฏุฉ ุงููุตูู ssh: <br><br><img src="https://habrastorage.org/webt/xd/n5/8b/xdn58ban40oax7jrapthgpok6jy.png"><br><br><img src="https://habrastorage.org/webt/qf/ll/3y/qfll3y-dxfmrpyd5l9samttd2xq.png"><br><br>  ุญุณููุง ุ ููุณูุญ ุจุงูุฅุฏุงุฑุฉ ุนู ุจูุนุฏ ุงูููุงุจูุฉ.  ูููู ุชุบููุฑ ุงููููุฐ ูู ุงูุงูุชุฑุงุถู ุฅูู ุ ุนูู ุณุจูู ุงููุซุงู ุ 2222 ุ ุนูู ุงูุฑุบู ูู ุฃู ุงููุตูู ูููู ููุท ูู ุนูุงููู ูุนููุฉ. <br><br><img src="https://habrastorage.org/webt/up/ej/6t/upej6ttpsxpj0w6-mdwsgwi_psc.png"><br><br>  ููุน ุงูููู ุฐู ุงูุชูููู ุงูุญุงูู ูู D-Link DFL ูู ุงูุฌุฐุฑ ูููุณูู config.bak ุ ูููููู ุจุจุณุงุทุฉ ูุณุฎู ุฅูู ููุณู ุจุงุณุชุฎุฏุงู scp. <br><br>  ูุฐุง ุ ุงูุจุฑูุงูุฌ ุงููุตู (ููุช ุจูุต ูุงุฆูุฉ ุงููุฑูุน ุจุญูุซ ูู ุชูู ููุงู ูุฑูุฉ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash rm /usr/dfl_scripts/dflbackup/* #    dfls=( "amur:10.28.10.254" #  "arhangelsk:10.29.10.254" "buratia:10.3.10.254" "volgograd:10.34.10.254" "voronezh:10.36.10.254" "irkutsk_210:10.38.20.253" "irkutsk_260:10.38.20.254" "yaroslavl:10.76.10.254" ) rm /usr/dfl_scripts/log.txt # - for dfl in "${dfls[@]}" ; do #   - filial="${dfl%%:*}" #delete the longest substr :* search from the end of string ip_addr="${dfl##*:}" #delete the longest substr *: search from the head of string echo $filial $ip_addr &gt;&gt; /usr/dfl_scripts/log.txt #     scp -P 2222 -i /usr/dfl_scripts/sshkeys/dfl_key admin@$ip_addr:config.bak /usr/dfl_scripts/dflbackup/$filial.bak 2&gt;&gt;/usr/dfl_scripts/log.txt #   ,      done FILES=$(ls /usr/dfl_scripts/dflbackup) #     now=$(date +"%d_%m_%Y") #     for f in $FILES ; do #      (    ) cp /usr/dfl_scripts/dflbackup/$f /usr/dfl_scripts/DFL_BACKUPS/current_backup/$f #       cp /usr/dfl_scripts/dflbackup/$f /usr/dfl_scripts/DFL_BACKUPS/old_versions/${f%.bak}_$now.bak #        done cd /usr/dfl_scripts/DFL_BACKUPS #   svn  svn add * --force -q &gt;&gt; /usr/dfl_scripts/log.txt #  .    . svn commit -m "added backups $now" &gt;&gt; /usr/dfl_scripts/log.txt #     /usr/bin/mail it@mydomain.ru &lt; /usr/dfl_scripts/log.txt -s "   DFL" #    -  </span></span></code> </pre> <br>  ุงููุต ููุชูุจ ูู cron ููุนูู ุงูุณุงุนุฉ 8:30 ุตุจุงุญูุง ูููููุง.  ูุฐุง ูู ูุง ูุดุจู crontab: <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">30 08 * * * /usr/dfl_scripts/autobackup.sh 30 06 * * * /usr/dfl_scripts/ciscobackup.sh 00 06 * * 1 /usr/dfl_scripts/fireboxbackup.sh</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุงูุขู ุนู ุณูุณูู </h4><br>  ุนูู ุงูุฃุฌูุฒุฉ ููุณูุง ุ ูุชู ุชูููู ุดูุก ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">archive log config logging enable logging size 500 hidekeys path ftp://ftp.mydomain.ru/in/autolog/$H-$T write-memory ip ftp username user ip ftp password mypass ip scp server enable</code> </pre> <br>  ูุชูุฌุฉ ูุฐูู ุ ูุนูุฏ ุฃูุฑ ูุชุงุจุฉ ุงูุฐุงูุฑุฉ ุงูุชูููู ุงูุญุงูู ุฅูู ftp.  ููุฌุฏ ููู ftp ุงูุฎุงุต ุจู ุนูู ุฎุงุฏู ูุฎุชูู ุนู ูุฌููุนุฉ ูู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูุชููุงุฆูุฉ.  ููุงู ุทุฑููุชุงู: ุฅูุดุงุก ูุณุฎุฉ ูู ุงููุณุชูุฏุน ุนูู ุฐูู ุงูุฎุงุฏู ูุฅุถุงูุฉ ุงูุชููููุงุช ููุงู ุฃู ูุณุฎ ุงูุชููููุงุช ุฅูู ุฎุงุฏู ูุฌุงูุฑ.  ูู ุงูุฃุณุงุณ ุ ูุฅู ุงููุฑู ููู ูู ูุง ุฅุฐุง ููุช ุชุฑูุฏ ูุนู cp ุฃู scp. <br><br>  ูู ุงูุฏููู ุญูุซ ุชูุน ุงูุชููููุงุช ูุน cisco ุ ุฃุถุน incron ููุฑุงูุจุฉ ุธููุฑ ุงููููุงุช.  ูู ุฎูุงู ุธููุฑ ุงูููู ุ ุฃุนูุฏ ุชุณููุชู ููุง ูุฌุจ ููุณุฎู ุฅูู ุฎุงุฏู ูุฌููุน ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ูู ุฏููู ูุคูุช.  ุนู ุทุฑูู ุงููุทุน ุ ูุชู ุชุญููู ุงููููุงุช ูู ุงูุฏููู ุงููุคูุช ุฅูู svn.  ูู ุงููุฌููุน ุ ูุฏู ูู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ุชููุฆุฉ ูุญุฏุซุฉ ููุชุฑุฉ ูุนููุฉ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูููู.  ูู ุฑุฃูู ุ ูุฐุง ูููู ุ ูููู ูููู ุชุนุฏูู ุงููุธุงู ุฏูู ุฃู ูุดุงูู ูุฃู ูุงุฆูุฉ ููุถูุฉ. <br><br>  ูุจุฏู ุงูุชูููู ุงูุฅุถุงูู ุจุงูุดูู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">/var/ftp/cisco/<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>/autolog/ IN_CREATE /usr/ftp_scripts/incron_cisco.sh <span class="hljs-variable"><span class="hljs-variable">$#</span></span> $%</code> </pre> <br>  ุงูุจุฑูุงูุฌ ุงููุตู ููุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash if [[ $2 == "IN_MOVED_TO" || $2 == "IN_CREATE" ]]; then sleep 10 filial="${1%%-*}" #delete the longest substr -* search from the end of string.        scp -P 2222 -i /usr/ftp_scripts/ssh_key_private /var/ftp/cisco/in/autolog/$1 go@10.10.10.220:/usr/dfl_scripts/ciscobackup/$filial.conf fi</span></span></code> </pre> <br>  ูุชู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ุงููุฌุฏูู ุนูู ุฎุงุฏู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู ููููุง ููุฌุฏูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash logfile=/usr/dfl_scripts/log_cisco.txt rm $logfile now=$(date +"%d_%m_%Y") cd /usr/dfl_scripts/DFL_BACKUPS cp /usr/dfl_scripts/ciscobackup/* /usr/dfl_scripts/DFL_BACKUPS/cisco/ svn add * --force โq &gt;&gt; $logfile svn commit -m "added cisco backups $now" &gt;&gt; $logfile /usr/bin/mail it@mydomain.ru &lt; $logfile -s "   cisco  watchguard"</span></span></code> </pre> <br>  ููุง ุชุฑูู ุ ูุญู ููุง ูุชุญุฏุซ ุฃูุถูุง ุนู WatchGuard Firebox.  ููุช ูุณูู ุจุตุฑุงุญุฉ ูุนูู ุฏููู ูููุตู ููู.  ูุฐูู ุชูุน ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุนูู ุจุฑูุชูููู ููู ุงููููุงุช ุฅูู ููุณ ููุงู ุดุฑูุฉ ุณูุณูู.  ุงููุณุฎ ุงูุงุญุชูุงุทู WatchGuard ูู ุจุฑูุงูุฌ ูุตู ูููุตู ูุจู ูุตู ุณุงุนุฉ ูุนูููุง ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฃุณุจูุน.  ูุฑุฌู ููุงุญุธุฉ ุฃู ุจูุงุก ุงูุฌููุฉ ูุฏ ุชุบูุฑ ูู ุฅุตุฏุงุฑ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช 12.  ูู ุงูุณุงุจู ุ ูููู ุงูููุงู ุจุฐูู ูู ุฎูุงู ุตูุฑุฉ ุงุญุชูุงุทูุฉ ูุงุญุฏุฉ ุฅูู ุฃูุฑ ftp ุ ููุฏ ุชูุช ุฅุถุงูุฉ ุงูุชุตุฏูุฑ ุงูุขู.  ุนูู ุฐูู ุ ูู ุฃุชููู ูู ุชูููู ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ssh ุญุณุจ ุงูููุชุงุญ ุ ูุฐูู ูุชู ุงุณุชุฎุฏุงู ูููุงุช ุงููุฑูุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash watchguards=( "10.10.10.20:password1" "10.97.10.20:password2" ) now=$(date +"%Y_%m_%d") for wg in "${watchguards[@]}" ; do ip_addr="${wg%%:*}" pass="${wg##*:}" sshpass -p $pass ssh backupuser@$ip_addr -p 4118 &lt;&lt; ENDME backup image WG_$now.fxi export image WG_$now.fxi 123456qQ to ftp://user:mypass@ftp.mydomain.ru/in/autolog/WG_$ip_addr-$now.fxi ENDME Done</span></span></code> </pre> <br>  ูุชู ุชุตุฏูุฑ ุซูุงุฆูุงุช WatchGuard ุงููุดูุฑุฉ ููุท ุ ูุฐูู ูุน ุงูุดูู ูุงููุต ูู ููุฌุญ ุจุดูู ุฌูุฏ.  ุงูุชุจู ุฅูู ููุชุงุญ ุงูุชุดููุฑ: ุงูุฃุญุฑู ุงููุจูุฑุฉ ุงูุฅูุฒุงููุฉ ูุงูุญุฑูู ุงูุตุบูุฑุฉ ูุงูุฃุฑูุงู ุ ุนูู ุงูุฃูู 8 ุฃุญุฑู.  ูู ุญุงูุฉ ุนุฏู ุงูุงูุชุซุงู ุ ูุง ูุชู ุชูููุฐ ุงูุฃูุฑ ุจุจุณุงุทุฉ ุ ููุง ููุดุงุฑ ุฅููู ุจุงูุชุญุฏูุฏ ูู ููุงู ุงูุฎุทุฃ. <br><br>  ูุฐูู ุ ููุฏ ุชู ูู ุดูุก.  ุงูุขู ูุถุน ุงูุนููู ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจูุง ุงูุนุงูู ุชุญุช ูุธุงู Windows.  ููููู ุจุจุณุงุทุฉ ุนุฑุถ ุงููููุงุช ูุงูุงุฎุชูุงู ูู ุงููุณุชุนุฑุถ ุ ูููู ุชูุฒูู ุงูุฅุตุฏุงุฑ ูู ูุฑุงุฌุนุฉ ูุญุฏุฏุฉ ููุท ูู ุงูุนููู.  ูุถุน TorToSiteSVN <a href="https://tortoisesvn.net/">ูู ุงููููุน ุงูุฑุณูู</a> . <br><br>  ุนูู ุงูุฎุงุฏู ุ ูู ุจุฅูุดุงุก ูุณุชุฎุฏู ูุฏูู ุงูุญููู ุงููุงุฒูุฉ (ูุฑุงุกุฉ) ูููุฑูุน. <br><br>  ุซู ุชุญุชุงุฌ ุฅูู ุฅุฏุฎุงู ุงูุนููู ูู ุฎูุงู ูุงุฆูุฉ ุงูุณูุงู ุฅูู ุฃู ููู ูุงูุงุชุตุงู ุฅูู ูุณุชูุฏุน.  ููุณ ูู ุงูุถุฑูุฑู ุฅูุดุงุก ูุณุฎุฉ ูู ุงููุณุชูุฏุน ุจููุณู ุฅุฐุง ููุช ูุง ุชุฎุทุท ูุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงููููุงุช.  ุญุณููุง ุ ูู ุญุฐุฑูุง ูู ุฐูู ุ ุณุชุญุชุงุฌ ุฅูู ุงูุนูู ูุน ุงููุณุฎุฉ ูู ุฎูุงู ูุธุงู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑ ุ ูููุณ ููุท ูุน ุฌุฒุก ูู ูุธุงู ุงููููุงุช. <br><br><img src="https://habrastorage.org/webt/ad/em/rh/ademrhhknkvi238fsidrcopdz7k.png"><br><br><img src="https://habrastorage.org/webt/y0/rw/6u/y0rw6udsymqsvwkx6ogqf4l6vyq.png"><br><br>  ูุฌุนู ุงูุงุฎุชูุงูุงุช ูู ูููุงุช tex ุบูุฑ ุงูููุงุณูุฉ ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู SVN ูุง ุชุนุชุจุฑ ูุฐู ุงููููุงุช ุซูุงุฆูุฉ ุ ูููููุง ูุตูุฉ.  ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">svn propset svn:mime-type text/plain current_backup/*.bak</code> </pre> <br>  ูู ุจุชูููุฐ ูุฐุง ุงูุฃูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุถูู ูุธุงู ุงูุชุดุบูู Linux ุซู ูู ุจุงูุงูุชุฒุงู. <br><br>  ุญุณููุง ุ ุฅููู ุงูุชุบููุฑุงุช ุ ุงูุธุฑ ูู ุฎูุงู ุงูุนููู.  ูุฑู ุฃู ููุงุนุฏ ุฌุฏุงุฑ ุงูุญูุงูุฉ ูุฏ ุชุบูุฑุช: <br><br><img src="https://habrastorage.org/webt/ud/ie/jo/udiejoi7fpnr_ygvyccifwrkbig.png"><br><br><img src="https://habrastorage.org/webt/zj/4m/kd/zj4mkdel7tj349yu7hfg1hrbpjm.png"><br><br>  ุฅูู ุฃูุซุฑ ููุงุกูุฉ ูููุดุงูุฏุฉ ูู ุงููุชุตูุญ. <br><br><img src="https://habrastorage.org/webt/tv/ik/8m/tvik8ma1udofihed0kogho38qwq.png"><br><br>  ูู ุญุงูุฉ ุญุฏูุซ ุดูุก ูุง ุ ูููู ูููุณุคูู ุชูุฒูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุงููุทููุจุฉ ุฏูู ุฅููุงุกุงุช ุบูุฑ ุถุฑูุฑูุฉ ูู ุงูุชุงุฑูุฎ ุงููุทููุจ. <br><br><img src="https://habrastorage.org/webt/z3/pn/q5/z3pnq5ofkfenlthrkdkjs4qyzcs.png"><br><br>  ุฑุบู ุฃูู ุนุงุฏุฉ ูุง ูููู ุงูุฃุญุฏุซ ูุงูููุง. <br><br>  ุจุทุฑููุฉ ูุง ุ ุฌุงุก ุงุฎุชุฑุงุน ุงูุฏุฑุงุฌุฉ.  ููููุง ุชุนูู ุนูู ุจุฑูุงูุฌ D-link DFL ููุฐ ุนุงู ุชูุฑูุจูุง ุ ุชูุงููุง ููุง ุฃุญุชุงุฌ ุ ูุฃุญูุงููุง ูุณุงุนุฏ ูุฐุง ูุซูุฑูุง. <br><br>  ุขูู ุฃู ูุฃุชู ุดุฎุต ูู ูุชูุงูู ุงููุฏูู. <br><br>  ุงููุฑุงุฌุน: <br><br>  <a href="https://habr.com/ru/post/96101/">ุญูู ุฒูุฎ</a> <br>  <a href="https://www.watchguard.com/help/docs/fireware/12/en-US/CLI/index.html">WatchGuard Firebox CLI manual</a> <br>  <a href="http://www.bubnovd.net/2017/10/oxidized.html">ุงููุคูุณุฏ ุงููุคูุฏ</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480386/">https://habr.com/ru/post/ar480386/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480368/index.html">ุงูุชูุงุท ุชุณุฑุจ ุงูุฐุงูุฑุฉ ูู C / C ++</a></li>
<li><a href="../ar480370/index.html">ูุคุชูุฑ DEFCON 19. ุฑุคุณุงุก ุงูุญุจ ุฅูุณู ุ ูุงููุชุณูููู ุฃูุถุง</a></li>
<li><a href="../ar480374/index.html">React Robotics 'DogBot ูุชุงุจุน ุซูุฑุฉ ูู ุตูุงุนุฉ ุงูุจูุงุก ูุงูุชุดููุฏ</a></li>
<li><a href="../ar480376/index.html">ูู ุฃูุนุงุจ ุงูููุจููุชุฑ ุฅูู ุงูุฑุณุงุฆู ุงูุณุฑูุฉ: ูุงูุด ุจูุถ ุนูุฏ ุงููุตุญ ูู ุฅุตุฏุงุฑุงุช ุงูููููู</a></li>
<li><a href="../ar480378/index.html">14 ูุดุฑูุนูุง ููุชูุญ ุงููุตุฏุฑ ูุถุฎ ููุงุฑุงุช "ุนููู ุงูุจูุงูุงุช" (ุณููุฉ ูุนุงุฏูุฉ ูุตุนุจุฉ)</a></li>
<li><a href="../ar480388/index.html">ูุคุชูุฑ HACKTIVITY 2012. ูุธุฑูุฉ ุงูุงููุฌุงุฑ ุงููุจูุฑ: ุชุทูุฑ ุงูุฎุฏุงุน ูู ุชุนุฒูุฒ ุงูุฃูู. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar480390/index.html">ONYX BOOX Livingstone - ูุงุฑุฆ ุจุชูุณูู ุดุงุฆุน ูู ุชุตููู ุบูุฑ ุนุงุฏู</a></li>
<li><a href="../ar480392/index.html">ูุคุชูุฑ HACKTIVITY 2012. ูุธุฑูุฉ ุงูุงููุฌุงุฑ ุงููุจูุฑ: ุชุทูุฑ ุงูุฎุฏุงุน ูู ุชุนุฒูุฒ ุงูุฃูู. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar480394/index.html">ุฅุฏุฎุงู ูุญุงุณุจุฉ ููุฑุฑ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุนูุงุฆููุฉ</a></li>
<li><a href="../ar480396/index.html">ูุตูุน ุชุทุจูู ุณุทุญ ุงูููุชุจ ุงูุฃุตูู ุนุจุฑ ุงููุธุงู ุงูุฃุณุงุณู ุนูู Angular</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>