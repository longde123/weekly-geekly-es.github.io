<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏾 🤞🏿 🕵🏼 Comment commencer à écrire du code Lisp? 👨🏾‍🚀 🏴󠁧󠁢󠁥󠁮󠁧󠁿 🧛🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous voyez souvent des débutants essayer Common Lisp et se plaindre ensuite qu'il est impossible de travailler normalement avec lui. En règle générale...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment commencer à écrire du code Lisp?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413061/"><p>  Vous voyez souvent des débutants essayer Common Lisp et se plaindre ensuite qu'il est impossible de travailler normalement avec lui.  En règle générale, cela est dû au fait qu'ils ne comprennent pas comment configurer un processus qui fournit la même «réponse rapide» de l'environnement de développement, lorsque vous avez modifié la fonction, compilé, et que les modifications ont immédiatement commencé à être utilisées dans le programme déjà en cours d'exécution sans le redémarrer. </p><br><p> Vous pouvez comprendre à quoi cela ressemble en regardant une vidéo sur youtube qui montre le développement interactif sur Common Lisp. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/xzTH_ZqaFKI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><p>  Aujourd'hui, je veux montrer comment mettre en place un environnement de développement pour un tel développement.  En 2018, c'est devenu très simple, grâce à l'amélioration constante du réglage. </p><br><p>  Je m'excuse à l'avance pour les vidéos suivantes enregistrées à Asciinema, et Habrahabr ne les prend pas en charge.  Cliquez sur les captures d'écran de la console pour regarder des vidéos. </p><br><p>  Tout d'abord, installez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SBCL</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Roswell</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Emacs</a> .  Je vais parler de l'exemple de l'installation de tout dans OSX, et je serai heureux si dans les commentaires vous partagez votre expérience sur Windows et Linux.  Ensuite, je peux compléter l'article avec des exemples pour les trois plates-formes. </p><br><p>  SBCL est l'une des nombreuses implémentations de Common Lisp.  De l'open source, le plus rapide.  Si vous le souhaitez, sur SBCL, vous pouvez exécuter du code à une vitesse comparable au code C ++, mais en même temps avoir tous les avantages d'un développement interactif rapide. </p><br><p>  Roswell est un utilitaire pour installer et exécuter des programmes Common Lisp.  Elle sait notamment comment exécuter Emacs préconfiguré, ainsi que collecter des programmes dans des binaires. </p><br><p>  Vous connaissez probablement Emacs - un tel système d'exploitation qui dispose également d'un éditeur de code.  Vous pouvez écrire en Common Lisp et dans n'importe quel autre éditeur, mais Emacs a aujourd'hui la meilleure intégration et le meilleur support pour l'édition sémantique du code.  Avec lui vous n'avez pas à compter les parenthèses, il fait tout pour vous. </p><br><h3 id="itak-esli-vy-ispolzuete-osx-to-nuzhno-sdelat">  Donc, si vous utilisez OSX, vous devez faire </h3><br><pre><code class="bash hljs">brew install roswell emacs</code> </pre> <br><p>  Après avoir brouillé le disque et mis tout ce dont vous avez besoin, exécutez simplement dans le terminal: </p><br><pre> <code class="bash hljs">ros run</code> </pre> <br><p>  Cette commande vous donnera automatiquement la dernière version de SBCL et démarrera Lisp repl, où vous pourrez saisir le code: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/hm/t7/qs/hmt7qs9r7k60pg9e29ysqa5h6rm.png"></a> </p><br><p>  Mais ce n'est pas le cas, ce n'est pas ainsi conçu.  Configurons donc Emacs pour un développement complet: </p><br><pre> <code class="bash hljs">ros emacs</code> </pre> <br><p>  L'équipe lancera Emacs dans la console et configurera Quicklisp, le gestionnaire de packages pour Common Lisp. <br>  Mais avant de continuer, configurons le terminal, emacs et OSX pour qu'ils fonctionnent bien ensemble. </p><br><h3 id="snachala-nado-v-osx-i-iterm-pomenyat-nekotorye-nastroyki">  Tout d'abord, vous devez modifier certains paramètres dans OSX et iTerm </h3><br><p>  Faites fonctionner CapsLock comme Control.  Dans Emacs, nulle part sans lui: </p><br><p><img src="https://habrastorage.org/webt/oi/ep/zh/oiepzhbmmqjcspsciiwocbvmhiu.png"></p><br><p>  Désactivez ensuite toutes les combinaisons associées à l'utilisation du contrôle et des flèches dans les prises de vue de MissionControl: </p><br><p><img src="https://habrastorage.org/webt/dm/m_/im/dmm_imeldeg6ajv1vevbkeexrss.png"></p><br><p>  Ensuite, mettez iTerm2 et changez le comportement Alt dans les paramètres de profil de Normal à Esc +: </p><br><p><img src="https://habrastorage.org/webt/i7/0h/r7/i70hr7zpgapyz_6_rcn1ix68lek.png"></p><br><p>  Après cela, créez un fichier avec une configuration minimale pour Emacs, <code>~/.emacs.d/init.el</code> : </p><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">package-initialize</span></span>) (<span class="hljs-name"><span class="hljs-name">require</span></span> 'package) (<span class="hljs-name"><span class="hljs-name">add-to-list</span></span> 'package-archives '(<span class="hljs-string"><span class="hljs-string">"MELPA"</span></span> . <span class="hljs-string"><span class="hljs-string">"http://melpa.milkbox.net/packages/"</span></span>) <span class="hljs-literal"><span class="hljs-literal">t</span></span>) (<span class="hljs-name"><span class="hljs-name">defun</span></span> install-package (<span class="hljs-name"><span class="hljs-name">package</span></span>) (<span class="hljs-name"><span class="hljs-name">unless</span></span> (<span class="hljs-name"><span class="hljs-name">package-installed-p</span></span> package) (<span class="hljs-name"><span class="hljs-name">package-refresh-contents</span></span>) (<span class="hljs-name"><span class="hljs-name">package-install</span></span> package))) (<span class="hljs-name"><span class="hljs-name">install-package</span></span> 'paredit) (<span class="hljs-name"><span class="hljs-name">install-package</span></span> 'expand-region) (<span class="hljs-name"><span class="hljs-name">defun</span></span> setup-lisp-mode () (<span class="hljs-name"><span class="hljs-name">require</span></span> 'paredit) (<span class="hljs-name"><span class="hljs-name">paredit-mode</span></span>) (<span class="hljs-name"><span class="hljs-name">define-key</span></span> paredit-mode-map (<span class="hljs-name"><span class="hljs-name">kbd</span></span> <span class="hljs-string"><span class="hljs-string">"Cw"</span></span>) 'paredit-backward-kill-word)) (<span class="hljs-name"><span class="hljs-name">add-hook</span></span> 'lisp-mode-hook 'setup-lisp-mode) (<span class="hljs-name"><span class="hljs-name">add-hook</span></span> 'emacs-lisp-mode-hook 'setup-lisp-mode) <span class="hljs-comment"><span class="hljs-comment">;;  Cw           ;;  kill-region (global-set-key (kbd "Cw") 'backward-kill-word) ;;      kmacro- (global-set-key (kbd "Cx Ck") 'kill-region) ;;  indent-new-comment-line (global-set-key (kbd "Mj") (lambda () (interactive) (join-line -1))) ;;    (global-set-key (kbd "Cc rs") 'replace-string) (global-set-key (kbd "Cc rr") 'replace-regexp) ;;    emacs    ;;      =,   ;;    . (global-set-key (kbd "Cc =") 'er/expand-region) ;;      , ;;        (global-set-key (kbd "Cc c") 'comment-or-uncomment-region) (global-set-key (kbd "Cc C-\\") 'goto-last-change) (setq custom-file "~/.emacs.d/customizations.el") (when (file-exists-p custom-file) (load custom-file))</span></span></code> </pre> <br><p>  Après cela, exécutez à nouveau ros emacs, appuyez sur <code>Alt-X</code> et entrez la commande <code>slime</code> .  En conséquence, nous obtenons la ligne de commande pour entrer des commandes lisp: </p><br><p><img src="https://habrastorage.org/webt/oy/rw/2p/oyrw2p0znkhm6mylih7tr2f8iaw.png"></p><br><h3 id="teper-mozhno-uzhe-kodit">  Maintenant, vous pouvez déjà coder </h3><br><p>  Mais nous n'entrerons pas de commandes dans la relecture, il est préférable de commencer immédiatement le développement d'un microservice.  Si vous n'avez besoin que d'une API, le moyen le plus simple consiste à utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ningle</a> .  Si vous avez besoin d'un framework plus avancé, comme une jungle, vous pouvez essayer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Radiance</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Caveman2</a> .  Mais maintenant, nous ne ferons rien de compliqué, mais nous allons créer un simple cookie HTTP. </p><br><p>  Ouvrez le fichier <code>server.lisp</code> ( <code>Cx Cf server.lisp</code> ) dans Emacs et commencez à écrire du code.  Quelque chose comme ça: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/_h/3v/xy/_h3vxyvwm-d-ba4rjvyfc4f3x2e.png"></a> </p><br><p>  En conséquence, un serveur Web sera lancé à l'intérieur de votre instance, dans lequel vous pourrez ajouter des itinéraires et redéfinir les vues lors de vos déplacements. </p><br><p>  Voici tout le code, pour les paresseux: </p><br><pre> <code class="lisp hljs"><span class="hljs-comment"><span class="hljs-comment">;; Micro-framework for building API (ql:quickload :ningle) ;; Now ningle is installed and we need to install a clack which is analog of WSGI ;; stack from Python ;; I've pressed Cc Cc to eval this form (ql:quickload :clack) ;; To parse json: (ql:quickload :jonathan) (defvar *app* (make-instance 'ningle:&lt;app&gt;)) (setf (ningle:route *app* "/") ;; in case, if you need to parse or serialize JSON, ;; use Jonthan library. (jonathan:to-json '(:foo 100500))) (defvar *server* nil "This variable will store currently running server instance.") (defun start () (if *server* (format t "Server already started") (setf *server* (clack:clackup *app*)))) (defun stop () (if *server* (clack:stop *server*) (format t "Server is not running")))</span></span></code> </pre> <br><p>  En Lisp, les constructions entre crochets sont appelées «formes».  Les formulaires situés en haut et non imbriqués dans un autre sont appelés de niveau supérieur.  Ces formulaires peuvent être compilés en cliquant sur <code>Cc Cc</code> lorsque le curseur se trouve à l'intérieur d'un tel formulaire.  Si vous reliez CapsLock sur <code>ontrol</code> , cette combinaison est très pratique à appuyer. </p><br><p>  Une fois le formulaire compilé, une nouvelle version de la fonction prend immédiatement effet et un redémarrage du serveur n'est pas nécessaire.  Il est donc très pratique de déboguer et de corriger les bogues.  De plus, vous pouvez configurer le test automatique immédiatement après avoir compilé une partie du code, mais c'est une tout autre histoire. </p><br><p>  Si vous êtes intéressé par d'autres sujets, écrivez dans les commentaires, j'essaierai également de publier des articles à leur sujet. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413061/">https://habr.com/ru/post/fr413061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413045/index.html">macOS + Windows 10 sur un disque externe</a></li>
<li><a href="../fr413049/index.html">Configurer BGP pour contourner les verrous, version 3, sans VPS</a></li>
<li><a href="../fr413051/index.html">SGBD sur colonne versus minuscule, que diriez-vous d'un compromis?</a></li>
<li><a href="../fr413055/index.html">Comment créer une communauté mondiale de startups autour du contenu informatique: une histoire de démarrage de Techstars</a></li>
<li><a href="../fr413059/index.html">Comment créer une protection contre la fraude d'entreprise Conférence à YaC 2018</a></li>
<li><a href="../fr413063/index.html">Test d'une tasse thermo maison sur une transition de phase</a></li>
<li><a href="../fr413065/index.html">Nouvelles fonctionnalités prévues dans C # 8.0</a></li>
<li><a href="../fr413069/index.html">Recherche audio, référencement audio et aide pour les podcasts - les spécialistes Google y travaillent déjà</a></li>
<li><a href="../fr413071/index.html">DeepMind a appris à l'IA à jouer à des jeux vidéo YouTube</a></li>
<li><a href="../fr413073/index.html">Comment travailler avec le cloud: 30 documents, guides pratiques et conseils sur le thème du PD, du SI et de l'IaaS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>