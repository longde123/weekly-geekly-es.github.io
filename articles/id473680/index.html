<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â˜ï¸ ğŸ‘©ğŸ¿â€âš•ï¸ ğŸ“¢ AC nya. Bagian II ğŸ¤™ğŸ¿ ğŸ¥© ğŸ‘¨ğŸ¼â€ğŸ³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada bagian ini, saya akan memberi tahu Anda opsi untuk integrasi AC "sederhana" (dan, secara umum, hampir semua perangkat yang dikendalikan melalui I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AC nya. Bagian II</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473680/"><img src="https://habrastorage.org/webt/y_/r9/qi/y_r9qi_etxishykvysm5-e6gqem.jpeg" align="left" title="Ara hitam kecil">  Pada bagian ini, saya akan memberi tahu Anda opsi untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">integrasi AC</a> "sederhana" (dan, secara umum, hampir semua perangkat yang dikendalikan melalui IR) menggunakan WiFi &lt;=&gt; IR gateway. <br><br>  Untuk membuatnya lebih menarik, saya memilih gateway yang populer (omong-omong, Yandex menggunakannya untuk Alice-nya).  Anda dapat membeli satu di Ali, harganya sekitar 1200 rubel (Yandex lebih mahal). <br><br>  Perangkat ini cukup kompak (mudah pas di telapak tangan Anda), dari organ yang terlihat ada satu LED biru kecil yang tidak mencolok dan tombol untuk memasangkan.  Segala sesuatu yang lain tersembunyi di balik kasing transparan inframerah hitam.  Anda dapat menggunakan port USB yang tersedia (catu daya, komputer, dll.) Sebagai sumber listrik.  Gateway terhubung dengan kabel microUSB (disediakan atau dengan cara apa pun). <br><br>  Kekhasan perangkat ini adalah bahwa ia dibangun di atas "terkenal di kalangan sempit" esp8266, yang berarti bahwa ia dapat "dijinakkan" dengan cukup mudah. <br><a name="habracut"></a><br><h2>  Opsi "untuk yang terkecil" </h2><br>  Sebelum mengganti perangkat, saya mencoba menggunakannya dalam mode normal: Saya menginstal aplikasi TuyaSmart di telepon (ada versi untuk Android dan iPhone), dan kemudian semuanya sederhana: <br><br><ul><li>  mendaftar di aplikasi, </li><li>  kita akan pergi melalui wizard kecil untuk menghubungkan perangkat baru (untuk ini, gateway harus terhubung ke daya dan masuk ke mode "berpasangan" menggunakan satu tombol di atasnya, </li><li>  setelah gateway muncul di aplikasi, kami membuat "panel kontrol" baru - penyihir kecil lain di mana Anda memilih jenis perangkat (dalam kasus saya - Penyejuk udara), kemudian pabrikan dipilih (tidak ada Electrolux dalam aplikasi, tetapi berfungsi dengan baik ketika memilih Midea).  Segera kami datang dengan "nama" konsol baru (saya memilih "Mr. White"). </li></ul><br>  Itu saja.  Setelah itu, remote control berikut muncul di ponsel: <br><br><img src="https://habrastorage.org/webt/e5/ue/u_/e5ueu_qvxtkqvtt6itcpst7gpke.jpeg" align="right">  Dengannya, Anda dapat mengontrol fungsi dasar dasar: <br><br><ul><li>  hidup / mati </li><li>  pengaturan suhu </li><li>  pemilihan mode operasi ("Otomatis", "Pendinginan", "Pemanasan", "Kipas"), </li><li>  pemilihan kecepatan kipas ("Otomatis", "Rendah", "Sedang", "Tinggi"). </li></ul><br>  Secara umum, sudah mungkin digunakan untuk remote control, tetapi di mana "rumah pintar" dan integrasi? <br><br>  Karena ini adalah cara yang sederhana, ini buruk dengan rumah pintar, tetapi dengan integrasi itu agak lebih baik. <br><br>  Pada awalnya tidak ada "fly in the salep" - tidak ada integrasi dengan Apple HomeKit, jadi Siri belum tersedia, tetapi dengan platform pesaing lainnya semuanya jauh lebih menyenangkan: <br><br><ul><li>  Untuk Amazon Alexa - ada keterampilan Tuya Smart.  Sudah cukup untuk mengaktifkannya dan menunjukkan di dalamnya akun Anda, yang Anda masukkan saat pendaftaran dalam aplikasi - Anda dapat mengontrol suara AC. </li><li>  Demikian pula, Anda dapat menghubungkan Tuya Smart ke Google Assistant. </li></ul><br>  Dalam kedua kasus, bahasa Rusia tidak didukung, tetapi suara dikendalikan dengan mudah dan sederhana.  Saya menemukan perintah berikut: <br>  - Alexa, nyalakan Tuan Putih <br>  - Hei, Google, atur Mr. White ke 24 derajat <br>  - Alexa, matikan Mr.White <br><br>  Biarkan saya mengingatkan Anda bahwa saya telah menerapkan kontrol suara menggunakan Amazon Echo Dot dan Google Home Mini - kedua perangkat bekerja dengan tim yang identik. <br><br>  By the way, perintah suara mana yang dapat Anda kontrol mode operasi dan laju aliran udara - saya tidak menemukan.  Jika seseorang memberi tahu saya, saya akan berterima kasih. <br><br>  Dan kemudian integrasi "semi-otomatis" dengan UD dibuat: ketika suhu di ruangan naik di atas ambang batas - pengontrol UD mengirimkan pesan yang meminta untuk menghidupkan AC, dan saya, dari jarak jauh, menggunakan aplikasi TuyaSmart, menyalakan AC dalam mode yang diperlukan. <br><br>  Solusinya adalah "begitu-begitu", tentu saja, tetapi setidaknya entah bagaimana Anda dapat menggunakannya. <br><br>  Tapi ini bukan cara kami - kami melanjutkan: <br><br><h2>  Jedi Way </h2><br><h3>  Otopsi dan persiapan </h3><br>  Ada opsi untuk mem-flash perangkat tanpa membukanya, metode ini dijelaskan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Metode ini bagi saya tampaknya tidak perlu rumit (begitu banyak gerakan, ketika firmware hanya membutuhkan 4 kabel untuk solder), dan itu menarik untuk melihat ke dalam. <br><br>  Sayangnya, dalam prosesnya saya terbawa suasana dan lupa untuk mengambil foto, jadi saya akan menunjukkan foto orang lain: <br><br><img src="https://habrastorage.org/webt/di/wv/bx/diwvbx4obuman2fxbcx9ncpxlhe.jpeg" width="360"><img src="https://habrastorage.org/webt/e3/dv/xd/e3dvxdmwrqauy1rhoqmdzlyolsu.jpeg" width="360"><br>  Lebih banyak foto dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dilihat di sini</a> . <br><br>  Foto tersebut dengan jelas menunjukkan bahwa modul TYWE3S digunakan ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lembar data</a> yang sangat sederhana di Google). <br><br>  Sekarang Anda perlu mem-flash modul.  Firmware asli ditimpa dan tidak dapat dipulihkan. <br><br>  Firmware dilakukan dengan sangat sederhana: kami mengambil lingkungan Arduino (atau Atom, atau yang lainnya - pilih sesuai selera Anda).  Unduh sketsa dengan firmware <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tasmota</a> ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lingkungan pengembangan</a> .  Kemudian kita terhubung pada modul TYWE3S RX, TX, GND, VCC dari serial-usb mana pun (jangan campur - Anda perlu daya 3,3V dan level sinyal yang sesuai, jika ada 5V, Anda harus memesan gateway baru).  Sebelum menerapkan daya, jangan lupa untuk menutup (dengan cara yang mudah) GPIO0 modul ke ground, sehingga menempatkan modul ke mode firmware.  Firmware. <br><br>  Tidak diperlukan untuk mengkonfigurasi firmware - semuanya dapat dibiarkan dalam kode "sebagaimana adanya", kita hanya perlu "menjinakkan" modul. <br><br>  Jika semuanya dilakukan dengan benar (setelah melepas kabel untuk firmware, tentu saja), nyalakan gateway.  Di ponsel atau komputer Anda, aktifkan pencarian untuk jaringan WiFi - jaringan baru akan muncul dengan nama sonoff-xxxx (di mana xxxx adalah angka), yang diambil oleh perangkat kami. <br><br>  Kami terhubung ke jaringan ini dan pergi ke alamat: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">192.168.4.1</a> - ini adalah antarmuka web gateway kami. <br><br>  Pertama, dalam pengaturan gateway, tentukan jaringan WiFi rumah dan kata sandi untuknya (perangkat akan reboot dan terhubung ke jaringan rumah).  Selanjutnya, semua tindakan lebih mudah dilakukan di dalamnya.  Secara alami, Anda perlu mencari tahu dengan cara apa alamat gateway yang diterima di jaringan rumah. <br><br>  Kami pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman dengan rilis firmware Tasmota</a> .  Unduh dua file - sonoff-minimal.bin dan sonoff-ir.bin <br><br>  Sekarang, menggunakan antarmuka web gateway, kami memperbarui firmware dalam dua tahap - pertama kami menjahit versi "minimum", dan langkah kedua adalah sonoff-ir. <br><br>  Setelah semua tindakan sederhana ini, kita sudah memiliki modul di tangan kita dengan versi firmware saat ini, tetap hanya untuk mengkonfigurasinya sebagai berikut: <br><br><img src="https://habrastorage.org/webt/mr/ti/wh/mrtiwhec5gh-ggeret8rsschi9a.png" align="left" width="350"><br><br>  Sebenarnya, ini adalah konfigurasi minimum yang diperlukan - dalam contoh yang dijelaskan kami akan berinteraksi dengan modul menggunakan permintaan GET (walaupun dimungkinkan juga melalui MQTT). <br><br>  Anda dapat memeriksa pengoperasian modul, dan pada saat yang sama menemukan sesuatu yang berguna di konsolnya (tautannya tersedia dari halaman utama antarmuka web).  Buka konsol dan lihat bagaimana modul "hidup". <br><br>  Sekarang Anda dapat mulai mempelajari antarmuka kontrol pendingin udara.  Untuk melakukan ini, ambil remote control standar dari AC dan tekan tombol daya.  Jika semuanya baik-baik, maka garis seperti: <br><br><pre><code class="plaintext hljs">19:24:09 MQT: tele/IRbridge/RESULT = {"IrReceived":{"Protocol":"COOLIX","Bits":24,"Data":"0xB29F70","DataLSB":"0x4DF90E","Repeat":0,"IRHVAC":{"Vendor":"COOLIX","Model":-1,"Power":"on","Mode":"cool","Celsius":"on","Temp":22,"FanSpeed":"min","SwingV":"off","SwingH":"off","Quiet":"off","Turbo":"off","Econo":"off","Light":"on","Filter":"off","Clean":"on","Beep":"off","Sleep":-1}}}</code> </pre> <br>  Modul menerima dan "menguraikan" perintah IR dari remote control.  Yaitu  segera dihapus dari konsol protokol mana (dalam kasus saya ini COOLIX) yang digunakan oleh unit pendingin udara biasa dan parameter apa yang dikodekan dalam paket. <br><br>  Hebat, sekarang Anda sudah bisa mengendalikan AC.  Untuk melakukan ini secara bermakna, lebih baik membiasakan diri dengan deskripsi perintah ini. <br><br>  Untuk verifikasi, kami akan mengirim, misalnya, perintah berikut melalui konsol gateway (Saya akan memberikan semua perintah untuk AC saya, Anda mungkin memiliki protokol kontrol yang berbeda): <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"Cool","FanSpeed":"min","Temp":22}</code> </pre> <br>  Ajaibnya, AC menyala segera dan dalam mode yang diperlukan.  Keajaiban <br><br>  Matikan AC dengan perintah berikut: <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"Off"}</code> </pre> <br>  Secara umum, modul disiapkan dan diuji. <br><br>  Pergi ke integrasi! <br><br><h3>  AC + Domoticz = persahabatan selamanya! </h3><br>  Saya menggunakan Domoticz sebagai sistem otomatisasi utama, jadi kami akan menjadi "teman" dengan sistem khusus ini. <br><br>  Rencana kerjanya adalah sebagai berikut: <br><br><ol><li>  Buat beberapa perangkat virtual: saklar, dua penyeleksi (untuk memilih mode dan laju aliran udara) dan termostat. </li><li>  Tambahkan beberapa skrip yang, dengan tindakan dengan perangkat virtual, akan mengirim perintah ke gateway. </li><li>  Verifikasi bahwa semuanya dikelola sebagaimana mestinya. </li></ol><br><h4>  Perangkat virtual </h4><br>  Saat membuat perangkat, Anda harus menentukan nama mereka.  Saya membawa milik saya, Anda dapat memilih yang lain, hanya ingat untuk memperbaiki skrip untuk mereka nanti. <br><br>  Buat saklar biasa (ketik "Switch") dengan nama "HVAC".  Sakelar ini akan digunakan untuk menghidupkan / mematikan satu tombol. <br><br>  Untuk memilih mode pengoperasian AC, tambahkan sakelar virtual "Mode HVAC" (ketik "Sakelar Pemilih") dengan karakteristik berikut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t9/fe/dn/t9fednom5tcyxsgs-htc4vi2pkq.png"></div><br>  Harap dicatat bahwa di sini saya hanya membuat dua mode - "pemanasan" dan "pendinginan".  Meskipun AC masih memiliki mode "Auto" dan "Fan", mereka tidak berguna bagi saya - yang pertama bekerja aneh dan tidak nyaman untuk rumah tangga, dan yang kedua tidak pernah dibutuhkan sama sekali.  Jika Anda menggunakan mode ini, Anda bisa menambahkannya ke pemilih. <br><br>  Demikian pula, buat pemilih "HVAC-FanSpeed": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xj/lj/3x/xjlj3x3mjwt9wtxyh0ve4ucljse.png"></div><br>  Sekarang tinggal membuat termostat HVAC-Temp saja (tipe perangkatnya adalah Thermostat Setpoint). <br><br><h4>  Skrip </h4><br>  Saya entah bagaimana lebih dekat dengan skrip Domoticz di Lua (Perangkat), jadi saya melakukan apa yang lebih nyaman bagi saya. <br><br>  Untuk jelasnya - alamat IP gateway IR di jaringan rumah saya adalah 10.40.20.254 dan alamat ini muncul di salah satu skrip, Anda harus memperbaikinya pada alamat gateway Anda. <br><br>  Buat tiga skrip berikut. <br><br>  HVACauto: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(deviceValue) &lt; <span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(otherdevices_temperature[<span class="hljs-string"><span class="hljs-string">''</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 10'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end commandArray['HVAC'] = "On" end end return commandArray</span></span></code> </pre> <br>  Skrip ini membandingkan suhu pengaturan AC dan suhu dari sensor "Ruang" untuk memilih mode yang benar - "pendinginan" atau "pemanasan". <br><br>  Daya HVAC: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName == <span class="hljs-string"><span class="hljs-string">'HVAC'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> deviceValue == <span class="hljs-string"><span class="hljs-string">"Off"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">'  '</span></span>) commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 0'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Off" else if (tonumber(otherdevices['HVAC-Temp']) &lt; tonumber(otherdevices_temperature[''])) then commandArray['HVAC-Mode'] = 'Set Level: 10' --"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end end end end return commandArray</span></span></code> </pre> <br>  Skrip ini memantau status sakelar AC "umum" dan memilih mode operasi yang diinginkan saat menghidupkan atau mematikan AC. <br><br>  Dan skrip utama HVAC terakhir: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> cmnd <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]==<span class="hljs-string"><span class="hljs-string">'Off'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"Off"}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","FanSpeed":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","Temp":'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>]..<span class="hljs-string"><span class="hljs-string">'}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(cmnd) <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">execute</span></span>(<span class="hljs-string"><span class="hljs-string">"wget '"</span></span>..cmnd..<span class="hljs-string"><span class="hljs-string">"'"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commandArray</code> </pre> <br>  Tapi skrip ini yang paling penting.  Ini menghasilkan perintah yang benar dengan parameter yang diperlukan dan mengimplementasikan permintaan GET ke gateway.  Jangan lupa untuk memperbaiki alamat IP gateway Anda di dalamnya. <br><br>  Sebenarnya, itu saja.  Anda dapat mengganti antarmuka Domoticz ke tab yang sesuai dan "tekan tombol" untuk mengontrol AC.  Jika semuanya dilakukan dengan benar, sistem pendingin udara akan dikontrol sesuai kebutuhan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5r/g0/yn/5rg0yn1zdupf6esyisywno0xck0.png" width="600"></div><br><h4>  Fitur </h4><br>  Opsi ini melalui gateway IR memiliki satu kelemahan - kurangnya umpan balik.  Yaitu  jika seseorang menggunakan remote control standar, maka status di Domoticz tidak akan berubah dan akan menampilkan informasi yang tidak lagi relevan. <br><br>  Secara umum, ini tidak terlalu mengganggu (terutama jika Anda tidak menggunakan remote control IR, tetapi hanya menggunakan kemampuan UD). <br><br>  Anda dapat, tentu saja, memantau dengan gateway IR yang perintah dikirim melalui IR (gateway mengirimkan informasi ini melalui MQTT) dan memprogram lebih sedikit sehingga bahkan ketika menggunakan remote control standar, status dan parameter saat ini diatur dalam sistem DD. <br><br>  Tetapi sementara saya tidak punya waktu untuk ini, dan saya juga tidak memiliki kebutuhan khusus (lebih mudah untuk "melihat" ke dalam sistem pengawasan video dan melihat apakah AC dihidupkan). <br><br><h2>  Lalu? </h2><br>  Secara alami, kita tidak berhenti di situ. <br><br>  Minimal, implementasi manajemen saat ini sudah jauh lebih fungsional daripada opsi "untuk yang terkecil". <br><br>  Setelah "meneruskan" AC di Domoticz, saya juga mengendalikan Siri: <br><br><img src="https://habrastorage.org/webt/xb/ks/rh/xbksrht6x7oixacm704aq57tixs.png" align="left" width="350">  Setelah kesempatan muncul untuk mengontrol sistem UD (dan terutama, suara melalui Siri), kebutuhan untuk menggunakan remote IR standar menghilang. <br><br>  Dalam waktu dekat, kami akan menulis skrip "musim dingin" yang, jika tidak ada pemilik dan pada suhu "luar" setidaknya -10, gunakan sumber daya AC untuk menghangatkan rumah (lebih hemat energi dalam mode ini daripada lantai yang dipanaskan dengan listrik, tetapi kurang nyaman), dan ketika pemilik kembali, mereka kembali beralih ke pemanas di bawah lantai. <br><br>  Tentu saja, akan ada skrip "musim panas" yang secara otomatis akan mengaktifkan mode pendinginan dan mempertahankan suhu yang ditetapkan rumah. <br><br>  Secara alami, semua kasus penggunaan yang mungkin hanya dibatasi oleh imajinasi.  Jangan menahan;) <br><br><h2>  Bagian III? </h2><br>  Saat ini, modul WiFi yang diumumkan untuk mengendalikan AC belum muncul. <br><br>  Jika ada waktu (malam musim dingin yang panjang), saya akan mengambil pendekatan lain untuk modul antarmuka pendingin udara dan masih mencoba untuk "menangkap" perintah pendingin udara internal. <br><br>  Jadi ... tetap disini! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473680/">https://habr.com/ru/post/id473680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473668/index.html">Mengapa Bitrix - Bitrix</a></li>
<li><a href="../id473670/index.html">Stoloto: cara memperkenalkan ponsel ke lotre</a></li>
<li><a href="../id473672/index.html">Kenapa, Bitrix? Atau dunia peri 1C</a></li>
<li><a href="../id473676/index.html">Kerentanan backport di RouterOS membahayakan ratusan ribu perangkat</a></li>
<li><a href="../id473678/index.html">Sistem untuk menerima salinan memori di perangkat yang menjalankan Android melalui saluran nirkabel</a></li>
<li><a href="../id473684/index.html">Dari tulip mania hingga perdagangan elektronik: opsi apa saja, dan bagaimana investor menggunakannya hari ini</a></li>
<li><a href="../id473692/index.html">Ennoble Phicomm K3C Wi-Fi Router</a></li>
<li><a href="../id473694/index.html">Rusia adalah pusat pengembangan CAD global. Tahukah Anda tentang ini?</a></li>
<li><a href="../id473702/index.html">Apa yang sharding di blockchain terahash</a></li>
<li><a href="../id473704/index.html">Kawan vs. bukan bro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>