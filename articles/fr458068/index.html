<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèí üëÜüèø üíÄ PVS-Studio pour Visual Studio üíµ üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© ü§úüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup de nos articles se concentrent sur n'importe quoi, mais pas sur l'outil PVS-Studio lui-m√™me. Alors que nous faisons beaucoup pour rendre son ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio pour Visual Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458068/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b55/042/8ad/b550428adfba0288bfdfce8d5f15e6fa.png"></div><br>  Beaucoup de nos articles se concentrent sur n'importe quoi, mais pas sur l'outil PVS-Studio lui-m√™me.  Alors que nous faisons beaucoup pour rendre son utilisation pratique pour les d√©veloppeurs.  N√©anmoins, nos efforts sont souvent cach√©s dans les coulisses.  J'ai d√©cid√© de rem√©dier √† cette situation et de vous parler du plugin PVS-Studio pour Visual Studio.  Si vous utilisez Visual Studio, cet article est pour vous. <br><a name="habracut"></a><br><h2>  Qu'est-ce que l'analyse de code statique et pourquoi nous en avons besoin </h2><br>  L'analyse de code statique est le processus de d√©tection des erreurs et des d√©fauts dans le code source des programmes.  L'analyse statique peut √™tre consid√©r√©e comme un processus de r√©vision automatis√©e du code.  L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">examen</a> conjoint des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codes</a> est une merveilleuse m√©thodologie.  Cependant, il pr√©sente un inconv√©nient important - un co√ªt √©lev√©.  Il est n√©cessaire de rassembler plusieurs programmeurs pour revoir le code nouvellement √©crit ou r√©√©crit apr√®s les modifications qui y sont apport√©es. <br><br>  D'une part, nous voulons revoir r√©guli√®rement le code.  Par contre, c'est trop cher.  La solution de compromis est des outils d'analyse statique.  Ils analysent s√©rieusement le code source des programmes et donnent des recommandations aux programmeurs sur la r√©vision de certains fragments de code.  Bien s√ªr, un programme ne remplacera pas une revue de code √† part enti√®re, effectu√©e par une √©quipe de d√©veloppeurs.  Cependant, le rapport prix / avantages fait de l'analyse statique une pratique assez utile, appliqu√©e par de nombreuses entreprises.  Si le lecteur est int√©ress√© par des chiffres pr√©cis, je vous sugg√®re de lire l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio ROI</a> ". <br><br>  Il existe de nombreux analyseurs de code statique commerciaux et gratuits.  Une grande liste d'analyseurs statiques est disponible sur Wikipedia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liste d'outils pour l'analyse de code statique</a> .  La liste des langages pour lesquels il existe des analyseurs de code statiques est assez longue (C, C ++, C #, Java, Ada, Fortran, Perl, Ruby, ...).  Inutile de dire que nous vous parlerons de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyseur</a> PVS-Studio. <br><br>  Le principal avantage de l'analyse de code statique est la possibilit√© de r√©duire consid√©rablement le co√ªt de l'√©limination des d√©fauts dans un programme.  Plus une erreur est d√©tect√©e t√¥t, moins il est co√ªteux de la corriger.  Ainsi, selon le livre ¬´Code Complete¬ª de McConnell, la d√©tection d'erreurs au stade du test de code co√ªte dix fois plus cher qu'au stade de la conception du code (codage): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/834/bdd/a8f/834bdda8fd783e91db60015010476cd6.png" alt="Figure 1. Co√ªt moyen de correction des d√©fauts en fonction du moment de leur apparition et de leur d√©tection dans le code (les donn√©es du tableau sont extraites du livre ¬´Code Complete¬ª de S. McConnell)"></div><br>  <font color="#999999"><i>Figure 1. Co√ªt moyen de correction des d√©fauts en fonction du moment de leur apparition et de leur d√©tection dans le code (les donn√©es du tableau sont extraites du livre ¬´Code Complete¬ª de S. McConnell)</i></font> <br><br>  Les outils d'analyse statique permettent de d√©tecter un grand nombre d'erreurs, typiques de l'√©tape de conception du code, ce qui r√©duit consid√©rablement le co√ªt de l'ensemble du d√©veloppement du projet.  Par exemple, l'analyseur de code statique PVS-Studio peut √™tre ex√©cut√© en arri√®re-plan juste apr√®s la compilation et en cas de d√©tection d'erreurs potentielles, il en informera un programmeur.  Plus d'informations sur ce mode seront donn√©es ci-dessous. <br><br><h2>  Analyseur de code statique PVS-Studio </h2><br>  PVS-Studio est un analyseur statique qui d√©tecte les bogues et les vuln√©rabilit√©s potentielles dans le code source des applications en C, C ++ (autres extensions prises en charge: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CLI</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CX</a> ), C # et Java sur les plates-formes Windows, Linux et macOS.  L'analyseur est superbement int√©gr√© dans les IDE Visual Studio 2010-2019 et IntelliJ IDEA.  Dans cet article, nous allons examiner de plus pr√®s PVS-Studio, en v√©rifiant le code dans les langages C, C ++ et C #.  Vous pouvez lire ici comment utiliser PVS-Studio pour v√©rifier le code Java dans IntelliJ IDEA. <br><br>  Apr√®s l'installation de PVS-Studio et son int√©gration dans Visual Studio, les utilisateurs obtiennent un √©l√©ment suppl√©mentaire "PVS-Studio" dans le menu principal et la fen√™tre pour travailler avec les messages d'erreur: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/943/589/d81/943589d818ec8e95fe078ed08585fe5c.png" alt="Figure 2. Les principaux √©l√©ments ajout√©s par l'analyseur PVS-Studio lors de l'int√©gration dans Visual Studio."></div><br>  <font color="#999999"><i>Figure 2. Les principaux √©l√©ments ajout√©s par l'analyseur PVS-Studio lors de l'int√©gration dans Visual Studio.</i></font> <br><br><h3>  Param√®tres initiaux </h3><br>  L'analyseur est pr√™t √† fonctionner juste apr√®s l'installation.  Dans la plupart des cas, vous n'avez rien √† configurer pour la premi√®re ex√©cution.  La seule configuration dont vous pourriez avoir besoin au d√©but est l'exclusion des biblioth√®ques tierces.  Vous n'allez rien r√©parer dans les fichiers d'origine, par exemple, la biblioth√®que jpeg, il n'est donc pas n√©cessaire de le v√©rifier.  De plus, l'exclusion des dossiers inutiles acc√©l√©rera l'analyse du projet.  Les exceptions du r√©pertoire sont d√©finies ici: PVS-Studio&gt; Options ...&gt; Ne pas v√©rifier les fichiers&gt; PathMasks (voir Figure 3). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/c57/d08/ee5c57d087ce5294b2de1cc455fbd662.png" alt="Figure 3. Modification d'une liste de r√©pertoires que l'analyseur ne v√©rifiera pas."></div><br>  <font color="#999999"><i>Figure 3. Modification d'une liste de r√©pertoires que l'analyseur ne v√©rifiera pas.</i></font> <br><br>  Si le nom de fichier complet contient l'un des noms sp√©cifi√©s, l'analyse ne sera pas effectu√©e pour ce fichier.  Par d√©faut, les noms de certains r√©pertoires sont d√©j√† inclus dans la liste.  Cependant, dans votre projet, le r√©pertoire avec la biblioth√®que ZLib peut √™tre appel√© non pas "zlib", mais, par exemple, "zip_lib".  Par cons√©quent, cette liste doit √™tre modifi√©e.  Pour commencer l'√©dition, vous devez cliquer sur un bouton avec trois points. <br><br>  Exemples de masques acceptables pour la liste PathMasks: <br><br><ul><li>  c: \ Libs \ - tous les fichiers de ce r√©pertoire et de ses sous-r√©pertoires seront exclus. </li><li>  \ Libs \ ou * \ Libs \ * - tous les fichiers des r√©pertoires dont le chemin contient le sous-r√©pertoire "Libs" seront exclus.  Si les symboles "*" ne sont pas sp√©cifi√©s, ils seront quand m√™me ajout√©s automatiquement, donc les deux options sont √©gales. </li><li>  Libs ou * Libs * - tous les fichiers dont le chemin contient le sous-r√©pertoire, dont le nom est √©gal ou contient ¬´Libs¬ª.  Dans ce cas √©galement, tous les fichiers contenant des Libs dans leur nom, par exemple c: \ project \ mylibs.cpp, seront exclus.  Pour √©viter toute confusion, nous vous recommandons de toujours utiliser des barres obliques. </li></ul><br>  En plus d'exclure des r√©pertoires entiers, vous pouvez d√©finir des masques pour exclure des fichiers individuels.  Pour ce faire, il existe le param√®tre FileNameMasks.  Pour en savoir plus sur l'utilisation des listes d'exceptions, consultez la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Param√®tres: ne pas v√©rifier les fichiers</a> . <br><br><h3>  V√©rification du projet </h3><br>  Lorsque vous avez termin√© les param√®tres initiaux, vous pouvez commencer √† v√©rifier le projet.  PVS-Studio pour Visual Studio prend en charge la v√©rification des projets C ++ (.vcxproj) et C # (.csproj).  Vous pouvez √©galement essayer imm√©diatement de v√©rifier l'int√©gralit√© de la solution, qui contient des projets de ces types.  Pour ce faire, s√©lectionnez l'√©l√©ment de menu Extensions Extensions&gt; PVS-Studio&gt; V√©rifier&gt; Solution (voir figure 4). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figure 4. V√©rification d'une solution √† l'aide de l'analyseur PVS-Studio."></div><br>  <font color="#999999"><i>Figure 4. V√©rification d'une solution √† l'aide de l'analyseur PVS-Studio.</i></font> <br><br>  En cas de difficult√©s avec la v√©rification, nous vous recommandons de vous r√©f√©rer √† la section " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio: D√©pannage</a> " de notre site Web.  Ce ne sont pas des recommandations stupides dans l'esprit de "v√©rifier que la fiche est ins√©r√©e dans la prise".  La section d√©crit les situations typiques des demandes des utilisateurs et sugg√®re des options. <br><br><h3>  Utilisation d'une liste de messages de diagnostic </h3><br>  Apr√®s la v√©rification, tous les messages de diagnostic seront affich√©s dans une fen√™tre sp√©ciale.  La fen√™tre a de nombreux composants de contr√¥le.  Tous servent √† afficher exactement les messages de diagnostic qui sont int√©ressants pour l'utilisateur.  Cependant, au premier moment, la fen√™tre peut sembler compliqu√©e.  Examinons tous les composants de contr√¥le (voir la figure 5). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figure 5. Une fen√™tre avec des messages de diagnostic."></div><br>  <font color="#999999"><i>Figure 5. Une fen√™tre avec des messages de diagnostic.</i></font> <br><br><ol><li>  Eh bien, voici la fen√™tre PVS-Studio. </li><li>  Menu suppl√©mentaire.  Vous permet d'acc√©der √† des options telles que marquer les avertissements comme faux, masquer les messages, ajouter des fichiers aux exceptions (lire √† ce sujet ci-dessous). </li><li>  Le bouton active les messages ¬´quelque chose s'est mal pass√©¬ª.  Par exemple, l'un des fichiers ne peut pas √™tre pr√©trait√©. </li><li>  Acc√©dez au message pr√©c√©dent / suivant.  Cela ouvre le fichier correspondant et le curseur est plac√© sur la ligne avec une erreur potentielle.  Vous pouvez √©galement toujours s√©lectionner un diagnostic dans la liste en double-cliquant.  Vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©finir des raccourcis clavier</a> pour les transitions vers le message pr√©c√©dent / suivant.  Par d√©faut, c'est Alt + '[' et Alt + ']'. </li><li>  Boutons qui incluent des avertissements de diff√©rents niveaux.  Les deux premiers niveaux de diagnostic sont d√©sormais activ√©s.  Dans le m√™me temps, la fen√™tre affiche 90 avertissements du premier niveau, 6700 avertissements du deuxi√®me niveau.  Le niveau du message est affich√© sur le c√¥t√© gauche de la fen√™tre sous forme de bande, correspondant √† la couleur de la bande sur le bouton de niveau correspondant.  Pourquoi y a-t-il autant de d√©clenchements?  Pourquoi 6700 avertissements?  Pour d√©montrer les capacit√©s de l'interface, un ensemble de r√®gles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MISRA</a> est activ√©, ce qui est inappropri√© pour les applications normales :). </li><li>  Ensembles actifs de r√®gles de diagnostic.  G√©n√©ral - diagnostics g√©n√©raux, Optimisation - micro-optimisation, diagnostics 64 bits - 64 bits, diagnostics des normes MISRA - MISRA C et MISRA C ++.  Toutes sortes d'avertissements sont d√©sormais affich√©s dans la fen√™tre. </li><li>  L'indicateur indique le nombre d'avertissements, marqu√©s comme faux (fausses alarmes).  Vous pouvez activer / d√©sactiver l'affichage des messages marqu√©s dans les param√®tres - PVS-Studio&gt; Options ...&gt; Param√®tres sp√©cifiques de l'analyseur&gt; Afficher les fausses alarmes. </li><li>  Filtres rapides.  Par exemple, vous pouvez r√©duire la liste aux seuls messages avec le code V501 et √† ceux du projet XYZ. </li><li>  Certains diagnostics sugg√®rent de pr√™ter attention non pas √† une, mais √† plusieurs lignes.  Dans ce cas, des points apparaissent √† c√¥t√© du num√©ro de ligne.  En cliquant dessus, vous pouvez voir la liste des lignes et en choisir une. </li></ol><br>  Le tableau avec les messages de diagnostic est divis√© dans les colonnes suivantes: <br><br><ul><li>  <b>Niveau</b>  Le niveau de certitude qui indique qu'une erreur, pas une odeur de code, a √©t√© trouv√©e.  Le niveau 1 (rouge) montre les endroits les plus suspects.  Le niveau 3 (jaune) est probablement une inexactitude non essentielle dans le code. </li><li>  <b>Etoile</b>  Il n'a pas de but pr√©cis.  Les utilisateurs peuvent l'interpr√©ter comme ils le souhaitent.  Par exemple, un utilisateur peut marquer les avertissements les plus int√©ressants pour une analyse plus approfondie.  L'analogie est la marque vedette des e-mails dans les clients de messagerie comme Thunderbird ou Outlook. </li><li>  <b>Identifiant</b>  Num√©ro de message unique.  Cela peut √™tre utile lorsqu'il s'agit d'une grande liste.  Par exemple, vous pouvez acc√©der √† un message avec un num√©ro sp√©cifique (voir "Naviguer vers ID ..." dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">menu contextuel</a> ). </li><li>  <b>Code</b>  Code de message.  Si vous cliquez dessus, vous ouvrirez une page d√©crivant l'avertissement. </li><li>  <b>CWE.</b>  Permet d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">identifier</a> un avertissement par le code CWE (Common Weakness Enumeration).  Lorsque vous cliquez sur le lien, vous pouvez voir une description de ce CWE dans le r√©seau. </li><li>  <b>Misra.</b>  Comme ci-dessus, mais pour la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">norme MISRA</a> . </li><li>  <b>Message</b>  Le texte du message de diagnostic. </li><li>  <b>Projet</b>  Nom du projet (vous pouvez d√©sactiver cette colonne √† l'aide d'un menu contextuel). </li><li>  <b>Fichier</b>  Nom de fichier. </li><li>  <b>Ligne</b>  Num√©ro de ligne.  <b>Important!</b>  Notez que certaines lignes se terminent par des points.  Exemple: "123 (...)".  En cliquant sur ce num√©ro, vous obtiendrez une liste de toutes les lignes de code li√©es √† ce message.  En m√™me temps, vous pouvez acc√©der √† chacune des lignes de la liste. </li></ul><br>  Oui, c'√©tait √©puisant de tout lire.  Cependant, je vous assure qu'ayant commenc√© √† l'utiliser, vous vous habituerez rapidement √† l'outil.  Et vous cliquerez rarement sur quelque chose √† configurer. <br><br><h3>  Menu contextuel </h3><br>  Ainsi, en double-cliquant sur le message, vous acc√©dez √† l'√©l√©ment de code correspondant.  En cliquant avec le bouton droit de la souris, le menu contextuel s'ouvre. <br><br>  Le menu est assez simple, et je n'encombre pas l'article avec la description de chaque √©l√©ment.  Si quelque chose n'est pas clair, vous pouvez consulter la documentation. <br><br>  N√©anmoins, je voudrais m'attarder sur une caract√©ristique tr√®s utile.  Vous souvenez-vous que dans les param√®tres, vous pouvez ajouter des dossiers / fichiers √† exclure?  Le fait est que l'ajout de quelque chose est beaucoup plus simple qu'il n'y para√Æt! <br><br>  Faites attention √† l'option de menu "Ne pas v√©rifier les fichiers et masquer tous les messages de ...".  Lorsque vous cliquez dessus, vous obtenez une liste de chemins que vous pouvez ajouter aux exceptions (voir figure 6). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce3/581/300/ce35813002196bdbd53fcb666a33f58b.png" alt="Figure 6. Exclusion de fichiers de la v√©rification."></div><br>  <font color="#999999"><i>Figure 6. Exclusion de fichiers de la v√©rification.</i></font> <br><br>  Vous pouvez choisir un fichier s√©par√© ou l'un des r√©pertoires.  L'image montre que le dossier "SDL2-2.0.9 \ src \ haptic \ windows" est choisi.  Cela signifie que tous les fichiers de ce dossier et tous les sous-dossiers seront exclus de l'analyse.  De plus, tous les messages li√©s √† ces fichiers dispara√Ætront imm√©diatement de la liste.  Tr√®s pratique.  Vous n'avez pas besoin de red√©marrer l'analyse pour supprimer tous les messages li√©s aux tests. <br><br><h2>  Mode d'analyse incr√©mentale </h2><br>  L'introduction √† PVS-Studio sera incompl√®te si nous dissimulons l'une des fonctionnalit√©s les plus importantes - l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyse de code incr√©mentielle</a> . <br><br>  Plus une erreur est d√©tect√©e t√¥t, moins il est co√ªteux de l'√©liminer.  La meilleure option consiste √† mettre imm√©diatement en √©vidence les erreurs dans le texte du programme modifi√©.  Cependant, c'est techniquement difficile et gourmand en ressources.  C'est pourquoi PVS-Studio s'ex√©cute en mode arri√®re-plan lorsque le code fixe est correctement compil√©.  Ce faisant, vous recherchez des bogues dans le code qui vient d'√™tre modifi√©.  L'ic√¥ne dans la zone de notification syst√®me indique que l'analyse est en cours. <br><br>  Lorsqu'une erreur est d√©tect√©e, une fen√™tre contextuelle appara√Æt, vous avertissant d'un danger (voir Figure 7). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61b/394/8bd/61b3948bd26a9ed4c410446e46b5eb3b.png" alt="Figure 7. Un message contextuel, signalant que des endroits suspects ont √©t√© trouv√©s dans les fichiers modifi√©s."></div><br>  <font color="#999999"><i>Figure 7. Un message contextuel, signalant que des endroits suspects ont √©t√© trouv√©s dans les fichiers modifi√©s.</i></font> <br><br>  Si vous cliquez sur l'ic√¥ne, vous ouvrirez l'EDI avec le r√©sultat de la v√©rification du projet (voir figure 2) et vous pourrez creuser dans des fragments de code suspects. <br><br>  En fait, il est plus facile d'essayer de travailler dans ce mode que de le d√©crire.  Vous √©crivez le code comme pr√©c√©demment.  En cas de besoin, l'analyseur vous d√©range.  Essayez-le! <br><br>  Nous utilisons ce mode tout le temps.  Oui, nous faisons aussi parfois des erreurs de codage.  La possibilit√© de les corriger imm√©diatement r√©duit consid√©rablement le temps de d√©tection du d√©faut et d'essayer de comprendre pourquoi le programme ne se comporte pas comme pr√©vu.  C'est tr√®s bouleversant de passer 15 √† 20 minutes de d√©bogage pour finalement trouver une faute de frappe dans l'index.  Voici l'un des cas o√π PVS-Studio a trouv√© une erreur dans PVS-Studio juste apr√®s son apparition dans le code: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'.'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span>) { in += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Eh bien, le plus int√©ressant reste √† venir.  L'analyseur PVS-Studio peut parfois √™tre beaucoup plus utile que cela.  Voici l'un des commentaires sur notre analyseur: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'exp√©rience d'un utilisateur de travailler avec l'analyseur</a> ".  Le texte me fait r√©fl√©chir. <br><br>  Permettez-moi de le r√©sumer.  L'analyse incr√©mentale est quelque chose que vous devez absolument essayer.  Vous l'aimerez d√®s que vous trouverez quelques erreurs dans le nouveau code. <br><br><h2>  Fonctionnalit√©s de PVS-Studio </h2><br>  Soyons brefs.  Il est impossible de d√©crire succinctement tous les diagnostics disponibles dans PVS-Studio.  Une liste compl√®te des diagnostics et leur description d√©taill√©e se trouvent dans la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Description des bogues d√©tect√©s</a> .  Posons-nous sur la table dans laquelle les diagnostics sont regroup√©s par type.  Certains diagnostics appartiennent √† plusieurs groupes.  Le fait est que la classification est assez formelle.  Par exemple, une faute de frappe peut entra√Æner l'utilisation de m√©moire non initialis√©e.  Certaines erreurs, au contraire, ne pouvaient convenir √† aucun des groupes, car elles √©taient trop sp√©cifiques.  N√©anmoins, ce tableau donne un aper√ßu de la fonctionnalit√© de l'analyseur de code statique. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/a44/f24/ee5a44f24dff71c09d5491dc9294b4f2.png" alt="Figure 8. Capacit√©s de PVS-Studio."></div><br>  <font color="#999999"><i>Figure 8. Capacit√©s de PVS-Studio.</i></font> <br><br>  Comme vous le voyez, l'analyseur est particuli√®rement utile dans des domaines tels que la recherche de bogues de copier-coller.  Il est excellent pour d√©tecter les probl√®mes li√©s √† la s√©curit√© du code. <br><br>  Pour voir ces diagnostics en action, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base des erreurs</a> .  Nous collectons toutes les erreurs que nous avons trouv√©es, en v√©rifiant divers projets open source avec PVS-Studio. <br><br><h2>  SAST </h2><br>  PVS-Studio est un outil de test de s√©curit√© d'application statique.  L'analyseur peut d√©tecter des vuln√©rabilit√©s potentielles dans le code du projet et afficher l'identificateur d'erreur appropri√© dans une certaine classification. <br><br>  PVS-Studio prend en charge les classifications d'erreur suivantes: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Vous pouvez activer l'affichage des codes CWE par le menu contextuel dans la fen√™tre de l'analyseur par le chemin Afficher les colonnes&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figure 9. Menu contextuel et l'exemple de sortie CWE."></div><br>  <font color="#999999"><i>Figure 9. Menu contextuel et l'exemple de sortie CWE.</i></font> <br><br>  Ou dans le menu principal (Extensions&gt; PVS-Studio&gt; Afficher les codes CWE dans la fen√™tre de sortie) <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figure 10. Menu de l'extension."></p><br>  <font color="#999999"><i>Figure 10. Menu de l'extension.</i></font> <br><br>  Les diagnostics MISRA sont activ√©s s√©par√©ment dans les param√®tres: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figure 11. Liste des erreurs d√©tect√©es."></p><br>  <font color="#999999"><i>Figure 11. Liste des erreurs d√©tect√©es.</i></font> <br><br>  Vous pouvez en savoir plus sur ces classifications <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  V√©rification des projets √† partir de la ligne de commande </h2><br>  PVS-Studio_Cmd.exe - un utilitaire pour v√©rifier les projets Visual Studio C ++ / C # (.vcxproj / .csproj) et les solutions .sln √† partir de la ligne de commande.  Il peut √™tre utile d'automatiser l'analyse.  Le programme se trouve dans le r√©pertoire o√π l'installation a √©t√© effectu√©e - par d√©faut, il est 'C: \ Program Files (x86) \ PVS-Studio'. <br><br>  Le programme a de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">param√®tres</a> , mais d'abord nous n'en avons besoin que de 3: <br><br><ul><li>  --target: fichier de projet ou de solution √† v√©rifier. </li><li>  --output: fichier plog o√π le rapport doit √™tre √©crit. </li><li>  --progress: affiche la progression d'un ch√®que. </li></ul><br>  Voici √† quoi ressemblera la course: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figure 12. Sortie du programme PVS-Studio_Cmd.exe."></p><br>  <font color="#999999"><i>Figure 12. Sortie du programme PVS-Studio_Cmd.exe.</i></font> <br><br>  Apr√®s l'ex√©cution, nous obtiendrons un fichier plog avec un rapport, un chemin vers lequel nous avons sp√©cifi√© dans les options d'ex√©cution.  Vous pouvez convertir ce rapport dans d'autres formats √† l'aide de l'utilitaire PlogConverter.exe.  Pour afficher le rapport dans IDE, double-cliquez sur un fichier plog dans le Finder. <br><br>  Vous pouvez √©galement ouvrir le fichier de rapport dans le menu d'extension par le chemin Extensions&gt; PVS-Studio&gt; Ouvrir / Enregistrer&gt; Ouvrir le rapport d'analyse ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Image 4"></div><br><br>  Des informations d√©taill√©es sur l'utilitaire et ses param√®tres se trouvent dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br><h2>  Suppression des faux positifs </h2><br>  Certains messages √©mis par l'analyseur seront in√©vitablement faux.  Nous ne pouvons rien y faire.  Un analyseur statique est juste un programme qui n'a pas d'intelligence artificielle et ne peut pas d√©terminer s'il s'agit d'un vrai bug ou non. <br><br>  Pour lutter contre les faux positifs, l'analyseur propose un ensemble de m√©canismes diff√©rents.  Ils sont d√©taill√©s dans les sections suivantes de la documentation: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©glage fin</a> . </li><li>  Une m√©thode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">approximative</a> qui vous permet uniquement de travailler avec des avertissements li√©s au code nouveau ou modifi√©. </li></ul><br><h2>  Conclusion </h2><br>  Bien s√ªr, nous ne vous avons pas tout dit sur l'outil.  Si je vous dis tout, l'article se transformera en documentation.  L'objectif √©tait de montrer √† quel point il est facile de travailler avec l'outil dans l'environnement Visual Studio.  Vous pouvez lire sur d'autres environnements et modes de travail dans la documentation et d'autres articles sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site Web</a> .  Soit dit en passant, il y a beaucoup de choses int√©ressantes pour les programmeurs.  Venez tra√Æner. <br><br>  Il convient de noter que PVS-Studio ne fonctionne pas uniquement dans l'environnement Microsoft.  Nous prenons √©galement en charge le langage Java, nous pouvons travailler sur Linux et macOS, int√©grer dans CMake et bien plus encore.  Vous pouvez en savoir plus dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  Je vous souhaite un mauvais code sans m√©moire et j'esp√®re que vous appr√©cierez PVS-Studio.  S'il y a des questions, nous vous aiderons et vous conseillerons toujours.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âcrivez-nous</a> . <br><br><h2>  Liens suppl√©mentaires: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©vision du code</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Outils d'analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAST</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Technologies utilis√©es dans l'analyseur PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√©l√©chargez</a> et essayez PVS-Studio. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prise en charge de Visual Studio 2019</a> . </li><li>  Discutez du prix de l'analyseur PVS-Studio pour votre √©quipe et comment l'acheter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">achetez PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple d'utilisation d'un analyseur statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©ponses</a> aux questions souvent pos√©es lors des conf√©rences. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment ex√©cuter PVS-Studio Java</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment ex√©cuter PVS-Studio sur Linux et macOS</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458068/">https://habr.com/ru/post/fr458068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458052/index.html">AMA avec Habr.10. Dernier * num√©ro</a></li>
<li><a href="../fr458056/index.html">La grande interview de Martin Kleppmann: ¬´Comprendre l'avenir des syst√®mes de donn√©es distribu√©s¬ª</a></li>
<li><a href="../fr458060/index.html">Cr√©ation d'un shader d'herbe dans le moteur Unity</a></li>
<li><a href="../fr458062/index.html">Pr√©sentation de la plateforme UserGate</a></li>
<li><a href="../fr458064/index.html">PVS-Studio dans les nuages ‚Äã‚Äã- Ex√©cution de l'analyse sur Travis CI</a></li>
<li><a href="../fr458070/index.html">PVS-Studio pour Visual Studio</a></li>
<li><a href="../fr458072/index.html">PVS-Studio passe aux nuages ‚Äã‚Äã- lancement de l'analyse sur Travis CI</a></li>
<li><a href="../fr458074/index.html">Aller langue: s√©lection ORM</a></li>
<li><a href="../fr458076/index.html">Marketing avec prise de d√©cision ML</a></li>
<li><a href="../fr458080/index.html">25 juillet, Moscou - Meetup QIWI iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>