<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏒 👆🏿 💀 PVS-Studio pour Visual Studio 💵 👩‍❤️‍💋‍👩 🤜🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup de nos articles se concentrent sur n'importe quoi, mais pas sur l'outil PVS-Studio lui-même. Alors que nous faisons beaucoup pour rendre son ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio pour Visual Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458068/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b55/042/8ad/b550428adfba0288bfdfce8d5f15e6fa.png"></div><br>  Beaucoup de nos articles se concentrent sur n'importe quoi, mais pas sur l'outil PVS-Studio lui-même.  Alors que nous faisons beaucoup pour rendre son utilisation pratique pour les développeurs.  Néanmoins, nos efforts sont souvent cachés dans les coulisses.  J'ai décidé de remédier à cette situation et de vous parler du plugin PVS-Studio pour Visual Studio.  Si vous utilisez Visual Studio, cet article est pour vous. <br><a name="habracut"></a><br><h2>  Qu'est-ce que l'analyse de code statique et pourquoi nous en avons besoin </h2><br>  L'analyse de code statique est le processus de détection des erreurs et des défauts dans le code source des programmes.  L'analyse statique peut être considérée comme un processus de révision automatisée du code.  L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">examen</a> conjoint des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codes</a> est une merveilleuse méthodologie.  Cependant, il présente un inconvénient important - un coût élevé.  Il est nécessaire de rassembler plusieurs programmeurs pour revoir le code nouvellement écrit ou réécrit après les modifications qui y sont apportées. <br><br>  D'une part, nous voulons revoir régulièrement le code.  Par contre, c'est trop cher.  La solution de compromis est des outils d'analyse statique.  Ils analysent sérieusement le code source des programmes et donnent des recommandations aux programmeurs sur la révision de certains fragments de code.  Bien sûr, un programme ne remplacera pas une revue de code à part entière, effectuée par une équipe de développeurs.  Cependant, le rapport prix / avantages fait de l'analyse statique une pratique assez utile, appliquée par de nombreuses entreprises.  Si le lecteur est intéressé par des chiffres précis, je vous suggère de lire l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio ROI</a> ". <br><br>  Il existe de nombreux analyseurs de code statique commerciaux et gratuits.  Une grande liste d'analyseurs statiques est disponible sur Wikipedia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liste d'outils pour l'analyse de code statique</a> .  La liste des langages pour lesquels il existe des analyseurs de code statiques est assez longue (C, C ++, C #, Java, Ada, Fortran, Perl, Ruby, ...).  Inutile de dire que nous vous parlerons de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyseur</a> PVS-Studio. <br><br>  Le principal avantage de l'analyse de code statique est la possibilité de réduire considérablement le coût de l'élimination des défauts dans un programme.  Plus une erreur est détectée tôt, moins il est coûteux de la corriger.  Ainsi, selon le livre «Code Complete» de McConnell, la détection d'erreurs au stade du test de code coûte dix fois plus cher qu'au stade de la conception du code (codage): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/834/bdd/a8f/834bdda8fd783e91db60015010476cd6.png" alt="Figure 1. Coût moyen de correction des défauts en fonction du moment de leur apparition et de leur détection dans le code (les données du tableau sont extraites du livre «Code Complete» de S. McConnell)"></div><br>  <font color="#999999"><i>Figure 1. Coût moyen de correction des défauts en fonction du moment de leur apparition et de leur détection dans le code (les données du tableau sont extraites du livre «Code Complete» de S. McConnell)</i></font> <br><br>  Les outils d'analyse statique permettent de détecter un grand nombre d'erreurs, typiques de l'étape de conception du code, ce qui réduit considérablement le coût de l'ensemble du développement du projet.  Par exemple, l'analyseur de code statique PVS-Studio peut être exécuté en arrière-plan juste après la compilation et en cas de détection d'erreurs potentielles, il en informera un programmeur.  Plus d'informations sur ce mode seront données ci-dessous. <br><br><h2>  Analyseur de code statique PVS-Studio </h2><br>  PVS-Studio est un analyseur statique qui détecte les bogues et les vulnérabilités potentielles dans le code source des applications en C, C ++ (autres extensions prises en charge: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CLI</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ / CX</a> ), C # et Java sur les plates-formes Windows, Linux et macOS.  L'analyseur est superbement intégré dans les IDE Visual Studio 2010-2019 et IntelliJ IDEA.  Dans cet article, nous allons examiner de plus près PVS-Studio, en vérifiant le code dans les langages C, C ++ et C #.  Vous pouvez lire ici comment utiliser PVS-Studio pour vérifier le code Java dans IntelliJ IDEA. <br><br>  Après l'installation de PVS-Studio et son intégration dans Visual Studio, les utilisateurs obtiennent un élément supplémentaire "PVS-Studio" dans le menu principal et la fenêtre pour travailler avec les messages d'erreur: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/943/589/d81/943589d818ec8e95fe078ed08585fe5c.png" alt="Figure 2. Les principaux éléments ajoutés par l'analyseur PVS-Studio lors de l'intégration dans Visual Studio."></div><br>  <font color="#999999"><i>Figure 2. Les principaux éléments ajoutés par l'analyseur PVS-Studio lors de l'intégration dans Visual Studio.</i></font> <br><br><h3>  Paramètres initiaux </h3><br>  L'analyseur est prêt à fonctionner juste après l'installation.  Dans la plupart des cas, vous n'avez rien à configurer pour la première exécution.  La seule configuration dont vous pourriez avoir besoin au début est l'exclusion des bibliothèques tierces.  Vous n'allez rien réparer dans les fichiers d'origine, par exemple, la bibliothèque jpeg, il n'est donc pas nécessaire de le vérifier.  De plus, l'exclusion des dossiers inutiles accélérera l'analyse du projet.  Les exceptions du répertoire sont définies ici: PVS-Studio&gt; Options ...&gt; Ne pas vérifier les fichiers&gt; PathMasks (voir Figure 3). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/c57/d08/ee5c57d087ce5294b2de1cc455fbd662.png" alt="Figure 3. Modification d'une liste de répertoires que l'analyseur ne vérifiera pas."></div><br>  <font color="#999999"><i>Figure 3. Modification d'une liste de répertoires que l'analyseur ne vérifiera pas.</i></font> <br><br>  Si le nom de fichier complet contient l'un des noms spécifiés, l'analyse ne sera pas effectuée pour ce fichier.  Par défaut, les noms de certains répertoires sont déjà inclus dans la liste.  Cependant, dans votre projet, le répertoire avec la bibliothèque ZLib peut être appelé non pas "zlib", mais, par exemple, "zip_lib".  Par conséquent, cette liste doit être modifiée.  Pour commencer l'édition, vous devez cliquer sur un bouton avec trois points. <br><br>  Exemples de masques acceptables pour la liste PathMasks: <br><br><ul><li>  c: \ Libs \ - tous les fichiers de ce répertoire et de ses sous-répertoires seront exclus. </li><li>  \ Libs \ ou * \ Libs \ * - tous les fichiers des répertoires dont le chemin contient le sous-répertoire "Libs" seront exclus.  Si les symboles "*" ne sont pas spécifiés, ils seront quand même ajoutés automatiquement, donc les deux options sont égales. </li><li>  Libs ou * Libs * - tous les fichiers dont le chemin contient le sous-répertoire, dont le nom est égal ou contient «Libs».  Dans ce cas également, tous les fichiers contenant des Libs dans leur nom, par exemple c: \ project \ mylibs.cpp, seront exclus.  Pour éviter toute confusion, nous vous recommandons de toujours utiliser des barres obliques. </li></ul><br>  En plus d'exclure des répertoires entiers, vous pouvez définir des masques pour exclure des fichiers individuels.  Pour ce faire, il existe le paramètre FileNameMasks.  Pour en savoir plus sur l'utilisation des listes d'exceptions, consultez la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Paramètres: ne pas vérifier les fichiers</a> . <br><br><h3>  Vérification du projet </h3><br>  Lorsque vous avez terminé les paramètres initiaux, vous pouvez commencer à vérifier le projet.  PVS-Studio pour Visual Studio prend en charge la vérification des projets C ++ (.vcxproj) et C # (.csproj).  Vous pouvez également essayer immédiatement de vérifier l'intégralité de la solution, qui contient des projets de ces types.  Pour ce faire, sélectionnez l'élément de menu Extensions Extensions&gt; PVS-Studio&gt; Vérifier&gt; Solution (voir figure 4). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figure 4. Vérification d'une solution à l'aide de l'analyseur PVS-Studio."></div><br>  <font color="#999999"><i>Figure 4. Vérification d'une solution à l'aide de l'analyseur PVS-Studio.</i></font> <br><br>  En cas de difficultés avec la vérification, nous vous recommandons de vous référer à la section " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio: Dépannage</a> " de notre site Web.  Ce ne sont pas des recommandations stupides dans l'esprit de "vérifier que la fiche est insérée dans la prise".  La section décrit les situations typiques des demandes des utilisateurs et suggère des options. <br><br><h3>  Utilisation d'une liste de messages de diagnostic </h3><br>  Après la vérification, tous les messages de diagnostic seront affichés dans une fenêtre spéciale.  La fenêtre a de nombreux composants de contrôle.  Tous servent à afficher exactement les messages de diagnostic qui sont intéressants pour l'utilisateur.  Cependant, au premier moment, la fenêtre peut sembler compliquée.  Examinons tous les composants de contrôle (voir la figure 5). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figure 5. Une fenêtre avec des messages de diagnostic."></div><br>  <font color="#999999"><i>Figure 5. Une fenêtre avec des messages de diagnostic.</i></font> <br><br><ol><li>  Eh bien, voici la fenêtre PVS-Studio. </li><li>  Menu supplémentaire.  Vous permet d'accéder à des options telles que marquer les avertissements comme faux, masquer les messages, ajouter des fichiers aux exceptions (lire à ce sujet ci-dessous). </li><li>  Le bouton active les messages «quelque chose s'est mal passé».  Par exemple, l'un des fichiers ne peut pas être prétraité. </li><li>  Accédez au message précédent / suivant.  Cela ouvre le fichier correspondant et le curseur est placé sur la ligne avec une erreur potentielle.  Vous pouvez également toujours sélectionner un diagnostic dans la liste en double-cliquant.  Vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">définir des raccourcis clavier</a> pour les transitions vers le message précédent / suivant.  Par défaut, c'est Alt + '[' et Alt + ']'. </li><li>  Boutons qui incluent des avertissements de différents niveaux.  Les deux premiers niveaux de diagnostic sont désormais activés.  Dans le même temps, la fenêtre affiche 90 avertissements du premier niveau, 6700 avertissements du deuxième niveau.  Le niveau du message est affiché sur le côté gauche de la fenêtre sous forme de bande, correspondant à la couleur de la bande sur le bouton de niveau correspondant.  Pourquoi y a-t-il autant de déclenchements?  Pourquoi 6700 avertissements?  Pour démontrer les capacités de l'interface, un ensemble de règles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MISRA</a> est activé, ce qui est inapproprié pour les applications normales :). </li><li>  Ensembles actifs de règles de diagnostic.  Général - diagnostics généraux, Optimisation - micro-optimisation, diagnostics 64 bits - 64 bits, diagnostics des normes MISRA - MISRA C et MISRA C ++.  Toutes sortes d'avertissements sont désormais affichés dans la fenêtre. </li><li>  L'indicateur indique le nombre d'avertissements, marqués comme faux (fausses alarmes).  Vous pouvez activer / désactiver l'affichage des messages marqués dans les paramètres - PVS-Studio&gt; Options ...&gt; Paramètres spécifiques de l'analyseur&gt; Afficher les fausses alarmes. </li><li>  Filtres rapides.  Par exemple, vous pouvez réduire la liste aux seuls messages avec le code V501 et à ceux du projet XYZ. </li><li>  Certains diagnostics suggèrent de prêter attention non pas à une, mais à plusieurs lignes.  Dans ce cas, des points apparaissent à côté du numéro de ligne.  En cliquant dessus, vous pouvez voir la liste des lignes et en choisir une. </li></ol><br>  Le tableau avec les messages de diagnostic est divisé dans les colonnes suivantes: <br><br><ul><li>  <b>Niveau</b>  Le niveau de certitude qui indique qu'une erreur, pas une odeur de code, a été trouvée.  Le niveau 1 (rouge) montre les endroits les plus suspects.  Le niveau 3 (jaune) est probablement une inexactitude non essentielle dans le code. </li><li>  <b>Etoile</b>  Il n'a pas de but précis.  Les utilisateurs peuvent l'interpréter comme ils le souhaitent.  Par exemple, un utilisateur peut marquer les avertissements les plus intéressants pour une analyse plus approfondie.  L'analogie est la marque vedette des e-mails dans les clients de messagerie comme Thunderbird ou Outlook. </li><li>  <b>Identifiant</b>  Numéro de message unique.  Cela peut être utile lorsqu'il s'agit d'une grande liste.  Par exemple, vous pouvez accéder à un message avec un numéro spécifique (voir "Naviguer vers ID ..." dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">menu contextuel</a> ). </li><li>  <b>Code</b>  Code de message.  Si vous cliquez dessus, vous ouvrirez une page décrivant l'avertissement. </li><li>  <b>CWE.</b>  Permet d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">identifier</a> un avertissement par le code CWE (Common Weakness Enumeration).  Lorsque vous cliquez sur le lien, vous pouvez voir une description de ce CWE dans le réseau. </li><li>  <b>Misra.</b>  Comme ci-dessus, mais pour la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">norme MISRA</a> . </li><li>  <b>Message</b>  Le texte du message de diagnostic. </li><li>  <b>Projet</b>  Nom du projet (vous pouvez désactiver cette colonne à l'aide d'un menu contextuel). </li><li>  <b>Fichier</b>  Nom de fichier. </li><li>  <b>Ligne</b>  Numéro de ligne.  <b>Important!</b>  Notez que certaines lignes se terminent par des points.  Exemple: "123 (...)".  En cliquant sur ce numéro, vous obtiendrez une liste de toutes les lignes de code liées à ce message.  En même temps, vous pouvez accéder à chacune des lignes de la liste. </li></ul><br>  Oui, c'était épuisant de tout lire.  Cependant, je vous assure qu'ayant commencé à l'utiliser, vous vous habituerez rapidement à l'outil.  Et vous cliquerez rarement sur quelque chose à configurer. <br><br><h3>  Menu contextuel </h3><br>  Ainsi, en double-cliquant sur le message, vous accédez à l'élément de code correspondant.  En cliquant avec le bouton droit de la souris, le menu contextuel s'ouvre. <br><br>  Le menu est assez simple, et je n'encombre pas l'article avec la description de chaque élément.  Si quelque chose n'est pas clair, vous pouvez consulter la documentation. <br><br>  Néanmoins, je voudrais m'attarder sur une caractéristique très utile.  Vous souvenez-vous que dans les paramètres, vous pouvez ajouter des dossiers / fichiers à exclure?  Le fait est que l'ajout de quelque chose est beaucoup plus simple qu'il n'y paraît! <br><br>  Faites attention à l'option de menu "Ne pas vérifier les fichiers et masquer tous les messages de ...".  Lorsque vous cliquez dessus, vous obtenez une liste de chemins que vous pouvez ajouter aux exceptions (voir figure 6). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce3/581/300/ce35813002196bdbd53fcb666a33f58b.png" alt="Figure 6. Exclusion de fichiers de la vérification."></div><br>  <font color="#999999"><i>Figure 6. Exclusion de fichiers de la vérification.</i></font> <br><br>  Vous pouvez choisir un fichier séparé ou l'un des répertoires.  L'image montre que le dossier "SDL2-2.0.9 \ src \ haptic \ windows" est choisi.  Cela signifie que tous les fichiers de ce dossier et tous les sous-dossiers seront exclus de l'analyse.  De plus, tous les messages liés à ces fichiers disparaîtront immédiatement de la liste.  Très pratique.  Vous n'avez pas besoin de redémarrer l'analyse pour supprimer tous les messages liés aux tests. <br><br><h2>  Mode d'analyse incrémentale </h2><br>  L'introduction à PVS-Studio sera incomplète si nous dissimulons l'une des fonctionnalités les plus importantes - l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyse de code incrémentielle</a> . <br><br>  Plus une erreur est détectée tôt, moins il est coûteux de l'éliminer.  La meilleure option consiste à mettre immédiatement en évidence les erreurs dans le texte du programme modifié.  Cependant, c'est techniquement difficile et gourmand en ressources.  C'est pourquoi PVS-Studio s'exécute en mode arrière-plan lorsque le code fixe est correctement compilé.  Ce faisant, vous recherchez des bogues dans le code qui vient d'être modifié.  L'icône dans la zone de notification système indique que l'analyse est en cours. <br><br>  Lorsqu'une erreur est détectée, une fenêtre contextuelle apparaît, vous avertissant d'un danger (voir Figure 7). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61b/394/8bd/61b3948bd26a9ed4c410446e46b5eb3b.png" alt="Figure 7. Un message contextuel, signalant que des endroits suspects ont été trouvés dans les fichiers modifiés."></div><br>  <font color="#999999"><i>Figure 7. Un message contextuel, signalant que des endroits suspects ont été trouvés dans les fichiers modifiés.</i></font> <br><br>  Si vous cliquez sur l'icône, vous ouvrirez l'EDI avec le résultat de la vérification du projet (voir figure 2) et vous pourrez creuser dans des fragments de code suspects. <br><br>  En fait, il est plus facile d'essayer de travailler dans ce mode que de le décrire.  Vous écrivez le code comme précédemment.  En cas de besoin, l'analyseur vous dérange.  Essayez-le! <br><br>  Nous utilisons ce mode tout le temps.  Oui, nous faisons aussi parfois des erreurs de codage.  La possibilité de les corriger immédiatement réduit considérablement le temps de détection du défaut et d'essayer de comprendre pourquoi le programme ne se comporte pas comme prévu.  C'est très bouleversant de passer 15 à 20 minutes de débogage pour finalement trouver une faute de frappe dans l'index.  Voici l'un des cas où PVS-Studio a trouvé une erreur dans PVS-Studio juste après son apparition dans le code: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'.'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span>) { in += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Eh bien, le plus intéressant reste à venir.  L'analyseur PVS-Studio peut parfois être beaucoup plus utile que cela.  Voici l'un des commentaires sur notre analyseur: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'expérience d'un utilisateur de travailler avec l'analyseur</a> ".  Le texte me fait réfléchir. <br><br>  Permettez-moi de le résumer.  L'analyse incrémentale est quelque chose que vous devez absolument essayer.  Vous l'aimerez dès que vous trouverez quelques erreurs dans le nouveau code. <br><br><h2>  Fonctionnalités de PVS-Studio </h2><br>  Soyons brefs.  Il est impossible de décrire succinctement tous les diagnostics disponibles dans PVS-Studio.  Une liste complète des diagnostics et leur description détaillée se trouvent dans la documentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Description des bogues détectés</a> .  Posons-nous sur la table dans laquelle les diagnostics sont regroupés par type.  Certains diagnostics appartiennent à plusieurs groupes.  Le fait est que la classification est assez formelle.  Par exemple, une faute de frappe peut entraîner l'utilisation de mémoire non initialisée.  Certaines erreurs, au contraire, ne pouvaient convenir à aucun des groupes, car elles étaient trop spécifiques.  Néanmoins, ce tableau donne un aperçu de la fonctionnalité de l'analyseur de code statique. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/a44/f24/ee5a44f24dff71c09d5491dc9294b4f2.png" alt="Figure 8. Capacités de PVS-Studio."></div><br>  <font color="#999999"><i>Figure 8. Capacités de PVS-Studio.</i></font> <br><br>  Comme vous le voyez, l'analyseur est particulièrement utile dans des domaines tels que la recherche de bogues de copier-coller.  Il est excellent pour détecter les problèmes liés à la sécurité du code. <br><br>  Pour voir ces diagnostics en action, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base des erreurs</a> .  Nous collectons toutes les erreurs que nous avons trouvées, en vérifiant divers projets open source avec PVS-Studio. <br><br><h2>  SAST </h2><br>  PVS-Studio est un outil de test de sécurité d'application statique.  L'analyseur peut détecter des vulnérabilités potentielles dans le code du projet et afficher l'identificateur d'erreur approprié dans une certaine classification. <br><br>  PVS-Studio prend en charge les classifications d'erreur suivantes: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Vous pouvez activer l'affichage des codes CWE par le menu contextuel dans la fenêtre de l'analyseur par le chemin Afficher les colonnes&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figure 9. Menu contextuel et l'exemple de sortie CWE."></div><br>  <font color="#999999"><i>Figure 9. Menu contextuel et l'exemple de sortie CWE.</i></font> <br><br>  Ou dans le menu principal (Extensions&gt; PVS-Studio&gt; Afficher les codes CWE dans la fenêtre de sortie) <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figure 10. Menu de l'extension."></p><br>  <font color="#999999"><i>Figure 10. Menu de l'extension.</i></font> <br><br>  Les diagnostics MISRA sont activés séparément dans les paramètres: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figure 11. Liste des erreurs détectées."></p><br>  <font color="#999999"><i>Figure 11. Liste des erreurs détectées.</i></font> <br><br>  Vous pouvez en savoir plus sur ces classifications <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  Vérification des projets à partir de la ligne de commande </h2><br>  PVS-Studio_Cmd.exe - un utilitaire pour vérifier les projets Visual Studio C ++ / C # (.vcxproj / .csproj) et les solutions .sln à partir de la ligne de commande.  Il peut être utile d'automatiser l'analyse.  Le programme se trouve dans le répertoire où l'installation a été effectuée - par défaut, il est 'C: \ Program Files (x86) \ PVS-Studio'. <br><br>  Le programme a de nombreux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">paramètres</a> , mais d'abord nous n'en avons besoin que de 3: <br><br><ul><li>  --target: fichier de projet ou de solution à vérifier. </li><li>  --output: fichier plog où le rapport doit être écrit. </li><li>  --progress: affiche la progression d'un chèque. </li></ul><br>  Voici à quoi ressemblera la course: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figure 12. Sortie du programme PVS-Studio_Cmd.exe."></p><br>  <font color="#999999"><i>Figure 12. Sortie du programme PVS-Studio_Cmd.exe.</i></font> <br><br>  Après l'exécution, nous obtiendrons un fichier plog avec un rapport, un chemin vers lequel nous avons spécifié dans les options d'exécution.  Vous pouvez convertir ce rapport dans d'autres formats à l'aide de l'utilitaire PlogConverter.exe.  Pour afficher le rapport dans IDE, double-cliquez sur un fichier plog dans le Finder. <br><br>  Vous pouvez également ouvrir le fichier de rapport dans le menu d'extension par le chemin Extensions&gt; PVS-Studio&gt; Ouvrir / Enregistrer&gt; Ouvrir le rapport d'analyse ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Image 4"></div><br><br>  Des informations détaillées sur l'utilitaire et ses paramètres se trouvent dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br><h2>  Suppression des faux positifs </h2><br>  Certains messages émis par l'analyseur seront inévitablement faux.  Nous ne pouvons rien y faire.  Un analyseur statique est juste un programme qui n'a pas d'intelligence artificielle et ne peut pas déterminer s'il s'agit d'un vrai bug ou non. <br><br>  Pour lutter contre les faux positifs, l'analyseur propose un ensemble de mécanismes différents.  Ils sont détaillés dans les sections suivantes de la documentation: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Réglage fin</a> . </li><li>  Une méthode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">approximative</a> qui vous permet uniquement de travailler avec des avertissements liés au code nouveau ou modifié. </li></ul><br><h2>  Conclusion </h2><br>  Bien sûr, nous ne vous avons pas tout dit sur l'outil.  Si je vous dis tout, l'article se transformera en documentation.  L'objectif était de montrer à quel point il est facile de travailler avec l'outil dans l'environnement Visual Studio.  Vous pouvez lire sur d'autres environnements et modes de travail dans la documentation et d'autres articles sur notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site Web</a> .  Soit dit en passant, il y a beaucoup de choses intéressantes pour les programmeurs.  Venez traîner. <br><br>  Il convient de noter que PVS-Studio ne fonctionne pas uniquement dans l'environnement Microsoft.  Nous prenons également en charge le langage Java, nous pouvons travailler sur Linux et macOS, intégrer dans CMake et bien plus encore.  Vous pouvez en savoir plus dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br>  Je vous souhaite un mauvais code sans mémoire et j'espère que vous apprécierez PVS-Studio.  S'il y a des questions, nous vous aiderons et vous conseillerons toujours.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Écrivez-nous</a> . <br><br><h2>  Liens supplémentaires: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Révision du code</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Outils d'analyse de code statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAST</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Technologies utilisées dans l'analyseur PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Téléchargez</a> et essayez PVS-Studio. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prise en charge de Visual Studio 2019</a> . </li><li>  Discutez du prix de l'analyseur PVS-Studio pour votre équipe et comment l'acheter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">achetez PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple d'utilisation d'un analyseur statique</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Réponses</a> aux questions souvent posées lors des conférences. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment exécuter PVS-Studio Java</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment exécuter PVS-Studio sur Linux et macOS</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458068/">https://habr.com/ru/post/fr458068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458052/index.html">AMA avec Habr.10. Dernier * numéro</a></li>
<li><a href="../fr458056/index.html">La grande interview de Martin Kleppmann: «Comprendre l'avenir des systèmes de données distribués»</a></li>
<li><a href="../fr458060/index.html">Création d'un shader d'herbe dans le moteur Unity</a></li>
<li><a href="../fr458062/index.html">Présentation de la plateforme UserGate</a></li>
<li><a href="../fr458064/index.html">PVS-Studio dans les nuages ​​- Exécution de l'analyse sur Travis CI</a></li>
<li><a href="../fr458070/index.html">PVS-Studio pour Visual Studio</a></li>
<li><a href="../fr458072/index.html">PVS-Studio passe aux nuages ​​- lancement de l'analyse sur Travis CI</a></li>
<li><a href="../fr458074/index.html">Aller langue: sélection ORM</a></li>
<li><a href="../fr458076/index.html">Marketing avec prise de décision ML</a></li>
<li><a href="../fr458080/index.html">25 juillet, Moscou - Meetup QIWI iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>