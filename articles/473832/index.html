<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöâ üë©üèΩ‚Äçü§ù‚Äçüë©üèº üïó ShIoTiny: actualizaciones y notificaciones üë©üèª‚Äçü§ù‚Äçüë®üèø üé∫ üìö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øDe qu√© trata este art√≠culo? 
 Continuamos la serie de art√≠culos sobre ShIoTiny , un controlador visualmente programable basado en el chip ESP8266 . 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: actualizaciones y notificaciones</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473832/"><img src="https://habrastorage.org/webt/2x/3l/hz/2x3lhz-tej3w7wnbri8k_crqjbs.jpeg"><br><br><h4>  ¬øDe qu√© trata este art√≠culo? </h4><br>  Continuamos la serie de art√≠culos sobre <b>ShIoTiny</b> , un controlador visualmente programable basado en el chip <b>ESP8266</b> . <br><br>  Este art√≠culo <b>habla</b> sobre lo que ha cambiado desde el firmware anterior de <b>ShIoTiny</b> : c√≥mo ha cambiado la interfaz de usuario;  c√≥mo reasignar "piernas" y otras cosas menos importantes, pero no menos esperadas. <br><br>  El art√≠culo presenta algo as√≠ como una " <i><b>hoja informativa</b></i> " sobre el estado de las cosas en el campo del <b>desarrollo de</b> firmware <b>ShIoTiny</b> .  Aquellos que no est√©n interesados ‚Äã‚Äãen mi desarrollo de este art√≠culo pueden omitir este art√≠culo con la conciencia tranquila. <br><br>  Aquellos que no saben de qu√© est√°n hablando, pero quieren averiguarlo, pueden leer mis art√≠culos anteriores sobre el firmware <b>ShIoTiny</b> o consultar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Sitio del</b> proyecto <b>ShIoTiny</b></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La versi√≥n en l√≠nea del editor <b>ElDraw</b></a> es exactamente la misma que en el firmware, como referencia. <br><br>  Enlaces a esquemas, firmware y m√°s: en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>sitio</b></a> web de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>ShIoTiny</b></a> en la secci√≥n de documentaci√≥n. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Art√≠culos</b> anteriores de <b>ShIoTiny</b> y mis otros art√≠culos</a> <br><a name="habracut"></a><br><h3>  Introducci√≥n para tranquilizar al venerable p√∫blico </h3><br>  Dio la casualidad de que el cuarto trimestre es un apuro permanente.  Por lo tanto, algunos camaradas ya han comenzado a enterrar el proyecto <b>ShIoTiny</b> y a escribirme por correo, me dicen: "¬°Hola, autor, ¬ød√≥nde est√°s?"  ¬øPor qu√© no escribes?  ¬°Estamos usando su firmware aqu√≠!  y no eres un solo art√≠culo nuevo! " <br>  Por supuesto, eso fue de una manera educada, pero en t√©rminos de significado lo fue.  Algunos, por el contrario, escribieron sugerencias y comentarios, que ayudaron mucho en la captura de pulgas de software.  Gracias chicos  Siempre es bueno que no cocines en tu propio jugo, sino que tengas personas con ideas afines. <br><br>  Amigos!  Les recuerdo que mi proyecto es un hobby y adem√°s tengo un trabajo, una esposa e hijos.  As√≠ que te lo ruego: s√© indulgente.  El autor escribe c√≥mo puede y puede :) <br><br>  Me apresuro a tranquilizar a todos: ¬°el <u>proyecto no est√° muerto</u> !  Captur√© bastantes pulgas del c√≥digo y, adem√°s, rehice el sitio del proyecto (aunque todav√≠a no lo he terminado, lleno el sitio con contenido). <br><br>  Desde el punto de vista de la mayor√≠a de las ense√±anzas filos√≥ficas del mundo, no hay nada permanente.  Incluso nuestro universo est√° evolucionando.  ¬øQu√© podemos decir sobre el firmware del microcontrolador o el sitio web del proyecto? <br><br>  Los cambios clave en el firmware de <b>ShIoTiny</b> afectaron principalmente dos cosas: la posibilidad de redefinir las patas y la p√°gina de estado del controlador.  Hablaremos de ellos.  En cuanto al nuevo dise√±o del sitio del proyecto, no lo tocar√© aqu√≠: cualquiera que tenga curiosidad vendr√°, mirar√° y criticar√°. <br><br><h3>  Redefiniendo <b>las</b> piernas <b>ESP8266</b> </h3><br>  Entonces, las piernas o son - <b>GPIO</b> .  Inicialmente, las patas del microcontrolador <b>ESP866</b> no <b>estaban</b> destinadas a ser redefinidas.  Fueron clavados r√≠gidamente a las entradas y salidas de la placa <b>ESP-07</b> (cualquier persona interesada, todo est√° en el sitio web del proyecto). <br><br>  ¬°Pero de repente result√≥ que mi firmware sin ninguna alteraci√≥n va no solo en el m√≥dulo <b>ESP-07</b> con 1MB FLASH, sino tambi√©n en el <b>ESP-01</b> , <b>ESP-12</b> e incluso en el <b>ESP-8285</b> ! <br><br>  La pregunta que surgi√≥ correctamente fue que uno necesita 5 entradas y una salida, las otras 6 salidas y ninguna entrada, y los terceros tres term√≥metros al mismo tiempo. <br><br>  ¬°Una ola de cartas del p√∫blico indignado casi oscureci√≥ los restos de mi mente!  Mi esposa ya se estaba preparando para llamarme ayudantes con una camisa de la muerte ... ¬°Pero result√≥ ser un loco! <br>  Apretando los dientes y bebiendo tres litros de caf√©, recog√≠ los restos del cerebro, que por casualidad no estaban borrachos en el cuerpo estudiantil, y descubr√≠ c√≥mo implementar el truco redefiniendo las piernas para que todos se sintieran bien. <br><br>  No aburrir√© al lector con la cocina interna del programa.  Desde el punto de vista del usuario, todo parece extremadamente simple: presiona el mouse en un nodo que est√° conectado a cualquier <b>rama del</b> m√≥dulo <b>GPIO</b> y selecciona una rama de la lista de posibles.  Aproximadamente como se muestra en la figura a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/zn/-f/9x/zn-f9x5xesj70levkx1noewx5ay.jpeg"><br><br>  <b>N / A</b> : significa que el pie no est√° seleccionado. <br>  Si hay un nodo en el circuito con un tramo <b>N / A</b> no seleccionado, entonces dicho circuito no se puede cargar en el dispositivo; el editor de <b>ElDraw</b> no lo permitir√°.  Pero dicho esquema puede descargarse en el disco para continuar edit√°ndolo "en alg√∫n momento posterior". <br><br>  Todo es muy simple, pero hay matices. <br><br>  <b>En primer lugar</b> , lo cual es muy conveniente en mi opini√≥n, solo las piernas no utilizadas se muestran en la lista.  Es decir, elegir una pierna dos veces es imposible. <br><br>  <b>En segundo lugar</b> , la pata <b>GPIO15</b> est√° reservada para el bot√≥n AP y no puede usarse para otros fines.  Lo siento, pero de lo contrario, de ninguna manera ... <br><br>  <b>En tercer lugar</b> , el tramo <b>GPIO16</b> no se puede utilizar como una entrada binaria regular (nodo de <b>entrada</b> ). <br><br>  <b>Cuarto</b> , las <b>patas</b> <b>GPIO9</b> y <b>GPIO10</b> solo se pueden usar en el m√≥dulo <b>ESP-8285</b> .  En otros m√≥dulos, el resultado ser√° desastroso: ¬°dependencia total y reinicio sin fin! <br><br>  El √∫ltimo punto: el bloqueo de algunos m√≥dulos al elegir las <b>patas</b> <b>GPIO9</b> y <b>GPIO10</b> me hizo pensar mucho.  Despu√©s de todo, ¬°no quiero alterar el controlador cada vez si las patas se seleccionan incorrectamente!  Y se me ocurri√≥ una nueva y modificada forma de ingresar al modo de configuraci√≥n. <br><br><h3>  Nueva forma de ingresar al modo de configuraci√≥n </h3><br>  Si alguien ley√≥ mis art√≠culos anteriores, entonces recuerda que el modo de configuraci√≥n de firmware <b>ShIoTiny</b> es el modo en que el chip ESP8266 se convierte en un punto de acceso abierto, y el circuito del programa no se inicia autom√°ticamente despu√©s de reiniciar.  Y si no se inicia, no se bloquear√° al elegir las patas <b>GPIO</b> . <br><br>  Es decir, en el modo de configuraci√≥n, puede cambiar las patas problem√°ticas de <b>GPIO9</b> y <b>GPIO10</b> a otras.  ¬°Pero el problema es que puede ingresar al modo de configuraci√≥n solo presionando el bot√≥n <b>AP</b> durante aproximadamente 4 segundos!  ¬°Y durante este tiempo, el controlador tendr√° tiempo para comenzar a ejecutar el programa del circuito "curva" y congelarse! <br><br>  Para resolver este problema, se me ocurri√≥ un intervalo de protecci√≥n de medio segundo despu√©s de reiniciar el controlador.  Si se presiona el bot√≥n <b>AP</b> dentro de 0,5 segundos despu√©s de reiniciar el controlador, el controlador se reiniciar√° inmediatamente en el modo de configuraci√≥n.  Al mismo tiempo, durante el intervalo de protecci√≥n de medio segundo, el esquema del programa no se inicia.  Y eso significa que no se puede colgar. <br><br>  Las desventajas son obvias: el programa no se inicia de inmediato, sino medio segundo despu√©s.  Las ventajas son mucho m√°s sustanciales: si selecciona las "patas equivocadas" o el programa del circuito se congela por alg√∫n otro motivo, siempre puede pasar al modo de configuraci√≥n y solucionar la situaci√≥n sin parpadear el controlador. <br><br>  En la pr√°ctica, todo parece m√°s simple que un nabo al vapor: presionamos el bot√≥n <b>Restablecer</b> y, soltando el bot√≥n <b>Restablecer</b> all√≠ mismo, sin interferir, presionamos el bot√≥n <b>AP</b> .  Inmediatamente durante aproximadamente medio segundo, el LED azul de <b>ESTADO se</b> ilumina (si, por supuesto, lo ha soldado a <b>GPIO0</b> ) y el controlador se reiniciar√° en modo de configuraci√≥n. <br><br>  Si el circuito del programa funciona normalmente, siempre puede cambiar al modo de configuraci√≥n de la manera "antigua", presionando y manteniendo presionado el bot√≥n <b>AP</b> durante aproximadamente 4 segundos (hasta que se encienda el LED azul de <b>ESTADO</b> ). <br><br><h3>  <b>P√°gina de</b> estado de <b>ShIoTiny</b> </h3><br>  La capacidad de conectar las patas por voluntad del usuario ha llevado a una revisi√≥n de la p√°gina de informaci√≥n principal del firmware <b>ShIoTiny</b> . <br><br>  Despu√©s de una intensa deliberaci√≥n, llegu√© a la conclusi√≥n de que la p√°gina deber√≠a ser a) informativa yb) no contener demasiado. <br><br>  Lo que obtuve se muestra en la figura a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/c6/lr/as/c6lrasjcqqtzgd1fhz_gk--k4z4.jpeg"><br><br>  Hay dos secciones en la p√°gina de informaci√≥n principal: <b>Informaci√≥n</b> : <b>informaci√≥n</b> general y <b>GPIO usados</b> : informaci√≥n sobre el uso de patas de E / S.  Consideremos con m√°s detalle. <br><br><h4>  Secci√≥n de informaci√≥n </h4><br>  <b>Nombre: esp_8266_155da4</b> : un nombre √∫nico para el dispositivo.  Se genera autom√°ticamente y no se puede cambiar. <br><br>  <b>Ver: 2019-10-22 22:54:51 +0700 6b5ee82 clean</b> - versi√≥n de firmware (fecha de compilaci√≥n e identificador de confirmaci√≥n). <br><br>  <b>MQTT: conectado a: 192.168.1.2:21064, SSL</b> : conexi√≥n al servidor MQTT.  Muestra la direcci√≥n IP o URL del servidor, el puerto del servidor y el modo SSL si se utiliza una conexi√≥n segura.  Recuerde que si el programa del circuito no contiene nodos para trabajar con MQTT, ¬°entonces la conexi√≥n nunca se establecer√°! <br><br>  <b>WiFi: STA ip: 192.168.1.134.</b>  - <b>Modo de</b> operaci√≥n <b>WiFi ESP8266</b> : <b>STA</b> - estaci√≥n, <b>AP</b> - punto de acceso.  Se pueden seleccionar ambos modos con diferentes direcciones IP al mismo tiempo. <br><br>  <b>Ahora: mi√©, 30 de octubre de 2019 21:49:28 GMT + 0700</b> - hora actual.  ¬°Se muestra que solo hay un tiempo establecido por el nodo <b>Set Time</b> !  De lo contrario, se indicar√° que la hora no est√° sincronizada ni configurada. <br><br><h4>  Secci√≥n de GPIO usados </h4><br>  Esta secci√≥n muestra todas las patas del m√≥dulo utilizadas en el diagrama del programa y su estado actual. <br><br>  El formato de salida es obvio: <b>GPIO &lt;n√∫mero de pierna&gt; (funci√≥n): estado</b> <br>  El n√∫mero de tramo es el n√∫mero o, para el <b>ADC</b> , en lugar del n√∫mero ser√° la inscripci√≥n <b>adc</b> . <br>  Funci√≥n: <b>Entrada</b> - entrada binaria;  <b>Rel√©</b> - salida binaria;  <b>ADC</b> - ADC o tipo de sensor: <b>DS182x</b> o <b>DHTxx</b> . <br><br>  Campo "estado": depende del prop√≥sito de la pierna. <br>  Para entradas y salidas binarias: 0 o 1. <br>  Para sensores: temperatura, humedad. <br>  Para el ADC: sus lecturas se volvieron a calcular de acuerdo con la f√≥rmula dada (consulte la descripci√≥n del trabajo con el ADC en las instrucciones). <br><br>  En mi opini√≥n, la p√°gina principal contiene toda la informaci√≥n necesaria sobre el funcionamiento del controlador. <br><br><h3>  Conclusi√≥n </h3><br>  Aqu√≠, de hecho, est√°n todos los principales cambios en el firmware de hoy.  Adem√°s de estas innovaciones, se corrigieron docenas de cinco errores menores. <br><br>  Como de costumbre: instrucciones detalladas en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>sitio</b></a> web de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>ShIoTiny</b></a> en la secci√≥n de documentaci√≥n o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Sugerencias, deseos, cr√≠ticas, <s>dinero, regalos,</s> etc. Env√≠enme un comentario o correo electr√≥nico: <b>shiotiny@yandex.ru</b> . <br><br>  Esperando comentarios y sugerencias. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473832/">https://habr.com/ru/post/473832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473818/index.html">Aplicaci√≥n en TSD y comunicaci√≥n con 1C: Enterprise 8.3 a trav√©s del servicio HTTP. Parte 4 (OnKeyUp. Esc√°ner SC con emulaci√≥n de teclado)</a></li>
<li><a href="../473822/index.html">Oferta de trabajo en 1 d√≠a: c√≥mo entrevistamos y retroalimentamos el mismo d√≠a</a></li>
<li><a href="../473824/index.html">C√≥mo construir una tecnolog√≠a comercial para la planificaci√≥n de ventas en un solo sistema</a></li>
<li><a href="../473826/index.html">Autenticaci√≥n OTP en el servidor web Apache</a></li>
<li><a href="../473828/index.html">Visi√≥n por computadora como alternativa a los pases de oficina</a></li>
<li><a href="../473834/index.html">Monitoreo de Blackbox en redes Clos. Informe Yandex</a></li>
<li><a href="../473838/index.html">DJI Mavic Mini: el quadrocopter plegable m√°s ligero</a></li>
<li><a href="../473840/index.html">Transmita video desde un dispositivo Android a trav√©s de UDP a la aplicaci√≥n JAVA</a></li>
<li><a href="../473842/index.html">Resumen de noticias de octubre sobre aprendizaje autom√°tico e inteligencia artificial</a></li>
<li><a href="../473844/index.html">¬øPor qu√© necesitamos rangos de C ++ 20 en una trituradora simple?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>