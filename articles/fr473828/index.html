<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❣️ 🙅🏽 🔩 La vision par ordinateur comme alternative aux laissez-passer de bureau 🌹 🧔🏿 ☑️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, je vais vous dire comment nous avons créé un système de contrôle d'accès au bureau basé sur le service de reconnaissance faciale Vision ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La vision par ordinateur comme alternative aux laissez-passer de bureau</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br><br>  Aujourd'hui, je vais vous dire comment nous avons créé un système de contrôle d'accès au bureau basé sur le service de reconnaissance faciale <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vision</a> .  Tout d'abord, un peu d'histoire.  Comme dans tout service de messagerie, nous avons créé un système anti-spam.  De tels systèmes sont maintenant fabriqués sur la base de l'apprentissage automatique, nous avons une équipe puissante en charge.  Et là où il y a l'apprentissage automatique, il y a la vision par ordinateur.  Par conséquent, le service Vision est né tout naturellement et naturellement. <br><br>  Parallèlement à cela, nous avons lancé il y a quelques années le Cloud, un stockage de fichiers fiable avec géo-distribution vers les centres de données, qui peut être utilisé par les particuliers et les entreprises.  Au fil du temps, nous avons obtenu un "Cloud pour les entreprises", qui non seulement stocke les fichiers, mais vous permet également de commander des machines virtuelles.  Progressivement, cela s'est transformé en MCS - Mail.ru Cloud Solutions, où Vision s'intègre organiquement dans l'un des services. <br><a name="habracut"></a><br><h1>  Nuage </h1><br>  Nos réseaux de neurones sont capables de reconnaître non seulement les visages, mais aussi divers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">objets, objets et scènes</a> , y compris les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vues</a> .  Maintenant, ils peuvent reconnaître environ 10 000 catégories, et la vision industrielle fonctionne parfois mieux que l'homme. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br><br>  C'est ma fille en 2012, en 2015 et 2018.  Si je ne la connaissais pas personnellement, je n’avais probablement pas immédiatement compris qu’il s’agissait d’une seule et même personne.  Et le réseau neuronal a pu correspondre et comprendre. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br><br>  Ici, la fille se détourna et plissa les yeux, et le garçon en général dans une casquette avec une ombre sur la moitié de son visage.  Mais en même temps, le réseau de neurones les a reconnus avec précision, malgré des conditions aussi difficiles.  Naturellement, la technologie qui se développe au sein de l'entreprise ne pouvait que trouver un support dans les services internes. <br><br><h1>  Notre intranet </h1><br>  Notre intranet s'appelle sys.  Il s'agit d'une sorte de réseau social (nous en avons peu).  Dans ce document, les employés téléchargent des photos de divers événements. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br><br>  Lorsque plusieurs centaines de photos sont présentées lors de l'événement, il est assez difficile de s'y retrouver.  Par conséquent, nous avons la vision industrielle connectée à ces albums, qui directement sur l'intranet, en un seul endroit, montre les photographies dans lesquelles je suis représenté.  Ici, le système m'a vu à l'une des fêtes d'entreprise d'été. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br><br>  Le réseau de neurones m'a reconnu même au crépuscule de profil, et il y a beaucoup plus de gens sur la photo. <br><br><h1>  Supports de conférence </h1><br>  Plus tard, nous avons fait des supports de conférence.  J'ai écrit un logiciel pour l'iPad, qui est installé à l'intérieur du rack, mais en général, je suis un développeur iOS et je n'ai rien à voir avec la vision par ordinateur, j'aide simplement de manière conviviale. <br><br><img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br><br>  Quelle est l'essence de ce rack?  Tout au long de l'événement - une réunion, une conférence, une fête d'entreprise ou au moins un anniversaire - vous êtes photographié par un photographe.  De temps en temps, il dépose les images accumulées dans le cloud.  Vous pouvez vous rendre au comptoir à tout moment, prendre une photo et cliquer sur le bouton «Find Me».  Et le rack affichera immédiatement toutes les photos dans lesquelles vous êtes capturé, ou dira que rien n'a été trouvé jusqu'à présent, si le système n'a pas encore réussi à indexer les images, et vous invite à entrer un e-mail.  Et après l'événement, vous recevrez un lien par courrier électronique vers le dossier dans le Cloud avec toutes les photos sur lesquelles vous vous trouvez.  C'est l'une des applications du service Vision. <br><br><h1>  Système d'accès </h1><br>  Naturellement, je voulais utiliser ces capacités de reconnaissance faciale non seulement pour rechercher ma physionomie dans des images d'entreprise, mais aussi pour quelque chose de plus pratique.  Par exemple, pour un système de débit automatique.  Appliquer un laissez-passer à chaque entrée de votre étage n'est pas très pratique: vous oubliez souvent le laissez-passer, et pour les filles en vêtements légers en été, il n'y a pas de place pour réparer le laissez-passer. <br><br>  Par conséquent, nous avons décidé d'expérimenter.  Nous avons toutes les conditions pour cela: nous n'avons besoin de demander la permission à personne, un service administratif très réactif, qui dit en soupirant: "D'accord.  Fixez vos caméras.  Mais pas à la porte.  Les portes concernent la sécurité incendie. »  Nous sommes: «Eh bien, alors.  Nous attacherons sur le côté. "  Nous avons aussi des collègues patients, ils ont souffert de nous. <br><br><h1>  L'architecture </h1><br>  À première vue, l'architecture du système d'accès semble très simple: la caméra prend des photos, les envoie à Vision, et Vision ouvre la porte.  Mais quand nous avons commencé à peindre avec des collègues comment faire cela, nous avons alors obtenu un tel schéma: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br><br>  Le bloc à droite, nous appelons la «caméra» - c'est le module qui se bloque sur la porte.  Il se compose de trois parties.  Le Raspberry Pi reçoit la vidéo d'une caméra USB, encode avec FFmpeg et envoie.  Nous avons testé plusieurs caméras IP d'une gamme de prix raisonnable, et tout le monde avait un retard notable d'environ 0,5 s.  Et comme nous avons des retards à d'autres stades, lorsqu'une personne se lève, regarde la caméra et que pendant quelques secondes rien ne se passe, elle veut déjà faire une passe.  Par conséquent, nous avons réduit les délais autant que possible, et le Raspberry Pi avec une caméra USB s'est avéré être plus rapide que de nombreuses caméras IP commerciales.  Un autre Arduino avec une LED multicolore et un squeaker est également connecté au Raspberry.  La LED par défaut est rouge.  Lorsqu'une personne se lève et est reconnue, le vert s'allume. <br><br>  Ainsi, le Raspberry Pi transmet le flux vidéo, qui via Ethernet filaire entre dans le serveur.  Nous avons une salle de serveurs à chaque étage, dans laquelle il y a des commutateurs, des câbles de connexion aux bureaux des employés et un système de contrôle d'accès à temps plein - un système de contrôle et de gestion des accès. <br><br>  Nous avons mis un autre Raspberry Pi dans la salle des serveurs, qui reçoit le flux vidéo en temps réel et le fait passer par OpenCV.  Pourquoi avons-nous besoin d'OpenCV?  Nous devons déterminer s'il y a un visage dans l'image.  Un réseau de neurones qui définit une personne sur une photo fonctionne un peu plus longtemps, et il est trop coûteux de lui envoyer un flux vidéo en permanence.  Par conséquent, via OpenCV, nous déterminons la présence d'un visage, et s'il apparaît, nous l'envoyons à Vision.  Le service répond qu'il n'a pas trouvé cet employé ou envoie l'identifiant de l'employé dans la base de données RH.  Avec cet identifiant d'employé, nous allons sur l'intranet associé à l'ACS, et il nous renvoie l'identifiant du pass.  De plus, nous jetons cet identifiant de passe dans Arduino, qui le transmet à l'ACS.  Pour un système de contrôle d'accès, cela équivaut à une personne appliquant un laissez-passer.  Autrement dit, nous ne modifions en aucun cas l'AEC; il enregistre toujours l'entrée et la sortie des employés. <br><br>  Comment avons-nous intégré notre système à ACS?  Dans notre bureau, des appareils Bolid C2000-2 sont utilisés. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br><br>  Il s'agit d'un système de contrôle d'accès national.  Très probablement, vous pouvez vous connecter à ces appareils via la 485e interface, mais nous nous sommes connectés via le protocole Wiegand. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br><br>  Nous avons connecté l'Arduino, qui agit comme un proxy, au lecteur de laissez-passer installé près de la porte. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br><br>  La photo montre la connexion électrique et deux lignes de données du lecteur de laissez-passer.  Le pad est utilisé pour une connexion plus pratique. <br><br>  Arduino reçoit le numéro de passe soit du lecteur ou du Raspberry Pi via USB, et le donne à l'ACS.  L'ACS ne sait même pas d'où vient le numéro de passe. <br><br><h1>  Wiegand </h1><br>  Il s'agit d'un protocole standard pour les systèmes de contrôle d'accès, il est pris en charge par la plupart des lecteurs.  Le protocole est très simple: deux lignes de données, une ligne de zéros et une ligne d'unités.  Dès que vous connectez la ligne zéro à la terre, le lecteur comprend que le zéro est transmis, de même avec les unités.  Autrement dit, le protocole n'a pas de temporisations standardisées, et le numéro de saut est facile à lire à travers une interruption sur l'Arduino, il est facile de le représenter comme une séquence de données.  Et comme l'enregistrement nécessite une certaine synchronisation, je me suis concentré sur ces valeurs: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br><br>  Il existe déjà une bibliothèque prête à l'emploi pour Arduino.  Elle peut lire différents formats Wiegand, mais ses capacités sont limitées à cela.  Et je devais encore transmettre.  Par conséquent, j'ai écrit ma bibliothèque, qui ne fonctionne qu'avec le format Wiegand-26.  26 est le nombre de bits: 3 octets du numéro de saut et 2 bits de parité.  De plus, dans toute la documentation et les articles, il est écrit que, très probablement, votre contrôleur moderne ignorera les bits de parité, donc je suis paresseux et ne les compte pas, mais envoie toujours zéro.  ACS le perçoit normalement. <br><br>  Nous avons eu un autre problème: si quelqu'un est apparu devant la caméra, puis, sans attendre l'opération, a appliqué un laissez-passer, une situation de course s'est produite: en même temps, le numéro de passe provenait du lecteur et de la reconnaissance.  ACS n'a pas pu faire face à cela et n'a pas laissé entrer les gens.  Par conséquent, j'ai dû ajouter un tampon en anneau avec 4 codes à la bibliothèque.  Peu importe d'où viennent les codes, ils sont placés dans le tampon, puis avec un timeout de 0,5 s sont transmis à l'ACS.  Depuis lors, les collègues ont cessé de se plaindre qu'ils ne sont pas autorisés. <br><br><h1>  Banc d'essai </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br><br>  Le premier prototype a été assemblé à partir de quelque chose d'horrible.  Le Raspberry Pi était accroché dans une boîte sur un rack ridicule, et un appareil photo était collé sur un ruban adhésif double face.  Arduino se bloque sur les chapes latérales.  En général, tout ce que nous aimons est très bricolage. <br><br>  Bien sûr, sous cette forme il était impossible de partir, il fallait s'organiser magnifiquement.  Nous avons discuté avec plusieurs entrepreneurs, ils nous ont promis de commander des échantillons en Chine, mais tous les délais convenus sont passés et personne ne nous a rien offert. <br><br>  Les produits personnalisés ont un problème - toutes les solutions sont hautement spécialisées, elles seraient faites spécialement pour nous.  Premièrement, nous devenons dépendants du fournisseur.  Deuxièmement, il s'avère une conception de circuit unique avec une petite circulation, ce qui signifie que le coût d'une pièce sera élevé.  Troisièmement, le temps de production est suffisamment long et si une copie échoue, nous ne pourrons pas acheter rapidement un remplaçant dans le magasin, nous devrons attendre la prochaine impression et si nous le faisons immédiatement, les copies restantes seront dépoussiérées dans l'entrepôt. <br><br>  Après que tous les partenaires potentiels nous aient laissé tomber, je suis allé voir un collègue de Vision et lui ai dit: "Volodya, laissez-moi imprimer un étui sur votre imprimante 3D pour le rendre beau."  Il soupira et dit: «Allez.  Que faire? " <br><br><h1>  Camera V 1 </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br><br>  Dans Fusion, j'ai dessiné un tel monstre de Frankenstein.  Dans le coin était censé être un Raspberry Pi avec une entrée pour un câble Ethernet.  Entrée latérale pour le pouvoir.  Le «deuxième étage» était une caméra.  Le résultat était une grande structure, et je l'ai même imprimée avec une fine couche afin de ne pas dépenser beaucoup de plastique.  Cela avait l'air terrible, et le suspendre était encore plus embarrassant. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br><br>  De plus, un collègue m'a envoyé une telle référence, disent-ils, nous aimerions cela.  J'ai répondu que je ne pouvais pas faire cela, mais j'ai décidé de concevoir un autre bâtiment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br><br>  Le nouveau boîtier avait un diamètre de 11 cm, plus petit que le CD.  Le placement du remplissage est également à deux couches.  Après avoir imprimé la première version, j'ai réalisé que cela n'avait aucun sens de mettre la caméra USB entièrement dans son boîtier d'origine.  Je l'ai démonté soigneusement et il s'est avéré qu'il avait 4 trous d'atterrissage sur le panneau avant.  J'ai combiné ce panneau avec une caméra dans un assemblage commun avec un tweeter et une LED. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br><br>  Tout d'abord, nous avons essayé de générer un grincement sur le Raspberry Pi via gpio.  Cela s'est avéré extrêmement mauvais.  Par conséquent, nous avons décidé de prendre cette fonction séparément du Raspberry Pi en connectant un petit arduino (en fait Iskra mini), auquel le squeaker et la LED ont été soudés, via TTL directement au bloc. <br><br>  Voici à quoi cela ressemblait au combat: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br>  Nous avons accroché l'appareil au sol.  Sous cette forme, elle a vécu assez longtemps.  Grinçant, magnifiquement brillant, ouvrant la porte, cependant, pas à chaque fois.  Des collègues se sont toutefois plaints que la LED était trop lumineuse.  J'ai dû l'affaiblir 4 fois. <br><br><h1>  Camera V 2 </h1><br>  Ensuite, ils ont fait cette option: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br><br>  Il a été inspiré par la conception du moyeu Xiaomi, avec un anneau lumineux autour du périmètre.  C'est très beau.  Le logo Vision est composé de pièces individuelles imprimées dans des plastiques de différentes couleurs.  Voici le modèle: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br><br>  Cette fois, j'ai placé le grinceur sur le mur arrière, monté la LED dans un anneau transparent autour du périmètre, imprimé à partir d'un PLA transparent.  Le décor s'est presque immédiatement effondré à l'intérieur, car il était à l'origine simplement inséré par friction, et j'ai dû le mettre sur de la colle. <br><br><h1>  Problèmes de caméra </h1><br>  Nous avons eu l'idée de reproduire cette décision dans tout le bâtiment.  Mais il y a un problème: presque tous les étages ont deux portes, et chacune devrait avoir deux caméras, seulement 96 caméras pour une seule de nos tours, et maintenant la deuxième est en cours de développement actif.  Il est possible d'imprimer autant de cas, mais cela semble déjà compliqué.  De plus, nous avons plusieurs composants dans l'appareil, ce qui signifie de nombreux points de défaillance.  Si nous adaptons la solution à l'ensemble du bâtiment, nous maintiendrons constamment ces caméras.  Encore une fois, la complexité du remplacement rapide, car chaque caméra est un appareil monobloc.  Et vous devez soit en imprimer un grand nombre, avec une marge, soit, si quelque chose s'est produit, puis exécuter immédiatement, imprimer et collecter un nouveau.  Nous avons réalisé que les solutions de bricolage sont cool, mais vous avez besoin de quelque chose de plus pratique dans la réplication.  Et l'idée est venue de tout transférer sur l'iPad. <br><br><h3>  IPad </h3><br>  L'iPad présente plusieurs avantages.  Le premier est l'écran.  Les collègues se sont plaints du manque de rétroaction, ils conviennent et ne comprennent pas si la reconnaissance a commencé ou non, attendez-les ou n'attendez pas. <br><br>  Deuxièmement, iOS a une fonction de reconnaissance faciale intégrée.  La fonction effectuée par OpenCV a été transmise à l'iPad.  Un cadre est affiché à l'écran, et la personne doit venir si loin que le visage s'insère dans ce cadre.  Après cela, le système commence à le reconnaître automatiquement, vous n'avez pas besoin d'appuyer sur quoi que ce soit. <br><br>  Troisièmement, l'iPad est un produit de masse.  S'il échoue, nous en définissons un autre.  Bien que la tablette elle-même coûte environ 20 000 roubles, elle est toujours moins chère que les caméras personnalisées que nos partenaires nous ont proposées.  De plus, plus rapide et plus fiable. <br><br><h1>  Nouvelle architecture </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br><br>  L'iPad a repris la plupart des fonctionnalités.  Sur le Raspberry Pi, qui se trouve dans la salle des serveurs, il n'y a en fait qu'un hôte HTTP qui accepte une demande GET avec un ID de passe.  Il a immédiatement mandaté le code dans Arduino, et elle a mandaté dans ACS. <br><br>  Dans la première version, Raspberry Pi était très chargé, car OpenCV y travaillait constamment.  Il n'était plus possible d'y connecter un deuxième appareil photo, il n'y aurait pas assez de puissance de calcul.  Nous avons déjà pensé à y installer un ordinateur honnête, qui analyserait 4 fils de deux portes.  Mais ce n'est pas arrivé à cela.  Maintenant, la recherche de visage dans l'image est effectuée indépendamment sur chaque iPad.  Dans la croix, il y a deux Arduino, un pour chaque porte.  Les deux panneaux fonctionnent avec des laissez-passer d'entrée et de sortie.  Pourquoi est-il important de travailler avec des laissez-passer d'entrée et de sortie?  Premièrement, lorsque le visage est reconnu et que la porte s'ouvre, le voyant vert du lecteur de carte s'allume et les collègues comprennent que vous pouvez sortir.  Deuxièmement, ACS enregistre les entrées et les sorties.  En émulant l'entrée et la sortie séparément, nous ne cassons pas le schéma de fonctionnement ACS. <br><br>  Naturellement, les designers se sont ressaisis qui nous ont dessiné une belle interface.  Voici à quoi cela ressemble maintenant sur l'un des étages de notre bureau: <br><br><img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br><br><h1>  Travailler avec Vision </h1><br>  Malgré le fait que MCS soit un produit professionnel, les amateurs peuvent également l'utiliser.  Le service offre à chacun 5 000 transactions gratuites par mois, soit 166 par jour.  Par conséquent, vous pouvez appliquer pour vos besoins domestiques, si vous vous adaptez à la limite, bien sûr.  Comment cela peut-il se faire? <br><br><pre><code class="python hljs">python examples/python/smarty.py \ -u <span class="hljs-string"><span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize ?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce 99c01a80a4558d8ed93b313737363830"</span></span> \ -p friends1.jpg \ --meta <span class="hljs-string"><span class="hljs-string">'{"space":"1", "create_new":true}'</span></span> \ -v</code> </pre> <br>  Prenez une photo et envoyez-la à Vision avec notre jeton d'accès.  Nous indiquons que nous travaillons avec le premier espace et définissons <code>create_new</code> - alors le système créera un nouvel identifiant pour chaque personne inconnue.  Voici ce que nous obtenons en réponse: <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"objects"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"file_0"</span></span>, <span class="hljs-string"><span class="hljs-string">"persons"</span></span>:[ {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person1"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">102</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>,<span class="hljs-number"><span class="hljs-number">134</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99999</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5025</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person2"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">393</span></span>,<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">461</span></span>,<span class="hljs-number"><span class="hljs-number">166</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99987</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.548</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person3"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">458</span></span>,<span class="hljs-number"><span class="hljs-number">48</span></span>,<span class="hljs-number"><span class="hljs-number">535</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99976</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4766</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person4"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">273</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span>,<span class="hljs-number"><span class="hljs-number">352</span></span>,<span class="hljs-number"><span class="hljs-number">147</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99963</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.504</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person5"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">525</span></span>,<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99954</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4849</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person6"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">194</span></span>,<span class="hljs-number"><span class="hljs-number">76</span></span>,<span class="hljs-number"><span class="hljs-number">258</span></span>,<span class="hljs-number"><span class="hljs-number">167</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.9984</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5725</span></span>} ] } ], <span class="hljs-string"><span class="hljs-string">"aliases_changed"</span></span>:false }, <span class="hljs-string"><span class="hljs-string">"htmlencoded"</span></span>:false, <span class="hljs-string"><span class="hljs-string">"last_modified"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  J'ai un peu formaté JSON.  La réponse contient l'identifiant de la personne, les coordonnées du visage sur la photo et deux paramètres: dans quelle mesure le visage est reconnu et dans quelle mesure cette personne correspond à la norme.  Vous pouvez envoyer une requête POST avec une image dans votre langage de programmation, obtenir du JSON et analyser la réponse. <br><br>  Si vous avez une grande croix et que vous devez déterminer seulement une douzaine de personnes, vous pouvez les définir manuellement.  Ensuite, le système distribuera des identifiants pour les personnes familières et indéfinis pour les inconnus.  Les personnes peuvent également être supprimées de manière sélective, par exemple, si un employé quitte. <br><br><h1>  Des idées </h1><br>  Dans quels projets pouvez-vous utiliser la reconnaissance faciale?  Si vous souhaitez implémenter un système de bande passante, vous devez vous soucier de l'anti-spoofing.  Par exemple, ajouter une caméra infrarouge pour déterminer s'il s'agit d'une photographie ou d'une personne vivante.  Ou en mettant deux caméras pour déterminer la profondeur de l'objet, cela peut être fait en utilisant OpenCV. <br><br>  Vous pouvez organiser la reconnaissance des personnes dans l'entrée.  Si ce sont vos voisins, alors tout est en ordre, et si quelqu'un est un étranger, vous pouvez vous envoyer une alerte.  Nous avons un tel problème dans notre maison, des étrangers viennent régulièrement et laissent beaucoup de déchets après eux sur le palier. <br><br>  Si vous fabriquez un «miroir intelligent», vous pouvez alors l'équiper de la reconnaissance des membres de la famille, afin que chacun puisse montrer ce qui l'intéresse.  Dis, le miroir me montrera le programme des rendez-vous d'aujourd'hui, et avec ma fille elle me saluera gaiement et proposera de me brosser les dents, et pas vite, comme d'habitude, mais deux minutes. <br><br>  Une autre idée est la reconnaissance d'une plaque d'immatriculation par un portail automatique dans le pays.  Afin de ne pas sortir ou d'appuyer sur le porte-clés, vous pouvez mettre une caméra qui supprimera votre numéro, et le portail s'ouvrira automatiquement. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473828/">https://habr.com/ru/post/fr473828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473816/index.html">Fonctionnalités du JavaScript moderne que vous ignorez peut-être</a></li>
<li><a href="../fr473818/index.html">Application sur TSD et communication avec 1C: Enterprise 8.3 via HTTP-Service. Partie 4 (scanner OnKeyUp. SC avec émulation clavier)</a></li>
<li><a href="../fr473822/index.html">Offre d'emploi en 1 jour: comment nous avons interviewé et commenté le même jour</a></li>
<li><a href="../fr473824/index.html">Comment construire une technologie d'entreprise pour la planification des ventes dans un seul système</a></li>
<li><a href="../fr473826/index.html">Authentification OTP sur le serveur Web Apache</a></li>
<li><a href="../fr473832/index.html">ShIoTiny: mises à jour et notifications</a></li>
<li><a href="../fr473834/index.html">Surveillance de Blackbox dans les réseaux Clos. Rapport Yandex</a></li>
<li><a href="../fr473838/index.html">DJI Mavic Mini: le quadricoptère pliant le plus léger</a></li>
<li><a href="../fr473840/index.html">Diffusez des vidéos depuis un appareil Android via UDP vers une application JAVA</a></li>
<li><a href="../fr473842/index.html">Sommaire des actualités sur l'apprentissage automatique et l'intelligence artificielle d'octobre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>