<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçß üê± üõÅ Como gerar um enorme gr√°fico financeiro com padr√µes de lavagem de dinheiro? üê´ üëÇüèø üîù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° alguns anos, minha equipe (conformidade em um dos bancos su√≠√ßos) e eu t√≠nhamos uma tarefa interessante a implementar - tivemos que gerar um enorme ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como gerar um enorme gr√°fico financeiro com padr√µes de lavagem de dinheiro?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447798/"><img src="https://habrastorage.org/getpro/habr/post_images/1f7/2b3/6c7/1f72b36c76729f1460d83fd2f3251cfa.jpg" alt="imagem"><br><br>  H√° alguns anos, minha equipe (conformidade em um dos bancos su√≠√ßos) e eu t√≠nhamos uma tarefa interessante a implementar - tivemos que gerar um enorme gr√°fico aleat√≥rio de transa√ß√µes financeiras entre clientes, empresas e caixas eletr√¥nicos.  Al√©m disso, quer√≠amos que este gr√°fico contivesse alguns padr√µes de lavagem de dinheiro e outros crimes financeiros, juntamente com a descri√ß√£o dos n√≥s, como nomes, endere√ßos, moedas, etc.  Obviamente, todos os dados devem ser gerados aleatoriamente do zero, desde que n√£o possamos usar dados reais por raz√µes √≥bvias. <br><br>  Como solu√ß√£o, escrevemos um gerador que eu adoraria compartilhar com voc√™.  Este artigo explica por que precisamos dele e como esse gerador est√° funcionando, mas se voc√™ n√£o quiser ler e experimentar por conta pr√≥pria, aqui est√° o c√≥digo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/MGrin/transactions-graph- gerador</a> .  Espero que nossa experi√™ncia seja √∫til para qualquer um de voc√™s. <br><a name="habracut"></a><br><h2>  Por que est√°vamos interessados ‚Äã‚Äãem tal gerador? </h2><br>  Nossa equipe decidiu patrocinar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hauzaton</a> LauzHack.  Uma das condi√ß√µes para os patrocinadores era fornecer uma tarefa de neg√≥cios real para os participantes e, por acaso, tivemos um projeto interessante relacionado √† descoberta de lavagem de dinheiro entre o gr√°fico da transa√ß√£o.  Obviamente, decidimos dar a mesma tarefa aos participantes do hackaton. <br><br>  Como eu disse anteriormente, n√£o pod√≠amos usar dados reais, ent√£o precisamos cri√°-los.  Para tornar a tarefa o mais pr√≥xima poss√≠vel do mundo real, obtivemos algumas estat√≠sticas de nossos dados e tentamos gerar dados para seguir distribui√ß√µes semelhantes.  Tamb√©m n√£o quer√≠amos ter um gr√°fico pequeno - diariamente trabalhamos com bilh√µes de transa√ß√µes entre milh√µes de n√≥s, e quer√≠amos dar aos participantes a capacidade de experimentar suas id√©ias na mesma escala. <br><br><h2>  O que conseguimos como resultado? </h2><br>  Poder√≠amos construir um gerador de gr√°ficos bastante r√°pido, interessante e configur√°vel!  Vamos ver mais em detalhes: <br><br><h3>  Tipos de n√≥s </h3><br>  Participantes do nosso sistema financeiro gerado: <br><br><ul><li>  Cliente - uma conta de um cliente banc√°rio abstrato.  Cont√©m campos como nome, email, idade, profiss√£o, educa√ß√£o, nacionalidade e endere√ßo. </li><li>  Empresa - uma entidade comercial em nosso sistema financeiro.  Cont√©m campos como tipo, nome e pa√≠s. </li><li>  ATM - um ponto de sa√≠da do dinheiro do nosso gr√°fico financeiro para o exterior, onde n√£o pode mais ser rastreado.  Cont√©m coordenadas GPS. </li><li>  Transa√ß√£o - registro de transfer√™ncia de dinheiro entre 2 n√≥s do gr√°fico.  Cont√©m indicadores para n√≥s de origem e destino, quantidade, moeda e data e hora da execu√ß√£o. </li></ul><br>  Para gerar esses dados, usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mimesis</a> , uma √≥tima biblioteca para gera√ß√£o de dados falsos. <br><br><h3>  Gera√ß√£o de gr√°ficos: entidades b√°sicas </h3><br>  O gerador come√ßa com a cria√ß√£o de entidades b√°sicas - clientes, empresas e caixas eletr√¥nicos.  O script usa como entrada um n√∫mero desejado de clientes e, com base nesse n√∫mero, calcula o n√∫mero de empresas e caixas eletr√¥nicos a serem gerados.  Inferimos que o n√∫mero de empresas √© igual a 2,5% do n√∫mero total de clientes e o n√∫mero de caixas eletr√¥nicos √© igual a 0,05%.  Esses par√¢metros s√£o bastante m√©dios e s√£o codificados no interior do pr√≥prio gerador. <br><br>  Todas as informa√ß√µes geradas s√£o salvas em arquivos .csv.  A grava√ß√£o nesses arquivos √© feita por lotes de k linhas, sendo um par√¢metro configur√°vel.  Al√©m disso, todo tipo de n√≥ √© gerado em paralelo para acelerar todo o processo. <br><br><h3>  Gera√ß√£o de gr√°fico: arestas entre entidades </h3><br>  Ap√≥s a cria√ß√£o das entidades b√°sicas, come√ßamos a conect√°-las entre si.  Nesta fase, ainda n√£o estamos gerando transa√ß√µes, mas apenas o fato de dois n√≥s estarem conectados.  Fizemos dessa maneira para acelerar o processo e funciona da seguinte maneira: se houver uma borda entre dois n√≥s, haver√° um certo n√∫mero de transa√ß√µes separadas no tempo.  Sem margem - sem transa√ß√µes. <br><br>  A probabilidade se e borda entre dois n√≥s e os poss√≠veis tipos de borda s√£o: <br><br><ul><li>  Cliente -&gt; Cliente, p = 0,4% </li><li>  Cliente -&gt; Empresa, p = 1% </li><li>  Cliente -&gt; ATM, p = 3% </li><li>  Empresa -&gt; Cliente, p = 0,5% </li></ul><br>  Essas probabilidades podem ser configuradas usando par√¢metros do gerador. <br><br>  Assim como n√≥s, todos os tipos de arestas s√£o gerados em paralelo e gravados em arquivos em lotes. <br><br><h3>  Gera√ß√£o de gr√°fico: transa√ß√µes </h3><br>  Tendo n√≥s e arestas tendo uma distribui√ß√£o desejada, podemos iniciar a gera√ß√£o de transa√ß√µes.  O processo √© simples de implementar, mas √© bastante dif√≠cil de ser paralelizado.  Por esse motivo, neste est√°gio, apenas dois threads est√£o funcionando - um para gera√ß√£o de transa√ß√µes de sourcing de clientes, outro - para gera√ß√£o de transa√ß√µes de sourcing de empresas.  O n√∫mero de transa√ß√µes para uma borda √© aleat√≥rio e separado aleatoriamente no tempo. <br><br>  Como acima, as transa√ß√µes geradas s√£o gravadas em arquivos .csv em lotes. <br><br><h3>  Gera√ß√£o de gr√°ficos: padr√µes </h3><br>  √â aqui que as coisas est√£o ficando interessantes.  Definimos tr√™s padr√µes que quer√≠amos ter em nosso gr√°fico: <br><br><ul><li>  Fluxo - uma grande quantia de dinheiro √© enviada do n√≥ de origem para os n√≥s N e qualquer um desses n√≥s envia dinheiro para outros K n√≥s etc.  at√© a √∫ltima camada desta rede enviar todo o dinheiro recebido para um n√≥ de destino. </li><li>  Circular - uma grande quantidade de dinheiro passa por diferentes n√≥s e volta ao n√≥ de origem. </li><li>  Tempo - alguma quantidade √© transferida do n√≥ A para o n√≥ B v√°rias vezes, separadas pelo tempo pseudo-aleat√≥rio. </li></ul><br>  Vamos descobrir esses padr√µes um por um. <br><br><h4>  Flow </h4><br>  Come√ßamos selecionando um n√∫mero de camadas da rede.  Em nossa realiza√ß√£o, √© um n√∫mero aleat√≥rio entre 2 e 6, e esses valores n√£o s√£o configur√°veis.  Em seguida, escolhemos aleatoriamente 2 n√≥s - origem e destino.  Al√©m disso, a quantidade que ser√° emitida por um n√≥ de origem √© gerada aleatoriamente como 50000 * random () + 50000 * random (). <br><br>  Todo participante desta rede est√° recebendo um pagamento por seu servi√ßo.  Em nossa realiza√ß√£o, o pagamento total por todo o uso da rede n√£o exceder√° 10% do valor da fonte. <br><br>  Todas as transa√ß√µes geradas s√£o atrasadas no tempo de uma camada para outra.  Os atrasos s√£o aleat√≥rios e n√£o excedem 5 dias. <br><br><h4>  Circular </h4><br>  √â semelhante ao padr√£o Fluxo, exceto que os n√≥s de origem e de destino s√£o os mesmos e h√° apenas um n√≥ por camada intermedi√°ria. <br><br><h4>  Tempo </h4><br>  O padr√£o mais f√°cil.  Uma quantidade aleat√≥ria √© enviada do n√≥ A para o n√≥ B v√°rias vezes (n√∫mero aleat√≥rio entre 5 e 50, n√£o configur√°vel) com atrasos pseudo-aleat√≥rios entre transa√ß√µes. <br><br><h3>  Randomiza√ß√£o final de transa√ß√µes </h3><br>  Nesta fase, temos v√°rios arquivos .csv: <br><br><ul><li>  3 arquivos com informa√ß√µes de n√≥s (clientes, empresas, caixas eletr√¥nicos) </li><li>  4 arquivos com transa√ß√µes: um para transa√ß√µes usuais e 3 para transa√ß√µes de padr√µes gerados. </li></ul><br>  H√° outro script que aleatoriamente todas as transa√ß√µes e as concatena em um arquivo de transa√ß√µes. <br><br><h2>  O que fazer com a sa√≠da deste gerador </h2><br>  No final do dia, temos 4 belos arquivos .csv com n√≥s e transa√ß√µes de gr√°ficos.  Podemos importar esse gr√°fico para o Neo4J ou servi-lo pela API REST - basicamente, podemos fazer qualquer coisa com ele!  O tamanho do gr√°fico pode ser do tamanho que voc√™ deseja (acabamos gerando um gr√°fico com 2 bilh√µes de clientes e levou cerca de 8 horas no meu MacBook 2014). <br><br>  Recebemos muitos coment√°rios positivos dos participantes do hackaton, bem como algumas solu√ß√µes realmente boas para o problema de detec√ß√£o de padr√µes em grandes gr√°ficos. <br><br>  Obrigado pelo seu tempo, e aqui est√° o link para o gerador: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/MGrin/transactions-graph-generator</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447798/">https://habr.com/ru/post/pt447798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447786/index.html">Antecedentes: Robot Fedor, o que voc√™ √©?</a></li>
<li><a href="../pt447788/index.html">Criamos um agregador de not√≠cias com foco em criptomoedas - intwt.com</a></li>
<li><a href="../pt447790/index.html">Aprendendo a escrever contratos inteligentes do Waves no RIDE e RIDE4DAPPS. Parte 1 (carteira multiusu√°rio)</a></li>
<li><a href="../pt447792/index.html">Padr√µes sombrios e a lei: como os reguladores dos EUA tentam controlar a mec√¢nica dos produtos e reduzir a influ√™ncia de empresas de tecnologia</a></li>
<li><a href="../pt447794/index.html">Sobre coisas simples, complicadas. Uma carta de um qu√≠mico para uma impressora 3D. Solventes para pl√°sticos e prote√ß√£o contra eles</a></li>
<li><a href="../pt447802/index.html">Isabella 2</a></li>
<li><a href="../pt447804/index.html">Dwarf Fortress abandona gr√°ficos de texto, mas n√£o sua ess√™ncia</a></li>
<li><a href="../pt447806/index.html">Acelerando o desempenho de redes neurais usando hash</a></li>
<li><a href="../pt447808/index.html">Aprendendo a escrever contratos inteligentes do Waves no RIDE e RIDE4DAPPS. Parte 2 (DAO - Organiza√ß√£o Aut√¥noma Descentralizada)</a></li>
<li><a href="../pt447810/index.html">O Analytics for Azure DevOps Services agora est√° dispon√≠vel ao p√∫blico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>