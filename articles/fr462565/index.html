<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úäüèº üëÜ üß£ Comment pr√©parer les donn√©es pour SAP Process Mining by Celonis üë∫ üñêüèº üëò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Utilisation des donn√©es d'un syst√®me de gestion des services informatiques (ITSM) √† titre d'exemple. 

 Dans un article pr√©c√©dent sur SAP Process Mini...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment pr√©parer les donn√©es pour SAP Process Mining by Celonis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sap/blog/462565/">  Utilisation des donn√©es d'un syst√®me de gestion des services informatiques (ITSM) √† titre d'exemple. <br><br>  Dans un article pr√©c√©dent sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAP Process Mining ou comment comprendre nos processus m√©tier,</a> nous avons parl√© de Process Mining et de son application dans un environnement d'entreprise.  Aujourd'hui, nous voulons parler davantage du mod√®le de donn√©es et du processus de pr√©paration.  Nous examinerons les composants, comment ils sont interconnect√©s, quel format de donn√©es demander aux propri√©taires de donn√©es et quelle pourrait √™tre l'approche de g√©n√©ration d'une table d'√©v√©nements pour SAP Process Mining by Celonis. <br><a name="habracut"></a><br><h3>  Mod√®le de donn√©es dans SAP PROCESS MINING by CELONIS </h3><br>  La structure des donn√©es dans l'outil SAP Process Mining by Celonis est assez simple: <br><br><ul><li>  "Table d'√©v√©nements."  Il s'agit d'une partie obligatoire du mod√®le de donn√©es.  Une telle table ne peut √™tre qu'une seule dans chaque mod√®le de donn√©es individuel.  Un graphe de processus y est automatiquement g√©n√©r√©.  Voir figure 1. </li><li>  Les r√©pertoires sont toutes les autres tables qui d√©veloppent la ¬´table des √©v√©nements¬ª avec des informations analytiques suppl√©mentaires.  Contrairement √† elle, les informations de r√©f√©rence ne changent pas avec le temps.  Plus pr√©cis√©ment, il ne devrait pas changer dans l'intervalle de temps que nous analysons.  Par exemple, il peut s'agir d'un tableau avec une description des propri√©t√©s des contrats, des articles d'approvisionnement, des demandes de quelque chose, des employ√©s, des r√®glements, des entrepreneurs et d'autres objets qui sont impliqu√©s d'une mani√®re ou d'une autre dans le processus.  Dans ce cas, la r√©f√©rence d√©crira toutes sortes de propri√©t√©s statiques de ces objets (montants, types, noms, noms, tailles, d√©partements, adresses et autres attributs divers).  Les r√©pertoires sont facultatifs.  Vous pouvez ex√©cuter le mod√®le de donn√©es sans eux.  Une simple analyse d'un tel processus sera moins int√©ressante. </li></ul><br><img src="https://habrastorage.org/webt/12/_k/_x/12_k_xejzbntkhaiom6fpnpmgge.png" alt="image"><br>  <i>Figure 1. Mod√®le de donn√©es dans Proces Mining: une table d'√©v√©nements et une r√©f√©rence aux instances de processus</i> <br><br>  Une table d'√©v√©nements est une table standard (stockage physique, par opposition aux tables logiques) dans la plate-forme en m√©moire de SAP HANA.  Les r√©pertoires peuvent √™tre pr√©sent√©s sous forme de tableaux standard (stockage physique) et de tableaux de calcul (vues de calcul).  √Ä de rares exceptions pr√®s, il peut √™tre n√©cessaire d'ajouter une petite r√©f√©rence sous forme de CSV ou XLSX au mod√®le de donn√©es existant.  Cette fonctionnalit√© existe directement dans l'interface graphique. <br><br>  Ci-dessous, nous examinerons de plus pr√®s chacune de ces deux composantes du mod√®le de donn√©es. <br><br>  Une ¬´table des √©v√©nements¬ª (ou ¬´journal des √©v√©nements¬ª) contient au moins trois colonnes obligatoires: <br><br><ol><li>  Un identificateur de processus est une cl√© unique pour chaque instance de processus (par exemple, un num√©ro de r√©f√©rence, d'incident ou de t√¢che).  Dans l'exemple de la figure 2, il s'agit de la colonne "CASE_ID". </li><li> Activit√©.  C'est le nom de l'√©tape du processus - une sorte d'√©v√©nement qui nous int√©resse.  C'est √† partir des activit√©s que sera compos√© le graphe du processus (colonne ¬´√âV√âNEMENT¬ª). </li><li>  Horodatage de l'√©v√©nement (colonne "TIMESTAMP"). </li></ol><br><img src="https://habrastorage.org/webt/sm/sz/pg/smszpglecovhwhmfwaytfpi0wme.png" alt="image"><br>  <i>Figure 2. Exemple de table d'√©v√©nements</i> <br><br>  La version actuelle de SAP Process Mining by Celonis prend en charge jusqu'√† 1 000 √©v√©nements uniques dans un mod√®le de donn√©es unique.  C'est-√†-dire que le nombre de valeurs uniques dans la colonne "√âV√âNEMENT" dans l'exemple ci-dessus (dans votre table d'√©v√©nements, il peut √™tre appel√© diff√©remment) ne doit pas d√©passer 1000. Et les √©v√©nements eux-m√™mes (c'est-√†-dire les lignes de ce tableau) peuvent √™tre assez nombreux.  Nous avons vu des exemples de centaines de millions d'√©v√©nements dans un mod√®le de donn√©es. <br><br>  Un horodatage peut √™tre repr√©sent√© soit par une colonne, puis il vous appartient de d√©terminer ce qu'il signifie - le d√©but ou la fin d'une √©tape, ou deux colonnes, comme dans la figure 3, lorsque le d√©but et la fin d'une √©tape sont explicitement indiqu√©s.  La diff√©rence fondamentale entre la version √† deux colonnes est que le syst√®me sera capable de reconna√Ætre automatiquement les √©tapes ex√©cut√©es en parall√®le.  Cela se voit lors de la comparaison des heures de d√©but et de fin des diff√©rentes √©tapes. <br><br><img src="https://habrastorage.org/webt/dc/6s/uv/dc6suvxtb50cenruxd4on-rmva8.png" alt="image"><br>  <i>Figure 3. Exemple de table d'√©v√©nements avec deux horodatages</i> <br><br>  Toutes les autres colonnes de ce tableau sont facultatives.  Le graphique du processus peut √©galement √™tre restaur√© avec succ√®s √† l'aide des trois colonnes requises, mais il sera difficile de se d√©barrasser du sentiment qu'il manque quelque chose.  Par cons√©quent, il est fortement recommand√© de ne pas vous limiter √† un ensemble minimal d'enceintes. <br><br>  Les colonnes suppl√©mentaires sont toutes les informations qui vous int√©ressent, qui changent au cours du processus ou sont associ√©es √† un √©v√©nement sp√©cifique.  Par exemple, le nom de l'employ√© qui a fait l'√©v√©nement, le groupe de travail, la priorit√© actuelle de l'application.  L'accent mis sur la d√©pendance au temps n'est pas accidentel ici.  Il est recommand√© de ne laisser que des donn√©es mutables dans la table des √©v√©nements.  Toutes les autres informations statiques sont mieux plac√©es dans des r√©pertoires s√©par√©s.  En d'autres termes, le journal des √©v√©nements doit √™tre normalis√©, si possible.  Cela est fait non pas tant pour r√©duire la quantit√© de donn√©es, mais pour faciliter le travail ult√©rieur avec les expressions PQL au stade de la cr√©ation de rapports analytiques. <br><br>  <i>Que tout soit en place</i> <br><br>  Que se passe-t-il si vous ajoutez une colonne contenant des informations de r√©f√©rence au ¬´tableau des √©v√©nements¬ª?  En g√©n√©ral, rien de terrible ne se produira, du moins au d√©but.  Et pour tester rapidement n'importe quelle id√©e, cette option est tout √† fait appropri√©e.  Il ne peut y avoir que deux cons√©quences n√©gatives: reproduction inutile de copies de donn√©es et difficult√©s suppl√©mentaires dans certaines formules analytiques.  Ces difficult√©s auraient pu √™tre √©vit√©es si toutes les donn√©es suppl√©mentaires avaient √©t√© soumises √† l'annuaire.  En g√©n√©ral, il vaut mieux le faire tout de suite. <br><br>  <i>Un peu sur les licences</i> <br><br>  La table d'√©v√©nements est associ√©e √† la licence de SAP Process Mining par Celonis.  Un mod√®le de donn√©es = 1 licence = 1 journal des √©v√©nements.  Avec une certaine r√©serve, nous pouvons dire que 1 journal des √©v√©nements = 1 processus m√©tier.  La mise en garde sera la suivante: des situations peuvent survenir lorsque plusieurs processus s'inscrivent dans un seul journal des √©v√©nements, et vice versa - plusieurs journaux des √©v√©nements sont intentionnellement cr√©√©s pour un processus.  En outre, le terme ¬´processus m√©tier¬ª peut √™tre interpr√©t√© d'un point de vue de donn√©es assez largement.  Par cons√©quent, √† des fins de licence, pour le crit√®re √©vident, le nombre de journaux d'√©v√©nements a √©t√© s√©lectionn√©.  C'est sur ce crit√®re qu'il faut s'appuyer. <br><br>  <i>R√©pertoires</i> <br><br>  Les r√©pertoires sont facultatifs, leur ajout au mod√®le de donn√©es est facultatif.  Ils contiennent toute information suppl√©mentaire qui peut √™tre utile pour l'analyse du processus.  Mais, contrairement au tableau des √©v√©nements, les informations dans les r√©pertoires sont statiques, elles ne d√©pendent pas de l'heure √† laquelle l'√©v√©nement s'est produit. <br><br>  Un cas particulier doit √™tre mentionn√© ici.  En ce qui concerne les donn√©es de l'utilisateur effectuant les √©tapes du processus m√©tier, la question se pose: cette information est-elle une r√©f√©rence?  D'une part, oui - ce sont des donn√©es statiques.  Il serait int√©ressant de ne laisser dans la table des √©v√©nements qu'un certain ¬´USER_ID¬ª, selon lequel le nom, le poste et le service de l'utilisateur, l'appartenance au groupe de travail, etc. seront associ√©s √† l'activit√©.  Mais d'un autre c√¥t√©, imaginons que nous analysons un processus m√©tier sur une p√©riode de 2 √† 3 ans.  Pendant ce temps, l'utilisateur pouvait changer plusieurs postes et basculer entre les d√©partements ou les groupes de travail.  Il s'av√®re que ce sont des informations qui changent d√©j√† avec le temps.  Et dans ce cas, il doit √™tre laiss√© dans la table des √©v√©nements, ce qui entra√Ænera √† son tour qu'en plus de "USER_ID" dans le journal des √©v√©nements, des colonnes telles que "groupe de travail", "position", "d√©partement" et m√™me "nom complet" (nom de famille) appara√Ætront il pourrait √©galement changer pendant cette p√©riode).  En g√©n√©ral, la question de normaliser ou non les informations utilisateur reste √† la discr√©tion du client. <br>  Les r√©pertoires peuvent √™tre ajout√©s √† un mod√®le de donn√©es existant √† tout moment. <br><br>  Pour ce faire, c'est assez simple: <br><br><ol><li>  Une table est cr√©√©e dans SAP HANA. </li><li>  Le tableau est ajout√© au mod√®le de donn√©es g√©n√©ral √† l'aide du bouton "Importer les donn√©es". <br><br><img src="https://habrastorage.org/webt/-h/dt/un/-hdtunkocklfpgs_m4u1sd6y0ca.png" alt="image"><br>  <i>Figure 4. Importez une table ou un fichier dans un mod√®le de donn√©es existant</i> </li><li>  La cl√© (ou les cl√©s) est indiqu√©e dans l'interface graphique, par laquelle le nouveau r√©pertoire est associ√© √† la table des √©v√©nements et / ou √† d'autres r√©pertoires.  Pour ce faire, cliquez simplement sur l'ic√¥ne <img src="https://habrastorage.org/webt/m8/mk/8x/m8mk8x955o54qbv_gm2ewx3lx68.png" alt="image">  dans un tableau, puis sur le correspondant <img src="https://habrastorage.org/webt/m8/mk/8x/m8mk8x955o54qbv_gm2ewx3lx68.png" alt="image">  dans une autre table. <br><br><img src="https://habrastorage.org/webt/xw/xg/vw/xwxgvwuaonmge2ddo8y0-5jwvx8.png" alt="image"><br>  <i>Figure 5. Liaison de tables dans un mod√®le de donn√©es par un champ arbitraire (dans ce cas, CASE_ID)</i> </li><li>  Dans le menu "Statut", cliquez sur le bouton "Recharger depuis la source".  Ce processus prend g√©n√©ralement quelques secondes. <br><br><img src="https://habrastorage.org/webt/g3/80/78/g38078xq1yrpi9yvthhk336aovo.jpeg" alt="image">  <i>Figure 6. Rechargement du mod√®le de donn√©es √† partir de la source</i> </li></ol><br>  Une fois ces √©tapes termin√©es, vous pouvez imm√©diatement utiliser de nouvelles analyses, √† la fois dans les nouveaux rapports et dans les rapports existants.  L'enrichissement du mod√®le de donn√©es ne nuit en rien au travail actuel des analystes: tous les rapports cr√©√©s continuent de fonctionner, vous n'avez pas besoin de les refaire ou de les modifier d'une mani√®re ou d'une autre. <br><br>  Pour les r√©pertoires relativement petits, il existe une autre possibilit√©: pas une version compl√®tement industrielle, bien s√ªr, mais elle peut aussi √™tre utile.  Il s'agit de charger des fichiers CSV, XLSX, DBF via une interface graphique directement dans le mod√®le de donn√©es.  La proc√©dure reste exactement la m√™me que celle d√©crite ci-dessus, mais au lieu des tables de base de donn√©es, un fichier pr√©par√© √† l'avance est utilis√©, qui est charg√© avec le bouton Importer les donn√©es. <br><br>  <i>Table CA: R√©f√©rence d'instance de processus</i> <br><br>  La conversation pr√©c√©dente sur les ouvrages de r√©f√©rence a commenc√© par le fait qu'ils sont facultatifs.  Ils peuvent √™tre compl√®tement omis du mod√®le de donn√©es et limit√©s √† une table d'√©v√©nements.  C'est presque vrai. <br>  Une r√©f√©rence obligatoire existe.  Il doit s'agir d'un tableau marqu√© avec le statut ¬´CA Table¬ª.  Les AC sont des cha√Ænes d'√©v√©nements.  Et, vous l'avez devin√©, la cl√© dans ce r√©pertoire sera "CASE_ID" - l'identifiant unique de l'instance de processus.  Une telle r√©f√©rence d√©crit les propri√©t√©s statiques des instances de processus individuelles.  Un exemple de l'ITSM: l'auteur de l'appel, un service aux entreprises, la date de cl√¥ture, ou l'employ√© qui a r√©ussi √† r√©soudre l'incident, un signe de caract√®re de masse, etc. <br><br><img src="https://habrastorage.org/webt/7d/lf/-t/7dlf-t9r6snfbvw83qujkd1sfio.png" alt="image"><br>  <i>Figure 7. Exemple de tableau CA</i> <br><br>  Et pourtant je ne vous ai pas beaucoup tromp√©.  Si, pour une raison quelconque, vous d√©cidez de ne pas ajouter le r√©pertoire requis au mod√®le de donn√©es, le syst√®me le g√©n√©rera lui-m√™me.  Le r√©sultat de son travail peut √™tre vu dans l'onglet Statut: si votre table d'√©v√©nements est appel√©e, disons "ITSM_EVENTS", alors la table "ITSM_EVENTS_CASES" sera g√©n√©r√©e conjointement avec elle, comme dans la figure 8. <br><br><img src="https://habrastorage.org/webt/g3/80/78/g38078xq1yrpi9yvthhk336aovo.jpeg" alt="image"><br>  <i>Figure 8. Table de cha√Æne d'√©v√©nements (CA) g√©n√©r√©e automatiquement</i> <br><br>  Une table CA g√©n√©r√©e automatiquement sera une description tr√®s simple des instances de processus: cl√©, nombre d'√©v√©nements, dur√©e du processus (comme si vous groupiez une table d'√©v√©nements par un identificateur de processus, calculiez le nombre de lignes et la diff√©rence entre l'heure de la premi√®re et de la derni√®re √©tape).  Par cons√©quent, il est logique de cr√©er votre propre version plus int√©ressante de la table CA.  Il peut √™tre ajout√© au mod√®le de donn√©es √† tout moment.  Dans le m√™me temps, d√®s que vous ajoutez votre table CA au mod√®le, le r√©pertoire g√©n√©r√© par le syst√®me (dans notre cas, c'est ¬´ITSM_EVENTS_CASES¬ª) sera automatiquement supprim√© du mod√®le de donn√©es. <br><br>  Pourquoi la ¬´table CA¬ª est-elle int√©ressante?  C'est elle qui s'affiche dans l'interface graphique en tant que d√©tail du processus.  Si l'analyste, tout en travaillant avec le mod√®le de donn√©es, a trouv√© quelque chose d'int√©ressant dans le processus et a voulu passer √† des exemples sp√©cifiques individuels, alors il utilisera le rapport ¬´View CA¬ª, c'est-√†-dire d√©taillant.  Apr√®s avoir ouvert un tel rapport, vous y trouverez un r√©pertoire du processus (combin√© avec une table d'√©v√©nements, bien s√ªr).  Par cons√©quent, ajoutez √† la ¬´table CA¬ª tout ce que l'analyste peut utiliser pour comprendre les propri√©t√©s du processus et les conditions de son d√©roulement. <br><br><img src="https://habrastorage.org/webt/zv/_i/xb/zv_ixbz0ebqsvjugcoqrwxtxtzi.png" alt="image"><br><img src="https://habrastorage.org/webt/jq/ga/zu/jqgazus0ddp1ab-nad7pf9xsek4.png" alt="image"><br>  <i>Figure 9. Exemple de rapport synth√©tique ¬´View CA¬ª</i> <br><br>  Comment ajouter votre r√©f√©rence de processus au mod√®le de donn√©es: <br><br><ol><li>  Une table est cr√©√©e dans SAP HANA. </li><li>  Le tableau est ajout√© au mod√®le de donn√©es g√©n√©ral √† l'aide du bouton "Importer les donn√©es". </li><li>  Dans l'interface graphique, dans les propri√©t√©s de la table, vous devez lui attribuer le r√¥le "Table avec CA". <br><br><img src="https://habrastorage.org/webt/mx/u-/q3/mxu-q36e_tfs0bdgj19yq82vld4.png" alt="image"><br>  <i>Figure 10. R√¥le de "Table with CA" pour indiquer le r√©pertoire des instances de processus</i> </li><li>  Dans l'interface graphique, associez la table CA √† la table d'√©v√©nements par ID de processus.  Cette √©tape est effectu√©e de la m√™me mani√®re que dans le cas d'un r√©pertoire normal - avec le symbole cl√© cl√© ( <img src="https://habrastorage.org/webt/m8/mk/8x/m8mk8x955o54qbv_gm2ewx3lx68.png" alt="image">  ) en face du champ correspondant. </li><li>  Dans le menu "Statut", cliquez sur le bouton "Recharger depuis la source". </li></ol><br>  <b>Remarque importante: la</b> colonne "CASE_ID" (dans chaque cas, elle peut √™tre appel√©e autrement) dans la table CA, qui contient l'identificateur de processus et est utilis√©e pour s'associer √† la table d'√©v√©nements, ne doit contenir que des valeurs uniques.  C'est tout √† fait logique.  Et si pour une raison quelconque, ce n'est pas le cas, lors du chargement du mod√®le de donn√©es √† l'√©tape (5), l'erreur correspondante sera g√©n√©r√©e (sur l'impossibilit√© d'effectuer l'op√©ration "JOIN" sur la table d'√©v√©nements et la table CA). <br><br><h3>  Cr√©ation d'un mod√®le de donn√©es √† partir de l'historique des modifications </h3><br>  En pratique, nous rencontrons des sources de donn√©es tr√®s diff√©rentes pour Process Mining.  Leur composition est d√©termin√©e par le processus commercial s√©lectionn√© et les normes adopt√©es par le client. <br>  L'un des cas les plus courants est celui des donn√©es du syst√®me de gestion des services informatiques (ITSM, IT Service Management), nous avons donc d√©cid√© d'analyser cet exemple en premier.  En fait, il n'y a pas de liaison stricte sp√©cifique √† l'ITSM dans cette approche.  Il peut √™tre appliqu√© dans d'autres processus m√©tier, o√π la source de donn√©es est un historique des modifications ou un journal d'audit. <br><br>  <i>Que demander au service informatique?</i> <br><br>  Si vous n'√™tes pas un employ√© des TI ou le sp√©cialiste qui dessert la base ITSM, pr√©parez-vous au fait qu'il vous sera demand√© de formuler une r√©ponse exacte √† la question ¬´que d√©chargez-vous?¬ª  ou "que voulez-vous de nous?" <br><br>  Et cela n'est pas toujours connu - ce qui est exactement n√©cessaire.  L'analyse du processus op√©rationnel est une √©tude, une recherche de mod√®les et la recherche de ¬´connaissances¬ª.  Si nous savions √† l'avance quel type de ¬´vision¬ª nous recherchons, alors ce ne serait plus de la ¬´vision¬ª.  En fait, je voudrais obtenir "tout": attributs, relations, changements.  Mais, comme le montre la pratique, il n'a jamais √©t√© possible d'obtenir une bonne r√©ponse pr√©cise √† une question trop g√©n√©rale. <br><br>  Il y a deux r√©ponses possibles √† la question ¬´que d√©chargez-vous¬ª. <br><br>  L'option est fausse: demandez √† la base de d√©charger toutes les modifications des statuts de l'application plus un ensemble d'attributs √©vidents (par exemple, priorit√©, artiste, groupe de travail, etc.).  Tout d'abord, vous disposez d'un ensemble limit√© d'analystes: vous savez d√©j√† ce que vous mesurerez dans le processus (c'est de l√† que vient l'ensemble des attributs), donc Process Mining deviendra un outil pour calculer le KPI du processus (tr√®s pratique, je dois dire, un outil; mais je veux quand m√™me plus). <br><br>  Deuxi√®mement, chaque service informatique individuel interpr√®te diff√©remment la demande pour ajouter des attributs de demande suppl√©mentaires au t√©l√©chargement.  Par exemple, soyez prioritaire: il peut changer en travaillant sur un appel.  L'appel est enregistr√© avec une priorit√©, puis le sp√©cialiste du groupe de travail le modifie, et il se termine avec un statut diff√©rent.  Et maintenant la question est: dans le d√©chargement demand√© par vous, quel moment correspond √† la priorit√©?  Dans un premier temps, il semble que la valeur de priorit√© devrait correspondre √† la colonne ¬´Date et heure de l'√©v√©nement¬ª.  Mais en r√©alit√©, il s'av√®re souvent que seul l'√©tat de l'application lui-m√™me correspond √† la date et √† l'heure sp√©cifi√©es, et toutes les autres colonnes sont les valeurs au moment du d√©chargement ou au moment de la fermeture de l'application.  Et vous ne le saurez pas tout de suite. <br><br>  Il me semble qu'il y a une meilleure option.  Vous pouvez demander des donn√©es sous la forme du tableau suivant: <br><br><ol><li>  Le num√©ro de l'appel, de l'incident, de la t√¢che (SD *, IM *, RT *, ...) est l'identifiant de l'objet dans le syst√®me ITSM (NVARCHAR) </li><li>  Horodatage (TIMESTAMP) </li><li>  Nom d'attribut (NVARCHAR) </li><li>  Ancienne valeur (NVARCHAR) </li><li>  Nouvelle valeur (NVARCHAR) </li><li>  Qui a chang√© (NVARCHAR) </li></ol><br>  En fait, ce n'est rien de plus qu'une histoire de changements dans les attributs.  Dans les interfaces des syst√®mes ITSM, vous pouvez voir un tel tableau sur les onglets avec le nom "Historique" ou "Journal". <br><br>  Les avantages de cette approche sont √©vidents: <br><br><ol><li>  Format de t√©l√©chargement simple et clair.  Il conna√Æt les professionnels de l'informatique dans l'interface graphique du syst√®me lui-m√™me.  Ne devrait pas poser de questions sur la base. </li><li>  Nous obtenons une liste de tous les attributs possibles avec toutes les valeurs possibles.  Oui, il y en aura beaucoup, probablement plusieurs centaines.  Mais trier les √©l√©ments inutiles et inint√©ressants est tr√®s simple, mais √† chaque fois, demander des d√©chargements suppl√©mentaires n'est pas toujours simple et toujours long (surtout lorsque vous ne savez pas du tout quels attributs sont pr√©sents dans le syst√®me). </li><li>  Il s'agit d'un mod√®le de donn√©es fiable.  Il est difficile de le g√¢cher, √† moins que vous ne fassiez intentionnellement de fausses informations. </li><li>  Nous savons exactement ce que chaque attribut avait √† chaque instant.  Ceci est important car nous nous testons et nous assurons que le mod√®le est correct.  Et pendant l'analyse, nous pouvons ajouter des √©tapes interm√©diaires au mod√®le (¬´zoom avant¬ª) et d√©terminer les valeurs d'attribut correctes √† tous les points suppl√©mentaires dans le temps. </li></ol><br>  Les inconv√©nients de la deuxi√®me option sont √©galement √©vidents.  Et ils, il me semble, peuvent √™tre r√©solus (par opposition au probl√®me des donn√©es incompl√®tes): <br><br><ol><li>  Le script SQL pour la pr√©paration des donn√©es devient un peu plus compliqu√© - par rapport √† l'option lorsque l'√©quipe informatique fait la pr√©paration partielle des donn√©es pour vous (voir la premi√®re version de la requ√™te ci-dessus), sans le soup√ßonner.  Oui, il (le script) est plus compliqu√©, mais il est seul.  Je pense que ce serait une mauvaise id√©e de partager la pr√©paration des donn√©es entre l'√©quipe ITSM et l'√©quipe Process Mining.  Id√©alement, toute la transformation devrait √™tre transf√©r√©e √† l'√©quipe Process Mining afin qu'elle comprenne exactement ce qui se passe avec les donn√©es et minimise les interf√©rences avec les donn√©es c√¥t√© source.  Un format d'√©change de donn√©es simple permet d'atteindre cet objectif. </li><li>  Le volume de d√©chargement est important.  La commande peut √™tre la suivante: 10-30 Go / an pour une grande entreprise.  Mais charger un tel volume dans HANA n'est pas du tout un probl√®me et n'est m√™me pas consid√©r√© comme une t√¢che.  De plus, nous ne parlons de ¬´t√©l√©chargement¬ª que pendant le projet pilote, tandis que l'int√©gration ETL / ELT entre la source de donn√©es et HANA (par exemple, HANA Smart Data Integration) sera utilis√©e dans les op√©rations industrielles, et cet √©l√©ment cessera d'avoir de l'importance. </li></ol><br>  Je ne voudrais pas dire que c'est la seule fa√ßon correcte d'obtenir des donn√©es du syst√®me ITSM pour les t√¢ches de Process Mining.  Mais √† l'heure actuelle, je suis port√© √† croire que c'est le format le plus pratique pour cette t√¢che.  Il y a probablement beaucoup plus d'approches int√©ressantes, et je serai tr√®s heureux de discuter d'id√©es alternatives si vous les partagez avec moi. <br><br><h3>  G√©n√©ration de table d'√©v√©nements </h3><br>  Ainsi, √† la sortie, nous avons un historique des changements dans les attributs des demandes, des incidents, des appels, des t√¢ches et d'autres objets ITSM.  √Ä partir d'une telle table, il est possible de g√©n√©rer les deux composants cl√©s du mod√®le de donn√©es Process Mining: une table d'√©v√©nements et une table CA. <br><br>  Pour g√©n√©rer des √©v√©nements en fonction de l'historique des modifications, proc√©dez comme suit: <br><br><ol><li>  Dans l'historique des modifications, collectez toutes les valeurs uniques de la colonne (conditionnellement) ¬´nom d'attribut¬ª. </li><li>  D√©terminez le changement dans lequel les attributs que vous souhaitez voir sur le graphique du processus.  Qu'est-ce qu'un ¬´√©v√©nement¬ª pour nous? </li><li>  Cr√©ez une vue de calcul appropri√©e ou √©crivez un script SQL qui filtre les lignes s√©lectionn√©es √† partir de l'historique des modifications et g√©n√®re une table d'√©v√©nements. </li></ol><br>  Supposons que la table de modification soit la suivante: <br><br><pre><code class="plaintext hljs">CREATE COLUMN TABLE "SAP_PM"."ITSM_HISTORY" ( "CASE_ID" NVARCHAR(256), "ATTRIBUTE" NVARCHAR(256), "VALUE_OLD" NVARCHAR(1024), "VALUE_NEW" NVARCHAR(1024), "TS" TIMESTAMP, "USER" NVARCHAR(256) );</code> </pre> <br>  Tout d'abord, regardez la liste de tous les attributs pr√©sents.  Cela peut √™tre fait dans le menu "Open Data Preview" ou avec une simple requ√™te SQL comme celle-ci: <br><br><pre> <code class="plaintext hljs">SELECT DISTINCT "ATTRIBUTE" FROM "SAP_PM"."ITSM_HISTORY";</code> </pre> <br><img src="https://habrastorage.org/webt/cg/vy/cz/cgvyczucqvufw0twxxeuvsn9izq.png" alt="image"><br>  <i>Figure 11. Menu contextuel avec la commande Open Data Preview dans SAP HANA Studio</i> <br><br>  Ensuite, nous d√©terminons la composition des attributs, dont le changement est pour nous un √©v√©nement dans le processus.  Voici une liste de candidats √©vidents pour une telle liste: <br><br><ul><li>  Statut </li><li>  A √©t√© amen√© au travail </li><li>  La cat√©gorie a √©t√© modifi√©e </li><li>  D√©lai d√©pass√© </li><li>  Le temps de r√©action est viol√© </li><li>  La demande a √©t√© renvoy√©e pour r√©vision. </li><li>  Erreur de 1√®re ligne </li><li>  Groupe de travail </li><li>  Priorit√© </li></ul><br>  Les principaux √©v√©nements ici, bien s√ªr, sont les transitions entre les statuts de la t√¢che appel / incident \ application \.  La valeur de l'attribut "Statut" (VALUE_NEW) lui-m√™me sera le nom de l'√©tape de processus pour nous.  Par cons√©quent, la cr√©ation d'une table d'√©v√©nements en premi√®re approximation pourrait ressembler √† ceci: <br><br><pre> <code class="plaintext hljs">CREATE COLUMN TABLE "SAP_PM"."ITSM_EVENTS" ( "CASE_ID" NVARCHAR(256) ,"EVENT" NVARCHAR(1024) ,"TS" TIMESTAMP ,"USER" NVARCHAR(256) ,"VALUE_OLD" NVARCHAR(1024) ,"VALUE_NEW" NVARCHAR(1024) ); INSERT INTO "SAP_PM"."ITSM_EVENTS" SELECT "CASE_ID" ,"VALUE_NEW" AS "EVENT" ,"TS" ,"USER" ,"VALUE_OLD" ,"VALUE_NEW" FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = '' ;</code> </pre> <br>  La modification du reste des attributs constitue nos √©tapes suppl√©mentaires qui rendent la recherche du processus encore plus int√©ressante.  Leur composition est d√©termin√©e par la demande d'un analyste commercial et peut √©voluer au fur et √† mesure de l'√©volution de la pratique du Process Mining dans l'entreprise. <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_EVENTS" SELECT "CASE_ID" ,"ATTRIBUTE" AS "EVENT" ,"TS" ,"USER" ,"VALUE_OLD" ,"VALUE_NEW" FROM "SAP_PM"."ITSM_HISTORY" WHERE "VALUE_OLD" IS NOT NULL AND "ATTRIBUTE" IN ( '   ' ,'  ' ,'  ' ,'  ' ,'    ' ,' 1- ' ,' ' ,'') );</code> </pre> <br>  En √©tendant la liste des attributs dans le filtre OERE "ATTRIBUER" DANS (.....), vous augmentez la vari√©t√© des √©tapes affich√©es sur le graphique du processus.  Il convient de noter qu'une grande vari√©t√© d'√©tapes n'est pas toujours une b√©n√©diction.  Parfois, des d√©tails trop d√©taill√©s rendent difficile la compr√©hension du processus.  Je pense qu'apr√®s la premi√®re it√©ration, vous d√©terminerez quelles √©tapes sont n√©cessaires et lesquelles devraient √™tre exclues du mod√®le de donn√©es (et la libert√© de prendre de telles d√©cisions et de s'y adapter rapidement est un autre argument en faveur du transfert du travail de transformation des donn√©es du c√¥t√© de l'√©quipe Process Mining) . <br><br>  Le filtre "VALUE_OLD" N'EST PAS NUL, vous le remplacerez probablement par quelque chose de plus adapt√© √† vos conditions et aux attributs s√©lectionn√©s.  Je vais essayer d'expliquer la signification de ce filtre.  Dans certaines impl√©mentations populaires de syst√®mes ITSM, au moment de l'enregistrement (ouverture) d'un appel, des informations sur l'initialisation de tous les attributs de l'objet sont entr√©es dans le journal.  Autrement dit, tous les champs sont marqu√©s avec des valeurs par d√©faut.  √Ä ce moment, VALUE_NEW contiendra la m√™me valeur d'initialisation et VALUE_OLD ne contiendra rien - apr√®s tout, il n'y avait pas d'historique jusqu'√† ce moment.  Nous n'avons absolument pas besoin de ces enregistrements dans le processus.  Ils doivent √™tre retir√©s avec un filtre adapt√© √† vos conditions sp√©cifiques.  Un tel filtre peut √™tre: <br><br><ul><li>  "VALUE_OLD" N'EST PAS NUL </li><li>  "VALUE_NEW" = 'oui' </li><li>  Vous pouvez vous concentrer sur l'horodatage (prendre uniquement les √©v√©nements qui se sont produits apr√®s l'enregistrement de l'objet). </li><li>  Vous pouvez vous concentrer sur le champ "UTILISATEUR" si le compte syst√®me est en cours d'initialisation. </li><li>  Toute autre condition que vous avez trouv√©e. </li></ul><br><h3>  G√©n√©ration de table CA </h3><br>  Le m√™me historique des modifications qui nous a servi de source d'√©v√©nements sera √©galement utile pour cr√©er un r√©pertoire d'instances de processus (tables CA).  Algorithme similaire: <br><br>  1. D√©finissez une liste d'attributs qui: <br><br>  a.  Ne changez pas pendant le travail sur la demande, par exemple, l'auteur de l'appel et son d√©partement, l'√©valuation de l'utilisateur des r√©sultats du travail, le drapeau de violation du d√©lai. <br><br>  b.  Ils peuvent changer, mais nous ne nous int√©ressons qu'aux valeurs √† certains moments: au moment de l'inscription, de la fermeture, lors de l'embauche, du transfert de la 2√®me ligne √† la 1√®re, etc. <br><br>  c.  Ils peuvent changer, mais nous ne nous int√©ressons qu'aux valeurs agr√©g√©es (maximum, minimum, quantit√©, etc.) <br><br>  2. Cr√©ez un tableau diagonal avec l'ensemble de colonnes souhait√©.  Chaque attribut qui nous int√©resse g√©n√©rera son propre ensemble de lignes (en fonction du nombre d'instances de processus), dans lequel une seule colonne aura une valeur et tout le reste sera vide (NULL). <br><br>  3. Nous r√©duisons la table diagonale dans le r√©pertoire final en utilisant le regroupement par identifiant de processus. <br><br>  Exemples d'attributs qu'il est judicieux de mettre dans la table CA (en pratique, cette liste peut √™tre beaucoup plus longue): <br><br><ul><li>  Le service </li><li>  Syst√®me informatique </li><li>  L'auteur </li><li>  Organisation auteur </li><li>  Note des utilisateurs sur la qualit√© de la solution </li><li>  Nombre de retours au travail </li><li>  Quand a √©t√© emmen√© au travail </li><li>  Cr√©√© par </li><li>  Qui a ferm√© </li><li>  R√©solu par la ligne 1 </li><li>  Classification / routage non valide </li><li>  Date limite </li><li>  Violation des d√©lais </li></ul><br>  Un m√™me attribut peut √™tre soit une source d'un √©v√©nement dans un processus, soit une propri√©t√© d'une instance de processus.  Par exemple, l'attribut "Priority".  D'une part, nous nous int√©ressons √† sa signification au moment de l'enregistrement de l'appel, et d'autre part, tous les faits de modification de cet attribut peuvent √™tre soumis au graphique de processus en tant qu'√©tapes ind√©pendantes. <br><br>  Un autre exemple est Deadline.  Il s'agit d'une propri√©t√© de r√©f√©rence √©vidente du processus, mais vous pouvez en faire une √©tape virtuelle dans le graphique du processus: une op√©ration telle que la ¬´date limite¬ª n'existe pas dans le processus, mais si nous ajoutons l'entr√©e correspondante √† la table des √©v√©nements, nous la cr√©erons artificiellement et nous pourrons visualiser l'emplacement par rapport √† temps d'ex√©cution des autres √©tapes directement sur le graphique du processus.  C'est pratique pour une analyse rapide. <br><br>  En g√©n√©ral, lorsque nous cr√©ons des propri√©t√©s de processus bas√©es sur l'historique des changements d'attributs, la source d'informations utiles pour nous peut √™tre: <br><br><ul><li>  Valeur d'attribut elle-m√™me (exemple: "Note des utilisateurs") </li><li>  Utilisateur qui l'a chang√© </li><li>  Changer le temps </li><li>  Le moment o√π l'attribut a pris une certaine valeur (exemple: l'attribut ¬´Date limite viol√©e¬ª ne s'int√©resse pas √† la valeur d'attribut elle-m√™me, mais au moment o√π il passe √† l'√©quivalent du drapeau lev√© - par exemple, ¬´oui¬ª ou 1) </li><li>  Le fait que l'attribut soit pr√©sent dans l'histoire (exemple: ¬´Incident de masse¬ª avec la valeur ¬´oui¬ª) </li></ul><br>  Cette liste, bien s√ªr, peut √™tre compl√©t√©e par d'autres id√©es d'utilisation des attributs et tout ce qui y est li√©. <br><br>  Maintenant que nous avons d√©j√† d√©cid√© de la liste des propri√©t√©s d'int√©r√™t, examinons l'un des sc√©narios possibles pour g√©n√©rer la table CA.  Tout d'abord, cr√©ez le tableau lui-m√™me avec l'ensemble de colonnes que nous avons d√©fini ci-dessus pour nous-m√™mes: <br><br><pre> <code class="plaintext hljs">CREATE COLUMN TABLE "SAP_PM"."ITSM_CASES" ( "CASE_ID" NVARCHAR(256) NOT NULL ,"CATEGORY" NVARCHAR(256) DEFAULT NULL ,"AUTHOR" NVARCHAR(256) DEFAULT NULL ,"RESOLVER" NVARCHAR(256) DEFAULT NULL ,"RAITING" INTEGER DEFAULT NULL ,"OPEN_TIME" TIMESTAMP DEFAULT NULL ,"START_TIME" TIMESTAMP DEFAULT NULL ,"DEADLINE" TIMESTAMP DEFAULT NULL );</code> </pre> <br>  Nous aurons √©galement besoin d'une table temporaire "ITSM_CASES_STAGING", qui nous permettra de trier une liste plate d'attributs pour les colonnes de propri√©t√©s requises dans le r√©pertoire des instances de processus: <br><br><pre> <code class="plaintext hljs">CREATE COLUMN TABLE "SAP_PM"."ITSM_CASES_STAGING" LIKE "SAP_PM"."ITSM_CASES" WITH NO DATA;</code> </pre> <br>  Ce sera un tableau diagonal - dans chaque ligne, seuls deux champs ont une valeur: "CASE_ID", c'est-√†-dire  identificateur de processus et un seul champ avec une propri√©t√© de processus.  Les champs restants de la ligne seront vides (NULL).  Au stade final, nous r√©duisons facilement les diagonales en lignes par simple agr√©gation et obtenons ainsi le tableau des CA dont nous avons besoin. <br><br>  Un exemple pour une cat√©gorie de traitement: <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "CATEGORY") SELECT "CASE_ID", LAST_VALUE("VALUE_NEW" ORDER BY "TS") FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = '' GROUP BY "CASE_ID" ;</code> </pre> <br>  Supposons que l'auteur soit le premier utilisateur non syst√®me de l'histoire de l'appel qui enregistre les appels (dans votre cas particulier, le crit√®re peut √™tre plus pr√©cis): <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "AUTHOR") SELECT "CASE_ID", FIRST_VALUE("USER" ORDER BY "TS") FROM "SAP_PM"."ITSM_HISTORY" WHERE "USER" != 'SYSTEM' GROUP BY "CASE_ID" ;</code> </pre> <br>  Si nous pensons que le gestionnaire qui a mis le dernier statut ¬´Solution propos√©e¬ª (et la solution pourrait √™tre propos√©e √† plusieurs reprises, mais que le dernier est r√©solu), a r√©ussi √† r√©soudre le probl√®me, alors cette propri√©t√© de l'instance de processus peut √™tre formul√©e comme suit: <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "RESOLVER") SELECT "CASE_ID", LAST_VALUE("USER" ORDER BY "TS") FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = '' AND "VALUE_NEW" = ' ' GROUP BY "CASE_ID" ;</code> </pre> <br>  Note des utilisateurs (sa satisfaction de la d√©cision): <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "RAITING") SELECT "CASE_ID", TO_INTEGER(LAST_VALUE("VALUE_NEW" ORDER BY "TS")) FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = ' ' AND "VALUE_NEW" IS NOT NULL GROUP BY "CASE_ID" ;</code> </pre> <br>  Le moment de l'enregistrement (cr√©ation) est tout simplement le premier record de l'histoire de la circulation: <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "OPEN_TIME") SELECT "CASE_ID", MIN("TS") FROM "SAP_PM"."ITSM_HISTORY" GROUP BY "CASE_ID" ;</code> </pre> <br>  Le temps de r√©action est une caract√©ristique importante de la qualit√© des services.  Pour le calculer, vous devez savoir quand le drapeau ¬´A √©t√© mis au travail¬ª a √©t√© lev√© pour la premi√®re fois: <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "START_TIME") SELECT "CASE_ID", MIN("TS") FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = '   ' AND 'VALUE_NEW' = '' GROUP BY "CASE_ID" ;</code> </pre> <br>  Le d√©lai est utilis√© pour calculer les KPI pour des r√©ponses rapides aux appels ou pour r√©soudre les incidents.  Dans le processus, le d√©lai peut changer √† plusieurs reprises.  Pour calculer les KPI, nous devons conna√Ætre la derni√®re version de cet attribut.  Si nous voulons suivre explicitement comment la date limite a chang√©, c'est-√†-dire pour afficher de tels cas sur le graphique du processus, nous devons √©galement utiliser cet attribut pour g√©n√©rer une entr√©e dans la table des √©v√©nements.  Il s'agit d'un exemple d'attribut qui sert √† la fois de propri√©t√© du processus et de source de l'√©v√©nement. <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES_STAGING" ("CASE_ID", "DEADLINE") SELECT "CASE_ID", MAX(TO_DATE("VALUE_NEW")) FROM "SAP_PM"."ITSM_HISTORY" WHERE "ATTRIBUTE" = ' ' AND 'VALUE_NEW' IS NOT NULL GROUP BY "CASE_ID" ;</code> </pre> <br>  Tous les exemples ci-dessus sont du m√™me type.  Par analogie avec eux, la table CA peut √™tre d√©velopp√©e avec tous les attributs qui vous int√©ressent.  De plus, cela peut √™tre fait d√©j√† apr√®s le d√©but du projet, le syst√®me vous permet d'√©tendre le mod√®le de donn√©es pendant son fonctionnement. <br><br>  Lorsque notre table diagonale temporaire est remplie avec les propri√©t√©s des instances de processus, il ne reste plus qu'√† faire l'agr√©gation et √† obtenir la table CA finale: <br><br><pre> <code class="plaintext hljs">INSERT INTO "SAP_PM"."ITSM_CASES" SELECT "CASE_ID" ,MAX("CATEGORY") ,MAX("AUTHOR") ,MAX("RESOLVER") ,MAX("RAITING") ,MAX("OPEN_TIME") ,MAX("START_TIME") ,MAX("DEADLINE") FROM "SAP_PM"."ITSM_CASES_STAGING" GROUP BY "CASE_ID" ;</code> </pre> <br>  Apr√®s cela, nous n'avons plus besoin des donn√©es de la table temporaire.  Le tableau lui-m√™me peut √™tre laiss√© pour continuer √† r√©p√©ter le processus ci-dessus r√©guli√®rement pour mettre √† jour le mod√®le de donn√©es dans Process Mining: <br><br><pre> <code class="plaintext hljs">DELETE FROM "SAP_PM"."ITSM_CASES_STAGING";</code> </pre> <br><h3>  Conseils pour pr√©parer et nettoyer les fichiers CSV pour un projet pilote </h3><br>  Vous commencerez probablement votre connaissance de la discipline Process Mining avec un projet pilote.  Dans ce cas, l'acc√®s direct √† la source de donn√©es ne peut pas √™tre obtenu; les employ√©s des TI et les responsables de la s√©curit√© de l'information y r√©sisteront.  Cela signifie que dans le cadre du projet pilote, nous devrons travailler avec l'exportation de donn√©es des syst√®mes d'entreprise vers des fichiers CSV, puis les importer dans SAP HANA pour cr√©er un mod√®le de donn√©es. <br><br>  Dans une installation industrielle, il n'y aura pas d'export vers CSV.  √Ä la place, des outils d'int√©gration SAP HANA seront utilis√©s, en particulier: Smart Data Integration (SDI), Smart Data Access (SDA) ou SAP Landscape Transformation Replication Server (SLT).  Mais pour tester et se familiariser avec la technologie, l'exportation vers des fichiers texte CSV est une m√©thode plus simple sur le plan organisationnel.  Par cons√©quent, il sera utile de partager avec vous quelques conseils pour pr√©parer des donn√©es dans CSV pour une importation rapide et r√©ussie dans la base de donn√©es. <br><br>  Exigences de format recommand√©es pour le fichier lui-m√™me lors de l'exportation: <br><br><ol><li>  Format de fichier: CSV </li><li>  Encodage: UTF8 </li><li>  S√©parateur de champs: n'importe quel caract√®re qui vous convient.  Par exemple, "|"  ou "^" ou "~".  La logique du choix est simple - nous devons essayer d'√©viter la situation o√π la ¬´division¬ª est contenue dans les donn√©es elles-m√™mes. </li><li>  Il est n√©cessaire de supprimer le s√©parateur de la valeur des champs.  Oui, vous pourriez dire que pour cela, en fait, il y a des guillemets.  Mais, comme le montre l'exp√©rience, avec les guillemets √©galement, de nombreux probl√®mes se posent.  En g√©n√©ral, supprimons (ou rempla√ßons) le caract√®re s√©parateur des valeurs de champ.  Votre projet pilote ne souffrira pas beaucoup de cette impr√©cision, mais le temps de pr√©paration des donn√©es est sensiblement √©conomis√©. </li><li>  Guillemets: supprimez tous les guillemets de la valeur du champ.  Les guillemets se trouvent souvent dans les noms de soci√©t√©s - par exemple, Kalinka LLC.  Mais il existe de telles options: MPZ Kalinka LLC.  Et maintenant, c'est une grande difficult√©.  Les guillemets dans les valeurs de champ doivent √™tre accompagn√©s du symbole ¬´\¬ª, ou supprim√©s, remplac√©s par autre chose.  Il est plus fiable de le supprimer simplement.  La valeur du champ n'en souffrira pas beaucoup. </li><li>  Transferts de transport: supprimez tous les caract√®res CHAR (10) et CHAR (13) des valeurs de champ.  Sinon, l'importation √† partir de CSV sera impossible. </li></ol><br>  Si nous prenons en compte les points (4) + (5) + (6), alors il est logique d'utiliser la construction suivante dans la s√©lection: <br><br><pre> <code class="plaintext hljs">REPLACE(REPLACE(REPLACE(REPLACE("COLUMN", '|', ';'), '"', ''), CHAR(13), ' '), CHAR(10), ' ') as "COLUMN"</code> </pre> <br>  De plus, lorsque les fichiers CSV seront pr√™ts, ils devront √™tre copi√©s sur le serveur HANA dans un dossier d√©clar√© s√ªr pour l'importation de fichiers (par exemple, / usr / sap / HDB / import).  L'importation de donn√©es dans HANA √† partir d'un fichier CSV local est une proc√©dure assez rapide, √† condition que le fichier soit ¬´propre¬ª: <br><br><ul><li>  chaque ligne de la future table est sur une et une seule ligne du fichier; </li><li>  le nombre de colonnes dans toutes les lignes est le m√™me; </li><li>  les guillemets sont associ√©s ou manquants; </li><li>  les guillemets dans les valeurs de champ accompagnent le symbole "escape" "\", ou sont compl√®tement absents; </li><li>  Encodage UTF-8 (et non UTF8-BOM, comme cela se produit lors de l'exportation vers des syst√®mes Windows). </li></ul><br>  Pour v√©rifier les fichiers CSV avant de les importer et trouver les zones probl√©matiques si elles existent (et avec une probabilit√© de 99% elles le seront), vous pouvez utiliser les commandes suivantes: <br><br>  <b>1.</b> V√©rifiez le caract√®re de nomenclature au d√©but du fichier: <br><br>  <b>fichier</b> data.csv <br><br>  Si le r√©sultat de la commande est comme ceci: ¬´Texte UTF-8 Unicode (avec BOM)¬ª, cela signifie que l'encodage est UTF8-BOM et vous devez supprimer le caract√®re BOM du fichier.  Vous pouvez le supprimer comme suit: <br><br>  <b>sed -i '1s / ^ \ xEF \ xBB \ xBF //'</b> data.csv <br><br>  <b>2.</b> Le nombre de colonnes doit √™tre le m√™me pour chaque ligne du fichier: <br><br>  <b>cat</b> data.csv <b>|</b>  <b>awk -F ¬ª;" '{print NF}' | sort | uniq</b> <br><br>  ou comme √ßa: <br><br>  <b>pour i en $ (ls * .csv);</b>  <b>faire √©cho $ i;</b>  <b>chat $ i |</b>  <b>awk -F ';'</b>  <b>'{print NF}' |</b>  <b>trier |</b>  <b>uniq -c;</b>  <b>√©cho;</b>  <b>fait;</b> <br><br>  Changer ';'  dans le param√®tre F √† quel est le s√©parateur de champ dans votre cas. <br>  Gr√¢ce √† ces commandes, vous obtenez la distribution des lignes par le nombre de colonnes de chaque ligne.  Id√©alement, vous devriez obtenir quelque chose comme ceci: <br><br>  EKKO.csv <br>  79536 200 <br><br>  Ici, le fichier contient 79536 lignes et toutes contiennent 200 colonnes.  Il n'y a pas de lignes avec un nombre diff√©rent de colonnes.  Il devrait en √™tre ainsi. <br><br>  Et voici un exemple de r√©sultat incorrect: <br><br>  LFA1.csv <br>  73636 180 <br>  7 181 <br><br>  Ici, nous voyons que la plupart des lignes contiennent 180 colonnes (et, probablement, c'est le nombre de colonnes qui est correct), mais il y a des lignes avec la 181e colonne.  Autrement dit, l'un des champs contient un signe s√©parateur dans sa valeur.  Nous avons eu de la chance et il n'y a que 7 morceaux de ces lignes - ils peuvent facilement √™tre consult√©s manuellement et corrig√©s d'une mani√®re ou d'une autre.  Vous pouvez voir les lignes dans lesquelles le nombre de colonnes n'est pas √©gal √† 180, comme ceci: <br><br>  <b>cat</b> data.csv <b>|</b>  <b>awk -F ";"</b>  <b>'{if (NF! = 180) {print $ 0}}'</b> <br><br>  Une note sur l'utilisation des commandes ci-dessus.  Ces commandes ne pr√™teront pas attention aux guillemets.  Si le signe s√©parateur est contenu dans le champ entre guillemets (et cela signifie que tout va bien ici du point de vue de l'importation dans la base de donn√©es), la v√©rification avec cette m√©thode montrera un faux probl√®me (colonnes suppl√©mentaires) - cela devrait √©galement √™tre pris en compte lors de l'analyse des r√©sultats. <br><br>  <b>3.</b> Si les guillemets ne sont pas appari√©s et ne peuvent pas r√©soudre ce probl√®me, vous pouvez supprimer tous les guillemets du fichier: <br><br>  <b>sed -i 's / "// g'</b> data.csv <br><br>  Le danger de cette approche est que si les valeurs de champ contiennent un caract√®re s√©parateur, le nombre de colonnes de la ligne changera.  Par cons√©quent, les caract√®res de s√©paration doivent √™tre supprim√©s des valeurs de champ au stade de l'exportation (supprimer ou remplacer par un autre caract√®re). <br><br>  <b>4.</b> Champs vides <br><br>  Face √† une situation o√π l'importation r√©ussie de donn√©es a √©t√© emp√™ch√©e par des valeurs de champ vides sous cette forme: <br><br>  ; "" <br><br>  O√π ¬´;¬ª  Est le signe du s√©parateur de champ dans ce cas.  Autrement dit, le champ est compos√© de deux guillemets doubles (cha√Æne vide simple).  Si vous ne pouvez soudainement pas importer les donn√©es et que vous pensez que le probl√®me peut √™tre d√ª √† des champs vides, essayez de remplacer ¬´¬ª par NULL <br><br>  <b>sed -i 's /; ‚Äù‚Äù /; NULL / g'</b> data.csv <br><br>  (remplacez ¬´;¬ª par votre option de s√©parateur) <br><br>  <b>5.</b> Il peut √™tre utile de rechercher des formats num√©riques ¬´sales¬ª dans les donn√©es: <br><br>  <b>; "0"</b> (le nombre contient un espace) <br>  <b>; "100.10-"</b> (le signe "-" apr√®s le num√©ro) <br>  <b>La grue Bugatti 3/4 "300</b> - une dimension en pouces est indiqu√©e par un double guillemet - et cela entra√Æne automatiquement le probl√®me des guillemets non appari√©s lors de l'exportation. <br><br>  Malheureusement, il ne s'agit pas d'une liste exhaustive des probl√®mes possibles avec des formats de donn√©es peu pratiques pour l'importation dans la base de donn√©es.  Ce serait formidable de conna√Ætre vos options de la pratique: quelles erreurs curieuses avez-vous rencontr√©es?  Comment vous les avez d√©tect√©s et √©limin√©s.  Partagez dans les commentaires. <br><br><h3>  Conclusion </h3><br>  En g√©n√©ral, le mod√®le de donn√©es pour Process Mining est tr√®s simple: une table d'√©v√©nements plus, √©ventuellement, des livres de r√©f√©rence suppl√©mentaires.  Mais comme cela se produit g√©n√©ralement, cela ne semble simple que lorsqu'au moins un cycle complet de t√¢ches est termin√© - l'ensemble du processus est visible dans son int√©gralit√© et le plan de travail est clair.  J'esp√®re que cet article vous aidera √† comprendre la pr√©paration des donn√©es pour votre premier projet Process Mining.  En g√©n√©ral, le processus de pr√©paration ressemble √† ceci: <br><br><ol><li>  Demander un historique des modifications au propri√©taire des donn√©es </li><li>  V√©rification et nettoyage du t√©l√©chargement (pr√©paration des fichiers CSV) </li><li>  Importer vers SAP HANA </li><li>  Construction de tables d'√©v√©nements </li><li>  Cr√©ation d'une table CA (r√©f√©rence de processus) </li></ol><br>  Et, en fait, c'est l√† que commence la pr√©paration du mod√®le de donn√©es et que commence la partie la plus int√©ressante - Process Mining.  Si vous avez des questions lors de la mise en ≈ìuvre du projet Process Mining, n'h√©sitez pas √† √©crire dans les commentaires, je serai heureux de vous aider.  Bonne chance! <br><br>  <i>Fedor Pavlov, expert de la plateforme SAP CIS</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462565/">https://habr.com/ru/post/fr462565/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462549/index.html">Blockchain Quorum: int√©gration au code Java</a></li>
<li><a href="../fr462551/index.html">Questions fr√©quentes des d√©veloppeurs sur les tests</a></li>
<li><a href="../fr462553/index.html">Un peu simple. Conception de test. Partie 1</a></li>
<li><a href="../fr462555/index.html">Discussion: que faire si vous travaillez sans cookies - nous vous disons quelles sont les alternatives</a></li>
<li><a href="../fr462563/index.html">Webinaire ¬´Comment survivre √† la conformit√©?¬ª La meilleure approche pour r√©pondre aux exigences r√©glementaires ¬ª</a></li>
<li><a href="../fr462567/index.html">Sodinokibi Ransomware: une √©tude d√©taill√©e</a></li>
<li><a href="../fr462569/index.html">Le syst√®me de transport avec nous et avec eux ou ¬´Gares routi√®res contre agr√©gateurs 2¬ª</a></li>
<li><a href="../fr462571/index.html">Les aventures des Malvari insaisissables: d√©fense polyvalente (pens√©es finales)</a></li>
<li><a href="../fr462573/index.html">Concours de projets: quoi, pourquoi et pourquoi?</a></li>
<li><a href="../fr462575/index.html">Security Week 32: trou dans iMessage, confidentialit√© de l'entr√©e vocale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>