<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฃ๐ฟ โ๏ธ ูุญุงููุฉ ุงูุชุญููู ุงููุณุจู (PHP 7.4) ู RoadRunner โ๐พ ๐คฆ๐ฝ ๐น</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! 

 ุบุงูุจูุง ูุง ููุชุจ ููุชุญุฏุซ ุนู ุฃุฏุงุก PHP: ููู ูุชุนุงูู ูุนู ุจุดูู ุนุงู ุ ูููู ููุฑูุง ููููู ุฏููุงุฑ ุนูุฏ ุงูุชุจุฏูู ุฅูู PHP 7.0 ุ ูุฃูุถูุง ุชุฑุฌูุฉ ุงูููุงุฏ ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุญุงููุฉ ุงูุชุญููู ุงููุณุจู (PHP 7.4) ู RoadRunner</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/472528/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mu/-7/aw/mu-7awhkx6dstts3atuaodnhsm4.jpeg"><br><br>  ูุฑุญุจุง ูุง ูุจุฑ! <br><br>  ุบุงูุจูุง ูุง ููุชุจ ููุชุญุฏุซ ุนู ุฃุฏุงุก PHP: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู ูุชุนุงูู ูุนู</a> ุจุดูู ุนุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ููุฑูุง</a> ููููู ุฏููุงุฑ ุนูุฏ ุงูุชุจุฏูู ุฅูู PHP 7.0 ุ ูุฃูุถูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฑุฌูุฉ</a> ุงูููุงุฏ ุงููุฎุชููุฉ ุญูู ูุฐุง ุงูููุถูุน.  ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃู ุฌูููุฑ ููุชุฌุงุชูุง ูููู ุ ูุชูุณูุน ูุทุงู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูู PHP ุจุงูุญุฏูุฏ ูููู ููุบุงูุฉ - ูุฏููุง 600 ุฎุงุฏู ูุน PHP-FPM.  ูุฐูู ุ ูุฅู ุงุณุชุซูุงุฑ ุงูููุช ูู ุงูุชุญุณูู ูููุฏ ููุง. <br><br>  ูู ูุจู ุ ุชุญุฏุซูุง ุจุดูู ุฃุณุงุณู ุนู ุงูุทุฑู ุงููุนุชุงุฏุฉ ูุงููุญุฏุฏุฉ ุจุงููุนู ููุนูู ูุน ุงูุฅูุชุงุฌูุฉ.  ููู ูุฌุชูุน PHP ูู ุญุงูุฉ ุชุฃูุจ!  ุณุชุธูุฑ JIT ูู PHP 8 ุ ูุณุชุธูุฑ ุงูุชุญููู ุงููุณุจู ูู PHP 7.4 ุ ูุณูุชู ุชุทููุฑ ุงูุฃุทุฑ ุฎุงุฑุฌ ุฅุทุงุฑ ุชุทููุฑ PHP ุงูุฃุณุงุณู ุ ูุงูุชู ุชูุชุฑุถ ุฃู PHP ูุนูู ูุฎูู.  ุญุงู ุงูููุช ูุชุฌุฑุจุฉ ุดูุก ุฌุฏูุฏ ููุนุฑูุฉ ูุง ูููู ุฃู ูุนุทููุง ูุฐุง. <br><br>  ูุธุฑูุง ูุฃู ุฅุตุฏุงุฑ PHP 8 ูุง ูุฒุงู ุจุนูุฏ ุงูููุงู ุ ูุงูุฃุทุฑ ุบูุฑ ุงููุชุฒุงููุฉ ุบูุฑ ููุงุณุจุฉ ูููุงููุง (ููุงุฐุง - ุณุฃููู ุฃุฏูุงู) ุ ุณูุฑูุฒ ุงูููู ุนูู ุงูุชุญููู ุงููุณุจู ุ ุงูุฐู ุณูุธูุฑ ูู PHP 7.4 ุ ูุฅุทุงุฑ ุนูู ุดูุทุงูู PHP ุ RoadRunner. <br><br>  ูุฐู ูู ุงููุณุฎุฉ ุงููุตูุฉ ูู ุชูุฑูุฑู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Badoo PHP Meetup # 3</a> .  ููุฏูู ูุฌููุน ุงูุฎุทุจ ุงูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุนูุงูุง ูู ูุฐุง ุงูููุตุจ</a> . <a name="habracut"></a><br><br>  ุชุนูู PHP-FPM ู Apache mod_php ูุทุฑู ููุงุซูุฉ ูุชุดุบูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูู PHP ูุทูุจุงุช ุงููุนุงูุฌุฉ (ุงูุชู ุชุฏูุฑูุง ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ุงูููุงูุน ูุงูุฎุฏูุงุช ุ ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ุณุฃุฏุนููู "ููุงุณููููู" PHP) ููุนูู ุนูู ุฃุณุงุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ุดูุก ูุดุชุฑู</a> ุจุงููุนูู ุงููุงุณุน ูููููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ูุชู ุชูุชูุด ุงูุฏููุฉ ุจูู ุนูุงู PHP ุ <br></li><li style=";text-align:right;direction:rtl">  ูุง ูุชู ุชูุชูุด ุงูุฏููุฉ ุจูู ุงูุทูุจุงุช ุงููุฎุชููุฉ. <br></li></ul><br>  ุงููุธุฑ ูู ูุฐุง ูุน ูุซุงู ุนูู ุจุฑูุงูุฌ ูุตู ุจุณูุท: <br><br><pre style=";text-align:right;direction:rtl"><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  $app = \App::init(); $storage = $app-&gt;getCitiesStorage(); //   $name = $storage-&gt;getById($_COOKIE['city_id']); echo " : {$name}";</span></span></code> </pre> <br>  ููู ุทูุจ ุ ูุชู ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงูุฃูู ุฅูู ุงูุณุทุฑ ุงูุฃุฎูุฑ: ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ุงูุชููุฆุฉ ุ ุนูู ุงูุฃุฑุฌุญ ุ ูู ุชุฎุชูู ุนู ุงูุทูุจ ุฅูู ุงูุทูุจ ููููู ุชูููุฐู ุนูู ุงูุฃุฑุฌุญ ูุฑุฉ ูุงุญุฏุฉ (ุชูููุฑ ุงูููุงุฑุฏ) ุ ูุง ูุฒุงู ูุชุนูู ุนููู ุชูุฑุงุฑู ููู ุทูุจ.  ูุง ูููููุง ููุท ุฃุฎุฐ ุงููุชุบูุฑุงุช ูุญูุธูุง (ุนูู ุณุจูู ุงููุซุงู ุ <code>$app</code> ) ุจูู ุงูุทูุจุงุช ุจุณุจุจ ุฎุตุงุฆุต ููููุฉ ุนูู PHP "ุงูููุงุณููู". <br><br>  ููู ุณูุจุฏู ุฅุฐุง ุชุฌุงูุฒูุง ูุทุงู PHP "ุงูููุงุณููู"ุ  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ูุฏููุง ุจุบุถ ุงููุธุฑ ุนู ุงูุทูุจ ุ ูุงูุชููุฆุฉ ูุงูุญุตูู ุนูู ุญููุฉ ุงุณุชุนูุงู ุจุฏุงุฎูู ุ ูุงูุชู ุจุฏุงุฎููุง ุณููุชุธุฑ ุงูุญู ุงูุชุงูู ุ ููุนุงูุฌุชู ูุชูุฑุงุฑ ุงูุญููุฉ ุฏูู ุชูุธูู ุงูุจูุฆุฉ (ูุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู "PHP ูู daemon") "). <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  $app = \App::init(); $storage = $app-&gt;getCitiesStorage(); $cities = $storage-&gt;getAll(); //    while ($req = getNextRequest()) {    $name = $cities[$req-&gt;getCookie('city_id')];    echo " : {$name}"; }</span></span></code> </pre> <br>  ูู ูุชููู ููุท ูู ุงูุชุฎูุต ูู ุงูุชููุฆุฉ ุงููุชูุฑุฑุฉ ููู ุทูุจ ุ ูููู ุฃูุถูุง ุญูุธ ูุงุฆูุฉ ุงููุฏู ูุฑุฉ ูุงุญุฏุฉ ุฅูู ูุชุบูุฑ <code>$cities</code> ูุงุณุชุฎุฏุงููุง ูู ุทูุจุงุช ูุฎุชููุฉ ุฏูู ุงููุตูู ุฅูู ุฃู ููุงู ุจุงุณุชุซูุงุก ุงูุฐุงูุฑุฉ (ูุฐู ูู ุฃุณุฑุน ุทุฑููุฉ ููุญุตูู ุนูู ุฃู ุจูุงูุงุช). <br><br>  ุฃุฏุงุก ูุซู ูุฐุง ุงูุญู ูุญุชูู ุฃู ูููู ุฃุนูู ุจูุซูุฑ ูู ุฃุฏุงุก PHP "ุงูููุงุณููู".  ููู ุนุงุฏุฉู ูุง ูุชู ุฅุนุทุงุก ุงูุฒูุงุฏุฉ ูู ุงูุฅูุชุงุฌูุฉ ูุฌุงููุง - ุนููู ุฏูุน ุจุนุถ ุงูุซูู ููุงุจู ุฐูู.  ุฏุนููุง ูุฑู ูุง ูููู ุฃู ูููู ูู ุญุงูุชูุง. <br><br>  ููููุงู ุจุฐูู ุ ูููู ุจุชุนููุฏ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฎุงุต ุจูุง ููููุงู ูุจุฏูุงู ูู ุนุฑุถ ูุชุบูุฑ <code>$name</code> ุ ุณูููู ุจุชุนุจุฆุฉ ุงููุตูููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">-  $name = $cities[$req-&gt;getCookie(<span class="hljs-string"><span class="hljs-string">'city_id'</span></span>)]; +  $names[] = $cities[$req-&gt;getCookie(<span class="hljs-string"><span class="hljs-string">'city_id'</span></span>)];</code> </pre><br>  ูู ุญุงูุฉ PHP "ุงูููุงุณูููุฉ" ุ ูู ุชูุดุฃ ุฃู ูุดุงูู - ูู ููุงูุฉ ุงูุงุณุชุนูุงู ุ ุณูุชู ุฅุชูุงู ูุชุบูุฑ <code>$name</code> ูุณูุนูู ูู ุทูุจ ูุงุญู ููุง ูู ูุชููุน.  ูู ุญุงูุฉ ุจุฏุก ุชุดุบูู PHP ูุฎูู ุ ุณูุถูู ูู ุทูุจ ูุฏููุฉ ุฃุฎุฑู ุฅูู ูุฐุง ุงููุชุบูุฑ ุ ููุง ุณูุคุฏู ุฅูู ููู ุบูุฑ ููุถุจุท ููุตููู ุญุชู ููุงุฏ ุงูุฐุงูุฑุฉ ุนูู ุงูุฌูุงุฒ. <br><br>  ุจุดูู ุนุงู ุ ูุฏ ูุง ุชูุชูู ุงูุฐุงูุฑุฉ ููุท - ูุฏ ุชุญุฏุซ ุจุนุถ ุงูุฃุฎุทุงุก ุงูุฃุฎุฑู ุงูุชู ุชุคุฏู ุฅูู ููุช ุงูุนูููุฉ.  ูู ูุซู ูุฐู ุงููุดููุงุช ุ ูุชุนุงูู PHP "ุงูููุงุณููู" ุชููุงุฆููุง.  ูู ุญุงูุฉ ุจุฏุก ุชุดุบูู PHP ูุฎูู ุ ูุญุชุงุฌ ุฅูู ูุฑุงูุจุฉ ูุฐุง ุงูุจุฑูุงูุฌ ุงูุฎูู ุจุทุฑููุฉ ูุง ุ ูุฅุนุงุฏุฉ ุชุดุบููู ุฅุฐุง ุชุนุทู. <br><br>  ุงูุฃุฎุทุงุก ูู ูุฐุง ุงูููุน ุบูุฑ ุณุงุฑุฉ ุ ูููู ุชูุฌุฏ ุญููู ูุนุงูุฉ ููุง.  ูููู ุงูุฃูุฑ ุฃุณูุฃ ุจูุซูุฑ ุฅุฐุง ูู ููุฎูุถ โโุงูุจุฑูุงูุฌ ุงููุตู ุ ุจุณุจุจ ูุฌูุฏ ุฎุทุฃ ุ ูููู ุจุดูู ุบูุฑ ูุชููุน ูุบูุฑ ููู ุจุนุถ ุงููุชุบูุฑุงุช (ุนูู ุณุจูู ุงููุซุงู ุ ูุฅูู ููุณุญ ุตููู <code>$cities</code> city).  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุนูู ุฌููุน ุงูุทูุจุงุช ุงููุงุญูุฉ ูุน ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ. <br><br><blockquote style=";text-align:right;direction:rtl">  ููุชูุฎูุต ุ ูู ุงูุฃุณูู ูุชุงุจุฉ ููุฏ ูู PHP "ุงูููุงุณููู" (PHP-FPM ู Apache mod_php ููุง ุดุงุจู ุฐูู) - ุฅูู ูุญุฑุฑูุง ูู ุนุฏุฏ ูู ุงููุดุงูู ูุงูุฃุฎุทุงุก.  ูููู ููุฐุง ูุญู ูุฏูุน ูุน ุงูุฃุฏุงุก. </blockquote><br>  ูู ุงูุฃูุซูุฉ ุฃุนูุงู ุ ูุฑู ุฃูู ูู ุจุนุถ ุฃุฌุฒุงุก ุงูููุฏ ุ ูููู PHP ุงูููุงุฑุฏ ุงูุชู ูู ููู ูู ุงููููู ุฅููุงููุง (ุฃู ุฅูุฏุงุฑูุง ูุฑุฉ ูุงุญุฏุฉ) ูู ูุนุงูุฌุฉ ูู ุทูุจ ูู ุงูุทูุจ "ุงูููุงุณููู".  ูุฐู ูู ุงููุฌุงูุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุชุตุงู ุงูููู (ุชุดูู ุ ุชุชุทูุจ ุ ููุง ุฅูู ุฐูู) ุ <br></li><li style=";text-align:right;direction:rtl">  ุงูุชููุฆุฉ (ุงูุฅุทุงุฑ ุ ุงูููุชุจุงุช ุ ุญุงููุฉ DI ุ ุฅูุฎ) ุ <br></li><li style=";text-align:right;direction:rtl">  ุทูุจ ุจูุงูุงุช ูู ูุญุฏุฉ ุงูุชุฎุฒูู ุงูุฎุงุฑุฌูุฉ (ุจุฏูุงู ูู ุงูุชุฎุฒูู ูู ุงูุฐุงูุฑุฉ). <br></li></ul><br>  ุธู PHP ููุฌูุฏูุง ููุฐ ุณููุงุช ุนุฏูุฏุฉ ูุฑุจูุง ุฃุตุจุญ ูุชูุชุน ุจุดุนุจูุฉ ุจูุถู ูุฐุง ุงููููุฐุฌ ูู ุงูุนูู.  ุฎูุงู ูุฐุง ุงูููุช ุ ุชู ุชุทููุฑ ุงูุนุฏูุฏ ูู ุงูุทุฑู ุจุฏุฑุฌุงุช ูุชูุงูุชุฉ ูู ุงููุฌุงุญ ูุญู ุงููุดููุฉ ุงูููุตููุฉ.  ุฐูุฑุช ุจุนุถูุง ูู ููุงูุชู ุงูุณุงุจูุฉ.  ุงูููู ุณููุงูุด ุญููู ุฌุฏูุฏูู ุฅูู ุญุฏ ูุง ูููุฌุชูุน: ุงูุชุญููู ุงููุณุจู ู RoadRunner. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชุญููู ุงููุณุจู </h2><br>  ูู ุจูู ุงูููุงุท ุงูุซูุงุซ ุงููุฐููุฑุฉ ุฃุนูุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู</a> ุชุตููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุญููู ุงููุณุจู</a> ููุชุนุงูู ูุน ุงููููุงุช ุงูุนุงูุฉ ุงูุฃููู ุนูุฏ ุชูุตูู ุงููููุงุช.  ูููููุฉ ุงูุฃููู ุ ูุฏ ูุจุฏู ูุฐุง ุบุฑูุจูุง ูุจูุง ูุนูู ุ ูุฃู PHP ูุญุชูู ุจุงููุนู ุนูู OPcache ุ ูุงูุฐู ุชู ุฅูุดุงุคู ููุฐุง ุงูุบุฑุถ ููุท.  ูููู ุงูุฌููุฑ ุ ุฏุนูุง ูุชุนุฑู ุนูู ุญูููุฉ ุงูุฃูุฑ ุจูุณุงุนุฏุฉ <code>perf</code> ุ ุงูุชู ูุชู ุชูููู OPcache ุนูููุง ุ ูุน ูุนุฏู ุถุฑุจ ูุณุงูู 100ูช. <br><br><img src="https://habrastorage.org/webt/rb/y-/jo/rby-jo2hcsjsu3ncjnjxjmbggny.png"><br><br>  ุนูู ุงูุฑุบู ูู OPcache ุ ูุฑู ุฃู <code>persistent_compile_file</code> ูุณุชุบุฑู 5.84ูช ูู ููุช ุชูููุฐ ุงูุงุณุชุนูุงู. <br><br>  ูููู ุณุจุจ ุญุฏูุซ ุฐูู ุ ูููููุง ุฃู ููุธุฑ ุฅูู ูุตุงุฏุฑ <a href="">zend_accel_load_script</a> .  ูููู ุฃู ูุฑู ูููู ุฃูู ุนูู ุงูุฑุบู ูู ูุฌูุฏ OPcache ุ ูุน ูู ููุงููุฉ <code>include/require</code> ูุชู ูุณุฎ ุชูููุนุงุช ุงููุฆุงุช ูุงููุธุงุฆู ูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุฅูู ุฐุงูุฑุฉ ุงูุนูููุฉ ุงููููุฐุฉ ุ ููุชู ุฅูุฌุงุฒ ุงูุนุฏูุฏ ูู ุงูุฃุนูุงู ุงููุณุงุนุฏุฉ.  ููุฌุจ ุฃู ูุชู ูุฐุง ุงูุนูู ููู ุทูุจ ุ ูุฃูู ูู ููุงูุฉ ุงูุฃูุฑ ูุชู ูุณุญ ุฐุงูุฑุฉ ุงูุนูููุฉ ุงููููุฐุฉ. <br><br><img src="https://habrastorage.org/webt/6j/nj/zl/6jnjzlelhihw5j5fsgo5bmlluxw.png"><br><br>  ูุชูุงูู ูุฐุง ุจุณุจุจ ุงูุนุฏุฏ ุงููุจูุฑ ูู ููุงููุงุช ุงูุชุถููู / ุงูุชู ูุทูุจูุง ุนุงุฏุฉู ูู ุทูุจ ูุงุญุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชุถูู Symfony 4 ุญูุงูู 310 ูููุงุช ูุจู ุชูููุฐ ุงูุณุทุฑ ุงููููุฏ ุงูุฃูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูุญุฏุซ ูุฐุง ุถููููุง ูู ุจุนุถ ุงูุฃุญูุงู: ูุฅูุดุงุก ูุซูู ูููุฆุฉ A ุ ููุง ูู ููุถุญ ุฃุฏูุงู ุ ุณูููู PHP ุชููุงุฆููุง ุจุชุญููู ุฌููุน ุงููุฆุงุช ุงูุฃุฎุฑู (B ู C ู D ู E ู F ู G).  ูุจุตูุฉ ุฎุงุตุฉ ูู ูุฐุง ุงูุตุฏุฏ ุ ุชุจุฑุฒ ุชุจุนูุงุช ุงูููุญู ุงูุชู ุชุนูู ุนู ูุธุงุฆู: ููุชุฃูุฏ ูู ุฃู ูุฐู ุงููุธุงุฆู ุณุชููู ูุชุงุญุฉ ุฃุซูุงุก ุชูููุฐ ุฑูุฒ ุงููุณุชุฎุฏู ุ ูุถุทุฑ ุงูููุญู ุฏุงุฆููุง ุฅูู ุชูุตูููุง ุจุบุถ ุงููุธุฑ ุนู ุงูุงุณุชุฎุฏุงู ุ ูุธุฑูุง ูุฃู PHP ูุง ูุญุชูู ุนูู ูุธุงุฆู ุงูุชุญููู ุงูุชููุงุฆู ููุง ูููู ุชุญููููุง ูู ููุช ุงูููุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">D</span></span>;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SOME_CONST = \E::E1;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $someVar = \F::F1;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $anotherVar = \G::G1; }</code> </pre> <br><br><h3 style=";text-align:right;direction:rtl">  ููู ูุนูู ุงูุชุญููู ุงููุณุจู </h3><br>  ูุญุชูู ุงูุชุญููู ุงููุณุจู ุนูู ุฅุนุฏุงุฏ ุฑุฆูุณู ูุงุญุฏ ุ opcache.preload ุ ูุชู ููู ุชูุฑูุฑ ุงููุณุงุฑ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู PHP.  ุณูุชู ุชูููุฐ ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ูุฑุฉ ูุงุญุฏุฉ ุนูุฏ ุจุฏุก ุชุดุบูู PHP-FPM / Apache / ุ ููุง ุฅูู ุฐูู ุ ูุณุชููู ุฌููุน ุชูููุนุงุช ุงููุฆุงุช ูุงูุทุฑู ูุงููุธุงุฆู ุงูุชู ุณูุชู ุงูุฅุนูุงู ุนููุง ูู ูุฐุง ุงูููู ูุชุงุญุฉ ูุฌููุน ุงููุตูุต ุงูุชู ุชุนุงูุฌ ุงูุทูุจุงุช ูู ุงูุณุทุฑ ุงูุฃูู ูู ุชูููุฐูุง (ููู ููุงุญุธุฉ: ูุฐุง ูุง ููุทุจู ุนูู ุงููุชุบูุฑุงุช ูุงูุซูุงุจุช ุงูุนุงูููุฉ - ุณูุชู ุฅุนุงุฏุฉ ุชุนููู ููููุง ุฅูู ุงูุตูุฑ ุจุนุฏ ููุงูุฉ ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู).  ูู ุชุนุฏ ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก / ุทูุจ ููุงููุงุช ููุณุฎ ุชูุงููุน ุงููุธููุฉ / ุงููุฆุฉ ูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุฅูู ุฐุงูุฑุฉ ุงูุนูููุฉ: ุชู ุฅุนูุงููุง ุฌููุนูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุบูุฑ ูุงุจูุฉ ููุชุบููุฑ</a> ูุจุณุจุจ ูุฐุง ุ ูููู ูุฌููุน ุงูุนูููุงุช ุงูุฑุฌูุน ุฅูู ูููุน ุงูุฐุงูุฑุฉ ููุณู ุงูุฐู ูุญุชูู ุนูููุง. <br><br>  ุนุงุฏุฉ ูุง ุชููู ุงููุฆุงุช ูุงููุธุงุฆู ุงูุชู ูุญุชุงุฌูุง ูู ูููุงุช ูุฎุชููุฉ ููู ุบูุฑ ุงููุฑูุญ ุฏูุฌูุง ูู ุจุฑูุงูุฌ ูุตู ููุชุญููู ุงููุณุจู.  ูููู ูุฐุง ูุง ููุฒู ุงูููุงู ุจู: ูุธุฑูุง ูุฃู ุงูุชุญููู ุงููุณุจู ูู ุจุฑูุงูุฌ ูุตู PHP ุนุงุฏู ุ ูููููุง ููุท ุงุณุชุฎุฏุงู include / requ ุฃู opcache_compile_file () ูู ุงูุจุฑูุงูุฌ ุงููุตู ููุชุญููู ุงููุณุจู ูุฌููุน ุงููููุงุช ุงูุชู ูุญุชุงุฌูุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุธุฑูุง ูุฃู ูู ูุฐู ุงููููุงุช ุณูุชู ุชุญููููุง ูุฑุฉ ูุงุญุฏุฉ ุ ูุณูุชููู PHP ูู ุฅุฌุฑุงุก ุชุญุณููุงุช ุฅุถุงููุฉ ูุง ูููู ุงูููุงู ุจูุง ุฃุซูุงุก ููุงููุง ุจุชูุตูู ูุฐู ุงููููุงุช ุจุดูู ูููุตู ูู ููุช ุงูุงุณุชุนูุงู.  ูููู PHP ุจุฅุฌุฑุงุก ุชุญุณููุงุช ููุท ูู ุฅุทุงุฑ ูู ููู ูููุตู ุ ูููู ูู ุญุงูุฉ ุงูุชุญููู ุงููุณุจู ุ ููู ุงูููุฏ ุงูุฐู ุชู ุชุญูููู ูู ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุนุงููุฑ ุงูุชุญููู ุงููุณุจู </h3><br>  ูุฅุซุจุงุช ููุงุฆุฏ ุงูุชุญููู ุงููุณุจู ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ุฃุฎุฐุช ููุทุฉ ููุงูุฉ ูุงุญุฏุฉ ูุฑุชุจุทุฉ ุจู CPU ุจูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุชุชููุฒ ุงููุงุฌูุฉ ุงูุฎูููุฉ ูุฏููุง ุนููููุง ุจุงูุชุญููู ุงููุฑุชุจุท ุจูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูุฐู ุงูุญูููุฉ ูู ุฅุฌุงุจุฉ ุงูุณุคุงู ููุงุฐุง ูู ูููุฑ ูู ุงูุฃุทุฑ ุบูุฑ ุงููุชุฒุงููุฉ: ููู ูุง ุชุนุทู ุฃู ููุฒุฉ ูู ุญุงูุฉ ุงูุชุญููู ุงููุฑุชุจุท ุจูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ููู ููุณ ุงูููุช ุชุฒูุฏ ูู ุชุนููุฏ ุงูุดูุฑุฉ (ูุฌุจ ูุชุงุจุชูุง ุจุดูู ูุฎุชูู) ุ ููุฐูู ููุนูู ูุน ุดุจูุฉ ุฃู ูุฑุต ุ ุฅูุฎ. ูุทููุจุฉ ุจุฑุงูุฌ ุชุดุบูู ุบูุฑ ูุชุฒุงููุฉ ุฎุงุตุฉ. <br><br>  ูู ุฃุฌู ุชูุฏูุฑ ููุงุฆุฏ ุงูุชุญููู ุงููุณุจู ุชูุงููุง ุ ุจุงููุณุจุฉ ููุชุฌุฑุจุฉ ุ ููุช ุจุชูุฒูููุง ูุน ุฌููุน ุงููููุงุช ุงูุชู ูุญุชุงุฌูุง ุงูุจุฑูุงูุฌ ุงููุตู ููุงุฎุชุจุงุฑ ุฃุซูุงุก ุงูุนูู ุ ูููุช ุจุชุญูููู ุจูุธูุฑ ูุดุจู ุนุจุก ุงูุฅูุชุงุฌ ุงูุนุงุฏู ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">wrk2</a> - ููู ุชูุงุธุฑูุฉ ุฃูุซุฑ ุชูุฏูุงู ูู Apache Benchmark ุ ูููู ุจููุณ ุงูุจุณุงุทุฉ . <br><br>  ูุชุฌุฑุจุฉ ุงูุชุญููู ุงููุณุจู ุ ูุฌุจ ุฃููุงู ุงูุชุฑููุฉ ุฅูู PHP 7.4 (ูุฏููุง ุงูุขู PHP 7.2).  ููุช ุจููุงุณ ุฃุฏุงุก PHP 7.2 ุ PHP 7.4 ุฏูู ุงูุชุญููู ุงููุณุจู ู PHP 7.4 ูุน ุงูุชุญููู ุงููุณุจู.  ูุงููุชูุฌุฉ ูู ูุซู ูุฐู ุงูุตูุฑุฉ: <br><br><img src="https://habrastorage.org/webt/sm/ea/5_/smea5_e3kck5zwyk44afzp8ut9u.png"><br><br>  ูุจุงูุชุงูู ุ ูุฅู ุงูุงูุชูุงู ูู PHP 7.2 ุฅูู PHP 7.4 ูููุญ + 10 ูช ุฅูู ุงูุฃุฏุงุก ูู ููุทุฉ ุงูููุงูุฉ ุ ููููุญ ุงูุชุญููู ุงููุณุจู 10 ูช ุฃุฎุฑู ูู ุฃุนูุงู. <br><br>  ูู ุญุงูุฉ ุงูุชุญููู ุงููุณุจู ุ ุณุชุนุชูุฏ ุงููุชุงุฆุฌ ุฅูู ุญุฏ ูุจูุฑ ุนูู ุนุฏุฏ ุงููููุงุช ุงููุชุตูุฉ ูุชุนููุฏ ุงูููุทู ุงููุงุจู ููุชูููุฐ: ุฅุฐุง ูุงู ููุงู ุงูุนุฏูุฏ ูู ุงููููุงุช ูุชุตูุฉ ููุงู ุงูููุทู ุจุณูุทูุง ุ ูุฅู ุงูุชุญููู ุงููุณุจู ุณูุนุทู ุฃูุซุฑ ููุง ุฅุฐุง ูุงู ููุงู ุนุฏุฏ ูููู ูู ุงููููุงุช ููุงู ุงูููุทู ูุนูุฏูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุฑูู ุงูุฏูููุฉ ูู ุงูุชุญููู ุงููุณุจู </h3><br>  ูุง ูุฒูุฏ ูู ุงูุฅูุชุงุฌูุฉ ุนุงุฏุฉ ูุง ูููู ุงูุฌุงูุจ ุงูุณูุจู.  ุงูุชุญููู ุงููุณุจู ูุฏูู ุงููุซูุฑ ูู ุงููุฑูู ุงูุฏูููุฉ ุ ูุงูุชู ุณุฃูุฏููุง ุฃุฏูุงู.  ูุฌุจ ุฃุฎุฐูุง ุฌููุนูุง ูู ุงูุงุนุชุจุงุฑ ุ ููู ูุงุญุฏูุง (ุงูุฃูู) ููุท ูููู ุฃู ูููู ุฃุณุงุณููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุชุบููุฑ - ุฅุนุงุฏุฉ ุงูุชุดุบูู </h4><br>  ูุธุฑูุง ูุฃู ุฌููุน ูููุงุช ุงูุชุญููู ุงููุณุจู ูุชู ุชุตููููุง ููุท ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ููุชู ุชูููุฒูุง ุนูู ุฃููุง ุบูุฑ ูุงุจูุฉ ููุชุบููุฑ ููู ูุชู ุฅุนุงุฏุฉ ุชุฌููุนูุง ูู ุงููุณุชูุจู ุ ูุฅู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ูุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุฐู ุงููููุงุช ูู ุฅุนุงุฏุฉ ุงูุชุดุบูู (ุฅุนุงุฏุฉ ุงูุชุญููู ุฃู ุฅุนุงุฏุฉ ุงูุชุดุบูู) PHP-FPM / Apache / ุ ุฅูุฎ. <br><br>  ูู ุญุงูุฉ ุฅุนุงุฏุฉ ุงูุชุญููู ุ ูุญุงูู PHP ุฅุนุงุฏุฉ ุงูุชุดุบูู ุจุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูุฏูุฉ: ูู ุชุชู ููุงุทุนุฉ ุทูุจุงุช ุงููุณุชุฎุฏู ุ ูููู ูุน ุฐูู ุ ุจูููุง ุชููู ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู ููุฏ ุงูุชูุฏู ุ ุณุชูุชุธุฑ ุฌููุน ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ุญุชู ุชูุชูู.  ุฅุฐุง ูู ููู ููุงู ุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงูุชุญููู ุงููุณุจู ุ ููุฏ ูุง ูุชุณุจุจ ุฐูู ูู ุญุฏูุซ ูุดููุงุช ุ ูููู ุฅุฐุง ุญุงููุช ุชูุฒูู ุงูุชุทุจูู ุจุงููุงูู ุ ูุณูููู ุฐูู ูุญููููุง ุจุฒูุงุฏุฉ ููุญูุธุฉ ูู ููุช ุงูุงุณุชุฌุงุจุฉ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุชุดุบูู. <br><br>  ุฃูุถูุง ุ ููุฒุฉ ุฅุนุงุฏุฉ ุงูุชุดุบูู (ุจุบุถ ุงููุธุฑ ุนูุง ุฅุฐุง ูุงูุช ุฅุนุงุฏุฉ ุงูุชุญููู ุฃู ุฅุนุงุฏุฉ ุงูุชุดุบูู) ููุง ููุฒุฉ ูููุฉ - ููุชูุฌุฉ ููุฐุง ุงูุฅุฌุฑุงุก ุ ูุชู ูุณุญ OPcache.  ููุฐุง ูุนูู ุฃู ุฌููุน ุงูุทูุจุงุช ุจุนุฏ ุฐูู ุณุชุนูู ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุดูุฑุฉ ุงูุจุงุฑุฏุฉ ุ ูุงูุชู ูููู ุฃู ุชุฒูุฏ ูู ููุช ุงูุงุณุชุฌุงุจุฉ ุฃูุซุฑ. <br><br><h4 style=";text-align:right;direction:rtl">  ุดุฎุตูุงุช ุบูุฑ ูุญุฏุฏุฉ </h4><br>  ูุชุญููู ุงูุชุญููู ุงููุณุจู ููุตู ุฏุฑุงุณู ุ ูุฌุจ ุชุญุฏูุฏ ูู ุดูุก ูุนุชูุฏ ุนููู ุญุชู ูุฐู ุงููุฑุญูุฉ.  ุจุงููุณุจุฉ ูููุฆุฉ ุฃุฏูุงู ุ ูุนูู ุฐูู ุฃู ุฌููุน ุงููุฆุงุช ุงูุฃุฎุฑู (B ู C ู D ู E ู F ู G) ูุงููุชุบูุฑ <code>$someGlobalVar</code> someGlobalVar ูุซุงุจุช SOME_CONST ูุฌุจ ุฃู ุชููู ูุชุงุญุฉ ูุจู ุชุฌููุน ูุฐู ุงููุฆุฉ.  ูุธุฑูุง ูุฃู ุงูุจุฑูุงูุฌ ุงููุตู ููุชุญููู ูู ูุฌุฑุฏ ููุฏ PHP ููุชุธู ุ ูููููุง ุชุญุฏูุฏ ุฃุฏุงุฉ ุงูุชุญููู ุงูุชููุงุฆู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชู ุชููุงุฆููุง ุชุญููู ูู ูุง ูุชุนูู ุจุงููุฆุงุช ุงูุฃุฎุฑู.  ููู ูุฐุง ูุง ูุนูู ูุน ุงููุชุบูุฑุงุช ูุงูุซูุงุจุช: ูุฌุจ ุฃู ูุชุฃูุฏ ูู ุชุนุฑูููุง ูู ููุช ุงูุฅุนูุงู ุนู ูุฐู ุงููุฆุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">D</span></span>;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SOME_CONST = \E::E1;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $someVar = \F::F1;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $anotherVar = \G::G1;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $varLink = $someGlobalVar;    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $constLink = SOME_CONST; }</code> </pre> <br>  ูุญุณู ุงูุญุธ ุ ูุญุชูู ุงูุชุญููู ุงููุณุจู ุนูู ุฃุฏูุงุช ูุงููุฉ ูููู ูุง ุฅุฐุง ููุช ูุฏ ุฎุฑุฌุช ุนู ุงูุทุฑูู ุฃู ูุง.  ุฃููุงู ุ ูุฐู ุฑุณุงุฆู ุชุญุฐูุฑ ุชุญุชูู ุนูู ูุนูููุงุช ุญูู ูุง ูุดู ุชุญูููู ูููุงุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">PHP Warning: Can't preload class MyTestClass with unresolved initializer for constant RAND in /local/preload-internal.php on line 6 PHP Warning: Can't preload unlinked class MyTestClass: Unknown parent AnotherClass in /local/preload-internal.php on line 5</code> </pre> <br>  ุซุงูููุง ุ ูุถูู ุงูุชุญููู ุงููุณุจู ูุณููุง ูููุตููุง ุฅูู ูุชูุฌุฉ ุฏุงูุฉ opcache_get_status () ุ ูุงูุฐู ููุถุญ ูุง ุชู ุชุญูููู ุจูุฌุงุญ ูู ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู: <br><br><img src="https://habrastorage.org/webt/j7/fh/6u/j7fh6u0ww7plxxrx_x8fguxcazu.png"><br><br><h4 style=";text-align:right;direction:rtl">  ุญูู ุงูุตู / ุงูุชุญุณูู ุงููุณุชูุฑ </h4><br>  ููุง ูุชุจุช ุฃุนูุงู ุ ุงูุชุญููู ุงููุณุจู ูุญู ููู ุงูุญููู / ุซูุงุจุช ุงููุตู ููุญูุธูุง.  ูุชูุญ ูู ูุฐุง ุชุญุณูู ุงูููุฏ: ุฃุซูุงุก ูุนุงูุฌุฉ ุงูุทูุจ ุ ุชููู ุงูุจูุงูุงุช ุฌุงูุฒุฉ ููุง ุชุญุชุงุฌ ุฅูู ุงุดุชูุงููุง ูู ุจูุงูุงุช ุฃุฎุฑู.  ูููู ูุฐุง ูููู ุฃู ูุคุฏู ุฅูู ูุชุงุฆุฌ ุบูุฑ ูุงุถุญุฉ ุ ูุงูุชู ููุถุญูุง ุงููุซุงู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span>.php: <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> define(<span class="hljs-string"><span class="hljs-string">'MYTESTCONST'</span></span>, mt_rand(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>));</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">preload.php: <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'const.php'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyTestClass</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RAND = MYTESTCONST; }</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">script.php: <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'const.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> MYTESTCONST, <span class="hljs-string"><span class="hljs-string">', '</span></span>, MyTestClass::RAND; <span class="hljs-comment"><span class="hljs-comment">// 32, 154</span></span></code> </pre> <br>  ูุงููุชูุฌุฉ ูู ูููู ูุถุงุฏ ููุญุฏุณ: ูุจุฏู ุฃู ุงูุซูุงุจุช ูุฌุจ ุฃู ุชููู ูุชุณุงููุฉ ุ ุญูุซ ุชู ุชุนููู ูุงุญุฏ ูููู ุจูููุฉ ุงูุขุฎุฑ ุ ูููู ูู ุงููุงูุน ูุฐุง ููุณ ูุฐูู.  ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃู ุงูุซูุงุจุช ุงูุนููููุฉ ุ ุนูู ุนูุณ ุงูุซูุงุจุช / ุงูุญููู ุ ูุชู ูุณุญูุง ุจุงูููุฉ ุจุนุฏ ุงูุชูุงุก ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู ุ ุจูููุง ูุชู ุญู ุซูุงุจุช / ุญููู ุงููุตู ูุญูุธูุง.  ููุฐุง ูุคุฏู ุฅูู ุญูููุฉ ุฃูู ุฃุซูุงุก ุชูููุฐ ุงูุทูุจ ุ ูุชุนูู ุนูููุง ุชุญุฏูุฏ ุงูุซุงุจุช ุงูุนุงู ูุฑุฉ ุฃุฎุฑู ุ ููุชูุฌุฉ ูุฐูู ูููู ุฃู ุชุญุตู ุนูู ูููุฉ ูุฎุชููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ูุง ูููู ุฅุนุงุฏุฉ ุชุนุฑูู someFunc () </h4><br>  ูู ุญุงูุฉ ุงููุฆุงุช ุ ูููู ุงููููู ุจุณูุทูุง: ุนุงุฏุฉู ูุง ูุฑุจุทูู ุจุดูู ุตุฑูุญ ุ ููููุง ูุณุชุฎุฏู ุฃุฏุงุฉ ุชุญููู ุชููุงุฆู.  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ุชู ุชุนุฑูู ูุฆุฉ ูุง ูู ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู ุ ููู ูุชู ุชูููุฐ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุชููุงุฆู ุจุจุณุงุทุฉ ุฃุซูุงุก ุงูุทูุจ ููู ูุญุงูู ุชูุตูู ูุฐู ุงููุฆุฉ ูุฑุฉ ุฃุฎุฑู. <br><br>  ูุฎุชูู ุงููุถุน ูุน ุงููุธุงุฆู: ูุฌุจ ุฃู ูุฑุจุทูุง ุจูุถูุญ.  ูููู ุฃู ูุคุฏู ุฐูู ุฅูู ูููู ุญูุซ ูู ุงูุจุฑูุงูุฌ ุงููุตู ููุชุญููู ุงููุณุจู ุ ุณูู ูููู ุจุชูุตูู ุฌููุน ุงููููุงุช ุงูุถุฑูุฑูุฉ ุจุงููุธุงุฆู ุ ูุฎูุงู ุงูุทูุจ ุณูุญุงูู ุงูููุงู ุจุฐูู ูุฑุฉ ุฃุฎุฑู (ูุซุงู ูููุฐุฌู ูู ุฃุฏุงุฉ ุชุญููู booter ููููุญู: ุณูุญุงูู ุฏุงุฆููุง ุชูุตูู ุฌููุน ุงููููุงุช ุจุงููุธุงุฆู).  ูู ูุฐู ุงูุญุงูุฉ ุ ุญุตููุง ุนูู ุฎุทุฃ: ุชู ุชุนุฑูู ุงููุธููุฉ ุจุงููุนู ููุง ูููู ุฅุนุงุฏุฉ ุชุนุฑูููุง. <br><br>  ูููู ุญู ูุฐู ุงููุดููุฉ ุจุทุฑู ูุฎุชููุฉ.  ูู ุญุงูุฉ ุงูููุญู ุ ููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุชูุตูู ูู ุดูุก ูู ูุฑุญูุฉ ุงูุชุญููู ุงููุณุจู ุ ูุนุฏู ุชูุตูู ุฃู ุดูุก ูุชุนูู ุจุงูููุญู ุฃุซูุงุก ุงูุทูุจุงุช.  ุงูุญู ุงูุขุฎุฑ ูู ุนุฏู ุชูุตูู ุงููููุงุช ุจุงููุธุงุฆู ูุจุงุดุฑุฉ ุ ูููู ููููุงู ุจุฐูู ูู ุฎูุงู ููู ูููู ูุน ุงูุชุญูู ูู ูุฌูุฏ function_exists () ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุนู</a> Guzzle HTTP. <br><br><img src="https://habrastorage.org/webt/8h/4f/bd/8h4fbddjiu5zbd3xycfnwrdxrmi.png"><br><br><h4 style=";text-align:right;direction:rtl">  ูู ูุชู ุฅุตุฏุงุฑ PHP 7.4 ุฑุณูููุง ุจุนุฏ (ุญุชู ุงูุขู) </h4><br>  ุณุชุตุจุญ ูุฐู ุงููุฑูู ุงูุฏูููุฉ ุบูุฑ ุฐุงุช ุตูุฉ ุจุนุฏ ูุฑูุฑ ุจุนุถ ุงูููุช ุ ูููู ุญุชู ุงูุขู ูู ูุชู ุฅุตุฏุงุฑ ุฅุตุฏุงุฑ PHP 7.4 ุฑุณูููุง ุจุนุฏ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุจ</a> ูุฑูู PHP ูู ููุงุญุธุงุช ุงูุฅุตุฏุงุฑ ุจุดูู ุตุฑูุญ: "ุงูุฑุฌุงุก ุนุฏู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฅุตุฏุงุฑ ูู ุงูุฅูุชุงุฌ ุ ุฅูู ุฅุตุฏุงุฑ ุงุฎุชุจุงุฑ ูุจูุฑ".  ุฎูุงู ุชุฌุงุฑุจูุง ูุน ุงูุชุญููู ุงููุณุจู ุ ุตุงุฏููุง ุงูุนุฏูุฏ ูู ุงูุฃุฎุทุงุก ุ ููููุง ุจุฅุตูุงุญูุง ุจุฃููุณูุง ูุญุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฑุณููุง</a> ุดูุฆูุง ูุง ุฅูู ุงูููุจุน.  ูุชุฌูุจ ุงูููุงุฌุขุช ุ ูู ุงูุฃูุถู ุงูุชุธุงุฑ ุงูุฅุตุฏุงุฑ ุงูุฑุณูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฑูุฏ ุฑูุฑ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">RoadRunner</a> ูู ุนุจุงุฑุฉ ุนู ุจุฑูุงูุฌ ุฎูู ููุชูุจ ูู Go ุ ูุงูุฐู ุ ูู ูุงุญูุฉ ุ ููุดุฆ ุนูุงู PHP ููุฑุตุฏูู (ูุจุฏุฃ / ููุชูู / ูุนูุฏ ุงูุชุดุบูู ุญุณุจ ุงูุถุฑูุฑุฉ) ุ ููู ูุงุญูุฉ ุฃุฎุฑู ุ ููุจู ุงูุทูุจุงุช ูููุฑุฑูุง ุฅูู ูุคูุงุก ุงูุนูุงู.  ูู ูุฐุง ุงููุนูู ุ ูุง ูุฎุชูู ุนูููุง ุนู ุนูู PHP-FPM (ุญูุซ ุชูุฌุฏ ุฃูุถูุง ุนูููุฉ ุฑุฆูุณูุฉ ุชุฑุงูุจ ุงูุนูุงู).  ูููู ูุง ุชุฒุงู ููุงู ุงุฎุชูุงูุงุช.  ุงูููุชุงุญ ูู ุฃู RoadRunner ูุง ุชููู ุจุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุงุณุชุนูุงู. <br><br>  ูุจุงูุชุงูู ุ ุฅุฐุง ุงุณุชุฐูุฑูุง ูุงุฆูุชูุง ุงููุชุนููุฉ ุจุงูููุงุฑุฏ ุงูุชู ูุชู ุฅููุงููุง ูู ุญุงูุฉ PHP "ุงูููุงุณูููุฉ" ุ ูุฅู RoadRunner ุชุณูุญ ูู ุจุงูุชุนุงูู ูุน ุฌููุน ุงูููุงุท (ุงูุชุญููู ุงููุณุจู ุ ููุง ูุชุฐูุฑ ุ ูู ุงูุฃูู ููุท): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุชุตุงู ุงูููู (ุชุดูู ุ ุชุชุทูุจ ุ ููุง ุฅูู ุฐูู) ุ <br></li><li style=";text-align:right;direction:rtl">  ุงูุชููุฆุฉ (ุงูุฅุทุงุฑ ุ ุงูููุชุจุงุช ุ ุญุงููุฉ DI ุ ุฅูุฎ) ุ <br></li><li style=";text-align:right;direction:rtl">  ุทูุจ ุจูุงูุงุช ูู ูุญุฏุฉ ุงูุชุฎุฒูู ุงูุฎุงุฑุฌูุฉ (ุจุฏูุงู ูู ุงูุชุฎุฒูู ูู ุงูุฐุงูุฑุฉ). <br></li></ul><br>  ูุซุงู Hello World RoadRunner ูุจุฏู ูุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">$relay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Spiral\Goridge\StreamRelay(STDIN, STDOUT); $psr7 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Spiral\RoadRunner\PSR7Client(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Spiral\RoadRunner\Worker($relay)); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($req = $psr7-&gt;acceptRequest()) {        $resp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Zend\Diactoros\Response();        $resp-&gt;getBody()-&gt;write(<span class="hljs-string"><span class="hljs-string">"hello world"</span></span>);        $psr7-&gt;respond($resp); }</code> </pre> <br>  ุณูุญุงูู ุงุณุชุฎุฏุงู ููุทุฉ ุงูููุงูุฉ ุงูุญุงููุฉ ุ ุงูุชู ุงุฎุชุจุฑูุงูุง ูุน ุงูุชุญููู ุงููุณุจู ุ ุนูู RoadRunner ุฏูู ุชุนุฏููุงุช ุ ููู ุจุชุญููููุง ูููุงุณ ุงูุฃุฏุงุก.  ูุง ุชูุฌุฏ ุชุนุฏููุงุช - ูุฃูู ุจุฎูุงู ุฐูู ูู ูููู ุงููุนูุงุฑ ุตุงุฏููุง ุชูุงููุง. <br><br>  ุฏุนูุง ูุญุงูู ุชูููู ูุซุงู Hello World ููุฐุง. <br><br>  ุฃููุงู ุ ููุง ูุชุจุช ุฃุนูุงู ุ ูุง ูุฑูุฏ ุฃู ูุณูุท ุงูุนุงูู ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ.  ููููุงู ุจุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุงูุชูุงู ูู ุดูุก ูู ูุญุงููุฉ ุนุงูููุฉ..ุงููุจุถ.  ุซุงููุงู ุ ูุธุฑูุง ูุฃู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฎุงุต ุจูุง ูุง ูุนุฑู ุดูุฆูุง ุนู Zend Diactoros ุ ููุญุตูู ุนูู ุงูุฅุฌุงุจุฉ ุ ุณูุญุชุงุฌ ุฅูู ุชุญููู ูุชุงุฆุฌูุง.  ููุฐุง ูุณุชุฎุฏู ูุธุงุฆู ob_.  ุซุงูุซูุง ุ ุงูุจุฑูุงูุฌ ุงููุตู ูุฏููุง ูุง ูุนุฑู ุดูุฆูุง ุนู ุทุจูุนุฉ ุทูุจ PSR-7.  ุงูุญู ูู ููุก ุจูุฆุฉ PHP ุงูููุงุณูุฉ ูู ูุฐู ุงูููุงูุงุช.  ูุฑุงุจุนุง ุ ุณููุงุฑูููุง ูุชููุน ุฃู ูููุช ุงูุทูุจ ูุณูุชู ูุณุญ ุงูุญุงูุฉ ุจุฃููููุง.  ูุฐูู ุ ูุน RoadRunner ุณูุญุชุงุฌ ุฅูู ุงูููุงู ุจูุฐุง ุงูุชูุธูู ุจุฃููุณูุง. <br><br>  ูุจุงูุชุงูู ุ ุชุชุญูู ูุณุฎุฉ Hello World ุงูุฃูููุฉ ุฅูู ุดูุก ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($req = $psr7-&gt;acceptRequest()) {    <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {        $uri = $req-&gt;getUri();        $_COOKIE = $req-&gt;getCookieParams();        $_POST = $req-&gt;getParsedBody();        $_SERVER = [            <span class="hljs-string"><span class="hljs-string">'REQUEST_METHOD'</span></span> =&gt; $req-&gt;getMethod(),            <span class="hljs-string"><span class="hljs-string">'HTTP_HOST'</span></span> =&gt; $uri-&gt;getHost(),            <span class="hljs-string"><span class="hljs-string">'DOCUMENT_URI'</span></span> =&gt; $uri-&gt;getPath(),            <span class="hljs-string"><span class="hljs-string">'SERVER_NAME'</span></span> =&gt; $uri-&gt;getHost(),            <span class="hljs-string"><span class="hljs-string">'QUERY_STRING'</span></span> =&gt; $uri-&gt;getQuery(),            <span class="hljs-comment"><span class="hljs-comment">// ...        ];        ob_start();        // our logic here        $output = ob_get_contents();        ob_clean();               $resp = new \Zend\Diactoros\Response();        $resp-&gt;getBody()-&gt;write($output, 200);        $psr7-&gt;respond($resp);    } catch (\Throwable $Throwable) {        // some error handling logic here    }    \UDS\Event::flush();    \PinbaClient::sendAll();    \PinbaClient::flushAll();    \HTTP::clear();    \ViewFactory::clear();    \Logger::clearCaches();       // ... }</span></span></code> </pre> <br><br><h3 style=";text-align:right;direction:rtl">  ูุนุงููุฑ RoadRunner </h3><br>  ุญุณูุง ุ ููุฏ ุญุงู ุงูููุช ูุฅุทูุงู ุงููุนุงููุฑ. <br><br><img src="https://habrastorage.org/webt/qs/6b/89/qs6b89wrabygtu6ea6d-8i9rk4m.png"><br><br>  ูุง ุชูู ุงููุชุงุฆุฌ ุจุงูุชููุนุงุช: ูุชูุญ ูู RoadRunner ุชุญุฏูุฏ ุงููุฒูุฏ ูู ุงูุนูุงูู ุงูุชู ุชุณุจุจ ุฎุณุงุฆุฑ ูู ุงูุฃุฏุงุก ููุงุฑูุฉ ุจุงูุชุญููู ุงููุณุจู ุ ูููู ุงููุชุงุฆุฌ ุฃุณูุฃ.  ุฏุนูุง ูุชุนุฑู ุนูู ุณุจุจ ุญุฏูุซ ุฐูู ุ ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูู ุฎูุงู ุฅุฏุงุฑุฉ ูุฐุง. <br><br><img src="https://habrastorage.org/webt/1w/v9/ft/1wv9ftxnmcdxiu48rrkftw1phic.png"><br><br>  ูู ูุชุงุฆุฌ perf ุ ูุฑู phar_compile_file.  ูุฐุง ูุฃููุง ูููู ุจุชุถููู ุจุนุถ ุงููููุงุช ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู ุ ูุจูุง ุฃู OPcache ุบูุฑ ูููู (ูููู RoadRunner ุจุชุดุบูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูุซู CLI ุ ุญูุซ ูุชู ุฅููุงู ุชุดุบูู OPcache ุงูุชุฑุงุถููุง) ุ ูุชู ุชุฌููุน ูุฐู ุงููููุงุช ูุฑุฉ ุฃุฎุฑู ูุน ูู ุทูุจ. <br><br>  ุชุญุฑูุฑ ุชูููู RoadRunner - ุชูููู OPcache: <br><br><img src="https://habrastorage.org/webt/-d/zq/wn/-dzqwnysszz3zcpek82a2wtr9wy.png"><br><br><img src="https://habrastorage.org/webt/zt/tp/1w/zttp1w-bl-5xkho85gi1-7d5pek.png"><br><br>  ูุฐู ุงููุชุงุฆุฌ ุชุดุจู ุจุงููุนู ูุง ุชููุนูุง ุฑุคูุชู: ุจุฏุฃุช RoadRunner ูู ุฅุธูุงุฑ ุฃุฏุงุก ุฃูุซุฑ ูู ุงูุชุญููู ุงููุณุจู.  ูููู ุฑุจูุง ุณูููู ูุงุฏุฑูู ุนูู ุงูุญุตูู ุนูู ุงููุฒูุฏ! <br><br>  ูุง ูุจุฏู ุฃู ููุงู ุดูุฆูุง ุบูุฑ ูุฃููู ุจุงููุณุจุฉ ุฅูู perf - ูููููู ูุธุฑุฉ ุนูู ููุฏ PHP.  ุฃุณูู ุทุฑููุฉ ูููู ุงูุชุนุฑูู ูู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">phpspy</a> : ุฅูู ูุง ูุชุทูุจ ุฃู ุชุนุฏูู ูุฑูุฒ PHP - ุชุญุชุงุฌ ููุท ุฅูู ุชุดุบููู ูู ูุญุฏุฉ ุงูุชุญูู.  ุฏุนููุง ููุนู ูุฐุง ูุจูุงุก ุงูุฑุณู ุงูุจูุงูู ููุจ: <br><br><img src="https://habrastorage.org/webt/60/2k/yk/602kykwmxdw1nxaudop0omr98bi.png"><br><br>  ูุธุฑูุง ูุฃููุง ูุงูููุง ุนูู ุนุฏู ุชุนุฏูู ููุทู ุทูุจูุง ูููุงุก ุงูุชุฌุฑุจุฉ ุ ููุญู ููุชููู ุจูุฑุน ุงูููุฏุณ ุงููุฑุชุจุท ุจุนูู RoadRunner: <br><br><img src="https://habrastorage.org/webt/ta/ag/yz/taagyz-8en1khhrka80i_al2dry.png"><br><br>  ุงูุฌุฒุก ุงูุฑุฆูุณู ููู ูุฃุชู ุฅูู ุงุณุชุฏุนุงุก fread () ุ ุจุงููุงุฏ ูููู ุงูููุงู ุจุฃู ุดูุก ูุน ูุฐุง.  ููููุง ูุฑู ุจุนุถ ุงููุฑูุน ุงูุฃุฎุฑู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">\ Spiral \ RoadRunner \ PSR7Client :: acceptRequest ()</a> ุ ุจุงุณุชุซูุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">freak</a> ููุณู.  ููููู ููู ูุนูุงูุง ูู ุฎูุงู ุงููุธุฑ ูู ุดูุฑุฉ ุงููุตุฏุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">   <span class="hljs-comment"><span class="hljs-comment">/**     * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> ServerRequestInterface|null     */</span></span>    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">acceptRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        $rawRequest = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;httpClient-&gt;acceptRequest();        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($rawRequest === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) {            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;        }        $_SERVER = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;configureServer($rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>]);        $request = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;requestFactory-&gt;createServerRequest(            $rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'method'</span></span>],            $rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'uri'</span></span>],            $_SERVER        );        parse_str($rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'rawQuery'</span></span>], $query);        $request = $request            -&gt;withProtocolVersion(<span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::fetchProtocolVersion($rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'protocol'</span></span>]))            -&gt;withCookieParams($rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'cookies'</span></span>])            -&gt;withQueryParams($query)            -&gt;withUploadedFiles(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;wrapUploads($rawRequest[<span class="hljs-string"><span class="hljs-string">'ctx'</span></span>][<span class="hljs-string"><span class="hljs-string">'uploads'</span></span>]));</code> </pre> <br>  ูุตุจุญ ูู ุงููุงุถุญ ุฃู RoadRunner ุชุญุงูู ุฅูุดุงุก ูุงุฆู ุทูุจ ูุชูุงูู ูุน PSR-7 ุจุงุณุชุฎุฏุงู ุตููู ูุชุณูุณู.  ุฅุฐุง ูุงู ุฅุทุงุฑู ูุนูู ูุน ูุงุฆูุงุช ุงุณุชุนูุงู PSR-7 ูุจุงุดุฑุฉ (ุนูู ุณุจูู ุงููุซุงู ุ Symfony <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ูุนูู</a> ) ุ ูุณูููู ูุฐุง ูุจุฑุฑูุง ุชูุงููุง.  ูู ุญุงูุงุช ุฃุฎุฑู ุ ูุตุจุญ PSR-7 ุฑุงุจุทูุง ุฅุถุงูููุง ูุจู ุชุญููู ุงูุทูุจ ุฅูู ูุง ูููู ุฃู ูุนูู ุจู ุงูุชุทุจูู ุงูุฎุงุต ุจู.  ุฏุนูุง ูุฒูู ูุฐุง ุงูุฑุงุจุท ุงููุณูุท ูููุธุฑ ุฅูู ุงููุชุงุฆุฌ ูุฑุฉ ุฃุฎุฑู: <br><br><img src="https://habrastorage.org/webt/jv/mr/p5/jvmrp567zwsjhft2ocuimx8jk1q.png"><br><br>  ูุงู ุงูุจุฑูุงูุฌ ุงููุตู ููุงุฎุชุจุงุฑ ุณููุงู ููุบุงูุฉ ุ ูุฐุง ุชูููุช ูู ุงุณุชุจุนุงุฏ ุญุตุฉ ูุจูุฑุฉ ูู ุงูุฃุฏุงุก - + 17ูช ููุงุฑูุฉู ุจู PHP ุงูุฎุงูุต (ุฃุฐูุฑ ุฃู ุงูุชุญููู ุงููุณุจู ูููุญ + 10ูช ุนูู ููุณ ุงูุจุฑูุงูุฌ ุงููุตู). <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุฑูู ุงูุฏูููุฉ ูู RoadRunner </h3><br>  ุจุดูู ุนุงู ุ ูุนุฏ ุงุณุชุฎุฏุงู RoadRunner ุชุบููุฑูุง ุฃูุซุฑ ุฎุทูุฑุฉ ูู ูุฌุฑุฏ ุชุถููู ุงูุชุญููู ุงููุณุจู ุ ูุจุงูุชุงูู ูุฅู ุงููุฑูู ุงูุฏูููุฉ ููุง ุฃูุซุฑ ุฃูููุฉ. <br><br> -, RoadRunner,  ,  PHP-   ,   ,     ,       :    ,   ,      . <br><br> -,      RoadRunner ,     ยซยป    โ      .         /   RoadRunner  ; ,      ,        ,            ,  -   . <br><br> -,        endpoint', , ,       RoadRunner.       . <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br> ,    ยซยป PHP,   ,     preload       RoadRunner. <br><br> PHP  ยซยป   (PHP-FPM, Apache mod_php  )       .       -    ,       .  ,         ,     preload    JIT. <br><br>   ,    , ,       RoadRunner,         . <br><br>    ,      (:           ): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> PHP 7.2 โ 845 RPS; <br></li><li style=";text-align:right;direction:rtl"> PHP 7.4 โ 931 RPS; <br></li><li style=";text-align:right;direction:rtl"> RoadRunner   โ 987 RPS; <br></li><li style=";text-align:right;direction:rtl"> PHP 7.4 + preload โ 1030 RPS; <br></li><li style=";text-align:right;direction:rtl"> RoadRunner   โ 1089 RPS. <br></li></ul><br>   Badoo      PHP 7.4       ,         (    ). <br><br> RoadRunner      ,   ,         ,      ,   . <br><br>  ุดูุฑุง ูุงูุชูุงููู! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar472528/">https://habr.com/ru/post/ar472528/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar472516/index.html">Yandex.Translator ููุธุงู Linux ุนูู Python + GTK3</a></li>
<li><a href="../ar472520/index.html">ูุฌููุนุงุช ุงูุชุฏุฑูุจ ูู ุงูููุฏูู - ุจุณุฑุนุฉ ูููุงุกุฉ</a></li>
<li><a href="../ar472522/index.html">ูุชุงุจ "ุงูุชุทููุฑ ุงููุณุชูุฑ ู API. ุงููุฑุงุฑุงุช ุงูุตุญูุญุฉ ูู ุงููุดูุฏ ุงูุชูููููุฌู ุงููุชุบูุฑ "</a></li>
<li><a href="../ar472524/index.html">ุงููุถุงุก ุ ุดุจูุงุช ูุชุฎุทูุทุงุช</a></li>
<li><a href="../ar472526/index.html">ุงุฑุชูุงุน ุซูุงุซู ุงูุฃุจุนุงุฏ: ุชู ุฅูุดุงุก ูุฑูุจ ุฌุฏูุฏ ูููุถุงุก ุ ููุง ููู ูุชูุฉ ุงูุฃุฌุฒุงุก ุจูุณุจุฉ 20ูช</a></li>
<li><a href="../ar472530/index.html">ุงููุฑุงูุจุฉ ุจุงูููุฏูู ูู ููุณูู: ุงููุงูุน ุงูุญุงูู ูุงูุขูุงู</a></li>
<li><a href="../ar472532/index.html">ุฑุงุจุท ูุณุงุนุฏุฉ ูููุฏ ูููุณูููู</a></li>
<li><a href="../ar472534/index.html">ูุณุชููุธูู! (N.-F. ุงูุฑูุงูุฉ ุ ุงูุฌุฒุก 1 ูู 2)</a></li>
<li><a href="../ar472536/index.html">Smart IdReader SDK - ุชุถููู ุงูุงุนุชุฑุงู ูู ุงููุดุงุฑูุน ูู ุจูุซูู ู PHP</a></li>
<li><a href="../ar472540/index.html">ูุณุชููุธูู! (n. - ูุตุฉ ุ ุงูุฌุฒุก 2 ุ ูุงูุฃุฎูุฑ)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>