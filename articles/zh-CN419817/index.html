<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ² ğŸ‘¡ ğŸ› åœ¨Kubernetesä¸­å¯åŠ¨RabbitMQé›†ç¾¤ ğŸ‡ ğŸ˜‰ ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨åº”ç”¨ç¨‹åºçš„å¾®æœåŠ¡ç»„ç»‡çš„æƒ…å†µä¸‹ï¼Œå¤§é‡å·¥ä½œå–å†³äºå¾®æœåŠ¡çš„é›†æˆè¿æ¥æœºåˆ¶ã€‚ è€Œä¸”ï¼Œè¿™ç§é›†æˆåº”è¯¥æ˜¯å®¹é”™çš„ï¼Œå¹¶ä¸”å…·æœ‰é«˜åº¦çš„å¯ç”¨æ€§ã€‚ 

 åœ¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Kafkaï¼ŒgRPCå’ŒRabbitMQçš„é›†æˆã€‚ 

 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†äº«æˆ‘ä»¬çš„RabbitMQé›†ç¾¤ç»éªŒï¼Œè¯¥é›†ç¾¤çš„èŠ‚ç‚¹æ‰˜ç®¡åœ¨Kubernete...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨Kubernetesä¸­å¯åŠ¨RabbitMQé›†ç¾¤</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/419817/"> åœ¨åº”ç”¨ç¨‹åºçš„å¾®æœåŠ¡ç»„ç»‡çš„æƒ…å†µä¸‹ï¼Œå¤§é‡å·¥ä½œå–å†³äºå¾®æœåŠ¡çš„é›†æˆè¿æ¥æœºåˆ¶ã€‚ è€Œä¸”ï¼Œè¿™ç§é›†æˆåº”è¯¥æ˜¯å®¹é”™çš„ï¼Œå¹¶ä¸”å…·æœ‰é«˜åº¦çš„å¯ç”¨æ€§ã€‚ <br><br> åœ¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Kafkaï¼ŒgRPCå’ŒRabbitMQçš„é›†æˆã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†äº«æˆ‘ä»¬çš„RabbitMQé›†ç¾¤ç»éªŒï¼Œè¯¥é›†ç¾¤çš„èŠ‚ç‚¹æ‰˜ç®¡åœ¨Kubernetesä¸Šã€‚ <br><br><img src="https://habrastorage.org/webt/dx/ll/-h/dxll-hzomoco0zcfp7esju8pena.jpeg" alt="å›¾ç‰‡"><br><br> åœ¨RabbitMQç‰ˆæœ¬3.7ä¹‹å‰ï¼Œå°†å…¶ç¾¤é›†åœ¨K8Sä¸­å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œå› ä¸ºå®ƒæœ‰å¾ˆå¤šæŠ€å·§ï¼Œè€Œä¸”è§£å†³æ–¹æ¡ˆä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚ åœ¨ç‰ˆæœ¬3.6ä¸­ï¼Œä½¿ç”¨äº†RabbitMQç¤¾åŒºçš„è‡ªåŠ¨é›†ç¾¤æ’ä»¶ã€‚ å¹¶åœ¨3.7ç‰ˆä¸­å‡ºç°äº†Kubernetes Peer Discovery Backendã€‚ å®ƒæ˜¯ç”±RabbitMQçš„åŸºæœ¬äº¤ä»˜ä¸­çš„æ’ä»¶å†…ç½®çš„ï¼Œä¸éœ€è¦å•ç‹¬çš„ç»„è£…å’Œå®‰è£…ã€‚ <br><br> åœ¨è¯„è®ºæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…æ—¶ï¼Œæˆ‘ä»¬å°†æè¿°æœ€ç»ˆé…ç½®çš„æ•´ä½“ã€‚ <br><a name="habracut"></a><br><h2> ç†è®ºä¸Š </h2><br> è¯¥æ’ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨githubä¸Š</a>æœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å­˜å‚¨åº“</a> ï¼Œå…¶ä¸­æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ä¸ªåŸºæœ¬ç”¨æ³•ç¤ºä¾‹</a> ã€‚ <br> æ­¤ç¤ºä¾‹ä¸é€‚ç”¨äºç”Ÿäº§ï¼Œå…¶è¯´æ˜ä¸­å·²æ˜ç¡®æŒ‡å‡ºï¼Œæ­¤å¤–ï¼Œå…¶ä¸­çš„æŸäº›è®¾ç½®ä¸äº§å“ä¸­ä½¿ç”¨çš„é€»è¾‘ç›¸åã€‚ å¦å¤–ï¼Œåœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œæ ¹æœ¬æ²¡æœ‰æåˆ°å­˜å‚¨çš„æŒä¹…æ€§ï¼Œå› æ­¤åœ¨ä»»ä½•ç´§æ€¥æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„é›†ç¾¤éƒ½ä¼šå˜å¾—æ¯«æ— ç”Ÿæ°”ã€‚ <br><br><h2> åœ¨å®è·µä¸­ </h2><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰æ‚¨æ‚¨è‡ªå·±é¢ä¸´çš„æŒ‘æˆ˜ä»¥åŠå¦‚ä½•å®‰è£…å’Œé…ç½®RabbitMQã€‚ <br><br> è®©æˆ‘ä»¬æè¿°åœ¨K8ä¸­ä½œä¸ºæœåŠ¡çš„RabbitMQå„ä¸ªéƒ¨åˆ†çš„é…ç½®ã€‚ æˆ‘ä»¬å°†ç«‹å³è¯´æ˜ï¼Œæˆ‘ä»¬åœ¨K8sä¸­å°†RabbitMQå®‰è£…ä¸ºStatefulSetã€‚ åœ¨K8sç¾¤é›†çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒRabbitMQçš„ä¸€ä¸ªå®ä¾‹å°†å§‹ç»ˆèµ·ä½œç”¨ï¼ˆä¼ ç»Ÿç¾¤é›†é…ç½®ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚ æˆ‘ä»¬è¿˜å°†åœ¨K8sä¸­å®‰è£…RabbitMQæ§åˆ¶é¢æ¿ï¼Œå¹¶å…è®¸åœ¨é›†ç¾¤å¤–éƒ¨è®¿é—®è¯¥é¢æ¿ã€‚ <br><br><h3> æƒåˆ©å’Œè§’è‰²ï¼š </h3><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_rbac.yaml</b> <div class="spoiler_text"><pre><code class="plaintext hljs">--- apiVersion: v1 kind: ServiceAccount metadata: name: rabbitmq --- kind: Role apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: endpoint-reader rules: - apiGroups: [""] resources: ["endpoints"] verbs: ["get"] --- kind: RoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: endpoint-reader subjects: - kind: ServiceAccount name: rabbitmq roleRef: apiGroup: rbac.authorization.k8s.io kind: Role name: endpoint-reader</code> </pre> </div></div><br>  RabbitMQçš„è®¿é—®æƒé™å®Œå…¨æ¥è‡ªç¤ºä¾‹ï¼Œè€Œæ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ æˆ‘ä»¬ä¸ºç¾¤é›†åˆ›å»ºä¸€ä¸ªServiceAccountï¼Œå¹¶å°†å…¶æˆäºˆEndpoints K8sçš„è¯»å–æƒé™ã€‚ <br><br><h3> æ°¸ä¹…å­˜å‚¨ï¼š </h3><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_pv.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">kind: PersistentVolume apiVersion: v1 metadata: name: rabbitmq-data-sigma labels: type: local annotations: volume.alpha.kubernetes.io/storage-class: rabbitmq-data-sigma spec: storageClassName: rabbitmq-data-sigma capacity: storage: 10Gi accessModes: - ReadWriteMany persistentVolumeReclaimPolicy: Recycle hostPath: path: "/opt/rabbitmq-data-sigma"</code> </pre> </div></div><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æœ€ç®€å•çš„æƒ…å†µä½œä¸ºæŒä¹…æ€§å­˜å‚¨-hostPathï¼ˆæ¯ä¸ªK8sèŠ‚ç‚¹ä¸Šçš„å¸¸è§„æ–‡ä»¶å¤¹ï¼‰ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨K8sæ”¯æŒçš„å¤šç§æŒä¹…å·ä¸­çš„ä»»ä½•ä¸€ç§ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_pvc.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">kind: PersistentVolumeClaim apiVersion: v1 metadata: name: rabbitmq-data spec: storageClassName: rabbitmq-data-sigma accessModes: - ReadWriteMany resources: requests: storage: 10Gi</code> </pre> </div></div><br> åœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„å·ä¸Šåˆ›å»ºå·å£°æ˜ã€‚ ç„¶åï¼Œæ­¤Claimå°†åœ¨StatefulSetä¸­ç”¨ä½œæŒä¹…æ•°æ®å­˜å‚¨ã€‚ <br><br><h3> æœåŠ¡é¡¹ç›®ï¼š </h3><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_service.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">kind: Service apiVersion: v1 metadata: name: rabbitmq-internal labels: app: rabbitmq spec: clusterIP: None ports: - name: http protocol: TCP port: 15672 - name: amqp protocol: TCP port: 5672 selector: app: rabbitmq</code> </pre> </div></div><br> æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå†…éƒ¨çš„headlessæœåŠ¡ï¼ŒPeer Discoveryæ’ä»¶å°†é€šè¿‡è¯¥æœåŠ¡è¿è¡Œã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_service_ext.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">kind: Service apiVersion: v1 metadata: name: rabbitmq labels: app: rabbitmq type: LoadBalancer spec: type: NodePort ports: - name: http protocol: TCP port: 15672 targetPort: 15672 nodePort: 31673 - name: amqp protocol: TCP port: 5672 targetPort: 5672 nodePort: 30673 selector: app: rabbitmq</code> </pre> </div></div><br> ä¸ºäº†ä½¿K8sä¸­çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸æˆ‘ä»¬çš„é›†ç¾¤ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å¹³è¡¡å™¨æœåŠ¡ã€‚ <br><br> ç”±äºæˆ‘ä»¬éœ€è¦è®¿é—®K8ä¹‹å¤–çš„RabbitMQé›†ç¾¤ï¼Œå› æ­¤æˆ‘ä»¬å°†éå†NodePortã€‚ å½“è®¿é—®ç«¯å£31673å’Œ30673ä¸Šçš„K8sé›†ç¾¤çš„ä»»ä½•èŠ‚ç‚¹æ—¶ï¼ŒRabbitMQå°†å¯ç”¨ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¯¹æ­¤æ²¡æœ‰å¤ªå¤§éœ€æ±‚ã€‚  RabbitMQç®¡ç†é¢æ¿çš„å¯ç”¨æ€§é—®é¢˜ã€‚ <br><br> åœ¨K8sä¸­ä½¿ç”¨NodePortç±»å‹åˆ›å»ºæœåŠ¡æ—¶ï¼Œä¹Ÿä¼šéšå¼åˆ›å»ºClusterIPç±»å‹çš„æœåŠ¡æ¥ä¸ºå…¶æä¾›æœåŠ¡ã€‚ å› æ­¤ï¼Œéœ€è¦ä¸RabbitMQä¸€èµ·ä½¿ç”¨çš„K8ä¸­çš„åº”ç”¨ç¨‹åºå°†èƒ½å¤Ÿé€šè¿‡<i>amqp</i>è®¿é—®ç¾¤é›†<i>ï¼š// Rabbitmqï¼š5672</i> <br><br><h3> é…ç½®ï¼š </h3><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_configmap.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">apiVersion: v1 kind: ConfigMap metadata: name: rabbitmq-config data: enabled_plugins: | [rabbitmq_management,rabbitmq_peer_discovery_k8s]. rabbitmq.conf: | cluster_formation.peer_discovery_backend = rabbit_peer_discovery_k8s cluster_formation.k8s.host = kubernetes.default.svc.cluster.local cluster_formation.k8s.port = 443 ### cluster_formation.k8s.address_type = ip cluster_formation.k8s.address_type = hostname cluster_formation.node_cleanup.interval = 10 cluster_formation.node_cleanup.only_log_warning = true cluster_partition_handling = autoheal queue_master_locator=min-masters cluster_formation.randomized_startup_delay_range.min = 0 cluster_formation.randomized_startup_delay_range.max = 2 cluster_formation.k8s.service_name = rabbitmq-internal cluster_formation.k8s.hostname_suffix = .rabbitmq-internal.our-namespace.svc.cluster.local</code> </pre> </div></div><br> æˆ‘ä»¬åˆ›å»ºRabbitMQé…ç½®æ–‡ä»¶ã€‚ ä¸»è¦é­”æœ¯ã€‚ <br><br><pre> <code class="plaintext hljs">enabled_plugins: | [rabbitmq_management,rabbitmq_peer_discovery_k8s].</code> </pre><br> å°†å¿…è¦çš„æ’ä»¶æ·»åŠ åˆ°å…è®¸ä¸‹è½½çš„æ’ä»¶ä¸­ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨K8Sä¸­ä½¿ç”¨è‡ªåŠ¨å¯¹ç­‰å‘ç°ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_formation.peer_discovery_backend = rabbit_peer_discovery_k8s</code> </pre><br> æˆ‘ä»¬å…¬å¼€äº†å¿…è¦çš„æ’ä»¶ä½œä¸ºå¯¹ç­‰å‘ç°çš„åç«¯ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_formation.k8s.host = kubernetes.default.svc.cluster.local cluster_formation.k8s.port = 443</code> </pre><br> æŒ‡å®šå¯ä»¥è®¿é—®kubernetes apiserverçš„åœ°å€å’Œç«¯å£ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥ç›´æ¥æŒ‡å®šipåœ°å€ï¼Œä½†æ˜¯è¿™æ ·åšä¼šæ›´æ¼‚äº®ã€‚ <br><br> åœ¨åç§°ç©ºé—´é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šå¸¸ä¼šä½¿ç”¨åç§°kubernetesåˆ›å»ºæœåŠ¡ï¼Œè¯¥æœåŠ¡å°†å¯¼è‡´k8-apiserverã€‚ åœ¨ä¸åŒçš„K8Så®‰è£…é€‰é¡¹ä¸­ï¼Œåç§°ç©ºé—´ï¼ŒæœåŠ¡åç§°å’Œç«¯å£å¯èƒ½ä¸åŒã€‚ å¦‚æœç‰¹å®šå®‰è£…ä¸­çš„æŸäº›å†…å®¹ä¸åŒï¼Œåˆ™éœ€è¦ç›¸åº”åœ°å¯¹å…¶è¿›è¡Œä¿®å¤ã€‚ <br><br> ä¾‹å¦‚ï¼Œæˆ‘ä»¬é¢ä¸´è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œåœ¨æŸäº›ç¾¤é›†ä¸­ï¼Œè¯¥æœåŠ¡ä½äºç«¯å£443ä¸Šï¼Œè€Œåœ¨æŸäº›ç¾¤é›†ä¸­ï¼Œè¯¥æœåŠ¡ä½äº6443ä¸Šã€‚å¯ä»¥ç†è§£ï¼ŒRabbitMQå¯åŠ¨æ—¥å¿—ä¸­å‡ºç°äº†é—®é¢˜ï¼Œæ­¤å¤„çš„åˆ°æ­¤åœ°å€çš„è¿æ¥æ—¶é—´æ¸…æ¥šåœ°çªå‡ºæ˜¾ç¤ºäº†ã€‚ <br><br><pre> <code class="plaintext hljs">### cluster_formation.k8s.address_type = ip cluster_formation.k8s.address_type = hostname</code> </pre><br> é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç¤ºä¾‹é€šè¿‡IPåœ°å€æŒ‡å®šRabbitMQé›†ç¾¤èŠ‚ç‚¹çš„åœ°å€ç±»å‹ã€‚ ä½†æ˜¯ï¼Œå½“æ‚¨é‡æ–°å¯åŠ¨Podæ—¶ï¼Œå®ƒæ¯æ¬¡éƒ½ä¼šè·å¾—ä¸€ä¸ªæ–°IPã€‚ æƒŠå–œï¼ é›†ç¾¤å¿«è¦æ­»äº†ã€‚ <br><br> å°†åœ°å€æ›´æ”¹ä¸ºä¸»æœºåã€‚  StatefulSetä¿è¯äº†ä¸»æœºååœ¨æ•´ä¸ªStatefulSetç”Ÿå‘½å‘¨æœŸå†…çš„ä¸å˜æ€§ï¼Œè¿™å®Œå…¨é€‚åˆæˆ‘ä»¬ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_formation.node_cleanup.interval = 10 cluster_formation.node_cleanup.only_log_warning = true</code> </pre><br> ç”±äºå½“æˆ‘ä»¬ä¸¢å¤±ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬å‡è®¾å®ƒæ—©æ™šä¼šæ¢å¤ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡ä¸€ç¾¤æ— æ³•è®¿é—®çš„èŠ‚ç‚¹ç¦ç”¨è‡ªåˆ é™¤ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹ä¸€æ—¦è¿”å›è”æœºçŠ¶æ€ï¼Œå®ƒå°†ç«‹å³è¿›å…¥ç¾¤é›†è€Œä¸ä¼šä¸¢å¤±å…¶å…ˆå‰çŠ¶æ€ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_partition_handling = autoheal</code> </pre> <br> æ­¤å‚æ•°ç¡®å®šåœ¨ä»²è£ä¸¢å¤±çš„æƒ…å†µä¸‹ç¾¤é›†çš„æ“ä½œã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨åªéœ€è¦é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³æ­¤ä¸»é¢˜</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£ï¼Œ</a>å¹¶è‡ªå·±äº†è§£æ›´æ¥è¿‘ç‰¹å®šç”¨ä¾‹çš„å†…å®¹ã€‚ <br><br><pre> <code class="plaintext hljs">queue_master_locator=min-masters</code> </pre> <br> ç¡®å®šæ–°é˜Ÿåˆ—çš„å‘å¯¼é€‰æ‹©ã€‚ ä½¿ç”¨æ­¤è®¾ç½®ï¼Œå‘å¯¼å°†é€‰æ‹©é˜Ÿåˆ—æ•°é‡æœ€å°‘çš„èŠ‚ç‚¹ï¼Œå› æ­¤é˜Ÿåˆ—å°†åœ¨ç¾¤é›†èŠ‚ç‚¹ä¹‹é—´å¹³å‡åˆ†é…ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_formation.k8s.service_name = rabbitmq-internal</code> </pre> <br> æˆ‘ä»¬å‘½åæ— å¤´K8sæœåŠ¡ï¼ˆç”±æˆ‘ä»¬ä¹‹å‰åˆ›å»ºï¼‰ï¼ŒRabbitMQèŠ‚ç‚¹å°†é€šè¿‡è¯¥æœåŠ¡å½¼æ­¤é€šä¿¡ã€‚ <br><br><pre> <code class="plaintext hljs">cluster_formation.k8s.hostname_suffix = .rabbitmq-internal.our-namespace.svc.cluster.local</code> </pre> <br> åœ¨ç¾¤é›†ä¸­å¯»å€çš„é‡è¦äº‹é¡¹æ˜¯ä¸»æœºåã€‚  K8ç‚‰è†›çš„FQDNç”±çŸ­åç§°ï¼ˆrabbitmq-0ï¼Œrabbitmq-1ï¼‰+åç¼€ï¼ˆåŸŸéƒ¨åˆ†ï¼‰ç»„æˆã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å‡ºè¿™ä¸ªåç¼€ã€‚ åœ¨K8Sä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒ<b>ã€‚&lt;æœåŠ¡åç§°&gt;ã€‚&lt;åç§°ç©ºé—´åç§°&gt; .svc.cluster.local</b> <br><br>  kube-dnså¯ä»¥å°†æ ¼å¼RabbitMq-0.rabbitmq-internal.our-namespace.svc.cluster.localè§£æä¸ºç‰¹å®šå®¹å™¨çš„IPåœ°å€ï¼Œè€Œæ— éœ€ä»»ä½•å…¶ä»–é…ç½®ï¼Œè¿™ä½¿é€šè¿‡ä¸»æœºåè¿›è¡Œç¾¤é›†çš„æ‰€æœ‰é­”æœ¯æˆä¸ºå¯èƒ½ã€‚ <br><br><h3>  StatefulSet RabbitMQé…ç½®ï¼š </h3><br><div class="spoiler">  <b class="spoiler_title">rabbitmq_statefulset.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: rabbitmq spec: serviceName: rabbitmq-internal replicas: 3 template: metadata: labels: app: rabbitmq annotations: scheduler.alpha.kubernetes.io/affinity: &gt; { "podAntiAffinity": { "requiredDuringSchedulingIgnoredDuringExecution": [{ "labelSelector": { "matchExpressions": [{ "key": "app", "operator": "In", "values": ["rabbitmq"] }] }, "topologyKey": "kubernetes.io/hostname" }] } } spec: serviceAccountName: rabbitmq terminationGracePeriodSeconds: 10 containers: - name: rabbitmq-k8s image: rabbitmq:3.7 volumeMounts: - name: config-volume mountPath: /etc/rabbitmq - name: rabbitmq-data mountPath: /var/lib/rabbitmq/mnesia ports: - name: http protocol: TCP containerPort: 15672 - name: amqp protocol: TCP containerPort: 5672 livenessProbe: exec: command: ["rabbitmqctl", "status"] initialDelaySeconds: 60 periodSeconds: 10 timeoutSeconds: 10 readinessProbe: exec: command: ["rabbitmqctl", "status"] initialDelaySeconds: 10 periodSeconds: 10 timeoutSeconds: 10 imagePullPolicy: Always env: - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP - name: HOSTNAME valueFrom: fieldRef: fieldPath: metadata.name - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace - name: RABBITMQ_USE_LONGNAME value: "true" - name: RABBITMQ_NODENAME value: "rabbit@$(HOSTNAME).rabbitmq-internal.$(NAMESPACE).svc.cluster.local" - name: K8S_SERVICE_NAME value: "rabbitmq-internal" - name: RABBITMQ_ERLANG_COOKIE value: "mycookie" volumes: - name: config-volume configMap: name: rabbitmq-config items: - key: rabbitmq.conf path: rabbitmq.conf - key: enabled_plugins path: enabled_plugins - name: rabbitmq-data persistentVolumeClaim: claimName: rabbitmq-data</code> </pre> </div></div><br> å®é™…ä¸Šï¼ŒStatefulSetæœ¬èº«ã€‚ æˆ‘ä»¬æ³¨æ„åˆ°æœ‰è¶£çš„è§‚ç‚¹ã€‚ <br><br><pre> <code class="plaintext hljs">serviceName: rabbitmq-internal</code> </pre> <br> æˆ‘ä»¬åœ¨StatefulSetä¸­å†™ä¸‹Podé€šè¿‡å…¶è¿›è¡Œé€šä¿¡çš„æ— å¤´æœåŠ¡çš„åç§°ã€‚ <br><br><pre> <code class="plaintext hljs">replicas: 3</code> </pre> <br> è®¾ç½®é›†ç¾¤ä¸­çš„å‰¯æœ¬æ•°ã€‚ åœ¨æˆ‘ä»¬å›½å®¶ï¼Œå®ƒç­‰äºK8ä¸ªå·¥ä½œèŠ‚ç‚¹çš„æ•°é‡ã€‚ <br><br><pre> <code class="plaintext hljs">annotations: scheduler.alpha.kubernetes.io/affinity: &gt; { "podAntiAffinity": { "requiredDuringSchedulingIgnoredDuringExecution": [{ "labelSelector": { "matchExpressions": [{ "key": "app", "operator": "In", "values": ["rabbitmq"] }] }, "topologyKey": "kubernetes.io/hostname" }] } }</code> </pre> <br> å½“K8sèŠ‚ç‚¹ä¹‹ä¸€æ‰è½æ—¶ï¼Œæœ‰çŠ¶æ€é›†è¯•å›¾ä¿ç•™é›†åˆä¸­å®ä¾‹çš„æ•°é‡ï¼Œå› æ­¤ï¼Œå®ƒåœ¨åŒä¸€K8sèŠ‚ç‚¹ä¸Šåˆ›å»ºäº†å¤šä¸ªç‚‰åºŠã€‚ è¿™ç§è¡Œä¸ºæ˜¯å®Œå…¨ä¸å¸Œæœ›çš„ï¼Œå¹¶ä¸”åŸåˆ™ä¸Šæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä¸ºæ¥è‡ªæœ‰çŠ¶æ€é›†çš„ç‚‰åºŠé›†åˆ¶å®šäº†åäº²å’Œæ€§è§„åˆ™ã€‚ æˆ‘ä»¬å°†è§„åˆ™è®¾ç½®ä¸ºä¸¥æ ¼ï¼ˆå¿…éœ€ï¼‰ï¼Œä»¥ä¾¿åœ¨è®¡åˆ’åŠèˆ±æ—¶kube-schedulerä¸ä¼šç ´åè¯¥è§„åˆ™ã€‚ <br><br> æœ¬è´¨ä¸Šå¾ˆç®€å•ï¼šè°ƒåº¦ç¨‹åºç¦æ­¢åœ¨<i>åº”ç”¨ç¨‹åº</i>å†…ï¼ˆåç§°ç©ºé—´å†…ï¼‰æ”¾ç½®å¤šä¸ªPod <i>ï¼š</i>æ¯ä¸ªèŠ‚ç‚¹ä¸Šæœ‰<i>Rabbitmqæ ‡è®°</i> ã€‚ æˆ‘ä»¬é€šè¿‡<i>kubernetes.io/hostname</i>æ ‡ç­¾çš„å€¼æ¥åŒºåˆ†<i>èŠ‚ç‚¹</i> ã€‚ ç°åœ¨ï¼Œå¦‚æœç”±äºæŸäº›åŸå› ï¼Œå·¥ä½œä¸­çš„K8SèŠ‚ç‚¹çš„æ•°é‡å°‘äºStatefulSetä¸­æ‰€éœ€çš„å‰¯æœ¬æ•°ï¼Œåˆ™åªæœ‰åœ¨ç©ºé—²èŠ‚ç‚¹å†æ¬¡å‡ºç°ä¹‹å‰ï¼Œæ‰ä¼šåˆ›å»ºæ–°å‰¯æœ¬ã€‚ <br><br><pre> <code class="plaintext hljs">serviceAccountName: rabbitmq</code> </pre> <br> æˆ‘ä»¬æ³¨å†ŒServiceAccountï¼Œæˆ‘ä»¬çš„Podåœ¨è¯¥å¸æˆ·ä¸‹å·¥ä½œã€‚ <br><br><pre> <code class="plaintext hljs">image: rabbitmq:3.7</code> </pre> <br>  RabbitMQçš„å›¾åƒæ˜¯å®Œå…¨æ ‡å‡†çš„ï¼Œå¹¶ä¸”æ˜¯ä»docker hubè·å¾—çš„ï¼›å®ƒä¸éœ€è¦ä»»ä½•é‡å»ºå’Œæ–‡ä»¶ä¿®è®¢ã€‚ <br><br><pre> <code class="plaintext hljs">- name: rabbitmq-data mountPath: /var/lib/rabbitmq/mnesia</code> </pre><br> æ¥è‡ªRabbitMQçš„æŒä¹…æ•°æ®å­˜å‚¨åœ¨/ var / lib / rabbitmq / mnesiaä¸­ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æŒä¹…å·å£°æ˜å®‰è£…åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œä»¥ä¾¿åœ¨é‡æ–°å¯åŠ¨ç‚‰åºŠ/èŠ‚ç‚¹æˆ–ä»€è‡³æ•´ä¸ªStatefulSetæ—¶ï¼Œæ•°æ®ï¼ˆåŒ…æ‹¬æœ‰å…³å·²ç»„è£…ç¾¤é›†çš„æ‰€æœ‰æœåŠ¡å’Œç”¨æˆ·æ•°æ®ï¼‰éƒ½æ˜¯å®‰å…¨æ— å®³çš„ã€‚ æœ‰ä¸€äº›ç¤ºä¾‹ä½¿æ•´ä¸ª/ var / lib / rabbitmq /æ–‡ä»¶å¤¹å…·æœ‰æŒä¹…æ€§ã€‚ æˆ‘ä»¬å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œè¿™ä¸æ˜¯æœ€å¥½çš„ä¸»æ„ï¼Œå› ä¸ºä¸æ­¤åŒæ—¶ï¼ŒRabbité…ç½®æ‰€è®¾ç½®çš„æ‰€æœ‰ä¿¡æ¯éƒ½å°†è¢«è®°ä½ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æ›´æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æŸäº›å†…å®¹ï¼Œæ‚¨éœ€è¦æ¸…é™¤æŒä¹…æ€§å­˜å‚¨ï¼Œè¿™åœ¨æ“ä½œä¸­éå¸¸ä¸æ–¹ä¾¿ã€‚ <br><br><pre> <code class="plaintext hljs"> - name: HOSTNAME valueFrom: fieldRef: fieldPath: metadata.name - name: NAMESPACE valueFrom: fieldRef: fieldPath: metadata.namespace - name: RABBITMQ_USE_LONGNAME value: "true" - name: RABBITMQ_NODENAME value: "rabbit@$(HOSTNAME).rabbitmq-internal.$(NAMESPACE).svc.cluster.local"</code> </pre><br> æœ‰äº†è¿™ç»„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬é¦–å…ˆå‘Šè¯‰RabbitMQä½¿ç”¨FQDNåç§°ä½œä¸ºé›†ç¾¤æˆå‘˜çš„æ ‡è¯†ç¬¦ï¼Œå…¶æ¬¡ï¼Œæˆ‘ä»¬è®¾ç½®è¯¥åç§°çš„æ ¼å¼ã€‚ è§£æé…ç½®æ—¶ï¼Œå‰é¢å·²ç»æè¿°äº†æ ¼å¼ã€‚ <br><br><pre> <code class="plaintext hljs">- name: K8S_SERVICE_NAME value: "rabbitmq-internal"</code> </pre> <br> é›†ç¾¤æˆå‘˜ä¹‹é—´è¿›è¡Œé€šä¿¡çš„æ— å¤´æœåŠ¡çš„åç§°ã€‚ <br><br><pre> <code class="plaintext hljs">- name: RABBITMQ_ERLANG_COOKIE value: "mycookie"</code> </pre> <br>  Erlang Cookieçš„å†…å®¹åœ¨é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šéƒ½åº”è¯¥ç›¸åŒï¼Œæ‚¨éœ€è¦æ³¨å†Œè‡ªå·±çš„å€¼ã€‚ å…·æœ‰å…¶ä»–Cookieçš„èŠ‚ç‚¹æ— æ³•è¿›å…¥é›†ç¾¤ã€‚ <br><br><pre> <code class="plaintext hljs">volumes: - name: rabbitmq-data persistentVolumeClaim: claimName: rabbitmq-data</code> </pre> <br> ä»å…ˆå‰åˆ›å»ºçš„â€œæŒä¹…å·å£°æ˜â€ä¸­å®šä¹‰æ˜ å°„çš„å·ã€‚ <br><br> è¿™å°±æ˜¯æˆ‘ä»¬åœ¨K8sä¸­å®Œæˆè®¾ç½®çš„åœ°æ–¹ã€‚ ç»“æœæ˜¯RabbitMQé›†ç¾¤ï¼Œè¯¥é›†ç¾¤åœ¨èŠ‚ç‚¹ä¹‹é—´å¹³å‡åˆ†é…é˜Ÿåˆ—ï¼Œå¹¶ä¸”å¯ä»¥æŠµæŠ—è¿è¡Œæ—¶ç¯å¢ƒä¸­çš„é—®é¢˜ã€‚ <br><br><img src="https://habrastorage.org/webt/_j/ky/mw/_jkymwmxe7syyjfa7h2idbcxosc.png" alt="å›¾ç‰‡"><br><br> å¦‚æœç¾¤é›†èŠ‚ç‚¹ä¹‹ä¸€ä¸å¯ç”¨ï¼Œåˆ™åŒ…å«åœ¨å…¶ä¸­çš„é˜Ÿåˆ—å°†åœæ­¢è®¿é—®ï¼Œå…¶ä»–æ‰€æœ‰èŠ‚ç‚¹å°†ç»§ç»­å·¥ä½œã€‚ èŠ‚ç‚¹ä¸€æ—¦æ¢å¤è¿è¡Œï¼Œå®ƒå°†è¿”å›é›†ç¾¤ï¼Œå¹¶ä¸”åŸæ¥ä½œä¸ºä¸»èŠ‚ç‚¹çš„é˜Ÿåˆ—å°†å†æ¬¡è¿è¡Œï¼Œå¹¶ä¿ç•™å…¶ä¸­åŒ…å«çš„æ‰€æœ‰æ•°æ®ï¼ˆå½“ç„¶ï¼Œå¦‚æœæŒä¹…æ€§å­˜å‚¨æœªæŸåï¼‰ã€‚ æ‰€æœ‰è¿™äº›è¿‡ç¨‹éƒ½æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œä¸éœ€è¦å¹²é¢„ã€‚ <br><br><h2> å¥–åŠ±ï¼šè‡ªå®šä¹‰HA </h2><br> å…¶ä¸­ä¸€ä¸ªé¡¹ç›®æ˜¯ç»†å¾®å·®åˆ«ã€‚ è¿™äº›è¦æ±‚å®Œå–„äº†é›†ç¾¤ä¸­æ‰€æœ‰æ•°æ®çš„é•œåƒã€‚ è¿™æ˜¯å¿…è¦çš„ï¼Œä»¥ä¾¿åœ¨è‡³å°‘ä¸€ä¸ªç¾¤é›†èŠ‚ç‚¹å¯è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œä»åº”ç”¨ç¨‹åºçš„è§’åº¦æ¥çœ‹ï¼Œä¸€åˆ‡éƒ½å°†ç»§ç»­å·¥ä½œã€‚ æ­¤åˆ»ä¸K8sæ— å…³ï¼Œæˆ‘ä»¬ä»…å°†å…¶æè¿°ä¸ºä¸€ä¸ªå°å‹æ“ä½œæ–¹æ³•ã€‚ <br><br> è¦å¯ç”¨å®Œæ•´çš„HAï¼Œæ‚¨éœ€è¦åœ¨Admin- <i>&gt; Policies</i>é€‰é¡¹å¡ä¸Šçš„RabbitMQä»ªè¡¨æ¿ä¸­åˆ›å»ºä¸€ä¸ªPolicyã€‚ åç§°æ˜¯ä»»æ„çš„ï¼Œæ¨¡å¼ä¸ºç©ºï¼ˆæ‰€æœ‰é˜Ÿåˆ—ï¼‰ï¼Œåœ¨â€œå®šä¹‰â€ä¸­æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼š <i>ha-modeï¼šall</i> ï¼Œ <i>ha-sync-modeï¼šautomatic</i> ã€‚ <br><br><img src="https://habrastorage.org/webt/jz/tn/vu/jztnvu5zygtv56hurbyss1w9ljm.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/_6/in/om/_6inoma38lvluhpaet1g66uus_u.png" alt="å›¾ç‰‡"><br><br> ä¹‹åï¼Œé›†ç¾¤ä¸­åˆ›å»ºçš„æ‰€æœ‰é˜Ÿåˆ—å°†å¤„äºé«˜å¯ç”¨æ€§æ¨¡å¼ï¼šå¦‚æœä¸»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™æ–°å‘å¯¼å°†è‡ªåŠ¨é€‰æ‹©å…¶ä¸­ä¸€ä¸ªä»ç«™ã€‚ å¹¶ä¸”è¿›å…¥é˜Ÿåˆ—çš„æ•°æ®å°†è¢«é•œåƒåˆ°é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ å®é™…ä¸Šï¼Œè¿™æ˜¯å¿…é¡»æ¥æ”¶çš„ã€‚ <br><br><img src="https://habrastorage.org/webt/0v/m3/je/0vm3jem0bi4fqckj8ucmiy5zcxe.png" alt="å›¾ç‰‡"><br><br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>é˜…è¯»æœ‰å…³RabbitMQä¸­çš„HAçš„æ›´å¤šä¿¡æ¯ <br><br><h2> æœ‰ç”¨çš„æ–‡çŒ®ï¼š </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å­˜å‚¨åº“RabbitMQå¯¹ç­‰å‘ç°Kubernetesæ’ä»¶</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">K8Sä¸­RabbitMQéƒ¨ç½²çš„é…ç½®ç¤ºä¾‹</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æè¿°é›†ç¾¤å½¢æˆçš„åŸç†ï¼Œå¯¹ç­‰å‘ç°æœºåˆ¶åŠå…¶æ’ä»¶</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³åŸºäºä¸»æœºåçš„æ­£ç¡®å‘ç°è®¾ç½®çš„å²è¯—è®¨è®º</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RabbitMQé›†ç¾¤æŒ‡å—</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è£‚è„‘èšç±»é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆçš„æè¿°</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RabbitMQçš„é«˜å¯ç”¨æ€§é˜Ÿåˆ—</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é…ç½®ç­–ç•¥</a> </li></ul><br> ç¥ä½ å¥½è¿ï¼ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN419817/">https://habr.com/ru/post/zh-CN419817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN419805/index.html">è¶…çº§å¾®å‹ç¼–è¯‘å™¨-ç°å·²æ¨å‡ºä¿„è¯­</a></li>
<li><a href="../zh-CN419807/index.html">é’å…‰çœ¼-å¦‚ä½•ä¸è‡´ç›²ï¼šè®©æˆ‘ä»¬è°ˆè°ˆæ²»ç–—æ–¹æ³•...</a></li>
<li><a href="../zh-CN419811/index.html">æŸ”æ€§æ˜¾ç¤ºå™¨çš„å‘å±•</a></li>
<li><a href="../zh-CN419813/index.html">Skillboxç½‘ç»œç ”è®¨ä¼šï¼šæ˜ŸæœŸäº”çš„é€‰æ‹©</a></li>
<li><a href="../zh-CN419815/index.html">æˆ‘ä»¬å‰å°å®¹é”™çš„ç§˜è¯€</a></li>
<li><a href="../zh-CN419819/index.html">è¡°è€çš„ç”Ÿç‰©æ ‡å¿—ç‰©ã€‚ é¢æ¿è„†å¼±ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN419823/index.html">ä¸å¯»å¸¸çš„äºŒé‡å”±-å¯†ç çŸ­è¯­å’ŒåŠ©è®°ç¬¦å›¾åƒ</a></li>
<li><a href="../zh-CN419825/index.html">åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æµ‹è¯•å‡ ç§ç±»å‹çš„é©±åŠ¨å™¨çš„æ€§èƒ½</a></li>
<li><a href="../zh-CN419829/index.html">OpenSSHçš„é»˜è®¤å¯†é’¥åŠ å¯†æ€»æ¯”æ²¡æœ‰å¥½</a></li>
<li><a href="../zh-CN419831/index.html">JSçš„å·¥ä½œæ–¹å¼ï¼šè‡ªå®šä¹‰å…ƒç´ </a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>