<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê≠ üåã üôåüèª Patios traseros: una malla de servicios automatizada sobre una infraestructura multi-nube e h√≠brida üåÄ ‚ô†Ô∏è üë©üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pruebe los patios traseros en sus propios grupos: curl https://getbackyards.sh | sh && backyards install -a --run-demo curl https://getbackyards.sh | ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Patios traseros: una malla de servicios automatizada sobre una infraestructura multi-nube e h√≠brida</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/479742/"><img src="https://habrastorage.org/getpro/habr/post_images/83b/36e/e0b/83b36ee0bc8ba785116ec27befe716bc.png"><br><br><blockquote> Pruebe los patios traseros en sus propios grupos: <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code>  <code>curl https://getbackyards.sh | sh &amp;&amp; backyards install -a --run-demo</code> .  Si est√° interesado, consulte los <a href="https://banzaicloud.com/blog/backyards-release-1-0/">detalles de la √∫ltima versi√≥n</a> . </blockquote><br>  En junio, <a href="https://banzaicloud.com/blog/istio-the-easy-way/">presentamos Backyards</a> , una <b>"malla de servicio" automatizada</b> sobre nuestro <a href="https://github.com/cloud/istio-operator">operador Istio</a> .  Simplifica enormemente la gesti√≥n de la malla de servicios en una infraestructura multi-nube e h√≠brida.  Backyards est√° integrado en <b>la plataforma de gesti√≥n de contenedores <a href="https://github.com/banzaicloud/pipeline">Pipeline</a></b> en Banzai Cloud, pero tambi√©n est√° disponible como un producto <b>independiente</b> .  Por supuesto, la integraci√≥n con Pipeline ofrece muchos beneficios espec√≠ficos (como la <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">administraci√≥n de aplicaciones en varias nubes</a> ), pero Backyards funciona en cualquier instalaci√≥n de Kubernetes. <br><a name="habracut"></a><br>  En el <a href="https://banzaicloud.com/blog/istio-the-easy-way/">anuncio de Backyards,</a> discutimos algunas de las funciones principales: crear una malla de servicio con unos pocos clics, monitorear aplicaciones a trav√©s de una representaci√≥n gr√°fica √∫nica y administrar funciones Istio desde una interfaz de usuario conveniente.  Luego mencionamos que la plataforma es capaz de administrar redes de servicios de cl√∫ster m√∫ltiple de Istio en implementaciones h√≠bridas y de m√∫ltiples nubes. <br><br>  En este art√≠culo, veremos m√°s de cerca esta caracter√≠stica: la <b>malla automatizada de servicios de m√∫ltiples cl√∫steres</b> . <br><br><blockquote>  Ya sea uno o m√°s cl√∫steres, un entorno multi-nube o h√≠brido, Backyards utiliza el mismo conjunto de caracter√≠sticas y una interfaz conveniente.  Es extremadamente f√°cil comenzar con un cl√∫ster y luego, con unos pocos clics, expanda la malla de servicio a otros cl√∫steres (multi-nube o nube h√≠brida). </blockquote><br><h1>  Motivaci√≥n </h1><br>  Los sistemas h√≠bridos y multinube entran r√°pidamente en la vida cotidiana de las empresas.  El inter√©s y la toma de decisiones han crecido mucho desde que Google present√≥ <a href="https://cloud.google.com/blog/topics/hybrid-cloud/new-platform-for-managing-applications-in-todays-multi-cloud-world">Anthos</a> en abril de este a√±o. <br><br>  Tambi√©n notamos un aumento en tal inter√©s en la mayor√≠a de las empresas con las que discutimos este tema.  Alguien prefiere procesar datos en sus propios centros de datos, accediendo a los servicios en la nube solo en los momentos de mayor carga.  Otros buscan constantemente las tarifas m√°s bajas y las mejores ofertas de los proveedores de la nube, aumentando la carga de trabajo solo cuando el precio lo permite.  Todos necesitan una forma conveniente de moverse entre diferentes nubes a pedido de un cliente en particular, debido a regulaciones regulatorias o requisitos comerciales, as√≠ como para construir <a href="https://banzaicloud.com/blog/istio-multi-mesh/">varias topolog√≠as diferentes</a> sobre esta infraestructura multi-nube e h√≠brida. <br><br>  A medida que crec√≠a la demanda de soluciones h√≠bridas y de cl√∫ster m√∫ltiple, comenzamos a pensar c√≥mo satisfacer las necesidades de nuestros clientes. <br><br><blockquote>  Los usuarios de tuber√≠as trabajan con una o m√°s nubes.  Depende de qu√© funciones espec√≠ficas necesiten.  Se pueden distinguir tres funciones clave: <br><br><ul><li>  <a href="https://banzaicloud.com/blog/multi-cloud-apps/">Gesti√≥n de m√∫ltiples aplicaciones en la nube</a> <br></li><li>  <a href="https://banzaicloud.com/blog/istio-multicluster-the-easy-way/">Servicio automatizado basado en Istio en la parte superior de una infraestructura multi-nube e h√≠brida</a> <br></li><li>  <a href="https://banzaicloud.com/blog/multi-cloud-fedv2/">Implementaci√≥n federada de recursos y aplicaciones a trav√©s de Kubernetes Federation v2</a> </li></ul></blockquote><br><h1>  Antecedentes </h1><br>  Desde el principio, la plataforma Pipeline admiti√≥ la conexi√≥n de diferentes proveedores de la nube en diferentes niveles (cl√∫steres, implementaciones y servicios).  Esta siempre ha sido una de nuestras prioridades. <br><br>  Al mismo tiempo, est√°bamos trabajando activamente en Istio.  El <a href="https://banzaicloud.com/blog/istio-operator/">operador se</a> lanz√≥ por primera vez para simplificar la implementaci√≥n y la administraci√≥n de Istio, y luego <a href="https://banzaicloud.com/tags/federation/">explor√≥</a> sus capacidades de m√∫ltiples cl√∫steres.  Como resultado, <b>creamos Backyards, un producto automatizado para infraestructura multi-nube e h√≠brida</b> , integrado en Pipeline, con el operador de c√≥digo abierto Istio. <br><br><h1>  Patios traseros en Pipeline </h1><br>  <b>En Pipeline, puede instalar una malla de servicio h√≠brida o de cl√∫ster m√∫ltiple y administrarla en un entorno local o en cualquier combinaci√≥n de los cinco proveedores de nube que admitimos.</b> <br><br><blockquote>  La funci√≥n de <b>agrupar cl√∫steres</b> (grupo de cl√∫steres) le permite formar grupos de cl√∫steres, siempre que seleccione un cl√∫ster como el principal.  Luego puede asociarlos con varias funciones, como la <code>Multi-cluster Deployment</code> o la <code>Service Mesh</code> . <br><br>  <code>Multi-cluster Deployment</code> permite implementar la aplicaci√≥n simult√°neamente en m√∫ltiples cl√∫steres.  Aqu√≠ <b>no nos</b> centramos en esta caracter√≠stica, pero se utilizar√° para implementar f√°cilmente la aplicaci√≥n en varios cl√∫steres.  Lea m√°s sobre esto en <a href="https://banzaicloud.com/blog/multi-cloud-apps/">este art√≠culo</a> . <br><br>  Este art√≠culo analizar√° m√°s de cerca la funci√≥n de <code>Service Mesh</code> .  Instala Istio en el cl√∫ster principal y se une autom√°ticamente a todos los cl√∫steres del grupo mediante <a href="https://github.com/banzaicloud/istio-operator">el operador Istio</a> .  Despu√©s de eso, obtienes una vista intercluster de tus servicios, y una malla multicluster desde el punto de vista de la administraci√≥n pr√°cticamente no es diferente de una convencional de cl√∫ster √∫nico. </blockquote><br><h1>  Las funciones </h1><br><h4>  Crear una malla de servicio </h4><br>  Comencemos creando un cl√∫ster en AWS utilizando la distribuci√≥n Kubernetes ligera y certificada por CNCF: <a href="https://github.com/banzaicloud/pke">PKE</a> .  A continuaci√≥n, cree un servicio de malla Istio en este cl√∫ster. <br><br><blockquote>  Al crear una malla de servicio, tambi√©n se forma un <i>grupo de cl√∫ster</i> en segundo plano. </blockquote><br>  Despu√©s de unos segundos, la "grilla" est√° instalada y lista para usar. <br><br><img src="https://habrastorage.org/webt/y3/in/et/y3inetitm4ngvd4wbcwkzrtpbzw.gif"><br><br><h4>  Implementaci√≥n de aplicaciones </h4><br>  Ahora necesitamos una aplicaci√≥n de demostraci√≥n con microservicios para mostrar las capacidades de nuestro producto.  Para fines de demostraci√≥n, creamos un proyecto <a href="https://github.com/banzaicloud/allspark">AllSpark</a> muy simple, y tambi√©n hicimos un diagrama de Helm con una configuraci√≥n preliminar de la implementaci√≥n de AllSpark, que simula un sistema de reserva de entradas de cine.  Todo se hace en nuestro <a href="https://banzaicloud.com/blog/chart-repository-service/">servicio de servicio</a> en la <a href="https://banzaicloud.com/blog/chart-repository-service/">nube (SaaS) para diagramas de Helm</a> . <br><br>  Usando la funci√≥n de <code>Multi-cluster Deployment</code> antes mencionada, implementaremos esta aplicaci√≥n yendo a la pesta√±a <code>Multi Cluster Deployments</code> en la interfaz de usuario.  Agregue el repositorio <code>https://charts.banzaicloud.io/gh/spotguidetest</code> al Pipeline, luego el diagrama <code>meshdemo</code> y haga clic en <code>DEPLOY</code> (para instalar todos los componentes, aseg√∫rese de que todos los valores est√©n establecidos en <code>true</code> ). <br><br><img src="https://habrastorage.org/webt/xm/el/jy/xmeljy6q3iqbshd48bybu8lqmig.gif"><br><br><blockquote>  Era posible elegir una implementaci√≥n simple en un cl√∫ster, pero indicamos una opci√≥n multicl√∫ster, que ser√° √∫til m√°s adelante cuando trabaje con varios cl√∫steres. </blockquote><br><h4>  Resumen de malla de servicio </h4><br>  Si vuelve a la lista de malla de servicios y hace clic en el bot√≥n <code>observe</code> , aparecer√° un panel de control.  Dado que no hay tr√°fico en nuestra aplicaci√≥n de prueba y no hay m√©tricas en el sistema, aqu√≠ todav√≠a no veremos ninguna visualizaci√≥n.  La interfaz tiene una funci√≥n de <code>test flight</code> que dirige el tr√°fico a los puntos finales seleccionados.  Si hace clic en el bot√≥n <code>HTTP</code> en la esquina superior derecha, puede completar un formulario que contiene informaci√≥n sobre el punto final y enviar algo de tr√°fico de prueba a sus servicios.  En nuestro ejemplo, el tr√°fico debe ir al servicio de portada en el puerto 8080. <br><br>  Despu√©s de unos segundos, aparecer√° un cronograma de sus servicios.  Los nodos en √©l representan servicios o cargas de trabajo, y las flechas representan conexiones de red entre diferentes servicios.  El gr√°fico se basa en las m√©tricas de Istio que provienen de Prometheus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a39/7e0/099/a397e00992f49c862bb4fc039328d4cb.png"><br><br><h4>  Crear grupos adicionales </h4><br>  Extender la malla de servicios a cl√∫steres adicionales, incluso desde varios proveedores de nube diferentes, solo requiere unos pocos clics.  Creemos tres grupos adicionales en tres proveedores diferentes, es m√°s interesante.  Podemos implementar f√°cilmente otro cl√∫ster PKE en Azure, as√≠ como cl√∫steres OKE y GKE. <br><br><img src="https://habrastorage.org/webt/bd/g7/wp/bdg7wpkuagluo5redzodlh3q0ka.gif"><br><br><h4>  Servicio de extensi√≥n de malla </h4><br>  Volvamos a la lista de malla de servicios, presione el bot√≥n <code>RESIZE MESH</code> y luego <code>ADD NEW CLUSTER</code> .  Seleccione los grupos creados previamente y presione el bot√≥n <code>ADD</code> .  Eso es todo <br><br><img src="https://habrastorage.org/webt/mm/g9/rp/mmg9rp74sdp8hmybk7odulh9yzi.gif"><br><br>  La expansi√≥n puede demorar varios minutos: cada grupo debe conectarse y alcanzar el estado <code>HEALTHY</code> . <br><br><h4>  Implementar una aplicaci√≥n en m√∫ltiples cl√∫steres </h4><br>  Ahora tenemos una malla de servicio en varios cl√∫steres, y la funci√≥n de <code>Multi-cluster Deployment</code> en Pipeline se activ√≥ anteriormente, por lo que es f√°cil implementar nuestros microservicios de demostraci√≥n en estos cl√∫steres.  En este diagrama particular de Helm, puede activar y desactivar componentes f√°cilmente.  Dado que la funci√≥n de <code>Multi-cluster Deployment</code> admite la redefinici√≥n de par√°metros para cada cl√∫ster, solo necesita editar la implementaci√≥n y establecer qu√© componentes queremos ejecutar en cada cl√∫ster. <br><br>  Para la implementaci√≥n de m√∫ltiples cl√∫steres, cambiamos la configuraci√≥n de esta manera: <br><br> <code>PKE  AWS <br> <br> services: true <br> istioresources: true <br> frontpage: true <br> catalog: true <br> bookings: true <br> <br> PKE  Azure <br> <br> services: true <br> moviesv1: true <br> moviesv2: true <br> moviesv3: true <br> <br> OKE <br> <br> services: true <br> payments: true <br> notifications: true <br> <br> GKE <br> <br> services: true <br> analytics: true</code> <br> <br><img src="https://habrastorage.org/webt/hi/zd/1a/hizd1ajvovnzl7nn0cg5dstgtrg.gif"><br><br><h4>  Descripci√≥n general de la malla de servicio en varios cl√∫steres </h4><br>  Nuevamente, seleccione el <code>test flight</code> en la interfaz para dirigir el tr√°fico adicional al punto final seleccionado previamente.  Despu√©s de unos segundos, aparecer√° algo similar al gr√°fico a continuaci√≥n.  Ahora nuestra aplicaci√≥n se distribuye en <b>cuatro</b> grupos en <b>cuatro</b> proveedores diferentes. <br><br>  <i>Incre√≠ble</i> , ¬øverdad? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/11a/72c/12a/11a72c12a16805ea697effda2d9d17f9.png"><br><br><h4>  Configuraci√≥n NRA </h4><br>  Antes de terminar este art√≠culo, eche un vistazo a la √∫ltima configuraci√≥n: <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">Horizontal Pod Autoscaler</a> .  En la p√°gina de <code>Single-cluster Deployment</code> en Pipeline, puede configurar f√°cilmente HPA para cualquier implementaci√≥n (en nuestro caso, <code>analytics-v1</code> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ef/ac0/7ec/1efac07ecb4dc9f722b6b970c8a2647a.png"><br><br>  Cuando instal√≥ HPA y envi√≥ suficiente tr√°fico a sus servicios para comenzar a escalar autom√°ticamente, ver√° c√≥mo aparecen m√°s y m√°s pods en la interfaz que corresponde al proyecto <code>analytics-v1</code> .  Tambi√©n ver√° un aumento en el flujo de consultas a lo largo de los bordes del gr√°fico, que se refleja en los n√∫meros y en el grosor de los bordes. <br><br><img src="https://habrastorage.org/webt/lw/0p/7d/lw0p7dzyj5eq9rtbcaqgc_l53km.gif"><br><br><h1>  Resumen </h1><br><blockquote>  Gracias a Backyards at Pipeline, es f√°cil configurar una malla de servicio h√≠brida o multi-cluster.  Luego puede implementar, rastrear, administrar y solucionar problemas de aplicaciones en m√∫ltiples cl√∫steres utilizando una interfaz de usuario conveniente. <br><br>  <a href="https://beta.banzaicloud.io/">¬°Pru√©balo gratis</a> ! </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/479742/">https://habr.com/ru/post/479742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479726/index.html">Vladimir tambi√©n conocido como wowik: "OpenStreetMap necesita ideas que no se pueden realizar en otros sistemas"</a></li>
<li><a href="../479728/index.html">¬øC√≥mo organizar una startup exitosa?</a></li>
<li><a href="../479732/index.html">Dejar de emitir algo m√°s como una p√©rdida de memoria</a></li>
<li><a href="../479736/index.html">C√°maras o l√°ser</a></li>
<li><a href="../479738/index.html">Como Youtube e Instagram: internacionalizando y localizando una aplicaci√≥n Python</a></li>
<li><a href="../479744/index.html">Python Memory Management: un poco sobre la fragmentaci√≥n de la memoria</a></li>
<li><a href="../479746/index.html">El software empresarial hace que sus empleados sean m√°s geniales. Lo necesitas</a></li>
<li><a href="../479748/index.html">GoLand 2019.3 con rendimiento mejorado, soporte mejorado para m√≥dulos Go y m√°s</a></li>
<li><a href="../479750/index.html">2. Fortinet Getting Started v 6.0. Arquitectura de soluciones</a></li>
<li><a href="../479756/index.html">Datos abiertos Roscosmos Ponerse al d√≠a con Am√©rica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>