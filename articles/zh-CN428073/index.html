<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ˆ ğŸ•ºğŸ½ ğŸ›ŒğŸ» Rust 1.30å‘å¸ƒ ğŸ“™ ğŸ‘¿ ğŸ‘¨ğŸ»â€âš•ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rustå¼€å‘å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒå‘å¸ƒRustçš„æ–°ç‰ˆæœ¬ï¼š1.30.0ã€‚ Rustæ˜¯ä¸€ç§é’ˆå¯¹å®‰å…¨æ€§ï¼Œé€Ÿåº¦å’Œå¹¶è¡Œä»£ç æ‰§è¡Œçš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚ 


å¦‚æœæ‚¨ä½¿ç”¨rustupå®‰è£…äº†å…ˆå‰ç‰ˆæœ¬çš„Rustï¼Œé‚£ä¹ˆè¦å°†Rustå‡çº§åˆ°1.30.0ç‰ˆæœ¬ï¼Œæ‚¨åªéœ€æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 


 $ rustup update stable  ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rust 1.30å‘å¸ƒ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428073/"><p>  Rustå¼€å‘å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒå‘å¸ƒRustçš„æ–°ç‰ˆæœ¬ï¼š1.30.0ã€‚  Rustæ˜¯ä¸€ç§é’ˆå¯¹å®‰å…¨æ€§ï¼Œé€Ÿåº¦å’Œå¹¶è¡Œä»£ç æ‰§è¡Œçš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚ </p><br><p>å¦‚æœæ‚¨ä½¿ç”¨<code>rustup</code>å®‰è£…äº†å…ˆå‰ç‰ˆæœ¬çš„Rustï¼Œé‚£ä¹ˆè¦å°†Rustå‡çº§åˆ°1.30.0ç‰ˆæœ¬ï¼Œæ‚¨åªéœ€æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š </p><br><pre> <code class="bash hljs">$ rustup update stable</code> </pre> <br><p> å¦‚æœå°šæœªå®‰è£…<code>rustup</code> ï¼Œåˆ™å¯ä»¥ä»æˆ‘ä»¬ç½‘ç«™çš„ç›¸åº”é¡µé¢è¿›è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®‰è£…</a> ã€‚ å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°<a href="">Rust 1.30.0çš„è¯¦ç»†å‘è¡Œè¯´æ˜</a> ã€‚ </p><br><h2 id="chto-voshlo-v-stabilnuyu-versiyu-1300"> ç¨³å®šç‰ˆ1.30.0ä¸­åŒ…å«ä»€ä¹ˆ </h2><br><p>  Rust 1.30æ˜¯å…·æœ‰è®¸å¤šé‡è¦åˆ›æ–°çš„å‡ºè‰²å‘è¡Œç‰ˆã€‚ ä½†æ˜¯åœ¨æ˜ŸæœŸä¸€ï¼Œå®˜æ–¹åšå®¢å°†å‘å¸ƒè¯·æ±‚ï¼Œä»¥æ£€æŸ¥Rust 1.31çš„betaç‰ˆæœ¬ï¼Œè¿™å°†æ˜¯â€œ Rust 2018â€çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚ æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬ä¹‹å‰çš„å‡ºç‰ˆç‰©<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œ What is Rust 2018â€ä¸­</a>æ‰¾åˆ°æœ‰å…³æ­¤çš„æ›´å¤šä¿¡æ¯ã€‚ </p><br><h3 id="procedurnye-makrosy"> ç¨‹åºå® </h3><br><p> å›åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Rust 1.15ï¼Œ</a>æˆ‘ä»¬æ·»åŠ äº†å®šä¹‰â€œè‡ªå®šä¹‰æ´¾ç”Ÿå®â€çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨<code>serde_derive</code> ï¼Œæ‚¨å¯ä»¥å£°æ˜ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[derive(Serialize, Deserialize, Debug)]</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pet</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, }</code> </pre> <br><p> å¹¶å°†<code>Pet</code>è½¬æ¢ä¸ºJSONå¹¶ä½¿ç”¨<code>serde_json</code>è¿”å›ç»“æ„ã€‚ è¿™å¯ä»¥å½’åŠŸäºä½¿ç”¨<code>serde_derive</code>è¿‡ç¨‹å®å¯¹<code>Serialize</code>å’Œ<code>Deserialize</code> <code>Serialize</code> <code>Deserialize</code>çš„è‡ªåŠ¨æ¨æ–­ã€‚ </p><br><p>  Rust 1.30é€šè¿‡æ·»åŠ å®šä¹‰ä¸¤ç§å…¶ä»–ç±»å‹çš„å®çš„åŠŸèƒ½æ¥æ‰©å±•è¿‡ç¨‹å®çš„åŠŸèƒ½ï¼šâ€œå±æ€§è¿‡ç¨‹å®â€å’Œâ€œåŠŸèƒ½è¿‡ç¨‹å®â€ã€‚ </p><a name="habracut"></a><br><p> å±æ€§å®ç±»ä¼¼äºè‡ªåŠ¨è¾“å‡ºçš„æ´¾ç”Ÿå®ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä»…ä»…ä¸º<code>#[derive]</code>å±æ€§ç”Ÿæˆä»£ç ï¼Œè€Œæ˜¯å…è®¸ç”¨æˆ·åˆ›å»ºè‡ªå·±çš„æ–°å±æ€§ã€‚ è¿™ä½¿å®ƒä»¬æ›´åŠ çµæ´»ï¼šæ´¾ç”Ÿå®ä»…é€‚ç”¨äºç»“æ„å’Œæšä¸¾ï¼Œä½†æ˜¯å±æ€§å¯ä»¥åº”ç”¨äºå…¶ä»–å¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ç½‘ç»œæ¡†æ¶æ—¶ï¼Œå±æ€§å®å°†å…è®¸æ‚¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š </p><br><pre> <code class="hljs rust"><span class="hljs-meta"><span class="hljs-meta">#[route(GET, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/"</span></span></span><span class="hljs-meta">)]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span></span>() {</code> </pre> <br><p> æ­¤å±æ€§<code>#[route]</code>å°†åœ¨æ¡†æ¶æœ¬èº«ä¸­å®šä¹‰ä¸ºç¨‹åºå®ã€‚ ä»–çš„ç­¾åå°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="hljs rust"><span class="hljs-meta"><span class="hljs-meta">#[proc_macro_attribute]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route</span></span></span></span>(attr: TokenStream, item: TokenStream) -&gt; TokenStream {</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ª<code>TokenStream</code>ç±»å‹çš„è¾“å…¥å‚æ•°ï¼šç¬¬ä¸€ä¸ªæ˜¯å±æ€§æœ¬èº«çš„å†…å®¹ï¼Œå³<code>GET, "/"</code>å‚æ•°<code>GET, "/"</code> ã€‚ ç¬¬äºŒä¸ªæ˜¯åº”ç”¨å±æ€§çš„å¯¹è±¡çš„ä¸»ä½“ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ˜¯<code>fn index() {}</code>å’Œå‡½æ•°ä¸»ä½“çš„å…¶ä½™éƒ¨åˆ†ã€‚ </p><br><p> åŠŸèƒ½å®å®šä¹‰äº†å…¶ç”¨æ³•ç±»ä¼¼äºå‡½æ•°è°ƒç”¨çš„å®ã€‚ ä¾‹å¦‚ï¼Œ <code>sql!</code>  ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sql = sql!(SELECT * FROM posts WHERE id=<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><p> è¿™ä¸ªå®æœ¬èº«å°†è§£æSQLè¡¨è¾¾å¼å¹¶æ£€æŸ¥å…¶è¯­æ³•æ­£ç¡®æ€§ã€‚ ç±»ä¼¼çš„å®åº”å£°æ˜å¦‚ä¸‹ï¼š </p><br><pre> <code class="hljs rust"><span class="hljs-meta"><span class="hljs-meta">#[proc_macro]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sql</span></span></span></span>(input: TokenStream) -&gt; TokenStream {</code> </pre> <br><p> è¿™ç±»ä¼¼äºderiveå®çš„ç­¾åï¼šæˆ‘ä»¬è·å¾—æ‹¬å·å†…çš„ä»¤ç‰Œï¼Œå¹¶è¿”å›ç”±å®ƒä»¬ç”Ÿæˆçš„ä»£ç ã€‚ </p><br><h3 id="makrosy-i-use"> å®å’Œ<code>use</code> </h3><br><p> ç°åœ¨ï¼Œæ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨useå…³é”®å­—å°†å®å¯¼å…¥ä½œç”¨åŸŸ</a> ã€‚ ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨<code>serde-json</code>åŒ…ä¸­çš„<code>json</code>å®ï¼Œè¯¥æ¡ç›®ä»¥å‰ä¸ºï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[macro_use]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">crate</span></span> serde_json; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> john = json!({ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"John Doe"</span></span>, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-string"><span class="hljs-string">"phones"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"+44 1234567"</span></span>, <span class="hljs-string"><span class="hljs-string">"+44 2345678"</span></span> ] });</code> </pre> <br><p> ç°åœ¨ï¼Œæ‚¨å°†å¿…é¡»ç¼–å†™ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">crate</span></span> serde_json; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> serde_json::json; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> john = json!({ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"John Doe"</span></span>, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-string"><span class="hljs-string">"phones"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"+44 1234567"</span></span>, <span class="hljs-string"><span class="hljs-string">"+44 2345678"</span></span> ] });</code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œå®ä»¥åŠå…¶ä»–å…ƒç´ ä¹Ÿè¢«å¯¼å…¥ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨<code>macro_use</code>æ‰¹æ³¨ã€‚ </p><br><p> æœ€åï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">proc_macroè½¯ä»¶åŒ…å·²ç¨³å®šä¸‹æ¥</a> ï¼Œå®ƒæä¾›äº†ç¼–å†™è¿‡ç¨‹å®æ‰€éœ€çš„APIã€‚ å®ƒè¿˜å¤§å¤§æ”¹å–„äº†é”™è¯¯å¤„ç†APIï¼Œå¹¶ä¸”<code>syn</code>å’Œ<code>quote</code>è¿™æ ·çš„ç¨‹åºåŒ…å·²ç»åœ¨ä½¿ç”¨å®ƒã€‚ ä¾‹å¦‚ï¼Œå…ˆå‰ï¼š </p><br><pre> <code class="hljs rust"><span class="hljs-meta"><span class="hljs-meta">#[derive(Serialize)]</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Demo</span></span></span></span> { ok: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, bad: std::thread::Thread, }</code> </pre> <br><p> å¯¼è‡´æ­¤é”™è¯¯ï¼š </p><br><pre> <code class="hljs rust">error[E0277]: the <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bound</span></span></span></span> `std::thread::Thread: _IMPL_SERIALIZE_FOR_Demo::_serde::Serialize` is not satisfied --&gt; src/main.rs:<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> | <span class="hljs-number"><span class="hljs-number">3</span></span> | <span class="hljs-meta"><span class="hljs-meta">#[derive(Serialize)]</span></span> | ^^^^^^^^^ the <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> `</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_IMPL_SERIALIZE_FOR_Demo</span></span></span></span>::_serde::Serialize` is not implemented <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> `std::thread::Thread`</code> </pre> <br><p> ç°åœ¨å°†å‘å¸ƒï¼š </p><br><pre> <code class="hljs cpp">error[E0277]: the trait bound `<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::Thread: serde::Serialize` is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> satisfied --&gt; src/main.rs:<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> | <span class="hljs-number"><span class="hljs-number">7</span></span> | bad: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::Thread, | ^^^ the trait `serde::Serialize` is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> implemented <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> `<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::Thread`</code> </pre> <br><h2 id="uluchshenie-sistemy-moduley"> æ”¹å–„æ¨¡å—ç³»ç»Ÿ </h2><br><p> é•¿æœŸä»¥æ¥ï¼Œæ¨¡å—ç³»ç»Ÿä¸€ç›´æ˜¯Ruståˆå­¦è€…çš„ç—›ç‚¹ï¼› å®ƒçš„æŸäº›è§„åˆ™åœ¨å®è·µä¸­ä¸æ–¹ä¾¿ã€‚ è¿™äº›æ›´æ”¹æ˜¯æˆ‘ä»¬ç®€åŒ–æ¨¡å—ç³»ç»Ÿæ‰€é‡‡å–çš„ç¬¬ä¸€æ­¥ã€‚ </p><br><p> é™¤äº†ä¸Šè¿°å¯¹å®çš„æ›´æ”¹ä¹‹å¤–ï¼Œä½¿ç”¨<code>use</code>è¿˜æœ‰ä¸¤ä¸ªæ–°çš„æ”¹è¿›ã€‚ é¦–å…ˆï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç°åœ¨å°†å¤–éƒ¨è½¯ä»¶åŒ…æ·»åŠ åˆ°å‰å¥ä¸­</a> ï¼Œå³ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//  let json = ::serde_json::from_str("..."); //  let json = serde_json::from_str("...");</span></span></code> </pre> <br><p> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºRustæ¨¡å—ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå¹¶ä¸æ€»æ˜¯éœ€è¦æ—§æ ·å¼ï¼š </p><br><pre> <code class="hljs powershell">extern crate serde_json; fn main() { //   ;     ,  `serde_json` //     let json = serde_json::from_str(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); } mod foo { fn bar() { //   ;     `foo`,  `serde_json` //    let json = serde_json::from_str(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); } //   -        `use` use serde_json; fn baz() { //   -   `::serde_json`,   //  ,   let json = ::serde_json::from_str(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); } }</code> </pre> <br><p> åªéœ€å°†å‡½æ•°ç§»è‡³å­æ¨¡å—å³å¯ç ´åä»£ç ï¼Œè¿™å¾ˆçƒ¦äººã€‚ ç°åœ¨å°†æ£€æŸ¥è·¯å¾„çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œå¦‚æœå®ƒå¯¹åº”äºæŸä¸ª<code>extern crate</code> ï¼Œåˆ™æ— è®ºè°ƒç”¨åœ¨æ¨¡å—å±‚æ¬¡ç»“æ„ä¸­çš„ä½ç½®å¦‚ä½•ï¼Œéƒ½å°†ä½¿ç”¨å®ƒã€‚ </p><br><p> æœ€åï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">useå¼€å§‹æ”¯æŒä½¿ç”¨ä»¥crateå¼€å¤´çš„è·¯å¾„å°†å…ƒç´ å¯¼å…¥å½“å‰èŒƒå›´</a> ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">mod</span></span> foo { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">// ... } } //  use ::foo::bar; //  use foo::bar; //  use crate::foo::bar;</span></span></code> </pre> <br><p> è·¯å¾„å¼€å¤´çš„<code>crate</code>å…³é”®å­—è¡¨ç¤ºè·¯å¾„å°†ä»æ•°æ®åŒ…çš„æ ¹å¼€å§‹ã€‚ ä»¥å‰ï¼Œ <code>use</code>å¯¼å…¥è¡Œä¸­æŒ‡ç¤ºçš„è·¯å¾„å§‹ç»ˆæ˜¯ç›¸å¯¹äºåŒ…çš„æ ¹ç›®å½•æŒ‡å®šçš„ï¼Œä½†æ˜¯ç›´æ¥å¼•ç”¨å…ƒç´ çš„å…¶ä½™ä»£ç ä¸­çš„è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰æ¨¡å—æŒ‡å®šçš„ï¼Œè¿™å¯¼è‡´è·¯å¾„çš„è¡Œä¸ºä¸ä¸€è‡´ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">mod</span></span> foo { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">// ... } } mod baz { pub fn qux() { //  ::foo::bar(); //  ,    `use`: // foo::bar(); //  crate::foo::bar(); } }</span></span></code> </pre> <br><p> æ–°æ ·å¼ä¸€ç»å¹¿æ³›ä½¿ç”¨ï¼Œå°±æœ‰æœ›ä½¿ç»å¯¹è·¯å¾„æ›´æ¸…æ™°ï¼Œè€Œæ— éœ€ä½¿ç”¨ä¸‘é™‹çš„å‰ç¼€<code>::</code> ã€‚ </p><br><p> æ‰€æœ‰è¿™äº›æ›´æ”¹å…±åŒç®€åŒ–äº†å¯¹è·¯å¾„è§£ææ–¹å¼çš„ç†è§£ã€‚ æ— è®ºæ‚¨åœ¨å“ªé‡Œçœ‹åˆ°è·¯å¾„<code>a::b::c</code> ï¼Œé™¤äº†<code>use</code>è¯­å¥ï¼Œæ‚¨éƒ½å¯ä»¥é—®ï¼š </p><br><ul><li> æ˜¯åŒ…è£¹åç§°å—ï¼Ÿ ç„¶åï¼Œæ‚¨éœ€è¦åœ¨å…¶ä¸­æŸ¥æ‰¾<code>b::c</code> ã€‚ </li><li> æ˜¯å…³é”®å­—<code>crate</code>å—ï¼Ÿ ç„¶åï¼Œæ‚¨éœ€è¦ä»å½“å‰åŒ…çš„æ ¹ç›®å½•ä¸­æŸ¥æ‰¾<code>b::c</code> ã€‚ </li><li> å¦åˆ™ï¼Œæ‚¨éœ€è¦ä»æ¨¡å—å±‚æ¬¡ç»“æ„ä¸­çš„å½“å‰ä½ç½®æŸ¥æ‰¾<code>a::b::c</code> ã€‚ </li></ul><br><p> å§‹ç»ˆä»åŒ…æ ¹å¼€å§‹<code>use</code>ä¸­è·¯å¾„çš„æ—§è¡Œä¸ºä»ç„¶é€‚ç”¨ã€‚ ä½†æ˜¯ï¼Œä¸€æ¬¡æ€§è¿‡æ¸¡åˆ°æ–°æ ·å¼åï¼Œè¿™äº›è§„åˆ™å°†ç»Ÿä¸€åº”ç”¨äºæ‰€æœ‰è·¯å¾„ï¼Œå¹¶ä¸”åœ¨ç§»åŠ¨ä»£ç æ—¶æ‚¨ä¸å¿…æ‹…å¿ƒå¯¼å…¥ã€‚ </p><br><h2 id="syrye-identifikatory"> åŸå§‹æ ‡è¯†ç¬¦ </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨</a>ä»¥ä¸‹æ–°è¯­æ³•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†å…³é”®å­—ç”¨ä½œæ ‡è¯†ç¬¦</a> ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//      `for` let r#for = true; //     `for` fn r#for() { // ... } //    r#for();</span></span></code> </pre> <br><p> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¯¹æ‚¨æœ‰ç”¨çš„æƒ…å†µå¹¶ä¸å¤šã€‚ ä½†æ˜¯æœ‰ä¸€å¤©ï¼Œæ‚¨å°†åœ¨Rust 2018çš„é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨Rust 2015çš„è½¯ä»¶åŒ…ï¼Œåä¹‹äº¦ç„¶ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å…³é”®å­—é›†ä¼šæœ‰æ‰€ä¸åŒã€‚ æˆ‘ä»¬å°†åœ¨å³å°†å‘å¸ƒçš„Rust 2018å…¬å‘Šä¸­è¿›ä¸€æ­¥è®¨è®ºè¿™ä¸€ç‚¹ã€‚ </p><br><h2 id="prilozheniya-bez-standartnoy-biblioteki"> æ²¡æœ‰æ ‡å‡†åº“çš„åº”ç”¨ç¨‹åº </h2><br><p> åœ¨Rust 1.6ä¸­ï¼Œæˆ‘ä»¬å®£å¸ƒäº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¨³å®šâ€œ no_stdâ€å’Œlibcoreçš„åŠŸèƒ½ï¼Œ</a>ä»¥åˆ›å»ºæ²¡æœ‰æ ‡å‡†åº“çš„é¡¹ç›®ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæ¾„æ¸…ï¼šå¯ä»¥ä»…åˆ›å»ºåº“ï¼Œè€Œä¸èƒ½åˆ›å»ºåº”ç”¨ç¨‹åºã€‚ </p><br><p> åœ¨Rust 1.30ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>#[panic_handler]</code></a>å±æ€§ç‹¬ç«‹å®ç°ææ…Œã€‚ è¿™æ„å‘³ç€ç°åœ¨æ‚¨å¯ä»¥åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸ä½¿ç”¨æ ‡å‡†åº“çš„åº“ã€‚ </p><br><h2 id="drugoe"> å…¶ä»– </h2><br><p> æœ€åä¸€ä»¶äº‹ï¼šåœ¨å®ä¸­ï¼Œæ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨<code>vis</code>é™å®šç¬¦<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ˜ å°„èŒƒå›´ä¿®é¥°ç¬¦</a> ï¼Œä¾‹å¦‚<code>pub</code> ã€‚ æ­¤å¤–ï¼Œâ€œç¨³å®šçš„å·¥å…·å±æ€§â€ï¼ˆä¾‹å¦‚<code>#[rustfmt::skip]</code> ï¼‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç°åœ¨å·²ç¨³å®š</a> ã€‚ é€‚ç”¨äº<em>é™æ€åˆ†æå·¥å…·</em> ï¼Œä¾‹å¦‚<code>#[allow(clippy::something)]</code> ï¼Œå®ƒä»¬å°šä¸ç¨³å®šã€‚ </p><br><p> æœ‰å…³<a href="">æ›´å¤š</a>è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="">å‘è¡Œè¯´æ˜</a> ã€‚ </p><br><h3 id="stabilizaciya-standartnoy-biblioteki"> ç¨³å®šæ ‡å‡†åº“ </h3><br><p> æ­¤ç‰ˆæœ¬ä¸­<a href="">ç¨³å®š</a>äº†<a href="">ä»¥ä¸‹API</a> ï¼š </p><br><ul><li> <code>Ipv4Addr::{BROADCAST, LOCALHOST, UNSPECIFIED}</code> </li> <li> <code>Ipv6Addr::{BROADCAST, LOCALHOST, UNSPECIFIED}</code> </li> <li> <code>Iterator::find_map</code> </li> </ul><br><p> æ­¤å¤–ï¼Œæ ‡å‡†åº“é•¿æœŸä»¥æ¥å°±æœ‰åˆ é™¤æŸäº›æ–‡æœ¬ä¸€ä¾§ç©ºæ ¼çš„åŠŸèƒ½ï¼Œä¾‹å¦‚<code>trim_left</code> ã€‚ ä½†æ˜¯ï¼Œå¯¹äºRTLè¯­è¨€ï¼Œæ­¤å¤„â€œå³â€å’Œâ€œå·¦â€çš„å«ä¹‰ä¼šå¼•èµ·æ··æ·†ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä¸ºè¿™äº›åŠŸèƒ½å¼•å…¥äº†æ–°çš„åç§°ï¼š </p><br><ul><li>  <code>trim_left</code> &gt; <code>trim_start</code> </li><li>  <code>trim_right</code> &gt; <code>trim_end</code> </li><li>  <code>trim_left_matches</code> &gt; <code>trim_start_matches</code> </li><li>  <code>trim_right_matches</code> &gt; <code>trim_end_matches</code> </li></ul><br><p> æˆ‘ä»¬è®¡åˆ’åœ¨Rust 1.33ä¸­å£°æ˜æ—§åç§°ï¼ˆä½†ä¸èƒ½åˆ é™¤ï¼‰ã€‚ </p><br><p> æœ‰å…³<a href="">æ›´å¤š</a>è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="">å‘è¡Œè¯´æ˜</a> ã€‚ </p><br><h3 id="uluchsheniya-v-cargo"> è´§è¿å¢å¼º </h3><br><p> æ­¤ç‰ˆæœ¬ä¸­å¯¹Cargoçš„æœ€å¤§æ”¹è¿›æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰äº†è¿›åº¦æ ï¼</a> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/84f/4ce/626/84f4ce6263525deded821b6007735dec.gif" alt="æ¼”ç¤ºgif"></p><br><p> æœ‰å…³<a href="">æ›´å¤š</a>è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="">å‘è¡Œè¯´æ˜</a> ã€‚ </p><br><h2 id="razrabotchiki-1300"> å¼€å‘äººå‘˜1.30.0 </h2><br><p> å¾ˆå¤šäººä¸€èµ·åˆ›å»ºäº†Rust 1.30ã€‚ æ²¡æœ‰ä½ ä»¬æ¯ä¸ªäººï¼Œæˆ‘ä»¬ä¸å¯èƒ½å®Œæˆå·¥ä½œã€‚  <a href="">è°¢è°¢ä½ </a> </p><br><p>  <em>è¯‘è€…ï¼šæˆ‘ç‰¹åˆ«æ„Ÿè°¢Rustycrateç¤¾åŒºçš„æˆå‘˜ä»¥åŠ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">vitvakatu</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Virtuos86</a>çš„ç¿»è¯‘å’Œæ ¡å¯¹å·¥ä½œã€‚</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428073/">https://habr.com/ru/post/zh-CN428073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428061/index.html">é€šè¿‡æŒ£å€¼ç®¡ç†æ¥ç®¡ç†é¡¹ç›®æˆæœ¬</a></li>
<li><a href="../zh-CN428063/index.html">æµè§ˆå™¨æ‹’ç»æ”¯æŒTLS 1.0å’Œ1.1</a></li>
<li><a href="../zh-CN428065/index.html">å‡å°‘å¹¶ä¸æ„å‘³ç€æ›´ç³Ÿï¼šé“ç£ä½“ä¸­çš„å¤©ç©ºç¢ç‰‡å’Œç•´å£</a></li>
<li><a href="../zh-CN428067/index.html">AntiFuzzingï¼šé€šè¿‡éšè”½è·å¾—å®‰å…¨æ€§ï¼</a></li>
<li><a href="../zh-CN428069/index.html">ä¼˜åŒ–Veeamå¤‡ä»½å’Œå¤åˆ¶åŸºç¡€æ¶æ„ä¸­çš„è´Ÿè½½å¹³è¡¡</a></li>
<li><a href="../zh-CN428075/index.html">ä¸€æ ·ï¼Œä½ åšä¸åˆ°ï¼ -ä½¿ç”¨æ¥å£å’Œä¾èµ–é¡¹æ³¨å…¥è¿›è¡Œé•¿æœŸè®¾è®¡</a></li>
<li><a href="../zh-CN428077/index.html">React.jsï¼šåˆå­¦è€…æŒ‡å—</a></li>
<li><a href="../zh-CN428079/index.html">å°†SOLIDåŸç†åº”ç”¨äºReactåº”ç”¨ç¨‹åºå¼€å‘</a></li>
<li><a href="../zh-CN428081/index.html">åœ¨React Developmentä¸­ä½¿ç”¨RxJSæ¥ç®¡ç†åº”ç”¨ç¨‹åºçŠ¶æ€</a></li>
<li><a href="../zh-CN428083/index.html">Webåˆ†æå½±å“çŸ©é˜µ-Avinash Koshikçš„æˆ˜ç•¥ç³»ç»Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>