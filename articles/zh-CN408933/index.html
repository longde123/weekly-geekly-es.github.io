<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🎨 👼🏿 👩‍🍳 用数字开关代替机械压力开关（给井主） ❄️ 👩🏻‍🤝‍👨🏿 👅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="当我第一次面对通过弹簧来调节机械压力开关时，我意识到我需要打电话给朋友，或者更确切地说是我的父亲，因为该机制虽然经过深思熟虑并具有一定的容错能力，但其水平很高，但缺点是即使一次调整脸部也有缺点。 。 



 我要求减价，那里比较有趣；） 

 我有点想通了，甚至设法进行了调整，但是我为此花了时间和...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>用数字开关代替机械压力开关（给井主）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408933/">当我第一次面对通过弹簧来调节机械压力开关时，我意识到我需要打电话给朋友，或者更确切地说是我的父亲，因为该机制虽然经过深思熟虑并具有一定的容错能力，但其水平很高，但缺点是即使一次调整脸部也有缺点。 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/13e/24d/072/13e24d0724dea32524577289dea261f6.jpg" alt="图片"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/7be/772/9537be77296c01b41348a4e722cef8bf.jpg" alt="图片"></div><br> 我要求减价，那里比较有趣；） <br><a name="habracut"></a><br> 我有点想通了，甚至设法进行了调整，但是我为此花了时间和精力。 然后我意识到，只需按一下按钮并设置所需的继电器，数字继电器就会很棒。 当然，许多人可以在几个方面谴责我： <br><br>  “您真是个傻瓜，您无法应对最简单的压力开关和两个弹簧。” <br>  -机械师指导，它将永远有效。 <br>  -为什么要进行监管：一旦水管工定了XX *（按国家价）卢布，所有 <br><br> 没问题，您可以长期保留该列表，但是根据您的工程性质，我想开发和改善我周围的所有事物，而不是扭曲弹簧，而是想想当机械继电器的触点在那里烧毁并且热泵保护继电器在您全都陷入困境时开始工作： D，甚至更好的妻子：） <br><br> 我们必须表示敬意，机械继电器已经为我服务了4年，但它没有发生任何事情（pah pah pah），我只需要重建，清洁触点，这些“点击！”就开始闪闪发光。 他们在车库里拉了些力，...吓到我的老鼠，所以他不得不逃跑了。 <br><br><div class="spoiler">  <b class="spoiler_title">逃生</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/-fVq93IuNN0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br> 由于我热爱自动化，并且通过esp从1-wire转到arduino，因此我可以并且可以在房屋中甚至做各种手工艺品，或者更确切地说，通过设备使生活更轻松。 朋友圈知道我要完成和实施的项目清单，但是绝对没有时间。 整个夏天（750小时），浴缸的结构都会打开，然后雪会堆积:)，这就是新年的到来！ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/d20/61c/46b/d2061c46b4400e77cb2c657f745003d9.jpg" alt="图片"></div><br> 许多人也“爱”我，尤其是在IT领域。 但是，这只是乐趣，生活是一件有趣的事情，而无论如何都没有。 也非常感谢所有支持我的人-没有您的客气话，动力将是不同的。 感谢我的妻子理解我的董事会的爱） <br><br> 从歌词中，我们跳入现实。 我转身寻找一个数字继电器，意识到在这个方向上很难，要么是国外的100美元，要么根本不像我想要的那样……或者是一个15美元的机械师。 我将它带入$，因为人们早就知道如果切换到$，即使是祖母也不会像硬币一样洗澡。 但是我真是个无赖，屋子已经连上互联网了，但是没有压力开关，太疯狂了！ <br><br> 巨魔的主题：我开始使用中文的Arduino，而不是原始的Arduino，但是中文的，它们以相同的方式工作，虽然有一些小错误，但是它们不会伤害我，而是喷出负面的熔岩并晃动esp8266，死于静态的速度比静态的要快。您可以将其插入计算机，甚至需要使用3.3功率就可以将其插入计算机中），除非我喜欢它是NodeMCU。 <br><br> 我喜欢esp8266和Arduino以及其他人，但是为了快速坐下来组装一个工作的，稳定的自动化设备，arduino是必不可少的东西+连线C语言有助于快速实现所需的功能。  （没有人会责备您使用刹车Lua脚本语言编写的内容）。  esp8266（我认为）-非常适合不需要测量ADC且需要互联网的地方。 尽管其“燃烧\潮湿”非常令人失望。 <br><br> 我们回到绵羊身边，就是接力：) <br><br> 结果，我在中国找到了一个价格为5美元，带有0-5V ADC的传感器，并决定尝试一下。 即便如此，我还是愚蠢地开枪将其应用并组装了设备。 立即出现色情幻想，按下LED闪烁的方式，并按下调整按钮，并且珍贵的数字将在中国标志性的蓝色屏幕上点亮，并且所有这些都将在梳子的实际压力下起作用。 <br><br> 我仔细考虑过，勾勒出轮廓，绘制，计划，订购，然后开始编写代码，直到情色引起思考。 <br><br> 当传感器到达时，我意识到传感器做得很好。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/cac/9f7/0e4/cac9f70e428dc26b50ef47c3f69e21a3.jpg" alt="图片"></div><br> 此外，我意识到它开始显示数据不是从头开始，而是从0.5V到4.5V。 从0到12 bar。 我非常高兴，因为我很高兴认识到该设备的奇异之处，因此您可以跟踪传感器何时死亡，并且在输出时不显示令人垂涎的0.5。 <br><br> 将传感器插入当前系统，使机械“以防万一”。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/ff1/9a8/953ff19a89efd97c7de0c335a0d841a0.jpg" alt="图片"></div><br> 令人遗憾的是，传感器上没有数据，如何计算其读数，但是由于图形上有一条直线，我不得不（羞愧，我承认）-打开ALGEBRA教科书并再次学习，记住它们如何建立直接线性关系。等式:)通过两点并创造一个奇迹，我很快得到了一个珍贵的简单公式（您可以羞辱我），在该公式中，将ADC信号转换为伏特后，我了解到巴中有多少压力。 由于传感器本身发出的压力为0到1.2Mpa-转换成Bar并不难-知道： <br><br>  1帕= 1.0E-5巴 <br> 即1200000Pa = 12Bar <br> 由于来自泵的压力不超过4Bar，因此该传感器足以吸引眼睛！ <br><br> 然后我拿了Arduino Uno-它躺在地上太多了，我通常将其用于快速铰接设计，测试，然后再使用Arduino Nano，因为它没有左机身套件，并且尺寸小了3倍！ 是的，来自中国的Arduinists会原谅我，很抱歉看到她闲着，我必须让她进入装置！ 我以为买了一个IP55小塑料盒，在屏幕下方喝了一个洞，这是我4年前买的！ 卡尔！ 然后，我没有意识到LCD 16 * 2会进入如此有用的行业。 我在汽车市场上花了2个自动按钮，焊接了电线，甚至没有像我在Nano上那样单独设计电路板-因为Uno笨拙，根本不用于此类用途。 <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a6e/c78/d35/a6ec78d35d2e73c21da5ab9f53bfbd25.jpg" alt="图片"><br><br> 该算法非常简单，并且仍在进行现场测试，仔细查看的项目代码位于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> 。 <br><br> 如果有建设性的批评，我不感到羞耻。我准备进行更改，因为它可以进行任何讨论。 <br><br> 我尝试将以下原则纳入算法： <br><br>  -数据初始化：在启动时，将检查并初始化所有用于操作的变量 <br>  -传感器的初始轮询：检查传感器是否未发生故障（如果发生故障，则切断泵继电器以防万一）以计算数据并将其传输到梳子（与之相连的分配梳子+泵入口+液压蓄能器）中的当前压力如果一切都在设定的上下压力之内，那么我们将继续倾听并计算数据 <br>  -数据在屏幕上显示为： <br><br> 低压-当前压力-高压 <br> 压降指数-[块，显示系统中的压力] <br><br> 这使您可以快速评估西图维纳发生了什么。 <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a16/a6f/711/a16a6f7117f1602f238acc0115cba914.jpg" alt="图片"><br><br>  -如果当前压力低于LOWER（低）：固态继电器切入15A（经过多年测试），泵开启并安静，快速地供水，没有火花和喀哒声。  TOP压力使继电器跳闸。 如果传感器读数超出合理范围，则泵将永远不会打开，并且会关闭（如果有的话）。 这就是安全性。 <br><br>  -当梳子中剩余压力的一半且每10秒检查一次和当前的压力时，我计算压降指数，如果差值小于默认值0.05，则当前指数发生变化，泵开通，即逻辑是快速耗水，为了预测泵的包含性，我使用了这种逻辑。 到目前为止，该逻辑还无法100％地起作用，因为我现在仍在测试，因此与arduins本身的millis（）时序相关联存在一些缺陷，这让我有些困扰，但是我会找到一种解决方案，以进行清晰的计算。 逻辑在开始时被触发，然后索引下降到0.01，逻辑不再起作用，但这不会影响泵的开启和关闭。 在这里，您可以选择“每小时应打开泵一定次数且不能再打开”这一主题-您有权这样做），我不会争辩-该主题正在分析中。 <br><br>  -有侧面按钮可让您设置LOW和HIGH阈值，以动态方式打开和关闭泵，而无需重启，只是愚蠢地-观察屏幕并按下侧面按钮...。 方便上！ 数据将立即写入EEPPROM，并且在打开设备电源后，将数据从那里加载（这是一个恒定的存储器，用于写入0到255字节类型的数字，不足以进行小小的改动）。 但有一点是，浮点数是如此困难且容易出血，以至于我只是这样决定：知道数字x.x0是浮点型压力，如果乘以，就可以很容易地将其转换为字节。 10并写入内存，例如：1.80 * 10 = 18-乘法后，浮点数自动丢弃最后一个零，我们得到一个适合字节类型的数字，在读取时，我们将其除以10.0并得到相反的形式进行运算我们的系统并输入float。 <br><br>  -所有的物品都可以在家外“只读”，这使我们不仅可以理解动脉压，还可以理解管道中的压力！ <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e04/3c9/963/e043c99632033b3dc2fe5bf4479c726f.jpg" alt="图片"><br><br> 好吧，这就是原谅，无论谁为代码的细节，愚蠢的数据类型以及从内存中加载数据的私密细节所困扰，请跳过此步骤，因为了解到IT领域的人们，他们会提出各种问题，反之亦然，从我不使用流行的AI \ ML和其他大型超酷和大数据算法的简单算法中得出。 希望工程师也能理解与机械零件有关的其他零件。 <br><br> 总的来说，结论是：您可以做任何事情，都可以轻松地做，为了利益而做，正如我最喜欢的评论员曾经说过的那样：您可以成年，可以“玩儿童玩具”。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/b98/8d9/760/b988d9760525a615924a2c77c37bb68f.jpg" alt="图片"></div><br><div class="spoiler">  <b class="spoiler_title">现场试验</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/cn3C7iSAZ1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br> 您的帽子，自动化，有能力的人，祝您愉快！ <br><br> 杂草： <br><br>  -我继续测试压降指数是否过早启动 <br>  -Arduino uno（中国）-毫秒（）计时器的问题已经暴露-我将检查arduino nano（以前从未发生过，我想是弯曲的模型）（我没有得到，所以我没有） <br>  -将该错误声明为1.5％-从1.2Bar开始-这是0.18Bar-实际上-我相对于压力计有0.3的位置，但是我不知道它的大小...所以2％允许最大误差-您可以将算法放入（就像我所做的那样）或多或少像真相。 不要发射卫星-会的） <br><br>  <b>upd：该产品的</b>价格标签在15-18美元之间。 <br><br> 新年快乐！ 让您的所有计划实现，建造BATHES，房子中将有HEAT，您整个友好的家庭将与您同在！ 在新的一年里可能只有好消息。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN408933/">https://habr.com/ru/post/zh-CN408933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN408923/index.html">“谢谢你的帮助，同志！” 加速AMD锐龙游戏PC</a></li>
<li><a href="../zh-CN408925/index.html">蒸汽朋克高保真音响设备的替代选择</a></li>
<li><a href="../zh-CN408927/index.html">由于加密货币的高波动性，Steam停止接受比特币付款</a></li>
<li><a href="../zh-CN408929/index.html">一些手机游戏的开发人员在用户的智能手机上挖掘加密货币</a></li>
<li><a href="../zh-CN408931/index.html">回顾华硕N580VD手提电脑</a></li>
<li><a href="../zh-CN408935/index.html">LTE网络智能天线</a></li>
<li><a href="../zh-CN408939/index.html">Mayak卫星项目的最终报告</a></li>
<li><a href="../zh-CN408941/index.html">OBD-II诊断连接器作为物联网接口</a></li>
<li><a href="../zh-CN408943/index.html">无聊对一个人有什么影响：流浪意识的科学</a></li>
<li><a href="../zh-CN408945/index.html">匿名比特币百万富翁向慈善机构捐款8600万美元。</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>