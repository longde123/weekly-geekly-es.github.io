<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тП╕я╕П ЁЯФС уА╜я╕П Do-it-рдЦреБрдж DNS рдиреЛрдб.рдЬреЗрдПрд╕ рдкрд░ рдкреНрд░реЙрдХреНрд╕реА рдХрд░рддрд╛ рд╣реИ ЁЯТА ЁЯН╕ ЁЯЩОЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DNS рдХреЗ рд▓рд┐рдП рджреВрд░ рдХреЗ рдЬрдВрдЧрд▓ рдореЗрдВ рдзрдХреНрдХреЛрдВ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЯ ... 
 рдПрд▓ред рдХрд╛рдЧрд╛рдиреЛрд╡ "рд╕рдмрд╕реЗ рдиреАрдЪреЗ рд╣реИрдорд▓реЗрдЯ" 

 рдиреЗрдЯрд╡рд░реНрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддреЗ рд╕рдордп, рдХрднреА-рдХрднреА рдЗрд╕реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЪрд▓...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Do-it-рдЦреБрдж DNS рдиреЛрдб.рдЬреЗрдПрд╕ рдкрд░ рдкреНрд░реЙрдХреНрд╕реА рдХрд░рддрд╛ рд╣реИ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440050/"><blockquote> DNS рдХреЗ рд▓рд┐рдП рджреВрд░ рдХреЗ рдЬрдВрдЧрд▓ рдореЗрдВ рдзрдХреНрдХреЛрдВ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЯ ... <br>  <em>рдПрд▓ред рдХрд╛рдЧрд╛рдиреЛрд╡ "рд╕рдмрд╕реЗ рдиреАрдЪреЗ рд╣реИрдорд▓реЗрдЯ"</em> </blockquote><p>  рдиреЗрдЯрд╡рд░реНрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддреЗ рд╕рдордп, рдХрднреА-рдХрднреА рдЗрд╕реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбреЛрдореЗрди рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░реЗрдВред  рд╣реЛрд╕реНрдЯ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдбреЛрдореЗрди рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рд╕рд┐рджреНрдз рд╕рдорд╛рдзрд╛рди рд╣реИред  рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдорд╛рдЗрдирд╕ рдпрд╣ рд╣реИ рдХрд┐ рдореЗрдЬрдмрд╛рди рдХреЛ рдбреЛрдореЗрди рдирд╛рдореЛрдВ рдХреЗ рд╕реНрдкрд╖реНрдЯ рдкрддреНрд░рд╛рдЪрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЕрд░реНрдерд╛рддреНред  рд╕рд┐рддрд╛рд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрд╛рдиреА  рдпрджрд┐ рдлреЙрд░реНрдо рдХреЗ рдбреЛрдореЗрди рд╣реИрдВ: </p><br><pre><code class="plaintext hljs">dom1.example.com, dom2.example.com, dom3.example.com, ................ domN.example.com,</code> </pre> <br><p>  рддрдм рдореЗрдЬрдмрд╛рди рдореЗрдВ рдЖрдкрдХреЛ рдЙрди рд╕рднреА рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдХреБрдЫ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рддреАрд╕рд░реЗ рд╕реНрддрд░ рдХреЗ рдбреЛрдореЗрди рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдирд╣реАрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рдЗрдЪреНрдЫрд╛ рд╣реИ (рдореИрдВ рдЕрдкрдиреЗ рд▓рд┐рдП рд▓рд┐рдЦрддрд╛ рд╣реВрдВ, рдХреЛрдИ рдХрд╣ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ) рдЗрд╕ рддрд░рд╣ рд╕реЗ рдПрдХ рд▓рд╛рдЗрди рдХреЗ рд╕рд╛рде рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="plaintext hljs">*.example.com</code> </pre> <br><p>  рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдЖрдкрдХреЗ рд╕реНрд╡рдпрдВ рдХреЗ DNS рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рддрд░реНрдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛ред  рдРрд╕реЗ рд╕рд░реНрд╡рд░ рд╣реИрдВ, рдЬреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд╣реИрдВ рдФрд░ рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд░рдбрдПрдирдПрд╕</a> ред  рдЖрдк рд░рд╛рдЙрдЯрд░ рдкрд░ DNS рд░рд┐рдХреЙрд░реНрдб рднреА рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдЕрдВрдд рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">xip.io</a> рдЬреИрд╕реА рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдпрд╣ рдХрд╛рдлреА рдкреВрд░реНрдг DNS рд╕рд░реНрд╡рд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХреБрдЫ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХрджрдо рд╕рд╣реА рд╣реИред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рд╕рдорд╛рдзрд╛рди рдореМрдЬреВрдж рд╣реИрдВ, рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд▓реЗрдХрд┐рди рдпрд╣ рд▓реЗрдЦ рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рдмрддрд╛рддрд╛ рд╣реИ - рдЕрдкрдиреА рдЦреБрдж рдХреА рдмрд╛рдЗрдХ рд▓рд┐рдЦрдирд╛, рдКрдкрд░ рд╕реВрдЪреАрдмрджреНрдз рд▓реЛрдЧреЛрдВ рдХреА рддрд░рд╣ рдПрдХ рдЙрдкрдХрд░рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╢реБрд░реБрдЖрддреА рдмрд┐рдВрджреБред  рд╣рдо рдЕрдкрдиреЗ DNS рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рд▓рд┐рдЦреЗрдВрдЧреЗ, рдЬреЛ рдЖрдиреЗ рд╡рд╛рд▓реЗ DNS рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рд╕реБрдиреЗрдВрдЧреЗ, рдФрд░ рдпрджрд┐ рдЕрдиреБрд░реЛрдзрд┐рдд рдбреЛрдореЗрди рдирд╛рдо рд╕реВрдЪреА рдореЗрдВ рд╣реИ, рддреЛ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЖрдИрдкреА рд╡рд╛рдкрд╕ рдХрд░ рджреЗрдЧрд╛, рдФрд░ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдпрд╣ рдПрдХ рдЙрдЪреНрдЪ DNS рд╕рд░реНрд╡рд░ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдЧрд╛ рдФрд░ рдЕрдиреБрд░реЛрдз рдХрд┐рдП рдЧрдП рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд┐рдирд╛ рдкреНрд░рд╛рдкреНрдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдЧрд╛ред </p><a name="habracut"></a><br><p>  рдЙрд╕реА рд╕рдордп, рдЖрдк рдЕрдиреБрд░реЛрдзреЛрдВ рдФрд░ рдЙрдирд╕реЗ рдкреНрд░рд╛рдкреНрдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд▓реЙрдЧ рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЪреВрдВрдХрд┐ DNS рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕рднреА рдХреЛ рд╣реИ - рдмреНрд░рд╛рдЙрдЬрд╝рд░, рд╕рдВрджреЗрд╢рд╡рд╛рд╣рдХ рдФрд░ рдПрдВрдЯреАрд╡рд╛рдпрд░рд╕, рдФрд░ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╕реЗрд╡рд╛рдПрдВ, рдЖрджрд┐, рдпрд╣ рдмрд╣реБрдд рдЬрд╛рдирдХрд╛рд░реАрдкреВрд░реНрдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╕рд┐рджреНрдзрд╛рдВрдд рд╕рд░рд▓ рд╣реИред  IPv4 рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рд╣рдо рдЕрдкрдиреЗ рдЪрд▓ рд░рд╣реЗ рд╕реНрд╡-рд▓рд┐рдЦрд┐рдд DNS рдкреНрд░реЙрдХреНрд╕реА (127.0.0.1, рдпрджрд┐ рд╣рдо рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ) рдХреЗ рд╕рд╛рде DNS рд╕рд░реНрд╡рд░ рдкрддреЗ рдХреЛ рдорд╢реАрди рдХреЗ рдкрддреЗ рдкрд░ рдмрджрд▓рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рд╣рдо рдЙрдЪреНрдЪ DNS рд╕рд░реНрд╡рд░ рдХрд╛ рдкрддрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВред  рдФрд░, рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ, рдмрд╕! </p><br><p>  рд╣рдо <em>nslookup</em> рдФрд░ <em>nsresolve</em> рдбреЛрдореЗрди рдирд╛рдо рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП DNS рд╕рд┐рд╕реНрдЯрдо рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдФрд░ <em>рд╣реЛрд╕реНрдЯреНрд╕ рдлрд╝рд╛рдЗрд▓</em> рдХреА рд╕рд╛рдордЧреНрд░реА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдЧреАред  рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдЖрдкрдХреЛ рдЗрд╕реЗ рдпрд╛рдж рд░рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╕рд╛рджрдЧреА рдХреЗ рд▓рд┐рдП, рд╣рдо рдЦреБрдж рдХреЛ рдореВрд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  IP рдХреЗрд╡рд▓ рдкреНрд░рдХрд╛рд░ A (рд╣реЛрд╕реНрдЯ рдкрддрд╛) рдФрд░ рд╡рд░реНрдЧ IN (рдЗрдВрдЯрд░рдиреЗрдЯ) рдХреЗ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд▓рд┐рдП рд╕реНрдкреВрдлрд┐рдВрдЧ </li><li>  рд╕реНрдкреВрдлрд╝ рдХрд┐рдП рдЧрдП IP рдкрддреЗ рдХреЗрд╡рд▓ рд╕рдВрд╕реНрдХрд░рдг 4 рд╣реИрдВ </li><li>  рдХреЗрд╡рд▓ UDP рдкрд░ рд╕реНрдерд╛рдиреАрдп рдЖрд╡рдХ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрд╢рди </li><li>  UDP рдпрд╛ TLS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрд╕реНрдЯреНрд░реАрдо DNS рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди </li><li>  рдпрджрд┐ рдХрдИ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рд╣реИрдВ, рддреЛ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕реНрдерд╛рдиреАрдп рдЕрдиреБрд░реЛрдз рдЙрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдкрд░ рднреА рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ </li><li>  рдХреЛрдИ рдИрдбреАрдПрдирдПрд╕ рд╕рдорд░реНрдерди рдирд╣реАрдВ </li></ul><br><div class="spoiler">  <b class="spoiler_title">рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреА рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ</b> <div class="spoiler_text"><p>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХреБрдЫ рдпреВрдирд┐рдЯ рдкрд░реАрдХреНрд╖рдг рд╣реИрдВред  рд╕рдЪ рд╣реИ, рд╡реЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ: рдореИрдВрдиреЗ рдЗрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛, рдФрд░ рдЕрдЧрд░ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдХреБрдЫ рдлрд▓рдХ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдХреЛрдИ рдЕрдкрд╡рд╛рдж рдЙрдбрд╝рддрд╛ рд╣реИ, рддреЛ рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдПрдХ рдЕрдирд╛рдбрд╝реА рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЖрдкрдХреЛ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реНрдерд╛рдиреАрдп рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпреВрдирд┐рдЯред </p></div></div><br><h2 id="nachalo--server-na-53-m-portu">  рд╕реНрдЯрд╛рд░реНрдЯ - рд╕рд░реНрд╡рд░ рдкреЛрд░реНрдЯ 53 рдкрд░ </h2><br><p>  рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдЖрдиреЗ рд╡рд╛рд▓реЗ DNS рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕рд┐рдЦрд╛рдирд╛ рд╣реЛрдЧрд╛ред  рд╣рдо рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ рд╕рд┐рд░реНрдл 53 рдкреЛрд░реНрдЯ рдХреЛ рд╕реБрдирддрд╛ рд╣реИ рдФрд░ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд▓реЙрдЧ рдХрд░рддрд╛ рд╣реИред  рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдЧреБрдгреЛрдВ рдореЗрдВ, рд╣рдо DNS рд╕рд░реНрд╡рд░ 127.0.0.1 рдХрд╛ рдкрддрд╛ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ, рдХрдИ рдкрдиреНрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ - рдФрд░ ... рдХрдВрд╕реЛрд▓ рдореЗрдВ рдореМрди, рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкреГрд╖реНрда рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдареАрдХ рд╣реИ, рд╣рдо рдЯреАрд╕реАрдкреА рдХреЛ рдпреВрдбреАрдкреА рдореЗрдВ рдмрджрд▓рддреЗ рд╣реИрдВ, рд╣рдо рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдо рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ - рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдПрдХ рдХрдиреЗрдХреНрд╢рди рддреНрд░реБрдЯрд┐ рд╣реИ, рдХреБрдЫ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╕рд┐рд╕реНрдЯрдо UDP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рд╣рдо рдЖрдиреЗ рд╡рд╛рд▓реЗ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЛ UDP рдкреЛрд░реНрдЯ 53 рдкрд░ рд╕реБрдиреЗрдВрдЧреЗред  рдЖрдзреЗ рдШрдВрдЯреЗ рдХрд╛ рдХрд╛рдо, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ 15 рдорд┐рдирдЯ Google рдХреЛ NodeJS рдкрд░ рдПрдХ рдЯреАрд╕реАрдкреА рдФрд░ рдпреВрдбреАрдкреА рд╕рд░реНрд╡рд░ рдХреИрд╕реЗ рдЬреБрдЯрд╛рдирд╛ рд╣реИ - рдФрд░ рд╣рдордиреЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЖрдзрд╛рд░рд╢рд┐рд▓рд╛ рдХрд╛рд░реНрдп рдХреЛ рд╣рд▓ рдХрд┐рдпрд╛ рд╣реИ, рдЬреЛ рднрд╡рд┐рд╖реНрдп рдХреЗ рдЖрд╡реЗрджрди рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдХреЛрдб рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dgram = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'dgram'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = dgram.createSocket(<span class="hljs-string"><span class="hljs-string">'udp4'</span></span>); <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">function</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">server</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">on</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'error'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, (err</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`server error:\n</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${err.stack}</span></span></span><span class="hljs-string">`</span></span>); server.close(); }); server.on(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (localReq, linfo) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(localReq); <span class="hljs-comment"><span class="hljs-comment">//            }); server.on('listening', () =&gt; { const address = server.address(); console.log(`server listening ${address.address}:${address.port}`); }); const localListenPort = 53; const localListenAddress = 'localhost'; server.bind(localListenPort, localListenAddress); // server listening 0.0.0.0:53 }());</span></span></code> </pre> <br><p>  <em>рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ 1. рд╕реНрдерд╛рдиреАрдп DNS рдкреНрд░рд╢реНрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдиреНрдпреВрдирддрдо рдХреЛрдб</em> </p><br><p>  рдЕрдЧрд▓рд╛ рдмрд┐рдВрджреБ рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрджреЗрд╢ рдкрдврд╝рдирд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЗрд╕рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рд╣рдорд╛рд░реЗ рдЖрдИрдкреА рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдпрд╛ рдмрд╕ рдЗрд╕реЗ рдкрд╛рд╕ рдХрд░реЗрдВред </p><br><h2 id="dns-soobschenie">  рдбреАрдПрдирдПрд╕ рд╕рдВрджреЗрд╢ </h2><br><p>  DNS рд╕рдВрджреЗрд╢ рдХреА рд╕рдВрд░рдЪрдирд╛ RFC-1035 рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИред  рдЕрдиреБрд░реЛрдз рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЛрдиреЛрдВ рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реИрдВ рдФрд░, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рд╕рдВрджреЗрд╢ рд╣реЗрдбрд░ рдореЗрдВ рдПрдХ рдмрд┐рдЯ рдлреНрд▓реИрдЧ (рдХреНрдпреВрдЖрд░ рдлрд╝реАрд▓реНрдб) рдореЗрдВ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИред  рд╕рдВрджреЗрд╢ рдореЗрдВ рдкрд╛рдБрдЪ рдЦрдВрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">+---------------------+ | Header | +---------------------+ | Question | the question for the name server +---------------------+ | Answer | RRs answering the question +---------------------+ | Authority | RRs pointing toward an authority +---------------------+ | Additional | RRs holding additional information +---------------------+</code> </pre> <br><p>  <em>рд╕рд╛рдорд╛рдиреНрдп DNS рд╕рдВрджреЗрд╢ рд╕рдВрд░рдЪрдирд╛ (рдУрдВ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc1035#section-4.1</a></em> </p><br><p>  рдПрдХ DNS рд╕рдВрджреЗрд╢ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд▓рдВрдмрд╛рдИ рдХреЗ рд╣реЗрдбрд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ (рдпрд╣ рддрдерд╛рдХрдерд┐рдд <em>рд╣реИрдбрд░</em> рдЕрдиреБрднрд╛рдЧ рд╣реИ), рдЬрд┐рд╕рдореЗрдВ 1 рдмрд┐рдЯ рд╕реЗ рджреЛ рдмрд╛рдЗрдЯ рддрдХ рдХреЗ рдХреНрд╖реЗрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ (рдЗрд╕рд▓рд┐рдП, рд╣реЗрдбрд░ рдореЗрдВ рдПрдХ рдмрд╛рдЗрдЯ рдореЗрдВ рдХрдИ рдлрд╝реАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ)ред  рд╣реЗрдбрд░ рдЖрдИрдбреА рдлрд╝реАрд▓реНрдб рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ - рдпрд╣ 16-рдмрд┐рдЯ рдЕрдиреБрд░реЛрдз рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╣реИ, рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкрд╛рд╕ рд╕рдорд╛рди рдЖрдИрдбреА рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЕрдЧрд▓реЗ рдлрд╝реАрд▓реНрдб рд╣реИрдВ рдЬреЛ рдЕрдиреБрд░реЛрдз рдХреЗ рдкреНрд░рдХрд╛рд░, рдЗрд╕рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдФрд░ рд╕рдВрджреЗрд╢ рдХреЗ рдмрд╛рдж рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧреЛрдВ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред  рдЙрди рд╕рднреА рдХрд╛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╡рд░реНрдгрди рдХрд░реЗрдВ, рдЬреЛ рдкрд░рд╡рд╛рд╣ рдХрд░рддрд╛ рд╣реИ - RFC рдореЗрдВ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc1035#section-4.1.1</a> ред  DNS рд╕рдВрджреЗрд╢ рдореЗрдВ <em>рд╣реЗрдбрд░</em> рдЕрдиреБрднрд╛рдЧ рд╣рдореЗрд╢рд╛ рдореМрдЬреВрдж рд╣реЛрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs"> 1 1 1 1 1 1 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ | ID | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ |QR| Opcode |AA|TC|RD|RA| Z | RCODE | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ | QDCOUNT | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ | ANCOUNT | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ | NSCOUNT | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ | ARCOUNT | +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+</code> </pre> <br><p>  <em>DNS рд╕рдВрджреЗрд╢ рд╢реАрд░реНрд╖ рд▓реЗрдЦ рд╕рдВрд░рдЪрдирд╛ (s) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc1035#section-4.1.1</a></em> </p><br><h3 id="sekciya-question">  рдкреНрд░рд╢реНрди рдЕрдиреБрднрд╛рдЧ </h3><br><p>  <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣реЛрддреА рд╣реИ рдЬреЛ рд╕рд░реНрд╡рд░ рдХреЛ рдпрд╣ рдмрддрд╛рддреА рд╣реИ рдХрд┐ рдЙрд╕рд╕реЗ рдХреНрдпрд╛ рдЬрд╛рдирдХрд╛рд░реА рдЪрд╛рд╣рд┐рдПред  рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ, рдРрд╕реЗ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдПрдХ рдпрд╛ рдХрдИ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рд╕рдВрджреЗрд╢ рд╢реАрд░реНрд╖рд▓реЗрдЦ рдореЗрдВ QDCOUNT рдлрд╝реАрд▓реНрдб рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рд╣реИ, рдФрд░ 0, 1 рдпрд╛ рдЕрдзрд┐рдХ рд╣реЛ рд╕рдХрддреА рд╣реИред  рд▓реЗрдХрд┐рди рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдкреНрд░рд╢реНрди рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИред  рдпрджрд┐ <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХрдИ рд░рд┐рдХреЙрд░реНрдб рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп рдПрдХ рддреНрд░реБрдЯрд┐ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛, рддреЛ рдПрдХ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╕реНрдерд┐рддрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрдЧреАред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕рд░реНрд╡рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕рдВрджреЗрд╢ рдореЗрдВ RCODE рдлрд╝реАрд▓реНрдб рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЛрдб рд▓реМрдЯрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрдВрдЧрд┐рдд рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛ рдХрд┐ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрдм рд╕рдорд╕реНрдпрд╛ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИ, рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдЗрд╕рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рднреА рдХреЛрдИ рдлрд╝реАрд▓реНрдб рдирд╣реАрдВ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рддреНрд░реБрдЯрд┐ рдФрд░ рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╕рдВрдХреЗрдд рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╕рдордЭреМрддрд╛ (рдЕрд╡рд┐рднрд╛рдЬрд┐рдд) рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░ <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд░рд┐рдХреЙрд░реНрдб рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ QDCOUNT рдлрд╝реАрд▓реНрдб рдХрд╛ рдорд╛рди 1 рд╣реИред рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рдкрд░ рдЕрдиреБрд░реЛрдз рдХреЛ рдХреИрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рдЕрдЧрд░ рдЗрд╕рдореЗрдВ рдЕрднреА рднреА рдХрдИ рд░рд┐рдХреЙрд░реНрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдХрд┐рд╕реА рдиреЗ рдЕрдиреБрд░реЛрдз рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрджреЗрд╢ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреАред  рдФрд░, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, Google DNS <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ рд░рд┐рдХреЙрд░реНрдб рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдХреЗрд╡рд▓ рдмрд╛рдХреА рдХреА рдЙрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдпрд╣ DNS рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд╡рд┐рд╡реЗрдХ рдкрд░ рдмрдирд╛ рд╣реБрдЖ рд╣реИред </p><br><p>  рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдбреАрдПрдирдПрд╕-рд╕рдВрджреЗрд╢ рдореЗрдВ, <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рднреА рдореМрдЬреВрдж рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдХреЗ <em>рдкреНрд░рд╢реНрди</em> рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХреЙрдкреА рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП (рдЯрдХрд░рд╛рд╡ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдПрдХ рдЖрдИрдбреА рдлрд╝реАрд▓реНрдб рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ)ред </p><br><p>  <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХреЗрд╡рд▓ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдореЗрдВ рдлрд╝реАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: QNAME (рдбреЛрдореЗрди рдирд╛рдо), QTYPE (рдкреНрд░рдХрд╛рд░), QCLASS (рд╡рд░реНрдЧ)ред  рдХреНрдпреВрд╡рд╛рдИрдкреАрдИрдИ рдФрд░ рдХреНрдпреВрд╕реАрдПрд▓рдПрд╕ рдбрдмрд▓-рдмрд╛рдЗрдЯ рд╕рдВрдЦреНрдпрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рдЕрдиреБрд░реЛрдз рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рд╡рд░реНрдЧ рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИрдВред  рд╕рдВрднрд╛рд╡рд┐рдд рдкреНрд░рдХрд╛рд░ рдФрд░ рдХрдХреНрд╖рд╛рдПрдВ RFC-1035 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc1035#section-3.2</a> рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИрдВ, рд╡рд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИред  рд▓реЗрдХрд┐рди рдПрдХ рдбреЛрдореЗрди рдирд╛рдо рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреА рд╡рд┐рдзрд┐ рдкрд░ рд╣рдо "рдбреЛрдореЗрди рдирд╛рдореЛрдВ рдХреА рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░реВрдк" рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрддрд╛рдПрдВрдЧреЗред </p><br><p>  рдХреНрд╡реЗрд░реА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, DNS рд╕рдВрджреЗрд╢ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдХрднреА-рдХрднреА <em>рдЕрддрд┐рд░рд┐рдХреНрдд</em> рдЕрдиреБрднрд╛рдЧ рдЗрд╕рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдиреБрд░реЛрдз рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реБрдИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдЖрд╡рдХ рдЕрдиреБрд░реЛрдз рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛), рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕рдВрджреЗрд╢ рднреА <em>рдкреНрд░рд╢реНрди</em> рдпрд╛ <em>рдЕрддрд┐рд░рд┐рдХреНрдд</em> рдЕрдиреБрднрд╛рдЧ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕рдВрджреЗрд╢ рд╢реАрд░реНрд╖ рд▓реЗрдЦ рдХреЗ RCODE рдлрд╝реАрд▓реНрдб рдореЗрдВ рддреНрд░реБрдЯрд┐ рдХреЛрдб рд╣реЛрдЧрд╛ред </p><br><h3 id="sekcii-answer-authority-i-additional">  <em>рдЙрддреНрддрд░</em> , <em>рдкреНрд░рд╛рдзрд┐рдХрд░рдг</em> рдФрд░ <em>рдЕрддрд┐рд░рд┐рдХреНрдд</em> рдЕрдиреБрднрд╛рдЧ </h3><br><p>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрдиреБрднрд╛рдЧ <em>рдЙрддреНрддрд░</em> , <em>рдкреНрд░рд╛рдзрд┐рдХрд░рдг</em> рдФрд░ <em>рдЕрддрд┐рд░рд┐рдХреНрдд рд╣реИрдВ</em> ( <em>рдЙрддреНрддрд░</em> рдФрд░ <em>рдкреНрд░рд╛рдзрд┐рдХрд░рдг</em> рдХреЗрд╡рд▓ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ DNS рд╕рдВрджреЗрд╢ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИрдВ, <em>рдЕрддрд┐рд░рд┐рдХреНрдд</em> рдЕрдиреБрд░реЛрдз рдореЗрдВ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗ рд╕рдХрддрд╛ рд╣реИ)ред  рд╡реЗ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИрдВ, рдЕрд░реНрдерд╛рддреН  рдЕрдиреБрд░реЛрдз рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдореМрдЬреВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдЗрди рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рдПрдХ рд╣реА рд╕рдВрд░рдЪрдирд╛ рд╣реЛрддреА рд╣реИ рдФрд░ рддрдерд╛рдХрдерд┐рдд "рд╕рдВрд╕рд╛рдзрди рд░рд┐рдХреЙрд░реНрдб" ( <em>рд░рд┐рдЬрд╝реЙрд░реНрдЯ рд░рд┐рдХреЙрд░реНрдб</em> , рдпрд╛ рдЖрд░рдЖрд░) рдХреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИред  рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдмреЛрд▓рдирд╛, рдЗрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЦрдВрдб рд╕рдВрд╕рд╛рдзрди рд░рд┐рдХреЙрд░реНрдб рдХреА рдПрдХ рд╕рд░рдгреА рд╣реИ, рдФрд░ рдПрдХ рд░рд┐рдХреЙрд░реНрдб рдЦреЗрддреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╕реНрддреБ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рд░рд┐рдХреЙрд░реНрдб рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рд╕рдВрджреЗрд╢ рд╣реЗрдбрд░ (ANCOUNT, NSCOUNT, ARCOUNT, рдХреНрд░рдорд╢рдГ) рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдлрд╝реАрд▓реНрдб рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбреЛрдореЗрди "google.com" рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдИрдкреА рдЕрдиреБрд░реЛрдз рдХрдИ рдЖрдИрдкреА рдкрддреЗ рд▓реМрдЯрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП <em>рдЙрддреНрддрд░</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рднреА рдХрдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдВ рд╣реЛрдВрдЧреА, рдкреНрд░рддреНрдпреЗрдХ рдкрддреЗ рдХреЗ рд▓рд┐рдП рдПрдХред  рдпрджрд┐ рдЕрдиреБрднрд╛рдЧ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИ, рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЗрдбрд░ рдлрд╝реАрд▓реНрдб рдореЗрдВ 0 рд╣реЛрддрд╛ рд╣реИред </p><br><p>  рдкреНрд░рддреНрдпреЗрдХ <em>рд╕рдВрд╕рд╛рдзрди рд░рд┐рдХреЙрд░реНрдб</em> (RR) рдПрдХ NAME рдлрд╝реАрд▓реНрдб рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдбреЛрдореЗрди рдирд╛рдо рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕ рдлрд╝реАрд▓реНрдб рдХрд╛ рдкреНрд░рд╛рд░реВрдк <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рдХреЗ QNAME рдлрд╝реАрд▓реНрдб рдХреЗ рд╕рдорд╛рди рд╣реИред <br>  NAME рдХреЗ тАЛтАЛрдЖрдЧреЗ рдлрд╝реАрд▓реНрдб TYPE (рд░рд┐рдХреЙрд░реНрдб рдкреНрд░рдХрд╛рд░), рдФрд░ CLASS (рдЗрд╕рдХреА рдХрдХреНрд╖рд╛) рд╣реИрдВ, рджреЛрдиреЛрдВ рдлрд╝реАрд▓реНрдб 16-рдмрд┐рдЯ рдиреНрдпреВрдореЗрд░рд┐рдХ рд╣реИрдВ, рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рд╡рд░реНрдЧ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ <em>рдкреНрд░рд╢реНрди</em> рдЕрдиреБрднрд╛рдЧ рд╕реЗ рднреА рдорд┐рд▓рддрд╛-рдЬреБрд▓рддрд╛ рд╣реИ, рдЗрд╕ рдЕрдВрддрд░ рдХреЗ рд╕рд╛рде рдХрд┐ рдЗрд╕рдХреЗ рдХреНрдпреВрдЯреАрдкреАрдИ рдФрд░ рдХреНрдпреВрд╕реАрдПрд▓рдПрдПрд╕ рдореЗрдВ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдорд╛рди рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ рдЯрд╛рдЗрдк рдФрд░ рдХреНрд▓рд╛рд╕, рдФрд░ рдЙрдирдХреЗ рдХреБрдЫ рдФрд░ рднреА рдЬреЛ рдЙрдирдХреЗ рд▓рд┐рдП рдЕрджреНрд╡рд┐рддреАрдп рд╣реИрдВред  рдЕрд░реНрдерд╛рддреН, рдПрдХ рд╕реВрдЦреА рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рднрд╛рд╖рд╛ рдореЗрдВ, рдХреНрдпреВрдЯреАрдкреАрдИрдИ рдФрд░ рдХреНрдпреВрд╕реАрдПрд▓рдПрдПрд▓рдПрд╕ рдорд╛рдиреЛрдВ рдХрд╛ рд╕реЗрдЯ TYPE рдФрд░ CLES рдорд╛рдиреЛрдВ рдХрд╛ рдПрдХ рд╕реБрдкрд░рд╕реЗрдЯ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Https://tools.ietf.org/html/rfc1035#section-3.2.2</a> рдкрд░ рдЕрдВрддрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдкрдврд╝реЗрдВред <br>  рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рд╣реИрдВ: </p><br><ul><li>  рдЯреАрдЯреАрдПрд▓ рдПрдХ 32-рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдЬреЛ рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рд░рд┐рдХреЙрд░реНрдб рдкрд┐рдЫрд▓реЗ (рд╕реЗрдХрдВрдб рдореЗрдВ) рдерд╛ред </li><li>  RDLENGTH рдПрдХ 16-рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдЬреЛ рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рдЕрдЧрд▓реЗ RDATA рдлрд╝реАрд▓реНрдб рдХреА рд▓рдВрдмрд╛рдИ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  RDATA рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдкреЗрд▓реЛрдб рд╣реИ, рдкреНрд░рд╛рд░реВрдк рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдкреНрд░рдХрд╛рд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░рдХрд╛рд░ A (рд╣реЛрд╕реНрдЯ рдкрддрд╛) рдФрд░ рд╡рд░реНрдЧ IN (рдЗрдВрдЯрд░рдиреЗрдЯ) рдХреЗ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд▓рд┐рдП, рдпреЗ 4 рдмрд╛рдЗрдЯреНрд╕ рд╣реИрдВ рдЬреЛ IPv4 рдкрддреЗ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред </li></ul><br><h2 id="format-zapisi-domennyh-imyon">  рдбреЛрдореЗрди рдирд╛рдо рд░рд┐рдХреЙрд░реНрдб рдкреНрд░рд╛рд░реВрдк </h2><br><p>  рдбреЛрдореЗрди рдирд╛рдо рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░реВрдк QNAME рдФрд░ NAME рдлрд╝реАрд▓реНрдб рдХреЗ рд╕рд╛рде-рд╕рд╛рде RDATA рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рд╣реИ, рдпрджрд┐ рдпрд╣ CNAME, MX, NS рдпрд╛ рдЕрдиреНрдп рд╡рд░реНрдЧ рд░рд┐рдХреЙрд░реНрдб рд╣реИ рдЬреЛ рдкрд░рд┐рдгрд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдбреЛрдореЗрди рдирд╛рдо рдорд╛рдирддрд╛ рд╣реИред </p><br><p>  рдПрдХ рдбреЛрдореЗрди рдирд╛рдо рд▓реЗрдмрд▓ рдХрд╛ рдПрдХ рдЕрдиреБрдХреНрд░рдо рд╣реИ (рдПрдХ рдирд╛рдо рдХреЗ рдЕрдиреБрднрд╛рдЧ, рдЙрдк-рдбреЛрдореЗрди - рдпрд╣ рдореВрд▓ рдореЗрдВ рдПрдХ <strong>рд▓реЗрдмрд▓</strong> рд╣реИ, рдореБрдЭреЗ рдмреЗрд╣рддрд░ рдЕрдиреБрд╡рд╛рдж рдирд╣реАрдВ рдорд┐рд▓рд╛)ред  рдПрдХ рд▓реЗрдмрд▓ рд▓рдВрдмрд╛рдИ рдХреА рдПрдХ рдПрдХрд▓ рдмрд╛рдЗрдЯ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рд╣реЛрддреА рд╣реИ - рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рд▓реЗрдмрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреА рд▓рдВрдмрд╛рдИ, рдЗрд╕рдХреЗ рдмрд╛рдж рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд▓рдВрдмрд╛рдИ рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рдХреНрд░рдо рд╣реЛрддрд╛ рд╣реИред  0 рдХреА рд▓рдВрдмрд╛рдИ рд╡рд╛рд▓реА рдмрд╛рдЗрдЯ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рддрдХ рд▓реЗрдмрд▓ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдЖрддреЗ рд╣реИрдВред рдкрд╣рд▓рд╛ рд▓реЗрдмрд▓ рддреБрд░рдВрдд рд╢реВрдиреНрдп рд▓рдВрдмрд╛рдИ рдХрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рд░реВрдЯ рдбреЛрдореЗрди (рд░реВрдЯ рдбреЛрдореЗрди) рдХреЛ рдЦрд╛рд▓реА рдбреЛрдореЗрди рдирд╛рдо (рдХрднреА-рдХрднреА "") рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  DNS рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ, рд▓реЗрдмрд▓ рдореЗрдВ рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рдорд╛рди (0 рд╕реЗ 255) рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдРрд╕реЗ рдирд┐рдпрдо рдереЗ рдЬреЛ рдПрдХ рдордЬрдмреВрдд рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдкреНрд░рдХреГрддрд┐ рдореЗрдВ рдереЗ: рдХрд┐ рд▓реЗрдмрд▓ рдПрдХ рдкрддреНрд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдПрдХ рдкрддреНрд░ рдпрд╛ рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдореЗрдВ 7-рдмрд┐рдЯ ASCII рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдореЗрдВ рдХреЗрд╡рд▓ рдЕрдХреНрд╖рд░, рд╕рдВрдЦреНрдпрд╛рдПрдВ рдпрд╛ рд╣рд╛рдЗрдлрд╝рди рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдПрдХ рд╢реВрдиреНрдп рдЙрдЪреНрдЪ рдмрд┐рдЯ рд╣реЛрддрд╛ рд╣реИред  рд╡рд░реНрддрдорд╛рди рдИрдбреАрдПрдирдПрд╕ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдореЗрдВ рд╡рд┐рдЪрд▓рди рдХреЗ рдмрд┐рдирд╛, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЗрди рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрдкрд╛рд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рд▓рдВрдмрд╛рдИ рдмрд╛рдЗрдЯ рдХреЗ рджреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЯреИрдЧ рдкреНрд░рдХрд╛рд░ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рд╡реЗ рд╢реВрдиреНрдп ( <em>0b00xxxxxx</em> ) рд╣реИрдВ, рддреЛ рдпрд╣ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд▓реЗрдмрд▓ рд╣реИ, рдФрд░ рд▓рдВрдмрд╛рдИ рдХреЗ рдмрд╛рдЗрдЯ рдХреЗ рд╢реЗрд╖ рдмрд┐рдЯреНрд╕ рдЗрд╕рдХреА рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдбреЗрдЯрд╛ рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдЕрдзрд┐рдХрддрдо рд▓реЗрдмрд▓ рдХреА рд▓рдВрдмрд╛рдИ 63 рд╡рд░реНрдг рд╣реИред  63 рдмрд╛рдЗрдирд░реА рдХреЛрдбрд┐рдВрдЧ рдореЗрдВ рд╕рд┐рд░реНрдл <em>0b00111111 рд╣реИ</em> ред </p><br><p>  рдпрджрд┐ рджреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯ <em>рдХреНрд░рдорд╢рдГ</em> 0 рдФрд░ 1 ( <em>0b01xxxxxx</em> ) <em>рд╣реИрдВ</em> , рддреЛ рдпрд╣ EDNS рдорд╛рдирдХ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc2671#section-3.1</a> ) рдХрд╛ рдПрдХ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдкреНрд░рдХрд╛рд░ рд▓реЗрдмрд▓ рд╣реИ, рдЬреЛ 1 рдлрд░рд╡рд░реА, 2019 рд╕реЗ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЖрдпрд╛ рдерд╛ред  рдирд┐рдЪрд▓реЗ рдЫрд╣ рдмрд┐рдЯ рдореЗрдВ рд▓реЗрдмрд▓ рдорд╛рди рд╣реЛрдЧрд╛ред  рд╣рдо рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдИрдбреАрдПрдирдПрд╕ рдкрд░ рдЪрд░реНрдЪрд╛ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЬрд╛рдирдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реИ рдХрд┐ рдпрд╣ рднреА рд╣реЛрддрд╛ рд╣реИред </p><br><p>  1 рдФрд░ 0 ( <em>0b10xxxxxx</em> ) рдХреЗ рдмрд░рд╛рдмрд░ рджреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯреНрд╕ рдХрд╛ рд╕рдВрдпреЛрдЬрди, рднрд╡рд┐рд╖реНрдп рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЖрд░рдХреНрд╖рд┐рдд рд╣реИред </p><br><p>  рдпрджрд┐ рджреЛрдиреЛрдВ рдЙрдЪреНрдЪ рдмрд┐рдЯреНрд╕ 1 ( <em>0b11xxxxxx</em> ) рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИрдВ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдбреЛрдореЗрди рдирд╛рдо рд╕рдВрдкреАрдбрд╝рд┐рдд ( <em>рд╕рдВрдкреАрдбрд╝рди</em> ) рд╣реИрдВ, рдФрд░ рд╣рдо рдЗрд╕ рдкрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдзреНрдпрд╛рди рджреЗрдВрдЧреЗред </p><br><h3 id="szhatie-domennyh-imyon">  рдбреЛрдореЗрди рдирд╛рдо рд╕рдВрдкреАрдбрд╝рди </h3><br><p>  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рд▓рдВрдмрд╛рдИ рдХреЗ рдмрд╛рдЗрдЯ рдореЗрдВ 1 ( <em>0b11xxxxxx</em> ) рдХреЗ рдмрд░рд╛рдмрд░ рджреЛ рдЙрдЪреНрдЪ рдмрд┐рдЯреНрд╕ рд╣реИрдВ, рддреЛ рдпрд╣ рдбреЛрдореЗрди рдирд╛рдо рд╕рдВрдкреАрдбрд╝рди рдХрд╛ рд╕рдВрдХреЗрдд рд╣реИред  рд╕рдВрджреЗрд╢ рдХреЛ рдХрдо рдФрд░ рдЕрдзрд┐рдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдкреАрдбрд╝рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  UDP рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдЪ рд╣реИ, рдЬрдм DNS рд╕рдВрджреЗрд╢ рдХреА рдХреБрд▓ рд▓рдВрдмрд╛рдИ 512 рдмрд╛рдЗрдЯреНрд╕ рддрдХ рд╕реАрдорд┐рдд рд╣реЛрддреА рд╣реИ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдкреБрд░рд╛рдирд╛ рдорд╛рдирдХ рд╣реИ, <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc1035#section-2.3.4</a> рдЖрдХрд╛рд░ рд╕реАрдорд╛</em> рджреЗрдЦреЗрдВ, рдирдпрд╛ EDNS UPD рд╕рдВрджреЗрд╢ рдФрд░ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рднреЗрдЬрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ)ред  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╕рд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рдПрдХ DNS рд╕рдВрджреЗрд╢ рдореЗрдВ рд╕рдорд╛рди рд╢реАрд░реНрд╖-рд╕реНрддрд░реАрдп рдЙрдк рдбреЛрдореЗрди (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <em>mail.yandex.ru</em> рдФрд░ <em>yandex.ru</em> ) рдХреЗ рд╕рд╛рде рдбреЛрдореЗрди рдирд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рддреЛ рдкреВрд░реЗ рдбреЛрдореЗрди рдирд╛рдо рдХреЛ рдлрд┐рд░ рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, DNS рд╕рдВрджреЗрд╢ рдореЗрдВ рдмрд╛рдЗрдЯ рд╕рдВрдЦреНрдпрд╛ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдбреЛрдореЗрди рдирд╛рдо рдкрдврд╝рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред  рдпрд╣ DNS рд╕рдВрджреЗрд╢ рдХрд╛ рдХреЛрдИ рднреА рдмрд╛рдЗрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рди рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рд░рд┐рдХреЙрд░реНрдб рдпрд╛ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕ рд╢рд░реНрдд рдХреЗ рд╕рд╛рде рдХрд┐ рдпрд╣ рдбреЛрдореЗрди рд▓реЗрдмрд▓ рдХреА рд▓рдВрдмрд╛рдИ рдХрд╛ рдПрдХ рдмрд╛рдЗрдЯ рд╣реИред  рдЖрдк рдЪрд┐рд╣реНрди рдХреЗ рдордзреНрдп рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╕рдВрджреЗрд╢ рдореЗрдВ рдПрдХ <em>mail.yandex.ru</em> рдбреЛрдореЗрди рд╣реИ, рддреЛ рд╕рдВрдкреАрдбрд╝рди рдХреА рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ <em>yandex.ru</em> , <em>ru</em> рдФрд░ root рдХреЛ рдирд╛рдорд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ "" рдбреЛрдореЗрди (рдмреЗрд╢рдХ, рд░реВрдЯ рдХреЛ рдмрд┐рдирд╛ рд╕рдВрдкреАрдбрд╝рди рдХреЗ рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдореНрдкреАрдбрди рдХреЗ рд╕рд╛рде рдРрд╕рд╛ рдХрд░рдирд╛ рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ рд╕рдВрднрд╡ рд╣реИ), рдФрд░ рдпрд╣рд╛рдБ <em>ndex.ru</em> рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рднреА рд╡реНрдпреБрддреНрдкрдиреНрди рдбреЛрдореЗрди рдирд╛рдо рд░реВрдЯ рдбреЛрдореЗрди рдореЗрдВ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдВрдЧреЗ, <em>рдЕрд░реНрдерд╛рддреН</em> , рд▓рд┐рдЦрдирд╛, рдХрд╣рдирд╛ред <em>mail.yandex</em> рднреА рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдПрдХ рдбреЛрдореЗрди рдирд╛рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: </p><br><ul><li>  рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдВрдкреАрдбрд╝рди рдХреЗ рдмрд┐рдирд╛ рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, </li><li>  рдПрдХ рдЬрдЧрд╣ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ рдЬреЛ рд╕рдВрдкреАрдбрд╝рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ </li><li>  рд╕рдВрдкреАрдбрд╝рди рдХреЗ рдмрд┐рдирд╛ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рд▓реЗрдмрд▓ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рд╕рдВрдкреАрдбрд╝рди рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ, </li><li>  рдЦрд╛рд▓реА рд╣реЛ (рд░реВрдЯ рдбреЛрдореЗрди рдХреЗ рд▓рд┐рдП)ред </li></ul><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдбреАрдПрдирдПрд╕ рд╕рдВрджреЗрд╢ рд╕рдВрдХрд▓рд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдореЗрдВ "dom3.example.com" рдирд╛рдо рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ, рдЕрдм рд╣рдореЗрдВ "dom4.dom3.example.com" рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдк рд╕рдВрдкреАрдбрд╝рди рдХреЗ рдмрд┐рдирд╛ "рдбреЛрдо 4" рдЕрдиреБрднрд╛рдЧ рд░рд┐рдХреЙрд░реНрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рд╕рдВрдкреАрдбрд╝рди рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЕрд░реНрдерд╛рдд, "dom3.example.com" рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рдЬреЛрдбрд╝реЗрдВред  рдпрд╛ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдпрджрд┐ рдирд╛рдо "dom4.dom3.example.com" рдкрд╣рд▓реЗ рд╕реЗ рдерд╛, рддреЛ "dom3.example.com" рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рддреБрд░рдВрдд рдЙрд╕рдореЗрдВ "dom3" рд▓реЗрдмрд▓ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдХреЗ рд╕рдВрдкреАрдбрд╝рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдХрд╣рд╛ рдЬрд╛ рдЪреБрдХрд╛ рд╣реИ, рд╕рдВрдкреАрдбрд╝рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ 'dom4.dom3' рдХреЗ рднрд╛рдЧ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдирд╛рдо рдХреЛ рдПрдХ рд╢реАрд░реНрд╖-рд╕реНрддрд░реАрдп рдЕрдиреБрднрд╛рдЧ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдЖрдкрдХреЛ рдЕрдЪрд╛рдирдХ рдмреАрдЪ рд╕реЗ рд╕реЗрдЧрдореЗрдВрдЯ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдмрд╕ рд╕рдВрдкреАрдбрд╝рди рдХреЗ рдмрд┐рдирд╛ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рд╕рд░рд▓рддрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╕рдВрдкреАрдбрд╝рди рдХреЗ рд╕рд╛рде рдбреЛрдореЗрди рдирд╛рдо рдХреИрд╕реЗ рд▓рд┐рдЦрдирд╛ рд╣реИ, рдпрд╣ рдХреЗрд╡рд▓ рдкрдврд╝ рд╕рдХрддрд╛ рд╣реИред  рдорд╛рдирдХ рдЗрд╕реЗ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдкрдврд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдЦрди рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИред  рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рд░реАрдбрд┐рдВрдЧ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИ: рдпрджрд┐ рд▓рдВрдмрд╛рдИ рдХреЗ рдмрд╛рдЗрдЯ рдХреЗ рджреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯреНрд╕ рдореЗрдВ 1 рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕рдХреЗ рдмрд╛рдж рдХреА рдмрд╛рдЗрдЯ рдХреЛ рдкрдврд╝рддреЗ рд╣реИрдВ, рдФрд░ рдмрд┐рдЧ рдПрдВрдбреЗрдб рдмрд┐рдЯреНрд╕ рдХреЗ рдЖрджреЗрд╢ рдХреЗ рд╕рд╛рде рдЗрди рджреЛрдиреЛрдВ рдмрд╛рдЗрдЯреНрд╕ рдХреЛ 16-рдмрд┐рдЯ рдЕрд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдкреВрд░реНрдгрд╛рдВрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирддреЗ рд╣реИрдВред  рд╣рдо рджреЛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯреНрд╕ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ (1 рдпреБрдХреНрдд), рдкрд░рд┐рдгрд╛рдореА 14-рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛ рдкрдврд╝реЗрдВ, рдФрд░ рдЗрд╕ рдирдВрдмрд░ рдХреЗ рдЕрдиреБрд░реВрдк рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде DNS рд╕рдВрджреЗрд╢ рдореЗрдВ рдмрд╛рдЗрдЯ рд╕реЗ рдбреЛрдореЗрди рдирд╛рдо рдкрдврд╝рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред </p><br><p>  рдбреЛрдореЗрди рдирд╛рдо рдкрдврд╝рдиреЗ рдХреЗ рд╕рдорд╛рд░реЛрд╣ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readDomainName</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">buf, startOffset, objReturnValue = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> currentByteIndex = startOffset; <span class="hljs-comment"><span class="hljs-comment">//    ,  DNS- ,      let initOctet = buf.readUInt8(currentByteIndex); let domain = ''; //      , ..       0, //  ,      // "the root domain name has no labels." (c) RFC-1035, p. 4.1.4. Message compression objReturnValue['endOffset'] = currentByteIndex; let lengthOctet = initOctet; while (lengthOctet &gt; 0) { //     var label; if (lengthOctet &gt;= 192) { //   :  0b1100 0000   const pointer = buf.readUInt16BE(currentByteIndex) - 49152; // 49152 === 0b1100 0000 0000 0000 === 192 * 256 const returnValue = {} label = readDomainName(buf, pointer, returnValue); domain += ('.' + label); objReturnValue['endOffset'] = currentByteIndex + 1; //      ,      break; } else { currentByteIndex++; label = buf.toString('ascii', currentByteIndex, currentByteIndex + lengthOctet); domain += ('.' + label); currentByteIndex += lengthOctet; lengthOctet = buf.readUInt8(currentByteIndex); objReturnValue['endOffset'] = currentByteIndex; } } return domain.substring(1); //    тАФ  "." }</span></span></code> </pre> <br><p>  <em>рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ 2. DNS рдХреНрд╡реЗрд░реА рд╕реЗ рдбреЛрдореЗрди рдирд╛рдо рдкрдврд╝рдирд╛</em> </p><br><p>  рдмрд╛рдЗрдирд░реА рдмрдлрд░ рд╕реЗ рдбреАрдПрдирдПрд╕ рд░рд┐рдХреЙрд░реНрдб рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдХреЛрдб: </p><br><div class="spoiler">  <b class="spoiler_title">рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ 3. рдПрдХ рдмрд╛рдЗрдирд░реА рдмрдлрд░ рд╕реЗ рдПрдХ DNS рд░рд┐рдХреЙрд░реНрдб рдкрдврд╝рдирд╛</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseDnsMessageBytes</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">buf</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> msgFields = {}; <span class="hljs-comment"><span class="hljs-comment">// (c) RFC 1035 p. 4.1.1. Header section format msgFields['ID'] = buf.readUInt16BE(0); const byte_2 = buf.readUInt8(2); //  #2 (starting from 0) const mask_QR = 0b10000000; msgFields['QR'] = !!(byte_2 &amp; mask_QR); //  : 0 "false" =&gt; , 1 "true" =&gt;  const mask_Opcode = 0b01111000; const opcode = (byte_2 &amp; mask_Opcode) &gt;&gt;&gt; 3; //   (): 0, 1, 2,   msgFields['Opcode'] = opcode; const mask_AA = 0b00000100; msgFields['AA'] = !!(byte_2 &amp; mask_AA); const mask_TC = 0b00000010; msgFields['TC'] = !!(byte_2 &amp; mask_TC); const mask_RD = 0b00000001; msgFields['RD'] = !!(byte_2 &amp; mask_RD); const byte_3 = buf.readUInt8(3); //  #3 const mask_RA = 0b10000000; msgFields['RA'] = !!(byte_3 &amp; mask_RA); const mask_Z = 0b01110000; msgFields['Z'] = (byte_3 &amp; mask_Z) &gt;&gt;&gt; 4; //  0,  const mask_RCODE = 0b00001111; msgFields['RCODE'] = (byte_3 &amp; mask_RCODE); // 0 =&gt; no error; (dec) 1, 2, 3, 4, 5 - errors, see RFC msgFields['QDCOUNT'] = buf.readUInt16BE(4); //     Question,   0  1 msgFields['ANCOUNT'] = buf.readUInt16BE(6); //     Answer msgFields['NSCOUNT'] = buf.readUInt16BE(8); //     Authority msgFields['ARCOUNT'] = buf.readUInt16BE(10); //     Additional //    Question let currentByteIndex = 12; //  Question   12-  DNS- (c) RFC 1035 p. 4.1.2. Question section format msgFields['questions'] = []; for (let qdcount = 0; qdcount &lt; msgFields['QDCOUNT']; qdcount++) { const question = {}; const resultByteIndexObj = { endOffset: undefined }; const domain = readDomainName(buf, currentByteIndex, resultByteIndexObj); currentByteIndex = resultByteIndexObj.endOffset + 1; question['domainName'] = domain; question['qtype'] = buf.readUInt16BE(currentByteIndex); // 1 =&gt; "A" record currentByteIndex += 2; question['qclass'] = buf.readUInt16BE(currentByteIndex); // 1 =&gt; "IN" Internet currentByteIndex += 2; msgFields['questions'].push(question); } // (c) RFC 1035 p. 4.1.3. Resource record format //    (Resourse Records, RR)  Answer, Authority, Additional ['answer', 'authority', 'additional'].forEach(function(section, i, arr) { let msgFieldsName, countFieldName; switch(section) { case 'answer': msgFieldsName = 'answers'; countFieldName = 'ANCOUNT'; break; case 'authority': msgFieldsName = 'authorities'; countFieldName = 'NSCOUNT'; break; case 'additional': msgFieldsName = 'additionals'; countFieldName = 'ARCOUNT'; break; } msgFields[msgFieldsName] = []; for (let recordsCount = 0; recordsCount &lt; msgFields[countFieldName]; recordsCount++) { let record = {}; const objReturnValue = {}; const domain = readDomainName(buf, currentByteIndex, objReturnValue); currentByteIndex = objReturnValue['endOffset'] + 1; record['domainName'] = domain; record['type'] = buf.readUInt16BE(currentByteIndex); // 1 =&gt; "A" record currentByteIndex += 2; record['class'] = buf.readUInt16BE(currentByteIndex); // 1 =&gt; "IN" Internet currentByteIndex += 2; // TTL  4  record['ttl'] = buf.readUIntBE(currentByteIndex, 4); currentByteIndex += 4; record['rdlength'] = buf.readUInt16BE(currentByteIndex); currentByteIndex += 2; const rdataBinTempBuf = buf.slice(currentByteIndex, currentByteIndex + record['rdlength']); record['rdata_bin'] = Buffer.alloc(record['rdlength'], rdataBinTempBuf); if (record['type'] === 1 &amp;&amp; record['class'] === 1) { //      IPv4,      let ipStr = ''; for (ipv4ByteIndex = 0; ipv4ByteIndex &lt; 4; ipv4ByteIndex++) { ipStr += '.' + buf.readUInt8(currentByteIndex).toString(); currentByteIndex++; } record['IPv4'] = ipStr.substring(1); //    '.' } else { //    ,   currentByteIndex += record['rdlength']; } msgFields[msgFieldsName].push(record); } }); return msgFields; }</span></span></code> </pre> <br><p> <em> 3.  DNS-   </em> </p></div></div><br><p> ,       . ,     ,   ,    .   ,     DNS-,     ,   .  ,       . </p><br><p>  ,        - <code>server.on("message", () =&gt; {})</code>   1.   : </p><br><div class="spoiler"> <b class="spoiler_title"> 4.    DNS-</b> <div class="spoiler_text"><pre> <code class="javascript hljs">server.on(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (localReq, linfo) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dnsRequest = functions.parseDnsMessageBytes(localReq); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> question = dnsRequest.questions[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// currently, only one question per query is supported by DNS implementations let forgingHostParams = undefined; // ,         IP for (let i = 0; i &lt; config.requestsToForge.length; i++) { const requestToForge = config.requestsToForge[i]; const targetDomainName = requestToForge.hostName; if (functions.domainNameMatchesTemplate(question.domainName, targetDomainName) &amp;&amp; question.qclass === 1 &amp;&amp; question.qtype === 1) { forgingHostParams = requestToForge; break; } } //  ,    DNS-      if (!!forgingHostParams) { const forgeIp = forgingHostParams.ip; const answers = []; answers.push({ domainName: question.domainName, type: question.qtype, class: question.qclass, ttl: forgedRequestsTTL, rdlength: 4, rdata_bin: functions.ip4StringToBuffer(forgeIp), IPv4: forgeIp }); const localDnsResponse = { ID: dnsRequest.ID, QR: dnsRequest.QR, Opcode: dnsRequest.Opcode, AA: dnsRequest.AA, TC: false, // dnsRequest.TC, RD: dnsRequest.RD, RA: true, Z: dnsRequest.Z, RCODE: 0, // dnsRequest.RCODE, 0 - no errors, look in RFC-1035 for other error conditions QDCOUNT: dnsRequest.QDCOUNT, ANCOUNT: answers.length, NSCOUNT: dnsRequest.NSCOUNT, ARCOUNT: dnsRequest.ARCOUNT, questions: dnsRequest.questions, answers: answers } //     DNS-    const responseBuf = functions.composeDnsMessageBin(localDnsResponse); console.log('response composed for: ', localDnsResponse.questions[0]); server.send(responseBuf, linfo.port, linfo.address, (err, bytes) =&gt; {}); } // ,     DNS-,         else { //     DNS-  UDP,     const responseBuf = await functions.getRemoteDnsResponseBin(localReq, upstreamDnsIP, upstreamDnsPort); //        server.send(responseBuf, linfo.port, linfo.address, (err, bytes) =&gt; {}); //     DNS-  TLS,   , .  9 } });</span></span></code> </pre> <br><p> <em> 4.    DNS-</em> </p></div></div><br><h2 id="dobavlyaem-podderzhku-tls">   TLS </h2><br><p>        DNS-.    ,      DNS-   TLS (HTTPS    ).  DNS-  TLS     TCP,    ,   TLS    .          TCP,   RFC-7766 DNS Transport over TCP ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://tools.ietf.org/html/rfc7766</a> ).    ,  :      TLS,   TCP   ( ,       DNS  TCP,      TLS-  TCP-,     ). </p><br><h3 id="ustanovka-tls-soedineniya">  TLS- </h3><br><p>  TLS-           ,       ,   .  ,         TLS-,       .  RFC-7858 -        : </p><br><pre> <code class="plaintext hljs">In order to amortize TCP and TLS connection setup costs, clients and servers SHOULD NOT immediately close a connection after each response. Instead, clients and servers SHOULD reuse existing connections for subsequent queries as long as they have sufficient resources. In some cases, this means that clients and servers may need to keep idle connections open for some amount of time. () https://tools.ietf.org/html/rfc7858#section-3.4</code> </pre> <br><p>       ,   TLS-,   ,     ,   ,   ,       .   ,        30 ,   ,      ,        DNS-.  30  ~  ~   ,   15  60 ,         .        ,         .   - . </p><br><p> TLS-     NodeJS.    ,    TLS-     : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tls = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'tls'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TLS_SOCKET_IDLE_TIMEOUT = <span class="hljs-number"><span class="hljs-number">30000</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    ,     TLS- function Module(connectionOptions, funcOnData, funcOnError, funcOnClose, funcOnEnd) { let socket; function connect() { socket = tls.connect(connectionOptions, () =&gt; { console.log('client connection established:', socket.authorized ? 'authorized' : 'unauthorized'); }); socket.on('data', funcOnData); // connection.on('end', () =&gt; {}); socket.on('close', (hasTransmissionError) =&gt; { //   ,     . //   ,     console.log('connection closed; transmission error:', hasTransmissionError); }); socket.on('end', () =&gt; { console.log('remote TLS server connection closed.') }); socket.on('error', (err) =&gt; { console.log('connection error:', err); console.log('\tmessage:', err.message); console.log('\tstack:', err.stack); }) socket.setTimeout(TLS_SOCKET_IDLE_TIMEOUT); socket.on('timeout', () =&gt; { console.log('socket idle timeout, disconnected.'); socket.end(); }); } this.write = function (dataBuf) { if (socket &amp;&amp; socket.writable) { //  ,     } else { connect(); } socket.write(dataBuf); } return this; } module.exports = Module;</span></span></code> </pre> <br><p> <em> 5. ,   TLS-</em> </p><br><p>       DNS-over-TLS ,   Google DNS.        ,               <code>socket = tls.connect(connectionOptions, () =&gt; {})</code> .     NodeJS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://nodejs.org/api/tls.html#tls_tls_connect_options_callback</a> ,       . </p><br><p>  TLS-   : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> options = { <span class="hljs-attr"><span class="hljs-attr">port</span></span>: config.upstreamDnsTlsPort, <span class="hljs-comment"><span class="hljs-comment">//        host: config.upstreamDnsTlsHost } const onData = (data) =&gt; { //     , .       7 }; remoteTlsClient = new TlsClient(options, onData);</span></span></code> </pre> <br><p> <em> 6.  TLS-</em> </p><br><p>     ,        TCP-.   TCP/TLS-      DNS-,     ,    ,     ,   .    TCP (  TLS),  DNS-   512 ,    UDP (,  EDNS    UDP  ).  ,  DNS-    UDP,             .       <strong>onData()</strong>   6. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onData = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    DNS-,       TLS-   //    ,     2 ,       let dataCurrentPos = 0; try { while (dataCurrentPos &lt; data.length) { const respLen = data.readUInt16BE(dataCurrentPos); respBuf = data.slice(dataCurrentPos + 2, dataCurrentPos + 2 + respLen); const respData = functions.parseDnsMessageBytes(respBuf); const requestKey = functions.getRequestIdentifier(respData); const localResponseParams = localRequestsAwaiting.get(requestKey); localRequestsAwaiting.delete(requestKey); server.send(respBuf, localResponseParams.port, localResponseParams.address, (err, bytesNum) =&gt; {}); dataCurrentPos += 2 + respLen; } } catch (err) { console.error(err); //   ,     throw err; } };</span></span></code> </pre> <br><p> <em> 7.   TLS-   DNS-   6</em> </p><br><h3 id="poryadok-otvetov-ot-udalyonnogo-dns-servera">     DNS- </h3><br><p>  ,            ,     .   ,         ID     QNAME, QTYPE  QCLASS  <em>Question</em> : </p><br><pre> <code class="plaintext hljs">Since pipelined responses can arrive out of order, clients MUST match responses to outstanding queries on the same TLS connection using the Message ID. If the response contains a Question Section, the client MUST match the QNAME, QCLASS, and QTYPE fields. () https://tools.ietf.org/html/rfc7858#section-3.3</code> </pre> <br><p>     ,  ,    ,   ID   <em>Question</em> (   ,      ). </p><br><p>        UDP (.  4),    ,         -,    ,   UDP-     .        ,       DNS-,       .          ,       -.  ,         ,      UDP-         -.  ,  ,    . </p><br><p>      TLS,               .         (IP  ),    ,       . </p><br><p>        IP      "-".   ,    ,   ,     DNS-.   ,    ,         IP  ,     .        7: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        const requestKey = functions.getRequestIdentifier(respData); //    IP    ,   const localResponseParams = localRequestsAwaiting.get(requestKey); localRequestsAwaiting.delete(requestKey); //      IP   server.send(respBuf, localResponseParams.port, localResponseParams.address, (err, bytesNum) =&gt; {});</span></span></code> </pre> <br><p> <em> 8.        7</em> </p><br><p>      TLS-: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,     const localReqParams = { address: linfo.address, port: linfo.port }; //        const requestKey = functions.getRequestIdentifier(dnsRequest); //       localRequestsAwaiting.set(requestKey, localReqParams); //       ,      const lenBuf = Buffer.alloc(2); lenBuf.writeUInt16BE(localReq.length); const prepReqBuf = Buffer.concat([lenBuf, localReq], 2 + localReq.length); remoteTlsClient.write(prepReqBuf); //  RFC-7766 p.8, 2               </span></span></code> </pre> <br><p> <em> 9.    DNS-  TLS- (  .  4)</em> </p><br><h2 id="chtenie-konfiguracii-iz-fayla-i-eyo-obnovlenie">        </h2><br><p>   ,   ,      .     JSON,    ,   NodeJS   JSON-      .  JSON тАФ      ,      .  ,    JSON-  "comment" (  )       . ,  ,  ,    ,  .  ,        ,     .      ,   -  ,    ,            NodeJS.    ,   ,     .  ,         ,       ;   ,   .           ,     - . </p><br><div class="spoiler"> <b class="spoiler_title"> 10.     </b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CONFIG_FILE_PATH = path.resolve(<span class="hljs-string"><span class="hljs-string">'./config.json'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Module</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// config  -,       . //    config        , //         . ,    : // const conf = config; //   conf     ,    : // const requestsToForge = config.requestsToForge; //    , requestsToForge   . const config = {}; Object.defineProperty(this, 'config', { get() { return config; }, enumerable: true }) this.initConfig = async function() { const fileContents = await readConfigFile(CONFIG_FILE_PATH); console.log('initConfig:'); console.log(fileContents); console.log('fileContents logged ^^'); const parsedConfigData = parseConfig(fileContents); Object.assign(config, parsedConfigData); }; async function readConfigFile(configPath) { const promise = new Promise((resolve, reject) =&gt; { fs.readFile(configPath, { encoding: 'utf8', flag: 'r' }, (err, data) =&gt; { if (err) { console.log('readConfigFile err to throw'); throw err; } resolve(data); }); }) .then( fileContents =&gt; { return fileContents; } ) .catch(err =&gt; { console.log('readConfigFile error: ', err); }); return promise; } function parseConfig(fileContents) { const configData = JSON.parse(fileContents); return configData; } //   ,       . //  Windows,    fs.watch     , //      ,   configReadInProgress let configReadInProgress = false; fs.watch(CONFIG_FILE_PATH, async () =&gt; { if(!configReadInProgress) { configReadInProgress = true; console.log('===== config changed, run initConfig() ====='); try { await this.initConfig(); } catch (err) { console.log('===== error initConfig(), skip =====,', err); configReadInProgress = false; } configReadInProgress = false; } else { console.log('===== config changed, initConfig() already running, skip ====='); } }); } let instance; async function getInstance() { if(!instance) { instance = new Module(); await instance.initConfig(); } return instance; } module.exports = getInstance;</span></span></code> </pre> <br><p> <em> 10.     </em> </p></div></div><br><h2 id="itogo">  рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░ </h2><br><p>    DNS-  NodeJS,     <em>npm</em>   .    ,        ,   ,  ,         . </p><br><p> <strong><a href="">   GitHub</a></strong> </p><br><h3 id="istochniki"> : </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RFC-1035</a> DOMAIN NAMES тАФ IMPLEMENTATION AND SPECIFICATION </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RFC-7858</a> Specification for DNS over Transport Layer Security (TLS) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RFC-7766</a> DNS Transport over TCP тАФ Implementation Requirements </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://stackoverflow.com/questions/4082081/requesting-a-and-aaaa-records-in-single-dns-query/4083071#4083071</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi440050/">https://habr.com/ru/post/hi440050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi440036/index.html">рдЯрдЪ рдЯрд╛рдЗрдкрд┐рдВрдЧ</a></li>
<li><a href="../hi440040/index.html">рд╡рд┐рдХрд╛рд╕ рдореЗрдВ - рдкреНрд░рддреНрдпреЗрдХ рд╕реНрд╡рдпрдВ рдХреЗ рд▓рд┐рдПред рд▓реЗрдХрд┐рди рдХрднреА-рдХрднреА рдпрд╣ рдПрдХ рдореГрдд рдЕрдВрдд рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИред</a></li>
<li><a href="../hi440044/index.html">рдХреНрд╡рд╛рд▓рдХреЙрдо рд╡рд┐рд╕реНрддреГрдд рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi440046/index.html">рдЦреБрд▓рд╛ рд╕рдмрдХ "рд╡рд╕рдВрдд рдкрд░ рдмрд╛рдХреА рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг"</a></li>
<li><a href="../hi440048/index.html">рдкрд╕рдВрджреАрджрд╛ рдореАрдЯреНрд░рд┐рдХ: 5 рд╕рдВрдХреЗрддрдХ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдмрд┐рдХреНрд░реА рдЯреАрдо рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi440052/index.html">рд╕реНрдЯреЗрдЯрд┐рдХ BIOS / UEFI рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдпрд╛ рдПрдХ рдирд┐рд░реНрднрд░рддрд╛ рдЧреНрд░рд╛рдл рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi440054/index.html">AWS рдХреЗ рд╕рд╛рде Yandex.Cloud рдкрд░ рд╡реЗрдм рд╕реЗрд╡рд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi440058/index.html">рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рдореБрджреНрджреЗ рдФрд░ рдЙрдкрд▓рдмреНрдзрддрд╛ рд░рд┐рдкреЛрд░реНрдЯ 2018тАУ2019</a></li>
<li><a href="../hi440060/index.html">Apache рдЗрдЧреНрдирд╛рдЗрдЯ рдкрд░ TensorFlow</a></li>
<li><a href="../hi440062/index.html">рдЦреБрд╢реА рдХреЗ рд╕рд╛рде рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣рд╛ рд╣реИред рд╣рдо рдкреНрд░рдмрдВрдзрдХреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>