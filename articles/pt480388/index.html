<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ‚Äçü§ù‚Äçüßëüèæ üè¢ üåü Confer√™ncia HACKTIVITY 2012. A teoria do Big Bang: A evolu√ß√£o do pentesting na seguran√ßa aprimorada. Parte 1 üîÉ üéë üèß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sauda√ß√µes a todos, como voc√™ est√°? Espero que voc√™ esteja bem, ent√£o ou√ßa. Ou√ßa o que sempre acontece comigo quando deixo a Am√©rica e venho para a √Åsi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confer√™ncia HACKTIVITY 2012. A teoria do Big Bang: A evolu√ß√£o do pentesting na seguran√ßa aprimorada. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/480388/"> Sauda√ß√µes a todos, como voc√™ est√°?  Espero que voc√™ esteja bem, ent√£o ou√ßa.  Ou√ßa o que sempre acontece comigo quando deixo a Am√©rica e venho para a √Åsia ou Europa, para todos esses outros pa√≠ses.  Come√ßo a falar, subo ao palco e come√ßo a conversar com as pessoas, digo a elas ... como diz√™-las politicamente ... as pessoas que n√£o s√£o americanas tamb√©m s√£o boas pessoas e tenho o prazer de v√™-las e ouvi-las. <br><br><img src="https://habrastorage.org/webt/ca/cj/nh/cacjnhtswtueiv-0p5or-mnvryq.jpeg"><br><br>  Escute, acho que voc√™ vai me entender corretamente, ent√£o relaxe um pouco, endireite os ombros, estou falando s√©rio!  OK, quando estou fazendo meu trabalho aqui, quero que voc√™ entre em contato comigo, por assim dizer.  Eu tenho um ponto de acesso sem fio e alguns aplicativos vulner√°veis ‚Äã‚Äãem uma bagun√ßa completa, e tenho uma id√©ia de como colocar seus programas em uma bagun√ßa ... No ano passado, falei e fiquei b√™bado no palco; depois, um cr√≠tico me procurou e disse: ‚Äú Ei Joe, voc√™ teve uma apresenta√ß√£o normal, mas a demonstra√ß√£o claramente n√£o foi suficiente! ‚Äù  Portanto, hoje toda a minha apresenta√ß√£o ser√° uma demonstra√ß√£o s√≥lida e me pergunto o que mais voc√™ pode n√£o gostar. <br><br>  Portanto, "a evolu√ß√£o do pentesting em condi√ß√µes de maior seguran√ßa".  Estou quebrando a rede h√° 10 anos e, como eles eram uma merda, eles permaneceram os mesmos.  N√£o sei se voc√™ tem alguma experi√™ncia com eles, mas a rede ainda √© p√©ssima.  E os aplicativos ainda s√£o ruins.  O que est√° acontecendo agora?  Agora temos 50 milh√µes de produtos de seguran√ßa protegendo seus aplicativos, e da√≠?  - Que droga!  - E voc√™ sai com eles na rede, o que?  - Que droga!  - E temos um monte de coisas que protegem tudo isso √© uma porcaria! <a name="habracut"></a><br><br>  Ent√£o, qual ser√° o meu trabalho hoje?  Quem sou eu  A maioria das redes me conhece, sou negro nas confer√™ncias de seguran√ßa; sim, sou eu, o mesmo cara que costuma falar sobre: ‚Äã‚Äã"Bem, esse aqui, como ele ... um africano de cor ... j√° o vi antes!" <br><br>  Tudo bem pessoal, por algum tempo eu estava ocupado invadindo redes.  Ent√£o, eu sou uma bolacha, sou uma maldi√ß√£o, e quem me conhece tamb√©m sabe que eu gosto de beber rum e Coca-Cola.  Mas algo mudou na minha vida, eu comecei uma nova namorada, e ela √© louca porque eu bebo demais e ela realmente n√£o gosta de como eu como, √© por isso que eu preciso viajar, ent√£o tive que vir aqui, Eu tive que comer todo esse goulash gordo.  Ent√£o, por favor, n√£o diga a ela o que eu como e bebo. <br><br>  Neste slide, voc√™ v√™ minha primeira apresenta√ß√£o na DefCon h√° 10 anos, veja, ainda havia monitores CRT, algu√©m se lembra deles? <br><br><img src="https://habrastorage.org/webt/pc/42/mj/pc42mjp4ydb5kdewofzf4znsppo.jpeg"><br><br>  Conversei com muitas pessoas l√° e est√°vamos envolvidos em "captura de bandeira" com elas.  ‚ÄúCapturar a bandeira‚Äù - foi apenas uma experi√™ncia incr√≠vel que mudou milagrosamente minha vida, assim como Jesus, eu estava pronto para exclamar ‚ÄúAleluia!‚Äù, Foi t√£o incr√≠vel. <br>  Ent√£o, o que eu quero fazer √© criar o teste Capture the Flag para iniciantes.  Se voc√™ √© iniciante, provavelmente nunca participou do Capture the Flag.  H√° um curso de treinamento mensal para esse teste, que inclui o estudo de problemas de criptografia e descriptografia, teste de rede, teste de malware, estudo de problemas de engenharia reversa, uso de explora√ß√µes e outras coisas.  Este √© um evento muito s√≥lido e divertido.  Em suma, vamos tentar fazer algo semelhante. <br><br>  No slide, voc√™ v√™ as configura√ß√µes da rede sem fio, pe√ßo que voc√™ n√£o a quebre.  Se voc√™ deseja acessar uma rede chamada joe-hacktivity-demo, voc√™ pode usar esta senha. <br><br><img src="https://habrastorage.org/webt/r2/dv/rl/r2dvrlq9wdir7lez0ridc7vjhuq.jpeg"><br><br>  H√° um arquivo de texto aqui, o motivo para cri√°-lo √© simplesmente permitir que voc√™ copie e cole as informa√ß√µes na barra de endere√ßos do navegador.  Normalmente, as pessoas fazem isso com coisas como o Windows 7, mas tudo o que voc√™ precisa neste caso √© apenas um navegador da web.  Portanto, se voc√™ possui o Firefox, Chrome, basta abrir o iPad ou laptop, copiar esse texto e acessar o site da livraria on-line.  Eu tenho um sistema de detec√ß√£o de intrus√£o IDS, tenho o Snort Box em execu√ß√£o e vamos manter essa rede operacional.  N√≥s vamos usar um monte de aplicativos da web, um monte de inje√ß√µes de SQL, um monte de scripts entre sites nesse host que possui esse aplicativo da web.  Depois, temos outra "caixa" na qual h√° um firewall configurado para que eu possa orientar voc√™ sobre alguns IDs e firewalls.  N√≥s apenas chegamos l√°, discutimos e fazemos algumas coisas interessantes l√°. <br><br>  Ent√£o, preciso continuar explicando ou posso come√ßar?  OK, bem, vamos come√ßar.  Eu tenho um sistema de detec√ß√£o de intrus√µes complicado no meu laptop aqui.  Agora aumentarei a imagem na tela em que o arquivo de texto √© exibido.  Voc√™ pode verificar seu endere√ßo na barra do navegador, este √© o nosso arquivo de texto. <br><br><img src="https://habrastorage.org/webt/-1/qu/mo/-1qumosblpw12znrz150fq1plei.jpeg"><br><br>  Vou implementar scripts entre sites usando SQL trivial, mas se voc√™ quiser mexer com o aplicativo mais a s√©rio, poder√° verificar este arquivo de texto, que possui dois aplicativos.  O aplicativo na 2.6, desenvolvido na plataforma ASP.NET, verifica se a rede est√° funcionando, se trata de uma vers√£o atualizada da plataforma DotNet com uma biblioteca de scripts entre sites e alguns outros mecanismos de seguran√ßa, al√©m de um arquivo web.config modificado para carregar outras bibliotecas de seguran√ßa. <br><br>  O aplicativo em 2.7 √© o mesmo que o anterior, mas possui n√£o apenas todos os recursos de seguran√ßa DotNet, mas tamb√©m um firewall para aplicativos de rede.  Ent√£o, eu quero "confundir" esse aplicativo em 2.35 e vou falar sobre isso. <br><br><img src="https://habrastorage.org/webt/rv/u3/q6/rvu3q6d7ohjwa1k49insxm68why.jpeg"><br><br>  Se voc√™ estiver familiarizado com o b√°sico de scripts entre sites e inje√ß√£o de SQL, entender√° o que s√£o 2.6, 2.5 e 2.7.  Portanto, temos esse arquivo de texto que podemos copiar e colar.  Vamos falar sobre o par√¢metro que eu insiro na barra de endere√ßo do nosso site.  Este √© bookdetail.aspx? Id = 2, e o ponto de interroga√ß√£o significa que o ID do par√¢metro de ID de que precisamos √© 2. Na verdade, acontece que a interface do servidor da Web se comunica com o banco de dados do servidor da Web para descobrir se h√° uma entrada, relacionado a esse identificador de dados est√° um ID com um valor de 2. E o banco de dados responde √† interface: "sim, cara, eu tenho o que voc√™ precisa!" <br><br><img src="https://habrastorage.org/webt/fe/10/cz/fe10czujs1c1mpu2z8dehwwdmzw.jpeg"><br><br>  O que faremos agora √© verificar se a inje√ß√£o de SQL funciona para n√≥s.  Portanto, lan√ßaremos aqui um c√≥digo simples na forma de aspas no final e veremos que isso levou √† mensagem de erro "Abrir aspas ap√≥s a sequ√™ncia de caracteres".  Este √© um dos testes mais comuns quando voc√™ substitui um par√¢metro por aspas ou usa as aspas diretamente como par√¢metro.  Isso acontece com frequ√™ncia e n√£o h√° nada de surpreendente. <br><br><img src="https://habrastorage.org/webt/dw/t9/ef/dwt9efp_0in5gx-ktw6ap_y9lgi.jpeg"><br><br>  Vamos tentar um pouco diferente.  Substituirei a sequ√™ncia de par√¢metros pelo valor bookdetail.aspx? Id = 4.  Observe - quando substituo este 4 por dois, a p√°gina exibida muda, a imagem na parte superior da p√°gina muda.  Agora tente colocar os dois entre par√™nteses, a imagem mudou novamente.  Se eu escrever no final da linha (4-2), a imagem ser√° a mesma que com 2 no final da linha.  Se eu escrever entre colchetes (4-1), a p√°gina ter√° a mesma apar√™ncia que se eu colocasse o n√∫mero 3 no final, ou seja, igualei o ID ao triplo. <br><br><img src="https://habrastorage.org/webt/gr/ld/lp/grldlp-_adiuf2lmd8w1tm76mvc.jpeg"><br><br>  Ent√£o, qual de voc√™s se aprofundou nessas quest√µes enquanto fazia penteamentos?  Voc√™ pensa assim: "OK, colarei o c√≥digo SQL aqui na barra de endere√ßos e ele me redirecionar√° para a p√°gina inicial. Agora, altero-o e ele pode me enviar para onde eu precisar ou novamente para a p√°gina inicial".  Na verdade, voc√™ suprime mensagens de erro e a aus√™ncia de uma mensagem de erro ODBS faz com que voc√™ dance com alegria porque conseguiu injetar c√≥digo SQL. <br><br>  Vejo que algo est√° errado, mas n√£o consigo consertar.  E o que acontece?  Seu desenvolvedor se considera o mais inteligente porque conseguiu remover as mensagens de erro.  Mas o que realmente acontece quando voc√™ for√ßa o banco de dados a fazer todos esses c√°lculos aritm√©ticos? <br><br>  Portanto, o banco de dados executa este c√°lculo: (4-1) e obtemos a p√°gina 3. Acabamos de provar que a inje√ß√£o de SQL agora √© poss√≠vel.  Ent√£o voc√™ pode voltar ao desenvolvedor e dizer: ‚Äún√£o, n√£o, n√£o, cara, voc√™ ainda tem a op√ß√£o de inje√ß√£o de SQL, apesar de n√£o haver mensagens de erro!‚Äù  Voc√™ s√≥ pode consertar um pouco, e isso acontece o tempo todo e em qualquer lugar. <br><br>  Usei truques desse tipo, mas os jogos est√£o mudando e agora muitas pessoas usam o firewall de aplicativos da web.  Portanto, se voc√™ digitar algo como: 2 ou 1 em (selecione usu√°rio) - na sequ√™ncia de par√¢metros de endere√ßo, geralmente voc√™ recebe uma mensagem de erro devido ao prefixo incorreto do nome do propriet√°rio do banco de dados DBO (propriet√°rio do banco de dados) para este tipo de dados.  Nesse caso, o firewall cai na armadilha nesse est√°gio da escolha do usu√°rio e diz: "n√£o, n√£o, n√£o, n√£o posso fazer uma escolha"! <br><br><img src="https://habrastorage.org/webt/ao/_d/jx/ao_djxrzi_ykbi0d6jtokzhyn2a.jpeg"><br><br>  Portanto, quando voc√™ v√™ essas coisas, isso significa que, se voc√™ ainda n√£o descobriu se encontrou um firewall de aplicativo da web ou se n√£o est√° fazendo esses truques aritm√©ticos, ainda h√° uma boa maneira de descobrir se h√° uma inje√ß√£o de SQL nesse caso e se Este aplicativo da web √© um firewall. <br><br>  Eu vou lhe dizer que h√° uma coisa terr√≠vel - a necessidade de realizar pentesting na cadeia de varejo.  Algum de voc√™s sabe o que isso significa em ingl√™s?  PCI?  Eu odeio PCI, mas estou constantemente envolvido em protestos em redes de varejo.  O PCI √© um padr√£o de seguran√ßa de dados baseado no regulamento do padr√£o de seguran√ßa de dados da ind√∫stria de cart√µes de pagamento de 2008 (PCI DSS).  O "Retail Network Pentesting" permite verificar a conformidade com o padr√£o PCI e identificar amea√ßas reais. <br><br>  Esse padr√£o √© uma sabedoria infinita que diz a verdade: ‚Äúeles devem ... devem ser ...‚Äù e voc√™ deve usar padr√µes de criptografia segura de acordo com os padr√µes internacionais de autentica√ß√£o, e voc√™ o far√° ... ou poder√° usar o firewall do seu aplicativo da web. <br><br>  Todos os usu√°rios com quem trabalhei fizeram a coisa certa, realizaram modelagem de amea√ßas, marcaram uma reuni√£o, outra reuni√£o, depois se encontraram novamente e finalmente consertaram tudo.  Voc√™ acha?  E n√£o!  Eles "devolveram o caminh√£o" e seus sensores de estacionamento emitiram esses sinais reversos.  Eles simplesmente esconderam o problema em um arm√°rio, fora da vista, e disseram: "n√≥s consertamos tudo!" <br><br>  Agora vou mostrar mais uma coisa que, na minha opini√£o, √© muito interessante de se jogar.  Olha aqui.  Tudo o que fiz at√© agora √© implementar o SQL.  Agora vou fazer isso - selecionarei o endere√ßo do banco de dados principal, copio e colo na barra de endere√ßos do navegador.  Vemos que o primeiro banco de dados √© chamado ‚ÄúBookApp‚Äù quando o √∫ltimo par√¢metro na cadeia de par√¢metros de endere√ßo √© 0. <br><br><img src="https://habrastorage.org/webt/q8/kx/6f/q8kx6f1ac6dehn15lw1snvv1g0k.jpeg"><br><br>  Agora vou substituir este 0 por 1 e voc√™ ver√° o que aconteceu - vimos que o segundo banco de dados √© chamado de "mestre". <br><br><img src="https://habrastorage.org/webt/3e/pb/sl/3epbsl8zguntzpjbyf-hn1sto6o.jpeg"><br><br>  Em seguida, alteramos 1 para 2 e vemos que o pr√≥ximo banco de dados √© chamado "tempdb". <br><br><img src="https://habrastorage.org/webt/ww/rd/az/wwrdazqyxobccjlcwhpnp_cegek.jpeg"><br><br>  Agora me ajude!  Voc√™ poderia dizer que identificamos a inje√ß√£o de SQL?  Sim √© √≥timo!  Mas o problema √© que nada no meu programa de detec√ß√£o de intrus√µes IDS ficou vermelho!  Essa coisa, que n√£o fica vermelha na tela, quando fazemos inje√ß√£o de SQL, nenhuma amea√ßa foi detectada! <br><br><img src="https://habrastorage.org/webt/gn/6l/ne/gn6lnelzs8zv0ruhtft1vgrwhyg.jpeg"><br><br>  Ok, agora olhe aqui - eu tenho que fazer algo errado.  Eu n√£o tomo informa√ß√µes do banco de dados diretamente do banco de dados, e o que isso me diz que sublinho em vermelho? <br><br><img src="https://habrastorage.org/webt/cm/gs/b4/cmgsb4imuzmxn-x1lijs4qv3sys.jpeg"><br><br>  N√£o, espere um minuto!  Vou tentar fazer diferente.  Em vez da numera√ß√£o do banco de dados, vamos usar a numera√ß√£o da linha da tabela acima, que est√° escrita "Erro de inje√ß√£o SQL - recuperando 1 tabela do banco de dados". <br><br><img src="https://habrastorage.org/webt/ny/la/fq/nylafqurxoruhnv7l6otabj2a6m.jpeg"><br><br>  Copio esses dados e colo na barra de endere√ßos do navegador.  Veja o que temos agora - a frase (selecione o primeiro nome entre os assuntos em que xtype = char (85)) - fornece o qu√™? <br><br>  Certo, o nome do banco de dados principal do BOOKMASTER.  Eu acho que isso √© inje√ß√£o de SQL, quem pensa o mesmo?  At√© Stevie Wonder p√¥de ver que isso √© uma inje√ß√£o de SQL! <br><br><img src="https://habrastorage.org/webt/9i/yp/mj/9iypmjj5ikcindxxnlfumaqqsj4.jpeg"><br><br>  Mas vamos olhar aqui - 0 amea√ßas!  Mas este √© um sistema barato, possui erros, as regras n√£o foram atualizadas. <br><br><img src="https://habrastorage.org/webt/9y/s_/jl/9ys_jl4i2vm-uzc39uiv35bk_ao.jpeg"><br><br>  Acho que as regras de valida√ß√£o do IDS est√£o um pouco desatualizadas, baixei-as hoje de manh√£ e est√£o um pouco desatualizadas.  Talvez tenha entendido algo errado aqui, baixei as regras antigas e precisei fazer o download das regras mais recentes, que n√£o duram mais de tr√™s horas - n√£o sei. <br>  Mas vamos olhar mais longe.  E se tentarmos copiar outros dados sobre os quais ele diz "Erro de inje√ß√£o SQL - recuperando 2 tabelas do banco de dados". <br><br><img src="https://habrastorage.org/webt/nh/i0/3z/nhi03zugovirbczeg1lt8-wagg0.jpeg"><br><br>  Portanto, os registros do 2¬∫ banco de dados nos d√£o o que √© chamado de ‚Äúsysdiagrams‚Äù. <br><br><img src="https://habrastorage.org/webt/vi/6z/d-/vi6zd-xrbyuwgoeijb8q7jg-8lm.jpeg"><br><br>  Ou seja, fizemos a pergunta, o par√¢metro xtype = char (85)) e o nome 'BOOKMASTER' podem mostrar o nome de um n√≠vel superior a BOOKMASTER?  Em outras palavras, o sistema pode me fornecer o nome da tabela a seguir?  √â assim que listamos o banco de dados - assim que voc√™ recupera o nome do banco de dados e o nome da tabela, voc√™ continua perguntando: "Ei, cara, posso obter um nome de tabela maior do que o que estou vendo agora?" voc√™ apenas continua esse processo e obt√©m os nomes das novas tabelas. <br><br>  Mas vamos voltar e olhar para o meu programa - novamente mostra que o n√∫mero de amea√ßas de seguran√ßa exclusivas √© 0. Temos um problema novamente! <br><br><img src="https://habrastorage.org/webt/6f/mr/qa/6fmrqaviywm8s2gxqhyhd2fcu7k.jpeg"><br><br>  E se eu tentar a inje√ß√£o SQL baseada em uni√£o, SQL baseado em uni√£o?  Aqui eu tenho v√°rios outros tipos de inje√ß√µes de SQL e agora apenas inserimos uma linha que aponta imediatamente para um registro cujo ID √© 100. <br><br><img src="https://habrastorage.org/webt/ai/nf/gc/ainfgcjxnkklfuu7u9exi6c09vi.jpeg"><br><br>  Como resultado, obtemos a resposta de que o n√∫mero 100 est√° fora do intervalo de valores v√°lido.  Porque se eu tiver 10 colunas, posso escolher 5?  Claro!  Posso escolher 20 colunas de 10?  Claro que n√£o!  Ou seja, o banco de dados responde: "Desculpe, cara, mas n√£o tenho tantas colunas!"  √ìtimo, ent√£o eu mudo de 100 para 50, e ela novamente me escreve: "50 est√° fora de alcance".  Tudo bem, que tal 25?  N√£o, 25 tamb√©m est√° fora de alcance.  Diga-me o que mais discar?  13?  Este √© um n√∫mero azarado, mas bom, discamos 13 e tamb√©m est√° fora de alcance. <br><br>  Vamos pegar 9!  √ìtimo, os nove funcionaram!  Esta √© a entrada correta, preciso de mais de 9, mas menor que o valor limite, ent√£o vamos jogar um pouco mais para descobrir quantas colunas nossa tabela possui. <br><br><img src="https://habrastorage.org/webt/hh/bq/1j/hhbq1jbiljss5xl0lppwujmpufa.jpeg"><br><br>  Ent√£o, como determinamos quantas colunas est√£o em uma tabela?  Agora, inseriremos na barra de endere√ßos uma sequ√™ncia de 1 a 9, denominada ‚Äúdeclara√ß√£o de uni√£o‚Äù ou ‚Äúdeclara√ß√£o de uni√£o‚Äù. Esta instru√ß√£o combina o que o desenvolvedor escreveu com o que voc√™ mesmo escreveu. <br><br><img src="https://habrastorage.org/webt/cc/tj/8q/cctj8qaerpodaw_l5zx86uxbz-k.jpeg"><br><br>  Mas voc√™ precisa ter o n√∫mero certo de n√∫meros para as instru√ß√µes de ambas as op√ß√µes para descobrir em qual n√∫mero suas colunas terminam.  Vamos fazer esse truque - atribua ao n√∫mero 2 um valor negativo, ou seja, corrija-o na barra de endere√ßo 2 por ‚Äì2. Veja o que aconteceu. <br><br><img src="https://habrastorage.org/webt/aj/yt/gj/ajytgjkov3pmviccbhqhhxpjwh8.jpeg"><br><br>  A imagem com a capa do livro desapareceu, mas todos esses n√∫meros apareceram - esses s√£o os n√∫meros das colunas na tabela do banco de dados.  Vamos, me diga o n√∫mero!  Dois?  Bem, seja 2. Substituo 2 na sequ√™ncia pela palavra "usu√°rio" e agora o usu√°rio dbo aparece em vez do nome do livro 2 na p√°gina. <br><br><img src="https://habrastorage.org/webt/ce/xm/2t/cexm2tpudafrurugmn3rpf7ayrq.jpeg"><br><br>  E se eu for para o n√∫mero 3?  Juntos, escreverei a vers√£o n√∫mero 3 @@.  Veja o que temos na p√°gina agora? <br><br><img src="https://habrastorage.org/webt/x5/fm/5t/x5fm5tnz-4h_zhn2gpjldji277c.jpeg"><br><br>  OK agora pessoal me ajudem!  Podemos agora dizer que temos uma inje√ß√£o de SQL? <br><br><img src="https://habrastorage.org/webt/jl/_a/0u/jl_a0unrg_1jzho3eqepyzzqpmm.jpeg"><br><br>  Ainda nada!  O sistema de seguran√ßa n√£o v√™ nenhuma inje√ß√£o de SQL. <br><br>  Comecei minha carreira em seguran√ßa como analista de sistemas de detec√ß√£o de intrus√£o IDS.  Era uma vida terr√≠vel, era preciso observar as intercepta√ß√µes de pacotes o dia todo e, provavelmente, nada mais do que, provavelmente, casamento, para que n√£o o force a colocar uma bala na cabe√ßa. <br><br>  Quero dizer, eu era como os outros, eu assisti o dia inteiro que era muito ruim, e quando voc√™ come√ßa a ver essas coisas que passam por voc√™, √© simplesmente de tirar o f√¥lego, √© uma loucura. <br><br>  Ent√£o, digamos que vamos fazer algo interessante.  Talvez eu o tire daqui, copie e arraste para aqui.  Ent√£o, insiro a vers√£o do banco de dados, o nome do servidor na barra de endere√ßos e, em seguida, master.sys.fn_varbintohexstr (password_hash) - nada de interessante, certo? <br><br><img src="https://habrastorage.org/webt/hw/6p/lb/hw6plbcb6ystyg_x8hnzdmpq0za.jpeg"><br><br>  Agora, temos esses dados na p√°gina e acho que a linha superior ser√° √∫til para n√≥s. <br><br><img src="https://habrastorage.org/webt/ea/kx/ht/eakxht9v2sqnr4sqxj7t8vhrtyk.jpeg"><br><br>  O importante √© que possamos descobrir que o IDS √© a grande coisa √† nossa disposi√ß√£o!  Ent√£o quem est√° comigo?  Execute com urg√™ncia e compre um desses programas! <br><br>  A tela mostra que o programa novamente n√£o detectou nenhuma inje√ß√£o de SQL. <br><br><img src="https://habrastorage.org/webt/f_/h2/ht/f_h2htomyoonfz9pqbbgiflfroe.jpeg"><br><br>  Este √© apenas um √≥timo programa, √© ainda melhor do que pensamos, porque ele pode compilar todos esses logs de usu√°rio in√∫teis que ningu√©m nunca examina, e isso √© legal!  Ok, suponha que fa√ßamos algo interessante, afinal.  Usamos estes par√¢metros: 1 = 1, 1 = 2 e 1 * 1.  Um √© igual a um?  Sim  Um √© igual a dois?  N√£o, n√£o √© igual.  Mas o que precisamos fazer √© verificar se as altera√ß√µes na p√°gina correta que queremos dizer s√£o "enumeradas". <br><br><img src="https://habrastorage.org/webt/s-/hw/fx/s-hwfxr76esphjhym3ihhkrcmwq.jpeg"><br><br>  Copio e colo os par√¢metros da primeira linha 1 = 1 na barra de endere√ßos, olho a p√°gina e altero essa express√£o para 1 = 2.  Se a p√°gina mudar de alguma maneira "desonesta" - como voc√™ pode ver, realmente mudou -, com base nisso, do ponto de vista da programa√ß√£o, posso concluir que h√° uma inje√ß√£o de SQL.  Porque se eu usar 1 = 1 e 1 = 2, ent√£o posso fazer o seguinte: ‚ÄúOK, se eu usar o nome de usu√°rio dbo e 1 = 1, porque de acordo com as instru√ß√µes, se o nome de usu√°rio for dbo e 1 = 1, obtemos a p√°gina correta e, gra√ßas a isso, sei que o nome de usu√°rio √© realmente dbo ".  Isso est√° claro?  Bem, olhe novamente para a guia IDS - sem amea√ßas!  Eu digo que este √© um produto incr√≠vel. <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora vamos fazer uma coisa t√£o interessante. </font><font style="vertical-align: inherit;">Considere esses valores. </font><font style="vertical-align: inherit;">Um a mais que um? </font><font style="vertical-align: inherit;">√â claro que mais. </font><font style="vertical-align: inherit;">Mas ent√£o vem a coisa que eu realmente amo. </font><font style="vertical-align: inherit;">Essa express√£o √© "1 menor que mais que 1". </font></font><br><br><img src="https://habrastorage.org/webt/2o/nq/1l/2onq1l-0cqji08jpvclxqftpngg.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repito - estas s√£o apenas maneiras diferentes de fazer a mesma pergunta. </font><font style="vertical-align: inherit;">Quem tem filhos, voc√™ sabe como eles podem fazer perguntas. </font><font style="vertical-align: inherit;">"Posso ter esses cookies?" </font><font style="vertical-align: inherit;">- N√£o, voc√™ n√£o pode! </font><font style="vertical-align: inherit;">- Talvez eu possa ter esses chips? </font><font style="vertical-align: inherit;">- N√£o, n√£o h√° biscoitos! </font><font style="vertical-align: inherit;">"Ent√£o, talvez esses Oreos possam?" Eu sei disso, passei por isso. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25:50 min </font></font><br><br> <a href="https://habr.com/ru/company/ua-hosting/blog/480392/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confer√™ncia HACKTIVITY 2012. A teoria do Big Bang: A evolu√ß√£o do pentesting na seguran√ßa aprimorada.</font></font></a>  <a href="https://habr.com/ru/company/ua-hosting/blog/480392/">Parte 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/qBVThFwdYTc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um pouco de publicidade :) </font></font></h3><br> ,    .    ?     ?  ,     , <a href="https://ua-hosting.company/cloudvps/nl"> VPS    $4.99</a> , <b>  entry-level ,      :</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">   VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps  $19     ?</a> (   RAID1  RAID10,  24    40GB DDR4). <br><br> <b>Dell R730xd  2    - Equinix Tier IV  ?</b>    <b><a href="https://ua-hosting.company/serversnl">2  Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100   $199</a>  ! <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia sobre</font></font><a href="https://habr.com/company/ua-hosting/blog/329618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como criar um pr√©dio de infraestrutura. </font><font style="vertical-align: inherit;">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480388/">https://habr.com/ru/post/pt480388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480370/index.html">Confer√™ncia DEFCON 19. Os chefes adoram o Excel, os hackers tamb√©m</a></li>
<li><a href="../pt480374/index.html">Reagir √† DogBot da Robotics: Revolu√ß√£o na Ind√∫stria da Constru√ß√£o</a></li>
<li><a href="../pt480376/index.html">De jogos de computador a mensagens secretas: discuta ovos de P√°scoa em lan√ßamentos de vinil</a></li>
<li><a href="../pt480378/index.html">14 projetos de c√≥digo aberto para aprimorar as habilidades de ci√™ncia de dados (f√°cil, normal, dif√≠cil)</a></li>
<li><a href="../pt480386/index.html">Backups autom√°ticos de equipamentos de rede e seu armazenamento no sistema de controle de vers√£o</a></li>
<li><a href="../pt480390/index.html">ONYX BOOX Livingstone - um leitor de um formato popular em um design incomum</a></li>
<li><a href="../pt480392/index.html">Confer√™ncia HACKTIVITY 2012. A teoria do Big Bang: A evolu√ß√£o do pentesting na seguran√ßa aprimorada. Parte 2</a></li>
<li><a href="../pt480394/index.html">Entrada cont√°bil duplicada em um banco de dados relacional</a></li>
<li><a href="../pt480396/index.html">Criamos um aplicativo de desktop nativo de plataforma cruzada no Angular</a></li>
<li><a href="../pt480398/index.html">9 dicas muito √∫teis sobre JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>