<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐐 🕺🏻 🚄 Pendekatan canggih untuk mendeteksi batas menggunakan dinding kapal sebagai contoh 🥄 🤚🏽 📱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Informasi menarik 
 Gambar di bawah ini menunjukkan rekonstruksi jantung tiga dimensi, yang diperoleh sebagai hasil karya tomograf modern: 


 Untuk s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pendekatan canggih untuk mendeteksi batas menggunakan dinding kapal sebagai contoh</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/inobitec/blog/441204/"><h2>  Informasi menarik </h2><br>  Gambar di bawah ini menunjukkan rekonstruksi jantung tiga dimensi, yang diperoleh sebagai hasil karya tomograf modern: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uy/7v/fc/uy7vfcx7nzqfq_kqcnmu7xhzipq.png"></div><br>  Untuk skala, ketebalan bola aorta adalah 3,2 cm, pikirkan saja!  Namun, ketika orang memiliki masalah jantung karena pembuluh darah, maka, sebagai suatu peraturan, kita tidak berbicara tentang masalah besar seperti itu.  Gambar tersebut menunjukkan bahwa jantung dikelilingi oleh pembuluh yang lebih kecil, dan beberapa di antaranya bercabang langsung dari arteri besar.  Ini adalah apa yang disebut arteri koroner yang memberi makan jantung secara langsung dengan darah.  Jika penyempitan lumen (stenosis) terjadi pada mereka, misalnya, karena pembentukan kalsium, maka aliran darah berkurang.  Ketika stenosis diucapkan, nekrosis jaringan terjadi, dengan kata lain serangan jantung.  Selanjutnya, saya akan berbicara tentang pendekatan kami untuk menghitung batas pembuluh darah, yang sebagai hasilnya memungkinkan Anda untuk secara otomatis menemukan penyempitan dan memberi mereka perkiraan. <br><a name="habracut"></a><br>  Untuk memahami materi, Anda perlu memiliki pemahaman yang dangkal tentang volume, voxel dan intensitasnya.  Anda bisa mengetahuinya dengan membaca awal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> . <br><br>  Untuk mengevaluasi penyempitan kapal, kita perlu mengetahui lumen kapal atau batas internalnya.  Untuk melakukan ini, setidaknya deteksi semua kalsium.  Kami juga menemukan batas luar, karena memungkinkan untuk memperkirakan ketebalan dinding, yang juga berguna.  Untuk memulai, mari kita lihat skema deteksi batas penuh, dan kemudian kita akan menganalisis setiap tahap secara rinci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/cw/va/blcwvavrk6rpr7dncjp0ydgtxfo.png"></div><br><h2>  Merencanakan garis tengah </h2><br>  Tahap yang paling sulit dalam hal implementasi (setidaknya butuh waktu paling lama).  Metode ini didasarkan pada penggunaan matriks Hessian (Segmentasi Multi-Skala Kapal Menggunakan Peningkatan Matriks Hessian).  Lebih detail dalam artikel yang sudah disebutkan. <br><br><h2>  Mengiris </h2><br>  Kami hanya memiliki jalur sentral, dan kami membutuhkan intensitas voxel yang bergantung secara spasial yang dapat dengan mudah dikerjakan.  Untuk mendapatkannya, “tumpukan” irisan sedang berlangsung.  Sebagai permulaan, titik-titik ditetapkan pada jarak tetap pada garis tengah.  Kemudian tegak lurus dibangun dari setiap titik <img src="https://habrastorage.org/getpro/habr/post_images/629/d90/498/629d904983c27d11c1874e959481ac0e.svg">  .  Setelah adalah tegak lurus kedua <img src="https://habrastorage.org/getpro/habr/post_images/c49/6e6/18d/c496e618db88f915ed3d3fe3e8ffebf5.svg">  .  Dimana <img src="https://habrastorage.org/getpro/habr/post_images/715/6f4/21f/7156f421f73f84d8f74072c47d8feb40.svg">  - Arah garis tengah pada suatu titik.  Kedua tegak lurus dinormalisasi.  Di setiap titik <img src="https://habrastorage.org/getpro/habr/post_images/d76/c4d/c2b/d76c4dc2b17f00a09c864bf2d24ab365.svg">  vektor garis tengah <img src="https://habrastorage.org/getpro/habr/post_images/ccc/5f9/fa9/ccc5f9fa9ba4fd68b9d82f5f64c964a5.svg">  membentuk sistem koordinat 2d.  Jadi, irisan terbentuk: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1i/u3/fy/1iu3fy_dalyttcp8pm_5tbmvblu.png"></div><br>  Posisi voxel didefinisikan sebagai <img src="https://habrastorage.org/getpro/habr/post_images/61a/d30/8c1/61ad308c13008a755317c1e29b64d2c5.svg">  dimana <img src="https://habrastorage.org/getpro/habr/post_images/038/a72/de3/038a72de3b3aa84f6df45501491024e0.svg">  disini <img src="https://habrastorage.org/getpro/habr/post_images/c85/e97/693/c85e97693d356905ea98d6f6cbacc674.svg">  Apakah koordinat sebenarnya dari voxel, k adalah angka irisan.  Formula terbalik untuk koordinat nyata: <img src="https://habrastorage.org/getpro/habr/post_images/797/f2e/fae/797f2efaeb13453aa8d76293b288bd73.svg">  .  Saat pindah ke sistem koordinat baru, ruang yang dibentuk oleh irisan disederhanakan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pj/c3/cq/pjc3cqpbmjzhvsb2ioyumlgilam.png"></div><br>  Apa yang kita butuhkan! <br><br><h2>  Konstruksi perbatasan eksternal kapal </h2><br>  Mari kita lihat diagram: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gm/ii/i2/gmiii2tsk4iqtvaolp9y3fhvd9c.png"></div><br>  Kami memotong setumpuk irisan yang diperoleh pada tahap sebelumnya menjadi delapan bidang (mirip dengan memotong kue) dan kami melakukan semua perhitungan dalam ruang pesawat: <br><br><div class="spoiler">  <b class="spoiler_title">Potong</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/jd/db/ovjddbzkgm-vdtrv6gcwzzuao1o.png"></div><br></div></div><br>  Jika Anda menampilkan nilai normal dari intensitas voxel yang mengenai bidang pemotongan, kami mendapatkan gambar berikut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/nf/km/uenfkmqzel_cvnooctxzi9cl-3m.png"></div><br>  Untuk mendeteksi batas-batas kapal, pendekatan klasik (deteksi tepi dengan gradien) digunakan bersamaan dengan pencarian jalur.  Skema: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/tu/ox/kwtuox6hip2d3cu0t65wj_z4fqc.png"></div><br>  1. Terapkan pemulusan Gaussian dengan nilai kecil <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  untuk menekan kebisingan: <br>  Untuk titik dengan koordinat <img src="https://habrastorage.org/getpro/habr/post_images/733/058/d18/733058d18a17c8fcbb58bb5b1879082a.svg">  : <br><img src="https://habrastorage.org/getpro/habr/post_images/2a4/722/67f/2a472267fd4f70baed2798401c41edd6.svg">  dimana <img src="https://habrastorage.org/getpro/habr/post_images/7ec/a6c/c6a/7eca6cc6aeb64ba5e76063f0019d9542.svg">  mengembalikan nilai intensitas pada suatu titik <img src="https://habrastorage.org/getpro/habr/post_images/65c/c1e/d7f/65cc1ed7f6ce98859b0f80176a24fc08.svg">  ;  r biasanya mengambil nilai <img src="https://habrastorage.org/getpro/habr/post_images/d02/f53/56b/d02f5356b7b9c5234d7c2975efd6a994.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/1b6/903/f11/1b6903f1101a871ba3ba64fe1924f873.svg">  - mengumpulkan); <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  - koefisien perataan. <br><br>  2. Pada setiap titik kami menemukan gradien dan nilainya, perhitungan dilakukan dengan nilai intensitas yang dihaluskan: <br><img src="https://habrastorage.org/getpro/habr/post_images/9d3/c90/939/9d3c9093937e8aff5520ded5071984ac.svg">  , <br>  dimana <img src="https://habrastorage.org/getpro/habr/post_images/698/280/401/6982804016ef30ecdc8ac8fddeb72c4e.svg">  - turunan pribadi.  Mereka ditemukan dengan metode beda hingga: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/791/209/8dc/7912098dc806f588c1458ad8b9faabdc.svg">  , <br>  dimana <img src="https://habrastorage.org/getpro/habr/post_images/b20/94b/690/b2094b69077bfe82f7dca9f140480d0b.svg">  - Intensitas pada suatu titik <img src="https://habrastorage.org/getpro/habr/post_images/65c/c1e/d7f/65cc1ed7f6ce98859b0f80176a24fc08.svg">  setelah dihaluskan. <br>  Selanjutnya kita perlu arah gradien <img src="https://habrastorage.org/getpro/habr/post_images/341/0a9/910/3410a9910584413131b3320a186f314b.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/64b/66b/58e/64b66b58e46e62b07ecb6e7b86851d21.svg">  Apakah normalisasi vektor) dan nilai gradien <img src="https://habrastorage.org/getpro/habr/post_images/e64/fb2/3c8/e64fb23c8f2225d8f538813e1fe4cbb3.svg">  ( <img src="https://habrastorage.org/getpro/habr/post_images/06d/0ad/537/06d0ad537ee5254e1af0392adeb5008d.svg">  Apakah panjang vektor) <br><br>  3. Arah gradien diterjemahkan dalam derajat atau radian: <br><img src="https://habrastorage.org/getpro/habr/post_images/89d/fd2/c8a/89dfd2c8ab531ad40fd223765fac9596.svg">  (atan2 () adalah fungsi dari garis singgung busur dalam C ++, tidak menjadi bingung dengan atan ()), maka kita membulatkan sudut sehingga dapat memiliki 4 nilai dengan peningkatan 45 derajat, mis.  atas dan bawah dianggap arah yang sama: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t3/tq/jx/t3tqjxxfdgjsdqubxdputqzbh8w.jpeg"></div><br>  4. Lakukan penindasan yang tidak maksimal.  Jika nilai gradien <img src="https://habrastorage.org/getpro/habr/post_images/e64/fb2/3c8/e64fb23c8f2225d8f538813e1fe4cbb3.svg">  setidaknya di salah satu dari dua titik tetangga (sesuai dengan arah gradien) lebih besar dari atau sama dengan nilai gradien pada titik saat ini, maka titik tersebut tidak dapat menjadi milik batas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/0d/tf/bf0dtfvisx3vymgm2fjjpj7cbxe.png"></div><br>  5. Semua voxel yang tersisa dianggap batas.  Berdasarkan nilai gradien, ambang batas kalsium (yang tidak segera tersedia) dan kedekatan dengan pusat "vertikal", setiap titik diberi biaya tertentu (semakin terang voxel, semakin tinggi prioritasnya ketika mencari jalan): <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/wn/ng/adwnng9jtvu5knuetwbngyhubq8.png"></div><br>  Dalam bentuk ini, batas kapal hampir secara unik didefinisikan. <br><br>  6, 7. Untuk membangun batas, kami menggunakan pencarian untuk path.  Poin ekstrim terdekat dengan biaya terendah diambil sebagai awal dan akhir.  Untuk mencari jalur, gunakan pencarian pertama yang sederhana, yang memilih titik batas biaya terendah.  Lompatan juga tersedia, tetapi harganya tinggi.  Batas atas dan bawah kapal dicari secara terpisah, dan kemudian smoothing diterapkan pada mereka: <br><br><div class="spoiler">  <b class="spoiler_title">Hasil</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/t_/67/_u/t_67_u6vbtpbn5nthgj1uzfglle.png"></div><br></div></div><br>  Prosedur ini dilakukan untuk setiap bidang, yang menghasilkan enam belas cincin segmen untuk setiap irisan dalam tumpukan.  Cincin-cincin ini membentuk batas luar kapal. <br><br>  Seperti yang dapat Anda lihat dari gambar, ada area di mana batas terdeteksi salah.  Hal ini disebabkan oleh adanya kalsium, yang menghasilkan deteksi batas kalsium daripada batas pembuluh.  Untuk mencegah hal ini terjadi setelah deteksi batas pertama, perlu untuk menentukan ambang batas kalsium (lebih lanjut tentang ini nanti), dan kemudian melakukan deteksi batas kedua, mengabaikan voxel terkait dengan kalsium.  Lalu kita dapatkan: <br><br><div class="spoiler">  <b class="spoiler_title">Hasil yang bagus</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7p/we/tz/7pwetz2lmrhzbikdhjpjmwsc7rw.png"></div><br><h2>  Deteksi ambang batas internal, batas eksternal dan ambang batas kalsium </h2><br>  Setelah batas eksternal diketahui, kita perlu mengumpulkan informasi statistik.  Yakni, intensitas semua voxel yang ada di dalam kapal. <br></div></div><br><h2>  Deteksi ambang batas </h2><br>  Sekarang perhatikan maksimalisasi algoritma clustering ekspektasi (selanjutnya disebut EM).  Mari kita mulai dengan fungsi distribusi normal: ini ditandai dengan ekspektasi matematis <img src="https://habrastorage.org/getpro/habr/post_images/849/a42/16c/849a4216c1bc55877bc86f4a97513f7a.svg">  dan standar deviasi <img src="https://habrastorage.org/getpro/habr/post_images/77c/f13/7bb/77cf137bb0d151fa8fc5a4eb4a7f21e0.svg">  .  Begini cara mereka memengaruhi tipe distribusi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1f/vg/gj/1fvggjfo2r_nz87bzdb3kngomri.gif"></div><br><br>  Misalkan kita memiliki data (titik) yang berasal dari sumber "kuning" dan dari sumber "biru": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rw/9q/er/rw9qern6glz7e696mx7k1sviuom.png"></div><br>  Kemudian, dengan menggunakan rumus standar, kita dengan mudah menemukan mean dan standar deviasi untuk setiap sumber.  Rumus untuk sumber "a": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c13/a5b/94d/c13a5b94d8d81bc4353b884bc8970aeb.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/154/906/8ae/1549068ae55c21dcb6e7efa2d3185f56.svg"><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/js/jx/4xjsjxajyvozdnueljew75whnyg.png"></div><br>  Tetapi bagaimana jika kita mengetahui jumlah sumber, tetapi tidak tahu titik mana yang berasal dari sumber yang mana?  Bagaimana jika kita memiliki gambar seperti itu? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ei/cb/9a/eicb9atkan-akjv2zgp9rodyow0.png"></div><br>  Jika seseorang datang dan memberi tahu kami parameter distribusi, maka kami dapat dengan mudah menghitung probabilitas setiap titik milik masing-masing sumber.  Probabilitas bahwa titik tersebut berasal dari sumber "a": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c24/2eb/8d9/c242eb8d94d7b7a7ad237c8509b54d65.svg">  dimana <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75c/129/b81/75c129b8112508e711b04727e48b05d3.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/7b0/a47/b22/7b0a47b2227447f62daaf67a8fc519b0.svg"><br><br>  Dan jika kita perlu menghitung parameter sumber, mengetahui probabilitasnya: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb6/eee/7f9/cb6eee7f9578ca134c470c445f69bdd6.svg"><br><img src="https://habrastorage.org/getpro/habr/post_images/bf3/2e7/ed5/bf32e7ed508e6dcd536ee3fe6ab63f32.svg"><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ws/ok/gf/wsokgf4bevva43d9cxzhktmzzws.png"></div>  Dengan demikian, lingkaran setan diperoleh: jika kita mengetahui parameter dari sumber, kita akan menghitung titik mana yang berasal dari sumber mana, tetapi kita tidak tahu parameternya.  Dan jika kita tahu titik mana milik sumber mana, kita akan menghitung parameternya, tetapi kita tidak tahu titik mana milik sumber mana.  Menyeimbangkan antara fakta-fakta ini persis seperti yang dilakukan algoritma EM. <br><br>  Pada saat start-up, EM menerima beberapa parameter yang telah ditentukan untuk sumber, yang dapat dipilih secara acak.  Tentunya, jika parameter diketahui, maka kita dapat menghitung probabilitas setiap titik milik masing-masing sumber.  Sekarang setelah probabilitas diketahui, kita dapat menghitung parameter baru yang lebih akurat.  Kemudian mulai dari awal lagi, tetapi dengan parameter baru.  Setelah setiap siklus, parameter sumber menjadi lebih akurat. <br><br>  Bagaimana kita bisa menggunakan pengetahuan ini dalam kaitannya dengan kapal?  Mari kita lihat struktur salah satunya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gq/il/st/gqilstduy1jpu4f_e7wiu0hns2g.png"></div>  Dalam diagram, titik ini biasanya dihilangkan, tetapi formasi lemak dan kalsium juga ada di dalam pembuluh.  Dengan demikian, setiap voxel akan menjadi milik salah satu jaringan.  Setelah percobaan, ternyata cukup membuat divisi berikut: <br><br>  - gendut <br>  - dinding # 1 <br>  - dinding # 2 <br>  - media kontras <br>  - kalsium <br><br>  Distribusi intensitas voxel dalam setiap kasus adalah normal.  Yaitu  kami memiliki semua yang kami butuhkan untuk menggunakan EM untuk menemukan parameter dari setiap sumber. <br><br><div class="spoiler">  <b class="spoiler_title">Hasilnya cukup bagus</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f3/ht/_o/f3ht_obxm187_gnzmu8aue4sbbg.png"></div><br>  Garis hijau adalah histogram intensitas, garis merah adalah model matematika yang dihasilkan. <br></div></div><br>  Sekarang kita tahu parameter dari masing-masing sumber, kita dapat menghitung ambang - nilai intensitas, di persimpangan yang, keanggotaan voxel berubah dari satu sumber ke sumber lainnya.  Kami tertarik pada: <br><br>  1. Ambang batas batas luar kapal.  Jika intensitas voxel di bawah nilai ini, maka dianggap bahwa itu bukan milik kapal sama sekali; <br><br>  2. Ambang batas batas dalam kapal.  Jika intensitas voxel lebih besar dari nilai ini, maka itu <br>  mengacu pada lumen kapal, yaitu  ke campuran darah dan media kontras; <br><br>  3. Ambang batas kalsium.  Jika nilai intensitas voxel lebih besar dari nilai ini, maka itu mengacu pada kalsium. <br><br><h2>  Konstruksi perbatasan bagian dalam kapal </h2><br>  Seperti biasa, mari kita mulai dengan diagram, perhitungan dilakukan untuk setiap irisan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8a/-m/9v/8a-m9vgz6e1vywymf8xsnckgm4m.png"></div><br><br>  Jika Anda menampilkan data secara visual sesuai dengan ambang yang diperoleh pada langkah sebelumnya, kami mendapatkan gambar berikut: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/qr/uf/giqrufs9lrd7j1rup_-8ckjkpww.png"></div><br><br>  Warna merah adalah dinding kapal.  Warna hijau - izin.  Putih adalah kalsium. <br><br>  Hal pertama yang menarik perhatian Anda adalah kalsium "menggantung", yang tidak berdampingan dengan dinding mana pun.  Ini dianggap normal dan timbul karena smoothing yang diterapkan oleh tomograph itu sendiri. <br><br>  Pertama, Anda perlu mendapatkan batas sesuai dengan ambang, dan untuk ini algoritma marching squares digunakan.  Bisa dikatakan, lewat dalam dua tahap.  Pertama, area dibagi oleh kisi-kisi diskrit, dan kuadrat di mana nilai intensitas lebih besar dari atau sama dengan ambang batas dianggap "positif", sisanya dianggap "negatif". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3q/4f/rq/3q4frqwpj7hnj5nu-mu2fintttq.png"></div>  Setiap kali kita akan berada dalam semacam simpul, dan kita perlu menggambar kontur di sekitar kotak "positif".  Untuk membuat keputusan, kita akan mempertimbangkan tanda-tanda empat kotak tetangga: kiri atas, kiri bawah, kanan atas, kanan bawah.  Tidak termasuk simetri, kami tertarik pada tiga kasus. <br><br>  1. Tiga kotak dari satu tanda dan satu berlawanan, pergerakan kontur terjadi secara diagonal: <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j7/si/y_/j7siy_5nyv_vu-zjkt6lrxwtgwi.png"><br></div></div><br>  2. Dua kotak dengan tanda yang sama dan dua berlawanan, dan kotak dengan tanda yang sama ada di satu sisi, gerakan konturnya vertikal atau horizontal: <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ky/4u/0c/ky4u0chgxifkj8cbmysyygdmcwg.png"><br></div></div><br>  3. Dua kotak dengan tanda yang sama dan dua berlawanan, kotak dengan tanda yang sama ditempatkan di sisi yang berlawanan: <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ak/jc/fn/akjcfnqk3ekjhnynsk8gaqlpgu0.png"><br></div></div><br>  Ini adalah kasus luar biasa, untuk membuat keputusan, nilai rata-rata intensitas di keempat kuadrat diambil, dan jika lebih besar atau sama dengan ambang, maka pusatnya positif, dalam kasus lain - negatif.  Penting juga simpul mana yang saat ini ada: <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8r/qd/5m/8rqd5mrjzqmdivmw_dpyxpqbkbu.png"><img src="https://habrastorage.org/webt/tp/uf/y9/tpufy92j4dfe3vtindh4blsi-su.png"><br></div></div><br>  Algoritma marching kuadrat secara akurat dan jelas membuat kontur.  Dalam contoh di bawah ini, saya sengaja menggeser garis dari tengah sisi sehingga setiap langkah terlihat jelas. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gg/41/ld/gg41ldwyplhod11zpgqblopf7ho.png"></div>  Secara khusus, kasus pertama dan kedua: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fa/wq/oy/fawqoy8amtn9paiodwj6jowzql8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/1l/md/ra1lmdd4wobzgjt9tgyp7rzxznc.png"></div><br></div></div><br>  Untuk setiap bagian kapal, kami menemukan dua kontur utama - ini adalah kontur perbatasan luar dan kontur perbatasan dalam.  Kami segera "memotong" kontur luar dengan kontur luar kami yang lain, yang kami temukan di awal artikel dengan mencari jalur.  Ini dilakukan untuk mengabaikan cabang-cabang kapal.  Kita mengabaikan kontur kalsium yang terlalu jauh dari dinding bagian dalam, seolah-olah mereka tidak ada sama sekali, kita menemukan sisanya dan menggunakannya di masa depan.  Jika bagian tengah pembuluh berada di dalam kalsium, maka kami menggesernya ke arah yang paling dekat dengan sirkuit kalsium sampai bagian tengah berada di lumen (di wilayah hijau).  Seperti pusat yang diperbarui, saya akan memanggil posisi awal. <br><br>  Menurut skema, ada dua kasus: sederhana dan kompleks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ac/qq/1c/acqq1c5bc1mqei30gplmu2z2gok.png"></div><br>  Jika posisi awal berada di dalam loop kalsium tertutup (misalnya, jika stent dipasang), maka kami segera menyamakan batas bagian dalam dengan loop ini.  Hal-hal lebih rumit ketika pusat berada di luar kalsium.  Dalam hal ini, kita perlu memperluas sirkuit awal sehingga lancar mengalir di sekitar kalsium dan batas dalam: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mz/ds/5w/mzds5whlkw7e3tffnl5crfvd-vk.gif"></div><br>  Untuk mencapai hasil yang diinginkan, algoritma khusus dikembangkan berdasarkan ide yang digunakan dalam mesin 2d fisik, khususnya pemecahan tabrakan poligon dan teorema sumbu terpisah. <br><br>  Dua konsep dasar yang tidak dapat disingkirkan: untuk memotong poligon cembung, vektor mtv (vektor terjemahan minimum) adalah perpindahan terkecil dari salah satu poligon, setelah itu persimpangan berhenti. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/yh/_9/nsyh_9qufvxdkohpt_fsjejwdx8.png"></div>  Kita juga membutuhkan normalan poligon - dalam 2D ​​mereka tegak lurus ke wajah dan menunjukkan "keluar": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y3/fc/fi/y3fcfiywkig3dbgrxkhw9twh1gk.png"></div>  Agar tidak membuat artikel panjang, saya akan menghilangkan sisa detail mengenai mesin fisik.  Satu-satunya hal yang saya perhatikan adalah bahwa selama setiap iterasi, setiap titik dalam kontur mengakumulasikan pengaruh gaya pada dirinya sendiri dalam bentuk vektor, dan pada akhir setiap iterasi ia bergeser dengan panjang vektor ini ke arahnya.  Pertimbangkan kekuatan: <br><br>  1. Dua gaya bekerja pada setiap simpul dari kontur awal ke arah simpul-simpul yang bertetangga, dan gaya-gaya tersebut berbanding lurus dengan jarak ke simpul-simpul ini.  Ini membuat garis mengecil dan berusaha untuk mempertahankan bentuk membulat; <br><br>  2. Jika vertex dari kontur samping berada di dalam kontur awal, maka offset sebanding dengan vektor mtv verteks dari verteks diterapkan ke wajah terdekat dari kontur awal; <br><br>  3. Jika bagian atas kontur awal berada di dalam kontur samping, maka offset sebanding dengan vektor mtv verteks dari titik diterapkan ke bagian atas kontur awal.  Ini, bersama dengan paragraf sebelumnya, tidak memungkinkan sirkuit melampaui batas sirkuit lain; <br><br>  4. Jika case 2 dan 3 tidak berfungsi untuk vertex, maka gaya diberikan padanya dengan arah rata-rata dari dua normals dari permukaan yang berdekatan.  Ini memastikan pertumbuhan kontur "luas". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lz/by/zx/lzbyzx2rujiluinvtom2jj6tana.png"></div>  Penting: Anda tidak dapat menggeser titik atau wajah sepenuhnya dengan panjang vektor mtv - itu dikalikan dengan koefisien tertentu dalam kisaran 0,2 hingga 0,8.  Koefisien untuk setiap gaya dalam kasus yang tersisa dipilih secara eksperimental. <br><br>  Berkat pendekatan ini, kami menemukan lumen pembuluh, dengan mempertimbangkan fakta bahwa kalsium tidak berdampingan dengan dinding.  Sekarang cukup gabungkan hasil dari semua bagian dan dapatkan batas dalam dan luar kapal: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/4z/z7/gv4zz7jnpkx4jdrb1ojm8xojcce.png"></div><br>  Ketidakakuratan perbatasan setelah stent disebabkan oleh bifurkasi anomali: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/i-/cx/ubi-cxfe-hfuys8ufibs97o8xes.png"></div><br>  Area perbatasan bagian dalam pada pemotongan akan mencirikan pembukaan yang sangat kami minati.  Penggunaan lebih lanjut dari data ini saya anggap sepele dan tidak memerlukan pertimbangan.  Akhirnya, saya akan meninggalkan gambar perbatasan dalam yang diekspor dalam 3D: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/cv/g4/blcvg4klqzx9imn2qcgw6cizyay.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id441204/">https://habr.com/ru/post/id441204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id441192/index.html">Menggunakan kekuatan komputasi R untuk menguji hipotesis persamaan cara</a></li>
<li><a href="../id441194/index.html">Buku "GraphQL: Bahasa Query untuk Aplikasi Web Modern"</a></li>
<li><a href="../id441196/index.html">Pada siapa dan untuk apa utusan akan “mengetuk”</a></li>
<li><a href="../id441198/index.html">Dinamika spiral Scrum dan Graves: bagaimana tidak lari ke terumbu</a></li>
<li><a href="../id441202/index.html">Apakah perusahaan jasa memimpikan produk mereka? Percakapan dengan Maxilect</a></li>
<li><a href="../id441206/index.html">Wolfensteiny 3D - rekayasa balik 251 byte JavaScript</a></li>
<li><a href="../id441208/index.html">Bagaimana kami mengurangi penerbitan pinjaman menjadi 2 klik</a></li>
<li><a href="../id441210/index.html">Penyimpanan kluster Alat pacu jantung + DRBD (Dual primer) + samba</a></li>
<li><a href="../id441212/index.html">Bekerja dengan perlindungan informasi kriptografis dan operator kunci perangkat keras di Linux</a></li>
<li><a href="../id441214/index.html">Panduan Pengguna Kibana. Visualisasi. Bagian 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>