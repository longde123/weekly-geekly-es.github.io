<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏻 👍🏽 🤚🏽 新闻提要：我们为什么这样做做错了？ ✍️ 😵 ✡️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您好，我叫德米特里·卡洛夫斯基，有消息给您。 好吧，作为新闻，我们以另一篇文章的形式重新审视了平常的事物。 您很可能会从任何新闻提要中找到它。 否则，如果新闻发布时间不正确，您将一无所获。 不管这篇文章对您有多有趣。 





 问题是磁带的形成方式以及用户与磁带的交互方式。 不幸的是，这里像往常...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>新闻提要：我们为什么这样做做错了？</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416555/"><p> 您好，我叫德米特里·卡洛夫斯基，有消息给您。 好吧，作为新闻，我们以另一篇文章的形式重新审视了平常的事物。 您很可能会从任何新闻提要中找到它。 否则，如果新闻发布时间不正确，您将一无所获。 不管这篇文章对您有多有趣。 </p><br><p><img src="https://habrastorage.org/webt/1z/ha/ep/1zhaepkopjovk7j3ul2nhiwgcbg.png" alt="典型新闻源"></p><br><p> 问题是磁带的形成方式以及用户与磁带的交互方式。 不幸的是，这里像往常一样，最简单的解决方案是极其错误的。 让我们看看为什么。 </p><a name="habracut"></a><br><h1 id="sposoby-potrebleniya"> 消费方式 </h1><br><p>假设某个用户要求我们提供一些实体的列表。 用户如何查看这些实体取决于他的目标。 有两种消费方式： </p><br><ol><li><p>  <strong>主动搜索。</strong> 用户正在寻找特定的东西。 他使用过滤和排序来缩小输出范围，然后顺序扫描材料，并检查每个材料。 重要的是，您要查看的列表在查看过程中不要更改，否则您可以轻松跳过要查找的内容。 </p><br></li><li><p>  <strong>被动搜索。</strong> 用户不需要任何特定内容。 相反，他希望服务查看该服务所具有的内容，并向用户显示他会感兴趣的内容。 在这里，向用户显示与特定用户最相关的材料非常重要。 他已经看到的完全不显示。 </p><br></li></ol><br><p> 因此，新闻提要仅用于被动消费这些新闻。 是的，用户可以借助过滤器来限制兴趣范围，但是他并没有在寻找任何特定的新闻，因为他很可能还不知道它，因此进入了提要以了解它。 他的满意程度取决于他看到了多少有趣（相关）的材料以及他看到了多少无趣的材料。 </p><br><h1 id="kriterii-relevantnosti"> 相关标准 </h1><br><p> 许多因素都会影响相关性。 例如，在任务管理器中更改分配给您的任务的优先级是非常重要的消息，应尽快向用户显示。 即使在那之后，还有许多其他任务的评论。 </p><br><p> 但是有一些通用标准，例如： </p><br><ol><li>  <strong>能见度。</strong> 如果用户已经看过此新闻并且以某种方式对其做出了反应（滚动，删除，标记为已读，转到详细信息等），则第二次他不想看到它。 </li><li>  <strong>相关性。</strong> 随着有关同一主题的最新新闻的出现，一些新闻失去了意义。 例如，从有关任务状态更改的新闻中，只有最新的一个有趣，反映了当前状态。 </li><li>  <strong>日期</strong> 新消息通常更有趣。 而且一些旧消息不再那么有趣了，最好不要显示它（例如，有一天前热水被关闭的消息）。 </li></ol><br><h1 id="lenty-v-zhivoy-prirode"> 野生动物中的磁带 </h1><br><p> 在大多数情况下，新闻提要是通过发布按其创建，发布或更改日期排序的材料来形成的。 即，根本不考虑其余的（更重要的）相关性标准。 最终，这导致用户不满意。 一些例子说明： </p><br><h2 id="lenta-vkontakte">  VKontakte饲料 </h2><br><p> 用户第一次打开新闻并按顺序查看它们-一切都很好。 一段时间后，顶部会出现一条通知，指出最近有一些新闻出现。 然后他有一个棘手的选择： </p><br><ol><li> 继续浏览提要 </li><li> 将提要倒带到开头以查看最新新闻（这不是更相关的事实）。 </li></ol><br><p> 由于磁带是准无限的，并且浏览器选项卡不能永远存在，并且没有人取消好奇心。 迟早，用户将再次处于磁带的“开始”位置。 好的，向下滚动。 没什么好麻烦的，当用户已经看到的消息突然开始继续时。 同样，用户并不是一个棘手的选择： </p><br><ol><li> 快速，迅速地结束录像带，减少管道中的Internet流量，希望结束他尚未见过的消息。 </li><li> 用磁带驱动器并执行其他操作。 </li></ol><br><p> 事实证明，每当用户没有收到任何新闻时，他就永远不会看到它们。 但是他们可能对他很有趣。 此外，他们可能很重要，并从根本上改变了他的生活。 </p><br><p> 这个问题是如此典型，以至于给它一个特殊的名字是正确的。 让它成为“零碎意识综合症”。 </p><br><h2 id="glavnaya-habra"> 哈布拉 </h2><br><p> 分页会加剧此处的SFO。 在页面之间切换时，用户会看到前一页的新闻。 而且，如果他在某个页面上停留的时间更长一点，那么他很容易连续获得几页的“屠杀”。 我在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关Pajinization</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">注释</a>中更详细地描述了此问题。 </p><br><h2 id="yutub"> 优酷 </h2><br><p> 在“推荐”中，只需给出18个经常令人恐惧的视频即可。 要查看建议中的新内容，您需要手动删除所有不会引起关注的内容。 当然，很少有用户会这样做。 在“订阅”中，它们只是按日期排序，因此用户永远不会看到旧的但可能对用户感兴趣的片段。 除非它在“推荐”中偶然发现它们。 </p><br><h1 id="koren-problemy"> 问题的根源 </h1><br><p> 当用户第一次打开提要时，他只有一个接收新闻的点-在上一次查看之后。 他低头看他们，突然出现第二个入口-上方。 而且很难说新闻在哪里更相关。 休息一会后，他返回时，至少要获得两点：录像带的开头和上一次看完新闻的地方。 并且由于私下地用户没有机会在之前观看之前观看新闻，因此新闻的这些接收点正在成倍增加。 </p><br><h1 id="reshenie"> 解决方案 </h1><br><p> 相关新闻的接收点应该只有一个。 同时，应该实时接收最相关的新闻。 在所有新闻中，可以区分以下几组： </p><br><ol><li>  <strong>可见的。</strong> 我们之前为他收集的新闻现在已经显示在屏幕上了。 </li><li>  <strong>已查看。</strong> 用户已经观看并滚动的新闻。 当新闻离开可见区域时，您可以安全地将其标记为已读。 </li><li>  <strong>故事。</strong> 为特定用户生成的新闻列表。 这既包括用户已经查看的新闻，也包括他现在正在查看的新闻。 </li></ol><br><p><img src="https://habrastorage.org/webt/8b/0j/vg/8b0jvgz6tzcec-rh15xsbtap2jq.png" alt="新闻组"></p><br><p> 理想情况下，即使重新加载页面也不应更改新闻列表中的任何内容。 当用户请求更多新闻时（通过单击按钮或向下滚动），我们现在选择最相关的新闻的另一部分并将其放入故事中。 因此，用户清楚地认为磁带是有趣的东西，并且没有改变。 他所见过的一切都是按照他看到的顺序进行的。 摇摇欲坠，他不断得到一些有趣的东西，而不必担心会错过什么。 没错，如果有很多新闻，可能需要长时间绕线。 </p><br><h1 id="relevantnost"> 相关性 </h1><br><p> 当然，最简单的事情就是简单地考虑最新新闻。 但是您可以让用户帮助服务了解他感兴趣的内容和不感兴趣的内容。 您可以通过添加删除新闻的功能来做到这一点。 如果用户不只是滚动新闻，而是删除新闻以使新闻不会阻塞他的故事，那么这种新闻对他来说就不那么有趣了，这些信息可用于后续的编辑。 </p><br><h1 id="api">  API </h1><br><p> 由于我们的历史是从末尾开始补充和查看的，因此我们不能使用传统的分页，因为新闻将不断在页面之间跳转。 另外，为DBMS请求大约100500页可能太重了。 因此，对于数据采样，我们将使用锚点。 为此，我们将在请求中指出以下数据： </p><br><ol><li>  <strong>锚点</strong> 新闻的标识符，应从中开始返回数据。 如果未指定锚，则将最后读取的新闻作为锚。 </li><li>  <strong>偏移量。</strong> 要采样的新闻数量。 该数字可以为正，然后新闻在锚点之后返回。 否定，然后新闻返回锚点。 </li></ol><br><p> 如果偏差为负，但锚点之前没有必要的新闻数量，则仅返回多少。 通过请求的数量和访问者数量的差异，客户可以了解我们正处在故事的开始。 </p><br><p> 如果偏见为正，并且主播之后没有必要的新闻数量，则将故事与当前最相关的新闻一起补充到所需的数量。 如果新闻完全结束了，那么，我们又返回多少，客户端将检测到磁带的结尾。 </p><br><h1 id="scenariy-zaprosov"> 查询脚本 </h1><br><p> 我们打开磁带，我们还没有锚点： </p><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /feed?<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><p> 我们要求未读新闻： </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> read_at <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><p> 用户看到上次停止阅读的未读新闻的选择： </p><br><pre> <code class="hljs powershell">[ { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">3232</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">5343</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">7346</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">9825</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">9967</span></span> } ]</code> </pre> <br><p> 用户向上摆动以查看上次看到的新闻： </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /feed?anchor=<span class="hljs-number"><span class="hljs-number">3232</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">-5</span></span></code> </pre> <br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt; <span class="hljs-number"><span class="hljs-number">3232</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><pre> <code class="hljs powershell">[ { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">323</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">329</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">544</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">843</span></span> } , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">898</span></span> } ]</code> </pre> <br><p> 用户摇摇欲坠以查看新内容： </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /feed?anchor=<span class="hljs-number"><span class="hljs-number">7346</span></span>&amp;<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span>=<span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &gt; <span class="hljs-number"><span class="hljs-number">7346</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><p> 如果您收到一点新闻，我们将选择历史中缺少的必要数量的最相关新闻，然后将它们添加到历史中，然后我们将所有信息一起返回： </p><br><pre> <code class="hljs powershell">[ { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">38574</span></span>} , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">47246</span></span>} , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">52378</span></span>} , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">69238</span></span>} , { <span class="hljs-type"><span class="hljs-type">id</span></span> : <span class="hljs-number"><span class="hljs-number">73294</span></span>} ]</code> </pre> <br><h1 id="realizacii-v-zhivoy-prirode"> 野生动物的认识 </h1><br><p> 如果您知道以这种或类似方式实现提要的任何服务，我将很高兴在此处发布指向它们的链接，以便读者可以欣赏这种方法的便利。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416555/">https://habr.com/ru/post/zh-CN416555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416545/index.html">切身体会：开发，拉取请求，提交，软件技能</a></li>
<li><a href="../zh-CN416547/index.html">Rostec离开Yota Devices，将向新华社订户提供具有两个屏幕的智能手机</a></li>
<li><a href="../zh-CN416549/index.html">救援微型潜艇正在测试中</a></li>
<li><a href="../zh-CN416551/index.html">幸福理论。 西瓜皮的规律和异常的正常性</a></li>
<li><a href="../zh-CN416553/index.html">交易所交易终端开发方式如何变化：2018年的4个趋势</a></li>
<li><a href="../zh-CN416557/index.html">GitLab 11.0：Auto DevOps和许可证管理发布</a></li>
<li><a href="../zh-CN416561/index.html">打印机住了，打印机住了，打印机会住了！ 佳能MG7140处理</a></li>
<li><a href="../zh-CN416565/index.html">亚马逊伐木场：灵魂的呐喊</a></li>
<li><a href="../zh-CN416569/index.html">像Prius，但仅在Linux上：考虑混合办公室</a></li>
<li><a href="../zh-CN416573/index.html">从任何地址发送电子邮件</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>