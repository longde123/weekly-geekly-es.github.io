<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ด๐ผ ๐๐ผ ๐ค ุชุฌุฑุจุชู ูู ุฅูุดุงุก ููุฒู "ูุง ุฐูู" ๐ฉ๐พโ๐คโ๐ฉ๐ผ ๐คท๐ฟ ๐ถ๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏ ุญุงู ููุชู ููุดุงุฑูุฉ ุชุฌุฑุจุชู ูู ุฅูุดุงุก ููุฒู "ุจุฏูู ุจูุช ุฐูู". ูุง ุฃุฑูุฏ ุญููุง ุงูุงูุฎุฑุงุท ูู ุฌุฏุงูุงุช ุญูู ูุง ูู ุงูููุฒู ุงูุฐูู ุชูุงููุง ููุง ูุฌุจ ุฃู ูููู ูุงุฏุฑูุง ุนูู ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุฌุฑุจุชู ูู ุฅูุดุงุก ููุฒู "ูุง ุฐูู"</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403869/" style=";text-align:right;direction:rtl">  ููุฏ ุญุงู ููุชู ููุดุงุฑูุฉ ุชุฌุฑุจุชู ูู ุฅูุดุงุก ููุฒู "ุจุฏูู ุจูุช ุฐูู".  ูุง ุฃุฑูุฏ ุญููุง ุงูุงูุฎุฑุงุท ูู ุฌุฏุงูุงุช ุญูู ูุง ูู ุงูููุฒู ุงูุฐูู ุชูุงููุง ููุง ูุฌุจ ุฃู ูููู ูุงุฏุฑูุง ุนูู ุงูููุงู ุจู.  ูู ุญุงูุชู ุ ุณูู ูุฑูุถ ูุญุฏุงุช wifi ูู Sonoff ูู ITEAD ููุชุนูู ุชุดุบูู / ุฅููุงู "ุงูุชุญููู" ูู ุงููุงุชู.  ุณูู ููุงูุด ุงูููุดูุฑ ููููุฉ ูููุถ ูุญุฏุฉ ุ ูุชูุตูู ูุณุชุดุนุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ / ุงูุฑุทูุจุฉ ุจุงููุญุฏุฉ ุ ููุนุฑูุฉ ููููุฉ ุงูุชุญูู ูู ุงููุญุฏุฉ ูู ุฎูุงู ุชุทุจููุงุช HomeKit ("ุงูููุฒู") ู Siri.  ุฃุถู ุฅูู ูู ูุฐุง ูุธุงู ุฅุฏุงุฑุฉ ุงูููุฒู ุงูุฐูู Domoticz ุนูู ุงูุชูุช pi.  ุฃุถู wifi ุฅูู ุขูุฉ ุงููููุฉ ูุนููู Siri ููููุฉ ูุชุญ ุงูุงุชุตุงู ุงูุฏุงุฎูู. <br><a name="habracut"></a><br>  ููุฏ ุทูุจุช ุซูุงุซ ูุญุฏุงุช ุณูููู ุชูููุฏูุฉ ููุงุญุฏุฉ SV (ุงูุฌูุฏ ุงูุขูู) ููุงุฎุชุจุงุฑ.  ูู ููุช ุงูุทูุจ ุ ุชููู ูุญุฏุฉ 4.85 ุงููุนุชุงุฏุฉ ุฏุงุฆููุง ุฎุถุฑุงุก ุ ุญุณุจ ุงููุฎุฒูู ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุณูู ูุจุฏู ุฏุงุฆููุง.  SV ุจุณุนุฑ ูุดุงุจู 4.85.  ูุน ุงูุชุณููู ุฅูู ุฃููุฑุงููุง ุ ูุงูุช ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ 26 ุฎุถุฑุงุก.  ุฐูุจุช ุงูุตูู ูุงูุตูู ูู ุฃูุฑูููุง ุ ูุงูุตูู ุ ูุฐูุจ ุงููุงู ุ ููุง ูุฒุงู ุฃูุงู ุงูุจุถุงุฆุน ุซูุงุซุฉ ุฃุณุงุจูุน ูุชููุนูุง ุ ูุฑุจูุง ุฃูุซุฑ.  ููููู ุจุงูุชุฃููุฏ ุงูุดุฑุงุก ูู ุฃููุฑุงููุง ูุนุฏู ุงูุงูุชุธุงุฑ ุ ูููู ุจุนุฏ ุฐูู ุฃุบูู ููููุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃูุฑุงุญ ุงูุฎุทูุงุช ุงูุฃููู ูุญู ููุฒู "ุจุฏูู ุจูุช ุฐูู" </h2><br>  ุฌุงุกุช ุฃุฑุจุน ูุญุฏุงุช ุ ูุชุนุจุฃ ุงููุญุฏุงุช ุงููุนุชุงุฏุฉ ูู ุตูุงุฏูู ุ ู SV ูู ููุณ ูุถุงุฏ ููููุฑุจุงุก ุงูุงุณุชุงุชูููุฉ.  ุงููุถูุฉ ูุงูุญุฌู ูุณุฑ. <br><br><img src="https://habrastorage.org/web/b03/b90/90e/b03b9090e5f2437fa0fc84260c747fff.jpg"><br><br>  ูู ุฃุตู ุนูููุฉ ุชุซุจูุช ุจุฑูุงูุฌ e-Welink ุงูุฃุตูู ูุชูุตูู ุงููุญุฏุฉ ุงูููุทูุฉ ุจุงูุดุจูุฉ ุงูููุฒููุฉ ุ ูุงูุชุนูููุงุช ุจุฃู ูุบุฉ ุนูู ุงูุฅูุชุฑูุช ุ ุฎุฐูุง - ูุง ุฃุฑูุฏ ุฐูู. <br><br>  ุฏูู ุงูุชูููุฑ ูุฑุชูู ุ ูุฐูุจ ุฅูู ุงูููุฑ ููุถูู ูุฐู ุงููุญุฏุฉ ุฅูู ูุตุจุงุญ ุงูุณูู.  ุงููุญุฏุฉ ุตุบูุฑุฉ ุงูุญุฌู ุ ูููุงู ูุณุงุญุฉ ูุจูุฑุฉ ูู ุงููุตุจุงุญ.  ุบุงูุจูุง ูุง ูุธู ุงูุถูุก ููุฏ ุงูุชุดุบูู ูู ุงูููุฑ ุ ูุงูุขู ููููู ุฅููุงู ุชุดุบูู ุงูุถูุก ูู ุงูุณุฑูุฑ ุฃูุงู ุงูุชููุฒููู.  ุชู ุจุงููุนู ุฅุตูุงุญ ุงูุดูุฉ ูู ูู ููุงู ููุชู ุชุซุจูุช ุงูููุงุชูุญ ุงูุชูููุฏูุฉ.  ูุง ุชููุณ ุงูุฅุตูุงุญ ูุงุณุชุฎุฏุงู ุงูุฃุณูุงู ุงูููุฌูุฏุฉ. <br><br>  ุงุชุถุญ ููุทู ุงูุนูู ุงูุชุงูู: <br><br>  - ุงูููุชุงุญ ูุบูู ุ ุซู ูุง ุชุนูู ุงููุญุฏุฉ ุงูููุทูุฉ ุ <br>  - ุงูููุชุงุญ ููุฏ ุงูุชุดุบูู ุ ุซู ูููู ุฅููุงู ุชุดุบูู ุงูุถูุก ูู ุงูุชุทุจูู ุ <br>  - ูุชู ุชุดุบูู ุงูููุชุงุญ ูุฅุทูุงุก ุงูุถูุก ูู ุฎูุงู ุงูุชุทุจูู ุ ุซู ูุชุดุบูู ุงูุถูุก ุ ูู ุงูุถุฑูุฑู ุฅููุงู / ุชุดุบูู ุงูููุชุงุญ ุ ุฃููุงู ุถุจุท ูุญุฏุฉ "ูุตุฏุฑ ุงูุทุงูุฉ ูู ุงููุณู" ุนูู ON (ุนูุฏ ุชุดุบูู ูุญุฏุฉ ุงูุชุชุงุจุน ุ ุณูุชู ุชุดุบูู ุงูุถูุก). <br><br>  ุงูุฑุญูุง. <br><br>  ุชูุช ุฅุถุงูุฉ ุงููุญุฏุฉ ุงูุซุงููุฉ ุฅูู ุงููุตุจุงุญ ูู ุบุฑูุฉ ุงูููู.  ุซู ูู ููู ุงููุตุจุงุญ ูุงุณุนูุง ููุง ูู ุงูููุฑ.  ุงุถุทุฑุฑุช ุฅูู ุฑูุน ุงูุญุงูุฉ ููููุงู ูุชูููู / ูุทุน ุงูุฒุฑ ุ ููู ููู ููุงุณุจูุง ูู ุงูุงุฑุชูุงุน.  ุซู ูุชู ุฅุฎูุงุก ุงููุญุฏุฉ ุจุฏูุฉ ูู ุงููุตุจุงุญ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุญู ูุนูุฏ ุชุดููู ุงูููุชุงุญ ุชุญุช ุงูุฒุฑ </h3><br>  ูุชู ุชุซุจูุช ููุงุชูุญ ุดูุงูุฏุฑ ูููููุง ูู ุงูุดูุฉ.  ููููู ุฅุนุงุฏุฉ ุตูุน ูุฐุง ุงูููุชุงุญ ุนู ุทุฑูู ูุถุน ูุงุจุถ ุชุญุช ุงูููุชุงุญ ููุฏ ุชู ุฅุนุฏุงุฏ ุงูููุงู ูุณุจููุง ูุณุจููุง. <br><br>  ุฃุซูุงุก ุงููุชุงุจุฉ ุนูู ุงูุฅูุชุฑูุช ุ ููููู ุชุฌุฑุจุฉ ุงูุฑุจูุน ูู ุฃููุงู ุญุจุฑ ุฌุงู.  ูุดูุช ูุญุงููุงุชู ูุชุซุจูุช ุฒูุจุฑู ูู ููู ุญุจุฑ ุฌุงู.  ูุนูุฏ ุงููุงุจุถ ุงูุถุนูู ููุบุงูุฉ ูุงูุตูุงุจุฉ ุงูููุชุงุญ ุฅูู ูููุนู ุงูุฃุตูู. <br><br>  ูุชููุฒ ูุงุจุถ Schneider ุงูุฃุตูู ุจุงูุฎุตุงุฆุต ุงูุชุงููุฉ d = 3.6 ูู ุ ุณูู ุงูุณูู 0.6 ูู ุ ุงูุงุฑุชูุงุน 10 ูู.  ูู ุฃูุณููุง ุจูุฏู ุ ููู ุฃุฌุฏูุง ูุนุฑูุถุฉ ููุจูุน ุ ูุฌุฏุช ูุนูููุงุช ุนู ุงูุฑุจูุน ูู ุฃุญุฏ ุงูููุชุฏูุงุช. <br><br>  ุจุนุฏ ุงูุจุญุซ ูู ุงูููุฒู ุ ุชู ุงูุนุซูุฑ ุนูู ุฒูุจุฑู ููุงุซู ุ ูุฑู ุชูุงููุง ูุชูุช ุฅุถุงูุชู ุจูุฌุงุญ ุฅูู ุงูููุชุงุญ.  ุจุฏูู ุฅููุงู ุณูุช ูุงุญุฏ ูุญุตู ุนูู ุฒุฑ ุจุฏูุงู ูู ุงูุชุจุฏูู. <br><br><img src="https://habrastorage.org/web/092/72f/5ea/09272f5ea6f34969a9ce5c4774039141.jpg"><br>  <i>ูุจุฏู ููุฃูู ููุชุงุญ ูุน ุชุซุจูุช ุงูุฑุจูุน.</i> <br><br>  ุงูุขู ูุฏููุง ุฏุงุฆูุง ุงููุญุฏุฉ ูุน ุงูุณูุทุฉ ููู ุงูุดุจูุฉ.  ูู ุงูุฅุนุฏุงุฏุงุช ูููุง ุจุชุนููู ุฃูู ุนูุฏ ุชุทุจูู ุงูุทุงูุฉ ุนูู ุงููุญุฏุฉ ุงูููุทูุฉ ุ ุชุบูุฑ ุงููุญุฏุฉ ุญุงูุฉ ุงูุชุชุงุจุน. <br><br>  ููุทู ุงูุนูู ูู ูุฐู ุงูุญุงูุฉ: <br><br>  - ูู ูุญุฏุฉ sonoff ุ ููุงู ุฏุงุฆููุง ุทุงูุฉ ุ ุชุดุบูู ูุฅุทูุงุก ุงูุถูุก ูู ุฎูุงู ุงูุชุทุจูู ุ <br>  - ุงูุถุบุท ุนูู ุงูุฒุฑ ููุทุน ุงูุทุงูุฉ ููุบูุฑ ุงูุชุชุงุจุน ุญุงูุชู ุฅูู ุงูุนูุณ. <br><br>  ูููููุง ุงูุชุญูู ูู ุงูุญูู ุณูุงุก ูู ุฎูุงู ุงูุชุจุฏูู ุฃู ูู ุฎูุงู ุงูุชุทุจูู.  ูุนูู ุงูุชุทุจูู ุงูุฃุตูู ูุงููุญุฏุฉ ุงูููุทูุฉ ูู ุฎูุงู ุจุนุถ ุงูุฎุงุฏู ุงูุตููู. <br><br>  ูุนู ุ ูุนู ุ ุฃุนูู ุ ุฃุซูุงุก ุงูููู ููุงู ููุฒุฉ / ุงููุทุงุน ุ ูุชุดุบูู ุงูุฌูุฏ ููุถูุก ุงูุถูุก.  ุฎูุงู ุชุดุบูู ุงููุญุฏุฉ ุ ูู ูุญุฏุซ ูุฐุง ูู ูุจู ุ ูููููุง ูุนูุด ูู ุฃููุฑุงููุง ูุงูุนูุงููู ูููุฆุฉ ุจูุนูุฏ ุงููุทุงุน ุงูุชูุงุฑ ุงูููุฑุจุงุฆู. <br><br>  ุนูู ุงูุทุงููุฉ ูู ุงููุญุฏุฉ ุงูุซุงูุซุฉ.  ุงูู ุงูุช ุนุฒูุฒู  ูุณูููู ุจุงุฎุชูุงุฑ ููุงุทูู ูุณุฎุฑูุฉ! <br><br><h2 style=";text-align:right;direction:rtl">  ุชุซุจูุช ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุจุฏููุฉ </h2><br>  ุฃุธูุฑ ุชุดุฑูุญ ุงูุฌุซุฉ <s>ุฃู ุงููุฑูุถ ูุงุช ุจุณุจุจ ุชุดุฑูุญ ุงูุฌุซุฉ ุ</s> ูุฃูู ููุฌุฏ ููุงู ุชุญุช ุงููุดุท ููุฏุฉ 5 ุฏุจุงุจูุณ. <br><br><img src="https://habrastorage.org/web/643/e5a/1f4/643e5a1f425645aab6056fce519173d8.jpg"><br><br>  ูู ุงูุฒุฑ ุงูููุฌูุฏ ุนูู ุงูุนูุจุฉ (3.3v Rx ู Tx ู GND ู GPIO 14).  ูุญุงู ุงูุญุฏูุฏ ูู ูุชูุงูู ุงููุฏ ูุชูุตูู ูุญูู USB ุฅูู TTL.  ูู ููุงูุฆ USB ุฅูู TTL ููุฌุฏ 3.3 ูููุช ุ ูู ุฃุญุงูู ุชูููุฑ ุงูุทุงูุฉ ูููุญุฏุฉ ูู 5 ูููุช ูุฃูุง ูุง ุฃูุตู ุจูุง. <br><br>  ุงูุชุงูู ูู ุฌุฒุก ุงูุจุฑูุงูุฌ  ููุงู ุจุฑุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุซุงุจุชุฉ</a> ููุซู ูุฐู ุงููุญุฏุงุช ุนูู ุฌูุซุจ.  ุงูุขู ุธูุฑ ุจุงููุนู ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ</a> .  ูุง ูู ูุฐู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุฌูุฏุฉุ  ููุงู ุงูุชุญูู ูู ุงูููุจ ุ ุจุฑูุชูููู mqtt ุ OTA (ุนุจุฑ ุงูููุงุก) - ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุนุจุฑ ุงูููุงุก.  ุฃูุง ุจุงููุณุจุฉ ููุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฃุตููุฉ ุ ูุฅู ุจุฑูุชูููู mqtt ูู ุงููุนูุฏ ููุฅุถุงูุฉ ุ ููุฌุฏ ุฃูุถูุง OTA ุ ูููู ููุท ุฎุงุต ุจู.  ุนูุจ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฃุตููุฉ ูู ุฃููุง ูุง ุชุนูู ุฅูุง ุนูุฏ ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุงูุนุงูููุฉ.  ููุงุฐุง ูุญุชุงุฌ ูุฐุงุ  ูู ูุฐู ุงููุฑุญูุฉ ุ ููุณ ูู ุงูุถุฑูุฑู ... ุฎุงุตุฉ ุฃููุง ูุง ูุนุฑู ูุงุฐุง ูุฃูู ุชุฑุณู ูุญุฏุชูุง. <br><br>  ูู ุจุชุซุจูุช Arduino IDE.  ููุฏ ููุช ุจุชุซุจูุช ุงูุฅุตุฏุงุฑ ุงููุญููู 1.8.1.  ุชุชุทูุจ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฅุตุฏุงุฑ IDE 1.6.10 ุฃู ุฃุญุฏุซ. <br><br>  - ุฅุถุงูุฉ ุฏุนู ููุญุฏุงุช ESP8266 <br>  - ุชุซุจูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pubsubclient</a> <br>  โ ุงุจุญุซ ุนู ุงูููู src \ PubSubClient.h ููู ุจุชุบููุฑ ูููุฉ MQTT_MAX_PACKET_SIZE ุฅูู 400 ุฃู ุฃูุซุฑ (ุงูุขู ุชุทุงูุจ ุฅุตุฏุงุฑุงุช Tasmot ุจูููุฉ 500 ุฃู ุฃุนูู). <br><br>  ูู ุจุชูุฒูู ุงูุฑุณู ุ ููู ุจุชุฌููุนู ุจุฃุตุงุจุนู ูุชูุงุทุนุฉ ุ ููุฃูู ุฃู ูุณูุฑ ูู ุดูุก ุจุณูุงุณุฉ.  ูู ุชูู ูุฐู ุญุงูุชู ุ ููุฏ ูุฑุฃูุง ุงูุฎุทุฃ ูุฃุถููุง ุงูููุชุจุงุช ุงูุถุฑูุฑูุฉ ุงูุชู ูู ุชูู ููุฌูุฏุฉ.  ุจุถุน ุณุงุนุงุช ูู ุงูุนุฐุงุจ ูููุง ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุฏูู ุฃุฎุทุงุก.  (ูุงูุช ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุฃููู ููุช ุจุชุซุจูุช Arduino IDE ุนูู Win XP).  ูู ุจุชุญุฑูุฑ ููู ุงูุชูููู ูููุก ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฎุงุตุฉ ุจูุง. <br><br>  ุงูุญุฏ ุงูุฃุฏูู ุงูุฐู ุญููุชู ูู User_config.h. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">User_config.h</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><code>#define PROJECT "bath" //   -         <br> #define STA_SSID1 "your_wifi_station_id" //    <br> #define STA_PASS1 "your_pass" //     <br> #define STA_SSID2 "your_wifi_station_id_plus" //      <br> #define STA_PASS2 " " //      <br> <br> #define SYS_LOG_HOST "192.168.." //  ,    raspberry pi,    <br> //#define USE_I2C //      <br> //#define USE_IR_REMOTE <br> //#define USE_WS2812</code> <br> </div></div><br>  ููููุง ููุฅุตุฏุงุฑ ุ ูููู ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุฃุฎุฑู ูููููู ุฅููุงู ุชุดุบูููุง ุฏูู ุฏุงุนู.  ูู ุฃุญุฏุซ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ (Tasmota) ุ ูููู ุฅุฌุฑุงุก ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงูุฅุนุฏุงุฏุงุช ูู ุฎูุงู ูุงุฆูุฉ ุฅุนุฏุงุฏุงุช ุงูููุจ ูุชูุฑุงุฑูุง ูุน User_config.h. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุนุจุฆุฉ ุฑุณู: </h3><br>  - ูู ุจุฅููุงู ุชุดุบูู ุงูุทุงูุฉ ูู ุงููุญุฏุฉ (ุจุฃู ุทุฑููุฉ ููุงุฆูุฉ) ุ <br>  - ุงุถุบุท ุนูู ุงูุฒุฑ ุงูููุฌูุฏ ูู ุงููุญุฏุฉ ููู ุจุชูุตูู ุงูุทุงูุฉ.  ุงููุญุฏุฉ ุฌุงูุฒุฉ ูุชููู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุ <br>  - ุงููุฑ ููู ููุงูู ูู IDE ููุฑุฉ โโุฃุฎุฑู ูุนุจุฑ ุงูุฃุตุงุจุน ุ ููุชุธุฑ ุจุฏุก ุชุญููู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุฅูู ุงููุญุฏุฉ. <br><br>  ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุ ูุชุญูู ูู ุงูุฃุณูุงู ุ ููุง ุฅุฐุง ูุงู ูู ุดูุก ูุดุฏูุฏูุง ุจุฅุญูุงู ูู ูู ููุงู ุ ุฃู ุฑุจูุง ูุง ุชูุฌุฏ ุทุงูุฉ ูุงููุฉ ูู USB ุฅูู TTL ููุญุชุงุฌ ุฅูู ุฃุฎุฐ ูุตุฏุฑ ุฎุงุฑุฌู.  ูุฑูุต ูุน ุงูุฏู ูููุฑุฑ ุงูุฅุฌุฑุงุก. <br><br>  <b>ูุงู:</b> <i>ูุชู ุชูููุฑ ุงูุทุงูุฉ ูููุญุฏุฉ ุงูููุทูุฉ ููุท ูู ุฎูุงู ุฏุจุงุจูุณ 3.3 ูููุช.</i>  <i>ูุง ูููู ุชูุตููู ุจุญูู ุงูุทุงูุฉ ุ ุนุจุฑ ูุตุฏุฑ ุงูุทุงูุฉ ูููุญุฏุฉ ููุณูุง.</i>  <i>ููุชุจ ุงููุณุชุฎุฏููู ุฐูู ุงูุฎุจุฑุฉ ุฃู ุชุฒููุฏ 220 ูููุช ูููุญุฏุฉ ุจุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุญูููุง ุฅูู ูุจูุฉ ุตุบูุฑุฉ ูููููุง ูุจูุฉ.</i>  ูู ุฃุญุงูู ุ ูุง ุฃุนุฑู.  ูุฐูู ุ ุนูุฏ ูููุถ ุงููุญุฏุฉ ุ ูุชู ุชูุตูู ุฃุฑุจุนุฉ ุฃุณูุงู ููุท ุจุงูุฏุจุงุจูุณ ุจูุง ุ ููููู ุจุฅุฒุงูุฉ ูู ุดูุก ุขุฎุฑ. <br><br>  ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงููุญุฏุฉ ูุฌุจ ุฃู ุชุชุตู ุจููุทุฉ ุงููุตูู ุ ุงุจุญุซ ุนู ุนููุงู IP ูุงูุชูู ุฅููู ูู ุงููุณุชุนุฑุถ. <br><br><img src="https://habrastorage.org/web/c96/316/9a0/c963169a05594c6791d9dfdd706b365e.png"><br>  <i>ุธููุฑ ุตูุญุฉ ุงูุจุฏุงูุฉ.</i> <br><br>  ุฅุฐุง ูู ุชุชุตู ุงููุญุฏุฉ ุจููุทุฉ ุงููุตูู ุงูุฎุงุตุฉ ุจู ุ ูุชุงุจุน ุงูุฑูุต ุจุงุณุชุฎุฏุงู ุงูุฏู.  ููุงู ุญููู ูุฎุชููุฉ ุ ูู ุฅุทุงุฑ ูุฐู ุงูููุงูุฉ ูู ุฃุตู.  ุฑุงุฌุนุช ุงูุชููููุงุช ููุถ ููุท ุงููุญุฏุฉ ุงูููุทูุฉ ูุฑุฉ ุฃุฎุฑู. <br><br>  ุงูุขู ูุฏููุง ูุตูู ุงูููุจ ุฅูู ุงููุญุฏุฉ ูุฅุนุฏุงุฏุงุชูุง ุ mqtt ุ ูููู ูุถุน ุงูุฃุณูุงู ูู ุฏุฑุฌ ุ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ / ุงูุชุญุฏูุซ ุนู ุทุฑูู ุงูููุงุก. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฃูู ุณูุฑูุ </h3><br>  ูู ูุฐุง ุฑุงุฆุน ุจุงูุชุฃููุฏ ุ ููุฏ ุญุงู ุงูููุช ูุชุนูู ููููุฉ ุฅุฏุงุฑุฉ ูุฐุง ุงูุฎูุฑ ูู ุงููุงุชู.  ุฌุฑุจุช ุนุฏุฉ ุจุฑุงูุฌ ูู ุงูุชุทุจูู ูุฌูุงุฒ iPhone ููู ุฃุญุตู ุนูู ุฃู ุดูุก ูุซูุฑ ููุงูุชูุงู.  ุชูุฑุฑ ุงูุงุณุชูุงุฏุฉ ูู ุชุทุจูู Home ุฃู HomeKit ุ ููุง ูุฌุนู ูู ุงููููู ุฃูุถูุง ุงูุชุญูู ูู ุงููุญุฏุงุช ุงูููุทูุฉ ูู ุฎูุงู Siri. <br><br>  ูุฌุฏ ุนูู ุงูุฑู Raspberry pi ููุชุตู ุจุงูุดุจูุฉ.  ูู ุญุงูุชู ุ ูุงู ููุงู ุจุงููุนู "ุชูุช ุงูุนููู" ูุชุตู ุจุงูุดุจูุฉ.  ููููุฉ ุชุซุจูุช ูุธุงู ุงูุชุดุบูู ูุชูุตูู "ุงูุชูุช" ููุตู ุฐูู ูุง ูุนูู ูู. <br><br>  ููุชูุงุตู ูุน HomeKit ุ ูุฌุจ ุชุซุจูุช Homebridge.  Homebridge ูู ุฎุงุฏู NodeJS ูุนูู ุนูู ุดุจูุชู ุงููุญููุฉ ููุญุงูู iOS HomeKit API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo apt-get update sudo apt-get upgrade sudo apt-get install git make sudo apt-get install g++</code> </pre><br>  ุจูุงุกู ุนูู ูุธุงูู ุ ูุฏ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู C ++. <br><br>  ุชุซุจูุช Nodejs.  ูุฐูุจ ุฅูู ุงููุชุฌุฑ ููุฎุชุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">dist</a> ุงูููุงุณุจุฉ.  ุงูุณุฎ ุนููุงู ุงูุชูุฒูุนุฉ ูุงููุฒูุฏ ูู ุงูุตูุฑุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">wget https://nodejs.org/dist/v4.0.0/node-v4.0.0-linux-armv6l.tar.gz tar -xvf node-v4.0.0-linux-armv6l.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> node-v4.0.0-linux-armv6l sudo cp -R * /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/</code> </pre> <br>  ููุฏ ููุช ุจุชุซุจูุช v6.9.4 ูููุณู ุ ูููุงู ุงูุขู ุฃุญุฏุซ. <br><br>  ุฃุถู ุงูุญุฒู ุงูุถุฑูุฑูุฉ ุงูุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo apt-get install libavahi-compat-libdnssd-dev</code> </pre> <br>  ูู ุจุชุซุจูุช Homebridge ููุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge</code> </pre><br>  ุฅุฐุง ูู ูููุญ ุฐูู ุ ูุญุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge hap-nodejs node-gyp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/homebridge/ sudo npm install --unsafe-perm bignum <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/hap-nodejs/node_modules/mdns sudo node-gyp BUILDTYPE=Release rebuild</code> </pre> <br>  ุจุนุฏ ุชุซุจูุช Homebridge ุ ุชุญุชุงุฌ ุฅูู ุชุซุจูุช ุจุนุถ ุงูููููุงุช ุงูุฅุถุงููุฉ ุ ุซู ุชุงุจุน ุชุบููุฑ ุฅุนุฏุงุฏุงุช ุฎุงุฏู Homebridge. <br><br>  ูุชู ุชุซุจูุช ุงูุฅุถุงูุงุช ุจููุณ ุงูุทุฑููุฉ ุงูุชู ูุชู ุจูุง ุฌุณุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุณู <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo npm install -g --unsafe-perm homebridge-plugin-name</code> </pre> <br>  ูุฌุฏ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุงููุทููุจ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฏูุฑ ุงูุญุฒู</a> .  ููุงู ูุฌุฏ ูุซุงูุงู ููุฅุนุฏุงุฏุงุช ุงูุชู ูุฌุจ ุฅุถุงูุชูุง ุฅูู ุฅุนุฏุงุฏุงุชูุง. <br><br>  ูุชุจุฏูู ุจุณูุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm install -g homebridge-mqttswitch</code> </pre> <br>  ุงูุชูู ุฅูู ุงูุฅุนุฏุงุฏุงุช ุ ูุฃูุดุฆ ููู ุงูุชูููู ุ ุฅุฐุง ูู ููู ูุฏ ุชู ุฅูุดุงุคู ุจุงููุนู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre> <br>  ููู ุงูุชูููู ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">config.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"bridge"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Homebridge"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"CC:22:3D:E3:CE:30"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-number"><span class="hljs-number">51826</span></span>, <span class="hljs-attr"><span class="hljs-attr">"pin"</span></span>: <span class="hljs-string"><span class="hljs-string">"031-45-154"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"platforms"</span></span>: [ ], <span class="hljs-attr"><span class="hljs-attr">"accessories"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"accessory"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqttswitch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://192.168.178.123:1883"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"caption"</span></span>: <span class="hljs-string"><span class="hljs-string">"room"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"statusGet"</span></span>: <span class="hljs-string"><span class="hljs-string">"stat/sleeping/POWER"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusSet"</span></span>: <span class="hljs-string"><span class="hljs-string">"cmnd/sleeping/power"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"onValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"offValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"integerValue"</span></span>: <span class="hljs-string"><span class="hljs-string">"true"</span></span> } ] }</code> </pre><br></div></div><br>  ูุจู ุญูุธ ููู ุงูุฅุนุฏุงุฏุงุช ุ ุชุญูู ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .  ุจุนุฏ ุงูุญูุธ ุ ุญุงูู ุชุดุบูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Homebridge</code> </pre> <br>  ุฅุฐุง ุจุฏุฃ ูู ุดูุก ุ ูุณููุชุจ ุฅูููุง ุ ูุซู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"> 11:27:43 PM] [] Initializing mqttswitch accessory...</code> </pre><br>  ุณูุชู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุฑูุฒ 031-45-154 ููุงุชุตุงู ููุงู ุ ุฅุฐุง ูู ูุชู ุชุบููุฑู ูู ุงูุฅุนุฏุงุฏุงุช. <br><br>  ุงูุขู ูู ุจุชุดุบูู ุงููุงุชู / Planest ุงูุฐู ูุนูู ุจูุธุงู iOS.  ูุฌุฏ ุชุทุจูู "Home" ุฃู "HomeKit" โ ุฃุถู ููุญููุง ูุงูุชุธุฑ ุธููุฑ ููุญู "Homebridge" ุ ููู ุจุฅุถุงูุชู ุ ูุฃุฏุฎู ุงูุฑูุฒ ุ ููู ุจุชุนููู ุบุฑูุฉ ููููุชุงุญ.  ูููููุง ุ "ูุฑุญุจูุง ุณูุฑู ุ ุฃุดุนู / ุฃุทูุฆ ุงูุถูุก ูู ุงูุบุฑูุฉ" - ูุฌุญุช.  ูุนูู "Hi Siri" ุนูู ููุงุชู ุงูุณูุณูุฉ ุงูุฎุงูุณุฉ ููุง ุฏูููุง ููุท ุนูุฏ ุงูุงุชุตุงู ุจุงูุดุญู. <br><br>  ุฅุฐุง ูุงู ูู ุดูุก ูุนูู ุจุดูู ุตุญูุญ ุจุงููุณุจุฉ ููุง ุ ูุจูู ุฅุถุงูุฉ Homebridge ูุจุฏุก ุงูุชุดุบูู.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูููุงุช ูุงููุฉ</a> ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ.  ูู ุญุงูุชู ุ ุนุจุฑ <code>init.d</code> ุ ุฃูุดุฆ ุงูููู <code>sudo nano /etc/init.d/homebridge</code> <br>  ุงูุณุฎ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฐุฌ</a> ุฅูู ููู ูู ูุฐุง ุงูููู ูุบููุฑู ุฃุณูู ุฌุณุฑ ุงูููุฒู <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">/etc/init.d/homebridge</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> <code>#!/bin/sh <br> ### BEGIN INIT INFO <br> # Provides: homebridge <br> # Required-Start: $network $remote_fs $syslog <br> # Required-Stop: $remote_fs $syslog <br> # Default-Start: 2 3 4 5 <br> # Default-Stop: 0 1 6 <br> # Short-Description: Start daemon at boot time <br> # Description: Enable service provided by daemon. <br> ### END INIT INFO <br> <br> dir="/home/pi" <br> cmd="DEBUG=* /usr/local/bin/homebridge" <br> user="pi" <br></code> <br></div></div><br>  ุญูุธ ุ ุฎุฑูุฌ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo chmod 755 /etc/init.d/homebridge sudo update-rc.d homebridge defaults</code> </pre> <br>  ุณูุจุฏุฃ homebridge ุงูุขู ุนูุฏ ุจุฏุก ุชุดุบูู ุงููุธุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ูููู ุจุฑุจุท ูุณุชุดุนุฑ DHT22 (ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ / ุงูุฑุทูุจุฉ) </h3><br>  ูุงุญุธ ุงููุงุฑุฆ ุงูููุธ ุฃู ููุงู 5 ุฏุจุงุจูุณ ุนูู ุงููุดุท ูุฃุญุฏูุง GPIO 14. ูุฑุฉ ุฃุฎุฑู ูุฃุฎุฐ ุญุฏูุฏ ุงููุญุงู ูู ุฃูุฏููุง ููุตู ุงูุฃุณูุงู ุงูุซูุงุซุฉ ุฅูู 3.3V ุ GND ุ GPIO 14 ููุณุชุดุนุฑ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุฑุทูุจุฉ DHT22.  ููููู ุงุณุชุฎุฏุงู ูุณุชุดุนุฑ ุขุฎุฑ (ds18b20 ุฃู DHT 11 ุฃู ุขุฎุฑ ูุฏุนูู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช) ุ ููููู ูุงู DHT22 ูู ุตูุฏููู.  ุชู ุชูุตูู ุงููุณุชุดุนุฑ ุนุจุฑ ููุตู ุ ุชู ุชุซุจูุชู ุนูู ุฌุงูุจ ุงูุญุงูุฉ ุงูุฃุตููุฉ.  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุณูููู ูู ุงููููู ุชูุตูู ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุขุฎุฑ ุจุฏูู ูุดุฑุท ููููุงุฉ ูุญุงู. <br><br><img src="https://habrastorage.org/web/b68/643/a1f/b68643a1f956407286a799bb1b03d223.jpg"><br><br>  ูู ุงูุตูุฑุฉ ุ ููุช ููุชู ุจุชุซุจูุช ุงูููุตู ุ ูู ุฃููู ุจุชูุตูู ุงูุฃุณูุงู ุจุนุฏ.  ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ Sonoff-MQTT-OTA-Arduino ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs lisp">#define DHT_PIN <span class="hljs-number"><span class="hljs-number">14</span></span> // GPIO <span class="hljs-number"><span class="hljs-number">14</span></span> = AM2301 (<span class="hljs-name"><span class="hljs-name">Sonoff_TH10A</span></span>(<span class="hljs-number"><span class="hljs-number">16</span></span>A), Sonoff SV) #define DHT_TYPE AM2301 // DHT module type (<span class="hljs-name"><span class="hljs-name">DHT11</span></span>, DHT21, DHT22, AM2301, AM2302 or AM2321)</code> </pre> <br>  ุจุงููุณุจุฉ ูุจุฑุงูุฌ Tasmota ุงูุซุงุจุชุฉ ุ ูููู ุชุญุฏูุฏ ููุน ุงูุฏุจูุณ ูุงููุณุชุดุนุฑ ูู ุฅุนุฏุงุฏุงุช ุงูููุจ. <br><br>  ุฅุฐุง ุชู ุชูุตูู ูู ุดูุก ูุชููููู ุจุดูู ุตุญูุญ ุ ูุนูุฏ ุงูุฐูุงุจ ุฅูู ูุงุฌูุฉ ุงูููุจ ุ ุณูุฑู ุญุงูุฉ ุงูุชุชุงุจุน ููุฑุงุกุงุช ุงููุณุชุดุนุฑ.  ูู ุงูุฅุนุฏุงุฏุงุช ุ ููููู ุชุนููู ูุนุฏู ุงูุงูุชุฑุงุน ูุฌูุงุฒ ุงูุงุณุชุดุนุงุฑ.  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู 300 ุซุงููุฉ (5 ุฏูุงุฆู). <br><br><img src="https://habrastorage.org/web/3a2/4a3/3fb/3a24a33fbb3647979f69354039fb808c.png"><br><br>  ูุชุนูู ูู ุงูุจุญุซ ุนู ูููู ุฅุถุงูู ูู Homebridge ููุนูู ูุน ูุณุชุดุนุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ.  ูุญุชุงุฌ ุงูุขู ุฅูู ุนุฑุถ ูุฐู ุงููุฑุงุกุงุช ูู ุงูููุญู.  ุชูููุช ูู ุงูููุงู ุจูู ูุฐุง ุ ูููู IMHO ูุงู ุฃุดุนู ุงููุงุฑ ููุง ููุจุบู ุงูููุงู ุจู. <br><br>  ููุงุฐุงุ  ูู ุดูุก ุจุณูุท ููุบุงูุฉ ุ ููุท ุชูุฑูุฑ ุงููุณุชุดุนุฑ ุฅูู sonoff ูุง ูุนูู ูู ุ ุชุญุชุงุฌ ุฅูู ุชุดุบูู / ุฅููุงู ุดูุก ุจูุงุกู ุนูู ูุฐู ุงููุฑุงุกุงุช.  ูููู ูู ุฅุนุฏุงุฏุงุช ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุง ููุฌุฏ ูุซู ูุฐุง ุงูุงุญุชูุงู ุ ููู ุงููููู ุชูููู ุชุทุจูู Home / HomeKit ููุซู ูุฐู ุงูุฃุบุฑุงุถ ุ ููููู ุชุญุชุงุฌ ุฅูู ุฌูุงุฒ ููุญู ูููู ุฏุงุฆููุง ูู ุงูููุฒู ุฃู ุชููุฒููู Apple.  ูุงุฏูู ุงูุชูุงุฌุฏ ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูููุฏุฑุฉ ุนูู ุงูุชูุงุตู ูุน Domoticz ุนูู ูุฐุง ุงูุทุฑูู ุงูุดุงุฆู ุฅูู ุชุซุจูุช ูุธุงู ุงูุชุญูู ูู ุงูููุฒู ุงูุฐูู Domoticz. <br><br>  ูู ุดูู ุงูุญุฑุงู ุตุบูุฑ ุ ุณุฃููู ุ ุญุงููุช ุชูุตูู ุงูููููุงุช ุงูุฅุถุงููุฉ ุจุงูุฌุณุฑ ุงูููุฒูู ุงูุฐู ูุณูุญ ูู ุจููู ุชุฏูู RTSP ูู ูุงููุฑุง ููุจ.  ูุฏู ูุงููุฑุง ip TOP-201 ูู ูุธุฑุงุฆู ุงูุตููููู. <br><br>  ุชุซุจูุช ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm install -g --unsafe-perm homebridge-camera-ffmpeg</code> </pre> <br>  ุฃุถู ุฅูู ููู ุงูุฅุนุฏุงุฏุงุช: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">config.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">"platforms"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"Camera-ffmpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"cameras"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"top-201"</span></span>, <span class="hljs-string"><span class="hljs-string">"videoConfig"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"-re -i rtsp://admin@192.168.178.10:554/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp?real_stream"</span></span>, <span class="hljs-string"><span class="hljs-string">"maxStreams"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"maxWidth"</span></span>: <span class="hljs-number"><span class="hljs-number">640</span></span>, <span class="hljs-string"><span class="hljs-string">"maxHeight"</span></span>: <span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-string"><span class="hljs-string">"maxFPS"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> } } ]</code> </pre> <br></div></div><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุธูุฑ ุตูุฑุฉ ูู ุงููุงููุฑุง ูู ุชุทุจูู HomeKit ุ ููู ูู ูุฐุง ุนูู ุจุจุทุก ุดุฏูุฏ ููู ุชูู ููุงู ุญุงุฌุฉ ููุฐู ุงููุงููุฑุง.  ูุชุฌูุจ ุชุญููู ุงููุธุงู ุจุดูู ุบูุฑ ุถุฑูุฑู ุ ููุช ุจุญุฐู ูุงููุฑุง ip.  ุฏุนูุง ูุนูุฏ ุฅูู ุชุซุจูุช ูุธุงู ูุฅุฏุงุฑุฉ ุงูููุฒู "ุจุฏูู ุจูุช ุฐูู". <br><br><h3 style=";text-align:right;direction:rtl">  ูู ุจุชุซุจูุช ูุชูููู Domoticz ููุญุฏุงุช Sonoff </h3><br>  ุงููุนุฌูู โ ssh โ ููุฑุฉ โโุฃุฎุฑู ูุฎุชุงุฑ ุงูุชูุช.  ูุงููุซูุฑ ููุฏูุดุฉ ุฃู ุงูุชุซุจูุช ูู ุญุงูุชู ูู ูุชุทูุจ ุงูุฑูุต ูุน ุงูุฏู ููุงู ูุงููุงู <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo curl -L install.domoticz.com | sudo bash</code> </pre><br>  ุฅุถุงูุฉ ุชุดุบูู ุชููุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo cp domoticz.sh /etc/init.d sudo chmod +x /etc/init.d/domoticz.sh sudo update-rc.d domoticz.sh defaults</code> </pre><br>  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูู ุจุชุบููุฑ ุจุนุถ ุงูุฅุนุฏุงุฏุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo nano /etc/init.d/domoticz.sh</code> </pre> <br>  ุงูุชุญ ุนููุงู ุงูุชูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">192.168.xxx.xxx</a> : 8080.  ููุฌุจ ุฃู ูุฐูุจูุง ุฅูู ุตูุญุฉ domotics.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุชู ุชูููู ูุฅุถุงูุฉ ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ ุจุงููุนู ุนุจุฑ ุงูููุจ. <br><br><img src="https://habrastorage.org/web/130/93c/ab8/13093cab88b54ac498fbd15d17d4536a.png"><br>  <i>ุชูุช ุฅุถุงูุฉ ูุณุชุดุนุฑุงุช Sonoff ููุณุชุดุนุฑ ุงูุดุงุฑุน ุฅูู ููุทุฉ ุงูุดุงุดุฉ.</i> <br><br>  ูุฅุถุงูุฉ ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ / ููุงุชูุญ ุ ุงูุชูู ุฅูู Setup โ hardware ูุฃุถู Dummy (ูุง ุชูุนู ุดูุฆูุง ุ ุงุณุชุฎุฏู ุงูููุงุชูุญ ุงูุงูุชุฑุงุถูุฉ ููุท).  ุณุชุธูุฑ "ุงูุฏููุฉ" ูู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ.  ุจุงูุถุบุท ุนููู ูู ุฅูุดุงุก ูุณุชุดุนุฑ ุงูุชุฑุงุถู ุ ุงุชุตู ุจูุณุชุดุนุฑูุง / ููุชุงุญูุง ูุงุฎุชุฑ ุงูููุน ุงููุทููุจ ูู ุงููุงุฆูุฉ.  ุงูุขู ูู ุนูุงูุฉ ุงูุชุจููุจ Setup โ Devices ุณูุธูุฑ ุฌูุงุฒ ุฌุฏูุฏ ูููููู ุงูุขู ุฃูุถูุง ุฑุคูุฉ idx ุงูุฌูุงุฒ ููุงู. <br><br>  ูููู ุจุชูุฒูู ูุงุฌูุฉ ุงูููุจ ุงูุฎุงุตุฉ ุจุงูููุชุงุญ / ุงููุณุชุดุนุฑ ุงูุฎุงุต ุจูุง ููุญูุธ ุงูุชูููู โ domoticz โ idx ุงูุฎุงุต ุจุงูููุชุงุญ.  ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฌุฏูุฏุฉ Tasmota ุ ูู ุงููููู ุชุญุฏูุฏ ุนุฏุฉ idx.  ูููุฑุญูุงุช / ุงูููุงุชูุญ ูุจุดูู ูููุตู ูู GPIO.  ุงุนุชูุงุฏูุง ุนูู ุงููุญุฏุฉ ุ ูููู ุฃู ูููู ูุฐุง ูุณุชุดุนุฑูุง ุฅุถุงูููุง ูุงุญุฏูุง ุฃู ุฃูุซุฑ ุ ูุธุฑูุง ูุฃูู ูู ุฅุตุฏุงุฑ SV ุ ููุงู ุฃูุถูุง ุซูุงุซุฉ ุฏุจุงุจูุณ ูููู ุชุนููู ุฏูุฑูุง ูู ูุธุงูู (ุงููุฑุญูุงุช / ุงููุณุชุดุนุฑุงุช). <br><br>  ูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงููุฏููุฉ (Sonoff-MQTT-OTA-Arduino) ูููุญุฏุฉ ุ ุงุถุทุฑุฑุช ุฅูู ุฃุฏุงุก ุจุนุถ ุงูุฑูุตุงุช ุจุงุณุชุฎุฏุงู ุงูุฏู ุ ุจุญูุซ ูููู ูู Domoticz ุฑุคูุฉ ูุฑุงุกุงุช ุงูุฑุทูุจุฉ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.  ุฃุนุชูุฏ ุฃูู ูุง ุชูุฌุฏ ูุงุฆุฏุฉ ููุง ููุตู ุฐูู ุ ุจุงููุณุจุฉ ููุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฌุฏูุฏุฉ (Tasmota) ุ ูุง ุญุงุฌุฉ ุฅูููุง. <br><br>  ููููุง ููุฑุงุกุงุช ุงูุฑุทูุจุฉ ุ ููููู ุงูุชุญูู ูู ุบุทุงุก ุงููุญุฑู ูู ุงูุญูุงู.  ุนูุฏูุง ูููู ููุงู ูุฑูุญุฉ ููุนุงุฏู ุ ููุงู ูุณุงุญุฉ ูุงููุฉ ูููุญุฏุฉ ููุฏููุง ุจุงููุนู ูู ูุง ูุญุชุงุฌู.  ูุจูู ููุท ูุถุจุท ุงูุชุญูู ููุฑุงุกุงุช ุงูุฑุทูุจุฉ. <br><br>  ุงูุฅุนุฏุงุฏ โ ุงููุฒูุฏ ูู ุงูุฎูุงุฑุงุช โ ุงูุฃุญุฏุงุซ <br><br><img src="https://habrastorage.org/web/6ec/865/203/6ec865203b894f579e3fb3c1f0d62261.png"><br><br>  ุจุงุณุชุฎุฏุงู ุงูููุดุฆ ุ ูููู ุจุฅูุดุงุก ููุทู ุนูููุฉ ุบุทุงุก ุงููุญุฑู (ููุง ูู ุงูุตูุฑุฉ).  ูุง ูุฒุงู ุจุฅููุงูู ูู ููุง ุ ูููู ูุฐู ููุณุช ูุถูุชู.  ุฃุธูุฑุช ุชุฌุฑุจุฉ ุฃุฎุฑู ุฃู ุงุณุชูุตุงุก ุงููุณุชุดุนุฑ ููุฏุฉ 5 ุฏูุงุฆู ูุจูุฑ ุฌุฏูุง ูููุช ุจุชุฎููุถู ุฅูู 3 ุฏูุงุฆู.  ุงูุขู ุงูุงุณุชุญูุงู ุ ุนูุฏูุง ุชุฑุชูุน ุงูุฑุทูุจุฉ ููู 70ูช ุ ูุชู ุชุดุบูู ุบุทุงุก ุงููุญุฑู.  ูู ููุช ูุงุญู ุ ุนูุฏูุง ูุชู ุชุฎููุถ ุฃูู ูู 45 ูช ุ ูุชู ุฅููุงู ุชุดุบููู.  ุชู ุงุฎุชูุงุฑ ุจูุงูุงุช ุงูุฑุทูุจุฉ ุชุฌุฑูุจูุง.  ุงูุณูุจู ุงููุญูุฏ ุ ุฃู ุฑุจูุง ูุฐุง ููุณ ูุงูุตูุง ุ ููููู ููุฒุฉ ูู ุงููุธุงู ุ ุฅุฐุง ููุช ุจุชุดุบูู ุบุทุงุก ุงููุญุฑู ุจุงูุถุบุท ุนูู ุฒุฑ ุ ุซู ุจุนุฏ 3 ุฏูุงุฆู ุ ุจุนุฏ ุงุณุชุฌูุงุจ ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุงูุฑุทูุจุฉ ุ ุณูุชู ุฅููุงู ุชุดุบูู ุงููุธุงู. <br><br>  ูููู ูุงุฐุง ุนู ุณูุฑูุ  ุงุชุถุญ ุฃู ูู ุดูุก ุจุณูุท ููุบุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo npm install -g -g --unsafe-perm homebridge-edomoticz</code> </pre><br>  ูุฅุถุงูุชูุง ุฅูู ุงูุฅุนุฏุงุฏุงุช <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo nano .homebridge/config.json</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"mqtt://127.0.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"topic_prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"homebridge"</span></span>, <span class="hljs-string"><span class="hljs-string">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"bar"</span></span></code> </pre><br>  ูุนูุฏูุง ุชุจุฏุฃ Homebridge ูุญุตู <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">[5/8/2017, 11:42:30 PM] [eDomoticz] You have 10 devices defined <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Domoticz. [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">'bath-temp'</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">' '</span></span>... [5/8/2017, 11:42:30 PM] [eDomoticz] Initializing platform accessory <span class="hljs-string"><span class="hljs-string">''</span></span>...</code> </pre><br>  ุณูุชู ุงูุขู ุนุฑุถ ุฌููุน ุงูุฃุฌูุฒุฉ ุงูุชู ุฃุถููุงูุง ุฅูู Domotics ุจูู ุฃุฌูุฒุชูุง ูู Homekit ูููููู ุงูุชุญูู ูููุง ูู ุฎูุงู ุตุฏูู Siri.  ุงุฎุชูุช ุงูุญุงุฌุฉ ุฅูู ููููุงุช ุฅุถุงููุฉ ุฃุฎุฑู ูู Homebridge ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู. <br><br>  ูุฏููุง ูุฌููุนุฉ ูู Domoticz-Homebridge ููู ุดูุก ูุนูู ุจุดูู ุฌูุฏ ููุบุงูุฉ ููุณุชูุฑ.  ุงุฎุชุจุงุฑ ุจุงููุนู ููุณ ุงูุดูุฑ ุงูุฃูู. <br><br>  ูุชู ุชุซุจูุช ูุณุชุดุนุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ / ุงูุฑุทูุจุฉ DHT22 ูู ุงูุญุฑู ุงูุณุงุจูุฉ ุนูู Raspberry pi ููุชู ููู ุงูุจูุงูุงุช ุฅูู narodmon.ru ุจุงุณุชุฎุฏุงู ูุต ุจุงูุซูู ูู 10 ุฏูุงุฆู.  ุฃุถู ุจุถุนุฉ ุฃุณุทุฑ ุฅูู ุจุฑูุงูุฌ ูุตู ููุฌูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#domoticz settings IP = '192.168..' #IP domoticz PORT = '8080' #port of server IDX_1 = '7' #IDX of the DHT temp sensor //โฆ. ,        narodmon.ru url = 'http://{}:{}/json.htm?type=commandยถm=udevice&amp;nvalue=0&amp;idx={}&amp;svalue={}'.format(IP, PORT, IDX_1, sensor_value_1) request = urllib2.Request(url) response = urllib2.urlopen(request)</span></span></code> </pre><br>  ูู Domoticz ูุถูู ูุณุชุดุนุฑูุง ุงูุชุฑุงุถููุง ุขุฎุฑ.  ูุงูุขู ูููููุง ุฃูุถูุง ุฑุคูุฉ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ ูู ุงูุดุงุฑุน ุ ูู ุฎูุงู ุงูููุจ ุนูู ุตูุญุชูุง ุงูุฑุฆูุณูุฉ ุงููุญููุฉ ููู ุชุทุจูู iOS. <br><br>  ููู ุฃูุฑุจ mqtt ุ ูููู ุฅุฑุณุงู ูุฑุงุกุงุช ุงููุณุชุดุนุฑ ุนุจุฑ mqtt. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> playload = <span class="hljs-string"><span class="hljs-string">'{{ "idx": {} , "nvalue" : {}, "svalue" : "1" }}'</span></span>.format(IDX_1, humidity) client.publish(TOPIC_DOMOTICZ, playload, qos =<span class="hljs-number"><span class="hljs-number">0</span></span> , retain =<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-comment"><span class="hljs-comment">#publish</span></span></code> </pre><br><h2 style=";text-align:right;direction:rtl">  ุฃุถู Wifi ุฅูู ุขูุฉ ุงููููุฉ. </h2><br>  ุฃุซูุงุก ุฅุตูุงุญ ุงูุฌูุงุฒ ูุงูุชุธุงุฑ ูุตูู ูุญุฏุฉ ุงูุชุญูู ูู ุฃููุงููุง ุ ุญุตูุช ุนูู ูุงูููุฉ ูููุฉ ุฏููููุฌู ููุฏูุฉ.  ุนูู ุงูููุญุฉ ูุฏููุง ุฒุฑ ุชุดุบูู / ุฅููุงู ุ ูุนูู ูููุฉ ุตุบูุฑุฉ ููุฒุฏูุฌุฉ ูุงุซููู ุขุฎุฑูู ูุง ุฃุณุชุฎุฏูููุง ูุฃู  ูุง ุฃุฎูู ุงูุญููุจ ุจุงูุจุฎุงุฑ ุ ููุง ุฃุดุฑุจ ุงููููุฉ ุจุงูุญููุจ ูุงููุดุฑูุจุงุช ุงูุฃุฎุฑู.  ุงูุนูุจ ูู ุฃู ุงููููุฉ ูุง ุชุทุญู ููุณูุง ุ ููู ุงูุถุฑูุฑู ููุคูุง ุจุงูุฃุฑุถ ูููุจ ูุงุญุฏ. <br><br>  ุจุงููุณุจุฉ ูุขูุฉ ุงููููุฉ ุ ุฃุณุชุฎุฏู Sonoff SV.  ูุชู ุชูููุน ุงูุฏุจุงุจูุณ 3ุ3v ุ Rx ุ Tx ุ GND.  ุจุดูู ูููุตู ุ ูุง ูุฒุงู GPIO 4 ุ 5 ุ 14. ูุนุฑูุถูุง ุนูู ุงูููุญุฉ. ุจุฑูุงูุฌ ุซุงุจุช ูููุณ ุงูุฅุฌุฑุงุก ููุง ูู ููุถุญ ุฃุนูุงู. <br><br>  ููุชุญ ุงูุฌูุงุฒ ููุตู ุฅูู ุงูููุญุฉ ุจุงุณุชุฎุฏุงู ุงูุฃุฒุฑุงุฑ. <br><br>  ุชุชูุชุน ุงูููุญุฉ ุจููุฉ 5 ูููุช ุ ููู ูุงููุฉ ูุชุดุบูู ูุญุฏุฉ sonoff ุงููุงุณูููุฉ sv ุงูุฎุงุตุฉ ุจูุง.  ูู ููู ูู ุงูุตุนุจ ุงูุนุซูุฑ ุนูู 5c ุงูุนุฒูุฒุฉ. <br><br>  ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ ุจุจุณุงุทุฉ ูุญูู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุฃุฑุถ.  ูููู ุจุชูุตูู ูุญุฏุชูุง ููููุง ูููุฎุทุท. <br><br><img src="https://habrastorage.org/web/a3c/559/ba5/a3c559ba5c1f48d6b552aaddaa448209.png"><br><br>  ููุง ุชุฑูู ูู ุงูุฑุณู ุงูุจูุงูู ุ ููุช ุจุชูุตูู ุฒุฑูู ููุท: ุชุดุบูู / ุฅููุงู ูุตูุน ุงููููุฉ.  ุนู ุทุฑูู ุงูููุงุณ ุ ููููู ุนูู ุฌููุน ุงูุฃุฒุฑุงุฑ ุงูุฃุฎุฑู.  ูู sonoff sv ุ ูุฏููุง 3 ุฏุจุงุจูุณ ุฅุฎุฑุงุฌ ุฅูู ุงูููุญุฉ ุ ูุชุฑุญูู ุ ูููููู ุฃูุถูุง ุงุณุชุฎุฏุงู Rx ุ Tx (ูู ุฃุญุฏุซ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูู Tasmota). <br><br><img src="https://habrastorage.org/web/a62/efb/5b0/a62efb5b0ea54284b0406b4f16595145.png"><br><br>  ูุฌูุน ูู ุดูุก ููููุง ูููุฎุทุท ุ ูุฌุฏ ููุงููุง ููุงุณุจูุง ุฏุงุฎู ุขูุฉ ุงููููุฉ.  ูู ุฅุนุฏุงุฏุงุช ุงููุญุฏุฉ ูู ูุงุฌูุฉ ุงูููุจ ุ ูู ุจุฅุถุงูุฉ ูุฑุญู ุซุงูู ุฅูู GPIO5.  ูู ูุงุฆูุฉ "ูุญุฏุฉ ุงูุชุญูู" ุ ูู ุจุชุนููู ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">PowerOnState <span class="hljs-number"><span class="hljs-number">0</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/   ,     . PulseTime1 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   0,1 ,      PulseTime2 10 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     1 . 1  2     .</span></span></code> </pre> <br>  ูู ุฅุนุฏุงุฏุงุช Domotics ุ ูู ุจุฅูุดุงุก ูุณุชุดุนุฑูู ุงูุชุฑุงุถููู ุฅุถุงูููู ูุฃุถู idx ุงูุฎุงุต ุจูู ุฅูู ุฅุนุฏุงุฏุงุช ุงููุญุฏุฉ ุงูููุทูุฉ ูู ูุงุฆูุฉ ุฅุนุฏุงุฏุงุช Domotics (ุงูุชูููู โ ุชูููู Domoticz โ IDX 1 ู IDX 2). <br><br>  ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ููุชุงุญูู ุฅุถุงูููู ุ ุฃุญุฏููุง ูุถุบุท ุนูู ุฒุฑ ุชุดุบูู / ุฅููุงู ุชุดุบูู ุขูุฉ ุงููููุฉ ูุงูุซุงูู ูุถุบุท ุนูู ุงูุฒุฑ ูุตูุน ุงููููุฉ. <br><br>  ูุตูุน ุงููููุฉ ุ ุนูู ุฃู ุญุงู ุ ูุฌุจ ุนููู ุงููุดู ูุน ุณุงููู ุ ูููู ุจุญุงุฌุฉ ุฅูู ุตุจ ุงููููุฉ.  ูููู ูู ุงูููุงุณุจ ุชุดุบูู ุงูุฌูุงุฒ.  ูู ูุญุธุฉ ุชุดุบููู ููุจู ุตูุน ุงููููุฉ ุ ุชุญุชุงุฌ ุฅูู ุจุนุถ ุงูููุช ูุชุณุฎูู ุงูุฌูุงุฒ.  ูุฐูู ุ ุฃุซูุงุก ุงูุฌููุณ ุฃุซูุงุก ุงูุนูู ูู ุงูุบุฑูุฉ ุ ููููู ุชุดุบูู ุขูุฉ ุตูุน ุงููููุฉ ุนู ุจูุนุฏ ูุจุนุฏ ูุชุฑุฉ ูู ุงูููุช ุ ููููู ุฏุณ ุณุงููู ูุฌุนู ููุณู ูุดุฑูุจูุง. <br><br>  ุณูููู ุฃูุซุฑ ูุงุฆุฏุฉ ูู ูุซู ูุฐุง ุงูุชุจุฏูู ุนูู ุขูุฉ ุฃูุชููุงุชูููุฉ ุจุงููุงูู ูู ุขูุฉ ุตูุน ุงููููุฉ ุ ูุง ุนููู ุณูู ุชุฐูุฑ ูุถุน ุงูููุจ ููุฏููุง.  ูุญู ูู ุงูุชุธุงุฑ ููุญุฉ ุงูุชุญูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ูุงู ูุงู ููุชุญ ุงูุจุงุจ ูุน Vizit ุงูุฏุงุฎูู </h2><br>  ูู ุงูููุฑ ุงููุดุชุฑู ุ ูุชู ุฅุบูุงู ุงูุฏูููุฒ ุจุงููุฑุจ ูู ุงููุตุนุฏ ุจุจุงุจ ุจููู ูุบูุงุทูุณู ููุธุงู ุงููุตูู Vizit.  ุชู ุชุซุจูุช ุงููุธุงู ุจุนุฏ ุฅุฌุฑุงุก ุงูุฅุตูุงุญ ููู ูุชู ุงูุถุบุท ุนูู ุงูุฒุฑ ููุชุญ ุจุงุจ ุงูุฏูููุฒ ุฅูู ุงูุดูุฉ.  ูู ุฃุฌู ุจุฏุก ุงูุถููู ุ ูุฌุจ ุนููู ุงูุฐูุงุจ ุฅูู ุงูุจุงุจ ููุชุญ ุงูุฒุฑ ููุชุญ ุงูุจุงุจ ูู ุงูููุฑ.  ูุญุฏุฉ ุงูุชุญูู KTM-602M. <br><br><img src="https://habrastorage.org/web/771/ea1/9ab/771ea19abd1144e4b95e39f8ffbe2c73.jpg"><br><br>  ูุคุฏู ุฅุบูุงู OP + GND ุฅูู ูุชุญ ุงูุจุงุจ / ูุตู ุงููุบูุงุทูุณ ููุฏุฉ 7 ุซูุงูู. <br><br>  ูุดุงุฑู ููุฑุฏ ุงูุทุงูุฉ ููุญุฏุฉ sonoff sv ูุงููุฑุญู ุจุฅุฒุงูุฉ ููุงูููู ุ ููุง ูู ููุถุญ ุฃุฏูุงู ูู ุงูุตูุฑุฉ. <br><br><img src="https://habrastorage.org/web/c31/85f/644/c3185f6440db4066bf6cf3fd1336d4af.png"><br><br>  ูููู ุจุชูุตูู OP ุจุชุฑุญูู ุงูุฅุฏุฎุงู "ุงูุฅุฏุฎุงู +" ุ ุนูุฏ ุฅุฎุฑุงุฌ ุงูุชุชุงุจุน "ุงูุฅุฎุฑุงุฌ +" ูููู ุจุฑุจุท GND.  ุจูู ELC ู GND ููุญุฏุฉ ุงูุชุญูู 18v ุงูุชู ูููุฑ ูููุง ุงูุทุงูุฉ ูููุญุฏุฉ ููุณูุง. <br><br>  ูุถูู ุฌุฑุณ ุงูุจุงุจ "ุฌุฑุณ ุงูุจุงุจ" ุฅูู Domotiks ูุงูุขู ูููู ูู Siri ูุณุงุนุฏุชูุง ูู ูุชุญ ุงูุฃุจูุงุจ ููุถููู. <br><br>  ูุชุนุฑู ุงููุณุงุนุฏ Siri ุนูู ุงูุฃูุฑ ุงูุตูุชู "ุงูุชุญ ุงูุจุงุจ" ุ ุฃูุถู ูู "ุชุดุบูู ุขูุฉ ุงููููุฉ". <br><br>  ุชูููุช ููุงู ูุน ุฒุฎุฑูุฉ ูุญุฏุงุช ุณูููู. <br><br><h2 style=";text-align:right;direction:rtl">  ููุงูุฃุฉ ุตุบูุฑุฉ </h2><br>  ุจูุฌุฑุฏ ุงุฎุชูุงุก ูุซู ูุฐุง ุงูุฎูุฑ ุ ุณูููู ุฃูุถูุง ุจุฅููุงู ุชุดุบูู / ุชุดุบูู ุงูุชููุฒููู.  ุฅู ุฅููุงู ุชุดุบูู ุงูุชููุฒููู ูุชุดุบููู ูุง ุนูุงูุฉ ูู ุจูุญุฏุงุช wifi.  ุงูุชููุฒููู ุนูู ููุฑุจุฉ ูู ุงูุชูุช ุจู.  ููุง ุ ูุณุงุนุฏูุง IR LED ูุฒูุฌ ูู ุงูููุงููุฉ ูู ุงูููู ุงูุงุณููุฉ ุงููุฎุชููุฉ.  ูููู ุจุชุซุจูุช lirc ุ ูู ููุงุนุฏ ุงูุจูุงูุงุช ูุฌุฏ ุฅุนุฏุงุฏุงุช ุฌูุงุฒ ุงูุชุญูู ุนู ุจุนุฏ / ุงูุชููุฒููู. <br><br>  ููุนูู ูุน Domotics ุ ูููู ุจุชุดุบูู ูุต ุซุนุจุงูู ุตุบูุฑ ูุชุฑุฌู ุฑุบุจุงุชูุง ูู ุชุดุบูู / ุฅููุงู ุชุดุบูู ุงูุชููุฒููู ูู mqtt ุฅูู lirc. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">mqtt ูู lirc</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> paho.mqtt.client <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mqtt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json IP = <span class="hljs-string"><span class="hljs-string">'192.168..'</span></span> PORT = <span class="hljs-string"><span class="hljs-string">'1883'</span></span> device = {<span class="hljs-number"><span class="hljs-number">18</span></span> : <span class="hljs-string"><span class="hljs-string">'OpenBox'</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span> : <span class="hljs-string"><span class="hljs-string">'PHILIPS'</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span> : <span class="hljs-string"><span class="hljs-string">'air'</span></span>} TOPIC_DOMOTICZ = <span class="hljs-string"><span class="hljs-string">'domoticz/in'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(device, command)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># """ Sends IR-signal to the device """ os.system("irsend SEND_ONCE '" + device + "' '" + command + "'") # The callback for when the client receives a CONNACK response from the server. def on_connect(client, userdata, flags, rc): print("Connected with result code "+str(rc)) # Subscribing in on_connect() means that if we lose the connection and # reconnect then subscriptions will be renewed. client.subscribe(TOPIC_DOMOTICZ,0) def on_publish(client,userdata,result): #create function for callback print("data published \n") pass # The callback for when a PUBLISH message is received from the server. def on_message(client, userdata, msg): domoticz = json.loads(msg.payload) if domoticz ['idx'] in device.keys(): idx = domoticz ['idx'] dev = device [idx] command = 'KEY_POWER' send (dev, command) client = mqtt.Client() client.on_connect = on_connect client.on_message = on_message client.on_publish = on_publish client.connect(IP, PORT, 60) client.loop_forever()</span></span></code> </pre> <br></div></div><br>  ูุถูู ูู Domoticz ุซูุงุซุฉ ุฃุฒุฑุงุฑ ุงูุชุฑุงุถูุฉ ุฃุฎุฑู ููุชููุฒููู ูุฌูุงุฒ ุงูุงุณุชูุจุงู ููููู ุงูููุงุก. <br>  ููุณ ูู ุงูููุงุณุจ ุงูุชุญูู ูู ุงูุชููุฒููู ูู ุงููุงุชู ุ ุนูู ุฃู ุญุงู ูููู ุฌูุงุฒ ุงูุชุญูู ุนู ุจูุนุฏ ููุนูุง ูุง.  ูููู ูู ุจุฅููุงู ุชุดุบูู ุงูุชููุฒููู ุนูุฏูุง ูุณูุช ูุชุฑูุช ุงูุบุฑูุฉ ุจุงููุนู ููุงูุฃุฉ ุฑุงุฆุนุฉ. <br><br>  ุฅุถุงูุฉ ูุทููุฉ ููู ูุฐุง ูู ุชููุฑ ุณุงุนุฉ Pebble ูุชุทุจูู Pemoticz.  ุชูุช ุฅุถุงูุฉ ุงูุนููุงู ูู ุงูุฅุนุฏุงุฏุงุช ูุณุญุจ ุงูุชุทุจูู ุฌููุน ุงูููุงุชูุญ.  ูุง ูููู ูุณูุฑู ูุงุญุฏ ุงูุขู ุชุดุบูู ุขูุฉ ุงููููุฉ / ูุชุญ ุงูุฃุจูุงุจ ูุฅุทูุงุก ุงูุฃููุงุฑ.  ุนุงุฏุฉู ูุง ุชููู ุงูุณุงุนุฉ ูู ูุชูุงูู ุงููุฏ ุ ููุฏ ูุง ูููู ุงููุงุชู ูุฑูุจูุง.  ูุฐุง ูู ูุฒุงูุงู.  ูู ุฃุชุนุงูู ูุน ููุถูุน ุงูุชุนุฑู ุนูู ุงูููุงู ูุณุงุนุงุช ุนูู ูููุถูู ุ ูููู ูุฐุง ูููู ุฃูุถูุง. <br><br><img src="https://habrastorage.org/web/651/e3d/d81/651e3dd81b654be3b0fc324f44dc8b9e.png"><br><br>  ุนูู ูุฐุง ุ ุฑุจูุง ุ ููููู ุฅููุงุก ุงููุตุฉ "ุจุฏูู ููุฒู ุฐูู". <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>  ูู ุดูู ุงุณุชูุชุงุฌ ุ ุซู ูุงุฐุงุ <br><br>  ูุงุฆูุฉ ุชูุฏู: <br><br>  - ุชูููู ุงูููุงุก ุ ูู ููู ูู ุงููููู ุงูุนุซูุฑ ุนูู ุฅุนุฏุงุฏุงุช ุฌูุงุฒ ุงูุชุญูู ุนู ุจุนุฏ ููุฑู ูุงููุญุงููุงุช ุงูุฃููู ููุณุฎ ุงูููุฑุงุช ุ ููุง ูู ูุคุฏ ุฅูู ุงููุฌุงุญ.  ูุฒูุฏ ูู ุงููุดุฑ. <br>  - ูุญู ูู ุงูุชุธุงุฑ ุทูุจ ูู ุจูุงุจุฉ ุงูุดุฑูุฉ ุงูุตูููุฉ Mi c ูุงูุนุฏูุฏ ูู ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ.  ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ูุชุญ ุงูุจุงุจ ุนู ุทุฑูู ุงูุชูุงุนุจุงุช ุงูุตุนุจุฉ ุชุชุญูู ุฅูู ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ุงูุชุณุฑุจ.  ุณูุถูู ุฅูู ูุธุงููุง.  ุนูุฏูุง ุชุฑุณู ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ ุงูุชู ุชู ุชุดุบูููุง ุฅุฎุทุงุฑุงุช ุฅูู ุงููุงูู. <br>  "ุงูุฃููุงุฑ ุชูุชูู ููุงู ..." <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุตุงุฏุฑ ุงููุณุชุฎุฏูุฉ </h3><br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุดุบูู HomeBridge ุนูู ุฑุงุณุจูุฑู ุจุงู</a> <br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูููู-ุชุงุณููุชุง ูููู</a> <br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุซุจูุช Domoticz ุนูู Pi ููุฏ ุงูุชุดุบูู ุจุงููุนู</a> <br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููููุฉ: ุฃุถู WiFi ุฅูู ุขูุฉ ุตูุน ุงููููุฉ</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar403869/">https://habr.com/ru/post/ar403869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar403855/index.html">ุจุนุฏ 11.500 ุญุงุฏุซ ุ ุชุนููุช ุทุงุฆุฑุฉ ุฑุจุงุนูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุทูุฑุงู ูู ุงูุฏุงุฎู</a></li>
<li><a href="../ar403857/index.html">ุฃุฏุฎูุช Oticon ุชูููููุฌูุง ุชูุตูู ุงูุนุธุงู ุบูุฑ ุงููุงุจูุฉ ููุบุฑุณ ููุฃุทูุงู</a></li>
<li><a href="../ar403861/index.html">ุญุฏุซ ุฎุทุฃ ูุง ูุน Masterhost</a></li>
<li><a href="../ar403865/index.html">ููุจุงุช LED ุฃูุดุงู</a></li>
<li><a href="../ar403867/index.html">ุญุฑูุฉ ุงููุนูููุงุช</a></li>
<li><a href="../ar403871/index.html">BBC Micro - ุงูููุจููุชุฑ ุงูุฐู ุชุบูุจ ุนูู ZX Spectrum</a></li>
<li><a href="../ar403873/index.html">ุงูุจุทุงุฑูุฉ ุงูุดูุณูุฉ ุนูู ุงูุดุฑูุฉ: ุงุฎุชุจุงุฑ ุงูุจุทุงุฑูุฉ ู BMS</a></li>
<li><a href="../ar403875/index.html">ุงูุณุงุนุงุช ุงูุฐููุฉ ูุงูุดุจูุงุช ุงูุนุตุจูุฉ ุชูุชุดู ุงูุฑุฌูุงู ุงูุฃุฐููู ุจุฏูุฉ 97ูช</a></li>
<li><a href="../ar403877/index.html">ุณูู ูุฑุชูุน ุณุนุฑ ุตุงุฑูุฎ ูุงุณุง ุงููุงุฆู ุงูุซูู ุจูุง ูุง ููู ุนู 500 ููููู ุฏููุงุฑ ุ ูุณูุชู ุชุฃุฌูู ุฅุทูุงูู ูุนุงู ุขุฎุฑ</a></li>
<li><a href="../ar403881/index.html">ุฃุฑูุน ุตุงุฑูุฎ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>