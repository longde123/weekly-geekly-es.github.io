<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úäüèΩ üëÄ ‚úåÔ∏è Fun√ß√µes para documentar bancos de dados PostgreSQL. Parte um üéø üíÜüèº üíê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante o trabalho com o PostgreSQL, mais de cem fun√ß√µes para trabalhar com diret√≥rios do sistema foram acumuladas: pg_class, pg_attribute, pg_constra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fun√ß√µes para documentar bancos de dados PostgreSQL. Parte um</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415575/">  Durante o trabalho com o PostgreSQL, mais de cem fun√ß√µes para trabalhar com diret√≥rios do sistema foram acumuladas: pg_class, pg_attribute, pg_constraints, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/rx/ta/zcrxta08dnfat5cqpgid4lyq7by.png"></div><br>  O que fazer com eles?  Eles s√£o usados ‚Äã‚Äãrelativamente raramente.  Incluir em algum projeto?  O cliente Krasnoyarsk n√£o pagar√° por esse "absurdo".  E, no entanto, e se eles forem √∫teis para outra pessoa, exceto o autor.  E ele decidiu coloc√°-los, como livros lidos, em um arm√°rio p√∫blico para aqueles que desejavam. <br><a name="habracut"></a><br>  Algu√©m quer us√°-los em seu trabalho.  E algu√©m interessado em outra experi√™ncia que n√£o seja sua com cat√°logos de sistemas. <br><br>  Mas, para n√£o transformar a publica√ß√£o em uma enumera√ß√£o chata, n√£o se sabe por que as fun√ß√µes foram criadas, decidi me debru√ßar sobre aquelas que podem ser unidas por um objetivo comum.  Portanto, as fun√ß√µes usadas para exibir uma lista estendida de caracter√≠sticas de uma tabela arbitr√°ria de banco de dados s√£o selecionadas. <br><br>  A lista estendida de caracter√≠sticas da tabela de banco de dados √© retornada pela fun√ß√£o <b>admtf_Table_ComplexFeatures</b> , que ser√° chamada de fun√ß√£o head neste artigo.  Assim, o artigo se limitar√° a considerar as fun√ß√µes chamadas no processo de execu√ß√£o da fun√ß√£o principal. <br><br>  A primeira metade do artigo fornece coment√°rios sobre a implementa√ß√£o de fun√ß√µes.  O segundo √© o c√≥digo fonte das fun√ß√µes.  Para os leitores que est√£o interessados ‚Äã‚Äãapenas nos textos originais, sugerimos seguir imediatamente para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ap√™ndice</a> . <br><p>  <b>Veja tamb√©m</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte dois</a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte tr√™s</a> .</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O fim (parte quatro)</a> .</b> <br></p><br><br><a name="ExpFeatures"></a><br><h3>  De quais recursos avan√ßados estamos falando? </h3><br>  Para ter uma id√©ia do significado das caracter√≠sticas estendidas da tabela do banco de dados, come√ßamos considerando a seguinte lista de caracter√≠sticas.  A lista cont√©m as caracter√≠sticas da tabela de banco de dados Street retornada por <b>admtf_Table_ComplexFeatures ( <i>'public'</i> , <i>'street'</i> )</b> . <br><p>  A tabela abaixo cont√©m uma lista abreviada dos recursos da tabela Street.  Um conjunto completo de caracter√≠sticas desta tabela √© fornecido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em Materiais Suplementares do Ap√™ndice 2.</a> <br><br>  <strong>Tabela 1. Recursos avan√ßados da tabela Street.</strong> <br><img src="https://habrastorage.org/webt/zj/5x/jn/zj5xjnygaeedplccbe_itjr7fpu.png"><br></p><div class="spoiler">  <b class="spoiler_title">A vers√£o em texto da tabela na figura</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5">  Categoria </th><th width="5">  N√£o. </th><th width="15">  T√≠tulo </th><th width="20">  Coment√°rio </th><th width="20">  tipo </th><th width="20">  Tipo de base </th><th width="5">  ?  n√£o NULL </th></tr><tr><td width="5">  tbl </td><td width="5">  0 0 </td><td width="15">  rua </td><td width="20">  Lista de ruas em assentamentos </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  att </td><td width="5">  1 </td><td width="15">  wcrccode </td><td width="20">  C√≥digo do pa√≠s </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  2 </td><td width="15">  localityid </td><td width="20">  ID da comunidade </td><td width="20">  localityid </td><td width="20">  inteiro </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  3 </td><td width="15">  streetid </td><td width="20">  Rua identifica√ß√£o da vila </td><td width="20">  streetid </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  att </td><td width="5">  4 </td><td width="15">  streettypeacrm </td><td width="20">  Sigla da rua </td><td width="20">  streettypeacrm </td><td width="20">  personagem (8) </td><td width="5">  f </td></tr><tr><td width="5">  att </td><td width="5">  5 </td><td width="15">  nome da rua </td><td width="20">  Nome da rua </td><td width="20">  streettypeacrm </td><td width="20">  varchar (150) </td><td width="5">  t </td></tr><tr><td width="5">  pk </td><td width="5">  0 0 </td><td width="15">  xpkstreet </td><td width="20">  Chave prim√°ria da tabela de ruas </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  pkatt </td><td width="5">  1 </td><td width="15">  wcrccode </td><td width="20">  C√≥digo do pa√≠s </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td></tr><tr><td width="5">  fk01 </td><td width="5">  1 </td><td width="15">  fk_street_locality </td><td width="20">  Chave estrangeira da tabela </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  fk02 </td><td width="5">  2 </td><td width="15">  fk_street_streettype </td><td width="20">  Chave estrangeira da tabela </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx01 </td><td width="5">  1 </td><td width="15">  xie1street </td><td width="20">  √çndice por tipo e nome da rua do assentamento </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx02 </td><td width="5">  2 </td><td width="15">  xie2street </td><td width="20">  C√≥digo postal </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx03 </td><td width="5">  3 </td><td width="15">  xie3street </td><td width="20">  √çndice de nomes de ruas de todos os assentamentos </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx04 </td><td width="5">  4 </td><td width="15">  xpkstreet </td><td width="20">  O √≠ndice exclusivo (chave prim√°ria) da tabela de ruas </td><td width="20"></td><td width="20"></td><td width="5"></td></tr></tbody></table><br></div></div><br><p>  Enumerando a hostilidade a esse conjunto de letras e n√∫meros, voc√™ pode ver que estamos falando das caracter√≠sticas usuais de uma tabela de banco de dados: </p><br><ul><li>  Nomes de tabelas; </li><li>  A lista de atributos da tabela e seus tipos; </li><li>  A chave prim√°ria e a lista de chaves estrangeiras da tabela, juntamente com os atributos da tabela que as comp√µem; </li><li>  Uma lista de √≠ndices de tabela. </li></ul><br><p>  A exclusividade de cada entrada da lista de caracter√≠sticas √© garantida pelos valores dos campos "categoria" e pelo n√∫mero de s√©rie ("N√£o") da caracter√≠stica. </p><br><br>  <strong>Tabela 2. Categorias de caracter√≠sticas da tabela.</strong> <br><img src="https://habrastorage.org/webt/sy/j9/5z/syj95z_zta0nii9_9-n7zaxzq3q.png"><br><div class="spoiler">  <b class="spoiler_title">A vers√£o em texto da tabela na figura</b> <div class="spoiler_text"><table><tbody><tr><th>  Acr√¥nimo </th><th>  Nomea√ß√£o </th></tr><tr><td>  tb </td><td>  Caracter√≠sticas da tabela </td></tr><tr><td>  att </td><td>  Caracter√≠sticas do atributo da tabela </td></tr><tr><td>  seq </td><td>  Caracter√≠sticas da sequ√™ncia </td></tr><tr><td>  pk </td><td>  Principais Recursos Principais </td></tr><tr><td>  pkAtt </td><td>  Caracter√≠sticas do atributo da chave prim√°ria </td></tr><tr><td>  fk99 </td><td>  Principais recursos estrangeiros </td></tr><tr><td>  fk99att </td><td>  Caracter√≠sticas de Atributos de Chave Estrangeira </td></tr><tr><td>  fk99rtbl </td><td>  Caracter√≠sticas da tabela referenciada pela chave estrangeira </td></tr><tr><td>  fk99ratt </td><td>  Caracter√≠sticas de atributo da tabela referenciada pela chave estrangeira </td></tr><tr><td>  Idx99 </td><td>  Caracter√≠sticas do √çndice </td></tr><tr><td>  Idx99att </td><td>  Caracter√≠sticas de Atributo de √çndice </td></tr><tr><td>  Inhtbl99 </td><td>  Caracter√≠sticas da tabela gerada </td></tr></tbody></table><br></div></div><br><p>  O valor da categoria √© necess√°rio para distinguir diferentes grupos de caracter√≠sticas.  Um n√∫mero de s√©rie, para distinguir as caracter√≠sticas dentro do grupo. </p><br><p>  V√°rias chaves estrangeiras (FOREIGN KEY) e √≠ndices podem ser declarados na tabela do banco de dados.  Portanto, o valor da categoria para essas caracter√≠sticas e seus descendentes cont√©m um n√∫mero de s√©rie.  Por exemplo, uma entrada com a chave "Categoria" = <strong>idx02att</strong> e "N√£o" = <strong>1</strong> indica o primeiro atributo do 2¬∫ √≠ndice. </p><br><p>  Na lista de categorias acima, o local do n√∫mero de s√©rie √© indicado como '99'. </p><br><p>  <strong>Observa√ß√£o 1</strong> </p><br><img src="https://habrastorage.org/webt/xt/ye/1l/xtye1lr36ssftr4kmvnwedjgnew.png"><br><div class="spoiler">  <b class="spoiler_title">o c√≥digo fonte do operador na figura</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> admtf_Table_ComplexFeatures(<span class="hljs-string"><span class="hljs-string">'pg_catalog'</span></span>,<span class="hljs-string"><span class="hljs-string">'pg_class'</span></span>);</code> </pre> <br></div></div><br><br><p>  O artigo fornece exemplos das caracter√≠sticas das tabelas, que s√£o brevemente descritas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um esquema auxiliar</a> criado especificamente para demonstrar os recursos das fun√ß√µes.  Mas o leitor, tendo criado essa ou aquela fun√ß√£o em seu banco de dados, pode usar os nomes de seus esquemas e tabelas como par√¢metros.  Al√©m disso, por exemplo, o diret√≥rio <strong>pg_class</strong> pode ser usado como par√¢metro, embora neste caso um n√∫mero limitado de caracter√≠sticas seja emitido. </p><p></p><p>  <strong>O fim da observa√ß√£o.</strong> </p><br><a name="tfTableCF_def"></a><br><h3>  Estrutura da fun√ß√£o principal </h3><br><img src="https://habrastorage.org/webt/mn/pw/9w/mnpw9welx2ltfhwiqllgqrp6uyc.png"><br>  <strong>Fig.</strong>  <strong>1. As fun√ß√µes que causam a fun√ß√£o da cabe√ßa.</strong> <br><br>  <strong>Tabela 3. Designa√ß√£o de Fun√ß√µes.</strong> <br><img src="https://habrastorage.org/webt/po/yb/et/poybetf0ogfvr0l95pxzdw5m1yq.png"><br><div class="spoiler">  <b class="spoiler_title">A vers√£o em texto da tabela na figura</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5">  N√£o. </th><th width="10">  T√≠tulo </th><th width="40">  Nomea√ß√£o </th></tr><tr><td width="5">  1 </td><td width="10">  admtf_Table_Features </td><td width="40">  A fun√ß√£o retorna uma lista de caracter√≠sticas da tabela de banco de dados </td></tr><tr><td width="5">  2 </td><td width="10">  admtf_Table_Attributes </td><td width="40">  A fun√ß√£o retorna uma lista de atributos da tabela de banco de dados e suas caracter√≠sticas. </td></tr><tr><td width="5">  3 </td><td width="10">  admtf_Table_Constraintes </td><td width="40">  A fun√ß√£o retorna uma lista de restri√ß√µes da tabela do banco de dados e suas caracter√≠sticas. </td></tr><tr><td width="5">  4 </td><td width="10">  admtf_Table_Indexes </td><td width="40">  A fun√ß√£o retorna uma lista de √≠ndices da tabela de banco de dados e suas caracter√≠sticas. </td></tr><tr><td width="5">  5 </td><td width="10">  admtf_Table_InheritanceChildrens </td><td width="40">  A fun√ß√£o retorna uma lista de tabelas geradas por (IHERITS) da tabela de banco de dados de origem. </td></tr><tr><td width="5">  6 </td><td width="10">  admtf_Table_Sequences </td><td width="40">  A fun√ß√£o retorna uma lista de sequ√™ncias (SEQUENCE) da qual a tabela depende. </td></tr><tr><td width="5">  7 </td><td width="10">  admtf_PrimaryKey_ComplexFeatures </td><td width="40">  A fun√ß√£o retorna uma lista completa (estendida) de caracter√≠sticas da chave prim√°ria (PRIMARY KEY) da tabela do banco de dados. </td></tr><tr><td width="5">  8 </td><td width="10">  admtf_ForeignKey_ComplexFeatures </td><td width="40">  A fun√ß√£o retorna uma lista completa (estendida) de caracter√≠sticas de chave estrangeira (FOREIGN KEY) da tabela de banco de dados. </td></tr><tr><td width="5">  9 </td><td width="10">  admtf_Index_ComplexFeatures </td><td width="40">  A fun√ß√£o retorna uma lista completa (estendida) de caracter√≠sticas do √≠ndice da tabela do banco de dados. </td></tr><tr><td width="5">  10 </td><td width="10">  admtf_Table_ComplexFeatures </td><td width="40">  A fun√ß√£o retorna uma lista completa (estendida) de caracter√≠sticas da tabela de banco de dados. </td></tr></tbody></table><br></div></div><br><p>  <strong>Observa√ß√£o 2.</strong> </p><br><p>  As descri√ß√µes das fun√ß√µes ser√£o organizadas na ordem mostrada acima.  O motivo √© que o artigo ter√° que ser dividido em v√°rias partes.  E as fun√ß√µes organizadas nessa ordem podem ser usadas independentemente do fato de que algumas delas ser√£o descritas apenas nas seguintes partes da publica√ß√£o. </p><br><p>  <strong>O fim da observa√ß√£o.</strong> </p><br><br><h3>  Lista de fun√ß√µes Admtf_Table_Features de caracter√≠sticas da tabela de banco de dados </h3><br><a name="tfTableF_def"></a><br><br><p>  A fun√ß√£o admtf_Table_Features retorna uma lista de caracter√≠sticas da pr√≥pria tabela do banco de dados.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O c√≥digo-fonte pode ser visualizado e baixado aqui.</a> </p><br><p>  Como par√¢metros, a fun√ß√£o assume o nome da tabela de origem <b>(a_TableName</b> ) e o nome do esquema no qual a tabela √© criada ( <b>a_SchemaName</b> ). </p><br><p>  A fun√ß√£o extrai os dados principais da <b>entrada do</b> cat√°logo <b>pg_class</b> , que cont√©m, al√©m das entradas da tabela, tamb√©m registros sobre sequ√™ncias, visualiza√ß√µes, visualiza√ß√µes materializadas e tipos compostos.  Portanto, para selecionar tabelas, a condi√ß√£o relkind = <b><font color="red">'r' √© usada</font></b> . </p><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> tbl.relname,dsc.description,tbl.relnatts::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,tbl.relchecks::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid=dsc.objoid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName);</code> </pre><br><p>  Al√©m disso, a fun√ß√£o acessa os dados do diret√≥rio <b>pg_namespace</b> e <b>pg_description</b> .  O primeiro cont√©m os nomes dos esquemas do banco de dados e o segundo cont√©m coment√°rios sobre todos os objetos do banco de dados. </p><br><p>  √â importante prestar aten√ß√£o √† condi√ß√£o <b>objsubid = 0</b> .  Ele define o coment√°rio na tabela, pois o valor do campo objetivo √© o mesmo para a tabela e seus atributos.  O coment√°rio sobre o atributo da tabela est√° contido na entrada em que <b>objsubid</b> corresponde ao n√∫mero desse atributo. </p><br><br>  <strong>Tabela 4. O resultado da execu√ß√£o da fun√ß√£o admtf_Table_Features ('public', 'Street').</strong> <br><br><table width="95" border="1"><tbody><tr><th width="10">  T√≠tulo </th><th width="20">  Coment√°rio </th><th width="5">  N√∫mero de atributos </th><th width="5">  N√∫mero de restri√ß√µes CHECK </th><th width="5">  ?  existe uma chave prim√°ria </th><th width="5">  ?  s√£o √≠ndices declarados </th><th width="5">  ?  existem descendentes </th><th width="5">  O n√∫mero de entradas na tabela </th></tr><tr><td width="10">  rua </td><td width="20">  Lista de ruas em assentamentos </td><td width="5">  22 </td><td width="5">  0 0 </td><td width="5">  t </td><td width="5">  t </td><td width="5">  f </td><td width="5">  20150 </td></tr></tbody></table><br><p>  <strong>Observa√ß√£o 3</strong> </p><br><p>  Preste aten√ß√£o ao n√∫mero de atributos da tabela de ruas.  Difere significativamente do n√∫mero de atributos especificados no esquema auxiliar. </p><br><p>  Tabela 5. Atributos adicionais da tabela Street. </p><br><table><tbody><tr><th width="10">  attname </th><th width="5">  atttypid </th><th width="5">  attnum </th><th width="10">  Nota </th></tr><tr><td width="10">  cmin </td><td width="5">  29 </td><td width="5">  -4 </td><td width="10">  Atributo do sistema </td></tr><tr><td width="10">  xmin </td><td width="5">  28. </td><td width="5">  -3 </td><td width="10">  Atributo do sistema </td></tr><tr><td width="10">  ctid </td><td width="5">  27 </td><td width="5">  -1 </td><td width="5">  Atributo do sistema </td></tr><tr><td width="10">  wcrccode </td><td width="5">  795369 </td><td width="5">  1 </td><td width="5">  Atributo v√°lido </td></tr><tr><td width="10">  localityid </td><td width="5">  795352 </td><td width="5">  2 </td><td width="10">  Atributo v√°lido </td></tr><tr><td width="10">  streetid </td><td width="5">  795364 </td><td width="5">  3 </td><td width="10">  Atributo v√°lido </td></tr><tr><td width="10">  streettypeacrm </td><td width="5">  1919168 </td><td width="5">  4 </td><td width="10">  Atributo v√°lido </td></tr><tr><td width="10">  nome da rua </td><td width="5">  1043 </td><td width="5">  5 </td><td width="10">  Atributo v√°lido </td></tr><tr><td width="10">  ........ pg.dropped.6 ........ </td><td width="5">  0 0 </td><td width="5">  6 </td><td width="10">  Atributo remoto </td></tr><tr><td width="10">  ........ pg.dropped.7 ........ </td><td width="5">  0 0 </td><td width="5">  7 </td><td width="10">  Atributo remoto </td></tr></tbody></table><br><p>  O fato √© que o PostgreSQL, al√©m dos principais atributos, leva em considera√ß√£o v√°rios atributos do sistema e at√© atributos exclu√≠dos. </p><br><p>  <strong>Observa√ß√£o final</strong> </p><br><br><h3>  Fun√ß√£o lista admtf_Table_Attributes dos atributos da tabela do banco de dados e suas caracter√≠sticas </h3><a name="tfTableA_def"></a><br><p>  A fun√ß√£o <b>admtf_Table_Attributes</b> retorna uma lista de atributos da tabela de banco de dados.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O c√≥digo-fonte pode ser visualizado e baixado aqui.</a> </p><br><p>  Como par√¢metros, a fun√ß√£o assume o nome da tabela de origem ( <b>a_TableName</b> ) e o nome do esquema no qual a tabela √© criada ( <b>a_SchemaName</b> ). </p><br><p>  A fun√ß√£o recupera os dados principais das <b>entradas de</b> diret√≥rio <b>pg_attribute</b> e <b>pg_type</b> .  O primeiro cont√©m registros com dados sobre os atributos de tabelas, visualiza√ß√µes, visualiza√ß√µes materializadas, tipos compostos e at√© fun√ß√µes.  O segundo √© sobre as caracter√≠sticas dos tipos de atributos. </p><br><p>  Talvez seja necess√°rio algum esclarecimento pela maneira como o usu√°rio e os tipos de base s√£o definidos na fun√ß√£o. </p><br><p>  Um atributo de tabela √© declarado com um tipo personalizado se o campo <b>typebasetype</b> for <b>maior</b> que 0. na <b>entrada de</b> diret√≥rio <b>pg_type</b> correspondente, <b>caso</b> contr√°rio, o atributo ser√° do tipo base.  Portanto, o diret√≥rio <b>pg_type est√°</b> envolvido duas vezes na cl√°usula FROM.  Na primeira entrada de diret√≥rio, a presen√ßa de um tipo de usu√°rio √© determinada, se n√£o for definida (tipo de tipo de base <b>= 0</b> ), um valor de tipo base ser√° gerado a partir dessa entrada.  Caso contr√°rio, o tipo base √© determinado a partir do registro para o qual btyp.OID = typ.typbasetype. </p><br><p>  Diretamente, a linha com o tipo base √© formada usando a fun√ß√£o do cat√°logo do sistema <b>FORMAT_TYPE (type_oid, typemod)</b> .  O primeiro par√¢metro √© o registro OID do tipo base.  O segundo par√¢metro √© o valor do modificador para tipos que cont√™m um tamanho.  Por exemplo, VARCHAR (100) ou NUMERIC (4,2), DECIMAL (4,2).  O valor do par√¢metro <b>typemod</b> √© obtido de <b>typ.typtypmod</b> se o atributo for de um tipo de usu√°rio, caso contr√°rio, de <b>attr.atttypmod</b> , ou seja,  diretamente de um registro de atributo. </p><br><img src="https://habrastorage.org/webt/gv/jx/q0/gvjxq0pb7kjjrv6galmsht5s9do.png"><br><div class="spoiler">  <b class="spoiler_title">o c√≥digo fonte do operador na figura</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid = attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> tbl.relname,attr.attnum;</code> </pre><br></div></div><br><p>  Al√©m disso, a fun√ß√£o acessa os dados do diret√≥rio <b>pg_class</b> , <b>pg_namespace</b> e <b>pg_description</b> .  O primeiro e o segundo diret√≥rios s√£o usados ‚Äã‚Äãpara procurar atributos pelos nomes da tabela de esquema e banco de dados. <br><br>  O terceiro diret√≥rio √© usado para recuperar o coment√°rio para o atributo da tabela. </p><br><p>  O coment√°rio sobre o atributo da tabela est√° na entrada em que <b>dsc.objoid</b> cont√©m o OID da tabela de origem e <b>dsc.objsubid √© o</b> n√∫mero de s√©rie do atributo na tabela, ou seja,  <b>attr.attnum</b> . </p><br><p>  Para impedir que a fun√ß√£o retorne atributos remotos e do sistema, a cl√°usula WHERE define a condi√ß√£o <b>attr.attnum&gt; 0 AND attr.atttypID&gt; 0</b> . </p><br><br>  <strong>Tabela 6. O resultado da execu√ß√£o da fun√ß√£o admtf_Table_Attributes ('public', 'Street').</strong> <br><br><table width="95" border="1"><tbody><tr><th width="5">  N√£o. </th><th width="10">  T√≠tulo </th><th width="20">  Tipo personalizado </th><th width="20">  Tipo de base </th><th width="5">  ?  n√£o NULL </th><th width="25">  Coment√°rio </th></tr><tr><td width="5">  1 </td><td width="10">  wcrccode </td><td width="20">  wcrccode </td><td width="20">  smallint </td><td width="5">  t </td><td width="25">  C√≥digo do pa√≠s </td></tr><tr><td width="5">  2 </td><td width="10">  localityid </td><td width="20">  localityid </td><td width="20">  inteiro </td><td width="5">  t </td><td width="25">  ID da comunidade </td></tr><tr><td width="5">  3 </td><td width="10">  streetid </td><td width="20">  streetid </td><td width="20">  smallint </td><td width="5">  t </td><td width="25">  Rua identifica√ß√£o da vila </td></tr><tr><td width="5">  4 </td><td width="10">  streettypeacrm </td><td width="20">  streettypeacrm </td><td width="20">  personagem (8) </td><td width="5">  f </td><td width="25">  Sigla da rua </td></tr><tr><td width="5">  5 </td><td width="10">  nome da rua </td><td width="20"></td><td width="20">  varchar (150) </td><td width="5">  t </td><td width="25">  Nome da rua do assentamento </td></tr></tbody></table><br><h4>  Vers√£o da fun√ß√£o usando alias de regclass para o tipo oid </h4><br><p>  Os identificadores de objeto do PostgreSQL (OIDs) s√£o do mesmo tipo que o OID, atualmente implementado como um n√∫mero inteiro de quatro bytes n√£o assinado.  Por√©m, devido √† presen√ßa de aliases desse tipo, um n√∫mero inteiro pode ser representado como o nome de um objeto.  E vice-versa - converta o nome do objeto em um n√∫mero inteiro do tipo OID. </p><br><p>  Como exemplo, d√™ uma olhada na seguinte <b>instru√ß√£o SELECT</b> .  Ele recupera os nomes da tabela de atributos e os nomes de seus tipos de maneira incomum - em vez de acessar os campos de diret√≥rio correspondentes com os nomes dessas caracter√≠sticas, eles s√£o usados: <br></p><ul><li>  <b>attrelid :: regclass (attrelid :: regclass: NAME)</b> , </li><li>  <b>atttypid :: regtype (atttypid :: regtype: NAME)</b> </li><li>  <b>typbasetype :: regtype (typbasetype :: regtype: NAME)</b> . </li></ul><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype, typ.typbasetype::regtype,attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'public'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'Street'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br><p>  A seguir, o resultado da execu√ß√£o desta consulta. </p><br><img src="https://habrastorage.org/webt/zr/4_/ga/zr4_gal9s-8jnhihyjia7cq0xvs.png"><br><p>  Na lista de valores de sa√≠da do operador SELECT antes da convers√£o usando aliases do tipo OID, todos os valores, exceto o nome do atributo, s√£o num√©ricos, mas, como resultado, os nomes da tabela e os tipos de atributos s√£o exibidos.  Os tipos de valores de sa√≠da podem ser considerados na segunda linha do cabe√ßalho da tabela. </p><br><p>  Al√©m disso, na cl√°usula WHERE da instru√ß√£o, a condi√ß√£o <b>attr.attrelid = ('public' || '.' || 'Street') :: regclass est√° localizada</b> , no lado esquerdo do qual √© um valor num√©rico e, √† direita, √© uma string que √© convertida em um valor num√©rico com usando o alias <b>regclass</b> . </p><br><img src="https://habrastorage.org/webt/7v/tl/nh/7vtlnhnhqmr7idtdcebcsffzjik.png"><br><div class="spoiler">  <b class="spoiler_title">o c√≥digo fonte do operador na figura</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=( a_SchemaName ||<span class="hljs-string"><span class="hljs-string">'.'</span></span>|| a_TableName)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br>  Usando o alias regclass da instru√ß√£o principal, voc√™ pode remover a conex√£o com dois diret√≥rios.  Mas essa melhoria quase n√£o teve efeito no desempenho da fun√ß√£o - nas duas vers√µes, a fun√ß√£o √© executada em 11 ms.  Talvez devido ao fato de a tabela de teste ter poucos atributos. <br>  <b>Observa√ß√£o 4</b> <br><p>  Uma falha grave na condi√ß√£o no formato <b>attr.attrelid = (a_SchemaName || '.' || a_TableName) :: regclass</b> √© manifestada quando h√° um esquema e / ou tabela com um nome incomum no banco de dados.  Por exemplo, <b>"Meu esquema"</b> e / ou <b>"Minha tabela"</b> .  Esses valores devem ser transmitidos entre aspas duplas ou usar a fun√ß√£o QUOTE_IDENT, caso contr√°rio, a fun√ß√£o falhar√° com um erro do sistema. </p><br><img src="https://habrastorage.org/webt/jt/ak/nv/jtaknvaqwphry4yla4bnlemrdeq.png"><br><div class="spoiler">  <b class="spoiler_title">o c√≥digo fonte do operador na figura</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*       ¬´   ¬ª*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">' '</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">' '</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum; <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'" "'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'" "'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br>  Portanto, prefiro usar condi√ß√µes no formato <b>LOWER (nspc.nspname) = LOWER (a_SchemaName) AND LOWER (tbl.relname) = LOWER (a_TableName)</b> , o que n√£o leva a erros do sistema. <br><br>  <b>Observa√ß√£o final</b> <br><a name="Script1"></a><br><h2>  AP√äNDICE 1. Scripts </h2><a name="tfTableF"></a><br><h3>  Criando a fun√ß√£o admtf_Table_Features </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Coment√°rios sobre o c√≥digo fonte da fun√ß√£o podem ser encontrados aqui.</a> <br><div class="spoiler">  <b class="spoiler_title">c√≥digo fonte da fun√ß√£o</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*     ,   */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (rs_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,rs_TableDescription <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>,rs_NumberOfAttribute <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_NumberOfChecks <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_hasPKey <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasIndex <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasSubClass <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_NumberOfRow <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_TableOID OID; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableName NAME; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableDescription TEXT; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableNumberOfRowCalc INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN SELECT INTO rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex,rs_hasSubClass, rs_NumberOfRow tbl.relname,dsc.description,tbl.relnatts::INTEGER,tbl.relchecks::INTEGER, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::INTEGER FROM pg_class tbl INNER JOIN pg_namespace nspc ON tbl.relnamespace = nspc.oid LEFT OUTER JOIN pg_Description dsc ON tbl.oid=dsc.objoid AND dsc.objsubid=0 WHERE nspc.nspname=LOWER(a_SchemaName) AND tbl.relkind=c_TableKind AND tbl.relname =LOWER(a_TableName); EXECUTE 'SELECT count(*) FROM ' ||LOWER(a_SchemaName) ||'.'||quote_ident(LOWER(a_TableName)) INTO v_TableNumberOfRowCalc; RETURN QUERY SELECT rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex, rs_hasSubClass,v_TableNumberOfRowCalc AS rs_NumberOfRow; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName NAME,a_TableName NAME) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Features (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*     ,   */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Features (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (rs_TableName VARCHAR(256),rs_TableDescription TEXT,rs_NumberOfAttribute INTEGER,rs_NumberOfChecks INTEGER,rs_hasPKey BOOLEAN,rs_hasIndex BOOLEAN,rs_hasSubClass BOOLEAN,rs_NumberOfRow INTEGER) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_TableOID OID; /*   */ v_TableName VARCHAR(256); /*   */ v_TableDescription TEXT; /*   */ v_TableNumberOfRowCalc INTEGER; /*     */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT tf.rs_TableName::VARCHAR(256), tf.rs_TableDescription::TEXT, tf.rs_NumberOfAttribute::INTEGER, tf.rs_NumberOfChecks::INTEGER, tf.rs_hasPKey::BOOLEAN, tf.rs_hasIndex::BOOLEAN, tf.rs_hasSubClass::BOOLEAN, tf.rs_NumberOfRow::INTEGER FROM admtf_Table_Features(a_SchemaName::NAME,a_TableName::NAME) tf; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECt * FROM admtf_Table_Features('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECt * FROM admtf_Table_Features('public':: NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="tfTableA"></a><br><h3>  Criando a fun√ß√£o admtf_Table_Attributes </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Coment√°rios sobre o c√≥digo fonte da fun√ß√£o podem ser encontrados aqui.</a> <br><div class="spoiler">  <b class="spoiler_title">c√≥digo fonte da fun√ß√£o</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_class tbl ON tbl.oid = attr.attrelid INNER JOIN pg_namespace nsp ON tbl.relnamespace=nsp.oid LEFT OUTER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE LOWER(nsp.nspname)=LOWER(a_SchemaName) AND LOWER(tbl.relname)=LOWER(a_TableName) AND tbl.relkind=c_TableKind AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY tbl.relname,attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><h3>  Criando a Fun√ß√£o admtf_Table_Attributes Usando Alias ‚Äã‚Äãde Regclass </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Coment√°rios sobre o c√≥digo fonte da fun√ß√£o podem ser encontrados aqui.</a> <br><div class="spoiler">  <b class="spoiler_title">c√≥digo fonte da fun√ß√£o</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE attr.attrelid=(LOWER(a_SchemaName)||'.'|| LOWER(a_TableName))::regclass AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="Apendix2"></a><br><h2>  AP√äNDICE 2. Materiais adicionais </h2><br><h3>  Esquema auxiliar de banco de dados </h3><br><a name="scheme_for_tests"></a><br><img src="https://habrastorage.org/webt/qi/rb/9q/qirb9qyb5nzkn3hef8v7pvgyvvs.png"><br><br><ul><li>  <b>PA√çS</b> - Classificador de pa√≠ses do mundo - OKSM (classifica√ß√£o russa dos pa√≠ses do mundo); </li><li>  <b>HOUSEADDR</b> - Lista de n√∫meros de casas nas ruas de assentamentos; </li><li>  <b>LCLTYTYPE</b> - Diret√≥rio de tipos de assentamentos; </li><li>  <b>LOCALIDADE</b> - Lista de assentamentos; </li><li>  <b>RUA</b> - Lista de ruas em assentamentos; </li><li> <b>STREETTYPE</b> ‚Äî   ; </li><li> <b>TERRITORY</b> ‚Äî   (, , ,   ..); </li><li> <b>TERRITORYTYPE</b> ‚Äî   . </li></ul><br><br><a name="Street_char"></a><br><h3>    Street () </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">        .</a> <br> <strong> 1.    Street ().</strong> <br><img src="https://habrastorage.org/webt/vw/ze/rp/vwzerpaegckljldqsmbrq22zf_m.png"><br><div class="spoiler"> <b class="spoiler_title">    </b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5">  Categoria </th><th width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N√£o. </font></font></th><th width="15">  T√≠tulo </th><th width="20">  Coment√°rio </th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tipo </font></font></th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tipo de base </font></font></th><th width="5">  ?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o NULL </font></font></th></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tbl </font></font></td><td width="5">  0 0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rua </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lista de ruas em assentamentos </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  1 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥digo do pa√≠s </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ID da comunidade </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inteiro </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  3 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rua identifica√ß√£o da vila </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  4 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sigla da rua </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personagem (8) </font></font></td><td width="5">  f </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  5 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nome da rua </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nome da rua </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar (150) </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pk </font></font></td><td width="5">  0 0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> xpkstreet </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chave prim√°ria da tabela de ruas </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  1 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥digo do pa√≠s </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ID da comunidade </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inteiro </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  3 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rua identifica√ß√£o da vila </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streetid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01 </font></font></td><td width="5">  1 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk_street_locality </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chave estrangeira da tabela </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01att </font></font></td><td width="5">  1 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥digo do pa√≠s </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smallint </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01att </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ID da comunidade </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localityid </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inteiro </font></font></td><td width="5">  t </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01rtbl </font></font></td><td width="5">  0 0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> localidade </font></font></td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk01ratt </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5">  t </td></tr><tr><td width="5"> fk01ratt </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  t </td></tr><tr><td width="5"> fk02 </td><td width="5">  2 </td><td width="15"> fk_street_streettype </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk02att </td><td width="5">  1 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5">  f </td></tr><tr><td width="5"> fk02rtbl </td><td width="5">  0 0 </td><td width="15"> streettype </td><td width="20">    </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> fk02ratt </td><td width="5">  1 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5">  t </td></tr><tr><td width="5"> idx01 </td><td width="5">  1 </td><td width="15"> xie1street </td><td width="20">         </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx01att </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5">  t </td></tr><tr><td width="5"> idx01att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  t </td></tr><tr><td width="5"> idx01att </td><td width="5">  3 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5">  f </td></tr><tr><td width="5"> idx01att </td><td width="5">  4 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  t </td></tr><tr><td width="5"> idx02 </td><td width="5">  2 </td><td width="15"> xie2street </td><td width="20">       </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx02att </td><td width="5">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallin </td><td width="5">  t </td></tr><tr><td width="5"> idx02att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  t </td></tr><tr><td width="5"> idx02att </td><td width="5">  3 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  t </td></tr><tr><td width="5"> idx03 </td><td width="5">  3 </td><td width="15"> xie3street </td><td width="20">        </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx03att </td><td width="5">  1 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  t </td></tr><tr><td width="5"> idx04 </td><td width="5">  4 </td><td width="15"> xpkstreet </td><td width="20">   ( )  street </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx04att </td><td width="15">  1 </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5">  t </td></tr><tr><td width="5"> idx04att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  t </td></tr><tr><td width="5"> idx04att </td><td width="5">  3 </td><td width="15"> streetid </td><td width="20">     </td><td width="20"> streetid </td><td width="20"> smallint </td><td width="5">  t </td></tr></tbody></table><br></div></div><br><h3>   </h3><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte tr√™s</a> .</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fun√ß√µes para documentar bancos de dados PostgreSQL.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O fim (parte quatro)</a> .</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt415575/">https://habr.com/ru/post/pt415575/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt415565/index.html">Por que (hoje) o retorno 444 nem sempre √© √∫til</a></li>
<li><a href="../pt415567/index.html">Transmita v√≠deo h264 sem transcodifica√ß√£o de uma c√¢mera Logitech C920</a></li>
<li><a href="../pt415569/index.html">Como configurar o ubuntu 18.04 sendmail + DKIM + SPF + DMARC ou como eu consegui entrar no basti√£o do Gmail</a></li>
<li><a href="../pt415571/index.html">kaggle: Identifica√ß√£o do modelo de c√¢mera do IEEE</a></li>
<li><a href="../pt415573/index.html">Otimiza√ß√£o de um modelo para impress√£o 3D usando o software Blender como exemplo</a></li>
<li><a href="../pt415577/index.html">Slides do curso "DBMS Technologies and Development"</a></li>
<li><a href="../pt415579/index.html">Aprenda o OpenGL. Li√ß√£o 5.5 - Mapeamento Normal</a></li>
<li><a href="../pt415581/index.html">International fintech - digest: 12 not√≠cias sobre o mais importante do setor</a></li>
<li><a href="../pt415587/index.html">StereoPi - nossa pe√ßa de hardware para estudar vis√£o computacional, drones e rob√¥s</a></li>
<li><a href="../pt415589/index.html">"Um pouco mais sobre PD": empresas de TV dos EUA v√£o parar de vender dados de clientes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>