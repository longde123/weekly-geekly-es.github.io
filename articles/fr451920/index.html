<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß¢ ü§¥ ‚úâÔ∏è Optimiser le stockage du courrier dans Zimbra Collaboration Suite ü§∑üèæ üòë üö∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l'un de nos pr√©c√©dents articles sur la planification des infrastructures lors de la mise en ≈ìuvre de Zimbra Collabortion Suite dans l'entreprise,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimiser le stockage du courrier dans Zimbra Collaboration Suite</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/451920/">  Dans l'un de nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©c√©dents articles</a> sur la planification des infrastructures lors de la mise en ≈ìuvre de Zimbra Collabortion Suite dans l'entreprise, il a √©t√© dit que la principale limitation dans le travail de cette solution est la vitesse d'entr√©e / sortie des p√©riph√©riques de disque dans les stockages de courrier.  En effet, √† une √©poque o√π plusieurs centaines d'employ√©s de l'entreprise acc√®dent simultan√©ment au m√™me magasin de messagerie, la largeur de canal pour l'√©criture et la lecture d'informations √† partir de disques durs peut ne pas √™tre suffisante pour le service r√©actif.  Et si pour les petites installations Zimbra cela ne devient pas un probl√®me particulier, alors dans le cas des grandes entreprises et des fournisseurs de SaaS, tout cela peut conduire √† un travail de courrier √©lectronique qui ne r√©pond pas et, par cons√©quent, √† une efficacit√© r√©duite des employ√©s, ainsi qu'√† une violation de SLA.  C'est pourquoi lors de la conception et de l'exploitation d'installations Zimbra √† grande √©chelle, une attention particuli√®re doit √™tre accord√©e √† la question de l'optimisation du fonctionnement des disques durs dans le stockage du courrier.  Examinons deux cas et essayons de comprendre quelles m√©thodes d'optimisation de la charge sur les stockages de disques peuvent √™tre appliqu√©es dans chacun d'eux. <br><br><img src="https://habrastorage.org/web/524/a74/d9d/524a74d9dc834ae581c7893fc079c693.png" alt="image"><a name="habracut"></a><br><br>  <b>1. Optimisation lors de la conception d'une installation Zimbra √† grande √©chelle</b> <br><br>  Au stade de la conception d'une installation Zimbra tr√®s charg√©e, son administrateur devra choisir le syst√®me de stockage de donn√©es √† utiliser.  Pour d√©cider de ce probl√®me, vous devez savoir que la charge principale sur les disques durs est cr√©√©e par le SGBD MariaDB, le syst√®me de recherche Apache Lucene, ainsi que le stockage d'objets blob qui font partie de Zimbra Collaboration Suite.  C'est pourquoi pour le fonctionnement de ces logiciels sous des charges √©lev√©es, il est n√©cessaire d'utiliser des √©quipements fiables et √† haute vitesse. <br><br>  Dans des conditions normales, Zimbra peut √™tre install√© √† la fois sur RAID √† partir de disques durs et sur un stockage connect√© via le protocole NFS.  En cas de tr√®s petites installations, vous pouvez installer Zimbra sur un lecteur SATA standard.  Cependant, dans les grandes installations, toutes ces technologies pr√©sentent divers inconv√©nients sous la forme d'une vitesse d'√©criture r√©duite ou d'une faible fiabilit√©, ce qui est inacceptable pour les grandes entreprises et, en particulier, pour les fournisseurs de SaaS. <br><br>  C'est pourquoi dans des conditions d'infrastructures √† grande √©chelle, Zimbra est pr√©f√©rable d'utiliser le SAN.  C'est elle qui, √† l'heure actuelle, est en mesure de fournir la plus grande bande passante pour les p√©riph√©riques de stockage et en m√™me temps, en raison de la possibilit√© de connecter une grande quantit√© de cache, son utilisation n'entra√Æne pratiquement aucun risque significatif pour l'entreprise.  Une bonne id√©e serait d'utiliser la NVRAM, qui est utilis√©e dans de nombreux SAN pour acc√©l√©rer les performances d'enregistrement.  Mais il est pr√©f√©rable de d√©sactiver la mise en cache des donn√©es enregistr√©es sur les disques eux-m√™mes, car cela peut entra√Æner des dommages irr√©parables au support et une perte de donn√©es en cas de probl√®mes d'alimentation. <br><br>  Quant au choix du syst√®me de fichiers, le meilleur choix serait d'utiliser la norme pour Linux Ext3 / Ext4.  La principale nuance associ√©e au syst√®me de fichiers est qu'il doit √™tre mont√© avec l' <b>option -noatime</b> .  Ce param√®tre d√©sactivera la fonction de fixation de l'heure du dernier acc√®s aux fichiers, ce qui signifie qu'il r√©duira consid√©rablement la charge de lecture et d'√©criture.  En g√©n√©ral, lors de la cr√©ation d'un syst√®me de fichiers ext3 ou ext4 pour Zimbra, les param√®tres suivants de l'utilitaire <b>mke2fs</b> doivent √™tre utilis√©s: <br><br><blockquote> <b>-j</b> - Cr√©ez le syst√®me de fichiers avec un journal ext3 / ext4. <br>  <b>-L TITLE</b> - Pour cr√©er un nom de volume, puis utilisez-le dans / etc / fstab <br>  <b>-O dir_index</b> - Pour utiliser une arborescence de recherche hach√©e pour acc√©l√©rer les recherches de fichiers dans les grands r√©pertoires <br>  <b>-m 2</b> - Pour r√©server 2% du volume dans les grands syst√®mes de fichiers sous le r√©pertoire racine <br>  <b>-J taille = 400</b> - Pour cr√©er un gros journal <br>  <b>-b 4096</b> - Pour d√©terminer la taille du bloc en octets <br>  <b>-i 10240</b> - Pour la m√©moire de messages, cette option doit correspondre √† la taille moyenne des messages.  Vous devez soigneusement consid√©rer ce param√®tre, car par la suite sa valeur ne peut pas √™tre modifi√©e </blockquote><br>  En outre, nous vous recommandons d'activer <b>dirsync</b> pour le stockage d' <b>objets</b> blob, le stockage de m√©tadonn√©es de recherche Lucene et le stockage de files d'attente MTA.  Cela devrait √™tre fait pour la raison que Zimbra utilise g√©n√©ralement l'utilitaire <b>fsync</b> pour garantir qu'il √©crit des <b>objets</b> blob avec des donn√©es sur le disque.  Toutefois, lorsque la bo√Æte aux lettres Zimbra ou le MTA cr√©e de nouveaux fichiers lors de la remise des messages, il devient n√©cessaire d'√©crire sur le disque les modifications qui se sont produites dans les dossiers correspondants.  C'est pourquoi, m√™me dans le cas o√π le fichier a d√©j√† √©t√© √©crit sur le disque √† l'aide de <b>fsync</b> , l'enregistrement de l'ajout aux r√©pertoires peut ne pas avoir le temps d'√©crire sur le disque et, par cons√©quent, peut √™tre perdu en raison d'une panne de serveur soudaine.  En utilisant <b>dirsync,</b> ces probl√®mes peuvent √™tre √©vit√©s. <br><br>  <b>2. Optimisation avec une infrastructure Zimbra fonctionnelle</b> <br><br>  Il arrive souvent qu'apr√®s plusieurs ann√©es de fonctionnement de Zimbra, le nombre de ses utilisateurs augmente consid√©rablement et le service devient de moins en moins r√©actif chaque jour.  Le moyen de sortir de cette situation est √©vident: il vous suffit d'ajouter de nouveaux serveurs √† l'infrastructure pour que le service fonctionne √† nouveau aussi rapidement qu'auparavant.  En attendant, il est loin d'√™tre toujours possible d'ajouter imm√©diatement de nouveaux serveurs √† l'infrastructure afin d'augmenter sa vitesse.  Souvent, les responsables informatiques doivent coordonner pendant longtemps l'achat de nouveaux serveurs avec le service de comptabilit√© ou de s√©curit√©.En outre, les fournisseurs ne parviennent souvent pas √† apporter le nouveau serveur en retard ou √† ne pas fournir ce dont ils ont besoin. <br><br>  Bien s√ªr, il est pr√©f√©rable de construire votre infrastructure Zimbra avec une marge afin d'avoir toujours une marge pour son expansion et ne d√©pendre de personne, cependant, si l'erreur a d√©j√† √©t√© commise, le responsable informatique ne peut que lisser ses cons√©quences.  Par exemple, un responsable informatique peut obtenir une l√©g√®re augmentation de la productivit√© en d√©sactivant temporairement les services syst√®me Linux, qui acc√®dent r√©guli√®rement aux disques durs pendant le fonctionnement et, par cons√©quent, peuvent affecter n√©gativement la vitesse de Zimbra.  Ainsi, pendant un certain temps, vous pouvez d√©sactiver: <br><br><blockquote>  <b>autofs, netfs</b> - Services de d√©couverte de syst√®mes de fichiers distants <br>  <b>tasses</b> - Service d'impression <br>  <b>xinetd, vsftpd</b> - Services NIX int√©gr√©s * dont vous n'aurez probablement pas besoin <br>  <b>portmap, rpcsvcgssd, rpcgssd, rpcidmapd</b> - Services d'appel de proc√©dure distante qui sont couramment utilis√©s en conjonction avec des syst√®mes de fichiers r√©seau <br>  <b>dovecot, cyrus-imapd, sendmail, exim, postfix, ldap</b> - Doublons des principaux utilitaires inclus dans Zimbra Collaboration Suite <br>  <b>slocate / updatedb</b> - √âtant donn√© que Zimbra stocke chaque message dans un fichier s√©par√©, le d√©marrage quotidien du service updatedb peut provoquer des probl√®mes, et vous pouvez donc le faire manuellement pendant la plus petite charge de serveur </blockquote><br>  L'√©conomie de ressources syst√®me r√©sultant de la d√©sactivation de ces services ne sera pas tr√®s importante, mais m√™me cela peut √™tre tr√®s utile dans des conditions proches de la force majeure.  Une fois le nouveau serveur ajout√© √† l'infrastructure Zimbra, il est recommand√© de r√©activer les services pr√©c√©demment d√©sactiv√©s. <br><br>  Il est √©galement possible d'optimiser le fonctionnement de Zimbra en d√©pla√ßant le service syslog vers un serveur distinct afin qu'il ne charge pas les disques durs de stockage de courrier pendant le fonctionnement.  √Ä ces fins, presque n'importe quel ordinateur, jusqu'√† un Raspberry Pi monocarte bon march√©, convient. <br><br>  Pour toutes questions relatives √† la Suite Zextras, vous pouvez contacter le repr√©sentant de Zextras Katerina Triandafilidi par e-mail katerina@zextras.com </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451920/">https://habr.com/ru/post/fr451920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451906/index.html">Vuln√©rabilit√© dans Exchange: comment d√©tecter l'√©l√©vation de privil√®ges √† un administrateur de domaine</a></li>
<li><a href="../fr451908/index.html">L'histoire des ordinateurs: une nuit au Mus√©e Yandex</a></li>
<li><a href="../fr451912/index.html">Le r√©seau de neurones profonds MuseNet √©crit de la musique</a></li>
<li><a href="../fr451916/index.html">PHP asynchrone et l'histoire d'un v√©lo</a></li>
<li><a href="../fr451918/index.html">A la question de TI</a></li>
<li><a href="../fr451922/index.html">Arithm√©tique √† virgule fixe en C ++</a></li>
<li><a href="../fr451926/index.html">√Ä propos du code en direct apr√®s 130 flux</a></li>
<li><a href="../fr451928/index.html">Comment configurer l'analyse Web sur les pages AMP</a></li>
<li><a href="../fr451930/index.html">Automatisation de l'√©clairage des cages d'escalier</a></li>
<li><a href="../fr451932/index.html">PHDays 9: Bienvenue dans la section D√©veloppement s√ªr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>