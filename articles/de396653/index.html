<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí© ‚ò£Ô∏è üê∑ IRotary Projekt ü§ü ‚ö´Ô∏è ü§∂üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In dem ein Telefon mit einem Dialer Elektronik empf√§ngt, um in Mobilfunknetzen zu arbeiten, und wie vorgesehen arbeiten kann. 
 Dies ist eine dreiteil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IRotary Projekt</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396653/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In dem ein Telefon mit einem Dialer Elektronik empf√§ngt, um in Mobilfunknetzen zu arbeiten, und wie vorgesehen arbeiten kann.</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eine dreiteilige Projektbeschreibung, die ich als feierlichen Abschluss des Projekts selbst schreiben musste. Da ich diesen Punkt jedoch zu sehr verz√∂gerte, beschloss ich, das gesamte Projekt als eine einzige zusammenh√§ngende Aussage zu beschreiben. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn sich jemand erinnert, bin ich eine sehr w√ºtende Person. </font><font style="vertical-align: inherit;">Ich werde leicht w√ºtend, wenn ich telefoniere, aber im Moment gibt es keine gute M√∂glichkeit, meinen √Ñrger auszudr√ºcken. </font><font style="vertical-align: inherit;">Ich vermisse die alte Zeit, in der man das Mobilteil des Ger√§ts gewaltsam umdrehen konnte, um Spannungen abzubauen - aber Mobiltelefone bieten keine solche Gelegenheit. </font><font style="vertical-align: inherit;">Und ich machte mich daran, ein Mobiltelefon mit einem Dialer zu erstellen. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So wurde iRotary geboren</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IRotary Projekt</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/e7d/768/b43/e7d768b433efc07a79968dab1fc577f9.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√∂nheit</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich kaufte zun√§chst ein echtes Telefon der alten Schule mit einem W√§hlrad - genau das, das ich als Kind verwendet habe. </font><font style="vertical-align: inherit;">Ich habe eine herrliche orange Farbe gew√§hlt, damit die Sch√∂nheit von iRotary der Ehrgeiz des Projekts nicht unterlegen ist. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Foto wurde am ersten Tag des Kaufs mit Kabeln und allem anderen vom selben Telefon aufgenommen. </font><font style="vertical-align: inherit;">Es sieht heute so cool aus, obwohl es 50% weniger Kabel hat - was bei Mobiltelefonen gut ist. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das gesamte Projekt kostete mich 150 USD f√ºr Teile und 2000 USD f√ºr die Entwicklungszeit - die Montage dauerte zwei volle Tage und dauerte mehrere Monate mit allen Arten von Aktionen, Warten auf Ersatzteile, Verwenden von Ersatzteilen, Warten auf die n√§chsten Teile usw. </font><font style="vertical-align: inherit;">Der erste Schritt bestand nat√ºrlich darin, alles Unn√∂tige zu extrahieren und durch alles zu ersetzen, was Sie brauchen.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 1: Zuerst Wah!</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/39e/871/1fa/39e8711fa2fa5d9a28a41c7b6a820f41.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stellen Sie sich vor, wie es sich anf√ºhlt, eine solche Erdbeere zu machen!</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der beste Kandidat f√ºr Schnittstellen mit dem alten Dialer ist nat√ºrlich der Arduino. Er wird auch f√ºr die Arbeit mit GSM verantwortlich sein. Es ist ideal, um Impulse von einem Dialer zu lesen und in eine Ganzzahl umzuwandeln, die dann zum W√§hlen einer Nummer verwendet werden kann. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommunikationen werden leicht von der GSM-Abschirmung verarbeitet. Dies ist ein Peripherieger√§t, das eine Verbindung zum Arduino herstellt (auf den Stra√üen nennen wir es einen ‚ÄûSchild‚Äú). Es ist sehr einfach zu programmieren und verf√ºgt √ºber eine Bibliothek mit den meisten erforderlichen Funktionen - Lesen von SMS, Senden und Empfangen von Anrufen, Senden von DTMF usw.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der n√§chste Schritt war das Schreiben von Code, um das Zifferblatt in Zahlen umzuwandeln. Der Dialer funktioniert folgenderma√üen: Nach einer erzwungenen Drehung beginnt er sich zur√ºckzudrehen und ber√ºhrt den Schalter einmal f√ºr jede gew√§hlte Nummer. Das hei√üt, wenn Sie drei w√§hlen, sendet der Schalter drei Signale, da drei Nummern daran vorbeigehen. Um die gew√§hlte Nummer zu bestimmen, m√ºssen Sie nur z√§hlen, wie oft der Schalter ge√∂ffnet und geschlossen wurde. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies war mit dem folgenden Code einfach zu bewerkstelligen, der die Variable jedes Mal erh√∂ht, wenn sich die Spannung vom Schalter von niedrig nach hoch √§ndert:</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readPulses</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> pinPulse = digitalRead(PIN_PULSE);<font></font>
 <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinPulse == HIGH &amp;&amp; edge == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        pulses++;<font></font>
        edge = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinPulse == LOW &amp;&amp; edge == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
        edge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes m√ºssen Sie nur die Nummern sammeln und den Anruf t√§tigen, wenn die Anzahl der Ziffern 10 erreicht. In Griechenland sind alle Nummern zehnstellig, mit Ausnahme der Telefonnummern, f√ºr die ich sp√§ter einen Code hinzuf√ºgen werde. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Hinzuf√ºgen von Zahlen zu einer Zeile ist ein einfacher Vorgang, der mit dem folgenden Code ausgef√ºhrt wird.</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readDialing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> digit;
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> finalDigit = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> pinDialing = digitalRead(PIN_DIALING);<font></font>
 <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinDialing == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; dialing == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        digit = getDigit();<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digit != <span class="hljs-number"><span class="hljs-number">-1</span></span>) {<font></font>
            number += (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)digit;<font></font>
            showNumber(number);<font></font>
 <font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (number.length() == NUMBER_LENGTH) {<font></font>
                dialNumber(number);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    dialing = pinDialing;<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er hatte noch keinen Anruf gesendet, da der Schild noch nicht verbunden war - dies war der n√§chste Schritt. </font><font style="vertical-align: inherit;">Hier ist ein Prototyp bei der Arbeit:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/vJwSYywhbds%3Ffeature%3Doembed&amp;usg=ALkJrhg_4Mi-6iHyT-Ytlr869EabVAq5KQ" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er verdiente sofort gutes Geld, selbst mit der alten, heruntergekommenen Maschine, die ich f√ºr das Prototyping gefunden hatte. </font><font style="vertical-align: inherit;">Der Dialer ist eine erstaunlich genaue Sache, und es sollte so sein, sonst h√§tten Sie sich an die falsche Stelle begeben und nichts davon erfahren k√∂nnen, bis Ihnen ein Typ geantwortet hat und Sie Ihre Freundin angerufen haben und Sie entschieden haben, dass sie Sie betrogen hat und einen Skandal werfen, aber tats√§chlich ist es nur ein Schalterm√ºll. </font><font style="vertical-align: inherit;">Aus diesem Grund ist die Zahl der Scheidungen nach der Einf√ºhrung digitaler Tonw√§hler gesunken. </font><font style="vertical-align: inherit;">Dar√ºber hinaus reduziert Gewalt gegen Menschen mit einer gro√üen Anzahl von Nullen in den R√§umen.</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 2: Wer kein Risiko eingeht, der ist nicht GSM-it</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der n√§chste Schritt nach erfolgreicher Nummernerkennung besteht darin, die M√∂glichkeit zum T√§tigen von Mobilanrufen hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Ich habe das Schild mit Arduino verbunden und den f√ºr Anrufe erforderlichen Code hinzugef√ºgt:</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dialNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String number)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    call.Call(numArray);<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufregend. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl es so einfach war, war es sehr cool, da die meisten Funktionen des Mobiltelefons (W√§hlen und Anrufen) bereit waren. So funktioniert es:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/jAfTbwEfRlU%3Ffeature%3Doembed&amp;usg=ALkJrhjK1JnsimPZHTDDSiEVDLXW829hhw" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei diesem Schritt stie√ü ich auf mehrere Schwierigkeiten. Das erste ist, wo das Arduino mit dem Schild am Telefon platziert werden soll, da aufgrund der Komponenten des Telefons praktisch kein Platz vorhanden war. Um dieses fast unl√∂sbare Problem zu l√∂sen, musste ich einen Kompromiss eingehen: Ich habe den Anruf gel√∂scht, der immer noch nicht mit dem Akku betrieben werden konnte (er ben√∂tigt 50 V), was die Authentizit√§t des Ger√§ts beeintr√§chtigte. Warum brauche ich ein Telefon mit Dialer, wenn es nicht den bekannten Klang eines dzzzzzzzzzzzzzzzzz erzeugen kann? </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und die Inspiration kam! Die L√∂sung war einfach: Lassen Sie das Telefon im leisen Modus arbeiten, seien Sie h√∂flich, um andere Menschen nicht zu st√∂ren, aber ansonsten sch√∂n.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich zwei Probleme auf einen Schlag gel√∂st hatte, sp√ºrte ich, wie meine Freude wuchs. Ein weiteres Problem war, dass es irgendwie notwendig war, den Ein- und Ausgang der Abschirmung mit dem Mobilteil zu verbinden. Hier helfen Ausreden nicht weiter, da kein Telefon mit Selbstachtung taub und stumm sein wird. Deshalb habe ich mich zuerst f√ºr ein kleines Mikrofon und einen Lautsprecher entschieden und sie in das Mobilteil gesteckt. Und ich h√§tte es fast bestellt, als ich mich pl√∂tzlich entschied: Ich werde zuerst das vorhandene Mikrofon und den Lautsprecher ausprobieren. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich sprang schnell zum Kuhlmann und skizzierte eine sehr komplizierte Schaltung, die aus einer Vielzahl von Komponenten bestand: drei Dr√§hten und zwei Steckern. Alles zusammen, steckte ich die Stecker in die Ein- und Ausg√§nge der Abschirmung und rief an. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Hallo! - sagte meine Stimme. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Hallo! Ich antwortete freudig. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Ich h√∂re dich! Ich sagte mir.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Und ich dich! </font><font style="vertical-align: inherit;">- Die Antwort klang. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Test war ein voller Erfolg. </font><font style="vertical-align: inherit;">Bestehende Komponenten passen nicht nur zum Schild, sondern erzeugen auch authentisches Rascheln und Feedback, das ich vergessen habe. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Unterschied zwischen einem Mobiltelefon und einem solchen Telefon besteht darin, dass das erstere Ihre Stimme nicht √ºber den Lautsprecher wiedergeben muss. </font><font style="vertical-align: inherit;">Daher scheint es Ihnen, dass Ihre Stimme leiser ist als sie ist (da Sie das Ohr mit dem Lautsprecher verbinden) und Sie mehr schreien - als ob Sie versuchen w√ºrden, Musik √ºber Kopfh√∂rer zu h√∂ren, w√§hrend Sie mit jemandem sprechen. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und am alten Telefon k√∂nnen Sie Ihre Stimme beim Sprechen h√∂ren, was nett ist, und das erfordert nicht, dass Sie Ihren Gespr√§chspartner anschreien. </font><font style="vertical-align: inherit;">Dies ist ein angenehmer Effekt, den wir verloren haben. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Teaser f√ºr das Endprodukt:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/0yND1ilvxss%3Ffeature%3Doembed&amp;usg=ALkJrhhn7CN2cPbO56EM836RNbcPqDYjvA" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Klingelt√∂ne sind falsch, aber es ist Hollywood.</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 3: Schritt weiter</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Audio, Nummernerkennung und GSM funktioniert haben, ist es Zeit, die restlichen Bedienelemente anzuschlie√üen - einen Hebel, eine Taste und eine seltsame LED, eine Download-Anzeige. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist am besten, dies durch Ereignisse zu tun. Arduino funktioniert so nicht, weil Sie st√§ndig fragen m√ºssen: "Wird der Knopf gedr√ºckt?" viele tausend Mal pro Sekunde, aber die Ereignisarchitektur ist mit ein wenig Code leicht zu f√§lschen. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich wollte das Telefon vom Hebel abheben, um den Anruf anzunehmen, wenn das Telefon klingelte, und das Zur√ºcksetzen des Telefons auf den Hebel unterbrach den aktuellen Anruf. Ich wollte auch, dass alle Steuersignale ignoriert werden, wenn sich das Mobilteil am Hebel befindet.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist mit einer Zustandsmaschine leicht zu erreichen. </font><font style="vertical-align: inherit;">Dies bedeutet, dass es eine Variable gibt, die den aktuellen Status des Telefons enth√§lt - allein, sprechen, klingeln, w√§hlen usw. </font><font style="vertical-align: inherit;">Und wenn Ereignisse auftreten (Dr√ºcken der Taste), k√∂nnen sie einfach √ºberpr√ºfen, in welchem ‚Äã‚ÄãZustand sich das Telefon befindet, und entweder eine Aktion ausf√ºhren oder nicht.</font></font><br>
 <br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ereignisse</font></font></h5> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ereignisse k√∂nnen wie Zahlen erkannt werden. </font><font style="vertical-align: inherit;">Wir werden pr√ºfen, ob sich der Status der Schaltfl√§che √§ndert, und das Ereignis nur starten, wenn wir die √Ñnderung erkennen (andernfalls w√ºrden wir das Ereignis tausende Male ausl√∂sen, wenn wir gefragt w√ºrden, ob die Schaltfl√§che gedr√ºckt wurde, und Arduino w√ºrde tausende Male pro Sekunde mit "Ja" antworten).</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_BUTTON_HALF 6</span></span><font></font>
 <font></font>
<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkButtonHalfPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(PIN_BUTTON_HALF) == LOW) {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonHalfEdge == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
            buttonHalfPressed();<font></font>
        }<font></font>
        buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonHalfEdge == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
            buttonHalfReleased();<font></font>
        }<font></font>
        buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Taste hat zwei Zust√§nde: halb gedr√ºckt und vollst√§ndig gedr√ºckt (oder halb gedr√ºckt und vollst√§ndig gedr√ºckt, wenn Sie den Pessimisten fragen). </font><font style="vertical-align: inherit;">Der Code definiert beide Zust√§nde, und andere Ereignisse werden auf die gleiche Weise behandelt. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen sehen, wie das System im n√§chsten Video funktioniert, in dem sich die Komponenten befinden, es muss jedoch noch an USB angeschlossen werden, um Strom zu erhalten.</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/v_e1oqCkeng%3Ffeature%3Doembed&amp;usg=ALkJrhhCBM-13BFrZiZWcmum7tUgYHXpMQ" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sch√∂nheit!</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 4: Batterieleistung</font></font></h4><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/8e2/4dc/77a/8e24dc77a881ac4aff1b719afbb0a9c2.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB-Anschluss zum Laden des Akkus</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Was f√ºr ein Mobiltelefon w√§re es nat√ºrlich, wenn es nicht mobil w√§re? </font><font style="vertical-align: inherit;">Es w√§re kein Handy! </font><font style="vertical-align: inherit;">Die beiden Optionen zum Tragen des Telefons sind also ein kleiner 5-Volt-Akku und eine Schaltung zum Aufladen √ºber USB oder ein sehr, sehr langes Kabel. </font><font style="vertical-align: inherit;">Da Kupfer heute teurer als Gold ist und ich kein Geld verdiene, habe ich mich f√ºr die erste Option entschieden. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ben√∂tigt drei Komponenten:</font></font><br>
<ul>
<li> ( ,     ). ,    ,   ,      .</li>
<li> ,       ,   ‚Äì  USB-  ¬´¬ª.      USB-.</li>
<li>  (   ).    ,     ,     .     ,  ,           ,     Arduino   5,     .</li>
</ul><br>
 <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/25c/91a/4d7/25c91a4d71c84e2c8078d13e44cd314f.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regler und Ladeeinheit</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wieder sind Batterie und Regler mit dem Laden verbunden. Das Aufladen hat einen USB-Anschluss (und ich habe ein Verl√§ngerungskabel verwendet, um es an die Stelle zu verlegen, an der sich das Telefonkabel befand), der zum Aufladen verwendet wird. Der Regler zerst√∂rt alles und gibt die erforderliche Spannung an die erforderlichen Komponenten ab, so dass Sie das Telefon w√§hrend des Betriebs ein- und ausschalten k√∂nnen und die Spannung nicht abf√§llt.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen auch das mitgelieferte Telefon aufladen, was praktisch ist. </font><font style="vertical-align: inherit;">Ich wei√ü nicht, wie lange der Akku h√§lt. Ich habe ihn nicht l√§nger als ein paar Stunden verwendet, aber vielleicht k√∂nnen Sie f√ºr ein paar Tage nicht √ºber Ihr Telefon an Ihre Freunde schreiben (Sie m√ºssen eine Schreibmaschine anschlie√üen). </font><font style="vertical-align: inherit;">Ich werde versuchen, es eines Tages zu testen, aber im Moment sage ich nur, dass der Akku monatelang h√§lt und Sie wochenlang sprechen k√∂nnen. Dann wird er besser verkauft oder nimmt zumindest die erforderliche Menge mit einem Kickstarter auf.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 5: Es gibt keinen Schritt 5.</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/dfb/189/bca/dfb189bca56c7c3874060fc9a8340d04.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Innenseiten sind zusammengebaut</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
und das Projekt ist abgeschlossen! Nachdem Sie die Dr√§hte gezogen und an Stellen geschoben haben, f√ºr die sie nicht vorgesehen waren, k√∂nnen Sie den Koffer schlie√üen, in den alles gut passt - es sei denn, Sie sch√ºtteln ihn. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen die Position der Komponenten grob verstehen. Arduino befindet sich oben rechts, darunter befindet sich eine Abschirmung (Sie sehen eine hervorstehende Antenne). Ein blaues USB-Stromkabel f√ºhrt zum Regler, der mit dem Akku und dem Ladeger√§t verbunden ist, und zum Mutterstecker oben links. Sie k√∂nnen die Kabel f√ºr Mikrofon und Lautsprecher sehen (von rechts oben nach links). </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schaltkreise auf der braunen Leiterplatte unten sind die Originalschaltkreise des Telefons. Sie werden nicht verwendet, aber es w√§re schwierig, sie zu entfernen, und m√∂glicherweise w√ºrde der Hebel (ein transparentes St√ºck Plastik links) ohne sie nicht funktionieren, was inakzeptabel w√§re.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt, wie versprochen, der letzte Werbespot in seiner ganzen Sch√∂nheit. </font><font style="vertical-align: inherit;">Was f√ºr ein Zauber! </font><font style="vertical-align: inherit;">Schicken Sie es unbedingt an alle Ihre Freunde, auch an diejenigen, mit denen Sie lange nicht gesprochen haben. </font><font style="vertical-align: inherit;">Was k√∂nnte wichtiger sein, als dank des verr√ºckten Internetprojekts eines Typen aus Griechenland wieder mit alten Freunden zu chatten? </font><font style="vertical-align: inherit;">Nat√ºrlich nichts! </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es Sie direkt kratzt, Ihr eigenes Mobiltelefon mit einem Dialer herzustellen, und Sie √ºberlegen, von Grund auf neu zu schreiben und schlaflose N√§chte mit dem Reverse Engineering meiner Code-Teile zu verbringen, habe ich gute Nachrichten f√ºr Sie. </font><font style="vertical-align: inherit;">Ich habe den gesamten Code online ver√∂ffentlicht, weil ich eine solche Person bin. </font></font><br>
 <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/skorokithakis/iRotary</font></font></a><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sagen Sie mir in den Kommentaren zum Originalartikel oder auf Twitter, wie sehr dieses erstaunliche Projekt Ihr Leben ver√§ndert hat! </font><font style="vertical-align: inherit;">Schlag!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de396653/">https://habr.com/ru/post/de396653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de396641/index.html">Ein weiteres Smart Home in mehreren Teilen. Wetterstation aus improvisierten Materialien</a></li>
<li><a href="../de396643/index.html">Wie schnell sich die Technologie entwickelt</a></li>
<li><a href="../de396645/index.html">50 Schattierungen von Stumpf * Microchip-Mikrocontroller-E / A-Ports</a></li>
<li><a href="../de396649/index.html">Bitfinex hackte und zog umgerechnet etwa 65 Millionen US-Dollar ab</a></li>
<li><a href="../de396651/index.html">Schauen Sie in die Zukunft, um die Vergangenheit zu verstehen</a></li>
<li><a href="../de396657/index.html">–£ –≤–∞—Å –Ω–µ—Ç –≤—ã—Å—ã–ø–∞–Ω–∏–π? –ë—É–¥—É—Ç</a></li>
<li><a href="../de396659/index.html">Ein weiteres Versprechen von Perseid und anderen Ereignissen des astronomischen Herbstes 2016</a></li>
<li><a href="../de396661/index.html">√úbersicht √ºber das USB-Lightning Transcend JetDrive Go 300K-Flash-Laufwerk</a></li>
<li><a href="../de396663/index.html">Feron LED-Lampen</a></li>
<li><a href="../de396665/index.html">Rosatom betritt den US-Markt mit Brennstoff f√ºr Reaktoren im westlichen Stil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>