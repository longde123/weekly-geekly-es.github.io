<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🏭 ⛈️ 👷🏻 Moskauer Züge (und nicht nur): Was hat sich geändert und danke an diejenigen, die geholfen haben 😏 👩🏽‍⚕️ 🧒🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="600.000 Menschen sehen sich den Zeitplan an unserem Tag an, sodass jede kleine Änderung einen großen Effekt hat. Ich möchte ein wenig darüber berichte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Moskauer Züge (und nicht nur): Was hat sich geändert und danke an diejenigen, die geholfen haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tuturu/blog/465303/"><img src="https://habrastorage.org/webt/qd/bu/_m/qdbu_m6dbbi_jetuirp_v3tjnug.jpeg"><br><br>  600.000 Menschen sehen sich den Zeitplan an unserem Tag an, sodass jede kleine Änderung einen großen Effekt hat.  Ich möchte ein wenig darüber berichten, dass wir der Anwendung auf Wunsch der Community elektrische Züge hinzugefügt haben.  Und um allen zu danken, die uns Feedback gegeben haben, und um zu zeigen, was wir geändert haben. <br><br>  Die erste wichtige Funktion ist der Offline-Modus.  Wir haben es lange nicht eingeführt, weil sich die Bedeutung des Zeitplans gerade ständig ändert.  Und wenn Sie bereits über die Mobilfunkabdeckung hinausgegangen sind, ist es besser, ein Upgrade durchzuführen, um nicht am stornierten Zug anzukommen. <br><br>  Wie sich herausstellte, ist es eine mittelmäßige Idee, es nicht zu tun, weil: <br><br><ol><li>  Viele Menschen möchten den Zeitplan als Ganzes sehen und nicht entsprechend der aktuellen Situation. </li><li>  Eine völlig ungewöhnliche Art der Verwendung der Anwendung wurde eröffnet: von einer Rolltreppe.  Und auf Rolltreppen normalerweise eine Art 3G-LTE-Verbindung oder nur ein Wechsel der Basisstation.  Zur Hauptverkehrszeit wird es auch zwischen Mobilfunkteilnehmern „gestreckt“.  Im Allgemeinen kommt es in der U-Bahn häufig vor, dass das Internet sozusagen so ist, aber tatsächlich besteht keine Verbindung. </li></ol><br><img src="https://habrastorage.org/webt/8v/5w/bu/8v5wbu4-psyzni-cv-pruq1ypjq.jpeg" width="360"><br><br>  Danke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">OVAV</a> : Wir haben begonnen, solche Situationen zu erkennen.  Das Aktionsmodell lautet nun: Wenn eine schnelle Verbindung besteht, wird immer der aktuelle Zeitplan geladen.  Wenn keine Verbindung besteht, wird die Offline-Version angezeigt (diese stammt tatsächlich aus dem lokalen Cache). Darauf befindet sich der Zeitstempel, zu dem sie relevant war.  Beim Durchsuchen können wir ein Update erhalten (die Pakete sind sehr leicht) und es sofort direkt in der On-the-Fly-Oberfläche anzeigen.  Dann wird die Markierung über den Offline-Modus entfernt. <br><br><img src="https://habrastorage.org/webt/fp/ib/53/fpib53vxjl7mxevx82ejj0sddqy.jpeg" width="360"><br><br>  Im Offline-Modus werden automatisch ausgewählte Routen und angezeigte Zeitpläne (Verlauf) hinzugefügt.  Darüber hinaus handelt es sich nicht um einen manuellen Download und nicht nur um einen Cache. Nach dem Zugriff auf unsere Server gehen wir alle Ihre Routen durch und aktualisieren alles für den Offline-Modus.  Sie können Ihre Lieblingsrouten jahrelang nicht öffnen, aber es wird immer eine neue Version geben, sobald Sie das Internet zuletzt mit geöffneter Anwendung hatten.  Der Verlauf wird für die Tage zwischengespeichert, an denen Sie sich bereits den Zeitplan angesehen haben. <br><br>  Da die Pakete sehr leicht sind (es gibt XML-Daten für ein paar Kilobyte pro Route), ist dies alles sehr schnell. <br><br><h3>  Späte Vorhersage </h3><br>  Elektrische Züge, die die API des Transportsystems verwenden, geben einen Status mit einer Verzögerung von einem Grafikschritt (10 Minuten) an, und der Status wird in den letzten 10 Minuten angezeigt.  Das heißt, um 14:22 Uhr können Sie sich um 14:12 Uhr ein Bild von der Bewegung der Züge machen.  Und um 14:12 Uhr wird es mit einem Rahmen von 10 Minuten zusammengesetzt, dh im schlimmsten Fall beträgt die Verzögerung bestenfalls 19 bis 20 Minuten - 10. Wir haben ein wenig mit den Modellmodellen und historischen Daten gespielt und gelernt, dieses Fenster auf zwei Minuten zu reduzieren, um die Bewegung des Restes vorherzusagen Züge.  Das heißt, wenn der Zug nicht wegen eines plötzlichen Unfalls, sondern wegen einer taktischen Änderung des Fahrplans zu spät kommt, werden wir dies 8 bis 18 Minuten vor den tatsächlichen Daten sehr zuverlässig herausfinden. <br><br><h3>  Benutzerfreundlichkeit </h3><br>  Vor allem hatten wir Fragen zur Benutzerfreundlichkeit.  Ja, vor einem Jahr haben wir den benötigten Bildschirm nicht sofort geöffnet: ein zusätzlicher Klick auf den verbleibenden Zeitplan.  Danke an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">airy</a> für das erhöhte Ticket. <br><br>  <b>Jetzt wird die letzte Suche sofort auf dem Startbildschirm geöffnet.</b>  Darüber hinaus überwachen wir den halben Tag: Wenn Sie die Anwendung nach dem Mittagessen öffnen, ordnen wir die Abfahrts- und Zielstationen an bestimmten Stellen neu an. <br><br>  <b>Sie fanden einen sehr schönen Käfer,</b> den sie selbst vor einigen Jahren gelegt hatten.  Und es stellte sich heraus, dass dieselbe Person, die es gebracht hatte, ihn suchte.  Im Allgemeinen brauchten wir einmal einen Moment, in dem morgen die Eisenbahn kommt.  Mitternacht passt nicht.  Tatsache ist, dass der Tag des Planeten um Mitternacht endet und die Menschen - zu einer anderen Zeit.  Und wenn Sie sich heute elektrische Züge ansehen, erwarten Sie, dass nach dem Zug um 23:50 Uhr 00:20 Uhr angezeigt wird, ohne dass die Daten geändert werden müssen. <br><br>  Die Frage war, wo die Grenze gesetzt werden sollte: bis zu eins Uhr morgens, bis zu zwei, bis zu drei, vor fünf Uhr morgens? <br><br>  Da wir Mathematiker sind, haben wir Strömungen modelliert und die Verteilung der Flüge berücksichtigt.  Da es damals keine Big Data gab, waren sie auf Konstanten beschränkt.  Für Moskau wurde die magische Zeit herausgebracht - 2:52, in diesem Moment war es am bequemsten, den Tag zu ändern. <br><br>  Etwa fünf Jahre lang ging es immer tiefer in den Code ein.  Dann gab es ein paar Tickets darüber, dass die Züge für heute verschwinden: Dies sind bestimmte Suchanfragen zwischen 00:00 und 2:52 (wir dachten, dass heute gestern ist).  Und gestern sind alle Züge abgereist. <br><br>  Infolgedessen haben wir uns in verständlichere Kategorien unterteilt, wie wir es ursprünglich hätten tun sollen, wenn wir in diesen Jahren nicht nach Optimierung gesucht hätten (und wir waren auf der Suche nach). <br><br>  <b>Beschwerden regneten über ein helles Thema:</b> Sie sagen, es sei unmöglich, den Zeitplan nachts zu sehen.  Sie haben es dunkel gemacht, jetzt ist es in Mode.  Was charakteristisch ist: Bis es in Mode kam, schrieb niemand solche Tickets. <br><br>  <b>Manchmal wurden Tickets mit dem Effekt gegossen, dass "Sie elektrische Züge verloren haben".</b>  Sie verschwinden nicht hier, sondern bei der CPPK und anderen Fluggesellschaften (im Zeitplan).  Das Standardverhaltensmodell ist, dass sich ein Zug, wenn er den Fahrplan verlässt, einfach in der Luft auflöst.  Benutzer, die sich an ihn erinnern, denken, dass sie irgendwie nach etwas Falschem suchen und nervös sind.  Fühle den Verlust der Kontrolle.  Jetzt haben wir den Geist des Zuges gemacht: eine Linie im Fahrplan mit der Bezeichnung "Abgebrochen".  Die Menschen wurden ruhiger, aber wir gelten nicht als böse Entwickler, die ehrlichen Bürgern Züge stehlen. <br><br>  <b>Verpassen Sie die Station.</b>  Es gibt mehrere Orte, an denen sich elektrische Züge an einem Bahnhof an zwei verschiedenen Orten befinden.  Zum Beispiel gibt es im Backend des Moskauer Kursk-Stundenplans zwei Teile: einen - Kursky, den zweiten - Gorki-Richtungen.  Dies sind zwei unabhängige Stationen mit gemeinsamen Koordinaten.  Das Problem stellte sich heraus, dass Sie eine Route von einem von ihnen zu einem vertrauten Punkt direkt erstellen können, oder Sie können die Schnittstelle verpassen und einen anderen Startpunkt auswählen, eine Route mit vier Übertragungen für zwei Stunden länger erstellen, aber zum selben Punkt.  Die Leute beschwerten sich.  Wir haben solche Stellen an einem Punkt verbunden und Eingaben in einigen Fällen automatisch korrigiert. <br><br>  <b>Das zweite ähnliche Merkmal</b> - es gibt viele Stationen mit ähnlichen Namen.  Wir fragen den Benutzer ausdrücklich, was er genau gemeint hat, wenn die Wahrscheinlichkeit einer Kollision hoch ist. <br><br><img src="https://habrastorage.org/webt/tu/od/w8/tuodw8fxp8myk4guy_xdgzf4k6s.jpeg" width="360"><br><br>  <b>Viele kleinere Verbesserungen bei der Geolokalisierung:</b> Jetzt hängt die Eingabeaufforderung zum Betreten der Station von Ihrer ungefähren Position ab. Wir zeigen diejenigen an, die Ihnen am nächsten liegen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Karpion</a> schrieb viele Wünsche, wie die Anwendung in Verbindung mit anderen Verkehrsträgern aussehen sollte.  Wir dachten, wir hätten es fertiggestellt, dann mit Rechenschwierigkeiten konfrontiert, und dann dachten wir erneut, wir hätten es fertiggestellt ... Im Allgemeinen stellte sich heraus, dass es irgendwo anders vollständig, irgendwo besser war, aber irgendwo gibt es Sackgassen.  Nach einer stabilen Veröffentlichung werden meine Kollegen detaillierter darauf eingehen. <br><br>  In der Zwischenzeit kann ich sagen, dass wir eine Studie darüber durchgeführt haben, wie viel überhaupt notwendig ist - Busse mit elektrischen Zügen zu überqueren.  Es stellte sich heraus, dass der richtige.  Da wir die Daten lieben, kam im Forschungsprozess eine weitere wichtige Sache auf.  Wir haben die Richtungen in Moskau verglichen, wo es bequemer mit dem Bus ist und wo - mit dem Zug. <br><br>  Schauen Sie, wir haben die Richtungen identifiziert, in denen es darauf ankommt (oder wo Sie direkt mit dem Bus fahren können, wo Nahverkehrszüge benötigt werden).  Nach Beliebtheit des Ziels sortieren.  Wenn Sie also Verwandte haben, die in diesen Städten leben, ist dieser Vergleich für sie vielleicht interessant. <br><p><br></p><div class="scrollable-table"><table><tbody><tr><td><br><p>  <b>Richtung</b> </p><br></td><td><br><p>  <b>Preis, Bus</b> </p><br></td><td><br><p>  <b>Preis, Zug</b> </p><br></td><td><br><p>  <b>Zugtransfer</b> </p><br></td></tr><tr><td><br><p>  Moskau - Mozhaysk </p><br></td><td><br><p>  257 </p><br></td><td><br><p>  276 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Obninsk </p><br></td><td><br><p>  269 </p><br></td><td><br><p>  284 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Stupino </p><br></td><td><br><p>  264 </p><br></td><td><br><p>  279 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Wolokolamsk </p><br></td><td><br><p>  273 </p><br></td><td><br><p>  322 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Egorievsk </p><br></td><td><br><p>  275 </p><br></td><td><br><p>  276 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Pereslavl-Zalessky </p><br></td><td><br><p>  285 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr><tr><td><br><p>  Moskau - Kubinka </p><br></td><td><br><p>  94 </p><br></td><td><br><p>  161 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Petushki </p><br></td><td><br><p>  253 </p><br></td><td><br><p>  337 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Voskresensk </p><br></td><td><br><p>  213 </p><br></td><td><br><p>  230 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Susdal </p><br></td><td><br><p>  605 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr><tr><td><br><p>  Moskau - Rjasan </p><br></td><td><br><p>  379 </p><br></td><td><br><p>  462 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Zaraysk </p><br></td><td><br><p>  336 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr><tr><td><br><p>  Nischni Nowgorod - Murom </p><br></td><td><br><p>  591 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr><tr><td><br><p>  Moskau - Aleksin </p><br></td><td><br><p>  484 </p><br></td><td><br><p>  658 </p><br></td><td><br><p>  ja </p><br></td></tr><tr><td><br><p>  Moskau - Ozyory </p><br></td><td><br><p>  286 </p><br></td><td><br><p>  368 </p><br></td><td><br><p>  ja </p><br></td></tr><tr><td><br><p>  Moskau - Gus-Khrustalny </p><br></td><td><br><p>  517 </p><br></td><td><br><p>  701 </p><br></td><td><br><p>  ja </p><br></td></tr><tr><td><br><p>  Moskau - Yasnogorsk </p><br></td><td><br><p>  385 </p><br></td><td><br><p>  388 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Moskau - Zubtsov </p><br></td><td><br><p>  436 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr><tr><td><br><p>  Moskau - Lakinsk </p><br></td><td><br><p>  275 </p><br></td><td><br><p>  421 </p><br></td><td><br><p>  Nein </p><br></td></tr><tr><td><br><p>  Veliky Novgorod - Soltsy </p><br></td><td><br><p>  200 </p><br></td><td><br><p>  - - </p><br></td><td><br><p>  - - </p><br></td></tr></tbody></table></div><br><br>  Im Allgemeinen haben etwa 50% der Zugrichtungen (in denen beide Bahnhöfe eine Verbindung zur Stadt haben) eine Alternative zum Busfahrplan.  Gleichzeitig ist die Kreuzung mit Fernzügen mit etwa 7% gering. <br><br>  <b>Sie haben eine (für uns) sehr coole Sache gemacht: das Feature „Plattform und Pfad“.</b>  An den 50 beliebtesten Bahnhöfen haben wir anhand der Geschichte seiner Versorgung und der Zugbewegungen vorhergesagt, wo der elektrische Zug eingesetzt werden soll.  Gleichzeitig können Antragspassagiere für die Abflugplattform stimmen.  Das heißt, Sie kamen, stiegen in Ihren Zug und klickten wie folgt: <br><br><img src="https://habrastorage.org/webt/pt/pd/69/ptpd69bodyu-iab6j7x0rip_ygs.png" width="360"><br><br>  Bei genügend Stimmen werden der Weg und die Plattform allen Passagieren angezeigt.  Wenn wir Ihnen vertrauen (und wir vertrauen nach ein paar richtigen Abstimmungen), haben Sie eine stärkere Stimme.  Vor fünfzehn Jahren riefen uns Unbekannte an, um zu sagen, dass irgendwo eine Absage stattgefunden habe, und wir stellten sie auf einen Zeitplan (weil es nur Papier gab).  Schon damals erinnerten wir uns daran, dass die Passagiere sich gerne gegenseitig halfen.  Ich denke, jetzt werden wir verstehen, wie wir es besser machen können, und wir werden weiterhin in diese Richtung schauen. <br><br>  Nun, und während wir der Einfachheit halber verschiedene Merkmale gesehen haben, haben wir auch ein Modell der Zugbevölkerung erstellt.  Es hilft vorherzusagen, ob Sie im Stehen oder Sitzen in verschiedenen Zügen fahren werden.  Während wir es ausführen, werde ich Ihnen wahrscheinlich mehr darüber erzählen, wie es endete. <br><br>  Wir haben weiterhin den genauesten Zeitplan in Runet gesehen, bleiben in Kontakt und sind bereit, Ihnen zu sagen, was noch getan werden kann und sollte.  Wir erledigen die notwendigen Dinge nicht immer schnell, aber wir hören immer zu.  Deshalb schimpfen oder loben Sie uns bitte: Dies ist nützlich. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de465303/">https://habr.com/ru/post/de465303/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de465293/index.html">Wie wir den großen Hackathon aufgaben und anfingen, Reisen für einzelne Teams zu unternehmen</a></li>
<li><a href="../de465295/index.html">Wie ich in der Türkei gearbeitet und den lokalen Markt kennengelernt habe</a></li>
<li><a href="../de465297/index.html">"Das Beste, was ich in meiner Karriere getan habe, ist, den Job in die Hölle zu schicken." Chris Dancy über das Verwandeln des Lebens in Daten</a></li>
<li><a href="../de465299/index.html">Apache NIFI - Ein kurzer Überblick über die Funktionen in der Praxis</a></li>
<li><a href="../de465301/index.html">So erstellen Sie einen E-Commerce-Layoutprozess, um alle benötigten Daten abzurufen</a></li>
<li><a href="../de465309/index.html">Ich bin der größte Fiesling in der Entwicklung von Indie-Spielen</a></li>
<li><a href="../de465311/index.html">DIY Fahrzeugüberwachungssystem</a></li>
<li><a href="../de465315/index.html">Kafka und Microservices: ein Überblick</a></li>
<li><a href="../de465319/index.html">Missverständnisse der Vergangenheit</a></li>
<li><a href="../de465321/index.html">In Zukunft können Wissenschaftler lernen, genau vorherzusagen, woran Sie sich erinnern werden.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>