<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§òüèΩ ‚úçüèæ ü¶ï So reduzieren Sie die Speichernutzung und beschleunigen den Python-Code mithilfe von Generatoren üçä üë¥üèæ üõåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits. Heute m√∂chten wir eine n√ºtzliche √úbersetzung teilen, die vor dem Start des Kurses "Web-Entwickler in Python" vorbereitet wurde. Das ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So reduzieren Sie die Speichernutzung und beschleunigen den Python-Code mithilfe von Generatoren</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/477926/"><p>  Hallo allerseits.  Heute m√∂chten wir eine n√ºtzliche √úbersetzung teilen, die vor dem Start des Kurses <a href="https://otus.pw/m8hh/">"Web-Entwickler in Python"</a> vorbereitet wurde.  Das Schreiben von zeit- und speichereffizientem Code in Python ist besonders wichtig, wenn Sie eine Webanwendung, ein Modell f√ºr maschinelles Lernen oder Tests erstellen. </p><br><p><img src="https://habrastorage.org/webt/ii/2f/-o/ii2f-oqb0scheybgzq7yavjz1ue.png"></p><a name="habracut"></a><br><p>  Als ich anfing, Generatoren in Python zu lernen, hatte ich keine Ahnung, wie wichtig sie waren.  Sie halfen mir jedoch st√§ndig beim Schreiben von Funktionen w√§hrend meiner maschinellen Lernphase. </p><br><p>  Mit Generatorfunktionen k√∂nnen Sie eine Funktion deklarieren, die sich wie ein Iterator verh√§lt.  Sie erm√∂glichen es Programmierern, schnelle, einfache und √ºbersichtliche Iteratoren zu erstellen.  Ein Iterator ist ein Objekt, das wiederholt (geloopt) werden kann.  Es wird verwendet, um den Datencontainer zu abstrahieren und ihn wie ein iterierbares Objekt zu verhalten.  Ein Beispiel f√ºr ein iterierbares Objekt k√∂nnen beispielsweise Zeichenfolgen, Listen und W√∂rterb√ºcher sein. </p><br><p>  Der Generator sieht aus wie eine Funktion, verwendet jedoch das Schl√ºsselwort yield anstelle von return.  Schauen wir uns ein Beispiel an, um es klarer zu machen. </p><br><pre><code class="plaintext hljs">def generate_numbers(): n = 0 while n &lt; 3: yield n n += 1</code> </pre> <br><p>  Dies ist eine Generatorfunktion.  Wenn Sie es aufrufen, wird ein Generatorobjekt zur√ºckgegeben. </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; numbers = generate_numbers() &gt;&gt;&gt; type(numbers) &lt;class 'generator'&gt;</code> </pre> <br><p>  Es ist wichtig zu beachten, wie der Zustand im K√∂rper der Generatorfunktion eingekapselt ist.  Sie k√∂nnen mit der integrierten next () -Funktion nacheinander iterieren: </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; next_number = generate_numbers() &gt;&gt;&gt; next(next_number) 0 &gt;&gt;&gt; next(next_number) 1 &gt;&gt;&gt; next(next_number) 2</code> </pre> <br><h2 id="chto-proizoydet-esli-vy-vyzovete-next-posle-okonchaniya-vypolneniya">  Was passiert, wenn Sie next () nach Beendigung der Ausf√ºhrung aufrufen? </h2><br><p>  StopIteration ist ein integrierter Ausnahmetyp, der automatisch auftritt, sobald der Generator die R√ºckgabe eines Ergebnisses beendet.  Dies ist ein Stoppsignal f√ºr die for-Schleife. </p><br><h2 id="operator-yield">  Ertragsaussage </h2><br><p>  Seine Hauptaufgabe besteht darin, den Ablauf der Generatorfunktion so zu steuern, dass er wie eine return-Anweisung aussieht.  Wenn eine Generatorfunktion aufgerufen oder ein Generatorausdruck verwendet wird, gibt sie einen speziellen Iterator zur√ºck, der als Generator bezeichnet wird.  Um einen Generator zu verwenden, weisen Sie ihn einer Variablen zu.  Beim Aufruf spezieller Methoden im Generator wie next () wird der Funktionscode bis yield ausgef√ºhrt. </p><br><p>  Wenn die yield-Anweisung eingeht, h√§lt das Programm die Funktion an und gibt den Wert an das Objekt zur√ºck, das die Ausf√ºhrung initiiert hat.  (W√§hrend return die Ausf√ºhrung der Funktion vollst√§ndig stoppt.) Wenn die Funktion angehalten wird, bleibt ihr Zustand erhalten. </p><br><p>  Da wir nun mit Generatoren in Python vertraut sind, vergleichen wir den √ºblichen Ansatz mit dem Ansatz, bei dem Generatoren in Bezug auf Arbeitsspeicher und Zeitaufwand f√ºr die Codeausf√ºhrung verwendet werden. </p><br><h2 id="postanovka-problemy">  Problemstellung </h2><br><p>  Angenommen, wir m√ºssen eine gro√üe Liste von Zahlen (z. B. 1.000.000.000) durchgehen und die Quadrate aller Zahlen, die separat gespeichert werden m√ºssen, in einer anderen Liste speichern. </p><br><h2 id="obychnyy-podhod">  √úblicher Ansatz </h2><br><pre> <code class="plaintext hljs">import memory_profiler import time def check_even(numbers): even = [] for num in numbers: if num % 2 == 0: even.append(num*num) return even if __name__ == '__main__': m1 = memory_profiler.memory_usage() t1 = time.clock() cubes = check_even(range(100000000)) t2 = time.clock() m2 = memory_profiler.memory_usage() time_diff = t2 - t1 mem_diff = m2[0] - m1[0] print(f"It took {time_diff} Secs and {mem_diff} Mb to execute this method")</code> </pre> <br><p>  Nach dem Ausf√ºhren des obigen Codes erhalten wir Folgendes: </p><br><pre> <code class="plaintext hljs">It took 21.876470000000005 Secs and 1929.703125 Mb to execute this method</code> </pre> <br><p>  Generatoren verwenden </p><br><pre> <code class="plaintext hljs">import memory_profiler import time def check_even(numbers): for num in numbers: if num % 2 == 0: yield num * num if __name__ == '__main__': m1 = memory_profiler.memory_usage() t1 = time.clock() cubes = check_even(range(100000000)) t2 = time.clock() m2 = memory_profiler.memory_usage() time_diff = t2 - t1 mem_diff = m2[0] - m1[0] print(f"It took {time_diff} Secs and {mem_diff} Mb to execute this method")</code> </pre> <br><p>  Nach dem Ausf√ºhren des obigen Codes erhalten wir Folgendes: </p><br><pre> <code class="plaintext hljs">It took 2.9999999995311555e-05 Secs and 0.02656277 Mb to execute this method</code> </pre> <br><p>  Wie wir sehen k√∂nnen, werden Laufzeit und Arbeitsspeicher erheblich reduziert.  Generatoren arbeiten nach einem Prinzip, das als "Lazy Computing" bezeichnet wird.  Dies bedeutet, dass sie Prozessor-, Speicher- und andere Rechenressourcen sparen k√∂nnen. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Ich hoffe, dass ich in diesem Artikel zeigen konnte, wie mit Generatoren in Python Ressourcen wie Speicher und Zeit gespart werden k√∂nnen.  Dieser Vorteil ergibt sich aus der Tatsache, dass die Generatoren nicht alle Ergebnisse im Speicher ablegen, sondern sie im laufenden Betrieb berechnen. Der Speicher wird nur verwendet, wenn wir das Ergebnis der Berechnungen anfordern.  Mit Generatoren k√∂nnen Sie auch eine gro√üe Menge an Code abstrahieren, der f√ºr das Schreiben von Iteratoren erforderlich ist, um die Codemenge zu reduzieren. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477926/">https://habr.com/ru/post/de477926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477912/index.html">Erste Eindr√ºcke vom 10,3-Zoll-PocketBook X-Reader mit E-Ink-Carta-Mobius-Bildschirm</a></li>
<li><a href="../de477914/index.html">Projektion an der Decke: Eindr√ºcke nach einer Woche mit dem Projektor "am Ende" setzen</a></li>
<li><a href="../de477916/index.html">Wie die Sch√∂pfer b√∂sartiger Software versuchen, ihre Entdeckung zu vermeiden: Wir analysieren Spy.GmFUToMitm als Beispiel</a></li>
<li><a href="../de477918/index.html">Open Source Helpdesk als Alternative zu Zendesk und Help Scout. Architektur, Design und Benutzerfreundlichkeit</a></li>
<li><a href="../de477924/index.html">JavaFX Tutorial: CSS-Stil</a></li>
<li><a href="../de477928/index.html">Aufzeichnungen von Berichten von QA-mitap Redmadrobot</a></li>
<li><a href="../de477930/index.html">Beste Architektur f√ºr MVP: Monolith, SOA, Microservices oder Serverless? Teil 2</a></li>
<li><a href="../de477934/index.html">Rabatte von Hostern am Black Friday 2019</a></li>
<li><a href="../de477936/index.html">IT-W√∂rterbuch oder was? Wo? Wohin Teil 2</a></li>
<li><a href="../de477938/index.html">Der Markt f√ºr gebrauchte Server in Russland: Alles begann mit Habr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>