<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛 🗺️ ⌚️ Wir verbinden Online-Karten mit dem Navigator auf dem Smartphone. Teil 1 - Standard-Rasterkarten 🦄 🕵🏾 🚑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wie sind Online-Karten? Wie finde ich die Serveradresse der Karte heraus, an der Sie interessiert sind? Wie erstelle ich eine Einstellungsdatei, mit d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir verbinden Online-Karten mit dem Navigator auf dem Smartphone. Teil 1 - Standard-Rasterkarten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461031/"><p>  Wie sind Online-Karten?  Wie finde ich die Serveradresse der Karte heraus, an der Sie interessiert sind?  Wie erstelle ich eine Einstellungsdatei, mit der der Navigator auf dem Smartphone eine Verbindung zu dieser Karte herstellen kann? </p><a name="habracut"></a><br><h3 id="soderzhanie">  Inhalt: </h3><br><p>  1 - Einführung.  Standard-Rasterkarten <br>  2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fortsetzung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schreiben eines einfachen Rasters für Vektorkarten</a> <br>  3 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein Sonderfall.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir verbinden die OverpassTurbo-Karte</a> </p><br><h3 id="vstuplenie">  Eintrag </h3><br><p> Unter den Navigationsanwendungen für Smartphones gibt es solche, die für den Tourismus und alle Arten von Vorortaktivitäten konzipiert sind.  Zu den bekanntesten gehören OsmAnd, Locus und GuruMaps.  Alle zeichnen sich durch eine Vielzahl spezialisierter Funktionen aus, die sich auf dem Weg als nützlich erweisen können.  Und auch eine noch größere Anzahl aller Arten von (manchmal sehr verwirrenden) Einstellungen.  Aber jetzt interessiert uns vor allem eines: die Möglichkeit, zusätzliche Karten hinzuzufügen und schnell zwischen ihnen zu wechseln. </p><br><p>  Ich stelle fest, dass dies eine äußerst nützliche Funktion ist.  Schließlich kann ein und derselbe Bereich des Geländes auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Karten verschiedener Typen</a> sehr unterschiedlich gezeichnet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">werden</a> .  Bevor schwierige Bereiche überwunden werden, ist es daher hilfreich, sich bei jedem dieser Bereiche erkundigen zu können.  Wenn hierfür jedoch mehrere separate Anwendungen auf einem Smartphone ausgeführt werden müssten, wäre dies äußerst unpraktisch.  Die Leistung verschlechtert sich und der Akku wird schneller verbraucht.  Es ist also sehr schön, dass es die Möglichkeit gibt, mit nur einer Anwendung auszukommen: einer Art kartografischem Aggregator mit einer praktischen Oberfläche, die speziell für den schnellen Wechsel zwischen Karten entwickelt wurde. </p><br><p>  Also.  Das Hinzufügen neuer Karten ist in der Regel relativ einfach.  Der Anwendungsordner verfügt über einen Unterordner mit <strong>Voreinstellungen</strong> .  Das heißt, bei Sicherungsdateien, in denen die Einstellungen zum Herunterladen einer bestimmten Karte angezeigt werden.  Mal sehen, was sie sind. </p><br><p>  Ich stelle fest, dass die Voreinstellungen für alle Anwendungen mehr oder weniger ähnlich sind.  Als Beispiel betrachten wir GuruMaps, da es sowohl für Android als auch für iOS ist.  Stellen wir uns also vor, wir gingen in den Ordner mit seinen Voreinstellungen, fanden dort eine Datei namens <em>openstreetmaps.ms</em> und öffneten sie dann mit einem normalen Texteditor. </p><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">customMapSource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>OpenStreetMaps<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minZoom</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minZoom</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxZoom</span></span></span><span class="hljs-tag">&gt;</span></span>18<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxZoom</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>http://{$serverpart}.tile.openstreetmap.org/{$z}/{$x}/{$y}.png<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">serverParts</span></span></span><span class="hljs-tag">&gt;</span></span>ab c<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">serverParts</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">customMapSource</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tatsächlich haben wir nur eine Liste mit mehreren Werten.  Betrachten wir sie der Reihe nach: </p><br><p>  <strong>name</strong> - Der Name der Karte, die in der Anwendung angezeigt wird <br>  <strong>minZoom</strong> - Ab welcher <strong>Zoomstufe</strong> wird diese Karte angezeigt <br>  <strong>maxZoom</strong> - Bis zu welcher <strong>Zoomstufe</strong> wird diese Karte angezeigt <br>  <strong>url</strong> - Vorlage für den Zugriff auf Kartendateien <br>  <strong>serverParts</strong> - Wenn der Server, auf dem die Kartendateien gespeichert sind, mehrere Spiegel hat, müssen Sie deren Namen <strong>auflisten</strong> </p><br><p>  Bevor ich fortfahre, stelle ich fest, dass große Karten für die Speicherung auf Servern in kleine Teile zerlegt werden.  Normalerweise sind dies PNG-Bilder mit einer Größe von 256 x 256 Pixel.  Diese Fragmente werden <strong>Kacheln genannt</strong> . </p><br><p><img src="https://habrastorage.org/webt/f7/vd/gs/f7vdgskm8jqcztskwkp3eo-efgo.png"></p><br><p>  Schauen wir uns nun die URL-Vorlage genauer an. </p><br><p> <code>http://{$serverpart}.tile.openstreetmap.org /{$z}/{$x}/{$y}.png</code> </p> <br><p>  Der Navigator ersetzt die Wörter in geschweiften Klammern automatisch durch die „Koordinaten“ des aktuell benötigten Kartenfragments.  Folgendes wird die Stubs genau ersetzen: </p><br><p>  <strong>{$ serverpart}</strong> - Einer der serverParts-Werte wird hier ersetzt. <br>  <strong>{$ z}</strong> - Die Zoomstufe, für die Sie ein Kartenfragment herunterladen möchten <br>  <strong>{$ x}</strong> - Die horizontale Nummer des Kartenfragments <br>  <strong>{$ y}</strong> - Die Nummer des Kartenfragments vertikal </p><br><p>  Nach dem Ersetzen der Werte erhält der Navigator einen Link, über den die Datei mit dem erforderlichen Kartenfragment heruntergeladen wird.  Zum Beispiel: </p><br><p> <code>http://a.tile.openstreetmap.org /12/2478/1265.png</code> </p> <br><p>  Wenn der Download abgeschlossen ist, wird die heruntergeladene Kachel auf dem Smartphone-Bildschirm angezeigt. </p><br><h3 id="dobavlyaem-svoyu-kartu">  Fügen Sie Ihre Karte hinzu </h3><br><p>  Angenommen, Sie haben im Internet eine Karte gefunden, die Sie interessiert und die Sie wirklich gerne mit Ihrem Smartphone verbinden möchten.  Lass es uns versuchen.  Rufen Sie zunächst mit einem Browser auf Ihrem Computer die Site mit einem Fenster zum Anzeigen dieser Karte auf.  Zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">dieser</a> . </p><br><p><img src="https://habrastorage.org/webt/o9/7j/n4/o97jn4dv55rqiauzbul5nrixoci.png"></p><br><p>  Öffnen Sie das Panel mit den Entwicklertools (Strg + Alt + I für Google Chrome). </p><br><p>  Wechseln Sie im folgenden Fenster zur Registerkarte Quellen. </p><br><p>  Wir öffnen alle Ordner der Reihe nach, bis wir den Ordner mit Bildern von Schnitten der angezeigten Karte finden. </p><br><p>  Klicken Sie mit der rechten Maustaste auf den Dateinamen.  Wählen Sie im folgenden Menü die Option Linkadresse kopieren </p><br><p><img src="https://habrastorage.org/webt/o2/wy/jh/o2wyjhv9srqwqfq0789r-ggttws.png"></p><br><p>  Zum Beispiel haben wir einen solchen Link <br> <code>http://anygis.herokuapp.com/Combo_Best_Genshtab/1242/639/11</code> </p> <br><p>  Sie müssen verstehen, was genau diese Zahlen bedeuten.  Wir überprüfen von unserer Referenzkarte - OpenStreetMaps. </p><br><p> <code>http://a.tile.openstreetmap.org/1242/639/11.png</code> </p> <br><p>  Wird nicht geladen.  Versuchen wir, die Zahlen zu tauschen. <br> <code>http://a.tile.openstreetmap.org/11/1242/639.png</code> </p> <br><p>  Geladen!  Vergleichen Sie nun die Kachel, die Sie durch den ersten und zweiten Link erhalten haben: </p><br><p><img src="https://habrastorage.org/webt/ad/gs/eb/adgseb703cdamjohxfosiuu8po4.png"></p><br><p>  Wir haben dafür gesorgt, dass die Kacheln dieser beiden Karten dieselbe Stelle aufweisen.  Und vor allem keine Offsets.  Die Karte, die wir gefunden haben, wurde in einer Standardprojektion erstellt und ist für den Anschluss geeignet. </p><br><p>  Nun, da wir wissen, in welcher Reihenfolge die Koordinaten für OpenStreetMaps waren - <strong>z, x, y</strong> - können wir sicher sagen, in welcher Reihenfolge sie auf unserer Karte angezeigt werden. </p><br><p> <code>http://anygis.herokuapp.com/Combo_Best_Genshtab/{$x}/{$y}/{$z}</code> </p> <br><p>  Vergrößern und verkleinern Sie nun die Karte im Ansichtsfenster.  Wir stellen also fest, dass die Karte erst ab dem 0. und 15. Zoom geladen wird. </p><br><p>  Wenn die URL mit einem einzelnen Buchstaben oder einer einzelnen Zahl beginnen würde, könnten dort andere Werte ersetzt werden.  Aber normalerweise gibt es entweder <strong>a, b, c</strong> oder <strong>0,1,2,3</strong> . </p><br><p>  Jetzt haben wir alle erforderlichen Parameter herausgefunden und können eine Voreinstellung für unsere neue Karte erstellen. </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">customMapSource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>.   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minZoom</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">minZoom</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxZoom</span></span></span><span class="hljs-tag">&gt;</span></span>15<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maxZoom</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>http://anygis.herokuapp.com/Combo_Best_Genshtab/{$x}/{$y}/{$z}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">customMapSource</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Es bleibt, die Datei unter einem neuen Namen zu speichern und Ihrer Navigationsanwendung hinzuzufügen.  Für iOS - ziehen Sie die Datei einfach per Drag &amp; Drop in den Anwendungsordner (über iTunes).  Für Android - kopieren Sie die Datei in das folgende Verzeichnis: </p><br><p> <code>Android\data\com.bodunov.GalileoPro\files\Imported</code> </p> <br><p>  Wenn Sie nun den Navigator öffnen, wird das, was Sie getan haben, in der Liste der Karten angezeigt.  Glückwunsch! </p><br><p><img src="https://habrastorage.org/webt/ei/qp/qf/eiqpqfzt3mntr2p9g68ewvhnf04.png"></p><br><p>  Wie Sie sehen können, war es ziemlich einfach.  Und das Beste ist, dass der gesamte Prozess für alle oben genannten Navigatoren mehr oder weniger ähnlich ist.  Schnell, vielseitig und plattformübergreifend. </p><br><p>  Natürlich gibt es Karten in nicht standardmäßigen Projektionen.  Oder mit nicht standardmäßiger Nummerierung.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">In diesem Artikel habe</a> ich beschrieben, wie dieses Problem gelöst werden kann.  Trotzdem kann die überwiegende Mehrheit der im Internet gefundenen Karten einfach und ohne zusätzliche Probleme verbunden werden. </p><br><p>  Übrigens können Sie auf meiner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">AnyGIS-</a> Website vorgefertigte Voreinstellungen herunterladen.  Sie werden automatisch in den Formaten aller oben genannten Navigatoren basierend auf der von mir gesammelten Datenbank generiert.  Und regelmäßig aktualisiert.  Also, falls nötig, herunterladen und verwenden. </p><br><p>  Nun, das ist mit der Einführung vorbei.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Im nächsten Artikel</a> werde ich Ihnen erklären, wie Sie Vektor-Online-Karten verbinden. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461031/">https://habr.com/ru/post/de461031/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461015/index.html">Lebe und lerne. Teil 2. Universität: 5 Jahre oder 5 Korridore?</a></li>
<li><a href="../de461017/index.html">Neuer GPU-Tracking-Algorithmus: Wavefront Path Tracing</a></li>
<li><a href="../de461019/index.html">Wie ist das Leben für Entwickler im Iran?</a></li>
<li><a href="../de461027/index.html">Java REPL Sie nicht ScriptEngine</a></li>
<li><a href="../de461029/index.html">Ein See voller Marketingdaten - von monströsen Tabellen bis hin zu Berichten und Visualisierungen</a></li>
<li><a href="../de461033/index.html">Woher kommt diese Konfiguration? [Debian / Ubuntu]</a></li>
<li><a href="../de461035/index.html">Lehrreiche Episoden aus der Serie Silicon Valley (Staffel 1)</a></li>
<li><a href="../de461037/index.html">Und hier bin ich "echt"</a></li>
<li><a href="../de461039/index.html">Das Buch „Perfekter Algorithmus. Graph-Algorithmen und Datenstrukturen "</a></li>
<li><a href="../de461041/index.html">Abgerundet oder spitzwinklig?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>