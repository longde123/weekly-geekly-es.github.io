<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòà ‚òùüèæ üìß Manajemen tes otomatis dengan Telegram üö¥üèº üßóüèæ ü§≥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebagai seorang insinyur QA, saya mengembangkan sistem swa-uji. Menghadapi sejumlah masalah: 



- Untuk setiap jenis pengujian, saya harus membuat pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manajemen tes otomatis dengan Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471364/">  Sebagai seorang insinyur QA, saya mengembangkan sistem swa-uji.  Menghadapi sejumlah masalah: <br><br><ul><li>  Untuk setiap jenis pengujian, saya harus membuat pekerjaan saya sendiri di CI dan menjalankannya dengan tangan. </li><li>  Pengembang menolak untuk menjalankan kasus swa-uji. </li><li>  Ketidakmampuan menjalankan autotest dari mana saja pada perangkat. </li><li>  QA insinyur uji manual tidak bisa menjalankan autotes sendiri. </li></ul><br>  Oleh karena itu, saya memutuskan untuk membuat prototipe kecil bot untuk menjalankan tes otomatis, yang akan mencakup sebagian besar masalah yang dijelaskan di atas. <br><br>  <b>Deskripsi gagasan:</b> <br><br>  Pengguna mengirimkan perintah yang diperlukan ke obrolan, meluncurkan build di sistem CI, sesuai dengan aturan yang ditentukan dalam konfigurasi.  CI menjalankan autotest dengan tanda terbaik.  Setelah dijalankan, skrip di dalam repositori tes menerima informasi tentang status build, mengumpulkan log dan mengirimkannya kembali ke pengguna dalam obrolan telegram. <br><a name="habracut"></a><br>  <b>Alat:</b> <br><br><div class="spoiler">  <b class="spoiler_title">Alat-alatnya</b> <div class="spoiler_text"><ul><li>  Bahasa Pemrograman - Python </li><li>  Kerangka Uji - Pytest </li><li>  Klien HTTP - Permintaan </li><li>  DataBase - SQLite3 </li><li>  ORM - Peewee </li><li>  Sistem CI - Travis CI </li></ul><br></div></div><br><br>  <b>Isi</b> <br><br><ol><li>  Persiapan </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pendaftaran Bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mempersiapkan repositori tes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tes dan Penebangan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pembuatan laporan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konfigurasikan Travis CI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Prinsip-prinsip bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penempatan di Heroku</a> </li></ol><br><a name="1"></a><br><h3>  <b>Pendaftaran Bot</b> </h3><br>  Pertama-tama, kita perlu mendaftarkan telegram bot dan mendapatkan id uniknya, yang merupakan token.  Untuk melakukan ini, tulis pesan / mulai ke bot @BotFather. <br>  Tim utama kami adalah / newbot, dengan memasukkan yang kami akan diminta untuk datang dengan nama bot. <br>  Tetapi ada satu aturan - nama harus diakhiri dengan bot.  BotFather mengambil nama bot dan mengembalikan token Anda.  Aktifkan bot dengan mulai mengobrol.  Selanjutnya, Anda perlu mengirim permintaan API ke metode getUpdates. <br><br><pre><code class="python hljs">https://api.telegram.org/bot{_}/getUpdates</code> </pre> <br>  Ingat hat_id yang diterima. <br><br><a name="2"></a><br><h3>  <b>Mempersiapkan repositori tes</b> </h3><br>  Selanjutnya, Anda perlu mengatur repositori dengan tes, atau menggunakan artikel yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">disiapkan sebelumnya</a> . <br><br><a name="3"></a><br>  <i>Tes dan Penebangan</i> <br><br>  Buat fungsi tes dan tandai dengan tanda terbaik - penuh, asap dan burung. <br><br>  Penting untuk menambahkan logging ke pengujian kami dengan membuat file pytest.ini dan menambahkan panggilan ke metode info dari perpustakaan logging di fungsi tes. <br>  File pytest.ini berisi template untuk log langsung dan file log. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh uji</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logging @pytest.mark.full @pytest.mark.smoke <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cat_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"cat"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.full @pytest.mark.smoke <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_dog_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"dog"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.full <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_horse_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"horse"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.bird <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_bird_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bird"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span></code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">pytest.ini</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[pytest] markers = smoke: for smoking testing full: for regression testing bird: facts only bird log_cli = 1 log_cli_level=INFO log_cli_format = %(asctime)s [%(levelname)8s] %(message)s log_cli_date_format='%Y-%m-%d %H:%M:%S' log_file = test_log.log log_file_level=INFO log_file_format= %(asctime)s [%(levelname)8s] %(message)s log_file_date_format='%Y-%m-%d %H:%M:%S'</code> </pre> <br></div></div><br><br><a name="4"></a><br>  <i>Pembuatan laporan</i> <br><br>  Kami membuat skrip yang, setelah perakitan selesai, mengumpulkan informasi dari sistem CI dan mengirimkannya ke telegram chat, bersama dengan log. <br>  Di dalam skrip, Anda perlu mengganti nilai TELEGRAM_BOT dan CHAT_ID dengan yang Anda terima sebelumnya. <br><br><div class="spoiler">  <b class="spoiler_title">Kode skrip</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os TRAVIS_TEST_RESULT = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_TEST_RESULT"</span></span>) TRAVIS_REPO_SLUG = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_REPO_SLUG"</span></span>) TRAVIS_BRANCH = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_BRANCH"</span></span>) TRAVIS_JOB_WEB_URL = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_JOB_WEB_URL"</span></span>) TRAVIS_COMMIT_MESSAGE = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_COMMIT_MESSAGE"</span></span>) TELEGRAM_TOKEN = <span class="hljs-string"><span class="hljs-string">"808619876:GHrtj9zs-KvKhhtWyu1YoxjtIikUYMGVjD8g"</span></span> CHAT_ID = <span class="hljs-string"><span class="hljs-string">"272560060"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRAVIS_TEST_RESULT != <span class="hljs-number"><span class="hljs-number">0</span></span>: build_status = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: build_status = <span class="hljs-string"><span class="hljs-string">""</span></span> TEXT = <span class="hljs-string"><span class="hljs-string">f" : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{build_status}</span></span></span><span class="hljs-string"> \n : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_REPO_SLUG}</span></span></span><span class="hljs-string"> \n : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_BRANCH}</span></span></span><span class="hljs-string"> \n Commit : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_COMMIT_MESSAGE}</span></span></span><span class="hljs-string"> \n -: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_JOB_WEB_URL}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> URL = <span class="hljs-string"><span class="hljs-string">f"https://api.telegram.org/bot</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TELEGRAM_TOKEN}</span></span></span><span class="hljs-string">/sendMessage"</span></span> body = {<span class="hljs-string"><span class="hljs-string">'chat_id'</span></span>: CHAT_ID, <span class="hljs-string"><span class="hljs-string">'text'</span></span>: TEXT} response = requests.post(url=URL, json=body) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> URL = <span class="hljs-string"><span class="hljs-string">f"https://api.telegram.org/bot</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TELEGRAM_TOKEN}</span></span></span><span class="hljs-string">/sendDocument"</span></span> body = {<span class="hljs-string"><span class="hljs-string">'chat_id'</span></span>: CHAT_ID} file = {<span class="hljs-string"><span class="hljs-string">"document"</span></span>: open(<span class="hljs-string"><span class="hljs-string">"test_log.log"</span></span>)} response = requests.post(url=URL, data=body, files=file) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response send_message() send_file()</code> </pre> <br></div></div><br>  Skrip menggunakan variabel sistem dan menerima nilai dari Travis CI. <br><br>  Jika nilai TRAVIS_TEST_RESULT tidak sama dengan nol, nilai diatur ke "Berhasil", fungsi send_message pertama kali diproses, yang mengirimkan informasi perakitan ke obrolan (nama repositori, cabang yang dipilih, nama komit yang digunakan, tautan ke log web), kemudian fungsi send_file yang mengirim file log. <br><br>  Dalam repositori pengujian, tambahkan file konfigurasi - travis.yml.  Di dalam kami menggambarkan saluran pipa di mana perakitan akan bekerja. <br><br><div class="spoiler">  <b class="spoiler_title">travis.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">language: python python: - "3.7" install: - pip install -r requirements.txt script: pytest -m smoke after_script: - python tg_command.py</code> </pre> <br></div></div><br>  Selanjutnya, kita perlu menggunakan repositori di GitHub untuk menambahkannya ke Travis CI. <br><br><a name="5"></a><br><h3>  <b>Pengaturan TRAVIS_CI</b> </h3><br>  Kami pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs</a> . <br>  Masuk menggunakan akun GitHub Anda.  Beralih ke tab Dasbor.  Setelah sebelumnya membuka DevTools (Jaringan), di sub-tab Repositori di situs yang berlawanan dengan gudang tes, gerakkan penggeser - aktifkan unitnya.  Di tab Jaringan (DevTools), permintaan aktif tiba, di pratinjau yang ada informasi tentang id repositori, nomor tersebut harus diingat (salin / tulis).  Beralih ke situs di tab Pengaturan.  Kami menyalin atau mengingat token - kami membutuhkannya. <br><br><a name="6"></a><br><h3>  <b>Pengaturan bot</b> </h3><br>  Pada artikel ini kita tidak akan berkutat pada analisis kode, Anda bisa melihatnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori</a> .  Sekarang penting bagi kita untuk memahami dasar-dasar topik, jadi mari kita lanjutkan untuk menyiapkan bot kami: <br><br>  Di dalam repositori terdapat file-file: <br><br><ol><li>  main.py - skrip bot; </li><li>  models.py - file dengan model untuk ORM; </li><li>  conf.ini - file dengan variabel konfigurasi; </li><li>  runtime.txt - memperbaiki nilai versi Python untuk Travis CI; </li><li>  procfile - setting untuk gunicorn; </li><li>  wsgi.py - file peluncuran aplikasi dengan gunicorn. </li></ol><br>  Untuk membuat bot Anda berfungsi, Anda perlu mengganti data di conf.ini, yaitu: <br><br><ul><li>  travis_token - menunjukkan token yang diterima ke Travis CI; </li><li>  travis_base_url - tentukan alamat API Travis CI; </li><li>  travis_repository_id - tentukan id repositori dengan autotest, di dalam Travis CI; </li><li>  telegram_chat_id - tentukan id obrolan dari telegram tempat pesan dari bot akan dikirim; </li><li>  telegram_bot_url - tentukan url ke bot. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Contoh Conf.ini</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[travis] travis_token = token HkjhkjgGKJhjgFGfdgd travis_base_url = https://api.travis-ci.org travis_repository_id = 10898384 [telegram] telegram_chat_id = 24234234 telegram_bot_url = https://api.telegram.org/bot87543366:AAHtj9zs-Kv4zGWyu1eTXegikUYMGVjD8g/</code> </pre> <br></div></div><br><a name="7"></a><br>  <i>Prinsip-prinsip bot</i> <br><br>  Penting bahwa setiap permintaan harus memberikan status respons 200. Jika tidak, telegram mulai mengirim permintaan secara siklis hingga menerima respons yang valid. <br><br>  Bot memiliki serangkaian perintah: <br><br>  Pembatas dapat berupa karakter khusus apa pun kecuali garis bawah. <br><br><ul><li>  add_m - tambahkan kit pengujian (tanda python). <br>  Templat: * perintah * {deskripsi kit} {pembatas} {tanda nama}. <br>  Contoh: add_m Menguji burung / burung. </li><li>  add_b - tambahkan cabang untuk pengujian. <br>  Templat: * perintah * {deskripsi cabang} {pembatas} {nama cabang dari git}. <br>  Contoh: add_b Master. </li><li>  pilih - memungkinkan Anda memilih cabang untuk pengujian secara default. <br>  Templat: * perintah *. <br>  Contoh: Setelah memasukkan perintah pilih, tombol muncul untuk memilih cabang yang ditambahkan ke database dengan perintah add_b. </li><li>  run - Perintah untuk memulai perakitan. <br>  Templat: * perintah *. <br>  Contoh: Setelah memasukkan perintah jalankan, tombol untuk memilih set autotests yang ditambahkan ke database dengan perintah add_m muncul.  Saat memulai, cabang yang ditentukan oleh perintah pilih dipilih secara otomatis. </li><li>  del_m - menghapus satu set tes. <br>  Templat: * perintah * {tanda nama}. <br>  Contoh: burung del_m. </li><li>  del_b - menghapus cabang yang dimasukkan dalam database. <br>  Templat: * command * {branch from git}. <br>  Contoh: master del_b. </li></ul><br>  <i>Bagaimana cara kerja bot?</i> <br><br>  <b>1.</b> Pengguna menambahkan test suite (add_m): <br>  Perintah membagi data pengguna menjadi 2 bagian - deskripsi dan nama cabang di git.  Nama ini ditulis di kolom mark_name di dalam database, dan deskripsi di kolom mark_description. <br><br>  <b>2.</b> Pengguna menambahkan cabang (add_b): <br>  Perintah membagi data pengguna menjadi 2 bagian - deskripsi dan nama cabang di git.  Nama ini ditulis di kolom branch_name di dalam database, dan deskripsi di kolom branch_description. <br><br>  <b>3.</b> Pengguna memilih cabang default (pilih): <br>  Pengguna menerima tombol dalam obrolan, dibentuk sesuai dengan data dari tabel branch_description dan branch_name.  Pengguna memilih tombol dengan cabang yang diinginkan.  Itu ditulis ke tabel favorite_branch. <br><br>  <b>4.</b> Pengguna memulai inisialisasi build (run): <br>  Pengguna menerima tombol dalam obrolan, dibentuk sesuai dengan data dari tabel <br>  mark_description dan mark_name.  Pengguna memilih tombol dengan kit untuk menjalankan autotest. <br><br>  Berdasarkan pada data yang dipilih oleh pengguna, bot menghasilkan permintaan dalam metode pemicu di kelas TravisCI dan mengirimkannya ke Travis untuk dieksekusi.  Di dalam sistem Travis, memicu opsi membangun diaktifkan.  Opsi ini menimpa file travis.yml, mengubah bagian skrip menjadi data yang dipilih pengguna. <br><br><a name="8"></a><br><h3>  <b>Penempatan di HEROKU</b> </h3><br>  Agar bot berfungsi, ia harus digunakan untuk hosting.  Saya sarankan menggunakan Heroku, karena platform ini memiliki tarif gratis, yang memberikan kekuatan yang diperlukan agar bot bekerja. <br><br>  <i>Bagaimana cara menyebarkan bot?</i> <br><br>  Agar tidak menggambarkan keseluruhan proses, saya akan meninggalkan tautan ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> resmi sebagai permulaan: <br><br>  Jika Anda ingin bekerja dengan Heroku melalui GUI, isi kode pada Github.  Anda perlu mendaftar melalui antarmuka web Heroku.  Setelah mendaftar, klik Baru -&gt; Buat aplikasi baru -&gt; Masukkan nama aplikasi dan pilih suatu wilayah.  Buka tab Penyebaran dan pilih integrasi dengan Github dalam metode Penyebaran. <br><br>  Sebelum kita muncul blok untuk mencari repositori.  Masukkan nama repositori dan klik tombol Cari.  Di hasil pencarian, di seberang nama repositori, klik tombol Connect.  Di blok penyebaran Manual, pilih cabang dan klik "Menyebarkan". <br><br>  Saat terakhir - Anda harus mengaktifkan webhook menggunakan permintaan GET: <br><pre> <code class="python hljs">https://api.telegram.org/bot{id_}/setWebhook?url=https://{_}.herokuapp.com/bot</code> </pre> <br><br>  Bot bisa digunakan.  Kami memeriksa bahwa semuanya bekerja untuk kami: <br><br><img src="https://cdn1.radikalno.ru/uploads/2019/10/13/7d55521afbcfd87833197fc0a3ad0c82-full.jpg" alt="gambar"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471364/">https://habr.com/ru/post/id471364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471348/index.html">Aplikasi TypeScript dengan tumpukan penuh</a></li>
<li><a href="../id471350/index.html">Membalikkan rekayasa amplifier operasional dengan noise rendah dari komputer analog pada tahun 1969</a></li>
<li><a href="../id471352/index.html">Menulis presentasi di LaTeX</a></li>
<li><a href="../id471358/index.html">Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 4: API Asli</a></li>
<li><a href="../id471360/index.html">Metode duplikasi. 11 contoh dari desain ICE</a></li>
<li><a href="../id471366/index.html">Pengadilan UE menentang cookie secara default - seharusnya tidak ada kotak centang yang sudah diperiksa sebelumnya</a></li>
<li><a href="../id471372/index.html">Mengapa perusahaan harus mengelola ponsel cerdas karyawan?</a></li>
<li><a href="../id471374/index.html">Kami mengundang Anda ke NIXMultiConf # 3 di Kharkov</a></li>
<li><a href="../id471378/index.html">Di mana pemrograman dimulai?</a></li>
<li><a href="../id471380/index.html">Pentester di garis depan keamanan dunia maya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>