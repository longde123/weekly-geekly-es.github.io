<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍍 🤬 😻 Kami membuat satu proyek plugin dengan kompilasi untuk berbagai versi Revit / AutoCAD 🛀🏾 ☝🏽 📤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika mengembangkan plugin untuk aplikasi CAD ( dalam kasus saya, AutoCAD, Revit, dan Renga), satu masalah muncul seiring waktu - versi program baru ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami membuat satu proyek plugin dengan kompilasi untuk berbagai versi Revit / AutoCAD</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482308/"><img src="https://habrastorage.org/webt/u7/vh/xi/u7vhxitqphrjiza_fsmzmoclmha.png"><br><br><p>  Ketika mengembangkan plugin untuk aplikasi CAD ( <a href="https://modplus.org/ru/" rel="nofollow">dalam kasus saya,</a> AutoCAD, Revit, dan Renga), satu masalah muncul seiring waktu - versi program baru keluar, perubahan API dan versi plugin baru perlu dibuat. </p><br><p>  Ketika Anda hanya memiliki satu plugin atau Anda masih pemula secara otodidak dalam hal ini, Anda dapat membuat salinan proyek, mengubah tempat-tempat yang diperlukan di dalamnya dan membangun versi baru plugin.  Oleh karena itu, perubahan kode selanjutnya akan memerlukan peningkatan beberapa kali dalam biaya tenaga kerja. </p><br><p>  Ketika Anda memperoleh pengalaman dan pengetahuan, Anda akan menemukan beberapa cara untuk mengotomatisasi proses ini.  Saya pergi dengan cara ini dan saya ingin memberi tahu Anda apa yang saya datangi pada akhirnya dan betapa nyamannya itu. </p><a name="habracut"></a><br><p>  Untuk memulai, pertimbangkan metode yang sudah jelas dan sudah lama saya gunakan </p><br><h3>  Tautan ke file proyek </h3><br><p>  Dan untuk membuat semuanya sederhana, jelas dan mudah dimengerti, saya akan menjelaskan semuanya menggunakan contoh abstrak dari pengembangan plug-in. </p><br><p>  Buka Visual Studio (saya memiliki versi Komunitas 2019. Dan ya - dalam bahasa Rusia) dan buat solusi baru.  Sebut saja <b>MySuperPluginForRevit</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_1.png" alt="image1"><br><br><p>  Kami akan membuat plugin untuk Revit untuk versi 2015-2020.  Oleh karena itu, kami akan membuat proyek baru dalam solusi (Net Framework Class Library) dan menyebutnya <b>MySuperPluginForRevit_2015</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_2.png" alt="image2"><br><br><p>  Kami perlu menambahkan tautan ke Revit API.  Tentu saja, kami dapat menambahkan tautan ke file lokal (Anda perlu menginstal semua SDK yang diperlukan atau semua versi Revit), tetapi kami akan langsung ke jalur yang benar dan menghubungkan paket NuGet.  Anda tidak dapat menemukan sejumlah kecil paket, tetapi saya akan menggunakan paket saya sendiri. </p><br><p>  Setelah menghubungkan paket, klik kanan pada item " <em>Tautan</em> " dan pilih " <em>Transfer paket.konfig ke PackageReference ...</em> " di menu </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_3.png" alt="image3"><br><br><p>  Jika Anda tiba-tiba panik pada saat ini, karena jendela properti paket tidak memiliki item penting " <em>Salin secara lokal</em> ", yang pasti perlu Anda setel ke <em>false</em> , maka jangan panik - buka folder proyek dan buka file dengan ekstensi. csproj di editor yang nyaman (saya menggunakan Notepad ++) dan kami menemukan ada catatan tentang paket kami.  Ini terlihat seperti ini sekarang: </p><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tambahkan properti <em>&lt;ExcludeAssets&gt; runtime &lt;/ExcludeAssets&gt; padanya</em> .  Ternyata seperti ini: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Sekarang, ketika membangun proyek, file dari paket tidak akan disalin ke folder output. <br>  Kami melangkah lebih jauh - langsung membayangkan bahwa plugin kami akan menggunakan sesuatu dari API Revit, yang telah berubah dengan rilis versi baru.  Baik, atau adil, kita perlu mengubah sesuatu dalam kode, tergantung pada versi Revit yang kita buat plugin.  Untuk mengatasi perbedaan kode tersebut, kami akan menggunakan simbol kompilasi bersyarat.  Buka properti proyek, buka tab " <em>Majelis</em> " dan di bidang " <em>Simbol Kompilasi Bersyarat</em> " tulis <strong>R2015</strong> . </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_4.png" alt="image4"><br><br><p>  Perhatikan bahwa simbol harus ditambahkan untuk konfigurasi Debug dan konfigurasi Release. </p><br><p>  Nah, ketika kita berada di jendela properti, kita segera pergi ke tab " <em>Aplikasi</em> " dan di bidang " <em>Default namespace</em> " hapus akhiran <strong>_2015</strong> sehingga namespace kita bersifat universal dan independen dari nama assembly: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_5.png" alt="image5"><br><br><p>  Dalam kasus saya, dalam produk akhir, plugin semua versi dimasukkan ke dalam satu folder, jadi nama assembly saya tetap dengan akhiran form <strong>_20xx</strong> .  Tetapi Anda juga dapat menghapus akhiran dari nama rakitan jika lokasi file dalam folder yang berbeda diasumsikan. </p><br><p>  Kami meneruskan ke kode file <em>Class1.cs</em> dan mensimulasikan beberapa kode di sana, dengan mempertimbangkan berbagai versi Revit: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MySuperPluginForRevit</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.Attributes; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.DB; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.UI; [Regeneration(RegenerationOption.Manual)] [Transaction(TransactionMode.Manual)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Class1</span></span> : <span class="hljs-title"><span class="hljs-title">IExternalCommand</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExternalCommandData commandData, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message, ElementSet elements</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> R2015 TaskDialog.Show("ModPlus", "Hello Revit 2015"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2016 TaskDialog.Show("ModPlus", "Hello Revit 2016"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2017 TaskDialog.Show("ModPlus", "Hello Revit 2017"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2018 TaskDialog.Show("ModPlus", "Hello Revit 2018"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2019 TaskDialog.Show("ModPlus", "Hello Revit 2019"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2020 TaskDialog.Show("ModPlus", "Hello Revit 2020"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> return Result.Succeeded; } } }</span></span></code> </pre> <br><p>  Saya segera memperhitungkan semua versi Revit di atas versi 2015 (yang pada saat penulisan) dan segera memperhitungkan kehadiran simbol kompilasi bersyarat, yang saya buat menggunakan templat yang sama. </p><br><p>  Kami lolos ke sorotan utama.  Kami membuat proyek baru dalam solusi kami, hanya untuk versi plug-in untuk Revit 2016. Kami mengulangi semua langkah yang dijelaskan di atas, masing-masing, mengganti angka 2015 dengan angka 2016. Tetapi kami menghapus file <em>Class1.cs</em> dari proyek baru. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_6.png" alt="image6"><br><br><p>  File dengan kode yang diinginkan - <em>Class1.cs</em> - sudah kita miliki dan kita hanya perlu menyisipkan tautan ke sana dalam proyek baru.  Ada dua cara untuk menyisipkan tautan: </p><br><ol><li>  Klik lama pada proyek dengan tombol kanan mouse, pilih item " <em>Tambah</em> " -&gt; " <em>Elemen yang ada</em> ", di jendela yang terbuka, cari file yang diinginkan dan alih-alih opsi " <em>Tambah</em> " pilih opsi " <em>Tambah sebagai tautan</em> " </li></ol><br><img src="https://blog.modplus.org/images/Blog/Blog24_7.png" alt="image7"><br><br><ol><li>  <strong>Pendek</strong> - kanan di explorer solusi, pilih file yang diinginkan (atau bahkan file. Atau bahkan seluruh folder) dan seret dan jatuhkan ke proyek baru dengan tombol Alt ditekan.  Saat menarik, Anda akan melihat bahwa ketika Anda menekan tombol Alt, kursor pada mouse akan berubah dari tanda tambah menjadi panah. <br>  <strong>UPD:</strong> Saya membuat sedikit kebingungan di bagian ini - untuk mentransfer banyak file, tahan <strong>Shift + Alt</strong> ! </li></ol><br><p>  Setelah prosedur, kita akan melihat dalam proyek kedua file <em>Class1.cs</em> dengan ikon yang sesuai (panah biru): </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_8.png" alt="image8"><br><br><p>  Saat mengedit kode di jendela editor, Anda juga dapat memilih dalam konteks proyek mana yang akan menampilkan kode, yang memungkinkan Anda melihat kode yang sedang diedit dengan berbagai simbol kompilasi bersyarat: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_9.png" alt="image9"><br><br><p>  Di bawah skema ini, kami membuat semua proyek lain (2017-2020).  Peretasan kehidupan - jika Anda menyeret dan meletakkan file dalam solusi explorer bukan dari proyek dasar, tetapi dari proyek di mana mereka sudah dimasukkan sebagai tautan, maka Anda tidak dapat menahan tombol Alt! </p><br><p>  Opsi yang dijelaskan cukup baik sampai saat versi baru plugin ditambahkan atau sampai file baru ditambahkan ke proyek - semua ini menjadi sangat suram.  Dan baru-baru ini, tiba-tiba saya tiba-tiba menyadari bagaimana menyelesaikan semua ini dengan satu proyek dan kami beralih ke metode kedua </p><br><h3 id="magiya-konfiguraciy">  Sihir konfigurasi </h3><br><p>  Setelah membaca di sini, Anda dapat berseru, "Apa yang Anda jelaskan tentang metode pertama, jika artikelnya adalah tentang yang kedua?!"  Dan saya menggambarkan semuanya untuk memperjelas mengapa kita membutuhkan simbol kompilasi bersyarat dan di tempat mana proyek kami berbeda.  Dan sekarang menjadi lebih jelas bagi kami perbedaan proyek spesifik apa yang perlu kami terapkan, hanya menyisakan satu proyek. </p><br><p>  Dan agar semuanya lebih jelas, kami tidak akan membuat proyek baru, tetapi akan membuat perubahan pada proyek kami saat ini, dibuat dengan cara pertama. </p><br><p>  Jadi, pertama-tama, kami menghapus semua proyek dari solusi, kecuali yang utama (berisi file secara langsung).  Yaitu  proyek untuk versi 2016-2020.  Buka folder solusi dan hapus folder proyek-proyek ini di sana. </p><br><p>  Kami memiliki satu solusi tersisa dalam solusi - <strong>MySuperPluginForRevit_2015</strong> .  Kami membuka propertinya dan: </p><br><ol><li>  Pada tab <em>Aplikasi</em> , hapus sufiks <strong>_2015</strong> dari <strong>nama</strong> rakitan (itu akan menjadi jelas mengapa) </li><li>  Pada tab " <em>Majelis</em> ", hapus <strong>simbol</strong> kompilasi bersyarat <strong>R2015</strong> dari bidang yang sesuai </li></ol><br><blockquote>  Catatan: di Visual Studio versi terbaru terdapat kesalahan - simbol kompilasi bersyarat tidak ditampilkan di jendela properti proyek, meskipun ada.  Jika Anda memiliki kesalahan ini, maka Anda harus menghapusnya secara manual dari file .csproj.  Namun, kami masih bekerja di dalamnya, jadi baca terus. </blockquote><p>  Ganti nama proyek di jendela solusi <strong>explorer</strong> dengan menghapus akhiran <strong>_2015</strong> dan kemudian menghapus proyek dari solusi.  Ini diperlukan untuk menjaga ketertiban dan perasaan perfeksionis!  Kami membuka folder solusi kami, mengganti nama folder proyek di sana dengan cara yang sama dan memuat proyek kembali ke solusi. </p><br><p>  Buka manajer konfigurasi.  Kami, pada prinsipnya, tidak akan memerlukan konfigurasi <strong>Rilis</strong> , jadi kami menghapusnya.  Kami membuat konfigurasi baru dengan nama <strong>R2015</strong> , <strong>R2016</strong> , ..., <strong>R2020 yang</strong> sudah tidak asing lagi bagi kami.  Harap dicatat bahwa Anda tidak perlu menyalin parameter dari konfigurasi lain dan Anda tidak perlu membuat konfigurasi proyek: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_10.png" alt="image10"><br><p>  Kami pergi ke folder proyek dan membuka file dengan ekstensi .csproj di editor yang nyaman.  Omong-omong, itu juga dapat dibuka di Visual Studio - Anda perlu membongkar proyek dan kemudian item yang tepat akan berada di menu konteks: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_11.png" alt="image11"><br><br><p>  Mengedit dalam Visual Studio bahkan lebih disukai, karena editor menyelaraskan dan meminta. </p><br><p>  Dalam file kita akan melihat elemen <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/propertygroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">PropertyGroup</a> - di bagian paling atas adalah yang umum, dan kemudian dengan kondisi.  Elemen-elemen ini mengatur sifat-sifat proyek selama perakitannya.  Elemen pertama, yang tanpa kondisi, masing-masing menetapkan properti umum, dan elemen dengan kondisi, mengubah beberapa properti tergantung pada konfigurasi. </p><br><p>  Kita pergi ke elemen umum (pertama) dari <em>PropertyGroup</em> dan melihat properti <strong>AssemblyName</strong> - ini adalah nama majelis dan kita harus memilikinya tanpa akhiran <strong>_2015</strong> .  Jika ada sufiks, maka hapus saja. </p><br><p>  Kami menemukan elemen dengan kondisi tersebut </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Kami tidak membutuhkannya - kami menghapusnya. </p><br><p>  Ketentuan klausa </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ini akan diperlukan untuk bekerja pada tahap pengembangan dan debugging kode.  Anda dapat mengubah propertinya sesuai kebutuhan Anda - mengatur jalur output yang berbeda, mengubah simbol kompilasi bersyarat, dll. </p><br><p>  Sekarang buat elemen <em>PropertyGroup</em> baru untuk konfigurasi kami.  Dalam elemen-elemen ini, kita hanya perlu menetapkan empat properti: </p><br><ul><li>  <strong>OutputPath</strong> adalah folder keluaran.  Saya mengatur nilai <strong>bin</strong> standar <strong>\ R20xx</strong> </li><li>  <strong>DefineConstants</strong> - simbol kompilasi bersyarat.  <strong>Setel TRACE; R20xx</strong> </li><li>  <strong>TargetFrameworkVersion</strong> - versi platform.  Untuk versi Revit API yang berbeda, platform yang berbeda harus ditentukan. </li><li>  <strong>AssemblyName</strong> - nama majelis (mis. Nama file).  Anda dapat menulis secara langsung nama majelis yang diinginkan, tetapi untuk universalitas, saya sarankan menulis nilai <strong>$ (Nama Majelis) _20xx</strong> .  Untuk melakukan ini, kami sebelumnya menghapus suffix dari nama assembly </li></ul><br><p>  Fitur paling penting dari semua elemen ini adalah bahwa mereka dapat disalin secara sepele ke proyek lain tanpa mengubahnya sama sekali.  Nanti di artikel saya akan melampirkan seluruh isi file .csproj. </p><br><p>  Kami sudah menemukan properti proyek - tidak sulit.  Tetapi apa yang harus dilakukan dengan pustaka plug-in (paket NuGet).  Jika kita melihat lebih jauh, kita akan melihat bahwa pustaka plug-in didefinisikan oleh elemen <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/itemgroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">ItemGroup</a> .  Tapi ini nasib buruk - elemen ini salah memproses kondisi, seperti elemen <em>PropertyGroup</em> .  Mungkin ini bahkan kesalahan Visual Studio, tetapi jika Anda mengatur beberapa elemen <em>ItemGroup</em> dengan kondisi konfigurasi, dan menyisipkan tautan berbeda ke paket NuGet di dalamnya, maka ketika Anda mengubah konfigurasi, semua paket yang ditentukan terhubung ke proyek. </p><br><p>  Elemen <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/choose-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">Choose</a> datang ke bantuan kami, yang bekerja sesuai dengan logika <strong>if-then-else yang biasa</strong> . </p><br><p>  Menggunakan elemen <em>Choose</em> , kami mendefinisikan paket NuGet yang berbeda untuk konfigurasi yang berbeda: </p><br><div class="spoiler">  <b class="spoiler_title">Semua isi csproj</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ToolsVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/developer/msbuild/2003"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>Debug<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Platform)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>AnyCPU<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span>{5AD738D6-4122-4E76-B865-BE7CE0F6B3EB}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span>Library<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span>Properties<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span>512<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span>full<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\Debug\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>DEBUG;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span>prompt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span>4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2015|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2015\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2016|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2016\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2017|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2017\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2018|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2018\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2019|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2019\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2020|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2020\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml.Linq"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data.DataSetExtensions"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.CSharp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Net.Http"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Class1.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Properties\AssemblyInfo.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2015' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2016' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2016"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2017' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2018' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2018"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2019' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2019"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2020' or '$(Configuration)'=='Debug'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2020"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildToolsPath)\Microsoft.CSharp.targets"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Harap dicatat bahwa dalam salah satu kondisi saya tentukan dua konfigurasi melalui <strong>OR (Atau)</strong> .  Dengan demikian, paket yang diperlukan akan terhubung selama konfigurasi <strong>Debug</strong> . </p><br><p>  Dan di sini kita memiliki hampir semuanya sempurna.  Kami memuat proyek kembali, mengaktifkan konfigurasi yang kami butuhkan, memanggil item " <em>Kembalikan semua paket NuGet</em> " di menu konteks solusi (bukan proyek) dan melihat bagaimana paket berubah. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_12.png" alt="image12"><br><br><p>  Dan pada tahap ini saya terhenti - untuk mengumpulkan semua konfigurasi sekaligus, kita bisa menggunakan batch assembly (menu " <em>Assembly</em> " -&gt; " <em>Batch assembly</em> "), tetapi ketika beralih konfigurasi, paket tidak secara otomatis dikembalikan.  Dan ketika merakit proyek, itu juga tidak terjadi, meskipun, secara teori, itu harus terjadi.  Saya tidak menemukan solusi untuk masalah ini dengan cara standar.  Dan kemungkinan besar ini juga bug dari Visual Studio. </p><br><p>  Oleh karena itu, untuk perakitan batch, diputuskan untuk menggunakan sistem perakitan otomatis <a href="https://nuke.build/" rel="nofollow">Nuke</a> khusus.  Sebenarnya, saya tidak menginginkan ini, karena saya menganggapnya tidak perlu dalam kerangka pengembangan plug-in, tetapi saat ini saya tidak melihat solusi lain.  Dan pertanyaan "Mengapa tepatnya Nuke?" Jawabannya sederhana - kami menggunakannya di tempat kerja. </p><br><p>  Jadi, buka folder solusi kami (bukan proyek), tahan tombol <strong>Shift</strong> dan klik kanan pada tempat kosong di folder - di menu konteks, pilih item " <em>Buka jendela PowerShell di sini</em> ". </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_13.png" alt="image13"><br><br><p>  Jika Anda belum menginstal <em>nuke</em> , tulis terlebih dahulu perintahnya </p><br><pre> <code class="powershell hljs">dotnet tool install Nuke.GlobalTool –global</code> </pre> <br><p>  Sekarang tulis perintah <strong>nuklir</strong> dan Anda akan diminta untuk mengkonfigurasi <em>nuklir</em> untuk proyek saat ini.  Saya tidak tahu cara menulisnya dengan lebih baik dalam bahasa Rusia - File .nuke tidak dapat ditulis dalam bahasa Inggris.  Apakah Anda ingin menyiapkan bangunan?  [y / n] </p><br><p>  Tekan tombol Y dan kemudian akan ada pengaturan langsung.  Kami membutuhkan opsi paling sederhana menggunakan <strong>MSBuild</strong> , jadi kami menjawab seperti pada tangkapan layar: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_14.png" alt="image14"><br><br><p>  Mari kita beralih ke Visual Studio, yang akan menawarkan kita untuk memuat ulang solusi, karena proyek baru telah ditambahkan ke dalamnya.  Kami me-reboot solusinya dan melihat bahwa kami memiliki proyek <strong>pembangunan</strong> di mana kami hanya tertarik pada satu file - <em>Build.cs</em> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_15.png" alt="image15"><br><br><p>  Buka file ini dan tulis skrip untuk membangun proyek untuk semua konfigurasi.  Baik, atau gunakan skrip saya, yang dapat Anda edit sendiri: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Execution; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.ProjectModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Tools.MSBuild; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Nuke.Common.Tools.MSBuild.MSBuildTasks; [CheckBuildProjectConfigurations] [UnsetVisualStudioEnvironmentVariables] <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Build</span></span> : <span class="hljs-title"><span class="hljs-title">NukeBuild</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Execute&lt;Build&gt;(x =&gt; x.Compile); [Solution] <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Solution Solution; <span class="hljs-comment"><span class="hljs-comment">// If the solution name and the project (plugin) name are different, then indicate the project (plugin) name here string PluginName =&gt; Solution.Name; Target Compile =&gt; _ =&gt; _ .Executes(() =&gt; { var project = Solution.GetProject(PluginName); if (project == null) throw new FileNotFoundException("Not found!"); var build = new List&lt;string&gt;(); foreach (var (_, c) in project.Configurations) { var configuration = c.Split("|")[0]; if (configuration == "Debug" || build.Contains(configuration)) continue; Logger.Normal($"Configuration: {configuration}"); build.Add(configuration); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Restore")); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Rebuild")); } }); }</span></span></code> </pre> <br><p>  Kami kembali ke jendela PowerShell dan menulis perintah <strong>nuklir</strong> lagi (Anda dapat menulis perintah <strong>nuklir</strong> dengan <em>Target yang</em> diinginkan. Tapi kami memiliki satu <em>Target</em> , yang dimulai secara default).  Setelah menekan tombol Enter, kita akan merasa seperti peretas sejati, karena seperti dalam sebuah film, proyek kita akan secara otomatis dirakit untuk konfigurasi yang berbeda. </p><br><p>  Omong-omong, Anda dapat menggunakan PowerShell langsung dari Visual Studio (menu " <em>Lihat</em> " -&gt; " <em>Jendela lain</em> " -&gt; " <em>Package Manager Console</em> "), tetapi semuanya akan menjadi hitam dan putih, yang sangat tidak nyaman. </p><br><p>  Tentang ini, artikel saya sudah selesai.  Saya yakin Anda dapat mengetahui sendiri opsi untuk AutoCAD.  Saya berharap bahwa materi yang disajikan di sini akan menemukan "pelanggan" -nya. </p><br><p>  Terima kasih atas perhatian anda! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id482308/">https://habr.com/ru/post/id482308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id482296/index.html">Tutorial dari tutorial Ember.js. Aplikasi Super Rentals. Bagian 1.1</a></li>
<li><a href="../id482300/index.html">Menjelajahi Java 14 Records</a></li>
<li><a href="../id482302/index.html">Kabut psikologis tentang Tahun Baru</a></li>
<li><a href="../id482304/index.html">Made for China: cara membuat spanduk yang sempurna untuk konsumen Cina</a></li>
<li><a href="../id482306/index.html">Sejarah porno internet. Bagian 1</a></li>
<li><a href="../id482314/index.html">Membangun cluster PostgreSQL ketersediaan tinggi menggunakan Patroni, etcd, HAProxy</a></li>
<li><a href="../id482316/index.html">Kami memperumit model Sci-fi secara prosedural: apa itu Greeble dan bagaimana menggunakannya</a></li>
<li><a href="../id482318/index.html">Mengapa Rust Harus Menjadi Bahasa Pemrograman Fungsional</a></li>
<li><a href="../id482328/index.html">V&V bukan untuk balas dendam</a></li>
<li><a href="../id482330/index.html">Daftar permata dasar untuk profil aplikasi Ruby on Rails</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>