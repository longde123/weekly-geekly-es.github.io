<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèª üë©üèº‚Äçüîß üë©üèΩ‚Äçüíª Mikrointeraktionen in iOS. Yandex Vortrag üå∞ ü§≤üèª üöì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor einigen Wochen fand im Yandex-B√ºro eine Sonderveranstaltung der CocoaHeads-Community statt - gr√∂√üer als herk√∂mmliche Mitaps. Entwickler Anton Serg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mikrointeraktionen in iOS. Yandex Vortrag</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/429580/">  Vor einigen Wochen fand im Yandex-B√ºro eine Sonderveranstaltung der CocoaHeads-Community statt - gr√∂√üer als herk√∂mmliche Mitaps.  Entwickler Anton Sergeev sprach bei diesem Treffen √ºber das Mikrointeraktionsmodell, das UX-Designer normalerweise verwenden, sowie dar√ºber, wie die darin enthaltenen Ideen in die Praxis umgesetzt werden k√∂nnen.  Anton achtete am meisten auf Animation. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JoVBQCwX8ys" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Es ist mir sehr wichtig, dass es mir eine Ehre war, die G√§ste zu treffen.  Ich sehe hier diejenigen, mit denen ich schon sehr lange zusammen bin, mit denen ich k√ºrzlich zusammen war und mit denen ich mich noch nicht getroffen habe.  Willkommen bei CocoaHeads. <a name="habracut"></a><br><br>  Ich erz√§hle Ihnen von Mikrointeraktionen.  Dies ist ein kleiner Clickbait - wir sind Ingenieure, Entwickler, wir werden mehr √ºber den Softwareteil sprechen, aber beginnen wir mit einem sehr humanit√§ren Thema wie Mikrointeraktionen.  Infolgedessen werden wir dieses humanit√§re Thema im technischen Teil anwenden, um zu lernen, wie sehr kleine visuelle Komponenten wie Kn√∂pfe, kleine Lader und Balken effizienter und einfacher gestaltet werden k√∂nnen.  Sie sind mit Animationen ges√§ttigt, und verzweigter Animationscode kann oft sehr kompliziert aussehen. Die Wartung ist √§u√üerst schwierig. <br><br>  Aber zuerst ein wenig Ablenkung.  Denken Sie dar√ºber nach, erinnern Sie sich, als Sie beschlossen, Entwickler zu werden?  Ich erinnere mich deutlich daran.  Alles begann mit einem Tisch.  Einmal habe ich beschlossen, ObjC zu lernen.  Modische Sprache, Spa√ü, einfach so, ohne weitreichende Pl√§ne.  Ich fand anscheinend ein Buch, Big Nerd Ranch, und fing an, Kapitel f√ºr Kapitel zu lesen, jede √úbung zu machen, zu √ºberpr√ºfen, zu lesen, bis ich den Tisch erreichte.  Dann habe ich mich zuerst mit dem Delegatenmuster vertraut gemacht, genauer mit seiner Unterart ‚ÄûDatenquelle‚Äú, Datenquelle.  Dieses Paradigma erscheint mir jetzt sehr einfach: Es gibt eine Datenquelle, Delegierter, alles ist einfach.  Aber dann hat es mich umgehauen: Wie kann ich eine Tabelle von v√∂llig anderen Daten trennen?  Sie haben einmal eine Tabelle auf einem Blatt Papier gesehen, in die Sie unendlich viele Zeilen und vollst√§ndig abstrakte Daten einf√ºgen k√∂nnen.  Es hat mich sehr beeinflusst.  Ich erkannte, dass Programmierung und Entwicklung enorme M√∂glichkeiten bieten und es sehr interessant sein wird, sie anzuwenden.  Seitdem habe ich mich entschieden, Entwickler zu werden. <br><br>  W√§hrend der Entwicklung wurden verschiedene Muster angetroffen.  Riesige, sogenannte Architekturen, die die gesamte Anwendung beschreiben.  Kleine, die in Dutzende auf Knopfdruck passen.  Es ist wichtig zu verstehen, dass all diese Muster nicht aus der Luft stammen, sondern aus dem humanit√§ren Bereich.  Das gleiche Delegatenmuster.  Die Delegation erschien lange vor der Programmierung, und die Programmierung √ºbernimmt all diese humanit√§ren Dinge f√ºr eine effizientere Arbeit. <br><br>  Heute werde ich √ºber einen anderen Ansatz sprechen, der eine andere humanit√§re Sache √ºbernimmt.  Insbesondere √ºber Mikrointeraktionen. <br><br>  Alles begann mit einem Lader.  Bei der vorherigen Arbeit vor Yandex hatte ich die Aufgabe, den Google Material Design Loader zu wiederholen.  Es gibt zwei davon, eine unbestimmte, eine andere definierte.  Ich hatte die Aufgabe, sie zu einer zu kombinieren, er musste sowohl sicher als auch unbestimmt sein k√∂nnen, aber es gab strenge Anforderungen - damit es extrem reibungslos lief.  Wir k√∂nnen jederzeit von einem Zustand in einen anderen wechseln, und alles sollte reibungslos und genau animiert sein. <br><br>  Ich bin ein kluger Entwickler, ich habe alles getan.  Ich habe mehr als 1000 Zeilen unverst√§ndlichen Nudelcodes erhalten.  Es hat funktioniert, aber ich erhielt einen coolen Kommentar zur Code√ºberpr√ºfung: "Ich hoffe wirklich, dass niemand diesen Code jemals bearbeiten wird."  Und f√ºr mich ist es praktisch ungeeignet.  Ich habe schrecklichen Code geschrieben.  Es hat cool funktioniert, es war eine meiner besten Animationen, aber der Code war schrecklich. <br><br>  Heute werde ich versuchen, den Ansatz zu beschreiben, den ich gefunden habe, nachdem ich diesen Job verlassen habe. <br><br><img src="https://habrastorage.org/webt/w6/93/ez/w693ezlmyrpdyxgcxluxx0scxdo.jpeg"><br><br>  Beginnen wir mit dem humanit√§rsten Thema - Mikrointeraktionsmodellen.  Wie sind sie eingebettet und wo sind sie im Allgemeinen in unseren Anwendungen versteckt?  Lassen Sie uns dieses Modell in unserer technischen Welt weiter verwenden.  √úberlegen Sie, wie UIView, das sich mit Anzeige und Animation befasst, wie dies funktioniert.  Insbesondere werden wir viel √ºber den CAAction-Mechanismus sprechen, der eng in UIView, CALayer, integriert ist und mit diesem zusammenarbeitet.  Und dann betrachten Sie kleine Beispiele. <br><br>  Definition zuerst.  Anscheinend hat der Autor das Pr√§fix "Mikro" wirklich gemocht, aber es gibt keine Makro- oder Nano-Wechselwirkungen, die Gr√∂√üe spielt keine Rolle.  Der Einfachheit halber werden wir sie einfach Interaktionen nennen.  Dies ist ein so praktisches Modell, mit dem Sie jede Interaktion mit der Anwendung von Anfang bis Ende beschreiben k√∂nnen.  Es besteht aus vier Punkten: einem Ausl√∂ser, einer Gesch√§ftslogik, die in dieser Interaktion implementiert werden muss, einem Feedback, um dem Benutzer etwas zu vermitteln, und einer √Ñnderung des Anwendungsstatus. <br><br>  Ich werde eine Geschichte mit drei verschiedenen Rollen erz√§hlen.  Ich werde mit dem Benutzer beginnen, als das Wichtigste in der Entwicklung.  Als ich mich auf den Bericht vorbereitete, wurde ich krank.  Ich musste eine Apotheke finden und √∂ffnete Yandex.Map.  Ich habe die Anwendung ge√∂ffnet, sieh sie dir an, sie sieht mich an, aber es passiert nichts.  Dann wurde mir klar, dass ich der Benutzer bin, ich bin der Hauptbenutzer. Ich gebe Anweisungen, was f√ºr die Anwendung zu tun ist.  Ich orientierte mich, klickte auf die Schaltfl√§che "Suchen", gab "Apotheke" ein, klickte auf "OK", die Anwendung erledigte die interne Arbeit, fand die erforderlichen Apotheken neben mir und zeigte sie auf dem Bildschirm an. <br><br>  Ich suchte nach der richtigen und stellte fest, dass zus√§tzlich zu den Apotheken eine spezielle Schaltfl√§che auf dem Bildschirm angezeigt wurde - um eine Route zu erstellen.  Somit ist die Anwendung in einen neuen Zustand versetzt worden.  Ich klickte darauf und ging in die Apotheke.  Ich bin aus irgendeinem Grund in diese Anwendung gegangen - um eine Apotheke zu finden.  Ich habe sie erreicht.  Ich bin ein gl√ºcklicher Benutzer. <br><br>  Bevor diese Anwendung erschien und ich nach etwas darin suchen konnte, wurde sie zuerst entwickelt.  Was dachte der UX-Designer, als er diesen Prozess entwickelte?  Alles begann mit der Tatsache, dass es notwendig war, aus einer Stummschaltungsszene herauszukommen, wenn sich Benutzer und Anwendung gegenseitig ansehen und nichts passiert.  Daf√ºr wurde eine Art Ausl√∂ser ben√∂tigt.  Alles hat einen Anfang, und auch hier musste man irgendwo anfangen. <br><br>  Der Ausl√∂ser wurde ausgew√§hlt - Suchtaste.  Beim Klicken war es notwendig, das Problem aus technischer Sicht zu l√∂sen.  Daten auf dem Server anfordern, Antwort analysieren, Modell irgendwie aktualisieren, analysieren.  Fordern Sie die aktuelle Position der Benutzer und mehr an.  Wir haben diese Daten erhalten und wissen genau, wo sich alle Apotheken befinden. <br><br>  Es scheint m√∂glich zu sein, dies zu beenden.  Immerhin haben wir das Problem gel√∂st, alle Apotheken gefunden.  Es gibt nur ein Problem: Der Benutzer wei√ü immer noch nichts √ºber diese Apotheken.  Er muss es vermitteln. <br><br>  Irgendwie packen wir unsere L√∂sung f√ºr dieses Problem und bringen sie ihm in einem sch√∂nen Paket, damit er es versteht.  Es ist so passiert, dass Benutzer Menschen sind, sie interagieren mit der Au√üenwelt √ºber die Sinne.  Der aktuelle Stand der Technik ist so, dass wir als Entwickler mobiler Anwendungen nur drei Sinne haben: Sehen - wir k√∂nnen etwas auf dem Bildschirm zeigen, H√∂ren - wir k√∂nnen es in den Lautsprechern reproduzieren und ein taktiles Gef√ºhl k√∂nnen wir den Benutzer in die Hand dr√ºcken. <br><br>  Aber der Mensch ist viel funktionaler.  Der aktuelle Stand der Technik ist jedoch so, dass wir uns derzeit nur auf diese drei verlassen k√∂nnen.  In diesem Fall w√§hlen wir einen Bildschirm aus, zeigen auf der Karte die n√§chstgelegenen Apotheken und eine Liste mit detaillierteren Informationen zu diesen Apotheken.  Und es scheint, dass dies genau alles ist, der Benutzer Apotheken gefunden hat und alles in Ordnung ist. <br><br>  Aber es gibt ein Problem.  Als der Benutzer die Anwendung eingab, befand er sich in einem Kontext, in dem er nicht wusste, wo sich die Apotheken befanden.  Und seine Aufgabe war es, sie zu finden.  Aber jetzt hat sich der Kontext ge√§ndert, er wei√ü, wo die Apotheken sind, er muss nicht mehr nach ihnen suchen.  Er hatte die folgende Aufgabe - Wegbeschreibungen zur n√§chsten Apotheke zu bekommen.  Aus diesem Grund m√ºssen zus√§tzliche Steuerelemente auf dem Bildschirm angezeigt werden. Dies ist insbesondere eine Schaltfl√§che zum Erstellen einer Route, dh zum √úbertragen der Anwendung in einen anderen Status, in dem sie bereit ist, neue Trigger f√ºr die n√§chsten Interaktionen wieder zu akzeptieren. <br><br>  Stellen Sie sich vor, der UX-Designer hat sich all das ausgedacht, kommt zum Entwickler und beginnt in Farben zu beschreiben, wie der Benutzer auf die Schaltfl√§che klickt, wie und was passiert, wie gesucht wird, wie der Benutzer zufrieden ist, wie wir die DAU erh√∂hen und so weiter.  Der Stapel ungel√∂ster Fragen des Entwicklers lief im ersten Satz an einer anderen Stelle √ºber, als wir den Button zum ersten Mal erw√§hnten. <br><br>  Er h√∂rt geduldig auf alles und am Ende, wenn es endet, sagt er, dass das cool ist, aber lassen Sie uns den Knopf besprechen.  Dies ist ein wichtiges Element. <br><br>  W√§hrend der Diskussion stellt sich heraus, dass die Schaltfl√§che von Natur aus ein Ausl√∂ser ist, sie enth√§lt Logik in sich, nach der sie Nachrichten vom System empfangen kann, insbesondere √ºber Benutzerklicks auf den Bildschirm.  Basierend auf diesem Klick kann eine Ereigniskette gestartet werden, die mit der Tatsache beginnt, dass dieselbe Schaltfl√§che Nachrichten an verschiedene Objekte sendet, in denen die Notwendigkeit zum Starten verschiedener Prozesse angegeben wird. In diesem Fall werden Informationen auf dem Server angefordert. <br><br>  Wenn die Taste gedr√ºckt wird, √§ndert sie ihren Status und wird gedr√ºckt.  Wenn der Benutzer losl√§sst, wird er nicht mehr gedr√ºckt.  Das hei√üt, es gibt dem Benutzer Feedback, damit er versteht, was von dieser Schaltfl√§che zu erwarten ist.  Und die Taste kann in verschiedenen Zust√§nden gedr√ºckt, nicht gedr√ºckt, aktiv oder inaktiv sein und sich nach unterschiedlicher Logik von einem Zustand in einen anderen bewegen. <br><br>  So haben wir gesehen, dass dasselbe Mikrointeraktionsmodell, das aus einem Ausl√∂ser, einer Gesch√§ftslogik, R√ºckmeldungen und Status√§nderungen besteht, unsere Anwendung auf verschiedenen Skalen beschreiben kann, wie auf der Skala eines gesamten Benutzerfalls, einer riesigen Suche nach der n√§chsten Apotheke. also in Bezug auf einen kleinen Knopf. <br><br>  Und dies ist ein sehr praktisches Modell, mit dem Sie die Interaktion innerhalb des Teams vereinfachen und programmgesteuert vier Entit√§ten trennen k√∂nnen: Trigger, Gesch√§ftslogik, Feedback und Status√§nderung.  Mal sehen, was uns UIKit bietet, um es zu nutzen.  Und bietet nicht nur, sondern nutzt.  Bei der Implementierung verschiedener Animationen, der kleinen Komponenten der UIView-Unterklassen, wird nur dieser Mechanismus verwendet und nicht anders. <br><br>  Beginnen wir mit UIView, wie es in dieses Modell passt.  Dann werden wir CALayer betrachten, das es uns bietet, um diese Staaten zu unterst√ºtzen, und wir werden den Wirkungsmechanismus als den interessantesten Moment betrachten. <br><br>  Beginnen wir mit dem UIView.  Wir verwenden es, um einige Rechtecke auf dem Bildschirm anzuzeigen.  Tats√§chlich wei√ü UIView jedoch nicht, wie es sich selbst zeichnen soll, sondern verwendet daf√ºr ein anderes CALayer-Objekt.  Tats√§chlich ist UIView verpflichtet, Nachrichten √ºber das Ber√ºhren des Systems sowie √ºber andere Aufrufe der API zu empfangen, die wir in unseren Unterklassen von UIView definiert haben.  Somit implementiert UIView selbst die Triggerlogik, dh den Start einiger Prozesse, die diese Nachrichten vom System empfangen. <br><br>  UIView kann seine Delegierten auch √ºber aufgetretene Ereignisse benachrichtigen und Nachrichten an Abonnenten senden, um beispielsweise UIControl-Unterklassen zu unterschiedlichen Ereignissen zu machen.  Auf diese Weise wird die Gesch√§ftslogik dieses UIView implementiert.  Nicht alle von ihnen haben Gesch√§ftslogik, viele von ihnen sind nur Anzeigeelemente und haben kein Feedback im Sinne von Gesch√§ftslogik. <br><br><img src="https://habrastorage.org/webt/ur/9o/tu/ur9otu78v5xkyy3knr8ze443pl8.jpeg"><br><br>  Wir haben uns zwei Punkte angesehen, einen Ausl√∂ser und eine Gesch√§ftslogik.  Und wo sind Feedback und Status√§nderungen in UIView verborgen?  Um dies zu verstehen, m√ºssen wir uns daran erinnern, dass UIView nicht f√ºr sich existiert.  Beim Erstellen wird eine Hintergrundschicht erstellt, eine Unterklasse von CALayer. <br><br><img src="https://habrastorage.org/webt/_y/dw/wt/_ydwwtnnokhkvxeuj5kl02v4qaa.jpeg"><br><br>  Und ernennt sich zu seinem Delegierten.  Um zu verstehen, wie UIView CALayer verwendet, kann es in verschiedenen Zust√§nden existieren. <br><br>  Wie kann man einen Staat von einem anderen unterscheiden?  Sie unterscheiden sich in der Menge der Daten, die irgendwo gespeichert werden m√ºssen.  Wir werden pr√ºfen, welche Funktionen CALayer f√ºr UIView bereitstellt, damit der Status gespeichert wird. <br><br><img src="https://habrastorage.org/webt/ls/2x/7f/ls2x7f_qs_-ysgeirsunqki1o7o.jpeg"><br><br>  Unsere Oberfl√§che wird etwas erweitert, die Interaktion zwischen UIView und CALayer, UIView hat eine zus√§tzliche Aufgabe - das Repository in CALayer zu aktualisieren. <br><br>  Eine wenig bekannte Tatsache, die nur wenige Leute verwenden: CALayer kann sich wie ein assoziatives Array verhalten, was bedeutet, dass wir beliebige Daten auf jeden Schl√ºssel wie folgt schreiben k√∂nnen: setValue (_: forKey :). <br><br><img src="https://habrastorage.org/webt/hy/l_/r9/hyl_r9663azms_wx4qlf1f12ctw.jpeg"><br><br>  Diese Methode ist in allen NSObject-Unterklassen vorhanden, st√ºrzt jedoch im Gegensatz zu vielen anderen nicht ab, wenn ein Schl√ºssel empfangen wird, der nicht damit √ºberschrieben wird.  Und er schreibt es richtig auf, und dann k√∂nnen wir es lesen.  Dies ist eine sehr praktische Sache, die es erm√∂glicht, ohne Unterklassen von CALayer zu erstellen, Daten dort zu schreiben und sie dann zu lesen und zu konsultieren.  Aber dies ist ein sehr primitives einfaches Repository, in der Tat ein W√∂rterbuch.  CALayer ist viel progressiver.  Es unterst√ºtzt Stile. <br><br>  Dies wird durch die Style-Eigenschaft implementiert, √ºber die jeder CALayer verf√ºgt.  Standardm√§√üig ist es Null, aber wir k√∂nnen es neu definieren und verwenden. <br><br><img src="https://habrastorage.org/webt/ow/x1/ox/owx1ox1elo1_go_6jxikiuc6fws.jpeg"><br><br>  Im Allgemeinen ist dies ein regul√§res W√∂rterbuch und nichts weiter, aber es hat eine Besonderheit dar√ºber, wie CALayer damit arbeitet, wenn wir nach dem Wert f√ºr Key fragen, einer anderen Methode, die NSObject hat.  Es wirkt sehr interessant, es sucht rekursiv nach den notwendigen Werten im Stilw√∂rterbuch.  Wenn wir einen vorhandenen Stil mit dem Stilschl√ºssel in einen neuen Stil packen und dort einige Schl√ºssel schreiben, sieht dies jedoch folgenderma√üen aus. <br><br><img src="https://habrastorage.org/webt/xd/m3/z1/xdm3z1vyiscv35nd1jspq5aujve.jpeg"><br><br>  Schauen Sie sich zuerst die Wurzel an, dann das Landesinnere und so weiter, bis es Sinn macht.  Wenn Stil gleich Null wird, macht es keinen Sinn, weiter zu schauen. <br><br>  Auf diese Weise kann UIView mithilfe der von CALayer bereitgestellten Infrastruktur Status√§nderungen organisieren, das interne CALayer-Repository aktualisieren, entweder mithilfe von style, einem sehr leistungsstarken Repository, das einen Stapel simulieren kann, oder mithilfe eines regul√§ren assoziativen Arrays, das ebenfalls sehr effizient und sehr n√ºtzlich ist . <br><br>  Beginnen Sie mit der Speicherung und beginnen Sie mit CAAction.  Ich werde dir mehr √ºber ihn erz√§hlen. <br><br><img src="https://habrastorage.org/webt/r7/ay/kz/r7aykzzyhz25wrbcddkax9-oyzm.jpeg"><br><br>  Es gibt eine neue Aufgabe f√ºr UIView - Aktionen von CALayer anzufordern.  Was sind Aktionen? <br><br><img src="https://habrastorage.org/webt/rk/yi/le/rkyile_6v-vwfrq0d98sgeq4obs.jpeg"><br><br>  CAAction ist nur ein Protokoll, f√ºr das nur eine Methode ausgef√ºhrt wird.  Apple liebt im Allgemeinen Kinothemen, Action hier als "Kamera, Motor!".  Dieser ‚ÄûMotor‚Äú ist nur eine Aktion, und nicht nur dieser Name wurde verwendet.  Die Ausf√ºhrungsmethode bedeutet, dass eine Aktion gestartet wird, die gestartet, ausgef√ºhrt und beendet werden kann. Dies ist die wichtigste.  Diese Methode ist sehr allgemein gehalten, hat nur eine Ereigniszeichenfolge und alles andere kann von einem beliebigen Typ sein.  In ObjC ist dies alles ID und ein normales NSDictionary. <br><br><img src="https://habrastorage.org/webt/3u/q-/6z/3uq-6zsnqrcdp_ijgpmbvljcxui.jpeg"><br><br>  Es gibt Klassen in UIKit, die das CAAction-Protokoll erf√ºllen.  Das erste ist Animation.  Erstens wissen wir, dass Animation zu einer Ebene hinzugef√ºgt werden kann, aber dies ist eine sehr einfache Sache.  Eine √ºbergeordnete Abstraktion dar√ºber besteht darin, eine Aktion mit den erforderlichen Parametern mit einer Ebene auszuf√ºhren. <br><br>  Die zweite wichtige Ausnahme ist NSNull.  Wir wissen, dass er mit keiner Methode aufgerufen werden kann, aber er erf√ºllt das CAAction-Protokoll, und dies geschieht, um bequem in Schichten nach CAAction zu suchen. <br><br><img src="https://habrastorage.org/webt/nm/34/9d/nm349dj4-hpwpaf2jshz4bjr6ee.jpeg"><br><br>  Wie bereits erw√§hnt, ist UIView ein Delegat an CALayer, und eine der Delegatenmethoden ist action (f√ºr: forKey :).  Die Ebene hat eine Methode, Aktion f√ºr Schl√ºssel. <br><br><img src="https://habrastorage.org/webt/xh/1s/wz/xh1swzwsz49zo9iythd65yntg5a.jpeg"><br><br>  Wir k√∂nnen es jederzeit auf der Ebene aufrufen, und es wird jederzeit die richtige Aktion oder Null geben, da es auch geben kann.  Der Algorithmus ist eine sehr ungew√∂hnliche Suche.  Der Pseudocode ist hier geschrieben, schauen wir uns die Zeilen an.  Nach Erhalt einer solchen Nachricht konsultiert er zun√§chst den Delegierten.  Ein Delegat kann entweder null zur√ºckgeben, was bedeutet, dass die Suche an anderer Stelle fortgesetzt werden soll, oder er kann eine g√ºltige Aktion zur√ºckgeben, ein g√ºltiges Objekt, das das CAAction-Protokoll erf√ºllt.  Es gibt jedoch eine logische Regel: Wenn NSNull zur√ºckgegeben wird, das dieses Protokoll erf√ºllt, wird es sp√§ter in nil konvertiert.  Das hei√üt, wenn wir Null zur√ºckgeben, bedeutet dies tats√§chlich "Suche beenden".  Es gibt keine Aktion und es ist nicht notwendig. <br><br>  Aber es gibt folgendes.  Nachdem er sich mit dem Delegierten beraten hatte und der Delegierte gleich Null zur√ºckgekehrt war, suchte er weiter.  Zuerst im Aktionsw√∂rterbuch, √ºber das die Ebene verf√ºgt, und dann wird rekursiv im Stilw√∂rterbuch gesucht, wo es auch ein W√∂rterbuch mit dem Aktionsschl√ºssel geben kann, in das viele Aktionen geschrieben werden k√∂nnen, und es kann auch rekursiv nach ihnen suchen.  Wenn es dort nicht geklappt hat, fragt er die Klasse nach der Standardaktion f√ºr die Key-Methode, die von CALayer definiert wird und bis vor kurzem etwas zur√ºckgegeben hat. In den letzten Versionen von iOS wird jedoch in letzter Zeit immer Null zur√ºckgegeben. <br><br>  Verstand die Theorie.  Mal sehen, wie alles in der Praxis angewendet wird. <br><br>  Es gibt Ereignisse, sie haben Schl√ºssel, einige Aktionen finden f√ºr diese Ereignisse statt.  Grunds√§tzlich k√∂nnen zwei verschiedene Arten von Ereignissen unterschieden werden.  Das erste ist die Animation gespeicherter Eigenschaften.  Angenommen, wenn wir Viewcolor = red in View aufrufen, ist es theoretisch m√∂glich, zu animieren. <br><br><img src="https://habrastorage.org/webt/2i/6p/sc/2i6pscholbhv-jvln05rlepz1ru.jpeg"><br><br>  Welcher Bericht √ºber Muster ohne Schaltung?  Ich habe ein paar gezeichnet.  UIView verf√ºgt √ºber eine Art Schnittstelle, die wir f√ºr Unterklassen definiert haben oder die vom System mit Ereignissen empfangen wird.  Die Aufgabe von UIView besteht darin, die gew√ºnschte Aktion anzufordern, den internen Speicher zu aktualisieren und die aufgetretene Aktion zu starten.  Die Reihenfolge ist in Bezug auf die Anforderung sehr wichtig: Aktion, nur dann die Aktion aktualisieren und erst dann den Speicher und die Aktion aktualisieren. <br><br><img src="https://habrastorage.org/webt/b4/qu/mm/b4qumm17wvgwfhycn1ld3z7tuka.jpeg"><br><br>  Was passiert, wenn wir bei UIView backgroundColor aktualisieren?  Wir wissen, dass in UIView alles, was mit der Anzeige auf dem Bildschirm zu tun hat, immer noch ein Proxy f√ºr CALayer ist.  Er speichert alles, was er erh√§lt, f√ºr alle F√§lle zwischen, aber gleichzeitig sendet alles CALayer, und er befasst sich weiter mit der gesamten Logik von CALayer.     CALayer,      ?    . <br><br><img src="https://habrastorage.org/webt/wd/gd/-p/wdgd-peskdkf3x9pt9ta408lpa8.jpeg"><br><br>     .   ,     .         CALayer   ,    backgroundColor,     store,       run,     CALayer    .       ,   ,      ,     . <br><br>      UIView,    backgroundColor  UIView,       ,   ,     ,   . <br><br><img src="https://habrastorage.org/webt/nm/34/9d/nm349dj4-hpwpaf2jshz4bjr6ee.jpeg"><br><br>   ,   .   ,  UIView    CALayer,     .  Alles ist sehr einfach. <br><br>        ,    - .    ,     NSNull,  ,     .      ,  CALayer      . <br><br>       ,  UIView   ,  .         .       ? <br><br><img src="https://habrastorage.org/webt/hb/bp/j_/hbbpj_qzzphg6b_dvw-mhbmceak.jpeg"><br><br>    ,   .  UIView   ,  read only,      ,  inheritedAnimationDuration.    .      ,      .      . <br><br>    ?          duration,      .        ,   run, ,      . <br><br><img src="https://habrastorage.org/webt/a6/4u/n9/a64un9twddqprjgzjvzwnppwnpk.jpeg"><br><br>       ,   CAAction,  backgroundcolor  opacity,     UIView .  ,      ,  ,  ,  .          .    setValue forKey    ,        ,     ,   ,       ,      ,   . <br><br>     ,       ,    ,   ,   . <br><br>    ‚Äî      . ,    ¬´¬ª  ¬´¬ª   .    . <br><br>    . <br><br><img src="https://habrastorage.org/webt/l6/je/7m/l6je7mjo7fnwwxyvfql1y-yuy0q.jpeg"><br><br>     . ,        ,         ,    .               UIView   CALayer,       ,    , CAAction, ,  ,   . <br><br><img src="https://habrastorage.org/webt/q6/uo/jq/q6uojqtnrhojwxpuuwzxtuentju.jpeg"><br><br><img src="https://habrastorage.org/webt/jg/ax/_s/jgax_s_wow82hbtxeax_29d3brw.jpeg"><br><br> ,     ,    ,       .            ,       .    . <br><br>    .   - . <br><br>             CAAction,    ,   .   ,    ,    ,  . <br><br><img src="https://habrastorage.org/webt/pa/0b/b8/pa0bb8gtuowzwknknhve-btxbsw.jpeg"><br><br>   ,       , ,    home,    .     ,    . ,      . <br><br><img src="https://habrastorage.org/webt/hw/5r/l8/hw5rl8bhdrs4fvmi503inw7iauq.jpeg"><br><br>      .   - . <br><br><img src="https://habrastorage.org/webt/bp/np/di/bpnpdiveiwjnqlxotgrvlr5egj8.jpeg"><br><br>   ,  -    , -   .     ,    ,    .     ,   . <br><br>      ,    ,      . <br><br><img src="https://habrastorage.org/webt/hj/ub/55/hjub55ptyxd7nbmmr9jur-zn3sy.jpeg"><br><br>   ,   CAAction      ,   .     ,   UIControl,  - ,   - ,     ,      ,  -   . <br><br> ,  .  ,  UIView  -,     ,   -   ,       ,   ,      . <br><br>    ‚Äî     .       . <br><br>   ?    .  ,          .      ‚Äî   .      activating,      inactive  active.        ,  ,        . <br><br><img src="https://habrastorage.org/webt/rz/lt/hw/rzlthwfk8lmduvkc_ltfagvorbk.jpeg"><br><br>    .   ,  onOrderIn  onOrderOut.  ,      UIKit,        . <br><br>  ,   -, ‚Äî ,    . <br><br><img src="https://habrastorage.org/webt/q4/8t/2v/q48t2v7xemofbmsmaydyaivlgqw.jpeg"><br><br>    .      UIView  ,      : isActive  progress.        .        CAAction,     . <br><br>   ,   .   ,  , 30 CAACtion,    .          ,   30 ,        NSNull.     15     15 .    .      ‚Äî  .   ,   ‚Äî      . <br><br> ,         .     . <br><br>   .  ,        ,    : , -,     . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indem wir alle Wechselwirkungen in diese vier Teile zerlegen, k√∂nnen wir die Logik des einen mit dem anderen nicht st√∂ren, vereinfachen. </font><font style="vertical-align: inherit;">Versuchen Sie daher, Ihre Anwendungen und verschiedene Aufgaben mithilfe dieser Mikrointeraktionen zu analysieren. </font><font style="vertical-align: inherit;">Denken Sie daran, dass UIKit eine riesige Infrastruktur bietet, um dies bequem und sch√∂n zu tun. </font><font style="vertical-align: inherit;">Vernachl√§ssige sie nicht. </font><font style="vertical-align: inherit;">Oft gibt es sehr alte Methoden, sie werden selten verwendet, aber sie sind sehr wichtig und helfen Ihnen, Ihre Elemente sch√∂n, einfach und schnell zu realisieren.</font></font> Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429580/">https://habr.com/ru/post/de429580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429568/index.html">Reduzieren Sie mit Zextras Backup die Ausfallzeiten von Zimbra bei Serverabst√ºrzen</a></li>
<li><a href="../de429570/index.html">Einem Agenten beibringen, Mario Kart mit Filtern zu spielen</a></li>
<li><a href="../de429572/index.html">Abfangen privater Konversationen in Skype mit Devicelock DLP</a></li>
<li><a href="../de429574/index.html">Kostenloser Check Point f√ºr Anf√§ngerkurs bei CheckMates</a></li>
<li><a href="../de429578/index.html">Welche Fehler sind im Infer.NET-Code versteckt?</a></li>
<li><a href="../de429582/index.html">Analoge Anzeige der Computerlast</a></li>
<li><a href="../de429586/index.html">So bestimmen Sie den besten Zeitpunkt f√ºr den Handel an der B√∂rse</a></li>
<li><a href="../de429588/index.html">Die ganze Wahrheit √ºber RTOS. Artikel Nr. 20. Semaphoren: Nebendienstleistungen und Datenstrukturen</a></li>
<li><a href="../de429590/index.html">Sprachanalyse f√ºr SOLR-basierte Call Center</a></li>
<li><a href="../de429592/index.html">Wie Bankkarten die Wirtschaft beeinflussen und warum der Spielball nicht abhebt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>