<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§šğŸ½ ğŸŒ‰ ğŸ‘©ğŸ½â€âš–ï¸ Kuda itu mati - menangis: transisi dari tslint ke eslint âœ‹ğŸ» ğŸš· ğŸ¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sampai baru-baru ini, di semua proyek di depan, pengembang Dodo Pizza Engineering menggunakan tslint - alat yang berguna yang memberi tahu Anda ketika...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kuda itu mati - menangis: transisi dari tslint ke eslint</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/473648/">  Sampai baru-baru ini, di semua proyek di depan, pengembang Dodo Pizza Engineering menggunakan tslint - alat yang berguna yang memberi tahu Anda ketika Anda <s>mengacaukan kode,</s> membuat ketidakakuratan, membantu mempertahankan kode dengan gaya yang sama dan mengoreksi banyak komentar.  Tapi kemudian tslint mengambil dan mati.  Di bawah potongan, saya akan memberi tahu Anda mengapa hal itu terjadi, bagaimana berhenti menuangkan air mata ke almarhum dan beralih ke alat eslint, dan juga menunjukkan sesuatu yang sangat intim. <br><br><img src="https://habrastorage.org/webt/gx/11/-s/gx11-spjbfgbactdyqkgvjz7ore.png"><br><a name="habracut"></a><br>  Sebenarnya, semuanya sudah dimulai sejak lama: rilis kernel tslint terakhir sudah di tahun 2016.  Dan inilah saat ketika saatnya untuk mulai mengatakan "terakhir," jika seseorang masih mengatakan "terakhir," karena rilis itu benar-benar yang terakhir.  Pada 19 Februari 2019, sebuah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pos resmi</a> dirilis untuk menghentikan pengembangan tslint.  Di dalamnya, perusahaan pengembangan (omong-omong, ini bahkan bukan Microsoft) sangat menyarankan semua orang untuk beralih ke eslint, karena upaya mereka sekarang akan ditujukan untuk meningkatkan dukungan TypeScript dalam linter ini. <br><br><h2>  Satu bahasa, satu tumpukan, satu komunitas </h2><br>  Microsoft melihat TypeScript sebagai bahasa pengembangan web utama, yang seharusnya menggantikan Java / ECMA Script.  Jelas, tujuan ambisius seperti itu menyiratkan tumpukan alat tunggal untuk seluruh pengembangan front-end.  Ini harus sangat menyederhanakan migrasi komunitas JS besar ke TypeScript.  Selain jaminan kepercayaan dari Microsoft, eslint memiliki arsitektur yang lebih baik daripada tslint.  Misalnya, Anda dapat menghubungkan parser, dan ada lebih banyak pilihan aturan yang terhubung. <br><br>  Microsoft tidak akan menjadi dirinya sendiri jika itu hanya diinginkan.  Apa pun yang kami katakan tentang kualitas perangkat lunak mereka, mereka melakukan alat pengembangan yang hebat (dan, omong-omong, perangkat input).  Jadi kali ini mereka tidak datang dengan tangan kosong, tetapi menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rencana migrasi</a> .  Sesuai dengan rencana ini, pengembangan peraturan tslint telah dihentikan pada 1 Agustus 2019, dan pengembangan tslint itu sendiri akan berhenti pada 1 November 2019.  Meskipun, jujur â€‹â€‹saja, pengembangan telah dihentikan sejak lama (lihat di atas untuk rilis terbaru). <br><br>  Di sini seharusnya menjadi jelas bagi pembaca bahwa sudah saatnya beralih ke eslint, tidak ada pilihan lain.  Untuk mempermanis pil, perlu dikatakan bahwa: <br><br><ul><li>  sementara tslint difokuskan pada TypeScript dengan penekanan yang lebih besar pada penggunaan jenis dan pemeriksaan sintaks yang benar, eslint mencakup semua yang ada di depan, termasuk sintaks komponen Bereaksi; </li><li>  eslint memiliki lebih banyak aturan yang telah ditentukan; </li><li>  ada aturan (dan plugin) yang memeriksa kode di tingkat blok (duplikasi kode, kompleksitas yang dirasakan, dll.); </li><li>  ada plugin yang memeriksa bukan kode sama sekali, tetapi, misalnya, ekspresi reguler. </li></ul><br>  Secara umum, sepertinya transisi ke linter baru, yang merupakan produk utama, akan membuka seluruh dunia peluang yang sebelumnya tak terlihat bagi kita.  Baiklah, mari kita coba! <br><br><h2>  Tambahkan eslint ke proyek </h2><br>  Saya akan berbicara tentang migrasi aturan di bawah ini.  Sementara itu, buat proyek untuk bekerja dengan eslint. <br>  Jika Anda sudah memiliki proyek dengan tslint, maka hapus dulu semua paket yang terkait dengan tslint: tslint sendiri, tslint-react, tslint-config-prettier, dll. <br><br>  Sekarang tambahkan paket eslint ke proyek (tetapkan semuanya sebagai devDependencies): <br><br><ul><li>  eslint sendiri; </li><li>  @ typescript-eslint / parser - engine untuk parsing TypeScript; </li><li>  @ typescript-eslint / eslint-plugin - set aturan untuk TypeScript </li></ul><br><h2>  Eslint pengaturan minimal </h2><br>  Buat file konfigurasi .eslintrc.json.  Eslint mendukung banyak format file untuk konfigurasinya, tetapi JSON sepertinya yang paling nyaman.  Begini tampilan opsi kerja minimal: <br><pre><code class="json hljs">{ //   <span class="hljs-attr"><span class="hljs-attr">"env"</span></span>: { //    <span class="hljs-attr"><span class="hljs-attr">"browser"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, //   ES6 <span class="hljs-attr"><span class="hljs-attr">"es6"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, //   ES2017 <span class="hljs-attr"><span class="hljs-attr">"es2017"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, //   <span class="hljs-attr"><span class="hljs-attr">"extends"</span></span>: [ //    eslint <span class="hljs-string"><span class="hljs-string">"eslint:recommended"</span></span>, //      <span class="hljs-string"><span class="hljs-string">"plugin:@typescript-eslint/eslint-recommended"</span></span>, //    TypeScript <span class="hljs-string"><span class="hljs-string">"plugin:@typescript-eslint/recommended"</span></span>, //  TS,     <span class="hljs-string"><span class="hljs-string">"plugin:@typescript-eslint/recommended-requiring-type-checking"</span></span> ], //   <span class="hljs-attr"><span class="hljs-attr">"parser"</span></span>: <span class="hljs-string"><span class="hljs-string">"@typescript-eslint/parser"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"parserOptions"</span></span>: { //    TS     <span class="hljs-attr"><span class="hljs-attr">"project"</span></span>: <span class="hljs-string"><span class="hljs-string">"tsconfig.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tsconfigRootDir"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>, }, //      TypeScript <span class="hljs-attr"><span class="hljs-attr">"plugins"</span></span>: [<span class="hljs-string"><span class="hljs-string">"@typescript-eslint"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"rules"</span></span>: {} }</code> </pre> <br>  Bagian <code>env</code> memberi tahu eslint tentang opsi proyek Anda.  Dalam contoh saya, ini adalah proyek untuk peramban (yaitu kode akan berfungsi di peramban).  Tulis untuk Node.JS - set simpul: true.  Dua opsi berikut menunjukkan dialek JS yang sedang diuji.  Secara umum, kami akan memeriksa kode untuk TypeScript, tetapi jika proyek Anda juga memiliki kode untuk JS, maka jangan lupa untuk mengencangkannya.  Bagi kami sendiri, kami memutuskan bahwa kami menetapkan parameter ini ke nilai yang sama dengan target di tsconfig.json. <br><br>  Tidak ada yang kontroversial tentang set aturan eslint standar, seperti titik koma yang diperlukan di akhir ekspresi atau spasi / tab.  Semua aturan bermanfaat secara unik.  Anda dapat melihat aturan apa dan dengan level apa yang disertakan di <a href="">sini</a> . <br><br>  Baris berikutnya Anda perlu <a href="">menonaktifkan</a> setengah aturan.  Ini diperlukan karena mereka tidak bekerja dengan TypeScript dan alih-alih bekerja secara normal mereka akan membuang banyak kesalahan. <br><br>  Maka Anda harus menghubungkan aturan yang direkomendasikan dari TypeScript di tas terpisah.  Di sini Anda perlu diingat bahwa <a href="">aturan sintaksis umum</a> (seperti melarang var) akan berfungsi seperti itu. <br><br>  Tetapi untuk aturan yang <a href="">menggunakan tipe TS</a> (misalnya, @ typescript-eslint / no-not-type-assertion), mesin TypeScript diperlukan.  Dan mesin akan membutuhkan file tsconfig.json, jalan yang harus ditentukan. <br><br>  Di tsconfig.json, kami di Dodo Pizza Engineering biasanya menentukan kecualikan dan membuang tes sehingga tes tersebut tidak sesuai dengan proyek.  Tetapi agar eslint tidak berfungsi, Anda harus menentukan dan memasukkan.  Artinya, semua file yang perlu disalin harus dimasukkan secara eksplisit dalam proyek.  Tanpa ini, eslint akan bersumpah pada setiap file yang ditemukannya: "File itu tidak ada dalam proyek, saya tidak akan melakukan apa-apa, saya akan melakukan banyak kesalahan."  Ada opsi tanpa menentukan file proyek secara eksplisit - setel <code>createDefaultProgram: true</code> parameter <code>createDefaultProgram: true</code> .  Ini, pada intinya, berarti: "Semua yang Anda temukan adalah Parsi."  Tetapi pengembang sangat menyarankan untuk tidak melakukannya karena penurunan kinerja yang signifikan. <br><br>  Jika Anda menggunakan ForkTsCheckerWebpackPlugin untuk memproses file TypeScript, kemudian ganti <code>tslint: true</code> dengan <code>eslint: true</code> dalam parameternya (di webpack.config.ts). <br><br>  Anda juga perlu menyiapkan peluncuran linter dari baris perintah.  Sebelum itu, tambahkan nilai ini ke bagian skrip di <code>package.json</code> : <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"eslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --cache --ext .js,.jsx,.ts,.tsx src"</span></span>, <span class="hljs-string"><span class="hljs-string">"eslint:dump"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --print-config ./.eslintrc.json"</span></span>,</code> </pre> <br>  Baris pertama baru memulai pemeriksaan eslint tanpa membangun proyek.  Yang kedua menampilkan pengaturan eslint saat ini, yang memungkinkan Anda melihat pengaturan untuk parameter aturan. <br><br>  Dalam opsi ini, eslint sudah akan bekerja di proyek dan bahkan menangkap beberapa tiang tembok: mendefinisikan ulang global, variabel yang tidak digunakan, dll. <br><br><h2>  Menyiapkan Kode Visual Studio </h2><br>  Setelah Anda melakukan semua ini, Anda sudah dapat memulai linter dari baris perintah.  Ini juga akan diluncurkan secara implisit ketika membangun proyek.  Tetapi dalam Visual Studio Code kita tidak akan melihat komentar dari linter.  Bagaimana bisa ?! <br><br>  Ada plugin eslint untuk studio (dbaeumer.vscode-eslint), itu harus diinstal.  Setelah itu, tidak ada yang akan berhasil, tidak ada yang akan ditekankan dan diperbaiki.  Mengapa  Karena plugin memiliki konfigurasi, yang mengatakan bahwa Anda hanya perlu bekerja dalam file JavaScript. <br><br>  Pengaturan licik ini tidak dibuat di UI, jadi Anda harus masuk ke file pengaturan studio dan secara manual menambahkan bahasa yang Anda butuhkan ke parameter eslint.validate.  Daftar lengkap bahasa dapat ditemukan di isi dokumentasi studio.  Seperti apa pengaturan ini dengan kami: <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"eslint.validate"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"javascript"</span></span>, <span class="hljs-string"><span class="hljs-string">"javascriptreact"</span></span>, <span class="hljs-string"><span class="hljs-string">"typescriptreact"</span></span>, <span class="hljs-string"><span class="hljs-string">"typescript"</span></span>, ],</code> </pre> <br>  Setelah itu, restart studio dan semuanya akhirnya akan mulai berfungsi. <br><br><h2>  Sekarang tinggal mengkonfigurasi aturan </h2><br>  Proyek sudah diatur.  Sekarang tentang aturan, karena pada contoh di atas daftar aturan kosong. <br><br>  Saya harus mengatakan bahwa tslint tidak menghentikan kami untuk mengacaukan kode yang benar secara formal.  Misalnya, lupakan menunggu.  Eslint dapat menemukan kesalahan semantik seperti itu dan bersumpah pada mereka: untuk menginformasikan bahwa nilai kembali adalah Janji, tetapi untuk itu, untuk beberapa alasan, menunggu tidak ditulis.  Ini juga termasuk masalah gaya kompleksitas menengah: penggunaan lambda atau fungsi, dll, yang tidak lagi bisa dilakukan oleh Prettier. <br><br>  Mengenai aturan sederhana: posisi kurung, tab vs  spasi, dll., diyakini bahwa mereka harus diberikan kepada Prettier atau paket serupa.  Tetapi dalam linter mereka harus dibiarkan tetap: ini adalah perbatasan terakhir, yang masih mampu menghentikan pengembang lalai perakitan proyek yang jatuh.  Selain itu, baris ini dapat otomatis: misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">husky</a> , memungkinkan Anda untuk memulai linter secara otomatis untuk setiap komit. <br><br>  Kami memutuskan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk tidak melakukan migrasi</a> dari set aturan tslint yang kami miliki.  Dan buat set Anda sendiri dari awal. <br><br>  Ada set aturan standar untuk eslint: <br><br><ul><li>  ESLint Recommended adalah seperangkat aturan netral yang dibuat dengan ide tidak menelurkan holivar.  Hanya pemeriksaan yang jelas diperlukan yang dimasukkan: variabel yang tidak digunakan, dll.  Semua set berikutnya memperpanjang yang ini. </li><li>  Google - sudah ada alasan untuk holivar: untuk indentasi ada spasi, diperlukan tanda titik koma. </li><li>  AirBnB - Ada juga aturan gaya yang ketat, termasuk titik koma wajib. </li><li>  Standart - titik koma dilarang di sini, tetapi koma juga dilarang. </li></ul><br>  Kami tidak menyukai paket yang sudah jadi.  Ini mungkin terdengar aneh, tetapi penting bagi kita untuk beralih ke film baru, menghindari perang gaya.  Jika kita menulis seperti ini di mana-mana (tab, tanpa titik koma, trailing koma adalah wajib), maka biarkan tetap demikian - yang utama adalah sama di semua proyek. <br><br><h2>  Seks yang dijanjikan: seperangkat aturannya sendiri </h2><br>  Jujur, untuk menunjukkan set aturan eslint Anda seperti seorang gadis yang menunjukkan payudara: tidak ada lagi rahasia.  Sudah lama saya berpikir apakah perlu melakukan ini.  Tetapi, setelah berkonsultasi dengan sesama gadis, saya memutuskan bahwa itu sepadan. <br><br>  Saya akan mulai dengan plugin yang kami gunakan: <br><br><ul><li>  reaksi - memeriksa kode komponen reaksi.  Kumpulan aturan dasar plus kita.  Dari yang penting: kita tenggelam untuk komponen fungsional murni; </li><li>  react-hooks - aturan dari pengembang reaksi tentang penggunaan hook; </li><li>  janji - memeriksa kesalahan umum saat menggunakan Janji.  Ini bekerja agak aneh dengan kode TypeScript.  Dari yang penting: kami mencoba menggunakan Janji di mana-mana dan tidak menggunakan panggilan balik lalu / menangkap karena keterbacaan kode yang lebih baik; </li><li>  optimal-regex adalah plugin menyenangkan yang memberikan tips untuk meningkatkan ekspresi reguler.  Tidak terlalu berguna, karena regexp kita punya sedikit.  Tetapi jauh dari semua memiliki sihir regexp.  Jadi ini berguna, tetapi tidak banyak bertanya; </li><li>  sonarjs adalah plugin api dengan memeriksa kompleksitas kode dan kesalahan refactoring khas.  Yang pertama adalah hal yang lucu: plugin mengevaluasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kompleksitas yang dirasakan dari</a> kode dan memberikan saran ketika itu layak menyederhanakan kode.  Pencarian untuk kesalahan refactoring sering juga memungkinkan penyederhanaan kode atau, setidaknya, meningkatkan keterbacaan; </li><li>  @ typescript-eslint - aturan eslint untuk memeriksa kode TypeScript.  Dan satu set untuk menonaktifkan aturan dasar yang tidak kompatibel dengan TS. </li></ul><br>  Seluruh file aturan kami ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Saya perhatikan bahwa ini bukan dogma dan diperbarui karena menyesuaikan dengan proyek. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473648/">https://habr.com/ru/post/id473648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473636/index.html">Unduh torrent 16GB via tablet dengan ruang kosong 4GB</a></li>
<li><a href="../id473638/index.html">Shader bukanlah sihir. Menulis shader di Unity. Pendahuluan</a></li>
<li><a href="../id473640/index.html">Sunset Data Besar</a></li>
<li><a href="../id473642/index.html">Cribble Crabble Gradle: Auto Build</a></li>
<li><a href="../id473646/index.html">Hackathon di sebuah perusahaan kecil: cara mengatur tanpa membuang kereta sumber daya</a></li>
<li><a href="../id473652/index.html">Membuat API REST dengan Node.js dan Oracle Database. Bagian 5</a></li>
<li><a href="../id473654/index.html">PHP Composer: Perbaiki dependensi tanpa rasa sakit</a></li>
<li><a href="../id473656/index.html">Hugo Static Site Generator Experience</a></li>
<li><a href="../id473658/index.html">Menangani bug di Go 1.13</a></li>
<li><a href="../id473660/index.html">Arcade Reverse Engineering: Rekam Michael Jordan di NBA Jam</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>