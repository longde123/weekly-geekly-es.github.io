<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¦” ğŸ§— ğŸ• Pengukuran listrik. Bagian 1. Pengukuran tegangan dan arus â±ï¸ ğŸ¤¦ â¤µï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="pengantar
 Halo semuanya! Setelah akhir siklus pada sensor, ada pertanyaan tentang rencana yang berbeda untuk mengukur parameter konsumsi rumah tangga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengukuran listrik. Bagian 1. Pengukuran tegangan dan arus</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384597/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/4df/1f8/1cd/4df1f81cd86c4e2a8f5afa1441fb88e5.jpg" alt="gambar" align="left"></a><br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halo semuanya! </font><font style="vertical-align: inherit;">Setelah akhir siklus pada sensor, ada pertanyaan tentang rencana yang berbeda untuk mengukur parameter konsumsi rumah tangga dan bukan peralatan listrik. </font><font style="vertical-align: inherit;">Siapa yang mengkonsumsi berapa banyak, bagaimana menghubungkan apa yang diukur, kehalusan apa yang terjadi dan sebagainya. </font><font style="vertical-align: inherit;">Saatnya mengungkapkan semua kartu di area ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam seri artikel ini kami akan mempertimbangkan topik pengukuran parameter listrik. </font><font style="vertical-align: inherit;">Parameter ini sebenarnya adalah angka yang sangat besar, yang akan saya coba sedikit demi sedikit dalam seri kecil. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sejauh ini, rencananya tiga seri:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengukuran listrik. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kualitas listrik.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perangkat untuk mengukur parameter listrik.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proses analisis, kami akan memecahkan masalah praktis tertentu pada mikrokontroler hingga hasilnya tercapai. </font><font style="vertical-align: inherit;">Tentu saja, sebagian besar siklus ini akan dikhususkan untuk mengukur tegangan AC dan dapat bermanfaat bagi semua penggemar untuk mengontrol peralatan listrik di rumah pintar mereka. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berdasarkan hasil dari seluruh siklus, kami akan memproduksi meteran listrik pintar tertentu dengan akses Internet. </font><font style="vertical-align: inherit;">Penggemar yang sangat terkenal untuk mengontrol peralatan listrik di rumah pintar mereka dapat memberikan semua bantuan yang mungkin dalam pelaksanaan bagian komunikasi berdasarkan, misalnya, MajorDomo. </font><font style="vertical-align: inherit;">Mari menjadikan OpenSource rumah pintar yang lebih baik, jadi untuk berbicara. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam seri ini dalam dua bagian, kita akan membahas pertanyaan-pertanyaan berikut:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koneksi sensor arus dan tegangan pada perangkat DC, serta sirkuit AC fase tunggal dan tiga fase;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengukuran nilai arus dari arus dan tegangan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengukuran faktor daya;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kekuatan penuh, aktif dan reaktif;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsumsi daya;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan mengatasi Anda akan menemukan jawaban untuk dua pertanyaan pertama dari daftar ini. </font><font style="vertical-align: inherit;">Saya sengaja tidak menyentuh masalah akurasi indikator pengukuran dan dari seri ini saya hanya senang dengan hasil yang diperoleh dengan akurasi sepatu kulit plus atau minus. </font><font style="vertical-align: inherit;">Saya pasti akan mencurahkan artikel terpisah untuk masalah ini di seri ketiga.</font></font><br>
<a name="habracut"></a><br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Koneksi sensor</font></font></b></h4><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/ueE-XPjVkRY%3Ffeature%3Doembed&amp;usg=ALkJrhgnpQwbG3VLFieLOaGD1BIrur-tTw" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam seri terakhir tentang sensor tegangan dan arus, saya berbicara tentang jenis sensor, tetapi tidak berbicara tentang cara menggunakannya dan di mana harus meletakkannya. </font><font style="vertical-align: inherit;">Saatnya memperbaikinya</font></font><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghubungkan sensor DC</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas bahwa seluruh siklus akan dikhususkan untuk sistem arus bolak-balik, tetapi kami juga akan dengan cepat membahas sirkuit arus searah, karena ini dapat berguna bagi kami ketika mengembangkan catu daya arus searah. Ambil, misalnya, </font><i><font style="vertical-align: inherit;">konverter buck</font></i><font style="vertical-align: inherit;"> klasik </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<img src="https://habrastorage.org/files/d35/255/0f2/d352550f2c04401ea57bcda120ee3790.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 1. Konverter buck PWM</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tujuan kami adalah untuk memberikan tegangan output yang stabil. Selain itu, berdasarkan informasi dari sensor saat ini, dimungkinkan untuk mengontrol mode operasi induktor L1, mencegah kejenuhannya, dan juga menerapkan perlindungan konverter saat ini. Dan sejujurnya, tidak ada opsi khusus untuk memasang sensor.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sensor tegangan dalam bentuk pembagi resistif R1-R2, yang merupakan satu-satunya yang mampu bekerja dengan arus searah, dipasang pada output konverter. Sebagai aturan, rangkaian mikro konverter khusus memiliki input umpan balik, dan melakukan segala upaya untuk memastikan bahwa pada input ini (3) ada tingkat tegangan tertentu yang ditentukan dalam dokumentasi untuk rangkaian mikro. Misalnya, 1.25V. Jika tegangan output kami cocok dengan level ini - semuanya baik-baik saja - kami langsung menerapkan tegangan output ke input ini. Jika tidak, maka atur pembagi. Jika kita perlu memberikan tegangan output 5V, maka pembagi harus memberikan faktor pembagian 4, yaitu, misalnya, R1 = 30k, R2 = 10k.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sensor saat ini biasanya dipasang antara sumber daya dan konverter dan pada chip. Dari perbedaan potensial antara titik 1 dan 2, dan dengan resistansi yang diketahui, resistor Rs dapat menentukan nilai arus dari induktor kami. Memasang sensor arus antara sumber dan beban bukanlah ide yang baik, karena kapasitor filter akan terputus oleh resistor dari konsumen arus pulsed. Memasang resistor di celah kawat biasa juga tidak menjanjikan hal yang baik - akan ada dua level yang masih asyik untuk dipusingkan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah penurunan tegangan dapat dihindari dengan menggunakan sensor arus tanpa kontak - misalnya, sensor aula: </font></font><br>
<img src="https://habrastorage.org/files/90c/b6b/1e2/90cb6b1e298b4d408bd27d971218781e.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 2. Sensor arus tanpa kontak</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, ada cara yang lebih sulit untuk mengukur arus. Lagi pula, tegangan juga turun pada transistor dan arus yang sama mengalir seperti induktansi melaluinya. Oleh karena itu, dengan turunnya tegangan, Anda juga dapat menentukan nilai arus. Jujur, jika Anda melihat struktur internal dari rangkaian konverter, misalnya, dari Texas Instruments, maka metode ini ditemukan sesering yang sebelumnya. Keakuratan metode ini tentu bukan yang tertinggi, tetapi ini cukup untuk cutoff saat ini untuk bekerja. </font></font><br>
<img src="https://habrastorage.org/files/2fd/ecb/bab/2fdecbbab26c483ea476483e32e2a0c9.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 3. Transistor sebagai sensor arus. Kami melakukan hal yang</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
sama di sirkuit lain dari konverter yang sama, baik meningkatkan atau membalik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, perlu untuk menyebutkan secara terpisah konverter linear dan konverter flyback.</font></font><br>
<img src="https://habrastorage.org/files/1d7/ebd/4b1/1d7ebd4b13214a919014f35a8a672b24.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 4. Koneksi sensor saat ini di konverter flyback</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mereka juga dapat menggunakan resistensi eksternal atau transistor dalam perannya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan ini kami menghubungkan sensor ke konverter DC / DC. </font><font style="vertical-align: inherit;">Jika Anda memiliki saran untuk opsi lain, saya dengan senang hati akan menambahkan artikel kepada mereka.</font></font><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2 Menghubungkan sensor ke sirkuit AC fase tunggal</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sirkuit AC, kami memiliki banyak pilihan sensor yang mungkin. </font><font style="vertical-align: inherit;">Mari kita pertimbangkan beberapa opsi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang paling sederhana adalah penggunaan pembagi tegangan resistif dan pirau arus. </font></font><br>
<img src="https://habrastorage.org/files/458/c52/e43/458c52e436ac451d96927f6d3a14d772.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 5. Koneksi sensor resistor</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Namun, ia memiliki beberapa kelemahan signifikan:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, kami akan memberikan amplitudo signifikan dari sinyal dari pirau saat ini, mengalokasikan sejumlah besar daya di atasnya, atau kami akan puas dengan amplitudo kecil dari sinyal dan kemudian memperkuatnya. Dan kedua, resistor menciptakan perbedaan potensial antara netral jaringan dan netral perangkat. Jika perangkat terisolasi, tidak masalah, jika perangkat memiliki terminal pentanahan, maka kami berisiko tertinggal tanpa sinyal dari sensor saat ini, karena kami akan melakukan hubungan arus pendek. Mungkin Anda harus mencoba sensor yang bekerja dengan prinsip lain.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, kami menggunakan transformator arus dan tegangan, atau sensor arus efek hall dan transformator tegangan. </font><font style="vertical-align: inherit;">Di sini, ada lebih banyak peluang untuk bekerja dengan peralatan, karena kawat netral tidak memiliki kerugian, dan yang paling penting - dalam kedua kasus ada isolasi galvanik dari peralatan pengukur, yang sering kali dapat bermanfaat. </font><font style="vertical-align: inherit;">Namun, harus diingat bahwa sensor arus dan tegangan transformator memiliki respons frekuensi yang terbatas dan jika kita ingin mengukur komposisi harmonik dari distorsi, maka ini bukan fakta yang akan berhasil. </font></font><br>
<img src="https://habrastorage.org/files/b59/304/c28/b59304c2821d45ef87501f76acfa232a.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gbr. 6. Koneksi transformator dan arus dan tegangan non-kontak sensor</font></font></i><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3 Menghubungkan sensor ke sirkuit AC multifase</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam jaringan multifase, kemampuan kita untuk menghubungkan sensor saat ini sedikit kurang. Ini disebabkan oleh fakta bahwa shunt saat ini tidak dapat digunakan sama sekali, karena perbedaan potensial antara shunt fase akan berfluktuasi dalam ratusan volt dan saya tidak tahu pengendali umum yang input analognya dapat menahan ejekan tersebut. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ada satu cara untuk menggunakan shunt saat ini - untuk setiap saluran perlu membuat input analog yang terisolasi secara galvanis. Tetapi jauh lebih mudah dan lebih dapat diandalkan untuk menggunakan sensor lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam penganalisa kualitas saya, saya menggunakan pembagi tegangan resistif dan sensor arus efek hall jarak jauh. </font></font><br>
<img src="https://habrastorage.org/files/3e5/d90/547/3e5d90547af64b41a48bcfe42ee82429.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gbr. 7 Sensor arus dalam jaringan tiga fase</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti dapat dilihat dari gambar, kami menggunakan koneksi empat kawat. </font><font style="vertical-align: inherit;">Tentu saja, alih-alih sensor arus pada efek hall, Anda dapat mengambil trafo saat ini atau loop Rogowski. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alih-alih pembagi resistif, transformator tegangan dapat digunakan, baik untuk sistem empat-kawat dan tiga-kawat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus terakhir, belitan primer transformator tegangan dihubungkan oleh segitiga, dan sekunder oleh bintang, titik umum yang merupakan titik umum dari rangkaian pengukuran </font></font><br>
<img src="https://habrastorage.org/files/e4d/100/cf4/e4d100cf4d3048338dd15cacdb92a373.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Gambar. 8. Menggunakan transformator tegangan dalam jaringan tiga fase</font></font></i><br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 Nilai arus tegangan dan arus</font></font></b></h4><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/TOaW9xvr8NE%3Ffeature%3Doembed&amp;usg=ALkJrhjCjM__VCjv9BgjAjIf-DNy6bSddg" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktunya telah tiba untuk menyelesaikan masalah pengukuran sinyal kita. Arti penting praktis bagi kami adalah nilai arus dan tegangan saat ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Biarkan saya mengingatkan Anda materi dari siklus sensor. Dengan menggunakan ADC mikrokontroler kami secara berkala, kami akan memperbaiki nilai tegangan sesaat. Jadi, selama periode pengukuran, kita akan memiliki sebuah array data dari tingkat nilai tegangan sesaat (untuk saat ini, semuanya serupa). </font></font><br>
<img src="https://habrastorage.org/files/f70/ca7/063/f70ca706313a41a784c27c270cbd6eb2.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 9. Serangkaian nilai tegangan sesaat</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tugas kita adalah untuk menghitung nilai efektif. Untuk memulainya, kita menggunakan rumus integral: </font></font><br>
<img src="https://habrastorage.org/files/417/546/27d/41754627def647e89dce0c4037146eba.gif"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam sistem digital, kita harus membatasi diri pada kuantum waktu tertentu, jadi kita pergi ke penjumlahan: </font></font><br>
<img src="https://habrastorage.org/files/17c/f0a/b23/17cf0ab2355a4a86a67504036f331c6b.gif"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mana </font></font><img src="https://habrastorage.org/files/c7c/ac5/dec/c7cac5dece7f4d03b262ad4c8ad30317.gif"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">periode pengambilan sampel sinyal kita, dan</font></font><img src="https://habrastorage.org/files/289/63f/958/28963f958bf74b1888aeef21b047c567.gif"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- jumlah sampel untuk periode pengukuran. Di suatu tempat di sini, dalam sebuah video, saya mulai menggosok game tentang kesetaraan daerah. Saya harus tidur hari itu. =) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam mikrokontroler MSP430FE4252, yang digunakan dalam meter listrik merkuri fase tunggal, 4096 pembacaan dilakukan untuk periode pengukuran 1, 2 atau 4 detik. Pada T = 1s dan N = 4096 kita akan bergantung lebih lanjut. Selain itu, 4096 titik per detik akan memungkinkan kita untuk menggunakan algoritma transformasi Fourier cepat untuk menentukan spektrum harmonik hingga 40 harmonik, seperti yang disyaratkan oleh GOST. Tetapi lebih banyak tentang itu di seri berikutnya.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menguraikan algoritme untuk program kami. Kami perlu memastikan permulaan ADC yang stabil setiap 1/8192 detik, karena kami memiliki dua saluran dan kami akan mengukur data ini secara bergantian. Untuk melakukan ini, konfigurasikan timer dan sinyal interupsi akan secara otomatis memulai kembali ADC. Semua ADC melakukan itu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menulis program masa depan di Arduino, karena banyak yang memilikinya. Sejauh ini kami memiliki minat akademis murni. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memiliki frekuensi kuarsa sistem 16 MHz dan timer 8-bit (sehingga kehidupan tidak tampak seperti madu), kita perlu memastikan frekuensi operasi setiap timer terganggu dengan frekuensi 8192 Hz. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami sedih tentang fakta bahwa 16 MHz tidak sepenuhnya dibagi seperti yang kita butuhkan dan frekuensi akhir dari timer adalah 8198 Hz. Kami menutup mata terhadap kesalahan 0,04% dan masih membaca 4096 sampel per saluran.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami sedih bahwa gangguan overflow di Arduino sedang sibuk menghitung waktu (bertanggung jawab atas milis dan penundaan, jadi ini akan berhenti bekerja secara normal), jadi kami menggunakan interupsi sebagai perbandingan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kami tiba-tiba menyadari bahwa sinyal datang kepada kami bipolar, dan bahwa msp430fe4252 mengatasinya dengan sempurna. Kami puas dengan ADC unipolar, oleh karena itu, kami merakit konverter sederhana dari sinyal bipolar menjadi unipolar pada penguat operasional: </font></font><br>
<img src="https://habrastorage.org/files/18f/0dd/c20/18f0ddc202544b24be6d684ce9d98c23.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 10. Konverter dari sinyal bipolar menjadi unipolar</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Selain itu, tugas kami adalah memastikan bahwa sinusoid kami berosilasi relatif terhadap setengah tegangan referensi - maka kami akan mengurangi setengah rentang tegangan atau mengaktifkan opsi pada pengaturan ADC. dan dapatkan nilai tanda.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino memiliki 10-bit ADC, jadi kami kurangi setengah dari hasil yang tidak ditandatangani dalam 0-1023 dan dapatkan -512-511.Kami </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
memeriksa model yang dirakit dalam LTSpiceIV dan memastikan bahwa semuanya berfungsi sebagaimana mestinya. </font><font style="vertical-align: inherit;">Dalam materi video, kami juga memverifikasi secara eksperimental. </font></font><br>
<img src="https://habrastorage.org/files/3de/320/1f6/3de3201f66f94937b29504236ded1044.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 11. Hasil simulasi. </font><font style="vertical-align: inherit;">Hijau adalah sinyal asli, biru adalah output</font></font></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sketsa untuk Arduino untuk satu saluran</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{<font></font>
  autoadcsetup();<font></font>
  DDRD |=(<span class="hljs-number">1</span>&lt;&lt;PD2)|(<span class="hljs-number">1</span>&lt;&lt;PD3);<font></font>
  Serial.begin(<span class="hljs-number">38400</span>);<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">double</span> urms = <span class="hljs-number">0</span>;
<span class="hljs-keyword">double</span> utemp = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> umoment = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> N = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> flag = <span class="hljs-number">0</span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">if</span> (flag){<font></font>
    flag = <span class="hljs-number">0</span>;<font></font>
    Serial.println(urms);<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">int</span> i = <span class="hljs-number">255</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">autoadcsetup</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">//set up TIMER0 to  4096Hz</span>
  <span class="hljs-comment">//TIMER0_OVF will be the trigger for ADC</span>
  <span class="hljs-comment">/*normal mode, prescaler 16
   16MHz / 64 / 61 = 4098 Hz 0.04% to 4096Hz*/</span>
  TCCR0B = (<span class="hljs-number">1</span> &lt;&lt; CS01)|(<span class="hljs-number">1</span> &lt;&lt; CS00);<span class="hljs-comment">//timer frequency = clk/64</span>
  OCR0A = <span class="hljs-number">60</span>;<span class="hljs-comment">//61-1</span>
  TIMSK0 = (<span class="hljs-number">1</span>&lt;&lt;OCIE0A);
  <span class="hljs-comment">//set ADC.</span>
  ADMUX =  (<span class="hljs-number">1</span> &lt;&lt; REFS0);<span class="hljs-comment">//8-bit mode, ADC0 channel, AVVCC as ref</span>
  ADCSRA = (<span class="hljs-number">1</span> &lt;&lt; ADEN) | (<span class="hljs-number">1</span> &lt;&lt; ADATE) | (<span class="hljs-number">1</span> &lt;&lt; ADIE) | (<span class="hljs-number">1</span> &lt;&lt; ADPS2);<span class="hljs-comment">//TUrn ADC On, trigger enable, Interrupt enable, sysclk/16=1MHz_ADC_clk=76kHz conv freq(13ticks per conversion)</span>
  ADCSRB = (<span class="hljs-number">1</span>&lt;&lt; ADTS1) | (<span class="hljs-number">1</span>&lt;&lt;ADTS0) | (<span class="hljs-number">1</span>&lt;&lt;MUX5);<span class="hljs-comment">//Auto trigger source</span><font></font>
}<font></font>
<font></font>
ISR(TIMER0_COMPA_vect){<font></font>
  <span class="hljs-keyword">if</span> (PIND &amp; (<span class="hljs-number">1</span>&lt;&lt;PD2)){<font></font>
    PORTD &amp;= ~(<span class="hljs-number">1</span>&lt;&lt;PD2);<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span>{<font></font>
    PORTD |=(<span class="hljs-number">1</span>&lt;&lt;PD2);<font></font>
  }<font></font>
  TCNT0 = <span class="hljs-number">0</span>;<font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
ISR(ADC_vect){<font></font>
<font></font>
  <span class="hljs-keyword">if</span>( ( UCSR0A &amp; (<span class="hljs-number">1</span>&lt;&lt;UDRE0)) ){<font></font>
    umoment = ADCL;<span class="hljs-comment">//copy result.</span>
    umoment += (ADCH&lt;&lt;<span class="hljs-number">8</span>);<font></font>
    umoment = umoment - <span class="hljs-number">512</span>;<font></font>
    utemp = utemp + <span class="hljs-built_in">pow</span>((<span class="hljs-keyword">double</span>)(umoment),<span class="hljs-number">2</span>)/<span class="hljs-number">4096</span>;<font></font>
    N++;<font></font>
    <span class="hljs-keyword">if</span> (N == <span class="hljs-number">4095</span>){<font></font>
      urms = <span class="hljs-built_in">sqrt</span>(utemp)/<span class="hljs-number">102</span>;<font></font>
      N = <span class="hljs-number">0</span>;<font></font>
      utemp = <span class="hljs-number">0</span>;<font></font>
      flag = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">if</span> (PIND &amp; (<span class="hljs-number">1</span>&lt;&lt;PD3)){<font></font>
        PORTD &amp;= ~(<span class="hljs-number">1</span>&lt;&lt;PD3);<font></font>
      }<font></font>
      <span class="hljs-keyword">else</span>{<font></font>
        PORTD |=(<span class="hljs-number">1</span>&lt;&lt;PD3);<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program ini ditulis dalam IDE Arduino untuk mikrokontroler ATmega1280. </font><font style="vertical-align: inherit;">Pada papan debug saya, 8 saluran pertama diarahkan untuk kebutuhan internal papan, sehingga saluran ADC8 digunakan. </font><font style="vertical-align: inherit;">Dimungkinkan untuk menggunakan sketsa ini untuk papan dengan ATmega168, namun, Anda harus memilih saluran yang benar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalam interupsi, kami bergerak-gerak beberapa pin layanan untuk melihat secara visual frekuensi kerja digital. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa kata tentang dari mana koefisien 102 berasal. Pada awal pertama, sinyal berbagai amplitudo dipasok dari generator, indikasi nilai tegangan efektif dibaca dari osiloskop, dan nilai yang dihitung dalam unit absolut ADC diambil dari konsol.</font></font><br>
<table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umax, V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Urms, Masuk</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terhitung</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">212</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.73</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">176</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.38</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">141</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,03</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">106</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,684</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">71</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,358</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,179</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sembilan belas</font></font></td>
</tr>
</tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membagi nilai-nilai kolom ketiga dengan nilai-nilai yang kedua, kami memperoleh rata-rata 102. Ini akan menjadi koefisien "kalibrasi" kami. Namun, dapat dicatat bahwa ketika tegangan menurun, akurasinya turun tajam. Ini karena sensitivitas ADC kami yang rendah. Faktanya, 10 debit untuk perhitungan akurat sangat kecil dan jika dimungkinkan untuk mengukur tegangan dalam soket dengan cara ini, menempatkan 10-bit ADC untuk mengukur arus yang dikonsumsi oleh beban akan menjadi kejahatan terhadap metrologi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik ini, kita akan berhenti. Pada bagian selanjutnya, kami akan mempertimbangkan tiga pertanyaan lain dalam seri ini dan dengan lancar akan melanjutkan ke pembuatan perangkat itu sendiri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firmware yang disajikan, serta firmware lain untuk seri ini (karena saya merekam video lebih cepat daripada menyiapkan artikel), Anda akan menemukan di repositori di GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/radiolok/arduino_rms_count</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Adapun pengembangan meteran listrik, referensi dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI SimpleLink WiFi CC3200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan diambil sebagai dasar </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">SmartPlug</font></a><font style="vertical-align: inherit;"> , berita yang </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">kemarin lalu</font></a><font style="vertical-align: inherit;"> terbang ke surat saya. </font><font style="vertical-align: inherit;">Saya sangat suka mikrokontroler CC3200, jadi kami akan mengembangkan paket penguat untuk tempat makan siang yang ada dan menyadari semua fitur yang kami minati. </font><font style="vertical-align: inherit;">Jangan lupa untuk membuatnya bekerja dengan baik pada mikrokontroler lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komentar diundang  </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">progchip666</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, untuk komentar dan tambahan pada materi, serta  </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smart_alex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seperti sebelumnya tertarik mengukur arus dan tegangan menggunakan Arduino.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id384597/">https://habr.com/ru/post/id384597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id384583/index.html">Penggemar "My Little Pony" mengumpulkan uang untuk game pertempuran berdasarkan serial animasi (tetapi dengan karakter baru)</a></li>
<li><a href="../id384585/index.html">Sejarah terperinci tentang kegagalan Volkswagen terkait dengan pemalsuan tes untuk keramahan lingkungan</a></li>
<li><a href="../id384589/index.html">Berbicara dengan bola lampu - VOCCA Smart Cartridge Review</a></li>
<li><a href="../id384593/index.html">[UPDATE ISS] Gerhana Total Super Moon 28 September</a></li>
<li><a href="../id384595/index.html">Bahaya radiasi: reaktor fisi versus reaktor fusi</a></li>
<li><a href="../id384599/index.html">Mengapa ganti bohlam menjadi LED</a></li>
<li><a href="../id384603/index.html">Ulasan Lima: layanan cloud pribadi tanpa batas</a></li>
<li><a href="../id384605/index.html">Membuat microwave konvensional lebih pintar dengan IFTTT dan OpenHAB</a></li>
<li><a href="../id384607/index.html">Bagaimana bentuk internet?</a></li>
<li><a href="../id384611/index.html">Foto luar angkasa untuk minggu ini (09.21-27.09)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>