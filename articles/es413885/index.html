<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뱅 游뱢 游놎游낖 Evaluaci칩n de Cavium ThunderX2: El sue침o del servidor Arm se hace realidad (Parte 1, Introducci칩n) 游붊 游꿪 游뚽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace menos de dos a침os, exploramos el primer servidor Arm SoC, que en teor칤a podr칤a competir con el Intel Xeon E5s: Cavium ThunderX. El servidor de So...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evaluaci칩n de Cavium ThunderX2: El sue침o del servidor Arm se hace realidad (Parte 1, Introducci칩n)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/413885/"> Hace menos de dos a침os, exploramos el primer servidor Arm SoC, que en teor칤a podr칤a competir con el Intel Xeon E5s: Cavium ThunderX.  El servidor de SoC demostr칩 todo lo que se anunci칩, sin embargo, debido al bajo rendimiento de un solo subproceso y las dificultades para optimizar las caracter칤sticas de energ칤a, el SoC de 48 n칰cleos se asign칩 a nichos de mercado.  Como resultado, el primer servidor Cavium SoC nunca pudo competir con el Xeon de Intel. <br><br><img src="https://habrastorage.org/webt/x6/z7/5j/x6z75jaf9myymohvcozvis4hahg.jpeg"><br><br>  Pero Cavium no se rindi칩 por razones obvias: en este momento, el mercado de servidores se ha vuelto m치s atractivo que nunca.  Los centros de datos del gigante global Intel generan ingresos de aproximadamente 20 mil millones de d칩lares estadounidenses (!) Por a침o.  Adem치s, la rentabilidad es del 50%.  En t칠rminos de ganancias y rotaci칩n de dinero, el mercado de servidores es muchas veces mayor que cualquier otro mercado de equipos.  Entonces, despu칠s de lanzar ThunderX, Cavium prometi칩 lanzar una segunda iteraci칩n: administraci칩n de energ칤a mejorada, rendimiento mejorado de un solo subproceso e incluso m치s n칰cleos (54). <br><a name="habracut"></a><br>  Lo que no juega en manos de Cavium es que si el usuario necesita un servidor, simplemente puede tomar una m치quina Intel depurada y confiable.  De hecho, las fuertes promesas de Arm, Calxeda, Broadcom, AppliedMicro en los 칰ltimos 5 a침os han seguido siendo promesas, causando una seria ola de escepticismo y desconfianza y la aparici칩n del nuevo servidor Arm SoCs. <br><br>  Sin embargo, la nueva creaci칩n de un Cavium externo merece atenci칩n.  Se hicieron varios cambios, no solo la adici칩n del n칰mero "2" al nombre: Cavium compr칩 el dise침o Vulcan de Avago.  Vulcan es un dise침o de procesador bastante ambicioso, desarrollado originalmente por el equipo de Arm Server SoC Broadcom, y tiene un legado mucho m치s grande que el ThunderX original.  Adem치s, bas치ndose en su experiencia con ThunderX, Cavium pudo introducir algunas mejoras microarquitect칩nicas en el dise침o de Vulcan, mejorando su rendimiento y potencia. <br><br>  Como resultado, ThunderX2 "result칩" ser un n칰cleo m치s elaborado que la generaci칩n anterior.  El n칰cleo ThunderX ten칤a una tuber칤a muy corta y era poco probable que soportara dos instrucciones por ciclo, pero el n칰cleo Vulcan est치 dise침ado para 8 descargas y ejecuta hasta 4 instrucciones por ciclo.  Y a칰n m치s: las 4 transmisiones (SMT4) pueden estar activas al mismo tiempo, proporcionando una carga constante de back-end.  El nuevo ThunderX2 SoC32 tiene 32 n칰cleos de este tipo con una frecuencia de hasta 2.5 GHz. <br><br><img src="https://habrastorage.org/webt/nt/nl/7a/ntnl7apffv6jkwh6k1v_aoqptae.png"><br><br>  Con hasta 128 subprocesos y al menos ocho controladores DDR4, esta CPU deber칤a funcionar bien en todas las cargas del servidor.  En otras palabras, a diferencia de ThunderX (1), ThunderX2 es el primer procesador de servidor Arm y tiene todas las posibilidades de sacudir el equilibrio en el mercado de servidores. <br><br><h2>  Qui칠n tiene m치s: especificaciones </h2><br>  Treinta y dos n칰cleos IPC altos en un paquete parecen prometedores.  Pero, 쯖칩mo se ve el nuevo ThunderX2 en comparaci칩n con los productos AMD, Qualcomm e Intel?  En la tabla a continuaci칩n, comparamos las especificaciones de varios SKU de servidor de gama alta. <br><br><img src="https://habrastorage.org/webt/p3/hv/fx/p3hvfxp0iatr1ockmnjx9xm8xp8.png"><br><br>  Los lectores expertos notar치n de inmediato que la parte superior de la l칤nea de procesadores Intel es el Xeon Platinum 8180. Sin embargo, este SKU con 205 W TDP y un precio superior a $ 10,000 generalmente no es comparable con ning칰n procesador en la lista.  Ya casi hemos cruzado la l칤nea de la raz칩n, incluido 8176, que, como nos parece, cae en esta lista de acuerdo con los par치metros de la SKU m치xima de los bloques kernel / thread.  De hecho, Cavium posiciona al Cavium 9980 como "comparable" con el Xeon Platinum 8164 (e Intel desempe침a este papel 8176), pero con frecuencias ligeramente m치s bajas. <br><br>  Sin embargo, en t칠rminos de rendimiento para el d칩lar, Cavium compara su buque insignia 9980 con Intel Xeon Gold 6148, y en este caso, el precio del procesador Cavium parece bastante apetitoso.  Seg칰n los resultados de la prueba, el ThunderX2 m치s r치pido est치 30-40% por delante del Xeon 6148, mientras que la oferta de Cavium es $ 1,300 m치s barata.  Un precio tan agresivo explica los rumores de que Qualcomm no va a ingresar al mercado de servidores. <br><br>  Los datos en la tabla anterior muestran diferencias importantes entre los rivales.  Intel parece tener la topolog칤a central m치s avanzada y la velocidad turbo m치s alta.  Qualcomm, mientras tanto, parece m치s atractivo cuando se trata de rendimiento por vatio. <br><br><img src="https://habrastorage.org/webt/no/2u/7-/no2u7-_oyjv6ol2vd6vqiartfks.png"><br><br>  Al igual que el EPYC de AMD, es probable que el ThunderX2 de Cavium brille en el mercado inform치tico de alto rendimiento (33% de mayor rendimiento, n칰cleos / subprocesos m치s altos).  Al igual que con el dise침o de AMD, el cach칠 EPYC L3 es lento si necesita datos que no est치n en la ranura de cach칠 local de 8 MB.  ThunderX2 es mucho m치s complejo, con una arquitectura de anillo dual similar a la arquitectura de anillo Xeon v4 (Broadwell-EP).  Seg칰n la informaci칩n de Cavium, su arquitectura de anillo sin bloqueo es capaz de proporcionar rendimientos de hasta 6 TB / s. <br><br>  Esta arquitectura de anillo est치 conectada a la interconexi칩n del procesador coherente del Cavium (CCPI2 - en la parte superior de la figura), que opera a una velocidad de 600 Gbit / s.  Esta conexi칩n conecta dos nodos socket / NUMA.  56 carriles de PCIe 3.0 SoC est치n conectados al anillo, que Cavium ha ubicado entre 14 controladores PCIe.  Estos 14 controladores pueden, a su vez, ramificarse a x4 o x1, como se muestra a continuaci칩n. <br><br><img src="https://habrastorage.org/webt/yw/e3/r8/ywe3r8nlwh9n0sjcobksmoeqf58.png"><br><br>  Adem치s, admite SR-IOV, que es tan importante para la virtualizaci칩n de E / S (Xen y KVM). <br><br><h2>  ThunderX: de f치cil a complejo </h2><br>  <b>Breve informaci칩n.</b>  El ThunderX original era una versi칩n mejorada de Octeon III: una CPU con la capacidad de ejecutar simult치neamente dos instrucciones (n칰cleo de doble problema) con dos canales cortos. <br><br><img src="https://habrastorage.org/webt/s_/vu/na/s_vunadz47iappsidwdpeuyjmhw.png"><br><br>  Una ventaja del dise침o original de ThunderX es su alta eficiencia energ칠tica, especialmente para cargas de trabajo con bajo ILP (paralelismo de nivel de instrucci칩n).  Por supuesto, un transportador tan corto plantea serias limitaciones para aumentar la velocidad del reloj, y un dise침o de dise침o simple garantiza un rendimiento bajo de un solo subproceso con cargas ILP medias y altas, mientras que los procesadores fuera de servicio m치s avanzados pueden extraer la mayor cantidad de "paralelismo oculto" posible. ". <br><br><h3>  El "nuevo" n칰cleo del Cavium: Vulcan </h3><br><img src="https://habrastorage.org/webt/20/1j/9c/201j9c0fk3jebmf5cwxryqdxkva.png"><br><br>  En comparaci칩n con el ThunderX original, el n칰cleo del Vulcan ThunderX2 es una bestia completamente diferente.  Anunciado en 2014 por Broadcom, Vulcan es un n칰cleo relativamente grande que controla 4 hilos simult치neos (SMT4).  Como resultado, el back-end deber칤a estar bien cargado incluso cuando se trabaja con cargas de servidor con bajo ILP. <br><br>  Para garantizar la estabilidad de 4 transmisiones SMT, el front-end ThunderX2 puede extraer hasta 64 bytes de un cach칠 de instrucciones asociativas de 8 v칤as de 32 KB, que est치 equipado con un sencillo prefetcher de "siguiente l칤nea".  Sin embargo, la elecci칩n de 8 comandos es posible solo si no hay ramificaci칩n en estos 64 bytes.  De lo contrario, la selecci칩n se interrumpe en la bifurcaci칩n. <br><br>  Esto significa que en el c칩digo de ramificaci칩n intensiva (bases de datos, AI ...), el buscador recibe un promedio de 췀 5 instrucciones por ciclo, ya que una de las 5 instrucciones es una rama.  Las instrucciones seleccionadas se env칤an al b칰fer de suavizado, un b칰fer en el que las instrucciones almacenadas se almacenan para la decodificaci칩n. <br><br><img src="https://habrastorage.org/webt/lt/4e/q4/lt4eq4bh57wresbzuf84layrak8.png"><br><br>  Luego, el decodificador funciona con un paquete de 4 instrucciones.  Entre el decodificador y la fase de cambio de nombre, cada secuencia tiene un "buffer de deslizamiento", que consta de 8 paquetes.  Con 4 subprocesos, se pueden almacenar hasta 32 paquetes (128 instrucciones) en cualquier momento. <br><br>  Estas 4 instrucciones, el paquete, se mueven a lo largo de la tuber칤a hasta que se alcanza una 칰nica cola de mensajes para el planificador.  Al igual que el Detector de flujo de bucle de Intel (funciona como un peque침o cach칠), tambi칠n tiene un b칰fer de bucle y un predictor.  Este buffer de bucle elimina las predicciones de ramificaci칩n incorrectas y contiene 풮ops decodificados que "acortan" la tuber칤a y reducen la energ칤a utilizada para la decodificaci칩n. <br><br>  Se pueden ejecutar hasta 6 instrucciones a la vez.  La implementaci칩n incluye 2 ranuras ALU / FP / NEON, 1 ranura ALU / tap, 2 ranuras de carga / almacenamiento (16 bytes) y 1 ranura de almacenamiento limpia que env칤a 16 bytes a la cach칠 D.  Hay un peque침o (Cavium no revelar치 cu치nto) L1 TLB para cambiar con cero retraso de direcciones virtuales a f칤sicas.  No hay un captador previo de hardware para el cach칠 L1 D1, pero el cach칠 L2 tiene un captador previo de hardware bastante sofisticado que puede reconocer patrones (puede funcionar paso a paso o recuperar la siguiente l칤nea). <br><br>  Esto es suficiente para "alimentar" el back-end, que puede admitir 4 instrucciones por ciclo desde 4 hilos diferentes. <br><br><h3>  Diferencias en microarquitectura </h3><br>  Cavium ha publicado una cantidad limitada de informaci칩n sobre los n칰cleos ThunderX2.  Algunas caracter칤sticas clave de varias arquitecturas de procesador se resumen a continuaci칩n. <br><br><img src="https://habrastorage.org/webt/ud/di/rc/uddircouggaghevqdm5rtzgfrry.png"><br><br>  Un an치lisis detallado est치 m치s all치 del alcance de este art칤culo.  Pero puedes leer los an치lisis de Johan De Gelas sobre la arquitectura de Falkor, Skylake y Zen en AnandTech.  Nos limitamos a las diferencias m치s obvias. <br><br>  Es bastante obvio que el rendimiento de un solo subproceso de Intel sigue fuera de competencia: el n칰cleo de Skylake es el n칰cleo que ejecuta la mayor칤a de las instrucciones sobre la marcha, y lo m치s importante, funciona a una mayor velocidad de reloj.  El n칰cleo de ThunderX2 es diferente, ya que extrae un m치ximo de instrucciones por ciclo, capaz de soportar constantemente 4 hilos.  El buscador capturar치 8 equipos de un hilo, luego 8 del segundo hilo y continuar치 alternando entre hilos.  Esto significa que una mala predicci칩n puede reducir significativamente el rendimiento de un solo hilo. <br><br><h2>  Las SKU ThunderX2: 16 a 32 n칰cleos </h2><br>  El SKU utilizado para las pruebas es ThunderX2 CN9980 2.2.  Este es el SKU de gama alta, contiene 32 n칰cleos a una frecuencia de 2.2 GHz con la capacidad de aumentar hasta 2.5 GHz. <br><br><img src="https://habrastorage.org/webt/bs/p0/cz/bsp0czxkrsx9_oxyoavedet_lje.png"><br><br>  Si crees en los planes de Cavium, en los pr칩ximos meses habr치 muchos m치s SKU.  Cavium afirma que el CN9980 estar치 disponible pronto con una frecuencia de 2.5 GHz y turbo de hasta 3 GHz. <br><br>  Cavium enumer칩 todas sus SKU planificadas junto con SKU Intel comparables.  Seg칰n la definici칩n de Cavium, un SKU Intel comparable es un chip que alcanza el mismo SPECInRate (2017) bajo gcc que el SKU de Cavium. <br><br><img src="https://habrastorage.org/webt/nz/yd/7m/nzyd7mn7vi6azmttjyosotv51ma.png"><br><br>  Cavium cree que el CN9880 2.2 que obtuvimos es comparable al 8164. Mucho m치s caro. Para nuestras pruebas, lo comparamos con el 8176 (Intel SKU disponible para nosotros).  No es que importe: 8176 tiene solo un 3% m치s de velocidad de reloj y 2 n칰cleos adicionales (+ 7%) en comparaci칩n con 8164. Sin embargo, tenga en cuenta que aunque el ThunderX2 Cavium realmente puede competir con los SKU de Intel indicados, ofrecen el mismo rendimiento para un tercio del costo de Intel SKU. <br><br>  En la siguiente parte: <br><br><ul><li>  Configuraci칩n de prueba y metodolog칤a </li><li>  Subsistema de memoria: ancho de banda </li><li>  Rendimiento de un solo subproceso: SPEC CPU2006 </li><li>  SPEC CPU2006 Cont: rendimiento basado en el n칰cleo con SMT </li></ul><br>  Gracias por quedarte con nosotros.  쯊e gustan nuestros art칤culos?  쯈uieres ver m치s materiales interesantes?  <b>Ap칩yenos</b> haciendo un pedido o recomend치ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an치logo 칰nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n칰cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c칩mo dividir el servidor?</a>  (las opciones est치n disponibles con RAID1 y RAID10, hasta 24 n칰cleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces m치s barato?</b>  춰Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Pa칤ses Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C칩mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413885/">https://habr.com/ru/post/es413885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413873/index.html">Los datos recuperados de la misi칩n Apolo ayudaron a resolver el misterio de "calentar la luna"</a></li>
<li><a href="../es413875/index.html">SpaceX desarrollar치 un "centro espacial del futuro"</a></li>
<li><a href="../es413877/index.html">Solo das una raz칩n. 쯆 con qu칠 pretexto pueden robarte ahora?</a></li>
<li><a href="../es413879/index.html">Aprendiendo un caballo (parte 4)</a></li>
<li><a href="../es413881/index.html">Imagen acoplable de 5,94 metros con Telegram MTProxy</a></li>
<li><a href="../es413889/index.html">Fecha l칤mite perdida, o por qu칠 m치s de la mitad de las empresas no estaban listas para el RGPD</a></li>
<li><a href="../es413891/index.html">C칩mo se organiza el Registro Estatal Unificado de Entidades Legales: un registro estatal unificado de entidades legales</a></li>
<li><a href="../es413893/index.html">Un agujero como herramienta de seguridad - 2, o c칩mo atrapar el "cebo vivo" de APT</a></li>
<li><a href="../es413895/index.html">Hackear una pulsera de fitness barata</a></li>
<li><a href="../es413897/index.html">Unity3D ECS y sistema de trabajo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>