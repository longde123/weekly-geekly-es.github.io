<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤗 🤸 👸🏼 Evaluación de Cavium ThunderX2: El sueño del servidor Arm se hace realidad (Parte 1, Introducción) 🦋 🎸 🚦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace menos de dos años, exploramos el primer servidor Arm SoC, que en teoría podría competir con el Intel Xeon E5s: Cavium ThunderX. El servidor de So...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evaluación de Cavium ThunderX2: El sueño del servidor Arm se hace realidad (Parte 1, Introducción)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/413885/"> Hace menos de dos años, exploramos el primer servidor Arm SoC, que en teoría podría competir con el Intel Xeon E5s: Cavium ThunderX.  El servidor de SoC demostró todo lo que se anunció, sin embargo, debido al bajo rendimiento de un solo subproceso y las dificultades para optimizar las características de energía, el SoC de 48 núcleos se asignó a nichos de mercado.  Como resultado, el primer servidor Cavium SoC nunca pudo competir con el Xeon de Intel. <br><br><img src="https://habrastorage.org/webt/x6/z7/5j/x6z75jaf9myymohvcozvis4hahg.jpeg"><br><br>  Pero Cavium no se rindió por razones obvias: en este momento, el mercado de servidores se ha vuelto más atractivo que nunca.  Los centros de datos del gigante global Intel generan ingresos de aproximadamente 20 mil millones de dólares estadounidenses (!) Por año.  Además, la rentabilidad es del 50%.  En términos de ganancias y rotación de dinero, el mercado de servidores es muchas veces mayor que cualquier otro mercado de equipos.  Entonces, después de lanzar ThunderX, Cavium prometió lanzar una segunda iteración: administración de energía mejorada, rendimiento mejorado de un solo subproceso e incluso más núcleos (54). <br><a name="habracut"></a><br>  Lo que no juega en manos de Cavium es que si el usuario necesita un servidor, simplemente puede tomar una máquina Intel depurada y confiable.  De hecho, las fuertes promesas de Arm, Calxeda, Broadcom, AppliedMicro en los últimos 5 años han seguido siendo promesas, causando una seria ola de escepticismo y desconfianza y la aparición del nuevo servidor Arm SoCs. <br><br>  Sin embargo, la nueva creación de un Cavium externo merece atención.  Se hicieron varios cambios, no solo la adición del número "2" al nombre: Cavium compró el diseño Vulcan de Avago.  Vulcan es un diseño de procesador bastante ambicioso, desarrollado originalmente por el equipo de Arm Server SoC Broadcom, y tiene un legado mucho más grande que el ThunderX original.  Además, basándose en su experiencia con ThunderX, Cavium pudo introducir algunas mejoras microarquitectónicas en el diseño de Vulcan, mejorando su rendimiento y potencia. <br><br>  Como resultado, ThunderX2 "resultó" ser un núcleo más elaborado que la generación anterior.  El núcleo ThunderX tenía una tubería muy corta y era poco probable que soportara dos instrucciones por ciclo, pero el núcleo Vulcan está diseñado para 8 descargas y ejecuta hasta 4 instrucciones por ciclo.  Y aún más: las 4 transmisiones (SMT4) pueden estar activas al mismo tiempo, proporcionando una carga constante de back-end.  El nuevo ThunderX2 SoC32 tiene 32 núcleos de este tipo con una frecuencia de hasta 2.5 GHz. <br><br><img src="https://habrastorage.org/webt/nt/nl/7a/ntnl7apffv6jkwh6k1v_aoqptae.png"><br><br>  Con hasta 128 subprocesos y al menos ocho controladores DDR4, esta CPU debería funcionar bien en todas las cargas del servidor.  En otras palabras, a diferencia de ThunderX (1), ThunderX2 es el primer procesador de servidor Arm y tiene todas las posibilidades de sacudir el equilibrio en el mercado de servidores. <br><br><h2>  Quién tiene más: especificaciones </h2><br>  Treinta y dos núcleos IPC altos en un paquete parecen prometedores.  Pero, ¿cómo se ve el nuevo ThunderX2 en comparación con los productos AMD, Qualcomm e Intel?  En la tabla a continuación, comparamos las especificaciones de varios SKU de servidor de gama alta. <br><br><img src="https://habrastorage.org/webt/p3/hv/fx/p3hvfxp0iatr1ockmnjx9xm8xp8.png"><br><br>  Los lectores expertos notarán de inmediato que la parte superior de la línea de procesadores Intel es el Xeon Platinum 8180. Sin embargo, este SKU con 205 W TDP y un precio superior a $ 10,000 generalmente no es comparable con ningún procesador en la lista.  Ya casi hemos cruzado la línea de la razón, incluido 8176, que, como nos parece, cae en esta lista de acuerdo con los parámetros de la SKU máxima de los bloques kernel / thread.  De hecho, Cavium posiciona al Cavium 9980 como "comparable" con el Xeon Platinum 8164 (e Intel desempeña este papel 8176), pero con frecuencias ligeramente más bajas. <br><br>  Sin embargo, en términos de rendimiento para el dólar, Cavium compara su buque insignia 9980 con Intel Xeon Gold 6148, y en este caso, el precio del procesador Cavium parece bastante apetitoso.  Según los resultados de la prueba, el ThunderX2 más rápido está 30-40% por delante del Xeon 6148, mientras que la oferta de Cavium es $ 1,300 más barata.  Un precio tan agresivo explica los rumores de que Qualcomm no va a ingresar al mercado de servidores. <br><br>  Los datos en la tabla anterior muestran diferencias importantes entre los rivales.  Intel parece tener la topología central más avanzada y la velocidad turbo más alta.  Qualcomm, mientras tanto, parece más atractivo cuando se trata de rendimiento por vatio. <br><br><img src="https://habrastorage.org/webt/no/2u/7-/no2u7-_oyjv6ol2vd6vqiartfks.png"><br><br>  Al igual que el EPYC de AMD, es probable que el ThunderX2 de Cavium brille en el mercado informático de alto rendimiento (33% de mayor rendimiento, núcleos / subprocesos más altos).  Al igual que con el diseño de AMD, el caché EPYC L3 es lento si necesita datos que no están en la ranura de caché local de 8 MB.  ThunderX2 es mucho más complejo, con una arquitectura de anillo dual similar a la arquitectura de anillo Xeon v4 (Broadwell-EP).  Según la información de Cavium, su arquitectura de anillo sin bloqueo es capaz de proporcionar rendimientos de hasta 6 TB / s. <br><br>  Esta arquitectura de anillo está conectada a la interconexión del procesador coherente del Cavium (CCPI2 - en la parte superior de la figura), que opera a una velocidad de 600 Gbit / s.  Esta conexión conecta dos nodos socket / NUMA.  56 carriles de PCIe 3.0 SoC están conectados al anillo, que Cavium ha ubicado entre 14 controladores PCIe.  Estos 14 controladores pueden, a su vez, ramificarse a x4 o x1, como se muestra a continuación. <br><br><img src="https://habrastorage.org/webt/yw/e3/r8/ywe3r8nlwh9n0sjcobksmoeqf58.png"><br><br>  Además, admite SR-IOV, que es tan importante para la virtualización de E / S (Xen y KVM). <br><br><h2>  ThunderX: de fácil a complejo </h2><br>  <b>Breve información.</b>  El ThunderX original era una versión mejorada de Octeon III: una CPU con la capacidad de ejecutar simultáneamente dos instrucciones (núcleo de doble problema) con dos canales cortos. <br><br><img src="https://habrastorage.org/webt/s_/vu/na/s_vunadz47iappsidwdpeuyjmhw.png"><br><br>  Una ventaja del diseño original de ThunderX es su alta eficiencia energética, especialmente para cargas de trabajo con bajo ILP (paralelismo de nivel de instrucción).  Por supuesto, un transportador tan corto plantea serias limitaciones para aumentar la velocidad del reloj, y un diseño de diseño simple garantiza un rendimiento bajo de un solo subproceso con cargas ILP medias y altas, mientras que los procesadores fuera de servicio más avanzados pueden extraer la mayor cantidad de "paralelismo oculto" posible. ". <br><br><h3>  El "nuevo" núcleo del Cavium: Vulcan </h3><br><img src="https://habrastorage.org/webt/20/1j/9c/201j9c0fk3jebmf5cwxryqdxkva.png"><br><br>  En comparación con el ThunderX original, el núcleo del Vulcan ThunderX2 es una bestia completamente diferente.  Anunciado en 2014 por Broadcom, Vulcan es un núcleo relativamente grande que controla 4 hilos simultáneos (SMT4).  Como resultado, el back-end debería estar bien cargado incluso cuando se trabaja con cargas de servidor con bajo ILP. <br><br>  Para garantizar la estabilidad de 4 transmisiones SMT, el front-end ThunderX2 puede extraer hasta 64 bytes de un caché de instrucciones asociativas de 8 vías de 32 KB, que está equipado con un sencillo prefetcher de "siguiente línea".  Sin embargo, la elección de 8 comandos es posible solo si no hay ramificación en estos 64 bytes.  De lo contrario, la selección se interrumpe en la bifurcación. <br><br>  Esto significa que en el código de ramificación intensiva (bases de datos, AI ...), el buscador recibe un promedio de ± 5 instrucciones por ciclo, ya que una de las 5 instrucciones es una rama.  Las instrucciones seleccionadas se envían al búfer de suavizado, un búfer en el que las instrucciones almacenadas se almacenan para la decodificación. <br><br><img src="https://habrastorage.org/webt/lt/4e/q4/lt4eq4bh57wresbzuf84layrak8.png"><br><br>  Luego, el decodificador funciona con un paquete de 4 instrucciones.  Entre el decodificador y la fase de cambio de nombre, cada secuencia tiene un "buffer de deslizamiento", que consta de 8 paquetes.  Con 4 subprocesos, se pueden almacenar hasta 32 paquetes (128 instrucciones) en cualquier momento. <br><br>  Estas 4 instrucciones, el paquete, se mueven a lo largo de la tubería hasta que se alcanza una única cola de mensajes para el planificador.  Al igual que el Detector de flujo de bucle de Intel (funciona como un pequeño caché), también tiene un búfer de bucle y un predictor.  Este buffer de bucle elimina las predicciones de ramificación incorrectas y contiene μops decodificados que "acortan" la tubería y reducen la energía utilizada para la decodificación. <br><br>  Se pueden ejecutar hasta 6 instrucciones a la vez.  La implementación incluye 2 ranuras ALU / FP / NEON, 1 ranura ALU / tap, 2 ranuras de carga / almacenamiento (16 bytes) y 1 ranura de almacenamiento limpia que envía 16 bytes a la caché D.  Hay un pequeño (Cavium no revelará cuánto) L1 TLB para cambiar con cero retraso de direcciones virtuales a físicas.  No hay un captador previo de hardware para el caché L1 D1, pero el caché L2 tiene un captador previo de hardware bastante sofisticado que puede reconocer patrones (puede funcionar paso a paso o recuperar la siguiente línea). <br><br>  Esto es suficiente para "alimentar" el back-end, que puede admitir 4 instrucciones por ciclo desde 4 hilos diferentes. <br><br><h3>  Diferencias en microarquitectura </h3><br>  Cavium ha publicado una cantidad limitada de información sobre los núcleos ThunderX2.  Algunas características clave de varias arquitecturas de procesador se resumen a continuación. <br><br><img src="https://habrastorage.org/webt/ud/di/rc/uddircouggaghevqdm5rtzgfrry.png"><br><br>  Un análisis detallado está más allá del alcance de este artículo.  Pero puedes leer los análisis de Johan De Gelas sobre la arquitectura de Falkor, Skylake y Zen en AnandTech.  Nos limitamos a las diferencias más obvias. <br><br>  Es bastante obvio que el rendimiento de un solo subproceso de Intel sigue fuera de competencia: el núcleo de Skylake es el núcleo que ejecuta la mayoría de las instrucciones sobre la marcha, y lo más importante, funciona a una mayor velocidad de reloj.  El núcleo de ThunderX2 es diferente, ya que extrae un máximo de instrucciones por ciclo, capaz de soportar constantemente 4 hilos.  El buscador capturará 8 equipos de un hilo, luego 8 del segundo hilo y continuará alternando entre hilos.  Esto significa que una mala predicción puede reducir significativamente el rendimiento de un solo hilo. <br><br><h2>  Las SKU ThunderX2: 16 a 32 núcleos </h2><br>  El SKU utilizado para las pruebas es ThunderX2 CN9980 2.2.  Este es el SKU de gama alta, contiene 32 núcleos a una frecuencia de 2.2 GHz con la capacidad de aumentar hasta 2.5 GHz. <br><br><img src="https://habrastorage.org/webt/bs/p0/cz/bsp0czxkrsx9_oxyoavedet_lje.png"><br><br>  Si crees en los planes de Cavium, en los próximos meses habrá muchos más SKU.  Cavium afirma que el CN9980 estará disponible pronto con una frecuencia de 2.5 GHz y turbo de hasta 3 GHz. <br><br>  Cavium enumeró todas sus SKU planificadas junto con SKU Intel comparables.  Según la definición de Cavium, un SKU Intel comparable es un chip que alcanza el mismo SPECInRate (2017) bajo gcc que el SKU de Cavium. <br><br><img src="https://habrastorage.org/webt/nz/yd/7m/nzyd7mn7vi6azmttjyosotv51ma.png"><br><br>  Cavium cree que el CN9880 2.2 que obtuvimos es comparable al 8164. Mucho más caro. Para nuestras pruebas, lo comparamos con el 8176 (Intel SKU disponible para nosotros).  No es que importe: 8176 tiene solo un 3% más de velocidad de reloj y 2 núcleos adicionales (+ 7%) en comparación con 8164. Sin embargo, tenga en cuenta que aunque el ThunderX2 Cavium realmente puede competir con los SKU de Intel indicados, ofrecen el mismo rendimiento para un tercio del costo de Intel SKU. <br><br>  En la siguiente parte: <br><br><ul><li>  Configuración de prueba y metodología </li><li>  Subsistema de memoria: ancho de banda </li><li>  Rendimiento de un solo subproceso: SPEC CPU2006 </li><li>  SPEC CPU2006 Cont: rendimiento basado en el núcleo con SMT </li></ul><br>  Gracias por quedarte con nosotros.  ¿Te gustan nuestros artículos?  ¿Quieres ver más materiales interesantes?  <b>Apóyenos</b> haciendo un pedido o recomendándolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un análogo único de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o cómo dividir el servidor?</a>  (las opciones están disponibles con RAID1 y RAID10, hasta 24 núcleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces más barato?</b>  ¡Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Países Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413885/">https://habr.com/ru/post/es413885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413873/index.html">Los datos recuperados de la misión Apolo ayudaron a resolver el misterio de "calentar la luna"</a></li>
<li><a href="../es413875/index.html">SpaceX desarrollará un "centro espacial del futuro"</a></li>
<li><a href="../es413877/index.html">Solo das una razón. ¿O con qué pretexto pueden robarte ahora?</a></li>
<li><a href="../es413879/index.html">Aprendiendo un caballo (parte 4)</a></li>
<li><a href="../es413881/index.html">Imagen acoplable de 5,94 metros con Telegram MTProxy</a></li>
<li><a href="../es413889/index.html">Fecha límite perdida, o por qué más de la mitad de las empresas no estaban listas para el RGPD</a></li>
<li><a href="../es413891/index.html">Cómo se organiza el Registro Estatal Unificado de Entidades Legales: un registro estatal unificado de entidades legales</a></li>
<li><a href="../es413893/index.html">Un agujero como herramienta de seguridad - 2, o cómo atrapar el "cebo vivo" de APT</a></li>
<li><a href="../es413895/index.html">Hackear una pulsera de fitness barata</a></li>
<li><a href="../es413897/index.html">Unity3D ECS y sistema de trabajo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>