<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼 🔼 🛳️ Überlastungsschutz für Zimbra und Server 😁 🛃 👰🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="E-Mail hat sich als Standard für die Geschäftskommunikation etabliert. Aufgrund der hohen Wirtschaftlichkeit von E-Mails sowie einer Reihe von Funktio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Überlastungsschutz für Zimbra und Server</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/457896/"> E-Mail hat sich als Standard für die Geschäftskommunikation etabliert.  Aufgrund der hohen Wirtschaftlichkeit von E-Mails sowie einer Reihe von Funktionen, die mit dem Zitieren von Text und dem Anhängen von Anhängen verbunden sind, eignen sich E-Mails am besten für die Rolle eines universellen Wegs für den Dokumentenaustausch und die höfliche Geschäftskommunikation.  Dieselben Funktionen sind der Grund, warum Spammer E-Mails so gern haben.  Infolgedessen ist E-Mail heute ein riesiger Ozean von Spam, in dessen Gewässern nur gelegentlich Geschäftsbriefe zu finden sind.  Aus diesem Grund ist der Schutz vor Spam-Mailings eine der Hauptaufgaben des Administrators eines Mailservers.  Lassen Sie uns einen Blick darauf werfen, was Sie damit in der Open-Source-Edition der Zimbra Collaboration Suite tun können. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="Bild"><br><a name="habracut"></a><br>  Trotz der kostenlosen Lösung kann Zimbra OSE dem Systemadministrator eine Menge äußerst effektiver Tools zur Verfügung stellen, um das Problem des Empfangs unerwünschter E-Mails zu lösen.  Wir haben bereits über Dienstprogramme wie Amavis, SpamAssassin, ClamAV und cbpolicyd geschrieben, mit denen Sie eingehende E-Mails zuverlässig filtern können, indem Sie Spam-Mails sowie infizierte und Phishing-E-Mails herausfiltern.  Ihr Hauptnachteil ist jedoch, dass sie alle mit bereits empfangenen E-Mail-Nachrichten arbeiten und Systemressourcen für das Filtern nutzloser Nachrichten ausgeben, die immer viel besser zu finden sind.  Aber was ist, wenn Ihr Unternehmen unter der Waffe eines großen Botnetzes steht, das Ihren Mailserver ständig mit so vielen Junk-Briefen überhäuft, dass das Filtern allein den Löwenanteil der MTA-Serverkapazität ausmacht? <br><br>  Theoretisch können Sie sich davor schützen, indem Sie einen Cloud-Dienst zum Filtern eingehender E-Mails anschließen. In der Praxis ist diese Schutzmethode jedoch nicht für jedes Unternehmen geeignet, da Sie in diesem Fall Dritte nicht nur mit der Verarbeitung von Spam, sondern auch mit Geschäftskorrespondenz beauftragen müssen, was nicht immer der Fall ist sicher und oft direkt im Widerspruch zur Sicherheitsrichtlinie des Unternehmens.  Darüber hinaus bestehen Risiken im Zusammenhang mit der Zuverlässigkeit des Cloud-Spam-Filters.  Der Ausweg aus dieser Situation kann die Organisation des Serverschutzes sein.  Speziell für diese Zwecke hatte Zimbra ein integriertes Dienstprogramm Postscreen, das den Mailserver vor Briefen schützen soll, die von Botnetzen gesendet werden, ohne den Mailserver zu laden. <br><br>  Die Arbeit von Postscreen besteht im Wesentlichen darin, dass dieses Dienstprogramm alle Anforderungen für die Verbindung zum Mailserver überprüft und den Clients, bei denen es verdächtig erscheint, keine Verbindung zum Server herzustellen, nicht gestattet wird.  Da laut Statistik weltweit etwa 90% der Spam-Mails von Botnetzen gesendet werden, wird Postscreen häufig als erste Schutzstufe für einen Mailserver vor unerwünschten Mailings verwendet.  Dank dessen kann der Mailserver auch bei starken Spam-Angriffen von großen Botnetzen stabil und ohne Überlastung arbeiten. <br><br>  Das Funktionsprinzip von Postscreen ist recht einfach. Das Dienstprogramm kann eine Reihe einfacher Überprüfungen eingehender E-Mails durchführen, bevor diese an den Mailserver oder andere Dienste übertragen werden, die eine eingehendere und detailliertere Überprüfung eingehender E-Mails durchführen.  Jede der Prüfungen kann bestanden werden, darf aber nicht bestanden werden.  Basierend auf den Ergebnissen der einzelnen Überprüfungen kann Postscreen nach Wahl des Zimbra-Administrators eine von drei Aktionen anwenden: <b>Löschen</b> , <b>Ignorieren</b> oder <b>Erzwingen</b> .  Die Aktion " <b>Löschen"</b> erzwingt, dass die Verbindung zum Client getrennt wird, wenn die Überprüfung fehlschlägt. Mit der Aktion " <b>Ignorieren"</b> können Sie die Ergebnisse der Überprüfungen bei der endgültigen Entscheidung ignorieren, gleichzeitig jedoch Informationen und Statistiken zu den Überprüfungen sammeln. <b>Mit der</b> Aktion " <b>Erzwingen"</b> können Sie die Ergebnisse der Überprüfungen bei der endgültigen Entscheidung berücksichtigen. Führen Sie jedoch weiterhin alle vom Systemadministrator geplanten Tests durch. <br><br>  Das einfache Funktionsprinzip bedeutet keine einfache Bedienung und Konfiguration.  Tatsache ist, dass ein falsch konfigurierter Postscreen der Grund dafür sein kann, dass eine Reihe von Nachrichten, die für das Unternehmen wichtig sind, den Adressaten nicht erreichen.  Aus diesem Grund ist es notwendig, die Konfiguration eines so leistungsstarken Tools wie Postscreen mit großer Sorgfalt anzugehen und es in bestimmten Situationen ständig auf Verhalten zu testen. <br><br>  Postscreen in Zimbra ist anfangs enthalten, aber viele sind möglicherweise mit der Erstkonfiguration nicht zufrieden.  Jetzt werden wir uns die beste Option für die Konfiguration von Postscreen in Bezug auf Sicherheit und Risikofreiheit ansehen.  Das Wesentliche ist, dass Postscreen nach dem Fehlschlagen einer der Überprüfungen nicht ohne Konversation die Verbindung zum Client trennt, sondern alle Überprüfungen bis zum Ende durchführt. Wenn diese Überprüfungen fehlschlagen, wird eine Fehlermeldung angezeigt.  Dadurch wird der lebende Absender über die Nichtzustellung der Nachricht informiert, wenn Postscreen sie als Spam akzeptiert.  Dies wird erreicht, indem der Durchsetzungswert in den Parametern der Prüfungen festgelegt wird.  Mit diesem Wert können Sie die gestarteten Überprüfungen bis zum Ende abschließen, ohne die Verbindung zum Client beim ersten Fehler zu unterbrechen. Gleichzeitig können Sie nach Abschluss die Spam-E-Mail blockieren, ohne sie an den Server zu senden. <br><br>  Geben Sie die folgenden Befehle ein, um die erforderlichen Überprüfungen zu aktivieren: <br><br>  <b>zmprov mcf zimbraMtaPostscreenDnsblSites 'b.barracudacentral.org = 127.0.0.2 * 7' zimbraMtaPostscreenDnsblSites 'zen.spamhaus.org = 127.0.0. [10; 11] * 8' zimbraMtaPostscreenDnsblSites 'zen.spamhaus.org = 12. ..7] * 6 'zimbraMtaPostscreenDnsblSites' zen.spamhaus.org = 127.0.0.3 * 4 'zimbraMtaPostscreenDnsblSites' zen.spamhaus.org = 127.0.0.2 * 3 '</b> <br><br>  Mit diesem Befehl können Sie eine DNS-Überprüfung eingehender Verbindungen zu den beiden beliebtesten öffentlichen Spam-Datenbanken hinzufügen und Buchstaben bewerten, je nachdem, in welcher Datenbank die Absenderadresse gefunden wird.  Je mehr bestrafte „Sterne“ ein Kunde bekommt, desto wahrscheinlicher ist er ein Spammer <br><br>  <b>zmprov mcf zimbraMtaPostscreenDnsblAction erzwingen</b> <br><br>  Dieser Befehl bestimmt die Aktion, die als Ergebnis des Bestehens der DNS-Prüfung ausgeführt wird.  In diesem Fall wird das Testergebnis gespeichert und der Brief selbst wird weiteren Tests unterzogen. <br><br>  <b>zmprov mcf zimbraMtaPostscreenGreetAction erzwingen</b> <br><br>  Da im SMTP-Protokoll nach einer direkten Verbindung der Server zuerst die Kommunikation mit dem Client startet und Postscreen dementsprechend eine Begrüßung an den Client senden kann.  Aufgrund der Tatsache, dass viele Spam-Clients, ohne auf das Ende der Begrüßung zu warten, beginnen, Befehle zu senden, können sie leicht erkannt werden.  Mit diesem Befehl können Sie die Ergebnisse dieses Tests berücksichtigen und gleichzeitig weitere Tests durchführen. <br><br>  <b>zmprov mcf zimbraMtaPostscreenNonSmtpCommandAction drop</b> <br><br>  Im Rahmen dieses Tests können Sie mit Postscreen Verbindungen herausfiltern, die nicht von E-Mail-Clients stammen.  Da sie keine Briefe senden, können Sie sie ohne Angst sicher vom Server trennen. <br><br>  <b>zmprov mcf zimbraMtaPostscreenPipeliningAction erzwingen</b> <br><br>  Diese Überprüfung basiert auf der Tatsache, dass der Client im SMTP-Protokoll standardmäßig jeweils nur einen Befehl senden und dann warten kann, bis der Server auf diesen Befehl reagiert.  Viele Spam-Bots verhalten sich jedoch anders, indem sie viele Befehle senden, ohne auf eine Antwort vom Server zu warten.  Auf diese Weise können Sie Spam-Bots nahezu eindeutig identifizieren. <br><br>  Im Prinzip sind diese Überprüfungen für Postscreen mehr als ausreichend, um den Großteil der Spam-Bots vom Server zu entfernen und die Auslastung Ihres Mailservers erheblich zu verringern.  Gleichzeitig erhalten lebende Menschen eine Nachricht, dass ihr Brief nicht zugestellt wurde, wodurch das Risiko, wichtige Nachrichten aufgrund von Postscreen-Einstellungen zu verlieren, erheblich verringert wird.  In diesem Fall können Sie der Postscreen-Whitelist einen vertrauenswürdigen Absender hinzufügen.  Um weiße und schwarze Listen von Postscreen zu erstellen, müssen Sie zuerst die Datei <b>/ opt / zimbra / conf / postfix / postscreen_wblist erstellen</b> . <br><br>  Wir werden eine Liste zulässiger und verbotener IP-Adressen und Subnetze im CIDR-Tabellenformat hinzufügen.  Blockieren Sie beispielsweise das Subnetz 121.144.169. *, Erlauben Sie jedoch die Verbindung zu einer einzelnen IP-Adresse aus diesem Subnetz: <br><br><blockquote>  # Regeln werden in der angegebenen Reihenfolge ausgewertet. <br>  # Blacklist 121.144.169. * Außer 121.144.169.196. <br>  121.144.169.196/32 Genehmigung <br>  121.144.169.0/24 ablehnen </blockquote><br>  Wir machen Sie auf die Wichtigkeit der Reihenfolge der Einträge aufmerksam.  Tatsache ist, dass Postscreen die Datei bis zur ersten Übereinstimmung mit weißen und schwarzen Listen scannt. Wenn das blockierte Subnetz vor der zulässigen IP-Adresse liegt, erreicht die Überprüfung einfach nicht den Datensatz, dass diese IP-Adresse zur weißen Liste und Verbindung hinzugefügt wurde Der Server wird nicht passieren. <br><br>  Nachdem die Datei mit den weißen und schwarzen Listen bearbeitet und gespeichert wurde, können Sie die entsprechende Prüfung mit den folgenden Befehlen aktivieren: <br><br><blockquote>  zmprov mcf zimbraMtaPostscreenAccessList "allow_mynetworks, cidr: / opt / zimbra / conf / postfix / postscreen_wblist" <br>  zmprov mcf zimbraMtaPostscreenBlacklistAction erzwingen </blockquote><br>  Jetzt greift Postscreen zusätzlich zu den bereits festgelegten Überprüfungen auch auf die Datei mit weißen und schwarzen Listen zu, sodass der Administrator Probleme mit der Unfähigkeit, zuverlässige Absender mit dem Server zu verbinden, problemlos beheben kann. <br><br>  Bei allen Fragen zur Zextras Suite können Sie sich per E-Mail an katerina@zextras.com an den Vertreter von Zextras Katerina Triandafilidi wenden </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457896/">https://habr.com/ru/post/de457896/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457884/index.html">Souveränes Internet - Klärung von Befehlen</a></li>
<li><a href="../de457886/index.html">Zwei-Faktor-Authentifizierung auf der Site mithilfe eines USB-Tokens. Jetzt für Linux</a></li>
<li><a href="../de457888/index.html">Mutationstests: Testtests</a></li>
<li><a href="../de457892/index.html">Roulette Professor</a></li>
<li><a href="../de457894/index.html">Arbeiten Sie mit einem Proxmox-Cluster: Installation, Netzwerkeinrichtung, ZFS, Lösen häufiger Probleme</a></li>
<li><a href="../de457900/index.html">US Federal Communications Commission gegen Meteorologen</a></li>
<li><a href="../de457902/index.html">Mitap für Data Science</a></li>
<li><a href="../de457904/index.html">Atomic Radio - die erste Musiksendung überhaupt</a></li>
<li><a href="../de457906/index.html">Ärzte glauben, dass in naher Zukunft Geräte zur Herstellung von Impfstoffen in Haushalten und Apotheken erhältlich sein werden</a></li>
<li><a href="../de457910/index.html">WebFPGA - Verilog-Entwicklung im Browser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>