<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõçÔ∏è üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ üÜí Rel√≥gio de cuco baseado em Lego Mindstorms üòÄ ü•® ü•™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dois anos e meio atr√°s, comprei o kit Lego Mindstorms EV3 para dar meus primeiros passos na rob√≥tica. Depois de colocar o conjunto ev3dev no controlad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rel√≥gio de cuco baseado em Lego Mindstorms</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417255/">  Dois anos e meio atr√°s, comprei o kit Lego Mindstorms EV3 para dar meus primeiros passos na rob√≥tica.  Depois de colocar o conjunto ev3dev no controlador e jogar o suficiente com o controle SSH do motor e do sensor, eu me refresquei por uma compra por dois anos.  A raz√£o era que eu n√£o tinha imagina√ß√£o suficiente para tornar isso poss√≠vel: depois de v√°rios modelos montados da Lego Technics (tanto de caixa quanto caseiros), eu j√° estava acostumada a milagres como brinquedos controlados remotamente e rob√¥s simples como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">os modelos da Lego</a> apresentados na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">exposi√ß√£o em Crac√≥via,</a> como uma pessoa que trabalhava em um sistema de telemec√¢nica, n√£o inspirava mais inspira√ß√£o suficiente.  Eu realmente n√£o queria repetir a experi√™ncia de outra pessoa. <br><br>  No final, ocorreu-me: um rel√≥gio de cuco poderia se tornar um modelo bastante complexo, interessante, pr√°tico e n√£o muito estiloso.  Inspirado por essa id√©ia, comecei a trabalhar. <br><a name="habracut"></a><br>  De acordo com minha ideia, o modelo deveria se tornar n√£o apenas um brinquedo, mas um dispositivo totalmente funcional.  Isso foi totalmente poss√≠vel: o rel√≥gio trava na minha parede e exibe a hora atual no modo 24/7.  N√£o me propus a tarefa de reproduzir o mecanismo do original com todos os detalhes - por exemplo, as setas s√£o independentes, o som √© reproduzido pelo alto-falante do controlador e os pesos e o p√™ndulo s√£o usados ‚Äã‚Äãexclusivamente para o ambiente.  Tendo transferido, portanto, todo o trabalho principal para a parte do software, montei o mecanismo na vers√£o mais simples poss√≠vel.  Como n√£o documentei todo o processo de montagem, n√£o posso montar o modelo novamente da mesma forma;  No entanto, os princ√≠pios b√°sicos do emparelhamento de software e mec√¢nica s√£o tais que o programa deve funcionar com modifica√ß√µes m√≠nimas em outros modelos montados de acordo com um princ√≠pio semelhante. <br><br>  Rel√≥gios de v√°rias formas s√£o apresentados no v√≠deo que publiquei no Youtube: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rCxNfV3xOM0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Informa√ß√µes b√°sicas sobre o modelo s√£o apresentadas no v√≠deo.  Abaixo, mostrarei um pouco mais detalhadamente sobre a mec√¢nica, o software e os problemas que surgiram durante a montagem e opera√ß√£o deste projeto. <br><br><h2>  A mec√¢nica </h2><br>  A montagem da parte mec√¢nica levou 6 dias.  Tendo colocado as caixas de Lego em cima da mesa, durante as festas de fim de ano, montei um mecanismo que difere da vers√£o final apenas nas portas atr√°s das quais o cuco vive (mais sobre isso abaixo).  Como n√£o tenho habilidades especiais de design, o rel√≥gio √© uma caixa retangular com duas m√£os e um mostrador marcado com pontos na frente.  Na parte superior do rel√≥gio, h√° um compartimento fechado por duas portas nas quais o cuco se assentou; na parte inferior, h√° um p√™ndulo esquem√°tico e dois pesos.  As pe√ßas foram retiradas de v√°rios conjuntos Lego: um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lego Mindstorms EV3 (31313)</a> , duas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">motoniveladoras Volvo (42030)</a> , um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">caminh√£o Mercedes com lan√ßa pneum√°tica (42043)</a> e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">caminh√£o guindaste (42009)</a> .  Apesar da abund√¢ncia de conjuntos, quase n√£o havia detalhes suficientes para um modelo desse tamanho - a tampa do rel√≥gio √© montada a partir de tiras de cores diferentes, o que, no entanto, n√£o chama a aten√ß√£o, j√° que, com uma instala√ß√£o na parede, est√° acima do n√≠vel dos olhos. <br><br>  Como ponteiro de minuto, √© usada a barra Lego Technics padr√£o para 15 unidades.  √â colocado no eixo, conectando-o firmemente ao motor.  Assim, a precis√£o de ajustar o ponteiro dos minutos acabou sendo suficiente para que pudesse ser usado para determinar o tempo exato em minutos.  O ponteiro das horas √© mais curto e montado em um mecanismo girat√≥rio.  Ele √© conectado ao motor atrav√©s de v√°rias marchas, para que haja uma folga bastante vis√≠vel - no entanto, n√£o t√£o grande que cause problemas na determina√ß√£o do tempo. <br><br>  As m√£os s√£o acionadas por dois grandes motores (LM).  Al√©m disso, emparelhado com cada um dos ponteiros externos, outro funciona, o interno - para o ponteiro dos minutos, ele √© fixado no mesmo eixo que o primeiro e, para o rel√≥gio, o mecanismo rotativo √© duplicado na parte interna do rel√≥gio.  O objetivo das setas internas √© pressionar o bot√£o (sensor de toque) enquanto passa as setas externas pela posi√ß√£o superior.  Assim, o controlador tem a capacidade de determinar a posi√ß√£o das setas imediatamente ap√≥s a ativa√ß√£o e definir sua posi√ß√£o correta com base na hora do sistema, evitando que o usu√°rio precise digitar manualmente as setas. <br><br>  Os pesos t√™m uma fun√ß√£o puramente decorativa.  Inicialmente, pensei em fazer um peso, que abaixaria lentamente (como em um rel√≥gio normal) e, em seguida, rapidamente subiria para a posi√ß√£o superior (an√°loga √† corda manual de um rel√≥gio de p√™ndulo).  Recusei essa op√ß√£o por v√°rios motivos.  Em primeiro lugar, o mecanismo de troca da rela√ß√£o de transmiss√£o entre o motor e o peso acrescentava complexidade extra ao modelo (e a movimenta√ß√£o do p√™ndulo do mesmo motor apenas o aumentava).  Em segundo lugar, um delineador r√°pido, seja o que for que se diga, ser√° uma opera√ß√£o barulhenta, mas eu queria que o rel√≥gio funcionasse o mais silenciosamente poss√≠vel.  Em terceiro lugar, em um rel√≥gio de cuco convencional, geralmente existem dois pesos (um fornece o rel√≥gio, o segundo - o cuco) e, colocando na parte inferior do rel√≥gio imediatamente duas rodas girat√≥rias para a corrente levariam a um aumento ainda maior no tamanho do modelo. <br><br>  A partir disso, segui um caminho mais simples: na verdade instalei dois pesos no rel√≥gio, mas os coloquei em um circuito comum jogado sobre uma √∫nica roda motriz.  Nesta vers√£o, os pesos sempre se movem em dire√ß√µes anti-clim√°ticas, descendo por sua vez.  Esse comportamento tem pouco a ver com rel√≥gios de p√™ndulo reais, mas parece bastante interessante. <br><br>  A corrente √© feita de guarni√ß√µes comuns de tr√™s unidades, usando uma combina√ß√£o de eixos e pist√µes: um pist√£o deslizante √© uma pe√ßa bastante rara, e eu usei os eixos para dobrar o comprimento da corrente resultante.  N√£o era t√£o f√°cil fazer uma roda que movesse essa corrente sem derrapagens e quebras, mas no final era poss√≠vel. <br><br>  Quanto a mudar a dire√ß√£o do movimento dos pesos, minha primeira ideia foi torn√°-la puramente mec√¢nica: ao elevar para a parede inferior da caixa do rel√≥gio, o eixo amplo montado diretamente acima do peso pressiona a placa pela qual a corrente √© passada e faz com que a roda gire.  Eu usaria o elemento de comuta√ß√£o da mesma forma que, por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guindaste 42009</a> : a roda motriz, deslocando-se, entra na embreagem com o vizinho direito ou esquerdo.  Essa id√©ia, no entanto, n√£o se manifestou: a placa de press√£o trouxe a pe√ßa deslizante para a posi√ß√£o central quando n√£o estava engatada com o vizinho direito ou esquerdo, o torque parou de chegar ao volante e o interruptor congelou na posi√ß√£o central. <br><br>  Para corrigir essa situa√ß√£o, decidi adicionar um tri√¢ngulo m√≥vel a esse circuito, cujos dois lados teriam um comprimento fixo e o terceiro seria representado por uma pe√ßa deslizante de mola usada na suspens√£o do mesmo guindaste de caminh√£o.  O significado desse projeto era que o tri√¢ngulo est√° sempre do lado do painel de press√£o que corresponde ao peso de eleva√ß√£o: quando o peso atinge o topo, o painel pressiona o tri√¢ngulo, a mola √© comprimida, o tri√¢ngulo passa pela posi√ß√£o de equil√≠brio e depois "joga" para o outro lado, liberando energia armazenada por uma mola.  Essa energia, de acordo com meu plano, deveria mudar a chave de velocidade pela posi√ß√£o de equil√≠brio, traduzindo-a imediatamente para a posi√ß√£o oposta. <br><br>  No entanto, n√£o consegui estabilizar este sistema.  Pelo tamanho do rel√≥gio, voc√™ pode entender que os mecanismos em miniatura n√£o s√£o a minha cara, mas com um aumento no tamanho do n√≥, as distor√ß√µes que surgem nele levam ao atrito, que consome a maior parte da energia de comuta√ß√£o.  Tendo sido atormentado com esse mecanismo, finalmente decidi transferir todo o trabalho sujo para o microcontrolador, instalando um bot√£o acima dos pain√©is de press√£o (sensor de toque) em vez de mec√¢nicos complexos. <br><br>  Um pouco de aritm√©tica simples.  O EV3 possui quatro entradas e quatro sa√≠das.  Duas entradas e duas sa√≠das j√° estavam ocupadas por bot√µes e flechas, respectivamente.  Adicionando a este circuito um motor que gira a roda da corrente e dois bot√µes, significava que, primeiro, eu n√£o tinha portas livres para conectar o sensor de posi√ß√£o do cuco (pensei em usar um medidor de dist√¢ncia √≥ptico para esse fim) e, em segundo lugar, que os n√≥s restantes (cuco e p√™ndulo) t√™m apenas um motor.  Eu considerei a op√ß√£o em que os dois pain√©is acima dos pesos estariam conectados a um bot√£o comum, mas o recusava, porque se no momento de ligar o rel√≥gio um dos pesos estivesse na posi√ß√£o superior, segurando o bot√£o, o rel√≥gio n√£o teria informa√ß√µes suficientes para selecionar dire√ß√£o do movimento da corrente. <br><br>  Como o p√™ndulo era mais f√°cil de associar com o mecanismo de movimento da corrente do que com o cuco (tanto em termos de natureza do movimento quanto da localiza√ß√£o), coloquei outro grande motor na parte inferior do corpo, que primeiro aciona o p√™ndulo para frente e para tr√°s (1 revolu√ß√£o do motor traduz-se em um balan√ßo completo do p√™ndulo) e, em segundo lugar - atrav√©s de uma engrenagem de redu√ß√£o gira a roda, que aciona a corrente.  Esse sistema tem a desvantagem de que, ao reverter a dire√ß√£o do movimento da corrente e, consequentemente, a rota√ß√£o do motor, o p√™ndulo tamb√©m muda a dire√ß√£o do movimento, mesmo que esteja em uma posi√ß√£o intermedi√°ria, o que pode parecer feio.  No entanto, mudar a dire√ß√£o do movimento dos pesos √© uma opera√ß√£o bastante rara, por isso negligenciei esse problema.  Outra desvantagem da minha montagem √© o jogo bastante substitu√≠vel no acionamento do p√™ndulo, e √© por isso que, quando se move lentamente, o p√™ndulo para em um ponto mais baixo por uma fra√ß√£o de segundo para um olho percept√≠vel.  Eu estava com pregui√ßa de resolver esse problema. <br><br>  Falando da velocidade do p√™ndulo.  Depois de experimentar, escolhi um valor de 30 graus do motor por segundo.  Isso significa que o p√™ndulo oscila completamente em 12 segundos.  Isso √© muito, no entanto, com o aumento da velocidade, o motor come√ßou a uivar, e a perspectiva de ouvir continuamente sua m√∫sica n√£o sorri para mim.  Era muito pregui√ßoso para percorrer o mecanismo e introduzir um overdrive, ent√£o decidi por um formato t√£o "lunar".  As rela√ß√µes de transmiss√£o entre o motor e a roda motriz da corrente s√£o tais que o peso passa da posi√ß√£o inferior para a superior em 40-50 minutos. <br><br>  Permanecendo livre ap√≥s todas as manipula√ß√µes anteriores, a porta EV3 ocupava o motor do meio (motor m√©dio), que aciona o cuco.  O pr√≥prio cuco √© montado a partir de partes das mesmas t√©cnicas de Lego.  Em altura, o p√°ssaro chega a 11 unidades e √© colocado em uma barra retr√°til (nestes, no guindaste de caminh√£o mencionado acima, foram colocadas paradas remotas).  Um mecanismo em miniatura introduz uma transmiss√£o entre as asas do p√°ssaro e sua cauda, ‚Äã‚Äãatrav√©s da qual joguei um cabo fixo dentro do rel√≥gio.  O comprimento do cabo √© escolhido de forma que o cuco saia completamente com as asas abaixadas e apenas no final do movimento os afaste levemente.  Acabou atmosf√©rico - apenas no n√≠vel de mecaniza√ß√£o de modelos simples de rel√≥gios.  A aus√™ncia de um sensor de posi√ß√£o √© compensada pelo fato de o acionamento do cuco ser ligado pela engrenagem deslizante - ajuda a n√£o danificar o motor, mesmo que tente mover o cuco para al√©m dos pontos de limite.  As portas est√£o bem conectadas √† prancha na qual o p√°ssaro est√° fixo e abrem simultaneamente com a partida do pr√≥prio cuco. <br><br>  Inicialmente, usei 11 por 5 para pain√©is de 1 unidade como portas, mas isso acabou sendo uma p√©ssima id√©ia: as bordas n√£o eram arredondadas e as portas, agarradas √†s partes adjacentes, muitas vezes bloqueadas, deixando o cuco dentro.  O v√≠deo mostra a segunda vers√£o do conjunto da porta - guarni√ß√µes comuns com bordas arredondadas n√£o causam esse problema.  Al√©m disso, a vers√£o ‚Äúprancha‚Äù da porta se abre e fecha muito mais silenciosamente. <br><br>  O rel√≥gio √© montado em uma pulseira presa √† parede.  Toda a estrutura pesa mais de um quilograma. <br><br>  Sobre isso, a descri√ß√£o da parte mec√¢nica, em princ√≠pio, termina.  Resta apenas mencionar que o modelo √© 100% montado a partir de Lego Mindstorms e Lego Technics, e a √∫nica parte que n√£o se aplica a esses kits √© o cabo de alimenta√ß√£o, que soldei no meu EV3, para que eu n√£o tivesse que trocar as baterias o tempo todo.  Esse fio vai para a fonte de alimenta√ß√£o conectada √† tomada. <br><br><h2>  O programa </h2><br>  O assembly ev3dev fornece binders para muitas linguagens de programa√ß√£o.  Para n√£o ter dificuldades com a montagem, decidi me limitar a um script Python.  Este script est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no reposit√≥rio GitLab</a> .  Abaixo irei brevemente sobre sua funcionalidade. <br><br>  O c√≥digo que move as setas √© relativamente simples - recalcula os minutos e as horas nos graus de rota√ß√£o dos motores usando dados sobre o n√∫mero de graus do motor por rota√ß√£o da seta e o deslocamento inicial da seta da posi√ß√£o vertical.  Toda a divers√£o come√ßa quando o programa tenta obter esses dados. <br><br>  Como eu j√° disse, foi decidido abandonar a conex√£o manual do atirador.  Em vez disso, na inicializa√ß√£o, o rel√≥gio executa a calibra√ß√£o determinando os par√¢metros geom√©tricos.  A calibra√ß√£o √© realizada para as duas m√£os, independentemente uma da outra. <br><br>  O algoritmo de calibra√ß√£o √© o seguinte.  Primeiro, o motor come√ßa a girar a uma velocidade relativamente alta (eu uso um valor emp√≠rico de 180 graus por segundo) at√© que um sinal de confirma√ß√£o seja emitido pelo bot√£o que fixa a posi√ß√£o superior da seta.  Depois disso, o mecanismo redefine a velocidade para 30 graus por segundo e continua a girar a seta no sentido hor√°rio (a dire√ß√£o de rota√ß√£o do motor √© costurada no programa) at√© que seja separada do ponto da √∫ltima abertura do bot√£o em 70 graus.  Depois disso, a seta passa pela posi√ß√£o superior na dire√ß√£o oposta, fixando o primeiro fechamento e a √∫ltima abertura dos contatos (o bot√£o pode chocalhar nas posi√ß√µes das bordas).  Afastando-se da √∫ltima abertura pelos mesmos 70 graus, a seta muda novamente a dire√ß√£o do movimento para a linha reta, e o procedimento para registrar o primeiro circuito e o √∫ltimo circuito √© repetido. <br><br>  Acredita-se que a posi√ß√£o superior da seta corresponda √† m√©dia aritm√©tica entre os quatro valores assim obtidos.  A pr√°tica mostra que essa aproxima√ß√£o √© bastante boa - o desvio da posi√ß√£o de destino do ponteiro dos minutos do atual raramente √© superior a 1 passo e quase nunca excede dois passos.  (O v√≠deo mostra desvios mais significativos devido ao fato de que, com o objetivo de fotografar, traduzi a hora do sistema e os ponteiros se moveram mais r√°pido do que durante a opera√ß√£o normal, aumentando o erro de corre√ß√£o a cada rota√ß√£o, veja abaixo.) Para uma dire√ß√£o hor√°ria, a folga consome precis√£o, mas o algoritmo, √© claro, usa o mesmo. <br><br>  Ap√≥s calcular a posi√ß√£o superior da seta e a diferen√ßa entre a primeira liga√ß√£o do sensor e a posi√ß√£o superior da seta (esse valor ser√° necess√°rio para corre√ß√£o, veja abaixo), o algoritmo de calibra√ß√£o aumenta novamente a velocidade do motor para 180 graus por segundo e repete a busca pela posi√ß√£o superior.  A diferen√ßa entre duas posi√ß√µes superiores consecutivas determina o comprimento de uma volta completa da seta em unidades de rota√ß√£o do motor.  O procedimento de busca da posi√ß√£o superior √© repetido cinco vezes, o que permite calcular a m√©dia dos valores obtidos e aumentar ligeiramente a precis√£o. <br><br>  Ap√≥s a calibra√ß√£o, os ponteiros entram no modo de exibi√ß√£o da hora atual.  Al√©m disso, em cada c√≠rculo da seta, o algoritmo fixa a posi√ß√£o em que o disjuntor primeiro foi fechado.  A diferen√ßa entre os √¢ngulos de rota√ß√£o reais e esperados do motor neste momento √© a quantidade de corre√ß√£o;  Portanto, mesmo que o comprimento total do c√≠rculo n√£o tenha sido calculado corretamente no est√°gio de calibra√ß√£o (a sa√≠da de depura√ß√£o mostra que o desvio raramente excede 1 grau), a corre√ß√£o em cada c√≠rculo n√£o permite que a seta se desloque devido ao ac√∫mulo de erros. <br><br>  Observe que a √∫nica informa√ß√£o sobre a propor√ß√£o do motor e a flecha, explicitamente costurada no programa, √© a dire√ß√£o da rota√ß√£o do motor (para frente ou para tr√°s) correspondente ao movimento para frente da seta.  Gra√ßas aos sensores de posi√ß√£o, a necessidade de dados sobre a rela√ß√£o de marchas e a posi√ß√£o inicial da seta desaparece.  Assim, se voc√™ coletar um rel√≥gio para o qual, al√©m da hora e do minuto, tamb√©m ser√° apresentado um ponteiro dos segundos, o algoritmo permitir√° que voc√™ o utilize adicionando apenas algumas linhas, sem perder tempo contando os dentes. <br><br>  O que est√° faltando no programa de movimenta√ß√£o de flechas √© a prote√ß√£o contra estouro ou perda de precis√£o.  N√£o investiguei a quest√£o do que aconteceria anteriormente: a profundidade do bit do √¢ngulo de rota√ß√£o do motor transbordar√° ou as setas come√ßar√£o a mover-se rapidamente devido √† partida da precis√£o nos d√≠gitos mais altos do n√∫mero de ponto flutuante.  No entanto, a pr√°tica mostra que, em per√≠odos da ordem de v√°rias semanas, nada disso acontece.  Se algum dia eu encontrar esse problema, provavelmente adicionarei um comando de redefini√ß√£o do motor em cada volta, com a corre√ß√£o de √¢ngulos correspondente no programa. <br><br>  Se a classe Hand no meu programa √© respons√°vel pelo movimento das setas, a classe LedIndication acende e apaga os LEDs no painel frontal do EV3.  Sei que o mesmo efeito pode ser alcan√ßado com uma equipe, mas, inicialmente, esse recurso foi projetado para rastrear falhas no programa e permaneceu.  N√£o h√° nada mais interessante nesta classe. <br><br>  A classe P√™ndulo √© respons√°vel pelo movimento de pesos e um p√™ndulo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O algoritmo simplesmente liga o motor em uma dire√ß√£o e gira a uma velocidade constante at√© que o bot√£o correspondente ao levantamento completo desse peso seja apertado; depois disso, a dire√ß√£o do movimento do motor √© invertida. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nesta classe, a prop√≥sito, √© apresentada prote√ß√£o contra falhas do programa, que consiste no fato de o mecanismo ser ligado por apenas 2 segundos com um per√≠odo de atualiza√ß√£o de comando de 1 segundo. Se eu ligasse o motor no modo de rota√ß√£o constante, quando o programa travasse, o bot√£o continuaria subindo, o que poderia levar √† sobrecarga do motor, ao desgaste das engrenagens ou at√© a danos ao mecanismo. A prote√ß√£o permite evitar esse problema.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por fim, a classe Cuckoo executa o cuco toda vez que um valor de 59 minutos √© substitu√≠do por um valor de 0 minutos. Primeiro, o cuco √© empurrado at√© o fim, depois o cuco uma vez, reproduzindo o som pelo alto-falante EV3 e, em seguida, novamente se escondendo na caixa do rel√≥gio. O movimento √© repetido de acordo com a hora atual - de 1 a 12 vezes. O som foi retirado da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca FreeSound gratuita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e editado para ter um som melhor no EV3. (N√£o posso dizer que fiquei satisfeito com o resultado, porque o baixo √© quase inaud√≠vel quando o martelo √© atingido na primavera.)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O atraso entre o comando de remo√ß√£o do cuco e o comando de reprodu√ß√£o do som √© selecionado experimentalmente, para que o som seja ouvido aproximadamente no momento em que o cuco atinge sua posi√ß√£o extrema. No entanto, o ev3dev tem um pequeno problema com isso: devido ao carregamento do sistema, o som fica periodicamente atrasado, especialmente se houver uma conex√£o SSH com o rel√≥gio naquele momento. O atraso pode demorar v√°rios segundos. N√£o tenho certeza se isso √© um problema com meu controlador, a compila√ß√£o em si ou as atualiza√ß√µes recebidas da rede (depois de instalar o ev3dev, eu costumava usar o comando apt get upgrade, embora provavelmente n√£o devesse ter feito isso), mas, em m√©dia, o cuco parece normal, ent√£o N√£o vou depurar esta pergunta.</font></font><br><br>   , ,         ,        :          ,   ¬´¬ª,   ¬´¬ª     .     ,               . <br><br>     ,      .     . <br><br>   ,    ,       .        ‚Äî           ,     ,         . <br><br>    ,    .       ,    ,   ,  .       ,         Skype,   . <br><br>          Debian.  ,   ,      .     ‚Äî   EV3  WiFi-.  ,   ,  ,  , ,       . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>    BSD.            ,    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417255/">https://habr.com/ru/post/pt417255/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417243/index.html">Instale o 3CX SBC Session Edge Controller no Windows, Raspberry Pi ou Debian 9</a></li>
<li><a href="../pt417245/index.html">Erlang para IoT</a></li>
<li><a href="../pt417247/index.html">VSCE # 1: Podcast de empreendedores de m√≠dia</a></li>
<li><a href="../pt417249/index.html">C√¢mara de Auditoria dos EUA alerta: SpaceX e Boeing est√£o aguardando novos atrasos, √© poss√≠vel a interrup√ß√£o dos EUA nos v√¥os para a ISS</a></li>
<li><a href="../pt417251/index.html">Usando o olho de peixe no Raspberry Pi 3 com ROS - Parte 1</a></li>
<li><a href="../pt417257/index.html">Ponteiros C como um paradoxo lingu√≠stico</a></li>
<li><a href="../pt417263/index.html">JavaScript como a personifica√ß√£o do mal</a></li>
<li><a href="../pt417265/index.html">Top 10: os melhores relat√≥rios do DotNext 2017 Moscow</a></li>
<li><a href="../pt417269/index.html">Onde procurar um designer: pr√™mios internacionais de prest√≠gio</a></li>
<li><a href="../pt417271/index.html">Um hacker pode bloquear o canal em ingl√™s?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>