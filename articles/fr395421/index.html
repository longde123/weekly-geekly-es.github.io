<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš â˜ğŸ» ğŸ‘ğŸ» RelevÃ© des compteurs sur le canal GSM ğŸ™‡ğŸ¾ ğŸ¥ â›½ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TÃ¢che: interroger selon le planning le doseur d'Ã©lectricitÃ© Ã  l'aide d'un modem GSM. 
 
 Je n'ai pas choisi le fer, il a Ã©tÃ© choisi avant moi, et j'ai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RelevÃ© des compteurs sur le canal GSM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395421/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TÃ¢che: interroger selon le planning le doseur d'Ã©lectricitÃ© Ã  l'aide d'un modem GSM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas choisi le fer, il a Ã©tÃ© choisi avant moi, et j'ai pu crÃ©er un systÃ¨me de vote Ã  distance Ã  partir de cela. Ainsi, la source d'informations sur le gaspillage d'Ã©lectricitÃ© Ã©tait le Diris A40 fabriquÃ© par Socomec (ci-aprÃ¨s dÃ©nommÃ© le compteur). </font></font><br>
<br>
<img src="http://savepic.ru/10209758.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'appareil sait mesurer beaucoup de choses, j'ai arrÃªtÃ© de lire des centaines de registres, Ã  partir de l'adresse dÃ©cimale 1792 Ã  1891. En tant qu'interface, je n'ai pas non plus sÃ©lectionnÃ© de matÃ©riel: le module de communication de la passerelle RS485 utilisant le protocole JBUS / MODBUSÂ®. Protocole de type Modbus avec mention dans la numÃ©rotation des registres.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les modems GSM Siemens sont des MC35i (ci-aprÃ¨s simplement appelÃ©s modems). Les voici: il </font></font><br>
 <br>
<img src="http://savepic.ru/10205662.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y a beaucoup d'articles Ã  leur sujet, il est facile de trouver de la documentation. Il est contrÃ´lÃ© par les Ã©quipes AT. N'est plus disponible. Il a Ã©tÃ© remplacÃ© par le terminal Cinterion MC52iT. Vous pouvez toujours l'acheter. Alimentation et antenne incluses. Pour convertir RS232 en RS485, ce matÃ©riel gÃ©nÃ©ralement bon marchÃ© a Ã©tÃ© choisi. Elle fait son boulot. </font></font><br>
<br>
<img src="http://savepic.ru/10194398.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le schÃ©ma structurel du systÃ¨me conÃ§u se prÃ©sentera comme suit: </font></font><br>
<br>
<img src="http://savepic.ru/10197470.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
j'ai nommÃ© un cÃ¢ble en </font><font style="vertical-align: inherit;">tant que </font><font style="vertical-align: inherit;">cÃ¢ble direct, oÃ¹ toutes les broches correspondent les unes aux autres au dÃ©but et Ã  la fin. Par exemple, la broche 2 est connectÃ©e Ã  la broche 2. J'ai appelÃ© le cÃ¢ble un cÃ¢ble croisÃ©, oÃ¹ la broche 2 est connectÃ©e Ã  la broche 3 et la broche 3 est connectÃ©e Ã  la broche 2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'interrogation, il Ã©tait censÃ© utiliser MasterOPC Universal Modbus Server, qui vit</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c'est gratuit si vous ne souhaitez pas interroger plus de 32 tags (certains disent "tags", j'aime plus "tags"). Son charme est qu'il a des paramÃ¨tres qui vous permettent d'utiliser un modem pour l'interrogation. Un tel deux en un. C'est le seul programme que j'ai trouvÃ© avec de telles fonctionnalitÃ©s. Par exemple, je n'ai pas trouvÃ© de telles opportunitÃ©s dans ibaPDA. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã‰chec du serveur Modbus universel MasterOPC. Au contraire, il s'est avÃ©rÃ© Ãªtre Ã  moitiÃ©: lorsqu'il est connectÃ© au compteur par fil - tout va bien, lorsqu'il est connectÃ© via un modem, les paquets reÃ§us pour une raison quelconque (pour moi, il y a encore un mystÃ¨re, qui sait - Ã©crire) ressemblent Ã  ceci: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demande: 13/05/2016 14 : 12: 56.408 Notebook :: DirisA40 (adr5) :( COM5) Tx: [0008] 05 03 07 0A 00 01 A4 F8</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RÃ©ponse: 13-05-2016 14: 12: 56.401 Notebook :: DirisA40 (adr5) :( COM5) Rx: [0013] F1 EB FF FD B7 00 05 03 02 13 86 C5 16 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir dans la rÃ©ponse, les informations nÃ©cessaires sont lÃ  : 05 03 02 13 86 C5 16. Il est Ã©galement clair qu'il existe Ã©galement un Ã©tranger: F1 EB FF FD B7 00. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peu importe, vous pouvez utiliser l'analyseur pour dÃ©crypter les paquets. Par exemple, j'utilise CAS_Modbus_RTU_Parser. C'est gratuit et c'est super. Il existe Ã©galement des analyseurs en ligne. Par exemple: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://modbus.rapidscada.net/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne savais pas comment me dÃ©barrasser de ces "ordures", alors j'ai Ã©crit un programme sur LabView (peut-Ãªtre serait-il plus correct de dire "peint"). Il coupe les bits inutiles du paquet reÃ§u, puis dÃ©chiffre le paquet Modbus. Quel est ce LabView que vous pouvez lire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En gÃ©nÃ©ral, sur Habrahabr, Ã  ma grande surprise, beaucoup d'articles sur LabView ont Ã©tÃ© trouvÃ©s. Le rÃ©sultat est une telle interface: le </font></font><br>
<br>
<img src="http://savepic.ru/10173918.jpg" alt="image"><br>
<br>
<img src="http://savepic.ru/10170846.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
texte d'aide est le suivant. Le programme est destinÃ© Ã  l'interrogation des compteurs DirisA40. Avant d'exÃ©cuter le fichier exÃ©cutable, vous devez installer le moteur d'exÃ©cution LabVIEW (une fois). Le programme peut fonctionner en deux modes: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) interrogation directe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) interrogation via un modem </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mode d'interrogation par dÃ©faut: interrogation de 100 registres Ã  partir du registre 1792. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Format de donnÃ©es des registres de mots. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'adresse Modbus par dÃ©faut est 5. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interrogation directe dÃ©marre en appuyant sur le bouton START.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interrogation via le modem est programmÃ©e (par dÃ©faut 5 minutes) et commence aprÃ¨s avoir appuyÃ© sur les boutons "START" et "Save". Le calendrier de l'enquÃªte ne doit pas Ãªtre infÃ©rieur Ã  1 minute et supÃ©rieur Ã  60 minutes. A l'Ã©tat enfoncÃ©, le bouton Â«STARTÂ» est signÃ© comme Â«Survey in progressÂ». Ã€ l'Ã©tat enfoncÃ©, le bouton Â«EnregistrerÂ» est signÃ© comme Â«Enregistrement en coursÂ».</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La case Ã  cocher Â«Prendre en compte les facteurs de conversionÂ» est conÃ§ue pour mettre Ã  l'Ã©chelle la valeur lue du registre selon la formule X * Factor + Offset. Les valeurs de Factor et Offset sont enregistrÃ©es dans les colonnes du mÃªme tableau du tableau de configuration et de la sÃ©lection des registres pour l'Ã©criture. L'Ã©criture a lieu dans un fichier texte dans le mÃªme rÃ©pertoire oÃ¹ se trouve le fichier exÃ©cutable du format suivant - date heure data.txt (Par exemple: 21/05/2016 22_12 data.txt). Si l'enregistrement a Ã©tÃ© effectuÃ© Ã  l'aide d'un modem, le nom du fichier de donnÃ©es ressemblera Ã  ceci: 06/08/2016 9_47 data__modem.txt. La premiÃ¨re fois que vous essayez d'Ã©crire un fichier, vous pouvez modifier le nom du fichier. L'enregistrement se fait dans le mÃªme fichier jusqu'Ã  ce que le bouton Â«Enregistrement en coursÂ» soit enfoncÃ©. Les registres dont les cases Ã  cocher sont cochÃ©es dans le tableau des paramÃ¨tres sont Ã©crits dans le fichier. Vous pouvez modifier l'Ã©tat de la case Ã  cocher dans le tableau des paramÃ¨tres en double-cliquant.Les valeurs de registre reÃ§ues sont affichÃ©es dans le tableau des paramÃ¨tres avec la colonne "Valeur". Dans l'onglet Â«GraphiquesÂ», vous pouvez configurer l'affichage de n'importe quelle valeur de registre Ã  partir du tableau des paramÃ¨tres. La couleur de la courbe du graphique correspond Ã  la couleur du cadre autour de la balise sÃ©lectionnÃ©e. Les balises qui doivent Ãªtre dÃ©sactivÃ©es de la gÃ©nÃ©ration doivent Ãªtre placÃ©es en position Â«enregistrerÂ» ou tout autre registre avec une valeur de 0. L'interface Web de l'appareil est publiÃ©e _http: // nomordinateur: 8000 / DirisA40.html et n'est accessible que via l'explorateur si LabVIEW Run-Time est installÃ© Moteurvous devez le mettre en position Â«enregistrerÂ» ou tout autre registre avec une valeur de 0. L'interface Web de l'appareil est publiÃ©e _http: // nomordinateur: 8000 / DirisA40.html et n'est accessible que via l'explorateur si LabVIEW Run-Time Engine est installÃ©.vous devez le mettre en position Â«enregistrerÂ» ou tout autre registre avec une valeur de 0. L'interface Web de l'appareil est publiÃ©e _http: // nomordinateur: 8000 / DirisA40.html et n'est accessible que via l'explorateur si LabVIEW Run-Time Engine est installÃ©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le processus d'Ã©criture / dessin, les programmes auxiliaires suivants ont Ã©tÃ© utilisÃ©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour Ã©muler le fonctionnement du compteur, le programme gratuit DevEmu a Ã©tÃ© utilisÃ©. </font><font style="vertical-align: inherit;">Je l'ai dÃ©couverte sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog d'Alexei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui a bien dÃ©crit son travail et sa candidature. </font><font style="vertical-align: inherit;">Merci beaucoup Ã  lui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour Ã©muler la connexion avec le compteur, des versions d'essai de divers programmes appelÃ©s Serial Port Splitter ont Ã©tÃ© utilisÃ©es. </font><font style="vertical-align: inherit;">Ils sont trÃ¨s diffÃ©rents, la pÃ©riode d'essai de deux de ces rÃ©partiteurs m'a suffi pour Ã©crire le programme ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Pendant que j'Ã©crivais cet opus, apparemment un collÃ¨gue, j'ai Ã©crit un article sur le mÃªme sujet: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru/post/277358</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr395421/">https://habr.com/ru/post/fr395421/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr395409/index.html">Le nouveau vaisseau spatial Shepard est lancÃ© avec succÃ¨s et a atterri pour la quatriÃ¨me fois</a></li>
<li><a href="../fr395411/index.html">Personne n'a cliquÃ© sur 6 des 10 liens sur Twitter (les retweets Ã  la place)</a></li>
<li><a href="../fr395415/index.html">The 3DO Company et 3DO Interactive Multiplayer (Panasonic et plus)</a></li>
<li><a href="../fr395417/index.html">Combien d'informations peuvent Ãªtre transmises via le ventilateur du processeur</a></li>
<li><a href="../fr395419/index.html">Demandez Ã  Ethan n Â° 61: jusqu'oÃ¹ va la gravitÃ©?</a></li>
<li><a href="../fr395423/index.html">HÃ©risson - oiseau qui parle [si avec un lecteur MP3]</a></li>
<li><a href="../fr395425/index.html">La NASA a annoncÃ© l'avion Ã©lectrique X-57 Maxwell</a></li>
<li><a href="../fr395427/index.html">Effondrement de la crypto-monnaie Ethereum et avenir douteux des organisations dÃ©centralisÃ©es</a></li>
<li><a href="../fr395429/index.html">Civilization V sera utilisÃ© pour l'enseignement dans les Ã©coles</a></li>
<li><a href="../fr395431/index.html">Juin Webinaires gratuits de MediaTek Labs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>