<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ†” ğŸ“š ğŸ‘¨ğŸ¾ Kami mengontrol perangkat Android ğŸ‘©ğŸ¿â€ğŸš€ ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ§¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ini adalah upaya ketiga untuk membuat rumah teman pintar dengan android, izinkan saya mengingatkan Anda bahwa upaya pertama untuk mengontrol perangkat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami mengontrol perangkat Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/iobroker/blog/443908/"><img src="https://habrastorage.org/webt/6f/v8/iv/6fv8ivfvowy3babfxb85nxj-xxe.jpeg"><br><br>  Ini adalah upaya ketiga untuk membuat rumah teman pintar dengan android, izinkan saya mengingatkan Anda bahwa upaya pertama untuk mengontrol perangkat android melalui HTTP menggunakan aplikasi Server Server.  Aplikasi ini diizinkan menggunakan bahasa BeanShell untuk menanamkan kode Anda di halaman xhtml dan berinteraksi dengannya, menerima data atau mengelolanya.  Untuk berintegrasi dengan server rumah pintar ( <b>ioBroker</b> ), driver ditulis, tetapi untuk konfigurasi pertamanya, perlu memuat skrip secara manual.  Selanjutnya, melalui driver, skrip diperbarui, yang memungkinkan penambahan fungsi baru dan memperbaiki kesalahan, tetapi juga memberlakukan sejumlah pembatasan dalam upaya untuk menjauh dari metode yang ditetapkan dalam Paw Server untuk mengimplementasikan fungsi baru. <br><a name="habracut"></a><br>  Upaya kedua adalah membangun aplikasi Anda berdasarkan sumber dari server Paw.  Tujuan utamanya adalah menyederhanakan proses konfigurasi untuk pengguna, serta menambahkan fitur baru yang tidak dapat diimplementasikan di versi sebelumnya. <br><br>  Dalam versi yang sama, diputuskan untuk sepenuhnya meninggalkan server Paw dan menulis ulang aplikasi dan driver untuk ioBroker.  Tambahkan metode koneksi baru, selain HTTP yang ada, juga MQTT.  Tambahkan lebih banyak pengaturan untuk memilih acara, baik dari sistem itu sendiri maupun dari sensor bawaan.  Tentu saja, hal pertama aplikasi akan dioptimalkan untuk ioBroker, tetapi tanpa banyak kesulitan dapat diintegrasikan ke dalam sistem lain. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Google play</a> <br><br>  Aplikasi ini memungkinkan Anda untuk: <br><br><ol><li>  Dapatkan status pengaturan sistem (kecerahan lampu latar, status layar, volume, baterai, dll.) </li><li>  Terima data dari panggilan masuk, pengenalan ucapan </li><li>  Terima data dari sensor bawaan. </li><li>  Dapatkan koordinat lokasi. </li><li>  Dapatkan daftar aplikasi yang terinstal dan luncurkan. </li><li>  Kelola pengaturan sistem (kecerahan cahaya latar, level volume, dll.) </li><li>  Lakukan panggilan. </li><li>  Buat pemberitahuan dan kotak dialog. </li><li>  Kirim teks ke sintesis pidato. </li><li>  Berinteraksi dengan Tasker. </li><li>  Kirim file ke perangkat (hanya HTTP). </li></ol><br><h3>  Penampilan </h3><br><img src="https://habrastorage.org/webt/gy/cx/ex/gycxexy0qyrznfyah-ypsno_r3i.jpeg"><br><br>  Tampilan aplikasi tidak final dan dapat bervariasi.  Saya ingin mengubah atau menambah banyak, tapi itu saja waktu. <br><br>  Dengan navigasi melalui aplikasi, saya pikir, seharusnya tidak ada kesulitan.  Pada peluncuran pertama, aplikasi secara singkat menginformasikan tentang perubahan saat ini di versi baru dan menyarankan menggunakan "asisten".  Dengan masuk ke pengaturan aplikasi, Anda dapat mengubah parameter operasi dasar, pilih jenis koneksi, pilih peristiwa yang akan dikirim ke server, dan juga memungkinkan atau menolak akses ke beberapa data (buku telepon, pesan, daftar panggilan dan foto). <br><br>  Di layar utama Anda dapat melihat "ubin", sementara ini adalah versi percobaan, tetapi seiring waktu saya berencana untuk memperluas kemampuan mereka.  Dari "ubin" yang tersedia, saat ini, ada: tombol, redup, waktu, daftar, warna, informasi.  Tugas utama ubin adalah untuk mengirim atau menerima data (perintah) dari server atau mengelola perangkat lain.  Meskipun tidak ada gambaran keseluruhan tentang bagaimana semuanya harus bekerja, saya sekarang tidak akan menggambarkan semua nuansa. <br><br><h2>  Koneksi </h2><br>  Sekarang tentang koneksi dan perintah kontrol, aplikasi memiliki dua opsi koneksi melalui HTTP dan MQTT.  Setiap metode memiliki kelebihan dan kekurangan, metode koneksi mana yang Anda pilih. <br><br><h3>  HTTP </h3><br>  Metode ini melibatkan koneksi melalui Wi-Fi ke jaringan lokal.  Aplikasi "memunculkan" server webnya (alamat IP dan porta dapat dilihat di notifikasi saat menghubungkan) dan memberikan akses untuk mengelolanya.  Ini dapat dilakukan baik secara langsung (melalui browser), atau dalam integrasi dengan server UD, melalui permintaan POST atau GET. <br><br> <a href=""><img src="https://habrastorage.org/webt/ju/qx/2l/juqx2lazbiw_mxp7h_iumx0eqii.jpeg"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/sm/bz/r7/smbzr7jrjuac4nxapcoly6nnc3q.jpeg"></a> <br><br>  Respons dari permintaan akan dikembalikan dalam format JSON, nama perangkat, alamat ip, dan status perintah dikirim dalam badan respons.  Beberapa permintaan memanggil "panggilan balik" tambahan, misalnya, saat mengirim teks ke sintesis ucapan, aplikasi akan mengirimkan permintaan ke server tentang awal berbicara teks dan penyelesaiannya.  Dengan cara yang sama, aplikasi mentransmisikan data tentang peristiwa dan pembacaan sensor bawaan ke server.  Oleh karena itu, untuk pekerjaan penuh, diperlukan bahwa server UD dapat memprosesnya. <br><br><h3>  MQTT </h3><br>  Protokol MQTT cukup populer dan didukung oleh berbagai sistem DD, ini membuatnya mudah untuk mengintegrasikan aplikasi ke dalamnya.  Saat memilih metode koneksi ini, Anda dapat menggunakan broker MQTT lokal dan eksternal. <br><br>  Saat menghubungkan ke broker MQTT, cabang utama <b>/ PAW / dibuat</b> , diikuti oleh nama perangkat (masing-masing perangkat harus memiliki sendiri), yang pada gilirannya dibagi menjadi dua cabang dari topik <b>/ info /</b> dan <b>/ comm /</b> , Anda dapat menebak dari nama yang Cabang info (informasi) menerbitkan semua informasi yang masuk dari perangkat, dan cabang comm (perintah) berisi topik untuk mengelolanya.  Ini dilakukan untuk kejelasan, agar lebih memahami topik mana yang bertanggung jawab untuk apa. <br><br><img src="https://habrastorage.org/webt/ww/9m/bz/ww9mbzkeo7e6fvhfouogaxjisag.jpeg"><br><br>  Juga di cabang utama ada <b>/ all_devices /</b> di cabang ini ada topik di mana semua perangkat berlangganan, yang memungkinkan Anda untuk mengelola semua perangkat sekaligus. <br><br>  Untuk universalitas, dalam topik-topik nilai-nilai yang dapat benar (benar) atau salah (salah), mereka dapat mengambil nilai yang berbeda, yaitu, <i>1, aktif, otomatis, benar</i> adalah nilai benar, dan <i>0, off, false, manual</i> salah .  Fitur lain dari aplikasi adalah untuk memeriksa eksekusi perintah, jika eksekusi berhasil, nilai kosong diterbitkan dalam topik yang sama.  Dan jika nilai setelah publikasi belum hilang, ini menunjukkan bahwa kesalahan terjadi saat menjalankan perintah atau nilai tidak cocok dengan yang benar untuk topik ini.  Misalnya, ketika mengubah level volume, jika nilainya tidak sesuai dengan angka atau melampaui maksimum, untuk jenis level volume tertentu, itu akan mengembalikan kesalahan. <br><br>  Juga dalam versi ini, serangkaian perintah untuk pemberitahuan dan "dialog" diperluas, memungkinkan Anda untuk menampilkan informasi yang lebih rinci, serta berinteraksi dengan pengguna jika perangkat digunakan sebagai informan.  Ketika membangunnya, sejumlah besar parameter diperlukan, oleh karena itu, perlu untuk mempublikasikan nilai dalam format JSON dalam topik yang sesuai. <br><br>  Untuk topik notifikasi <b>/ comm / notification / create</b> (di bawah ini adalah contoh nilai) <br><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"noti"</span></span>:<span class="hljs-string"><span class="hljs-string">"Any text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">"Title 2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"info"</span></span>:<span class="hljs-string"><span class="hljs-string">"Any text"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"vibrate"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sound"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"light"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> }</code> </pre> <br>  Untuk topik "dialog" <b>/ comm / notification / alert</b> .  Respons dari "dialog" hadir dalam format JSON dan diterbitkan dalam topik <b>/ info / waspada / respons</b> <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"alert"</span></span>:<span class="hljs-string"><span class="hljs-string">"Turn the lights off?"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">"Light"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"negative"</span></span>:<span class="hljs-string"><span class="hljs-string">"No"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"positive"</span></span>:<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"neutral"</span></span>:<span class="hljs-string"><span class="hljs-string">"Neutral"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sound"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> }</code> </pre> <br><h3>  Integrasi IoBroker </h3><br><img src="https://habrastorage.org/webt/x5/hs/po/x5hspolcbtsbwbcypdkkj9pry6c.jpeg"><br><br>  Menanamkan dalam aplikasi kemampuan untuk bekerja melalui protokol MQTT, saya hanya ingin menyederhanakan integrasi dengan sistem dan menghilangkan penulisan driver terpisah.  Tetapi beberapa fungsi tidak dapat diimplementasikan melalui protokol MQTT, dan untuk alasan ini seorang pengemudi tidak dapat ditiadakan. <br><br>  Struktur objek driver mirip dengan struktur MQTT, dan juga dibagi menjadi dua cabang <b>/ info /</b> dan <b>/ comm /</b> , ia memiliki perintah yang sama untuk mengelola dan reaksi yang sama untuk data yang salah.  Saya tidak akan menjelaskan pengaturan driver dan operasi di sini, semua informasi saat ini akan diperbarui di <a href="">GitHub</a> . <br><br><h3>  Catatan </h3><br>  Sedangkan untuk mengelola pengaturan sistem (mengendalikan kecerahan cahaya latar, bangun dari tidur, dll.), Perangkat yang berbeda akan merespons secara berbeda, atau tidak, terhadap perintah.  Karena berbagai perangkat, versi SDK, firmware, sulit untuk menetapkan satu model perilaku per perintah.  Di sini Anda perlu memilih tindakan sesuai dengan perangkat Anda, misalnya, bagi sebagian besar perangkat untuk mematikan layar (mengirimnya ke mode tidur), itu cukup untuk mengubah batas waktu lampu latar, tetapi pada beberapa perangkat ini tidak akan berfungsi.  Situasi yang sama dengan pengaturan sistem lainnya, untuk sebagian besar perangkat, perubahan akan segera terjadi, tetapi bagi yang lain perlu mengirim perangkat ke mode tidur dan kemudian membangunkannya agar perubahan tersebut berlaku.  Masalah terkecil seperti ini muncul dengan SDK 19 (Android 4.4), tetapi itu tidak akurat.) Juga, jangan lupa bahwa ada dukungan untuk Tasker, dan jika Anda tidak memiliki fungsi, Anda dapat menambahkannya dan berinteraksi melalui aplikasi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443908/">https://habr.com/ru/post/id443908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443898/index.html">Paku di sampul peti mati Runet</a></li>
<li><a href="../id443900/index.html">Bagaimana kami mengukur kualitas dan efektivitas pengembangan dokumentasi. Latar belakang dan dasar-dasar. Laporan Yandex</a></li>
<li><a href="../id443902/index.html">Bagaimana kami memenangkan hackathon internal dengan mempelajari skibidi, flossing, dan javascript</a></li>
<li><a href="../id443904/index.html">Apa yang harus dilakukan jika tidak ada cukup batu untuk membuat robot?</a></li>
<li><a href="../id443906/index.html">Pemanen analitik video: apa yang otak dan mesin lakukan dengan wajah kita</a></li>
<li><a href="../id443910/index.html">Konsep pemrograman awal</a></li>
<li><a href="../id443912/index.html">BigData buatan rumah. Bagian 1. Praktek Spark Streaming pada gugus AWS</a></li>
<li><a href="../id443914/index.html">Bagaimana kami melakukan SCRUM</a></li>
<li><a href="../id443916/index.html">Kementerian Kebudayaan dan pembuat film mengusulkan untuk membuat sistem negara untuk merekam pemirsa di Internet</a></li>
<li><a href="../id443918/index.html">Dua game saku minimalis baru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>