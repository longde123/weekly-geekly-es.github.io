<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐พโโ๏ธ ๐คผ ๐ป ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุฃู ุฃูู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุงุทูุงู ุงููุงุฑ ุนูู ููุณู ูู ุงููุฏู ๐คฒ๐ป โ๏ธ ๐ฉ๐ฟโ๐คโ๐ฉ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ุณุฃุญุงูู ูู ูุฐู ุงูููุงูุฉ ูุนุฑูุฉ ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ูู ุงูุจุฑุงูุฌ / ุงูุชุทุจููุงุช ูู ูุฌูุฉ ูุธุฑ ูุจุฑูุฌ ุงูุชุทุจูู. ูุฐุง ููุณ ุฏูููุงู ุฃู ุฏูููุงู ุดุงููุงู ุ ูููู ุจุจุณุงุท...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุฃู ุฃูู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุงุทูุงู ุงููุงุฑ ุนูู ููุณู ูู ุงููุฏู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473294/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ!  ุณุฃุญุงูู ูู ูุฐู ุงูููุงูุฉ ูุนุฑูุฉ ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ูู ุงูุจุฑุงูุฌ / ุงูุชุทุจููุงุช ูู ูุฌูุฉ ูุธุฑ ูุจุฑูุฌ ุงูุชุทุจูู.  ูุฐุง ููุณ ุฏูููุงู ุฃู ุฏูููุงู ุดุงููุงู ุ ูููู ุจุจุณุงุทุฉ ููุญุฉ ุนุงูุฉ ุนู ุงููุดููุงุช ุงูุญุงููุฉ ูุจุนุถ ุงูุทุฑู ูุญููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ูุฐุง ุถุฑูุฑูุ  ุงูุจุฑูุงูุฌ ุนุจุงุฑุฉ ุนู ุณูุณูุฉ ูู ุฅุฑุดุงุฏุงุช ูุนุงูุฌุฉ ุงูุจูุงูุงุช (ูู ุงูุญุงูุฉ ุงูุนุงูุฉ).  ูุฌุจ <strong>ุชุฎุฒูู</strong> ูุฐู ุงูุจูุงูุงุช <strong>ูุชุญููููุง</strong> <strong>ูููููุง</strong> ููุง ุฅูู ุฐูู ุจุทุฑููุฉ ูุง.  ูุง ุชุญุฏุซ ุฌููุน ูุฐู ุงูุนูููุงุช ุนูู ุงูููุฑ ุ ูุจุงูุชุงูู ุ ููู ุชุคุซุฑ ุจุดูู ูุจุงุดุฑ ุนูู ุณุฑุนุฉ ุงูุชุทุจูู ุงูููุงุฆู.  ุณุชุชูุญ ูู ุงููุฏุฑุฉ ุนูู ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุนูู ุงููุญู ุงูุฃูุซู ูู ุนูููุฉ ุงูุนูู ุฅูุดุงุก ุจุฑุงูุฌ ุบูุฑ ุชุงููุฉ ููุบุงูุฉ ูุชุชุทูุจ ููุงุฑุฏ ูุจูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูุชู ุชูุฏูู ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุงูููุงุฏ ูุน ุฃูุซูุฉ ูู ูุญุฑูุงุช ุงูุฃูุนุงุจ / ุงูุฃูุนุงุจ (ูุธุฑูุง ูุฃู ูุฐุง ุงูููุถูุน ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุจุงููุณุจุฉ ูู ุดุฎุตููุง) ุ ููุน ุฐูู ุ ูููู ุชุทุจูู ูุนุธู ุงูููุงุฏ ุนูู ุฎูุงุฏู ุงููุชุงุจุฉ ูุชุทุจููุงุช ุงููุณุชุฎุฏู ูุญุฒู ุงูุฑุณููุงุช ุ ุฅูุฎ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f13/ef3/482/f13ef3482dfe066b41b53e44179a0242.jpg"></p><br><p style=";text-align:right;direction:rtl">  <em>ูู ุงููุณุชุญูู ุฃู ุชุถุน ูู ุดูุก ูู ุงูุงุนุชุจุงุฑ.</em>  <em>ูููู ุฅุฐุง ูู ุชุชููู ูู ุชุญูููู ุ ูุณุชุญุตู ุนูู ุงูุตุงุจูู</em> </p><a name="habracut"></a><br><h1 id="s-mesta-v-karer" style=";text-align:right;direction:rtl">  ุงูุญู ูุจุงูุฉ ุงูุฎูุงููุด </h1><br><p style=";text-align:right;direction:rtl">  ููุฏ ุญุฏุซ ูู ูุฐู ุงูุตูุงุนุฉ ุฃู ูุดุงุฑูุน ุฃูุนุงุจ AAA ุงููุจูุฑุฉ ูุชู ุชุทููุฑูุง ุจุดูู ุฃุณุงุณู ุนูู ูุญุฑูุงุช ููุชูุจุฉ ุจุงุณุชุฎุฏุงู C ++.  ุฅุญุฏู ููุฒุงุช ูุฐู ุงููุบุฉ ูู ุงูุญุงุฌุฉ ุฅูู ุงูุฅุฏุงุฑุฉ ุงููุฏููุฉ ููุฐุงูุฑุฉ.  ุฌุงูุง / ุฌูู # ุงูุฎ  ูุชุจุงููู ุจุฌูุน ุงูุจูุงูุงุช ุงูููููุฉ (GarbageCollection / GC) - ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ูุงุฆูุงุช ููุน ุฐูู ูุง ูุชู ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ ูุฏูููุง.  ุชุนูู ูุฐู ุงูุนูููุฉ ุนูู ุชุจุณูุท ุนูููุฉ ุงูุชุทููุฑ ูุชุณุฑูุนูุง ุ ูููููุง ูุฏ ุชุณุจุจ ุฃูุถูุง ุจุนุถ ุงููุดููุงุช: ูููู ููุฌูุน ูุฌูุนุงุช ุงูุจูุงูุงุช ุงูููููุฉ ุจุดูู ุฏูุฑู ุฃู ููุชู ูู ุงูููุช ุงููุนูู ููุถูู ุชุฌููุฏูุง ุบูุฑ ุณุงุฑู ุฅูู ุงููุนุจุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุนู ุ ูู ูุดุงุฑูุน ูุซู "Minecraft" ุ ูุฏ ูุง ูููู GC ููุญูุธูุง  ุจุดูู ุนุงู ูุง ูุทูุจูู ููุงุฑุฏ ุฌูุงุฒ ุงูููุจููุชุฑ ุ ูููู ุงูุฃูุนุงุจ ูุซู "Red Dead Redemption 2" ู "God of War" ู "Last of Us" ุชุนูู "ุชูุฑูุจูุง" ูู ุฐุฑูุฉ ุฃุฏุงุก ุงููุธุงู ูุจุงูุชุงูู ูุง ุชุญุชุงุฌ ููุท ุฅูู ุญุฌู ูุจูุฑ ูููุฉ ุงูููุงุฑุฏ ุ ูููู ุฃูุถุง ูู ุชูุฒูุน ุงููุฎุชุตุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุจูุฆุฉ ุฐุงุช ุชุฎุตูุต ุชููุงุฆู ููุฐุงูุฑุฉ ูุฌูุน ุงูุจูุงูุงุช ุงูููููุฉ ุ ูุฏ ุชูุงุฌู ููุตูุง ูู ุงููุฑููุฉ ูู ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ.  ููุณ ุณุฑุงู ุฃู Java ุชุฎูู ูู ุชูุงุตูู ุงูุชูููุฐ ูุฌูุงูุจ ุนูููุง ุชุญุช ุงูุบุทุงุก ุ ูุฐูู ูู ุงููุฎุฑุฌุงุช ูุฏูู ููุท ุงููุงุฌูุฉ ุงููุซุจุชุฉ ููุชูุงุนู ูุน ููุงุฑุฏ ุงููุธุงู ุ ูููู ูุฏ ูุง ูููู ุฐูู ูุงููุงู ูุญู ุจุนุถ ุงููุดุงูู.  ุนูู ุณุจูู ุงููุซุงู ุ ูุคุฏู ุจุฏุก ุงูุฎูุงุฑุฒููุฉ ุจุนุฏุฏ ุบูุฑ ุซุงุจุช ูู ุชุฎุตูุตุงุช ุงูุฐุงูุฑุฉ ูู ูู ุฅุทุงุฑ (ูููู ุฃู ูููู ูุฐุง ุงูุจุญุซ ุนู ูุณุงุฑุงุช ูู AI ุ ูุงูุชุญูู ูู ุงูุฑุคูุฉ ุ ูุงูุฑุณูู ุงููุชุญุฑูุฉ ุ ููุง ุฅูู ุฐูู) ูุคุฏู ุญุชูุง ุฅูู ุงูุฎูุงุถ ูุงุฑุซู ูู โโุงูุฃุฏุงุก. </p><br><h1 id="kak-vyglyadyat-allokacii-v-kode" style=";text-align:right;direction:rtl">  ููู ุชุจุฏู ุงูุชุฎุตูุตุงุช ูู ุงูููุฏ </h1><br><p style=";text-align:right;direction:rtl">  ูุจู ูุชุงุจุนุฉ ุงูููุงูุดุฉ ุ ุฃูุฏ ุฃู ุฃูุถุญ ููู ูุญุฏุซ ุงูุนูู ูุน ุงูุฐุงูุฑุฉ ูู C / C ++ ูุจุงุดุฑุฉู ูุน ุจุถุนุฉ ุฃูุซูุฉ.  ุจุดูู ุนุงู ุ ูุชู ุชูุซูู ุงููุงุฌูุฉ ุงูููุงุณูุฉ ูุงูุฃุจุณุท ูุชุฎุตูุต ุฐุงูุฑุฉ ุงูุนูููุฉ ุจุงูุนูููุงุช ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">//        size  void* malloc(size_t size); //      p void free(void* p);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ููุง ุฅุถุงูุฉ ูุธุงุฆู ุฅุถุงููุฉ ุชุณูุญ ูู ุจุชุฎุตูุต ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ูุญุงุฐู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// C11  -     , * alignment void* aligned_alloc(size_t size, size_t alignment); // Posix  -       //        address (*address = allocated_mem_p) int posix_memalign(void** address, size_t alignment, size_t size);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ ุฃู ุงูููุตุงุช ุงููุฎุชููุฉ ูุฏ ุชุฏุนู ูุนุงููุฑ ูุธุงุฆู ูุฎุชููุฉ ุ ูุชููุฑุฉ ุนูู ุณุจูู ุงููุซุงู ุนูู ูุธุงู ูุงููุชูุด ูุบูุฑ ูุชููุฑุฉ ูู ุญุงูุฉ ููุฒ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุธุฑูุง ุฅูู ุงูุฃูุงู ุ ููุฏ ุชุญุชุงุฌ ุฅูู ูุณุงุญุงุช ุฐุงูุฑุฉ ุฎุงุตุฉ ูุฏ ุชุญุชุงุฌูุง ูููุตูู ุฅูู ุฎุทูุท ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุนุงูุฌ ูููุญุณุงุจุงุช ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ููุณุนุฉ ูู ุงูุณุฌูุงุช ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SSE</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MMX</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AVX</a> ุ ุฅูุฎ). </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู ุนูู ุจุฑูุงูุฌ ูุนุจุฉ ูุฎุตุต ุงูุฐุงูุฑุฉ ููุทุจุน ููู ุงููุฎุฒู ุงููุคูุช ุ ูุชูุณูุฑูุง ุนูู ุฃููุง ุฃุนุฏุงุฏ ุตุญูุญุฉ ูููุนุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/* main.cpp */ #include &lt;cstdio&gt; #include &lt;cstdlib&gt; int main(int argc, char** argv) { const int N = 10; int* buffer = (int*) malloc(sizeof(int) * N); for(int i = 0; i &lt; N; i++) { printf("%i ", buffer[i]); } free(buffer); return 0; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู ูุธุงู ุงูุชุดุบูู MacOS 10.14 ุ ูููู ุจูุงุก ูุฐุง ุงูุจุฑูุงูุฌ ูุชุดุบููู ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ุงูุฃูุงูุฑ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ clang++ main.cpp -o main $ ./main</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูููุง ููู ุ ูุง ุฃุฑูุฏ ุญููุง ุชุบุทูุฉ ุนูููุงุช C ++ ูุซู ุงูุฌุฏูุฏ / ุงูุญุฐู ุ ุญูุซ ูู ุงููุฑุฌุญ ุฃู ุชุณุชุฎุฏู ูุจูุงุก / ุชุฏููุฑ ุงููุงุฆูุงุช ูุจุงุดุฑุฉ ุ ููููุง ุชุณุชุฎุฏู ุงูุนูููุงุช ุงููุนุชุงุฏุฉ ูุน ุฐุงูุฑุฉ ูุซู malloc / free. </p><br><h1 id="problemy-s-pamyatyu" style=";text-align:right;direction:rtl">  ูุดุงูู ุงูุฐุงูุฑุฉ </h1><br><p style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงููุดููุงุช ุงูุชู ุชูุดุฃ ุนูุฏ ุงูุนูู ูุน ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููููุจููุชุฑ.  ุฌููุนูุง ุ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุง ุชูุชุฌ ููุท ุนู ููุฒุงุช ูุธุงู ุงูุชุดุบูู ูุงูุจุฑุงูุฌ ุ ูููู ุฃูุถูุง ุจุณุจุจ ุจููุฉ ุงูุญุฏูุฏ ุงูุชู ุชุนูู ุนูููุง ูู ูุฐู ุงูุฃุดูุงุก. </p><br><h3 id="1-kolichestvo-pamyati" style=";text-align:right;direction:rtl">  1. ููุฏุงุฑ ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ุ ุงูุฐุงูุฑุฉ ูุญุฏูุฏุฉ ุฌุณุฏูุง.  ุนูู PlayStation 4 ุ ูุฐุง ูู 8 GiB GDDR5 ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.5 GiB ุงูุฐู ูุญุชูุธ ูุธุงู ุงูุชุดุบูู ุจุงุญุชูุงุฌุงุชู</a> .  ูู ุชุณุงุนุฏ ุงูุฐุงูุฑุฉ ุงูุงูุชุฑุงุถูุฉ ููุจุงุฏูุฉ ุงูุตูุญุงุช ูุซูุฑูุง ุ ูุฃู ุชุจุฏูู ุงูุตูุญุงุช ุฅูู ุงููุฑุต ูุนุฏ ุนูููุฉ ุจุทูุฆุฉ ุฌุฏูุง (ุฏุงุฎู ุฅุทุงุฑุงุช N ุซุงุจุชุฉ ูู ุงูุซุงููุฉ ุ ุฅุฐุง ุชุญุฏุซูุง ุนู ุงูุฃูุนุงุจ). </p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู " <em>ุงูููุฒุงููุฉ</em> " ุงููุญุฏูุฏุฉ - ุจุนุถ ุงููููุฏ ุงููุตุทูุนุฉ ุนูู ููุฏุงุฑ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ ุ ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุฃุฌู ุชุดุบูู ุงูุชุทุจูู ุนูู ุงูุนุฏูุฏ ูู ุงูููุตุงุช.  ุฅุฐุง ููุช ุชููู ุจุฅูุดุงุก ูุนุจุฉ ูููุตุฉ ูุชูููุฉ ูุชุฑุบุจ ูู ุฏุนู ููุณ ููุท ูุงุญุฏุฉ ุ ูููู ุฃูุถูุง ูุฌููุนุฉ ูุงููุฉ ูู ุงูุฃุฌูุฒุฉ ุ ูุณูู ูุชุนูู ุนููู ุงูุญุฏ ูู ุดููุชู ูู ุฃุฌู ุชูููุฑ ุณูู ูุจูุนุงุช ุฃูุณุน.  ูููู ุชุญููู ุฐูู ูู ุฎูุงู ุงูุญุฏ ูู ุงุณุชููุงู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (RAM) ุ ูุงููุฏุฑุฉ ุนูู ุชูููู ูุฐุง ุงูุชูููุฏ ุงุนุชูุงุฏูุง ุนูู ุงูุฃุฏุงุฉ ุงูุชู ุชุจุฏุฃ ุงููุนุจุฉ ูุนูููุง. </p><br><h3 id="2-fragmentaciya" style=";text-align:right;direction:rtl">  2. ุชุฌุฒุฆุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุชุฃุซูุฑ ุบูุฑ ุณุงุฑุฉ ูุธูุฑ ุฃุซูุงุก ุนูููุฉ ุชุฎุตูุตุงุช ูุชุนุฏุฏุฉ ููุทุน ุงูุฐุงูุฑุฉ ูู ูุฎุชูู ุงูุฃุญุฌุงู.  ูุชูุฌุฉ ูุฐูู ุ ุชุญุตู ุนูู ูุณุงุญุฉ ุนููุงู ูุฌุฒุฃุฉ ูู ุงูุนุฏูุฏ ูู ุงูุฃุฌุฒุงุก ุงููููุตูุฉ.  ูู ูุนูู ุฏูุฌ ูุฐู ุงูุฃุฌุฒุงุก ูู ูุชู ููุฑุฏุฉ ุฐุงุช ุญุฌู ุฃูุจุฑ ุ ูุฃู ุฌุฒุกูุง ูู ุงูุฐุงูุฑุฉ ูุดุบูู ุ ููุง ูููููุง ุชุญุฑููู ุจุญุฑูุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/8f/un/ie/8funiekbmroqz6xqhdpsyrpovcs.png"><br>  ุชุฌุฒุฆุฉ ุจูุงุณุทุฉ ูุซุงู ุนูููุงุช ุชุฎุตูุต ูุชุณูุณูุฉ ูุฅุตุฏุงุฑุงุช ูุชู ุงูุฐุงูุฑุฉ </p><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู: ูููู ุฃู ูููู ูุฏููุง ุฐุงูุฑุฉ ุญุฑุฉ ูุงููุฉ ุ ูููู ููุณ ููุนููุง.  ูุงูุทูุจ ุงูุชุงูู ุ ุนูู ุณุจูู ุงููุซุงู ุ "ุชุฎุตูุต ูุณุงุญุฉ ูููุณุงุฑ ุงูุตูุชู" ุ ูู ูุชููู ุงูููุฎุตุต ูู ุงูุฅุฑุถุงุก ุ ูุฃูู ุจุจุณุงุทุฉ ูุง ุชูุฌุฏ ุฐุงูุฑุฉ ูุงุญุฏุฉ ุจูุฐุง ุงูุญุฌู. </p><br><h3 id="3-kesh-processora" style=";text-align:right;direction:rtl">  3. ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ </h3><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e9d/592/5e5/e9d5925e5a0fc9629656ead20ce91b36.png"><br>  ุงูุชุณูุณู ุงููุฑูู ูุฐุงูุฑุฉ ุงูููุจููุชุฑ </p><br><p style=";text-align:right;direction:rtl">  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุนุงูุฌ ุงูุญุฏูุซ ุนุจุงุฑุฉ ุนู ุฑุงุจุท ูุณูุท ูุฑุจุท ุงูุฐุงูุฑุฉ ุงูุฑุฆูุณูุฉ (RAM) ููููู ุงููุนุงูุฌ ุจุชุณุฌูููุง ูุจุงุดุฑุฉ.  ููุฏ ุญุฏุซ ุฃู ูุตูู ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ ุฅูู ุงูุฐุงูุฑุฉ ูู ุนูููุฉ ุจุทูุฆุฉ ุฌุฏูุง (ุฅุฐุง ุชุญุฏุซูุง ุนู ุนุฏุฏ ุฏูุฑุงุช ุณุงุนุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ุงููุทููุจุฉ ููุชูููุฐ).  ูุฐูู ุ ููุงู ุจุนุถ ุงูุชุณูุณู ุงููุฑูู ููุชุฎุฒูู ุงููุคูุช (L1 ุ L2 ุ L3 ุ ููุง ุฅูู ุฐูู) ุ ูุงูุฐู ูุณูุญ ุ ููุง ูุงู ุ "ูุชุญููู ุจุนุถ ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู" ุ ุฃู ุฏูุนูุง ุจุจุทุก ุฅูู ุฐุงูุฑุฉ ุฃุจุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ูุณูุญ ูู ูุถุน ูุงุฆูุงุช ูู ููุณ ุงูููุน ูู ุตู ูู ุงูุฐุงูุฑุฉ ุจุชุณุฑูุน ุนูููุฉ ูุนุงูุฌุชูุง (ุจุดูู ููุญูุธ) (ูู ุญุงูุฉ ุญุฏูุซ ุงููุนุงูุฌุฉ ุจุงูุชุณูุณู) ุ ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ูููู ูู ุงูุณูู ุงูุชูุจุค ุจุงูุจูุงูุงุช ุงููุทููุจุฉ ุจุนุฏ ุฐูู.  ููุนูู "ูุจูุฑ" ููุงุณุจ ุงูุฅูุชุงุฌูุฉ ูู ุจุนุถ ุงูุฃุญูุงู.  ููุฏ ุชุญุฏุซ ูุทูุฑู ูุญุฑู Unity ูุฑุงุฑูุง ูุชูุฑุงุฑูุง ุญูู ูุฐุง ุงูุฃูุฑ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุงุฑูุฑูู ูู GDC</a> . </p><br><h3 id="4-multi-threading" style=";text-align:right;direction:rtl">  4. ููุถูุน ุฎููุท </h3><br><p style=";text-align:right;direction:rtl">  <strong>ูุนุฏ ุชูููุฑ ูุตูู ุขูู ุฅูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ูู ุจูุฆุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท</strong> ุฅุญุฏู ุงููุดููุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ุณูุชุนูู ุนููู ุญููุง ุนูุฏ ุฅูุดุงุก ูุญุฑู / ูุนุจุฉ / ุฃู ุชุทุจูู ุขุฎุฑ ูุณุชุฎุฏู ูุคุดุฑุงุช ุชุฑุงุจุท ูุชุนุฏุฏุฉ ูุชุญููู ุฃุฏุงุก ุฃูุถู.  ูุชู ุชุฑุชูุจ ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุญุฏูุซุฉ ุจุทุฑููุฉ ุบูุฑ ุชุงููุฉ ููุบุงูุฉ.  ูุฏููุง ูู ูู ุจููุฉ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุนูุฏุฉ ูุงูุนุฏูุฏ ูู ุงูููู ุงูุญุงุณุจุฉ.  ูู ูุฐุง ุ ุฅุฐุง ุชู ุงุณุชุฎุฏุงูู ุจุดูู ุบูุฑ ุตุญูุญ ุ ูููู ุฃู ูุคุฏู ุฅูู ููุงูู ุนูุฏูุง ุชุชุถุฑุฑ ุงูุจูุงูุงุช ุงููุดุชุฑูุฉ ุงูุฎุงุตุฉ ุจุงูุนูููุฉ ูุชูุฌุฉ ููุนุฏูุฏ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท (ุฅุฐุง ุญุงูููุง ูู ููุช ูุงุญุฏ ุงูุนูู ูุน ูุฐู ุงูุจูุงูุงุช ุฏูู ุงูุชุญูู ูู ุงููุตูู).  ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ุณูุจุฏู ููุง ููู: <br><img src="https://habrastorage.org/webt/sl/dm/2y/sldm2ybotnk9ncozwf5rkgozifw.png"><br>  ูุง ุฃุฑูุฏ ุงูุฎูุถ ูู ููุถูุน ุงูุจุฑูุฌุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท ุ ุญูุซ ุฃู ุงูุนุฏูุฏ ูู ุฌูุงูุจูุง ุชุชุฌุงูุฒ ูุทุงู ุงูููุงูุฉ ุฃู ุญุชู ุงููุชุงุจ ุจุฃูููู. </p><br><h3 id="5-mallocfree" style=";text-align:right;direction:rtl">  5. Malloc / ูุฌุงูุง </h3><br><p style=";text-align:right;direction:rtl">  ุนูููุงุช ุงูุชุฎุตูุต / ุงูุฅุทูุงู ูุง ุชุญุฏุซ ุนูู ุงูููุฑ.  ูู ุฃูุธูุฉ ุงูุชุดุบูู ุงูุญุฏูุซุฉ ุ ุฅุฐุง ููุง ูุชุญุฏุซ ุนู Windows / Linux / MacOS ุ ูุชู ุชูููุฐูุง ุฌูุฏูุง ูุชุนูู <em>ุจุณุฑุนุฉ ูู ูุนุธู ุงูุญุงูุงุช</em> .  ููู ูู ุงููุญุชูู ุฃู ูุฐู ุนูููุฉ ุชุณุชุบุฑู ููุชูุง ุทูููุงู ููุบุงูุฉ.  ูุง ููุชุตุฑ ุงูุฃูุฑ ุนูู ุฅุฌุฑุงุก ููุงููุฉ ุงููุธุงู ูุฐู ุ ูููู ุงุนุชูุงุฏูุง ุนูู ุงูุชุทุจูู ุ ูุฏ ูุณุชุบุฑู ุงูุฃูุฑ ุจุนุถ ุงูููุช ููุนุซูุฑ ุนูู ูุทุนุฉ ุฐุงูุฑุฉ ููุงุณุจุฉ (First Fit ุฃู Best fit ุฃู ูุง ุฅูู ุฐูู) ุฃู ููุนุซูุฑ ุนูู ููุงู ูุฅุฏุฑุงุฌ ู / ุฃู ุฏูุฌ ุงูููุทูุฉ ุงููุญุฑุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏ ูุง ูุชู ุจุงููุนู ุชุนููู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ุญุฏูุซูุง ุนูู ุงูุตูุญุงุช ุงููุนููุฉ ุงูุญููููุฉ ุ ูุงูุชู ูุฏ ุชุณุชุบุฑู ุฃูุถูุง ุจุนุถ ุงูููุช ุนูุฏ ุงููุตูู ุงูุฃูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ูู ุชูุงุตูู ุงูุชูููุฐ ุ ูููู ูุงุฐุง ุนู ูุงุจููุฉ ุงูุชุทุจููุ  ููุณ ูุฏู Malloc / new ุฃู ููุฑุฉ ุนู ุงูููุงู ุฃู ููู ุฃู ููุงุฐุง ุงุชุตูุช ุจูู.  ูุฎุตุตูู ุงูุฐุงูุฑุฉ (ูู ุฃุณูุฃ ุงูุญุงูุงุช) 1 ููููุจุงูุช ู 100 ููุบุง ุจุงูุช ุนูู ูุฏู ุงููุณุงูุงุฉ ... ุณูุฆุฉ ุนูู ุญุฏ ุณูุงุก.  ูุจุงุดุฑุฉ ุ ูุชู ุชุฑู ุงุณุชุฑุงุชูุฌูุฉ ุงูุงุณุชุฎุฏุงู ุฅูุง ูููุจุฑูุฌ ุฃู ุงูุดุฎุต ุงูุฐู ูุงู ุจุชูููุฐ ููุช ุชุดุบูู ุงูุจุฑูุงูุฌ. </p><br><h3 id="6-memory-corruption" style=";text-align:right;direction:rtl">  6. ุชูู ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง ุชููู ุงููููู</a> ุ ูุฐุง ูุงุญุฏ ูู ุฃูุซุฑ ุงูุฃุฎุทุงุก ุงูุชู ูุง ูููู ุงูุชูุจุค ุจูุง ูุงูุชู ุชุธูุฑ ููุท ุฃุซูุงุก ุณูุฑ ุงูุจุฑูุงูุฌ ุ ูุบุงูุจูุง ูุง ูููู ุณุจุจูุง ูุจุงุดุฑูุง ุฃุฎุทุงุก ูู ูุชุงุจุฉ ูุฐุง ุงูุจุฑูุงูุฌ.  ููู ูุง ูุฐู ุงููุดููุฉุ  ูุญุณู ุงูุญุธ (ุฃู ูุณูุก ุงูุญุธ) ุ ูุง ูุฑุชุจุท ุจูุณุงุฏ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู.  ุจุฏูุงู ูู ุฐูู ุ ูุฅูู ูุนุฑุถ ูููููุง ุชุญุงูู ููู ุงุณุชุฎุฏุงู ุฐุงูุฑุฉ <em>ูุง ุชุฎุตู</em> .  ุณุฃุดุฑุญ ุงูุขู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏ ุชููู ูุฐู ูุญุงููุฉ ูููุฑุงุกุฉ / ุงููุชุงุจุฉ ุฅูู ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุฎุตุตุฉ. </li><li style=";text-align:right;direction:rtl">  ุชุฌุงูุฒ ุญุฏูุฏ ูุชูุฉ ุงูุฐุงูุฑุฉ ุงูููุฏูุฉ ูู.  ูุฐู ุงููุดููุฉ ูู ููุน ูู ุงูุญุงูุงุช ุงูุฎุงุตุฉ ูููุดููุฉ (1) ุ ููููุง ุฃุณูุฃ ูุฃู ุงููุธุงู ุณูุฎุจุฑู ุจุฃูู ุชุฌุงูุฒุช ุงูุญุฏูุฏ ููุท ุนูุฏูุง ุชุชุฑู ุงูุตูุญุฉ ูุนุฑูุถุฉ ูู.  ูุฐุง ูู ุ ูู ุงููุญุชูู ุ ุฃู ุชููู ูุฐู ุงููุดููุฉ ุตุนุจุฉ ููุบุงูุฉ ุ ูุฃู ูุธุงู ุงูุชุดุบูู ูุงุฏุฑ ุนูู ุงูุงุณุชุฌุงุจุฉ ููุท ุฅุฐุง ุชุฑูุช ุญุฏูุฏ ุงูุตูุญุงุช ุงูุงูุชุฑุงุถูุฉ ูุนุฑูุถุฉ ูู.  ููููู ุฅูุณุงุฏ ุฐุงูุฑุฉ ุงูุนูููุฉ ูุงูุญุตูู ุนูู ุฎุทุฃ ุบุฑูุจ ุฌุฏูุง ูู ุงูููุงู ุงูุฐู ูู ููู ูุชููุนูุง ููู ุนูู ุงูุฅุทูุงู. </li><li style=";text-align:right;direction:rtl">  ุชุญุฑูุฑ ุฐุงูุฑุฉ ุชู ุชุญุฑูุฑูุง ุจุงููุนู (ุชุจุฏู ุบุฑูุจุฉ) ุฃู ูู ูุชู ุชุฎุตูุตูุง ุจุนุฏ </li><li style=";text-align:right;direction:rtl">  ุฅูุฎ </li></ol><br><p style=";text-align:right;direction:rtl">  ูู C / C ++ ุ ุญูุซ ููุฌุฏ ุญุณุงุจ ูุคุดุฑ ุ ุณูู ุชุตุงุฏู ูุฐุง ูุงุญุฏ ุฃู ูุฑุชูู.  ููุน ุฐูู ุ ูู Java Runtime ุ ูุฌุจ ุนููู ุงูุชุนุฑู ุจุดุฏุฉ ููุญุตูู ุนูู ูุฐุง ุงูููุน ูู ุงูุฃุฎุทุงุก (ูู ุฃุญุงูู ุฐูู ุจููุณู ุ ููููู ุฃุนุชูุฏ ุฃู ูุฐุง ูููู ุ ูุฅูุง ุณุชููู ุงูุญูุงุฉ ุจุณูุทุฉ ููุบุงูุฉ). </p><br><h3 id="7-utechki-pamyati" style=";text-align:right;direction:rtl">  7. ุชุณุฑุจ ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุฅููุง ุญุงูุฉ ุฎุงุตุฉ ููุดููุฉ ุฃูุซุฑ ุนููููุฉ ุชุญุฏุซ ูู ุงูุนุฏูุฏ ูู ูุบุงุช ุงูุจุฑูุฌุฉ.  ุชููุฑ ููุชุจุฉ C / C ++ ุงูููุงุณูุฉ ุงููุตูู ุฅูู ููุงุฑุฏ ูุธุงู ุงูุชุดุบูู.  ูููู ุฃู ูููู ูููุงุช ุ ูุขุฎุฐ ุ ุฐุงูุฑุฉ ุ ุฅูุฎ.  ุจุนุฏ ุงูุงุณุชุฎุฏุงู ุ ูุฌุจ ุฅุบูุงู ุงูููุฑุฏ ุจุดูู ุตุญูุญ ู <br>  ูุฌุจ ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุงูุชู ูุญุชููุง.  ูุฅุฐุง ุชุญุฏุซูุง ุจุงูุชุญุฏูุฏ ุนู ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ - ููุฏ ุชุคุฏู ุงูุชุณุฑูุจุงุช ุงููุชุฑุงููุฉ ูุชูุฌุฉ ุงูุจุฑูุงูุฌ ุฅูู ุญุฏูุซ ุฎุทุฃ "ููุงุฏ ุงูุฐุงูุฑุฉ" ุนูุฏูุง ูุชุนุฐุฑ ุนูู ูุธุงู ุงูุชุดุบูู ุชูุจูุฉ ุงูุทูุจ ุงูุชุงูู ููุชุฎุตูุต.  ุบุงูุจูุง ูุง ููุณู ุงููุทูุฑ ุจุจุณุงุทุฉ ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ ูุณุจุจ ุฃู ูุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฏูุฑ ุฅุถุงูุฉ ุญูู ุงูุฅุบูุงู ุงูุตุญูุญ ูุฅุตุฏุงุฑ ุงูููุงุฑุฏ ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณููุงุช ุ ูุฃู ุจุฑุงูุฌ ุงูุชุดุบูู ุงูุฃููู ูู ุชุณูุญ ุจุงุณุชุฆูุงู ุงูุนูู ูุน ุจุทุงูุฉ ุงูููุฏูู ุฅุฐุง ูู ุชูู ุงูุฌูุณุฉ ุงูุณุงุจูุฉ ูุฏ ุงูุชููุช ุจุดูู ุตุญูุญ.  ูููู ููุท ูุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู ุญู ูุฐู ุงููุดููุฉ ุ ููู ุฃูุฑ ูุดููู ููู ููุบุงูุฉ - ูุฅุฌุจุงุฑ ุงููุณุชุฎุฏู ุนูู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู ุจุนุฏ ุชุดุบูู ุงูุชุทุจูู ุงูุฎุงุต ุจู. </p><br><h3 id="8-dangling-pointer" style=";text-align:right;direction:rtl">  8. ูุคุดุฑ ุงูุชุนูู </h3><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><strong>ูุคุดุฑ ุงูุชุนูู</strong></a> ูู ุจุนุถ ุงููุตุทูุญุงุช ุงูุชู ุชุตู ูููููุง ูุดูุฑ ููู ุงููุคุดุฑ ุฅูู ูููุฉ ุบูุฑ ุตุงูุญุฉ.  ูููู ุฃู ุชูุดุฃ ุญุงูุฉ ููุงุซูุฉ ุจุณูููุฉ ุนูุฏ ุงุณุชุฎุฏุงู ูุคุดุฑุงุช ุงูููุท ุงูููุงุณููู C ูู ุจุฑูุงูุฌ C / C ++.  ุงูุชุฑุถ ุฃูู ููุช ุจุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุญูุธุช ุงูุนููุงู ูู ูุคุดุฑ p ุ ุซู ุญุฑุฑ ุงูุฐุงูุฑุฉ (ุงูุธุฑ ูุซุงู ุงูููุฏ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//   void* p = malloc(size); // ...  -    //   free(p); //    p? // *p == ?</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฎุฒู ุงููุคุดุฑ ุจุนุถ ุงููููุฉ ุ ูุงูุชู ูููููุง ุชูุณูุฑูุง ูุนููุงู ูุชูุฉ ุงูุฐุงูุฑุฉ.  ููุฏ ุญุฏุซ ุฃู ูุง ูููููุง ุงูููู ูุง ุฅุฐุง ูุงูุช ูุชูุฉ ุงูุฐุงูุฑุฉ ูุฐู ุตุงูุญุฉ ุฃู ูุง.  ููุท ุงููุจุฑูุฌ ุ ุจูุงุกู ุนูู ุงุชูุงููุงุช ูุนููุฉ ุ ููููู ุงูุนูู ุจูุคุดุฑ.  ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ C ++ 11 ุ ุชู ุฅุฏุฎุงู ุนุฏุฏ ูู ูุคุดุฑุงุช "ุงููุคุดุฑุงุช ุงูุฐููุฉ" ุงูุฅุถุงููุฉ ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ูุงูุชู ุชุชูุญ ูู ุจุนุถ ุงูููุงุญู ุฅุถุนุงู ุงูุชุญูู ูู ุงูููุงุฑุฏ ุจูุงุณุทุฉ ุงููุจุฑูุฌ ุจุงุณุชุฎุฏุงู ูุนูููุงุช ุชุนุฑูู ุฅุถุงููุฉ ุฏุงุฎู ุฃููุณูู (ุงููุฒูุฏ ุญูู ูุฐุง ูุงุญููุง). </p><br><p style=";text-align:right;direction:rtl">  ูุญู ุฌุฒุฆู ุ ููููู ุงุณุชุฎุฏุงู <em>ุงููููุฉ ุงูุฎุงุตุฉ</em> ูููุคุดุฑ ุ ููุง ุณูุดูุฑูุง ุฅูู ุฃูู ูุง ููุฌุฏ ุดูุก ูู ูุฐุง ุงูุนููุงู.  ูู C ุ ูุชู ุงุณุชุฎุฏุงู ุงููุงูุฑู NULL ููููุฉ ููุฐู ุงููููุฉ ุ ููู C ++ ุ ูุชู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุฃุณุงุณูุฉ ูุบุฉ nullptr.  ุงูุญู ุฌุฒุฆู ูุฃู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุชุนููู ูููุฉ ุงููุคุดุฑ ูุฏูููุง ุ ูุฐูู ูููู ูููุจุฑูุฌ ุฃู ููุณู ุงูููุงู ุจุฐูู. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชุถููู nullptr ุฃู 0x0 ููุท ูู ูุฌููุนุฉ ุงูููู ุงูุชู ููุจููุง ุงููุคุดุฑ ุ ููู ุฃูุฑ ุบูุฑ ุฌูุฏ ุนูุฏูุง ูุชู ุงูุชุนุจูุฑ ุนู ุงูุญุงูุฉ ุงูุฎุงุตุฉ ููุงุฆู ูู ุฎูุงู ุญุงูุชู ุงููุนุชุงุฏุฉ.  ูุฐุง ููุน ูู ุงูุฅุฑุซ ุ ูุจุงูุงุชูุงู ุ ูู ูููู ูุธุงู ุงูุชุดุบูู ุจุชุฎุตูุต ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ูุจุฏุฃ ุนููุงูู ุจู 0x0. </li></ol><br><p style=";text-align:right;direction:rtl">  ุฑูุฒ ุนููุฉ ูุน ูุงุฑุบุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//  -  p free(p); p = nullptr; //   p == nullptr   ,       </code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฃุชูุชุฉ ูุฐู ุงูุนูููุฉ ุฅูู ุญุฏ ูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">void _free(void* &amp;p) { free(p); p = nullptr; } //  -  p _free(p); //   p == nullptr,     //   </code> </pre> <br><h3 id="9-tip-pamyati" style=";text-align:right;direction:rtl">  9. ููุน ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  <strong>ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู</strong> ูู ุฐุงูุฑุฉ ูุตูู ุนุดูุงุฆู ููุฃุบุฑุงุถ ุงูุนุงูุฉ ุนุงุฏูุฉ ุ ูููู ุงููุตูู ุฅูููุง ูู ุฎูุงู ุงููุงูู ุงููุฑูุฒู ูู ุฎูุงู ุฌููุน ูุฑุงูุฒ ุงููุนุงูุฌ ูุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ ุงูุฎุงุตุฉ ุจู.  ูุฎุชูู ุญุฌููุง ุ ููู ูู ุฃุบูุจ ุงูุฃุญูุงู ูุชุญุฏุซ ุนู N ุบูุบุง ุจุงูุช ุ ุญูุซ N ูู 1ุ2ุ4ุ8ุ16 ูููุฐุง.  ุงูููุงููุงุช malloc / free ุชุณุนู ููุถุน ูุชูุฉ ุงูุฐุงูุฑุฉ ุงูุชู ุชุฑูุฏูุง ูุจุงุดุฑุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููููุจููุชุฑ. </p><br><p style=";text-align:right;direction:rtl">  <strong>VRAM</strong> (ุฐุงูุฑุฉ ุงูููุฏูู) - ุฐุงูุฑุฉ ููุฏูู ุ ูุฒูุฏุฉ ุจุจุทุงูุฉ ุงูููุฏูู / ูุณุฑูุน ุงูููุฏูู ุจุฌูุงุฒ ุงูููุจููุชุฑ.  ูููุงุนุฏุฉ ุนุงูุฉ ุ ุฃุตุบุฑ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (ุญูุงูู 1.2.4 ุฌูุฌุง ุจุงูุช) ุ ูููู ูุฏูู ุณุฑุนุฉ ุนุงููุฉ.  ุชุชู ูุนุงูุฌุฉ ุชูุฒูุน ูุฐุง ุงูููุน ูู ุงูุฐุงูุฑุฉ ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุชุดุบูู ุจุทุงูุฉ ุงูููุฏูู ุ ูุบุงูุจูุง ูุง ูุง ูููู ูุฏูู ูุตูู ูุจุงุดุฑ ุฅููู. </p><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ูุซู ูุฐุง ุงููุตู ุนูู PlayStation 4 ุ ูููุซู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู 8 ุบูุบุงุจุงูุช ูุงุญุฏุฉ ุนูู GDDR5.  ูุฐูู ุ ุฌููุน ุงูุจูุงูุงุช ููู ูู ุงููุนุงูุฌ ููุณุฑุน ุงูููุฏูู ูู ููุงู ูุฑูุจ. </p><br><p style=";text-align:right;direction:rtl">  ุชุชุถูู ุงูุฅุฏุงุฑุฉ ุงูุฌูุฏุฉ ููููุงุฑุฏ ูู ูุญุฑู ุงููุนุจุฉ ุชุฎุตูุต ุฐุงูุฑุฉ ูุฎุชุตูุง ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุงูุฑุฆูุณูุฉ ูุนูู ุฌุงูุจ VRAM.  ูุฏ ุชูุงุฌู ููุง <strong>ุงุฒุฏูุงุฌูุฉ</strong> ุนูุฏ ูุฌูุฏ ููุณ ุงูุจูุงูุงุช ููุงู ุ ุฃู ูุน <strong>ููู ููุฑุท</strong> ููุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุฅูู VRAM ูุงูุนูุณ ุจุงูุนูุณ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุชูุถูุญ ูุฌููุน ุงููุดุงูู ุงูุชู ุชู ุงูุชุนุจูุฑ ุนููุง</strong> : ููููู ุฅููุงุก ูุธุฑุฉ ุนูู ุฌูุงูุจ ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุฎุงุตุฉ ุจุงูุฌูุงุฒ ูู ูุซุงู ุจููุฉ PlayStation 4 (ุงูุดูู).  ููุง ูู ุงููุนุงูุฌ ุงููุฑูุฒู ุ ู 8 ูุฑุงูุฒ ุ ููุฎุงุฒู L1 ู L2 ุ ูุญุงููุงุช ุงูุจูุงูุงุช ุ ูุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ููุณุฑุน ุงูุฑุณููุงุช ุ ุฅูุฎ.  ููุญุตูู ุนูู ูุตู ูุงูู ูููุตู ุ ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ููุฏุณุฉ ูุญุฑู ุงููุนุจุฉ"</a> ูุฌุงุณูู ุบุฑูุบูุฑู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c50/7ba/756/c507ba75624a3c9be702f85ddfa50e11.png"><br>  ุจูุงู ุณุชูุดู 4 ุงูุนูุงุฑุฉ </p><br><h1 id="obschie-podhody-k-resheniyu" style=";text-align:right;direction:rtl">  ุงูููุงูุฌ ุงูุนุงูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุญู ุนุงููู.  ูููู ููุงู ูุฌููุนุฉ ูู ุงูููุงุท ุงูุชู ูุฌุจ ุงูุชุฑููุฒ ุนูููุง ุฅุฐุง ููุช ุณุชููุฐ ุชุฎุตูุต ูุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ูุฏูููุง ูู ุชุทุจููู.  ููุดูู ุฐูู ุงูุญุงููุงุช ูุงููุฎุตุตุงุช ุงููุชุฎุตุตุฉ ุ ูุงุณุชุฑุงุชูุฌูุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุชุตููู ุงููุธุงู / ุงููุนุจุฉ ุ ููุฏูุฑู ุงูููุงุฑุฏ ุ ูุฃูุซุฑ ูู ุฐูู. </p><br><h2 id="tipy-allokatorov" style=";text-align:right;direction:rtl">  ุฃููุงุน ุงูููุฒุนูู </h2><br><p style=";text-align:right;direction:rtl">  ูุนุชูุฏ ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุฎุงุตุฉ ุนูู ุงูููุฑุฉ ุงูุชุงููุฉ: ุชุนุฑู ุงูุญุฌู ุ ููุญุธุงุช ุงูุนูู ุ ููู ุฃู ููุงู ุณุชุญุชุงุฌ ุฅูู ุฃุฌุฒุงุก ูู ุงูุฐุงูุฑุฉ.  ูุฐูู ุ ููููู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุงุฒูุฉ ุ ุจุทุฑููุฉ ูุง ุจูุงุฆูุง ูุงุณุชุฎุฏุงููุง / ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง.  ูุฐู ูู ุงูููุฑุฉ / ุงูููููู ุงูุนุงู ูุงุณุชุฎุฏุงู ุงููุฎุตุตุงุช ุงูุฎุงุตุฉ.  ูุง ูู (ุจุงูุทุจุน ุ ููุณ ูู ุดูุก) ูููู ุฑุคูุชู ุฃูุซุฑ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ุงูุฎุทู ุงูุชุฎุตูุต</strong> <br>  ููุซู ุงููุฎุฒู ุงููุคูุช ูุณุงุญุฉ ุงูุนููุงู ูุชุฌุงูุฑุฉ.  ูู ุณูุงู ุงูุนูู ุ ูุณูุญ ูู ุจุชุฎุตูุต ุฃูุณุงู ูู ุงูุฐุงูุฑุฉ ุฐุงุช ุงูุญุฌู ุงูุชุนุณูู (ุจุญูุซ ุชูุงุณุจูุง ูู ูุฎุฒู ูุคูุช).  ูููู ููููู ุชุญุฑูุฑ ุฌููุน ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท.  ุฃู ุฃูู ูุง ูููู ุชุญุฑูุฑ ูุทุนุฉ ุฐุงูุฑุฉ ุชุนุณููุฉ - ุณุชุจูู ููุง ูู ูุงูุช <em>ูุดุบููุฉ</em> ุญุชู ูุชู ูุถุน ุนูุงูุฉ ุนูู ุงููุฎุฒู ุงููุคูุช ุจุฃูููู ุนูู ุฃูู ูุธูู.  ูููุฑ ูุฐุง ุงูุชุตููู ุชุฎุตูุต ูุฅุตุฏุงุฑ O (1) ุ ููุง ูุนุทู ุถูุงููุง ููุณุฑุนุฉ ุชุญุช ุฃู ุธุฑูู. <br><img src="https://habrastorage.org/webt/eb/tp/vm/ebtpvmrs616uwpgdfpd1nujw69s.png"><br>  ุญุงูุฉ ุงูุงุณุชุฎุฏุงู ุงููููุฐุฌูุฉ: ูู ุนูููุฉ ุชุญุฏูุซ ุญุงูุฉ ุงูุนูููุฉ (ูู ุฅุทุงุฑ ูู ุงููุนุจุฉ) ุ ููููู ุงุณุชุฎุฏุงู LinearAllocator ูุชุฎุตูุต ูุฎุงุฒู ูุคูุชุฉ tmp ูุฃู ุงุญุชูุงุฌุงุช ุชูููุฉ: ูุนุงูุฌุฉ ุงููุฏุฎูุงุช ุ ุงูุนูู ูุน ุงูุณูุงุณู ุ ุชุญููู ุฃูุงูุฑ ConsoleManager ูู ูุถุน ุงูุชุตุญูุญ ุ ุฅูุฎ. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ููุฏุณ ูุฎุตุต</strong> <br>  ุชุนุฏูู ูุฎุตุต ุฎุทู.  ูุณูุญ ูู ุจุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุจุงูุชุฑุชูุจ ุงูุนูุณู ููุชุฎุตูุต ุ ูุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ูุชุตุฑู ูุซู ููุฏุณ ููุชุธู ูููุง ููุจุฏุฃ LIFO.  ูููู ุฃู ูููู ูููุฏูุง ุฌุฏูุง ูุฅุฌุฑุงุก ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงููุญููุฉ (ุงูุชุณูุณู ุงููุฑูู ููุชุญููุงุช) ุ ูุชูููุฐ ุนูู ุงููุธุงู ุงููุฑุนู ููุจุฑูุฌุฉ ุงููุตูุฉ ุ ูุฃู ุนูููุงุช ุญุณุงุจูุฉ ูููู ูููุง ุงูุชุฑุชูุจ ุงููุญุฏุฏ ูุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ูุนุฑูููุง ูุณุจููุง. <br><img src="https://habrastorage.org/webt/hu/7j/fm/hu7jfm6iqhxz0uk5xwo_ayzwyfo.png"><br>  ุชููุฑ ุจุณุงุทุฉ ุงูุชุตููู ุชุฎุตูุต ุฐุงูุฑุฉ O (1) ูุณุฑุนุฉ ุชุญุฑูุฑ. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ุญูุงู ุณุจุงุญุฉ ูุฎุตุต</strong> <br>  ูุณูุญ ูู ุจุชุฎุตูุต ูุชู ุงูุฐุงูุฑุฉ ูู ููุณ ุงูุญุฌู.  ูููู ุชุทุจููู ููุฎุฒู ูุคูุช ููุณุงุญุฉ ุงูุนููุงู ุงููุณุชูุฑุฉ ุ ููุณูููุง ุฅูู ูุชู ุฐุงุช ุญุฌู ูุญุฏุฏ ูุณุจููุง.  ูุฐู ุงููุชู ูููู ุฃู ุชุดูู ูุงุฆูุฉ ูุฑุชุจุทุฉ.  ููุนุฑู ุฏุงุฆููุง ุฃู ูุชูุฉ ูุฌุจ ุชูุฏูููุง ูู ุงูุชุฎุตูุต ุงูุชุงูู.  ูููู ุชุฎุฒูู ูุนูููุงุช ุงูุชุนุฑูู ูุฐู ูู ุงููุชู ููุณูุง ุ ููุง ููุฑุถ ูููุฏูุง ุนูู ุงูุญุฏ ุงูุฃุฏูู ูุญุฌู ุงููุชูุฉ (sizeof (void *)).  ูู ุงููุงูุน ุ ูุฐู ููุณุช ุญุฑุฌุฉ. <br><img src="https://habrastorage.org/webt/cv/sl/qz/cvslqzmqj1nsp-gtqccoyx6hwy4.png"><br>  ูุธุฑูุง ูุฃู ุฌููุน ุงููุชู ูู ููุณ ุงูุญุฌู ุ ูุง ููููุง ุฃู ูู ุงููุฌููุนุงุช ุงููุฑุงุฏ ุฅุฑุฌุงุนูุง ุ ูุจุงูุชุงูู ุ ูููู ุฅุฌุฑุงุก ุฌููุน ุนูููุงุช ุงูุชุฎุตูุต / ุฅูุบุงุก ุงูุชุฎุตูุต ูู O (1). </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ูุฎุตุต ุงูุฅุทุงุฑ</strong> <br>  ูุณูุญ ูู ุงูุชุฎุตูุต ุงูุฎุทู ูููู ุจุงูุฅุดุงุฑุฉ ุฅูู ุงูุฅุทุงุฑ ุงูุญุงูู ููุท - ุจุชุฎุตูุต ุฐุงูุฑุฉ tmp ุซู ุชุญุฑูุฑ ูู ุดูุก ุชููุงุฆููุง ุนูุฏ ุชุบููุฑ ุงูุฅุทุงุฑ.  ูุฌุจ ุฃู ูุชู ุชูููุฒูุง ุจุดูู ูููุตู ุ ูุธุฑูุง ูุฃู ูุฐุง ููุงู ุนุงููู ููุฑูุฏ โโูู ููุนู ูู ุฅุทุงุฑ ูุนุจุฉ ููุช ุงูุชุดุบูู ุ ูุจุงูุชุงูู ูููู ุชุตููุนู ุจุญุฌู ูุซูุฑ ููุฅุนุฌุงุจ ุ ููุง ูููู ุจุถุน ุนุดุฑุงุช MiB ุ ูุงูุชู ุณุชููู ูููุฏุฉ ููุบุงูุฉ ุนูุฏ ุชุญููู ุงูููุงุฑุฏ ููุนุงูุฌุชูุง. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ุชุฎุตูุต ุฅุทุงุฑ ูุฒุฏูุฌ</strong> <br>  ุฅูู ุฃุฏุงุฉ ุชุฎุตูุต ุฅุทุงุฑ ูุฒุฏูุฌ ุ ูููู ูุน ุจุนุถ ุงูููุฒุงุช.  ูุณูุญ ูู ุจุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู ุงูุฅุทุงุฑ ุงูุญุงูู ุ ูุงุณุชุฎุฏุงููุง ูู ูู ูู ุงูุฅุทุงุฑ ุงูุญุงูู ูุงูุฅุทุงุฑ ุงูุชุงูู.  ุจูุนูู ุ ุณูุชู ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุงูุชู ููุช ุจุชุฎุตูุตูุง ูู ุงูุฅุทุงุฑ N ููุท ุจุนุฏ ุฅุทุงุฑ N + 1.  ูุชุญูู ุฐูู ุนู ุทุฑูู ุชุจุฏูู ุงูุฅุทุงุฑ ุงููุดุท ููุฅุจุฑุงุฒ ูู ููุงูุฉ ูู ุฅุทุงุฑ. <br><img src="https://habrastorage.org/webt/ug/cc/zh/ugcczhvv6ibzbarvb0plwhvgbuu.png"><br>  ููู ูุฐุง ุงูููุน ูู ุงูุชุฎุตูุต ุ ูุซู ุณุงุจูู ุ ููุฑุถ ุนุฏุฏูุง ูู ุงููููุฏ ุนูู ุนูุฑ ุงููุงุฆูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ูู.  ูุฐูู ุ ูุฌุจ ุฃู ุชุฏุฑู ุฃูู ูู ููุงูุฉ ุงูุฅุทุงุฑ ุ ุชุตุจุญ ุงูุจูุงูุงุช ุจุจุณุงุทุฉ ุบูุฑ ุตุงูุญุฉ ุ ูุฃู ุงููุตูู ุฅูููุง ุจุดูู ูุชูุฑุฑ ูููู ุฃู ูุณุจุจ ูุดุงูู ุฎุทูุฑุฉ. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>ูุฎุตุต ุซุงุจุช</strong> <br>  ูุฎุตุต ูุฐุง ุงูููุน ูู ุงูุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู ูุฎุฒู ูุคูุช ุชู ุงูุญุตูู ุนููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ูุฑุญูุฉ ุชุดุบูู ุงูุจุฑูุงูุฌ ุ ุฃู ุชู ุงูุชูุงุทู ูู ุจููุฉ ุชุฎุฒูู ุงูุนูุงุตุฑ ูู ุฅุทุงุฑ ุฏุงูุฉ.  ุญุณุจ ุงูููุน ุ ูููู ุฃู ูููู ุฃู ูุฎุตุต: ุฎุทู ุ ุชุฌูุน ุ ููุฏุณ.  ููุงุฐุง ูุทูู ุนููู <em>ุซุงุจุช</em> ุ  ูุฌุจ ุฃู ูููู ุญุฌู ุงููุฎุฒู ุงููุคูุช ููุฐุงูุฑุฉ ุงูุชู ุชู ุงูุชูุงุทูุง ูุนุฑูููุง <strong>ูู ูุฑุญูุฉ ุงูุชุญููู ุงูุจุฑูุฌู</strong> ููุจุฑูุงูุฌ.  ูุฐุง ููุฑุถ ูููุฏูุง ูุจูุฑุฉ: ูุง ูููู ุชุบููุฑ ููุฏุงุฑ ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ ููุฐุง ุงููุฎุตุต ุฃุซูุงุก ุงูุนูููุฉ.  ูููู ูุง ูู ุงูููุงุฆุฏุ  ุณูุชู ุงูุชูุงุท ุงููุฎุฒู ุงููุคูุช ุงููุณุชุฎุฏู ุชููุงุฆููุง ุซู ุชุญุฑูุฑู (ุฅูุง ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ุฃู ุนูุฏ ุงูุฎุฑูุฌ ูู ุงููุธููุฉ).  ูุฐุง ูุง ูุญููู ุงููููุฉ ุ ูุญูุธู ูู ุงูุชูุชุช ุ ูุณูุญ ูู ุจุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุณุฑุนุฉ ูู ููุงููุง. <br>  ููููู ุฅููุงุก ูุธุฑุฉ ุนูู ูุซุงู ุงูููุฏ ุจุงุณุชุฎุฏุงู ูุฐุง ุงููุฎุตุต ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชูุณูู ุงูุณูุณูุฉ ุฅูู ุณูุงุณู ูุฑุนูุฉ ููุนู ุดูุก ูุนูุง: <br><img src="https://habrastorage.org/webt/3s/xk/t5/3sxkt5_00ztji1gesnh0cd1edno.png"><br>  ููุง ูููู ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ูู ุงูููุฏุณ ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ูู ุฃูุซุฑ ูุนุงููุฉ ุจูุซูุฑ ุ ูุฃูู  ูููุฉ ุฅุทุงุฑ ุงููุธููุฉ ุงูุญุงููุฉ ูุน ูุฌูุฏ ุงุญุชูุงู ูุจูุฑ ุณูููู ุจุงููุนู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุนุงูุฌ. </p><br></li></ol><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุฎุตุตุงุช ุชุญู ุจุทุฑููุฉ ูุง ูุดุงูู ุงูุชุฌุฒุค ุ ูุน ููุต ุงูุฐุงูุฑุฉ ุ ูุน ุณุฑุนุฉ ุชููู ูุฅุทูุงู ูุชู ุจุงูุญุฌู ุงููุทููุจ ุ ูุน ุนูุฑ ุงููุงุฆูุงุช ูุงูุฐุงูุฑุฉ ุงูุชู ุชุดุบููุง. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฃูุถูุง ุฅูู ุฃู ุงูููุฌ ุงูุตุญูุญ ูุชุตููู ุงููุงุฌูุฉ ุณูุณูุญ ูู ุจุฅูุดุงุก ููุน ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ูููุฎุตุตูู ุ ุนูู ุณุจูู ุงููุซุงู: ุชุฌูุน ูุฎุตุต ุงูุฐุงูุฑุฉ ูู ุชุฎุตูุต ุงูุฅุทุงุฑ ุ ููุฎุตุต ุชุฎุตูุต ุงูุฅุทุงุฑ ุจุฏูุฑู ุงูุฐุงูุฑุฉ ูู ุงูุชุฎุตูุต ุงูุฎุทู.  ูููู ุงูุงุณุชูุฑุงุฑ ูู ุจููุฉ ููุงุซูุฉ ุ ูุงูุชููู ูุน ุงูููุงู ูุงูุงุญุชูุงุฌุงุช ุงูุฎุงุตุฉ ุจู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rf/l8/4a/rfl84aakccaw2qfdw6hxlqiygos.png"></p><br><p style=";text-align:right;direction:rtl">  ุฃุฑู ูุงุฌูุฉ ูุดุงุจูุฉ ูุฅูุดุงุก ุชุณูุณูุงุช ูุฑููุฉ ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class IAllocator { public: virtual void* alloc(size_t size) = 0; virtual void* alloc(size_t size, size_t alignment) = 0; virtual void free (void* &amp;p) = 0; }</code> </pre> <br><p style=";text-align:right;direction:rtl">          malloc/free ,     .  ,        ,            .           /    ,       . </p><br><h2 id="umnye-ukazateli" style=";text-align:right;direction:rtl">   </h2><br><p style=";text-align:right;direction:rtl"> Smart pointer โ        C++   ++11 (   boost,    ).   -,     ,        -  ,        .                . </p><br><p style=";text-align:right;direction:rtl">       ?     : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">       </li><li style=";text-align:right;direction:rtl">   (/) </li><li style=";text-align:right;direction:rtl">    </li></ol><br><p style=";text-align:right;direction:rtl">         : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <strong>Unique pointer</strong> <br>      1    ( ). <br>   unique pointer ,          .        , ..    1   / . <br>        uniquePtr1  uniquePtr2,    uniquePtr1 , .   1  . <br><img src="https://habrastorage.org/webt/xl/qd/x2/xlqdx2thnzcg7rvvv0va70zpzl4.png"></p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <strong>Shared pointer</strong> <br>        (reference counting).       ,    ,      .    , ,      ,    . <br><img src="https://habrastorage.org/webt/jb/y6/wi/jby6wipfn5sv2ghabpuzzresgsk.png"><br>       . -,       ,      .        . -,  -                . </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <strong>Weak pointer</strong> <br>    .       ,    .  ูุงุฐุง ูุนูู ูุฐุงุ           shared pointer.   ,   shared pointer  ,     . ,     shared pointer weak pointer.  ,   (shared)    ,   weak pointer    shared pointer.    โ  weak pointer ,     ,  ,       . <br><img src="https://habrastorage.org/webt/nr/bt/bq/nrbtbqg6rukrcdgmij-v08bpim4.png"><br>   shared,   weak pointer     meta-data   .    -   ,     ..   ,  O(N) overhead  ,  N โ -  .      , .               ,        .         . </p><br></li></ol><br><p style=";text-align:right;direction:rtl">     :         . ,  shared pointer,     ,    (      )  <em>- - -</em> .           .            meta-info   ,  ,           .  ูุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/*     */ /*   ,  shared pointer */ Array&lt;TSharedPtr&lt;Object&gt;&gt; objects; objects.add(newShared&lt;Object&gt;(...)); ... objects.add(newShared&lt;Object&gt;(...));</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/*      (   meta-info    ) */ Array&lt;Object&gt; objects; objects.emplace(...); ... objects.emplace(...);</code> </pre> <br><p style=";text-align:right;direction:rtl">   .            .  ุญูู ูุฐุง ุงูููุถูุน ูุฐูู. </p><br><h2 id="unique-id" style=";text-align:right;direction:rtl"> Unique id </h2><br><p style=";text-align:right;direction:rtl">      ,    .     (id/identificator),   , ,   -.    : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <strong> </strong> <br>     ,   id.    ,   <strong>  </strong> ,  ,          id. </li><li style=";text-align:right;direction:rtl"> <strong>  </strong> <br>      ,          (  ,     ) </li><li style=";text-align:right;direction:rtl"> <strong>    </strong> <br>    id  ,      ,        id. </li><li style=";text-align:right;direction:rtl"> <strong>    </strong> <br>                 . ,   id,     . </li></ol><br><p style=";text-align:right;direction:rtl">     :    id,   ,      id,         . </p><br><p style=";text-align:right;direction:rtl">  id     ,  (Vulkan, OpenGL),   (Godot, CryEngine).  EntityID   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">     CryEngine</a> . </p><br><p style=";text-align:right;direction:rtl">   ,  id   :   .     ,     (   ),     ,      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/*    */ class ID { uint32 index; uint32 generation; }</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/*  - /  */ class ObjectManager { public: ID create(...); void destroy(ID); void update(ID id, ...); private: Array&lt;uint32&gt; generations; Array&lt;Objects&gt; objects; }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ID        ,     ID .     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">generation = generations[id.index]; if (generation == id.generation) then /*    */ else /*  ,     */</code> </pre> <br><p style=";text-align:right;direction:rtl">      id      generation  1   id   ids. </p><br><h2 id="konteynery" style=";text-align:right;direction:rtl">  </h2><br><p style=";text-align:right;direction:rtl">     C++   ,         .      std,     <strong></strong>   ,   <strong></strong>    .        : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> Linked list โ   </li><li style=";text-align:right;direction:rtl"> Array โ /  </li><li style=";text-align:right;direction:rtl"> Queue โ  </li><li style=";text-align:right;direction:rtl"> Stack โ  </li><li style=";text-align:right;direction:rtl"> Map โ   </li><li style=";text-align:right;direction:rtl"> Set โ  </li></ul><br><p style=";text-align:right;direction:rtl">         ?             memory corruption.        / ,    ,   ,    ,     . </p><br><h1 id="obschie-idei" style=";text-align:right;direction:rtl">   </h1><br><p style=";text-align:right;direction:rtl">           ,     ,       .  , ,    /         . </p><br><h2 id="pod-konkretnye-zadachi" style=";text-align:right;direction:rtl">    </h2><br><p style=";text-align:right;direction:rtl">   ,      ,       .              ,   (  )   .    ,   malloc/free  ,       ,            . </p><br><p style=";text-align:right;direction:rtl">     ?   ,     (/ ),     ,     ,   .    ,     ,    ,           . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/554/778/95b/55477895bb7e2fcf71d44ad06ceb8ce3.jpg"><br> ryEngine Sandbox:       </p><br><p style=";text-align:right;direction:rtl">   ,   Unreal, Unity, CryEngine  .,     ,    . ,       , ,     โ       ,                 . </p><br><h2 id="pre-allocating" style=";text-align:right;direction:rtl"> Pre-allocating </h2><br><p style=";text-align:right;direction:rtl">        ,      /          . </p><br><p style=";text-align:right;direction:rtl">    :   malloc/free      .     ,      "run out of memory", .        .         ,       (,   ,     .). </p><br><p style=";text-align:right;direction:rtl">       .          .  ,         -  .           ,           malloc/free,    : ,  ,  . </p><br><h2 id="ne-nado-boyatsya-dinamicheskoy-pamyati" style=";text-align:right;direction:rtl">      </h2><br><p style=";text-align:right;direction:rtl">            .   :     ,       , ,   ..             . </p><br><p style=";text-align:right;direction:rtl">    :   ,      ,       ,    .  open-source ,      ,     .   ,  ,   โ     malloc/free. </p><br><h2 id="dizayn-iz-ogranicheniy" style=";text-align:right;direction:rtl">    </h2><br><p style=";text-align:right;direction:rtl">  GDC  CD Project Red <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> ,     ,       "The Witcher: Blood and Wine"    ()        .     ,     ,    ,         ,         . <br><img src="https://habrastorage.org/getpro/habr/post_images/80b/c6c/fb0/80bc6cfb08009ba02caee322cb092110.png"></p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   </a>    Naughty Dog  ,      "Uncharted 4: A Thief's End"     ,         (,    )       . <br><img src="https://habrastorage.org/getpro/habr/post_images/7c4/2c8/469/7c42c84690c9374423bba12dea6126ff.jpg"></p><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">     ,    ,     ,          .       ,         .     / ,     ,   -   ..       ,        (,    ). </p><br><h1 id="literatura-i-poleznye-ssylki" style=";text-align:right;direction:rtl">     </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"Game Engine Architecture"</a> .           ,  , , ,   ..  ,    ,      . </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Custom memory allocators</a> โ        ,     C++  .     ,         . </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Smart pointers</a> โ     ,      . </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Start Pre-allocating And Stop Worrying</a> โ        </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar473294/">https://habr.com/ru/post/ar473294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar473284/index.html">ูุจุงุฑ ุ TechLead ุ ูููุฏุณ ูุนูุงุฑู - ูุงุฐุง ุจุนุฏุ ููููุฉ ุงูุชุนุงูู ูุน ุฑูุชูู ุงูุนูู ูุฃูู ุงููุถู ูุฏูุงุ</a></li>
<li><a href="../ar473286/index.html">ููุชุจ ุงูุญูุงูุฉ ุถุฏ ูุฌูุงุช DDoS ุนูู XDP. ุงูุฌุฒุก ุงููููู</a></li>
<li><a href="../ar473288/index.html">ุจูุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู ูู ููุทุฉ ุงูุตูุฑ ุ ูุณูู ุชุถุฎ ูุณุชูุงู</a></li>
<li><a href="../ar473290/index.html">ุฌูููุง. ูู ุฃูู ุชุจุฏุฃ ุงููุดุฑูุนุ ...</a></li>
<li><a href="../ar473292/index.html">ููุฎุต ุงูููุงุฏ ุงููุซูุฑุฉ ููุงูุชูุงู ููุทููุฑ ุงูุจุฑุงูุฌ ุงููุญููู ุฑูู 319 (ูู ุงููุชุฑุฉ ูู 21 ุฅูู 27 ุฃูุชูุจุฑ)</a></li>
<li><a href="../ar473296/index.html">ุจุฏุก ุงูุชุดุบูู ุฏูู ุงููุงู. ุชุฌุฑุจุฉ ุดุฎุตูุฉ</a></li>
<li><a href="../ar473298/index.html">ููููุฉ ุจูุงุก ุงูุนูููุงุช ูุงูุชููู ุนู ุงูุณุฎุฑูุฉ ูู ูุฑูู</a></li>
<li><a href="../ar473300/index.html">ุงูุนูุงูุงุช ุงูุนุงูุฉ ูู ุงูุนุตุฑ ุงูุฑููู ุ ุจุฑุงูุฌ ุงูููุงุก ุงูุญุฏูุซุฉ ูุชุณููู ุงูููุฑุฌุงูุงุช</a></li>
<li><a href="../ar473302/index.html">ูุฏุงุนุง HTML ุ ูุฑุญุจุง QML</a></li>
<li><a href="../ar473306/index.html">ูุธุงุฑุงุช ุงููุงูุน ุงููุนุฒุฒ ููููู. ุณูุงุนุงุช ุงูุฑุฃุณ ุงููุซุงููุฉ ุงูุฎุงุตุฉ ุจู ุ ููู ุฃูุฑ ูููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>