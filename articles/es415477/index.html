<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòä üî° ü§• Monitoreo del funcionamiento de los sistemas dom√©sticos suburbanos: los primeros pasos para un hogar inteligente üñïüèª üë®üèª‚Äçüåæ üôçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El art√≠culo anterior provoc√≥ una discusi√≥n bastante acalorada, y esta circunstancia me convenci√≥ de la necesidad de continuar con lo que llamamos "com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monitoreo del funcionamiento de los sistemas dom√©sticos suburbanos: los primeros pasos para un hogar inteligente</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/415477/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1q/ir/bi/1qirbi2pjzork0gilefg7xlyoho.jpeg"></div><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El art√≠culo anterior</a> provoc√≥ una discusi√≥n bastante acalorada, y esta circunstancia me convenci√≥ de la necesidad de continuar con lo que llamamos "compartir experiencia".  Entonces, nos decidimos por el hecho de que despu√©s de la aparici√≥n de fuentes de energ√≠a alternativas en la casa, principalmente el colector solar, quer√≠a medir los par√°metros que acompa√±an su trabajo.  Por ejemplo, para ver c√≥mo cambia la temperatura del refrigerante solar, se sobrecalienta el agua de la caldera, etc.  Est√° claro que la medici√≥n de algo en s√≠ mismo e incluso la transmisi√≥n de esta informaci√≥n al lugar de consumo (telemetr√≠a) no aumentan la comodidad o la seguridad, por lo que inmediatamente se agreg√≥ un elemento en el control remoto de varios actuadores al "TK".  En este art√≠culo no dar√© listados de c√≥digos, detallar√© todas las soluciones t√©cnicas hasta el m√°s m√≠nimo detalle.  Mi objetivo es mostrar el tren de pensamiento y las soluciones t√©cnicas adoptadas, as√≠ como su resultado.  Cualquiera que quiera seguir un camino similar todav√≠a tendr√° que resolver muchos problemas por su cuenta. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Una ligera digresi√≥n l√≠rica.</b> <div class="spoiler_text"><p>  En 2010, junto con un inversor / bater√≠as, apareci√≥ en la casa un sistema universal de alarma y controlador GSM de la compa√±√≠a rusa RADS Electronics.  Este maravilloso dispositivo universal se utiliz√≥ adem√°s de las funciones de alarma con alertas GSM, tambi√©n para controlar la luz en la sala de estar y, lo m√°s importante, para controlar la caldera el√©ctrica.  As√≠ que aprend√≠ a controlar la temperatura, mantener la temperatura y tambi√©n calentar la casa con anticipaci√≥n, antes de llegar, hace mucho tiempo.  La conveniencia de tales sistemas es bastante obvia.  Sin embargo, las capacidades del controlador son limitadas, por lo que el nuevo "TK" inicialmente sent√≥ las bases para crear un sistema paralelo, incluso con funciones parcialmente repetidas y, por supuesto, con acceso a la informaci√≥n de los sensores y el control a trav√©s de Internet. </p></div></div><br><p>  Entonces surgieron los requisitos iniciales: </p><br><ol><li>  Mida la temperatura en las 8 boquillas de la caldera y 2 boquillas de la caldera. </li><li>  Mida la temperatura y la humedad en la sala de calderas donde est√° montado el equipo. </li><li>  Mida la temperatura y la humedad del aire exterior.  Para alg√∫n d√≠a implementar el control de calefacci√≥n dependiente del clima. </li><li>  Conduzca una caldera el√©ctrica mientras mantiene el sistema antiguo.  La caldera es de tres etapas, con ajuste de la temperatura de calentamiento y retroalimentaci√≥n sobre la temperatura del refrigerante.  Sin embargo, para fines de control remoto, es suficiente activar / desactivar los pasos de calentamiento. </li><li>  Gestionar el calentador de caldera. </li><li>  Coloque un m√≠nimo de cables.  No tanto como para no molestar, sino porque la decoraci√≥n de la casa ya est√° hecha. </li><li>  Tenga una interfaz conveniente para administrar y trabajar con lecturas de sensores.  La interfaz debe ser accesible en dispositivos m√≥viles. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Y una peque√±a digresi√≥n m√°s.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/-l/p-/jz/-lp-jzlqt49mog78ksamlq75azq.jpeg" align="left">  <i>En la foto: un generador con arranque el√©ctrico.</i>  <i>Para la puesta en marcha en invierno tuve que poner una bater√≠a de coche y un cargador.</i>  <i>Y usa aceite sint√©tico.</i> </p><br><p>  Todo en el mismo 2010, un generador de gasolina se instal√≥ en el garaje.  Y pronto se le agreg√≥ un controlador de arranque autom√°tico, hecho de forma independiente sobre la base del microcontrolador Arduino.  El controlador observa no solo la presencia de una red de 220 V, sino tambi√©n la se√±al del inversor acerca de la descarga de las bater√≠as, y el inversor proporciona la entrada autom√°tica del generador.  En conjunto, fue posible implementar un algoritmo de control de generador bastante inteligente.  En general, no hab√≠a miedo de usar microcontroladores, tanto en el sentido de conectar perif√©ricos como en el sentido de la programaci√≥n.  En el pasado, program√© mucho en C / C ++. </p></div></div><br><p>  Los requisitos son, en general, simples, si no triviales.  Hay miles de formas diferentes de implementarlos.  Y es por eso que la piedra angular es la elecci√≥n de la arquitectura y la pila tecnol√≥gica sobre la cual se construir√° el nuevo sistema.  El enfoque sistem√°tico es justo lo que es importante aqu√≠, la comprensi√≥n de que las soluciones t√©cnicas individuales deben estar vinculadas entre s√≠, la comprensi√≥n de que el sistema ciertamente se expandir√° a√∫n m√°s, como ya ha sucedido con el sistema de suministro de energ√≠a en el hogar.  Y tambi√©n es importante comprender sus propias capacidades.  Por lo tanto, tuve que buscar en Google, tomar "ayuda de la audiencia" y "llamar a un amigo". </p><br><p>  <i>En la foto Arduino Nano y nRF24L01 + con antena</i> <br><img src="https://habrastorage.org/webt/8b/jv/9m/8bjv9mq_4o9_pllkockdofys34m.jpeg" align="left">  Empec√© a mirar desde sistemas basados ‚Äã‚Äãen el est√°ndar Z-Wave ampliamente utilizado, esto influy√≥ mucho en otras decisiones, aunque Z-Wave se descart√≥ al principio.  Dado que Z-Wave es una opci√≥n obvia para los requisitos cercanos al m√≠o, es importante comprender por qu√© se descart√≥.  Primero, por supuesto, el costo de un sensor.  Y solo necesito medir la temperatura en una caldera en 8 puntos, cada punto resulta m√°s de 3000 rublos.  En segundo lugar, el factor de forma de los sensores est√°ndar, que no permite su uso en boquillas de calderas.  En tercer lugar, la elecci√≥n limitada de sistemas de control y acceso remoto, que tambi√©n son de propiedad exclusiva (debe leer: "limitado") y de pago.  Sin embargo, la idea misma de una red autoorganizada con la posibilidad de comunicaciones (asociaciones) punto a punto de un sensor-actuador y una gesti√≥n centralizada de servidor-cliente es muy atractiva.  Siguiendo el consejo de un amigo, emprendi√≥ un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto interesante</a> , que inicialmente parec√≠a una extensi√≥n de la funcionalidad de los sistemas Z-Wave basados ‚Äã‚Äãen controladores Vera, pero utilizando el enfoque de bricolaje.  El proyecto utiliz√≥ los transceptores inal√°mbricos Arduino, 2.4GHz nRF24L01 + y la biblioteca correspondiente.  Todo junto es justo lo que necesito para mis requerimientos.  El uso de Arduino abre posibilidades casi ilimitadas de automatizaci√≥n del hogar por dinero, un orden de magnitud (!) M√°s peque√±o que en el caso de Z-Wave.  Tambi√©n es importante que Arduino sea una plataforma excepcionalmente estable.  El controlador de arranque autom√°tico del generador, una vez montado en el Arduino, ha estado funcionando sin problemas durante 7 a√±os.  Dada la experiencia de desarrollo, soldadura y programaci√≥n, par√© en este proyecto. </p><br><p>  E incluso continu√≥.  En el c√≥digo, me negu√© completamente a unirme a Vera.  En cambio, eligi√≥ uno de los controladores de software recomendados por el autor de la biblioteca mysensors.  Despu√©s de estudiar los foros y sitios de fabricantes, se convirti√≥ en el proyecto de c√≥digo abierto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">openHAB</a> .  El factor decisivo, adem√°s de la apertura, multiplataforma, lenguaje de reglas potente incorporado, la presencia de clientes m√≥viles, fue la siguiente propiedad declarada: "un proveedor y agn√≥stico tecnol√≥gico".  Esto es exactamente lo que necesita un especialista en TI con mentalidad de sistema: la posibilidad de expandir el sistema en el futuro, utilizando componentes de diferentes fabricantes y est√°ndares, a la vez que es m√°s adecuado para fines espec√≠ficos.  Es decir  Desde el principio hubo un entendimiento de que no todo se <b>debe</b> hacer en el Arduino y que no todo es <b>posible</b> dentro de los l√≠mites de Z-Wave.  Al mismo tiempo, decid√≠ adherirme a una l√≥gica de gesti√≥n centralizada, que para empezar es bastante natural.  Es decir  En los dispositivos terminales ensamblados en Arduino, habr√° una l√≥gica comercial m√≠nima: encender / apagar la luz de los interruptores mec√°nicos convencionales <s>antiguos</s> que simplemente se convierten en sensores, leer y convertir informaci√≥n de sensores de par√°metros f√≠sicos, transmitir datos al servidor, recibir y ejecutar comandos del servidor.  No planifico ninguna interacci√≥n directa entre los nodos de red del dispositivo.  Toda la l√≥gica de gesti√≥n empresarial real se basa en las reglas de openHAB.  Ahora quedan cosas peque√±as: elija la plataforma de hardware y el sistema operativo para la parte del servidor, para openHAB. </p><br><p>  Muchos entusiastas del bricolaje en openHAB eligen la Raspberry Pi.  Y esta es una gran soluci√≥n, econ√≥mica, compacta y silenciosa.  Sin embargo, me pareci√≥ incorrecto limitarme a la potencia inform√°tica, porque inmediatamente decid√≠ usar el futuro servidor como dispositivo multifuncional, por ejemplo, quer√≠a implementar el centro de medios Kodi y, posiblemente, en el futuro, algo m√°s, por ejemplo, un grabador de video de software.  Mirando hacia el futuro, dir√© que al final, Kodi est√° integrado con una casa inteligente, cuando el video comienza, la luz se apaga, cuando se detiene, se ilumina.  Y el DVR tambi√©n apareci√≥ y tambi√©n est√° integrado.  Al mismo tiempo, no tengo requisitos especiales para componentes multimedia, es suficiente que el servidor tenga HDMI y S / PDIF.  En general, en el oto√±o de 2015, la elecci√≥n recay√≥ en una nettop sin ventilador de Hystou (ver en AliExpress): Intel Core i7, 8GB, 256GB SSD, 8 puertos USB, incluidos 4 3.0, 2 LAN, WiFi, 2 HDMI, S / PDIF, Lector de tarjetas en general, todo lo que necesitas para la felicidad de una caja de bricolaje.  Luego cost√≥ alrededor de 24 tr.  Nunca me he arrepentido de la elecci√≥n, aunque debo decir que WiFi no es muy estable para √©l.  Pero, la experiencia que sigui√≥ a todo esto dice con confianza: donde sea que pueda tender cables, coloque cables.  Un canal de radio, independientemente del est√°ndar y la frecuencia (WiFi, Z-Wave, 433 MHz, 869 MHz, 2.4 GHz, etc.) siempre es peor que un cable.  Por lo tanto, el nettop finalmente se conecta al cable LAN de la casa.  Y varios sistemas m√°s diferentes se asentaron en √©l. <br>  En cuanto al sistema operativo para el servidor, recomendar√≠a estabilidad y previsibilidad.  Las distribuciones de Linux con una gran comunidad tienen esta propiedad.  Estoy m√°s familiarizado con Ubuntu.  Aunque, gracias a la plataforma cruzada, todo se puede hacer en Windows. </p><br><p>  Entonces, se seleccionan la arquitectura y la pila.  Estamos actuando </p><br><p><img src="https://habrastorage.org/webt/2h/na/oq/2hnaoqpssegd8ks0mgvm5bpymd4.jpeg" align="left">  <b>Tarea 1.</b> Seleccione sensores y actuadores.  La temperatura del refrigerante y el agua se medir√° en las boquillas de la caldera y la caldera.  Para hacer esto, tomamos sensores DS18B20 de 1 cable en una caja sellada de metal, se montan convenientemente directamente en las boquillas, desde el exterior.  Y las tuber√≠as mismas con sensores en la parte superior est√°n cubiertas con aislamiento de espuma para tuber√≠as.  Cuando hay muchos sensores similares, el bus de 1 cable es muy conveniente.  Para medir la temperatura y la humedad del aire en la sala de calderas y en la calle, elegimos DHT22, simplemente porque esta es una opci√≥n est√°ndar de bricolaje.  Administre la caldera por separado por pasos, utilizando rel√©s mec√°nicos convencionales de cinco voltios, tambi√©n familiares para cuadros de bricolaje.  Es importante tener en cuenta que estos rel√©s est√°n conectados en paralelo con los interruptores de etapa en la caldera, y no los rel√©s TEN, que est√°n controlados por la automatizaci√≥n de la caldera.  Todos los perif√©ricos seleccionados se programan directamente, como un rel√©, por ejemplo, o tienen las bibliotecas apropiadas para Arduino, como 1-wire / DS18B20 / DHT22.  Sin complicaciones </p><br><p>  <i>En la foto, una caldera de 300l.</i>  <i>Se puede ver que un cable negro con un sensor en el extremo se aproxima a cada tubo de derivaci√≥n, se combinan en una caja blanca y un cable blanco com√∫n de 1 cable va al controlador.</i> </p><br><p>  <b>Tarea 2.</b> Intercambie datos y comandos con openHAB.  Tuve que jugar un poco, porque con openHAB todav√≠a no estaba "en ti".  La arquitectura de missensores implica la presencia de una puerta de enlace (puerta de enlace) para conectarse al controlador / servidor central, es decir.  para abrir HAB. <img src="https://habrastorage.org/webt/gs/hc/ku/gshcku8ujafvh5b_mytcifai_kw.jpeg" align="right">  La puerta de enlace en s√≠ es un controlador f√≠sicamente separado en el Arduino / nRF24L01 + y se puede conectar al servidor a trav√©s de LAN / WiFi o Serial.  Como estoy al comienzo de la ruta, selecciono Serie y coloco la puerta de enlace al lado del servidor.  La puerta de enlace se utiliza para enrutar los mensajes enviados a la red de mysensors a trav√©s de la puerta de enlace y comunicarse directamente con el controlador central, openHAB.  Los mensajes de Mysensors son de formato fijo y f√°ciles de analizar.  Agregamos a la serie de enlace openHAB para conectar la puerta de enlace a trav√©s de USB y escribimos una regla para analizar mensajes de dispositivos en la red mysensors recibidos a trav√©s de USB desde la puerta de enlace.  La regla de openHAB que analiza los mensajes se basa en el c√≥digo encontrado en el foro mysensors.  A continuaci√≥n, escribimos las reglas para actuadores: rel√© de control de caldera, calentador de caldera, luz, etc. </p><br><p>  <i>La foto muestra una puerta de enlace, una peque√±a caja marr√≥n con una antena en un altavoz de audio.</i> </p><br><div class="spoiler">  <b class="spoiler_title">Sobre openHAB</b> <div class="spoiler_text"><p>  openHAB: una soluci√≥n abierta que se expande con la ayuda de la comunidad mediante el desarrollo de enlaces para dispositivos espec√≠ficos con los que interactuar√° openHAB.  Por ejemplo, para interactuar con dispositivos a trav√©s de USB hay una serie vinculante.  De manera similar para otros dispositivos o protocolos, por ejemplo Modbus, NTP, HTTP, Squeezebox, Kodi / XBMC, Z-Wave, ZigBee, Nest, etc.  Yo mismo particip√© en el desarrollo como probador de enlace Modbus activo. </p></div></div><br><p><img src="https://habrastorage.org/webt/gv/ud/dt/gvuddthvqwvemt9nxugqzbcefjg.jpeg" align="left">  Mientras estaba ocupado conectando la puerta de enlace al servidor openHAB, decid√≠ finalizar el c√≥digo de la puerta de enlace (y la puerta de enlace en s√≠), tomado de mysensors.org y agregarle un sensor de temperatura y humedad DHT22 y un sensor de presi√≥n atmosf√©rica BMP180, y al mismo tiempo encontr√© el c√≥digo fuente para predecir el clima a partir de la din√°mica atmosf√©rica presi√≥n  Todas estas mediciones y predicciones se pasan a openHAB. <br>  <i>En la foto, la puerta de entrada est√° adentro.</i>  <i>En el cable blanco es DHT22, la placa con pines libres es Arduino, abajo a la derecha es nRF24L01 + y BMP180.</i> </p><br><p>  <b>Tarea 3.</b> Interfaz y acceso remoto.  openHAB es un sistema totalmente personalizable, que incluye dise√±o de interfaz.  Y este marcado est√° unificado, tanto para el acceso ordinario a trav√©s de un navegador como a trav√©s de una aplicaci√≥n m√≥vil.  El marcado universal, por supuesto, puede no ser ideal, pero se ve bien en un tel√©fono inteligente, y esto es importante.  Queda por decidir c√≥mo acceder al servidor openHAB fuera de la red local.  Primero, puede (y lo m√°s importante, opcionalmente) usar la nube myopenhab.org.  El servidor openHAB se conecta directamente a la nube mediante un enlace especial.  Esta soluci√≥n es la m√°s simple y proporciona una funcionalidad completa de administraci√≥n del sistema, excepto la transferencia de video desde c√°maras IP.  En segundo lugar, para aquellos a quienes no les gustan las nubes, y les pertenezco, existen los medios habituales de acceso remoto, por ejemplo, una combinaci√≥n de VPN + VNC, etc.  No divulgar√© detalles por razones obvias, especialmente porque este problema no se relaciona directamente con el tema del art√≠culo.  Solo noto que el cliente m√≥vil openHAB tiene una configuraci√≥n para dos direcciones.  Va al primero si ve un servidor openHAB en esta direcci√≥n, al segundo, si no lo hace.  Esta es una caracter√≠stica muy conveniente de la interfaz.  Por ejemplo, puede especificar la nube como la segunda direcci√≥n y luego openHAB siempre est√° disponible sin manipulaciones adicionales con la conexi√≥n VPN.  O especifique la direcci√≥n virtual obtenida usando cualquier soluci√≥n VPN.  O algo mas. </p><br><table><thead><tr><th>  Interfaz de pantalla de inicio </th><th>  Desplazarse hacia abajo en la pantalla de inicio </th><th>  El elemento de men√∫ abierto "Luz" </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/webt/9z/ls/yp/9zlsyp9mydxjhq7g46p4a1lqvba.jpeg"></td><td><img src="https://habrastorage.org/webt/j8/zx/7_/j8zx7_o6z7tb2ihivbhn-tbkqzw.jpeg"></td><td><img src="https://habrastorage.org/webt/vp/ws/ld/vpwsldzn6krpnzqvvzqow0yvtuy.jpeg"></td></tr></tbody></table><br><p>  <em>El marcado le permite realizar un formato condicional, por ejemplo, resaltar la temperatura en rojo cuando excede el valor especificado en el marcado.</em>  <em>Algunos elementos se muestran cuando se presionan, por ejemplo, "Calefacci√≥n", "Luz", "Sirena", etc.</em> </p><br><p>  Eso es todo  Recogemos un soldador, luego un teclado a su vez.  Y gradualmente toma forma la primera versi√≥n del sistema.  Como sabes, el apetito viene con comer.  Como resultado, se agregan nuevos sensores e incluso nuevos controladores a la primera versi√≥n del sistema, por ejemplo, para automatizar una casa de hu√©spedes.  Como resultado, en la primera etapa, se introdujo un sistema que: </p><br><ol><li>  Mide la temperatura en 16 puntos. </li><li>  Mide la humedad en 4 puntos. </li><li>  Mide el voltaje de la red de 220V en la entrada de la casa, al estabilizador. </li><li>  Mide la luz ambiental.  La iluminaci√≥n se utiliza para encender autom√°ticamente la luz. </li><li>  Mide la presi√≥n atmosf√©rica y hace una predicci√≥n del clima sobre la din√°mica de la presi√≥n. </li><li>  Detecta movimiento en varios puntos. </li><li>  Controla todo el mundo en una casa de hu√©spedes.  Los interruptores se convirtieron en sensores. </li><li>  Acciona sirenas. </li><li>  Controla por separado 3 etapas de una caldera el√©ctrica, preservando la funcionalidad del sistema anterior.  Controla el calentador de la caldera. </li><li>  Comprueba la presencia de voltaje en la caldera y los elementos de calentamiento de la caldera, y tambi√©n lee los hechos de la inclusi√≥n de elementos de calentamiento de la caldera.  Esto es importante porque, en primer lugar, la caldera tiene retroalimentaci√≥n sobre la temperatura del refrigerante y puede apagar los elementos de calentamiento en s√≠, y en segundo lugar, se monta un rel√© de limitaci√≥n de carga de dos etapas en el panel, que desconecta la caldera y la caldera en serie si se excede el umbral de consumo en la casa.  Estos datos se utilizar√°n m√°s en algoritmos de hogar inteligente.  Pero en esta etapa no sab√≠a exactamente c√≥mo, solo sent√≠a que ser√≠an necesarios. </li><li>  Lee los hechos de encender y apagar la bomba del circuito solar. <img src="https://habrastorage.org/webt/pv/so/fa/pvsofanjhrkcdclj2mlrurnll8u.jpeg" align="right"></li><li>  Crea gr√°ficos de temperatura para la semana, el d√≠a y la hora. </li><li>  Env√≠a notificaciones push sobre varios eventos.  Los eventos pueden ser casi cualquier, por ejemplo, movimiento en el porche, temperatura que excede un umbral predeterminado, p√©rdida / aparici√≥n de electricidad, etc.  Tambi√©n se ha realizado una alerta por SMS. </li><li>  El sistema antiguo permaneci√≥ separado f√≠sica y l√≥gicamente del nuevo, aunque los mismos sensores se reutilizan parcialmente en el nuevo.  El sistema anterior conservaba las funciones de seguridad y un sistema de monitoreo / control de respaldo. </li></ol><br><p>  <em>La foto muestra el equipo el√©ctrico de la casa de hu√©spedes.</em>  <em>La caja con la antena es el controlador, la "lavadora" redonda es la sirena, entre ellos est√° el sensor DHT22, debajo del escudo hay un sensor de movimiento, a la izquierda hay una unidad de alimentaci√≥n ininterrumpida de 12V.</em> </p><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de operaci√≥n del sistema</b> <div class="spoiler_text"><p>  Cada 30 segundos, el controlador sondea los sensores de temperatura.  En el caso de un cambio en las lecturas o a solicitud del servidor, env√≠a datos a la puerta de enlace por separado para cada sensor.  Gateway recibe datos y los env√≠a a trav√©s de USB a openHAB.  En openHAB, se activa una regla, se analiza el mensaje y se asigna el valor de temperatura correspondiente al elemento correspondiente (el concepto b√°sico de openHAB).  Se genera una regla que est√° configurada para cambiar este elemento.  Si la l√≥gica proporciona alguna reacci√≥n, por ejemplo, "si la temperatura ha descendido por debajo de cierto nivel", se realiza una acci√≥n, por ejemplo, "encender el calentador de la caldera".  Este comando se env√≠a por USB a la puerta de enlace.  Gateway env√≠a un comando por radio al controlador, el controlador recibe el comando y enciende el rel√© correspondiente.  Devuelve una confirmaci√≥n de recepci√≥n del comando.  Algo as√≠ se parece al esquema general de interacci√≥n de los componentes del sistema. </p></div></div><br><p>  <strong>El resultado</strong>  Objetivos iniciales alcanzados y a√∫n m√°s.  Las temperaturas se miden y visualizan en gr√°ficos y en la interfaz.  De acuerdo con los resultados de las observaciones, qued√≥ claro que la temperatura del agua caliente nunca sube por encima de los 55 grados, y el refrigerante en el circuito solar - 60, no tiene que preocuparse por el sobrecalentamiento.  Se puede ver que la temperatura del aire en la sala de calderas a veces supera los 30 grados y es necesario instalar aire acondicionado.  Se volvi√≥ conveniente controlar la calefacci√≥n, solo toque los interruptores virtuales en la pantalla del tel√©fono inteligente.  Siguiente        . ,    ,       .    ,         .   .     ¬´¬ª,      . <br>    .      ,  24..     ,  Raspberry Pi  2500. Arduino  AliExpress   200,    (nRF24L01+, )     .  ‚Äì .       - ,      .  Es decir      . </p><br><div class="spoiler"> <b class="spoiler_title">,     .</b> <div class="spoiler_text"><p>  ,    .  ‚Äî 11.05.2018. ,        49 .     38,      35 .      .           .     . <img src="https://habrastorage.org/webt/a3/ba/3w/a3ba3wjudxbn9u-x-xcp2yjjhvo.jpeg"></p></div></div><br><p> <strong></strong> .  ,  ,          . ,   ,    C++,  Arduino, .     ,         openHAB.  ,        ‚Äì .      . - ,      ,  .    ¬´¬ª.    , ,    .     .   ‚Äì  .         . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415477/">https://habr.com/ru/post/es415477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415467/index.html">Concurso de programaci√≥n: Comercio (anuncios)</a></li>
<li><a href="../es415469/index.html">Adblock para radio</a></li>
<li><a href="../es415471/index.html">Extensi√≥n PHP y Kotlin Native. Primera parte, ingenua</a></li>
<li><a href="../es415473/index.html">¬øQui√©n escanea Internet? Hora de forjar hierro</a></li>
<li><a href="../es415475/index.html">An√°lisis del c√≥digo heredado cuando se pierde el c√≥digo fuente: ¬øhacer o no hacer?</a></li>
<li><a href="../es415481/index.html">Venezuela bloquea conexiones directas a Tor y tr√°fico ofuscado a puentes</a></li>
<li><a href="../es415483/index.html">7 errores comunes al comparar sus servidores con la nube</a></li>
<li><a href="../es415485/index.html">Conduzca Kingston A1000: ¬øuna ambulancia para la computadora port√°til?</a></li>
<li><a href="../es415487/index.html">P√°ginas de la historia de Intel. Primer chip, Intel 3101</a></li>
<li><a href="../es415489/index.html">Facebook cierra proyecto de distribuci√≥n de Internet mediante drones sobre energ√≠a solar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>