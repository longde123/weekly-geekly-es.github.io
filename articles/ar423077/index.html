<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ช๐ป ๐ค ๐ฅซ ุฏููู ูุฌูุน X86 ูููุจุชุฏุฆูู ๐จ๐ฟโ๐ค ๐ฉ๐พโ๐คโ๐จ๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูููุช ุงูุญุงุถุฑ ุ ูุงุฏุฑูุง ูุง ูููู ูู ุงูุถุฑูุฑู ุฃู ุชูุชุจ ูู ูุฌูุน ููู ุ ููููู ุจุงูุชุฃููุฏ ุฃูุตู ุจุฐูู ูุฃู ุดุฎุต ููุชู ุจุงูุจุฑูุฌุฉ. ุณุชุฑู ุฃุดูุงุก ูู ุฒุงููุฉ ูุฎุชููุฉ ุ ูุณุชููู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฏููู ูุฌูุน X86 ูููุจุชุฏุฆูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423077/" style=";text-align:right;direction:rtl"> ูู ุงูููุช ุงูุญุงุถุฑ ุ ูุงุฏุฑูุง ูุง ูููู ูู ุงูุถุฑูุฑู ุฃู ุชูุชุจ ูู ูุฌูุน ููู ุ ููููู ุจุงูุชุฃููุฏ ุฃูุตู ุจุฐูู ูุฃู ุดุฎุต ููุชู ุจุงูุจุฑูุฌุฉ.  ุณุชุฑู ุฃุดูุงุก ูู ุฒุงููุฉ ูุฎุชููุฉ ุ ูุณุชููู ุงูููุงุฑุงุช ูููุฏุฉ ุนูุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุจุฑูุฌูุฉ ุจูุบุงุช ุฃุฎุฑู. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณููุชุจ ูู ุงูุตูุฑ ุขูุฉ ุญุงุณุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฏููููุง ุจูููุฏููุง ุนูุณููุง (RPN)</a> ูู ูุฌูุน x86 ุฎุงูุต.  ุนูุฏูุง ููุชูู ุ ูููููุง ุงุณุชุฎุฏุงูู ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">$ ./calc <span class="hljs-string"><span class="hljs-string">"32+6*"</span></span> <span class="hljs-comment"><span class="hljs-comment"># "(3+2)*6"    30</span></span></code> </pre> <br>  ูู ููุฏ ุงูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .  ุชู ุงูุชุนููู ุนูููุง ุจููุฑุฉ ููููู ุฃู ุชููู ุจูุซุงุจุฉ ูุงุฏุฉ ุชุนููููุฉ ูุฃููุฆู ุงูุฐูู ูุนุฑููู ุจุงููุนู ุงููุฌูุน. <br><br>  ููุจุฏุฃ ุจูุชุงุจุฉ ุจุฑูุงูุฌ <i>Hello world</i> ุงูุฃุณุงุณู <i>!</i>  ููุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ.  ุซู ุฏุนูุง ููุชูู ุฅูู ููุงููุงุช ุงููุธุงู ุ ููุฏุณ ุงูููุงููุฉ ุ ุฅุทุงุฑุงุช ููุฏุณ ุ ุงุตุทูุงุญ ุงุณุชุฏุนุงุก x86.  ุจุนุฏ ุฐูู ุ ููููุงุฑุณุฉ ุ ุณููุชุจ ุจุนุถ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ูู x86 ุงููุฌูุน - ููุจุฏุฃ ูู ูุชุงุจุฉ ุญุงุณุจุฉ RPN. <br><a name="habracut"></a><br>  ูู ุงูููุชุฑุถ ุฃู ุงููุงุฑุฆ ูุฏูู ุจุนุถ ุงูุฎุจุฑุฉ ูู ุงูุจุฑูุฌุฉ C ูุงููุนุฑูุฉ ุงูุฃุณุงุณูุฉ ุจููุฏุณุฉ ุงูููุจููุชุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูู ุณุฌู ุงููุนุงูุฌ).  ูุธุฑูุง ูุฃููุง ุณูุณุชุฎุฏู Linux ุ ูุฌุจ ุฃู ุชููู ูุงุฏุฑูุง ุฃูุถูุง ุนูู ุงุณุชุฎุฏุงู ุณุทุฑ ุฃูุงูุฑ Linux. <br><br><h1 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุจูุฆุฉ </h1><br>  ููุง ุฐูุฑูุง ูู ูุจู ุ ูุณุชุฎุฏู Linux (64 ุจุช ุฃู 32 ุจุช).  ุงูุฑูุฒ ุฃุนูุงู ูุง ูุนูู ุนูู Windows ุฃู Mac OS X. <br><br>  ููุชุซุจูุช ุ ุชุญุชุงุฌ ููุท ุฅูู ุฑุงุจุท GNU <code>ld</code> ูู <code>binutils</code> ุ ููู ูุซุจุช ูุณุจููุง ุนูู ูุนุธู ุงูุชูุฒูุนุงุช ุ ููุฌูุน NASM.  ุนูู Ubuntu ู Debian ุ ููููู ุชุซุจูุช ูู ููููุง ุจุงุณุชุฎุฏุงู ุฃูุฑ ูุงุญุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ sudo apt-get install binutils nasm</code> </pre> <br>  ุฃูุตู ุฃูุถูุง ุจุงูุญูุงุธ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุฌุฏูู ASCII ูู</a> ูุชูุงูู ุงููุฏ. <br><br><h1 style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุนุงูู! </h1><br>  ููุชุญูู ูู ุงูุจูุฆุฉ ุ ุงุญูุธ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ูู ููู <code>calc.asm</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs 1c">;   <span class="hljs-built_in"><span class="hljs-built_in"></span></span> _start     ; . global _start ;   .rodata  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ( <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ) ;   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,       section .rodata ;     hello_world.   NASM ;   ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  , ;  . <span class="hljs-number"><span class="hljs-number">0</span></span>xA =  <span class="hljs-built_in"><span class="hljs-built_in"></span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>x0 =    hello_world: db <span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>xA, <span class="hljs-number"><span class="hljs-number">0</span></span>x0 ;   .text,     section .text _start: mov eax, <span class="hljs-number"><span class="hljs-number">0</span></span>x04 ;  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>   eax (<span class="hljs-number"><span class="hljs-number">0</span></span>x04 = write()) mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span>x1 ;   (<span class="hljs-number"><span class="hljs-number">1</span></span> =  , <span class="hljs-number"><span class="hljs-number">2</span></span> =  ) mov ecx, hello_world ;     mov edx, <span class="hljs-number"><span class="hljs-number">14</span></span> ;   int <span class="hljs-number"><span class="hljs-number">0</span></span>x80 ;  <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  <span class="hljs-number"><span class="hljs-number">0</span></span>x80,   ;     mov eax, <span class="hljs-number"><span class="hljs-number">0</span></span>x01 ; <span class="hljs-number"><span class="hljs-number">0</span></span>x01 = exit() mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> =   int <span class="hljs-number"><span class="hljs-number">0</span></span>x80</code> </pre> <br>  ุชุดุฑุญ ุงูุชุนูููุงุช ุงููููู ุงูุนุงู.  ููุญุตูู ุนูู ูุงุฆูุฉ ุจุงูุณุฌูุงุช ูุงูุชุนูููุงุช ุงูุนุงูุฉ ุ ุฑุงุฌุน ุฏููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌุงูุนุฉ ูุฑุฌูููุง x86 Assembler</a> .  ูุน ูุฒูุฏ ูู ููุงูุดุฉ ููุงููุงุช ุงููุธุงู ุ ุณูููู ูุฐุง ุฃูุซุฑ ุถุฑูุฑุฉ. <br><br>  ุชุฌูุน ุงูุฃูุงูุฑ ุงูุชุงููุฉ ููู ุงูุชุฌููุน ูู ููู ูุงุฆู ุ ุซู ุชููู ุจุชุฑุฌูุฉ ุงูููู ุงููุงุจู ููุชูููุฐ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ nasm -f elf_i386 calc.asm -o calc $ ld -m elf_i386 calc.o -o calc</code> </pre> <br>  ุจุนุฏ ุงูุจุฏุก ุณุชุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ./calc Hello world!</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  Makefile </h3><br>  ูุฐุง ุฌุฒุก ุงุฎุชูุงุฑู ุ ูููู ููููู ุฅูุดุงุก ููู <code>Makefile</code> ูุชุจุณูุท ุงูุจูุงุก ูุงูุชุฎุทูุท ูู ุงููุณุชูุจู.  ุงุญูุธู ูู ููุณ ุงูุฏููู ูุซู <code>calc.asm</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">CFLAGS= <span class="hljs-operator"><span class="hljs-operator">-f</span></span> elf32 LFLAGS= <span class="hljs-literal"><span class="hljs-literal">-m</span></span> elf_i386 all: calc calc: calc.o ld <span class="hljs-variable"><span class="hljs-variable">$</span></span>(LFLAGS) calc.o <span class="hljs-literal"><span class="hljs-literal">-o</span></span> calc calc.o: calc.asm nasm <span class="hljs-variable"><span class="hljs-variable">$</span></span>(CFLAGS) calc.asm <span class="hljs-literal"><span class="hljs-literal">-o</span></span> calc.o clean: rm <span class="hljs-operator"><span class="hljs-operator">-f</span></span> calc.o calc .INTERMEDIATE: calc.o</code> </pre> <br>  ุซู ุ ุจุฏูุงู ูู ุงูุฅุฑุดุงุฏุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ุ ูู ุจุชุดุบูู ุงูุฃูุฑ. <br><br><h1 style=";text-align:right;direction:rtl">  ููุงููุงุช ุงููุธุงู </h1><br>  ุชุฎุจุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงููุงุช ูุธุงู Linux ูุธุงู</a> ุงูุชุดุบูู ุจูุนู ุดูุก ูุง ููุง.  ูู ูุฐู ุงูููุงูุฉ ุ ูุณุชุฎุฏู ููุท ููุงููุชูู ูููุธุงู: <code>write()</code> ููุชุงุจุฉ ุณุทุฑ ุฅูู ููู ุฃู ุฏูู (ูู ุญุงูุชูุง ุ ูุฐุง ุฌูุงุฒ ุฅุฎุฑุงุฌ ููุงุณู ูุฎุทุฃ ููุงุณู) <code>exit()</code> ููุฎุฑูุฌ ูู ุงูุจุฑูุงูุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">syscall</span></span> <span class="hljs-number"><span class="hljs-number">0x01</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> error_code) error_code -  <span class="hljs-number"><span class="hljs-number">0</span></span>         (  <span class="hljs-number"><span class="hljs-number">1</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">syscall</span></span> <span class="hljs-number"><span class="hljs-number">0x04</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fd, char *string, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>) fd โ  <span class="hljs-number"><span class="hljs-number">1</span></span>   , <span class="hljs-number"><span class="hljs-number">2</span></span>      string โ      <span class="hljs-keyword"><span class="hljs-keyword">length</span></span> โ    </code> </pre> <br>  ูุชู ุชูููู ููุงููุงุช ุงููุธุงู ุนู ุทุฑูู ุชุฎุฒูู ุฑูู ุงุณุชุฏุนุงุก ุงููุธุงู ูู ุณุฌู <code>eax</code> ุ ุซู <code>ecx</code> ูู <code>ebx</code> ุ <code>ecx</code> ุ <code>edx</code> ุจูุฐุง ุงูุชุฑุชูุจ.  ูุฏ ุชูุงุญุธ ุฃู <code>exit()</code> ูุณูุทุฉ ูุงุญุฏุฉ ููุท - ูู ูุฐู ุงูุญุงูุฉ ูุง ููู ecx ู edx. <br><br><table style=";text-align:right;direction:rtl"><tbody><tr><th>  eax </th><th>  ebx </th><th>  ecx </th><th>  EDX </th></tr><tr><td align="center">  ุฑูู ุงุณุชุฏุนุงุก ุงููุธุงู </td><td align="center">  arg1 </td><td align="center">  arg2 </td><td align="center">  arg3 </td></tr></tbody></table><br><br><h1 style=";text-align:right;direction:rtl">  ููุฏุณ ุงูุงุณุชุฏุนุงุก </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/2b0/574/ea2/2b0574ea20054a1e428d6f0518a80388.png"><br><br>  ููุฏุณ ุงูุงุณุชุฏุนุงุก ุนุจุงุฑุฉ ุนู ุจููุฉ ุจูุงูุงุช ุชููู ุจุชุฎุฒูู ูุนูููุงุช ุญูู ูู ุงุณุชุฏุนุงุก ููุธููุฉ.  ูู ููุงููุฉ ููุง ูุณููุง ุงูุฎุงุต ูู ุงูููุฏุณ - "ุงูุฅุทุงุฑ".  ูููู ุจุชุฎุฒูู ุจุนุถ ุงููุนูููุงุช ุญูู ุงูููุงููุฉ ุงูุญุงููุฉ: ุงููุชุบูุฑุงุช ุงููุญููุฉ ููุฐู ุงููุธููุฉ ูุนููุงู ุงูุฅุฑุฌุงุน (ุญูุซ ูุฌุจ ุฃู ูุฐูุจ ุงูุจุฑูุงูุฌ ุจุนุฏ ุชูููุฐ ุงููุธููุฉ). <br><br>  ุนูู ุงูููุฑ ุฃูุงุญุธ ุดูุฆูุง ูุงุญุฏูุง ุบูุฑ ูุงุถุญ: ุงูููุฏุณ ูููู ูู ุงูุฐุงูุฑุฉ.  ุนูุฏูุง ุชุถูู ุดูุฆูุง ุฅูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ ุ ูุชู ุฅุฏุฑุงุฌู ูู ุนููุงู ุฐุงูุฑุฉ ุฃูู ูู ุงูุนูุตุฑ ุงูุณุงุจู.  ุจูุนูู ุขุฎุฑ ุ ูุน ููู ุงูููุฏุณ ุ ููุฎูุถ โโุนููุงู ุงูุฐุงูุฑุฉ ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ.  ูุชุฌูุจ ุงูุงูุชุจุงุณ ุ ุณุฃุฐูุฑู ุฏุงุฆููุง ุจูุฐู ุงูุญูููุฉ. <br><br>  ุชุธูุฑ ุชุนูููุงุช <code>push</code> ุดูุฆูุง ูุง ููู ุงูููุฏุณ ุ ูุชูุจุซู ุงูุจูุงูุงุช ูู ููุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู <code>push </code> ุจุชุฎุตูุต ููุงู ูู ุฃุนูู ุงูููุฏุณ ููุถุน ุงููููุฉ ูู ุณุฌู <code>eax</code> ููุงู ุ ููููู <code>pop </code> ุจุชุญููู ุฃู ุจูุงูุงุช ูู ุฃุนูู ุงูููุฏุณ ุฅูู <code>eax</code> ููุญุฑุฑ ูุณุงุญุฉ ุงูุฐุงูุฑุฉ ูุฐู. <br><br>  ุงูุบุฑุถ ูู ุชุณุฌูู <code>esp</code> ูู ุงูุฅุดุงุฑุฉ ุฅูู ุฃุนูู ุงูููุฏุณ.  ุชุนุชุจุฑ ุฃู ุจูุงูุงุช ุฃุนูุงู <code>esp</code> ูุง ุชุตู ุฅูู ุงูููุฏุณ ุ ูุฐู ุจูุงูุงุช ุงูููุงูุฉ.  ุชูููุฐ ุนุจุงุฑุฉ <code>push</code> (ุฃู <code>pop</code> ) ุชุญุฑูุงุช <code>esp</code> .  ููููู ุงูุชูุงุนุจ ูู <code>esp</code> ุจุดูู ูุจุงุดุฑ ุ ุฅุฐุง ูุฏูุช ุชูุฑูุฑูุง ูุฃูุนุงูู. <br><br>  <code>ebp</code> ุณุฌู <code>ebp</code> <code>esp</code> ุ ููู ูุดูุฑ ููุท ุฏุงุฆููุง ุชูุฑูุจูุง ุฅูู ููุชุตู ุฅุทุงุฑ ุงูููุฏุณ ุงูุญุงูู ุ ูุจุงุดุฑุฉ ูุจู ุงููุชุบูุฑุงุช ุงููุญููุฉ ูููุธููุฉ ุงูุญุงููุฉ (ุณูุชุญุฏุซ ุนู ูุฐุง ูุงุญููุง).  ููุน ุฐูู ุ ูุง ูุคุฏู ุงุณุชุฏุนุงุก ูุธููุฉ ุฃุฎุฑู ุฅูู ููู <code>ebp</code> ุชููุงุฆููุง ุ ุจู ูุฌุจ ุฅุฌุฑุงุคู ูุฏูููุง ูู ูู ูุฑุฉ. <br><br><h1 style=";text-align:right;direction:rtl">  ุงุตุทูุงุญ ุงุณุชุฏุนุงุก ุงูุนูุงุฑุฉ X86 </h1><br>  ูู ุงูุฅุตุฏุงุฑ x86 ุ ูุง ููุฌุฏ ููููู ูุฏูุฌ ูููุธููุฉ ููุง ูู ุงูุญุงู ูู ุงููุบุงุช ุนุงููุฉ ุงููุณุชูู.  <code>goto</code> <code>call</code> <code>goto</code> ุงูุฃุณุงุณ ูุฌุฑุฏ <code>jmp</code> ( <code>goto</code> ุฅูู) ุฅูู ุนููุงู ุฐุงูุฑุฉ ุขุฎุฑ.  ูุงุณุชุฎุฏุงู ุงูุฅุฌุฑุงุกุงุช ููุธุงุฆู ูู ูุบุงุช ุฃุฎุฑู (ูุงูุชู ูููููุง ุงุณุชุนุงุฏุฉ ุงูุญุฌุฌ ูุฅุฑุฌุงุน ุงูุจูุงูุงุช) ุ ุชุญุชุงุฌ ุฅูู ุงุชุจุงุน ุงุตุทูุงุญ ุงูุงุณุชุฏุนุงุก (ููุงู ุงูุนุฏูุฏ ูู ุงูุงุตุทูุงุญุงุช ุ ูููููุง ูุณุชุฎุฏู CDECL ุ ุงููุตุทูุญ ุงูุฃูุซุฑ ุดููุนูุง ูู x86 ุจูู ุงููุจุฑูุฌูู C ููุจุฑูุฌู ุงูุชุฌููุน).  ููุง ูุถูู ุนุฏู ุงูุฎูุท ุจูู ุงูุณุฌูุงุช ุงูุฑูุชูููุฉ ุนูุฏ ุงุณุชุฏุนุงุก ูุธููุฉ ุฃุฎุฑู. <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุนุฏ ุงููุชุตู </h3><br>  ูุจู ุงุณุชุฏุนุงุก ุงููุธููุฉ ุ ูุฌุจ ุนูู ุงููุชุตู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุญูุธ ุงูุณุฌูุงุช ุงูุชู ูุทูุจ ูู ุงููุชุตู ุญูุธูุง ูู ุงูููุฏุณ.  ูููู ูููุธููุฉ ุงููุทููุจุฉ ุชุบููุฑ ุจุนุถ ุงูุชุณุฌููุงุช: ุญุชู ูุง ุชููุฏ ุงูุจูุงูุงุช ุ ูุฌุจ ุนูู ุงููุชุตู ุญูุธูุง ูู ุงูุฐุงูุฑุฉ ุญุชู ูุชู ุฏูุนูุง ุฅูู ุงูููุฏุณ.  ูุฐู ูู <code>ecx</code> <code>eax</code> ู <code>ecx</code> ู <code>edx</code> .  ุฅุฐุง ููุช ูุง ุชุณุชุฎุฏู ุฃููุง ูููุง ุ ููุง ููููู ุญูุธูุง. </li><li style=";text-align:right;direction:rtl">  ุงูุชุจ ูุณูุทุงุช ุงูุฏุงูุฉ ุฅูู ุงูููุฏุณ ุจุชุฑุชูุจ ุนูุณู (ุฃูู ุญุฌุฉ ุฃุฎูุฑุฉ ุ ุฃูู ุญุฌุฉ ุฃูููุฉ ูู ุงูููุงูุฉ).  ูุถูู ูุฐุง ุงูุชุฑุชูุจ ุฃู ุชุณุชุฏุนู ุงูุฏุงูุฉ ุงููุทููุจุฉ ูุณูุทุงุชูุง ูู ุงูููุฏุณ ุจุงูุชุฑุชูุจ ุงูุตุญูุญ. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก ุฑูุชูู. </li></ol><br>  ุฅู ุฃููู ุ <code>eax</code> ุงููุธููุฉ ุงููุชูุฌุฉ ูู <code>eax</code> .  ููุฑ ุงูุชูุงุก <code>call</code> ูุฌุจ ุนูู ุงููุชุตู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฒุงูุฉ ูุณุงุฆุท ุงูุฏุงูุฉ ูู ุงูููุฏุณ.  ูุชู ุฐูู ุนุงุฏุฉู ุนู ุทุฑูู ุฅุถุงูุฉ ุนุฏุฏ ุงูุจุงูุชุงุช ุฅูู <code>esp</code> .  ูุง ุชูุณ ุฃู ุงูููุฏุณ ูููู ุ ูุฐุง ููุฅุฒุงูุฉ ูู ุงูููุฏุณ ุ ูุฌุจ ุนููู ุฅุถุงูุฉ ุจุงูุช. </li><li style=";text-align:right;direction:rtl">  ูู ุจุงุณุชุนุงุฏุฉ ุงูุณุฌูุงุช ุงููุญููุธุฉ ุนู ุทุฑูู ุฅุฎุฑุงุฌูุง ูู ุงูููุฏุณ ุจุงูุชุฑุชูุจ ุงูุนูุณู.  ูู ุชุบูุฑ ุงููุธููุฉ ุงููุทููุจุฉ ุฃู ุชุณุฌููุงุช ุฃุฎุฑู. </li></ol><br>  ููุถุญ ุงููุซุงู ุงูุชุงูู ููููุฉ ุชุทุจูู ูุฐู ุงูููุงุนุฏ.  ุงูุชุฑุถ ุฃู ุงูุฏุงูุฉ <code>_subtract</code> ุชุฃุฎุฐ <code>_subtract</code> (4 ุจุงูุช) ูุชูุฑุฌุน ุงููุณูุทุฉ ุงูุฃููู ูุงูุต ุงูุซุงููุฉ.  ูู ุฑูุชูู <code>_mysubroutine</code> ุงุณุชุฏุนุงุก <code>_subtract</code> ูุน ุงููุณุงุฆุท <code>10</code> ู <code>2</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">_mysubroutine: ; ... ;  -  ; ... <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx ;   (    eax) <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ;  ,      <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> call _subtract ; eax   <span class="hljs-number"><span class="hljs-number">10</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-number"><span class="hljs-number">8</span></span> add esp, <span class="hljs-number"><span class="hljs-number">8</span></span> ;  <span class="hljs-number"><span class="hljs-number">8</span></span>    (   <span class="hljs-number"><span class="hljs-number">4</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx ;    <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx ; ... ;  - ,        eax ; ...</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ููุงุนุฏ ุงูุฑูุชูู ุงููุณูู </h3><br>  ูุจู ุงูุงุชุตุงู ุ ูุฌุจ ุฃู ูููู ุงูุฑูุชูู ุงููุฑุนู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุญูุธ ูุคุดุฑ ุชุณุฌูู ูุงุนุฏุฉ <code>ebp</code> ููุฅุทุงุฑ ุงูุณุงุจู ุนู ุทุฑูู ูุชุงุจุชู ุฅูู ุงูููุฏุณ. </li><li style=";text-align:right;direction:rtl">  ุงุถุจุท <code>ebp</code> ูู ุงูุฅุทุงุฑ ุงูุณุงุจู ุฅูู ุงูุชูุงุฑ (ูููุฉ <code>esp</code> ุงูุญุงููุฉ). </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุฎุตูุต ูุณุงุญุฉ ุฃูุจุฑ ุนูู ุงูููุฏุณ ูููุชุบูุฑุงุช ุงููุญููุฉ ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุญุฑู ุงููุคุดุฑ <code>esp</code> .  ูุน ููู ุงูููุฏุณ ุ ุชุญุชุงุฌ ุฅูู ุทุฑุญ ุงูุฐุงูุฑุฉ ุงูููููุฏุฉ ูู <code>esp</code> . </li><li style=";text-align:right;direction:rtl">  ุงุญูุธ ุณุฌูุงุช ุงูุฑูุชูู ุงููุทููุจ ุนูู ุงูููุฏุณ.  ูุฐู ูู <code>ebx</code> ู <code>edi</code> ู <code>esi</code> .  ููุณ ูู ุงูุถุฑูุฑู ุญูุธ ุงูุณุฌูุงุช ุงูุชู ููุณ ูู ุงููุฎุทุท ุชุบููุฑูุง. </li></ol><br>  ููุฏุณ ุงูุงุชุตุงู ุจุนุฏ ุงูุฎุทูุฉ 1: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d15/55e/4c4/d1555e4c4d0851f1f8ddec2b527e4877.png"><br><br>  ููุฏุณ ุงูููุงููุฉ ุจุนุฏ ุงูุฎุทูุฉ 2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ba/e1a/9bc/2bae1a9bc4aff273c6badbd5ec94d2c8.png"><br><br>  ููุฏุณ ุงูุงุชุตุงู ุจุนุฏ ุงูุฎุทูุฉ 4: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c4/4bf/a7b/8c44bfa7bfb67546110925a9606e27cd.png"><br><br>  ูู ูุฐู ุงูุฑุณูู ุงูุจูุงููุฉ ุ ูุดุงุฑ ุฅูู ุนููุงู ุงููุฑุณู ูู ูู ุฅุทุงุฑ ููุฏุณ.  ูุชู ุฏูุนูุง ุชููุงุฆููุง ุฅูู ุงูููุฏุณ ูู ุฎูุงู ุจูุงู <code>call</code> .  ุชุณุชุฑุฌุน <code>ret</code> ุงูุนููุงู ูู ุฃุนูู ุงูููุฏุณ ูุชูุชูู ุฅููู.  ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ูุฐู ุงูุชุนูููุงุช ุ ููุฏ ุฃูุถุญุช ููุชู ููุงุฐุง ุงููุชุบูุฑุงุช ุงููุญููุฉ ููุฏุงูุฉ ูู 4 ุจุงูุช ููู <code>ebp</code> ุ ููู ุญุฌุฌ ุงูุฏุงูุฉ ูู 8 ุจุงูุช ุชุญุช <code>ebp</code> . <br><br>  ูู ุงูุฑุณู ุงูุชุฎุทูุทู ุงูุฃุฎูุฑ ุ ููููู ุฃูุถูุง ููุงุญุธุฉ ุฃู ุงููุชุบูุฑุงุช ุงููุญููุฉ ููุฏุงูุฉ ุชุจุฏุฃ ุฏุงุฆููุง 4 ุจุงูุช ููู <code>ebp</code> ูู ุนููุงู <code>ebp-4</code> (ุงูุทุฑุญ ููุง ุ ูุฃููุง <code>ebp-4</code> ุงูููุฏุณ) ุ ูุชุจุฏุฃ ุงูุญุฌุฌ ุงูุฎุงุตุฉ ุจุงููุธููุฉ ุฏุงุฆููุง 8 ุจุงูุช ุชุญุช <code>ebp</code> ูู ุนููุงู <code>ebp+8</code> address <code>ebp+8</code> (ุจุงูุฅุถุงูุฉ ุ ูุฃููุง ูุชุญุฑู ุฅูู ุฃุณูู ุงูููุฏุณ).  ุฅุฐุง ุงุชุจุนุช ููุงุนุฏ ูุฐู ุงูุงุชูุงููุฉ ุ ูุณูููู ุงูุฃูุฑ ูุฐูู ูุน ุงููุชุบูุฑุงุช ูุงูุญุฌุฌ ุงูุฎุงุตุฉ ุจุฃู ูุธููุฉ. <br><br>  ุนูุฏ ุงูุชูุงู ุงููุธููุฉ ูุชุฑูุฏ ุฅุฑุฌุงุนูุง ุ ูุฌุจ ุนููู ุฃููุงู ุชุนููู <code>eax</code> ุนูู ูููุฉ ุงูุฅุฑุฌุงุน ููุฏุงูุฉ ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุชุงุฌ ุฅูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุงุณุชุนุงุฏุฉ ุงูุณุฌูุงุช ุงููุญููุธุฉ ุนู ุทุฑูู ุฅุฎุฑุงุฌูุง ูู ุงูููุฏุณ ุจุชุฑุชูุจ ุนูุณู. </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุญุฑูุฑ ูุณุงุญุฉ ุนูู ุงูููุฏุณ ุงููุฎุตุต ุจูุงุณุทุฉ ุงููุชุบูุฑ ุงููุญูู ูู ุงูุฎุทูุฉ 3 ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ: ุจุจุณุงุทุฉ ุนู ุทุฑูู ุชุซุจูุช <code>esp</code> ูู ebp </li><li style=";text-align:right;direction:rtl">  ูู ุจุงุณุชุนุงุฏุฉ ูุคุดุฑ ูุงุนุฏุฉ <code>ebp</code> ููุฅุทุงุฑ ุงูุณุงุจู ุนู ุทุฑูู <code>ebp</code> ูู ุงูููุฏุณ. </li><li style=";text-align:right;direction:rtl">  ุงูุนูุฏุฉ ูุน <code>ret</code> </li></ol><br>  ุงูุขู ูููู ุจุชุทุจูู ุฏุงูุฉ <code>_subtract</code> ูู ูุซุงููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">_subtract: <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebp ;      mov ebp, esp ;  ebp ;          ,      ;       ,     ;   ;    mov eax, [ebp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;      eax.  ;       ebp+<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function">, [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ebp</span></span></span><span class="hljs-function">+12] </span></span>;      ebp+<span class="hljs-number"><span class="hljs-number">12</span></span>   ;  ;   , eax     ;     ,     ;       ,       <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ebp ;      ret</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงูุฏุฎูู ูุงูุฎุฑูุฌ </h3><br>  ูู ุงููุซุงู ุฃุนูุงู ุ ููููู ููุงุญุธุฉ ุฃู ุงููุธููุฉ ุชุนูู ุฏุงุฆููุง ุจููุณ ุงูุทุฑููุฉ: <code>push ebp</code> ู <code>mov ebp</code> ู <code>esp</code> ูุชุฎุตูุต ุงูุฐุงูุฑุฉ ูููุชุบูุฑุงุช ุงููุญููุฉ.  ุชุญุชูู ูุฌููุนุฉ x86 ุนูู ุชุนูููุงุช ููุงุฆูุฉ ุชููู ุจูู ุฐูู: <code>enter ab</code> ุ ุญูุซ <code>a</code> ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุงูุชู ุชุฑูุฏ ุชุฎุตูุตูุง ูููุชุบูุฑุงุช ุงููุญููุฉ ุ ู <code>b</code> ูู "ูุณุชูู ุงูุชุฏุงุฎู" ุ ูุงูุฐู ุณูุถุจุทู ุฏุงุฆููุง ุนูู <code>0</code> .  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชูุชูู ุงููุธููุฉ ุฏุงุฆููุง ุจุงูุชุนูููุงุช <code>pop ebp</code> ู <code>mov esp</code> ู <code>ebp</code> (ุนูู ุงูุฑุบู ูู ุฃููุง ุถุฑูุฑูุฉ ููุท ุนูุฏ ุชุฎุตูุต ุฐุงูุฑุฉ ูููุชุบูุฑุงุช ุงููุญููุฉ ุ ูููู ุนูู ุฃู ุญุงู ูุง ุชุถุฑ).  ูููู ุฃูุถูุง ุงุณุชุจุฏุงู ูุฐุง ุจุจูุงู ูุงุญุฏ: <code>leave</code> .  ูุฌุฑู ุชุบููุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">_subtract: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;        ebp ;       ,     ;   ;    mov eax, [ebp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;      eax.  ;       ebp+<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function">, [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ebp</span></span></span><span class="hljs-function">+12] </span></span>;      ebp+<span class="hljs-number"><span class="hljs-number">12</span></span>  ;   ;   , eax     ;     ,     leave ;      ret</code> </pre> <br><h1 style=";text-align:right;direction:rtl">  ูุชุงุจุฉ ุจุนุถ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ </h1><br>  ุจุนุฏ ุฅุชูุงู ุงุชูุงููุฉ ุงูุงุชุตุงู ุ ููููู ุงูุจุฏุก ูู ูุชุงุจุฉ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช.  ููุงุฐุง ูุง ุชุนูู ุงูููุฏ ุงูุฐู ูุนุฑุถ "Hello world!" ูุฅุฎุฑุงุฌ ุฃู ุฃุณุทุฑ: ุฏุงูุฉ <code>_print_msg</code> . <br><br>  ููุง ูุญุชุงุฌ ุฅูู ูุธููุฉ <code>_strlen</code> ุฃุฎุฑู ูุญุณุงุจ ุทูู ุงูุณูุณูุฉ.  ูู ูุบุฉ C ุ ูุฏ ุชุจุฏู ูุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *s) { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> length = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*s != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   length++; s++; } //   return length; }</span></span></code> </pre> <br>  ุจูุนูู ุขุฎุฑ ุ ููุฐ ุจุฏุงูุฉ ุงูุณุทุฑ ุ ูุถูู 1 ุฅูู ุงููููุฉ ุงููุฑุฌุนุฉ ููู ุญุฑู ุจุงุณุชุซูุงุก ุงูุตูุฑ.  ุจูุฌุฑุฏ ููุงุญุธุฉ ุงูุญุฑู ุงููุงุฑุบ ุ ูุนูุฏ ุงููููุฉ ุงููุชุฑุงููุฉ ูู ุงูุญููุฉ.  ูู ุฃุฏุงุฉ ุงูุชุฌููุน ุ ูุนุฏ ูุฐุง <code>_subtract</code> ุจุณูุทูุง ููุบุงูุฉ: ููููู ุงุณุชุฎุฏุงู ูุธููุฉ <code>_subtract</code> ุงูููุชูุจุฉ ูุณุจููุง ููุงุนุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs 1c">_strlen: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;        ebp ;       ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ;   ;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function">, 0 ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">length</span></span></span><span class="hljs-function"> = 0 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ecx</span></span></span><span class="hljs-function">, [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ebp</span></span></span><span class="hljs-function">+8] ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">   ;  </span></span></span></span>)   ecx (   ; ,      ) _strlen_loop_start: ;  ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> cmp byte [ecx], <span class="hljs-number"><span class="hljs-number">0</span></span> ;       . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ;    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>  (<span class="hljs-number"><span class="hljs-number">4</span></span> ). ;    .    ;     ( <span class="hljs-built_in"><span class="hljs-built_in"></span></span>) je _strlen_loop_end ;  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     inc eax ;    ,  <span class="hljs-number"><span class="hljs-number">1</span></span>    add ecx, <span class="hljs-number"><span class="hljs-number">1</span></span> ;       jmp _strlen_loop_start ;      _strlen_loop_end: ;  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">leave</span></span></span><span class="hljs-function"> ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ret</span></span></span></span></code> </pre> <br>  ุจุงููุนู ููุณ ุณูุฆุง ุ ุฃููุณ ูุฐููุ  ูุฏ ุชุณุงุนุฏ ูุชุงุจุฉ ููุฏ C ุฃููุงู ุ ูุฃูู ูุชู ุชุญููู ูุนุธูู ูุจุงุดุฑุฉ ุฅูู ุงููุฌูุน.  ููููู ุงูุขู ุงุณุชุฎุฏุงู ูุฐู ุงููุธููุฉ ูู <code>_print_msg</code> ุ ุญูุซ ูุทุจู ูู ุงููุนุงุฑู ุงูููุชุณุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">_print_msg: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    mov eax, <span class="hljs-number"><span class="hljs-number">0x04</span></span> ; <span class="hljs-number"><span class="hljs-number">0x04</span></span> =   <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>() mov ebx, <span class="hljs-number"><span class="hljs-number">0x1</span></span> ; <span class="hljs-number"><span class="hljs-number">0x1</span></span> =   mov ecx, [ebp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;       , ;   edx   .    _strlen <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax ;     (    edx) <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> dword [ebp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;   _strlen  _print_msg.  NASM ; ,    ,  , . ;      dword (<span class="hljs-number"><span class="hljs-number">4</span></span> , <span class="hljs-number"><span class="hljs-number">32</span></span> ) call _strlen ; eax     mov edx, eax ;     edx,     add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> ;  <span class="hljs-number"><span class="hljs-number">4</span></span>    ( <span class="hljs-number"><span class="hljs-number">4</span></span>-  char*) <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx ;     <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ;      _strlen,     <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> leave ret</code> </pre> <br>  ูุดุงูุฏ ุซูุงุฑ ุนูููุง ุงูุดุงู ุ ุจุงุณุชุฎุฏุงู ูุฐู ุงููุธููุฉ ูู ุงูุจุฑูุงูุฌ ุงููุงูู "Helloุ world!". <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">_start: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;     (    ) push hello_world ;    _print_msg <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> _print_msg mov eax, <span class="hljs-number"><span class="hljs-number">0x01</span></span> ; <span class="hljs-number"><span class="hljs-number">0x01</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>() mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> =   <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br>  ุตุฏู ุฃู ูุง ุชุตุฏู ุ ููุฏ ุบุทููุง ุฌููุน ุงูููุถูุนุงุช ุงูุฑุฆูุณูุฉ ุงููุงุฒูุฉ ููุชุงุจุฉ ุจุฑุงูุฌ ุชุฌููุน x86 ุงูุฃุณุงุณูุฉ!  ุงูุขู ูุฏููุง ุฌููุน ุงูููุงุฏ ูุงููุธุฑูุฉ ุงูุชูููุฏูุฉ ุ ูุฐูู ุณูุฑูุฒ ุชูุงููุง ุนูู ุงูุดูุฑุฉ ููุทุจู ุงููุนุฑูุฉ ุงูููุชุณุจุฉ ููุชุงุจุฉ ุญุงุณุจุฉ RPN ุงูุฎุงุตุฉ ุจูุง.  ุณุชููู ุงููุธุงุฆู ุฃุทูู ุจูุซูุฑ ูุณุชุณุชุฎุฏู ุจุนุถ ุงููุชุบูุฑุงุช ุงููุญููุฉ.  ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชุฑู ุงูุจุฑูุงูุฌ ุงูููุงุฆู ุนูู ุงูููุฑ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ูู</a> . <br><br>  ุจุงููุณุจุฉ ูุฃููุฆู ูููู ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจุงูุฑููุฒ ุงูุจูููุฏูุฉ ุงูุนูุณูุฉ (ุชุณูู ุฃุญูุงููุง ุงูุชุฑููุฒ ุงูุจูููุฏู ุงูุนูุณู ุฃู ุชุฏููู postfix) ุ ูุชู ุชูููู ุงูุชุนุจูุฑุงุช ุจุงุณุชุฎุฏุงู ุงูููุฏุณ.  ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ููุฏุณ ุ ุจุงูุฅุถุงูุฉ ุฅูู <code>_push</code> ู <code>_push</code> ููุนุงูุฌุฉ ูุฐุง ุงูููุฏุณ.  ุณุชุญุชุงุฌ ุฃูุถูุง <code>_print_answer</code> ูุธููุฉ <code>_print_answer</code> ุ ุงูุชู <code>_print_answer</code> ุชูุซูู ุณูุณูุฉ ูููุชูุฌุฉ ุงูุนุฏุฏูุฉ ูู ููุงูุฉ ุงูุญุณุงุจ. <br><br><h1 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงูููุฏุณ </h1><br>  ุฃููุงู ุ ูุญุฏุฏ ุงููุณุงุญุฉ ูู ุงูุฐุงูุฑุฉ <code>stack_size</code> ุ ููุฐูู ูุชุบูุฑ <code>stack_size</code> .  ูู ุงููุณุชุญุณู ุชุบููุฑ ูุฐู ุงููุชุบูุฑุงุช ุจุญูุซ ูุง ุชูุน ูู ูุณู <code>.rodata</code> ุ ูููู ูู <code>.data</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">section</span></span> .<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> stack_size: dd 0 ;   dword (4 )   0 stack: times 256 dd 0 ;   </span></span></code> </pre> <br>  ููููู ุงูุขู ุชูููุฐ <code>_push</code> ู <code>_push</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">_push: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    ,    push eax push edx mov eax, [<span class="hljs-type"><span class="hljs-type">stack_size</span></span>] mov edx, [<span class="hljs-type"><span class="hljs-type">ebp</span></span>+<span class="hljs-number"><span class="hljs-number">8</span></span>] mov [<span class="hljs-type"><span class="hljs-type">stack</span></span> + <span class="hljs-number"><span class="hljs-number">4</span></span>*<span class="hljs-type"><span class="hljs-type">eax</span></span>], edx ;    .   ;       dword inc dword [<span class="hljs-type"><span class="hljs-type">stack_size</span></span>] ;  <span class="hljs-number"><span class="hljs-number">1</span></span>  stack_size ;     pop edx pop eax leave ret _pop: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;     dec dword [<span class="hljs-type"><span class="hljs-type">stack_size</span></span>] ;   <span class="hljs-number"><span class="hljs-number">1</span></span>  stack_size mov eax, [<span class="hljs-type"><span class="hljs-type">stack_size</span></span>] mov eax, [<span class="hljs-type"><span class="hljs-type">stack</span></span> + <span class="hljs-number"><span class="hljs-number">4</span></span>*<span class="hljs-type"><span class="hljs-type">eax</span></span>] ;       eax ;     ,     leave ret</code> </pre> <br><h1 style=";text-align:right;direction:rtl">  ุฅุฎุฑุงุฌ ุงูุนุฏุฏ </h1><br>  <code>_print_answer</code> ุฃูุซุฑ ุชุนููุฏูุง: ูุฌุจ ุนููู ุชุญููู ุงูุฃุฑูุงู ุฅูู ุณูุงุณู ูุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงูุฃุฎุฑู.  <code>_putc</code> ูุธููุฉ <code>_putc</code> ุ ุงูุชู <code>_putc</code> ุญุฑููุง ูุงุญุฏูุง ุ ููุธููุฉ <code>mod</code> ูุญุณุงุจ ูุง ุชุจูู ูู ูุณู (ูุญุฏุฉ) ูู ุงููุณูุทุชูู ู <code>_pow_10</code> ุฅูู ููุฉ 10. <code>_pow_10</code> ุฐูู ุณุชููู ุณุจุจ ุงูุญุงุฌุฉ ุฅูููุง.  ูุฐุง ุจุณูุท ุฌุฏูุง ุ ุฅููู ุงูุฑูุฒ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">_pow_10: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> mov ecx, [<span class="hljs-type"><span class="hljs-type">ebp</span></span>+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;  ecx (  )  ;  mov eax, <span class="hljs-number"><span class="hljs-number">1</span></span> ;   <span class="hljs-number"><span class="hljs-number">10</span></span> (<span class="hljs-number"><span class="hljs-number">10</span></span>**<span class="hljs-number"><span class="hljs-number">0</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>) _pow_10_loop_start: ;  eax  <span class="hljs-number"><span class="hljs-number">10</span></span>,  ecx   <span class="hljs-number"><span class="hljs-number">0</span></span> cmp ecx, <span class="hljs-number"><span class="hljs-number">0</span></span> je _pow_10_loop_end imul eax, <span class="hljs-number"><span class="hljs-number">10</span></span> sub ecx, <span class="hljs-number"><span class="hljs-number">1</span></span> jmp _pow_10_loop_start _pow_10_loop_end: leave ret _mod: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> push ebx mov edx, <span class="hljs-number"><span class="hljs-number">0</span></span> ;   mov eax, [<span class="hljs-type"><span class="hljs-type">ebp</span></span>+<span class="hljs-number"><span class="hljs-number">8</span></span>] mov ebx, [<span class="hljs-type"><span class="hljs-type">ebp</span></span>+<span class="hljs-number"><span class="hljs-number">12</span></span>] idiv ebx ;  <span class="hljs-number"><span class="hljs-number">64</span></span>-  [<span class="hljs-type"><span class="hljs-type">edx</span></span>:<span class="hljs-type"><span class="hljs-type">eax</span></span>]  ebx.    ;  <span class="hljs-number"><span class="hljs-number">32</span></span>-  eax,    edx  ; . ;    eax,   edx.  ,  ;       , ;    . mov eax, edx ;     () pop ebx leave ret _putc: enter <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> mov eax, <span class="hljs-number"><span class="hljs-number">0</span></span>x04 ; write() mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> ;   lea ecx, [<span class="hljs-type"><span class="hljs-type">ebp</span></span>+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;   mov edx, <span class="hljs-number"><span class="hljs-number">1</span></span> ;   <span class="hljs-number"><span class="hljs-number">1</span></span>  int <span class="hljs-number"><span class="hljs-number">0</span></span>x80 leave ret</code> </pre> <br>  ุฅุฐู ุ ููู ูุญุตู ุนูู ุฃุฑูุงู ูุฑุฏูุฉ ูู ุฑููุ  ุฃููุงู ุ ูุงุญุธ ุฃู ุงูุฑูู ุงูุฃุฎูุฑ ูู ุงูุฑูู ูู ุจุงูู ุงููุณูุฉ ุนูู 10 (ุนูู ุณุจูู ุงููุซุงู ุ <code>123 % 10 = 3</code> ) ุ ูุงูุฑูู ุงูุชุงูู ูู ุจุงูู ุงููุณูุฉ ุนูู 100 ุ ููุณูููุง ุนูู 10 (ุนูู ุณุจูู ุงููุซุงู ุ <code>(123 % 100)/10 = 2</code> ).  ุจุดูู ุนุงู ุ ููููู ุงูุนุซูุฑ ุนูู ุฑูู ูุนูู ูุฑูู (ูู ุงููููู ุฅูู ุงููุณุงุฑ) ูู ุฎูุงู ุฅูุฌุงุฏ <code>( % 10**n) / 10**(n-1)</code> ุ ุญูุซ ุณูููู ุนุฏุฏ ุงููุญุฏุงุช <code>n = 1</code> ุ ูุนุฏุฏ ุงูุนุดุฑุงุช <code>n = 2</code> ูููุฐุง. <br><br>  ุจุงุณุชุฎุฏุงู ูุฐู ุงููุนุฑูุฉ ุ ููููู ุงูุนุซูุฑ ุนูู ุฌููุน ุฃุฑูุงู ุงูุนุฏุฏ ูู <code>n = 1</code> ุฅูู <code>n = 10</code> (ูุฐุง ูู ุฃูุตู ุนุฏุฏ ูู ุงูุจุชุงุช ูู ุนุฏุฏ ุตุญูุญ ููููุน ูู 4 ุจุงูุช).  ูููู ูู ุงูุฃุณูู ุงูุงูุชูุงู ูู ุงููุณุงุฑ ุฅูู ุงููููู - ุญุชู ูุชููู ูู ุทุจุงุนุฉ ูู ุญุฑู ุจูุฌุฑุฏ ุงูุนุซูุฑ ุนููู ูุงูุชุฎูุต ูู ุงูุฃุตูุงุฑ ุนูู ุงูุฌุงูุจ ุงูุฃูุณุฑ.  ูุฐูู ุ ูููู ุจูุฑุฒ ุงูุฃุฑูุงู ูู <code>n = 10</code> ุฅูู <code>n = 1</code> . <br><br>  ูู ูุบุฉ C ุ ุณูุจุฏู ุงูุจุฑูุงูุฌ ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_DIGITS 10 void print_answer(int a) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (a </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; 0) { //    putc('-'); //   ยซยป a = -a; //     } int started = 0; for (int i = MAX_DIGITS; i &gt; 0; i--) { int digit = (a % pow_10(i)) / pow_10(i-1); if (digit == 0 &amp;&amp; started == 0) continue; //     started = 1; putc(digit + '0'); } }</span></span></span></span></code> </pre> <br>   ,     .     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">%define MAX_DIGITS <span class="hljs-number"><span class="hljs-number">10</span></span> _print_answer: enter <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;  <span class="hljs-number"><span class="hljs-number">1</span></span>    <span class="hljs-string"><span class="hljs-string">"started"</span></span>   C <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edi <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> esi mov eax, [ebp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ;   <span class="hljs-string"><span class="hljs-string">"a"</span></span> cmp eax, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    ,    ;  jge _print_answer_negate_end ; call putc <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-string"><span class="hljs-string">'-'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">0x2d</span></span> ;  <span class="hljs-string"><span class="hljs-string">'-'</span></span> call _putc add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax neg eax ;     _print_answer_negate_end: mov byte [ebp-<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-number"><span class="hljs-number">0</span></span> ; started = <span class="hljs-number"><span class="hljs-number">0</span></span> mov ecx, MAX_DIGITS ;  i _print_answer_loop_start: cmp ecx, <span class="hljs-number"><span class="hljs-number">0</span></span> je _print_answer_loop_end ;  pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>  ecx.   ebx   <span class="hljs-string"><span class="hljs-string">"digit"</span></span>   C. ;    edx = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i-<span class="hljs-number"><span class="hljs-number">1</span></span>),  ebx = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i) <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx dec ecx ; i-<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx ;    _pow_1<span class="hljs-number"><span class="hljs-number">0</span></span> call _pow_1<span class="hljs-number"><span class="hljs-number">0</span></span> mov edx, eax ; edx = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i-<span class="hljs-number"><span class="hljs-number">1</span></span>) add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx ;   i  ecx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ; end pow_1<span class="hljs-number"><span class="hljs-number">0</span></span> call mov ebx, edx ; digit = ebx = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i-<span class="hljs-number"><span class="hljs-number">1</span></span>) imul ebx, <span class="hljs-number"><span class="hljs-number">10</span></span> ; digit = ebx = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i) ;  _mod  (a % pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i)),   (eax mod ebx) <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx ; arg2, ebx = digit = pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i) <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax ; arg1, eax = a call _mod mov ebx, eax ; digit = ebx = a % pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i+<span class="hljs-number"><span class="hljs-number">1</span></span>), almost there add esp, <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ;   mod ;  ebx ( <span class="hljs-string"><span class="hljs-string">"digit"</span></span> )  pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i) (edx).    ; ,   idiv     edx, eax.  ; edx   ,    - ;   <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> esi mov esi, edx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax mov eax, ebx mov edx, <span class="hljs-number"><span class="hljs-number">0</span></span> idiv esi ; eax   () mov ebx, eax ; ebx = (a % pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i)) / pow_1<span class="hljs-number"><span class="hljs-number">0</span></span>(i-<span class="hljs-number"><span class="hljs-number">1</span></span>),  <span class="hljs-string"><span class="hljs-string">"digit"</span></span>   C <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> esi ; end division cmp ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> ;  digit == <span class="hljs-number"><span class="hljs-number">0</span></span> jne _print_answer_trailing_zeroes_check_end cmp byte [ebp-<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-number"><span class="hljs-number">0</span></span> ;  started == <span class="hljs-number"><span class="hljs-number">0</span></span> jne _print_answer_trailing_zeroes_check_end jmp _print_answer_loop_continue ; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> _print_answer_trailing_zeroes_check_end: mov byte [ebp-<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-number"><span class="hljs-number">1</span></span> ; started = <span class="hljs-number"><span class="hljs-number">1</span></span> add ebx, <span class="hljs-number"><span class="hljs-number">0x30</span></span> ; digit + <span class="hljs-string"><span class="hljs-string">'0'</span></span> ;  putc <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx call _putc add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ;   putc _print_answer_loop_continue: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ecx</span></span></span><span class="hljs-function">, 1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jmp</span></span></span><span class="hljs-function"> _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_answer_loop_start</span></span></span><span class="hljs-function"> _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_answer_loop_end</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">esi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edi</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ebx</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">leave</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ret</span></span></span></span></code> </pre> <br>    ! ,   .    : ยซ    <code>printf("%d")</code> ?ยป,     ,      ! <br><br>       ,      <code>_start</code> โ    ! <br><br><h1 style=";text-align:right;direction:rtl">     </h1><br>    ,       .      ,          . <br><br> ,     <code>84/3+6*</code> (       <code>6384/+*</code> ),    : <br><br><table style=";text-align:right;direction:rtl"><tbody><tr><th>  </th><th>  </th><th>   </th><th>   </th></tr><tr><td align="center">  1 </td><td align="center"> <code>8</code> </td> <td align="center"> <code>[]</code> </td> <td align="center"> <code>[8]</code> </td> </tr><tr><td align="center">  2 </td><td align="center"> <code>4</code> </td> <td align="center"> <code>[8]</code> </td> <td align="center"> <code>[8, 4]</code> </td> </tr><tr><td align="center">  3 </td><td align="center"> <code>/</code> </td> <td align="center"> <code>[8, 4]</code> </td> <td align="center"> <code>[2]</code> </td> </tr><tr><td align="center">  4 </td><td align="center"> <code>3</code> </td> <td align="center"> <code>[2]</code> </td> <td align="center"> <code>[2, 3]</code> </td> </tr><tr><td align="center">  5 </td><td align="center"> <code>+</code> </td> <td align="center"> <code>[2, 3]</code> </td> <td align="center"> <code>[5]</code> </td> </tr><tr><td align="center">  6 </td><td align="center"> <code>6</code> </td> <td align="center"> <code>[5]</code> </td> <td align="center"> <code>[5, 6]</code> </td> </tr><tr><td align="center">  7 </td><td align="center"> <code>*</code> </td> <td align="center"> <code>[5, 6]</code> </td> <td align="center"> <code>[30]</code> </td> </tr></tbody></table><br>      ,           โ    ,  .      30. <br><br>          C: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-built_in"><span class="hljs-built_in">stack</span></span>[<span class="hljs-number"><span class="hljs-number">256</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// , 256      int stack_size = 0; int main(int argc, char *argv[]) { char *input = argv[0]; size_t input_length = strlen(input); for (int i = 0; i &lt; input_length; i++) { char c = input[i]; if (c &gt;= '0' &amp;&amp; c &lt;= '9') { //   โ   push(c - '0'); //          } else { int b = pop(); int a = pop(); if (c == '+') { push(a+b); } else if (c == '-') { push(ab); } else if (c == '*') { push(a*b); } else if (c == '/') { push(a/b); } else { error("Invalid input\n"); exit(1); } } } if (stack_size != 1) { error("Invalid input\n"); exit(1); } print_answer(stack[0]); exit(0); }</span></span></code> </pre> <br>      ,    ,  . <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs perl">_start: ;  _start   ,    . ;   esp    argc ( ),  ; esp+<span class="hljs-number"><span class="hljs-number">4</span></span>   argv. , esp+<span class="hljs-number"><span class="hljs-number">4</span></span>    ; , esp+<span class="hljs-number"><span class="hljs-number">8</span></span> -       mov esi, [esp+<span class="hljs-number"><span class="hljs-number">8</span></span>] ; esi = <span class="hljs-string"><span class="hljs-string">"input"</span></span> = argv[<span class="hljs-number"><span class="hljs-number">0</span></span>] ;  _strlen      <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> esi call _strlen mov ebx, eax ; ebx = input_length add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> ; end _strlen call mov ecx, <span class="hljs-number"><span class="hljs-number">0</span></span> ; ecx = <span class="hljs-string"><span class="hljs-string">"i"</span></span> _main_loop_start: cmp ecx, ebx ;  (i &gt;= input_length) jge _main_loop_end mov edx, <span class="hljs-number"><span class="hljs-number">0</span></span> mov dl, [esi + ecx] ;          ; edx.   edx . ; edx =  c = input[i] cmp edx, <span class="hljs-string"><span class="hljs-string">'0'</span></span> jl _check_operator cmp edx, <span class="hljs-string"><span class="hljs-string">'9'</span></span> jg _print_error <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edx</span></span></span><span class="hljs-function">, '0' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edx</span></span></span><span class="hljs-function"> </span></span>; eax =  c - <span class="hljs-string"><span class="hljs-string">'0'</span></span> (,  ) jmp _push_eax_and_continue _check_operator: ;   _pop    b  edi, a  b -  eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx call _pop mov edi, eax ; edi = b call _pop ; eax = a <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ebx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx ; end call _pop cmp edx, <span class="hljs-string"><span class="hljs-string">'+'</span></span> jne _subtract add eax, edi ; eax = a+b jmp _push_eax_and_continue _subtract: cmp edx, <span class="hljs-string"><span class="hljs-string">'-'</span></span> jne _multiply <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edi</span></span></span><span class="hljs-function"> </span></span>; eax = ab jmp _push_eax_and_continue _multiply: cmp edx, <span class="hljs-string"><span class="hljs-string">'*'</span></span> jne _divide imul eax, edi ; eax = a*b jmp _push_eax_and_continue _divide: cmp edx, <span class="hljs-string"><span class="hljs-string">'/'</span></span> jne _print_error <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx ;  edx,      idiv mov edx, <span class="hljs-number"><span class="hljs-number">0</span></span> idiv edi ; eax = a/b <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx ;   eax     _push_eax_and_continue: ;  _push <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax ;   call _push add esp, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ;  call _push inc ecx jmp _main_loop_start _main_loop_end: cmp byte [stack_size], <span class="hljs-number"><span class="hljs-number">1</span></span> ;  (stack_size != <span class="hljs-number"><span class="hljs-number">1</span></span>),   jne _print_error mov eax, [stack] <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax call _print_answer ; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> a final newline <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">0xA</span></span> call _putc ; <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> successfully mov eax, <span class="hljs-number"><span class="hljs-number">0x01</span></span> ; <span class="hljs-number"><span class="hljs-number">0x01</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>() mov ebx, <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> =   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> ;    _print_error: <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> error_msg call _print_msg mov eax, <span class="hljs-number"><span class="hljs-number">0x01</span></span> mov ebx, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br>     <code>error_msg</code>   <code>.rodata</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs 1c">section .rodata ;     error_msg.  db  NASM ;    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ; . <span class="hljs-number"><span class="hljs-number">0</span></span>xA =  <span class="hljs-built_in"><span class="hljs-built_in"></span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>x0 =    error_msg: db <span class="hljs-string"><span class="hljs-string">"Invalid input"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>xA, <span class="hljs-number"><span class="hljs-number">0</span></span>x0</code> </pre> <br>   !    ,     . ,          ,   ,           , ,  RollerCoaster Tycoon! <br><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> .   !  ,   . <br><br><h1 style=";text-align:right;direction:rtl">   </h1><br>  ,    : <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   segfault   ,     . </li><li style=";text-align:right;direction:rtl">           . </li><li style=";text-align:right;direction:rtl">    . </li><li style=";text-align:right;direction:rtl">    . </li><li style=";text-align:right;direction:rtl">  <code>_strlen</code>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  C</a> ,  <code>_print_answer</code>   <code>printf</code> . </li></ol><br><h1 style=";text-align:right;direction:rtl">   </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ   x86  ยป</a> โ     ,  ,          x86. </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ   Intelยป</a> .    x86 โ   ,      .        ,    ,      . </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NASM: Intel x86 Instruction Reference</a> โ       x86. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar423077/">https://habr.com/ru/post/ar423077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar423067/index.html">ุฃุฏูุงุช ูุทูุฑู Python ูู Microsoft. ุงูุดุฑูุน ูู ุงูุนูู</a></li>
<li><a href="../ar423069/index.html">ุญุฏุซ Apple ุงูุฎุงุต ุ ุณุจุชูุจุฑ 2018 [ุฃุฑุดูู ุชุฑุฌูุฉ ุงููุตูุต]</a></li>
<li><a href="../ar423071/index.html">ุฃูุง ูุณุช ุฎุงุฆูุง ูู ุงูุชุฌูุน ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar423073/index.html">ูุธุงู ุงููููุงุช ุจูู ุงูููุงูุจ - ุชุฌุฒุฆุฉ (ูููุฉ) ุชุงููุฉ ุ ูุชูุฉ DAG ููุฎุงุฒู ุงูุจุฑูุชูููู</a></li>
<li><a href="../ar423075/index.html">ููุงุฐุง ูุชูู ุงููุฏูุฑูู ุงููุงูููู ุฅูู ุชุฑุฌูุฉ ุงูุฅููุงู ุงูุฑุฃุณูุงูู ุนูู ุชูููููุฌูุง ุงููุนูููุงุช ุฅูู ุงูุชุดุบูู</a></li>
<li><a href="../ar423079/index.html">ุงูููุงุท ุงูุฑุฆูุณูุฉ ูู ููุงุจูุฉ ูุน Elon Musk ูู Joe Rogan</a></li>
<li><a href="../ar423083/index.html">ููู ุฃุตุจุญุช ูุทูุฑูุง ูู ABBYY</a></li>
<li><a href="../ar423085/index.html">ููุงุฒูุฉ ุญูู ุฏููู</a></li>
<li><a href="../ar423087/index.html">ูุง ุชุฏูุนูู ูู ุนููู</a></li>
<li><a href="../ar423089/index.html">ุงููุจุฑูุฌูู ูู MBLT DEV 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>