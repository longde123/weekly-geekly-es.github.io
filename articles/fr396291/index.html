<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌖 👨‍❤️‍💋‍👨 🎒 Utilisation de la caméra Microsoft Kinect 360 dans ROS Indigo ⛺️ 🕵🏿 🈸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, cher habratchiteli! 
 
 Des observations récentes et une expérience personnelle ont montré que la connexion d'une caméra Microsoft Kinect Xbo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de la caméra Microsoft Kinect 360 dans ROS Indigo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396291/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, cher habratchiteli! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des observations récentes et une expérience personnelle ont montré que la connexion d'une caméra Microsoft Kinect Xbox 360 pour une utilisation dans ROS Indigo sous Ubuntu 14.04 provoque souvent des problèmes. </font><font style="vertical-align: inherit;">En particulier, lors du démarrage du package ROS openni_launch, le périphérique ne peut pas être détecté et une erreur «Aucun périphérique connecté» est générée. </font><font style="vertical-align: inherit;">Dans cet article, je décrirai ma méthode étape par étape de configuration de l'environnement pour l'utilisation de Microsoft Kinect de ROS Indigo. </font><font style="vertical-align: inherit;">Qui est intéressé, s'il vous plaît sous la coupe!</font></font><a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appareil photo Microsoft Kinect</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce capteur a déjà été écrit en détail dans l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En bref, Microsoft Kinect est une caméra 3D (RGB-D, c'est-à-dire rouge, verte, bleue et profondeur) basée sur la technologie de lumière structurée, qui vous permet d'obtenir une carte de profondeur des surfaces des objets qui tombent dans le champ de vision de la caméra. La carte de profondeur peut être transformée en un «nuage» tridimensionnel de points, dans lequel chaque point a les coordonnées exactes X, Y et Z dans l'espace et, dans certains cas, la couleur au format RVB. Les «nuages» de points sont utilisés dans la reconstruction d'objets, la construction de cartes de terrain en robotique de service, la reconnaissance d'objets et de nombreuses autres tâches dans le domaine de la vision par ordinateur en 3D. </font></font><br>
<br>
<img src="https://habrastorage.org/files/d4d/4b0/3a8/d4d4b03a8c5641b58ff2228a37da09bd.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS prend en charge le capteur Kinect. Le «nuage» de points reçus par le capteur peut être affiché visuellement dans le programme rviz.</font></font><br>
<br>
<img src="https://habrastorage.org/files/cdc/d60/cbd/cdcd60cbdeaf455aa75278b445f7dfe7.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS propose des packages spéciaux openni_launch et openni_camera pour utiliser le capteur Kinect.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation du pilote pour le capteur Microsoft Kinect</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord installer la bibliothèque OpenNI, destinée à un certain nombre de capteurs RGB-D (Kinect, ASUS Xtion, PrimeSense). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez certains packages supplémentaires qu'OpenNI requiert pour installer:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install git build-essential python libusb-1.0-0-dev freeglut3-dev openjdk-7-jdk<font></font>
sudo apt-get install doxygen graphviz mono-complete<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez maintenant directement OpenNI 1.5.4 à partir des sources:</font></font><br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/OpenNI/OpenNI.git
<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> OpenNI<font></font>
git checkout Unstable-1.5.4.0<font></font>
<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Platform/Linux/CreateRedist<font></font>
chmod +x RedistMaker<font></font>
./RedistMaker<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Téléchargez maintenant la bibliothèque avin-KinectSensor pour le capteur Kinect à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir d'ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">unzip avin2-SensorKinect-v0.93-5.1.2.1-0-g15f1975.zip 
<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> avin2-SensorKinect-15f1975/Bin
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon le type de système (32 ou 64 bits), sélectionnez l'installateur approprié. </font><font style="vertical-align: inherit;">Pour un système 32 bits, procédez comme suit:</font></font><br>
 <br>
<pre><code class="bash hljs">tar -xjf SensorKinect093-Bin-Linux-x86-v5.1.2.1.tar.bz2
<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Sensor-Bin-Linux-x86-v5.1.2.1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un système 64 bits, nous ferons:</font></font><br>
<br>
<pre><code class="bash hljs">tar -xjf SensorKinect093-Bin-Linux-x64-v5.1.2.1.tar.bz2
<span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Sensor-Bin-Linux-x64-v5.1.2.1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, terminez l'installation:</font></font><br>
<br>
<pre><code class="bash hljs">sudo ./install.sh
</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer les packages openni_ *</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dernière chose que nous devons faire est d'installer les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packages openni_launch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openni_camera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui vous permettent de recevoir et de travailler avec des données provenant de caméras de profondeur compatibles OpenNI dans ROS. </font><font style="vertical-align: inherit;">L'installation de ces packages est très simple:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install ros-indigo-openni-camera ros-indigo-openni-launch
</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérification de l'installation du pilote</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, tout est prêt! </font><font style="vertical-align: inherit;">Vérifiez le succès de l'installation. </font><font style="vertical-align: inherit;">Exécuter dans différents terminaux:</font></font><br>
<br>
<pre><code class="bash hljs">roscore<font></font>
roslaunch openni_launch openni.launch depth_registration:=<span class="hljs-literal"><span class="hljs-literal">true</span></span><font></font>
rosrun rviz rviz<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La définition de l'argument depth_registration: = true indique que nous voulons activer l'enregistrement OpenNI et recevoir les données XYZRGB de la caméra (profondeur et couleur). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, dans rviz, développez la section Options globales dans la colonne d'affichage de gauche et définissez la valeur / camera_link pour le champ Cadre fixe comme dans l'image: </font></font><br>
<br>
<img src="https://habrastorage.org/files/70e/b0e/005/70eb0e005a074870b98aa12d89a18a17.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous définissons le système de coordonnées nécessaire pour l'affichage correct des données de la caméra Kinect. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans rviz, nous créons un nouvel affichage. Pour ce faire, cliquez sur le bouton Ajouter et sélectionnez le type d'affichage PointCloud2 comme dans l'image: </font></font><br>
<br>
<img src="https://habrastorage.org/files/610/db0/7d2/610db07d2c014b75ac2a3d3505187b31.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sélectionnez le sujet / caméra / profondeur_enregistrée / points pour le nouvel affichage. </font></font><br>
<br>
<img src="https://habrastorage.org/files/455/5a5/7d0/4555a57d0b104e21b3fa7e5fceb47ab4.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, sélectionnez la valeur "RGB8" pour le champ Transformateur de couleur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous allons voir une image similaire:</font></font><br>
<br>
<img src="https://habrastorage.org/files/173/aeb/e7c/173aebe7c36541719448f3008708546a.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une valeur de «RGB8» vous permet d'afficher un «nuage de points» coloré, où chaque point a les coordonnées X, Y, Z et la couleur RVB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je veux attirer votre attention sur le fait que Microsoft Kinect Xbox 360 ne fonctionne qu'avec USB 2.0. </font><font style="vertical-align: inherit;">La connexion de l'appareil photo via USB 3.0 peut entraîner une erreur de détection de périphérique, dont j'ai parlé au tout début de l'article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le portail officiel ROS propose des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didacticiels</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur l'utilisation des données de caméra RVB-D à l'aide de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliothèque de nuages ​​de points</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ces didacticiels fournissent toutes les informations dont vous avez besoin pour démarrer avec les nuages ​​de points. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous souhaite bonne chance dans l'utilisation des caméras RGBD dans ROS pour résoudre vos problèmes de vision par ordinateur!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr396291/">https://habr.com/ru/post/fr396291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr396279/index.html">Comparaison des kits d'alarme sans fil Ajax StarterKit et Xiaomi Smart Home Suite</a></li>
<li><a href="../fr396283/index.html">La naissance, l'apogée et la mort du télégraphe</a></li>
<li><a href="../fr396285/index.html">Le domaine public en tant qu'élément du commerce, ou alors que je cherchais «Guerre et paix» de Tolstoï ...</a></li>
<li><a href="../fr396287/index.html">Quand aurons-nous des robots domestiques utiles?</a></li>
<li><a href="../fr396289/index.html">Reconnaissance populaire: projets musicaux sur Kickstarter</a></li>
<li><a href="../fr396293/index.html">Япония выпустит последний видеомагнитофон VHS</a></li>
<li><a href="../fr396295/index.html">Sea of ​​Clarity Day 2: Attaques artistiques</a></li>
<li><a href="../fr396299/index.html">Physique dans le monde animal: patte de gecko</a></li>
<li><a href="../fr396301/index.html">Mégastructures spatiales théoriquement possibles</a></li>
<li><a href="../fr396303/index.html">Le propriétaire du plus grand tracker torrent du monde arrêté</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>