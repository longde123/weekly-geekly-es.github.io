<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëµüèª üç© üêì Station zur Messung von Windgeschwindigkeit und Windrichtung üòâ üëπ üßùüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine gew√∂hnliche Haushaltsmarke oder hausgemachte Wetterstation misst zwei Temperatur-Luftfeuchtigkeit (in einem Raum und auf der Stra√üe), Luftdruck u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Station zur Messung von Windgeschwindigkeit und Windrichtung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/404385/">  Eine gew√∂hnliche Haushaltsmarke oder hausgemachte Wetterstation misst zwei Temperatur-Luftfeuchtigkeit (in einem Raum und auf der Stra√üe), Luftdruck und hat zus√§tzlich eine Uhr mit einem Kalender.  Eine echte Wetterstation bietet jedoch noch viel mehr - einen Sonnenstrahlungssensor, einen Niederschlagsmesser und all das, was im Allgemeinen nur f√ºr berufliche Zwecke erforderlich ist, mit einer Ausnahme.  Ein Messinstrument f√ºr Windparameter (Geschwindigkeit und vor allem Richtung) ist eine sehr n√ºtzliche Erg√§nzung f√ºr ein Landhaus.  Dar√ºber hinaus sind Marken-Windsensoren selbst bei Ali Baba recht teuer, und es ist sinnvoll, hausgemachte L√∂sungen zu betrachten. <br><a name="habracut"></a><br>  Ich muss sofort sagen, wenn ich im Voraus w√ºsste, wie viel manuelle Arbeit und Geld f√ºr Experimente meine Idee aussch√ºtten w√ºrden, w√ºrde ich vielleicht nicht anfangen.  Aber die Neugier √ºberwog und die Leser dieses Artikels haben die Chance, die Fallstricke zu vermeiden, √ºber die ich stolpern musste. <br><br>  Zur <b>Messung der Windgeschwindigkeit</b> (Anemometrie) gibt es Hunderte von Methoden, von denen die wichtigsten sind: <br><br>  - Hei√üdraht, <br>  - mechanisch - mit einem Propeller (genauer gesagt einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laufrad</a> ) oder einem horizontalen Becherlaufrad (klassisches <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Becheranemometer</a> ). Die Messung der Geschwindigkeit entspricht in diesen F√§llen der Messung der Geschwindigkeit der Achse, auf der der Propeller oder das Laufrad montiert ist. <br>  - sowie Ultraschall, der Geschwindigkeits- und Richtungsmessungen kombiniert. <br>  Um <b>die Richtung der</b> Methoden weniger zu <b>messen</b> : <br>  - erw√§hnter Ultraschall; <br>  - mechanische Wetterfahne mit elektronischer Entfernung des Drehwinkels.  Es gibt auch viele verschiedene M√∂glichkeiten, den Drehwinkel zu messen: optisch, resistiv, magnetisch, induktiv, mechanisch.  Es ist √ºbrigens m√∂glich, einfach einen elektronischen Kompass an der Wetterfahnenwelle anzubringen - dies sind nur zuverl√§ssige und einfache (f√ºr ‚Äûkniehohe‚Äú Wiederholungen) Methoden zur √úbertragung von Messwerten von einer zuf√§llig rotierenden Achse.  Daher w√§hlen wir weiter die traditionelle optische Methode. <br><br>  Wenn Sie eine dieser Methoden unabh√§ngig wiederholen, sollten Sie die Anforderungen eines minimalen Energieverbrauchs und der Exposition gegen√ºber Sonne und Regen rund um die Uhr (und m√∂glicherweise das ganze Jahr √ºber?) Ber√ºcksichtigen.  Der Windsensor kann nicht im Schatten unter dem Dach platziert werden - im Gegenteil, er sollte so weit wie m√∂glich von allen St√∂rfaktoren entfernt und ‚Äûoffen f√ºr alle Winde‚Äú sein.  Eine ideale Platzierung ist der Dachkamm des Hauses oder im schlimmsten Fall eine Scheune oder Laube, die von anderen Geb√§uden und B√§umen entfernt ist.  Solche Anforderungen erfordern eine autonome Stromversorgung und nat√ºrlich einen drahtlosen Datenkanal.  Diese Anforderungen sind f√ºr einige der "Schnickschnack" des Entwurfs verantwortlich, der unten beschrieben wird. <br><br><div class="spoiler">  <b class="spoiler_title">√úber minimalen Stromverbrauch</b> <div class="spoiler_text">  Wie hoch ist √ºbrigens der minimale Stromverbrauch?  Basierend auf normalen AA-Haushaltsbatterien sollte der durchschnittliche Stromkreisverbrauch idealerweise nicht mehr als 1-2 mA betragen.  √úberzeugen Sie sich selbst: Die Kapazit√§t eines anst√§ndigen alkalischen Elements der Gr√∂√üe AA betr√§gt etwa 2,5 bis 3 Ah, dh ein Stromkreis mit dem angegebenen Verbrauch arbeitet etwa 1500 bis 2500 Stunden oder 2 bis 3 Monate damit.  Im Prinzip ist dies auch ein wenig, aber relativ akzeptabel - Sie k√∂nnen nichts weniger tun: entweder bankrott gehen oder Batterien verwenden, die h√§ufiger aufgeladen werden m√ºssen als das Wechseln der Batterien.  Aus diesem Grund sind wir bei der Erstellung eines solchen Schemas verpflichtet, alle Kr√ºmel zu fangen: den obligatorischen Energiesparmodus, sorgf√§ltig durchdachte Schaltkreise und die Abfolge der Aktionen im Programm.  Weiter werden wir sehen, dass ich im endg√ºltigen Design immer noch nicht die notwendigen Anforderungen erf√ºllt habe und Batteriestrom verbrauchen musste. <br><br></div></div><br>  Eine kognitive Geschichte dar√ºber, wie ich versucht habe, die modernste und fortschrittlichste der Methoden zu reproduzieren - Ultraschall, und gescheitert ist, werde ich ein andermal erz√§hlen.  Alle anderen Methoden beinhalten eine separate Messung von Geschwindigkeit und Richtung, daher musste ich zwei Sensoren umz√§unen.  Nachdem ich theoretisch Hei√üdraht-Anemometer studiert hatte, wurde mir klar, dass wir kein fertiges empfindliches Element auf Amateurniveau bekommen k√∂nnen (sie sind auf dem westlichen Markt erh√§ltlich!), Sondern es selbst erfinden k√∂nnen - um uns mit der entsprechenden Zeit- und Geldverschwendung auf regelm√§√üige Forschung und Entwicklung einzulassen.  Nach einiger √úberlegung entschied ich mich daher f√ºr ein einheitliches Design f√ºr beide Sensoren: ein Becheranemometer mit optischer Messung der Drehzahl und eine Wetterfahne mit elektronischer Drehwinkelmessung auf Basis einer Codierscheibe (Encoder). <br><br><h2>  Sensordesigns </h2><br>  Der Vorteil mechanischer Sensoren besteht darin, dass dort keine Forschung und Entwicklung erforderlich ist, das Prinzip einfach und klar ist und die Qualit√§t des Ergebnisses nur von der Genauigkeit der Ausf√ºhrung eines sorgf√§ltig durchdachten Entwurfs abh√§ngt. <br><br>  Theoretisch schien dies in der Praxis zu einer Reihe mechanischer Arbeiten zu f√ºhren, von denen einige seitlich bestellt werden mussten, da keine Dreh- und Fr√§smaschinen zur Verf√ºgung standen.  Ich muss sofort sagen, dass ich es nie bereut habe, dass ich mich von Anfang an auf einen Kapitalansatz verlassen hatte und nicht begonnen habe, Konstruktionen aus improvisierten Materialien herzustellen. <br><br>  F√ºr eine Wetterfahne und ein Windmesser werden folgende Teile ben√∂tigt, die bei einem Dreher und einem Fr√§smaschinenbediener bestellt werden mussten (Menge und Material werden f√ºr beide Sensoren sofort angegeben): <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/abe/8c9/b4c/abe8c9b4c68f9b7a5593d81e5f729cf0.png" width="1000" alt="Bild"><br>  Wir stellen fest, dass die Achsen notwendigerweise auf einer Drehmaschine gedreht sind: Es ist praktisch unm√∂glich, eine Achse mit einem Punkt genau in der Mitte eines Knies zu erstellen.  Und die Platzierung der Spitze genau entlang der Rotationsachse ist hier ein entscheidender Erfolgsfaktor.  Au√üerdem muss die Achse perfekt gerade sein, Abweichungen sind nicht zul√§ssig. <br><br><h3>  Mechanischer Windrichtungssensor - elektronische Wetterfahne </h3><br>  Die Basis der Wetterfahne (sowie des Geschwindigkeitssensors unten) ist eine U-f√∂rmige Halterung aus D-16-Duraluminium, die in der Zeichnung oben links dargestellt ist.  Ein St√ºck Fluoroplast wird in die untere Aussparung gedr√ºckt, in der nacheinander mit 2- und 3-mm-Bohrern eine abgestufte Aussparung hergestellt wird.  In diese Aussparung wird eine Achse mit einem scharfen Ende eingef√ºhrt (f√ºr eine Wetterfahne - aus Messing).  Von oben geht es frei durch ein 8 mm Loch.  √úber diesem Loch befestigen M2-Schrauben ein rechteckiges St√ºck desselben 4 mm dicken Fluorkunststoffs an der Halterung, so dass es das Loch √ºberlappt.  In den Fluoroplast wird genau entlang des Achsendurchmessers von 6 mm ein Loch gemacht (genau entlang der allgemeinen Achse der L√∂cher - siehe die Montagezeichnung unten).  Ftoroplast oben und unten spielt die Rolle von Gleitlagern. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/f85/413/03a/f8541303a5e102a6255d611e8190686a.png" width="600" alt="Bild"><br>  Die Achse an der Stelle der Reibung gegen den Fotokunststoff kann poliert werden, und die Reibungsfl√§che kann verringert werden, indem dem Loch im Fluorkunststoff entgegengewirkt wird.  ( <b>Siehe zu diesem Thema unten UPD vom 13.09.18 und 05.06.19</b> ).  F√ºr die Wetterfahne spielt dies keine besondere Rolle - eine gewisse ‚ÄûHemmung‚Äú ist f√ºr ihn sogar n√ºtzlich, und f√ºr den Windmesser m√ºssen Sie versuchen, Reibung und Tr√§gheit zu minimieren. <br><br>  Nun zum Entfernen des Drehwinkels.  Der klassische <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">graue Encoder</a> mit 16 Positionen in unserem Fall sieht wie in der Abbildung gezeigt aus: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/4ec/2ee/310/4ec2ee310a65fbc1d80e85c834c65963.png" width="500" alt="Bild"><br>  Die Plattengr√∂√üe wurde auf der Basis einer zuverl√§ssigen optischen Isolation der Emitter-Empf√§nger-Paare voneinander gew√§hlt.  Bei dieser Konfiguration sind die 5 mm breiten Schlitze ebenfalls 5 mm voneinander entfernt, und die optischen Paare sind genau 10 mm voneinander entfernt.  Die Abmessungen der Halterung, an der die Wetterfahne befestigt ist, wurden anhand eines Scheibendurchmessers von 120 mm genau berechnet.  All dies kann nat√ºrlich reduziert werden (insbesondere wenn Sie LEDs und Fotodetektoren mit dem kleinstm√∂glichen Durchmesser w√§hlen), aber die Komplexit√§t bei der Herstellung des Encoders wurde ber√ºcksichtigt: Es stellte sich heraus, dass die Fr√§smaschinen keine so heiklen Arbeiten aufnahmen, sodass sie manuell mit einer Feile geschnitten werden mussten.  Und je gr√∂√üer die Abmessungen, desto zuverl√§ssiger das Ergebnis und weniger Aufwand. <br><br>  Die obige Montagezeichnung zeigt die Montage der Scheibe an der Achse.  Eine sorgf√§ltig zentrierte Scheibe wird mit M2-Schrauben an der Caprolon-Nabe befestigt.  Die H√ºlse wird so auf die Achse gelegt, dass der Abstand oben minimal ist (1-2 mm) - damit sich die Achse in der normalen Position frei dreht und w√§hrend einer Umdrehung die Spitze nicht aus der Buchse darunter f√§llt.  Bl√∂cke von Fotodetektoren und Emittern sind an der Halterung oben und unten an der Platte angebracht, insbesondere hinsichtlich ihres Designs. <br><br>  Die gesamte Struktur befindet sich in einem Kunststoffgeh√§use (ABS oder Polycarbonat) von 150 √ó 150 √ó 90 mm.  Zusammengebaut (ohne Abdeckung und Wetterfahne) ist der Richtungssensor wie folgt: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c34/85b/a61/c3485ba615b14aa3728b9e624c5f3b50.jpg" width="500" alt="Bild"><br><br>  Beachten Sie, dass die ausgew√§hlte Richtung nach Norden mit einem Pfeil markiert ist. Dies muss bei der Installation des Sensors beachtet werden. <br><br>  Oben auf der Achse ist die aktuelle Wetterfahne angebracht.  Es wird auf der Grundlage derselben Messingachse hergestellt, in deren Schnitt auf der stumpfen Seite ein Messingschaft verl√∂tet ist.  Am scharfen Ende wird ein M6-Gewinde auf eine bestimmte L√§nge geschnitten und eine runde Gegengewichtslast, die aus Blei gegossen wurde, mit Hilfe von Muttern daran befestigt: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/84c/f58/ebb/84cf58ebbc6312411db92a32a51b46d4.jpg" width="500" alt="Bild"><br><br>  Die Last ist so konstruiert, dass der Schwerpunkt genau auf die Befestigungsstelle f√§llt (wenn Sie ihn entlang des Gewindes bewegen, k√∂nnen Sie ein perfektes Gleichgewicht erreichen).  Die Schaufel wird mit einer Edelstahlschraube M3 an der Achse befestigt, die durch das Loch in der Schaufelachse verl√§uft und in das in die Drehachse geschnittene Gewinde eingeschraubt wird (die Befestigungsschraube ist auf dem Foto oben zu sehen).  Zur genauen Ausrichtung hat die Oberseite der Drehachse eine halbkreisf√∂rmige Aussparung, in der die Achse der Wetterfahne liegt. <br><br><h3>  DIY Windgeschwindigkeitssensor - DIY Cup Anemometer </h3><br>  Wie Sie bereits verstanden haben, wurde die Basis f√ºr den Geschwindigkeitssensor zum Zwecke der Vereinheitlichung dieselbe gew√§hlt wie f√ºr die Wetterfahne.  Die Konstruktionsanforderungen sind hier jedoch etwas anders: Um die Startschwelle zu verringern, sollte der Windmesser so leicht wie m√∂glich sein.  Daher besteht insbesondere die Achse daf√ºr aus Duraluminium, die Scheibe mit L√∂chern (zur Geschwindigkeitsmessung) hat einen reduzierten Durchmesser: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f79/4eb/e72/f794ebe7245a7132970c1a27c04b5d0a.jpg" width="500" alt="Bild"><br><br>  Wenn f√ºr einen 4-Bit-Gray-Encoder vier Optokoppler erforderlich sind, gibt es nur einen f√ºr einen Geschwindigkeitssensor.  16 L√∂cher wurden in gleichem Abstand um den Umfang der Scheibe gebohrt, sodass eine Umdrehung der Scheibe pro Sekunde 16 Hertz der vom Optokoppler kommenden Frequenz entspricht (mehr L√∂cher sind m√∂glich, weniger m√∂glich - die einzige Frage ist das Ausma√ü der Energieumwandlung und Energieeinsparung f√ºr die Emitter). <br><br>  Ein selbstgebauter Sensor wird sich immer noch als ziemlich rau herausstellen (der Schwellenwert f√ºr den Start betr√§gt nicht weniger als eine halbe Metersekunde pro Sekunde), kann jedoch nur reduziert werden, wenn das Design radikal ge√§ndert wird: Setzen Sie beispielsweise anstelle eines Bechertellers einen Propeller ein.  Bei einem Becherspinner ist der Unterschied in den Str√∂mungswiderstandskr√§ften, der das Drehmoment bestimmt, relativ gering - er wird allein aufgrund der unterschiedlichen Form der Oberfl√§che erreicht, die dem einstr√∂menden Luftstrom entspricht (daher sollte die Form der Becher so stromlinienf√∂rmig wie m√∂glich sein - idealerweise ist dies ein halbes Ei oder eine Kugel).  Der Propeller hat viel mehr Drehmoment, er kann viel kleiner gemacht werden und schlie√ülich ist die Herstellung selbst einfacher.  Der Propeller muss jedoch in Richtung des Luftstroms installiert werden - beispielsweise indem er am <a href="">Ende derselben Wetterfahne platziert wird</a> . <br><br>  Die Frage ist: Wie werden Messwerte von einem Sensor √ºbertragen, der sich zuf√§llig um eine vertikale Achse dreht?  Ich konnte es nicht l√∂sen und nach der Tatsache zu urteilen, dass professionelle Cup-Konstruktionen immer noch weit verbreitet sind, wird dies keineswegs durch einen halben Tritt entschieden (wir ber√ºcksichtigen manuelle Anemometer nicht - sie werden manuell nach dem Luftstrom ausgerichtet). <br><br>  Meine Version des Becheranemometers basiert auf einer Laserscheibe.  Die Ansicht von oben und unten ist auf dem Foto dargestellt: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/86b/dfe/b7d/86bdfeb7d725ad1cacc76c48c7e99739.jpg" width="400" alt="Bild"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/400/944/bf9/400944bf9dc46d666f49949f37fcf845.jpg" width="400" alt="Bild"><br><br>  Tassen bestehen aus Flaschenb√∂den unter dem Agusha-Babywasser.  Der Boden wird sorgf√§ltig abgeschnitten, und alle drei - im gleichen Abstand, so dass sie das gleiche Gewicht haben - erw√§rmen sich lokal in der Mitte (erw√§rmen Sie das Ganze √ºberhaupt nicht - es verzieht sich irreversibel!) Und die R√ºckseite des Holzgriffs biegt sich nach au√üen, um es stromlinienf√∂rmiger zu machen.  Sie werden es wiederholen - f√ºllen Sie gr√∂√üere Flaschen mit f√ºnf oder sechs St√ºck ein, wahrscheinlich k√∂nnen Sie drei mehr oder weniger dieselbe Tasse herstellen.  Bei den hergestellten Bechern wird ein seitlicher Schnitt vorgenommen, und sie werden mit Hilfe eines wasserfesten Leimversiegelungsmittels entlang des Umfangs der Scheibe in einem Winkel von 120 ¬∞ zueinander befestigt.  Die Scheibe ist streng um die Achse zentriert (ich habe dies mit Hilfe einer verschachtelten Metallscheibe gemacht) und mit M2-Schrauben an der Caprolon-Nabe montiert. <br><br><h3>  Allgemeine Konstruktion und Installation von Sensoren </h3><br>  Beide Sensoren sind, wie bereits erw√§hnt, in Kunststoffgeh√§usen von 150 √ó 150 √ó 90 mm untergebracht.  Die Wahl des Geh√§usematerials muss sorgf√§ltig getroffen werden: ABS oder Polycarbonat haben eine ausreichende Witterungsbest√§ndigkeit, aber Polystyrol, Plexiglas und insbesondere Polyethylen sind hier nicht geeignet (und es ist schwierig, sie zum Schutz vor der Sonne zu lackieren).  Wenn es nicht m√∂glich ist, eine Firmenbox zu kaufen, ist es besser, das Geh√§use aus Folienglas zu l√∂ten und es dann zu streichen, um es vor Korrosion zu sch√ºtzen und ein √§sthetisches Aussehen zu verleihen. <br><br>  Genau am Achsenaustrittspunkt wird ein Loch von 8-10 mm in den Deckel eingebracht, in das ein Kunststoffkegel, der aus einer D√ºse aus einer Spr√ºhdose mit einem Konstruktionsdichtmittel oder Klebstoff geschnitten wurde, mit demselben Klebstoffdichtmittel geklebt wird: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a0d/b61/78c/a0db6178c5977c8a8a9081daa31c4753.jpg" width="400" alt="Bild"><br><br>  Um den Kegel entlang der Achse zu zentrieren, befestigen Sie mit einer Klammer ein St√ºck Holz am unteren Rand der Abdeckung, markieren Sie die genaue Mitte und gehen Sie mit einem 12-mm-Federbohrer etwas tiefer, wobei Sie eine ringf√∂rmige Aussparung um das Loch machen.  Der Kegel muss genau dort eintreten, danach kann er mit Klebstoff beschichtet werden.  Es kann zus√§tzlich in vertikaler Position f√ºr die Erstarrungszeit mit der M6-Schraube und -Mutter befestigt werden. <br><br>  Der Geschwindigkeitssensor selbst bedeckt die Achse mit diesem Kegel wie ein Regenschirm und verhindert, dass Wasser in den K√∂rper eindringt.  Bei einer Wetterfahne muss zus√§tzlich eine H√ºlse √ºber dem Kegel platziert werden, um den Spalt zwischen der Achse und dem Kegel durch direkten Wasserfluss zu schlie√üen (siehe Foto der Gesamtansicht der Sensoren unten). <br><br>  Die Dr√§hte von den Optokopplern werden zu einem separaten D-SUB-Stecker gef√ºhrt (siehe Foto des Richtungssensors oben).  Das Gegenst√ºck mit dem Kabel wird durch ein rechteckiges Loch im Boden des Geh√§uses eingef√ºhrt.  Das Loch wird dann von einer Abdeckung mit einem Schlitz f√ºr das Kabel abgedeckt, der verhindert, dass der Stecker herausf√§llt.  Duraluminiumhalterungen werden zur Befestigung an der Basis des Geh√§uses angeschraubt.  Ihre Konfiguration h√§ngt von der Position der Sensoren ab. <br><br>  Im zusammengebauten Zustand sehen beide Sensoren wie folgt aus: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ac0/2ee/d02/ac02eed02599b4f62d7a959ecef6a136.jpg" width="500" alt="Bild"><br><br>  Hier werden sie bereits installiert gezeigt - auf dem Kamm des Pavillons.  Bitte beachten Sie, dass die Aussparungen f√ºr die Schrauben, mit denen die Abdeckung befestigt ist, durch Rohgummistopfen gegen Wasser gesch√ºtzt sind.  Die Sensoren sind streng horizontal in der Ebene installiert, f√ºr die ich Auskleidungen aus Linoleumst√ºcken verwenden musste. <br><br><h2>  Elektronisches Teil </h2><br>  Die Wetterstation als Ganzes besteht aus zwei Modulen: einer Ferneinheit (die beide Windsensoren bedient und auch Messwerte von einem externen Temperatur-Feuchtigkeits-Sensor erfasst) und dem Hauptmodul mit Anzeigen.  Die Fernbedienung ist mit einem drahtlosen Sender zum Senden der darin installierten Daten ausgestattet (die Antenne ragt seitlich heraus).  Das Hauptmodul empf√§ngt Daten von der Remote-Einheit (der Empf√§nger wird zur Vereinfachung seiner Ausrichtung an einem Kabel in einer separaten Einheit angebracht), nimmt auch Messwerte vom internen Temperatur-Feuchtigkeits-Sensor auf und zeigt dies alles auf den Displays an.  Eine separate Komponente der Haupteinheit ist eine Uhr mit einem Kalender, die zur Vereinfachung der allgemeinen Einrichtung der Station von einem separaten Arduino Mini-Controller bedient wird und √ºber eigene Anzeigen verf√ºgt. <br><br><h3>  Fernmodul und Messkreis von Windsensoren </h3><br>  Als Fotostrahler wurden die IR-LEDs AL-107B ausgew√§hlt.  Diese Vintage-LEDs sind nat√ºrlich nicht die besten ihrer Klasse, aber sie haben ein Miniaturgeh√§use mit einem Durchmesser von 2,4 mm und k√∂nnen Strom bis zu 600 mA pro Impuls √ºbertragen.  √úbrigens stellte sich bei den Tests heraus, dass die Probe dieser LED um 1980 (im roten Fall) ungef√§hr doppelt so effizient ist (ausgedr√ºckt im Bereich des zuverl√§ssigen Betriebs des Fotodetektors) wie moderne Kopien, die in Chip-Dip gekauft wurden (sie haben eine transparente gelblich-gr√ºner K√∂rper).  Es ist unwahrscheinlich, dass 1980 die Kristalle besser waren als jetzt, obwohl was zum Teufel nicht scherzt?  Es ist jedoch m√∂glich, dass sich die Materie in dem einen und dem anderen Design in unterschiedlichen Streuwinkeln befindet. <br><br>  Ein konstanter Strom von ungef√§hr 20 mA (Widerstand 150 Ohm mit einer Stromversorgung von 5 Volt) wurde durch eine LED im Geschwindigkeitssensor geleitet, und ein gepulster Strom (M√§ander mit einem Arbeitszyklus von 2) von ungef√§hr 65 mA (die gleichen 150 Ohm mit einer Stromversorgung von 12 Volt) wurde in den Richtungssensor geleitet.  Der durchschnittliche Strom durch eine LED des Richtungssensors betr√§gt in diesem Fall ungef√§hr 33 mA in nur vier Kan√§len - ungef√§hr 130 mA. <br><br>  Als Fotodetektoren wurden L-32P3C-Fototransistoren in einem Fall mit einem Durchmesser von 3 mm ausgew√§hlt.  Das Signal wurde von einem Kollektor aufgenommen, der auf einen 1,5- oder 2-kOhm-Widerstand von einer 5-V-Versorgung geladen ist. Diese Parameter werden so gew√§hlt, dass in einem Abstand von ~ 20 mm zwischen dem Fotoemitter und dem Empf√§nger ein Logiksignal voller Gr√∂√üe mit 5-Volt-Pegeln sofort ohne zus√§tzliche Verst√§rkung am Eingang ankommt .  Die hier auftretenden Str√∂me m√∂gen Ihnen auf der Grundlage des oben angegebenen Mindestenergieverbrauchs unverh√§ltnism√§√üig gro√ü erscheinen, aber wie Sie sehen werden, erscheinen sie in jedem Messzyklus f√ºr maximal einige Millisekunden, so dass der Gesamtverbrauch gering bleibt. <br><br>  Die Basis f√ºr die Montage der Empf√§nger und Sender waren die Segmente des Kabelkanals (sichtbar auf dem Foto der Sensoren oben), die so geschnitten waren, dass sie ‚ÄûOhren‚Äú f√ºr die Montage an der Halterung an der Basis bildeten.  F√ºr jeden dieser Abf√§lle wurde eine Kunststoffplatte von innen auf den Verschlussdeckel geklebt, deren Breite der Breite des Kanals entsprach.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LEDs und Fototransistoren wurden im richtigen Abstand in den in diese Platte gebohrten L√∂chern befestigt, so dass sich die Leitungen innerhalb des Kanals befanden und nur die Ausbuchtungen am Ende der Schalen nach au√üen ragten. Die Schlussfolgerungen werden gem√§√ü dem Diagramm (siehe unten) verl√∂tet, die externen Schlussfolgerungen werden durch Abf√§lle eines flexiblen mehrfarbigen Drahtes gezogen. Innerhalb des Kanals befinden sich auch Widerst√§nde f√ºr Emitter des Richtungssensors, aus denen eine allgemeine Schlussfolgerung gezogen wird. Nach dem Entl√∂ten rastet der Deckel ein, alle Schlitze werden mit Plastilin und einem zus√§tzlichen Klebeband versiegelt, das auch das Loch auf der den Anschl√ºssen gegen√ºberliegenden Seite verschlie√üt, und die gesamte Struktur wird mit Epoxidharz gef√ºllt. Externe Schlussfolgerungen, wie auf dem Foto der Sensoren zu sehen, werden auf dem Klemmenblock auf der R√ºckseite der Halterung angezeigt. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schaltplan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ger√§t zur Verarbeitung von Windsensoren sieht folgenderma√üen aus: </font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3ed/42e/3b7/3ed42e3b7ef2fee830c17786e991db52.png" width="1000" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen dar√ºber, woher die 12-14-Volt-Leistung kommt, siehe unten. Zus√§tzlich zu den im Diagramm angegebenen Komponenten enth√§lt die Fernbedienung einen Temperatur-Feuchtigkeits-Sensor, der im Diagramm nicht dargestellt ist. Der an die Klemme A0 der Steuerung angeschlossene Spannungsteiler dient zur Steuerung der Spannung der Stromversorgung f√ºr einen rechtzeitigen Austausch. Die an die herk√∂mmliche Klemme 13 (Klemme 19 des DIP-Geh√§uses) angeschlossene LED ist superhell, da f√ºr ihr normales, nicht blendendes Leuchten gen√ºgend Strom in Milliampere ausreicht, was durch eine ungew√∂hnlich hohe Widerstandsleistung von 33 kOhm sichergestellt wird.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Schema verwendet einen "nackten" Atmega328-Controller in einem DIP-Paket, der √ºber Uno programmiert und an einer Buchse montiert ist. Solche Controller mit einem bereits aufgezeichneten Arduino-Lader werden beispielsweise in Chip-Dip verkauft (oder Sie k√∂nnen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lader </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">selbst aufnehmen</font></a><font style="vertical-align: inherit;"> ). Eine solche Steuerung ist bequem in einer vertrauten Umgebung programmiert, aber ohne Komponenten auf der Platine ist sie zum einen wirtschaftlicher und zum anderen weniger platzsparend. Ein vollwertiger Energiesparmodus k√∂nnte erreicht werden, indem auch der Bootloader entfernt wird (und im Allgemeinen der gesamte Code in Assembler gemalt wird :), aber hier ist er nicht sehr relevant und die Programmierung ist unn√∂tig kompliziert.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In dem Diagramm sind graue Rechtecke um Komponenten eingekreist, die sich separat auf die Geschwindigkeits- und Richtungskan√§le beziehen. Betrachten Sie den Betrieb der Schaltung als Ganzes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Betrieb der Steuerung als Ganzes wird vom WDT-Watchdog-Timer gesteuert, der im Interrupt-Aufrufmodus eingeschaltet wird. WDT weckt den Controller in festgelegten Intervallen aus dem Ruhemodus. Wenn der Timer im aufgerufenen Interrupt erneut startet, startet er nicht von vorne, alle globalen Variablen bleiben auf ihren Werten. Auf diese Weise k√∂nnen Sie Daten von Erwachen zu Erwachen sammeln und sie irgendwann verarbeiten - beispielsweise zum Durchschnitt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zu Beginn des Programms wurden folgende Deklarationen von Bibliotheken und globalen Variablen abgegeben (um den Text der bereits umfangreichen Beispiele nicht zu √ºberladen, wurde hier alles rund um den Temperatur-Feuchtigkeits-Sensor ver√∂ffentlicht):</font></font><br><br><pre><code class="plaintext hljs">#include &lt;VirtualWire.h&gt; #include &lt;avr/wdt.h&gt; #include &lt;avr/sleep.h&gt; . . . . . #define ledPin 13 //  (PB5  19 ATmega) #define IR_Pin 10 //  IRLU (PB2  16 Atmega) #define in_3p 9 //   3 #define in_2p 8 //   2 #define in_1p 7 //   1 #define in_0p 6 //   0 #define IR_PINF 5 //(PD5,11)   -  #define IN_PINF 4 //(PD4,6)    volatile unsigned long ttime = 0; //   float ff[4]; //      char msg[25]; //  byte count=0;// int batt[4]; //   byte wDir[4]; //   byte wind_Gray=0; //   </code> </pre> <br>  Die folgenden Verfahren werden verwendet, um den Schlafmodus und die WDT zu starten (alle 4 s aufwachen): <br><br><pre> <code class="plaintext hljs">//      void system_sleep() { ADCSRA &amp;= ~(1 &lt;&lt; ADEN); //. cbi(ADCSRA,ADEN);   set_sleep_mode(SLEEP_MODE_PWR_DOWN); //   sleep_mode(); //   sleep_disable(); //      watchdog ADCSRA |= (1 &lt;&lt; ADEN); /. sbi(ADCSRA,ADEN);   } //**************************************************************** // ii: 0=16ms, 1=32ms,2=64ms,3=128ms,4=250ms,5=500ms // 6=1 sec,7=2 sec, 8=4 sec, 9= 8sec void setup_watchdog(int ii) { byte bb; if (ii &gt; 9 ) ii=9; bb=ii &amp; 7; if (ii &gt; 7) bb|= (1&lt;&lt;5); // bb -   bb|= (1&lt;&lt;WDCE); MCUSR &amp;= ~(1&lt;&lt;WDRF); //   WDTCSR |= (1&lt;&lt;WDCE) | (1&lt;&lt;WDE); //      WDTCSR = bb; WDTCSR |= (1&lt;&lt;WDIE); // WDT } //**************************************************************** //     ISR(WDT_vect) { wdt_reset(); }</code> </pre><br>  Der Geschwindigkeitssensor gibt die Frequenz der Unterbrechung des optischen Kanals an, die Gr√∂√üenordnung betr√§gt einige zehn Hertz.  Die Messung dieses Wertes ist nach einer gewissen Zeit wirtschaftlicher und schneller (dies war Gegenstand der Ver√∂ffentlichung des Autors ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bewertung von Methoden zur Messung niedriger Frequenzen am Arduino</a> ‚Äú).  Hier wird die Methode √ºber die modifizierte Funktion pulsInLong () ausgew√§hlt, die die Messung nicht an bestimmte Reglerausg√§nge bindet (der Text der Funktion periodInLong () ist in der Ver√∂ffentlichung enthalten). <br><br>  In der Funktion setup () werden die Ausgangsrichtungen deklariert, die 433-MHz-Senderbibliothek und der Watchdog-Timer initialisiert (die Zeile f√ºr IN_PINF ist grunds√§tzlich √ºberfl√ºssig und wird f√ºr den Speicher eingef√ºgt): <br><br><pre> <code class="plaintext hljs">void setup() { pinMode(IR_PINF, OUTPUT); //  pinMode(IN_PINF, INPUT); //     pinMode(13, OUTPUT); // vw_setup(1200); //   VirtualWire vw_set_tx_pin(2); //D2, PD2(4)   VirtualWire // Serial.begin(9600); // Serial-     setup_watchdog(8); //WDT  4 c wdt_reset(); }</code> </pre><br>  Schlie√ülich lesen wir im Hauptzyklus des Programms jedes Mal, wenn wir aufwachen (alle 4 Sekunden), zuerst die Spannung und berechnen die Frequenz des Windgeschwindigkeitssensors: <br><br><pre> <code class="plaintext hljs">void loop() { wdt_reset(); //  digitalWrite(ledPin, HIGH); //    batt[count]=analogRead(0); //      /*===  ==== */ digitalWrite(IR_PINF, HIGH); // -   float f=0; //   ttime=periodInLong(IN_PINF, LOW, 250000); // 0,25  // Serial.println(ttime); //    if (ttime!=0) {//    f = 1000000/float(ttime);} //      digitalWrite(IR_PINF, LOW); // - ff[count]=f; //     . . . . .</code> </pre><br>  Wie Sie sehen, ist die Brenndauer der IR-LED (verbraucht, wie ich mich erinnere, 20 mA) hier ohne Drehung der Sensorscheibe maximal und betr√§gt unter dieser Bedingung etwa 0,25 Sekunden.  Die minimale gemessene Frequenz betr√§gt somit 4 Hz (eine viertel Scheibenumdrehung pro Sekunde mit 16 L√∂chern).  Wie sich bei der Kalibrierung des Sensors herausstellte (siehe unten), entspricht dies einer Windgeschwindigkeit von ca. 0,2 m / s. Wir betonen, dass dies der kleinste messbare Wert der Windgeschwindigkeit ist, jedoch keine Aufl√∂sung und keine Startschwelle (die sich als viel h√∂her herausstellen wird).  Wenn es eine Frequenz gibt (dh wenn sich der Sensor dreht), wird die Messzeit (und dementsprechend die LED-Brenndauer, d. H. Der Stromverbrauch) proportional verringert und die Aufl√∂sung erh√∂ht. <br><br>  Das Folgende sind Verfahren, die jedes vierte Erwachen (d. H. Alle 16 Sekunden) durchgef√ºhrt werden.  Der Wert der Frequenz des Geschwindigkeitssensors aus den akkumulierten vier von uns √ºbertragenen Werten ist nicht durchschnittlich, sondern maximal - wie die Erfahrung gezeigt hat, ist dies ein informativerer Wert.  Zur Vereinfachung und Vereinheitlichung wird jeder der Werte unabh√§ngig von seinem Typ vor der √úbertragung in eine positive Ganzzahl mit 4 Dezimalstellen konvertiert.  Die Z√§hlvariable wird von der Z√§hlvariablen √ºberwacht: <br><br><pre> <code class="plaintext hljs">// 16        //  4- : if (count==3){ f=0; //  for (byte i=0; i&lt;4; i++) if (f&lt;ff[i]) f=ff[i]; //    int fi=(int(f*10)+1000); //  4 .    int volt=0; //  for (byte i=0; i&lt;4; i++) volt=volt+batt[i]; volt=volt/4+100; //   100  = 3 . volt=volt*10; // 4 .  . . . . .</code> </pre><br>  Als n√§chstes folgt die Definition der Gray-Code-Richtung.  Um den Verbrauch zu reduzieren, wird anstelle von IR-LEDs st√§ndig eine Frequenz von 5 kHz an alle vier Kan√§le gleichzeitig √ºber einen Schl√ºsselfeldeffekttransistor mit der Funktion ton () geliefert.  Das Vorhandensein einer Frequenz an jeder der Entladungen (in_0p - in_3p-Ausg√§nge) wird unter Verwendung einer Methode √§hnlich der Anti-Bounce-Methode beim Lesen der Messwerte einer gedr√ºckten Taste erkannt.  Zuerst warten wir im Zyklus, ob der Ausgang einen hohen Pegel aufweist, und √ºberpr√ºfen ihn dann nach 100 Œºs.  100 Œºs ist eine halbe Periode einer Frequenz von 5 kHz, dh wenn es eine Frequenz von mindestens dem zweiten Mal gibt, werden wir wieder auf einen hohen Pegel fallen (nur f√ºr den Fall, viermal wiederholen) und dies bedeutet, dass es definitiv da ist.  Wir wiederholen diesen Vorgang f√ºr jedes der vier Codebits: <br><br><pre> <code class="plaintext hljs">/* ===== Wind Gray ==== */ //: tone(IR_Pin,5000);// 5    boolean yes = false; byte i=0; while(!yes){ // 3 i++; boolean state1 = (digitalRead(in_3p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_3p)); if (i&gt;4) break; //   } if (yes) wDir[3]=1; else wDir[3]=0; yes = false; i=0; while(!yes){ // 2 i++; boolean state1 = (digitalRead(in_2p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_2p)); if (i&gt;4) break; //   } if (yes) wDir[2]=1; else wDir[2]=0; yes = false; i=0; while(!yes){ // 1 i++; boolean state1 = (digitalRead(in_1p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_1p)); if (i&gt;4) break; //   } if (yes) wDir[1]=1; else wDir[1]=0; yes = false; i=0; while(!yes){ // 0 i++; boolean state1 = (digitalRead(in_0p)&amp;HIGH); delayMicroseconds(100); //   100  yes=(state1 &amp; !digitalRead(in_0p)); if (i&gt;4) break; //   } if (yes) wDir[0]=1; else wDir[0]=0; noTone(IR_Pin); //  //     : wind_Gray=wDir[0]+wDir[1]*2+wDir[2]*4+wDir[3]*8; //   .  int wind_G=wind_Gray*10+1000; //  4- .  . . . . .</code> </pre><br>  Die maximale Dauer eines Vorgangs liegt bei fehlender Frequenz am Empf√§nger und betr√§gt 4 √ó 100 = 400 Mikrosekunden.  Die maximale Brenndauer von 4 Richtungs-LEDs betr√§gt, wenn keine Empf√§nger leuchten, d. H. 4 √ó 400 = 1,6 Millisekunden.  Der Algorithmus funktioniert √ºbrigens genauso, wenn es anstelle einer Frequenz, deren Periode ein Vielfaches von 100 Œºs ist, einfach ist, LEDs einen konstant hohen Pegel zuzuweisen.  Wenn es einen M√§ander statt eines konstanten Niveaus gibt, sparen wir einfach die H√§lfte der Nahrung.  Wir k√∂nnen immer noch sparen, wenn wir jede IR-LED √ºber eine separate Leitung (bzw. √ºber einen separaten Ausgang des Controllers mit eigenem Schl√ºsseltransistor) starten. Gleichzeitig sind die Schaltung, die Verkabelung und die Steuerung kompliziert und der Strom betr√§gt alle 16 Sekunden 2 ms lang 130 mA - das siehst du ein wenig. <br><br>  Schlie√ülich <b>drahtlose Daten√ºbertragung</b> .  Um Daten vom Sensorinstallationsort auf die Anzeigetafel der Wetterstation zu √ºbertragen, wurde die einfachste, billigste und zuverl√§ssigste Methode gew√§hlt: <a href="">ein Sender / Empf√§nger-Paar mit einer Frequenz von 433 MHz</a> .  Ich bin damit einverstanden, dass die Methode nicht die bequemste ist (aufgrund der Tatsache, dass die Ger√§te f√ºr die √úbertragung von Bitsequenzen und nicht von ganzen Bytes ausgelegt sind, m√ºssen Sie sich bei der Konvertierung von Daten zwischen den erforderlichen Formaten verfeinern), und ich bin sicher, dass viele mit mir hinsichtlich ihrer Zuverl√§ssigkeit streiten werden.  Die Antwort auf den letzten Einwand ist einfach: "Sie wissen einfach nicht, wie man sie kocht!" <br><br>  Das Geheimnis ist, dass es normalerweise hinter den Kulissen verschiedener Beschreibungen des Datenaustauschs auf dem 433-MHz-Kanal bleibt: Da diese Ger√§te rein analog sind, muss die Stromversorgung des Empf√§ngers sehr gut von jeglichen Fremdpulsationen gereinigt werden.  In keinem Fall sollten Sie den Empf√§nger √ºber den internen 5-Volt-Arduino-Stabilisator mit Strom versorgen!  Die Installation eines separaten Stabilisators mit geringem Stromverbrauch f√ºr den Empf√§nger (LM2931, LM2950 oder √§hnliches) direkt in der N√§he seiner Klemmen mit den richtigen Filterkreisen am Ein- und Ausgang erh√∂ht die √úbertragungsreichweite und Zuverl√§ssigkeit radikal. <br><br>  In diesem Fall arbeitete der Sender direkt mit der Batteriespannung von 12 V, der Empf√§nger und der Sender waren mit hausgemachten Standardantennen in Form eines 17 cm langen Drahtst√ºcks ausgestattet. (Ich erinnere mich, dass der Draht f√ºr Antennen nur einadrig geeignet ist und die Antennen parallel zueinander im Raum platziert werden m√ºssen.) Ein 24-Byte-Informationspaket (unter Ber√ºcksichtigung von Luftfeuchtigkeit und Temperatur) ohne Probleme wurde sicher mit einer Geschwindigkeit von 1200 Bit / s diagonal durch ein Gartengrundst√ºck von 15 Morgen (ca. 40-50 Meter) und dann durch drei Protokolle √ºbertragen  W√§nde im Raum (in denen beispielsweise ein zellulares Signal nur schwer und nicht √ºberall empfangen wird).  Bedingungen, die f√ºr eine Standardmethode mit 2,4 GHz (wie Bluetooth, Zig-Bee und sogar Amateur-WLAN) praktisch nicht erreichbar sind, obwohl der Senderverbrauch hier miserabel 8 mA betr√§gt und nur zum Zeitpunkt der tats√§chlichen √úbertragung den Rest der Zeit, die der Sender verbraucht Pennies.  Der Sender befindet sich strukturell in der Fernbedienung, die Antenne ragt horizontal von der Seite heraus. <br><br>  Wir kombinieren alle Daten in einem Paket (in einer realen Station werden Temperatur und Luftfeuchtigkeit hinzugef√ºgt), das aus einheitlichen 4-Byte-Teilen besteht, denen die Signatur ‚ÄûDAT‚Äú vorangestellt ist, senden sie an den Sender und schlie√üen alle Zyklen ab: <br><br><pre> <code class="plaintext hljs">/*=====Transmitter=====*/ String strMsg="DAT"; // -  strMsg+=volt; //  4  strMsg+=wind_G; // wind 4  strMsg+=fi; //  4  strMsg.toCharArray(msg,16); //    // Serial.println(msg); //  vw_send((uint8_t *)msg, strlen(msg)); //   vw_wait_tx(); //    - ! delay(50); //+      count=0; //  }//end count==3 else count++; digitalWrite(ledPin, LOW); //   system_sleep(); // ‚Äî   } //end loop</code> </pre><br>  Die Paketgr√∂√üe kann reduziert werden, wenn Sie die Anforderung ablehnen, jeden der Werte verschiedener Typen in Form eines einheitlichen 4-Byte-Codes darzustellen (zum Beispiel reicht f√ºr den Gray-Code nat√ºrlich ein Byte aus).  Aber um der Universalisierung willen habe ich alles so gelassen, wie es ist. <br><br>  <b>Ern√§hrungs- und Designmerkmale der Fernbedienung</b> .  Der Verbrauch der Remote-Einheit wird folgenderma√üen berechnet: <br><br>  - 20 mA (Emitter) + ~ 20 mA (Regler mit Hilfsstromkreisen) f√ºr etwa 0,25 s alle vier Sekunden - durchschnittlich 40/16 = 2,5 mA; <br>  - 130 mA (Emitter) + ~ 20 mA (Regler mit Hilfsstromkreisen) f√ºr ca. 2 ms alle 16 Sekunden - durchschnittlich 150/16/50 ‚âà 0,2 mA; <br><br>  Wenn wir bei dieser Berechnung den Reglerverbrauch bei der Erfassung von Daten vom Temperatur-Feuchtigkeits-Sensor und bei Betrieb des Senders ber√ºcksichtigt haben, k√∂nnen wir den Durchschnittsverbrauch sicher auf 4 mA bringen (wohlgemerkt bei einem Spitzenwert von etwa 150 mA!).  Die Batterien (die √ºbrigens bis zu 8 Teile ben√∂tigen, um den Sender mit maximaler Spannung zu versorgen!) M√ºssen zu oft gewechselt werden, daher bestand die Idee darin, die Fernbedienung mit 12-Volt-Batterien f√ºr einen Schraubendreher zu versorgen - ich hatte nur zwei zus√§tzliche.  Ihre Kapazit√§t ist sogar geringer als die entsprechende Anzahl von AA-Batterien - nur 1,3 A ‚Ä¢ Stunden, aber niemand st√∂rt sich daran, sie zu irgendeinem Zeitpunkt zu wechseln und eine Sekunde aufgeladen zu halten.  Bei dem angegebenen Verbrauch von 4 mA reicht die Kapazit√§t von 1300 mA ‚Ä¢ Stunden f√ºr etwa zwei Wochen aus, was nicht allzu st√∂rend ist. <br><br>  Beachten Sie, dass die Spannung eines frisch geladenen Akkus bis zu 14 Volt betragen kann.  In diesem Fall wurde ein 12-Volt-Eingangsstabilisator installiert, um eine √úberspannung der Senderstromversorgung zu verhindern und den Haupt-F√ºnf-Volt-Stabilisator nicht zu √ºberlasten. <br><br>  Die tragbare Einheit in einem geeigneten Kunststoffgeh√§use befindet sich unter dem Dach, ein Stromkabel von der Batterie und Anschl√ºsse an Windsensoren sind an den Anschl√ºssen angeschlossen.  Die Hauptschwierigkeit besteht darin, dass sich die Schaltung als √§u√üerst empfindlich gegen√ºber Luftfeuchtigkeit herausstellte: Bei Regenwetter beginnt der Sender nach einigen Stunden zu versagen, Frequenzmessungen zeigen ein komplettes Durcheinander und Batteriespannungsmessungen zeigen ‚ÄûWetter auf dem Mars‚Äú. <br><br>  Daher muss der Fall nach dem Debuggen der Algorithmen und dem √úberpr√ºfen aller Verbindungen sorgf√§ltig versiegelt werden.  Alle Anschl√ºsse am Eingang des Geh√§uses sind mit Dichtmittel abgedichtet. Gleiches gilt f√ºr alle herausstehenden Schraubenk√∂pfe, Antennenausgang und Stromkabel.  Die Gelenke des K√∂rpers werden mit Plastilin verschmiert (unter Ber√ºcksichtigung, dass sie getrennt werden m√ºssen) und zus√§tzlich mit Streifen Klebeband darauf geklebt.  Es ist sch√∂n, die verwendeten Steckverbinder im Inneren zus√§tzlich vorsichtig mit einem Epoxidharz zu verst√§rken: Beispielsweise ist der im Diagramm des Fernbedienungsmoduls gezeigte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DB-15</a> von sich aus nicht dicht und feuchte Luft tritt langsam zwischen dem Metallrahmen und der Kunststoffbasis aus. <br><br>  Alle diese Ma√ünahmen an sich wirken sich jedoch nur kurzfristig aus - selbst wenn keine kalte feuchte Luft angesaugt wird, verwandelt sich die trockene Luft aus dem Raum leicht in feuchte Luft, wenn die Temperatur au√üerhalb des Geh√§uses sinkt (denken Sie an das Ph√§nomen, das als ‚ÄûTaupunkt‚Äú bezeichnet wird). <br><br>  Um dies zu vermeiden, muss eine Patrone oder ein Beutel mit einem Trockenmittel - Kieselgel im Inneren des Geh√§uses belassen werden (Beutel damit werden manchmal in Schachteln mit Schuhen oder in einigen Verpackungen mit elektronischen Ger√§ten aufbewahrt).  Wenn Kieselgel unbekannter Herkunft l√§ngere Zeit gelagert wurde, muss es vor der Verwendung in einem elektrischen Ofen bei 140-150 Grad f√ºr mehrere Stunden kalziniert werden.  Wenn der Koffer ordnungsgem√§√ü versiegelt ist, muss das Trockenmittel nicht √∂fter als zu Beginn jeder Sommersaison ausgetauscht werden. <br><br><h3>  Hauptmodul </h3><br>  Im Hauptmodul werden alle Werte akzeptiert, ggf. entschl√ºsselt, gem√§√ü den Kalibriergleichungen konvertiert und angezeigt. <br><br>  Der Empf√§nger befindet sich au√üerhalb des Hauptmoduls der Station und in einer kleinen Box mit Ohren zur Montage.  Die Antenne wird durch eine √ñffnung in der Abdeckung herausgef√ºhrt, alle √ñffnungen im Geh√§use sind mit Rohgummi verschlossen.  Die Empf√§ngerkontakte sind mit einem sehr zuverl√§ssigen Haushaltsanschluss vom Typ RS-4 verbunden. Auf der Empf√§ngerseite ist er √ºber ein St√ºck eines doppelt abgeschirmten AV-Kabels verbunden: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5da/ffc/abe/5daffcabee184faa792d98fffea4abb7.jpg" width="500" alt="Bild"><br><br>  Ein Signal wird entlang eines der Kabeladern aufgenommen, und auf der anderen Seite wird die Stromversorgung in Form von 9 Volt vom Netzteil des Moduls geliefert.  Der Stabilisator Typ LM-2950-5.0 wird zusammen mit Filterkondensatoren in einer Box mit dem Empf√§nger auf einem separaten Schal installiert. <br><br>  Es wurden Experimente durchgef√ºhrt, um die L√§nge des Kabels zu erh√∂hen (nur f√ºr den Fall, w√ºrde es pl√∂tzlich nicht durch die Wand funktionieren?), Bei der sich herausstellte, dass sich innerhalb der L√§nge von bis zu 6 Metern nichts √§ndert. <br><br>  Es gibt nur vier OLED-Displays: zwei gelbe Served-Wetterdaten, zwei gr√ºne Uhren und einen Kalender.  Ihre Platzierung ist auf dem Foto dargestellt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccb/ff2/095/ccbff20958163b5865beb85f9a2bcf0f.jpg" width="500" alt="Bild"><br><br>  Bitte beachten Sie, dass in jeder Gruppe eine der Anzeigen Text ist, die zweite Grafik, mit k√ºnstlich erstellten Schriftarten in Form von Glyphenbildern.  Hier wird nicht auf das Problem der Anzeige von Informationen auf Displays eingegangen, um den bereits umfangreichen Text des Artikels und die Beispiele nicht aufzubl√§hen: Aufgrund des Vorhandenseins von Glyphenbildern, die einzeln angezeigt werden m√ºssen (h√§ufig durch einfaches Auflisten der Optionen mit dem Falloperator), k√∂nnen die Ausgabeprogramme sein sehr sperrig.  Informationen zum Umgang mit solchen Anzeigen finden Sie in der Ver√∂ffentlichung des Autors ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grafik- und Textmodus von Winstar-Anzeigen</a> ‚Äú, die ein Beispiel f√ºr eine Anzeige zur Ausgabe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von Winddaten</a> enth√§lt. <br><br>  <b>Schaltplan.</b>  Die Uhr und ihre Anzeigen werden zur Erleichterung der Einrichtung von einem separaten Arduino Mini-Controller gewartet, und wir werden sie hier nicht mehr zerlegen.  Das Anschlussdiagramm der Komponenten zum Arduino Nano, das den Empfang und die Ausgabe von Wetterdaten steuert, lautet wie folgt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c6/0c2/49d/6c60c249dfa514a332194b8c5cc10e95.png" width="1000" alt="Bild"><br><br>  Hier wird im Gegensatz zum Remote-Modul der Anschluss von Wettersensoren - einem Barometer und einem internen Temperatur-Feuchtigkeits-Sensor - gezeigt.  Achten Sie auf die Stromverkabelung - die Displays werden von einem separaten 5-V-Stabilisator Typ LM1085 gespeist.  Es ist nat√ºrlich, die Taktanzeigen von dort aus mit Strom zu versorgen. In diesem Fall muss der Taktregler jedoch auch mit derselben Spannung und √ºber den 5-V-Ausgang und nicht mit Vin betrieben werden (bei Mini Pro wird letzterer als RAW bezeichnet).  Wenn Sie den Uhrencontroller auf die gleiche Weise wie Nano - 9 Volt √ºber den RAW-Ausgang mit Strom versorgen, steht sein interner Stabilisator in Konflikt mit den externen 5 Volt, und nat√ºrlich gewinnt der St√§rkste in diesem Kampf, dh LM1085 und Mini bleiben v√∂llig ohne Strom.  Um alle m√∂glichen Probleme zu vermeiden, sollte vor dem Programmieren des Nano und insbesondere des Mini (dh vor dem Anschlie√üen des USB-Kabels) der externe Adapter abgezogen werden. <br><br>  Wenn beim LM1085-Stabilisator alle vier Displays angeschlossen sind, wird die Leistung auf etwa ein Watt verteilt. Daher sollte sie auf einem kleinen K√ºhler installiert werden, der etwa 5 bis 10 cm2 von einer Aluminium- oder Kupferecke entfernt ist. <br><br>  Empfang und Datenverarbeitung.  Hier reproduziere und kommentiere ich nur Fragmente des Programms, die sich auf Winddaten beziehen, ein paar Worte zu anderen Sensoren unten. <br><br>  Um eine Nachricht auf einem 433-MHz-Kanal zu empfangen, ist die in vielen Quellen beschriebene Standardmethode anwendbar.  Wir verbinden die Bibliothek und deklarieren die Variablen: <br><br><pre> <code class="plaintext hljs">#include &lt;VirtualWire.h&gt; . . . . . int volt; //      float batt; //  ‚Äî   byte wDir; //    uint16_t t_time = 0; //   char str[5]; //   uint8_t buf[VW_MAX_MESSAGE_LEN]; //    uint8_t buflen = VW_MAX_MESSAGE_LEN; // max    . . . . .</code> </pre><br>  Eine Besonderheit h√§ngt mit der Gr√∂√üe des Pufferes zusammen: Es reicht nicht aus, seinen Wert (VW_MAX_MESSAGE_LEN) einmal zu Beginn des Programms zu deklarieren.  Da diese Variable in der Empfangsfunktion als Referenz angezeigt wird (siehe unten), muss die Standardnachrichtengr√∂√üe in jedem Zyklus aktualisiert werden.  Andernfalls wird aufgrund des Empfangs besch√§digter Nachrichten der Buflen-Wert jedes Mal verk√ºrzt, bis Sie anfangen, alle Arten von Unsinn anstelle von Daten zu erhalten.  In den Beispielen werden diese beiden Variablen normalerweise lokal im loop () -Zyklus deklariert, da die Puffergr√∂√üe automatisch aktualisiert wird. Hier wiederholen wir einfach die Zuweisung des gew√ºnschten Werts zu Beginn jedes Zyklus. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nehmen Sie im Setup-Verfahren die folgenden Einstellungen vor: </font></font><br><br><pre> <code class="plaintext hljs">void setup() { delay (500); //    pinMode(16,INPUT_PULLUP); //   vw_setup(1200); //   VirtualWire vw_set_rx_pin(17); //A3   VirtualWire . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bevor etwas aufgenommen wird, wird das Zeitintervall t_time √ºberpr√ºft, das seit dem letzten Empfang vergangen ist. </font><font style="vertical-align: inherit;">Wenn vern√ºnftige Grenzwerte √ºberschritten wurden (z. B. 48 Sekunden - dreimal so lange wie die Wiederholungszeit von Nachrichten von der externen Einheit), wird dies als Verlust des Sensors empfunden und auf dem Display angezeigt:</font></font><br><br><pre> <code class="plaintext hljs">void loop() { vw_rx_start(); //   buflen = VW_MAX_MESSAGE_LEN; //     if ((int(millis()) - t_time) &gt; 48000) // t_time    48  { &lt;   &gt; }//end    if (vw_have_message()) { //  if (vw_get_message(buf, &amp;buflen)) //    { vw_rx_stop(); //    t_time = millis(); // t_time for (byte i=0;i&lt;3;i++) //     str[i]= buf[i]; str[3]='\0'; if((str[0]=='D')&amp;&amp;(str[1]=='A')&amp;&amp;(str[2]=='T')) { //  // : for (byte i=3;i&lt;7;i++) //     str[i-11]= buf[i]; //     volt=atoi(str); //    volt=(volt/10)-100; //   4-  batt=float(volt)/55.5; //       //      for (byte i=7;i&lt;11;i++) //     str[i-15]= buf[i]; //     int w_Dir=atoi(str); //    w_Dir=(w_Dir-1000)/10; //    wDir=lowByte(w_Dir); //  -   &lt;      case&gt; . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koeffizient 55.5 - Umwandlung des Wertes des ADC-Codes in eine reale Spannung, sein Wert h√§ngt von der Referenzspannung und den Werten der Widerst√§nde des Teilers ab. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úbrigens hat der Gray-Code eine Funktion: Die Reihenfolge der Bits ist dabei nicht wichtig, der Code speichert alle seine Eigenschaften, wenn sie neu angeordnet werden. Und da wir beim Entschl√ºsseln immer noch jeden Fall separat betrachten, k√∂nnen die Bits in beliebiger Reihenfolge angezeigt und sogar verwirrt werden, wenn sie verbunden sind. Es ist eine andere Sache, wenn Sie diese Angelegenheit irgendwie kl√§ren m√∂chten - erstellen Sie beispielsweise ein Array von Richtungswerten ("s", "ssz", "sz", "ssz", "z" usw.) und statt einer individuellen √úberlegung Jede Option zum Extrahieren von Bezeichnungen nach Nummer in diesem Array. Dann w√§re es notwendig, den Gray-Code in eine geordnete Bin√§rdatei umzuwandeln, und die Reihenfolge der Bits w√ºrde eine bedeutende Rolle spielen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Und schlie√ülich extrahieren wir den Geschwindigkeitswert und schlie√üen alle Operatoren: </font></font><br><br><pre> <code class="plaintext hljs">. . . . . for (byte i=19;i&lt;23;i++) //     str[i-19]= buf[i]; //     int wFrq=atoi(str); //    wFrq = (wFrq-1000)/10; //   4-  wFrq=10+0.5*wFrq;//      &lt;    &gt; }//end if str=DAT }//end vw_get_message } //end vw_have_message(); . . . . .</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist 10 + 0,5 * wFrq die Eichgleichung. </font><font style="vertical-align: inherit;">10 dm / s (dh 1,0 Meter pro Sekunde) ist der Schwellenwert f√ºr den Start und 0,5 ist der Koeffizient f√ºr die Umwandlung der Frequenz in Geschwindigkeit (in dm / s). </font><font style="vertical-align: inherit;">Bei einem Nullwert der Eingangsfrequenz ergibt diese Gleichung 10 dm / s, daher sollte sorgf√§ltig darauf geachtet werden, dass es sich nicht um 1 m / s handelt, sondern um einen Nullwert. </font><font style="vertical-align: inherit;">Sie k√∂nnen den Geschwindigkeitssensor mit einem der billigsten Handanemometer und Desktop-L√ºfter kalibrieren. </font><font style="vertical-align: inherit;">Versuchen Sie nicht, die Startschwelle experimentell zu bestimmen - es ist viel genauer, wenn zwei oder drei Punkte des direkten Kalibrierungswerts der Geschwindigkeit V von der Frequenz F notiert werden: V = V + K √ó F bei unterschiedlichen Durchflussraten, dann wird die Startschwelle automatisch als Wert von V (Punktordinate) bestimmt Schnittpunkt dieser Linie mit der Geschwindigkeitsachse).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bevor Sie die Hauptschleife schlie√üen, m√ºssen Sie noch eine Sache tun. Wir haben die Batteriespannung, aber Sie m√ºssen sie nicht st√§ndig anzeigen - nehmen Sie einfach Platz ein. Dazu ben√∂tigen wir die Schaltfl√§che Kn1 - durch Anklicken ersetzen wir vor√ºbergehend (bis zur n√§chsten Datenaktualisierung) die externe Temperatur-Feuchtigkeits-Leitung durch den Spannungswert:</font></font><br><br><pre> <code class="plaintext hljs">. . . . . if (digitalRead(16)==LOW){ //  &lt;   ,   -&gt; }//  delay(500); }// loop</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich hatte einen Knopf, wie aus der Schaltung ersichtlich, mit einem Umschaltkontakt, aber nichts hindert daran, den √ºblichen mit einem Schlie√ükontakt zu installieren und ihn √ºber einen Widerstand mit der Stromversorgung zu verbinden. Sie k√∂nnen dazu auch das Blinken von Symbolen auf dem Display hinzuf√ºgen, wenn die Batteriespannung unter beispielsweise 10 Volt f√§llt, als Zeichen daf√ºr, dass es Zeit ist, sie zu √§ndern. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abschlie√üend zu Wettersensoren.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Als externer Sensor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wurde SHT-75 verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - der einzige Amateursensor, den ich gefunden habe, der nicht kalibriert werden muss und der reale Werte von Temperatur und Luftfeuchtigkeit direkt "out of the box" anzeigt (daher der hohe Preis). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Bibliothek zum Anschlie√üen finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der SHT-75 ist ziemlich dumm konstruiert: Das Metallsubstrat der Platine leitet die W√§rme sehr gut, daher muss es au√üerhalb des Geh√§uses vollst√§ndig entfernt werden. Andernfalls reicht das Vorhandensein nur eines Controllers vom Typ ATmega328 mit einem Leistungsregler in einem geschlossenen Geh√§use aus, um den Sensor durch das Substrat um einige Grad zu erw√§rmen, selbst wenn sein Kopf herausgezogen wird. Mein Schema mit Windsensoren mit Str√∂men von 20 bis 130 mA (sogar Str√∂me von unbedeutenden Millisekunden) erw√§rmte den SHT-75 um f√ºnf Grad, sodass er herausgebracht und separat auf einer Kunststoffplatte installiert wurde, die seitlich aus dem Geh√§use herausragt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten vom SHT-75 werden von derselben Steuerung wie die Daten von den Windsensoren aufgenommen und vom Remote-Modul in einem einzigen Paket √ºber einen 433-MHz-Funkkanal gesendet. Zur √úbertragung werden sie au√üerdem vorab in ein 4-Byte-Zeichenfolgenformat konvertiert. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Temperatur und Luftfeuchtigkeit im Raum zu messen, wurde das banale DHT-22 gew√§hlt - da die Reichweite dort im Vergleich zur Stra√üe gering ist, spielt es keine Rolle, welcher Sensor verwendet werden soll (au√üer nat√ºrlich DHT-11, das unter keinen Umst√§nden verwendet werden sollte) es ist einfach nicht funktionsf√§hig). Die Temperatur des DHT-22 wurde durch Messungen mit einem Quecksilberthermometer korrigiert (sie stimmten vollst√§ndig mit dem SHT-75 √ºberein!), Und die Luftfeuchtigkeit war im Vergleich zum SHT-75 leicht abgeflacht. Korrekturen werden unmittelbar vor der Anzeige eingegeben.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT-22 muss √ºbrigens auch mit Displays aus dem Geh√§use genommen werden - sonst erw√§rmt es sich zwangsl√§ufig und liegt. Ich befestige es an einer Kunststoffhalterung am Boden des Geh√§uses in einem Abstand von zehn Millimetern. Dieser Umstand ist √ºbrigens, wie ich vermute, einer der Gr√ºnde (mit Ausnahme des Fehlens einer individuellen Kalibrierung), dass alle Markenwetterstationen RST und Oregon schamlos im Zeugnis liegen und sogar eine Ausbreitung von sich selbst (ein interner Sensor mit einem externen) von zwei bis drei Grad aufweisen und bis zu zehn Prozent Feuchtigkeit. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Barometer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es stellt keine Probleme dar, da fast alle im Handel erh√§ltlichen Produkte auf derselben Basis hergestellt werden - der mikroelektromechanische BMP180-Chip (MEMS) oder seine Modifikationen. Meine pers√∂nliche Erfahrung mit dem Versuch, eine seltenere Variante auf Basis von LPS331AP zu verwenden, war negativ: Es war schwieriger, eine Bibliothek daf√ºr zu finden, und um das Ganze abzurunden, wurde ein Konflikt mit anderen Ger√§ten auf dem I2C-Bus festgestellt. Die Messwerte des Barometers m√ºssen m√∂glicherweise am Installationsort angepasst werden - alle 10-12 Meter √ºber dem Meeresspiegel wird der Druck um 1 mm Hg verringert.</font></font> Art.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher muss ein bestimmter Wert von den Messwerten abgezogen (oder addiert) werden, damit der Druck den Messwerten der offiziellen Wetterstation in der Region entspricht. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bringe nicht alle Wetterstationsprogramme vollst√§ndig mit - sie sind ziemlich sperrig und Sie k√∂nnen den Bau immer noch nicht eins zu eins wiederholen. Wenn √ºberhaupt, klopfen Sie an die PM. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD vom 30.06.17.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installierte Energie von einem Solarpanel. Kit von hier: </font></font><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solarpanel- </font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Batterie</a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles zusammen + Lieferung in Moskau innerhalb von 2,5 tyr. Es funktioniert einwandfrei. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine interessante Technik zur Berechnung der Leistung von Solarbatterie und Batterie, die von Beratern auf dieser Website angeboten wird. Als Beispiel f√ºr die Berechnung des Stromverbrauchs von 3 W (ich habe viel weniger) zitiere ich: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äû </font><font style="vertical-align: inherit;">3 W </font><font style="vertical-align: inherit;">multipliziert mit 24 Stunden und geteilt durch 6 = 12 Ah, dies ist die minimale Batteriekapazit√§t. </font><font style="vertical-align: inherit;">3 W </font><font style="vertical-align: inherit;">multipliziert mit 24 Stunden und geteilt durch 3 Stunden = 24 W. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist die minimale Leistung der Solarbatterie.‚Äú</font></font><br>  Keine Kommentare. <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In meinem Fall ist die resultierende Leistung eines Solarkraftwerks unter den schlechtesten Wetterbedingungen zehnmal h√∂her als erforderlich. Daher k√∂nnen Sie sich in der Sensorsteuerung nicht besonders um die Energieeinsparung k√ºmmern und alle erforderlichen Frequenzen anwenden, um Messwerte und Mittelwerte zu erfassen. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD vom 13.09.18.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In fast zwei Betriebszeiten wurden die St√§rken und Schw√§chen der Station aufgedeckt. Schwach - Erstens ist der Aktualisierungszyklus von Messwerten von 16 Sekunden (aus vier Messreihen) wie urspr√ºnglich zu lang. Durch die Installation einer Solarbatterie mit einer Pufferbatterie konnten wir nicht an Energieeinsparungen denken und mit der Zykluszeit spielen. Als Ergebnis wurde der Zyklus auf 8 Sekunden eingestellt (vier Messungen in zwei Sekunden).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgrund mechanischer Verbesserungen wurde ein festes Axiallager unter der Spitze des Geschwindigkeitssensors eingef√ºhrt (ja, ich wurde damals vor seiner Notwendigkeit gewarnt, aber ich habe damals nicht herausgefunden, wie ich es herstellen soll). Nach einiger Zeit schnitt die Achse des Sensors vollst√§ndig durch den fluoroplastischen Tr√§ger und die Startschwelle stieg stark an (dies hatte √ºbrigens keinen Einfluss auf die Empfindlichkeit der Wetterfahne). Daher wurde der Tr√§ger durch ein Axiallager aus rostfreiem Stahl ersetzt, in dem mit einem d√ºnnen Bohrer eine kleine Aussparung hergestellt wurde. Ich sehe voraus, dass ich mir dann etwas anderes mit einem Punkt einfallen lassen muss, der wie die gesamte Achse aus Duraluminium besteht. Aber ich habe es auf den Moment verschoben, in dem der Sensor noch erneuert werden muss: Die Laserscheibe, die als Grundlage f√ºr das Design diente, wurde zwei Jahreszeiten lang von der Sonne bew√∂lkt und begann zu knacken. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD vom 06/05/19.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úber die √Ñnderung des Sensors (die gleiche Wetterfahne links). Der Geschwindigkeitssensor musste sowohl wegen der abgenutzten Achse als auch wegen der unbrauchbaren Laserscheibe erneuert werden. Die Basis des Designs bleibt unver√§ndert, aber die neue Laserscheibe ist mit goldener Spr√ºhfarbe bemalt. Die L√∂sung f√ºr die Achsenspitze wurde in der folgenden Form gefunden. Eine Aussparung wurde genau in der Duralachse genau in der Mitte gebohrt, und auf dem zweiten Kleber wurde eine 3 mm lange Verkleidung der Oberseite des chinesischen Gewindebohrers angebracht. Die Spitze am Wasserhahn ist ein gut zentrierter Kegel mit einem Winkel von etwa 70-80 Grad. Er wurde zus√§tzlich mit einer Nullhaut und dann mit GOI-Paste poliert. Als Basis habe ich den Kopf einer rostfreien M3-Schraube mit einem abges√§gten Schlitz verwendet, in dem eine kleine mittlere Aussparung mit einem herk√∂mmlichen Bohrer D = 2 mm markiert ist. Diese Schraube wurde direkt in die Aussparung im Fluoroplast eingeschraubt,mit einer Achse ges√§gt, bevor die Ausrichtung vorgesehen war.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Spitze der Achse wurde mit Graphitfett geschmiert, um sie vor Korrosion zu sch√ºtzen (da mir die rostfreien Eigenschaften des Gewindebohrers unbekannt sind). </font><font style="vertical-align: inherit;">Nach einigem Einschleifen nahm die Startschwelle so stark ab, dass es unm√∂glich wurde, mit einem Markenanemometer zu messen, bei dem die Schwelle etwa 0,3 bis 0,5 cm / s betr√§gt. </font><font style="vertical-align: inherit;">Nach indirekten Daten (durch Konstruktion einer geraden Linie an zwei Punkten) wurde freiwillig ein Schwellenwert von 0,3 m / s festgelegt, der jedoch wahrscheinlich etwas niedriger ist. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Haupt√§nderung bei den Berechnungsalgorithmen betrifft auch Windsensoren, und ich fand es n√ºtzlich, dies in einem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separaten Artikel zu ver√∂ffentlichen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de404385/">https://habr.com/ru/post/de404385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de404375/index.html">Quantum News von IBM: Zwei leistungsstarke Prozessoren eines neuen Typs werden eingef√ºhrt</a></li>
<li><a href="../de404377/index.html">Die Welt des russischen ‚ÄûInternet der Dinge‚Äú: T-Band, Element, X-Turion, FlipFlic und vieles mehr</a></li>
<li><a href="../de404379/index.html">Wir suchen Referenten auf der DIY-Mitap am 1. Juli</a></li>
<li><a href="../de404381/index.html">DIY 3D Video</a></li>
<li><a href="../de404383/index.html">Formlabs stellte Fuse 1 vor, Top 3D Shop fand einen Gewinner</a></li>
<li><a href="../de404387/index.html">Er nahm ein Videointerview von Vizepr√§sident Arduino und diskutierte mit ihren unterrichtenden Schulkindern FPGAs / FPGA und Verilog</a></li>
<li><a href="../de404389/index.html">Atmotube Atmosphere Tube - Tragbarer Luftqualit√§tssensor</a></li>
<li><a href="../de404391/index.html">Drucker der Stufe 80. Epson WorkForce Enterprise</a></li>
<li><a href="../de404393/index.html">Bobby Compact - eine neue Generation von Anti-Diebstahl-Rucks√§cken</a></li>
<li><a href="../de404395/index.html">Geschichten rund um den SCUMM-Motor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>