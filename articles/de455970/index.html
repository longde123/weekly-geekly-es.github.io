<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôâÔ∏è üë¢ üë®‚Äç‚öïÔ∏è Alles, was Sie √ºber SwiftUI wissen wollten, aber Angst hatten zu fragen ü§¶üèΩ ü§ûüèæ üîì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! Mein Name ist Renat. Ich entwickle einen Abonnement-Analysedienst in iOS - Apphud. 


 Wie Sie wissen, hat Apple auf der WWDC 2019 sein neues S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alles, was Sie √ºber SwiftUI wissen wollten, aber Angst hatten zu fragen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/455970/"><p><img src="https://habrastorage.org/getpro/habr/post_images/cf0/767/da2/cf0767da24045153cfec395c841c5a52.png"></p><br><p>  Hallo!  Mein Name ist Renat. Ich entwickle einen Abonnement-Analysedienst in iOS - Apphud. </p><br><p> Wie Sie wissen, hat Apple auf der WWDC 2019 sein neues SwiftUI-Framework vorgestellt, das in Zukunft das bekannte UIKit ersetzen soll (oder nicht?).  Mit SwiftUI k√∂nnen Sie die Anwendungsoberfl√§che in einem deklarativen Stil beschreiben und die Codemenge erheblich reduzieren. </p><br><p>  Apple hat bereits einige interessante englische <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tutorials</a> mit vielen Beispielen vorgestellt.  Ich werde versuchen, in Form von Fragen und Antworten √ºber das neue Framework zu sprechen.  Also lass uns gehen. <a name="habracut"></a></p><br><h2 id="pered-nachalom-raboty">  Bevor Sie beginnen </h2><br><p>  Um mit SwiftUI arbeiten zu k√∂nnen, m√ºssen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Xcode 11 Beta</a> herunterladen.  Sie m√ºssen au√üerdem ein registrierter Apple-Entwickler sein.  Das neueste macOS Catalina zu haben ist w√ºnschenswert, aber nicht notwendig.  Ohne diese Option ist Canvas nicht verf√ºgbar. </p><br><p>  Erstellen Sie in Xcode 11 Beta ein neues Projekt und stellen Sie sicher, dass "SwiftUI verwenden" aktiviert ist. </p><br><h2 id="voprosy-i-otvety">  Fragen und Antworten </h2><br><h3 id="kuda-podevalsya-interface-builder">  Wohin ist Interface Builder gegangen? </h3><br><p> SwiftUI ben√∂tigt <em>Interface Builder</em> nicht mehr - es wurde durch <em>Canvas ersetzt</em> , einen interaktiven Schnittstelleneditor, der eng mit Code verwandt ist.  Beim Schreiben von Code wird sein visueller Teil in der <em>Zeichenfl√§che</em> automatisch generiert und umgekehrt.  Sehr praktisch und vor allem sicher.  Jetzt <code>@IBOutlet</code> Ihre Anwendung nicht ab, da Sie vergessen haben, die <code>@IBOutlet</code> mit der Variablen zu aktualisieren.  In diesem Artikel werden wir keine <em>Leinwand</em> ber√ºhren, sondern nur den Code betrachten. </p><br><h3 id="izmenilsya-li-zapusk-prilozheniya">  Hat sich der Anwendungsstart ge√§ndert? </h3><br><p>  Ja, jetzt ist das urspr√ºngliche Objekt in der Anwendungsschnittstelle nicht <code>UIWindow</code> , sondern die neue <code>UIScene</code> Klasse (oder deren Nachkomme <code>UIWindowScene</code> ).  Und der Szene wird ein Fenster hinzugef√ºgt.  Diese √Ñnderungen betreffen nicht nur SwiftUI, sondern iOS 13 insgesamt. </p><br><p>  Wenn Sie ein Projekt erstellen, werden die <em>Dateien</em> <em>AppDelegate</em> , <em>SceneDelegate</em> und <em>ContentView angezeigt</em> .  <em>SceneDelegate</em> - Ein Delegat der <code>UIWindowScene</code> Klasse, mit dem Szenen in der Anwendung gesteuert werden.  <em>Erinnert</em> stark an <em>AppDelegate</em> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/02e/176/a9b/02e176a9b712281554aff7496a166ec1.png" alt="Die SceneDelegate-Klasse wird in Info.plist angegeben"><br>  <em>Die SceneDelegate-Klasse wird in Info.plist angegeben</em> </p><br><p>  In der Delegate-Methode erstellt <code>scene: willConnectTo: options:</code> ein Fenster und einen Root- <code>UIHostingController</code> , der eine <code>ContentView</code> enth√§lt.  <code>ContentView</code> ist unsere "Homepage".  Alle Entwicklungen werden in dieser Klasse durchgef√ºhrt. </p><br><h3 id="chem-view-otlichaetsya-ot-uiview">  Wie unterscheidet sich View von UIView? </h3><br><p>  <code>ContentView.swift</code> Sie <code>ContentView.swift</code> √∂ffnen, wird eine ContentView-Containerdeklaration angezeigt.  Wie Sie bereits verstanden haben, gibt es <code>viewDidLoad</code> <code>viewDidAppear</code> keine bekannten <code>viewDidLoad</code> oder <code>viewDidAppear</code> Methoden.  Die Basis der Bildschirme ist hier nicht der <code>UIViewController</code> , sondern die <em>Ansicht</em> .  Als erstes f√§llt auf, dass <code>ContentView</code> eine <code>struct</code> , die das <code>View</code> Protokoll akzeptiert.  Ja, <code>View</code> jetzt ein Protokoll und sehr einfach.  Die einzige Methode, die Sie in <code>ContentView</code> implementieren <code>ContentView</code> ist die Beschreibung des Variablenk√∂rpers.  Alle Ihre <em>Unteransichten</em> und benutzerdefinierten <em>Ansichten</em> m√ºssen das <code>View</code> Protokoll akzeptieren, d. H. Eine <code>body</code> Variable haben. </p><br><h3 id="chto-takoe-body">  Was ist K√∂rper? </h3><br><p>  <code>Body</code> ist direkt unser Container, in dem alle anderen <em>Unteransichten</em> hinzugef√ºgt werden.  Dies √§hnelt in gewisser Weise dem <code>ContentView</code> einer <em>HTML-</em> Seite, bei der es sich bei der <em>HTML-</em> Seite um eine <code>ContentView</code> .  <code>Body</code> sollte immer genau einen Nachkommen und jede Klasse haben, die das <code>View</code> Protokoll akzeptiert. </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>) } }</code> </pre> <br><h3 id="opaque-return-types-ili-chto-takoe-some">  Undurchsichtige R√ºckgabetypen oder welche? </h3><br><p>  Die Konstruktion <code>some TypeName</code> ist eine Swift 5.1-Innovation, die als <em>undurchsichtiger R√ºckgabetyp bezeichnet wird</em> .  Es wird f√ºr F√§lle verwendet, in denen es f√ºr uns nicht wichtig ist, welches Objekt zur√ºckgegeben werden soll. Hauptsache, es unterst√ºtzt den angegebenen Typ, in diesem Fall das <code>View</code> Protokoll. </p><br><p>  Wenn wir einfach <code>var body: View</code> schreiben w√ºrden, w√ºrde dies bedeuten, dass wir die <code>View</code> .  Die <code>Any</code> Klasse funktioniert auch nicht, da wir eine Typkonvertierungsoperation ausf√ºhren m√ºssten (unter <em>Verwendung des Operators</em> <code>as!</code> ).  Daher haben sie das spezielle Wort <code>some</code> vor dem Protokollnamen gefunden, um den <em>undurchsichtigen R√ºckgabetyp</em> anzuzeigen.  Anstelle von <code>View</code> wir <code>Text</code> , <code>Image</code> , <code>VStack</code> - alles, da alle das <code>View</code> Protokoll unterst√ºtzen.  Es muss jedoch genau ein Element geben: Wenn versucht wird, mehr als eine <code>View</code> Compiler einen Fehler aus. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e17/8d3/628/e178d3628d10d0cd438d776a9c4ecd70.png"><br>  <em>Kompilierungsfehler beim Versuch, mehr als ein Element an body zur√ºckzugeben</em> </p><br><h3 id="chto-za-sintaksis-vnutri-skobok-i-gde-addsubview">  Wie lautet die Syntax in den Klammern und wo befindet sich addSubview? </h3><br><p>  Mit Swift 5.1 wurde die M√∂glichkeit eingef√ºhrt, Objekte in einem deklarativen Stil zu einem Ganzen zu gruppieren.  Dies √§hnelt einem Array innerhalb eines <em>Abschlussblocks</em> , die Elemente werden jedoch aus einer neuen Zeile ohne Kommas und <em>R√ºckgabe</em> aufgelistet.  Dieser Mechanismus wurde <em>Function Builder genannt</em> . </p><br><p>  Dies ist in SwiftUI weit verbreitet.  Basierend auf <em>Function Builder haben</em> sie <code>ViewBuilder</code> - einen deklarativen Schnittstellendesigner - erstellt.  Mit <code>ViewBuilder</code> wir nicht mehr f√ºr jedes Element <code>addSubview</code> schreiben - listen Sie einfach alle <code>addSubview</code> aus einer neuen Zeile im <code>addSubview</code> auf.  SwiftUI f√ºgt Elemente zu einem komplexeren √ºbergeordneten Container hinzu und gruppiert sie. </p><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@available</span></span>(iOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, <span class="hljs-type"><span class="hljs-type">OSX</span></span> <span class="hljs-number"><span class="hljs-number">10.15</span></span>, tvOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, watchOS <span class="hljs-number"><span class="hljs-number">6.0</span></span>, *) @_functionBuilder <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// Builds an empty view from an block containing no statements, `{ }`. public static func buildBlock() -&gt; EmptyView /// Passes a single view written as a child view (e..g, `{ Text("Hello") }`) through /// unmodified. public static func buildBlock&lt;Content&gt;(_ content: Content) -&gt; Content where Content : View }</span></span></code> </pre> <br><p>  <em>ViewBuilder-Anzeige im SwiftUI-Framework</em> </p><br><h3 id="kak-dobavlyat-uilabel-uiimageview-i-drugie-elementy">  Wie f√ºge ich UILabel, UIImageView und andere Elemente hinzu? </h3><br><p>  Elemente werden sehr einfach erstellt: Jede <code>View</code> muss aus einer neuen Zeile geschrieben werden und das Erscheinungsbild mithilfe der Modifikatorfunktionen ( <em>Ansichtsmodifikatoren</em> ) √§ndern.  Der Unterschied zwischen uns bekannten Modifikatoren und Funktionen besteht darin, dass sie immer ein Containerobjekt anstelle von <code>void</code> .  Daher k√∂nnen wir durch den Punkt ganze Ketten von Modifikatoren erstellen. </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{ <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Yet another subtitle"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">20</span></span>)) } }</code> </pre> <br><p>  Allerdings haben nicht alle Steuerelemente und <em>View</em> ihre Analoga in SwiftUI.  Hier ist eine unvollst√§ndige Liste der Klassen von UIKit und ihrer Analoga: </p><br><ul><li><p>  <code>UITableView</code> -&gt; <code>List</code> </p><br></li><li><p>  <code>UICollectionView</code> hat kein Analogon </p><br></li><li><p>  <code>UILabel</code> -&gt; <code>Text</code> </p><br></li><li><p>  <code>UITextField</code> -&gt; <code>TextField</code> </p><br></li><li><p>  <code>UIImageView</code> -&gt; <code>Image</code> </p><br></li><li><p>  <code>UINavigationController</code> -&gt; <code>NavigationView</code> </p><br></li><li><p>  <code>UIButton</code> -&gt; <code>Button</code> </p><br></li><li><p>  <code>UIStackView</code> -&gt; <code>HStack</code> / <code>VStack</code> </p><br></li><li><p>  <code>UISwitch</code> -&gt; <code>Toggle</code> </p><br></li><li><p>  <code>UISlider</code> -&gt; <code>Slider</code> </p><br></li><li><p>  <code>UITextView</code> hat kein Analogon </p><br></li><li><p>  <code>UIAlertController</code> -&gt; <code>Alert</code> / <code>ActionSheet</code> </p><br></li><li><p>  <code>UISegmentedControl</code> -&gt; <code>SegmentedControl</code> </p><br></li><li><p>  <code>UIStepper</code> -&gt; <code>Stepper</code> </p><br></li><li><p>  <code>UIDatePicker</code> -&gt; <code>DatePicker</code> </p><br></li></ul><br><h3 id="kak-proishodit-navigaciya-mezhdu-ekranami">  Wie ist die Navigation zwischen den Bildschirmen? </h3><br><p>  Der <em>Navigationscontroller</em> √ºbernimmt die Rolle einer speziellen <code>NavigationView</code> .  Wickeln Sie einfach Ihren Code in <code>NavigationView{}</code> .  Die √úbergangsaktion selbst kann zu einer speziellen <code>NavigationLink</code> Schaltfl√§che hinzugef√ºgt werden, die den bedingten <code>DetailView</code> Bildschirm <code>DetailView</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">DetailView</span></span>() { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } }</code> </pre> <br><p>  Wie kann man neue Ansichten modal pr√§sentieren?  Dies geschieht beispielsweise mit dem <em>Blattkonstrukt</em> : </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Button</span></span>(action: { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Button Pushed"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.show_modal = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Present Modal"</span></span>) }.sheet(isPresented: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.$show_modal) { <span class="hljs-type"><span class="hljs-type">ModalView</span></span>() }</code> </pre> <br><p>  Wie oben erw√§hnt, kann <code>body</code> nicht nur eine Instanz von <code>View</code> , sondern auch jede andere Klasse, die dieses Protokoll akzeptiert.  Dies gibt uns die M√∂glichkeit <code>DetailView</code> nicht <code>DetailView</code> , sondern sogar <code>Text</code> oder <code>Image</code> zu <code>DetailView</code> ! </p><br><h3 id="kak-raspolagat-elementy-na-ekrane">  Wie ordne ich Elemente auf dem Bildschirm an? </h3><br><p>  Die Elemente sind unabh√§ngig voneinander angeordnet und k√∂nnen vertikal innerhalb von <code>VStack</code> , horizontal <code>HStack</code> und √ºbereinander <code>ZStack</code> .  <code>ScrollView</code> und <code>ListView</code> stehen uns ebenfalls zur Verf√ºgung.  Sie k√∂nnen diese Container abwechseln und freigeben, um ein beliebiges Netz von Elementen zu erhalten. </p><br><p>  Wenn Sie Container miteinander kombinieren, erhalten Sie einen ziemlich gro√üen Baum mit einer gro√üen Anzahl von Anh√§ngen.  SwiftUI ist jedoch speziell daf√ºr optimiert, sodass eine tiefe Verschachtelung der Container die Leistung nicht beeintr√§chtigt.  Dies wird im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video mit wwdc angegeben</a> ( <em>ab 15:32</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Uhr</a> ). </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">LargeView</span></span>(timeString: subtitle)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"See Fullscreen"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) } } }</code> </pre> <br><h3 id="kak-pokazat-navigation-bar">  Wie wird die Navigationsleiste angezeigt? </h3><br><p>  Das Deklarieren einer <code>NavigationView</code> reicht nicht aus. Sie m√ºssen einen <em>Navigationstitel</em> und -stil f√ºr die <em>Navigationsleiste</em> angeben. </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{}.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }</code> </pre> <br><p>  Beachten Sie, dass die Funktion <code>navigationBarTitle</code> nicht in der <code>NavigationView</code> , sondern in der internen <code>View</code> aufgerufen wird.  <em>DisplayMode</em> ist ein Parameter, der den Stil der <em>Navigationsleiste</em> angibt: gro√ü oder Standard. </p><br><h3 id="est-li-analog-metoda-viewdidload">  Gibt es ein Analogon zur viewDidLoad-Methode? </h3><br><p>  Wenn Sie beim Initialisieren der <code>View</code> Code ausf√ºhren m√∂chten, k√∂nnen Sie dies tun, indem Sie die Funktion onAppear {} hinzuf√ºgen.  <em>OnAppear</em> kann zu jeder <code>View</code> hinzugef√ºgt werden, z. B. zu <code>VStack</code> .  In diesem Beispiel wird eine http-Anforderung an den Server gesendet, wenn der Container auf dem Bildschirm angezeigt wird. </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination:<span class="hljs-type"><span class="hljs-type">DetailView</span></span>()) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date())"</span></span> } } } }</code> </pre> <br><blockquote>  Wir rufen die Funktion <code>loadTime</code> , die die aktuelle Uhrzeit vom Server anfordert und das <code>WorldTime</code> Modell zur√ºckgibt.  Wir werden in der <code>NetworkService</code> Klasse keine Zyklen durchf√ºhren. Sie k√∂nnen sich den gesamten Code ansehen, nachdem Sie die Quellcodes heruntergeladen haben.  Link am Ende des Artikels. </blockquote><p>  Die Variable <code>var statusString</code> wurde gerendert, um ihr sp√§ter die aktuelle Zeit zuzuweisen.  Die Variable hat ein spezielles Attribut <code>@State</code> .  Was meint er </p><br><h3 id="property-wrappers-ili-chto-takoe-state">  Property Wrapper oder was ist <code>@State</code> ? </h3><br><p>  Swift 5.1 f√ºhrte die sogenannten <em>Property Wrapper</em> (oder <em>Property Delegates</em> ) ein.  In SwiftUI- <em>Eigenschaften werden Wrapper</em> verwendet, um einen der <em>Ansichtsparameter</em> mit unserer eigenen Variablen zu aktualisieren oder zu binden, z. B. den Wert des Umschalters. </p><br><p>  Das <code>@State</code> Attribut ist ein spezielles Attribut, das vor einer Variablendeklaration steht.  Auf diese Weise k√∂nnen wir Eigenschafts√§nderungen ohne zus√§tzlichen Code automatisch verfolgen.  Im obigen Beispiel √§ndert sich der Text <em>"Weltzeit"</em> auf das aktuelle Datum, sobald wir den statusString-Wert aktualisieren. </p><br><p>  Um Werte zu binden ( <em>Eigenschaftenbindung</em> ), k√∂nnen wir im Code selbst ein Sonderzeichen <code>$</code> vor dem Namen der Variablen angeben: </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailsView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> changeToggle: <span class="hljs-type"><span class="hljs-type">Bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Toggle</span></span>(isOn: $changeToggle) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Change Toggle"</span></span>) } } }</code> </pre> <br><p>  <em>Durch √Ñndern der Schalterposition √§ndert sich auch der Wert der Variablen.</em> </p><br><p>  <em>Property Wrapper</em> sind ein sehr wichtiger Bestandteil von SwiftUI, ich habe sie nur beil√§ufig erw√§hnt.  F√ºr eine detailliertere Bekanntschaft mit <em>Property Wrappern</em> sehen Sie sich das Video von wwdc <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (ab der 37. Minute), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (ab der 12. Minute) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (ab der 19. Minute) an. </p><br><h3 id="kak-dobavlyat-view-v-runtime">  Wie f√ºge ich der Laufzeit eine Ansicht hinzu? </h3><br><p>  Es ist sofort erw√§hnenswert, dass Sie zu keinem Zeitpunkt eine <em>Ansicht</em> im w√∂rtlichen Sinne des Wortes hinzuf√ºgen k√∂nnen.  SwiftUI ist ein deklaratives Framework, das die gesamte <em>Ansicht</em> rendert.  Sie k√∂nnen jedoch verschiedene Bedingungen im <em>K√∂rper</em> festlegen und den Status der <em>Ansicht</em> aktualisieren, wenn sie sich √§ndern.  In diesem Beispiel verwenden wir die einfachste Gruppe von <code>@State ‚Äì if</code> mit der Variablen <code>isTimeLoaded</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isTimeLoaded : <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isTimeLoaded { addNavigationLink() } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) }.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNavigationLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"124!!!"</span></span>)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date().description(with: Locale.current))"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.isTimeLoaded = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeString : <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body : some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(timeString).font(.system(size: <span class="hljs-number"><span class="hljs-number">40</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } }</code> </pre> <br><p>  <code>addNavigationLink()</code> Sie √ºbrigens bemerkt, dass die Funktion <code>addNavigationLink()</code> nicht das Wort <code>return</code> ?  Dies ist eine weitere Neuerung von Swift 5.1 - f√ºr Funktionen mit einem einzelnen Ausdruck ist es jetzt optional, <code>return</code> .  Aber du kannst schreiben. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Dies ist nur ein Teil der SwiftUI-Fragen und Antworten.  Ich habe allgemeine Probleme untersucht und hoffe, dass dieser Artikel Anf√§ngern hilft, die wichtigsten Punkte dieses Frameworks zu verstehen.  SwiftUI ist noch roh, wird aber zweifellos verbessert. </p><br><p>  Die logische Frage ist: <em>Lohnt es sich, UIKit zu lernen?</em>  <em>Nat√ºrlich ja</em> .  UIKit ist die Basis f√ºr die Programmierung unter iOS und wird weiterentwickelt.  Dar√ºber hinaus sind viele SwiftUI-Komponenten ein Wrapper √ºber UIKit.  Bisher gibt es keine Bibliotheken, Frameworks und Pods f√ºr SwiftUI.  Alles muss von dir selbst geschrieben werden.  Es ist daher besser, beide Entwicklungsans√§tze zu untersuchen, damit Sie ein wertvollerer Entwickler sind. </p><br><p>  Sie k√∂nnen die Projektquellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> herunterladen. </p><br><p>  Vielen Dank, dass Sie den Artikel bis zum Ende gelesen haben.  Ich hoffe, Sie finden es n√ºtzlich. </p><br><h2 id="chto-pochitat">  Was zu lesen? </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So implementieren Sie Kontextmen√ºs in iOS 13</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">15 Tipps, um Ihre Abonnement-App in den App Store zu bringen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apple Subscriptions Notifications Guide f√ºr iOS.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sind sie wirklich gut?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de455970/">https://habr.com/ru/post/de455970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de455956/index.html">Chromium ist nicht nur ein Browser, sondern auch ein gutes Framework</a></li>
<li><a href="../de455958/index.html">Sich entwickelnde zellul√§re Automaten</a></li>
<li><a href="../de455960/index.html">Warum Entwickler gehen: 8 Gr√ºnde</a></li>
<li><a href="../de455962/index.html">Data Science und die Tropenkonferenz</a></li>
<li><a href="../de455966/index.html">Top 5 Unternehmen f√ºr die Entwicklung mobiler Apps in Gro√übritannien</a></li>
<li><a href="../de455972/index.html">Slurm: Die Raupe hat sich in einen Schmetterling verwandelt</a></li>
<li><a href="../de455976/index.html">Schr√§nke, Module oder Einheiten - was f√ºr die Energieverwaltung im Rechenzentrum w√§hlen?</a></li>
<li><a href="../de455978/index.html">Lambdas: von C ++ 11 bis C ++ 20. Teil 2</a></li>
<li><a href="../de455980/index.html">iOS Digest Nr. 7 (31. Mai - 13. Juni)</a></li>
<li><a href="../de455982/index.html">Es ist Zeit, GIF durch AV1-Video zu ersetzen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>