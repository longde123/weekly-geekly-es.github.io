<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë† üöï üë©‚Äçüî¨ Datenbank-Refactoring-Toolkit: Flyway vs. Liquibase üå∞ üòÇ üè¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werden wir √ºber Flyway und Liquibase sprechen , die beiden beliebtesten Java-basierten Datenbank-Refactoring-Tools. Der Zweck des Ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Datenbank-Refactoring-Toolkit: Flyway vs. Liquibase</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/440696/"><p>  In diesem Artikel werden wir √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flyway</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liquibase sprechen</a> , die beiden beliebtesten Java-basierten Datenbank-Refactoring-Tools.  Der Zweck des Artikels besteht darin, diese Tools zu vergleichen und herauszufinden, welches in welchen F√§llen besser zu verwenden ist. </p><br><p><img src="https://habrastorage.org/webt/qb/y-/rk/qby-rk-zmymfr22geirsw4t5yrq.png" alt="Db Omnibus"></p><a name="habracut"></a><br><h2 id="flyway">  Flyway </h2><br><p>  Das Flyway-Konzept konzentriert sich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sechs verschiedene Teams</a> , um das automatisierte Refactoring und die Versionierung von Datenbanken zu unterst√ºtzen.  Diese Befehle k√∂nnen √ºber die Befehlszeile, w√§hrend des Erstellungsprozesses (erstellt mit Maven oder Gradle) oder direkt aus Java-Code mithilfe von API-Aufrufen ausgef√ºhrt werden.  Wenn Sie diese Befehle ausf√ºhren, m√ºssen Sie die Parameter f√ºr die Verbindung mit der Datenbank (URL, Benutzername, Kennwort) angeben, die Sie umgestalten m√∂chten. </p><br><p> Der Hauptbefehl hei√üt <code>migrate</code> und f√ºhrt eine Funktion aus, die die gesamte Essenz des Datenbank-Refactorings enth√§lt: Er durchsucht einen speziellen Ordner mit SQL-Skripten (von denen jedes eine Versionsnummer im Dateinamen hat) und √ºberpr√ºft, welche davon bereits auf die Zieldatenbank angewendet wurden.  Anschlie√üend werden diejenigen ausgef√ºhrt, die noch nicht auf diese Datenbank angewendet wurden.  Im Falle eines Konflikts, wenn sich beispielsweise das bereits angewendete Skript seit seiner Verwendung ge√§ndert hat, unterbricht Flyway den Betrieb mit einer Fehlermeldung. </p><br><p>  Ein einzigartiges Merkmal von Flyway ist, dass Migrationsskripte nicht nur im SQL-Format, sondern auch in Form von Java-Code vorliegen k√∂nnen.  Mit der zweiten Option k√∂nnen Sie dynamische Migrationen mit komplexer Logik implementieren.  Sie sollten den Java-Ansatz jedoch mit Vorsicht verwenden, da solche Migrationsskripte normalerweise schwer zu debuggen sind, wenn bei ihnen ein Fehler aufgetreten ist. </p><br><p>  Zus√§tzlich zum Hauptbefehl zum <code>migrate</code> verf√ºgt Flyway √ºber zus√§tzliche Befehle, die den Prozess des Datenbank-Refactorings erleichtern. </p><br><p>  Der Befehl <code>info</code> zeigt alle verf√ºgbaren Migrationsskripte aus einem bestimmten Ordner an und notiert, welche davon bereits verwendet wurden und welche nur auf die Zieldatenbank angewendet werden. </p><br><p>  Um zu √ºberpr√ºfen, ob sich die auf die Datenbank angewendeten Skripte ge√§ndert haben, wird der Befehl <code>validate</code> verwendet.  F√ºr uns ist es hilfreich zu wissen, ob das bereits angewendete Skript aus dem Ordner ge√§ndert wurde, seit es auf die Datenbank angewendet wurde, da dies bedeuten kann, dass das Skript auf verschiedene Datenbanken in verschiedenen Versionen angewendet wurde, was zu Problemen f√ºhren kann. </p><br><p>  Wenn Sie der Meinung sind, dass die Skripte trotz des vom Befehl validate angezeigten Fehlers verwendet werden sollten, k√∂nnen Sie den Reparaturbefehl ausf√ºhren.  Die von Flyway verwendete Datenbanktabelle wird zur√ºckgesetzt, um aufzuzeichnen, welche Skripte bereits angewendet wurden (standardm√§√üig hei√üt diese Tabelle SCHEMA_VERSION). </p><br><p>  Und der letzte, aber nicht weniger wichtige Befehl <code>clean</code> l√∂scht das ausgew√§hlte Schema vollst√§ndig (wie Sie wissen, sollte dieser Befehl nur f√ºr Testdatenbanken verwendet werden). </p><br><h2 id="liquibase">  Liquibase </h2><br><p>  Liquibase verfolgt einen anderen Ansatz zur Implementierung des Datenbank-Refactorings.  Im Gegensatz zu Flyway, das Migrationsskripte nur in den Formaten SQL und Java unterst√ºtzt, k√∂nnen Sie mit Liquibase von SQL abstrahieren und so das Datenbank-Refactoring aus seiner spezifischen Implementierung entfernen. </p><br><p>  Anstelle von SQL-Skripten unterst√ºtzt Liquibase Migrationsskripten in den Formaten XML, YAML und JSON.  In diesen Skripten definieren Sie √Ñnderungen an der Datenbank auf Abstraktionsebene.  F√ºr jede √Ñnderung verf√ºgt Liquibase √ºber ein entsprechendes Element in XML, YAML und JSON.  Eine √Ñnderung, mit der eine neue Datenbanktabelle im YAML-Format erstellt wird, sieht beispielsweise folgenderma√üen aus: </p><br><pre> <code class="plaintext hljs">createTable: tableName: Customer columns: - column: name: name type: varchar(255) - column: name: address type: varchar(255)</code> </pre> <br><p>  √Ñnderungen wie <code>add column</code> , <code>create index</code> oder <code>alter table</code> und andere sehen √§hnlich aus. <br>  W√§hrend des Betriebs wendet Liquibase automatisch alle Skripte an, die noch nicht verwendet wurden, und speichert ihre Metadaten wie Flyway in einer speziellen Datenbanktabelle.  Wie Flyway kann Liquibase √ºber die Befehlszeile von Build-Tools oder direkt √ºber die Java-API aufgerufen werden. </p><br><h2 id="v-kakih-sluchayah-ih-ispolzovat">  Wann soll man sie benutzen? </h2><br><p>  Sowohl Flyway als auch Liquibase unterst√ºtzen alle Funktionen, die f√ºr das professionelle Refactoring und die Versionierung von Datenbanken erforderlich sind, sodass Sie immer wissen, mit welcher Version des Datenbankschemas Sie es zu tun haben und ob sie mit der Version Ihrer Software √ºbereinstimmt.  Beide Tools sind in Maven und Gradle sowie in das Spring Boot-√ñkosystem integriert, sodass das Datenbank-Refactoring vollst√§ndig automatisiert werden kann. </p><br><p>  Flyway verwendet SQL, um Datenbank√§nderungen zu identifizieren, sodass Sie SQL-Skripts so konfigurieren k√∂nnen, dass sie effektiv mit bestimmten Datenbanktypen in Ihrem Projekt arbeiten, z. B. Oracle oder PostgreSQL.  Andererseits f√ºhrt Liquibase eine zus√§tzliche Abstraktionsebene ein, die XML, YAML oder JSON verwendet, um Datenbank√§nderungen zu erkennen.  Daher eignet sich Liquibase besser f√ºr Software, die in verschiedenen Umgebungen mit verschiedenen Arten von Datenbankservern installiert werden muss.  Wenn Sie jedoch die vollst√§ndige Kontrolle √ºber Ihr SQL ben√∂tigen, ist Flyway Ihre Wahl, da Sie die Datenbank mit vollst√§ndig benutzerdefiniertem SQL oder sogar mit Java-Code √§ndern k√∂nnen. </p><br><p>  Der Haken bei beiden Tools ist, dass sie von einer Person <em>(vom √úbersetzer: laut Autor)</em> und nicht von einem gro√üen Team unterst√ºtzt werden.  Dies kann sich negativ auf die zuk√ºnftige Entwicklung beider Tools auswirken, ist jedoch nicht erforderlich.  Zum Zeitpunkt dieses Schreibens ist die Aktivit√§t im Flyway <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub-Repository</a> h√∂her als im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liquibase-Repository</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440696/">https://habr.com/ru/post/de440696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440678/index.html">DIY Hobby CNC Fr√§ser. Geisteswissenschaften f√ºr die Geisteswissenschaften. Teil 2</a></li>
<li><a href="../de440680/index.html">Wie man morgen igrofikuyuchi sieht</a></li>
<li><a href="../de440682/index.html">- Und Sie machen dort in der petrochemischen Industrie Gas, oder?</a></li>
<li><a href="../de440688/index.html">PR in der IT: Wie leben, wohin?</a></li>
<li><a href="../de440690/index.html">Funktionen zum Arbeiten mit Mesh in Unity</a></li>
<li><a href="../de440700/index.html">Data Science "Spezialeinheiten" im eigenen Haus</a></li>
<li><a href="../de440702/index.html">Achtung - GAS! oder wie wir intelligente Vertr√§ge ohne Kohlens√§ure abgeschlossen haben</a></li>
<li><a href="../de440706/index.html">InoThings ++ Professional IoT-Konferenz - Was war und was wird</a></li>
<li><a href="../de440708/index.html">Offenes Webinar "Arbeit: das eigene und das eines anderen"</a></li>
<li><a href="../de440710/index.html">Zwei Aspekte von WebView: √ºber den schnellen Start von Projekten und den Diebstahl personenbezogener Daten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>