<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📩 🗿 🏉 Servicio en línea "Análisis de velocidad en accidentes por video" 🚵🏻 🤰🏾 🎑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la versión de prueba, se lanzó un servicio en línea que muestra la velocidad actual de los objetos que nos interesan (automóviles y otros vehículos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Servicio en línea "Análisis de velocidad en accidentes por video"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460185/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cd/y3/ep/cdy3epcwmj1kjozbojililkdon0.jpeg"></div><br>  En la versión de prueba, se lanzó un servicio en línea que muestra la velocidad actual de los objetos que nos interesan (automóviles y otros vehículos) utilizando grabaciones de cámaras de video en las intersecciones. <br><a name="habracut"></a><br>  El problema de visualizar la distancia al conducir un automóvil y su velocidad actual es enfrentado tanto por los estudiantes en las escuelas de manejo como por los conductores con mucha experiencia. <br><br>  Pero hay una solución: el análisis de estos datos en cuadros de video previamente grabados y su procesamiento en varios servicios pagos y gratuitos, accesibles y cerrados. <br><br><img src="https://habrastorage.org/webt/b3/z2/0w/b3z20wxe8mcembonf9sw2px9xem.png"><br><br>  Uno de estos servicios recientemente aparecidos se discutirá más a fondo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Enlace al servicio en línea "Análisis de velocidad en accidentes por video".</b></a> <br><br>  La página principal del servicio (hasta ahora muy simple): <br><br><img src="https://habrastorage.org/webt/tw/qq/0b/twqq0bdt0xrihcn6ktmpdt7nys0.png"><br><br>  <b>El autor de la idea y la implementación es el programador ruso y <u>Khabrovchanin</u> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ilya Alexandrovich Volkov</a> .</b> <br><br>  <b>Esta publicación fue escrita en Habré con su permiso.</b> <br><br>  Por el momento, el servicio no funciona automáticamente, cada video primero debe estar preparado para el procesamiento manual por parte del operador del servicio (ahora es el autor de una persona o un nuevo usuario, instrucciones para trabajar con el servicio al final de la publicación). <br><br><img src="https://habrastorage.org/webt/rs/ak/pb/rsakpbaljurajefuvisofzuyk8i.png"><br><br><img src="https://habrastorage.org/webt/to/bj/wc/tobjwcfgqttpubwibnrjcftacec.png"><br><br>  <u>Etapas del procesamiento de cuadros de video:</u> <br><br>  - en la primera etapa, las distorsiones ópticas de la cámara se compensan, es decir, todas las líneas rectas del mundo real deben ser rectas y en el video procesado por el servicio (la corrección de la distorsión de la cámara ya funciona automáticamente en el servicio); <br><br>  - en la segunda etapa, se lleva a cabo la ubicación vinculante al plano de la carretera, para esto el operador debe marcar el rectángulo en el marco como en el mundo real e ingresar dos (o más) segmentos con longitudes previamente medidas (generalmente esto: el ancho de la carretera, el ancho de una franja separada entre las líneas de marcado, la distancia entre calzadas o señales, distancia entre ejes de automóviles); <br><br><img src="https://habrastorage.org/webt/df/bk/6d/dfbk6d_d0kny9bcrrteizlb6zjy.png"><br><br><img src="https://habrastorage.org/webt/nb/x4/ov/nbx4ov9cbsabg8gme2yxrepo8_i.png"><br><br><img src="https://habrastorage.org/webt/xs/rt/up/xsrtupaoqnlm8dcwpl0ymbi2nkg.png"><br><br><img src="https://habrastorage.org/webt/uy/de/7n/uyde7npko3rmxzggip5yg7dzglk.png"><br><br>  - en la tercera etapa, el operador del servicio en cada cuadro debe establecer el punto donde se encuentra el objeto de interés (marcar su trayectoria) y, como resultado, el servicio nos mostrará la velocidad actual del objeto y su cambio durante el movimiento. <br><br><img src="https://habrastorage.org/webt/ut/kp/wh/utkpwhc4ssd9i9k520ktzwvv_8e.png"><br><br><img src="https://habrastorage.org/webt/jy/oc/bv/jyocbvnl3p5hvv5r6zob3zuiaco.png"><br><br><img src="https://habrastorage.org/webt/4u/at/gu/4uatgutthy3k02humdk7xkrccik.png"><br><br><img src="https://habrastorage.org/webt/za/rh/jk/zarhjkpwodswoxtim4nnrc74tpq.png"><br><br>  El reproductor de servicio tiene la herramienta Regla, con la que puede medir la distancia en el video: <br><br><img src="https://habrastorage.org/webt/2q/rb/ie/2qrbiet7eqx1irqzzbdj286a-bi.png"><br><br>  La precisión del servicio depende en gran medida de la calidad y los parámetros del video. <br><br><img src="https://habrastorage.org/webt/l6/_d/rm/l6_drmwsc4kwedrhzzdj5-cpdza.png"><br><br>  Ahora el servicio solo funciona con cuadros de video obtenidos con cámaras estacionarias (estáticas), la base de datos de estos registros se complementa y desarrolla. <br><br>  En el proceso de finalizar la funcionalidad del servicio, el autor planea agregar un análisis de los registros obtenidos con la ayuda de grabadoras de video al mover y detener automóviles. <br><br>  El autor del servicio planea analizar una gran cantidad de videos de accidentes que involucran a peatones y analizar las estadísticas de datos sobre las velocidades de los vehículos en el momento de la colisión. <br><br><img src="https://habrastorage.org/webt/7r/jj/4y/7rjj4ygwewm84l9xpqy3n_zbjza.png"><br><br><img src="https://habrastorage.org/webt/uf/rv/ze/ufrvzezefnk4nc4cdwcorayd9ju.png"><br><br>  <b>Esto es lo que el autor planea hacer para desarrollar este servicio:</b> <br><br><ul><li>  agregar seguimiento automático de puntos; </li><li>  agregar etiquetas geográficas; </li><li>  introducir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un filtro de Kalman</a> para suavizar los errores de observación; </li><li>  usar visión por computadora; </li><li>  agregar funcionalidad para calcular la velocidad de varios objetos; </li><li>  Está previsto introducir el aprendizaje automático para el servicio a fin de minimizar el trabajo del operador en la preparación de la grabación de video. </li></ul><br><img src="https://habrastorage.org/webt/qi/kh/mu/qikhmup6wwntngxudette8rkziq.png"><br><br>  Realmente espero que esta publicación interese a Khabrovites y ayude al autor del servicio en su desarrollo y trabajo actual. <br><br>  Logré contactar al autor de este servicio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ilya Volkov</a> , hablar con él sobre la funcionalidad del servicio y obtener respuestas a varias preguntas sobre este proyecto específicamente para Habr. <br><br>  <b>Entrevista con el autor del servicio "Análisis de velocidad en accidentes por grabación de video":</b> <br><br>  <i><b>Pregunta:</b> ¿La idea de implementar tal servicio surgió hace mucho tiempo?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> Hace unos cuatro meses vi un video de un accidente y se volvió interesante a qué velocidad (al menos aproximadamente) se movía uno de los participantes.  Se volvió interesante no solo para mí: en los comentarios al video hubo mucha controversia y se llamó a una variedad de clasificaciones.  Fue entonces cuando pensé que tal herramienta sería útil. </blockquote><br>  <i><b>Pregunta:</b> ¿Cuánto tiempo ha pasado desde la idea de que "usted puede hacer esto" hasta el primer lanzamiento funcional del servicio?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> Bueno, durante cuatro meses, se ha tratado.  Pero no me apresuraría a llamar a la versión actual de la que funciona, todavía está húmeda :) </blockquote><br>  <i><b>Pregunta:</b> ¿Qué idiomas y plataformas usa en el servicio y cuáles planea usar más?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> El proyecto está alojado en Firebase, esto es una gran cosa para un inicio rápido de casi cualquier proyecto.  Autorización, alojamiento, base de datos, almacenamiento de archivos: todo está listo para usar.  API conveniente, completamente gratis al principio. <br><br>  Frontend - Vue.js, también una herramienta simple para aprender desde cero.  Al dibujar en el lienzo con Konva.js, los sombreadores son responsables de la distorsión de la óptica. <br><br>  Casi todo el código (excepto los sombreadores) está escrito en JavaScript.  No hay reclamos especiales para la pila, continuaré trabajando con ella. </blockquote><br>  <i><b>Pregunta: ¿</b> Cuándo será posible que los usuarios comunes suban su video y trabajen con el servicio?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> en principio, esto se puede hacer ahora, escribí instrucciones sobre cómo hacerlo. </blockquote><br>  <i><b>Pregunta:</b> ¿Eres tú quien está haciendo el proyecto o hay un equipo de programadores?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> El equipo aún es pequeño. Soy mi amigo, que tiene competencias en desarrollo front-end. </blockquote><br>  <i><b>Pregunta:</b> ¿Planea continuar el desarrollo del servicio y espera ayuda de colegas / miembros del foro para este proyecto?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> El desarrollo del servicio definitivamente está planeado, porque el prototipo parece muy interesante.  Las ideas de desarrollo están llenas, el deseo también está presente. <br>  La ayuda siempre es bienvenida, especialmente los consejos. </blockquote><br>  <i><b>Pregunta:</b> ¿Será un servicio gratuito o hay algún plan de monetización?</i> <br><blockquote>  <b>La respuesta de Ilya: las</b> perspectivas de monetización siguen siendo bastante vagas.  Quizás se aclaren en el futuro. </blockquote><br>  <i><b>Pregunta:</b> ¿Han aparecido organizaciones o comunidades interesadas en el servicio?</i>  <i>Por ejemplo, ¿clubes de motos o escuelas de manejo?</i> <br><blockquote>  <b>La respuesta de Ilya: las</b> comunidades no me escribieron, pero algunos expertos automotrices estaban interesados ​​en el proyecto. </blockquote><br>  <i><b>Pregunta:</b> ¿Cuál es la precisión de determinar la velocidad usando el servicio ahora?</i>  <i>¿En qué diferirán estos datos si se ingresan los parámetros necesarios para medir la ruleta desde una carretera real o usar servicios geográficos en los que el ancho de la calzada se mide con una regla incorporada?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> en un video de muy buena calidad y sin distorsión de la óptica, la precisión no es mala, las pruebas en un conjunto de datos abierto muestran un error de hasta el 3%.  La precisión disminuye con el deterioro de la calidad del video y una velocidad de cuadro inestable. <br><br>  En cuanto a las mediciones con ruleta y con la ayuda de geoservicios, la ruleta, por supuesto, es más confiable.  No se puede confiar ciegamente en los datos de un geoservicio, pero se puede y se debe verificar dos veces. <br><br>  En general, tengo un gran deseo de negarme a ajustar el terreno a puntos de referencia y apegarme en base a las distancias entre ejes de los automóviles y otras distancias conocidas con precisión. </blockquote><br>  <i><b>Pregunta:</b> ¿Será posible seleccionar unidades de medida (km \ h, m \ s, millas \ hora) y guardar datos de telemetría de alta velocidad en un archivo de registro separado?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> Sí, ya que no es tan difícil de hacer.  Pero cuándo se realizará, no puedo decirlo. </blockquote><br>  <i><b>Pregunta: ¿Los</b> videos en invierno serán más difíciles de procesar en su servicio debido a la capa de nieve en la carretera?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> Sí, la nieve se suma a las dificultades: algunos puntos de referencia no son visibles, a veces incluso cambia la geometría de la carretera.  Pero, en principio, la velocidad también se calcula en videos nevados. </blockquote><br>  <i><b>Pregunta:</b> ¿Está previsto utilizar redes neuronales en el servicio?</i> <br><blockquote>  <b>La respuesta de Ilya:</b> definitivamente no es una perspectiva para el futuro cercano, pero el tema es definitivamente muy interesante.  Sería genial entrenar la red neuronal para seleccionar los factores de distorsión de la cámara.  Muchas ideas para usar redes neuronales listas para usar.  Pero por ahora, hay mucho que hacer sin ellos :) </blockquote><br>  <i><b>Pregunta:</b> Ahora el servicio está alojado en Firebase, ¿estás buscando una alternativa?</i> <br><blockquote>  <b>La respuesta de Ilya: lo</b> único que realmente no le gusta de Firebase es el precio.  Por ejemplo, el precio de 1 GB de tráfico del almacenamiento de archivos es de aproximadamente 7 rublos, mientras que Yandex.Cloud solo tiene un rublo.  Si bien este no es un problema muy grande, en el futuro buscaré formas de optimizarlo.  Ahora estoy diseñando la arquitectura de tal manera que no me apegue mucho al proveedor de servicios. </blockquote><br><br>  <u>¡Muchas gracias a Ilya por sus respuestas interesantes y detalladas!</u> <br><br>  Si es posible, el autor agrega nuevos videos al servicio: <br><br><img src="https://habrastorage.org/webt/oe/w4/lv/oew4lvxzzdc7gsdfhqxq9hfawbu.png"><br><br><img src="https://habrastorage.org/webt/_k/ej/ea/_kejeaixqmznjnok48na-a42y_u.png"><br><br><img src="https://habrastorage.org/webt/q0/5u/rl/q05urldstpbfdrdgabqylet5axk.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las instrucciones para trabajar con el servicio están aquí</a> . <br><br>  1. Para crear su proyecto necesita iniciar sesión.  Si bien la autorización está disponible a través de las cuentas de Google y Facebook.  Después de la autorización, el botón "Crear proyecto" estará disponible para usted. <br><br><img src="https://habrastorage.org/webt/ee/fo/hb/eefohborji2katvo1yr3ebz9ajk.jpeg"><br><br>  2. Haga clic en el botón "Crear proyecto", aparecerá la página para crear un nuevo proyecto, en la que se propone descargar el archivo de video.  Mientras que el tamaño máximo del archivo de video es de 3 megabytes.  Puede recortar el video usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este servicio de video</a> . <br><br><img src="https://habrastorage.org/webt/e6/bo/zu/e6bozuunrocmj0ei5vrqomcgnni.jpeg"><br><br>  3. Descargue el archivo, después de una descarga exitosa, la página del proyecto se abrirá automáticamente. <br><br><img src="https://habrastorage.org/webt/en/ts/q1/entsq1mygqxlfw0wajward-tjss.jpeg"><br><br>  4. Primero, eliminamos las distorsiones de la óptica de la cámara: usando los controles deslizantes k3, k4, Escala, ajustamos las distorsiones para que todas las líneas rectas del mundo real sean rectas y estén en la imagen. <br><br><img src="https://habrastorage.org/webt/ff/fz/7e/fffz7etxpszvok9ffzn74yuhi_g.jpeg"><br><br>  5. Mueva el cuadrilátero para que coincida con el rectángulo del mundo real e indique 2 distancias (los segmentos no deben ser paralelos). <br><br><img src="https://habrastorage.org/webt/iy/uy/km/iyuykmbg_hekpav5_767i0omjbs.jpeg"><br><br>  6. Puede usar Yandex.Maps para buscar distancias. <br><br><img src="https://habrastorage.org/webt/n9/au/rr/n9aurr2jqr1qq61r1yrvjlfhykc.jpeg"><br><br>  7. Dado que las distancias en Yandex.Maps pueden no ser completamente precisas, debemos asegurarnos de que la unión obtenida sea adecuada utilizando una regla.  Por lo general, conocemos las distancias entre ejes de los automóviles.  Por ejemplo, la base de VAZ-2114 es 2,46 metros, obtenemos 2,45. <br><br><img src="https://habrastorage.org/webt/1o/ee/ar/1oeearwoyktukryafhu14cj5nhe.jpeg"><br><br>  8. La longitud del tranvía era de unos 16 metros, que también está cerca de la longitud real. <br><br><img src="https://habrastorage.org/webt/oq/qx/hr/oqqxhr9wpxej0xotr90ijpz1zyk.jpeg"><br><br>  9. Ahora estamos listos para hacer directamente el cálculo de la velocidad del automóvil.  Entramos en el modo de edición de los puntos del objeto y marcamos el punto del objeto en cada cuadro.  Marcar puntos manualmente en cada cuadro puede ser agotador, por lo tanto, existe una herramienta de interpolación: marque un punto en un cuadro, luego marque un punto después de 5-15 cuadros, seleccione el intervalo entre cuadros en la línea de tiempo y presione el botón I: ahora el punto entre cuadros se mueve uniformemente rectilíneamente . <br><br><img src="https://habrastorage.org/webt/pg/pf/kr/pgpfkri7rcpcox6gifap8kuzi8q.jpeg"><br><br>  10. Por lo tanto, calculamos la velocidad del objeto. <br><br><img src="https://habrastorage.org/webt/vn/jc/cw/vnjccwwmbc0uuankjpuqj4amhty.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/460185/">https://habr.com/ru/post/460185/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460173/index.html">Desarrollo para Docker. Entorno local Parte 2 - Nginx + PHP + MySql + phpMyAdmin</a></li>
<li><a href="../460175/index.html">Semiótica en marketing: ¿qué significa esto para su marca?</a></li>
<li><a href="../460177/index.html">Sensor de fuga de agua inalámbrico en nRF52832, proyecto de bricolaje</a></li>
<li><a href="../460179/index.html">LEAN + AGILE = AGILEAN o recogemos el todo en partes</a></li>
<li><a href="../460181/index.html">Mejore su conocimiento de JavaScript al analizar el código fuente</a></li>
<li><a href="../460187/index.html">Imagine sus datos antes de recopilarlos.</a></li>
<li><a href="../460189/index.html">14 mejores herramientas de tablero Kanban en 2019</a></li>
<li><a href="../460191/index.html">Pare la línea o bombee su tubería, yo</a></li>
<li><a href="../460193/index.html">Supervisión del vencimiento del certificado en Windows en NetXMS</a></li>
<li><a href="../460195/index.html">Pequeño, sí, eliminado: un acelerador lineal de partículas en miniatura, estableciendo un nuevo récord</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>