<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ñ üåû üíî Docker + Laravel + RoadRunner = ‚ù§ ‚úÇÔ∏è üíã üë©‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ce message est √©crit √† la demande de travailleurs qui demandent p√©riodiquement ¬´Comment ex√©cuter l'application Illuminate / Symfony / MyOwn Psr7 dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker + Laravel + RoadRunner = ‚ù§</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461687/"><p><img src="https://habrastorage.org/webt/zm/nm/pr/zmnmprsvbuxifiuo2dcdb6z1vle.png" alt="image"></p><br><p>  Ce message est √©crit √† la demande de travailleurs qui demandent p√©riodiquement ¬´Comment ex√©cuter l'application Illuminate / Symfony / MyOwn <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Psr7</a> dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Docker</a> ¬ª.  Je n'ai pas envie de donner un lien vers un article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©c√©demment √©crit</a> , car mes opinions sur la fa√ßon de r√©soudre le probl√®me ont beaucoup chang√©. </p><br><p>  Tout ce qui sera √©crit ci-dessous est une exp√©rience subjective qui <em>(comme toujours)</em> ne pr√©tend pas √™tre consid√©r√©e comme la seule bonne d√©cision, mais certaines approches et solutions peuvent vous sembler int√©ressantes et utiles. </p><br><blockquote> J'utiliserai √©galement Laravel comme application, car elle m'est plus famili√®re et assez r√©pandue.  L'adaptation √† d'autres cadres / composants bas√©s sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">PSR-7</a> est possible, mais cette histoire n'est pas √† ce sujet. </blockquote><a name="habracut"></a><br><h2 id="rabota-nad-oshibkami">  Gestion des erreurs </h2><br><p>  Je voudrais commencer par ce qui s'est av√©r√© √™tre "pas les meilleures pratiques" dans le contexte de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent</a> : </p><br><ul><li>  La n√©cessit√© de changer la structure des fichiers dans le r√©f√©rentiel </li><li>  Utilisation de FPM.  Si nous voulons des performances de nos applications, alors peut-√™tre qu'une des meilleures solutions m√™me au stade de la s√©lection de la technologie sera de l'abandonner au profit de quelque chose de plus rapide et ¬´adapt√©¬ª au fait que la m√©moire peut fuir.  RoadRunner <sup><em>de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">lachezis est</a></em></sup> l√† comme jamais auparavant </li><li>  Une image s√©par√©e avec la source et les actifs.  Malgr√© le fait qu'en utilisant cette approche, nous pouvons r√©utiliser la m√™me image pour cr√©er un routage plus complexe des demandes entrantes (nginx √† l'avant pour retourner la statique; les demandes de dynamique sont servies par un autre conteneur dans lequel le volume est jet√© avec les m√™mes sources - pour meilleure mise √† l'√©chelle) - ce sch√©ma s'est r√©v√©l√© assez compliqu√© dans le fonctionnement du produit.  Et en plus, RR lui-m√™me rend parfaitement la statique, et s'il y a beaucoup de statique <em>(ou la ressource peut charger et afficher le contenu g√©n√©r√© par l'utilisateur)</em> - nous le transf√©rons vers CDN (le bundle S3 + CloudFront + CloudFlare fonctionne bien) et oublions ce probl√®me en principe </li><li>  CI complexe.  Cela est devenu un v√©ritable probl√®me lorsque la p√©riode de "construction de viande" active a commenc√© aux √©tapes de l'assemblage et des tests automatiques.  Un mec qui ne supportait pas ce CI auparavant, il devient tr√®s difficile d'y apporter des modifications sans craindre de casser quoi que ce soit. </li></ul><br><p> Maintenant, sachant quels probl√®mes doivent √™tre r√©solus et sachant comment proc√©der, je propose de proc√©der √† leur √©limination.  L'ensemble des "outils de d√©veloppement" n'a pas chang√© - c'est le m√™me <code>docker-ce</code> , <code>docker-compose</code> et le puissant <code>Makefile</code> . </p><br><p>  En <strong>cons√©quence,</strong> nous obtenons: </p><br><ul><li>  Un conteneur autonome avec une application sans avoir besoin de monter un volume suppl√©mentaire </li><li>  Un exemple d'utilisation de git-hooks - nous mettrons automatiquement les d√©pendances n√©cessaires apr√®s <code>git pull</code> et interdirons de pousser le code si les tests √©chouent (les hooks seront stock√©s sous git, naturellement) </li><li>  RoadRunner traitera les demandes HTTP (s) </li><li>  Les d√©veloppeurs pourront toujours ex√©cuter <code>dd(..)</code> et <code>dump(..)</code> pour le d√©bogage, tandis que rien ne plantera dans leur navigateur </li><li>  Les tests peuvent √™tre ex√©cut√©s directement √† partir de l'IDE PHPStorm, tandis qu'ils seront ex√©cut√©s dans le conteneur avec l'application </li><li>  CI collectera des images pour nous lors de la publication d'une nouvelle balise de version d'application </li><li>  Prenons la r√®gle stricte de maintien des fichiers <code>CHANGELOG.md</code> et <code>ENVIRONMENT.md</code> </li></ul><br><h2 id="naglyadnoe-vnedrenie-novogo-podhoda">  Introduction visuelle d'une nouvelle approche </h2><br><p>  Pour une d√©monstration visuelle, je d√©compose l'ensemble du processus en plusieurs √©tapes dont les changements se feront en MR s√©par√©s (apr√®s la fusion, tous les brunchs resteront √† leur place; r√©f√©rences au MR dans les en-t√™tes des ¬´√©tapes¬ª).  Le point de d√©part est le squelette Laravel d'une application cr√©√©e √† l'aide du <code>composer create-project laravel/laravel</code> : </p><br><pre> <code class="bash hljs">$ docker run \ --rm -i \ -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">:/src"</span></span> \ -u <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(id -u)</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(id -g)</span></span></span><span class="hljs-string">"</span></span> \ composer composer create-project --prefer-dist laravel/laravel \ /src/laravel-in-docker-with-rr <span class="hljs-string"><span class="hljs-string">"5.8.*"</span></span></code> </pre> <br><h1 id="shag-1---dokerizaciya--rrhttpsgitlabcomtarampampamlaravel-in-docker-with-rrmerge_requests1diffs">  √âtape 1 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Docking + RR</a> </h1><br><p>  La premi√®re √©tape consiste √† apprendre √† ex√©cuter l'application dans le conteneur.  Pour ce faire, nous avons besoin d'un <code>Dockerfile</code> , <code>docker-compose.yml</code> pour la description de ¬´comment soulever et lier des conteneurs¬ª, et d'un <code>Makefile</code> afin de r√©duire le processus d√©j√† simplifi√© √† une ou deux commandes. </p><br><h3 id="dockerfile">  Dockerfile </h3><br><p>  L'image de base que j'utilise <code>php:XXX-alpine</code> est la plus simple et contient ce dont vous avez besoin pour ex√©cuter.  De plus, toutes les mises √† jour ult√©rieures de l'interpr√©teur sont r√©duites √† une simple modification de la valeur de cette ligne (la mise √† jour de PHP est maintenant plus facile que jamais). </p><br><p>  Composer et le fichier binaire RoadRunner sont livr√©s au conteneur en utilisant plusieurs √©tapes et <code>COPY --from=...</code> - c'est tr√®s pratique, et toutes les valeurs associ√©es aux versions ne sont pas "dispers√©es", mais se trouvent au d√©but du fichier.  Cela fonctionne rapidement et sans d√©pendances sur <code>curl</code> / <code>git clone</code> / <code>make build</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Les images 512k / roadrunner sont</a> prises en charge par moi, si vous le souhaitez - vous pouvez assembler le fichier binaire vous-m√™me. </p><br><blockquote>  Une histoire int√©ressante s'est produite avec la variable d'environnement <code>PS1</code> (responsable de l'invite dans le shell) - il s'av√®re que vous pouvez utiliser des emoji dedans, et tout fonctionne localement, mais si vous essayez de d√©marrer l'image avec une variable contenant des emoji dans, disons, rancher, elle plantera (dans tout essaim) fonctionne sans probl√®me). </blockquote><p>  Dans <code>Dockerfile</code> je commence √† g√©n√©rer un certificat SSL auto-sign√© afin de l'utiliser pour les demandes HTTPS entrantes.  Naturellement - rien n'emp√™che l'utilisation d'un certificat "normal". </p><br><p>  Je voudrais √©galement dire: </p><br><pre> <code class="plaintext hljs">COPY ./composer.* /app/ RUN set -xe \ &amp;&amp; composer install --no-interaction --no-ansi --no-suggest --prefer-dist \ --no-autoloader --no-scripts \ &amp;&amp; composer install --no-dev --no-interaction --no-ansi --no-suggest \ --prefer-dist --no-autoloader --no-scripts</code> </pre> <br><p>  Ici, la signification est la suivante - les fichiers <code>composer.lock</code> et <code>composer.json</code> sont livr√©s dans une <strong>couche distincte</strong> √† l'image, apr√®s quoi toutes les d√©pendances qui y sont d√©crites sont install√©es.  Cela est fait de sorte que lors des <code>--cache-from</code> suivantes de l'image √† l'aide de <code>--cache-from</code> , si la composition et les versions des d√©pendances install√©es n'ont pas chang√©, l' <code>composer install</code> <strong>ne</strong> <code>composer install</code> <strong>pas</strong> ex√©cut√©e, en prenant cette couche du cache, √©conomisant ainsi du temps de construction et du trafic (merci pour l'id√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">jetexe</a> ). </p><br><p>  <code>composer install</code> est ex√©cut√©e deux fois (la deuxi√®me fois avec <code>--no-dev</code> ) pour ¬´r√©chauffer¬ª le cache des d√©pendances de dev, de sorte que lorsque nous mettons toutes les d√©pendances sur le CI pour ex√©cuter les tests, elles sont plac√©es √† partir du cache de compositeur, qui est d√©j√† dans l'image, non √©tir√© de galaxies lointaines. </p><br><p>  Avec la derni√®re instruction <code>RUN</code> , nous affichons les versions du logiciel install√© et la composition des modules PHP √† la fois pour l'historique dans les journaux de build et pour nous assurer qu '"il existe au moins et d√©marre en quelque sorte". </p><br><p>  J'utilise √©galement mon Entrypoint, car avant de d√©marrer l'application quelque part dans le cluster, je veux vraiment v√©rifier la disponibilit√© des services d√©pendants - DB, redis, rabbit et autres. </p><br><h3 id="roadrunner">  Roadrunner </h3><br><p>  Pour int√©grer RoadRunner avec une application Laravel, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">package a</a> √©t√© √©crit qui r√©duit toute l'int√©gration √† quelques commandes dans le shell (en ex√©cutant <code>docker-compose run app sh</code> ): </p><br><pre> <code class="bash hljs">$ composer require avto-dev/roadrunner-laravel <span class="hljs-string"><span class="hljs-string">"^2.0"</span></span> $ ./artisan vendor:publish --provider=<span class="hljs-string"><span class="hljs-string">'AvtoDev\RoadRunnerLaravel\ServiceProvider'</span></span> --tag=rr-config</code> </pre> <br><p>  Ajoutez <code>APP_FORCE_HTTPS=true</code> au fichier <code>./docker/docker-compose.env</code> et sp√©cifiez le chemin d'acc√®s au certificat SSL dans le conteneur dans les <code>.rr*.yaml</code> . </p><br><blockquote>  Afin de pouvoir utiliser <code>dump(..)</code> et <code>dd(..)</code> et tout fonctionnerait, il existe un autre package - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>avto-dev/stacked-dumper-laravel</code></a> .  Il suffit d'ajouter un pefix √† ces assistants, √† savoir <code>\dev\dd(..)</code> et <code>\dev\dump(..)</code> respectivement.  Sans cela, vous constaterez une erreur de forme: <br><pre> <code class="plaintext hljs">worker error: invalid data found in the buffer (possible echo)</code> </pre> <br></blockquote><p>  Apr√®s toutes les manipulations, faites <code>docker-compose up -d</code> et le tour est jou√©: </p><br><p><img src="https://habrastorage.org/webt/5i/5h/ie/5i5hiea5tk9eysqzboe0pen_mp4.png" alt="capture d'√©cran"></p><br><p>  La base de donn√©es PostgeSQL, redis et les employ√©s de RoadRunner ont r√©ussi √† s'ex√©cuter dans des conteneurs. </p><br><h1 id="shag-2---makefile-i-testyhttpsgitlabcomtarampampamlaravel-in-docker-with-rrmerge_requests2diffs">  √âtape 2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Makefile et tests</a> </h1><br><p>  Comme je l'ai √©crit plus t√¥t, un Makefile est un √©l√©ment tr√®s sous-estim√©.  Objectifs d√©pendants, votre propre sucre syntaxique, 99% de chances qu'il se trouve d√©j√† sur la machine de d√©veloppement Linux / mac, saisie semi-automatique "pr√™te √† l'emploi" - une petite liste de ses avantages. </p><br><p>  En l'ajoutant √† notre projet et en faisant <code>make</code> without parameters, nous pouvons observer: </p><br><p><img src="https://habrastorage.org/webt/ob/zz/q_/obzzq_e86v5nkadq11mmncax3ci.png" alt="capture d'√©cran"></p><br><p>  Pour ex√©cuter des tests unitaires, nous pouvons soit faire un <code>make test</code> , soit obtenir un shell √† l'int√©rieur du conteneur avec l'application ( <code>make shell</code> ), ex√©cuter le <code>composer phpunit</code> .  Pour obtenir le rapport de couverture, faites simplement make <code>make test-cover</code> , et avant d'ex√©cuter les tests, xdebug avec ses d√©pendances sera livr√© dans le conteneur et les tests seront lanc√©s (car cette proc√©dure n'est pas souvent effectu√©e et pas par CI - cette solution semble √™tre meilleure que de garder une image s√©par√©e avec tous dev-lotions). </p><br><h3 id="git-hooks">  Crochets Git </h3><br><p>  Les crochets dans notre cas rempliront 2 r√¥les importants - ne permettant pas de pousser du code dans l'origine dont les tests n'ont pas r√©ussi;  et mettez automatiquement toutes les d√©pendances n√©cessaires si, en tirant les modifications sur votre machine, il s'av√®re que <code>composer.lock</code> a chang√©.  Dans le <code>Makefile</code> , il existe une cible distincte pour cela: </p><br><pre> <code class="plaintext hljs">cwd = $(shell pwd) git-hooks: ## Install (reinstall) git hooks (required after repository cloning) -rm -f "$(cwd)/.git/hooks/pre-push" "$(cwd)/.git/hooks/pre-commit" "$(cwd)/.git/hooks/post-merge" ln -s "$(cwd)/.gitlab/git-hooks/pre-push.sh" "$(cwd)/.git/hooks/pre-push" ln -s "$(cwd)/.gitlab/git-hooks/pre-commit.sh" "$(cwd)/.git/hooks/pre-commit" ln -s "$(cwd)/.gitlab/git-hooks/post-merge.sh" "$(cwd)/.git/hooks/post-merge"</code> </pre> <br><p>  Faire <code>make git-hooks</code> supprime simplement les hooks existants et les place dans le <code>.gitlab/git-hooks</code> √† leur place.  Leur source peut √™tre consult√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">sur ce lien</a> . </p><br><h3 id="zapusk-testov-iz-phpstorm">  Ex√©cution de tests √† partir de PhpStorm </h3><br><p>  Malgr√© le fait qu'il soit assez simple et pratique - je l'ai utilis√© pendant longtemps <code>./vendor/bin/phpunit --group=foo</code> au lieu d'appuyer simplement sur le raccourci clavier directement lors de l'√©criture d'un test ou d'un code qui lui est associ√©. </p><br><p>  Cliquez sur <code>File &gt; Settings &gt; Languages &amp; Frameworks &gt; PHP &gt; CLI interpreter &gt; [...] &gt; [+] &gt; From Docker, Vargant, VM, Remote</code> .  S√©lectionnez <strong>Docker compose</strong> et le nom du service d' <strong>application</strong> . </p><br><p><img src="https://habrastorage.org/webt/jk/ux/fy/jkuxfyw_7scvkz8oppse4t6i2ii.png" alt="capture d'√©cran"></p><br><p>  La deuxi√®me √©tape consiste √† dire √† phpunit d'utiliser l'interpr√©teur √† partir du conteneur: <code>File &gt; Settings &gt; Test frameworks &gt; [+] &gt; PHPUnit by remote interpreter</code> et s√©lectionnez l'interpr√©teur distant cr√©√© pr√©c√©demment.  Dans le <code>/app/vendor/autoload.php</code> <code>Path to script</code> , sp√©cifiez <code>/app/vendor/autoload.php</code> , et dans <code>Path mappings</code> <code>/app/vendor/autoload.php</code> le r√©pertoire racine du projet tel qu'il est mont√© dans <code>/app</code> . </p><br><p><img src="https://habrastorage.org/webt/8z/wq/ad/8zwqadvi8elq3hwaetcojgce2hk.png" alt="capture d'√©cran"></p><br><p>  Et maintenant, nous pouvons ex√©cuter des tests directement √† partir de l'IDE en utilisant l'interpr√©teur √† l'int√©rieur de l'image avec l'application, en appuyant (par d√©faut, Linux) Ctrl + Maj + F10. </p><br><h1 id="shag-3---avtomatizaciyahttpsgitlabcomtarampampamlaravel-in-docker-with-rrmerge_requests3diffs">  √âtape 3 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Automatisation</a> </h1><br><p>  Il ne nous reste plus qu'√† automatiser le processus d'ex√©cution des tests et d'assemblage de l'image.  Pour ce faire, cr√©ez le <code>.gitlab-ci.yml</code> dans le r√©pertoire racine de l'application, en le remplissant avec le <a href="" rel="nofollow">contenu suivant</a> .  L'id√©e principale de cette configuration est d'√™tre aussi simple que possible, mais de ne pas perdre de fonctionnalit√© en le faisant. </p><br><p>  L'image est assembl√©e √† chaque brunch, √† chaque commit.  En utilisant <code>--cache-from</code> assemblage d'une image lors d'une nouvelle validation est tr√®s rapide.  La n√©cessit√© de la reconstruction est due au fait que sur chaque brunch, nous avons une image avec les modifications qui ont √©t√© apport√©es dans le cadre de ce brunch, et en cons√©quence, rien ne nous emp√™che de le d√©ployer en essaim / k8s / etc afin de nous assurer que "live" que tout fonctionne et fonctionne comme il se doit avant m√™me la fusion avec la lumi√®re principale. </p><br><p>  Apr√®s l'assemblage, nous ex√©cutons des tests unitaires et v√©rifions le lancement de l'application dans le conteneur, en envoyant des demandes curl-e au point de terminaison de v√©rification de l'√©tat (cette action est facultative, mais plusieurs fois ce test m'a beaucoup aid√©). </p><br><p>  Pour la "version de la version" - il suffit de publier une <strong>balise de la</strong> forme <code>vX.XX</code> (si vous vous en tenez toujours au versioning s√©mantique - ce sera tr√®s cool) - CI collectera l'image, ex√©cutera les tests et effectuera les actions que vous sp√©cifiez dans le <code>deploy to somewhere</code> . </p><br><blockquote>  N'oubliez pas dans les param√®tres du projet (si possible) de limiter la possibilit√© de publier des tags uniquement aux personnes autoris√©es √† "publier des versions". </blockquote><br><h3 id="changelogmd-i-environmentmd">  <code>CHANGELOG.md</code> et <code>ENVIRONMENT.md</code> </h3><br><p>  Avant d'accepter l'un ou l'autre MR, l'inspecteur doit, sans faute, v√©rifier la <code>CHANGELOG.md</code> fichiers <code>CHANGELOG.md</code> et <code>ENVIRONMENT.md</code> .  Si la premi√®re est de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">plus en plus claire</a> , alors la seconde relative, je donnerai une explication.  <a href="" rel="nofollow">Ce fichier</a> est utilis√© pour d√©crire toutes les variables d'environnement auxquelles le conteneur avec l'application r√©pond.  C'est-√†-dire  si le d√©veloppeur ajoute ou supprime la prise en charge de l'une ou l'autre variable d'environnement, cela doit se refl√©ter dans ce fichier.  Et au moment o√π la question ¬´Nous devons red√©finir de toute urgence ceci et cela¬ª se pose - personne ne commence fr√©n√©tiquement √† fouiller dans la documentation ou les codes sources - mais regarde dans un seul fichier.  Tr√®s confortable. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Dans cet article, nous avons examin√© le processus plut√¥t indolore de transfert du d√©veloppement et du lancement d'applications vers l'environnement Docker, RoadRunner int√©gr√© et l'utilisation d'un simple script CI automatis√© l'assemblage et le test de l'image avec notre application. </p><br><p>  Apr√®s avoir clon√© le r√©f√©rentiel, les d√©veloppeurs doivent faire <code>make git-hooks &amp;&amp; make install &amp;&amp; make up</code> et commencer √† √©crire du code utile.  Camarades * ops-am - prenez l'image avec la balise souhait√©e et faites-la rouler sur leurs clusters. </p><br><p>  Naturellement - ce sch√©ma est √©galement simplifi√©, et sur les projets de "combat", je termine beaucoup plus, mais si l'approche d√©crite dans l'article aide quelqu'un, je sais que j'ai perdu mon temps. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461687/">https://habr.com/ru/post/fr461687/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461669/index.html">PHP Digest n ¬∞ 161 (15-29 juillet 2019)</a></li>
<li><a href="../fr461673/index.html">8 conseils pour les programmeurs d√©butants ou une r√©trospective de ma carri√®re</a></li>
<li><a href="../fr461677/index.html">Biblioth√®ques presque parfaites d'Electronic Arts</a></li>
<li><a href="../fr461679/index.html">Biblioth√®ques des arts √©lectroniques de presque bonne qualit√©</a></li>
<li><a href="../fr461685/index.html">Th√©rapie LED, ou ¬´jeunes pommes¬ª du 21e si√®cle</a></li>
<li><a href="../fr461689/index.html">D√©veloppeur IoT Identification</a></li>
<li><a href="../fr461691/index.html">Comment nous fermons les vuln√©rabilit√©s dans Astra Linux Special Edition OS</a></li>
<li><a href="../fr461693/index.html">Compilation crois√©e d'OpenCV 4 pour Raspberry Pi et BeagleBone Black</a></li>
<li><a href="../fr461695/index.html">Stage VFX</a></li>
<li><a href="../fr461697/index.html">Intelligence de la bi√®re</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>