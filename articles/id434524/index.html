<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏻 🈵 👩🏿‍🎤 Kubernetes Ingress melalui mata seorang pemula 💞 ⁉️ 👨‍👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apa itu ingress? 


 Ingress adalah jenis sumber daya dasar di Coubertene. Jika Anda hanya mendeklarasikan objek tipe Ingress di kubernetis maka tidak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kubernetes Ingress melalui mata seorang pemula</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434524/"><h1>  Apa itu ingress? </h1><br><p>  Ingress adalah jenis sumber daya dasar di Coubertene.  Jika Anda hanya mendeklarasikan objek tipe Ingress di kubernetis maka tidak ada yang terjadi. </p><br><p>  Agar sumber ini mulai bekerja di kluster Kubernetis, Pengontrol Ingress harus diinstal, yang akan mengonfigurasi proxy terbalik sesuai dengan objek Ingress. </p><br><p>  Ingress Controller terdiri dari 2 komponen - proxy terbalik dan controller yang berkomunikasi dengan server API Kubernetes.  Proxy terbalik mendengarkan lalu lintas masuk pada port yang ditentukan dalam pengaturan (biasanya hanya port 80 yang ditentukan dalam pengaturan default).  Pengontrol dapat berupa daemon terpisah (seperti pada nginx) atau bawaan pada proxy (seperti pada traefik). </p><br><p>  Tidak semua penyedia cloud kubernetes menginstal ulang Ingress Controller secara default. </p><br><p>  Pengontrol dapat berjalan baik sebagai DaemonSet atau sebagai Deployment.  Ini sangat ideal untuk menggunakan DaemonSet sebagai satu-satunya Pengendali Ingress, sehingga proksi terbalik mendengarkan semua alamat IP pekerja.  Penyebaran sempurna jika ada penyeimbang di depan pengontrol Ingress - dari penyedia kubernetis (GKE, AKS), MetalLB jika itu adalah haproxy / nginx reguler atau premium yang diinstal di server (konfigurasi manual diperlukan).  Dengan instalasi ini, dimungkinkan untuk menginstal beberapa Ingress Controller. </p><a name="habracut"></a><br><h1>  Cara lalu lintas masuk ke Pengontrol Ingress </h1><br><p>  Dalam semua kasus, proksi terbalik di Ingress Controller mendengarkan port tempat ia menunggu koneksi http / https. </p><br><p>  Lalu lintas di port-port ini dapat diakses dengan tiga cara: </p><br><ul><li> NodePort (pada port acak di kisaran 30000-32767) </li><li>  HostPort (dapat digantung di port 80, 443) </li><li>  Jaringan host - Pod akan mengatur port-portnya pada antarmuka jaringan publik (mis. Semua port container akan terbuka) </li></ul><br><h2>  NodePort </h2><br><p>  Menginstal Pengontrol Ingress pada NodePort tanpa LoadBalancer tidak masuk akal, karena URL akan menyertakan port yang ditentukan dalam NodePort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://domain.example.org:32200/</a> . </p><br><p>  Untuk opsi ini, lebih baik menggunakan Penyebaran.  Ini akan memudahkan untuk skala jumlah pod yang bertanggung jawab untuk lalu lintas masuk, mendaftar nodeAffinity untuk mereka, dan menjalankan beberapa pengendali masuknya (misalnya, untuk produksi dan pementasan). </p><br><h2>  Hostport </h2><br><p>  Saat menggunakan HostPort, port diteruskan dari host di mana ia berjalan di bawah Pod yang sama ini.  LoadBalancer tidak diperlukan untuk masuk, tetapi agar situs dapat berfungsi dalam DNS, Anda harus menunjukkan bahwa alamat domain ada di semua node. </p><br><p>  Contoh konfigurasi DNS untuk 3 pekerja: </p><br><pre><code class="plaintext hljs">ingress.example.org A 10.0.0.1 ingress.example.org A 10.0.0.2 ingress.example.org A 10.0.0.3 www.example.org CNAME ingress.example.org</code> </pre> <br><p>  Untuk instalasi ini, yang terbaik adalah menggunakan DaemonSet sejak itu  ini memungkinkan Anda untuk menjalankan tidak lebih dari satu Pod pada host.  Penempatan adalah mungkin, tetapi sejak itu tidak masuk akal  Afinitas harus didaftarkan sehingga 2 Pod tidak ditugaskan ke satu host, jika tidak akan ada konflik pada port. </p><br><div class="spoiler">  <b class="spoiler_title">Contoh Konfigurasi untuk traefik</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">kind: DaemonSet apiVersion: extensions/v1beta1 metadata: name: traefik-ingress-controller namespace: traefik labels: k8s-app: traefik-ingress-lb spec: template: metadata: labels: k8s-app: traefik-ingress-lb name: traefik-ingress-lb namespace: traefik spec: serviceAccountName: traefik-ingress-controller terminationGracePeriodSeconds: 60 containers: - image: traefik:1.7.6 name: traefik-ingress-lb ports: - name: http containerPort: 80 hostPort: 80 - name: https containerPort: 443 hostPort: 443 - name: admin containerPort: 8080 hostPort: 8080 securityContext: capabilities: drop: - ALL add: - NET_BIND_SERVICE args: - --api - --kubernetes - --logLevel=DEBUG - --entrypoints=Name:https Address::443 TLS - --entrypoints=Name:http Address::80 - --defaultentrypoints=http</code> </pre> </div></div><br><h2>  Jaringan host </h2><br><p>  Saat menjalankan Ingress Controller pada jaringan bersama dengan host, tidak diperlukan penerusan port, tetapi dalam hal ini semua port yang terbuka di Pod akan dapat diakses dari Internet.  Lebih baik menggunakan DaemonSet untuk menjalankan.  Alasannya sama dengan HostPort - untuk menghindari konflik port. </p><br><h2>  Apa yang harus dipilih </h2><br><p>  Jika ada LoadBalancer di input - NodePort, jika tidak - HostPort + DNS Round Robin.  Untuk percobaan, Anda dapat mencoba jaringan Host, tetapi tidak aman. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434524/">https://habr.com/ru/post/id434524/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434512/index.html">Corporate perusahaan</a></li>
<li><a href="../id434514/index.html">"Rahasia" DPAPI atau DPAPI untuk Pentester</a></li>
<li><a href="../id434516/index.html">Cara mudah untuk menangani aspirasi karier Anda.</a></li>
<li><a href="../id434518/index.html">Tepuk tangan dan tepuk tangan: drama yang dikendalikan dengan cermat di toko-toko Apple</a></li>
<li><a href="../id434522/index.html">Pola justifikasi tugas dan antipatterns</a></li>
<li><a href="../id434528/index.html">Dekripsi pelacak sinar seukuran kartu pos</a></li>
<li><a href="../id434530/index.html">Kalender default, perbaikan dalam LDAP dan inovasi lainnya di Zimbra 8.8.11</a></li>
<li><a href="../id434532/index.html">Kisah satu proyek: ketika sebuah tim tidak memiliki pengembang senior</a></li>
<li><a href="../id434534/index.html">ONYX BOOX "My First Book": bacaan yang tidak berbahaya untuk ibu dan bayi</a></li>
<li><a href="../id434538/index.html">Perjuangan untuk ruang: apa yang terjadi di pasar internet satelit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>