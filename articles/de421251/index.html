<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òòÔ∏è üé≠ ‚õé Backup-System ‚õëÔ∏è üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üç£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist Teil einer Reihe zum Erstellen von NAS und wurde f√ºr einen bestimmten Systemtyp geschrieben. 


 Backup ist nach dem Repository-Man...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Backup-System</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421251/"><p><img src="https://habrastorage.org/webt/in/pk/uh/inpkuhyjnf8c-efshdvkj_edp7m.jpeg"></p><br><p>  Dieser Artikel ist Teil einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reihe zum Erstellen von NAS</a> und wurde f√ºr einen bestimmten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Systemtyp</a> geschrieben. </p><br><p>  Backup ist nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Repository-Management-System</a> die zweite Hauptaufgabe, die ich mit dem NAS l√∂sen wollte. </p><br><p>  Ihre Entscheidung zog sich hin ... </p><br><p>  Zu diesem Thema wurden bereits viele Artikel und sogar mehrere B√ºcher geschrieben, und bei Streitigkeiten dar√ºber wurden viele Exemplare gebrochen. </p><br><p>  Im Folgenden finden Sie einen Versuch, diesen Materialhaufen herauszufinden, in Ihren Kopf zu stecken und ein relativ kompetentes kleines System aufzubauen. </p><a name="habracut"></a><br><p>  Backup System (SRK) wird bestimmt durch: </p><br><ul><li>  Sicherungsrichtlinie.  Die Richtlinie legt die Hauptziele und -ziele der Sicherung sowie deren Anforderungen auf der Grundlage der Liste der Bedrohungen f√ºr jedes Sicherungssystem fest und begr√ºndet auch deren Notwendigkeit. </li><li>  Richtlinienbasierte Sicherungsbestimmungen.  Die Verordnung beschreibt die Sicherungs- und Wiederherstellungsalgorithmen, die f√ºr Sicherungen, Speicherbedingungen f√ºr Sicherungen usw. verantwortlich sind. </li><li>  Instrumentelle Umsetzung.  Eigentlich Software und Hardware. </li></ul><br><p>  Der regul√§re Sicherungsprozess ist in folgende Hauptteile unterteilt: </p><br><ul><li>  Regelm√§√üiger Kopierbeginn. </li><li>  Starten Sie die Wiederherstellung nach Bedarf. </li><li>  Testen des Kopiervorgangs. </li></ul><br><p>  Schnittstellenpunkte des Systems mit der NAS-Plattform: </p><br><ul><li> <code>tank0/apps/backup</code> - <code>tank0/apps/backup</code> . </li><li>  <code>tank1/apps/backup</code> - <code>tank1/apps/backup</code> . </li><li>  <code>https://backup.NAS.cloudns.cc</code> - Webbasierte Systemschnittstelle. </li></ul><br><p>  Backup-Repositorys sind <strong>separate Dateisysteme</strong> . <br>  Dies ist notwendig, da ihre Optionen sowohl von normalen Dateisystemen als auch untereinander sehr unterschiedlich sein k√∂nnen. </p><br><p>  Bei Bedarf kann beispielsweise die Deduplizierung mittels FS aktiviert und die Komprimierung deaktiviert werden. </p><br><h2 id="principy-rezervnogo-kopirovaniya">  Sicherungsprinzipien </h2><br><p><img src="https://habrastorage.org/webt/t-/pe/i4/t-pei4njc4jilp-l0unqmcpanho.jpeg"></p><br><p>  Es lohnt sich zu verstehen, dass, obwohl ich hier einen speziellen Fall von Backup beschreibe, der auf die Bed√ºrfnisse eines kleinen Netzwerks zugeschnitten ist, die Prinzipien, Beobachtungen und Muster √ºberall verbreitet sind. <br>  In einfachen F√§llen k√∂nnen einige von ihnen vernachl√§ssigt werden, aber es ist w√ºnschenswert zu wissen. </p><br><p>  Diese Grunds√§tze basieren auf Richtlinien und Vorschriften. </p><br><p>  Hier sind einige grundlegende: </p><br><ul><li>  <strong>3-2-1</strong> .  Erstellen Sie mindestens drei Sicherungen in zwei Speicherformaten, von denen mindestens eine an einem physisch getrennten Ort gespeichert werden muss.  Das Prinzip ist w√ºnschenswert zu beachten.  In meinem Fall ist dieses Prinzip teilweise implementiert.  Erstens gibt es drei verschiedene Computer, auf denen Daten teilweise dupliziert werden: NAS, Arbeit und Laptop.  Zweitens ist eine Replikation in die Cloud geplant. </li><li>  <strong>√úberpr√ºfen Sie, was kopiert wurde</strong> .  Andernfalls kann es vorkommen, dass die Daten in einem entscheidenden Moment nicht wiederhergestellt werden k√∂nnen.  √úberpr√ºfen Sie besser durch den Wiederherstellungsprozess. </li><li>  <strong>Verwenden Sie die richtigen Werkzeuge f√ºr die Aufgabe</strong> .  Es ist wahrscheinlich, dass beim Kopieren einer Flotte virtueller Maschinen ein System zum Kopieren von Dateien mit einem Agenten auf einer Maschine schlecht funktioniert.  Spezielle Software kopiert schneller und kosteng√ºnstiger auf Maschinenressourcen.  Es ist wichtig, dass das Tool zuverl√§ssig und einfach ist.  IBS ist nicht etwas, mit dem Sie normalerweise herumgraben m√∂chten. </li><li>  <strong>Es ist besser, alles zu kopieren, mit der offensichtlichen Ausnahme des √úberschusses</strong> .  Oder "es ist besser zu √ºberholen als nicht zu beenden."  Es ist m√∂glich, den √úberschuss wegzuwerfen, aber wenn die umgekehrte Richtlinie verwendet wird, ist es m√∂glicherweise unm√∂glich, eine wertvolle Datei wiederherzustellen, die Sie vergessen haben, explizit anzugeben. </li><li>  <strong>Es sollte m√∂glich sein, Daten schnell auszuw√§hlen und wiederherzustellen</strong> .  Es ist ratsam, "einen Klick", und nicht eine Stunde zu warten.  Formal m√ºssen Sie eine akzeptabel niedrige RTO und eine ausreichende RPO haben.  Es ist √§u√üerst praktisch, wenn Sie mit dem IBS versehentlich gel√∂schte Daten wiederherstellen und aus mehreren Versionen ausw√§hlen k√∂nnen, und nicht nur aus der neuesten (z. B. wenn es besch√§digt ist, weil logische Fehler nicht ausgeschlossen sind). </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Am Ende des Artikels</a> finden Sie Links zu Quellen, die Sie studieren k√∂nnen, um sich mit diesen Punkten besser vertraut zu machen und √ºber andere zu lesen. </p><br><h2 id="politika-rezervnogo-kopirovaniya">  Sicherungsrichtlinie </h2><br><p>  Offensichtlich besteht das Ziel jeder Sicherung darin, die Kosten f√ºr die ungeplante Datenvernichtung in Notfallsituationen zu senken. </p><br><p>  Dies wird erreicht, indem wertvolle Daten von Arbeitsmaschinen in Speicher von Drittanbietern dupliziert werden. </p><br><h3 id="zadachi-rezervnogo-kopirovaniya">  Sicherungsaufgaben </h3><br><p>  Die folgenden Aufgaben werden zu Sicherungszwecken definiert: </p><br><ul><li>  Markieren Sie die Zieldaten. </li><li>  Speichern der angegebenen Daten f√ºr die sp√§tere Wiederherstellung. </li><li>  Wiederherstellung gespeicherter Daten. </li><li>  Gew√§hrleistung der Stabilit√§t gespeicherter Daten gegen√ºber √Ñnderungen und Zerst√∂rungen. </li><li>  Differenzierung des Zugriffs auf gespeicherte Daten. </li><li>  Bereitstellung von Systemsteuerungs- und Sicherungsprozess. </li></ul><br><h3 id="trebovaniya-k-sisteme">  Systemanforderungen </h3><br><p>  Weiter in der Liste sind sowohl funktionale als auch nicht funktionale Anforderungen gemischt: </p><br><ul><li>  Backup sollte durchgef√ºhrt werden: <br><ul><li>  Im Zeitplan. </li><li>  Auf Anfrage. </li><li>  Wenn Sie den vorherigen √ºberspringen. </li></ul></li><li>  Die Datensicherung sollte mindestens einmal pro Tag bis zu einer Tiefe von 1 Monat erfolgen.  Die Praxis, Schnappsch√ºsse zu machen und die vorherige Version des Systems auf einem funktionierenden Computer zu verwenden, zeigt, dass dies f√ºr mich ausreicht. </li><li>  Die Datenwiederherstellungszeit sollte 2 Minuten pro 1 GB nicht √ºberschreiten (die maximale Netzwerkbandbreite betr√§gt 81 s pro 1 GB).  Ber√ºcksichtigt man die LAN-Bandbreite und die Festplattengeschwindigkeit als begrenzende Faktoren. </li><li>  Alle Kan√§le m√ºssen verschl√ºsselt sein.  Sensible Daten wie Autorisierungsdaten in Onlinediensten k√∂nnen gespeichert werden. </li><li>  Es sollte m√∂glich sein, Benutzersicherungen mit einem geheimen Schl√ºssel auf dem Computer des Benutzers zu verschl√ºsseln, ohne dass die M√∂glichkeit einer Entschl√ºsselung auf dem Server besteht.  Dies ist wichtig, da Benutzer dem Server √ºberhaupt nicht vertrauen m√ºssen. </li><li>  Unvollst√§ndiges Kopieren sollte nicht viel Zeit in Anspruch nehmen, z. B. mehr als 30 Minuten.  √úber das Internet werden Daten von einem Laptop kopiert. </li><li>  Es sollte das Potenzial f√ºr das Replizieren von Kopien in die Cloud (die M√∂glichkeit, die Replikation f√ºr einen bestimmten Cloud-Speicher flexibel zu konfigurieren) mit Verschl√ºsselung von Sicherungen bestehen.  Dies ist auch eine der Konsequenzen des "3-2-1-Prinzips". </li><li>  Es sollte eine einfache zentralisierte Verwaltung mit Integration in die Weboberfl√§che geben. </li><li>  Ein Minimum an Verbesserungen und komplexen Einstellungen auf dem Server. </li></ul><br><h3 id="sostav-rezerviruemyh-resursov">  Zusammensetzung der reservierten Ressourcen </h3><br><p>  In meinem Fall ist es ziemlich typisch: </p><br><ul><li>  Die Hauptarbeitsmaschine.  Desktop-Computer. </li><li>  Mobile Arbeitsmaschine.  Der Laptop. </li><li>  LAN-Router.  Es speichert Netzwerkeinstellungen, die Anmeldungen und Kennw√∂rter f√ºr eine Internetverbindung und einige Dienste enthalten k√∂nnen. </li><li>  NAS  Ja, die NAS-Konfiguration ist ebenfalls redundant.  Trotz der Tatsache, dass die meisten FS Schnappsch√ºsse haben. </li></ul><br><h3 id="sostav-ugroz">  Bedrohungszusammensetzung </h3><br><p>  Hier, wo und was soll gesch√ºtzt werden und auf welche Weise. </p><br><div class="spoiler">  <b class="spoiler_title">Zu diesem Zweck habe ich eine kleine Tabelle mit Bedrohungen zusammengestellt.</b> <div class="spoiler_text"><div class="scrollable-table"><table><thead><tr><th>  Ressource </th><th>  Bedrohung </th><th>  L√∂sung </th></tr></thead><tbody><tr><td>  Hauptarbeitsmaschine </td><td>  Besch√§digung physischer Daten </td><td>  Datensicherung und Schl√ºsseleinstellungen </td></tr><tr><td>  Hauptarbeitsmaschine </td><td>  Teilweise, nicht wahrnehmbare direkte Datenkorruption </td><td>  Bewahren Sie √§ltere Backups einige Zeit auf </td></tr><tr><td>  Hauptarbeitsmaschine </td><td>  Verlust des Datenzugriffs </td><td>  Speicherung des vollst√§ndigen Abbilds des Ger√§ts oder der <strong>Einstellungen f√ºr eine schnelle Abwicklung auf einem anderen Computer</strong> oder die Verdoppelung von Funktionen auf einem mobilen PC </td></tr><tr><td>  Hauptarbeitsmaschine </td><td>  Nicht autorisierter physischer Zugriff auf Daten </td><td>  Daten- und Sicherungsverschl√ºsselung, verschl√ºsselte Kopier√ºbertragung </td></tr><tr><td>  Hauptarbeitsmaschine </td><td>  Nicht autorisierter Zugriff durch Softwareverletzung </td><td>  Reservierung von Software-Pr√ºfsummen und regelm√§√üige Abstimmung, Kontrollsysteme (noch nicht implementiert) </td></tr><tr><td>  Mobile Arbeitsmaschine </td><td>  Ein Auto zusammen mit Daten zu verlieren </td><td>  Datenverschl√ºsselung, vollst√§ndige Sicherung oder Sicherung von Schl√ºsseleinstellungen und Daten </td></tr><tr><td>  LAN-Router </td><td>  Zerst√∂rung einer Konfiguration oder eines Ger√§ts </td><td>  Konfigurationsredundanz, Ger√§teredundanz m√∂glich </td></tr><tr><td>  LAN-Router </td><td>  Kontrollverlust durch Hacking </td><td>  Konfigurationsreservierung </td></tr><tr><td>  LAN-Router </td><td>  Teilweise unsichtbare Datenbesch√§digung </td><td>  Software-Pr√ºfsummenspeicherung und regelm√§√üige Abstimmung </td></tr><tr><td>  NAS </td><td>  Besch√§digte Serviceeinstellungen </td><td>  Lokale Reservierung Reservierung </td></tr><tr><td>  NAS </td><td>  Besch√§digung physischer Daten </td><td>  Cloud-Replikation </td></tr><tr><td>  NAS </td><td>  Verlust des Zugriffs auf das System und Backups </td><td>  Cloud-Replikation </td></tr><tr><td>  NAS </td><td>  Nicht autorisierter Zugriff auf Daten von Drittanbietern </td><td>  Speicherung und Replikation von Daten in verschl√ºsselter Form, Datenaustausch in verschl√ºsselter Form </td></tr><tr><td>  NAS </td><td>  Vom Administrator nicht autorisierter Zugriff auf Daten </td><td>  Verschl√ºsselung von Backups auf lokalen Schl√ºsseln redundanter Computer </td></tr></tbody></table></div></div></div><br><p>  Alle Hauptbedrohungen f√ºr den mobilen Computer wiederholen die Bedrohungen f√ºr den station√§ren Computer. <br>  Tablet-Computer unterscheiden sich aus dieser Sicht praktisch nicht von mobilen Computern. </p><br><h3 id="dopolnitelnye-usloviya-politiki">  Zus√§tzliche Vertragsbedingungen </h3><br><p>  Es ist ratsam, sie zu ber√ºcksichtigen: </p><br><ul><li>  Regelm√§√üige Wiederherstellungstests sollten durchgef√ºhrt werden. </li><li>  Fehlerbehebungsverfahren sollten dokumentiert werden. </li><li>  Aktionen sollten im Falle eines sekund√§ren Fehlers geregelt werden: Was tun, wenn das System nach der Wiederherstellung nicht betriebsbereit ist oder die Daten nicht wiederhergestellt werden k√∂nnen? </li><li>  Es muss gepr√ºft werden, ob der Wiederherstellungsprozess von bestimmten Ger√§ten abh√§ngt <br>  (Dies kann zum Zeitpunkt der Wiederherstellung fehlschlagen).  In meinem Fall werde ich dies nicht √ºberpr√ºfen, sondern nur eine grundlegende Systempr√ºfung durchf√ºhren. </li><li>  Wenn Sie √ºber eine vollst√§ndige Systemsicherung verf√ºgen, m√ºssen Sie diese sofort nach einem umfassenden Upgrade sichern. </li><li>  Wenn das kumulierte Volumen inkrementeller Sicherungen das vollst√§ndige Sicherungsvolumen √ºberschreitet, ist es sinnvoll, eine au√üerplanm√§√üige vollst√§ndige Sicherung durchzuf√ºhren.  Das hei√üt, die H√§ufigkeit der Erstellung vollst√§ndiger Sicherungen sollte in diesem Fall erh√∂ht werden. </li></ul><br><p>  Ich ber√ºcksichtige nicht den letzten Punkt der Richtlinie, da sich mein Workflow normalerweise nicht √§ndert und es ausreicht, das Volume nur f√ºr die Ersteinrichtung f√ºr eine Weile zu √ºberwachen. <br>  Empirisch wurde festgestellt, dass das Schema "Monat, Woche, Tag, Stunde" f√ºr mich ganz in Ordnung ist. <br>  Bei gr√∂√üeren Systemen m√ºssen Sie m√∂glicherweise die Sicherungsh√§ufigkeit f√ºr jedes System dynamisch √§ndern. </p><br><h2 id="reglament-rezervnogo-kopirovaniya">  Backup-Bestimmungen </h2><br><p>  Nach der Entwicklung einer Politik ist es m√∂glich, direkt mit der Entwicklung einer Verordnung fortzufahren. <br>  Im allgemeinen Fall kann es mehrere Vorschriften geben: allgemein f√ºr IBS-Administratoren, f√ºr Benutzer, f√ºr die f√ºr die Speicherung Verantwortlichen, f√ºr Administratoren von Zielsystemen usw. <br>  Bei einem kleinen System ist dies normalerweise eine Person, und daher gibt es nur eine Regelung. </p><br><h3 id="zadachi-reglamenta">  Die Ziele der Vorschriften </h3><br><ul><li>  Definieren von Datensicherungsverfahren. </li><li>  Definieren von Datenwiederherstellungsverfahren. </li><li>  Definieren eines Verfahrens zur √úberpr√ºfung des Systemzustands. </li><li>  Backup-Speicherbedingungen und Medienanforderungen. </li><li>  Straffung der Arbeit. </li></ul><br><h3 id="primer-reglamenta">  Regelungsbeispiel </h3><br><p>  Unter dem Spoiler k√∂nnen Sie am Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20160731233007/">der Rosreestr-Verordnung aus Open Source</a> sehen, wie die Regeln in einer gro√üen Organisation aussehen. </p><br><div class="spoiler">  <b class="spoiler_title">Regulierung von Rosreestr.</b> <div class="spoiler_text"><h1 id="reglament-rezervnogo-kopirovaniya-dannyh-v-territorialnyh-podrazdeleniyah-rosreestra">  REGELUNG DER SICHERUNG VON DATEN IN TERRITORIALABTEILUNGEN VON ROSRESTR </h1><br><h2 id="oglavlenie">  Inhaltsverzeichnis </h2><br><ol><li>  Allgemeine Bestimmungen </li><li>  Sicherungsauftrag. </li><li>  √úberwachung der Ergebnisse. </li><li>  Regulatorische Unterst√ºtzung. </li><li>  Rotation des Sicherungsmediums. </li><li>  Stellen Sie Informationen aus einer Sicherung wieder her. </li><li>  Anhang 1 </li><li>  Anhang 2 Liste der f√ºr die Sicherung verantwortlichen Personen. </li></ol><br><h2 id="1--obschie-polozheniya">  <strong>1</strong> Allgemeines </h2><br><p>  Diese Verordnung legt die grundlegenden Anforderungen f√ºr die Organisation der Sicherung (Wiederherstellung) von Programmen und Daten fest, die in Datenbanken auf den Servern der Gebietsk√∂rperschaft von Rosreestr gespeichert sind, sowie f√ºr die Sicherung von Hardware. </p><br><p>  Diese Verordnung soll: </p><br><ul><li>  Bestimmung der Kategorie von Informationen, die einer obligatorischen Sicherung unterliegen; </li><li>  Festlegung des Verfahrens zur Sicherung von Daten f√ºr die sp√§tere Wiederherstellung der Leistung von Informationssystemen im Falle eines vollst√§ndigen oder teilweisen Informationsverlusts aufgrund von Fehlern oder Fehlfunktionen von Hardware oder Software, Benutzerfehlern, Notf√§llen (Feuer, Naturkatastrophen usw.); </li><li>  Festlegung des Verfahrens zur Wiederherstellung von Informationen im Falle eines solchen Bedarfs; </li><li>  Straffung der Arbeit und Festlegung der Verantwortung der Beamten f√ºr die Sicherung und Wiederherstellung von Informationen. </li></ul><br><p>  Unter Sicherung von Informationen versteht man die Erstellung vollst√§ndiger Kopien der Produktionsdatenbanken des Amtes zur raschen Wiederherstellung des Informationsmanagementsystems des einheitlichen staatlichen Unternehmensregisters AIS "Justiz" im Notfall, das zu Sch√§den oder Datenverlust f√ºhrt. </p><br><p>  Alle Produktionsdatenbanken aller Gebietsabteilungen des Amtes werden gesichert. </p><br><p>  Maschinenspeichermedien, die eine Sicherungskopie enthalten, erhalten einen Vertraulichkeitsstempel f√ºr den h√∂chsten darin enthaltenen Informationsstempel. </p><br><p>  Backups werden au√üerhalb des Serverraums gespeichert, der Zugriff auf Backups ist beschr√§nkt.  Die Liste der Personen, die Zugang zu Daten haben, wird auf der Grundlage eines schriftlichen Antrags des Leiters der Abteilung Informationstechnologie (IT) erstellt, der mit dem Leiter der Abteilung Informationssicherheit (IS) vereinbart wurde.  Die Zugriffsrechte auf reservierte technische Mittel, Arrays und Speichermedien werden auf der Grundlage eines Antrags des Leiters der IT-Abteilung ge√§ndert, der mit dem Leiter der IS-Abteilung vereinbart wurde.  Die erkannten Versuche eines nicht autorisierten Zugriffs auf die reservierten Informationen und Hardware sowie andere IS-Verst√∂√üe, die w√§hrend des Sicherungsvorgangs aufgetreten sind, werden der IS-Einheit am Arbeitstag nach der Erkennung des angegebenen Ereignisses mit einem Servicehinweis gemeldet. </p><br><h2 id="2-poryadok-rezervnogo-kopirovaniya">  <strong>2</strong> Sicherungsauftrag </h2><br><p>  Die Sicherung erfolgt regelm√§√üig mit Oracle DBMS.  Backup kann gemacht werden: </p><br><ul><li>  Manuell - Der f√ºr die Sicherung verantwortliche Bediener startet die Oracle-Exportprozedur (ein Beispiel f√ºr das Starten der Prozedur in Anhang 1). </li><li>  Automatisch - Die ausf√ºhrbare Datei, die die Oracle-Exportprozedur aufruft, wird vom Betriebssystem automatisch gem√§√ü dem Zeitplan gestartet. </li></ul><br><p>  Die Datenbanksicherung wird mindestens einmal pro Tag durchgef√ºhrt.  Die Speicherdauer der Sicherungsdatenbank betr√§gt mindestens 1 Monat. </p><br><p>  Die Sicherungsstrategie sollte die synchrone Wiederherstellung von Daten gew√§hrleisten, die sich in verschiedenen Datenbankschemata befinden.  Beispielsweise sollte das HED-System (das Repository f√ºr elektronische Dokumente) gleichzeitig mit dem AIS-Justizsystem kopiert werden. </p><br><p>  Das Material und die technischen Mittel des Sicherungssystems sollten eine ausreichende Leistung bieten, um Informationen rechtzeitig und in festgelegten Intervallen zu speichern.  Die Personen, die f√ºr die t√§gliche Organisation der Sicherung verantwortlich sind, √ºberwachen die Verf√ºgbarkeit des f√ºr die Sicherung erforderlichen Speicherplatzes. </p><br><h2 id="3-kontrol-rezultatov">  <strong>3</strong> √úberwachung der Ergebnisse </h2><br><p>  Die Ergebnisse aller Sicherungsverfahren werden von den in Anhang 2 angegebenen zust√§ndigen Beamten bis zu 10 Stunden am Gesch√§ftstag nach dem festgelegten Datum f√ºr die Durchf√ºhrung dieser Verfahren √ºberwacht. </p><br><p>  Wenn ein Fehler festgestellt wird, meldet die f√ºr die √úberwachung der Ergebnisse verantwortliche Person ihn sp√§testens 11 Stunden des aktuellen Arbeitstages an den technischen Support des Entwicklers. </p><br><h2 id="4-normativno-pravovoe-obespechenie">  <strong>4</strong> Unterst√ºtzung bei der Regulierung </h2><br><p>  Um den Sicherungsprozess zu organisieren, m√ºssen Sie: </p><br><ul><li>  Definieren Sie eine Liste der Personen, die f√ºr die Durchf√ºhrung des Sicherungsprozesses und die √úberwachung der Ergebnisse verantwortlich sind (Anhang 2). </li><li>  Bereiten Sie einen Sicherungsplan vor und genehmigen Sie ihn. </li><li>  Vorbereitung und Genehmigung interner Regulierungsdokumente zur Ernennung der f√ºr die Datensicherung Verantwortlichen. </li></ul><br><h2 id="5-rotaciya-nositeley-rezervnoy-kopii">  <strong>5</strong> Sicherungsmedien drehen </h2><br><p>  Das Sicherungssystem sollte die M√∂glichkeit bieten, Sicherungsmedien regelm√§√üig zu ersetzen (zu entladen), ohne dass Informationen dar√ºber verloren gehen, und die Wiederherstellung der aktuellen Informationen automatisierter Systeme im Falle eines Ausfalls eines der Sicherungsger√§te sicherstellen.  Alle Verfahren zum Laden, Entladen von Medien aus dem Sicherungssystem sowie deren √úbertragung an den Sicherheitsdienst und umgekehrt werden vom Sicherungsadministrator auf Anfrage und in Anwesenheit eines verantwortlichen Mitarbeiters des Sicherheitsdienstes des Kunden (gem√§√ü Anhang Nr. 2) durchgef√ºhrt. </p><br><p>  Als neue Bef√∂rderer d√ºrfen diejenigen wiederverwendet werden, f√ºr die die Speicherdauer der enthaltenen Informationen abgelaufen ist. </p><br><p>  Vertrauliche Informationen von Medien, die nicht mehr im Sicherungssystem verwendet werden, m√ºssen mit der PGP-Software gel√∂scht werden. </p><br><h2 id="6-vosstanovlenie-informacii-iz-rezervnoy-kopii">  <strong>6</strong> Stellen Sie Informationen aus einer Sicherung wieder her </h2><br><p>  Falls erforderlich, wird die Wiederherstellung von Daten aus Sicherungen von dem in Anhang Nr. 2 angegebenen verantwortlichen Mitarbeiter der IT-Abteilung durchgef√ºhrt. </p><br><p>  Die Datenwiederherstellung aus Sicherungen erfolgt im Falle ihres Verschwindens oder Versto√ües aufgrund eines nicht autorisierten Zugriffs auf das System, der Exposition gegen√ºber Viren, Softwarefehlern, Mitarbeiterfehlern und Hardwarefehlern. </p><br><p>  Die Wiederherstellung von Systemsoftware und Allzweck-Software erfolgt von ihren Medien gem√§√ü den Anweisungen des Herstellers. </p><br><p>  Die Wiederherstellung spezieller Software erfolgt von Verteilungsmedien oder deren Sicherungskopien gem√§√ü den Anweisungen zum Installieren oder Wiederherstellen dieser Software. </p><br><p>  Informationen, die sich nicht auf sich st√§ndig √§ndernde Datenbanken beziehen, werden von Sicherungsmedien wiederhergestellt.  Hierbei wird die neueste Kopie der Informationen verwendet. </p><br><p>  Im Falle einer teilweisen Verletzung oder des Verschwindens von Datenbankdatens√§tzen wird die Wiederherstellung ab der letzten ungest√∂rten t√§glichen Kopie durchgef√ºhrt.  Alle Informationen werden von der letzten Kopie wiederhergestellt. </p><br><h2 id="7-prilozhenie-1">  <strong>7</strong> Anhang 1 </h2><br><p>  Ein Beispiel f√ºr das Starten des Oracle-Exportdienstprogramms √ºber die Befehlszeile: </p><br><p>  exp userid = JUST_USER / PASSWORD @ SERVER Eigent√ºmer = (JUST_USER, HED_USER) direkt = Y konsistent = Y Statistik = KEINE Komprimierung = N Datei = C: \ BACKUP.DMP log = C: \ BACKUP.LOG </p><br><p>  wo: </p><br><p>  JUST_USER / PASSWORD @ SERVER <em>-</em> Schema_Benutzername / Passwort @ Servername; </p><br><p>  owner = (JUST_USER, HED_USER) - Liste der kopierten Schemata. In diesem Beispiel werden das AIS-Justizschema und das HED-Schema gleichzeitig exportiert. </p><br><p>  file = C: \ BACKUP.DMP <em>-</em> Pfad und Name der erstellten Exportdatei; </p><br><p>  log = C: \ BACKUP.LOG <em>-</em> Pfad und Name der erstellten Exportprotokolldatei. </p><br><h2 id="8-prilozhenie-2-perechen-lic-otvetstvennyh-za-rezervnoe-kopirovanie">  <strong>8</strong> Anhang 2. Liste der f√ºr die Sicherung verantwortlichen Personen </h2><br><div class="scrollable-table"><table><thead><tr><th>  <strong>Nr. P / p</strong> </th><th>  <strong>Rolle</strong> </th><th>  <strong>Name des verantwortlichen Beamten</strong> </th></tr></thead><tbody><tr><td>  1 </td><td>  Erstes Setup des Backup-Systems. </td><td></td></tr><tr><td>  2 </td><td>  Vornehmen wesentlicher √Ñnderungen am Setup des Sicherungssystems. </td><td></td></tr><tr><td>  3 </td><td>  Analyse von Sicherungsprotokollen, Verfolgung der Notwendigkeit von √Ñnderungen an den Sicherungseinstellungen, Sicherstellung der Medienrotation. </td><td></td></tr><tr><td>  4 </td><td>  Rotation des Mediums, √úberpr√ºfung der Richtigkeit des Backups und Sicherstellung, dass das Backup im Katastrophenfall au√üerhalb des B√ºros gespeichert wird. </td><td></td></tr></tbody></table></div></div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier</a> finden Sie ein weiteres Beispiel mit einer kurzen Beschreibung. </p><br><h3 id="procedura-rezervirovaniya">  Reservierungsverfahren </h3><br><p>  Zusammensetzung der Sicherungsdaten: </p><br><ul><li>  Arbeitsmaschinen: <br><ul><li>  Pers√∂nliche Benutzerverzeichnisse ( <code>/home/*</code> ).         . </li><li>   . </li><li>    ,   ( <code>/opt</code> ). </li><li>   ( <code>/etc</code> ). </li><li>    . </li><li>  . </li><li>   . </li><li>   . </li></ul></li><li> : <br><ul><li>  . </li></ul></li><li> NAS: <br><ul><li>    Docker . </li><li>   . </li><li>  . </li><li>    . </li><li>  . </li><li>     Docker . </li><li>   . </li><li>    . </li></ul></li><li>  : <br><ul><li>    . </li></ul></li></ul><br><p>  : </p><br><ul><li>       . </li><li>     ,    . </li><li>          <code>/etc/apt/apt.conf.d</code> ,  ,     . </li><li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Mikrotik</a> . </li><li> NAS    . </li></ul><br><p>  : </p><br><ul><li>     1      .     . <br>  3 . </li><li>     1     . <br>  . </li><li>     1   . <br>  . </li><li>       . <br>  . </li><li>          . <br>    6 ,      . </li></ul><br><h3 id="procedura-vosstanovleniya">   </h3><br><p><img src="https://habrastorage.org/webt/qu/i3/il/qui3ilw9nczsm17-w7d1dwcalhy.jpeg"></p><br><ul><li>        ,  . </li><li>       ,    . </li></ul><br><p>        : </p><br><ul><li>   live . </li><li>        . </li><li>     ,  . </li></ul><br><p>  ,           Debian   (  Squeeze  2011 ),           Slackware  ReiserFS    . </p><br><p>       : </p><br><ul><li>    ,  . </li><li>       . </li><li>   ,    . </li><li>       . </li></ul><br><p> Mikrotik   ,    RouterOS . </p><br><h3 id="procedura-proverki-rabotosposobnosti">    </h3><br><ul><li>       . <br>   logcheck, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> . </li><li>          . </li></ul><br><p>       ,    . </p><br><h3 id="usloviya-hraneniya-rezervnyh-kopiy-i-trebovaniya-k-nositelyam">         </h3><br><ul><li>      . </li><li>    1        . <br>              . </li><li>  .     . </li><li>    . </li></ul><br><h2 id="resheniya-dlya-rezervnogo-kopirovaniya">     </h2><br><p>     ,       . </p><br><h3 id="trebovaniya-k-po">    </h3><br><p>      : </p><br><ul><li>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Veeam</a>     ,   ,    .     ,    Acronis,    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . </li><li>             . </li><li>          . </li></ul><br><h3 id="vybor-po">   </h3><br><p>          . <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . </p><br><div class="spoiler"> <b class="spoiler_title">  .</b> <div class="spoiler_text"><h3 id="resheniya-na-baze-unix-utilit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unix Utility-L√∂sungen </font></font></h3><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√∂sungen basierend auf rsync, tar, rdiff-backup usw. </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden aufgrund des gro√üen Arbeitsaufwands und des Fehlens der erforderlichen WEB-Schnittstelle nicht ber√ºcksichtigt.</font></font></p><br><h3 id="bareoshttpswwwbareosorgen"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breos</font></font></a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/kp/pa/7t/kppa7tts84fep2t5rfk52poagx4.png"></a> </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> BareOS (Backup Archiving Recovery Open Sourced) - Gabel von Bacula seit 2010. </font></font></p><br><p>  Vorteile: </p><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stabiles Debugging-System. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unterst√ºtzt verschiedene Arten von Agenten unter verschiedenen Betriebssystemen. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es werden verschiedene Arten von Backups unterst√ºtzt: inkrementell, differenziell, voll. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die WEB-Schnittstelle ist sehr entwickelt und funktional. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Flexible Konfiguration. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es gibt einen FUSE-Treiber, der Backups anzeigt. </font></font></li><li>    Python,    Director. </li><li>       (, ). </li><li>       . </li><li>     . </li></ul><br><p>  Nachteile: </p><br><ul><li>    . </li><li>   . </li><li>    . </li><li>   ,    . </li><li>   (500+ ),    ,          . </li></ul><br><h3 id="backuppchttpbackuppcsourceforgenet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BackupPC</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/zi/dv/e4/zidve44-5zrteeqdkiosyigkvwu.png"></a> </p><br><p>    . </p><br><p>   : </p><br><ul><li>    . </li><li>    . </li><li>  Web-. </li><li>    . </li><li> .    ,       . </li><li>   . </li><li>   ,   SMB, rsync. </li><li>      Web-. </li><li>     ,      . </li><li>  ,  ,      . </li><li>   . </li></ul><br><p>  Nachteile: </p><br><ul><li>   Perl,   CPAN. </li><li>    ,    ,     . <br>        ,   ,   ,     .   ,         SSH   ,   ,    , ..      . </li><li>      (  ,    ). </li></ul><br><h3 id="urbackuphttpswwwurbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UrBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/u1/lo/ed/u1loed_wq1-njxjlq1f7ths2kso.png"></a> </p><br><p> -     . </p><br><p>   : </p><br><ul><li>  . </li><li>  Web-. </li><li>    . </li><li>      ( .. ). </li><li>   Windows, Linux, MacOS X. </li><li>    :     ,        . </li><li>     . </li><li>     . </li><li>      (,  Outlook,     ). </li><li>   .    ,       . </li><li>   (,   ..)     . </li><li>  . </li><li>    ,     . </li><li>     ,      . </li><li>   . </li><li>      Internet. </li><li>   (,  ) . </li><li>     . </li><li>     (,   USB ). </li><li>  . </li><li>  GUI     . </li></ul><br><p>  Nachteile: </p><br><ul><li>   Windows,    , . </li><li>      NTFS. </li><li>  LDAP,   ,  ,   AD      . </li></ul><br><h3 id="restichttpsresticnet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Restic</a> </h3><br><p>         . </p><br><p>   : </p><br><ul><li>  . </li><li>      . </li><li> .    ,       . </li><li>   / .   .    . </li><li>       .    . </li><li>   . </li><li>  FUSE ,       host/. </li></ul><br><p>  Nachteile: </p><br><ul><li> Web- . </li><li>    RAM (~2.7GB  1TB). </li><li>   ACL   . </li><li>     RAM   . </li><li>      (     ). </li><li>       (        ).    . </li><li>       restic. </li></ul><br><h3 id="borgbackuphttpswwwborgbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BorgBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/a_/qp/rh/a_qprhceevkysy_nk_xg20os5x0.jpeg"></a> </p><br><p>     . </p><br><p>   : </p><br><ul><li>   . </li><li>        . </li><li>   (   Python,      C  ). </li><li> . </li><li> : LZ4, zlib, LZMA. </li><li>  FUSE ,   . </li><li>     : Linux, macOS, BSD, etc. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Web-,   </a> . </li><li>    . </li></ul><br><p>  Nachteile: </p><br><ul><li> Web-  . </li><li>     Windows (  Linux subsystem  cygwin). </li></ul><br><h3 id="lsyncdhttpsgithubcomaxkibelsyncd"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lsyncd</a> </h3><br><p> ,      rsync. </p><br><p>   : </p><br><ul><li>  inotify  fsevents    .     rsync   . </li><li>     rsync. </li><li>   Lua,     Lua. </li><li>      . </li><li>  . </li></ul><br><p>  Nachteile: </p><br><ul><li>  .   Web-   . </li></ul><br><h3 id="box-backuphttpswwwboxbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Box Backup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/4e/o-/ta/4eo-taslxisuzzofmwhmmjtjxmk.png"></a> </p><br><p>       . <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> . </p><br><p>   : </p><br><ul><li>                 ,  . </li><li>  ,  TLS,   ,     SSL . </li><li>    ,   "" ,    . </li><li>      . </li><li> ,   :   ,   . </li><li>      ,    . </li><li>  . </li><li>      :     . </li><li>      RAID. </li><li>  *nix-like , Windows native, Windows cygwin. </li><li>   GUI. </li></ul><br><p>  Nachteile: </p><br><ul><li>     ,    UID.       ,    . </li><li>  Web-. </li></ul></div></div><br><p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UrBackup</a> . <br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . </p><br><p>           . </p><br><h3 id="nastroyka-servera-urbackup">   UrBackup </h3><br><p>        ,   : </p><br><pre> <code class="plaintext hljs"># zfs create -o com.sun:auto-snapshot=false -p tank0/apps/backup # zfs set compression=on tank0/apps/backup</code> </pre> <br><p>   ,     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  UrBackup  ZFS </a> . </p><br><p>   ,            : </p><br><pre> <code class="plaintext hljs"># zfs set dedup=on tank0/apps/backup</code> </pre> <br><p>     UrBackup  : </p><br><pre> <code class="plaintext hljs"># mkdir /tank0/docker/services/urbackup # cd /tank0/docker/services/urbackup # vim docker-compose.yml # docker-compose up -d</code> </pre> <br><p>   docker-compose  . <br>     Web-      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> . </p><br><div class="spoiler">  <b class="spoiler_title">docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">version: '2' networks: docker0: external: name: docker0 services: urbackup: uroni/urbackup-server image: restart: always expose: - 55414 ports: # - 55413:55413 - 55415:55415 - 35623:35623/udp volumes: - /tank0/apps/backup/urbackup/database:/var/urbackup - /tank0/apps/backup/urbackup/backups:/backups - /tank0/apps/backup/urbackup/log:/var/log - /etc/localtime:/etc/localtime:ro networks: - docker0 environment: - VIRTUAL_HOST=backup.* - VIRTUAL_PORT=55414 - VIRTUAL_PROTO=http - CERT_NAME=NAS.cloudns.cc - TZ=Europe/Moscow</code> </pre> </div></div><br><p>  Docker  <code>uroni/urbackup-server</code>  ,      <code>tristanteu/urbackup-docker</code> . <br>       . </p><br><p> ,      : </p><br><ol><li>  .           UrBackup  LDAP . </li><li>    LDAP.  LDAP  .  "   ".  ,      . </li><li>   . </li><li>       ,  .   .     .  ,       NAS,     . </li><li>  -. </li></ol><br><p>   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/03/xx/3d/03xx3dgvb6xtswdsfejbdakwwkg.png"></a> </p><br><p>  : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/um/0u/1h/um0u1h_i9ikrjhpgt-ppfyjubzs.png" alt="Admin hinzuf√ºgen"></a> </p><br><p> LDAP    ,     :     ,         . </p><br><p>      : </p><br><pre> <code class="bash hljs">ou=users,dc=nas,dc=nas?memberOf,objectClass?sub?(&amp;(memberOf=cn=users_backup,ou=groups,dc=nas,dc=nas)(uid={USERNAME}))</code> </pre> <br><p>   - ,    . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/az/wb/0q/azwb0qxoafmccqrzs1iyrchpi2q.png" alt="LDAP-Setup"></a> </p><br><p>     ,      ,       . <br>       ,     : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xi/cx/vn/xicxvnphcifc4z8ocwwrem8hqei.png"></a> </p><br><p>  -: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sp/vk/uc/spvkuc8fxj9-vxldm4k9qmb7c6o.png"></a> </p><br><p>  ,     ,        . </p><br><p> ,  UrBackup: </p><br><ul><li>  TCP 55415 ‚Äî   . </li><li>  TCP 55414 ‚Äî Web-  HTTP. </li><li>  TCP 55413 ‚Äî Web-  FastCGI,        Web-.  Weil    NAS  HTTP/HTTPS,    . </li><li>  TCP 35621 ‚Äî           . </li><li>  UDP 35622 ‚Äî       .        .      . </li><li>  TCP 35623 ‚Äî              . </li><li>  UDP 35623 ‚Äî    . </li></ul><br><p> ,  55415    ,   35621, 35622, 35623         . </p><br><h3 id="ustanovka-agenta">   </h3><br><p>            ,      . </p><br><p>     : </p><br><ul><li>   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>  shell . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  GUI</a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-</a> . </li></ul><br><p>   UrBackup , ..      ,            : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/-k/e3/k4/-ke3k4w2aornwpmehottv2shgxk.png" alt="Agent-Download-Seite"></a> </p><br><p>      . </p><br><p>     shell : </p><br><pre> <code class="bash hljs">TF=`mktemp` &amp;&amp; wget <span class="hljs-string"><span class="hljs-string">"https://NAS.system.cloudns.cc/x?a=download_client&amp;lang=ru&amp;clientid=1&amp;authkey=KEY&amp;os=linux"</span></span> -O <span class="hljs-variable"><span class="hljs-variable">$TF</span></span> &amp;&amp; sh <span class="hljs-variable"><span class="hljs-variable">$TF</span></span>; rm <span class="hljs-variable"><span class="hljs-variable">$TF</span></span></code> </pre> <br><p>         : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># urbackupclientctl status { "capability_bits": 65548, "finished_processes": [], "internet_connected": true, "internet_status": "connected", "last_backup_time": 0, "running_processes": [], "servers": [], "time_since_last_lan_connection": 152446032 }</span></span></code> </pre> <br><p>    NAS     ,   : </p><br><ul><li>  : <code>/etc;/home;/var;/root;/tank0/apps;/tank0/docker</code> . </li><li> : <code>/tank0/apps/backup;/tank1/apps/backup;/tank0/apps/cloud/nextcloud/html/data</code> . </li></ul><br><p>       ,   ,  ,    ,  ,     . </p><br><p>  ,     ,  , "  ",  ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/qr/np/ts/qrnptsrut7fv4rumu7rde8fwypm.png"></a> </p><br><p>       : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status ‚óè urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 21:55:53 MSK; 37min ago Main PID: 1694 (urbackupclientb) Tasks: 14 (limit: 4915) Memory: 13.4G CGroup: /system.slice/urbackupclientbackend.service ‚îî‚îÄ1694 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/   .djvu"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/  .doc"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/-.fb2"</span></span></code> </pre> <br><h3 id="problemy">  Die Probleme </h3><br><p>  , UrBackup       ,   .     . <br>    ‚Äî    -,    . </p><br><div class="spoiler"> <b class="spoiler_title">    ...</b> <div class="spoiler_text"><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status ‚óè urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 20:36:54 MSK; 9s ago Main PID: 27034 (urbackupclientb) Tasks: 10 (limit: 4915) Memory: 6.1M CGroup: /system.slice/urbackupclientbackend.service ‚îî‚îÄ27034 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 20:36:54 host urbackupclientbackend[27034]: urbackupserver: Server started up successfully!  30 20:36:54 host urbackupclientbackend[27034]: FileSrv: Server started up successfully  30 20:36:54 host urbackupclientbackend[27034]: Started UrBackupClient Backend...  30 20:36:55 host urbackupclientbackend[27034]: Looking for old Sessions... 2 sessions  30 20:36:56 host urbackupclientbackend[27034]: Trying to connect to internet server "NAS.system.cloudns.cc" at port 55415  30 20:36:56 host urbackupclientbackend[27034]: Successfully connected.  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error</span></span></code> </pre> </div></div><br><p>     : </p><br><pre> <code class="bash hljs">ERROR: Internet mode not enabled. Please <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"internet_mode_enabled"</span></span> to <span class="hljs-string"><span class="hljs-string">"true"</span></span>.</code> </pre> <br><p>             . </p><br><p>        : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend stop ~# rm -rf /usr/local/var/urbackup/</span></span></code> </pre> <br><p>      <code>/etc/default/urbackupclient</code> ,     . </p><br><p>          ,     <code>/usr/local/var/urbackup/data/settings.cfg</code> . </p><br><p>   ,    ,     : </p><br><pre> <code class="plaintext hljs">internet_server=NAS.system.cloudns.cc internet_server_port=55415 internet_authkey=44R3MUIdB computername=zenbook internet_mode_enabled=true</code> </pre> <br><p>   ,   ,     -. <br>  ,     ,   ,      . </p><br><h3 id="zapusk-polnogo-rezervnogo-kopirovaniya-posle-obnovleniya">       </h3><br><p>  Debian,    ,       <code>/etc/apt/apt.conf.d/80full-backup</code> : </p><br><pre> <code class="python hljs">DPkg::Post-Invoke {<span class="hljs-string"><span class="hljs-string">"test -x /usr/local/bin/urbackupclientctl &amp;&amp; /usr/local/bin/urbackupclientctl start -f || true"</span></span>; };</code> </pre> <br><h3 id="rezervnaya-kopiya-routera">    </h3><br><p>    NAS,    .  ,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mtbackup</a>  SSH,    NAS. <br>    Python    ,   ,    ,    UrBakup,   . </p><br><h3 id="proverka-vosstanovleniya">   </h3><br><p>   : </p><br><ul><li> . </li><li> . </li></ul><br><p> ,     :         .  ,    . </p><br><p>    ,   : </p><br><ul><li>    . </li><li>    ,   . </li><li>    . </li><li>  ,   ,   . </li><li>    . </li><li>   . </li><li>   ,   . </li></ul><br><p>   ,   - ,     . </p><br><h2 id="oblachnye-servisy-dlya-rezervirovaniya">     </h2><br><p><img src="https://habrastorage.org/webt/ms/no/j4/msnoj4lqhhfm-keodwyhhdoaudm.jpeg"></p><br><p>       . <br>      ,        ,          . <br>       -  ,     ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Storj</a> . </p><br><h2 id="literatura">  Literatur </h2><br><p>     ,       ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    debian-russian</a> .   ,  "  rsync?". </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">" "</a> . </li><li> " 3-2-1" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  Veeam</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a> . </li><li>  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   Veeam</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20181201152034/">"    "</a>  ,  ,   . </li><li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">" :     "</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a> ,          . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a> . </li></ul><br><p> ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">W. Curtis Preston ‚Äî "Backup &amp; Recovery" ‚Äî 2000</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> .. ‚Äî     </a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> . ‚Äî Backup  "" ‚Äî 2014</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Steven Nelson ‚Äî Pro Data Backup and Recovery ‚Äî 2011</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dorian Cougias ‚Äî The Backup Book: Disaster Recovery from Desktop to Data Center, 3 edition ‚Äî 2003</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>      (2017 )  . </li></ul><br><p>      . </p><br><p>       ,          RTO, RPA, RPO. ,    ,         ,      . </p><br><p> -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   NAS</a> , , ,   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421251/">https://habr.com/ru/post/de421251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421241/index.html">Die Zentralbank bittet um die Blockierung b√∂sartiger Websites vor dem Test</a></li>
<li><a href="../de421243/index.html">LLTR Teil 2: Algorithmus zur Bestimmung der Netzwerktopologie aus gesammelten Statistiken</a></li>
<li><a href="../de421245/index.html">C #: Ein Anwendungsfall f√ºr jede Aufgabe</a></li>
<li><a href="../de421247/index.html">Wie man Grafiken in Sound verwandelt und warum Sie sie brauchen</a></li>
<li><a href="../de421249/index.html">Warum Wall Street-Finanziers zu viel arbeiten und kann das behoben werden?</a></li>
<li><a href="../de421253/index.html">Warum brauchen wir Heckautos?</a></li>
<li><a href="../de421255/index.html">Elon Musk gab Pl√§ne auf, Tesla in eine private Firma zu verwandeln</a></li>
<li><a href="../de421257/index.html">Wie ein internationales Hackernetzwerk 100 Millionen Dollar durch den Diebstahl von Pressemitteilungen verdient hat</a></li>
<li><a href="../de421259/index.html">Wenn Sie √ºberlegen, mit dem Schreiben auf Go zu beginnen, sollten Sie Folgendes wissen</a></li>
<li><a href="../de421261/index.html">Die Wirkung von Akrasie: Warum erf√ºllen wir unsere Pl√§ne nicht und was tun wir dagegen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>