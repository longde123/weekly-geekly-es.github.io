<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙁 🎛️ 🗺️ Machine à fumée maison 👍🏻 ⚠️ 🙅🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour démontrer le cosplay steampunk, une machine à fumée était nécessaire (enfin, quel genre de steampunk sans fumée?), Mais ce n'était pas sur la scè...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Machine à fumée maison</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/399387/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour démontrer le cosplay steampunk, une machine à fumée était nécessaire (enfin, quel genre de steampunk sans fumée?), Mais ce n'était pas sur la scène de la performance. </font><font style="vertical-align: inherit;">Sans réfléchir à deux fois, j'ai décidé de fabriquer ma propre petite machine à fumée, avec contrôle de la température, télécommande (le contrôleur ESP-12E a été utilisé) et alimentation par batterie. </font><font style="vertical-align: inherit;">J'ai pris comme base la brume déjà décrite avec la mesure de température, mais j'ai légèrement compliqué le circuit pour améliorer les performances.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Wt7n2YoJos8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'élément le plus difficile a été la fabrication d'une spirale et d'un système d'alimentation pour un mélange de glycérol et de propylène glycol. Après quelques expériences, il s'est arrêté sur une spirale à six tours d'un diamètre d'environ 12 mm, enroulée à partir d'une «queue de cochon», une suite de 7 veines de titane d'un diamètre de 0,29. En général, il serait préférable de prendre un fil plus épais et de se passer d'une «queue de cochon», mais il y avait une sélection limitée de matériaux à portée de main. La spirale résultante a une résistance d'environ un demi-ohm, ce qui donne une puissance théorique pour 12 volts de 240 watts (en fait, la puissance de chauffage sera inférieure, en raison de la nécessité de maintenir la température à 210-230 degrés).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fil en spirale après torsion en queue de cochon et enroulement (il est nécessaire d'enrouler sur un tube de plus petit diamètre, car le titane est très élastique), il est préférable de rincer et de calciner (en fournissant 12 volts de la batterie à la chaleur rouge, pour éliminer les contaminants organiques (graisse des doigts et autres). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, l'idée était de fabriquer un appareil de chauffage sous la forme d'un tube en cuivre rempli d'huile moteur avec une spirale à l'intérieur, ce qui garantirait une uniformité presque complète du chauffage et ferait un appareil de chauffage beaucoup plus puissant, mais il n'y avait pas de matériaux nécessaires à portée de main .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dû bricoler l'alimentation en fluide, car elle devrait être, d'une part, continue et uniforme, et d'autre part, pas trop abondante. Il y avait une pompe à eau à portée de main, qui n'avait pas de contrôle de débit, alors j'ai opté pour la conception suivante - un tube en silicone perforé d'un diamètre de 5 mm (une douzaine de trous avec une perceuse de 1,2 mm), enveloppé de coton, au sommet duquel se trouve une spirale. Étant donné que la pompe entraîne beaucoup plus de fluide qu'elle ne s'écoule à travers le coton, l'extrémité du tube va dans le même réservoir où la pompe ramasse la composition. Le réservoir lui-même est un encrier anti-déversement imprimé sur une imprimante, qui est situé sous la spirale réelle et, en outre, recueille des gouttelettes de liquide qui s'en échappent.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je dois dire que l'ajustement lâche de la spirale au coton (ou même des fils trop longs sur la spirale qui n'entrent pas en contact avec le liquide) conduisent à un chauffage inégal, ce qui provoque une odeur de brûlé et peut même entraîner un incendie. Pour cette raison, il est impossible de faire des spirales trop grandes ou trop longues, ce qui limite la puissance. Par conséquent, la méthodologie était la suivante - un rectangle de coton est enroulé sur un trou dans le tube (il est vendu sous une telle forme dans les magasins pour vapoteurs), puis le cylindre de coton résultant avec le tube à l'intérieur est vissé en spirale, comme par fil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a pris une turbine de 12 volts en tant que ventilateur, que le hobby a vendu en quelque sorte pour de simples sous. La pompe est une pompe à eau chinoise (en raison du fait qu'elle a été conçue pour 6 volts, j'ai dû ajouter un autre convertisseur cc-cc au LM2596), connectée en parallèle avec le ventilateur. La machine est alimentée par une batterie Li-Pol 3S de 2,6 ampères-heures avec une cote de 40 ° C. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schéma:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2b8/a22/240/2b8a22240b0d48dcaf608ba38136eff5.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un fragment du code de contrôle (ajustement plutôt grossier, je ne voulais pas jouer avec le contrôleur PID et ses paramètres), nous appelons la fonction pulse_heat_coil () avec l'intervalle requis pour le chauffage (recommandé dans 10-20 millisecondes). </font><font style="vertical-align: inherit;">Pour un réglage plus précis - vous avez besoin d'au moins un deuxième ADC (pour mesurer simultanément la tension de la batterie) et d'un contrôleur séparé du wifi (comme dans les mods que j'ai décrits pour vapoter sur stm32 et arduino mini pro). </font><font style="vertical-align: inherit;">Il est préférable d'allumer le ventilateur avec la pompe quelques secondes avant le chauffage et de l'éteindre une dizaine de secondes après, afin d'éviter des incidents désagréables.</font></font><br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">// Measure coil resistance (and put it into coil_input)</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> TEST_RESISTOR 25</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> HALF_PULSE_RANGE 1.6</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> STOP_PULSE_RANGE 1.7</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> coil_input_zero = <span class="hljs-number"><span class="hljs-number">0.001</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> coil_input_zero, batt_input, coil_resist;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">measure_coil</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {
  <span class="hljs-comment"><span class="hljs-comment">// Measure battery voltage (only possible when heater on)</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(HEATER) == HIGH)<font></font>
    batt_input = analogRead(A0);<font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">// Turn off heater</span></span>
  analogWrite(HEATER, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  digitalWrite(HEATER, LOW);<font></font>
  delayMicroseconds(<span class="hljs-number"><span class="hljs-number">10</span></span>);<font></font>
  <font></font>
  digitalWrite(TESTPIN, HIGH);<font></font>
  delayMicroseconds(<span class="hljs-number"><span class="hljs-number">10</span></span>);<font></font>
  coil_input = analogRead(A0);<font></font>
  digitalWrite(TESTPIN, LOW);<font></font>
  delayMicroseconds(<span class="hljs-number"><span class="hljs-number">10</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (coil_input_zero == <span class="hljs-number"><span class="hljs-number">0.001</span></span>)<font></font>
    coil_input_zero = coil_input;<font></font>
<font></font>
  coil_resist = TEST_RESISTOR * ((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) coil_input / (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) batt_input - <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
} <span class="hljs-comment"><span class="hljs-comment">// void measure_coil()</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Make coil heating pulse with thermocontrol</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pulse_heat_coil</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pulse_delay</span></span></span><span class="hljs-function">)</span></span> {
  <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> curr = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) coil_input / (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) coil_input_zero;<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((coil_input &lt; <span class="hljs-number"><span class="hljs-number">1023</span></span>) &amp;&amp; (curr &lt; STOP_PULSE_RANGE)) {
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (curr &gt; HALF_PULSE_RANGE)<font></font>
      analogWrite(HEATER, PWMRANGE / <span class="hljs-number"><span class="hljs-number">2</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> 
      analogWrite(HEATER, PWMRANGE<span class="hljs-number"><span class="hljs-number">-1</span></span>);<font></font>
    delay(pulse_delay - <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
    analogWrite(HEATER, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
    digitalWrite(HEATER, LOW);<font></font>
    delay(pulse_delay - <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  }<font></font>
<font></font>
  delayMicroseconds(<span class="hljs-number"><span class="hljs-number">50</span></span>);<font></font>
  measure_coil();<font></font>
} <span class="hljs-comment"><span class="hljs-comment">// void pulse_heat_coil(int pulse_delay)</span></span></code></pre><br>
</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr399387/">https://habr.com/ru/post/fr399387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr399377/index.html">TOP 10 des offres du Black Friday</a></li>
<li><a href="../fr399379/index.html">Histoire des épidémies mondiales, partie 2</a></li>
<li><a href="../fr399381/index.html">New York Times: Facebook créera des outils de censure pour retourner en Chine</a></li>
<li><a href="../fr399383/index.html">Le MIT crée des fibres musculaires artificielles en nylon</a></li>
<li><a href="../fr399385/index.html">Concepteur électromécanique ROBOTS-XXI</a></li>
<li><a href="../fr399389/index.html">Comment un vaisseau spatial extraterrestre pourrait-il fonctionner?</a></li>
<li><a href="../fr399391/index.html">Calculatrice de carton et de balle à quatre bits</a></li>
<li><a href="../fr399395/index.html">Soldes d'automne Steam et premiers Steam Awards</a></li>
<li><a href="../fr399397/index.html">Refonte de la calculatrice programmable HP 39GS en 48GII</a></li>
<li><a href="../fr399399/index.html">Percée du VIH: un nouvel anticorps bloque 98% de toutes les souches virales connues</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>