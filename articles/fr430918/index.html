<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤝 👩🏻‍🔧 👍 À propos de Flutter, en bref: les bases 😂 🤴🏼 🎫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Après le rapport de Yura Luchaninov , j'ai décidé d'essayer Flutter par moi-même. Pour étirer le cerveau, et donc il y avait de quoi se détendre avec ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>À propos de Flutter, en bref: les bases</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430918/"><p><img src="https://habrastorage.org/getpro/habr/post_images/06a/005/a97/06a005a97b10f6904756d0f76b2b5312.jpg" alt="À propos de Flutter, en bref: les bases"></p><br><p> Après le rapport de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yura Luchaninov</a> , j'ai décidé d'essayer Flutter par moi-même.  Pour étirer le cerveau, et donc il y avait de quoi se détendre avec les hommes dans la cuisine.  Les choses ont disparu.  J'ai commencé à regarder, puis à lire, puis à écrire.  Et tout semble fonctionner, les applications sont lancées, et ce qu'elles expliquent est compréhensible, tout est simple.  Mais pas sans «mais» - tout le monde n'explique pas.  Et puisque la plate-forme, le PJ, les approches et même le sujet sont nouveaux pour moi, ce genre de contrariété, parce que vous "ne commencez pas", et vous ne savez même pas quoi google: Dart / Flutter / Window / Screen / Route / Widget? </p><br><p>  Bien sûr, je ne voulais pas relire toute la documentation de Dart, Flutter et ses widgets, car je n'avais pas beaucoup de temps, et je voulais juste regarder de plus près Flutter.  Ce serait génial s'il y avait un petit guide qui décrit tout ce dont vous avez besoin, mais pas plus, pour comprendre et écrire des applications pas trop compliquées sur Flutter! </p><a name="habracut"></a><br><h2 id="pro-gayd">  À propos du guide </h2><br><p>  La plupart des articles sur ce sujet sont bien écrits et pas compliqués.  Le problème est que la plupart d'entre eux nécessitent des connaissances qui sont considérées comme des fondamentaux, qui, cependant, ne sont pas mentionnés dans d'autres articles décrivant les bases.  Dans cette série d'articles, je veux rectifier cette situation.  Commençons à zéro et, sans laisser aucune de ces réponses sans attention, nous lancerons une ou plusieurs applications.  Au cours de ce processus, nous apprendrons à utiliser tous les <strong>composants principaux</strong> , à créer une <strong>interface unique</strong> , à travailler avec <strong>des modules natifs</strong> et, bien sûr, à assembler votre <strong>application pour les deux plates-formes</strong> . </p><br><p>  J'écrirai du point de vue d'un développeur web.  La plupart d'entre vous connaissent probablement la pile Web, et l'analogie avec la plate-forme familière est meilleure que l'analogie avec la construction de maisons ou autre chose, Animal, Dog, Foo, Bar ... </p><br><p>  Je vais essayer de résumer brièvement pour ne pas tarder.  Et pour les plus curieux, je laisserai des liens utiles sur les sujets abordés. </p><br><h2 id="pro-platformu">  À propos de la plateforme </h2><br><p>  Flutter est une plateforme jeune mais très prometteuse qui a déjà attiré l'attention des grandes entreprises qui ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lancé leurs applications</a> .  Cette plateforme est intéressante pour sa simplicité comparable au développement d'applications web, et la rapidité de travail à égalité avec les applications natives.  Des performances d'application et une vitesse de développement élevées sont obtenues grâce à plusieurs techniques: </p><br><ul><li>  Contrairement à de nombreuses plates-formes mobiles bien connues d'aujourd'hui, Flutter <strong>n'utilise JavaScript</strong> sous aucune forme.  En tant que langage de programmation pour Flutter, ils ont choisi Dart, qui est compilé en code binaire, atteignant ainsi la vitesse des opérations comparable à Objective-C, Swift, Java ou Kotlin. </li><li>  Flutter <strong>n'utilise pas de composants natifs</strong> , encore une fois, sous quelque forme que ce soit, vous n'avez donc pas besoin d'écrire de couches pour communiquer avec eux.  Au lieu de cela, comme les moteurs de jeu (et vous savez que les jeux ont une interface utilisateur très dynamique), il dessine lui-même toute l'interface.  Boutons, texte, éléments multimédias, arrière-plan - tout cela est dessiné à l'intérieur du moteur graphique dans Flutter lui-même.  Après ce qui précède, il convient de noter que l'application «Hello World» sur Flutter prend très peu de place: iOS ≈ 2,5 Mo et Android ≈ 4 Mo. </li><li>  Flutter <strong>utilise une approche déclarative</strong> inspirée du framework web ReactJS basé sur des widgets (dans le monde du web appelés composants) pour construire l'interface utilisateur.  Pour une augmentation encore plus grande de la vitesse de l'interface, les <strong>widgets sont redessinés selon les besoins</strong> - uniquement lorsque quelque chose a changé en eux (tout comme Virtual DOM le fait dans le monde du web front-end). </li><li>  En plus de cela, le framework <strong>a un</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Hot-Reload</strong></a> <strong>intégré</strong> , si familier au Web, et qui n'était toujours pas disponible sur les plateformes natives. </li></ul><br><p>  Sur les avantages pratiques de ces facteurs, je recommande fortement de lire l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article du développeur Android</a> qui a réécrit son application de Java vers Dart et a partagé ses impressions.  Ici, je viens de retirer le nombre de fichiers / lignes de code qu'il a nommés avant (écrit en Java) - 179/12176, et après (réécrit en Dart) - 31/1735.  Dans la documentation, vous trouverez une description détaillée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des caractéristiques techniques de la plateforme</a> .  Et voici un autre lien, si vous êtes intéressé à voir d'autres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemples d'applications fonctionnelles</a> . </p><br><h2 id="pro-dart">  À propos de Dart </h2><br><p>  Dart est un langage de programmation dans lequel nous devons écrire des applications pour Flutter.  C'est très simple, et si vous avez de l'expérience avec Java ou JavaScript, vous l'apprendrez rapidement. </p><br><p>  J'ai essayé d'écrire un article sur Dart, essayant de décrire uniquement le minimum nécessaire pour apprendre Flutter.  Mais il y a tellement de nuances dans cette langue que, malgré plusieurs tentatives pour écrire un tel article, je ne pouvais toujours pas le rendre assez complet et en même temps court.  En revanche, les auteurs de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">A Tour of the Dart Language ont</a> fait un excellent travail. </p><br><h2 id="pro-podgotovku">  À propos de la formation </h2><br><p>  Ce sujet, comme Dart, est très bien décrit dans le guide officiel.  Je ne pouvais que le copier ici, mais je ne le ferai pas. </p><br><p>  Sans rien attendre, nous allons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur la</a> page du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guide d'installation</a> , sélectionnons la plateforme et suivons les étapes pour installer la plateforme sur notre système.  Dans notre éditeur, nous connecterons des plugins.  Dans le même guide, il y a une instruction pour configurer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VS Code</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IntelliJ</a> .  Il existe également des plugins pour Dart et Flutter pour votre éditeur (vous devez généralement en installer deux).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous lançons l'application et vérifions ses performances</a> . </p><br><p>  Astuce pour les utilisateurs OSX.  Je suis désolé pour l'espace occupé par les cadres peints du téléphone dans l'émulateur iOS, alors je les ai éteints et je suis passé à l'iPhone 8 (ce n'est pas si «long»): </p><br><ul><li><code>Hardware → Device → iOS # → iPhone 8</code> </li> <li> <code>Window → Show Device Bezels</code> </li> </ul><br><p>  Vous pouvez vivre sans boutons, car il existe des raccourcis clavier: <code>Shift + Cmd + H</code> - c'est la maison, <code>Cmd + Right</code> - et c'est pour retourner le téléphone, le reste peut être trouvé dans le menu <code>Hardware</code> .  Mais je vous conseille d'activer le clavier à l'écran, car il est important de comprendre s'il est possible de travailler avec l'application lorsque la moitié de l'écran est régulièrement bloquée par le clavier: <code>Cmd + K</code> (fonctionne lorsque l'accent est mis sur un champ de saisie). </p><br><p>  <strong>iPhone 8 et iPhone X avec cadres</strong> <br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/549/778/b8b5497782c023fa976cb7d3fda5a1f7.png" alt="iPhone 8 et iPhone X avec cadres"></p><br><p>  <strong>iPhone 8 et iPhone X sans bordure</strong> <br><img src="https://habrastorage.org/getpro/habr/post_images/f3e/568/115/f3e568115a43742fd4371e765fa0a872.png" alt="iPhone 8 et iPhone X sans bordure"></p><br><h2 id="pro-strukturu">  À propos de la structure </h2><br><p>  Nous allons aller dans le dossier avec l'application générée et voir ce que nous avons là-bas.  Pas avec tout, mais avec le bon: </p><br><ul><li>  <code>lib/</code> - Selon les principes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pub</a> (gestionnaire de paquets de Dart), tout le code se trouve dans ce sous-dossier; </li><li>  <code>pubspec.yml</code> - c'est là que les dépendances de l'application sont écrites que vous devez installer pour l'exécuter, tout comme <code>package.json</code> , mais il y a une nuance, vous devez les installer non pas via l'utilitaire Dart standard mentionné ci-dessus, mais via la commande Flutter: <code>flutter pub get &lt;package_name&gt;</code> ; </li><li>  <code>test/</code> - savez-vous ce qu'il y a?  Vous pouvez les exécuter en appelant <code>flutter test</code> ; </li><li>  Dossiers <code>ios/</code> &amp; <code>android/</code> - avec des paramètres pour chaque plate-forme, il indique les droits nécessaires pour exécuter l'application (accès à l'emplacement, Bluetooth), les icônes et tout ce qui est spécifique à la plate-forme. </li></ul><br><p>  Nous avons compris la structure, allez dans le dossier <code>lib/</code> où le fichier <code>main.dart</code> nous attend.  Comme vous pouvez le deviner, il s'agit du même fichier dans lequel nous devons exécuter notre application.  Et cela commence comme en C (et même des tonnes d'autres) en appelant la fonction <code>main()</code> . </p><br><h2 id="pro-vidzhety-hello-world-zdes">  À propos des widgets (Hello World ici) </h2><br><p>  Dans Flutter, tout est construit sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Widget</a> : il y a des vues, des styles avec des thèmes et des états dans les widgets.  Il existe deux principaux types de widgets: avec et sans état, mais pas encore à ce sujet.  Soyons tranquilles. </p><br><p>  Supprimez tout de <strong>main.dart</strong> .  Collez le code suivant en lisant attentivement les commentaires: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     //  Dart      main() main() =&gt; runApp( //   runApp  Flutter Text( //  ,   ,   &lt;span&gt; 'Hello, World!!!', //   —     textDirection: TextDirection.ltr, //       ), );</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>runApp(…)</code></a> prend un seul argument - un widget qui sera la racine de tout le projet.  Soit dit en passant, Hot-reload ne peut pas le récupérer, vous devrez donc redémarrer l'application. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Text(…)</code></a> - Flutter ne peut pas simplement afficher une chaîne à l'écran.  Pour afficher du texte, vous devez spécifier <code>Text</code> .  <code>textDirection</code> .  Et ce n'est pas l'alignement du texte comme l'alignement du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>text-align</code></a> , par rapport au Web, c'est un analogue de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>direction</code></a> .  Une partie de l'API pour l'internationalisation d'une application.  <code>Text</code> ne fonctionnera pas tant qu'il ne connaît pas la direction, mais vous n'avez pas besoin de le spécifier partout - nous analyserons ensuite comment ajuster la direction du texte pour l'ensemble de l'application. </p><br><p>  Vous avez déjà lancé l'application?  "Bonjour tout le monde!"  dehors!  Il semble que ce soit ... Oui?  Mais quelque chose s'est manifestement mal passé. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/555/246/37b/55524637b38b1f0dab4459d41f3745e8.jpg" alt="Capture d'écran de l'application en cours d'exécution"></p><br><p>  Le texte est bloqué par les informations système.  Nous avons tout l'espace d'écran à notre disposition, et nous avons sorti le widget à son tout début, où, entre autres, les informations système sont affichées.  Essayons de déplacer notre texte quelque part. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Center( <span class="hljs-comment"><span class="hljs-comment">// ,      child: Text( 'Hello, World!', textDirection: TextDirection.ltr, ), ), );</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Center(…)</code></a> est un widget qui vous permet de placer un autre widget passé dans l'argument <code>child</code> au centre horizontalement et verticalement.  Vous verrez souvent des <code>child</code> et des <code>children</code> dans les applications Flutter, car presque tous les widgets utilisent ces noms pour transmettre des widgets qui doivent être dessinés à l'intérieur du widget appelé. </p><br><p>  Les compositions de widgets sont utilisées dans Flutter pour rendre l'interface utilisateur, changer l'apparence et même transférer des données.  Par exemple, le widget <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Directionality(…)</code></a> définit la direction du texte pour tous les widgets enfants: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Center( child: Text(<span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span>), ), ), );</code> </pre> <br><p>  Regardons un autre widget très important et transformons en même temps l'apparence de notre application: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Container( <span class="hljs-comment"><span class="hljs-comment">//  ! &lt;div&gt;   Flutter' //   Container  color    color: Color(0xFF444444), child: Center( child: Text( 'Hello, World!', style: TextStyle( //     ,    color: Color(0xFFFD620A), //     fontSize: 32.0, //    ), ), ), ), ), );</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/6fc/469/a20/6fc469a2081ca8faadf086069cc0af2e.png" alt="Capture d'écran de l'application HelloWorld"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Color(…)</code></a> - couleur.  La documentation indique différentes façons de le définir, mais l'essentiel est simplement de passer le numéro au constructeur de classe.  Dans l'exemple ci-dessus, nous transmettons au constructeur un nombre écrit sous forme hexadécimale, qui est très similaire à HEX, seulement au début, nous avons ajouté deux caractères supplémentaires indiquant le degré de transparence de la couleur, où 0x00 est absolument transparent et 0xFF n'est pas du tout transparent. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>TextStyle(…)</code></a> - un widget encore plus intéressant, avec lui, vous pouvez définir la couleur, la taille, l'épaisseur, l'espacement des lignes, ajouter du soulignement et plus encore. </p><br><p>  Application Flutter écrite, c'est fait!  Sur les quais, vous pouvez lire comment l'assembler pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS</a> , il y a des liens au même endroit pour vous dire comment l'envoyer au magasin souhaité.  À qui cela ne suffit pas, j'ai jeté quelques lignes supplémentaires sur Flutter, peut-être plus ... </p><br><h2 id="pro-stateless-vidzhety">  Widgets sans état Pro </h2><br><p>  Comment utiliser les widgets - nous avons compris, voyons maintenant comment les créer.  Il a déjà été mentionné ci-dessus qu'il existe des widgets qui ont un état et qui ne l'ont pas.  Jusqu'à présent, nous n'avons utilisé que des widgets sans état.  Cela ne signifie pas qu'ils ne l'ont pas du tout, car les widgets ne sont que des classes et leurs propriétés peuvent être modifiées.  Juste après le rendu du widget, la modification de son état n'entraînera pas la mise à jour de ce widget dans l'interface utilisateur.  Par exemple, si nous devons changer le texte à l'écran, nous devrons générer un autre widget <code>Text</code> et spécifier le nouveau contenu que nous voulons afficher.  Ces widgets peuvent être appelés constants, si vous voyez ce que je veux dire.  Et ils sont simples, alors commençons par eux. </p><br><p>  Pour créer un widget sans état, vous avez besoin de: </p><br><ol><li>  Trouvez un beau nom pour la nouvelle classe; </li><li>  Héritez une classe de <code>StatelessWidget</code> ; </li><li>  Implémentez une méthode <code>build()</code> qui prend un <code>BuildContext</code> comme argument et retourne une sorte de <code>Widget</code> . </li></ol><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Center( child: MyStatelessWidget() ), ), ); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyStatelessWidget</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  @override   ,    , //         //  ,       @override Widget build(BuildContext context) { // [context]    return Text('Hello!'); } }</span></span></code> </pre> <br><p>  Exemple de widget avec un argument: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class MyStatelessWidget extends StatelessWidget { //   Stateless      final,   const final String name; //   MyStatelessWidget(this.name); //   @override Widget build(BuildContext context) { // [context]     return Text('Hello, $name!'); } }</span></span></code> </pre> <br><p>  A propos de Stateless plus et rien à ajouter ... </p><br><h2 id="pro-hot-reload">  À propos du rechargement à chaud </h2><br><p>  Veuillez noter que lorsque vous modifiez le contenu de notre widget, l'application sera automatiquement redessinée.  Après avoir supprimé le widget de la fonction <code>main()</code> , le rechargement à chaud a commencé à nous aider. </p><br><p>  Il est également important de comprendre qu'en raison du module lancé pour l'échange à chaud, l'application s'exécute un ordre de grandeur plus lentement. </p><br><h2 id="pro-gesturedetector">  À propos de GestureDetector </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/152/d3e/0c4/152d3e0c44a587d15ed95df50dad563b.gif" alt="Widget GestureDetector en action"></p><br><p>  Dans la section suivante, nous traiterons de <code>StatefulWidget</code> (avec des widgets qui changent lorsque leur état change).  Pour que cela soit intéressant, nous devons en quelque sorte changer cet état, d'accord?  Nous allons changer l'état du widget en réponse aux touches sur l'écran.  Pour ce faire, nous utiliserons le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>GestureDetector(…)</code></a> - un widget qui ne dessine rien, mais surveille les touches sur l'écran du smartphone et signale à ce sujet les fonctions qui lui sont transférées. </p><br><p>  Créez un bouton au centre de l'écran, lorsque vous cliquez dessus, un message s'affiche dans la console: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Container( color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span>), child: App(), ), ), ); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Center( child: GestureDetector( <span class="hljs-comment"><span class="hljs-comment">//     onTap: () { //    GestureDetector //    ,      print('You pressed me'); }, child: Container( //     decoration: BoxDecoration( //   shape: BoxShape.circle, //     color: Color(0xFF17A2B8), //      ), width: 80.0, height: 80.0, ), ), ); } }</span></span></code> </pre> <br><p>  Cliquez sur le bouton bleu et voyez le message dans la console.  On clique encore et encore on voit le message dans la console.  Encore une fois ... D'accord, arrête de coller. </p><br><h2 id="pro-stateful-vidzhety">  Widgets avec état </h2><br><p>  <code>StatefulWidget</code> - Simple, encore plus simple que <code>StatelessWidget</code> .  Mais il y a une nuance: ils n'existent pas par eux-mêmes, pour leur travail nous avons besoin d'une autre classe qui stockera l'état de ce widget.  En même temps, sa partie visuelle (les widgets dont elle est constituée) devient également son état. </p><br><p>  Pour commencer, regardez la classe des widgets: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class Counter extends StatefulWidget { //      ,     , //   createState() @override State&lt;Counter&gt; createState() =&gt; _CounterState(); //        State, //   State&lt;&gt; }</span></span></code> </pre> <br><p>  Ci-dessus, nous avons créé un widget «vide» qui implémentait une méthode <code>createState()</code> très simple.  Cette séparation de la présentation et de l'état permet à Flutter d'optimiser considérablement l'application. </p><br><p>  L'objet d'état est complètement simple.  De plus, il est presque identique à celui de <code>StatelessWidget</code> écrit par nous ci-dessus.  Sa principale différence est la classe parente. </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class _CounterState extends State&lt;Counter&gt; { //    -    , //      . //   ,     int counter = 0; //     ,       //   ,      Stateless . @override Widget build(BuildContext context) { //          , //     —  : return Center( child: GestureDetector( onTap: () { //  ,   ,    //  counter. setState(() { // setState()   ,    //      ,    ++counter; }); }, child: Container( decoration: BoxDecoration( shape: BoxShape.circle, color: Color(0xFF17A2B8), ), width: 80.0, child: Center( child: Text( //    counter '$counter', //      style: TextStyle(fontSize: 30.0), ), ), ), ), ); } }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/316/aa3/591/316aa3591cfc2b44a9080c60649e418b.gif" alt="Exécution d'une application de compteur"></p><br><p>  Notez que le nom de classe commence par un trait de soulignement inférieur.  Dans Dart, tous les noms commençant par des traits de soulignement identifient des valeurs privées.  Et l'état des widgets dans Flutter est généralement laissé privé, bien que cela ne soit pas nécessaire. </p><br><p>  Quelle merveilleuse application nous avons faite!  C'est un excellent résultat.  Mais avant de terminer cette partie du cours, regardons quelques widgets plus intéressants.  Seulement cette fois, nous écrirons plus de code, juste pour le rendre plus intéressant.  La plupart des applications devraient vous être familières, et le reste vous devriez avoir déjà appris à comprendre: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp(App()); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Directionality( textDirection: TextDirection.ltr, child: Container( padding: EdgeInsets.symmetric( vertical: <span class="hljs-number"><span class="hljs-number">60.0</span></span>, horizontal: <span class="hljs-number"><span class="hljs-number">20.0</span></span>, ), color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span>), child: Content(), ), ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Content</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Column( children: [ Counter(<span class="hljs-string"><span class="hljs-string">'Manchester United'</span></span>), Counter(<span class="hljs-string"><span class="hljs-string">'Juventus'</span></span>), ], ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatefulWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String _name; Counter(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._name); <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">State&lt;Counter&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>=&gt; _CounterState(); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_CounterState</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Container( margin: EdgeInsets.only(bottom: <span class="hljs-number"><span class="hljs-number">10.0</span></span>), padding: EdgeInsets.all(<span class="hljs-number"><span class="hljs-number">4.0</span></span>), decoration: BoxDecoration( border: Border.all(color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFD6A02</span></span>)), borderRadius: BorderRadius.circular(<span class="hljs-number"><span class="hljs-number">4.0</span></span>), ), child: Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [ <span class="hljs-comment"><span class="hljs-comment">// widget —    State,    //      ,      _CounterLabel(widget._name), _CounterButton( count, onPressed: () { setState(() { ++count; }); }, ), ], ), ); } } class _CounterLabel extends StatelessWidget { static const textStyle = TextStyle( color: Color(0xFF000000), fontSize: 26.0, ); final String _label; _CounterLabel(this._label); @override Widget build(BuildContext context) { return Text( _label, style: _CounterLabel.textStyle, ); } } class _CounterButton extends StatelessWidget { final _count; final _onPressed; _CounterButton(this._count, {@required this._onPressed}); @override Widget build(BuildContext context) { return GestureDetector( onTap: () { _onPressed(); }, child: Container( padding: EdgeInsets.symmetric(horizontal: 6.0), decoration: BoxDecoration( color: Color(0xFFFD6A02), borderRadius: BorderRadius.circular(4.0), ), child: Center( child: Text( '$_count', style: TextStyle(fontSize: 20.0), ), ), ), ); } }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/c2f/93e/d18/c2f93ed188071906ab840b9fcc70f0cd.png" alt="Une autre application de compteur sur Flutter"></p><br><p>  Nous avons deux nouveaux widgets: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Column()</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Row()</code></a> .  Essayez de comprendre ce qu'ils font.  Et dans le prochain article, nous les examinerons plus en détail, ainsi que regarder plus d'un widget qui vous permet de composer d'autres widgets ensemble, et de créer une belle application en utilisant la bibliothèque Flutter appelée Material. </p><br><h2 id="pro-domashnee-zadanie">  À propos des devoirs </h2><br><p>  Si vous souhaitez lire autre chose à votre guise, voici une liste de liens intéressants: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://flutter.io/docs/get-started/flutter-for/web-devs</a> </li><li>  Utilisation du code de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VS Code</a> et d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">InteliJ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">En savoir plus sur les widgets</a> </li><li>  Vous devriez également lire à propos du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rechargement</a> à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chaud</a> pour comprendre quand le code peut ne pas redémarrer. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430918/">https://habr.com/ru/post/fr430918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430908/index.html">Module de contrôle du convertisseur de puissance: développement et assemblage</a></li>
<li><a href="../fr430910/index.html">Bourse Fulbright: comment et pourquoi?</a></li>
<li><a href="../fr430912/index.html">Nous amenons un menteur à l'eau potable: un entretien n'est pas une relation de travail. Naturellement</a></li>
<li><a href="../fr430914/index.html">Analyse des prix du marché noir pour les données personnelles et percée</a></li>
<li><a href="../fr430916/index.html">Détecteur de dioxyde de carbone MT8057S. Non-révision avec la participation d'un non-émulateur</a></li>
<li><a href="../fr430922/index.html">Exemple de calcul pour standard téléphonique</a></li>
<li><a href="../fr430924/index.html">Programmation Ada</a></li>
<li><a href="../fr430926/index.html">Le temps est fragmenté; un peu sur la similitude des systèmes distribués et un modèle de mémoire faible</a></li>
<li><a href="../fr430928/index.html">À propos de la "maison intelligente": comment créer un rétro-éclairage "intelligent"</a></li>
<li><a href="../fr430930/index.html">À propos des graphiques 3D en mots simples</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>