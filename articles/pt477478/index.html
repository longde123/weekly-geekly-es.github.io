<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêï ‚ôâÔ∏è ‚úãüèæ Automa√ß√£o residencial com suporte para linguagens de programa√ß√£o industrial ou BluePill x405 ‚ú® üë∂ üë©üèº‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In√≠cio da Revis√£o 
 Ent√£o, meus queridos colegas, come√ßamos a revis√£o com o que realmente queremos destacar aqui. No artigo, quero considerar os eleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automa√ß√£o residencial com suporte para linguagens de programa√ß√£o industrial ou BluePill x405</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477478/"><h3>  In√≠cio da Revis√£o </h3><br>  Ent√£o, meus queridos colegas, come√ßamos a revis√£o com o que realmente queremos destacar aqui.  No artigo, quero considerar os elementos t√≠picos da constru√ß√£o de um programa de controlador industrial e mostrar como eles podem ser aplicados aos sistemas de automa√ß√£o residencial.  E o mais importante √© encontrar a resposta para a pergunta - o que √© necess√°rio para isso. <br><br><h3>  Dom√≥tica - Aplica√ß√µes </h3><br>  Lar doce lar ... Voc√™ realmente precisa de um controlador?  A resposta √© simples - tudo depende do que est√° dispon√≠vel em uma casa dessas.  Obviamente, se voc√™ tiver apenas um apartamento, e a automa√ß√£o consistir em gerenciar sua central de m√≠dia dom√©stica e ar condicionado no ver√£o, tudo o que est√° escrito abaixo pode ser completamente desinteressante.  Mas se o seu hobby n√£o √© apenas empurrar o sof√° (o que h√° para se esconder, √†s vezes eu mesmo notei isso), o artigo pode ser muito √∫til. <br><a name="habracut"></a><br>  Ent√£o, vamos tentar entender como os meios improvisados ‚Äã‚Äãpodem simplificar nossa vida dif√≠cil.  Como exemplo, usamos a situa√ß√£o real - uma bomba em um po√ßo de 70 metros de profundidade, que dois vizinhos dobram.  Eles o instalaram na primavera, quando havia muita √°gua no po√ßo e, em geral, era apenas quente e bom.  Mas o tempo passa e as perguntas come√ßam - para elevar a √°gua a partir de tal profundidade, voc√™ precisa de eletricidade, pela qual precisa pagar.  O por√£o e o piso t√©cnico foram inundados v√°rias vezes - eles simplesmente esqueceram de desligar a bomba ... Sim, e n√£o √© muito conveniente control√°-la manualmente - voc√™ precisa fechar uma torneira, abrir outra, ligar a bomba e observar o n√≠vel da √°gua no tanque. <br><br>  Vale a pena gastar seu tempo com isso, que j√° est√° faltando?  Uma mente curiosa come√ßa a procurar solu√ß√µes e, √© claro, encontra-a!  Nasce uma lista de tarefas para implementa√ß√£o. <br><br><ol><li>  O pagamento pela eletricidade consumida n√£o precisa ser comum - ou seja, instalaremos duas entradas, cada uma conectada ao seu pr√≥prio medidor el√©trico. </li><li>  A bomba n√£o deve falhar devido √† falta de √°gua - isso significa que instalaremos um sensor para o curso "seco" da bomba.  Se n√£o houver √°gua, simplesmente n√£o ligue a bomba e, se funcionar, paramos de emerg√™ncia. </li><li>  A bomba n√£o deve funcionar por muito tempo - por exemplo, mais de 25 minutos.  Exceder esse tempo indica que o sistema est√° saindo do modo normal de opera√ß√£o. </li><li>  O enchimento de recipientes deve ocorrer sem interven√ß√£o humana, ou seja, automaticamente, e isso significa come√ßar no n√≠vel mais baixo e parar no n√≠vel superior. </li><li>  Apenas um tanque deve ser enchido, ou seja, instalamos duas v√°lvulas - para fornecer √°gua para um conjunto em cada tanque. </li><li>  A pausa entre o arranque da bomba deve ser de pelo menos 30 minutos. </li><li>  Uma interrup√ß√£o de energia n√£o deve afetar o algoritmo de opera√ß√£o, se estiver ativo.  Apesar de tudo, o algoritmo deve ser conclu√≠do. </li></ol><br>  As tarefas s√£o simples e podem ser resolvidas de cem, se n√£o de mil maneiras.  Mas o t√≠tulo do artigo fala por si e seguiremos um caminho espinhoso.  Vamos usar um controlador virtual (por enquanto, √© claro), que far√° tudo isso. <br><br><h3>  Como funciona um controlador industrial? </h3><br>  Obviamente, esclareceremos imediatamente - estamos falando dos chamados controladores l√≥gicos program√°veis, ou PLC, para abreviar.  O que est√° oculto sob esta abrevia√ß√£o?  E aqui est√° o que est√° oculto - uma variedade incr√≠vel de solu√ß√µes de hardware, um grande n√∫mero de produtos e utilit√°rios de software.  Uma pergunta razo√°vel surge imediatamente - como ent√£o usar todo esse bem?  √â realmente necess√°rio estudar a parte do material do zero e encontrar tempo e dinheiro para cada novo dispositivo, a fim de fazer cursos de treinamento e adquirir as habilidades necess√°rias para trabalhar com cada dispositivo? <br><br>  A resposta √© n√£o, n√£o √© necess√°rio.  Tudo foi feito diante de n√≥s.  Resta apenas estudar e aprender a usar.  √â isso que proponho fazer ainda mais - uma pequena imers√£o na norma IEC 61131. Vamos revelar quais partes esta norma cont√©m. <br><br><ul><li>  IEC 61131-1: Informa√ß√µes gerais. </li><li>  IEC 61131-2: Requisitos e teste de equipamento. </li><li>  IEC 61131-3: Linguagens de Programa√ß√£o. </li><li>  IEC 61131-4: Guia do Usu√°rio. </li><li>  IEC 61131-5: Comunica√ß√µes. </li><li>  IEC 61131-6: Seguran√ßa funcional. </li><li>  IEC 61131-7: Programa√ß√£o de controle difuso. </li><li>  IEC 61131-8: Diretrizes para o uso e implementa√ß√£o de linguagens de programa√ß√£o. </li><li>  IEC 61131-9: Interface de comunica√ß√£o digital de ponto √∫nico para pequenos sensores e atuadores. </li><li>  IEC 61131-10: PLC aberto em formato de interc√¢mbio baseado em XML. </li></ul><br>  Mas n√£o vamos nos aprofundar no t√≥pico de padr√µes e, simplesmente, o controlador geralmente funciona de forma c√≠clica - pesquisando o status das entradas, o int√©rprete executando o programa de controle, definindo o status das sa√≠das, executando tarefas de manuten√ß√£o interna e voltando a pesquisar o status das entradas.  √â chato o suficiente, mas eficaz e eficiente.  Um programa de controle √© um pseudoc√≥digo criado usando um ambiente de programa√ß√£o.Em geral, esse pseudoc√≥digo √© uma sequ√™ncia com c√≥digo bin√°rio, que n√£o tem nada a ver com as linguagens de programa√ß√£o comuns.  Embora para o usu√°rio ele seja apresentado de uma forma compreens√≠vel - para o controlador, √© usada uma vis√£o completamente diferente.  Um bom exemplo √© um pequeno programa, apresentado na forma de IL, LD e na forma de codifica√ß√£o bin√°ria para o controlador (hmm, n√£o h√° nem um termo especial).  Abaixo do spoiler, um pequeno exemplo √© mostrado. <br><br><div class="spoiler">  <b class="spoiler_title">Op√ß√µes de exibi√ß√£o do programa</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/1v/zd/el/1vzdelgzkvbgvb9jdf8kzb66un8.png"><br></div></div><br>  Ent√£o, o que torna este programa √∫til?  Sim, ela n√£o faz nada - se o valor do M8010 Merker for 1, 1. ser√° gravado na sa√≠da com o endere√ßo Y377. Portanto, o mesmo √© para 0. <br>  Uma das maiores vantagens dessa implementa√ß√£o √© a capacidade de descarregar o programa da mem√≥ria do controlador, abri-lo para edi√ß√£o em um editor de uma maneira que seja compreens√≠vel para os seres humanos, compilar (esse termo √© condicional aqui) e carreg√°-lo de volta na mem√≥ria do controlador.  Al√©m disso, alguns controladores ainda salvam coment√°rios e nomes de vari√°veis. <br><br><h3>  Como programar o controlador? </h3><br>  Obviamente, √© necess√°rio software especializado.  Ap√≥s longas pesquisas e experi√™ncias, o Autoshop v3.02 da Inovance Control foi escolhido.  √â not√°vel que √© gratuito, dispon√≠vel para download gratuito e suporta controladores compat√≠veis com os controladores Mitsubishi.  E suporta o trabalho n√£o apenas atrav√©s de portas seriais, mas tamb√©m atrav√©s de Ethernet.  Link para a vers√£o usada por n√≥s, sob o spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Link para download do Yandex Disk</b> <div class="spoiler_text">  <a href="https://yadi.sk/d/nXaAKljCPvqR5Q">Autoshop v3.02</a> <br></div></div><br>  Bem, instalamos o programa e agora outra pergunta - como escrever o programa no nosso controlador?  Como trabalharemos com um dispositivo espec√≠fico, instalaremos drivers espec√≠ficos para a porta COM virtual.  Para salvar conclus√µes e simplificar, decidi usar a porta USB da placa para conex√£o.  Motoristas sob o spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Drivers no disco Yandex</b> <div class="spoiler_text">  <a href="https://yadi.sk/d/n6kmoszV3TexWj">Drivers</a> <br></div></div><br>  Depois de instalar os drivers e conectar a placa via mini-USB, voc√™ pode verificar se tudo est√° bem-sucedido com voc√™.  Para fazer isso, clique com o bot√£o direito do mouse em My Computer-Management-Device Manager-Ports (COM e LPT).  Voc√™ deve ver uma janela como em um spoiler.  O n√∫mero da porta COM no seu sistema pode variar. <br><br><div class="spoiler">  <b class="spoiler_title">Gerenciador de dispositivos</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/co/vs/o_/covso_rwe7duas9oaeg8hmqbqpi.png"><br></div></div><br>  Agora voc√™ pode selecionar Configura√ß√£o de ferramentas de comunica√ß√£o no menu AutoShop, selecione Serial na janela exibida, especifique o n√∫mero da porta e clique no bot√£o Teste.  Voc√™ deve ter uma janela como essa em um spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Conex√£o bem-sucedida ao conselho</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xf/l9/xf/xfl9xfc7ey_ktixw-tj3mh8f6cy.png"><br></div></div><br>  Mas se algo n√£o der certo para voc√™, escreva no PM ou em um coment√°rio.  Definitivamente ajudaremos. <br><br><h3>  Elementos do programa, sem os quais ser√° triste </h3><br>  A seguir, consideraremos a linguagem dos diagramas em escada, ou o chamado LD.  Vamos considerar apenas os elementos que usaremos posteriormente. <br><br><ul><li>  As entradas e sa√≠das s√£o discretas.  Eles s√£o designados como X e Y. Projetado para receber e emitir sinais discretos. </li><li>  A √°rea de mem√≥ria de M merkers M. √â poss√≠vel ativar e desativar dois estados. </li><li>  Os temporizadores s√£o designados T. Projetado para contar o tempo de 0,1 a 3276,7 segundos. </li><li>  A √°rea dos registros D. Possui uma dimens√£o de c√©lula de 16 bits, mas tamb√©m pode ser endere√ßada como uma c√©lula de 32 bits. </li></ul><br><h3>  Cavalo esf√©rico no v√°cuo, ou registros de endere√ßamento indiretos </h3><br>  Os registros de endere√ßamento indireto s√£o designados V e Z e podem ser endere√ßados de V0 a V7 e de Z0 a Z7.  Por que eles podem ser usados?  Vamos ver como eles geralmente funcionam.  Esse registro D1000V0 de apar√™ncia maluca significa que o endere√ßo da c√©lula calculado como endere√ßo D1000 mais o valor gravado no registro de endere√ßamento indireto ser√° usado.  Se houver 15, usaremos o endere√ßo da c√©lula D1015.  √â muito conveniente ao trabalhar com matrizes de dados ou com controle de tabela - basta alterar o valor do registro de √≠ndice e obtemos os valores dessas c√©lulas de mem√≥ria que foram endere√ßadas.  Por√©m, embora n√£o os apliquemos, abordaremos isso na pr√≥xima publica√ß√£o. <br><br><h3>  Um pouco sobre a visualiza√ß√£o do programa ou depura√ß√£o on-line </h3><br>  Se voc√™ √© um programador e acabou de escrever um programa, a pr√≥xima etapa √© a depura√ß√£o.  E aqui surge a quest√£o - como faz√™-lo.  Novamente, existem muitas op√ß√µes, mas vou falar sobre a que usaremos mais adiante.  O editor do ambiente de programa√ß√£o permite mostrar visualmente quais valores de bits e vari√°veis ‚Äã‚Äãest√£o atualmente na mem√≥ria do controlador pressionando um bot√£o.  Um exemplo muito revelador ser√°: abaixo dos spoilers, a exibi√ß√£o offline e online do programa no editor. <br><br><div class="spoiler">  <b class="spoiler_title">Bot√£o para mudar para o modo de visualiza√ß√£o vari√°vel</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5-/nr/8z/5-nr8zfe8q1j1zcmwlmoxg5kfw0.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tipo de programa no modo de visualiza√ß√£o dos valores das vari√°veis</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/-_/ox/gx/-_oxgxsuqn4x90y1d8yqgndcbjq.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tipo de programa no modo de edi√ß√£o</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pl/f9/tj/plf9tjq0u2vx6tnufkrlao_klhu.png"><br></div></div><br>  Um pouco mais sobre os processos que ocorrem quando voc√™ clica no bot√£o Online.  O programa compila rapidamente uma lista de vari√°veis ‚Äã‚Äãvis√≠veis e, ap√≥s a conclus√£o, grava-a em um buffer do controlador espec√≠fico.  Depois disso, o controlador prepara os dados dessa lista e os coloca em outro buffer.  O programa l√™ os valores desse buffer e os exibe como valores no diagrama de simula√ß√£o.  Se voc√™ rolar um pequeno programa na janela do visor e alterar as vari√°veis ‚Äã‚Äãvis√≠veis, este ciclo ser√° repetido novamente ... <br><br><h3>  Quem chama Hamlet, ou no palco BluePill x405 </h3><br>  Voc√™ notou que o mercado n√£o se depara com placas-m√£e simples como um tablet azul, mas equipadas com processadores como F405 e superior?  Pessoalmente, me deparei apenas com as pedras F401, mas esse √© um n√≠vel um pouco diferente ... sou f√°cil de escalar e, para meus experimentos, sem pensar duas vezes, fiz um pagamento no bom e velho P-CAD 2006 e pedi aos chineses em um dos sites de pedidos r√°pidos.  Claro, na cor √© uma pastilha verde, mas em termos de significado, decidi deixar o nome BluePill, mas indicando que j√° √© x405.  O resultado nos spoilers √© uma foto da placa BluePill x405. <br><br><div class="spoiler">  <b class="spoiler_title">Vista superior</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/kv/ha/hs/kvhahsy1nncrjqogvfafgr1jn10.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Vista inferior</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/5z/ar/ts/5zartsne1u9zbrijwlz6txgknp8.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Conceito e gerber no github</b> <div class="spoiler_text">  <a href="https://github.com/Greeds74/BluePill-x405/tree/master/Habr">Github</a> <br></div></div><br>  Um pouco sobre por que esse f√≥rum √© t√£o marcante?  Afinal, houve apenas milhares de tentativas para criar clones de bluepill!  Mas a diferen√ßa √© esta: anexo o firmware a esta placa, que a transformar√° em um kernel que executa um programa compat√≠vel com os controladores industriais da Mitsubishi em um sistema de comando.  Esse milagre √© calculado em 16 entradas, 16 sa√≠das, 2 entradas anal√≥gicas, 3 UART com suporte DE para RS485, 1 barramento mestre de um fio.  O UART pode funcionar como um barramento mestre modbus RTU e como escravo.  E eles podem trabalhar de forma completamente independente. <br>  Mas isso n√£o √© tudo - se voc√™ conectar uma bateria de 3V ao pino do VBAT, n√£o apenas o rel√≥gio, mas tamb√©m os temporizadores, contadores, merkers e os primeiros 1000 registros de uso geral D. manter√£o seus valores e existem 8000 registros. <br><br>  Antecipando as perguntas, direi imediatamente - sim, o software √© baseado em um sistema operacional em tempo real.  Sim, o DMA √© usado sempre que poss√≠vel.  Esses recursos permitem trabalhar sem altera√ß√µes significativas no tempo de ciclo com altas cargas de comunica√ß√£o.  Esta vers√£o √© a segunda revis√£o, revisada e suplementada. <br><br>  Esta placa pode ser totalmente programada pelo GX FXDeveloper e IEC Developer e GX Works. <br><br><h3>  O destino da bomba e dois tanques </h3><br>  Vamos agora resolver esse problema - especialmente porque todas as ferramentas para isso est√£o dispon√≠veis.  Para n√£o me arrastar muito, escrevi um programa, dividi-o em partes (as chamadas redes ou redes de trabalho) e mostrarei cada um deles aqui e apresentarei coment√°rios. <br><br><div class="spoiler">  <b class="spoiler_title">Rede 1 - primeira execu√ß√£o do programa</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mt/se/6l/mtse6lkxocvzicroixvaxkp986y.png"><br></div></div><br>  O registrador D1000 armazena o tempo necess√°rio para suprimir o retorno do contato.  De fato, isso j√° est√° no programa - mas eu quero mostr√°-lo mais claramente.  O registro D1001 √© respons√°vel pelo tempo de prote√ß√£o da bomba.  Nele escrevemos 15.000 ou 1.500 segundos.  Em seguida, temos uma cadeia de redefini√ß√£o de backup - se algo der errado, voc√™ pode enviar o sinal 1 para entrar no X14 e reiniciar a placa.  Nesse caso, 0 √© gravado nos registros D0 e D1, e os comerciantes M98 e M99 s√£o redefinidos. <br><br><div class="spoiler">  <b class="spoiler_title">Rede 2 - processamento do sinal de entrada</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/q2/c2/0r/q2c20rgbj45frsx31p4sisxv_tg.png"><br></div></div><br>  Aqui, com a ajuda de temporizadores, nos livramos do ressalto dos contatos.  Para fazer isso, use um atraso de 200 milissegundos.  Para garantir que, no futuro programa, ao alterar o endere√ßo de entrada do contato, n√£o seja necess√°rio reescrever muitas cadeias, eu uso merkers intermedi√°rios (por exemplo, M102).  Tamb√©m √© digno de nota que o comerciante do sistema M8003 seja usado aqui - ele ser√° ativado ap√≥s o primeiro ciclo de execu√ß√£o do programa.  Mas o M8002 Merker est√° ativo apenas no primeiro ciclo do programa, e isso pode e deve ser usado para definir os valores iniciais. <br><br><div class="spoiler">  <b class="spoiler_title">Rede de abastecimento de 3 tanques 1.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vr/cp/h4/vrcph4mhgoiir-hgrghd92tpiew.png"><br></div></div><br>  O enchimento do tanque 1 √© completamente id√™ntico ao enchimento do tanque 2, com exce√ß√£o dos endere√ßos.  O desenho n√£o se encaixou nem um pouco - mas √© melhor voc√™ olhar apenas abrindo o projeto.  O que √© not√°vel nessa unidade de controle?  A presen√ßa de prote√ß√µes e impasses que permitem mecanismos de partida e parada sem choques.  Por exemplo, ap√≥s abrir a v√°lvula 1, somente ap√≥s 700 ms ser√° emitido um comando para iniciar o motor de partida, que liga a bomba. <br><br>  O gerenciamento aqui n√£o fornece o modo manual.  Al√©m disso, prote√ß√£o contra funcionamento a seco e prote√ß√£o contra opera√ß√£o da bomba muito longa s√£o implementadas. <br><br><div class="spoiler">  <b class="spoiler_title">Rede 5-6 - Gerenciamento de sa√≠da</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sw/oi/ta/swoitandloflperaamkjr9yysak.png"><br></div></div><br>  E aqui controlamos as sa√≠das de acordo com os bloqueios. <br><br>  Das tarefas, apenas a conex√£o do intervalo de prote√ß√£o de 30 minutos antes de reiniciar permaneceu n√£o realizada.  Devo dizer imediatamente que nesta vers√£o apenas as entradas X0-X3 e a sa√≠da Y0-Y3 s√£o implementadas, o que √© suficiente para testar o material deste artigo.  A liga√ß√£o √© PA4-X0, PA5-X1, PA6-X2, PA7-X3 e PB4-Y0, PB5-Y1, PB6-Y2, PB7-Y3. <br><br><h3>  Velocidade do ciclo do programa - m√©todos de medi√ß√£o do av√¥ </h3><br>  Quando nos fazemos essa pergunta, imediatamente nos vem √† mente fazer isso - escrever para o controlador um programa muito grande com um certo n√∫mero de elementos id√™nticos, obter o tempo de execu√ß√£o e o tempo de execu√ß√£o de um comando.  √â dito - feito, sob o programa spoiler e em nome do tempo de execu√ß√£o do spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">7995 etapas - 2,6 milissegundos</b> <div class="spoiler_text">  <a href="">8000 passos</a> <br></div></div><br>  Aqui, cada etapa √© um comando e obtemos 2,6 / 7995 = 0,325 microssegundos.  N√£o √© muito r√°pido, mas n√£o √© ruim. <br><br><h3>  FPU - ser ou n√£o ser? </h3><br>  Agora vamos determinar com que rapidez as instru√ß√µes de ponto flutuante funcionam em nosso firmware.  Existem dois firmwares, um usando o FPU interno e outro com emula√ß√£o de software.  O programa abaixo: <br><br><div class="spoiler">  <b class="spoiler_title">Programa para calcular o tempo de execu√ß√£o de uma instru√ß√£o</b> <div class="spoiler_text">  <a href="">Programa de etapas de 8000 pontos flutuantes</a> <br></div></div><br>  O firmware abaixo est√° sob o spoiler e eles n√£o t√™m restri√ß√µes <br><br><div class="spoiler">  <b class="spoiler_title">Firmware dois</b> <div class="spoiler_text">  <a href="https://github.com/Greeds74/BluePill-x405/tree/master/Habr_software">Firmware</a> <br></div></div><br>  Ao usar uma FPU de hardware, o tempo de execu√ß√£o do programa √© de 1,8 ms ou 1,8 / 600 = 0,003 ms ou 3 microssegundos. <br><br>  Agora substitua o firmware - use emula√ß√£o de software.  O resultado j√° √© diferente - 2,5 ms ou 2,5 / 600 = 0,0041 ms ou 4,1 microssegundos.  Nada mal, mas a diferen√ßa √© bastante percept√≠vel. <br><br><h3>  Conclus√£o </h3><br>  Apesar do grande volume do artigo, ainda h√° muitos materiais que seriam bons para cobrir.  Portanto, se este artigo for do seu interesse, ele ser√° seguido por outro.  Mas eu gostaria de encontrar pessoas que pensam da mesma forma que desejam se unir √† industrial e dom√©stica com apenas um prop√≥sito - para que essas ferramentas sejam acess√≠veis a um simples leigo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477478/">https://habr.com/ru/post/pt477478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477464/index.html">Como lancei o Docker dentro do Docker e o que aconteceu</a></li>
<li><a href="../pt477468/index.html">Uma excelente vis√£o geral do termovisor Seek Thermal SHOT: inspe√ß√£o t√©rmica de instala√ß√µes residenciais</a></li>
<li><a href="../pt477470/index.html">Sobre o papel das tarefas de teste na vida do desenvolvedor</a></li>
<li><a href="../pt477474/index.html">Vida e costumes dos sonhadores</a></li>
<li><a href="../pt477476/index.html">Programa√ß√£o heterog√™nea e OneAPI Toolkit. Fa√ßa uma pergunta a um especialista da Intel</a></li>
<li><a href="../pt477484/index.html">O que eles acharam dos programadores</a></li>
<li><a href="../pt477488/index.html">Neungers: Tempero deve fluir</a></li>
<li><a href="../pt477490/index.html">Parte 2 da rob√≥tica da cozinha ou um outro avatar de Blynk</a></li>
<li><a href="../pt477492/index.html">O que permanecer√° na sala do servidor?</a></li>
<li><a href="../pt477494/index.html">1. An√°lise de malware usando o Check Point forense. Rede de jateamento</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>