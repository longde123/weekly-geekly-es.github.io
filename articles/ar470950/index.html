<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ผ๐ผ ๐ก ๐ bear_hug: ุงูุฃูุนุงุจ ูู ูู ASCII ูู Python3.6 + ๐ป ๐ ๐จ๐ปโ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุงููุณุจุฉ ูุฃูุนุงุจู ูู ูู ASCII ุ ูุชุจุช ููุชุจุฉ bear_hug ูุน ูุงุฆูุฉ ุงูุชุธุงุฑ ููุฃุญุฏุงุซ ุ ููุฌููุนุฉ ูู ุงูุฃุฏูุงุช ุงููุตุบุฑุฉ ุ ูุฏุนู ECS ุ ูุฃุดูุงุก ุตุบูุฑุฉ ูููุฏุฉ ุฃุฎุฑู. ูู ูุฐู ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>bear_hug: ุงูุฃูุนุงุจ ูู ูู ASCII ูู Python3.6 +</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470950/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/b0/zu/vj/b0zuvjk4xdzcznbys9oslxl_veo.png"><br><br>  ุจุงููุณุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฃูุนุงุจู</a> ูู ูู ASCII ุ ูุชุจุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุจุฉ bear_hug</a> ูุน ูุงุฆูุฉ ุงูุชุธุงุฑ ููุฃุญุฏุงุซ ุ ููุฌููุนุฉ ูู ุงูุฃุฏูุงุช ุงููุตุบุฑุฉ ุ ูุฏุนู ECS ุ ูุฃุดูุงุก ุตุบูุฑุฉ ูููุฏุฉ ุฃุฎุฑู.  ูู ูุฐู ุงูููุงูุฉ ุณูู ูุฑู ููููุฉ ุงุณุชุฎุฏุงููุง ูุตูุน ุงูุญุฏ ุงูุฃุฏูู ูู ูุนุจุฉ ุงูุนูู. <br><a name="habracut"></a><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูุตู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃูุง ุงููุทูุฑ ุงููุญูุฏ ููููุชุจุฉ ุ ูุฐูู ูููู ุฃู ุฃููู ูุชุญูุฒูุง. </li><li style=";text-align:right;direction:rtl">  bear_hug ุนุจุงุฑุฉ ุนู ุบูุงู ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุฑุชููุชุฑูููุงู ูู ุงูุฃุณุงุณ</a> ุ ูุฐูู ูู ุชููู ููุงู ุนูููุงุช ููุฎูุถุฉ ุงููุณุชูู ูุณุจููุง ุจุงุณุชุฎุฏุงู ุงูุญุฑูู ุงูุฑุณูููุฉ. </li><li style=";text-align:right;direction:rtl">  ุชูุฌุฏ ูุธุงุฆู ููุงุซูุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">clubandwich</a> ุ ููููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุณุชุฎุฏููุง</a> ููุง ูููููู ููุงุฑูุชูุง. </li></ul></div></div><br>  ุชุญุช ุบุทุงุก ูุญุฑู ุงูุฃูุฑุงุต ูู bear_hug ููุฌุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bearlibterminal</a> ุ ููุชุจุฉ SDL ูุฅูุดุงุก ูุงูุฐุฉ ูุญุฏุฉ ุงูุชุญูู ุงูุฒุงุฆูุฉ.  ููุฐุง ูู ุ ูู TTY ุงูููู ุ ูุซู ุจุนุถ ncurses ุ ูุฅูู ูู ููุฌุญ.  ููู ุงูุตูุฑุฉ ูู ููุณูุง ูู ูุธุงู Linux ุ ุนูู ูุธุงู Windows ุ ููุง ุชุนุชูุฏ ุนูู ุฅุนุฏุงุฏุงุช ูุญุทุฉ ุงููุณุชุฎุฏู.  ูุฐุง ููู ุ ุฎุงุตุฉ ุจุงููุณุจุฉ ููุฃูุนุงุจ ุ ูุฃูู ุนูุฏ ุชุบููุฑ ุงูุฎุท ASCII-art ุ ูุฏ ูุชุญูู ุงููู ุฅูู ูุง ููู: <br><br><img src="https://habrastorage.org/webt/ys/rh/6f/ysrh6fhay5u9slnpwvqn53is1ek.png"><br>  <i>ููุณ ุงูุฑุณู ูู ุดููู ุงูุฃุตูู ูุจุนุฏ ูุณุฎ ูุตู ูุจุฑุงูุฌ ูุฎุชููุฉ</i> <br><br>  ุจุงูุทุจุน ุ ูุงูุช ุงูููุชุจุฉ ููุชูุจุฉ ููุดุงุฑูุน ูุงุณุนุฉ ุงููุทุงู ูุณุจูุง.  ูููู ุญุชู ูุง ูุตุฑู ุงูุชุจุงูู ุชุตููู ุงููุนุจุฉ ูููุฏุณุชูุง ุ ุณููุดุฆ ูู ูุฐุง ุงูููุงู ุดูุฆูุง ุจุณูุทูุง.  ูุดุฑูุน ูุฏุชู ูููุฉ ูุงุญุฏุฉ ุ ููุฌุฏ ููู ุดูุก ูุฅุธูุงุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ููููุชุจุฉ.  ููู - ุงุณุชูุณุงุฎ ูุจุณุท ูุชูู ุงูุฏุจุงุจุงุช ููุณูุง ูุน ุฏุงูุฏู (ููู ุฃูุถุง ูุฏููุฉ ุงููุนุฑูุฉ).  ุณูููู ููุงู ุฏุจุงุจุฉ ููุงุนุจ ุ ูุฏุจุงุจุงุช ุงูุนุฏู ุ ูุงูุฌุฏุฑุงู ุงููุงุจูุฉ ููุชุฏููุฑ ุ ูุงูุตูุช ูุณุฌู.  ููู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ูุงููุณุชููุงุช ูุงูููุงูุขุช ุงููุญุฏุฏุฉ ูู ุชููู.  ููุณ ูุฃูู ุณูููู ูู ุงููุณุชุญูู ุฅุถุงูุชูู ุ ููู ูุฃู ูุฐุง ุงููุดุฑูุน ููุณ ุฃูุซุฑ ูู ุนุงูู ูุงูููุฑ. <br><br><img src="https://habrastorage.org/webt/8k/e7/my/8ke7mymnrejpei7isjbxtbwvyjs.png"><br>  <i>ุณูููู ููุงู gameover ุ ูููู ูู ูููู ููุงู ูุตุฑ.</i>  <i>ูุฃู ุงูุญูุงุฉ ุฃูู.</i> <br><br>  ุฌููุน ุงูููุงุฏ ุงููุณุชุฎุฏูุฉ ูู ุงูููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุฌูุซุจ</a> .  ุงูููุชุจุฉ ููุณูุง ููุฌูุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃูุถูุง</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู PyPI</a> (ุจููุฌุจ ุชุฑุฎูุต MIT). <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุงูุฃุตูู.  ูู ุฃุฌู ุฑุณู ูู ASCII ุ ุฃุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">REXpaint</a> ูู Josh Ge (ุงููุนุฑูู ุฃูุถูุง ุจุงุณู ููุฒุฑุงุชู) ุ ูุทูููุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุจูุบู</a> ุงูุฎูุงู ุงูุนููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Cogmind</a> .  ุงููุญุฑุฑ ูุฌุงูู ุ ุฑุบู ุฃูู ููุณ ููุชูุญ ุงููุตุฏุฑ.  ุงููุณุฎุฉ ุงูุฑุณููุฉ ูุฎุตุตุฉ ููุธุงู ุงูุชุดุบูู Windows ููุท ุ ูููู ูู ุดูุก ูุนูู ุจุดูู ุฌูุฏ ุชุญุช ุงููุจูุฐ.  ุงููุงุฌูุฉ ูุงุถุญุฉ ููุฑูุญุฉ ููุบุงูุฉ: <br><br><img src="https://habrastorage.org/webt/jf/x-/bi/jfx-bigu3sedblmkuspxh_pd4d4.png"><br><br>  ูููู ุจุญูุธ .xp ุจุงูุชูุณูู ุงูุซูุงุฆู ุงููุญูู ููุณุฎู ูู <code>/path/to/rexpaint/images</code> ุฅูู ุงููุฌูุฏ ุจุงุณุชุฎุฏุงู ุงููุนุจุฉ ุงููุณุชูุจููุฉ.  ูู ุญูุซ ุงููุจุฏุฃ ุ ูุชู ุฏุนู ุชุญููู ุงูุตูุฑ ูู ูููุงุช .txt ุฃูุถูุง ุ ููู ูู ุงููุงุถุญ ุฃูู ูู ุงููุณุชุญูู ุญูุธ ุฃููุงู ุงูุฃุญุฑู ุงููุฑุฏูุฉ ูู ููู ูุตู.  ูุนู ุ ูุชุญุฑูุฑ ูู ASCII ูู ุฏูุชุฑ ููุงุญุธุงุช ููุณ ููุงุณุจูุง ูู ุดุฎุตููุง.  ููู ูุง ูุชู ุชุดููุฑ ุฅุญุฏุงุซูุงุช ูุญุฌู ูู ุนูุตุฑ ุ ูุชู ุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช ูู ููู JSON ูููุตู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">battlecity.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">[ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"player_r"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"x"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"y"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"xsize"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ysize"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"player_l"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"x"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"y"</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">"xsize"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ysize"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> }, ... ]</code> </pre> <br></div></div><br>  ูุจุฏู ุชุญุช ุงูุชุฑุงุฎูุต ุงููุฌุงููุฉ ุชุญููู ูู ุงูุฅูุชุฑูุช.  ุญุชู ุงูุขู ุ ูุชู ุฏุนู .wav ููุท.  ูุฐุง ูู ุดูุก ูุน ุงูุฃุตูู ุ ููููู ุงูุจุฏุก ูู ุงูุชุฑููุฒ.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ุชููุฆุฉ ุงููุญุทุฉ ููุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงูุญุฏุซ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">game.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  terminal = BearTerminal(font_path='cp437_12x12.png', size='91x60', title='AsciiCity', filter=['keyboard', 'mouse']) #   dispatcher = BearEventDispatcher() # ,         loop = BearLoop(terminal, dispatcher)</span></span></code> </pre> <br></div></div><br>  ุงููุญุทุฉ ูู ุงููุงูุฐุฉ ุงููุนููุฉ ููุนุจุฉ.  ููููู ูุถุน ุนูุงุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ุนูููุง ุ ููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุญุฏุงุซ ุงูุฅุฏุฎุงู</a> ุญุณุจ ุงูุถุฑูุฑุฉ.  ูููุงุชูุญ ุนูุฏ ุฅูุดุงุก ูุญุทุฉ ุ ููููู ุงุณุชุฎุฏุงู ุฌููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูุงุฑุงุช ุงููุญุทุฉ ุงูุทุฑููุฉ bearlibterminal</a> .  ูู ูุฐู ุงูุญุงูุฉ ุ ูููุง ุจุชุนููู ุงูุฎุท ูุญุฌู ุงููุงูุฐุฉ (ุจุงูุฃุญุฑู) ูุนููุงู ุงููุงูุฐุฉ ูุทุฑู ุงูุฅุฏุฎุงู ุงูุชู ุชูููุง. <br><br>  ุจุงููุณุจุฉ ููุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฃุญุฏุงุซ ุ ูุฅู ูุฏููุง ูุงุฌูุฉ ุจุณูุทุฉ ููุบุงูุฉ: ูุถูู dispatcher.add_event (ุงูุญุฏุซ) ุงูุญุฏุซ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ููุชูุญ ูู dispatcher.register_listener (ูุณุชูุน ุ event_types) ุงูุงุดุชุฑุงู ููู.  ูุฌุจ ุฃู ูููู ูุฏู ุงูููููููุน (ุนูู ุณุจูู ุงููุซุงู ุ ุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ุฃู ุนูุตุฑ) ุฑุฏ ุงุชุตุงู on_event ุ ูุงูุฐู ูุฃุฎุฐ ุญุฏุซูุง ููุณูุทุฉ ูุงุญุฏุฉ ููุง ููุฑุฌุน ุฃู ุดูุก ุฃู ููุฑุฌุน ุญุฏุซูุง ุขุฎุฑ ุฃู ูุฌููุนุฉ ูู ุงูุฃุญุฏุงุซ.  ุงูุญุฏุซ ููุณู ูุชููู ูู ุงูููุน ูุงููููุฉ.  ุงูููุน ููุง ููุณ ุจูุนูู str ุฃู int ุ ูููู ุจูุนูู "ุงูุชููุน" ุ ุนูู ุณุจูู ุงููุซุงู ุ "key_down" ุฃู "tick".  ูุง ุชูุจู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุณูู ุงูุฃุญุฏุงุซ ูู ุงูุฃููุงุน ุงููุนุฑููุฉ ููุง (ุงููุถููุฉ ุฃู ุงูุชู ุชู ุฅูุดุงุคูุง ูู ูุจู ุงููุณุชุฎุฏู) ูุชุฑุณููุง ุฅูู on_event ุฌููุน ุฃููุฆู ุงููุดุชุฑููู ูู ูุฐุง ุงูููุน.  ูุง ูุชุญูู ูู ุงูููู ุจุฃู ุทุฑููุฉ ุ ูููู ููุงู ุงุตุทูุงุญุงุช ุฏุงุฎู ุงูููุชุจุฉ ุญูู ุงููููุฉ ุงูุตุงูุญุฉ ููู ููุน ูู ุงูุฃุญุฏุงุซ. <br><br>  ุฃููุงู ุ ูุญู ูู ุทุงุจูุฑ ุงุซููู ูู ุงููุณุชูุนูู.  ูุฐู ูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ูููุงุฆูุงุช ุงูุชู ูููููุง ุงูุงุดุชุฑุงู ูู ุงูุฃุญุฏุงุซ ุ ูููููุง ููุณุช ุนูุงุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ุฃู ููููุงุช.  ูู ุญูุซ ุงููุจุฏุฃ ุ ููุณ ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงููุง ุ ุทุงููุง ุฃู ุงููููุน ูุงู ูุฏูู ุทุฑููุฉ on_event. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุณุชูุนูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       dispatcher.register_listener(ClosingListener(), ['misc_input', 'tick']) #       dispatcher.register_listener(EntityTracker(), ['ecs_create', 'ecs_destroy']) #   jukebox = SoundListener({'shot': 'shot.wav', 'explosion': 'explosion.wav'}) # https://freesound.org/people/EMSIarma/sounds/108852/ # https://freesound.org/people/FlashTrauma/sounds/398283/ dispatcher.register_listener(jukebox, 'play_sound')</span></span></code> </pre> <br></div></div><br>  ูุงุฆูุฉ ูุงููุฉ ูู ุฃููุงุน ุงูุฃุญุฏุงุซ ุงููุถููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงููุซุงุฆู</a> .  ูู ุงูุณูู ุฃู ูุฑู ุฃู ููุงู ุฃุญุฏุงุซ ูุฅูุดุงุก ูุชุฏููุฑ ุงูููุงูุงุช ุ ูููู ููุณ ููุฃุถุฑุงุฑ.  ูุธุฑูุง ูุฃู ูุฏููุง ุฃุดูุงุก ูุง ุชููุตู ุนู ุทููุฉ ูุงุญุฏุฉ (ุฌุฏุฑุงู ุงููุงุนุจ ูุฎุฒุงูุชู) ุ ูุฅููุง ุณููุดุฆูุง: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุน ุงูุญุฏุซ ุชุณุฌูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ,    #   dispatcher.register_event_type('ac_damage') #       logger = LoggingListener(sys.stderr) dispatcher.register_listener(logger, ['ac_damage', 'play_sound'])</span></span></code> </pre> <br></div></div><br>  ููุงูู ุนูู ุฃูู ุ ููููุฉ ุ ุณูููู ููุฐุง ุงูุญุฏุซ ุชูููุญ ูู ูุนุฑูู ุงูููุงู ุงูุฐู ุชุนุฑุถ ููุชูู ุ ููููุฉ ุงูุถุฑุฑ.  LoggingListener ูู ูุฌุฑุฏ ุฃุฏุงุฉ ุชุตุญูุญ ูุทุจุงุนุฉ ุฌููุน ุงูุฃุญุฏุงุซ ุงููุณุชููุฉ ุฃูููุง ูููููู ุ ูู ูุฐู ุงูุญุงูุฉ ูู stderr.  ูู ูุฐู ุงูุญุงูุฉ ุ ุฃุฑุฏุช ุงูุชุฃูุฏ ูู ุฃู ุงูุชูู ููุฑ ุจุดูู ุตุญูุญ ุ ูุฃู ุงูุตูุช ูุทููุจ ุฏุงุฆููุง ุนูุฏูุง ููุจุบู. <br><br>  ูุน ุงููุณุชูุนูู ุงูุขู ุ ููููู ุฅุถุงูุฉ ุงููุทุนุฉ ุงูุฃููู.  ูุฏููุง ูุฐุง ุงูููุนุจ ูุฆุฉ ECSLayout.  ูุฐุง ุชุฎุทูุท ุ ููููู ูุถุน ุนูุงุตุฑ ูุงุฌูุฉ ุชุนุงูู ูุณุชุฎุฏู ุนูู ุงูููุงูุงุช ูููููุง ุงุณุชุฌุงุจุฉ ูุฃุญุฏุงุซ ecs_move ุ ููู ุงูููุช ููุณู ููุธุฑ ูู ุงูุชุตุงุฏูุงุช.  ูุซู ูุนุธู ุงูุชุทุจููุงุช ุงููุตุบุฑุฉ ุ ูุญุชูู ุนูู ูุณูุทูู ูุทููุจูู: ูุงุฆูุฉ ูุชุฏุงุฎูุฉ ูู ุงูุฃุญุฑู (ุฑุจูุง ุชููู ุฎุงููุฉ - ูุณุงุญุฉ ุฃู ูุง ุดูุก) ููุงุฆูุฉ ูุชุฏุงุฎูุฉ ูู ุงูุฃููุงู ููู ุญุฑู.  ูุชู ูุจูู ุงูุฃููุงู ุงููุณูุงุฉ ูุฃููุงู ุ RGB ุจุงูุชูุณูู `0xAARRGGBB` (ุฃู` 0xARGB` ุ `0xRGB` ุ` 0xRRGGBB`) ููู ุงูุชูุณูู '#fff'.  ูุฌุจ ุฃู ุชุชุทุงุจู ุฃุญุฌุงู ููุชุง ุงููุงุฆูุชูู ุ  ุฎูุงู ุฐูู ุ ูุชู ุทุฑุญ ุงุณุชุซูุงุก. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุทุนุฉ ุงูุฃููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   .  8460,   9160. # 7         chars = [[' ' for x in range(84)] for y in range(60)] colors = copy_shape(chars, 'gray') layout = ECSLayout(chars, colors) # 'all' -  ,      dispatcher.register_listener(layout, 'all')</span></span></code> </pre> <br></div></div><br>  ูุธุฑูุง ูุฃู ูุฏููุง ุงูุขู ูุง ูุถุนู ูู ุงููุนุจุฉ ุ ูููููุง ุงูุจุฏุก ูู ุฅูุดุงุก ููุงูุงุช.  ูุชู ููู ูู ููุฏ ุงูููุงูุงุช ูุงูููููุงุช ุฅูู ููู ูููุตู.  ุฃุจุณุทูุง ูู ุฌุฏุงุฑ ูู ุงูุทูุจ ุงููุฏูุฑ.  ุฅููุง ุชุนุฑู ููู ุชููู ูู ููุงู ูุนูู ุ ูุชุนุฑุถ ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฎุงุต ุจูุง ุ ูุชุนูู ููุงุฆู ููุชุตุงุฏู ูุชุชููู ุงูุถุฑุฑ.  ุจุนุฏ ุฃุถุฑุงุฑ ูุงููุฉ ุ ูุฎุชูู ุงูุฌุฏุงุฑ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">entities.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_wall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dispatcher, atlas, entity_id, x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   wall = Entity(entity_id) #  wall.add_component(PositionComponent(dispatcher, x, y)) wall.add_component(CollisionComponent(dispatcher)) wall.add_component(PassingComponent(dispatcher)) wall.add_component(DestructorComponent(dispatcher)) #     ,      #    -  /   images_dict = {'wall_3': atlas.get_element('wall_3'), 'wall_2': atlas.get_element('wall_2'), 'wall_1': atlas.get_element('wall_1')} wall.add_component(SwitchWidgetComponent(dispatcher, SwitchingWidget(images_dict=images_dict, initial_image='wall_3'))) wall.add_component(VisualDamageHealthComponent(dispatcher, hitpoints=3, widgets_dict={3: 'wall_3', 2: 'wall_2', 1: 'wall_1'})) #     dispatcher.add_event(BearEvent('ecs_create', wall)) dispatcher.add_event(BearEvent('ecs_add', (wall.id, wall.position.x, wall.position.y)))</span></span></code> </pre> <br></div></div><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุชู ุฅูุดุงุก ูุงุฆู ุงูููุงู ููุณู.  ูุญุชูู ููุท ุนูู ุงุณู (ูุงูุฐู ูุฌุจ ุฃู ูููู ูุฑูุฏูุง) ููุฌููุนุฉ ูู ุงูููููุงุช.  ูููู ุฅูุง ููููุง ุฏูุนุฉ ูุงุญุฏุฉ ุนูุฏ ุงูุฅูุดุงุก ุ ุฃู ุ ููุง ูู ุงูุญุงู ููุง ุ ูุชู ุฅุถุงูุชูุง ูุฑุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ.  ุซู ูุชู ุฅูุดุงุก ุฌููุน ุงูููููุงุช ุงููุงุฒูุฉ.  ูุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ุ ูุชู ุงุณุชุฎุฏุงู SwitchWidget ุ ูุงูุฐู ูุญุชูู ุนูู ุงูุนุฏูุฏ ูู ุงูุฑุณููุงุช ูู ููุณ ุงูุญุฌู ููููู ุชุบููุฑูุง ุญุณุจ ุงูุฃูุฑ.  ุจุงูููุงุณุจุฉ ุ ูุชู ุชุญููู ุงูุฑุณููุงุช ูู ุงูุฃุทูุณ ุนูุฏ ุฅูุดุงุก ุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู.  ูุฃุฎูุฑุงู ุ ูุฅู ุงูุฅุนูุงู ุนู ุฅูุดุงุก ุงูููุงู ูุชุฑุชูุจ ุฑุณูู ุนูู ุงูุฅุญุฏุงุซูุงุช ุงูุถุฑูุฑูุฉ ุ ูุฏุฎู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br>  ูู ุงูููููุงุช ุบูุฑ ุงููุถููุฉ ุ ููุงู ุตุญุฉ ููุท.  ููุช ุจุฅูุดุงุก ุงููุฆุฉ ุงูุตุญูุฉ "ูููู ุงูุตุญุฉ" ูุฑุซุช ููู "ุนูุตุฑ ุชุบููุฑ ุนูุตุฑ ุงูุตุญุฉ" (ูุฅุธูุงุฑ ุงูุฌุฏุงุฑ ุนูู ุญุงูุชู ููู ุนุฏุฉ ูุฑุงุญู ูู ุงูุชุฏููุฑ). <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฆุฉ HealthComponent</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HealthComponent</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Component)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, hitpoints=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(*args, name=<span class="hljs-string"><span class="hljs-string">'health'</span></span>, **kwargs) self.dispatcher.register_listener(self, <span class="hljs-string"><span class="hljs-string">'ac_damage'</span></span>) self._hitpoints = hitpoints <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_event</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> event.event_type == <span class="hljs-string"><span class="hljs-string">'ac_damage'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> event.event_value[<span class="hljs-number"><span class="hljs-number">0</span></span>] == self.owner.id: self.hitpoints -= event.event_value[<span class="hljs-number"><span class="hljs-number">1</span></span>] @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hitpoints</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self._hitpoints @hitpoints.setter <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hitpoints</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, value)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> isinstance(value, int): <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> BearECSException( <span class="hljs-string"><span class="hljs-string">f'Attempting to set hitpoints of </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.owner.id}</span></span></span><span class="hljs-string"> to non-integer </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{value}</span></span></span><span class="hljs-string">'</span></span>) self._hitpoints = value <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self._hitpoints &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>: self._hitpoints = <span class="hljs-number"><span class="hljs-number">0</span></span> self.process_hitpoint_update() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_hitpoint_update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Should be overridden by child classes. """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> NotImplementedError(<span class="hljs-string"><span class="hljs-string">'HP update processing should be overridden'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__repr__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#           return dumps({'class': self.__class__.__name__, 'hitpoints': self.hitpoints})</span></span></code> </pre> <br></div></div><br>  ุนูุฏ ุฅูุดุงุก ูููู ุ ูุชู ุชูุฑูุฑ ููุชุงุญ "ุงูุงุณู" ุฅูู super () .__ init__.  ุนูุฏูุง ุชุชู ุฅุถุงูุฉ ูููู ุฅูู ููุงู ุ ุชุญุช ุงูุงุณู ูู ูุฐุง ุงูููุชุงุญ ุ ุณุชุชู ุฅุถุงูุชู ุฅูู __dict__ ููููุงู ููููู ุงููุตูู ุฅููู ูู ุฎูุงู entity_object.health.  ุจุงูุฅุถุงูุฉ ุฅูู ุฑุงุญุฉ ุงููุงุฌูุฉ ุ ูุนุฏ ูุฐุง ุงูููุฌ ุฌูุฏูุง ูุฃูู ูุญุธุฑ ุฅุตุฏุงุฑ ููุงูุงุช ูู ุนุฏุฉ ููููุงุช ูุชุฌุงูุณุฉ.  ูุญูููุฉ ุฃูู ุชู ุชุฑููุฒูุง ุฏุงุฎู ุงููููู ูุง ุชุณูุญ ูู ุจุฅุฏุฎุงู ุฎุทุฃ ุ ุนูู ุณุจูู ุงููุซุงู ุ WidgetComponent ูู ูุชุญุฉ ุงููููู ุงูุตุญุฉ.  ููุฑ ุงูุฅูุดุงุก ุ ูุดุชุฑู ุงููููู ูู ูุฆุงุช ุงูุฃุญุฏุงุซ ุงูุชู ุชููู ุ ูู ูุฐู ุงูุญุงูุฉ ac_damage.  ุจุนุฏ ุชููู ูุซู ูุฐุง ุงูุญุฏุซ ุ ุณุชุชุญูู ุทุฑููุฉ on_event ููุง ุฅุฐุง ูุงู ุงูุฃูุฑ ูุชุนูู ุจูุงูููุง ููุฏุฉ ุณุงุนุฉ.  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูููู ุจุทุฑุญ ุงููููุฉ ุงููุทููุจุฉ ูู ููุงุท ุงูุฏุฎูู ูุณุญุจ ุฑุฏ ุงูุงุชุตุงู ูุชุบููุฑ ุงูุญุงูุฉ ุงูุตุญูุฉ ุ ูุงููุฆุฉ ุงูุฃุณุงุณูุฉ ูุฌุฑุฏุฉ.  ููุงู ุฃูุถูุง ุทุฑููุฉ __repr__ ุ ูุงูุชู ุชูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุณูุณู ูู JSON</a> (ุนูู ุณุจูู ุงููุซุงู ุ ููุญูุธ).  ููุณ ูู ุงูุถุฑูุฑู ุฅุถุงูุชู ุ ููู ุฌููุน ุงูููููุงุช ุงููุฏูุฌุฉ ููุนุธู ุงูุฃุฏูุงุช ุงููุตุบุฑุฉ ุงููุฏูุฌุฉ ุจูุง. <br><br>  ุงููุฑุงุซุฉ ูู ูููู ุงูุตุญุฉ ุงูุฃุณุงุณู ูู VisualDamageHealthComponent ูุชุฌุงูุฒ ุฑุฏ ุงูุงุชุตุงู ุนูู ุงูุชุบููุฑ ุงูุตุญู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฆุฉ VisualDamageHealthComponent</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VisualDamageHealthComponent</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(HealthComponent)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""       .    HP=0 """</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, widgets_dict={}, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(*args, **kwargs) self.widgets_dict = OrderedDict() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sorted(widgets_dict.keys()): self.widgets_dict[int(x)] = widgets_dict[x] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_hitpoint_update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.hitpoints == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> hasattr(self.owner, <span class="hljs-string"><span class="hljs-string">'destructor'</span></span>): self.owner.destructor.destroy() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.widgets_dict: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.hitpoints &gt;= x: self.owner.widget.switch_to_image(self.widgets_dict[x])</code> </pre> <br></div></div><br>  ุจูููุง ุชููู ุงูุตุญุฉ ุฃุนูู ูู 0 ุ ูุณุฃู ุงููููู ุงููุณุคูู ุนู ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฑุณู ุงูุฌุฏุงุฑ ูู ุงูุญุงูุฉ ุงููุทููุจุฉ.  ููุง ุ ูุชู ุงุณุชุฎุฏุงู ุงูููุงููุฉ ุงูููุถุญุฉ ุฃุนูุงู ูู ุฎูุงู ุณูุฉ ูุงุฆู ุงูููุงู.  ุจูุฌุฑุฏ ุงูุชูุงุก ููุงุท ุงููุตูู ุ ุณูุชู ุงุณุชุฏุนุงุก ุงููููู ุงููุณุคูู ุนู ุงูุชุฏููุฑ ุงูุตุญูุญ ููููุงู ูุฌููุน ุงูููููุงุช ุจุงูุทุฑููุฉ ููุณูุง. <br><br>  ุจุงููุณุจุฉ ููููุงูุงุช ุงูุฃุฎุฑู ุ ูู ุดูุก ูุดุงุจู ุ ููุท ูุฌููุนุฉ ุงูููููุงุช ูุฎุชููุฉ.  ูุชู ุฅุถุงูุฉ ุงูุฏุจุงุจุงุช ูุน ูุญุฏุงุช ุงูุชุญูู (ุฅุฏุฎุงู ุงููุงุนุจ ุ AI ูููุนุงุฑุถูู) ูุงูุญุงุฌูุงุช ุงูุฏูุฑุงููุฉ ุ ููุฃุตุฏุงู - ูููู ุชุตุงุฏู ูุชุณุจุจ ูู ุฃุถุฑุงุฑ ููู ุฃุตุงุจูู.  ูู ุฃููู ุจุชุญููู ูู ูููู ุ ูุฃูู ุถุฎู ูุจุงูุช ุฅูู ุญุฏ ูุง ุ  ุงูุธุฑ ููุท ุฅูู ูุตุงุฏู ุงููุฐููุฉ.  ูุญุชูู ุนูู ุทุฑููุฉ collided_into ุ ุชุณูู ุนูุฏ ุงุตุทุฏุงู ุงูููุงู ุงููุถูู ุจุดูุก: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุตุงุฏู ูููู ุงูุฑุตุงุตุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collided_into</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, entity)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> entity: self.owner.destructor.destroy() <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> hasattr(EntityTracker().entities[entity], <span class="hljs-string"><span class="hljs-string">'collision'</span></span>): self.dispatcher.add_event(BearEvent(event_type=<span class="hljs-string"><span class="hljs-string">'ac_damage'</span></span>, event_value=( entity, self.damage))) self.owner.destructor.destroy()</code> </pre> <br></div></div><br>  ููุชุฃูุฏ ูู ุฃูู ูู ุงููููู ุญููุง ุงูุญุตูู ุนูู ุถุญูุฉ (ูุงูุชู ูุฏ ุชููู ุฎุงุทุฆุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนูุงุตุฑ ุงูุฎูููุฉ) ุ ูุณุชุฎุฏู ุงูููุฐูู EntityTracker ().  ูุฐุง ูู ุงูููุฑุฏ ุงูุฐู ูุชุชุจุน ุฌููุน ุงูููุงูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูุชุฏููุฑูุง ุ  ูู ุฎูุงูู ุ ููููู ุงูุญุตูู ุนูู ูุงุฆู ููุงู ุจุงูุงุณู ูุงูููุงู ุจุดูุก ูุน ููููุงุชู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุงูุชุญูู ูู ูุฌูุฏ ุงูููุงู. ุงูุญู (ูุนุงูุฌ ุชุตุงุฏู ุงูุถุญูุฉ) ุนูู ุงูุฅุทูุงู. <br><br>  ุงูุขู ูู ุงูููู ุงูุฑุฆูุณู ููุนุจุฉ ุ ูุฏุนู ุจุจุณุงุทุฉ ุฌููุน ุงููุธุงุฆู ุงููุงุฒูุฉ ูุฅูุดุงุก ููุงูุงุช: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุนูุฏุฉ ุฅูู game.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  , -     atlas = Atlas(XpLoader('battlecity.xp'), 'battlecity.json') #   create_player_tank(dispatcher, atlas, 30, 50) #    wall_array = [[0 for _ in range(14)], [0 for _ in range(14)], [1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0], [1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1], [1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0], [1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0], [0 for _ in range(14)], [0 for _ in range(14)], [0 for _ in range(14)] ] for y in range(10): for x in range(14): if wall_array[y][x] == 1: create_wall(dispatcher, atlas, f'wall{x}{y}', x*6, y*6) #   -  .     . create_spawner_house(dispatcher, atlas, 35, 0)</span></span></code> </pre> <br></div></div><br>  ุนุฏุงุฏุงุช ููุทุฉ ูููุทุฉ ุงููุตูู ููุณุช ููุงูุงุช ูููุณุช ูู ุณุงุญุฉ ุงููุนุฑูุฉ.  ูุฐูู ุ ูุง ูุชู ุฅุถุงูุชูุง ุฅูู ECSLayout ุ ูููู ูุจุงุดุฑุฉู ุฅูู ุงููุญุทุฉ ุนูู ูููู ุงูุฎุฑูุทุฉ.  ุชุฑุซ ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฐุงุช ุงูุตูุฉ ูู Label (ุฃุฏุงุฉ ุฅุฎุฑุงุฌ ุงููุต) ููุฏููุง ุทุฑููุฉ on_event ููุนุฑูุฉ ูุง ููููู.  ุจุฎูุงู Layout ุ ูุง ูููู ุงูุฌูุงุฒ ุชููุงุฆููุง ุจุชุญุฏูุซ ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููู ุนูุงูุฉ ุ ูุฐูู ุจุนุฏ ุชุบููุฑ ุงููุต ุ ุชุฎุจุฑู ุงูุฃุฏูุงุช ุงููุตุบูุฑุฉ ุจุงูููุงู ุจุฐูู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">listeners.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScoreLabel</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Label)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""   """</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(text=<span class="hljs-string"><span class="hljs-string">'Score:\n0'</span></span>) self.score = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_event</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> event.event_type == <span class="hljs-string"><span class="hljs-string">'ecs_destroy'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'enemy'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> event.event_value <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'bullet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> event.event_value: <span class="hljs-comment"><span class="hljs-comment">#    self.score += 10 self.text = f'Score:\n{self.score}' self.terminal.update_widget(self) class HPLabel(Label): """   """ def __init__(self, *args, **kwargs): super().__init__(text='HP:\n5') self.hp = 5 def on_event(self, event): if event.event_type == 'ac_damage' and event.event_value[0] == 'player': self.hp -= event.event_value[1] self.text = f'HP:\n{self.hp}' self.terminal.update_widget(self)</span></span></code> </pre> <br></div></div><br>  ูุง ูุชู ุนุฑุถ ูููุฏ ุงูุนุฏู ูุงููุงุฆู ุงููุณุคูู ุนู ุฅุฎุฑุงุฌ "GAME OVER" ุนูู ุงูุฅุทูุงู ุ ูุฐูู ูุฑุซุงู ูู ุงููุณุชูุน.  ุงููุจุฏุฃ ูู ููุณู: ุชุณุชูุน ุงููุงุฆูุงุช ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุชูุชุธุฑ ุงููุญุธุฉ ุงูููุงุณุจุฉ ุ ุซู ุชูุดุฆ ููุงููุง ุฃู ุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">geymover</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    - . . . class GameOverListener(Listener): """       """ def __init__(self, *args, widget=None, **kwargs): print (args) super().__init__(*args, *kwargs) self.widget = widget def on_event(self, event): if event.event_type == 'ecs_destroy' and event.event_value == 'player': self.terminal.add_widget(self.widget, pos=(20, 20), layer=5)</span></span></code> </pre><br></div></div><br>  ุงูุขู ุฃูุดุฃูุง ูู ูุง ูุญุชุงุฌู ุ ููููููุง ุจุฏุก ุงููุนุจุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุทูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ,   Listeners    terminal.start() terminal.add_widget(layout) terminal.add_widget(score, pos=(85, 10)) terminal.add_widget(hp, pos=(85, 15))</span></span></code> </pre> <br></div></div><br>  ุชุชู ุฅุถุงูุฉ ุงูุญุงุฌูุงุช ุฅูู ุงูุดุงุดุฉ ููุท ุจุนุฏ ุฃู ุชุจุฏุฃ.  ูููู ุฅุถุงูุฉ ุงูููุงูุงุช ุฅูู ุงูุฎุฑูุทุฉ ูู ูุจู - ูุชู ุชุฌููุน ุฃุญุฏุงุซ ุงูุฅูุดุงุก (ุงูุชู ูุชู ูููุง ุชุฎุฒูู ุงูููุงู ุจุฃูููู ุ ุจูุง ูู ุฐูู ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู) ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุญููุง ุนูุฏ ุงูุนูุงูุฉ ุงูุฃููู.  ููู ูููู ุฃู ุชุถูู ุงููุญุทุฉ ุงูุทุฑููุฉ ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุท ุจุนุฏ ุฅูุดุงุก ูุงูุฐุฉ ููุง ุจูุฌุงุญ. <br><br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุฏููุง ูููุฐุฌ ุฃููู ุนููู ุ ููููู <s>ุฅุตุฏุงุฑ</s> ููุฒุฉ " <s>ุงููุตูู ุงููุจูุฑ" ูู 20 ุฏููุงุฑุงุช</s> ูุฅุถุงูุฉ ููุฒุงุช ูุชูููุน ุทุฑููุฉ ุงููุนุจ.  ูููู ูุฐุง ุจุงููุนู ุฎุงุฑุฌ ูุทุงู halloworld ุ ูุจุงูุชุงูู ุงูููุงูุฉ.  ุณุฃุถูู ููุท ุฃูู ูููู ุจูุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุจููุฉ</a> ุงููุณุชููุฉ ุนู ูุธุงู ุจูุซูู ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pyinstaller</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar470950/">https://habr.com/ru/post/ar470950/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar470930/index.html">ุชูุทูุฎ ุงูููุชุฌ. ุฑุงุชุจุงุช ุงูุชุงุฑูุฎ</a></li>
<li><a href="../ar470934/index.html">ูุดูู ูุจู ุงูุฒูุงู: ุชูุงุซุฑ ุงูุฎูุงูุง ููุฏุฑุงุช ุชุฌุฏูุฏ ููุงุฏูู ุงูุจุญุฑ</a></li>
<li><a href="../ar470938/index.html">ููููุฉ ูุชุญ ุฑุงุจุท ูู ุจูุซูู. ุงูุนูู ูุน WebBrowser ูุญู ูุดููุฉ ูู ุจุฑูุงูุฌ Internet Explorer</a></li>
<li><a href="../ar470940/index.html">MSK VUE.JS meetup # 3 ูู Mail.ru Group: ููุงุฏ ูู mitap</a></li>
<li><a href="../ar470942/index.html">ูู ุฃููููุงุช ุงููุจุชุฏุฆูู ุฅูู ุงูุฃูุงูุฉ: ููู ุตูุนูุง ุฌูุงุฆุฒ ูู 2GIS</a></li>
<li><a href="../ar470952/index.html">ุงูุทุจ ุงูุดุฑุนู ุงูุฑููู ูุตุงุฆุญ ูุงูุฎุฏุน: ุงูุชุทุจูู "ูุงุชูู" ุงูุทุจ ุงูุดุฑุนู</a></li>
<li><a href="../ar470954/index.html">ูู ุจุชุซุจูุช Zimbra OSE 8.8.15 ู Zextras Suite Pro ุนูู Ubuntu 18.04 LTS</a></li>
<li><a href="../ar470958/index.html">ุชุญูููุงุช Liveness ูู Kubernetes ูููู ุฃู ุชููู ุฎุทูุฑุฉ</a></li>
<li><a href="../ar470962/index.html">JSConf Budapest 2019</a></li>
<li><a href="../ar470964/index.html">ุฃูุนุงุจ ุฎุดุจูุฉ - ูููุด</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>