<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍✈️ 👨🏿‍🤝‍👨🏽 👩🏻‍🔬 Nous imprimons des images en utilisant Arduino 🏢 🤴🏼 🤘🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendant longtemps, j'ai voulu faire une sorte de projet sur Ardoino, pour que tout y bouge et fonctionne. Et, après quelques mois de conception, de pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous imprimons des images en utilisant Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383877/"><iframe width="560" height="315" src="https://www.youtube.com/embed/AlBPFC41FsM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant longtemps, j'ai voulu faire une sorte de projet sur Ardoino, pour que tout y bouge et fonctionne. </font><font style="vertical-align: inherit;">Et, après quelques mois de conception, de programmation et d'assemblage, nous avons obtenu une telle mini-imprimante avec laquelle vous pouvez imprimer une variété d'images et de texte sur les autocollants les plus ordinaires. </font><font style="vertical-align: inherit;">Si après avoir regardé la vidéo vous avez un grand désir de faire quelque chose comme ça, je demande un chat.</font></font><br>
<a name="habracut"></a><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De quoi avons nous besoin</font></font></b></h3><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Uno. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour ce projet, j'ai utilisé la carte d'origine italienne Arduino Uno. </font><font style="vertical-align: inherit;">Je ne peux pas garantir le travail sur d'autres planches.</font></font></li>
<li><b> sg-90 — 3 .</b>         .</li>
<li><b> .</b>       5 ,       </li>
<li><b>.</b>      3  :   , -     ,        .          -   «».</li>
<li><b> .</b>         ,    — .</li>
<li><b>   ().</b>        —  ,         ,    .       .      1-   .</li>
<li><b>.</b>        </li>
<li><b>     .</b>     «» ,            </li>
<li><b> 4 .</b>      -. ,    , , .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blueprints. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je vous l'enverrai gratuitement et sur demande, si vous écrivez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici.</font></font></a></li>
</ul><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En fait la mise en œuvre</font></font></b></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fabrication de pièces</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette étape dépend de votre envie et de vos capacités. </font><font style="vertical-align: inherit;">Vous pouvez le couper sur la machine ou couper toutes les pièces manuellement. </font><font style="vertical-align: inherit;">La principale chose à noter ici est que la qualité et les performances de ce projet dépendront directement de votre précision. </font><font style="vertical-align: inherit;">Vous devez également tenir compte de ce point: certains des détails que vous voyez sur les photos peuvent différer légèrement de ceux qui seront sur les dessins. </font><font style="vertical-align: inherit;">Il convient de noter tout de suite que les détails montrés sur les photos peuvent différer légèrement de ceux qui sont attachés aux dessins.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5fa/11b/e02/5fa11be02d2e4c47b94749eaa1f6f10f.png"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour ceux qui prévoient de tout faire manuellement</font></font></b><div class="spoiler_text"> ,    , :  ( ),  ( ), ,    .<br>
<br>
   —  -     .<br>
<br>
  .  ,    .         .    ,    ,    (   )    .     , / ,    .     ,  —     .<br>
<br>
      ,     :<br>
<br>
<img width="23%" src="https://habrastorage.org/files/43d/912/7be/43d9127be30e479982e0a183e0d0845e.png"> <img width="23%" src="https://habrastorage.org/files/0a7/6f2/bbf/0a76f2bbfe314d36ab3edb1b2dce5fe1.png"> <img width="23%" src="https://habrastorage.org/files/a0e/215/483/a0e21548302a4139943de723ad494c5b.png"> <img width="23%" src="https://habrastorage.org/files/924/eba/2eb/924eba2ebead49b28d12fc2f60763207.png"><br>
<br>
<img width="23%" src="https://habrastorage.org/files/14f/d24/125/14fd241250c94f1f9ca402b97ff2c0c8.png"> <img width="23%" src="https://habrastorage.org/files/675/b20/f1e/675b20f1e19f4fcb8acdeed5e33224bd.png"> <img width="23%" src="https://habrastorage.org/files/570/189/1ca/5701891ca1db40c3a01126ee4da06064.png"><br>
</div></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous collectons les parois latérales</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'à présent, tout est simple: prenez les pièces et collez-les. </font><font style="vertical-align: inherit;">Veillez à ce qu'il ne reste plus de colle sur les pièces.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/58d/5da/3fa/58d5da3fae1342c6a5616cd595fb25e0.png"> <img width="45%" src="https://habrastorage.org/files/9ca/7a7/3c6/9ca7a73c6c804a8194f93dd2825a7c59.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collez les jambes à la base</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces jambes ne représentent qu'une valeur esthétique. </font><font style="vertical-align: inherit;">Si vous souhaitez gagner du temps, vous pouvez ignorer cette étape.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/30a/64d/66e/30a64d66ee624345ae30818c248fb291.png"> <img width="45%" src="https://habrastorage.org/files/85b/7b0/a8c/85b7b0a8ccee46fc8010941e967b4e87.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assembler l'affaire</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le texte sur les plaques avant et arrière peut être modifié à votre goût.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/561/df1/6f8/561df16f82cc42b7a49f407239f6c08c.png"> <img width="45%" src="https://habrastorage.org/files/033/aca/376/033aca376e304c158fc8072171aa1b36.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/60d/699/5fe/60d6995fee9543a387bf09ca48a39ac6.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire un bloc de papier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette étape nécessite une précision et une minutie particulières du travail. </font><font style="vertical-align: inherit;">Les rails en forme de "G" sur lesquels toute la plate-forme sera maintenue sont d'une difficulté particulière. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez coller soigneusement des bandes minces exactement selon les risques indiqués sur le dessin. </font><font style="vertical-align: inherit;">Pour le meilleur effet, j'ai utilisé des "pinces à linge" inhabituelles, mais vous pouvez vous en passer en toute sécurité. </font><font style="vertical-align: inherit;">L'essentiel est d'éliminer l'excès de colle et de s'assurer que les bandes ne se déplacent nulle part. </font><font style="vertical-align: inherit;">Plus loin, nous collons les bandes plus largement - la technologie ici est la même.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/352/c3e/cd7/352c3ecd719143ed91f29927dfacd1c2.png"> <img width="45%" src="https://habrastorage.org/files/a72/0be/597/a720be597c4d42048d6f40b04785cdd3.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/0a4/40e/3d8/0a440e3d833848829fcfd035a1825e33.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois la colle sèche (au moins 20 minutes), essayez d'insérer le tampon dans le corps. Si elle y va comme sur des roulettes et peut faire des mouvements clairs d'avant en arrière, alors vous avez beaucoup de chance - c'est exactement ce dont vous avez besoin. Sinon, nous prenons du papier de verre dans nos mains et effleurons les endroits des rails sur lesquels il se coince. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le collage des crémaillères ne devrait poser aucun problème. Assurez-vous qu'ils collent perpendiculairement. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/316/8f7/f3a/3168f7f3a48342888827ab53bb6b7dbc.png"> <img width="45%" src="https://habrastorage.org/files/62b/c95/1e7/62bc951e7c254d1fb7aae11d4b9d4aef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous procédons à l'assemblage du mécanisme qui détient le papier. Aucun problème ne devrait survenir si vous collectez tout dans cet ordre. On colle d'abord les racks, on fixe les leviers dessus. Ensuite, nous leur collons une bande de contreplaqué qui tiendra les renards de papier. Et alors seulement, nous collons la partie dans laquelle les ressorts butent.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/4f2/e73/999/4f2e73999837402397ddb4dc1ad1a049.png"> <img width="45%" src="https://habrastorage.org/files/ace/8cf/239/ace8cf2390464da9a91e0d8167243ada.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques photos supplémentaires pour mieux comprendre comment collecter tout cela:</font></font></b><div class="spoiler_text"><img width="45%" src="https://habrastorage.org/files/821/ac3/87f/821ac387f768404bbb6978fb6df40c16.jpg"> <img width="45%" src="https://habrastorage.org/files/8e3/925/549/8e392554935a4f6dbf22356b85f958f8.jpg"> <img width="45%" src="https://habrastorage.org/files/69a/2fd/37a/69a2fd37a7544cee96664910280a9750.jpg"> <img width="45%" src="https://habrastorage.org/files/c19/4ac/4f8/c194ac4f8dcf4d39a7f8082b49429f3b.jpg"> <img width="45%" src="https://habrastorage.org/files/11c/a38/755/11ca38755d4a47b88560f2cc6cb87e3f.jpg"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout a été fait correctement, votre imprimante devrait ressembler à ceci:</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/85d/5f7/0fe/85d5f70fe94644f391ce0771b3ffdfc2.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mécanisme de brochage</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc finalement atteint les engrenages ... Il suffit de les mettre sur une tige pré-préparée d'environ 110 mm de long comme indiqué sur la photo ci-dessous et collée à la super-colle (elle doit être appliquée uniformément sur les parois du trou central de l'engrenage). </font><font style="vertical-align: inherit;">Assurez-vous que les dents d'engrenage s'adaptent à la crémaillère. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/ccc/8cd/68c/ccc8cd68cf67488ababeaf449da6a27a.png"> <img width="45%" src="https://habrastorage.org/files/24d/490/beb/24d490beb4b84eea8a9fbf1236c12f3a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois la colle sèche, essayez de faire défiler doucement la tige - la plate-forme doit bouger.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez le premier servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, vous devez préparer l'engrenage pour le moteur. </font><font style="vertical-align: inherit;">Chaque servo est livré avec plusieurs balançoires en plastique. </font><font style="vertical-align: inherit;">Ils doivent être coupés et tournés comme indiqué dans la figure ci-dessous. </font><font style="vertical-align: inherit;">Et puis collez-le dans l'équipement. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/eeb/77f/9d1/eeb77f9d10f643889e50bb21f5df4c99.png"> <img width="45%" src="https://habrastorage.org/files/dec/d86/b2f/decd86b2fab64b969c0c87025308f8fd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, nous passons à l'installation du lecteur. </font><font style="vertical-align: inherit;">Pour commencer, poussez le tampon de papier à fond dans l'imprimante et faites défiler votre servo dans le sens antihoraire jusqu'à ce qu'il s'arrête. </font><font style="vertical-align: inherit;">Ensuite, vous devez choisir la position optimale du variateur, c'est-à-dire fixer le servo de sorte que les engrenages n'aient pas un grand jeu, mais qu'ils ne se touchent pas.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/36f/860/244/36f860244b1546aa86ac326b1f12038c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, vous pouvez vérifier si tout fonctionne pour nous. </font><font style="vertical-align: inherit;">Pour ce faire, connectez le servo à votre Arduino via la broche 9 et chargez l'esquisse à partir de Patterns: Servo&gt; Sweep. </font><font style="vertical-align: inherit;">Au cas où, je donne son code ci-dessous.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Balayage servo</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIN_ANGLE 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_ANGLE 180</span><font></font>
<font></font>
Servo servo;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <font></font>
  servo.attach(<span class="hljs-number">9</span>);<font></font>
} <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{ 
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MIN_ANGLE; i&lt;=MAX_ANGLE; ++i) {<font></font>
    servo.write(i); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MAX_ANGLE; i&gt;=MIN_ANGLE; --i) {                                <font></font>
    servo.write(i);<font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
} <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout fonctionnait, tant mieux. </font><font style="vertical-align: inherit;">Sinon, essayez de modifier la position du lecteur ou les valeurs MIN_ANGLE et MAX_ANGLE dans le code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez le deuxième servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout se fait de la même façon avec le premier moteur. </font><font style="vertical-align: inherit;">La seule différence est que vous avez besoin d'un petit axe d'environ 12 mm de long pour fixer les deux engrenages.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e73/db2/47e/e73db247e6f243f29b0dbb3ecd9d8b4b.png"> <img width="45%" src="https://habrastorage.org/files/db0/854/2f0/db08542f0d8b4c69ac52d45c77f4d0a6.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous mettons un chariot d'impression</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez réussi à atteindre ce stade, vous ne devriez pas avoir de difficultés particulières ici. </font><font style="vertical-align: inherit;">La chose la plus difficile ici est d'assembler soigneusement le chariot (de sorte qu'il ne dépasse pas et ne se coince pas), vous devrez peut-être travailler avec du papier de verre. </font><font style="vertical-align: inherit;">Le prochain problème possible est une crémaillère mal collée. </font><font style="vertical-align: inherit;">Il doit être strictement parallèle à la base du boîtier, il est préférable de le coller lorsque le chariot est le plus éloigné du servo variateur. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e6d/a7b/c97/e6da7bc97edb46318be775ca4bbdc8f2.png"> <img width="45%" src="https://habrastorage.org/files/c0e/bef/92a/c0ebef92a0c443a5825ecf08168b1cc1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions cet assemblage à l'aide d'Arduino et du croquis susmentionné, si tout fonctionne comme il se doit, puis passons à l'étape suivante. </font><font style="vertical-align: inherit;">Sinon, le problème est probablement dû à des engrenages ou à une crémaillère mal collée.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dernier servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, nous récupérons le levier du stylo-feutre. </font><font style="vertical-align: inherit;">Nous devons être en mesure de percer un trou latéral pour la vis, avec lequel nous allons serrer la vis. </font><font style="vertical-align: inherit;">Essayez de vous assurer que dans l'état où le stylo-feutre est abaissé, le servo a une position de 90 degrés, vous n'avez donc pas à faire de corrections supplémentaires dans le code. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/b04/5d1/e50/b045d1e503934c88a6f9cdc0a8fd7eaf.png"> <img width="45%" src="https://habrastorage.org/files/d33/bab/b92/d33babb92f6245c4a7bc6237796996f7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir installé le moteur, notre imprimante sera presque prête. </font><font style="vertical-align: inherit;">Je recommande de coller la surface du bloc de papier avec du ruban adhésif; pendant le processus de débogage, l'imprimante peut être gravement sale.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/f0e/986/256/f0e986256d1e40af9c88d6d94e47a744.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Première exécution et débogage</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, nous connectons le servo à notre Arduino Uno, il n'est pas nécessaire de le placer à l'intérieur de l'imprimante à ce stade, il sera gênant de fonctionner. </font><font style="vertical-align: inherit;">Nous connectons le premier moteur à la broche2, le second à la broche4, le troisième à la broche6. </font><font style="vertical-align: inherit;">Ensuite, téléchargez ce croquis. </font><font style="vertical-align: inherit;">Attention! </font><font style="vertical-align: inherit;">Ce code ne fonctionne pas sur l'IDE, plus récent 1.6.4 (j'ai essayé de commenter en détail et tout le code clairement, je n'entrerai pas dans le détail):</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tourne-moi</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">/*
*  MiniPrinter
*  Designed in May 2015
*  By Alexandrow Yegor
*/</span><font></font>
<font></font>
<span class="hljs-comment">// ,        Servo</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> {</span>
  <span class="hljs-keyword">int</span> min_angle, max_angle;<font></font>
  Servo servo;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_W 64 <span class="hljs-comment">// </span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_H 64 <span class="hljs-comment">// </span></span>
<span class="hljs-keyword">int</span> STEP = <span class="hljs-number">2</span>;    <span class="hljs-comment">//    1 </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IDLING_MS 4 <span class="hljs-comment">// ,     1 </span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WRITING_MS 8</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">motor_x</span>, <span class="hljs-title">motor_y</span>, <span class="hljs-title">motor_p</span>;</span>
byte img[IMG_W/<span class="hljs-number">8</span>]; <span class="hljs-comment">//  </span>
                   <span class="hljs-comment">//  =  </span><font></font>
<font></font>
<span class="hljs-function">struct Motor <span class="hljs-title">newMotor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pin, <span class="hljs-keyword">int</span> a1, <span class="hljs-keyword">int</span> a2)</span> </span>{ <span class="hljs-comment">// </span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">m</span>;</span><font></font>
<font></font>
  m.servo.attach(pin);<font></font>
  m.min_angle = a1;<font></font>
  m.max_angle = a2;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> m;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">gotoStart</span><span class="hljs-params">()</span> </span>{<font></font>
   motor_p.servo.write(motor_p.max_angle); <span class="hljs-comment">// </span>
   delay(<span class="hljs-number">15</span>);<font></font>
   <font></font>
   <span class="hljs-comment">//   (0; 0)</span><font></font>
   motor_x.servo.write(motor_x.min_angle);<font></font>
   motor_y.servo.write(motor_y.min_angle); <font></font>
   delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
    motor_x.servo.write(motor_x.min_angle);<font></font>
    motor_y.servo.write(motor_y.max_angle);<font></font>
    delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">//</span>
  Serial.begin(<span class="hljs-number">9600</span>);<font></font>
  motor_y = newMotor(<span class="hljs-number">2</span>, <span class="hljs-number">50</span>, <span class="hljs-number">180</span>);<font></font>
  motor_x = newMotor(<span class="hljs-number">4</span>, <span class="hljs-number">30</span>, <span class="hljs-number">160</span>);<font></font>
  motor_p = newMotor(<span class="hljs-number">6</span>, <span class="hljs-number">90</span>, <span class="hljs-number">99</span>);<font></font>
  gotoStart();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//,      ,     </span>
<span class="hljs-function">boolean <span class="hljs-title">nextWayIsEmpty</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{
  <span class="hljs-keyword">for</span>(; i&lt;IMG_W; ++i) {
    <span class="hljs-keyword">if</span>(!(img[i/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(i%<span class="hljs-number">8</span>)))) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printImg</span><span class="hljs-params">()</span> </span>{<font></font>
  gotoStart();<font></font>
  <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y=<span class="hljs-number">0</span>; y&lt;IMG_H; ++y) {
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;IMG_W/<span class="hljs-number">8</span>; ++i) img[i] = Serial.read();<font></font>
      Serial.write(<span class="hljs-number">61</span>);<span class="hljs-comment">//  ,          </span><font></font>
      <font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;STEP; ++i) { <span class="hljs-comment">//       ,  STEP</span>
          motor_x.servo.write(motor_x.min_angle); <span class="hljs-comment">//   </span><font></font>
          motor_y.servo.write(motor_y.min_angle + y*STEP + i); <font></font>
          delay(IDLING_MS * STEP * x + <span class="hljs-number">30</span>);<font></font>
          <font></font>
          <span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>; x&lt;IMG_W; ++x) {<font></font>
            <font></font>
            <span class="hljs-keyword">if</span>(nextWayIsEmpty(x)) {<font></font>
              motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
              <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
            <font></font>
            <span class="hljs-comment">//  (/),    </span>
            motor_p.servo.write((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? motor_p.min_angle : motor_p.max_angle);<font></font>
            delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
            <font></font>
            <span class="hljs-comment">//     X</span><font></font>
            motor_x.servo.write(motor_x.min_angle + x*STEP);<font></font>
            delay(((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? WRITING_MS : IDLING_MS) * STEP); <font></font>
        }<font></font>
        <font></font>
        <span class="hljs-comment">// </span><font></font>
        motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
      }<font></font>
    <font></font>
    <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
  }<font></font>
    <font></font>
  gotoStart();<font></font>
  Serial.flush();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-comment">//     ,    </span>
<span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">checkMessage</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span>(Serial.available()) {<font></font>
      delay(<span class="hljs-number">10</span>);<font></font>
      byte msg[] = {Serial.read(), Serial.read()};<font></font>
      <font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'R'</span>) printImg(); <span class="hljs-comment">//</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) gotoStart(); <span class="hljs-comment">//   (0; 0)</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'C'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'L'</span>) finish(); <span class="hljs-comment">//" "</span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'Z'</span>) STEP = Serial.read(); <span class="hljs-comment">//    </span>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) { <span class="hljs-comment">//     (PT+1 -   , PT-2  2  )</span>
        <span class="hljs-keyword">if</span>(Serial.read() == <span class="hljs-string">'+'</span>) {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle += b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle += b-<span class="hljs-string">'0'</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
        }<font></font>
      }  <font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  checkMessage();<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez déjà testé et débogué tous les systèmes jusqu'à ce point, il ne devrait y avoir aucun problème: le bloc de papier devrait légèrement trembler et le chariot d'impression devrait occuper la position la plus à gauche. Si l'un des éléments ci-dessus n'atteint pas les bords ou, à l'inverse, repose contre les murs, essayez de sélectionner les paramètres dans la fonction setup (). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous rencontrez des problèmes plus graves, je vous recommande de relire attentivement l'intégralité du didacticiel et de vérifier si vous avez tout fait correctement. De plus, il sera agréable de vérifier à nouveau chaque moteur en utilisant la première liste (balayage des servos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous connectons notre imprimante à l'ordinateur et exécutons ce </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (nous avons besoin de Java installé).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous sélectionnons le port série auquel l'imprimante est connectée et appuyez sur le bouton "OK", après quoi l'imprimante devrait tordre légèrement le bloc de papier. Cliquez ensuite sur le bouton «Journal». Nous avons ouvert une fenêtre de terminal. Ensuite, entrez la commande CL - l'imprimante doit pousser le tampon vers l'intérieur. Si vous entrez ST, l'imprimante reviendra à sa position d'origine. Vous pouvez également envoyer plusieurs commandes d'affilée, par exemple: CLSTCL. L'essentiel est de ne pas utiliser d'espaces et autres personnages entre les équipes.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5ba/ec2/3be/5baec23be65546d09251c02a11c6406c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous avons réussi à y faire face, allez-y - installez le levier avec un feutre. Fixez d'abord le feutre sur le levier. la distance entre son extrémité et le bord inférieur du levier doit être d'environ 25 mm. Ensuite, vous devez visser la vis de sorte que le stylo-feutre soit fixé et ne soit pas parti. Maintenant, placez simplement ce levier sur l'axe du servo - la distance entre la pointe du feutre et le papier doit être d'environ 7 mm. Plus précisément, la hauteur peut être ajustée à l'aide des commandes PT + 1 et PT-1. Ils ajustent l'angle du marqueur, au lieu de 1, il peut y avoir n'importe quel nombre de 0 à 9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, le moment le plus crucial est venu - l'impression de la première photo. Les petites images 64x64 sont les mieux adaptées. Je recommande d'utiliser ce Mario: </font></font><br>
<br>
<img src="https://habrastorage.org/files/8d2/7de/3f6/8d27de3f6dc04c9b892e31bdf4271f53.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécharger</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vous devez d'abord ouvrir l'image:</font></font><br>
<br>
<div style="text-align:center;"><img width="60%" src="https://habrastorage.org/files/c39/95e/7dd/c3995e7ddc784328a3b1d5c38440fdaa.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'aide des curseurs de droite, vous pouvez régler le contraste de l'image à votre goût. Il convient de rappeler que plus il y a de pixels noirs - plus la photo sera imprimée longtemps.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/c73/666/cf5/c73666cf5293464fa2a4c017caa1b70d.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Il vous suffit ensuite d'appuyer sur le bouton «Imprimer» et d'admirer le fonctionnement de votre création. </font><font style="vertical-align: inherit;">Le seul problème possible à ce stade est d'appuyer sur le feutre. </font><font style="vertical-align: inherit;">Il poussera trop fort ou ne poussera pas du tout. </font><font style="vertical-align: inherit;">En plus de contrôler la hauteur du feutre à travers le terminal, vous pouvez essayer de régler la hauteur manuellement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, à vos risques et périls, vous pouvez modifier les valeurs des variables globales dans l'esquisse: jouez avec la vitesse et la taille de l'impression. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dès que vous êtes satisfait de la qualité de l'image résultante, vous pouvez placer en toute sécurité l'Arduino dans le boîtier de l'imprimante en le vissant avec des vis - cela peut être considéré comme votre projet, vous pouvez le montrer à tous vos amis!</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout, j'espère que ce projet vous a intéressé. </font><font style="vertical-align: inherit;">Bien sûr, il a ses </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconvénients de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctionnalités </font><s><font style="vertical-align: inherit;">de</font></s><font style="vertical-align: inherit;"> mise en œuvre, il y a donc encore place à l'amélioration, à l'amélioration et au développement. </font><font style="vertical-align: inherit;">Je serai heureux de tout conseil, questions et suggestions dans les commentaires.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr383877/">https://habr.com/ru/post/fr383877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr383865/index.html">Les sismologues de Berkeley ont créé une carte 3D des couches profondes de la Terre</a></li>
<li><a href="../fr383867/index.html">Le sexe en réalité virtuelle est en route: les jouets sont prêts (18+)</a></li>
<li><a href="../fr383871/index.html">Smartphone DEXP Ixion ML2 5 ”: une batterie puissante pour un record de 5 200 mAh, un écran HD et une semaine d'autonomie</a></li>
<li><a href="../fr383873/index.html">L'impression 3D de métaux utilise un système laser et une robotique avancée</a></li>
<li><a href="../fr383875/index.html">HTML5-версия StarCraft</a></li>
<li><a href="../fr383881/index.html">Configuration sans fil de l'ESP8266 dans le firmware DeviceHive v 0.3</a></li>
<li><a href="../fr383885/index.html">Comment faire une découverte scientifique sans quitter la maison?</a></li>
<li><a href="../fr383891/index.html">Steve Wozniak a finalement aimé le film sur Steve Jobs avec Michael Fassbender dans le rôle-titre</a></li>
<li><a href="../fr383893/index.html">Mars amateur rovers compétitions en Pologne</a></li>
<li><a href="../fr383895/index.html">Courte critique de la tablette ASUS ZenPad C 7.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>