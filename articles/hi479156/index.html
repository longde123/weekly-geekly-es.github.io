<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПд ЁЯУЬ ЁЯЪв ESP32 + Arduino Core + FreeRTOS + Blynk = рдорди рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рд╕рд╛рде рдШрд░ ЁЯд▒ЁЯП╛ ЁЯзЦЁЯП╗ ЁЯУе</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп 


 рдХрд┐рд╕реА рддрд░рд╣ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВрдиреЗ рдЕрдкрдирд╛ рдШрд░ рдмрдирд╛рдпрд╛, рдПрдХ рдХрдВрдХрд╛рд▓ред рдореЗрд░реЗ рд▓рдХреНрдЬрд░реА рдФрд▓ рдореЗрдВ рдХреЛрдИ рдЧреИрд╕ рдирд╣реАрдВ рд╣реИ рдФрд░ рдирд┐рдХрдЯ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕рдХреА рдЙрдореНрдореАрдж рдирд╣реАрдВ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ESP32 + Arduino Core + FreeRTOS + Blynk = рдорди рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рд╕рд╛рде рдШрд░</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479156/"><h2 id="celi-proekta">  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп </h2><br><p> рдХрд┐рд╕реА рддрд░рд╣ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВрдиреЗ рдЕрдкрдирд╛ рдШрд░ рдмрдирд╛рдпрд╛, рдПрдХ рдХрдВрдХрд╛рд▓ред  рдореЗрд░реЗ рд▓рдХреНрдЬрд░реА рдФрд▓ рдореЗрдВ рдХреЛрдИ рдЧреИрд╕ рдирд╣реАрдВ рд╣реИ рдФрд░ рдирд┐рдХрдЯ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕рдХреА рдЙрдореНрдореАрдж рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдПрдХ рдХрдВрдХрд╛рд▓ рдЪреБрдирд╛ - рдмрд╛рдХреА рд╕рдм рдХреБрдЫ, рдореЗрд░реЗ рд▓рд┐рдП, рдмрд┐рдЬрд▓реА рдХреЗ рд╕рд╛рде рдЧрд░реНрдореА рдХрд░рдирд╛ рдмрд╣реБрдд рдорд╣рдВрдЧрд╛ рд╣реЛрдЧрд╛ред  рдЦреИрд░, рдпрд╣ рднреА рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рдмрд╕реЗ рд╕рд╕реНрддреА рддрдХрдиреАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред <br>  рдареАрдХ рд╣реИ, рдореИрдВрдиреЗ рдШрд░ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдкрд╛рдЗрдк рдлреЗрдВрдХ рджрд┐рдП, рдмреИрдЯрд░реА рдХреЛ рд▓рдЯрдХрд╛ рджрд┐рдпрд╛, рдПрдХ рдмреЙрдпрд▓рд░, рдпрд╣ рдЧрд░реНрдо рд▓рдЧ рд░рд╣рд╛ рдерд╛, рд▓реЗрдХрд┐рди рдХреБрдЫ рдЧрд▓рдд рдерд╛ред </p><br><p>  рдЦреБрдж рдХреА рдмрд╛рдд рд╕реБрдирдХрд░, рдореБрдЭреЗ рдПрд╣рд╕рд╛рд╕ рд╣реБрдЖ рдХрд┐ рдпрд╣ рдПрдХ рдЯреЙрдб рд╣реИ рдЬреЛ рдореБрдЭреЗ рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ, рдЬрдмрдХрд┐ рдореИрдВ рдШрд░ рдкрд░ рдирд╣реАрдВ рд╣реВрдВ (рджрд┐рди рдореЗрдВ 12-16 рдШрдВрдЯреЗ), рд╣реАрдЯрд┐рдВрдЧ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдФрд░ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдХреЗрд╡рд▓ рдЖрдЧрдорди рд╕реЗ рдкрд╣рд▓реЗ рдЪрд╛рд▓реВ рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХрдВрдХрд╛рд▓ рдХреА рдереЛрдбрд╝реА рд╕реА рдЬрдбрд╝рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рддрд╛рдкрдорд╛рди рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдмрдврд╝рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╡рд╣реА рд╕реНрдерд┐рддрд┐ рдЬрдм рдШрд░ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдХрд╣реАрдВред  рдЦреИрд░, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдбрд╝рдХ рдкрд░ рддрд╛рдкрдорд╛рди рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреЗ рд╕рд╛рде рдмреЙрдпрд▓рд░ рдХреЗ рд╣реИрдВрдбрд▓ рдХреЛ рдореЛрдбрд╝рдирд╛, рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдХреЛрд╖реЗрд░ рдирд╣реАрдВ рд╣реИред </p><a name="habracut"></a><br><p>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рди рдХреЗ рдмрд┐рдирд╛, рдХрд╣реАрдВ рднреА, рдмреЙрдпрд▓рд░ рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдмрд╛рд╣рд░реА рдирд┐рдпрдВрддреНрд░рдг рд░рд┐рд▓реЗ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдкрд░реНрдХ рд╣реИрдВред  рдмреЗрд╢рдХ, рдЖрдк рддреБрд░рдВрдд рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдмреЙрдпрд▓рд░ рдЦрд░реАрдж рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП, рдРрд╕реЗ рдмреЙрдпрд▓рд░ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдЕрдорд╛рдирд╡реАрдп рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдореИрдВ рджрд┐рдорд╛рдЧ рдХреЗ рд╕рд╛рде рдмреИрдардирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛, рдЖрддреНрдорд╛ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкреЗрд╢рд╛рдм рдХрд░рддрд╛ рдерд╛, рдереЛрдбрд╝рд╛ рд╕реА рд╕реАрдЦрддрд╛ рдерд╛, рднрд▓реЗ рд╣реА рдЖрд░реНрдбрд┐рдиреЛ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ: </p><br><ul><li>  рд╕реЗрдЯрдкреЙрдЗрдВрдЯ рддрд╛рдкрдорд╛рди рдирд┐рдпрдВрддреНрд░рдг </li><li>  рдмрд╛рд╣рд░ рдпрд╛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рддрд╛рдкрдорд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╢реАрддрд▓рдХ рддрд╛рдкрдорд╛рди рдирд┐рдпрдВрддреНрд░рдг </li><li>  рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рд╕рдордп рдХреНрд╖реЗрддреНрд░, рджрд┐рди рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдардВрдбрд╛, рд░рд╛рдд рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдЧрд░реНрдо </li><li>  рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдореЛрдб, рдСрдЯреЛ рджрд┐рди-рд░рд╛рдд рд╕рдВрдХреНрд░рдордг рдХреЗ рд╕рд╛рде </li><li>  рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдХреЗ рд▓рд┐рдП рдореИрдиреБрдЕрд▓ рдореЛрдб, рдХреЛрдИ рдСрдЯреЛ рд╕рдВрдХреНрд░рдордг рдирд╣реАрдВ </li><li>  рдЧреИрд░-рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдореЛрдб, рдЬрд╣рд╛рдВ рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд┐рд╕реА рднреА рд╢реАрддрд▓рдХ рддрд╛рдкрдорд╛рди рдХреЛ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдмреЙрдпрд▓рд░ рдХреЛ рдЪрд╛рд▓реВ / рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </li><li>  рд╣реАрдЯрд┐рдВрдЧ рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ, рдмрдЯрди рдФрд░ рд╕реНрдХреНрд░реАрди рд╕реЗ рдФрд░ рд╡реЗрдмрд╕рд╛рдЗрдЯ / рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ </li></ul><br><p>  рдпрд╣ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдерд╛, рдФрд░ рдлрд┐рд░ рдореИрдВрдиреЗ рдкреАрдбрд╝рд┐рдд рдХрд┐рдпрд╛ рдФрд░ рдЬреЛрдбрд╝рд╛: </p><br><ul><li>  рд╕реНрдЯреНрд░реАрдЯ рд▓реИрдВрдк рдирд┐рдпрдВрддреНрд░рдг (рдПрд▓рдИрдбреА рд╕реНрдкреЙрдЯрд▓рд╛рдЗрдЯ) </li><li>  рдЕрд▓рд╛рд░реНрдо рд╕рд┐рд╕реНрдЯрдо рдореЛрд╢рди рд╕реЗрдВрд╕рд░, рд╕рд╛рдЗрд░рди рдФрд░ рд╕реНрдЯреНрд░реАрдЯ рд▓реИрдВрдк рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ </li><li>  рдкреНрд░рддрд┐ рджрд┐рди / рдорд╛рд╣ / рд╡рд░реНрд╖ + рд╡рд░реНрд╖ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдорд╣реАрдиреЗ рдХреЗ рд▓рд┐рдП рдмреЙрдпрд▓рд░ рджреНрд╡рд╛рд░рд╛ рдЦрдкрдд рдКрд░реНрдЬрд╛ рдХреА рдкреИрдорд╛рдЗрд╢ </li><li>  рджреАрдкрдХ рдХреА рдзреАрдореА рдЪрдордХ рд╕реЗ рд╣реА рдЕрд▓рд╛рд░реНрдо рдореЛрдб </li><li>  рдПрдХ рджреАрдкрдХ рдХреЗ рддреЗрдЬреА рд╕реЗ рдЭрдкрдХреА рдФрд░ рдПрдХ рдореЛрд╣рд┐рдиреА рдХреА рдЫреЛрдЯреА рдмреАрдк рджреНрд╡рд╛рд░рд╛ рд╕рдВрдХреЗрдд рдореЛрдб </li><li>  рдПрдХ рджреАрдкрдХ рдХреЗ рддреЗрдЬреА рд╕реЗ рдЭрдкрдХреА рдФрд░ рдПрдХ рдореЛрд╣рд┐рдиреА рдХреЗ рдирд┐рд░рдВрддрд░ рд╣рд╛рдЙрд▓рд┐рдВрдЧ рджреНрд╡рд╛рд░рд╛ рд╕рд┐рдЧреНрдирд▓рд┐рдВрдЧ рдореЛрдб </li></ul><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдЕрдиреБрднрд╡ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛, рд░реВрд╕реА рдореЗрдВ рдХреБрдЫ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдирд╛ рд╣реИ рдЬреЛ рдореБрдЭреЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдирд╣реАрдВ рдорд┐рд▓рд╛ред  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд▓реЗрдЦ рд╢реБрд░реБрдЖрдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ Arduino do-it-tooers рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╕реЗ рдереЛрдбрд╝рд╛ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐  рдмрд┐рд▓реНрдХреБрд▓ рдмреБрдирд┐рдпрд╛рджреА рдмрд╛рддреЗрдВ рдЬрд┐рдирдХрд╛ рдореИрдВрдиреЗ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд┐рдпрд╛ред  рдореИрдВрдиреЗ рдпрдерд╛рд╕рдВрднрд╡ рд╕реНрдкрд╖реНрдЯ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдореИрдВ рд╕рдлрд▓ рд░рд╣рд╛ред </p><br><h2 id="chto-bylo-v-nachale">  рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХреНрдпрд╛ рдерд╛ </h2><br><p>  рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ Arduino Nano + ESP8266 рдХреЗ рдЬрдВрдЧрд▓реА рдЭреБрдВрдб рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди ESP рдПрдХ рдврд╛рд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ рдПрдХ рдЕрд▓рдЧ рдЙрдкрдХрд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рд╣реИред  рдРрд╕рд╛ рдХреНрдпреЛрдВ?  рд╣рд╛рдВ, рдХреНрдпреЛрдВрдХрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдпрд╣ рд╕рдм рдерд╛, рд▓реЗрдХрд┐рди рд╢рдмреНрдж рд╕реЗ рдХреЛрдИ рдкреИрд╕рд╛ рдирд╣реАрдВ рдерд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ рдирдпрд╛ рд▓реЛрд╣рд╛ рдирд╣реАрдВ рдЦрд░реАрджрдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред  рдИрдПрд╕рдкреА рдПрдХ рдврд╛рд▓ рдХреА рддрд░рд╣ рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИ?  рдЕрдм рдореБрдЭреЗ рдпрд╛рдж рднреА рдирд╣реАрдВ рд╣реИред </p><br><p>  Arduino рдиреЗ рд╕рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ GPIO рдХреА рдЖрд╡рд╢реНрдпрдХ рдорд╛рддреНрд░рд╛ рдереА, рдФрд░ ESP рдиреЗ рд╕рднреА рдбреЗрдЯрд╛ рдХреЛ Blynk рд╕рд░реНрд╡рд░ рдХреЛ рднреЗрдЬ рджрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЗрдВрдЯрд░рдиреЗрдЯ рдЬрд╛рдирддрд╛ рдерд╛ рдФрд░ рдЗрд╕рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд GPIO рдирд╣реАрдВ рдерд╛ред  рдЙрдиреНрд╣реЛрдВрдиреЗ UART рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЦреБрдж рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд┐рдпрд╛, рдФрд░ JSON рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛ рднреЗрдЬрд╛ред  рдпрд╣ рдпреЛрдЬрдирд╛ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдиреЗ рд▓рдЧрднрдЧ рдПрдХ рд╕рд╛рд▓ рддрдХ рдмрд┐рдирд╛ рдХрд┐рд╕реА рд╢рд┐рдХрд╛рдпрдд рдХреЗ рдХрд╛рдо рдХрд┐рдпрд╛ред  <a href="https://github.com/abashind/HomeHeater">рдХреЛрдИ рднреА рд╡реНрдпрдХреНрддрд┐ рдХреЛрдбреЗрдХ</a> рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдореИрдВ рддреБрд░рдВрдд рдЖрд░рдХреНрд╖рдг рдХрд░ рджреВрдВрдЧрд╛, рдЙрд╕ рд╕рдордп рдореИрдВ рдмрд╣реБрдд рдХреБрд╢рд▓ рдирд╣реАрдВ рдерд╛ (рдФрд░ рдЕрдм рднреА рдореИрдВ рдЗрд╕реЗ рдФрд░ рдмреЗрд╣рддрд░ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛), рдЗрд╕рд▓рд┐рдП рдЧрд░реНрднрд╡рддреА рдорд╣рд┐рд▓рд╛рдУрдВ рдФрд░ рдмрдЪреНрдЪреЛрдВ рдХреЛ рди рджреЗрдЦрдирд╛ рдмреЗрд╣рддрд░ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдм рдХреБрдЫ Arduino IDE рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдпрд╣ рд░рд╛рдд рддрдХ рдпрд╛рдж рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдХрд┐ рд░рд┐рдлреИрдХреНрдЯрд┐рдВрдЧ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдмрд╣реБрдд рд╕реАрдорд┐рдд рд╣реИ, рд╡рд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рд╣реА рдЖрджрд┐рдо рд╣реИред </p><br><h2 id="zhelezo">  рд▓реЛрд╣рд╛ </h2><br><p>  рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╕рд╛рд▓ рдмреАрдд рдЪреБрдХрд╛ рд╣реИ, рд╡рд┐рддреНрдд рдиреЗ ESP32 рдбреЗрд╡рд┐рдЯрдХ v1 рдЦрд░реАрджрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд GPIO рд╣реИ, рдЗрдВрдЯрд░рдиреЗрдЯ рдФрд░ рдЖрдо рддреМрд░ рдкрд░ рдПрдХ рд╕реБрдкрд░ рдирд┐рдпрдВрддреНрд░рдХ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред  рдЪреБрдЯрдХреБрд▓реЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореБрдЭреЗ рдХрд╛рдо рдХреЗ рдЕрдВрдд рдореЗрдВ рдмрд╣реБрдд рдкрд╕рдВрдж рдЖрдпрд╛ред </p><br><p>  рд▓реЛрд╣реЗ рдХреА рд╕реВрдЪреА: </p><br><ul><li>  ESP32 рджреЗрд╡рдХреА v1 рдирд╛рдо рдЪреАрди </li><li>  3 рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ DS18B20, рдШрд░ рдХреЗ рдЕрдВрджрд░ рдХрд╛ рддрд╛рдкрдорд╛рди, рдмрд╛рд╣рд░ рдФрд░ рдкрд╛рдЗрдк рдореЗрдВ рд╢реАрддрд▓рдХ рдХрд╛ рддрд╛рдкрдорд╛рди </li><li>  4 рд░рд┐рд▓реЗ рдХрд╛ рдмреНрд▓реЙрдХ </li><li>  рдкреАрд░ рд╕реЗрдВрд╕рд░ HC-SR501 </li></ul><br><p>  рдореИрдВрдиреЗ рдПрдХ рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рдмрдирд╛рдИ рд╣реИ, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдкрд┐рдВрд╕ рдХреЗ рдирд╛рдо рдХреЗ рд╕рд╛рде рдореИрдХреНрд░реЛрдЬрд╝ рд╕реЗ рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред </p><br><h2 id="pochemu-freertos-i-arduino-core">  рдХреНрдпреЛрдВ FreeRTOS рдФрд░ Arduino Core </h2><br><p>  Arduino рдкрд░ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдЙрд╕реА Blynk рдкрд░ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк Arinoino Core рд╕реЗ рджреВрд░ рдирд╣реАрдВ рдЬрд╛рддреЗред </p><br><p>  рдлреНрд░реАрдЖрд░рдЯреАрдУрдПрд╕ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ рдПрдХ рдкреВрд░реНрдг рдФрджреНрдпреЛрдЧрд┐рдХ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рдХрд╛рдо рдХреЗ рд╕рдорд╛рди рд▓реЛрд╣реЗ рдХреЗ рдПрдХ рдЫреЛрдЯреЗ рдЯреБрдХрдбрд╝реЗ рдХреЗ рдХрд╛рдо рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдп рдХреЛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХрд╛рд░реНрдп рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд░реЛрдХ рджрд┐рдпрд╛, рд╢реБрд░реВ рдХрд┐рдпрд╛, рдЬрдм рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рд╣рдЯрд╛ рджрд┐рдпрд╛ - рдпрд╣ рд╕рдм Arduino рдХреЛрдб рдХреА рдПрдХ рд▓рдВрдмреА рдЙрд▓рдЭрди рд▓рд┐рдЦрдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд▓рдЪреАрд▓рд╛ рд╣реИ, рдЬрдм рдЕрдВрдд рдореЗрдВ рд╕рдм рдХреБрдЫ рд▓реВрдк рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдмрджрд▓реЗ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  FreeRTOS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдп рдХреЛ рдХрдбрд╝рд╛рдИ рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдордп рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдпрджрд┐ рдХреЗрд╡рд▓ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╢рдХреНрддрд┐ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, Arduino рдореЗрдВ рд╕рднреА рдХреЛрдб рдХреЛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХ рдереНрд░реЗрдб рдореЗрдВ, рдпрджрд┐ рдХреБрдЫ рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдмрд╛рдХреА рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рджреЗрд░реА рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рддреЗрдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╕рдордп рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЗрд╕ рдЯреЙрд░реНрдЪ рдХреА рдЪрдордХ рдФрд░ рдПрдХ рдЬрд▓рдкрд░реА рдмреАрдкрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреАред </p><br><h2 id="pro-logiku">  рддрд░реНрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h2><br><h3 id="pro-freertos-taski">  FreeRTOS рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h3><br><p>  тЖТ <a href="https://github.com/abashind/home_auto_2019">рдкрд░рд┐рдпреЛрдЬрдирд╛</a> рдХреЗ <a href="https://github.com/abashind/home_auto_2019">рдкреВрд░реЗ рдХреЛрдбреЗрдХ рд╕реЗ</a> рд▓рд┐рдВрдХ </p><br><p>  рдЗрд╕рд▓рд┐рдП, FreeRTOS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рд╕реЗрдЯрдЕрдк рдлрд╝рдВрдХреНрд╢рди рдореБрдЦреНрдп рдлрд╝рдВрдХреНрд╢рди рдХреА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддрд╛ рд╣реИ, рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ, FreeRTOS рдХрд╛рд░реНрдп (рдЗрд╕рдХреЗ рдмрд╛рдж рдХреЗ рдХрд╛рд░реНрдп) рдЗрд╕рдореЗрдВ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рд▓реВрдк рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╢реАрддрд▓рдХ рдХреЗ рддрд╛рдкрдорд╛рди рдХреА рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдХрд╛рдо рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: </p><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate_water_temp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pvParameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (heating_mode == <span class="hljs-number"><span class="hljs-number">3</span></span>) {} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-20</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-20</span></span> &amp;&amp; temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-25</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">65</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-25</span></span> &amp;&amp; temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-30</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">70</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-30</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">85</span></span>; } vTaskDelay(<span class="hljs-number"><span class="hljs-number">1000</span></span> / portTICK_RATE_MS); } }</code> </pre> <br><p>  рдЗрд╕реЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ _void <code>pvParameters</code> рдХреЛ рд▓реЗрдирд╛ рдЪрд╛рд╣рд┐рдП, рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рдПрдХ рдЕрдВрддрд╣реАрди рд▓реВрдк рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдореИрдВрдиреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ <code>while (true)</code> ред </p><br><p>  рдПрдХ рд╕рд╛рдзрд╛рд░рдг рддрд╛рдкрдорд╛рди рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ (рдпрджрд┐ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рдореЛрдб рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ) рдФрд░ рдлрд┐рд░ рдХрд╛рд░реНрдп 1 рдорд┐рдирдЯ рдХреЗ рд▓рд┐рдП <code>vTaskDelay(1000 / portTICK_RATE_MS)</code> рджреНрд╡рд╛рд░рд╛ euthanized рд╣реИред  рдЗрд╕ рдореЛрдб рдореЗрдВ, рдпрд╣ рд╕реАрдкреАрдпреВ рд╕рдордп рдХрд╛ рдЙрдкрднреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЪрд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рд╕рдВрджрд░реНрдн, рд╕рдордп рдЖрдиреЗ рдкрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд╣рд╛рдВ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреИрдХ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЕрдЧрд▓рд╛ рдХрд╛рд░реНрдп рд╕реЗрдЯрдЕрдк рдореЗрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ <code>xTaskCreate</code> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><p> <code>xTaskCreate(calculate_water_temp, "calculate_water_temp", 2048, NULL, 1, NULL);</code> </p> <br><p>  рдХрдИ рддрд░реНрдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд▓рд┐рдП, <em>calcul_water_temp</em> рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ - рдХрд╛рд░реНрдп рдХреЛрдб рдФрд░ 2048 рд╡рд╛рд▓реЗ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдирд╛рдо рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рд╕реНрдЯреИрдХ рдХрд╛ рдЖрдХрд╛рд░ рд╣реИред </p><br><p>  рд╕реНрдЯреИрдХ рдХрд╛ рдЖрдХрд╛рд░ рд╢реБрд░реВ рдореЗрдВ рд╕рднреА рдХреЛ 1024 рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ, рдлрд┐рд░ рдореИрдВрдиреЗ рдЯрд╛рдЗрдк рдХрд░рдХреЗ рд╡рд╛рдВрдЫрд┐рдд рд╡рд┐рдзрд┐ рдХреА рдЧрдгрдирд╛ рдХреА, рдпрджрд┐ рдХрдВрдЯреНрд░реЛрд▓рд░ рд╕реНрдЯреИрдХ рдУрд╡рд░рдлреНрд▓реЛ рдХреЗ рд╕рд╛рде рдЧрд┐рд░рдирд╛ рд╢реБрд░реВ рд╣реЛ рдЧрдпрд╛ (рдЬреИрд╕рд╛ рдХрд┐ uart рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ), рдореИрдВрдиреЗ рд╕рд┐рд░реНрдл 2 рдмрд╛рд░ рд╕реНрдЯреИрдХ рдХрд╛ рдЖрдХрд╛рд░ рдмрдврд╝рд╛рдпрд╛ рд╣реИ, рдЕрдЧрд░ рдпрд╣ рдорджрдж рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ 2 рдмрд╛рд░ рдФрд░ рдЗрд╕реА рддрд░рд╣ рд╕реЗ рдЬрдм рддрдХ рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдмреЗрд╢рдХ, рдпрд╣ рдореЗрдореЛрд░реА рдХреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдирд╣реАрдВ рдмрдЪрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди ESP32 рдХреЗ рдкрд╛рд╕ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк рдЗрд╕рд╕реЗ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗред </p><br><p>  рдЖрдк рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реИрдВрдбрд▓ рднреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдПрдХ рд╣реИрдВрдбрд▓ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдирд┐рд░реНрдорд╛рдг рдХреЗ рдмрд╛рдж рдХрд╛рд░реНрдп рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП - рд╣рдЯрд╛рдПрдВред  рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдЕрдВрддрд┐рдо NULL рд╣реИред  рдПрдХ рд╣реИрдВрдбрд▓ рдЗрд╕ рддрд░рд╣ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><p> <code>TaskHandle_t slow_blink_handle;</code> </p> <br><p>  рдЕрдЧрд▓рд╛, рдЬрдм рдХреЛрдИ рдХрд╛рд░реНрдп рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ <code>xTaskCreate</code> рд▓рд┐рдП рдПрдХ рд╕реВрдЪрдХ xTaskCreate рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><p> <code>xTaskCreate(outside_lamp_blinks, "outside_lamp_blynk", 10000, (void *)1000, 1, &amp;slow_blink_handle);</code> </p> <br><p>  рдФрд░ рдпрджрд┐ рд╣рдо рдХрд╛рд░реНрдп рдХреЛ рд╣рдЯрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдпрд╣ рдХрд░рддреЗ рд╣реИрдВ: </p><br><p> <code>vTaskDelete(slow_blink_handle);</code> </p> <br><p>  рдпрд╣ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╣ рджрд╣рд╢рдд_рдХрдВрдЯреНрд░реЛрд▓ <code>panic_control</code> рдХреЛрдб рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h3 id="pro-freertos-myuteksy">  рдлреНрд░реАрдЯреНрд░реЙрд╕ рдореНрдпреВрдЯреЗрдХреНрд╕ рдкреЗрд╢реЗрд╡рд░реЛрдВ </h3><br><p>  рдореНрдпреВрдЯреЗрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдмреАрдЪ рдЯрдХрд░рд╛рд╡ рдХреЛ рдЦрддреНрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ uart, wifi, рдЖрджрд┐ рдЬреИрд╕реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧред  рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЭреЗ рд╡рд╛рдИрдлрд╛рдИ рдФрд░ рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рдореНрдпреВрдЯреЗрдХреНрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред </p><br><p>  рдореНрдпреВрдЯреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рдмрдирд╛рдПрдБ: </p><br><p> <code>SemaphoreHandle_t wifi_mutex;</code> </p> <br><p>  <code>setup</code> рдПрдХ рдореНрдпреВрдЯреЗрдХреНрд╕ рдмрдирд╛рдПрдВ: </p><br><p> <code>wifi_mutex = xSemaphoreCreateMutex();</code> </p> <br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рд╣рдореЗрдВ рдХрд╛рд░реНрдп рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдпрд╣ рдореНрдпреВрдЯреЗрдХреНрд╕ рд▓реЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдмрд╛рдХреА рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдкрддрд╛ рдЪрд▓ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╕рдВрд╕рд╛рдзрди рд╡реНрдпрд╕реНрдд рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: </p><br><p> <code>xSemaphoreTake(wifi_mutex, portMAX_DELAY);</code> </p> <br><p>  <code>portMAX_DELAY</code> - рд╕рдВрд╕рд╛рдзрди рдФрд░ рдореНрдпреВрдЯреЗрдХреНрд╕ рдХреЛ рдЕрдиреНрдп рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рдореБрдХреНрдд рд╣реЛрдиреЗ рддрдХ рдЕрдирд┐рд╢реНрдЪрд┐рдд рдХрд╛рд▓ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ, рдЗрд╕ рд╕рдордп рд╕рднреА рдХрд╛рд░реНрдп рд╕реЛрдПрдВрдЧреЗред </p><br><p>  рд╕рдВрд╕рд╛рдзрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдореНрдпреВрдЯреЗрдХреНрд╕ рджреЗрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЕрдиреНрдп рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдВ: </p><br><p> <code>xSemaphoreGive(wifi_mutex);</code> </p> <br><p>  рдЖрдк рдХреЛрдб рдХреЛ рдЕрдзрд┐рдХ <code>send_data_to_blynk</code> рдореЗрдВ send_data_to_blynk <code>send_data_to_blynk</code> рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдореНрдпреВрдЯреЗрдХреНрд╕ рдХрд╛ рдЧреИрд░-рдЙрдкрдпреЛрдЧ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рджреМрд░рд╛рди рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдирд╣реАрдВ рдерд╛, рд▓реЗрдХрд┐рди рдЬреЗрдЯреАрдПрдЬреА рдбреАрдмрдЧ рдХреЗ рджреМрд░рд╛рди, рддреНрд░реБрдЯрд┐рдпрд╛рдБ рд▓рдЧрд╛рддрд╛рд░ рдЧрд╛рдпрдм рд╣реЛ рдЧрдИрдВ рдЬреЛ рдореНрдпреВрдЯреЗрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЧрд╛рдпрдм рд╣реЛ рдЧрдИрдВред </p><br><h3 id="kratkoe-opisanie-tasok">  рддрд╕реЛрдХ рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг </h3><br><p>  <code>get_temps</code> - рдкреНрд░рддреНрдпреЗрдХ 30 рд╕реЗрдХрдВрдб рдореЗрдВ рд╕реЗрдВрд╕рд░ рд╕реЗ рддрд╛рдкрдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛, рдЕрдзрд┐рдХ рдмрд╛рд░ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред <br>  <code>get_time_task</code> - NTP рд╕рд░реНрд╡рд░ рд╕реЗ рд╕рдордп рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, рдЖрд░рдЯреАрд╕реА рдореЙрдбреНрдпреВрд▓ DS3231 рд╕реЗ рд╕рдордп рдирд┐рдХрд▓ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдПрдХ рд╕рд╛рд▓ рдХреЗ рдХрд╛рдо рдХреЗ рдмрд╛рдж рд╡рд┐рдлрд▓ рд╣реЛрдиреЗ рд▓рдЧрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЗрд╕рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рдореИрдВрдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдореЗрд░реЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рд╣реИ, рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рд╕рдордп рд╣реАрдЯрд┐рдВрдЧ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ - рджрд┐рди рдпрд╛ рд░рд╛рддред  рдпрджрд┐ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рджреМрд░рд╛рди рдЗрдВрдЯрд░рдиреЗрдЯ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдордп рдмрд╕ рдлреНрд░реАрдЬ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рд╕рдордп рдХреНрд╖реЗрддреНрд░ рдмрд╕ рдПрдХ рд╣реА рд░рд╣реЗрдЧрд╛ред  рдпрджрд┐ рдирд┐рдпрдВрддреНрд░рдХ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЪрд╛рд▓реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХреЛрдИ рдЗрдВрдЯрд░рдиреЗрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╕рдордп рд╣рдореЗрд╢рд╛ 0:00:00 рд╣реЛрдЧрд╛ - рд░рд╛рдд рдореЗрдВ рд╣реАрдЯрд┐рдВрдЧ рдореЛрдбред <br>  <code>calculate_water_temp</code> - рдКрдкрд░ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  <code>detect_pir_move</code> - HC-SR501 рд╕реЗрдВрд╕рд░ рд╕реЗ рдореЛрд╢рди рд╕рд┐рдЧреНрдирд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ред  рд╕реЗрдВрд╕рд░ рдПрдХ рддрд╛рд░реНрдХрд┐рдХ рдЗрдХрд╛рдИ рдмрдирд╛рддрд╛ рд╣реИ + 3.3V рдЬрдм рдЧрддрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ <code>digitalRead</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╡реИрд╕реЗ, рдЗрд╕ рд╕реЗрдВрд╕рд░ рдХреЗ рд▓рд┐рдП рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд┐рди рдХреЛ GND - <code>pinMode(pir_pin, INPUT_PULLDOWN);</code> рддрдХ рдЦреАрдВрдЪрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП <code>pinMode(pir_pin, INPUT_PULLDOWN);</code> <br>  <code>heating_control</code> - рд╣реАрдЯрд┐рдВрдЧ рдореЛрдб рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ред <br>  <code>out_lamp_control</code> - рдПрдХ рд╕реНрдЯреНрд░реАрдЯ рд▓реИрдВрдк рдХрд╛ рдирд┐рдпрдВрддреНрд░рдгред <br>  рдЬрдм рдЧрддрд┐ рдХрд╛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, рддреЛ <code>panic_control</code> - рд╕рд╛рдпрд░рди рдФрд░ рд╕реНрдкреЙрдЯрд▓рд╛рдЗрдЯ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╕рд╛рдпрд░рди рдФрд░ рдЪрдордХрддреА рд░реЛрд╢рдиреА рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, <code>outside_lamp_blinks</code> рдФрд░ <code>siren_beeps</code> ред  FreeRTOS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЪрдордХрддреА рдФрд░ рдмреАрдкреНрд╕ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ, рдмрд┐рд▓реНрдХреБрд▓ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЕрдВрддрд░рд╛рд▓ рдкрд░, рдЕрдиреНрдп рдХрд╛рд░реНрдп рдЖрдкрдХреЗ рдХрд╛рдо рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐  рд╡реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдзрд╛рд░рд╛рдУрдВ рдореЗрдВ рд░рд╣рддреЗ рд╣реИрдВред  FreeRTOS рдЧрд╛рд░рдВрдЯреА рджреЗрддрд╛ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдп рдореЗрдВ рдХреЛрдб рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рдордп рдкрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдЧрд╛ред  <code>loop</code> рдореЗрдВ рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╕рдордп <code>loop</code> рд╕рдм рдХреБрдЫ рдЗрддрдиреА рдЖрд╕рд╛рдиреА рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдЕрдиреНрдп рдХреЛрдб рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рддред <br>  <code>guard_control</code> - рдЧрд╛рд░реНрдб рдореЛрдб рдХрд╛ рдирд┐рдпрдВрддреНрд░рдгред <br>  <code>send_data_to_blynk</code> - Blynk рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдбреЗрдЯрд╛ рднреЗрдЬреЗрдВред <br>  <code>run_blynk</code> - <code>Blynk.run()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдиреБрдЕрд▓ рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ <code>Blynk.run()</code> рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпред  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рд╕рдордЭрддрд╛ рд╣реВрдВ, рдЖрд╡реЗрджрди рд╕реЗ рдирд┐рдпрдВрддреНрд░рдХ рддрдХ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, <code>Blynk.run()</code> рдПрдХ <code>loop</code> рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдореИрдВ рдореВрд▓ рд░реВрдк рд╕реЗ рд╡рд╣рд╛рдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдбрд╛рд▓рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ рдФрд░ рдЗрд╕реЗ рдПрдХ рдЕрд▓рдЧ рдХрд╛рдо рдмрдирд╛ рджрд┐рдпрд╛ред <br>  <code>write_setting_to_pref</code> рдмрд╛рдж рдЙрдиреНрд╣реЗрдВ рдкрдХрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд░реЗрдХреЙрд░реНрдб рд╕реЗрдЯрд┐рдВрдЧ рдФрд░ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рдореЛрдб <code>write_setting_to_pref</code> ред  рдкреНрд░реАрдлрд╝ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br>  <code>count_heated_hours</code> - рдмреЙрдпрд▓рд░ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рд╕рдордп рдХреА рдЧрд┐рдирддреАред  рдореИрдВрдиреЗ рдмрд╕ рдпрд╣ рдХрд┐рдпрд╛ рд╣реИ, рдЕрдЧрд░ рдмреЙрдпрд▓рд░ рдХреЛ рдЯрд╛рд╕реНрдХ рд▓реЙрдиреНрдЪ (рдкреНрд░рддреНрдпреЗрдХ 30 рд╕реЗрдХрдВрдб) рдХреЗ рдХреНрд╖рдг рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП рдореВрд▓реНрдп рдПрдХ рд╕реЗ рдмрдврд╝ рдЬрд╛рддрд╛ рд╣реИред <br>  <code>send_heated_hours_to_app</code> - рдЗрд╕ рдХрд╛рд░реНрдп рдореЗрдВ рдорд╛рди рдирд┐рдХрд╛рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ 0.00833 (1/120 рдШрдВрдЯреЗ) рд╕реЗ рдЧреБрдгрд╛ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдмреЙрдпрд▓рд░ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдкреНрд░рд╛рдкреНрдд рдШрдВрдЯреЛрдВ рдХреЛ рдмрд┐рд▓рдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  <code>feed_watchdog</code> - рд╡реЙрдЪрдбреЙрдЧ рдлрд╝реАрдбред  рдореБрдЭреЗ рд╡реЙрдЪрдбреЙрдЧ рд▓рд┐рдЦрдирд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐  рд╣рд░ рдХреБрдЫ рджрд┐рдиреЛрдВ рдореЗрдВ рдПрдХ рдмрд╛рд░ рдирд┐рдпрдВрддреНрд░рдХ рдЬрдо рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдХрд┐рд╕рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рдмрд┐рдЬрд▓реА рдХреА рдЖрдкреВрд░реНрддрд┐ рдореЗрдВ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╣рд╕реНрддрдХреНрд╖реЗрдк рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкреНрд░рд╣рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдпрд╣ рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рд╣реЛ рдЬрд╛рддреА рд╣реИред  рд╡реЙрдЪрдбреЙрдЧ рдЯрд╛рдЗрдорд░ 10 рд╕реЗрдХрдВрдб, рдирд┐рдпрдВрддреНрд░рдХ 10 рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ рддреЛ рдпрд╣ рдареАрдХ рд╣реИред <br>  <code>heart_beat</code> - рдПрдХ рдирд╛рдбрд╝реА рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдпред  рдЬрдм рдореИрдВ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реВрдВ, рддреЛ рдореИрдВ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдпрд╣ рдареАрдХ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдХреНрдпреЛрдВрдХрд┐  рдореЗрд░реЗ рдмреЛрд░реНрдб рдореЗрдВ рдХреЛрдИ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдПрд▓рдИрдбреА рдирд╣реАрдВ рд╣реИ, рдореБрдЭреЗ UART рдПрд▓рдИрдбреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдерд╛ - <code>Serial.begin(9600);</code> рд╕реНрдерд╛рдкрд┐рдд <code>Serial.begin(9600);</code>  рдФрд░ UART рдореЗрдВ рдПрдХ рд▓рдВрдмреА рд╕реНрдЯреНрд░рд┐рдВрдЧ рд▓рд┐рдЦреЗрдВред  рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="esp32-nvs-wear-leveling">  рдИрдПрд╕рдкреА 32 рдПрдирд╡реАрдПрд╕ рд▓реЗрд╡рд▓рд┐рдВрдЧ рдкрд╣рдирддреЗ рд╣реИрдВ </h3><br><p>  <em>рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╡рд░рдг рдмрд▓реНрдХрд┐ рдХреНрд░реВрдб рд╣реИрдВ, рд╢рд╛рдмреНрджрд┐рдХ рд░реВрдк рд╕реЗ рдЙрдВрдЧрд▓рд┐рдпреЛрдВ рдкрд░, рдмрд╕ рдореБрджреНрджреЗ рдХрд╛ рд╕рд╛рд░ рд╡реНрдпрдХреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред</em>  <em><a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html">рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА</a></em> </p><br><p>  Arduino рдЧреИрд░-рд╡рд╛рд╖реНрдкрд╢реАрд▓ рдореЗрдореЛрд░реА рдореЗрдВ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП EEPROM рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдПрдХ рдЫреЛрдЯреА рд╕реА рдореЗрдореЛрд░реА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдЯ рдХреЛ рдЕрд▓рдЧ рд╕реЗ рд▓рд┐рдЦрд╛ рдФрд░ рдорд┐рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рдХреЛ рдХреЗрд╡рд▓ рд╕реЗрдХреНрдЯрд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рдорд┐рдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  ESP32 рдореЗрдВ рдХреЛрдИ EEPROM рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдо рддреМрд░ рдкрд░ 4 рдПрдордмреА рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЖрдк рдХрдВрдЯреНрд░реЛрд▓рд░ рдлрд░реНрдорд╡реЗрдпрд░ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд╛рдЬрди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЕрдиреБрднрд╛рдЧ рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ - NVS, FATFS, SPIFFSред  рдпрд╣ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫрд┐рдд рдбреЗрдЯрд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЪреБрдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдХреНрдпреЛрдВрдХрд┐  рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд▓рд┐рдЦреЗ рдЬрд╛ рд░рд╣реЗ рд╕рднреА рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ Int рдХреЗ рд╣реИрдВ, рдореИрдВрдиреЗ NVS - рдЧреИрд░-рд╡реЙрд▓рд┐рдЯрд╛рдЗрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рдЪреБрдирд╛ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡рд┐рднрд╛рдЬрди рдЫреЛрдЯреЗ, рдЕрдХреНрд╕рд░ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдбреЗрдЯрд╛ рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдХреВрд▓ рд╣реИред  рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐, рдЖрдкрдХреЛ NVS рдХреЗ рд╕рдВрдЧрдарди рдореЗрдВ рдереЛрдбрд╝рд╛ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  EEPROM рдФрд░ FLASH рдХреА рддрд░рд╣, рдУрд╡рд░рд░рд╛рдЗрдЯрд┐рдВрдЧ рдбреЗрдЯрд╛ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рд╣реИрдВ, EEPROM рдореЗрдВ рдмрд╛рдЗрдЯреНрд╕ рдХреЛ 100,000 рд╕реЗ 1,000,000 рдмрд╛рд░ рддрдХ рдУрд╡рд░рд░рд╛рдЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ FLASH рд╕реЗрдХреНрдЯрд░ рд╕рдорд╛рди рд╣реИред  рдпрджрд┐ рд╣рдо рдПрдХ рд╕реЗрдХрдВрдб рдореЗрдВ рдПрдХ рдмрд╛рд░ рдбреЗрдЯрд╛ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо 60 рд╕реЗрдХрдВрдб x 60 рдорд┐рдирдЯ x 24 рдШрдВрдЯреЗ = 86,400 рдмрд╛рд░ / рджрд┐рди рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣реА рд╣реИ, рдЗрд╕ рдореЛрдб рдореЗрдВ, рдмрд╛рдЗрдЯ 11 рджрд┐рдиреЛрдВ рддрдХ рдЪрд▓реЗрдЧрд╛, рдЬреЛ рдереЛрдбрд╝рд╛ рд╕рд╛ рд╣реИред  рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдмрд╛рдЗрдЯ рд▓рд┐рдЦрдиреЗ рдФрд░ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдкрд▓рдмреНрдз рд░рд╣реЗрдЧреАред </p><br><p>  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, Arduino EEPROM рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ <code>update()</code> <code>put()</code> рдХрд╛рд░реНрдп рдХреЗрд╡рд▓ рдбреЗрдЯрд╛ рдХреЛ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдЬрдм рдпрд╣ рдмрджрд▓рддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рдЖрдк рд╣рд░ рджреВрд╕рд░реЗ рдХреБрдЫ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдФрд░ рдореЛрдб рдХреЛрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрд╛рдлреА рдХрдо рдмрджрд▓рддреЗ рд╣реИрдВред </p><br><p>  NVS рдкрд╣рдирдиреЗ рдХреЗ рд╕реНрддрд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдПрдХ рдЕрд▓рдЧ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдлреНрд▓реИрд╢ рд╕реЗрдХреНрдЯрд░ рдореЗрдВ рдбреЗрдЯрд╛ рднрд╛рдЧреЛрдВ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдкреВрд░реЗ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдорд┐рдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, NVS рдореЗрдВ рдбреЗрдЯрд╛ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреА рдкрддреНрд░рд┐рдХрд╛ рдореЗрдВ рдХреА рдЬрд╛рддреА рд╣реИ, рдЗрд╕ рдкрддреНрд░рд┐рдХрд╛ рдХреЛ рдкреГрд╖реНрдареЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рдиреНрд╣реЗрдВ рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рдХреЗ рдПрдХ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдбреЗрдЯрд╛ рдХреБрдВрдЬреА рдХреЗ рдЬреЛрдбрд╝реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ: рдореВрд▓реНрдпред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ EEPROM рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдФрд░ рднреА рдЖрд╕рд╛рди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдПрдХ рд╕рд╛рд░реНрдердХ рдирд╛рдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрдХ рдкрддреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЖрд╕рд╛рди рд╣реИред  <strong>рдЕрджреНрдпрддрди:</strong> рдХреБрдВрдЬреА рдХреА рд▓рдВрдмрд╛рдИ 15 рд╕реЗ рдЕрдзрд┐рдХ рд╡рд░реНрдг рдирд╣реАрдВ рд╣реИ! </p><br><p>  рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рдорд╛рди рдХреЛ рдХрд┐рд╕реА рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП <code>1</code> <code>somekey</code> , рдФрд░ рдлрд┐рд░ рдорд╛рди <code>2</code> рдХреЛ рдЙрд╕реА рдХреБрдВрдЬреА рдкрд░ рд▓рд┐рдЦреЗрдВ, рддреЛ рдкрд╣рд▓рд╛ рдорд╛рди рд╣рдЯрд╛ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛, рдЗрд╕реЗ рдХреЗрд╡рд▓ рд╣рдЯрд╛рдП рдЧрдП (рдорд┐рдЯрд╛рдП рдЧрдП) рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рд▓реЙрдЧ рдореЗрдВ рдПрдХ рдирдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдЬреЛрдбрд╝реА рдЬрд╛рдПрдЧреА: </p><br><p><img src="https://habrastorage.org/webt/pw/ri/of/pwriofnineuwy7bmctgzcngiqrk.jpeg"></p><br><p>  рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рд╕реЗ рдбреЗрдЯрд╛ рдкрдврд╝рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ <code>somekey</code> рдЗрд╕ рдХреБрдВрдЬреА рдХрд╛ рдЕрдВрддрд┐рдо рдореВрд▓реНрдп рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧрд╛ред  рдХреНрдпреЛрдВрдХрд┐  рдЪреВрдВрдХрд┐ рд▓реЙрдЧ рдЖрдо рд╣реИ, рд╡рд┐рднрд┐рдиреНрди рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рдмрдЧрд▓ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗ рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред </p><br><p>  рдкреГрд╖реНрда рдореЗрдВ рдПрдХ рд╕реНрдерд┐рддрд┐ рд╣реИ, рдЦрд╛рд▓реА - рдЦрд╛рд▓реА, рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЗ рдмрд┐рдирд╛, рд╕рдХреНрд░рд┐рдп - рдбреЗрдЯрд╛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЗрд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ, рдкреВрд░реНрдг - рдкреВрд░реНрдг рд╣реИ, рдЖрдк рдЗрд╕реЗ рдирд╣реАрдВ рд▓рд┐рдЦ рд╕рдХрддреЗред  рдЬреИрд╕реЗ рд╣реА рдкреГрд╖реНрда рд╕реНрдерд╛рди рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддрд╛ рд╣реИ, рд╡рд╣ <br>  рд╕рдХреНрд░рд┐рдп рдкреВрд░реНрдг рдкрд░ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЕрдЧрд▓рд╛ рдЦрд╛рд▓реА рдкреГрд╖реНрда рд╕рдХреНрд░рд┐рдп рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/6q/lz/ym/6qlzymofwdhy9ah2x-ekgpd23tq.jpeg"></p><br><p>  рдЬрд╣рд╛рдБ рддрдХ рдореИрдВрдиреЗ рдПрд╕реНрдкреНрд░реЗрд╕рд┐рдл рд╡реЗрдмрд╕рд╛рдЗрдЯ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдордВрдЪреЛрдВ рдкрд░ рдкреНрд░рд▓реЗрдЦрди рд╕реЗ рд╕рдордЭрд╛, рдкреЗрдЬ рдХреА рд╕рдлрд╛рдИ рддрдм рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ рдЬрдм рдореБрдлреНрдд рдкреЗрдЬ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдорд┐рдЯрд╛рдирд╛ рддрдм рд╣реЛрдЧрд╛ рдЬрдм рдХреЗрд╡рд▓ 1 рдореБрдХреНрдд рдкреГрд╖реНрда рд░рд╣рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдкреГрд╖реНрда рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рд╡рд░реНрддрдорд╛рди рд░рд┐рдХреЙрд░реНрдб (рдиреЙрди-рдЗрд░реЗрдЬрд╝реНрдб) рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкреГрд╖реНрда рдкрд░ рд▓реЗ рдЬрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкреГрд╖реНрда рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢реЗрд╖ рдкреГрд╖реНрда рдХреЗ рд▓рд┐рдП рд░рд╛рдЗрдЯ-рдЗрд░реЗрдЬ рдСрдкрд░реЗрд╢рди рдХрд╛рдлреА рджреБрд░реНрд▓рдн рд╣реИ, рдЕрдзрд┐рдХ рдкреГрд╖реНрда - рдХрдо рдЕрдХреНрд╕рд░ред  рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдореИрдВрдиреЗ рдПрдирд╡реАрдПрд╕ рд╡рд┐рднрд╛рдЬрди рдХрд╛ рдЖрдХрд╛рд░ 1 рдПрдордмреА рддрдХ рдмрдврд╝рд╛ рджрд┐рдпрд╛, рдореЗрд░реА рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рджрд░ рдкрд░ рдпрд╣ 170 рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдЬреЛ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  NVS рдЕрдиреБрднрд╛рдЧ рдХреЗ рдЖрдХрд╛рд░ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдЧрд▓реЗ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  NVS рдХреЗ рд╕рд╛рде рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдХрд╛рдо рдХреЗ рд▓рд┐рдП, Arduino Core рдХреЗ рд▓рд┐рдП ESP32 рдореЗрдВ рдкреНрд░реЗрдлрд░реЗрдВрд╕ рдХреА рдПрдХ рдЖрд╕рд╛рди рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд▓рд┐рдЦреА рдЧрдИ рд╣реИ, рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ <a href="">рдпрд╣рд╛рдВ</a> рд▓рд┐рдЦрд╛ рдЧрдпрд╛ <a href="">рд╣реИ</a> ред </p><br><h3 id="nemnogo-o-visualgdb">  VisualGDB рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рд╛ </h3><br><p>  рдЬреИрд╕реЗ рд╣реА рдореИрдВрдиреЗ Arduino IDE рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛, рдореБрдЭреЗ рд╡рд┐рдЬреБрдЕрд▓ рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рджреБрдЦреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╕реЗ рддреБрд░рдВрдд рдЖрд╢реНрдЪрд░реНрдп рд╣реБрдЖред  рд╡реЗ рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╡реАрдПрд╕ рднреА рдПрдХ рдлрд╡реНрд╡рд╛рд░рд╛ рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдореБрдЭреЗ рд╕реВрдЯ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрд░реНрдбреБрдЗрдиреЛ рдЖрдИрдбреАрдИ рдореЗрдВ 50 рд╕реЗ рдЕрдзрд┐рдХ рд▓рд╛рдЗрдиреЛрдВ рдкрд░ рдХреБрдЫ рд▓рд┐рдЦрдирд╛ рджрд░реНрджрдирд╛рдХ рдФрд░ рджрд░реНрджрдирд╛рдХ рд░реВрдк рд╕реЗ рд▓рдВрдмрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдИрдбреАрдИ рдЪреБрдирдиреЗ рдкрд░ рд╕рд╡рд╛рд▓ рдЙрдард╛ред  рдХреНрдпреЛрдВрдХрд┐  рдореИрдВ VS рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реВрдВ, рдореИрдВрдиреЗ <a href="https://visualgdb.com/tutorials/arduino/esp32/">VisualGDB</a> рдкрд░ <a href="https://visualgdb.com/tutorials/arduino/esp32/">рд╕рдордЭреМрддрд╛ рдХрд┐рдпрд╛ рд╣реИ</a> ред </p><br><p>  Arduino IDE рдХреЗ рдмрд╛рдж, ESP32 рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд╛рд╕ рдХреЗрд╡рд▓ рдПрдХ рдЖрд╢реНрд░рдп рд╣реИред  рдкрд░рд┐рднрд╛рд╖рд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреНрдпрд╛ рд╣реИ, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХреЙрд▓ рдХреА рдЦреЛрдЬ рдФрд░ рдЪрд░ рдХрд╛ рдирд╛рдо рдмрджрд▓рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред </p><br><h3 id="izmenenie-tablicy-razdelov-esp32-pri-rabote-s-visualgdb">  VisualGDB рдХреЗ рд╕рд╛рде ESP32 рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдмрджрд▓рдирд╛ </h3><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддрд╛рд▓рд┐рдХрд╛ рдХреЛ ESP32 рд╡рд┐рднрд╛рдЬрди рдХреЗ рд╕рд╛рде рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ; рд╣рдо рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br>  рддрд╛рд▓рд┐рдХрд╛ рдХреЛ csv рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ VisualGDB рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд╛рд▓рд┐рдХрд╛ рд▓рд┐рдЦрддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs">Name, Type, SubType, Offset, Size, Flags nvs, data, nvs, 0x9000, 0x5000, otadata, data, ota, 0xe000, 0x2000, app0, app, ota_0, 0x10000, 0x140000, app1, app, ota_1, 0x150000,0x140000, spiffs, data, spiffs, 0x290000,0x170000,</code> </pre> <br><p>  рдпрд╣рд╛рдВ рд╣рдо NVS рдХреЗ рддрд╣рдд рдПрдХ рд╕реЗрдХреНрд╢рди, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рджреЛ рд╕реЗрдХреНрд╢рди рдФрд░ рдХреБрдЫ рдФрд░ рд╕реЗрдХреНрд╢рди рджреЗрдЦрддреЗ рд╣реИрдВред  рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдореЗрдВ, рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ app0 (рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди) рд╣рдореЗрд╢рд╛ рд╢реВрдиреНрдп рдкрддреЗ рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдСрдлрд╕реЗрдЯ 0x10000 рдкрд░ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рдмреВрдЯрд▓реЛрдбрд░ рдЗрд╕рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рд▓рдЧрд╛рдПрдЧрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдСрдлрд╕реЗрдЯ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдЕрдиреБрднрд╛рдЧ рдПрдХ-рджреВрд╕рд░реЗ рдХреЛ "рдУрд╡рд░рд▓реИрдк" рди рдХрд░реЗрдВред  рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рд╕реНрд╡рдпрдВ рдСрдлрд╕реЗрдЯ 0x8000 рдкрд░ рд▓рд┐рдЦреА рдЧрдИ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдирд╡реАрдПрд╕ рдХрд╛ рдЖрдХрд╛рд░ 0x5000 - 20KB рд╣реИ, рдЬреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдореИрдВрдиреЗ рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">Name, Type, SubType, Offset, Size, Flags app0, app, ota_0, 0x10000, 0x140000, nvs, data, nvs, , 1M, otadata, data, ota, , 0x2000, spiffs, data, spiffs, , 0x170000,</code> </pre><br><p>  рдирд╛рдо рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдЧреНрд░рд┐рдб рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛, рдпрджрд┐ рдЖрдк рдЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдкрдВрдХреНрддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдПрдирд╡реАрдПрд╕ рдХрд╛ рдЖрдХрд╛рд░ 1 рдПрдордмреА рддрдХ рдмрдврд╝ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдСрдлрд╕реЗрдЯ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЕрдиреБрднрд╛рдЧ рдкрд┐рдЫрд▓реЗ рдПрдХ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдХреЗрд╡рд▓ app0 рдХреЗ рд▓рд┐рдП рдСрдлрд╕реЗрдЯ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  CSV рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдиреЛрдЯрдкреИрдб рдореЗрдВ txt рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рд╕рд╣реЗрдЬреЗ рдЧрдП рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП csv рдХреА рдЕрдиреБрдорддрд┐ рдХреЛ рдмрджрд▓ рджреЗрдВред </p><br><p>  рдЕрдЧрд▓рд╛, рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдмрд╛рдЗрдирд░реА рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐  рдпрд╣ рдЗрд╕ рд░реВрдк рдореЗрдВ рдирд┐рдпрдВрддреНрд░рдХ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдирд╡рд░реНрдЯрд░ рдЪрд▓рд╛рдПрдВ: <br>  <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\tools\gen_esp32part.exe part_table_name.csv part_table_name.bin</code> ред  рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдЖрдкрдХрд╛ CSV рд╣реИ, рджреВрд╕рд░рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдирд░реА рд╣реИред </p><br><p>  рдкрд░рд┐рдгрд╛рдореА рдмрд╛рдЗрдирд░реА рдХреЛ <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\tools\partitions\part_table_name.csv</code> , рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдпрд╣ рд╡рд╣ рдерд╛ рдЬрд┐рд╕реЗ рд╕рдорд╛рдзрд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдХреЛрдИ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рдирд╣реАрдВред  рдЖрдк рдлрд╝рд╛рдЗрд▓ <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\boards.txt</code> рдореЗрдВ рдЕрдкрдиреА рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдирд╛рдо рд▓рд┐рдЦрдХрд░ рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ <code>esp32doit-devkit-v1.build.partitions=part_table_name</code> <br>  рдЗрди рдЬреЛрдбрд╝рддреЛрдбрд╝ рдХреЗ рдмрд╛рдж, рдЬрдм рдЖрд╡реЗрджрди рдХрд╛ рдирд┐рд░реНрдорд╛рдг VisualGDB рдмрд┐рд▓реНрдХреБрд▓ рдЖрдкрдХреЗ рд╡рд┐рднрд╛рдЬрди рддрд╛рд▓рд┐рдХрд╛ рд▓реЗ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЗрд╕реЗ рдЕрдВрджрд░ рдбрд╛рд▓ рджреЗрдЧрд╛ <br>  <code>~project_folder_path\Output\board_name\Debug\project_name.ino.partitions.bin</code> , рдЬрд╣рд╛рдВ рд╕реЗ рдЗрд╕реЗ рдкрд╣рд▓реЗ рд╣реА рдмреЛрд░реНрдб рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><h3 id="jtag-otladchik-cjmc-ft232h">  JTAG рдбрд┐рдмрдЧрд░ CJMC-FT232H </h3><br><p>  рдЬрд╣рд╛рдВ рддрдХ тАЛтАЛрдореБрдЭреЗ рдкрддрд╛ рд╣реИ, рдпрд╣ рд╕рдмрд╕реЗ рд╕рд╕реНрддрд╛ рдбрд┐рдмрдЧрд░ рд╣реИ рдЬреЛ рдИрдПрд╕рдкреА 32 рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рдиреЗ рдореБрдЭреЗ рд▓рдЧрднрдЧ 600 рд░реВрдмрд▓ рдХреА рд▓рд╛рдЧрдд рджреА, рдЙрдирдореЗрдВ рд╕реЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╣реИрдВ рдЕрд▓рд┐рдХреНрд╕рдкреНрд░реЗрд╕ред </p><br><p><img src="https://habrastorage.org/webt/gn/cu/gm/gncugmqpjnb1hbmj630nnegxjgq.jpeg"></p><br><p>  рдЬрдм рдЖрдк рдбрд┐рдмрдЧрд░ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡рд┐рдВрдбреЛрдЬ рдЙрд╕ рдкрд░ рдЕрдиреБрдкрдпреБрдХреНрдд рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЬрд╝рдбрд┐рдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛, рд╡рд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИ, рдореИрдВ рдЗрд╕рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ред </p><br><p>  рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░реАрдХреЗ рд╕реЗ ESP32 рджреЗрд╡рдХрд┐рдЯ-v1 рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИ: <br>  FT232H - ESP32 <br>  AD0 - GPIO13 <br>  AD1 - GPIO12 <br>  AD2 - GPIO15 <br>  AD3 - GPIO14 <br>  рдлрд┐рд░, <code>Project -&gt; VisualGDB Project Properties</code> рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/eg/oi/7b/egoi7bhrpkjaprfvyz-jd9puccw.jpeg"></p><br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж Test рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдХрднреА-рдХрднреА рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдХрдиреЗрдХреНрд╢рди рдкрд╣рд▓реА рдмрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реНрдерд┐рд░ рд╣реЛрдиреЗ рд▓рдЧрддреА рд╣реИ, рдлрд┐рд░ рдЖрдкрдХреЛ рдЯреЗрд╕реНрдЯ рдХреЛ рджреЛрд╣рд░рд╛рдиреЗ рдФрд░ рджреЛрд╣рд░рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдпрджрд┐ рд╕рдм рдХреБрдЫ рдХреНрд░рдо рдореЗрдВ рд╣реИ, рддреЛ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд▓рдЧрднрдЧ 5 рд╕реЗрдХрдВрдб рд▓рдЧрддреЗ рд╣реИрдВред </p><br><p>  рдореИрдВрдиреЗ рдЖрдорддреМрд░ рдкрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдФрд░ рдЗрд╕реЗ USB рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ ESP32 рдореЗрдВ рд╣реА (рдбрд┐рдмрдЧрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд╣реАрдВ) рдЕрдкрд▓реЛрдб рдХрд┐рдпрд╛, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдореИрдВрдиреЗ <code>Debug -&gt; Attach to Running Embedded Firmware</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрд┐рдмрдЧрд┐рдВрдЧ рд╢реБрд░реВ рдХрд░ рджреА <code>Debug -&gt; Attach to Running Embedded Firmware</code> ред  рдХреЛрдб рдореЗрдВ, рдЖрдк рдмреНрд░реЗрдХрдкреЙрдЗрдВрдЯреНрд╕ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмреНрд░реЗрдХрдбрд╛рдЙрди рдХреЗ рд╕рдордп рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рджреЗрдЦреЗрдВ рдФрд░ <code>Debug -&gt; Windows -&gt; Threads</code> рд╡рд┐рдВрдбреЛ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдлреНрд░реАрдЯреНрд░реЙрд╕ рдХрд╛рд░реНрдп рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ рдЧрдпрд╛ рдХреЛрдб рд╣реИ, рдЬреЛ рдбреАрдмрдЧрд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рддреНрд░реБрдЯрд┐ рд╣реЛрдиреЗ рдкрд░ рдЙрдкрдпреЛрдЧреА рд╣реИред  рдбрд┐рдмрдЧрд░ рдХреЗ рдпреЗ рдХрд╛рд░реНрдп рдореЗрд░реЗ рд▓рд┐рдП рдЖрд░рд╛рдо рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдереЗред <br>  рдЬрдм рдореИрдВрдиреЗ рдПрдирд╡реАрдПрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛, рддреЛ рдбрд┐рдмрдЧрд┐рдВрдЧ рд▓рдЧрд╛рддрд╛рд░ рдЕрд╕реНрдкрд╖реНрдЯ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рдмрд╛рдзрд┐рдд рдерд╛ред  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рд╕рдордЭрддрд╛ рд╣реВрдВ, рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рдмрдЧрд░ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ NVS рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдбрдВрдк рдЬреИрд╕рд╛ рдХреБрдЫ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рд╕рдордп NVS рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рдпрдВрддреНрд░рдХ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдмреЗрд╢рдХ, рдпрд╣ 2 рдПрдирд╡реАрдПрд╕ рд╡рд┐рднрд╛рдЬрди рдмрдирд╛рдХрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдПрдХ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдирд╛рдо рдФрд░ рджреВрд╕рд░рд╛ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдПред  рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдБ рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рдерд╛, рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЛрдб рдореЗрдВ, рдЗрд╕рдиреЗ рдкрд╣рд▓реА рдмрд╛рд░ рдХрд╛рдо рдХрд┐рдпрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЗрд╕рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреАред </p><br><h3 id="glyuki-esp32">  Glitches ESP32 </h3><br><p>  Aliexpress рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдЙрдкрдХрд░рдг рдХреА рддрд░рд╣, рдореЗрд░реЗ ESP32 рдмреЛрд░реНрдб рдХреА рдЕрдкрдиреА рдереА, рдЬрд┐рд╕рдХрд╛ рд╡рд░реНрдгрди рдХрд╣реАрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЬрдм рд╡рд╣ рдкрд╣реБрдВрдЪреА, рддреЛ рдореИрдВрдиреЗ рдмреЛрд░реНрдб рд╕реЗ I2C рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреБрдЫ рдмрд╛рд╣реНрдп рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдЦрд┐рд▓рд╛рдпрд╛, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╕рдордп рдмрд╛рдж, рдмреЛрд░реНрдб рдиреЗ рд░рд┐рдмреВрдЯ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛, рдЕрдЧрд░ рдХреЛрдИ рднреА рдЙрдкрднреЛрдЧ рдЙрдкрдХрд░рдг рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рд╕рдВрдзрд╛рд░рд┐рддреНрд░ + 5 рд╡реА рдкреИрд░ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рдерд╛ред  рдРрд╕рд╛ рдХреНрдпреЛрдВ рд╣реИ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдордЭ рд╕реЗ рдмрд╛рд╣рд░ рд╣реИред </p><br><p>  рдЕрдм рдореИрдВ рдмреЛрд░реНрдб рдХреЛ рдЪреАрдиреА рдЪрд╛рд░реНрдЬ 0.7A, 3.3V рдмреЛрд░реНрдб рдХреЗ рдкреИрд░ рд╕реЗ ds18b20 рд╕реЗрдВрд╕рд░ рдФрд░ 2A рдХреЗ рджреВрд╕рд░реЗ рдЪрд╛рд░реНрдЬ рд╕реЗ рд░рд┐рд▓реЗ рдФрд░ рдореЛрд╢рди рд╕реЗрдВрд╕рд░ рд╕реЗ рдкрд╛рд╡рд░ рджреЗрддрд╛ рд╣реВрдВред  рдмреЛрд░реНрдб рдХрд╛ GND рдкреИрд░ рдмреЗрд╢рдХ рдмрд╛рдХреА рд▓реЛрд╣реЗ рдХреЗ GND рдкрд┐рдВрд╕ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИред  рд╕рд╕реНрддрд╛ рдФрд░ рд╣рдВрд╕рдореБрдЦ рд╣рдорд╛рд░рд╛ рд╡рд┐рдХрд▓реНрдк рд╣реИред </p><br><h3 id="o-rezultatah-proekta">  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ </h3><br><p>  рдореБрдЭреЗ рдШрд░ рдореЗрдВ рд▓рдЪреАрд▓реЗрдкрди рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ, рдкреИрд╕реЗ рдФрд░ рдкрд╕реАрдиреЗ рдХреА рдХрдорд╛рдИ рдХреЛ рдмрдЪрд╛рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рдорд┐рд▓рд╛ред  рдлрд┐рд▓рд╣рд╛рд▓, рдЕрдЧрд░ рд╣реАрдЯрд┐рдВрдЧ рдкреВрд░реЗ рджрд┐рди 23 рдбрд┐рдЧреНрд░реА рдХреЛ -5 - -7 рдХреЗ рдмрд╛рд╣рд░ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдмреЙрдпрд▓рд░ рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рдЧрднрдЧ 11 рдШрдВрдЯреЗ рд╣реИред  рдпрджрд┐ рджрд┐рди рдХреЗ рджреМрд░рд╛рди 20 рдбрд┐рдЧреНрд░реА рдФрд░ рд╢рд╛рдо рдХреЛ рдХреЗрд╡рд▓ 23 рдХреЛ рдЧрд░реНрдо рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рддреЛ рдпрд╣ рдмреЙрдпрд▓рд░ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА 9 рдШрдВрдЯреЗ рд╣реИред  рдмреЙрдпрд▓рд░ рдХреА рдХреНрд╖рдорддрд╛ 6 рдХрд┐рд▓реЛрд╡рд╛рдЯ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ 2.2 рд░реВрдмрд▓ рдХреЗ рдХрд┐рд▓реЛрд╡рд╛рдЯ рдХреА рд╡рд░реНрддрдорд╛рди рдХреАрдордд рд╣реИ, рдпрд╣ рдкреНрд░рддрд┐ рджрд┐рди рд▓рдЧрднрдЧ 26.4 рд░реВрдмрд▓ рд╣реИред  рд╣рдорд╛рд░реЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╣реАрдЯрд┐рдВрдЧ рд╕реАрдЬрди рдХреА рдЕрд╡рдзрд┐ 200 рджрд┐рди рд╣реИ, рд╣реАрдЯрд┐рдВрдЧ рд╕реАрдЬрди рдореЗрдВ рдФрд╕рдд рддрд╛рдкрдорд╛рди рд╕рд┐рд░реНрдл -5 рдбрд┐рдЧреНрд░реА рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдо рд╣реАрдЯрд┐рдВрдЧ рдХреЗ рдореМрд╕рдо рдХреЗ рд▓рд┐рдП рд▓рдЧрднрдЧ 5000r рдмрдЪрдд рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдЙрдкрдХрд░рдгреЛрдВ рдХреА рд▓рд╛рдЧрдд 2000r рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЕрд░реНрдерд╛рдд, рдХреБрдЫ рдорд╣реАрдиреЛрдВ рдореЗрдВ рд▓рд╛рдЧрддреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕ рддрдереНрдп рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рди рдХреА рдПрдХ рддреИрдпрд╛рд░-рдирд┐рд░реНрдорд┐рдд рдкреНрд░рдгрд╛рд▓реА рдХреА рд▓рд╛рдЧрдд рдХрдо рд╕реЗ рдХрдо 20,000r рд╣реЛрдЧреАред  рдПрдХ рдФрд░ рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдореИрдВрдиреЗ рдлрд░реНрдорд╡реЗрдпрд░ рдФрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рд▓рдЧрднрдЧ рдПрдХ рд╕рдкреНрддрд╛рд╣ рдХрд╛ рд╕рдордп рдмрд┐рддрд╛рдпрд╛, рд▓реЗрдХрд┐рди рдХрд╛рдо рдХреЗ рджреМрд░рд╛рди, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдЖрдЦрд┐рд░рдХрд╛рд░ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдХрд┐ рд╕реА ++ рдореЗрдВ рдкреЙрдЗрдВрдЯрд░реНрд╕ рдХреНрдпрд╛ рд╣реИрдВ рдФрд░ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЕрдиреНрдп рдЕрдиреБрднрд╡ рдкреНрд░рд╛рдкреНрдд рд╣реБрдП рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрдИ рдШрдВрдЯреЛрдВ рдХреЗ рдЕрдиреБрднрд╡рд╣реАрди рдЧреНрд▓рд┐рдЪ рдХреЗ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХрд╛ рдЕрдиреБрднрд╡)ред  рдФрд░ рдЕрдиреБрднрд╡, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред </p><br><p>  Blynk рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ: </p><br><p><img src="https://habrastorage.org/webt/f8/a-/57/f8a-57tioype-tcgmjmodpagpwa.jpeg"></p><br><p><img src="https://habrastorage.org/webt/ez/3a/o3/ez3ao3_ht2lgjsbf9jvv_xcoksc.jpeg"></p><br><p><img src="https://habrastorage.org/webt/xi/xv/f-/xixvf-6pvrnw-2trm_toszimwrm.jpeg"></p><br><p>  рдмреЗрд╢рдХ, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХреЛрдб рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рдХреГрддрд┐ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЗрд╕реЗ рд╕рдордп рдХреА рдХрдореА рдХреА рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦрд╛ рдерд╛ рдФрд░ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдкрдардиреАрдпрддрд╛ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд┐рдпрд╛ рдерд╛ред  рд░рд┐рдлреНрд▓реЗрдХреНрдЯрд░ рдХреЗ рд▓рд┐рдП рдмрд╕ рдХреЛрдИ рд╕рдордп рдирд╣реАрдВ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдореЗрд░реЗ рдкрд╛рд╕ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдмрд╣рд╛рдиреЗ рд╣реЛрддреЗ рд╣реИрдВ рдХрд┐ рдореЗрд░рд╛ рдХреЛрдб рдЗрддрдирд╛ рдбрд░рд╛рд╡рдирд╛ рдХреНрдпреЛрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдореЗрд░рд╛ рдкрд╕рдВрджреАрджрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЗрд╕ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реВрдВрдЧрд╛, рдореИрдВрдиреЗ рдЗрд╕ рд╡рд┐рд╖рдп рдХреЛ рдФрд░ рд╡рд┐рдХрд╕рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ред </p><br><p>  рдЕрдЧрд░ рдореЗрд░рд╛ рд╕реНрдХреНрд░рд┐рдмрд▓ рдХрд┐рд╕реА рдХреА рдорджрдж рдХрд░рддрд╛ рд╣реИ, рддреЛ рдореБрдЭреЗ рдЦреБрд╢реА рд╣реЛрдЧреАред  рдореБрдЭреЗ рдХрд┐рд╕реА рднреА рдЯрд┐рдкреНрдкрдгреА рдФрд░ рд╕реБрдЭрд╛рд╡ рдкрд░ рдЦреБрд╢реА рд╣реЛрдЧреАред </p><br><div class="spoiler">  <b class="spoiler_title">рд╕рдВрджрд░реНрднреЛрдВ рдХреА рд╕реВрдЪреА</b> <div class="spoiler_text"><ol><li>  <a href="http://microsin.net/programming/ARM/freertos-part1.html">http://microsin.net/programming/ARM/freertos-part1.html</a> </li><li>  <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html">https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html</a> </li><li>  <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/partition-tables.html">https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/partition-tables.html</a> </li><li>  <a href="https://docs.blynk.cc/">https://docs.blynk.cc/</a> </li></ol><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi479156/">https://habr.com/ru/post/hi479156/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi479144/index.html">рдХреНрдпрд╛ рдореБрдЭреЗ рдЕрдкрдирд╛ рдмреНрд░рд╛рдВрдб рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi479146/index.html">рдмрд╛рдпрдкрд╛рд╕ рдЯреВрд▓ \ VPN рдХреА рддреБрд▓рдирд╛</a></li>
<li><a href="../hi479150/index.html">рдХреГрд╖рд┐ рд░реЛрдмреЛрдЯ рдЖрдЧреЗ рдмрдврд╝ рд░рд╣реЗ рд╣реИрдВ</a></li>
<li><a href="../hi479152/index.html">рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдФрд░ Vue рдмрд┐рдирд╛ npm рдФрд░ рдмрдирд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi479154/index.html">рдЕрднреА рднреА рдПрдХ рд▓рдбрд╝рд╛рдИ рдпрд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ?</a></li>
<li><a href="../hi479158/index.html">рдЖрдИрдЯреАрдЖрдИрдПрд▓ рдХреЗ 7 рдореВрд▓рднреВрдд рд╕рд┐рджреНрдзрд╛рдВрдд</a></li>
<li><a href="../hi479162/index.html">рд╕реМрд░ рдордВрдбрд▓ рдХреЗ рдЧреНрд░рд╣реЛрдВ рдкрд░ рдФрд░реЛрд░рд╛</a></li>
<li><a href="../hi479164/index.html">рдИрдИрдЬреА рдХреНрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ</a></li>
<li><a href="../hi479166/index.html">рдЯреИрд░рдирдЯреВрд▓ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдХреИрдкреНрдб рдПрдХреНрд╕рдкрд╛рдпрд░реАрдб рдореЙрдбреНрдпреВрд▓ рд▓рд┐рдЦрдирд╛</a></li>
<li><a href="../hi479168/index.html">MODX рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП Symfony 5 + API рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рдПрдХ RESTful API рдХреИрд╕реЗ рдмрдирд╛рдПрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>