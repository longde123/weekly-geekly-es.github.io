<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🚀 📼 💃 Axios ou Fetch: o que usar em 2019? 😇 🤷🏽 💆🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Axios é uma biblioteca JavaScript bem conhecida. É um cliente HTTP baseado em promessa para navegadores e Node.js. Se você trabalhou como programador ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Axios ou Fetch: o que usar em 2019?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/477286/">  Axios é uma biblioteca JavaScript bem conhecida.  É um cliente HTTP baseado em promessa para navegadores e Node.js.  Se você trabalhou como programador JavaScript nos últimos anos, definitivamente utilizou esta biblioteca.  Em outubro de 2019, o pacote Axios foi baixado da npm 25 milhões de vezes.  Parece que o futuro do Axios é sem nuvens.  Mas e se eu lhe disser que o Axios é um projeto morto?  É exatamente disso que tratava uma <a href="https://www.reddit.com/r/javascript/comments/cp5qhm/askjs_the_sad_state_of_axios/">discussão</a> no Reddit.  Ou seja, estamos falando sobre o seguinte: <br><br><ul><li>  O repositório do Axios GitHub tem um nível muito baixo de atividade do desenvolvedor. </li><li>  Problemas e relações públicas são ignorados. </li><li>  A equipe de desenvolvimento está em silêncio. </li></ul><br>  A situação é agravada pela <a href="http-client/">vulnerabilidade</a> amplamente discutida.  Esta vulnerabilidade foi relatada em 2017.  Os autores do projeto a ignoraram por mais de dois anos. <br><br>  Quando a biblioteca Axios se tornou popular, os navegadores não tinham uma API que implementa um cliente HTTP baseado em promessa.  A interface XML HTTP Request (XHR) padrão era inconveniente, era difícil trabalhar com ela.  Os desenvolvedores aceitaram com prazer o Axios devido ao fato de que essa biblioteca tornou sua vida mais fácil. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/477286/"><img src="https://habrastorage.org/webt/fr/jb/pq/frjbpqwjpvxct8xuypzu5wxyvgi.png"></a> <br><br>  A API de busca foi lançada em 2015.  Por que ainda estamos usando o Axios em 2019?  Vamos comparar essas duas tecnologias. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Volume do código do modelo</font> </h2><br><h3>  <font color="#3AC1EF">▍Fetch</font> </h3><br><pre><code class="javascript hljs">fetch(<span class="hljs-string"><span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span></span>)   .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())   .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(json)) <span class="hljs-comment"><span class="hljs-comment">// { //  "userId": 1, //  "id": 1, //  "title": "delectus aut autem", //  "completed": false // }</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍Axios</font> </h3><br><pre> <code class="javascript hljs">axios.get(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/todos/1"</span></span>)  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"response"</span></span>, response.data)) <span class="hljs-comment"><span class="hljs-comment">// { //  "userId": 1, //  "id": 1, //  "title": "delectus aut autem", //  "completed": false // }</span></span></code> </pre> <br>  Ao usar o Fetch, você precisa lidar com duas promessas.  Porém, ao trabalhar com o Axios, temos acesso direto ao resultado JSON na propriedade de <code>data</code> do objeto de resposta. <br><br>  O método <a href="https://developer.mozilla.org/en-US/docs/Web/API/Body">body</a> mixin <code>json()</code> pega um fluxo de <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">resposta</a> e o lê completamente.  Ele retorna uma promessa que é resolvida pelo resultado JSON da análise do texto do corpo da solicitação. <br><br>  Você precisa usar ainda mais código padrão no Fetch ao trabalhar com solicitações POST. <br><br><h3>  <font color="#3AC1EF">▍Fetch</font> </h3><br><pre> <code class="javascript hljs">fetch(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/posts"</span></span>, {  <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>,  <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify({    <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">"Title of post"</span></span>,    <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-string"><span class="hljs-string">"Post Body"</span></span>  }) })  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!response.ok) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(response.statusText);    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json();  })  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data))  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error));</code> </pre> <br><h3>  <font color="#3AC1EF">▍Axios</font> </h3><br><pre> <code class="javascript hljs">axios  .post(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/posts"</span></span>, {    <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">"Title of post"</span></span>,    <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-string"><span class="hljs-string">"Body of post"</span></span>  })  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(response.data))  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error));</code> </pre> <br>  O uso do Axios evita a gravação de grandes quantidades de código padrão e torna o código mais limpo e claro. <br><br><h2>  <font color="#3AC1EF">Tratamento de erros</font> </h2><br><h3>  <font color="#3AC1EF">▍Fetch</font> </h3><br><pre> <code class="javascript hljs">fetch(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/todos/100000"</span></span>)  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!response.ok) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(response.statusText);    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json();  })  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"data"</span></span>, data))  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error"</span></span>, error);  }); <span class="hljs-comment"><span class="hljs-comment">// error Error: Not Found</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍Axios</font> </h3><br><pre> <code class="javascript hljs">axios  .get(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/todos/100000"</span></span>)  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"response"</span></span>, response);  })  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error"</span></span>, error);  }); <span class="hljs-comment"><span class="hljs-comment">// error Error: Not Found</span></span></code> </pre> <br>  A biblioteca Axios relata erros de rede, mas a API Fetch não.  Ao trabalhar com a Busca, você sempre precisa verificar a propriedade <code>response.ok</code> .  Para simplificar a solução desse problema, a verificação desse erro pode ser emitida como uma função separada: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> checkForError = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!response.ok) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(response.statusText);  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json(); }; fetch(<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/todos/100000"</span></span>)  .then(checkForError)  .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"data"</span></span>, data))  .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"error"</span></span>, error);  });</code> </pre> <br><h2>  <font color="#3AC1EF">Recursos ausentes</font> </h2><br>  O Axios pode monitorar o progresso do upload de dados.  A busca não suporta isso.  Isso pode ser um fator decisivo na escolha da tecnologia para aqueles que estão desenvolvendo um aplicativo que permite aos usuários fazer upload de fotos ou arquivos de vídeo no servidor. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = {  <span class="hljs-attr"><span class="hljs-attr">onUploadProgress</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(event.loaded) }; axios.put(<span class="hljs-string"><span class="hljs-string">"/api"</span></span>, data, config);</code> </pre> <br><h2>  <font color="#3AC1EF">Bibliotecas alternativas</font> </h2><br>  Aqui estão algumas alternativas para o Axios e a API Fetch: <br><br><ul><li>  <a href="https://github.com/sindresorhus/ky">Ky</a> é um cliente HTTP miniatura e inteligente baseado em <code>window.fetch</code> . </li><li>  <a href="https://www.npmjs.com/package/superagent">Superagent</a> é uma pequena biblioteca cliente HTTP progressiva baseada em <code>XMLHttpRequest</code> . </li></ul><br><h2>  <font color="#3AC1EF">Sumário</font> </h2><br>  O que devo usar em 2019?  Depende muito.  Por exemplo, se você precisar acompanhar o andamento do upload de materiais para um servidor, o Axios ou o Superagent é melhor para você.  Se você pode lidar com as limitações de Buscar, é melhor usar esta API.  E, para melhorar um pouco o código de busca, tente uma biblioteca de wrapper como o Ky. <br><br>  <b>Caros leitores!</b>  Quais clientes HTTP você usa em seus projetos? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/vps_start/"><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477286/">https://habr.com/ru/post/pt477286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477274/index.html">Como você se livra do código CSS não utilizado? Parte 1</a></li>
<li><a href="../pt477276/index.html">Como você se livra do código CSS não utilizado? Parte 2</a></li>
<li><a href="../pt477278/index.html">Teste de front-end</a></li>
<li><a href="../pt477282/index.html">Criação de perfil do código do projeto Go e resolução de problemas de alocação de memória</a></li>
<li><a href="../pt477284/index.html">Por que o JavaScript é necessário no modo estrito?</a></li>
<li><a href="../pt477288/index.html">John Lewis na conferência Undoing Aging 2018</a></li>
<li><a href="../pt477290/index.html">Eventos digitais em Moscou, de 25 de novembro a 1 de dezembro</a></li>
<li><a href="../pt477292/index.html">Eventos digitais em São Petersburgo, de 25 de novembro a 1 de dezembro</a></li>
<li><a href="../pt477294/index.html">Python para IA: uma partida feita no céu</a></li>
<li><a href="../pt477296/index.html">Função Buildargv com Ragel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>