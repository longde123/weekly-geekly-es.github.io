<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🤝‍👨🏾 🐇 🤙🏿 Jangan memuat - jangan menguji: bagaimana kami mengidentifikasi masalah dengan sistem manajemen dokumen VTB 🈸 🦄 ☘️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, VTB telah mengubah beberapa komponen perangkat keras dan perangkat lunak dari sistem alur kerja. Perubahan itu terlalu signifikan untuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jangan memuat - jangan menguji: bagaimana kami mengidentifikasi masalah dengan sistem manajemen dokumen VTB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/467647/">  Baru-baru ini, VTB telah mengubah beberapa komponen perangkat keras dan perangkat lunak dari sistem alur kerja.  Perubahan itu terlalu signifikan untuk terus bekerja tanpa pengujian beban skala penuh: masalah dengan sistem pendukung dokumen (LMS) penuh dengan kerugian besar. <br><br><img src="https://habrastorage.org/webt/yc/vo/e5/ycvoe5se_fq1pfmmaumbgodslew.jpeg"><br><br>  Spesialis Intertrust menguji VTB SDO pada peralatan Huawei - sebuah komplek server farm, jaringan data, dan penyimpanan yang didasarkan pada solid-state drive.  Untuk pengujian, kami menciptakan lingkungan yang mereproduksi skenario nyata dengan beban maksimum yang mungkin.  Hasil dan kesimpulan - di bawah potongan. <br><a name="habracut"></a><br><h2>  Mengapa kita membutuhkan sistem alur kerja di bank dan mengapa mengujinya </h2><br>  LMS di VTB adalah paket perangkat lunak yang kompleks, di mana semua proses manajemen utama diikat.  Sistem ini menyediakan layanan dokumentasi umum, interaksi elektronik, analitik.  Peredaran dokumen yang terorganisasi dengan baik mempercepat keputusan manajemen, menjadikan prosedur untuk adopsi mereka transparan dan terkendali, meningkatkan kualitas manajemen dan meningkatkan daya saing bank. <br><br>  LMS harus memastikan implementasi keputusan yang jelas sesuai dengan peraturan yang berlaku.  Ini membutuhkan kinerja tinggi, toleransi kesalahan, penskalaan fleksibel.  Sistem memiliki persyaratan tinggi untuk kontrol akses, volume dokumen yang diproses secara bersamaan, dan jumlah pengguna.  Sekarang ada 65 ribu di antaranya di VTB SDO, dan jumlah ini terus bertambah. <br><br>  Sistem ini terus berkembang: arsitektur berubah, teknologi yang ketinggalan zaman digantikan oleh yang modern.  Dan baru-baru ini, beberapa komponen sistem diganti dengan yang independen-impor, tanpa perangkat lunak berpemilik.  Apakah arsitektur SDO baru yang didasarkan pada perangkat lunak CompanyMedia dan kompleks perangkat keras Huawei menangani peningkatan beban?  Jelas menjawab pertanyaan ini, tanpa menunggu situasi yang sama dalam kenyataan, itu hanya mungkin dengan bantuan stress testing. <br><br>  Selain menguji produk perangkat lunak baru untuk ketahanan terhadap stres, kami memiliki tugas-tugas berikut: <br><br><ul><li>  menentukan parameter yang tepat untuk ukuran horizontal dan vertikal server untuk profil beban bank; <br></li><li>  memeriksa komponen untuk toleransi kesalahan dalam kondisi beban tinggi; <br></li><li>  untuk mengidentifikasi koefisien entropi interaksi interkluster dengan penskalaan horizontal; <br></li><li>  coba ubah permintaan baca saat menggunakan penyeimbang platform; <br></li><li>  menentukan faktor penskalaan horizontal semua node dan komponen sistem; <br></li><li>  menentukan parameter perangkat keras maksimum yang mungkin dari server untuk berbagai keperluan fungsional (penskalaan vertikal); <br></li><li>  untuk mempelajari profil beban aplikasi pada infrastruktur teknis, untuk memperkirakan hasil untuk perencanaan pengembangan sistem informasi; <br></li><li>  Selidiki dampak konsolidasi data aplikasi pada sistem penyimpanan data tunggal pada optimalisasi sumber daya, meningkatkan keandalan dan kinerja. <br></li></ul><br><h2>  Metodologi dan peralatan </h2><br>  Pengujian beban sistem manajemen dokumen elektronik sering dilakukan sesuai dengan skenario yang disederhanakan.  Mereka mensimulasikan penemuan cepat dan pembukaan kartu dokumen yang tidak terkait dengan file lain dan tidak memiliki riwayat siklus hidup.  Dalam hal ini, sebagai suatu peraturan, tidak ada yang memperhitungkan hak akses akun dan faktor-faktor konsumsi sumber daya lainnya yang merupakan karakteristik kondisi riil. <br><br>  Seringkali, tes cerai ini dilakukan oleh penyedia solusi.  Dapat dimengerti: penting bagi vendor untuk menunjukkan kepada klien potensial kinerja tinggi dan kecepatan sistem.  Tidak mengherankan bahwa model pengujian yang disederhanakan menunjukkan waktu respons sistem rekaman, bahkan jika jumlah pengguna dan dokumen meningkat secara signifikan. <br><br>  Kami perlu mereproduksi kondisi operasi yang sebenarnya.  Karena itu, pada awalnya, kami mengumpulkan statistik selama sebulan: kami mencatat aktivitas pengguna, menyaksikan pekerjaan latar belakang semua layanan.  Sistem pemantauan yang terintegrasi dalam LMS menjadi sangat membantu dalam hal ini.  Karyawan bank membantu untuk mengoreksi data yang dihasilkan pada arus dokumen, sementara kami membuat penyesuaian untuk proyeksi pertumbuhan arus. <br><br>  Hasilnya adalah metodologi pengujian, dengan bantuan yang memungkinkan untuk mensimulasikan proses yang terjadi dalam sistem, dengan mempertimbangkan semua beban nyata.  Di bangku tes, kami mereproduksi - secara individu dan dalam berbagai kombinasi - operasi bisnis yang paling umum, serta permintaan yang paling memakan waktu.  Selama pengujian kinerja, semua komponen mengalami stres.  Operasi dilakukan untuk menghitung hak akses pengguna ke objek sistem, membuka dokumen dengan hierarki bercabang kompleks dan sejumlah besar tautan, mencari sistem, dan sebagainya. <br><br><h3>  Profil pengujian beban: </h3><br><ul><li>  pengguna terdaftar: 65 ribu dengan peningkatan hingga 150 ribu; <br></li><li>  frekuensi login pengguna (otentikasi): 50 ribu per jam; <br></li><li>  pengguna secara bersamaan bekerja di sistem: 10 ribu; <br></li><li>  dokumen terdaftar: 10 juta per tahun; <br></li><li>  volume lampiran file: 1 TB per tahun; <br></li><li>  dokumen proses persetujuan: 1,5 juta per tahun; <br></li><li>  visa para pihak dalam perjanjian: 7,5 juta per tahun; <br></li><li>  resolusi dan instruksi: 15 juta per tahun; <br></li><li>  laporan tentang resolusi dan instruksi: 15 juta per tahun; <br></li><li>  tugas pengguna: 18 juta per tahun. <br></li></ul><br>  Aplikasi ini dikonsolidasikan pada sistem penyimpanan tunggal Huawei OceanStor Dorado 6000 V3 dengan 117 drive SSD masing-masing 3,6 TB, total volume yang dapat digunakan lebih dari 300 TB.  Daya komputasi ditempatkan pada sistem server modular Huawei E9000, dan data ditransmisikan melalui jaringan berdasarkan sakelar tingkat pusat data seri Huawei CE.  Selama pengujian, kami setiap saat mengamati semua indikator sistem.  Semua hasil, termasuk data historis, direkam dalam bentuk grafik dan tabel untuk analisis selanjutnya. <br><br><h3>  Server Infrastruktur Perangkat Keras Uji Beban </h3><br><br><img src="https://habrastorage.org/webt/_e/2s/jw/_e2sjwzdxhukjiw-glhk_vj3j98.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b4/1e0/a74/9b41e0a74f08b980c948037de04d525a.png"><br><br>  Karena kinerja tinggi sistem penyimpanan Huawei OceanStor Dorado 6000 V3, keterlambatan saat melakukan permintaan pengguna jarang melebihi 1 ms.  Kecepatan subsistem disk aplikasi ini menginspirasi kami untuk penelitian lebih lanjut.  Kami memutuskan, dengan menganalisis data historis, untuk menentukan pengaruh berbagai jenis beban kerja pada infrastruktur teknis.  Hasil yang diperoleh memungkinkan kami untuk secara fleksibel dan akurat merencanakan pengembangan sistem sesuai dengan persyaratan untuk platform perangkat keras. <br><br><h3>  Dalam hal penskalaan, kami memeriksa: </h3><br><ul><li>  batas skala vertikal <b>server aplikasi (CMJ)</b> , sumber daya kritikalitas: jumlah core dan frekuensi, jumlah RAM; <br></li><li>  dukungan untuk penskalaan horizontal dari <b>server aplikasi (CMJ)</b> dengan menduplikasi layanan yang identik secara fungsional dan menyeimbangkannya; <br></li><li>  batas penskalaan vertikal dan horizontal dari <b>server klien (Web-GUI)</b> ; <br></li><li>  batas penskalaan vertikal <b>penyimpanan file (FS)</b> , sumber daya kritikalitas: bandwidth jaringan, kecepatan disk; <br></li><li>  dukungan untuk penskalaan horizontal <b>penyimpanan file (FS)</b> karena sistem file terdistribusi - CEPH, GLUSTERFS; <br></li><li>  batas skala vertikal dari <b>database (PostgreSQL)</b> , sumber daya sesuai dengan tingkat kekritisan: kapasitas RAM, kecepatan disk, jumlah core dan frekuensi; <br></li><li>  dukungan untuk penskalaan <b>basis data</b> horizontal <b>(PostgreSQL)</b> : penskalaan beban baca pada server slave, penskalaan beban penulisan berdasarkan prinsip pembagian menjadi modul fungsional; <br></li><li>  batas penskalaan vertikal dan horizontal dari <b>pialang pesan (Apache Artemis)</b> ; <br></li><li>  batas penskalaan vertikal dan horizontal dari <b>server pencarian (Apache Solr)</b> . <br></li></ul><br><h2>  Masalah dan Solusi </h2><br>  Salah satu tugas utama adalah untuk mengidentifikasi kemungkinan masalah dengan kinerja LMS.  Selama pekerjaan, hambatan berikut diidentifikasi dan cara untuk mengatasinya ditemukan. <br><br>  <b>Mengunci logging yang sinkron.</b>  Operasi pencatatan dalam konfigurasi WildFly standar dilakukan secara serempak dan sangat memengaruhi kinerja.  Diputuskan untuk beralih ke logger asinkron, dan pada saat yang sama menulis bukan ke disk, tetapi ke sistem agregasi log ELK. <br><br>  <b>Inisialisasi sesi yang tidak perlu ketika bekerja dengan data warehouse.</b>  Setiap utas yang menerima data dari repositori dua kali menginisialisasi sesi untuk otentikasi dalam mode SSO.  Operasi ini intensif sumber daya dan sangat meningkatkan waktu pelaksanaan permintaan pengguna, dan juga mengurangi throughput keseluruhan server. <br><br>  <b>Mengunci ketika bekerja dengan objek cache aplikasi.</b>  Aplikasi ini menggunakan kunci reentrantLock yang agak berat (Java 7), yang mempengaruhi kecepatan eksekusi query.  Jenis kunci diubah menjadi stampedLock, yang secara signifikan mengurangi waktu yang dihabiskan untuk bekerja dengan objek cache. <br><br>  Setelah itu, kami kembali meluncurkan pengujian beban untuk menentukan waktu rata-rata operasi tipikal dalam sistem LMS dengan penyimpanan relasional pada profil bank.  Kami mendapat hasil sebagai berikut: <br><br><ul><li>  otorisasi pengguna dalam sistem - 400 ms; <br></li><li>  melihat kemajuan rata-rata - 2,5 detik; <br></li><li>  pembuatan kartu registrasi dan kontrol - 1.4 dtk; <br></li><li>  registrasi dan registrasi kartu kendali - 600 ms; <br></li><li>  pembuatan resolusi - 1 p. <br></li></ul><br><h2>  Kesimpulan </h2><br>  Selain mengidentifikasi masalah, stress testing telah mengkonfirmasi beberapa asumsi kami. <br><br><ul><li>  Fungsi sistem jauh lebih baik di keluarga Linux OS. <br></li><li>  Prinsip-prinsip yang dinyatakan untuk memastikan toleransi kesalahan berfungsi pada level setiap komponen dalam mode "panas". <br></li><li>  Komponen utama - layanan logika bisnis (menerima permintaan pengguna) - memiliki penskalaan horizontal "mirror" dan penskalaan throughput yang hampir linier dengan peningkatan jumlah instance. <br></li><li>  Ukuran optimal layanan logika bisnis untuk 1200 pengguna simultan - 8 vCPU untuk layanan dan 1,5 vCPU untuk DBMS. <br></li><li>  Konsolidasi data aplikasi pada sistem penyimpanan tunggal secara signifikan meningkatkan produktivitas dan keandalan, meningkatkan skalabilitas. <br></li></ul><br>  Kami akan dengan senang hati menjawab pertanyaan Anda di komentar - mungkin Anda tertarik untuk mempelajari lebih lanjut tentang beberapa aspek pengujian. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467647/">https://habr.com/ru/post/id467647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467629/index.html">Buku “Realitas yang tidak nyata. Bepergian di Loop Quantum »</a></li>
<li><a href="../id467631/index.html">Tampilan konteks JavaScript</a></li>
<li><a href="../id467633/index.html">Petisi: Pelaporan otomatis dan pembayaran pajak atas pendapatan FLP (Ukraina)</a></li>
<li><a href="../id467639/index.html">Minggu Keamanan 38: pelacakan perangkat seluler melalui kartu SIM</a></li>
<li><a href="../id467645/index.html">Mengikuti Pertemuan Sudut # 15</a></li>
<li><a href="../id467653/index.html">Habrastatistics: menganalisis komentar pembaca</a></li>
<li><a href="../id467655/index.html">Bagaimana saya menghabiskan musim panas dengan C # 8</a></li>
<li><a href="../id467657/index.html">Inventarisasi dari I hingga Z. Kami menghitung lisensi perangkat lunak</a></li>
<li><a href="../id467659/index.html">Secara signifikan mempercepat pelaksanaan tugas dengan contoh konfigurasi tambahan memori HyperX FURY DDR4 yang diperbarui</a></li>
<li><a href="../id467661/index.html">Dosimeter untuk Seryozha. Bagian I. Polimaster - Pemburu Nuclide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>