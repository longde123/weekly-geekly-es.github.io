<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèª üêµ üê∞ Chorda. Tentando faz√™-lo declarativamente ‚ôäÔ∏è üë©üèø‚Äçüöí üè£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Toda vez que preciso me sentar para criar um novo aplicativo, caio em um estupor f√°cil. Minha cabe√ßa est√° girando com a necessidade de escolher qual b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chorda. Tentando faz√™-lo declarativamente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480856/"><p>  Toda vez que preciso me sentar para criar um novo aplicativo, caio em um estupor f√°cil.  Minha cabe√ßa est√° girando com a necessidade de escolher qual biblioteca ou estrutura levar esse tempo.  A √∫ltima vez que escrevi na biblioteca X, mas agora a estrutura Y cresceu e foi entregue, e ainda existe um UI Kit Z legal, e muito trabalho foi deixado em projetos anteriores. </p><br><p>  A partir de algum momento, percebi que a estrutura realmente n√£o importa - o que eu preciso, posso fazer em qualquer uma delas.  Aqui parece que voc√™ deveria ser feliz, pegar algo com o m√°ximo de estrelas no github e se acalmar.  Mesmo assim, surge constantemente um desejo irresist√≠vel de fazer algo pr√≥prio, sua pr√≥pria bicicleta.  Bem ent√£o.  Algumas id√©ias gerais sobre esse assunto e uma estrutura chamada Chorda est√£o esperando por voc√™. </p><a name="habracut"></a><br><p>  De fato, o problema n√£o √© que a decis√£o de outra pessoa seja ruim ou ineficaz.  N√£o.  O problema √© que a decis√£o de outra pessoa nos faz pensar de maneiras que podem n√£o ser convenientes para n√≥s.  Mas espera.  O que significa ‚Äúconveniente-inconveniente‚Äù e como isso pode afetar o desenvolvimento?  Lembre-se de que existe um DX, de fato - um conjunto de pr√°ticas pessoais estabelecidas e geralmente aceitas.  A partir daqui, podemos dizer que √© conveniente para n√≥s quando nosso pr√≥prio DX coincide com o DX do autor da biblioteca ou estrutura.  E no caso em que divergem, surge o pr√≥prio desconforto, irrita√ß√£o e busca de algo novo. </p><br><h3 id="nemnozhko-istorii">  Um pouco de hist√≥ria </h3><br><p>  Ao desenvolver uma interface do usu√°rio para um aplicativo corporativo, voc√™ se depara com um grande n√∫mero de formul√°rios de usu√°rio.  E um dia um pensamento brilhante me vem √† cabe√ßa: por que eu crio um formul√°rio da Web toda vez que posso simplesmente listar os campos no JSON e alimentar a estrutura resultante para o gerador?  E, embora no mundo das empresas sangrentas essa abordagem n√£o funcione muito bem (por que isso √© uma conversa √† parte), mas a ideia de passar de um estilo imperativo para um declarativo geralmente n√£o √© ruim.  Prova disso √© o grande n√∫mero de geradores de formul√°rios da Web, p√°ginas e at√© sites inteiros que podem ser facilmente encontrados na Web. </p><br><p>  Ent√£o, em algum momento, eu n√£o era estranha ao desejo de melhorar meu c√≥digo devido √† transi√ß√£o para a declaratividade.  Mas, assim que precis√°vamos n√£o apenas de elementos html padr√£o, mas de componentes de widget complexos e interativos, n√£o poder√≠amos fugir com um simples gerador.  Os requisitos de reutiliza√ß√£o, integrabilidade, extensibilidade etc. de c√≥digo rapidamente foram adicionados a isso.  O desenvolvimento de sua pr√≥pria biblioteca de componentes com uma API declarativa n√£o demorou a chegar. </p><br><p>  Mas aqui, a felicidade n√£o aconteceu.  Provavelmente, a melhor situa√ß√£o refletir√° a opini√£o do meu colega, que deveria usar a biblioteca criada.  Ele olhou para os exemplos, para a documenta√ß√£o e disse: "A biblioteca √© legal. Linda, din√¢mica. Mas como posso fazer um aplicativo com tudo isso agora?"  E ele estava certo.  Aconteceu que fabricar um componente n√£o √© o mesmo que combinar v√°rios componentes e faz√™-los funcionar perfeitamente. </p><br><p>  Muito tempo se passou desde ent√£o.  E quando mais uma vez fui visitado pelo desejo de reunir pensamentos e desenvolvimentos, decidi agir um pouco de maneira diferente e ir n√£o de baixo para cima, mas de cima para baixo. </p><br><h3 id="upravlenie-prilozheniem--upravlenie-sostoyaniyami">  Gerenciamento de Aplicativos == Gerenciamento de Estado </h3><br><p>  Estou mais acostumado a considerar o aplicativo como uma m√°quina de estados finitos com algum conjunto de estados clones.  E o trabalho do aplicativo como um conjunto de transi√ß√µes de um estado para outro, no qual a altera√ß√£o do modelo leva √† cria√ß√£o de uma nova vers√£o da exibi√ß√£o.  No futuro <strong>,</strong> chamarei alguns <strong>dados</strong> fixos (um objeto, uma matriz, um tipo primitivo etc.) relacionados √† sua √∫nica representa√ß√£o - um <strong>documento</strong> . </p><br><p>  H√° um problema √≥bvio - para muitos valores do modelo, √© necess√°rio descrever muitas op√ß√µes para o documento.  Duas abordagens s√£o geralmente usadas aqui: </p><br><ol><li>  Templates.  Usamos nossa linguagem de marca√ß√£o favorita e a complementamos com diretivas de ramifica√ß√£o e loop. </li><li>  Fun√ß√µes  Descrevemos em nossas fun√ß√µes nossas ramifica√ß√µes e loops em nossa linguagem de programa√ß√£o favorita. </li></ol><br><p>  Como regra, essas duas abordagens s√£o declaradas declarativas.  O primeiro √© considerado declarativo, porque se baseia, embora ligeiramente expandido, nas regras da linguagem de marca√ß√£o.  O segundo - porque se concentra na composi√ß√£o de fun√ß√µes, algumas das quais atuam como regras.  O que √© digno de nota, agora n√£o h√° limites claros entre modelos e fun√ß√µes. </p><br><p>  Por um lado, gosto de modelos, mas, por outro, queria usar os recursos do javascript.  Por exemplo, algo como isto: </p><br><pre><code class="javascript hljs">createFromConfig({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Alice'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">tag</span></span>: <span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'clickable box'</span></span>, <span class="hljs-attr"><span class="hljs-attr">onClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Click'</span></span>) } })</code> </pre> <br><p>  O resultado √© uma configura√ß√£o JS que descreve um <strong>estado</strong> espec√≠fico inteiro.  Para descrever os muitos estados, ser√° necess√°rio obter extensibilidade dessa configura√ß√£o.  E qual √© a maneira mais conveniente de tornar um conjunto de op√ß√µes extens√≠vel?  N√£o vamos inventar nada aqui - as op√ß√µes de sobrecarga j√° existem h√° muito tempo.  Como funciona pode ser visto no exemplo do Vue com sua API de op√ß√µes.  Mas, diferentemente do mesmo Vue, eu me perguntava se o estado completo, incluindo dados e documento, poderia ser descrito da mesma maneira. </p><br><h3 id="struktura-prilozheniya-i-deklarativnost">  Estrutura do aplicativo e declaratividade </h3><br><blockquote>  O termo ‚Äúcomponente‚Äù tornou-se muito vago, especialmente ap√≥s o surgimento do chamado  componentes funcionais.  √Ä medida que avan√ßamos na estrutura do aplicativo, chamarei o componente de <strong>elemento estrutural</strong> . </blockquote><p>  Muito rapidamente, cheguei √† conclus√£o de que o elemento estrutural (componente) n√£o √© um elemento de documento, mas alguma entidade, que: </p><br><ol><li>  combina dados e documentos (encaderna√ß√£o e eventos) </li><li>  conectado com outras entidades similares (estrutura em √°rvore) </li></ol><br><p>  Como mencionei anteriormente, se voc√™ percebe o aplicativo como um conjunto de estados, para esses estados deve ter um m√©todo de descri√ß√£o.  Al√©m disso, √© necess√°rio encontrar esse m√©todo para que ele n√£o contenha operadores imperativos "esp√∫rios".  Estamos falando desses elementos muito auxiliares que s√£o introduzidos nos modelos - <em>#if</em> , <em>#elsif</em> , <em>v-for</em> , etc.  Acho que muitas pessoas j√° conhecem a solu√ß√£o - √© necess√°rio transferir a l√≥gica para o modelo, deixando no n√≠vel da apresenta√ß√£o uma API que permite controlar elementos estruturais por meio de tipos de dados simples. </p><br><p>  Pela administra√ß√£o, entendo a presen√ßa de variabilidade e ciclicidade. </p><br><h4 id="variativnost-if-else">  Variabilidade (caso contr√°rio) </h4><br><p>  Vamos ver como voc√™ pode controlar as op√ß√µes de exibi√ß√£o usando o exemplo de um componente de cart√£o no Chorda: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isHeaderOnly = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> card = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }, <span class="hljs-attr"><span class="hljs-attr">components</span></span>: {<span class="hljs-attr"><span class="hljs-attr">header</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">footer</span></span>: !isHeaderOnly} <span class="hljs-comment"><span class="hljs-comment">//    })</span></span></code> </pre> <br><p>  Ao definir o valor da op√ß√£o de <em>componentes</em> , voc√™ pode controlar os componentes exibidos.  E ao vincular <em>componentes</em> ao armazenamento reativo, obtemos que nossa estrutura ficar√° sob gerenciamento de dados.  H√° uma ressalva - o objeto √© usado como valor e as chaves nele n√£o s√£o ordenadas, o que imp√µe algumas restri√ß√µes aos <em>componentes</em> . </p><br><h4 id="ciklichnost-for">  Ciclo (para) </h4><br><p>  Trabalhar com dados cuja quantidade √© conhecida apenas no tempo de execu√ß√£o exigir√° itera√ß√£o nas listas. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> drinks = [<span class="hljs-string"><span class="hljs-string">'Coffee'</span></span>, <span class="hljs-string"><span class="hljs-string">'Tea'</span></span>, <span class="hljs-string"><span class="hljs-string">'Milk'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'ul'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">defaultItem</span></span>: { <span class="hljs-attr"><span class="hljs-attr">html</span></span>: <span class="hljs-string"><span class="hljs-string">'li'</span></span>, <span class="hljs-attr"><span class="hljs-attr">css</span></span>: <span class="hljs-string"><span class="hljs-string">'list-item'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: drinks })</code> </pre> <br><p>  O valor da op√ß√£o de <em>itens</em> √© Matriz, respectivamente, obtemos um conjunto ordenado de componentes.  Vincular <em>itens</em> ao armazenamento, como no caso de <em>componentes,</em> transferir√° o controle para os dados. </p><br><p>  Elementos estruturais s√£o conectados entre si em uma hierarquia de √°rvore.  Se combinarmos os exemplos anteriores, para exibir a lista no corpo do cart√£o, obtemos o seguinte: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   const state = { struct: { header: true, footer: false, }, drinks: ['Coffee', 'Tea', 'Milk'] } //  const card = new Html({ $header: { /*  */ }, $content: { html: 'ul', css: 'list', defaultItem: { html: 'li', css: 'list-item' }, items: state.drinks }, $footer: { /*  */ }, components: state.struct })</span></span></code> </pre> <br><p>  Aproximadamente dessa maneira, a estrutura de dados do aplicativo √© criada.  √â suficiente ter dois tipos de geradores - baseados em Object e em Array.  Resta apenas entender como ocorre a transforma√ß√£o de elementos estruturais em um documento. </p><br><h3 id="kogda-vse-uzhe-pridumano-za-nas">  Quando tudo j√° est√° inventado para n√≥s </h3><br><p>  Em geral, sou a favor do fato de que o sistema de renderiza√ß√£o de documentos deve ser implementado no n√≠vel do navegador (embora pelo menos o mesmo VDOM).  E nossa tarefa ser√° apenas conect√°-lo cuidadosamente √† √°rvore de componentes.  Afinal, n√£o importa quanto a velocidade da biblioteca cres√ßa, o navegador tem mais ainda. </p><br><p>  Sinceramente, tentei fazer minha fun√ß√£o de renderiza√ß√£o algum dia, mas depois de um tempo desisti, porque n√£o consigo desenhar mais r√°pido que o VanillaJS (infelizmente!).  Agora est√° na moda usar o VDOM para renderiza√ß√£o, e suas implementa√ß√µes s√£o, talvez, mesmo em abund√¢ncia.  Ent√£o, mais uma implementa√ß√£o da √°rvore virtual, decidi n√£o adicion√°-la ao cofrinho do github - apenas a pr√≥xima estrutura √© suficiente. </p><br><p>  Inicialmente, um adaptador para a biblioteca Maquette foi criado em Chorda para renderiza√ß√£o, mas assim que as tarefas "do mundo real" come√ßaram a aparecer, era mais pr√°tico ter uma gaveta no React.  Nesse caso, por exemplo, voc√™ pode simplesmente usar o React DevTools existente e n√£o escrever o seu pr√≥prio. </p><br><p>  Para conectar o VDOM a elementos estruturais, voc√™ precisa de um <strong>layout</strong> .  Pode ser chamada de fun√ß√£o de documento de um elemento estrutural.  O que √© importante √© uma fun√ß√£o pura. </p><br><p>  Considere um exemplo com um cart√£o com cabe√ßalho, corpo e por√£o.  J√° foi mencionado que os componentes n√£o s√£o pedidos, ou seja,  se come√ßarmos a ligar / desligar os componentes durante a opera√ß√£o, eles aparecer√£o sempre em um novo pedido.  Vamos ver como isso √© resolvido pelo layout: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orderedByKeyLayout</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, type, props, components</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(type, props, components.sort(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> a.key - b.key).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.render())) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-attr"><span class="hljs-attr">$header</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$content</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">$footer</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">layout</span></span>: orderedByKeyLayout <span class="hljs-comment"><span class="hljs-comment">//     })</span></span></code> </pre> <br><p>  O layout permite configurar o chamado  O elemento host ao qual o componente est√° associado e seus filhos ( <em>itens</em> e <em>componentes</em> ).  Normalmente, o layout padr√£o √© suficiente, mas em alguns casos, o layout requer a presen√ßa de elementos de wrapper (por exemplo, para grades) ou a atribui√ß√£o de classes especiais, que n√£o queremos levar ao n√≠vel dos componentes. </p><br><h3 id="schepotka-reaktivnosti">  Pitada de reatividade </h3><br><p>  Tendo declarado e desenhado a estrutura dos componentes, obtemos um estado correspondente a um conjunto de dados espec√≠fico.  Em seguida, precisamos descrever os muitos conjuntos de dados e a rea√ß√£o √† mudan√ßa deles. </p><br><p>  Ao trabalhar com dados, n√£o gostei de duas coisas: </p><br><ul><li>  Imunidade.  Uma coisa boa para acompanhar as mudan√ßas √© a vers√£o para os pobres, que funciona muito bem em objetos primitivos e planos.  Por√©m, assim que a estrutura se torna mais complexa e o n√∫mero de investimentos aumenta, fica dif√≠cil manter a imunidade de um objeto complexo. </li><li>  Substitui√ß√£o.  Se eu colocar algum objeto no armaz√©m de dados, quando o solicitar, posso retornar uma c√≥pia dele ou outro objeto ou proxy em geral que tenha semelhan√ßa estrutural com ele. </li></ul><br><p>  Eu queria ter um reposit√≥rio que se comporte como imut√°vel, mas dentro dele cont√©m dados mut√°veis, que tamb√©m mant√™m a persist√™ncia do link.  No caso ideal, seria assim: eu crio um reposit√≥rio, escrevo um objeto vazio para ele, come√ßo a inserir dados no formul√°rio de inscri√ß√£o e, depois de clicar no bot√£o enviar, recebo o mesmo objeto (vinculo o mesmo!) Com as propriedades preenchidas.  Eu chamo esse caso de ideal, pois geralmente n√£o acontece que o modelo de armazenamento corresponda ao modelo de apresenta√ß√£o. </p><br><p>  Outra tarefa que precisa ser resolvida √© fornecer dados do armazenamento para os elementos estruturais.  Novamente, n√£o vamos inventar nada e usar a abordagem de conex√£o com um <strong>contexto</strong> comum.  No caso de Chorda, n√£o temos acesso ao contexto em si, mas apenas √† sua exibi√ß√£o, chamada <strong>escopo</strong> .  Al√©m disso, o escopo do componente √© o contexto para seus componentes filhos.  Essa abordagem permite restringir, expandir ou substituir dados relacionados em qualquer n√≠vel de nosso aplicativo, e essas altera√ß√µes ser√£o isoladas. </p><br><p>  Um exemplo de como os dados contextuais s√£o distribu√≠dos por uma √°rvore de componentes: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Html({ <span class="hljs-comment"><span class="hljs-comment">//     scope: { drink: 'Coffee' }, $component1: { scope: { cups: 2 }, $content: { $myDrink: { //      ,    drinkChanged: function (v) { //    drink   text this.opt('text', v) } }, $numCups: { cupsChanged: function (v) { this.opt('text', v + ' cups') } } } }, $component2: { scope: { drink: 'Tea' //      drink }, drinkChanged: function (v) { //    drink   text this.opt('text', v) } } }) //    // &lt;div&gt; // &lt;div&gt; // &lt;div&gt; // &lt;div&gt;Coffee&lt;/div&gt; // &lt;div&gt;2 cups&lt;/div&gt; // &lt;/div&gt; // &lt;/div&gt; // &lt;div&gt;Tea&lt;/div&gt; // &lt;/div&gt;</span></span></code> </pre><br><p>  O momento mais dif√≠cil de entender √© que cada componente tem seu pr√≥prio contexto, e n√£o aquele declarado no topo da estrutura, como costumamos fazer ao trabalhar com modelos. </p><br><h3 id="chto-tam-bylo-naschet-peregruzki-opciy">  E quanto √† sobrecarga de op√ß√µes? </h3><br><p>  Certamente voc√™ se depara com uma situa√ß√£o em que h√° um componente grande e √© necess√°rio alterar um pequeno componente aninhado em algum lugar no fundo.  Eles dizem que a granula√ß√£o e a composi√ß√£o devem ajudar aqui.  E tamb√©m, que componentes e arquitetura devem ser projetados imediatamente.  A situa√ß√£o fica muito triste se o componente grande n√£o for seu, mas fizer parte de uma biblioteca desenvolvida por outra equipe ou mesmo por uma comunidade independente.  E se eles pudessem facilmente fazer altera√ß√µes no componente base, mesmo se n√£o tivessem sido planejadas originalmente? </p><br><p>  Normalmente, os componentes nas bibliotecas s√£o projetados como classes e, em seguida, podem ser usados ‚Äã‚Äãcomo base para criar novos componentes.  Mas aqui est√° oculto um pequeno recurso que eu nunca gostei: √†s vezes criamos uma classe apenas para aplic√°-la em um √∫nico local.  Isso √© estranho.  Por exemplo, estou acostumado a usar classes para digitar, criar relacionamentos entre grupos de objetos e n√£o us√°-los para resolver o problema de decomposi√ß√£o. </p><br><p>  Vamos ver como as classes funcionam com a configura√ß√£o no Chorda. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      class Card extends Html { config () { return { css: 'box', $header: {}, $content: {}, $footer: {} } } } const html = new Html({ css: 'panel', $card: { as: Card, $header: { //       title $title: { css: 'title', text: 'Card title' } } } })</span></span></code> </pre> <br><p>  Eu gosto mais dessa op√ß√£o do que criar uma classe TitledCard especial que ser√° usada apenas uma vez.  E se voc√™ precisar fazer parte das op√ß√µes, poder√° usar o mecanismo de impureza.  Bem, ningu√©m cancelou o Object.assign. </p><br><p>  Em Chorda, uma classe √© essencialmente um cont√™iner para configura√ß√£o e desempenha o papel de um tipo especial de impureza. </p><br><h3 id="pochemu-esche-odin-freymvork">  Por que outra estrutura? </h3><br><p>  Repito que, na minha opini√£o, a estrutura √© mais sobre o modo de pensar e a experi√™ncia do que sobre a tecnologia.  Meus h√°bitos e DX pediram declaratividade em JS, o que n√£o encontrei em outras solu√ß√µes.  Mas a implementa√ß√£o de um recurso atraiu novos, e depois de um tempo eles simplesmente deixaram de se encaixar na estrutura de uma biblioteca especializada. </p><br><p>  No momento, Chorda est√° em desenvolvimento ativo.  As principais dire√ß√µes j√° est√£o vis√≠veis, mas os detalhes est√£o constantemente mudando. </p><br><p>  Obrigado por ler at√© o fim.  Eu ficaria feliz em coment√°rios. </p><br><h3 id="gde-mozhno-posmotret">  Onde eu posso ver? </h3><br><p>  <a href="https://eliace.github.io/chorda-docs/">A documenta√ß√£o</a> </p><br><p>  <a href="https://github.com/eliace/chorda/tree/master/packages/chorda-core">Fontes do GitHub</a> </p><br><p>  <a href="https://codepen.io/collection/DkGzvo">Exemplos de CodePen</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt480856/">https://habr.com/ru/post/pt480856/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt480838/index.html">As consultas SQL s√£o r√°pidas. Parte 1</a></li>
<li><a href="../pt480840/index.html">Ciberataques em sistemas hidroac√∫sticos: mitos e realidade</a></li>
<li><a href="../pt480844/index.html">Habr Quest {conceito}</a></li>
<li><a href="../pt480848/index.html">Kits e construtores para engenheiros eletr√¥nicos iniciantes de 6 a 10 anos. O que est√° dispon√≠vel nas lojas</a></li>
<li><a href="../pt480852/index.html">Desenvolvimento r√°pido de aplicativos Web em Vaadin e Spring Boot</a></li>
<li><a href="../pt480858/index.html">Iniciar o Linux em um navegador - o emulador jor1k ajudar√° (com Monkey Island, Doom e Frontier Elite II)</a></li>
<li><a href="../pt480860/index.html">Teoria da Antiferrugem</a></li>
<li><a href="../pt480866/index.html">Uma nova era de desenvolvimento web ou "tudo j√° est√° l√°"</a></li>
<li><a href="../pt480870/index.html">Resultados da d√©cada</a></li>
<li><a href="../pt480872/index.html">Intel fechou uma brecha de seguran√ßa relatada seis meses atr√°s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>