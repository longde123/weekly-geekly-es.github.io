<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóø ü•Ä üßÄ Sobre como conectar e trabalhar com telas OLED de texto Winstar üìπ üßü üöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As exibi√ß√µes de linha (ou texto) destinam-se √† entrega de informa√ß√µes de texto na forma de linhas. Eles s√£o de v√°rios tipos (principalmente LCD ou OLE...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre como conectar e trabalhar com telas OLED de texto Winstar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400833/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As exibi√ß√µes de linha (ou texto) destinam-se √† entrega de informa√ß√µes de texto na forma de linhas. </font><font style="vertical-align: inherit;">Eles s√£o de v√°rios tipos (principalmente LCD ou OLED auto-luminoso), e geralmente em suas marca√ß√µes existem os n√∫meros 1202, 1602, 1204 ou similar, indicando o n√∫mero de linhas (nos exemplos 2 ou 4) e os caracteres em cada linha (12 e 16) . </font><font style="vertical-align: inherit;">Existem exibi√ß√µes de linha √∫nica desse tipo, mas na apresenta√ß√£o a seguir focamos nas exibi√ß√µes de duas linhas mais usadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria desses monitores √© compat√≠vel com o controlador HD44780 (Hitachi). As telas mais populares (pelo menos em nosso pa√≠s) dessa variedade s√£o produzidas pela Winstar. Al√©m disso, as variedades de LCD (o nome come√ßa com as letras WH, por exemplo, WH1602) s√£o compat√≠veis individualmente com o sistema de comando HD44780 e os tipos OLED (o nome come√ßa com WEH, por exemplo, WEH001602) possuem um controlador WS0010 aprimorado. Infelizmente, ou felizmente, vamos lidar agora.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao contr√°rio dos </font><font style="vertical-align: inherit;">displays gr√°ficos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que examinamos anteriormente com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> base no controlador ks0108, o gerador de caracteres nos displays em letras min√∫sculas √© incorporado. </font><font style="vertical-align: inherit;">Al√©m disso, para n√≥s, a principal diferen√ßa entre o WS0010 e o padr√£o HD44780 √© a presen√ßa de v√°rias (quatro) tabelas de c√≥digos para a exibi√ß√£o de texto multil√≠ngue. </font><font style="vertical-align: inherit;">O HD44780 possui apenas uma dessas tabelas, e √© por isso que as empresas precisam vender um tipo de exibi√ß√£o separado em cada regi√£o. </font><font style="vertical-align: inherit;">Os monitores OLED baseados no WS0010 n√£o exigem quebras regionais, o que √© muito mais conveniente. </font><font style="vertical-align: inherit;">Mas n√£o para o usu√°rio: por padr√£o, a tabela ENGLISH_JAPANESE √© ativada nos displays WEH e, para ativar caracteres russos, √© necess√°rio alternar para ENGLISH_RUSSIAN.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saiba mais sobre a tabela ENGLISH_RUSSIAN.</font></font></b><div class="spoiler_text">     :    (.    )     ,     .      ,    ,   ‚Äî -   -8,          (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 19768-93</a>).       -, , ,     EBCDIC,       ,     ( 127 )    ASCII.    ,  ,    ,    ASCII      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A biblioteca LiquidCrystal padr√£o (fornecida com o Arduino IDE), √© claro, n√£o sabe nada sobre as quatro tabelas e, portanto, requer corre√ß√£o, pelo menos nesse aspecto. </font><font style="vertical-align: inherit;">Mas n√£o apenas: no final, seria poss√≠vel fazer com o idioma ingl√™s. </font><font style="vertical-align: inherit;">No entanto, o procedimento de inicializa√ß√£o √© notavelmente diferente para o WS0010 e, se n√£o for corrigido, a tela mostrar√° isso sempre que √© iniciado.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outros recursos</font></font></b><div class="spoiler_text"> ,  OLED- Winstar   ,       ( ,    ).  ,   ,     . ,  ,     WEH   SPI (, ¬´ SPI¬ª),    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>,   ,      (  3) ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>.           :         ,         .       ,       I2C    (. ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a>).<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por alguma raz√£o, os displays Winstar apresentam um grande d√©ficit em termos de documenta√ß√£o intelig√≠vel (como voc√™ deve ter notado, isso geralmente √© um recurso caracter√≠stico dos produtos chineses). </font><font style="vertical-align: inherit;">Vale ressaltar onde √© poss√≠vel baixar a documenta√ß√£o mais ou menos completa, sem erros: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui no LCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WH1602) com um controlador HD44780, aqui nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">displays OLED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WEH1602), aqui no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador WS0010 separadamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (veremos mais adiante) . </font><font style="vertical-align: inherit;">E aqui, se voc√™ estiver interessado, h√° uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descri√ß√£o detalhada do controlador HD44780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em russo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nivelando a biblioteca LiquidCrystal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar as exibi√ß√µes em min√∫sculas no HD44780 e seus an√°logos, a biblioteca padr√£o LiquidCrystal, tradicionalmente inclu√≠da no IDE do Arduino de todas as vers√µes, √© bastante adequada. Para exibir o texto em russo, existe a vers√£o do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que surpreendentemente funciona bem em todas as vers√µes modernas do IDE do Arduino (diz que o autor abordou corretamente a convers√£o de caracteres UTF-8). Mas, para se adaptar a displays OLED no controlador WS0010, voc√™ ainda precisa fazer corre√ß√µes. No futuro, iremos zombar desta biblioteca e, portanto, renomearemos como LiquidCrystalRus_OLED, para n√£o confundir com a usual. Para simplificar a tarefa, n√£o renomearemos as fun√ß√µes, porque a inicializa√ß√£o ser√° a mesma que para o LiquidCrystalRus original. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As altera√ß√µes s√£o as seguintes: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Desde</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a tabela russo-ingl√™s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no WS0010 (consulte a p√°gina 9 para a folha de dados no WS0010 usando o link acima) √© o n√∫mero 2; para alternar para ela, √© necess√°rio definir os dois bits menos significativos FT1 e FT0 no comando SET DE FUN√á√ÉO para configur√°-lo no estado 10 (0x02). (Nos LCDs com uma tabela de c√≥digos, esses bits, a prop√≥sito, n√£o s√£o utilizados). Para fazer isso, no arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">procure o</font></i><font style="vertical-align: inherit;"> local (linha 96 do arquivo) onde o valor da vari√°vel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_displayfunction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° </font><i><font style="vertical-align: inherit;">definido</font></i><font style="vertical-align: inherit;"> . Nas duas linhas de sua inicializa√ß√£o (linhas 97 e 99), adicione um ap√™ndice " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| = 0x02</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Em seguida, voc√™ precisa corrigir o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atraso de inicializa√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ap√≥s ligar a energia. Para o HD44780, ele deve ter no m√°ximo 40 ms (consulte a documenta√ß√£o nos links acima). A biblioteca usa a fun√ß√£o para isso.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delayMicroseconds (50000)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (linha 120 do arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Para o controlador WS0010, √© necess√°rio um atraso dez vezes maior - pelo menos 500 ms (consulte a √∫ltima p√°gina da folha de dados no link acima). Esse requisito √© t√£o cuidadosamente oculto (os arquivos com a documenta√ß√£o em ingl√™s no Winstar exibem "perdeu a fonte" precisamente nesta parte), que parece que poucas pessoas pensaram nisso at√© agora. Portanto, substitu√≠mos essa linha por 32 repeti√ß√µes de atraso de 16 ms cada:</font></font><br>
<br>
<pre><code class="hljs matlab"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">31</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) delayMicroseconds(<span class="hljs-number"><span class="hljs-number">16000</span></span>);</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Al√©m disso (consulte tamb√©m esta √∫ltima p√°gina da folha de dados), ap√≥s esse atraso, ao ligar quatro fios, voc√™ precisar√° </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enviar um comando vazio cinco vezes seguidas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (0x00). Como o Arduino √© significativamente mais r√°pido que o controlador do monitor, os comandos devem ser dados com um atraso intermedi√°rio. Eles precisam ser inseridos um pouco mais no texto da fun√ß√£o begin, onde se trata especificamente da inclus√£o em 4 bits (linha 147 do arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Mas este n√£o √© o fim. A tabela ENGLISH_RUSSIAN original possui um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√≠cone de grau</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c√≥digo 0xEF). A op√ß√£o √© executada graficamente sem sucesso (muito grande); portanto, prefiro usar um ponto superior em negrito (c√≥digo 0xDF) - √© muito mais parecido com um diploma no estilo usual. Ele pode ser inserido na forma de um c√≥digo (melhor que o octal "\ 337"), mas o problema √© - tentar simplificar a fun√ß√£o de substituir c√≥digos de letras russas por c√≥digos na tabela geradora de caracteres, o autor da biblioteca, com base na codifica√ß√£o UTF-8 (consulte o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), introduziu uma condi√ß√£o de substitui√ß√£o para qualquer c√≥digo maior que 0x80 (fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus :: write</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Como nosso 0xDF √© claramente maior que 0x80, quando voc√™ especifica o caractere "\ 337" na linha de c√≥digo, um espa√ßo vazio ser√° exibido, pois n√£o corresponde a nenhuma letra russa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, a fun√ß√£o </font><i><font style="vertical-align: inherit;">createChar ()</font></i><font style="vertical-align: inherit;"> padr√£o</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando tentei us√°-lo para criar meu pr√≥prio √≠cone de gradua√ß√£o, entrei na tela com um estupor completo, do qual ele s√≥ podia ser removido recarregando o programa. Com o que preciso lidar adicionalmente, ficarei grato se algu√©m me disser qual √© o problema. Portanto, o gerador de caracteres n√£o pode ser editado em nossos recursos, mas podemos excluir o caractere 0xDF necess√°rio da condi√ß√£o. Para fazer isso, substitua a </font><font style="vertical-align: inherit;">condi√ß√£o </font><font style="vertical-align: inherit;">existente (consulte o texto da fun√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grava√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) pelo seguinte:</font></font><br>
<br>
<pre><code class="hljs lisp">if ((<span class="hljs-name"><span class="hljs-name">value&gt;=0x80</span></span>)<span class="hljs-symbol"><span class="hljs-symbol">&amp;&amp;</span></span>(<span class="hljs-name"><span class="hljs-name">value!=0xdf</span></span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Finalmente, o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zero riscado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nesta tela n√£o √© t√£o impressionante quanto nas telas gr√°ficas de LCD. </font><font style="vertical-align: inherit;">No entanto, na mesma fun√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grava√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">introduzi a substitui√ß√£o do c√≥digo zero (0x30) pelo c√≥digo da letra "O" (0x4f). </font><font style="vertical-align: inherit;">Aqueles que desejam podem retornar o zero riscado simplesmente excluindo ou comentando a linha de substitui√ß√£o (linha 308 do arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modificado </font><font style="vertical-align: inherit;">). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A biblioteca atualizada pode ser baixada no link no final do artigo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liga√ß√£o</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora tudo parece estar ajustado, voc√™ pode se conectar. </font><font style="vertical-align: inherit;">A conex√£o do monitor WEH001602BG (16 caracteres, comprimento da tela 100 mm) ao Arduino √© mostrada na figura a seguir: Os </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a58/0b4/c91/a580b4c91cf235bbb5b698986b4fdcfc.png" width="600" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pinos do Arduino aos quais os pinos do monitor RS, E, DB4-DB7 est√£o conectados devem ser indicados quando o monitor √© inicializado:</font></font><br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se desejar, voc√™ pode conectar dois ou mais monitores em qualquer op√ß√£o de interface (oito ou quatro fios). Nesse caso, as linhas de dados e o RS podem ser compartilhados. A escolha entre displays neste caso √© feita atrav√©s do terminal E, que para diferentes displays √© conectado a diferentes terminais do Arduino (as linhas de conex√£o do segundo display s√£o mostradas em cinza no diagrama, o terminal E do segundo display aqui √© conectado ao pino 6 do Arduino). Obviamente, nesse caso, voc√™ precisa criar duas c√≥pias da biblioteca (por exemplo, OLED1 e OLED2), nas quais todas as sa√≠das s√£o iguais, exceto E. Al√©m disso, os displays podem ter diferentes configura√ß√µes e tamanhos (8x2, 16x2, 12x2, 12x4, etc.). .). Isso tamb√©m se aplica aos monitores LCD convencionais no HD44780.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E por que existe um rel√© para poder? A principal desvantagem do WS0010 √© a falta de hardware "rezet". No HD44780, o rezet embutido pode ser justificado - o autor n√£o tem experi√™ncia suficiente com telas de LCD para ter certeza. Mas a Winstar, tentando seguir o padr√£o em seu desenvolvimento, claramente n√£o conseguiu lidar com essa tarefa. Reiniciar o controlador sem desligar a energia leva ao aparecimento de qualquer turbidez no monitor, e voc√™ pode se livrar dele apenas manipulando a pot√™ncia de todo o circuito e inicializando o monitor a partir do zero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, a exibi√ß√£o ao desligar / ligar a alimenta√ß√£o pode confundir as linhas em alguns lugares. As pessoas afirmam que uma inclus√£o completa de 8 bits (em vez de 4 bits) ajuda, mas funcionou ainda pior para mim. Eles tamb√©m insistem persistentemente em que, em hipot√©ticos "novos lotes", tudo isso j√° foi corrigido, mas √© dif√≠cil de acreditar (que tipo de "novos" lotes estamos falando quando o Winstar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lan√ßou os</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> displays OLED </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">desde 2008</font></a><font style="vertical-align: inherit;"> , e eu tinha 13 e 14 anos lan√ßamento?).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rel√© e defina para redefinir artificialmente a exibi√ß√£o ao reiniciar o Arduino sem desligar a energia. Isso elimina de maneira confi√°vel o lixo na tela. A energia do monitor (ou monitores) √© ligada separadamente atrav√©s deste rel√©, que √© ligado a partir do pino livre do Arduino (neste caso, pino 4) no in√≠cio do procedimento de configura√ß√£o, quando o controlador j√° est√° operando de forma est√°vel. E antes de ligar o rel√©, √© bom dar um atraso adicional de 1000 ms (veja o desenho abaixo). O rel√© indicado EDR202A05 √© um rel√© de palheta, a corrente do enrolamento √© de 10 mA e, portanto, √© silenciosamente controlada a partir da sa√≠da do Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quanto √† confus√£o entre as linhas quando ativadas, al√©m das altera√ß√µes acima no procedimento de inicializa√ß√£o, esse efeito libera perfeitamente a energia de todo o circuito de uma fonte externa suficientemente poderosa (pelo menos 1-2 A) com uma tens√£o est√°vel sob carga de pelo menos 7,5 volt. </font><font style="vertical-align: inherit;">Essa depend√™ncia da nutri√ß√£o √©, obviamente, uma fonte de discrep√¢ncias em muitas publica√ß√µes, onde muitos autores afirmam que tudo funciona bem para elas. </font><font style="vertical-align: inherit;">Nesse caso, a tela (ou telas) pode ser conectada atrav√©s do estabilizador interno do Arduino (pino 5V da placa), ou eles podem ser conectados atrav√©s de um estabilizador separado, mas o principal √© que a tens√£o de entrada do estabilizador deve ser est√°vel o suficiente, independentemente de picos de energia no momento da liga√ß√£o.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifique</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar, enviei um esbo√ßo demo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proba_Rus_Liquid_Crystal_OLED</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , simulando uma exibi√ß√£o de rel√≥gio de calend√°rio com um sensor de temperatura externo:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de exibi√ß√£o WEH1602</font></font></b><div class="spoiler_text"><pre><code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus_OLED.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// initialize the library with the numbers of the interface pins</span></span>
<span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RelayPin 4 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 4 -  </span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
delay (<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
pinMode(RelayPin, OUTPUT);<font></font>
digitalWrite(RelayPin, HIGH); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
delay (<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
  OLED1.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//16  2 </span></span><font></font>
  OLED1.clear();<font></font>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,  </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"-22,3\337C"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//10  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 11 </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"10:22"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"16.01.17 "</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 16  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 13  ":"</span></span>
  OLED1.blink(); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
   delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
<span class="hljs-comment"><span class="hljs-comment">/*        
        13,0 
    blink
*/</span></span><font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as altera√ß√µes de caracter√≠sticas na biblioteca mencionada acima s√£o aplicadas aqui. </font><font style="vertical-align: inherit;">O programa tamb√©m mostra como fazer o c√≥lon piscar nas horas: minutos usando a fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blink ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Observe que uma nova sa√≠da na mesma posi√ß√£o destr√≥i o piscar de familiaridade e, ao atualiz√°-la, voc√™ deve retomar novamente, tendo definido anteriormente o cursor invis√≠vel na mesma posi√ß√£o 13 na linha zero. </font><font style="vertical-align: inherit;">Com uma atualiza√ß√£o de rel√≥gio real, pode ser mais f√°cil atualizar apenas os n√∫meros nas posi√ß√µes 11-12 e 14-15, deixando o c√≥lon piscando intacto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados da sa√≠da de exemplo s√£o mostrados na foto:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4e1/a88/249/4e1a8824925e055d968ab80e68f52229.jpg" width="500" alt="imagem"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note-se que a foto n√£o transmite o brilho da tela OLED verde (neste caso). De fato, √© uma cor verde escura, com um comprimento de onda menor que o habitual 568 nm em displays de LED (sete segmentos ou matriz). Por que o √∫ltimo no contexto do OLED parece "desbotado" e sua aplica√ß√£o combinada √© dif√≠cil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O WS0010 possui um modo gr√°fico e os displays OLED gr√°ficos Winstar (como WEG010016) tamb√©m possuem esse controlador. Algu√©m notou que eles ainda t√™m a mesma matriz. Na minha opini√£o, tentar aplicar um modo gr√°fico em uma exibi√ß√£o de linha de texto √© in√∫til: a exibi√ß√£o de linha possui espa√ßos escuros definidos por hardware entre caracteres e linhas que tornam a imagem extremamente antiest√©tica (veja </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√°rios exemplos de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tais tentativas).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma nota final: sobre a durabilidade dos OLEDs da Winstar. </font><font style="vertical-align: inherit;">Nas folhas de dados, o tempo √© indicado 100.000 horas, ou seja, 11 anos. </font><font style="vertical-align: inherit;">No entanto, uma das exibi√ß√µes do 13¬∫ ano de lan√ßamento (brilho amarelo) at√© o momento atual (inverno do 16¬∫) perdeu acentuadamente o brilho em mim. </font><font style="vertical-align: inherit;">√â engra√ßado que o restante da mesma festa (verde) e posterior (amarela e verde de 14 anos) n√£o mostre sinais de morte. </font><font style="vertical-align: inherit;">Portanto, com certeza, n√£o pretendo dizer nada, mas, apenas por precau√ß√£o, aconselho a n√£o soldar os monitores na placa, mas instal√°-los nos conectores, para que, no caso, eles possam ser substitu√≠dos sem problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode baixar o arquivo com uma biblioteca gratuita e um exemplo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: havia uma solu√ß√£o para o problema de um in√≠cio est√°vel sem manipular o poder: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://geektimes.ru/post/287234/</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt400833/">https://habr.com/ru/post/pt400833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt400823/index.html">Ataques na rede: o sabotador mais perigoso √© o esquilo</a></li>
<li><a href="../pt400825/index.html">Google novamente acusado de promover seus produtos em seu pr√≥prio mecanismo de pesquisa</a></li>
<li><a href="../pt400827/index.html">ASUS Tinker Board: outro concorrente da RPi</a></li>
<li><a href="../pt400829/index.html">Mito eterno: por que os pacientes chamam o clima de causa de dor nas articula√ß√µes</a></li>
<li><a href="../pt400831/index.html">Algo n√£o d√° sorte para foguetes ultraleves simples</a></li>
<li><a href="../pt400835/index.html">Rea√ß√£o inesperada: Cruz Vermelha requer remover seu simbolismo do jogo Prison Architect</a></li>
<li><a href="../pt400837/index.html">O cone de f√≥tons Mach foi filmado pela primeira vez. O c√©rebro √© o pr√≥ximo</a></li>
<li><a href="../pt400839/index.html">Wi-Fi s√≠ncrono: Alliance se prepara para certificar a tecnologia TimeSync</a></li>
<li><a href="../pt400841/index.html">Sim, para voc√™ viver com 80 GB na sua cabe√ßa! Como Hollywood transforma tecnologia em zombaria</a></li>
<li><a href="../pt400843/index.html">Pergunte a Ethan: Qual era o tamanho do Universo rec√©m-nascido?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>