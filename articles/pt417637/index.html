<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôäÔ∏è ü§Ωüèæ üë©üèæ‚Äçüåæ Desenvolvimento de um editor para cria√ß√£o de sites / desembarques (experi√™ncia) üïï üèÅ üë©üèΩ‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Arte de http://www.simonstalenhag.se/ ) 
 Antecedentes / Isen√ß√£o 


 Ol√° pessoal, este artigo √© de fato material para o meu discurso na segunda-feira...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de um editor para cria√ß√£o de sites / desembarques (experi√™ncia)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417637/"><p><img src="https://habrastorage.org/webt/6j/yl/ny/6jylnys0x91jmmt4g_hqy9mat1q.jpeg"><br>  (Arte de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://www.simonstalenhag.se/</a> ) </p><br><h3>  Antecedentes / Isen√ß√£o </h3><br><p>  Ol√° pessoal, este artigo √© de fato material para o meu discurso na segunda-feira na maratona de Kiev.  Mas n√£o pense que voc√™ √© o p√∫blico em que elaboro o texto; √© apenas mais f√°cil para mim me preparar. </p><br><p>  Atualmente, sou desenvolvedor Front-end da Conductor / WeWork.  N√£o desenvolvemos editores, assim como eu, √† noite, n√£o desenvolvemos essas coisas.  Isso √© mais sobre a experi√™ncia que recebi em um projeto anterior na UTI (abreviado), utipi, uti‚Ä¶.  Foi h√° muito tempo, mas, como se v√™, o t√≥pico √© relevante para este dia, bem como os batentes associados a ele. </p><br><p>  Normalmente, estamos falando de sites de cart√µes de visita, p√°ginas de entrada e sites mais ou menos funcionais, mas certamente n√£o sobre back-office ou √°reas administrativas. </p><br><blockquote>  UTIEditor especial para voc√™ &lt;3 </blockquote><br><h3>  Por que precisamos de tais editores? </h3><br><p>  Existem muitas respostas para essa pergunta, muitos de voc√™s, com certeza, acho que sim. <br>  Responderei a essa pergunta do ponto de vista da UTI, uma empresa que fornece servi√ßos de desenvolvimento de sites. </p><br><p>  A UTI √© essencialmente uma empresa de bens de consumo.  Estou certo de que ao mesmo tempo, cada um, uma d√∫zia de sites de cart√µes de visita por pessoa, uma d√∫zia de lojas on-line e uma cereja de marca funcionavam da mesma maneira - o pr√≥prio CMS. </p><br><p>  Ent√£o voc√™ criou outra p√°gina de destino, um site de cart√£o de visita e a deu ao cliente, e ele volta em um dia e pede para alterar o texto.  Ap√≥s outro dia, altere a cor do plano de fundo e adicione apenas uma imagem.  Para o cliente, parece algo simples e r√°pido.  √â dif√≠cil argumentar com isso, √© verdade.  Mas para voc√™, isso significa que voc√™ precisa retirar o desenvolvedor / designer de suas tarefas atuais.  Sem mencionar o trabalho de um gerente que gasta tempo com comunica√ß√£o.  Assim, voc√™ fatura e n√£o √© pequeno.  O cliente est√° indignado e reclama.  Da pr√≥xima vez, voc√™ j√° pensa sobre essas coisas e come√ßa a fazer perguntas, colocando a funcionalidade de edi√ß√£o no TK. </p><br><p>  Aqui talvez valha a pena discutir essa funcionalidade, porque √© muito diferente. <br>  Eu gostaria de acrescentar que n√£o incluirei CMS como WrodPress, Drupal nesta conversa; nos concentraremos no mercado de editores. </p><a name="habracut"></a><br><h3>  Debry UTI </h3><br><p>  A primeira coisa que vem √† mente √© criar um formul√°rio no qual o usu√°rio possa alterar o que deseja: </p><br><p><img src="https://habrastorage.org/webt/jd/hu/0h/jdhu0hykoas1wvksoc1vhaurivk.png"></p><br><p>  Um pouco fora da vida real, o nome dos campos, mas a ess√™ncia que voc√™ pegou. </p><br><p>  Do ponto de vista da empresa, ela cumpriu seu dever e at√© cuidou da ‚Äúpersonaliza√ß√£o‚Äù.  Mas essa abordagem ainda tem v√°rias limita√ß√µes. </p><br><p>  As vantagens desta abordagem: </p><br><ul><li>  F√°cil de implementar </li><li>  F√°cil de usar </li><li>  Resolve o problema </li></ul><br><p>  Contras desta abordagem: </p><br><ul><li>  N√£o h√° como mudar o design </li><li>  N√£o h√° como mudar o comportamento </li><li>  Sem posicionamento </li><li>  Voc√™ pode editar apenas o que foi colocado no formul√°rio </li></ul><br><p>  Voc√™ j√° pensou no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CKEeditor</a> ?  Estrela de todos os tempos.  Siga o pr√≥ximo passo para melhorar o conte√∫do edit√°vel no site. </p><br><p><img src="https://habrastorage.org/webt/u2/z8/l2/u2z8l2je3kdzcou8mcbbmdocs20.jpeg"></p><br><p>  Existe um tipo de oportunidade para formatar o texto e at√© inserir alguns elementos adicionais.  Em algum lugar desse lugar, antes de ingressar na empresa, os caras tiveram uma ideia de criar um editor de p√°ginas com arrastar e soltar diretamente no CKEditor.  Infelizmente n√£o tinha mais nada para mostrar, mas tente imaginar esse horror :) </p><br><p>  Mas, no momento, 2018, por assim dizer, o CKEditor fez alguns progressos nessa dire√ß√£o, o que √© bastante divertido.  O que n√£o √© uma p√°gina inteira? </p><br><p><img src="https://habrastorage.org/webt/hs/uv/5t/hsuv5tni9olhtsnh65sevvmg3di.png"></p><br><p>  Mas tudo isso n√£o era conveniente, tanto no desenvolvimento quanto no uso.  E conhecendo apenas a espinha dorsal e o jquery, eu me chamei de desenvolvedor front-end e decidi oferecer a eles para desenvolver um editor completo, como Wix, Squarespace, Tilda, LPGenerator ... Na verdade, eles eram meus concorrentes.  Mas como a UTI √© uma empresa sem nome, eles n√£o sabiam disso.  E eles n√£o reconheceram e n√£o reconhecer√£o.  Embora o patrocinador da maratona seja o Wix.  Oh, isso √© apenas uma coincid√™ncia. </p><br><p>  Eles n√£o reconheceram, porque tudo estava de acordo com os cl√°ssicos - a empresa n√£o se importava com o projeto. </p><br><p>  Estes s√£o dois screencasts, eles n√£o s√£o perfeitos, com batentes, mas tenho certeza de que fornecer√£o uma id√©ia geral do editor. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/N6ViA0XCWxU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ArwNT9EZ2y8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Eu estava sozinho neste projeto.  Designer, gerente de produto, na frente e atr√°s, mas n√£o houve testes.  Mas a verdade era que os testadores manuais, que vieram para a empresa, foram temperados no fogo do reator.  Os testadores, √© claro, eram engra√ßados.  O que voc√™ entenderia do n√≠vel - uma vez, um deles foi nocauteado: </p><br><p><img src="https://habrastorage.org/webt/0e/gx/vs/0egxvsufxxpgjoghgiwij23wrve.png"></p><br><p>  E eles registraram um bug, dizem que o site est√° fora do ar.  O cara acabou de soltar o cabo da Internet do sistema :) </p><br><p>  Cada vez, de uma maneira nova, eu tinha que explicar o que pode ser feito no editor, o que √© imposs√≠vel e por que funciona dessa maneira, e √© assim que funciona.  De fato, para mim foi divertido.  Uma esp√©cie de feedback de primeira linha.  Praticamente n√£o havia clientes, e o editor evoluiu em grande parte gra√ßas a eles. </p><br><p>  Algu√©m tem alguma id√©ia de qual pilha eu usei?  O aplicativo parece √≥timo, s√≥lido, por assim dizer.  N√£o √© buggy, pois n√£o era buggy h√° 5 anos. </p><br><p>  Ah, e que processo incr√≠vel de CI / CD eu tenho.  Eu fui √† comida o quanto voc√™ quer uma vez por dia.  Codinome Filezilla, arraste e solte, repita.  Primeiro, conecte-se ao ftp usando o filezilla, fa√ßa uma compila√ß√£o, fa√ßa o download da compila√ß√£o atual, coloque-a em uma pasta chamada backup, fa√ßa o upload de uma nova compila√ß√£o e verifique se algu√©m morreu l√°.  Se voc√™ morreu, voc√™ carrega o arquivo da pasta de backup.  Mas, honestamente, o momento com o backup, eu nem sempre fazia, dependia de um conjunto de novas funcionalidades.  E, como o editor estava em v√°rios projetos, para dizer que entrei em cada um deles e verifiquei se ele estava l√°, n√£o o faria.  E ainda usamos SVN, d√° sabor? </p><br><h3 id="chto-zhe-po-povodu-steka">  E a pilha? </h3><br><p>  Backbone + jquery + 0 testes. </p><br><p>  M√≥dulo, carregamento ass√≠ncrono, divis√£o de c√≥digo ala e renderiza√ß√£o no servidor.  Ent√£o, esses termos n√£o foram usados ‚Äã‚Äãespecificamente, era de fato uma otimiza√ß√£o simples.  Mas agora √© a hora do marketing no c√≥digo aberto e sua revolu√ß√£o! </p><br><p>  O que voc√™ entenderia, o Wix da √©poca, agora n√£o difere muito do editor Wix.  √â que ele tem mais modelos, espa√ßos em branco e componentes acabados.  Eles migraram a rea√ß√£o, completamente ou n√£o, eu n√£o sei.  √â de bugs exatamente da mesma maneira, apenas em macbooks com RAM de 16 gigabytes, com um sistema de renderiza√ß√£o mais √≠ngreme chamado casa virtual e mecanismos legais da web.  Em projetos dessa escala, as ferramentas n√£o desempenham um papel especial, √© mais uma conversa sobre arquitetura e UI / UX.  E UI / UX √© muito mais importante.  A complexidade da implementa√ß√£o, o desempenho e o n√≠vel de desejo de se matar ao criar sites do seu editor dependem disso.  Os clientes geralmente estar√£o longe do desenvolvimento, longe de todas essas regras, propriedades, atributos e par√¢metros do CSS.  Entre eles, haver√° pessoas mais ou menos versadas que servir√£o seus clientes e os levar√£o embora no futuro.  Mas n√£o vamos falar de coisas tristes, vamos tentar considerar um pouco mais as gera√ß√µes de editores. </p><br><p>  Os clientes, se voc√™ lhes der a ferramenta de edi√ß√£o perfeita, ainda n√£o poder√£o us√°-la.  O artesanato deles ser√° mais ou menos assim: </p><br><p><img src="https://habrastorage.org/webt/ee/cg/i9/eecgi9-bcho9jh_vhkpzz09jdbm.png"></p><br><p>  Isso √© verdade e n√£o √© verdade, j√° que a Web √© simplesmente complicada para humanidades e, por outro lado, existe uma UI / UX ideal que permite criar um site, fa√ßa o que quiser com o clique de um bot√£o. </p><br><p>  Mas √†s vezes √© imposs√≠vel e tem que procurar um meio termo. </p><br><h3 id="vizualnyy-html-redaktor">  Editor visual HTML </h3><br><p>  A tarefa inicial foi a seguinte: fa√ßa o mesmo que no CKEditor, para que voc√™ possa mover elementos (texto, figuras) e de alguma forma edit√°-los / format√°-los. </p><br><p>  Um dos principais requisitos era a capacidade de carregar HTML personalizado para trabalhos futuros. </p><br><p>  Comecei criando elementos na p√°gina arrast√°vel.  Ou seja, o usu√°rio pode mov√™-los.  No come√ßo, tudo parecia bem, mas quanto mais pe√ßas eu tentava, pior parecia.  O fato √© que o HTML personalizado pode ser completamente arbitr√°rio e imprevis√≠vel.  Isso leva a problemas da tarefa elementar de arrastar e soltar, incapacidade de entender que tipo de elemento o usu√°rio escolheu e at√© mesmo de ter um controle banal sobre a p√°gina.  Foi um caos. </p><br><p> Grapesjs permite que voc√™ carregue seu HTML.  Ele v√™ o texto envolto em tags √≥bvias e o texto que est√° no <code>body</code> , ele n√£o sente: </p><br><p><img src="https://habrastorage.org/webt/hj/0s/jj/hj0sjjit2iz396ul0aqlykqo3r0.png"></p><br><h3 id="ogranicheniya">  Limita√ß√µes </h3><br><p>  Permitir que voc√™ fa√ßa upload e edite seu HTML √© certamente uma jogada ousada.  Do ponto de vista do usu√°rio, essa √© uma grande liberdade.  Mas h√° um exemplo maravilhoso de como as coisas est√£o na web - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma caixa azul</a> . </p><br><p>  Tenho certeza de que nem sequer existem todas as op√ß√µes de implementa√ß√£o.  O fato √© que as mesmas coisas em termos de sem√¢ntica podem ser implementadas de maneiras completamente diferentes, usando abordagens completamente diferentes.  E imagine, na p√°gina, algo mais complicado que o quadrado azul.  A mesma imagem pode ser adicionada √† p√°gina usando a tag &lt;img /&gt; ou configurada usando o plano de fundo.  Um bot√£o pode ser um &lt;bot√£o&gt; ou pode ser um &lt;div&gt; ou a mesma imagem.  E como entender qual ferramenta de edi√ß√£o mostrar? </p><br><p>  De jeito nenhum. </p><br><h3 id="ogranichenie-00">  Limite 00 </h3><br><p>  A pr√≥xima op√ß√£o √© proibir este ou aquele layout, criar um guia de estilo ou proibir o carregamento de HTML personalizado.  Claro, escolhemos o segundo :) </p><br><h3 id="ogranichenie-01">  Limite 01 </h3><br><p>  Como proibimos o carregamento de HTML personalizado, precisamos de nossos pr√≥prios componentes / elementos, e este √© o primeiro passo para um editor real. </p><br><h3 id="ogranichenie-02">  Restri√ß√£o 02 </h3><br><p>  Como o usu√°rio trabalhar√° com v√°rios de nossos elementos, devemos impedir que o editor trabalhe com n√£o "nossos elementos" e nos ensinar como trabalhar com eles. </p><br><h3 id="rabochee-okruzhenie">  Ambiente de trabalho </h3><br><p>  N√£o √© o t√≥pico mais interessante, mas importante.  Eu realmente gosto da interface do Photoshop.  H√° v√°rios pain√©is e uma √°rea de trabalho.  Voc√™ pode manipular o espa√ßo de trabalho como quiser, ele est√° centralizado e, dependendo do tamanho, pode rolar na horizontal e na vertical. </p><br><p><img src="https://habrastorage.org/webt/m5/ki/w8/m5kiw8n2pp2hgl_w2bp7ci7fid4.jpeg"></p><br><p>  Al√©m disso, muitos de mim tocaram no meu design do Google Web Designer: </p><br><p><img src="https://habrastorage.org/webt/ue/2o/gj/ue2ogjwar96x4ivn-tc76mmdtei.png"></p><br><p>  By the way, este √© um tipo de editor do Google, algu√©m usou? </p><br><p>  A parte mais dif√≠cil √© quebrar a p√°gina dessa maneira.  Eu n√£o sou um especialista em CSS, e desta vez foi muito mais f√°cil para mim, mas foi uma dan√ßa com um layout de tabela.  Antes de prosseguirmos, vamos ver que tipo de layouts de espa√ßo de trabalho s√£o em geral. </p><br><h4 id="fotoshop">  Photoshop </h4><br><p>  LPGenerator </p><br><p><img src="https://habrastorage.org/webt/ox/ff/6o/oxff6o1gmfnhsjntp4cppr8ythm.png"></p><br><p>  Minha cria√ß√£o </p><br><p><img src="https://habrastorage.org/webt/9r/57/q2/9r57q2fwlzmnakhmt0rdkgrxsr8.png"></p><br><p>  Grapesjs </p><br><p><img src="https://habrastorage.org/webt/tv/td/-6/tvtd-6ewxcldd_uwlkrp33bt1z8.png"></p><br><p>  De fato, j√° discutimos esse layout acima.  √Ä esquerda, s√£o usadas frequentemente ferramentas, √† direita, op√ß√µes, na parte superior h√° algo adicional, na parte inferior h√° uma barra de informa√ß√µes.  A op√ß√£o mais √≥bvia, mas ao mesmo tempo sobrecarregada para o usu√°rio.  Ele tem medo de todos esses bot√µes, como se estivesse no cockpit e precisava fazer um pouso de emerg√™ncia. </p><br><p><img src="https://habrastorage.org/webt/bi/qt/h2/biqth2l4au7rd5pmphd2bpukxpq.jpeg"></p><br><h4 id="tak-peregruzhen-chto-nado-vse-pryatat">  T√£o sobrecarregado que voc√™ tem que esconder tudo </h4><br><p>  Wix </p><br><p><img src="https://habrastorage.org/webt/3-/fc/ir/3-fcirszrvx_ahs4nqdt4vg0wlc.png"></p><br><p>  Por 5 anos, o design do Vicks mudou pouco.  Ap√≥s entrar no LPGenerator, voc√™ entende imediatamente que pode arrastar um elemento para uma p√°gina, ver as configura√ß√µes etc.  No caso do Wix, tudo est√° inicialmente oculto.  Essa √© uma boa abordagem.  O fato √© que o usu√°rio n√£o precisa ver, algo que provavelmente n√£o precisar√° no momento.  Mas aqui voc√™ precisa manter o equil√≠brio.  O Wix.com tem muitos elementos que voc√™ pode adicionar √† p√°gina e, por esse motivo, eles criaram uma galeria inteira de elementos.  Mas √© claro que coisas √≥bvias como texto ou bot√£o podem ser trazidas para um dos pain√©is para acesso r√°pido. </p><br><p><img src="https://habrastorage.org/webt/x8/cq/8q/x8cq8qzdq0swfpy6nbnjfdrrn3i.png"></p><br><p>  Quando voc√™ clica em um elemento, uma funcionalidade adicional aparece acima dele, relacionada ao elemento. </p><br><p><img src="https://habrastorage.org/webt/cv/jk/kl/cvjkkl_jkisk6dankfyobhxetts.png"></p><br><p>  Para perceber que isso ainda √© hemorr√°gico, falaremos sobre isso um pouco mais tarde. </p><br><h4 id="minimalist">  Minimalista </h4><br><p>  Squarespace </p><br><p><img src="https://habrastorage.org/webt/3c/go/bq/3cgobqbddacwl9b2x8eovoswqli.png"></p><br><p>  Design minimalista, espa√ßo de trabalho ocupa a maior parte da tela, a partir da interface o m√≠nimo mais necess√°rio.  A caixa de ferramentas √© muito estranha.  Por exemplo, a primeira tela com o bot√£o √© editada assim: </p><br><p><img src="https://habrastorage.org/webt/uc/hq/1z/uchq1z78zirhfhz-y0ltv-rsdvi.png"></p><br><p>  O bot√£o aqui √© representado pelo texto. </p><br><p>  Por si s√≥, o modo de edi√ß√£o √© muito semelhante √† visualiza√ß√£o e, somente quando voc√™ clica duas vezes em algumas telas, ele muda para o modo de edi√ß√£o. </p><br><p><img src="https://habrastorage.org/webt/vo/45/ib/vo45ibzpk2tr_gs39b7pvz_md0k.png"></p><br><p>  Ao mesmo tempo, o editor nos move para outra parte do aplicativo. </p><br><h4 id="ya-est-grut">  Eu sou groot </h4><br><p>  Tilda </p><br><p><img src="https://habrastorage.org/webt/i8/8s/8k/i88s8kktamx-mf1g-ttfugnr0vo.png"></p><br><p>  Editando um site, voc√™ parece estar nele.  Muito semelhante ao Wordpress e seu painel na parte superior com funcionalidade de edi√ß√£o / publica√ß√£o e muito mais.  Mas, ao mesmo tempo, a funcionalidade n√£o √© t√£o paradora quanto a do Squarespace, e o mesmo texto √© muito mais f√°cil de editar. </p><br><p>  Para adicionar algo, voc√™ precisa clicar em +.  Mova o bot√£o para qualquer lugar conveniente para voc√™, mas n√£o dar√° certo.  Tudo √© limitado. </p><br><p><img src="https://habrastorage.org/webt/5o/oh/jt/5oohjth7pgvlstdyplk3b1p9voe.png"></p><br><p>  A consequ√™ncia disso s√£o galerias com v√°rias op√ß√µes diferentes para o mesmo elemento. </p><br><p><img src="https://habrastorage.org/webt/rw/nv/qr/rwnvqr9qwor0bv9ykif4om-w_rq.png"></p><br><p>  Como voc√™ j√° pode entender, sou f√£ da vers√£o do Photoshop.  Uma vez que fui atormentado com o layout da tabela, mas agora em 2018 e para fins educacionais, n√£o podemos dar a m√≠nima para o suporte e implementar um layout nas CSS Grids. </p><br><p><img src="https://habrastorage.org/webt/43/0u/u_/430uu__6jgftrpnrbe-5o4nzx4c.png"></p><br><p>  Se algu√©m n√£o estiver familiarizado com grades CSS, essa √© uma das √∫ltimas maneiras de fazer o layout das p√°ginas.  Se for prefer√≠vel usar o Flexbox para menus, formul√°rios e outros conjuntos de elementos, em seguida, CSS Grids, eles se sentir√£o bem em coisas globais. </p><br><p>  Este n√£o √© um tutorial de CSS Grids, por isso vou explicar em poucas palavras ao longo do caminho, mas sem mega detalhes. </p><br><p>  Portanto, nossa tarefa √© criar os pain√©is esquerdo e direito e, no meio, a √°rea de trabalho em que o conte√∫do do site ser√° exibido. </p><br><p>  Trabalhar com grades √© um pouco mais f√°cil no FireFox, isso √© estranho, mas o cromo est√° por tr√°s disso.  Em um dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigos anteriores,</a> eu j√° falei sobre isso. </p><br><p>  Como √© uma inspe√ß√£o de grade no chrome: </p><br><p><img src="https://habrastorage.org/webt/l4/zp/kx/l4zpkxvws1hyhw3s5vj8pjkxcts.png"></p><br><p>  Ao mesmo tempo no muff: </p><br><p><img src="https://habrastorage.org/webt/s6/sv/9e/s6sv9erwvogh3ycfwxdrmn0xkzy.png"></p><br><p>  H√° uma mini representa√ß√£o da grade, r√≥tulos sem√¢nticos de colunas / linhas s√£o mostrados.  Portanto, se voc√™ quiser obter mais informa√ß√µes, use o FireFox por enquanto.  Estranho, sinto recomendar este navegador.  O tempo do Bugzilla j√° passou. </p><br><p>  Vamos come√ßar com uma marca√ß√£o simples. </p><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"main"</span></span>&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"left"</span></span>&gt;&lt;/div&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"content"</span></span>&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"site"</span></span>&gt;&lt;/div&gt; &lt;/div&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"right"</span></span>&gt;&lt;/div&gt; &lt;/div&gt;</code> </pre> <br><p>  .left - painel esquerdo <br>  .content - o meio em que o site ser√° exibido <br>  .right - painel direito </p><br><p><img src="https://habrastorage.org/webt/rx/1_/7x/rx1_7x-geqcqxbqn8aa7p_rrfgq.png"></p><br><p>  At√© agora, isso n√£o √© suficiente para o que parece.  Queremos que nossa interface seja igual √† Viewport.  Isso pode ser feito usando <code>height: 100%</code> , mas tamb√©m existem unidades de viewport <code>vh</code> e <code>vw</code> .  N√≥s vamos us√°-los. </p><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.main</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100vw</span></span>; }</code> </pre> <br><p><img src="https://habrastorage.org/webt/xd/90/xu/xd90xuw42emg47k_dudo7peaeee.png"></p><br><p>  Por padr√£o, os filhos s√£o transformados em seq√º√™ncias de caracteres.  Este √© um tipo de eixo flexbox.  Precisamos definir as colunas, podemos fazer isso da seguinte maneira: </p><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.main</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: grid; <span class="hljs-comment"><span class="hljs-comment">/* grid-template-columns: 1fr 2fr 1fr; */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">grid-template-columns</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">minmax</span></span>(200px, .4fr) <span class="hljs-built_in"><span class="hljs-built_in">minmax</span></span>(560px, 2fr) <span class="hljs-built_in"><span class="hljs-built_in">minmax</span></span>(200px, .4fr); }</code> </pre> <br><p>  Por tentativa e erro, cheguei a um temleit bastante complicado.  A fun√ß√£o <code>minmax</code> permite definir os tamanhos m√°ximo e m√≠nimo.  <code>fr</code> √© uma unidade universal que nos impede de calcular o tamanho em pixels ou porcentagem.  O problema √© que propriedades como <code>grid-gap</code> afetam o tamanho como a <code>border</code> .  <code>fr</code> projetado para nos livrar dessa dor. </p><br><p>  Tingir um pouco e remover a <code>margin</code> do <code>body</code> , isso nos incomoda um pouco: </p><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.left</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.content</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.right</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">box-sizing</span></span>: border-box; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: solid <span class="hljs-number"><span class="hljs-number">1px</span></span>; }</code> </pre> <br><p><img src="https://habrastorage.org/webt/eb/or/ju/eborjuzgno_g3xaigatthvl2af8.png"></p><br><p>  √ìtimo.  Mas essa foi a parte mais f√°cil.  Agora precisamos criar um espa√ßo de trabalho. <br>  <code>.site</code> √© o nosso site imagin√°rio.  Vamos transform√°-lo no padr√£o 960px e destacar. </p><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.site</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">2000px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">960px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: rebeccapurple; }</code> </pre> <br><p><img src="https://habrastorage.org/webt/wu/gd/p_/wugdp_c3sisp1pncb4avqwlmv9k.png"></p><br><p>  Se voc√™ apertar essa coisa, √© ainda mais divertido: </p><br><p><img src="https://habrastorage.org/webt/fo/yh/py/foyhpyslg-vh9014_3aui5qr4lk.png"></p><br><p>  Mas </p><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: scroll; }</code> </pre> <br><p>  Resolve o problema.  Apenas a parte est√©tica permanece.  Recuo. </p><br><p>  Isso pode ser feito usando a <code>margin</code> : </p><br><pre> <code class="hljs powershell"> margin: auto; margin<span class="hljs-literal"><span class="hljs-literal">-top</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>px; margin<span class="hljs-literal"><span class="hljs-literal">-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>px;</code> </pre> <br><p><img src="https://habrastorage.org/webt/b3/tu/oy/b3tuoy-ggnam_lctd6rhggruelm.png"></p><br><p>  <code>20px</code> pouco ou muitos depende de voc√™.  Mas h√° outro problema.  Se a tela for muito pequena, n√£o haver√° recuo √† esquerda e √† direita.  Desde <code>maring: auto</code> ser√° apertado.  A primeira coisa que vem √† mente √© definir <code>margin-left</code> e <code>margin-right</code> , mas aqui est√° outra piada.  O recuo estar√° apenas no lado esquerdo.  Se voc√™ rolar para a direita, ele n√£o estar√° l√°.  Esse √© um recurso. </p><br><p>  Sem entrar em detalhes, voc√™ pode corrigir isso usando <code>display: inline-block</code> .  Sim  Mas, ao mesmo tempo, a <code>margin: auto</code> que se comporta muito bem com tamanhos de tela grandes.  A pr√≥xima solu√ß√£o mais √≥bvia √© usar as consultas de m√≠dia.  Em telas grandes <code>display: block + margin: auto</code> , em telas pequenas <code>display: inline-block; margin-left/right: 20px</code>  <code>display: inline-block; margin-left/right: 20px</code> . </p><br><pre> <code class="hljs powershell"> .site{ height: <span class="hljs-number"><span class="hljs-number">2000</span></span>px; width: <span class="hljs-number"><span class="hljs-number">960</span></span>px; margin: auto; margin<span class="hljs-literal"><span class="hljs-literal">-top</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>px; margin<span class="hljs-literal"><span class="hljs-literal">-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>px; background: rebeccapurple; } @media(max<span class="hljs-literal"><span class="hljs-literal">-width</span></span>: <span class="hljs-number"><span class="hljs-number">1350</span></span>px) { .site { display: inline<span class="hljs-literal"><span class="hljs-literal">-block</span></span>; margin: <span class="hljs-number"><span class="hljs-number">20</span></span>px; } }</code> </pre> <br><p>  Algo assim.  Se algu√©m tiver alguma id√©ia melhor, bem-vindo ao comentar. </p><br><h3 id="otobrazhenie-sayta">  Mapeamento de site </h3><br><p>  O layout est√° pronto, agora voc√™ precisa exibir o site que o usu√°rio editar√°.  Isso √© uma coisa muito importante.  V√°rias decis√µes dependem disso.  Existem duas maneiras de exibir um site para edi√ß√£o ap√≥s o fato.  No <code>document</code> , onde est√° a interface do seu editor ou no <code>iframe</code> .  Ambas as op√ß√µes t√™m propriedades positivas e n√£o muito positivas. </p><br><h4 id="tot-zhe-document">  Mesmo documento </h4><br><p>  √â mais f√°cil, tanto mental quanto tecnicamente.  Mas muito mais problem√°tico no futuro.  O fato √© que, se voc√™ adicionar e adicionar a capacidade de inserir CSS e JS customizados, seu editor explodir√° ap√≥s alguns minutos. </p><br><p>  Usu√°rios que n√£o foram explicados como usar a caneca: </p><br><p><img src="https://habrastorage.org/webt/il/zj/6o/ilzj6otyz1cykjzdp4j6blxt4gy.gif"></p><br><p>  CSS encapsulado ainda n√£o √© uma realidade, como era h√° 5 anos.  Existem op√ß√µes, mas elas s√£o muito pesadas ou n√£o protegem totalmente.  Quando o usu√°rio inclina toda a interface e exclui acidentalmente todo o seu trabalho, voc√™ ser√° responsabilizado.  Olhando um pouco √† frente, quando voc√™ decidir adicionar v√°rios modelos prontos, seus desenvolvedores sofrer√£o com isso.  N√£o importa como voc√™ redefina algum estilo.  Agora, se voc√™ olhar para Tilda, eles t√™m problemas com isso. </p><br><p>  Tomemos, por exemplo, a primeira interface do usu√°rio deste editor que veio √† m√£o.  Bot√µes de formata√ß√£o de texto: </p><br><p><img src="https://habrastorage.org/webt/o3/mc/9d/o3mc9df9lmkxsc0qugbqew6606w.png"></p><br><p>  Voc√™ v√™ esses estilos?  <code>!important</code> na cor?  Esses estilos n√£o s√£o necess√°rios, se voc√™ desativ√°-los, nada mudar√°.  De qualquer forma, redefini-los √© muito simples, inserindo HTML personalizado na p√°gina do site: </p><br><p><img src="https://habrastorage.org/webt/wk/zr/4t/wkzr4tkwtqy5doy_x7ctzgsikdu.png"></p><br><p>  Admito, inseri esse c√≥digo manualmente.  Mas eu encontrei um per√≠odo gratuito de duas semanas com a capacidade de inserir HTML e CSS personalizados e obtive exatamente o mesmo efeito. </p><br><p><img src="https://habrastorage.org/webt/yt/dn/zj/ytdnzjgajp91hk0_pjcejrnh9rm.png"></p><br><p>  Como isso √© poss√≠vel?  Imagine que voc√™ comprou servi√ßos para desenvolver um site em Tilda por mil d√≥lares e desejou definir seu pr√≥prio estilo de links.  Tudo, o usu√°rio n√£o poder√° editar o site.  Bem, estou exagerando nas bordas, mas voc√™ pode imaginar qualquer outro estilo, para n√£o mencionar o JS personalizado.  Al√©m disso, a colis√£o se estende at√© a algum tipo de interface aninhada, embora isso seja √≥bvio. </p><br><p><img src="https://habrastorage.org/webt/vq/sj/b7/vqsjb74djtc-apq4qavvt0i2hdo.png"></p><br><p>  Impedir que os usu√°rios incorporem seu pr√≥prio c√≥digo seria uma solu√ß√£o para esse problema.  Mas no mundo real √© quase imposs√≠vel.  Voc√™ n√£o far√° integra√ß√µes personalizadas para cada usu√°rio.  Isso √© poss√≠vel com clientes gordos.  Mas n√£o quando voc√™ tem 90% da funcionalidade custa de 5 a 10 d√≥lares. </p><br><h4 id="iframe">  Iframe </h4><br><p>  Encapsule a p√°gina quase completamente, o <code>iframe</code> nos ajudar√°.  Este √© provavelmente o √∫nico lugar em que usei o <code>iframe</code> tanto tempo.  Podemos acessar o conte√∫do <code>iframe</code> e at√© vice-versa, se estiverem no mesmo dom√≠nio.  √â por isso que temos tudo sob controle.  Mas todos esses encapsulamentos s√£o um pouco desconcertantes para n√≥s.  Por exemplo, a sele√ß√£o de elementos, que discutiremos um pouco mais tarde.  Isol√°-lo no n√≠vel da interface, posicionando-se acima do <code>iframe</code> ou no pr√≥prio <code>iframe</code> ? </p><br><p>  Obviamente, ser√° mais f√°cil fazer isso no pr√≥prio <code>iframe</code> .  O fato √© que, ao rolar o conte√∫do, voc√™ n√£o precisa atualizar a posi√ß√£o da sele√ß√£o / pensar em um layout astuto (embora seja melhor) e em uma interface adicional.  Mas, calculando se a sua interface se sobrep√µe, a interface do editor ser√° mais f√°cil se voc√™ renderizar essas coisas sobre um <code>iframe</code> em um <code>document</code> .  Portanto, por exemplo, o Grapesjs combina essas duas abordagens: </p><br><p><img src="https://habrastorage.org/webt/vx/de/dl/vxdedlcxlsqeh7hndohcnh-1mbu.png"></p><br><p>  A sele√ß√£o ocorre com elementos no <code>iframe</code> , e a funcionalidade adicional sens√≠vel √† sobreposi√ß√£o √© renderizada sobre o <code>iframe</code> . </p><br><p><img src="https://habrastorage.org/webt/xu/s7/tf/xus7tfy-lzsxgawmbgqhmbg1lts.gif"></p><br><p>  Mas, para dar suporte aos seus estilos, voc√™ precisar√° importar tudo o que precisa para o <code>iframe</code> .  Imediatamente voc√™ ter√° que anexar a tela de carregamento para que o usu√°rio n√£o veja o site / interface n√£o inventada. </p><br><p>  Wix <code>&lt;head&gt;</code> <br><img src="https://habrastorage.org/webt/e6/km/pv/e6kmpv8lppux7hfqcn2whridp5c.gif"></p><br><p>  Portanto, voc√™ deve entender que isso s√≥ √© necess√°rio ao editar.  E n√£o se esque√ßa do estilo do usu√°rio ou voc√™ ter√° problemas novamente. </p><br><p>  Classe Grapesjs que eu "acidentalmente" atualizei com uma borda: </p><br><p><img src="https://habrastorage.org/webt/2n/4z/51/2n4z51jqizu1aowkutnjbeya6hi.png"></p><br><p>  O Grapesjs adiciona a <code>gjs-comp-selected</code> ao destacar, que √© claramente vis√≠vel durante a inspe√ß√£o, e acredite: essa ser√° a primeira coisa que o usu√°rio copiar√° para personaliza√ß√£o. </p><br><h3 id="vydelenie-elementov">  Selecionar elementos </h3><br><p>  Estamos um pouco √† frente de n√≥s mesmos, porque ainda n√£o entendemos como ensinar o editor a ver os elementos na p√°gina, mas isso n√£o ir√° nos prejudicar.  Antes de nos aprofundarmos em um t√≥pico mais complexo tecnologicamente, vamos ver como √© tecnologicamente dif√≠cil fazer a sele√ß√£o dos elementos da p√°gina :) Voc√™ acha que isso √© dif√≠cil?  Se voc√™ √© muito confiante, aqui est√° como todos os editores mencionados acima lidam com isso com um exemplo de texto: </p><br><p>  Meu editor </p><br><p><img src="https://habrastorage.org/webt/-v/h_/dv/-vh_dvzxkjgftcm4dki_ievlmzy.png"></p><br><p>  Tilda </p><br><p><img src="https://habrastorage.org/webt/sb/ns/jm/sbnsjm4bor01vaox3zv4cgdwrli.png"></p><br><p>  Grapesjs </p><br><p><img src="https://habrastorage.org/webt/uz/wj/5f/uzwj5frexaqpjz735_icekbkdec.png"></p><br><p>  Web designer do Google </p><br><p><img src="https://habrastorage.org/webt/hy/rq/0n/hyrq0nsfb_jcz3s4twd-e8sntoa.png"></p><br><p>  Wix </p><br><p><img src="https://habrastorage.org/webt/bo/qx/-u/boqx-ueywv-t_kheskn-v0ezibq.png"></p><br><p>  E ao editar </p><br><p><img src="https://habrastorage.org/webt/or/sg/bx/orsgbxrnaiixg_cki8c4-_sd7tw.png"></p><br><p>  Parte do texto n√£o est√° vis√≠vel.  Oh bem.  Do ponto de vista do desenvolvedor front-end, esse √© um recurso. </p><br><p><img src="https://habrastorage.org/webt/mh/qj/cn/mhqjcn9djii9ssocep76ifmu7a8.gif"></p><br><p>  O fato √© que os editores selecionam a maior parte do modelo DOM.  Mas julgue por si mesmo, voc√™ como usu√°rio, longe do desenvolvimento de sites, acha que est√° tudo bem?  N√£o, n√£o est√° tudo bem.  O conte√∫do √© mais do que o editor mostra.  No caso de alguns, h√° uma chance de perder a capacidade de selecionar um item.  √â normal que o navegador aloque dessa maneira para desenvolvedores, isso √© verdade por especifica√ß√£o. </p><br><p>  O que o usu√°rio v√™ (azul, tornou o texto transparente, para a obviedade do problema), destacado pelos editores, navegadores (vermelho): </p><br><p><img src="https://habrastorage.org/webt/cg/5y/yr/cg5yyra4dzwcbb5vnb3jqjobvmw.png"></p><br><p>  Chrome </p><br><p><img src="https://habrastorage.org/webt/vf/tk/uz/vftkuzunahq_xggyxewe6_ueir0.png"></p><br><p>  Firefox </p><br><p><img src="https://habrastorage.org/webt/_u/1i/yq/_u1iyqqoyfeusm5w_xpfdrze4fu.png"></p><br><p>  Ao selecionar texto no FF, o chrome n√£o. </p><br><p><img src="https://habrastorage.org/webt/ma/cp/ke/macpkebqeejixndozhyleaztlka.png"></p><br><p>  Ent√£o, por que esse batente em todos os editores?  Na minha experi√™ncia, direi que isso √© algo dif√≠cil de entender para gerentes de produto e / ou testadores.  Como regra geral, √© improv√°vel que todos os que trabalham no editor definam <code>line-height: 1px</code> ou tentem jogar com diferentes estilos e tamanhos de texto.  Eles t√™m olhos turvos e esses cardumes √† primeira vista elementar permanecem na zona cega.  E acredite, os clientes os encontram nos primeiros minutos. </p><br><p>  Do ponto de vista da UI / UX, isso pode n√£o estar claro tecnicamente, e esses detalhes de implementa√ß√£o geralmente s√£o deixados a crit√©rio do desenvolvedor. </p><br><p>  Ent√£o, √© poss√≠vel fazer uma sele√ß√£o de f√°cil utiliza√ß√£o?  Alguma id√©ia de como destacar um elemento? <br>  A sele√ß√£o deve incluir itens como <del>  margem </del>  , estofamento, borda.  O modelo de tamanho n√£o √© simples: </p><br><p><img src="https://habrastorage.org/webt/ti/og/bg/tiogbgalrcdz5gsq8z0sunuozcq.png"></p><br><p>  Na minha caixa de areia: </p><br><p><img src="https://habrastorage.org/webt/4z/4f/2o/4z4f2oj64higysv4mwtursdvgbo.png"></p><br><p>  Talvez a informa√ß√£o mais √∫til que extra√≠ do msdn: </p><br><p><img src="https://habrastorage.org/webt/xs/ib/_r/xsib_rshhtuuqsrzmipksfhkd-i.png"></p><br><p>  Mas n√£o h√° resposta para a nossa pergunta. </p><br><p>  Vamos tentar o que o DOM nos fornece em primeiro lugar.  Temos esse layout: </p><br><pre> <code class="hljs pgsql"> font-size: <span class="hljs-number"><span class="hljs-number">54</span></span>px; <span class="hljs-type"><span class="hljs-type">line</span></span>-height: <span class="hljs-number"><span class="hljs-number">0</span></span>px; <span class="hljs-comment"><span class="hljs-comment">/*   ,     */</span></span> border: <span class="hljs-number"><span class="hljs-number">10</span></span>px solid; padding: <span class="hljs-number"><span class="hljs-number">10</span></span>px;</code> </pre> <br><p><img src="https://habrastorage.org/webt/by/0n/di/by0ndiu0vxfqo9uotfxmhahxt7m.png"></p><br><p>  O tamanho do conte√∫do vis√≠vel √© 62px, o navegador mostra 40px.  Como obter 62px? </p><br><p>  getBoundingClientRect nos retorna - 40px <br>  clientHeight - 20 px <br>  scrollHeight - 41px </p><br><p>  Voc√™ pode brincar com a matem√°tica por muito tempo, mas eu n√£o encontrei solu√ß√µes usando essa abordagem. <br>  Mas, como ~ 5 anos atr√°s, eu sabia que era a chave para destacar o texto.  Bem, se voc√™ selecionar o texto, a sele√ß√£o ser√° exatamente a mesma que precisamos: </p><br><p><img src="https://habrastorage.org/webt/we/sc/po/wescpozlladamt4zra2t6-7i_qm.png"></p><br><p>  N√£o √© um bom exemplo, mas a altura com a qual temos o principal problema - tudo √© legal.  Mas como distinguir como faz alguma m√°gica do sistema? </p><br><p>  Depois de tantos anos, pesquisei no Google (aprendi!), Infelizmente, como pesquisei e o link foi perdido, mas aqui est√° a solu√ß√£o: </p><br><pre> <code class="hljs pgsql"> const range = document.createRange(); let rangeRect; range.selectNode(elm); rangeRect = range.getBoundingClientRect();</code> </pre> <br><p>  Crie um <code>range</code> , selecione um n√≥ e tire-o do <code>range</code> <code>ClientRect</code> .  Voila!  Al√©m disso, a sele√ß√£o funciona para tudo.  Voc√™ pode selecionar partes inteiras da p√°gina ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://developer.mozilla.org/en-US/docs/Web/API/Range</a> ). </p><br><p>  Tanto em altura como em largura, o destaque perfeito. </p><br><p><img src="https://habrastorage.org/webt/8_/9a/pn/8_9apnhsaht4i_2yb67mffxu-9s.png"></p><br><p>  (O destaque no editor ser√° uma borda azul, sem fundo. Texto selecionado para mostrar a sele√ß√£o do sistema.) </p><br><p>  Outra parte menos importante do destaque √© como mostr√°-lo?  Alguma id√©ia?  Um monte de maneiras.  Come√ßando pela borda, terminando com um elemento flutuante adicional. </p><br><p>  Antes de tudo, decida fazer isso em um <code>iframe</code> ou sobre um <code>iframe</code> , falamos sobre os pr√≥s e os contras acima. </p><br><p>  A borda n√£o se encaixa, porque adiciona tamanho ao elemento e, e se o usu√°rio definir sua borda para o elemento?  O mesmo com o <code>outline</code> , o Grapesjs peca fazendo uma sele√ß√£o atrav√©s dele. </p><br><p>  No meu caso, usei :: before, mas isso tamb√©m n√£o √© legal.  A maneira mais confi√°vel √© fazer 4 tiras e posicion√°-las nas bordas (que no futuro ser√£o elementos de redimensionamento do elemento) ou bloquear na parte superior.  √â melhor escolher entre essas duas op√ß√µes, combinando-as o m√°ximo poss√≠vel.  O excesso de posicionamento da p√°gina n√£o ajuda a otimizar uma interface do usu√°rio j√° sobrecarregada.  Portanto, quanto mais multifuncionais voc√™ posicionar, melhor. </p><br><h4 id="eto-ne-vse">  Isso n√£o √© tudo </h4><br><p>  Acabamos de realizar a sele√ß√£o.  Mas essa sele√ß√£o est√° no n√≠vel de apontar e ver.  H√° mais dois problemas associados a ele que deixarei para voc√™ pensar por si mesmo.  Eles n√£o s√£o t√£o desagrad√°veis. </p><br><ol><li>  As dimens√µes de um elemento mudam ao editar.  Voc√™ precisa acompanhar isso e atualizar a sele√ß√£o.  √â exatamente disso que meu editor e o Google Web Designer est√£o cansados.  Nem sempre, mas frequentemente. </li><li>  Para fazer um r√≥tulo / sele√ß√£o sobre um elemento, deixando o usu√°rio saber o que √© esse elemento, voc√™ precisa saber o que √©.  Portanto, o elemento deve ser inicializado no seu editor.  O desempenho do editor depende disso.  Pode haver mais de cem elementos em uma p√°gina, e apenas pegar e inicializar tudo na inicializa√ß√£o nem sempre √© a melhor id√©ia.  Mas no caso do meu editor, como ok.  haha  A inicializa√ß√£o pode ser feita clicando-se, ao passar o mouse, pela teoria da frequ√™ncia de uso. </li></ol><br><h3 id="redaktirovanie">  Edi√ß√£o </h3><br><p>  Desde que come√ßamos a falar sobre o destaque com um texto de exemplo, vamos rapidamente edit√°-lo. </p><br><p>  De fato, o texto √© a segunda parte importante do editor ap√≥s as figuras e o destaque :) </p><br><p>  Bem, veja como faz√™-lo para que, quando eu selecionar parte do texto e clicar em alguma funcionalidade de formata√ß√£o, formatar o texto selecionado exatamente? </p><br><p>  Se voc√™ √© filho de um amigo e um desenvolvedor engenhoso da m√£e, certamente dir√°: envolva o texto selecionado.  Ah, e voc√™ estar√° certo, quase como se Ilon tivesse respondido que, para construir um foguete, contratasse cem engenheiros. </p><br><p>  Quebrar o texto selecionado n√£o √© t√£o f√°cil.  Como resultado, haver√° v√°rias tags, e como segur√°-las posteriormente com a pr√≥xima sele√ß√£o e formata√ß√£o √© uma grande quest√£o.  Estudei o mesmo CKEditor por um longo tempo e descobri um milagre: </p><br><pre> <code class="hljs">contentEditable</code> </pre> <br><p>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/contentEditable</a> ) </p><br><p>  Este √© um editor de panquecas no navegador.  Isso n√£o apenas nos d√° a oportunidade de escrever um texto, mas tamb√©m de format√°-lo. </p><br><p>  Artigos relacionados: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content/Rich-Text_Editing_in_Mozilla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Editable_content</a> </li></ul><br><p>  Essa API permite executar comandos de formata√ß√£o no texto selecionado: </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> = document.execCommand(aCommandName, aShowDefaultUI, aValueArgument)</code> </pre> <br><p>  , ,  ,           . </p><br><p>     .      ,  ,             .    ,       .     .    ,   . </p><br><p> <code>contentEditable</code>        .   ,        .    .      ,    .         . </p><br><p>   , <code>contentEditable</code>    ,   CKEditor, CodeMirror,  .          .         ,         . </p><br><p>       ,      .      ,          ,   CKEditor.  ,   .   ,     ,      .        <code>iframe</code>         .      ,    .   ,           /.      <code>contentEditable</code>       .    <code>contentEditable</code> .  Wix, 2018 .      ,      <code>iframe</code> .         :)   ,   ,    .    ,  ,          .        .     ,     .         ,    . </p><br><p>  : </p><br><p><img src="https://habrastorage.org/webt/vu/di/sx/vudisxcbvdnll65w4i5cvhpzfnm.png"></p><br><p>        : </p><br><p><img src="https://habrastorage.org/webt/se/et/4u/seet4uwrlrqatgwp0hl-5e6-1d0.png"></p><br><p>        . </p><br><h3 id="resayz-elementov">   </h3><br><p>  ,       ,  , ,      /  ,   /     .    <code>0,0</code>  ,     : </p><br><p><img src="https://habrastorage.org/webt/zp/45/sk/zp45skikovnmwxv6xmuurtpef9s.png"><br> (svg/dom element) </p><br><h3 id="rabota-s-elementami-vc-mvc-i-vse-takoe">   , VC++, MVC    </h3><br><p>           ,        ,    Visual C++, C#, Delphi  .  -  ,    Backbone  ,          ,           //. </p><br><p><img src="https://habrastorage.org/webt/td/eg/pu/tdegpub5m4bj-fb4ncgxud05f8a.jpeg"></p><br><p>    ,  - ,    ,   <code></code> , <code></code>  .         : </p><br><p><img src="https://habrastorage.org/webt/hm/_y/mh/hm_ymhue2rsd6mrsxnvgp9buaka.jpeg"><br>  ,    ,    . </p><br><p>  ,         CSS,              . </p><br><p> Backbone,         (View),  (Model)   (Collection).      (Router).       View. MV*, MVV,    . </p><br><p>  ,     Backbone,    .      View  .       CSS .     ,        View     . </p><br><p>       ,   ,    View  .    View  Model    .        ,       .            ,        View  .  ,      .    ,  <code>.parent</code>      . </p><br><p><img src="https://habrastorage.org/webt/lm/t_/os/lmt_os4npi7ymexhji-mdtgdjta.png"></p><br><p>  View ,     View  Model,  <code>data-</code>    .    , Model              ,      . ,  Backbone,     React,   DOM,       .    ,      .    50-100     -  . </p><br><p>  ,      ,     HTML. ,   ,       .    virtual dom,      JS.      ‚Äî . !,      .    Wix,             : </p><br><p>  : </p><br><p><img src="https://habrastorage.org/webt/pi/ob/kl/piobkly8pmrwgdilipji6_lpdh8.png"></p><br><p>       : </p><br><p><img src="https://habrastorage.org/webt/nu/tf/l_/nutfl_4ot5oqluo9btnvq5_b6so.png"></p><br><p>    ,    : </p><br><p><img src="https://habrastorage.org/webt/4l/gf/un/4lgfun5qzl7_uu0nlewhl78qyr0.png"></p><br><p>    ,       .  .   React. </p><br><p>    CSS  ,       .       ,  HTML,        .  ,      . </p><br><p>   ,            <code>&lt;style&gt;</code>   .            ,     .       . </p><br><h4 id="hranenie-dannyh">   </h4><br><p>     <code>data-</code> , html   .      !== .     html     .        ,      ID,     ,           . </p><br><h4 id="redaktirovaniepredprosmotrprosmotr"> // </h4><br><p>    . ,        .       .  , ,    . </p><br><p>             .      .    . </p><br><h4 id="react-polymer-vue-rodilsya-pozzhe-angular-shutka"> React? Polymer? Vue ( )? Angular (!)? </h4><br><p>   3              ,     React    Polymer,  React   Web Components. </p><br><p>   ,       (Polymer),      .        .      .     Shady DOM     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> , ,    .      ,        . </p><br><h4 id="react">  Reagir </h4><br><p>      :)   .  React           : </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"root"</span></span>).contentDocument.body; ReactDOM.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, rootElement);</span></span></code> </pre> <br><p>     HTML,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ReactDOM.hydrate(element, container[, callback])</a> ,     -    DOM React.      .  Isso √© demais.  ,   ,         Virtual DOM     .    . </p><br><p>      ,     . Redux, Flux, Mobx   .            Redux,    . </p><br><p>       Marrionett  .     Backbone.    .    . </p><br><p>    ,     .     ?        React,  .      DOM?       ?  <code>ReactDOM.hydrate</code>   HTML?   ,        . </p><br><h3 id="responsive-and-adaptive"> Responsive and Adaptive </h3><br><p>        .    ,   ,       .       960px.       ,     ,    -  .      . </p><br><p>   ,      ,    .    ,     . </p><br><p><img src="https://habrastorage.org/webt/0o/4s/ko/0o4skozzucxwfcbp4llwch8rlzk.png"></p><br><p>      ,   <code>relative</code> .     ,   .     .     .       . </p><br><p><img src="https://habrastorage.org/webt/yf/3l/pt/yf3lptxzpieufnpgpgvfr7q8aso.png"><br> (    ) </p><br><p>    ,    .    ,      ,   ,      .      . </p><br><p><img src="https://habrastorage.org/webt/pu/sa/81/pusa811bvrhllottdbeium-ekrg.png"></p><br><h4 id="ogranichenie-03">  03 </h4><br><p>   , .     .    . </p><br><p><img src="https://habrastorage.org/webt/vn/bk/te/vnbktefl9_obc9yjhzn8jyxupeu.png"></p><br><p>     960px,    .          . </p><br><p>   , ,         . Wix,         .      ,                 . </p><br><p>       .  Sim sim  ,     ,      ,       ‚Äî    . </p><br><p><img src="https://habrastorage.org/webt/53/5p/ac/535pac6n0v8k9jmst-ni5slsvsa.gif"></p><br><p>      .     :) </p><br><h4 id="12-druzey-verstki-fleks-gridy"> 12  , , . </h4><br><p> 12  , ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://grapesjs.com/</a> ,       . </p><br><p><img src="https://habrastorage.org/webt/xm/-s/zw/xm-szwfalmrkyq3-pvttn-cfjic.png"></p><br><p>  ,      ,           .        ,         .     .       . </p><br><h4 id="zagotovki-shablonchiki-i-platnyy-servispomosch-mutnye-lyudi-vokrug"> ,    /,    </h4><br><p>        .                .        ,                  .      .    ,       UI/UX. </p><br><p><img src="https://habrastorage.org/webt/4p/eu/ou/4peuoum15qwic5jpd9iqnzjrx7e.png"></p><br><p><img src="https://habrastorage.org/webt/j_/bg/tx/j_bgtxifdftyiln2378mk_khgtk.png"></p><br><p><img src="https://habrastorage.org/webt/5k/q0/gv/5kq0gv5xbatji2jellyyumqrh4i.png"></p><br><p>   -        ,     , ,  ‚Äî   . </p><br><p>  ,   ,   ,   .       .  ,  ,        . </p><br><h3 id="itak">  </h3><br><p>     . C       .   UI/UX.         ,     undo/redo ,    .   ,     HTML    localStorage‚Ä¶ ,      . </p><br><p><img src="https://habrastorage.org/webt/ro/9i/3i/ro9i3idfnbnlxeu3umw8sfwb9bs.gif"></p><br><p>      .        ,    ,           ‚Äî .     ,     , . </p><br><p> <strong>PS</strong>      .   ,      .      ,  :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417637/">https://habr.com/ru/post/pt417637/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417617/index.html">Cassandra para armazenar metadados: sucessos e falhas</a></li>
<li><a href="../pt417621/index.html">O que aconteceu quando quebramos a exibi√ß√£o?</a></li>
<li><a href="../pt417627/index.html">Hyper CRM ou Mini ERP? Neg√≥cios bagun√ßados</a></li>
<li><a href="../pt417629/index.html">Delphi e C ++ Builder Community Edition</a></li>
<li><a href="../pt417631/index.html">Tutorial em v√≠deo da grade CSS</a></li>
<li><a href="../pt417639/index.html">O reverso do Neuromancer. Parte 4: Som, Anima√ß√£o, Huffman, Github</a></li>
<li><a href="../pt417641/index.html">10 cursos de aprendizado de m√°quina em ver√£o</a></li>
<li><a href="../pt417643/index.html">Cavaleiros da capa e rootkits: o que ver sobre hackers. Programas de TV</a></li>
<li><a href="../pt417645/index.html">Concurso de programa√ß√£o: negocia√ß√£o (resultados intermedi√°rios e an√∫ncios)</a></li>
<li><a href="../pt417647/index.html">Um projeto de lei sobre a prote√ß√£o de dados pessoais apresentado na Bielorr√∫ssia - o que est√° ‚Äúdentro‚Äù dele</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>