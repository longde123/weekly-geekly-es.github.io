<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📪 ⛈️ 👨🏿‍💼 Imprimimos imagens usando o Arduino ⤵️ 🏸 👩‍👩‍👧‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Durante muito tempo, quis fazer algum tipo de projeto no Ardoino, para que tudo nele se movesse e funcionasse. E, após alguns meses de projeto, progra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Imprimimos imagens usando o Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383877/"><iframe width="560" height="315" src="https://www.youtube.com/embed/AlBPFC41FsM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante muito tempo, quis fazer algum tipo de projeto no Ardoino, para que tudo nele se movesse e funcionasse. </font><font style="vertical-align: inherit;">E, após alguns meses de projeto, programação e montagem, temos uma mini-impressora, com a qual você pode imprimir uma variedade de imagens e texto nos adesivos mais comuns. </font><font style="vertical-align: inherit;">Se, depois de assistir ao vídeo, você deseja fazer algo assim, peço um gato.</font></font><br>
<a name="habracut"></a><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que nós precisamos</font></font></b></h3><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Uno. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para este projeto, usei a placa Arduino Uno italiana original. </font><font style="vertical-align: inherit;">Não posso garantir trabalho em outras placas.</font></font></li>
<li><b> sg-90 — 3 .</b>         .</li>
<li><b> .</b>       5 ,       </li>
<li><b>.</b>      3  :   , -     ,        .          -   «».</li>
<li><b> .</b>         ,    — .</li>
<li><b>   ().</b>        —  ,         ,    .       .      1-   .</li>
<li><b>.</b>        </li>
<li><b>     .</b>     «» ,            </li>
<li><b> 4 .</b>      -. ,    , , .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plantas. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vou enviá-lo gratuitamente e mediante solicitação, se você escrever </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui.</font></font></a></li>
</ul><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realmente implementação</font></font></b></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fabricação de peças</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse estágio depende do seu desejo e de suas capacidades. </font><font style="vertical-align: inherit;">Você pode cortá-lo na máquina ou cortar todas as peças manualmente. </font><font style="vertical-align: inherit;">O principal a ser observado aqui é que a qualidade e o desempenho deste projeto dependerão diretamente da sua precisão. </font><font style="vertical-align: inherit;">Você também precisa considerar este ponto: alguns dos detalhes que você vê nas fotografias podem diferir ligeiramente daqueles que estarão nos desenhos. </font><font style="vertical-align: inherit;">Deve-se notar imediatamente que os detalhes mostrados nas fotografias podem diferir ligeiramente daqueles anexados aos desenhos.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5fa/11b/e02/5fa11be02d2e4c47b94749eaa1f6f10f.png"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para quem planeja fazer tudo manualmente</font></font></b><div class="spoiler_text"> ,    , :  ( ),  ( ), ,    .<br>
<br>
   —  -     .<br>
<br>
  .  ,    .         .    ,    ,    (   )    .     , / ,    .     ,  —     .<br>
<br>
      ,     :<br>
<br>
<img width="23%" src="https://habrastorage.org/files/43d/912/7be/43d9127be30e479982e0a183e0d0845e.png"> <img width="23%" src="https://habrastorage.org/files/0a7/6f2/bbf/0a76f2bbfe314d36ab3edb1b2dce5fe1.png"> <img width="23%" src="https://habrastorage.org/files/a0e/215/483/a0e21548302a4139943de723ad494c5b.png"> <img width="23%" src="https://habrastorage.org/files/924/eba/2eb/924eba2ebead49b28d12fc2f60763207.png"><br>
<br>
<img width="23%" src="https://habrastorage.org/files/14f/d24/125/14fd241250c94f1f9ca402b97ff2c0c8.png"> <img width="23%" src="https://habrastorage.org/files/675/b20/f1e/675b20f1e19f4fcb8acdeed5e33224bd.png"> <img width="23%" src="https://habrastorage.org/files/570/189/1ca/5701891ca1db40c3a01126ee4da06064.png"><br>
</div></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recolhemos as paredes laterais</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Até agora, tudo é simples: pegue as peças e cole-as. </font><font style="vertical-align: inherit;">Tome cuidado para garantir que não haja excesso de cola nas peças.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/58d/5da/3fa/58d5da3fae1342c6a5616cd595fb25e0.png"> <img width="45%" src="https://habrastorage.org/files/9ca/7a7/3c6/9ca7a73c6c804a8194f93dd2825a7c59.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cole as pernas na base</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas pernas representam apenas valor estético. </font><font style="vertical-align: inherit;">Se você quiser economizar algum tempo, pode pular esta etapa.</font></font><br>
<img width="45%" src="https://habrastorage.org/files/30a/64d/66e/30a64d66ee624345ae30818c248fb291.png"> <img width="45%" src="https://habrastorage.org/files/85b/7b0/a8c/85b7b0a8ccee46fc8010941e967b4e87.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juntando o caso</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O texto nas placas frontal e traseira pode ser alterado a seu gosto.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/561/df1/6f8/561df16f82cc42b7a49f407239f6c08c.png"> <img width="45%" src="https://habrastorage.org/files/033/aca/376/033aca376e304c158fc8072171aa1b36.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/60d/699/5fe/60d6995fee9543a387bf09ca48a39ac6.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazendo um bloco de papel</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta etapa requer precisão e detalhamento especiais do trabalho. </font><font style="vertical-align: inherit;">De particular dificuldade são os trilhos em forma de "G" nos quais toda a plataforma será mantida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você precisa colar cuidadosamente tiras finas exatamente de acordo com os riscos indicados no desenho. </font><font style="vertical-align: inherit;">Para o melhor efeito, usei “prendedores de roupa” incomuns, mas você pode seguramente ficar sem eles. </font><font style="vertical-align: inherit;">O principal é remover o excesso de cola e garantir que as tiras não se movam em lugar algum. </font><font style="vertical-align: inherit;">Além disso, colamos as tiras mais amplamente - a tecnologia aqui é a mesma.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/352/c3e/cd7/352c3ecd719143ed91f29927dfacd1c2.png"> <img width="45%" src="https://habrastorage.org/files/a72/0be/597/a720be597c4d42048d6f40b04785cdd3.png"><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/0a4/40e/3d8/0a440e3d833848829fcfd035a1825e33.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois que a cola secar (pelo menos 20 minutos), tente inserir a almofada no corpo. Se ela for lá como um relógio e puder fazer movimentos claros para frente e para trás, então você terá muita sorte - é exatamente isso que você precisa. Caso contrário, pegamos uma lixa em nossas mãos e roçamos os locais dos trilhos das esteiras nas quais ele se encaixa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não deve haver problemas com a colagem de racks. Certifique-se de que fiquem perpendicularmente. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/316/8f7/f3a/3168f7f3a48342888827ab53bb6b7dbc.png"> <img width="45%" src="https://habrastorage.org/files/62b/c95/1e7/62bc951e7c254d1fb7aae11d4b9d4aef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosseguimos com a montagem do mecanismo que sustenta o papel. Os problemas não devem surgir se você coletar tudo nesta ordem. Primeiro colamos as prateleiras, fixamos as alavancas nelas. Em seguida, colamos uma tira de madeira compensada nelas para segurar as raposas do papel. E só então colamos a parte em que as molas se encostam.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/4f2/e73/999/4f2e73999837402397ddb4dc1ad1a049.png"> <img width="45%" src="https://habrastorage.org/files/ace/8cf/239/ace8cf2390464da9a91e0d8167243ada.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais algumas fotos para deixar mais claro como coletar tudo isso:</font></font></b><div class="spoiler_text"><img width="45%" src="https://habrastorage.org/files/821/ac3/87f/821ac387f768404bbb6978fb6df40c16.jpg"> <img width="45%" src="https://habrastorage.org/files/8e3/925/549/8e392554935a4f6dbf22356b85f958f8.jpg"> <img width="45%" src="https://habrastorage.org/files/69a/2fd/37a/69a2fd37a7544cee96664910280a9750.jpg"> <img width="45%" src="https://habrastorage.org/files/c19/4ac/4f8/c194ac4f8dcf4d39a7f8082b49429f3b.jpg"> <img width="45%" src="https://habrastorage.org/files/11c/a38/755/11ca38755d4a47b88560f2cc6cb87e3f.jpg"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo foi feito corretamente, sua impressora deve ficar assim:</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/85d/5f7/0fe/85d5f70fe94644f391ce0771b3ffdfc2.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mecanismo de brochar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente chegamos às engrenagens ... Elas só precisam ser colocadas em uma haste pré-preparada com cerca de 110 mm de comprimento, como mostrado na foto abaixo, e coladas em super cola (deve ser aplicada uniformemente nas paredes do orifício central da engrenagem). </font><font style="vertical-align: inherit;">Verifique se os dentes da engrenagem se encaixam no rack dentado. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/ccc/8cd/68c/ccc8cd68cf67488ababeaf449da6a27a.png"> <img width="45%" src="https://habrastorage.org/files/24d/490/beb/24d490beb4b84eea8a9fbf1236c12f3a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois que a cola secar, tente rolar a haste com cuidado - a plataforma deve se mover.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o primeiro servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro de tudo, você precisa preparar a engrenagem para o motor. </font><font style="vertical-align: inherit;">Cada servo vem com vários balanços de plástico. </font><font style="vertical-align: inherit;">Eles devem ser cortados e girados, conforme mostrado na figura abaixo. </font><font style="vertical-align: inherit;">E depois enfie na engrenagem. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/eeb/77f/9d1/eeb77f9d10f643889e50bb21f5df4c99.png"> <img width="45%" src="https://habrastorage.org/files/dec/d86/b2f/decd86b2fab64b969c0c87025308f8fd.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora vamos instalar a unidade. </font><font style="vertical-align: inherit;">Para começar, empurre o bloco de papel totalmente para dentro da impressora e role o servo no sentido anti-horário até parar. </font><font style="vertical-align: inherit;">Então você precisa escolher a posição ideal do inversor, ou seja, fixar o servo para que as engrenagens não tenham folga grande, mas não se encostem.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/36f/860/244/36f860244b1546aa86ac326b1f12038c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora você pode verificar se tudo funciona para nós. </font><font style="vertical-align: inherit;">Para fazer isso, conecte o servo ao seu Arduino via pin9 e carregue o esboço em Patterns: Servo&gt; Sweep. </font><font style="vertical-align: inherit;">Apenas no caso, eu dou o código abaixo.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servo sweep</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIN_ANGLE 0</span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_ANGLE 180</span><font></font>
<font></font>
Servo servo;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <font></font>
  servo.attach(<span class="hljs-number">9</span>);<font></font>
} <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{ <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MIN_ANGLE; i&lt;=MAX_ANGLE; ++i) {<font></font>
    servo.write(i); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=MAX_ANGLE; i&gt;=MIN_ANGLE; --i) {                                <font></font>
    servo.write(i);<font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
  } <font></font>
} <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo desse certo, ótimo. </font><font style="vertical-align: inherit;">Caso contrário, tente alterar a posição do inversor ou os valores MIN_ANGLE e MAX_ANGLE no código.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o segundo servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui tudo é feito da mesma forma com o primeiro motor. </font><font style="vertical-align: inherit;">A única diferença é que você precisa de um pequeno eixo com ~ 12 mm de comprimento para prender as duas engrenagens.</font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e73/db2/47e/e73db247e6f243f29b0dbb3ecd9d8b4b.png"> <img width="45%" src="https://habrastorage.org/files/db0/854/2f0/db08542f0d8b4c69ac52d45c77f4d0a6.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocamos um carro de impressão</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você conseguiu chegar a esse estágio, não deve ter dificuldades especiais aqui. </font><font style="vertical-align: inherit;">A coisa mais difícil aqui é montar cuidadosamente o carro (para que ele não fique pendurado), talvez você precise trabalhar com uma lixa. </font><font style="vertical-align: inherit;">O próximo problema possível é uma cremalheira mal colada. </font><font style="vertical-align: inherit;">Ele deve ficar estritamente paralelo à base do alojamento, é melhor colá-lo quando o carro estiver na posição mais distante do servoconversor. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/e6d/a7b/c97/e6da7bc97edb46318be775ca4bbdc8f2.png"> <img width="45%" src="https://habrastorage.org/files/c0e/bef/92a/c0ebef92a0c443a5825ecf08168b1cc1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos esta montagem usando o Arduino e o esboço acima mencionado, se tudo funcionar como deveria, e prossiga para a próxima etapa. </font><font style="vertical-align: inherit;">Caso contrário, o problema provavelmente se deve a engrenagens ou a uma cremalheira colada incorretamente.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Último servo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta fase, recolhemos a alavanca da caneta de feltro. </font><font style="vertical-align: inherit;">Precisamos ser capazes de fazer um furo lateral para o parafuso, com o qual iremos apertar o parafuso. </font><font style="vertical-align: inherit;">Tente garantir que, no estado em que a caneta com ponta de feltro seja abaixada, o servo tenha uma posição de 90 graus, para que você não precise fazer correções desnecessárias no código. </font></font><br>
<br>
<img width="45%" src="https://habrastorage.org/files/b04/5d1/e50/b045d1e503934c88a6f9cdc0a8fd7eaf.png"> <img width="45%" src="https://habrastorage.org/files/d33/bab/b92/d33babb92f6245c4a7bc6237796996f7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de instalar o motor, nossa impressora estará quase pronta. </font><font style="vertical-align: inherit;">Eu recomendo colar a superfície do bloco de papel com fita adesiva; durante o processo de depuração, a impressora pode ficar seriamente suja.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/f0e/986/256/f0e986256d1e40af9c88d6d94e47a744.png"></div><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeira execução e depuração</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para começar, conectamos o servo ao nosso Arduino Uno, não é necessário colocá-lo dentro da impressora nesta fase; será inconveniente trabalhar. </font><font style="vertical-align: inherit;">Conectamos o primeiro motor ao pino2, o segundo ao pino4, o terceiro ao pino6. </font><font style="vertical-align: inherit;">Em seguida, faça o download deste esboço. </font><font style="vertical-align: inherit;">Atenção! </font><font style="vertical-align: inherit;">Esse código não funciona no IDE, 1.6.4 mais recente (tentei comentar em detalhes e todo o código claramente, não vou abordar muito dele):</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me vire</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">/*</span><font></font><span class="hljs-comment">
*  MiniPrinter</span><font></font><span class="hljs-comment">
*  Designed in May 2015</span><font></font><span class="hljs-comment">
*  By Alexandrow Yegor</span><font></font><span class="hljs-comment">
*/</span><font></font>
<font></font>
<span class="hljs-comment">// ,        Servo</span><font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> {</span><font></font>
  <span class="hljs-keyword">int</span> min_angle, max_angle;<font></font>
  Servo servo;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_W 64 <span class="hljs-comment">// </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IMG_H 64 <span class="hljs-comment">// </span></span><font></font>
<span class="hljs-keyword">int</span> STEP = <span class="hljs-number">2</span>;    <span class="hljs-comment">//    1 </span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IDLING_MS 4 <span class="hljs-comment">// ,     1 </span></span><font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WRITING_MS 8</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">motor_x</span>, <span class="hljs-title">motor_y</span>, <span class="hljs-title">motor_p</span>;</span><font></font>
byte img[IMG_W/<span class="hljs-number">8</span>]; <span class="hljs-comment">//  </span><font></font>
                   <span class="hljs-comment">//  =  </span><font></font>
<font></font>
<span class="hljs-function">struct Motor <span class="hljs-title">newMotor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pin, <span class="hljs-keyword">int</span> a1, <span class="hljs-keyword">int</span> a2)</span> </span>{ <span class="hljs-comment">// </span><font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Motor</span> <span class="hljs-title">m</span>;</span><font></font>
<font></font>
  m.servo.attach(pin);<font></font>
  m.min_angle = a1;<font></font>
  m.max_angle = a2;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> m;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">gotoStart</span><span class="hljs-params">()</span> </span>{<font></font>
   motor_p.servo.write(motor_p.max_angle); <span class="hljs-comment">// </span><font></font>
   delay(<span class="hljs-number">15</span>);<font></font>
   <font></font>
   <span class="hljs-comment">//   (0; 0)</span><font></font>
   motor_x.servo.write(motor_x.min_angle);<font></font>
   motor_y.servo.write(motor_y.min_angle); <font></font>
   delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); <font></font>
    delay(<span class="hljs-number">15</span>);<font></font>
    motor_x.servo.write(motor_x.min_angle);<font></font>
    motor_y.servo.write(motor_y.max_angle);<font></font>
    delay(IDLING_MS * STEP * IMG_W + <span class="hljs-number">150</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">//</span><font></font>
  Serial.begin(<span class="hljs-number">9600</span>);<font></font>
  motor_y = newMotor(<span class="hljs-number">2</span>, <span class="hljs-number">50</span>, <span class="hljs-number">180</span>);<font></font>
  motor_x = newMotor(<span class="hljs-number">4</span>, <span class="hljs-number">30</span>, <span class="hljs-number">160</span>);<font></font>
  motor_p = newMotor(<span class="hljs-number">6</span>, <span class="hljs-number">90</span>, <span class="hljs-number">99</span>);<font></font>
  gotoStart();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//,      ,     </span><font></font>
<span class="hljs-function">boolean <span class="hljs-title">nextWayIsEmpty</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{<font></font>
  <span class="hljs-keyword">for</span>(; i&lt;IMG_W; ++i) {<font></font>
    <span class="hljs-keyword">if</span>(!(img[i/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(i%<span class="hljs-number">8</span>)))) <span class="hljs-keyword">continue</span>;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printImg</span><span class="hljs-params">()</span> </span>{<font></font>
  gotoStart();<font></font>
  <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;<font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y=<span class="hljs-number">0</span>; y&lt;IMG_H; ++y) {<font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;IMG_W/<span class="hljs-number">8</span>; ++i) img[i] = Serial.read();<font></font>
      Serial.write(<span class="hljs-number">61</span>);<span class="hljs-comment">//  ,          </span><font></font>
      <font></font>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;STEP; ++i) { <span class="hljs-comment">//       ,  STEP</span><font></font>
          motor_x.servo.write(motor_x.min_angle); <span class="hljs-comment">//   </span><font></font>
          motor_y.servo.write(motor_y.min_angle + y*STEP + i); <font></font>
          delay(IDLING_MS * STEP * x + <span class="hljs-number">30</span>);<font></font>
          <font></font>
          <span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>; x&lt;IMG_W; ++x) {<font></font>
            <font></font>
            <span class="hljs-keyword">if</span>(nextWayIsEmpty(x)) {<font></font>
              motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
              <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
            <font></font>
            <span class="hljs-comment">//  (/),    </span><font></font>
            motor_p.servo.write((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? motor_p.min_angle : motor_p.max_angle);<font></font>
            delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
            <font></font>
            <span class="hljs-comment">//     X</span><font></font>
            motor_x.servo.write(motor_x.min_angle + x*STEP);<font></font>
            delay(((img[x/<span class="hljs-number">8</span>] &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>-(x%<span class="hljs-number">8</span>))) ? WRITING_MS : IDLING_MS) * STEP); <font></font>
        }<font></font>
        <font></font>
        <span class="hljs-comment">// </span><font></font>
        motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
      }<font></font>
    <font></font>
    <span class="hljs-comment">// </span><font></font>
    motor_p.servo.write(motor_p.max_angle); delay(IDLING_MS * (motor_p.max_angle-motor_p.min_angle));<font></font>
  }<font></font>
    <font></font>
  gotoStart();<font></font>
  Serial.flush();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  </span><font></font>
<span class="hljs-comment">//     ,    </span><font></font>
<span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">checkMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    <span class="hljs-keyword">if</span>(Serial.available()) {<font></font>
      delay(<span class="hljs-number">10</span>);<font></font>
      byte msg[] = {Serial.read(), Serial.read()};<font></font>
      <font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'R'</span>) printImg(); <span class="hljs-comment">//</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) gotoStart(); <span class="hljs-comment">//   (0; 0)</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'C'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'L'</span>) finish(); <span class="hljs-comment">//" "</span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'S'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'Z'</span>) STEP = Serial.read(); <span class="hljs-comment">//    </span><font></font>
      <span class="hljs-keyword">if</span>(msg[<span class="hljs-number">0</span>] == <span class="hljs-string">'P'</span> &amp;&amp; msg[<span class="hljs-number">1</span>] == <span class="hljs-string">'T'</span>) { <span class="hljs-comment">//     (PT+1 -   , PT-2  2  )</span><font></font>
        <span class="hljs-keyword">if</span>(Serial.read() == <span class="hljs-string">'+'</span>) {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle += b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle += b-<span class="hljs-string">'0'</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          byte b = Serial.read();<font></font>
          motor_p.min_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
          motor_p.max_angle -= b-<span class="hljs-string">'0'</span>;<font></font>
        }<font></font>
      }  <font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  checkMessage();<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você já testou e depurou todos os sistemas até este ponto, não deverá haver problemas: o bloco de papel deve se torcer levemente e o carro de impressão deve ocupar a posição esquerda extrema. Se alguma das opções acima não atingir as bordas ou, ao contrário, encostar nas paredes, tente selecionar os parâmetros na função setup (). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você encontrar problemas mais sérios, recomendo que você leia cuidadosamente todo o tutorial novamente e verifique se fez tudo corretamente. Além disso, será bom verificar cada motor novamente usando a primeira lista (servo sweep). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, conectamos nossa impressora ao computador e executamos este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (precisamos do java instalado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, selecionamos a porta serial à qual a impressora está conectada e pressionamos o botão “OK”, após o qual a impressora deve torcer levemente o bloco de papel. Depois clique no botão "Log". Abrimos uma janela do terminal. Em seguida, digite o comando CL - a impressora deve empurrar o teclado para dentro. Se você digitar ST, a impressora retornará à sua posição original. Você também pode enviar vários comandos em uma linha, por exemplo: CLSTCL. O principal é não usar espaços e outros personagens entre as equipes.</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/files/5ba/ec2/3be/5baec23be65546d09251c02a11c6406c.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se conseguirmos lidar com isso, vá em frente - instale a alavanca com uma caneta de feltro. Primeiro, fixe a caneta com ponta de feltro na alavanca. a distância da ponta até a borda inferior da alavanca deve ser de aproximadamente 25 mm. Depois, você precisa parafusar o parafuso para que a caneta de feltro fique fixa e não desapareça. Agora, basta colocar esta alavanca no eixo do servo - a distância da ponta da caneta com o papel deve ser de aproximadamente 7 mm. Mais precisamente, a altura pode ser ajustada usando os comandos PT + 1 e PT-1. Eles ajustam o ângulo do marcador, em vez de 1, pode haver qualquer número de 0 a 9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora chegou o momento mais crucial - imprimir a primeira foto. Imagens pequenas de 64x64 são mais adequadas. Eu recomendo usar este Mario: </font></font><br>
<br>
<img src="https://habrastorage.org/files/8d2/7de/3f6/8d27de3f6dc04c9b892e31bdf4271f53.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Primeiro, você precisa abrir a imagem:</font></font><br>
<br>
<div style="text-align:center;"><img width="60%" src="https://habrastorage.org/files/c39/95e/7dd/c3995e7ddc784328a3b1d5c38440fdaa.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando os controles deslizantes à direita, você pode ajustar o contraste da imagem ao seu gosto. Vale lembrar que quanto mais pixels pretos, mais a imagem será impressa.</font></font><br>
<br>
<div style="text-align:center;"><img width="45%" src="https://habrastorage.org/files/c73/666/cf5/c73666cf5293464fa2a4c017caa1b70d.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É tudo. </font><font style="vertical-align: inherit;">Depois, basta pressionar o botão "Imprimir" e admirar como sua criação funciona. </font><font style="vertical-align: inherit;">O único problema possível nesta fase é pressionar a caneta com ponta de feltro. </font><font style="vertical-align: inherit;">Ele pressiona demais ou não pressiona. </font><font style="vertical-align: inherit;">Além de controlar a altura da caneta com ponta de feltro através do terminal, você pode tentar ajustar a altura manualmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, por seu próprio risco, você pode alterar os valores das variáveis ​​globais no esboço: brinque com a velocidade e o tamanho da impressão. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim que estiver satisfeito com a qualidade da imagem resultante, você pode colocar o Arduino em segurança no estojo da impressora, apertando-o com parafusos - isso pode ser considerado seu projeto, você pode mostrar a todos os seus amigos!</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Só isso, espero que você esteja interessado neste projeto. </font><font style="vertical-align: inherit;">Obviamente, ele tem suas </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desvantagens de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recursos </font><s><font style="vertical-align: inherit;">de</font></s><font style="vertical-align: inherit;"> implementação, portanto ainda há espaço para aprimoramento, aprimoramento e desenvolvimento. </font><font style="vertical-align: inherit;">Ficarei feliz em receber conselhos, perguntas e sugestões nos comentários.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt383877/">https://habr.com/ru/post/pt383877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt383865/index.html">Os sismólogos de Berkeley criaram um mapa 3D das camadas profundas da Terra</a></li>
<li><a href="../pt383867/index.html">O sexo na realidade virtual está a caminho: os brinquedos estão prontos (18 anos ou mais)</a></li>
<li><a href="../pt383871/index.html">Smartphone DEXP Ixion ML2 5 ”: uma bateria poderosa para um recorde de 5.200 mAh, tela HD e uma semana de autonomia</a></li>
<li><a href="../pt383873/index.html">A impressão 3D em metal utiliza um sistema a laser e robótica avançada</a></li>
<li><a href="../pt383875/index.html">Versão HTML5 do StarCraft</a></li>
<li><a href="../pt383881/index.html">Configuração sem fio do ESP8266 no firmware DeviceHive v 0.3</a></li>
<li><a href="../pt383885/index.html">Como fazer uma descoberta científica sem sair de casa?</a></li>
<li><a href="../pt383891/index.html">Steve Wozniak finalmente gostou do filme sobre Steve Jobs com Michael Fassbender no papel-título</a></li>
<li><a href="../pt383893/index.html">Competições amadores de Mars rovers na Polônia</a></li>
<li><a href="../pt383895/index.html">Análise do ASUS ZenPad C 7.0 tablet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>