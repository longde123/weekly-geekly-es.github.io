<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚓 🛰️ 🐙 إنترنت الأشياء مقابل بنس واحد: دليل عملي. الجزء 2 ، البرمجيات 👨🏻‍⚕️ 👃🏾 🌅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="نواصل سلسلة من المقالات الإرشادية التي نأخذ فيها بعين الاعتبار كيفية التنفيذ من الصفر جهاز بسيط ورخيص يتم التحكم فيه في السحابة وإنترنت الأشياء مع إمك...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>إنترنت الأشياء مقابل بنس واحد: دليل عملي. الجزء 2 ، البرمجيات</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/383027/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نواصل سلسلة من المقالات الإرشادية التي نأخذ فيها بعين الاعتبار كيفية التنفيذ من الصفر جهاز بسيط ورخيص يتم التحكم فيه في السحابة وإنترنت الأشياء مع إمكانات كبيرة - دون اللحام والصعوبات غير الضرورية. خذ رقاقة صغيرة نظيفة ESP8266 ، قم بتثبيت البرنامج الثابت من DeviceHive ، وقم بتكوين وكتابة تطبيق ويب بسيط للوصول إلى الخادم السحابي. نقوم بتجميع وتوصيل جهاز بسيط بالشريحة الصغيرة ، والتي يمكن التحكم فيها ببضع نقرات في المتصفح. فيما يلي الجزء الثاني من الدورة ، الذي يصف البرنامج المطلوب ، وكيفية تشغيله ، وكيفية تشغيل ESP8266 وتكوين صداقات مع الخادم.</font></font></i><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://www.youtube.com/embed/VuReziKXvos%3Ffeature%3Doembed&amp;usg=ALkJrhgtidllM9vj2Xg8ZpUHLdVHFPshCg" frameborder="0" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يوضح كاتب المقال ما سيتم مناقشته اليوم. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
المقالات الأولى من السلسلة: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنترنت الأشياء مقابل بنس واحد ، أو ما يمكن أن يفعله DeviceHive. </font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
• </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنترنت الأشياء مقابل بنس واحد: دليل عملي. </font><font style="vertical-align: inherit;">الجزء 1 ، الأجهزة.</font></font></a><br>
<a name="habracut"></a><br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">قم بإنشاء خادم</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعنا نذهب في أسهل طريقة ونستخدم ملعب DeviceHive المجاني. </font><font style="vertical-align: inherit;">للقيام بذلك ، اذهب </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> والتسجيل. </font><font style="vertical-align: inherit;">بعد ذلك ، قم بتسجيل الدخول والوصول إلى هذه الصفحة:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/844/419/90d/84441990d53945c1b48f2fae010472ff.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تهانينا! </font><font style="vertical-align: inherit;">الآن لديك ملعب خاص بك على DeviceHive. </font><font style="vertical-align: inherit;">للاتصال بمجموعة اللعب من الخارج ، استخدم رابط Url API. </font><font style="vertical-align: inherit;">هذا هو العنوان الذي نستخدمه للوصول إلى الخادم من ESP8266 وتطبيق العميل. </font><font style="vertical-align: inherit;">للوصول إلى لوحة المشرف (على عنوان Url الخاص بالمشرف) ، استخدم تسجيل الدخول المحدد (تسجيل الدخول الأولي) وكلمة المرور (كلمة المرور الأولية). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
انحراف صغير: يمكن نشر الخادم محليًا أو على خدمة سحابية. </font><font style="vertical-align: inherit;">ابحث عن تعليمات التثبيت </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">يمكنك تسهيل الأمر - ابدأ الخادم باستخدام </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في سطر واحد: </font><font style="vertical-align: inherit;">
انظر </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">هنا</font></a><font style="vertical-align: inherit;"> للحصول على وصف كامل </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
DeviceHive هو مشروع مفتوح المصدر بالكامل. </font><font style="vertical-align: inherit;">هذا يعني أنه يمكن نشر الخادم في المنزل وفي الخدمة السحابية ، على سبيل المثال ، </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">Azure</font></a></font><br>
<br>
<code>docker run -d --name=devicehive -p 8080:80 -p 9001:9001 devicehive/devicehive-standalone<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<h5><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">البرامج الثابتة</font></font></b></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حان الوقت للقيام بالبرامج الثابتة. للقيام بذلك ، نحتاج إلى توصيل ESP8266 بالكمبيوتر ، ثم توصيل محول USB-&gt; UART ، ومصدر الطاقة ، ووحدة ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
قم بتثبيت برنامج التشغيل الخاص بالمحول. مستخدمي Linux أسهل هنا ، لأن النواة تتضمن بالفعل معظم برامج التشغيل هذه. ولكن سيتعين على مستخدمي Windows و OS X تثبيت برنامج تشغيل المحول بأنفسهم. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
روابط لصفحات التنزيل الرسمية للرقائق الأكثر شيوعًا: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CP210x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.silabs.com/products/mcu/pages/usbtouartbridgevcpdrivers.aspx</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PL230x: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.prolific.com.tw/US/ShowProduct.aspx؟pcid=41</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
FTDI: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www. ftdichip.com/Drivers/VCP.htm</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CH341: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.wch.cn/index.php؟s=/page-search_content-keyword-CH341SER.html</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
قم بتوصيل المحول وتأكد من أن برنامج التشغيل يعمل بشكل صحيح. في نظام التشغيل Linux ، يجب أن يظهر الجهاز على نظام الملفات / dev / ttyUSB * ، وعلى OS X /dev/tty.* وعلى نظام التشغيل Windows ، يجب أن يظهر منفذ COM إضافي على مدير الجهاز. إذا كان كل شيء على ما يرام ، افصل المحول عن الكمبيوتر.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعد ذلك ، قم بتوصيل خرج مصدر الطاقة (3.3 فولت) بـ ESP8266 بسلكين. لكي يتم تشغيل الوحدة ، عند تشغيلها ، يجب السماح لها بالعمل من خلال توفير مستوى عالٍ من إخراج CH_PD. من الضروري إبلاغ الوحدة بأننا سنستخدم الذاكرة الداخلية ، لذا عند تشغيل GPIO15 يجب أن تكون منخفضة. ولإدخال وضع البرمجة ، نحتاج إلى تطبيق مستوى منخفض على GPIO0. نحن بحاجة إلى هذا الأخير فقط خلال البرامج الثابتة. يبدو زاحفًا ، ولكن في الواقع نحن بحاجة فقط إلى توصيل الأسلاك الثلاثة لـ CH_PD مع زائد من مصدر الطاقة ، وتوصيل GPIO0 و GPIO15 بالأرض (ناقص) مصدر الطاقة. أخيرًا ، نقوم بتوصيل محول USB-&gt; UART باستخدام ثلاثة أسلاك أخرى: نقوم بتوصيل المحطات ناقص المصدر (GND) بأرض المحول ،يتم توصيل خرج محول RX بإخراج وحدة TX الخاصة بـ ESP8266 وإخراج محول TX بإخراج وحدة RX. نحصل على مخطط الاتصال النهائي لثلاث وحدات قياسية مختلفة. إذا كان بعض الإخراج مفقودًا ، فمن المرجح أنه تم توصيله بالفعل داخل الوحدة النمطية ، فإن السلك الأرجواني هو الاتصال الأكثر مؤقتة للدخول إلى وضع البرمجة.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e1/9f3/512/8e19f3512588495b876d97a3e9ab806f.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/c11/6df/510/c116df510f854c09b2e12ea14b5c5d23.png"></div><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8fb/a10/7b3/8fba107b32ee43199ff3d113922f5880.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مثال على تنفيذ مثل هذا الاتصال:</font></font><br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/482/644/75f/48264475fcfa4d408b58d46b85b38046.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كما ترى ، لم يكن هناك شيء مطلوب للحام ، يمكن إجراء جميع الاتصالات باستخدام الموصلات العادية. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعد ذلك ، قم بتشغيل مصدر الطاقة ، وقم بتوصيل المحول بالكمبيوتر ، وقم بتنزيل البرنامج الثابت لـ DeviceHive المعاد تجميعه لـ ESP8266. </font><font style="vertical-align: inherit;">في وقت النشر ، يتوفر الإصدار الأول والأحدث </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن دائمًا العثور على إصدارات مسبقة جديدة على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">يمكنك أيضًا أخذ المستودع بالكامل </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، وتجميع البرامج الثابتة بنفسك وتعديلها كما يحلو لك. </font><font style="vertical-align: inherit;">جميع التعليمات البرمجية في المستودع مرخصة بموجب MIT.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
قم بفك ضغط الأرشيف الذي تم تنزيله من الرابط أعلاه إلى دليل منفصل ، قم بتشغيل esp-flasher- &lt;your OS name&gt; من وحدة التحكم (يمكن لمستخدمي Windows ببساطة النقر نقرًا مزدوجًا فوق esp-flasher-win.exe). ونتيجة لذلك ، يجب أن يكون لديك شيء مثل هذا:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/8e2/0d2/3ab/8e20d23ab58341e595662a60778544af.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالإضافة إلى الأداة المساعدة المضمنة للبرامج الثابتة ESP8266 ، يمكنك استخدام أي أداة أخرى ، على سبيل المثال ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esptool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تهانينا - تم تثبيت البرنامج الثابت ويعمل بالفعل! الآن افصل الأرض عن دبوس GPIO0 (لن تكون هناك حاجة إليه بعد ذلك) حتى لا تدخل الوحدة في وضع البرمجة مرة أخرى. للاتصال بمحطة ESP8266 ، قم بتشغيل esp-terminal- &lt;your OS name&gt; أو أي طرف منفذ تسلسلي آخر يدعم أحرف الهروب ، على سبيل المثال ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أو أداة الشاشة GNU. معلمات المنفذ: السرعة 115200 ، 8N1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كل من الأدوات المساعدة المضمنة قادرة على الكشف تلقائيًا عن المنفذ الذي يتصل به ESP8266 ، أي لا توجد معلمات مطلوبة عند بدء التشغيل. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بدء تشغيل المحطة ، سنرى الدعوة:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/89a/fa8/916/89afa8916b634d60877dabb7ac9ff577.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الواقع ، هذه محطة تشبه unix منتظمة تدعم الإكمال التلقائي (مفتاح Tab) والتاريخ (مفاتيح لأعلى ولأسفل). </font><font style="vertical-align: inherit;">ولكن في الواقع ، لا توجد ملفات أو أنظمة تشغيل هناك. </font><font style="vertical-align: inherit;">قائمة الأوامر المتاحة متاحة في "مساعدة":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3ab/5fe/a19/3ab5fea19fbb4c9cb662c9136c4364e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نحن مهتمون بالأمر "تكوين". </font><font style="vertical-align: inherit;">قم بتشغيله لتكوين الجهاز. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
سوف تطرح الأداة خمسة أسئلة بسيطة:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اسم شبكة Wi-Fi الخاصة بك.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كلمة مرور شبكة Wi-Fi الخاصة بك.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عنوان API لخادمك.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معرف الجهاز الخاص بجهازك.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مفتاح الجهاز.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في "عنوان URL لخادم DeviceHive" أدخل "عنوان URL لواجهة برمجة التطبيقات" من الخادم. </font><font style="vertical-align: inherit;">في "DeviceID" - بعض معرفات الجهاز الفريدة للخادم ، بهذا الاسم سنميز الأجهزة الموجودة على الخادم. </font><font style="vertical-align: inherit;">قد يكون "DeviceID" نصًا عاديًا. </font><font style="vertical-align: inherit;">على وجه الخصوص ، يمكنك إنشاء نص GUID بالنقر فوق Tab. </font><font style="vertical-align: inherit;">وفي آخر طلب لـ DeviceKey ، أدخل كلمة المرور المحددة. </font><font style="vertical-align: inherit;">يمكن إنشاؤها بالضغط على مفتاح Tab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هنا يجدر القيام باستطراد صغير. </font><font style="vertical-align: inherit;">يستخدم ESP8266 مصادقة الخادم بواسطة DeviceID. </font><font style="vertical-align: inherit;">بمجرد تسجيل DeviceID و DeviceKey على الخادم ، لا يمكن لأي جهاز آخر له نفس معرف الجهاز ولكن بكلمة مرور مختلفة الاتصال. </font><font style="vertical-align: inherit;">في المستقبل ، قد تكون كلمة مرور DeviceKey مطلوبة فقط إذا كنت تريد استبدال الجهاز الفعلي بجهاز آخر بنفس معرف الجهاز.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذا ما يبدو عليه الإعداد:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7f0/f03/fb1/7f0f03fb17254a9aaedfccd4ae78e0b2.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا فعلنا كل شيء بشكل صحيح ، فيمكننا النظر في إخراج التصحيح والتأكد من اتصال الجهاز بالخادم بنجاح. فيما يلي إخراج التصحيح لجهاز متصل بنجاح:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/664/ea5/a6e/664ea5a6eccb456c9826c2357cf108e3.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن الآن تعطيل USB-&gt; محول UART. يمكنك تركها إذا كنت تريد أن تتمكن من إلقاء نظرة على إخراج التصحيح أو حالة الشبكة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن في علامة التبويب "الأجهزة" في لوحة المشرف ، سيظهر الجهاز الأول. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لنحاول إرسال الأمر الأول إلى الجهاز</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . للقيام بذلك ، انتقل إلى لوحة المشرف بالطريقة التالية: "الأجهزة" -&gt; "ESP" -&gt; "تفاصيل" -&gt; "أوامر" -&gt; "أدخل أمرًا جديدًا". في حقل "الاسم" ، حدد "gpio / read" واضغط على "push". تم إرسال الفريق! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ستأتي الإجابة بسرعة كبيرة ، ولكن لا يتم تحديث نتائج الأوامر في لوحة المشرف تلقائيًا. لهذا ، هناك زر تحديث مقابل الأمر. اضغط عليها ثانية أو ثانيتين بعد الإرسال وسترى هذه الشاشة:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/745/de9/39a/745de939a7a743c99b45cee26b346440.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ماذا حدث؟ بالضغط على زر الضغط ، فأنت ترسل أمرًا من لوحة المشرف (وهو في هذه الحالة هو عميل الخادم) إلى أمر الخادم. قام ESP8266 بالتقاطها وتنفيذها وتمرير النتيجة إلى الخادم. بالنقر فوق زر التحديث ، طلبت من الخادم نتيجة الأمر: توجد </font><font style="vertical-align: inherit;">
قائمة بالأوامر المتاحة في ملف PDF المرفق بالبرنامج الثابت. يتوفر أيضًا </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">هنا</font></a><font style="vertical-align: inherit;"> ، ولكن قد لا يتطابق مع إصدار البرنامج الثابت الخاص بك.</font></font><br>
<br>
<code>{"0":"1","1":"0","2":"1","3":"0","4":"1","5":"1","12":"0","13":"0","14":"0","15":"0"}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بتقليد جيد ، سنقوم بإضاءة LED على اللوحة. في معظم وحدات ESP8266 ، يكون مؤشر LED على مخرج من نوع TX ، وسوف نتعامل معه. يضيء عندما يظهر مستوى منخفض على إخراج الرقاقة. في المستند ، سنرى أن GPIO1 ليس سوى إخراج TX نفسه ، لذا دعنا نضع صفرًا منطقيًا عليه. في هذه الحالة ، يضيء LED دون أي مشاكل. بعد ذلك ، ستتوقف الوحدة الطرفية في الوحدة النمطية عن العمل حتى إعادة التشغيل. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن قمنا بتعيين الأمر </font><font style="vertical-align: inherit;">المشار إليه أيضًا في المستند. في حقل "الاسم" قمنا بتعيينه </font><font style="vertical-align: inherit;">وفي حقل "المعلمات" - </font><font style="vertical-align: inherit;">. بعد تنفيذ الأمر ، يجب أن يضيء مؤشر LED الموجود على اللوحة ، كما في الصورة أدناه.</font></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>"gpio/write"<br>
</code><font style="vertical-align: inherit;"></font><code>{"1":"0"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/files/284/6cd/b84/2846cdb8454e4b48922ea951e8fa832e.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LED أزرق تحت الكوارتز ، بجانبه أحمر لا يزال يتوهج ، مما يشير إلى أن اللوحة لديها طاقة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كما ترى من الصورة ، يتم توصيل سلكين فقط مع الطاقة واثنين من وصلات العبور للوحدة لتشغيل الوحدة في الوضع الصحيح. </font><font style="vertical-align: inherit;">لإيقاف التشغيل ، أرسل أمرًا بمعلمة </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">تنسيق معلمات الأمر هو JSON عادي. </font><font style="vertical-align: inherit;">الحقول التي يمكن ملؤها ، وكذلك قيمها المحتملة ، موصوفة في ملف PDF. </font><font style="vertical-align: inherit;">
اكتشفنا اليوم كيفية إرسال أبسط الأوامر من لوحة المشرف إلى الجهاز. </font><font style="vertical-align: inherit;">في المقالة التالية ، سنخبرك بكيفية كتابة تطبيق عميل بسيط للخادم يتيح لك الوصول إلى الجهاز ، وتنفيذ جهاز أكثر خطورة قليلاً (هل تتذكر الليزر من المقالة الأولى؟). </font><font style="vertical-align: inherit;">
ترقبوا ، سيكون من المثير للاهتمام!</font></font><code>{"1":"1"}<br>
</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نشرها نيكولاي خاباروف ، كبير مطوري البرامج.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar383027/">https://habr.com/ru/post/ar383027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar383011/index.html">ظهرت قاذفات اللهب اليدوية للبيع في الولايات المتحدة الأمريكية</a></li>
<li><a href="../ar383013/index.html">تطلق IBM حواسيب LinuxOne الرئيسية والعقود مع Canonical</a></li>
<li><a href="../ar383017/index.html">هل الذكاء الاصطناعي شرير أم جني جيد؟</a></li>
<li><a href="../ar383023/index.html">Робототехника в сельском хозяйстве</a></li>
<li><a href="../ar383025/index.html">نظرة عامة على تلفزيون Android الحقيقي باستخدام Sony 55w807c كمثال</a></li>
<li><a href="../ar383033/index.html">تعمل الموصلات الفائقة رائحة كريهة عند -70 درجة مئوية</a></li>
<li><a href="../ar383035/index.html">بدائل لـ Google Play و App Store أو كيف تعيش الصين بدون Google Play</a></li>
<li><a href="../ar383039/index.html">متاهة بطاقة بريدية. هدية لا يمكن فتحها بدون حل اللغز</a></li>
<li><a href="../ar383041/index.html">اسأل إيثان رقم 25: أين تذهب في مجرتنا؟</a></li>
<li><a href="../ar383045/index.html">كيف سيغير تسلا العالم</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>