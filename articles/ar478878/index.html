<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ โญ๏ธ ๐พ ุชุญุชูู ุงููุทุนุฉ ุงูุฃูุซุฑ ุดุนุจูุฉ ูู ุชุงุฑูุฎ StackOverflow ุนูู ุฎุทุฃ! ๐ฅจ ๐ฉ ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุดูุช ุฏุฑุงุณุฉ ุญุฏูุซุฉ ุ ุจุนููุงู "ุงุณุชุฎุฏุงู ูุตุงุตุงุช ุงูููุฏ Stack Overflow ูู ูุดุงุฑูุน GitHub ูุฅุณูุงุฏูุง" ุ ูุฌุฃุฉ ุฃูู ูู ูุนุธู ุงูุฃููุงุช ูู ูุดุงุฑูุน ููุชูุญุฉ ุงููุตุฏุฑ ุ ุชูุช ูุชุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุญุชูู ุงููุทุนุฉ ุงูุฃูุซุฑ ุดุนุจูุฉ ูู ุชุงุฑูุฎ StackOverflow ุนูู ุฎุทุฃ!</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478878/" style=";text-align:right;direction:rtl">  ูุดูุช ุฏุฑุงุณุฉ ุญุฏูุซุฉ ุ <a href="https://doi.org/10.1007/s10664-018-9650-5" rel="nofollow">ุจุนููุงู "ุงุณุชุฎุฏุงู ูุตุงุตุงุช ุงูููุฏ Stack Overflow ูู ูุดุงุฑูุน GitHub ูุฅุณูุงุฏูุง" ุ</a> ูุฌุฃุฉ ุฃูู ูู ูุนุธู ุงูุฃููุงุช ูู ูุดุงุฑูุน ููุชูุญุฉ ุงููุตุฏุฑ ุ ุชูุช ูุชุงุจุฉ <a href="https://stackoverflow.com/a/3758880/276052" rel="nofollow">ุฅุฌุงุจุชู</a> ูุจู ุนุดุฑ ุณููุงุช ุชูุฑูุจูุง.  ููู ุงูููุงุฑูุงุช ุฃู ููุงู ุฎุทุฃ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฐุงุช ูุฑุฉ ... </h2><br>  ูุฑุฉ ุฃุฎุฑู ูู ุนุงู 2010 ุ ููุช ุฌุงูุณูุง ูู ููุชุจู ูุฃูุงุฑุณ ุงููุฑุงุก: ููุช <a href="https://en.wikipedia.org/wiki/Code_golf" rel="nofollow">ูููุนูุง ุจูุนุจุฉ ุงูููุฏ ูุฃุถูุช</a> ุชุตููููุง ุฅูู Stack Overflow. <br><br>  ุฌุฐุจ ุงูุณุคุงู ุงูุชุงูู ุงูุชุจุงูู: ููููุฉ ุนุฑุถ ุนุฏุฏ ุงูุจุงูุชุงุช ุจุชูุณูู ูุงุจู ูููุฑุงุกุฉุ  ุจูุนูู ุ ููููุฉ ุชุญููู ุดูุก ูุซู 123456789 ุจุงูุช ุฅูู "123.5 ููุบุงุจุงูุช". <br><br> <a href="https://stackoverflow.com/q/3758606/276052" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/7ca/00b/1f7/7ca00b1f7d4f57f0f8afa4ed9554797a.png"></a> <br>  <i><font color="gray">ูุงุฌูุฉ 2010 ูุฏููุฉ ุฌูุฏุฉ ุ ุจูุถู ุขูุฉ Wayback</font></i> <br><a name="habracut"></a><br>  ุถูููุงู ุ ุณุชููู ุงููุชูุฌุฉ ุนุฏุฏูุง ูุชุฑุงูุญ ุจูู 1 ู 999.9 ูุน ุงููุญุฏุฉ ุงูููุงุณุจุฉ. <br><br>  ูุงู ููุงู ุจุงููุนู ุฅุฌุงุจุฉ ูุงุญุฏุฉ ูุน ุญููุฉ.  ุงูููุฑุฉ ุจุณูุทุฉ: ุชุญูู ูู ุฌููุน ุงูุฏุฑุฌุงุช ูู ุฃูุจุฑ ูุญุฏุฉ (EB = 10 <sup>18</sup> ุจุงูุช) ุฅูู ุงูุฃุตุบุฑ (B = 1 ุจุงูุช) ูุชุทุจูู ุงูุฃูู ุ ููู ุฃูู ูู ุนุฏุฏ ุงูุจุงูุชุงุช.  ูู ุงูููุฏ ุงูุฒุงุฆู ุ ูุจุฏู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">suffixes = [ "EB", "PB", "TB", "GB", "MB", "kB", "B" ] magnitudes = [ 10^18, 10^15, 10^12, 10^9, 10^6, 10^3, 10^0 ] i = 0 while (i &lt; magnitudes.length &amp;&amp; magnitudes[i] &gt; byteCount) i++ printf("%.1f %s", byteCount / magnitudes[i], suffixes[i])</code> </pre> <br>  ุนุงุฏุฉ ุ ูุน ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุน ุชุตููู ุฅูุฌุงุจู ุ ูู ุงูุตุนุจ ุงููุญุงู ุจู.  ูู ุงููุตุทูุญ Stack Overflow ุ ูุทูู ุนููู ุงุณู <a href="https://meta.stackexchange.com/questions/9731/fastest-gun-in-the-west-problem" rel="nofollow">ูุดููุฉ ุงูุฃุณุฑุน ูู ุงูุบุฑุจ</a> .  ููู ููุง ูุงู ููุฅุฌุงุจุฉ ุงูุนุฏูุฏ ูู ุงูุนููุจ ุ ูุฐูู ูุง ุฒูุช ุขูู ุฃู ุฃุชุฌุงูุฒูุง.  ุนูู ุงูุฃูู ุฑูุฒ ูุน ุญููุฉ ูููู ุชุฎููุถ ูุจูุฑ. <br><br><h2 style=";text-align:right;direction:rtl">  ุญุณููุง ุ ูุฐุง ุฌุจุฑ ุ ูู ุดูุก ุจุณูุท! </h2><br>  ุซู ุงุชุถุญ ูู.  ุงูุจุงุฏุฆุงุช ูู ูููู ุ ููุฌุง ุ ุฌูุฌุง ุ ... - ูุง ุดูุก ุฃูุซุฑ ูู ุฏุฑุฌุฉ 1000 (ุฃู 1024 ูู ูุนูุงุฑ IEC) ุ ูุฐูู ูููู ุชุญุฏูุฏ ุงูุจุงุฏุฆุฉ ุงูุตุญูุญุฉ ุจุงุณุชุฎุฏุงู ุงูููุบุงุฑูุชู ุ ูููุณ ุงูุฏูุฑุฉ. <br><br>  ุจูุงุกู ุนูู ูุฐู ุงูููุฑุฉ ุ ููุช ุจูุดุฑ ูุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">humanReadableByteCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bytes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> si)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unit = si ? <span class="hljs-number"><span class="hljs-number">1000</span></span> : <span class="hljs-number"><span class="hljs-number">1024</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &lt; unit) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bytes + <span class="hljs-string"><span class="hljs-string">" B"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exp = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (Math.log(bytes) / Math.log(unit)); String pre = (si ? <span class="hljs-string"><span class="hljs-string">"kMGTPE"</span></span> : <span class="hljs-string"><span class="hljs-string">"KMGTPE"</span></span>).charAt(exp-<span class="hljs-number"><span class="hljs-number">1</span></span>) + (si ? <span class="hljs-string"><span class="hljs-string">""</span></span> : <span class="hljs-string"><span class="hljs-string">"i"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(<span class="hljs-string"><span class="hljs-string">"%.1f %sB"</span></span>, bytes / Math.pow(unit, exp), pre); }</code> </pre> <br>  ุจุงูุทุจุน ุ ูุฐุง ููุณ ูุงุจูุงู ูููุฑุงุกุฉ ุ ูุณุฌู / ุฃุณุฑู ุงูุญุฑุจ ุฃูู ููุงุกุฉ ูู ุงูุฎูุงุฑุงุช ุงูุฃุฎุฑู.  ูููู ูุง ุชูุฌุฏ ุญููุฉ ููุง ููุงุฏ ููุฌุฏ ุฃู ูุชูุฑุนุฉ ุ ูุจุงูุชุงูู ูุฅู ุงููุชูุฌุฉ ุฌูููุฉ ุ ูู ุฑุฃูู. <br><br><blockquote style=";text-align:right;direction:rtl">  <b>ุงูุฑูุงุถูุงุช ุจุณูุทุฉ</b> .  ูุชู ุงูุชุนุจูุฑ ุนู ุนุฏุฏ ุงูุจุงูุชุงุช ูู byteCount = 1000 <sup>s</sup> ุ ุญูุซ ุชูุซู <i>s</i> ุงูุฏุฑุฌุฉ (ูู ุงูุชุฏููู ุงูุซูุงุฆู ุ ุงููุงุนุฏุฉ ูู 1024.) ุงูุญู <i>s</i> ูุนุทู <i>s</i> = log <sub>1000</sub> (byteCount). <br><br>  ูุง ููุฌุฏ ุณุฌู ุชุนุจูุฑ ุจุณูุท <sub>1000</sub> ูู API ุ ูููู ูููููุง ุงูุชุนุจูุฑ ุนูู ูู ุญูุซ ุงูููุบุงุฑูุชู ุงูุทุจูุนู ููุง ููู s = log (byteCount) / log (1000).  ุจุนุฏ ุฐูู ูููู ุจุชุญููู <i>s</i> ุฅูู int ุ ูุฐูู ุฅุฐุง ูุงู ูุฏููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃูุซุฑ ูู ููุบุง ุจุงูุช ูุงุญุฏ (ูููู ููุณ ุบูุบุง ุจุงูุช ูุงูู) ุ ูุณูุชู ุงุณุชุฎุฏุงู MB ููุญุฏุฉ ููุงุณ. <br><br>  ุงุชุถุญ ุฃูู ุฅุฐุง ูุงูุช <i>s</i> = 1 ุ ูุฅู ุงูุจุนุฏ ูู ูููู ุจุงูุช ุ ูุฅุฐุง ูุงูุช <i>s</i> = 2 - ููุบุงุจุงูุช ูููุฐุง.  ูุณูู ุงูุจุงูุช ูุงููุช ุนูู 1000 <sup>ุซุงููุฉ</sup> ูุงุถุจุท ุงูุญุฑู ุงูููุงุจู ูู ุงูุจุงุฏุฆุฉ. </blockquote><br>  ูู ูุง ุชุจูู ูู ุงูุงูุชุธุงุฑ ูุฑุคูุฉ ููู ููุธุฑ ุงููุฌุชูุน ุฅูู ุงูุฅุฌุงุจุฉ.  ูู ุฃุณุชุทุน ุฃู ุฃุนุชูุฏ ุฃู ูุฐู ุงูุดูุฑุฉ ุณุชุตุจุญ ุงูุฃูุซุฑ ุงูุชุดุงุฑูุง ูู ุชุงุฑูุฎ Stack Overflow. <br><br><h2 style=";text-align:right;direction:rtl">  ุฏุฑุงุณุฉ ุงูุฅุณูุงุฏ </h2><br>  ุณุฑูุน ุฅูู ุงูุฃูุงู ุญุชู ุนุงู 2018.  ููุดุฑ ุทุงูุจ ุงูุฏุฑุงุณุงุช ุงูุนููุง ุณูุจุงุณุชูุงู ุจุงููุชุณ ููุงููุง ูู ุงููุฌูุฉ ุงูุนูููุฉ " <i>ููุฏุณุฉ ุงูุจุฑูุฌูุงุช ุงูุชุฌุฑูุจูุฉ</i> <a href="https://doi.org/10.1007/s10664-018-9650-5" rel="nofollow">"</a> ุจุนููุงู <a href="https://doi.org/10.1007/s10664-018-9650-5" rel="nofollow">"ุงุณุชุฎุฏุงู ูุตุงุตุงุช ููุฏ ุงูููุฏุณ ูุฅุถุงูุชูุง ูู ูุดุงุฑูุน ุฌูุซุจ"</a> .  ููุถูุน ุจุญุซู ูู ูุฏู ุงุญุชุฑุงู ุชุฑุฎูุต Stack Overflow CC BY-SA 3.0 ุ ุฃู ูู ูุดูุฑ ุงููุคูููู ุฅูู Stack Overflow ููุตุฏุฑ ููุชุนูููุงุช ุงูุจุฑูุฌูุฉุ <br><br>  ููุชุญููู ุ ุชู ุงุณุชุฎุฑุงุฌ ููุชุทูุงุช ูู ุงูุดูุฑุฉ ูู <a href="https://archive.org/details/stackexchange" rel="nofollow">ุชูุฑูุบ Stack Overflow</a> ูุชู ุชุนููููุง ุฅูู ุงูููุฏ ูู ูุณุชูุฏุนุงุช GitHub ุงูุนุงูุฉ.  ุงูุชุจุงุณ ูู ุงูููุฎุต: <br><br><blockquote style=";text-align:right;direction:rtl">  <i>ููุฏู ูุชุงุฆุฌ ุฏุฑุงุณุฉ ุชุฌุฑูุจูุฉ ูุงุณุนุฉ ุงููุทุงู ูุชุญููู ุงุณุชุฎุฏุงู ูุฅุณูุงุฏ ุดุธุงูุง ุบูุฑ ุชุงููุฉ ูู ููุฏ ุฌุงูุง ูู ุฅุฌุงุจุงุช SO ูู ูุดุงุฑูุน GitHub ุงูุนุงูุฉ (GH).</i> </blockquote><br>  (Spoiler: ูุง ุ ูุนุธู ุงููุจุฑูุฌูู ูุง ููุชุซููู ููุชุทูุจุงุช ุงูุชุฑุฎูุต). <br><br>  ุงูููุงูุฉ ูุฏููุง ูุซู ูุฐุง ุงูุฌุฏูู: <br><br><img src="https://habrastorage.org/webt/d_/jb/az/d_jbazgu5cmhwyw__yxdxkzdhwy.png"><br><br>  ุชุจูู ุฃู ุงูุฅุฌุงุจุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ุฐุงุช ุงููุนุฑู <a href="https://stackoverflow.com/a/3758880/276052" rel="nofollow">3758880</a> ูู ุงูุฅุฌุงุจุฉ ุงูุชู ูุดุฑุชูุง ูุจู ุซูุงูู ุณููุงุช.  ูู ุงูููุช ุงูุญุงูู ุ ูุฏูู ุฃูุซุฑ ูู ูุงุฆุฉ ุฃูู ูุดุงูุฏุฉ ูุฃูุซุฑ ูู ุฃูู ุฅูุฌุงุจูุงุช. <br><br>  ูุคุฏู ุงูุจุญุซ ุงูุณุฑูุน ุนูู GitHub ุฅูู ุฅูุชุงุฌ ุงูุขูุงู ูู ุงููุณุชูุฏุนุงุช ุจุงุณุชุฎุฏุงู ุงูุฑูุฒ <code>humanReadableByteCount</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4c/3de/bc6/c4c3debc6c290c209b90c2dca5be46ab.png"><br><br>  ุงุจุญุซ ุนู ูุฐู ุงููุทุนุฉ ูู ูุณุชูุฏุนู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ git grep humanReadableByteCount</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  <b>ูุตุฉ ูุถุญูุฉ</b> ุ ููุง ุนููุช ุนู ูุฐู ุงูุฏุฑุงุณุฉ. <br><br>  ุนุซุฑ Sebastian ุนูู ุชุทุงุจู ูู ูุณุชูุฏุน OpenJDK ุฏูู ุฃู ุฅุณูุงุฏ ุ ูุฑุฎุตุฉ OpenJDK ุบูุฑ ูุชูุงููุฉ ูุน CC BY-SA 3.0.  ูู <a href="http://mail.openjdk.java.net/pipermail/jdk9-dev/2016-December/005327.html" rel="nofollow">ูุงุฆูุฉ ุงููุฑุงุณูุงุช jdk9-dev ุ</a> ุณุฃู: ูู ุชู ูุณุฎ ููุฏ Stack Overflow ูู OpenJDK ุฃู ุงูุนูุณุ <br><br>  ุงูุดูุก ุงููุถุญู ูู ุฃููู ุนููุช ููุชู ูู Oracle ุ ูู ูุดุฑูุน OpenJDK ุ ูุฐูู ูุชุจ ุฒูููู ูุตุฏููู ุงูุณุงุจู ูุง ููู: <br><br>  <i>ูุฑุญุจุงุ</i> <i><br><br></i>  <i>ููุงุฐุง ูุง ุชุณุฃู ูุคูู ูุฐุง ุงูููุดูุฑ ูุจุงุดุฑุฉ ุนูู SO (aioobe)ุ</i>  <i>ููู ุนุถู ูู OpenJDK ูุนูู ูู Oracle ุนูุฏูุง ุธูุฑ ูุฐุง ุงูุฑูุฒ ูู ูุณุชูุฏุนุงุช ูุตุฏุฑ OpenJDK.</i> <br><br>  ุฃูุฑุงูู ูุฃุฎุฐ ูุฐู ุงููุถุงูุง ุนูู ูุญูู ุงูุฌุฏ.  ุฃุนูู ุฃู ุจุนุถ ุงููุฏูุฑูู ุดุนุฑูุง ุจุงูุงุฑุชูุงุญ ุนูุฏูุง ูุฑุฃูุง ูุฐู ุงูุฅุฌุงุจุฉ ูุนุซุฑูุง ุนูู "ุงูุฌุงูู". <br><br>  ุซู ูุชุจ ูู ุณูุจุงุณุชูุงู ูุชูุถูุญ ุงููููู ุ ููู ูุง ููุช ุจู: ุชูุช ุฅุถุงูุฉ ูุฐุง ุงูุฑูุฒ <i>ูุจู</i> ุงูุถูุงูู ุฅูู Oracle ูููุณ ูุฏู ุฃู ุนูุงูุฉ ุจุงูุงูุชุฒุงู.  ูู ุงูุฃูุถู ุนุฏู ุงููุฒุงุญ ูุน Oracle.  ุจุนุฏ ุฃูุงู ููููุฉ <a href="https://bugs.openjdk.java.net/browse/JDK-8170860" rel="nofollow">ูู ูุชุญ ุงูุชุฐูุฑุฉ ุ</a> <a href="http://hg.openjdk.java.net/jdk9/jdk9/hotspot/rev/b552b596203f" rel="nofollow">ุชู ุญุฐู</a> ูุฐุง ุงูุฑูุฒ. </blockquote><br><h2 style=";text-align:right;direction:rtl">  ุจู </h2><br>  ุฃุฑุงูู ุฃูู ููุฑุช ุจุงููุนู ูู ุฐูู.  ุฃู ููุน ูู ุงูุฎุทุฃ ูู ุงูุฑูุฒุ <br><br>  ูุฑุฉ ุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">humanReadableByteCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bytes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> si)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unit = si ? <span class="hljs-number"><span class="hljs-number">1000</span></span> : <span class="hljs-number"><span class="hljs-number">1024</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &lt; unit) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bytes + <span class="hljs-string"><span class="hljs-string">" B"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exp = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (Math.log(bytes) / Math.log(unit)); String pre = (si ? <span class="hljs-string"><span class="hljs-string">"kMGTPE"</span></span> : <span class="hljs-string"><span class="hljs-string">"KMGTPE"</span></span>).charAt(exp-<span class="hljs-number"><span class="hljs-number">1</span></span>) + (si ? <span class="hljs-string"><span class="hljs-string">""</span></span> : <span class="hljs-string"><span class="hljs-string">"i"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(<span class="hljs-string"><span class="hljs-string">"%.1f %sB"</span></span>, bytes / Math.pow(unit, exp), pre); }</code> </pre> <br>  ูุง ูู ุงูุฎูุงุฑุงุชุ <br><br>  ุจุนุฏ exabytes (10 <sup>18</sup> ) ูู zettabytes (10 <sup>21</sup> ).  ุฑุจูุง ุณูู ูุชุฌุงูุฒ ุนุฏุฏ ูุจูุฑ ุญูุง kMGTPEุ  ูุง.  ุงููููุฉ ุงููุตูู ูู 2 <sup>63</sup> -1 โ 9.2 ร 10 <sup>18</sup> ุ ูุฐูู ูู ุชุชุฌุงูุฒ ุฃู ูููุฉ ุฅูุณุจุงูุช. <br><br>  ุฑุจูุง ุงูุฎูุท ุจูู ูุญุฏุงุช SI ูุงููุธุงู ุงูุซูุงุฆูุ  ูุง.  ูุงู ููุงู ุงุฑุชุจุงู ูู ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู ุงูุฅุฌุงุจุฉ ุ ูููู ุชู ุฅุตูุงุญู ุจุณุฑุนุฉ ูุจูุฑุฉ. <br><br>  ุฑุจูุง ููุชูู ุงูุฃูุฑ ุจุงูุชุตููุฑ ุ ููุง ูุคุฏู ุฅูู ุชุนุทู charAt (exp-1)ุ  ูุง ูุฐูู.  ุงูุฃูู ุฅุฐุง ูุงู ุงูุจูุงู ูุบุทู ูุฐู ุงููุถูุฉ.  ุณุชููู ูููุฉ exp ุฏุงุฆููุง 1 ุนูู ุงูุฃูู. <br><br>  ุฑุจูุง ุจุนุถ ุฎุทุฃ ุงูุชูุฑูุจ ุบุฑูุจ ูู ุงูุชุณูููุ  ุญุณููุง ุ ุฃุฎูุฑูุง ... <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุนุฏูุฏ ูู ุชุณุนุฉ </h2><br>  ูุนูู ุงูุญู ุญุชู ููุชุฑุจ ูู 1 ููุบุงุจุงูุช.  ุนูุฏ ุชุญุฏูุฏ <code>"1000,0 kB"</code> ุจุงูุช ูุฅุฏุฎุงู ุ ุชููู ุงููุชูุฌุฉ (ูู ูุถุน SI) ูู <code>"1000,0 kB"</code> .  ุนูู ุงูุฑุบู ูู ุฃู 999ุ999 ุฃูุฑุจ ุฅูู 1000 ร 1000 <sup>1</sup> ูู 999.9 ร 1000 <sup>1</sup> ุ ุฅูุง ุฃู ุนูุงูุฉ 1000 ูุญุธูุฑุฉ ุจููุฌุจ ุงูููุงุตูุงุช.  ุงููุชูุฌุฉ ุงูุตุญูุญุฉ ูู <code>"1.0 MB"</code> . <br><br>  ูู ุฏูุงุนู ุ ูููููู ุงูููู ุฃูู ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ ุ ูุงู ูุฐุง ุงูุฎุทุฃ ูู ุฌููุน ุงูุฅุฌุงุจุงุช ุงูููุดูุฑุฉ ุงูู 22 ุ ุจูุง ูู ุฐูู ููุชุจุงุช Apache Commons ูููุชุจุงุช Android. <br><br>  ููููุฉ ุงุตูุงุญูุงุ  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ููุงุญุธ ุฃู ุงูุฃุณ (exp) ูุฌุจ ุฃู ูุชุบูุฑ ูู 'k' ุฅูู 'M' ุจูุฌุฑุฏ ุฃู ูููู ุนุฏุฏ ุงูุจุงูุชุงุช ุฃูุฑุจ ุฅูู 1 ร 1000 <sup>2</sup> (1 MB) ูู 999.9 ร 1000 <sup>1</sup> (999.9 ูููู ุจุงูุช) ).  ูุญุฏุซ ูุฐุง ุนูุฏ 999ุ950. ูุจุงููุซู ุ ูุฌุจ ุฃู ููุชูู ูู "M" ุฅูู "G" ุนูุฏูุง ูุฐูุจ ุฅูู 999ุ950ุ000 ููุง ุฅูู ุฐูู. <br><br>  ูุญุณุจ ูุฐู ุงูุนุชุจุฉ <code>exp</code> ุฅุฐุง ูุงูุช <code>bytes</code> ุฃูุจุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bytes &gt;= Math.pow(unit, exp) * (unit - <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) exp++;</code> </pre> <br>  ูุน ูุฐุง ุงูุชุบููุฑ ุ ูุนูู ุงูุฑูุฒ ุจุดูู ุฌูุฏ ุญุชู ููุชุฑุจ ุนุฏุฏ ุงูุจุงูุชุงุช ูู 1 EB. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุฒูุฏ ูู ุชุณุนุฉ </h2><br>  ุนูุฏ ุญุณุงุจ 999 949 999 999 999 999 ุ ูุนุทู ุงูููุฏ <code>1000.0 PB</code> ุ ูุงููุชูุฌุฉ ุงูุตุญูุญุฉ ูู <code>999.9 PB</code> .  ุฑูุงุถูุง ุ ุงูููุฏ ุฏููู ุ ููุงุฐุง ูุญุฏุซ ููุงุ <br><br>  ุงูุขู ููุงุฌู ูููุฏูุง <code>double</code> . <br><br><blockquote style=";text-align:right;direction:rtl"><h4 style=";text-align:right;direction:rtl">  ููุฏูุฉ ูุญุณุงุจ ุงูููุทุฉ ุงูุนุงุฆูุฉ </h4><br>  ููููุง ูููุงุตูุงุช IEEE 754 ุ ูุฅู ููู ุงูููุทุฉ ุงูุนุงุฆูุฉ ุงููุฑูุจุฉ ูู ุงูุตูุฑ ููุง ุชูุซูู ูุซูู ููุบุงูุฉ ุ ูู ุญูู ุฃู ุงูููู ุงููุจูุฑุฉ ููุง ุชูุซูู ุถุฆูู ููุบุงูุฉ.  ูู ุงููุงูุน ุ ูุชุฑุงูุญ ูุตู ุงูููู ุจูู -1 ู 1 ุ ูุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงูุฃุฑูุงู ุงููุจูุฑุฉ ุ ูุฅู ูููุฉ ุงูุญุฌู <code>Long.MAX_VALUE</code> ูุง ุชุนูู ุดูุฆูุง.  ุจุงููุนูู ุงูุญุฑูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">double l1 = Double.MAX_VALUE; double l2 = l1 - Long.MAX_VALUE; System.err.println(l1 == l2); // prints true</code> </pre> <br>  ุงูุธุฑ <a href="https://programming.guide/bits-of-a-floating-point-value.html" rel="nofollow">"ุจุชุงุช ุงูููุทุฉ ุงูุนุงุฆูุฉ" ููุญุตูู ุนูู</a> ุงูุชูุงุตูู. </blockquote><br>  ุชุชูุซู ุงููุดููุฉ ูู ุญุณุงุจูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุงููุณุงู ูู <code>String.format</code> ู <br></li><li style=";text-align:right;direction:rtl">  ุชูุณูุน ุนุชุจุฉ <code>exp</code> </li></ul><br>  ูููููุง ุงูุชุจุฏูู ุฅูู <code>BigDecimal</code> ุ ูููู ููู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชูุดุฃ ุงููุดุงูู ุฃูุถูุง ููุง ุ ูุฃู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูููุงุณูุฉ ูุง ุชุญุชูู ุนูู ููุบุงุฑูุชู <code>BigDecimal</code> . <br><br><h4 style=";text-align:right;direction:rtl">  ุชูููู ุงูููู ุงููุณูุทุฉ </h4><br>  ูุญู ุงููุดููุฉ ุงูุฃููู ุ ูููููุง ุชูููู ูููุฉ <code>bytes</code> ุฅูู ุงููุทุงู ุงููุทููุจ ุ ุญูุซ ุงูุฏูุฉ ุฃูุถู ุ ูุถุจุท <code>exp</code> ููููุง ูุฐูู.  ูู ุฃู ุญุงู ุ ูุชู ุชูุฑูุจ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุ ูุฐูู ูุง ููู ุฃู ูุชุฎูุต ูู ุงูุฃุฑูุงู ุงูุฃูู ุฃูููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (exp &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) { bytes /= unit; exp--; }</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุจุช ุงูุฃูู ุฃูููุฉ </h4><br>  ูุญู ุงููุดููุฉ ุงูุซุงููุฉ <i>ุ ุชููู</i> ุงูุจุชุงุช ุงูุฃูู ุฃูููุฉ <i>ุจุงููุณุจุฉ</i> ููุง (99994999 ... 9 ู 99995000 ... 0 ูุฌุจ ุฃู ูููู ููุง ุฏุฑุฌุงุช ูุฎุชููุฉ) ุ ูุฐูู ูุชุนูู ุนูููุง ุฅูุฌุงุฏ ุญู ูุฎุชูู. <br><br>  ุฃููุงู ุ ูุงุญุธ ุฃู ููุงู 12 ูููุฉ ุนุชุจุฉ ูุฎุชููุฉ (6 ููู ูุถุน) ุ ูุฃุญุฏูุง ูุคุฏู ุฅูู ุญุฏูุซ ุฎุทุฃ.  ูููู ุชุญุฏูุฏ ูุชูุฌุฉ ุบูุฑ ุตุญูุญุฉ ุจุดูู ูุฑูุฏ ูุฃููุง ุชูุชูู ูู D00 <sub>16</sub> .  ุญุชู ุชุชููู ูู ุงุตูุงุญูุง ูุจุงุดุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> th = (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) (Math.pow(unit, exp) * (unit - <span class="hljs-number"><span class="hljs-number">0.05</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (exp &lt; <span class="hljs-number"><span class="hljs-number">6</span></span> &amp;&amp; bytes &gt;= th - ((th &amp; <span class="hljs-number"><span class="hljs-number">0xFFF</span></span>) == <span class="hljs-number"><span class="hljs-number">0xD00</span></span> ? <span class="hljs-number"><span class="hljs-number">52</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>)) exp++;</code> </pre> <br>  ูุธุฑูุง ูุฃููุง ูุนุชูุฏ ุนูู ุฃููุงุท ุจุชุงุช ูุนููุฉ ูู ูุชุงุฆุฌ ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุ ูุฅููุง ูุณุชุฎุฏู ูุนุฏูู rigfp ูุถูุงู ุนูู ุงูุดูุฑุฉ ุจุดูู ูุณุชูู ุนู ุงูุฌูุงุฒ. <br><br><h2 style=";text-align:right;direction:rtl">  ููู ุงููุฏุฎูุงุช ุงูุณูุจูุฉ </h2><br>  ููุณ ูู ุงููุงุถุญ ุชุญุช ุฃู ุธุฑู ูู ุงูุธุฑูู ูุฏ ูููู ูุนุฏุฏ ุณูุจู ูู ูุญุฏุงุช ุงูุจุงูุช ูุนูู ุ ูููู ุจูุง ุฃู Java ููุณ ูุฏููุง <code>long</code> ุบูุฑ ูููุนุฉ ุ ููู ุงูุฃูุถู ูุนุงูุฌุฉ ูุฐุง ุงูุฎูุงุฑ.  ุงูุขู ุ ููุชุฌ ุฅุฏุฎุงู ูุซู <code>-10000 B</code> <br><br>  ุฏุนูุง ููุชุจ <code>absBytes</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> absBytes = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes);</code> </pre> <br>  ุงูุชุนุจูุฑ ูุทูู ุฌุฏูุง ูุฃู <code>-Long.MIN_VALUE == Long.MIN_VALUE</code> .  ูุญู ุงูุขู ูููู ุจุฌููุน ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุจุงุณุชุฎุฏุงู <code>absBytes</code> ุจุฏูุงู ูู <code>bytes</code> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุณุฎุฉ ุงูููุงุฆูุฉ </h2><br>  ูููุง ููู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ูู ุงูููุฏ ุ ูุฎุชุตุฑุฉ ูููุซูุฉ ุจุฑูุญ ุงููุณุฎุฉ ุงูุฃุตููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// From: https://programming.guide/the-worlds-most-copied-so-snippet.html public static strictfp String humanReadableByteCount(long bytes, boolean si) { int unit = si ? 1000 : 1024; long absBytes = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes); if (absBytes &lt; unit) return bytes + " B"; int exp = (int) (Math.log(absBytes) / Math.log(unit)); long th = (long) (Math.pow(unit, exp) * (unit - 0.05)); if (exp &lt; 6 &amp;&amp; absBytes &gt;= th - ((th &amp; 0xfff) == 0xd00 ? 52 : 0)) exp++; String pre = (si ? "kMGTPE" : "KMGTPE").charAt(exp - 1) + (si ? "" : "i"); if (exp &gt; 4) { bytes /= unit; exp -= 1; } return String.format("%.1f %sB", bytes / Math.pow(unit, exp), pre); }</span></span></code> </pre> <br>  ูุงุญุธ ุฃู ูุฐุง ุจุฏุฃ ููุญุงููุฉ ูุชุฌูุจ ุงูุญููุงุช ุงููุชูุฑุนุฉ.  ูููู ุจุนุฏ ุชุฎููู ุฌููุน ุงูููุงูู ุงูุญุฏูุฏูุฉ ุ ุฃุตุจุญ ุงูุฑูุฒ ุฃูู ูุงุจููุฉ ูููุฑุงุกุฉ ูู ุงูุฅุตุฏุงุฑ ุงูุฃุตูู.  ุดุฎุตูุง ุ ุฃูุง ูู ูุณุฎ ูุฐู ุงูุดุธูุฉ ูู ุงูุฅูุชุงุฌ. <br><br>  ููุญุตูู ุนูู ุฅุตุฏุงุฑ ูุญุฏุซ ูู ุฌูุฏุฉ ุงูุฅูุชุงุฌ ุ ุฑุงุฌุน ููุงูุฉ ูููุตูุฉ: <a href="https://programming.guide/java/formatting-byte-size-to-human-readable-format.html" rel="nofollow">"ุชูุณูู ุญุฌู ุงูุจุงูุช ุจุชูุณูู ูุงุจู ูููุฑุงุกุฉ</a> . <a href="https://programming.guide/java/formatting-byte-size-to-human-readable-format.html" rel="nofollow">"</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ ุงูุฑุฆูุณูุฉ </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏ ุชููู ููุงู ุฃุฎุทุงุก ูู ุงูุฅุฌุงุจุงุช ุนูู Stack Overflow ุ ุญุชู ุฅุฐุง ูุงูุช ุชุญุชูู ุนูู ุขูุงู ุงููุฒุงูุง ุงูุฅุถุงููุฉ. <br></li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ูู ุงูุญุงูุงุช ุงูุญุฏูุฏูุฉ ุ <i>ุฎุงุตุฉู</i> ูู ุงูููุฏ ุจุงุณุชุฎุฏุงู Stack Overflow. <br></li><li style=";text-align:right;direction:rtl">  ุญุณุงุจ ุงูููุทุฉ ุงูุนุงุฆูุฉ ูุนูุฏ. <br></li><li style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุชุถููู ุงูุฅุณูุงุฏ ุงูุตุญูุญ ุนูุฏ ูุณุฎ ุงูููุฏ.  ูุฏ ูุฃุฎุฐู ุดุฎุต ูุชูุธูู ุงูููุงู. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar478878/">https://habr.com/ru/post/ar478878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar478858/index.html">ููุงุฑูุฉ ุฌูุณุงุช ุนูู ูููุงุช ุงูุชุนุฑูู ูู XHProf Admin</a></li>
<li><a href="../ar478862/index.html">ููู ูุชู ุชุฑุชูุจ ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูู Yandex.Market ูููุงุฐุง ูุฑูุถ ุงูุฅุตุฏุงุฑุงุช ุงูุฃุณุจูุนูุฉ</a></li>
<li><a href="../ar478866/index.html">ุชูุจูุฉ ุงููุถุงุก - ููุชุฌ ุฌุฏูุฏ ูู JetBrains</a></li>
<li><a href="../ar478872/index.html">DIY: ููู ูููููุง ุฃุชูุชุฉ ูุฑุงูุจุฉ ุงููุณุชูุฏุนุงุช</a></li>
<li><a href="../ar478874/index.html">ุฃุนููุช ุดุฑูุฉ Toshiba ุนู ุฎุทูู ุฌุฏูุฏูู ูู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุซุงุจุชุฉ ุจุณุนุฉ ุชุตู ุฅูู 6 ุชูุฑุงุจุงูุช ูุฃุนููุช ุนู ุชูุฌููุง ูุญู ูุทุงุน ุงูุดุฑูุงุช ููุฐ ุนุงู 2020</a></li>
<li><a href="../ar478880/index.html">ูุง ูู ุงูุฑูุงุชุจ ุงูุชู ูุฏููุง ุฃุตุญุงุจ ุงูุนูู ููุชุฎุตุตู ุชูููููุฌูุง ุงููุนูููุงุช ูู ุงููุตู ุงูุซุงูู ูู ุนุงู 2019</a></li>
<li><a href="../ar478884/index.html">ููููุฉ ุชุญุถูุฑ RTSP ุนูู ุงููููุน ูู ุนุงู 2020 ุ ุฃู ููุงุฐุง ูุง ูุชููุฑ ููุฎูุงุฒูุฑ ุงูููุช ูููุฑุงุฑ</a></li>
<li><a href="../ar478886/index.html">ููููุงุช ุงูุฒุงูู ูุน ูุถููุฉ ุงููุญุชูู</a></li>
<li><a href="../ar478888/index.html">ุจุนุถ ุงูุฃููุงุฑ ุญูู ูุดููุงุช ุฏุนู ุงูููุฏ ูุงููุฏููุฉ</a></li>
<li><a href="../ar478890/index.html">ุฃูู ุงูุญุฒูุฉ ุงูุฎุงุตุฉ ุจูุ ุณูู ุชุณูู ููุธูุฉ ุงูุนูู ุงูุฏูููุฉ ููุงู ุงูุชุณููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>