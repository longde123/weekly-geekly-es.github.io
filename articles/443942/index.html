<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüè≠ üíÉ üìí Configuraci√≥n de 802.1X en conmutadores de Cisco mediante Failover NPS (Windows RADIUS con AD) üë©üèΩ‚Äçüé® üëåüèº üèá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Examinemos en la pr√°ctica el uso de Windows Active Directory + NPS (2 servidores para tolerancia a fallas) + est√°ndar 802.1x para control de acceso y ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configuraci√≥n de 802.1X en conmutadores de Cisco mediante Failover NPS (Windows RADIUS con AD)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443942/"><img src="https://habrastorage.org/getpro/habr/post_images/fab/761/19d/fab76119df15e93b40fdfdeb0b91156e.png" alt="imagen"><br>  Examinemos en la pr√°ctica el uso de Windows Active Directory + NPS (2 servidores para tolerancia a fallas) + est√°ndar 802.1x para control de acceso y autenticaci√≥n de usuarios - computadoras de dominio - dispositivos.  Puede familiarizarse con la teor√≠a del est√°ndar en Wikipedia, en el enlace: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IEEE 802.1X</a> <br><br>  Dado que mi "laboratorio" tiene recursos limitados, las funciones de NPS y un controlador de dominio son compatibles, pero le recomiendo que comparta estos servicios cr√≠ticos. <br><br>  No conozco las formas est√°ndar de sincronizar las configuraciones (pol√≠ticas) de Windows NPS, por lo tanto, utilizaremos los scripts de PowerShell lanzados por el programador de tareas (el autor es mi antiguo colega).  Para autenticar equipos de dominio y para dispositivos que no saben c√≥mo usar <b>802.1x</b> (tel√©fonos, impresoras, etc.), se configurar√° la Pol√≠tica de grupo y se crear√°n grupos de seguridad. <br><br>  Al final del art√≠culo, hablar√© sobre algunas de las complejidades de trabajar con 802.1x: c√≥mo usar conmutadores no administrados, ACL din√°micas, etc. Compartir√© informaci√≥n sobre los "problemas t√©cnicos" detectados ... <br><a name="habracut"></a><br>  Comencemos instalando y configurando la conmutaci√≥n por error NPS en Windows Server 2012R2 (todo es igual para 2016): a trav√©s del Administrador del servidor -&gt; Asistente para agregar roles y caracter√≠sticas, seleccione solo Servidor de pol√≠ticas de red. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/b51/17f/c55b5117f0ebab8d5b10c808617418c5.png" alt="imagen"><br><br>  o usando PowerShell: <br><br><pre><code class="actionscript hljs">Install-WindowsFeature NPAS -IncludeManagementTools</code> </pre> <br><blockquote>  Una peque√±a aclaraci√≥n: dado que para <b>EAP Protegido (PEAP)</b> definitivamente necesitar√° un certificado que confirme la autenticidad del servidor (con los derechos de uso apropiados), que ser√° confiable en las computadoras cliente, lo m√°s probable es que tambi√©n necesite instalar la funci√≥n de <b>Autoridad de Certificaci√≥n</b> .  Pero supongamos que ya tiene <b>CA</b> instalada ... </blockquote>  Haremos lo mismo en el segundo servidor.  Cree una carpeta para el script C: \ Scripts en ambos servidores y una carpeta de red en el segundo servidor <b>\\ SRV2 \ NPS-config $</b> <br><br>  En el primer servidor, cree un script de PowerShell <i>C: \ Scripts \ Export-NPS-config.ps1</i> con el siguiente contenido: <br><br><pre> <code class="actionscript hljs">Export-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"\\SRV2\NPS-config$\NPS.xml"</span></span></code> </pre> <br>  Despu√©s de eso, configure la tarea en el Programador de tareas: " <i>Export-NpsConfiguration</i> " <br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Export-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Realizar para todos los usuarios: ejecutar con los permisos m√°s altos</i> <i><br></i>  <i>Diariamente: repita la tarea cada 10 minutos.</i>  <i>dentro de 8 horas</i> <br><br>  En el NPS en espera, configure la importaci√≥n de configuraci√≥n (pol√≠ticas): <br>  crear un script de PowerShell: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Import-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"c:\NPS-config\NPS.xml"</span></span> &gt;&gt; C:\Scripts\Import-NPS-config.ps1</code> </pre> <br>  y la tarea de su implementaci√≥n cada 10 minutos: <br><br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Import-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Realizar para todos los usuarios: ejecutar con los permisos m√°s altos</i> <i><br></i>  <i>Diariamente: repita la tarea cada 10 minutos.</i>  <i>dentro de 8 horas</i> <br><br>  Ahora, para la verificaci√≥n, agregaremos un par de conmutadores a los clientes RADIUS (IP y secreto compartido) en NPS en uno de los servidores (!), Dos pol√≠ticas de solicitud de conexi√≥n: <b>WIRED-Connect</b> (condici√≥n: "el tipo de puerto NAS es Ethernet") y <b>WiFi -Empresas</b> (condici√≥n: "El tipo de puerto NAS es IEEE 802.11"), as√≠ como la pol√≠tica de <b><i>red de dispositivos de red de acceso</i></b> (administradores de red): <br><br><pre> <code class="xml hljs">:  Windows - domain\sg-network-admins :    -    (PAP, SPAP) :  RADIUS:  - Service-Type - Login    - Cisco-AV-Pair - Cisco - shell:priv-lvl=15</code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">Desde el lado de los interruptores, la siguiente configuraci√≥n:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">aaa new-model aaa local authentication attempts max-fail 5 ! ! aaa group server radius NPS server-private 192.168.38.151 auth-port 1812 acct-port 1813 key %shared_secret% server-private 192.168.10.151 auth-port 1812 acct-port 1813 key %shared_secret% ! aaa authentication login default group NPS local aaa authentication dot1x default group NPS aaa authorization console aaa authorization exec default group NPS local if-authenticated aaa authorization network default group NPS ! aaa session-id common ! identity profile default ! dot1x system-auth-control ! ! line vty 0 4 exec-timeout 5 0 transport input ssh escape-character 99 line vty 5 15 exec-timeout 5 0 logging synchronous transport input ssh escape-character 99</code> </pre> <br></div></div><br>  Despu√©s de la configuraci√≥n, despu√©s de 10 minutos, todos los clientes \ pol√≠ticas \ configuraciones deber√≠an aparecer en el NPS de respaldo y podremos iniciar sesi√≥n en los conmutadores utilizando la cuenta ActiveDirectory, un miembro del grupo dominio \ sg-network-admins (que creamos de antemano). <br><br>  Pasemos a configurar Active Directory: cree una pol√≠tica de grupo y contrase√±a, cree los grupos necesarios. <br><br>  Directiva de grupo <i><b>Computers-8021x-Settings</b></i> : <br><br><pre> <b><code class="plaintext hljs">Computer Configuration (Enabled) Policies Windows Settings Security Settings System Services Wired AutoConfig (Startup Mode: Automatic) Wired Network (802.3) Policies</code></b> </pre> <br><div class="spoiler">  <b class="spoiler_title">NPS-802-1x</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Name NPS-802-1x Description 802.1x Global Settings SETTING VALUE Use Windows wired LAN network services for clients Enabled Shared user credentials for network authentication Enabled Network Profile Security Settings Enable use of IEEE 802.1X authentication for network access Enabled Enforce use of IEEE 802.1X authentication for network access Disabled IEEE 802.1X Settings Computer Authentication Computer only Maximum Authentication Failures 10 Maximum EAPOL-Start Messages Sent Held Period (seconds) Start Period (seconds) Authentication Period (seconds) Network Authentication Method Properties Authentication method Protected EAP (PEAP) Validate server certificate Enabled Connect to these servers Do not prompt user to authorize new servers or trusted certification authorities Disabled Enable fast reconnect Enabled Disconnect if server does not present cryptobinding TLV Disabled Enforce network access protection Disabled Authentication Method Configuration Authentication method Secured password (EAP-MSCHAP v2) Automatically use my Windows logon name and password(and domain if any) Enabled</code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/88f/cd4/c48/88fcd4c486e62979b592d5a633270e59.png" alt="NPS-802-1x_AD-Policy"><br><br>  Cree un grupo de seguridad <b><i>sg-computers-8021x-vl100</i></b> , donde agregaremos las computadoras que queremos distribuir a vlan 100 y configuraremos el filtrado para la pol√≠tica de grupo creada previamente para este grupo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/5d5/11c/79b5d511c9c2551781cfa4b8b4113552.png" alt="802.1x-Autenticaci√≥n-GPO-Filtrado"><br><br>  Puede verificar que la pol√≠tica se haya implementado con √©xito abriendo el "Centro de redes y recursos compartidos (Configuraci√≥n de red e Internet) - Cambiar la configuraci√≥n del adaptador (Configurar los ajustes del adaptador) - Propiedades del adaptador", donde podemos ver la pesta√±a "Autenticaci√≥n": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/2c9/6bf/d6f2c96bff36ee31b6549391c63f398a.png" alt="Autenticaci√≥n de acceso a la red para adaptador Ethernet"><br><br>  Cuando est√© convencido de que la pol√≠tica se aplic√≥ con √©xito, puede proceder a configurar la pol√≠tica de red en el NPS y acceder a los puertos del conmutador. <br><br>  Cree una pol√≠tica de red <b><i>neag-computers-8021x-vl100</i></b> : <br><br><pre> <code class="xml hljs">Conditions: Windows Groups - sg-computers-8021x-vl100 NAS Port Type - Ethernet Constraints: Authentication Methods - Microsoft: Protected EAP (PEAP) - Unencrypted authentication (PAP, SPAP) NAS Port Type - Ethernet Settings: Standard: Framed-MTU 1344 TunnelMediumType 802 (includes all 802 media plus Ethernet canonical format) TunnelPrivateGroupId 100 TunnelType Virtual LANs (VLAN)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1f9/8b9/4e3/1f98b94e3a813be72c498a4c92b71454.png" alt="Pol√≠tica de red de autenticaci√≥n 802.1x"><br><br>  Configuraciones t√≠picas para el puerto del conmutador (llamo la atenci√≥n sobre el hecho de que el tipo de autenticaci√≥n es "multidominio" - Datos y voz, y tambi√©n es posible autenticarse en la direcci√≥n MAC. Para el "per√≠odo de transici√≥n" tiene sentido usar los siguientes par√°metros: <br><br><pre> <code class="actionscript hljs">authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br>  la identificaci√≥n se ingresa no de "cuarentena", sino de la misma que debe obtener la computadora del usuario despu√©s de iniciar sesi√≥n correctamente, hasta que nos aseguremos de que todo funcione como deber√≠a.  Los mismos par√°metros se pueden usar en otros escenarios, por ejemplo, cuando se inserta un conmutador no administrado en este puerto y desea que todos los dispositivos conectados a √©l y no autenticados caigan en un determinado vlan ("cuarentena"). <br><br><div class="spoiler">  <b class="spoiler_title">cambiar la configuraci√≥n del puerto en el modo de host multi-dominio 802.1x</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> shu des PC-IPhone_802<span class="hljs-number"><span class="hljs-number">.1</span></span>x switchport mode access switchport nonegotiate switchport voice vlan <span class="hljs-number"><span class="hljs-number">55</span></span> switchport port-security maximum <span class="hljs-number"><span class="hljs-number">2</span></span> authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication host-mode multi-domain authentication port-control auto authentication violation restrict mab dot1x pae authenticator dot1x timeout quiet-period <span class="hljs-number"><span class="hljs-number">15</span></span> dot1x timeout tx-period <span class="hljs-number"><span class="hljs-number">3</span></span> storm-control broadcast level pps <span class="hljs-number"><span class="hljs-number">100</span></span> storm-control multicast level pps <span class="hljs-number"><span class="hljs-number">110</span></span> no vtp lldp receive lldp transmit spanning-tree portfast no shu exit</code> </pre> <br></div></div><br>  Puede verificar que la computadora / tel√©fono se haya autenticado correctamente con el comando: <br><br><pre> <code class="actionscript hljs">sh authentication sessions int Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span> det</code> </pre> <br>  Ahora cree un grupo (por ejemplo, <i>sg-fgpp-mab</i> ) en Active Directory para tel√©fonos y agregue un dispositivo de prueba (en mi caso, este es <b><i>Grandstream GXP2160</i></b> con la direcci√≥n masiva <b>000b.82ba.a7b1</b> y el <b>dominio de</b> cuenta correspondiente <b>\ 000b82baa7b1</b> ) . <br><br>  Para el grupo creado, reduciremos los requisitos de la pol√≠tica de contrase√±as (usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pol√≠ticas de contrase√±as espec√≠ficas a</a> trav√©s del Centro administrativo de Active Directory -&gt; dominio -&gt; Sistema -&gt; Contenedor de configuraci√≥n de contrase√±a) con los siguientes par√°metros de <b><i>Configuraci√≥n de contrase√±a para MAB</i></b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/998/705/0cf998705b059c03465acd6057356d91.jpg" alt="Pol√≠ticas de contrase√±a fina (FGPP) para dispositivos MAB"><br><br>  lo que nos permite usar la direcci√≥n mas de los dispositivos como contrase√±as.  Despu√©s de eso, podemos crear una pol√≠tica de red para la autenticaci√≥n mab del m√©todo 802.1x, llam√©mosla neag-devices-8021x-voice.  Los par√°metros son los siguientes: <br><br><ul><li>  Tipo de puerto NAS: Ethernet </li><li>  Grupos de Windows - sg-fgpp-mab </li><li>  Tipos de EAP: autenticaci√≥n sin cifrar (PAP, SPAP) </li><li>  Atributos RADIUS - Espec√≠fico del proveedor: Cisco - Cisco-AV-Pair - Valor del atributo: device-traffic-class = voice </li></ul><br>  despu√©s de una autenticaci√≥n exitosa (no olvide configurar el puerto del conmutador), vea la informaci√≥n del puerto: <br><br><div class="spoiler">  <b class="spoiler_title">sh autenticaci√≥n se int Gi1 / 0/34</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">---------------------------------------- Interface: GigabitEthernet1/0/34 MAC Address: 000b.82ba.a7b1 IP Address: 172.29.31.89 User-Name: 000b82baa7b1 Status: Authz Success Domain: VOICE Oper host mode: multi-domain Oper control dir: both Authorized By: Authentication Server Session timeout: N/A Idle timeout: N/A Common Session ID: 0000000000000EB2000B8C5E Acct Session ID: 0x00000134 Handle: 0xCE000EB3 Runnable methods list: Method State dot1x Failed over mab Authc Success</code> </pre> <br></div></div><br>  Ahora, como se prometi√≥, considere un par de situaciones no tan obvias.  Por ejemplo, necesitamos conectar computadoras \ dispositivos de usuarios a trav√©s de un conmutador no administrado (conmutador).  En este caso, la configuraci√≥n del puerto se ver√° as√≠: <br><br><div class="spoiler">  <b class="spoiler_title">cambiar la configuraci√≥n del puerto en modo host multi-modo 802.1x</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GigabitEthernet1</span></span></span><span class="hljs-class">/0/1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">description</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SW</span></span></span><span class="hljs-class"> ‚Äì 802.1</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> ‚Äì 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mac</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">access</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonegotiate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">voice</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 55 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">security</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">maximum</span></span></span><span class="hljs-class"> 8 !  -  - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">response</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">host</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multi</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auth</span></span></span><span class="hljs-class"> ! ‚Äì   </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">violation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">restrict</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mab</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pae</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authenticator</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">quiet</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tx</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">broadcast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multicast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 110 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vtp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">spanning</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tree</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">portfast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span></span></code> </pre> <br></div></div><br>  PD: se not√≥ una falla muy extra√±a: si el dispositivo estaba conectado a trav√©s de un interruptor de este tipo y luego estaba atascado en un interruptor administrado, NO funcionar√° hasta que reiniciemos el interruptor (!) Hasta que encuentre otras formas de resolver este problema. <br><br>  Otro punto relacionado con DHCP (si se usa la inspecci√≥n IP dhcp), sin esas opciones: <br><br><pre> <code class="actionscript hljs">ip dhcp snooping vlan <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span> no ip dhcp snooping information option</code> </pre> <br>  por alguna raz√≥n, la direcci√≥n IP no se puede recibir correctamente ... aunque esto puede ser una caracter√≠stica de nuestro servidor DHCP <br><br>  Y Mac OS y Linux (en el que el soporte 802.1x es nativo) est√°n intentando autenticarse con el usuario, incluso si la autenticaci√≥n por direcci√≥n masiva est√° configurada. <br><br>  En la siguiente parte del art√≠culo, consideraremos el uso de 802.1x para conexi√≥n inal√°mbrica (dependiendo del grupo en el que se encuentre la cuenta de usuario, la "soltaremos" en la red correspondiente (vlan), aunque se conectar√°n al mismo SSID). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443942/">https://habr.com/ru/post/443942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443926/index.html">Coches "catamaranes"</a></li>
<li><a href="../443928/index.html">C√≥mo viajar en taxi a expensas de otra persona: vulnerabilidades en el ejemplo de un servicio</a></li>
<li><a href="../443934/index.html">CJDNS est√° muerto, viva Yggdrasil</a></li>
<li><a href="../443938/index.html">NetXMS como sistema de monitoreo para los perezosos ... y una peque√±a comparaci√≥n con Zabbix</a></li>
<li><a href="../443940/index.html">C√≥mo NO traducir t√≠tulos de pel√≠culas</a></li>
<li><a href="../443946/index.html">La situaci√≥n: las GPU virtuales no son inferiores en rendimiento a las soluciones de hierro</a></li>
<li><a href="../443948/index.html">Concurso "Soy un Intel Studio Expert" con super premios para desarrolladores</a></li>
<li><a href="../443950/index.html">Conf√≠e, aconseje, sugiera: busque revisiones de software reales</a></li>
<li><a href="../443952/index.html">Internet soberano - por nuestro dinero</a></li>
<li><a href="../443954/index.html">Singularidad tecnol√≥gica: el mito moderno del fin del mundo bajo el pretexto de la hip√≥tesis del progreso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>