<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèæ üë©üèª‚Äç‚úàÔ∏è üëÜüèª Implementaci√≥n de aplicaciones en m√∫ltiples cl√∫steres de Kubernetes con Helm ü§üüèº ü§¢ ‚ñ´Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C√≥mo Dailymotion usa Kubernetes: implementaci√≥n de aplicaciones 


 Nosotros en Dailymotion comenzamos a usar Kubernetes en producci√≥n hace 3 a√±os. Si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implementaci√≥n de aplicaciones en m√∫ltiples cl√∫steres de Kubernetes con Helm</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/458934/"><p><img src="https://habrastorage.org/webt/8f/-s/8h/8f-s8hlxikospwqtqw5wjcexjri.jpeg"></p><br><h2 id="kak-dailymotion-ispolzuet-kubernetes-razvertyvanie-prilozheniy">  C√≥mo Dailymotion usa Kubernetes: implementaci√≥n de aplicaciones </h2><br><p>  Nosotros en Dailymotion comenzamos a usar Kubernetes en producci√≥n hace 3 a√±os.  Sin embargo, implementar aplicaciones en varios cl√∫steres sigue siendo un placer, por lo que en los √∫ltimos a√±os hemos intentado mejorar nuestras herramientas y flujos de trabajo. </p><a name="habracut"></a><br><h3 id="s-chego-nachalos">  Donde empez√≥ </h3><br><p>  Aqu√≠ mostramos c√≥mo implementamos nuestras aplicaciones en varios cl√∫steres de Kubernetes en todo el mundo. </p><br><p>  Para implementar varios objetos de Kubernetes a la vez, utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Helm</a> , y todos nuestros gr√°ficos se almacenan en un repositorio de git.  Para implementar la pila completa de aplicaciones de varios servicios, utilizamos el llamado gr√°fico generalizado.  En esencia, este es un gr√°fico que declara dependencias y le permite inicializar la API y sus servicios con un solo comando. </p><br><p>  Tambi√©n escribimos un peque√±o script de Python sobre Helm para hacer comprobaciones, crear gr√°ficos, agregar secretos e implementar aplicaciones.  Todas estas tareas se realizan en la plataforma central de CI utilizando la imagen acoplable. </p><br><p>  Vayamos al grano. </p><br><blockquote>  Nota  Cuando lees esto, el primer candidato de lanzamiento de Helm 3 ya ha sido anunciado.  La versi√≥n principal contiene un conjunto completo de mejoras dise√±adas para resolver algunos de los problemas que hemos encontrado en el pasado. </blockquote><br><h3 id="rabochiy-process-razrabotki-chartov">  Flujo de trabajo de desarrollo de gr√°ficos </h3><br><p>  Para las aplicaciones, utilizamos la ramificaci√≥n y decidimos aplicar el mismo enfoque a los gr√°ficos. </p><br><ul><li> La rama de desarrollo se usa para crear gr√°ficos que se probar√°n en cl√∫steres de desarrollo. </li><li>  Cuando la solicitud del grupo se transfiere al <strong>maestro</strong> , se verifican en la preparaci√≥n. </li><li>  Finalmente, creamos una solicitud de grupo para enviar los cambios a la rama de producci√≥n y aplicarlos en la producci√≥n. </li></ul><br><p>  Cada entorno tiene su propio repositorio privado que almacena nuestros gr√°ficos, y utilizamos el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Chartmuseum</a> con API muy √∫tiles.  Por lo tanto, garantizamos un aislamiento estricto entre los entornos y verificamos los gr√°ficos en condiciones reales antes de usarlos en la producci√≥n. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/rz/vt/uk/rzvtuk6q7b_rkeaxnyujzhmfjog.png"></a> </p><br><p>  <em>Repositorios de gr√°ficos en diferentes entornos.</em> </p><br><p>  Vale la pena se√±alar que cuando los desarrolladores env√≠an la rama de desarrollo, una versi√≥n de su gr√°fico se env√≠a autom√°ticamente al dev Chartmuseum.  Por lo tanto, todos los desarrolladores usan el mismo repositorio de desarrollo, y debe indicar cuidadosamente su versi√≥n del gr√°fico para no usar accidentalmente los cambios de otra persona. </p><br><p>  Adem√°s, nuestro peque√±o script Python comprueba los objetos de Kubernetes contra las especificaciones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Openuber de Kubernetes</a> usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kubeval</a> antes de publicarlos en Chartmusem. </p><br><h3 id="obschee-opisanie-rabochego-processa-razrabotki-charta">  Flujo de trabajo general de desarrollo de gr√°ficos </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/yd/cw/qw/ydcwqw-vqfitu5bj8ky4nh7xxea.png"></a> </p><br><ol><li>  Configurar la tarea de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canalizaci√≥n de</a> acuerdo con la especificaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gazr.io</a> para el control de calidad (pelusa, prueba unitaria). </li><li>  Enviar una imagen de Docker con las herramientas de Python que implementan nuestras aplicaciones. </li><li>  Configuraci√≥n del entorno por el nombre de la sucursal. </li><li>  Verifique los archivos de yaml Kubernetes con Kubeval. </li><li>  Aumente autom√°ticamente la versi√≥n del gr√°fico y sus gr√°ficos principales (gr√°ficos que dependen del gr√°fico que se cambia). </li><li>  Enviar un gr√°fico al Chartmuseum que coincida con su entorno </li></ol><br><h2 id="upravlenie-razlichiyami-v-klasterah">  Gesti√≥n de diferencia de cl√∫ster </h2><br><h3 id="federaciya-klasterov">  Federaci√≥n de cl√∫ster </h3><br><p>  Hubo un momento en que utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kubernetes Cluster Federation</a> , donde se pod√≠an declarar objetos Kubernetes desde un punto final API.  Pero hubo problemas.  Por ejemplo, algunos objetos de Kubernetes no se pudieron crear en el punto final de la federaci√≥n, por lo que fue dif√≠cil mantener los objetos combinados y otros objetos para grupos individuales. </p><br><p>  Para resolver el problema, comenzamos a administrar cl√∫steres de forma independiente, lo que simplific√≥ enormemente el proceso (utilizamos la primera versi√≥n de federaci√≥n; en la segunda, algo podr√≠a cambiar). </p><br><h3 id="georaspredelennaya-platforma">  Plataforma geo-distribuida </h3><br><p>  Ahora nuestra plataforma se distribuye en 6 regiones: 3 a nivel local y 3 en la nube. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/jq/c1/mr/jqc1mru36g5byams4wddzducauw.png"></a> <br>  <em>Despliegue distribuido</em> </p><br><h3 id="globalnye-znacheniya-helm">  Valores globales de tim√≥n </h3><br><p>  4 valores globales de Helm le permiten determinar las diferencias entre los cl√∫steres.  Para todos nuestros gr√°ficos, hay valores predeterminados m√≠nimos. </p><br><pre><code class="plaintext hljs">global: cloud: True env: staging region: us-central1 clusterName: staging-us-central1</code> </pre> <br><p>  <em>Valores globales</em> </p><br><p>  Estos valores ayudan a determinar el contexto de nuestras aplicaciones y se utilizan para diferentes tareas: monitoreo, rastreo, registro, llamadas externas, escalado, etc. </p><br><ul><li>  "Cloud": tenemos una plataforma h√≠brida Kubernetes.  Por ejemplo, nuestra API se implementa en zonas GCP y en nuestros centros de datos. </li><li>  ‚ÄúEnv‚Äù: algunos valores pueden variar para entornos que no funcionan.  Por ejemplo, definiciones de recursos y configuraciones de escalado autom√°tico. </li><li>  ‚ÄúRegi√≥n‚Äù: esta informaci√≥n ayuda a determinar la ubicaci√≥n del cl√∫ster y puede usarse para determinar los puntos finales m√°s cercanos para servicios externos. </li><li>  "ClusterName": si y cuando queremos determinar el valor de un cl√∫ster individual. </li></ul><br><p>  Aqu√≠ hay un ejemplo concreto: </p><br><pre> <code class="plaintext hljs">{{/* Returns Horizontal Pod Autoscaler replicas for GraphQL*/}} {{- define "graphql.hpaReplicas" -}} {{- if eq .Values.global.env "prod" }} {{- if eq .Values.global.region "europe-west1" }} minReplicas: 40 {{- else }} minReplicas: 150 {{- end }} maxReplicas: 1400 {{- else }} minReplicas: 4 maxReplicas: 20 {{- end }} {{- end -}}</code> </pre> <br><p>  <em>Ejemplo de plantilla de tim√≥n</em> </p><br><p>  Esta l√≥gica se define en la plantilla auxiliar para no obstruir Kubernetes YAML. </p><br><h3 id="obyavlenie-prilozheniya">  Anuncio de solicitud </h3><br><p>  Nuestras herramientas de implementaci√≥n se basan en varios archivos YAML.  El siguiente es un ejemplo de c√≥mo declaramos un servicio y su topolog√≠a de escala (n√∫mero de r√©plicas) en un cl√∫ster. </p><br><pre> <code class="plaintext hljs">releases: - foo.world foo.world: # Release name services: # List of dailymotion's apps/projects foobar: chart_name: foo-foobar repo: git@github.com:dailymotion/foobar contexts: prod-europe-west1: deployments: - name: foo-bar-baz replicas: 18 - name: another-deployment replicas: 3</code> </pre> <br><p>  <em>Definici√≥n de servicio</em> </p><br><p>  Este es un diagrama de todos los pasos que definen nuestro flujo de trabajo de implementaci√≥n.  El paso final implementa la aplicaci√≥n en m√∫ltiples grupos de trabajo simult√°neamente. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/iu/qh/xk/iuqhxki4nfqoi0mus258j0feylu.png"></a> <br>  <em>Pasos de implementaci√≥n de Jenkins</em> </p><br><h3 id="a-sekrety">  ¬øQu√© hay de los secretos? </h3><br><p>  En t√©rminos de seguridad, hacemos un seguimiento de todos los secretos de varios lugares y los almacenamos en el dep√≥sito exclusivo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vault</a> en Par√≠s. </p><br><p>  Nuestras herramientas de implementaci√≥n extraen los valores de los secretos de Vault y, cuando llega el momento de la implementaci√≥n, los insertan en Helm. </p><br><p>  Para hacer esto, determinamos la asignaci√≥n entre los secretos de Vault y los secretos que necesitan nuestras aplicaciones: </p><br><pre> <code class="plaintext hljs">secrets: - secret_id: "stack1-app1-password" contexts: - name: "default" vaultPath: "/kv/dev/stack1/app1/test" vaultKey: "password" - name: "cluster1" vaultPath: "/kv/dev/stack1/app1/test" vaultKey: "password"</code> </pre> <br><ul><li>  Hemos identificado las reglas generales que debe seguir al escribir secretos en Vault. </li><li>  Si el secreto se refiere <strong>a un contexto o cl√∫ster espec√≠fico</strong> , debe agregar una entrada espec√≠fica.  (Aqu√≠, el contexto de cluster1 tiene su propio valor para la contrase√±a secreta stack-app1). </li><li>  De lo contrario, se utiliza el valor <strong>predeterminado</strong> . </li><li>  Para cada elemento de esta lista, se inserta un par clave-valor en el <strong>secreto de Kubernetes</strong> .  Por lo tanto, el patr√≥n secreto en nuestros gr√°ficos es muy simple. </li></ul><br><pre> <code class="plaintext hljs">apiVersion: v1 data: {{- range $key,$value := .Values.secrets }} {{ $key }}: {{ $value | b64enc | quote }} {{ end }} kind: Secret metadata: name: "{{ .Chart.Name }}" labels: chartVersion: "{{ .Chart.Version }}" tillerVersion: "{{ .Capabilities.TillerVersion.SemVer }}" type: Opaque</code> </pre> <br><h2 id="problemy-i-ogranicheniya">  Problemas y limitaciones. </h2><br><h3 id="rabota-s-neskolkimi-repozitoriyami">  Trabaja con m√∫ltiples repositorios </h3><br><p>  Ahora compartimos el desarrollo de gr√°ficos y aplicaciones.  Esto significa que los desarrolladores tienen que trabajar en dos repositorios git: uno para la aplicaci√≥n y el segundo para determinar su implementaci√≥n en Kubernetes.  2 repositorios de git son 2 flujos de trabajo y es f√°cil para un novato confundirse. </p><br><h3 id="upravlyat-obobschennymi-chartami-hlopotno">  Administrar gr√°ficos resumidos es problem√°tico </h3><br><p>  Como ya dijimos, los gr√°ficos gen√©ricos son muy convenientes para definir dependencias y desplegar r√°pidamente m√∫ltiples aplicaciones.  Pero usamos <code>--reuse-values</code> para evitar pasar todos los valores cada vez que implementamos la aplicaci√≥n incluida en este gr√°fico generalizado. </p><br><p>  En el flujo de trabajo de entrega continua, solo tenemos dos valores que cambian regularmente: el n√∫mero de r√©plicas y la etiqueta de imagen (versi√≥n).  Otros valores m√°s estables se cambian manualmente, y esto es bastante complicado.  Adem√°s, un error en la implementaci√≥n de un gr√°fico generalizado puede conducir a fallas graves, como hemos visto por nuestra propia experiencia. </p><br><h3 id="obnovlenie-neskolkih-faylov-konfiguracii">  Actualizaci√≥n de m√∫ltiples archivos de configuraci√≥n </h3><br><p>  Cuando un desarrollador agrega una nueva aplicaci√≥n, tiene que cambiar varios archivos: declarar la aplicaci√≥n, una lista de secretos, agregar la aplicaci√≥n dependiendo de si est√° en el gr√°fico generalizado. </p><br><h3 id="razresheniya-jenkins-slishkom-rasshireny-v-vault">  Permisos de Jenkins demasiado extendidos en Vault </h3><br><p>  Ahora tenemos una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AppRole</a> que lee todos los secretos de Vault. </p><br><h3 id="process-otkata-ne-avtomatizirovan">  El proceso de reversi√≥n no est√° automatizado </h3><br><p>  Para retroceder, debe ejecutar el comando en varios cl√∫steres, y esto est√° lleno de errores.  Realizamos esta operaci√≥n manualmente para garantizar que se especifique el identificador de versi√≥n correcto. </p><br><h2 id="my-dvizhemsya-v-storonu-gitops">  Nos estamos moviendo hacia GitOps </h2><br><h3 id="nasha-cel">  Nuestro objetivo </h3><br><p>  Queremos devolver el gr√°fico al repositorio de la aplicaci√≥n que implementa. </p><br><p>  El flujo de trabajo ser√° el mismo que para el desarrollo.  Por ejemplo, cuando se env√≠a una rama al asistente, la implementaci√≥n comenzar√° autom√°ticamente.  La principal diferencia entre este enfoque y el flujo de trabajo actual ser√° que <strong>todo se administrar√° en git</strong> (la aplicaci√≥n en s√≠ y la forma en que se implementa en Kubernetes). </p><br><p>  Hay varias ventajas: </p><br><ul><li>  Mucho <strong>m√°s claro</strong> para el desarrollador.  Es m√°s f√°cil aprender c√≥mo aplicar cambios al gr√°fico local. </li><li>  Se puede especificar una definici√≥n de implementaci√≥n de servicio <strong>donde est√° el c√≥digo de</strong> servicio. </li><li>  <strong>Gesti√≥n de la eliminaci√≥n de gr√°ficos generalizados</strong> .  El servicio tendr√° su propio lanzamiento de Helm.  Esto le permitir√° administrar el ciclo de vida de la aplicaci√≥n (reversi√≥n, actualizaci√≥n) en el nivel m√°s peque√±o, para no afectar otros servicios. </li><li>  <strong>Los beneficios de git</strong> para administrar gr√°ficos son: deshacer cambios, seguimiento de auditor√≠a, etc. Si necesita deshacer un cambio en un gr√°fico, puede hacerlo con git.  La implementaci√≥n comienza autom√°ticamente. </li><li>  Puede considerar mejorar su flujo de trabajo de desarrollo con herramientas como <strong>Skaffold</strong> , con las cuales los desarrolladores pueden probar los cambios en un contexto similar a la producci√≥n. </li></ul><br><h3 id="dvuhetapnaya-migraciya">  Migraci√≥n en dos etapas. </h3><br><p>  Nuestros desarrolladores han estado utilizando este flujo de trabajo durante 2 a√±os, por lo que necesitamos la migraci√≥n m√°s sencilla.  Por lo tanto, decidimos agregar una etapa intermedia en el camino hacia la meta. <br>  El primer paso es simple: </p><br><ul><li>  Mantenemos una estructura similar para configurar la implementaci√≥n de la aplicaci√≥n, pero en el mismo objeto llamado DailymotionRelease. </li></ul><br><pre> <code class="plaintext hljs">apiVersion: "v1" kind: "DailymotionRelease" metadata: name: "app1.ns1" environment: "dev" branch: "mybranch" spec: slack_channel: "#admin" chart_name: "app1" scaling: - context: "dev-us-central1-0" replicas: - name: "hermes" count: 2 - context: "dev-europe-west1-0" replicas: - name: "app1-deploy" count: 2 secrets: - secret_id: "app1" contexts: - name: "default" vaultPath: "/kv/dev/ns1/app1/test" vaultKey: "password" - name: "dev-europe-west1-0" vaultPath: "/kv/dev/ns1/app1/test" vaultKey: "password"</code> </pre> <br><ul><li>  1 lanzamiento por aplicaci√≥n (sin gr√°ficos generalizados). </li><li>  Gr√°ficos en el repositorio de aplicaciones git. </li></ul><br><p>  Hablamos con todos los desarrolladores, por lo que el proceso de migraci√≥n ya ha comenzado.  La primera fase a√∫n se controla utilizando la plataforma CI.  Pronto escribir√© otra publicaci√≥n sobre la segunda etapa: c√≥mo cambiamos al flujo de trabajo de GitOps con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Flux</a> .  Te dir√© c√≥mo nos configuramos y qu√© dificultades encontramos (varios repositorios, secretos, etc.).  Sigue las noticias. </p><br><p>  Aqu√≠, tratamos de describir nuestro progreso en el flujo de trabajo de implementaci√≥n de aplicaciones en los √∫ltimos a√±os, lo que nos llev√≥ a reflexionar sobre el enfoque de GitOps.  No hemos alcanzado el objetivo e informaremos sobre los resultados, pero ahora estamos convencidos de que lo hicimos bien cuando decidimos simplificar todo y acercarlo a los h√°bitos de los desarrolladores. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/458934/">https://habr.com/ru/post/458934/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458924/index.html">Los accidentes te ayudan a aprender</a></li>
<li><a href="../458926/index.html">La tragedia no viene sola</a></li>
<li><a href="../458928/index.html">XLNet vs BERT</a></li>
<li><a href="../458930/index.html">C√≥mo los estudiantes de Perm llegaron a la final del campeonato internacional de an√°lisis de datos de Data Mining Cup 2019</a></li>
<li><a href="../458932/index.html">Yota, o c√≥mo puedes averiguarlo todo</a></li>
<li><a href="../458936/index.html">"Es m√°s f√°cil responder que guardar silencio": una gran entrevista con el padre de la memoria transaccional, Maurice Herlichi</a></li>
<li><a href="../458938/index.html">C ++ 20 est√° incluido, se inicia C ++ 23. Resultados de la reuni√≥n en Colonia</a></li>
<li><a href="../458940/index.html">C√≥mo implementamos las pruebas √°giles</a></li>
<li><a href="../458944/index.html">Contratar a un empleado comienza con ... respeto. Entrevistaremos al ingeniero.</a></li>
<li><a href="../458948/index.html">Habr Weekly # 8 / Yandex Sorcerers, un libro sobre Prince of Persia, YouTube contra hackers, el l√°ser "coraz√≥n" del Pent√°gono</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>