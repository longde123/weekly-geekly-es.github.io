<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👍🏼 🧣 🔟 Entwicklung eines Backup-Netzteils mit geringem Stromverbrauch und Sinusausgang. Teil 3. Arbeiten Sie an Fehlern 👩🏾‍🎓 🧛 ⏺️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vorwort
 Die Artikelserie „ Entwicklung einer Notstromversorgung mit geringem Stromverbrauch und Sinusausgang “ beschreibt den Prozess des Entwurfs un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung eines Backup-Netzteils mit geringem Stromverbrauch und Sinusausgang. Teil 3. Arbeiten Sie an Fehlern</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/390609/"><h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorwort</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Artikelserie „ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklung einer Notstromversorgung mit geringem Stromverbrauch und Sinusausgang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “ beschreibt den Prozess des Entwurfs und der Erstellung eines RIP für eine Umwälzpumpe eines Heizungssystems. Im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zweiten Teil der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geschichte schlug der Autor der </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weltgemeinschaft</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erfahrene Entwickler vor und schaltete den Stromkreis des zu entwickelnden Geräts ein. Wie sie sagen, ist ein Geist nicht schlecht, sondern der kollektive Geist der Habra - Bewohner der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geektimes.ru-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ressource </font><font style="vertical-align: inherit;">und Benutzer der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">easyelectronics.ru-</font></a><font style="vertical-align: inherit;"> Community</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Größenordnung besser. </font><font style="vertical-align: inherit;">Nach ausführlichen Diskussionen über die vorgeschlagenen Schaltungslösungen wurde an den Fehlern gearbeitet. </font><font style="vertical-align: inherit;">Die Schaltung hat mehrere kritische und nicht sehr Änderungen erfahren. </font><font style="vertical-align: inherit;">In diesem Artikel werde ich versuchen, mit den erforderlichen Berechnungen usw. für Änderungen im Schema einzutreten.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lyrischer Exkurs</font></font></b><div class="spoiler_text">    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">easyelectronics.ru</a>.    ,        ,           .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden beginnen, die anfänglichen Schemata zu verstehen. </font><font style="vertical-align: inherit;">Während des Analyseprozesses und unter Berücksichtigung von Benutzerkommentaren werden wir die Schaltung zur </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perfektion einer</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funktionsfähigen Version bringen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes werden die einzelnen Knoten der Schaltung vorgestellt, die Änderungen erfahren haben, und am Ende eine verallgemeinerte elektrische Schaltung, die in CAD Dip Trace entworfen wurde.</font></font><br>
<a name="habracut"></a><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stromversorgungsschema</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Stromversorgung auf Basis von 1% LDO-Stabilisatoren hat sich nicht geändert. Obwohl sich viele dafür aussprachen, LDO bei 5 Volt durch das übliche LM7805 zu ersetzen, argumentierten sie, dass das LMK-Gehäuse viel Strom verbrauchen kann. Immerhin beträgt der Verbrauch am 5-Volt-Bus etwa 250 - 300 mA, was in Bezug auf die Verlustleistung gilt: P = (Uin-Uout) * I = (12-5) * 0,3 = 2,1 W. Was für den Fall SOT - 223, ist einfach himmelhoch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptstromaufnahme am 5-Volt-Leistungsbus wird über das LCD-Display ausgewählt. Die LCD-Hintergrundbeleuchtung ist nicht konstant, sondern wird ausgeschaltet, sodass der Stromverbrauch auf diesem Bus halb so hoch ist. Das heißt, wir müssen 1 W abführen. Wählen Sie dazu ein anständiges Polygon auf der Leiterplatte aus, wie in den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentaren angegeben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , damit dies kein Problem darstellt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem 3,3-Volt-Bus sollte der LDO mit der Teststelle auf der Platine ohne Probleme oder Überhitzung funktionieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wurde eine Meinung zu den Ausgangskapazitäten für diese Typen von LDO NCP1117STxx geäußert, dass sie für den stabilen Betrieb des Stabilisators kritisch sein können. </font><font style="vertical-align: inherit;">Sehen wir uns das Datenblatt an: </font></font><br>
<img src="https://habrastorage.org/files/0c7/dfa/2ad/0c7dfa2ad9ec46f081943554a2dea6d6.JPG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soweit ich aus diesem Diagramm verstehe, versetzt fast jeder Kondensator mit einer Kapazität von 47 Mikrofarad und mehr den LDO in einen stabilen Betriebsmodus, und es ist nicht sehr wichtig, über welchen EMP er verfügt. </font><font style="vertical-align: inherit;">Richtig, wenn ich falsch liege. </font><font style="vertical-align: inherit;">Wir beendeten die Mahlzeiten und gingen weiter.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schottky-Diode</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erinnern Sie sich an das ursprüngliche Schema. </font></font><br>
<br>
<img src="https://habrastorage.org/files/420/218/8de/4202188de2de48319565da8b2a76b2ba.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Diode trennt die Batterie vom Brückenstrombus. Wie in diesem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> richtig erwähnt </font><font style="vertical-align: inherit;">, wird im Betriebsmodus viel Strom von der Batterie darauf übertragen. 10 Eine Schottky-Diode hat einen direkten Abfall an der 0,8-Volt-Diode. Bei einem Strom von 5 A werden 4 W darauf abgeleitet. Zu viel. Außerdem möchte ich nicht 0,8 Volt verlieren. Befolgen Sie also die Anweisungen und setzen Sie den P-Kanal-Mosfet ein. Der IRF9310 hat einen offenen Kanalwiderstand von 0,0046 Ohm. Die Verlustleistung beträgt also P = I * I * R = 5 * 5 * 0,0046 = 0,115 W. Eineinhalb Bestellungen weniger. Der Spannungsabfall am Transistor beträgt U = I * R = 5 * 0,0046 = 23 mV. Im Allgemeinen nicht wahrnehmbar. Insgesamt bekommen wir ein solches Schema.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e81/fe8/334/e81fe83345334c659cd9d0f14addfca2.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MK wird diesen Mosfet verwalten. </font><font style="vertical-align: inherit;">Wenn Sie mit dem Akku arbeiten, öffnen Sie, schließen Sie den Akku, wenn Sie ihn über das Netzwerk laden. </font><font style="vertical-align: inherit;">Alles ist logisch. </font><font style="vertical-align: inherit;">Darüber hinaus sind die Kosten mit denen der Schottky-Diode vergleichbar, so dass die Kosten der Vorrichtung in dieser Komponente nicht zu erwarten sind.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformator</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesen Knoten hat sich ein kritischer Fehler eingeschlichen. Betrachten Sie die ursprüngliche Option. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ca7/f7d/c1f/ca7f7dc1f8aa453c9910d40c0f766bf7.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn von der Batterie aus gearbeitet wird, wenn die Brücke mit einem Transformator betrieben wird, wenn der Strom vom Beginn der Wicklung zu ihrem Ausgang fließt, liegt am Ende der Wicklung eine EMF mit negativer Polarität relativ zur Schaltungsmasse vor. Ferner fließt diese EMK durch die Diode zur Gerätemasse, wodurch ein Kurzschluss erzeugt wird. Bei einer EMF-Spannung von 3 bis 4 Volt liegt der Kurzschlussstrom in der Größenordnung von mehreren zehn Ampere, was für die Diode, die Wicklung und das gesamte Gerät insgesamt schlecht ist. Das heißt, mit einem Kurzschluss am Abgriff in der Niederspannungswicklung ist es nicht möglich, die erforderliche Amplitude zu erhalten, damit die Pumpe arbeitet. In diesem Fall ist auch der Stromschutz unbrauchbar. Mit einem Wort, das Gerät funktioniert nicht, es verbrennt auch den Boden der Schaltung. Diese Situation wurde in mehreren Kommentaren deutlich. Zum Beispiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es gibt mehrere Auswege.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wicklung einer vollständig unabhängigen Wicklung zum Laden der Batterie,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie diesen Wickelstift in der Luft hängen, während Sie mit Batterie arbeiten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielleicht kann sich etwas anderes ergeben.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich entschied mich für die zweite Option. </font><font style="vertical-align: inherit;">Während des Betriebs mit der Batterie unterbricht das Relais diesen Wicklungsanschluss von der Ladebrücke des Diodengleichrichters und schließt ihn während des Ladevorgangs an, wodurch eine erhöhte Ladespannung bereitgestellt wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun zum Messkreis zur Rückmeldung. Auch sie wird in einer solchen Einbeziehung nicht arbeiten. Da sich die Spannung von der Diodenbrücke bei großen Kondensatoren glättet, wird während des Betriebs von der Batterie am Ausgang des Widerstandsteilers eine konstante Spannung eingestellt, die praktisch nicht auf Änderungen der Spannung über der Wicklung reagiert. Eine PID-Regelung der Ausgangsspannung durch dieses Signal liefert also keine. Zur Lösung schlage ich vor, eine zusätzliche unabhängige Messwicklung aufzuziehen. Mit einem Ausgang von Volt 5-6. Mit einer Diodenbrücke begradigen, mit einer kleinen Kapazität und einer Zeitkonstante von 5-7 ms glätten und dieses Signal zur Rückmeldung an den ADC MK senden. Glücklicherweise wird die Leistung einer solchen Wicklung gering sein. Der Gesamtwirkungsgrad des Transformators wird also praktisch nicht leiden, und der Verbrauch mit der Batterie wird nicht stark ansteigen.bei 10-15 mA. Ein Draht für eine solche Wicklung benötigt einen dünnen Draht, und die Geschwindigkeit liefert 1-1,5 Perioden zur Steuerung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das endgültige Schema dieses Knotens stellte sich als solches heraus. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b4d/771/c69/b4d771c69b7946bf801409b43f58f0df.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Netzwerkerkennungsschema blieb unverändert. </font><font style="vertical-align: inherit;">Das einzige, was hinzugefügt werden muss, ist die Software, die die Messwerte vom Detektor abprallt.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shunt-Überstromschutz</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Schema selbst hat sich nicht geändert. </font><font style="vertical-align: inherit;">Das Signal vom Shunt wird am Operationsverstärker verstärkt und dann am Komparator eingeschaltet. </font><font style="vertical-align: inherit;">Der Ausgang des Komparators wird beim Auslösen durch die Diode verriegelt. </font><font style="vertical-align: inherit;">Das Signal selbst tritt in den MK ein und dient auch zum Trennen ALLER Brückentransistoren. </font><font style="vertical-align: inherit;">Alles wäre in Ordnung, aber die funktionierende Rücksetzschaltung des Komparators implementiert zum Zeitpunkt des Drückens der RESET-Taste keinen Stromschutz, wie in diesem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> korrekt angegeben </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich sehe eine Lösung für dieses Problem als solche. </font><font style="vertical-align: inherit;">Taste "RESET" auf MK machen. </font><font style="vertical-align: inherit;">Der Algorithmus in MK zeichnet das Drücken und Drücken der Taste auf. </font><font style="vertical-align: inherit;">Setzen Sie dann über den Transistor den Schutz zurück. </font><font style="vertical-align: inherit;">Und erst wenn ein Signal an den MK eingeht, dass der Schutz nicht aktiv ist, können Sie PWM für die Brücke generieren. </font><font style="vertical-align: inherit;">Wenn also die Ursache der Überlastung nicht beseitigt wurde, funktioniert der aktuelle Schutz wieder und es spielt keine Rolle, ob der Benutzer die Taste drückt oder nicht. </font><font style="vertical-align: inherit;">Übrigens, auf Knopfdruck, während das Gerät in Betrieb ist, schalten wir die LCD-Hintergrundbeleuchtung für einige Sekunden ein. </font><font style="vertical-align: inherit;">Die gesamte Schaltung stellte sich so heraus.</font></font><br>
<br>
<img src="https://habrastorage.org/files/ecd/00c/ccb/ecd00cccb910477899e4973eba55eb81.jpg"><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relaissteuerung</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schaltung verwendet 3 Relais für 12 Volt. Zwei von ihnen haben eine hochohmige Spule und ziemlich schwache Kontakte, 1 A pro Gruppe. Für das Hochspannungsschalten reichen 220 Volt mit einem Spielraum aus, da die Lastleistung 60 W Pumpe und 20-60 W während des Batterieladens beträgt. Das heißt, wir passen in den Ampereboden. Aber das Relais an Nummer 3 wandelt bereits für eine anständige Zeit 5 Ampere Ladestrom um. Wenn also Relais Kontakte für einen solchen Strom haben, hat der Spulenwiderstand bereits 400 Ohm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden das Relais über NPN-Transistoren mit MK steuern. Die Relais werden nur während des Betriebs des RIP bei Batterieladung angezogen. Die Betriebszeit des Relais wird also mehrere Stunden pro Woche oder sogar weniger berechnet. Aber selbst diese Tatsache führt dazu, dass der Stromverbrauch auf ein Minimum reduziert wird, während die Relaisspulen unter Strom stehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hat gut geschrieben, wie dies erreicht werden kann, ohne auf zu komplizierte Schemata zurückzugreifen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Bild zeigt eine separate Relaisspulensteuereinheit. </font></font><br>
<br>
<img src="https://habrastorage.org/files/28f/6d0/05c/28f6d005c5fb4cefa130d76e166a3d6f.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir berechnen die Widerstände und Kondensatoren für ein solches Relais. Relaistyp: HJR4102-L-12VDC-SZ und SRD-12VDC-SL-C.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir berechnen den Stromverbrauch des Relais im Normalbetrieb. I = Upit / Rcat = 12/720 = 0,0167 A = 16,7 mA. Dieser Strom wird von der Spule verbraucht. Um den Anker in einem angezogenen Zustand zu halten, kann der Stromwert um ein Drittel reduziert werden. Das heißt, I = 16,7 * (2/3) = 11 mA. Runden Sie diesen Wert auf 10 mA. Jetzt sollte der Gesamtwiderstand sein. R = U / I = 12/10 * 10-3 = 1200 Ohm. Von diesen ist 720 Ohm der Widerstand der Spule, und der zusätzliche Widerstand Rr = 1200-720 = 480 Ohm kommt heraus. Wählen Sie aus der Standardreihe zur unteren Seite. 470 Ohm nehmen wir die Standardgröße des SMD-Widerstands 1206. Die Verlustleistung dieser Standardgröße beträgt 0,25 W. Jetzt berechnen wir die Leistung, die bei einem solchen Widerstand wirklich auffällt. P = I * I * R = 10 * 10-3 * 10 * 10-3 * 470 = 47000 * 10-6 = 0,047 W. Der Widerstand erwärmt sich also nicht einmal.Analog beträgt der Widerstandswert für eine 400-Ohm-Spule 200 Ohm. Nehmen wir etwas weniger von der Standardserie - 180 Ohm. Der Haltestrom liegt bei 20 mA. Die Verlustleistung dieses Widerstands beträgt P = 0,072 Watt. Auch überschreitet nicht für diese Standardgröße von 0,25 Watt angegeben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir berechnen die Kapazität der Kondensatoren, um den aktuellen "Stillstand" des Ankers sicherzustellen. </font><font style="vertical-align: inherit;">Stellen wir den Zeitpunkt des „Ausfalls“ des Ankers und die Einbeziehung des Relais auf 20 ms ein. </font><font style="vertical-align: inherit;">Der Strom, der zu diesem Zeitpunkt durch die Spule fließt, sollte für eine „verstärkte“ Spule 30 mA betragen. </font><font style="vertical-align: inherit;">Daher ist C = t · I / U = 20 · 10 &amp; supmin; ³ · 30 · 10 &amp; supmin; ³ / 12 = 50 · 10 &amp; supmin; &amp; sup6; 50 = 50 uF. </font><font style="vertical-align: inherit;">Wir verdoppeln die Kapazität für mehr Sicherheit, d. H. </font><font style="vertical-align: inherit;">Holen Sie sich 100 uF. </font><font style="vertical-align: inherit;">Bei schwächeren Spulen reicht die Hälfte dieser Kapazität aus.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impulserzeugung für H - Brücke</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im zweiten Teil der Geschichte entschied ich mich, einen PWM-Ausgang mit MK und zwei Ausgänge zu verwenden, die die Schultern der Brücke wechseln. </font><font style="vertical-align: inherit;">Sammeln Sie all dies in der Logik und senden Sie die resultierenden Signale an die Schlüsseltreiber. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Link zum Schema dieses Ansatzes </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Kommentaren </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wurde der Fehler dieses Ansatzes deutlich, da Sie mit dem ausgewählten MK nach Bedarf PWM für jeden persönlichen Schlüssel ohne spezielle Softwareprobleme generieren können.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lyrischer Exkurs</font></font></b><div class="spoiler_text">      ,   STM32.    32     Cortex-M3, 4   4 .  , ,    «»  . ,   ,        .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>.    ,    ,   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt wurde die Impulsbildungsschaltung vereinfacht. </font><font style="vertical-align: inherit;">Kein Logikchip. </font><font style="vertical-align: inherit;">Alle vier PWM-Kanäle direkt vom MK gehen zu den Treibern. </font><font style="vertical-align: inherit;">Der Eingang vom Stromschutzkomparator wird in den MK am Bein eingegeben, dessen Hardware die PWM an allen Ausgängen ausschaltet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der endgültige Algorithmus wird ungefähr so ​​aussehen. </font><font style="vertical-align: inherit;">Eine sinusförmige PWM wird im MC am Ausgang von CH1 und CH1N erzeugt. </font><font style="vertical-align: inherit;">Das heißt, für die Schulter der Brücke erhalten wir PWM auf beiden Tasten während der Totzeit. </font><font style="vertical-align: inherit;">Dies ist die erste Halbwelle, in diesem Moment ist sie bei CH2 Null und bei CH2N Eins, dh die untere Taste der zweiten Schulter ist offen. </font><font style="vertical-align: inherit;">Die nächste Halbwelle wird genau das Gegenteil sein. </font><font style="vertical-align: inherit;">CH2 und CH2N erzeugen während der Totzeit eine sinusförmige PWM und man kommt zu CH1N. </font><font style="vertical-align: inherit;">Und so weiter im Zyklus, genauer gesagt in DMA bis „unendlich“. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde alle Softwarelösungen im nächsten Artikel mit Quellcodes und Erklärungen veröffentlichen.</font></font></b><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassend</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach allen Änderungen in der Schaltung wird die </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">endgültige</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> korrigierte Version in Form von Zeichnungen sowie des </font><font style="vertical-align: inherit;">CAD- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archivs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dip Trace dargestellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schaltpläne sowie die Komponentenspezifikationen sind nachstehend aufgeführt. </font><font style="vertical-align: inherit;">Spezifikation unter dem Spoiler. </font><i><font style="vertical-align: inherit;">Blatt Nummer 1. </font></i><i><font style="vertical-align: inherit;">Das Bild ist anklickbar </font></i><i><font style="vertical-align: inherit;">Blatt Nr. 2. </font></i><i><font style="vertical-align: inherit;">Das Bild ist anklickbar</font></i></font><br>
<br>
<a href=""><img src="https://habrastorage.org/files/56c/ba6/67f/56cba667fef9466497e845dc73af7d36.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<a href=""><img src="https://habrastorage.org/files/e5f/874/3e9/e5f8743e95a4480f8e8edffbd346d0c8.jpg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezifikation</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/24c/3c6/a22/24c3c6a22dac4bb4a56fa62e24324d9c.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/f45/6de/d21/f456ded21b2c4848a337adea98a9291b.jpg"><br>
<i> </i><br>
<img src="https://habrastorage.org/files/277/1fe/e97/2771fee97880438ebb17a1cd729e1d37.jpg"><br>
<i>  ( )</i><br>
</div></div><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach all den Upgrades haben sich die Änderungen auf ein solches Schema festgelegt. Jetzt werde ich gemäß der Spezifikation eine Bestellung für Funkkomponenten aufgeben, die ich nicht zur Verfügung habe. Und wie sich herausstellt, habe ich nichts außer Penny-Widerständen, Kondensatoren, NPN-Transistoren und Klemmenblöcken. So entstand die Aufgabe, Funkkomponenten zu kaufen. Glücklicherweise gibt es für die Herstellung von Leiterplatten nach der LUT-Methode alle notwendigen Verbrauchsmaterialien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptbestellung erfolgt im Online-Shop </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chip-nn.ru/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aber der Transformator, Filmkondensatoren mit großer Kapazität müssen unter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://chipdip.ru gekauft werden.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Etwas an einem Ort konnte nicht gefunden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht die Beschaffungserklärung im Moment aus.</font></font><br>
<br>
<img src="https://habrastorage.org/files/d4f/f84/734/d4ff847344c54618bd098230bd055b21.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Menge wird schon anständig. </font><font style="vertical-align: inherit;">Dazu sollten kleine Dinge hinzugefügt werden, 100 Rubel. Die Gebühr beträgt 100. Das LCD-Display, auf dem ich herumlag. </font><font style="vertical-align: inherit;">Bei der heutigen Rate kostet es ungefähr 500 Rubel. </font><font style="vertical-align: inherit;">Weiter der Fall, jeder für all das Gute. </font><font style="vertical-align: inherit;">Auf Kosten eines Funkamateurs nähern wir uns also der Menge von 3.500 Rubel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da Wochenenden und Feiertage in der Nähe sind, werde ich die Bestellung sofort nach dem Urlaub von echten Männern aufgeben.</font></font><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachwort</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich möchte allen danken, die an der Diskussion und dem „Brainstorming“ teilgenommen haben, wenn sie über die Schaltkreise dieses Geräts nachgedacht haben. </font><font style="vertical-align: inherit;">Ein besonderer Mensch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DANKE an</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diejenigen, die kritische Kommentare im Schema entdeckt und auch korrektere und einfachere Lösungen für einige Knoten vorgeschlagen haben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font><br>
</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links zu allen Teilen des Zyklus:</font></font><br>
<br>
<b><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">        .  1.  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">        .  2.    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">        .  3.   </a></li>
</ol></b></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de390609/">https://habr.com/ru/post/de390609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de390597/index.html">Geschmortes Kaffee-Obst-Kompott. Treffen Sie Cascara - den besten Freund des Radfahrers</a></li>
<li><a href="../de390599/index.html">Первые советские АВМ</a></li>
<li><a href="../de390601/index.html">Wir klicken richtig auf das Relais: Schalten starker Lasten</a></li>
<li><a href="../de390605/index.html">Der Patient wurde erfolgreich am Gehirn operiert und tauchte in die Welt der VR ein</a></li>
<li><a href="../de390607/index.html">Geschichte, wie der MT8060 c Arduino Freunde gefunden hat</a></li>
<li><a href="../de390611/index.html">Das Torrents Time-Plugin, mit dem Sie Filme direkt auf Thepiratebay und anderen Trackern ansehen können, ist unsicher</a></li>
<li><a href="../de390615/index.html">Globaler E-Commerce-Markt: Wachstum garantiert</a></li>
<li><a href="../de390617/index.html">Caterpillar stellte ein Smartphone mit einer Wärmebildkamera vor</a></li>
<li><a href="../de390619/index.html">Warum 3D-Druck? Architektur</a></li>
<li><a href="../de390621/index.html">Nissan Bürostuhl für Lazy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>