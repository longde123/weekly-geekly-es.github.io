<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõèÔ∏è üé£ üò± Instale y configure Oracle Internet Directory para resolver nombres de bases de datos üë®‚Äçüëß‚Äçüëß üíÆ üôå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos los que han trabajado con este tipo de DBMS conocen el acceso al DBMS de Oracle, que se almacena en el archivo tnsnames.ora. 

 Los datos se alm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Instale y configure Oracle Internet Directory para resolver nombres de bases de datos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426273/">  Todos los que han trabajado con este tipo de DBMS conocen el acceso al DBMS de Oracle, que se almacena en el archivo tnsnames.ora. <br><br>  Los datos se almacenan en el archivo <i>tnsnames.ora</i> en texto plano y se pueden cambiar f√°cilmente con cualquier editor de texto.  Es bueno si no hay muchas entradas en √©l, pero qu√© hacer si la organizaci√≥n tiene cientos de bases de datos, cuyo acceso debe proporcionarse desde hosts de usuarios de varios niveles o desde servidores de terminal.  Y si en un momento preciso la base de datos se mueve a otro host, u ocurren otros cambios que cambian la configuraci√≥n de acceso a la base de datos, debe cambiar la configuraci√≥n de acceso en todas partes. <br><br>  Hay muchas soluciones para ofrecer, incluyendo redirecciones, alias, etc. <br><br>  Aqu√≠ describir√© c√≥mo instalar y configurar un √∫nico repositorio para resolver nombres de bases de datos usando el OID de Oracle Internet Directory, y c√≥mo solicitar la resoluci√≥n de nombres usando el protocolo LDAP.  Esto es mucho m√°s conveniente que mantener actualizado el archivo tnsnames.ora en cientos de lugares. <br><a name="habracut"></a><br>  Aqu√≠ no se describe la instalaci√≥n y configuraci√≥n del DBMS para la base de datos del repositorio de OID, se indican los puntos clave importantes para esta configuraci√≥n.  Puede familiarizarse con la pol√≠tica de licencias de Oracle con respecto a la base de datos RDBMS, Oracle Fusion Middleware y los productos Oracle Internet Directory en el sitio web de la compa√±√≠a. <br><br><h2>  Instalaci√≥n de software </h2><br>  El software se instal√≥ en el sistema operativo Linux (SUSE Linux Enterprise Server 11), para su sistema operativo debe verificar la matriz de compatibilidad en oracle.com. <br><br>  Para instalar el servidor independiente (ejecutando NodeManager), se tomaron las siguientes distribuciones que estaban vigentes en el momento de la configuraci√≥n: <br><br>  JAVA: jdk-8u171-linux-x64.tar.gz <br>  OID: fmw_12.2.1.3.0_oid_linux64_Disk1_1of1.zip <br>  RDBMS: 12.1.0.2 + PSU + Opatch de versiones actuales <br><br>  <b>Instale el software para el repositorio</b> en el que se almacenar√°n los esquemas OID <br><br>  DBMS versi√≥n 12.1.0.2 + PSU <br>  DB  Cree una base de datos "vac√≠a": <br>  Debe especificar <br>  Codificaci√≥n AL32UTF8, incluye ORACLE TEXT en la instalaci√≥n del software <br>  Par√°metros de DB: <br>  <i>open_cursors = 800</i> <i><br></i>  <i>procesos = 500</i> <br>  Adem√°s, era necesario ejecutar el script xaview.sql, que se descubri√≥ en la etapa de verificaci√≥n de la instalaci√≥n del OID. <br>  configurar y elevar LISTENER para la base de datos. <br><br>  Entonces, la base de datos vac√≠a fue creada por uhost-oid1: 1521 / oid1 (en este caso, oid1-SID de la base de datos) y est√° lista para crear un repositorio en ella. <br><br><h2>  Configuraci√≥n de OID </h2><br>  En lo sucesivo, el directorio de inicio de usuario de Oracle es / u / app / oracle <br>  Desempaquete Java y configure la variable JAVA_HOME <br><br><pre><code class="hljs powershell">unzip jdk<span class="hljs-literal"><span class="hljs-literal">-8u171</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x64</span></span>.tar.gz export JAVA_HOME=/u/app/oracle/jdk1.<span class="hljs-number"><span class="hljs-number">8.0</span></span>_171</code> </pre> <br>  Desempaquetar OID <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">unzip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fmw_12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0_oid_linux64_Disk1_1of1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.zip</span></span></code> </pre> <br><br>  Resulta que el archivo ./fmw_12.2.1.3.0_oid_linux64.bin <br><br>  Verificamos que sea ejecutable, si no lo hacemos <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span></code> </pre> <br>  Lanzamos: <br><br><pre> <code class="hljs">./fmw_12.2.1.3.0_oid_linux64.bin</code> </pre> <br>  (El reenv√≠o del servidor X debe configurarse primero), se iniciar√° el instalador basado en Java. <br><br>  Lo siguiente se especific√≥ como ORACLE_HOME: <br><br>  / u / app / oracle / product / middleware / Oracle_IDM1 <br><br>  En este camino, se instalar√° el software para middleware oracle fusion (FMW) y Oracle Internet Directory. <br><br>  En la etapa "tipo de instalaci√≥n", especifique STANDALONE. <br><br><img src="https://habrastorage.org/webt/rt/dz/ed/rtdzedgsko18zmsercfms4xmq20.jpeg"><br><br><h3>  Crear un repositorio (esquemas necesarios en la base de datos) </h3><br><br>  Creamos esquemas para el repositorio en la base de datos, para esto ejecutamos rcu <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/bin/ ./rcu.sh</code> </pre><br>  En esta etapa, se crean los esquemas ODSSM, ODS y DEV_STB (recuerde la contrase√±a, ser√° necesaria al configurar los componentes del dominio) <br><br><h3>  Creamos un dominio en el que el OID funcionar√° para nosotros (un dominio en t√©rminos de FMW) </h3><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin ./config.sh</code> </pre><br><br>  Creamos el dominio en una carpeta separada del software.  Por ejemplo, especifique esto: <br><br>  / u / app / oracle / config / domains / oid_domain <br><br><img src="https://habrastorage.org/webt/p_/vg/op/p_vgopfkgcosbmmpo0e4r6cbz7q.jpeg"><br><br><img src="https://habrastorage.org/webt/4j/wm/nx/4jwmnxjeti-eo8ddm3n0tb0royo.jpeg"><br><br>  Para una conexi√≥n a la base de datos, especifique los par√°metros de esquemas creados previamente (y contrase√±as) <br>  Al instalar, configuramos el inicio de sesi√≥n y la contrase√±a para NodeManager (se usar√° en el futuro para conectarse a NodeManager e iniciar / detener el OID a trav√©s de √©l) <br><br><h3>  Iniciar NodeManager </h3><br>  Para iniciar NodeManager, debe generar un archivo con las claves: DemoIdentity.jks.  (Si, adem√°s de instalar OID, instala actualizaciones, entonces este paso puede no ser necesario) <br>  Generaremos "predeterminado" para que no seamos atormentados con los par√°metros de carga del almac√©n de claves en la configuraci√≥n del dominio.  Funciona con dichos par√°metros: esta es la contrase√±a predeterminada para el repositorio: <br><br><pre> <code class="hljs axapta">cd /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/<span class="hljs-keyword"><span class="hljs-keyword">common</span></span>/bin</code> </pre><br>  realizar <br><br><pre> <code class="hljs css">. <span class="hljs-selector-tag"><span class="hljs-selector-tag">setWlstEnv</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.sh</span></span></code> </pre><br>  (necesariamente con un punto, no funciona de otra manera) <br>  Vaya al directorio donde debe almacenarse el archivo: <br><br><pre> <code class="hljs powershell">cd /u/app/oracle/config/domains/oid_domain/security java utils.CertGen <span class="hljs-literal"><span class="hljs-literal">-keyfilepass</span></span> DemoIdentityPassPhrase <span class="hljs-literal"><span class="hljs-literal">-certfile</span></span> democert <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey <span class="hljs-literal"><span class="hljs-literal">-strength</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-literal"><span class="hljs-literal">-noskid</span></span> java utils.ImportPrivateKey <span class="hljs-literal"><span class="hljs-literal">-keystore</span></span> DemoIdentity.jks <span class="hljs-literal"><span class="hljs-literal">-storepass</span></span> DemoIdentityKeyStorePassPhrase <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey <span class="hljs-literal"><span class="hljs-literal">-keyfilepass</span></span> DemoIdentityPassPhrase <span class="hljs-literal"><span class="hljs-literal">-certfile</span></span> democert.pem <span class="hljs-literal"><span class="hljs-literal">-keyfile</span></span> demokey.pem <span class="hljs-literal"><span class="hljs-literal">-alias</span></span> demoidentity</code> </pre><br>  La frase clave DemoIdentityPassPhrase es solo eso, de lo contrario tendr√° que editar la configuraci√≥n del dominio. <br>  Es necesario lidiar con esto, pero primero debe comenzar a trabajar. <br><br><pre> <code class="hljs lua">export TNS_ADMIN=/u/app/oracle/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/domains/oid_domain/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/fmwconfig/components/OID/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  Es necesario configurar el OID en s√≠ mismo, de lo contrario el dominio no podr√° conectarse a la base de datos del repositorio (vea el <i>Problema 1</i> ) <br><br><pre> <code class="hljs ruby">export LD_LIBRARY_PATH=<span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/<span class="hljs-symbol"><span class="hljs-symbol">lib:</span></span>$LD_LIBRARY_PATH</code> </pre><br>  necesario para encontrar las bibliotecas correctas y extraerse de la ORACLE_HOME correcta <br><br>  En todo caso, consulte con ldd d√≥nde buscar: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ldd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/bin/oiddispd</code> </pre> <br>  Debe estar en ORACLE_HOME con el software FMW: <br><br><pre> <code class="hljs ruby">libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span> =&gt; <span class="hljs-regexp"><span class="hljs-regexp">/u/app</span></span><span class="hljs-regexp"><span class="hljs-regexp">/oracle/product</span></span><span class="hljs-regexp"><span class="hljs-regexp">/middleware/</span></span>Oracle_IDM1/lib/libclntsh.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span></code> </pre> <br>  Errores si esto no es as√≠, vea <i>Problem2</i> <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ ./setStartupEnv.sh ‚Äì  .   ./startNodeManager.sh &amp;</code> </pre><br>  Aseg√∫rese de que NodeManager se est√© ejecutando. <br>  Registros y configuraci√≥n: / u / app / oracle / config / domains / oid_domain / nodemanager <br><br>  <i><b>Problema 1:</b></i> <br><br><pre> <code class="hljs pgsql">Jun <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">58</span></span> AM MSK Fatal error <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> NodeManager <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> weblogic.nodemanager.common.ConfigException: <span class="hljs-keyword"><span class="hljs-keyword">Identity</span></span> key store file <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-built_in"><span class="hljs-built_in">found</span></span>: /u/app/oracle/config/domains/oid_domain/<span class="hljs-keyword"><span class="hljs-keyword">security</span></span>/DemoIdentity.jks</code> </pre><br>  <i><b>Soluci√≥n1</b></i> : vaya y genere DemoIdentity.jks como se describi√≥ anteriormente <br><br>  <i><b>Problema 2</b></i> : <br><br><pre> <code class="hljs vbscript">Jun <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">2018</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> PM MSK INFO /u/app/oracle/config/domains/oid_domain&gt;&gt;&lt;&lt; password: confirm password: Unable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Connect <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Database: Incorrect location <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tnsnames.ora (<span class="hljs-built_in"><span class="hljs-built_in">derived</span></span> from DOMAIN_HOME) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Incorrect TNS Connect <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Invalid Password &gt; &lt;createDbWallet domain: /u/app/oracle/config/domains/oid_domain, oidpasswd output: password: confirm password:</code> </pre><br>  <i><b>Soluci√≥n2</b></i> : configure la variable TNS_ADMIN y verifique que el nombre de usuario / contrase√±a sea correcto <br><br><h3>  Configuraci√≥n primaria de OID </h3><br>  En este punto, las variables deben establecerse. <br>  TNS_ADMIN <br>  LD_LIBRARY_PATH <br>  Se supone que NodeManager ya se est√° ejecutando. <br>  Inicie la utilidad WLST: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MW_HOME=<span class="hljs-variable"><span class="hljs-variable">$ORACLE_HOME</span></span></code> </pre> <br>  Extraemos las variables necesarias para que funcione la utilidad WLST <br><br><pre> <code class="hljs">./setHomeDirs.sh ./setWlstEnv.sh ./wlst.sh</code> </pre><br>  Adem√°s, utilizando la utilidad WLST, nos conectamos a NodeManager.  Necesitamos un nombre de usuario y contrase√±a especificados durante la instalaci√≥n (especificado para NodeManager, tenemos esta l√≥gica web) <br><br><pre> <code class="hljs pgsql">nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>=<span class="hljs-string"><span class="hljs-string">'  NodeManager '</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>)</code> </pre><br>  <i>Ejemplo de salida</i> : <br><br><pre> <code class="hljs ruby">[<span class="hljs-number"><span class="hljs-number">13</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">45</span></span>][uhost-oid1.oracle.<span class="hljs-symbol"><span class="hljs-symbol">:/u/app/oracle/product/middleware/Oracle_IDM1/oracle_common/common/bin</span></span>]$ ./wlst.sh Initializing WebLogic Scripting Tool (WLST) ... Welcome to WebLogic Server Administration Scripting Shell Type help() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help on available commands <span class="hljs-symbol"><span class="hljs-symbol">wls:</span></span>/offline&gt; nmConnect(username=<span class="hljs-string"><span class="hljs-string">'weblogic'</span></span>,password=<span class="hljs-string"><span class="hljs-string">'*****'</span></span>,domainName=<span class="hljs-string"><span class="hljs-string">'oid_domain'</span></span>) Connecting to Node Manager ... Successfully Connected to Node Manager.</code> </pre><br>  Comenzamos la inicializaci√≥n, durante la cual se crea una instancia con el nombre oid1. <br>  En la l√≠nea de abajo: <br><br>  odsPassword: contrase√±a para el esquema ODS basado en el repositorio que se configur√≥ durante ./rcu <br>  orcladminPassword: contrase√±a que se usar√° como cn = orcladmin para acceder a LDAP <br>  RealmDN - LDAP - esquema a configurar <br><br><pre> <code class="hljs lisp">oid_setup(<span class="hljs-name"><span class="hljs-name">orcladminPassword=</span></span>'****',odsPassword='***',realmDN='dc=mycompany,dc=ru')</code> </pre> <br>  Despu√©s de la ejecuci√≥n, se crear√° un componente (instancia en t√©rminos de FMW) con el nombre oid1 <br><br>  <b><i>Problema 3</i></b> : <br>  Inicie sesi√≥n /u/app/oracle/config/domains/oid_domain/servers/OID/logs/oid1/oidmon*.log <br>  contiene <br><br><pre> <code class="hljs vhdl">/u/app/oracle/product/middleware/Oracle_IDM1/wlserver/../bin/oiddispd: &lt;b&gt;<span class="hljs-literal"><span class="hljs-literal">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> loading <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> libraries&lt;/b&gt;: libclntshcore.so.<span class="hljs-number"><span class="hljs-number">12.1</span></span>: cannot <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> object <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: No such <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> directory</code> </pre> <br>  <b><i>Soluci√≥n 3</i></b> : <br>  Establecer la variable de entorno <br>  LD_LIBRARY_PATH = / u / app / oracle / product / middleware / Oracle_IDM1 / lib: $ LD_LIBRARY_PATH <br>  reiniciar NodeManager, <br>  ejecuta el componente: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u/app/oracle/config/domains/oid_domain/bin/ nohup ./startNodeManager.sh &amp; ./startComponent.sh oid1</code> </pre><br>  Si el componente se cre√≥ por este motivo pero no funciona, entonces eliminamos el proceso de oidmon, cambiamos los par√°metros de estado del proceso en el DBMS: <br><br><pre> <code class="hljs perl">ps ‚Äìef|<span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> oidmon <span class="hljs-keyword"><span class="hljs-keyword">kill</span></span> oidmon</code> </pre><br><pre> <code class="sql hljs">sqlplus / as sysdba <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> pid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ods.ods_process_status <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> state=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> compname=<span class="hljs-string"><span class="hljs-string">'oid1'</span></span>;</code> </pre><br>  Comprobaci√≥n de conexi√≥n: <br><br><pre> <code class="hljs powershell">./ldapbind <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3060</span></span> ./ldapbind <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3131</span></span> <span class="hljs-literal"><span class="hljs-literal">-U</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-literal"><span class="hljs-literal">-D</span></span> <span class="hljs-string"><span class="hljs-string">'cn=orcladmin'</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> ****</code> </pre><br>  Es posible que deba inicializar oid_setup nuevamente <br>  <b><i>Problema 4</i></b> .  Al intentar guardar en NetManager: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dataStore</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DataStoreException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">error</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">writing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ServiceAlias</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">LDAPDataStore</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[svr: uhost-oid1.mycompany.ru:3060:3131, type: OID, ctxt: cn=OracleContext,dc=mycompany,dc=ru, home: C:\oracle\product\12.1.0\client_1]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">exception</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">message</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">original</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">stack</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">trace</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ServiceAliasException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04409</span></span>:    <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DirectoryServiceException</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">TNS-04405</span></span>:   <span class="hljs-selector-tag"><span class="hljs-selector-tag">caused</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">by</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">oracle</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.net</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ldap</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.NNFLException</span></span></code> </pre><br><img src="https://habrastorage.org/webt/p8/pm/1b/p8pm1bts4oilkqr56yfupfyhfpq.jpeg"><br><br>  <b>Solution4:</b> <br>  Ejecute oid_setup nuevamente <br>  Compruebe la configuraci√≥n de ldap.ora en el cliente desde el que se inicia Net Manager <br>  DEFAULT_ADMIN_CONTEXT = "dc = mycompany, dc = ru" <br><br>  <b>Cambiar el par√°metro OID (para permitir solicitudes de usuarios an√≥nimos)</b> <br>  Cuando se crea un nombre TNS usando net manager, pero tnsping no funciona. <br>  Crea un archivo: <br>  gato anonymousbind.ldif <br><br><pre> <code class="hljs sql">dn: cn=oid1,cn=osdldapd,cn=subconfigsubentry changetype: modify <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span>: orclAnonymousBindsFlag orclAnonymousBindsFlag: <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  y modifique los par√°metros usando este archivo: <br><br><pre> <code class="hljs powershell">ldapmodify <span class="hljs-literal"><span class="hljs-literal">-D</span></span> cn=orcladmin <span class="hljs-literal"><span class="hljs-literal">-W</span></span> <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3131</span></span> <span class="hljs-literal"><span class="hljs-literal">-h</span></span> localhost <span class="hljs-operator"><span class="hljs-operator">-f</span></span> anonymousbind.ldif</code> </pre> <br>  <i><b>Diagn√≥sticos:</b></i> <br>  tnsping mytest no funciona, un ldapsearch funciona <br>  Comprobaci√≥n de la disponibilidad de los puertos 3060 y 3131 (para SSL) <br><br>  as√≠ es como funciona (con una contrase√±a) <br><br><pre> <code class="hljs powershell">ldapsearch <span class="hljs-literal"><span class="hljs-literal">-h</span></span> uhost<span class="hljs-literal"><span class="hljs-literal">-oid1</span></span>.mycompany.ru <span class="hljs-literal"><span class="hljs-literal">-p</span></span> <span class="hljs-number"><span class="hljs-number">3060</span></span> <span class="hljs-literal"><span class="hljs-literal">-D</span></span> <span class="hljs-string"><span class="hljs-string">"cn=orcladmin"</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> password_hear <span class="hljs-literal"><span class="hljs-literal">-b</span></span> <span class="hljs-string"><span class="hljs-string">"cn=mytest,cn=OracleContext,dc=mycompany,dc=ru"</span></span> <span class="hljs-literal"><span class="hljs-literal">-s</span></span> base <span class="hljs-string"><span class="hljs-string">"objectclass=*"</span></span></code> </pre> <br>  mytest es un alias creado previamente. <br><br><h2>  Configuraciones del cliente </h2><br>  En el lado del cliente, $ ORACLE_HOME / network / admin contiene los archivos: <br>  ldap.ora <br>  sqlnet.ora <br>  tnsnames.ora <br><br>  El archivo tnsnames.ora contiene alias "locales", como de costumbre, y se usa si no se encuentra un nombre en LDAP. <br>  El archivo sqlnet.ora contiene una descripci√≥n del orden de resoluci√≥n: <br><br>  <u>sqlnet.ora</u> <br><cut></cut><br> <code>SQLNET.AUTHENTICATION_SERVICES= (NTS) <br> NAMES.DIRECTORY_PATH= (TNSNAMES,LDAP) <br></code> <br><br>  La configuraci√≥n de acceso para el archivo LDAP se establece en ldap.ora <br><br>  <u>ldap.ora</u> <br><cut></cut><br><pre> <code class="hljs lisp">DIRECTORY_SERVERS = (<span class="hljs-name"><span class="hljs-name">uhost-oid1</span></span>.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>,rephost-oid1.mycompany.ru:<span class="hljs-number"><span class="hljs-number">3060</span></span>:<span class="hljs-number"><span class="hljs-number">3131</span></span>) DIRECTORY_SERVER_TYPE = OID DEFAULT_ADMIN_CONTEXT = <span class="hljs-string"><span class="hljs-string">"dc=mycompany,dc=ru"</span></span></code> </pre><br>  En la configuraci√≥n descrita, se utiliza el siguiente orden. <br><br>  Primero, se ve el archivo tnsnames.ora, si el registro no se encuentra all√≠, le pedimos a LDAP (si necesita cambiar el orden, cambie el orden en el par√°metro NAMES.DIRECTORY_PATH <br><br>  Lo siguiente es una solicitud al servidor LDAP principal; si no est√° disponible por alg√∫n motivo, vaya al segundo servidor en la lista DIRECTORY_SERVERS <br><br>  El orden de sondeo en este caso no es importante, el primero es mejor indicar el servidor geogr√°ficamente m√°s cercano. <br><br>  El contexto de administrador predeterminado (LDAP) se utiliza para el contexto predeterminado, a fin de no indicar mycompany.ru cada vez <br><br>  Por la misma raz√≥n, no se recomienda usar un punto en un registro de alias; √©l lo percibe como un dominio. <br><br>  Adem√°s, dir√© c√≥mo configurar la replicaci√≥n entre servidores </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426273/">https://habr.com/ru/post/es426273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426263/index.html">Wi-Fi 6 anunciado: lo que necesita saber sobre el nuevo est√°ndar</a></li>
<li><a href="../es426265/index.html">Marco de automatizaci√≥n de env√≠os (SAF)</a></li>
<li><a href="../es426267/index.html">Una canci√≥n sobre c√≥mo la creaci√≥n de proyectos se convirti√≥ en un infierno</a></li>
<li><a href="../es426269/index.html">Una aplicaci√≥n python kivy para una dieta variada. Desde el c√≥digo hasta la recepci√≥n del archivo .apk para Android</a></li>
<li><a href="../es426271/index.html">Tesla Model 3 seguridad para autom√≥viles</a></li>
<li><a href="../es426275/index.html">C√≥mo buscamos signos de error m√©dico</a></li>
<li><a href="../es426277/index.html">Cosas para recordar para un programador que cambia a Python</a></li>
<li><a href="../es426279/index.html">C√≥mo los formatos de audio y las tecnolog√≠as de audio "lucharon" y evolucionaron: un gran resumen hist√≥rico</a></li>
<li><a href="../es426281/index.html">Los fundadores de Amazon, Google, Microsoft y Facebook perdieron m√°s de $ 30 mil millones durante un colapso del mercado de valores</a></li>
<li><a href="../es426283/index.html">WeChat en India: de un lanzamiento poderoso a una p√©rdida total de inter√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>