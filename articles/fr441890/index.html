<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∞ üí© üìµ Tout ce que vous devez savoir sur les extensions d'application iOS üë®‚Äçüëß ‚Ü™Ô∏è ‚òïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les extensions d'application sont apparues dans iOS 8 et ont rendu le syst√®me plus flexible, puissant et abordable pour les utilisateurs. Les applicat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tout ce que vous devez savoir sur les extensions d'application iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mobileup/blog/441890/"><img src="https://habrastorage.org/webt/2n/jy/99/2njy99obhw-o7fthqzpd0f5ncxm.png"><br><br>  Les extensions d'application sont apparues dans iOS 8 et ont rendu le syst√®me plus flexible, puissant et abordable pour les utilisateurs.  Les applications peuvent √™tre affich√©es sous forme de widget dans le Centre de notifications, proposer leurs filtres pour les photos dans Photos, afficher un nouveau clavier syst√®me et bien plus encore.  Dans le m√™me temps, la s√©curit√© des donn√©es utilisateur et du syst√®me a √©t√© pr√©serv√©e.  Les fonctionnalit√©s du travail des extensions d'application seront discut√©es ci-dessous. <br><a name="habracut"></a><br>  Apple a toujours cherch√© √† isoler soigneusement les applications les unes des autres.  C'est le meilleur moyen d'assurer la s√©curit√© des utilisateurs et de prot√©ger leurs donn√©es.  Chaque application se voit attribuer une place distincte dans le syst√®me de fichiers avec un acc√®s limit√©.  Les extensions d'application ont permis d'interagir avec l'application sans la lancer ni l'afficher √† l'√©cran.  Ainsi, une partie de ses fonctionnalit√©s sera disponible pour les utilisateurs lorsqu'ils interagissent avec d'autres applications ou le syst√®me. <br><br>  Les extensions d'application sont des fichiers ex√©cutables qui s'ex√©cutent ind√©pendamment de l'application <b>conteneur</b> - <b>contenant l'application</b> .  En eux-m√™mes, ils ne peuvent pas √™tre publi√©s sur l'App Store, uniquement avec l'application Containing.  Toutes les extensions d'application effectuent une t√¢che sp√©cifique et sont li√©es √† une seule zone d'iOS, selon leur type.  Par exemple: les extensions de clavier personnalis√©es servent √† remplacer le clavier standard et les extensions de retouche photo permettent de retoucher des photos dans Photos.  Il existe actuellement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">25 types d'</a> extensions d'application. <br><br><h1>  Extension d'application Life Extension </h1><br>  L'application que l'utilisateur utilise pour lancer l'extension d'application est appel√©e l' <b>application h√¥te</b> .  L'application h√¥te lance le cycle de vie de l'extension d'application, en lui envoyant une demande en r√©ponse √† une action de l'utilisateur: <br><br><img src="https://habrastorage.org/webt/jp/kl/vj/jpklvjv3yd2-5e3q_ownsx4d9my.png"><br><br><ul><li>  L'utilisateur s√©lectionne l'extension d'application via l'application h√¥te. <br></li><li>  L'application h√¥te envoie une demande d'extension d'application. <br></li><li>  iOS lance l'extension d'application dans le contexte de l'application h√¥te et √©tablit un canal de communication entre eux. <br></li><li>  L'utilisateur effectue une action dans l'extension d'application. <br></li><li>  L'extension d'application termine la demande de l'application h√¥te, effectue une t√¢che ou d√©marre un processus d'arri√®re-plan pour la terminer  une fois la t√¢che termin√©e, le r√©sultat peut √™tre renvoy√© √† l'application h√¥te. <br></li><li>  Une fois que l'extension d'application ex√©cute son code, le syst√®me met fin √† cette extension d'application. <br></li></ul><br>  Par exemple, lorsque vous partagez une photo √† partir de Photos √† l'aide de l'extension de partage Facebook, Facebook est l'application contenant et Photos est l'application h√¥te.  Dans ce cas, Photos d√©marre le cycle de vie de l'extension de partage Facebook lorsque l'utilisateur le s√©lectionne dans le menu Partager: <br><br><img src="https://habrastorage.org/webt/65/11/9a/65119akk96p0z1dqrmltolv73ss.png"><br><br><h1>  Interaction avec l'extension d'application </h1><br><img src="https://habrastorage.org/webt/o_/wn/mg/o_wnmgqodkshdtrb7vgnakhymse.png"><br><br><ul><li>  <b>Application contenant - Application h√¥te</b> <br>  N'interagissez pas les uns avec les autres. <br></li><li> <b>Extension d'application - Application h√¥te</b> <br>  Interagissez avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IPC</a> . <br></li><li>  <b>Extension d'application - contenant une application</b> <br>  Interaction indirecte.  <b>Les groupes d'applications</b> sont utilis√©s pour l'√©change de donn√©es et <b>les cadres int√©gr√©s sont</b> utilis√©s pour le code g√©n√©ral.  Vous pouvez lancer l'application contenant depuis l'extension d'application √† l'aide des <b>sch√©mas d'URL</b> . <br></li></ul><br><h2>  Code g√©n√©rique: cadres dynamiques </h2><br>  Si l'application contenant l'extension et l'application utilisent le m√™me code, elles doivent √™tre plac√©es dans un cadre dynamique. <br><br>  Par exemple, une extension de retouche photo peut √™tre associ√©e √† une application de retouche photo personnalis√©e qui utilise certains filtres de l'application contenant.  Une bonne solution serait de cr√©er un cadre dynamique pour ces filtres. <br><br>  Pour ce faire, ajoutez une nouvelle <b>cible</b> et s√©lectionnez le <b>Cocoa Touch Framework</b> : <br><br><img src="https://habrastorage.org/webt/4o/-i/65/4o-i65s30q1srdwldrhhrj8sfuw.png"><br><br>  Sp√©cifiez un nom (par exemple, <b>ImageFilters</b> ), et dans le panneau du navigateur, vous pouvez voir un nouveau dossier avec le nom du framework cr√©√©: <br><br><img src="https://habrastorage.org/webt/k5/ih/nn/k5ihnnf83plqtwrwqquhe3pxzuq.png" align="left" width="270" height="377">  Vous devez vous assurer que le framework n'utilise pas d'API qui ne sont pas disponibles pour les extensions d'application: <br><br><ul><li>  Partag√© depuis UIApplication. <br></li><li>  API marqu√©es avec des macros d'inaccessibilit√©. <br></li><li>  Cam√©ra et microphone (sauf iMessage Extension). <br></li><li>  Ex√©cution de longues t√¢ches en arri√®re-plan (les fonctionnalit√©s de cette restriction varient en fonction du type d'extension d'application). <br></li><li>  Recevez des donn√©es √† l'aide d'AirDrop. <br></li></ul><br>  L'utilisation de l'une de ces listes dans les extensions d'application entra√Ænera son rejet lors de sa publication sur l'App Store. <br><br>  Dans les param√®tres du framework dans <b>G√©n√©ral,</b> vous devez cocher la case √† c√¥t√© de <b>"Autoriser l'API d'extension d'application uniquement"</b> : <br><br><img src="https://habrastorage.org/webt/6v/bz/ky/6vbzkycc0py7axwtcx2nji1oevk.png"><br><br>  Dans le code du framework, toutes les classes, m√©thodes et propri√©t√©s utilis√©es dans l'application contenant et les extensions d'application doivent √™tre <code>public</code> .  Partout o√π vous devez utiliser le framework, <code>import</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ImageFilters</code> </pre> <br><h2>  √âchange de donn√©es: groupes d'applications </h2><br>  L'application contenant l'extension et l'application ont leurs propres sections limit√©es du syst√®me de fichiers, et seules elles y ont acc√®s.  Pour que l'application contenant l'extension et l'application aient un conteneur commun avec un acc√®s en lecture et en √©criture, vous devez cr√©er un groupe d'applications pour eux. <br><br>  Le groupe d'applications est cr√©√© dans le <b>portail des d√©veloppeurs Apple</b> : <br><br><img src="https://habrastorage.org/webt/sw/ax/od/swaxodkpniu6gd_qdce6kh7bjj8.png"><br><br>  Dans le coin sup√©rieur droit, cliquez sur "+", dans la fen√™tre qui appara√Æt, entrez les donn√©es n√©cessaires: <br><br><img src="https://habrastorage.org/webt/db/bt/m8/dbbtm8iuqbihyixcsz7n79hm95e.png"><br><br>  Suivant <b>Continuer -&gt; S'inscrire -&gt; Termin√©</b> . <br><br>  Dans les param√®tres de l'application contenant, acc√©dez √† l'onglet <b>Capacit√©s</b> , activez les groupes d'applications et s√©lectionnez le groupe cr√©√©: <br><br><img src="https://habrastorage.org/webt/cr/tu/_r/crtu_rzlbyzuhb67tp9yqxv4s0k.png"><br><br>  De m√™me pour l'extension d'application: <br><br><img src="https://habrastorage.org/webt/cy/nd/pm/cyndpm2qzr49uk-lye8ahysbdkc.png"><br><br>  D√©sormais, l'application contenant l'extension et l'application partagent un conteneur.  Ensuite, nous parlerons de la lecture et de l'√©criture. <br><br><h3>  UserDefaults </h3><br>  Pour √©changer une petite quantit√© de donn√©es, il est pratique d'utiliser <code>UserDefaults</code> , il vous suffit de sp√©cifier le nom du groupe d'applications: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sharedDefaults = <span class="hljs-type"><span class="hljs-type">UserDefaults</span></span>(suiteName: <span class="hljs-string"><span class="hljs-string">"group.com.maxial.onemoreapp"</span></span>)</code> </pre> <br><h3>  NSFileCoordinator et NSFilePresenter </h3><br>  Pour les <code>NSFileCoordinator</code> , <code>NSFileCoordinator</code> est mieux adapt√© pour assurer la coh√©rence en lecture / √©criture.  Cela √©vitera la corruption des donn√©es, car il est possible que plusieurs processus puissent y acc√©der simultan√©ment. <br><br>  L'URL du conteneur partag√© est obtenue comme suit: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sharedUrl = <span class="hljs-type"><span class="hljs-type">FileManager</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.containerURL(forSecurityApplicationGroupIdentifier: <span class="hljs-string"><span class="hljs-string">"group.com.maxial.onemoreapp"</span></span>)</code> </pre> <br>  Record: <br><br><pre> <code class="swift hljs">fileCoordinator.coordinate(writingItemAt: sharedUrl, options: [], error: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { [<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] newUrl <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">NSKeyedArchiver</span></span>.archivedData(withRootObject: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.object, requiringSecureCoding: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> data.write(to: newUrl, options: .atomic) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(error) } }</code> </pre> <br>  Lecture: <br><br><pre> <code class="swift hljs">fileCoordinator.coordinate(readingItemAt: sharedUrl, options: [], error: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { newUrl <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">Data</span></span>(contentsOf: newUrl) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> object = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">NSKeyedUnarchiver</span></span>.unarchivedObject(ofClass: <span class="hljs-type"><span class="hljs-type">NSString</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: data) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">String?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.object = object } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(error) } }</code> </pre> <br>  Il convient de noter que <code>NSFileCoordinator</code> fonctionne de mani√®re synchrone.  Alors que certains fichiers seront occup√©s par un processus, d'autres devront attendre qu'il soit publi√©. <br><br>  Si vous voulez que l'extension d'application sache quand l'application contenant change l'√©tat des donn√©es, <code>NSFilePresenter</code> utilis√©.  Il s'agit d'un protocole dont la mise en ≈ìuvre peut ressembler √† ceci: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodayViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSFilePresenter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> presentedItemURL: <span class="hljs-type"><span class="hljs-type">URL?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sharedUrl = <span class="hljs-type"><span class="hljs-type">FileManager</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.containerURL(forSecurityApplicationGroupIdentifier: <span class="hljs-string"><span class="hljs-string">"group.com.maxial.onemoreapp"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sharedUrl?.appendingPathComponent(<span class="hljs-string"><span class="hljs-string">"Items"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> presentedItemOperationQueue: <span class="hljs-type"><span class="hljs-type">OperationQueue</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> .main } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">presentedItemDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { } }</code> </pre> <br>  La propri√©t√© presentItemOperationQueue renvoie une file d'attente qui est utilis√©e pour les rappels lors de la modification des fichiers.  La m√©thode <b><code>presentedItemDidChange()</code></b> est appel√©e lorsqu'un processus, en l'occurrence l'App contenant, modifie le contenu des donn√©es.  Si des modifications ont √©t√© apport√©es directement √† l'aide d'appels d'√©criture de bas niveau, le param√®tre <b><code>presentedItemDidChange()</code></b> pas appel√©.  Seules les modifications utilisant <code>NSFileCoordinator</code> . <br><br>  Lors de l'initialisation d'un objet <code>NSFileCoordinator</code> , <code>NSFileCoordinator</code> recommand√© de passer l'objet <code>NSFilePresenter</code> , surtout s'il d√©marre une op√©ration de fichier: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fileCoordinator = <span class="hljs-type"><span class="hljs-type">NSFileCoordinator</span></span>(filePresenter: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)</code> </pre> <br>  Sinon, l'objet <code>NSFilePresenter</code> recevra des notifications sur ces op√©rations, ce qui peut entra√Æner un blocage lors du travail dans le m√™me thread. <br><br>  Pour commencer √† surveiller l'√©tat des donn√©es, vous devez appeler la <b><code>addFilePresenter(_:)</code></b> avec l'objet correspondant: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">NSFileCoordinator</span></span>.addFilePresenter(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)</code> </pre> <br>  Tout objet <code>NSFileCoordinator</code> cr√©√© <code>NSFileCoordinator</code> automatiquement inform√© de cet objet <code>NSFilePresenter</code> et notifiera les modifications apport√©es √† son r√©pertoire. <br><br>  Pour arr√™ter la surveillance de l'√©tat des donn√©es, utilisez <b><code>removeFilePresenter(_:)</code></b> : <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">NSFileCoordinator</span></span>.removeFilePresenter(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)</code> </pre> <br><h3>  Donn√©es de base </h3><br>  Pour le partage de donn√©es, vous pouvez utiliser SQLite et, par cons√©quent, Core Data.  Ils peuvent g√©rer des processus qui fonctionnent avec des donn√©es partag√©es.  Pour configurer les donn√©es de base √† partager entre l'application contenant et l'extension d'application, cr√©ez une sous-classe de <code>NSPersistentContainer</code> et remplacez la m√©thode <b><code>defaultDirectoryURL</code></b> , qui doit renvoyer l'adresse du magasin de donn√©es: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SharedPersistentContainer</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSPersistentContainer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">defaultDirectoryURL</span></span></span><span class="hljs-class">() -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">URL</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> storeURL = <span class="hljs-type"><span class="hljs-type">FileManager</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.containerURL(forSecurityApplicationGroupIdentifier: <span class="hljs-string"><span class="hljs-string">"group.com.maxial.onemoreapp"</span></span>) storeURL = storeURL?.appendingPathComponent(<span class="hljs-string"><span class="hljs-string">"OneMoreApp.sqlite"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storeURL! } }</code> </pre> <br>  Dans <code>AppDelegate</code> modifiez la propri√©t√© <b><code>persistentContainer</code></b> .  Il est automatiquement cr√©√© si, lors de la cr√©ation d'un projet, cochez la case <b>Utiliser les donn√©es de base</b> .  Nous allons maintenant retourner un objet de la classe <code>SharedPersistentContainer</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> persistentContainer: <span class="hljs-type"><span class="hljs-type">NSPersistentContainer</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> container = <span class="hljs-type"><span class="hljs-type">SharedPersistentContainer</span></span>(name: <span class="hljs-string"><span class="hljs-string">"OneMoreApp"</span></span>) container.loadPersistentStores(completionHandler: { (storeDescription, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = error <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">NSError?</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Unresolved error \(error), \(error.userInfo)"</span></span>) } }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> container }()</code> </pre> <br>  Il ne reste plus qu'√† ajouter <b>.xcdatamodeld</b> √† l'extension d'application.  S√©lectionnez le fichier .xcdatamodeld dans le panneau du navigateur.  Dans l' <b>inspecteur de fichiers</b> , sous la section <b>Appartenance cible</b> , cochez la case en regard de l'extension d'application: <br><br><img src="https://habrastorage.org/webt/71/mb/t8/71mbt8ggk9msftndb3q2f0obvvu.png" width="270" height="386"><br><br>  Ainsi, l'application contenant l'extension et l'application pourront lire et √©crire des donn√©es sur le m√™me stockage et utiliser le m√™me mod√®le. <br><br><h2>  Lancement de l'application contenant depuis l'extension d'application </h2><br>  Lorsque l'application h√¥te envoie une demande d'extension d'application, elle fournit un <b><code>extensionContext</code></b> .  Cet objet a une m√©thode <b><code>open(_:completionHandler:)</code></b> , avec laquelle vous pouvez ouvrir l'application contenant.  Cependant, cette m√©thode n'est pas disponible pour tous les types d'extension d'application.  Sur iOS, il est pris en charge par Today Extension et iMessage Extension.  L'extension iMessage ne peut l'utiliser que pour ouvrir l'application contenant.  Si l'extension Aujourd'hui ouvre une autre application avec elle, une v√©rification suppl√©mentaire peut √™tre n√©cessaire pour soumettre √† l'App Store. <br><br>  Pour ouvrir l'application depuis l'extension d'application, vous devez d√©finir le sch√©ma d'URL dans l'application contenant: <br><br><img src="https://habrastorage.org/webt/vh/zy/hi/vhzyhilxsny61ctuynhqhzfwvos.png"><br><br>  Ensuite, appelez la m√©thode <b><code>open(_:completionHandler:)</code></b> avec ce diagramme depuis l'extension d'application: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-type"><span class="hljs-type">URL</span></span>(string: <span class="hljs-string"><span class="hljs-string">"OneMoreAppUrl://"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } extensionContext?.<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(url, completionHandler: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)</code> </pre> <br>  Pour les types d'extensions d'application qui appellent la m√©thode <b><code>open(_:completionHandler:)</code></b> n'est pas disponible, il existe √©galement un moyen.  Mais il est possible que l'application soit rejet√©e lors de la v√©rification dans l'App Store.  L'essence de la m√©thode consiste √† <code>UIResponder</code> la cha√Æne d'objets <code>UIResponder</code> jusqu'√† ce qu'il y ait une application <code>UIApplication</code> qui accepte l'appel <b><code>openURL</code></b> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-type"><span class="hljs-type">URL</span></span>(string: <span class="hljs-string"><span class="hljs-string">"OneMoreAppUrl://"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> selectorOpenURL = sel_registerName(<span class="hljs-string"><span class="hljs-string">"openURL:"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> responder: <span class="hljs-type"><span class="hljs-type">UIResponder?</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> responder != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> responder?.responds(to: selectorOpenURL) == <span class="hljs-literal"><span class="hljs-literal">true</span></span> { responder?.perform(selectorOpenURL, with: url) } responder = responder?.next }</code> </pre> <br><h1>  Futures extensions d'application </h1><br>  Les extensions d'application ont beaucoup apport√© au d√©veloppement iOS.  Progressivement, plus de types d'extensions d'applications apparaissent, leurs capacit√©s se d√©veloppent.  Par exemple, avec la sortie du SDK iOS 12, vous pouvez d√©sormais interagir avec la zone de contenu des notifications, qui manquait depuis si longtemps. <br><br>  Ainsi, Apple continue de d√©velopper cet outil, qui inspire l'optimisme quant √† son avenir. <br><br>  <b>Liens utiles:</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation officielle</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partager des donn√©es entre des applications iOS et des extensions d'application</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conseils de d√©veloppement d'extension d'application iOS 8</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441890/">https://habr.com/ru/post/fr441890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441870/index.html">Imprimante 3D Solidprint Sign</a></li>
<li><a href="../fr441878/index.html">Toi comme tu veux, mais je l'ai fait</a></li>
<li><a href="../fr441882/index.html">VMware NSX pour les plus petits. Partie 3. Configuration de DHCP</a></li>
<li><a href="../fr441886/index.html">Au cours des 12 derni√®res ann√©es, je n'ai jamais montr√© de CV</a></li>
<li><a href="../fr441888/index.html">SIP depuis le m√©gaphone au tarif du domicile</a></li>
<li><a href="../fr441892/index.html">Cr√©ation d'un mod√®le de flux de donn√©es pour diffuser des donn√©es de Pub / Sub vers BigQuery bas√© sur GCP √† l'aide du SDK Apache Beam et de Python</a></li>
<li><a href="../fr441896/index.html">Apprenez les tactiques, techniques et connaissances communes contradictoires (ATT @ CK). Tactiques d'entreprise. Partie 9</a></li>
<li><a href="../fr441898/index.html">Sketch + Node.js: g√©n√©ration d'ic√¥nes pour de nombreuses plateformes et marques</a></li>
<li><a href="../fr441900/index.html">Satya Nadella a parl√© de coop√©ration avec le Pentagone</a></li>
<li><a href="../fr441902/index.html">Comment la technologie cr√©e de nouvelles r√©alit√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>