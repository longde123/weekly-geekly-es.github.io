<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏐 ➖ 😮 Menggunakan Golang untuk Membuat Layanan Mikro di The Economist: A Retrospective 💒 👨🏿‍🚒 🎞️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! Sudah pada 28 Mei, kami meluncurkan grup pertama di kursus Pengembang Golang . Dan hari ini kami berbagi dengan Anda publikasi pertama ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menggunakan Golang untuk Membuat Layanan Mikro di The Economist: A Retrospective</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/451760/">  Halo semuanya!  Sudah pada 28 Mei, kami meluncurkan grup pertama di kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengembang Golang</a> .  Dan hari ini kami berbagi dengan Anda publikasi pertama yang didedikasikan untuk peluncuran kursus ini.  Ayo pergi. <br><br><img src="https://habrastorage.org/webt/3r/wa/jy/3rwajyps3se5vmahtiv_ioninq0.png"><br><br>  <b>Kutipan utama</b> <br><br><ul><li>  The Economist membutuhkan lebih banyak fleksibilitas untuk mendistribusikan konten ke saluran digital yang semakin beragam.  Untuk mencapai tujuan ini dan mempertahankan tingkat kinerja dan keandalan yang tinggi, platform telah berpindah dari arsitektur monolitik ke arsitektur layanan mikro. </li><li>  Alat-alat yang ditulis dalam Go adalah komponen kunci dari sistem baru, yang memungkinkan The Economist untuk menyediakan layanan yang terukur dan berkinerja tinggi dan dengan cepat menciptakan produk baru. </li><li>  Go, dengan tujuan konkurensi dan dukungan API, bersama dengan konstruksi bahasa kompilasi statis, memfasilitasi pengembangan sistem pemrosesan acara terdistribusi yang dapat ditingkatkan.  Dukungan pengujian juga merupakan nilai tambah. </li><li>  Secara umum, pengalaman tim The Economist dengan Go adalah positif, dan ini adalah salah satu faktor penentu yang membantu skala Platform Konten. </li><li>  Go tidak akan selalu menjadi alat yang cocok, dan ini normal.  The Economist memiliki platform polyglot dan menggunakan berbagai bahasa yang masuk akal. </li></ul><a name="habracut"></a><br>  Saya bergabung dengan tim pengembangan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">The Economist</a> sebagai pengembang Drupal.  Namun, tugas saya yang sebenarnya adalah untuk berpartisipasi dalam proyek yang secara fundamental akan mengubah teknologi pengiriman konten ekonom.  Beberapa bulan pertama saya habiskan untuk belajar Go, beberapa bulan bekerja dengan konsultan eksternal untuk membuat MVP (produk minimum yang layak), dan kemudian bergabung dengan tim lagi untuk mengawasi pencelupan mereka di Go. <br>  Pergeseran teknologi ini dipicu oleh misi The Economist untuk memperluas pemirsa digitalnya, karena konsumsi berita beralih dari media cetak.  The Economist membutuhkan lebih banyak fleksibilitas untuk mengirimkan konten ke saluran digital yang semakin beragam.  Untuk mencapai tujuan ini dan mempertahankan tingkat kinerja dan keandalan yang tinggi, platform telah berpindah dari arsitektur monolitik ke arsitektur layanan mikro.  Alat-alat yang ditulis dalam Go adalah komponen kunci dari sistem baru, yang memungkinkan The Economist untuk menyediakan layanan yang terukur dan berkinerja tinggi dan dengan cepat menciptakan produk-produk baru. <br><br>  Implementing Go in The Economist: <br><br><ul><li>  Insinyur yang diizinkan untuk dengan cepat mengembangkan dan mengimplementasikan fungsionalitas baru. </li><li>  Praktik terbaik yang disetujui untuk layanan gagal cepat dengan penanganan kesalahan cerdas. </li><li>  Memberikan dukungan yang andal untuk operasi konkurensi dan jaringan dalam sistem terdistribusi. </li><li>  Itu menunjukkan kurangnya kedewasaan dan dukungan di beberapa area yang dibutuhkan untuk konten dan media. </li><li>  Memfasilitasi platform yang dapat meningkatkan skala untuk penerbitan digital. </li></ul><br>  <b>Mengapa The Economist memilih Go?</b> <br><br>  Untuk menjawab pertanyaan ini, akan bermanfaat untuk menyoroti keseluruhan arsitektur platform baru.  Platform, yang disebut Platform Konten, adalah sistem penanganan acara.  Ini menanggapi peristiwa dari platform pembuat konten yang berbeda dan meluncurkan aliran proses yang dijalankan dalam layanan microser yang bekerja secara terpisah.  Layanan ini melakukan fungsi seperti menstandarkan data, menganalisis tag semantik, mengindeks dalam ElasticSearch, dan mengirim konten ke platform eksternal seperti Apple News atau Facebook.  Platform ini juga memiliki RESTful API, yang dikombinasikan dengan GraphQL adalah titik masuk utama untuk klien dan produk front-end. <br><br>  Dalam mengembangkan arsitektur umum, tim menyelidiki bahasa mana yang sesuai dengan kebutuhan platform.  Go telah dibandingkan dengan Python, Ruby, Node, PHP, dan Java.  Sementara setiap bahasa memiliki kekuatannya sendiri, Go paling cocok untuk arsitektur platform.  Go, dengan tujuan konkurensi dan dukungan API, bersama dengan konstruksi bahasa kompilasi statis, memfasilitasi pengembangan sistem pemrosesan acara terdistribusi yang dapat ditingkatkan.  Selain itu, sintaksis Go yang relatif sederhana membuatnya mudah untuk terlibat dalam pengembangan dan mulai menulis kode kerja, yang menjanjikan manfaat langsung bagi tim yang sedang menjalani transisi teknologi besar.  Secara umum, ditentukan bahwa Go adalah bahasa yang paling cocok untuk kegunaan dan efisiensi dalam sistem cloud terdistribusi. <br><br>  <b>Tiga tahun kemudian: apakah Go cocok dengan tujuan ambisius ini?</b> <br><br>  Beberapa elemen desain platform disejajarkan dengan baik dengan bahasa Go.  Gagal Cepat adalah bagian penting dari sistem karena terdiri dari layanan independen yang didistribusikan.  Sesuai dengan prinsip Aplikasi Dua Belas-Faktor ("aplikasi 12 faktor"), aplikasi harus berjalan dengan cepat dan cepat gagal (gagal cepat).  Desain Go sebagai bahasa yang dikompilasi statis menyediakan waktu startup yang cepat, dan kinerja kompiler terus membaik dan tidak pernah menjadi masalah untuk desain atau penyebaran.  Selain itu, desain penanganan kesalahan Go memungkinkan aplikasi gagal tidak hanya lebih cepat, tetapi juga lebih pintar. <br><br>  <b>Menangani kesalahan</b> <br><br>  Fitur yang insinyur cepat perhatikan di Go adalah bahwa itu adalah tipe Kesalahan daripada sistem pengecualian.  Di Go, semua kesalahan adalah nilai.  Jenis Kesalahan sudah ditentukan sebelumnya dan merupakan antarmuka.  Antarmuka di Go pada dasarnya adalah kumpulan metode yang bernama, dan semua tipe pengguna lain dapat memenuhi antarmuka jika memiliki metode yang sama.  Tipe Kesalahan adalah antarmuka yang dapat menggambarkan dirinya sebagai string. <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Error() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> }</code> </pre> <br>  Ini memberi insinyur lebih banyak kontrol dan fungsionalitas dalam penanganan kesalahan.  Dengan menambahkan metode Kesalahan yang mengembalikan string dalam modul pengguna apa pun, Anda dapat membuat kesalahan Anda sendiri dan membuatnya, misalnya, menggunakan fungsi Baru di bawah ini, yang berasal dari paket Kesalahan. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> errorString <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { s <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e *errorString)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> es }</code> </pre> <br>  Apa artinya ini dalam praktik?  Di Go, fungsi memungkinkan beberapa nilai balik, jadi jika fungsi Anda mungkin tidak berfungsi, kemungkinan besar akan mengembalikan nilai kesalahan.  Bahasa ini mendorong Anda untuk secara eksplisit memeriksa kesalahan di mana mereka terjadi (sebagai lawan melempar dan menangkap pengecualian), sehingga kode Anda biasanya harus menyertakan tanda centang “if err!  = Nihil. "  Pada awalnya, penanganan kesalahan yang sering ini mungkin tampak monoton.  Namun, kesalahan sebagai nilai memungkinkan Anda menggunakan Kesalahan untuk menyederhanakan penanganan kesalahan.  Misalnya, dalam sistem terdistribusi, Anda dapat dengan mudah menerapkan upaya untuk mencoba lagi kueri dengan membungkus kesalahan. <br><br>  Masalah jaringan akan selalu terjadi dalam sistem, apakah itu mengirim data ke layanan internal lain atau mentransfernya ke alat pihak ketiga.  Contoh paket Net ini menunjukkan bagaimana Anda dapat menggunakan kesalahan sebagai tipe untuk membedakan kesalahan jaringan sementara dari kesalahan permanen.  Tim Economist menggunakan pembungkus kesalahan yang sama untuk membuat percobaan ulang tambahan saat mengirim konten ke API eksternal. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> net <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { error Timeout() <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-comment"><span class="hljs-comment">// Is the error a timeout? Temporary() bool // Is the error temporary? } if nerr, ok := err.(net.Error); ok &amp;&amp; nerr.Temporary() { time.Sleep(1e9) continue } if err != nil { log.Fatal(err) }</span></span></code> </pre> <br>  Go penulis percaya bahwa tidak semua pengecualian luar biasa.  Insinyur lebih mungkin untuk pulih secara cerdas dari kesalahan daripada merusak aplikasi.  Selain itu, penanganan kesalahan Go memungkinkan Anda untuk mengontrol kesalahan dengan lebih baik, yang dapat meningkatkan aspek seperti debugging atau kegunaan kesalahan.  Di dalam Platform Konten, fitur desain Go ini memungkinkan pengembang untuk membuat keputusan berdasarkan informasi tentang kesalahan, yang menyebabkan peningkatan keandalan sistem secara keseluruhan. <br><br>  <b>Konsistensi data</b> <br><br>  Konsistensi data merupakan faktor penting dalam Platform Konten.  Di The Economist, konten adalah fondasi bisnis, dan tujuan Platform Konten adalah untuk memastikan bahwa konten dapat dipublikasikan satu kali dan tersedia di mana-mana.  Karenanya, penting bahwa setiap produk dan konsumen memiliki konsistensi data dengan API Platform Konten.  Produk utamanya menggunakan GraphQL untuk permintaan API, yang membutuhkan skema statis, yang berfungsi sebagai semacam kontrak antara konsumen dan platform.  Konten yang diproses oleh Platform harus konsisten dengan skema ini.  Bahasa statis membantu untuk mengimplementasikan ini dan membuatnya mudah untuk mencapai konsistensi data. <br><br>  <b>Menguji dengan Go</b> <br><br>  Fitur lain yang mempromosikan konsistensi adalah Go test suite.  Waktu kompilasi yang cepat dari Go, dikombinasikan dengan pengujian kelas satu sebagai fitur bahasa, memungkinkan tim untuk menggabungkan metode pengujian yang efektif ke dalam alur kerja desain dan kegagalan yang cepat dalam jalur pipa perakitan.  Alat uji Go membuatnya mudah diatur dan dijalankan.  Menjalankan "uji coba" akan menjalankan semua tes di direktori saat ini, dan perintah uji memiliki beberapa flag yang berguna.  Bendera sampul memberikan laporan cakupan kode terperinci.  Tes bench menjalankan tes benchmark, yang ditunjukkan dengan menjalankan nama fungsi tes dengan kata "Bench" daripada "Test".  Fungsi TestMain menyediakan metode untuk pengaturan tes tambahan, seperti server otentikasi dummy. <br><br>  Selain itu, Go memiliki kemampuan untuk membuat tes tabular dengan struktur anonim dan bertopik dengan antarmuka, meningkatkan cakupan tes.  Meskipun pengujian bukanlah hal baru dalam hal fitur bahasa, Go membuatnya mudah untuk membuat pengujian yang kuat dan dengan mudah mengintegrasikannya ke dalam alur kerja.  Sejak awal, para insinyur The Economist dapat menjalankan tes sebagai bagian dari pipa rakitan tanpa konfigurasi khusus, dan bahkan menambahkan Git Hooks untuk menjalankan tes sebelum memasukkan kode ke Github. <br><br>  Namun, proyek ini bukannya tanpa upaya dalam mencapai konsistensi data.  Masalah utama pertama untuk platform ini adalah mengelola konten dinamis dari backend yang tidak dapat diprediksi.  Platform mengkonsumsi konten dari sistem CMS asli terutama melalui titik akhir JSON, di mana struktur dan tipe data tidak dijamin.  Ini berarti bahwa platform tidak dapat menggunakan paket Go standar untuk menafsirkan json, yang mendukung deserialisasi JSON ke dalam struktur, tetapi itu membunyikan alarm jika jenis struct dan input data bidang tidak cocok. <br><br>  Untuk mengatasi masalah ini, diperlukan metode khusus untuk memetakan bagian server ke format standar.  Setelah beberapa kali pengulangan dari pendekatan yang dipilih, tim memperkenalkan proses deserialisasi sendiri.  Meskipun pendekatan ini sedikit mirip dengan pengerjaan ulang paket perpustakaan standar, itu memberi insinyur kontrol penuh atas pemrosesan data sumber. <br><br>  <b>Dukungan jaringan</b> <br><br>  Skalabilitas berada di garis depan platform baru, dan ini disediakan oleh perpustakaan Go standar untuk jaringan dan API.  Di Go, Anda dapat dengan cepat mengimplementasikan titik akhir HTTP yang dapat diskalakan tanpa membutuhkan kerangka kerja.  Dalam contoh di bawah ini, paket pustaka standar net / http digunakan untuk mengonfigurasi penangan yang menerima permintaan dan respons penulis.  Saat API Platform Konten pertama kali diterapkan, ia menggunakan kerangka API.  Itu akhirnya digantikan oleh perpustakaan standar, karena tim mengakui bahwa itu memenuhi semua kebutuhan jaringan mereka tanpa kompromi tambahan yang tidak perlu.  Skala penangan HTTP Golang karena setiap permintaan ke penangan dijalankan secara paralel di Goroutine, utas yang ringan tanpa perlu penyesuaian. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { fmt.Fprintf(w, <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { http.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler) log.Fatal(http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":8080"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)) }</code> </pre> <br>  <b>Model konkurensi</b> <br><br>  Model konkurensi Go telah memberikan banyak manfaat dalam meningkatkan kinerja di seluruh platform.  Bekerja dengan data terdistribusi melibatkan rewel dengan jaminan yang dijanjikan kepada konsumen.  Menurut teorema CAP, tidak mungkin untuk memberikan lebih dari dua dari tiga jaminan berikut secara bersamaan: Konsistensi data.  Ketersediaan  Tahan terhadap pemisahan.  Dalam platform Economist, konsistensi pada akhirnya diadopsi, yang berarti bahwa membaca dari sumber data pada akhirnya akan konsisten, dan penundaan moderat dalam semua sumber data mencapai keadaan yang konsisten dapat diterima.  Salah satu cara untuk meminimalkan kesenjangan ini adalah dengan menggunakan Goroutine. <br><br>  Goroutine adalah utas ringan yang dikelola oleh Go runtime untuk mencegahnya kehabisan utas.  Goroutine diizinkan untuk mengoptimalkan tugas asinkron di platform.  Sebagai contoh, salah satu repositori data Platform adalah Elasticsearch.  Ketika konten diperbarui pada sistem, konten yang mereferensikan item ini di Elasticsearch diperbarui dan diindeks ulang.  Berkat implementasi Goroutine, waktu pemrosesan berkurang, yang memastikan konsistensi elemen yang cepat.  Contoh ini menunjukkan bagaimana item yang cocok untuk diproses ulang diproses ulang di Goroutine. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reprocess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(searchResult *http.Response)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { responses := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]response, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(searchResult.Hits)) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wg sync.WaitGroup wg.Add(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(responses)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, hit := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> searchResult.Hits { wg.Add(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, item elastic.SearchHit)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> wg.Done() code, err := reprocessItem(item) responses[i].code = code responses[i].err = err }(i, *hit) } wg.Wait <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> http.StatusOK, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Merancang sistem lebih dari sekadar pemrograman.  Insinyur perlu memahami alat mana dan di mana saat yang tepat.  Sementara Go adalah alat yang ampuh untuk sebagian besar kebutuhan Platform Konten The Economist, beberapa keterbatasan memerlukan solusi lain. <br><br>  <b>Manajemen ketergantungan</b> <br><br>  Ketika Go baru saja dirilis, itu tidak memiliki sistem manajemen ketergantungan.  Di dalam komunitas, beberapa alat telah dikembangkan untuk memenuhi kebutuhan ini.  The Economist menggunakan submission Git, yang masuk akal pada saat komunitas secara aktif mempromosikan alat manajemen ketergantungan standar.  Saat ini, meskipun masyarakat sudah jauh lebih dekat dengan pendekatan yang koheren untuk pengelolaan ketergantungan, itu tidak ada di sana.  Pendekatan The Economist menggunakan submodules tidak menimbulkan masalah serius, tetapi sulit bagi pengembang Go lainnya, dan ini harus diperhitungkan ketika beralih ke Go. <br><br>  Ada juga persyaratan platform yang fitur atau desain Go bukan solusi terbaik.  Karena platform menambahkan dukungan untuk pemrosesan audio, alat Go untuk mengekstraksi metadata terbatas pada saat itu, sehingga tim memilih Exiftool Python sebagai gantinya.  Layanan platform bekerja dalam wadah buruh pelabuhan, yang memungkinkan menginstal Exiftool dan meluncurkannya dari aplikasi Go. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runExif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { cmdOut, err := exec.Command(<span class="hljs-string"><span class="hljs-string">"exiftool"</span></span>, args...).Output() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cmdOut, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Skenario umum lainnya untuk platform adalah penerimaan kode HTML yang tidak berfungsi dari sistem CMS sumber, analisis kode HTML untuk kebenaran dan sanitasi kode HTML.  Awalnya, Go digunakan untuk proses ini, tetapi karena pustaka HTML standar Go membutuhkan HTML yang benar, Go memerlukan sejumlah besar kode khusus untuk mem-parsing HTML sebelum memproses.  Kode ini dengan cepat menjadi rapuh dan melewatkan kasus batas, sehingga solusi baru diimplementasikan dalam Javascript.  Javascript telah memberikan fleksibilitas dan kemampuan beradaptasi yang besar untuk mengontrol proses pemeriksaan dan sanitasi HTML. <br><br>  Javascript juga telah menjadi pilihan umum untuk memfilter dan mengarahkan acara di Platform.  Acara disaring menggunakan AWS Lambdas, yang merupakan fungsi ringan yang hanya berjalan saat dipanggil.  Satu kasus penggunaan adalah memfilter peristiwa pada pita yang berbeda, seperti cepat dan lambat.  Pemfilteran ini didasarkan pada bidang metadata tunggal di objek JSON shell penangan kejadian.  Implementasi penyaringan menggunakan paket pointer Javascript JSON untuk menangkap elemen dalam objek JSON.  Pendekatan ini jauh lebih efisien dibandingkan dengan benar-benar membongkar JSON yang dibutuhkan Go.  Sementara fungsionalitas jenis ini dapat dicapai dengan Go, menggunakan Javascript lebih mudah bagi para insinyur dan memberikan lambda yang lebih sederhana. <br><br>  <b>Go Retrospektif</b> <br><br>  Setelah menerapkan Platform Kontak dan mendukungnya dalam produksi, jika saya akan melakukan retrospeksi Go dan Platform Konten, umpan balik saya adalah sebagai berikut: <br><br>  Apa yang sudah bagus? <br><br><ul><li>  Elemen desain bahasa utama untuk sistem terdistribusi. </li><li>  Model konkurensi yang relatif mudah diterapkan. </li><li>  Pengkodean yang bagus dan komunitas yang menyenangkan. </li></ul><br>  Apa yang bisa diperbaiki? <br><br><ul><li>  Kemajuan lebih lanjut dalam standar kontrol versi dan penjual. </li><li>  Kedewasaan tidak cukup di beberapa area. </li><li>  Detail untuk kasus pengguna tertentu. </li></ul><br>  Secara umum, itu adalah pengalaman positif, dan Go adalah salah satu elemen paling penting yang memungkinkan untuk menskala Platform Konten.  Go tidak akan selalu menjadi alat yang cocok, dan ini normal.  The Economist memiliki platform polyglot dan menggunakan berbagai bahasa yang masuk akal.  Go mungkin tidak akan pernah menjadi pilihan terbaik ketika Anda perlu mengacaukan objek teks dan konten dinamis, jadi Javascript masih ada di kotak alat.  Namun, kekuatan Go adalah fondasi yang memungkinkan sistem untuk tumbuh dan berkembang. <br>  Saat mempertimbangkan apakah Go tepat untuk Anda, pertimbangkan masalah utama desain sistem: <br><br><ul><li>  Apa tugas sistem Anda? </li><li>  Apa jaminan yang Anda berikan kepada konsumen Anda? </li><li>  Arsitektur dan pola apa yang sesuai untuk sistem Anda? </li><li>  Bagaimana seharusnya skala sistem Anda? </li></ul><br>  Jika Anda mengembangkan sistem yang mengatasi tantangan data terdistribusi, alur kerja asinkron, dan kinerja tinggi dan skalabilitas, saya sarankan Anda mempertimbangkan Go dan kemampuannya untuk mempercepat tujuan sistem Anda. <br><br>  Teman-teman, kami menunggu komentar Anda dan mengundang semua orang ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">webinar terbuka</a> , yang akan diadakan pada tanggal 16 oleh pengembang senior di Yandex dan, secara kombinasi, guru kami adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dmitry Smal</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id451760/">https://habr.com/ru/post/id451760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id451748/index.html">Memantau Status SSD di Array Qsan</a></li>
<li><a href="../id451750/index.html">Buku "Elasticsearch, Kibana, Logstash, dan Mesin Pencari Generasi Selanjutnya"</a></li>
<li><a href="../id451752/index.html">Peringatan 30 tahun ketidakamanan yang merajalela</a></li>
<li><a href="../id451754/index.html">Bagaimana Kami Menemukan Ekspresi Lambda di IntelliJ IDEA</a></li>
<li><a href="../id451758/index.html">Uplink Tambahan dalam Arsitektur Logika Sistem Intel C620</a></li>
<li><a href="../id451766/index.html">Heisenbug 2019 Piter: apa yang akan terjadi dalam siaran gratis, dan apa yang hanya ada di acara itu</a></li>
<li><a href="../id451768/index.html">Meningkatkan kerja Wi-Fi. Prinsip umum dan hal-hal berguna</a></li>
<li><a href="../id451770/index.html">Veeam Backup & Replication: Kiat Berguna untuk Membuat Cadangan dan Replika Dapat Digunakan</a></li>
<li><a href="../id451772/index.html">Apa yang istimewa tentang Cloudera dan cara memasaknya</a></li>
<li><a href="../id451776/index.html">Bagaimana cara memprogram mesin role-playing di Google Sheets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>