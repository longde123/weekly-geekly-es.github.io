<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§® üòó ü§ûüèæ MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 2 üö¥üèº üê¨ üï∫üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427087/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vortr√§ge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gef√§hrden, und Sicherheitstechniken, die auf j√ºngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen geh√∂ren Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: ‚ÄûEinf√ºhrung: Bedrohungsmodelle‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: ‚ÄûKontrolle von Hackerangriffen‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: ‚ÄûPuffer√ºberl√§ufe: Exploits und Schutz‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: ‚ÄûTrennung von Privilegien‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: ‚ÄûWoher kommen Sicherheitssysteme?‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: ‚ÄûChancen‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: ‚ÄûNative Client Sandbox‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 8: ‚ÄûNetzwerksicherheitsmodell‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 9: ‚ÄûSicherheit von Webanwendungen‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 10: ‚ÄûSymbolische Ausf√ºhrung‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 11: ‚ÄûUr / Web-Programmiersprache‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 12: Netzwerksicherheit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  <b>Student:</b> Vielleicht haben Sie immer noch ein Interessenkonfliktproblem, weil Sie 32 Bit f√ºr Peer-Adressen verwenden k√∂nnten und f√ºr jeden von ihnen viele Ports haben.  Sie haben wahrscheinlich einen Konflikt von Sequenznummern all dieser Verbindungen, die Sie erhalten? <br><br>  <b>Professor: Es</b> stellt sich heraus, dass diese Sequenznummern spezifisch f√ºr die IP-Adresse und die Portnummer des Quell- / Zielpaars sind.  Wenn es sich also um unterschiedliche Ports handelt, st√∂ren sie sich √ºberhaupt nicht.  Insbesondere haben Ports niedrigere Seriennummern. <br><br><img src="https://habrastorage.org/webt/ln/rp/sm/lnrpsmdw6g-ionqcpock0lqzf-s.jpeg"><br><br>  <b>Student:</b> Wenn die Seriennummern global sind, kann der Angreifer dann die Verbindung zwischen anderen Clients herstellen? <br><br>  <b>Professor:</b> Ja, das ist ein guter Punkt.  Wenn der Server die Seriennummer beispielsweise f√ºr jede Verbindung um 64 KB erh√∂ht, stellen Sie eine Verbindung zum Server her, und dann stellen weitere 5 Personen eine Verbindung zum Server her. Hier k√∂nnen Sie einen Angriff organisieren.  Bis zu einem gewissen Grad haben Sie Recht, es ist ein wenig m√ºhsam.  Andererseits k√∂nnten Sie es wahrscheinlich so machen, dass ein Paket aus der letzten Zeile von S-&gt; A unmittelbar vor diesem Paket in der ersten Zeile von C-&gt; S geliefert wird.  Wenn Sie Ihre Pakete nacheinander senden, besteht eine gute Chance, dass sie auch einzeln auf dem Server eintreffen. <br><br>  Der Server empf√§ngt S-&gt; A und antwortet mit dieser Sequenznummer (SNs).  Es unterscheidet sich von den (SNs) in der zweiten Zeile, jedoch mit der unmittelbar darauf folgenden Seriennummer.  Und dann wissen Sie genau, welche Sequenznummer (SNs) im dritten Paket Ihrer Sequenz enthalten sein soll. <br>  Daher denke ich, dass dies keine sehr zuverl√§ssige M√∂glichkeit ist, eine Verbindung zum Server herzustellen, sondern auf Annahmen basiert.  Wenn Sie Ihre Pakete jedoch sorgf√§ltig zusammenstellen, k√∂nnen Sie die Reihenfolge leicht erraten.  Oder vielleicht versuchst du es mehrmals und hast Gl√ºck. <br><br>  <b>Student:</b> Selbst wenn Zahlen zuf√§llig generiert werden, m√ºssen Sie eine der 4 Milliarden m√∂glichen Zahlen erraten.  Das ist nicht zu viel, oder?  Ich denke, dass Sie innerhalb eines Jahres wahrscheinlich in dieses Netzwerk einbrechen k√∂nnen. <br><br>  <b>Professor:</b> Ja, Sie haben absolut Recht.  Sie sollten sich in Bezug auf die Sicherheit nicht zu sehr auf TCP verlassen.  Weil Sie Recht haben, sind es nur 4 Milliarden Vermutungen.  Und Sie k√∂nnen wahrscheinlich tags√ºber viele Pakete senden, wenn Sie eine relativ schnelle Verbindung haben. <br><br>  Hier haben wir also eine Art interessantes Argument √ºber die Unzuverl√§ssigkeit von TCP, da wir nur 32 Bit haben.  Wir k√∂nnen ihn in keiner Weise sichern.  Ich denke jedoch, dass viele Anwendungen, die sich ausreichend auf dieses Protokoll st√ºtzen, √ºberhaupt nicht an Sicherheit denken, und dies wird wirklich zu einem Problem. <br><br>  Aber du hast absolut recht.  In der Praxis m√∂chten Sie zus√§tzlich eine Art von Verschl√ºsselung verwenden, um ernsthaftere Garantien daf√ºr zu erhalten, dass niemand Ihre Daten gef√§lscht hat, da Sie Verschl√ºsselungsschl√ºssel verwenden, die l√§nger als 32 Bit sind.  In den meisten F√§llen verhindert dies immer noch eine Manipulation der TCP-Verbindung. <br><br>  Mal sehen, warum es schlecht ist, wenn Leute TCP-Verbindungen von beliebigen Adressen f√§lschen k√∂nnen. <br><br>  Einer der Gr√ºnde, warum dies schlecht ist, besteht darin, dass es die Autorisierung basierend auf der IP-Adresse beeinflussen kann, wenn der Server √ºberpr√ºft, von welcher Adresse die Anforderung stammt.  Wenn ein Server basierend auf der IP-Adresse entscheidet, ob die Verbindung zugelassen oder verweigert wird, kann dies m√∂glicherweise ein Problem f√ºr einen Angreifer sein, der die Verbindung von einer beliebigen Quelladresse aus gef√§lscht hat. <br><br>  Ein Beispiel, bei dem dies ein Problem war, heute ist dieses Problem im Grunde genommen gel√∂st, die Verwendung einer Familie von r-Befehlen, wie z. B. rlogin.  Fr√ºher konnte man so etwas wie rlogin f√ºr einen Computer beispielsweise unter athena.dialup.mit.edu ausf√ºhren.  Und wenn Ihre Verbindung vom MIT-Host kommt, ist dieser Befehl rlogin erfolgreich, wenn Sie sagen: "Ja, ich bin Alices Benutzer auf diesem Computer. Lassen Sie mich als Alices Benutzer bei einem anderen Computer anmelden."  Und dieser Vorgang ist zul√§ssig, da alle Computer im mit.edu-Netzwerk vertrauensw√ºrdig sind, um solche Anweisungen abzugeben. <br><br>  Ich muss sagen, dass die Einwahl dieses Problem nie hatte.  Diese Verbindung verwendete von Anfang an Cerberus.  Aber andere Systeme hatten nat√ºrlich solche Probleme.  Dies ist ein Beispiel f√ºr die Verwendung einer IP-Adresse in einem Verbindungsauthentifizierungsmechanismus, wenn das System pr√ºft, ob der Client, der den Server anruft, vertrauensw√ºrdig ist.  Was fr√ºher ein Problem war, ist also kein Problem mehr.  Aber sich auf IP zu verlassen, scheint immer noch ein schlechter Plan zu sein. <br><br><img src="https://habrastorage.org/webt/xp/zi/_1/xpzi_1guskiwnqi-52aokxflicq.jpeg"><br><br>  Jetzt wird rlogin nicht mehr verwendet. Es wurde k√ºrzlich durch die sichere SSH-Shell ersetzt, die ein hervorragendes Netzwerkschichtprotokoll darstellt.  Andererseits gibt es viele andere Beispiele f√ºr Protokolle, die auf einer IP-Adress-basierten Autorisierung beruhen.  Eines davon ist SMTP.  Wenn Sie E-Mails senden, verwenden Sie SMTP, um mit einem Mailserver zu kommunizieren und Nachrichten zu senden.  Um Spam zu vermeiden, akzeptieren viele SMTP-Server nur eingehende Nachrichten von einer bestimmten Quell-IP-Adresse.  Beispielsweise akzeptiert der Comcast-Mailserver nur E-Mails von Comcast-IP-Adressen.  Gleiches gilt f√ºr MIT-Mailserver - sie akzeptieren nur E-Mails von MIT-IP-Adressen.  Wir hatten jedoch mindestens einen Server, der mit der IP-Authentifizierung nicht ordnungsgem√§√ü funktionierte. <br><br>  Alles hier ist nicht so schlimm.  Im schlimmsten Fall senden Sie Spam √ºber den Mailserver.  Dies ist wahrscheinlich der Grund, warum sie immer noch rlogin verwenden, w√§hrend die Dinge, mit denen Sie sich bei einem beliebigen Konto anmelden k√∂nnen, die IP-basierte Authentifizierung nicht mehr verwenden. <br><br>  Warum ist ein solcher Authentifizierungsmechanismus ein schlechter Plan?  Angenommen, ein Server hat rlogin verwendet.  Was w√ºrden Sie tun, um anzugreifen?  Was k√∂nnte passieren? <br><br>  <b>Student:</b> Ein Angreifer kann einfach in Ihren Computer eindringen, einen Benutzer vort√§uschen, der mit Ihrem Benutzernamen in das Netzwerk eintreten wird, und Zugriff auf das Netzwerk erhalten. <br><br>  <b>Professor:</b> Ja, im Grunde √ºbernimmt ein Angreifer einen Computer.  Es synthetisiert Daten, die wie ein g√ºltiger Satz von rlogin-Befehlen aussehen, die lauten: "Melden Sie sich als dieser Benutzer an und f√ºhren Sie diesen Befehl in meiner Unix-Shell aus." <br><br>  Sie synthetisieren diese Datendaten (SNc + 1), mounten den gesamten Angriff und senden diese Daten, als ob ein legitimer Benutzer mit dem rlogin-Client interagiert h√§tte, und k√∂nnen dann fortfahren. <br><br><img src="https://habrastorage.org/webt/8v/b-/ws/8vb-ws9vmaat0zscptpwoh8-cze.jpeg"><br><br>  Dies ist einer der Gr√ºnde, warum Sie nicht m√∂chten, dass Ihre TCP-Sequenznummern erraten werden.  Ein weiteres Problem sind diese Reset-Angriffe.  Genauso wie wir ein SYN-Paket senden k√∂nnten, k√∂nnen wir ein Reset-Paket auf die gleiche Weise senden, wenn wir die Seriennummer einer Person kennen. <br><br>  Wir haben kurz einen legalen Client erw√§hnt, der ein gef√§lschtes Verbindungsr√ºcksetzpaket sendet, das ein Angreifer eingerichtet hat.  Ein Angreifer k√∂nnte genauso gut versuchen, Pakete f√ºr eine vorhandene Verbindung zu verwerfen, wenn er irgendwie wei√ü, dass sich Ihre Sequenznummer in dieser Verbindung befindet.  In der Tat ist nicht klar, wie gro√ü dieses Problem ist. <br><br>  Auf einer bestimmten Ebene sollten Sie davon ausgehen, dass alle Ihre TCP-Verbindungen in jedem Fall unterbrochen werden k√∂nnen und dass Ihr Netzwerk zu keinem Zeitpunkt zuverl√§ssig ist.  Daher sollten Sie m√∂glicherweise eine Unterbrechung erwarten. <br><br>  In dem Fall, in dem die Router miteinander "sprechen", ist diese Annahme besonders kritisch.  Wenn Sie viele Router haben, die √ºber einige Routing-Protokolle miteinander kommunizieren, bestehen einige physische Verbindungen zwischen ihnen.  Zus√§tzlich zu diesen physischen Verbindungen kommunizieren sie √ºber ein Netzwerkprotokoll, das √ºber TCP funktioniert.  Tats√§chlich wird in jeder dieser physischen Verbindungen, √ºber die die Router Routing-Informationen austauschen, eine TCP-Sitzung gestartet.  Hier wird das BGP-Protokoll verwendet, √ºber das wir sp√§ter sprechen werden. <br><br>  Dieses BGP-Protokoll verwendet die Tatsache, dass, wenn die TCP-Verbindung aktiv ist, auch die physische Verbindung aktiv ist.  Wenn eine TCP-Verbindung unterbrochen wird, glaubt der Router, dass die Verbindung unterbrochen ist, und beginnt, alle Routing-Tabellen erneut zu z√§hlen. <br><br><img src="https://habrastorage.org/webt/v6/wj/cc/v6wjccjolqvci5pvynpn_uui-pm.jpeg"><br><br>  Wenn der Gegner eine Art DoS-Denial-of-Service-Angriff arrangieren m√∂chte, kann er daher versuchen, die Seriennummern dieser Router zu erraten und diese Sitzungen abzubrechen.  Wenn die TCP-Sitzung zwischen den beiden Routern deaktiviert ist, betrachten beide Router diese Verbindung als unterbrochen und sollten alle Routing-Tabellen erneut auflisten, wodurch sich die Routen √§ndern.  Danach kann der Angreifer eine andere Verbindung zur√ºcksetzen und so weiter. <br><br>  Dies ist also ein etwas alarmierender Angriff, und zwar nicht, weil er das Geheimnis eines anderen verletzt und so weiter, zumindest nicht direkt, sondern weil er anderen Benutzern des Systems wirklich viele Zugriffsprobleme verursacht. <br><br>  <b>Student:</b> Wenn Sie ein Angreifer sind und einen gezielten Angriff gegen einen bestimmten Benutzer organisieren m√∂chten, k√∂nnen Sie dann weiterhin Anfragen senden, um im Namen seiner IP-Adresse eine Verbindung zum Server herzustellen, und ihn zwingen, die Verbindung zum Server zur√ºckzusetzen? <br><br>  <b>Professor:</b> Angenommen, ich verwende Google Mail und Sie m√∂chten verhindern, dass ich Informationen von Google Mail erhalte. Senden Sie also einfach Pakete an meinen Computer und geben Sie vor, von einem Google Mail-Server zu stammen.  In diesem Fall m√ºssen Sie die richtigen Quell- und Zielportnummern erraten. <br><br>  Die Zielportnummer ist wahrscheinlich 443, da ich HTTPS verwende.  Aber die Quellportnummer wird eine zuf√§llige 16-Bit-Sache sein.  Au√üerdem variieren die Seriennummern.  Wenn Sie also nicht die Sequenznummer erraten, die sich in meinem TCP-Fenster befindet und die mehrere zehn Kilobyte betr√§gt, werden Sie keinen Erfolg haben. <br><br>  Man muss also eine ganze Menge Dinge erraten.  Hier gibt es keinen Oracle-Zugriff.  Sie k√∂nnen den Server nicht einfach nach der Seriennummer dieses Mannes fragen.  Dies ist der Grund, warum dies auch nicht funktioniert. <br><br>  Viele dieser Probleme wurden behoben, einschlie√ülich dieser RST-basierten Sache, insbesondere f√ºr BGP-Router.  Es gab tats√§chlich zwei lustige Korrekturen.  Eines zeigt wirklich, wie Sie vorhandene Dinge ausnutzen oder zur Behebung bestimmter Probleme verwenden k√∂nnen.  Es verwendet die Eigenschaft, dass diese Router nur miteinander und nicht mit anderen Personen im Netzwerk kommunizieren.  Wenn das Paket nicht von einem Router am anderen Ende der Verbindung ankommt, wird dieses Paket verworfen. <br><br>  Die erfolgreiche Implementierung der Entwickler dieser Protokolle ist ein wunderbarer Bereich im Paket, der als "Lebensdauer" oder TTL bezeichnet wird.  Dies ist ein 8-Bit-Feld, das von jedem Router dekrementiert wird, um sicherzustellen, dass Pakete nicht in einer Endlosschleife enden.  Der maximale TTL-Wert betr√§gt 255 und nimmt weiter ab. <br><br>  Was mache ich mit diesen intelligenten Protokollen?  Sie verwerfen jedes Paket mit einem TTL-Wert ungleich 255. Wenn das Paket den Wert 255 hat, kann es nur von einem Router auf der anderen Seite dieser Verbindung stammen.  Wenn der Gegner versucht, ein anderes Paket in die vorhandene BGP-Verbindung einzuspeisen, hat er einen TTL-Wert von weniger als 255, da dieser Wert von anderen Routern entlang des Routing-Pfads, einschlie√ülich dieses Routers, verringert wird.  Daher wird dieses Paket vom Empf√§nger einfach abgelehnt. <br><br>  Dies ist also ein Beispiel f√ºr eine clevere Kombination abw√§rtskompatibler Techniken, die dieses sehr spezifische Problem l√∂sen. <br><br><img src="https://habrastorage.org/webt/k4/ix/mo/k4ixmopv2goqdgdhy48-lh1wol4.jpeg"><br><br>  <b>Student:</b> Sendet der untere rechte Router nicht etwas mit einer TTL von 255? <br><br>  <b>Professor:</b> Dies ist ein physischer Router.  Und er wei√ü, dass dies separate Verbindungen sind, also schaut er sich sowohl TTL als auch die Herkunft des Pakets an.  Wenn das Paket also vom oberen linken Router stammt, akzeptiert es es nicht f√ºr eine TCP-Verbindung zwischen ihm und dem oberen rechten Router. <br><br>  Zum gr√∂√üten Teil vertrauen diese Router ihren unmittelbaren Nachbarn, und dieser Prozess kann mithilfe des Auto-Pan-Mehrweg-Routing-Mechanismus gesteuert werden. <br><br>  Andere Korrekturen f√ºr BGP bestehen darin, eine Art Authentifizierungsheader zu implementieren, einschlie√ülich eines MD5-Authentifizierungsheaders.  In Wirklichkeit konzentrierten sich die Entwickler jedoch auf diese spezielle Anwendung, f√ºr die ein Reset-Angriff besonders wichtig ist. <br><br>  Dieses Problem besteht bis heute fort.  Wenn es eine langfristige Verbindung gibt und ich sie unterbrechen m√∂chte, muss ich nur eine gro√üe Anzahl von RST-Paketen senden, ungef√§hr Hunderttausende, aber wahrscheinlich nicht 4 Milliarden.  Da Server tats√§chlich etwas anf√§llig f√ºr die Sequenznummer sind, die sie zum Zur√ºcksetzen akzeptieren. <br><br>  Es kann sich um ein beliebiges Paket in einem bestimmten Fenster handeln.  In diesem Fall kann der Angreifer diese Verbindung ohne gro√üen Aufwand trennen.  Dies ist immer noch ein Problem, f√ºr das es keine wirklich gute L√∂sung gibt. <br><br>  Und das Letzte, was aufgrund der Vorhersagbarkeit von Sequenznummern passieren kann, ist das Einf√ºgen von Daten in vorhandene Verbindungen.  Angenommen, wir haben ein hypothetisches Protokoll √§hnlich wie rlogin, das keine IP-basierte Authentifizierung durchf√ºhrt. Sie m√ºssen also Ihr Kennwort eingeben, um sich anzumelden. <br><br>  Das Problem ist, dass sobald Sie Ihr Passwort eingeben, Ihre TCP-Verbindung m√∂glicherweise einfach hergestellt wird und beliebige Daten akzeptieren kann.  Der Angreifer muss also nur warten, bis sich einer von Ihnen durch Eingabe Ihres Passworts am Computer anmeldet. <br><br>  Der Angreifer wei√ü nicht, wie das Kennwort lautet. Sobald Sie jedoch eine TCP-Verbindung herstellen, versucht er sofort, Ihre Seriennummer zu erraten und einige Daten in Ihre vorhandene Verbindung einzugeben.  Wenn ich also Ihre Seriennummer richtig erraten kann, kann ich so tun, als w√§re ich es nicht, aber Sie haben einen Befehl eingegeben, nachdem Sie sich korrekt mit einem Passwort authentifiziert haben. <br><br><img src="https://habrastorage.org/webt/ao/0n/xw/ao0nxw7zfmyfhjhmb56s6ht7l7s.jpeg"><br><br>  All dies zeigt, warum Sie sich im Sinne der Sicherheit wirklich nicht auf diese 32-Bit-Sequenznummern verlassen m√∂chten.  Aber lassen Sie uns sehen, was moderne TCP-Stacks tats√§chlich tun, um dieses Problem zu mindern.  Ein Ansatz f√ºr das Problem, das wir in den n√§chsten beiden Vorlesungen behandeln werden, besteht darin, ein gewisses Ma√ü an Sicherheit auf Anwendungsebene zu implementieren.  Auf dieser Ebene werden wir Kryptografie verwenden, um Nachrichten ohne gro√üen TCP-Aufwand zu authentifizieren, zu verschl√ºsseln, zu signieren und zu verifizieren. <br><br>  Einige der vorhandenen Anwendungen helfen auch bei der L√∂sung von Sicherheitsproblemen oder erschweren es einem Angreifer zumindest, diese Probleme auszunutzen.  Dies wird heute beispielsweise unter Linux und Windows praktiziert, wobei f√ºr jedes Quell- / Zielpaar unterschiedliche Anfangssequenznummern beibehalten werden. <br><br>  Daher berechnen die meisten TCP-SYN-Implementierungen diese anf√§ngliche ISN-Sequenznummer immer noch auf die gleiche Weise wie zuvor.  Dies ist also ein alter ISN-Stil.  Und um tats√§chlich eine Seriennummer f√ºr eine bestimmte Verbindung zu generieren, f√ºgen wir dieser ISN im alten Stil einen zuf√§lligen 32-Bit-Offset hinzu.  Das hei√üt, wir f√ºgen eine Funktion hinzu - so etwas wie eine Hash-Funktion oder SHA-1 oder etwas Besseres. <br><br><img src="https://habrastorage.org/webt/lm/wp/fm/lmwpfmcij_lsb9m2hggzeic9duy.jpeg"><br><br>  Diese Funktion umfasst die Quell-IP-Adresse, die Quellportnummer, die Ziel-IP-Adresse, die Zielportnummer und einen geheimen Schl√ºssel, den nur der Server kennt.  Auf diese Weise bieten wir f√ºr eine bestimmte Verbindung eine gute Gelegenheit, die IP-Adresse und den Port f√ºr das Quell- / Zielpaar zu bestimmen und dabei alle guten Eigenschaften dieses Algorithmus zur Zuweisung von Sequenznummern im alten Stil beizubehalten. <br><br>  Wenn Sie jedoch Verbindungen von verschiedenen Quellen- / Zielgruppen haben, k√∂nnen Sie den genauen Wert der Seriennummer einer anderen Gruppe von Verbindungen nicht ermitteln.  Tats√§chlich m√ºssen Sie diesen Schl√ºssel erraten, um diesen Wert zu berechnen. <br><br>  Ich hoffe, dass der Kernel des Server-Betriebssystems diesen Schl√ºssel irgendwo in seinem Speicher speichert und ihn niemandem gibt.  Auf diese Weise l√∂sen die meisten TCP-Stapel heute dieses spezielle Problem im Bereich der √ºblichen 32-Bit-Sequenznummern.  Das ist nicht zu gro√ü, aber es funktioniert. <br><br>  <b>Student:</b> K√∂nnten Sie das noch einmal wiederholen?  √úber die Einzigartigkeit des Schl√ºssels ... <br><br>  <b>Professor:</b> Wenn meine Maschine hochf√§hrt oder wenn eine Maschine hochf√§hrt, wird ein zuf√§lliger Schl√ºssel generiert.  Jedes Mal, wenn Sie es neu laden, wird ein neuer Schl√ºssel generiert.  Dies bedeutet, dass sich die Seriennummern eines bestimmten Quelle / Ziel-Paares jedes Mal mit derselben Versatzfrequenz √§ndern.  Somit sind f√ºr ein gegebenes Quell / Ziel-Paar die Funktionsparameter festgelegt.  Sie folgen also der Sequenz, wenn sich die Zahlen gem√§√ü Ihren anf√§nglichen Sequenznummern f√ºr neue Verbindungen entwickeln und sich gem√§√ü einem bestimmten Algorithmus √§ndern.  Somit wird ein Schutz gegen das Einspeisen alter Pakete von fr√ºheren Verbindungen in neue Verbindungen sowie ein Schutz gegen eine Neuzuweisung von Paketen bereitgestellt. <br><br>  Das einzige, wof√ºr wir diese Seriennummer des alten Beispiels ben√∂tigen, ist die Wahl des Algorithmus, um Probleme mit diesen doppelten Paketen zu vermeiden.  Fr√ºher haben wir ber√ºcksichtigt, dass Sie, wenn Sie eine Seriennummer f√ºr eine Verbindung A: A -&gt; S: SYN (...) erhalten, danach eine Schlussfolgerung √ºber die Seriennummer f√ºr die ACK (SNs) -Verbindung ziehen k√∂nnen. <br><br><img src="https://habrastorage.org/webt/a0/w1/-x/a0w1-xenwugh56twqvkfkgzkai0.jpeg"><br><br>    ,         32-   ,     F.  ,         ,      . <br><br> <b>:</b>       ? <br><br> <b>:</b>     ,      .      F,    ,    F  ,   ,   ,       . <br><br> <b>:</b>      ,        ‚Ä¶ <br><br> <b>:</b>  ,     F  -    -,     .            -,   ,         .  , ,  ,   ,        .       ,     F     . <br><br> ,           TCP,      .          ,    ,   -  . <br><br>   ,        .   ,   TCP    ,       DNS,        .    ,  DNS   UDP ‚Äì   . UDP ‚Äî     ,      ,     .  UDP         .  ,    ,       ,        .     ,              ,       .         DNS-.       DNS? <br><br><img src="https://habrastorage.org/webt/zg/um/eo/zgumeoz-kafodeqfjnjyhkjotjs.jpeg"><br><br> ,   DNS-  C: C53 -&gt; S53     mit.edu,        53. <br><br>      S: S53 -&gt; C53       IP-,      ‚Äì  . <br><br>    ,         ,  ,     ,      .   ,      mit.edu,         . <br><br>   ,  DNS-   .     IP-,       ,    .        IP-  mit.edu  IP-.        ,     ,   ,      ,       .      ,                . <br><br><img src="https://habrastorage.org/webt/n0/f3/6e/n0f36e0r8uoipzszlz4mdtywwcm.jpeg"><br><br>   ,      ,   .           IP-. ,   ,   DNS-  .  ,       ,          IP- mit.edu. <br><br> <b>:</b>            ,    ,    ? <br><br> <b>:</b>   ,   . ,    ,    .       DNS-,    ,       .    2  .  ‚Äî    ,   16  .           ,    16 .      ID,    16 ,      . <br><br>  ,     ,        32  . ,  ,    ,          ,        . <br><br><img src="https://habrastorage.org/webt/py/ca/my/pycamyquozaz7jj41b01zovow7q.jpeg"><br><br>  ,    ,         . <br><br>  ,         DNS    DNS   .  ,          ,  DNS     . ,  DNS SEC,       .  ,         ,  ,   DNS-     .    ,  ,        . <br><br>           origin.  DNS    ,       IP-,  : ‚Äû,     ‚Äú.  ,     ,   ,     ,     ,     ,    .      ,        ,        ? <br><br>  ,    ‚Äì    DNS- ,     . , ,   .    -,    DNS-,    .   ,    DNS SEC,   ,         ,    DNS-   .  DNS-     , ,     ,      ‚Äì     ,      . <br><br>  DNS SEC       ,   NSEC.   ,     . , NSEC  ,     foo.mit.edu,         goo.mit.edu,          ,    . <br><br><img src="https://habrastorage.org/webt/vy/w6/a1/vyw6a1qrruintd6iwnsg8exluzs.jpeg"><br><br> ,    ,      ,    ,        ,       ,         ‚Äû,     ‚Äú. <br><br>         .       ,    foo.mit.edu -&gt; goo.mit.edu ‚Äî &gt;‚Ä¶.  : ¬ª ,    ,       gooa.mit.edu".    , ,         . <br><br>          ,       DNS          .        NSEC3,       ‚Äì -  , -  . <br><br> 52:00  <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 12: ¬´ ¬ª,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BZTWXl9QNK8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br>  Vielen Dank f√ºr Ihren Aufenthalt bei uns.  Gef√§llt dir unser Artikel?  M√∂chten Sie weitere interessante Materialien sehen?  Unterst√ºtzen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% f√ºr Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir f√ºr Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit √ºber VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s bis Dezember kostenlos,</b> wenn Sie f√ºr einen Zeitraum von sechs Monaten bezahlen, k√∂nnen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> bestellen. <br><br>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgeb√§udes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427087/">https://habr.com/ru/post/de427087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427069/index.html">Lokales NPM-Repository in 5 Minuten mit seinen Paketen und dem Caching</a></li>
<li><a href="../de427075/index.html">Die Geschichte einer Entwicklung</a></li>
<li><a href="../de427077/index.html">Laplace-Unsch√§rfe - Ist es m√∂glich, Laplace anstelle von Gau√ü zu blubbern, wie oft ist es schneller und ist es den Verlust von 1/32 Genauigkeit wert?</a></li>
<li><a href="../de427079/index.html">NetApp Insight 2018</a></li>
<li><a href="../de427081/index.html">Kriterien des menschlichen Geistes aus der Sicht eines Programmierers</a></li>
<li><a href="../de427091/index.html">Numerische √úberpr√ºfung der abc-Hypothese (ja, diese)</a></li>
<li><a href="../de427093/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 3</a></li>
<li><a href="../de427095/index.html">Antimon - CAD aus einer Parallelwelt</a></li>
<li><a href="../de427097/index.html">Die mobile App hilft, Depressionen und andere psychische Probleme in den fr√ºhesten Stadien zu erkennen.</a></li>
<li><a href="../de427101/index.html">Google plant, Herstellern von Mobilger√§ten bis zu 40 US-Dollar f√ºr jedes verkaufte Ger√§t in Rechnung zu stellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>