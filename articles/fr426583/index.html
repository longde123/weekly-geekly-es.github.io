<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚≠êÔ∏è üí≠ üöä Dix personnes sur 90 mille sites: comment ne pas devenir fou üë©üèø‚Äçüíº ‚ò∏Ô∏è üîº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, je m'appelle Vera Sivakova. Je travaille avec des partenaires cl√©s de Yandex.Kassi - Je connecte de grands magasins et services, lance des proj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dix personnes sur 90 mille sites: comment ne pas devenir fou</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/426583/"><p>  Salut, je m'appelle Vera Sivakova.  Je travaille avec des partenaires cl√©s de Yandex.Kassi - Je connecte de grands magasins et services, lance des projets et voyage √† des r√©unions √† travers le monde.  En g√©n√©ral, je comprends que tout allait bien. </p><br><p>  Chaque employ√© de Yandex.Money peut changer de profession une fois par an - choisissez un d√©partement et travaillez-y pendant plusieurs jours.  Par cons√©quent, il y a un mois, je me suis assis √† Sapsan et je suis arriv√© √† Saint-P√©tersbourg.  Un service de surveillance y travaille, qui surveille √©galement le bon fonctionnement de 90 000 sites connect√©s √† la billetterie, et nous avons d√©cid√© d'unir nos forces. </p><br><p><img src="https://habrastorage.org/webt/nk/aw/gc/nkawgcaslqu2prxrf2i8t4rp0qy.png"><br>  <em>Comment ne pas devenir fou?</em>  <em>Pas exactement pareil</em> (source: reddit.com) </p><br><p>  C'est une histoire sur le fonctionnement de notre surveillance et sur ce que j'ai appris en quelques jours dans un autre d√©partement. </p><a name="habracut"></a><br><p>  Chaque seconde, environ 600 transactions passent par le service et tout cela doit √™tre surveill√© en temps r√©el - mais √† quelle heure exacte est-il temps de sonner l'alarme si quelque chose se produit?  Nous avons besoin d'un regard syst√©matique sur √† peu pr√®s tout. </p><br><p> Il est recommand√© d'analyser le syst√®me d'un point de vue technique et de ne pas oublier les param√®tres commerciaux - le nombre de paiements, le chiffre d'affaires et d'autres param√®tres. </p><br><p>  Dans les petits syst√®mes, le regard vigilant de l'administrateur principal (le plus souvent le seul) suffit.  Mais quand il y a beaucoup de processus, les employ√©s ne peuvent pas tout surveiller manuellement, donc l'automatisation maximale sera la meilleure strat√©gie.  Rien ne fonctionnera sans connaissances d'experts et efforts d'√©quipe, car la surveillance est une am√©lioration continue, une analyse et la possibilit√© de choisir des param√®tres et des d√©clencheurs comp√©tents.  Ils travailleront en cas d'√©cart par rapport aux conditions donn√©es et signaleront une anomalie. </p><br><p>  Nous distinguons trois niveaux de surveillance, chacun ayant ses propres indicateurs importants - le niveau du syst√®me, le niveau de la logique m√©tier et le niveau des contreparties. </p><br><h2 id="uroven-sistemy">  Niveau syst√®me </h2><br><p>  La chose la plus importante ici est la surveillance permanente des infrastructures.  Parmi les outils que nous utilisons Zabbix pour collecter des donn√©es en temps r√©el - il informe sur le fonctionnement des serveurs et des centres de donn√©es, la qualit√© du r√©seau, la disponibilit√© des composants et des sources de donn√©es. </p><br><p>  La surveillance de l'infrastructure informatique est un travail tr√®s responsable, car l'√©chec √† ce niveau est lourd d'inop√©rabilit√© du syst√®me et de mesures d√©sesp√©r√©es.  Par cons√©quent, il est important non seulement de r√©pondre aux probl√®mes de ¬´clignotement¬ª, mais √©galement d'analyser les tendances et les donn√©es historiques - cela permettra d'avertir en temps opportun des points de d√©faillance potentiels et de pr√©voir la n√©cessit√© d'une mise √† l'√©chelle.  La r√®gle fonctionne pour tous les indicateurs et niveaux de suivi, y compris les entreprises. </p><br><p>  Pour les points critiques, les seuils de d√©clenchement doivent √™tre s√©lectionn√©s ci-dessous.  Par exemple, si le temps de r√©ponse d'un routeur augmente, nous transf√©rons le trafic vers un autre et √©liminons la cause sur le premier.  Cela a d√©clench√© un d√©clencheur d'avertissement, qui vous permet de recevoir des notifications de probl√®mes potentiels tr√®s t√¥t, ce qui donne une r√©serve de temps pour la r√©ponse, la possibilit√© de pr√©voir les changements et d'√©viter les catastrophes. </p><br><h2 id="uroven-biznes-logiki">  Niveau de logique m√©tier </h2><br><p>  Chaque √©quipe d√©finit les processus √† suivre, leur priorit√© et leurs param√®tres personnels.  Par exemple, l'√©quipe Cashier dispose de dizaines de processus commerciaux, tels que le paiement par chaque m√©thode disponible - cartes, portefeuilles √©lectroniques, via des banques et des terminaux en ligne, le commerce mobile, l'envoi de registres, etc.  En tant qu'outil principal de collecte et d'affichage de donn√©es sur le travail de la logique m√©tier, nous utilisons Graphite en collaboration avec Grafana. </p><br><p>  √Ä ce niveau, il est important d'adh√©rer √† une approche syst√©matique et d'essayer de s'√©loigner du binaire et non informatif ¬´fonctionne / ne fonctionne pas¬ª. </p><br><p>  Par exemple, il existe une mesure ¬´Nombre de paiements par carte r√©ussis¬ª.  S'il commence √† clignoter, cela signifie que le flux de travail a diminu√©.  Dans ce cas, vous devez comprendre quelle est exactement la raison et prendre en compte tous les composants impliqu√©s dans ce processus.  En cas de diminution du nombre de transactions, vous pouvez imm√©diatement penser au fait qu'il y a des difficult√©s du c√¥t√© de la banque acqu√©reuse.  Mais les graphiques montrent qu'avec la disponibilit√© des banques, tout va bien.  Ensuite, vous devez enqu√™ter plus avant, et √† la fin, il s'av√®re, par exemple, que toutes les questions sont dans la mise en page: pour une raison quelconque, le bouton "Payer" a disparu ou il est devenu inactif. </p><br><h2 id="uroven-kontragentov">  Niveau de contrepartie </h2><br><p>  Nous parlons ici de contreparties sp√©cifiques - par exemple, l'acquisition de banques et de commer√ßants. </p><br><p>  Nous avons s√©lectionn√© des plannings et des d√©clencheurs distincts pour les acqu√©reurs, dont nous devons suivre en permanence la disponibilit√©.  Pour nous, en tant que service de paiement, la stabilit√© est tr√®s importante, par cons√©quent, en cas de d√©faillance de l'une des banques, nous transf√©rons imm√©diatement le flux √† la r√©serve. </p><br><p><img src="https://habrastorage.org/webt/go/_c/2e/go_c2eclhtetnklaej4ohkk04qy.png"><br>  <em>Une banque a √©chou√©, mais une autre s'est connect√©e automatiquement</em> </p><br><p>  Nous avons appris √† rediriger le flux de travail assez bien et en temps opportun si des erreurs se sont produites. </p><br><p><img src="https://habrastorage.org/webt/fe/kz/hn/fekzhnwwc8rkqb0hf7ms_-cfwjo.png"><br>  <em>Une des banques a enregistr√© une augmentation des erreurs de paiement</em> </p><br><p><img src="https://habrastorage.org/webt/13/vf/f-/13vff-8knq05k4j59kovhms8yvs.png"><br>  <em>Traduit - et tout est en ordre.</em>  <em>Les valeurs de l'axe Y ne sont pas proportionn√©es</em> </p><br><p>  Les acqu√©reurs peuvent √©chouer pour diverses raisons aux niveaux d√©j√† d√©crits - syst√®mes et logique m√©tier.  Personne n'est √† l'abri de probl√®mes impr√©vus et ne peut garantir une disponibilit√© √† 100%.  Il convient √©galement de se souvenir des travaux techniques et des versions pr√©vus, lorsque vous devez surveiller de pr√®s l'avancement des affaires.  La question de la redondance et de la commutation automatique est critique, car simple signifie arr√™ter les paiements pour l'entreprise. </p><br><p>  Nous travaillons avec plusieurs banques √† la fois pour minimiser les risques d'indisponibilit√© et optimiser les paiements par carte SR.  SR (taux de r√©ussite) ou bien la conversion est une mesure commerciale qui est calcul√©e comme le rapport du nombre de paiements r√©ussis au nombre total de transactions.  Diff√©rentes entreprises mesurent la conversion √† leur mani√®re: par exemple, quelqu'un commence √† mesurer √† partir de la page de paiement, d'autres apr√®s avoir cliqu√© sur le bouton "Payer".  Mais en g√©n√©ral, SR est influenc√© par de nombreux facteurs diff√©rents - MCC, qu'il y ait 3D-Secure dans le paiement, la g√©ographie des payeurs, les paiements r√©currents ou non.  La RS ¬´moyenne hospitali√®re¬ª est impossible √† d√©terminer et n'a pas besoin d'√™tre connue - dans chaque cas, ce sera sa propre valeur, qui devra √™tre optimis√©e. </p><br><p>  Toute la vari√©t√© des erreurs peut √™tre divis√©e en deux grands groupes. </p><br><ol><li>  <strong>Erreurs qui peuvent √™tre √©vit√©es</strong> - par exemple, le paiement depuis ce pays est interdit.  Si vous √™tes s√ªr qu'il ne s'agit pas d'une attaque frauduleuse et que vous avez des utilisateurs partout dans le monde, alors dans ce cas, il est n√©cessaire de connecter la possibilit√© de paiement √† partir des cartes de tous les √©metteurs.  Soit dit en passant, cela peut √™tre fait dans le compte personnel du caissier Yandex. </li><li>  <strong>Erreurs qui ne peuvent pas √™tre influenc√©es</strong> - par exemple, la carte est verrouill√©e.  Ici, seule une nouvelle √©mission ou une tentative de r√©p√©tition du paiement avec une autre carte dans le cadre d'une nouvelle transaction sera utile. </li></ol><br><p>  Beaucoup choisissent un fournisseur de paiement √† un taux.  En fait, le taux n'est pas la seule valeur √† prendre en compte.  Vous devez √©galement examiner le pourcentage de paiements r√©ussis (SR) - car personne n'a 100% de conversion et cette valeur varie consid√©rablement d'une banque √† l'autre.  Il est √©galement n√©cessaire de consid√©rer √† quoi ressemble le sc√©nario utilisateur en g√©n√©ral: combien d'√©tapes vous devez passer avant de payer, si l'interface est claire, etc. </p><br><h2 id="kak-konversiya-vliyaet-na-pribyl">  Comment la conversion affecte les b√©n√©fices </h2><br><p><img src="https://habrastorage.org/webt/vy/8x/7m/vy8x7myw1csu5qa3vnrdmusryv8.png"><br>  <em>Dans le deuxi√®me cas, la commission pour les services est plus √©lev√©e, mais la conversion est √©galement plus √©lev√©e, car la r√©servation et la configuration appropri√©e de la passerelle sont utilis√©es.</em> </p><br><p>  Comme vous pouvez le voir sur l'exemple, une meilleure solution pour l'entreprise serait de prendre un meilleur service et, malgr√© le fait que la commission est plus √©lev√©e en raison de la diff√©rence de qualit√© de l'acquisition, nous avons finalement 3538880 - 2847000 = 691080 roubles de diff√©rence par mois!  Et cela repr√©sente 8 millions par an, ce qui repr√©sente beaucoup d'argent pour les entreprises. </p><br><p>  La conversion, le chiffre d'affaires et les tarifs sont arbitraires, mais l'exemple montre que l'essentiel du service est sa stabilit√© et sa qualit√©.  Et cela implique d√©j√† une conversion accrue et, par cons√©quent, un chiffre d'affaires plus important pour le commer√ßant. </p><br><h2 id="kak-podklyuchaetsya-merchant">  Comment le commer√ßant est connect√© </h2><br><p>  Comme mentionn√© pr√©c√©demment, nous essayons de tout couvrir avec des m√©triques et des d√©clencheurs qui se d√©clenchent automatiquement sur un √©v√©nement.  Voyons comment tout se passe sur l'exemple de la surveillance d'un des marchands. </p><br><p>  Apr√®s la connexion √† la caisse, le commer√ßant, si n√©cessaire, est surveill√©.  Nous construisons un graphique dans Grafana et configurons les m√©triques par lesquelles les alertes automatiques sont d√©clench√©es en cas d'√©cart par rapport aux valeurs "normales" donn√©es. </p><br><p>  Nous utilisons Moira pour envoyer des notifications au chat du groupe de surveillance, qui v√©rifiera rapidement les d√©tails.  La notification contient un lien vers le calendrier et les d√©tails de l'incident. </p><br><p><img src="https://habrastorage.org/webt/kr/g-/ef/krg-efr_0h_ou3yxyz0-aqwgdcy.png"><br>  <em>Absolument un vrai exemple de message d'un bot</em> </p><br><p>  Apr√®s avoir analys√© le graphique, le sp√©cialiste du groupe de surveillance utilise le plus souvent Kibana pour visualiser les journaux.  Ici, la situation peut √™tre prosa√Øque, puis dans les journaux, √©videmment, une erreur sera visible ou une participation suppl√©mentaire des analystes sera n√©cessaire pour analyser les causes de l'√©chec. </p><br><p>  √Ä l'avenir, nous souhaitons configurer une notification automatique des commer√ßants en cas d'erreur de leur c√¥t√©, par exemple, en cas d'inaccessibilit√© du serveur ou de r√©ponses non protocolaires.  Cela vous permettra de r√©pondre rapidement √† une d√©faillance et de fournir des informations aux contreparties pour √©liminer les causes. </p><br><p>  En plus du c√¥t√© technique, nous surveillons √©galement attentivement les mesures commerciales telles que le chiffre d'affaires, les revenus et les sorties, mais cela semble √™tre le sujet des histoires suivantes. </p><br><h3 id="samoe-glavnoe">  La chose la plus importante </h3><br><p>  Ma ¬´journ√©e de d√©sob√©issance¬ª (qui est ce que nous appelons une transition temporaire vers un autre d√©partement) s'est termin√©e, et je suis retourn√© √† Moscou.  Pendant 2 jours dans le service de suivi, j'ai beaucoup appris et rationalis√© les connaissances actuelles. </p><br><ul><li>  La t√¢che de surveillance consiste √† fournir des informations pertinentes sur l'√©tat du syst√®me √† tous les niveaux; </li><li>  Choisissez des param√®tres et des d√©clencheurs comp√©tents - 90% de r√©ussite; </li><li>  Dans les services de paiement, la conversion atteint l'ench√®re; </li><li>  Vous devez suivre la technique et vous souvenir des mesures commerciales; </li><li>  Nous avons besoin d'une vision syst√©matique des processus et de la capacit√© d'analyser les relations; </li></ul><br><p>  Et pourtant - soyez reconnaissant.  Surveillez les gars, merci! </p><br><hr><br><p>  <em>C‚Äôest tout.</em>  <em>Posez des questions, abonnez-vous √† notre blog et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">venez</a> visiter.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426583/">https://habr.com/ru/post/fr426583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426571/index.html">Une approche syst√©matique de la vitesse: mesures en ligne sur le front end</a></li>
<li><a href="../fr426573/index.html">ZeroNights 2018. Recharger</a></li>
<li><a href="../fr426575/index.html">Rapport du Club de Rome 2018, chapitre 1.12: ¬´D'un monde vide √† un monde complet¬ª</a></li>
<li><a href="../fr426579/index.html">Engie et Ledger d√©veloppent une solution de blockchain mat√©rielle pour stocker les donn√©es g√©n√©r√©es par les sources d'√©nergie verte</a></li>
<li><a href="../fr426581/index.html">Ouvrir la le√ßon "Pr√©sentation des fonctionnalit√©s de Node.js"</a></li>
<li><a href="../fr426585/index.html">Sous la pression d'Instagram et de Facebook: pourquoi Snapchat peut quitter la bourse et pourquoi il est n√©cessaire</a></li>
<li><a href="../fr426587/index.html">Probl√®mes algorithmiques dans le frontend. Exemples et concours Yandex</a></li>
<li><a href="../fr426591/index.html">Posture Master: Restez en vie</a></li>
<li><a href="../fr426593/index.html">DJI Phantom 4 RTK: cartographie de nouvelle g√©n√©ration</a></li>
<li><a href="../fr426595/index.html">Richard Hamming ¬´Chapitre inexistant¬ª: Comme nous savons ce que nous savons (1-10 minutes sur 40)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>