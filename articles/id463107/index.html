<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¯ â›¹ğŸ½ ğŸ§š ShIoTiny: otomatisasi kecil, Internet, atau "enam bulan sebelum liburan" ğŸ‘¨ğŸ»â€ğŸ³ ğŸ™ğŸ¿ ğŸ§¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Poin-poin penting atau tentang artikel ini 


 Karena minat orang berbeda, dan orang punya sedikit waktu, maka secara singkat tentang isi artikel. 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: otomatisasi kecil, Internet, atau "enam bulan sebelum liburan"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463107/"><br><img src="https://habrastorage.org/webt/op/yn/2p/opyn2pdqpdygsj93bqeqbyhuv6i.jpeg"><br><br><h4 id="osnovnye-tezisy-ili-o-chem-eta-statya">  Poin-poin penting atau tentang artikel ini </h4><br><p>  Karena minat orang berbeda, dan orang punya sedikit waktu, maka secara singkat tentang isi artikel. </p><br><p>  Artikel <strong>ini</strong> adalah tinjauan umum proyek pengontrol dengan harga minimum dan kemungkinan <strong>pemrograman visual</strong> melalui browser WEB. </p><br><p>  Karena ini adalah artikel ulasan yang ditujukan untuk menunjukkan "apa yang dapat diperas dari pengontrol sen," Anda tidak harus mencari kebenaran yang mendalam dan algoritma terperinci di dalamnya. </p><br><p>  Motivasi, ide dan hasil membangun pengontrol berbasis pada chip WiFI ESP8266 dipertimbangkan. </p><a name="habracut"></a><br><h4 id="ipreduprezhdeniei">  <i>Peringatan</i> </h4><br><p>  <i>Saya tidak ingin menulis artikel ini.</i>  <i>Saya bukan penggemar menulis artikel sama sekali.</i>  <i>Perlu untuk berpikir dan terlebih lagi - banyak.</i>  <i>Memikirkan cara menulis sehingga jumlah yang disalahpahami diminimalkan.</i>  <i>Berpikir bagaimana untuk tidak terlalu ekstrem.</i>  <i>Dan banyak lagi yang harus dipikirkan.</i> <i><br></i>  <i>Tetapi teman-teman mengatakan bahwa karena upaya saya di bidang IoT dan otomatisasi kecil lainnya menarik bagi mereka, maka mereka dapat menarik bagi orang lain kepada masyarakat umum.</i>  <i>Nah, kemana perginya audiens yang tertarik dengan ini?</i>  <i>Tentu saja, pada habr.</i>  <i>Dan inilah saya.</i>  <i>Pembaca lama dan penulis baru.</i> <i><br><br></i>  <i>Untuk kesalahan, ketidakakuratan, kesalahan ketik, gaya presentasi non-modern, dll. Yang mungkin tidak disukai pembaca, saya tidak bertanggung jawab.</i>  <i>Baca dengan risiko Anda sendiri.</i> <i><br><br></i>  <i>Saya juga segera memperingatkan bahwa saya tidak akan menjelaskan apa MQTT, WiFi dan multicast UDP dan hal-hal lain yang tidak terkait langsung dengan topik.</i>  <i>Beberapa tautan ada di akhir artikel.</i> </p><br><h4 id="rozhdenie-idei-ili-nemnogo-liriki">  Kelahiran ide atau lirik </h4><br><p>  Yah, hidup bukanlah hal yang sederhana, dan Kesempatan Mulia memainkan peran penting di dalamnya.  Jadi saya ingin berbagi bagaimana peristiwa acak, dikalikan dengan kemalasan biasa, menghasilkan desain pengontrol yang agak menarik berdasarkan ESP8266. </p><br><p>  Semuanya dimulai dengan santai: Saya ingin membangun sistem kontrol untuk sistem pasokan air dan menyirami taman di desa. </p><br><p>  <strong>Tetapi</strong> tentang, karena saya dapat sepenuhnya terlibat dalam crane pipa-pipa hanya pada liburan, sebelum bahkan ada lebih dari enam bulan - semuanya terbatas pada diskusi di tempat kerja dengan rekan dan kawan-kawan dalam suasana informal. </p><br><p>  Topik "otomatisasi kecil" atau, seperti biasa dikatakan dalam "ini anak sekolah-peretas-peretas Anda" - topik IoT - Internet hal - telah lama menarik bagi saya.  Jauh sebelum munculnya Internet seperti itu digunakan secara luas. </p><br><p>  Bahkan di masa kanak-kanak, saya ingin hal-hal melakukan sesuatu "sendiri."  Dan diharapkan bahwa saya dapat mengendalikan mereka entah bagaimana dari kejauhan.  Tetapi pada waktu itu (tahun 80-an, awal tahun 90-an dari milenium terakhir) ini sulit.  Internet tidak tersedia secara luas di mana pun di dunia, karena tidak ada tempat dan telepon seluler, tablet, dan bahkan layar LCD dan USB-flash drive.  Jadi saya harus membatasi diri pada "sakelar lampu pada tepukan" dan kendali jarak jauh radio yang paling sederhana.  Tetapi untuk saat itu dan usia itu, itu bagus dan menarik. </p><br><p>  <strong>Tapi</strong> ini masa lalu.  Nonche di halaman abad XXI  Dan setiap orang memiliki smartphone di saku mereka, Internet hampir di mana-mana di mana diperlukan dan tidak perlu, dan database komponen elektronik yang tersedia sekarang sedemikian rupa sehingga 15 tahun yang lalu penghuni biasa planet Bumi bahkan tidak memimpikannya. </p><br><p>  Karena itu, setelah memutuskan untuk membuat pengontrol untuk urusan air di negara ini, saya mengalihkan pandangan ke chip ESP8266. <br>  Pertama, chip ini murah.  Dan jika satu kontroler tidak cukup - Anda dapat menempatkan dua, tiga atau lima.  Kedua, ada WiFi di dalamnya.  Artinya, Anda dapat menonton apa yang terjadi melalui Internet dan bahkan mengontrol proses dari smartphone apa pun.  Tentu saja, Anda memerlukan titik akses dengan akses Internet, tetapi ini bukan masalah.  Lagi pula, hampir di mana-mana, atau akan, termasuk - dan di rumah negara saya. </p><br><p>  Setelah terjun ke dunia indah proyek untuk ESP8266, saya terkejut menemukan bahwa, terlepas dari kemampuan luar biasa dari chip ini, proyek di atasnya, dengan pengecualian langka, dibagi menjadi dua jenis: ini adalah program yang sangat primitif seperti "klik pada gulungan dari smartphone dan lihat keadaan." sensor suhu melalui Internet â€;  atau penerjemah yang baik dan solid dari JavaScript atau Lua, tetapi sayangnya, mereka menghabiskan hampir semua memori dan tidak memungkinkan Anda untuk melakukan sesuatu yang serius. </p><br><p>  Gagasan pertama saya adalah sesederhana pancake - untuk menulis program kontrol pompa sederhana berdasarkan status sensor dan itu saja.  Tapi, seperti kalach abon dalam hal melompat di penggaruk memperkenalkan sistem yang berbeda, saya menyadari bahwa saya pasti tidak akan dapat melihat semua tikungan dari algoritma yang saya ingin atau perlu diluruskan selama pembangunan sistem irigasi pasokan air. </p><br><p>  <strong>D</strong> mengerjakan program di negara ini, di gudang gelap - sangat tidak nyaman.  Dan kamu harus. <br>  Apa jalan keluarnya?  Tentu saja, hal pertama yang muncul di benak saya adalah membuat algoritme yang dapat disesuaikan.  Salah satu kolega saya memberikan banyak saran - apa yang harus dikonfigurasi dan bagaimana caranya.  Dengan ini, dia memotong ide pertamaku sejak awal.  Terima kasih padanya.  Jika dia tidak menyebarkan sejumlah parameter yang perlu saya konfigurasi di depan mata saya, saya mungkin tidak akan menolak opsi ini: buat halaman pengaturan algoritma. </p><br><p>  <strong>Tetapi</strong> gambaran yang menakutkan tentang jumlah parameter penyetelan, dan bahkan saling memengaruhi - membuat saya sadar.  Sekali lagi, saya menyadari bahwa tidak ada yang bisa diramalkan ... </p><br><p>  Saya akan segera memesan: Saya malas.  Sangat malas!  Terus terang saya malas menulis ulang program setiap saat.  Oleh karena itu, tugas muncul - bagaimana cara mengatur algoritma dengan cepat dan mudah, lebih disukai tanpa pemrograman?  Selain itu, algoritma ini akan sangat rumit;  akan memiliki banyak parameter;  Ini akan bersifat individual untuk kasus saya dan tidak cocok untuk orang lain.  Dan saya benar-benar ingin membuat perangkat ini lebih atau kurang universal ... </p><br><p>  Karena masih ada sekitar enam bulan sebelum liburan dan semua pekerjaan pipa, saya memutuskan untuk meluangkan waktu untuk berpikir: bagaimana cara membuatnya nyaman dan indah?  Bagaimana cara memprogram tanpa pemrograman?  Bagaimana melakukannya tanpa satu triliun parameter yang dapat diubah saat pengaturan? </p><br><p>  Seperti biasa, semuanya sudah dipikirkan di depan kita: Saya menyadari bahwa saya ingin menggambar sebuah algoritma dalam bentuk kuadrat aksi dan menghubungkannya dengan jalur komunikasi yang menunjukkan dari mana dan dari mana data itu terbang.  Nah, menyodok dalam kotak, saya ingin dapat mengkonfigurasi beberapa parameter individualnya. </p><br><p>  <strong>Dan</strong> tindakan pengaturan algoritma, menggambar dengan kuadrat bukanlah hal baru.  Sistem seperti itu kembali di tahun 80-an;  ada sistem NodeRed yang sangat populer yang terkenal bagi mereka yang telah bergabung dengan dunia otomatisasi kecil / IoT. </p><br><p>  <strong>Tapi</strong> ini nasib buruk: sistem seperti itu dirancang untuk "PC besar".  Paling buruk, pada Raspberry PI.  Tetapi tidak sama sekali pada ESP8266, yang hanya memiliki beberapa puluh kilobyte RAM dan tidak ada OS! </p><br><p>  Bagaimana menjadi?  Dan hanya ada dua jalan keluar: untuk menulis-menggambar sebuah program pada "PC besar" atau laptop, dan kemudian mentransfernya dalam beberapa bentuk ke ESP8266 atau mencoba untuk "menjejalkan yang tidak diinginkan" ke dalam pengontrol ESP8266 itu sendiri. </p><br><p>  Oleh karena itu, program maksimum yang saya miliki adalah ini: untuk memprogram pengontrol Anda, seharusnya tidak perlu apa pun kecuali laptop dengan browser WEB!  Yaitu, laptop dengan browser WEB dan pengontrol saya - ini harus cukup untuk sepenuhnya mengkonfigurasi dan menulis program kontrol menggambar. </p><br><p>  <strong>Dan</strong> , ternyata, sangat mungkin untuk menyadari ini! <br>  Saya tidak akan membuat Anda bosan dengan semua detail pengembangan proyek.  Saya hanya dapat mengatakan bahwa berdasarkan kata-kata yang muncul di benak dan bahasa saya selama proses pengembangan, akan mungkin untuk menyusun " <em>Kamus Senonoh Kata-kata Pengganti Pekerja Elektronik</em> " yang terpisah.  Tapi semuanya ada di belakang.  Lebih tepatnya, tidak semua, tetapi tahap pertama, yang paling sulit, ketika tidak jelas - apakah ide Anda adalah untuk hidup atau itu hanya omong kosong kebiri pada malam yang diterangi cahaya bulan. </p><br><p>  <strong>Saya akan</strong> membagikan hasil dari apa yang keluar dan disebut <b>"ShIoTiny Controller"</b> . </p><br><h4 id="i-chto-zhe-vyshlo">  Dan apa yang terjadi? </h4><br><p>  <b>Perangkat keras</b> pengontrol ShIoTiny standar dan sederhana: tiga input dirancang untuk sensor kontak kering (tombol, sakelar buluh, mereka juga sensor level air dalam tangki), satu input ADC, satu input untuk menghubungkan sensor suhu dan kelembaban seperti DHT22 atau serupa .  Dan akhirnya, tiga output dalam bentuk relay switching untuk 220V, 1 Amp.  Relay mengatakan 10A, tetapi saya adalah seorang realis dan saya tidak akan membiarkan mereka melalui papan amp 10A.  Dan untuk mengontrol starter pompa dan 1 Amp sudah cukup.  Semua ini ditenagai dari sumber listrik dengan tegangan 5 hingga 9 volt. </p><br><p>  Tentu saja, saya menambahkan sensor suhu seperti "Schaub was", tetapi pada ADC ada harapan untuk mengukur tegangan listrik.  Apakah itu tidak cukup? </p><br><p>  Tentu saja, semua input, kecuali input untuk menghubungkan DHT22, memiliki perlindungan dari resistor dan dioda: Saya tidak punya keinginan untuk membakar ESP8266, dan dioda dan resistor harganya hanya beberapa sen. </p><br><p>  <strong>Foto</strong> produk jadi dapat dilihat di awal artikel.  Saya memesan beberapa papan ini - bagaimana jika saya membakarnya atau haruskah saya memotong jalan dan kaki? <br>  Tapi, untungnya - tidak harus. </p><br><p>  Produk ini tentu saja keindahan dan kebesaran.  Tetapi untuk kenyamanan, berikut ini adalah diagram gambar koneksi ke papan simulator sensor dan aktuator. </p><br><br><img src="https://habrastorage.org/webt/_v/qm/_k/_vqm_kjyjzpgxqvsqzjte7ct6y8.jpeg"><br><br><p>  <strong>Di</strong> tempat sensor level - tombol Input1..3, alih-alih starter - LED terhubung ke relai Relay1..3.  Nah, resistor variabel pada ADC untuk mensimulasikan tegangan input. <br>  Saat relai mati, LED merah menyala.  Dan ketika dihidupkan - hijau.  Jadi saya debugged di atas meja. </p><br><p>  Selain semua ini, ada konektor daya di sebelah kiri papan dan dua tombol layanan di sebelah kanan: Reset dan AP.  Nah, saklar DIP yang menempatkan perangkat ke mode pemrograman.  Konektor pemrograman ESP8266 melalui adaptor USB-UART juga tersedia. </p><br><p>  <strong>Beberapa penjelasan untuk tombolnya.</strong>  Apa itu <strong>Reset</strong> - dan jadi jelas.  Tetapi tombol <strong>AP</strong> diperlukan untuk memasukkan <strong>ShIoTiny</strong> ke mode titik akses terbuka (mode konfigurasi atau Mode Konfigurasi).  Mengapa ini dibutuhkan?  Yah, misalnya, Anda mengacaukan pengaturan jaringan dan ingin mengubahnya.  Tekan tombol AP selama beberapa detik (sampai LED biru yang indah menyala).  Kemudian, ambil ponsel cerdas atau laptop Anda, nyalakan WiFi dan lihat ada titik akses terbuka dengan nama esp_8266_xxxx dan sambungkan ke sana.  Lalu buka browser ponsel cerdas atau laptop Anda dan ketikkan bilah alamat: 192.168.4.1.  Jika semuanya beres, maka Anda akan dibawa ke halaman pengontrol ShIoTiny dan Anda dapat mengkonfigurasinya dengan cara yang baru. </p><br><p>  <strong>Seperti yang</strong> kita lihat, perangkat keras bukanlah hal yang rumit.  Karena itu, tentang bagian <strong>perangkat lunak</strong> . </p><br><p>  <strong>Dalam</strong> semua implementasi hop, saya akan jelaskan, tapi kemudian.  Suatu hari nanti.  Dan hari ini saya akan menganggap perangkat lunak hanya "di luar", yaitu, dari sudut pandang pengguna - saya sendiri atau orang lain yang berani menggunakan kerajinan saya (ada stuntmen semacam itu). </p><br><p>  <strong>Dari</strong> sudut pandang pengguna, perangkat adalah server HTTP yang dapat diakses melalui WiFi.  Semua pengaturan, pemrograman, dan sebagainya - dilakukan menggunakan browser WEB. </p><br><p>  Jadi, kami pergi ke halaman controller.  Apa yang kita lihat  Dan kita melihat tab "Kontrol dan status", yang menunjukkan status saat ini dari perangkat yang digunakan: input, output, ADC, DHT22.  Selain itu, parameter koneksi ke titik akses ditampilkan (jika kita bekerja dalam mode stasiun WiFi);  pengaturan titik akses (jika kita bekerja dalam mode titik akses WiFi) atau keduanya.  Selain itu, parameter koneksi dengan broker MQTT ditampilkan jika protokol MQTT digunakan. </p><br><br><img src="https://habrastorage.org/webt/lm/02/tw/lm02twe6qzwhrrby1v9jhf8alb8.jpeg"><br><br><p>  <strong>Untuk</strong> melihat, tidak ada yang istimewa dan menarik.  Tidak ada yang ditekan!  Meskipun ... Ada dua tab lagi!  Mengkonfigurasi pengaturan jaringan <strong>Jaringan</strong> dan skema diagram editor <strong>ElDraw</strong> . </p><br><p>  Anda dapat menebaknya, <strong>Jaringan</strong> membuat jaringan, tetapi tidak hanya itu.  Ini memiliki beberapa parameter yang lebih menarik.  "Poke" pada tab <strong>Networking</strong> dan lihat di sana kira-kira apa yang ditunjukkan pada gambar. <br>  Mengkonfigurasi nama titik akses dan kata sandi untuk masing-masing mode - Stasiun WiFi dan titik akses WiFi.  Segalanya tampak jelas.  Serta tujuan dari <strong>tombol Pindai WiFi,</strong> itu sepenuhnya transparan. <br>  <strong>Tetapi</strong> daftar drop-down <strong>"mode ShIoTiny"</strong> memerlukan klarifikasi.  Faktanya adalah saya tidak bisa memutuskan mode apa yang lebih nyaman bagi saya untuk bekerja.  Dan karena itu, disediakan untuk 5 mode operasi perangkat. </p><br><br><img src="https://habrastorage.org/webt/kd/s_/hh/kds_hhoiybre9ivtlr1kl1peh24.png"><br><br><p>  Kami mencantumkan secara singkat mode operasi ini. </p><br><p>  <strong>Mode</strong> konfigurasi - mode konfigurasi.  Ini adalah mode titik akses terbuka dengan alamat tetap 192.168.4.1 dan nama esp_8266_xxxx. </p><br><p>  <strong>Mode stasiun</strong> - mode stasiun WiFi yang terhubung ke titik akses Anda. </p><br><p>  <strong>Mode AP</strong> - mode titik akses tertutup.  Anda mengatur sendiri nama dan kata sandi. </p><br><p>  <strong>Mode AP + Station</strong> adalah penyertaan simultan mode AP + mode Stasiun. </p><br><p>  <strong>Mode tunggal</strong> - berfungsi tanpa menghubungkan ke jaringan sama sekali.  Pengontrol tunggal yang membawa ... </p><br><p>  <strong>Dalam</strong> mode apa pun, kecuali untuk <strong>"mode Konfigurasi"</strong> , Anda dapat memblokir halaman WEB dengan mencentang kotak centang <strong>"Kunci Web dalam mode Stasiun"</strong> .  Ini adalah tipe untuk alasan keamanan. </p><br><p>  Pengaturannya jelas-MQTT: server, port, kata sandi, koneksi terbuka atau <strong>SSL</strong> .  Saya tidak akan tinggal di sini secara detail. </p><br><p>  Selain yang lainnya, pengontrol ShIoTiny dapat mengirim dan menerima paket dalam format khusus untuk multicast.  Pengaturannya juga jelas: alamat grup dan porta. <br>  Tentu saja, jika Anda menggambarkan semua nuansa pengaturan, Anda mendapatkan artikel terpisah, tetapi ini tidak termasuk dalam rencana saya. </p><br><p>  Jadi, dengan tab <strong>Networking</strong> , semuanya lebih atau kurang jelas.  Mari kita beralih ke fitur utama controller - <strong>editor</strong> program <strong>ElDraw</strong> . </p><br><p>  Dengan mengetuk tab ElDraw, kita melihat sesuatu seperti berikut ini.  Tentu saja, jika perangkat tidak memiliki sirkuit yang dimuat, maka bidang sirkuit akan kosong. </p><br><br><img src="https://habrastorage.org/webt/hr/on/kc/hronkcmousbzptjr1olyag1whbk.png"><br><br><p>  <strong>Di sebelah</strong> kiri adalah palet elemen atau node (node). <br>  <strong>Di sebelah</strong> kanan, bidang diagram atau sekadar "diagram". <br>  <strong>Dari tombol</strong> atas untuk memuat dan membongkar ke disk dan ke perangkat, serta tombol untuk mengedit. </p><br><p>  <strong>Bagi</strong> mereka yang telah bekerja dengan editor, manajemen pada umumnya jelas.  Kita perlu menambahkan elemen ke diagram - bawa dengan mouse dan seret dari palet ke diagram.  Penting untuk menghapus elemen atau tautan dari diagram - colek di atasnya atau di atasnya dengan mouse dan tekan tombol <strong>DEL</strong> .  Kita perlu menghubungkan elemen - kita mengambil input dari satu elemen dan menghubungkannya ke output yang lain. </p><br><p>  <strong>Masih ada</strong> penskalaan (SHIFT + roda mouse).  Sayangnya, tidak ada cara untuk menyalin elemen dan grup elemen.  Tapi ini tidak terlalu mengganggu. </p><br><p>  <strong>Selain</strong> itu, untuk alasan logika, input dari sebuah node hanya dapat dihubungkan ke satu output dari node lain.  Tetapi output node adalah dengan beberapa input dari node lain.  Input selalu di sebelah kiri node.  Output selalu di sebelah kanan. </p><br><p>  Kemampuan apa yang kita miliki untuk mengimplementasikan algoritma? <br>  <strong>Dalam</strong> peluang - cukup luas.  Palet berisi node yang mewakili semua perangkat keras pengontrol <strong>ShIoTiny</strong> : input, relay, ADC, DHT11 / 22. </p><br><p>  Ada node logis dan aritmatika untuk pemrosesan data. </p><br><p>  Agar kami dapat bekerja dengan perangkat melalui Internet, ada simpul untuk berlangganan dan menerbitkan parameter ke broker MQTT. </p><br><p>  Jika kami ingin beberapa pengontrol ShIoTiny saling bertukar informasi - Anda dapat menggunakan node untuk mengirim dan menerima parameter menggunakan protokol multicast UDP. </p><br><p>  <strong>Untuk</strong> rum ini, ada node timer;  node kontrol manajemen acara. </p><br><p>  <strong>Saya akan</strong> memberikan beberapa contoh.  Misalnya, apakah Anda ingin data suhu dan kelembaban dipublikasikan setiap 30 menit pada server MQTT?  Tidak ada yang lebih mudah.  Gambarlah seperti itu. </p><br><br><img src="https://habrastorage.org/webt/gf/bu/op/gfbuopoey6qqzbgtglgqm14otme.jpeg"><br><br><p>  <strong>Nah</strong> tombol meme "Unggah".  Itu saja! <br>  Jika Anda telah mengkonfigurasi koneksi dengan broker MQTT dengan benar pada tab Networking, itu saja! <br>  Setiap setengah jam, suhu akan dipublikasikan pada broker di bawah topik / T, dan kelembaban - di bawah topik / H.  Atau, jika Anda bertanya nama topik Anda, maka di bawahnya. <br>  Pertanyaan: Mengapa 18.000 30 menit?  Karena semua waktu diukur dalam sepersepuluh detik. </p><br><p>  Sekarang Anda ingin menambahkan ke rangkaian ini kemampuan untuk mengaktifkan Relay1 melalui Internet, dan bahkan untuk waktu tertentu?  Tidak masalah  Buat seperti itu. </p><br><br><img src="https://habrastorage.org/webt/mb/ai/l6/mbail6skmkridba4jx6zhnvpjng.png"><br><br><p>  <strong>Sekitar</strong> lima, klik tombol "Unggah".  Itu saja!  Sekarang, selain fakta bahwa setiap setengah jam, suhu dan kelembaban akan dipublikasikan di broker MQTT, akan dimungkinkan untuk menghidupkan relay Relay1.  Ya, tidak hanya menyalakannya, tetapi tepat 10 menit.  Anda dapat mengaktifkan relai dengan menerbitkan topik / r1cmd, setel ke 1. Dan status relai yang sebenarnya akan dipublikasikan dalam topik / r1status. </p><br><p>  <strong>Dalam</strong> apakah saya ingin tidak hanya menyalakan, tetapi juga mematikan relay sebelumnya?  Ya, seperti yang Anda katakan.  Gambar di bawah ini menunjukkan cara melakukannya! </p><br><br><img src="https://habrastorage.org/webt/nq/nm/qz/nqnmqznqcj9ia1tco5tumywbblg.png"><br><br><p>  Apakah prinsipnya jelas?  Anda cukup menggambar algoritme dengan mouse!  Dan tulis sedikit pengaturan: waktu, nama topik dan semua.  Ini jauh lebih jelas daripada menulis banyak kode. </p><br><p>  <strong>Omong-omong</strong> , menyoroti tautan dalam berbagai warna bukanlah "photoshop" - ini adalah salah satu fungsi editor.  Anda dapat mewarnai tautan yang diinginkan, agar tidak bingung di dalamnya. </p><br><p>  <strong>Tapi</strong> oh, dan itu belum semuanya!  Untuk men-debug algoritma, ada tombol "Monitor start".  Aneh seperti yang terlihat, ternyata pada mode "monitor".  Dalam mode ini, keadaan semua output dari semua node secara berkala dibaca dari pengontrol <strong>ShIoTiny</strong> dan ditampilkan di sirkuit.  Kira-kira seperti pada gambar di bawah ini. </p><br><br><img src="https://habrastorage.org/webt/av/zo/ev/avzoevodxkpmwylcw2da2tzqicq.png"><br><br><p>  Yaitu, kita dapat melihat â€œhampir waktu nyataâ€ apa yang kita miliki pada input dan output dari setiap node.  Ini sangat membantu ketika ada sesuatu yang tidak jelas. </p><br><p>  <strong>Masih ada</strong> banyak "keripik dan fitur" yang ingin saya gambarkan, dan hati nurani saya tidak akan mengizinkan Anda untuk menghabiskan waktu Anda menggunakannya dalam satu artikel.  Gagasan terwujud utama sudah jelas: minimum parameter yang dapat dikonfigurasi - maksimum visibilitas. </p><br><h4 id="lozhka-degtya">  Terbang di salep </h4><br><p>  Tentu saja, saya ingin tidak ada lalat di salep, tetapi dunia tidak sempurna.  Editor dan pengontrol saya tidak sempurna.  Saya menemukan dua fitur utama yang belum dapat saya hilangkan. </p><br><p>  Pertama, kadang-kadang gangguan terjadi selama pergerakan elemen kelompok.  Tapi ini tidak terlalu mengganggu pekerjaan.  Lebih mungkin fitur daripada bug. </p><br><p>  <strong>Dan</strong> kedua, dalam kondisi tertentu, setelah memuat rangkaian ke perangkat menggunakan tombol "Unggah", restart.  Ini tidak mengganggu kehidupan, tetapi halaman editor perlu diperbarui. </p><br><h4 id="zaklyuchenie">  Kesimpulan </h4><br><p>  <strong>Saya</strong> harap Anda menyukai ide menggambar algoritma daripada menulis program.  Ini adalah bagaimana pemikiran acak, ide, dan argumen kadang-kadang menimbulkan perkembangan yang layak untuk diri mereka sendiri. </p><br><p>  <strong>Tetapi</strong> tentang, menurut pendapat saya, volume artikel telah melampaui semua batasan yang masuk akal.  Jadi saya selesai hari ini. <br> <strong></strong>   ,                    Â« Â». <br> <strong></strong>         â€”   : <strong>shiotiny@yandex.ru</strong> </p><br><p> <strong></strong>      ,  , ,  . </p><br><p> <strong></strong>   ,   . </p><br><h4 id="ssylki-otsylki-i-posylki"> ,    </h4><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  ShIoTiny</a> </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ESP8266</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WiFi</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MQTT</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UDP Multicast</a> </p><br><h4 id="po-prosbam-trudyaschihsya">    </h4><br><p> <strong></strong>      (). </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/shiotiny/ShIoTinyBin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/bin/esp-07-shiotiny.bin</a> </p><br><p> : <a href="">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/esp-07-shiotiny.png</a> </p><br><p>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/shiotiny/ShIoTinyBin/blob/master/doc/ShIoT-esp8266-01_obzor.pdf</a> </p><br><p>  " "  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463107/">https://habr.com/ru/post/id463107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463095/index.html">Kenapa tidak SQL?</a></li>
<li><a href="../id463097/index.html">Go Product Development: Satu Sejarah Proyek</a></li>
<li><a href="../id463099/index.html">1000 dan 1 umpan balik. Bagaimana memberi umpan balik dan mengajar orang lain, pengalaman Lamoda</a></li>
<li><a href="../id463101/index.html">Mengelola ratusan server untuk pengujian beban: autoscaling, pemantauan khusus, budaya DevOps</a></li>
<li><a href="../id463105/index.html">Hari keempat saya dengan Haiku: masalah instalasi dan boot</a></li>
<li><a href="../id463113/index.html">Kontrol Data dan Model Versi dalam pertemuan Visi Komputer</a></li>
<li><a href="../id463115/index.html">Masalah pintu dalam desain penembak</a></li>
<li><a href="../id463117/index.html">Preloading dalam PHP 7.4</a></li>
<li><a href="../id463121/index.html">Kami makan gajah di beberapa bagian. Contoh Aplikasi Strategi Pemantauan Kesehatan</a></li>
<li><a href="../id463123/index.html">Perpustakaan generator kode assembler untuk mikrokontroler AVR. Bagian 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>