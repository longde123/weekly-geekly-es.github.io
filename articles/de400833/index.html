<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😇 🦒 ⛵️ Informationen zum Anschließen und Arbeiten mit Winstar-Text-OLED-Displays 👩🏾‍🎨 ♌️ 💎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zeilen- (oder Text-) Anzeigen sind für die Bereitstellung von Textinformationen in Form von Zeilen vorgesehen. Es gibt verschiedene Arten (vor allem L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Informationen zum Anschließen und Arbeiten mit Winstar-Text-OLED-Displays</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400833/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeilen- (oder Text-) Anzeigen sind für die Bereitstellung von Textinformationen in Form von Zeilen vorgesehen. </font><font style="vertical-align: inherit;">Es gibt verschiedene Arten (vor allem LCD oder selbstleuchtende OLED), und normalerweise sind in ihrer Kennzeichnung die Nummern 1202, 1602, 1204 oder ähnlich angegeben, die die Anzahl der Zeilen (in den Beispielen 2 oder 4) und die Zeichen in jeder Zeile (12 und 16) angeben. . </font><font style="vertical-align: inherit;">Es gibt einzeilige Anzeigen dieses Typs, aber in der folgenden Präsentation konzentrieren wir uns auf die am häufigsten verwendeten zweizeiligen Anzeigen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die meisten dieser Displays sind mit dem HD44780-Controller (Hitachi) kompatibel. Die beliebtesten (zumindest in unserem Land) Displays dieser Sorte werden von Winstar hergestellt. Darüber hinaus sind LCD-Varianten (der Name beginnt mit den Buchstaben WH, z. B. WH1602) eins zu eins mit dem HD44780-Befehlssystem kompatibel, und OLED-Typen (der Name beginnt mit WEH, z. B. WEH001602) verfügen über einen verbesserten WS0010-Controller. Leider oder zum Glück werden wir uns jetzt darum kümmern.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zuvor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf dem ks0108-Controller </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">untersuchten</font></a><font style="vertical-align: inherit;"> Grafikdisplays ist der Zeichengenerator in den Kleinbuchstaben integriert. </font><font style="vertical-align: inherit;">Darüber hinaus besteht für uns der Hauptunterschied zwischen dem WS0010 und dem Standard HD44780 darin, dass mehrere (vier) Codetabellen für die Anzeige von mehrsprachigem Text vorhanden sind. </font><font style="vertical-align: inherit;">Der HD44780 verfügt nur über eine solche Tabelle, weshalb Unternehmen in jeder Region einen eigenen Anzeigetyp verkaufen müssen. </font><font style="vertical-align: inherit;">Für WSED10-basierte OLED-Displays sind keine regionalen Aufschlüsselungen erforderlich, was wesentlich praktischer ist. </font><font style="vertical-align: inherit;">Aber nicht für den Benutzer: Standardmäßig enthalten die WEB-Anzeigen die Tabelle ENGLISH_JAPANESE. Um russische Zeichen zu aktivieren, müssen Sie sie auf ENGLISH_RUSSIAN umschalten.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie mehr über die Tabelle ENGLISH_RUSSIAN.</font></font></b><div class="spoiler_text">     :    (.    )     ,     .      ,    ,   — -   -8,          (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 19768-93</a>).       -, , ,     EBCDIC,       ,     ( 127 )    ASCII.    ,  ,    ,    ASCII      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Standard-LiquidCrystal-Bibliothek (im Lieferumfang der Arduino IDE enthalten) weiß natürlich nichts über die vier Tabellen und muss daher zumindest in dieser Hinsicht begradigt werden. </font><font style="vertical-align: inherit;">Aber nicht nur: Am Ende wäre es möglich, mit der englischen Sprache zu tun. </font><font style="vertical-align: inherit;">Das Initialisierungsverfahren ist jedoch beim WS0010 deutlich anders. Wenn es nicht korrigiert wird, zeigt das Display dies bei jedem Start an.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weitere Funktionen</font></font></b><div class="spoiler_text"> ,  OLED- Winstar   ,       ( ,    ).  ,   ,     . ,  ,     WEH   SPI (, « SPI»),    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>,   ,      (  3) — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>.           :         ,         .       ,       I2C    (. ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>).<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus irgendeinem Grund weisen Winstar-Displays ein großes Defizit an verständlicher Dokumentation auf (wie Sie vielleicht bemerkt haben, ist dies im Allgemeinen ein charakteristisches Merkmal chinesischer Produkte). </font><font style="vertical-align: inherit;">Es ist erwähnenswert, wo Sie mehr oder weniger vollständige Dokumentation ohne Fehler herunterladen können: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier auf dem LCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WH1602) mit einem HD44780-Controller, hier auf den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OLED-Displays</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WEH1602), hier auf dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WS0010-Controller separat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (wir werden später darauf verweisen) . </font><font style="vertical-align: inherit;">Und hier, wenn Sie interessiert sind, gibt es eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detaillierte Beschreibung des HD44780-Controllers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in russischer Sprache.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nivellieren der LiquidCrystal-Bibliothek</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Steuerung der Kleinbuchstaben des HD44780 und seiner Analoga ist die Standard-LiquidCrystal-Bibliothek, die traditionell in der Arduino IDE aller Versionen enthalten ist, gut geeignet. Um den russischen Text anzuzeigen, gibt es die Version von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die überraschenderweise in allen modernen Versionen der Arduino IDE gut funktioniert (es heißt, dass der Autor die Konvertierung von UTF-8-Zeichen korrekt angegangen ist). Um sich jedoch an OLED-Anzeigen auf dem WS0010-Controller anzupassen, müssen Sie noch Korrekturen vornehmen. In Zukunft werden wir diese Bibliothek verspotten und sie daher in LiquidCrystalRus_OLED umbenennen, um sie nicht mit der üblichen zu verwechseln. Um die Aufgabe zu vereinfachen, werden die Funktionen nicht umbenannt, da die Initialisierung dieselbe ist wie beim ursprünglichen LiquidCrystalRus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Änderungen sind wie folgt: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Seit</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die russisch-englische Tabelle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in WS0010 (siehe Seite 9 für das Datenblatt zu WS0010 über den obigen Link) ist die Nummer 2. Um zum Umschalten zu wechseln, müssen Sie im Befehl FUNCTION SET die beiden niedrigstwertigen Bits FT1 und FT0 setzen, um den Status 10 (0x02) festzulegen. (In LCDs mit einer Codetabelle werden diese Bits übrigens überhaupt nicht verwendet). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suchen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie dazu in der Datei </font><i><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp nach der</font></i><font style="vertical-align: inherit;"> Stelle (Zeile 96 der Datei), an der der Wert der Variablen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_displayfunction festgelegt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist </font><font style="vertical-align: inherit;">. Fügen Sie in beiden Zeilen der Initialisierung (Zeilen 97 und 99) einen Anhang " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| = 0x02</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " hinzu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Als nächstes müssen Sie die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialisierungsverzögerung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nach dem Einschalten </font><font style="vertical-align: inherit;">beheben </font><font style="vertical-align: inherit;">. Für HD44780 sollte es nicht länger als 40 ms sein (siehe Dokumentation unter den obigen Links). Die Bibliothek nutzt hierfür die Funktion.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delayMicroseconds (50000)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Zeile 120 der Datei </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Für den WS0010-Controller muss die Verzögerung zehnmal länger sein - mindestens 500 ms (siehe die letzte Seite des Datenblattes unter dem obigen Link). Diese Anforderung ist so sorgfältig verborgen (die Dateien mit der englischsprachigen Dokumentation auf Winstar zeigen in genau diesem Teil „die Schrift verloren“ an), dass es den Anschein hat, als hätten bisher nur wenige Menschen darüber nachgedacht. Daher ersetzen wir diese Zeile durch 32 Verzögerungswiederholungen von jeweils 16 ms:</font></font><br>
<br>
<pre><code class="hljs matlab"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">31</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) delayMicroseconds(<span class="hljs-number"><span class="hljs-number">16000</span></span>);</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Zusätzlich (siehe auch diese letzte Seite des Datenblattes) müssen Sie nach dieser Verzögerung beim Einschalten des Vierdrahtes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fünfmal hintereinander</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (0x00) </font><b><font style="vertical-align: inherit;">einen leeren Befehl senden</font></b><font style="vertical-align: inherit;"> . Da der Arduino erheblich schneller als der Display-Controller ist, sollten Befehle mit einer Zwischenverzögerung gegeben werden. Sie müssen etwas weiter in den Text der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Startfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eingefügt werden, wo es speziell um die 4-Bit-Aufnahme geht (Zeile 147 der Datei </font><i><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></i><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Aber das ist nicht das Ende. In der ursprünglichen Tabelle hat ENGLISH_RUSSIAN ein </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gradsymbol</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Code 0xEF). Die Option wird extrem erfolglos grafisch ausgeführt (zu groß), daher bevorzuge ich die Verwendung eines fetten oberen Punkts (Code 0xDF) - es ist viel mehr wie ein Abschluss im üblichen Stil. Es könnte in Form eines Codes eingegeben werden (besser als das Oktal "\ 337"), aber das Problem besteht darin, die Funktion des Ersetzens von Codes russischer Buchstaben durch Codes in der Zeichengeneratortabelle, dem Autor der Bibliothek, basierend auf der UTF-8-Codierung, zu vereinfachen (siehe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vorherigen Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Es wurde eine Ersetzungsbedingung für jeden Code größer als 0x80 eingeführt ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus :: write-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Funktion </font><font style="vertical-align: inherit;">). Da unser 0xDF deutlich größer als 0x80 ist, wird bei Angabe des Zeichens "\ 337" in der Codezeile stattdessen ein Leerzeichen angezeigt, da es keinem russischen Buchstaben entspricht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider ist die Standardfunktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">createChar ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als ich versuchte, damit mein eigenes Abschlusssymbol zu erstellen, betrat ich die Anzeige in einem völligen Stupor, von dem es nur durch erneutes Laden des Programms entfernt werden konnte. Was ich zusätzlich tun muss und ich werde dankbar sein, wenn mir jemand sagt, was los ist. Daher kann der Zeichengenerator in unseren Funktionen nicht bearbeitet werden, aber wir können das benötigte 0xDF-Zeichen von der Bedingung ausschließen. Ersetzen Sie dazu die vorhandene </font><font style="vertical-align: inherit;">Bedingung </font><font style="vertical-align: inherit;">(siehe Text der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreibfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) durch folgende:</font></font><br>
<br>
<pre><code class="hljs lisp">if ((<span class="hljs-name"><span class="hljs-name">value&gt;=0x80</span></span>)<span class="hljs-symbol"><span class="hljs-symbol">&amp;&amp;</span></span>(<span class="hljs-name"><span class="hljs-name">value!=0xdf</span></span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Schließlich ist die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durchgestrichene Null</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf diesem Display nicht so auffällig wie auf grafischen LCD-Bildschirmen. </font><font style="vertical-align: inherit;">Trotzdem habe </font><font style="vertical-align: inherit;">ich </font><font style="vertical-align: inherit;">in derselben </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreibfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das Ersetzen des Nullcodes (0x30) durch den Code des Buchstabens „O“ (0x4f) eingeführt. </font><font style="vertical-align: inherit;">Wer möchte, kann die durchgestrichene Null zurückgeben, indem er einfach die Ersatzzeile löscht oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auskommentiert</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Zeile 308 der modifizierten Datei </font><i><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></i><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die aktualisierte Bibliothek kann über den Link am Ende des Artikels heruntergeladen werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindung</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt scheint alles optimiert zu sein, Sie können eine Verbindung herstellen. </font><font style="vertical-align: inherit;">Die Verbindung des WEH001602BG-Displays (16 Zeichen, Bildschirmlänge 100 mm) mit dem Arduino ist in der folgenden Abbildung dargestellt: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a58/0b4/c91/a580b4c91cf235bbb5b698986b4fdcfc.png" width="600" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino-Pins, an die die RS-, E-, DB4-DB7-Display-Pins angeschlossen sind, sollten bei der Initialisierung des Displays angezeigt werden:</font></font><br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Falls gewünscht, können Sie zwei oder sogar mehr Displays in jeder Schnittstellenoption (acht- oder vieradrig) anschließen. In diesem Fall können Datenleitungen und RS gemeinsam genutzt werden. Die Wahl zwischen Anzeigen erfolgt in diesem Fall über Klemme E, die für verschiedene Anzeigen mit verschiedenen Arduino-Klemmen verbunden ist (die Verbindungsleitungen der zweiten Anzeige sind im Diagramm grau dargestellt, Klemme E der zweiten Anzeige ist hier mit Pin 6 des Arduino verbunden). In diesem Fall müssen Sie natürlich zwei Kopien der Bibliothek erstellen (z. B. OLED1 und OLED2), in denen alle Ausgänge mit Ausnahme von E gleich sind. Außerdem können die Anzeigen unterschiedliche Konfigurationen und Größen haben (8x2, 16x2, 12x2, 12x4 usw.). .). Dies gilt auch für herkömmliche LCD-Displays des HD44780.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und warum gibt es ein Relais für die Stromversorgung? Der Hauptnachteil des WS0010 ist das Fehlen von Hardware "rezet". In HD44780 kann das eingebaute Rezet gerechtfertigt sein - der Autor hat nicht genug Erfahrung mit LCD-Bildschirmen, um dies sicher zu sagen. Aber Winstar, der versuchte, dem Standard in seiner Entwicklung zu folgen, konnte diese Aufgabe eindeutig nicht bewältigen. Ein Neustart des Controllers ohne Ausschalten der Stromversorgung führt zu Trübungen auf dem Display. Sie können diese nur beseitigen, indem Sie die Leistung des gesamten Stromkreises unter einen Hut bringen und das Display von Grund auf neu initialisieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus kann die Anzeige beim Ein- und Ausschalten der Stromversorgung die Leitungen stellenweise verwirren. Die Leute behaupten, dass eine vollständige 8-Bit-Aufnahme (anstelle von 4-Bit) hilft, aber es hat für mich noch schlimmer funktioniert. Sie bestehen auch beharrlich darauf, dass in hypothetischen „neuen Chargen“ all dies bereits behoben wurde, aber es ist kaum zu glauben (über welche Art von „neuen“ Chargen sprechen wir, wenn Winstar seit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2008</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OLED-Displays herausbringt </font><font style="vertical-align: inherit;">und ich Displays von 13 und 14 Jahren hatte freigeben?).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relais und so einstellen, dass die Anzeige beim Neustart des Arduino künstlich zurückgesetzt wird, ohne die Stromversorgung auszuschalten. Dadurch wird der Müll auf dem Bildschirm zuverlässig beseitigt. Die Stromversorgung des Displays (oder der Displays) wird separat über dieses Relais eingeschaltet, das zu Beginn des Einrichtungsvorgangs über den freien Arduino-Pin (in diesem Fall Pin 4) eingeschaltet wird, wenn der Controller bereits stabil arbeitet. Und bevor Sie das Relais einschalten, ist es schön, eine zusätzliche Verzögerung von 1000 ms anzugeben (siehe Skizze unten). Das angegebene Relais EDR202A05 ist ein Reed-Relais, der Wicklungsstrom beträgt 10 mA und wird daher leise vom Arduino-Ausgang gesteuert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was die Verwechslung zwischen den Leitungen beim Einschalten betrifft, so entlastet dieser Effekt zusätzlich zu den obigen Änderungen im Initialisierungsverfahren die Leistung des gesamten Stromkreises perfekt von einer ausreichend starken (mindestens 1-2 A) externen Quelle mit einer stabilen Spannung unter Last von mindestens 7,5 Volt. </font><font style="vertical-align: inherit;">Diese Abhängigkeit von der Ernährung ist offensichtlich eine Quelle von Diskrepanzen in vielen Veröffentlichungen, in denen viele Autoren behaupten, dass für sie alles gut funktioniert. </font><font style="vertical-align: inherit;">In diesem Fall kann das Display (oder die Displays) über den internen Arduino-Stabilisator (Pin 5 V der Platine) oder über einen separaten Stabilisator angeschlossen werden. Hauptsache, die Eingangsspannung des Stabilisators sollte unabhängig vom Stoßstoß zum Zeitpunkt des Einschaltens stabil genug sein.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Überprüfung habe ich eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demoskizze</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gesendet, </font><i><font style="vertical-align: inherit;">Proba_Rus_Liquid_Crystal_OLED</font></i><font style="vertical-align: inherit;"> , die eine Kalenderuhranzeige mit einem externen Temperatursensor simuliert:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel WEH1602 anzeigen</font></font></b><div class="spoiler_text"><pre><code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus_OLED.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// initialize the library with the numbers of the interface pins</span></span>
<span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RelayPin 4 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 4 -  </span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
delay (<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
pinMode(RelayPin, OUTPUT);<font></font>
digitalWrite(RelayPin, HIGH); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
delay (<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
  OLED1.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//16  2 </span></span><font></font>
  OLED1.clear();<font></font>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,  </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"-22,3\337C"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//10  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 11 </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"10:22"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"16.01.17 "</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 16  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 13  ":"</span></span>
  OLED1.blink(); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
   delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
<span class="hljs-comment"><span class="hljs-comment">/*        
        13,0 
    blink
*/</span></span><font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle oben genannten charakteristischen Änderungen in der Bibliothek werden hier angewendet. </font><font style="vertical-align: inherit;">Das Programm zeigt auch, wie der Doppelpunkt mit der Funktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blink ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Stunden: Minuten </font><i><font style="vertical-align: inherit;">blinkt</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Beachten Sie, dass eine neue Ausgabe an derselben Position das Blinken der Vertrautheit zerstört. Wenn Sie sie aktualisieren, müssen Sie sie erneut fortsetzen, nachdem Sie zuvor den unsichtbaren Cursor auf dieselbe Position 13 in der Nulllinie gesetzt haben. </font><font style="vertical-align: inherit;">Mit einer echten Uhrenaktualisierung ist es möglicherweise einfacher, nur die Zahlen an den Positionen 11-12 und 14-15 zu aktualisieren, wobei der blinkende Doppelpunkt intakt bleibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ergebnisse der Beispielausgabe sind auf dem Foto dargestellt:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4e1/a88/249/4e1a8824925e055d968ab80e68f52229.jpg" width="500" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass das Foto (in diesem Fall) nicht das Leuchten des grünen OLED-Displays vermittelt. Tatsächlich ist es eine tiefgrüne Farbe mit einer Wellenlänge, die kürzer als die üblichen 568 nm in LED-Anzeigen (Siebensegmente oder Matrix) ist. Warum scheinen letztere vor dem Hintergrund der OLED "verblasst" zu sein, und ihre kombinierte Anwendung ist schwierig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der WS0010 verfügt über einen grafischen Modus, und die grafischen OLED-Anzeigen von Winstar (z. B. WEG010016) verfügen ebenfalls über diesen Controller. Jemand bemerkte, dass sie sogar die gleiche Matrix haben. Meiner Meinung nach ist der Versuch, den Grafikmodus für eine Textzeilenanzeige zu verwenden, ziemlich sinnlos: Die Zeilenanzeige verfügt über Hardware-festgelegte dunkle Räume zwischen Zeichen und Linien, die das Bild äußerst unästhetisch machen (siehe </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zahlreiche Beispiele für</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solche Versuche).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein letzter Hinweis: zur Haltbarkeit von Winstar OLEDs. </font><font style="vertical-align: inherit;">In Datenblättern wird die Zeit mit 100.000 Stunden angegeben, dh mit 11 Jahren. </font><font style="vertical-align: inherit;">Trotzdem hat eines der Displays des 13. Erscheinungsjahres (gelbes Leuchten) bis zum heutigen Moment (Winter des 16.) in mir stark an Helligkeit verloren. </font><font style="vertical-align: inherit;">Es ist lustig, dass der Rest der gleichen (grün) und späteren (gelb und grün 14 Jahre alt) Partei keine Anzeichen von Sterben zeigt. </font><font style="vertical-align: inherit;">Daher nehme ich mit Sicherheit nicht an, etwas zu sagen, aber für den Fall rate ich Ihnen, die Displays nicht in die Platine zu löten, sondern an den Steckverbindern zu installieren, damit sie im Falle eines Problems problemlos ausgetauscht werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können das Archiv mit einer kostenlosen Bibliothek und einem Beispiel </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunterladen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: Es gab eine Lösung für das Problem eines stabilen Starts ohne Manipulation der Leistung: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://geektimes.ru/post/287234/</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de400833/">https://habr.com/ru/post/de400833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de400823/index.html">Angriffe auf das Gitter: Der gefährlichste Saboteur ist das Eichhörnchen</a></li>
<li><a href="../de400825/index.html">Google erneut beschuldigt, seine Produkte in einer eigenen Suchmaschine beworben zu haben</a></li>
<li><a href="../de400827/index.html">ASUS Tinker Board: ein weiterer Konkurrent von RPi</a></li>
<li><a href="../de400829/index.html">Неумирающий миф: почему пациенты называют погоду причиной боли в суставах</a></li>
<li><a href="../de400831/index.html">Für einfache ultraleichte Raketen ist etwas unglücklich</a></li>
<li><a href="../de400835/index.html">Unerwartete Reaktion: Das Rote Kreuz muss seine Symbolik aus dem Spiel Prison Architect entfernen</a></li>
<li><a href="../de400837/index.html">Der Mach-Photonenkegel wurde zuerst gefilmt. Das Gehirn ist das nächste</a></li>
<li><a href="../de400839/index.html">Synchrones WLAN: Alliance bereitet sich auf die Zertifizierung der TimeSync-Technologie vor</a></li>
<li><a href="../de400841/index.html">Ja, damit du mit 80 GB im Kopf lebst! Wie Hollywood Technologie zum Spott macht</a></li>
<li><a href="../de400843/index.html">Fragen Sie Ethan: Wie groß war das neugeborene Universum?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>