<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè• üçÑ üåâ Todo lo que quer√≠as saber sobre SwiftUI pero ten√≠as miedo de preguntar üåÆ üë®‚Äçüë©‚Äçüëß üÜé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Mi nombre es Renat, estoy desarrollando un servicio de an√°lisis de suscripci√≥n en iOS: Apphud. 


 Como saben, Apple en WWDC 2019 present√≥ su nue...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Todo lo que quer√≠as saber sobre SwiftUI pero ten√≠as miedo de preguntar</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/455970/"><p><img src="https://habrastorage.org/getpro/habr/post_images/cf0/767/da2/cf0767da24045153cfec395c841c5a52.png"></p><br><p>  Hola  Mi nombre es Renat, estoy desarrollando un servicio de an√°lisis de suscripci√≥n en iOS: Apphud. </p><br><p> Como saben, Apple en WWDC 2019 present√≥ su nuevo marco SwiftUI, que est√° dise√±ado en el futuro para reemplazar (¬øo no?) El familiar UIKit.  SwiftUI le permite describir la interfaz de la aplicaci√≥n en un estilo declarativo y reduce en gran medida la cantidad de c√≥digo. </p><br><p>  Apple ya ha introducido algunos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutoriales</a> interesantes en ingl√©s con muchos ejemplos.  Tratar√© de hablar sobre el nuevo marco en forma de preguntas y respuestas.  Entonces vamos. <a name="habracut"></a></p><br><h2 id="pered-nachalom-raboty">  Antes de empezar </h2><br><p>  Para trabajar con SwiftUI, debe descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Xcode 11 Beta</a> .  Tambi√©n debe ser un desarrollador registrado de Apple.  Tener la √∫ltima versi√≥n de macOS Catalina es deseable, pero no necesario.  Sin ella, Canvas no estar√° disponible. </p><br><p>  Por lo tanto, en Xcode 11 Beta, cree un nuevo proyecto y aseg√∫rese de que "Usar SwiftUI" est√© marcado. </p><br><h2 id="voprosy-i-otvety">  Preguntas y respuestas </h2><br><h3 id="kuda-podevalsya-interface-builder">  ¬øA d√≥nde fue Interface Builder? </h3><br><p> SwiftUI ya no necesita <em>Interface Builder</em> : ha sido reemplazado por <em>Canvas</em> , un editor de interfaz interactivo que est√° estrechamente relacionado con el c√≥digo.  Al escribir c√≥digo, su parte visual en el <em>lienzo se</em> genera autom√°ticamente y viceversa.  Muy conveniente y lo m√°s importante seguro.  Ahora su aplicaci√≥n no se <code>@IBOutlet</code> debido al hecho de que olvid√≥ actualizar la <code>@IBOutlet</code> con la variable.  En este art√≠culo no tocaremos el <em>lienzo</em> , consideraremos solo el c√≥digo. </p><br><h3 id="izmenilsya-li-zapusk-prilozheniya">  ¬øHa cambiado el inicio de la aplicaci√≥n? </h3><br><p>  S√≠, ahora el objeto inicial en la interfaz de la aplicaci√≥n no es <code>UIWindow</code> , sino la nueva clase <code>UIScene</code> (o su descendiente <code>UIWindowScene</code> ).  Y se agrega una ventana a la escena.  Estos cambios afectan no solo a SwiftUI, sino a iOS 13 en su conjunto. </p><br><p>  Cuando cree un proyecto, ver√° los <em>archivos</em> <em>AppDelegate</em> , <em>SceneDelegate</em> y <em>ContentView</em> .  <em>SceneDelegate</em> : un delegado de la clase <code>UIWindowScene</code> , utilizado para controlar escenas en la aplicaci√≥n.  Muy reminiscente de <em>AppDelegate</em> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/02e/176/a9b/02e176a9b712281554aff7496a166ec1.png" alt="La clase SceneDelegate se especifica en Info.plist"><br>  <em>La clase SceneDelegate se especifica en Info.plist</em> </p><br><p>  En el m√©todo delegado, <code>scene: willConnectTo: options:</code> crea una ventana y un <code>UIHostingController</code> ra√≠z que contiene un <code>ContentView</code> .  <code>ContentView</code> es nuestra p√°gina de "inicio".  Todo el desarrollo se llevar√° a cabo en esta clase. </p><br><h3 id="chem-view-otlichaetsya-ot-uiview">  ¬øEn qu√© se diferencia View de UIView? </h3><br><p>  <code>ContentView.swift</code> abra <code>ContentView.swift</code> , ver√° una declaraci√≥n de contenedor de ContentView.  Como ya entendi√≥, no hay <code>viewDidLoad</code> familiares de <code>viewDidLoad</code> o <code>viewDidAppear</code> <code>viewDidLoad</code> <code>viewDidAppear</code> .  La base de las pantallas aqu√≠ no es el <code>UIViewController</code> , sino la <em>Vista</em> .  Lo primero que debe notar es que <code>ContentView</code> es una <code>struct</code> que acepta el protocolo <code>View</code> .  S√≠, <code>View</code> convertido en un protocolo, y muy simple.  El √∫nico m√©todo que necesita implementar en <code>ContentView</code> es describir el <code>body</code> la variable.  Todas sus <em>subvistas</em> y <em>vistas</em> personalizadas deben aceptar el protocolo de <code>View</code> , es decir, deben tener una variable de <code>body</code> . </p><br><h3 id="chto-takoe-body">  ¬øQu√© es el cuerpo? </h3><br><p>  <code>Body</code> es directamente nuestro contenedor donde se agregan todas las dem√°s <em>subvistas</em> .  Esto es algo similar al <em>cuerpo</em> en una p√°gina <em>html</em> , donde la p√°gina <em>html</em> es <code>ContentView</code> .  <code>Body</code> siempre debe tener exactamente un descendiente y cualquier clase que acepte el protocolo <code>View</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>) } }</code> </pre> <br><h3 id="opaque-return-types-ili-chto-takoe-some">  ¬øTipos de retorno opacos o cu√°les son algunos? </h3><br><p>  La construcci√≥n de <code>some TypeName</code> es una innovaci√≥n de Swift 5.1 llamada <em>tipo de retorno opaco</em> .  Se utiliza para casos en los que no es importante para nosotros qu√© objeto devolver, lo principal es que admite el tipo especificado, en este caso, el protocolo de visualizaci√≥n. </p><br><p>  Si simplemente escribi√©ramos <code>var body: View</code> , esto significar√≠a que deber√≠amos devolver la <code>View</code> .  La clase <code>Any</code> tampoco funciona, ya que tendr√≠amos que realizar una operaci√≥n de conversi√≥n de tipo ( <em>utilizando el operador</em> <code>as!</code> ).  Por lo tanto, se les ocurri√≥ la palabra especial <code>some</code> delante del nombre del protocolo para indicar el <em>tipo de retorno opaco</em> .  En lugar de <code>View</code> podemos devolver <code>Text</code> , <code>Image</code> , <code>VStack</code> , cualquier cosa, ya que todos admiten el protocolo <code>View</code> .  Pero debe haber exactamente un elemento: al intentar devolver m√°s de una <code>View</code> compilador arrojar√° un error. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e17/8d3/628/e178d3628d10d0cd438d776a9c4ecd70.png"><br>  <em>Error de compilaci√≥n al intentar devolver m√°s de un elemento al cuerpo</em> </p><br><h3 id="chto-za-sintaksis-vnutri-skobok-i-gde-addsubview">  ¬øCu√°l es la sintaxis dentro de los corchetes y d√≥nde est√° addSubview? </h3><br><p>  Swift 5.1 introdujo la capacidad de agrupar objetos en un solo conjunto en un estilo declarativo.  Esto es similar a una matriz dentro de un bloque de <em>cierre</em> , pero los elementos se enumeran desde una nueva l√≠nea sin comas y sin <em>retorno</em> .  Este mecanismo se llamaba <em>Function Builder</em> . </p><br><p>  Esto es ampliamente utilizado en SwiftUI.  Basado en <em>Function Builder,</em> <code>ViewBuilder</code> , un dise√±ador de interfaz declarativo.  Con <code>ViewBuilder</code> ya no necesitamos escribir <code>addSubview</code> para cada elemento, simplemente enumere todas las <code>View</code> desde una nueva l√≠nea dentro del bloque de <em>cierre</em> .  SwiftUI agregar√° y agrupar√° elementos en un contenedor principal m√°s complejo. </p><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@available</span></span>(iOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, <span class="hljs-type"><span class="hljs-type">OSX</span></span> <span class="hljs-number"><span class="hljs-number">10.15</span></span>, tvOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, watchOS <span class="hljs-number"><span class="hljs-number">6.0</span></span>, *) @_functionBuilder <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// Builds an empty view from an block containing no statements, `{ }`. public static func buildBlock() -&gt; EmptyView /// Passes a single view written as a child view (e..g, `{ Text("Hello") }`) through /// unmodified. public static func buildBlock&lt;Content&gt;(_ content: Content) -&gt; Content where Content : View }</span></span></code> </pre> <br><p>  <em>Anuncio de ViewBuilder en el marco de SwiftUI</em> </p><br><h3 id="kak-dobavlyat-uilabel-uiimageview-i-drugie-elementy">  ¬øC√≥mo agregar UILabel, UIImageView y otros elementos? </h3><br><p>  Los elementos se crean de manera muy simple: cada <code>View</code> debe escribirse desde una nueva l√≠nea y cambiar la apariencia utilizando las funciones modificadoras ( <em>modificadores de vista</em> ).  La diferencia entre modificadores y funciones que nos son familiares es que siempre devuelven un objeto contenedor en lugar de <code>void</code> .  Por lo tanto, podemos crear cadenas enteras de modificadores a trav√©s del punto. </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{ <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Yet another subtitle"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">20</span></span>)) } }</code> </pre> <br><p>  Sin embargo, no todos los controles y <em>View</em> tienen sus an√°logos en SwiftUI.  Aqu√≠ hay una lista parcial de clases de UIKit y sus an√°logos: </p><br><ul><li><p>  <code>UITableView</code> -&gt; <code>List</code> </p><br></li><li><p>  <code>UICollectionView</code> no tiene an√°logo </p><br></li><li><p>  <code>UILabel</code> -&gt; <code>Text</code> </p><br></li><li><p>  <code>UITextField</code> -&gt; <code>TextField</code> </p><br></li><li><p>  <code>UIImageView</code> -&gt; <code>Image</code> </p><br></li><li><p>  <code>UINavigationController</code> -&gt; <code>NavigationView</code> </p><br></li><li><p>  <code>UIButton</code> -&gt; <code>Button</code> </p><br></li><li><p>  <code>UIStackView</code> -&gt; <code>HStack</code> / <code>VStack</code> </p><br></li><li><p>  <code>UISwitch</code> -&gt; <code>Toggle</code> </p><br></li><li><p>  <code>UISlider</code> -&gt; <code>Slider</code> </p><br></li><li><p>  <code>UITextView</code> no tiene an√°logo </p><br></li><li><p>  <code>UIAlertController</code> -&gt; <code>Alert</code> / <code>ActionSheet</code> </p><br></li><li><p>  <code>UISegmentedControl</code> -&gt; <code>UISegmentedControl</code> </p><br></li><li><p>  <code>UIStepper</code> -&gt; <code>Stepper</code> </p><br></li><li><p>  <code>UIDatePicker</code> -&gt; <code>DatePicker</code> </p><br></li></ul><br><h3 id="kak-proishodit-navigaciya-mezhdu-ekranami">  ¬øC√≥mo es la navegaci√≥n entre las pantallas? </h3><br><p>  El <em>controlador de navegaci√≥n</em> asume el papel de un <code>NavigationView</code> especial.  Simplemente envuelva su c√≥digo en <code>NavigationView{}</code> .  Y la acci√≥n de transici√≥n en s√≠ se puede agregar a un bot√≥n especial <code>NavigationLink</code> , que empuja la pantalla condicional <code>DetailView</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">DetailView</span></span>() { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } }</code> </pre> <br><p>  ¬øC√≥mo presentar nuevas vistas modalmente?  Esto se hace, por ejemplo, usando la construcci√≥n de <em>hoja</em> : </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">Button</span></span>(action: { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Button Pushed"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.show_modal = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Present Modal"</span></span>) }.sheet(isPresented: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.$show_modal) { <span class="hljs-type"><span class="hljs-type">ModalView</span></span>() }</code> </pre> <br><p>  Como se mencion√≥ anteriormente, el <code>body</code> puede devolver no solo una instancia de <code>View</code> , sino tambi√©n cualquier otra clase que acepte este protocolo.  ¬°Esto nos da la oportunidad de <code>DetailView</code> no <code>DetailView</code> , sino incluso <code>Text</code> o <code>Image</code> ! </p><br><h3 id="kak-raspolagat-elementy-na-ekrane">  ¬øC√≥mo organizar los elementos en la pantalla? </h3><br><p>  Los elementos est√°n dispuestos independientemente uno del otro y pueden ubicarse verticalmente dentro de <code>VStack</code> , horizontalmente <code>HStack</code> y uno encima de otro <code>ZStack</code> .  <code>ScrollView</code> y <code>ListView</code> tambi√©n est√°n disponibles para nosotros.  Puede alternar y compartir estos contenedores para obtener cualquier malla de elementos. </p><br><p>  Al combinar contenedores entre s√≠, puede obtener un √°rbol bastante grande con una gran cantidad de archivos adjuntos.  Sin embargo, SwiftUI est√° optimizado espec√≠ficamente para esto, por lo que la anidaci√≥n profunda de contenedores no afecta el rendimiento.  Esto se afirma en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">video con wwdc</a> (a <em>partir de las 15:32</em> ). </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">LargeView</span></span>(timeString: subtitle)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"See Fullscreen"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) } } }</code> </pre> <br><h3 id="kak-pokazat-navigation-bar">  ¬øC√≥mo mostrar la barra de navegaci√≥n? </h3><br><p>  Declarar una <code>NavigationView</code> no <code>NavigationView</code> suficiente; debe especificar un <em>t√≠tulo</em> y estilo de <em>navegaci√≥n</em> para la <em>barra de navegaci√≥n</em> . </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{}.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }</code> </pre> <br><p>  Tenga en cuenta que la funci√≥n <code>navigationBarTitle</code> no se llama en <code>NavigationView</code> , sino en su <code>View</code> interna.  <em>DisplayMode</em> es un par√°metro que indica el estilo de la <em>barra de navegaci√≥n</em> : grande o est√°ndar. </p><br><h3 id="est-li-analog-metoda-viewdidload">  ¬øExiste un an√°logo del m√©todo viewDidLoad? </h3><br><p>  Si desea ejecutar c√≥digo al inicializar la <code>View</code> , puede hacerlo agregando la funci√≥n onAppear {}.  <em>OnAppear</em> se puede agregar a cualquier <code>View</code> , por ejemplo, a <code>VStack</code> .  En este ejemplo, cuando el contenedor aparece en la pantalla, se realiza una solicitud http al servidor. </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination:<span class="hljs-type"><span class="hljs-type">DetailView</span></span>()) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date())"</span></span> } } } }</code> </pre> <br><blockquote>  Llamamos a la funci√≥n <code>loadTime</code> , que solicita la hora actual del servidor y devuelve el modelo <code>WorldTime</code> .  No iremos en ciclos en la clase <code>NetworkService</code> , puede ver todo el c√≥digo, una vez que haya descargado los c√≥digos fuente.  Enlace al final del art√≠culo. </blockquote><p>  La variable <code>var statusString</code> se <code>var statusString</code> para asignarle la hora actual m√°s tarde.  La variable tiene un atributo especial <code>@State</code> .  Que quiere decir? </p><br><h3 id="property-wrappers-ili-chto-takoe-state">  ¬ø <code>@State</code> propiedades o qu√© es <code>@State</code> ? </h3><br><p>  Swift 5.1 introdujo los llamados <em>envoltorios de propiedades</em> (o <em>delegados de propiedades</em> ).  En SwiftUI, <em>los contenedores de propiedades</em> se utilizan para actualizar o enlazar uno de los par√°metros de <em>vista</em> con nuestra propia variable, por ejemplo, el valor del interruptor de <em>alternancia</em> . </p><br><p>  El atributo <code>@State</code> es un atributo especial que se coloca antes de una declaraci√≥n de variable.  Esto nos permite rastrear autom√°ticamente los cambios de propiedad sin c√≥digo adicional.  En el ejemplo anterior, el texto <em>"Hora mundial"</em> cambiar√° a la fecha actual tan pronto como actualicemos el valor de statusString. </p><br><p>  Para enlazar valores ( <em>Enlace de propiedades</em> ), podemos especificar un car√°cter especial <code>$</code> antes del nombre de la variable en el c√≥digo: </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailsView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> changeToggle: <span class="hljs-type"><span class="hljs-type">Bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Toggle</span></span>(isOn: $changeToggle) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Change Toggle"</span></span>) } } }</code> </pre> <br><p>  <em>Al cambiar la posici√≥n del interruptor, el valor de la variable tambi√©n cambiar√°.</em> </p><br><p>  <em>Los envoltorios de propiedades</em> son un componente muy importante de SwiftUI, solo los mencion√© de pasada.  Para conocer m√°s detalladamente <em>los envoltorios de propiedades,</em> mire el video de wwdc <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> (desde el minuto 37), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> (desde el minuto 12) y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> (desde el minuto 19). </p><br><h3 id="kak-dobavlyat-view-v-runtime">  ¬øC√≥mo agregar una vista al tiempo de ejecuci√≥n? </h3><br><p>  Vale la pena se√±alar de inmediato que no puede agregar la <em>vista</em> en ning√∫n momento en el sentido literal de la palabra.  SwiftUI es un marco declarativo que representa la <em>vista</em> completa.  Sin embargo, puede establecer varias condiciones dentro del <em>cuerpo</em> y actualizar el estado de la <em>vista</em> cuando cambian.  En este ejemplo, usamos el grupo m√°s simple de <code>@State ‚Äì if</code> con la variable <code>isTimeLoaded</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isTimeLoaded : <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isTimeLoaded { addNavigationLink() } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) }.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNavigationLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationLink</span></span>(destination: <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"124!!!"</span></span>)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date().description(with: Locale.current))"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.isTimeLoaded = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeString : <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body : some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(timeString).font(.system(size: <span class="hljs-number"><span class="hljs-number">40</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } }</code> </pre> <br><p>  Por cierto, ¬ønot√≥ que la funci√≥n <code>addNavigationLink()</code> no tiene la palabra <code>return</code> ?  Esta es otra innovaci√≥n de Swift 5.1: para funciones con una sola expresi√≥n, ahora es opcional escribir <code>return</code> .  Pero puedes escribir. </p><br><h2 id="zaklyuchenie">  Conclusi√≥n </h2><br><p>  Esto es solo parte de las preguntas y respuestas de SwiftUI.  Examin√© cuestiones generales, espero que este art√≠culo ayude a los principiantes a comprender los puntos principales de este marco.  SwiftUI sigue sin procesar, pero sin duda se mejorar√°. </p><br><p>  La pregunta l√≥gica es: ¬ø <em>vale la pena aprender UIKit?</em>  <em>Por supuesto que si</em> .  UIKit es la base de la programaci√≥n en iOS y se desarrollar√° a√∫n m√°s.  Adem√°s, muchos componentes SwiftUI son una envoltura sobre UIKit.  Bueno, hasta ahora no hay bibliotecas, frameworks, pods para SwiftUI.  Todo tendr√° que ser escrito por ti mismo.  Por lo tanto, es mejor estudiar ambos enfoques de desarrollo, por lo que ser√° un desarrollador m√°s valioso. </p><br><p>  Puede descargar las fuentes del proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><p>  Gracias por leer el art√≠culo hasta el final.  Espero que les sea √∫til. </p><br><h2 id="chto-pochitat">  Que leer </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo implementar men√∫s contextuales en iOS 13</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">15 consejos para llevar su aplicaci√≥n de suscripci√≥n a la tienda de aplicaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gu√≠a de notificaciones de suscripciones de Apple para iOS.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øSon realmente buenos?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455970/">https://habr.com/ru/post/455970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455954/index.html">Uso y protecci√≥n del legado en el mundo moderno.</a></li>
<li><a href="../455956/index.html">Chromium no es solo un navegador, sino tambi√©n un buen marco</a></li>
<li><a href="../455958/index.html">Aut√≥matas celulares en evoluci√≥n</a></li>
<li><a href="../455962/index.html">Conferencia de ciencia de datos y tr√≥picos</a></li>
<li><a href="../455968/index.html">Hago un medio engranaje grande en paneles solares por 250,000 rublos (1 parte)</a></li>
<li><a href="../455972/index.html">Slurm: la oruga se ha convertido en una mariposa</a></li>
<li><a href="../455976/index.html">Gabinetes, m√≥dulos o unidades: ¬øqu√© elegir para la administraci√≥n de energ√≠a en el centro de datos?</a></li>
<li><a href="../455978/index.html">Lambdas: de C ++ 11 a C ++ 20. Parte 2</a></li>
<li><a href="../455980/index.html">iOS Digest No. 7 (31 de mayo - 13 de junio)</a></li>
<li><a href="../455982/index.html">Es hora de reemplazar GIF con video AV1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>