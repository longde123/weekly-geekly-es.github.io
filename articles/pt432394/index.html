<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèº üê£ ü§∏üèº 9 Voltas de Automa√ß√£o de Armaz√©m Lamoda üë®üèΩ‚ÄçüöÄ üï¥Ô∏è ü§öüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nosso armaz√©m, do tamanho de dois quadrados vermelhos e altura de 5 andares, fica aberto o ano todo e nunca dorme - 24/7 364 dias por ano (o √∫nico dia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>9 Voltas de Automa√ß√£o de Armaz√©m Lamoda</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lamoda/blog/432394/">  Nosso armaz√©m, do tamanho de dois quadrados vermelhos e altura de 5 andares, fica aberto o ano todo e nunca dorme - 24/7 364 dias por ano (o √∫nico dia de folga √© 1¬∫ de janeiro).  Armazenamos e atendemos mais de 8.000.000 de mercadorias, todos os dias mais de 300 operadoras mudam.  Eles trabalham com mercadorias provenientes de todo o mundo e coletam pedidos de usu√°rios de quatro pa√≠ses: R√∫ssia, Ucr√¢nia, Bielorr√∫ssia e Cazaquist√£o.  Nessa escala, os neg√≥cios exigem automa√ß√£o impec√°vel. <br><br>  Por dentro, eu, Pasha Finkelstein - l√≠der da equipe de desenvolvimento e automa√ß√£o do armaz√©m - vou lhe dizer o que uma solu√ß√£o de c√≥digo aberto pode crescer se voc√™ anexar uma boa equipe de desenvolvimento e uma tarefa de neg√≥cios muito espec√≠fica a ela. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07f/fc8/d44/07ffc8d44536a1ea90fb4755eb2ee06a.jpg"><br><a name="habracut"></a><br><h2>  L√≥gica b√°sica </h2><br>  Tr√™s processos principais de qualquer armaz√©m: aceita√ß√£o de mercadorias, armazenamento e expedi√ß√£o.  O ciclo simplificado de nosso armaz√©m √© semelhante a: identifica√ß√£o prim√°ria, controle de qualidade, coloca√ß√£o, sele√ß√£o e reserva de um pedido, pesquisa, classifica√ß√£o, embalagem, transfer√™ncia para um servi√ßo de entrega.  Quando o cliente devolve o produto, o ciclo se repete.  Cada entidade f√≠sica que participa desses processos tem sua pr√≥pria representa√ß√£o informacional, por exemplo: caminh√£o, produto, c√©lula do arm√°rio, parcela, material de embalagem, cont√™iner, etc.  Todos os movimentos significativos e mudan√ßas no status das mercadorias s√£o convertidos em sistemas cont√°beis e absolutamente todas as a√ß√µes com as mercadorias dentro do armaz√©m s√£o registradas. <br><br>  O WMS (Sistema de Gerenciamento de Armaz√©m) controla o ciclo de vida de cada produto no dep√≥sito, desde o momento em que o caminh√£o com as mercadorias do fornecedor chega ao dep√≥sito at√© as mercadorias serem enviadas ao cliente. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/58e/269/41b/58e26941b0d48719f1330c7d91511db9.jpg"><br><br><h2>  As especificidades da automa√ß√£o de moda </h2><br>  Nossa empresa trabalha no campo da moda e estilo de vida, que apresenta certas tarefas no armaz√©m: o produto pode ser fr√°gil (√≥culos, rel√≥gios), tamanho fora do padr√£o (botas de inverno ou joias), premium (em embalagens especiais) - ou possuir outras caracter√≠sticas espec√≠ficas que o armaz√©m deve levar em considera√ß√£o.  Portanto, √© imposs√≠vel abandonar completamente o uso de trabalho manual nas √°reas de armazenamento. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/396/543/c82/396543c82a6d780bb26781e69a6acdec.jpg"><br><br>  Todos os outros processos s√£o automatizados - aceita√ß√£o de mercadorias, transfer√™ncia para a √°rea de embarque, classifica√ß√£o, embalagem e prepara√ß√£o para embarque.  Cada um desses processos requer equipamentos especiais e um processo operacional.  A m√°gica acontece quando todos esses processos "se unem" e come√ßam a trabalhar juntos - gra√ßas aos nossos sistemas. <br><br>  Qualquer supervis√£o na automa√ß√£o do armaz√©m - seja uma interface que contribua para erros do operador, um processo n√£o ideal etc.  - Isso √© um atraso no envio, o tempo de inatividade de todo o complexo, enormes perdas.  Al√©m disso, a cada erro, criamos uma experi√™ncia negativa do cliente.  Portanto, √© importante para n√≥s que o armaz√©m funcione como um rel√≥gio. <br><br><h2>  C√≥digo aberto e o caminho para o pr√≥prio desenvolvimento </h2><br>  Na fase de abertura, usamos um armaz√©m externo.  Com o crescimento dos volumes, come√ßamos a entender que precisamos de controle total sobre os processos operacionais e uma alta taxa de altera√ß√£o desses processos, por isso decidimos avan√ßar em dire√ß√£o ao nosso pr√≥prio armaz√©m e desenvolvimento. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/077/011/038/0770110384fcb3e136948883f60de8c8.jpg"><br><br><blockquote>  A principal quest√£o que nos confrontou foi a elabora√ß√£o dos processos operacionais em todos os detalhes.  At√© onde e como os funcion√°rios v√£o, quantas verifica√ß√µes eles fazem, etc.  E j√° nesses processos, era necess√°rio implantar o WMS, que gerencia atividades operacionais e automatiza opera√ß√µes rotineiras. </blockquote><br>  Para come√ßar, eles adotaram uma solu√ß√£o de c√≥digo aberto em Java e decidiram montar sua pr√≥pria equipe de desenvolvimento, principalmente porque j√° existe uma base adequada.  Aumentamos a funcionalidade e, em seguida, assumimos o n√∫cleo do sistema: nos livramos do legado e de um cliente gordo, realizamos refatora√ß√£o, desenvolvemos novos servi√ßos para dar suporte aos processos operacionais. <br><br><h2>  Est√°gios de automa√ß√£o </h2><br>  As principais mudan√ßas foram realizadas pelas ‚Äúondas‚Äù, juntamente com a reestrutura√ß√£o dos pr√≥prios processos. <br><br><blockquote>  At√© o momento, ele passou por nove est√°gios de moderniza√ß√£o, e n√£o pretendemos nos deter nisso. </blockquote><br><ul><li>  No primeiro e no segundo est√°gio, automatizamos os processos de remessa de pedidos - adicionamos transportadores, l√≥gica para classifica√ß√£o de mercadorias, classifica√ß√£o automatizada de pedidos por paletes. <br></li><li>  No terceiro e quarto est√°gio, focamos nos processos de aceita√ß√£o: aprendemos a separar os fluxos de entrada de mercadorias por diferentes tipos e zonas de armazenamento. <br></li><li>  A quinta fase adicionou elevadores automatizados entre os andares - foi assim que o trabalho come√ßou na √°rea de armazenamento. <br></li><li>  A sexta fase foi a mais cr√≠tica quando fechamos as zonas de aceita√ß√£o e expedi√ß√£o, percorrendo toda a automa√ß√£o. <br></li><li>  Na s√©tima e oitava fases, fizemos altera√ß√µes nos processos na zona de aceita√ß√£o e adicionamos novas zonas, elevadores e transportadores: escalamos a automa√ß√£o existente. <br></li><li>  Na nona fase, eles adicionaram um novo edif√≠cio ao armaz√©m e o integraram ao sistema de automa√ß√£o existente. <br></li></ul><br><h2>  Implementa√ß√£o </h2><br>  Nossas principais tecnologias: Java, Postgres, Wildfly, Redis, ActiveMQ. <br><br>  O WMS √© escrito em Java 8. Mas n√£o faz muito tempo, consertamos o √∫ltimo m√≥dulo, que impedia a transi√ß√£o para o Java 11, ser√° atualizado em um futuro pr√≥ximo. <br><br>  Um rack de servidor instalado diretamente no armaz√©m √© reservado para o WMS.  Isso nos d√° muito mais confian√ßa de que o WMS funcionar√° mesmo que a eletricidade e / ou a Internet estejam desligadas.  A √∫nica coisa que sofrer√° √© que as mensagens para o sistema cont√°bil chegar√£o com um atraso.  O WildFly √© usado como servidor de aplicativos, embora ainda n√£o seja a vers√£o mais recente.  A migra√ß√£o para o √∫ltimo tamb√©m est√° nos planos.  Tudo j√° foi escrito para a mudan√ßa, mas ainda n√£o conseguimos realizar testes funcionais e de carga e, antes do ano novo, a carga √© relativamente alta.  Um ActiveMQ comprovado tamb√©m √© usado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xw/qe/ue/xwqeueu8jlnqlc4gthjnscjbs54.jpeg"></div><br>  Os dados que armazenamos no PostgreSQL.  A principal ess√™ncia do nosso sistema √© obviamente um produto.  √Äs vezes, os funcion√°rios do armaz√©m criam solu√ß√µes alternativas para simplificar seu trabalho, por exemplo, digitalizam o mesmo c√≥digo de barras 50 vezes, e o produto em si √© simplesmente jogado manualmente sem digitalizar, sem entrar em detalhes, como jeans ou camisetas, ent√£o inserimos etiquetas identificando uma unidade espec√≠fica bens, apoiando-o na infraestrutura.  As informa√ß√µes sobre essas unidades s√£o armazenadas em um banco de dados PostgreSQL de 2 terabytes. <br><br>  A maior parte do local n√£o √© ocupada nem por mercadorias, mas por uma auditoria das a√ß√µes dos trabalhadores do armaz√©m.  Sendo um sistema cr√≠tico para os neg√≥cios, o armaz√©m deve saber por que algo apareceu no sistema ou desapareceu - n√£o podemos permitir altera√ß√µes n√£o rastreadas.  No momento, estamos pensando em levar essa parte do banco de dados para uma entidade separada no MongoDB. <br><br>  As esta√ß√µes de trabalho da equipe do armaz√©m s√£o thin clients da web.  Em algum momento do in√≠cio da automa√ß√£o, tudo isso funcionava de acordo com o princ√≠pio de um cliente espesso, que criava certas dificuldades, em particular, com grandes lan√ßamentos, que inclu√≠am altera√ß√µes na interface: cerca de 150 esta√ß√µes de trabalho precisavam ser atualizadas manualmente.  Isso e o fato de n√£o podermos liberar sem que o tempo de inatividade tenha estabelecido limites para n√≥s - poder√≠amos implantar n√£o mais que duas vezes por semana, no in√≠cio da manh√£, quando o turno da noite termina, o que n√£o pode ser chamado de um cronograma conveniente.  Agora, transferimos o WMS para a Web e, no final do ano, abandonaremos completamente os clientes gordos, o que simplificar√° bastante as altera√ß√µes na interface do usu√°rio.  A web e o cluster adicionados em um dos est√°gios removem as restri√ß√µes de frequ√™ncia e hora dos lan√ßamentos - agora os usu√°rios aprender√£o sobre lan√ßamentos apenas se algo der errado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccd/d87/54e/ccdd8754eb96b3dd528300dca4f35e4b.png"><br><br>  H√° tamb√©m um interessante "ex√≥tico" em nosso armaz√©m.  Por exemplo, o Haskell mencionado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://radar.thoughtworks.com/%3FsheetId%3D">Technoradar</a> , no qual est√° escrito o back-end para visualizar um classificador de itens (esta √© uma m√°quina que pode compor produtos de um pacote juntos e entreg√°-los ao operador de montagem).  H√° um problema puramente computacional, que √© convenientemente resolvido em um estilo funcional.  Naturalmente, ningu√©m vai usar o Haskell para projetos de larga escala. <br><br>  Outro elemento do armaz√©m que mencionamos no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo sobre o Technoradar</a> √© uma m√°quina de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estado</a> auto-escrita que ‚Äúmonitora‚Äù a sequ√™ncia correta de a√ß√µes com cada produto.  Como todo o sistema, ele se desenvolveu iterativamente, come√ßando com um conjunto simples de restri√ß√µes.  Agora √© uma coisa muito conveniente, profundamente integrada ao nosso sistema.  Esperamos coloc√°-lo em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo aberto</a> em um futuro pr√≥ximo - talvez seja √∫til n√£o apenas para n√≥s. <br><br><h2>  Equipamento de automa√ß√£o </h2><br>  Que automa√ß√£o sem equipamento!  Todo o armaz√©m est√° preso em toda uma rede de transportadores. <br><br>  O classificador de itens mencionado acima funciona no est√°gio de remessa, permitindo a disposi√ß√£o de dezenas de milhares de unidades de mercadorias coletadas do estoque para pedidos espec√≠ficos.  Ao mesmo tempo, o classificador salvou nossos operadores da necessidade de viajar com um carrinho pelo armaz√©m para coletar as mercadorias necess√°rias.  Os pedidos s√£o divididos, cada operador coleta mercadorias apenas do seu andar (economizando tempo em movimento) e o classificador garante que mercadorias de diferentes andares recebam os pedidos certos automaticamente.  A altera√ß√£o do processo operacional em 4 vezes acelerou a montagem do pedido e reduziu significativamente o n√∫mero de erros. <br><br>  Todo o equipamento automatizado √© fornecido pelo nosso parceiro.  Para o gerenciamento de unidades espec√≠ficas, eles t√™m seu pr√≥prio sistema, localizado no rack do servidor ao lado do nosso WMS.  Entre os sistemas, a integra√ß√£o √© configurada em um protocolo de alto n√≠vel - n√≥s nos comunicamos via SOAP.  De nossos processos operacionais no WMS, recorremos ao sistema deles quando, por exemplo, precisamos mover um cont√™iner com mercadorias do ponto A ao ponto B. Ou seja,  do ponto de vista do nosso sistema, toda essa automa√ß√£o parece bastante simples, apesar de sua real complexidade interna. <br><br>  Obviamente, essa aparente simplicidade n√£o funcionou imediatamente.  Nos primeiros est√°gios da automa√ß√£o, tivemos uma "moagem m√∫tua" de tecnologias.  Uma vez que o transportador literalmente queimou nossas mercadorias - a velocidade da correia transportadora era muito alta, "mastigava" as mercadorias e queimava, o que impedia a montagem de outros pedidos.  Talvez a hist√≥ria mais dif√≠cil tenha acontecido no in√≠cio da automa√ß√£o, quando lan√ßamos a primeira fase.  Ontem, o armaz√©m era totalmente manual e, hoje, depois de mudar o interruptor, deveria se tornar autom√°tico.  Mas nada funcionou: devido a um erro na integra√ß√£o do sistema, as mensagens uns dos outros foram interpretadas incorretamente, o que resultou em v√°rios dias de inatividade do armaz√©m e milh√µes de perdas para n√≥s. <br><br>  Agora, o parceiro est√° presente em nosso armaz√©m, planeja providenciar equipamentos conosco quando se trata de uma nova rodada de automa√ß√£o, ajudando a testar novos blocos. <br><br><h2>  Equipe e scrumban </h2><br>  O desenvolvimento de todo esse sistema agora est√° envolvido em uma equipe de 12 pessoas.  Em um dos √∫ltimos est√°gios do pico da moderniza√ß√£o, quando processos automatizados separadamente foram combinados em algo inteiro, at√© 20 desenvolvedores participaram (esse est√°gio exigiu 132 homens-m√™s e incluiu mais de 1.500 confirma√ß√µes).  Mas, quando as transforma√ß√µes em larga escala terminam, algumas pessoas decidiram aprender Go ou Python e mudaram para outras equipes de desenvolvimento. <br><br>  Na equipe, temos gerentes de projeto "cl√°ssicos" que combinam as fun√ß√µes de um produto e um projeto de TI (em m√©dia, uma PM para 5-6 pessoas).  Suas tarefas incluem comunica√ß√£o com nosso principal cliente - um armaz√©m representado por seu diretor e pelo departamento de desenvolvimento de processos operacionais.  De nossa parte, estamos mais preocupados com a moderniza√ß√£o t√©cnica - escolhendo a pilha certa, as atualiza√ß√µes etc.  - E os funcion√°rios do armaz√©m est√£o pensando em otimizar os processos. <br><br>  √Äs vezes, dedicamos tempo √† pesquisa e desenvolvimento no campo.  No sentido literal, chegamos ao armaz√©m, nos comunicamos com turnos seniores, com operadores comuns e esclarecemos quais problemas eles t√™m, o que √© conveniente e inconveniente para se trabalhar.  Em outras palavras, realizamos pesquisas de experi√™ncia do usu√°rio. <br><br>  Gra√ßas a essa abordagem, por exemplo, transformamos a interface do local de trabalho de um funcion√°rio que realiza a aceita√ß√£o de mercadorias.  Inicialmente, era uma interface complexa da empresa com muitos campos, bot√µes e abrevia√ß√µes, em vez de explica√ß√µes textuais.  Mas tentamos otimizar o processo, bem como o design, tornando-o mais semelhante √† p√°gina principal de pesquisa do Google - n√£o t√£o bonita, mas muito funcional.  Quanto mais simples a interface e menos op√ß√µes o operador tiver, onde clicar e o que verificar, menos erros (e o tempo necess√°rio para corrigi-los). <br><br><blockquote>  E o conhecimento acumulado sobre a otimiza√ß√£o dos detalhes agora nos ultrapassa nos momentos mais inesperados: quando nossa equipe estava na institui√ß√£o e em um momento quase todos os participantes observavam a sequ√™ncia de a√ß√µes do caixa.  Ap√≥s cerca de 40 segundos, um colega expressou a ideia geral: "N√£o √© o ideal, voc√™ pode simplific√°-la". </blockquote><br>  Embora a rela√ß√£o entre os pap√©is na equipe seja bastante cl√°ssica, escolhemos um scrumban para a metodologia de desenvolvimento. <br><br>  Experimentamos muito com metodologias, enquanto os dados de "entrada" n√£o eram padr√£o.  Por exemplo, tivemos lan√ßamentos bastante raros.  A restri√ß√£o acima mencionada de dois lan√ßamentos por semana atuou por parte dos processos, mas na verdade implementamos com muito menos frequ√™ncia - em m√©dia, uma vez a cada duas semanas.  Al√©m disso, t√≠nhamos um hardware de automa√ß√£o de armaz√©m, que est√° sendo desenvolvido por uma empresa externa para a cascata limpa, onde todas as altera√ß√µes s√£o agendadas com dois anos de anteced√™ncia com toda a documenta√ß√£o necess√°ria.  No entanto, n√≥s mesmos n√£o pudemos seguir o exemplo deles: precis√°vamos fazer algumas altera√ß√µes no sistema regularmente e for√ßar o cliente a escrever uma tarefa detalhada para cada um deles era in√∫til. <br><br>  Ent√£o scrumban √© um compromisso que fez todos felizes.  Usamos um processo iterativo, mas o sprint √© a vers√£o para n√≥s.  Uma vez por m√™s, nos reunimos com o cliente e planejamos o lan√ßamento: discutimos o que e em que semana lan√ßamos.  Dentro do sprint, o kanban √© implementado - com uma lista de tarefas, progresso, etc.  √â verdade que esse processo est√° mudando gradualmente - por exemplo, n√£o temos um quadro kanban.  Apenas quando um desenvolvedor termina sua tarefa, ele recebe o pr√≥ximo da piscina, de acordo com os planos para o pr√≥ximo lan√ßamento e as compet√™ncias do desenvolvedor. <br><br>  N√≥s gostamos dessa abordagem.  Ele fornece a flexibilidade necess√°ria nas itera√ß√µes e fornece ao cliente comercial a previsibilidade das datas pelas quais determinadas confirma√ß√µes ser√£o implementadas.  E n√£o √© t√£o importante para n√≥s como essa metodologia √© chamada.  O principal √© que tudo funciona. <br><br><h2>  N√£o √© como todo mundo - usando invent√°rio e monitoramento como exemplo </h2><br>  Desenvolvendo processos operacionais, partimos das necessidades de nossa ind√∫stria, portanto, temos algumas caracter√≠sticas individuais. <br><br>  Um bom exemplo √© um invent√°rio.  De acordo com a lei, ela deve ser realizada no armaz√©m uma vez por ano, mas nossos requisitos de neg√≥cios determinam um monitoramento mais detalhado do estoque.  Em primeiro lugar, queremos refletir informa√ß√µes relevantes sobre a disponibilidade de produtos no site e, em segundo lugar, nossos parceiros B2B, as marcas de moda exigem as mesmas informa√ß√µes relevantes.  Portanto, um invent√°rio √© realizado diariamente, 364 dias por ano, prateleira ap√≥s prateleira em todo o complexo de cinco andares de v√°rios edif√≠cios.  E esse processo √© totalmente suportado pelo nosso WMS - seria dif√≠cil implementar essa solu√ß√£o. <br><br>  Agora, o invent√°rio est√° no processo da pr√≥xima atualiza√ß√£o para aumentar a efici√™ncia desse processo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1bc/923/dc8/1bc923dc8f88e94e0be0b0099b0f7eca.jpg"><br><br>  Outro exemplo de nosso pr√≥prio desenvolvimento √© o monitoramento.  √â implementado atrav√©s de um cliente da Web e permite exibir e acompanhar m√©tricas muito interessantes.  Al√©m disso, uma representa√ß√£o visual dessas m√©tricas √© importante para n√≥s.  De fato, o monitoramento √© um armaz√©m representado em um cronograma simples, onde vemos claramente em que lugares tudo funciona bem e onde os problemas s√£o observados (at√© um operador espec√≠fico).  Mais importante, com essa vis√£o, podemos entender por que esses problemas surgem. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f1/3ac/373/3f13ac3730e932a0a73bbf8e7a2eb9d0.png"><br><br><h2>  Trabalhadores de armaz√©m de KPI e Redis </h2><br>  A introdu√ß√£o de novas tecnologias, atualiza√ß√µes, refatora√ß√£o - tudo √© √≥timo.  Mas nosso WMS funciona em neg√≥cios reais, ent√£o aqui temos que resolver n√£o apenas esses problemas.  Parte do nosso trabalho √© a prote√ß√£o contra "hackers" internos - funcion√°rios de armaz√©m engenhosos que inventam novas maneiras de executar KPI ignorando a tarefa. <br><br>  Por exemplo, n√£o muito tempo atr√°s, fomos for√ßados a adicionar Redis √† pilha para impedir que os usu√°rios efetuem login no sistema em v√°rias esta√ß√µes de trabalho ao mesmo tempo e implementem um tempo limite de sess√£o.  O fato √© que os funcion√°rios do armaz√©m perceberam que trabalhar com o mesmo login e receber um b√¥nus por exceder o KPI √© muito mais lucrativo do que aumentar sua pr√≥pria produtividade. <br><br>  Como a solu√ß√£o do problema de neg√≥cios exigia altera√ß√µes em v√°rios locais do sistema, do ponto de vista t√©cnico, era um desafio muito interessante. <br><br>  As surpresas da equipe do armaz√©m n√£o terminaram por a√≠.  Quase imediatamente ap√≥s o lan√ßamento da sess√£o, o PostgreSQL come√ßou a falhar.  Pesquisamos os motivos da degrada√ß√£o inesperada da base por v√°rios dias, at√© descobrirmos que o problema, novamente, era engenhoso.  Uma garota costumava fumar.  Quando ela saiu do local de trabalho, ela foi eliminada da sess√£o e, para entrar novamente, era necess√°rio encontrar o turno s√™nior e escanear seu crach√°.  Reduzindo suas andan√ßas pelo armaz√©m, ela simplesmente rasgou o c√≥digo de barras de um dos carrinhos e fixou o bot√£o do scanner com fita adesiva, configurando-o para escanear constantemente esse c√≥digo de barras.  E isso poderia passar despercebido por um longo tempo se o c√≥digo de barras n√£o fosse do carrinho, que continha 800 unidades de mercadorias.  A cada varredura, uma enorme consulta SQL era gerada para validar as mercadorias, que "matavam" o banco de dados com esses "DDoS internos".  Eu tive que cuidar das restri√ß√µes no n√∫mero de digitaliza√ß√µes por unidade de tempo e no n√∫mero de mercadorias no carrinho. <br><br>  J√° existem muitas dessas hist√≥rias e somos constantemente confrontados com novas.  Al√©m disso, o sistema deve se adaptar a novas condi√ß√µes sempre.  Em tais situa√ß√µes, n√£o se pode limitar-se apenas a m√©todos administrativos - o que aconteceu uma vez pode muito bem ser repetido. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/55e/0d0/918/55e0d0918af62003dda046cc44fdb98a.jpg"><br><br><h2>  Para onde vamos a seguir? </h2><br>  Parece que a otimiza√ß√£o do processo e a automa√ß√£o do armaz√©m s√£o imposs√≠veis de serem conclu√≠das.  Ela dura 5 anos na empresa e, como eu disse acima, mesmo ap√≥s o est√°gio 9, n√£o vamos parar.  A empresa continua a se expandir tanto no B2C quanto no B2B, ent√£o, no futuro pr√≥ximo, estamos planejando outro grande projeto - a abertura de outro armaz√©m, isso exigir√° uma reescrita em larga escala do sistema existente ou a cria√ß√£o de um semelhante do zero em um novo local.  E esse √© um novo desafio interessante na jun√ß√£o de neg√≥cios, instala√ß√µes f√≠sicas, processos operacionais e solu√ß√µes t√©cnicas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt432394/">https://habr.com/ru/post/pt432394/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt432380/index.html">Seis anos de vida com um iPhone que n√£o me distrai</a></li>
<li><a href="../pt432382/index.html">AI em Hase und Igel: minimax para tr√™s</a></li>
<li><a href="../pt432384/index.html">Estudo: 22% dos usu√°rios do Tumblr v√£o a um site porn√¥, especialmente meninas</a></li>
<li><a href="../pt432386/index.html">Mesa redonda ‚ÄúArquiteto do projeto de TI‚Äù, setembro de 2018</a></li>
<li><a href="../pt432392/index.html">Tivemos jogos da velha escola e alguns cogumelos: miss√£o conclu√≠da</a></li>
<li><a href="../pt432398/index.html">Modo DFU do carregador de inicializa√ß√£o STM32 usando CubeMX. Instru√ß√µes passo a passo</a></li>
<li><a href="../pt432400/index.html">CS: GO agora √© gratuito</a></li>
<li><a href="../pt432402/index.html">Ei RH, onde est√° minha lembran√ßa?</a></li>
<li><a href="../pt432404/index.html">O backup para Linux n√£o escreve letras</a></li>
<li><a href="../pt432408/index.html">Resumo da Fintech: prepara√ß√£o para desconectar pequenos bancos da Visa e Mastercard, uma calculadora de pens√µes e n√£o apenas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>