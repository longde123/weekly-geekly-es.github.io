<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💊 😩 👊🏽 Wie AWS seine belastbaren Services zusammenstellt. Server- und Datenbankskalierung 🚸 🚢 🌈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wolken sind wie eine magische Kiste - Sie fragen, was Sie brauchen, und Ressourcen erscheinen einfach aus dem Nichts. Virtuelle Maschinen, Datenbanken...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie AWS seine belastbaren Services zusammenstellt. Server- und Datenbankskalierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/471686/"> Wolken sind wie eine magische Kiste - Sie fragen, was Sie brauchen, und Ressourcen erscheinen einfach aus dem Nichts.  Virtuelle Maschinen, Datenbanken, ein Netzwerk - all das gehört nur Ihnen.  Es gibt andere Mieter der Wolke, aber in Ihrem Universum sind Sie der alleinige Herrscher.  Sie sind sicher, dass Sie immer die erforderlichen Ressourcen erhalten, Sie rechnen mit niemandem und bestimmen unabhängig, wie das Netzwerk aussehen wird.  Wie ist diese Magie, die die Cloud dazu bringt, Ressourcen elastisch zuzuweisen und Mandanten vollständig voneinander zu isolieren? <br><br><img src="https://habrastorage.org/webt/95/t7/1o/95t71ogmxhqysjnhwbqd_nbj4tk.jpeg"><br><br>  AWS Cloud ist ein hochentwickeltes System, das sich seit 2006 weiterentwickelt hat.  Ein Teil dieser Entwicklung wurde von <strong>Vasily Pantyukhin</strong> , Architekt von Amazon Web Services, gefunden.  Als Architekt sieht er nicht nur das Endergebnis, sondern auch die Herausforderungen, die AWS bewältigt.  Je besser das System verstanden wird, desto mehr Vertrauen entsteht.  Daher wird Vasily die Geheimnisse der AWS-Cloud-Services weitergeben.  Unter dem Schnitt sind das Gerät für physische AWS-Server, die flexible Skalierbarkeit der Datenbank, die benutzerdefinierte Datenbank von Amazon und Methoden zur Steigerung der Leistung virtueller Maschinen bei gleichzeitiger Senkung des Preises.  Wenn Sie die Architekturansätze von Amazon kennen, können Sie die AWS-Services besser nutzen und neue Ideen für die Erstellung eigener Lösungen liefern. <br><a name="habracut"></a><br>  <i>Über den Sprecher: Vasily Pantyukhin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Hen</a> ) begann als Unix-Administrator in.ru-Unternehmen, arbeitete 6 Jahre lang in großen Sun Microsystem-Drüsen und predigte 11 Jahre lang die Datenzentriertheit der Welt in EMC.</i>  <i>Natürlich zu privaten Clouds entwickelt und 2017 zu öffentlichen Clouds.</i>  <i>Jetzt mit technischen Tipps hilft er, in der AWS-Cloud zu leben und sich zu entwickeln.</i> <i><br><br></i>  <i>Haftungsausschluss: Alles, was unten steht, ist Vasilys persönliche Meinung und stimmt möglicherweise nicht mit der Position von Amazon Web Services überein.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein Video des</a> Berichts, auf dessen Grundlage der Artikel erstellt wurde, ist auf unserem YouTube-Kanal verfügbar.</i> <br><br><h2>  Warum spreche ich über ein Amazon-Gerät? </h2><br>  Mein erstes Auto hatte einen „Griff“ - an einem Schaltgetriebe.  Es war großartig, weil ich das Gefühl hatte, die Maschine steuern und vollständig steuern zu können.  Mir hat auch gefallen, dass ich das Prinzip ihrer Arbeit zumindest grob verstehe.  Natürlich habe ich mir das Boxgerät ganz primitiv vorgestellt - ungefähr wie ein Getriebe auf einem Fahrrad. <br><br><img src="https://habrastorage.org/webt/t-/zx/uz/t-zxuzgpa2gj26bmpgbe1gj_zd0.jpeg"><br><br>  Alles war wunderbar, bis auf eine Sache - im Stau stehen.  Es scheint, als ob Sie sitzen und nichts tun, aber Sie schalten ständig die Gänge, drücken die Kupplung, das Gas, die Bremse - Sie werden es wirklich leid.  Das Problem der Staus wurde teilweise gelöst, als eine Maschine auf der Maschine in der Familie erschien.  Am Steuer war Zeit, über etwas nachzudenken und ein Hörbuch zu hören. <br><br>  In meinem Leben tauchte ein Rätsel auf, weil ich im Allgemeinen nicht mehr verstand, wie mein Auto funktioniert.  Ein modernes Auto ist ein komplexes Gerät.  Das Auto passt sich gleichzeitig Dutzenden verschiedener Parameter an: Drücken des Gases, Bremse, Fahrstil, Straßenqualität.  Ich verstehe nicht mehr, wie das funktioniert. <br><br>  Als ich anfing, Amazon Cloud zu machen, war mir das auch ein Rätsel.  Nur dieses Geheimnis ist um eine Größenordnung höher, weil sich ein Fahrer im Auto befindet und es Millionen in AWS gibt.  Alle Benutzer lenken gleichzeitig, drücken auf Gas und bremsen.  Es ist erstaunlich, dass sie gehen, wo sie wollen - für mich ist es ein Wunder!  Das System passt sich automatisch an jeden Benutzer an, skaliert ihn und passt ihn flexibel an, sodass er den Eindruck hat, dass er allein in diesem Universum ist. <br><br>  Die Magie löste sich ein wenig auf, als ich später als Architekt bei Amazon arbeitete.  Ich habe gesehen, mit welchen Problemen wir konfrontiert sind, wie wir sie lösen, wie wir Dienstleistungen entwickeln.  Mit zunehmendem Verständnis des Systems steigt das Vertrauen in den Service.  Daher möchte ich ein Bild davon teilen, was sich unter der Haube der AWS-Cloud befindet. <br><br><h2>  Worüber werden wir reden? </h2><br>  Ich habe mich für einen diversifizierten Ansatz entschieden - ich habe 4 interessante Dienste ausgewählt, über die es sich zu sprechen lohnt. <br><br>  <strong>Serveroptimierung</strong> .  Vergängliche Wolken mit einer physischen Ausführungsform: physische Rechenzentren, in denen physische Server summen, sich erwärmen und Glühbirnen blinken. <br><br>  <strong>Serverlose Funktionen</strong> (Lambda) sind wahrscheinlich der skalierbarste Dienst in der Cloud. <br><br>  <strong>Datenbankskalierung</strong> .  Ich werde darüber sprechen, wie wir unsere eigenen skalierbaren Datenbanken erstellen. <br><br>  <strong>Netzwerkskalierung</strong> .  Der letzte Teil, in dem ich das Gerät unseres Netzwerks öffnen werde.  Dies ist eine wunderbare Sache - jeder Benutzer der Cloud glaubt, dass er alleine in der Cloud ist und überhaupt keine anderen Mieter sieht. <br><br><blockquote>  <i>Hinweis</i>  <i>Dieser Artikel konzentriert sich auf die Serveroptimierung und die Datenbankskalierung.</i>  <i>Die Netzwerkskalierung wird im nächsten Artikel erläutert.</i>  <i>Wo sind die serverlosen Funktionen?</i>  <i>Ein separates Protokoll kam über sie heraus: „ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mal, ja, gewagt.</a></i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anboxing von Firecracker-Mikrovirtualen</a> . "</i>  <i>Es werden verschiedene Skalierungsmethoden beschrieben und die Firecracker-Lösung wird detailliert analysiert - eine Symbiose der besten Eigenschaften einer virtuellen Maschine und von Containern.</i> </blockquote><br><h2>  Server </h2><br>  Die Wolke ist vergänglich.  Aber diese Vergänglichkeit hat immer noch eine physische Verkörperung - Server.  Anfangs war ihre Architektur klassisch.  Standard x86-Chipsatz, Netzwerkkarten, Linux, Xen-Hypervisor, auf dem virtuelle Maschinen ausgeführt werden. <br><br><img src="https://habrastorage.org/webt/hb/vt/ez/hbvtezxs1wc_ilzrlcorvx9qy4m.jpeg"><br><br>  Im Jahr 2012 hat eine solche Architektur ihre Arbeit gut gemacht.  Xen ist ein großartiger Hypervisor, aber mit einem großen Fehler.  Er hat einen ziemlich <strong>hohen Overhead für das Emulieren von Geräten</strong> .  Mit dem Aufkommen neuer schnellerer Netzwerkkarten oder SSDs werden diese Overheads zu hoch.  Wie gehe ich mit diesem Problem um?  Wir haben uns entschlossen, an zwei Fronten gleichzeitig zu arbeiten - <strong>um sowohl die Hardware als auch den Hypervisor</strong> zu <strong>optimieren</strong> .  Die Aufgabe ist sehr ernst. <br><br><h3>  Optimierung von Eisen und Hypervisor </h3><br>  Alles auf einmal und gut zu machen wird nicht funktionieren.  Was „gut“ ist, war zunächst unverständlich. <br><blockquote>  Wir haben uns für einen evolutionären Ansatz entschieden - wir ändern ein wichtiges Element der Architektur und werfen es in die Produktion. </blockquote>  Wir treten auf alle Rechen, hören auf Beschwerden und Vorschläge.  Dann ändern wir eine andere Komponente.  Daher ändern wir in kleinen Schritten die gesamte Architektur radikal, basierend auf dem Feedback und der Unterstützung der Benutzer. <br><br>  Die Transformation begann 2013 mit dem Schwierigsten - dem Netzwerk.  In <strong>C3-</strong> Fällen wurde der Standard-Netzwerkkarte eine spezielle Network Accelerator-Karte hinzugefügt.  Es wurde mit einem buchstäblich kurzen Loopback-Kabel an der Frontplatte verbunden.  Hässlich, aber in der Wolke nicht sichtbar.  Die direkte Interaktion mit der Hardware verbesserte jedoch die Jitter- und Netzwerkbandbreite grundlegend. <br><br>  Dann haben wir beschlossen, uns auf die Verbesserung des Zugriffs auf den EBS-Blockspeicher zu konzentrieren - Elastic Block Storage.  Dies ist eine Kombination aus Netzwerk und Speicher.  Die Schwierigkeit besteht darin, dass es keine Möglichkeit gab, Storage Accelerator-Hardware zu kaufen, wenn es auf dem Markt Network Accelerator-Karten gab.  Deshalb haben wir uns an das Startup <strong>Annapurna Labs</strong> gewandt, das spezielle ASIC-Chips für uns entwickelt hat.  Sie konnten Remote-EBS-Volumes als NVMe-Geräte verbinden. <br><br>  In <strong>C4-</strong> Fällen haben wir zwei Probleme gelöst.  Zunächst haben wir die Grundlagen für die Zukunft mit vielversprechender, aber zu dieser Zeit neuer NVMe-Technologie umgesetzt.  Die zweite - entlastete den Zentralprozessor erheblich, indem die Verarbeitung von Anforderungen an EBS auf eine neue Karte übertragen wurde.  Es hat sich als gut herausgestellt, und jetzt ist Annapurna Labs Teil von Amazon. <br><br>  Bis November 2017 wurde uns klar, dass es Zeit war, den Hypervisor selbst zu ändern. <br><blockquote>  Der neue Hypervisor wurde auf Basis modifizierter KVM-Kernelmodule entwickelt. </blockquote>  Dadurch konnten die Overhead-Kosten für die Emulation von Geräten grundlegend gesenkt und direkt mit den neuen ASICs gearbeitet werden.  <strong>C5-</strong> Instanzen waren die ersten virtuellen Maschinen, unter deren Haube ein neuer Hypervisor ausgeführt wird.  Wir haben es <strong>Nitro genannt</strong> . <br><br><img src="https://habrastorage.org/webt/g6/x2/ri/g6x2rizybxczhu-ikt1pfulnpb0.jpeg">  <em>Die Entwicklung der Instanzen auf der Zeitachse.</em> <br><br>  Alle neuen Arten von virtuellen Maschinen, die seit November 2017 erscheinen, funktionieren auf diesem Hypervisor.  <strong>Iron Bare Metal-Instanzen haben keinen Hypervisor</strong> , werden aber auch als Nitro bezeichnet, da sie spezielle Nitro-Karten verwenden. <br><br>  In den nächsten zwei Jahren überstieg die Anzahl der Arten von Nitro-Instanzen einige Dutzend: A1, C5, M5, T3 und andere. <br><br><img src="https://habrastorage.org/webt/vw/zf/as/vwzfasdjwxuuykoylco9bnmgqki.jpeg"><br>  <em>Arten von Instanzen.</em> <br><br><h3>  Wie moderne Nitroautos funktionieren </h3><br>  Sie bestehen aus drei Hauptkomponenten: einem Nitro-Hypervisor (siehe oben), einem Sicherheitschip und Nitro-Karten. <br><br>  <strong>Der Sicherheitschip ist</strong> direkt in das Motherboard integriert.  Es steuert viele wichtige Funktionen, z. B. das Laden des Host-Betriebssystems. <br><br>  <strong>Nitro-Karten</strong> - es gibt vier Arten von ihnen.  Alle werden von Annapurna Labs entwickelt und basieren auf gängigen ASICs.  Ein Teil ihrer Firmware ist ebenfalls üblich. <br><br><img src="https://habrastorage.org/webt/fy/pf/pj/fypfpj1r-mpklkd-8ltiz-frjnc.jpeg"><br>  <em>Vier Arten von Nitrokarten.</em> <br><br>  Eine der Karten funktioniert mit <strong>einem</strong> <strong>VPC-</strong> <strong>Netzwerk</strong> .  Sie ist in <strong>virtuellen Maschinen</strong> als <strong>ENA-</strong> Netzwerkkarte <strong>- Elastic Network Adapter -</strong> sichtbar.  Es kapselt auch Datenverkehr, wenn er über das physische Netzwerk übertragen wird (wir werden im zweiten Teil des Artikels darauf eingehen), steuert die Firewall der Sicherheitsgruppen, ist für das Routing und andere Netzwerkaufgaben verantwortlich. <br><br>  Separate Karten funktionieren mit <strong>EBS-</strong> Blockspeicher und Festplatten, die in den Server integriert sind.  Sie werden virtuellen <strong>Gastmaschinen</strong> als <strong>NVMe-Adapter präsentiert</strong> .  Sie sind auch für die Datenverschlüsselung und die Festplattenüberwachung verantwortlich. <br><br>  Das System aus Nitro-Karten, einem Hypervisor und einem Sicherheitschip ist in ein SDN oder <strong>Software Defined Network integriert</strong> .  Die Steuerkarte ist für die Verwaltung dieses Netzwerks verantwortlich (Steuerungsebene). <br><br>  Natürlich entwickeln wir weiterhin neue ASICs.  Zum Beispiel haben sie Ende 2018 den Inferentia-Chip veröffentlicht, der eine effizientere Arbeit mit maschinellen Lernaufgaben ermöglicht. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i7/1w/7p/i71w7p7mu3pbl3ozaoczqmxirku.jpeg" width="500"></div><br>  <em>Inferentia-Prozessorchip für maschinelles Lernen.</em> <br><br><h2>  Skalierbare Datenbank </h2><br>  Die traditionelle Datenbank hat eine Schichtstruktur.  Wenn stark vereinfacht, werden die folgenden Ebenen unterschieden. <br><br><ul><li>  <strong>SQL</strong> - Client und Query Dispatcher arbeiten daran. </li><li>  <strong>Transaktionen</strong> sichern - hier ist alles klar, ACID und so weiter. </li><li>  Zwischenspeicherung durch Pufferpools. </li><li>  <strong>Protokollierung</strong> - <strong>Ermöglicht</strong> die Arbeit mit Redo-Protokollen.  In MySQL heißen sie Bin Logs, in PosgreSQL Write Ahead Logs (WAL). </li><li>  <strong>Speicher</strong> - direkt auf die Festplatte schreiben. </li></ul><br><img src="https://habrastorage.org/webt/5x/xv/ay/5xxvay0jy9xyewxzi1py1q9rhei.jpeg"><br>  <em>Schichtdatenbankstruktur.</em> <br><br>  Es gibt verschiedene Möglichkeiten, Datenbanken zu skalieren: Sharding, Shared Nothing-Architektur, Shared Drive. <br><br><img src="https://habrastorage.org/webt/ao/pq/sf/aopqsfjiytwkbunwwni-wia5mzu.jpeg"><br><br>  Alle diese Methoden behalten jedoch dieselbe monolithische Datenbankstruktur bei.  Dies schränkt die Skalierung erheblich ein.  Um dieses Problem zu lösen, haben wir unsere eigene Datenbank entwickelt - <strong>Amazon Aurora</strong> .  Es ist kompatibel mit MySQL und PostgreSQL. <br><br><h3>  Amazon Aurora </h3><br>  Die Hauptidee der Architektur besteht darin, die Speicher- und Protokollierungsebenen von der Hauptdatenbank zu trennen. <br><br>  Mit Blick auf die Zukunft möchte ich sagen, dass wir auch die Cache-Ebene unabhängig gemacht haben.  Architektur hört auf, ein Monolith zu sein, und wir erhalten zusätzliche Freiheitsgrade bei der Skalierung einzelner Blöcke. <br><br><img src="https://habrastorage.org/webt/31/a1/4_/31a14_4d4o0pvrk_23aj-obbiew.jpeg"><br>  <em>Protokollierungs- und Speicherebenen sind von der Datenbank getrennt.</em> <br><br>  Ein herkömmliches DBMS schreibt Daten in Form von Blöcken in das Speichersystem.  Bei Amazon Aurora haben wir ein „intelligentes“ Repository erstellt, das die Sprache von <strong>Redo-Logs</strong> sprechen kann.  Im Inneren wandelt das Repository Protokolle in Datenblöcke um, überwacht deren Integrität und sichert automatisch. <br><br>  Mit diesem Ansatz können Sie interessante Dinge wie das <strong>Klonen</strong> implementieren.  Es funktioniert grundlegend schneller und wirtschaftlicher, da nicht alle Daten vollständig erstellt werden müssen. <br><br>  Die Speicherebene ist als verteiltes System implementiert.  Es besteht aus einer sehr großen Anzahl physischer Server.  Jedes Redo-Log wird gleichzeitig von <strong>sechs Knoten</strong> verarbeitet und gespeichert.  Dies bietet Datenschutz und Lastausgleich. <br><br><img src="https://habrastorage.org/webt/uv/up/rg/uvuprghc30bpo190-fjgb3w5pm8.jpeg"><br><br>  Die Leseskalierung kann mit geeigneten Replikaten erreicht werden.  Durch verteilten Speicher entfällt die Notwendigkeit einer Synchronisierung zwischen der Haupt-DB-Instanz, über die Daten geschrieben werden, und anderen Replikaten.  Aktuelle Daten sind garantiert für alle Replikate verfügbar. <br><br>  Das einzige Problem ist das Zwischenspeichern alter Daten in Lesereplikaten.  Dieses Problem wird jedoch gelöst, indem <strong>alle Redo-Logs</strong> auf Replikate im internen Netzwerk übertragen werden.  Befindet sich das Protokoll im Cache, wird es als ungültig markiert und überschrieben.  Wenn es sich nicht im Cache befindet, wird es einfach verworfen. <br><br><img src="https://habrastorage.org/webt/8q/lt/hc/8qlthc7bqmxhqhja_ou4u3udjk4.jpeg"><br><br>  Wir haben den Speicher herausgefunden. <br><br><h3>  So skalieren Sie DBMS-Ebenen </h3><br>  Hier ist die horizontale Skalierung viel schwieriger.  Lassen Sie uns daher den ausgetretenen Pfaden der <strong>klassischen vertikalen Skalierung folgen</strong> . <br><br>  Angenommen, wir haben eine Anwendung, die über einen Masterknoten mit einem DBMS kommuniziert. <br><br>  Bei der vertikalen Skalierung wählen wir einen neuen Knoten mit mehr Prozessoren und Speicher aus. <br><br><img src="https://habrastorage.org/webt/ai/mn/if/aimnifftppplcs1mfg3n-zldlrk.jpeg"><br><br>  Wechseln Sie als Nächstes die Anwendung vom alten Masterknoten zum neuen.  Es gibt Probleme. <br><br><ul><li>  Dies erfordert eine spürbare Ausfallzeit der Anwendung. </li><li>  Der neue Masterknoten verfügt über einen kalten Cache.  Die Datenbankleistung ist erst nach dem Aufwärmen des Caches maximal. </li></ul><br><img src="https://habrastorage.org/webt/k0/i-/jy/k0i-jy69brtsvclx0trwgjfuw0y.jpeg"><br><br>  Wie kann man die Situation verbessern?  Fügen Sie einen Proxy zwischen der Anwendung und dem Masterknoten ein. <br><br><img src="https://habrastorage.org/webt/ag/bk/c9/agbkc94ple_fti2xvyjinrb7mxu.jpeg"><br><br>  Was wird es uns geben?  Jetzt müssen nicht mehr alle Anwendungen manuell auf einen neuen Knoten umgeleitet werden.  Das Umschalten kann unter einem Proxy und gleichzeitig wesentlich schneller erfolgen. <br><br>  Das Problem scheint gelöst zu sein.  Aber nein, wir leiden immer noch unter der Notwendigkeit, den Cache aufzuwärmen.  Außerdem ist ein neues Problem aufgetreten - jetzt ist der Proxy ein potenzieller Fehlerpunkt. <br><br><h3>  Endlösung mit Amazon Aurora Serverless </h3><br>  Wie haben wir diese Probleme gelöst? <br><br>  <strong>Hat einen Proxy hinterlassen</strong> .  Dies ist keine separate Instanz, sondern eine ganze verteilte Flotte von Proxys, über die Anwendungen eine Verbindung zur Datenbank herstellen.  Im Falle eines Fehlers kann jeder der Knoten fast sofort ersetzt werden. <br><br>  <strong>Wir haben einen Pool warmer Knoten verschiedener Größen hinzugefügt</strong> .  Wenn Sie einen neuen Knoten mit einer größeren oder kleineren Größe auswählen müssen, ist dieser sofort verfügbar.  Sie müssen nicht warten, bis es geladen ist. <br><br>  <strong>Der gesamte Skalierungsprozess wird von einem speziellen Überwachungssystem gesteuert.</strong>  Die Überwachung überwacht ständig den Status des aktuellen Masterknotens.  Wenn beispielsweise festgestellt wird, dass die Prozessorlast einen kritischen Wert erreicht hat, benachrichtigt es den Pool warmer Instanzen über die Notwendigkeit, einen neuen Knoten zuzuweisen. <br><br><img src="https://habrastorage.org/webt/2r/ja/oq/2rjaoqe-tgjjv_nxbodwlibzkzc.jpeg"><br>  <em>Verteilte Proxys, Warminstanzen und Überwachung.</em> <br><br>  Ein Knoten mit der erforderlichen Leistung ist verfügbar.  Pufferpools werden darauf kopiert, und das System beginnt, auf einen sicheren Moment zum Umschalten zu warten. <br><br><img src="https://habrastorage.org/webt/hw/t4/nr/hwt4nruv3h9bdyyte_awfycnp1g.jpeg"><br><br>  Normalerweise kommt der Moment zum Umschalten schnell genug.  Dann wird die Kommunikation zwischen dem Proxy und dem alten Masterknoten unterbrochen, alle Sitzungen wechseln zum neuen Knoten. <br><br><img src="https://habrastorage.org/webt/pz/4f/cj/pz4fcjzipu0pep5pwwex6mb5kas.jpeg"><br><br>  Die Arbeit mit der Datenbank wird fortgesetzt. <br><br><img src="https://habrastorage.org/webt/sv/dl/kf/svdlkfp7ve6gzlomvdxulhmyjsy.jpeg"><br><br>  Die Grafik zeigt, dass die Federung wirklich sehr kurz ist.  Auf dem blauen Diagramm die Last und auf den roten Stufen - die Momente der Skalierung.  Kurzfristige Einbrüche im blauen Diagramm sind genau diese kurze Verzögerung. <br><br><img src="https://habrastorage.org/webt/te/3p/4x/te3p4xzclr_3liuv-7gk2ocskey.jpeg"><br><br>  Mit Amazon Aurora können Sie die Datenbank übrigens vollständig speichern und deaktivieren, wenn Sie sie beispielsweise am Wochenende nicht verwenden.  Nach dem Stoppen des Ladevorgangs verringert die Datenbank allmählich ihre Leistung und schaltet sich für eine Weile aus.  Wenn die Last zurückkehrt, steigt sie wieder gleichmäßig an. <br><br><blockquote>  Im nächsten Teil des Amazon-Gerätegesprächs werden wir uns mit der Netzwerkskalierung befassen.  Abonnieren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Newsletter</a> und bleiben Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Laufenden</a> , um den Artikel nicht zu verpassen. <br><br>  Bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HighLoad ++ wird</a> Vasily Pantyukhin einen Vortrag halten: „ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Houston, wir haben ein Problem.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Design von Fehlersystemen, Muster für die Entwicklung interner Amazon Cloud-Dienste</a> . “  Was Amazon-Designentwickler für verteilte Systemdesignmuster verwenden, was sind die Gründe für Servicefehler, was ist zellbasierte Architektur, konstante Arbeit, Shuffle Sharding - es wird interessant sein.  Weniger als einen Monat vor der Konferenz - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">buchen Sie Ihre Tickets</a> .  24. Oktober die endgültige Preiserhöhung. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471686/">https://habr.com/ru/post/de471686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471668/index.html">Technische Analyse des checkm8-Exploits</a></li>
<li><a href="../de471670/index.html">Versuchen Sie Jetpack Compose im Kampf?</a></li>
<li><a href="../de471676/index.html">Telefonbetrüger. Die zweite Aktion, bei der ich zusammenbreche und zum nächsten Geldautomaten renne</a></li>
<li><a href="../de471678/index.html">Tragen Sie Dienstleistungen auf Anfrage</a></li>
<li><a href="../de471684/index.html">Warum müssen Sie Module für Nginx erstellen?</a></li>
<li><a href="../de471688/index.html">Wie AWS seine belastbaren Services zusammenstellt. Netzwerkskalierung</a></li>
<li><a href="../de471700/index.html">Wie ich einen technologischen Stack mit einer Grundlage für die Zukunft gewählt habe</a></li>
<li><a href="../de471702/index.html">Cyber-erweiterte Webanwendungen</a></li>
<li><a href="../de471704/index.html">Das Buch „Egoistische Mitochondrien. Wie man die Gesundheit erhält und das Alter bewegt "</a></li>
<li><a href="../de471706/index.html">9 typische Netzwerkprobleme, die mithilfe der NetFlow-Analyse erkannt werden können (am Beispiel Flowmon)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>