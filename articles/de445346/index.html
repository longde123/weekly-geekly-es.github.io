<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÑ ü§üüèæ üçî Wie schreibe ich eine schlechte API üë®üèª‚Äçüé® üë®üèº‚Äçü§ù‚Äçüë®üèª ü§ûüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Schreiben Sie den Code so, als w√ºrde er von einem gewaltt√§tigen Psychopathen begleitet, der wei√ü, wo Sie leben. 


 Hallo allerseits! 


 Ich arbeite ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie schreibe ich eine schlechte API</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ostrovok/blog/445346/"><p>  <em>Schreiben Sie den Code so, als w√ºrde er von einem gewaltt√§tigen Psychopathen begleitet, der wei√ü, wo Sie leben.</em> </p><br><p>  Hallo allerseits! </p><br><p>  Ich arbeite als Teamleiter des Integration Development-Teams im Online-Hotelreservierungsservice <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ostrovok.ru</a> und m√∂chte heute meine Erfahrungen mit verschiedenen APIs teilen. </p><br><p><img src="https://habrastorage.org/webt/h_/fd/by/h_fdbyvhycgzkw8yvclfzzscquq.gif"></p><br><p>  Als Entwickler eines Systems, das mit externen Anbietern zusammenarbeitet, sto√üe ich h√§ufig auf verschiedene APIs - meistens handelt es sich um SOAP / REST oder √§hnliches.  Die Arbeit mit vielen von ihnen hinterl√§sst jedoch den Eindruck, dass sie geschrieben wurden, weder nach technischen Regeln noch nach gesundem Menschenverstand - wie aus dem Buch ‚ÄûBad Advice‚Äú von Grigory Oster.  In diesem Artikel werde ich versuchen, solche F√§lle im Stil von ‚Äûschlechten Ratschl√§gen‚Äú zu beschreiben und Beispiele im Zusammenhang mit XML zu betrachten.  Kommentare und Diskussionen sind willkommen. </p><a name="habracut"></a><br><h5 id="istoricheskaya-spravka">  Historischer Hintergrund </h5><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SOAP</a> (aus dem Englischen. Simple Object Access Protocol - ein einfaches Protokoll f√ºr den Zugriff auf Objekte) - ein Protokoll f√ºr den Austausch strukturierter Nachrichten in einer verteilten Computerumgebung.  SOAP war urspr√ºnglich haupts√§chlich f√ºr die Implementierung von Remote Procedure Call (RPC) gedacht.  Jetzt wird das Protokoll zum Austausch beliebiger Nachrichten im XML-Format und nicht nur zum Aufrufen von Prozeduren verwendet. </p><br><h4 id="perehodim-k-primeram">  Gehen Sie zu den Beispielen </h4><br><p>  <strong>1. XML an URL √ºbergeben</strong> </p><br><p>  Was wollen API-Benutzer am meisten?  Nat√ºrlich Einfachheit, Zuverl√§ssigkeit und Pr√§gnanz.  Lesen wir also nicht den Anforderungshauptteil, sondern akzeptieren XML als URL-codierte Information als Parameter des Anforderungspfads!  Was k√∂nnte besser sein: </p><br><pre><code class="python hljs">http://exapmple.com/xml/form.jsp?RequestName%<span class="hljs-number"><span class="hljs-number">3</span></span>DHotelRequest2%<span class="hljs-number"><span class="hljs-number">26</span></span>XML%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">3</span></span>C%<span class="hljs-number"><span class="hljs-number">3</span></span>Fxml%<span class="hljs-number"><span class="hljs-number">2</span></span>Bversion%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">221.0</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>Bencoding%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>UTF<span class="hljs-number"><span class="hljs-number">-8</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">3</span></span>F%<span class="hljs-number"><span class="hljs-number">3</span></span>E%<span class="hljs-number"><span class="hljs-number">0</span></span>A%<span class="hljs-number"><span class="hljs-number">3</span></span>CHotelRequest2%<span class="hljs-number"><span class="hljs-number">2</span></span>BBuyerId%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BUserId%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BPassword%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>test%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BLanguage%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>en%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BHotel%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BProductCode%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">221</span></span>--%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BArrivalDate%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">2223.12</span></span><span class="hljs-number"><span class="hljs-number">.2018</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BDepartureDate%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">2224.12</span></span><span class="hljs-number"><span class="hljs-number">.2018</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BArrivalTime%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BDepartureTime%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BCurrency%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">222</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BWhereToPay%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">223</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfGuests%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsAdult%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsChild%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>BNumberOfExtraBedsInfant%<span class="hljs-number"><span class="hljs-number">3</span></span>D%<span class="hljs-number"><span class="hljs-number">220</span></span>%<span class="hljs-number"><span class="hljs-number">22</span></span>%<span class="hljs-number"><span class="hljs-number">2</span></span>B%<span class="hljs-number"><span class="hljs-number">2</span></span>F%<span class="hljs-number"><span class="hljs-number">3</span></span>E</code> </pre> <br><p>  Alles wird einfach und es besteht keine Notwendigkeit, einen K√∂rper von der Abfrage zu subtrahieren - Sie wissen nie, welche Probleme damit auftreten k√∂nnen. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Ich wei√ü nicht, warum das gemacht wurde.  Die Probleme hier sind die folgenden: Viele Server haben eine Begrenzung f√ºr die L√§nge des Anforderungspfads, der sie durchlaufen kann.  Wenn das XML-Datenvolumen gro√ü ist, k√∂nnen Sie den Fehler 413 Entity Too Large als eines der Szenarien verursachen.  Dar√ºber hinaus nimmt die Informationsmenge zu, da wir vor dem Senden eine URL-Codierung durchf√ºhren. </p></div></div><br><p>  <strong>2. Informations√ºbertragung durch √ºberm√§√üiges Verschachteln von Datenobjekten</strong> </p><br><p>  Lassen Sie uns dar√ºber nachdenken, wie Sie die Informationen in den Antworten so schwierig wie m√∂glich gestalten k√∂nnen.  Verwenden wir verschachtelte Strukturen und sogar in verschiedenen Formaten!  Kaum gesagt als getan - </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InnerRequest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RQ</span></span></span><span class="hljs-tag">&gt;</span></span>[{"someInfo":"base64Data"}] <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RQ</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InnerRequest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In der Tat ist die XML-Datei der obersten Ebene eine weitere XML-Datei, und darin befindet sich json, in dem die Daten in base64 und erneut in json dargestellt werden, und sie enth√§lt bereits die Informationen, die wir ben√∂tigen!  Eine gro√üartige L√∂sung, fast wie ein M√§rchen √ºber den Tod von Koshchei, versteckt in einem Ei. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Einer der auff√§lligsten Nachteile ist die Verlangsamung beim Parsen der Antwort, bis alle verschachtelten Strukturen durchlaufen wurden. Danach kann sich herausstellen, dass der Fehlercode in json und nicht auf h√∂heren Ebenen verdrahtet ist.  Ich verstehe, dass das Codieren von Bin√§rdaten in base64 in xml / json eine g√§ngige Praxis ist, aber das Codieren eines anderen Formats in einem anderen Format ist bereits jenseits von Gut und B√∂se. </p></div></div><br><p>  <strong>3. Hinzuf√ºgen von Informationen, die sich nicht auf die Anforderungsdaten beziehen und im Datenformat nicht g√ºltig sind</strong> </p><br><p>  Angenommen, XML kommt im Anfragetext zu uns, wir verarbeiten es und geben eine Antwort.  F√ºr ein gut gestaltetes und stark belastetes System sieht es zu kompliziert aus.  Lassen Sie uns die Benutzer verpflichten, den Datentyp im Anforderungshauptteil zu senden.  Wie geht das?  Nat√ºrlich genau im Hauptteil der Anfrage. </p><br><pre> <code class="xml hljs">XML= <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Auf so einfache Weise werden wir immer wissen, dass wir eine Anfrage im XML-Format erhalten haben. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Es stellt sich heraus, dass wir dem bereits gebildeten Hauptteil der Anfrage weitere f√ºhrende Bytes hinzuf√ºgen m√ºssen, und erst danach ist es m√∂glich, eine Anfrage zu stellen.  Gl√ºck, wenn Sie die f√ºhrenden Bytes nicht abh√§ngig von der Art der Anforderungsdaten √§ndern m√ºssen.  In diesem Fall ist es besser, den http-Header zu verwenden, um den Datentyp anzugeben, und den Anforderungshauptteil nicht zu √§ndern. </p></div></div><br><p>  <strong>4. Vervielf√§ltigung von Daten ohne die Notwendigkeit</strong> </p><br><p>  Angenommen, wir haben sehr, sehr wichtige Informationen in der Struktur der XML-Antwort.  Wie kann ich dies dem Benutzer zeigen?  Das offensichtlichste - lassen Sie es uns mehrmals als Teil der Antwort zeigen, dann wird er definitiv darauf achten. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Obj</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Info</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Important"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ObjSetting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Info</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Important"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span>SomeName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Info</span></span></span><span class="hljs-tag">&gt;</span></span>Important<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Info</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Obj</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Danach wird der Endbenutzer definitiv auf das Infofeld achten. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  In diesem Fall habe ich dar√ºber nachgedacht und sogar das Unternehmen, das die API bereitgestellt hat, nach der Bedeutung des Infofelds gefragt und gefragt, ob sich die Informationen in den Tags auf verschiedenen Ebenen unterscheiden w√ºrden.  Die Antwort war: Nein, das wird es nicht - sie duplizieren sich gegenseitig.  Warum Benutzer irref√ºhren und die Antwort erschweren, wenn dies nicht erforderlich ist? </p></div></div><br><p>  <strong>5. √úbergeben von Parametern desselben Typs einzeln, nicht eines Arrays</strong> </p><br><p>  In einer der APIs, mit denen wir nach Hotels suchen, gibt es Felder, die das Alter der G√§ste angeben.  Welches Pr√§sentationsformat wird am besten verwendet, um diese Informationen zu vermitteln?  Lassen Sie das Format so aussehen: Jedes Alter ist ein separates obligatorisches XML-Tag, und wir betrachten den Wert 0 als das Fehlen dieses Parameters. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age1</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age2</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age3</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age4</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Age</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Hier gibt es mehrere Probleme gleichzeitig: Nicht erweiterbar, redundante Informationen, au√üerdem kann das Alter wirklich Null sein, wenn die G√§ste neugeborene Kinder sind.  In diesem Fall m√ºssen Sie ein Array anstelle von eindeutig benannten Tags verwenden. </p></div></div><br><p>  <strong>6. Weiterleiten von Informationen aus fr√ºheren Anforderungen als Teil der API-Aufrufkette</strong> </p><br><p>  Es ist Zeit, √ºber die Sicherheit unserer API nachzudenken.  Wie verstehen wir, dass der Benutzer Informationen aus unseren vorherigen Antworten erh√§lt?  Lassen Sie ihn uns nat√ºrlich unsere Antwort schicken! </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RequestInfo</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreviosResp</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PreviosResp</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Request</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Um weiterhin mit der API arbeiten zu k√∂nnen, muss die gesamte Antwort des externen Systems aus den vorherigen Schritten der API gesendet werden und nicht einige wichtige Daten davon oder sogar ein Hash, der dieser Antwort definitiv entspricht.  √úbersch√ºssige Daten in ihrer ganzen Pracht. </p></div></div><br><p>  <strong>7. Verwenden Sie keine Markierungen f√ºr einen aufgetretenen Fehler, z. B. ein Fehler-Tag oder einen http-Code</strong> </p><br><p>  Wir haben unsere wundersch√∂ne API erstellt und der Welt vorgestellt.  Aber sobald etwas schief gelaufen ist und wir aufgrund eines internen Fehlers keine Antwort an den Benutzer formulieren konnten.  Was ist in diesem Fall zu tun?  Geben Sie einfach eine Antwortvorlage ohne Daten, ohne Fehlercodes oder andere Informationen an.  Niemand sollte wissen, dass unsere ideale API manchmal nicht funktioniert! <br>  Ein Beispiel f√ºr eine solche Antwort: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImportantInfo</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Response</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  - mit einem Antwortcode von 200 OK. </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p>  Fehler zu vertuschen ist eine sehr schlechte Praxis.  Das Problem ist, dass alles so aussieht, als ob die Antwort keine Probleme enth√§lt: Es gibt kein <code>&lt;Error&gt;</code> -Tag, der http-Status besagt, dass alles in Ordnung ist.  In diesem Fall muss eine zus√§tzliche Validierung der empfangenen Informationen durchgef√ºhrt werden, damit in unserem System keine unvorhergesehenen Konsequenzen auftreten. </p></div></div><br><p>  <strong>Fazit</strong> <br>  Trotz der umfangreichen Dokumentation zur Arbeit mit SOAP / XML-Technologien und zum API-Design sind viele Probleme immer noch relevant, und einige L√∂sungen widersprechen dem gesunden Menschenverstand.  Ich hoffe, dass ich mit diesem Artikel die Aufmerksamkeit der Entwickler auf die nicht erfolgreichsten Ans√§tze lenken kann, um ihre Anzahl in Zukunft zu reduzieren. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445346/">https://habr.com/ru/post/de445346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445334/index.html">Wir haben DevOps. Lassen Sie uns alle Tester feuern</a></li>
<li><a href="../de445336/index.html">FlexiRemap¬Æ vs RAID</a></li>
<li><a href="../de445338/index.html">DHCP + MySQL-Server in Python</a></li>
<li><a href="../de445340/index.html">Erh√∂hen Sie die Netzwerksicherheit mithilfe eines Cloud-Analysators</a></li>
<li><a href="../de445344/index.html">OpenVox Unified Communications Platform</a></li>
<li><a href="../de445348/index.html">SNA Hackathon 2019: Architektur vereinfachen - Funktionen vereinfachen</a></li>
<li><a href="../de445350/index.html">Sonata - SIP-Bereitstellungsserver</a></li>
<li><a href="../de445352/index.html">Spark Structured Streaming-Anwendungen auf Kubernetes. Erleben Sie FASTEN RUS</a></li>
<li><a href="../de445354/index.html">Objekte in Bildern finden</a></li>
<li><a href="../de445356/index.html">√úberblick √ºber den Bereich Mobile bei DUMP-2019: Maximal angewendet und n√ºtzlich in der t√§glichen Arbeit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>