<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👉 🤛🏻 ⛔️ Bot für Tetris und Reverse Engineering Animation. Analyse der mobilen Strecke der zweiten Programmiermeisterschaft 🗣️ 😑 🔒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mobile Track Gewinner 
 Im vergangenen Jahr veranstaltete Yandex zwei Online-Programmiermeisterschaften. Wir veröffentlichen weiterhin Analysen der Au...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bot für Tetris und Reverse Engineering Animation. Analyse der mobilen Strecke der zweiten Programmiermeisterschaft</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/482210/"><img src="https://habrastorage.org/webt/wo/ry/hf/woryhf1ol6z2mgv2exh6uasa1gi.jpeg"><br><h5>  <sup><sub>Mobile Track Gewinner</sub></sup> </h5><br>  Im vergangenen Jahr veranstaltete Yandex zwei Online-Programmiermeisterschaften.  Wir veröffentlichen weiterhin Analysen der Aufgaben der zweiten Meisterschaft.  Wir erinnern Sie daran, dass den Teilnehmern vier Tracks angeboten wurden: Maschinelles Lernen, Frontend, Mobile Development und Backend.  Hier ist eine Diskussion über die Qualifikationsrunde für mobile Entwickler - 121 derjenigen, die die Qualifikation bestanden haben, nahmen dann am Finale teil.  Aufgaben wurden von Spezialisten von Yandex.Browser und anderen Teams des Suchportals erfunden.  In diesem Hub werden wir das Thema genetische Algorithmen ansprechen, einen Bot für Tetris schreiben und die Suche mit verschiedenen Methoden für Android und iOS durchführen. <br><a name="academy"></a><br><a name="habracut"></a><h2>  A. Kabel </h2>  <sup><i>Gepostet von: Sergey Myasnikov</i></sup> <br><div class="scrollable-table"><table><tbody><tr><td></td><td>  <b>Alle Sprachen</b> </td><td>  <b>Python 3.7.3 und Python 2.7</b> </td></tr><tr><td>  Zeitlimit </td><td>  4 s </td><td>  20 s </td></tr><tr><td>  Speicherlimit </td><td colspan="2">  256 MB </td></tr><tr><td>  Eintreten </td><td colspan="2">  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td colspan="2">  Standardausgabe oder output.txt </td></tr></tbody></table></div>  N Computer wurden in das neue Büro gebracht.  Das nahe gelegene Radioteleskop ermöglicht keine Wi-Fi-Kommunikation, und der Helpdesk muss ein Netzwerk mithilfe von LAN-Kabeln organisieren.  Nachdem die Administratoren alle in den Ecken herumliegenden Kabel gesammelt hatten, gelang es ihnen, K Computerpaare miteinander zu verbinden.  Nach einem langen Arbeitstag müde, wandten sich die Helpdesk-Mitarbeiter an Sie, um Hilfe zu erhalten - um das Budget zu berechnen, das zur Erledigung der Aufgabe erforderlich ist.  Sie haben also eine Liste von M Computerpaaren, die Administratoren verbinden können, und die Kosten für jedes Kabel.  Als Sie mit der Arbeit begannen, fanden Sie einen Fehler im Kostenberechnungssystem - anstatt die Kosten zu addieren, multiplizieren sie sich -, sodass ein Kabel mit einem Wert von 4 und ein Kabel mit einem Wert von 3 zusammen nicht 7 sind, wie die Logik vorschlägt, sondern 12. <br><br>  Um die Aufgabe abzuschließen, müssen Sie die Kosten für Kabel berechnen, die für die Organisation eines verbundenen Netzwerks ausreichen, sodass jeder Computer direkt oder indirekt mit jedem verbunden ist. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate, Beispiele und Hinweise</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Die erste Zeile enthält die Zahlen 0 &lt;N &lt;10 <sup>6</sup> , 0 ≤ K &lt;10 <sup>6</sup> , 0 ≤ M &lt;10 <sup>6</sup> . <br><br>  Die nächsten K Zeilen enthalten Zahlenpaare 0 &lt;u, v ≤ N - die Anzahl der Computer, die bereits vom Helpdesk verbunden wurden. <br><br>  Die nächsten M Zeilen enthalten Dreifache der Zahlen 0 &lt;u, v ≤ N und 0 &lt;p ≤ 10 <sup>9</sup> - die Anzahl der Computer, die Administratoren mit einem Kabel verbinden können, kosten p. <br><br><h4>  Ausgabeformat </h4><br>  Drucken Sie die Mindestkosten für Kabel aus, die zum Aufbau eines verbundenen Netzwerks ausreichen, oder –1, wenn kein vollständiges Netzwerk aufgebaut werden kann. <br><br>  Die Antwort kann sehr groß sein, Sie müssen sie also modulo 2 <sup>31</sup> - 1 ausgeben. <br><br><h4>  Beispiel 1 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Eintreten</b> </td><td>  <b>Fazit</b> </td></tr><tr><td><code>2 0 1 <br> 2 1 9</code> </td> <td> <code>9</code> </td> </tr></tbody></table></div><h4>  Beispiel 2 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Eintreten</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>5 0 6 <br> 1 3 1 <br> 2 4 8 <br> 1 4 1 <br> 1 2 10 <br> 4 1 10 <br> 5 3 4</code> </td> <td> <code>32</code> </td> </tr></tbody></table></div><h4>  Beispiel 3 </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Eintreten</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>6 0 3 <br> 4 3 2 <br> 2 6 9 <br> 1 4 8</code> </td> <td> <code>–1</code> </td> </tr></tbody></table></div><h4>  Hinweise </h4><br>  Die Menge der Eingabedaten kann 30 MB erreichen - achten Sie auf die Lesegeschwindigkeit. </div></div><br><h4>  Lösung </h4><br>  Das gesamte Netzwerk, das aufgebaut werden muss, um das Problem zu lösen, ist nichts anderes als ein minimaler Spanning Tree.  (Da zu Beginn der Konstruktion bereits K Kanten hinzugefügt wurden, ist das resultierende Diagramm nicht unbedingt ein Baum, aber es wird garantiert, dass es ihn enthält.) <br><br>  In der klassischen Umgebung besteht das Problem des Findens des minimalen Spannbaums darin, die Summe der Kanten zu minimieren, aber hier ist es notwendig, das Produkt zu minimieren.  Zum Glück fallen diese beiden Bäume zusammen.  Dies lässt sich leicht beweisen, indem die Gewichte der Kanten durch ihre Logarithmen ersetzt werden. <br><br>  Die bekanntesten Algorithmen zur Erstellung eines Minimum Spanning Tree sind die Prima- und Kraskal-Algorithmen. <br><br>  Bei dichten Graphen hat der Prym-Algorithmus die Asymptotik O (N <sup>2</sup> ), die es angesichts der Bedingung N &lt;10 <sup>6</sup> nicht erlaubt, das Problem vollständig zu lösen.  (Beachten Sie jedoch, dass die Testdaten so zusammengestellt wurden, dass die Lösung mit den angegebenen Asymptoten genau die Hälfte des Punktes erzielte.) <br><br>  Eine naive Implementierung des Kruskal-Algorithmus, die ein Array verwendet, um Informationen über die aktuelle Zusammensetzung von graphisch verbundenen Komponenten zu erhalten, weist die Asymptotik O (M log M + N <sup>2</sup> ) auf.  Hier ist es äquivalent zu O (N <sup>2</sup> ).  Für eine vollständige Lösung müssen Sie eine Datenstruktur verwenden, die als Disjoint-Set-Union-System (DSU) bezeichnet wird. <br><br>  Mit DSU können Sie zwei Operationen ausführen: find (x) findet den "Anführer" der Menge, zu der x gehört (wir übersetzen den Anführer in die Nummer der Menge);  union (x, y) kombiniert die Mengen, zu denen x und y gehören. <br><br>  Die bei der Implementierung der Struktur üblicherweise verwendete heuristische Pfadkomprimierungs- und Rangkombinations-Heuristik ermöglicht es uns, in praktischen Fällen, die O (1) entsprechen, ein asymptotisches Verhalten zu erzielen. <br><br>  Angenommen, wir haben DSU verwendet, um Informationen zu Graph-Konnektivitätskomponenten während der Ausführung des Kraskal-Algorithmus zu verwalten.  Dann ist das asymptotische Verhalten des Algorithmus O (M log M + N) = O (M log M). <br><br><div class="spoiler">  <b class="spoiler_title">Entscheidungscode</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CablesSolution</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> MODULLO = <span class="hljs-number"><span class="hljs-number">2147483647L</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ InputReader in = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InputReader(System.in); PrintWriter pw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintWriter(System.out); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n = in.readInt(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> k = in.readInt(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> m = in.readInt(); DisjointUnionSets dsu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisjointUnionSets(n + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; k; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> u = in.readInt(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> v = in.readInt(); dsu.union(u, v); } Edge[] edges = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Edge[m]; <span class="hljs-comment"><span class="hljs-comment">// (4 + 4 + 8) * 2M = 32M for (int i = 0; i &lt; m; i++) { int u = in.readInt(); int v = in.readInt(); long p = in.readLong(); edges[i] = new Edge(u, v, p); } Arrays.sort(edges); long res = 1; boolean addedEdge = false; for (Edge edge : edges) { if (!dsu.check(edge.getU(), edge.getV())) { dsu.union(edge.getU(), edge.getV()); res = (res * edge.getP()) % MODULLO; addedEdge = true; } } if (!dsu.isJoint()) { res = -1; } else if (!addedEdge) { res = 0; } pw.println(res); pw.flush(); pw.close(); } public static class DisjointUnionSets { private int[] rank; // 4M private int[] parent; // 4M DisjointUnionSets(int size) { rank = new int[size]; parent = new int[size]; for (int i = 0; i &lt; size; i++) { parent[i] = i; } } int find(int target) { if (parent[target] != target) { parent[target] = find(parent[target]); } return parent[target]; } boolean check(int x, int y) { return find(x) == find(y); } void union(int x, int y) { int xRoot = find(x); int yRoot = find(y); if (xRoot == yRoot) { return; } if (rank[xRoot] &lt; rank[yRoot]) { parent[xRoot] = yRoot; } else if (rank[yRoot] &lt; rank[xRoot]) { parent[yRoot] = xRoot; } else { parent[yRoot] = xRoot; rank[xRoot] = rank[xRoot] + 1; } } boolean isJoint() { int parent = -1; for (int i = 1; i &lt; rank.length; i++) { if (parent == -1) { parent = find(i); } else { if (parent != find(i)) { return false; } } } return true; } } private static class Edge implements Comparable&lt;Edge&gt; { private int u; private int v; private long p; Edge(int u, int v, long p) { this.u = u; this.v = v; this.p = p; } int getU() { return u; } int getV() { return v; } long getP() { return p; } @Override public int compareTo(Edge edge) { return Long.compare(p, edge.p); } } }</span></span></code> </pre> </div></div><br><h2>  B. Verlorene Sätze </h2>  <sup><i>Gepostet von: Dmitry Fisko</i></sup> <br><br>  Bei der Betrachtung der Messdaten der Anwendung stellte der Manager Vasily die Hypothese auf, dass der Benutzeroberfläche ein gewisser Schwung fehlt, der die Benutzer zurückhalten würde.  Deshalb forderte Vasily, die Anwendungsschnittstelle an die Designerin Maria zu diversifizieren.  Nach ein paar Skizzen dämmerte Maria!  Die Idee lag von Anfang an auf der Oberfläche - es stellte sich heraus, dass Sie Animationen für den Text hinzufügen müssen.  Wir haben verschiedene Texte ausgewählt und Animationen gemacht.  Leider wurden die Animationen nach Abschluss der Arbeiten vertauscht, und der Ausgangstext für jeden von ihnen ging verloren.  Helfen Sie dem Team zu verstehen, welcher Text jeweils animiert ist. <br><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate, Beispiele und Hinweise</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Sie haben mehrere Textdateien mit den angegebenen Animationen, für die Sie jeweils den entsprechenden Text auswählen müssen. <br><br>  <a href="https://yadi.sk/d/Pidz4td7MeHV3Q">Link zum Archiv mit Animationsdateien</a> . <br><br>  Jede Animation wird durch Parameter definiert: <br>  - <b>canvasWidth canvasHeight</b> - Die Breite und Höhe des Containers für die Animation werden in der ersten Eingabezeile angegeben. <br>  - <b>figuresCount</b> - Die Anzahl der zu animierenden Figuren wird in der zweiten Eingabezeile eingestellt. <br>  - <b>Rechteck centerX centerY Breite Höhe Winkel Farbe</b> - Angabe eines Rechtecks ​​zentriert an einem Punkt (centerX, centerY), Breite × Höhe, Drehwinkelwinkel und festgelegte Farbe, <br>  - <b>Kreismittelpunkt X Mittelpunkt Y Radiusfarbe</b> - Deklaration eines Kreises mit Mittelpunkt am Punkt (Mittelpunkt X, Mittelpunkt Y), Radiusradius und festgelegter Farbe. <br><br>  Der Farbparameter kann die Werte {schwarz, rot, weiß, gelb} annehmen.  Der Winkelparameter nimmt Werte im Bereich (-359 °, 359 °) an. <br><br>  Für jede Figur können mehrere Arten von Animationen gleichzeitig angegeben werden, die parallel angewendet werden.  Darüber hinaus kann jede Art von Animation nur einmal auf eine Figur angewendet werden.  Die Anzahl der auf die Figur angewendeten Animationen wird durch die Zahl 0 (figureAnimationsCount) 3 unmittelbar nach der Deklaration der Figur festgelegt. <br><br>  Arten von Animationen: <br>  - <b>move destX destY time [cycle]</b> - verschiebe eine Zahl in Millisekunden an einen Punkt (destX, destY). <br>  - <b>Winkelzeit drehen [Zyklus]</b> - Drehung der Figur um Winkelgrad in Zeitmillisekunden. <br>  - <b>destScale time [cycle] skalieren</b> - <b>Erhöht</b> die Zahl in Millisekunden um destScale. <br><br>  Wenn der Zyklusparameter angegeben ist, wird seine Bewegung am Ende der Animation in die entgegengesetzte Richtung fortgesetzt. <br><br><h4>  Ausgabeformat </h4><br>  Der angezeigte Text beim Abspielen der Animation.  Für jede Animationsdatei muss die Antwort in einer neuen Zeile angegeben werden.  Der Fall von Zeichen in der Antwort kann beliebig sein.  Jeder in der Animation gefundene Text wird mit 10 Punkten bewertet. <br><br><h4>  Beispiel </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Eintreten</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>400 400 <br> 10 <br> rectangle 69.000 280.000 24.000 24.000 0.000 black <br> 1 <br> move 251.000 72.000 10000 cycle <br> rectangle 256.000 188.000 24.000 48.000 0.000 black <br> 0 <br> rectangle 232.000 152.000 72.000 24.000 0.000 black <br> 0 <br> rectangle 35.000 400.000 24.000 24.000 0.000 black <br> 1 <br> move 285.000 -96.000 10000 cycle <br> rectangle 244.000 248.000 48.000 24.000 0.000 black <br> 0 <br> rectangle 300.000 117.000 24.000 48.000 0.000 black <br> 1 <br> move 112.000 164.000 5000 <br> rectangle 136.000 200.000 72.000 24.000 0.000 black <br> 0 <br> rectangle 160.000 236.000 24.000 48.000 0.000 black <br> 0 <br> rectangle 208.000 224.000 24.000 72.000 44.797 black <br> 1 <br> rotate -44.797 5000 <br> rectangle 232.000 200.000 24.000 24.000 0.000 black <br> 0</code> </td> <td> <code>42</code> </td> </tr></tbody></table></div><h4>  Hinweise </h4><br>  Visualisierung der Animation aus dem Beispiel: <br><br><img src="https://habrastorage.org/webt/35/k7/3k/35k73kldyohxgp1pqpsfooq9lyy.gif"></div></div><br><h4>  Lösung </h4><br>  Die Aufgabe bestand darin, die Animation umzusetzen.  Wenn die Animation korrekt implementiert ist, werden beim Abspielen viele Grundelemente in lesbaren Text eingefügt.  Die Animation kann mit allen Mitteln erfolgen - integriert in mobile Plattformen oder Lösungen auf niedrigerer Ebene. <br><br>  Animationsbeispiel ( <a href="https://yadi.sk/i/-LWlPWXbM2DbDg">Link zur .mov-Datei</a> ): <br><br><img src="https://habrastorage.org/webt/ig/qi/le/igqile0qssc9k4crzwgste6buba.gif"><br><br><div class="spoiler">  <b class="spoiler_title">Eine Beispielimplementierung mit der Tkinter-Bibliothek von Python</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> copy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tkinter <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> enum <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Enum FRAMES_PER_SECOND = <span class="hljs-number"><span class="hljs-number">60</span></span> TIME_BETWEEN_FRAMES = int(<span class="hljs-number"><span class="hljs-number">1000</span></span> / FRAMES_PER_SECOND) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rectangle</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_x, left_y, width, height, color, angle=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> self.center_x = left_x + width / <span class="hljs-number"><span class="hljs-number">2</span></span> self.center_y = left_y + height / <span class="hljs-number"><span class="hljs-number">2</span></span> self.width = width self.height = height self.color = color self.angle = angle <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_left_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.center_x - self.width / <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_left_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_x)</span></span></span><span class="hljs-function">:</span></span> self.center_x = left_x + self.width / <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_left_y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.center_y - self.height / <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_left_y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_y)</span></span></span><span class="hljs-function">:</span></span> self.center_y = left_y + self.height / <span class="hljs-number"><span class="hljs-number">2</span></span> left_x = property(get_left_x, set_left_x) left_y = property(get_left_y, set_left_y) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Circle</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_x, left_y, radius, color)</span></span></span><span class="hljs-function">:</span></span> self.center_x = left_x + radius self.center_y = left_y + radius self.radius = radius self.color = color self.angle = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_left_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.center_x - self.radius <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_left_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_x)</span></span></span><span class="hljs-function">:</span></span> self.center_x = left_x + self.radius <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_left_y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.center_y - self.radius <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_left_y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, left_y)</span></span></span><span class="hljs-function">:</span></span> self.center_y = left_y + self.radius left_x = property(get_left_x, set_left_x) left_y = property(get_left_y, set_left_y) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnimationType</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Enum)</span></span></span><span class="hljs-class">:</span></span> MOVE = <span class="hljs-number"><span class="hljs-number">1</span></span> ROTATE = <span class="hljs-number"><span class="hljs-number">2</span></span> SCALE = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time, cycle)</span></span></span><span class="hljs-function">:</span></span> self.time = time self.cycle = cycle <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">angle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_cycle_progress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.cycle: cycle_time = time_spent % (self.time * <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cycle_time &gt; self.time: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> - (cycle_time - self.time) / self.time <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cycle_time / self.time <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> time_spent &lt; self.time: cycle_time = time_spent % self.time <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cycle_time / self.time <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MoveAnimation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Animation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, figure, to_x, to_y, time, cycle)</span></span></span><span class="hljs-function">:</span></span> super().__init__(time, cycle) self.from_x = figure.center_x self.from_y = figure.center_y self.to_x = to_x self.to_y = to_y <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> cycle_progress = super()._cycle_progress(time_spent) diff_x = self.to_x - self.from_x diff_y = self.to_y - self.from_y <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> diff_x * cycle_progress, diff_y * cycle_progress <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScaleAnimation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Animation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, destination_scale, time, cycle)</span></span></span><span class="hljs-function">:</span></span> super().__init__(time, cycle) self.destination_scale = destination_scale <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> cycle_progress = super()._cycle_progress(time_spent) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> + (self.destination_scale - <span class="hljs-number"><span class="hljs-number">1</span></span>) * cycle_progress <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RotateAnimation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Animation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, rotate_angle, time, cycle)</span></span></span><span class="hljs-function">:</span></span> super().__init__(time, cycle) self.rotate_angle = rotate_angle <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">angle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> cycle_progress = super()._cycle_progress(time_spent) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.rotate_angle * cycle_progress <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Transformer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, scale)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, diff_x, diff_y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, angle)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RectangleTransformer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Transformer)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, rectangle)</span></span></span><span class="hljs-function">:</span></span> self.rectangle = rectangle <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, scale)</span></span></span><span class="hljs-function">:</span></span> self.rectangle.width = self.rectangle.width * scale self.rectangle.height = self.rectangle.height * scale <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, diff_x, diff_y)</span></span></span><span class="hljs-function">:</span></span> self.rectangle.center_x = self.rectangle.center_x + diff_x self.rectangle.center_y = self.rectangle.center_y + diff_y <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, angle)</span></span></span><span class="hljs-function">:</span></span> self.rectangle.angle = (self.rectangle.angle + angle) % <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CircleTransformer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Transformer)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, circle)</span></span></span><span class="hljs-function">:</span></span> self.circle = circle <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, scale)</span></span></span><span class="hljs-function">:</span></span> self.circle.radius = self.circle.radius * scale <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, diff_x, diff_y)</span></span></span><span class="hljs-function">:</span></span> self.circle.center_x = self.circle.center_x + diff_x self.circle.center_y = self.circle.center_y + diff_y <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, angle)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Drawer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, canvas, spent_time)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnimationApplier</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply_animations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(spent_time, transformer, animations)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> animation <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> animations: transformer.scale(animation.scale(spent_time)) diff_x, diff_y = animation.move(spent_time) transformer.move(diff_x, diff_y) transformer.rotate(animation.angle(spent_time)) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RectangleDrawer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Drawer)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, rectangle, animations)</span></span></span><span class="hljs-function">:</span></span> self.rectangle = rectangle self.animations = animations <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, canvas, spent_time)</span></span></span><span class="hljs-function">:</span></span> rect = self._transform_rect_with_animations(spent_time) rect_points = self._get_rectangle_points(rect) rotated_points = self._rotate(rect_points, rect.angle, [rect.center_x, rect.center_y]) canvas.create_polygon(rotated_points, fill=rect.color) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_transform_rect_with_animations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, spent_time)</span></span></span><span class="hljs-function">:</span></span> rect = copy.copy(self.rectangle) transformer = RectangleTransformer(rect) AnimationApplier.apply_animations(spent_time, transformer, self.animations) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> transformer.rectangle @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_rectangle_points</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rect)</span></span></span><span class="hljs-function">:</span></span> half_width = rect.width / <span class="hljs-number"><span class="hljs-number">2</span></span> half_height = rect.height / <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [rect.center_x - half_width, rect.center_y - half_height], [rect.center_x - half_width, rect.center_y + half_height], [rect.center_x + half_width, rect.center_y + half_height], [rect.center_x + half_width, rect.center_y - half_height] ] @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_rotate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(points, angle, center)</span></span></span><span class="hljs-function">:</span></span> angle = math.radians(angle) cos_val = math.cos(angle) sin_val = math.sin(angle) cx, cy = center new_points = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x_old, y_old <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> points: x_old -= cx y_old -= cy x_new = x_old * cos_val - y_old * sin_val y_new = x_old * sin_val + y_old * cos_val new_points.append([x_new + cx, y_new + cy]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new_points <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CircleDrawer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Drawer)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, circle, animations)</span></span></span><span class="hljs-function">:</span></span> self.circle = circle self.animations = animations <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, canvas, spent_time)</span></span></span><span class="hljs-function">:</span></span> circle = self._transform_rect_with_animations(spent_time) size = circle.radius * <span class="hljs-number"><span class="hljs-number">2</span></span> canvas.create_oval(circle.left_x, circle.left_y, circle.left_x + size, circle.left_y + size, fill=circle.color) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_transform_rect_with_animations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, spent_time)</span></span></span><span class="hljs-function">:</span></span> circle = copy.copy(self.circle) transformer = CircleTransformer(circle) AnimationApplier.apply_animations(spent_time, transformer, self.animations) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> transformer.circle <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scene</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, canvas, animated_symbols)</span></span></span><span class="hljs-function">:</span></span> self.canvas = canvas self.drawers = self._get_generated_drawers(animated_symbols) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_generated_drawers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(animated_symbols)</span></span></span><span class="hljs-function">:</span></span> drawers = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> animated_symbol <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> animated_symbols: figure = animated_symbol.figure animations = animated_symbol.animations <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isinstance(figure, Rectangle): drawer = RectangleDrawer(figure, animations) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> isinstance(figure, Circle): drawer = CircleDrawer(figure, animations) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception() drawers.append(drawer) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> drawers <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, time_spent)</span></span></span><span class="hljs-function">:</span></span> self.canvas.delete(<span class="hljs-string"><span class="hljs-string">"all"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> drawer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.drawers: drawer.draw(self.canvas, time_spent) self.canvas.pack() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Timer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.started_time = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.started_time = self._current_time() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time_spent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> current_time = self._current_time() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> current_time - self.started_time @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_current_time</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> int(round(time.time() * <span class="hljs-number"><span class="hljs-number">1000</span></span>)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene_loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(window, scene, timer)</span></span></span><span class="hljs-function">:</span></span> time_spent = timer.time_spent() scene.draw(time_spent) window.after(TIME_BETWEEN_FRAMES, scene_loop, window, scene, timer) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure_window_location</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(window, canvas_width, canvas_height)</span></span></span><span class="hljs-function">:</span></span> screen_width = window.winfo_screenwidth() screen_height = window.winfo_screenheight() x = (screen_width / <span class="hljs-number"><span class="hljs-number">2</span></span>) - (canvas_width / <span class="hljs-number"><span class="hljs-number">2</span></span>) y = (screen_height / <span class="hljs-number"><span class="hljs-number">2</span></span>) - (canvas_height / <span class="hljs-number"><span class="hljs-number">2</span></span>) window.geometry(<span class="hljs-string"><span class="hljs-string">'%dx%d+%d+%d'</span></span> % (canvas_width, canvas_height, x, y)) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnimatedSymbol</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, figure, animations)</span></span></span><span class="hljs-function">:</span></span> self.figure = figure self.animations = animations <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnimationsParser</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_animated_symbols</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, file_path)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(file_path) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: lines = f.readlines() canvas_width, canvas_height = self._parse_size(lines[<span class="hljs-number"><span class="hljs-number">0</span></span>]) symbols_count = int(lines[<span class="hljs-number"><span class="hljs-number">1</span></span>]) animated_symbols = [] current = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(symbols_count): figure = self._parse_figure(lines[current]) current += <span class="hljs-number"><span class="hljs-number">1</span></span> symbol_animations = self._parse_animations(figure, current, lines) current += <span class="hljs-number"><span class="hljs-number">1</span></span> + len(symbol_animations) animated_symbol = AnimatedSymbol(figure, symbol_animations) animated_symbols.append(animated_symbol) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> canvas_width, canvas_height, animated_symbols <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, line)</span></span></span><span class="hljs-function">:</span></span> parts = line.split(<span class="hljs-string"><span class="hljs-string">" "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> int(parts[<span class="hljs-number"><span class="hljs-number">0</span></span>]), int(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_animations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, figure, current, lines)</span></span></span><span class="hljs-function">:</span></span> animations = [] animations_count = int(lines[current]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(animations_count): parts = lines[current + i + <span class="hljs-number"><span class="hljs-number">1</span></span>].split(<span class="hljs-string"><span class="hljs-string">" "</span></span>) animation = self._parse_animation(figure, parts) animations.append(animation) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> animations <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_figure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, line)</span></span></span><span class="hljs-function">:</span></span> parts = line.split(<span class="hljs-string"><span class="hljs-string">" "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> parts[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'rectangle'</span></span>: center_x = float(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) center_y = float(parts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) width = float(parts[<span class="hljs-number"><span class="hljs-number">3</span></span>]) height = float(parts[<span class="hljs-number"><span class="hljs-number">4</span></span>]) angle = float(parts[<span class="hljs-number"><span class="hljs-number">5</span></span>]) color = parts[<span class="hljs-number"><span class="hljs-number">6</span></span>].replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) figure = Rectangle(center_x - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, center_y - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, width, height, color, angle) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> parts[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'circle'</span></span>: center_x = float(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) center_y = float(parts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) radius = float(parts[<span class="hljs-number"><span class="hljs-number">3</span></span>]) color = parts[<span class="hljs-number"><span class="hljs-number">4</span></span>].replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) figure = Circle(center_x - radius, center_y - radius, radius, color) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> figure <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_animation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, figure, parts)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> parts[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">"move"</span></span>: animation = self._parse_move_animation(figure, parts) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> parts[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">"scale"</span></span>: animation = self._parse_scale_animation(parts) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> parts[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">"rotate"</span></span>: animation = self._parse_rotate_animation(parts) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> animation @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_move_animation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(figure, parts)</span></span></span><span class="hljs-function">:</span></span> to_x = float(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) to_y = float(parts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) time = float(parts[<span class="hljs-number"><span class="hljs-number">3</span></span>]) cycle = len(parts) &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MoveAnimation(figure, to_x, to_y, time, cycle) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_scale_animation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(parts)</span></span></span><span class="hljs-function">:</span></span> destination_scale = float(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) time = float(parts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) cycle = len(parts) &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ScaleAnimation(destination_scale, time, cycle) @staticmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_parse_rotate_animation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(parts)</span></span></span><span class="hljs-function">:</span></span> rotate_angle = float(parts[<span class="hljs-number"><span class="hljs-number">1</span></span>]) time = float(parts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) cycle = len(parts) &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RotateAnimation(rotate_angle, time, cycle) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> canvas_width, canvas_height, animated_symbols = \ AnimationsParser().parse_animated_symbols(<span class="hljs-string"><span class="hljs-string">'animation_path.txt'</span></span>) window = tkinter.Tk() configure_window_location(window, canvas_width, canvas_height) canvas = tkinter.Canvas(window, width=canvas_width, height=canvas_height) scene = Scene(canvas, animated_symbols) timer = Timer() timer.start() window.after(TIME_BETWEEN_FRAMES, scene_loop, window, scene, timer) window.mainloop() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: main()</code> </pre> </div></div><br><h2>  C. Tetris-Bot </h2>  <sup><i>Urheber: Dmitry Nevedomsky</i></sup> <br><div class="scrollable-table"><table><tbody><tr><td>  Zeitlimit </td><td>  1 s </td></tr><tr><td>  Speicherlimit </td><td>  256 MB </td></tr><tr><td>  Eintreten </td><td>  Standardeingabe oder input.txt </td></tr><tr><td>  Fazit </td><td>  Standardausgabe oder output.txt </td></tr></tbody></table></div>  Das geschäftige Arkady verbringt seine Freizeit gerne mit der Teilnahme an verschiedenen Auktionen von Retrocomputern.  Auf einem von ihnen sah er den Commodoro, der das Leben gesehen hatte, und Arkady beeilte sich, es zu kaufen.  Und diesmal kaufte er nicht nur Hardware, sondern auch Software, eine Überraschung wartete auf ihn am Computer - da war Tetris vom Vorbesitzer unvollendet.  Empirisch enträtselte Arkady seine Regeln. <br><br>  Dem Spieler wird ein Tetris-Feld mit 10 Zellen Breite und unbegrenzter Höhe angeboten.  Eine Liste aller Tetramino, die auf dem Feld platziert werden müssen.  Tetramino "fallen" sofort, dh ihre Position wird einmal für die entsprechende Bewegung festgelegt, und während des Fallens können die Position und die Drehung nicht geändert werden. <br><br>  Tetramino fällt, bis er auf den Boden oder auf eine andere Figur stößt.  Wird gleichzeitig eine ganze Zeile des Feldes gefüllt, verschwindet diese Zeile und alles, was darüber liegt, fällt eine Zelle darunter. <br><br>  Die Anzahl der erhaltenen Punkte wird durch die Anzahl der zerstörten Reihen bestimmt.  Das Spiel endet, wenn alle vorgeschlagenen Teile platziert wurden.  Der Autor des Spiels hinterließ eine Tabelle mit Aufzeichnungen, in der er selbst alle Plätze einnahm. <br><br>  Wie bereits erwähnt, ist Arkady sehr beschäftigt.  Aber er spielt auch sehr viel.  Hilf ihm, der Beste in diesem Spiel zu werden. <br><br>  <b>Figurentabelle und ihre möglichen Wendungen</b> <br><img src="https://habrastorage.org/webt/kq/l2/su/kql2suwzyyoghl7iat7ryncfaty.png"><br><div class="spoiler">  <b class="spoiler_title">E / A-Formate, Beispiele und Hinweise</b> <div class="spoiler_text"><h4>  Eingabeformat </h4><br>  Die Eingabedaten befinden sich in den Dateien input1.txt, input2.txt, ..., input10.txt.  <a href="https://yadi.sk/d/YEFUMhJnnQsBYQ">Mit Dateien archivieren</a> . <br><br>  Die erste Zeile enthält eine positive Anzahl von Ziffern N (N ≤ 100). <br><br>  In jeder folgenden Zeile wird ein einzelnes lateinisches Zeichen aus der Menge <code>{'O', 'S', 'Z', 'L', 'J', 'T', 'I'}</code> übertragen. <br><br>  Jedes Symbol steht für eine Tetramino-Figur. <br><br><h4>  Ausgabeformat </h4><br>  Zur Überprüfung müssen Sie ein ZIP-Archiv mit den Ausgabedateien im Stammverzeichnis mit den Namen output1.txt, output2.txt, ..., output10.txt einreichen, wobei die Ausgabedatei outputX.txt der Eingabedatei inputX.txt entsprechen sollte. <br>  Die Antwortdatei besteht aus N Zeilen, von denen jede einem Tetramino aus den Eingabedaten entspricht und aus zwei Zahlen A <sub>i</sub> und B <sub>i besteht</sub> , die den Zug des Spielers mit der vorgeschlagenen Figur angeben: <br><br>  1. A <sub>i</sub> gibt die Spalte des Tetramino-Elements ganz links an (1 ≤ A <sub>i</sub> ≤ 10). <br>  2. B <sub>i</sub> gibt die Drehrichtung des Tetraminos an (1 ≤ B <sub>i</sub> ≤ 4). <br><br>  Befindet sich die gewünschte Datei nicht im Archiv oder wurde sie falsch zusammengestellt, werden für den entsprechenden Test 0 Punkte vergeben. <br><br><h4>  Beispiel </h4><div class="scrollable-table"><table><tbody><tr><td>  <b>Eintreten</b> </td><td>  <b>Fazit</b> </td></tr><tr><td> <code>15 <br> Z <br> O <br> L <br> O <br> J <br> S <br> T <br> J <br> Z <br> J <br> Z <br> S <br> Z <br> I <br> O</code> </td> <td> <code>1 2 <br> 9 1 <br> 6 4 <br> 9 1 <br> 3 2 <br> 6 1 <br> 1 2 <br> 4 1 <br> 6 2 <br> 3 1 <br> 8 2 <br> 2 2 <br> 4 1 <br> 10 1 <br> 6 1</code> </td> </tr></tbody></table></div><h4>  Hinweise </h4><br>  In diesem Beispiel werden 4 Zeilen zerstört. <br><br>  Der Endzustand des Feldes: <br><br><img src="https://habrastorage.org/webt/kk/l3/m3/kkl3m3iepvoc6olrzp5mmawvr1y.png"><br><br>  Informationen zu Fehlercodes: <br><br>  1. PE - ein Ausgabefehler wurde gemacht (zum Beispiel gibt es keine solche Drehung der Figur) <br>  2. WA - Informationen über die Drehung und Position der Figur wurden korrekt angegeben, diese Anordnung liegt jedoch außerhalb der Feldgrenzen. <br>  3. TL, ML, OK, RE - diese Codes haben die gleiche Bedeutung wie in den Regeln des Yandex.Contest-Systems. <br><br>  Da das Problem NP-vollständig ist, sollte die Lösung aus mathematischer Sicht nicht optimal sein.  Die Wirksamkeit der Entscheidung wird durch die Anzahl der erzielten Punkte bestimmt. </div></div><br><h4>  Lösung </h4><br>  Dies ist eine offene Testaufgabe.  Lassen Sie uns herausfinden, was dies bedeutet. <br><br>  Der Teilnehmer erhält ein Zip-Archiv, in dessen Stammverzeichnis sich die Textdateien input1.txt, input2.txt, ..., input10.txt befinden.  Eine Datei besteht aus einer Reihe von Tetramino-Figuren, die angeordnet werden müssen.  Als Antwort des Teilnehmers wird ein generiertes Zip-Archiv erwartet, in dessen Stammverzeichnis sich die Dateien output1.txt, output2.txt, ..., output10.txt befinden.  Jede Datei muss Züge von Teilen in derselben Reihenfolge enthalten, in der sie in der Datei des entsprechenden Satzes angegeben sind. <br><br>  Die Aufgabe ist NP-vollständig und eine hundertprozentige Lösung ist nur eine erschöpfende Suche.  Daher wächst die Komplexität exponentiell mit der Zunahme der Anzahl von Figuren.  Da es nicht erforderlich ist, den Lösungscode zu übergeben, gibt es keine Einschränkungen in Bezug auf Speicher und Ausführungszeit. <br><br>  Ein voller Punkt für die Aufgabe wurde vergeben, wenn eine „zufriedenstellende“ Qualität erreicht wurde - die Lösung sollte 60% der Punkte erreicht haben.  Die Lösung des Autors für das Problem, die auf einem genetischen Algorithmus basierte, der auf einem Standard-Tetris-Randomizer trainiert wurde, erzielte ebenso viele Punkte.  Dieser Randomizer ist <a href="https://tetris.fandom.com/wiki/Random_Generator">im Artikel beschrieben</a> . <br><br>  Der Rest der Aufgabe unterscheidet sich nicht wesentlich vom Schreiben eines regulären Bots für Tetris, mit der Ausnahme, dass das "Glas" des Spielfelds eine unbegrenzte Höhe hat.  Daher hängt der Erfolg der Entscheidung nicht davon ab, wie lange der Bot spielen kann, ohne über das „Glas“ hinauszugehen, sondern davon, wie erfolgreich er eine begrenzte Anzahl von Zahlen arrangiert. <br><br>  Dem Teilnehmer stand es frei, eine Lösungsstrategie zu wählen.  Hier sind einige davon in der Reihenfolge zunehmender Komplexität und zunehmender Anzahl erzielter Punkte: <br><br>  1. Wir spielen „Hände“, ohne den Code zu verwenden, und schreiben Züge in die Lösung. <br>  2. Wir schreiben einen Visualizer und spielen "Hände", wobei wir die Züge in der Lösung aufschreiben. <br>  3. Der gierige Algorithmus.  Bei jedem Spielzug versuchen wir, das Teil so zu platzieren, dass die Anzahl der zerstörten Reihen maximal ist.  Wenn es mehrere solcher Optionen gibt, wählen Sie sie nach dem Zufallsprinzip aus. <br>  4. Derselbe Greedy-Algorithmus wie in Absatz 3, nur wird nicht der Erfolg der Einstellung einer Ziffer überprüft, sondern der Erfolg der erschöpfenden Suche in einer Gruppe von Ziffern (beispielsweise einer Gruppe von fünf Ziffern). <br>  5. Der genetische Algorithmus.  Wir berücksichtigen in der Fitnessfunktion nicht nur die Anzahl der gebrochenen Reihen, wie im Greedy-Algorithmus, sondern auch die Glätte des "Reliefs" des Feldes und beispielsweise die Anzahl der zwischen den Figuren gebildeten Freiräume. <br><br><h2>  D und E. Quest </h2>  <sup><i>Autoren: Ilimdar Ablyaev und Ilya Kuteev</i></sup> <br><br>  Mischa macht ein Handyspiel im Genre der Suche.  Er fand im Internet eine fertige Bibliothek mit einer Engine für das Spiel und erstellte eine darauf basierende Benutzeroberfläche.  Mischa hat es eilig, das Spiel zu veröffentlichen, und hat während des Entwicklungsprozesses mehrere Fehler gemacht.  Um das Projekt rechtzeitig abzuschließen, bat Mischa Sie um Hilfe.  Laden Sie das Projekt herunter, korrigieren Sie Übersetzungsfehler, Abstürze und logische Fehler.  Schließen Sie die Quest ab und gehen Sie zum Bingo-Bildschirm, auf dem die geheime Phrase erscheint.  Sie wird die Antwort auf das Problem sein. <br><br>    : <a href="https://yadi.sk/d/pSevFNC3wACyGQ">Android</a> , <a href="https://yadi.sk/d/scriCzh0-XblPQ">iOS</a> .   —   (  255 ). <br><br><h4>   Android </h4><br> 1)        . <br><br> 2)        ,   IDE. <br><br><ol><li>   final  mBackButton  mTitleTextView,      . </li><li>    mTitleTextView  mBackButton   ,      ,       . </li><li>        —  Layout  ViewGroup. </li><li>   okButton   getTextTaskControlsLayout. </li><li>  IDE    ,    «»  «»   . </li></ol><br> 3)  .  ds     ,        «java.lang.IllegalStateException: You need to use a Theme.AppCompat theme (or descendant) with this activity».      . <br><br> 4)  . <br><br><ul><li>        — java.lang.IndexOutOfBoundsException. </li><li>    :     Layout       Layout. . </li><li>         1.1 (     ). </li></ul><br> 5)   . <br><br><ul><li>    ,    . </li><li>       (   ,      ,   ). </li><li>    .    : <br> —       Layout. <br> —      . </li><li>      . </li></ul><br> 6)   .     —        . <br><br> 7)  «». <br><br><ul><li>     android.content.res.Resources$NotFoundException. </li><li>    .   ,    ID . </li><li>    . </li></ul><br> !         . <br><br><h4>   iOS </h4><br>       .   : <br><br><img src="https://habrastorage.org/webt/w_/n8/sh/w_n8shb8lv1tuk_hfwsv8uo0ye0.png" width="800"><br><br><cut></cut>  ,      Optional&lt;Optional&lt;Step&gt;&gt;. guard let    Optional  .    Optional,  flatMap({ $0 }),      . <br><br><img src="https://habrastorage.org/webt/qv/io/to/qviotowslanuxz3u2n7lus_d-y0.png" width="720"><br><br>  ,    . <br><br><img src="https://habrastorage.org/webt/hz/vk/v4/hzvkv4xffka4pvsvpcmjmbdyp1s.png" width="600"><br><br>   ,     QuestCore    .  : <br><br><img src="https://habrastorage.org/webt/7q/5a/vo/7q5avoteuj4nosrfndsb3lly0ie.png"><br><br>   ,       —  goLeft,  goRight     .   ,  goRight  . <br><br><img src="https://habrastorage.org/webt/xa/xd/nn/xaxdnn9hfvfx4x74hit0resqy1y.png" width="380"><br><br>        ,    :    TestView,   firstResponder    .   ,  TestView   firstResponder.    ,        UIKit. <br><br><img src="https://habrastorage.org/webt/cr/6l/3t/cr6l3tid8c7couuavz26b5235z4.png" width="500"><br><br>      «».     IBOutlet,     ,       .         . <br><br><img src="https://habrastorage.org/webt/32/wv/6r/32wv6rozifqs4ro2ncvwm3rdvco.png" width="600"><br><br><img src="https://habrastorage.org/webt/yt/a1/fm/yta1fmc5us8kz77j_4zdleeidoy.png" width="500"><br><br><hr><br> <a href="https://habr.com/ru/company/yandex/blog/428882/"> </a>      ,     2018 . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482210/">https://habr.com/ru/post/de482210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482198/index.html">So erstellen Sie Ihren Autoscaler für einen Cluster</a></li>
<li><a href="../de482200/index.html">Blockchain für Cybersicherheit: Erwartungen und Realität</a></li>
<li><a href="../de482202/index.html">Methoden zum Aktualisieren der Kryptografie auf Check Point-Geräten auf GOST 2012</a></li>
<li><a href="../de482206/index.html">Wie man die 3D-Produktion von Flugzeugteilen wirtschaftlicher macht</a></li>
<li><a href="../de482208/index.html">Geschenke, mit denen Sie das neue Jahr verpassen</a></li>
<li><a href="../de482212/index.html">Sprechen Sie über ... Käse?</a></li>
<li><a href="../de482216/index.html">23 Antworten auf Depressionen von einem professionellen Psychiater Maxim Malyavin (dpmmax)</a></li>
<li><a href="../de482218/index.html">Java Digest für den 27. Dezember</a></li>
<li><a href="../de482220/index.html">Lokalisierung von Aruco-Markern</a></li>
<li><a href="../de482222/index.html">Webanwendung auf Kotlin + Spring Boot + Vue.js (Add-On)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>