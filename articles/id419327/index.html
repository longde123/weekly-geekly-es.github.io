<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏂🏻 👖 👩🏾‍🏭 Panduan Daftar Antarmuka pada MikroTik ✋🏾 🌥️ 🈸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Daftar antarmuka muncul di MikroTik RouterOS untuk waktu yang lama, tetapi dengan pengamatan, tidak semua orang tahu tentang mereka dan karena itu tid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panduan Daftar Antarmuka pada MikroTik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419327/">  Daftar antarmuka muncul di MikroTik RouterOS untuk waktu yang lama, tetapi dengan pengamatan, tidak semua orang tahu tentang mereka dan karena itu tidak menggunakannya. <br><br><h2>  Deskripsi </h2><br>  Apa ini jelas dari namanya - Daftar Antarmuka, sama dengan daftar alamat, hanya dengan antarmuka.  Jangan bingung dengan jembatan dan antarmuka yang membatasi, ini adalah tiga teknologi berbeda untuk tugas yang berbeda.  Fungsionalitas ini muncul sekitar setahun yang lalu dan hadir dalam semua rilis terbaru (saat ini dan bugfix) dari RouterOS 6. <br><br>  Hal utama yang perlu diingat: Antarmuka dalam daftar terus independen, lalu lintas tidak akan mulai melalui mereka (seperti dalam kasus jembatan) dan tidak akan diparalelkan (seperti dalam kasus pembatas), itu lucu untuk Anda, tetapi ada orang-orang pintar. <br><a name="habracut"></a><br><h2>  Daftar Standar </h2><br>  [Antarmuka] -&gt; [Daftar Antarmuka] -&gt; [Daftar] <br>  Secara default, ada tiga daftar: semua, tidak ada, dinamis.  Dengan dua yang pertama, semuanya jelas, dinamis saat ini dihuni dari koneksi ppp tertentu dan Mendeteksi Internet. <br><br>  Opsi konsol: <br><br><pre><code class="hljs kotlin">/<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span></span></code> </pre> <br>  <b>Buat daftar Anda</b> <br>  [Antarmuka] -&gt; [Daftar Antarmuka] -&gt; [Daftar] -&gt; [+] <br>  nama - nama <br>  termasuk - sertakan antarmuka dari daftar yang ditentukan dalam daftar baru <br>  exclude - mengecualikan antarmuka dari daftar yang ditentukan dari daftar baru <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o8/7u/ei/o87ueiwn9n0infdw2bhp2xx9fla.png"></div><br>  Opsi konsol: <br><br><pre> <code class="hljs cs">/<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">list</span></span> <span class="hljs-title"><span class="hljs-title">add</span></span> <span class="hljs-title"><span class="hljs-title">name</span></span>=test</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Sertakan contoh</b> <div class="spoiler_text">  Antarmuka berikut tersedia untuk mengakses Internet: <br>  ether1-wan (ip asli) <br>  ether2-wan (ip asli) <br>  l2tp-vpn1 (ip abu-abu) <br>  l2tp-vpn2 (ip abu-abu) <br><br>  Dari dua yang pertama, kami mengharapkan koneksi masuk dari luar, dari yang kedua, jika ada, maka kami tidak tertarik. <br><br>  Antarmuka ether1-wan dan ether2-wan digabungkan ke dalam daftar wan.  Garis hijau. <br><br>  Antarmuka l2tp-vpn1 dan l2tp-vpn2 digabungkan ke dalam daftar vpn.  Garis merah. <br><br>  Daftar inet berisi (termasuk) wan dan vpn.  Garis hitam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/v7/yc/hrv7yclcksuwd13nk2pzqcbe7lq.png"></div><br>  Sekarang di firewall Anda dapat memisahkan lalu lintas masuk (dan melewati dari sisi wan / vpn) dengan wan dan vpn dan menulis aturan terpisah, dan keluar (dan lewat ke sisi wan / vpn) bersama-sama (kemungkinan besar akan menjadi dangkal didirikan, baru) melalui inet . <br><br>  Contohnya canggung, tetapi saya tidak punya yang lain. <br></div></div><br><h2>  Menambahkan Antarmuka </h2><br>  Anda dapat menambahkan antarmuka apa pun: ethernet, wlan, bridge, vlan, vpn, vif, ... Semuanya dilakukan dari menu utama [Daftar Antarmuka]. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/hf/3o/tshf3op7znm8obwadjr2lmsauqe.png"></div><br>  Opsi konsol: <br><br><pre> <code class="hljs cmake">/interface <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> member add interface=ether1 <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">test</span></span></code> </pre> <br><h2>  Penggunaan dalam filter firewall </h2><br>  Aplikasi utama adalah untuk menyederhanakan aturan firewall, katakanlah Anda memiliki hub vpn dan Anda perlu mengkonfigurasi aturan untuk lalu lintas yang lalu lalang, tetapi buat sejelas mungkin. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oj/0d/nw/oj0dnwl132fwezywphoqywsif_i.png"></div><br>  Sebelum: <br><br>  Periksa di-antarmuka, kirim ke chain-1. <br>  Di rantai-1, periksa antarmuka, kirim ke rantai-2. <br>  Di rantai-2, kami membuat aturan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/z9/ja/qez9jawzudxpqwsg11hfq8hj8mg.png"></div><br>  Dan untuk setiap antarmuka.  4 koneksi - 8 aturan, 8 koneksi - 16 aturan.  Apakah koneksinya dinamis?  Anda dapat keluar dan menggunakan semua ppp, membuangnya ke rantai-1, dan kemudian kembali 'Anda perlu antarmuka tambahan dari rantai-1. <br><br>  Sekarang: <br><br>  Kami menambahkan semua antarmuka ke satu daftar dan membuat satu aturan dengan daftar di-antarmuka-dan-antarmuka-yang sama, yang mentransfer ke rantai dengan aturan penyaringan.  Itu menjadi lebih pendek. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ce/my/m3/cemym38bkxwc9gr08bkecjvfcii.png"></div><br>  <i>Ada minus dalam skema ini, jika Anda melihat "sebelumnya", maka untuk setiap antarmuka subnet dari alamat yang diharapkan pada antarmuka terdaftar, dalam skema baru Anda dapat mengarahkan semua antarmuka ke daftar alamat, tetapi alamat subnet tidak akan lagi terhubung dengan jelas ke antarmuka.</i> <br><br>  Contoh lain adalah Anda memiliki beberapa penyedia dan Anda terlalu malas untuk menduplikasi aturan untuk masing-masing: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_t/sz/bx/_tszbx0l1jgo5eenl9ro07by7l8.png"></div><br><h2>  Penggunaan di firewall nat </h2><br>  Ketika daftar antarmuka baru saja muncul, di forum mikrotik mengeluh tentang pekerjaan daftar antarmuka di nat, sekarang tampaknya telah diperbaiki.  Saya memutuskan untuk menyelidiki <br><br>  Test stand: <br><br><img src="https://habrastorage.org/webt/e8/ko/ye/e8koyeez2ohyxyitrjoj9ycdheg.png"><br>  <i>Skema tidak memiliki alamat yang cukup untuk hal yang sama</i> <br><br>  Hasil: <br><br>  Rantai src-nat: <br>  * menyamar - bekerja.  Bergantung pada antarmuka output, gantikan ip yang sesuai. <br>  * src-nat - berfungsi.  Mengganti ip yang ditentukan hanya untuk antarmuka di mana ip ini hadir. <br>  * sama - bekerja.  Demikian pula dengan src-nat. <br><br>  Rantai dst-nat: <br><br>  * redirect - berfungsi. <br>  * dst-nat - berfungsi.  Termasuk dalam kombinasi dengan topeng. <br>  * netmap - berfungsi.  Jika Anda menggunakannya, bukan dst-nat.  Ketika digunakan sebagaimana dimaksud, itu juga berfungsi. <br><br><h2>  Penggunaan dalam firewall mangle </h2><br>  Itu bekerja.  Misalnya, jika Anda perlu menandai semua lalu lintas masuk dari antarmuka untuk pohon antrian. <br><br><h2>  Penggunaan dalam profil vpn </h2><br>  Kami ingat contoh dengan vpn regional.  Wilayah kelima telah ditambahkan dan Anda menambahkannya dengan tangan ke daftar antarmuka, tetapi Anda dapat melakukannya dengan lebih mudah dan tentukan dalam profil vpn yang daftar antarmuka akan ditempatkan pada koneksi, terlepas dari apakah itu mengikat atau dibuat secara otomatis ketika klien memutus antarmuka dari daftar dihapus.  Untuk vpn keluar, ini juga berfungsi. <br><br>  [PPP] -&gt; [Profil] <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8m/vh/sh/8mvhsh4bgd0y2k0hykyvf2jyywc.png"></div><br>  Semuanya baik-baik saja, tetapi ada bug (pada saat publikasi, versi RoS 6.42.6).  Jika Anda membuat penjilidan dan menambahkannya secara statis ke daftar yang ditentukan dalam profil, maka koneksi tidak akan dibuat.  Dalam log (server) akan ada sesuatu seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gz/kx/ye/gzkxyeja-4c0hmcbrzkokqbmity.png"></div><br><h2>  Penggunaan di jembatan </h2><br>  Anda dapat menentukan daftar antarmuka sebagai anggota jembatan, tetapi hanya antarmuka yang dapat bekerja pada Layer 2 (ethernet, wlan, bounding, eoip, ovpn-ethernet, ...) akan ditambahkan, kecuali jembatan lain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fl/ne/k2/flnek2nq-wlt7ebooedlaccvxn4.png"></div><br><h2>  Deteksi internet </h2><br>  Fungsionalitas muncul dalam versi firmware saat ini dan belum siap untuk digunakan. <br>  [Antarmuka] -&gt; [Deteksi Intrnet] <br>  * Mendeteksi Daftar Antarmuka - daftar dengan antarmuka tempat pemeriksaan akan dilakukan. <br>  * LAN Interface List - daftar di mana semua antarmuka layer2 aktif ditambahkan.  Dapatkan status lan. <br>  * Daftar Antarmuka WAN - daftar semua terowongan lte dan vpn ditambahkan.  Juga antarmuka dengan status lan yang tidak memiliki server dhcp dan dari mana alamat 8.8.8.8 tersedia.  Selain semuanya, mikrotik akan menambahkan klien dhcp ke antarmuka dalam upaya untuk mendapatkan pengaturan secara otomatis. <br>  * Daftar Antarmuka Internet - daftar antarmuka dengan status berkurang, jika cloud.mikrotik.com opin0000 tersedia dari mereka.  Memeriksa ulang setiap menit, setelah 3 upaya yang gagal, antarmuka kembali ke status berkurang.  Ubah alamat verifikasi, atau interval tidak bisa. <br><br>  [Status Antarmuka] - hasil pengujian. <br><br>  Ini adalah cara kerjanya, tetapi dalam praktiknya, permintaan untuk cloud.mikrotik.com tidak terkirim.  Kami menunggu dan berharap bahwa: mereka akan memperbaikinya;  menghapus batasan;  tambahkan kemampuan untuk mengeksekusi skrip saat mengubah keadaan antarmuka. <br><br><div class="spoiler">  <b class="spoiler_title">Judul spoiler</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3a/lk/lu/3alkluuy0cepvpkwqbyra0_txus.png"></div></div><br><h2>  Lainnya </h2><br>  Di cabang saat ini, MikroTik memutuskan bahwa ada baiknya menggunakan Daftar Antarmuka lebih aktif dan sekarang opsi berikut ini dikonfigurasi melalui daftar antarmuka, bukan antarmuka tertentu: <br>  * [IP] -&gt; [Tetangga] -&gt; [Pengaturan Penemuan] <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eu/go/at/eugoatfefz1tapspzq9aaujzlu8.png"></div><br>  * [Alat] -&gt; [MAC-Server] -&gt; [Mac-Telnet Server] &amp; [Mac-Winbox Server] <br><img src="https://habrastorage.org/webt/pf/bx/gr/pfbxgrlkcsrorvbwweyi7png9ps.png"><img src="https://habrastorage.org/webt/nv/jk/cc/nvjkccfj5qcpk_n31qetk2zqo8e.png"><br>  Setelah upgrade, jangan lupa untuk mengkonfigurasi ulang. <br><br><h2>  Script dan cli </h2><br>  Anda mungkin menghadapi situasi ketika salah satu antarmuka dalam daftar menjadi tidak diketahui (jika Anda menghapus antarmuka sebelum menghapusnya dari daftar) dan saya secara pribadi belum dapat menemukan cara untuk secara sederhana (tanpa menghapus seluruh daftar dan mengisi berlebihan) menghapus antarmuka seperti itu menggunakan cli dan skrip.  Jika ada yang tahu - tulis di komentar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/iy/hh/raiyhhhvhno-5p3troq4-dfflma.png"></div><br>  Itu saja.  Saya berharap bahwa di dunia akan ada lebih sedikit konfigurasi dengan penyatuan antarmuka di jembatan untuk mengurangi aturan di firewall. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419327/">https://habr.com/ru/post/id419327/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419315/index.html">Kehidupan mesin setelah kematian roket</a></li>
<li><a href="../id419319/index.html">Cara memulai Istio menggunakan Kubernetes dalam produksi. Bagian 1</a></li>
<li><a href="../id419321/index.html">SamsPcbGuide Bagian 7: Tracing Signal Lines. Pasangan diferensial</a></li>
<li><a href="../id419323/index.html">Instal Kubernetes di Hetzner Cloud</a></li>
<li><a href="../id419325/index.html">Pindahkan siswa ke Prancis</a></li>
<li><a href="../id419329/index.html">Acara digital di Moskow dari 6 hingga 12 Agustus</a></li>
<li><a href="../id419333/index.html">Tic Tac Toe di DNS</a></li>
<li><a href="../id419335/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 325 (30 Juli - 5 Agustus 2018)</a></li>
<li><a href="../id419339/index.html">Tantangan Boeing dan Keberhasilan SpaceX di Konferensi Grup Penasihat Keamanan Aerospace</a></li>
<li><a href="../id419341/index.html">Apa yang tidak mereka katakan tentang laporan Tesla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>