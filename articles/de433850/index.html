<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙌 🐛 🖊️ Luxon - eine neue Bibliothek für die Arbeit mit Daten aus dem Moment.js-Team 👨🏿‍🤝‍👨🏾 🏪 ☝🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es scheint, warum brauchen wir eine andere Bibliothek, um mit Datums- und Uhrzeitangaben zu arbeiten, wenn es eine bekannte Moment-Bibliothek gibt ?! ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Luxon - eine neue Bibliothek für die Arbeit mit Daten aus dem Moment.js-Team</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433850/"><img src="https://habrastorage.org/webt/j1/wb/tr/j1wbtroijv6w7pxb5j1ku-pgdso.jpeg"><br><br>  Es scheint, warum brauchen wir eine andere Bibliothek, um mit Datums- und Uhrzeitangaben zu arbeiten, wenn es eine bekannte Moment-Bibliothek gibt ?!  Umso interessanter ist, dass die Alternative vom Moment-Team selbst vorgeschlagen wurde. <br><a name="habracut"></a><br>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Luxon-</a> Bibliothek gilt als leistungsstarkes, modernes und praktisches Tool für die Arbeit mit Datums- und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Uhrzeitangaben</a> in JavaScript.  Die Bibliothek wurde von Isaac Cambron erstellt, der seit 2013 Mitglied des Moment-Entwicklungsteams ist. <br><br>  Der Autor hatte viele Ideen für die Entwicklung von Moment, die er im Rahmen des vorhandenen Codes nicht machen konnte.  Hier sind die wichtigsten Punkte, die ich implementieren wollte: <br><br><ul><li>  Probieren Sie einige Ideen aus, wie Sie die API logischer gestalten können (diese Ideen waren jedoch nicht mit dem von Moment verfolgten Ansatz kompatibel). </li><li>  Implementieren Sie "out of the box" Arbeiten mit Zeitzonen ohne zusätzliche Erweiterungen. </li><li>  Überdenken Sie die Arbeit mit der Internationalisierung unter Berücksichtigung des Aufkommens der Intl-API vollständig. </li><li>  Wechseln Sie bei der Erstellung von JS-Code zu einer Reihe moderner Tools und Ansätze. </li></ul><br>  Deshalb beschloss er, alles von Grund auf neu zu schreiben, was ungefähr zwei Jahre dauerte. <br>  Das Ergebnis ist eine Art modernisierte Version von Moment. <br>  Die resultierende Version schien für das gesamte Moment-Entwicklungsteam interessant zu sein, daher wurde beschlossen, die neue Bibliothek unter der Schirmherrschaft des Teams zu bewerben. <br><br><h2>  Luxon-Prinzipien </h2><br><ol><li>  Anrufketten wie im Moment. </li><li>  Alle Typen sind unveränderlich. </li><li>  Klarere und offensichtlichere API: für verschiedene Objekte - verschiedene Methoden mit klar definierten Parametern. </li><li>  Intl-API für die Internationalisierung (Rollback auf die englische Version, wenn der Browser die Intl-API nicht unterstützt). </li><li>  Intl API für die Arbeit mit Zeitzonen. </li><li>  Vollständigere Unterstützung für die Berechnung der Dauer. </li><li>  Native Intervallunterstützung. </li><li>  Inline-Code-Dokumentation. </li></ol><br>  <b>Diese Prinzipien haben zu folgenden Verbesserungen geführt:</b> <br><br><ul><li>  Luxon-Code ist viel einfacher zu verstehen und zu debuggen. </li><li>  Die Verwendung der integrierten Browserfunktionen für die Internationalisierung verbessert das Bibliotheksverhalten und erleichtert das Debuggen. </li><li>  Die Zeitzonenunterstützung ist besser implementiert als in jeder anderen JS-Bibliothek. </li><li>  Luxon bietet sowohl ein einfaches als auch ein sehr leistungsfähiges Werkzeug für die Arbeit mit der Dauer. </li><li>  Die Bibliothek verfügt über eine gute Dokumentation. </li></ul><br>  <b>Aber Luxon hat seine Nachteile:</b> <br><br><ul><li>  Die Betonung der Verwendung der integrierten Funktionen des Browsers führt zu Schwierigkeiten bei der Unterstützung älterer Browser. </li><li>  Einige Internationalisierungsfunktionen, die noch nicht von Browsern unterstützt werden, sind ebenfalls nicht in der Bibliothek implementiert (Sie sollten erwarten, dass diese Unterstützung in Browsern angezeigt wird). </li><li>  Die Implementierung der Intl-API in verschiedenen Browsern kann variieren, und das Verhalten von Luxon wird ebenfalls variieren. </li></ul><br><h2>  Installation </h2><br>  Luxon bietet Module für alle modernen JavaScript-Plattformen. <br><br>  Die Dokumentation enthält eine vollständige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste der unterstützten Browser</a> mit Anwendungsbeschränkungen.  Für Browser ohne oder mit eingeschränkter Intl-Unterstützung wird die Verwendung einer Polydatei empfohlen (dies gilt insbesondere für IE 10 oder 11). <br><br>  Wenn Sie mit Node.js (6+) arbeiten und mit Gebietsschemas arbeiten müssen, müssen Sie zusätzlich das <i>Full-ICU-</i> Paket installieren und die Umgebungsvariable festlegen, um die Verwendung dieses Pakets zu ermöglichen. <br><br>  Die Standardinstallationsmethode von npm: <br>  <b>npm installieren - Luxus sparen</b> <br><br>  Luxon unterstützt sowohl TypeScript als auch Flow. Es gibt auch ein Modul im ES6-Format. <br><br><h2>  Schnelle Überprüfung </h2><br>  Die Luxon-Bibliothek besteht aus fünf Hauptklassen: <br><br>  <i>DateTime</i> - Datum und Uhrzeit mit Zeitzonen- und Anzeigeeinstellungen sowie zugehörigen Methoden. <br>  <i>Dauer</i> - ein Zeitraum (Dauer), z. B. „2 Monate“ oder „1 Tag, 3 Stunden“. <br>  <i>Infostatische</i> Methoden zum Abrufen allgemeiner Daten zu Uhrzeit und Datum. <br>  <i>Intervall</i> - Zeitintervall und Methoden für die Arbeit damit. <br>  <i>Einstellungen</i> sind statische Methoden, die das allgemeine Verhalten von Luxon definieren. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {DateTime, Duration, Info, Interval, Settings} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'luxon'</span></span>;</code> </pre> <br><h3>  Deine erste datetime </h3><br>  Die wichtigste Klasse in Luxon ist DateTime.  DateTime repräsentiert Datum + Uhrzeit zusammen mit Zeitzone und Gebietsschema.  So können Sie den 15. Mai 2017 um 08:30 Uhr in der lokalen Zeitzone einstellen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>);</code> </pre> <br>  Hier ist der Aufruf zur Ermittlung der aktuellen Uhrzeit: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> now = DateTime.local();</code> </pre> <br><h3>  Aus Objekt erstellen </h3><br><pre> <code class="javascript hljs">DateTime.fromObject({ <span class="hljs-attr"><span class="hljs-attr">month</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">zone</span></span>: <span class="hljs-string"><span class="hljs-string">'Europe/Kaliningrad'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-22T12:20:00.000+02:00</span></span></code> </pre> <br><h3>  Erstellen Sie aus einer Zeichenfolge im ISO 8601-Format </h3><br><pre> <code class="javascript hljs">DateTime.fromISO(<span class="hljs-string"><span class="hljs-string">"2017-05-15"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; May 15, 2017 at 0:00 DateTime.fromISO("2017-05-15T08:30:00"); //=&gt; May 15, 2017 at 8:30</span></span></code> </pre> <br>  Bei der Konvertierung in eine Zeichenfolge gibt Luxon auch eine Zeichenfolge im ISO 8601-Format zurück: <br><br><pre> <code class="javascript hljs">DateTime.local().toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "2018-12-18T20:58:29.995+03:00"</span></span></code> </pre> <br><h3>  Einzelne Komponenten erhalten: </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.year; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018 dt.month; //=&gt; 12 dt.day; //=&gt; 18 dt.second; //=&gt; 27 dt.weekday; //=&gt; 2 dt.zoneName; //=&gt; "Europe/Moscow" dt.offset; //=&gt; 180 dt.daysInMonth; //=&gt; 31</span></span></code> </pre> <br><h3>  Formatierte Ausgabe </h3><br>  Luxon verfügt über viele Methoden zum Konvertieren von DateTime in eine Zeichenfolge. Zwei davon sind für LocalString und toISO am wichtigsten. Die erste konvertiert unter Berücksichtigung des Browserlacks in ein Format und die zweite bereitet Text für die programmatische Verarbeitung vor (z. B. für die Übertragung auf einen Server): <br><br><pre> <code class="javascript hljs">dt.toLocaleString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018" dt.toLocaleString(DateTime.DATETIME_MED); //=&gt; "18 . 2018 ., 21:46" dt.toISO(); //=&gt; "2018-12-18T21:46:55.013+03:00"</span></span></code> </pre> <br>  Luxon verfügt über zwei Dutzend vorgefertigte „Voreinstellungen“ für die formatierte Ausgabe (z. B. DATETIME_MED und TIME_WITH_LONG_OFFSET). <br><br>  Sie können auch Ihre eigene Formatierungsoption basierend auf Token erstellen: <br><br><pre> <code class="javascript hljs">dt.setLocale(<span class="hljs-string"><span class="hljs-string">'ru'</span></span>).toFormat(<span class="hljs-string"><span class="hljs-string">'d MMMM tt - ZZZZZ'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18  21:46:55 - ,  "</span></span></code> </pre><br><h3>  DateTime-Konvertierungen </h3><br>  Wichtiger Hinweis: Luxon-Objekte sind unveränderlich, d. H.  Alle auf sie angewendeten Änderungsmethoden geben die geänderte Kopie zurück, ohne das ursprüngliche Objekt zu ändern.  Daher sollten alle Begriffe in diesem Artikel (wie in der Luxon-Dokumentation) wie "Ändern", "Installieren", "Neu definieren" als "Neue Instanz mit anderen Eigenschaften erstellen" verstanden werden. <br><br><h3>  Mathematische Transformationen </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018, 20:30" dt.plus({hours: 3, minutes: 2}); //=&gt; "18.12.2018, 23:32" dt.minus({days: 7}); //=&gt; "11.12.2018, 20:30" dt.startOf('day'); //=&gt; "18.12.2018, 0:00" dt.endOf('hour'); //=&gt; "18.12.2018, 20:00"</span></span></code> </pre> <br><h3>  Einzelne Parameter überschreiben </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.set({<span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>}).hour <span class="hljs-comment"><span class="hljs-comment">//=&gt; 3</span></span></code> </pre><br><h3>  Intl Conversions </h3><br>  Luxon unterstützt mehrere verschiedene Intl-Transformationen. Eine der wichtigsten ist die Formatierung für verschiedene Gebietsschemas: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = {<span class="hljs-attr"><span class="hljs-attr">month</span></span>: <span class="hljs-string"><span class="hljs-string">'long'</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>}; dt.setLocale(<span class="hljs-string"><span class="hljs-string">'fr'</span></span>).toLocaleString(f); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18 décembre" dt.setLocale('en-GB').toLocaleString(f); //=&gt; "18 December" dt.setLocale('en-US').toLocaleString(f); //=&gt; "December 18"</span></span></code> </pre> <br>  Die Info-Klasse kann Listen von Monaten und Wochentagen in einem bestimmten Gebietsschema zurückgeben: <br><br><pre> <code class="javascript hljs">Info.months(<span class="hljs-string"><span class="hljs-string">'long'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">locale</span></span>: <span class="hljs-string"><span class="hljs-string">'it'</span></span>}); <span class="hljs-comment"><span class="hljs-comment">//=&gt; ["gennaio", "febbraio", "marzo", ...] Info.weekdays ('short', {locale: 'de'}); //=&gt; ["Mo", "Di", "Mi", ...]</span></span></code> </pre> <br><h3>  Zeitzonen </h3><br>  Luxon unterstützt Zeitzonen.  Wenn Sie eine DateTime erstellen, ohne explizit eine Zeitzone anzugeben, wird standardmäßig die lokale Zone ausgewählt.  Wenn Sie die Zone für eine vorhandene DateTime ändern, werden Uhrzeit und Datum unter Berücksichtigung der Differenz zwischen den Zeitzonen neu berechnet. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-18T20:00:00.000+03:00 dt.zone.name; //=&gt; "Europe/Moscow" dt.setZone('Asia/Vladivostok'); //=&gt; 2018-12-19T03:00:00.000+10:00</span></span></code> </pre> <br>  Luxon unterstützt auch das Arbeiten mit Datum und Uhrzeit im UTC-Format: <br><br><pre> <code class="javascript hljs">DateTime.utc(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-05-15T00:00:00.000Z DateTime.utc(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.local().toUTC(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.utc().toLocal(); //=&gt; 2018-12-18T20:58:29.995+03:00</span></span></code> </pre><br><h3>  Dauer </h3><br>  Die Dauer-Klasse bietet die Möglichkeit, mit einer Dauer von beispielsweise „2 Stunden und 7 Minuten“ zu arbeiten.  Sie können eine Dauer wie folgt erstellen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dur = Duration.fromObject({<span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>});</code> </pre> <br>  Dauern können addiert und subtrahiert werden.  Die Dauer kann einen negativen Wert haben. <br><br><pre> <code class="javascript hljs">dur.minus(dur).minus(dur); <span class="hljs-comment"><span class="hljs-comment">//=&gt; {hours: -2, minutes: -7}</span></span></code> </pre> <br>  Ebenso kann die Dauer von DateTime addiert oder subtrahiert werden. <br><br><pre> <code class="javascript hljs">DateTime.local().plus(dur);</code> </pre> <br>  Dauer hat Getter (ähnlich wie DateTime Getter): <br><br><pre> <code class="javascript hljs">dur.hours; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2 dur.minutes; //=&gt; 7 dur.seconds; //=&gt; 0 dur.zone; //=&gt; undefined</span></span></code> </pre><br>  Die Dauer hat auch andere nützliche Methoden: <br><br><pre> <code class="javascript hljs">dur.as(<span class="hljs-string"><span class="hljs-string">'seconds'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 7620 dur.toObject(); //=&gt; { hours: 2, minutes: 7 } dur.toISO(); //=&gt; 'PT2H7M'</span></span></code> </pre><br><h3>  Intervalle </h3><br>  Intervalle sind definiert als der Zeitraum zwischen zwei Zeitpunkten, mit dem die Intervallklasse gearbeitet wird.  Die Startzeit ist im Intervall enthalten, die Endzeit jedoch nicht: Dementsprechend ist der Anfang beim Konvertieren in eine Zeichenfolge mit einer eckigen Klammer und das Ende mit einer runden Klammer gekennzeichnet. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> later = DateTime.local(<span class="hljs-number"><span class="hljs-number">2020</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> interval = Interval.fromDateTimes(today, later); interval.toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "[2018-12-18T00:00:00.000+03:00 – 2020-10-12T00:00:00.000+03:00)" interval.toISO(); //=&gt; "2018-12-18T00:00:00.000+03:00/2020-10-12T00:00:00.000+03:00" interval.length(); //=&gt; 57369600000 interval.length('years', true); //=&gt; 1.8169398907103824 interval.contains(DateTime.local(2019)); //=&gt; true</span></span></code> </pre> <br>  Intervalle können miteinander verglichen und miteinander kombiniert werden: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextYear = Interval.after(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prevYear = Interval.before(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); prevYear.overlaps(nextYear); <span class="hljs-comment"><span class="hljs-comment">//false prevYear.abutsStart(nextYear); //true nextYear.union(prevYear).length('years'); //=&gt; 2</span></span></code> </pre><br><h2>  Luxon und Moment </h2><br>  Die Luxon-Bibliothek "lebt" im "Moment" -Projekt, ist jedoch kein vollständiger Ersatz für die Moment-Bibliothek.  Luxon bietet nicht die volle Funktionalität von Moment. Beispielsweise wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Formatierung des relativen Datums</a> erst kürzlich in der Chrome-Browserversion 71 implementiert, funktioniert noch nicht in anderen Browsern und die Unterstützung dafür wurde in Luxon noch nicht implementiert (obwohl dies erwartet wird).  Aber selbst wenn Browser die erforderlichen Funktionen unterstützen, müssen Sie verstehen, dass sie nur in diesen neuen Umgebungen verfügbar sind.  In älteren Browsern arbeitet Luxon mit Problemen, während Moment jederzeit und überall funktioniert. <br><br>  Darüber hinaus wurde die Luxon-API komplett neu gestaltet und unterscheidet sich grundlegend von der Moment-API. <br><br>  Beachten Sie die Hauptunterschiede zwischen Moment und Luxon. <br><br><h3>  Immunität </h3><br>  Luxon-Objekte sind unveränderlich, Moment jedoch nicht. <br>  Im folgenden Beispiel sind m1 und m2 dasselbe Objekt, das durch die add-Methode geändert wurde. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m1 = moment(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m2 = m1.add(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'hours'</span></span>); m1 === m2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; true</span></span></code> </pre><br>  Im Fall von Luxon gibt die Plus-Methode ein neues d2-Objekt zurück, ohne das ursprüngliche d1 zu ändern. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d1 = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d2 = d1.plus({ <span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }); d1 === d2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; false d1.valueOf() === d2.valueOf(); //=&gt; false</span></span></code> </pre><br>  Aus diesem Grund benötigt Luxon keine speziellen Kopierkonstruktoren oder Klonierungsmethoden, mit denen Moment Kopien erhält, ohne den ursprünglichen Wert zu ändern. <br><br><h3>  Wichtige funktionale Unterschiede </h3><br><ol><li>  Der Countdown der Monate in Luxon beginnt bei 1 und nicht bei Null wie in Moment (und nativ im Date js-Objekt). </li><li>  Lokalisierungs- und Zeitzonen werden mithilfe der nativen Intl-API (oder Polyphile) implementiert und nicht in die Bibliothek integriert. </li><li>  Luxon verfügt über integrierte Typen für Dauer und Intervall. </li><li>  Luxon unterstützt die relative Datumsformatierung noch nicht. </li><li>  Luxon hat auch keine Humanisierungsmethode zur Darstellung der Dauer in einem „humanisierten“ Stil (z. B. „einige Sekunden“). </li></ol><br><h3>  Unterschiede im API-Stil </h3><br><ul><li>  Bei Luxon-API-Methoden befinden sich die optionalen Parameter normalerweise zuletzt. </li><li>  Luxon verfügt im Gegensatz zu Moment, das eine Funktion dafür hat, über viele separate Methoden zum Erstellen von Objekten (z. B. fromISO), und der Typ des Objekts wird durch Parameter festgelegt. </li><li>  Luxon hat sehr strenge Parser, während Moment liberalere hat, d.h.  Wenn sich das Format der Eingabezeichenfolge vom Standard unterscheidet, gibt Luxon sofort einen Fehler aus, und Moment versucht, einige Fehler im Format zu korrigieren. </li><li>  Luxon verwendet Getter (dt.year, dt.isValid), um den Wert interner Felder abzurufen, und keine Methoden wie Moment (m.year (), m.isValid ()). </li><li>  Mit Luxon kann eine Methode sofort alle erforderlichen Parameter dt.set ({Jahr: 2016, Monat: 4}) festlegen. Im Moment werden sie jeweils nur einzeln festgelegt - eine Aufrufkette m.year (2016) .month (4). </li><li>  Duration in Luxon ist eine separate Duration-Klasse der obersten Ebene. </li></ul><br>  Ansonsten hat Luxon viele Ideen von Moment übernommen, die Dokumentation enthält sogar Tabellen zur Äquivalenz der Moment- und Luxon-Methoden. <br><br><h3>  Bibliotheksdateigrößen </h3><br>  <i>Luxon (v. 1.8.2)</i> <br>  luxon.min.js - 61 KB <br><br>  <i>Moment (v. 2.23.0)</i> <br>  moment.min.js - 51 KB <br>  moment.min.js + locale / ru.js - 59 KB <br>  moment-with-locales.min.js - 323 KB <br><br>  Wie Sie sehen können, ist die Größe ohne Moment-Gebietsschemas 10 KB kleiner als bei Luxon. Durch Hinzufügen mehrerer Gebietsschemas wird die Größe jedoch ungefähr gleich. <br><br>  Wenn für alle Gebietsschemas sofort Unterstützung erforderlich ist, bietet Luxon einen erheblichen Gewinn. <br><br><h3>  Zusammenfassung </h3><br>  Die Bibliothek ist vollständig einsatzbereit und der Autor verspricht seine Unterstützung.  Die Bibliothek hat bereits 7k + Sterne auf dem Github und ihre Popularität wächst nur.  Nicht nur die Autorin selbst macht die Commits in ihrem Code, sondern mindestens 6 weitere Entwickler. <br><br>  Ich gehe davon aus, dass die Luxon-Bibliothek eine Reaktion auf das Auftreten der Intl-API-Unterstützung in Browsern ist.  Momentan wissen Entwickler, dass sich die Arbeit mit Daten im Web erheblich ändern kann, und versuchen, sich auf diese Änderungen vorzubereiten.  Sie können jedoch die Entwicklung des Webs und damit des neuen Projekts (das sie selbst als Moment Labs-Projekt bezeichnen) nicht genau vorhersagen.  Werden Luxon-Ideen auf Moment 3 portiert?  Werden die meisten Benutzer irgendwann von Moment zu Luxon wechseln?  Vielleicht wird Luxon in Moment umbenannt?  Die Entwickler selbst geben zu, dass sie diese Fragen jetzt nicht beantworten können. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433850/">https://habr.com/ru/post/de433850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433838/index.html">Joshua Zayners öffentlicher Biohacker-Brief</a></li>
<li><a href="../de433842/index.html">[Freitag] ASCII-Graffiti auf Retro-Monitoren und anderen Oberflächen</a></li>
<li><a href="../de433844/index.html">Informationen zu den drei Komponenten, die für eine erfolgreiche IT erforderlich sind</a></li>
<li><a href="../de433846/index.html">Atomkraft vor dem Aufkommen der Kernkraftwerke</a></li>
<li><a href="../de433848/index.html">Apple Patent für Elektrofahrzeuge</a></li>
<li><a href="../de433852/index.html">Die Geschichte eines Experiments mit Cython und C ++ Vektor</a></li>
<li><a href="../de433854/index.html">Fliegende Autos, Arztroboter und Blockchain: Was 2018 passiert ist</a></li>
<li><a href="../de433856/index.html">Und wer ist in deiner Bande?</a></li>
<li><a href="../de433858/index.html">Beste JPoint 2018 Papers: Java / JVM und seine Leistung, Kotlin, Spring, Docker</a></li>
<li><a href="../de433860/index.html">Sich um den Benutzer kümmern oder Kunden vor Fehlern schützen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>