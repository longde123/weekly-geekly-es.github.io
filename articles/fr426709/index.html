<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶üèæ üóûÔ∏è üßîüèæ Minuteries JavaScript: tout ce que vous devez savoir üëãüèø üç§ ‚õπüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour chers coll√®gues. Il √©tait une fois, un article sur Habr√© a √©t√© r√©dig√© par John Rezig sur ce sujet. 10 ans se sont √©coul√©s et le sujet doit enc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Minuteries JavaScript: tout ce que vous devez savoir</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/426709/">  Bonjour chers coll√®gues.  Il √©tait une fois, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un article</a> sur Habr√© a √©t√© r√©dig√© par John Rezig sur ce sujet.  10 ans se sont √©coul√©s et le sujet doit encore √™tre clarifi√©.  Par cons√©quent, nous proposons aux personnes int√©ress√©es de lire l'article de Samer Buna, qui donne non seulement un aper√ßu th√©orique des minuteries en JavaScript (dans le contexte de Node.js), mais √©galement des t√¢ches √† leur sujet. <br><br><img src="https://habrastorage.org/webt/zs/0c/vx/zs0cvxfhr8yi-cnds0y27thmg0u.png"><br><a name="habracut"></a><br><br>  Il y a quelques semaines, j'ai tweet√© la question suivante √† partir d'une seule interview: <br><br><blockquote>  ¬´O√π est le code source des fonctions setTimeout et setInterval?  O√π le chercheriez-vous?  Vous ne pouvez pas le rechercher sur Google :) " <br></blockquote><br>  *** R√©pondez par vous-m√™me, puis lisez la suite *** <br><br><hr><br>  Environ la moiti√© des r√©ponses √† ce tweet √©taient incorrectes.  Non, le cas N'EST PAS RELI√â √† la V8 (ou √† d'autres VM) !!!  Les fonctions telles que <code>setTimeout</code> et <code>setInterval</code> , fi√®rement appel√©es JavaScript JavaScript Timers, ne font partie d'aucune sp√©cification ECMAScript ou impl√©mentation de moteur JavaScript.  Les fonctions de minuterie sont impl√©ment√©es au niveau du navigateur, leur impl√©mentation diff√®re donc selon les navigateurs.  Les temporisateurs sont √©galement impl√©ment√©s nativement dans le runtime Node.js. <br><br>  Dans les navigateurs, les principales fonctions de temporisation se r√©f√®rent √† l'interface <code>Window</code> , qui est √©galement associ√©e √† d'autres fonctions et objets.  Cette interface fournit un acc√®s global √† tous ses √©l√©ments dans le cadre principal de JavaScript.  C'est pourquoi la fonction <code>setTimeout</code> peut √™tre ex√©cut√©e directement dans la console du navigateur. <br><br>  Dans Node, les minuteries font partie de l'objet <code>global</code> , qui est con√ßu comme l'interface de navigateur de <code>Window</code> .  Le code source des minuteries dans Node est affich√© <a href="">ici</a> . <br><br>  Il peut sembler √† quelqu'un que c'est juste une mauvaise question de l'entretien - √† quoi √ßa sert de savoir √ßa?!  En tant que d√©veloppeur JavaScript, je pense de cette fa√ßon: il est suppos√© que vous devez le savoir, car l'inverse peut indiquer que vous ne comprenez pas tr√®s bien comment V8 (et d'autres machines virtuelles) interagissent avec les navigateurs et Node. <br><br>  Regardons quelques exemples et r√©solvons quelques t√¢ches de minuterie, d'accord? <br><br>  <i>Vous pouvez utiliser la commande node pour ex√©cuter les exemples de cet article.</i>  <i>La plupart des exemples pr√©sent√©s ici figurent dans mon cours de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mise en route de Node.js</a> sur Pluralsight.</i> <br><br>  <b>Ex√©cution de fonction diff√©r√©e</b> <br><br>  Les temporisateurs sont des fonctions d'ordre sup√©rieur avec lesquelles vous pouvez retarder ou r√©p√©ter l'ex√©cution d'autres fonctions (le temporisateur re√ßoit une telle fonction comme premier argument). <br><br>  Voici un exemple d'ex√©cution diff√©r√©e: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example1.js setTimeout( () =&gt; { console.log('Hello after 4 seconds'); }, 4 * 1000 );</span></span></code> </pre> <br>  Dans cet exemple, √† l'aide de <code>setTimeout</code> le message d'accueil est retard√© de 4 secondes.  Le deuxi√®me argument de <code>setTimeout</code> est le d√©lai (en ms).  Je multiplie 4 par 1000 pour obtenir 4 secondes. <br><br>  Le premier argument de <code>setTimeout</code> est une fonction dont l'ex√©cution sera retard√©e. <br>  Si vous ex√©cutez le fichier <code>example1.js</code> avec la commande node, Node se met en pause pendant 4 secondes, puis affiche un message de bienvenue (suivi d'une sortie). <br><br>  Remarque: le premier argument de <code>setTimeout</code> n'est qu'une <b>r√©f√©rence de fonction</b> .  Il ne doit pas s'agir d'une fonction int√©gr√©e, telle que <code>example1.js</code> .  Voici le m√™me exemple sans utiliser la fonction int√©gr√©e: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> func = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello after 4 seconds'</span></span>); }; setTimeout(func, <span class="hljs-number"><span class="hljs-number">4</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br>  <b>Passer des arguments</b> <br><br>  Si la fonction pour laquelle <code>setTimeout</code> est utilis√© pour retarder accepte des arguments, vous pouvez utiliser les arguments restants de la fonction <code>setTimeout</code> elle-m√™me (apr√®s ceux que nous avons d√©j√† √©tudi√©s) pour transf√©rer les valeurs des arguments √† la fonction diff√©r√©e. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : func(arg1, arg2, arg3, ...) //  : setTimeout(func, delay, arg1, arg2, arg3, ...)</span></span></code> </pre> <br>  Voici un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example2.js const rocks = who =&gt; { console.log(who + ' rocks'); }; setTimeout(rocks, 2 * 1000, 'Node.js');</span></span></code> </pre> <br>  La fonction <code>rocks</code> ci-dessus, retard√©e de 2 secondes, prend l'argument <code>who</code> , et l'appel √† <code>setTimeout</code> transmet la valeur "Node.js" comme tel argument <code>who</code> . <br><br>  Lors de l'ex√©cution de <code>example2.js</code> avec la commande <code>node</code> , la phrase ¬´Node.js rocks¬ª s'affiche au bout de 2 secondes. <br><br>  <b>T√¢che n ¬∞ 1</b> <br><br>  Ainsi, sur la base du mat√©riel d√©j√† √©tudi√© sur <code>setTimeout</code> , nous afficherons les 2 messages suivants apr√®s les d√©lais correspondants. <br><br><ul><li>  Le message ¬´Bonjour apr√®s 4 secondes¬ª s'affiche apr√®s 4 secondes. </li><li>  Le message ¬´Bonjour apr√®s 8 secondes¬ª s'affiche apr√®s 8 secondes. </li></ul><br>  <i>Limitation</i> <br><br>  Dans votre solution, vous pouvez d√©finir une seule fonction qui contient des fonctions int√©gr√©es.  Cela signifie que de nombreux appels <code>setTimeout</code> devront utiliser la m√™me fonction. <br><br>  <i>Solution</i> <br><br>  Voici comment je r√©soudrais ce probl√®me: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// solution1.js const theOneFunc = delay =&gt; { console.log('Hello after ' + delay + ' seconds'); }; setTimeout(theOneFunc, 4 * 1000, 4); setTimeout(theOneFunc, 8 * 1000, 8);</span></span></code> </pre> <br>  Pour moi, <code>theOneFunc</code> re√ßoit l'argument <code>delay</code> et utilise la valeur de cet argument <code>delay</code> dans le message affich√© √† l'√©cran.  Ainsi, la fonction peut afficher diff√©rents messages en fonction de la valeur de retard que nous lui communiquerons. <br><br>  Ensuite, j'ai utilis√© <code>theOneFunc</code> dans deux appels <code>setTimeout</code> , le premier appel √©tant d√©clench√© apr√®s 4 secondes et le second apr√®s 8 secondes.  Ces deux appels <code>setTimeout</code> re√ßoivent √©galement un troisi√®me argument, repr√©sentant l'argument de <code>delay</code> pour <code>theOneFunc</code> . <br><br>  En ex√©cutant le fichier <code>solution1.js</code> avec la commande node, nous afficherons les exigences de la t√¢che et le premier message appara√Ætra apr√®s 4 secondes et le second apr√®s 8 secondes. <br><br>  <b>R√©p√©tez la fonction</b> <br><br>  Mais que se passe-t-il si je vous demande d'afficher un message toutes les 4 secondes, pour une dur√©e illimit√©e? <br>  Bien s√ªr, vous pouvez <code>setTimeout</code> dans une boucle, mais l'API timer propose √©galement la fonction <code>setInterval</code> , avec laquelle vous pouvez programmer l'ex√©cution ¬´√©ternelle¬ª de toute op√©ration. <br><br>  Voici un exemple de <code>setInterval</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example3.js setInterval( () =&gt; console.log('Hello every 3 seconds'), 3000 );</span></span></code> </pre> <br>  Ce code affichera un message toutes les 3 secondes.  Si vous ex√©cutez <code>example3.js</code> avec la commande <code>node</code> , Node affichera cette commande jusqu'√† ce que vous <code>example3.js</code> la fin du processus (CTRL + C). <br><br>  <b>Annuler les minuteurs</b> <br><br>  Puisqu'une action est affect√©e lorsque la fonction de temporisation est appel√©e, cette action peut √©galement √™tre annul√©e avant son ex√©cution. <br><br>  L'appel <code>setTimeout</code> renvoie un ID de temporisateur et vous pouvez utiliser cet ID de temporisateur lors de l'appel de <code>clearTimeout</code> pour annuler le temporisateur.  Voici un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example4.js const timerId = setTimeout( () =&gt; console.log('You will not see this one!'), 0 ); clearTimeout(timerId);</span></span></code> </pre> <br>  Ce temporisateur simple devrait se d√©clencher apr√®s 0 ms (c'est-√†-dire tout de suite), mais cela ne se produira pas, car nous capturons la valeur de <code>timerId</code> et <code>timerId</code> imm√©diatement ce temporisateur en appelant <code>clearTimeout</code> . <br><br>  Lors de l'ex√©cution de <code>example4.js</code> avec la commande <code>node</code> , Node n'imprimera rien - le processus se terminera simplement imm√©diatement. <br><br>  Soit dit en passant, Node.js fournit √©galement un autre moyen de <code>setTimeout</code> avec une valeur de 0 ms.  Il y a une autre fonction dans l'API de temporisation Node.js appel√©e <code>setImmediate</code> , et elle fait essentiellement la m√™me chose que <code>setTimeout</code> avec une valeur de 0 ms, mais dans ce cas, vous pouvez omettre le d√©lai: <br><br><pre> <code class="javascript hljs">setImmediate( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'I am equivalent to setTimeout with 0 ms'</span></span>), );</code> </pre><br>  La fonction <code>setImmediate</code> n'est <code>setImmediate</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prise en charge dans tous les navigateurs</a> .  Ne l'utilisez pas dans le code client. <br><br>  Parall√®lement √† <code>clearTimeout</code> il existe une fonction <code>clearInterval</code> qui fait de m√™me, mais avec des appels <code>setInerval</code> , et il existe √©galement un appel <code>clearImmediate</code> . <br><br>  <b>Timer Delay - une chose non garantie</b> <br><br>  Avez-vous remarqu√© que dans l'exemple pr√©c√©dent, lors de l'ex√©cution d'une op√©ration avec <code>setTimeout</code> apr√®s 0 ms, cette op√©ration ne se produit pas imm√©diatement (apr√®s <code>setTimeout</code> ), mais uniquement apr√®s que tout le code de script a √©t√© compl√®tement ex√©cut√© (y compris l'appel <code>clearTimeout</code> )? <br><br>  Permettez-moi de clarifier ce point avec un exemple.  Voici un simple appel <code>setTimeout</code> qui devrait fonctionner en une demi-seconde - mais cela ne se produit pas: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// example5.js setTimeout( () =&gt; console.log('Hello after 0.5 seconds. MAYBE!'), 500, ); for (let i = 0; i &lt; 1e10; i++) { //    }</span></span></code> </pre><br>  Imm√©diatement apr√®s avoir d√©fini la minuterie dans cet exemple, nous bloquons de mani√®re synchrone l'environnement d'ex√©cution avec une grande boucle <code>for</code> .  La valeur de <code>1e10</code> est 1 avec 10 z√©ros, donc le cycle dure 10 milliards de cycles de processeur (en principe, cela simule un processeur surcharg√©).  Le n≈ìud ne peut rien faire tant que cette boucle n'est pas termin√©e. <br><br>  Bien s√ªr, en pratique, c'est tr√®s mauvais, mais cet exemple aide √† comprendre que le d√©lai <code>setTimeout</code> n'est pas garanti, mais plut√¥t la <b>valeur minimale</b> .  Une valeur de 500 ms signifie que le retard durera au moins 500 ms.  En fait, le script mettra beaucoup plus de temps pour afficher la ligne de bienvenue √† l'√©cran.  Il devra d'abord attendre la fin du cycle de blocage. <br><br>  <b>Probl√®me des minuteries # 2</b> <br><br>  √âcrivez un script qui affichera le message ¬´Hello World¬ª une fois par seconde, mais seulement 5 fois.  Apr√®s 5 it√©rations, le script devrait afficher un message ¬´Termin√©¬ª, apr√®s quoi le processus de n≈ìud se terminera. <br><br>  <i>Limitation</i> : lors de la r√©solution de ce probl√®me, vous ne pouvez pas appeler <code>setTimeout</code> . <br><br>  <i>Astuce</i> : besoin d'un compteur. <br><br>  <i>Solution</i> <br><br>  Voici comment je r√©soudrais ce probl√®me: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> intervalId = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World'</span></span>); counter += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (counter === <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Done'</span></span>); clearInterval(intervalId); } }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br>  J'ai mis 0 comme valeur initiale de <code>counter</code> , puis appel√© <code>setInterval</code> , qui prend son identifiant. <br><br>  Une fonction diff√©r√©e affichera un message et augmentera √† chaque fois le compteur d'un.  √Ä l'int√©rieur de la fonction diff√©r√©e, nous avons une instruction if, qui v√©rifiera si 5 it√©rations ont d√©j√† pass√©.  Apr√®s 5 it√©rations, le programme affiche ¬´Termin√©¬ª et efface la valeur d'intervalle en utilisant la constante <code>intervalId</code> captur√©e.  Le d√©lai d'intervalle est de 1000 ms. <br><br>  <b>Qui appelle exactement les fonctions diff√©r√©es?</b> <br><br>  Lorsque vous utilisez le JavaScript <code>this</code> dans une fonction r√©guli√®re, comme ceci par exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whoCalledMe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Caller is'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br>  la valeur du <code>this</code> correspondra √† l' <b>appelant</b> .  Si vous d√©finissez la fonction ci-dessus dans le Node REPL, l'objet <code>global</code> l'appellera.  Si vous d√©finissez une fonction dans la console du navigateur, l'objet <code>window</code> l'appellera. <br><br>  D√©finissons une fonction comme une propri√©t√© d'un objet pour le rendre un peu plus clair: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">'42'</span></span>, whoCalledMe() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Caller is'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }; <span class="hljs-comment"><span class="hljs-comment">//     : obj.whoCallMe</span></span></code> </pre> <br>  Maintenant, lorsque nous utiliserons directement le lien vers celui-ci lors de l' <code>obj.whoCallMe</code> fonction <code>obj.whoCallMe</code> , l'objet <code>obj</code> (identifi√© par son <code>id</code> ) agira comme l'appelant: <br><br><img src="https://habrastorage.org/webt/-p/ws/xl/-pwsxloqfbioi6rnk02prkje_wg.png"><br><br>  Maintenant, la question est: qui sera l'appelant si vous passez le lien vers <code>obj.whoCallMe</code> √† <code>setTimetout</code> ? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       ?? setTimeout(obj.whoCalledMe, 0);</span></span></code> </pre> <br>  <b>Qui est l'appelant dans ce cas?</b> <br><br>  La r√©ponse sera diff√©rente selon l'endroit o√π la fonction de minuterie est ex√©cut√©e.  Dans ce cas, la d√©pendance √† l'√©gard de la personne qui appelle est tout simplement inacceptable.  Vous perdrez le contr√¥le de l'appelant, car cela d√©pendra de l'impl√©mentation du temporisateur qui dans ce cas appelle votre fonction.  Si vous testez ce code dans un Node REPL, alors l'objet <code>Timeout</code> sera l'appelant: <br><br><img src="https://habrastorage.org/webt/hx/bb/t5/hxbbt5rhcmm4l6e2hns0ph8icho.png"><br><br>  Remarque: ceci n'est important que lorsque le JavaScript de <code>this</code> utilis√© dans les fonctions normales.  Lorsque vous utilisez les fonctions fl√©ch√©es, l'appelant ne devrait pas vous d√©ranger du tout. <br><br>  <b>Probl√®me n ¬∞ 3</b> <br><br>  √âcrivez un script qui produira en continu un message ¬´Hello World¬ª avec des d√©lais variables.  Commencez avec un d√©lai d'une seconde, puis augmentez-le d'une seconde √† chaque it√©ration.  √Ä la deuxi√®me it√©ration, le d√©lai sera de 2 secondes.  Le troisi√®me - trois, et ainsi de suite. <br><br>  Incluez un retard dans le message affich√©.  Vous devriez obtenir quelque chose comme ceci: <br><br> <code>Hello World. 1 <br> Hello World. 2 <br> Hello World. 3 <br> ...</code> <br> <br>  <i>Limitations</i> : les variables ne peuvent √™tre d√©finies qu'en utilisant const.  L'utilisation de let ou var ne l'est pas. <br><br>  <i>Solution</i> <br><br>  √âtant donn√© que la dur√©e du d√©lai dans cette t√¢che est une variable, vous ne pouvez pas utiliser <code>setInterval</code> ici, mais vous pouvez configurer manuellement l'ex√©cution d'intervalle √† l'aide de <code>setTimeout</code> dans un appel r√©cursif.  La premi√®re fonction ex√©cut√©e avec <code>setTimeout</code> cr√©era le temporisateur suivant, et ainsi de suite. <br><br>  De plus, comme vous ne pouvez pas utiliser <code>let</code> / <code>var</code> , nous ne pouvons pas avoir de compteur pour incr√©menter le d√©lai pour chaque appel r√©cursif;  √† la place, vous pouvez utiliser les arguments d'une fonction r√©cursive pour effectuer un incr√©ment lors d'un appel r√©cursif. <br><br>  Voici comment r√©soudre ce probl√®me: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> greeting = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">delay</span></span></span><span class="hljs-function"> =&gt;</span></span> setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World. '</span></span> + delay); greeting(delay + <span class="hljs-number"><span class="hljs-number">1</span></span>); }, delay * <span class="hljs-number"><span class="hljs-number">1000</span></span>); greeting(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  <b>T√¢che # 4</b> <br><br>  √âcrivez un script qui affichera le message ¬´Hello World¬ª avec la m√™me structure de retard que dans la t√¢che # 3, mais cette fois en groupes de 5 messages, et le groupe aura un intervalle de retard principal.  Pour le premier groupe de 5 messages, nous s√©lectionnons le retard initial de 100 ms, pour les prochains - 200 ms, pour le troisi√®me - 300 ms et ainsi de suite. <br><br>  Voici comment ce script devrait fonctionner: <br><br><ul><li>  √Ä 100 ms, le script affiche ¬´Hello World¬ª pour la premi√®re fois, et le fait 5 fois avec un intervalle augmentant de 100 ms.  Le premier message appara√Ætra apr√®s 100 ms, le second apr√®s 200 ms, etc. </li><li>  Apr√®s les 5 premiers messages, le script devrait augmenter le retard principal de 200 ms.  Ainsi, le 6√®me message sera affich√© apr√®s 500 ms + 200 ms (700 ms), le 7√®me - 900 ms, le 8√®me message - apr√®s 1100 ms, etc. </li><li>  Apr√®s 10 messages, le script devrait augmenter l'intervalle de retard principal de 300 ms.  Le 11√®me message devrait s'afficher apr√®s 500 ms + 1000 ms + 300 ms (18000 ms).  Le 12√®me message devrait s'afficher apr√®s 2100 ms, etc. </li></ul><br>  Selon ce principe, le programme devrait fonctionner ind√©finiment. <br><br>  Incluez un retard dans le message affich√©.  Vous devriez obtenir quelque chose comme √ßa (aucun commentaire): <br><br> <code>Hello World. 100 //  100  <br> Hello World. 100 //  200  <br> Hello World. 100 //  300  <br> Hello World. 100 //  400  <br> Hello World. 100 //  500  <br> Hello World. 200 //  700  <br> Hello World. 200 //  900  <br> Hello World. 200 //  1100  <br> ...</code> <br> <br>  <i>Limitations</i> : vous ne pouvez utiliser que des appels √† <code>setInterval</code> (et non <code>setTimeout</code> ) et une seule <code>if</code> . <br><br>  <i>Solution</i> <br><br>  Puisque nous ne pouvons travailler qu'avec des appels <code>setInterval</code> , nous devons ici utiliser la r√©cursivit√© et √©galement augmenter le d√©lai du prochain appel <code>setInterval</code> .  De plus, nous avons besoin de l' <code>if</code> pour que cela ne se produise qu'apr√®s 5 appels √† cette fonction r√©cursive. <br><br>  Voici une solution possible: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lastIntervalId, counter = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> greeting = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">delay</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (counter === <span class="hljs-number"><span class="hljs-number">5</span></span>) { clearInterval(lastIntervalId); lastIntervalId = setInterval(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Hello World. '</span></span>, delay); greeting(delay + <span class="hljs-number"><span class="hljs-number">100</span></span>); }, delay); counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; } counter += <span class="hljs-number"><span class="hljs-number">1</span></span>; }; greeting(<span class="hljs-number"><span class="hljs-number">100</span></span>);</code> </pre> <br>  Merci √† tous ceux qui l'ont lu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426709/">https://habr.com/ru/post/fr426709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426699/index.html">Test Python avec pytest. Simple, rapide, efficace et √©volutif. Avant-propos et introduction</a></li>
<li><a href="../fr426701/index.html">Flutter - un nouveau regard sur le d√©veloppement multiplateforme</a></li>
<li><a href="../fr426703/index.html">Ce qui √©tait int√©ressant sur DataVizDay √† Minsk</a></li>
<li><a href="../fr426705/index.html">D√©veloppement et test de contrat intelligent Hyperledger Fabric</a></li>
<li><a href="../fr426707/index.html">Syst√®me d'approbation. Comment nous avons invent√© le v√©lo</a></li>
<li><a href="../fr426713/index.html">Intel Xeon W-3175X: 28 c≈ìurs pour la maison</a></li>
<li><a href="../fr426717/index.html">L'illusion de tromperie: une illusion d'optique visuelle bas√©e sur la r√©tro-pr√©vision</a></li>
<li><a href="../fr426719/index.html">Hackathon sur la science des donn√©es √† SIBUR: comment c'√©tait</a></li>
<li><a href="../fr426721/index.html">√âviter les √©checs pendant le d√©veloppement du produit: 10 conseils de Rookee</a></li>
<li><a href="../fr426723/index.html">Microsoft et ses partenaires esp√®rent cr√©er une capsule temporelle sur la lune</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>