<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüè´ üéº ‚û°Ô∏è Wie wir gew√∂hnliche Spieler und f√ºr DDoS oder unsere Server kaputt gemacht haben: eine praktische Anleitung ü§æüèø üõ©Ô∏è üë©‚Äçüëß‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√úber neue Projekte zu sprechen ist nat√ºrlich gut, aber nicht immer l√§uft alles so, wie wir es wollen. 

 Im Allgemeinen erinnerten sie sich an Fakap a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir gew√∂hnliche Spieler und f√ºr DDoS oder unsere Server kaputt gemacht haben: eine praktische Anleitung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/417441/">  √úber neue Projekte zu sprechen ist nat√ºrlich gut, aber nicht immer l√§uft alles so, wie wir es wollen. <br><br>  Im Allgemeinen erinnerten sie sich an Fakap aus der Vergangenheit, als die L√∂sung eines Problems neue hinzuf√ºgte, mitgerissen wurde und beschloss, ein Paar zu teilen.  Wie man unschuldige Spieler verbietet, ihre eigenen Server t√∂tet, einen Fehler in einem Buchstaben macht und jede Menge negatives Feedback von Benutzern erh√§lt - das ist alles, was wir lieben. <br><br><img src="https://habrastorage.org/webt/ug/ah/u-/ugahu-bcho92pvjvqfqy46h26fa.jpeg"><br><a name="habracut"></a><br><h2>  Verloren - ein Verbot bekommen </h2><br>  Es gab eine Zeit, in der unser Spiel War Robots aufgrund von Architekturfehlern von Betr√ºgern angegriffen wurde.  Es gab Versorgungsunternehmen, die die Versorgung der kosmischen Werte mit Gesundheit erh√∂hten, was sie praktisch unsterblich machte.  Infolgedessen haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> Aufgabe mit Betr√ºgern abgeschlossen, aber nicht sofort. <br><br>  Zun√§chst wollten wir das Problem auf technischer Ebene wunderbar l√∂sen: Blockieren Sie die M√∂glichkeit, Roboterparameter auf dem Client zu √§ndern.  Dies ist uns nicht gelungen (dann haben wir nat√ºrlich einen Weg gefunden).  Und dann war die erste funktionierende L√∂sung ein Banhammer, der Betr√ºger nach einem einfachen Schema berechnete: <br><br><ol><li>  Jeder Roboter nach dem Match wurde auf Besch√§digungen getestet. </li><li>  Wenn der vom Roboter erlittene Schaden den Wert seiner maximalen Gesundheit √ºberschritt, wurde der Spieler als Betr√ºger erkannt und sein Konto wurde gesperrt. </li></ol><br>  Die L√∂sung war eine Kr√ºcke, aber effektiv.  Probleme wegen ihm begannen etwas sp√§ter, aber zuerst m√ºssen Sie ein wenig √ºber einen anderen Fehler und die Funktionen der Entwicklung von synchronem mobilem PvP sprechen. <br><br>  Wenn Spieler eine sehr ungezogene Internetverbindung haben (was bei mobilen Spielen normal ist), k√∂nnen beim Datenaustausch zwischen dem Client und den Servern absolut magische Dinge passieren.  Kundenanfragen sind unvollst√§ndig, au√üer Betrieb oder mit gro√üer Verz√∂gerung.  Im Allgemeinen erlaubte ein Serverfehler, dass der Client bei schlechter Verbindung die Ergebnisse des Kampfes zwei- oder sogar dreimal hintereinander senden kann.  Dementsprechend k√∂nnten Spieler 2-3 mal mehr Belohnungen erhalten oder versehentlich doppelt so viele Ressourcen f√ºr Reparaturen ausgeben. <br><br>  Wir haben dieses Problem ziemlich schnell gel√∂st: Das Serverprofil hat gelernt, unn√∂tige Kampfergebnisse von einem Client zu ignorieren.  Nach erfolgreichen Tests haben wir eine neue Version ver√∂ffentlicht. <br><br>  Es war hier, was uns bedeckte. <br><br>  Jeden Tag fing ich an, eine ganze Reihe von Spielern mit einem Banhammer zu verbieten, was wir sicher vergessen haben, weil  Das Problem unzerst√∂rbarer Roboter mit unendlich viel Gesundheit geh√∂rte der Vergangenheit an.  Es stellte sich heraus, dass der Banhammer, sobald der Kunde des Spielers die Ergebnisse eines Kampfes in doppelter Menge an den Server schickte, dies so wahrnahm, dass jeder tote Roboter zweimal get√∂tet wurde - d. H.  nahm doppelt so viel Schaden wie seine Gesundheit.  Und nach jedem Kampf flogen die Spieler in Gruppen in das Verbot. <br><br>  Jeder war nat√ºrlich unban und zahlte sogar eine Entsch√§digung, aber die Situation ist mittelm√§√üig, nicht sicher positiv. <br><br><img src="https://habrastorage.org/webt/rg/le/pc/rglepcj33omwpzwitdrmijjewkk.gif"><br><br>
<h2>  So richten Sie DDoS selbst ein </h2><br>  Wir haben bereits √ºber die Entwicklung unserer Serverinfrastruktur geschrieben und uns jetzt an einen Fall dieser Zeit erinnert. <br><br>  Ende 2015 wurde das lang erwartete Feature in War Robots - Clans ver√∂ffentlicht.  Als das Update herauskam (und es war sp√§t am Abend), √∂ffneten wir den Champagner und alles w√ºrde gut werden.  Aber ich musste mich nicht lange freuen - die Server f√ºhlten sich pl√∂tzlich schlecht an.  Es stellte sich heraus, dass wir mit unseren eigenen H√§nden einen DDoS-Angriff durchgef√ºhrt haben. <br><br>  Wie?  Sehr einfach.  Der Client auf dem Bildschirm mit den Kampfergebnissen stellte zu viele Anfragen, um Informationen √ºber die Clans der Spieler zu erhalten.  Und als der Server mit "Lass mich in Ruhe, Fehler" antwortete, kehrte der Client ohne Zeit√ºberschreitung zum Server zur√ºck. <br><br>  In derselben Nacht haben wir die Flagge heruntergesp√ºlt (wir hatten noch keine Zeit, den Champagner zu schlie√üen), die vom Profilserver aus gesteuert wurde - sie hat den Betrieb der Hangar-Client-API vollst√§ndig blockiert.  F√ºr Spieler, die bereits den Clans beigetreten sind, haben wir diese Flagge aktiviert gelassen, dh, alles hat f√ºr sie funktioniert, da ihre Anzahl nicht ausreichte, um den Server zu DDoS zu machen. <br><br>  Infolgedessen haben wir begonnen, Serverantworten im Spiel korrekt zu verarbeiten und im Fehlerfall das Zeitlimit f√ºr das erneute Versuchen der Anforderung zu erh√∂hen. <br><br><h2>  Bewertung "Kostenlos" </h2><br>  Eine andere Geschichte ist, wenn eine Implementierung von schlechter Qualit√§t auf den menschlichen Faktor trifft.  Erst jetzt haben sie niemanden verboten, aber im Gegenteil, sie haben die Bewertung links und rechts verteilt.  Kurz gesagt, eines Nachts verzeichnete unsere √úberwachung (und wir √ºberwachen √ºberhaupt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alles</a> ) ein zu schnelles Wachstum der Spielerbewertungen. <br><br>  Dann stellte sich heraus, dass die theoretische Implementierung des Scorings das Duplizieren von Daten erm√∂glichte.  Aber niemand h√§tte darauf geachtet, wenn der diensthabende Administrator aufgrund eines Tippfehlers in einem Buchstaben versehentlich einen Server neu gestartet h√§tte, der nicht funktionieren sollte.  Er begann, die Spielerbewertungen zu verdoppeln. <br><br>  Ich musste dringend einen Fix freigeben und durch die Basis gehen, um alle zus√§tzlichen Punkte zu entfernen, die Zeit hatten, sich zu sammeln.  Um dies zu verhindern, haben wir auf allen Servern das alte Schema zur Berechnung von Punkten herausgeschnitten und die M√∂glichkeit eines fehlerhaften Starts von Diensten ausgeschlossen, bei denen sie nicht funktionieren sollten.  Das war nat√ºrlich von Anfang an notwendig, aber es w√§re zu langweilig. <br><br><h2>  Unbezahlbarer Preis </h2><br>  Es gab noch einen Fakap mit einem Tippfehler, aber viel ernster. <br><br>  Irgendwie haben wir an Halloween eine neue Gacha ins Leben gerufen - eine Lotterie.  Wenn jemand es nicht wei√ü, ist eine Gacha die Mechanik, um einen Gegenstand aus mehreren verschiedenen zuf√§llig zu erhalten.  In der Lotterie hatte der Spieler eine begrenzte Anzahl sichtbarer Preise mit unterschiedlichen Werten.  F√ºr jede Er√∂ffnung erhielt der Spieler 1 Preis, dieser Preis wurde aus dem Set genommen und der Er√∂ffnungspreis jedes Mal erh√∂ht.  Somit konnte der Spieler garantiert alle Preise der Lotterie kaufen, und die Gl√ºcklichen nahmen die wertvollsten Preise bei den ersten Er√∂ffnungen heraus (und erhielten sie dementsprechend sehr billig). <br><br>  Im Allgemeinen haben wir dann mit Blut ein Feature f√ºr das Ereignis abgesp√ºlt, es getestet und es ausgelegt.  Wir fangen an, wir aktualisieren Zeitpl√§ne ... Hurra!  Sie eilten herbei! .. Und gleichzeitig fallen Unmengen an Negativit√§t in der Community auf uns, dass wir angeblich unsere Spieler t√§uschen. <br><br>  Innerhalb einer halben Stunde musste die Lotterie ausgeschaltet werden.  Ja, wir haben die Spieler wirklich reingelegt.  Aber es ging nicht um Chancen oder Preise - es war in einem Brief. <br><br>  Die Lotterie-Oberfl√§che zeigt die Kosten f√ºr die aktuelle Er√∂ffnung (die jedes Mal erh√∂ht wurde), z. B. PREIS: 100 Gold.  So sah das Konzept aus (beachten Sie, dass laut Idee jede Karte auch einen zus√§tzlichen Er√∂ffnungspreis hat): <br><br><img src="https://habrastorage.org/webt/ns/a6/xv/nsa6xvnjqudlstg_m2veg5-ohxm.jpeg"><br><br>  Und so kam es zum Ende, als sich PRICE (Preis f√ºr die Teilnahme an der Lotterie) aufgrund einer Reihe von ‚ÄûVerbesserungen‚Äú pl√∂tzlich in einen PREIS (Preis) f√ºr den Designer verwandelte: <br><br><img src="https://habrastorage.org/webt/1u/s9/lh/1us9lhgsdyfunbhmvsfdfpji_d8.jpeg"><br><br>  Gleichzeitig ging aufgrund von Verwirrung vor der Ver√∂ffentlichung und schlechtem Scheck von jeder einzelnen Karte der Er√∂ffnungspreis verloren, was die Spieler insgesamt verwirrte. <br><br>  Und sie dr√ºckten reflexartig den Knopf, bis sie die ganze H√§rte verbraucht hatten.  Nun, was, der "Preis" steigt mit jedem Kauf.  Und so war es in 18 Sprachen.  Gleichzeitig hatten wir auch "Gebietsschemas" auf dem Client, so dass es m√∂glich war, auch nur einen Buchstaben √ºber einen Hotfix zu reparieren. <br><br>  Infolgedessen entfalteten sie die Situation, f√ºhrten zus√§tzliche Kontrollpunkte ein, gaben das Gold an die Spieler zur√ºck und speicherten die Gebietsschemas auf dem Server, damit nichts dergleichen wieder passieren w√ºrde. <br><br>  Es ist Zeit, den Hashtag <i># Kosyakinaprode einzuf√ºhren</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417441/">https://habr.com/ru/post/de417441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417429/index.html">Wir haben ein praktisches npm-Projekt f√ºr uns und das Team eingerichtet oder ein wenig √ºber moderne Front-End-Tools</a></li>
<li><a href="../de417431/index.html">Anti-Interview</a></li>
<li><a href="../de417435/index.html">In der Konfiguration von Aliens: Colonial Marines wurde ein Tippfehler gefunden, aufgrund dessen die Spiel-KI vier Jahre lang fehlerhaft war</a></li>
<li><a href="../de417437/index.html">Projektor gegen Flachbildschirm. Wir probieren ein Augenarztgewand an und finden heraus, warum Gr√∂√üe wichtig ist</a></li>
<li><a href="../de417439/index.html">Der Intel Core i7-8086K (Teil 1)</a></li>
<li><a href="../de417443/index.html">Organische Stoffe auf dem Mars k√∂nnten vor 40 Jahren entdeckt werden, wenn eine andere Analysemethode verwendet w√ºrde</a></li>
<li><a href="../de417445/index.html">Optimierung des Renderns einer Szene aus dem Disney-Cartoon "Moana". Teil 2</a></li>
<li><a href="../de417447/index.html">Expedition zu den mysteri√∂sen Feenkreisen in der Namibw√ºste</a></li>
<li><a href="../de417449/index.html">Jurassic World: K√∂nnen wir Dinosaurier wirklich wiederbeleben?</a></li>
<li><a href="../de417451/index.html">F√ºnf h√§ufige Fehler f√ºr Anf√§nger</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>