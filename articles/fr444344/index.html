<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¨ ü•ô üöΩ 10 √©tapes pour r√©ussir un projet Python üí∏ ü§Æ üë®üèº‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© aux outils qui permettent d'√©quiper les projets Python avec des outils de form...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>10 √©tapes pour r√©ussir un projet Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/444344/">  Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© aux outils qui permettent d'√©quiper les projets Python avec des outils de formatage de code, de test, d'int√©gration continue et d'analyse de d√©pendance.  Cela permet d'acc√©l√©rer le processus de d√©veloppement, d'am√©liorer la qualit√©, l'uniformit√© et la s√©curit√© du code.  Il est suppos√© que le lecteur de ce mat√©riel a d√©j√† une certaine exp√©rience dans le d√©veloppement de Python et un projet Python avec lequel, pendant la lecture, il exp√©rimentera.  Si vous n'avez pas un tel projet, vous pouvez apprendre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> comment pr√©parer un environnement de d√©veloppement et cr√©er un package Python.  Les exemples qui seront donn√©s ici sont pr√©par√©s en utilisant macOS et Python 3.7. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/nn/pf/ir/nnpfirpitm1blak2m4jfuludveo.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">√âtape 1. Installation de Black</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00e/346/c01/00e346c01d193e87d70225c59cd191c3.png"></div><br>  Le code du projet doit suivre les conventions de style de code.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Black</a> est un package Python qui formate automatiquement le code, apportant son apparence √† la norme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PEP 8</a> .  Black est un projet relativement nouveau, mais il a d√©j√† gagn√© plus d'un million de t√©l√©chargements.  Son utilisation est rapidement devenue un signe de bon go√ªt dans le d√©veloppement de Python.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> le manuel Black. <br><br>  En tant qu'√©diteur de code, j'utilise Atom, j'ai donc ajout√© le package <code>Python-Black</code> √† Atom.  Vous pouvez d√©couvrir comment l'installer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Apr√®s avoir install√© ce package, Atom reformatera le code apr√®s avoir enregistr√© le fichier. <br><br>  Pendant que nous parlons de Black - √©quipons cet outil de l'environnement de d√©veloppement de ceux qui travaillent avec nous sur le projet.  Par cons√©quent, tous ceux qui travaillent sur le projet utiliseront les m√™mes r√®gles de formatage de code, sinon leurs demandes d'extraction ne seront pas accept√©es. <br><br>  Ajoutez le <code>black==18.9b0</code> √† la premi√®re ligne libre trouv√©e du fichier <code>requirements_dev.txt</code> et ex√©cutez la commande <code>install -r requirements_dev.txt</code> . <br><br>  Le noir, par d√©faut, d√©finit la longueur de la ligne de code √† 88 caract√®res.  Certains guides de style, tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sphinx</a> , n√©cessitent une longueur de cha√Æne de 79 caract√®res.  Dans les param√®tres du package <code>Black-Atom</code> , vous pouvez d√©finir la longueur de ligne souhait√©e. <br><br>  Maintenant que nous avons acquis un outil qui permettra de gagner du temps sur le formatage du code, nous allons r√©fl√©chir √† la fa√ßon d'acc√©l√©rer et de simplifier l'envoi de code √† PyPI. <br><br><h2>  <font color="#3AC1EF">√âtape 2. Cr√©ation du fichier .pypirc</font> </h2><br>  Lorsque la ficelle est utilis√©e pour envoyer des assemblys d'application √† TestPyPI et PyPI, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous</a> devez saisir manuellement les informations de connexion.  Si vous n'√™tes pas familier avec la ficelle, jetez un ≈ìil √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> mat√©riau.  Nous allons maintenant automatiser ce processus. <br><br>  Twine peut fonctionner avec le fichier <code>.pypirc</code> , qui devrait se trouver dans notre r√©pertoire personnel.  Cet outil, d√©chargeant des donn√©es, prend une URL, un nom d'utilisateur et un mot de passe d'un fichier donn√©. <br><br>  Alors, cr√©ez un fichier <code>.pypirc</code> dans votre r√©pertoire personnel: <br><br><pre> <code class="python hljs">touch ~/.pypirc</code> </pre> <br>  Ajoutez-y le texte suivant: <br><br><pre> <code class="python hljs">[distutils] index-servers =   pypi   testpypi [testpypi] repository: https://test.pypi.org/legacy username = your_username password = your_pypitest_password [pypi] username = your_username password = your_pypi_password</code> </pre> <br>  Il est clair que vous devez saisir ici votre v√©ritable nom d'utilisateur et mot de passe.  V√©rifiez √©galement que ce fichier est enregistr√© dans le r√©pertoire de base et non dans le r√©pertoire de travail actuel.  Si vous souhaitez prot√©ger ce fichier des autres utilisateurs, vous pouvez, √† l'aide des outils de ligne de commande, configurer ses autorisations: <br><br><pre> <code class="python hljs">chmod <span class="hljs-number"><span class="hljs-number">600</span></span> ~/.pypirc</code> </pre> <br>  Maintenant, votre package peut √™tre charg√© dans TestPyPI √† l'aide de la commande suivante: <br><br><pre> <code class="python hljs">twine upload -r testpypi dist/*</code> </pre> <br>  Dans PyPI standard, vous pouvez charger des packages comme celui-ci: <br><br><pre> <code class="python hljs">twine upload dist/*</code> </pre> <br>  Apr√®s avoir obtenu le fichier <code>.pypirc</code> , vous n'avez plus √† saisir manuellement votre nom d'utilisateur et votre mot de passe. <br><br>  Ajoutons maintenant des outils de test √† notre environnement de d√©veloppement qui nous permettront de v√©rifier le bon fonctionnement du package que nous cr√©ons. <br><br><h2>  <font color="#3AC1EF">√âtape 3. Installez et configurez pytest</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/561/860/645/561860645caff54bbde0e568e9d319ab.jpg"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pytest</a> est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que</a> la plus populaire et la plus facile √† utiliser pour tester le code √©crit en Python.  Dans cet exemple, nous allons ajouter des tests simples au projet.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Maintenant</a> , si vous √™tes int√©ress√© par les d√©tails de pytest, un bon guide d'introduction √† cet outil. <br><br>  Ajoutez des d√©tails pytest √† <code>requirements_dev.txt</code> : <br><br><pre> <code class="python hljs">pytest==<span class="hljs-number"><span class="hljs-number">4.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Installons le package: <br><br><pre> <code class="python hljs">pip install requirements_dev.txt</code> </pre> <br>  Ex√©cutez maintenant la commande suivante, qui permettra √† pytest de trouver notre package: <br><br><pre> <code class="python hljs">pip install -e .</code> </pre> <br>  Si vous avez d√©sactiv√© votre environnement de d√©veloppement virtuel, vous devrez √† nouveau ex√©cuter les deux commandes <code>pip</code> pour ex√©cuter les tests. <br><br><h2>  <font color="#3AC1EF">√âtape 4. Cr√©ation de tests</font> </h2><br>  Ajoutez le dossier de <code>test</code> r√©pertoire racine de votre projet.  Placez-y le fichier <code>test_your_package_name.py</code> .  Mon fichier s'appelle <code>test_notebookc.py</code> .  Si le nom du fichier commence par <code>test_</code> , pytest peut d√©tecter automatiquement un tel fichier. <br><br>  J'ai ajout√© le test suivant au fichier <code>test_notebookc.py</code> , qui vise √† v√©rifier si la fonction affiche le nom correct.  Modifiez ce code afin que les noms de fichiers et de fonctions utilis√©s correspondent aux v√¥tres, d√©crivez-y vos propres tests. <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"""Tests for `notebookc` package."""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> notebookc <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> notebookc <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_convert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span>   <span class="hljs-string"><span class="hljs-string">"""Correct my_name argument prints"""</span></span>   notebookc.convert(<span class="hljs-string"><span class="hljs-string">"Jill"</span></span>)   captured = capsys.readouterr()   <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">"Jall"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> captured.out</code> </pre> <br>  Que se passe-t-il ici? <br><br>  Nous importons d'abord notre module ici.  Ensuite, nous cr√©ons une fonction dont le nom est construit selon le mod√®le <code>test_my_function_name</code> .  Cette convention de d√©nomination de fonction permet √† d'autres personnes lisant le code de votre projet de comprendre rapidement ce qui est test√© exactement dans les tests.  De plus, cela est n√©cessaire pour un package qui aide √† contr√¥ler la couverture du code avec des tests, dont nous discuterons ci-dessous. <br><br>  Apr√®s cela, nous appelons la fonction ( <code>convert</code> ), en lui passant le nom <code>Jill</code> comme argument.  Ensuite - capturez ce que la fonction affiche.  Ici, il convient de dire que la fonction en question est extr√™mement simple.  Elle prend le param√®tre <code>my_name</code> et effectue les op√©rations suivantes: <br><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">f"I'll convert a notebook for you some day, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{my_name}</span></span></span><span class="hljs-string">."</span></span>)</code> </pre> <br>  Pytest v√©rifie si <code>Jall</code> est <code>Jall</code> dans ce que la fonction g√©n√®re.  Cette ligne ne devrait pas √™tre l√†, car nous passons des fonctions <code>Jill</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> la documentation pytest o√π vous pouvez trouver des informations sur l'interception de la sortie. <br><br>  Ex√©cutez le test en tapant <code>pytest</code> √† l'invite de commande.  Ce test devrait √©chouer.  Les informations d'erreur s'affichent en rouge. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61c/cfb/1f6/61ccfb1f6cff485d9cd90f8f68f2d33c.png"></div><br>  <i><font color="#999999">Une erreur a √©t√© d√©tect√©e lors du test.</font></i> <br><br>  Il est recommand√© de v√©rifier l'exactitude des tests, en les d√©crivant afin que, dans certaines conditions, ils se terminent par une erreur.  Vous ne devez pas √©crire de tests qui ne donnent que des messages verts, sinon il se peut que les tests ne v√©rifient pas du tout ce qu'ils sont √©crits pour v√©rifier. <br><br>  Apr√®s avoir <code>Jall</code> que le test a √©chou√©, remplacez l'instruction <code>Jall</code> par <code>Jill</code> et ex√©cutez √† nouveau le test.  Maintenant, il devrait se terminer avec succ√®s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c64/d72/bf5/c64d72bf51a42f3f209c00dc46e8ee52.png"></div><br>  <i><font color="#999999">R√©ussite du test.</font></i> <br><br>  Maintenant tout va bien.  Le test vous permet de vous assurer que si quelqu'un passe une ligne √† notre fonction, cette ligne tombera dans le texte que cette fonction affiche. <br><br>  Vous pouvez √©galement √©crire un test qui v√©rifie la fonction sur la fa√ßon dont elle g√®re les donn√©es qui lui sont transmises.  √Ä savoir, s'il re√ßoit des donn√©es dont le type est diff√©rent de la cha√Æne, il doit provoquer une erreur TypeError.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> quelques bonnes choses sur les exceptions et la gestion des erreurs en Python. <br><br>  Lorsque nous avons cr√©√© le test pr√©c√©dent, nous avons √©crit du code qui conduit √† la r√©ussite du test.  C'est ce qu'on appelle le d√©veloppement pilot√© par les tests (TDD).  TDD est une approche de programmation √©prouv√©e qui vous aide √† √©crire du code qui contient moins d'erreurs que sans TDD.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici du</a> mat√©riel TDD utile. <br><br>  Maintenant, en tant qu'exercice, essayez d'√©crire un test qui v√©rifie la fonction <code>convert()</code> afin que lors du passage de quelque chose de diff√©rent de la cha√Æne, il g√©n√®re une erreur et impl√©mente les m√©canismes appropri√©s pour cette fonction.  Notez que les entiers, les listes et les dictionnaires sont convertis en cha√Ænes. <br><br>  Une fois que le package a r√©ussi les tests, nous sommes pr√™ts √† profiter du syst√®me d'int√©gration continue. <br><br><h2>  <font color="#3AC1EF">√âtape 5. Inscription au service Travis CI et sa configuration</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36c/e18/b28/36ce18b28c14dd932d4194a7eb0031e6.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Travis CI</a> est un "service Web distribu√© pour la cr√©ation et le test de logiciels".  Il a √©t√© r√©cemment achet√© par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Idera</a> .  Il existe d'autres syst√®mes d'int√©gration continue, mais Travis CI est un outil populaire, open source et bien document√©, nous allons donc l'utiliser. <br><br>  Travis CI vous permet d'int√©grer dans votre projet uniquement le code qui passe les tests et r√©pond aux normes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez en savoir plus sur Travis CI et ici sur l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">int√©gration</a> continue. <br><br>  Cr√©ez un compte sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://travis-ci.org/</a> .  Ensuite, cliquez sur le lien <code>Review and add your authorized organizations</code> sur la page de profil.  Vous serez invit√© √† entrer un mot de passe pour acc√©der √† GitHub.  Cliquez sur <code>Grant</code> dans la section <code>Organization access</code> √† l' <code>Organization access</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65e/6bd/d52/65e6bdd52e958c8335c999e971eec8ec.png"></div><br>  <i><font color="#999999">Configurer un compte Travis CI</font></i> <br><br>  J'ai d√ª synchroniser le compte pour que les informations sur <code>notebooktoall</code> et le r√©f√©rentiel <code>notebookc</code> apparaissent dans le compte.  En g√©n√©ral, pour que Travis CI fonctionne avec du code, cela prend environ une minute.  Apr√®s cela, vous devez activer le r√©f√©rentiel √† l'aide du commutateur illustr√© dans la figure suivante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/444/046/54c/44404654c3d1a95209f1418e2b3ea543.png"></div><br>  <i><font color="#999999">Activation du r√©f√©rentiel</font></i> <br><br>  Cliquez maintenant sur le bouton <code>Settings</code> .  Ici, vous devez indiquer si Travis peut cr√©er en fonction des demandes d'extraction ou des branches envoy√©es au r√©f√©rentiel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/361/1ed/b25/3611edb25ab1af3484db1d38b0eda38c.png"></div><br>  <i><font color="#999999">Configuration de la construction du projet</font></i> <br><br>  Il est maintenant temps de configurer le projet sur lequel nous travaillons, ce qui permettra √† Travis de cr√©er le projet pour chaque demande de tirage. <br><br><h2>  <font color="#3AC1EF">√âtape 6. Cr√©ation du fichier .travis.yml</font> </h2><br>  Dans le dossier racine du projet, cr√©ez un fichier <code>.travis.yml</code> avec le contenu suivant: <br><br><pre> <code class="python hljs">dist: xenial language: python python: <span class="hljs-number"><span class="hljs-number">3.7</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> install: - pip install -r requirements_dev.txt - pip install -e . script: - pytest</code> </pre> <br>  La ligne <code>dist: xenial</code> n√©cessaire pour indiquer √† Travis d'utiliser Ubuntu Xenial 16.04 pour organiser l'environnement virtuel.  Pour tester le code Python 3.7, Ubuntu Xenial est n√©cessaire, des d√©tails √† ce sujet peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  La section d' <code>install</code> vous permet d'installer des packages utilis√©s dans le d√©veloppement de projet.  Commande <code>pip install -e .</code>  effectue l'installation de notre package dans l'environnement virtuel de Travis.  Apr√®s cela, Travis, en commen√ßant pytest, pourra retrouver notre package. <br><br><h2>  <font color="#3AC1EF">√âtape 7. Test dans Travis CI</font> </h2><br>  Validez les modifications, soumettez-les √† GitHub, faites le RP.  Travis devrait commencer √† travailler en quelques secondes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15a/32a/d3f/15a32ad3f0a601e6bf89c06932efc450.png"></div><br>  <i><font color="#999999">Travis au travail</font></i> <br><br>  C'est ce que Travis fait dans la gestion du projet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4a/b80/9a6/d4ab809a68ef70b62ad28121b055fc12.png"></div><br>  <i><font color="#999999">Actions effectu√©es par Travis pendant le traitement du projet</font></i> <br><br>  Si le PR n'a pas r√©ussi - Travis le signalera.  Veuillez noter que si la demande d'extraction √©choue, vous pouvez envoyer les modifications √† la m√™me branche et Travis commencera automatiquement √† fonctionner. <br><br>  Acc√©dez √† la page de votre r√©f√©rentiel sur le site Web de Travis et regardez autour de vous.  Ici vous pouvez trouver beaucoup de choses int√©ressantes sur les assemblages.  √Ä l'avenir, vous deviendrez probablement un invit√© fr√©quent de cette page lorsque vous tenterez de comprendre la cause de l'√©chec de l'assemblage. <br><br>  Si nous supposons que tout s'est bien pass√©, si la page contient des √©tiquettes vertes, la v√©rification et l'assemblage du projet ont r√©ussi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a6/bd0/7c4/6a6bd07c4f0a9c82e87b9fd1a71b9b10.png"></div><br>  <i><font color="#999999">Assemblage du projet termin√© avec succ√®s</font></i> <br><br>  S'il n'y a pas d'√©tiquettes vertes ou rouges sur la page, ouvrez le menu <code>More options</code> et s√©lectionnez <code>Requests</code> .  Si vous voyez des messages d'erreur rouges ici, analysez-les.  Si le message d'erreur <code>Build config file is required</code> s'affiche, cela signifie que Travis ne peut pas trouver votre fichier <code>.travis.yml</code> dans le r√©f√©rentiel.  Corrigez-le et l'erreur dispara√Ætra. <br><br>  Travis envoie des e-mails aux utilisateurs dans les cas o√π l'assemblage du projet √©choue et dans les cas o√π il est possible de le corriger. <br><br>  N'oubliez pas que vous pouvez envoyer des validations pour ouvrir PR et Travis red√©marrera automatiquement le processus de construction du projet. <br><br>  Analysons maintenant notre projet pour couvrir le code avec des tests. <br><br><h2>  <font color="#3AC1EF">√âtape 8. √âvaluation de la couverture du code avec des tests</font> </h2><br>  Le rapport sur la couverture du code avec des tests vous permet de savoir quelle partie du code du projet, m√™me petite, a √©t√© test√©e.  Pour cr√©er de tels rapports, nous utiliserons le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">package pytest-cov</a> . <br><br>  Ajoutez la ligne suivante au fichier <code>requirements_dev.txt</code> : <br><br><pre> <code class="python hljs">pytest-cov==<span class="hljs-number"><span class="hljs-number">2.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br>  Ex√©cutez la commande suivante: <br><br><pre> <code class="python hljs">pytest --cov=my_project_name</code> </pre> <br>  Dans mon cas, apr√®s l' <code>pytest --cov=notebookc</code> , le rapport suivant a √©t√© affich√©. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83c/566/d29/83c566d2942cbafcedd03de799b0eacd.png"></div><br>  <i><font color="#999999">Rapport sur la couverture du code</font></i> <br><br>  Il s'est av√©r√© que tout le code du projet est fourni avec des tests.  De tels indicateurs sont tr√®s faciles √† r√©aliser si l'ensemble du projet se compose de plusieurs lignes de code. <br><br>  Parlons maintenant d'un outil qui vous permet de garder un historique public de l'√©tat du projet en termes de couverture de son code avec des tests. <br><br><h2>  <font color="#3AC1EF">√âtape 9. Utilisation de combinaisons</font> </h2><br>  Le projet Coveralls vous permet de conserver des informations historiques sur la couverture du code avec des tests. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c0/616/ecd/8c0616ecddd054d1adabf0532c75f69b.png"></div><br>  <i><font color="#999999">Combinaisons</font></i> <br><br>  Afin de profiter des capacit√©s de ce projet, vous devez vous inscrire sur le site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://coveralls.io/ en</a> utilisant les donn√©es de votre compte GitHub.  Ensuite, vous devez connecter le r√©f√©rentiel. <br><br>  Dans le fichier <code>requirements_dev.txt</code> , ajoutez la <code>coveralls==1.6.0</code> lignes <code>coveralls==1.6.0</code> .  Soit dit en passant, ce fichier √† ce stade du travail sur le projet devrait ressembler √† ceci: <br><br><pre> <code class="python hljs">pip==<span class="hljs-number"><span class="hljs-number">19.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> wheel==<span class="hljs-number"><span class="hljs-number">0.33</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> twine==<span class="hljs-number"><span class="hljs-number">1.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> pytest==<span class="hljs-number"><span class="hljs-number">4.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> pytest-cov==<span class="hljs-number"><span class="hljs-number">2.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> coveralls==<span class="hljs-number"><span class="hljs-number">1.6</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  <code>.travis.yml</code> fichier <code>.travis.yml</code> , en l'amenant sous cette forme (dans votre cas, le nom de votre projet sera ici): <br><br><pre> <code class="python hljs">dist: xenial language: python python: <span class="hljs-number"><span class="hljs-number">3.7</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> install: ‚Äî pip install -r requirements_dev.txt ‚Äî pip install -e . script: ‚Äî pytest --cov=my_package_name after_success: ‚Äî coveralls</code> </pre> <br>  Maintenant, lorsque Travis construira le projet, il installera les packages n√©cessaires, ex√©cutera les tests et cr√©era un rapport sur la couverture du code avec les tests.  Ce rapport sera ensuite envoy√© au service Coveralls. <br><br>  Validez, soumettez le code √† GitHub et regardez ce qui se passe.  Cela peut prendre quelques minutes pour que le rapport de test de couverture de code entre dans les combinaisons. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/19d/967/7eb19d96768a592ef21b611ab69e3509.png"></div><br>  <i><font color="#999999">Traitement de projet, rapport de couverture de test</font></i> <br><br>  Maintenant, parmi les contr√¥les PR, il y a aussi un contr√¥le effectu√© par Coveralls. <br><br>  Sur la page Combinaisons, vous pouvez v√©rifier que le projet est couvert √† 100% par des tests. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24a/f45/762/24af45762ed1b6f80a4b558ab24fcef1.png"></div><br>  <i><font color="#999999">Informations sur la couverture du test</font></i> <br><br>  √âquipons maintenant notre projet d'un autre outil utile. <br><br><h2>  <font color="#3AC1EF">√âtape 10. Travailler avec PyUp</font> </h2><br>  Le service PyUp.io permet au d√©veloppeur de savoir si les d√©pendances utilis√©es par lui sont obsol√®tes et si elles pr√©sentent des vuln√©rabilit√©s.  Ce service ex√©cute automatiquement les demandes d'extraction visant √† mettre √† jour le package sur GitHub.  Afin de profiter des capacit√©s de ce projet, vous devez vous inscrire en utilisant un compte GitHub, sur son site Web - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://pyup.io/</a> .  Lors de l'ajout d'un r√©f√©rentiel, il est recommand√© de d√©finir les <code>Update Schedules</code> √† <code>Update Schedules</code> sur <code>every week</code> .  Avec cette approche, si votre projet comporte de nombreuses d√©pendances, vous ne rencontrerez pas trop de demandes d'extraction. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/4d5/14f/8fe4d514fe0efef8c8c0bea40451f4d3.png"></div><br>  <i><font color="#999999">Configurer les mises √† jour</font></i> <br><br>  Voici √† quoi ressemblent les informations sur les packages, dont certaines sont obsol√®tes, sur le site Web PyUp.io. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/372/26a/e7a/37226ae7a12381601d7335b1ae935d17.png"></div><br>  <i><font color="#999999">D√©tails du paquet</font></i> <br><br>  En utilisant ce service, vous serez toujours inform√© de la date de sortie des derni√®res versions des packages que vous utilisez.  La connaissance, comme on dit, repr√©sente la moiti√© de la victoire.  Et la seconde moiti√© est, √©videmment, des pull-requests automatiques pour la mise √† jour des d√©pendances. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Dans cet article, vous avez appris √† utiliser des outils tels que Black, pytest, Travis CI, Coveralls et PyUp lors du d√©veloppement de projets Python.  Ils permettent de contr√¥ler les d√©pendances du projet, de formater et de tester le code, et de v√©rifier et de construire des projets.  Nous esp√©rons que ces outils vous seront utiles. <br><br>  <b>Chers lecteurs!</b>  Quels outils utilisez-vous lors du d√©veloppement de projets Python? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444344/">https://habr.com/ru/post/fr444344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444332/index.html">S√©curit√© de l'information et restauration: comment les managers pensent les produits informatiques</a></li>
<li><a href="../fr444336/index.html">Listes de capture Swift: quelle est la diff√©rence entre les liens faibles, forts et non poss√©d√©s?</a></li>
<li><a href="../fr444338/index.html">Encapsulation dans Python 3</a></li>
<li><a href="../fr444340/index.html">Caract√©ristiques de l'utilisation du type de donn√©es Symbol en JavaScript</a></li>
<li><a href="../fr444342/index.html">D√©veloppement d'applications JavaScript simples et modernes √† l'aide de Webpack et de technologies Web avanc√©es</a></li>
<li><a href="../fr444346/index.html">GraphQL et Golang</a></li>
<li><a href="../fr444348/index.html">En quoi les composants React fonctionnels sont-ils diff√©rents des composants bas√©s sur les classes?</a></li>
<li><a href="../fr444350/index.html">Pour une raison quelconque, MVP (produit minimum viable) ne d√©marre pas</a></li>
<li><a href="../fr444352/index.html">Kontur.Kampus: nous vous invitons √† un camp √©tudiant gratuit de d√©veloppement industriel pr√®s de Saint-P√©tersbourg</a></li>
<li><a href="../fr444356/index.html">Tutoriel React, partie 24: Le√ßon sur les seconds formulaires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>