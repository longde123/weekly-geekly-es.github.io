<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Ø üõ¢Ô∏è ü•® D√©veloppement de SDR multicanal üóìÔ∏è ü§π üìò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je vais vous parler de mon exp√©rience dans le d√©veloppement d'un r√©cepteur num√©rique multicanal √† large bande. 
 
 Depuis de nombreuses ann√©es, je tra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement de SDR multicanal</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395853/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je vais vous parler de mon exp√©rience dans le d√©veloppement d'un r√©cepteur num√©rique multicanal √† large bande. </font></font><br>
<img src="https://habrastorage.org/files/82a/606/5aa/82a6065aacd74ad8a282959eb4606d19.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis de nombreuses ann√©es, je travaille dans le domaine de la cr√©ation de moyens de capture et de traitement des signaux des radars de navigation a√©rienne et c√¥ti√®re. Il y a environ deux ans, j'ai publi√© la derni√®re version √† jour de notre carte RVAQ (Radar Video AcQuisition) et je me suis demand√© quoi faire dans la vie. Je voulais quelque chose de nouveau et d'inconnu. Le choix s'est port√© sur le domaine que je n'ai pas encore couvert - la radio num√©rique avec une entr√©e facile dans la r√©gion des micro-ondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit du premier chapitre consacr√© √† la formulation initiale du probl√®me.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par o√π commencer si vous n'avez jamais √©t√© professionnellement engag√© dans la r√©ception radio num√©rique, √† l'exception du r√©cepteur Mishutka assembl√© dans l'enfance? Bien s√ªr, avec un </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rafra√Æchissement √† la</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lecture de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polyakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et du mod√®le dans MATLAB. L'id√©e initiale √©tait de cr√©er un r√©cepteur multicanal dans la gamme 156-162 MHz pour surveiller et enregistrer toutes les conversations actives dans la bande VHF marine. Je vais √©num√©rer les propri√©t√©s souhait√©es d'un tel r√©cepteur: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. La bande de r√©ception est d'au moins 6 MHz (162-156 = 6) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. La sensibilit√© n'est pas pire que -110 dBm, sinon ils riront.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Une large plage dynamique, car lorsque vous √©coutez un navire sur le rivage en mer pendant 30 miles, quelqu'un va certainement crier √† proximit√© avec ses 25 watts. Pour les r√©cepteurs d√©cents, le niveau de blocage doit √™tre d'au moins 70 dB. Un peu en avance, je dirai qu'il s'est av√©r√© r√©aliser plus de 90 dB de blocage. Bref, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTL-SDR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'a pas r√©pondu aux attentes. Aussi √©trange que cela puisse para√Ætre, j'ai commenc√© par choisir l'ADC. √âtant donn√© que, dans la nature, il n'y a pas d'ADC correspondants (du moins en th√©orie), cela ne vaut pas la peine d'√™tre pris. Un tel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADC a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© trouv√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez maintenant choisir l'architecture du r√©cepteur. Une revue des solutions pertinentes, l'√©tude de la base de l'√©l√©ment et l'intuition ont permis de s'attarder sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le r√©cepteur √† conversion directe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il a √©galement √©t√© d√©cid√© de transf√©rer la zone d'int√©r√™t du spectre √† l'aide du d√©modulateur en quadrature √† fr√©quence nulle et de travailler dans la premi√®re zone de Nyquist afin de maximiser l'utilisation de toutes les qualit√©s du CAN s√©lectionn√©.</font></font><br>
<img src="https://habrastorage.org/files/0cf/699/f60/0cf699f608e54383a062b777b7c4a04a.jpg"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mod√®le initial d'estimation des param√®tres</font></font></b><div class="spoiler_text"><pre><code class="matlab hljs">clear all;<font></font>
k				= <span class="hljs-number"><span class="hljs-number">1.381e-23</span></span>;	<span class="hljs-comment"><span class="hljs-comment">% Joule/K 	- Boltzmann's Constant</span></span>
T0				= <span class="hljs-number"><span class="hljs-number">290</span></span>;			<span class="hljs-comment"><span class="hljs-comment">% K			- temperature</span></span>
<span class="hljs-comment"><span class="hljs-comment">% Encoding Windows-1251</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 1.     </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1010          -       </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1011          -    </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1012          -     (/.)</span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1013          -      </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1014          -      </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1015          -    </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1021, 1022    -     .</span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1031, 1032    -    </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1041, 1042    -      </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 1051, 1052    -   </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2.            </span></span><font></font>
<font></font>
		Rrf_inp_ohm			= <span class="hljs-number"><span class="hljs-number">50</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% Ohm	- 	 .</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2011  -    </span></span>
        BWrf_ekv_prf_hz   	= <span class="hljs-number"><span class="hljs-number">20.0e6</span></span>;   <span class="hljs-comment"><span class="hljs-comment">% Hz	-	    </span></span>
        Lrf_max_prf_db      =  <span class="hljs-number"><span class="hljs-number">1.0</span></span>;     <span class="hljs-comment"><span class="hljs-comment">% dB 	- 	        (insertion loss)</span></span><font></font>
        <font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2012  -    </span></span>
<span class="hljs-comment"><span class="hljs-comment">% (    Agilent MGA-71543    )</span></span>
        Grf_lna_db     	    = <span class="hljs-number"><span class="hljs-number">16.0</span></span>;     <span class="hljs-comment"><span class="hljs-comment">% dB 	- 	   </span></span>
        NFrf_lna_db         = <span class="hljs-number"><span class="hljs-number">1.0</span></span>;      <span class="hljs-comment"><span class="hljs-comment">% dB		- 	   </span></span><font></font>
        <font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2013  -      </span></span>
        BWrf_ekv_fms_hz   	=  <span class="hljs-number"><span class="hljs-number">6.0e6</span></span>;   <span class="hljs-comment"><span class="hljs-comment">% Hz	-	     </span></span>
        Lrf_max_fms_db      =  <span class="hljs-number"><span class="hljs-number">4.0</span></span>;    <span class="hljs-comment"><span class="hljs-comment">% dB 	- 	         (insertion loss)</span></span><font></font>
        <font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2014  -      </span></span>
<span class="hljs-comment"><span class="hljs-comment">% (    Agilent MGA-71543    )</span></span>
        Grf_amp_db      	=  <span class="hljs-number"><span class="hljs-number">16.0</span></span>;    <span class="hljs-comment"><span class="hljs-comment">% dB 	- 	   </span></span>
        NFrf_amp_db     	=  <span class="hljs-number"><span class="hljs-number">1.0</span></span>;     <span class="hljs-comment"><span class="hljs-comment">% dB    - 	  </span></span><font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 2015  -    </span></span>
<span class="hljs-comment"><span class="hljs-comment">% (    Analog Devices ADL5387)</span></span>
        Grf_mix_db      	=   <span class="hljs-number"><span class="hljs-number">4.5</span></span>;    	<span class="hljs-comment"><span class="hljs-comment">% dB 	- 	    </span></span>
        NFrf_mix_db     	=  <span class="hljs-number"><span class="hljs-number">15.0</span></span>;    	<span class="hljs-comment"><span class="hljs-comment">% dB    - 	   </span></span>
		IP1dBrf_mix_dbw		=  <span class="hljs-number"><span class="hljs-number">13.0</span></span> - <span class="hljs-number"><span class="hljs-number">30.0</span></span>; <span class="hljs-comment"><span class="hljs-comment">% dBW	- 	Input P1dB (IP1dB)</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 3.                </span></span>
<span class="hljs-comment"><span class="hljs-comment">% 3011	-	</span></span>
<span class="hljs-comment"><span class="hljs-comment">%    (db)</span></span><font></font>
        NFrf_sys_db = pow2db( ( db2pow(  Lrf_max_prf_db )       ) + ...                   <font></font>
                              ( db2pow( NFrf_lna_db     ) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) / ( db2pow( -Lrf_max_prf_db )) + ...<font></font>
                              ( db2pow(  Lrf_max_fms_db ) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) / ( db2pow( -Lrf_max_prf_db ) * db2pow(  Grf_lna_db )) + ...<font></font>
                              ( db2pow( NFrf_amp_db     ) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) / ( db2pow( -Lrf_max_prf_db ) * db2pow(  Grf_lna_db ) * db2pow( -Lrf_max_fms_db )) + ...<font></font>
							  ( db2pow( NFrf_mix_db     ) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) / ( db2pow( -Lrf_max_prf_db ) * db2pow(  Grf_lna_db ) * db2pow( -Lrf_max_fms_db ) * db2pow(  Grf_amp_db )) ...<font></font>
                            );<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%    (dB)</span></span><font></font>
		Grf_sys_db	= ( Grf_lna_db + Grf_amp_db + Grf_mix_db ) - ( Lrf_max_prf_db + Lrf_max_fms_db );<font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%      (Hz)</span></span><font></font>
		BWrf_sys_hz = BWrf_ekv_fms_hz;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 3012	-	Baseband LPF</span></span>
		Lbb_lpf_db		= <span class="hljs-number"><span class="hljs-number">9</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% dB			-	   Baseband LPF    (insertion loss)</span></span><font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 3013	-	Baseband  (LTC6400-14)</span></span>
		Gbb_opa_db		= <span class="hljs-number"><span class="hljs-number">0</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% dB			-	  </span></span>
		NFbb_opa_db     = <span class="hljs-number"><span class="hljs-number">0</span></span>;      <span class="hljs-comment"><span class="hljs-comment">% dB			-	  	</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%    ,      (dB)</span></span><font></font>
		Gbb_lfa_db		= Gbb_opa_db - Lbb_lpf_db;<font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%         (dB) -   . </span></span><font></font>
		NFbb_sys_db     = pow2db( ( db2pow( NFrf_sys_db         )     ) + ...                   <font></font>
                                  ( db2pow( NFbb_opa_db         ) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) / ( db2pow( Grf_sys_db )) ...<font></font>
					    		);<font></font>
							<font></font>
<span class="hljs-comment"><span class="hljs-comment">%         (dB)</span></span><font></font>
		Gbb_sys_db	    = Grf_sys_db + Gbb_lfa_db; <font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%       (Hz) -  </span></span><font></font>
		BWbb_sys_hz		= BWrf_sys_hz;<font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%         (dBW)		</span></span><font></font>
		PNbb_out_dbw	= pow2db( k * T0 * BWrf_sys_hz ) + NFbb_sys_db + Gbb_sys_db;	<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 3014	-	 </span></span>
<span class="hljs-comment"><span class="hljs-comment">% (    1  Linear Technology LTC2271)</span></span>
		FSadc_hz		= <span class="hljs-number"><span class="hljs-number">20.0e6</span></span>;	<span class="hljs-comment"><span class="hljs-comment">% Hz	-	Sampling rate		</span></span>
		SNadc_fs_db		= <span class="hljs-number"><span class="hljs-number">84</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% dB	-	SNR </span></span>
		NBadc_fs_bits	= <span class="hljs-number"><span class="hljs-number">16</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% bits 	-	Full scale bits</span></span>
		Vadc_fs_v		= <span class="hljs-number"><span class="hljs-number">2</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% V		-	Full scale voltage</span></span>
		Radc_inp_ohm	= <span class="hljs-number"><span class="hljs-number">1000</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% Ohm	-	Input ADC resistance	</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%            (dBW)			</span></span>
		PFSadc_inp_dbw	= pow2db( <span class="hljs-number"><span class="hljs-number">2.0</span></span> * (( Vadc_fs_v * <span class="hljs-number"><span class="hljs-number">0.5</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( <span class="hljs-number"><span class="hljs-number">0.5</span></span> )) ^ <span class="hljs-number"><span class="hljs-number">2</span></span> ) / Radc_inp_ohm );  <font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%      (dBW)			</span></span><font></font>
		PNadc_snr_dbw	= PFSadc_inp_dbw - SNadc_fs_db;<font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%      (dBW)</span></span>
		PNadc_qan_dbw	= PFSadc_inp_dbw - ( NBadc_fs_bits * mag2db( <span class="hljs-number"><span class="hljs-number">2</span></span> ) + mag2db( <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( <span class="hljs-number"><span class="hljs-number">6</span></span> ) / <span class="hljs-number"><span class="hljs-number">2</span></span> )); <span class="hljs-comment"><span class="hljs-comment">% adding correction factor for sinusoidal signal			</span></span><font></font>
					<font></font>
<span class="hljs-comment"><span class="hljs-comment">% 3015	-	     </span></span>
        SNfm_min_db		= <span class="hljs-number"><span class="hljs-number">12.0</span></span>;		<span class="hljs-comment"><span class="hljs-comment">% dB  		-   -       </span></span>
		BWfm_max_hz		= <span class="hljs-number"><span class="hljs-number">25.0e3</span></span>;	<span class="hljs-comment"><span class="hljs-comment">% Hz 		-    ,    		</span></span>
		BWfm_min_hz		= <span class="hljs-number"><span class="hljs-number">6.25e3</span></span>;	<span class="hljs-comment"><span class="hljs-comment">% Hz 		-      ,    </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%   (dBW)         (     )	</span></span><font></font>
		Pfm_min_dbw		= pow2db( k * T0 * BWfm_max_hz ) + NFbb_sys_db + SNfm_min_db;		<font></font>
		<font></font>
<span class="hljs-comment"><span class="hljs-comment">%         ,      (dBW)</span></span><font></font>
		Pfm_min_bb_sys_dbw 	= Pfm_min_dbw + Gbb_sys_db;		<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%     .        </span></span>
<span class="hljs-comment"><span class="hljs-comment">%        (dBW)</span></span><font></font>
		PFSmix_inp_dbw = PFSadc_inp_dbw - Gbb_lfa_db - Grf_mix_db;		<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%       ( )</span></span><font></font>
		deltaPmix_inp_lin = IP1dBrf_mix_dbw - PFSmix_inp_dbw; <font></font>
		<font></font>
</code></pre><br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant je veux des photos</font></font></b><div class="spoiler_text"><pre><code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%       </span></span>
Nfft = <span class="hljs-number"><span class="hljs-number">2</span></span> * (( FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> ) / BWfm_min_hz ); <font></font>
Nsmp = Nfft;<font></font>
<font></font>
tmp_fft_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nfft );<font></font>
tmp_acc_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nfft );<font></font>
tmp_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp );<font></font>
<font></font>
max_acc = <span class="hljs-number"><span class="hljs-number">30</span></span>;<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> acc = <span class="hljs-number"><span class="hljs-number">1</span></span>:max_acc
<span class="hljs-comment"><span class="hljs-comment">%   1 </span></span>
<span class="hljs-comment"><span class="hljs-comment">%     -      </span></span>
<span class="hljs-comment"><span class="hljs-comment">%    -       </span></span><font></font>
<font></font>
  PS1 = db2pow( Pfm_min_bb_sys_dbw );<font></font>
  WS1 = <span class="hljs-number"><span class="hljs-number">25.0e3</span></span>;<font></font>
  FS1 =  <span class="hljs-number"><span class="hljs-number">1.0e6</span></span>;<font></font>
  <font></font>
  Fstart = FS1;<font></font>
  Fstop  = Fstart + WS1 - BWfm_min_hz;<font></font>
  Pstep  = PS1 / ( WS1 / BWfm_min_hz ); <font></font>
  PS1_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp );<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f = Fstart:BWfm_min_hz:Fstop<font></font>
      phi_acc = <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span> ); <span class="hljs-comment"><span class="hljs-comment">% random phase</span></span>
      phi_stp =       <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> * ( f / ( FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> ));<font></font>
      <font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">1</span></span>:Nsmp<font></font>
          PS1_smp_buf( k ) = PS1_smp_buf( k ) + <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( Pstep ) * <span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> * phi_acc );<font></font>
          phi_acc = phi_acc + phi_stp;<font></font>
          <font></font>
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( phi_acc &gt; (  <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> ))<font></font>
              phi_acc = phi_acc - <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span>;
          <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
              <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( phi_acc &lt; ( <span class="hljs-number"><span class="hljs-number">-2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> ))<font></font>
                  phi_acc = phi_acc + <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span>;
              <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
          <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">end</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%   2 </span></span>
<span class="hljs-comment"><span class="hljs-comment">%     -       </span></span>
<span class="hljs-comment"><span class="hljs-comment">%    -       </span></span><font></font>
<font></font>
  PS2 = db2pow( PFSadc_inp_dbw - <span class="hljs-number"><span class="hljs-number">1.0</span></span> ); <span class="hljs-comment"><span class="hljs-comment">% -1 dB back off </span></span>
  WS2 = <span class="hljs-number"><span class="hljs-number">25.0e3</span></span>;<font></font>
  FS2 = <span class="hljs-number"><span class="hljs-number">-2.0e6</span></span>;<font></font>
  <font></font>
  Fstart = FS2;<font></font>
  Fstop  = Fstart + WS2 - BWfm_min_hz;<font></font>
  Pstep  = PS2; <font></font>
  PS2_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp );<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f = Fstart:BWfm_min_hz:Fstop<font></font>
      phi_acc = <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">rand</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span> ); <span class="hljs-comment"><span class="hljs-comment">% random phase</span></span>
      phi_stp =       <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> * ( f / ( FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> ));<font></font>
      <font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">1</span></span>:Nsmp<font></font>
          PS2_smp_buf( k ) = PS2_smp_buf( k ) + <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( Pstep ) * <span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> * phi_acc );<font></font>
          phi_acc = phi_acc + phi_stp;<font></font>
          <font></font>
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( phi_acc &gt; (  <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> ))<font></font>
              phi_acc = phi_acc - <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span>;
          <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
              <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( phi_acc &lt; ( <span class="hljs-number"><span class="hljs-number">-2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> ))<font></font>
                  phi_acc = phi_acc + <span class="hljs-number"><span class="hljs-number">2.0</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span>;
              <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
          <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">end</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%      </span></span><font></font>
  PN1 = db2pow( PNbb_out_dbw );<font></font>
  WN1 = BWbb_sys_hz;<font></font>
  <font></font>
  Pfull_bw = PN1 * ( FSadc_hz / WN1 );<font></font>
  <font></font>
  PN1_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( <span class="hljs-number"><span class="hljs-number">0.5</span></span> * Pfull_bw ) * <span class="hljs-built_in"><span class="hljs-built_in">complex</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">randn</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp ), <span class="hljs-built_in"><span class="hljs-built_in">randn</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp ));<font></font>
  tmp_fft_buf = fftshift( fft( PN1_smp_buf ));<font></font>
  tmp_msk_buf = <span class="hljs-built_in"><span class="hljs-built_in">zeros</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nfft );<font></font>
  tmp_msk_buf((( Nfft / <span class="hljs-number"><span class="hljs-number">2</span></span> ) - (( WN1 / FSadc_hz ) * ( Nfft / <span class="hljs-number"><span class="hljs-number">2</span></span> )) + <span class="hljs-number"><span class="hljs-number">1</span></span> ) : (( Nfft / <span class="hljs-number"><span class="hljs-number">2</span></span> ) + (( WN1 / FSadc_hz ) * ( Nfft / <span class="hljs-number"><span class="hljs-number">2</span></span> )))) = ... 
              <span class="hljs-built_in"><span class="hljs-built_in">ones</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, (( WN1 / FSadc_hz ) * Nfft ));<font></font>
  <font></font>
  tmp_fft_buf = tmp_fft_buf .* tmp_msk_buf;<font></font>
  PN1_smp_buf = ifft( fftshift( tmp_fft_buf ));<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%    </span></span><font></font>
  PN2 = db2pow( PNadc_snr_dbw ) - db2pow( PNadc_qan_dbw );<font></font>
  <span class="hljs-comment"><span class="hljs-comment">%PN2 = db2pow( PNadc_snr_dbw );</span></span><font></font>
  <font></font>
  Pfull_bw = PN2;<font></font>
  <font></font>
  PN2_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( <span class="hljs-number"><span class="hljs-number">0.5</span></span> * Pfull_bw ) * <span class="hljs-built_in"><span class="hljs-built_in">complex</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">randn</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp ), <span class="hljs-built_in"><span class="hljs-built_in">randn</span></span>( <span class="hljs-number"><span class="hljs-number">1</span></span>, Nsmp ));<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%    </span></span><font></font>
  QAN_smp_buf = PS1_smp_buf + PS2_smp_buf + PN1_smp_buf + PN2_smp_buf;<font></font>
  <font></font>
  QAN_delta = Vadc_fs_v / ( <span class="hljs-number"><span class="hljs-number">2</span></span> ^ NBadc_fs_bits );<font></font>
  <font></font>
  QAN_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>( QAN_smp_buf ./ QAN_delta ) .* QAN_delta;<font></font>
  <font></font>
  QAN_smp_buf_re = <span class="hljs-built_in"><span class="hljs-built_in">real</span></span>( QAN_smp_buf );<font></font>
  QAN_smp_buf_re( <span class="hljs-built_in"><span class="hljs-built_in">find</span></span>( QAN_smp_buf_re &gt; (  Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span> ))) =  Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span>;<font></font>
  QAN_smp_buf_re( <span class="hljs-built_in"><span class="hljs-built_in">find</span></span>( QAN_smp_buf_re &lt; ( -Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span> ))) = -Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span>;<font></font>
  <font></font>
  QAN_smp_buf_im = <span class="hljs-built_in"><span class="hljs-built_in">imag</span></span>( QAN_smp_buf );<font></font>
  QAN_smp_buf_im( <span class="hljs-built_in"><span class="hljs-built_in">find</span></span>( QAN_smp_buf_im &gt; (  Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span> ))) =  Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span>;<font></font>
  QAN_smp_buf_im( <span class="hljs-built_in"><span class="hljs-built_in">find</span></span>( QAN_smp_buf_im &lt; ( -Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span> ))) = -Vadc_fs_v / <span class="hljs-number"><span class="hljs-number">2.0</span></span>;<font></font>
  <font></font>
  QAN_smp_buf = <span class="hljs-built_in"><span class="hljs-built_in">complex</span></span>( QAN_smp_buf_re, QAN_smp_buf_im );<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">%   ADC</span></span><font></font>
<font></font>
  tmp_smp_buf = QAN_smp_buf;<font></font>
  <span class="hljs-comment"><span class="hljs-comment">%tmp_smp_buf = PS1_smp_buf + PS2_smp_buf + PN1_smp_buf + PN2_smp_buf;</span></span><font></font>
  <font></font>
  tmp_fft_buf = fft( tmp_smp_buf ) / Nfft;<font></font>
  tmp_acc_buf = tmp_acc_buf + ( tmp_fft_buf .* <span class="hljs-built_in"><span class="hljs-built_in">conj</span></span>( tmp_fft_buf ));
<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>  <font></font>
<font></font>
tmp_acc_buf = tmp_acc_buf ./ max_acc;<font></font>
<font></font>
f = <span class="hljs-built_in"><span class="hljs-built_in">linspace</span></span>(( -FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> ) + BWfm_min_hz, FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span>, Nfft );<font></font>
<font></font>
<span class="hljs-built_in"><span class="hljs-built_in">plot</span></span>( f, pow2db( fftshift( tmp_acc_buf ))); <font></font>
xlim( [( -FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> ), ( FSadc_hz / <span class="hljs-number"><span class="hljs-number">2</span></span> )] ); <font></font>
ylim( [<span class="hljs-number"><span class="hljs-number">-150.0</span></span>, <span class="hljs-number"><span class="hljs-number">-20.0</span></span>] ); <font></font>
title(<span class="hljs-string"><span class="hljs-string">'Power Spectrum'</span></span>)<font></font>
xlabel(<span class="hljs-string"><span class="hljs-string">'Frequency (Hz)'</span></span>)<font></font>
ylabel(<span class="hljs-string"><span class="hljs-string">'P(f) dBW'</span></span>)<font></font>
drawnow;<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, le mod√®le a montr√© la viabilit√© de l'id√©e - sensibilit√© -115dBm, blocage sous 90dB. </font></font><br>
<img src="https://habrastorage.org/files/db5/bc9/276/db5bc9276ebb45bc8007dc0fd80c132d.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, dans le FPGA, en utilisant le bloc de normalisation des signaux en quadrature, nous supprimons la composante constante, g√©rons le canal miroir et appliquons le signal √† l'entr√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Apr√®s la d√©rive de la fr√©quence d'int√©r√™t vers z√©ro, le signal ira √† une cha√Æne de </font><font style="vertical-align: inherit;">filtres </font><font style="vertical-align: inherit;">num√©riques </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CIC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , formant une bande de canaux. </font><font style="vertical-align: inherit;">Bien s√ªr, si nous voulons recevoir simultan√©ment plus d'un canal, nous devons avoir un tas de DDC et de filtres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le prochain article, si le public est int√©ress√©, je parlerai des prochaines √©tapes de la mod√©lisation et de l'√©valuation des ressources mat√©rielles FPGA.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr395853/">https://habr.com/ru/post/fr395853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr395843/index.html">Fin de la mission principale de la sonde Dawn. L'appareil reste pour toujours avec Ceres</a></li>
<li><a href="../fr395845/index.html">Promotion de cha√Æne sur Twitch. Param√®tres de base, widgets et assistants (partie 5)</a></li>
<li><a href="../fr395847/index.html">Comment embrasser l'√©norme: le syst√®me de construction .NET Micro Framework, partie 2</a></li>
<li><a href="../fr395849/index.html">L'histoire motivante de "l'Union"</a></li>
<li><a href="../fr395851/index.html">Les meilleures illusions d'optique de 2016 d√©termin√©es</a></li>
<li><a href="../fr395855/index.html">Code Morse sur les dunes martiennes</a></li>
<li><a href="../fr395857/index.html">Le projet Smog Free Tower transformera le smog de P√©kin en bijoux</a></li>
<li><a href="../fr395859/index.html">M√©canique DeltaXY pour imprimante 3D</a></li>
<li><a href="../fr395861/index.html">–ü–æ—á–µ–º—É –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —è–∑—ã–∫–æ–≤ —Ç–∞–∫ –º–∞–ª–æ —Å–ª–æ–≤ –¥–ª—è –∑–∞–ø–∞—Ö–æ–≤?</a></li>
<li><a href="../fr395863/index.html">Le myst√®re de la m√©decine: le cancer du c√¥lon, les maladies cardiaques et la d√©mence reculent, mais personne ne peut expliquer pourquoi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>