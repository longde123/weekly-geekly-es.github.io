<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•º ğŸª ğŸ‘» æŒ‡å—ï¼šèƒ¸è…º+æ˜¥å¤©ã€‚ ç¬¬ä¸€éƒ¨åˆ† ğŸ ğŸƒ ğŸ™†ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åŸå§‹æ–‡ä»¶ 

 ç¬¬äºŒéƒ¨åˆ† 
 ç¬¬ä¸‰éƒ¨åˆ† 

 ç›®å½•ï¼š 

 1. Thymeleafä¸Springé›†æˆ 
 2. SpringStandardæ–¹è¨€ 
 3.è§†å›¾å’Œè§†å›¾è§£æå™¨ 
 3.1 Spring MVCä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ 
 3.2 Thymeleafä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ 
 4.æ˜¥ç™¾é‡Œé¦™ç§å­...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æŒ‡å—ï¼šèƒ¸è…º+æ˜¥å¤©ã€‚ ç¬¬ä¸€éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435062/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŸå§‹æ–‡ä»¶</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸‰éƒ¨åˆ†</a> <br><br> ç›®å½•ï¼š <br><br>  1. Thymeleafä¸Springé›†æˆ <br>  2. SpringStandardæ–¹è¨€ <br>  3.è§†å›¾å’Œè§†å›¾è§£æå™¨ <br>  3.1 Spring MVCä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ <br>  3.2 Thymeleafä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ <br>  4.æ˜¥ç™¾é‡Œé¦™ç§å­å¯åŠ¨ç»ç† <br>  4.1æ¦‚å¿µ <br>  4.2ä¸šåŠ¡å±‚ <br>  4.3 Spring MVCé…ç½® <br>  4.4æ§åˆ¶å™¨ <br>  4.5é…ç½®è½¬æ¢æœåŠ¡ <br>  5æ˜¾ç¤ºç§å­å¯åŠ¨å™¨æ•°æ® <br>  6åˆ›å»ºè¡¨æ ¼ <br>  6.1å¤„ç†å‘½ä»¤å¯¹è±¡ <br>  6.2è¾“å…¥ <br>  6.3å¤é€‰æ¡†å­—æ®µ <br>  6.4å•é€‰æŒ‰é’®å­—æ®µ <br>  6.5ä¸‹æ‹‰/åˆ—è¡¨é€‰æ‹©å™¨ <br>  6.6åŠ¨æ€å­—æ®µ <br>  7éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯ <br>  7.1ç°åœºé”™è¯¯ <br>  7.2æ‰€æœ‰é”™è¯¯ <br>  7.3å…¨å±€é”™è¯¯ <br>  7.4åœ¨è¡¨æ ¼ä¹‹å¤–æ˜¾ç¤ºé”™è¯¯ <br>  7.5ä¸°å¯Œçš„é”™è¯¯å¯¹è±¡ <br>  8è¿™ä»ç„¶æ˜¯åŸå‹ï¼ <br>  9è½¬æ¢æœåŠ¡ <br>  9.1é…ç½® <br>  9.2åŒæ‹¬å·è¯­æ³• <br>  9.3è¡¨æ ¼ä½¿ç”¨ <br>  9.4 #conversionsè½¬æ¢å¯¹è±¡ <br> æ¨¡æ¿æ¨¡æ¿ç‰‡æ®µçš„10ä¸ªæ¸²æŸ“ç‰‡æ®µï¼ˆAJAXç­‰ï¼‰ <br>  10.1åœ¨View Beanä¸­å®šä¹‰ç‰‡æ®µ <br>  10.2åœ¨æ§åˆ¶å™¨çš„è¿”å›å€¼ä¸­å®šä¹‰ç‰‡æ®µ <br>  11ç§é«˜çº§é›†æˆåŠŸèƒ½ <br>  11.1ä¸RequestDataValueProcessoré›†æˆ <br>  11.1å»ºç«‹åˆ°æ§åˆ¶å™¨çš„URI <br>  12 Spring WebFlowé›†æˆ <br>  Spring WebFlowä¸­çš„12.2 AJAXä»£ç ç‰‡æ®µ <br><br> æœ¬æŒ‡å—è¯´æ˜äº†<b>Thymeleaf</b>å¦‚ä½•ä¸Springæ¡†æ¶é›†æˆï¼Œå°¤å…¶æ˜¯ï¼ˆä½†ä¸é™äºï¼‰Spring MVCã€‚ <br><br> è¯·æ³¨æ„ï¼ŒThymeleafå…·æœ‰é’ˆå¯¹Spring Framework 3.xå’Œ4.xåŠæ›´é«˜ç‰ˆæœ¬çš„é›†æˆï¼Œç”±ä¸¤ä¸ªåˆ†åˆ«ç§°ä¸ºthymeleaf-spring3å’Œthymeleaf-spring4çš„åº“æä¾›ã€‚ è¿™äº›åº“æ‰“åŒ…åœ¨å•ç‹¬çš„.jaræ–‡ä»¶ä¸­ï¼ˆthymeleaf-spring3- {version} .jarå’Œthymeleaf-spring4- {version} .jarï¼‰ï¼Œå¹¶ä¸”å¿…é¡»æ·»åŠ åˆ°ç±»è·¯å¾„ä¸­æ‰èƒ½åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Thymeleaf Springé›†æˆã€‚ <a name="habracut"></a><br><br> æœ¬æŒ‡å—ä¸­çš„ä»£ç ç¤ºä¾‹å’Œç¤ºä¾‹åº”ç”¨ç¨‹åºä½¿ç”¨Spring 4.xåŠå…¶å¯¹åº”çš„Thymeleafé›†æˆï¼Œä½†æ˜¯æœ¬æ–‡çš„å†…å®¹ä¹Ÿé€‚ç”¨äºSpring3.xã€‚ å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä½¿ç”¨Spring 3.xï¼Œåˆ™åªéœ€åœ¨ä»£ç ç¤ºä¾‹ä¸­å°†org.thymeleaf.spring4åŒ…æ›¿æ¢ä¸ºorg.thymeleaf.spring3ã€‚ <br><br><h2>  1. Thymeleafä¸Springé›†æˆ </h2><br>  Thymeleafæä¾›äº†ä¸€ç»„Springé›†æˆï¼Œå¯å°†å…¶ç”¨ä½œSpring MVCåº”ç”¨ç¨‹åºä¸­çš„å…¨åŠŸèƒ½JSPæ›¿ä»£å“ã€‚ <br><br> è¿™äº›é›†æˆå°†ä½¿æ‚¨èƒ½å¤Ÿï¼š <br><br><ol><li> å°±åƒä½¿ç”¨JSPä¸€æ ·ï¼Œæ˜ å°„åˆ°Thymeleaf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">æ§åˆ¶</a>çš„æ¨¡å¼çš„Spring MVC <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Controller</a>å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚ </li><li> åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨Springè¡¨è¾¾å¼è¯­è¨€ï¼ˆSpring ELï¼‰ä»£æ›¿OGNLã€‚ </li><li> åœ¨ä¸è¡¨å•æ”¯æŒç»„ä»¶å’ŒBeanå®Œå…¨é›†æˆçš„æ¨¡æ¿ä¸­åˆ›å»ºè¡¨å•ï¼ŒåŒ…æ‹¬ä½¿ç”¨å±æ€§ç¼–è¾‘å™¨ï¼Œè½¬æ¢æœåŠ¡å’ŒéªŒè¯é”™è¯¯å¤„ç†ã€‚ </li><li> æ˜¾ç¤ºç”±Springç®¡ç†çš„æ¶ˆæ¯æ–‡ä»¶ä¸­çš„å›½é™…åŒ–æ¶ˆæ¯ï¼ˆé€šè¿‡å¸¸è§„MessageSourceå¯¹è±¡ï¼‰ã€‚ </li><li> ä½¿ç”¨æœ¬æœºSpringèµ„æºè§£ææœºåˆ¶æ‰¾åˆ°æ‚¨çš„æ¨¡å¼ã€‚ </li></ol><br> è¯·æ³¨æ„ï¼Œä¸ºäº†å®Œå…¨ç†è§£æœ¬æ•™ç¨‹ï¼Œæ‚¨å¿…é¡»é¦–å…ˆé˜…è¯»â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Using Thymeleaf</a> â€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç¨‹</a> ï¼Œè¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç¨‹</a>è¯¦ç»†è§£é‡Šäº†æ ‡å‡†æ–¹è¨€ã€‚ <br><br><h2>  2. SpringStandardæ–¹è¨€ </h2><br> ä¸ºäº†å®ç°æ›´è½»æ¾ï¼Œæ›´å¥½çš„é›†æˆï¼ŒThymeleafæä¾›äº†ä¸€ç§æ–¹è¨€ï¼Œè¯¥æ–¹è¨€ä¸“é—¨å®ç°äº†æ‰€æœ‰å¿…éœ€çš„åŠŸèƒ½ä»¥æ­£ç¡®ä½¿ç”¨Springã€‚ <br><br> è¿™ä¸ªç‰¹å®šçš„æ–¹è¨€åŸºäºæ ‡å‡†çš„Thymeleafæ–¹è¨€ï¼Œå¹¶åœ¨org.thymeleaf.spring4.dialect.SpringStandardDialectç±»ä¸­å®ç°ï¼Œè¯¥ç±»å®é™…ä¸Šæ¥è‡ªorg.thymeleaf.standard.StandardDialectã€‚ <br><br> é™¤äº†æ ‡å‡†æ–¹è¨€ä¸­å·²ç»å­˜åœ¨çš„æ‰€æœ‰åŠŸèƒ½ï¼ˆå› æ­¤å·²ç»§æ‰¿ï¼‰ä¹‹å¤–ï¼ŒSpringStandardæ–¹è¨€è¿˜æä¾›ä»¥ä¸‹ç‰¹å®šåŠŸèƒ½ï¼š <br><br><ol><li> ä½¿ç”¨Spring Expression Languageï¼ˆSpring ELæˆ–SpELï¼‰ä½œä¸ºå˜é‡è¡¨è¾¾è¯­è¨€ï¼Œè€Œä¸æ˜¯OGNLã€‚ å› æ­¤ï¼Œæ‰€æœ‰<b>$ {...}</b>å’Œ<b>* {...}</b>è¡¨è¾¾å¼å°†ç”±Springè¡¨è¾¾å¼è¯­è¨€å¼•æ“æ±‚å€¼ã€‚ è¿˜è¦æ³¨æ„ï¼ŒSpring ELç¼–è¯‘å™¨æ”¯æŒï¼ˆSpring 4.2.4+ï¼‰å¯ç”¨ã€‚ </li><li> ä½¿ç”¨SpringELè¯­æ³•è®¿é—®åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­çš„ä»»ä½•ç»„ä»¶ï¼š <b>$ {@ myBean.doSomethingï¼ˆï¼‰}</b> </li><li> ç”¨äºå¤„ç†è¡¨å•çš„æ–°å±æ€§ï¼š <b>thï¼šfield</b> ï¼Œ <b>thï¼šerrors</b>å’Œ<b>thï¼šerrorclass</b> ï¼Œé™¤äº†æ–°çš„<b>thï¼šå¯¹è±¡</b>å®ç°ä¹‹å¤–ï¼Œè¯¥å®ç°å…è®¸æ‚¨ä½¿ç”¨å®ƒæ¥é€‰æ‹©formå‘½ä»¤ã€‚ </li><li> å¯¹è±¡å’Œè¡¨è¾¾å¼æ–¹æ³•<b>ï¼ƒthemes.codeï¼ˆ...ï¼‰</b> ï¼Œç­‰æ•ˆäºJSP <b>springï¼štheme</b>è‡ªå®šä¹‰æ ‡è®°ã€‚ </li><li> å¯¹è±¡å’Œè¡¨è¾¾å¼æ–¹æ³•<b>ï¼ƒmvc.uriï¼ˆ...ï¼‰</b>ç­‰æ•ˆäºJSP <b>spring</b>è‡ªå®šä¹‰å‡½æ•°<b>ï¼šmvcUrlï¼ˆ...ï¼‰</b> ï¼ˆä»…åœ¨Spring 4.1+ä¸­ï¼‰ã€‚ </li></ol><br> è¯·æ³¨æ„ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸åº”åœ¨å¸¸è§„TemplateEngineå¯¹è±¡ä¸­ç›´æ¥ä½¿ç”¨æ­¤æ–¹è¨€ä½œä¸ºå…¶é…ç½®çš„ä¸€éƒ¨åˆ†ã€‚ å¦‚æœæ‚¨å¯¹Springæ²¡æœ‰ç‰¹æ®Šçš„é›†æˆéœ€æ±‚ï¼Œåˆ™åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°æ¨¡æ¿ç±»çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹å°†è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰å¿…è¦çš„é…ç½®æ­¥éª¤ï¼š <b>org.thymeleaf.spring4.SpringTemplateEngine</b> ã€‚ <br><br>  Beané…ç½®ç¤ºä¾‹ï¼š <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> SpringResourceTemplateResolver </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">templateResolver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// SpringResourceTemplateResolver automatically integrates with Spring's own // resource resolution infrastructure, which is highly recommended. SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver(); templateResolver.setApplicationContext(this.applicationContext); templateResolver.setPrefix("/WEB-INF/templates/"); templateResolver.setSuffix(".html"); // HTML is the default value, added here for the sake of clarity. templateResolver.setTemplateMode(TemplateMode.HTML); // Template cache is true by default. Set to false if you want // templates to be automatically updated when modified. templateResolver.setCacheable(true); return templateResolver; } @Bean public SpringTemplateEngine templateEngine(){ // SpringTemplateEngine automatically applies SpringStandardDialect and // enables Spring's own MessageSource message resolution mechanisms. SpringTemplateEngine templateEngine = new SpringTemplateEngine(); templateEngine.setTemplateResolver(templateResolver()); // Enabling the SpringEL compiler with Spring 4.2.4 or newer can // speed up execution in most scenarios, but might be incompatible // with specific cases when expressions in one template are reused // across different data types, so this flag is "false" by default // for safer backwards compatibility. templateEngine.setEnableSpringELCompiler(true); return templateEngine; }</span></span></code> </pre> <br> æˆ–ä½¿ç”¨åŸºäºXMLçš„Springé…ç½®ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- SpringResourceTemplateResolver automatically integrates with Spring's own --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- resource resolution infrastructure, which is highly recommended. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateResolver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.thymeleaf.spring4.templateresolver.SpringResourceTemplateResolver"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prefix"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/WEB-INF/templates/"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"suffix"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".html"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- HTML is the default value, added here for the sake of clarity. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateMode"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HTML"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Template cache is true by default. Set to false if you want --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- templates to be automatically updated when modified. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cacheable"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- SpringTemplateEngine automatically applies SpringStandardDialect and --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- enables Spring's own MessageSource message resolution mechanisms. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateEngine"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.thymeleaf.spring4.SpringTemplateEngine"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateResolver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateResolver"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Enabling the SpringEL compiler with Spring 4.2.4 or newer can speed up --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- execution in most scenarios, but might be incompatible with specific --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- cases when expressions in one template are reused across different data --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ypes, so this flag is "false" by default for safer backwards --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- compatibility. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enableSpringELCompiler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h2>  3.è§†å›¾å’Œè§†å›¾è§£æå™¨ </h2><br><h3>  3.1 Spring MVCä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ </h3><br><br>  Spring MVCå…·æœ‰ä¸¤ä¸ªä¸å…¶æ¨¡æ¿ç³»ç»Ÿæ ¸å¿ƒç›¸å¯¹åº”çš„æ¥å£ï¼š <br><br><ul><li>  org.springframework.web.servlet.View </li><li>  org.springframework.web.servlet.ViewResolver </li></ul><br> åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­<b>æŸ¥çœ‹</b>æ¨¡å‹é¡µé¢ï¼Œå¹¶å…è®¸æ‚¨é€šè¿‡å°†å…¶å®šä¹‰ä¸ºbeanç»„ä»¶æ¥æ›´æ”¹å’Œç¡®å®šå…¶è¡Œä¸ºã€‚ è§†å›¾é€šå¸¸è´Ÿè´£æ¸²æŸ“å®é™…çš„HTMLæ¥å£ï¼Œä»¥æ‰§è¡ŒæŸç§æ¨¡æ¿å¼•æ“ï¼Œä¾‹å¦‚Thymeleafã€‚ <br><br>  <b>ViewResolvers</b>æ˜¯è´Ÿè´£è·å–ç‰¹å®šæ“ä½œå’Œè¯­è¨€ç¯å¢ƒçš„<b>View</b>å¯¹è±¡çš„å¯¹è±¡ã€‚ é€šå¸¸ï¼Œæ§åˆ¶å™¨è¦æ±‚ViewResolversç”¨ç‰¹å®šåç§°ï¼ˆç”±controlleræ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ï¼‰è½¬å‘è§†å›¾ï¼Œç„¶ååœ¨åº”ç”¨ç¨‹åºä¸­è§£æè§†å›¾çš„æ‰€æœ‰æ–¹æ³•éƒ½æŒ‰æœ‰åºé“¾æ‰§è¡Œï¼Œç›´åˆ°å…¶ä¸­ä¸€ç§å¯ä»¥è§£æè¯¥è§†å›¾ä¸ºæ­¢ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è¿”å›Viewå¯¹è±¡å¹¶å°†æ§åˆ¶æƒè½¬ç§»ç»™è¯¥è§†å›¾å¯¹è±¡ç”¨äºå‘ˆç°HTMLã€‚ <br><br>  <i>è¯·æ³¨æ„ï¼Œå¹¶éåº”å°†åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½å®šä¹‰ä¸ºè§†å›¾ï¼Œè€Œåº”å°†é‚£äº›æˆ‘ä»¬å¸Œæœ›å…¶è¡Œä¸ºä¸ºéæ ‡å‡†æˆ–ä»¥ç‰¹æ®Šæ–¹å¼è‡ªå®šä¹‰ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å°†æŸäº›ç‰¹æ®Šç»„ä»¶è¿æ¥åˆ°ï¼‰çš„é¡µé¢å®šä¹‰ä¸ºè§†å›¾ã€‚</i>  <i>å¦‚æœä¸ºæ²¡æœ‰å¯¹åº”beançš„è§†å›¾è¯·æ±‚<b>ViewResolver</b> ï¼ˆè¿™æ˜¯å¸¸è§çš„æƒ…å†µï¼‰ï¼Œ <b>åˆ™ä¸´æ—¶</b>åˆ›å»ºä¸€ä¸ªæ–°Viewå¹¶è¿”å›ã€‚</i> <br><br> è¿‡å»ï¼ŒSpring MVCåº”ç”¨ç¨‹åºä¸­çš„å…¸å‹<b>JSP + JSTL ViewResolveré…ç½®</b>å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewClass"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.springframework.web.servlet.view.JstlView"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prefix"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/WEB-INF/jsps/"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"suffix"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".jsp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"order"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewNames"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*jsp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å¿«é€Ÿæµè§ˆä¸€ä¸‹å…¶å±æ€§å°±è¶³ä»¥äº†è§£å…¶é…ç½®æ–¹å¼ï¼š <br><br><ol><li>  <b>viewClass</b>è®¾ç½®Viewå®ä¾‹çš„ç±»ã€‚ å¯¹äºJSPè¯†åˆ«å™¨æ¥è¯´ï¼Œè¿™æ˜¯å¿…éœ€çš„ï¼Œä½†ä¸Thymeleafä¸€èµ·å·¥ä½œæ—¶æ ¹æœ¬ä¸éœ€è¦ã€‚ </li><li>  <b>å‰ç¼€</b>å’Œ<b>åç¼€çš„</b>ä½œç”¨ç±»ä¼¼äºThymeleaf TemplateResolverå¯¹è±¡ä¸­å…·æœ‰ç›¸åŒåç§°çš„å±æ€§ã€‚ </li><li>  <b>order</b>è®¾ç½®é“¾ä¸­è¯·æ±‚ViewResolverçš„é¡ºåºã€‚ </li><li>  <b>viewNames</b>å…è®¸<b>æ‚¨</b> ï¼ˆä½¿ç”¨é€šé…ç¬¦ï¼‰å®šä¹‰æ­¤ViewResolverå°†è§£æçš„è§†å›¾çš„åç§°ã€‚ </li></ol><br><h3>  3.2 Thymeleafä¸­çš„è§†å›¾å’Œè§†å›¾è§£æå™¨ </h3><br>  Thymeleafæä¾›äº†ä¸Šè¿°ä¸¤ä¸ªæ¥å£çš„å®ç°ï¼š <br><br><ol><li>  org.thymeleaf.spring4.view.ThymeleafView </li><li>  org.thymeleaf.spring4.view.ThymeleafViewResolver </li></ol><br> ç”±äºæ§åˆ¶å™¨çš„æ‰§è¡Œï¼Œè¿™ä¸¤ä¸ªç±»å°†è´Ÿè´£å¤„ç†Thymeleafæ¨¡æ¿ã€‚ <br><br>  Resolver Thymeleafè§†å›¾çš„é…ç½®ä¸JSPéå¸¸ç›¸ä¼¼ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ThymeleafViewResolver </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewResolver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ ThymeleafViewResolver viewResolver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ThymeleafViewResolver(); viewResolver.setTemplateEngine(templateEngine()); <span class="hljs-comment"><span class="hljs-comment">// NOTE 'order' and 'viewNames' are optional viewResolver.setOrder(1); viewResolver.setViewNames(new String[] {".html", ".xhtml"}); return viewResolver; }</span></span></code> </pre><br>  ...æˆ–XMLï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.thymeleaf.spring4.view.ThymeleafViewResolver"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateEngine"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"templateEngine"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- NOTE 'order' and 'viewNames' are optional --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"order"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewNames"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*.html,*.xhtml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> å½“ç„¶ï¼Œ <b>templateEngine</b>å‚æ•°æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€ç« ä¸­å®šä¹‰çš„SpringTemplateEngineå¯¹è±¡ã€‚ å…¶ä»–ä¸¤ä¸ªï¼ˆ <b>order</b>å’Œ<b>viewNames</b> ï¼‰æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”ä¸æˆ‘ä»¬åœ¨å‰é¢çœ‹åˆ°çš„JSP ViewResolverä¸­çš„å«ä¹‰ç›¸åŒã€‚ <br><br> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å‰ç¼€æˆ–åç¼€å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬å·²åœ¨æ¨¡æ¿è§£æå™¨ä¸­æŒ‡å®šï¼ˆåè¿‡æ¥åˆä¼ é€’ç»™æ¨¡æ¿å¼•æ“ï¼‰ã€‚ <br><br> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ª<b>View bean</b>å¹¶å‘å…¶ä¸­<b>æ·»åŠ ä¸€äº›é™æ€å˜é‡ï¼Œè¯¥</b>æ€ä¹ˆåŠï¼Ÿ ç®€å•ï¼Œåªéœ€ä¸ºå…¶å®šä¹‰ä¸€ä¸ªåŸå‹ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-meta"><span class="hljs-meta">@Scope</span></span>(<span class="hljs-string"><span class="hljs-string">"prototype"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ThymeleafView </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mainView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ThymeleafView view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ThymeleafView(<span class="hljs-string"><span class="hljs-string">"main"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// templateName = 'main' view.setStaticVariables( Collections.singletonMap("footer", "The ACME Fruit Company")); return view; }</span></span></code> </pre><br> å®Œæˆæ­¤æ“ä½œåï¼Œæ‚¨å¯ä»¥é€šè¿‡æŒ‰åç§°é€‰æ‹©è¯¥ç»„ä»¶ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºmainViewï¼‰ã€‚ <br><br><h2>  4.æ˜¥ç™¾é‡Œé¦™ç§å­å¯åŠ¨ç»ç† </h2><br> å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub Spring Seyme Seed Starter Manager</a>å­˜å‚¨åº“ä¸­æ‰¾åˆ°æœ¬æŒ‡å—æœ¬ç« åŠåç»­å„ç« ä¸­æ˜¾ç¤ºçš„ç¤ºä¾‹çš„æºä»£ç ã€‚ <br><br><h3>  4.1æ¦‚å¿µ </h3><br> å…³äºThymeleafï¼Œæˆ‘ä»¬æ˜¯ç™¾é‡Œé¦™çš„å¿ å®æ‹¥æŠ¤è€…ï¼Œæ¯å¹´æ˜¥å¤©ï¼Œæˆ‘ä»¬éƒ½ä¼šå‡†å¤‡å¥½åœŸå£¤å’Œæœ€å–œæ¬¢çš„ç§å­çš„å…¥é—¨å¥—ä»¶ï¼Œå°†å®ƒä»¬ç§æ¤åœ¨è¥¿ç­ç‰™çš„é˜³å…‰ä¸‹ï¼Œè€å¿ƒåœ°ç­‰å¾…æˆ‘ä»¬çš„æ–°æ¤ç‰©ç”Ÿé•¿ã€‚ <br><br> ä½†æ˜¯ä»Šå¹´ï¼Œæˆ‘ä»¬å·²ç»åŒå€¦äº†åœ¨èµ·å§‹ç§å­å®¹å™¨ä¸Šç²˜è´´æ ‡ç­¾ä»¥æ‰¾å‡ºå®¹å™¨ä¸­æ¯ä¸ªå•å…ƒæ ¼ä¸­åŒ…å«å“ªäº›ç§å­çš„<b>éº»çƒ¦</b> ï¼Œå› æ­¤æˆ‘ä»¬å†³å®šä½¿ç”¨Spring MVCå’Œ<b>Thymeleaf</b>ç¼–å†™åº”ç”¨ç¨‹åºä»¥å¸®åŠ©æˆ‘ä»¬å¯¹èµ·å§‹ç¨‹åºè¿›è¡Œåˆ†ç±»ï¼š <b>Spring Thyme SeedStarter Manager</b> ã€‚ <br><br><img src="https://habrastorage.org/webt/xe/xe/m6/xexem61tgas8p-2pblf_zstfsue.png"><br><br> ä¸æˆ‘ä»¬åœ¨ä½¿ç”¨Thymeleafæ•™ç¨‹ä¸­å¼€å‘çš„Good Thymesè™šæ‹Ÿæ‚è´§åº”ç”¨ç¨‹åºç±»ä¼¼ï¼ŒSTSMå…è®¸æˆ‘ä»¬æ¼”ç¤ºå°†Thymeleafé›†æˆä¸ºSpring MVCçš„æ¨¡æ¿å¼•æ“çš„æœ€é‡è¦æ–¹é¢ã€‚ <br><br><h3>  4.2ä¸šåŠ¡å±‚ </h3><br> å¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸šåŠ¡å±‚ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ¨¡å‹å¯¹è±¡ï¼š <br><br><img src="https://habrastorage.org/webt/0f/4x/ow/0f4xowjvmahx_xru_qgj4d_zotk.png" alt="å›¾ç‰‡"><br><br> å‡ ä¸ªéå¸¸ç®€å•çš„æœåŠ¡ç±»åˆ«å°†æä¾›å¿…è¦çš„ä¸šåŠ¡æ–¹æ³•ã€‚ åƒï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SeedStarterService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SeedStarterRepository seedstarterRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;SeedStarter&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seedstarterRepository.findAll(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SeedStarter seedStarter)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seedstarterRepository.add(seedStarter); } }</code> </pre><br> å¹¶ä¸”ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VarietyService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> VarietyRepository varietyRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Variety&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.varietyRepository.findAll(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Variety </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Integer id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.varietyRepository.findById(id); } }</code> </pre><br><h3>  4.3 Spring MVCé…ç½® </h3><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºåº”ç”¨ç¨‹åº<b>é…ç½®Spring MVCé…ç½®</b> ï¼Œè¯¥<b>é…ç½®</b>ä¸ä»…åŒ…æ‹¬æ ‡å‡†Spring MVCå·¥ä»¶ï¼ˆä¾‹å¦‚å¤„ç†èµ„æºæˆ–æ‰«ææ³¨é‡Šï¼‰ï¼Œè¿˜åŒ…æ‹¬åˆ›å»º<b>Template Engine</b>å’Œ<b>View Resolverçš„</b>å®ä¾‹ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableWebMvc</span></span> <span class="hljs-meta"><span class="hljs-meta">@ComponentScan</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SpringWebConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebMvcConfigurerAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationContextAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ApplicationContext applicationContext; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpringWebConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setApplicationContext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ApplicationContext applicationContext)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> BeansException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.applicationContext = applicationContext; } <span class="hljs-comment"><span class="hljs-comment">/* ******************************************************************* */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* GENERAL CONFIGURATION ARTIFACTS */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* Static Resources, i18n Messages, Formatters (Conversion Service) */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* ******************************************************************* */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addResourceHandlers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ResourceHandlerRegistry registry)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.addResourceHandlers(registry); registry.addResourceHandler(<span class="hljs-string"><span class="hljs-string">"/images/**"</span></span>).addResourceLocations(<span class="hljs-string"><span class="hljs-string">"/images/"</span></span>); registry.addResourceHandler(<span class="hljs-string"><span class="hljs-string">"/css/**"</span></span>).addResourceLocations(<span class="hljs-string"><span class="hljs-string">"/css/"</span></span>); registry.addResourceHandler(<span class="hljs-string"><span class="hljs-string">"/js/**"</span></span>).addResourceLocations(<span class="hljs-string"><span class="hljs-string">"/js/"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ResourceBundleMessageSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">messageSource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ResourceBundleMessageSource messageSource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ResourceBundleMessageSource(); messageSource.setBasename(<span class="hljs-string"><span class="hljs-string">"Messages"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> messageSource; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFormatters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> FormatterRegistry registry)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.addFormatters(registry); registry.addFormatter(varietyFormatter()); registry.addFormatter(dateFormatter()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> VarietyFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">varietyFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VarietyFormatter(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> DateFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dateFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateFormatter(); } <span class="hljs-comment"><span class="hljs-comment">/* **************************************************************** */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* THYMELEAF-SPECIFIC ARTIFACTS */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* TemplateResolver &lt;- TemplateEngine &lt;- ViewResolver */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* **************************************************************** */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> SpringResourceTemplateResolver </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">templateResolver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// SpringResourceTemplateResolver automatically integrates with Spring's own // resource resolution infrastructure, which is highly recommended. SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver(); templateResolver.setApplicationContext(this.applicationContext); templateResolver.setPrefix("/WEB-INF/templates/"); templateResolver.setSuffix(".html"); // HTML is the default value, added here for the sake of clarity. templateResolver.setTemplateMode(TemplateMode.HTML); // Template cache is true by default. Set to false if you want // templates to be automatically updated when modified. templateResolver.setCacheable(true); return templateResolver; } @Bean public SpringTemplateEngine templateEngine(){ // SpringTemplateEngine automatically applies SpringStandardDialect and // enables Spring's own MessageSource message resolution mechanisms. SpringTemplateEngine templateEngine = new SpringTemplateEngine(); templateEngine.setTemplateResolver(templateResolver()); // Enabling the SpringEL compiler with Spring 4.2.4 or newer can // speed up execution in most scenarios, but might be incompatible // with specific cases when expressions in one template are reused // across different data types, so this flag is "false" by default // for safer backwards compatibility. templateEngine.setEnableSpringELCompiler(true); return templateEngine; } @Bean public ThymeleafViewResolver viewResolver(){ ThymeleafViewResolver viewResolver = new ThymeleafViewResolver(); viewResolver.setTemplateEngine(templateEngine()); return viewResolver; } }</span></span></code> </pre><br><h3>  4.4æ§åˆ¶å™¨ </h3><br> å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æ§åˆ¶å™¨ã€‚ ç”±äºSTSMå°†ä»…åŒ…å«ä¸€ä¸ªåŒ…å«åˆå§‹å€¼åˆ—è¡¨å’Œç”¨äºæ·»åŠ æ–°å€¼çš„è¡¨å•çš„ç½‘é¡µï¼Œå› æ­¤å¯¹äºæ‰€æœ‰æœåŠ¡å™¨äº¤äº’ï¼Œæˆ‘ä»¬å°†åªç¼–å†™ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Controller</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SeedStarterMngController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> VarietyService varietyService; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SeedStarterService seedStarterService; ... }</code> </pre><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¯ä»¥æ·»åŠ åˆ°æ­¤æ§åˆ¶å™¨ç±»çš„å†…å®¹ã€‚ <br><br>  <b>æ¨¡å‹å±æ€§</b> <br><br> é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨é¡µé¢ä¸Šæ·»åŠ ä¸€äº›æ¨¡å‹å±æ€§ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ModelAttribute</span></span>(<span class="hljs-string"><span class="hljs-string">"allTypes"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Type&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">populateTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList(Type.ALL); } <span class="hljs-meta"><span class="hljs-meta">@ModelAttribute</span></span>(<span class="hljs-string"><span class="hljs-string">"allFeatures"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Feature&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">populateFeatures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList(Feature.ALL); } <span class="hljs-meta"><span class="hljs-meta">@ModelAttribute</span></span>(<span class="hljs-string"><span class="hljs-string">"allVarieties"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Variety&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">populateVarieties</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.varietyService.findAll(); } <span class="hljs-meta"><span class="hljs-meta">@ModelAttribute</span></span>(<span class="hljs-string"><span class="hljs-string">"allSeedStarters"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;SeedStarter&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">populateSeedStarters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seedStarterService.findAll(); }</code> </pre><br>  <b>æ˜ å°„æ–¹æ³•</b> <br><br> ç°åœ¨ï¼Œæ§åˆ¶å™¨æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯æ˜ å°„çš„æ–¹æ³•ï¼šä¸€ä¸ªæ˜¾ç¤ºè¡¨å•é¡µé¢ï¼Œå¦ä¸€ä¸ªå¤„ç†æ·»åŠ æ–°çš„<b>SeedStarter</b>å¯¹è±¡ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>({<span class="hljs-string"><span class="hljs-string">"/"</span></span>,<span class="hljs-string"><span class="hljs-string">"/seedstartermng"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showSeedstarters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SeedStarter seedStarter)</span></span></span><span class="hljs-function"> </span></span>{ seedStarter.setDatePlanted(Calendar.getInstance().getTime()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"seedstartermng"</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(value=<span class="hljs-string"><span class="hljs-string">"/seedstartermng"</span></span>, params={<span class="hljs-string"><span class="hljs-string">"save"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveSeedstarter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> SeedStarter seedStarter, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> BindingResult bindingResult, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ModelMap model)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bindingResult.hasErrors()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"seedstartermng"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seedStarterService.add(seedStarter); model.clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"redirect:/seedstartermng"</span></span>; }</code> </pre><br><h3>  4.5é…ç½®è½¬æ¢æœåŠ¡ </h3><br> ä¸ºäº†åœ¨è§†å›¾å±‚ä¸­ä¸º<b>Date</b>å¯¹è±¡ä»¥åŠ<b>Variety</b>å¯¹è±¡æä¾›ç®€å•çš„æ ¼å¼è®¾ç½®ï¼Œæˆ‘ä»¬é…ç½®äº†åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿ä½¿ç”¨å‡ ä¸ªæ‰€éœ€çš„æ ¼å¼è®¾ç½®å¯¹è±¡æ¥åˆ›å»ºå’Œåˆå§‹åŒ–Spring <b>ConversionService</b>å¯¹è±¡ï¼ˆå¯æ‰©å±•<b>WebMvcConfigurerAdapter</b> ï¼‰ã€‚ <br> å†çœ‹ä¸€éï¼š <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFormatters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> FormatterRegistry registry)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.addFormatters(registry); registry.addFormatter(varietyFormatter()); registry.addFormatter(dateFormatter()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> VarietyFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">varietyFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VarietyFormatter(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> DateFormatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dateFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateFormatter(); }</code> </pre><br>  Spring <i>æ ¼å¼åŒ–ç¨‹åº</i>æ˜¯<b>org.springframework.format.Formatter</b>æ¥å£çš„<b>å®ç°</b> ã€‚ æœ‰å…³Springè½¬æ¢åŸºç¡€ç»“æ„å¦‚ä½•å·¥ä½œçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">spring.ioä¸Š</a>çš„æ–‡æ¡£ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸€ä¸ª<b>DateFormatter</b> ï¼Œå®ƒæ ¹æ®<b>Messages.properties</b>çš„<b>date.format</b>é”®ä¸­å­˜åœ¨çš„æ ¼å¼å­—ç¬¦ä¸²æ ¼å¼åŒ–æ—¥æœŸï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DateFormatter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Formatter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MessageSource messageSource; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DateFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Date </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ParseException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SimpleDateFormat dateFormat = createDateFormat(locale); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dateFormat.parse(text); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Date object, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SimpleDateFormat dateFormat = createDateFormat(locale); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dateFormat.format(object); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> SimpleDateFormat </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDateFormat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String format = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageSource.getMessage(<span class="hljs-string"><span class="hljs-string">"date.format"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, locale); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SimpleDateFormat dateFormat = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleDateFormat(format); dateFormat.setLenient(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dateFormat; } }</code> </pre><br>  <b>VarietyFormatter</b>è‡ªåŠ¨åœ¨æˆ‘ä»¬çš„<b>Variety</b>å¯¹è±¡å’Œæˆ‘ä»¬è¦åœ¨è¡¨å•ä¸­ä½¿ç”¨å®ƒä»¬çš„æ–¹å¼ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼ˆä¸»è¦æ˜¯é€šè¿‡å…¶<b>id</b>å­—æ®µçš„å€¼ï¼‰ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VarietyFormatter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Formatter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Variety</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> VarietyService varietyService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VarietyFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Variety </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ParseException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Integer varietyId = Integer.valueOf(text); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.varietyService.findById(varietyId); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Variety object, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (object != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? object.getId().toString() : <span class="hljs-string"><span class="hljs-string">""</span></span>); } }</code> </pre><br> æˆ‘ä»¬å°†è¿›ä¸€æ­¥äº†è§£è¿™äº›æ ¼å¼åŒ–å·¥å…·å¦‚ä½•å½±å“æˆ‘ä»¬å°†æ¥æ˜¾ç¤ºæ•°æ®çš„æ–¹å¼ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435062/">https://habr.com/ru/post/zh-CN435062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435044/index.html">ä¸Šå¤ï¼šè¿·ä½ ç¢Ÿç‰‡åœ¨å…¶è‡ªç„¶æ –æ¯åœ°</a></li>
<li><a href="../zh-CN435050/index.html">åœ¨ReactOSä¸Šå®‰è£….NET 4.5çš„æ•…äº‹</a></li>
<li><a href="../zh-CN435054/index.html">ITMOå¤§å­¦â€œå®è·µâ€ï¼šæˆ‘ä»¬ä¸å“ªäº›æŠ€æœ¯å…¬å¸åˆä½œ</a></li>
<li><a href="../zh-CN435056/index.html">ä¸‰æ˜ŸSSD 860 QVO 1 TBå’Œ4 TBï¼šç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…SATA QLCï¼ˆ3éƒ¨åˆ†ï¼‰</a></li>
<li><a href="../zh-CN435060/index.html">2018å¹´æ˜¯è¸æ¿è½¦ä¹‹å¹´ã€‚ æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN435064/index.html">æˆ‘ä»¬éª‘å°ç±³å¸å°˜å™¨</a></li>
<li><a href="../zh-CN435070/index.html">ä¸‰å±‚é˜²ç«å¢™MikroTikç®€ä»‹</a></li>
<li><a href="../zh-CN435072/index.html">ç”¨äºç¥ç»ç½‘ç»œçš„8ä½æ¨¡æ‹Ÿå­˜å‚¨å™¨</a></li>
<li><a href="../zh-CN435074/index.html">Kyivstarçš„æ¼æ´ï¼š1ï¼‰å…³äºå¯†ç çš„å…ˆå‰å¸–å­çš„åˆ†æ+ 2ï¼‰é€šè¿‡KyivstaræœåŠ¡ä¼ é€’çš„è´­ä¹°ä¿¡æ¯</a></li>
<li><a href="../zh-CN435076/index.html">ä¸Googleåˆä½œçš„è¥é”€äººå‘˜å¦‚ä½•é€šè¿‡æˆ‘ä»¬çš„ä¸é€‚æ„Ÿè·åˆ©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>