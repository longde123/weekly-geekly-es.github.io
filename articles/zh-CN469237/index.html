<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ğŸ½ ğŸ”± â˜¹ï¸ Androidä»£ç è½¬æ¢ ğŸ‡ ğŸ¸ ğŸšŒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- ç¬¬äºŒéƒ¨åˆ† 
 è€Œä¸æ˜¯åŠ å…¥ 


 ä¸€åˆ‡å§‹äºæˆ‘æƒ³å­¦ä¹ Gradleè®¾ç½®çš„ç²¾å¦™ä¹‹å¤„ï¼Œä»¥äº†è§£å…¶åœ¨Androidå¼€å‘ä¸­ï¼ˆç”šè‡³æ˜¯åœ¨å¼€å‘ä¸­ï¼‰çš„åŠŸèƒ½ã€‚ æˆ‘ä»ç”Ÿå‘½å‘¨æœŸå’Œä¹¦ç±å¼€å§‹ ï¼Œé€æ­¥ç¼–å†™ç®€å•çš„ä»»åŠ¡ï¼Œå°è¯•åˆ›å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªGradleæ’ä»¶ï¼ˆåœ¨buildSrcä¸­ ï¼‰ï¼Œç„¶åå¼€å§‹ã€‚ 


 ä»–å†³å®šåšä¸€äº›ä¸Androidå¼€å‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Androidä»£ç è½¬æ¢</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469237/"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a> </li></ul><br><h2 id="vmesto-vstupleniya"> è€Œä¸æ˜¯åŠ å…¥ </h2><br><p> ä¸€åˆ‡å§‹äºæˆ‘æƒ³å­¦ä¹ Gradleè®¾ç½®çš„ç²¾å¦™ä¹‹å¤„ï¼Œä»¥äº†è§£å…¶åœ¨Androidå¼€å‘ä¸­ï¼ˆç”šè‡³æ˜¯åœ¨å¼€å‘ä¸­ï¼‰çš„åŠŸèƒ½ã€‚ æˆ‘ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”Ÿå‘½å‘¨æœŸ</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¹¦ç±å¼€å§‹</a> ï¼Œé€æ­¥ç¼–å†™ç®€å•çš„ä»»åŠ¡ï¼Œå°è¯•åˆ›å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªGradleæ’ä»¶ï¼ˆåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">buildSrcä¸­</a> ï¼‰ï¼Œç„¶åå¼€å§‹ã€‚ </p><br><p> ä»–å†³å®šåšä¸€äº›ä¸Androidå¼€å‘ç°å®ä¸–ç•Œæ¥è¿‘çš„äº‹æƒ…ï¼Œä»è€Œç¼–å†™äº†ä¸€ä¸ªæ’ä»¶ï¼Œè¯¥æ’ä»¶å¯ä»¥è§£æå¸ƒå±€xmlæ ‡è®°æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸Šåˆ›å»ºå¸¦æœ‰æŒ‡å‘è§†å›¾çš„é“¾æ¥çš„Javaå¯¹è±¡ã€‚ ç„¶åï¼Œä»–æ²‰è¿·äºåº”ç”¨ç¨‹åºæ¸…å•çš„è½¬æ¢ï¼ˆè¿™æ˜¯å·¥ä½œè‰æ¡ˆä¸Šçš„å®é™…ä»»åŠ¡æ‰€å¿…éœ€çš„ï¼‰ï¼Œå› ä¸ºåœ¨è½¬æ¢ä¹‹åï¼Œæ¸…å•èŠ±è´¹äº†å¤§çº¦5kè¡Œï¼Œå¹¶ä¸”åœ¨IDEä¸­ä½¿ç”¨è¿™æ ·çš„xmlæ–‡ä»¶è¿›è¡Œæ“ä½œéå¸¸å›°éš¾ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘æƒ³å‡ºäº†å¦‚ä½•ä¸ºAndroidé¡¹ç›®ç”Ÿæˆä»£ç å’Œèµ„æºçš„æ–¹æ³•ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æµé€ï¼Œæˆ‘æƒ³è¦æ›´å¤šçš„ä¸œè¥¿ã€‚ æœ‰ä¸€ç§æƒ³æ³•è®¤ä¸ºï¼Œå°±åƒ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Groovyå¼€ç®±å³ç”¨çš„</a>é‚£æ ·ï¼Œå°†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AST</a> ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰è½¬æ¢ä¸ºç¼–è¯‘æ—¶ä¼šå¾ˆé…·ã€‚ è¿™æ ·çš„å…ƒç¼–ç¨‹æ‰“å¼€äº†è®¸å¤šå¯èƒ½æ€§ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå¹»æƒ³ã€‚ </p><br><p> ä¸ºäº†ä½¿è¯¥ç†è®ºä¸ä»…ä»…æ˜¯ä¸€ç§ç†è®ºï¼Œæˆ‘å†³å®šé€šè¿‡åˆ›å»ºå¯¹Androidå¼€å‘æœ‰ç”¨çš„ä¸œè¥¿æ¥åŠ å¼ºå¯¹è¯¥ä¸»é¢˜çš„ç ”ç©¶ã€‚ æˆ‘æƒ³åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯åœ¨é‡æ–°åˆ›å»ºç³»ç»Ÿç»„ä»¶æ—¶ä¿ç•™çŠ¶æ€ã€‚ ç²—ç•¥åœ°è®²ï¼Œå°†å˜é‡ä¿å­˜åœ¨Bundleä¸­æ˜¯å°½å¯èƒ½ç®€å•çš„ï¼Œåªéœ€æœ€å°‘çš„æ ·æ¿å³å¯ã€‚ </p><a name="habracut"></a><br><h2 id="s-chego-nachat"> ä»å“ªé‡Œå¼€å§‹ï¼Ÿ </h2><br><ol><li> é¦–å…ˆï¼Œæ‚¨éœ€è¦äº†è§£å¦‚ä½•åœ¨Androidé¡¹ç›®çš„Gradleç”Ÿå‘½å‘¨æœŸä¸­è®¿é—®æ‰€éœ€çš„æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚ </li><li> å…¶æ¬¡ï¼Œå½“æˆ‘ä»¬è·å¾—å¿…è¦çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å¦‚ä½•æ­£ç¡®è½¬æ¢å®ƒä»¬ã€‚ </li></ol><br><p> è®©æˆ‘ä»¬æŒ‰é¡ºåºå¼€å§‹ï¼š </p><br><h3 id="poluchaem-dostup-k-faylam-v-moment-kompilyacii"> åœ¨ç¼–è¯‘æ—¶è®¿é—®æ–‡ä»¶ </h3><br><p>ç”±äºæˆ‘ä»¬å°†åœ¨ç¼–è¯‘æ—¶æ¥æ”¶æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªGradleæ’ä»¶æ¥æ‹¦æˆªæ–‡ä»¶å¹¶å¤„ç†è½¬æ¢ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ’ä»¶å°½å¯èƒ½ç®€å•ã€‚ ä½†æ˜¯é¦–å…ˆï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¸¦æœ‰æ’ä»¶çš„<code>build.gradle</code>æ¨¡å—æ–‡ä»¶å¦‚ä½•ï¼š </p><br><pre> <code class="plaintext hljs">apply plugin: 'java-gradle-plugin' apply plugin: 'groovy' dependencies { implementation gradleApi() implementation 'com.android.tools.build:gradle:3.5.0' implementation 'com.android.tools.build:gradle-api:3.5.0' implementation 'org.ow2.asm:asm:7.1' }</code> </pre> <br><ol><li>  <code>apply plugin: 'java-gradle-plugin'</code>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰gradæ’ä»¶çš„æ¨¡å—ã€‚ </li><li>  <code>apply plugin: 'groovy'</code>æ­¤æ’ä»¶æ˜¯å¿…éœ€çš„ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å‡¹æ§½ä¸Šè¿›è¡Œç¼–å†™ï¼ˆè¿™æ— å…³ç´§è¦ï¼Œæ‚¨å¯ä»¥è‡³å°‘ç¼–å†™Groovyï¼Œè‡³å°‘Javaï¼Œè‡³å°‘Kotlinï¼Œæ— è®ºæ‚¨å–œæ¬¢ä»€ä¹ˆï¼‰ã€‚ æˆ‘æœ€åˆä¹ æƒ¯äºåœ¨å‡¹æ§½ä¸Šç¼–å†™æ’ä»¶ï¼Œå› ä¸ºå®ƒå…·æœ‰åŠ¨æ€ç±»å‹ï¼Œæœ‰æ—¶å®ƒå¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”å¦‚æœä¸éœ€è¦å®ƒï¼Œæ‚¨å¯ä»¥ç®€å•åœ°æ”¾ç½®<code>@TypeChecked</code>æ‰¹æ³¨ã€‚ </li><li>  <code>implementation gradleApi()</code> -è¿æ¥Gradle APIä¾èµ–é¡¹ï¼Œä»¥ä¾¿å¯ä»¥è®¿é—®<code>org.gradle.api.Plugin</code> ï¼Œ <code>org.gradle.api.Project</code>ç­‰ã€‚ </li><li> è®¿é—®androidæ’ä»¶çš„å®ä½“éœ€è¦<code>'com.android.tools.build:gradle:3.5.0'</code>å’Œ<code>'com.android.tools.build:gradle-api:3.5.0'</code> </li><li> ç”¨äºè½¬æ¢å­—èŠ‚ç çš„<code>'com.android.tools.build:gradle-api:3.5.0'</code>åº“ï¼Œæˆ‘ä»¬ç¨åå†è®¨è®ºã€‚ </li></ol><br><p> æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œè®©æˆ‘ä»¬ç»§ç»­è¿›è¡Œæ’ä»¶æœ¬èº«ï¼Œè¿™å¾ˆç®€å•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YourPlugin</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Plugin</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Project</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull Project project)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAndroidApp = project.plugins.findPlugin(<span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span>) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isAndroidLib = project.plugins.findPlugin(<span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span>) != <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">null</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(!isAndroidApp &amp;&amp; !isAndroidLib)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GradleException( <span class="hljs-string"><span class="hljs-string">"'com.android.application' or 'com.android.library' plugin required."</span></span> ) } BaseExtension androidExtension = project.extensions.findByType(BaseExtension.class) androidExtension.registerTransform(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YourTransform()) } }</code> </pre> <br><p> è®©æˆ‘ä»¬ä»<code>isAndroidApp</code>å’Œ<code>isAndroidLib</code>å¼€å§‹ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯æ£€æŸ¥è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªAndroidé¡¹ç›®/åº“ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ æ¥ä¸‹æ¥ï¼Œé€šè¿‡<code>androidExtension</code>åœ¨Androidæ’ä»¶ä¸­æ³¨å†Œ<code>androidExtension</code> ã€‚  <code>YourTransform</code>æ˜¯ä¸€ä¸ªå®ä½“ï¼Œç”¨äºè·å–å¿…è¦çš„æ–‡ä»¶é›†åŠå…¶å¯èƒ½çš„è½¬æ¢ï¼›å®ƒå¿…é¡»ç»§æ‰¿æŠ½è±¡ç±»<code>com.android.build.api.transform.Transform</code> ã€‚ </p><br><p> è®©æˆ‘ä»¬ç›´æ¥è½¬åˆ°<code>YourTransform</code> ï¼Œé¦–å…ˆè€ƒè™‘éœ€è¦é‡æ–°å®šä¹‰çš„ä¸»è¦æ–¹æ³•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YourTransform</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Transform</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> YourTransform.simpleName } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> Set&lt;QualifiedContent.ContentType&gt; getInputTypes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TransformManager.CONTENT_CLASS } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> Set&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> QualifiedContent.Scope&gt; getScopes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TransformManager.PROJECT_ONLY } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isIncremental</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> } }</code> </pre> <br><ul><li>  <code>getName</code>åœ¨è¿™é‡Œï¼Œæ‚¨éœ€è¦è¿”å›å°†ç”¨äºè½¬æ¢ä»»åŠ¡çš„åç§°ï¼Œä¾‹å¦‚ï¼Œç”¨äºè°ƒè¯•ç¨‹åºé›†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥ä»»åŠ¡å°†è¢«è¿™æ ·è°ƒç”¨ï¼š <code>transformClassesWithYourTransformForDebug</code> ã€‚ </li><li>  <code>getInputTypes</code>æŒ‡ç¤ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»å‹ï¼šç±»ï¼Œèµ„æºæˆ–ä¸¤è€…ï¼ˆè¯·å‚è§<code>com.android.build.api.transform.QualifiedContent.DefaultContentType</code> ï¼‰ã€‚ å¦‚æœæ‚¨æŒ‡å®šCLASSESï¼Œé‚£ä¹ˆå¯¹äºè½¬æ¢ï¼Œæˆ‘ä»¬å°†ä»…è·å¾—ç±»æ–‡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„ã€‚ </li><li>  <code>getScopes</code>æŒ‡ç¤ºæˆ‘ä»¬å°†è½¬æ¢çš„èŒƒå›´ï¼ˆè¯·å‚é˜…<code>com.android.build.api.transform.QualifiedContent.Scope</code> ï¼‰ã€‚ èŒƒå›´æ˜¯æ–‡ä»¶çš„èŒƒå›´ã€‚ ä¾‹å¦‚ï¼Œåœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯PROJECT_ONLYï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†ä»…è½¬æ¢ä¸é¡¹ç›®æ¨¡å—ç›¸å…³çš„é‚£äº›æ–‡ä»¶ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨è¿˜å¯ä»¥åŒ…æ‹¬å­æ¨¡å—ï¼Œåº“ç­‰ã€‚ </li><li>  <code>isIncremental</code>åœ¨è¿™é‡Œæˆ‘ä»¬å‘Šè¯‰androidæ’ä»¶æˆ‘ä»¬çš„è½¬æ¢æ˜¯å¦æ”¯æŒå¢é‡æ±‡ç¼–ï¼šå¦‚æœä¸ºtrueï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ­£ç¡®è§£ææ‰€æœ‰æ›´æ”¹ï¼Œæ·»åŠ å’Œåˆ é™¤çš„æ–‡ä»¶ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™æ‰€æœ‰æ–‡ä»¶éƒ½å°†è½¬åˆ°è½¬æ¢ï¼Œä½†æ˜¯ï¼Œå¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™ä¸ä¼šè°ƒç”¨è¯¥è½¬æ¢ã€‚ </li></ul><br><p> ä¿æŒæœ€åŸºæœ¬ï¼Œæœ€ <del> ç”œèœœçš„ </del> è½¬æ¢æ–‡ä»¶çš„è½¬æ¢æ–¹æ³•<code>transform(TransformInvocation transformInvocation)</code> ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ‰¾ä¸åˆ°å…³äºå¦‚ä½•æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•çš„ä¸€èˆ¬è§£é‡Šï¼Œæˆ‘åªæ‰¾åˆ°ä¸­æ–‡æ–‡ç« ï¼Œå¹¶æ‰¾åˆ°ä¸€äº›æ²¡æœ‰ç‰¹æ®Šè¯´æ˜çš„ç¤ºä¾‹ï¼Œ <a href="">è¿™æ˜¯</a>å…¶ä¸­çš„ä¸€ç§é€‰æ‹©ã€‚ </p><br><p> åœ¨å­¦ä¹ å¦‚ä½•ä½¿ç”¨å˜å‹å™¨æ—¶æˆ‘æ‰€äº†è§£çš„å†…å®¹ï¼š </p><br><ol><li> æ‰€æœ‰å˜å‹å™¨éƒ½ä¸é“¾æ¡è£…é…è¿‡ç¨‹æŒ‚é’©ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨ç¼–å†™çš„é€»è¾‘å°†æ˜¯ <del> æŒ¤å‹ </del> è¿›å…¥å·²ç»å»ºç«‹çš„è¿‡ç¨‹ã€‚ åœ¨æ‚¨çš„å˜å‹å™¨ä¹‹åï¼Œå¦ä¸€ä¸ªå°†å·¥ä½œï¼Œä¾æ­¤ç±»æ¨ </li><li>  <strong>éå¸¸é‡è¦ï¼š</strong>ä¾‹å¦‚ï¼Œå³ä½¿æ‚¨ä¸æ‰“ç®—è½¬æ¢ä»»ä½•æ–‡ä»¶ï¼Œä¹Ÿä¸æƒ³æ›´æ”¹å°†åˆ°è¾¾çš„jaræ–‡ä»¶ï¼Œå®ƒä»¬ä»éœ€è¦å¤åˆ¶åˆ°æ‚¨çš„è¾“å‡ºç›®å½•è€Œæ— éœ€æ›´æ”¹ã€‚ è¯¥é¡¹ç›®ä»ç¬¬ä¸€å¼€å§‹ã€‚ å¦‚æœæ‚¨ä¸å°†æ–‡ä»¶æ²¿é“¾è¿›ä¸€æ­¥ä¼ è¾“åˆ°å¦ä¸€ä¸ªè½¬æ¢å™¨ï¼Œé‚£ä¹ˆæœ€ç»ˆè¯¥æ–‡ä»¶å°†æ ¹æœ¬ä¸å­˜åœ¨ã€‚ </li></ol><br><p> è€ƒè™‘ä¸€ä¸‹transformæ–¹æ³•åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( TransformInvocation transformInvocation )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> TransformException, InterruptedException, IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.transform(transformInvocation) transformInvocation.outputProvider.deleteAll() transformInvocation.inputs.each { transformInput -&gt; transformInput.directoryInputs.each { directoryInput -&gt; File inputFile = directoryInput.getFile() File destFolder = transformInvocation.outputProvider.getContentLocation( directoryInput.getName(), directoryInput.getContentTypes(), directoryInput.getScopes(), Format.DIRECTORY ) transformDir(inputFile, destFolder) } transformInput.jarInputs.each { jarInput -&gt; File inputFile = jarInput.getFile() File destFolder = transformInvocation.outputProvider.getContentLocation( jarInput.getName(), jarInput.getContentTypes(), jarInput.getScopes(), Format.JAR ) FileUtils.copyFile(inputFile, destFolder) } } }</code> </pre> <br><p> åœ¨æˆ‘ä»¬çš„å…¥å£å¤„æ˜¯<code>TransformInvocation</code> ï¼Œå…¶ä¸­åŒ…å«ç”¨äºè¿›ä¸€æ­¥è½¬æ¢çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ¸…ç†å°†è®°å½•æ–°çš„<code>transformInvocation.outputProvider.deleteAll()</code>æ–‡ä»¶çš„ç›®å½•ï¼Œè¿™æ˜¯å®Œæˆçš„ï¼Œå› ä¸ºè½¬æ¢å™¨ä¸æ”¯æŒå¢é‡æ±‡ç¼–ï¼Œå¹¶ä¸”å¿…é¡»åœ¨è½¬æ¢ä¹‹å‰åˆ é™¤æ—§æ–‡ä»¶ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éå†æ‰€æœ‰è¾“å…¥ï¼Œå¹¶åœ¨æ¯ä¸ªè¾“å…¥ä¸­éå†ç›®å½•å’Œjaræ–‡ä»¶ã€‚ æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæ‰€æœ‰jaræ–‡ä»¶éƒ½åªæ˜¯è¢«å¤åˆ¶ä»¥è¿›ä¸€æ­¥ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè½¬æ¢å™¨ã€‚ æ­¤å¤–ï¼Œå¤åˆ¶åº”è¯¥åœ¨æ‚¨çš„è½¬æ¢å™¨<code>build/intermediates/transforms/YourTransform/...</code> å¯ä»¥ä½¿ç”¨<code>transformInvocation.outputProvider.getContentLocation</code>è·å¾—æ­£ç¡®çš„ç›®å½•ã€‚ </p><br><p> è€ƒè™‘ä¸€ç§å·²ç»æå–ç‰¹å®šæ–‡ä»¶è¿›è¡Œä¿®æ”¹çš„æ–¹æ³•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transformDir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File input, File dest)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dest.exists()) { FileUtils.forceDelete(dest) } FileUtils.forceMkdir(dest) String srcDirPath = input.getAbsolutePath() String destDirPath = dest.getAbsolutePath() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (File file : input.listFiles()) { String destFilePath = file.absolutePath.replace(srcDirPath, destDirPath) File destFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(destFilePath) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file.isDirectory()) { transformDir(file, destFile) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file.isFile()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file.name.endsWith(<span class="hljs-string"><span class="hljs-string">".class"</span></span>) &amp;&amp; !file.name.endsWith(<span class="hljs-string"><span class="hljs-string">"R.class"</span></span>) &amp;&amp; !file.name.endsWith(<span class="hljs-string"><span class="hljs-string">"BuildConfig.class"</span></span>) &amp;&amp; !file.name.contains(<span class="hljs-string"><span class="hljs-string">"R\$"</span></span>)) { transformSingleFile(file, destFile) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { FileUtils.copyFile(file, destFile) } } } }</code> </pre> <br><p> åœ¨å…¥å£å¤„ï¼Œæˆ‘ä»¬è·å¾—äº†åŒ…å«æºä»£ç çš„ç›®å½•ä»¥åŠè¦åœ¨å…¶ä¸­å†™å…¥ä¿®æ”¹åçš„æ–‡ä»¶çš„ç›®å½•ã€‚ æˆ‘ä»¬é€’å½’åœ°æµè§ˆæ‰€æœ‰ç›®å½•å¹¶è·å–ç±»æ–‡ä»¶ã€‚ è½¬æ¢ä¹‹å‰ï¼Œä»ç„¶æœ‰ä¸€ä¸ªå°æ£€æŸ¥ï¼Œå¯è®©æ‚¨æ¸…é™¤å¤šä½™çš„ç±»ã€‚ </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file.name.endsWith(<span class="hljs-string"><span class="hljs-string">".class"</span></span>) &amp;&amp; !file.name.endsWith(<span class="hljs-string"><span class="hljs-string">"R.class"</span></span>) &amp;&amp; !file.name.endsWith(<span class="hljs-string"><span class="hljs-string">"BuildConfig.class"</span></span>) &amp;&amp; !file.name.contains(<span class="hljs-string"><span class="hljs-string">"R\$"</span></span>)) { transformSingleFile(file, destFile) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { FileUtils.copyFile(file, destFile) }</code> </pre> <br><p> å› æ­¤ï¼Œæˆ‘ä»¬è¿›å…¥äº†<code>transformSingleFile</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å·²æµå…¥æˆ‘ä»¬åŸå§‹è®¡åˆ’çš„ç¬¬äºŒæ®µ </p><br><blockquote> å…¶æ¬¡ï¼Œå½“æˆ‘ä»¬è·å¾—å¿…è¦çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å¦‚ä½•æ­£ç¡®è½¬æ¢å®ƒä»¬ã€‚ </blockquote><br><h3 id="transformaciya-vo-vsey-ee-krase"> è¾‰ç…Œçš„å˜é© </h3><br><p> ä¸ºäº†ä½¿ç”Ÿæˆçš„ç±»æ–‡ä»¶è½¬æ¢èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæœ‰å‡ ä¸ªåº“ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">javassist</a> ï¼ˆå¯è®©æ‚¨ä¿®æ”¹å­—èŠ‚ç å’Œæºä»£ç ï¼ˆæ— éœ€æ·±å…¥ç ”ç©¶å­—èŠ‚ç ï¼‰ï¼‰å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ASM</a> ï¼ˆå¯è®©æ‚¨ä»…ä¿®æ”¹å­—èŠ‚ç å¹¶å…·æœ‰2ä¸ªä¸åŒçš„APIï¼‰ã€‚ </p><br><p> æˆ‘é€‰æ‹©äº†ASMï¼Œå› ä¸ºè¿›å…¥å­—èŠ‚ç ç»“æ„éå¸¸æœ‰è¶£ï¼Œæ­¤å¤–ï¼ŒCore APIè¿˜åŸºäºSAXè§£æå™¨åŸç†è§£ææ–‡ä»¶ï¼Œä»è€Œç¡®ä¿äº†é«˜æ€§èƒ½ã€‚ </p><br><p>  <code>transformSingleFile</code>æ–¹æ³•å¯èƒ½ä¼šå› æ‰€é€‰çš„æ–‡ä»¶ä¿®æ”¹å·¥å…·è€Œå¼‚ã€‚ å°±æˆ‘è€Œè¨€ï¼Œå®ƒçœ‹èµ·æ¥éå¸¸ç®€å•ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transformClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String inputPath, String outputPath)</span></span></span><span class="hljs-function"> </span></span>{ FileInputStream is = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(inputPath) ClassReader classReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassReader(is) ClassWriter classWriter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassWriter(ClassWriter.COMPUTE_FRAMES) StaterClassVisitor adapter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaterClassVisitor(classWriter) classReader.accept(adapter, ClassReader.EXPAND_FRAMES) <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> [] newBytes = classWriter.toByteArray() FileOutputStream fos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileOutputStream(outputPath) fos.write(newBytes) fos.close() }</code> </pre> <br><p> æˆ‘ä»¬åˆ›å»ºç”¨äºè¯»å–æ–‡ä»¶çš„<code>ClassReader</code> ï¼Œæˆ‘ä»¬åˆ›å»ºç”¨äºå†™å…¥æ–°æ–‡ä»¶çš„<code>ClassWriter</code> ã€‚ æˆ‘ä½¿ç”¨ClassWriter.COMPUTE_FRAMESè‡ªåŠ¨è®¡ç®—å †æ ˆå¸§ï¼Œå› ä¸ºæˆ‘æˆ–å¤šæˆ–å°‘åœ°å¤„ç†è¿‡Localså’ŒArgs_sizeï¼ˆå­—èŠ‚ç æœ¯è¯­ï¼‰ï¼Œä½†æ˜¯æˆ‘å¯¹å¸§çš„å¤„ç†è¿˜ä¸å¤šã€‚ è‡ªåŠ¨è®¡ç®—å¸§æ¯”æ‰‹åŠ¨è®¡ç®—è¦æ…¢ä¸€äº›ã€‚ <br> ç„¶ååˆ›å»ºä»<code>ClassVisitor</code>ç»§æ‰¿å¹¶ä¼ é€’classWriterçš„StaterClassVisitorã€‚ äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶ä¿®æ”¹é€»è¾‘è¢«å åŠ åœ¨æ ‡å‡†ClassWriterä¹‹ä¸Šã€‚ åœ¨ASMåº“ä¸­ï¼Œæ‰€æœ‰<code>Visitor</code>å®ä½“éƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼æ„é€ çš„ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºæ–°æ–‡ä»¶å½¢æˆä¸€ä¸ªå­—èŠ‚æ•°ç»„å¹¶ç”Ÿæˆæ–‡ä»¶ã€‚ </p><br><p> æˆ‘å°†å¯¹æ‰€ç ”ç©¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>ç†è®ºè¿›è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®é™…åº”ç”¨çš„</a>æ›´å¤šç»†èŠ‚ã€‚ </p><br><h4 id="sohranenie-sostoyaniya-v-bundle-s-pomoschyu-annotacii"> ä½¿ç”¨æ³¨é‡Šå°†çŠ¶æ€ä¿å­˜åœ¨æ†ç»‘åŒ…ä¸­ </h4><br><p> å› æ­¤ï¼Œæˆ‘è®¾å®šäº†è‡ªå·±çš„ä»»åŠ¡ï¼Œå³åœ¨é‡æ–°åˆ›å»ºActivityæ—¶å°½å¯èƒ½æ‘†è„±æ†ç»‘çš„æ•°æ®å­˜å‚¨æ ·æ¿ã€‚ æˆ‘æƒ³åšè¿™æ ·çš„ä¸€åˆ‡ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivityJava</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> savedInt = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p> ä½†æ˜¯ç°åœ¨ï¼Œä¸ºäº†æœ€å¤§ç¨‹åº¦åœ°æé«˜æ•ˆç‡ï¼Œæˆ‘åšåˆ°äº†ï¼ˆç¨åå°†å‘Šè¯‰æ‚¨åŸå› ï¼‰ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Stater</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivityJava</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@State</span></span>(StateType.INT) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> savedInt = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p> å®ƒç¡®å®æœ‰æ•ˆï¼ è½¬æ¢åï¼Œ <code>MainActivityJava</code>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Stater</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivityJava</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@State</span></span>(StateType.INT) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> savedInt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (savedInstanceState != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.savedInt = savedInstanceState.getInt(<span class="hljs-string"><span class="hljs-string">"com/example/stater/MainActivityJava_savedInt"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSaveInstanceState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull Bundle outState)</span></span></span><span class="hljs-function"> </span></span>{ outState.putInt(<span class="hljs-string"><span class="hljs-string">"com/example/stater/MainActivityJava_savedInt"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.savedInt); <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onSaveInstanceState(outState); }</code> </pre> <br><p> è¿™ä¸ªæƒ³æ³•å¾ˆç®€å•ï¼Œè®©æˆ‘ä»¬ç»§ç»­å®æ–½ã€‚ <br>  Core APIä¸å…è®¸æ‚¨æ‹¥æœ‰æ•´ä¸ªç±»æ–‡ä»¶çš„å®Œæ•´ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æŸäº›æ–¹æ³•è·å–æ‰€æœ‰å¿…éœ€çš„æ•°æ®ã€‚ å¦‚æœæŸ¥çœ‹<code>StaterClassVisitor</code> ï¼Œå¯ä»¥çœ‹åˆ°åœ¨<code>visit</code>æ–¹æ³•ä¸­æˆ‘ä»¬è·å¾—äº†æœ‰å…³è¯¥ç±»çš„ä¿¡æ¯ï¼Œåœ¨<code>StaterClassVisitor</code>æˆ‘ä»¬æ£€æŸ¥äº†æˆ‘ä»¬çš„ç±»æ˜¯å¦å¸¦æœ‰<code>@Stater</code>æ‰¹æ³¨æ ‡è®°ã€‚ </p><br><p> ç„¶åï¼Œæˆ‘ä»¬çš„<code>ClassVisitor</code>æ‰€æœ‰å­—æ®µï¼Œè°ƒç”¨<code>visitField</code>æ–¹æ³•ï¼Œå¦‚æœéœ€è¦è½¬æ¢è¯¥ç±»ï¼Œåˆ™æˆ‘ä»¬çš„<code>StaterFieldVisitor</code> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-function">FieldVisitor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitField</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> access, String name, String descriptor, String signature, Object value)</span></span></span><span class="hljs-function"> </span></span>{ FieldVisitor fv = <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.visitField(access, name, descriptor, signature, value) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needTransform) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaterFieldVisitor(fv, name, descriptor, owner) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fv }</code> </pre> <br><p>  <code>StaterFieldVisitor</code>æ£€æŸ¥<code>@State</code>æ‰¹æ³¨ï¼Œç„¶ååœ¨<code>visitAnnotation</code>æ–¹æ³•ä¸­è¿”å›<code>StateAnnotationVisitor</code> ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-function">AnnotationVisitor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitAnnotation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String descriptor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> visible)</span></span></span><span class="hljs-function"> </span></span>{ AnnotationVisitor av = <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.visitAnnotation(descriptor, visible) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (descriptor == Descriptors.STATE) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateAnnotationVisitor(av, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.descriptor, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.owner) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> av }</code> </pre> <br><p> å·²ç»å½¢æˆäº†ä¿å­˜/æ¢å¤æ‰€éœ€å­—æ®µçš„åˆ—è¡¨ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitEnum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name, String descriptor, String value)</span></span></span><span class="hljs-function"> </span></span>{ String typeString = (String) value SaverField field = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SaverField(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.descriptor, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.owner, StateType.valueOf(typeString)) Const.stateFields.add(field) <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.visitEnum(name, descriptor, value) }</code> </pre> <br><p> äº‹å®è¯æ˜ï¼Œè®¿å®¢çš„æ ‘çŠ¶ç»“æ„ä½¿ä»–ä»¬æˆä¸ºSaverField <code>SaverField</code>çš„åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬ç”Ÿæˆä¿å­˜çŠ¶æ€æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚ <br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çš„<code>ClassVisitor</code>å¼€å§‹è¿è¡Œè¿™äº›æ–¹æ³•ï¼Œå¹¶è½¬æ¢<code>onCreate</code>å’Œ<code>onSaveInstanceState</code> ã€‚ å¦‚æœæœªæ‰¾åˆ°æ–¹æ³•ï¼Œåˆ™åœ¨<code>visitEnd</code> ï¼ˆé€šè¿‡æ•´ä¸ªç±»åè°ƒç”¨ï¼‰ï¼Œå®ƒä»¬æ˜¯ä»å¤´å¼€å§‹ç”Ÿæˆçš„ã€‚ </p><br><h4 id="gde-zhe-baytkod"> å­—èŠ‚ç åœ¨å“ªé‡Œï¼Ÿ </h4><br><p> æœ€æœ‰è¶£çš„éƒ¨åˆ†å§‹äºç±»<code>OnCreateVisitor</code>å’Œ<code>OnSavedInstanceStateVisitor</code> ã€‚ ä¸ºäº†æ­£ç¡®ä¿®æ”¹å­—èŠ‚ç ï¼Œå¿…é¡»è‡³å°‘ç•¥å¾®è¡¨ç¤ºå…¶ç»“æ„ã€‚  ASMçš„æ‰€æœ‰æ–¹æ³•å’Œæ“ä½œç éƒ½ä¸batcodeçš„å®é™…æŒ‡ä»¤éå¸¸ç›¸ä¼¼ï¼Œè¿™ä½¿æ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µè¿›è¡Œæ“ä½œã€‚ <br> è€ƒè™‘ä¿®æ”¹<code>onCreate</code>æ–¹æ³•çš„ç¤ºä¾‹ï¼Œå¹¶å°†å…¶ä¸ç”Ÿæˆçš„ä»£ç è¿›è¡Œæ¯”è¾ƒï¼š </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (savedInstanceState != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.savedInt = savedInstanceState.getInt(<span class="hljs-string"><span class="hljs-string">"com/example/stater/MainActivityJava_savedInt"</span></span>); }</code> </pre> <br><p> æ£€æŸ¥åŒ…æ˜¯å¦ä¸ºé›¶ä¸ä»¥ä¸‹è¯´æ˜æœ‰å…³ï¼š </p><br><pre> <code class="java hljs">Label l1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Label() mv.visitVarInsn(Opcodes.ALOAD, <span class="hljs-number"><span class="hljs-number">1</span></span>) mv.visitJumpInsn(Opcodes.IFNULL, l1) <span class="hljs-comment"><span class="hljs-comment">//...      mv.visitLabel(l1)</span></span></code> </pre> <br><p> ç®€å•æ¥è¯´ï¼š </p><br><ol><li> åˆ›å»ºä¸€ä¸ªæ ‡ç­¾l1ï¼ˆåªæ˜¯ä¸€ä¸ªå¯ä»¥è®¿é—®çš„æ ‡ç­¾ï¼‰ã€‚ </li><li> æˆ‘ä»¬å°†ç´¢å¼•ä¸º1çš„å¼•ç”¨å˜é‡åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ç”±äºç´¢å¼•0å§‹ç»ˆä¸æ­¤å¼•ç”¨ç›¸å¯¹åº”ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹1æ˜¯å¯¹å‚æ•°ä¸­<code>Bundle</code>çš„å¼•ç”¨ã€‚ </li><li> é›¶æ ¡éªŒæœ¬èº«å’Œl1æ ‡ç­¾ä¸Šçš„gotoè¯­å¥ã€‚ ä½¿ç”¨æ†ç»‘è½¯ä»¶åï¼ŒæŒ‡å®š<code>visitLabel(l1)</code> ã€‚ </li></ol><br><p> ä½¿ç”¨åŒ…æ—¶ï¼Œæˆ‘ä»¬éå†å·²ç”Ÿæˆå­—æ®µçš„åˆ—è¡¨ï¼Œå¹¶è°ƒç”¨<code>PUTFIELD</code>æŒ‡ä»¤-åˆ†é…ç»™å˜é‡ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š </p><br><pre> <code class="java hljs">mv.visitVarInsn(Opcodes.ALOAD, <span class="hljs-number"><span class="hljs-number">0</span></span>) mv.visitVarInsn(Opcodes.ALOAD, <span class="hljs-number"><span class="hljs-number">1</span></span>) mv.visitLdcInsn(field.key) <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> StateType type = MethodDescriptorUtils.primitiveIsObject(field.descriptor) ? StateType.SERIALIZABLE : field.type MethodDescriptor methodDescriptor = MethodDescriptorUtils.getDescriptorByType(type, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (methodDescriptor == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || !methodDescriptor.isValid()) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"StateType for ${field.name} in ${field.owner} is unknown!"</span></span>) } mv.visitMethodInsn( Opcodes.INVOKEVIRTUAL, Types.BUNDLE, methodDescriptor.method, <span class="hljs-string"><span class="hljs-string">"(${Descriptors.STRING})${methodDescriptor.descriptor}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ) <span class="hljs-comment"><span class="hljs-comment">// cast if (type == StateType.SERIALIZABLE || type == StateType.PARCELABLE || type == StateType.PARCELABLE_ARRAY || type == StateType.IBINDER ) { mv.visitTypeInsn(Opcodes.CHECKCAST, Type.getType(field.descriptor).internalName) } mv.visitFieldInsn(Opcodes.PUTFIELD, field.owner, field.name, field.descriptor)</span></span></code> </pre> <br><p>  <code>MethodDescriptorUtils.primitiveIsObject</code>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ£€æŸ¥å˜é‡æ˜¯å¦å…·æœ‰åŒ…è£…å™¨ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†å˜é‡ç±»å‹è§†ä¸º<code>Serializable</code> ã€‚ ç„¶åï¼Œè°ƒç”¨åŒ…ä¸­çš„getterï¼Œå¦‚æœ‰å¿…è¦ï¼Œå°†å…¶å¼ºåˆ¶è½¬æ¢å¹¶åˆ†é…ç»™å˜é‡ã€‚ </p><br><p> å°±æ˜¯è¿™æ ·ï¼Œ <code>onSavedInstanceState</code>æ–¹æ³•ä¸­çš„ä»£ç ç”Ÿæˆä»¥ç±»ä¼¼çš„æ–¹å¼å‘ç”Ÿï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¾‹å¦‚example</a> ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">ä½ é‡åˆ°ä»€ä¹ˆé—®é¢˜</b> <div class="spoiler_text"><ol><li>  <code>@Stater</code>æ·»åŠ <code>@Stater</code>æ‰¹æ³¨çš„ç¬¬ä¸€ä¸ªéšœç¢ã€‚ æ‚¨çš„æ´»åŠ¨/ç‰‡æ®µå¯ä»¥ä»<code>BaseActivity</code>ç»§æ‰¿ï¼Œè¿™ä½¿å¯¹æ˜¯å¦ä¿å­˜çŠ¶æ€çš„ç†è§£å˜å¾—éå¸¸å¤æ‚ã€‚ æ‚¨å°†å¿…é¡»éå†è¯¥ç­çº§çš„æ‰€æœ‰å®¶é•¿ï¼Œæ‰èƒ½å‘ç°è¿™ç¡®å®æ˜¯ä¸€é¡¹æ´»åŠ¨ã€‚ å®ƒè¿˜å¯èƒ½ä¼šé™ä½ç¼–è¯‘å™¨çš„æ€§èƒ½ï¼ˆå°†æ¥æœ‰ä¸€ç§æƒ³æ³•å¯ä»¥æœ€æœ‰æ•ˆåœ°æ‘†è„±<code>@Stater</code>æ³¨é‡Šï¼‰ã€‚ </li><li> æ˜ç¡®æŒ‡å®š<code>StateType</code>çš„åŸå› ä¸ç¬¬ä¸€æ¬¡<code>StateType</code>çš„åŸå› ç›¸åŒã€‚ æ‚¨éœ€è¦è¿›ä¸€æ­¥è§£æè¯¥ç±»ï¼Œä»¥äº†è§£å®ƒæ˜¯<code>Parcelable</code>è¿˜æ˜¯<code>Serializable</code> ã€‚ ä½†æ˜¯è¿™äº›è®¡åˆ’å·²ç»æœ‰äº†æ‘†è„±<code>StateType</code> :)çš„æƒ³æ³•ã€‚ </li></ol></div></div><br><h4 id="nemnogo-o-proizvoditelnosti"> å…³äºæ€§èƒ½çš„ä¸€ç‚¹ç‚¹ </h4><br><p> ä¸ºäº†è¿›è¡ŒéªŒè¯ï¼Œæˆ‘åˆ›å»ºäº†10ä¸ªæ¿€æ´»ï¼Œæ¯ä¸ªæ¿€æ´»éƒ½æœ‰46ä¸ªä¸åŒç±»å‹çš„å­˜å‚¨å­—æ®µï¼Œå¹¶åœ¨å‘½ä»¤<code>./gradlew :app:clean :app:assembleDebug</code>ä¸Šè¿›è¡Œäº†æ£€æŸ¥ã€‚ æˆ‘çš„è½¬æ¢èŠ±è´¹çš„æ—¶é—´ä¸º108åˆ°200æ¯«ç§’ã€‚ </p><br><h4 id="sovety"> å°è´¹ </h4><br><ul><li><p> å¦‚æœæ‚¨å¯¹æŸ¥çœ‹ç”Ÿæˆçš„å­—èŠ‚ç æ„Ÿå…´è¶£ï¼Œå¯ä»¥å°†<code>TraceClassVisitor</code> ï¼ˆç”±ASMæä¾›ï¼‰è¿æ¥åˆ°è½¬æ¢è¿‡ç¨‹ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transformClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String inputPath, String outputPath)</span></span></span><span class="hljs-function"> </span></span>{ ... TraceClassVisitor traceClassVisitor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TraceClassVisitor(classWriter, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintWriter(System.out)) StaterClassVisitor adapter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaterClassVisitor(traceClassVisitor) ... }</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>TraceClassVisitor</code>ä¼šå°†é€šè¿‡å®ƒçš„ç±»çš„æ•´ä¸ªå­—èŠ‚ç å†™å…¥æ§åˆ¶å°ï¼Œè¿™æ˜¯åœ¨è°ƒè¯•é˜¶æ®µéå¸¸æ–¹ä¾¿çš„å®ç”¨ç¨‹åºã€‚ </p><br></li><li><p> å¦‚æœå­—èŠ‚ç è¢«é”™è¯¯åœ°ä¿®æ”¹ï¼Œåˆ™ä¼šäº§ç”Ÿéå¸¸éš¾ä»¥ç†è§£çš„é”™è¯¯ï¼Œå› æ­¤ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œå€¼å¾—è®°å½•ä»£ç ä¸­æ½œåœ¨å±é™©çš„éƒ¨åˆ†æˆ–ç”Ÿæˆå¼‚å¸¸ã€‚ </p><br></li></ul><br><h2 id="podytozhim"> æ€»ç»“ä¸€ä¸‹ </h2><br><p> ä¿®æ”¹æºä»£ç æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚ æœ‰äº†å®ƒï¼Œæ‚¨å¯ä»¥å®ç°è®¸å¤šæƒ³æ³•ã€‚  Proguardï¼Œrealmï¼Œrobolectricå’Œå…¶ä»–æ¡†æ¶éƒ½éµå¾ªæ­¤åŸåˆ™ã€‚ ç”±äºä»£ç è½¬æ¢ï¼ŒAOPä¹Ÿå¯ä»¥å®ç°ã€‚ <br> å­—èŠ‚ç ç»“æ„çš„çŸ¥è¯†ä½¿å¼€å‘äººå‘˜å¯ä»¥äº†è§£ä»–ç¼–å†™çš„ä»£ç æœ€ç»ˆå°†è¢«ç¼–è¯‘ã€‚ è€Œä¸”ï¼Œåœ¨ä¿®æ”¹æ—¶ï¼Œä¸å¿…è€ƒè™‘ç”¨Javaæˆ–Kotlinç”¨å“ªç§è¯­è¨€ç¼–å†™ä»£ç ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹å­—èŠ‚ç ã€‚ </p><br><p> è¿™ä¸ªä¸»é¢˜å¯¹æˆ‘æ¥è¯´ä¼¼ä¹å¾ˆæœ‰è¶£ï¼Œä¸»è¦çš„å›°éš¾åœ¨äºä»Googleå¼€å‘Transform APIæ—¶é‡åˆ°çš„å›°éš¾ï¼Œå› ä¸ºä»–ä»¬å¯¹ç‰¹æ®Šçš„æ–‡æ¡£å’Œç¤ºä¾‹ä¸æ»¡æ„ã€‚ ä¸Transform APIä¸åŒï¼ŒASMå…·æœ‰å‡ºè‰²çš„æ–‡æ¡£ï¼Œå¹¶ä»¥150é¡µçš„pdfæ–‡ä»¶çš„å½¢å¼æä¾›äº†éå¸¸è¯¦ç»†çš„æŒ‡å—ã€‚ è€Œä¸”ï¼Œç”±äºè¯¥æ¡†æ¶çš„æ–¹æ³•ä¸çœŸå®å­—èŠ‚ç æŒ‡ä»¤éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤è¯¥æŒ‡å—éå¸¸æœ‰ç”¨ã€‚ </p><br><p> æˆ‘è®¤ä¸ºåœ¨æ­¤æˆ‘æ²‰æµ¸åœ¨è½¬æ¢ï¼Œå­—èŠ‚ç ä¸­ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰ç»“æŸï¼Œæˆ‘å°†ç»§ç»­å­¦ä¹ ï¼Œä¹Ÿè®¸è¿˜è¦å†™äº›å…¶ä»–ä¸œè¥¿ã€‚ </p><br><h2 id="ssylki"> å‚è€ƒæ–‡çŒ® </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Githubç¤ºä¾‹</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ASM</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³å­—èŠ‚ç çš„Habræ–‡ç« </a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³å­—èŠ‚ç çš„æ›´å¤šä¿¡æ¯</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è½¬æ¢API</a> <br> å¥½å§ï¼Œé˜…è¯»æ–‡æ¡£ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN469237/">https://habr.com/ru/post/zh-CN469237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN469223/index.html">LEDèƒŒå…‰ä½œä¸ºåé—¨</a></li>
<li><a href="../zh-CN469229/index.html">æœºå™¨äººä¿±ä¹éƒ¨é¡¹ç›®â€œ GoROBOâ€-æ¥è‡ªITMOå¤§å­¦åŠ é€Ÿå™¨çš„åˆ›ä¸šå…¬å¸</a></li>
<li><a href="../zh-CN469231/index.html">æ¸¸æˆè®¾è®¡è®²åº§æ™šä¼š</a></li>
<li><a href="../zh-CN469233/index.html">Habr Weeklyï¼ƒ20 / 2FAè®¤è¯ä¸æ˜¯ä¸‡èƒ½è¯ï¼ŒAndroid 10 Goæ˜¯æœ€å¼±çš„ï¼ŒjQueryæ•…äº‹ï¼Œç›–èŒ¨ç”µå½±</a></li>
<li><a href="../zh-CN469235/index.html">æˆ´ä¸Šæ–°é¢å…·çš„Troldeshï¼šå‹’ç´¢è½¯ä»¶ç—…æ¯’çš„ä¸‹ä¸€æ³¢å¤§è§„æ¨¡ä¼ æ’­</a></li>
<li><a href="../zh-CN469245/index.html">å†¬è‡³æå‡ºå°ç»„é¡¹ç›®çš„æ„æƒ³ï¼Œä»¥ä»æˆ¿å±‹çš„å±‹é¡¶è·å–å¤ªé˜³èƒ½</a></li>
<li><a href="../zh-CN469249/index.html">Nitterï¼ŒTwitterçš„æ›¿ä»£å‰ç«¯</a></li>
<li><a href="../zh-CN469253/index.html">åº”ç”¨ç¨‹å¼å»ºç«‹æˆæœ¬</a></li>
<li><a href="../zh-CN469257/index.html">æˆ‘ä»¬ä½¿ç”¨PowerShellå’ŒWSLåœ¨Windowsä¸­é›†æˆLinuxå‘½ä»¤</a></li>
<li><a href="../zh-CN469259/index.html">æ°”å€™å˜åŒ–ï¼šæˆ‘ä»¬åˆ†æäº†è¿‡å»100å¹´ä¸­ä¸åŒåŸå¸‚çš„æ¸©åº¦</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>