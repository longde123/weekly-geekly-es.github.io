<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛲️ 👩🏾‍🏫 🥟 Schreiben eines Touch-Typing-Simulators mit reinem JavaScript: Teil 2 ☝🏾 👨🏽‍🎓 🙆🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo! Im Vorgriff auf den Beginn des Kurses "Fullstack JavaScript Developer" hat einer unserer Autoren beschlossen, seine Erfahrungen bei der Erstell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben eines Touch-Typing-Simulators mit reinem JavaScript: Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/481020/">  <i>Hallo!</i>  <i>Im Vorgriff auf den Beginn des Kurses <a href="https://otus.pw/vdqp/">"Fullstack JavaScript Developer" hat</a> einer unserer Autoren beschlossen, seine Erfahrungen bei der Erstellung eines Simulators für das Tippen von Berührungen mitzuteilen.</i>  <i>Aber wir wollen Ihnen dieses Material zeigen und heute den letzten Teil davon teilen.</i> <br><br><img src="https://habrastorage.org/webt/rp/lu/hn/rpluhno5aexsppsfajdqxhtlxr4.png"><br><hr><br>  Der erste Teil kann hier gelesen <a href="https://habr.com/ru/company/otus/blog/480118/">werden.</a> <br><a name="habracut"></a><br>  Hallo allerseits!  Wir schreiben weiterhin einen nativen Schreibsimulator mit nativem JavaScript.  Im letzten Teil haben Sie und ich die Hauptlogik der Anwendung erstellt, in der durch Drücken der Eingabetaste die erste Ebene von zwanzig Zeichen geladen wurde, die beim Erlernen der Methode des Berührungsdrucks als eine der ersten untersucht wurde (J, K, F, D).  Die Arbeitsversion der ersten Version kann hier eingesehen <a href="https://isakura13.bitbucket.io/playground/">werden</a> .  Wir haben jedoch noch einige Aufgaben, um die Anwendung zu verbessern. <br><br><img src="https://habrastorage.org/webt/dz/et/b1/dzetb19x6wir8i2tokhbzqxkpoi.gif"><br><br>  Formulieren wir die TOR, um zu verstehen, was genau wir erreichen wollen: <br><br>  <i>„Zu Beginn des Spiels werden die Ebenen 1 bis 3 nacheinander geladen, nachdem der Benutzer die einladende Eingabetaste gedrückt hat, die sich animiert von links nach rechts bewegt.</i>  <i>Durch Drücken der richtigen Taste wird ein positives Spielesignal abgespielt, im Fehlerfall ein negatives Spielesignal.</i>  <i>Die erste und zweite Ebene haben gewöhnliche Symbole, die dritte Ebene ist Bonus, wobei die Symbole speziell für Programmierer sind (eher komisch).</i>  <i>Am Ende des Levels haben wir ein Ergebnisfenster, das von <code>localStorage</code> geschrieben und entnommen wurde. Dieses Fenster zeigt die Anzahl der Spielerfehler und die Endzeit der Spielsitzung an.</i>  <i>Bei zu vielen Fehlern wird der Sound des Verlusts abgespielt, bei erfolgreichem Übergang in die nächste Ebene - eine Hauptmelodie. "</i> <br><br>  Okay, jetzt haben wir TK, fangen wir an zu programmieren.  Natürlich wird unsere Codebasis erheblich erweitert, was bedeutet, dass wir ein <code>webpack</code> benötigen, um mit viel Code fertig zu werden und die erforderlichen Bibliotheken zu <code>webpack</code> .  Beginnen wir jedoch mit dem Layout und sehen, welche Änderungen aufgetreten sind.  Ich werde den Inhalt von <code>head</code> , da sich dort nur geändert hat, dass wir jetzt Javascript aus der <code>dist/code.js</code> ziehen, die vom <code>dist/code.js</code> verarbeitet wird, aber alles andere bleibt <code>dist/code.js</code> . <br><br>  Im Hauptteil der Seite habe ich ein modales Fenster hinzugefügt, das noch nicht sichtbar ist und in dem wir die Ergebnisse des Bestehens des Spiels in <code>table</code> schreiben werden: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"has-background-black-bis"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-background has-background-link"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-content has-background-white"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"is-size-4"</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target_error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-close is-large"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"close"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Natürlich bereitet die Tatsache, dass wir ein modales Fenster direkt auf der Seite haben, den SPA-Liebhabern körperliche Schmerzen - Frameworks (schließlich möchten sie all dies ordentlich in Komponenten zerlegen).  Aber ich wollte die Erzeugung dieses Inhalts nicht in JS malen.  Schauen wir uns den nächsten Teil unseres HTML an: <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero is-primary is-large"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-head container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-4 has-text-white promo"</span></span></span><span class="hljs-tag">&gt;</span></span>   3000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-4 has-text-danger has-text-centered name-level"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"error-panel is-hidden"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progress</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progress is-danger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progress</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-body has-background-black-bis main-board"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-2 has-text-white has-text-centered begin anim-elem"</span></span></span><span class="hljs-tag">&gt;</span></span>Press Enter to Start<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buttons columns is-half is-centered"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--        --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Tatsächlich haben sich seit dem letzten Mal nur drei Dinge geändert: Jetzt gibt es einen Namen für die Ebene, die wir aus js ausfüllen werden, die Fehleranzeige ist anfangs ausgeblendet und der Name der Anwendung selbst hat sich geändert. <br><br>  Kurz vor dem Start von JS füge ich nur ein wenig CSS hinzu, um ein wenig zu korrigieren, was ich mit <code>Bulma</code> nicht machen konnte: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">max-height</span></span>:<span class="hljs-number"><span class="hljs-number">40vh</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.promo</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>; }</code> </pre><br>  Ok js.  Ich habe die einfachste Webpack-Konfiguration geschrieben.  Es unterscheidet sich von dem, was auf der ersten Seite der <code>webpack</code> Dokumentation steht, nur durch das Nachverfolgen von Änderungen in Dateien.  Zum größten Teil benötige ich es, um Importe in der Hauptdatei <code>index.js</code> verwenden und schließlich eine verkleinerte Datei zu haben: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"path"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./js/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'code.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>), }, <span class="hljs-attr"><span class="hljs-attr">watch</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }</code> </pre><br>  Großartig, und jetzt können wir zur js-Struktur übergehen.  Für Animationen habe ich mich für <code>anime.js</code> - obwohl ich gut verstehe, dass die Menge an Animationen, die wir benötigen, in CSS in 10 Zeilen erstellt werden kann.  Vielleicht werden wir in Zukunft weitere Animationen hinzufügen, also habe ich die ganze <code>anime.es.js</code> .  Außerdem habe ich einer separaten Datei eine Funktion zur Erzeugung zufälliger Dateien hinzugefügt - aus Gründen der Benutzerfreundlichkeit: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRandomInt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">max</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(max)); }</code> </pre><br>  Dann entschloss ich mich, die <code>showResult</code> Funktion in eine separate Datei zu <code>showResult</code> , die die Ergebnisse zeichnete, nachdem der Benutzer das ganze Spiel durchlaufen hatte.  Dies ist eine ziemlich universelle Funktion, die das erste Argument für die Eingabe in das Element verwendet, das in die Informationen von <code>localStorage</code> und gerade empfangen wird, und das zweite Argument - die Informationen, die geschrieben werden müssen (in unserem Fall ist dies die Anzahl der Player-Fehler).  Außerdem habe ich Sortierschlüssel aus <code>localStorage</code> , sodass die Daten in der Tabelle nach dem Zeitpunkt ihrer <code>localStorage</code> sortiert wurden.  Im zweiten Teil der Funktion werden in der Tabelle die Daten der vorherigen Versuche des Spielers angezeigt.  Weniger Wörter, mehr Code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target_El, content</span></span></span><span class="hljs-function">)</span></span>{ localStorage.setItem(+<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, content); (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawOnLoad</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> temp_arr = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; localStorage.length; i++) { temp_arr.push(+localStorage.key(i)); } temp_arr.sort(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt; temp_arr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> item_time = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(temp_arr[i]); target_El.insertAdjacentHTML(<span class="hljs-string"><span class="hljs-string">'afterend'</span></span>, <span class="hljs-string"><span class="hljs-string">`&lt;th&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getDate()}</span></span></span><span class="hljs-string"> / </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getMonth()}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getHours()}</span></span></span><span class="hljs-string"> : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getMinutes()}</span></span></span><span class="hljs-string"> &lt;/th&gt; &lt;th&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${localStorage.getItem(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">String</span></span></span></span><span class="hljs-string"><span class="hljs-subst">(temp_arr[i]))}</span></span></span><span class="hljs-string">&lt;/th&gt; `</span></span>); } })(); }</code> </pre><br>  Toll, mit den zusätzlichen Dateien können wir endlich zur Hauptdatei gehen.  Zuerst machen wir die Importe: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> anime <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./anime.es"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> getRandomInt <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./random"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> showResult <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./showResult"</span></span>;</code> </pre><br>  Bibliotheken erhalten.  Machen wir von Anfang an eine Animation unserer einladenden Inschrift: <br><br><pre> <code class="javascript hljs">anime({ <span class="hljs-attr"><span class="hljs-attr">targets</span></span>: <span class="hljs-string"><span class="hljs-string">".anim-elem"</span></span>, <span class="hljs-attr"><span class="hljs-attr">translateX</span></span>: [<span class="hljs-number"><span class="hljs-number">-50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>], <span class="hljs-attr"><span class="hljs-attr">easing</span></span>: <span class="hljs-string"><span class="hljs-string">"linear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">direction</span></span>: <span class="hljs-string"><span class="hljs-string">"alternate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">loop</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre><br>  Großartig!  Schließlich die Anwendung selbst.  Ich habe beschlossen, alle Daten auf <code>json</code> zu verlagern, um den Server darzustellen, den dieses Spiel zum Beispiel auf Ungarisch, Russisch oder vereinfachtem Chinesisch erzeugen kann - kurz gesagt, mit einem beliebigen Zeichensatz (aber davor wächst und wächst natürlich).  Nach dem Empfang der Daten beim <code>fetch</code> wird die Funktion selbst asynchron aufgerufen, wodurch unser Spiel gestartet wird.  Ich habe JSON auf <code>gist.github</code> ( <a href="">hier</a> zu sehen) <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_data</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fetch( <span class="hljs-comment"><span class="hljs-comment">// "    ,   json" ) //     json  -     , //  -       .then(res =&gt; res.json()) .then(data =&gt; { //    ,     read_data(data); }) .catch(err =&gt; { console.warn(" "); console.warn(err.name); //   }); } get_data(); //      , ...      </span></span></code> </pre><br>  Wie der Leser bereits verstanden hat, befinden sich in unserer asynchronen Funktion <code>read_data</code> alle anderen Funktionen des Spiels.  Daher wird der Rest des Codes bereits in dieser Funktion enthalten sein: <br><br><pre> <code class="plaintext hljs">var number_of_level = 0; //        0 var error_sound = new Audio("sounds/error_sound.wav"); var fail_sound = new Audio("sounds/fail_sound.wav"); //    var press_sound = new Audio("sounds/press_sound.wav"); var succes_sound = new Audio("sounds/succes_sound.wav"); //       .        </code> </pre><br>  Ich habe 8-Bit-Sounds in freien Banken im Internet gefunden.  Schauen wir uns nun die Elemente an, die ich aus dem DOM-Baum bekomme: <br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> modal = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">".modal"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      var target_error = document.querySelector(".target_error"); //          let error_panel = document.querySelector(".error-panel"); //    let begin = document.querySelector(".begin"); //    ,     enter   .      let progress = document.getElementById("prog"); //     let buttons = document.querySelector(".buttons"); //         let name_level = document.querySelector(".name-level"); //       let modal_close = document.querySelector(".modal-close"); // ,                document.addEventListener("keydown", StartGame, { once: true // once           //     ,      });</span></span></code> </pre><br>  Als nächstes kommt die Startfunktion des Spiels.  Es wurde auch von einigen Änderungen überholt - jetzt wird unser Fehlerfenster erst zu Beginn des Spiels angezeigt, es wird ein Klickgeräusch abgespielt, die einladende Inschrift wird gelöscht und verschwindet nicht (ich habe dies aus Optimierungsgründen getan, da wir dann eine Animation eines auf der Seite unsichtbaren Elements abgespielt hätten). und dann heißt die Hauptspielfunktion: <br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key == <span class="hljs-string"><span class="hljs-string">"Enter"</span></span>) { error_panel.classList.remove(<span class="hljs-string"><span class="hljs-string">"is-hidden"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     press_sound.play(); begin.remove(); //    mainGame(); //    } }</span></span></code> </pre><br>  Ok, als nächstes kommt die Zeichnung der Buchstaben.  Der einzige Unterschied zur vorherigen Version besteht darin, dass wir jetzt die Daten aus dem JSON-Objekt übernehmen: <br><br><pre> <code class="plaintext hljs"> function drawBoard(info) { let str_arr = info.level_info[number_of_level].symbols; //    -     ,      webpack, .... name_level.innerHTML = info.level_info[number_of_level].name_level; let col_arr = info.symbol_colors; for (let i = 0; i &lt; 20; i++) { //    20  let rand = getRandomInt(str_arr.length); buttons.insertAdjacentHTML( "afterbegin", `&lt;button class='game-button button is-large ${col_arr[rand]}' id='${str_arr[rand]}'&gt; ${str_arr[rand]}&lt;/button&gt;` ); } }</code> </pre><br>  Als nächstes rufen wir die Funktion des Hauptspiels mit Informationen aus JSON auf, die unsere asynchrone Funktion noch als Argument gedeutet hat: <br><br><pre> <code class="plaintext hljs"> function mainGame() { drawBoard(information); document.addEventListener("keydown", press);</code> </pre><br>  Dann geht die letzte Funktionstaste in unserem Code, in der wir den Verlust und den Gewinn bestimmen.  Wenn der Benutzer zu viele Fehler erzielt hat, müssen Sie ihm mitteilen, dass er verloren hat, und die Melodie abspielen, die für das "Fiasko" verantwortlich ist.  Ein erfolgreiches Ende des Levels findet statt, wenn die Variable <code>count_right</code> den Wert erhält, der der Anzahl der von uns generierten Zeichen entspricht (20).  Ich bin mir bewusst, dass der Übergang zur nächsten Ebene erfolgen kann, wenn die Länge des <code>elements_arr</code> Arrays gleich 0 wird, aber für den Moment haben wir eine solche Lösung.  Wenn der Benutzer alle drei Ebenen erfolgreich abgeschlossen hat, wird eine Ergebnistafel mit der Anzahl der Fehler angezeigt: <br><br><pre> <code class="plaintext hljs"> var errors_count = 0; var count_right = 0; function press(e) { let elements_arr = document.querySelectorAll(".game-button"); //      if (e.key == elements_arr[0].id) { //      querySelector,      elements_arr[0].remove(); count_right++; //    press_sound.play(); } else { errors_count++; //   error_sound.play(); progress.value = errors_count; //     if (errors_count &gt; 20) { //         ,   fail_sound.play(); //    name_level.innerHTML = ' !'; setTimeout(() =&gt; { window.location.reload(); //       }, 2500); } } if (count_right == 20) { count_right = 0; number_of_level++; if (number_of_level == 3) { //     3  modal.classList.add("is-active"); //     showResult(target_error, errors_count); modal_close.onclick = async function() { modal.classList.remove("is-active"); window.location.reload(); //,     ,    }; } succes_sound.play(); mainGame(); } } } //      ,   </code> </pre><br>  Dies ist der Hauptteil unseres Artikels.  Wenn Sie sich für den Quellcode der Anwendung interessieren, finden Sie ihn <a href="">hier</a> .  Wenn Sie unsere Anwendung in Aktion sehen möchten, begrüßen wir Sie <a href="https://isakura13.bitbucket.io/playground2/">hier</a> .  Bitte schreibe alle Bugs und Fragen entweder in die Kommentare oder sofort in das <code>issues</code> Repository auf github. <br><br>  Es gibt noch viel mehr, das der Anwendung hinzugefügt werden könnte - dies sind einige lustige Animationen von Buchstaben, Musik im Hintergrund (oder Sie können sicherstellen, dass beim Drucken verschiedene Töne erzeugt werden, um den Benutzer zum Drucken in einem bestimmten Rhythmus zu zwingen).  Sie können im Buchstaben- und Geschwindigkeitsmodus blättern, um rechtzeitig zu drucken und die erreichte Genauigkeit aufzuzeichnen.  Ich würde auch gerne einen Countdown am Anfang des Levels sehen, damit der Spieler seine Hände richtig auf der Tastatur positionieren und sich fertig machen kann.  Kurz gesagt, es gibt viele Ideen (sowie eine sehr offensichtliche Übersetzung dieser Anwendung in React or Vue), und ich hoffe, dass die Habrowsker auch etwas raten werden.  Vielen Dank für Ihre Aufmerksamkeit! <br><br>  Nun, wir warten auf alle auf dem <a href="https://otus.pw/vdqp/">Kurs</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481020/">https://habr.com/ru/post/de481020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481010/index.html">16 Entwicklungstipps für Android in Kotlin. Teil 3</a></li>
<li><a href="../de481012/index.html">Was ich in 10 Jahren über Stack Overflow gelernt habe</a></li>
<li><a href="../de481014/index.html">Ich / WIR hosten nicht Ayhor. Oder wie man angesichts der Industrie spuckt</a></li>
<li><a href="../de481016/index.html">VonmoTrade-Experiment. Teil 1: Austausch und moderne Technologie</a></li>
<li><a href="../de481018/index.html">Und noch einmal zum Schutz virtueller Infrastrukturen</a></li>
<li><a href="../de481024/index.html">Warum ich die Google Maps API aufgegeben habe</a></li>
<li><a href="../de481028/index.html">Leitfaden zum Organisieren einer Remote-Verbindung zu einer Industrie-SPS mit OpenVPN</a></li>
<li><a href="../de481030/index.html">Was für eine Art von Cyberdec würde ich gerne für mich tun</a></li>
<li><a href="../de481032/index.html">Warum war es möglich zu hacken? Wahrscheinlich weil der Angreifer</a></li>
<li><a href="../de481034/index.html">Direkter VPN-Tunnel zwischen Computern über NAT-Anbieter (ohne VPS, mit einem STUN-Server und Yandex.Disk)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>