<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßò ü§º ü§® Russian AI Cup 2018, hist√≥ria 9 lugares üë®üèº‚Äçüíº üë®‚Äçüë®‚Äçüëß‚Äçüëß üôèüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ent√£o 


 Meu nome, como no ano passado, √© Andrei Rybalka, s√≥ que agora tenho 33 anos. E, como eu estava entre os dez primeiros, decidi compartilhar m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Russian AI Cup 2018, hist√≥ria 9 lugares</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440574/"><h1 id="itak">  Ent√£o </h1><br><p>  Meu nome, como no ano passado, √© Andrei Rybalka, s√≥ que agora tenho 33 anos. E, como eu estava entre os dez primeiros, decidi compartilhar minha abordagem de escrever um bot de jogo para a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Copa AI AI de 2018</a> novamente. </p><br><p>  Desta vez, a tarefa era futebol.  A tarefa em si lembrava o RAIC de 2014, quando era h√≥quei, mas a solu√ß√£o era completamente diferente. </p><br><p>  Dessa vez, o mundo era tridimensional e essa tridimensionalidade era usada na √≠ntegra.  O jogo em si lembrava mais a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rocket League</a> . </p><br><p>  N√£o vou suportar a parte introdut√≥ria, √© mais f√°cil mostrar como ela parecia.  Voc√™ pode assistir aos jogos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no site</a> ou no v√≠deo: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/6g/jb/hf/6gjbhf4gdy_4qqrw74huttfudvq.jpeg"></a> </p><a name="habracut"></a><br><p>  Para que nossa vida n√£o pare√ßa muito agrad√°vel, os desenvolvedores, al√©m do n√£o-determinismo do mundo dos jogos, tamb√©m dividiram o jogo em 100 subwoofers, que inicialmente acabaram com uma simula√ß√£o precisa para a maioria dos participantes e, mais ainda, para mim, pretendendo escrever um bot em Java lento. </p><br><p>  Al√©m disso, devo dizer que o campeonato √© dividido em rodadas, o que provavelmente seria mais correto para chamar rodadas. </p><br><h3 id="kratko-o-turnirnoy-sisteme">  Brevemente sobre o sistema de torneios </h3><br><p>  Para iniciantes, s√£o dadas 2 semanas para o desenvolvimento.  Ent√£o a primeira rodada passa.  Os 300 melhores v√£o al√©m. </p><br><p>  Ap√≥s a rodada, as regras do jogo mudam (especificamente, o nitro √© adicionado ao jogo) e s√£o dadas mais 2 semanas, ap√≥s as quais a segunda rodada passa. </p><br><p>  Ent√£o as regras s√£o complicadas novamente (o terceiro jogador √© adicionado), outra semana √© dada e jogamos a final. </p><br><p>  Mas este n√£o √© o fim.  Ap√≥s as finais, h√° mais uma semana, no final da qual a caixa de areia simplesmente para, e as 6 melhores nela, excluindo os vencedores das finais, tamb√©m s√£o premiadas.  A diferen√ßa fundamental entre o final da √°rea restrita e a final do campeonato √© que, na √°rea restrita, os jogos s√£o criados em um formato aleat√≥rio, e n√£o apenas no formato da rodada atual. </p><br><h1 id="istorii-uchastiya">  Hist√≥rias de participa√ß√£o </h1><br><p>  A parte t√©cnica ser√° menor.  Para quem a hist√≥ria √© desinteressante, voc√™ pode rolar para baixo at√© ficar boa. </p><br><h3 id="pervyy-raund">  Primeira Rodada </h3><br><p>  Ele come√ßou, como a maioria, com uma semana de beta.  Passamos muito tempo, mais de 4 horas todas as noites. <br>  Antes de preencher a primeira vers√£o, foram necess√°rias v√°rias itera√ß√µes <br>  <em>codificamos at√© come√ßarmos a vencer a vers√£o anterior - coletamos - consideramos a vers√£o atual da anterior - repetimos</em> . </p><br><p>  Eu n√£o estava com pressa com o primeiro preenchimento e isso aconteceu alguns dias antes da rodada.  E, como at√© o momento meu bot n√£o brinca com ningu√©m, eu n√£o fazia ideia de que tipo de mundo eu estava e que posi√ß√µes no ranking eu poderia reivindicar.  Quando vi que j√° havia vencido mais de 100 jogos seguidos sem uma √∫nica perda, me acalmei. </p><br><p>  Em geral, a primeira derrota que tive, ao que parece, ficou em 12¬∫ lugar, no limite de tempo, e o primeiro jogo perdido consecutivo j√° estava entre os 10 primeiros. </p><br><p>  Em resumo, percebi que tenho chances de entrar na segunda rodada, onde est√£o as 300 melhores. <br>  Portanto, n√£o persegui a posi√ß√£o e n√£o inundei mais nada durante a rodada, mas simplesmente continuei a trabalhar. </p><br><p>  Naquele momento, vi que ainda havia muito espa√ßo para melhorias sem conectar o nitro (que apareceu ap√≥s a 1¬™ rodada), ent√£o me concentrei na parte principal da estrat√©gia, percebendo que antes da segunda rodada eu tinha mais de 2 semanas para fixar o nitro. </p><br><h3 id="vtoroy-raund">  Segunda rodada </h3><br><p>  Na primeira semana eu estava programando ativamente, mas ainda n√£o conectava nitro.  Eu queria fazer isso na segunda semana.  Mas tudo saiu de forma diferente, porque no final da primeira semana eu havia contra√≠do pneumonia.  Como n√£o consegui programar, acabei de enviar o que era e, pode-se dizer, a participa√ß√£o ativa no campeonato para mim neste local terminou. </p><br><p>  Nas pr√≥ximas tr√™s semanas antes do final do campeonato, trabalhei em uma estrat√©gia no valor de talvez 20 horas. </p><br><p>  Como resultado, no segundo turno, meu bot, em princ√≠pio, n√£o sabia que havia nitro no jogo, mas de alguma forma ainda ocupava o 16¬∫ lugar. </p><br><h3 id="final">  Final </h3><br><p>  Na final, um terceiro jogador foi adicionado. </p><br><p>  Eu escrevi em Java lento, e n√£o em C ++, j√° que 7 em 8 pessoas s√£o mais altas do que eu na classifica√ß√£o, e antes disso, meu bot geralmente entrava em tempo limite, ent√£o, com o advento do terceiro jogador, ele come√ßou a cair em 100% dos jogos.  Felizmente, os jogos na sandbox s√£o criados em um formato aleat√≥rio, ent√£o eu automaticamente <br>  perdeu apenas a cada terceiro jogo e, portanto, n√£o voou muito.  Parece ter ca√≠do para o 18¬∫ lugar. </p><br><p>  Exceto pela programa√ß√£o, editando os coeficientes na fun√ß√£o de avalia√ß√£o e executando os testes, ent√£o pela primeira vez, ap√≥s o in√≠cio da doen√ßa, sentei-me no bot na noite do dia anterior √† final.  Ele adicionou um nitro muito simples, direcionado estritamente para cima, para que dois atacantes parassem de correr no mesmo ponto e colidissem um com o outro l√°, e cortassem tudo o que pudesse para um jogo 3x3, come√ßando pela profundidade da renderiza√ß√£o e terminando com a precis√£o da simula√ß√£o, apenas o bot n√£o morreu por tempo limite. <br>  Nesta forma, jogou o final. </p><br><p>  No intervalo entre as metades das finais, sentei-me novamente no bot e passei algumas boas horas: na maioria das vezes, as mudan√ßas diziam respeito √† sele√ß√£o din√¢mica de coeficientes, interrup√ß√£o precoce da gen√©tica etc.  Em geral, eu estava procurando um equil√≠brio entre precis√£o e profundidade e velocidade de erro de c√°lculo. <br>  Al√©m da luta contra a velocidade, ele fez mais algumas mudan√ßas: </p><br><ul><li>  Enviou um atacante distante (em rela√ß√£o √† bola) para um ponto no meio entre a bola e o gol do oponente </li><li>  Corrigi um pouco o nitro (a descri√ß√£o estar√° na parte t√©cnica).  Ainda era extremamente simples, mas se tornou muito mais eficiente. </li></ul><br><p>  Total, tendo executado os testes e vendo a pontua√ß√£o 395: 254 em rela√ß√£o √† vers√£o anterior, eu me acalmei com isso.  Isso me permitiu ficar em 9¬∫ lugar na final. </p><br><h3 id="final-pesochnicy">  Sandbox Finale </h3><br><p>  Continuei doendo e n√£o trabalhei no bot a maior parte da semana.  Um dia antes do final, vi que v√°rias pessoas enviaram vers√µes novas, que geralmente vencem contra mim e podem jogar caixas de areia fora de pr√™mios.  Ent√£o passei mais algumas horas. </p><br><p>  A √∫nica grande mudan√ßa √© que desenterrei minha filial no Git h√° tr√™s semanas, na qual fiz uma simula√ß√£o do movimento do inimigo usando meu algoritmo simplificado.  Naquela √©poca, funcionou mal, mas eu lembrei disso, fiz testes, vi <br>  que supera a vers√£o anterior quase dobrou e inundou.  No total, no momento da parada, eu estava em 10¬∫ lugar na tabela geral, o que corresponde ao 4¬∫ lugar nas finais da √°rea restrita. </p><br><h1 id="kak-eto-vsyo-rabotaet-tehnicheskaya-chast">  Como tudo funciona (parte t√©cnica) </h1><br><p>  Pe√ßo desculpas antecipadamente, caso haja imprecis√µes na terminologia.  Al√©m disso, como escrevo de mem√≥ria, √© poss√≠vel que em algum lugar n√£o descreva a vers√£o final. </p><br><p>  Portanto, algoritmos gen√©ticos est√£o no centro.  O cromossomo consiste em v√°rios genes: </p><br><ul><li>  N√∫mero fracion√°rio no intervalo -PI..PI, especificando a dire√ß√£o do movimento </li><li>  Um n√∫mero inteiro no intervalo de 0 a 10 que especifica o n√∫mero de repeti√ß√µes dessa a√ß√£o </li><li>  N√∫mero fracion√°rio de 0 a 1. Se o valor estiver acima de algum limite, fa√ßa um salto </li></ul><br><p>  O gen√≥tipo pode incluir um n√∫mero diferente de cromossomos, mas de maneira que o n√∫mero total de a√ß√µes (incluindo repeti√ß√µes) seja 40. </p><br><p>  Inicialmente, crio v√°rias dezenas de gen√≥tipos aleat√≥rios.  A eles eu adiciono: </p><br><ul><li>  A trajet√≥ria certa na bola </li><li>  Trajet√≥rias diretas em todas as dire√ß√µes, apenas 10 pe√ßas com um deslocamento de 36 graus </li><li>  Um gen√≥tipo que simplesmente n√£o faz nada (sem ele, o bot sempre roda em algum lugar, mesmo que j√° esteja no ponto ideal) </li><li>  Melhor gen√≥tipo do carrapato anterior </li></ul><br><p>  Ent√£o tudo √© simulado e executado atrav√©s da fun√ß√£o de avalia√ß√£o.  N melhores gen√≥tipos "sobrevivem" e s√£o clonados M vezes com muta√ß√µes.  Ap√≥s a muta√ß√£o, cada gene muda em um determinado intervalo com uma probabilidade de 10%.  Bem, isso foi repetido por v√°rias gera√ß√µes. <br>  N√£o h√° cruzamento, neste problema n√£o vejo sentido nele. </p><br><p>  No total, o n√∫mero m√°ximo poss√≠vel de trajet√≥rias por tick por jogador de futebol foi de cerca de 800, mas na verdade, na maioria dos casos, foi muito menor, porque  em alguns casos (por exemplo, quando em um futuro pr√≥ximo definitivamente n√£o conseguiremos tocar a bola), o movimento dos jogadores foi substitu√≠do por heur√≠sticas simples.  Al√©m disso, N, M e o n√∫mero de gera√ß√µes dependiam da situa√ß√£o no campo.  Primeiro de tudo, da dist√¢ncia at√© a bola.  Al√©m disso, o erro de c√°lculo √© interrompido antes do previsto (mas n√£o antes da 5¬™ gera√ß√£o) se uma trajet√≥ria com uma estimativa aceit√°vel for encontrada. </p><br><h3 id="makro">  Macro </h3><br><p>  O goleiro corre para o ponto em frente ao centro do gol.  Meus testes mostraram que √© melhor para mim jogar em p√© na frente do gol, e n√£o dentro deles, como a maioria dos jogadores no topo. </p><br><p>  A posi√ß√£o do ponto se desviou do centro, dependendo de v√°rios fatores: a posi√ß√£o e a dire√ß√£o do v√¥o da bola, o ponto em que a bola atingiu meu objetivo, se um objetivo √© planejado, a localiza√ß√£o do oponente atacante mais pr√≥ximo etc. </p><br><p>  Se a bola estiver do lado do oponente e voar em dire√ß√£o ao seu objetivo, podemos optar pelo nitro. </p><br><p>  Se meu goleiro conseguir acertar a bola mais cedo do que o atacante (mais algumas condi√ß√µes), o atacante ignora a bola e corre para um ponto no meio entre a bola e o gol do advers√°rio.  Passei por muitas op√ß√µes, onde exatamente para ele correr.  No meu caso, este funcionou melhor. </p><br><p>  Caso contr√°rio, se a bola estiver muito longe, o atacante corre em linha reta at√© o ponto de contato mais pr√≥ximo da bola com o ch√£o, no qual ele pode interceptar a bola (se n√£o tivermos tempo para o primeiro ponto de contato, verifique o pr√≥ximo, etc.) </p><br><p>  Caso contr√°rio (quando a bola chegar), o atacante corre para onde a fun√ß√£o de avalia√ß√£o diz a ele.  Sim, e tamb√©m, se o nitro estiver pr√≥ximo e pudermos busc√°-lo, n√≥s o selecionaremos. </p><br><p>  Em um jogo de 3x3, o segundo atacante tem mais chances de apontar para a bola e com menos corrida para a frente, esperando um passe do goleiro.  Mas se ele ainda funcionar, outro ponto ser√° escolhido - mais pr√≥ximo da linha central. </p><br><p>  Al√©m disso, cada tick simulou a bola 100 ticks para a frente com 100 microtics (com cache). </p><br><p>  Essa trajet√≥ria tem sido usada em muitos lugares.  Por exemplo: </p><br><ul><li>  Para determinar os pontos de toque da bola com o ch√£o </li><li>  Para descobrir se a bola amea√ßa meu objetivo e se o goleiro precisa ser alternado para o modo de simula√ß√£o </li></ul><br><p>  A mesma trajet√≥ria exata foi usada na simula√ß√£o das trajet√≥rias dos jogadores, para n√£o contar a bola todas as vezes.  Mas apenas at√© a primeira colis√£o da bola com qualquer jogador de futebol. </p><br><p>  Ali√°s, escrever Footballist era pregui√ßoso, as palavras Player, Robot eram reservadas por estrat√©gia, <br>  ent√£o minha classe de wrapper foi chamada simplesmente Cara :) </p><br><h3 id="simulyaciya">  Simula√ß√£o </h3><br><p>  Na maioria dos casos, foi com um micr√≥tico, mas em algumas situa√ß√µes mudou para o modo preciso com um grande n√∫mero de microtics (no in√≠cio era 100, depois foi reduzido para 50 em um jogo 2x2, porque os testes mostraram que a diferen√ßa nos resultados estava dentro da margem de erro e para 10 em 3x3, porque de outra forma voou para tempos limite). </p><br><p>  No modo preciso, eu mudei no momento do salto ou estou t√£o perto da bola que √© poss√≠vel uma colis√£o no pr√≥ximo tique.  Al√©m disso, havia tamb√©m uma massa de pequenas muletas, hacks, otimiza√ß√µes, nas quais eu mesmo n√£o entenderei. </p><br><p>  Por exemplo, a bola voadora ainda era simulada com 1 Mikrotik, mas se ap√≥s o pr√≥ximo Mikrotik vi uma colis√£o, ele voltou √† posi√ß√£o anterior e a simulou novamente com maior precis√£o. </p><br><p>  Al√©m disso, eu tamb√©m fingia ser outros jogadores (tanto meus quanto dos outros) se eles estivessem no ar (e, portanto, sua trajet√≥ria √© mais f√°cil de prever) ou estivessem pr√≥ximos da bola.  Para os oponentes, a vers√£o final usava uma vers√£o simplificada da minha pr√≥pria estrat√©gia de tomada de decis√£o, que era lan√ßada a cada 5 ticks (na maioria das vezes, n√£o permitia velocidade). </p><br><p>  Ao simular cada personagem, contei a mim mesmo, a bola e outros jogadores de futebol 40 pontos √† frente (meu limite no n√∫mero de a√ß√µes no gen√≥tipo) e depois simulei o mesmo n√∫mero de pontos em apenas uma bola. </p><br><h3 id="nitro">  Nitro </h3><br><p>  Simples a indecente. </p><br><p>  Na vers√£o final, o nitro √© sempre ativado, se estiver, se o jogador estiver no ar e se ele n√£o bater na bola nos √∫ltimos tiques. </p><br><p>  No come√ßo, sempre direcionei nitro para cima, mas depois tentei experimentar e a op√ß√£o de ir exatamente para o centro da bola funcionou melhor.  Eu tamb√©m tentei op√ß√µes para que a dire√ß√£o do nitro fosse escolhida pela gen√©tica. </p><br><p>  Funcionou muito pior.  Talvez devido √† falta de profundidade de pesquisa. </p><br><h3 id="funkciya-ocenki">  Fun√ß√£o de classifica√ß√£o </h3><br><p>  A soma das pontua√ß√µes para cada tick com atenua√ß√£o de 2% por tick. </p><br><p>  O maior peso, √© claro, tinha um objetivo.  V√°rias coisas influenciaram seu peso: </p><br><ul><li>  A dist√¢ncia da bola ao goleiro inimigo no momento do gol (quanto mais longe, melhor) </li><li>  Coordenada Y da bola (porque no topo do gol √© muito mais dif√≠cil acertar) </li><li>  A velocidade da bola ao longo do eixo Z (que √© direcionado para o gol do inimigo) </li></ul><br><p>  Ao me atacar, tudo √© exatamente o mesmo, apenas com o sinal oposto. </p><br><p>  Al√©m disso, para o atacante, a pontua√ß√£o geral dependia de: </p><br><ul><li>  Dist√¢ncias do jogador √† bola (para que ele corra at√© a bola mesmo que n√£o consiga acert√°-lo) </li><li>  Penalidade pelo salto (saltar apenas se houver tantos pontos que exceder√£o essa penalidade) </li><li>  Dist√¢ncias no pr√≥ximo tick da simula√ß√£o da bola para os advers√°rios </li><li>  Coordenadas da bola Y (quanto maior, menor a chance do inimigo de intercept√°-la) </li><li>  Cosseno do √¢ngulo entre a dire√ß√£o da bola e o centro do gol inimigo </li><li>  Sinalizar se eu toquei a bola </li><li>  Bandeira, se o inimigo tocou a bola </li><li>  B√¥nus para a sele√ß√£o de nitro </li></ul><br><p>  Al√©m disso, havia um pequeno b√¥nus por atingir um jogador inimigo.  Embora de fato, tenha acontecido, mas raramente. </p><br><p>  Para goleiro: </p><br><ul><li>  B√¥nus por dist√¢ncia da bola, velocidade da bola em Z, posi√ß√£o da bola em Y </li><li>  Penalidade pelo salto </li><li>  Grande penalidade por encontrar a bola na √°rea em frente ao meu gol </li><li>  A dist√¢ncia entre os inimigos e meus atacantes foi levada em considera√ß√£o (para que a bola voasse para longe dos inimigos, mas, se poss√≠vel, voasse mais perto dos meus atacantes) </li><li>  E mais algumas coisinhas. </li></ul><br><h3 id="machine-learning">  Aprendizado de m√°quina </h3><br><p>  Foi apenas um pouco em um dos ramos do git como um experimento.  Mas parece-me que vale a pena mencionar de qualquer maneira.  N√£o consegui trazer isso √† minha mente (e n√£o sei ao certo o que fazia sentido). </p><br><p>  Em geral, tentei prever com sua ajuda se o inimigo pode interceptar a bola com base nas posi√ß√µes e velocidades do inimigo e da bola.  Planejei usar isso na fun√ß√£o de avalia√ß√£o.  Penalize trajet√≥rias poss√≠veis de interceptar. </p><br><p>  Mas entendi imediatamente que n√£o podia pagar n√£o apenas uma rede neural, mas nada s√©rio, porque isso teria que ser feito 80 vezes por trajet√≥ria.  Bem, mesmo que sejam 40 ou 20, se nem todos os ticks forem contados, mas de qualquer forma, eu n√£o tinha reservas de tempo, ent√£o nem considerei essas op√ß√µes. </p><br><p>  Aqui est√° o que eu fiz: </p><br><p>  Eu corri v√°rios jogos com um bot modificado, nos quais, ao procurar uma trajet√≥ria, salvei dados sobre mim e a bola, bem como uma bandeira, se uma trajet√≥ria foi encontrada na qual intercepto a bola. </p><br><p>  Eu considerei todas as coordenadas relativas ao jogador de futebol.  I.e.  Eu sempre o tinha na coordenada [0,0,0], ent√£o mantive apenas 10 campos: a posi√ß√£o relativa da bola, o vetor de velocidade da bola, o vetor de velocidade de um jogador de futebol, a bandeira de intercepta√ß√£o bin√°ria.  Salvei o conjunto de dados apenas para a parte central do campo, porque  Percebi que algoritmos simples ainda n√£o funcionam e s√£o respons√°veis ‚Äã‚Äãpor placas. </p><br><p>  Em seguida, alimentei esse conjunto de dados DecisionTreeClassifier com max_depth = 7. A √°rvore treinada deu precis√£o, tanto quanto me lembro, da ordem de 90%. </p><br><p>  Em seguida, exportei a √°rvore para um conjunto de ifs (que DecisionTree √© essencialmente). </p><br><p>  Parecia algo assim: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_z)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= <span class="hljs-number"><span class="hljs-number">6.4765448570251465</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_y &lt;= -<span class="hljs-number"><span class="hljs-number">6.087389945983887</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= -<span class="hljs-number"><span class="hljs-number">20.188323974609375</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_x &lt;= <span class="hljs-number"><span class="hljs-number">13.032730102539062</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_rel_pos_y &lt;= -<span class="hljs-number"><span class="hljs-number">1.1829500198364258</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ball_vel_y &lt;= <span class="hljs-number"><span class="hljs-number">18.906089782714844</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ............................</span></span></code> </pre> <br><p>  Nessa fase, realizei os testes, n√£o vi nenhuma melhora e adiei o julgamento para mais tarde, que, devido √†s minhas aventuras, nunca chegou. </p><br><h3 id="shryodinbag">  Schroedinbag </h3><br><p>  Em algum lugar ap√≥s a primeira rodada, peguei esse animal raro em minha casa. </p><br><p>  Quem n√£o sabe, √© um bug t√£o grande que eles encontram apenas lendo o c√≥digo e, ap√≥s encontr√°-lo, o desenvolvedor se pergunta como o programa poderia funcionar.  E no meu caso, ela tamb√©m ficou no top 10. </p><br><p>  Em geral, o problema era que um construtor era chamado na fun√ß√£o de c√≥pia do gene, na qual um argumento opcional foi omitido contendo o valor desse gene.  Na aus√™ncia desse argumento, o valor foi selecionado aleatoriamente.  Assim, ao tentar copiar um gene, em vez de copiar, ele criou uma nova inst√¢ncia aleat√≥ria. </p><br><p>  De fato, em vez de gen√©tica, eu fiz uma pesquisa aleat√≥ria, porque cada marca simplesmente gerou v√°rias centenas de caminhos aleat√≥rios e selecionou o melhor. </p><br><p>  Ap√≥s a corre√ß√£o (que consiste em adicionar 2 caracteres ao c√≥digo), o jogo se tornou cerca de 3 vezes melhor. </p><br><h3 id="ritualnye-tancy">  Dan√ßa ritual </h3><br><p>  Em algum momento, notei que os jogadores √†s vezes saltam sem motivo, estando longe da bola, apesar da penalidade. </p><br><p>  A explica√ß√£o acabou sendo tal que contei o momento do salto com uma precis√£o de 100 microtics.  E √†s vezes acontecia que, exatamente no momento do salto, havia uma colis√£o da bola com a barra.  E, dependendo da precis√£o do c√°lculo precisamente neste tick, a trajet√≥ria proposta levou a um objetivo ou n√£o. </p><br><p>  Grosso modo, a bola voa para o gol do advers√°rio e bate no poste.  meu jogador de futebol, correndo do outro lado do campo, simula uma trajet√≥ria sem pular (com 1 mikrotik) e v√™ que a bola n√£o bate no gol. </p><br><p>  Em seguida, outra trajet√≥ria entra, com um salto exatamente no momento em que a bola bate na barra.  E como conto um tique com um salto de 100 Mikrotiks n√£o apenas para um jogador de futebol, mas tamb√©m para uma bola, o √¢ngulo de salto calculado da bola difere do √¢ngulo obtido no caminho com 1 microtik, e pode acontecer que a bola nessa trajet√≥ria mais precisa caia o port√£o. </p><br><p>  E, portanto, √© essa trajet√≥ria que ser√° selecionada e o bot ir√° pular. </p><br><p>  Em geral, realizando uma dan√ßa ritual com saltos, os jogadores namanizaram um objetivo :) </p><br><h3 id="killer-ficha">  Recurso assassino </h3><br><p>  Ela n√£o √© </p><br><h3 id="testirovanie">  Teste </h3><br><p>  Eu dirigi jogos intermin√°veis ‚Äã‚Äãem 8 threads (4 em cada computador e laptop).  Eu escolhi o n√∫mero de jogos para que fosse estatisticamente significativo. </p><br><p>  Com uma melhoria significativa na estrat√©gia, poderia ser satisfeita com meio mil objetivos no total, <br>  com corre√ß√µes menores, saiu para a noite e depois a conta chegou aos milhares. </p><br><h3 id="geneticheskiy-podbor-konstant">  Sele√ß√£o gen√©tica de constantes </h3><br><p>  Eu tentei antes da primeira rodada.  N√£o deu nada porque, para a gen√©tica, voc√™ precisa jogar um torneio em um grande n√∫mero de jogos. </p><br><p>  Tentei jogar 100.000 ticks, mas isso n√£o foi suficiente.  Com uma pequena diferen√ßa de for√ßa (e geralmente ao escolher constantes, esse √© exatamente o caso), o vencedor por 100 mil ticks depende muito do caso.  Voc√™ precisa jogar muito mais para ter certeza do vencedor.  E como n√£o podia deixar a sele√ß√£o por um dia ou mais, recusei esse empreendimento. </p><br><h1 id="v-zaklyuchenie">  Em conclus√£o </h1><br><p>  Agradecimentos tradicionais aos organizadores.  A tarefa foi interessante.  √â uma pena que eu tenha sido for√ßado a perder quase metade do campeonato e realmente n√£o fiz nada para nitro ou tr√™s jogadores. </p><br><p>  Como resultado, at√© o final, observei na caixa de areia como minha estrat√©gia vence no modo 2x2 sem nitro com uma pontua√ß√£o de 13: 2 contra qualquer Mr.Smile, que ficou em 3¬∫ lugar na final, e depois de alguns jogos perde para ele o mesmo 12: 2 no modo 3x3 com nitro :) </p><br><p>  E, claro, o v√≠deo do meu visualizador propriet√°rio: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/kh/hx/om/khhxombmg6eo4otune-_vdhdhbu.jpeg"></a> </p><br><p>  Somente voc√™ provavelmente ter√° que se despedir deste visualizador em futuros campeonatos. <br>  Cada vez que estou cada vez mais convencido de que, se voc√™ est√° se candidatando a lugares normais, a √∫nica op√ß√£o √© escrever em ... </p><br><p><img src="https://habrastorage.org/webt/gl/zj/1w/glzj1w_lztl_mhea9rqbs9rb5qq.jpeg"></p><br><p>  ... bem, voc√™ entendeu. </p><br><p>  Cansado de descansar na lentid√£o do Java e reduzir a for√ßa da estrat√©gia para cumprir o tempo previsto. </p><br><p>  Espero que algu√©m tenha encontrado algo interessante ou √∫til nesta minha obra com uma nota de car√°ter autobiogr√°fico :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440574/">https://habr.com/ru/post/pt440574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440562/index.html">Windows Phone - TUDO, √© de novo ou de novo</a></li>
<li><a href="../pt440564/index.html">Rede neural GPT-2 da OpenAI. In√≠cio r√°pido</a></li>
<li><a href="../pt440566/index.html">Acelerando sem obst√°culos ou conhecendo o SIMD</a></li>
<li><a href="../pt440568/index.html">Estamos escrevendo um aplicativo de aprendizado em Go e Javascript para avaliar o retorno real das a√ß√µes. Parte 2 - Testando o back-end</a></li>
<li><a href="../pt440570/index.html">Mapas de Sombra Reflexiva: Parte 2 - Implementa√ß√£o</a></li>
<li><a href="../pt440576/index.html">Altera√ß√µes importantes no CTE no PostgreSQL 12</a></li>
<li><a href="../pt440582/index.html">Os carros el√©tricos s√£o puxados para o fundo da corpora√ß√£o automobil√≠stica?</a></li>
<li><a href="../pt440584/index.html">O que h√° de errado com o Raspberry Pi</a></li>
<li><a href="../pt440586/index.html">Consenso Exonum: Como Funciona</a></li>
<li><a href="../pt440588/index.html">O MIT aprendeu a transmitir som com um laser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>