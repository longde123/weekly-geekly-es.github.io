<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∏Ô∏è üë©üèø üîÅ Modelo de arquitetura ‚ÄúTransa√ß√µes compartilhadas em macro para microsservi√ßos‚Äù üå∞ üë®üèø‚Äçüöí ü§üüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Postado por Denis Tsyplakov , arquiteto de solu√ß√µes, DataArt 

 Declara√ß√£o do problema 
 Um dos problemas ao criar arquiteturas de microsservi√ßos e, e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modelo de arquitetura ‚ÄúTransa√ß√µes compartilhadas em macro para microsservi√ßos‚Äù</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/446288/"><img src="https://habrastorage.org/webt/wn/ge/nc/wngencs0zvmck2rkwblk1hxldms.png"><br><br>  <i>Postado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Denis Tsyplakov</a> , arquiteto de solu√ß√µes, DataArt</i> <br><br><h2>  Declara√ß√£o do problema </h2><br>  Um dos problemas ao criar arquiteturas de microsservi√ßos e, especialmente, ao migrar uma arquitetura monol√≠tica para microsservi√ßos, geralmente s√£o transa√ß√µes.  Cada microsservi√ßo √© respons√°vel por seu pr√≥prio grupo de fun√ß√µes, possivelmente controla os dados associados a esse grupo e pode atender solicita√ß√µes de usu√°rios de forma aut√¥noma ou enviando solicita√ß√µes para outros microsservi√ßos.  Tudo isso funciona bem at√© precisarmos garantir a consist√™ncia dos dados controlados por diferentes microsservi√ßos. <a name="habracut"></a><br><br>  Por exemplo, nosso aplicativo funciona em algumas grandes lojas online.  Entre outras coisas, temos tr√™s √°reas de neg√≥cios separadas e pouco interconectadas: <br><br><ol><li>  Armaz√©m - o que, onde, como e por quanto tempo est√° armazenado, quantas mercadorias de um determinado tipo est√£o atualmente em estoque, etc. </li><li>  Envio de mercadorias - embalagem, remessa, rastreamento de entrega, an√°lise de reclama√ß√µes sobre atraso, etc. </li><li>  Realiza√ß√£o de relat√≥rios alfandeg√°rios sobre a movimenta√ß√£o de mercadorias se as mercadorias forem enviadas para o exterior (na verdade, n√£o sei se, nesse caso, √© necess√°rio elaborar algo especialmente, mas ainda assim ligarei os servi√ßos do estado ao processo para adicionar drama). </li></ol><br>  Cada uma dessas tr√™s √°reas inclui muitas fun√ß√µes independentes e pode ser representada como v√°rios microsservi√ßos. <br><br>  H√° um problema.  Suponha que uma pessoa comprou um produto, empacotou e enviou por correio.  Entre outras coisas, precisamos indicar que h√° menos uma unidade de mercadorias no armaz√©m, para observar que o processo de entrega de mercadorias foi iniciado e se as mercadorias s√£o enviadas, por exemplo, para a China, para cuidar dos pap√©is da alf√¢ndega.  Se o aplicativo travar (por exemplo, um n√≥ travar) no segundo ou terceiro est√°gio do processo, nossos dados chegar√£o a um estado inconsistente e apenas algumas dessas falhas poder√£o levar a problemas bastante desagrad√°veis ‚Äã‚Äãpara os neg√≥cios (por exemplo, uma visita dos funcion√°rios da alf√¢ndega). <br><br>  Em uma arquitetura monol√≠tica cl√°ssica desse tipo, o problema √© simples e elegantemente resolvido por transa√ß√µes no banco de dados.  Mas e se usarmos microsservi√ßos?  Mesmo se usarmos o mesmo banco de dados de todos os servi√ßos (o que n√£o √© muito elegante, mas, no nosso caso, √© poss√≠vel), trabalhar com esse banco de dados prov√©m de diferentes processos, e n√£o conseguiremos esticar a transa√ß√£o entre os processos. <br><br><h2>  Solu√ß√µes </h2><br>  O problema tem v√°rias solu√ß√µes: <br><br><ol><li>  Curiosamente, √†s vezes o problema pode ser ignorado.  Se sabemos que uma falha n√£o ocorre mais de uma vez por m√™s e a elimina√ß√£o manual das consequ√™ncias custa dinheiro aceit√°vel para os neg√≥cios, voc√™ n√£o pode prestar aten√ß√£o ao problema, por mais feio que seja.  N√£o sei se √© poss√≠vel ignorar as reivindica√ß√µes do servi√ßo aduaneiro, mas pode-se presumir que, mesmo sob certas circunst√¢ncias, isso √© poss√≠vel. </li><li> Compensa√ß√£o (n√£o se trata de compensa√ß√£o monet√°ria para a alf√¢ndega, por exemplo, voc√™ pagou uma multa) √© um grupo de v√°rias etapas que complicam a sequ√™ncia de processamento, mas permitem detectar e processar um processo com falha.  Por exemplo, antes de iniciar a opera√ß√£o, escrevemos para um servi√ßo especial que estamos iniciando a opera√ß√£o de remessa e, no final, marcamos que tudo terminou bem.  Em seguida, verificamos periodicamente se existem opera√ß√µes pendentes e, se houver, observando os tr√™s bancos de dados, tentamos levar os dados a um estado consistente.  Este √© um m√©todo completamente funcional, mas complica significativamente a l√≥gica de processamento, e fazer isso para cada opera√ß√£o √© bastante doloroso. </li><li>  Transa√ß√µes de duas fases, estritamente falando, a especifica√ß√£o XA +, que permite criar transa√ß√µes distribu√≠das em rela√ß√£o a aplicativos, √© um mecanismo muito pesado que poucas pessoas gostam e, mais importante, poucas pessoas podem configurar.  Al√©m disso, com microsservi√ßos leves, √© ideologicamente fracamente compat√≠vel. </li><li>  Em princ√≠pio, uma transa√ß√£o √© um caso especial do problema de consenso, e v√°rios sistemas de consenso distribu√≠dos podem ser usados ‚Äã‚Äãpara resolver o problema (grosso modo, tudo o que √© google com as palavras-chave paxos, jangada, tratador, etcd, consul).  Mas, na aplica√ß√£o pr√°tica de dados extensos e ramificados da atividade do armaz√©m, tudo isso parece ainda mais complicado do que transa√ß√µes em duas fases. </li><li>  Filas e eventual consist√™ncia (consist√™ncia a longo prazo) - dividimos a tarefa em tr√™s tarefas ass√≠ncronas, processamos os dados sequencialmente, passando-os entre os servi√ßos da fila para a fila e usamos o mecanismo de confirma√ß√£o de entrega.  Nesse caso, o c√≥digo n√£o √© muito complicado, mas h√° alguns pontos a serem lembrados: <br><ul><li>  A fila garante a entrega "uma ou mais vezes", ou seja, ao entregar a mesma mensagem, o servi√ßo deve lidar corretamente com essa situa√ß√£o e n√£o enviar as mercadorias duas vezes.  Isso pode ser feito, por exemplo, atrav√©s do UUID exclusivo do pedido. </li><li>  Os dados a qualquer momento ser√£o ligeiramente inconsistentes.  Ou seja, as mercadorias desaparecer√£o primeiro do dep√≥sito e somente com um pequeno atraso ser√° criado um pedido para envi√°-lo.  Mais tarde, os dados aduaneiros ser√£o processados.  Em nosso exemplo, isso √© completamente normal e n√£o causa problemas para os neg√≥cios, mas h√° casos em que esse comportamento de dados pode ser muito desagrad√°vel. </li><li>  Se, como resultado, o primeiro servi√ßo precisar retornar alguns dados ao usu√°rio, a sequ√™ncia de chamadas que finalmente entrega os dados ao navegador do usu√°rio poder√° ser bastante trivial.  O principal problema √© que o navegador envia solicita√ß√µes de forma s√≠ncrona e geralmente espera uma resposta s√≠ncrona.  Se voc√™ executar o processamento de solicita√ß√µes ass√≠ncronas, precisar√° criar entrega ass√≠ncrona da resposta para o navegador.  Classicamente, isso √© feito por meio de soquetes da web ou por solicita√ß√µes peri√≥dicas de novos eventos do navegador para o servidor.  Existem mecanismos, como o SocksJS, por exemplo, que simplificam alguns aspectos da constru√ß√£o desse link, mas ainda haver√° complexidade adicional. </li></ul></li></ol><br>  Na maioria dos casos, a √∫ltima op√ß√£o √© mais aceit√°vel.  Isso n√£o complica muito a solicita√ß√£o de processamento, embora funcione v√°rias vezes mais, mas, como regra, isso √© aceit√°vel para esse tipo de opera√ß√£o.  Tamb√©m requer uma organiza√ß√£o de dados um pouco mais complexa para eliminar solicita√ß√µes repetidas, mas tamb√©m n√£o h√° nada de super complicado. <br><br>  Esquematicamente, uma das op√ß√µes para processar transa√ß√µes usando filas e consist√™ncia Eventual pode ser assim: <br><br><ol><li>  O usu√°rio fez uma compra, uma mensagem sobre isso √© enviada para a fila (por exemplo, um cluster RabbitMQ ou, se trabalharmos no Google Cloud Platform - Pub / Sub).  A fila √© persistente, garante a entrega uma ou mais vezes e √© transacional, ou seja, se o servi√ßo que processa a mensagem cair repentinamente, a mensagem n√£o ser√° perdida, mas ser√° entregue para uma nova inst√¢ncia do servi√ßo novamente. </li><li>  A mensagem chega ao servi√ßo, que marca as mercadorias no armaz√©m como sendo preparadas para envio e, por sua vez, envia a mensagem "As mercadorias est√£o prontas para envio" para a fila. </li><li>  Na pr√≥xima etapa, o servi√ßo respons√°vel pela expedi√ß√£o recebe uma mensagem sobre a disponibilidade para expedi√ß√£o, cria uma tarefa de expedi√ß√£o e envia a mensagem "a expedi√ß√£o da mercadoria est√° planejada". </li><li>  O pr√≥ximo servi√ßo, depois de receber a mensagem de que o despacho est√° planejado, inicia o processo de documenta√ß√£o para alf√¢ndega. </li></ol><br>  Al√©m disso, cada mensagem recebida pelo servi√ßo √© verificada quanto √† exclusividade e, se uma mensagem com esse UUID j√° tiver sido processada, ela ser√° ignorada. <br><br>  Aqui, a (s) base (s) do banco de dados em cada momento est√° em um estado ligeiramente inconsistente, ou seja, as mercadorias no armaz√©m j√° est√£o marcadas como estando no processo de entrega, mas a tarefa de entrega em si ainda n√£o est√° l√°, aparecer√° em um ou dois segundos.  Mas, ao mesmo tempo, temos 99,999% (na verdade, esse n√∫mero √© igual ao n√≠vel de confiabilidade do servi√ßo de fila) garante que a tarefa de envio ser√° exibida.  Para a maioria das empresas, isso √© aceit√°vel. <br><br><h2>  Qual √© o artigo ent√£o? </h2><br>  No artigo, quero falar sobre outra maneira de resolver o problema da transacionalidade em aplicativos de microsservi√ßo.  Apesar de os microsservi√ßos funcionarem melhor quando cada servi√ßo possui seu pr√≥prio banco de dados, para sistemas pequenos e m√©dios, todos os dados, como regra, se encaixam facilmente em um banco de dados relacional moderno.  Isso √© verdade para quase qualquer sistema corporativo interno.  Ou seja, geralmente n√£o temos uma necessidade estrita de compartilhar dados entre diferentes m√°quinas f√≠sicas.  Podemos armazenar dados de diferentes microsservi√ßos em grupos n√£o relacionados de tabelas do mesmo banco de dados.  Isso √© especialmente conveniente se voc√™ estiver dividindo um aplicativo antigo e monol√≠tico em servi√ßos e j√° tiver dividido o c√≥digo, mas os dados ainda estiverem no mesmo banco de dados.  No entanto, o problema da divis√£o de transa√ß√µes ainda permanece - a transa√ß√£o est√° rigidamente ligada √† conex√£o de rede e, consequentemente, ao processo que abriu essa conex√£o, e temos processos separados.  Como ser <br><br>  Acima, descrevi v√°rias maneiras comuns de resolver o problema, mas quero oferecer outra maneira para um caso especial, quando todos os dados estiverem no mesmo banco de dados.  <b>N√£o recomendo tentar implementar</b> esse m√©todo <b>neste projeto</b> , mas √© curioso o suficiente para eu <b>apresent√°-</b> lo no artigo.  Bem, de repente, ser√° √∫til em algum caso especial. <br><br>  Sua ess√™ncia √© muito simples.  Uma transa√ß√£o est√° associada a uma conex√£o de rede, e o banco de dados realmente n√£o sabe quem est√° sentado nessa extremidade da conex√£o de rede aberta.  Ela n√£o se importa, o principal √© que os comandos corretos sejam enviados ao soquete.  √â claro que geralmente um soquete pertence exclusivamente a um processo no lado do cliente, mas vejo pelo menos tr√™s maneiras de contornar isso. <br><br><h3>  1. Altere o c√≥digo do banco de dados </h3><br>  No n√≠vel do c√≥digo do banco de dados para bancos de dados, cujo c√≥digo podemos alterar, criando nosso pr√≥prio conjunto de banco de dados, implementamos o mecanismo de transfer√™ncia de transa√ß√µes entre conex√µes.  Como isso pode funcionar do ponto de vista do cliente: <br><br><ol><li>  Come√ßamos a transa√ß√£o, fazemos algumas altera√ß√µes, √© hora de transferir a transa√ß√£o para o pr√≥ximo servi√ßo. </li><li>  Dizemos ao banco de dados que nos forne√ßa o UUID da transa√ß√£o e aguarde N segundos.  Se durante esse per√≠odo n√£o houver outra conex√£o com este UUID, reverta a transa√ß√£o; caso isso ocorra, transfira todas as estruturas de dados associadas √† transa√ß√£o para a nova conex√£o e continue trabalhando com ela. </li><li>  Passamos o UUID para o pr√≥ximo servi√ßo (ou seja, para outro processo, possivelmente para outra VM). </li><li>  Nele, abra uma conex√£o e d√™ o comando DB - continue a transa√ß√£o com o UUID especificado. </li><li>  Continuamos trabalhando com o banco de dados como parte de uma transa√ß√£o iniciada por outro processo. </li></ol><br>  Esse m√©todo √© o mais leve a ser usado, mas requer modifica√ß√£o do c√≥digo do banco de dados; os programadores de aplicativos geralmente n√£o fazem isso; s√£o necess√°rias muitas habilidades especiais.  Provavelmente, ser√° necess√°rio transferir dados entre os processos do banco de dados e os bancos de dados, cujo c√≥digo podemos alterar com seguran√ßa em geral, um - PostgreSQL.  Al√©m disso, isso funcionar√° apenas para servidores n√£o gerenciados; voc√™ n√£o o utilizar√° no RDS ou no Cloud SQL. <br><br>  Esquematicamente, fica assim: <br><br><img src="https://habrastorage.org/webt/lc/ok/ia/lcokianx0usjlvmfjo9wnlc1vhy.png"><br><br><h3>  2. Manipula√ß√£o de tomadas </h3><br>  A segunda coisa que vem √† mente √© a manipula√ß√£o sutil de conex√µes de banco de dados por soquetes.  Podemos criar um "proxy de soquete reverso", que direciona os comandos provenientes de v√°rios clientes para uma porta espec√≠fica em um fluxo de comando no banco de dados. <br><br>  De fato, esse aplicativo √© muito semelhante ao pgBouncer, apenas, al√©m de sua funcionalidade padr√£o, fazendo algumas manipula√ß√µes com o fluxo de bytes dos clientes e podendo substituir um cliente em vez de outro sob comando. <br><br>  N√£o gosto muito desse m√©todo, para sua implementa√ß√£o √© necess√°rio limpar os pacotes bin√°rios que circulam entre o servidor e os clientes.  E ainda requer muita programa√ß√£o do sistema.  Trouxe-o unicamente por ser completo. <br><br><h3>  3. Gateway JDBC </h3><br>  Podemos criar um driver JDBC de gateway - tomamos o driver JDBC padr√£o para um banco de dados espec√≠fico, seja PostgreSQL.  N√≥s agrupamos a classe e criamos interfaces HTTP para todos os seus m√©todos externos (n√£o HTTP, mas a diferen√ßa √© pequena).  Em seguida, criamos outro driver JDBC - uma fachada, que redireciona todas as chamadas de m√©todo para o gateway JDBC.  Na verdade, estamos cortando o driver existente em duas metades e conectando essas metades pela rede.  Temos o seguinte diagrama de componentes: <br><br><img src="https://habrastorage.org/webt/zo/f4/z9/zof4z9dt8p2segieoslko79fc_0.png"><br><br>  <i>Nota!: Como podemos ver, as tr√™s op√ß√µes s√£o semelhantes, a √∫nica diferen√ßa √© em que n√≠vel transferimos a conex√£o e quais ferramentas usamos para isso.</i> <i><br></i> <br><br>  Depois disso, ensinamos nosso driver a fazer essencialmente o mesmo truque com a transa√ß√£o UUID descrita no m√©todo 1. <br><br>  No c√≥digo do aplicativo Java, o uso desse m√©todo pode ser assim. <br><br><h3>  Servi√ßo A - in√≠cio da transa√ß√£o </h3><br>  Abaixo est√° o c√≥digo de algum servi√ßo que inicia uma transa√ß√£o, faz altera√ß√µes no banco de dados e o passa para outro servi√ßo para conclu√≠-lo.  No c√≥digo, usamos o trabalho direto com classes JDBC.  Obviamente, ningu√©m faz isso em 2019, mas por uma quest√£o de simplicidade, o c√≥digo √© simplificado. <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    , ,  ‚Äú‚Äù //   Class.forName("org.postgresql.FacadeDriver"); var connection = DriverManager.getConnection( "jdbc:postgresqlfacade://hostname:port/dbname","username", "password"); //  -    statement = dbConnection.createStatement(); var statement.executeUpdate(‚Äúinsert ...‚Äù); /* ,        . transactionUUID(int)  -,     ,   JDBC gateway-.  ResultSet        Varchar,  UUID.            .   ,         UUID.  60 ‚Äî  ,    .        , , JDBCTemplate.      ResultSet */ var rs = statement.executeQuery(‚Äúselect transactionUUID(60)‚Äù); String uuid = extractUUIDFromResultSet(rs); //      remoteServiceProxy.continueProcessing(uuid, otherParams); //          //     . closeEverything(); return;</span></span></code> </pre> <br><h3>  Servi√ßo B - conclus√£o da transa√ß√£o </h3><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//     ,     // remoteServiceProxy.continueProcessing(...) //     . Class.forName("org.postgresql.FacadeDriver"); var connection = DriverManager.getConnection( "jdbc:postgresqlfacade://hostname:port/dbname","username", "password"); //     Gateway JDBC,    // .  continue transaction    ,   // gateway JDBC statement = dbConnection.createStatement(); statement.executeUpdate(‚Äúcontinue transaction ‚Äù+uuid); // ,    ,      //      statement.executeUpdate(‚Äúupdate ..."); //   connection.commit(); return;</span></span></code> </pre> <br><h2>  Intera√ß√£o com outros componentes e estruturas </h2><br>  Considere os poss√≠veis efeitos colaterais de uma solu√ß√£o arquitet√¥nica desse tipo. <br><br><h3>  Pool de conex√£o </h3><br>  Como, na realidade, teremos um pool de conex√£o real dentro do gateway JDBC - √© melhor desativar os pools de conex√£o nos servi√ßos, pois eles capturam e mant√™m uma conex√£o dentro do servi√ßo que poderia ser usado por outro servi√ßo. <br><br>  Al√©m disso, ap√≥s receber o UUID e aguardar a transfer√™ncia para outro processo, a conex√£o se torna essencialmente inoperante e, do ponto de vista do JDBC do frontend, fecha automaticamente e, do ponto de vista do JDBC do gateway, deve ser realizada sem dar a ningu√©m que n√£o seja quem vir√° com o UUID desejado. <br><br>  Em outras palavras, o gerenciamento duplo do conjunto de conex√µes no Gateway JDBC e em cada um dos servi√ßos pode produzir erros sutis e desagrad√°veis. <br><br><h3>  Jpa </h3><br>  Com o JPA, vejo dois problemas poss√≠veis: <br><br><ol><li>  Gerenciamento de transa√ß√µes.  Ao confirmar uma JPA, o mecanismo pode pensar que salvou todos os dados, enquanto n√£o foi salvo.  Provavelmente, o gerenciamento manual de transa√ß√µes e o flush () antes de transferir a transa√ß√£o devem resolver o problema. </li><li>  √â prov√°vel que o cache de segundo n√≠vel funcione incorretamente, mas em sistemas distribu√≠dos seu uso √© limitado em qualquer caso. </li></ol><br><h3>  Transa√ß√µes de primavera </h3><br>  O mecanismo de gerenciamento de transa√ß√µes Spring, talvez, n√£o possa ser ativado e voc√™ precisar√° gerenci√°-los manualmente.  Tenho quase certeza de que ele pode ser expandido (por exemplo, para escrever um escopo personalizado), mas para ter certeza, precisamos estudar como a extens√£o de transa√ß√µes da primavera est√° organizada l√°, mas ainda n√£o a procurei. <br><br><h2>  Pr√≥s e contras </h2><br><h3>  Pr√≥s </h3><br><ul><li>  Praticamente n√£o requer modifica√ß√£o do c√≥digo monol√≠tico existente ao serrar. </li><li>  Voc√™ pode escrever transa√ß√µes complexas entre servidores sem praticamente nenhuma complexidade de c√≥digo. </li><li>  Permite fazer o rastreamento entre servi√ßos da execu√ß√£o da transa√ß√£o. </li><li>  A solu√ß√£o √© bastante flex√≠vel, voc√™ pode usar transa√ß√µes cl√°ssicas em que a distribui√ß√£o n√£o √© necess√°ria e compartilhar a transa√ß√£o apenas nas opera√ß√µes em que a intera√ß√£o entre servi√ßos √© necess√°ria. </li><li>  A equipe do projeto n√£o √© obrigada a dominar for√ßosamente as novas tecnologias.  As novas tecnologias s√£o, obviamente, boas, mas a tarefa - √© imperativa e urgente (at√© ontem!) Ensinar a 20 desenvolvedores o conceito de constru√ß√£o de sistemas reativos - pode ser muito trivial.  No entanto, n√£o h√° garantia de que todas as 20 pessoas concluam o treinamento a tempo. </li></ul><br><h3>  Contras </h3><br><ul><li>  N√£o escalon√°vel e, de fato, n√£o modular no n√≠vel do banco de dados, em contraste com uma solu√ß√£o em fila.  Voc√™ ainda tem um banco de dados no qual todas as consultas e toda a carga convergem.  Nesse sentido, a solu√ß√£o √© sem sa√≠da: se voc√™ desejar aumentar a carga posteriormente ou tornar a solu√ß√£o modular de acordo com os dados, precisar√° refazer tudo. </li><li>  Voc√™ deve ter muito cuidado ao transferir uma transa√ß√£o entre processos, especialmente processos escritos em estruturas.  As sess√µes t√™m suas pr√≥prias configura√ß√µes e, para v√°rias estruturas, uma mudan√ßa repentina na conex√£o com o banco de dados pode levar √† opera√ß√£o incorreta.  Veja, por exemplo, configura√ß√µes de sess√£o e transa√ß√µes para o PostgreSQL. </li><li>  Quando contei a id√©ia no bate-papo de nosso arquiteto local sobre DataArt, a primeira coisa que meus colegas me perguntaram foi se eu estava bebendo (n√£o, n√£o estou bebendo!).  Mas admito que a id√©ia, digamos, n√£o √© a mais comum, e se voc√™ a implementar em seu projeto, parecer√° muito incomum para os outros participantes. </li><li>  Requer um driver JDBC customizado.  Escrever leva tempo, voc√™ precisa depur√°-lo, procurar erros, incluindo aqueles causados ‚Äã‚Äãpor erros de comunica√ß√£o na rede, etc. </li></ul><br><h2>  Advert√™ncia </h2><br>  Eu os aviso mais uma vez: <b>n√£o tente repetir esse truque</b> <s>em casa</s> neste projeto, a menos que voc√™ tenha uma explica√ß√£o muito clara do porqu√™ voc√™ precisa dele e evid√™ncias convincentes de que n√£o h√° outra maneira. <br><br>  Tudo desde o primeiro de abril! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446288/">https://habr.com/ru/post/pt446288/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446278/index.html">O papel do sistema IGF-1 na modula√ß√£o da longevidade: contradi√ß√µes e um novo entendimento na perspectiva dos centen√°rios</a></li>
<li><a href="../pt446280/index.html">Se√ß√£o de Ci√™ncias da DUMP: expanda seus horizontes</a></li>
<li><a href="../pt446282/index.html">Como implantar rapidamente o HotSpot com os requisitos das leis da Federa√ß√£o Russa?</a></li>
<li><a href="../pt446284/index.html">O que √© ser um l√≠der de equipe</a></li>
<li><a href="../pt446286/index.html">Hacking na Gr√©cia Antiga: resultados do est√°gio online do NeoQUEST-2019</a></li>
<li><a href="../pt446292/index.html">Voc√™ n√£o estava olhando l√°: como encontrar funcion√°rios para o projeto em suporte t√©cnico</a></li>
<li><a href="../pt446296/index.html">Imortalidade biol√≥gica, coloniza√ß√£o de Marte, Amish, EC1863 e direitos autorais. Cap√≠tulo 1. E o cora√ß√£o do cyborg bate</a></li>
<li><a href="../pt446298/index.html">Uma ferramenta simples para come√ßar a usar a IA na tomada de decis√µes</a></li>
<li><a href="../pt446300/index.html">Como coordenar o voo da sonda na estratosfera (o que encontraremos na pr√°tica no lan√ßamento)</a></li>
<li><a href="../pt446302/index.html">9 cita√ß√µes de Habraseminar 2019 para blogueiros, empreendedores e RH</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>