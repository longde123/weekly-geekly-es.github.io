<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ ๐ฏ ๐ ุจุงูุช ุขูุฉ ุงูุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุฌุฒุก 4) โฌ๏ธ ๐ต ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฑุฉ ุฃุฎุฑู ุงููุจุงูุบุฉ ูู ุชูุฏูุฑ ุญุฌู ุงูููุงู! ููุฏ ุฎุทุทุช ุฃู ุชููู ูุฐู ูู ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ ุ ุญูุซ ุณูููู ุจุนูู ูุชุฑุฌู ููุฌุฑู ุงูุงุฎุชุจุงุฑุงุช. ููู ุชุจูู ุฃู ุญุฌู ุงูุตูุช ูุจูุฑ ุ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจุงูุช ุขูุฉ ุงูุญุตู (ูููุณ ููุท) ูู ุฃูุฑููุง ุงูุฃุตููุฉ (ุฌุฒุก 4)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437466/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/a59/e93/dbba59e932ecdb4b0c28896a7e6fc3e3.jpg" alt="Fort Byte Car (ูุฃูุซุฑ) ุฃูุฑููุง ุงูุฃุตููุฉ"><br><br>  ููุฑุฉ ุฃุฎุฑู ุงููุจุงูุบุฉ ูู ุชูุฏูุฑ ุญุฌู ุงูููุงู!  ููุฏ ุฎุทุทุช ุฃู ุชููู ูุฐู ูู ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ ุ ุญูุซ ุณูููู ุจุนูู ูุชุฑุฌู ููุฌุฑู ุงูุงุฎุชุจุงุฑุงุช.  ููู ุชุจูู ุฃู ุญุฌู ุงูุตูุช ูุจูุฑ ุ ููุฑุฑุช ุชูุณูู ุงูููุงูุฉ ุฅูู ูุณููู. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณููุนู ูุง ููุฑุจ ูู ุฌููุน ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ูููุชุฑุฌู.  ุณูู ูุฃุชู ุฅูู ุงูุญูุงุฉ ุ ูุณูููู ูู ุงููููู ูุชุงุจุฉ ูุชุฌููุน ูุชูููุฐ ุชุนูููุงุช ุจุฑูุฌูุฉ ุฎุทูุฑุฉ ููุบุงูุฉ.  ูุณููุนู ุงูุงุฎุชุจุงุฑ ูู ุงูุฌุฒุก ุงูุชุงูู.  (ุจุงูููุงุณุจุฉ ุ ุงูุฃุฌุฒุงุก ุงูุณุงุจูุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุญุฏ</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุซูุงู</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุซูุงุซุฉ</a> ). <br><br>  ุฃูุง ุฃูุชุจ ูุฃูู ูุฑุฉ ูู ุญุจุฑู ุ ูุฑุจูุง ูุง ูููู ุงูุฃูุฑ ุนูู ูุง ูุฑุงู ุฏุงุฆููุง.  ูู ุฑุฃูู ุ ุชุจูู ุฃู ุงููุงุฏุชูู 2 ู 3 ูุงูุช ุฌุงูุฉ ุฅูู ุญุฏ ูุง ุ ูุงููุซูุฑ ูู ุงูููุฏ ุ ููุตู ูููู.  ูุฐู ุงููุฑุฉ ุณุฃุญุงูู ุงูููุงู ุจุดูุก ูุฎุชูู ุ ูุงูุชุฑููุฒ ุนูู ูุตู ุงูุฃููุงุฑ ููุณูุง.  ุญุณููุง ุ ุงูููุฏ ... ุงูููุฏ ุ ุจุงูุทุจุน!  ุงูุฐู ูุฑูุฏ ุฃู ูููู ุฌูุฏุง ุ ูุฅู ูุฐู ุงููุฑุตุฉ ุณุชููู.  ูู ูุซูุฑ ูู ุงูุญุงูุงุช ุ ุณูู ุฃุถุน ุงูููุฏ ุชุญุช ุงูููุณุฏ.  ูุจุงูุทุจุน ุ ููููู ุฏุงุฆููุง ุฅููุงุก ูุธุฑุฉ ุนูู ุงููุตุฏุฑ ุงููุงูู ุนูู ุฌูุซุจ. <br><br>  ุณูุณุชูุฑ ุงููุชุฑุฌู ูู ุงููุชุงุจุฉ ูุจุนุถ ุงูููุช ูู ุงููุฌูุน ุ ูููู ุจุนุฏ ุฐูู ูุฐูุจ ุฅูู ุงูุญุตู ููุณุชูุฑ ูู ูุชุงุจุฉ ุงููุชุฑุฌู ุนูู ุฃููุณูุง.  ุณูู ูุดุจู ูุฐุง ุงูุจุงุฑูู ูููุดุงูุณูู ุ ุงูุฐู ุณุญุจ ููุณู ูู ุงูุดุนุฑ ูู ุงููุณุชููุน.  ููู ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ุณุฃุดุฑุญ ููููุฉ ุนูู ุงููุชุฑุฌู ุนูู ุงูุญุตู.  ูุฑุญุจุง ุจูู ูู ุงููุท! <br><a name="habracut"></a><br><h4 style=";text-align:right;direction:rtl">  ููู ูุนูู ุงููุชุฑุฌูุ </h4><br>  ุชุชููู ุงูุฐุงูุฑุฉ ูู ุงูุญุตู ูู ุฌุฒุก ูุณุชูุฑ ูุชู ููู ุชุฑุชูุจ ุฅุฏุฎุงูุงุช ุงููุงููุณ ุจุงูุชุณูุณู.  ุจุนุฏ ุงูุงูุชูุงุก ูููุง ุชุชุจุนูุง ูุณุงุญุฉ ุฎุงููุฉ ูู ุงูุฐุงูุฑุฉ.  ูุดุงุฑ ุฅูู ุงูุจุงูุช ุงูุญุฑ ุงูุฃูู ุจูุงุณุทุฉ ุงููุชุบูุฑ h.  ููุงู ุฃูุถูุง ุงููููุฉ ุงููุณุชุฎุฏูุฉ ุบุงูุจูุง ุ ูุงูุชู ุชุฏูุน ุนููุงู ุงูุจุงูุชุฉ ุงููุฌุงููุฉ ุงูุฃููู ุนูู ุงูููุฏุณ ุ ููู ูุตููุฉ ุจูู ุจุณุงุทุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs">: here h @ ;</code> </pre> <br><img src="https://habrastorage.org/webt/bd/eg/sq/bdegsqg7t06egwbvxoib9lqk_nc.png"><br><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ูููุฉ ุงูุชุฎุตูุต ุ ูุงูุชู ุชุญุชูุธ ุจุนุฏุฏ ูุญุฏุฏ ูู ุงูุจุงูุชุงุช ุนู ุทุฑูู ุชุญุฑูู ุงููุคุดุฑ h.  ูููู ุชุนุฑูู ูููุฉ ุงูุชุฎุตูุต ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: allot h +! ;</code> </pre> <br>  ูู ุงููุงูุน ุ ูุณุชุฎุฏู ุงููุชุฑุฌู ูุถุน ูุชุฑุฌู ุฎุงุต ุจุงูุฅุถุงูุฉ ุฅูู ุจุนุถ ุงููููุงุช ุงูุฎุงุตุฉ.  ูุฐูู ุ ูุน ุฌููุฉ ูุงุญุฏุฉ ุ ููููู ูุตู ูุจุฏุฃ ุงููุชุฑุฌู ุงููุงูู ูู ุงูุญุตู.  ูุชู ุชุญุฏูุฏ ูุถุน ุงููุชุฑุฌู ุงูุฐู ูุนูู ููู ุจูุงุณุทุฉ ูุชุบูุฑ ุงูุญุงูุฉ.  ุฅุฐุง ูุงู ุงูุตูุฑ ุ ุซู ูุชู ุชุนููู ูุถุน ุงูุชูููุฐ ุ ูุฅูุง - ูุถุน ุงูุชุฑุฌูุฉ.  ูุญู ุนูู ุฏุฑุงูุฉ ุจุงููุนู ุจูุถุน ุงูุชูููุฐ ุ ุญูุซ ูุชู ุจุจุณุงุทุฉ ุชูููุฐ ุงููููุงุช ูู ุงููุฎุฒู ุงููุคูุช ุงูุฅุฏุฎุงู ูุงุญุฏ ุชูู ุงูุขุฎุฑ.  ูููู ูู ูุถุน ุงูุชุญููู ุงูุจุฑูุฌู ุ ูุง ูุชู ุชูููุฐูุง ุ ูููู ูุชู ุชุฌููุนูุง ูู ุงูุฐุงูุฑุฉ ุจูุงุณุทุฉ ุงููุคุดุฑ h.  ููููุง ูุฐูู ุ ูุชุญุฑู ุงููุคุดุฑ ููุฃูุงู. <br><br>  ูู ุงูุญุตู ุงูููุงุณููู ุ ูุชู ุงุณุชุฎุฏุงู ูููุฉ "ุ" ูุชุฌููุน ูููุฉ ุนุฏุฏ ุตุญูุญ ุ ูุชู ุงุณุชุฎุฏุงู ูููุฉ "c" ุ ูุชุฌููุน ุจุงูุช.  ูุณุชุฎุฏู ูุธุงููุง ููููุง ุฐุงุช ุฃุนูุงู ุจุชุงุช ูุฎุชููุฉ (8 ุ 16 ุ 32 ุ 64) ุ ูุจุงูุชุงูู ุ ุณูููู ุจุฅุถุงูุฉ ุงููููุงุช "w" ู "i".  ูุตูุน ุฃูุถูุง ุงููููุฉ "str" โโุ ูุงูุชู ุณุชููู ุจุชุฑุฌูุฉ ุงูุณูุณูุฉ ุ ูุน ุฃุฎุฐ ูููุชูู ูู ุงููุฌููุนุฉ - ุนููุงู ุงูุณูุณูุฉ ูุทูููุง. <br><br>  ูุชู ุงุณุชุฎุฏุงู ูููุงุช ูุชุฑุฌู ุฎุงุต ูุชุดููู ููุงูู ุงูุชุญูู.  ูุฐู ูู ุงููููุงุช ุฅุฐุง ุ ุซู ุ ุชูุนู ุ ุญููุฉ ุ ูุบูุฑูุง.  ูุชู ุชูููุฐ ูุฐู ุงููููุงุช ุญุชู ูู ูุถุน ุงูุชุฑุฌูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุงููููุฉ ุฅุฐุง ุฌูุนุช ุฃูุฑ ุจุงูุช ูุฑุน ุงูุดุฑุทู (ุ Nbranch) ูู ุงูุชูููุฐ.  ุจุญูุซ ูุนุฑู ุงููุธุงู ุงููููุงุช ุงูุชู ูุฌุจ ุชูููุฐูุง ูู ูุถุน ุงูุชุฑุฌูุฉ ุ ูููุณ ุงููุชุฑุฌูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุงูุนูุงูุฉ ุงูููุฑูุฉ (ุนูุงูุฉ).  ูุฏููุง ุจุงููุนู ูู ุญูู ุงูุนูู ูุฅุฏุฎุงู ุงููุงููุณ.  ูู ุดูุฑุฉ ูุตุฏุฑ ุงููุฌููุน ุ ูุทูู ุนููู f_immediate.  ูุชุนููู ูุฐู ุงูุนูุงูุฉ ุ ุงุณุชุฎุฏู ุงููููุฉ ููุฑูุง.  ูุง ููุฌุฏ ูุฏูู ูุนููุงุช ุ ูุชู ุชุนููู ุงูุนูู ุงูููุฑู ูู ุงููููุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุงููุณ. <br><br>  ุงูุขู ุฏุนูุง ููุชูู ูู ุงููุธุฑูุฉ ุฅูู ุงูููุงุฑุณุฉ! <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุชุญุถูุฑ </h4><br>  ูู ุงูุจุฏุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุจุนุถ ุฃูุงูุฑ ุงูุจุงูุช ุงูุจุณูุทุฉ ูู ูุบุฉ ุงูุชุฌููุน ุงูุชู ูุญุชุงุฌูุง.  ูููุง ููู: ุชุญุฑูู (ูุณุฎ ููุทูุฉ ุงูุฐุงูุฑุฉ) ุ ูููุก (ุชุนุจุฆุฉ ูุณุงุญุฉ ุงูุฐุงูุฑุฉ) ุ ูุนูููุงุช ุงูุจุช (ู ุ ุฃู ุ xor ุ ุนูุณ) ุ ุฃูุงูุฑ ุฅุฒุงุญุฉ ุงูุจุช (rshift ุ lshift).  ุฏุนููุง ููุนู ููุณ rpick (ูุฐุง ูู ููุณ ุงูุงุฎุชูุงุฑ ุ ููู ูุนูู ููุท ูุน ุฑุตุฉ ุงูุนูุฏุฉ ุ ูููุณ ุฑุตุฉ ุงูุจูุงูุงุช). <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฐู ุงูุฃูุงูุฑ ุจุณูุทุฉ ููุบุงูุฉ ุ ูุฅููู ุฑูุฒูุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_move = <span class="hljs-number"><span class="hljs-number">0x66</span></span> bcmd_move: pop rcx pop rdi pop rsi repz movsb jmp _next b_fill = <span class="hljs-number"><span class="hljs-number">0x67</span></span> bcmd_fill: pop rax pop rcx pop rdi repz stosb jmp _next b_rpick = <span class="hljs-number"><span class="hljs-number">0x63</span></span> bcmd_rpick: pop rcx push [rbp + rcx * <span class="hljs-number"><span class="hljs-number">8</span></span>] jmp _next b_and = <span class="hljs-number"><span class="hljs-number">0x58</span></span> bcmd_and: pop rax <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> [rsp], rax jmp _next b_or = <span class="hljs-number"><span class="hljs-number">0x59</span></span> bcmd_or: pop rax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> [rsp], rax jmp _next b_xor = <span class="hljs-number"><span class="hljs-number">0x5A</span></span> bcmd_xor: pop rax xor [rsp], rax jmp _next b_invert = <span class="hljs-number"><span class="hljs-number">0x5B</span></span> bcmd_invert: notq [rsp] jmp _next b_rshift = <span class="hljs-number"><span class="hljs-number">0x5C</span></span> bcmd_rshift: pop rcx <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rcx, rcx jz _next <span class="hljs-number"><span class="hljs-number">1</span></span>: shrq [rsp] dec rcx jnz <span class="hljs-number"><span class="hljs-number">1b</span></span> jmp _next b_lshift = <span class="hljs-number"><span class="hljs-number">0x5D</span></span> bcmd_lshift: pop rcx <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> rcx, rcx jz _next <span class="hljs-number"><span class="hljs-number">1</span></span>: shlq [rsp] dec rcx jnz <span class="hljs-number"><span class="hljs-number">1b</span></span> jmp _next</code> </pre> </div></div><br>  ูุง ุชุฒุงู ุจุญุงุฌุฉ ูุฌุนู ูููุฉ ูููุฉ.  ูุฐุง ูู ููุณ ุงูููู ุ ูููู ูุญุฏุฏ ูุญุฏุฏ ูุญุฏุฏ ุนูู ุงูููุฏุณ.  ูุง ุฃูุฏู ุงูุฑูุฒ ุ ุจู ูููู ุงูุนุซูุฑ ุนููู ูู ุงููุตุฏุฑ.  ููุฏ ููุช ุจูุณุฎ / ูุตู ุงููููุงุช blworld ูุงุณุชุจุฏุงููุง ุจุฃูุงูุฑ ุงูููุงุฑูุฉ. <br><br>  ูู ุงูุฎุชุงู ุ ูุฌุนู ุงููููุฉ syscall.  ูุน ุฐูู ุ ุณูููู ูู ุงููููู ุงูููุงู ุจุนูููุงุช ุงููุธุงู ุงูููููุฏุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุนูู ูุน ุงููููุงุช.  ูู ูุนูู ูุซู ูุฐุง ุงูุญู ุฅุฐุง ูุงู ุงุณุชููุงู ุงููุธุงู ุงูุฃุณุงุณู ูุทููุจูุง.  ููู ูุฐุง ุงููุธุงู ูุณุชุฎุฏู ุงูุขู ููุงุฎุชุจุงุฑุงุช ุ ูุฐุง ููููู ูุฐูู ูู ุงูููุช ุงูุญุงูู.  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูููู ุชุญููู ุฌููุน ุงูุนูููุงุช ุฅูู ุฃูุงูุฑ ุจุงูุช ุ ูููุณ ูู ุงูุตุนุจ ุนูู ุงูุฅุทูุงู.  ุณููุจู ุงูุฃูุฑ syscall 6 ูุนููุงุช ูุงุณุชุฏุนุงุก ุงููุธุงู ูุฑูู ุงูุงุชุตุงู ูู ุงูููุฏุณ.  ุณูุนูุฏ ูุนููุฉ ูุงุญุฏุฉ.  ูุชู ุชุญุฏูุฏ ุชุนูููุงุช ุงููุนููุฉ ููููุฉ ุงูุฅุฑุฌุงุน ุจูุงุณุทุฉ ุฑูู ุงุณุชุฏุนุงุก ุงููุธุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_syscall = <span class="hljs-number"><span class="hljs-number">0xFF</span></span> bcmd_syscall: sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> mov [rbp], r8 pop rax pop r9 pop r8 pop r10 pop rdx pop rsi pop rdi syscall push rax mov r8, [rbp] add rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> jmp _next</code> </pre><br>  ูุงูุขู ุฏุนูุง ููุชูู ูุจุงุดุฑุฉ ุฅูู ุงููุชุฑุฌู. <br><br><h4 style=";text-align:right;direction:rtl">  ูุชุฑุฌู </h4><br>  ูููู ุจุฅูุดุงุก ุงููุชุบูุฑ h ุ ูู ุดูุก ุจุณูุท ููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item h h: .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre>  ุณููุชุจ ุงูุชููุฆุฉ ูู ุฎุท ุงูุจุฏุงูุฉ: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta"># forth last_item context @ ! h dup 8 + swap ! quit start: .byte b_call16 .word forth - . - 2 .byte b_call16 .word last_item - . - 2 .byte b_call16 .word context - . - 2 .byte b_get .byte b_set .byte b_call16 .word h - . - 2 .byte b_dup, b_num8, b_add, b_swap, b_set .byte b_quit</span></span></code> </pre><br>  ููุฌุนู ุงููููุฉ ููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item here .byte b_call8, h - . - <span class="hljs-number"><span class="hljs-number">1</span></span> .byte b_get .byte b_exit</code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุฐูู ูููุงุช ูุชุฌููุน ุงูููู: "ุชุฎุตูุต" ู "c" ุ "w" ุ "i" ุ "ุ" ุ "str"</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : allot h +! ; item allot allot: .byte b_call8, h - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_setp, b_exit # : , here ! <span class="hljs-number"><span class="hljs-number">8</span></span> allot ; item <span class="hljs-string"><span class="hljs-string">","</span></span> .byte b_call8, here - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_set, b_num8, b_call8, allot - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_exit # : i, here i! <span class="hljs-number"><span class="hljs-number">4</span></span> allot ; item <span class="hljs-string"><span class="hljs-string">"i,"</span></span> .byte b_call8, here - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_set32, b_num4, b_call8, allot - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_exit # : w, here w! <span class="hljs-number"><span class="hljs-number">2</span></span> allot ; item <span class="hljs-string"><span class="hljs-string">"w,"</span></span> .byte b_call8, here - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_set16, b_num2, b_call8, allot - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_exit # : c, here c! <span class="hljs-number"><span class="hljs-number">1</span></span> allot ; item <span class="hljs-string"><span class="hljs-string">"c,"</span></span> .byte b_call8, here - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_set8, b_num1, b_call8, allot - . - <span class="hljs-number"><span class="hljs-number">1</span></span>, b_exit # : str, dup -rot dup c, here swap move <span class="hljs-number"><span class="hljs-number">1</span></span>+ h +!; item <span class="hljs-string"><span class="hljs-string">"str,"</span></span> c_str: .byte b_dup, b_mrot, b_dup callb c_8 callb here .byte b_swap, b_move callb h .byte b_setp .byte b_exit</code> </pre></div></div><br>  ุงูุขู ููุฌุนู ูุชุบูุฑ ุงูุญุงูุฉ ููููุชูู ููุชุญูู ูู ูููุชู: "[" ู "]".  ุนุงุฏุฉ ูุง ุชุณุชุฎุฏู ูุฐู ุงููููุงุช ูุฃุฏุงุก ุดูุก ูู ููุช ุงูุชุฌููุน.  ูุฐูู ุ ุชููู ุงููููุฉ "[" ุจุฅููุงู ุชุดุบูู ูุถุน ุงูุชุฑุฌูุฉ ุ ูุชููู ุงููููุฉ "]" ุจุชุดุบููู.  ููู ูุง ุดูุก ูููุนูู ูู ุงูุงุณุชุฎุฏุงู ูู ุญุงูุงุช ุฃุฎุฑู ุนูุฏูุง ูููู ูู ุงูุถุฑูุฑู ุชุดุบูู ูุถุน ุงูุชุฑุฌูุฉ ุฃู ุฅููุงูู.  ุณุชููู ุงููููุฉ "[" ูู ุฃูู ูููุฉ ููุง ุจูุง ุนูุงูุฉ ููุฑูุฉ.  ูุฅูุง ุ ููู ูููู ูุงุฏุฑูุง ุนูู ุฅููุงู ุชุดุบูู ูุถุน ุงูุชุฑุฌูุฉ ุ ุญูุซ ุณูุชู ุชุฌููุนู ุ ูููุณ ุชูููุฐู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item state .byte b_var0 .quad <span class="hljs-number"><span class="hljs-number">0</span></span> item <span class="hljs-string"><span class="hljs-string">"]"</span></span> .byte b_num1 callb state .byte b_set, b_exit item <span class="hljs-string"><span class="hljs-string">"["</span></span>, f_immediate .byte b_num0 callb state .byte b_set, b_exit</code> </pre><br>  ุฌุงุก ุงูุฏูุฑ ููููุฉ $ compile.  ุณูู ูุณุชุบุฑู ุนููุงู ุฅุฏุฎุงู ุงููุงููุณ ูู ุงูููุฏุณ ูุชุฌููุน ุงููููุฉ ุงููุญุฏุฏุฉ.  ูู ุฃุฌู ุชุฑุฌูุฉ ูููุฉ ูู ุชุทุจููุงุช Fort ุงูุนุงุฏูุฉ ุ ูููู ุชุทุจูู ุงููููุฉ "ุ" ุนูู ุนููุงู ุงูุชูููุฐ.  ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ููุง.  ุฃููุงู ุ ููุงู ููุนุงู ูู ุงููููุงุช - ููุฏ ุงูุดูุฑุฉ ูุฑูุฒ ุงูุฌูุงุฒ.  ูุชู ุชุตููู ุงูุณุงุจู ุจูุงุณุทุฉ ุจุงูุช ุ ูุงูุฃุฎูุฑ ุจูุงุณุทุฉ ุงุณุชุฏุนุงุก ุจุงูุช ุงูุฃูุฑ.  ูุซุงููุงู - ูุฏููุง ูุง ูุตู ุฅูู ุฃุฑุจุนุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุฃูุฑ ุงูุงุชุตุงู: call8 ุ call16 ุ call32 ู call64.  ุฃุฑุจุนุฉุ  ูุง!  ุนูุฏูุง ูุชุจุช ุงููุชุฑุฌู ุ ุฃุถูุช 16 ุฃูุซุฑ ุฅูู ูุคูุงุก ุงูุฃุฑุจุนุฉ!  :) <br><br>  ููู ุญุฏุซ ูุฐุงุ  ุนูููุง ุฃู ูุฌุนู ุงุณุชุทุฑุงุฏุง ุตุบูุฑุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุชุญุณูู ุฃูุฑ ุงูุงุชุตุงู </h4><br>  ุนูุฏูุง ุจุฏุฃ ุงููุชุฑุฌู ุงูุนูู ุ ูุฌุฏุช ุฃูู ูู ูุซูุฑ ูู ุงูุญุงูุงุช (ูููู ููุณ ูููุง) ูููู ุงูุฃูุฑ call8 ูุงููุงู.  ูุฐุง ูู ุนูุฏูุง ุชููู ุงููููุฉ ุชุณูู ุฏุงุฎู 128 ุจุงูุช.  ููุฑุช - ูููู ุฃุชุฃูุฏ ูู ุญุฏูุซ ุฐูู ูู ุฌููุน ุงูุญุงูุงุช ุชูุฑูุจูุงุ  ููููุฉ ูุถุน ุฃูุซุฑ ูู 256 ุงูููู ูู ุจุงูุชุ <br>  ุงูููุทุฉ ุงูุฃููู ุงูุชู ูุงุญุธุชูุง ูู ุฃู ุงูุฏุนูุฉ ูู ุงูุญุตู ุชุชุฌู ุฏุงุฆููุง ูุญู ุงูุนูุงููู ุงูุณูููุฉ.  ูุฐุง ูุนูู ุฃูู ููููู ุฅุนุงุฏุฉ ุฃูุฑ ุงูุงุณุชุฏุนุงุก ุจุทุฑููุฉ ูููููุง ููุท ุงูุงุชุตุงู ุจุงูุนูุงููู ุงูุฃูู ุ ูููู 256 ุจุงูุช ุ ูููุณ 128. ุฅูู ุฃูุถู. <br><br>  ูููู ุฅุฐุง ูุถุนุช ุจุถุน ุจุช ูู ููุงู ูุง ... ุงุชุถุญ ุฃู ููุงู ููุงู!  ูุฏููุง ูุญุฏุชู ุจุงูุช: ุจุงูุช ูุงุญุฏ ูู ุงูุฃูุฑ ุ ูุงูุซุงูู ูู ุงูุฅุฒุงุญุฉ.  ููู ูุง ุดูุก ูููุน ุงูุจุชุงุช ุงูุฃุฏูู ููุฃูุฑ ูู ูุถุน ุงูุจุชุงุช ุงูุนุงููุฉ ูููุนููุฉ (ุงูุฅุฒุงุญุฉ).  ุจุงููุณุจุฉ ุฅูู ุขูุฉ ุงูุจุงูุช ุ ูุจุฏู ุฃู ููุงู ุงูุนุฏูุฏ ูู ุงูุฃูุงูุฑ ุจุฏูุงู ูู ุฃูุฑ ุงุณุชุฏุนุงุก ูุงุญุฏ.  ูุนู ุ ูุจูุฐู ุงูุทุฑููุฉ ูุญุชู ุนุฏุฉ ุฎูุงูุง ูู ุฌุฏูู ููุฏ ุงูุจุงูุช ููุฃูุงูุฑ ุจุฃูุฑ ูุงุญุฏ ุ ููู ูู ุจุนุถ ุงูุฃุญูุงู ูุฌุฏุฑ ุงูููุงู ุจุฐูู.  ูุนุฏ ุฃูุฑ call ุฃุญุฏ ุฃูุซุฑ ุงูุฃูุงูุฑ ุงุณุชุฎุฏุงููุง ุ ูุฐูู ูุฑุฑุช ุฃู ุฃุถุน 4 ุจุชุงุช ุฅุฒุงุญุฉ ูู ุงูุฃูุฑ.  ูุจุงูุชุงูู ุ ููููู ุฅุฌุฑุงุก ููุงููุฉ ุนูู ูุณุงูุฉ ุชุตู ุฅูู 4095 ุจุงูุช!  ูุฐุง ูุนูู ุฃูู ุณูุชู ุงุณุชุฎุฏุงู ุฃูุฑ ุงุณุชุฏุนุงุก ูุตูุฑ ุฏุงุฆููุง ุชูุฑูุจูุง.  ููุฏ ูุถุนุช ูุฐู ุงูุฃูุงูุฑ ูุน ุงูููุฏ 0xA0 ูุธูุฑุช ุงูุฃุณุทุฑ ุงูุชุงููุฉ ูู ุฌุฏูู ุงูุฃูุงูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.quad bcmd_call8b0, bcmd_call8b1, bcmd_call8b2, bcmd_call8b3, bcmd_call8b4, bcmd_call8b5, bcmd_call8b6, bcmd_call8b7 # <span class="hljs-number"><span class="hljs-number">0xA0</span></span> .quad bcmd_call8b8, bcmd_call8b9, bcmd_call8b10, bcmd_call8b11, bcmd_call8b12, bcmd_call8b13, bcmd_call8b14, bcmd_call8b15</code> </pre> <br>  ูููู ุฃูู ุฃูุงูุฑ ุงูุจุงูุช ูุฐู ุจุฅุฌุฑุงุก ููุงููุฉ ูู ุงุชุฌุงู ุงูุนูุงููู ุงูุณูููุฉ ุนูุฏ ุงูุฅุฒุงุญุฉ ุงููุญุฏุฏุฉ ูู ุงููุนููุฉ (ุญุชู 255).  ุงูุจุงูู ุฅุถุงูุฉ ุงูุฅุฒุงุญุฉ ุงูููุงุจูุฉ ูููุนููุฉ.  ูุถูู bcmd_call8b1 256 ุ ููุถูู bcmd_call8b2 512 ุ ูููุฐุง.  ููุฏ ุชูุฏูุช ุจุฃูุฑ ุฃูู ุงุณุชุฏุนุงุก ุนูู ุญุฏุฉ ุ ูุงูุจุงูู ูุน ูุงูุฑู. <br><br>  ุงูุฃูุฑ ุงูุฃูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_call8b0 = <span class="hljs-number"><span class="hljs-number">0xA0</span></span> bcmd_call8b0: movzx rax, byte ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> inc r8 mov [rbp], r8 sub r8, rax jmp _next</code> </pre><br>  ูุงูุฑู ูุฅูุดุงุก ุจููุฉ ุฃูุงูุฑ ุงูุงุชุตุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.macro call8b N b_call8b\N = <span class="hljs-number"><span class="hljs-number">0xA</span></span>\N bcmd_call8b\N: movzx rax, byte ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> inc r8 add rax, \N * <span class="hljs-number"><span class="hljs-number">256</span></span> mov [rbp], r8 sub r8, rax jmp _next .endm call8b <span class="hljs-number"><span class="hljs-number">1</span></span> call8b <span class="hljs-number"><span class="hljs-number">2</span></span> call8b <span class="hljs-number"><span class="hljs-number">3</span></span> call8b <span class="hljs-number"><span class="hljs-number">4</span></span> call8b <span class="hljs-number"><span class="hljs-number">5</span></span> call8b <span class="hljs-number"><span class="hljs-number">6</span></span> call8b <span class="hljs-number"><span class="hljs-number">7</span></span> call8b <span class="hljs-number"><span class="hljs-number">8</span></span> call8b <span class="hljs-number"><span class="hljs-number">9</span></span> call8b <span class="hljs-number"><span class="hljs-number">10</span></span> call8b <span class="hljs-number"><span class="hljs-number">11</span></span> call8b <span class="hljs-number"><span class="hljs-number">12</span></span> call8b <span class="hljs-number"><span class="hljs-number">13</span></span> call8b <span class="hljs-number"><span class="hljs-number">14</span></span> call8b <span class="hljs-number"><span class="hljs-number">15</span></span></code> </pre><br>  ุญุณููุง ุ ููุช ุจุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ุฃูุฑ call8 ุงููุฏูู ููุงุชุตุงู ุจุงูุฃูุงู ุ ูุธุฑูุง ูุฃู ูุฏููุง ุจุงููุนู 16 ูุฑูููุง ูููู ุจุฅุฌุฑุงุก ููุงููุฉ.  ูููุง ูุงู ุงูุงูุชุจุงุณ ุ ููุช ุจุฅุนุงุฏุฉ ุชุณููุชู b_call8f: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">b_call8f = <span class="hljs-number"><span class="hljs-number">0x0C</span></span> bcmd_call8f: movzx rax, byte ptr [r8] sub rbp, <span class="hljs-number"><span class="hljs-number">8</span></span> inc r8 mov [rbp], r8 add r8, rax jmp _next</code> </pre><br>  ุจุงูููุงุณุจุฉ ุ ูู ุฃุฌู ุงูุฑุงุญุฉ ุ ููุช ุจุฅูุดุงุก ูุงูุฑู ูุฌูุน ุงููุฌููุน ุชููุงุฆููุง ุงูููุงููุฉ ุงูููุงุจูุฉ ูุฑุฉ ุฃุฎุฑู ูู ุบุถูู 4095. ุซู ูู ุฃูู ุจุญุงุฌุฉ ุฅูู :) <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.macro callb adr .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> \adr &gt; . .error <span class="hljs-string"><span class="hljs-string">"callb do not for forward!"</span></span> .endif .byte b_call8b0 + (. - \adr + <span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span> .byte (. - \adr + <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">255</span></span> .endm</code> </pre> <br>  ูุงูุขู ... <br><br><h4 style=";text-align:right;direction:rtl">  ุชุฌููุน ุงููุฑูู </h4><br>  ูุฐูู ุ ูุญุตู ุนูู ุฎูุงุฑุฒููุฉ ุชุฌููุน ุฃูุงูุฑ ูุนูุฏุฉ ุฅูู ุญุฏ ูุง.  ุฅุฐุง ูุงู ูุฐุง ุฃูุฑ ุจุงูุช ุ ููู ููุท ุจุชุฑุฌูุฉ ุจุงูุช (ุฑูุฒ ุฃูุฑ ุจุงูุช).  ูุฅุฐุง ูุงูุช ูุฐู ุงููููุฉ ููุชูุจุฉ ุจุงููุนู ูู bytecode ุ ููุฌุจ ุนููู ุชุฑุฌูุฉ ููุงููุชูุง ุจุงุณุชุฎุฏุงู ุฃูุฑ call ุ ูุงุฎุชูุงุฑ ูุงุญุฏุฉ ูู ุนุดุฑูู.  ุจุชุนุจูุฑ ุฃุฏู 19 ุ ูุฐูู ููุณ ูุฏููุง ุฏุนูุฉ ุฅูู ุงูุฃูุงู ุ ููู ูุชู ุงุณุชุฎุฏุงู call8f ููููุนุฉ. <br><br>  ูุจุงูุชุงูู ูุฅู ุงูุฎูุงุฑ ูู ูุฐุง.  ุฅุฐุง ูุงู ุงูุฅุฒุงุญุฉ ููุน ุถูู 0 ...- 4095 ุ ูุญุฏุฏ ุงูุฃูุฑ bcmd_call8b ุจุงูุฑูุฒ 0xA0 ุ ูุน ูุถุน ุจุชุงุช ุงูุฅุฒุงุญุฉ ุงูุฃุฑุจุนุฉ ุงูุฃูุซุฑ ุฃูููุฉ ูู ุงูุจุชุงุช ุงูุฃูู ุฃูููุฉ ูู ุงูุฃูุฑ.  ูู ุงูููุช ููุณู ุ ุจุงููุณุจุฉ ุฅูู ุขูุฉ ุงูุจุงูุช ุ ูููู ุฑูุฒ ุฃุญุฏ ุฃูุงูุฑ bcmd_call8b0 ูู bcmd_call8b15. <br><br>  ุฅุฐุง ูุงู ุงูุฅุฒุงุญุฉ ุงูุฎูููุฉ ุฃูุจุฑ ูู ุฃู ูุณุงูู 4095 ุ ูุฅููุง ูุญุฏุฏ ุงูุจุนุฏ ุงูุฐู ูุชู ูุถุน ุงูุฅุฒุงุญุฉ ููู ููุณุชุฎุฏู ุงูุฃูุฑ ุงูููุงุณุจ ูู call16 / 32/64.  ูุฌุจ ุฃู ูุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃู ูุชู ุฅุฒุงุญุฉ ูุฐู ุงููุฑู.  ูููู ุฃู ูุณุจุจ ูู ูู ุงูุฃูุงู ูุงูุฎูู.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู call16 ุงุณุชุฏุนุงุก ูุณุงูุฉ 32767 ูู ููุง ุงูุงุชุฌุงููู. <br><br>  ููุง ูู ุงูุชูููุฐ ูุชูุฌุฉ ูุฐูู: <br><br>  <b>ุชุฑุฌูุฉ $</b> <br><br>  ูุฌูุน ูููุฉ.  ููุนููุฉ ุ ูุฃุฎุฐ ุนููุงู ุฅุฏุฎุงู ุงููุงููุณ ูููููุฉ ุงููุชุฑุฌูุฉ.  ูู ุงููุงูุน ุ ูุชุญูู ูู ุนูุงูุฉ f_code ุ ููุญุณุจ ุนููุงู ุงูุฑูุฒ (cfa) ุ ููุณุชุฏุนู compile_b ุฃู compile_c (ุฅุฐุง ุชู ุชุนููู ุงูุนูู). <br><br>  <b>compile_c</b> <br><br>  ูุฌูุน ุฃูุฑ ุจุงูุช.  ุฃุจุณุท ูููุฉ ููุง ููุตููุฉ ุนูู ุงูุญุตู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: compile_c c@ c, ;</code> </pre> <br>  <b>compile_b</b> <br>  ูุณุชุบุฑู ุนููุงู ุจุงูุช ุนูู ุงูููุฏุณ ููุฌูุน ููุงููุชู. <br><br>  <b>test_bv</b> <br><br>  ูุณุชุบุฑู ุฅุฒุงุญุฉ ูู ุงูููุฏุณ (ูุน ุฅุดุงุฑุฉ) ููุญุฏุฏ ุนูู ุงูุจุช ุงูุฐู ูุฌุจ ุงุณุชุฎุฏุงูู (1 ุฃู 2 ุฃู 4 ุฃู 8 ุจุงูุช).  ุชูุฑุฌุน ุงููููุฉ 0 ุฃู 1 ุฃู 2 ุฃู 3. ุจุงุณุชุฎุฏุงู ูุฐู ุงููููุฉ ุ ููููู ุชุญุฏูุฏ ุงููููุฉ ุงูุชู ูุฌุจ ุงุณุชุฎุฏุงููุง ูู ุฃูุงูุฑ call16 / 32/64.  ุณุชููู ูุฐู ุงููููุฉ ูู ูุชูุงูู ุงููุฏ ุนูุฏ ุชุฌููุน ุงูุฃุฑูุงู (ุงุฎุชูุงุฑ ูู lit8 / 16/32/64). <br><br>  ุจุงูููุงุณุจุฉ ุ ููููู ุจุฏุก ุชุดุบูู ุงููุธุงู ู "ุงูุชุฌูู" ูู ูุญุฏุฉ ุงูุชุญูู ุจุงูุญุตู ุจุงุณุชุฎุฏุงู ุฃู ูู ูุฐู ุงููููุงุช.  ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; 222 test_bv ( 2 ): 222 1 &gt; drop drop ( 0 ): &gt; 1000000 test_bv ( 2 ): 1000000 2 &gt; drop drop ( 0 ): &gt; -33 test_bv ( 2 ): -33 0 &gt;</code> </pre> <br>  <b>test_bvc</b> <br><br>  ูุณุชุบุฑู ุฅุฒุงุญุฉ (ูุน ุฅุดุงุฑุฉ) ูู ุงูููุฏุณ ูุชุญุฏูุฏ ุฃู ุฃูุฑ ุงุณุชุฏุนุงุก ูุงุณุชุฎุฏุงู.  ูู ุงููุงูุน ุ ูุฅูู ูุชุญูู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงูุฅุฒุงุญุฉ ููุน ุถูู 0 ... -4095 ุ ูุฅุฑุฌุงุน 0. ูู ูุฐู ุงูุญุงูุฉ ุ ุฅุฐุง ูู ููู ููุงู ุถุฑุจ ูู ูุฐุง ุงููุงุตู ุ ูุฅูู ูุณุชุฏุนู test_bv. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฐุง ูู ูุง ูุชุทูุจู ุงูุฃูุฑ ูุชุฌููุน ุงูุฃูุฑ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : test_bvc dup <span class="hljs-number"><span class="hljs-number">0</span></span> &gt;= over FFF &lt;= <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... item test_bvc test_bvc: .byte b_dup, b_neg .byte b_num0 .byte b_gteq .byte b_over, b_neg .byte b_lit16 .word <span class="hljs-number"><span class="hljs-number">0xFFF</span></span> .byte b_lteq .byte b_and .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_num0 .byte b_exit item test_bv test_bv: .byte b_dup, b_lit8, <span class="hljs-number"><span class="hljs-number">0x80</span></span>, b_gteq, b_over, b_lit8, <span class="hljs-number"><span class="hljs-number">0x7f</span></span>, b_lteq, b_and, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - ., b_num0 .byte b_exit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_dup .byte b_lit16 .word <span class="hljs-number"><span class="hljs-number">0x8001</span></span> .byte b_gteq .byte b_over .byte b_lit16 .word <span class="hljs-number"><span class="hljs-number">0x7ffe</span></span> .byte b_lteq, b_and, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - ., b_num1, b_exit <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_dup .byte b_lit32 .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80000002</span></span> .byte b_gteq .byte b_over .byte b_lit32 .<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x7ffffffd</span></span> .byte b_lteq, b_and, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - ., b_num2, b_exit <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_num3 .byte b_exit #  - item compile_c compile_c: .byte b_get8 callb c_8 .byte b_exit #   - item compile_b compile_b: callb here .byte b_num2, b_add .byte b_sub callb test_bvc .byte b_dup .byte b_zeq .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_drop .byte b_neg .byte b_dup .byte b_lit8, <span class="hljs-number"><span class="hljs-number">8</span></span> .byte b_rshift .byte b_lit8, b_call8b0 .byte b_or callb c_8 callb c_8 .byte b_exit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_dup, b_num1, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - ., b_drop, b_lit8, b_call16 callb c_8 .byte b_wm callb c_16 .byte b_exit <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_num2, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - ., b_lit8, b_call32 callb c_8 .byte b_num3, b_sub callb c_32 .byte b_exit <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_lit8, b_call64 callb c_8 .byte b_lit8, <span class="hljs-number"><span class="hljs-number">7</span></span>, b_sub callb c_64 .byte b_exit #: $compile dup c@ <span class="hljs-number"><span class="hljs-number">0x80</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cfa compile_c <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cfa compile_b then ; item <span class="hljs-string"><span class="hljs-string">"$compile"</span></span> _compile: .byte b_dup, b_get8, b_lit8, <span class="hljs-number"><span class="hljs-number">0x80</span></span>, b_and, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - ., b_cfa callb compile_c .byte b_exit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_cfa callb compile_b .byte b_exit</code> </pre><br></div></div><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุฌููุน ุงูุฑูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุชุฌููุน ุฑูู (ุญุฑูู) </h4><br>  ูุชุจ ุนููุงููุง ูุฑุนููุง ูุงููุงู ุ ุฃุนุฏ ููุตู ุงูุชุฌููุน ุงูุญุฑูู ุนูู ูุฌู ุงูุชุญุฏูุฏ ุ ููู ุงุชุถุญ ุฃูู ูุง ููุฌุฏ ุดูุก ุฎุงุต ููุตู :) <br><br>  ููุฏ ุฃูุฌุฒูุง ุจุงููุนู ูุตู ุงูุนูู ูู ูููุฉ test_bv.  ูุจูู ููุท ูุงุณุชุฏุนุงุก test_bv ุ ูููููุง ูููุชูุฌุฉ ุ ูู ุจุชุฌููุน lit8 / 16/32/64 ุ ุซู ุงููููุฉ ุงูููุงุจูุฉ ููุญุฌู 1 ุฃู 2 ุฃู 4 ุฃู 8 ุจุงูุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุญู ููุนู ุฐูู ูู ุฎูุงู ุชุญุฏูุฏ ูููุฉ compile_n</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">#   item compile_n compile_n: callb test_bv .byte b_dup .byte b_zeq .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_drop, b_lit8, b_lit8 callb c_8 callb c_8 .byte b_exit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_dup, b_num1, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - ., b_drop, b_lit8, b_lit16 callb c_8 callb c_16 .byte b_exit <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_num2, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - ., b_lit8, b_lit32 callb c_8 callb c_32 .byte b_exit <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_lit8, b_lit64 callb c_8 callb c_64 .byte b_exit</code> </pre></div></div><br><h4 style=";text-align:right;direction:rtl">  ุชุนุฏูู ุงููุชุฑุฌู </h4><br>  ูู ุดูุก ุฌุงูุฒ ูุชุฌููุน ุงูุฃูุฑ ูุงูุญุฑููุฉ.  ุงูุขู ูุฌุจ ุฃู ูุชู ุฏูุฌูุง ูู ุงููุชุฑุฌู ุงูููุฑู.  ูุฐุง ุงูุชุนุฏูู ุจุณูุท.  ุญูุซ ุชู ุชูููุฐ ุงูุฃูุฑ ุ ุฃุถู ุงูุชุญูู ูู ุงูุญุงูุฉ.  ุฅุฐุง ูุงูุช ุงูุญุงูุฉ ุบูุฑ ูุงุฑุบุฉ ูุงููููุฉ ูุง ุชุญุชูู ุนูู ุฅุดุงุฑุฉ ููุฑูุฉ ุ ูุจุฏูุงู ูู ุงูุชูููุฐ ุ ููุฒูู ุงุณุชุฏุนุงุก $ compile.  ูุญูู ููุณ ุงูุดูุก ูุฌุจ ุงูููุงู ุจู ุนูุฏ ุงูุญุตูู ุนูู ุงูุฑูู ูู ุฏูู ุงูุฅุฏุฎุงู.  ุฅุฐุง ูุงูุช ุงูุญุงูุฉ ุตูุฑูุฉ ุ ูุงุชุฑู ุงูุฑูู ูู ุงูุญุฒูุฉ ุ ูุฅุฐุง ูู ููู ูุฐูู ุ ูุงุชุตู ุจู compile_n. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุง ูู ุงููุชุฑุฌู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item interpret interpret: .byte b_blword .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">0f</span></span> - . .byte b_over .byte b_over .byte b_find .byte b_dup .byte b_qnbranch8 .byte <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_mrot .byte b_drop .byte b_drop callb state .byte b_get .byte b_qnbranch8, irpt_execute - . #  <span class="hljs-number"><span class="hljs-number">0</span></span>,    .byte b_dup, b_get8, b_lit8, f_immediate, b_and #  immediate    .byte b_qbranch8, irpt_execute - . #    -   #   ! callb _compile .byte b_branch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - . irpt_execute: .byte b_cfa #  ,    (state = <span class="hljs-number"><span class="hljs-number">0</span></span>  immediate  ) .byte b_execute .byte b_branch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - . <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_drop .byte b_over, b_over .byte b_numberq # ,    .byte b_qbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - . #     <span class="hljs-number"><span class="hljs-number">0</span></span>, ,      <span class="hljs-number"><span class="hljs-number">3</span></span> .byte b_type #    .byte b_strp #   .byte <span class="hljs-number"><span class="hljs-number">19</span></span> #     .ascii <span class="hljs-string"><span class="hljs-string">" : word not found!\n"</span></span> .byte b_quit #    <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_nip, b_nip #  ,     ( b_over, b_over) #   -   callb state # ,    .byte b_get .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - . #   -     ;   -   #   callb compile_n <span class="hljs-number"><span class="hljs-number">2</span></span>: #       .byte b_depth #    .byte b_zlt # ,   <span class="hljs-number"><span class="hljs-number">0</span></span> ( <span class="hljs-number"><span class="hljs-number">0</span></span>&lt;) .byte b_qnbranch8, interpret_ok - . #   ,    ,   .byte b_strp #    .byte <span class="hljs-number"><span class="hljs-number">14</span></span> .ascii <span class="hljs-string"><span class="hljs-string">"\nstack fault!\n"</span></span> .byte b_quit #    interpret_ok: .byte b_branch8 .byte interpret - . <span class="hljs-number"><span class="hljs-number">0</span></span>: .byte b_drop .byte b_exit</code> </pre></div></div><br>  ุงูุขู ูุญู ุนูู ุจุนุฏ ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงููุชุฑุฌู ... <br><br><h4 style=";text-align:right;direction:rtl">  ุชุนุฑูู ุงููููุงุช ุงูุฌุฏูุฏุฉ (ุงููููุฉ ":") </h4><br>  ุงูุขู ุ ุฅุฐุง ูููุง ุจุชุนููู ูุชุบูุฑ ุงูุญุงูุฉ ุฅูู ูููุฉ ุบูุฑ ุตูุฑูุฉ ุ ูุณุชุจุฏุฃ ุนูููุฉ ุงูุชุฑุฌูุฉ.  ููู ุงููุชูุฌุฉ ุณุชููู ุนุฏููุฉ ุงููุงุฆุฏุฉ ุ ูุง ูููููุง ุชุญููููุง ุ ููุง ุญุชู ุงูุนุซูุฑ ุนูููุง ูู ุงูุฐุงูุฑุฉ.  ูุฌุนู ุฐูู ูููููุง ุ ูู ุงูุถุฑูุฑู ุชูุณูู ูุชูุฌุฉ ุงูุชุฑุฌูุฉ ูู ุดูู ููุงูุฉ ูุงููุณ.  ููููุงู ุจุฐูู ุ ูุจู ุชุดุบูู ูุถุน ุงูุชุฑุฌูุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุนููุงู ูููููุฉ. <br><br>  ูุฌุจ ุฃู ูุญุชูู ุงูุฑุฃุณ ุนูู ุฃุนูุงู ูุญูู ุงุชุตุงู ูุงุณู.  ูุฏููุง ููุง ูุตุฉ ูุฃูููุฉ - ูููู ุฃู ูููู ูุฌุงู ุงูุงุชุตุงู 1 ุฃู 2 ุฃู 4 ุฃู 8 ุจุงูุช.  ููุฌุนู ุงููููุฉ compile_1248 ุ ูุงูุชู ุณูู ุชุณุงุนุฏูุง ูู ุชุดููู ุญูู ุงูุชูุงุตู ูุฐุง.  ุณูู ูุณุชุบุฑู ุงูุฃูุฑ ุฑูููู ูู ุงูุญุฒูุฉ - ุงูุฅุฒุงุญุฉ ูุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุงูุฃูุฑ test_bv. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">compile_1248</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">#    , ,     #     ,  test_dv item compile_1248 compile_1248: .byte b_dup .byte b_zeq .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_drop callb c_8 .byte b_exit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_dup, b_num1, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - . .byte b_drop callb c_16 .byte b_exit <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_num2, b_eq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">3f</span></span> - . callb c_32 .byte b_exit <span class="hljs-number"><span class="hljs-number">3</span></span>: callb c_64 .byte b_exit</code> </pre></div></div><br>  ุงูุขู ุฌุนู ุงููููุฉ $ ุฎูู.  ุณูููู ูู ุงููููุฏ ููุง ุฃูุซุฑ ูู ูุฑุฉ.  ููููู ุงุณุชุฎุฏุงูู ูููุง ุงุญุชุฌุช ุฅูู ุฅูุดุงุก ุนููุงู ูุฅุฏุฎุงู ุงููุงููุณ.  ุณูู ูุณุชุบุฑู ุงูุฃูุฑ ูููุชูู ูู ุงูููุฏุณ - ุนููุงู ุงุณู ุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุทูููุง.  ุจุนุฏ ุชูููุฐ ูุฐู ุงููููุฉ ุ ุณูุธูุฑ ุนููุงู ุฅุฏุฎุงู ุงููุงููุณ ุงูุฐู ุชู ุฅูุดุงุคู ูู ุงูุญุฒูุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">$ ุฎูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : $create here current @ @ here - test_bv dup c, compile_1248 -rot str, current @ ! <span class="hljs-string"><span class="hljs-string">' var0 here c!; item "$create" create: callb here callb current .byte b_get, b_get callb here .byte b_sub callb test_bv .byte b_dup callb c_8 callb compile_1248 .byte b_mrot callb c_str #       callb current .byte b_get, b_set #     - var0,      here #   ,    -    ,    #     ,     #    1 allot   ,   .byte b_lit8, b_var0 callb here .byte b_set8 .byte b_exit</span></span></code> </pre> </div></div><br>  ุณูู ุชูุชูุท ุงููููุฉ ุงูุชุงููุฉ ุงุณู ุงููููุฉ ุงูุฌุฏูุฏุฉ ูู ุฏูู ุงูุฅุฏุฎุงู ุจุงุณุชุฎุฏุงู ุงููููุฉ blword ูุชุฏุนู $ create ุ ูุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ ุจุงูุงุณู ุงููุญุฏุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">create_in</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> item <span class="hljs-string"><span class="hljs-string">"create_in"</span></span> create_in: .byte b_blword .byte b_dup .byte b_qbranch8 .byte <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_strp #   (     ) .byte <span class="hljs-number"><span class="hljs-number">3f</span></span> - <span class="hljs-number"><span class="hljs-number">2f</span></span> #     <span class="hljs-number"><span class="hljs-number">2</span></span>: .ascii <span class="hljs-string"><span class="hljs-string">"\ncreate_in - name not found!\n"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_quit <span class="hljs-number"><span class="hljs-number">1</span></span>: callb create .byte b_exit</code> </pre></div></div><br>  ูุฃุฎูุฑุง ุ ุงุฌุนู ุงููููุฉ ":".  ุณุชููู ุจุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ ุจุงุณุชุฎุฏุงู create_in ูุชุนููู ูุถุน ุงูุชุฑุฌูุฉ ุ ูู ูุชู ุชุซุจูุชูุง.  ูุฅุฐุง ูุงู ูุซุจุชุง ุ ูุฅูู ูุนุทู ุฎุทุฃ.  ูููุฉ ":" ุณูููู ููุง ุนูุงูุฉ ููุฑูุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููููุฉ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"># : : create_in <span class="hljs-number"><span class="hljs-number">1</span></span> state dup @ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" : - no execute state!"</span></span> then ! <span class="hljs-number"><span class="hljs-number">110</span></span> ; immediate item <span class="hljs-string"><span class="hljs-string">":"</span></span>, f_immediate colon: callb create_in .byte b_num1 callb state .byte b_dup .byte b_get .byte b_qnbranch8, <span class="hljs-number"><span class="hljs-number">2f</span></span> - . .byte b_strp #   (     ) .byte <span class="hljs-number"><span class="hljs-number">4f</span></span> - <span class="hljs-number"><span class="hljs-number">3f</span></span> #     <span class="hljs-number"><span class="hljs-number">3</span></span>: .ascii <span class="hljs-string"><span class="hljs-string">"\n: - no execute state!\n"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: .byte b_quit <span class="hljs-number"><span class="hljs-number">2</span></span>: .byte b_set .byte b_lit8, <span class="hljs-number"><span class="hljs-number">110</span></span> .byte b_exit</code> </pre></div></div><br>  ุฅุฐุง ูุธุฑ ุดุฎุต ูุง ุฅูู ุงูููุฏ ุ ููุฏ ุฑุฃู ุฃู ูุฐู ุงููููุฉ ุชูุนู ุดูุฆูุง ุขุฎุฑ :) <br><br>  ูููุง 110 ุุ <br><br>  ูุนู ุ ูุฐู ุงููููุฉ ุชุฏูุน ุงูุฑูู 110 ุฃูุถูุง ุฅูู ุงููุฌููุนุฉ ุ ููุฐุง ูู ุงูุณุจุจ.  ุนูุฏูุง ูุชู ุชุฌููุนูุง ุ ูุฌุจ ุฃู ุชููู ุงูุจููุงุช ุงููุฎุชููุฉ ููู ูุงุญุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุนุฏ ุฅุฐุง ูุงู ูุฌุจ ุฃู ูููู ุฐูู ุงูุญูู.  ูุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู ":" ูุฌุจ ุฃู ุชูุชูู ุจู "ุ".  ููุชุญูู ูู ูุฐู ุงูุดุฑูุท ุ ูุถุนุช ูููุงุช ุฎุงุตุฉ ูู ุงููุญูู ุงูุจุฑูุฌู ููููุง ูุนููุฉ ุนูู ุงูููุฏุณ ูุชุญูู ูู ูุฌูุฏูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุงููููุฉ ":" ุชุถุน ุงููููุฉ 110 ูุงููููุฉ "ุ"  ูุชุญูู ูู ุฃู 110 ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุฐุง ุฎุทุฃ.  ูุฐูู ุ ูู ูุชู ุฅูุฑุงู ููุงูู ุงูุชุญูู. <br><br>  ูุชู ุชูููุฐ ูุซู ูุฐุง ุงูุงุฎุชูุงุฑ ูู ูู ูุฐู ุงููููุงุช ูู ุงููุชุฑุฌู ุ ูุจุงูุชุงูู ุ ูุฅููุง ุณูู ุชุฌุนู ูููุฉ ุฎุงุตุฉ ููุฐุง - "ุฃุฒูุงุฌ".  ุณูุณุชุบุฑู ุงูุฃูุฑ ูููุชูู ูู ุงูููุฏุณ ุ ูุฑูู ุฎุทุฃ ุฅุฐุง ูู ุชูู ูุชุณุงููุฉ. <br><br>  ุฃูุถูุง ุ ูู ูุซู ูุฐู ุงููููุงุช ุ ูุชุนูู ุนููู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุงูุชุญูู ูู ุถุจุท ูุถุน ุงูุชุฑุฌูุฉ.  ููุฌุนู ูููุฉ "ุฏููุฉ" ููุฐุง ุงูุบุฑุถ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">"ุฃุฒูุงุฌ" ุงูุฏููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">#: ?pairs = ifnot <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> then .<span class="hljs-string"><span class="hljs-string">" \nerror: no pairs operators"</span></span> quit then ; item <span class="hljs-string"><span class="hljs-string">"?pairs"</span></span> .byte b_eq, b_qbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_strp .byte <span class="hljs-number"><span class="hljs-number">3f</span></span> - <span class="hljs-number"><span class="hljs-number">2f</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: .ascii <span class="hljs-string"><span class="hljs-string">"\nerror: no pairs operators"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_quit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_exit #: ?state state @ <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">abort</span></span><span class="hljs-string"><span class="hljs-string">" error: no compile state"</span></span> then ; item <span class="hljs-string"><span class="hljs-string">"?state"</span></span> callb state .byte b_get, b_zeq, b_qnbranch8, <span class="hljs-number"><span class="hljs-number">1f</span></span> - . .byte b_strp .byte <span class="hljs-number"><span class="hljs-number">3f</span></span> - <span class="hljs-number"><span class="hljs-number">2f</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: .ascii <span class="hljs-string"><span class="hljs-string">"\nerror: no compile state"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: .byte b_quit <span class="hljs-number"><span class="hljs-number">1</span></span>: .byte b_exit</code> </pre></div></div><br>  ูุฐุง ูู ุดุฆ!  ูู ูุฌูุน ุฃู ุดูุก ุขุฎุฑ ูู ุงููุฌููุน ูุฏูููุง :) <br><br>  ููู ุญุชู ุงูููุงูุฉ ุ ูู ุชุชู ูุชุงุจุฉ ุงููุชุฑุฌู ุจุนุฏ ุ ูุฐูู ูู ุงูุจุฏุงูุฉ ุณูููู ุนููู ุงุณุชุฎุฏุงู ุจุนุถ ุงูุฃุณุงููุจ ุบูุฑ ุงููุนุชุงุฏุฉ ... <br><br><h4 style=";text-align:right;direction:rtl">  ุฏุนููุง ูุณุชุนุฏ ูุชุฌููุน ุงููุชุฑุฌู ุงูุฐู ุชู ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู ุงููุชุฑุฌู ุงูุฐู ุชู ุฅูุดุงุคู </h4><br>  ููุจุฏุก ุ ููููู ุงูุชุญูู ูู ููููุฉ ุนูู ุงููููุฉ ":" ูู ุฎูุงู ุชุฌููุน ุดูุก ุจุณูุท.  ููุฌุนู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงููููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: ^<span class="hljs-number"><span class="hljs-number">2</span></span> dup * ;</code> </pre> <br>  ูุฐู ุงููููุฉ ุชุฑุจูุน.  ูููู ููุณ ูุฏููุง ูููุฉ "ุ" ูุงุฐุง ุชูุนูุ     exit,   .       "["    110: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; : ^2 dup * exit [ drop ( 0 ): &gt; 4 ^2 ( 1 ): 16 &gt;</code> </pre><br> ! <br><br> โฆ <br><br>        ,  ,     ,   .    .        ,    .        ,      here,    . ,      ,   ยซยป   ,     .  ,       ,   ,       ,         . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">fcode: .ascii <span class="hljs-string"><span class="hljs-string">" 2 2 + . quit"</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุ ูู ุจุฏุงูุฉ ุงูุณุทุฑ ุ ูุณุชุญู ูุถุน ุนุดุฑุงุช ุงููุณุงุญุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุฌุงุญ ูุฐุง ุงูุนูู ุ ูููู ุจุชุบููุฑ ุฑูุฒ ุงูุจุฏุงูุฉ ุจุญูุซ ูุดูุฑ tib ุ #tib ุฅูู ูุฐุง ุงูุณุทุฑ. </font><font style="vertical-align: inherit;">ูู ุงูููุงูุฉ ุ ููุงู ุงุณุชูุงูุฉ ูุฅุฏุฎุงู ุณุทุฑ ุงูุฃูุงูุฑ ุงูุนุงุฏู ูููุธุงู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏุก bytecode ุฃุตุจุญ ูุซู ูุฐุง</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">start: .byte b_call16 .word forth - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word last_item - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word context - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_get .byte b_set .byte b_call16 .word vhere - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_dup .byte b_call16 .word h - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_call16 .word definitions - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_call16 .word tib - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_lit16 .word fcode_end - fcode .byte b_call16 .word ntib - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_set .byte b_call16 .word interpret - . - <span class="hljs-number"><span class="hljs-number">2</span></span> .byte b_quit</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุทูุงู! </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth 4 ( 0 ): &gt;</code> </pre><br>  ุนุธูู! <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุขู ... </font></font><br><br><h4 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฑุฌูุฉ ุงููุญูู ุงูุจุฑูุฌู ูุน ุงููุญูู ุงูุจุฑูุฌู </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ููุชุจ ุงูุฑูุฒ ูู ุณุทุฑ fcode. </font><font style="vertical-align: inherit;">ุฃูู ุดูุก ูุนูู ุ ุจุงูุทุจุน ุ ูู ูููุฉ "ุ".</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: ; ?state <span class="hljs-number"><span class="hljs-number">110</span></span> ?pairs lit8 [ blword <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> find cfa c@ c, ] c, <span class="hljs-number"><span class="hljs-number">0</span></span> state ! <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> [ current @ @ dup c@ <span class="hljs-number"><span class="hljs-number">96</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> swap c! drop</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุฃูุฏู ุจุนุถ ุงูุชูุณูุฑุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">?state 110 ?pairs</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ููุง ูุชุญูู ูู ุฃู ุญุงูุฉ ุงูุชุฑุฌูุฉ ูุฏ ุชู ุถุจุทูุง ุจุงููุนู ุ ูุฃู 110 ูููุง ูู ูุถุน ููุฏุณ ุ ูุฅูุง ูุณูุญุฏุซ ุงููุทุงุน ุนู ุทุฑูู ุงูุฎุทุฃ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">lit8 [ blword exit find cfa c@ c, ]</code> </pre> <br>     lit  -  exit.     ,   exit,   ,     .            compile.    ,         ยซcompile exitยป :) <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">c, 0 state !</code> </pre> <br>     exit     ";",     .  "["   ,      immediate   <b></b> ,    <b></b>     ";",      . <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">exit [</code> </pre> <br>    .   exit    . ,  ";" .       ? <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">current @ @ dup c@ 96 or swap c! drop</code> </pre> <br>    immediate   .      ,   drop.  drop   110,    ":"   . <br><br>   ! <br><br>   . <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; : ^3 dup dup * * ; ( 0 ): &gt; 6 ^3 . 216 ( 0 ): &gt;</code> </pre><br>  ููุงู!    ,     ยซ ยป. <br><br>       ,  ,   โฆ   ,       : immediate.    immediate    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: immediate current @ @ dup c@ <span class="hljs-number"><span class="hljs-number">96</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> swap c! ;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณูุณู ูุฃููู :) ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุชู ูุชุงุจุชู ูุฏูููุง ุ ูู ุชููู ููุงู ุญุงุฌุฉ ููุฐุง ุจุนุฏ ุงูุขู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ููุตูุน ุจุนุถ ุงููููุงุช ุงูุตุบูุฑุฉ ูููู ุงููููุฏุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: hex <span class="hljs-number"><span class="hljs-number">16</span></span> base ! ; : decimal <span class="hljs-number"><span class="hljs-number">10</span></span> base ! ; : bl <span class="hljs-number"><span class="hljs-number">32</span></span> ; : tab <span class="hljs-number"><span class="hljs-number">9</span></span> ; : lf <span class="hljs-number"><span class="hljs-number">10</span></span> ;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุงูุฉ ูุนุดุฑู ุชุนููู ูุธุงู ุงูุฑูู ุงูููุงุจู. </font><font style="vertical-align: inherit;">ุงูุจุงูู ุซูุงุจุช ููุญุตูู ุนูู ุฑููุฒ ุงูุฃุญุฑู ุงูููุงุจูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุฃูุถูุง ูุตูุน ูููุฉ ููุณุฎ ุณุทุฑ ูุน ุนุฏุงุฏ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:: cmove over c @ 1+ moveุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุขู ุณูู ูุดุงุฑู ูู ุงูุธุฑูู. </font><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ุฅุฐุง ูุงู ููุงู ุชุฑุฌูุฉ ูููุฉ ุ ูุณุชุจุฏู ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ?state compile ?nbranch8 here <span class="hljs-number"><span class="hljs-number">0</span></span> c, <span class="hljs-number"><span class="hljs-number">111</span></span> ; immediate : then ?state <span class="hljs-number"><span class="hljs-number">111</span></span> ?pairs dup here swap - swap c! ; immediate</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุญูู ูู ูุฐู ุงููููุงุช ูู ุงูุจุฏุงูุฉ ูู ุถุจุท ูุถุน ุงูุชุฑุฌูุฉ ูุฅูุดุงุก ุฎุทุฃ ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ if ุชุฌูุน ูุฑุนูุง ุดุฑุทููุง ุ ูุชุญุฌุฒ ุจุงูุชูุง ููุนููุฉ ุฃูุฑ ุงููุฑุน ุงูุดุฑุทู ุ ูุชุฏูุน ุนููุงู ูุฐู ุงูุจุงูุชุฉ ุฅูู ุงูููุฏุณ. ุซู ูุฏูุน ูููุฉ ุงูุชุญูู 111 ุฅูู ุงูููุฏุณ ุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ุชุชุญูู ุงููููุฉ ูู ูุฌูุฏ ูููุฉ ุงูุชุญูู 111 ุ ุซู ุชูุชุจ ุงูุฅุฒุงุญุฉ ุฅูู ุงูุนููุงู ุงูููุฌูุฏ ูู ุงูุญุฒูุฉ.</font></font><br><br>     else.       ,    else.   ,   if,     ,   ,      .        ,    then:       else. -   ,    :)  -   ,     ,   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> compile ?nbranch8 here <span class="hljs-number"><span class="hljs-number">0</span></span> c, ; immediate : then dup here swap - swap c! ; immediate</code> </pre> <br>      .      compile,    ,      ";": <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ?state lit8 [ blword ?nbranch8 find cfa c@ c, ] c, here <span class="hljs-number"><span class="hljs-number">0</span></span> c, <span class="hljs-number"><span class="hljs-number">111</span></span> ; immediate : then ?state <span class="hljs-number"><span class="hljs-number">111</span></span> ?pairs dup here swap - swap c! ; immediate : <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ?state <span class="hljs-number"><span class="hljs-number">111</span></span> ?pairs lit8 [ blword branch8 find cfa c@ c, ] c, here <span class="hljs-number"><span class="hljs-number">0</span></span> c, swap dup here swap - swap c! <span class="hljs-number"><span class="hljs-number">111</span></span> ; immediate</code> </pre><br>     . , , ,   1000,     5,  0   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; : test 5 = if 1000 . else 0 . then ; ( 0 ): &gt; 22 test 0 ( 0 ): &gt; 3 test 0 ( 0 ): &gt; 5 test 1000 ( 0 ): &gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงููุงุถุญ ุฃู ูุฐู ุงููุชูุฌุฉ ูู ุชูุฌุญ ุนูู ุงูููุฑ ุ ูุงูุช ููุงู ุฃุฎุทุงุก ุ ูุงู ููุงู ุชุตุญูุญ. </font><font style="vertical-align: inherit;">ูููู ูู ุงูููุงูุฉ ุ ุนููุช ุงูุธุฑูู!</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุทุฑุงุฏุง ุตุบูุฑุง ุนู ุทูู ุฃูุงูุฑ ุงูุงูุชูุงู</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,       ,      127 .       . ,  ,       .     ,   ,        .   8   ,    40  127    .   ,       ? <br><br>   .   โ    16 . <br><br>      . 16        โ    . ,      ,     call,      . , 11     ( 1023   ).         300  1000  .      ,        .      3  ,     8    .    :   (?nbranch),    (?branch)   (branch).  โ 24 . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุง ุดุฑูุท ุ ุชุตุจุญ ุงูุญูุงุฉ ุฃุณูู :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุตูุน ูููุฉ ". (Dot-quote). ูุนุฑุถ ุงููุต ุงููุญุฏุฏ ุนูุฏ ุชูููุฐู. ูุชู ุงุณุชุฎุฏุงูู ุจูุฐู ุงูุทุฑููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">.<span class="hljs-string"><span class="hljs-string">"    "</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ูุฐู ุงููููุฉ ููุท ูู ูุถุน ุงูุชุฑุฌูุฉ. </font><font style="vertical-align: inherit;">ุณูุตุจุญ ูุฐุง ูุงุถุญูุง ุจุนุฏ ุชุญููู ุฌูุงุฒ ูุฐู ุงููููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: .<span class="hljs-string"><span class="hljs-string">" ?state 34 word dup if lit8 [ blword (."</span></span>) find cfa c@ c, ] c, str, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> drop then ; immediate</code> </pre> <br>      .         (34 word).     ,   . ,     .          ,    :)  ,       ,   . <br><br>    ,  - (."),    .  - (-  )    ,     . <br><br> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; : test ."    " ; ( 0 ): &gt; test     ( 0 ): &gt;</code> </pre><br> , ,   compile. <br><br> ,             ,    .    :    -,    ,   -.      .     : "(compile_b)"  "(compile_c)". <br><br> (compile_b)    call   -.     64-  โ   -. <br><br> (compile_c)   -. ,       โ  . <br><br>     compile    (compile_b),  (compile_c)   . <br><br>   (compile_c),    : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: (compile_c) r&gt; dup c@ swap <span class="hljs-number"><span class="hljs-number">1</span></span>+ &gt;rc, ;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุจุณุงุทุชู ุ ููุชุจ ุฃููุงู ูููุฉ ูู ุงูุฑูุฒ ุงูุซูุงุฆู ุ ูุงูุชู ูู ุญุฏ ุฐุงุชูุง ุจูุง ูุนููุงุช. ูุฐูู ุ ุณุฃุนูู. ุจุนุฏ ุงูุฏุฎูู (compile_c) ุ ููุน ุนููุงู ุงููุฑุณู ูู ููุฏุณ ุงููุฑุณู ุ ุญูุซ ุฅูู ููุณ ูุจุชุฐูุงู. ูุฐุง ูู ุนููุงู ุงูุจุงูุช ุงูุชุงูู ุจุนุฏ ุฃูุฑ ุงูุงุณุชุฏุนุงุก. ูุธูุฑ ุงููููู ูู ููุช ุงูููุงููุฉ ุฃุฏูุงู. A0 - ุฑูุฒ ุฃูุฑ ุงูุงุณุชุฏุนุงุก ุ XX - ูุนููุฉ ุฃูุฑ ุงูุงุณุชุฏุนุงุก - ุนููุงู ุงูุงุชุตุงู (ุฅุฒุงุญุฉ) ูู ุดูุฑุฉ ุงูุจุงูุช ูููููุฉ (compile_c).</font></font><br><br><img src="https://habrastorage.org/webt/vj/jh/kh/vjjhkhqa7e35ygxdzclv0lf4-pw.png"><br><br>      NN.      .      ,  NN โ      "(compile_c)",  , -  .        ,   ,   -.    ยซr&gt; dup c@ swap 1+ &gt;rยป.           ,    ,     ( ) ,      .   ยซc,ยป      -. <br><br> (compile_b)   : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: (compile_b) r&gt; dup @ swap <span class="hljs-number"><span class="hljs-number">8</span></span> + &gt;r compile_b ;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ูู ููุณู ููุง ุ ุชุชู ูุฑุงุกุฉ ุงููุนููุฉ 64 ุจุช ููุท ุ ููุชู ุงุณุชุฎุฏุงู ุงููููุฉ compile_b ูู ุชุฑุฌูุฉ ุงููููุฉ ุ ุงูุชู ุฃูุดุฃูุงูุง ุจุงููุนู ูููุชุฑุฌู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุขู ุงููููุฉ ุชุฌููุน. </font><font style="vertical-align: inherit;">ููุง ุชูุช ููุงูุดุชู ุจุงููุนู ุ ูุฅูู ููุฑุฃ ุงุณู ุงููููุฉ ุ ููุฌุฏูุง ููุฌูุน ุฃุญุฏ ุงูุฃูุฑูู ุงูุณุงุจููู. </font><font style="vertical-align: inherit;">ูู ุฃุนูู ุนูููุง ุ ููุฏ ูููุง ุจุงููุนู ุจุชูููู ุฌููุน ุงูููุดุขุช ุงููุณุชุฎุฏูุฉ ูุชูููููุง.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฌูุฉ ูููุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: compile blword over over find dup <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dup c@ <span class="hljs-number"><span class="hljs-number">128</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cfa c@ (compile_b) [ blword (compile_c) find cfa , ] c, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cfa (compile_b) [ blword (compile_b) find cfa , ] , then drop drop <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> drop .<span class="hljs-string"><span class="hljs-string">" compile: "</span></span> type .<span class="hljs-string"><span class="hljs-string">" - not found"</span></span> then ; immediate</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุญูู ูู ุงููููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุ ูุญู ูุตูุน ุ ุจูุณุงุนุฏุชูุง ุ ูููุฉ ifnot. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: ifnot ?state compile ?branch8 here <span class="hljs-number"><span class="hljs-number">0</span></span> c, <span class="hljs-number"><span class="hljs-number">111</span></span> ; immediate</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญูู ูู ุฐูู! </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; : test 5 = ifnot 1000 . else 0 . then ; ( 0 ): &gt; 22 test 1000 ( 0 ): &gt; 3 test 1000 ( 0 ): &gt; 5 test 0 ( 0 ): &gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ุนูู ูุง ูุฑุงู! ููุฏ ุญุงู ุงูููุช ููููุงู ุจุงูุฏูุฑุงุช ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูููุงูุฉ ุ ุณูุฌุนู ุฏูุฑุงุช ูุน ุดุฑุท. ุงูููุนุฉ ูุฏููุง ุฎูุงุฑุงู ูุฏูุฑุฉ ูุน ุดุฑุท. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุฑ ุงูุฃูู ูุจุฏุฃ ... ุญุชู. ุงููููุฉ ุญุชู ุชุฒูู ุงููููุฉ ูู ุงูููุฏุณ ุ ูุฅุฐุง ูู ุชูู ูุณุงููุฉ ููุตูุฑ ุ ุชูุชูู ุงูุฏูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุฑ ุงูุซุงูู ูุจุฏุฃ ... ุจูููุง ... ูุฑุฑ. ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุฏุซ ุงูุชุญูู ุนูุฏ ุชูููุฐ ุงููููุฉ ุฃุซูุงุก. ูุชู ุฅููุงุก ุงูุญููุฉ ุฅุฐุง ูุงูุช ุงููููุฉ ุนูู ุงูููุฏุณ ุชุณุงูู ุตูุฑูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุฌุฑุงุก ุงูุฏูุฑุงุช ุนูู ุงูุญุตู ุจููุณ ุงูุทุฑููุฉ ุงูุชู ุชุชู ุจูุง ุงูุธุฑูู - ุนูู ุงูุชุญููุงุช ุงููุดุฑูุทุฉ ูุบูุฑ ุงููุดุฑูุทุฉ. ุฃุญูู ุงูุฑูุฒ ุ ูุงูุชุนูููุงุช ุ ููุง ุฃุนุชูุฏ ุ ููุณุช ุถุฑูุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: begin ?state here <span class="hljs-number"><span class="hljs-number">112</span></span> ; immediate : until ?state <span class="hljs-number"><span class="hljs-number">112</span></span> ?pairs compile ?nbranch8 here - c, ; immediate : <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ?state <span class="hljs-number"><span class="hljs-number">112</span></span> ?pairs compile ?nbranch8 here <span class="hljs-number"><span class="hljs-number">0</span></span> c, <span class="hljs-number"><span class="hljs-number">113</span></span> ; immediate : repeat ?state <span class="hljs-number"><span class="hljs-number">113</span></span> ?pairs swap compile branch8 here - c, dup here swap - swap c! ; immediate</code> </pre><br>     .   .   ,     โ     .         leave.     . <br><br>      ! <br><br>  ,    words.   , ,  . <br>  ,  ,   link@.         (   ).   ,      : 1, 2, 4  8 .         ,    :       . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: link@ dup c@ <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> swap <span class="hljs-number"><span class="hljs-number">1</span></span>+ swap dup <span class="hljs-number"><span class="hljs-number">0</span></span>= <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> drop dup <span class="hljs-number"><span class="hljs-number">1</span></span>+ swap c@ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dup <span class="hljs-number"><span class="hljs-number">1</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> drop dup <span class="hljs-number"><span class="hljs-number">2</span></span> + swap w@ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> drop dup <span class="hljs-number"><span class="hljs-number">4</span></span> + swap i@ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> drop dup <span class="hljs-number"><span class="hljs-number">8</span></span> + swap @ then then then ;</code> </pre><br>       words: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: words context @ @ <span class="hljs-number"><span class="hljs-number">0</span></span> begin + dup link@ swap count type tab emit dup <span class="hljs-number"><span class="hljs-number">0</span></span>= until drop drop ;</code> </pre> <br> โฆ <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth ( 0 ): &gt; words words link@ repeat while until begin ifnot compile (compile_b) (compile_c) ." else then if cmove tab bl decimal hex immediate ; bye ?state ?pairs : str, interpret $compile compile_b compile_n compile_1248 compile_c c, w, i, , allot here h test_bv test_bvc [ ] state .s &gt;in #tib tib . #&gt; #s 60 # hold span holdpoint holdbuf base quit execute cfa find word blword var16 var8 (.") (") count emit expect type lshift rshift invert xor or and &gt;= &lt;= &gt; &lt; = 0&gt; 0&lt; 0= bfind compare syscall fill move rpick r@ r&gt; &gt;r -! +! i! i@ w! w@ c! c@ ! @ depth roll pick over -rot rot swap drop dup abs /mod mod / * - + 1+ 1- exit ?nbranch16 ?nbranch8 ?branch16 ?branch8 branch16 branch8 call8b0 call64 call32 call16 call8f lit64 lit32 lit16 lit8 8 4 3 2 1 0 context definitions current forth ( 0 ): &gt;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูู ุซุฑูุชูุง :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฑุฏุช ุฃู ุฃููู ูู ุดูุก ... ูุง ุ ูููุณูุญ ูุน ุฐูู ุจุชุญุฏูุฏ ููู ูุน ุจุฑูุงูุฌ ุญุตู ููุชุฌููุน ูุงูุชูููุฐ ููุนููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุนู ุฃูุงูุฑ syscall ููุชุญ ูุฅุบูุงู ููุฑุงุกุฉ ุงูููู. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ุงูุซูุงุจุช ุงููุงุฒูุฉ ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: file_open <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> syscall ; : file_close <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> syscall ; : file_read <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> syscall ; : file_O_RDONLY <span class="hljs-number"><span class="hljs-number">0</span></span> ; : file_O_WRONLY <span class="hljs-number"><span class="hljs-number">1</span></span> ; : file_O_RDWR <span class="hljs-number"><span class="hljs-number">3</span></span> ;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ููููู ุฌุนู ุงููููุฉ ุงูุจุฏุก _start: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: _start <span class="hljs-number"><span class="hljs-number">0</span></span> pick <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> pick file_O_RDONLY <span class="hljs-number"><span class="hljs-number">0</span></span> file_open dup <span class="hljs-number"><span class="hljs-number">0</span></span>&lt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .\<span class="hljs-string"><span class="hljs-string">" error: \" . quit then dup here 32 + 32768 file_read dup 0&lt; if .\" error: \" . quit then swap file_close drop #tib ! here 32 + tib ! 0 &gt;in ! interpret then ;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชุญููู ูุฐู ุงููููุฉ ูู ุงูููู ูุชูููุฐ ุฃู ุจุฑูุงูุฌ ุญุตู. </font><font style="vertical-align: inherit;">ุจุชุนุจูุฑ ุฃุฏู ุ ุณูููู ุงููุชุฑุฌู ุจุชูููุฐ ูู ูุง ุณูููู ูู ูุฐุง ุงูููู. </font><font style="vertical-align: inherit;">ููุฏ ูููู ููุงู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฌููุนุฉ ูู ุงููููุงุช ุงูุฌุฏูุฏุฉ ูุชูููุฐูุง. </font><font style="vertical-align: inherit;">ุชุชู ุงูุฅุดุงุฑุฉ ุฅูู ุงุณู ุงูููู ุจูุงุณุทุฉ ุงููุนููุฉ ุงูุฃููู ุนูุฏ ุจุฏุก ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ูู ุฃุฎูุถ ูู ุงูุชูุงุตูู ุ ููู ูุนููุงุช ุงูุฅุทูุงู ูู Linux ุชูุชูู ุนุจุฑ ุงูุญุฒูุฉ. </font><font style="vertical-align: inherit;">ุณุชุตู ุฅูููู ุงููููุฉ _start ุจุงูุฃูุงูุฑ 0 pick (ุนุฏุฏ ุงููุนููุงุช) ู 2 pick (ุงููุคุดุฑ ุฅูู ุงููุนููุฉ ุงูุฃููู). </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุธุงู ุงูุญุตู ุ ุชูุน ูุฐู ุงูููู ุฎุงุฑุฌ ุงูุญุฒูุฉ ุ ูููู ููููู ุงูุญุตูู ุนูููุง ุจุงุณุชุฎุฏุงู ุฃูุฑ ุงูุงูุชูุงุท. </font><font style="vertical-align: inherit;">ููุชุตุฑ ุญุฌู ุงูููู ุนูู 32 ูููู ุจุงูุช ุ ุจูููุง ูุง ุชูุฌุฏ ุฅุฏุงุฑุฉ ููุฐุงูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุจูู ุฃู ููุชุจ ูู ุณุทุฑ fcode ูู ุงูููุงูุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">_start quit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ููู test.f ูุงูุชุจ ุดูุฆูุง ูุง ุนูู ุงูุญุตู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฎูุงุฑุฒููุฉ ุงูุฅูููุฏูุฉ ูุฅูุฌุงุฏ ุงูุนุงูู ุงููุดุชุฑู ุงูุฃูุจุฑ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">: NOD begin over over &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> over over &gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> swap over - swap <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> over - then repeat drop ; <span class="hljs-number"><span class="hljs-number">23101</span></span> <span class="hljs-number"><span class="hljs-number">44425</span></span> NOD . bye</code> </pre><br>  ูุจุฏุฃ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ./forth test.f 1777 Bye! $</code> </pre> <br>  .  ,  .  ,    bye.     ,  NOD           .     :-) <br><br>  ูุฐุง ูู ุดูุก.  ,          x86-64  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/hal9000cc/forth64</a> <br><br>     <s>GNU GPL v2</s>  v1 โ    :-) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar437466/">https://habr.com/ru/post/ar437466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar437454/index.html">Arithmometer ูููููุณ ู ุงูุงุณุชุนุฑุงุถ</a></li>
<li><a href="../ar437456/index.html">ุงูุฃุตุบุฑ: ูุฑุงุฌุนุฉ ููุงุชู IP Snom ู D305</a></li>
<li><a href="../ar437458/index.html">ุงูุชุณุฌูู ุงูุฅูุฒุงูู ูู ูุจู IMEI ุนุฑุถ ูุฌุนู ุงููุฏููุนุฉ</a></li>
<li><a href="../ar437460/index.html">32 ุฌูุฌุงุจุงูุช ุนูู ุณุจูู ุงููุซุงู ูุญุฑู ุฃูุฑุงุต ููุงุด ููููุฉ</a></li>
<li><a href="../ar437464/index.html">ุณุนุฑ ุณูุฑูุจุช</a></li>
<li><a href="../ar437468/index.html">Retropie ุฏุฑูู ูุงุณุช</a></li>
<li><a href="../ar437470/index.html">ุจุถุน ูููุงุช ุจุณูุทุฉ ุญูู ุงูุฏูุงุน ุงูุตุงุฑูุฎู</a></li>
<li><a href="../ar437472/index.html">ุงูุงูุชูุงู ูู ุงูููุชุจ ุฅูู udalenka: ุชุจุงุฏู ุงูุฎุจุฑุงุช ูุงูุฎุงุฑูุฉ ุงูุญูุงุฉ</a></li>
<li><a href="../ar437474/index.html">ูู ุจุชุญุณูู ุฃุฏุงุก ุงููุนุจุฉ ูู ุฎูุงู ุฎูุงุฑุงุช ุงุณุชูุฑุงุฏ ุงูุตูุช ูู Unity</a></li>
<li><a href="../ar437476/index.html">ุญุณูุง ูุงูุฏูุณ! ุฃูู ูู ุฃูุฏุงููุงุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>