<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚Ñ¢Ô∏è ü§æüèø üåã Contoh Implementasi Integrasi Berkelanjutan Menggunakan BuildBot üñêüèø üë©‚Äçüîß üî∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Gambar oleh Computerizer dari Pixabay) 
 
 Hai 

 Nama saya Evgeny Cherkin , saya programmer dari tim pengembangan di perusahaan pertambangan Polymet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contoh Implementasi Integrasi Berkelanjutan Menggunakan BuildBot</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460501/"><img src="https://habrastorage.org/webt/jj/-4/-g/jj-4-gindpovkdi6rbmzxax4yqu.jpeg" alt="Konfigurasi uji coba buildbot"><br>  <i>(Gambar oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Computerizer</a> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pixabay)</a></i> <i><br></i> <br>  Hai <br><br>  Nama saya <b>Evgeny Cherkin</b> , saya programmer dari tim pengembangan di perusahaan pertambangan <b>Polymetal</b> . <br><br>  Saat memulai proyek besar, Anda mulai berpikir: "Perangkat lunak apa yang lebih baik untuk digunakan untuk pemeliharaannya?".  Sebuah proyek TI sebelum rilis versi berikutnya melewati serangkaian tahapan.  Ada baiknya ketika rantai langkah-langkah ini diotomatisasi.  Proses otomatis untuk merilis versi baru proyek TI disebut <i>Integrasi Berkelanjutan</i> .  <b>BuildBot</b> ternyata menjadi penolong yang baik bagi kami, menerapkan proses ini. <br><br>  Pada artikel ini, saya memutuskan untuk memberikan gambaran umum tentang fitur-fitur <b>BuildBot</b> .  Apa yang mampu dilakukan oleh perangkat lunak ini?  Bagaimana cara mendekatinya dan bagaimana membangun HUBUNGAN KERJA EFEKTIF yang normal dengannya?  Anda juga dapat menerapkan pengalaman kami kepada diri sendiri dengan membuat pada mesin Anda layanan yang berfungsi untuk merakit dan menguji proyek Anda. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Isi</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td colspan="4" align="center"><h3>  Isi </h3></td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1. Mengapa BuildBot?</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">2. Konsep yang dipimpin oleh BuildMaster</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">3. Instalasi</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">4. Langkah pertama</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5. Konfigurasi.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Resep langkah demi langkah</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.1 BuildmasterConfig</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.2 pekerja</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.3 change_source</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.4 penjadwal</a> </td></tr><tr><td colspan="2" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.5 BuildFactory</a> </td><td colspan="2" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.6 pembangun</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">6. Contoh konfigurasi sendiri</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">6.1 Dalam perjalanan ke master.cfg Anda</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">6.2 Bekerja dengan svn</a> </td><td colspan="2">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">6.3 Surat kepada Anda: wartawan berwenang untuk menyatakan</a> </td></tr><tr><td colspan="4" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami berhasil!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Selamat saya</a> </td></tr></tbody></table></div><br></div></div><br><a name="Why"></a><h3>  1. Mengapa BuildBot? </h3><hr><br>  Sebelumnya di habr-e, saya menemukan artikel tentang penerapan <i>Integrasi Berkelanjutan</i> menggunakan <b>BuildBot</b> .  Misalnya, yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> bagi saya paling informatif.  Ada contoh lain - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lebih sederhana</a> .  Artikel-artikel ini dapat dibumbui dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh dari manual</a> , dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> setelahnya, dalam bahasa Inggris.  Coupe adalah titik awal yang baik.  Setelah membaca artikel ini, Anda mungkin ingin segera melakukan sesuatu di <b>BuildBot</b> . <br><br>  Hentikan itu!  Apakah ada yang bahkan menggunakannya dalam proyek mereka?  Ternyata ya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">banyak yang sudah</a> menerapkannya dalam tugasnya.  Anda dapat menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh</a> penggunaan <b>BuildBot</b> di arsip kode Google. <br><br>  Jadi apa logika orang menggunakan <b>buildbot</b> ?  Lagi pula, ada alat lain: <b>CruiseControl</b> dan <b>Jenkins</b> .  Saya akan menjawab seperti ini.  Untuk sebagian besar tugas, <b>Jenkins</b> akan cukup.  <b>BuildBot</b> , pada gilirannya, lebih adaptif, dan tugas-tugas di sana diselesaikan semudah di <b>Jenkins</b> .  Pilih kamu  Tetapi karena kami mencari alat untuk proyek target yang sedang berkembang, mengapa tidak memilih yang memungkinkan kami, mulai dari langkah-langkah sederhana, untuk mendapatkan sistem pembangunan yang memiliki interaktivitas dan antarmuka yang unik. <br><br>  Bagi mereka yang target proyeknya ditulis dengan python, muncul pertanyaan: "Mengapa tidak memilih sistem integrasi yang memiliki antarmuka yang jelas dalam hal bahasa yang digunakan dalam proyek?".  Dan sekarang saatnya untuk memperkenalkan manfaat <b>BuildBot</b> . <br><blockquote>  Jadi, "kuartet instrumental" kami.  Bagi saya sendiri, saya mendefinisikan empat fitur <b>BuildBot</b> : <br><ol><li>  Ini adalah kerangka kerja open source di bawah GPL </li><li>  Ini menggunakan python sebagai alat konfigurasi dan menjelaskan tindakan yang diperlukan. </li><li>  Ini adalah peluang untuk menerima respons dari mesin tempat perakitan berlangsung. </li><li>  Ini akhirnya persyaratan minimum untuk Host.  Penyebaran membutuhkan python dan twisted, dan tidak ada mesin virtual atau mesin java yang diperlukan. </li></ol><br></blockquote><a name="Concepts"></a><h3>  2. Konsep yang dipimpin oleh BuildMaster </h3><hr><br><img src="https://habrastorage.org/webt/so/qs/u1/soqsu1skae_0xuktzdemfv-n3yq.png" alt="BuildBot BuildMaster"><br><br>  Pusat arsitektur distribusi tugas adalah <b>BuildMaster</b> .  Ini adalah layanan yang: <br><br><ul><li>  <b>melacak</b> perubahan di pohon sumber proyek </li><li>  <b>mengirimkan</b> perintah yang harus dijalankan oleh layanan Pekerja untuk membangun proyek dan mengujinya </li><li>  <b>memberi tahu</b> pengguna tentang hasil tindakan yang diambil </li></ul><br>  <b>BuildMaster</b> dikonfigurasi melalui file <i>master.cfg</i> .  File ini adalah akar dari <b>BuildMaster</b> .  Nanti saya akan menunjukkan bagaimana root ini dibuat.  File <i>master.cfg itu sendiri</i> mengandung python, skrip yang menggunakan panggilan <b>BuildBot</b> . <br><br>  <b>BuildBot</b> paling penting <b>berikutnya</b> disebut <b>Worker</b> .  Layanan ini dapat dijalankan pada host yang berbeda dengan OS yang berbeda, atau mungkin di tempat <b>BuildMaster berada</b> .  Itu juga dapat ada di lingkungan virtual yang disiapkan khusus dengan paket dan variabel sendiri.  Lingkungan virtual ini dapat disiapkan menggunakan utilitas python seperti <i>vertualenv, venv</i> . <br><br>  <b>BuildMaster</b> menyiarkan perintah kepada setiap <b>Worker</b> , yang, pada gilirannya, mengeksekusi mereka.  Artinya, ternyata proses membangun dan menguji proyek dapat pergi ke <b>Pekerja</b> di Windows dan Pekerja lain di linux. <br><br>  <i>Proses checkout</i> kode sumber proyek terjadi pada setiap <b>Pekerja</b> . <br><br><a name="Install"></a><h3>  3. Instalasi </h3><hr><br>  Jadi ayo pergi.  Saya akan menggunakan Ubuntu 18.04 sebagai tuan rumah.  Di atasnya saya akan menempatkan satu <b>BuildMaster</b> -a dan satu <b>Pekerja</b> -a.  Tetapi pertama-tama Anda harus menginstal python3.7: <br><br><pre><code class="bash hljs">sudo apt-get update sudo apt-get install python3.7</code> </pre> <br>  Bagi mereka yang membutuhkan python3.7.2 bukannya 3.7.1, Anda dapat melakukan hal berikut: <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get software-properties-common sudo add-apt-repository ppa:deadsnakes/ppa sudo apt-get install python3.7 sudo ln -fs /usr/bin/python3.7 /usr/bin/python3 pip3 install --upgrade pip</code> </pre><br>  Langkah selanjutnya adalah menginstal <i>Twited</i> dan <b>BuildBot</b> , serta paket yang mengaktifkan fungsionalitas <b>BuildBot</b> -a tambahan. <br><br><pre> <code class="bash hljs">/*   sudo        /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/python3.7/dist-packages*/ <span class="hljs-comment"><span class="hljs-comment">#     Worker- sudo pip install twisted # twisted sudo pip install buildbot #BuildMaster #  pip install pysqlite3 #  sqllite    pip install jinja2 #framework  django,  web     pip install autobahn #Web c   BuildMaster-&gt;Worker pip install sqlalchemy sqlalchemy-migrate #     # Web  BuildBot-a pip install buildbot-www buildbot-grid-view buildbot-console-view buildbot-waterfall-view pip install python-dateutil #   web #         pip install buildbot-worker #Worker #  sudo pip install virtualenv # </span></span></code> </pre><br><a name="master"></a><h3>  4. Langkah pertama </h3><hr><br>  Saatnya membuat <b>BuildMaster</b> .  Kami akan memilikinya di folder <i>/ home / habr / master</i> . <br><pre> <code class="bash hljs">mkdir master buildbot create-master master <span class="hljs-comment"><span class="hljs-comment">#    </span></span></code> </pre> <br><a name="createworker"></a>  Langkah selanjutnya.  Buat <b>Pekerja</b> .  Kami akan memilikinya di folder <i>/ home / habr / pekerja</i> . <br><pre> <code class="bash hljs">mkdir worker buildbot-worker create-worker --<span class="hljs-built_in"><span class="hljs-built_in">umask</span></span>=0o22 --keepalive=60 worker localhost:4000 yourWorkerName password</code> </pre><br>  Ketika Anda memulai <b>Worker</b> , secara default ia akan membuat folder di <i>/ home / habr / pekerja</i> dengan nama proyek, yang ditentukan dalam <i>master.cfg</i> .  Dan dalam folder dengan nama proyek, ia akan membuat direktori <i>build</i> , dan kemudian <i>checkout</i> akan dilakukan di dalamnya.  Direktori kerja untuk <b>Pekerja</b> adalah direktori <i>/ home / habr / yourProject / build</i> . <br><br>  <b>Kunci Emas</b> <br>  Dan sekarang untuk apa yang saya tulis paragraf sebelumnya: skrip yang <b>Master</b> akan minta <b>Pekerja</b> untuk melakukan jarak jauh di direktori ini tidak akan dieksekusi, karena skrip tidak memiliki izin untuk dijalankan.  Untuk memperbaiki situasi, Anda perlu kunci <a name="umask"></a>  <i>--umask = 0o22</i> , yang memberlakukan larangan menulis ke direktori ini, tetapi meninggalkan hak startup.  Dan kita hanya butuh ini. <br><br>  <b>BuildMaster</b> dan <b>Worker</b> membangun koneksi di antara mereka.  Kebetulan itu terputus dan <b>Pekerja</b> menunggu respons dari <b>BuildMaster</b> untuk beberapa waktu.  Jika tidak ada respons yang diterima, koneksi dimulai ulang.  Kunci <b>--keepalive = 60</b> adalah apa yang Anda butuhkan untuk menunjukkan waktu setelah itu <i>menghubungkan</i> reboot. <br><br><a name="Recept"></a><h3>  5. Konfigurasi.  Resep langkah demi langkah </h3><hr><br>  Konfigurasi <b>BuildMaster</b> dilakukan di sisi mesin, tempat kami menjalankan perintah <i>create-master</i> .  Dalam kasus kami, ini adalah direktori <i>/ home / habr / master</i> .  File konfigurasi <i>master.cfg</i> belum ada, tetapi perintah itu sendiri telah membuat file <i>master.cmg.sample</i> .  Anda harus mengganti nama di <i>master.cfg.sample</i> ke <i>master.cfg</i> <br><pre> <code class="bash hljs">mv master.cfg.sample master.cfg</code> </pre> <br>  <i>Mari kita</i> buka <i>master.cfg</i> ini.  Dan kami akan menganalisis dari apa itu.  Dan setelah itu kami akan mencoba membuat file konfigurasi kami sendiri. <br><br><div class="spoiler">  <b class="spoiler_title">master.cfg</b> <div class="spoiler_text"><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>].append(changes.GitPoller( <span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'gitpoller-workdir'</span></span>, branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>, pollInterval=<span class="hljs-number"><span class="hljs-number">300</span></span>)) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"all"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>), treeStableTimer=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.ForceScheduler( name=<span class="hljs-string"><span class="hljs-string">"force"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) factory = util.BuildFactory() factory.addStep(steps.Git(repourl=<span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'incremental'</span></span>)) factory.addStep(steps.ShellCommand(command=[<span class="hljs-string"><span class="hljs-string">"trial"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>], env={<span class="hljs-string"><span class="hljs-string">"PYTHONPATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>})) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append( util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>], factory=factory)) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] = <span class="hljs-string"><span class="hljs-string">"Hello World CI"</span></span> c[<span class="hljs-string"><span class="hljs-string">'titleURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"https://buildbot.github.io/hello-world/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'buildbotURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://localhost:8010/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>] = dict(port=<span class="hljs-number"><span class="hljs-number">8010</span></span>, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c[<span class="hljs-string"><span class="hljs-string">'db'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'db_url'</span></span> : <span class="hljs-string"><span class="hljs-string">"sqlite:///state.sqlite"</span></span>, }</code> </pre><br></div></div><br><a name="BC"></a><h4>  <u>5.1 BuildmasterConfig</u> </h4><br><pre> <code class="python hljs">c = BuildmasterConfig = {}</code> </pre> <br>  <i>BuildmasterConfig</i> - kamus dasar file konfigurasi.  Itu harus terlibat dalam file konfigurasi.  Untuk kemudahan penggunaan, alias <i>"c"</i> dimasukkan dalam kode konfigurasi.  Nama-nama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kunci</a> dalam <i>c ["keyFromDist"]</i> adalah elemen tetap untuk berinteraksi dengan <b>BuildMaster</b> .  Di bawah setiap kunci, objek terkait diganti sebagai nilai. <br><br><a name="Worker"></a><h4>  <u>5.2 pekerja</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'workers'</span></span>] = [worker.Worker(<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>, <span class="hljs-string"><span class="hljs-string">"pass"</span></span>)]</code> </pre> <br>  Kali ini kami menunjukkan daftar <b>Pekerja</b> <b>BuildMaster</b> .  Kami menciptakan <b>Pekerja di</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">atas</a> dengan menetapkan <i>nama-pekerja Anda</i> dan <i>kata sandi</i> .  Sekarang mereka harus ditentukan, bukan <i>contoh-pekerja</i> dan <i>lulus</i> . <br><br><a name="CS"></a><h4>  <u>5.3 change_source</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>].append(changes.GitPoller( <span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'gitpoller-workdir'</span></span>, branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>, pollInterval=<span class="hljs-number"><span class="hljs-number">300</span></span>))</code> </pre><br>  <i>Menggunakan</i> kunci <i>change_source</i> dari kamus <i>c</i> , kami mendapatkan akses ke daftar di mana Anda ingin meletakkan objek yang polling repositori dengan kode sumber proyek.  Contoh ini menggunakan repositori Git, yang disurvei pada beberapa periode tertentu. <br><br>  Argumen pertama adalah jalur ke repositori Anda. <br><br>  <i>workdir</i> adalah path ke folder di mana di sisi <b>Worker</b> , relatif terhadap path <i>/ home / habr / pekerja / proyek Anda / build,</i> git akan menyimpan repositori versi lokal. <br><br>  <i>cabang</i> berisi <i>cabang</i> tertentu di repositori yang harus dipantau. <br><br>  <i>pollInterval</i> berisi jumlah detik setelah <b>BuildMaster</b> akan melakukan polling repositori untuk perubahan. <br><br>  Ada beberapa metode untuk melacak perubahan di repositori proyek. <br><br>  Metode termudah adalah <i>Polling</i> , yang menyiratkan bahwa <b>BuildMaster</b> secara berkala polling server dengan repositori.  Jika <i>komit</i> mencerminkan perubahan dalam repositori, maka <b>BuildMaster</b> dengan beberapa penundaan akan membuat objek <i>perubahan</i> internal dan mengirimkannya ke pengendali event <i>Penjadwal</i> , yang akan memulai langkah-langkah untuk membangun dan menguji proyek pada <i>Pekerja</i> .  Di antara langkah-langkah ini, <i>pembaruan</i> repositori akan ditunjukkan.  Di <b>Worker</b> salinan lokal dari repositori akan dibuat.  Rincian proses ini akan diungkapkan di bawah dalam dua bagian berikutnya <b>( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.4</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5.5</a> )</b> . <br><br>  Metode pelacakan perubahan dalam repositori yang lebih elegan adalah dengan mengirim pesan langsung dari server tempat ia berada di <b>BuildMaster</b> tentang cara mengubah kode sumber proyek.  Dalam hal ini, segera setelah pengembang membuat <i>komit</i> , server dengan repositori proyek akan mengirim pesan ke <b>BuildMaster</b> .  Dan itu, pada gilirannya, akan dicegat dengan membuat objek <i>PBChangeSource</i> .  Selanjutnya, objek ini akan ditransfer ke <i>Penjadwal</i> , yang mengaktifkan langkah-langkah untuk perakitan proyek dan pengujiannya.  Bagian penting dari metode ini adalah bekerja dengan skrip <i>kait</i> server dalam repositori.  Di skrip <i>kait yang</i> bertanggung jawab untuk menangani tindakan selama <i>komit</i> , Anda perlu memanggil utilitas <i>sendchange</i> dan menentukan alamat jaringan <b>BuildMaster</b> .  Anda harus <i>menentukan</i> port jaringan yang akan mendengarkan <i>PBChangeSource</i> .  <i>Omong</i> -omong, <b>PBChangeSource</b> adalah bagian dari <b>BuildMaster</b> .  Metode ini akan memerlukan <i>admin-</i> hak istimewa di server tempat repositori proyek berada.  Pertama, Anda perlu membuat repositori cadangan. <br><br><a name="shedulers"></a><h4>  <u>5.4 penjadwal</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"all"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-string"><span class="hljs-string">'master'</span></span>), treeStableTimer=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>])) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>].append(schedulers.ForceScheduler( name=<span class="hljs-string"><span class="hljs-string">"force"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>]))</code> </pre><br>  <i>penjadwal</i> adalah elemen yang bertindak sebagai pemicu yang menjalankan seluruh rantai perakitan dan pengujian proyek. <br><img src="https://habrastorage.org/webt/sh/1j/jo/sh1jjoo3rog47fsyjgqgorizyfs.png" alt="Penjadwal buildbot"><br><br>  Perubahan-perubahan yang dicatat oleh <i>change_source</i> dikonversi selama operasi <b>BuildBot</b> -a menjadi objek <i>Ubah</i> dan sekarang setiap <i>Sheduler</i> berdasarkan pada mereka membangun permintaan untuk memulai proses membangun proyek.  Namun, itu juga menentukan kapan harus mengirim permintaan ini ke antrian.  Obyek <a name="builder"></a>  <i>Builder</i> membuat antrian permintaan dan memonitor status perakitan saat ini di <b>Worker</b> -e yang terpisah.  <i>Builder</i> ada di <b>BuildMaster</b> -e dan <b>Worker</b> -e.  Dia mengirimkan <i>build</i> spesifik dari <b>BuildMaster</b> ke <b>Worker</b> , serangkaian langkah yang harus diikuti. <br>  Kita melihat bahwa dalam contoh saat ini dari <i>penjadwal tersebut</i> , 2 buah dibuat.  Apalagi masing-masing memiliki tipe sendiri. <br><br>  <i>SingleBranchScheduler</i> adalah salah satu kelas jadwal paling populer.  Ini memantau satu cabang dan dipicu oleh perubahan yang tercatat di dalamnya.  Ketika dia melihat perubahan, dia dapat menunda mengirim permintaan untuk konstruksi (menunda untuk periode yang ditentukan dalam <i>treeStableTimer</i> parameter khusus).  <i>Nama</i> menentukan nama jadwal yang akan ditampilkan di antarmuka <b>BuildBot -web</b> .  <i>Filter</i> diatur dalam <i>ChangeFilter</i> , setelah melewati perubahan di cabang yang meminta jadwal untuk mengirim permintaan build.  Nama <i>builder</i> -a ditentukan dalam <i>builderNames</i> , yang akan kita tentukan sedikit kemudian.  Nama dalam kasus kami akan sama dengan nama proyek: proyek Anda. <br><br>  <i>ForceScheduler adalah hal yang</i> sangat sederhana.  Jenis jadwal ini dipicu oleh klik mouse melalui antarmuka <b>BuildBot -web</b> .  Parameter memiliki esensi yang sama seperti di <i>SingleBranchScheduler</i> . <br><br>  <b>PS No. 3.</b>  <b>Tiba-tiba berguna</b> <br>  <i>Periodik</i> adalah jadwal yang dipicu pada frekuensi waktu-tetap tertentu.  Sepertinya panggilan seperti ini <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> schedulers nightly = schedulers.Periodic(name=<span class="hljs-string"><span class="hljs-string">"daily"</span></span>, builderNames=[<span class="hljs-string"><span class="hljs-string">"full-solaris"</span></span>], periodicBuildTimer=<span class="hljs-number"><span class="hljs-number">24</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span>) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [nightly]</code> </pre><br><a name="buildfactory"></a><h4>  <u>5.5 BuildFactory</u> </h4><br><pre> <code class="python hljs">factory = util.BuildFactory() factory.addStep(steps.Git(repourl=<span class="hljs-string"><span class="hljs-string">'git://github.com/buildbot/hello-world.git'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'incremental'</span></span>)) factory.addStep(steps.ShellCommand(command=[<span class="hljs-string"><span class="hljs-string">"trial"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>], env={<span class="hljs-string"><span class="hljs-string">"PYTHONPATH"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>}))</code> </pre><br>  <i>periodicBuildTimer</i> menetapkan waktu periodisitas ini dalam detik. <br><br>  <i>BuildFactory</i> menciptakan bangunan beton, yang kemudian dikirim oleh <i>tukang</i> ke <b>Pekerja</b> .  <i>BuildFactory</i> menunjukkan langkah-langkah yang harus diikuti oleh <b>Pekerja</b> .  Langkah-langkah ditambahkan dengan memanggil metode <i>addStep.</i> <i><br></i> <br><br>  Langkah pertama yang ditambahkan dalam contoh ini adalah <i>git clean -d -f -f ‚Äìx</i> , lalu <i>git checkout</i> .  Tindakan ini tertanam dalam parameter <i>metode</i> , yang tidak ditunjukkan dengan jelas, tetapi menyiratkan nilai default <i>segar</i> .  Parameter <i>mode = 'incremental'</i> menunjukkan bahwa file-file dari direktori tempat <i>chechout</i> dilakukan, walaupun hilang dari repositori, tetap tidak tersentuh. <br><br>  Langkah kedua yang ditambahkan adalah memanggil skrip <i>percobaan</i> dengan parameter <i>halo</i> di sisi <b>Pekerja</b> dari direktori <i>/ home / habr / pekerja / proyek Anda / build</i> dengan variabel lingkungan PATHONPATH = ... Jadi Anda dapat menulis skrip Anda sendiri dan menjalankannya di sisi <b>Pekerja</b> -a melalui langkah <i>util.ShellCommand</i> .  Script ini dapat dimasukkan langsung ke dalam repositori.  Kemudian selama <i>chechout</i> mereka akan pergi ke <i>/ home / habr / pekerja / Proyek Anda / membangun</i> .  Namun, kemudian ada dua "tapi": <br><ol><li>  <b>Pekerja</b> harus dibuat dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><i>saklar --umask</i></a> sehingga tidak memblokir hak eksekusi setelah <i>checkout</i> -a. </li><li>  Ketika <i>git mendorong</i> skrip-skrip ini, perlu untuk menentukan properti <i>exacutable</i> , sehingga dengan <i>chechout</i> -e Git tidak kehilangan hak untuk mengeksekusi skrip. </li></ol><br><br><a name="builders"></a><h4>  <u>5.6 pembangun</u> </h4><br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"runtests"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"example-worker"</span></span>], factory=factory))</code> </pre><br>  Tentang apa yang dijelaskan <i>Builder di</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Sekarang saya akan berbicara lebih detail tentang cara membuatnya.  <i>BuilderConfig</i> adalah <i>pembangun</i> konstruktor.  Anda dapat menentukan beberapa konstruktor tersebut di <i>c ['builders']</i> , karena ini adalah daftar objek tipe <i>builder</i> .  Sekarang kita akan sedikit menulis ulang contoh dari <b>BuildBot</b> , membawanya lebih dekat ke tugas kita. <br><pre> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>].append(util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>, workernames=[<span class="hljs-string"><span class="hljs-string">"yourWorkerName"</span></span>], factory=factory))</code> </pre><br>  Sekarang saya akan memberi tahu tentang parameter <i>BuilderConfig</i> . <br><br>  <i>name</i> menetapkan <i>pembangun</i> nama -a.  Di sini kami menyebutnya <i>Proyek Anda</i> .  Ini berarti bahwa pada <b>Pekerja</b> ini jalan <i>/ rumah / habr / pekerja / Proyek Anda /</i> akan dibuat.  <i>Sheduler</i> mencari <i>pembangun</i> dengan nama itu. <br><br>  <i>nama pengerjaan</i> berisi daftar <b>Pekerja</b> .  Masing-masing harus ditambahkan ke <i>c ['pekerja']</i> . <br><br>  <i>factory</i> adalah <i>build</i> spesifik yang terkait dengan <i>builder</i> .  Ini akan mengirimkan objek <i>build</i> ke <b>Worker</b> untuk menyelesaikan semua langkah yang membentuk <i>build</i> -a ini. <br><br><a name="myconfig"></a><h3>  6. Contoh konfigurasi sendiri </h3><hr><br>  Berikut adalah contoh arsitektur proyek yang saya usulkan untuk diimplementasikan melalui <b>BuildBot</b> <b><br></b>  . <br><br>  Kami akan menggunakan <i>svn</i> sebagai sistem kontrol versi.  Repositori itu sendiri akan berada di cloud tertentu.  Berikut adalah alamat cloud <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">svn.host/svn/yourProject/trunk ini</a></i> .  Di cloud di bawah <i>svn</i> ada nama pengguna: <i>pengguna</i> , passwd: akun <i>kata sandi</i> .  Skrip yang merupakan langkah <i>build</i> -a juga akan terletak di cabang <i>svn</i> , di <i>folder buildbot / worker_linux yang</i> terpisah.  Skrip ini berada di repositori dengan properti yang <i>dapat dieksekusi</i> disimpan. <br><br>  <b>BuildMaster</b> dan <b>Worker</b> bekerja pada host <i>project.host yang</i> sama.  <b>BuildMaster</b> menyimpan file-nya di folder <i>/ home / habr / master</i> .  <b>Pekerja</b> menyimpan jalur <i>/ rumah / habr / pekerja berikut</i> .  Komunikasi antara proses <b>BuildMaster</b> dan <b>Pekerja</b> <b>dilakukan</b> melalui 4000 port menggunakan protokol <b>BuildBot</b> -a, yaitu protokol <i>'pb'</i> . <br><br>  Proyek target sepenuhnya ditulis dalam python.  Tugasnya adalah melacak perubahannya, membuat file yang dapat dieksekusi, menghasilkan dokumentasi, melakukan pengujian.  Jika terjadi kegagalan, semua pengembang perlu mengirim pesan ke email bahwa ada tindakan yang gagal. <br><br>  Kami akan menghubungkan pemetaan web <b>BuildBot</b> ke port 80 untuk <i>project.host</i> .  Pengiriman adalah opsional.  Perpustakaan <i>bengkok</i> sudah memiliki server web, <b>BuildBot</b> menggunakannya. <br><br>  <b>Kami</b> akan menggunakan <i>sqlite</i> untuk menyimpan informasi internal untuk <b>BuildBot</b> . <br><br>  Untuk mengirim surat, Anda memerlukan host <i>smtp.your.domain</i> - memungkinkan pengiriman email dari <i>projectHost@your.domain</i> tanpa autentikasi.  Juga pada ' <i>smtp</i> ' host protokol didengarkan pada 1025. <br><br>  Ada dua orang yang terlibat dalam proses: <i>admin</i> dan <i>pengguna</i> .  admin mengelola <b>BuildBot</b> .  pengguna adalah orang yang melakukan <i>komit</i> . <br><br>  File exacutable dihasilkan melalui <i>pyinstaller</i> .  Dokumentasi dihasilkan melalui <i>oksigen</i> . <br><br>  Untuk arsitektur ini, saya menulis <i>master.cfg</i> ini: <br><br><div class="spoiler">  <b class="spoiler_title">master.cfg</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, re <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> steps, util, schedulers, worker, changes, reporters c= BuildmasterConfig ={} c[<span class="hljs-string"><span class="hljs-string">'workers'</span></span>] = [ worker.Worker(<span class="hljs-string"><span class="hljs-string">'yourWorkerName'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>) ] c[<span class="hljs-string"><span class="hljs-string">'protocols'</span></span>] = {<span class="hljs-string"><span class="hljs-string">'pb'</span></span>: {<span class="hljs-string"><span class="hljs-string">'port'</span></span>: <span class="hljs-number"><span class="hljs-number">4000</span></span>}} svn_poller = changes.SVNPoller(repourl=<span class="hljs-string"><span class="hljs-string">"https://svn.host/svn/yourProject/trunk"</span></span>, svnuser=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, svnpasswd=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, pollinterval=<span class="hljs-number"><span class="hljs-number">60</span></span>, split_file=util.svn.split_file_alwaystrunk ) c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = svn_poller hourlyscheduler = schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"your-project-schedulers"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>), builderNames=[<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>], properties = {<span class="hljs-string"><span class="hljs-string">'owner'</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>} ) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [hourlyscheduler] checkout = steps.SVN(repourl=<span class="hljs-string"><span class="hljs-string">'https://svn.host/svn/yourProject/trunk'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, method=<span class="hljs-string"><span class="hljs-string">'fresh'</span></span>, username=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, password=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, haltOnFailure=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) projectHost_build = util.BuildFactory() cleanProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Clean"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/pyinstaller_project"</span></span>, <span class="hljs-string"><span class="hljs-string">"clean"</span></span>] ) buildProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Build"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/pyinstaller_project"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>] ) doxyProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Update Docs"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"buildbot/worker_linux/gendoc"</span></span>, []] ) testProject = steps.ShellCommand(name=<span class="hljs-string"><span class="hljs-string">"Tests"</span></span>, command=[<span class="hljs-string"><span class="hljs-string">"python"</span></span>,<span class="hljs-string"><span class="hljs-string">"tests/utest.py"</span></span>], env={<span class="hljs-string"><span class="hljs-string">'PYTHONPATH'</span></span>: <span class="hljs-string"><span class="hljs-string">'.'</span></span>} ) projectHost_build.addStep(checkout) projectHost_build.addStep(cleanProject) projectHost_build.addStep(buildProject) projectHost_build.addStep(doxyProject) projectHost_build.addStep(testProject) c[<span class="hljs-string"><span class="hljs-string">'builders'</span></span>] = [ util.BuilderConfig(name=<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>, workername=<span class="hljs-string"><span class="hljs-string">'yourWorkerName'</span></span>, factory=projectHost_build) ] template_html=<span class="hljs-string"><span class="hljs-string">u'''\ &lt;h4&gt;  : {{ summary }}&lt;/h4&gt; &lt;p&gt;   : {{ workername }}&lt;/p&gt; &lt;p&gt;: {{ projects }}&lt;/p&gt; &lt;p&gt;         : {{ buildbot_url }}&lt;/p&gt; &lt;p&gt;         : {{ build_url }}&lt;/p&gt; &lt;p&gt; WinSCP     c ip:xxx.xx.xxx.xx.   habr/password,   executable    ~/worker/yourProject/build/dist.&lt;/p&gt; &lt;p&gt;&lt;b&gt;    Buildbot&lt;/b&gt;&lt;/p&gt; '''</span></span> sendMessageToAll = reporters.MailNotifier(fromaddr=<span class="hljs-string"><span class="hljs-string">"projectHost@your.domain"</span></span>, sendToInterestedUsers=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, lookup=<span class="hljs-string"><span class="hljs-string">"your.domain"</span></span>, relayhost=<span class="hljs-string"><span class="hljs-string">"smtp.your.domain"</span></span>, smtpPort=<span class="hljs-number"><span class="hljs-number">1025</span></span>, mode=<span class="hljs-string"><span class="hljs-string">"warnings"</span></span>, extraRecipients=[<span class="hljs-string"><span class="hljs-string">'user@your.domain'</span></span>], messageFormatter=reporters.MessageFormatter( template=template_html, template_type=<span class="hljs-string"><span class="hljs-string">'html'</span></span>, wantProperties=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, wantSteps=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [sendMessageToAll] c[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] = <span class="hljs-string"><span class="hljs-string">"The process of bulding"</span></span> c[<span class="hljs-string"><span class="hljs-string">'titleURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://project.host:80/"</span></span> c[<span class="hljs-string"><span class="hljs-string">'buildbotURL'</span></span>] = <span class="hljs-string"><span class="hljs-string">"http://project.host"</span></span> c[<span class="hljs-string"><span class="hljs-string">'www'</span></span>] = dict(port=<span class="hljs-number"><span class="hljs-number">80</span></span>, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c[<span class="hljs-string"><span class="hljs-string">'db'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'db_url'</span></span> : <span class="hljs-string"><span class="hljs-string">"sqlite:///state.sqlite"</span></span> }</code> </pre><br></div></div><br>  Pertama, Anda perlu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">membuat</a> <b>BuildMaster</b> dan <b>Worker</b> -a.  Kemudian tempelkan file <i>master.cfg</i> ini ke <i>/ home / habr / master</i> . <br><br>  Langkah selanjutnya adalah memulai layanan <b>BuildMaster</b> <br><pre> <code class="bash hljs">sudo buildbot start /home/habr/master</code> </pre><br>  Kemudian mulai <b>pekerja-</b> layanan <br><pre> <code class="bash hljs">buildbot-worker start /home/habr/worker</code> </pre><br>  Selesai!  Sekarang <b>Buildbot</b> akan melacak perubahan dan <b>menjalankan</b> <i>komit</i> di <i>svn</i> , mengikuti langkah-langkah membangun dan menguji proyek dengan arsitektur di atas. <br><br>  Di bawah ini saya akan menjelaskan beberapa fitur dari <i>master.cfg di</i> atas <i>.</i> <i><br></i> <br><br><a name="fails"></a><h4>  <u>6.1 Dalam perjalanan ke master.cfg Anda</u> </h4><br>  Saat menulis <i>master.cfg</i> Anda <i>,</i> banyak kesalahan akan terjadi, jadi Anda harus membaca file log.  Ini disimpan di kedua path absolut BuildMaster <b>-home /</b> home/ <b>habr/</b> master/ <i>twistd.log</i> dan <b>Pekerja-</b> sisi dengan jalur absolut <i>/home/habr/worker/twistd.log</i> .  Ketika Anda membaca kesalahan dan memperbaikinya, Anda harus me-restart layanan <b>BuildMaster</b> -a.  Inilah cara melakukannya: <br><pre> <code class="bash hljs">sudo buildbot stop /home/habr/master sudo buildbot upgrade-master /home/habr/master sudo buildbot start /home/habr/master</code> </pre><br><a name="svn"></a><h4>  <u>6.2 Bekerja dengan svn</u> </h4><br><pre> <code class="python hljs">svn_poller = changes.SVNPoller(repourl=<span class="hljs-string"><span class="hljs-string">"https://svn.host/svn/yourProject/trunk"</span></span>, svnuser=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, svnpasswd=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, pollinterval=<span class="hljs-number"><span class="hljs-number">60</span></span>, split_file=util.svn.split_file_alwaystrunk ) c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = svn_poller hourlyscheduler = schedulers.SingleBranchScheduler( name=<span class="hljs-string"><span class="hljs-string">"your-project-schedulers"</span></span>, change_filter=util.ChangeFilter(branch=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>), builderNames=[<span class="hljs-string"><span class="hljs-string">"yourProject"</span></span>], properties = {<span class="hljs-string"><span class="hljs-string">'owner'</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>} ) c[<span class="hljs-string"><span class="hljs-string">'schedulers'</span></span>] = [hourlyscheduler] checkout = steps.SVN(repourl=<span class="hljs-string"><span class="hljs-string">'https://svn.host/svn/yourProject/trunk'</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, method=<span class="hljs-string"><span class="hljs-string">'fresh'</span></span>, username=<span class="hljs-string"><span class="hljs-string">"user"</span></span>, password=<span class="hljs-string"><span class="hljs-string">"password"</span></span>, haltOnFailure=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre><br>  Pertama, lihat <i>svn_poller</i> .  Ini adalah antarmuka yang sama yang secara teratur polling repositori satu menit sekali.  Dalam hal ini, <i>svn_poller</i> hanya mengakses cabang <i>trunk</i> .  Parameter misterius <i>split_file = util.svn.split_file_alwaystrunk</i> menetapkan aturan: cara membagi struktur folder <i>svn</i> menjadi cabang.  Dia menawarkan mereka cara yang relatif.  Pada gilirannya, <i>split_file_alwaystrunk</i> menyederhanakan proses dengan mengatakan bahwa hanya <i>trunk yang ada</i> di repositori. <br><br>  Di <i>Penjadwal</i> , <i>ChangeFilter ditentukan</i> , yang melihat <i>Tidak Ada</i> dan mengaitkan cabang <i>trunk</i> dengannya sesuai dengan asosiasi yang ditentukan melalui <i>split_file_alwaystrunk</i> .  Menanggapi perubahan di <i>bagasi</i> , itu mulai <i>pembangun</i> bernama <i>Proyek Anda</i> . <br><br>  <i>properti di</i> sini diperlukan sehingga admin menerima buletin dari majelis dan hasil pengujian sebagai pemilik proses. <br><br>  Langkah <i>checkout</i> <i>build</i> -a dapat menghapus semua file yang ada di versi lokal dari repositori <b>Worker</b> .  Kemudian lakukan <i>pembaruan</i> penuh <i>svn</i> .  Mode ini dikonfigurasi melalui <i>mode</i> parameter <i>= penuh</i> , <i>metode = segar</i> .  Parameter <i>haltOnTailure</i> menunjukkan bahwa jika <i>pembaruan svn</i> <i>tidak berhasil</i> , maka seluruh proses perakitan dan pengujian harus ditangguhkan, karena langkah-langkah selanjutnya tidak masuk akal. <br><br><a name="reporter"></a><h4>  <u>6.3 Surat kepada Anda: wartawan berwenang untuk menyatakan</u> </h4><br>  <i>wartawan</i> adalah layanan notifikasi surat. <br><pre> <code class="python hljs">template_html=<span class="hljs-string"><span class="hljs-string">u'''\ &lt;h4&gt;  : {{ summary }}&lt;/h4&gt; &lt;p&gt;   : {{ workername }}&lt;/p&gt; &lt;p&gt;: {{ projects }}&lt;/p&gt; &lt;p&gt;         : {{ buildbot_url }}&lt;/p&gt; &lt;p&gt;         : {{ build_url }}&lt;/p&gt; &lt;p&gt; WinSCP     c ip:xxx.xx.xxx.xx.   habr/password,   executable    ~/worker/yourProject/build/dist.&lt;/p&gt; &lt;p&gt;&lt;b&gt;    Buildbot&lt;/b&gt;&lt;/p&gt; '''</span></span> sendMessageToAll = reporters.MailNotifier(fromaddr=<span class="hljs-string"><span class="hljs-string">"projectHost@your.domain"</span></span>, sendToInterestedUsers=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, lookup=<span class="hljs-string"><span class="hljs-string">"your.domain"</span></span>, relayhost=<span class="hljs-string"><span class="hljs-string">"smtp.your.domain"</span></span>, smtpPort=<span class="hljs-number"><span class="hljs-number">1025</span></span>, mode=<span class="hljs-string"><span class="hljs-string">"warnings"</span></span>, extraRecipients=[<span class="hljs-string"><span class="hljs-string">'user@your.domain'</span></span>], messageFormatter=reporters.MessageFormatter( template=template_html, template_type=<span class="hljs-string"><span class="hljs-string">'html'</span></span>, wantProperties=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, wantSteps=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [sendMessageToAll]</code> </pre><br>  Itu dapat mengirim pesan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">banyak cara</a> . <br><br>  <i>MailNotifier</i> menggunakan email untuk mengirim notifikasi. <br><br>  <i>template_html</i> menetapkan <i>template</i> teks untuk buletin.  Untuk membuat markup, gunakan html.  Ini dimodifikasi oleh mesin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><i>jinja2</i></a> (dapat dibandingkan dengan <i>Django</i> ).  <b>BuildBot</b> memiliki serangkaian variabel, yang nilainya disubstitusi ke dalam templat dalam proses pembentukan teks pesan.  Variabel-variabel ini tertulis dalam {{double curly braces}}.  Jadi, misalnya, <i>ringkasan</i> menampilkan status operasi yang diselesaikan, mis. Sukses atau gagal.  Dan <i>proyek</i> akan menampilkan <i>Proyek Anda</i> .  Jadi, menggunakan perintah kontrol di <i>jinja2</i> , variabel <i>BuildBot</i> , dan pemformat string python, Anda bisa membuat pesan yang sangat informatif. <br><br>  <i>MailNotifier</i> berisi argumen berikut. <br><br>  <i>fromaddr</i> - alamat dari mana setiap orang akan menerima buletin. <br><br>  <i>sendToInterestedUsers</i> = Benar mengirim pesan kepada pemilik dan pengguna yang membuat <i>komit</i> . <br><br>  <i>lookup</i> - suffix yang akan ditambahkan ke nama-nama pengguna yang menerima buletin.  Jadi <i>admin</i> sebagai pengguna akan menerima buletin di admin@your.domain. <br><br>  <i>relayhost</i> menentukan nama host di mana server <i>smtp</i> terbuka, dan <i>smptPort</i> menentukan nomor port yang didengarkan oleh server <i>smtp</i> . <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode = "warning"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengatakan bahwa pengiriman surat hanya boleh dilakukan jika setidaknya ada satu langkah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pembangunan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang diakhiri dengan status kegagalan atau peringatan. Jika berhasil, pengiriman surat tidak diperlukan. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extraRecipient</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berisi daftar individu yang harus </font><i><font style="vertical-align: inherit;">dikirimi</font></i><font style="vertical-align: inherit;"> surat kepada pemilik dan orang yang membuat </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">messageFormatter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah objek yang mendefinisikan format pesan, templatnya, dan sekumpulan variabel yang tersedia dari </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jinja2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Parameter seperti </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wantProperties = True</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wantSteps = True</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menentukan set variabel yang tersedia ini. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan ['layanan'] = [sendMessageToAll]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menyediakan daftar layanan, di antaranya adalah milik kami</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reporter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><a name="goodboy"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami berhasil! </font><font style="vertical-align: inherit;">Selamat saya</font></font></h3><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat konfigurasi kami sendiri dan melihat fungsionalitas yang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mampu dibangun</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oleh </font><b><font style="vertical-align: inherit;">BuildBot</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini, saya pikir, cukup untuk memahami apakah alat ini diperlukan untuk membuat proyek Anda. </font><font style="vertical-align: inherit;">Apakah dia menarik bagi Anda? </font><font style="vertical-align: inherit;">Akankah ini berguna bagi Anda? </font><font style="vertical-align: inherit;">Apakah nyaman untuk bekerja dengannya? </font><font style="vertical-align: inherit;">Lalu saya menulis artikel ini untuk alasan yang bagus.</font></font><br><br>  Dan satu hal lagi.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin komunitas profesional menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuildBot</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menjadi lebih luas, manual diterjemahkan, dan lebih banyak contoh. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih atas perhatiannya. </font><font style="vertical-align: inherit;">Semoga beruntung</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id460501/">https://habr.com/ru/post/id460501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id460491/index.html">Sensor suhu dan kelembaban Arduino dengan pengiriman dan perencanaan (Bagian 1)</a></li>
<li><a href="../id460493/index.html">‚ÄúKiller apps‚Äù untuk PC dari tahun 80-an: VisiCalc dan WordStar</a></li>
<li><a href="../id460495/index.html">Container-to-pipeline: CRI-O sekarang menjadi default di OpenShift Container Platform 4</a></li>
<li><a href="../id460497/index.html">Penggunaan intuitif metode Monte Carlo dengan rantai Markov</a></li>
<li><a href="../id460499/index.html">Tiga pemenang Dijkstra Prize: bagaimana Hydra 2019 dan SPTDC 2019 pergi</a></li>
<li><a href="../id460503/index.html">Konfigurasi nirkabel Raspberry PI 3 B +</a></li>
<li><a href="../id460505/index.html">Pikat tiga persilangan, atau Mengapa proyek sangat sulit diselesaikan tepat waktu</a></li>
<li><a href="../id460507/index.html">XEN dan masa depan otomotif: bagaimana hypervisor open-source menjadi pesaing untuk solusi otomotif komersial</a></li>
<li><a href="../id460509/index.html">Bagaimana proxy penduduk membantu dalam bisnis: kasus nyata menggunakan Infatica dalam Penambangan Data</a></li>
<li><a href="../id460511/index.html">Penyesuaian PHP-FPM: menggunakan pm static untuk kinerja maksimum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>