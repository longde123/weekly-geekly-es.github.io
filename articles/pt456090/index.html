<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå¥ üéâ üñºÔ∏è Introdu√ß√£o ao teste de unidade no Unity üë®üèø‚Äçüè´ üëêüèø ‚õèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ est√° curioso para saber como o teste de unidade funciona no Unity? N√£o sabe ao certo o que √© o teste de unidade? Se voc√™ respondeu positivamente ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o ao teste de unidade no Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456090/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg" alt="imagem"></div><br>  Voc√™ est√° curioso para saber como o teste de unidade funciona no Unity?  N√£o sabe ao certo o que √© o teste de unidade?  Se voc√™ respondeu positivamente a essas perguntas, este tutorial ser√° √∫til para voc√™.  Com isso, voc√™ aprender√° o seguinte sobre o teste de unidade: <br><br><ul><li>  O que √© isso </li><li>  Seu benef√≠cio </li><li>  Vantagens e desvantagens </li><li>  Como funciona no Unity usando o Test Runner </li><li>  Como escrever e executar testes de unidade que ser√£o testados </li></ul><br><blockquote>  <em>Nota</em> : este tutorial pressup√µe que voc√™ esteja familiarizado com a linguagem C # e os conceitos b√°sicos de desenvolvimento no Unity.  Se voc√™ √© novo no Unity, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">verifique primeiro os outros tutoriais neste mecanismo</a> . </blockquote><h2>  O que √© um teste de unidade? </h2><br>  Antes de se aprofundar no c√≥digo, √© importante entender claramente o que √© o teste de unidade.  Simplificando, o teste de unidade est√° testando ... unidades. <br><br>  <em>O teste de unidade</em> (idealmente) foi projetado para testar uma unidade de c√≥digo separada.  A composi√ß√£o de uma "unidade" pode variar, mas √© importante lembrar que o teste de unidade deve testar exatamente um "elemento" de cada vez. <br><a name="habracut"></a><br>  Testes de unidade precisam ser criados para verificar se um pequeno trecho de c√≥digo l√≥gico em um cen√°rio espec√≠fico √© executado exatamente como o esperado.  Isso pode ser dif√≠cil de entender antes de voc√™ come√ßar a escrever seus pr√≥prios testes de unidade, ent√£o vamos ver um exemplo: <br><br>  Voc√™ escreveu um m√©todo que permite ao usu√°rio inserir um nome.  O m√©todo √© escrito para que os n√∫meros n√£o sejam permitidos no nome e o pr√≥prio nome possa consistir em apenas dez ou menos caracteres.  Seu m√©todo intercepta o pressionamento de tecla de cada tecla e adiciona o caractere correspondente ao campo de <code>name</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateNameWithCharacter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">: character</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (!Char.IsLetter(char)) { return; } // 2 if (name.Length &gt; 10) { return; } // 3 name += character; }</span></span></code> </pre> <br>  O que est√° acontecendo aqui: <br><br><ol><li>  Se o caractere n√£o for uma letra, o c√≥digo sair√° da fun√ß√£o previamente e n√£o o adicionar√° √† string. </li><li>  Se o nome tiver dez ou mais caracteres, o c√≥digo n√£o permitir√° que o usu√°rio adicione outro caractere. </li><li>  Se essas duas verifica√ß√µes forem aprovadas, o c√≥digo adicionar√° um caractere ao final do nome. </li></ol><br>  Esta unidade pode ser testada, porque √© um "m√≥dulo" do trabalho realizado.  Os testes de unidade <i>aplicam a</i> l√≥gica do m√©todo. <br><br><h2>  Exemplo de teste de unidade </h2><br>  Como escrevemos testes de unidade para o m√©todo <code>UpdateNameWithCharacter</code> ? <br><br>  Antes de come√ßar a implementar esses testes de unidade, precisamos considerar cuidadosamente o que esses testes fazem e criar nomes para eles. <br><br>  D√™ uma olhada nos exemplos de nome de teste de unidade abaixo.  Dos nomes, deve ficar claro que eles verificam: <br><br> <code>UpdateNameDoesntAllowCharacterAddingToNameIfNameIsTenOrMoreCharactersInLength</code> <br> <br> <code>UpdateNameAllowsLettersToBeAddedToName</code> <br> <br> <code>UpdateNameDoesntAllowNonLettersToBeAddedToName</code> <br> <br>  A partir desses nomes de m√©todos de teste, vemos que realmente verificamos se a "unidade" de trabalho √© <code>UpdateNameWithCharacter</code> pelo m√©todo <code>UpdateNameWithCharacter</code> .  Esses nomes de teste podem parecer muito longos e detalhados, mas s√£o bons para n√≥s. <br><br>  Cada teste de unidade que voc√™ escreve faz parte de um conjunto de testes.  <em>O conjunto de testes</em> cont√©m todos os testes de unidade relacionados ao grupo l√≥gico funcional (por exemplo, "testes de unidade de batalha").  Se algum teste do kit falhar, todo o conjunto de testes falhar√°. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20d/1e7/0ed/20d1e70ed7231be0c0cfd5f6f082751c.png"></div><br><h2>  Lan√ßamento do jogo </h2><br>  Abra o <em>projeto Crashteroids Starter</em> (voc√™ pode baix√°-lo <a href="">aqui</a> ) e abra a cena do <em>jogo</em> na pasta <em>Assets / RW / Scenes</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/029/6fd/316/0296fd31696c7e75eeea4ec626709277.jpg"></div><br>  Clique em <em>Play</em> para iniciar o Crashteroids e, em seguida, clique no bot√£o <em>Start Game</em> .  Mova a nave espacial com as setas <em>esquerda</em> e <em>direita</em> do teclado. <br><br>  Para disparar um raio laser, pressione a <em>barra de espa√ßo</em> .  Se o feixe atingir o aster√≥ide, a pontua√ß√£o aumentar√° em um.  Se um aster√≥ide colidir com um navio, o navio explode e o jogo termina (com a capacidade de come√ßar de novo). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/cea/c40/c2fceac408455035e41f3c9c268ff448.jpg"></div><br>  Tente jogar um pouco e certifique-se de que ap√≥s a colis√£o do aster√≥ide com o navio apare√ßa a inscri√ß√£o Game Over. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b5/55f/fa6/0b555ffa69f33fb09fb17204197af889.jpg"></div><br><h2>  Introdu√ß√£o ao Unity Test Runner </h2><br>  Agora que sabemos como o jogo funciona, √© hora de escrever testes de unidade para verificar se tudo funciona como deveria.  Portanto, se voc√™ (ou outra pessoa) decidir atualizar o jogo, voc√™ ter√° certeza de que a atualiza√ß√£o n√£o quebrar√° nada que funcionou antes. <br><br>  Para escrever testes, voc√™ primeiro precisa aprender sobre o Unity Test Runner.  <em>O Test Runner</em> permite executar testes e verificar se eles s√£o aprovados com √™xito.  Para abrir o Unity Test Runner, selecione <em>Janela ‚ñ∏ Geral ‚ñ∏ Test Runner</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f48/f31/aa4/f48f31aa4fc16c486b2161c75ba772af.jpg"></div><br>  Depois que o Test Runner abrir em uma nova janela, voc√™ poder√° simplificar sua vida clicando na janela Test Runner e <em>arrastando</em> -a para o local pr√≥ximo √† janela Scene. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e10/25b/408/e1025b408f785453827a962ce33aff67.gif"></div><br><h2>  Preparando NUnit e pastas de teste </h2><br>  O Test Runner √© um recurso de teste de unidade fornecido pelo Unity, mas usa a estrutura do <em>NUnit</em> .  Quando voc√™ come√ßar a trabalhar com testes de unidade com mais seriedade, recomendo estudar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wiki no NUnit</a> para saber mais.  Sobre tudo o que voc√™ precisa pela primeira vez ser√° discutido neste artigo. <br><br>  Para executar os testes, primeiro precisamos criar uma pasta de teste na qual as classes de teste ser√£o armazenadas. <br><br>  Na janela <em>Projeto,</em> selecione a pasta <em>RW</em> .  D√™ uma olhada na janela <em>Test Runner</em> e verifique se <em>PlayMode est√°</em> selecionado. <br><br>  Clique no bot√£o chamado <em>Criar pasta de montagem de teste do PlayMode</em> .  Voc√™ ver√° uma nova pasta aparecer na pasta RW.  Estamos satisfeitos com o nome padr√£o de <em>testes</em> , para que voc√™ possa simplesmente pressionar <em>Enter</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/be4/df3/5f5be4df386c8f262c4a3c257b55319f.gif"></div><br>  Voc√™ pode estar se perguntando o que essas duas guias diferentes est√£o dentro do Test Runner. <br><br>  A guia <em>PlayMode √©</em> usada para testes realizados no modo Play (quando o jogo est√° sendo executado em tempo real).  Os testes na guia <em>EditMode s√£o</em> executados fora do modo Play, o que √© conveniente para testar itens como comportamentos personalizados no Inspector. <br><br>  Neste tutorial, abordaremos os testes do PlayMode.  Mas quando voc√™ se sentir confort√°vel, tente experimentar os testes no EditMode.  <em>Ao trabalhar com o Test Runner neste tutorial, sempre verifique se a guia PlayMode est√° selecionada</em> . <br><br><h2>  O que h√° na su√≠te de testes? </h2><br>  Como aprendemos acima, um teste de unidade √© uma fun√ß√£o que testa o comportamento de um pequeno peda√ßo espec√≠fico de c√≥digo.  Como o teste de unidade √© um m√©todo, para execut√°-lo, ele deve estar no arquivo de classe. <br><br>  O Test Runner ignora todos os arquivos de classe de teste e executa testes de unidade a partir deles.  Um arquivo de classe contendo testes de unidade √© chamado de su√≠te de testes. <br><br>  No conjunto de testes, subdividimos logicamente nossos testes.  Devemos separar o c√≥digo de teste em conjuntos l√≥gicos separados (por exemplo, um conjunto de testes para a f√≠sica e um conjunto separado para a batalha).  Neste tutorial, precisamos de apenas um conjunto de testes e √© hora de criar um. <br><br><h2>  Preparando um Conjunto de Testes e um Conjunto de Testes </h2><br>  Selecione a pasta <em>Testes</em> e, na janela <em>Test Runner</em> , clique no bot√£o <em>Criar Script de Teste na pasta atual</em> .  Nome do novo arquivo <em>TestSuite</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c64/0ab/968/c640ab968dfd79a3c72e2a99bc5daa2c.gif"></div><br>  Al√©m do novo arquivo C #, o mecanismo do Unity tamb√©m cria outro arquivo chamado <em>Tests.asmdef</em> .  Este √© o <em>arquivo de defini√ß√£o de montagem</em> , usado para mostrar ao Unity onde est√£o as depend√™ncias do arquivo de teste.  Isso √© necess√°rio porque o c√≥digo final do aplicativo est√° contido separadamente do c√≥digo de teste. <br><br>  Se voc√™ tiver uma situa√ß√£o em que o Unity n√£o possa encontrar arquivos ou testes de teste, verifique se h√° um arquivo de defini√ß√£o de montagem que inclua seu conjunto de testes.  O pr√≥ximo passo √© configur√°-lo. <br><br>  Para que o c√≥digo de teste tenha acesso √†s classes de jogo, criaremos uma montagem do c√≥digo de classe e definiremos o link na montagem Testes.  Clique na pasta <em>Scripts</em> para selecion√°-la.  Clique com o bot√£o direito nessa pasta e selecione <em>Criar Definition Defini√ß√£o de montagem</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b8/24c/84a/5b824c84ad6686493c41951751030b8d.jpg"></div><br>  Nomeie o arquivo <em>GameAssembly</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21b/bd6/c96/21bbd6c968426c23ea7839dd9f747355.png"></div><br>  Clique na pasta <em>Testes</em> e, em seguida, no arquivo de defini√ß√£o de cria√ß√£o <em>Testes</em> .  No <em>Inspetor,</em> clique no bot√£o de <em>adi√ß√£o</em> sob o cabe√ßalho <em>Refer√™ncias de defini√ß√£o de montagem</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4be/fc3/d13/4befc3d13ea67e5ec94b707d04582a3d.png"></div><br>  Voc√™ ver√° o campo <em>Refer√™ncia ausente</em> .  Clique no <em>ponto</em> ao lado deste campo para abrir a janela de sele√ß√£o.  Selecione o arquivo <em>GameAssembly</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/727/990/57f/72799057fe5ff62ba5c997d5ec2a7563.jpg"></div><br>  Voc√™ deve ver o arquivo de montagem do GameAssembly na se√ß√£o de links.  Clique no bot√£o <em>Aplicar</em> para salvar essas altera√ß√µes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a16/bf5/259/a16bf525984f2f23b819d9b2d0e37a2b.png"></div><br>  Se voc√™ n√£o seguir estas etapas, n√£o poder√° fazer refer√™ncia aos arquivos de classe do jogo dentro dos arquivos de teste de unidade.  Depois de lidar com isso, voc√™ pode prosseguir para o c√≥digo. <br><br><h2>  Escrevemos o primeiro teste de unidade </h2><br>  Clique duas vezes no script <em>TestSuite</em> para abri-lo no editor de c√≥digo.  Substitua todo o c√≥digo por este: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.TestTools; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> NUnit.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { }</code> </pre> <br>  Quais testes precisamos escrever?  Honestamente, mesmo em um jogo min√∫sculo como o Crashteroids, voc√™ pode escrever alguns testes para verificar se tudo est√° funcionando como deveria.  Neste tutorial, nos restringimos a apenas √°reas-chave: reconhecimento de colis√£o e mec√¢nica b√°sica de jogo. <br><br><blockquote>  <em>Nota</em> : quando se trata de escrever testes de unidade de um produto em um n√≠vel de produ√ß√£o, voc√™ deve dedicar tempo suficiente para levar em considera√ß√£o todos os casos de fronteira que precisam ser testados em todas as √°reas do c√≥digo. </blockquote><br>  Como primeiro teste, √© bom verificar se os aster√≥ides est√£o realmente se movendo para baixo.  Ser√° dif√≠cil para eles colidirem com o navio se afastarem dele!  Adicione o seguinte m√©todo e vari√°vel privada ao script <em>TestSuite</em> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; <span class="hljs-comment"><span class="hljs-comment">// 1 [UnityTest] public IEnumerator AsteroidsMoveDown() { // 2 GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;("Prefabs/Game")); game = gameGameObject.GetComponent&lt;Game&gt;(); // 3 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); // 4 float initialYPos = asteroid.transform.position.y; // 5 yield return new WaitForSeconds(0.1f); // 6 Assert.Less(asteroid.transform.position.y, initialYPos); // 7 Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  Existem apenas algumas linhas de c√≥digo, mas elas fazem muitas coisas.  Ent√£o, vamos parar e lidar com cada parte: <br><br><ol><li>  Este √© <em>um atributo</em> .  Os atributos definem comportamentos espec√≠ficos do compilador.  Este atributo informa ao compilador Unity que o c√≥digo √© um teste de unidade.  Devido a isso, ele aparecer√° no Test Runner ao iniciar os testes. </li><li>  Crie uma inst√¢ncia do jogo.  Todo o resto est√° incorporado no jogo, portanto, quando o criarmos, ele conter√° tudo o que precisa ser testado.  Em um ambiente de produ√ß√£o, provavelmente todos os elementos n√£o estar√£o dentro da mesma pr√©-fabricada.  Portanto, voc√™ precisar√° recriar todos os objetos necess√°rios na cena. </li><li>  Aqui criamos um aster√≥ide para que possamos monitorar se ele est√° se movendo.  O m√©todo <code>SpawnAsteroid</code> retorna uma inst√¢ncia do aster√≥ide criado.  O componente Asteroid possui um m√©todo <code>Move</code> (se voc√™ estiver curioso para saber como o movimento funciona, consulte o script <em>Asteroid</em> em <em>RW / Scripts</em> ). </li><li>  O rastreamento da posi√ß√£o inicial √© necess√°rio para garantir que o aster√≥ide tenha descido. </li><li>  Todos os testes de unidade do Unity s√£o corotinas, portanto, √© necess√°rio adicionar um retorno suave.  Tamb√©m adicionamos um intervalo de tempo de 0,1 segundos para simular a passagem de tempo pela qual o aster√≥ide deveria descer.  Se voc√™ n√£o precisar simular uma etapa do tempo, poder√° retornar nulo. </li><li>  Este √© o est√°gio de <em>afirma√ß√£o</em> , no qual afirmamos que a posi√ß√£o do aster√≥ide √© menor que a posi√ß√£o inicial (ou seja, ele se moveu para baixo).  Compreender asser√ß√µes √© uma parte importante do teste de unidade, e o NUnit fornece v√°rios m√©todos de asser√ß√£o.  Passar ou n√£o passar no teste √© determinado por esta linha. </li><li>  Obviamente, ningu√©m o repreender√° pela bagun√ßa deixada ap√≥s a conclus√£o dos testes, mas outros testes poder√£o falhar devido a isso.  √â sempre importante limpar (excluir ou redefinir) o c√≥digo ap√≥s o teste de unidade, para que, ao executar o pr√≥ximo teste de unidade, n√£o haja artefatos restantes que possam afetar esse teste.  Basta que excluamos o objeto do jogo, pois para cada teste criamos uma inst√¢ncia completamente nova do jogo. </li></ol><br><h2>  Passando nos testes </h2><br>  Bem, voc√™ escreveu seu primeiro teste de unidade, mas como voc√™ sabe se funciona?  Claro, com o Test Runner!  Na janela Test Runner, expanda todas as linhas com setas.  Voc√™ deve ver o teste <code>AsteroidsMoveDown</code> na lista com c√≠rculos em cinza: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4c/5d4/05a/d4c5d405a1aa5aded204806790a07233.jpg"></div><br>  Um c√≠rculo cinza indica que o teste ainda n√£o foi conclu√≠do.  Se o teste foi iniciado e passou, uma seta verde √© exibida ao lado.  Se o teste falhar, um X vermelho ser√° exibido pr√≥ximo a ele. Execute o teste clicando no bot√£o <em>RunAll</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d45/da5/8c9/d45da58c99e0db679578aabab6e5601b.jpg"></div><br>  Isso criar√° uma cena tempor√°ria e executar√° o teste.  Ap√≥s a conclus√£o, voc√™ deve ver que o teste foi aprovado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/640/16b/19e/64016b19e01a68544a1644b61ffb5c57.jpg"></div><br>  Voc√™ escreveu com sucesso seu primeiro teste de unidade, declarando que os aster√≥ides criados est√£o se movendo para baixo. <br><br><blockquote>  <em>Nota</em> : antes de come√ßar a escrever seus pr√≥prios testes de unidade, voc√™ precisa entender a implementa√ß√£o que est√° testando.  Se voc√™ estiver curioso para saber como a l√≥gica que est√° testando est√° funcionando, estude o c√≥digo na pasta <em>RW / Scripts</em> . </blockquote><br><h2>  Usando testes de integra√ß√£o </h2><br>  Antes de avan√ßar mais fundo na toca do coelho dos testes de unidade, √© hora de dizer o que s√£o os testes de integra√ß√£o e como eles diferem dos testes de unidade. <br><br>  <em>Testes de integra√ß√£o</em> s√£o testes que verificam como os "m√≥dulos" do c√≥digo funcionam juntos.  "M√≥dulo" √© outro termo confuso.  Uma diferen√ßa importante √© que os testes de integra√ß√£o devem testar a opera√ß√£o do software na produ√ß√£o real (ou seja, quando um jogador realmente joga um jogo). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f01/824/6f3/f018246f3658664a77104a1fa1dc045b.png"></div><br>  Digamos que voc√™ fez um jogo de batalha em que um jogador mata monstros.  Voc√™ pode criar um teste de integra√ß√£o para garantir que, quando um jogador mate 100 inimigos, uma conquista seja aberta ("Realiza√ß√£o"). <br><br>  Este teste afetar√° v√°rios m√≥dulos de c√≥digo.  O mais prov√°vel √© que ele se refira ao mecanismo f√≠sico (reconhecimento de colis√£o), despachantes inimigos (rastreando a sa√∫de do inimigo e processando danos, bem como passando para outros eventos relacionados) e um rastreador de eventos que rastreia todos os eventos desencadeados (por exemplo, "o monstro est√° morto").  Ent√£o, quando for a hora de desbloquear a conquista, ele poder√° ligar para o gerente de conquista. <br><br>  O teste de integra√ß√£o simular√° o jogador matando 100 monstros e verificar√° se a conquista est√° desbloqueada.  √â muito diferente do teste de unidade porque testa componentes de c√≥digo grandes que trabalham juntos. <br><br>  Neste tutorial, n√£o estudaremos testes de integra√ß√£o, mas isso deve mostrar a diferen√ßa entre a unidade de trabalho (e por que est√° sendo testada) e o m√≥dulo do c√≥digo (e por que est√° sendo testada). <br><br><h2>  Adicionando um teste a um conjunto de testes </h2><br>  O pr√≥ximo teste testar√° o final do jogo quando o navio colidir com um aster√≥ide.  Com o <em>TestSuite</em> aberto no <em>editor de</em> c√≥digo, adicione o teste mostrado abaixo no primeiro teste de unidade e salve o arquivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); Game game = gameGameObject.GetComponent&lt;Game&gt;(); GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-comment"><span class="hljs-comment">//1 asteroid.transform.position = game.GetShip().transform.position; //2 yield return new WaitForSeconds(0.1f); //3 Assert.True(game.isGameOver); Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  J√° vimos a maior parte desse c√≥digo no teste anterior, mas existem algumas diferen√ßas: <br><br><ol><li>  For√ßamos o aster√≥ide e a nave a colidir, dando claramente ao aster√≥ide a mesma posi√ß√£o que a nave.  Isso criar√° uma colis√£o de seus hitboxes e levar√° ao final do jogo.  Se voc√™ estiver curioso para saber como esse c√≥digo funciona, consulte os arquivos <em>Navio</em> , <em>Jogo</em> e <em>Aster√≥ide</em> na pasta Scripts. </li><li>  Uma etapa de tempo √© necess√°ria para que o evento Collision do mecanismo f√≠sico seja acionado, portanto, um atraso de 0,1 segundos √© retornado. </li><li>  Essa afirma√ß√£o √© verdadeira e verifica se o sinalizador <code>gameOver</code> no script Game √© verdadeiro.  A bandeira √© verdadeira durante a opera√ß√£o do jogo, quando a nave √© destru√≠da, ou seja, testamos para garantir que ela seja verdadeira ap√≥s a destrui√ß√£o da nave. </li></ol><br>  Volte √† janela Test Runner e voc√™ ver√° que um novo teste de unidade apareceu l√°. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a8/f52/b28/4a8f52b2875ca90a37b74348435e3da5.jpg"></div><br>  Desta vez, executaremos este em vez de todo o conjunto de testes.  Clique em <em>GameOverOccursOnAsteroidCollision</em> e, em seguida, no bot√£o <em>Executar Selecionado</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e2/0f5/fbd/7e20f5fbd8b4a8a6ff849fea66c90ed1.jpg"></div><br>  E pronto, passamos em outro teste. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/966/02f/869/96602f869c59d8218407a7ce2e57df7d.jpg"></div><br><h2>  Est√°gios de sintonia e destrui√ß√£o </h2><br>  Voc√™ deve ter notado que em nossos dois testes h√° um c√≥digo repetido: onde o objeto Game √© criado e onde um link para o script Game √© definido: <br><br><pre> <code class="cs hljs">GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;();</code> </pre> <br>  Voc√™ tamb√©m notar√° que h√° uma repeti√ß√£o na destrui√ß√£o do objeto Jogo: <br><br><pre> <code class="cs hljs">Object.Destroy(game.gameObject);</code> </pre> <br>  Ao testar isso acontece com muita frequ√™ncia.  Quando se trata de executar testes de unidade, na verdade existem duas fases: a fase <em>Setup</em> e a fase <em>Tear Down</em> . <br><br>  Todo o c√≥digo dentro do m√©todo Setup ser√° executado antes do teste de unidade (neste conjunto) e todo c√≥digo dentro do m√©todo Tear Down ser√° executado ap√≥s o teste de unidade (neste conjunto). <br><br>  √â hora de simplificar nossas vidas, movendo a configura√ß√£o e o c√≥digo de detalhamento para m√©todos especiais.  Abra o editor de c√≥digo e adicione o seguinte c√≥digo no in√≠cio do arquivo <em>TestSuite</em> , logo antes do primeiro atributo [UnityTest]: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SetUp</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); }</code> </pre> <br>  O atributo <code>SetUp</code> indica que esse m√©todo √© chamado antes da <code>SetUp</code> cada teste. <br><br>  Em seguida, adicione o seguinte m√©todo e salve o arquivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">TearDown</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); }</code> </pre> <br>  O atributo <code>TearDown</code> indica que esse m√©todo √© chamado ap√≥s a <code>TearDown</code> cada teste. <br><br>  Depois de preparar o c√≥digo de configura√ß√£o e destrui√ß√£o, exclua as linhas de c√≥digo presentes nesses m√©todos e substitua-as por chamadas aos m√©todos correspondentes.  Depois disso, o c√≥digo ficar√° assim: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; [SetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); } [TearDown] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsteroidsMoveDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> initialYPos = asteroid.transform.position.y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.Less(asteroid.transform.position.y, initialYPos); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = game.GetShip().transform.position; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.True(game.isGameOver); } }</code> </pre> <br><h2>  Teste de game over e tiro a laser </h2><br>  Tendo preparado os m√©todos de ajuste e destrui√ß√£o que simplificam nossas vidas, podemos come√ßar a adicionar novos testes nos quais eles s√£o usados.  O pr√≥ximo teste √© verificar se, quando um jogador clica em <em>Novo jogo</em> , o valor do <em>gameOver bool</em> n√£o <em>√©</em> verdadeiro.  Adicione esse teste ao final do arquivo e salve-o: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NewGameRestartsGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1 game.isGameOver = true; game.NewGame(); //2 Assert.False(game.isGameOver); yield return null; }</span></span></code> </pre> <br>  Isso j√° deve lhe parecer familiar, mas vale a pena mencionar o seguinte: <br><br><ol><li>  Este trecho de c√≥digo prepara esse teste para que o <code>gameOver</code> booleano <code>gameOver</code> seja verdadeiro.  Ao chamar o m√©todo <code>NewGame</code> , ele deve novamente definir o sinalizador como <code>false</code> . </li><li>  Aqui argumentamos que o bool <code>isGameOver</code> √© <code>false</code> , o que deve ser verdadeiro ao invocar um novo jogo. </li></ol><br>  Retorne ao Test Runner e voc√™ ver√° que h√° um novo teste <em>NewGameRestartsGame</em> .  Execute este teste, como fizemos anteriormente, e voc√™ ver√° que ele √© executado com √™xito: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg"></div><br><h2>  Declara√ß√£o do raio laser </h2><br>  O pr√≥ximo teste √© adicionar o teste de que o raio laser disparado pelo navio est√° voando (semelhante ao primeiro teste de unidade que escrevemos).  Abra o arquivo <em>TestSuite</em> no editor.  Adicione o seguinte m√©todo e salve o arquivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserMovesUp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject laser = game.GetShip().SpawnLaser(); // 2 float initialYPos = laser.transform.position.y; yield return new WaitForSeconds(0.1f); // 3 Assert.Greater(laser.transform.position.y, initialYPos); }</span></span></code> </pre> <br>  Aqui est√° o que esse c√≥digo faz: <br><br><ol><li>  Obt√©m um link para o raio laser gerado emitido pelo navio. </li><li>  A posi√ß√£o inicial √© registrada para que possamos verificar se est√° subindo. </li><li>  Essa afirma√ß√£o √© consistente com a afirma√ß√£o do teste de unidade <code>AsteroidsMoveDown</code> , mas agora afirmamos que o valor √© maior (ou seja, o laser sobe). </li></ol><br>      Test Runner.   <em>LaserMovesUp</em>     : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ce/a15/242/2cea152426f82ea491345ead3f0eaa94.jpg"></div><br>      ,   ,          . <br><br><h2>  ,     </h2><br>   ,      .       <em>TestSuite</em>  ,    : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserDestroysAsteroid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 UnityEngine.Assertions.Assert.IsNull(asteroid); }</span></span></code> </pre> <br>    : <br><br><ol><li>      ,        . </li><li>      . ,         <em>UnityEngine.Assertions</em> ?   ,   Unity    <em>Null</em> ,   ¬´¬ª  Null.   NUnit <code>Assert.IsNull()</code> <i>  </i>   Unity  null.    null  Unity,     UnityEngine.Assertions.Assert,   Assert  NUnit. </li></ol><br>   Test Runner    .      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/275/80f/1b2/27580f1b206647e0a2fd09c43577ee8f.jpg"></div><br><h2>     ‚Äî     </h2><br>   - ‚Äî  ,       .      .    ,  <em>  </em> (Test Driven Development, TDD). <br><br>    TDD,        .    , ,     ,     ,    .       ,   ,        . <br><br>   ,       .      -,    ,     . <br><br><blockquote> <em></em> :    ‚Äî    ,    .   ,           .    ¬´¬ª ,   ,      .   ,             .        ,        .       ,     ,            . </blockquote><br>      ,        -   : <br><br><h2>  - </h2><br>  -    ,     : <br><br><ul><li>   ,     ,  . </li><li>     ,    (-    ). </li><li>      . </li><li>      . </li><li>            (   ). </li></ul><br><h2>  - </h2><br>            -.      : <br><br><ul><li>      ,   . </li><li>       . </li><li>      . </li><li> ,        . </li><li>         ,    -. </li><li>     (       ),       . </li><li> -    . </li><li> UI  . </li><li>           . </li><li>              . </li></ul><br><h2>  ,       </h2><br>     .   ,        <em>TestSuite</em>   : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyedAsteroidRaisesScore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 Assert.AreEqual(game.score, 1); }</span></span></code> </pre> <br>   , ,     ,  .     : <br><br><ol><li>      ,      .    ,    . </li><li> ,  game.score   1 (  0,    ). </li></ol><br>      Test Runner,       ,    : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5d/d4c/0ee/e5dd4c0ee4ad72e21a180621c65c11ba.jpg"></div><br>  Awesome!   . <br><br><h2>  Para onde ir a seguir? </h2><br>       .         ,     <a href=""></a> ,        . <br><br>     ,   -      Unity.  ,    -,    ,         -. <br><br>   ?      .        -    .       : <br><br><ul><li>          . </li><li>     . </li><li>        . </li></ul><br>         -,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    mock-</a> .      . <br><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> NUnit</a> ,      NUnit. <br><br>          . <br><br>  ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456090/">https://habr.com/ru/post/pt456090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456078/index.html">Proje√ß√£o de conflito corporativo na conectividade de rede</a></li>
<li><a href="../pt456082/index.html">Como desenvolvemos recomenda√ß√µes personalizadas de produtos</a></li>
<li><a href="../pt456084/index.html">Kubernetes 1.15: Vis√£o geral dos destaques</a></li>
<li><a href="../pt456086/index.html">Storyboards para iOS: an√°lise dos pr√≥s e contras, melhores pr√°ticas</a></li>
<li><a href="../pt456088/index.html">Problemas de an√°lise de big data</a></li>
<li><a href="../pt456092/index.html">Sete sinais preocupantes de que voc√™ depende do clima, mesmo que voc√™ n√£o pense</a></li>
<li><a href="../pt456094/index.html">Lemos as fichas t√©cnicas 2: SPI no STM32; Temporizadores PWM e interrup√ß√µes no STM8</a></li>
<li><a href="../pt456096/index.html">O que o leitor comum de tempos de nerd faz enquanto paira nas nuvens</a></li>
<li><a href="../pt456100/index.html">Agora na nova embalagem - o Kingston A400 no formato M.2 chega ao mercado</a></li>
<li><a href="../pt456102/index.html">Relat√≥rios f√°ceis em C / C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>