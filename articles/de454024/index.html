<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüç≥ üëáüèΩ üôÉ MPPT-Laderegler am STM32F334C8T6 üè™ ‚ÜòÔ∏è üßñüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Kommentare in meinen vorherigen Artikeln haben wiederholt die durchaus vern√ºnftige Frage aufgeworfen: "Warum DC / DC-Wandler auf einem Mikrocontro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MPPT-Laderegler am STM32F334C8T6</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454024/"><p> Die Kommentare in meinen vorherigen Artikeln haben wiederholt die durchaus vern√ºnftige Frage aufgeworfen: <em>"Warum DC / DC-Wandler auf einem Mikrocontroller herstellen, wenn es fertige gibt?"</em>  und als Antwort erw√§hnte ich st√§ndig als auff√§lligstes Beispiel einen Laderegler mit MPPT-Algorithmus.  Aber um dies zu sagen und zu zeigen ... es ist viel interessanter und klarer, also erz√§hle ich Ihnen heute von meinem kleinen tr√§gen Projekt eines solchen Controllers. </p><br><p>  Das Controller-Projekt ist ge√∂ffnet, alle Quelldateien sind auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> verf√ºgbar.  Der Controller selbst ist recht einfach zu implementieren, basiert auf der Topologie von Buck, verwendet verf√ºgbare Komponenten und bietet eine gute Wiederholbarkeit auch ohne viel Wissen.  Das Layout der Anschl√ºsse und Komponenten ist so konzipiert, dass dieser Controller sowohl als Debug-Board f√ºr das Studium der Leistungselektronik als auch als fertiges Ger√§t verwendet werden kann. </p><br><p><img src="https://habrastorage.org/webt/m9/jz/zv/m9jzzv8udvu62hfujno-cwyeerg.jpeg" alt="MRT-Fotos"></p><a name="habracut"></a><br><h1 id="glava-1-chto-takoe-algoritm-mppt-i-zachem-on-nuzhen">  Kapitel 1. Was ist der MPPT-Algorithmus und warum wird er ben√∂tigt? </h1><br><p>  MPPT selbst ist der Prozess zum Ermitteln des maximalen Leistungspunkts eines Solarmoduls.  Das Vorhandensein dieses Algorithmus in der Steuerung erm√∂glicht es unter bestimmten Bedingungen, die Effizienz der Verwendung von Solarmodulen erheblich zu steigern.  Wenn ein Hersteller eine Leistung auf das Panel schreibt, z. B. 100 ... 200 ... 250 ... 320 W, bedeutet dies die Nennleistung des Solarpanels bei einer Sonneneinstrahlung von 1000 W / m <sup>2</sup> .  Nat√ºrlich nehmen die Hersteller die Paneele nicht mit nach drau√üen und warten nicht auf ideale Wetterbedingungen. Daher wird dieser Wert als Standard akzeptiert und auf dem Labortisch "erzeugt". </p><br><p>  Unter realen Bedingungen und bei klarem Himmel reicht die maximale Sonneneinstrahlung von 250 W / m <sup>2</sup> irgendwo in Norwegen bis 900-1000 W / m <sup>2</sup> in Nordafrika.  Daraus folgt, dass im Norden das Solarpanel seine deklarierte Leistung nicht abgeben wird, in Afrika ist es jedoch einfach.  ABER ... Sobald Wolken am Himmel erscheinen, die das Solarpanel verdecken, nimmt der Grad der Sonneneinstrahlung ab.  Erinnern Sie sich an das Wetter des letzten Monats, wie viele ideale Sonnentage haben Sie gesehen?  Wenn Sie aus Krasnodar kommen, dann vielleicht viel, aber die Bewohner des mittleren Wolkenstreifens sind definitiv mehr. </p><br><p>  Was ist eigentlich das Problem ... Mit einer Verringerung der Beleuchtung des Solarmoduls √§ndert sich die Position des maximalen Leistungspunkts (TMM) auf dem CVC des realen Solarmoduls.  Lassen Sie uns nun herausfinden, was TMM ist ... Dazu nehmen wir ein Solarpanel mit der angegebenen Leistung von 200 W (ich habe Delta BST200-24P) und entfernen die Strom-Spannungs-Kennlinie (I-V) bei einer Sonneneinstrahlung von 1000 W / m <sup>2 daraus</sup> : </p><br><p><img src="https://habrastorage.org/webt/19/of/fo/19offomrype-rernndjj3hb2wqm.png" alt="VAC des Solarpanels"></p><br><p><img src="https://habrastorage.org/webt/qz/ul/97/qzul97qjoj_0vwksddogizi9wkk.jpeg" alt="TTX Solarpanel"></p><br><p>  Wenn Sie sich das Leistungsdiagramm ansehen, wird deutlich die Spitze angezeigt, in der das Panel die maximal m√∂gliche Leistung liefert - dies ist TMM.  Wenn Sie die Linie von diesem Punkt aus absenken, schneidet sie den CVC - die Koordinaten dieses Punkts sind genau das Ergebnis, das Sie finden m√ºssen.  Einfach ausgedr√ºckt: <strong>"MPPT ist der Prozess des Findens eines Punktes auf der I-V-Kennlinie, an dem das Produkt aus Strom und Spannung einen Maximalwert hat."</strong> </p><br><p>  Dar√ºber hinaus ist darauf zu achten, dass das Solarpanel etwas mehr abgeben kann, das ist normal, weil  Ihre Wirksamkeit h√§ngt nicht nur von der Sonneneinstrahlung ab, sondern auch von der Temperatur.  Wenn Sie das Panel in die Sonne stellen, erw√§rmt es sich nach einigen Stunden ziemlich stark und die Leistung sinkt um etwa 10%. </p><br><p>  Lassen Sie uns nun herausfinden, was genau der Laderegler tut und warum er eine MRT ben√∂tigt.  Wie bereits erw√§hnt, √§ndert sich der Sonneneinstrahlungsgrad w√§hrend des Betriebs erheblich: Wolken, bew√∂lktes Wetter, Morgend√§mmerung bzw. Sonnenuntergang, und die I-V-Charakteristik des Solarpanels √§ndert sich ebenfalls: </p><br><p><img src="https://habrastorage.org/webt/um/ll/w_/umllw__pu-2_11x5p3kdytfbjqm.png" alt="CVC vor Sonneneinstrahlung"></p><br><p>  Die Grafik zeigt die I - V - Kennlinie f√ºr 4 F√§lle: 1000, 800, 600 und 400 W / m <sup>2,</sup> und dementsprechend haben wir f√ºr jeden Fall einen eigenen Punkt auf der I - V - Kennlinie, bei dem das Produkt aus Strom und Spannung einen Maximalwert hat.  <strong>Die Aufgabe des Ladereglers mit MPPT besteht darin, den maximalen Leistungspunkt f√ºr bestimmte Wetterbedingungen zu ermitteln.</strong>  Zum Beispiel leben Sie irgendwo in Woronesch, Sie haben W√§rme und viel Sonnenenergie und Sie finden TMM und holen das Beste aus der Energie heraus, aber nach 15 Minuten stieg eine Wolke √ºber Ihre Paneele und schloss die Paneele teilweise und der Sonnenwert √§nderte sich, und daher √§nderte sich die I-V-Charakteristik Paneele.  Damit sich der Laderegler an neue Bedingungen anpassen kann, muss er mit einer bestimmten Frequenz beispielsweise alle 5 Minuten Berechnungen durchf√ºhren und nach TMM nach einem neuen CVC suchen. </p><br><p>  Es gibt viele TMM-Suchalgorithmen, die von den einfachsten "0,8 * U <sub>xx</sub> " bis zu verschiedenen Scanalgorithmen mit neuronalen Netzen reichen. Ich werde die Algorithmen und ihre Implementierung im Code jedoch in einem separaten Artikel genauer beschreiben.  Ich hoffe, Sie verstehen, was TMM ist und warum wir danach suchen. Jetzt k√∂nnen Sie direkt zur Dr√ºse gehen. </p><br><h1 id="glava-2-tehnicheskie-harakteristiki-i-funkcional-kontrollera">  Kapitel 2. Technische Daten und Controller-Funktionalit√§t </h1><br><p>  Nun muss entschieden werden, welche Steuerung die erforderliche Funktionalit√§t bereitstellen soll.  Zun√§chst l√§dt der Controller die Batterie auf. Daher muss am Ausgang eine CC / CV-Steuerung (Stabilisierung von Strom und Spannung) implementiert werden. Dazu m√ºssen Sie den Strom und die Spannung am Ausgang messen.  Zweitens ist es f√ºr die Suche nach TMM erforderlich, die I - V - Charakteristik des Solarpanels zu messen, was bedeutet, dass Strom und Spannung am Eingang gemessen werden m√ºssen.  Drittens sollte es einen Abw√§rts-Gleichstrom / Gleichstrom geben, der die Eingangsspannung auf 12 oder 24 V senkt. In diesem Fall handelt es sich um einen synchronen Buck.  Auf diese Weise k√∂nnen Sie die Grundfunktionalit√§t des Ger√§ts implementieren. Das Funktionsdiagramm sieht daher folgenderma√üen aus: </p><br><p><img src="https://habrastorage.org/webt/kr/eu/e0/kreue0025-em-j32uy7zfzqo2gw.png" alt="Funktionsplan"></p><br><p>  Wie Sie sehen k√∂nnen, gibt es nichts Kompliziertes, die Schaltung ist dem Beispiel aus diesem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> sehr √§hnlich und die einzigen Unterschiede bestehen in den zus√§tzlichen R√ºckkopplungsschaltungen zur Implementierung des TMM-Suchalgorithmus und des Ladevorgangs.  Dar√ºber hinaus ist es erforderlich, einen Schutz vor √úberhitzung durch Durchstr√∂me zu implementieren, einige Schnittstellen f√ºr die Kommunikation mit der Au√üenwelt hinzuzuf√ºgen und die Firmware bequem zu aktualisieren. </p><br><h5 id="tehnicheskie-harakteristiki">  Technische Eigenschaften: </h5><br><ul><li>  Eingangsspannung: 15 ... 60V </li><li>  Ausgangsspannung: 12 / 24V </li><li>  Nennausgangsstrom: 20A </li><li>  MRT-Algorithmen: Ja </li><li>  Konvertierungsfrequenz: 100 kHz </li><li>  √úberhitzungsschutz: Ja </li><li>  Durch Stromschutz: Ja </li><li>  Batterieschutz: OVP und OCP </li><li>  Schnittstellen: USB, Modbus </li><li>  Ressource: mindestens 50.000 Stunden </li><li>  Gesamtabmessungen: 1109020 mm </li></ul><br><p>  Diese L√∂sung enth√§lt keine besonderen Probleme. Die Hauptursache ist die erh√∂hte Zuverl√§ssigkeit, die Effektivit√§t von TMM-Algorithmen und die Aufrechterhaltung angemessener Steuerungskosten.  Von den Annehmlichkeiten wurde beschlossen, galvanisch entkoppeltes USB zum Einstellen und Flashen des Steuer-Mikrocontrollers zu verlegen. + Es kann zum Debuggen verwendet werden, wenn Sie SWO nicht m√∂gen.  F√ºr die Implementierung der Fernsteuerung und -√ºberwachung wurde der RS-485 installiert, der zuverl√§ssig und kosteng√ºnstig zu implementieren ist und es Ihnen erm√∂glicht, die Kommunikation √ºber eine Entfernung von 1000 Metern zu organisieren.  Von Wi-Fi und anderen Dingen lehnte das Radio sofort ab, weil  Die Steuerung wird normalerweise in einer Metallplatte und optional in einem Stahlbetongeb√§ude betrieben. </p><br><h1 id="glava-3-vybor-komponentov">  Kapitel 3. Komponentenauswahl </h1><br><p>  Auf KDPV ist ersichtlich, dass das Ger√§t aus zwei Leiterplatten besteht: dem 4-Lagen-Steuermodul und der 2-Lagen-Hauptplatine.  Aufmerksam kann sein, dass das Steuermodul der L√∂sung aus dem letzten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> √§hnelt, nur gr√ºndlich √ºberarbeitet.  In der Tat wurde nach dem Testen der vorherigen Version der <em>Steuerplatine</em> und nach Diskussionen in den Kommentaren beschlossen, eine Reihe globaler √Ñnderungen vorzunehmen: </p><br><ul><li>  Verweigerung der vertikalen Installation im Stecker und √úbergang zur horizontalen.  Dies erm√∂glichte es uns, das Problem mit dem Stecker zu l√∂sen und auf die √ºblichen 2,54-mm-PLS zu verzichten sowie die H√∂he des Ger√§ts erheblich zu reduzieren.  Bei der vertikalen Version w√ºrde die H√∂he des Controllers 60 mm und nicht 20 mm betragen, und es besteht eine gro√üe Chance, die Steuerplatine abzubrechen.  Jetzt hebt es sich nicht vom Hintergrund der anderen Komponenten ab und nimmt dennoch wenig Platz ein; </li><li>  Plattenabmessungen auf 90x35 mm reduziert; </li><li>  Der STM32F334R8T6-Controller wurde durch einen kompakteren und billigeren STM32F334C8T6 ersetzt.  Dieser Austausch f√ºhrte auch zu einer Verringerung der Anzahl der Kan√§le zur Steuerung der Halbbr√ºcke von 5 auf 4.  Wie die Praxis gezeigt hat, √ºbernimmt dieser Controller die Steuerung nicht sofort durch 5 Halbbr√ºcken, es sei denn, es handelt sich um sehr einfache Algorithmen.  Auf dieser Grundlage wurde beschlossen, das LQFP-64-Paket zugunsten des LQFP-48 aufzugeben. </li><li>  USB galvanisch isoliert, genauer gesagt, die USB-UART-Br√ºcke hinzugef√ºgt, weil  Der Mikrocontroller selbst verf√ºgt nicht √ºber eine USB-Hardwareschnittstelle. </li><li>  PHY-Chip f√ºr RS-485 von der Steuerplatine entfernt, as  Nicht jeder braucht es und nicht immer, aber f√ºr seine m√∂gliche Verwendung werden ein UART und ein zus√§tzliches GPIO zum Empfangen / Senden der Steuerung an den Anschluss ausgegeben.  Auch jetzt k√∂nnen Sie auf der Hauptplatine galvanisch isoliertes PHY platzieren und sind nicht an meine Entscheidung gebunden. </li><li>  Zus√§tzlich zur SWD-Schnittstelle wurde beschlossen, SWO an den Debugging-Connector auszugeben, um das Debuggen des Programms zu vereinfachen. </li></ul><br><p><img src="https://habrastorage.org/webt/bz/tw/cd/bztwcd9f2vlp49nv4ajjzq5pux4.jpeg" alt="Vorstand"></p><br><p>  Fahren wir nun mit der Auswahl der Komponenten f√ºr den Haupt- (Leistungs-) Teil des Konverters fort.  In meiner vorherigen Geschichte √ºber die Buck-Topologie habe ich √ºber die Auswahl der Leistungskomponenten (Transistoren, Kondensatoren, Induktivit√§ten) und die Methode zur Berechnung ihrer Nennwerte gesprochen.  Heute m√∂chte ich etwas mehr √ºber ebenso wichtige Komponenten sprechen, n√§mlich √ºber den Power Key Management-Treiber, aktuelle Sensoren und mehr. </p><br><h5 id="datchik-toka">  Stromsensor </h5><br><p>  Um die Batterieladung zu steuern und die Strom-Spannungs-Kennlinie des Solarpanels zu messen, muss ein Gleichstrom im Bereich von 0 bis 20 A gemessen werden.  Es gibt nicht viele M√∂glichkeiten, Gleichstrom zu messen. Die effektivsten und einfachsten Methoden sind ein Stromshunt und ein Hall-Effekt-Sensor.  In der ersten Version habe ich eine Reihe von "Shunt + INA194" ausprobiert. Die Option funktioniert im Allgemeinen, aber der Monitor selbst war ziemlich laut und es gab ein Problem beim Messen von Str√∂men unter 3-4A.  Das Problem wurde gel√∂st, indem der Nennwert des Shunts und des Digitalfilters erh√∂ht wurde, aber dann die auf den Shunt in Form von W√§rme abgegebene Leistung zunahm, was ich nicht sehr wollte. </p><br><p>  Anfangs habe ich die Option mit der Verwendung von Hallsensoren sofort geworfen, n√§mlich der ACS-Serie (zum Beispiel ACS758 oder ACS711), weil  Ich habe bereits in der Vergangenheit versucht, sie anzuwenden, aber sie haben viel gelogen und ihr Messbereich ist niedrig.  In einer der Diskussionen sprach ein Mann √ºber die erfolgreiche Erfahrung mit diesen Sensoren. Es stellte sich heraus, dass relativ neue Serien nicht mehr auf die geringste St√∂rung reagierten. Hauptsache, es gab nichts Eisen oder etwas, das in ihrer N√§he magnetisiert werden konnte.  Ich muss Gleichstrom in einem System messen, in dem die √Ñnderungsrate des Stroms nicht hoch ist und daher ein Band von 100 kHz ausreicht.  Aufgrund der Einfachheit und des Preises der L√∂sung habe ich in der zweiten Version des MPPT-Controllers ACS713ELCTR-30A installiert.  Allegro hat zwei Versionen von Sensoren - DC und DC / AC. Ich muss die √Ñnderung nicht messen. Daher liegt die Wahl zugunsten von DC auf, die ebenfalls einen hohen Wert von "Volt pro Ampere" haben.  Dies erm√∂glichte es, nicht nur gro√üe, sondern auch kleine Str√∂me mit einem realen Fehler von ¬± 5% genau zu messen.  Der Schaltkreis dieses Sensors ist √§u√üerst einfach: </p><br><p><img src="https://habrastorage.org/webt/ep/-r/r2/ep-rr2vao5uk4rxhnpkxcibhgos.png" alt="Stromsensorkreis"></p><br><p>  Der Einschluss ist Standard, es gibt keine Magie in der Schaltung. Das einzige, was getan werden muss, ist, den Ausgangsbereich des 0 ... 5 V-Sensors mit dem zu "koordinieren", was der ADC des STM32-Mikrocontrollers messen kann, n√§mlich mit dem Bereich von 0 ... 3,3 V.  Der Sensor hat einen Spannungsausgang, ist linear und eine Erh√∂hung der Ausgangsspannung um 133 mV bedeutet eine Erh√∂hung des durch den Sensor flie√üenden Stroms um 1A.  Basierend darauf betr√§gt die minimale Ausgangsspannung 0 V und die maximale 30 A * 133 mV / A = 3,99 V.  Theoretisch konnte der Spannungsteiler nicht eingestellt werden, weil  Der maximale Strom betr√§gt nur 20A und daher liegt die Ausgangsspannung innerhalb von 2,66 V und gef√§hrdet den ADC-Eingang in keiner Weise. Es ist jedoch besser, auf Nummer sicher zu gehen.  Vielleicht entferne ich nach dem Testen und einem langen Einfahren des Ger√§ts immer noch den Teiler und setze einen Spannungsfolger an den Operationsverst√§rker. </p><br><h5 id="drayver-upravleniya-zatvorami-tranzistorov">  Transistor-Gate-Treiber </h5><br><p>  Schon in der Phase der Idee habe ich beschlossen, die vollst√§ndige galvanische Trennung des Steuerkreises vom Stromkreis sofort aufzugeben. Es ist banal teuer, obwohl es die Interferenzen beseitigt und den digitalen Teil sch√ºtzt.  Die Einf√ºhrung einer galvanischen Trennung von 2 Spannungen und eines Treibers w√ºrde den Preis des Wandlers um 40% erh√∂hen.  Daher musste ich meine bevorzugten Treiber der Infineon 1ED / 1EDI-Serie ablehnen und etwas Anst√§ndiges mit Bootstrap-Leistung f√ºr den oberen Schl√ºssel ausw√§hlen. Meine Wahl fiel auf eine ziemlich neue L√∂sung - NCP5183DR2G.  Der Treiber erwies sich als sehr stabil im Betrieb und ausreichend, um ein Paar Mosfets mit einer Frequenz von 100 kHz zu steuern.  Ich habe ein Minus darin gefunden - das Fehlen eines separaten Eingangs, z. B. ShutDown oder Enable, um den Treiber im Falle eines Unfalls auszuschalten. Um den Schutz zu implementieren, m√ºssen Sie zus√§tzliche diskrete Logik installieren oder den Hardware-Eingang FAULT im STM32F334-Mikrocontroller selbst verwenden.  Ich habe mich f√ºr die zweite Option entschieden und sie hat mich bisher nicht entt√§uscht, obwohl ich anfangs skeptisch war, wie zuverl√§ssig eine solche L√∂sung ist.  Die Transistorsteuerschaltung sieht folgenderma√üen aus: </p><br><p><img src="https://habrastorage.org/webt/lb/ga/kd/lbgakdmt_teki4jkembec5gwgwe.png" alt="Treiberschaltung"></p><br><p>  Die L√∂sung ist einfach und klar. Das einzige, was ich von mir hinzuf√ºgen m√∂chte, ist, dass der C1-Kondensator aus Keramik mit einem X7R-Dielektrikum und vorzugsweise nicht dem faulsten sein sollte. Das Original Yageo / Murata / Samsung ist f√ºr alle ausreichend.  Der Rest des losen Pulvers kann eine einfachere Marke sein.  √úbrigens k√∂nnen Sie in diesem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> √ºber die "Qual der Wahl" des Nennwerts der Gate-Widerst√§nde R1 und R5 lesen. </p><br><h5 id="vyhodnye-kondensatory">  Ausgangskondensatoren </h5><br><p>  Ich habe oben die Priorit√§t der Zuverl√§ssigkeit und der Ressourcen des Konverters angegeben, und daher ist es notwendig, alle Schwachstellen zu beseitigen.  Meiner Meinung nach gibt es bei modernen DC / DC-Wandlern nur eine Schwachstelle - Elektrolytkondensatoren, die nach einer Weile ‚Äûtrocknen‚Äú und sich verschlechtern, was zuerst zu einer Zunahme der Welligkeit und √úberhitzung und dann zum Ausfall des Wandlers f√ºhrt. </p><br><p>  In meinem Laderegler gibt es bis zu zwei solcher Stellen: Kondensatoren am Ein- und Ausgang.  Es wurde beschlossen, die Ausgangselektrolyte durch Festk√∂rperpolymerkondensatoren (wie in Ihren Grafikkarten) zu ersetzen, die viel einfacher mit Str√∂men von mehreren zehn Ampere arbeiten k√∂nnen und eine Ressource haben, die um eine Gr√∂√üenordnung h√∂her ist als die des Elektrolytkondensators h√∂chster Qualit√§t.  Sie haben ein Minus - der Preis, dieses Vergn√ºgen von Panasonic kostet $ 2 / St√ºck, aber es lohnt sich. </p><br><p>  Am Eingang des Ger√§ts kann die Spannung 60 V erreichen, was bedeutet, dass Festk√∂rperpolymerkondensatoren nicht mehr zugef√ºhrt werden k√∂nnen, sie existieren einfach nicht, maximal 35 V.  Zwar gibt es Hybridoptionen, dies ist eine Zwischenverbindung zwischen dem Elektrolyten und einem Festk√∂rperkondensator, sie sind bis zu 100V.  Bei diesem Kondensatortyp wird der fl√ºssige Elektrolyt durch einen past√∂sen ersetzt, wodurch sich seine Ressource mehrmals erh√∂hen l√§sst. </p><br><p><img src="https://habrastorage.org/webt/gl/tf/wd/gltfwd1e_9rxm2hpssaf225lico.jpeg" alt="MRT-Fotos"></p><br><p>  Die aufmerksamsten k√∂nnen feststellen, dass die Ausgangsfestk√∂rperkondensatoren auf zwei Platinen unterschiedlich sind.  Ich denke, jeder "sch√§tzte" die Kosten f√ºr einen 120-uF-35-V-Kondensator, der Elektrolyt von Wurth kostet zehnmal billiger.  Auf dieser Grundlage habe ich mich f√ºr Tests entschieden, um eine Alternative zu den 35SEK330M-Kondensatoren von Panasonic zu kaufen.  Als Alternative gibt es eine solche asiatische Firma, <em>Lelon</em> , die (in ihren Worten) ein vollst√§ndiges Analogon von Panasonic-Kondensatoren herstellt.  Ich habe das Original auf eine Platine gelegt, auf ein anderes Analogon. Die Ger√§te selbst wurden bereits seit ungef√§hr einem Monat getestet. Bis der Unterschied wirklich bemerkt wird, wollen wir sehen, wie die endg√ºltige Ressource aussehen wird. F√ºr diejenigen, die den Preis f√ºnfmal auf 0,4 USD / St√ºck senken m√∂chten, empfehle ich Ihnen, dar√ºber nachzudenken. </p><br><h5 id="obschie-svedeniya-po-komponentam">  Komponenten√ºbersicht </h5><br><p>  Ich m√∂chte gesondert auf die Politik der Auswahl von Komponenten und L√∂sungen eingehen.  Da die Idee die Verwendung dieses Controllers nicht nur zum Lernen auf dem Tisch, sondern auch zum Arbeiten vor Ort beinhaltet, wurde beschlossen, nur vertrauensw√ºrdige Hersteller und keine chinesischen Komponenten (au√üer Erfahrung mit <em>Lelon</em> ) und verschiedene Handwerke mit Aliexpress zu verwenden.  In meiner Version und in der St√ºckliste erscheinen Originale mit Digikey von Herstellern wie Infineon, TI, ON, ST, Yageo, Bourns und anderen.  Grunds√§tzlich verbietet Ihnen niemand, Komponenten mit demselben Aliexpress einfacher zu platzieren, sondern bereit zu sein, die Zuverl√§ssigkeit und Effizienz der Steuerung zu verringern. </p><br><h1 id="glava-4-o-proekte-i-ishodnikah">  Kapitel 4. Informationen zum Projekt und zu den Quellcodes </h1><br><p>  Ich habe bereits in meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel √ºber Buck</a> √ºber Leistungskomponenten und Berechnungsmethoden geschrieben. Sie k√∂nnen ihn hier lesen.  Ich werde nur die Ergebnisse geben, die ich erhalten habe: </p><br><ul><li><p>  Die Induktivit√§t des Leistungsinduktors betr√§gt 30 ŒºH, gewickelt auf einen R32 / 20/10-Ring aus Kool Mu-Material.  Der Ring wird offen mit einem Rand ausgew√§hlt, weil  Experimente mit Frequenz- und Stromanstieg waren geplant; </p><br></li><li><p>  Die Kapazit√§t der Ausgangskondensatoren betr√§gt etwa 300 Mikrofarad, in Wirklichkeit ist die Kapazit√§t deutlich h√∂her, was die Ausgangswelligkeit verringert.  Ich habe versucht, mit 3 Kondensatoren zu arbeiten. Alles ist in Ordnung. Wenn Sie es also wiederholen m√∂chten, k√∂nnen Sie die H√§lfte der Sitze f√ºr die Ausgangskondensatoren leer lassen.  Grunds√§tzlich k√∂nnen Sie versuchen, 6 gew√∂hnliche Elektrolytkondensatoren zu l√∂ten, wenn es nicht m√∂glich ist, Festk√∂rperkondensatoren zu kaufen.  Nach meinen Annahmen funktioniert der Controller problemlos. </p><br></li><li><p>  Transistoren ( <em>IPD053N08N3GATMA1</em> ) Ich habe diejenigen ausgew√§hlt, die ich auf Lager hatte und die ziemlich einfach zu kaufen sind.  Wenn Sie bereits die Schl√ºssel haben oder die von mir nicht kaufen konnten, w√§hlen Sie einen Transistor mit einem Kanalwiderstand von nicht mehr als 8 mOhm und einem Gate von nicht mehr als 100 nC.  Andernfalls sinkt der Wirkungsgrad ausreichend und die Transistoren √ºberhitzen sich erheblich. </p><br></li></ul><br><p>  Es gibt wahrscheinlich auch diejenigen, die zu faul sind, um zu Github zu gehen. Daher lasse ich das vollst√§ndige Ger√§tediagramm im PDF-Format: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Leistungsteil des Ladereglers</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Universelle Steuerkarte</a> </li></ul><br><p>  Der eiserne Teil des Projekts wurde in Altium Designer 19 abgeschlossen, und das Projekt kann auch in Curcuit Studio ge√∂ffnet werden.  F√ºr diejenigen, die sich nicht auf den Kauf von Software oder Piraterie einlassen m√∂chten, gibt es ein schematisches Diagramm in PDF- und Gerber-Dateien. Dies reicht aus, um Leiterplatten zu bestellen und selbst einen MRPT-Controller zu bauen. </p><br><p>    ‚Ä¶     ""             github,         ,          .          dc/dc ,    -, -, -,  ,        . </p><br><h1 id="zaklyuchenie">  Fazit </h1><br><p>       , ..     ,   , ,           .1         .                ‚Äî   10 ,   HIN  LIN   (GND).       ,     ""    . </p><br><p>      PCBway      ,       .     ,     , <del>   </del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ihre Unterst√ºtzung wird f√ºr Hardware ausgegeben und dies wird zu einem interessanten Artikel f√ºhren. </font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe auch noch 2 S√§tze Leiterplatten √ºbrig. Wenn jemand einen Controller zusammenbauen m√∂chte, gebe ich gute H√§nde kostenlos. </font><font style="vertical-align: inherit;">Sie m√ºssen nur Ihre Kommentare und Vorschl√§ge sammeln und, wenn Sie m√∂chten, mir schreiben. </font><font style="vertical-align: inherit;">Diejenigen, die pers√∂nlich schreiben m√∂chten.</font></font></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github-Projekte</font></font></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454024/">https://habr.com/ru/post/de454024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454006/index.html">√úber IT ohne Bindungen: Werbung, Bindung und Umsatz in Unternehmen aus der GUS und den USA</a></li>
<li><a href="../de454010/index.html">Hochschul- und Weiterbildung in IT: Ergebnisse der My Circle-Studie</a></li>
<li><a href="../de454012/index.html">Das Ende der √Ñra der Reparaturger√§te. Wie Apple und Amazon alte Elektronikh√§ndler ausr√§umen</a></li>
<li><a href="../de454016/index.html">3CX v16 Update 1, 3CX App f√ºr iOS Beta und die neue Version von 3CX Call Flow Designer</a></li>
<li><a href="../de454018/index.html">iOS Digest Nr. 6 (17. - 30. Mai)</a></li>
<li><a href="../de454028/index.html">Skizzen mit PHP Russia 2019: sauberer Code, dunkle Magie</a></li>
<li><a href="../de454030/index.html">Odigest: interessant f√ºr Designer der Woche</a></li>
<li><a href="../de454032/index.html">Saubere schnelle Architektur f√ºr Router und Daten√ºbergabe</a></li>
<li><a href="../de454034/index.html">Erstes Modell: Fashion MNIST Dataset</a></li>
<li><a href="../de454036/index.html">6 Wege, um zur H√∂lle der vorgefertigten L√∂sungen zu gelangen und ein oder zwei Millionen zu senken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>