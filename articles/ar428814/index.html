<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👙 🤛🏿 🗨️ مطابقة المنتج باستخدام Elasticsearch لخدمة مراقبة الأسعار المنافسة 🥚 📜 😉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرة أخرى في عام 2017 ، نشأت الفكرة لتطوير خدمة مراقبة الأسعار المنافس. كانت ميزته المميزة عن الخدمات المماثلة الأخرى هي وظيفة المطابقة التلقائية اليوم...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>مطابقة المنتج باستخدام Elasticsearch لخدمة مراقبة الأسعار المنافسة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428814/" style=";text-align:right;direction:rtl">  مرة أخرى في عام 2017 ، نشأت الفكرة لتطوير خدمة مراقبة الأسعار المنافس.  كانت ميزته المميزة عن الخدمات المماثلة الأخرى هي وظيفة المطابقة التلقائية اليومية للبضائع.  يبدو أنه بسبب النقص شبه الكامل في المعلومات حول كيفية القيام بذلك ، قدمت خدمات مراقبة الأسعار فقط إمكانية المقارنة اليدوية من قبل العملاء أنفسهم أو من قبل مشغلي الخدمة بسعر يتراوح من 0.2 إلى 1 روبل لكل حقيقة مقارنة.  يتطلب الوضع الحقيقي ، على سبيل المثال ، مع 10 مواقع و 20000 منتج في كل منها ، أتمتة العملية حتمًا ، لأن المطابقة اليدوية طويلة بالفعل ومكلفة للغاية. <br><br>  سيتم وصف نهج المطابقة التلقائية أدناه باستخدام مثال لعدد من الصيدليات المتنافسة باستخدام تقنية <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Elaticsearch</a> . <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  وصف البيئة </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  نظام التشغيل: Windows 10 </li><li style=";text-align:right;direction:rtl">  الأساس: Elaticsearch 6.2 </li><li style=";text-align:right;direction:rtl">  العميل للطلبات: Postman 6.2 </li></ol><br><h2 style=";text-align:right;direction:rtl">  إنشاء Elaticsearch </h2><br>  تكوين <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مخطط</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ومحلل</a> حقل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المنتج</a> في طلب واحد <br><br><pre style=";text-align:right;direction:rtl"><code class="hljs pgsql">PUT http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app { "mappings": { "product": { "properties": { "name": { "type": "text", "analyzer": "name_analyzer" #        }, "manufacturer": { "type": "text" }, "city_id": { "type": "integer" }, "company_id": { "type": "integer" }, "category_id": { "type": "integer" }, } } }, "settings": { "index": { "analysis": { "analyzer": { "name_analyzer": { "type": "custom", "tokenizer": "standard", #        ,       "char_filter": [ "html_strip", #       html  "comma_to_dot_char_filter" #    ,     ], "filter": [ "word_delimeter_filter", #     "synonym_filter", #    "lowercase" #      ] } }, "filter": { "synonym_filter": { "type": "synonym_graph", "synonyms": [ ", ", ", ", ", ", ", , ", ", ", ", , , ", ", ", ", ", ", , ", ", , ", ", , , -, -", ", , ", ", , , ", ", ", ", ", ", , ", ", , ", ", ", ", ", ", ", ", ", ", , , ", ", ", ", g", "ml, " ] }, "word_delimeter_filter": { "type": "word_delimiter", "type_table": [ ". =&gt; DIGIT", #       "- =&gt; ALPHANUM", "; =&gt; SUBWORD_DELIM", "` =&gt; SUBWORD_DELIM" ] } }, "char_filter": { "comma_to_dot_char_filter": { "type": "mapping", "mappings": [ ", =&gt; ." ] } } } } } }</code> </pre> <br>  على سبيل المثال ، يمكننا أن ننظر إلى الأجزاء التي سيقوم المحلل "name_analyzer" بتفكيك اسم الدواء "مرهم Hyoxysone 10mg + 30mg / g للاستخدام الخارجي لأنبوب 10 جم."  نستخدم طلب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">_analyze</a> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">POST http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app/_analyze { "analyzer" : "name_analyzer", "text" : " 10+30/      10" }</code> </pre> <br>  النتيجة <br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec">{ <span class="hljs-string"><span class="hljs-string">"tokens"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"10"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"30"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"g"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SYNONYM"</span></span>, <span class="hljs-meta"><span class="hljs-meta">#,   </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"g"</span></span></span><span class="hljs-meta">   SYNONYM,  ,          </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">", g"</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 5 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 20, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 21, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 5 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 22, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 26, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 6 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 27, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 30, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 7 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 31, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 40, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 8 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 41, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 51, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 9 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 52, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 56, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 10 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"10"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 57, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 11 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"g"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 60, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SYNONYM"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 12 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 60, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 12 } ] }</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ملء بيانات الاختبار </h2><br>  طلب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">_bulk</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">POST <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/localhost:9200/</span></span>_bulk { <span class="hljs-string"><span class="hljs-string">"index"</span></span>: { <span class="hljs-string"><span class="hljs-string">"_index"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"product"</span></span>, <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">195111</span></span> } } { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" 10+30/      10"</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } { <span class="hljs-string"><span class="hljs-string">"index"</span></span>: { <span class="hljs-string"><span class="hljs-string">"_index"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"product"</span></span>, <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">195222</span></span> } } { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"     10 +30 /: 10 "</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br><h2 style=";text-align:right;direction:rtl">  بحث الخرائط </h2><br>  دع منتج عميلنا الذي نريد أن نجد له جميع المنتجات المماثلة من المنافسين له خصائص <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"     10 +30 /   10 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  باستخدام <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">دليل الأدوية ،</a> نختار اسم الدواء من اسم المنتج.  في هذه الحالة ، كلمة "Hyoxysone".  ستكون هذه الكلمة معيارًا مطلوبًا. <br><br>  نحن أيضًا نقطع جميع الأرقام من الاسم - "10 30 10" ، وستكون أيضًا معيارًا لا غنى عنه.  علاوة على ذلك ، إذا تم تضمين رقم معين مرتين ، فيجب أن يظهر أيضًا مرتين في البضائع الموجودة ، وإلا فإننا سنزيد من فرصة المصادفة مع السلع الخاطئة. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">_طلب بحث</a> <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">GET http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app/product/_search { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"terms"</span></span>: { <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: [ <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span> ] } }, { <span class="hljs-string"><span class="hljs-string">"term"</span></span>: { <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"term"</span></span>: { <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } } } ], <span class="hljs-string"><span class="hljs-string">"must"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"    + /   "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } } ], <span class="hljs-string"><span class="hljs-string">"must"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"match_phrase"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"10 30 10"</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"slop"</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> } } } ] } } ], <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"alenta armacevtika "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } } ] } } ] } }, <span class="hljs-string"><span class="hljs-string">"highlight"</span></span>: { <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: {} } }, <span class="hljs-string"><span class="hljs-string">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> }</code> </pre> <br>  عند الإخراج ، نحصل على معرف البضائع ، بالإضافة إلى اسمها + درجة التحليلات ، مع مطابقة الأجزاء المطابقة. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>Hyoxysone</b> <b>10</b> <b>mg</b> + <b>30</b> <b>mg</b> / <b>g</b> <b>مرهم</b> <b>للاستخدام</b> <b>الخارجي</b> <b>،</b> <b>الأنبوب</b> <b>10</b> <b>جم</b> - درجة الخوارزمية: 69.84 </li><li style=";text-align:right;direction:rtl">  <b>مرهم</b> <b>HYOXISON</b> <b>للاستخدام</b> <b>الخارجي</b> <b>10</b> <b>مجم</b> + <b>30</b> <b>مجم</b> / <b>جم</b> : <b>10</b> <b>جم</b> - تقييم الخوارزمية: 49.79 </li></ul><br><h2 style=";text-align:right;direction:rtl">  الخلاصة </h2><br>  بالتأكيد لن تعطي الطريقة الموضحة دقة مطابقة بنسبة 100٪ ، ولكنها ستسهل إلى حد كبير عملية المطابقة اليدوية للسلع.  مناسب أيضًا للمهام التي لا تتطلب الدقة المطلقة. <br>  بشكل عام ، إذا قمت بتحسين استعلام البحث الخاص بك باستخدام الاستدلال الإضافي وزادت عدد المرادفات ، يمكنك تحقيق نتيجة قريبة من مرضية. <br>  بالإضافة إلى ذلك ، أظهرت اختبارات الأداء التي أجريت على i7 القديم نتائج جيدة.  يتم تنفيذ 10 استعلامات بحث في مجموعة من 200000 منتج في غضون بضع ثوان.  يمكنك أن ترى هذا المثال الحي للطب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a> . <br><br>  اقترح خياراتك وطرق التطابق في التعليقات. <br><br>  شكرا لكم على اهتمامكم! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar428814/">https://habr.com/ru/post/ar428814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar428800/index.html">طهي CSS الكمال</a></li>
<li><a href="../ar428806/index.html">تحليل فحص المستهلك: ما يشترونه في أمازون</a></li>
<li><a href="../ar428808/index.html">القليل من الراحة في حياة الطلاب</a></li>
<li><a href="../ar428810/index.html">18 مادة عن التكنولوجيا الرقمية في الصوت</a></li>
<li><a href="../ar428812/index.html">TypeScript: إلغاء تسلسل JSON إلى فئات باستخدام التحقق من النوع على الخصائص</a></li>
<li><a href="../ar428816/index.html">التصميم متعدد الأبعاد: الشكل - نصائح لتحسين واجهة المستخدم الرسومية لتطبيق Android (وليس فقط) عن طريق تغيير شكل العناصر</a></li>
<li><a href="../ar428818/index.html">DeOldify: برنامج لتلوين الصور بالأبيض والأسود</a></li>
<li><a href="../ar428820/index.html">أنت في منظور الشخص الثالث ثلاثي الأبعاد: Oculus Go + Raspberry Pi</a></li>
<li><a href="../ar428822/index.html">قصة اختراق صغير ، أو خلل ملائم من مزود إنترنت محلي</a></li>
<li><a href="../ar428824/index.html">تلسكوب ما بعد معقول</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>