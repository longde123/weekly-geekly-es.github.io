<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏼 🐳 🌀 Sepuluh orang di 90 ribu situs: bagaimana tidak menjadi gila 🤸🏽 🐐 🍟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, nama saya Vera Sivakova. Saya bekerja dengan mitra utama Yandex.Kassi - Saya menghubungkan toko dan layanan besar, meluncurkan proyek, dan melaku...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sepuluh orang di 90 ribu situs: bagaimana tidak menjadi gila</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/426583/"><p>  Hai, nama saya Vera Sivakova.  Saya bekerja dengan mitra utama Yandex.Kassi - Saya menghubungkan toko dan layanan besar, meluncurkan proyek, dan melakukan perjalanan ke berbagai pertemuan di seluruh dunia.  Secara umum, saya mengikuti bahwa semuanya baik-baik saja. </p><br><p>  Setiap karyawan Yandex.Money dapat mengubah pekerjaan mereka setahun sekali - pilih departemen dan bekerja di sana selama beberapa hari.  Karena itu, sebulan yang lalu, saya duduk di Sapsan dan tiba di St. Petersburg.  Departemen pemantauan bekerja di sana, yang juga memantau bahwa 90.000 situs yang terhubung dengan kantor Kasir berjalan baik, dan kami memutuskan untuk bergabung. </p><br><p><img src="https://habrastorage.org/webt/nk/aw/gc/nkawgcaslqu2prxrf2i8t4rp0qy.png"><br>  <em>Bagaimana tidak menjadi gila?</em>  <em>Tidak persis sama</em> (sumber: reddit.com) </p><br><p>  Ini adalah kisah tentang cara kerja pemantauan kami, dan apa yang saya pelajari dalam beberapa hari di departemen lain. </p><a name="habracut"></a><br><p>  Setiap detik, sekitar 600 transaksi melalui layanan dan semua ini perlu dipantau secara real time - tetapi pada waktu yang tepat apakah ini waktunya untuk membunyikan alarm jika terjadi sesuatu?  Kita perlu melihat secara sistematis segala hal. </p><br><p> Merupakan praktik yang baik untuk menganalisis sistem dari sudut pandang teknis dan tidak melupakan metrik bisnis - jumlah pembayaran, omset, dan parameter lainnya. </p><br><p>  Dalam sistem kecil, pandangan sekilas admin utama (paling sering satu-satunya) sudah cukup.  Tetapi ketika ada banyak proses, karyawan tidak dapat memantau semuanya secara manual, sehingga otomatisasi maksimum akan menjadi strategi terbaik.  Tidak ada yang akan berhasil tanpa sepengetahuan ahli dan upaya tim, karena pemantauan adalah perbaikan terus-menerus, analisis, dan kemampuan untuk memilih metrik dan pemicu yang kompeten.  Mereka akan bekerja jika terjadi penyimpangan dari kondisi yang diberikan dan melaporkan anomali. </p><br><p>  Kami membedakan tiga tingkat pemantauan, yang masing-masing memiliki indikator penting sendiri - tingkat sistem, tingkat logika bisnis, dan tingkat rekanan. </p><br><h2 id="uroven-sistemy">  Tingkat sistem </h2><br><p>  Yang paling penting di sini adalah pemantauan infrastruktur sepanjang waktu.  Dari alat yang kami gunakan Zabbix untuk mengumpulkan data secara real time - ia memberi tahu tentang operasi server dan pusat data, kualitas jaringan, ketersediaan komponen dan sumber data. </p><br><p>  Memantau infrastruktur TI adalah pekerjaan yang sangat bertanggung jawab, karena kegagalan pada level ini penuh dengan ketidakmampuan sistem dan tindakan putus asa.  Oleh karena itu, penting tidak hanya untuk menanggapi masalah "berkedip", tetapi juga untuk menganalisis tren dan data historis - ini akan memungkinkan peringatan tepat waktu dari titik-titik kegagalan potensial dan memprediksi kebutuhan untuk penskalaan.  Aturan ini berfungsi untuk semua indikator dan tingkat pemantauan, termasuk bisnis. </p><br><p>  Untuk titik kritis, ambang batas pemicu harus dipilih di bawah ini.  Misalnya, jika waktu respons dari satu router meningkat, kami mentransfer lalu lintas ke router lain dan menghilangkan penyebabnya pada router pertama.  Ini memicu pemicu peringatan, yang memungkinkan Anda untuk menerima pemberitahuan masalah potensial sangat dini, yang memberikan cadangan waktu untuk respons, kemampuan untuk memprediksi perubahan, dan menghindari bencana. </p><br><h2 id="uroven-biznes-logiki">  Tingkat logika bisnis </h2><br><p>  Setiap tim menentukan proses yang perlu dilacak, prioritas dan metrik pribadi mereka.  Misalnya, tim Kasir memiliki lusinan proses bisnis, seperti pembayaran dengan setiap metode yang tersedia - kartu, dompet elektronik, melalui bank dan terminal online, perdagangan seluler, register pengiriman, dll.  Sebagai alat utama untuk mengumpulkan dan menampilkan data pada karya logika bisnis, kami menggunakan Graphite bersama dengan Grafana. </p><br><p>  Pada tingkat ini, penting untuk mematuhi pendekatan sistematis dan mencoba untuk menjauh dari "karya / tidak bekerja" biner dan tidak bekerja. </p><br><p>  Misalnya, ada metrik "Jumlah pembayaran kartu yang berhasil".  Jika mulai berkedip, itu berarti aliran pekerjaan telah menurun.  Dalam hal ini, Anda perlu memahami apa sebenarnya alasannya, dan memperhitungkan semua komponen yang terlibat dalam proses ini.  Dalam kasus penurunan jumlah transaksi, Anda dapat segera memikirkan fakta bahwa ada kesulitan di sisi bank yang mengakuisisi.  Tetapi grafik menunjukkan bahwa dengan ketersediaan bank, semuanya baik-baik saja.  Maka Anda perlu menyelidiki lebih lanjut, dan pada akhirnya ternyata, misalnya, bahwa semua pertanyaan ada di tata letak: untuk beberapa alasan, tombol "Bayar" telah hilang atau telah menjadi tidak aktif. </p><br><h2 id="uroven-kontragentov">  Level Counterparty </h2><br><p>  Di sini kita berbicara tentang rekanan tertentu - misalnya, mengakuisisi bank dan pedagang. </p><br><p>  Kami telah memilih jadwal dan pemicu terpisah untuk pengakuisisi, ketersediaan yang harus kami lacak sepanjang waktu.  Bagi kami, sebagai layanan pembayaran, stabilitas sangat penting, oleh karena itu, dalam hal kegagalan salah satu bank, kami segera mentransfer aliran ke cadangan. </p><br><p><img src="https://habrastorage.org/webt/go/_c/2e/go_c2eclhtetnklaej4ohkk04qy.png"><br>  <em>Satu bank gagal, tetapi yang lain otomatis terhubung</em> </p><br><p>  Kami belajar untuk mengarahkan alur kerja dengan cukup baik dan tepat waktu jika kesalahan dimulai. </p><br><p><img src="https://habrastorage.org/webt/fe/kz/hn/fekzhnwwc8rkqb0hf7ms_-cfwjo.png"><br>  <em>Salah satu bank mencatat peningkatan kesalahan pembayaran</em> </p><br><p><img src="https://habrastorage.org/webt/13/vf/f-/13vff-8knq05k4j59kovhms8yvs.png"><br>  <em>Diterjemahkan - dan semuanya beres.</em>  <em>Nilai sumbu Y tidak sepadan</em> </p><br><p>  Acquirer dapat gagal karena berbagai alasan di tingkat yang telah dijelaskan - sistem dan logika bisnis.  Tidak ada yang kebal dari masalah yang tidak terduga dan tidak dapat menjamin ketersediaan 100%.  Anda juga perlu mengingat tentang pekerjaan teknis dan rilis yang direncanakan, ketika Anda perlu memonitor dengan cermat kemajuan hubungan.  Masalah redundansi dan pengalihan otomatis sangat penting, karena sederhana berarti menghentikan pembayaran untuk bisnis. </p><br><p>  Kami bekerja dengan beberapa bank sekaligus untuk meminimalkan risiko downtime dan mengoptimalkan pembayaran kartu SR.  SR (tingkat keberhasilan) atau konversi adalah metrik bisnis yang dihitung sebagai rasio dari jumlah pembayaran yang berhasil terhadap jumlah total transaksi.  Perusahaan yang berbeda mengukur konversi dengan caranya sendiri: misalnya, seseorang mulai mengukur dari halaman pembayaran, yang lain setelah mengklik tombol "Bayar".  Tetapi secara umum, SR dipengaruhi oleh banyak faktor berbeda - MCC, apakah ada 3D-Secure dalam pembayaran, geografi pembayar, pembayaran berulang atau tidak.  SR "Rumah Sakit" tidak mungkin untuk ditentukan dan tidak perlu diketahui - dalam setiap kasus itu akan menjadi nilainya sendiri, yang harus dioptimalkan. </p><br><p>  Seluruh variasi kesalahan dapat dibagi menjadi dua kelompok besar. </p><br><ol><li>  <strong>Kesalahan yang dapat dicegah</strong> - misalnya, pembayaran dari negara ini dilarang.  Jika Anda yakin ini bukan serangan penipuan dan Anda memiliki pengguna di seluruh dunia, maka dalam hal ini perlu menghubungkan kemungkinan pembayaran dari kartu dari penerbit mana pun.  Omong-omong, ini dapat dilakukan di akun pribadi Yandex Cashier. </li><li>  <strong>Kesalahan yang tidak dapat dipengaruhi</strong> - misalnya, kartu terkunci.  Di sini hanya penerbitan ulang atau upaya untuk mengulangi pembayaran dengan kartu lain sebagai bagian dari transaksi baru yang akan membantu. </li></ol><br><p>  Banyak yang memilih penyedia pembayaran sesuai tarif.  Padahal, kurs bukan satu-satunya nilai yang harus diperhitungkan.  Anda juga perlu melihat persentase pembayaran yang berhasil (SR) - karena tidak ada yang memiliki konversi 100% dan nilai ini sangat bervariasi dari bank ke bank.  Penting juga untuk mempertimbangkan bagaimana skenario pengguna terlihat secara umum: berapa banyak langkah yang harus Anda lalui sebelum membayar, jika antarmuka jelas, dll. </p><br><h2 id="kak-konversiya-vliyaet-na-pribyl">  Bagaimana Konversi Mempengaruhi Keuntungan </h2><br><p><img src="https://habrastorage.org/webt/vy/8x/7m/vy8x7myw1csu5qa3vnrdmusryv8.png"><br>  <em>Dalam kasus kedua, komisi untuk layanan lebih tinggi, tetapi konversi juga lebih tinggi, karena reservasi dan konfigurasi gateway yang tepat digunakan.</em> </p><br><p>  Seperti yang Anda lihat dari contoh, solusi yang lebih baik untuk bisnis adalah dengan mengambil layanan yang lebih baik dan, meskipun faktanya komisi lebih tinggi karena perbedaan dalam kualitas akuisisi, pada akhirnya kami memiliki 3 538 080 - 2 847 000 = 691 080 perbedaan rubel per bulan!  Dan ini 8 juta setahun, yang merupakan banyak uang untuk bisnis. </p><br><p>  Konversi, pergantian, dan tarif sewenang-wenang, tetapi contoh menunjukkan bahwa hal utama dalam layanan adalah stabilitas dan kualitasnya.  Dan ini sudah memerlukan konversi yang meningkat dan, sebagai hasilnya, omset yang lebih besar untuk pedagang. </p><br><h2 id="kak-podklyuchaetsya-merchant">  Bagaimana pedagang terhubung </h2><br><p>  Seperti yang disebutkan sebelumnya, kami mencoba untuk menutupi semuanya dengan metrik dan pemicu yang secara otomatis mengaktifkan suatu peristiwa.  Mari kita lihat bagaimana semuanya terjadi pada contoh pemantauan salah satu pedagang. </p><br><p>  Setelah terhubung ke Kasir, pedagang, jika perlu, dimonitor.  Kami membuat bagan di Grafana dan mengonfigurasikan metrik yang dengannya peringatan otomatis dipicu jika terjadi penyimpangan dari nilai "normal" yang diberikan. </p><br><p>  Kami menggunakan Moira untuk mengirim pemberitahuan ke obrolan grup pemantau, yang akan segera memeriksa detailnya.  Pemberitahuan berisi tautan ke jadwal dan detail kejadian. </p><br><p><img src="https://habrastorage.org/webt/kr/g-/ef/krg-efr_0h_ou3yxyz0-aqwgdcy.png"><br>  <em>Benar-benar contoh nyata dari pesan dari bot</em> </p><br><p>  Setelah menganalisis grafik, spesialis tim pemantauan paling sering menggunakan Kibana untuk melihat log.  Di sini situasinya bisa sederhana, dan kemudian dalam log, jelas, kesalahan akan terlihat atau partisipasi tambahan dari analis akan diperlukan untuk menganalisis penyebab kegagalan. </p><br><p>  Di masa mendatang, kami ingin menyiapkan pemberitahuan otomatis pedagang tentang kesalahan di pihak mereka, misalnya, tentang tidak dapat diaksesnya server atau tanggapan non-protokol.  Ini akan memungkinkan Anda untuk dengan cepat merespons kegagalan dan memberikan informasi pihak lawan untuk menghilangkan penyebabnya. </p><br><p>  Selain sisi teknis, kami juga memantau dengan cermat metrik bisnis seperti omset, pendapatan, dan arus keluar, tetapi ini tampaknya menjadi topik untuk kisah-kisah berikut. </p><br><h3 id="samoe-glavnoe">  Yang paling penting </h3><br><p>  "Hari ketidaktaatan" saya (yang kami sebut transisi sementara ke departemen lain) berakhir, dan saya kembali ke Moskow.  Selama 2 hari di departemen pemantauan, saya belajar banyak dan menyederhanakan pengetahuan saat ini. </p><br><ul><li>  Tugas pemantauan adalah memberikan informasi yang relevan tentang keadaan sistem di semua tingkatan; </li><li>  Pilih metrik dan pemicu yang kompeten - 90% sukses; </li><li>  Dalam layanan pembayaran, konversi hits tawaran; </li><li>  Anda perlu mengikuti teknik dan mengingat tentang metrik bisnis; </li><li>  Kita membutuhkan pandangan sistematis tentang proses dan kemampuan untuk menganalisis hubungan; </li></ul><br><p>  Namun - bersyukur.  Pemantauan, terima kasih! </p><br><hr><br><p>  <em>Itu saja.</em>  <em>Ajukan pertanyaan, berlangganan blog kami dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">datang</a> berkunjung.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426583/">https://habr.com/ru/post/id426583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426571/index.html">Pendekatan sistematis untuk mempercepat: pengukuran online di ujung depan</a></li>
<li><a href="../id426573/index.html">ZeroNights 2018. Reload</a></li>
<li><a href="../id426575/index.html">Laporan Club of Rome 2018, Bab 1.12: “Dari Dunia yang Kosong ke Dunia yang Lengkap”</a></li>
<li><a href="../id426579/index.html">Engie dan Ledger mengembangkan solusi blockchain perangkat keras untuk menyimpan data yang dihasilkan oleh sumber energi hijau</a></li>
<li><a href="../id426581/index.html">Buka pelajaran "Gambaran Umum fitur Node.js"</a></li>
<li><a href="../id426585/index.html">Di bawah tekanan dari Instagram dan Facebook: mengapa Snapchat dapat meninggalkan pertukaran, dan mengapa itu diperlukan</a></li>
<li><a href="../id426587/index.html">Masalah algoritma di frontend. Contoh dan kompetisi Yandex</a></li>
<li><a href="../id426591/index.html">Master Postur: Tetap Hidup</a></li>
<li><a href="../id426593/index.html">DJI Phantom 4 RTK: Pemetaan Generasi Selanjutnya</a></li>
<li><a href="../id426595/index.html">Richard Hamming "Bab tidak ada": Seperti yang kita tahu apa yang kita ketahui (1-10 menit dari 40)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>