<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèº üòÜ üíÜ Cr√©ation de votre propre r√©seau d'appareils faits maison bas√©s sur Arduino (partie 1) ü§ï üéÖüèΩ üê´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, habravchane! Aujourd'hui, je vais vous parler de l'int√©gration d'Arduino avec un PC sous Windows et d'autres appareils. C'√©tait d√©j√† en 2018,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation de votre propre r√©seau d'appareils faits maison bas√©s sur Arduino (partie 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414225/"> Bonjour, habravchane!  Aujourd'hui, je vais vous parler de l'int√©gration d'Arduino avec un PC sous Windows et d'autres appareils.  C'√©tait d√©j√† en 2018, mes cartes Arduino de diff√©rents mod√®les sont finalement venues √† moi. <br><br>  Je voulais depuis longtemps construire une maison intelligente et j'ai d√©cid√© d'utiliser cette plate-forme particuli√®re.  Pourquoi?  Eh bien, je connais assez bien C # et un peu de C ++, mais comme vous le savez, le firmware pour Arduino est √©crit sur les avantages modifi√©s.  De plus, la plateforme dispose d'un convertisseur num√©rique-analogique, ce qui simplifie le travail avec des capteurs analogiques.  De plus, la plate-forme est tr√®s c√©l√®bre et poss√®de une grande base modulaire. <br><br>  Avec tout mon amour pour les microcontr√¥leurs, je pr√©f√®re tout calculer sur Windows, et toute ma force r√©side dans les applications .NET.  C'√©tait mon probl√®me.  Je ne pouvais tout simplement pas saisir l'environnement de d√©veloppement Arduino IDE.  Je devais m'y habituer.  Cependant, les projets d'√©chauffement simples fonctionnaient toujours principalement sur un PC.  Qui s'int√©resse au sujet, je demande une coupe! <br><a name="habracut"></a><br>  Ma premi√®re exp√©rience a √©t√© un simple √©change d'informations via USB (port s√©rie), √† ‚Äã‚Äãtravers lequel j'ai envoy√© des paquets avec des commandes simples pour effectuer des actions sur le microcontr√¥leur.  Par exemple, j'ai utilis√© le mod√®le Arduino UNO. <br><br><img src="https://habrastorage.org/webt/pj/us/mt/pjusmt29ih62p-so_z-w39qp9z0.png"><br><br>  Il s'agit de l'interface du programme pour Windows.  "Squeak" - donnant un signal √† une broche (broche Arduino) au num√©ro 10 d'un signal √©lectrique constant, qui est aliment√© par le buzzer que j'ai connect√©.  ¬´LED¬ª - alimentation en courant continu vers la broche 13, qui par d√©faut sur le contr√¥leur est connect√©e √† la LED int√©gr√©e, qui sert √† d√©boguer les croquis (firmware). <br><br><img src="https://habrastorage.org/webt/qw/x8/f2/qwx8f2zmtv89uux3hspqyzs9npc.png"><br><br>  Cependant, toutes ces fonctionnalit√©s reposent pr√©cis√©ment sur le contr√¥leur. <br><br>  Que fait le programme?  Envoie simplement des num√©ros au port!  "0" signifie d√©sactiver <br>  LED, "1" - allumer la LED, "2" - √©teindre le buzzer, "3" - allumer <br>  buzzer.  Tout se fait √† l'aide des √©l√©ments de base de Windows Forms.  Si <br>  qui sont int√©ress√©s, le taux d'√©change de donn√©es est de 115200 bauds.  Merci <br>  Pour cela, je peux facilement visualiser le contenu des messages du microcontr√¥leur dans <br>  Arduino IDE. <br><br><img src="https://habrastorage.org/webt/gg/md/dh/ggmddh_s_sbhimmmxqzghlpkpeg.png"><br><br>  Je pense que beaucoup voulaient maintenant savoir ce qu'il y avait dans le firmware du microcontr√¥leur.  Comme c'√©tait il y a relativement longtemps, il n'√©tait pas facile de rechercher le code du firmware Arduino, mais le fichier √©tait toujours trouv√©! <br><br><div class="spoiler">  <b class="spoiler_title">Code entier</b> <div class="spoiler_text">  A mang√© quelque chose, il s'agit d'une ancienne version du fichier, sans buzzer, uniquement avec une LED. <br><br><pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; //       <span class="hljs-type"><span class="hljs-type">int</span></span> led = <span class="hljs-number"><span class="hljs-number">13</span></span>; <span class="hljs-type"><span class="hljs-type">void</span></span> setup() {  <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(<span class="hljs-number"><span class="hljs-number">115200</span></span>);   //      pinMode(led, OUTPUT); //    <span class="hljs-number"><span class="hljs-number">13</span></span>-      } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() {  i = i + <span class="hljs-number"><span class="hljs-number">1</span></span>; //         String stringOne = "Info from Arduino ";  stringOne +=i; //  <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println(stringOne); //     <span class="hljs-type"><span class="hljs-type">char</span></span> incomingChar;  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">Serial</span></span>.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)  {    //           incomingChar = <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">read</span></span>();   //        LED    switch (incomingChar)    {      <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span>: digitalWrite(led, HIGH);        break;      <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>: digitalWrite(led, LOW);        break;    }  }  delay(<span class="hljs-number"><span class="hljs-number">300</span></span>); }</code> </pre> <br></div></div><br>  Cependant, ce n'est qu'un exemple.  La seule chose - ce syst√®me devrait avoir un concentrateur - c'est-√†-dire le point d'intersection de tous les appareils.  Et cela d√©truit instantan√©ment toute la d√©centralisation du syst√®me. <br><br>  D'o√π la conclusion - la m√©thode d'utilisation du hub ne convient qu'√† la collecte et √† la gestion des informations.  Un concentrateur est n√©cessaire, par exemple, pour acc√©der aux appareils sur Internet, mais pas comme point de communication cl√© entre eux. <br><br>  Supposons que nous pouvons connecter tous les appareils en utilisant I2C ou en utilisant notre propre protocole.  Mais comment d√©poser des donn√©es dans le hub?  Et en g√©n√©ral, qu'est-ce qui servira de hub?  Option 3: <br><br><ul><li>  Hub depuis le routeur. </li><li>  Hub d'une autre carte Arduino. </li><li>  Hub de Raspberry Pi. </li></ul><br>  <b>Examinons tout √† tour de r√¥le.</b>  <b>Donc, le routeur.</b>  Pour commencer, le routeur est n√©cessaire non seulement, mais avec Linux √† bord et un port USB pour connecter <u>n'importe quelle</u> carte Arduino du syst√®me.  Tout cela parce que le r√©seau se composera d'un grand nombre d'appareils et d'un ¬´chat¬ª g√©n√©ral, o√π tous les appareils envoient des messages sur leur √©tat.  √Ä partir des routeurs, par exemple, ¬´Linksys E2100L 802.11b / g / n¬ª convient. <br><br><img src="https://habrastorage.org/webt/37/gq/sn/37gqsn0qkoare2okc36gtp8pipi.png"><br><br>  Comme vous pouvez le voir, ce routeur a un connecteur USB, et les caract√©ristiques montrent que tout tourne sous Linux.  Personnellement je ne l'ai pas utilis√©, mais selon les caract√©ristiques il nous conviendra.  Et ce n'est <u><i>PAS une</i></u> publicit√©. <br><br>  Dans le cas d'un routeur, vous pouvez supprimer des donn√©es sur un port s√©rie, tout comme sous Windows, et sous Linux, vous pouvez ex√©cuter un script - un gestionnaire de messages (d√©sol√©, si quelque chose n'est pas appel√© de cette fa√ßon, je ne suis tout simplement pas familier avec Linux). <br><br>  <b>Consid√©rez l'option 2.</b> Une autre carte Arduino.  Les mod√®les Nano, Mini, Micro ne conviennent plus ici.  Besoin d'un mod√®le Arduino, UNO ou MEGA.  Mais ne connectez pas la carte au r√©seau.  En option, utilisez Arduino UNO WI-FI, ou ce qui est plus fiable Arduino Yun ou Tian.  Les probl√®mes de ce dernier sont un t√©l√©chargement et un prix relativement longs, et par fonctionnalit√© ils ressemblent au m√™me routeur, car ils fonctionnent sous Linux. <br><br>  Il est pr√©f√©rable d'utiliser le soi-disant Ethernet Shield.  Il s'agit d'une carte d'extension pour Arduino, qui est port√©e sur le dessus et vous permet de cr√©er un simple serveur WEB sur votre appareil avec de simples scripts PHP pour traiter les informations d'autres appareils sur le r√©seau. <br><br><img src="https://habrastorage.org/webt/9g/f-/bm/9gf-bmua1brpvp5tqgirzwzgleq.png"><br><br>  Certains mod√®les de cette carte d'extension sont √©quip√©s d'un emplacement pour une carte m√©moire micro-sd, qui permet une journalisation locale en plus de la t√©l√©commande. <br><br>  <b>Option 3.</b> Presque la m√™me que la pr√©c√©dente et encore moins que j'aime.  Utilisation d'un micro- <u>ordinateur</u> Raspberry Pi.  C'est un ordinateur.  D'accord, pour raccrocher un ordinateur entier pour cette t√¢che, m√™me s'il est tr√®s faible - un gaspillage suppl√©mentaire de ressources.  √Ä la fois mon√©taire et informatique.  Personnellement, j'utiliserais Raspberry Pi uniquement comme serveur de surveillance vid√©o ou comme programme pr√™t √† l'emploi pour g√©rer une maison intelligente comme Major DoMo et autres.  Vous pouvez √©galement l'utiliser pour des t√¢ches telles que les bots dans les messageries instantan√©es et les algorithmes complexes pour contr√¥ler le microclimat, ou dans le cas le plus improbable, vous pouvez y mettre de l'intelligence artificielle. <br><br><img src="https://habrastorage.org/webt/bm/ur/-t/bmur-tucs_em_ilga0wnixv0uby.png"><br><br>  Comme vous pouvez le voir, le Raspberry Pi 3 a: <br><br><ul><li>  4 ports USB </li><li>  1 port Ethernet; </li><li>  1 port HDMI </li><li>  Wi-Fi </li><li>  Interface DSI pour connecter un √©cran Raspberry Pi √† un √©cran tactile; </li><li>  Emplacement pour cartes micro-sd. </li></ul><br>  Et bien plus.  Mais malgr√© tous les avantages, le Raspberry Pi ne convient pas comme hub. <br><br>  <b>Conclusion:</b> Arduino UNO + Ethernet Shield est plus appropri√© comme hub pour moi personnellement.  De toutes les options envisag√©es, c'est la moins ch√®re et la plus simple √† mettre en ≈ìuvre. <br><br><img src="https://habrastorage.org/webt/th/bc/yb/thbcybmw3avkwfa91mr38xgduua.png"><br><br>  Dans cette configuration, l'op√©rabilit√© du syst√®me ne d√©pend pas du concentrateur.  Et m√™me si le concentrateur tombe en panne, cela n'affectera pas les performances du r√©seau lui-m√™me.  Le r√©seau ne perdra que l'acc√®s √† Internet. <br><br>  Je pense que la premi√®re partie peut √™tre compl√©t√©e √† ce sujet.  A tr√®s bient√¥t! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414225/">https://habr.com/ru/post/fr414225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414215/index.html">Blocs personnalis√©s dans les puces (Silicon IP): comment cela fonctionne</a></li>
<li><a href="../fr414217/index.html">Smartphones locaux Vertex: premiers en qualit√©, premiers en puces, premiers en design</a></li>
<li><a href="../fr414219/index.html">L'exp√©rience de l'utilisation de l'√©nergie solaire dans la r√©gion de Moscou: pour, contre et qui en a besoin</a></li>
<li><a href="../fr414221/index.html">Analyser et travailler avec Codable dans Swift 4</a></li>
<li><a href="../fr414223/index.html">C #: compatibilit√© descendante et surcharge</a></li>
<li><a href="../fr414227/index.html">Une nouvelle √©tude des indicateurs Telegram apr√®s blocage: les abonn√©s augmentent, la couverture diminue</a></li>
<li><a href="../fr414229/index.html">Analyse de diff√©rentes m√©thodes de formation informatique</a></li>
<li><a href="../fr414231/index.html">Comment j'ai fait un ordinateur compl√®tement silencieux</a></li>
<li><a href="../fr414233/index.html">1. Bas√© sur Meyers ¬´c ++ efficace et moderne¬ª - inf√©rence de type de mod√®le</a></li>
<li><a href="../fr414235/index.html">L'histoire myst√©rieuse d'un schizophr√®ne et d'un chaman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>