<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📍 ⚔️ ♑️ Bekerja dengan perlindungan informasi kriptografis dan operator kunci perangkat keras di Linux ✨ 🤵🏻 🤳🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Menyimpan kunci pada token dan kartu pintar memberikan perlindungan tambahan terhadap penyusup eksternal dan internal, termasuk mereka yang memiliki t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bekerja dengan perlindungan informasi kriptografis dan operator kunci perangkat keras di Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/441212/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6t/xz/yg/6txzyg12acxsce8jlw0nl-ukdqa.png" width="80%" height="80%"></div><br>  Menyimpan kunci pada token dan kartu pintar memberikan perlindungan tambahan terhadap penyusup eksternal dan internal, termasuk mereka yang memiliki tingkat akses tertentu ke sistem informasi dan peralatan. <br><br>  Hari ini saya akan memberi tahu Anda bagaimana kami melindungi kunci enkripsi dan tanda tangan elektronik dalam sistem informasi kami, dan saya akan melakukan ini dalam panduan yang terinci dan diilustrasikan dengan baik untuk menyiapkan SUSE Linux Enterprise Server 12 SP3 untuk bekerja dengan token Aladdin JaCarta PKI dan CryptoPro CSP KC2 4.0.9944. <br><br>  Ada beberapa alasan untuk menerbitkan panduan ini: <br><a name="habracut"></a><br><h4>  Alasan 1 </h4><br>  Dokumentasi resmi tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aladdin-RD JaCarta</a> lebih disesuaikan untuk sistem operasi Astra Linux dan ALT Linux, disertifikasi oleh Kementerian Pertahanan, FSTEC dan FSB sebagai sarana untuk melindungi informasi. <br><br><h4>  Alasan 2 </h4><br>  Instruksi terbaik untuk mengkonfigurasi interaksi dengan media perangkat keras di Linux, yang ditemukan, juga dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki.astralinux.ru - Bekerja dengan CryptoPro CSP</a> <br><br><h4>  Alasan 3 </h4><br>  <b>UPD 04/16/2019:</b> Dalam proses pengaturan lingkungan dan peralatan, ternyata pembawa yang pertama kali tersedia sama sekali bukan JaCarta PKI Nano, seperti yang diharapkan, tetapi perangkat yang beroperasi di SafeNet Authentication Client eToken PRO pada mode PRO. <br><br>  <b>UPD 04/16/2019:</b> Setelah Bank membutuhkan perangkat yang dapat bekerja di infrastruktur yang sama dengan eToken PRO (Java).  Perangkat seperti itu, perusahaan "ZAO Aladdin R.D."  menawarkan token JaCarta PRO, yang dipilih oleh bank.  Namun, pada tahap pembentukan artikel dan dokumen pengiriman, seorang karyawan perusahaan melakukan kesalahan.  Alih-alih model JaCarta PRO, JaCarta PKI tidak sengaja masuk ke artikel dan dokumen pengiriman. <br><br>  <b>UPD 04/16/2019: Saya</b> berterima kasih kepada perusahaan Aladdin R.D. untuk membantu mencari tahu dan mengungkap kebenaran. <br><br><blockquote>  Tidak ada arti politis dan tersembunyi dalam kesalahan ini, tetapi hanya kesalahan teknis karyawan dalam menyiapkan dokumen.  Token JaCarta PRO adalah produk dari perusahaan Aladdin R.D.  Applet melakukan bagian fungsional dikembangkan oleh perusahaan "ZAO Aladdin R.D." </blockquote><br><br>  PRO eToken ini untuk pesta yang dirilis sebelum 1 Desember 2017. <br>  Setelah tanggal ini, perusahaan "Aladdin R.D."  Berhenti menjual perangkat eToken PRO (Java). <br><br>  Berjalan sedikit di depan, saya harus mengatakan bahwa bekerja dengannya dikonfigurasi melalui driver yang sesuai - <b>SafenetAuthenticationClient-10.0.32-0.x86_64</b> , yang hanya dapat diperoleh untuk mendukung Aladdin R.D.  pada aplikasi online yang terpisah. <br><br>  Di CryptoPro CSP, untuk bekerja dengan token ini, diperlukan untuk menginstal paket <b>cprocsp-rdr-emv-64 |</b>  <b>Modul dukungan EMV / Gemalto</b> . <br><br>  Token ini ditentukan dan ditanggapi.  Menggunakan utilitas <b>SACTools</b> dari paket <b>SafenetAuthenticationClient</b> , dimungkinkan untuk menginisialisasi itu.  Tetapi ketika bekerja dengan perlindungan informasi kriptografi, ia berperilaku sangat aneh dan tidak terduga. <br><br>  Itu ditunjukkan sebagai berikut, pada perintah: <br><br><pre><code class="plaintext hljs">csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (205D325E5842) 00 00\alfa_shark' -check</code> </pre> <br>  Jawabannya adalah semuanya baik-baik saja: <br><br><pre> <code class="plaintext hljs">[ErrorCode: 0x00000000]</code> </pre> <br>  Tetapi segera setelah mencoba membaca kunci secara terprogram, pemeriksaan yang sama mulai menghasilkan kesalahan: <br><br><pre> <code class="plaintext hljs">[ErrorCode: 0x8009001a]</code> </pre> <br>  Menurut daftar kode kesalahan dari model objek komponen Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">COM Error Codes (Security and Setup)</a> <br><br><pre> <code class="plaintext hljs">NTE_KEYSET_ENTRY_BAD 0x8009001A Keyset as registered is invalid.</code> </pre> <br>  "Set kunci tidak valid" - alasan untuk pesan ini mungkin terletak pada chip Gemalto lama, firmware dan applet, atau pada driver mereka untuk OS yang tidak mendukung standar generasi ES baru dan fungsi hash GOST R 34.10-2012 dan GOST R 34.11- 2012 <br><br>  Dalam kondisi ini, token diblokir.  Indeks perlindungan informasi kriptografi mulai menunjukkan keadaan pembaca yang tidak relevan dan wadah utama.  Restart penyedia layanan <b>cprocspractor</b> layanan <b>cprocsp</b> , layanan <b>pcscd token</b> dan kartu pintar dan seluruh sistem operasi tidak membantu, hanya menginisialisasi ulang. <br><br>  Dalam keadilan, harus dicatat bahwa SafeNet eToken PRO bekerja dengan benar dengan tombol GOST R 34.10-2001 di OS Windows 7 dan 10. <br><br>  Anda dapat mencoba menginstal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CryptoPro CSP 4.0 FCN (Gemalto)</a> , tetapi tujuannya adalah untuk melindungi ES dan kunci enkripsi kami dengan produk FSB dan FSTEC keluarga JaCarta, yang mendukung standar baru. <br><br>  Masalahnya dipecahkan dengan mengambil token JaCarta PKI asli dalam casing biasa (XL). <br><br>  Tetapi banyak waktu dihabiskan untuk mencoba agar Safenet eToken PRO bekerja.  Saya ingin menarik perhatian pada ini dan, mungkin, melindungi seseorang dari ini. <br><br><h4>  Alasan 4 </h4><br>  Terkadang Anda sendiri perlu kembali ke artikel dan instruksi lama.  Ini nyaman ketika informasi ditempatkan di sumber eksternal.  Jadi terima kasih kepada Habr untuk kesempatan ini. <br><br><h2>  Panduan pengaturan </h2><br>  Setelah memasang token JaCarta PKI di port USB server dan memulai sistem, kami memverifikasi bahwa perangkat baru terdeteksi dan muncul dalam daftar: <br><br> <code>lsusb</code> <br> <br><img src="https://habrastorage.org/webt/ge/fs/tu/gefstux3tlhb7j0pag8r_fa-ose.png"><br><br>  Dalam kasus kami, itu adalah <i>Bus 004 Perangkat 003: ID 24dc: 0101</i> <br><br>  Untuk mendiagnosis pembaca, Anda dapat menggunakan utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcsc-tools dari keamanan: proyek chipcard (software.opensuse.org)</a> . <br><br>  Ini diluncurkan oleh perintah: <br><br> <code>pcsc_scan</code> <br> <br><img src="https://habrastorage.org/webt/rm/v3/ki/rmv3kikfuuwmh8c9mijm3it-ieq.png"><br><br>  Sampai semua paket yang diperlukan diinstal, informasi tentang token tidak akan ditampilkan. <br><br><h3>  Menginstal driver dan perangkat lunak untuk bekerja dengan JaCarta PKI </h3><br>  Pada halaman Dukungan situs "Aladdin R.D."  Kami mengunduh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi dan perangkat lunak untuk bekerja hanya dengan JaCarta PKI</a> <br><br>  Menurut JaCarta untuk Panduan Implementasi Linux, klausul 4.2., Langkah pertama adalah menginstal <b>pcsc-lite</b> , <b>ccid</b> dan <b>libusb</b> . <br><blockquote>  Agar utilitas manajemen JaCarta berfungsi, komponen berikut ini harus diinstal: <br><br><ul><li>  PC / SC Lite - lapisan perantara untuk menyediakan akses ke kartu pintar sesuai dengan standar PC / SC, paket pcsc-lite. </li><li>  Perpustakaan Ccid dan Libib untuk bekerja dengan kunci USB, kartu pintar dan pembaca kartu pintar. </li></ul></blockquote>  Kami memeriksa ketersediaan paket-paket ini dan menginstal: <br><br> <code>zypper search pcsc-lite</code> <br> <br><img src="https://habrastorage.org/webt/ez/0m/n_/ez0mn_o8-hmwibwiiltr5jk34xi.jpeg"><br><br> <code>zypper search libusb</code> <br> <br><img src="https://habrastorage.org/webt/ba/jn/zt/bajnztgbtt_fsbfp0tanzfvv7hk.png"><br><br> <code>zypper install pcsc-lite</code> <br> <br><img src="https://habrastorage.org/webt/qe/6i/pl/qe6ipldd5fimbo_m7j4yrmvtibw.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/bo/mc/1mbomc3je9v8e82whld_0tqheje.png"><br><br> <code>zypper search CCID</code> <br> <br><img src="https://habrastorage.org/webt/mq/f4/8x/mqf48xewg61la3nuv_kumzsaxkq.png"><br><br> <code>zypper install pcsc-ccid</code> <br> <br><img src="https://habrastorage.org/webt/lx/yv/ng/lxyvngqgd1d_rdkh7tw2lofepjs.png"><br><br> <code>zypper search CCID</code> <br> <br><img src="https://habrastorage.org/webt/kq/az/ly/kqazlyxzmdusuprtyyfjhkkjick.jpeg"><br><br> <code>zypper install libusb</code> <br> <br><img src="https://habrastorage.org/webt/1f/ul/bk/1fulbklde9aj87m_ur21u8xvms0.png"><br><br>  Sebagai hasilnya, paket pcsc-lite diperbarui, CCID diinstal, libusb tidak diperlukan tindakan. <br><br>  Dua perintah berikut menginstal paket dengan driver dan perangkat lunak secara langsung untuk bekerja dengan JaCarta PKI: <br><br> <code>zypper install idprotectclientlib-637.03-0.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/ux/ep/1u/uxep1uijp_2kvyix-yn6qkg5ing.jpeg"><br><br> <code>zypper install idprotectclient-637.03-0.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/xy/32/hq/xy32hqxgtmgwpn-pocygfs-rn3q.jpeg"><br><br>  Periksa apakah driver dan perangkat lunak untuk JaCarta PKI diinstal: <br><br> <code>zypper search idprotectclient</code> <br> <br><img src="https://habrastorage.org/webt/7k/os/nk/7kosnk44-yewdh9i7odevcdzqdc.jpeg"><br><br>  Ketika mencoba untuk membuat SafeNet eToken PRO berfungsi, saya menemukan informasi bahwa paket <b>pembuka - Library for Smart Card Reader</b> yang sudah diinstal di SLES dapat bertentangan dengan <b>pcsc-lite - Perpustakaan Kartu Cerdas PCSC</b> , instalasi yang membutuhkan Aladdin R.D. <br><br> <code>zypper search openct</code> <br> <br><img src="https://habrastorage.org/webt/g8/ja/mr/g8jamrjqjkxybghgrj8rnbfuuaw.png"><br><br>  Karenanya, kami menghapus paket pembuka: <br><br> <code>rpm -e openct</code> <br> <br>  Sekarang semua driver dan perangkat lunak yang diperlukan untuk bekerja dengan token telah diinstal. <br><br>  <b>Kami melakukan</b> diagnosa menggunakan utilitas <b>pcsc-tools</b> dan memastikan bahwa JaCarta terdeteksi di sistem operasi: <br><br> <code>pcsc_scan</code> <br> <br><img src="https://habrastorage.org/webt/t_/5s/ga/t_5sgar9ugi-z-mx2isjhpxfzj8.jpeg"><br><br><h3>  Menginstal paket CryptoPro CSP </h3><br>  Saat memasang CryptoPro CSP secara default, paket yang diperlukan untuk bekerja dengan token dan kartu pintar tidak ada. <br><br> <code>zypper search cprocsp</code> <br> <br><img src="https://habrastorage.org/webt/kq/g7/sc/kqg7scnpbnxlbxiicva_gjejk8k.png"><br><br>  Menginstal <b>komponen JaCarta untuk komponen</b> dukungan <b>CryptoPro CSP di CSP</b> <br><br> <code>zypper install cprocsp-rdr-jacarta-64-3.6.408.683-4.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/9d/uu/3e/9duu3e1vs9wu3qotu6dsllot9km.jpeg"><br><br>  Beberapa komponen memiliki ketergantungan.  Jadi, misalnya, jika Anda mencoba untuk menginstal paket dukungan SafeNet eToken PRO <b>cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm - modul dukungan EMV / Gemalto</b> , kami akan mendapatkan pesan tentang perlunya menginstal komponen dasar dari dukungan pembaca CSP <b>terlebih dahulu cprocsp -rdr-pcsc-64-4.0.9944-5.x86_64.rpm - Komponen PC / SC untuk pembaca CryptoPro CSP</b> : <br><br><pre> <code class="plaintext hljs">zypper install cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm Loading repository data... Reading installed packages... Resolving package dependencies... Problem: nothing provides cprocsp-rdr-pcsc-64 &gt;= 4.0 needed by cprocsp-rdr-emv-64-4.0.9944-5.x86_64 Solution 1: do not install cprocsp-rdr-emv-64-4.0.9944-5.x86_64 Solution 2: break cprocsp-rdr-emv-64-4.0.9944-5.x86_64 by ignoring some of its dependencies Choose from above solutions by number or cancel [1/2/c] (c): c</code> </pre><br>  Instal paket dukungan dasar untuk pembaca dan media utama: <br><br> <code>zypper install cprocsp-rdr-pcsc-64-4.0.9944-5.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/ku/al/eh/kualehuiobnjcc6sxcfgzlzedcu.png"><br><br> <code>zypper install lsb-cprocsp-pkcs11-64-4.0.9944-5.x86_64.rpm</code> <br> <br>  Sekarang Anda dapat menginstal modul untuk bekerja dengan jenis media lainnya dan komponen GUI: <br><br> <code>zypper install cprocsp-rdr-emv-64-4.0.9944-5.x86_64.rpm</code> <br> <br><img src="https://habrastorage.org/webt/b1/ka/hy/b1kahy9lzptzyp6gclxtou5775y.png"><br><br><pre> <code class="plaintext hljs">zypper install cprocsp-rdr-novacard-64-4.0.9944-5.x86_64.rpm zypper install cprocsp-rdr-mskey-64-4.0.9944-5.x86_64.rpm zypper install cprocsp-rdr-gui-gtk-64-4.0.9944-5.x86_64.rpm</code> </pre><br><img src="https://habrastorage.org/webt/gn/rs/s-/gnrss-ht0-vovsebsgfdvdioxhc.png"><br><br>  Periksa konfigurasi final CryptoPro CSP: <br><br><pre> <code class="plaintext hljs">zypper search cprocsp Loading repository data... Reading installed packages...</code> </pre><br><br> <code>S | Name | Summary | Type <br> ---+-----------------------------+----------------------------------------------------+-------- <br> i+ | cprocsp-curl-64 | CryptoPro Curl shared library and binaris. Build 9944. | package <br> i+ | cprocsp-rdr-emv-64 | EMV/Gemalto support module | package <br> i+ | cprocsp-rdr-gui-gtk-64 | GUI components for CryptoPro CSP readers. Build 9944. | package <br> i+ | cprocsp-rdr-jacarta-64 | JaCarta components for CryptoPro CSP. Build 683. | package <br> i+ | cprocsp-rdr-mskey-64 | Mskey support module | package <br> i+ | cprocsp-rdr-novacard-64 | Novacard support module | package <br> i+ | cprocsp-rdr-pcsc-64 | PC/SC components for CryptoPro CSP readers. Build 9944.| package <br> i+ | lsb-cprocsp-base | CryptoPro CSP directories and scripts. Build 9944. | package <br> i+ | lsb-cprocsp-ca-certs | CA certificates. Build 9944. | package <br> i+ | lsb-cprocsp-capilite-64 | CryptoAPI lite. Build 9944. | package <br> i+ | lsb-cprocsp-kc2-64 | CryptoPro CSP KC2. Build 9944. | package <br> i+ | lsb-cprocsp-pkcs11-64 | CryptoPro PKCS11. Build 9944. | package <br> i+ | lsb-cprocsp-rdr-64 | CryptoPro CSP readers. Build 9944. | package <br></code> <br><br><img src="https://habrastorage.org/webt/f-/rc/ad/f-rcadtwgu68ba6ad5wde2zke-m.jpeg"><br><br>  Untuk menerapkan perubahan, kami memulai kembali layanan penyedia kriptografi dan memeriksa statusnya: <br><br><pre> <code class="plaintext hljs">/etc/init.d/cprocsp restart /etc/init.d/cprocsp status</code> </pre><br><img src="https://habrastorage.org/webt/vd/1a/th/vd1athcps5p7fe9cjp_ipmvvq-a.jpeg"><br><br><h3>  Pengaturan dan diagnostik CryptoPro CSP </h3><br>  Periksa apakah penyedia kriptografi melihat token kami dan jenis media lain yang tersedia dengan perintah berikut: <br><br> <code>/opt/cprocsp/bin/amd64/csptest -card -enum -v –v</code> <br> <br><img src="https://habrastorage.org/webt/2m/z1/d4/2mz1d4m5oyvg9nknwbnci24wcre.jpeg"><br><br> <code>/opt/cprocsp/bin/amd64/csptest -enum -info -type PP_ENUMREADERS | iconv -f cp1251</code> <br> <br><img src="https://habrastorage.org/webt/i0/xw/ro/i0xwroly12wmu3ejps9udt4tvxs.png"><br><br> <code>/opt/cprocsp/sbin/amd64/cpconfig -hardware reader -view -f cp1251</code> <br> <br><img src="https://habrastorage.org/webt/id/qu/rm/idqurmsxvepldfelr_w9vakfbwu.jpeg"><br><br>  <b>Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00</b> adalah media kami. <br><br>  Mengikuti instruksi dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CryptoPro CSP untuk Linux.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konfigurasikan</a> , lakukan registrasi di penyedia kriptografi: <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/sbin/amd64/cpconfig -hardware reader -add "Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"</code> </pre> <br><img src="https://habrastorage.org/webt/1v/xj/z_/1vxjz_h0nppdftdaeylhhobwt-a.png"><br><br>  Sebagai hasil dari eksekusi di file konfigurasi <b>/etc/opt/cprocsp/config64.ini</b> <br>  sebuah entri akan ditambahkan ke bagian [KeyDevices \ PCSC]: <br><br> <code>[KeyDevices\PCSC\"Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"\Default] <br></code> <br><br>  Untuk memenuhi persyaratan Formulir CSP CryptoPro, Ketentuan Penggunaan dan Panduan Administrator Keamanan: <br><blockquote>  Penggunaan CryptoPro CSP CIP versi 4.0 dengan mode kontrol tombol yang ditingkatkan tidak diperbolehkan.  Dimasukkannya mode ini dijelaskan dalam dokumen ZHTYA.00087-01 91 02. Panduan Administrator Keamanan. </blockquote>  Hal ini diperlukan untuk memungkinkan peningkatan kontrol penggunaan kunci: <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/sbin/amd64/cpconfig -ini '\config\parameters' -add long StrengthenedKeyUsageControl 1</code> </pre> <br>  Periksa apakah mode ini diaktifkan: <br><br> <code>cat /etc/opt/cprocsp/config64.ini | grep StrengthenedKeyUsageControl</code> <br> <br><img src="https://habrastorage.org/webt/lg/hn/mm/lghnmmk1d5g9xhmxgmyqjcsrddo.jpeg"><br><br>  Kami memulai kembali layanan penyedia kriptografi: <br><br><pre> <code class="plaintext hljs">/etc/init.d/cprocsp restart /etc/init.d/cprocsp status</code> </pre><br>  Setelah dimulai ulang, kami memeriksa bahwa tidak ada kesalahan dalam pekerjaan penyedia dengan operator utama: <br><br> <code>/opt/cprocsp/bin/amd64/csptest -keyset –verifycontext</code> <br> <br><img src="https://habrastorage.org/webt/qo/5x/v7/qo5xv7ayjfqa1ssyuds6dl-f-ue.jpeg"><br><br> <code>/opt/cprocsp/bin/amd64/csptest -keyset -verifycontext -enum –unique</code> <br> <br><pre> <code class="plaintext hljs">CSP (Type:80) v4.0.9017 KC2 Release Ver:4.0.9944 OS:Linux CPU:AMD64 FastCode:REA AcquireContext: OK. HCRYPTPROV: 16052291 alfa_shark1 |SCARD\JACARTA_4E3900154029304C\CC00\E9F6 OK. Total: SYS: 0.000 sec USR: 0.000 sec UTC: 4.560 sec [ErrorCode: 0x00000000]</code> </pre><br><h3>  Bekerja dengan Token JaCarta PKI </h3><br>  Mari kita jalankan program Xming (penerusan X11) di stasiun kami sehingga kami dapat membuka dan bekerja dengan antarmuka grafis dari utilitas yang diperlukan melalui SSH. <br><br><img src="https://habrastorage.org/webt/-s/8j/r9/-s8jr9lfz0xkjurnsrgvwx71pfy.png"><br><br>  Setelah menginstal <b>IDProtectClient</b> - perangkat lunak untuk bekerja dengan JaCarta PKI, dua file muncul di server di folder <b>/ usr / share / aplikasi</b> : <br><br>  Athena-IDProtectClient.desktop <br>  Athena-IDProtectManager.desktop <br><br>  Ini adalah pintasan tempat Anda dapat melihat opsi startup untuk utilitas <i>Exec = / usr / bin / SACTools</i> <br><br>  Jalankan utilitas <b>IDProtectPINTool</b> . <br><br>  Dengan menggunakannya, kode akses PIN untuk token diatur dan diubah. <br><br> <code>/usr/bin/IDProtectPINTool</code> <br> <br><img src="https://habrastorage.org/webt/wx/nf/-j/wxnf-jyonzkwr2hs2cnfy1wzxie.png"><br><br>  Saat menginisialisasi token untuk pertama kalinya, tautan yang berisi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode PIN (kata sandi) dari operator utama secara default</a> akan berguna <br><br>  Program <b>IDProtect_Manager</b> memungkinkan <b>Anda</b> untuk melihat informasi tentang token dan wadah dengan kunci dan sertifikat: <br><br> <code>/usr/bin/IDProtect_Manager</code> <br> <br><img src="https://habrastorage.org/webt/nb/xb/ex/nbxbexx9njsuvpxawxszgs3lr8s.png"><br><br>  Untuk mengakses wadah dengan kunci, Anda harus memasukkan kata sandi: <br><br><img src="https://habrastorage.org/webt/oh/pp/l_/ohppl_roac1knnwejckvd8afypy.png"><br><br><img src="https://habrastorage.org/webt/to/bh/vb/tobhvb23ey_zq2cdwp166-qrs5m.png"><br><br>  Untuk bekerja dengan <b>Klien Otentikasi SafeNet eToken PRO</b> ada program serupa - <b>Monitor</b> <b>Klien Otentikasi SafeNet</b> dan <b>Alat Klien Otentikasi SafeNet</b> , yang dijalankan seperti ini: <br><br><pre> <code class="plaintext hljs">/usr/bin/SACMonitor /usr/bin/SACTools</code> </pre><br><img src="https://habrastorage.org/webt/ox/kl/by/oxklbysagi4vqp8crlzbzpmbuv8.jpeg"><br><br>  Lebih mudah untuk melakukan operasi secara langsung dengan wadah utama di antarmuka penyedia kriptografi CryptoPro JavaCSP: <br><br> <code>/jdk1.8.0_181/jre/bin/java ru.CryptoPro.JCP.ControlPane.MainControlPane <br></code> <br><br><img src="https://habrastorage.org/webt/yj/fi/je/yjfije_eiqqx49g1s7lvwbcwtlc.jpeg"><br><br>  Untuk menampilkan informasi tentang isi wadah dengan kunci, Anda dapat menjalankan perintah: <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/bin/amd64/csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00\alfa_shark1' -info</code> </pre> <br>  Untuk mendiagnosis wadah, gunakan perintah yang sama dengan sakelar –check <br><br><pre> <code class="plaintext hljs">/opt/cprocsp/bin/amd64/csptest -keyset -cont '\\.\Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00\alfa_shark' –check</code> </pre> <br>  Anda harus memasukkan kata sandi untuk wadah: <br><br><img src="https://habrastorage.org/webt/m1/n4/cv/m1n4cvq78kcuqrfn1c7oxm9y3o4.png"><br><br><img src="https://habrastorage.org/webt/jr/vi/ga/jrvigahwffdkjcmfuwnwij4pdds.jpeg"><br><br><h3>  Pengambilan Kunci Perangkat Lunak </h3><br>  Secara umum, contoh pengambilan kunci pribadi dan sertifikat kunci publik dari wadah pada token menggunakan CryptoPro Java CSP adalah sebagai berikut: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.CryptoPro.JCP.KeyStore.JCPPrivateKeyEntry; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.CryptoPro.JCP.params.JCPProtectionParameter; KeyStore keyStore = KeyStore.getInstance(<span class="hljs-string"><span class="hljs-string">"Aladdin RD JaCarta [SCR Interface] (000000000000) 00 00"</span></span>, <span class="hljs-string"><span class="hljs-string">"JCSP"</span></span>); keyStore.load(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); JCPPrivateKeyEntry entry = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; X509Certificate certificate = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; PrivateKey privateKey = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { entry = (JCPPrivateKeyEntry) keyStore.getEntry(keyAlias, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JCPProtectionParameter(pwd)); certificate = (X509Certificate) entry.getCertificate(); privateKey = entry.getPrivateKey(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (UnrecoverableEntryException | NullPointerException e) { LOGGER.log(Level.WARNING, PRIVATE_KEY_NOT_FOUND + keyAlias + ExceptionUtils.getFullStackTrace(e)); }</code> </pre><br><br>  Jika Anda bertindak seperti ini: <br><br><pre> <code class="java hljs">Key key = keyStore.getKey(keyAlias, pwd);</code> </pre><br>  maka penyedia kriptografi akan mencoba menampilkan permintaan untuk memasukkan kata sandi ke wadah melalui jendela konsol atau GUI. <br><br><h3>  Hasil </h3><br>  Token token pembawa kunci dipasang di port USB internal server. <br><br>  Perangkat keras server itu sendiri disegel dan ditempatkan di ruangan dengan akses terbatas. <br><br>  Langkah-langkah tersebut dapat meningkatkan tingkat perlindungan sistem informasi kami dari pencurian dan kompromi tanda tangan elektronik atau kunci enkripsi, baik jarak jauh melalui jaringan dan secara fisik. <br><br><h3>  Tautan yang bermanfaat </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi Jaadarta Aladdin-RD</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki.astralinux.ru - Bekerja dengan CryptoPro CSP</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Daftar kode kesalahan model objek komponen Kode Kesalahan COM Microsoft (Keamanan dan Setup)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CryptoPro CSP 4.0 CSP 4.0 FCN (Gemalto)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Utilitas diagnostik Pcsc-tools reader dari keamanan: proyek chipcard (software.opensuse.org)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CryptoPro CSP untuk Linux.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kustomisasi.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PIN operator kunci (kata sandi) default Aladdin-RD</a> <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id441212/">https://habr.com/ru/post/id441212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id441202/index.html">Apakah perusahaan jasa memimpikan produk mereka? Percakapan dengan Maxilect</a></li>
<li><a href="../id441204/index.html">Pendekatan canggih untuk mendeteksi batas menggunakan dinding kapal sebagai contoh</a></li>
<li><a href="../id441206/index.html">Wolfensteiny 3D - rekayasa balik 251 byte JavaScript</a></li>
<li><a href="../id441208/index.html">Bagaimana kami mengurangi penerbitan pinjaman menjadi 2 klik</a></li>
<li><a href="../id441210/index.html">Penyimpanan kluster Alat pacu jantung + DRBD (Dual primer) + samba</a></li>
<li><a href="../id441214/index.html">Panduan Pengguna Kibana. Visualisasi. Bagian 1</a></li>
<li><a href="../id441216/index.html">Cermin hitam atau iklan Picooc?</a></li>
<li><a href="../id441218/index.html">OpenAI Gym + ROS + Gazebo: melatih robot mandiri di rumah. Bagian 1</a></li>
<li><a href="../id441220/index.html">Analisis serangan massal terbaru dengan penangkapan DNS</a></li>
<li><a href="../id441222/index.html">Mengapa Kubernet begitu rumit dengan repositori?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>