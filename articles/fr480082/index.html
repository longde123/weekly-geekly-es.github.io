<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïõ üî• ‚ôíÔ∏è Utilisation du partitionnement dans MySQL pour Zabbix avec un grand nombre d'objets de surveillance üí™üèø üìä üçæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour la surveillance des serveurs et des services, nous utilisons depuis longtemps et avec succ√®s une solution combin√©e bas√©e sur Nagios et Munin. Cep...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation du partitionnement dans MySQL pour Zabbix avec un grand nombre d'objets de surveillance</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lenvendo/blog/480082/">  Pour la surveillance des serveurs et des services, nous utilisons depuis longtemps et avec succ√®s une solution combin√©e bas√©e sur Nagios et Munin.  Cependant, ce groupe a un certain nombre d'inconv√©nients, donc nous, comme beaucoup, <a href="https://www.zabbix.com/">exploitons</a> activement <a href="https://www.zabbix.com/">Zabbix</a> .  Dans cet article, nous expliquerons comment vous pouvez r√©soudre le probl√®me de performances avec un effort minimal lors de l'augmentation du nombre de mesures supprim√©es et de l'augmentation du volume de la base de donn√©es MySQL <br><a name="habracut"></a><br><h3>  Probl√®mes d'utilisation d'une base de donn√©es MySQL avec Zabbix </h3><br>  Bien que la base de donn√©es soit petite et le nombre de m√©triques stock√©es dedans √©tait petit, tout √©tait merveilleux.  Le processus r√©gulier de femme de m√©nage qui d√©marre le serveur Zabbix lui-m√™me a r√©ussi √† supprimer les enregistrements obsol√®tes de la base de donn√©es, l'emp√™chant de cro√Ætre.  Cependant, d√®s que le nombre de mesures captur√©es a augment√© et que la taille de la base de donn√©es a atteint une certaine taille, tout s'est aggrav√©.  Houserkeeper a cess√© de supprimer les donn√©es pendant l'intervalle de temps allou√©, les anciennes donn√©es ont commenc√© √† rester dans la base de donn√©es.  Pendant le fonctionnement de la femme de m√©nage, il y a eu une charge accrue sur le serveur Zabbix, qui pourrait durer longtemps.  Il est devenu clair qu'il fallait en quelque sorte r√©soudre la situation actuelle. <br><br>  C'est un probl√®me connu, presque tous ceux qui ont travaill√© avec de gros volumes de surveillance sur Zabbix ont fait face √† la m√™me chose.  Il y avait aussi plusieurs solutions: par exemple, remplacer MySQL par PostgreSQL ou m√™me Elasticsearch, mais la solution la plus simple et la plus √©prouv√©e √©tait de passer aux tables de partitionnement qui stockent les donn√©es m√©triques dans la base de donn√©es MySQL.  Nous avons d√©cid√© de suivre cette voie. <br><br><h3>  Migration de tables MySQL r√©guli√®res vers des tables partitionn√©es </h3><br>  Zabbix est bien document√© et les tables o√π il stocke les m√©triques sont connues.  Il s'agit de tableaux: <code>history</code> , o√π les valeurs flottantes sont stock√©es, <code>history_str</code> , o√π les valeurs de cha√Æne courtes sont stock√©es, <code>history_text</code> , o√π les valeurs de texte longues sont stock√©es et <code>history_uint</code> , o√π les valeurs enti√®res sont stock√©es.  Il y a aussi un tableau des <code>trends</code> qui stocke la dynamique des changements, mais nous avons d√©cid√© de ne pas y toucher, car sa taille est petite et un peu plus tard nous y reviendrons. <br><br>  En g√©n√©ral, les tables √† traiter √©taient claires.  Nous avons d√©cid√© de faire des partitions pour chaque semaine, √† l'exception de la derni√®re, en fonction des num√©ros du mois, c'est-√†-dire  quatre partitions par mois: du 1er au 7, du 8 au 14, du 15 au 21 et du 22 au 1er (mois prochain).  La difficult√© √©tait que nous devions transformer les tables dont nous avions besoin en partitions ¬´√† la vol√©e¬ª, sans interrompre Zabbix Server et collecter des m√©triques. <br><br>  Curieusement, la structure m√™me de ces tableaux nous a √©t√© utile.  Par exemple, la table d' <code>history</code> a la structure suivante: <br><br><pre> <code class="sql hljs">`itemid` bigint(20) unsigned NOT NULL, `clock` int(11) NOT NULL DEFAULT '0', `value` double(16,4) NOT NULL DEFAULT '0.0000', `ns` int(11) NOT NULL DEFAULT '0',</code> </pre> <br>  tout <br><br><pre> <code class="sql hljs">KEY `history_1` (`itemid`,`clock`)</code> </pre> <br>  Comme vous pouvez le voir, chaque m√©trique est finalement entr√©e dans un tableau avec deux champs <b>itemid</b> et <b>clock</b> tr√®s importants et pratiques pour nous.  Ainsi, nous pouvons bien cr√©er une table temporaire, par exemple, avec le nom <code>history_tmp</code> , configurer une <code>history_tmp</code> pour celle-ci, puis y transf√©rer toutes les donn√©es de la table <code>history</code> , puis renommer la table <code>history</code> en <code>history_old</code> , et la table <code>history_tmp</code> en <code>history</code> , puis ajouter les donn√©es que nous avons remplis de <code>history_old</code> √† <code>history</code> et <code>history_old</code> .  Vous pouvez le faire en toute s√©curit√©, nous ne perdrons rien, car les champs <b>itemid</b> et <b>clock</b> indiqu√©s ci-dessus fournissent une m√©trique de lien vers une heure sp√©cifique, et non vers une sorte de num√©ro de s√©rie. <br><br><h3>  La proc√©dure de transition elle-m√™me </h3><br><blockquote>  Attention!  Il est tr√®s souhaitable, avant de commencer toute action, d'effectuer une sauvegarde compl√®te √† partir de la base de donn√©es.  Nous sommes tous des √™tres vivants et nous pouvons commettre une erreur dans l'ensemble des commandes, ce qui peut entra√Æner une perte de donn√©es.  Oui  une copie de sauvegarde ne fournira pas une pertinence maximale, mais il vaut mieux en avoir une qu‚Äôaucune. </blockquote>  Donc, ne rien √©teindre ou arr√™ter.  L'essentiel est que sur le serveur MySQL lui-m√™me, il devrait y avoir une quantit√© suffisante d'espace disque libre, c'est-√†-dire  de sorte que pour chacune des tables ci-dessus <code>history</code> , <code>history_text</code> , <code>history_str</code> , <code>history_uint</code> , au moins, il y ait suffisamment d'espace pour cr√©er une table avec le suffixe "_tmp", √©tant donn√© que ce sera le m√™me montant que la table d'origine. <br><br>  Nous ne d√©crirons pas tout plusieurs fois pour chacun des tableaux ci-dessus et consid√©rerons tout avec l'exemple d'un seul d'entre eux - le tableau <code>history</code> . <br><br>  Donc, cr√©ez une table <code>history_tmp</code> vide bas√©e sur la structure de la table <code>history</code> . <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`history_tmp`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">`history`</span></span>;</code> </pre> <br>  Nous cr√©ons les partitions dont nous avons besoin.  Par exemple, faisons-le pendant un mois.  Chaque partition est cr√©√©e en fonction de la r√®gle de partition, en fonction de la valeur du champ d' <b>horloge</b> , que nous comparons avec l'horodatage: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`history_tmp`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RANGE</span></span>( clock ) ( <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190201 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-02-01 00:00:00"</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190207 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-02-07 00:00:00"</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190214 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-02-14 00:00:00"</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190221 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-02-21 00:00:00"</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190301 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-03-01 00:00:00"</span></span>)) );</code> </pre> <br>  Cet op√©rateur ajoute un partitionnement √† la table <code>history_tmp</code> nous avons cr√©√©e.  Pr√©cisons que les donn√©es dont la valeur du champ d' <b>horloge</b> est inf√©rieure √† ¬´2019-02-01 00:00:00¬ª tomberont dans la partition <i>p20190201</i> , puis les donn√©es dont la valeur du champ d' <b>horloge est</b> sup√©rieure √† ¬´2019-02-01 00:00:00¬ª mais moins "2019-02-07 00:00:00" tombera dans la f√™te <i>p20190207</i> et ainsi de suite. <br><blockquote>  <b>Remarque importante:</b> Et que se passe-t-il si nous avons des donn√©es dans la table partitionn√©e o√π la valeur du champ d'horloge est sup√©rieure ou √©gale √† "2019-03-01 00:00:00"?  Puisqu'il n'y a pas de partition appropri√©e pour ces donn√©es, elles ne tomberont pas dans la table et seront perdues.  Par cons√©quent, vous ne devez pas oublier de cr√©er des partitions suppl√©mentaires en temps opportun, afin d'√©viter une telle perte de donn√©es (dont ci-dessous). </blockquote>  Ainsi, la table temporaire est pr√©par√©e.  Remplissez les donn√©es.  Le processus peut prendre un certain temps, mais heureusement, il ne bloque aucune autre requ√™te, il suffit donc d'√™tre patient: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IGNORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`history_tmp`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history;</code> </pre> <br>  Le mot cl√© IGNORE n'est pas requis lors du remplissage initial, car il n'y a toujours pas de donn√©es dans le tableau, cependant, vous en aurez besoin lors de l'ajout de donn√©es.  De plus, il peut √™tre utile si vous deviez interrompre ce processus et recommencer lors du remplissage des donn√©es. <br><br>  Ainsi, apr√®s un certain temps (peut-√™tre m√™me quelques heures), le premier t√©l√©chargement de donn√©es est pass√©.  Comme vous le comprenez, la table <code>history_tmp</code> ne contient plus toutes les donn√©es de la table d' <code>history</code> , mais uniquement les donn√©es qui s'y <code>history_tmp</code> au <code>history_tmp</code> la requ√™te.  Ici, en fait, vous avez le choix: soit nous effectuons un autre passage (si le processus de remplissage a dur√© longtemps), soit nous proc√©dons imm√©diatement au changement de nom des tableaux mentionn√©s ci-dessus.  Prenons d'abord le deuxi√®me passage.  Tout d'abord, nous devons comprendre l'heure du dernier enregistrement ins√©r√© dans <code>history_tmp</code> : <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">max</span></span>(clock) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history_tmp;</code> </pre> <br>  Supposons que vous ayez re√ßu: <b>1551045645</b> .  Maintenant, nous utilisons la valeur obtenue dans la deuxi√®me passe de remplissage des donn√©es: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IGNORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`history_tmp`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> clock&gt;=<span class="hljs-number"><span class="hljs-number">1551045645</span></span>;</code> </pre> <br>  Ce passage devrait se terminer beaucoup plus rapidement.  Mais si la premi√®re passe a √©t√© ex√©cut√©e pendant des heures et que la seconde a √©galement √©t√© effectu√©e pendant une longue p√©riode, il peut √™tre correct d'effectuer la troisi√®me passe, qui est effectu√©e de mani√®re compl√®tement similaire √† la seconde. <br><br>  A la fin, nous effectuons √† nouveau l'op√©ration d'obtention de l'heure de la derni√®re insertion de l'enregistrement dans <code>history_tmp</code> en faisant: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">max</span></span>(clock) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history_tmp;</code> </pre> <br>  Disons que vous avez obtenu <b>1551085645</b> .  Conservez cette valeur - nous en aurons besoin pour le remplissage. <br><br>  Et maintenant, en fait, lorsque les donn√©es primaires remplissant <code>history_tmp</code> termin√©es, nous proc√©dons √† renommer les tables: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">RENAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> history_old; <span class="hljs-keyword"><span class="hljs-keyword">RENAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> history_tmp <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> history; <span class="hljs-keyword"><span class="hljs-keyword">COMMIT</span></span>;</code> </pre> <br>  Nous avons con√ßu ce bloc comme une transaction afin d'√©viter le moment d'ins√©rer des donn√©es dans une table inexistante, car apr√®s le premier RENAME jusqu'√† ce que le deuxi√®me RENAME soit ex√©cut√©, la table d' <code>history</code> n'existera pas.  Mais m√™me si certaines donn√©es arrivent entre les op√©rations RENAME dans la table d' <code>history</code> et que la table elle-m√™me n'existe pas encore (en raison d'un changement de nom), nous obtiendrons un petit nombre d'erreurs d'insertion qui peuvent √™tre n√©glig√©es (nous avons la surveillance, pas la banque). <br><br>  Nous avons maintenant une nouvelle table d' <code>history</code> avec partitionnement, mais elle n'a pas assez de donn√©es re√ßues lors de la derni√®re passe d'insertion de donn√©es dans la table <code>history_tmp</code> .  Mais nous avons ces donn√©es dans la table <code>history_old</code> et nous les partageons √† partir de l√†.  Pour cela, nous aurons besoin de la valeur pr√©c√©demment enregistr√©e 1551085645. Pourquoi avons-nous enregistr√© cette valeur et n'avons pas d√©j√† utilis√© le temps de remplissage maximal de la table d' <code>history</code> actuelle?  Parce que de nouvelles donn√©es y entrent d√©j√† et nous aurons le mauvais moment.  Donc, nous mesurons les donn√©es: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IGNORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`history`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> history_old <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> clock&gt;=<span class="hljs-number"><span class="hljs-number">1551045645</span></span>;</code> </pre> <br>  Apr√®s la fin de cette op√©ration, nous avons dans la nouvelle table d' <code>history</code> partitionn√©e toutes les donn√©es qui √©taient dans l'ancienne, plus les donn√©es qui sont venues apr√®s que la table a √©t√© renomm√©e.  La table <code>history_old</code> n'est plus n√©cessaire.  Vous pouvez le supprimer imm√©diatement ou en faire une copie de sauvegarde (si vous souffrez de parano√Øa) avant de le supprimer. <br><br>  L'ensemble du processus d√©crit ci-dessus doit √™tre r√©p√©t√© pour les <code>history_str</code> , <code>history_text</code> et <code>history_uint</code> . <br><br><h3>  Ce qui doit √™tre corrig√© dans les param√®tres du serveur Zabbix </h3><br>  Maintenant, la maintenance de la base de donn√©es concernant l'historique des donn√©es repose sur nos √©paules.  Cela signifie que Zabbix ne devrait plus supprimer les anciennes donn√©es - nous le ferons nous-m√™mes.  Pour que Zabbix Server n'essaye pas de nettoyer les donn√©es elles-m√™mes, vous devez vous rendre sur l'interface Web de Zabbix, s√©lectionner le menu "Administration", puis le sous-menu "G√©n√©ral", puis s√©lectionner "Effacer l'historique" dans la liste d√©roulante √† droite.  Sur la page qui appara√Æt, d√©cochez toutes les cases du groupe "Historique" et cliquez sur le bouton "Mettre √† jour".  Cela √©vitera que nous nettoyions les tables d' <code>history*</code> par le biais de la femme de m√©nage. <br><br>  Faites attention sur la m√™me page au groupe ¬´Dynamique des changements¬ª.  Ce n'est que le tableau des <code>trends</code> , sur lequel nous avons promis de revenir.  S'il est √©galement devenu trop volumineux pour vous et doit √™tre partitionn√©, d√©cochez √©galement ce groupe, puis traitez cette table exactement comme pour les tables <code>history*</code> . <br><br><h3>  Maintenance suppl√©mentaire de la base de donn√©es </h3><br>  Comme il a √©t√© √©crit pr√©c√©demment, pour un fonctionnement normal sur des tables partitionn√©es, il est n√©cessaire de cr√©er des partitions √† temps.  Vous pouvez faire ceci comme ceci: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`history`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190307 <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LESS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THAN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">UNIX_TIMESTAMP</span></span>(<span class="hljs-string"><span class="hljs-string">"2019-03-07 00:00:00"</span></span>)));</code> </pre> <br>  De plus, depuis que nous avons cr√©√© des tables partitionn√©es et interdit au serveur Zabbix de les nettoyer, la suppression des anciennes donn√©es est d√©sormais notre pr√©occupation.  Heureusement, il n'y a aucun probl√®me.  Cela se fait simplement en supprimant la partition dont nous n'avons plus besoin des donn√©es. <br><br>  Par exemple: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> history <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PARTITION</span></span> p20190201;</code> </pre> <br>  Contrairement aux instructions DELETE FROM avec une plage de dates, la DROP PARTITION est effectu√©e en quelques secondes, ne charge pas du tout le serveur et fonctionne tout aussi bien lors de l'utilisation de la r√©plication dans MySQL. <br><br><h3>  Conclusion </h3><br>  La solution d√©crite est √©prouv√©e dans le temps.  Le volume de donn√©es augmente, mais il n'y a pas de ralentissement notable des performances. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480082/">https://habr.com/ru/post/fr480082/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480070/index.html">Avantages React: une b√©n√©diction pour les entreprises?</a></li>
<li><a href="../fr480072/index.html">Kubernetes: pourquoi est-il si important de configurer la gestion des ressources syst√®me?</a></li>
<li><a href="../fr480076/index.html">Multitraitement et rapprochement des donn√©es de diverses sources</a></li>
<li><a href="../fr480078/index.html">Nouvelles biblioth√®ques frontales sur les p√©riph√©riques React</a></li>
<li><a href="../fr480080/index.html">De quoi avez-vous besoin pour prendre des notes?</a></li>
<li><a href="../fr480086/index.html">Comment se conformer aux exigences de 152-FZ, prot√©ger les donn√©es personnelles de nos clients et ne pas marcher sur notre r√¢teau</a></li>
<li><a href="../fr480088/index.html">DevOps - OK, mais que faire? Comment r√©duire le travail manuel et obtenir le r√©sultat souhait√©</a></li>
<li><a href="../fr480090/index.html">L'open source est tout</a></li>
<li><a href="../fr480092/index.html">Comment r√©soudre le probl√®me de la reconnaissance audio sur GO</a></li>
<li><a href="../fr480096/index.html">Fin de l'enfance: droit d'auteur sur les ≈ìuvres cr√©√©es par l'intelligence artificielle (IA)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>