<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äç‚öïÔ∏è üåµ üôà Pr√©sentation de la technologie IPMI ü§∞üèæ üêÖ üêõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour g√©rer √† distance l'√©tat de la plate-forme serveur, les administrateurs syst√®me et les ing√©nieurs utilisent la technologie IPMI, ce qui simplifie ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pr√©sentation de la technologie IPMI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/439834/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/73/nq/c6/73nqc65bgrd3ghytnkkexqrihyk.png" title="Pr√©sentation de la technologie IPMI"></div><br>  Pour g√©rer √† distance l'√©tat de la plate-forme serveur, les administrateurs syst√®me et les ing√©nieurs utilisent la technologie IPMI, ce qui simplifie consid√©rablement leur vie.  D√©sormais, vous n'avez plus besoin de courir chaque fois sur le serveur pour appuyer sur le bouton de r√©initialisation - vous pouvez r√©pondre aux probl√®mes critiques en temps opportun tout en √©tant assis √† la maison dans un fauteuil confortable.  Cet article couvrira les composants de base d'IPMI et les d√©tails du fonctionnement de la technologie. <br><a name="habracut"></a><br><h2>  Qu'est-ce que l'IPMI? </h2><br>  L'acronyme IPMI signifie Intelligent Platform Management Interface.  Gr√¢ce √† IPMI, vous pouvez vous connecter √† distance au serveur et g√©rer son fonctionnement: <br><br><ul><li>  Surveillez l'√©tat physique de l'√©quipement, par exemple, v√©rifiez la temp√©rature des composants individuels du syst√®me, les niveaux de tension, la vitesse du ventilateur </li><li>  Restaurer le serveur en mode automatique ou manuel (red√©marrage √† distance du syst√®me, mise sous / hors tension, chargement d'images ISO et mise √† jour du logiciel) </li><li>  G√©rer les p√©riph√©riques </li><li> Gardez un journal des √©v√©nements </li><li>  Stocker des informations sur l'√©quipement utilis√© </li></ul><br>  Supposons qu'un ing√©nieur reconfigure le r√©seau sur le serveur, fasse une erreur de configuration et perd l'acc√®s via SSH.  Comment "atteindre" le serveur maintenant?  Vous pouvez vous connecter via IPMI et modifier les param√®tres. <br><br>  IPMI est bon car les fonctions ci-dessus sont disponibles ind√©pendamment du processeur, du BIOS ou du syst√®me d'exploitation (OS) de la plate-forme g√©r√©e.  Par exemple, vous pouvez red√©marrer le serveur √† distance si le syst√®me d'exploitation se bloque ou rechercher la raison de l'√©chec du processeur dans le journal des √©v√©nements syst√®me.  Vous pouvez m√™me g√©rer un serveur hors tension - il suffit que le serveur soit connect√© au r√©seau √©lectrique. <br><br>  Une fois le serveur mont√© et connect√© au r√©seau, les ing√©nieurs de Selectel configurent le BIOS et IPMI.  Vous pouvez ensuite quitter la salle des serveurs bruyante et continuer √† configurer l'√©quipement √† distance.  Une fois la configuration initiale termin√©e, les clients Selectel peuvent g√©rer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des serveurs de configuration</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©di√©s</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">arbitraires</a> via IPMI. <br><br><blockquote><h4>  Contexte historique </h4><br>  La premi√®re version de la sp√©cification IPMI v1.0 a √©t√© d√©velopp√©e conjointement par Intel, Dell, NEC et Hewlett-Packard en 1998.  Dans la pratique, des vuln√©rabilit√©s et des faiblesses ont √©t√© d√©couvertes qui ont √©t√© corrig√©es dans les versions ult√©rieures d'IPMI v1.5 et v2.0. <br></blockquote><br>  La sp√©cification IPMI standardise l'interface de communication, et non une impl√©mentation sp√©cifique dans le mat√©riel, donc IPMI ne n√©cessite pas l'utilisation de dispositifs brevet√©s sp√©ciaux et de certains microcontr√¥leurs.  Les constructeurs, respectant le cahier des charges, d√©veloppent leur propre √©quipement IPMI embarqu√© dans des plateformes serveurs: <br><div class="scrollable-table"><table><tbody><tr><th align="left">  Constructeur </th><th align="left">  Technologie bas√©e sur IPMI </th></tr><tr><td>  Cisco </td><td>  Cisco IMC (contr√¥leur de gestion int√©gr√©) </td></tr><tr><td>  Dell </td><td>  iDRAC (carte d'acc√®s √† distance Dell int√©gr√©e) </td></tr><tr><td>  HP </td><td>  iLO (Integrated Lights-Out) </td></tr><tr><td>  Ibm </td><td>  IMM (Module de gestion int√©gr√©e) </td></tr><tr><td>  Lenovo </td><td>  IMM (Module de gestion int√©gr√©e) </td></tr><tr><td>  Supermicro </td><td>  SIM (Supermicro Intelligent Management) </td></tr></tbody></table></div>  Les entreprises fixent leurs prix pour la technologie fournie.  Si le co√ªt de la mise en ≈ìuvre d'IPMI augmente, le prix de location du serveur augmente, car il d√©pend directement du co√ªt des consommables. <br><br>  Les solutions des fabricants diff√®rent entre elles: <br><br><ul><li>  Visibilit√© des informations sur l'√©tat de l'√©quipement </li><li>  Un ensemble unique d'applications pour restaurer la sant√© du serveur en cas de d√©faillance d'un composant </li><li>  La possibilit√© de collecter des statistiques sur tous les composants du serveur, y compris ceux connect√©s via des cartes d'extension PCI, NVM, etc. </li><li>  Utilisation de la technologie non seulement dans le mat√©riel du serveur, mais aussi avec des ordinateurs ordinaires via des cartes d'extension PCI-Express </li></ul><br>  En fait, pour un travail confortable avec la console distante et une notification rapide des probl√®mes, la fonctionnalit√© IPMI de base est suffisante. <br><br>  Bien que les fabricants fournissent un IPMI modifi√© et r√©vis√©, la mise en ≈ìuvre de son architecture reste similaire.  Voyons en quoi consiste la technologie, bas√©e sur les sp√©cifications officielles d'Intel. <br><br><h2>  Les composants de base de tout IPMI </h2><br><h3>  Contr√¥leurs </h3><br>  Au centre de l'architecture se trouve le ¬´cerveau¬ª d'IPMI, le microcontr√¥leur BMC (Baseboard Management Controller).  Gr√¢ce √† elle, le contr√¥le du serveur √† distance a lieu.  En fait, BMC est un ordinateur s√©par√© avec son logiciel et son interface r√©seau, qui est soud√© √† la carte m√®re ou connect√© en tant que carte d'extension via le bus de gestion PCI. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cg/9b/nl/cg9bnlv-oaiucugc4ugqqtbla6q.png" title="Architecture IPMI principale"></div><br>  Le BMC est aliment√© par la tension de veille de la carte m√®re, c'est-√†-dire qu'il fonctionne toujours, quel que soit l'√©tat du serveur. <br><br>  Vous pouvez connecter des contr√¥leurs de gestion (MC) suppl√©mentaires au contr√¥leur BMC pour √©tendre les capacit√©s de gestion de base.  Par exemple, alors que le syst√®me principal est contr√¥l√© par des fonctions BMC, les MC sont connect√©s pour surveiller divers sous-syst√®mes: alimentations redondantes, disques RAID, p√©riph√©riques. <br><br>  Les MC sont livr√©s avec des cartes autonomes distinctes du BMC central, c'est pourquoi ils sont √©galement appel√©s contr√¥leurs satellites.  Il peut y avoir plusieurs contr√¥leurs suppl√©mentaires, mais le BMC central en est un. <br><br>  Les contr√¥leurs sont connect√©s au BMC via l'interface IPMB (Intelligent Platform Management Bus - Intelligent Platform Management Bus).  IPMB est un bus bas√© sur I2C (Inter-Integrated Circuit), √† travers lequel le BMC redirige les commandes de contr√¥le vers diff√©rentes parties de l'architecture: <br><br><ul><li>  Communique avec des contr√¥leurs suppl√©mentaires (MC) </li><li>  Lit les donn√©es des capteurs (Capteurs) </li><li>  Acc√®de au stockage non volatile </li></ul><br>  L'architecture IPMI est impl√©ment√©e de mani√®re √† ce que l'administrateur distant n'ait pas d'acc√®s direct aux composants du syst√®me.  Par exemple, pour recevoir des donn√©es de capteurs, l'administrateur distant envoie une commande au contr√¥leur BMC, et le contr√¥leur BMC, √† son tour, fait r√©f√©rence aux capteurs. <br><br>  Outre l'envoi de commandes au contr√¥leur BMC, vous pouvez configurer l'ex√©cution automatique des actions par le contr√¥leur √† l'aide des m√©canismes suivants: <br><div class="scrollable-table"><table><tbody><tr><td width="150">  <strong>PEF (Platform Event Filtering)</strong> </td><td>  Le BMC stocke une table d'√©v√©nements avec des informations sur les √©v√©nements auxquels r√©pondre et les actions √† entreprendre.  Lorsque le contr√¥leur BMC re√ßoit un message d'√©v√©nement, il compare les donn√©es avec la table et choisit la fa√ßon de r√©pondre √† l'√©v√©nement. <br>  La r√©action comprend des actions telles que l'arr√™t, le red√©marrage du syst√®me, la g√©n√©ration d'une alerte <br></td></tr><tr><td width="150">  <strong>Minuterie de surveillance</strong> </td><td>  Le temporisateur est configur√© pour ex√©cuter une action apr√®s une p√©riode de temps sp√©cifi√©e.  Les actions incluent l'arr√™t, le red√©marrage du serveur, l'interruption des processus.  Si vous d√©finissez la valeur du d√©lai d'expiration sur 0, l'action sera ex√©cut√©e imm√©diatement. <br>  Selon l'impl√©mentation, Watchdog peut interroger le syst√®me sur l'√©tat une fois dans un intervalle de temps donn√©.  Si le syst√®me ne r√©pond pas (par exemple, lorsqu'il se bloque), une action est d√©clench√©e <br></td></tr><tr><td width="150">  <strong>Pare-feu du firmware</strong> </td><td>  Certaines actions BMC impl√©ment√©es dans un serveur autonome peuvent perturber le fonctionnement des plates-formes modulaires (par exemple, un serveur lame).  Pour √©viter d'√©ventuels probl√®mes, le pare-feu permet au contr√¥leur BMC de bloquer les param√®tres, les commandes IPMI et les op√©rations d'√©criture via l'interface syst√®me. <br>  Le pare-feu contient √©galement un ensemble de commandes gr√¢ce auxquelles vous pouvez d√©couvrir quelles commandes et fonctions de gestion sont disponibles pour une plate-forme particuli√®re <br></td></tr></tbody></table></div><div style="text-align:center;"><img src="https://habrastorage.org/webt/a1/wo/_d/a1wo_diiljezc-ouxrb45ualrng.png" title="Param√®tres PEF et Watchdog Timer dans le BIOS du serveur"></div><br><h3>  Stockage non volatile </h3><br>  Le stockage non volatile reste disponible m√™me si la CPU du serveur tombe en panne, par exemple via un r√©seau local;  se compose de trois domaines: <br><br><ul><li>  Journal des √©v√©nements syst√®me (SEL) - Journal des √©v√©nements syst√®me </li><li>  R√©f√©rentiel d'enregistrement de donn√©es de capteur (SDR) - un r√©f√©rentiel qui stocke les donn√©es de capteur </li><li>  Informations sur les unit√©s rempla√ßables sur site (FRU) - informations d'inventaire sur les modules du syst√®me </li></ul><br>  Les modules syst√®me g√©n√®rent (g√©n√©rateur d'√©v√©nements) ou re√ßoivent (r√©cepteur d'√©v√©nements) des √©v√©nements.  Les MC agissent comme des g√©n√©rateurs d'√©v√©nements et les BMC d'une architecture peuvent jouer les deux r√¥les.  Le BMC re√ßoit des messages d'√©v√©nement via l'interface syst√®me et IPMB, puis les enregistre dans le journal des √©v√©nements syst√®me (SEL). <br><br>  Il existe des exigences obligatoires pour la mise en ≈ìuvre du SEL: <br><br><ul><li>  SEL stocke au moins 16 √©v√©nements en m√©moire </li><li>  Les informations stock√©es dans SEL sont accessibles ind√©pendamment de l'acc√®s BMC et de l'√©tat de la plate-forme g√©r√©e </li></ul><br>  Les commandes IPMI lisent et suppriment SEL.  La m√©moire SEL √©tant limit√©e, le journal doit p√©riodiquement √™tre v√©rifi√© et nettoy√© pour que de nouveaux √©v√©nements soient enregistr√©s.  Dans les param√®tres BMC, vous pouvez configurer le nettoyage automatique SEL.  Le nettoyage automatique sur diff√©rentes plates-formes se d√©roule de diff√©rentes mani√®res: effacer les anciens enregistrements pour en remplir de nouveaux ou effacer toute l'histoire. <br><br>  Le message d'√©v√©nement contient des informations provenant des zones R√©f√©rentiel SDR et Info FRU. <br><br>  Les enregistrements SDR sont des donn√©es sur les types et le nombre de capteurs, leur capacit√© √† g√©n√©rer des √©v√©nements et les types de lectures.  Les SDR contiennent √©galement des enregistrements du nombre et des types d'appareils connect√©s √† IPMB.  Les enregistrements SDR sont stock√©s dans une zone de m√©moire appel√©e SDR Repository (Sensor Data Records Repository). <br><br>  Les enregistrements FRU contiennent des informations sur les num√©ros de s√©rie et les mod√®les de pi√®ce des diff√©rents modules du syst√®me - processeur, carte m√©moire, carte d'E / S, contr√¥leurs. <br><br>  Les informations sur les FRU peuvent √™tre fournies via MC (commandes IPMI) ou via l'acc√®s √† des puces de m√©moire non volatiles SEEPROM (Serial Electrically Erasable Programmable Read Only Memory) connect√©es via le bus de gestion priv√©.  Les contr√¥leurs communiquent via ce bus via des commandes I2C de bas niveau avec des p√©riph√©riques qui ne prennent pas en charge les commandes IPMI. <br><br><blockquote><h4>  Application pratique </h4><br><p>  Supposons qu'un client se plaint de gels de serveur, mais tout est en ordre dans les journaux du syst√®me d'exploitation.  Nous regardons SEL - nous voyons des erreurs sur l'un des emplacements RAM indiquant les informations sur l'emplacement dans lequel il se trouve.  Changement - le serveur commence √† fonctionner comme une horloge. </p></blockquote><br>  Ci-dessus, nous avons examin√© les modules de base de l'architecture IPMI.  Examinons maintenant la structure des commandes transmises et voyons quelles interfaces sont utilis√©es pour la connexion √† distance. <br><br><h2>  Structure de commande IPMI </h2><br>  IPMI envoie des messages de demande-r√©ponse.  Les demandes sont des commandes.  Les commandes lancent des actions et d√©finissent des valeurs.  Le format requ√™te-r√©ponse permet la communication simultan√©e de plusieurs contr√¥leurs sur le m√™me bus. <br><br>  Les messages IPMI contiennent un ensemble de champs de base communs √† toutes les commandes: <br><br><ul><li>  <strong>La fonction r√©seau (NetFn)</strong> attribue √† la commande la valeur du cluster auquel appartient la commande (commandes de ch√¢ssis, √©v√©nements, stockage, etc.) </li><li>  Le champ <strong>Identifiant de demande / r√©ponse</strong> est n√©cessaire pour distinguer les demandes des r√©ponses </li><li>  <strong>ID du demandeur</strong> - informations sur la source du message.  Par exemple, pour IPMB, ces informations contiennent le LUN (num√©ro d'unit√© logique) du p√©riph√©rique </li><li>  <strong>L'ID du r√©pondant</strong> adresse la demande au r√©pondant souhait√© </li><li>  <strong>Commande</strong> - unique au sein de l'√©quipe des fonctions r√©seau </li><li>  <strong>Donn√©es</strong> - param√®tres suppl√©mentaires (par exemple, donn√©es renvoy√©es dans la r√©ponse) </li></ul><br>  De plus, la r√©ponse transmet toujours le code d'ach√®vement, qui rapporte le r√©sultat de la commande.  Si une erreur se produit lors de l'ex√©cution de la demande, un code diff√©rent de z√©ro correspondant √† l'√©v√©nement sera envoy√©. <br><br>  Les canaux par lesquels les messages sont transmis peuvent √™tre divis√©s en trois cat√©gories avec les interfaces correspondantes: <br><br><ul><li>  BMC - MC, capteurs, stockage (IPMB) </li><li>  BMC - Plateforme g√©r√©e (interface syst√®me) </li><li>  BMC - Administrateur distant (LAN, interface s√©rie) </li></ul><br>  Dans ce mod√®le, BMC peut √™tre consid√©r√© comme un commutateur qui interconnecte les interfaces syst√®me (dans la terminologie de la sp√©cification - Pontage): <br><br><ul><li>  S√©rie ‚Üî IPMB </li><li>  Interface syst√®me s√©rie ‚Üî </li><li>  LAN ‚Üî IPMB </li><li>  LAN Interface Interface syst√®me </li><li>  S√©rie Bus Bus de gestion PCI </li><li>  LAN Bus Bus de gestion PCI </li><li>  Autres combinaisons, y compris Serial ‚Üî LAN </li></ul><br>  Lorsqu'il est d√©livr√© via diverses interfaces d'architecture, l'ensemble de base des champs est compl√©t√© par des num√©ros de canal et des trames.  Par exemple, le protocole IPMB ajoute des champs d'adresse et des champs pour v√©rifier l'int√©grit√© des donn√©es transmises, et le LAN encapsule les commandes IPMI dans des paquets UDP / IP. <br><br><h2>  Interfaces d'acc√®s √† distance </h2><br>  Dans la version initiale d'IPMI, la console distante √©tait connect√©e au module BMC via une interface s√©rie (interface s√©rie).  La sp√©cification IPMI v2.0 est bas√©e sur l'utilisation d'une interface r√©seau (interface LAN). <br><br>  L'interface LAN est fournie via un port r√©seau BMC d√©di√© avec son adresse IP.  Lors de la transmission de messages IPMI via LAN, il y a plusieurs √©tapes d'encapsulation: <br><br><ul><li>  Les messages IPMI sont g√©n√©r√©s dans des paquets de session IPMI (plus loin dans l'article, nous examinerons de plus pr√®s la formation de la session IPMI) </li><li>  Les paquets de session IPMI sont encapsul√©s √† l'aide de RMCP (Remote Management Control Protocol) </li><li>  Les paquets RMCP se forment dans les datagrammes UDP </li><li>  Des trames Ethernet sont ajout√©es </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cp/ev/be/cpevbegml2-h-adycf_s_rb0b0g.png" title="Encapsulation des messages IPMI sur LAN"></div><br>  L'interface s√©rie pour connecter une console distante √† BMC n'est plus utilis√©e, mais elle est n√©cessaire pour impl√©menter deux fonctions: <br><br><ul><li>  Partage de port s√©rie </li><li>  S√©rie sur LAN (SoL) </li></ul><br>  Le partage de port s√©rie est la possibilit√© d'utiliser un connecteur s√©rie commun entre les BMC s√©rie et un syst√®me g√©r√©.  En g√©n√©ral, le partage de port s√©rie est utilis√© pour impl√©menter la redirection de console du BIOS, c'est-√†-dire la redirection de la console du BIOS vers le module BMC. <br><br>  La connexion s√©rie sur LAN est n√©cessaire pour interagir avec les composants du syst√®me qui ne comprennent qu'une interface de communication s√©rie.  Vous pouvez √©galement envoyer des commandes de la console du serveur directement aux p√©riph√©riques du serveur (puces, cartes, disques, etc.).  SoL est impl√©ment√© pour fonctionner en conjonction avec la fonction de partage de port s√©rie. <br><br><h2>  Session et authentification </h2><br>  Pour le LAN et l'interface s√©rie, le d√©but de la transmission des messages IPMI est pr√©c√©d√© de l'√©tablissement d'une session au cours de laquelle des paquets de donn√©es de session IPMI sont g√©n√©r√©s. <br><br>  L'√©tablissement de session est l'authentification d'un utilisateur sp√©cifique.  La session doit √™tre activ√©e avant d'envoyer des messages IPMI selon l'algorithme suivant: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vn/wx/xb/vnwxxbr_mrmg2czetphqhhdo8ha.png" title="Algorithme d'activation de session"></div><br><ol><li>  La console distante demande des donn√©es d'authentification √† BMC </li><li>  Le BMC envoie une r√©ponse sur les types d'authentification pris en charge (aucun, mot de passe, algorithmes MD2 et MD5, etc.) </li><li>  La console distante envoie une commande sur le type d'authentification s√©lectionn√© et envoie la connexion utilisateur </li><li>  Si l'utilisateur dispose de privil√®ges d'acc√®s au canal, le contr√¥leur BMC envoie une r√©ponse contenant l'ID de session.  Gr√¢ce √† l'attribution d'ID, plusieurs sessions peuvent fonctionner simultan√©ment sur un canal (selon les exigences du cahier des charges - au moins quatre sessions simultan√©es) </li><li>  La console distante envoie une demande d'activation de session.  La demande contient un ID de session et des informations d'authentification (nom d'utilisateur, mot de passe, cl√©s - d√©pend du type d'authentification s√©lectionn√©) </li><li>  BMC v√©rifie les informations utilisateur, approuve l'ID de session et envoie une r√©ponse d'activation </li></ol><br>  Les sessions sont automatiquement interrompues si aucune action n'est effectu√©e pendant l'intervalle sp√©cifi√© ou si la connexion est d√©connect√©e. <br><br>  L'acc√®s au contr√¥leur BMC peut √™tre bloqu√© en envoyant plusieurs demandes d'activation de session en m√™me temps, puis toutes les ressources seront utilis√©es pour suivre les sessions qui n√©cessitent une activation.  Pour √©viter une √©ventuelle attaque, il est recommand√© d'utiliser l'algorithme LRU (Last r√©cemment utilis√©) dans l'impl√©mentation BMC.  L'algorithme affirme un ID de session pour la demande d'activation de session la plus ancienne.  Par exemple, une console distante est lanc√©e via un navigateur dans une session noVNC.  Si vous ouvrez plusieurs onglets avec des sessions en cours, la saisie de texte sera disponible dans le premier onglet ouvert. <br><br><h2>  Lorsque IPMI devient indisponible </h2><br>  IPMI aide √† restaurer la sant√© du serveur en cas de panne.  Cependant, il peut arriver que le syst√®me de t√©l√©commande devienne indisponible.  Les dysfonctionnements IPMI peuvent √™tre divis√©s en quatre cat√©gories: <br><br><ul><li>  <strong>Au niveau du r√©seau.</strong>  Ports cass√©s, √©quipement non fonctionnel, d√©faut de c√¢ble, paire torsad√©e mal sertie </li><li>  <strong>Au niveau logiciel.</strong>  Bogue syst√®me, blocage du module BMC, besoin de mettre √† jour le micrologiciel du module </li><li>  <strong>Au niveau mat√©riel.</strong>  Surchauffe, d√©faillance des composants critiques (m√©moire, processeur), d√©fauts d'architecture syst√®me </li><li>  <strong>Au niveau nutritionnel.</strong>  Panne de courant du BMC ou probl√®mes d'alimentation du serveur </li></ul><br>  Ces facteurs affectent √† la fois le fonctionnement d'IPMI et le serveur lui-m√™me.  Le module BMC est une puce ind√©pendante du serveur, et une d√©faillance de ce microcontr√¥leur indique une d√©faillance du serveur dans 90% des cas. <br><br><h2>  IPMI en pratique </h2><br>  Vous pouvez g√©rer le serveur via IPMI via un navigateur Web, des utilitaires fournis par les fabricants et des utilitaires open source. <br><br>  Chaque impl√©mentation IPMI poss√®de une interface Web, mais le principe d'acc√®s reste le m√™me: <br><br><ol><li>  Saisissez l'adresse IP du port BMC dans la barre d'adresse </li><li>  Saisissez le nom d'utilisateur et le mot de passe.  Parfois, ces informations sont indiqu√©es directement sur l'√©quipement. </li></ol><br>  Chez Selectel, nous travaillons avec des modules IPMI d'Intel, Asus et Supermicro.  √Ä titre d'exemple, regardez l'interface Web de Supermicro: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vu/co/lk/vucolkwodmrg15iebjkl203onve.png" title="Interface Web du mat√©riel Supermicro"></div><br>  Les fonctionnalit√©s de l'interface Web sont √©galement impl√©ment√©es dans l'utilitaire graphique Supermicro IPMIView: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/3j/ui/4j3juibaq0voyqkg-2szb0g1z1k.png" title="Interface Supermicro IPMIView"></div><br>  Pour g√©rer l'√©quipement via la console Linux, l'utilitaire correspondant est install√© (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ipmitool</a> pour la gestion locale et √† distance ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IPMICFG</a> pour local).  Ensuite, √† l'aide des commandes de la console, un p√©riph√©rique IPMI est ajout√© et le contr√¥leur BMC est configur√©. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/qr/dy/plqrdy29gepw_xsjbqjfv9hp8og.png" title="Travailler avec l'utilitaire IPMICFG"></div><br>  Les clients Selectel ont IPMI disponible pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les configurations de serveur</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©di√©es</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">personnalis√©es</a> .  IPMI est impl√©ment√© comme une console KVM, qui s'ex√©cute dans une session noVNC via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le panneau de commande</a> .  Pour ce faire, dans la carte contenant les informations sur le serveur, cliquez sur l'ic√¥ne de la console dans le coin sup√©rieur droit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/4t/cs/fz4tcs6ukqpac3dvceah2vr26re.png" title="Carte d'information du serveur"></div><br>  La console s'ouvre dans le navigateur et s'adapte √† la taille de l'√©cran.  Si vous le souhaitez, la console peut √™tre utilis√©e m√™me via un t√©l√©phone ou une tablette. <br><br>  La session est interrompue si vous quittez le panneau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/em/yz/mx/emyzmxitdb2egavs-w-oh2cjgve.png" title="Console KVM ex√©cut√©e en session noVNC"></div><br><h2>  Conclusion </h2><br>  IPMI est un composant enti√®rement autonome de la plate-forme serveur, qui ne d√©pend pas du syst√®me d'exploitation, du BIOS ou du processeur du serveur. <br><br>  Gr√¢ce √† IPMI, le co√ªt de maintenance des syst√®mes serveurs est r√©duit et la vie des administrateurs syst√®me devient plus simple.  Une pr√©sence permanente √† proximit√© de l'√©quipement n'est pas n√©cessaire - son travail est contr√¥l√© √† distance sur le r√©seau. <br><br>  Dans cet article, nous avons couvert les composants de base d'IPMI.  Cependant, les d√©tails de la technologie sont vastes.  Les d√©veloppeurs talentueux, s'appuyant sur la sp√©cification, peuvent cr√©er leur √©quipement IPMI et leurs outils open source, √©liminant simultan√©ment les lacunes de la sp√©cification actuelle et ouvrant de nouvelles possibilit√©s de contr√¥le √† distance. <br><br>  Mat√©riaux utilis√©s dans l'article: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sp√©cification IPMI v2.0</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Livres blancs Supermicro</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439834/">https://habr.com/ru/post/fr439834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439818/index.html">Caract√©ristiques des approches de conception dans le secteur manufacturier r√©el</a></li>
<li><a href="../fr439822/index.html">Cr√©ation d'un affichage alternatif pour le synth√©tiseur / √©chantillonneur Ensoniq EPS16 + et ASR10</a></li>
<li><a href="../fr439824/index.html">Quand les frameworks JavaScript vont-ils dispara√Ætre?</a></li>
<li><a href="../fr439826/index.html">D√©sactiver l'analogique. Qu'arrivera-t-il √† la t√©l√©vision?</a></li>
<li><a href="../fr439830/index.html">Inside Quake: Toujours envisager des alternatives</a></li>
<li><a href="../fr439838/index.html">Arithm√©tique du miel: addition et soustraction par les abeilles</a></li>
<li><a href="../fr439840/index.html">Conf√©rence DUMP-2019: nous vous invitons √† prendre la parole dans les sections Conception, Gestion et Tests</a></li>
<li><a href="../fr439844/index.html">Pourquoi les d√©veloppeurs de Dodo Pizza 250?</a></li>
<li><a href="../fr439848/index.html">Pas un seul VPN. Aide-m√©moire sur la fa√ßon de vous prot√©ger et de prot√©ger vos donn√©es</a></li>
<li><a href="../fr439850/index.html">D√©tection d'√©motions contextuelles dans les conversations textuelles √† l'aide de r√©seaux de neurones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>