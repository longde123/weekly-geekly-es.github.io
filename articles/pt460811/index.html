<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèæ üîÇ ‚è∏Ô∏è Componentes comuns por diferentes equipes. Relat√≥rio Yandex üé† üêê üï≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Criar e manter componentes comuns √© um processo no qual muitas equipes devem estar envolvidas. O chefe do servi√ßo de componentes compartilhados de Yan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Componentes comuns por diferentes equipes. Relat√≥rio Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/460811/"> Criar e manter componentes comuns √© um processo no qual muitas equipes devem estar envolvidas.  O chefe do servi√ßo de componentes compartilhados de Yandex Vladimir Grinenko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">tadatuta</a> explicou como seu desenvolvimento superou a equipe dedicada de Lego, como criamos um reposit√≥rio mono baseado no GitHub usando Lerna e configuramos lan√ßamentos de can√°rios com a implementa√ß√£o de servi√ßos diretamente no CI, o que era necess√°rio e o que ainda a ser. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/zv/o-/0b/zvo-0b7pajia8d3pnm4rbpm72hw.jpeg"></a> <br><br>  "Fico feliz em receber todos voc√™s."  Meu nome √© Vladimir, fa√ßo coisas comuns em interfaces Yandex.  Eu quero falar sobre eles.  Provavelmente, se voc√™ n√£o usar nossos servi√ßos muito profundamente, poder√° ter uma pergunta: o que estamos todos escrevendo?  O que h√° para escrever? <br><br><a name="habracut"></a><img src="https://habrastorage.org/webt/o3/ip/sx/o3ipsxj2wxuhbnfeq23rfk0ucuc.jpeg"><br><br><img src="https://habrastorage.org/webt/wq/kx/y0/wqkxy0_ta9qyzi3vnbryhxqpwy4.jpeg"><br><br>  H√° uma lista de respostas nos resultados da pesquisa, √†s vezes h√° uma coluna √† direita.  Cada um de voc√™s provavelmente vai lidar em um dia.  Se voc√™ se lembrar de que existem navegadores diferentes e assim por diante, adicionamos outro dia para corrigir bugs e todos os usu√°rios lidam com isso. <br><br><img src="https://habrastorage.org/webt/gc/f5/i8/gcf5i8mqymopdqairky09odo00k.jpeg"><br><br>  Algu√©m se lembrar√° de que ainda existe essa interface.  Levando em conta todas as pequenas coisas que voc√™ pode dar a ele por mais uma semana e seguir em frente.  E Dima acabou de nos dizer que existem tantos de n√≥s que precisamos de nossa pr√≥pria escola.  E todas essas pessoas inventam p√°ginas o tempo todo.  Todos os dias eles v√™m trabalhar e escrever, imagina?  Claramente, h√° algo mais. <br><br><img src="https://habrastorage.org/webt/iv/3d/et/iv3detsvcvujieb_-ho8nqmvvuu.jpeg"><br><br>  De fato, os servi√ßos em Yandex, de fato, s√£o mais.  E ainda h√° um pouco mais do que neste slide.  Por tr√°s de cada link, h√° v√°rias interfaces diferentes com grande variabilidade.  Eles s√£o para dispositivos diferentes, em diferentes idiomas.  √Äs vezes, trabalham mesmo em carros e outras coisas estranhas. <br><br><img src="https://habrastorage.org/webt/0w/mz/98/0wmz98pcjwflkkhflu4i_vwgtjo.jpeg"><br><br>  Hoje, o Yandex n√£o √© apenas a web, n√£o apenas mercadorias diferentes com armaz√©ns, entrega e tudo mais.  Passeio de carros amarelos.  E n√£o apenas o que voc√™ pode comer, e n√£o apenas peda√ßos de ferro.  E n√£o apenas todos os tipos de intelig√™ncias autom√°ticas.  Mas tudo o que foi dito acima √© unido pelo fato de que para cada item s√£o necess√°rias interfaces.  Muitas vezes - muito rico.  Yandex √© centenas de diferentes servi√ßos enormes.  Estamos constantemente criando algo novo todos os dias.  Temos milhares de funcion√°rios, incluindo centenas de desenvolvedores front-end e desenvolvedores de interface.  Essas pessoas trabalham em escrit√≥rios diferentes, vivem em fusos hor√°rios diferentes, novos funcion√°rios constantemente v√™m trabalhar. <br><br>  Ao mesmo tempo, n√≥s, na medida em que temos for√ßa suficiente, tentamos torn√°-lo mon√≥tono e uniforme para os usu√°rios. <br><br><img src="https://habrastorage.org/webt/dz/vn/uz/dzvnuzxrodwkt2oi0tbemkn4lne.gif"><br><br>  Esta √© a busca de documentos na Internet.  Mas se mudarmos para a emiss√£o de imagens, o cabe√ßalho corresponder√°, apesar de ser um reposit√≥rio separado, envolvido em uma equipe completamente separada, possivelmente at√© em outras tecnologias.  Parece que √© complicado?  Bem, eles fizeram um chap√©u duas vezes, como uma coisa simples.  Cada bot√£o na tampa tamb√©m possui seu pr√≥prio mundo interno rico e separado.  Alguns pop-ups aparecem aqui, algo tamb√©m pode ser enviado para l√°.  Tudo isso √© traduzido para diferentes idiomas, funciona em diferentes plataformas.  E aqui vamos das fotos, por exemplo, para o v√≠deo, e este √© novamente um novo servi√ßo, outra equipe.  Outro reposit√≥rio novamente.  Mas ainda o mesmo chap√©u, embora haja diferen√ßas.  E tudo isso deve ser deixado uniforme. <br><br>  Qual √© o valor, alternando assim nos slides, para garantir que nada ocorra em nenhum lugar do pixel?  Tentamos impedir que isso aconte√ßa. <br><br><img src="https://habrastorage.org/webt/_u/9b/2r/_u9b2ralx_p1qvev6q_k1jsr7ys.jpeg"><br><br>  Para mostrar um pouco mais a escala, tirei uma captura de tela do reposit√≥rio, que armazena apenas o c√≥digo de front-end para novos navegadores - apenas a sa√≠da de documentos, sem fotos e v√≠deos.  Existem dezenas de milhares de confirma√ß√µes e quase 400 colaboradores.  Isso √© apenas no layout, apenas um projeto.  Aqui est√° uma lista de links azuis que voc√™ est√° acostumado a ver. <br><br>  Sergey Berezhnoy, meu l√≠der, ama muito essa hist√≥ria, j√° que reunimos muito na empresa. Quero que nossa intera√ß√£o funcione em conjunto como se estivesse em JavaScript: um mais um √© mais que dois. <br><br><img src="https://habrastorage.org/webt/qq/kn/-q/qqkn-qr0bqavfyeum_ocif9gycs.jpeg"><br><br>  E estamos tentando obter tudo o que podemos com a intera√ß√£o.  A primeira coisa que vem √† mente nessas condi√ß√µes √© a reutiliza√ß√£o.  Aqui, por exemplo, um snippet de v√≠deo em um servi√ßo nos resultados da pesquisa para um v√≠deo.  Este √© algum tipo de imagem com uma assinatura e outros elementos diferentes. <br><br><img src="https://habrastorage.org/webt/j5/rj/pr/j5rjprkjwcplnephmm-dxciv1l4.jpeg"><br><br>  Se voc√™ procurar mais, aqui est√° a emiss√£o usual de documentos.  Mas aqui tamb√©m h√° exatamente o mesmo trecho. <br><br><img src="https://habrastorage.org/webt/cr/3k/t4/cr3kt4p_iys_uplw7yi7ltsntn4.jpeg"><br><br>  Ou, digamos, existe um servi√ßo Yandex.Air separado, que consiste em um pouco menos do que completamente em trechos semelhantes. <br><br><img src="https://habrastorage.org/webt/qt/91/ii/qt91iipkwlqktjjqpnwhmfxapzs.jpeg"><br><br>  Ou, digamos, o snippet de v√≠deo no notificador, que est√° em diferentes p√°ginas do portal. <br><br><img src="https://habrastorage.org/webt/az/w9/2i/azw92ih1mulgzijr1gdgbenx8k0.jpeg"><br><br>  Ou aqui est√° um trecho de v√≠deo quando voc√™ o adiciona aos seus Favoritos e depois assiste √†s suas Cole√ß√µes. <br><br><img src="https://habrastorage.org/webt/ub/ge/yd/ubgeydeso0lwyy4t67ejiz7uh6w.jpeg"><br><br>  Soa como?  Obviamente, parece.  E da√≠?  Se realmente permitirmos que os servi√ßos integrem facilmente nossos componentes finalizados a outros servi√ßos de portal, obviamente, esse servi√ßo, devido ao fato de os usu√°rios poderem interagir com seus dados em sites diferentes, obter√° mais usu√°rios.  Isso √© √≥timo.  Os usu√°rios tamb√©m se beneficiar√£o com isso.  Eles ver√£o as mesmas coisas igualmente.  Eles v√£o se comportar como de costume.  Ou seja, n√£o √© preciso adivinhar repetidamente o que o designer tinha em mente aqui e como interagir com ele. <br><br>  E, finalmente, a empresa obter√° economias √≥bvias com isso.  Al√©m disso, parece - por que existe um layout de miniatura de v√≠deo e algum tipo de assinatura / De fato, para obt√™-lo exatamente assim, voc√™ precisa realizar muitas experi√™ncias diferentes, testar hip√≥teses diferentes, escolher tamanhos, cores, recuos.  Adicione alguns elementos, talvez, e remova, porque eles n√£o voaram.  E o que aconteceu, o que realmente funciona, √© o resultado de um processo muito longo.  E se toda vez em qualquer novo lugar para faz√™-lo novamente, isso √© uma enorme quantidade de esfor√ßo. <br><br>  Agora imagine.  Digamos que conseguimos algo que funcione bem.  Em todos os lugares, em todos os lugares em que o implementaram, eles realizaram um novo experimento e perceberam o que poderia ser melhorado.  E, novamente, temos que repetir toda essa cadeia de implementa√ß√£o.  Caro <br><br><img src="https://habrastorage.org/webt/ex/8c/1_/ex8c1_tlclflyej-krijb8m20fk.jpeg"><br><br>  Ok, parece √≥bvio reutilizar bem.  Mas agora temos que resolver uma s√©rie de novos problemas.  Voc√™ precisa entender onde armazenar esse novo c√≥digo.  Por um lado, parece ser l√≥gico.  Aqui temos um trecho de v√≠deo, feito pela equipe de v√≠deo, eles t√™m um reposit√≥rio com seu projeto.  Provavelmente deve ser colocado l√°.  Mas como ent√£o distribu√≠-lo para outros reposit√≥rios de todos os outros caras?  E se outros caras quiserem trazer algo pr√≥prio para esse trecho?  Mais uma vez n√£o est√° claro. <br><br>  √â necess√°rio version√°-lo de alguma forma.  Voc√™ n√£o pode mudar nada e, assim, pronto, tudo de repente acontece.  Algo precisa ser testado.  Al√©m disso, n√≥s, por exemplo, testamos isso no servi√ßo do pr√≥prio v√≠deo.  Mas e se, quando integrado a outro servi√ßo, algo quebrar?  Mais uma vez n√£o est√° claro. <br><br>  No final, √© necess√°rio, de alguma forma, garantir uma entrega r√°pida o suficiente para diferentes servi√ßos, porque ser√° estranho se tivermos em algum lugar a vers√£o anterior, em algum lugar novo.  O usu√°rio parece clicar na mesma coisa e existe um comportamento diferente.  E precisamos fornecer, de alguma forma, a oportunidade para desenvolvedores de equipes diferentes fazerem altera√ß√µes nesse c√≥digo comum.  De alguma forma, precisamos ensin√°-los a usar tudo.  Temos um longo caminho para tornar conveniente a reutiliza√ß√£o de interfaces. <br><br><img src="https://habrastorage.org/webt/gu/a8/en/gua8ensfq4qkfjd9hwgrf3dpeko.jpeg"><br><br>  Come√ßamos no tempo imemorial, de volta ao SVN, e era conveniente e pr√°tico: um pai com HTML, como no Bootstrap.  Voc√™ copia para si mesmo.  Ao lado do papai com estilos, algum tipo de JS l√°, que ent√£o sabia como simplesmente mostrar / ocultar algo.  E isso √© tudo. <br><br><img src="https://habrastorage.org/webt/tg/xu/sx/tgxusxowszje9vwtdvxf4yy4_os.jpeg"><br><br>  De alguma forma, a lista de componentes era assim.  O b-domeg, respons√°vel pela autoriza√ß√£o, √© destacado aqui.  Talvez voc√™ ainda se lembre, no Yandex, de fato, havia um formul√°rio para login e senha, com um teto.  N√≥s chamamos a "casa", embora ela tenha sugerido o envelope de correio, porque eles costumavam entrar no correio. <br><br>  Em seguida, criamos toda uma metodologia para suportar interfaces comuns. <br><br><img src="https://habrastorage.org/webt/tu/7h/08/tu7h08reemfp5mrp8rib5a3ib9q.jpeg"><br><br>  A pr√≥pria biblioteca da empresa adquiriu seu pr√≥prio site com uma pesquisa e qualquer taxonomia. <br><br><img src="https://habrastorage.org/webt/fv/pa/jn/fvpajnegfm13z-q1fzb1edglvn0.jpeg"><br><br>  O reposit√≥rio agora se parece com isso.  Veja bem, tamb√©m quase 10 mil confirma√ß√µes e mais de 100 colaboradores. <br><br><img src="https://habrastorage.org/webt/h2/9r/ur/h29ruri7jkqnzacvu9dedijcjgu.jpeg"><br><br>  Mas esta √© a pasta da pr√≥pria casa na nova reencarna√ß√£o.  Agora ela se parece com isso.  J√° existem mais pastas pr√≥prias dentro da metade da tela. <br><br><img src="https://habrastorage.org/webt/lu/u9/62/luu962u_j91qtinyg3gn-1-efwg.jpeg"><br><br>  E assim o site parece hoje. <br><br><img src="https://habrastorage.org/webt/xj/ko/g-/xjkog-2xy19nuayhuliti4urgoy.jpeg"><br><br>  Como resultado, a biblioteca compartilhada √© usada em mais de 360 ‚Äã‚Äãreposit√≥rios no Yandex.  E existem implementa√ß√µes diferentes, um ciclo de lan√ßamento depurado etc. Parece que aqui temos uma biblioteca comum, agora vamos us√°-la em qualquer lugar e tudo √© √≥timo.  O problema de introduzir coisas comuns em qualquer lugar foi resolvido.  Na verdade n√£o. <br><br><img src="https://habrastorage.org/webt/rj/e5/0_/rje50_8ba6axvribhiogqzzxer8.jpeg"><br><br>  Tentando resolver o problema de reutiliza√ß√£o no est√°gio em que voc√™ j√° possui c√≥digo pronto, √© tarde demais.  Isso significa que, a partir do momento em que o designer desenhou o layout dos servi√ßos, os distribuiu para os servi√ßos e, em particular, para a equipe que lida com componentes comuns, j√° passou algum tempo.  O mais prov√°vel √© que, a essa altura, ele acabe para que em cada servi√ßo separado, ou pelo menos em v√°rios deles, esse mesmo elemento de interface tamb√©m tenha sido criado.  Eles inventaram de alguma maneira √† sua maneira. <br><br>  E mesmo que uma solu√ß√£o geral apare√ßa mais tarde na biblioteca compartilhada, ela continuar√° sendo executada, assim voc√™ ter√° que reimplementar tudo o que conseguiu concluir em cada servi√ßo.  E isso √© novamente um problema.  √â muito dif√≠cil justificar.  Aqui est√° a equipe.  Ela tem seus pr√≥prios objetivos, tudo j√° est√° funcionando bem.  E dizemos essas coisas - olha, finalmente temos uma coisinha comum, aceite.  Mas a equipe √© assim - j√° temos trabalho suficiente.  Por que precisamos disso?  Al√©m disso, de repente algo n√£o vai nos servir l√°?  N√≥s n√£o queremos. <br><br>  O segundo grande problema √©, de fato, a dissemina√ß√£o de informa√ß√µes sobre o que s√£o esses novos componentes legais.  S√≥ porque existem tantos desenvolvedores, eles est√£o ocupados com suas tarefas di√°rias.  E eles t√™m a oportunidade de sentar e estudar o que est√° acontecendo l√° na √°rea de comum, n√£o importa o que isso signifique, de fato. <br><br>  E o maior problema √© que √© fundamentalmente imposs√≠vel resolver os problemas comuns a todos os servi√ßos com uma √∫nica equipe dedicada.  Ou seja, quando temos uma equipe que lida com v√≠deo, e ela cria seu pr√≥prio trecho com v√≠deo, fica claro que concordaremos com eles e faremos esse trecho em alguma biblioteca centralizada.  Mas existem diretamente milhares desses exemplos em diferentes servi√ßos.  E aqui certamente nenhuma m√£o √© suficiente.  Portanto, a √∫nica solu√ß√£o √© que todos devem lidar com componentes gerais o tempo todo. <br><br><img src="https://habrastorage.org/webt/y7/ay/9p/y7ay9pqgaxomogw-xz4x7hdlgb4.jpeg"><br><br>  E voc√™ precisa come√ßar, estranhamente, n√£o com os desenvolvedores de interface, mas com os designers.  Eles entendem isso tamb√©m.  Temos v√°rias tentativas simult√¢neas dentro para que esse processo converja.  Designers criam sistemas de design.  Eu realmente espero que, mais cedo ou mais tarde, seja poss√≠vel reduzi-los a um √∫nico sistema comum que leve em considera√ß√£o todas as necessidades. <br><br><img src="https://habrastorage.org/webt/be/vd/yd/bevdyd-kpziztd5yxc6qp98xgqy.jpeg"><br><br>  Agora existem v√°rios deles.  Surpreendentemente, as tarefas s√£o exatamente as mesmas: acelerar o processo de desenvolvimento, resolver o problema de consist√™ncia, n√£o reinventar a roda e n√£o duplicar o trabalho realizado. <br><br><img src="https://habrastorage.org/webt/0z/xd/ci/0zxdcimwdz-s1d8oaiu3dinhxce.jpeg"><br><br>  E uma maneira de resolver o problema de comunica√ß√£o de informa√ß√µes √© permitir que os desenvolvedores conhe√ßam outras equipes, incluindo uma que lida com componentes de interface comuns.  N√≥s resolvemos isso deste lado pelo fato de termos um bootcamp, que, quando um desenvolvedor aparece no Yandex, primeiro permite que ele v√° para equipes diferentes por oito semanas, veja como funciona e, em seguida, escolha onde ele funcionar√°. .  Mas durante esse per√≠odo, seus horizontes se expandir√£o significativamente.  Ele ser√° guiado para onde est√°. <br><br>  N√≥s conversamos sobre coisas comuns.  Vamos agora ver como tudo parece mais pr√≥ximo do processo de desenvolvimento.  Digamos que temos uma biblioteca comum chamada Lego.  E queremos implementar algum novo recurso ou fazer algum tipo de revis√£o.  Corrigimos o c√≥digo e lan√ßamos a vers√£o. <br><br>  Precisamos publicar esta vers√£o no npm e, em seguida, ir para o reposit√≥rio de algum projeto em que a biblioteca √© usada e implementar esta vers√£o.  Provavelmente, isso corrigir√° algum n√∫mero no package.json, reinicie o assembly.  Talvez at√© gere novamente o bloqueio de pacotes, crie uma solicita√ß√£o pull, veja como os testes passam.  E o que vamos ver? <br><br><img src="https://habrastorage.org/webt/ri/ft/dz/riftdzizz3nhvcxu4ivi1gtnzxy.jpeg"><br><br>  Muito provavelmente, veremos que ocorreu um erro.  Porque √© muito dif√≠cil prever todas as maneiras de usar o componente em diferentes servi√ßos.  E se isso aconteceu, ent√£o qual √© a nossa sa√≠da?  Ent√£o percebemos que n√£o se encaixava.  Continuamos refazendo.  Retornamos ao reposit√≥rio com uma biblioteca compartilhada, corrigimos o bug, lan√ßamos a nova vers√£o, enviamos para o npm, implantamos, executamos os testes e o que √©?  Provavelmente, um bug acontecer√° novamente. <br><br>  E isso ainda √© bom quando o implementamos em um servi√ßo e, ali mesmo, tudo quebrou imediatamente.  Foi muito mais triste quando fizemos tudo isso, implementamos em dez servi√ßos diferentes.  Nada quebrou l√°.  J√° fomos preparar um smoothie, ou o que for necess√°rio.  No momento, a vers√£o est√° sendo apresentada no 11¬∫ projeto ou no 25¬∫.  E h√° um erro.  Retornamos ao longo de toda a cadeia, fazemos um patch e implementamos em todos os 20 servi√ßos anteriores.  Al√©m disso, esse patch pode explodir em um dos anteriores.  Bem e assim por diante.  Divirta-se. <br><br>  A √∫nica sa√≠da, ao que parece, √© que voc√™ s√≥ precisa escrever muito c√≥digo rapidamente.  Ent√£o, mais cedo ou mais tarde, se executarmos muito, muito r√°pido, provavelmente, conseguiremos tempo para lan√ßar na produ√ß√£o uma vers√£o na qual ainda n√£o h√° nenhum erro.  Mas ent√£o um novo recurso aparecer√° e nada nos salvar√°. <br><br>  Ok.  De fato, o esquema pode ser algo como o seguinte.  A automa√ß√£o nos ajudar√°.  √â sobre isso, em geral, toda a hist√≥ria, de fato.  Tivemos a ideia de que um reposit√≥rio com uma biblioteca comum pode ser constru√≠do de acordo com o esquema de mono-reposit√≥rio.  Voc√™ provavelmente j√° se deparou, agora existem muitos desses projetos, especialmente os de infraestrutura.  Todos os tipos de Babel, e coisas assim, vivem como mono-reposit√≥rios quando existem muitos pacotes npm diferentes.  Eles podem estar de alguma forma ligados um ao outro.  E eles s√£o gerenciados, por exemplo, atrav√©s do Lerna, para que seja conveniente publicar tudo isso, dadas as depend√™ncias. <br><br>  Exatamente de acordo com esse esquema, √© poss√≠vel organizar um projeto em que tudo em comum seja armazenado para toda a empresa.  Pode haver uma biblioteca envolvida em uma equipe separada.  E, inclusive, pode haver pacotes que cada servi√ßo individual desenvolve, mas que ele deseja compartilhar com os outros. <br><br><img src="https://habrastorage.org/webt/qb/tx/ck/qbtxckwz4xeknxszl3zkfftpkjo.jpeg"><br><br>  Ent√£o o circuito fica assim.  O come√ßo n√£o √© diferente.  De uma forma ou de outra, precisamos fazer altera√ß√µes no c√≥digo comum.  E ent√£o, com a ajuda da automa√ß√£o, de uma s√≥ vez, queremos executar testes n√£o apenas pr√≥ximos a esse c√≥digo, mas imediatamente em todos os projetos nos quais esse c√≥digo comum est√° incorporado.  E veja o resultado agregado. <br><br>  Ent√£o, mesmo que um bug ocorra l√°, ainda n√£o conseguimos lan√ßar nenhuma vers√£o, n√£o a publicamos em nenhuma NPM, n√£o a implementamos especificamente com nossas m√£os, n√£o fizemos todos esses esfor√ßos extras.  Vimos um bug, imediatamente o corrigimos localmente, executamos testes gerais novamente e tudo est√° em produ√ß√£o. <br><br><img src="https://habrastorage.org/webt/lo/8-/7d/lo8-7d5hg38lvxpsswq05l2vipm.jpeg"><br><br>  Como √© na pr√°tica?  Aqui est√° uma solicita√ß√£o de recebimento com uma corre√ß√£o.  Aqui voc√™ pode ver que a automa√ß√£o solicitou os revisores necess√°rios para verificar se tudo est√° bem no c√≥digo.  De fato, os revisores chegaram e concordaram que estava tudo bem.  E, neste momento, o desenvolvedor simplesmente escreve um comando especial / can√°rio, diretamente na solicita√ß√£o de recebimento. <br><br>  Um rob√¥ chega e diz - tudo bem, criei uma tarefa para o pr√≥ximo milagre.  O milagre √© que uma vers√£o can√°ria com essas mudan√ßas foi lan√ßada e foi implementada automaticamente em todos os reposit√≥rios em que esse componente √© usado.  Os autotestes foram lan√ßados l√°, como neste reposit√≥rio.  Aqui voc√™ pode ver que v√°rias verifica√ß√µes foram lan√ßadas. <br><br>  Por tr√°s de cada teste pode haver mais cem testes diferentes.  Mas √© importante que, al√©m dos testes locais que pud√©ssemos gravar separadamente no componente, tamb√©m lan√ß√°ssemos testes para cada projeto em que ele foi implementado.  Os testes de integra√ß√£o j√° foram lan√ßados l√°: verificamos que esse componente funciona normalmente no ambiente em que √© concebido no servi√ßo.  Isso j√° nos garante realmente que n√£o esquecemos nada, n√£o quebramos nada para ningu√©m.  Se tudo estiver bem aqui, podemos realmente lan√ßar uma vers√£o com seguran√ßa.  E se algo estiver ruim aqui, vamos consertar aqui. <br><br>  Parece que isso deve nos ajudar.  Se sua empresa tiver algo semelhante, voc√™ ver√° que h√° partes que voc√™ poderia potencialmente reutilizar, mas, por enquanto, √© necess√°rio reorganiz√°-las porque n√£o h√° automa√ß√£o. Recomendamos que voc√™ chegue a uma solu√ß√£o semelhante. <br><br><img src="https://habrastorage.org/webt/lu/vp/jp/luvpjp0a5tof1v56lwn7uq_nwiq.jpeg"><br><br>  O que conseguimos?  O monoreposit√≥rio geral no qual as linhas s√£o reconstru√≠das.  Ou seja, todo mundo escreve o c√≥digo da mesma maneira, ele tem todos os tipos de testes.  Qualquer equipe pode vir, colocar seu componente e test√°-lo com testes de unidade JS, cobrir com capturas de tela etc. Tudo j√° estar√° pronto para uso.  A revis√£o de c√≥digo inteligente que eu mencionei.  Gra√ßas √†s ferramentas internas ricas, √© realmente inteligente aqui. <br><br>  O desenvolvedor est√° de f√©rias agora?  Convoc√°-lo para uma solicita√ß√£o pull √© in√∫til; o sistema levar√° isso em considera√ß√£o.  O desenvolvedor est√° doente?  O sistema tamb√©m levar√° isso em considera√ß√£o.  Se ambas as condi√ß√µes n√£o forem cumpridas e o desenvolvedor parecer livre, ele receber√° uma notifica√ß√£o em um de seus mensageiros de sua escolha.  E ele √© assim: n√£o, agora estou ocupado com algo urgente ou em uma reuni√£o.  Ele pode chegar l√° e apenas escrever o comando / busy.  O sistema entender√° automaticamente que voc√™ precisa atribuir o pr√≥ximo da lista. <br><br>  O pr√≥ximo passo √© publicar a mesma vers√£o can√°ria.  Ou seja, com qualquer altera√ß√£o de c√≥digo, precisamos lan√ßar um pacote de servi√ßos que possamos verificar em diferentes servi√ßos.  Em seguida, precisamos executar testes ao implantar em todos esses servi√ßos.  E quando tudo aconteceu, lance os lan√ßamentos. <br><br>  Se uma altera√ß√£o afetar alguma est√°tica que deve ser carregada a partir da CDN, voc√™ precisar√° public√°-la automaticamente separadamente.     .    , ,  ,  ,  .     ,     , ,  changelog     - . <br><br>  ,       ,     ,        ,   .       ,   ,      . <br><br>   ,        .       . , ,  :          ,       ?  A resposta √© simples.         ,            .      .     , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460811/">https://habr.com/ru/post/pt460811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460799/index.html">Solicita√ß√£o de pagamento da API do navegador padr√£o</a></li>
<li><a href="../pt460801/index.html">27 ferramentas incr√≠veis do VS Code para desenvolvedores modernos de JavaScript</a></li>
<li><a href="../pt460803/index.html">Leitura para o ver√£o: livros para t√©cnicos</a></li>
<li><a href="../pt460805/index.html">Como transferir dados entre microcontroladores a 100 Mbps</a></li>
<li><a href="../pt460807/index.html">Me√ßa sete vezes, uma vez que implemente a ferramenta de BI</a></li>
<li><a href="../pt460813/index.html">Como usar os diagramas de Voronoi para controlar a IA</a></li>
<li><a href="../pt460815/index.html">Inventando a biblioteca vusb</a></li>
<li><a href="../pt460819/index.html">WorldSkills: Revis√£o do participante da Olimp√≠ada</a></li>
<li><a href="../pt460821/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel # 307 (15 a 21 de julho)</a></li>
<li><a href="../pt460823/index.html">Eventos digitais em Moscou, de 22 a 28 de julho</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>