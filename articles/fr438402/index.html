<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗿 👨🏿‍🚀 🏜️ Neutralinojs - qu'êtes-vous? Ou façon UNIX où vous n'avez pas attendu 👩🏽‍🤝‍👨🏻 🔄 🏂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Récemment, je suis tombé par hasard sur une simple note publicitaire, "Neutralinojs est une alternative à Electron qui consomme moins de mémoire", qui...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Neutralinojs - qu'êtes-vous? Ou façon UNIX où vous n'avez pas attendu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438402/"><p>  Récemment, je suis tombé par hasard sur une simple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">note publicitaire, "Neutralinojs est une alternative à Electron qui consomme moins de mémoire",</a> qui dit qu'il y a une chose aussi cool que Neutralinojs.  La note, comme il se doit, est très courte et ne contient aucune information utile, à l'exception du slogan publicitaire "Mieux que &lt;quelque chose de populaire&gt;!" </p><br><p>  Comprenant à peu près comment Electron et NW.js fonctionnent et ne trouvant absolument aucune mention du principe de fonctionnement de cette nouvelle et super cool "bête miracle" dans l'article, j'ai commencé la recherche. </p><br><p>  En fait je vous présente les résultats de ma micro-recherche! </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/6g/7z/se/6g7zserouh1jwnx-tk30di9mbou.png"></a> </p><br><p>  Comme je considère toute nouvelle technologie comme un outil possible, j'ai immédiatement posé plusieurs questions: </p><br><ul><li>  Pourquoi mange-t-il beaucoup de mémoire en moins? </li><li>  Quels autres petits pains donne-t-il? </li><li>  Pourquoi devrais-je utiliser ce miracle? </li></ul><br><h1 id="pochemu-ne-zhryom-pamyat">  Pourquoi ne mangeons-nous pas la mémoire? </h1><br><p> En fouillant dans le code source et deux images assez informatives sur l'architecture, j'ai réalisé que ce projet fonctionne précisément sur la voie UNIX très appréciée de tous les Linuxoids.  La philosophie du projet est simple: pourquoi trouver un nouveau vélo si vous pouvez en utiliser un tout prêt? </p><a name="habracut"></a><br><p>  Quels sont les inconvénients d'Electron: </p><br><ul><li>  Faire glisser Chrome </li><li>  Carrying Node.js </li><li>  Porter un calque avec vous pour que les deux précédents fonctionnent ensemble </li></ul><br><p>  Au lieu de cela, tout se fait comme ceci: </p><br><ul><li>  Nous <strong>ne</strong> traînons <strong>pas</strong> Chrome </li><li>  Nous <strong>ne</strong> faisons <strong>pas</strong> glisser Node.js </li><li>  Nous ne faisons glisser qu'une couche entre <em>un</em> navigateur et <em>un</em> système d'exploitation </li></ul><br><p>  Voyons comment exactement cela est mis en œuvre. </p><br><h2 id="arhitektura">  L'architecture </h2><br><p><img src="https://habrastorage.org/webt/m7/eu/b1/m7eub1eezyf_o_3jio79jibwgfo.png"></p><br><p>  L'ensemble du projet se compose de 2 parties: serveur et client. </p><br><p>  <strong>Le serveur</strong> démarre immédiatement et est un véritable partisan à l'arrière du système d'exploitation.  Il sait comment stocker des données, ouvrir des fichiers, écrire dans des fichiers, exécuter <del>  crypteurs </del>  commandes shell.  En fait, il fait tout ce qui peut être nécessaire, fournit une API pour le système d'exploitation et communique via HTTP avec le <em>client</em> .  Il donne également au client tout ce qu'il doit afficher à l'écran.  Fonctionnalité assez standard pour le serveur. </p><br><p>  Pour chaque système d'exploitation, son serveur C ++ a été bifurqué et modifié avec un fichier.  Sous Mac, ils n'ont pas encore trouvé quelque chose à bifurquer, il n'y a donc pas de support. </p><br><p>  <strong>Il</strong> peut <strong>y</strong> avoir 3 types de <strong>clients</strong> : </p><br><ul><li> <code>cloud</code> - Tout programme qui connaît le port sur lequel le serveur s'exécute peut exécuter des commandes </li><li>  <code>browser</code> - Le serveur lui-même démarre le processus d'un navigateur système standard avec l'URL souhaitée.  Ici, le serveur nécessite déjà un TOKEN spécial, qui s'insère lui-même dans les pages HTML fournies. </li><li>  <code>window</code> - Le serveur démarre un processus de rendu spécial qui affiche simplement le système WebView.  Ici, vous avez également besoin d'un jeton </li></ul><br><p>  Il convient de noter que le serveur peut fonctionner simultanément avec un seul type de client et vous devez spécifier le type de client dans la configuration à l'aide du champ <code>mode</code> . </p><br><p>  Comme vous pouvez le voir, rien de plus.  L'application sur ce "framework" lui-même se compose de codes sources, qui sont reçus par le client comme statiques, et le serveur lui-même, qui peut définir le navigateur ou WebView sur l'URL nécessaire.  Voilà ce que signifie vrai DRY! </p><br><h1 id="kakie-plyushki">  Quel genre de petits pains? </h1><br><p>  Des petits pains, bien sûr, moins de consommation de mémoire.  Étant donné que ni Node.js ni Chrome n'emportent avec lui-même, les données fournies au client sont très petites en volume.  De plus, les développeurs insistent sur le fait que vous n'avez pas besoin de télécharger de constructeurs étranges, vous n'avez pas besoin de perdre du temps à compiler et tout ça. </p><br><p>  En fait des pros, c'est tout, passons maintenant aux inconvénients. </p><br><blockquote>  Je veux faire une réservation tout de suite que le projet est très jeune, vit un peu plus de 5 mois, mais il porte déjà fièrement la version 1.1.0, donc je pense que j'ai le droit d'évaluer le produit comme prêt à l'emploi et de le présenter avec les mêmes exigences que ses concurrents. </blockquote><br><h2 id="bolyachki-nwjs">  Sores NW.js </h2><br><p>  Ici, nous avons immédiatement un éventail de problèmes qui ont migré en douceur de NW.js. </p><br><p>  La première et la plus notable chose pour l'utilisateur est la livraison de l'application.  Pour que le client lance notre programme sur son ordinateur, il doit avoir 2 choses principales: <code>neutralino.exe</code> et l' <code>app/</code> dossier.  Dans le dossier, tous les paramètres sont stockés (tels que le mode de fonctionnement du serveur et le titre de la fenêtre) et en fait <code>index.html</code> , qui est donné au client.  Le moyen le plus simple est de donner à l'utilisateur une archive zip et de dire sur quel programme pousser, mais les utilisateurs trouveront toujours quoi faire différemment des instructions et quoi casser. </p><br><p>  Pour résoudre ce problème, NW a créé un constructeur qui a pu tout emballer dans exe, ainsi que ICO et les archives.  Les archives SFX étaient une solution moins évidente, mais les antivirus les regardent de travers, donc ce n'est pas non plus une bonne option.  Les développeurs eux-mêmes envisagent de créer leur propre packer, mais jusqu'à présent, il n'y a que des rumeurs à ce sujet. </p><br><p>  Le deuxième problème est le point d'entrée.  C'est toujours <code>index.html</code> .  Vous ne pouvez rien y faire et même spécifier un fichier différent.  Tous les scripts dont l'application a besoin doivent être chargés dans ce <code>index.html</code> .  Le problème n'est pas très important, mais il réduit parfois la flexibilité du système. </p><br><h2 id="kakoy-to-brauzer">  <em>Une sorte de</em> navigateur </h2><br><p>  C'est encore pire que NW.js ou Electron.  Si dans ce dernier, nous savons avec certitude la version du navigateur que notre application affichera, alors ici, en principe, nous ne pouvons pas être sûrs que le système d'exploitation nous fournira une WebView qui peut fonctionner avec JS.  Autrement dit, nous revenons à des zéros fringants et sommes intelligents de toutes les manières possibles pour entrer dans le très IE 8, qui sera la WebView standard sur Windows. </p><br><p>  Cela limite notre application en termes d'affichage et de lecture de certains types de fichiers multimédias, et c'est la fonction principale des applications développées sur le principe du "Web for Desktop". </p><br><h2 id="api">  API </h2><br><p>  Comme les auteurs s'efforcent de minimiser, l'API fournie par le serveur ne diffère pas dans une variété de méthodes.  Je dirais même que ce n'est pas pensé.  Toute cette indiscrétion est décrite dans la même <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">maigre documentation</a> . </p><br><p>  Le seul qui peut communiquer avec le système est le serveur Neutralino, alors nous devons en quelque sorte communiquer avec lui.  Canal de communication à sens unique - HTTP.  En fait, tout ce que nous sommes autorisés à utiliser dans JS est simplement enroulé autour du serveur API REST. </p><br><p>  L'API entière peut être divisée en 3 parties: travailler avec le <em>stockage</em> , travailler très basique avec FS (lire, supprimer et créer seulement - sans fioritures) et appeler les fenêtres et commandes du système. </p><br><p>  Passons maintenant en revue la conception même de l'API, accessible depuis JS. </p><br><p>  Commençons par les rappels.  Étant donné que nous avons <em>une sorte de</em> navigateur, nous ne pourrons pas utiliser à la fois ES5 et, par conséquent, Promise.  Et comme les développeurs de Node.js ne peuvent pas le supporter, ils ne veulent pas non plus utiliser de rappels de type Node.  Par conséquent, chaque méthode a 2 rappels: un pour le <em>résultat</em> et un autre pour la gestion des erreurs, dont le format, soit dit en passant, n'est pas connu. </p><br><p>  Au détriment des résultats: pour la plupart des commandes, par exemple, en travaillant avec OS, un objet avec un champ <code>stdout</code> , à l'intérieur duquel se trouve une chaîne, est transféré vers le rappel.  Comme vous l'avez déjà compris, la lecture de fichiers volumineux et plus encore leur traitement dans certains objets de type tampon échouera.  Les fenêtres système ont le résultat dans un format différent, un objet avec le champ de <code>file</code> est utilisé.  La question "pourquoi, en principe, des objets avec un seul champ sont nécessaires" reste sans réponse. </p><br><p>  Passons maintenant au stockage.  Il contient des entités telles que les compartiments qui sont enregistrées en tant que fichiers JSON à côté de la source d'application.  Dans le même temps, pour écrire des données dans un bucket, nous devons passer un objet avec le nom bucket et son nouveau contenu.  Pour obtenir les données, nous transmettons uniquement la chaîne - le nom du compartiment.  Il n'y a aucune trace de similitude avec l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interface de stockage standard</a> , pourquoi, faites votre vélo ... </p><br><p>  Eh bien, parlons un peu de l'intégration avec le système d'exploitation.  Rappelons qu'Electron et même NW ont offert la possibilité de créer leur menu contextuel, ont permis de masquer la fenêtre et même de créer une icône dans le bac.  Ce n'est tout simplement pas là.  Et, compte tenu de l'architecture de la solution, elle ne le sera jamais.  Seul navigateur et seule API REST, uniquement hardcore. </p><br><h1 id="dlya-chego-mozhno-ispolzovat">  Que puis-je utiliser? </h1><br><p>  Pendant longtemps, j'ai pensé que si vous avez juste besoin de transférer le formulaire d'inscription du site vers l'application de bureau, vous pouvez utiliser NW.js et ne pas prendre de bain de vapeur.  Si vous avez besoin de quelque chose de plus compliqué, quelque chose qui nécessite une intégration graphique avec le système, alors c'est Electron.  Oui, chacun a ses propres inconvénients, mais ce sont au moins quelques produits sur lesquels vous pouvez faire votre propre application. </p><br><p>  Mais Netralinojs peut également être utilisé.  Par exemple, certains chats fonctionneront plutôt bien, seul CORS devra être configuré sur le serveur.  Un petit générateur de configuration de texte graphique serait plutôt bon.  Pour moi, je vois ce cadre uniquement comme une plate-forme pour les petits utilitaires avec une interface graphique qui devra être lancée pas souvent et pas longtemps.  Je pense que vous aussi, vous pouvez vous souvenir de votre activité professionnelle d'au moins un petit produit qui pourrait fonctionner sur une plateforme aussi minimaliste. </p><br><h1 id="vyvod">  Conclusion </h1><br><p>  Le cadre est en fait très, très grossier.  Son minimalisme peut être son point fort, mais dès que des fonctionnalités qui dépassent le cadre de l'API sont nécessaires, vous devrez passer à Electron ou NW.js. </p><br><p>  J'espère vraiment que la v1.1.0 n'est pas la dernière et que les développeurs vont refaire de nombreux défauts dans la conception de leur API et offrir des options plus flexibles pour personnaliser et se comporter avec l'application.  J'espère également qu'ils trouveront toujours un serveur statique sur les pros qui pourrait être bifurqué et utilisé sur un Mac. </p><br><p>  Eh bien, les références, pour être plus clair: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://neutralino.js.org/</a> - Site du projet </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://neutralino.js.org/docs/</a> - Documentation de l'API JS </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/neutralinojs/neutralinojs</a> - Dépôt sur GitHub </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/neutralinojs/evaluation</a> - Comparaison de Hello World avec les concurrents des développeurs </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Neutralinojs 2019 - Feuille de route</a> - Plan d'amélioration officiel </li></ul><br><p>  UPD: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://habr.com/ru/post/443572/</a> - Lien vers l'article du développeur sur Habr </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438402/">https://habr.com/ru/post/fr438402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438392/index.html">Une brève histoire d'une «bande intelligente»</a></li>
<li><a href="../fr438394/index.html">Yii 2.0.16</a></li>
<li><a href="../fr438396/index.html">Pourquoi vous devriez penser à la programmation fonctionnelle</a></li>
<li><a href="../fr438398/index.html">Lancement de Keras en C ++</a></li>
<li><a href="../fr438400/index.html">Des scientifiques israéliens ont développé un traitement universel contre le cancer</a></li>
<li><a href="../fr438404/index.html">Prix ​​de composition dans le monde javascript</a></li>
<li><a href="../fr438406/index.html">ReactJS + MobX - Expérience DI</a></li>
<li><a href="../fr438408/index.html">Clouds et pays: caractéristiques nationales du marché du cloud</a></li>
<li><a href="../fr438412/index.html">Analyse des tâches de test 112654 et des tendances sur le marché du travail des programmeurs en 2019</a></li>
<li><a href="../fr438414/index.html">Civilisation printanière, 3/5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>