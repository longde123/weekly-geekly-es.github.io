<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèΩ üëÉüèΩ üë©‚Äçüë¶‚Äçüë¶ 12 choses √©tranges qui peuvent arriver apr√®s l'installation du paquet npm „ÄΩÔ∏è üéÖüèº ü§ì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a quelques mois, j'ai lanc√© un projet appel√© malveillants-packages (alias "malveillants packages"). Il surveille les mises √† jour dans le r√©f√©ren...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>12 choses √©tranges qui peuvent arriver apr√®s l'installation du paquet npm</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436132/"><p> Il y a quelques mois, j'ai lanc√© un projet appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">malveillants-packages</a> (alias "malveillants packages").  Il surveille les mises √† jour dans le r√©f√©rentiel npm, t√©l√©charge tous les nouveaux modules, puis les v√©rifie pour les poux - il recherche l'activit√© r√©seau, les op√©rations suspectes avec le syst√®me de fichiers, etc.  M√™me les petits projets sur node.js ont souvent une grande arborescence de d√©pendances, et les d√©veloppeurs n'ont physiquement aucun moyen de les tester tous.  Cela donne aux attaquants une √©norme marge de man≈ìuvre, et la question se pose - combien de registre d√©sagr√©able se cache dans les coins sombres du registre npm?  180 000 colis v√©rifi√©s plus tard, j'ai obtenu une r√©ponse approximative. </p><br><p><img src="https://habrastorage.org/webt/bg/9_/qs/bg9_qs2qlravq3d4l6qdi1inr0m.png" alt="image"></p><a name="habracut"></a><br><p>  Et cette r√©ponse - peut-√™tre pas tant que √ßa. <br>  <em>[note: sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">support</a> il y a une version anglaise de cet article, √©galement par ma paternit√©]</em> </p><br><h2 id="chto-npm-paket-mozhet-sdelat-c-vashey-sistemoy">  Que peut faire un package npm avec votre syst√®me? </h2><br><p>  Le package a deux principaux moyens de vous nuire - lors de l'installation / d√©sinstallation et au moment du lancement de votre application.  Examinons les deux options avec des exemples. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les scripts NPM</a> permettent aux packages d'ex√©cuter des commandes arbitraires au moment de l'installation et de la d√©sinstallation.  Il s'agit notamment de la <code>preinstall</code> , de l' <code>install</code> , de la <code>postinstall</code> , de la <code>preuninstall</code> et de la <code>postuninstall</code> , qui sont ex√©cut√©es automatiquement par npm au moment appropri√© du cycle de vie du package.  Que peuvent-ils faire?  Tout est la m√™me chose que votre utilisateur actuel peut faire - par exemple, supprimer toutes vos photos des derni√®res vacances ou fusionner l'historique de votre navigateur dans le FBI (bien que, tr√®s probablement, il l'ait d√©j√†).  Ce comportement peut √™tre d√©sactiv√© en passant l' <code>--ignore-scripts</code> , mais, premi√®rement, personne ne le fait, et deuxi√®mement, de cette fa√ßon, vous pouvez casser un tas de paquets assez fiables.  C'est gr√¢ce √† des scripts que l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">attaque sensationnelle contre ESLint a</a> √©t√© men√©e, ce qui a affect√© les utilisateurs d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">eslint-scope</a> (6 millions d'installations par semaine) et d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">eslint-config-eslint</a> (2 000 installations par semaine). </p><br><p>  Le package obtient une deuxi√®me chance de compliquer votre vie lors de l'initialisation (se produit g√©n√©ralement lors du premier appel √† <code>require</code> ).  Il a maintenant la possibilit√© de modifier des variables globales et d'autres packages, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour voler la cl√© priv√©e</a> de votre portefeuille bitcoin, ou pour rendre la m√©thode <code>crypto.randomBytes</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas si al√©atoire</a> . </p><br><p><img src="https://habrastorage.org/storage2/930/571/c14/930571c142e5a454827cca64cd0855be.png" alt="image"></p><br><h2 id="skolko-vredonosnyh-paketov-bylo-obnaruzheno">  Combien de packages malveillants ont √©t√© d√©tect√©s? </h2><br><p>  Eh bien, la liste ne peut pas √™tre qualifi√©e d'impressionnante, au total, 3 packages ont √©t√© trouv√©s qui ont √©t√© supprim√©s du r√©f√©rentiel npm par les efforts de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©quipe de s√©curit√© npm</a> .  Passons en revue: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commander-js</a> essaie de se d√©guiser en v√©ritable <code>commander.js</code> (qui est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.npmjs.com/package/commander</a> ), mais contient un d√©tail inhabituel, √† savoir un script de <code>postinstall</code> - <code>postinstall</code> qui t√©l√©charge et ex√©cute le contenu de <a href="">http://23.94.46.191/ update.json</a> (au moment de la publication ne contient rien de criminel).  Avis de s√©curit√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.npmjs.com/advisories/763</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rrgod, √†</a> travers tous les m√™mes scripts, t√©l√©charge et ex√©cute le script depuis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://static.ricterz.me</a> , qui, √† son tour, essaie de charger un autre script qui n'est pas disponible actuellement.  Avis de s√©curit√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.npmjs.com/advisories/764</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">portionfatty12</a> ne peut pas √™tre qualifi√© de compl√®tement malveillant, mais la fa√ßon dont l'auteur recueille des statistiques sur les param√®tres de son id√©e est tr√®s douteuse - il s'agit d'envoyer votre cl√© publique ssh ( <code>~/.ssh/id_rsa.pub</code> ) √† un serveur qui n'est actuellement pas disponible.  Avis de s√©curit√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.npmjs.com/advisories/765</a> . </li></ul><br><p>  Malgr√© les r√©sultats tr√®s modestes, en train d'analyser tous les paquets suspects (et j'ai regard√© plus de 3000 rapports pour trouver ces trois perles), beaucoup de choses dr√¥les et pas tr√®s nombreuses ont √©t√© trouv√©es auxquelles vous ne pensez g√©n√©ralement pas (ou essayez soigneusement de ne pas penser) en tapant <code>npm install</code> .  Imaginons donc que vous s√©lectionniez accidentellement l'un des nombreux packages du r√©f√©rentiel et que vous l'installiez.  Qu'est-ce qui pourrait mal tourner? </p><br><p>  <strong>1. Un package peut remplacer les m√©thodes des autres packages (y compris celles de la livraison standard de Node.js)</strong> </p><br><p>  Cependant, si vous lisez quelques paragraphes pr√©c√©dents ou si vous travaillez avec l'√©cosyst√®me javascript depuis plus d'une semaine, il est peu probable que ce soit une nouvelle pour vous.  Mais l'ampleur de cette catastrophe pourrait bien vous √©chapper.  Donc, si votre projet a au moins quelques d√©pendances, alors probablement la m√©thode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fs.closeSync que</a> vous avez d√©j√† substitu√©e (et peut-√™tre plus d'une fois).  Un grand nombre de packages modifient l'API de quelqu'un d'autre, mais seuls quelques-uns ont au moins une bonne raison √† cela.  Parmi les ¬´champions¬ª, on trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">graceful-fs</a> avec 12 millions d'installations par semaine, ce qui <a href="">red√©finit des dizaines de m√©thodes √† partir de fs</a> .  Il convient √©galement de noter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">async-listener</a> , qui remplace <a href="">46 m√©thodes diff√©rentes</a> , y compris le malheureux <code>crypto.randomBytes</code> , qui m'a un peu d√©rang√© lorsque j'ai d√©couvert cela pour la premi√®re fois. </p><br><p>  Imaginez √† quoi cela ressemblerait pour un bogue provoqu√© par un tel remplacement d'une certaine d√©pendance dans les profondeurs de la hi√©rarchie.  Cependant, il n'y a aucune raison de s'inqui√©ter, car ... </p><br><p>  <strong>2. Le package peut d√©terminer l'API modifi√©e pour y apporter des corrections suppl√©mentaires</strong> </p><br><p><img src="https://habrastorage.org/webt/aq/vf/vl/aqvfvlvne6ysfueydftxaubwnlg.png" alt="image"></p><br><p>  Oui, certains packages le font (le plus souvent en ce qui concerne les m√™mes <code>graceful-fs</code> ) en utilisant les merveilles de l'acrobatie comme <code>/graceful-fs/.test(fs.closeSync.toString())</code> .  Donc, si vous rencontrez soudainement des probl√®mes incompr√©hensibles dans la biblioth√®que standard, essayez simplement d'installer quelques packages npm al√©atoires.  Ou √©teignez simplement l'ordinateur et promenez-vous dans le parc le plus proche, la vie est trop courte pour comprendre tout cela. </p><br><p>  <strong>3. Il peut envoyer des analyses</strong> </p><br><p>  Adblock ne vous prot√©gera pas si des choses se produisent dans la console, et les auteurs de certains packages l'utilisent avec succ√®s.  Certains envoient les informations les plus √©l√©mentaires, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ecdsa-csr</a> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://api.therootcompany.com/api/therootcompany.com/public/ping { "package":"ecdsa-csr", "version":"1.1.1", "node":"v10.14.2", "arch":"x64", "platform":"linux", "release":"4.9.125-linuxkit", "action":"install", "ppid":"eDSeYr9XUNRi9WhWli5smBNAvdw=" }</span></span></code> </pre> <br><p>  Certains ne sont pas si timides.  Ici, par exemple, fait partie du rapport <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sans serveur</a> (l'original est 2 fois plus grand): </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// POST https://tracking.serverlessteam.com/v1/track { "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "event":"framework_stat", "properties":{ "version":2, "general":{ "userId":"0e32cba0-14ef-11e9-9f89-b7ed4ca5dbba", "context":"install", "timestamp":1547135257977, "timezone":"GMT+0000", "operatingSystem":"linux", "userAgent":"cli", "serverlessVersion":"1.35.1", "nodeJsVersion":"v10.14.2", "isDockerContainer":true, "isCISystem":false, "ciSystem":null } } }</span></span></code> </pre> <br><p>  Heureusement, <code>jquery</code> n'envoie aucune statistique, vous pouvez donc l'installer secr√®tement de tout le monde.  Pour le moment. </p><br><p>  <strong>4. Votre ordinateur peut √™tre utilis√© √† la place d'un serveur CI / CD</strong> </p><br><p>  Pourquoi voudriez-vous compiler votre package si <a href="">vos utilisateurs</a> peuvent le faire <a href="">pendant l'installation</a> ?  Vous pouvez obtenir un r√©sultat suppl√©mentaire si vous sp√©cifiez uniquement la version principale du compilateur requis, par exemple <code>typescript@3</code> .  Un espoir pour les gars lettr√©s de Microsoft qui savent faire le bon semver. </p><br><p>  Est-il possible d'aller encore plus loin?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bien s√ªr</a> ! </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint --ext .js,.vue --fix src"</span></span></code> </pre> <br><p>  Maintenant, vous pouvez dormir paisiblement - tous les utilisateurs recevront des sources parfaitement format√©es pour votre package. </p><br><p>  <strong>5. Il peut essayer de vous faire peur.</strong> </p><br><p><img src="https://habrastorage.org/webt/vg/h7/uf/vgh7uf8gcfpc3c1cxhukl5ax3fo.png" alt="image"></p><br><p>  Si vous avez regard√© toutes les s√©ries Mr.  Robot, mais toujours pas suffisamment motiv√© pour lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les r√©seaux informatiques</a> et faire quelque chose de vraiment impressionnant, c'est-√†-dire une solution simple - montrez vos comp√©tences au monde entier √† travers quelques lignes dans un script de <code>postinstall</code> - <code>postinstall</code> .  C'est exactement ce que l'auteur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pizza-pasta a</a> fait (et en m√™me temps m'a pr√©sent√© KDPV). </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"pizza-pasta"</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Zeavo"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"install"</span></span>: <span class="hljs-string"><span class="hljs-string">"mkdir -p ~/Desktop/hacked &amp;&amp; touch ~/Desktop/hacked/pwnddddd &amp;&amp; wget https://imgur.com/download/KTDNt5I -P ~/Desktop/hacked/"</span></span>, <span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"find ~/.ssh | xargs cat || true &amp;&amp; printf '\n\n\n\n\n\nOH HEY LOOK SSH KEYS\n\n\n\nHappy Birthday! Youve been h4ck0red\n\n\n'"</span></span> } }</code> </pre> <br><p>  <strong>6. Le package peut charger et ex√©cuter des scripts bash</strong> </p><br><p>  Avez-vous entendu dire que <code>curl|bash</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas une bonne id√©e</a> ?  Sinon, vous pourriez bien √™tre un employ√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ORESoftware</a> qui a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tout</a> un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tas de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">packages</a> avec des lignes similaires dans un script de <code>postinstall</code> - <code>postinstall</code> : </p><br><pre> <code class="bash hljs">curl --silent -o- https://raw.githubusercontent.com/oresoftware/realpath/master/assets/install.sh | bash</code> </pre> <br><p>  Jusqu'√† pr√©sent, il n'y a rien de criminel dans ce script ... Pour l'instant.  J'esp√®re que tous ceux qui ont acc√®s au <code>master</code> en <code>oresoftware/realpath</code> sont des gens extr√™mement honn√™tes et d√©cents. </p><br><p>  <strong>7. Un mot de passe peut vous √™tre demand√©</strong> </p><br><p>  L'auteur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">magicleap a</a> trouv√© une fa√ßon plut√¥t inhabituelle de distribuer un paquet priv√© via un r√©f√©rentiel public.  Son projet consiste en une archive chiffr√©e et des utilitaires pour le d√©chiffrer - mais seulement si vous mettez la bonne cl√© dans la <code>MAGICLEAP</code> environnement <code>MAGICLEAP</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/modulesio/magicleap/blob/master/decrypt.js var key = process.env['MAGICLEAP']; console.warn('Decrypting magicleap module with MAGICLEAP environment variable'); const ws = fs.createReadStream(path.join(__dirname, 'lib.zip.enc')) .pipe(crypto.createDecipher('aes-256-cbc', Buffer.from(key, 'base64'))) .pipe(fs.createWriteStream(path.join(__dirname, 'lib.zip')));</span></span></code> </pre> <br><p>  <strong>8. Le paquet peut se patcher pendant l'installation</strong> </p><br><p>  L'auteur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fake-template</a> n'a pas le temps de s√©parer les tests du code imm√©diat, d'autant plus que c'est facile √† faire en ajoutant un commentaire sp√©cial √† la fin des lignes de test: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// : https://github.com/framp/fake-template/blob/master/index.js const template = (string, tag=defaultTag) =&gt; { if (mode !== 'literal') throw new Error('Invalid template') return (context={}) =&gt; tag(literals, ...expressions.map(evalInContext(context))) } assert.equal(template('')(), ``) // TEST assert.equal(template('abc')(), `abc`) // TEST const dog = 'Orlando' // TEST assert.equal(template('abc ${dog} lol ${cat}')({dog}), `abc ${dog} lol ${cat}`) // TEST</span></span></code> </pre> <br><p>  Et puis supprimez-les via <code>sed</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"sed -i '/\\/\\/ TEST/d' index.js"</span></span></code> </pre> <br><p>  Simple et √©l√©gant! </p><br><p>  <strong>9. Le package peut modifier les param√®tres <code>npm</code></strong> </p><br><p>  √Ä mon humble avis, <code>package-json.lock</code> est une grande chose qui peut sauver de tout un tas de probl√®mes caus√©s par la n√©gligence des autres d√©veloppeurs.  Cependant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">certains opposants √†</a> cette id√©e ont de tr√®s bons arguments contre: </p><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"preinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm config set package-lock false"</span></span></code> </pre> <br><p>  <strong>10. Il peut changer l'arri√®re-plan de votre bureau sur une photo de Nicolas Cage</strong> </p><br><p><img src="https://habrastorage.org/webt/sk/od/kv/skodkvowalhyrenoiqlg8fradu4.jpeg" alt="image"></p><br><p>  Voici un lien, juste au cas o√π - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://www.npmjs.com/package/cage-js</a> .  Peut-√™tre valait-il la peine d'enregistrer ce package comme malveillant. </p><br><p>  <strong>11. Le colis peut vous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rouler</a></strong> </p><br><p>  C'est ce que fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ember-data-react</a> , en ouvrant la c√©l√®bre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o</a> pendant l'installation.  Malheureusement, il ne sera pas possible de transf√©rer des donn√©es d'Ember vers React avec son aide - il n'y a pas une seule ligne de code javascript en elle. </p><br><p>  <strong>12. Il se peut qu'il ne s'installe tout simplement pas.</strong> </p><br><p><img src="https://habrastorage.org/webt/wc/ac/nd/wcacndpogbokwtmi_gpywrmxwmw.png" alt="image"><br>  D√©pendances inexistantes, versions incorrectement sp√©cifi√©es, r√©f√©rentiels priv√©s tomb√©s dans l'oubli - vous ne pouvez pas installer environ 0,6% de tous les packages du r√©f√©rentiel npm. </p><br><h2 id="vmesto-zaklyucheniya">  Au lieu d'une conclusion </h2><br><p>  Les packages NPM peuvent faire des choses √©tranges avec votre syst√®me, et vous n'avez pas beaucoup d'options pour vous prot√©ger contre cela.  Utilisez <code>package-lock.json</code> pour √©viter les mises √† jour soudaines (et assurez-vous que personne ne le d√©connecte √† votre insu), configurez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CSP</a> sur le frontend afin que la porte d√©rob√©e du module tiers ne puisse pas au moins fusionner les donn√©es avec son auteur.  Et sauvegardez vos photos, au cas o√π. </p><br><p>  Si vous sentez que vous avez suffisamment de force pour vous immerger dans le monde merveilleux des packages npm - vous pouvez trouver toutes les sources ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/malicious-packages/core</a> .  L'utilitaire est plein de hacks et de solutions non optimales, mais il fait face √† sa t√¢che.  Il y a √©galement un vidage MongoDB dans le r√©f√©rentiel avec les r√©sultats d'analyse de plus de 180 000 packages, surtout, n'oubliez pas d'ajouter le filtre <code>{'reports.status': 'unverified'}</code> .  Je ne pr√©vois plus de d√©velopper ce projet par manque de temps, mais je vais essayer de r√©pondre √† toutes les questions et probl√®mes, le cas √©ch√©ant. </p><br><p>  Prenez soin de vous et de vos applications! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436132/">https://habr.com/ru/post/fr436132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436122/index.html">Intel Lakefield: processeur hybride Atom + Core en 3D</a></li>
<li><a href="../fr436124/index.html">Nous lisons les commentaires sur Habr√© avec commodit√©s</a></li>
<li><a href="../fr436126/index.html">Kubernetes: cr√©ation d'images Docker dans un cluster</a></li>
<li><a href="../fr436128/index.html">Entretien avec le chasseur de bagages Artyom Moscou. Il a pirat√© Steam et a re√ßu le plus grand prix de l'histoire de Valve.</a></li>
<li><a href="../fr436130/index.html">Le projet du minist√®re des t√©l√©communications et des communications de masse sur le transfert du trafic Internet via les stations russes complique la l√©galisation de OneWeb en Russie</a></li>
<li><a href="../fr436134/index.html">Jusqu'√† 20% de droits de barrage seront impos√©s sur les routeurs d'importation</a></li>
<li><a href="../fr436136/index.html">OceanLotus: attaque d'un point d'eau en Asie du Sud-Est</a></li>
<li><a href="../fr436140/index.html">¬´Sous le capot¬ª du stockage Huawei: les technologies propri√©taires et ce que les autres n'ont pas</a></li>
<li><a href="../fr436144/index.html">Patrons suceurs de sang dans le contexte d'une bioc√©nose: pourquoi une √©quipe autonome se d√©sagr√®ge si elle n'est pas centralis√©e</a></li>
<li><a href="../fr436148/index.html">L'histoire d'un junior - comment commencer √† travailler et ne pas avoir peur de tout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>