<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵🏻 👰🏼 💃🏾 麻省理工学院的课程“计算机系统安全”。 讲座9：“ Web应用程序安全性”，第2部分 👩🏼‍🤝‍👩🏻 👀 ⛰️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="麻省理工学院。 讲座课程＃6.858。 “计算机系统的安全性。” Nikolai Zeldovich，James Mickens。 2014年 
 计算机系统安全是一门有关开发和实施安全计算机系统的课程。 讲座涵盖了威胁模型，危害安全性的攻击以及基于最新科学研究的安全技术。 主题包括操作系统（OS）...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>麻省理工学院的课程“计算机系统安全”。 讲座9：“ Web应用程序安全性”，第2部分</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424295/"><h3> 麻省理工学院。 讲座课程＃6.858。  “计算机系统的安全性。”  Nikolai Zeldovich，James Mickens。  2014年 </h3><br> 计算机系统安全是一门有关开发和实施安全计算机系统的课程。 讲座涵盖了威胁模型，危害安全性的攻击以及基于最新科学研究的安全技术。 主题包括操作系统（OS）安全性，功能，信息流管理，语言安全性，网络协议，硬件安全性和Web应用程序安全性。 <br><br> 第1课：“简介：威胁模型” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 第2课：“控制黑客攻击”， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 第3讲：“缓冲区溢出：漏洞利用和保护” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 讲座4：“特权分离”， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 讲座5：“安全系统从何而来？” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2部分</a> <br> 讲座6：“机会” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 讲座7：“本地客户端沙箱” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 讲座8：“网络安全模型” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <br> 讲座9：“ Web应用程序安全性” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第1</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第2</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">部分</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第3部分</a> <a name="habracut"></a><br><br> 例如，Django将使用这些尖括号，将它们转换为HTML格式，然后重做其余字符。 也就是说，如果自定义名称值包含尖括号，双引号等，则将排除所有这些字符。 这将使内容不会在客户端浏览器端解释为HTML代码。 <br><br><img src="https://habrastorage.org/webt/bg/sq/ed/bgsqedpvcmvdbjwjps3a84ok0ow.jpeg"><br><br> 因此，现在我们知道，对于某些跨站点脚本攻击，这并不是一个非常可靠的防御措施。 如我们在示例中所示，其原因是这些HTML，CSS和JavaScript语法非常复杂，以至于很容易混淆浏览器解析器。 <br><br> 例如，我们在Django框架内完成了一件非常普通的事情。 因此，您有一些div函数，我们想为其设置一个动态类。 我们为该类赋予var的值，依此类推。 这个想法是，当Django处理此样式时，他需要弄清楚当前样式是什么，然后将其粘贴到此处。 <br><br> 在这种情况下，攻击者可以创建一个定义此类的字符串，例如，写入“ class 1”。 至此一切顺利，因为它似乎是一个有效的CSS表达式。 <br><br> 但是随后，攻击者将onclick运算符放在此处，该运算符等于进行系统调用的JavaScript代码。 <br><br><img src="https://habrastorage.org/webt/xx/ix/6z/xxix6zb30_tylvsmsbrynpucipc.jpeg"><br><br> 由于这是错误的，因此浏览器应仅在此处停止。 但是问题是，如果您曾经看过真实网页的HTML，那么即使对于合法的“友好”网站，一切都将变得混乱和混乱。 因此，如果浏览器在每个错误的HTML表达式之前停止运行，那么您喜欢的单个站点将永远无法正常工作。 如果您想让世界感到失望，而我又没有提供足够的帮助，请在查看该网站时打开浏览器中的JavaScript控制台，以查看会给您带来多少错误。 <br><br> 例如，您可以转到CNN，然后看看有多少错误。 是的，CNN基本上可以运行，但效果不平衡。 例如，要打开Acrobat Reader，您经常需要引发空指针异常，同时，您会被生活蒙蔽。 但是在互联网上，我们已经学会了接受这一点而没有太多的愤慨。 <br> 因此，由于浏览器应该非常容忍这种情况，因此它们将尝试将恶意代码转换为对他们而言似乎合理的东西。 那就是安全漏洞。 <br><br> 这就是内容消毒的工作方式，但总比没有好。 她可以抓到很多有害的东西，但不能保护自己免受一切伤害。 <br><br> 还有另一件事要考虑-使用表达较少的标记语言。 让我们看看这是什么意思。 <br><br>  <b>受众：</b>如果无法进行内容清理，该怎么办？ <br><br>  <b>教授：</b>是的，这是可能的，例如，在这种情况下，Django将无法静态确定其是否有害。 例如，在这种特定情况下。 但是在我插入恶意图片标签的情况下... <br><br>  <b>听众：</b>在这种情况下，我希望班级的作业用引号引起来，在这种情况下应该没有任何效果... <br><br>  <b>教授：</b>嗯，你知道，有一些小技巧。 假设对HTML和CSS的语法进行了仔细的定义，您可以想象一个理想的解析器可以以某种方式捕获这些问题或以某种方式将其转换为正常事物的世界。 但是实际上，HTML语法和CSS语法存在不准确之处。 另外，浏览器没有实现规范。 因此，如果您使用较少表现力的语法，则对我们的内容进行清理将更加容易。 <br><br> 这里使用术语Markdown-“易于阅读的标记”，而不是术语Markup-普通标记。  Markdown的主要思想是将其设计为一种语言，例如，它允许用户发表评论，但不包含使用空标签，applet支持等功能。 因此，在Markdown中，唯一地识别语法然后应用它实际上要容易得多。 <br><br><img src="https://habrastorage.org/webt/pw/ul/9c/pwul9ccnk3ss1uycrvipf39mchu.jpeg"><br><br> 使用简单的语言进行消毒比使用成熟的HTML，CSS和JavaScript容易得多。 在某种程度上，这就像理解C代码和Python代码之间的区别。 理解更具表现力的语言确实有很大的不同。 因此，通过限制表示性，通常可以提高安全性。 <br><br> 为了防止跨站点脚本攻击，还使用了CSP（内容安全策略）。  CSP的想法是它允许Web服务器... <br> 受众：我只是想了解有关Markdown语言的信息。 所有浏览器都能执行语言解析吗？ <br><br>  <b>教授：</b>不，不，不。 您可以简单地将各种类型的语言转换为HTML，但浏览器无法以其原始形式理解它们。 换句话说，您有一个评论系统，它使用Markdown。 也就是说，注释在显示在页面上之前，先进入Markdown编译器，后者将它们转换为HTML格式。 <br><br>  <b>观众：</b>为什么不总是使用Markdown？ <br><br>  <b>教授：</b> Markdown允许您使用嵌入式HTML，据我所知，有一种方法可以在编译器中将其禁用。 但是我对此可能是错的。 事实是，并非总是可以使用有限的语言，并不是每个人都愿意这样做。 <br><br> 因此，让我们继续讨论如何借助内容安全策略来提高安全性。 通过此策略，服务器可以告诉Web浏览器可以在其发回的页面上加载哪些类型的内容，以及该内容的来源。 <br><br> 例如，在HTTP响应中，服务器可能使用类似以下内容：它包含Content-Security-Policy标头，默认源是self，它将从* .mydomain.com接收数据。 <br><br><img src="https://habrastorage.org/webt/6c/u3/z8/6cu3z8oazkleohxh9fnrvk1_hay.jpeg"><br><br> 对于操作员，服务器指示该站点中的内容仅应来自特定页面的域或mydomain.com的任何子域。 这意味着，如果我们具有对foo.com的自我绑定，则服务器会将此页面发送回浏览器。 <br><br> 假设跨站点脚本攻击试图创建一个指向bar.com的链接。 在这种情况下，浏览器将看到bar.com不是自身，也不是mydomain.com的域，因此不会进一步跳过此请求。 这是一种非常强大的机制，您可以在其中指定更详细的控件。 您设置参数以指示您的图像应来自此类来源，脚本应来自此类来源等等。 实际上很方便。 <br><br> 另外，此策略实际上阻止了嵌入式JavaScript，因此您无法打开标签，编写某种脚本并关闭标签，因为可以进入浏览器的所有内容都应仅来自有条件的来源。  CSP防止使用eval（）函数的参数之类的危险事物，该函数允许网页执行动态生成的JavaScript代码。 因此，如果设置了CSP标头，则浏览器将不会执行eval（）。 <br><br>  <b>受众：</b>是所有CSP保护的对象吗？ <br><br>  <b>教授：</b>不。 它实际上保护着完整的资源列表，您可以配置针对许多不需要的东西的保护，例如，指定允许在何处接受传出CSS以及许多其他东西。 <br><br>  <b>受众：</b>但是，除了eval（）之外，还有其他威胁安全的因素吗？ <br><br>  <b>教授：</b>是的，它们存在。 因此，总是出现保护完整性的问题。 因此，例如，不仅eval可以动态生成JavaScript代码。 还有一个函数的构造函数，有一些方法可以调用给定的超时，您可以直接进行代码行分析，从而可以分析代码。  CSP可以禁用所有这些危险的攻击媒介。 但这并不是完全隔离恶意攻击的灵丹妙药。 <br><br>  <b>受众：</b>是否可以配置CSP以防止在页面上检查所有内部脚本？ <br><br>  <b>教授：</b>是的，它有助于防止执行动态生成的代码，而嵌入式代码应被忽略。 浏览器应始终从source属性获取代码。 实际上，我不知道是否所有浏览器都这样做。 个人经验表明，浏览器表现出不同的行为。 <br><br> 通常，Internet安全类似于自然科学，因此人们只是提出了有关浏览器工作原理的理论。 然后，您将了解实际情况。 实际情况可能令人失望，因为我们被告知存在算法，证据等。 但是这些浏览器的行为是如此糟糕，以至于其工作结果是无法预测的。 <br><br> 浏览器开发人员试图比攻击者领先一步，在本课程中，您将进一步看到此示例。 实际上，CSP是一件很酷的事情。 <br><br> 另一个有用的事情是服务器可以设置一个名为X-Content-Type-Options的HTTP标头，其值为nosniff。 <br><br><img src="https://habrastorage.org/webt/ow/tj/4n/owtj4npqv9thfxhl6hfa8n5elfg.jpeg"><br><br> 此标头可防止MIME丢弃广告内容类型的响应，因为标头告诉浏览器不要覆盖响应内容类型。 使用nosniff选项，如果服务器说内容为text / html，则浏览器会将其显示为text / html。 <br> 简而言之，此标头可防止浏览器“嗅探”所声明内容类型的响应，以免浏览器说“是的，我嗅探文件扩展名和实际内容之间的不匹配，因此不会出现这种情况”我有事。” 原来，您突然将野蛮人的钥匙交给了王国。 <br><br> 因此，通过设置此标头，可以告诉浏览器不要执行任何此类操作。 这可以大大减轻某些类型的攻击的影响。 这是跨站点脚本攻击的一些漏洞的简要概述。 <br><br> 现在，让我们看一下另一个流行的攻击媒介-SQL。 您可能听说过称为“ SQL注入”或SQL注入攻击的攻击。 这些攻击的实质是使用网站数据库。 为了动态构建显示给用户的页面，将发出数据库查询，该查询将发布到此内部服务器。 假设您有一个请求，要从一个特定的表中选择所有值，其中“用户ID”字段等于Internet上从潜在不可靠来源确定的值。 <br><br><img src="https://habrastorage.org/webt/mc/uo/s3/mcuos3xx1tdpkoorj-cg6z_tdeu.jpeg"><br><br> 我们都知道这个故事将如何结束-它将非常糟糕地结束，将没有幸存者。 因为来自未经验证的来源会带来很多麻烦。 另外，您可以给用户ID字符串以下值：用户ID =“ 0; 删除表“。 <br><br> 那么这里会发生什么呢？ 基本上，服务器数据库将说：“确定，我将用户ID设置为零，然后执行“删除表”命令。 就是这样，您完成了！ <br><br> 他们说，几年前出现了某种病毒形象。 德国有些人在汽车上安装了车牌，上面写着0； 删除表。 当时的想法是公路摄像机使用OCR识别您的电话号码，然后将该电话号码输入数据库。 总的来说，大众汽车公司决定通过在其号码上放置恶意代码来利用此漏洞。 <br><br> 我不知道这是否有效，因为听起来很有趣。 但是我想相信这是真的。 因此，我再次重复-消毒的想法是防止执行您站点上不受信任来源的内容。 <br><br><img src="https://habrastorage.org/webt/dx/2c/aj/dx2cajp2tth8bgt_-echscd6m-i.jpeg"><br><br> 因此，请注意以下事实：可能有些简单的事情无法正常工作。 因此，您可能会想：“好吧，为什么我不能只在行的开头加上另一个引号，而在行的末尾再加上一个引号，以排除攻击者的恶意代码在三重引号之间的执行”？ <br><br> 用户ID ='“ +用户ID +'” <br><br> 但这是行不通的，因为攻击者总是可以简单地将引号放在攻击字符串中。 因此，在大多数情况下，此类“半黑客”不会为您带来预期的安全性。 <br><br> 这里的解决方案是您需要仔细加密数据。 再说一遍，当您从不可靠的来源收到信息时，请不要以其形式将其插入系统。 如果将其放在沙箱中进行恶意利用，请确保它不会跳出沙箱。 <br><br> 例如，您要插入转义函数以防止使用原始逗号运算符。 为此，许多Web框架（例如Django）都具有内置库，可让您避免使用SQL查询来防止此类情况的发生。 这些框架鼓励开发人员永远不要直接与数据库进行交互。 例如，Django本身提供了一个高级界面，可以对您进行消毒。 <br><br> 但是人们总是关心性能，有时人们认为这些Web框架太慢了。 因此，您很快就会看到，人们仍然会进行原始SQL查询，这可能会导致问题。 <br><br> 如果Web服务器接受来自不受信任图像的路径名，则可能会出现问题。 想象一下，您在服务器上的某处正在执行类似的操作：使用“ www / images /” + filename打开，其中filename用... / ... / ... / ... /表示。等/密码。 <br><br><img src="https://habrastorage.org/webt/sa/ro/bv/sarobvldxpltyhqughpaublh9ew.jpeg"><br><br> 也就是说，您给出命令以从不受信任的用户文件在此地址打开图像，这实际上可能严重伤害您。 因此，如果要使用Web服务器或Web框架，则应该能够检测到这些危险字符并避免使用这些危险字符，以防止执行这些未处理的命令。 <br><br> 让我们在讨论内容消毒时稍作休息，然后再谈谈Cookie。  Cookies是一种非常流行的会话管理方法，可以将用户绑定到服务器端存在的一组特定资源。 您稍后会遇到的许多框架（例如Django或Zoobar）实际上在cookie中放置了一个随机会话标识符。 这个想法是该会话ID是某种服务器端表中的索引： <br><br> 表[会话ID] =用户信息。 <br><br> 即，会话标识符等于某些用户信息。 因此，此会话ID和cookie在其扩展名中是非常敏感的部分。 许多攻击包括盗窃Cookie以获得该会话ID。 正如我们在上一讲中所讨论的那样，相同来源的相同策略可以在某种程度上帮助您抵御某些Cookie盗窃攻击。 因为存在基于同一原始策略的规则，可防止对Cookie进行任意修改。 <br><br> 妙处在于，您不应与不信任的人共享域或子域。 因为，正如我们在上一讲中所说的，有一些规则允许相同来源的两个域或子域访问彼此的cookie。 因此，如果您信任一个不应该信任的域，则该域可能能够直接在这些cookie中设置会话标识符，而这两个cookie都可以访问。 这将允许攻击者强迫用户使用攻击者选择的会话标识符。 <br><br><img src="https://habrastorage.org/webt/zu/vk/z6/zuvkz6jxe3v6rqnrvhfdfrzk5j8.jpeg"><br><br> 假设攻击者设置了一个Gmail用户cookie。 用户登录Gmail并输入几个字母。 然后，攻击者可以使用此cookie，尤其是使用此会话标识符，下载Gmail，然后像对待受害者用户一样访问Gmail。 因此，您可以使用这些Cookie进行许多微妙的操作来管理会话。 今天和以后的讲座中，我们将讨论其中的一些。 <br><br> 也许您认为您可以摆脱饼干？ 毕竟，它们带来的问题多于收益。 为什么不能将它们丢弃？ <br><br>   stateless cookie,  «   »,  -             , ,  ,     . <br><br> ,     ,        ,     .      ,       .  ,    ,            .        , ,  ,         ,  . <br><br>      —     MA — Message Authentication Codes,    .   ,  .       HCK  -  m.     ,  ,          K.  ,        ,     .   ,     ,          . <br><br><img src="https://habrastorage.org/webt/ll/z-/f3/llz-f3q7wj73o5ghn8d5urhxb7g.jpeg"><br><br>     ,   .    ,   stateless cookie,    Amazon, , x3.   - Amazon,   AWS,     .  –    K,  –   AWS,    . <br><br><img src="https://habrastorage.org/webt/dz/qy/tg/dzqytgmk-gbiyefqqk3o-jn9lle.jpeg"><br><br>    ,       AWS  HTTP,       . <br><br> ,        ,   ,      : <br><br> GET /photos/ cat; .jpg HTTP/1.1,        -  AWS: <br><br> HOST: — - — - — ,     , : <br><br> DATE: Mon, June 4,            ,  ,     .    ,   ID ,  ,     ,   . <br><br><img src="https://habrastorage.org/webt/ah/rb/k2/ahrbk2c77e0qvutlug1awoh147s.jpeg"><br><br>      ?       ,        3-  . <br><br>  ,   String To Sign   : <br><br> —  HTTP,     GET; <br> —     MDS; <br> —  ,  html   jpg; <br> — ; <br> —  ,     ,    . <br><br><img src="https://habrastorage.org/webt/1a/6o/qt/1a6oqtqqp9ee4eq_xegvmbuvmmw.jpeg"><br><br>  ,     ,     HCK MAC.  ,            .         ,         .  ,        .  ? <br><br>   ,  ,     ,          -   .     Amazon  ,      stateless cookie,     MD5       . <br><br>    , ,      ,         cookie,    .      –    ,  ,     . <br><br>        ,       .  ,      ,         “HCK, m”. <br><br><img src="https://habrastorage.org/webt/yt/ez/21/ytez21vos7pryus3awum_33cd0u.jpeg"><br><br>         .                GET /photos/ cat; .jpg HTTP/1.1  ,    ,    .    ,  ,      .    , ?     : «,  ,            ,    ». <br><br> 56:15 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">麻省理工学院的课程“计算机系统安全”。</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> 9: « Web-»,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 该课程的完整版本可<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处获得</a> 。 <br><br> 感谢您与我们在一起。 你喜欢我们的文章吗？ 想看更多有趣的资料吗？ 通过下订单或将其推荐给您的朋友来支持我们， <b>为我们为您发明的入门级服务器的独特模拟，为Habr用户</b>提供<b>30％的折扣：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关于VPS（KVM）E5-2650 v4（6核）的全部真相10GB DDR4 240GB SSD 1Gbps从$ 20还是如何划分服务器？</a>  （RAID1和RAID10提供选件，最多24个内核和最大40GB DDR4）。 <br><br>  <b>VPS（KVM）E5-2650 v4（6核）10GB DDR4 240GB SSD 1Gbps至12月免费，</b>在六个月内付款时，您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>订购。 <br><br>  <b>戴尔R730xd便宜2倍？</b> 仅<b>在荷兰和美国，</b>我们有<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2台Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100电视（249美元起）</a> ！</b> 阅读有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">如何构建基础架构大厦的信息。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用价格为9000欧元的Dell R730xd E5-2650 v4服务器的上等课程？</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN424295/">https://habr.com/ru/post/zh-CN424295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN424277/index.html">电报博客中的移民及其一切</a></li>
<li><a href="../zh-CN424279/index.html">如果您是程序员，并且不满口，如何在德国打开IP</a></li>
<li><a href="../zh-CN424285/index.html">Y Combinator入门提示：开拓玩具市场</a></li>
<li><a href="../zh-CN424287/index.html">我们如何参加InnovateFPGA 2018并没有再次获胜</a></li>
<li><a href="../zh-CN424289/index.html">麻省理工学院的课程“计算机系统安全”。 讲座9：Web应用程序安全性，第1部分</a></li>
<li><a href="../zh-CN424297/index.html">麻省理工学院的课程“计算机系统安全”。 讲座9：Web应用程序安全性，第3部分</a></li>
<li><a href="../zh-CN424301/index.html">自适应神经网络图像滤波算法</a></li>
<li><a href="../zh-CN424305/index.html">Uber跨平台移动架构RIB</a></li>
<li><a href="../zh-CN424307/index.html">GitLab 11.3与Maven存储库和安全环境一起发布</a></li>
<li><a href="../zh-CN424309/index.html">DevCore：DevBoy项目的软件部分</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>