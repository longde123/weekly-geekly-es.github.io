<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’†ğŸ¿ ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ ğŸ‘¶ğŸ½ ä¼˜åŒ–ç¼–è¯‘å™¨å¦‚ä½•å·¥ä½œ ğŸ‘¨â€ğŸ‘¦ âï¸ ğŸ’¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¼˜åŒ–ç¼–è¯‘å™¨æ˜¯ç°ä»£è½¯ä»¶çš„åŸºç¡€ï¼šå®ƒä»¬å…è®¸ç¨‹åºå‘˜ä½¿ç”¨ä»–ä»¬ç†è§£çš„è¯­è¨€ç¼–å†™ä»£ç ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºå¯ç”±è®¾å¤‡æœ‰æ•ˆæ‰§è¡Œçš„ä»£ç ã€‚ ä¼˜åŒ–ç¼–è¯‘å™¨çš„ä»»åŠ¡æ˜¯äº†è§£æ‚¨ç¼–å†™çš„è¾“å…¥ç¨‹åºçš„åŠŸèƒ½ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ‰§è¡Œç›¸åŒåŠŸèƒ½çš„è¾“å‡ºç¨‹åºï¼Œä½†é€Ÿåº¦æ›´å¿«ã€‚ 

 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶ä¼˜åŒ–ç¼–è¯‘å™¨çš„ä¸€äº›åŸºæœ¬æ¨ç†æŠ€æœ¯ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œä½¿ç¼–è¯‘å™¨å¯ä»¥è½»æ¾å·¥ä½œï¼›...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä¼˜åŒ–ç¼–è¯‘å™¨å¦‚ä½•å·¥ä½œ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/477062/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uc/uq/bo/ucuqbo4tluzynnptop1pdmdvjhc.jpeg"></div><br> ä¼˜åŒ–ç¼–è¯‘å™¨æ˜¯ç°ä»£è½¯ä»¶çš„åŸºç¡€ï¼šå®ƒä»¬å…è®¸ç¨‹åºå‘˜ä½¿ç”¨ä»–ä»¬ç†è§£çš„è¯­è¨€ç¼–å†™ä»£ç ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºå¯ç”±è®¾å¤‡æœ‰æ•ˆæ‰§è¡Œçš„ä»£ç ã€‚ ä¼˜åŒ–ç¼–è¯‘å™¨çš„ä»»åŠ¡æ˜¯äº†è§£æ‚¨ç¼–å†™çš„è¾“å…¥ç¨‹åºçš„åŠŸèƒ½ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ‰§è¡Œç›¸åŒåŠŸèƒ½çš„è¾“å‡ºç¨‹åºï¼Œä½†é€Ÿåº¦æ›´å¿«ã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶ä¼˜åŒ–ç¼–è¯‘å™¨çš„ä¸€äº›åŸºæœ¬æ¨ç†æŠ€æœ¯ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œä½¿ç¼–è¯‘å™¨å¯ä»¥è½»æ¾å·¥ä½œï¼› æ‚¨å¯ä»¥åœ¨ç¨‹åºä¸­è¿›è¡Œå“ªäº›å‡å°‘ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥å‡å°‘å’ŒåŠ é€Ÿå®ƒã€‚ <br><a name="habracut"></a><br> ç¨‹åºä¼˜åŒ–å™¨å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ‰§è¡Œï¼šä½œä¸ºå¤§å‹ç¼–è¯‘è¿‡ç¨‹çš„ä¸€ä¸ªæ­¥éª¤ï¼ˆ <a href="https://www.lightbend.com/blog/scala-inliner-optimizer">Scala Optimizer</a> ï¼‰ï¼› ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç¨‹åºï¼Œåœ¨ç¼–è¯‘å™¨ä¹‹åå’Œæ‰§è¡Œä¹‹å‰å¯åŠ¨ï¼ˆ <a href="https://www.guardsquare.com/en/products/proguard">Proguard</a> ï¼‰ï¼› æˆ–ä½œä¸ºåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¼˜åŒ–ç¨‹åºçš„è¿è¡Œæ—¶ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼ˆ <a href="https://aboullaite.me/understanding-jit-compiler-just-in-time-compiler/">JVM JITç¼–è¯‘å™¨</a> ï¼‰ã€‚ ä¼˜åŒ–å™¨å·¥ä½œçš„å±€é™æ€§å› æƒ…å†µè€Œå¼‚ï¼Œä½†æ˜¯å®ƒä»¬åªæœ‰ä¸€é¡¹ä»»åŠ¡ï¼šé‡‡ç”¨è¾“å…¥ç¨‹åºå¹¶å°†å…¶è½¬æ¢ä¸ºè¾“å‡ºç¨‹åºï¼Œå®ƒæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†æ˜¯é€Ÿåº¦æ›´å¿«ã€‚ <br><br> é¦–å…ˆï¼Œæˆ‘ä»¬å°†æŸ¥çœ‹ç¨‹åºè‰æ¡ˆä¼˜åŒ–çš„ä¸€äº›ç¤ºä¾‹ï¼Œä»¥ä¾¿æ‚¨äº†è§£ä¼˜åŒ–å™¨é€šå¸¸æ‰§è¡Œçš„æ“ä½œä»¥åŠå¦‚ä½•æ‰‹åŠ¨æ‰§è¡Œæ‰€æœ‰æ“ä½œã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†è€ƒè™‘å‘ˆç°ç¨‹åºçš„å‡ ç§æ–¹æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬å°†åˆ†æå¯ç”¨æ¥åˆ†æç¨‹åºçš„ç®—æ³•å’ŒæŠ€æœ¯ï¼Œç„¶åä½¿å®ƒä»¬å˜å¾—æ›´å°ï¼Œæ›´å¿«ã€‚ <br><br><h2> è®¡åˆ’è‰æ¡ˆ </h2><br> æ‰€æœ‰ç¤ºä¾‹éƒ½å°†ç”¨Javaç»™å‡ºã€‚ è¯¥è¯­è¨€éå¸¸æ™®éï¼Œå¯ç¼–è¯‘ä¸ºç›¸å¯¹ç®€å•çš„æ±‡ç¼–å™¨<a href="https://en.wikipedia.org/wiki/Java_bytecode">-Java Bytecode</a> ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè‰¯å¥½çš„åŸºç¡€ï¼Œå€ŸåŠ©å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çœŸå®çš„å¯æ‰§è¡Œç¤ºä¾‹æ¢ç´¢ç¼–è¯‘ä¼˜åŒ–æŠ€æœ¯ã€‚ ä¸‹é¢ä»‹ç»çš„æ‰€æœ‰æŠ€æœ¯å‡ ä¹éƒ½å¯ä»¥ç”¨äºæ‰€æœ‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚ <br><br> é¦–å…ˆï¼Œè€ƒè™‘ä¸€ä¸ªè®¡åˆ’è‰æ¡ˆã€‚ å®ƒåŒ…å«å„ç§é€»è¾‘ï¼Œåœ¨è¿‡ç¨‹ä¸­æ³¨å†Œæ ‡å‡†ç»“æœå¹¶è¿”å›è®¡ç®—ç»“æœã€‚ è¯¥ç¨‹åºæœ¬èº«æ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å°†ç”¨ä½œè¯´æ˜åœ¨ä¿æŒç°æœ‰è¡Œä¸ºçš„åŒæ—¶å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„ç¤ºä¾‹ï¼š <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, total = <span class="hljs-number"><span class="hljs-number">0</span></span>, multiplied = <span class="hljs-number"><span class="hljs-number">0</span></span>; Logger logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintLogger(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ count += <span class="hljs-number"><span class="hljs-number">1</span></span>; multiplied *= count; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) logger.log(count); total += ackermann(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); total += ackermann(multiplied, n); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d1 = ackermann(n, <span class="hljs-number"><span class="hljs-number">1</span></span>); total += d1 * multiplied; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) total += d2; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total; } <span class="hljs-comment"><span class="hljs-comment">// https://en.wikipedia.org/wiki/Ackermann_function static int ackermann(int m, int n){ if (m == 0) return n + 1; else if (n == 0) return ackermann(m - 1, 1); else return ackermann(m - 1, ackermann(m, n - 1)); } interface Logger{ public Logger log(Object a); } static class PrintLogger implements Logger{ public PrintLogger log(Object a){ System.out.println(a); return this; } } static class ErrLogger implements Logger{ public ErrLogger log(Object a){ System.err.println(a); return this; } }</span></span></code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬å‡å®šè¯¥ç¨‹åºå°±æ˜¯æˆ‘ä»¬æ‰€æ‹¥æœ‰çš„ï¼Œä»£ç çš„å…¶ä»–éƒ¨åˆ†éƒ½æ²¡æœ‰è°ƒç”¨å®ƒã€‚ å®ƒåªæ˜¯å°†æ•°æ®è¾“å…¥<code>main</code> ï¼Œæ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚ ç°åœ¨è®©æˆ‘ä»¬ä¼˜åŒ–è¯¥ç¨‹åºã€‚ <br><br><h2> ä¼˜åŒ–å®ä¾‹ </h2><br><h4> ç±»å‹è½¬æ¢å’Œå†…è” </h4><br> æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°å˜é‡<code>logger</code>ç±»å‹ä¸æ­£ç¡®ï¼šå°½ç®¡æœ‰<code>Logger</code>æ ‡ç­¾ï¼Œä½†åŸºäºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹å®šçš„å­ç±»<code>PrintLogger</code> ï¼š <br><br><pre> <code class="java hljs">- Logger logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintLogger(); + PrintLogger logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintLogger();</code> </pre> <br> ç°åœ¨æˆ‘ä»¬çŸ¥é“<code>logger</code>æ˜¯<code>PrintLogger</code> ï¼Œå¹¶ä¸”çŸ¥é“è°ƒç”¨<code>logger.log</code>å¯ä»¥æœ‰ä¸€ä¸ªå®ç°ã€‚ æ‚¨å¯ä»¥å†…è”ï¼š <br><br><pre> <code class="java hljs">- <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) logger.logcount(); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) System.out.println(count);</code> </pre> <br> è¿™å°†é€šè¿‡åˆ é™¤ä¸éœ€è¦çš„ä¸å¿…è¦çš„<code>ErrLogger</code>ç±»ä»¥åŠåˆ é™¤<code>public Logger</code> <code>log</code>å„ç§æ–¹æ³•æ¥å‡å°‘ç¨‹åºï¼Œå› ä¸ºæˆ‘ä»¬å°†å…¶å†…è”åœ¨è°ƒç”¨çš„å•ä¸ªä½ç½®ã€‚ <br><br><h2> å‡è¡€å¸¸æ•° </h2><br> åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œ <code>count</code>å’Œ<code>total</code>å˜åŒ–ï¼Œä½†ä¸<code>multiplied</code> ï¼šå®ƒä»<code>0</code>å¼€å§‹ï¼Œæ¯æ¬¡éƒ½é€šè¿‡<code>multiplied = multiplied * count</code> ï¼Œä¿æŒç­‰äº<code>0</code> ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºä¸­å°†å…¶æ›¿æ¢ä¸º<code>0</code> ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ - <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, total = <span class="hljs-number"><span class="hljs-number">0</span></span>, multiplied = <span class="hljs-number"><span class="hljs-number">0</span></span>; + <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, total = <span class="hljs-number"><span class="hljs-number">0</span></span>; PrintLogger logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintLogger(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ count += <span class="hljs-number"><span class="hljs-number">1</span></span>; - multiplied *= count; - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) System.out.println(count); + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) logger.log(count); total += ackermann(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); - total += ackermann(multiplied, n); + total += ackermann(<span class="hljs-number"><span class="hljs-number">0</span></span>, n); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d1 = ackermann(n, <span class="hljs-number"><span class="hljs-number">1</span></span>); - total += d1 * multiplied; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) total += d2; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total; }</code> </pre> <br> ç»“æœï¼Œæˆ‘ä»¬çœ‹åˆ°<code>d1 * multiplied</code>å§‹ç»ˆä¸º<code>0</code> ï¼Œè¿™æ„å‘³ç€<code>total += d1 * multiplied</code>ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œå¯ä»¥å°†å…¶åˆ é™¤ï¼š <br><br><pre> <code class="java hljs">- total += d1 * multiplied</code> </pre><br><h4> æ¸…é™¤æ­»ä»£ç  </h4><br> æŠ˜å <code>multiplied</code>å¹¶æ„è¯†åˆ°<code>total += d1 * multiplied</code>æ— åï¼Œæ‚¨å¯ä»¥åˆ é™¤<code>int d1</code>çš„å®šä¹‰ï¼š <br><br><pre> <code class="java hljs">- <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d1 = ackermann(n, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br> è¿™ä¸å†æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”ç”±äº<code>ackermann</code>æ˜¯çº¯å‡½æ•°ï¼Œå› æ­¤å¸è½½ä¸ä¼šå½±å“ç¨‹åºçš„ç»“æœã€‚ <br><br> åŒæ ·ï¼Œ <code>logger.log</code>è”<code>logger.log</code> ï¼Œä¸å†ä½¿ç”¨<code>logger</code>æœ¬èº«ï¼Œå¯ä»¥å°†å…¶åˆ é™¤ï¼š <br><br><pre> <code class="java hljs">- PrintLogger logger = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintLogger();</code> </pre><br><h4> ç§»é™¤åˆ†æ”¯ </h4><br> ç°åœ¨ï¼Œæˆ‘ä»¬å¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ä»¶è½¬æ¢å–å†³äº<code>0 &lt; 100</code> ã€‚ ç”±äºè¿™å§‹ç»ˆæ˜¯æ­£ç¡®çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥ç®€å•åœ°åˆ é™¤æ¡ä»¶ï¼š <br><br><pre> <code class="java hljs">- <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) System.out.println(count); + System.out.println(count);</code> </pre> <br> ä»»ä½•å§‹ç»ˆä¸ºçœŸçš„æ¡ä»¶è½¬æ¢éƒ½å¯ä»¥å†…è”åˆ°æ¡ä»¶çš„ä¸»ä½“ä¸­ï¼Œå¯¹äºå§‹ç»ˆä¸æ­£ç¡®çš„è½¬æ¢ï¼Œå¯ä»¥å°†æ¡ä»¶åŠå…¶ä¸»ä½“ä¸€èµ·åˆ é™¤ã€‚ <br><br><h4> éƒ¨åˆ†è®¡ç®— </h4><br> ç°åœ¨ï¼Œæˆ‘ä»¬åˆ†æå¯¹<code>ackermann</code>çš„ä¸‰ä¸ªå‰©ä½™è°ƒç”¨ï¼š <br><br><pre> <code class="java hljs"> total += ackermann(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); total += ackermann(<span class="hljs-number"><span class="hljs-number">0</span></span>, n); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count);</code> </pre><br><ul><li> ç¬¬ä¸€ä¸ªæœ‰ä¸¤ä¸ªå¸¸æ•°ã€‚ è¯¥å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼Œæ ¹æ®åˆæ­¥è®¡ç®—ï¼Œ <code>ackermann(2, 2)</code>åº”è¯¥ç­‰äº<code>7.</code> </li><li> ç¬¬äºŒä¸ªè°ƒç”¨å…·æœ‰ä¸€ä¸ªå¸¸é‡å‚æ•°<code>0</code>å’Œä¸€ä¸ªæœªçŸ¥<code>n</code> ã€‚ æ‚¨å¯ä»¥å°†å…¶ä¼ é€’ç»™<code>ackermann</code>çš„å®šä¹‰ï¼Œç»“æœå‘ç°ï¼Œå½“<code>m</code>ä¸º<code>0</code> ï¼Œè¯¥å‡½æ•°å§‹ç»ˆè¿”å›<code>n + 1.</code> <br></li><li> åœ¨ç¬¬ä¸‰ä¸ªè°ƒç”¨ä¸­ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯æœªçŸ¥çš„ï¼š <code>n</code>å’Œ<code>count</code> ã€‚ è®©æˆ‘ä»¬æš‚æ—¶ä¿ç•™å®ƒä»¬ã€‚ <br></li></ul><br> é‰´äº<code>ackermann</code>çš„å®šä¹‰å¦‚ä¸‹ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(m, n - <span class="hljs-number"><span class="hljs-number">1</span></span>)); }</code> </pre> <br> æ‚¨å¯ä»¥å°†å…¶ç®€åŒ–ä¸ºï¼š <br><br><pre> <code class="java hljs">- total += ackermann(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); + total += <span class="hljs-number"><span class="hljs-number">7</span></span> - total += ackermann(<span class="hljs-number"><span class="hljs-number">0</span></span>, n); + total += n + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count);</code> </pre><br><h4> å»¶è¿Ÿæ’ç¨‹ </h4><br>  <code>d2</code>çš„å®šä¹‰ä»…åœ¨<code>if (count % 2 == 0)</code>æ¡ä»¶<code>if (count % 2 == 0)</code> ã€‚ ç”±äº<code>ackermann</code>è®¡ç®—æ˜¯å¹²å‡€çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†æ­¤è°ƒç”¨è½¬ç§»åˆ°æ¡ä»¶<code>ackermann</code>ä»¥ä¾¿åœ¨ä½¿ç”¨ä¹‹å‰ä¸å¯¹å…¶è¿›è¡Œå¤„ç†ï¼š <br><br><pre> <code class="java hljs">- <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count); - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) total += d2; + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) { + <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count); + total += d2; + }</code> </pre> <br> è¿™å°†é¿å…å¯¹<code>ackermann(n, count)</code>ä¸€åŠè°ƒç”¨ï¼Œä»è€ŒåŠ å¿«ç¨‹åºæ‰§è¡Œé€Ÿåº¦ã€‚ <br><br> ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œ <code>System.out.println</code>å‡½æ•°ä¸æ˜¯å¹²å‡€çš„ï¼Œè¿™æ„å‘³ç€åœ¨ä¸æ›´æ”¹ç¨‹åºè¯­ä¹‰çš„æƒ…å†µä¸‹ï¼Œæ— æ³•åœ¨æ¡ä»¶è·³è½¬çš„å†…éƒ¨æˆ–å¤–éƒ¨ä¼ é€’è¯¥å‡½æ•°ã€‚ <br><br><h2> ä¼˜åŒ–ç»“æœ </h2><br> æ”¶é›†äº†æ‰€æœ‰ä¼˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬è·å¾—äº†ä»¥ä¸‹æºä»£ç ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, total = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ count += <span class="hljs-number"><span class="hljs-number">1</span></span>; System.out.println(count); total += <span class="hljs-number"><span class="hljs-number">7</span></span>; total += n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) { total += d2; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d2 = ackermann(n, count); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(m, n - <span class="hljs-number"><span class="hljs-number">1</span></span>)); }</code> </pre> <br> å°½ç®¡æˆ‘ä»¬å·²ç»æ‰‹åŠ¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†æ˜¯æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥è‡ªåŠ¨å®Œæˆã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä¸ºJVMç¨‹åºç¼–å†™çš„åŸå‹ä¼˜åŒ–å™¨çš„åç¼–è¯‘ç»“æœï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> var0)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Demo.PrintLogger(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var3; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; var2 &lt; var0; var2 = var3) { System.out.println(var3 = <span class="hljs-number"><span class="hljs-number">1</span></span> + var2); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var10000 = var3 % <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var7 = var1 + <span class="hljs-number"><span class="hljs-number">7</span></span> + var0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; var1 = var10000 == <span class="hljs-number"><span class="hljs-number">0</span></span> ? var7 + ackermann(var0, var3) : var7; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> var1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann__I__TI1__I</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> var0)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (var0 == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(var0 - <span class="hljs-number"><span class="hljs-number">1</span></span>, var0 == <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">1</span></span> : ackermann__I__TI1__I(var0 - <span class="hljs-number"><span class="hljs-number">1</span></span>);); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> var0, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> var1)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (var0 == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> var1 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> var1 == <span class="hljs-number"><span class="hljs-number">0</span></span> ? ackermann__I__TI1__I(var0 - <span class="hljs-number"><span class="hljs-number">1</span></span>) : ackermann(var0 - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(var0, var1 - <span class="hljs-number"><span class="hljs-number">1</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintLogger</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Demo</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br> åç¼–è¯‘çš„ä»£ç ä¸æ‰‹åŠ¨ä¼˜åŒ–çš„ç‰ˆæœ¬ç•¥æœ‰ä¸åŒã€‚ ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–çš„æŸäº›å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œæœªä½¿ç”¨çš„å¯¹<code>new PrintLogger</code>è°ƒç”¨ï¼‰ï¼Œä½†æ˜¯åšäº†ä¸€äº›ä¸åŒçš„äº‹æƒ…ï¼ˆä¾‹å¦‚ï¼Œ <code>ackermann</code>å’Œ<code>ackermann__I__TI1__I</code> ï¼‰ã€‚ ä½†æ˜¯å¯¹äºå…¶ä½™éƒ¨åˆ†ï¼Œè‡ªåŠ¨ä¼˜åŒ–å™¨ä½¿ç”¨åµŒå…¥åœ¨å…¶ä¸­çš„é€»è¾‘ä¸æˆ‘åšç›¸åŒçš„äº‹æƒ…ã€‚ <br><br> é—®é¢˜å‡ºç°äº†ï¼šå¦‚ä½•ï¼Ÿ <br><br><h2> ä¸­çº§æ„è§ </h2><br> å¦‚æœæ‚¨å°è¯•åˆ›å»ºè‡ªå·±çš„ä¼˜åŒ–å™¨ï¼Œé‚£ä¹ˆå‡ºç°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ä¹Ÿè®¸æ˜¯æœ€é‡è¦çš„ï¼šä»€ä¹ˆæ˜¯â€œç¨‹åºâ€ï¼Ÿ <br><br> æ¯«æ— ç–‘é—®ï¼Œæ‚¨ä¹ æƒ¯äºä»¥æºä»£ç çš„å½¢å¼ç¼–å†™å’Œæ›´æ”¹ç¨‹åºã€‚ æ‚¨è‚¯å®šä»¥ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶çš„å½¢å¼æ‰§è¡Œäº†å®ƒä»¬ï¼Œç”šè‡³è°ƒè¯•äº†äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ æ‚¨å¯èƒ½ä¼šä»¥<a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B1%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2581%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B0%25D0%25BA%25D1%2581%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE">è¯­æ³•æ ‘</a> ï¼Œ <a href="https://en.wikipedia.org/wiki/Three-address_code">ä¸‰åœ°å€ä»£ç </a> ï¼Œ <a href="https://en.wikipedia.org/wiki/A-normal_form">A-Normal</a> ï¼Œ <a href="https://en.wikipedia.org/wiki/Continuation-passing_style">Continuation Passing Style</a>æˆ–<a href="https://ru.wikipedia.org/wiki/SSA">Single Static Assignment</a>çš„å½¢å¼é‡åˆ°ç¨‹åºã€‚ <br><br> æœ‰ä¸€ä¸ªç”±ä¸åŒç¨‹åºè¡¨ç¤ºçš„æ•´ä¸ªåŠ¨ç‰©å›­ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è®¨è®ºåœ¨ä¼˜åŒ–å™¨ä¸­è¡¨ç¤ºâ€œç¨‹åºâ€çš„æœ€é‡è¦æ–¹æ³•ã€‚ <br><br><h2> æºä»£ç  </h2><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(m, n - <span class="hljs-number"><span class="hljs-number">1</span></span>)); }</code> </pre> <br> æœªç¼–è¯‘çš„æºä»£ç ä¹Ÿè¡¨ç¤ºæ‚¨çš„ç¨‹åºã€‚ å®ƒç›¸å¯¹ç´§å‡‘ï¼Œæ˜“äºé˜…è¯»ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š <br><br><ul><li> æºä»£ç åŒ…å«åç§°å’Œæ ¼å¼çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œè¿™å¯¹ç¨‹åºå‘˜å¾ˆé‡è¦ï¼Œä½†å¯¹è®¡ç®—æœºå´æ²¡æœ‰ç”¨ã€‚ <br></li><li> æºä»£ç å½¢å¼çš„é”™è¯¯ç¨‹åºè¦æ¯”æ­£ç¡®çš„ç¨‹åºå¤šå¾—å¤šï¼Œå¹¶ä¸”åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæ‚¨éœ€è¦ç¡®ä¿å°†ç¨‹åºä»æ­£ç¡®çš„è¾“å…¥æºä»£ç è½¬æ¢ä¸ºæ­£ç¡®çš„è¾“å‡ºæºä»£ç ã€‚ <br></li></ul><br> è¿™äº›å› ç´ ä½¿ä¼˜åŒ–å™¨éš¾ä»¥ä»¥æºä»£ç çš„å½¢å¼ä½¿ç”¨ç¨‹åºã€‚ æ˜¯çš„ï¼Œæ‚¨<i>å¯ä»¥</i>è½¬æ¢è¿™æ ·çš„ç¨‹åºï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨<a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B3%25D1%2583%25D0%25BB%25D1%258F%25D1%2580%25D0%25BD%25D1%258B%25D0%25B5_%25D0%25B2%25D1%258B%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">æ­£åˆ™è¡¨è¾¾å¼æ¥</a>è¯†åˆ«å’Œæ›¿æ¢æ¨¡å¼ã€‚ ä½†æ˜¯ï¼Œä¸¤ä¸ªå› ç´ ä¸­çš„ç¬¬ä¸€ä¸ªå› ç´ ä½¿å¾—éš¾ä»¥å¯é åœ°è¯†åˆ«å¸¦æœ‰å¤§é‡æ— å…³ç»†èŠ‚çš„æ¨¡å¼ã€‚ ç¬¬äºŒä¸ªå› ç´ æå¤§åœ°å¢åŠ äº†æ··æ·†å’Œè·å–é”™è¯¯ç¨‹åºçš„å¯èƒ½æ€§ã€‚ <br><br> è¿™äº›é™åˆ¶å¯¹äºåœ¨äººå·¥ç›‘ç£ä¸‹æ‰§è¡Œçš„ç¨‹åºè½¬æ¢å™¨æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¾‹å¦‚ï¼Œå½“æ‚¨å¯ä»¥ä½¿ç”¨<a href="https://github.com/facebook/codemod">Codemod</a>é‡æ„å’Œè½¬æ¢ä»£ç åº“æ—¶ã€‚ ä½†æ˜¯ï¼Œæ‚¨ä¸èƒ½å°†æºä»£ç ç”¨ä½œè‡ªåŠ¨åŒ–ä¼˜åŒ–å™¨çš„ä¸»è¦æ¨¡å‹ã€‚ <br><br><h2> æŠ½è±¡è¯­æ³•æ ‘ </h2><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(m, n - <span class="hljs-number"><span class="hljs-number">1</span></span>)); } IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>), <span class="hljs-string"><span class="hljs-string">"="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"n"</span></span>), <span class="hljs-string"><span class="hljs-string">"+"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"n"</span></span>), <span class="hljs-string"><span class="hljs-string">"="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = Return( Call( <span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>), BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"n"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>))) ) ) ) )</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/e01/019/324/e0101932411807ddb7abb9c120033f58.png"><br><br> æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰æ˜¯å¦ä¸€ç§å¸¸è§çš„ä¸­é—´æ ¼å¼ã€‚ ä¸æºä»£ç ç›¸æ¯”ï¼Œå®ƒä»¬ä½äºæŠ½è±¡é˜¶æ¢¯çš„ä¸‹ä¸€æ­¥ã€‚ é€šå¸¸ï¼ŒASTä¸¢å¼ƒæ‰€æœ‰æºä»£ç æ ¼å¼ï¼Œç¼©è¿›å’Œæ³¨é‡Šï¼Œä½†ä¿ç•™ä»¥æ›´æŠ½è±¡çš„è¡¨ç¤ºå½¢å¼ä¸¢å¼ƒçš„å±€éƒ¨å˜é‡çš„åç§°ã€‚ <br><br> åƒæºä»£ç ä¸€æ ·ï¼ŒASTä¹Ÿå¯èƒ½ä¼šç¼–ç ä¸å½±å“ç¨‹åºå®é™…è¯­ä¹‰çš„ä¸å¿…è¦ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªä»£ç ç‰‡æ®µåœ¨è¯­ä¹‰ä¸Šæ˜¯ç›¸åŒçš„ï¼› å®ƒä»¬ä»…åœ¨å±€éƒ¨å˜é‡çš„åç§°ä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†ä»å…·æœ‰ä¸åŒçš„ASTï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermannA</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p = n; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> q = m; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (q == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermannA(q - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermannA(q - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermannA(q, p - <span class="hljs-number"><span class="hljs-number">1</span></span>)); } Block( Assign(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"n"</span></span>)), Assign(<span class="hljs-string"><span class="hljs-string">"q"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>)), IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"q"</span></span>), <span class="hljs-string"><span class="hljs-string">"=="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"p"</span></span>), <span class="hljs-string"><span class="hljs-string">"+"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"p"</span></span>), <span class="hljs-string"><span class="hljs-string">"=="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"q"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = Return( Call( <span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"q"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"q"</span></span>), BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"p"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>))) ) ) ) ) ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermannB</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r = n; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> s = m; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermannB(s - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermannB(s - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermannB(s, r - <span class="hljs-number"><span class="hljs-number">1</span></span>)); } Block( Assign(<span class="hljs-string"><span class="hljs-string">"r"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"n"</span></span>)), Assign(<span class="hljs-string"><span class="hljs-string">"s"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"m"</span></span>)), IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"s"</span></span>), <span class="hljs-string"><span class="hljs-string">"=="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"r"</span></span>), <span class="hljs-string"><span class="hljs-string">"+"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = IfElse( cond = BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"r"</span></span>), <span class="hljs-string"><span class="hljs-string">"=="</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">0</span></span>)), then = Return(Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"s"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> = Return( Call( <span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"s"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>)), Call(<span class="hljs-string"><span class="hljs-string">"ackermann"</span></span>, Ident(<span class="hljs-string"><span class="hljs-string">"s"</span></span>), BinOp(Ident(<span class="hljs-string"><span class="hljs-string">"r"</span></span>), <span class="hljs-string"><span class="hljs-string">"-"</span></span>, Literal(<span class="hljs-number"><span class="hljs-number">1</span></span>))) ) ) ) ) )</code> </pre> <br> å…³é”®åœ¨äºï¼Œå°½ç®¡ASTå…·æœ‰æ ‘ç»“æ„ï¼Œä½†å®ƒä»¬åŒ…å«åœ¨è¯­ä¹‰ä¸Šä¸åƒæ ‘çš„èŠ‚ç‚¹ï¼š <code>Ident("r")</code>å’Œ<code>Ident("s")</code>å€¼ä¸æ˜¯ç”±å…¶å­æ ‘çš„å†…å®¹ç¡®å®šçš„ï¼Œè€Œæ˜¯ç”±ä¸Šæ¸¸çš„<code>Assign("r", ...)</code>èŠ‚ç‚¹ï¼‰ç¡®å®šçš„<code>Assign("r", ...)</code>å’Œ<code>Assign("s", ...)</code> ã€‚ å®é™…ä¸Šï¼Œ <code>Ident</code>å’Œ<code>Assign</code>ä¹‹é—´è¿˜æœ‰å…¶ä»–è¯­ä¹‰å…³ç³»ï¼Œä¸ASTæ ‘ç»“æ„ä¸­çš„è¾¹åŒæ ·é‡è¦ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a17/62a/9a0/a1762a9a0a21d0b0e4fac6afb4f23335.png"><br><br> è¿™äº›è¿æ¥å½¢æˆé€šç”¨çš„å›¾ç»“æ„ï¼ŒåŒ…æ‹¬å‡½æ•°é€’å½’å®šä¹‰å­˜åœ¨æ—¶çš„å¾ªç¯ã€‚ <br><br><h2> å­—èŠ‚ç  </h2><br> ç”±äºæˆ‘ä»¬é€‰æ‹©Javaä½œä¸ºä¸»è¦è¯­è¨€ï¼Œå› æ­¤ç¼–è¯‘åçš„ç¨‹åºå°†ä½œä¸ºJavaå­—èŠ‚ç ä¿å­˜åœ¨.classæ–‡ä»¶ä¸­ã€‚ <br><br> å›æƒ³ä¸€ä¸‹æˆ‘ä»¬çš„<code>ackermann</code>å‡½æ•°ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ackermann</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ackermann(m - <span class="hljs-number"><span class="hljs-number">1</span></span>, ackermann(m, n - <span class="hljs-number"><span class="hljs-number">1</span></span>)); }</code> </pre> <br> å®ƒç¼–è¯‘ä¸ºä»¥ä¸‹å­—èŠ‚ç ï¼š <br><br><pre> <code class="java hljs"> <span class="hljs-number"><span class="hljs-number">0</span></span>: iload_0 <span class="hljs-number"><span class="hljs-number">1</span></span>: ifne <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: iload_1 <span class="hljs-number"><span class="hljs-number">5</span></span>: iconst_1 <span class="hljs-number"><span class="hljs-number">6</span></span>: iadd <span class="hljs-number"><span class="hljs-number">7</span></span>: ireturn <span class="hljs-number"><span class="hljs-number">8</span></span>: iload_1 <span class="hljs-number"><span class="hljs-number">9</span></span>: ifne <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>: iload_0 <span class="hljs-number"><span class="hljs-number">13</span></span>: iconst_1 <span class="hljs-number"><span class="hljs-number">14</span></span>: isub <span class="hljs-number"><span class="hljs-number">15</span></span>: iconst_1 <span class="hljs-number"><span class="hljs-number">16</span></span>: invokestatic ackermann:(II)I <span class="hljs-number"><span class="hljs-number">19</span></span>: ireturn <span class="hljs-number"><span class="hljs-number">20</span></span>: iload_0 <span class="hljs-number"><span class="hljs-number">21</span></span>: iconst_1 <span class="hljs-number"><span class="hljs-number">22</span></span>: isub <span class="hljs-number"><span class="hljs-number">23</span></span>: iload_0 <span class="hljs-number"><span class="hljs-number">24</span></span>: iload_1 <span class="hljs-number"><span class="hljs-number">25</span></span>: iconst_1 <span class="hljs-number"><span class="hljs-number">26</span></span>: isub <span class="hljs-number"><span class="hljs-number">27</span></span>: invokestatic ackermann:(II)I <span class="hljs-number"><span class="hljs-number">30</span></span>: invokestatic ackermann:(II)I <span class="hljs-number"><span class="hljs-number">33</span></span>: ireturn</code> </pre> <br> è¿è¡ŒJavaå­—èŠ‚ç çš„Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰æ˜¯â€‹â€‹ä¸€å°å…·æœ‰å †æ ˆå’Œå¯„å­˜å™¨çš„ç»„åˆçš„è®¡ç®—æœºï¼šæœ‰ä¸€ä¸ªæ“ä½œæ•°å †æ ˆï¼ˆSTACKï¼‰ï¼Œåœ¨å…¶ä¸­æ“ä½œå€¼ï¼Œè¿˜æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆLOCALSï¼‰ï¼Œå¯ä»¥åœ¨å…¶ä¸­å­˜å‚¨è¿™äº›å€¼ã€‚ è¯¥å‡½æ•°ä»¥å±€éƒ¨å˜é‡çš„å‰Nä¸ªæ’æ§½ä¸­çš„Nä¸ªå‚æ•°å¼€å¤´ã€‚ åœ¨æ‰§è¡Œæ—¶ï¼Œå‡½æ•°å°†æ•°æ®ç§»åˆ°å †æ ˆä¸Šï¼Œå¯¹å…¶è¿›è¡Œæ“ä½œï¼Œç„¶åå°†å…¶æ”¾å›å˜é‡ä¸­ï¼Œç„¶åè°ƒç”¨returnå°†å€¼ä»æ“ä½œæ•°å †æ ˆè¿”å›ç»™è°ƒç”¨æ–¹ã€‚ <br><br> å¦‚æœæ³¨é‡Šä¸Šé¢çš„å­—èŠ‚ç ä»¥è¡¨ç¤ºåœ¨å †æ ˆå’Œå±€éƒ¨å˜é‡è¡¨ä¹‹é—´ç§»åŠ¨çš„å€¼ï¼Œåˆ™å®ƒå°†çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="java hljs"> BYTECODE LOCALS STACK |a0|a1| | <span class="hljs-number"><span class="hljs-number">0</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>: ifne <span class="hljs-number"><span class="hljs-number">8</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">4</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">5</span></span>: iconst_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">6</span></span>: iadd |a0|a1| |v1| <span class="hljs-number"><span class="hljs-number">7</span></span>: ireturn |a0|a1| | <span class="hljs-number"><span class="hljs-number">8</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">9</span></span>: ifne <span class="hljs-number"><span class="hljs-number">20</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">12</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">13</span></span>: iconst_1 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">14</span></span>: isub |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">15</span></span>: iconst_1 |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">16</span></span>: invokestatic ackermann:(II)I |a0|a1| |v3| <span class="hljs-number"><span class="hljs-number">19</span></span>: ireturn |a0|a1| | <span class="hljs-number"><span class="hljs-number">20</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">21</span></span>: iconst_1 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">22</span></span>: isub |a0|a1| |v4| <span class="hljs-number"><span class="hljs-number">23</span></span>: iload_0 |a0|a1| |v4|a0| <span class="hljs-number"><span class="hljs-number">24</span></span>: iload_1 |a0|a1| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">25</span></span>: iconst_1 |a0|a1| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">26</span></span>: isub |a0|a1| |v4|a0|v5| <span class="hljs-number"><span class="hljs-number">27</span></span>: invokestatic ackermann:(II)I |a0|a1| |v4|v6| <span class="hljs-number"><span class="hljs-number">30</span></span>: invokestatic ackermann:(II)I |a0|a1| |v7| <span class="hljs-number"><span class="hljs-number">33</span></span>: ireturn |a0|a1| |</code> </pre> <br> åœ¨è¿™é‡Œï¼Œ <code>a1</code>ä½¿ç”¨<code>a0</code>å’Œ<code>a1</code>å‘å‡½æ•°æä¾›äº†å‚æ•°ï¼Œè¿™äº›å‚æ•°å­˜å‚¨åœ¨å‡½æ•°çš„æœ€å¼€å§‹çš„LOCALSè¡¨ä¸­ã€‚  <code>1</code>è¡¨ç¤ºé€šè¿‡<code>iconst_1</code>åŠ è½½çš„<code>iconst_1</code> ï¼Œä»¥åŠä»<code>v1</code>åˆ°<code>v7</code>è®¡ç®—ä¸­é—´å€¼ã€‚ æœ‰ä¸‰ä¸ª<code>ireturn</code>æŒ‡ä»¤è¿”å›<code>v1</code> ï¼Œ <code>v3</code>å’Œ<code>v7</code> ã€‚ æ­¤å‡½æ•°æœªå®šä¹‰å…¶ä»–å±€éƒ¨å˜é‡ï¼Œå› æ­¤LOCALSæ•°ç»„ä»…å­˜å‚¨è¾“å…¥å‚æ•°ã€‚ <br><br> ä¸Šé¢ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å‡½æ•°çš„ä¸¤ä¸ªå˜ä½“<code>ackermannA</code>å’Œ<code>ackermannB</code> ã€‚ æ‰€ä»¥ä»–ä»¬çœ‹å­—èŠ‚ç ï¼š <br><br><pre> <code class="java hljs"> BYTECODE LOCALS STACK |a0|a1| | <span class="hljs-number"><span class="hljs-number">0</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">1</span></span>: istore_2 |a0|a1|a1| | <span class="hljs-number"><span class="hljs-number">2</span></span>: iload_0 |a0|a1|a1| |a0| <span class="hljs-number"><span class="hljs-number">3</span></span>: istore_3 |a0|a1|a1|a0| | <span class="hljs-number"><span class="hljs-number">4</span></span>: iload_3 |a0|a1|a1|a0| |a0| <span class="hljs-number"><span class="hljs-number">5</span></span>: ifne <span class="hljs-number"><span class="hljs-number">12</span></span> |a0|a1|a1|a0| | <span class="hljs-number"><span class="hljs-number">8</span></span>: iload_2 |a0|a1|a1|a0| |a1| <span class="hljs-number"><span class="hljs-number">9</span></span>: iconst_1 |a0|a1|a1|a0| |a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">10</span></span>: iadd |a0|a1|a1|a0| |v1| <span class="hljs-number"><span class="hljs-number">11</span></span>: ireturn |a0|a1|a1|a0| | <span class="hljs-number"><span class="hljs-number">12</span></span>: iload_2 |a0|a1|a1|a0| |a1| <span class="hljs-number"><span class="hljs-number">13</span></span>: ifne <span class="hljs-number"><span class="hljs-number">24</span></span> |a0|a1|a1|a0| | <span class="hljs-number"><span class="hljs-number">16</span></span>: iload_3 |a0|a1|a1|a0| |a0| <span class="hljs-number"><span class="hljs-number">17</span></span>: iconst_1 |a0|a1|a1|a0| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">18</span></span>: isub |a0|a1|a1|a0| |v2| <span class="hljs-number"><span class="hljs-number">19</span></span>: iconst_1 |a0|a1|a1|a0| |v2| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">20</span></span>: invokestatic ackermannA:(II)I |a0|a1|a1|a0| |v3| <span class="hljs-number"><span class="hljs-number">23</span></span>: ireturn |a0|a1|a1|a0| | <span class="hljs-number"><span class="hljs-number">24</span></span>: iload_3 |a0|a1|a1|a0| |a0| <span class="hljs-number"><span class="hljs-number">25</span></span>: iconst_1 |a0|a1|a1|a0| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">26</span></span>: isub |a0|a1|a1|a0| |v4| <span class="hljs-number"><span class="hljs-number">27</span></span>: iload_3 |a0|a1|a1|a0| |v4|a0| <span class="hljs-number"><span class="hljs-number">28</span></span>: iload_2 |a0|a1|a1|a0| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">29</span></span>: iconst_1 |a0|a1|a1|a0| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">30</span></span>: isub |a0|a1|a1|a0| |v4|a0|v5| <span class="hljs-number"><span class="hljs-number">31</span></span>: invokestatic ackermannA:(II)I |a0|a1|a1|a0| |v4|v6| <span class="hljs-number"><span class="hljs-number">34</span></span>: invokestatic ackermannA:(II)I |a0|a1|a1|a0| |v7| <span class="hljs-number"><span class="hljs-number">37</span></span>: ireturn |a0|a1|a1|a0| |</code> </pre> <br> ç”±äºæºä»£ç æ¥å—ä¸¤ä¸ªå‚æ•°å¹¶å°†å®ƒä»¬æ”¾åœ¨å±€éƒ¨å˜é‡ä¸­ï¼Œå› æ­¤å­—èŠ‚ç å…·æœ‰ç›¸åº”çš„æŒ‡ä»¤ï¼Œå¯ä»æœ¬åœ°ç´¢å¼•0å’Œ1åŠ è½½å‚æ•°å€¼å¹¶å°†å…¶ä¿å­˜åœ¨ç´¢å¼•2å’Œ3ä¸‹ã€‚ä½†æ˜¯ï¼Œå­—èŠ‚ç å¯¹å±€éƒ¨å˜é‡çš„åç§°ä¸æ„Ÿå…´è¶£ï¼šå®ƒå¯ä¸ä¸LOCALSæ•°ç»„ä¸­çš„ç´¢å¼•å®Œå…¨ç›¸åŒã€‚ å› æ­¤ï¼Œ <code>ackermannA</code>å’Œ<code>ackermannB</code>å°†å…·æœ‰ç›¸åŒçš„å­—èŠ‚ç ã€‚ è¿™æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨è¯­ä¹‰ä¸Šæ˜¯ç­‰æ•ˆçš„ï¼ <br><br> ä½†æ˜¯ï¼Œ <code>ackermannA</code>å’Œ<code>ackermannB</code>ä¸èƒ½ä¸åŸå§‹<code>ackermann</code>ç¼–è¯‘åˆ°ç›¸åŒçš„å­—èŠ‚ç ä¸­ï¼šå°½ç®¡å­—èŠ‚ç æ˜¯ä»å±€éƒ¨å˜é‡çš„åç§°ä¸­æŠ½è±¡å‡ºæ¥çš„ï¼Œä½†æ˜¯ä»åŠ è½½å’Œä¿å­˜åˆ°è¿™äº›å˜é‡æˆ–ä»è¿™äº›å˜é‡ä¸­ä¿å­˜åï¼Œå®ƒä»ç„¶æ²¡æœ‰å®Œå…¨æŠ½è±¡å‡ºæ¥ã€‚ å°½ç®¡è¿™äº›å€¼ä¸ä¼šå½±å“ç¨‹åºçš„å®é™…è¡Œä¸ºï¼Œä½†å¯¹æˆ‘ä»¬æ¥è¯´ä»ç„¶å¾ˆé‡è¦ã€‚ <br><br> é™¤äº†ç¼ºä¹ä»åŠ è½½/ä¿å­˜ä¸­æŠ½è±¡çš„æ¦‚å¿µå¤–ï¼Œå­—èŠ‚ç è¿˜æœ‰å¦ä¸€ä¸ªç¼ºç‚¹ï¼šåƒå¤§å¤šæ•°çº¿æ€§æ±‡ç¼–ç¨‹åºä¸€æ ·ï¼Œå®ƒåœ¨ç´§å‡‘æ€§æ–¹é¢è¿›è¡Œäº†éå¸¸ä¼˜åŒ–ï¼Œåœ¨è¿›è¡Œä¼˜åŒ–æ—¶å¾ˆéš¾ä¿®æ”¹å®ƒã€‚ <br><br> ä¸ºäº†æ›´æ¸…æ¥šï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åŸå§‹<code>ackermann</code>å‡½æ•°çš„å­—èŠ‚ç ï¼š <br><br><pre> <code class="java hljs"> BYTECODE LOCALS STACK |a0|a1| | <span class="hljs-number"><span class="hljs-number">0</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>: ifne <span class="hljs-number"><span class="hljs-number">8</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">4</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">5</span></span>: iconst_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">6</span></span>: iadd |a0|a1| |v1| <span class="hljs-number"><span class="hljs-number">7</span></span>: ireturn |a0|a1| | <span class="hljs-number"><span class="hljs-number">8</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">9</span></span>: ifne <span class="hljs-number"><span class="hljs-number">20</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">12</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">13</span></span>: iconst_1 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">14</span></span>: isub |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">15</span></span>: iconst_1 |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">16</span></span>: invokestatic ackermann:(II)I |a0|a1| |v3| <span class="hljs-number"><span class="hljs-number">19</span></span>: ireturn |a0|a1| | <span class="hljs-number"><span class="hljs-number">20</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">21</span></span>: iconst_1 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">22</span></span>: isub |a0|a1| |v4| <span class="hljs-number"><span class="hljs-number">23</span></span>: iload_0 |a0|a1| |v4|a0| <span class="hljs-number"><span class="hljs-number">24</span></span>: iload_1 |a0|a1| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">25</span></span>: iconst_1 |a0|a1| |v4|a0|a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">26</span></span>: isub |a0|a1| |v4|a0|v5| <span class="hljs-number"><span class="hljs-number">27</span></span>: invokestatic ackermann:(II)I |a0|a1| |v4|v6| <span class="hljs-number"><span class="hljs-number">30</span></span>: invokestatic ackermann:(II)I |a0|a1| |v7| <span class="hljs-number"><span class="hljs-number">33</span></span>: ireturn |a0|a1| |</code> </pre> <br> è®©æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªç²—ç•¥çš„æ›´æ”¹ï¼šè®©å‡½æ•°è°ƒç”¨<code>30: invokestatic ackermann:(II)I</code>ä¸ä½¿ç”¨å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ ç„¶åå¯ä»¥ç”¨ç­‰æ•ˆçš„è°ƒç”¨<code>30: invokestatic ackermann2:(I)I</code>ä»£æ›¿æ­¤è°ƒç”¨<code>30: invokestatic ackermann2:(I)I</code> ï¼Œå®ƒä»…æ¥å—ä¸€ä¸ªå‚æ•°ã€‚ è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„ä¼˜åŒ–ï¼Œå®ƒå…è®¸ä½¿ç”¨â€œæ­»ä»£ç åˆ é™¤â€æ¥æŠ›å‡ºç”¨äºè®¡ç®—ç¬¬ä¸€ä¸ªå‚æ•°çš„ä»»ä½•ä»£ç <code>30: invokestatic ackermann:(II)I</code> <br><br> ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦æ›¿æ¢æŒ‡ä»¤<code>30</code> ï¼Œè¿˜éœ€è¦æŸ¥çœ‹æŒ‡ä»¤åˆ—è¡¨ï¼Œäº†è§£ç¬¬ä¸€ä¸ªå‚æ•°çš„è®¡ç®—ä½ç½®ï¼ˆ <code>STACK</code> <code>v4</code> ï¼‰ï¼Œå¹¶å°†å…¶åˆ é™¤ã€‚ æˆ‘ä»¬ä»æŒ‡ä»¤<code>30</code>è¿”å›åˆ°<code>22</code> ï¼Œä»æŒ‡ä»¤<code>22</code>è¿”å›åˆ°<code>21</code>å’Œ<code>20</code> ã€‚ æœ€ç»ˆç‰ˆæœ¬ï¼š <br><br><pre> <code class="java hljs"> BYTECODE LOCALS STACK |a0|a1| | <span class="hljs-number"><span class="hljs-number">0</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>: ifne <span class="hljs-number"><span class="hljs-number">8</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">4</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">5</span></span>: iconst_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">6</span></span>: iadd |a0|a1| |v1| <span class="hljs-number"><span class="hljs-number">7</span></span>: ireturn |a0|a1| | <span class="hljs-number"><span class="hljs-number">8</span></span>: iload_1 |a0|a1| |a1| <span class="hljs-number"><span class="hljs-number">9</span></span>: ifne <span class="hljs-number"><span class="hljs-number">20</span></span> |a0|a1| | <span class="hljs-number"><span class="hljs-number">12</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">13</span></span>: iconst_1 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">14</span></span>: isub |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">15</span></span>: iconst_1 |a0|a1| |v2| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">16</span></span>: invokestatic ackermann:(II)I |a0|a1| |v3| <span class="hljs-number"><span class="hljs-number">19</span></span>: ireturn |a0|a1| | - <span class="hljs-number"><span class="hljs-number">20</span></span>: iload_0 |a0|a1| | - <span class="hljs-number"><span class="hljs-number">21</span></span>: iconst_1 |a0|a1| | - <span class="hljs-number"><span class="hljs-number">22</span></span>: isub |a0|a1| | <span class="hljs-number"><span class="hljs-number">23</span></span>: iload_0 |a0|a1| |a0| <span class="hljs-number"><span class="hljs-number">24</span></span>: iload_1 |a0|a1| |a0|a1| <span class="hljs-number"><span class="hljs-number">25</span></span>: iconst_1 |a0|a1| |a0|a1| <span class="hljs-number"><span class="hljs-number">1</span></span>| <span class="hljs-number"><span class="hljs-number">26</span></span>: isub |a0|a1| |a0|v5| <span class="hljs-number"><span class="hljs-number">27</span></span>: invokestatic ackermann:(II)I |a0|a1| |v6| - <span class="hljs-number"><span class="hljs-number">30</span></span>: invokestatic ackermann:(II)I |a0|a1| |v7| + <span class="hljs-number"><span class="hljs-number">30</span></span>: invokestatic ackermann2:(I)I |a0|a1| |v7| <span class="hljs-number"><span class="hljs-number">33</span></span>: ireturn |a0|a1| |</code> </pre> <br> æˆ‘ä»¬ä»ç„¶å¯ä»¥å¯¹ç®€å•çš„<code>ackermann</code>å‡½æ•°è¿›è¡Œå¦‚æ­¤ç®€å•çš„æ›´æ”¹ã€‚ ä½†æ˜¯ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„å¤§å‹åŠŸèƒ½ä¸­ï¼Œè¿›è¡Œå¤§é‡ç›¸äº’å…³è”çš„æ›´æ”¹å°†å˜å¾—æ›´åŠ å›°éš¾ã€‚ é€šå¸¸ï¼Œå¯¹ç¨‹åºè¿›è¡Œçš„ä»»ä½•å°çš„è¯­ä¹‰æ›´æ”¹éƒ½å¯èƒ½éœ€è¦åœ¨æ•´ä¸ªå­—èŠ‚ç ä¸­è¿›è¡Œå¤§é‡æ›´æ”¹ã€‚ <br><br> æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡åˆ†æLOCALSå’ŒSTACKä¸­çš„å€¼è¿›è¡Œäº†ä¸Šè¿°æ›´æ”¹ï¼šæˆ‘ä»¬è§‚å¯Ÿäº†å¦‚ä½•å°†<code>v4</code>ä»æŒ‡ä»¤<code>22</code>ä¼ é€’ç»™æŒ‡ä»¤<code>30</code> ï¼Œä»¥åŠ<code>22</code>å°†æ•°æ®ä»<code>a0</code>æŒ‡ä»¤<code>21</code>å’Œ<code>20</code>ä¼ é€’ç»™<code>a0</code>å’Œ<code>1</code> ã€‚ è¿™äº›å€¼æ ¹æ®å›¾å½¢åŸç†åœ¨LOCALSå’ŒSTACKä¹‹é—´ä¼ è¾“ï¼šä»è®¡ç®—è¯¥å€¼çš„æŒ‡ä»¤åˆ°å…¶è¿›ä¸€æ­¥ä½¿ç”¨çš„åœ°æ–¹ã€‚ <br><br> åƒæˆ‘ä»¬çš„ASTä¸­çš„â€œ <code>Ident</code> / <code>Assign</code>å¯¹ä¸€æ ·ï¼Œåœ¨LOCALSå’ŒSTACKä¹‹é—´ä¼ é€’çš„å€¼åœ¨å€¼çš„è®¡ç®—ç‚¹ä¸ä½¿ç”¨ç‚¹ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå›¾å½¢ã€‚ é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸å¼€å§‹ç›´æ¥ä½¿ç”¨å›¾å½¢å‘¢ï¼Ÿ <br><br><h2> æ•°æ®æµå›¾ </h2><br> æ•°æ®æµå›¾æ˜¯ç»§å­—èŠ‚ç ä¹‹åçš„ä¸‹ä¸€ä¸ªæŠ½è±¡çº§åˆ«ã€‚ å¦‚æœä½¿ç”¨<code>Ident</code> / <code>Assign</code>å…³ç³»æ‰©å±•è¯­æ³•æ ‘ï¼Œæˆ–è€…è·Ÿè¸ªå­—èŠ‚ç å¦‚ä½•åœ¨LOCALSå’ŒSTACKä¹‹é—´ç§»åŠ¨å€¼ï¼Œåˆ™å¯ä»¥æ„å»ºå›¾å½¢ã€‚ å¯¹äº<code>ackermann</code>å‡½æ•°<code>ackermann</code>å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ad/217/5f7/5ad2175f73cf13fa7e47fb521a9aab1a.png"><br><br> ä¸ASTæˆ–Javaå †æ ˆå­—èŠ‚ç å­—èŠ‚ç ä¸åŒï¼Œæ•°æ®æµå›¾ä¸ä½¿ç”¨â€œå±€éƒ¨å˜é‡â€çš„æ¦‚å¿µï¼šç›¸åï¼Œè¯¥å›¾åŒ…å«æ¯ä¸ªå€¼ä¸å…¶ä½¿ç”¨ä½ç½®ä¹‹é—´çš„ç›´æ¥è¿æ¥ã€‚ åˆ†æå­—èŠ‚ç æ—¶ï¼Œé€šå¸¸éœ€è¦æŠ½è±¡è§£é‡ŠLOCALSå’ŒSTACKä»¥ä¾¿äº†è§£å€¼çš„ç§»åŠ¨æ–¹å¼ã€‚  ASTåˆ†æåŒ…æ‹¬è·Ÿè¸ªæ ‘å¹¶ä½¿ç”¨åŒ…å«<code>Assign</code> / <code>Ident</code>å…³è”çš„ç¬¦å·è¡¨ï¼› åˆ†ææ•°æ®æµå›¾é€šå¸¸æ˜¯å¯¹è½¬æ¢çš„ç›´æ¥è·Ÿè¸ª-â€œç§»åŠ¨å€¼â€çš„çº¯å‡€æƒ³æ³•ï¼Œè€Œæ— éœ€æä¾›ç¨‹åºçš„å¤–å£³ã€‚ <br><br>  <code>ackermann</code>ä¹Ÿæ¯”çº¿æ€§å­—èŠ‚ç æ›´æ˜“äºæ“ä½œï¼šç”¨<code>ackermann</code>è°ƒç”¨æ›¿æ¢ä¸º<code>ackermann</code>è°ƒç”¨çš„èŠ‚ç‚¹å¹¶<code>ackermann2</code>å…¶ä¸­ä¸€ä¸ªå‚æ•°åªæ˜¯æ›´æ”¹å›¾èŠ‚ç‚¹ï¼ˆæ ‡è®°ä¸ºç»¿è‰²ï¼‰å¹¶åˆ é™¤è¾“å…¥é“¾æ¥ä¹‹ä¸€å’Œä¼ é€’èŠ‚ç‚¹ï¼ˆæ ‡è®°ä¸ºçº¢è‰²ï¼‰ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b70/c2d/90d/b70c2d90d886bd7c90cdfbb3cb03b42d.png"><br><br> å¦‚æ‚¨æ‰€è§ï¼Œç¨‹åºä¸­çš„å¾®å°å˜åŒ–ï¼ˆç”¨<code>ackermann(int n, int m)</code>æ›¿æ¢<code>ackermann(int n, int m)</code> <code>ackermann2(int m)</code> ï¼‰å˜æˆäº†æ•°æ®æµå›¾ä¸­ç›¸å¯¹æœ¬åœ°åŒ–çš„å˜åŒ–ã€‚ <br><br> é€šå¸¸ï¼Œä½¿ç”¨å›¾å½¢æ¯”ä½¿ç”¨çº¿æ€§å­—èŠ‚ç æˆ–ASTè¦å®¹æ˜“å¾—å¤šï¼šå®ƒä»¬æ˜“äºåˆ†æå’Œæ›´æ”¹ã€‚ <br><br> å›¾çš„æè¿°ä¸­æ²¡æœ‰å¤ªå¤šç»†èŠ‚ï¼šé™¤äº†å›¾çš„å®é™…ç‰©ç†è¡¨ç¤ºä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–çš„çŠ¶æ€å’Œæµæ§åˆ¶å»ºæ¨¡æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨æœ¬æ–‡çš„èŒƒå›´ä¹‹å†…ç”šè‡³æ›´å›°éš¾ã€‚ æˆ‘è¿˜çœç•¥äº†è®¸å¤šæœ‰å…³è½¬æ¢å›¾å½¢çš„ç»†èŠ‚ï¼Œä¾‹å¦‚ï¼Œæ·»åŠ å’Œåˆ é™¤é“¾æ¥ï¼Œæ­£å‘å’Œåå‘è¿‡æ¸¡ï¼Œæ°´å¹³å’Œå‚ç›´è¿‡æ¸¡ï¼ˆåœ¨å®½åº¦å’Œæ·±åº¦ä¸Šï¼‰ç­‰ã€‚å¦‚æœæ‚¨ç ”ç©¶äº†ç®—æ³•ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥å¯¹æ‰€æœ‰è¿™äº›éƒ½ç†Ÿæ‚‰ã€‚ <br><br> æœ€åï¼Œæˆ‘ä»¬çœç•¥äº†ä»çº¿æ€§å­—èŠ‚ç åˆ°å›¾å½¢ï¼Œç„¶åä»å›¾å½¢å›åˆ°å­—èŠ‚ç çš„è½¬æ¢ç®—æ³•ã€‚ è¿™æœ¬èº«æ˜¯ä¸€é¡¹æœ‰è¶£çš„ä»»åŠ¡ï¼Œä½†æˆ‘ä»¬å°†å…¶ç•™ç»™æ‚¨è¿›è¡Œç‹¬ç«‹ç ”ç©¶ã€‚ <br><br><h2> åˆ†ææ–¹æ³• </h2><br> åœ¨äº†è§£äº†ç¨‹åºçš„æ€æƒ³ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œåˆ†æï¼šæ‰¾å‡ºä¸€äº›äº‹å®ï¼Œè¿™äº›äº‹å®å°†ä½¿æ‚¨èƒ½å¤Ÿåœ¨ä¸æ›´æ”¹ç¨‹åºè¡Œä¸ºçš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚ ä¸Šé¢è®¨è®ºçš„è®¸å¤šä¼˜åŒ–éƒ½æ˜¯åŸºäºå¯¹è¯¥ç¨‹åºçš„åˆ†æï¼š <br><br><ul><li> å¸¸é‡æŠ˜å ï¼šè¡¨è¾¾å¼çš„ç»“æœæ˜¯å¦ä¸ºå·²çŸ¥çš„å¸¸é‡å€¼ï¼Ÿ è¡¨è¾¾å¼è®¡ç®—æ˜¯å¦çº¯å‡€ï¼Ÿ <br></li><li> ç±»å‹è½¬æ¢å’Œå†…è”ï¼šæ–¹æ³•è°ƒç”¨ç±»å‹æ˜¯å¦æ˜¯å…·æœ‰è¢«è°ƒç”¨æ–¹æ³•çš„å•ä¸ªå®ç°çš„ç±»å‹ï¼Ÿ <br></li><li>  :     ? <br></li><li>   :    Â«Â»?    -     ?  ? <br></li><li>  :  ,        ? <br></li></ul><br>       ,    ,      ,      .       , ,   ,       . <br><br> , , ,  â€”      ,       .              . <br><br><h2>   (Inference Lattice) </h2><br>    ,       .  , Â«Â»  -    : <br><br><ul><li>   <code>Integer</code> ? <code>String</code> ? <code>Array[Float]</code> ? <code>PrintLogger</code> ? <br></li><li>  <code>CharSequence</code> ?      <code>String</code> ,     -  <code>StringBuilder</code> ? <br></li><li>   <code>Any</code> ,     ,    ? <br></li></ul><br>             : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/258/4b1/b4d/2584b1b4d5769ebd78d1dcd84e4f686a.png"><br><br>        :   ,    <code>"hello"</code>   <code>String</code> ,    <code>String</code>   <code>CharSequence</code> .        <code>"hello"</code> ,      (Singleton Type) â€” .    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/416/872/547/416872547323d84b9b682852ea1f4dcc.png"><br><br>       ,  ,      .   ,   .   ,        , , <code>String</code>  <code>StringBuilder</code> ,    ,       : <code>CharSequence</code> .   ,    <code>0</code> ,  <code>1</code> ,  <code>2</code> ,    ,   <code>Integer</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76a/79c/cc2/76a79ccc288b609397bdc4013a33f7b5.png"><br><br>      , ,     : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/479/112/0ef/4791120ef75231854b348596b49ab700.png"><br><br>   ,    ,        .  ,     . <br><br><h2>  count </h2><br>      <code>main</code> : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, multiplied = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) logger.log(count); count += <span class="hljs-number"><span class="hljs-number">1</span></span>; multiplied *= count; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ...; }</code> </pre> <br>      <code>ackermann</code> ,    <code>count</code> , <code>multiplied</code>  <code>logger</code> .     : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/383/aa5/a19/383aa5a19df21ddbbe6f13555fb4ea1d.png"><br><br>  ,  <code>count</code>   <code>0</code>  <code>block0</code> .      <code>block1</code> ,   ,    <code>count &lt; n</code> :  ,    <code>block3</code>  <code>return</code> ,    <code>block2</code> ,   <code>count</code>  <code>1</code>     <code>count</code> ,    <code>block1</code>   .      ,  <code>&lt;</code>   <code>false</code> ,     <code>block3</code>   . <br><br>   ? <br><br><ul><li>   <code>block0</code> .  ,  <code>count = 0.</code> <br></li><li>   <code>block1</code> ,   ,   <code>n</code> (  ,      <code>Integer</code> ),     ,   <code>if</code> .   <code>block2</code>  <code>block3.</code> </li><li>  <code>block3</code> ,   ,    <code>block1b</code> ,      <code>block2</code> ,   ,     <code>block1c</code> .  ,  <code>block2</code>  <code>count</code> ,    1      <code>count.</code> </li><li>  ,  <code>count</code>    <code>0</code>  <code>1</code> :        <code>count</code>  <code>Integer.</code> </li><li>  :   <code>block1</code>   <code>n</code>  <code>count</code>  <code>Integer</code> . <br></li><li>    <code>block2</code> ,  <code>count</code>   <code>Integer + 1 -&gt; Integer</code> .   ,  <code>count</code>  <code>Integer</code> ,    . <br></li></ul><br><h2>  multiplied </h2><br>      ,   <code>multiplied</code> : <br><br><ul><li>   <code>block0</code> .  ,  <code>multiplied</code>   <code>0.</code> <br></li><li>   <code>block1</code> ,     ,      .   <code>block2</code>  <code>block3</code> (  ). <br></li><li>  <code>block2</code> ,    <code>block2</code> ( <code>0</code> )  <code>count</code> (    <code>Integer</code> ).  <code>0 * Integer -&gt; 0</code> ,   <code>multiplied</code>   <code>0.</code> <br></li><li>    <code>block1</code>  <code>block2</code> . <code>multiplied</code>     <code>0</code> ,    . <br></li></ul><br>  <code>multiplied</code>   <code>0</code> ,  , : <br><br><ul><li> <code>multiplied &lt; 100</code>    <code>true.</code> <br></li><li> <code>if (multiplied &lt; 100) logger.log(count);</code>    <code>logger.log(count)</code> . <br></li><li>    ,    <code>multiplied</code> ,     ,      <code>0</code> . <br></li></ul><br>    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e9f/5f2/e95/e9f5f2e95c4dc3bfc64d54834c2a19ea.png"><br><br>     : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd4/625/fdb/fd4625fdb669e5d9e0c4d28a71e67f85.png"><br><br>       : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ logger.log(count); count += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ...; }</code> </pre> <br>       ,      ,   ,  ,      . <br><br>  <code>multiplied -&gt; 0</code>      , ,   .  ,     ,      .         ,           . <br><br>     ,       .  : <br><br><ul><li>              . <br></li><li>        . <br></li><li>             . <br></li><li>        :        . <br></li></ul><br>        <code>count</code> ,   <code>multiplied</code> .    ,  <code>multiplied</code>   <code>count</code> ,  <code>count</code>    <code>multiplied</code> .        ,      . <br><br>  ,   â€”  :       ,      .  ,      ( )      .          . <br><br>         <code>while</code> ,    ,    <code>O(  )</code> .     (,       )    ,     ,    . <br><br>           ,    . <br><br><h2>    </h2><br>        ,        .      ,   ,                 ,    ,           . <br><br><h2>    </h2><br>       .    : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> called(n, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">called</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * y; }</code> </pre> <br>         : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45a/a32/471/45aa32471c28271c2755e5494a590891.png"><br><br>    <code>main</code> : <br><br><ul><li>  <code>main(n)</code> <br><ul><li>  <code>called(n, 0)</code> <br><ul><li>  <code>x * y</code>  <code>x = n</code>  <code>y = 0</code> </li><li> <code>n * 0</code>  <code>0</code> </li></ul></li><li> <code>called(n, 0)</code>  <code>0</code> </li></ul></li><li> <code>main(n)</code>  <code>0</code> <br></li></ul><br>        ,    ,     .              . <br><br>  ,  <code>called(n, 0)</code>  <code>0</code> ,         : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e8/484/17d/3e848417db361dae9f39425ddeed1a13.png"><br><br>    : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>     :  A  B,  C,  D,  D     C, B, D  A.    A  B  B  A,   A   A,    ,     ! <br><br><h2>    </h2><br>    ,    Java: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Any </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n * factorial(n - <span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre> <br>   <code>n</code>    <code>int</code> ,      <code>Any</code> :     .  ,  <code>factorial</code>  <code>int</code> ( <code>Integer</code>   ).        <code>factorial</code> ,      <code>factorial</code>      <code>factorial</code> ,      !         ? <br><br><h2>   Bottom </h2><br>        <code>Bottom</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/abe/520/44e/abe52044e569bfe201c2d0f6998761ec.png"><br><br>   Â«   ,  ,      Â».  <code>Bottom</code>      <code>factorial</code> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/50b/347/73b/50b34773b36ec9470e3bdb03efaec5eb.png"><br><br><ul><li>   <code>block0</code> . <code>n</code>   <code>Integer</code> , <code>1</code>  <code>1</code> ,   <code>n == 1</code>  ,      <code>true</code>  <code>false</code> . <br></li><li>  <code>true</code>  : <code>return</code>  <code>1</code> . <br></li><li>   <code>false</code>  <code>n - 1</code>  <code>n</code>   <code>Integer</code> . <br></li><li> <code>factorial</code> â€”   ,      <code>Bottom</code> . <br></li><li> <code>*</code>  <code>n: Integer</code>  <code>factorial</code> : <code>Bottom</code>   <code>Bottom</code> . <br></li><li> <code>return</code>  <code>Bottom</code> . </li><li>   <code>factorial</code>  <code>1</code>  <code>Bottom</code> ,           <code>1</code> . <br></li><li>  <code>1</code>      <code>factorial</code> ,      <code>Bottom</code> . <br></li><li> <code>Integer * 1</code>  <code>Integer</code> . <br></li><li> <code>return</code>   <code>Integer</code> . </li><li> <code>factorial</code>   <code>Integer</code>  <code>1</code> ,        <code>Integer</code> . <br></li><li> <i></i>    <code>factorial</code> ,      <code>Integer</code> .  <code>*</code>  <code>n: Integer</code>  <code>factorial: Integer</code> ,    <code>Integer</code> ,     . <br></li></ul><br>     <code>factorial</code>   <code>Integer</code> ,   ,        . <br><br>     ,        .           <code>Bottom</code> ,     ,                   . <br><br>     <code>*</code>  : <br><br><ol><li> <code>(n: Integer) * (factorial: Bottom)</code> <br> </li><li> <code>(n: Integer) * (factorial: 1)</code> <br> </li><li> <code>(n: Integer) * (factorial: Integer)</code> <br> </li></ol><br>        <code>multiplied</code>  ,        <code>O(  )</code> .            , , . <br><br><h2>     </h2><br>     â€”   ,     Â«  Â».      ,        (Â« Â»),  ,        (Â« Â»).     . <br><br>        <code>main</code> : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>, total = <span class="hljs-number"><span class="hljs-number">0</span></span>, multiplied = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (multiplied &gt; <span class="hljs-number"><span class="hljs-number">100</span></span>) count += <span class="hljs-number"><span class="hljs-number">1</span></span>; count += <span class="hljs-number"><span class="hljs-number">1</span></span>; multiplied *= <span class="hljs-number"><span class="hljs-number">2</span></span>; total += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count; }</code> </pre> <br>     ,       <code>if (multiplied &gt; 100)</code>   <code>multiplied *= count</code>  <code>multiplied *= 2</code> .        . <br><br><h2>       </h2><br>   ,       : <br><br><ul><li> <code>multiplied &gt; 100</code>    <code>true</code> ,  <code>count += 1</code>     (Â«Â»). <br></li><li> <code>total</code>    ,       (Â«Â»). <br></li></ul><br>  ,    : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ count += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count; }</code> </pre> <br>   ,     . <br><br>      : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f1/2a1/af5/0f12a1af57586674b9e1a7fb1ae13c86.png"><br><br>    ,    ,    :   <code>block0</code> ,   <code>block1</code> ,    ,    <code>block1b</code> ,    ,    <code>block1c</code> ,   ,      <code>return</code>  <code>block3</code> . <br><br><h2>      </h2><br>        ,     <code>multiplied -&gt; 0</code> ,   : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/92a/1dd/f90/92a1ddf903dcc52cc9966220c56db876.png"><br><br>   : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/906/1ef/09c/9061ef09c209275be5158a8b3184a5bc.png"><br><br>  ,     <code>block1b</code> ( <code>0 &gt; 100</code> )    <code>true</code> .   <code>false</code>   <code>block1c</code> <i></i>     (   <code>if</code> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/587/21e/8e4/58721e8e43fb326379c796593f9bd2a7.png"><br><br> ,   Â« Â» <code>total</code>  <code>&gt;</code> ,  - ,         ,    .   ,       <code>return</code> ,   <i></i>    : <code>&gt;</code> , <code>100</code> , <code>0</code>  <code>block1b</code> , <code>total</code> , <code>0</code> ,  <code>+ 1</code> ,   <code>total</code>  <code>block0</code>  <code>block2</code> .   : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/55b/508/e16/55b508e164d0c4421aa525dcab56e122.png"><br><br>      Â«Â» : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(count &lt; n){ count += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count; }</code> </pre><br><h2> ç»“è®º </h2><br>          : <br><br><ul><li>    -. <br></li><li> ,         . <br></li><li>   ,               .           . <br></li><li>   : Â«Â»      Â«Â»   , , . <br></li><li>      :   ,      . <br></li><li>         ,         . <br></li></ul><br>  ,         ,       . <br><br>        ,     .     .    ,    : <br><br><ul><li> <a href="https://www.amazon.com/Engineering-Compiler-Keith-Cooper/dp/012088478X">Engineering a Compiler by Keith D Cooper &amp; Linda Torczon</a> <br></li><li> <a href="https://www.researchgate.net/profile/Cliff_Click/publication/2394127_Combining_Analyses_Combining_Optimizations/links/0a85e537233956f6dd000000.pdf">Combining Analyses, Combining Optimizations by Cliff Noel Click Jr.</a> <br></li><li> <a href="https://www.amazon.com/Advanced-Compiler-Design-Implementation-Muchnick/dp/1558603204">Advanced Compiler Design and Implementation by Steven Muchnick</a> <br></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN477062/">https://habr.com/ru/post/zh-CN477062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN477050/index.html">é»‘è‰²æ˜ŸæœŸäº”2019ç”¨äºè§†é¢‘ç›‘æ§å’Œäº‘ã€‚</a></li>
<li><a href="../zh-CN477052/index.html">ä¸€ä¸ªç®€å•ç¤ºä¾‹çš„Reactorï¼ŒWebFluxï¼ŒKotlinåç¨‹æˆ–å¼‚æ­¥</a></li>
<li><a href="../zh-CN477054/index.html">Webastoå®£å¸ƒæ¨¡å—åŒ–æ±½è½¦ç”µæ± ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN477058/index.html">ä¼ä¸šæ•æ·ä¿„ç½—æ–¯åœ¨Raiffeisenbank 26/11 +å¹¿æ’­</a></li>
<li><a href="../zh-CN477060/index.html">DataArtå°†ä¸»æŒåœ£å½¼å¾—å ¡å›½ç«‹å¤§å­¦Matmekhç³»ç»Ÿç¼–ç¨‹ç³»ä¸»ä»»Andrei Terekhovçš„å…¬å¼€æ¼”è®²</a></li>
<li><a href="../zh-CN477072/index.html">å®¢æˆ·å¼€å‘æˆ–å¦‚ä½•æˆåŠŸæ¨å‡ºäº§å“ï¼Ÿ</a></li>
<li><a href="../zh-CN477074/index.html">Ariadneçš„è¯é¢˜ï¼šå¦‚ä½•çˆ±ä¸ŠJSR-133ã€‚ YandexæŠ¥å‘Š</a></li>
<li><a href="../zh-CN477078/index.html">WebStorm 2019.3ï¼šæ›´å¿«çš„å¯åŠ¨ï¼Œå¯¹Vue.jsçš„æ”¯æŒå’Œå…¶ä»–æ”¹è¿›</a></li>
<li><a href="../zh-CN477082/index.html">ç¾å›½å›½ä¼šä¸æ‰å…‹ä¼¯æ ¼ï¼šç›‘ç®¡è€…å¯¹Facebookç¨³å®šçš„å¤©ç§¤åº§æå‡ºäº†ä»€ä¹ˆä¸»å¼ </a></li>
<li><a href="../zh-CN477084/index.html">å…¬å¸çš„å¤§è„‘ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>