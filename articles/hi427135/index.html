<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯМЬ ЁЯЪЖ тЩ╗я╕П рдЦреЗрд▓реЛрдВ рдореЗрдВ рдХрдЯрдХрдиреЗрд╕ рдФрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди ЁЯСЫ ЁЯШа ЁЯдЫЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рдореИрдВ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдЖрдк рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рдХрдЯрдХреИрд╕реЗрди рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рд▓реЗрдЦ рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рд╣реИ рдФрд░ рдЗрд╕...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЦреЗрд▓реЛрдВ рдореЗрдВ рдХрдЯрдХрдиреЗрд╕ рдФрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427135/"> <i>рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рдореИрдВ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдЖрдк рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рдХрдЯрдХреИрд╕реЗрди рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</i>  <i>рдпрд╣ рд▓реЗрдЦ рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рд╣реИ рдФрд░ рдЗрд╕реА рд╡рд┐рд╖рдп рдкрд░ рдореИрдВрдиреЗ рдореЙрд╕реНрдХреЛ рдХреЗ рд▓реБрдЖ рдореЗрдВ рдПрдХ рдкреНрд░рд╕реНрддреБрддрд┐ рджреА, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдк рд╡реАрдбрд┐рдпреЛ рджреЗрдЦрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕реЗ рдпрд╣рд╛рдБ</a> рджреЗрдЦ рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред</i> <i><br><br></i>  <i>рд▓реЗрдЦ рдХреЛрдб рд▓реБрдЖ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрд╕рд╛рдиреА рд╕реЗ рдЕрдиреНрдп рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рд╡рд┐рдзрд┐ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде рдЬреЛ рдХреЛрд░рдЯрд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рд╕рднреА рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдирд╣реАрдВ рд╣реИрдВ)ред</i> <i><br></i> <br>  рд▓реЗрдЦ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдПрдХ рддрдВрддреНрд░ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП рдЬреЛ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлреЙрд░реНрдо рдХреЗ рдХрдЯрдХрдиреЗрд╕реЗрд╕ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: <br><br><pre><code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cutscene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(player, npc)</span></span></span></span> player:goTo(npc) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> player:hasCompleted(quest) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> npc:say(<span class="hljs-string"><span class="hljs-string">"You did it!"</span></span>) delay(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) npc:say(<span class="hljs-string"><span class="hljs-string">"Thank you"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> npc:say(<span class="hljs-string"><span class="hljs-string">"Please help me"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h1>  рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ </h1><br>  рдПрдХреНрд╢рди рд╕реАрдХреНрд╡реЗрдВрд╕ рдЕрдХреНрд╕рд░ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдореЗрдВ рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, cutscenes рдореЗрдВ: рдЪрд░рд┐рддреНрд░ рджреБрд╢реНрдорди рд╕реЗ рдорд┐рд▓рддрд╛ рд╣реИ, рдЙрд╕реЗ рдХреБрдЫ рдХрд╣рддрд╛ рд╣реИ, рджреБрд╢реНрдорди рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рдЧреЗрдордкреНрд▓реЗ рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдХреНрд░рдо рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ gif рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ: <br><br><img src="https://habrastorage.org/webt/5k/ry/ik/5kryik8wvq-b4ifoa3k3iobvolw.gif"><br><br>  1. рджрд░рд╡рд╛рдЬрд╛ рдЦреБрд▓рддрд╛ рд╣реИ <br>  2. рдЪрд░рд┐рддреНрд░ рдШрд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ <br>  3. рджрд░рд╡рд╛рдЬрд╛ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ <br>  4. рд╕реНрдХреНрд░реАрди рдзреАрд░реЗ-рдзреАрд░реЗ рдЧрд╣рд░рд╛рддреА рд╣реИ <br>  5. рд╕реНрддрд░ рдмрджрд▓рддрд╛ рд╣реИ <br>  6. рд╕реНрдХреНрд░реАрди рдЪрдордХреАрд▓реА рдлреАрдХреА рдкрдбрд╝ рдЬрд╛рддреА рд╣реИ <br>  7. рдЪрд░рд┐рддреНрд░ рдХреИрдлреЗ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ <br><br>  рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдирдкреАрд╕реА рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдпрд╛ рдмреЙрд╕ рдХреА рд▓рдбрд╝рд╛рдЗрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдмреЙрд╕ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдХрд░рддрд╛ рд╣реИред <br><a name="habracut"></a><br><h1>  рд╕рдорд╕реНрдпрд╛ </h1><br>  рдПрдХ рдорд╛рдирдХ рдЧреЗрдо рд▓реВрдк рдХреА рд╕рдВрд░рдЪрдирд╛ рдПрдХреНрд╢рди рджреГрд╢реНрдпреЛрдВ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдХрдард┐рди рдмрдирд╛рддреА рд╣реИред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЧреЗрдо рд▓реВрдк рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/uc/xs/an/ucxsanil2ovbawdzqehjmfjpja4.png" width="240"><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> game:isRunning() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> processInput() dt = <span class="hljs-built_in"><span class="hljs-built_in">clock</span></span>.delta() update(dt) render() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд cutscene рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: рдЦрд┐рд▓рд╛рдбрд╝реА рдПрдирдкреАрд╕реА рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рддрд╛ рд╣реИ, рдПрдирдкреАрд╕реА рдХрд╣рддрд╛ рд╣реИ: "рдЖрдкрдиреЗ рдпрд╣ рдХрд┐рдпрд╛!", рдФрд░ рдлрд┐рд░ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдард╣рд░рд╛рд╡ рдХреЗ рдмрд╛рдж рдХрд╣рддрд╛ рд╣реИ: "рдзрдиреНрдпрд╡рд╛рдж!"ред  рдПрдХ рдЖрджрд░реНрд╢ рджреБрдирд┐рдпрд╛ рдореЗрдВ, рд╣рдо рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд▓рд┐рдЦреЗрдВрдЧреЗ: <br><br><pre> <code class="lua hljs">player:goTo(npc) npc:say(<span class="hljs-string"><span class="hljs-string">"You did it!"</span></span>) delay(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) npc:say(<span class="hljs-string"><span class="hljs-string">"Thank you"</span></span>)</code> </pre><br>  рдФрд░ рдпрд╣рд╛рдБ рд╣рдо рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдЪрд░рдгреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдореЗрдВ рдХреБрдЫ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИред  рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдВ рдЦрд┐рд▓рд╛рдбрд╝реА рд╕реЗ рдЗрдирдкреБрдЯ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рднреА рдХрд░ рд╕рдХрддреА рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбрд╛рдпрд▓реЙрдЧ рдмреЙрдХреНрд╕ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП)ред  <code>delay</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдПрдХ рд╣реА <code>sleep</code> рдХреЛ рдирд╣реАрдВ рдмреБрд▓рд╛ рд╕рдХрддреЗ <code>sleep</code> - рдРрд╕рд╛ рд▓рдЧреЗрдЧрд╛ рдЬреИрд╕реЗ рдЧреЗрдо рдЬрдореА рд╣реИред <br><br>  рдЖрдЗрдП рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред <br><br><h1>  рдмреВрд▓, рдПрдирдо, рд░рд╛рдЬреНрдп рдорд╢реАрдиреЗрдВ </h1><br>  рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдмреВрд▓, рд▓рд╛рдЗрдиреЛрдВ рдпрд╛ рдПрдирдо рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ред  рдХреЛрдб рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cutsceneState == <span class="hljs-string"><span class="hljs-string">'playerGoingToNpc'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> player:continueGoingTo(npc) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> player:closeTo(npc) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cutsceneState = <span class="hljs-string"><span class="hljs-string">'npcSayingYouDidIt'</span></span> dialogueWindow:show(<span class="hljs-string"><span class="hljs-string">"You did it!"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> cutsceneState == <span class="hljs-string"><span class="hljs-string">'npcSayingYouDidIt'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dialogueWindow:wasClosed() <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cutsceneState = <span class="hljs-string"><span class="hljs-string">'delay'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> ... ... <span class="hljs-comment"><span class="hljs-comment">--   ... end end</span></span></code> </pre><br>  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реНрдкреЗрдЧреЗрдЯреА рдХреЛрдб рдФрд░ рдЗрдл-рдЗрдореЛрд╢рди рдХреА рд▓рдВрдмреА рд╢реНрд░реГрдВрдЦрд▓рд╛рдУрдВ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рдЗрд╕ рддрд░реАрдХреЗ рд╕реЗ рдмрдЪрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред <br><br><h1>  рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рд╕реВрдЪреА </h1><br>  рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕реВрдЪреА рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдХреЗ рд╕рдорд╛рди рд╣реИред  рдПрдХреНрд╢рди рд▓рд┐рд╕реНрдЯ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реВрдЪреА рд╣реИред  рдЧреЗрдо рд▓реВрдк рдореЗрдВ, <code>update</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╡рд░реНрддрдорд╛рди рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╣рдореЗрдВ рдЗрдирдкреБрдЯ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЧреЗрдо рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рднрд▓реЗ рд╣реА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдореЗрдВ рд▓рдВрдмрд╛ рд╕рдордп рд▓рдЧрддрд╛ рд╣реЛред  рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкреВрд░реА рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрдЧрд▓реЗ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред <br><br>  рдХрдЯрдХреАрди рдореЗрдВ рдЬрд┐рд╕реЗ рд╣рдо рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: GoToAction, DialogueAction рдФрд░ DelayActionред <br><br>  рдЖрдЧреЗ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП, рдореИрдВ Lua рдореЗрдВ OOP рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд┐рдбрд┐рд▓рдХреНрд▓рд╛рд╕</a> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛ред <br><br>  рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ <code>DelayAction</code> рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ <code>DelayAction</code> рд╣реИ: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  function DelayAction:initialize(params) self.delay = params.delay self.currentTime = 0 self.isFinished = false end function DelayAction:update(dt) self.currentTime = self.currentTime + dt if self.currentTime &gt; self.delay then self.isFinished = true end end</span></span></code> </pre><br>  <code>ActionList:update</code> рдлрд╝рдВрдХреНрд╢рди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ActionList:update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.isFinished <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> self.currentAction:update(dt) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.currentAction.isFinished <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> self:goToNextAction() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.currentAction <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> self.isFinished = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рд╕реНрд╡рдпрдВ cutscene рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> makeCutsceneActionList(player, npc) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ActionList:<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { GoToAction:<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { entity = player, target = npc }, SayAction:<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { entity = npc, <span class="hljs-type"><span class="hljs-type">text</span></span> = "You did it!" }, DelayAction:<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { delay = <span class="hljs-number"><span class="hljs-number">0.5</span></span> }, SayAction:<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { entity = npc, <span class="hljs-type"><span class="hljs-type">text</span></span> = "Thank you" } } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">-- ... -    actionList:update(dt)</span></span></code> </pre><br>  <i>рдиреЛрдЯ</i> : Lua рдореЗрдВ, <code>someFunction({ ... })</code> рдХреЙрд▓ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <code>someFunction{...}</code> ред  рдпрд╣ рдЖрдкрдХреЛ <code>DelayAction:new{ delay = 0.5 }</code> рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ <code>DelayAction:new{ delay = 0.5 }</code> рдмрдЬрд╛рдп <code>DelayAction:new{ delay = 0.5 }</code> <code>DelayAction:new({delay = 0.5})</code> ред <br><br>  рдпрд╣ рдмрд╣реБрдд рдмреЗрд╣рддрд░ рд▓рдЧ рд░рд╣рд╛ рд╣реИред  рдХреЛрдб рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдХреНрд░рдо рджрд┐рдЦрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рд╣рдо рдПрдХ рдирдИ рдХреНрд░рд┐рдпрд╛ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдЖрд╕рд╛рдиреА рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  <code>DelayAction</code> рдХрдХреНрд╖рд╛рдПрдВ рдмрдирд╛рдиреЗ рдореЗрдВ рдпрд╣ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ рдХрд┐ <code>DelayAction</code> рдХреЛ рдФрд░ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред <br><br>  рдореИрдВ рдЖрдкрдХреЛ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдПрдХреНрд╢рди рд▓рд┐рд╕реНрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрди рдорд┐рдбрд┐рд▓рдбрд┐рдЪ рдХреА рдкреНрд░рд╕реНрддреБрддрд┐ рджреЗрдЦреЗрдВ, рдЬреЛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/o6CaB-hmqoE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕реВрдЪреА рдЖрдо рддреМрд░ рдкрд░ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИред  рдореИрдВрдиреЗ рдЙрдиреНрд╣реЗрдВ рдХрд╛рдлреА рд╕рдордп рддрдХ рдЕрдкрдиреЗ рдЦреЗрд▓ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдФрд░ рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░ рдЦреБрд╢реА рд╣реБрдИред  рд▓реЗрдХрд┐рди рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ рдХрдорд┐рдпрд╛рдВ рднреА рд╣реИрдВред  рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдо рдХреБрдЫ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдХрдЯрдХрд┐рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cutscene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(player, npc)</span></span></span></span> player:goTo(npc) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> player:hasCompleted(quest) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> npc:say(<span class="hljs-string"><span class="hljs-string">"You did it!"</span></span>) delay(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) npc:say(<span class="hljs-string"><span class="hljs-string">"Thank you"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> npc:say(<span class="hljs-string"><span class="hljs-string">"Please help me"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдПрдХ / рдЕрдиреНрдп рд╕рд┐рдореБрд▓реЗрд╢рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЧреИрд░-рд░реЗрдЦреАрдп рд╕реВрдЪрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЯреИрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░, рдХреБрдЫ рд╢рд░реНрдд рдХреЗ рджреНрд╡рд╛рд░рд╛, рдЕрдЧрд▓реА рдХреНрд░рд┐рдпрд╛ рдкрд░ рдЬрд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдПрдХ рдРрд╕реЗ рдХрд╛рд░реНрдп рдкрд░ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рдЯреИрдЧ рд╣реЛред  рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЙрдкрд░реЛрдХреНрдд рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдкрдврд╝рдирд╛ рдФрд░ рд▓рд┐рдЦрдирд╛ рдЗрддрдирд╛ рдЖрд╕рд╛рди рдирд╣реАрдВ рд╣реИред <br><br>  Lua coroutines рдЗрд╕ рдХреЛрдб рдХреЛ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВред <br><br><h1>  Korutiny </h1><br><h2>  рд▓реБрдЖ рдореЗрдВ рдХреЛрд░реБрдЖ рдореВрд▓ рдмрд╛рддреЗрдВ </h2><br>  рдХреЛрд░реБрдЯрд┐рди рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬрд┐рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдмрд╛рдж рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдореБрдЦреНрдп рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╣реА рдзрд╛рдЧреЗ рдореЗрдВ рдХреЛрд░рдЖрдЙрдЯ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдирдпрд╛ рдзрд╛рдЧрд╛ рдХрднреА рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  <code>coroutine.yield</code> рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <code>coroutine.yield</code> рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП - <code>coroutine.resume</code> ред  рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>) coroutine.<span class="hljs-built_in"><span class="hljs-built_in">yield</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"world!"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(f) coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(c) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"uhh..."</span></span>) coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(c)</code> </pre><br>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ: <br><br><pre> рдирдорд╕реНрддреЗ
 рдЙрд╣ ...
 рджреБрдирд┐рдпрд╛
</pre><br><br>  рдпрд╣рд╛рдБ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо <code>coroutine.create</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>coroutine.create</code> рдмрдирд╛рддреЗ рд╣реИрдВред  рдЗрд╕ рдХреЙрд▓ рдХреЗ рдмрд╛рдж, рдХреЙрд░рдЯрд┐рди рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рдРрд╕рд╛ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЗрд╕реЗ <code>coroutine.resume</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рддрдм рдлрд╝рдВрдХреНрд╢рди <code>f</code> рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ "рд╣реЗрд▓реЛ" рд▓рд┐рдЦрддрд╛ рд╣реИ рдФрд░ рдХреЛрд░рдЯрд╛рдЗрди.рдлреАрд▓реНрдб рдХреЗ рд╕рд╛рде рдЦреБрдж рдХреЛ рд░реЛрдХ рджреЗрддрд╛ рд╣реИред  рдпрд╣ <code>return</code> рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо <code>coroutine.resume</code> рд╕рд╛рде <code>f</code> рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдпрджрд┐ рдЖрдк <code>coroutine.yield</code> рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп рддрд░реНрдХ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ "рдореБрдЦреНрдп рдзрд╛рд░рд╛" рдореЗрдВ <code>coroutine.resume</code> рд╕рдВрдмрдВрдзрд┐рдд рдХреЙрд▓ рдХреЗ рд░рд┐рдЯрд░реНрди рдорд╛рди рдмрди рдЬрд╛рдПрдВрдЧреЗред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> ... coroutine.<span class="hljs-built_in"><span class="hljs-built_in">yield</span></span>(<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-string"><span class="hljs-string">"some text"</span></span>) ... <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ok, num, text = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(c) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(num, text) <span class="hljs-comment"><span class="hljs-comment">-- will print '42 "some text"'</span></span></code> </pre><br>  <code>ok</code> рдПрдХ рд╡реИрд░рд┐рдПрдмрд▓ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рдХреЛрд░рдЯрд╛рдЗрди рдХреА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдирдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрджрд┐ <code>ok</code> рд╣реИ, рддреЛ рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рд╕рд╛рде рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ, рдЕрдВрджрд░ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реБрдИ рд╣реИред  рдЗрд╕рдХреЗ рдкреАрдЫреЗ рдХреЗ рдорд╛рди ( <code>num</code> , <code>text</code> ) рд╡рд╣реА рддрд░реНрдХ рд╣реИрдВ рдЬреЛ рд╣рдордиреЗ <code>yield</code> рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдХрд┐рдП рдереЗред <br><br>  рдпрджрд┐ <code>ok</code> <code>false</code> , рддреЛ рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рд╕рд╛рде рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛ рдерд╛, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>error</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЗрд╕рдХреЗ рдЕрдВрджрд░ рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рджреВрд╕рд░рд╛ рд░рд┐рдЯрд░реНрди рдорд╛рди рдПрдХ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рд╣реЛрдЧрд╛ред  рдХреЛрд░рдЯрд╛рдЗрди рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЬрд┐рд╕рдореЗрдВ рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span> + notDefined) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> c = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(f) ok, msg = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(c) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> ok <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Coroutine failed!"</span></span>, msg) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдирд┐рд╖реНрдХрд░реНрд╖: <br><br><pre> Coroutine рд╡рд┐рдлрд▓!  рдЗрдирдкреБрдЯ: 4: рд╢реВрдиреНрдп рдорд╛рди (рд╡реИрд╢реНрд╡рд┐рдХ 'рдиреЛрдЯрд┐рдлрд╛рдЗрдб') рдкрд░ рдЕрдВрдХрдЧрдгрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕
</pre><br><br>  Coroutine рдХреА рд╕реНрдерд┐рддрд┐ <code>coroutine.status</code> рдХреЙрд▓ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  Corutin рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: <br><br><ul><li>  "рд░рдирд┐рдВрдЧ" - рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреЛрд░реНрдЙрдЯрд┐рди рдЪрд▓ рд░рд╣рд╛ рд╣реИред  corutine.status рдХреЛ corutin рд╕реЗ рд╣реА рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ </li><li>  "рдирд┐рд▓рдВрдмрд┐рдд" - рдХреЛрд░реБрдЯрд┐рди рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдпрд╛ рдХрднреА рднреА рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </li><li>  "рд╕рд╛рдорд╛рдиреНрдп" - рдХреЛрд░реБрдЯрд┐рди рд╕рдХреНрд░рд┐рдп рд╣реИ, рд▓реЗрдХрд┐рди рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╛рдиреА, corutin рдиреЗ рдЕрдкрдиреЗ рднреАрддрд░ рдПрдХ рдФрд░ corutin рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ </li><li>  "рдореГрдд" - coroutine рдкреВрд░реНрдг рдирд┐рд╖реНрдкрд╛рджрди (рдпрд╛рдиреА, coroutine рдкреВрд░рд╛ рд╣реБрдЖ) </li></ul><br>  рдЕрдм, рдЗрд╕ рдЬреНрдЮрд╛рди рдХреА рдорджрдж рд╕реЗ, рд╣рдо рдХреЛрд░рдЖрдЙрдЯреНрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рдХрдЯрдХреИрди рдХреЗ рдЕрдиреБрдХреНрд░рдореЛрдВ рдХреА рдПрдХ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h2>  Corutin рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ cutscenes рдмрдирд╛рдирд╛ </h2><br>  рдпрд╣рд╛рдВ рдирдИ рдкреНрд░рдгрд╛рд▓реА рдкрд░ рдЖрдзрд╛рд░ <code>Action</code> рдХреНрд▓рд╛рд╕ рдЬреИрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Action:launch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> self:init() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.finished <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> dt = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">yield</span></span>() self:update(dt) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> self:<span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдПрдХреНрд╢рди рд╕реВрдЪрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕рдорд╛рди рд╣реИ: рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд╛ <code>update</code> рдлрд╝рдВрдХреНрд╢рди рддрдм рддрдХ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкреВрд░реА рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддреАред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рд╣рдо рдХреЛрд░рдЯрд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЧреЗрдо рд▓реВрдк рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдореЗрдВ <code>yield</code> рдХрд░рддреЗ рд╣реИрдВ ( <code>Action:launch</code> рдХреЛ рдХреБрдЫ рдХреЛрд░рдЖрдЙрдЯ рд╕реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ)ред  рдЧреЗрдо рд▓реВрдк рдХреЗ <code>update</code> рдореЗрдВ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рд╣рдо рдЗрд╕ рддрд░рд╣ рд╕реЗ рд╡рд░реНрддрдорд╛рди рдХрдЯрдХ рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="lua hljs">coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(c, dt)</code> </pre><br>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рдПрдХ cutscene рдмрдирд╛рдиреЗ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cutscene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(player, npc)</span></span></span></span> player:goTo(npc) npc:say(<span class="hljs-string"><span class="hljs-string">"You did it!"</span></span>) delay(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) npc:say(<span class="hljs-string"><span class="hljs-string">"Thank you"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">-- -  ... local c = coroutine.create(cutscene, player, npc) coroutine.resume(c, dt)</span></span></code> </pre><br>  рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ <code>delay</code> рдлрд╝рдВрдХреНрд╢рди рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(time)</span></span></span></span> action = DelayAction:new { delay = <span class="hljs-built_in"><span class="hljs-built_in">time</span></span> } action:launch() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдЗрд╕ рддрд░рд╣ рдХреЗ рд░реИрдкрд░ рдмрдирд╛рдиреЗ рд╕реЗ рдХрдЯрдХрд╕реАрди рдХреЛрдб рдХреА рдкрдардиреАрдпрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рд╣реЛрддрд╛ рд╣реИред  <code>DelayAction</code> рдЗрд╕ рддрд░рд╣ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ <code>DelayAction</code> : <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- Action -   DelayAction local DelayAction = class("DelayAction", Action) function DelayAction:initialize(params) self.delay = params.delay self.currentTime = 0 self.isFinished = false end function DelayAction:update(dt) self.currentTime = self.currentTime + dt if self.currentTime &gt;= self.delayTime then self.finished = true end end</span></span></code> </pre><br>  рдпрд╣ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЙрд╕реА рдХреЗ рд╕рдорд╛рди рд╣реИ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдХреНрд░рд┐рдпрд╛ рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ!  рдЖрдЗрдП <code>Action:launch</code> рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ <code>Action:launch</code> рдлрд╝рдВрдХреНрд╢рди рдлрд┐рд░ рд╕реЗ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Action:launch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> self:init() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.finished <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> dt = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">yield</span></span>() <span class="hljs-comment"><span class="hljs-comment">-- the most important part self:update(dt) end self:exit() end</span></span></code> </pre><br>  рдпрд╣рд╛рдВ рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ <code>while</code> , рдЬреЛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкреВрд░реА рд╣реЛрдиреЗ рддрдХ рдЪрд▓рддрд╛ рд╣реИред  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/l3/_n/xw/l3_nxwnzshpxqhho12yqyi-y52o.png"><br><br>  рдЖрдЗрдП рдЕрдм <code>goTo</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рджреЗрдЦреЗрдВ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Entity:goTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(target)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> action = GoToAction:new { entity = self, target = target } action:launch() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GoToAction:initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params)</span></span></span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GoToAction:update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.entity:closeTo(self.target) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> ... <span class="hljs-comment"><span class="hljs-comment">--  , AI else self.finished = true end end</span></span></code> </pre><br>  Coroutines рдШрдЯрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЪрд▓рддреА рд╣реИрдВред  <code>WaitForEventAction</code> рд╡рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForEventAction:initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params)</span></span></span></span> self.finished = <span class="hljs-literal"><span class="hljs-literal">false</span></span> eventManager:subscribe { listener = self, eventType = params.eventType, callback = WaitForEventAction.onEvent } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForEventAction:onEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event)</span></span></span></span> self.finished = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ <code>update</code> рд╡рд┐рдзрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдпрд╣ рддрдм рддрдХ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░рддрд╛ ...) рдЬрдм рддрдХ рдХрд┐ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдПрдХ рдШрдЯрдирд╛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдЗрд╕ рд╡рд░реНрдЧ рдХрд╛ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИ - <code>say</code> рдХрд╛рд░реНрдп рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Entity:say</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text)</span></span></span></span> DialogueWindow:show(text) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> action = WaitForEventAction:new { eventType = <span class="hljs-string"><span class="hljs-string">'DialogueWindowClosed'</span></span> } action:launch() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рд╕рд░рд▓ рдФрд░ рдкрдардиреАрдпред  рдЬрдм рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ 'DialogueWindowClosed` рдкреНрд░рдХрд╛рд░ рдХреА рдПрдХ рдШрдЯрдирд╛ рднреЗрдЬ рджреЗрддрд╛ рд╣реИред  рдХрд╣рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЕрдЧрд▓реЗ рдПрдХ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред <br><br>  Coroutine рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдиреЙрдирд▓рд╛рдЗрдирд┐рдпрд░ рдХрдЯрд╕реНрдХреИрди рдФрд░ рдбрд╛рдпрд▓реЙрдЧ рдЯреНрд░реА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> answer = girl:say(<span class="hljs-string"><span class="hljs-string">'do_you_love_lua'</span></span>, { <span class="hljs-string"><span class="hljs-string">'YES'</span></span>, <span class="hljs-string"><span class="hljs-string">'NO'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> answer == <span class="hljs-string"><span class="hljs-string">'YES'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> girl:setMood(<span class="hljs-string"><span class="hljs-string">'happy'</span></span>) girl:say(<span class="hljs-string"><span class="hljs-string">'happy_response'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> girl:setMood(<span class="hljs-string"><span class="hljs-string">'angry'</span></span>) girl:say(<span class="hljs-string"><span class="hljs-string">'angry_response'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><img src="https://habrastorage.org/webt/t4/e-/am/t4e-amhtwligikstvqtgi8bpyzu.gif"><br><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, <code>say</code> рдлрд╝рдВрдХреНрд╢рди рдкрд╣рд▓реЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИред  рдпрд╣ рд╕рдВрд╡рд╛рдж рдореЗрдВ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреА рдкрд╕рдВрдж рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>WaitForEventAction</code> рдХреЛ <code>WaitForEventAction</code> рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ PlayerChoiceEvent рдИрд╡реЗрдВрдЯ рдХреЛ рдкрдХрдбрд╝ рд▓реЗрдЧрд╛ рдФрд░ рдлрд┐рд░ рдЙрд╕ рдкреНрд▓реЗрдпрд░ рдХреА рдкрд╕рдВрдж рдХреЛ рд▓реМрдЯрд╛рдПрдЧрд╛ рдЬрд┐рд╕рдХреА рдЬрд╛рдирдХрд╛рд░реА рдИрд╡реЗрдВрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧреАред <br><br><h2>  рдереЛрдбрд╝рд╛ рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг </h2><br>  рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рд╕рд╛рде, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдФрд░ рдЫреЛрдЯреЗ quests рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: <br><br><pre> <code class="lua hljs">girl:say(<span class="hljs-string"><span class="hljs-string">"Kill that monster!"</span></span>) waitForEvent(<span class="hljs-string"><span class="hljs-string">'EnemyKilled'</span></span>) girl:setMood(<span class="hljs-string"><span class="hljs-string">'happy'</span></span>) girl:say(<span class="hljs-string"><span class="hljs-string">"You did it! Thank you!"</span></span>)</code> </pre><br><img src="https://habrastorage.org/webt/wx/du/kh/wxdukhci9lald-fph9ypbu5h5fg.gif"><br><br>  рдПрдЕрд░ рдЗрдВрдбрд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдХреЙрд░рдЖрдЙрдЯ рдХрд╛ рднреА рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд░рд╛рдХреНрд╖рд╕ рдХреБрдЫ рдкреНрд░рдХреНрд╖реЗрдкрд╡рдХреНрд░ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдмрдврд╝реЗрдЧрд╛: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">followPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(monster, path)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> numberOfPoints = <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>:getNumberOfPoints() <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">--      while true do monster:goTo(path:getPoint(i)) if i &lt; numberOfPoints - 1 then i = i + 1 --     else --   i = 0 end end end</span></span></code> </pre><br><img src="https://habrastorage.org/webt/g7/m4/ou/g7m4ouls2l7al6xlovmm-qdbywc.gif"><br><br>  рдЬрдм рд░рд╛рдХреНрд╖рд╕ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рджреЗрдЦрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдмрд╕ рдХреЛрд░рдЯрд╛рдЗрди рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, <code>followPath</code> рднреАрддрд░ рдПрдХ рдЕрдирдВрдд рд▓реВрдк ( <code>while true</code> ) рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЕрдирдВрдд рдирд╣реАрдВ рд╣реИред <br><br>  рдХреЛрд░реБрдЯрд┐рди рдХреЗ рд╕рд╛рде, рдЖрдк "рд╕рдорд╛рдирд╛рдВрддрд░" рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЬрдм рддрдХ рджреЛрдиреЛрдВ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкреВрд░реА рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддреА рддрдм рддрдХ рдХрдЯрдХ рдЕрдЧрд▓реА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдирд╣реАрдВ рдмрдврд╝реЗрдЧрд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдХрдЯрдХ рдмрдирд╛рдпреЗрдВрдЧреЗ рдЬрд╣рд╛рдБ рдПрдХ рд▓рдбрд╝рдХреА рдФрд░ рдПрдХ рдмрд┐рд▓реНрд▓реА рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЧрддрд┐ рд╕реЗ рдорд┐рддреНрд░ рдХреЗ рдмрд┐рдВрджреБ рдкрд░ рдЬрд╛рддреА рд╣реИред  рдЙрдирдХреЗ рдЖрдиреЗ рдХреЗ рдмрд╛рдж, рдмрд┐рд▓реНрд▓реА рдХрд╣рддреА рд╣реИ "рдореНрдпрд╛рдК"ред <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cutscene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cat, girl, meetingPoint)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c1 = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> cat:goTo(meetingPoint) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> c2 = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> girl:goTo(meetingPoint) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) c1.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>() c2.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>() <span class="hljs-comment"><span class="hljs-comment">--  waitForFinish(c1, c2) --    cat:say("meow") ... end</span></span></code> </pre><br>  рдпрд╣рд╛рдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣рд┐рд╕реНрд╕рд╛ <code>waitForFinish</code> рдлрдВрдХреНрд╢рди рд╣реИ, рдЬреЛ рдХрд┐ <code>WaitForFinishAction</code> рдХреНрд▓рд╛рд╕ рдХреЗ рдЖрд╕рдкрд╛рд╕ рдПрдХ рдЖрд╡рд░рдг рд╣реИ, рдЬрд┐рд╕реЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForFinishAction:update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>(self.c1) == <span class="hljs-string"><span class="hljs-string">'dead'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>(self.c2) == <span class="hljs-string"><span class="hljs-string">'dead'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> self.finished = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>(self.c1) ~= <span class="hljs-string"><span class="hljs-string">'dead'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(self.c1, dt) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span>(self.c2) ~= <span class="hljs-string"><span class="hljs-string">'dead'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> coroutine.<span class="hljs-built_in"><span class="hljs-built_in">resume</span></span>(self.c2, dt) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  рдпрджрд┐ рдЖрдк Nth рдирдВрдмрд░ рдХреА рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕ рд╡рд░реНрдЧ рдХреЛ рдЕрдзрд┐рдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЖрдк рдПрдХ рдРрд╕рд╛ рд╡рд░реНрдЧ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рддрдм рддрдХ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ <i>рд╕рднреА</i> рдХреЛрд░реВрдЯрд╛рдЗрди рдореЗрдВ рд╕реЗ рдПрдХ рдкреВрд░рд╛ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдмрдЬрд╛рдп рдЗрд╕рдХреЗ рдХрд┐ <i>рд╕рднреА</i> рдХреЛрд░рд╛рдЙрдЯрд╛рдЗрди рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдорд┐рдиреА-рдЧреЗрдо рд░реЗрд╕рд┐рдВрдЧ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рдЕрдВрджрд░ рдПрдХ рд╕рд╡рд╛рд░ рдХреЗ рдлрд┐рдирд┐рд╢ рд▓рд╛рдЗрди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдФрд░ рдлрд┐рд░ рдХреБрдЫ рд╕реАрдХреНрд╡реЗрдВрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><h2>  рдзрдирд┐рдпрд╛ рдХреЗ рдлрд╛рдпрджреЗ рдФрд░ рдиреБрдХрд╕рд╛рди </h2><br>  Coroutines рдПрдХ рдмрд╣реБрдд рд╣реА рдЙрдкрдпреЛрдЧреА рддрдВрддреНрд░ рд╣реИред  рдЗрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдк cutscenes рдФрд░ рдЧреЗрдордкреНрд▓реЗ рдХреЛрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдкрдврд╝рдиреЗ рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реИред  рдЗрд╕ рддрд░рд╣ рдХреЗ Cutscenes рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдореЙрдбрд░реНрд╕ рдпрд╛ рдЙрди рд▓реЛрдЧреЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдирд╣реАрдВ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЧреЗрдо рдпрд╛ рд╕реНрддрд░ рдХреЗ рдбрд┐рдЬрд╛рдЗрдирд░)ред <br><br>  рдФрд░ рдпрд╣ рд╕рдм рдПрдХ рдзрд╛рдЧреЗ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреМрдбрд╝ рдХреА рд╕реНрдерд┐рддрд┐</a> рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  рдЕрдкреНрд░реЛрдЪ рдХреЗ рдиреБрдХрд╕рд╛рди рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмрдЪрдд рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдЧреЗрдо рдореЗрдВ рдХреЛрд░рдЯрд╛рдЗрди рдХреЗ рд╕рд╛рде рдПрдХ рд▓рдВрдмрд╛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╣реИред  рдЗрд╕ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рджреМрд░рд╛рди рдЦрд┐рд▓рд╛рдбрд╝реА рд╕рд╣реЗрдЬ рдирд╣реАрдВ рдкрд╛рдПрдЧрд╛ рдХреНрдпреЛрдВрдХрд┐  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХреЛрд░рдЖрдЙрдЯ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ (рдЬрд┐рд╕рдореЗрдВ рдЗрд╕рдХреА рдкреВрд░реА рд╕реНрдЯреИрдХ рдФрд░ рдЕрдВрджрд░ рд╡реИрд░рд┐рдПрдмрд▓ рдХреЗ рдореВрд▓реНрдп рд╢рд╛рдорд┐рд▓ рд╣реИрдВ) рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рддрд╛рдХрд┐ рд╕реЗрд╡ рд╕реЗ рдЖрдЧреЗ рд▓реЛрдб рд╣реЛрдиреЗ рдкрд░, рдЖрдк рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЬрд╛рд░реА рд░рдЦ рд╕рдХреЗрдВред <br><br>  ( <i>рдиреЛрдЯ</i> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд▓реВрдЯреЛрд▓реНрдпреВрд▓реЗрдЯреНрд╕</a> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд░рдЯрд╛рдЗрди</a> рдХреЛ рдХреНрд░рдордмрджреНрдз рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗрд╡рд▓ рд▓реБрдЖ 5.1 рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреА рд╣реИ) <br><br>  рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдХрдЯрдХрдиреЗрд╕ рдХреЗ рд╕рд╛рде рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐  рдЖрдорддреМрд░ рдкрд░ рдХрдЯрдХреАрди рдХреЗ рдмреАрдЪ рдХреЗ рдЦреЗрд▓ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИред <br><br>  рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рдЫреЛрдЯреЗ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рддреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рд▓рдВрдмреЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреА рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рд╣реЛ рд╕рдХрддреА рд╣реИред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдПрдХ рдЦрд┐рд▓рд╛рдбрд╝реА рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИ рдФрд░ рдЙрд╕реЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░реЗ рдХрдорд░реЗ рдореЗрдВ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░, рдЖрдк рдПрдХ рдЪреМрдХреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдмрдЪрд╛рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рд╣реЗрдЬрдиреЗ рдореЗрдВ, рд╣рдо рдХреБрдЫ рдРрд╕рд╛ рд▓рд┐рдЦреЗрдВрдЧреЗ рдЬреИрд╕реЗ "рдЦрд┐рд▓рд╛рдбрд╝реА рдиреЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рднрд╛рдЧ 1 рдХреЛ рдкреВрд░рд╛ рдХрд┐рдпрд╛"ред  рдЕрдЧрд▓рд╛, рдЦрд┐рд▓рд╛рдбрд╝реА рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рджреВрд╕рд░реЗ рднрд╛рдЧ рд╕реЗ рдЧреБрдЬрд░реЗрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдФрд░ рдХреЙрд░рдЖрдЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рдФрд░ рдЗрд╕реА рддрд░рд╣ ... рдЬрдм рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ, рддреЛ рд╣рдо рд╕рд┐рд░реНрдл рдЙрд╕ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рдЕрдиреБрд░реВрдк рдХреЙрд░рдЯреАрди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдЧреБрдЬрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><h1>  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ cutscenes рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╣реИрдВред  рдпрд╣ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдХреЛрд░рдЯрд╛рдЗрди рджреГрд╖реНрдЯрд┐рдХреЛрдг рдмрд╣реБрдд рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╣реИ рдФрд░ рдореБрдЭреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдореЗрдВ рдЦреБрд╢реА рд╣реЛ рд░рд╣реА рд╣реИред  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдпрд╣ рд╕рдорд╛рдзрд╛рди рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛ рджреЗрдЧрд╛ рдФрд░ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЦреЗрд▓ рдореЗрдВ рдорд╣рд╛рдХрд╛рд╡реНрдп рдХрдЯрдХрдиреЗрд╕реЗрд╕ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi427135/">https://habr.com/ru/post/hi427135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi427117/index.html">рддрд╛рд░рд╛рдВрдХрди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдмреИрдардХ рдХрдХреНрд╖</a></li>
<li><a href="../hi427123/index.html">рдЯреНрдпреВрд░рд┐рдВрдЧ рдЧреЗрдо</a></li>
<li><a href="../hi427129/index.html">рдереНрд░реЗрдЯ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕ - рд╕реВрдЪрдирд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдзреБрдирд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг</a></li>
<li><a href="../hi427131/index.html">рдСрдбрд┐рдпреЛрдорд╛рдирд┐рдпрд╛ рдХреЗ рд╕рд╛рде рдкрд░рд┐рдЪрд┐рдд: рдЙрддреНрдкрд╛рджрди, рдбрд┐рдЬрд╛рдЗрди, рдХрд╛рд░реНрдпрд╛рд▓рдпреЛрдВ рдФрд░ рд╡реНрдпрд╛рдкрд╛рд░ рдкрд░ 15 рд╡рд┐рд╖рдпрдЧрдд рд╕рд╛рдордЧреНрд░реА</a></li>
<li><a href="../hi427133/index.html">рд╡рд░реНрдЧреАрдХрд░рдг - рдХреНрд▓рд╛рд╕рд┐рдХ рдЕрдиреБрдХреВрд▓рди рдХрд╛рд░реНрдп</a></li>
<li><a href="../hi427137/index.html">рд╕реЗрдВрдЯреНрд░рд▓ рдмреИрдВрдХ рдХреЗ рдЖрдВрдХрдбрд╝реЗ: 2018 рдореЗрдВ рд╡рд┐рддреНрддреАрдп рд╕рдВрдЧрдардиреЛрдВ рдкрд░ рд╕рд╛рдЗрдмрд░ рд╣рдорд▓реЗ рд╕реЗ рд╣реИрдХрд░реНрд╕ рдХреА рдХрдорд╛рдИ рд▓рдЧрднрдЧ 14 рдЧреБрдирд╛ рдЧрд┐рд░ рдЧрдИ</a></li>
<li><a href="../hi427139/index.html">[рдЪрдпрди] рд╕реНрдерд▓реЛрдВ рдХрд╛ рд╡рд┐рдХрд╛рд╕, рдбрд┐рдЬрд╛рдЗрди рдФрд░ рдкреНрд░рдЪрд╛рд░: резред рдЙрдкрдпреЛрдЧреА рд╕рд╛рдордЧреНрд░реА</a></li>
<li><a href="../hi427141/index.html">рдмреНрд▓рд╛рд╕реНрдЯрд┐рдВрдЧ рдлреЛрди</a></li>
<li><a href="../hi427143/index.html">рд╣реИрдХрд╛рдбрд╛рдп рдХрд╛ рджреВрд╕рд░рд╛ рд░реЗрдЯреНрд░реЛ рдХрдВрдкреНрдпреВрдЯрд░ рдмреИрдЬ</a></li>
<li><a href="../hi427145/index.html">рдЖрдзреБрдирд┐рдХ рдЖрдиреБрд╡рдВрд╢рд┐рдХреА, рдЖрдгрд╡рд┐рдХ рдЬреАрд╡ рд╡рд┐рдЬреНрдЮрд╛рди, рдЖрдиреБрд╡рдВрд╢рд┐рдХ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдФрд░ рдЬреАрдиреЛрдорд┐рдХреНрд╕ рдХрд╛ рдЕрдзреНрдпрдпрди рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>