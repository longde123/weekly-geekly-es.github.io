<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📠 👩‍👩‍👧 🗑️ Optimisation du téléchargement d'images 🔠 🙎🏼 ☝️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction de l'article «Comment optimiser le chargement des images sur votre site» . 

 Si le site contient beauco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation du téléchargement d'images</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482820/">  Bonjour, Habr!  Je vous présente la traduction de l'article <a href="https://medium.com/front-end-weekly/how-to-optimize-image-loading-on-your-website-855020fb41ae">«Comment optimiser le chargement des images sur votre site»</a> . <br><br>  Si le site contient beaucoup de belles images, c'est très bien, mais elles peuvent dégrader considérablement le temps de chargement et, par conséquent, le référencement en souffrira et de nombreux utilisateurs fermeront le site avant son chargement.  Il arrive souvent que plusieurs mégaoctets d'images soient téléchargés simplement pour afficher le curseur sur la page principale. <br><br>  Imaginez que vous accédez à un tel site via un Internet mobile lent, cela peut prendre beaucoup de temps et la plupart des utilisateurs dans cette situation fermeront simplement votre site avant qu'il ne soit téléchargé.  Un bon moyen de tester cela est de profiter de la possibilité de limiter la vitesse d'Internet via <a href="https://developers.google.com/web/tools/chrome-devtools/network/network-conditions">Chrome Devtools</a> . <br><br><h2>  Le problème </h2><br>  Le problème est qu'il arrive souvent que le contenu lui-même soit déjà chargé et que les images soient toujours en cours de chargement.  En conséquence, l'utilisateur peut voir l'espace vide où les images se chargent lentement.  Ce n'est clairement pas ce que vous aimeriez. <br><a name="habracut"></a><br>  Dans l'exemple ci-dessous, j'ai créé un site Web simple avec une image d'arrière-plan qui pèse 4,8 Mo.  Comme vous pouvez le voir, le DOM a démarré en 1,14 seconde, c'est-à-dire  en fait, l'utilisateur voit le contenu après 1,14 seconde, ce qui est plutôt bon pour Internet 3G.  Cependant, l'image d'arrière-plan se charge en 27,32 secondes.  Pendant ce temps, l'utilisateur peut déjà quitter votre site. <br><br> <a href=""><img src="https://habrastorage.org/webt/ai/he/nx/aihenxtqzk6volradqbbwp3h7uy.png"></a> <br><br>  Et non seulement l'expérience utilisateur en souffre.  En 2010, <a href="https://webmasters.googleblog.com/2010/04/using-site-speed-in-web-search-ranking.html">Google a annoncé</a> que la vitesse de téléchargement était l'un des facteurs de son algorithme de classement et je pense qu'à l'avenir ce facteur deviendra de plus en plus important. <br><br><h2>  Solution </h2><br>  Alors, comment résoudre ce problème?  Eh bien, pour commencer, nous pouvons simplement compresser notre image de fond à l'aide de divers outils.  Par exemple, <a href="https://tinypng.com/">TinyPNG</a> , <a href="https://imageoptimizer.xyz/">ImageOptimizer</a> ou <a href="https://www.jpegmini.com/">JPEGmini</a> .  Ce sera une victoire facile et réduisez le temps de démarrage à ~ 10 secondes.  Et même si cela ressemble à une énorme étape dans la décision, mais 10 secondes, c'est encore trop. <br><br>  L'étape suivante peut être de télécharger l'image du talon avant de charger l'image d'origine.  Un talon est une version de l'image d'origine, mais avec une faible résolution.  Lorsque nous créons une telle image, nous réduisons la résolution de 7372x4392 pixels à 20x11.  En conséquence, la taille de l'image est réduite de 4,8 Mo à 900 octets. <br><br><img src="https://habrastorage.org/webt/pe/dc/j3/pedcj3yrpuo5wzzudyh88wv8g4i.png"><br><br>  Cela réduira la vitesse de téléchargement de 10 secondes à 550 millisecondes.  Mais maintenant, comme arrière-plan, nous avons une image floue à basse résolution.  C'est une excellente solution pendant que la page se charge pendant les premières secondes, mais nous voulons toujours montrer aux utilisateurs l'image originale à haute résolution. <br><br>  Pour ce faire, nous devrons d'abord télécharger l'image basse résolution, puis seulement, de manière asynchrone en arrière-plan, charger l'original haute résolution, et lorsque la version haute résolution sera chargée, nous pourrons la mettre à la place de l'image tronquée.  Pour cela, j'ai utilisé le code ci-dessous auparavant. <br><br><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Page is loaded const objects = document.getElementsByClassName('asyncImage'); Array.from(objects).map((item) =&gt; { // Start loading image const img = new Image(); img.src = item.dataset.src; // Once image is loaded replace the src of the HTML element img.onload = () =&gt; { item.classList.remove('asyncImage'); return item.nodeName === 'IMG' ? item.src = item.dataset.src : item.style.backgroundImage = `url(${item.dataset.src})`; }; }); })();</span></span></code> </pre> <br><br>  Ce code recherche des éléments avec la classe <code>asyncImage</code> , après quoi il charge toutes les images spécifiées dans l'attribut <code>data-src</code> , et dès que l'image est chargée, il remplace <code>src</code> pour l'élément <code><code>&lt;img&gt;</code></code> , et pour les éléments restants définit l'image d'arrière-plan via css. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"asyncImage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/background.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  ou <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"asyncImage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/background-min.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/background.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Beautiful landscape sunrise"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Puisque le script supprime la classe de l'élément après le chargement de l'image, nous pouvons faire de belles animations en utilisant CSS si vous le souhaitez.  Par exemple, une animation simplifiée fera disparaître le stub lorsque l'image sera remplacée. <br><br><h2>  Conclusion </h2><br>  Alors, qu'avons-nous réalisé?  Nous avons amélioré l'expérience utilisateur, accéléré le chargement du site, le rendu plus accessible aux utilisateurs sans Internet rapide et éventuellement amélioré notre classement sur Google.  Ce sont d'énormes améliorations pour un si petit changement. <br><br> <a href=""><img src="https://habrastorage.org/webt/wm/mc/i2/wmmci2zztcjmxo0yew3-_bnmyku.png"></a> <br><br>  Comme vous pouvez le voir, nous téléchargeons le talon pendant 570 millisecondes, dès qu'il se charge, l'utilisateur verra une version basse résolution de notre image d'origine, et dès que l'image originale se chargera, il remplacera la version basse résolution. <br><br>  <a href="https://jsfiddle.net/87o4wg2k/">Voir un exemple de travail ici.</a> <br><br><h2>  Chargement d'images paresseuses </h2><br>  Si vous voulez aller plus loin et améliorer encore plus le chargement des images, il peut être utile d'utiliser le chargement d'images paresseuses. <br><br>  Le chargement différé est une technique où les images en dehors de la zone visible de la page ne sont pas chargées jusqu'à ce que l'image s'approche du bord de la zone visible. <br><br>  Son avantage est que moins de données seront chargées lors du chargement initial, car très souvent seule une petite partie des images est affichée dans la zone visible de la page, et le reste peut être téléchargé au fur et à mesure du défilement de l'utilisateur.  Un <a href="https://caniuse.com/">observateur d'intersection est le</a> mieux adapté pour mettre en œuvre cela. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482820/">https://habr.com/ru/post/fr482820/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482810/index.html">Pouvez-vous faire confiance aux conseils médicaux des robots? Les médecins ne sont pas encore sûrs.</a></li>
<li><a href="../fr482812/index.html">Les mathématiciens ont réalisé une percée dans l'étude du problème «dangereux»</a></li>
<li><a href="../fr482814/index.html">Vue générale de l'arborescence, mise en œuvre et pas seulement</a></li>
<li><a href="../fr482816/index.html">Arthur Khachuyan: Intelligence artificielle en marketing</a></li>
<li><a href="../fr482818/index.html">Brefs résultats de la lecture du rapport sur 1C DSS pour Infostart 2019</a></li>
<li><a href="../fr482822/index.html">Comment sont effectués les tests artistiques pour les jeux</a></li>
<li><a href="../fr482826/index.html">Analyser une démo de 128 octets à partir des archives de 1997</a></li>
<li><a href="../fr482832/index.html">Économie future pour les physiciens</a></li>
<li><a href="../fr482834/index.html">La saisie statique ne nécessite pas nécessairement des cérémonies</a></li>
<li><a href="../fr482840/index.html">Téléchargement séquentiel UTorrent en 2 clics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>