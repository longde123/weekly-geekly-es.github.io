<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∑ üë®üèº‚Äçüîß üìñ Fehlertoleranz im Qsan-Speicher üï¥üèæ üéê üìà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In der IT-Infrastruktur, in der Virtualisierung weit verbreitet ist, sind Speichersysteme heute der Kern, in dem alle virtuellen Maschinen gespeichert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fehlertoleranz im Qsan-Speicher</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/459214/"><p> In der IT-Infrastruktur, in der Virtualisierung weit verbreitet ist, sind Speichersysteme heute der Kern, in dem alle virtuellen Maschinen gespeichert sind.  Durch den Ausfall dieses Knotens kann die Arbeit des Rechenzentrums vollst√§ndig gestoppt werden.  Obwohl ein betr√§chtlicher Teil der Serverausr√ºstung in der einen oder anderen Form ‚Äûstandardm√§√üig‚Äú Fehlertoleranz aufweist, haben sie gerade aufgrund der besonderen Rolle von Speichersystemen im Rechenzentrum erh√∂hte Anforderungen an die ‚Äû√úberlebensf√§higkeit‚Äú. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/un/l2/qlunl2stlgw2znymm7koq0fauvg.jpeg"></div><br><a name="habracut"></a><br><p>  Die effektivste Methode zur Gew√§hrleistung der Fehlertoleranz in der IT ist die Verwendung mehrerer Instanzen von Ger√§ten und Software (im einfachsten Fall Duplizierung).  Nat√ºrlich kann der Speicher vollst√§ndig dupliziert werden.  F√ºr die Notfallwiederherstellung wird genau dieser Ansatz verwendet.  Aber nicht alle Unternehmen k√∂nnen sich eine solche L√∂sung leisten.  Es geht nicht nur um die doppelten Kosten f√ºr Ger√§te, sondern auch um andere Kosten f√ºr die Organisation einer solchen L√∂sung und deren weitere Unterst√ºtzung. </p><br><p>  Die M√∂glichkeit der Vervielf√§ltigung von Ger√§ten beseitigt jedoch nicht die Notwendigkeit, eine Fehlertoleranz auf Komponentenebene sicherzustellen.  Insbesondere wird Redundanz auf Speichersysteme f√ºr Stromversorgungen, K√ºhlmodule, Antriebe und nat√ºrlich Steuerungen angewendet.  All dies ist l√§ngst allt√§glich geworden.  Ohne ein √§hnliches Design ist es schwierig, Speicherplatz zu finden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qsan</a> hier ist keine Ausnahme.  Wir m√∂chten in diesem Artikel jedoch auf das eingehen, was nicht sofort ersichtlich ist, und gleichzeitig soll in erster Linie die Fehlertoleranz des gesamten Systems erh√∂ht werden. </p><br><h3>  K√ºhlmodule </h3><br><p>  Sehr oft werden in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Speichersystemen</a> mit 2U-3U-Geh√§usen kombinierte Module verwendet, die Netzteile und L√ºfter kombinieren.  Einerseits ist es praktisch, weil  Es muss nur eine Einheit gewartet werden.  Wenn andererseits das K√ºhlsystem ausf√§llt, kann die Stromversorgung zwangsweise abgeschaltet werden, um eine √úberhitzung zu vermeiden.  Und es scheint, dass nicht die kritischste Situation eintreten wird, aber es lohnt sich offensichtlich nicht, Speicherschwachstellen hinzuzuf√ºgen. </p><br><p>  Die K√ºhlung in Qsan-Speichersystemen ist in Form separater Module mit einem "hei√üen" Ersatz organisiert, unabh√§ngig von der Stromversorgung.  Tats√§chlich haben die Netzteile ihre eigenen L√ºfter, die das Netzteil selbst durchbrennen lassen.  Das K√ºhlmodul bietet Platz f√ºr zwei unabh√§ngige L√ºfter, die sich gegenseitig versichern.  Das Speichersystem enth√§lt zwei solcher Module: rechts und links - f√ºr einen effizienten Luftstrom aller Komponenten.  Wenn einer der L√ºfter ausf√§llt, erh√∂hen alle anderen automatisch ihre Drehzahl, um den daraus resultierenden Luftmangel auszugleichen.  Aus diesem Grund besteht bei einer Fehlfunktion des L√ºfters nicht die Gefahr einer √úberhitzung des gesamten Ger√§ts. </p><br><h3>  Verbindungstopologie des Erweiterungsregals </h3><br><p>  Das klassische Schema zum Verbinden von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erweiterungsregalen</a> mit dem Speicher bedeutet eine Topologie, die als Kaskade bezeichnet wird.  In diesem Fall sind die entsprechenden Regal- und Speichercontroller durch ein einziges SAS-Kabel miteinander verbunden.  Insgesamt werden 2 Kabel f√ºr ein Dual-Controller-System erhalten.  Wenn Sie das zweite anschlie√üen m√∂chten, wird es auf die gleiche Weise mit dem ersten Regal verbunden.  Usw.  Der Vorteil dieser Topologie ist die einfache Implementierung in Ger√§te.  Das Minus ist eine gewisse Anf√§lligkeit f√ºr eine pl√∂tzliche Unterbrechung des SAS-Schaltkreises aufgrund des Kreuzausfalls nicht verbundener Speichercontroller und Regale oder aufgrund eines Stromausfalls eines der Erweiterungsregale in der Mitte der Kette.  Das Ergebnis ist ein Zugriffsverlust auf einen Teil der Laufwerke und ein m√∂glicher Zusammenbruch der RAID-Gruppe, wenn diese auf mehrere F√§lle verteilt ist. </p><br><p>  Vor einem Controller-Cross-Ausfall bietet Qsan Schutz in Form einer internen logischen Kommunikation zwischen Controllern √ºber die Speicher-Backplane.  Das hei√üt,  Der Speichercontroller sieht nicht nur den direkt mit ihm verbundenen JBOD-Controller, sondern auch den ‚ÄûNachbar‚Äú -Controller √ºber eine spezielle Verbindung in der R√ºckwandplatine.  Wenn eine solche Situation auftritt und niemand die SAS-Kabel zwischen dem Speichersystem und dem Regal physisch herauszieht, bleibt der Zugriff auf alle Laufwerke erhalten. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a8/kh/7f/a8kh7fjyjtcrxcvkyfbjghld4tk.jpeg"></div><br><p>  Um die SAS-Schaltung beispielsweise vor Unterbrechungen zu sch√ºtzen, die durch das Abschalten des Erweiterungsfachs verursacht werden, wird normalerweise eine andere Verbindungstopologie verwendet - die umgekehrte Kaskade.  In diesem Fall wird das Speichersystem sofort mit dem ersten und letzten Regal in der Kette verbunden und erh√§lt von beiden Seiten Zugriff auf die Laufwerke. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/4w/zq/mr4wzqj7-o1locvqsiiohdbkdzg.jpeg"></div><br><p>  Wenn Sie einen st√§rkeren Schutz w√ºnschen, k√∂nnen Sie Konfigurationen in gr√∂√üerem Ma√üstab erstellen, indem Sie beispielsweise die Topologie des Baums verwenden.  Oder erschweren durch eine Kombination der genannten Topologien.  Dies ist aufgrund der gro√üen Anzahl von SAS-Anschl√ºssen an den Ger√§ten (2 f√ºr jeden Speichercontroller und 5 f√ºr jeden JBOD-Controller) mit automatischer Erkennung der Eingangs- / Ausgangsbetriebsarten m√∂glich.  Die Hauptsache ist, dass der Administrator selbst nicht verwirrt ist.  Und das Speichersystem kann die Konfiguration korrekt konfigurieren. </p><br><h3>  Schneller Wiederaufbau </h3><br><p>  Die Verf√ºgbarkeit von Ersatzlaufwerken im System erh√∂ht die Zuverl√§ssigkeit der Informationsspeicherung erheblich.  Allein die Tatsache, dass solche Festplatten zugewiesen sind, bedeutet jedoch keinen absoluten Schutz.  Tatsache ist, dass der Wiederherstellungsprozess (Neuerstellung) ziemlich zeitaufw√§ndig und oft zeitaufw√§ndig ist.  Die Komplexit√§t ergibt sich aus dem st√§ndigen Zugriff auf Stammdaten.  Das hei√üt,  Das System muss neben der aktuellen Arbeit auch die Daten auf eine neue Festplatte kopieren.  Die Dauer des Umbaus h√§ngt direkt von der Kapazit√§t des Antriebs und seinen Geschwindigkeitseigenschaften ab.  Da das System nichts √ºber den tats√§chlich belegten Speicherplatz wei√ü, kopiert es beim Wiederherstellen einfach alles: Block f√ºr Block. </p><br><p>  Infolgedessen kann die Wiederherstellung einer modernen Festplatte mit hoher Kapazit√§t von mehr als 10 TB und einer ernsthaften Belastung der Speichersysteme leicht eine Woche oder l√§nger dauern.  Beachten Sie auch, dass w√§hrend des Wiederherstellungsvorgangs die Ausfallwahrscheinlichkeit anderer Laufwerke aufgrund der erh√∂hten Belastung erheblich zunimmt.  Und dies kann bereits bei der Verwendung von beispielsweise RAID5 eine ernsthafte Gefahr darstellen. </p><br><p>  Als L√∂sung f√ºr dieses Problem sind viele Speicherentwickler besorgt, den Wiederherstellungsprozess zu beschleunigen.  Hierf√ºr k√∂nnen verschiedene Ans√§tze verwendet werden, aber das Wesentliche ist dasselbe: W√§hrend des Wiederaufbaus werden nur wirklich belegte Bl√∂cke kopiert.  Qsan hat sich diesem Problem nicht entzogen.  Wenn im Speichersystem dieses Anbieters die Option " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schnelle Wiederherstellung</a> " aktiviert ist, verfolgt das System die f√ºr die Aufzeichnung verwendeten Bl√∂cke und kann bei einem Festplattenfehler nur diese auf ein neues Laufwerk kopieren. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/hx/ld/4jhxldznr4kaf8va446yntwnc6k.jpeg"></div><br><p>  Die Option "Schnelle Neuerstellung" ist beim Erstellen neuer Volumes nicht standardm√§√üig aktiviert  Die Verwendung wirkt sich auf die Leistung aus, insbesondere bei zuf√§lligen Schreibvorg√§ngen, da: </p><br><p></p><ol><li>  Es ist notwendig, Datens√§tze in Bl√∂cken zu verfolgen. </li><li>  Bei der Neuerstellung werden Pr√ºfsummen nicht f√ºr nicht zugewiesenen Speicherplatz neu berechnet. Wenn daher ein neuer Eintrag in diesem Bereich vorgenommen wird, muss dieser zun√§chst ‚Äûinitialisiert‚Äú werden. </li></ol><br><p>  Daher wird nicht empfohlen, Fast Rebuild f√ºr Volumes zu verwenden, z. B. mit hoch geladenen Datenbanken oder in Video√ºberwachungssystemen, bei denen das Volume immer noch zu 100% voll ist.  F√ºr Datei- oder Mailserver ist diese Option jedoch nur sehr n√ºtzlich. </p><br><h2>  Anstelle einer Schlussfolgerung </h2><br><p>  Jeder Speicherhersteller impliziert, dass seine Ger√§te zuverl√§ssig sind.  Und wenn es bei der Entwicklung von Ger√§ten keine fatalen Fehleinsch√§tzungen gibt und ein unglaublicher Durst nach Einsparungen bei der Herstellung und Pr√ºfung besteht, k√∂nnen wir im Allgemeinen dem Anbieter zustimmen.  Sie m√ºssen jedoch verstehen: </p><br><p></p><ul><li>  Die grundlegende Fehlertoleranz von Speichersystemen ist in erster Linie eine M√∂glichkeit, bei Ausfall einer oder mehrerer Komponenten weiterhin Zugriff auf Daten zu haben. </li><li>  Zus√§tzliche Optionen in Bezug auf Fehlertoleranz (wie die oben beschriebenen) sind die Beseitigung bestimmter Arten von Fehlfunktionen und die Erh√∂hung Ihrer Chancen auf Zugriff auf Daten. </li><li>  Eine 100% ige Zuverl√§ssigkeit kommt leider nicht vor.  Um dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Problem</a> so nahe wie m√∂glich zu kommen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bem√ºhen sich die</a> meisten vern√ºnftigen Speicheranbieter (und darunter auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qsan</a> ), ihre Produkte sowohl in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bezug</a> auf Hardware als auch in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bezug</a> auf Software kontinuierlich zu verbessern. </li></ul><br><p>  Gleichzeitig sollte man nicht vergessen, dass keine absolute Zuverl√§ssigkeit von Speichersystemen die Verf√ºgbarkeit von Sicherungskopien, klaren und einge√ºbten Pl√§nen f√ºr die Wiederherstellung im Falle eines Unfalls und den betrieblichen technischen Support f√ºr den Anbieter nicht aufhebt. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de459214/">https://habr.com/ru/post/de459214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de459198/index.html">Abfrageleistungsanalyse in ClickHouse. Yandex-Bericht</a></li>
<li><a href="../de459204/index.html">10 ++ M√∂glichkeiten, mit Hardwareregistern in C ++ zu arbeiten (z. B. IAR und Cortex M)</a></li>
<li><a href="../de459206/index.html">9 Jahre in einem Monolithen bei Node.JS</a></li>
<li><a href="../de459208/index.html">Laufen mit Prothesen: Nekstgen-Simulation der menschlichen Bewegung mit Muskeln, Knochen und einem neuronalen Netzwerk</a></li>
<li><a href="../de459212/index.html">Eigenschaftsimplementierung in C ++</a></li>
<li><a href="../de459216/index.html">B-Baum-Datenstruktur</a></li>
<li><a href="../de459220/index.html">Integrationstests zur √úberpr√ºfung auf Speicherlecks</a></li>
<li><a href="../de459224/index.html">Vom Makler zum Spieleentwickler 2. ‚ÄûOperation: Android‚Äú</a></li>
<li><a href="../de459226/index.html">"Fast-PoE und Perpetual-PoE - sind das neue Standards oder nicht?"</a></li>
<li><a href="../de459230/index.html">Eine Reise zum Call Center und Product Backlog mit den Augen des Entwicklers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>