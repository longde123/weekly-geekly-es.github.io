<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚷 👨🏼‍🔧 📖 Fehlertoleranz im Qsan-Speicher 🕴🏾 🎐 📈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In der IT-Infrastruktur, in der Virtualisierung weit verbreitet ist, sind Speichersysteme heute der Kern, in dem alle virtuellen Maschinen gespeichert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fehlertoleranz im Qsan-Speicher</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/459214/"><p> In der IT-Infrastruktur, in der Virtualisierung weit verbreitet ist, sind Speichersysteme heute der Kern, in dem alle virtuellen Maschinen gespeichert sind.  Durch den Ausfall dieses Knotens kann die Arbeit des Rechenzentrums vollständig gestoppt werden.  Obwohl ein beträchtlicher Teil der Serverausrüstung in der einen oder anderen Form „standardmäßig“ Fehlertoleranz aufweist, haben sie gerade aufgrund der besonderen Rolle von Speichersystemen im Rechenzentrum erhöhte Anforderungen an die „Überlebensfähigkeit“. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ql/un/l2/qlunl2stlgw2znymm7koq0fauvg.jpeg"></div><br><a name="habracut"></a><br><p>  Die effektivste Methode zur Gewährleistung der Fehlertoleranz in der IT ist die Verwendung mehrerer Instanzen von Geräten und Software (im einfachsten Fall Duplizierung).  Natürlich kann der Speicher vollständig dupliziert werden.  Für die Notfallwiederherstellung wird genau dieser Ansatz verwendet.  Aber nicht alle Unternehmen können sich eine solche Lösung leisten.  Es geht nicht nur um die doppelten Kosten für Geräte, sondern auch um andere Kosten für die Organisation einer solchen Lösung und deren weitere Unterstützung. </p><br><p>  Die Möglichkeit der Vervielfältigung von Geräten beseitigt jedoch nicht die Notwendigkeit, eine Fehlertoleranz auf Komponentenebene sicherzustellen.  Insbesondere wird Redundanz auf Speichersysteme für Stromversorgungen, Kühlmodule, Antriebe und natürlich Steuerungen angewendet.  All dies ist längst alltäglich geworden.  Ohne ein ähnliches Design ist es schwierig, Speicherplatz zu finden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qsan</a> hier ist keine Ausnahme.  Wir möchten in diesem Artikel jedoch auf das eingehen, was nicht sofort ersichtlich ist, und gleichzeitig soll in erster Linie die Fehlertoleranz des gesamten Systems erhöht werden. </p><br><h3>  Kühlmodule </h3><br><p>  Sehr oft werden in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Speichersystemen</a> mit 2U-3U-Gehäusen kombinierte Module verwendet, die Netzteile und Lüfter kombinieren.  Einerseits ist es praktisch, weil  Es muss nur eine Einheit gewartet werden.  Wenn andererseits das Kühlsystem ausfällt, kann die Stromversorgung zwangsweise abgeschaltet werden, um eine Überhitzung zu vermeiden.  Und es scheint, dass nicht die kritischste Situation eintreten wird, aber es lohnt sich offensichtlich nicht, Speicherschwachstellen hinzuzufügen. </p><br><p>  Die Kühlung in Qsan-Speichersystemen ist in Form separater Module mit einem "heißen" Ersatz organisiert, unabhängig von der Stromversorgung.  Tatsächlich haben die Netzteile ihre eigenen Lüfter, die das Netzteil selbst durchbrennen lassen.  Das Kühlmodul bietet Platz für zwei unabhängige Lüfter, die sich gegenseitig versichern.  Das Speichersystem enthält zwei solcher Module: rechts und links - für einen effizienten Luftstrom aller Komponenten.  Wenn einer der Lüfter ausfällt, erhöhen alle anderen automatisch ihre Drehzahl, um den daraus resultierenden Luftmangel auszugleichen.  Aus diesem Grund besteht bei einer Fehlfunktion des Lüfters nicht die Gefahr einer Überhitzung des gesamten Geräts. </p><br><h3>  Verbindungstopologie des Erweiterungsregals </h3><br><p>  Das klassische Schema zum Verbinden von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erweiterungsregalen</a> mit dem Speicher bedeutet eine Topologie, die als Kaskade bezeichnet wird.  In diesem Fall sind die entsprechenden Regal- und Speichercontroller durch ein einziges SAS-Kabel miteinander verbunden.  Insgesamt werden 2 Kabel für ein Dual-Controller-System erhalten.  Wenn Sie das zweite anschließen möchten, wird es auf die gleiche Weise mit dem ersten Regal verbunden.  Usw.  Der Vorteil dieser Topologie ist die einfache Implementierung in Geräte.  Das Minus ist eine gewisse Anfälligkeit für eine plötzliche Unterbrechung des SAS-Schaltkreises aufgrund des Kreuzausfalls nicht verbundener Speichercontroller und Regale oder aufgrund eines Stromausfalls eines der Erweiterungsregale in der Mitte der Kette.  Das Ergebnis ist ein Zugriffsverlust auf einen Teil der Laufwerke und ein möglicher Zusammenbruch der RAID-Gruppe, wenn diese auf mehrere Fälle verteilt ist. </p><br><p>  Vor einem Controller-Cross-Ausfall bietet Qsan Schutz in Form einer internen logischen Kommunikation zwischen Controllern über die Speicher-Backplane.  Das heißt,  Der Speichercontroller sieht nicht nur den direkt mit ihm verbundenen JBOD-Controller, sondern auch den „Nachbar“ -Controller über eine spezielle Verbindung in der Rückwandplatine.  Wenn eine solche Situation auftritt und niemand die SAS-Kabel zwischen dem Speichersystem und dem Regal physisch herauszieht, bleibt der Zugriff auf alle Laufwerke erhalten. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/a8/kh/7f/a8kh7fjyjtcrxcvkyfbjghld4tk.jpeg"></div><br><p>  Um die SAS-Schaltung beispielsweise vor Unterbrechungen zu schützen, die durch das Abschalten des Erweiterungsfachs verursacht werden, wird normalerweise eine andere Verbindungstopologie verwendet - die umgekehrte Kaskade.  In diesem Fall wird das Speichersystem sofort mit dem ersten und letzten Regal in der Kette verbunden und erhält von beiden Seiten Zugriff auf die Laufwerke. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/4w/zq/mr4wzqj7-o1locvqsiiohdbkdzg.jpeg"></div><br><p>  Wenn Sie einen stärkeren Schutz wünschen, können Sie Konfigurationen in größerem Maßstab erstellen, indem Sie beispielsweise die Topologie des Baums verwenden.  Oder erschweren durch eine Kombination der genannten Topologien.  Dies ist aufgrund der großen Anzahl von SAS-Anschlüssen an den Geräten (2 für jeden Speichercontroller und 5 für jeden JBOD-Controller) mit automatischer Erkennung der Eingangs- / Ausgangsbetriebsarten möglich.  Die Hauptsache ist, dass der Administrator selbst nicht verwirrt ist.  Und das Speichersystem kann die Konfiguration korrekt konfigurieren. </p><br><h3>  Schneller Wiederaufbau </h3><br><p>  Die Verfügbarkeit von Ersatzlaufwerken im System erhöht die Zuverlässigkeit der Informationsspeicherung erheblich.  Allein die Tatsache, dass solche Festplatten zugewiesen sind, bedeutet jedoch keinen absoluten Schutz.  Tatsache ist, dass der Wiederherstellungsprozess (Neuerstellung) ziemlich zeitaufwändig und oft zeitaufwändig ist.  Die Komplexität ergibt sich aus dem ständigen Zugriff auf Stammdaten.  Das heißt,  Das System muss neben der aktuellen Arbeit auch die Daten auf eine neue Festplatte kopieren.  Die Dauer des Umbaus hängt direkt von der Kapazität des Antriebs und seinen Geschwindigkeitseigenschaften ab.  Da das System nichts über den tatsächlich belegten Speicherplatz weiß, kopiert es beim Wiederherstellen einfach alles: Block für Block. </p><br><p>  Infolgedessen kann die Wiederherstellung einer modernen Festplatte mit hoher Kapazität von mehr als 10 TB und einer ernsthaften Belastung der Speichersysteme leicht eine Woche oder länger dauern.  Beachten Sie auch, dass während des Wiederherstellungsvorgangs die Ausfallwahrscheinlichkeit anderer Laufwerke aufgrund der erhöhten Belastung erheblich zunimmt.  Und dies kann bereits bei der Verwendung von beispielsweise RAID5 eine ernsthafte Gefahr darstellen. </p><br><p>  Als Lösung für dieses Problem sind viele Speicherentwickler besorgt, den Wiederherstellungsprozess zu beschleunigen.  Hierfür können verschiedene Ansätze verwendet werden, aber das Wesentliche ist dasselbe: Während des Wiederaufbaus werden nur wirklich belegte Blöcke kopiert.  Qsan hat sich diesem Problem nicht entzogen.  Wenn im Speichersystem dieses Anbieters die Option " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schnelle Wiederherstellung</a> " aktiviert ist, verfolgt das System die für die Aufzeichnung verwendeten Blöcke und kann bei einem Festplattenfehler nur diese auf ein neues Laufwerk kopieren. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/hx/ld/4jhxldznr4kaf8va446yntwnc6k.jpeg"></div><br><p>  Die Option "Schnelle Neuerstellung" ist beim Erstellen neuer Volumes nicht standardmäßig aktiviert  Die Verwendung wirkt sich auf die Leistung aus, insbesondere bei zufälligen Schreibvorgängen, da: </p><br><p></p><ol><li>  Es ist notwendig, Datensätze in Blöcken zu verfolgen. </li><li>  Bei der Neuerstellung werden Prüfsummen nicht für nicht zugewiesenen Speicherplatz neu berechnet. Wenn daher ein neuer Eintrag in diesem Bereich vorgenommen wird, muss dieser zunächst „initialisiert“ werden. </li></ol><br><p>  Daher wird nicht empfohlen, Fast Rebuild für Volumes zu verwenden, z. B. mit hoch geladenen Datenbanken oder in Videoüberwachungssystemen, bei denen das Volume immer noch zu 100% voll ist.  Für Datei- oder Mailserver ist diese Option jedoch nur sehr nützlich. </p><br><h2>  Anstelle einer Schlussfolgerung </h2><br><p>  Jeder Speicherhersteller impliziert, dass seine Geräte zuverlässig sind.  Und wenn es bei der Entwicklung von Geräten keine fatalen Fehleinschätzungen gibt und ein unglaublicher Durst nach Einsparungen bei der Herstellung und Prüfung besteht, können wir im Allgemeinen dem Anbieter zustimmen.  Sie müssen jedoch verstehen: </p><br><p></p><ul><li>  Die grundlegende Fehlertoleranz von Speichersystemen ist in erster Linie eine Möglichkeit, bei Ausfall einer oder mehrerer Komponenten weiterhin Zugriff auf Daten zu haben. </li><li>  Zusätzliche Optionen in Bezug auf Fehlertoleranz (wie die oben beschriebenen) sind die Beseitigung bestimmter Arten von Fehlfunktionen und die Erhöhung Ihrer Chancen auf Zugriff auf Daten. </li><li>  Eine 100% ige Zuverlässigkeit kommt leider nicht vor.  Um dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Problem</a> so nahe wie möglich zu kommen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bemühen sich die</a> meisten vernünftigen Speicheranbieter (und darunter auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qsan</a> ), ihre Produkte sowohl in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bezug</a> auf Hardware als auch in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bezug</a> auf Software kontinuierlich zu verbessern. </li></ul><br><p>  Gleichzeitig sollte man nicht vergessen, dass keine absolute Zuverlässigkeit von Speichersystemen die Verfügbarkeit von Sicherungskopien, klaren und eingeübten Plänen für die Wiederherstellung im Falle eines Unfalls und den betrieblichen technischen Support für den Anbieter nicht aufhebt. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de459214/">https://habr.com/ru/post/de459214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de459198/index.html">Abfrageleistungsanalyse in ClickHouse. Yandex-Bericht</a></li>
<li><a href="../de459204/index.html">10 ++ Möglichkeiten, mit Hardwareregistern in C ++ zu arbeiten (z. B. IAR und Cortex M)</a></li>
<li><a href="../de459206/index.html">9 Jahre in einem Monolithen bei Node.JS</a></li>
<li><a href="../de459208/index.html">Laufen mit Prothesen: Nekstgen-Simulation der menschlichen Bewegung mit Muskeln, Knochen und einem neuronalen Netzwerk</a></li>
<li><a href="../de459212/index.html">Eigenschaftsimplementierung in C ++</a></li>
<li><a href="../de459216/index.html">B-Baum-Datenstruktur</a></li>
<li><a href="../de459220/index.html">Integrationstests zur Überprüfung auf Speicherlecks</a></li>
<li><a href="../de459224/index.html">Vom Makler zum Spieleentwickler 2. „Operation: Android“</a></li>
<li><a href="../de459226/index.html">"Fast-PoE und Perpetual-PoE - sind das neue Standards oder nicht?"</a></li>
<li><a href="../de459230/index.html">Eine Reise zum Call Center und Product Backlog mit den Augen des Entwicklers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>