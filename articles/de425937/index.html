<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèª ü§¥ üí∂ CoreBluetooth in der Praxis üèÑ ü§ê üë©üèø‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Praktisches CoreBluetooth f√ºr die √úbersetzung von Peripherieger√§ten 
 Als ich vor ein paar Jahren zum ersten Mal in einem Arbeitsprojekt auf Bluetooth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CoreBluetooth in der Praxis</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425937/"><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Praktisches CoreBluetooth f√ºr die</a> √úbersetzung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Peripherieger√§ten</a> </h3><br>  Als ich vor ein paar Jahren zum ersten Mal in einem Arbeitsprojekt auf Bluetooth stie√ü, fand ich diesen Artikel, der sehr hilfreich war, um zu verstehen, wie es funktioniert, um einen ‚ÄûAusgangspunkt‚Äú zu finden.  Hoffe, das ist praktisch f√ºr Anf√§nger. <br><br>  √úber den Autor: Yoav Schwartz ist ein f√ºhrender iOS-Entwickler bei Donkey Republic, einem Biker-Sharing-System in Kopenhagen, das sich bem√ºht, die Einstellung zum Radfahren zu √§ndern.  Als n√§chstes werden wir im Namen des Autors sprechen. <br><br>  In diesem Artikel werde ich √ºber praktische Techniken f√ºr die Arbeit mit CoreBluetooth sprechen.  Zuerst √ºber Bluetooth Low Energy (BLE), weil nicht jeder mit dieser Technologie vertraut ist, dann √ºber CoreBluetooth, Apples Framework, mit dem wir mit BLE-Ger√§ten interagieren k√∂nnen.  Ich werde Ihnen auch einige der Entwicklungstricks erz√§hlen, die ich selbst beim Debuggen, Weinen und Abrei√üen von Haaren gelernt habe. <br><a name="habracut"></a><br><h4>  Bluetooth energiesparend </h4><br>  Was ist BLE f√ºr den Anfang?  Es ist wie Bluetooth, das wir alle in Lautsprechern, Headsets usw. verwenden, aber es gibt einen Unterschied - dieses Protokoll verbraucht sehr wenig Strom.  Normalerweise kann eine einzelne Batterieladung f√ºr ein BLE-f√§higes Ger√§t Monate oder sogar Jahre dauern (abh√§ngig nat√ºrlich davon, wie das Ger√§t verwendet wird).  Dies erm√∂glicht es uns, Dinge zu tun, die f√ºr ‚Äûnormales‚Äú Bluetooth bisher nicht verf√ºgbar waren.  Dieser Standard hei√üt Bluetooth 4.0. Alles begann mit einer Technologie namens Smart Bluetooth, die sich sp√§ter zu BLE entwickelte.  Es gibt ein 200-seitiges <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Handbuch</a> , Sie k√∂nnen vor dem Schlafengehen lesen, spannende Lekt√ºre. <br><br>  BLE ist sehr sparsam im Energieverbrauch und das Protokoll selbst ist nicht sehr komplex.  Warum also ble?  Wie k√∂nnen wir es benutzen?  Das allererste und h√§ufigste Beispiel ist ein Herzfrequenzsensor.  In der Regel misst und √ºbertr√§gt dieses Ger√§t Ihre Herzfrequenz √ºber das Protokoll.  Es gibt auch alle Arten von Sensoren, mit denen Sie √ºber BLE eine Verbindung herstellen und die von ihnen gesammelten Daten lesen k√∂nnen.  Schlie√ülich gibt es iBeacons, die Ihnen die ‚ÄûN√§he‚Äú zu einem Ort anzeigen k√∂nnen.  In Anf√ºhrungszeichen, da Apple auf iPhones die Erkennung von iBeacons als normale Bluetooth-Ger√§te blockiert. Daher m√ºssen wir mit CoreLocation arbeiten.  Im Allgemeinen ist dies das Internet der Dinge: Sie k√∂nnen eine Verbindung zu einem Fernseher oder einer Klimaanlage herstellen und mit diesem Protokoll kommunizieren. <br><br><h4>  Wie funktioniert es </h4><br>  Wir haben einen Perifer - dies sind die Ger√§te, die das Bluetooth-Protokoll verwenden.  Jedes Peripherieger√§t verf√ºgt √ºber Dienste, es kann eine beliebige Anzahl von Diensten geben, und jedes von ihnen weist Merkmale auf.  Sie k√∂nnen den Perifer als Server betrachten.  Mit all den folgenden Konsequenzen: Manchmal schaltet es sich aus, manchmal braucht es Zeit, um Daten zu √ºbertragen, und manchmal kommen diese Daten √ºberhaupt nicht. <br><br>  Im Allgemeinen haben wir einen Dienst mit vielen Merkmalen, von denen jedes einen Wert, einen Typ usw. enth√§lt.  Um mit CoreBluetooth arbeiten zu k√∂nnen, m√ºssen Sie nicht alles wissen. Das Wichtigste ist, die Daten zu lesen.  Dies versuchen wir zu erhalten, zu modifizieren oder f√ºr unsere eigenen Zwecke zu verwenden.  Wir brauchen diese Daten und das Wissen, was wir damit machen k√∂nnen. <br><br>  Hier ist eine kurze Einf√ºhrung in BLE, da es Tausende von Ressourcen gibt, die technische Funktionen besser erkl√§ren als ich. <br><br><h4>  Core Bluetooth </h4><br>  Core Bluetooth wurde von Apple vor langer Zeit in iOS 5 eingef√ºhrt. Apple begann viel fr√ºher als Android mit der Einf√ºhrung von BLE in seine Ger√§te und der wachsenden Popularit√§t der Technologie.  Viele Entwickler verwenden dieses Framework in ihren Anwendungen, im Gro√üen und Ganzen ist es nur ein Wrapper, da die BLE-Protokolle selbst recht komplex sind.  Nicht wirklich, aber glauben Sie mir, damit m√∂chte ich nicht jeden Tag arbeiten.  Wie viele andere Dinge hat Apple es in ein sch√∂nes und praktisches Paket verpackt, mit dem Sie Begriffe verwenden k√∂nnen, die wir alle, dumme Entwickler, verstehen k√∂nnen. <br><br>  Jetzt ist es an Ihnen, Ihnen zu sagen, was Sie wirklich √ºber die Klassen wissen m√ºssen, die an der Kommunikation mit dem Framework beteiligt sind.  Unser Hauptdarsteller ist CBCentralManager. Erstellen Sie es: <br><br><pre><code class="plaintext hljs">manager = CBCentralManager(delegate:self, queue:nil, options: nil)</code> </pre> <br>  Oben haben wir einen neuen Manager erstellt, der seinen Delegierten angibt. Andernfalls k√∂nnen wir ihn nicht verwenden.  Wir geben auch die Warteschlange an, in unserem Fall null, was bedeutet, dass die gesamte Kommunikation mit dem Manager in der Hauptwarteschlange erfolgt. <br><br>  Sie m√ºssen verstehen, was genau Sie tun werden - die Verwendung einer separaten Warteschlange erschwert die Anwendung, aber die Benutzer werden Sie nat√ºrlich mehr lieben.  Wenn Sie mit nur einem Ger√§t kommunizieren m√∂chten, k√∂nnen Sie die Hauptwarteschlange nicht st√∂ren und verwenden.  Wenn Sie dennoch experimentieren m√∂chten, erstellen Sie eine Warteschlange, geben Sie sie im Konstruktor an und vergessen Sie nicht, zur Hauptwarteschlange zur√ºckzukehren, bevor Sie die Ergebnisse an einer anderen Stelle verwenden. <br><br>  Optionen  Hier gibt es nichts besonders Interessantes, vielleicht ist die Hauptsache - wenn Sie einen Manager erstellen und Bluetooth f√ºr den Benutzer deaktiviert ist - die Anwendung informiert ihn dar√ºber, aber fast jeder klickt auf "OK" (was Bluetooth nicht wirklich enth√§lt), weshalb ich diese Option auch verwende Ich benutze nicht. <br><br>  Nach dem Erstellen des Managers ruft der Delegat zun√§chst die Methode auf: <br><br><pre> <code class="plaintext hljs">func centralManagerDidUpdateState(_ central: CBCentralManager)</code> </pre> <br>  Wir erhalten also eine Antwort von der Hardware - unabh√§ngig davon, ob der Benutzer Bluetooth aktiviert hat oder nicht. <br>  Erster Tipp: Der Manager ist nutzlos, bis wir die Antwort erhalten, dass Bluetooth aktiviert ist. Sein Status ist. PoweredOn.  Andere Zust√§nde k√∂nnen nur verwendet werden, um den Benutzer aufzufordern, Bluetooth einzuschalten. <br><br><h4>  Ger√§tesuche </h4><br>  Jetzt, wo unser Manager richtig arbeitet, k√∂nnen wir beobachten, <br>  Was ist um uns herum (nach Erhalt des .PoweredOn-Status rufen wir die Funktion scanForPeripheralsWithServices auf :) <br><br><pre> <code class="plaintext hljs">manager.scanForPeripheralsWithServices([CBUUID], options: nil)</code> </pre> <br>  Bei Diensten handelt es sich um ein CBUUID-Array (eine Klasse, bei der es sich um eine universelle 128-Bit-eindeutige Kennung f√ºr die von Bluetooth Low Energy verwendeten Attribute handelt.), Die wir als Filter verwenden, um Ger√§te mit nur diesen UID-S√§tzen zu finden. Dies ist in CoreBluetooth √ºblich . <br><br>  Wenn Sie als Argument nil √ºbergeben, k√∂nnen wir alle Ger√§te in der Umgebung sehen.  F√ºr die Leistung ist es nat√ºrlich besser, ein Array der von uns ben√∂tigten Parameter anzugeben, aber wenn Sie sie nicht kennen, passiert nichts Schreckliches, wenn Sie Null √ºbergeben, niemand stirbt. <br><br>  Da wir die Suche nach Ger√§ten gestartet haben, m√ºssen wir sie stoppen.  Andernfalls wird die Suche fortgesetzt und die Batterie des Benutzers gelandet, bis wir sie stoppen.  Sobald wir das richtige Ger√§t gefunden haben oder die Notwendigkeit f√ºr die Suche verschwindet, h√∂ren wir auf: <br><br><pre> <code class="plaintext hljs">manager.stopScan()</code> </pre> <br>  Jedes Mal, wenn ein neues Ger√§t entdeckt wird, ruft der Manager-Delegat die Funktion didDiscoverPeripheral in der Warteschlange auf, die wir bei der Initialisierung angegeben haben.  Die Funktion √ºbertr√§gt uns das gefundene Ger√§t (Peripherieger√§t), Informationen dar√ºber (AdvertisingData - etwas, das die Chiphersteller jedes Mal anzeigen wollten) und den relativen RSSI-Signalpegel in Dezibel. <br><br><pre> <code class="plaintext hljs">func centralManager(_ central: CBCentralManager, didDiscover peripheral: CBPeripheral, advertisementData: [String : Any], rssi RSSI: NSNumber)</code> </pre> <br>  Zweiter Tipp: Halten Sie immer eine starke Verbindung zum erkannten Perifer.  Wenn dies nicht erfolgt, entscheidet das System, dass wir das gefundene Ger√§t nicht ben√∂tigen, und verwirft es.  Sie wird sich an ihn erinnern, aber wir werden keinen Zugang mehr zu ihm haben.  Andernfalls k√∂nnen wir nicht mit dem Ger√§t arbeiten. <br><br><h4>  Ger√§teverbindung </h4><br>  Wir haben das Ger√§t gefunden, an dem wir interessiert sind - so kommt man zu einer Party und sieht ein h√ºbsches M√§dchen.  Wir wollen uns verbinden, wir nennen die Funktion connectPeripheral - wir bieten "buy a drink" an.  Daher versuchen wir, eine Verbindung zum gew√ºnschten Ger√§t (Peripherieger√§t) herzustellen, und es kann uns "Ja" oder "Nein" sagen, aber unser iPhone ist wirklich gut, sodass wir eine positive Antwort h√∂ren. <br><br><pre> <code class="plaintext hljs">manager.connectPeripheral(peripheral, options: nil)</code> </pre> <br>  Hier haben wir uns an den Manager gewandt, der f√ºr die Verbindungen verantwortlich ist. Wir teilen ihm mit, mit welchem ‚Äã‚ÄãGer√§t wir eine Verbindung herstellen, und geben den Optionen erneut nichts an (wenn Sie wirklich sehr daran interessiert sind, die Optionen kennenzulernen, lesen Sie die Dokumentation, aber Sie k√∂nnen normalerweise darauf verzichten).  Wenn Sie mit dem Ger√§t fertig sind, k√∂nnen Sie am Morgen die Verbindung zum Ger√§t trennen - cancelPeripheralConnection: <br><br><pre> <code class="plaintext hljs">//called to cancel and/or disconnect manager.cancelPeripheralConnection(peripheral)</code> </pre> <br>  Nachdem wir eine Verbindung hergestellt oder getrennt haben, teilt uns der Delegierte Folgendes mit: <br><br><pre> <code class="plaintext hljs">//didConnect func centralManager(central: CBCentralManager!, didConnectPeripheral peripheral: CBPeripheral!) //didDisconnect func centralManager(central: CBCentralManager!, didDisconnectPeripheral peripheral: CBPeripheral!, error: NSError!)</code> </pre> <br>  Nun noch zwei wichtige Tipps.  Das Bluetooth-Protokoll geht von einem Verbindungszeitlimit aus, Apple ist dies jedoch egal.  iOS versucht immer wieder, eine Verbindung herzustellen, und stoppt erst, wenn Sie cancelPeripheralConnection aufrufen.  Dieser Vorgang kann zu lange dauern, daher muss er zeitlich begrenzt werden. Wenn wir am Ende keine erfolgreiche Verbindungsnachricht (didConnectPeripheral) erhalten, m√ºssen wir den Benutzer dar√ºber informieren, dass ein Fehler aufgetreten ist. <br><br>  Wenn Sie keine starke Verbindung zum Peripherieger√§t haben, setzt iOS die Verbindung einfach zur√ºck.  Aus ihrer Sicht bedeutet dies, dass Sie es nicht ben√∂tigen, und die Wartung ist eine ziemlich energieintensive Aufgabe f√ºr den Akku, und wir wissen, wie Apple mit dem Energieverbrauch zusammenh√§ngt. <br><br><h4>  Lassen Sie uns das Ger√§t n√ºtzlich machen </h4><br>  Und so haben wir uns mit dem Ger√§t verbunden, lassen Sie uns etwas damit machen.  Ich habe bereits die Dienste und Funktionen erw√§hnt, die Werte, die sie enthalten. Das ist es, was wir brauchen.  Jetzt haben wir ein Ger√§t, es ist verbunden und wir k√∂nnen seine Dienste durch Aufrufen von peripher.discoverServices erhalten. <br><br><pre> <code class="plaintext hljs">peripheral.discoverServices(nil) func peripheral(peripheral: CBPeripheral!, didDiscoverServices error: NSError!) peripheral.services</code> </pre> <br>  Jetzt klingt es etwas verwirrend, aber der Delegat wird in dem Thread aufgerufen, den wir beim Erstellen des Managers definiert haben, obwohl dies ein Delegat an der Peripherie ist.  Das hei√üt, das System merkt sich, mit welchem ‚Äã‚ÄãStream es arbeitet, und die gesamte Bluetooth-Kommunikation findet in diesem Stream statt.  Es ist wichtig, nicht zu vergessen, zum Hauptbild zur√ºckzukehren, wenn Sie es nicht verwendet haben. <br><br>  Wir haben die Dienste bekommen, aber wir haben immer noch nichts zu arbeiten.  Als N√§chstes m√ºssen Sie peripher.discoverCharacteristics aufrufen. Der Delegat gibt uns alle verf√ºgbaren Merkmale f√ºr die empfangenen Services in didDiscoverCharacteristicsForService.  Jetzt k√∂nnen wir die Werte lesen, <br>  die dort enthalten sind (readValueForCharacteristic) oder um uns zu informieren, sobald sich dort etwas √§ndert - setNotifyValue. <br><br><pre> <code class="plaintext hljs">peripheral.discoverCharacteristics(nil, forService: (service as CBService)) func peripheral(peripheral: CBPeripheral!, didDiscoverCharacteristicsForService service: CBService!, error: NSError!) peripheral.readValueForCharacteristic(characteristic) peripheral.setNotifyValue(true, forCharacteristic: characteristic) func peripheral(peripheral: CBPeripheral!, didUpdateValueForCharacteristic characteristic: CBCharacteristic!, error: NSError!)</code> </pre> <br>  Im Gegensatz zu Android unterscheidet Apple nicht zwischen Lesen und Benachrichtigen.  Das hei√üt, wir wissen nicht, was passiert - wir lesen etwas vom Ger√§t oder dieses Ger√§t sagt uns etwas. <br><br><h4>  Aufnahme auf ein Ger√§t </h4><br>  Wir haben ein Ger√§t, wir lesen Informationen daraus, verwalten es.  So k√∂nnen wir in der Regel Informationen dar√ºber aufzeichnen - gew√∂hnliche NSData.  Sie m√ºssen nur herausfinden, was dieses Ger√§t von uns erwartet und was von ihm akzeptiert wird. <br><br>  Die meisten BLE-Ger√§te verf√ºgen √ºber eine Spezifikation, eine Art API, √ºber die klar ist, wie mit ihnen ‚Äûkommuniziert‚Äú werden soll.  Sie k√∂nnen Daten aus den Merkmalen abrufen, um zumindest eine ungef√§hre Vorstellung davon zu erhalten, was das Ger√§t von uns erwartet. <br><br>  Aus den Spezifikationen erfahren wir, in welchen Merkmalen welche Eigenschaften wir lesen und in welchen wir schreiben, ob wir √ºber √Ñnderungen informiert werden (isNotifying).  Meistens finden wir hier alles, was zum Arbeiten ben√∂tigt wird. <br><br><pre> <code class="plaintext hljs">peripheral.writeValue(data: NSData!, forCharacteristic: CBCharacteristic!, type: CBCharacteristicWriteType) characteristic.properties - OptionSet type characteristic.isNotifying func peripheral(peripheral: CBPeripheral!, didWriteValueForCharacteristic characteristic: CBCharacteristic!, error: NSError!)</code> </pre> <br>  W√§hrend des Aufzeichnungsprozesses teilt uns der Delegierte mit, dass alles gut gelaufen ist (didWriteValueForCharacteristics), dass der gew√ºnschte Wert aktualisiert wurde, und wir k√∂nnen den Benutzer dar√ºber informieren oder diese Informationen anders verwenden. <br><br>  Wir betrachten das Thema in einem sehr engen Abschnitt, der sich auf die Implementierung von Apple st√ºtzt. Daher gibt es eine Reihe von Problemen, mit denen wir uns befassen m√ºssen.  Zum Beispiel eine sehr starke Abh√§ngigkeit von der Delegation, so geliebter Apple. <br><br><h4>  Vererbung von CBPeripheral?  Wenn alles so einfach w√§re </h4><br>  Es scheint, dass wir, da wir ein Ger√§t haben, damit beginnen k√∂nnen, es zu verwenden, aber tats√§chlich sagt es uns nichts √ºber sich selbst.  Vielleicht m√∂chten wir das Schloss, die Klimaanlage oder den Herzfrequenzsensor steuern.  Sie m√ºssen wissen, mit welchem ‚Äã‚ÄãGer√§t wir kommunizieren. <br><br>  Es sieht aus wie Vererbung: Wir haben einen Sonderfall von etwas gemeinsam.  Aus meiner Erfahrung kann ich sagen, dass bei Verwendung der Vererbung etwas √ºberhaupt nicht wie erwartet funktioniert, etwas √ºberhaupt nicht funktioniert und Sie nicht wissen, warum.  Im Allgemeinen m√∂chte ich Sie vor der Idee warnen, CBPeripheral zu erben.  Was tun? <br><br>  Ich empfehle Ihnen, CBPeripheral zum Konstruktor des Objekts hinzuzuf√ºgen, das es verwalten wird.  Dies kapselt es in dieser Klasse.  Verwenden Sie es, um mit dem Ger√§t zu interagieren, und halten Sie eine starke Verbindung zu ihm, damit iOS die Verbindung nicht unterbricht.  Das Wichtigste ist jedoch, dass diese Klasse als Delegat verwendet wird. Andernfalls ist es schwierig, alle Ger√§te an einem Ort zu verwalten. Dies bedroht eine Reihe von anderen. <br><br><h4>  Verbinden und Arbeiten mit CBPeripheralDelegate </h4><br>  Also verbinden wir uns mit dem Ger√§t und wollen CBPeripheralDelegate sein.  Es gibt noch eine Nuance: W√§hrend Sie mit dem Ger√§t arbeiten, seine Dienste und Eigenschaften abfragen, lesen und schreiben, findet fast die gesamte Kommunikation mit dem Peripherieger√§t statt.  Alles au√üer der Verbindung. <br><br>  Nat√ºrlich m√∂chten wir die gesamte Kommunikation an einem Ort konzentrieren, aber der Manager sollte wissen, was mit dem Ger√§t passiert.  Und die Schwierigkeit besteht darin, eine Quelle der Wahrheit zu haben, um sicherzustellen, dass jeder rechtzeitig dar√ºber informiert wird, was mit dem Ger√§t passiert.  Zu diesem Zweck √ºberwachen wir den Status des Peripherieger√§ts - es kann sich von getrennt, verbunden und verbunden √§ndern.  Es informiert Sie immer √ºber die aktuelle Situation.  Es bleibt eine Status√§nderung in unserer Steuereinrichtung zu abonnieren, √ºber die ich bereits gesprochen habe. Dadurch wird es m√∂glich, von einem Ort aus mit dem Ger√§t zu kommunizieren. <br><br><h4>  N√§he </h4><br>  Ein sehr wichtiger Punkt, da es schwierig ist, eine normale Dokumentation zu diesem Thema zu finden.  Bei Apple und ihren iBeacons ist alles einfach. Sie sagen uns, wie nah wir am Bluetooth-Ger√§t sind. <br>  Leider ist es uns nicht so einfach, mit Ger√§ten von Drittanbietern zu arbeiten.  Und mehr als einmal musste das n√§chstgelegene Ger√§t ermittelt werden.  Es ist auch schwer zu verstehen, ob sich das Ger√§t im verf√ºgbaren Bereich befindet oder nicht.  Wenn Sie nach Ger√§ten suchen, werden Sie manchmal nur einmal √ºber sich selbst informiert und verschwinden. Der Verbindungsversuch ist dann erfolglos. <br><br>  Wir verwenden die folgende Methode: Speichern Sie einen Stapel mit Datums- und Signalst√§rkebezeichnungen (RSSI) f√ºr jede in DiscoveryPeripheral empfangene Nachricht.  Wenn jemand auf CoreLocation gesto√üen ist, √§hnelt unsere Methode der Speicherung von Zeitstempeln und entsprechenden Koordinaten.  Je h√∂her das Signal (RSSI) ist, desto n√§her ist das Ger√§t normalerweise.  Es ist schwieriger zu verstehen, ob sich ein Ger√§t in einem zug√§nglichen Bereich befindet oder nicht, auch weil dieses Konzept selbst recht flexibel ist.  Daf√ºr verwende ich den gewichteten Durchschnitt des Signals.  Beachten Sie, dass die Signalst√§rke des angeschlossenen Ger√§ts jedes Mal manuell angefordert werden muss, wenn Sie es wissen m√ºssen. <br><br><h4>  Was weiter? </h4><br>  Leider macht Sie dieser Artikel nicht zum Experten, wenn Sie ihn Ihnen auch vorlesen. <br>  es wurde interessant - beachten Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apples CoreBluetooth-Programmierhandbuch</a> , das nicht sehr umfangreich, aber sehr n√ºtzlich ist.  Es gibt noch einige Sendungen von WWDC 2012 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Basic</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Advanced</a> ) und eine von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2013</a> , aber keine Sorge, seitdem hat sich wenig ge√§ndert. <br><br>  Es gibt auch ein Video von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Altconf 2015</a> auf der Realm-Website, in dem die Erfahrungen von John Sher, einem gro√üartigen Mann und Spezialisten, geteilt werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425937/">https://habr.com/ru/post/de425937/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425927/index.html">Wetterstation auf Arduino von A bis Z. Teil 2</a></li>
<li><a href="../de425929/index.html">Google hat den Kampf um den milliardsten Pentagon-Vertrag aufgegeben</a></li>
<li><a href="../de425931/index.html">"Ich m√∂chte die Fabrik im Internet verlassen" - 10 Fragen an den Programmierer, 8. Ausgabe</a></li>
<li><a href="../de425933/index.html">Feuchtigkeit im Rechenzentrum: Warum es wichtig ist</a></li>
<li><a href="../de425935/index.html">Aufh√§ngung der Systemeinheit unter dem Stehtisch</a></li>
<li><a href="../de425939/index.html">DataIncrement - Erg√§nzung zu den Funktionen von phpMyAdmin</a></li>
<li><a href="../de425943/index.html">Kotlin: tiefer graben. Konstruktoren und Initialisierer</a></li>
<li><a href="../de425945/index.html">Tipps f√ºr den professionellen Einsatz von RecyclerView. Teil 1</a></li>
<li><a href="../de425947/index.html">Unternehmensratatouille</a></li>
<li><a href="../de425951/index.html">Wie gehackte Blockchain und Kryptow√§hrungen: 6 erfolgreiche Angriffe "51 Prozent"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>