<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèº üë®üèø‚Äçüåæ üëßüèΩ Software de emulaci√≥n de red Modbus RTU üçå üöæ üçì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 
 Si solo tiene un martillo como herramienta, cada problema comienza a parecerse a un clavo. 

 Abraham Maslow 
 El protocolo Modbus es c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Software de emulaci√≥n de red Modbus RTU</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409111/"><h1>  Introduccion </h1><br><blockquote>  Si solo tiene un martillo como herramienta, cada problema comienza a parecerse a un clavo. <br><br>  <i>Abraham Maslow</i> </blockquote><br>  El protocolo Modbus es conocido tanto por los lectores Habr como por los lectores hicktime.  Se han dedicado muchas publicaciones a su aplicaci√≥n, que son dif√≠ciles de enumerar porque hay muchas de ellas, y de vez en cuando aparecen nuevos art√≠culos aqu√≠ y all√°. <br><br><img src="https://habrastorage.org/webt/2m/xh/ry/2mxhryo9sblm6uzcf0srfxzqkkm.png"><br><br>  La popularidad de este protocolo se debe a su apertura y simplicidad.  El alcance de la aplicaci√≥n es lo suficientemente amplio: desde sistemas profesionales de automatizaci√≥n industrial hasta proyectos aficionados de bricolaje de sistemas de control distribuido, casas "inteligentes", etc.  Este protocolo tambi√©n fue elegido por m√≠ cuando mi equipo se involucr√≥ en la creaci√≥n de software para el simulador de trenes.  El protocolo Modbus RTU en la interfaz f√≠sica RS485 se usa en este simulador para proporcionar datos a la computadora de control desde los controles montados en la consola del conductor (¬°no piense que Modbus se usa en material rodante real!). <br><br>  No vale la pena hablar sobre las dificultades involucradas en la configuraci√≥n de software que interact√∫a con una red de controladores que controlan los equipos.  Especialmente cuando parte de los dispositivos ya existe en el hierro, y la otra parte est√° en proceso de desarrollo y fabricaci√≥n.  En este caso, se requiere que el software de nivel superior se escriba teniendo en cuenta su interacci√≥n con este hardware.  Y es aconsejable escribirlo de tal manera que cree una versi√≥n funcional del sistema de inmediato, sin el uso de "muletas" que siempre son dif√≠ciles de limpiar del c√≥digo. <br><br>  "Necesitamos escribir software cuando los prototipos de trabajo de todo el hierro est√©n listos", dices, y tendr√°s raz√≥n, pero ... ja, ja, esto rara vez sucede en el mundo real.  Y aqu√≠ los emuladores de software vienen en nuestra ayuda. <br><a name="habracut"></a><br><h1>  1. Brevemente sobre Modbus RTU </h1><br>  No hablar√© en detalle sobre el protocolo.  Aquellos que est√©n interesados ‚Äã‚Äãen los detalles pueden usar la b√∫squeda: el protocolo est√° abierto, su especificaci√≥n oficial y mucha informaci√≥n est√° disponible en la red.  Solo puedo decir que en Modbus RTU describe el formato binario de los datos transmitidos y utiliza el cable de par trenzado est√°ndar RS485 como medio de transmisi√≥n.  RS232 tambi√©n se puede usar si la red tiene un transmisor y un receptor, o RS422 para la transmisi√≥n de datos unidireccional. <br><br>  Nos interesar√° RS485, que es una interfaz semid√∫plex, que permite que solo un dispositivo transmita datos a la vez.  El arbitraje del bus en Modbus se lleva a cabo debido a la resistencia del intervalo de silencio obligatorio de 3.5 caracteres a una velocidad de transmisi√≥n dada.  Cada mensaje debe comenzar y terminar con un intervalo de silencio.  Hay un dispositivo maestro en la red y varios esclavos (hasta 31 en un segmento de red, sin el uso de repetidores).  Cada dispositivo esclavo tiene una identificaci√≥n de identificaci√≥n √∫nica (1 a 31).  La transmisi√≥n de datos por esclavos se lleva a cabo solo si el maestro envi√≥ una solicitud para recibir datos de este dispositivo. <br><br>  Una solicitud t√≠pica de asistente se ve as√≠ <br><br><table><tbody><tr><td>  ID </td><td>  C√≥digo de funci√≥n </td><td>  Direcci√≥n de datos </td><td>  Cantidad de datos (2 bytes) </td><td>  Datos </td><td>  CRC16 </td></tr></tbody></table><br>  CRC16 se utiliza para controlar la integridad de los datos transmitidos.  Modus utiliza la notaci√≥n de representaci√≥n de datos Big Endian: para valores de 2 bytes, el byte m√°s significativo dentro del mensaje es lo primero).  El protocolo utiliza cuatro tipos de datos: <br><br><ol><li>  Bobinas - salidas discretas (1 bit) lectura / escritura </li><li>  Entradas discretas: entradas discretas de solo lectura (1 bit) </li><li>  Registros de retenci√≥n: registros de salida (2 bytes) disponibles para lectura / escritura </li><li>  Registros de entrada: registros de entrada (2 bytes) disponibles para leer </li></ol><br>  En respuesta a la solicitud, el esclavo env√≠a datos en el siguiente formato <br><br><table><tbody><tr><td>  ID </td><td>  C√≥digo de funci√≥n </td><td>  La cantidad de datos en bytes. </td><td>  Datos </td><td>  CRC16 </td></tr></tbody></table><br>  Un mensaje recibido del maestro ingresa al b√∫fer de recepci√≥n de todos los dispositivos.  Sin embargo, si el primer byte del b√∫fer de recepci√≥n no coincide con la ID del dispositivo, ignora los datos recibidos, borrando el b√∫fer de recepci√≥n.  Si el mensaje est√° destinado a este dispositivo, forma una respuesta y, despu√©s de mantener el intervalo de silencio, lo env√≠a al maestro. <br><br>  Como dicen, simple, pero con gusto.  Puede leer m√°s sobre todo esto en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">especificaci√≥n del protocolo oficial</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lea</a> sobre los m√©todos para implementar el protocolo en la interfaz en serie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  No nos reunimos aqu√≠ para esto. <br><br>  Al desarrollar software de nivel superior (maestro implementado sobre la base de una PC, por ejemplo) para dicha red, ser√≠a bueno tener un conjunto de herramientas de software que permitan implementar dicho concepto <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/89b/944/3b5/89b9443b5fb11f04536782afce19be3d.png" alt="imagen"></div><br>  El significado de este esquema es el siguiente.  Supongamos que tenemos una parte de los dispositivos incluidos en la red futura.  O hasta ahora no hay tales dispositivos.  Pero existe un deseo ardiente de escribir software para el nivel superior de administraci√≥n, para depurarlo, de modo que cuando la red todav√≠a se implemente en hardware no tengamos que reescribir nada.  Para hacer esto, tendr√° que usar un medio de transmisi√≥n f√≠sica, para lo cual usamos un dispositivo similar a este <br><br><img src="https://habrastorage.org/webt/1x/cz/ja/1xczjafogu-dwd3qnetuijaszma.jpeg"><br><br>  Uno de los adaptadores se utiliza para conectar el software del asistente desarrollado.  Otro es para conectar un emulador de una futura red de esclavos.  A la rama con un conector blanco, conectamos esa parte de la red que ya est√° implementada en el hardware.  Por lo tanto, tenemos la oportunidad de trabajar con calma con el protocolo de comunicaci√≥n est√°ndar, introduciendo gradualmente equipos reales en funcionamiento.  Adem√°s, al entregar el objeto al cliente, no estamos privados de la oportunidad de modificar su software en un entorno de laboratorio c√≥modo sin acceso al objeto.  QSlave en el diagrama es la misma parte de la red emulada por el software.  Naturalmente, debe escribir el software apropiado, que fue realizado por el autor. <br><br><h1>  2. QSlave - emulaci√≥n de red esclava </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">QSlave</a> es un emulador de red modbus RTU multiplataforma abierto.  Puede obtenerlo bajo la licencia GPL v2.0 en Github en el enlace de arriba. <br><br><img src="https://habrastorage.org/webt/4n/nd/am/4nndamsmf4i7ghnfrzzbbc94vqu.png"><br><br>  La aplicaci√≥n est√° desarrollada en C ++ usando el marco Qt.  Qt, en t√©rminos generales, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tiene bibliotecas para trabajar con Modbus</a> , pero los detalles de la tarea: simular una red de esclavos en lugar de un solo esclavo, llevaron al hecho de que las bibliotecas integradas de Qt para Modbus no se usaron aqu√≠.  Para procesar los datos recibidos del puerto serie virtual, se cre√≥ una biblioteca modbus autoescrita.  El c√≥digo de esta biblioteca se implementa como un proyecto separado, es completamente independiente de la interfaz de usuario y se puede usar para obtener conciencia de las simulaciones de software con una funcionalidad m√°s avanzada.  Debido al hecho de que la emulaci√≥n Modbus est√° separada de la interfaz de usuario, la red se configura mediante archivos de configuraci√≥n.  Se eligi√≥ el formato XML (a menudo lo usamos en nuestros proyectos).  Una configuraci√≥n de muestra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√° disponible en el c√≥digo del proyecto</a> .  Un conjunto de configuraciones consta de un archivo principal con la extensi√≥n * .net, que se ve as√≠ <br><br>  <b>ejemplo.net</b> <br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Slave</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span>Traffic light<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  XML-  (  *.xml) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">config</span></span></span><span class="hljs-tag">&gt;</span></span>traffic-light<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Slave</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  y archivos de configuraci√≥n XML para cada uno de los esclavos <br><br>  <b>traffic-light.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>16<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Red signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>17<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Yellow signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>18<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Green signal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Coil</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DiscreteInput</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Ready<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DiscreteInput</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HoldingRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Signal activity time<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>15<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HoldingRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InputRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span>2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">address</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Signals count<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">InputRegister</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Config</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  El √∫ltimo archivo contiene una descripci√≥n de todos los datos disponibles en el dispositivo.  Para descargar la configuraci√≥n, debe abrir el archivo * .net desde el men√∫ del programa QSlave (Archivo ‚Üí Abrir configuraci√≥n).  Todos los archivos de configuraci√≥n deben estar en el mismo directorio.  La configuraci√≥n de ejemplo describe una red desde un dispositivo esclavo, un sem√°foro virtual, cuyas salidas discretas describen las se√±ales, una entrada digital indica un bit del dispositivo listo para funcionar (Listo), el registro de entrada informa el n√∫mero de sem√°foros y el registro de salida establece el tiempo durante el cual est√° encendido Cada una de las se√±ales. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/fea/def/3a4/feadef3a4c17567d127543ee0954b561.png" alt="imagen"><br><br>  Naturalmente, este simulador no simula la l√≥gica interna del dispositivo.  Solo le permite establecer los valores de las celdas de memoria disponibles para el maestro.  Cualquiera de los valores se puede establecer a su discreci√≥n editando la celda correspondiente en la tabla. <br><br>  Para toda su simplicidad, este software nos ayuda a trabajar en el software del simulador (que ya ha sido comisionado) sin salir del laboratorio. <br><br><img src="https://habrastorage.org/webt/qh/9j/ba/qh9jba49bbzglh5ca1t2nryin9a.png"><br><br>  Pero nadie dice que no se puede crear un emulador m√°s avanzado que simule el funcionamiento de los dispositivos de red virtuales.  Para crearlo, puede usar el c√≥digo de la biblioteca modbus disponible en el paquete QSlave. <br><br><h1>  3. QMaster - emulaci√≥n del dispositivo maestro </h1><br>  Para crear esclavos, depurar su firmware, necesita una simulaci√≥n de asistente.  Hay varios emuladores abiertos, como, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">QModbus</a> .  Lo usamos en nuestro trabajo, hasta que decidimos aumentar la velocidad de transferencia de datos a 250 kBit / s.  QModbus no permite esto.  Fue posible reconstruirlo desde las fuentes para Linux, pero nuestros ingenieros electr√≥nicos est√°n sentados en Windows, y donde el ensamblaje no fue por varias razones.  Result√≥ que esta aplicaci√≥n est√° escrita en Qt 4, utiliza una biblioteca libmodbus de terceros.  Quer√≠a tener una soluci√≥n multiplataforma en Qt5, especialmente porque Qt5 ya funciona con Modbus fuera de la caja.  Por lo tanto, su an√°logo fue escrito usando la pila de la biblioteca Qt Modbus - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">QMaster</a> .  Tambi√©n est√° disponible en Github en las mismas condiciones. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a13/5fa/5b2/a135fa5b2781d646d18010960defd69d.png" alt="imagen"><br><br><h1>  Conclusi√≥n </h1><br>  En conclusi√≥n, dir√© que trabajo (en el trabajo) principalmente en proyectos cerrados.  Sin embargo, las herramientas descritas las desarroll√© personalmente por iniciativa propia en mi tiempo libre.  Adem√°s, en la versi√≥n de Windows, est√°n est√°ticamente vinculados con el c√≥digo Qt GPL, por lo que debo transmitirlos a la comunidad en las mismas condiciones que Qt recibi√≥.  Adem√°s, estas herramientas pueden ser √∫tiles para el lector. <br><br>  Gracias por su atencion! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es409111/">https://habr.com/ru/post/es409111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es409099/index.html">¬øQu√© regalar para el a√±o nuevo? Problema 2017</a></li>
<li><a href="../es409101/index.html">Formas cient√≠ficas para superar la fatiga: nootr√≥picos, caf√© y neurotecnolog√≠a</a></li>
<li><a href="../es409103/index.html">Crispr Therapeutics planea los primeros ensayos cl√≠nicos para el tratamiento de enfermedades gen√©ticas</a></li>
<li><a href="../es409105/index.html">Las criptomonedas m√°s grandes, su resultado y por qu√© NiceHash no rob√≥ en casa</a></li>
<li><a href="../es409107/index.html">Programaci√≥n y transmisi√≥n de datos a Arduino por aire usando el ESP8266. Tercera parte Hola ANDROID</a></li>
<li><a href="../es409113/index.html">Un poco, pero agradable: una taza que regula la temperatura de la bebida.</a></li>
<li><a href="../es409115/index.html">Bandas sonoras de juegos de culto: pestilencia, utop√≠a y piolet</a></li>
<li><a href="../es409119/index.html">Intel ‚ùÑ 2017. Resultados del a√±o</a></li>
<li><a href="../es409121/index.html">Qu√© es: el mercado ruso de servicios de transmisi√≥n</a></li>
<li><a href="../es409123/index.html">C√≥mo hacer un sintetizador conveniente con tus propias manos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>