<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèø üôéüèΩ üë©üèª‚Äçüè≠ Programaci√≥n moderna: una mirada despu√©s de 25 a√±os de descanso o como escrib√≠ el bot para Telegram üê¢ üìë üïç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La tarea parece simple cuando no sabes nada al respecto y cuando decides. 

 En un d√≠a "maravilloso", me di cuenta de que no estoy interesado en senta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programaci√≥n moderna: una mirada despu√©s de 25 a√±os de descanso o como escrib√≠ el bot para Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477178/"> La tarea parece simple cuando no sabes nada al respecto y cuando decides. <br><br>  En un d√≠a "maravilloso", me di cuenta de que no estoy interesado en sentarme en numerosos foros, pero quiero crear mi propio canal y compartir "sabidur√≠a". <br><br>  Me gustan las funciones de Telegram integradas, incluidos los bots, por lo que el canal en forma de blog se cre√≥ all√≠.  Comenz√≥ a buscar bots para ayudar a escribir mensajes ...  y como no quiero encontrarlo.  Bueno, escr√≠belo t√∫ mismo.  Se aconseja a las personas inteligentes que escriban en Python. <br><br>  Le√≠ el primer tutorial en Internet en 149 p√°ginas.  Estoy familiarizado con Pascal, FoxPro, Interbase e incluso (ja, ja 3 veces) hace 20 a√±os vend√≠ mis programas, y luego de alguna manera no funcion√≥, entr√© en el comercio.  Trabajar como programador me ayud√≥ mucho a establecer tareas para codificadores por cierto.  Pero volviendo a Python, parece que no es nada complicado, porque tambi√©n fue posible programar en BASIC, y este no es mi diploma universitario con un complejo de hardware y software del generador de verificaci√≥n MIG en Assembler.  Un problema, todo fue hace mucho tiempo, as√≠ que volviendo al encabezado, parece que es simple, porque todav√≠a no s√© nada sobre la tarea, pero vale la pena intentarlo. <br><br>  Decid√≠ que es m√°s conveniente hacer un proyecto desde un tel√©fono inteligente a Android, porque siempre est√° a mano.  Entonces pon: <br><br><ol><li>  Pydroid 3 - IDE para Python 3 Realmente Python para Android. </li><li>  @BotFather, en Telegram, instalamos el padre de todos los bots; lo necesitar√° para obtener el identificador de su bot y realizar configuraciones b√°sicas. </li><li>  Rebootr Aplicaci√≥n para lanzar un proyecto en heroku. </li><li>  <a href="http://pocketgit.com/">GIT</a> Una aplicaci√≥n para el alojamiento en l√≠nea de repositorios. </li><li>  Windscribe sin VPN en cualquier lugar? </li><li>  Termux Terminal emulador y entorno Linux. </li></ol><br>  ¬øY cu√°l es el resultado final?  La programaci√≥n en un tel√©fono inteligente es posible en teor√≠a, pero imposible en la pr√°ctica.  Verifique el c√≥digo tanto como sea posible, corrija el error, investigue el rendimiento. <br><a name="habracut"></a><br>  Una introducci√≥n tan larga y lo que quer√≠a obtener de mi bot.  Al principio me pareci√≥ suficiente agregar un Hashtag al final del mensaje.  Entonces se me ocurri√≥ "cubrirlo" con un enlace a mi canal, por lo que con la nueva publicaci√≥n habr√° una incitaci√≥n adicional a la fuente del canal.  Luego, agreg√≥ la automatizaci√≥n del enlace de origen, de donde obtengo el mensaje.  A continuaci√≥n, har√© una digresi√≥n.  La publicidad, por supuesto, es el motor del progreso.  Pero a veces su cantidad se dispara.  Telegram fue elegido por m√≠, entre otras cosas, porque existe la oportunidad de luchar contra este √∫ltimo.  Respeto a los lectores de mi canal y, por lo tanto, limpio las noticias interesantes que se encuentran en Ineta de la publicidad y las env√≠o al canal.  Al mismo tiempo, respeto a los autores y casi siempre doy un enlace a la fuente en forma de "Leer m√°s ...".  Debido a la aversi√≥n a la publicidad, descargo contenido de YouTube y lo subo a mi canal como un archivo de video.  En cierto momento, el bot que descarg√≥ el video se volvi√≥ loco y comenz√≥ a enviarme anuncios cada hora.  Entonces, en mi bot, tuve la oportunidad de descargar videos de YouTube.  Recientemente, por cierto, conoc√≠ al autor de este bot, estaba muy sorprendido, porque  Seg√∫n √©l, env√≠a anuncios "solo" 20 veces al mes.  Lo mismo sucedi√≥ con el bot que hace la marca de agua: se envi√≥ al horno y tuve la oportunidad de hacer una marca de agua. <br><br>  Para escribir un programa desde cero, tuve que buscar mucha informaci√≥n en Internet.  Espero que aquellos que sigan mis pasos me ayuden.  Entonces, ¬øde d√≥nde obtuve la informaci√≥n y qu√© utilic√©? <br><br><ol><li>  Los art√≠culos sobre Habrr realmente me ayudaron.  Por lo tanto, no volver√© a escribir c√≥mo y qu√© instalar.  Todo esta ahi.  Por cierto, contact√© a los autores de manera personal y nunca me negaron mi ayuda. </li><li>  <a href="https://github.com/">github Un servicio de alojamiento de repositorio en l√≠nea con todas las funciones de control de versiones distribuidas y funcionalidad de control de fuente.</a>  <a href="https://git-scm.com/book/ru/v2">Cartilla</a> </li><li>  <a href="http://heroku.com/">heroku es una plataforma PaaS basada en la nube que admite varios lenguajes de programaci√≥n.</a>  Muy r√°pidamente lo abandon√≥. </li><li>  <a href="https://github.com/eternnoir/pyTelegramBotAPI/">pyTelegramBotAPI</a> : una de las bibliotecas principales al escribir un bot para Telegrams. </li><li>  <a href="https://mastergroosha.github.io/telegram-tutorial/">Tutorial de ortograf√≠a de bot</a> </li><li>  <a href="https://pythonworld.ru/samouchitel-python">Python 3 para principiantes</a> </li><li>  <a href="https://tlgrm.ru/docs/bots">Bots: informaci√≥n para desarrolladores</a> </li><li>  <a href="http://htmlbook.ru/">Referencia HTML</a> </li><li>  <a href="https://rus.windscribe.com/">¬øEn ninguna parte sin una VPN?</a> </li></ol><br>  Se mostrar√° una segunda digresi√≥n o plan de guerra.  Cuando comenc√© a escribir el bot, lo primero que mir√© fueron los c√≥digos de otra persona.  Si no hay kamenty, dif√≠cilmente se puede entender: <br><br>  La tierra tembl√≥ como nuestros senos <br>  Caballos mezclados en un mont√≥n, gente, <br>  Y voleas de mil ca√±ones <br>  Fundido en un largo aullido ... <br><br>  Lermontov escribi√≥ sobre el c√≥digo.  El mont√≥n contiene funciones, decoradores.  No hay c√≥digo de belleza, a nadie le importan los recursos.  Aunque es muy probable que la belleza sea vista por el raro masoquista.  El significado de la frase de un programador familiar "Mira el programa, tal vez puedas resolverlo" me lleg√≥ muy r√°pidamente.  La explosi√≥n cerebral m√°s importante que tuve fue cuando finalmente me di cuenta de que el c√≥digo es impulsado por eventos, no secuencial.  Este es un nivel diferente. <br><br>  El segundo problema es la falta de buena documentaci√≥n.  Incluso en Basurm.  Dar√© un ejemplo.  Le env√≠o una foto a telegramas, y √©l la sacude descaradamente.  Result√≥ que se escribi√≥ un argumento no v√°lido en la l√≠nea: <br><br><pre><code class="python hljs">file_info = bot.get_file(message.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id)</code> </pre> <br>  ¬øY cu√°l es la documentaci√≥n?  Vamos a la fuente <br><br><img src="https://habrastorage.org/webt/48/gb/af/48gbafdmsf45na582-lmnjbyqzc.jpeg" alt="imagen"><br><br><img src="https://habrastorage.org/webt/tr/mg/xh/trmgxho4oumofemn6yqfkzh33g0.jpeg" alt="imagen"><br><br>  Esta es una matriz.  Puedes caminar por √©l, estudiar d√≥nde vuelve el tama√±o.  Gracias, las personas inteligentes sugirieron qu√© recetar.  <a href="https://habr.com/ru/post/472970/">Aunque de qu√© estoy hablando, incluso si los gur√∫s est√°n perdidos.</a> <a href="https://habr.com/ru/post/472970/"><br></a> <br>  Cuando escrib√≠ el c√≥digo de marca de agua, utilic√© una fuente gratuita y, para ponerla en negrita, apliqu√© la soluci√≥n para mostrar el mensaje tres veces con un desplazamiento de p√≠xeles, no s√© cu√°n hermosa es la soluci√≥n, pero funciona. <br><br><pre> <code class="python hljs">font = ImageFont.truetype(<span class="hljs-string"><span class="hljs-string">"Pillow/Tests/fonts/FreeMono.ttf"</span></span>, width//<span class="hljs-number"><span class="hljs-number">20</span></span>) pos = (width//<span class="hljs-number"><span class="hljs-number">4</span></span>, height - height//<span class="hljs-number"><span class="hljs-number">10</span></span>) text = skanal drawing.text(pos, text, fill=black, font=font) pos = (<span class="hljs-number"><span class="hljs-number">1</span></span> + width // <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> + height - height // <span class="hljs-number"><span class="hljs-number">10</span></span>) drawing.text(pos, text, fill=black, font=font) pos = (<span class="hljs-number"><span class="hljs-number">2</span></span> + width // <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> + height - height // <span class="hljs-number"><span class="hljs-number">10</span></span>) drawing.text(pos, text, fill=black, font=font)</code> </pre><br>  La posici√≥n, como puede ver, se selecciona seg√∫n el tama√±o de la imagen, la altura de la fuente tambi√©n.  Inmediatamente me encontr√© con un punto interesante: aunque la fuente es una parte integral de la biblioteca PIL, ya que la primera l√≠nea dice que funciona localmente, pero en Docker no lo hace.  La salida es descargarlo en el repositorio, agregar la ruta al archivo de entorno y escribir otra ruta en el programa. <br><br>  Otra cosa incomprensible para m√≠ le sucedi√≥ a la imagen despu√©s de procesarla usando la biblioteca PIL (inmediatamente despu√©s de la marca de agua).  Lo env√≠o a mi bot: <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(photo_path, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fi: bot.send_photo(message.chat.id, fi)</code> </pre> <br>  Todo es genial, me gusta la foto.  Entonces necesito agregar un comentario a la imagen y ver si todo se ve hermoso juntos.  Nosotros escribimos: <br><br><pre> <code class="python hljs">bot.send_photo(message.chat.id, message.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id, caption=<span class="hljs-string"><span class="hljs-string">' '</span></span>)</code> </pre> <br>  Por alguna raz√≥n, la imagen original sin procesar entra en el bot.  Bueno, intentemos enga√±ar: getupdates.offset -1 sin sentido, Telegram est√° seguro de que esta es la misma foto.  Ok, hacemos esto: <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(photo_path, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fi: info = bot.send_photo(message.chat.id, fi)</code> </pre> <br>  Reescribir: <br><br><pre> <code class="python hljs">bot.send_photo(message.chat.id, info.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id, caption=<span class="hljs-string"><span class="hljs-string">' '</span></span>)</code> </pre> <br>  El resultado es el mismo: se muestra la imagen original.  Y solo reemplazar el mensaje en el primer argumento con informaci√≥n dio el resultado deseado. <br><br>  Tambi√©n te dar√© una pieza de c√≥digo de nivel de entrada interesante de YouTube (Nota: sin verificaci√≥n de errores): <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> message.entities: <span class="hljs-comment"><span class="hljs-comment">#    pkanal = 6 for item in message.entities: if item.type == "url" and message.text.find(' ') == -1: if 'youtube.com' in message.text or 'youtu.be' in message.text: #    ydl_opts = {'outtmpl': '/tmp/f.mp3', 'preferredcodec': 'mp3', 'max_filesize': 60000000} link_of_the_video = message.text with youtube_dl.YoutubeDL(ydl_opts) as ydl: ydl.download([link_of_the_video]) bot.delete_message(message.chat.id, message.message_id) if os.path.exists('/tmp/f.mp3'): #   video = open('/tmp/f.mp3', 'rb') bot.send_video(message.chat.id, video) os.remove('/tmp/f.mp3') pkanal = 6 else: #   bot.send_message(message.chat.id, '  ', parse_mode='html', disable_web_page_preview=True)</span></span></code> </pre> <br>  Para m√≠, el escollo era que las entidades son una matriz de matrices y usted debe "revisar" toda la matriz para que el bot entienda que estamos trabajando con un enlace.  Tambi√©n result√≥ que los usuarios env√≠an el enlace al bot como "Compartir" de YouTube, por lo que "youtu.be" tambi√©n est√° escrito en el ejemplo.  No se me ocurri√≥ una manera de enviar inmediatamente un archivo a Telegram, por lo que lo guardamos, lo enviamos y luego lo eliminamos.  Durante las pruebas, me informaron de inmediato que la gente comenzar√≠a a descargar archivos gigantes; m√°s tarde tuve que introducir una restricci√≥n. <br><br>  Antes de que se lanzara el bot, de repente se hizo evidente que no ten√≠a una verificaci√≥n de los derechos de acceso al canal.  Por ejemplo, conociendo mi canal, cualquier usuario de bot podr√≠a enviar un mensaje all√≠, porque  El bot es un administrador.  Tuve que hacer un chequeo urgentemente: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> message.from_user.id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [adm_obj.user.id <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> adm_obj <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bot.get_chat_administrators(chat_id)]:</code> </pre><br>  Aqu√≠ obtenemos la lista de Administradores del canal y vemos si el autor del mensaje tambi√©n es un Administrador. <br><br>  Algunas palabras sobre c√≥mo tuviste que pelear con Roskomnadzor.  Dado que el acceso a la API est√° bloqueado, para desarrollar el bot localmente necesita pasar el tr√°fico de alguna manera a trav√©s de nuestros valientes defensores.  Puede hacer esto de dos maneras: a trav√©s de una VPN o un proxy.  La forma m√°s simple, r√°pida y "normal" es el t√∫nel ssh: establecemos una conexi√≥n entre el cliente y el servidor proxy, obtenemos un puerto en el host local donde se puede enviar el tr√°fico desde nuestro lado y saldr√° desde el otro lado (ya en alg√∫n lugar de Alemania).  Para mayor comodidad, puede agregar una apariencia de automatizaci√≥n de esta conexi√≥n: un script y un acceso directo en el escritorio, que lo iniciar√°, si es necesario.  Por el m√©todo "normal", aqu√≠ me refiero a la situaci√≥n en la que controlamos los puntos de entrada y salida nosotros mismos: a la izquierda est√° nuestra computadora port√°til, a la derecha est√° el VPS en Alemania.  en el medio, el tr√°fico puede ser interceptado tanto como se desee, est√° encriptado, y a la salida nos encontramos en la jurisdicci√≥n de otro estado, y las leyes de la Federaci√≥n Rusa no se aplican a √©l.  Como ventaja adicional, obtenemos una garant√≠a adicional de que el servidor proxy no se cambiar√° ni se apagar√° hasta que lo hagamos por nuestra cuenta.  Es decir  A diferencia de cualquier t√≠o VPN, tenemos tranquilidad y confianza en el futuro. <br><br>  Gui√≥n <br><br><pre> <code class="bash hljs">/home/user/proxy.sh</code> </pre> <br>  C√≥digo de script <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ssh -f -D 1080 user@12.34.56.78 sleep 72000</span></span></code> </pre> <br>  Una vez que hemos establecido una conexi√≥n con el servidor y el puerto est√° abierto, necesitamos dirigir el tr√°fico all√≠ de alguna manera.  Caminando por el camino de menor resistencia y para no pensar en c√≥mo configurar el proxy en IDE \ docker \ python, puede hacer una configuraci√≥n para todos, las cadenas de proxy ser√°n una configuraci√≥n de este tipo.  Si ejecuta alg√∫n software con esta utilidad, redirigir√° el tr√°fico a trav√©s de la cadena de proxy que est√° registrada en la configuraci√≥n. <br><br><pre> <code class="bash hljs">/etc/proxychains.conf</code> </pre> <br>  En nuestro caso, esta es una cadena y escribirla no es dif√≠cil. <br><br><pre> <code class="bash hljs">socks5 127.0.0.1 1080</code> </pre> <br>  y otra muleta que se tom√≥ para no configurar VPN (sarcasmo) es una forma de iniciar una aplicaci√≥n Python desde PyCharm.  En el caso simple, para ejecutar la aplicaci√≥n a trav√©s de proxychains, simplemente escriba proxychains app.py y listo.  Pero el IDE siempre requiere un int√©rprete.  Es f√°cil evitar esto: cree una nueva "configuraci√≥n de ejecuci√≥n", seleccione un script de shell.  y rellena los campos <br><br><img src="https://habrastorage.org/webt/av/mr/7e/avmr7ezwd6bfnlegmfelx5kaof4.png" alt="imagen"><br><br>  Despu√©s de eso, el lanzamiento desde el punto de vista IDE toma esta forma: proxychains python3 app.py: esto es exactamente lo que necesitamos.  Por lo tanto, cuando queremos comenzar un proyecto, todo lo que tenemos que hacer es ejecutar el script en el escritorio, y luego presionar el bot√≥n "play" in ide para iniciar el bot. El resto de la magia se realizar√° mediante proxychains y ssh. <br><br>  Finalmente, el bot est√° escrito, probado.  Que sigue  Por un lado, quiero declararme, por otro lado, creo que realmente puede ser √∫til para alguien.  Y aqu√≠ nos enfrentamos con otro problema de Telegram;  no tiene un solo cat√°logo de canales y bots.  Es muy posible que exista un bot similar al m√≠o, pero repito que no lo encontr√©.  Y en alg√∫n lugar del tranv√≠a, un hombre se sienta y sufre, que quiere organizar bellamente un mensaje en el canal y hace todo con bol√≠grafos. <br><br>  Si ya ejecutaste mi bot, entonces viste que hay un hashtag #Advertising.  ¬øC√≥mo es eso?  - usted pregunta  Y aqu√≠ abord√© el problema con los usuarios finales: muchos publicaron anuncios en sus canales y r√°pidamente se acostumbraron a escribir mensajes usando el bot, me pidieron que agregara.  Puede que no le guste la publicidad, luche, pero estas son realidades duras y necesarias para los usuarios. <br><br>  El proyecto no tiene fines de lucro, por lo que creo que puede llamar al bot en s√≠ mismo @SGK_espace_bot. <br><br>  <a href="https://youtu.be/3PkS4VzpBcg">Y aqu√≠ est√° el video de c√≥mo usar</a> <br>  Agradecer√≠a cualquier cr√≠tica constructiva. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/477178/">https://habr.com/ru/post/477178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../477164/index.html">"Juegos de ritmo que vale la pena conocer": qu√© proyectos pusieron sonido y lo hicieron parte del g√©nero</a></li>
<li><a href="../477166/index.html">Noticias del mundo de OpenStreetMap No. 486 (11/11/2019 - 11/11/2019)</a></li>
<li><a href="../477168/index.html">Anunciamos soporte para m√≥dulos ECMAScript en Node.js</a></li>
<li><a href="../477170/index.html">C√≥mo fui a una reuni√≥n en la escuela 21</a></li>
<li><a href="../477176/index.html">Qu√© herramientas ayudar√°n a cumplir con el RGPD</a></li>
<li><a href="../477180/index.html">Antecedentes: qu√© es QoE y por qu√© un proveedor debe trabajar con √©l</a></li>
<li><a href="../477182/index.html">[Por los muelles] Aleteo. Parte 2. Para desarrolladores de iOS</a></li>
<li><a href="../477184/index.html">Fil√≥sofo de bot para vk.com</a></li>
<li><a href="../477186/index.html">10 a√±os en un sitio remoto y lo que vino de √©l</a></li>
<li><a href="../477190/index.html">Otra forma: LFS, multiusuario y el progreso actual de Indie Action / RPG</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>