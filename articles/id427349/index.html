<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👮 🤮 🤾 Programmer untuk keluarga tinyAVR baru berdasarkan konverter CH340 Cina yang murah 🚀 👨🏾‍🌾 👏🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unified Program dan Debug Interface (UPDI) adalah antarmuka satu-kawat untuk pemrograman / debugging mikrokontroler Atmel 8-bit yang baru, menggantika...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programmer untuk keluarga tinyAVR baru berdasarkan konverter CH340 Cina yang murah</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427349/">  <b>Unified Program dan Debug Interface (UPDI)</b> adalah antarmuka satu-kawat untuk pemrograman / debugging mikrokontroler Atmel 8-bit yang baru, menggantikan antarmuka PDI dua-kawat yang digunakan untuk memprogram mikrokontroler AVR XMEGA. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x1/v9/de/x1v9denhm5w_uof2zxytpawurka.png" alt="gambar"></div><a name="habracut"></a><br>  Jadi, resimen protokol Atmelovsk tiba - ISP, JTAG, debugWIRE, TPI, aWire, PDI, sekarang di sini adalah UPDI.  Pada saat yang sama, situasi ekosistem di AVR masih sangat tidak berpengharapan, jadi kami akan sepenuhnya mengabaikan penggunaannya, tetapi tren terbaru sedikit menyenangkan kami, oleh karena itu artikel ini ditulis. <br><br>  Hanya pemilik beruntung dari programmer Atmel ICE yang dapat menggunakan protokol UPDI, yang sangat tidak nyaman untuk digunakan karena pilihan konektor yang agak aneh, dan tidak begitu murah untuk membelinya dalam skala industri.  Selain itu, itu memerlukan instalasi Atmel Studio, yang secara berkala menolak untuk bekerja dengannya, karena menurut kebijakan perusahaan kami, sebagian besar komputer tidak memiliki akses ke Internet, dan studio secara berkala menjelajah di sana baik untuk driver atau untuk beberapa perpustakaan, akibatnya ada saat-saat ketika programmer terlihat dalam sistem, yaitu driver diinstal dengan benar, tetapi ia tidak diperhatikan oleh studio itu sendiri sampai memperoleh akses ke jaringan dan tidak diperbarui secara paksa. <br><br>  Oleh karena itu, segera setelah kami mulai menggunakan mikrokontroler ATTiny1616 yang baru dan lebih nyaman dalam perkembangan kami (tentang keuntungannya nanti), ada kebutuhan akan alat yang dapat kami gunakan untuk menulis ke pengontrol bootloader dalam produksi.  Tentu saja, tanpa <s>SMS dan pendaftaran</s> akses ke Internet. <br><br>  Setelah sedikit mencari, saya menemukan proyek pyupdi di <b>Github</b> (https://github.com/mraardvark/pyupdi) - implementasi protokol UPDI dengan Python, dan implementasi ini didasarkan pada protokol UART yang biasa, kecuali tanpa konverter level, yang, pada kenyataannya, bahkan lebih nyaman, karena memungkinkan Anda untuk menggunakan chip konverter FTDI standar atau mitra Cina mereka CH340 / 341. <br><br>  Proyek itu diunduh dan diuji, semuanya berjalan cukup riang.  Tetapi setelah beberapa hari menjadi jelas bahwa dia masih tidak cocok dengan kita.  Alasan: <br><br><ul><li>  instalasi Python dan seluruh kelompok paket diperlukan (saya mengingatkan Anda bahwa kita berbicara tentang komputer tanpa akses ke Internet), saya harus mengunduh dan menginstal secara manual hampir selusin paket berbeda yang saling menarik dengan dependensi.  Ya, pada prinsipnya, Anda dapat membuat file yang dapat dieksekusi di komputer lain dari skrip Python, ini entah bagaimana menyelesaikan masalahnya, tetapi daftar masalah tidak berakhir di situ </li><li>  hampir tidak ada kesalahan saat memeriksa skrip, setiap kesalahan diakhiri dengan interupsi yang mengindikasikan sekelompok file yang saling terhubung, yang bagi staf biasa tidak terlihat sangat jelas </li><li>  Tidak mungkin membaca isi controller </li><li>  tidak ada cara membaca sekering </li><li>  kecepatan skrip meninggalkan banyak yang diinginkan, 16 kb ditulis selama hampir satu menit, ini karena tidak adanya optimasi selama transfer, semuanya didasarkan pada timing yang ketat </li><li>  kurangnya indikasi proses perekaman </li><li>  proyek tidak mendukung sejumlah prosesor yang dapat mendukung </li><li>  proyek setengah mati dan tidak menanggapi permintaan </li></ul><br>  Masalah dipecahkan untuk beberapa waktu dalam kerangka Python, tetapi setelah perbaikan saya harus menyusun kembali proyek, tes, sehingga ada keinginan untuk menulis ulang skrip pada sesuatu yang lebih akrab dan lebih cepat, yaitu di C.  Bagaimanapun juga, kita adalah embedder! <br><br>  Sekarang secara singkat tentang keuntungan dari 1-Seri tinyAVR baru: <br><br><ul><li>  penyatuan nyata periferal dan ruang alamat dalam 2 kb hingga 32 kb </li><li>  konfigurasi bootloader yang nyaman (di awal memori!) </li><li>  penyederhanaan signifikan dari algoritma ISP (In-System-Programming) </li><li>  transisi ke arsitektur von Neumann </li><li>  memori flash hingga 32 kb dalam satu paket kecil (3x3 mm) dengan 24 pin, yang hingga 22 (!) dapat digunakan sebagai IO </li><li>  kehadiran osilator internal pada 16/20 MHz </li><li>  berkurangnya ketergantungan kinerja pada konfigurasi sekering (AVR sakit kepala terus-menerus) </li><li>  bagian analog yang sangat baik untuk pengontrol kecil (ADC / DAC / komparator dengan kemungkinan perpindahan input / output internal dan eksternal) </li><li>  pemrograman dan debugging satu kawat </li><li>  harga eceran sangat rendah (dari 0,6 € untuk 16 kb) </li></ul><br>  Sebagai bagian penting dari programer, kami mengambil konverter TTL USB-UART berbasis chip CH340 Cina, seperti ini: <br><br><img src="https://habrastorage.org/webt/7m/am/in/7maminco5c_go8a5flcqu8ymqwu.png" alt="gambar"><br><br>  Untuk pemrograman, cukup menghubungkan dua outputnya RX dan TX, karena keduanya sudah dilengkapi dengan resistor keluaran 1.5k, jika tidak ada resistor dalam model konverter Anda, maka Anda perlu menambahkannya.  Output gabungan terhubung ke pin UPDI pada chip yang dapat diprogram, ground konverter juga harus terhubung ke ground controller.  Jika Anda memiliki daya eksternal, Anda hanya perlu memperhatikan apakah itu sesuai dengan daya yang digunakan konverter (3.3V atau 5V).  Jika ada kebutuhan, maka Anda dapat memberi daya rangkaian dengan pengontrol dan dari konverter itu sendiri, yang bisa sangat nyaman untuk pemrograman awal. <br><br><img src="https://habrastorage.org/webt/er/bn/i0/erbni00rpywptgdcpytjrovbf90.png" alt="gambar"><br><br>  <b>Perhatian!</b>  Resistor adalah opsional, perlu disolder hanya jika konverter Anda tidak memiliki resistor pelindung pada output. <br><br>  Satu-satunya masalah yang terkait dengan chip CH340 adalah bahwa ia tidak bekerja di versi Linux program saya, karena bit paritas digunakan dalam protokol pemrograman, dan driver CH340 dalam versi kernel saya tidak bekerja dengan bit ini dengan benar.  Mungkin masalah akan diperbaiki dalam waktu dekat, sejauh ini saya belum memiliki kesabaran untuk melakukan ini. <br><br>  Sebagai hasil dari kerja dan percobaan, program <b>updiprog</b> ditulis dan didebug dalam IDE Code :: Blocks, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumbernya diposting di Github</a> . <br><br>  Apa yang diterapkan dalam versi program ini: <br><br><ul><li>  Ditambahkan kemampuan untuk membaca isi memori flash controller ke file hex </li><li>  Kemampuan tambahan untuk membaca status semua sekering pengontrol </li><li>  bila memungkinkan menambahkan penanganan kesalahan dengan pesan yang sesuai </li><li>  indikasi tambahan dari proses menulis / membaca </li><li>  kecepatan meningkat secara signifikan (sekitar 6 detik untuk membaca 16 kb) </li><li>  Dukungan tambahan untuk semua mikrokontroler 1-Series </li></ul><br>  Ukuran awal program adalah sekitar 25 kb, dibandingkan dengan 5 kopecks untuk skrip sumber Python yang dikompilasi. <br><br>  Saya berharap pekerjaan yang dilakukan akan bermanfaat bagi seseorang.  Saya akan senang dengan ulasan dan saran. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id427349/">https://habr.com/ru/post/id427349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id427339/index.html">Mengapa teorema ketidaklengkapan Gödel sulit untuk dibuktikan: masalahnya ada dalam formulasi, dan bukan hanya pada dasarnya</a></li>
<li><a href="../id427341/index.html">Belajar bersyukur: ini adalah yang terbaik yang dapat Anda berikan kepada orang lain, dan cara terbaik untuk mengembangkan "koneksi sosial yang bermanfaat"</a></li>
<li><a href="../id427343/index.html">VK Mobile Challenge 2018</a></li>
<li><a href="../id427345/index.html">Masalah penulisan teks matematika modern</a></li>
<li><a href="../id427347/index.html">Bermigrasi ke Google Cloud Platform (Google Cloud Platform - GCP)</a></li>
<li><a href="../id427351/index.html">Security Week 40: Kerentanan dalam CMS Drupal dan Lainnya</a></li>
<li><a href="../id427353/index.html">Drone menunjukkan: bagaimana kita mengoordinasikan sekelompok penari menari</a></li>
<li><a href="../id427355/index.html">Kompilasi CJM, keterampilan art director utama dan pemahaman pengguna</a></li>
<li><a href="../id427357/index.html">Menulis shader di Unity. GrabPass, PerRendererData</a></li>
<li><a href="../id427359/index.html">Bagaimana ECS, Sistem Pekerjaan C #, dan Arsitektur Ubah SRP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>