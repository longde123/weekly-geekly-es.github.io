<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¥ ‚òπÔ∏è üë®‚Äçüé§ Exp√©rience de la configuration et de l'utilisation de WSL (sous-syst√®me Linux dans Windows 10) üë®üèæ‚Äçüè≠ üçû üôåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai √©t√© invit√© √† √©crire cet article par une question sur le grille-pain li√© √† WSL. Apr√®s plusieurs ann√©es d'utilisation de syst√®mes sur le noyau Linu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exp√©rience de la configuration et de l'utilisation de WSL (sous-syst√®me Linux dans Windows 10)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412633/"><p>  J'ai √©t√© invit√© √† √©crire cet article par une question sur le grille-pain li√© √† WSL.  Apr√®s plusieurs ann√©es d'utilisation de syst√®mes sur le noyau Linux, il y a environ six mois, je suis pass√© √† Windows 10 sur un ordinateur personnel.  La d√©pendance du terminal et de l'environnement Linux dans mon travail m'a presque imm√©diatement amen√© √† la question: soit installer une machine virtuelle soit essayer WSL.  J'ai choisi le second et j'√©tais compl√®tement satisfait. </p><br><p>  Sous le chat, je vais vous dire comment installer et configurer WSL, quels probl√®mes et limitations j'ai rencontr√©s, comment ex√©cuter des applications Linux √† partir de Windows et vice versa, ainsi que comment int√©grer des √©l√©ments d'environnement Xfce dans l'environnement de bureau Windows. </p><br><p><img src="https://habrastorage.org/webt/-0/ns/in/-0nsinltsgqffm37apocivmp4d8.png"></p><a name="habracut"></a><br><p>  Je n'ai jamais pens√© que je serais de retour sur Windows un jour, mais une combinaison de circonstances m'a donn√© une raison d'essayer: ma femme, qui √©tait loin de l'informatique, a tir√© presque chaque fois qu'elle avait besoin d'utiliser un ordinateur;  r√©veill√© la nostalgie d'un match, mais elle ne voulait pas travailler correctement sous le vin;  puis ils m'ont donn√© un Windows 10 Pro en bo√Æte.  J'ai install√© WSL presque imm√©diatement apr√®s l'installation du syst√®me, jou√© pendant plusieurs soir√©es, j'ai r√©alis√© que le produit convenait √† mes t√¢ches, mais je veux un terminal plus familier et g√©n√©ralement quelques commodit√©s. </p><br><h3 id="ustanovka-wsl-i-distributiva">  Installer WSL et la distribution </h3><br><p> Faites imm√©diatement une r√©servation, sur Internet, vous pouvez trouver une description de l'installation en ex√©cutant la commande <code>lxrun /install</code> sur la ligne de commande ou la console PowerShell.  Cette m√©thode ne fonctionne plus (apr√®s la sortie de WSL dans une version stable).  Pour autant que je sache, WSL ne peut d√©sormais √™tre install√© qu'√† partir du Microsoft Store avec votre distribution pr√©f√©r√©e. </p><br><p>  Je note √©galement que lorsque j'ai fait l'installation, les distributions OpenSUSE, SUSE Linux Enterprise et Ubuntu 16.04 √©taient disponibles au choix - la derni√®re que j'ai install√©e.  Ubuntu 18.04, Debian 9 et Kali Linux sont √©galement disponibles maintenant, et d'autres distributions peuvent appara√Ætre.  Les √©tapes d'installation peuvent varier.  En outre, certains des probl√®mes d√©crits dans l'article peuvent d√©j√† √™tre r√©solus. </p><br><p>  Nous trouvons la distribution souhait√©e dans le magasin et l'installons.  L'installation sera rapide, car elle ne t√©l√©chargera que l'√©mulateur du noyau Linux et l'utilitaire de lancement du sous-syst√®me, qui se trouvera dans le dossier syst√®me dans trois cas: wsl.exe, bash.exe et ubuntu.exe (au lieu d'ubuntu, il y aura le nom de votre kit de distribution).  Tous sont √©quivalents et font la m√™me chose - ils ex√©cutent leur propre √©mulateur de terminal, dans ce bash linux'ovy fonctionnant sous l'√©mulateur du noyau.  Au premier d√©marrage, il nous sera demand√© de fournir un nom d'utilisateur et un mot de passe par d√©faut pour l'utilisateur, puis la distribution sera install√©e directement.  En tant qu'utilisateur par d√©faut, sp√©cifiez root sans mot de passe - cela sera n√©cessaire pour les √©tapes suivantes.  La s√©curit√© ne sera pas affect√©e, en outre, lors de la pr√©paration du mat√©riel pour l'article, dans le didacticiel en anglais, je suis tomb√© sur des informations selon lesquelles les nouvelles versions de WSL font d√©sormais l'utilisateur root par d√©faut sans mot de passe sans poser de questions inutiles. </p><br><p>  Nous attendons l'installation.  Ensuite, la premi√®re chose est de mettre √† jour les miroirs apt pour le prochain.  Pour ce faire, vous avez besoin d'un √©diteur de texte CLI.  Seul vi est inclus, mais je pr√©f√®re nano plus, donc je le mets: </p><br><pre> <code class="bash hljs">apt install nano</code> </pre> <br><p>  sudo n'est pas requis, car nous sommes d√©j√† root.  Modifiez le fichier /etc/apt/sources.list: </p><br><pre> <code class="bash hljs">nano /etc/apt/sources.list</code> </pre> <br><p>  Les miroirs Yandex fonctionnent le mieux pour moi, donc mon fichier ressemble √† ceci: </p><br><pre> <code class="hljs ruby">deb <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial main universe restricted deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-security main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-security main universe restricted deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-updates main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-updates main universe restricted</span></span></code> </pre> <br><p>  Appuyez sur Ctrl + O pour enregistrer et Ctrl + X pour quitter.  Vous pouvez maintenant mettre √† jour le syst√®me √† l'√©tat actuel: </p><br><pre> <code class="bash hljs">apt update &amp;&amp; apt upgrade</code> </pre> <br><p>  Apr√®s la mise √† jour, vous pouvez cr√©er notre utilisateur principal.  Dans cet article, je l'appellerai user1, mais vous pouvez sp√©cifier le nom habituel: </p><br><pre> <code class="bash hljs">addgroup --gid 1000 user1 adduser --home /home/user1 --shell /bin/bash --uid 1000 -G user1,sudo user1</code> </pre> <br><p>  Ensuite, acc√©dez au dossier de l'utilisateur, acc√©dez-y, d√©finissez un mot de passe et modifiez le fichier ~ / .bashrc: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/user1 su user1 passwd nano .bashrc</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Mon .bashrc de base ressemble √† ceci</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># If not running interactively, don't do anything case $- in *i*) ;; *) return;; esac # don't put duplicate lines or lines starting with space in the history. # See bash(1) for more options HISTCONTROL=ignoreboth # append to the history file, don't overwrite it shopt -s histappend # for setting history length see HISTSIZE and HISTFILESIZE in bash(1) HISTSIZE=1000 HISTFILESIZE=2000 # check the window size after each command and, if necessary, # update the values of LINES and COLUMNS. shopt -s checkwinsize # If set, the pattern "**" used in a pathname expansion context will # match all files and zero or more directories and subdirectories. #shopt -s globstar # make less more friendly for non-text input files, see lesspipe(1) [ -x /usr/bin/lesspipe ] &amp;&amp; eval "$(SHELL=/bin/sh lesspipe)" # set variable identifying the chroot you work in (used in the prompt below) if [ -z "${debian_chroot:-}" ] &amp;&amp; [ -r /etc/debian_chroot ]; then debian_chroot=$(cat /etc/debian_chroot) fi # set a fancy prompt (non-color, unless we know we "want" color) case "$TERM" in xterm|xterm-color|*-256color) color_prompt=yes;; esac # uncomment for a colored prompt, if the terminal has the capability; turned # off by default to not distract the user: the focus in a terminal window # should be on the output of commands, not on the prompt #force_color_prompt=yes if [ -n "$force_color_prompt" ]; then if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then # We have color support; assume it's compliant with Ecma-48 # (ISO/IEC-6429). (Lack of such support is extremely rare, and such # a case would tend to support setf rather than setaf.) color_prompt=yes else color_prompt= fi fi if [ "$color_prompt" = yes ]; then if [[ ${EUID} == 0 ]] ; then PS1='${debian_chroot:+($debian_chroot)}\[\033[01;31m\]\h\[\033[01;34m\] \W \$\[\033[00m\] ' else PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\] \[\033[01;34m\]\w \$\[\033[00m\] ' fi else PS1='${debian_chroot:+($debian_chroot)}\u@\h \w \$ ' fi unset color_prompt force_color_prompt # If this is an xterm set the title to user@host:dir case "$TERM" in xterm*|rxvt*) PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h \w\a\]$PS1" ;; *) ;; esac # enable color support of ls and also add handy aliases if [ -x /usr/bin/dircolors ]; then test -r ~/.dircolors &amp;&amp; eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)" alias ls='ls --color=auto' #alias dir='dir --color=auto' #alias vdir='vdir --color=auto' alias grep='grep --color=auto' alias fgrep='fgrep --color=auto' alias egrep='egrep --color=auto' fi # colored GCC warnings and errors #export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01' # some more ls aliases alias ll='ls -alF' alias la='ls -A' alias l='ls -CF' # Add an "alert" alias for long running commands. Use like so: # sleep 10; alert alias alert='notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'\'')"' # Alias definitions. # You may want to put all your additions into a separate file like # ~/.bash_aliases, instead of adding them here directly. # See /usr/share/doc/bash-doc/examples in the bash-doc package. if [ -f ~/.bash_aliases ]; then . ~/.bash_aliases fi # enable programmable completion features (you don't need to enable # this, if it's already enabled in /etc/bash.bashrc and /etc/profile # sources /etc/bash.bashrc). if ! shopt -oq posix; then if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; then . /etc/bash_completion fi fi</span></span></code> </pre> </div></div><br><p>  Tout, le sous-syst√®me est pr√™t √† l'emploi ... presque ... </p><br><h3 id="ustanovka-x-servera-xfce-i-prochih-guishnyh-prilozheniy">  Installation de X Server, Xfce et d'autres applications GUI </h3><br><p>  Le premier probl√®me que j'ai rencontr√© - l'ach√®vement de bash dans l'√©mulateur de terminal propos√© a fonctionn√©, pour le dire l√©g√®rement, incorrectement.  De plus, cet √©mulateur ne sait pas comment utiliser les onglets, et chaque instance de celui-ci d√©marre tout dans un nouvel espace de processus, avec un init s√©par√© (qui, en passant, ne peut pas √™tre remplac√©).  Je voulais un √©mulateur de terminal normal, quelques autres applications GUI, ainsi qu'un socket pour d√©marrer le tout rapidement. </p><br><p>  Lorsque j'ai recherch√© cette question sur Google, je suis tomb√© sur de nombreux probl√®mes, tels que la n√©cessit√© de traduire dbus en protocole TCP.  Pour le moment, il n'y a pas de tels probl√®mes.  Les sockets de domaine Unix fonctionnent normalement dans le sous-syst√®me et tout communique calmement √† travers eux. </p><br><p>  Tout d'abord, nous avons besoin d'un serveur X, en plus, install√© dans le syst√®me principal (sous Windows).  Personnellement, j'utilise VcXsrv √† cet effet - le port X11 sous Windows.  Le site officiel sp√©cifi√© dans √† propos de l'utilitaire lui-m√™me ne le fournit pas maintenant, donc nous recherchons l'installateur sur Google et installons tout par d√©faut. </p><br><p>  Pendant que l'installation est en cours, nous revenons au terminal WSL, avec la commande exit, nous revenons √† root.  Tout d'abord, configurez les param√®tres r√©gionaux russes: </p><br><pre> <code class="bash hljs">locale-gen ru_RU locale-gen ru_RU.UTF-8 update-locale</code> </pre> <br><p>  Ensuite, installez certains composants Xfce.  Bien s√ªr, vous pouvez l'installer enti√®rement √† partir du m√©ta-package, mais nous n'aurons pas besoin de la plupart des composants, et l'architecture modulaire de Xfce nous permet de fournir uniquement le n√©cessaire: </p><br><pre> <code class="bash hljs">apt install -y xfce4-session xfce4-notifyd xfce4-appfinder xfce4-panel xfce4-quicklauncher-plugin xfce4-whiskermenu-plugin xfce4-xkb-plugin xfce4-settings xfce4-terminal xfce4-taskmanager mousepad</code> </pre> <br><p>  Ce n'est pas tr√®s pratique d'ex√©cuter l'environnement avec vos mains √† chaque fois, j'ai donc automatis√© ce processus.  Pour ce faire, dans le syst√®me principal, cr√©ez un dossier dans un endroit qui nous convient et 3 fichiers √† ex√©cuter: </p><br><ol><li>  <strong>config.xlaunch</strong> - fichier de param√®tres pour VcXsrv <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">XLaunch</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">WindowMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MultiWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ClientMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NoClient"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LocalClient</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Display</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LocalProgram</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xcalc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteProgram</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xterm"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemotePassword</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PrivateKey</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteUser</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPBroadcast</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPIndirect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clipboard</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ClipboardPrimary</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ExtraParams</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Wgl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DisableAC</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPTerminate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> </li><li><p>  <strong>x-run.vbs</strong> - WSL d√©marre toujours avec son √©mulateur de terminal; si vous le fermez, tous ses processus enfants se termineront.  Pour que cette fen√™tre n'ait pas les yeux durs, il est agr√©able de l'ex√©cuter cach√©e.  Heureusement, Windows a un interpr√©teur VBScript int√©gr√© qui vous permet de le faire en une seule ligne: </p><br><pre> <code class="vbscript hljs">WScript.<span class="hljs-built_in"><span class="hljs-built_in">CreateObject</span></span>(<span class="hljs-string"><span class="hljs-string">"Shell.Application"</span></span>).ShellExecute <span class="hljs-string"><span class="hljs-string">"wsl"</span></span>, <span class="hljs-string"><span class="hljs-string">"cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"open"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  Permettez-moi d'expliquer ce qui se passe ici.  Nous demandons √† VBscript d'ex√©cuter l'application wsl avec le <code>cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session</code>  <code>cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session</code> , le dossier de d√©marrage n'est pas important pour nous, donc la ligne vide, l'action d'ouverture - d√©marrage, 0 - mode cach√©.  Nous donnons √† wsl lui-m√™me la commande √† ex√©cuter: allez dans le dossier utilisateur, puis avec le r√©glage des variables d'environnement DISPLAY (affichage X-server) et LANG (locale utilis√©e), nous ex√©cutons xfce4-session au nom de notre utilisateur user1 (gr√¢ce √† la commande su) </p><br></li><li>  <strong>start.bat</strong> - fichier batch √† ex√©cuter, vous pouvez √©ventuellement le mettre au d√©marrage <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">start</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.xlaunch</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">wscript</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x-run</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.vbs</span></span></code> </pre> </li></ol><br><p>  Ensuite, nous pouvons ex√©cuter notre start.bat et configurer le panneau Xfce pour nous-m√™mes.  Je note qu'ici, je suis tomb√© sur un autre probl√®me - le panneau est parfaitement affich√© au-dessus de toutes les fen√™tres, mais il ne peut pas se attribuer une place comme un panneau sur le bureau Windows.  Si quelqu'un conna√Æt une solution √† ce probl√®me, partagez les commentaires. </p><br><p>  Eh bien, √† la fin de cette partie, une capture d'√©cran de mon bureau: </p><br><p><img src="https://habrastorage.org/webt/ia/zp/-g/iazp-g5m4o_5tby6t52zl-nwau0.png"></p><br><h3 id="vzaimodeystvie-okruzheniya-windows-i-okruzheniya-podsistemy-linux">  L'interaction de l'environnement Windows et de l'environnement du sous-syst√®me Linux </h3><br><p>  Vous pouvez ex√©cuter des applications Linux directement √† partir de Windows via les m√™mes 3 commandes - bash, wsl ou ubuntu.  N'oubliez pas que par d√©faut, le lancement est √† partir de la racine, vous devez donc r√©duire les privil√®ges via <code>su</code> , vous devez √©galement vous rappeler de passer la variable d'environnement DISPLAY =: 0 si l'application n√©cessite un serveur X.  Vous devez √©galement modifier le dossier √† partir duquel l'application doit fonctionner via cd dans WSL.  Exemple, calculons md5 pour file.txt sur le disque D en utilisant le md5sum Linux: </p><br><pre> <code class="hljs mel">wsl md5sum &lt; d:\<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>.txt</code> </pre> <br><p>  L'acc√®s au syst√®me de fichiers Linux est √©galement disponible, il se trouve dans <code>%localappdata%\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs</code> .  Vous pouvez lire les fichiers de cette fa√ßon, mais l'√©crire n'est pas conseill√©; vous pouvez casser le syst√®me de fichiers.  Je pense que le probl√®me est que Windows ne peut pas travailler avec les droits et les propri√©taires du syst√®me de fichiers Linux. </p><br><p>  Depuis Linux, vous pouvez √©galement ex√©cuter des applications Windows.  Ex√©cutez simplement l'exe-shnik et il sera ex√©cut√© dans le syst√®me principal. </p><br><p>  Les lecteurs Windows sont mont√©s dans <code>/mnt</code> selon leurs lettres minuscules.  Par exemple, le lecteur D sera mont√© dans <code>/mnt/d</code> .  Depuis Linux, vous pouvez librement lire et √©crire des fichiers Windows.  Vous pouvez cr√©er des liens symboliques dessus.  Les droits de ces fichiers seront toujours 0777 et le propri√©taire sera root. </p><br><p>  La pile r√©seau du sous-syst√®me est courante avec Windows.  Le serveur √©lev√© sur Linux sera disponible sur localhost sur Windows et vice versa.  Cependant, unix-domain-socket pour Windows ne sera qu'un fichier vide, vous ne pouvez travailler avec cela que sous Linux.  Linux a √©galement acc√®s au r√©seau externe, y compris l'√©coute des ports, si le pare-feu ne l'interdit pas. <br>  ifconfig sous Linux et ipconfig sous Windows donnent les m√™mes informations sur les interfaces r√©seau. </p><br><p>  √Ä partir du gestionnaire de t√¢ches Windows, vous pouvez battre le processus en toute s√©curit√© √† l'int√©rieur du sous-syst√®me Linux.  Cependant, Linux ne verra que ses processus. </p><br><h3 id="osobennosti-ogranicheniya-i-podvodnye-kamni">  Caract√©ristiques, limites et pi√®ges </h3><br><p>  Le noyau Linux dans WSL n'est pas r√©el.  Il s'agit simplement d'une couche d'√©mulateur, dont une partie des t√¢ches sp√©cifiques √† Linux s'ex√©cute elle-m√™me, et une partie des proxys directement sur le noyau winNT.  La plupart des API y sont impl√©ment√©es, mais pas toutes.  Vous ne pourrez pas assembler votre noyau, ni connecter les modules du noyau (.ko, Kernel Object). </p><br><p>  Le processus d'initialisation WSL est √©galement le sien et le remplacer, par exemple, par system.d ne fonctionnera pas.  J'ai depuis longtemps le d√©sir d'√©crire un gestionnaire de d√©mon en marche qui fonctionnerait avec les fichiers d'unit√© system.d et fournirait une interface similaire, mais toutes les mains n'atteignent pas. </p><br><p>  Il n'y a pas de support pour openFUSE; en cons√©quence, le montage d'un syst√®me de fichiers virtuel ou distant √©chouera.  Il est √©galement impossible de faire un montage √† partir d'un fichier, le montage ne semble pas √™tre capable de faire autre chose que de se lier ici. </p><br><p>  Il n'y a √©galement aucun moyen de partitionner un syst√®me de fichiers Linux en plusieurs partitions / disques. </p><br><p>  L'acc√®s direct au fer est pratiquement absent.  Tout de m√™me, nous sommes dans le bac √† sable de Windows, et non en plein Linux.  / dev et / sys sont sensiblement vides, ils ne contiennent que des p√©riph√©riques virtuels.  L'acc√®s au GPU - uniquement via le serveur X, directement - de quelque mani√®re que ce soit, vous devrez donc former des r√©seaux de neurones sous Windows. </p><br><p>  Dans le d√©veloppement JS, j'ai rencontr√© le fait qu'√©lectron.js refusait de s'ex√©cuter en WSL, j'ai d√ª dupliquer l'environnement node.js sous Windows. </p><br><h3 id="itogi">  R√©sum√© </h3><br><p>  L'article s'est av√©r√© assez long, j'esp√®re qu'il sera √©galement utile. <br>  WSL pour moi s'est av√©r√© √™tre un outil compl√®tement utilisable qui r√©sout mes probl√®mes <del>  fullstack </del>  d√©veloppeur backend.  Pendant six mois, une machine virtuelle avec Linux n'a pas √©t√© n√©cessaire.  Le sentiment g√©n√©ral est que Windows + WSL est beaucoup plus fonctionnel que Linux + Wine. </p><br><p>  En √©crivant un article, j'ai d√©couvert que l'assembly WSL avec Debian 9.3 est apparu dans le Microsoft Store, cette distribution est plus jolie pour moi qu'Ubuntu, donc je vais essayer de l'installer. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr412633/">https://habr.com/ru/post/fr412633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr412621/index.html">Comment devenir magicien (partie 3). Lettre de Poudlard</a></li>
<li><a href="../fr412623/index.html">Le nouveau kit pour Star Citizen co√ªtera 27 000 $</a></li>
<li><a href="../fr412625/index.html">Comment trouver rapidement et ne pas perdre des sp√©cialistes de l'IA et de la science des donn√©es</a></li>
<li><a href="../fr412627/index.html">Exposition internationale CMEF & ICMD 2018 Spring in Shanghai (Part 2)</a></li>
<li><a href="../fr412629/index.html">Forme d'onde adaptative pour votre service audio</a></li>
<li><a href="../fr412637/index.html">Faire ou ne pas repenser les logos? Telle est la question</a></li>
<li><a href="../fr412639/index.html">Ce que vous devez attendre pour cr√©er des strat√©gies de trading sur la bourse: l'efficacit√© de l'apprentissage automatique</a></li>
<li><a href="../fr412641/index.html">Qu'ont en commun l'exploitation mini√®re, la G√©orgie et Irkoutsk?</a></li>
<li><a href="../fr412643/index.html">Comment nous avons int√©gr√© le syst√®me de paiement dans le projet russe</a></li>
<li><a href="../fr412645/index.html">Objet, propri√©t√©, activit√©: mod√®les et m√©thodes de construction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>