<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ™Ô∏è üíâ ü§∑üèæ ¬øQu√© m√°s es Defold y con qu√© se come? üõÄüèø üî≥ üë©üèø‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este es un peque√±o an√°lisis del motor del juego Defold usando un ejemplo pr√°ctico (bajo Andoid), as√≠ como un poco de cr√≠tica subjetiva y elogios, buen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øQu√© m√°s es Defold y con qu√© se come?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416461/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/xx/5l/zz/xx5lzzb-posrr_pnbvchdja6nbq.png" alt="imagen" width="450"></div><br>  Este es un peque√±o an√°lisis del motor del juego Defold usando un ejemplo pr√°ctico (bajo Andoid), as√≠ como un poco de cr√≠tica subjetiva y elogios, bueno, una revisi√≥n general.  A qui√©n le importa saber m√°s sobre este motor, hay una entrevista, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lea</a> .  Hay poca informaci√≥n sobre Defold en la red, por lo que ser√° una contribuci√≥n a una alcanc√≠a muy peque√±a. <br><a name="habracut"></a><br><h2>  Un poco de juego previo </h2><br>  Entonces, Defold es un motor multiplataforma relativamente joven (desde 2011) con un editor visual similar a Gobot, Construct o Cocos Creater.  Est√° destinado principalmente a 2D (todav√≠a no hay suficientes herramientas para trabajar con 3D), el lenguaje de programaci√≥n es Lua.  Se diferencia de motores similares en rendimiento estable en dispositivos m√≥viles (incluso 60 fps sin retrasos con sonido), tama√±o de construcci√≥n peque√±o (2-4 mb dependiendo de la plataforma), conveniente sistema gui and go, configuraciones de animaci√≥n geniales (curvas clave) y tambi√©n completamente subordinado editor (te dir√© a continuaci√≥n, intriga).  En el sitio, bajo la cuenta, es posible almacenar archivos de proyecto.  Cualquier miembro autorizado del equipo puede realizar cambios en el proyecto, lo que generalmente es conveniente, aunque yo no siempre podr√≠a usarlo, porque  Nuestro proxy de trabajo no le da acceso al editor.  Defold tiene caracter√≠sticas para escribir c√≥digo, aunque las llevar√≠a a menos (detalles a continuaci√≥n).  Y s√≠, casi lo olvido, el equipo de Defold es muy receptivo, merece respeto.  Le ped√≠ ayuda al foro varias veces; de inmediato, en 10 minutos respondieron y me ayudaron.  Una vez que hubo un problema al iniciar el editor en Ubuntu, los chicos no pudieron ayudar al principio, pero despu√©s de un par de horas su l√≠der me contact√≥ y resolvi√≥ la situaci√≥n.  Result√≥ que en Linux hay un error con le√±a est√°ndar en el video, por lo que debe instalar los nativos.  Tambi√©n en el sitio hay activos, donde sin ellos.  Bueno, terminemos el preludio, ¬°vamos! <br><br><h2>  ¬°Empecemos! </h2><br>  Registramos y descargamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el</a> editor Defold versi√≥n 2 en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio web</a> (1 ya no es compatible), creamos su propio proyecto all√≠ y lo descargamos.  El proyecto se almacena en el sitio, o localmente (si tenemos miedo de que el astuto Defold se asuste).  Luego, abra su proyecto a trav√©s del editor (habr√° el m√≠o en las im√°genes), mire: <br><br> <a href=""><img src="https://habrastorage.org/webt/ui/jh/em/uijhemq6p_7__xe1j0ivkhtdngm.png"></a> <br><br>  A la izquierda est√°n los archivos, a la derecha est√°n las entra√±as del nodo seleccionado, en el medio est√° el editor.  No te molestar√© con el an√°lisis de la interfaz, puedes estudiarlo t√∫ mismo.  ¬øVes la carpeta integrada?  Hay un conjunto est√°ndar de scripts, fuentes y otras cosas para el motor, puede aprender.  Todo lo dem√°s son tus propios archivos.  En la configuraci√≥n del proyecto (en la imagen central) hay una l√≠nea (resaltada) de la colecci√≥n Principal, hay un enlace al archivo de la colecci√≥n principal desde el cual se inicia su aplicaci√≥n, √°bralo: <br><br> <a href=""><img src="https://habrastorage.org/webt/gs/la/xx/gslaxxxplapjspuyfqbudzez0tc.png"></a> <br><br>  S√≠, s√≠, este es exactamente el desorden que tendr√° en el editor, porque no hay forma de ocultar lo innecesario (lo acreditaremos en las desventajas).  Primero entendamos qu√© es una colecci√≥n.  Cuando escrib√≠ sobre el editor subordinado anterior, se entendi√≥ que cada archivo de proyecto, sin importar de qu√© extensi√≥n sea, es un archivo de texto, y puede editarse independientemente.  Entonces, una colecci√≥n tambi√©n es un archivo de texto con una descripci√≥n de objetos internos. <br><br> <a href=""><img src="https://habrastorage.org/webt/o9/bp/l_/o9bpl_bxsy0dbia1z0d9rufmlne.png"></a> <br><br>  Una colecci√≥n puede contener cualquier objeto (scripts, sprites, sonidos, etc.), as√≠ como otras colecciones incrustadas en ella.  Se crear√°n todos sus contenidos durante la ejecuci√≥n, se inicializar√°n los scripts.  Las colecciones se pueden envolver en Proxy.  Proxy es una gran cosa, por lo general, envuelven diferentes niveles de su juego, por ejemplo.  Se pueden enviar, cargar (se crea una colecci√≥n anidada durante la carga), pausar, ralentizar y acelerar los procesos. <br><br>  Adem√°s, una cosa muy conveniente: Factory y Collection Factory.  Estos son shells para objetos que son indispensables si necesita crear y eliminar objetos din√°micamente durante la ejecuci√≥n. <br><br> <a href=""><img src="https://habrastorage.org/webt/oz/rk/p0/ozrkp0lrpmebpqu0tjqahqutfy8.png"></a> <br><br>  Aqu√≠ hay un buen ejemplo de una colecci√≥n din√°mica.  Este es un pico, se carga con un algoritmo aleatorio en el nivel y se elimina, le cuesta abandonar la vista de la c√°mara para no desperdiciar recursos. <br><br> <a href=""><img src="https://habrastorage.org/webt/dg/88/cr/dg88crfsnwqfeoo2s1nw9rmp9hy.png"></a> <br><br>  Esta es una secuencia de comandos dentro de la espiga, en el m√©todo de actualizaci√≥n comprueba si su propia posici√≥n es menor que la posici√≥n del personaje (jugador en el centro de la c√°mara) m√°s un peque√±o margen, luego se elimina.  Por cierto, puede colgar propiedades en scripts.  Por ejemplo, tengo un objeto de colecci√≥n de f√°brica dentro del cual hay una oveja npc. <br><br> <a href=""><img src="https://habrastorage.org/webt/aw/r4/ti/awr4tivsyzwqubh8gb6cl0-fzqe.png"></a> <br><br>  Aqu√≠ est√° nuestro npc, tiene propiedades en el script como velocidad de carrera, zancada, fuerza de salto y resistencia.  Al crear una instancia, le asigno aleatoriamente estas propiedades. <br><br>  Crear npc: <br><br> <a href=""><img src="https://habrastorage.org/webt/rn/oi/o1/rnoio1acdrjioup3f0ykqi9ijr8.png"></a> <br><br>  La instancia interna del script cambia sus propiedades (unicidad a trav√©s de self): <br><br> <a href=""><img src="https://habrastorage.org/webt/9w/tc/s6/9wtcs6a554em8e2wuzab6foywi0.png"></a> <br><br>  Y ahora nuestros corderos corren a diferentes velocidades: <br><br> <a href=""><img src="https://habrastorage.org/webt/m2/up/f3/m2upf3hky56ircljuxhoily8a1s.png"></a> <br><br>  Hablando del editor de c√≥digo, es primitivo.  Los m√©todos no pueden minimizarse (como en Sublime, por ejemplo), y cuando hay muchas l√≠neas, debes girar la rueda durante un tiempo largo y doloroso, buscando la correcta.  Tampoco hay aumento en la escala, pero estos son peque√±os.  Los recursos de Defold tienen instrucciones sobre c√≥mo ense√±ar a Sublime a rellenar m√©todos desde el editor. <br><br>  En cuanto a las part√≠culas, es conveniente: si selecciona un emisor en la ventana del editor y presiona la barra espaciadora, puede ver inmediatamente el resultado. <br><br><h2>  Bueno, ahora sobre c√≥mo funciona el motor </h2><br>  Defold acepta dos ramas separadas para la representaci√≥n, estas son GUI y GO. <br><br>  GUI: como su nombre lo indica, esta es una interfaz de usuario.  Existe por separado, se configura en la pantalla y siempre se representa sobre todo lo dem√°s.  La GUI tiene sus propios m√©todos que no est√°n relacionados con GO, aunque son similares.  Esta tambi√©n es una colecci√≥n, pero con limitaciones.  Se acepta un script por GUI, con la extensi√≥n .gui_script.  Una cosa excelente y conveniente, aunque hay un matiz: no puedes acceder directamente a ning√∫n objeto del juego desde la GUI, solo a trav√©s de variables globales o mediante mensajes (te lo dir√© m√°s adelante). <br><br>  GO es un objeto de juego (algo as√≠ como un nodo de transformaci√≥n), contiene informaci√≥n sobre movimiento, rotaci√≥n, escala, etc.  En el interior, lleva todo, incluidos otros GO.  Utilizado para colecciones, este es un shell requerido para cualquier n√∫mero de objetos (como un grupo). <br><br>  A continuaci√≥n, comienza la diversi√≥n.  Me mud√© a Defold desde un amigable Android Studio con Libgdx, y esto es lo que me sorprendi√≥: no se puede acceder a los objetos directamente, solo a trav√©s de m√©todos de muleta o mensajes que todav√≠a no dan libertad creativa, existen serias limitaciones.  Si se compara con el mismo Libgdx, all√≠ podr√≠a incluso reescribir tranquilamente la clase existente de la biblioteca de Lieb y referirme a ella.  En Defold, desafortunadamente, usa lo que tiene, y si falta algo, solicite a los desarrolladores que agreguen la funci√≥n necesaria, o est√° buscando una soluci√≥n.  Por ejemplo, cuando trabajas con sonido, ¬°no puedes saber si la reproducci√≥n ha terminado!  Tuve que agregar una muleta que reconoce la duraci√≥n del sonido del archivo de reproducci√≥n.  En cuanto al Box2D simplificado (las cr√≠ticas comenzaron de repente), ¬°los m√©todos gloriosos para detectar y procesar antes, durante y despu√©s de la colisi√≥n desaparecieron de all√≠!  En cambio, llega un mensaje en el gui√≥n, que se encuentra en el mismo GO con el cuerpo f√≠sico (no siempre cada fotograma, especialmente en el m√≥vil) con informaci√≥n sobre la colisi√≥n, y eso es todo.  Adem√°s, no se puede mover un cuerpo si es f√≠sico, solo puede ser cinem√°tico y esta propiedad no se puede cambiar durante la ejecuci√≥n.  GO no se puede escalar junto con el cuerpo f√≠sico, en el editor cambiar√° la escala para ti, pero no en el juego (como prometieron arreglarlo).  GO no se puede escalar a menos (por ejemplo, espejo por X), todo funcionar√° en el editor, pero en ejecuci√≥n volver√° al original.  En general, me rebel√© un poco sobre este tema y (habiendo resuelto estos problemas con muletas) me tranquilic√©, a√∫n as√≠ la velocidad de Defold y su editor super√≥ el freno Libgdx (¬°los lectores me perdonar√°n mi subjetividad!) Y la falta de un editor normal (recuerdo que de alguna manera lo hice para Lieb editor de mapas en Autodesk Maya, pero esa es otra historia ...). <br><br><h2>  El m√©todo msg.post () y c√≥mo relacionarse con √©l </h2><br>  En general, cada objeto tiene una url (por ejemplo, "main: / main_pers # spine_anim"), mediante la cual puede enviar un mensaje e incluso adjuntarle variables.  Los mensajes vuelan directamente al destinatario sin esperar en l√≠nea para su procesamiento.  Es conveniente y tambi√©n crea confusi√≥n a veces.  A menudo se necesitan mensajes para enviar informaci√≥n de GO a la GUI (por ejemplo, su oveja atrap√≥ una burbuja con fruta, actualizamos la puntuaci√≥n en la GUI). <br><br> <a href=""><img src="https://habrastorage.org/webt/cl/rm/qp/clrmqpozdciyhz7h-g9ogemttlc.png"></a> <br><br>  y viceversa (se acab√≥ la energ√≠a, informamos a las ovejas que es hora de dormir). <br><br> <a href=""><img src="https://habrastorage.org/webt/z4/kr/zq/z4krzqprxf9uk-8vvrtpp9nigok.png"></a> <br><br>  Los problemas surgen cuando las variables calculadas en uno de los scripts en el m√©todo de actualizaci√≥n no tienen tiempo para actualizar, porque los mensajes est√°n fuera de turno.  Pero esto no es nada, lo principal es acostumbrarse. <br><br>  Otro matiz son las direcciones de los objetos.  En esencia, estas son cadenas, sin embargo, en las plataformas m√≥viles, las cadenas est√°n deshabilitadas para ahorrar recursos (¬ød√≥nde, maldici√≥n, est√° escrito?), En lugar de ellos hay un hash.  No parece nada, s√≠, pero si la l√≥gica de su juego env√≠a mensajes a trav√©s de las l√≠neas editadas, espere el problema, el servicio postal no entregar√° una carta al destinatario.  Por lo tanto, reserve direcciones en variables a trav√©s del m√©todo msg.url () y no toque.  En realidad, estos son peque√±os, pero al principio quita terriblemente un tiempo precioso.  Por ejemplo, para saber si una oveja est√° en el suelo, debe agregar un cuerpo cinem√°tico adicional justo debajo de las patas y preguntarle si hay una entrada en el suelo. <br><br><h2>  Huesos de drag√≥n en lugar de columna vertebral </h2><br>  No hay problema, usamos un drag√≥n, porque la columna est√° muy pagada.  Pero, como siempre, hay un pero.  La columna tiene una funci√≥n: la piel, el drag√≥n no la tiene.  ¬øC√≥mo resolverlo?  Manos  Abre json desde la columna vertebral y mira donde hay piel, analiza, copia, pega en nuestro json desde el drag√≥n y edita como deber√≠a, eso es todo.  Un script de Python te ahorra una cantidad decente.  En cuanto a los guiones, generalmente es un cuento de hadas.  Como todos los archivos son texto, la edici√≥n puede ser automatizada.  Por ejemplo, recolect√© un nivel en el editor usando un atlas general con una gran cantidad de texturas (m√°s de 300), pero no us√© todo, solo alrededor de 100. Para no usar mis manos, "optimic√©" el optimizador de atlas: todo lo que se usa en la colecci√≥n permanece, el resto tira a la basura.  Es muy conveniente cuando puedes automatizar algo. <br><br><h2>  Compartir y Admob </h2><br>  El bot√≥n Compartir se puede encontrar en activos y adjuntar en un par de minutos.  Precauci√≥n con los activos!  Asmo Admob, por ejemplo, ralentiza significativamente la compilaci√≥n y tampoco se proporciona cuando no hay conexi√≥n de red.  En el caso de Admob (no escribir√© c√≥mo incrustarlo, todo est√° en la documentaci√≥n en el github), a√∫n debe hacer una verificaci√≥n en la plataforma, de lo contrario, la compilaci√≥n en las ventanas dar√° un error.  Por lo tanto, al desarrollar, posponga la publicidad y otros activos por √∫ltima vez, como  La construcci√≥n de Defold sin ellos es muy r√°pida.  En cuanto a la localizaci√≥n, puede crear un diccionario de este tipo: <br><br><pre><code class="hljs markdown">dict[<span class="hljs-string"><span class="hljs-string">"ru"</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">"lang"</span></span>]=" " dict[<span class="hljs-string"><span class="hljs-string">"en"</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">"lang"</span></span>]="Ya ne russkiy"</code> </pre> <br>  y cambie el texto durante la inicializaci√≥n, haciendo referencia a lo siguiente: <br><br><pre> <code class="hljs markdown"> language=sys.get<span class="hljs-emphasis"><span class="hljs-emphasis">_sys_</span></span>info().language label.set_text("game:/go#label",dict[<span class="hljs-string"><span class="hljs-string">language</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">"lang"</span></span>]</code> </pre> <br>  Eso es b√°sicamente todo, de acuerdo con el resultado, Defold es muy bueno (cuando lo descubr√≠), as√≠ que les aconsejo a todos.  A qui√©n le importa lo que obtuve, mira el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">trailer</a> aqu√≠ (no para relaciones p√∫blicas, mi p√∫blico objetivo son los ni√±os). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416461/">https://habr.com/ru/post/es416461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416451/index.html">Las bases de datos de Microsoft Research ahora est√°n disponibles para todos</a></li>
<li><a href="../es416453/index.html">Esquemas de robo en sistemas RBS y cinco niveles de contrarrestarlos</a></li>
<li><a href="../es416455/index.html">El robot "ciego" Cheetah 3 puede subir una escalera llena de obst√°culos</a></li>
<li><a href="../es416457/index.html">Bloomberg: Hedge Funds descubre que el Brexit supera a otros y gana miles de millones</a></li>
<li><a href="../es416459/index.html">Etiquetas HTML en cascada usando C #</a></li>
<li><a href="../es416463/index.html">Flujo eterno: c√≥mo los reguladores luchan contra el drenaje de datos personales</a></li>
<li><a href="../es416465/index.html">Carrera para enviar robots para minar desde el fondo del oc√©ano</a></li>
<li><a href="../es416467/index.html">Cu√°nta materia oscura atraviesa tu cuerpo cada segundo</a></li>
<li><a href="../es416469/index.html">Sincronizaci√≥n de billetera Bitcoin</a></li>
<li><a href="../es416471/index.html">El origen azul de Jeff Bezos planea aterrizar en la luna para 2023</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>