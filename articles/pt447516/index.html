<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë©üèª üë©‚Äçüë©‚Äçüëß‚Äçüëß üëâüèø Como fizemos o overclock do CAD COMPASS-3D ‚Üí Parte 2 üê† üöæ üî∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na √∫ltima parte, falamos sobre o nascimento do KOMPAS-3D v18, algo sobre a sele√ß√£o de crit√©rios e modelos para testar novas fun√ß√µes, e tamb√©m abordamo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como fizemos o overclock do CAD COMPASS-3D ‚Üí Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/447516/">  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√∫ltima parte,</a> falamos sobre o nascimento do KOMPAS-3D v18, algo sobre a sele√ß√£o de crit√©rios e modelos para testar novas fun√ß√µes, e tamb√©m abordamos o t√≥pico de renderiza√ß√£o na vers√£o ‚ÄúB√°sico‚Äù. <br>  Vamos continuar com a hist√≥ria sobre a op√ß√£o de renderiza√ß√£o "Melhorado". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/eh/lx/rgehlxcmqgdhw0tfwtdl_ajgyp8.jpeg"></div><a name="habracut"></a><br><h1>  <font color="#00B2FF">Chamadas de desenho</font> </h1><blockquote><a href=""><img align="right" src="https://habrastorage.org/webt/ld/gb/19/ldgb19esjt6fk41auvk5dirjluy.png"></a>  <b>Alexander Tulup, programador:</b> <br>  ‚ÄúO principal problema do desempenho da exibi√ß√£o de cenas grandes est√° associado a um grande n√∫mero de chamadas de‚Äú chamadas de desenho ‚Äù.  A vers√£o antiga da renderiza√ß√£o √© constru√≠da sobre o modelo de dados matem√°ticos.  Assim, para cada primitiva - pontos, arestas, faces - um m√©todo separado foi chamado para sua exibi√ß√£o. <br><br>  Para cada chamada de empate, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenGL</a> (driver) realiza uma s√©rie de verifica√ß√µes, convertendo simultaneamente os comandos recebidos em um formato compreens√≠vel para a placa de v√≠deo, ap√≥s o qual as chamadas s√£o adicionadas √† fila e j√° s√£o executadas. <br><br><img src="https://habrastorage.org/webt/ei/rd/on/eirdonw__vgqgxcuby2kfglkm9c.png"><br>  <i>Esquema de transfer√™ncia de comando da GPU no OpenGL ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> )</i> <br><br>  Com um grande n√∫mero de detalhes, o n√∫mero de chamadas para a CPU aumenta tanto que os dados simplesmente n√£o t√™m tempo para chegar na placa de v√≠deo.  Temos uma situa√ß√£o em que em uma placa de v√≠deo muito forte ela "desacelera" da mesma maneira que em uma placa m√©dia ou mais fraca. <br><br>  Voc√™ pode lidar com isso reduzindo o n√∫mero de renderiza√ß√µes (transi√ß√µes de estado) - agrupe por material, combine geometria comum ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instancia√ß√£o</a> ) etc. <br><br>  N√£o devemos esquecer que, de toda a cena, vemos apenas uma parte dela.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Algoritmos para detectar objetos invis√≠veis s√£o</a> aplic√°veis ‚Äã‚Äãaqui (sele√ß√£o de frustum, sele√ß√£o de oclus√£o, etc.) <br><br>  Inspirados no exemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">The Road to One Million Draws</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AZDO</a> , decidimos seguir um caminho bastante incomum: livrar-se das altera√ß√µes de estado no lado da CPU o m√°ximo poss√≠vel.  Agora quase tudo √© feito na placa de v√≠deo.  Todos os atributos necess√°rios s√£o retirados diretamente da mem√≥ria de v√≠deo enquanto s√£o desenhados no pr√≥prio sombreador ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sombreador</a> ), que foi poss√≠vel gra√ßas ao aumento da mem√≥ria de v√≠deo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VRAM</a> ) e ao advento do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSBO</a> . <br><br><img src="https://habrastorage.org/webt/ta/is/xf/taisxf8tjdkcztftev7mbuvxi2m.png"><br>  <i>1.000.000 dados</i> <br><br>  Das vantagens dessa abordagem: a velocidade da tela se tornou realmente alta.  A velocidade √© limitada apenas pelos recursos da GPU, ou seja, a quantidade de dados que ela pode processar. <br><br>  Tamb√©m permitiu implementar com efici√™ncia mecanismos de recorte para objetos invis√≠veis.  Os resultados da verifica√ß√£o de visibilidade s√£o gravados diretamente na mem√≥ria de v√≠deo e, a partir da√≠, os comandos de desenho s√£o formados com base neles.  Ou seja, no lado da CPU, voc√™ n√£o precisa esperar. <br><br>  Uma das principais desvantagens dessa abordagem √© a alta complexidade de desenvolvimento.  Muito precisa ser implementado novamente, levando em considera√ß√£o a abordagem escolhida.  Al√©m disso, muitas vezes tivemos que lidar com uma situa√ß√£o em que o mesmo c√≥digo de sombreador funcionava de maneira diferente ou n√£o funcionava em placas de v√≠deo de diferentes fabricantes.  Geralmente, isso era "tratado" pela atualiza√ß√£o do driver, mas algumas vezes ap√≥s uma longa depura√ß√£o era necess√°rio reescrever o c√≥digo. <br><br>  Naturalmente, os requisitos para a placa de v√≠deo tamb√©m aumentaram.  O suporte ao OpenGL 4.5 √© uma chave, mas n√£o √© o √∫nico requisito. </blockquote>  A seguir, apresentamos os resultados da velocidade de renderiza√ß√£o durante a rota√ß√£o da montagem.  Lembre-se de que 24 quadros por segundo (fps) s√£o considerados indicadores confort√°veis ‚Äã‚Äãpara o olho humano. <br><blockquote>  <b>A seguir, as medi√ß√µes foram realizadas em um PC com a seguinte configura√ß√£o:</b> <br>  CPU: Intel Core i7-6700K 4.00 GHz <br>  RAM: 32 Gb <br>  GPU: NVidia Quadro P2000 <br>  SO: Microsoft Windows 10 x64 Professional </blockquote>  <i>Tabela 1. Taxa de quadros (quadros por segundo, fps) em v√°rios modelos.</i>  <i>Mais √© melhor.</i>  <i>Modo de exibi√ß√£o: Meio-tom + estrutura de arame, modo simplificado desativado, qualidade de suaviza√ß√£o de serrilhado: m√©dia (MSAA 8x)</i> <br><table><tbody><tr><td rowspan="2">  <b>Modelo</b> </td><td rowspan="2">  <b>Quantidade</b> <b><br></b>  <b>componentes</b> </td><td colspan="3">  <b>Taxa de quadros, fps</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/ls/hl/6s/lshl6shv12lncujsabab3t5ed1c.png" alt="imagem"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Carro</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moagem em mosaico</a> <br></td><td>  2764 </td><td>  4.1 </td><td>  4.7 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/_d/4j/bn/_d4jbnztqcslsnedjtneaudg3ey.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PGU-410</a> </td><td>  108337 </td><td>  0,3 </td><td>  0,4 </td><td>  <b>28,6</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/w6/nm/m5/w6nmm5nt369jn5vldy_5faa2iii.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dumper de carro</a> </td><td>  17342 </td><td>  1,1 </td><td>  1.4 </td><td>  <b>124,7</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/vb/qs/xz/vbqsxzx8qc1gj8isnfdynncvhy0.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√înibus bonde</a> </td><td>  9783 </td><td>  1.9 </td><td>  2,4 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/wp/bv/jm/wpbvjmjl094bur5ajdkwgpjf7z8.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mar√© do Norte</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esta√ß√£o de poder</a> </td><td>  48445 </td><td>  0,3 </td><td>  0,5 </td><td>  <b>76,1</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instala√ß√£o</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°cuo tecnol√≥gico</a> </td><td>  7189 </td><td>  1.9 </td><td>  2,3 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  6414 </td><td>  2.6 </td><td>  3.6. </td><td>  <b>123,9</b> </td></tr></tbody></table><br><br><h3>  <font color="#00B2FF">Adicionando componentes a uma montagem grande</font> </h3><br>  O cen√°rio com a adi√ß√£o de componentes em uma montagem grande acabou evoluindo para o chamado teste complexo, descrito na Tabela 2. <br><br>  <i>Tabela 2. Cen√°rio com inclus√£o de componentes em uma montagem grande.</i>  <i>Crit√©rios de teste.</i> <br><table><tbody><tr><td>  <b>Crit√©rio</b> </td><td>  <b>Crit√©rio Descri√ß√£o</b> </td></tr><tr><td>  Velocidade de abertura de arquivo </td><td>  <i>O componente adicionado √† montagem deve ser carregado do disco</i> </td></tr><tr><td>  Velocidade de renderiza√ß√£o </td><td>  <i>A montagem e o componente inserido devem estar posicionados, para isso voc√™ precisa girar / mover / ampliar a imagem</i> </td></tr><tr><td>  Velocidade de sele√ß√£o de objetos </td><td>  <i>Para criar posicionamentos, voc√™ precisa selecionar os objetos b√°sicos: faces, planos, arestas, etc.</i> </td></tr><tr><td>  Velocidade de sincroniza√ß√£o com a √°rvore de constru√ß√£o </td><td>  <i>O componente adicionado √† montagem e suas interfaces devem ser representados na √°rvore de constru√ß√£o</i> </td></tr><tr><td>  Velocidade de sincroniza√ß√£o do m√≥dulo de especifica√ß√£o </td><td>  <i>O componente adicionado ao conjunto deve ser considerado na especifica√ß√£o.</i> </td></tr></tbody></table><br>  Na tabela, voc√™ pode ver os pontos (desenho, abertura), que desde o in√≠cio foram selecionados como dire√ß√µes separadas de acelera√ß√µes.  Mas as melhorias exigiram outros componentes. <br><br>  Um tempo significativo foi gasto pela sincroniza√ß√£o com uma √°rvore.  Resolvemos o problema implementando uma atualiza√ß√£o parcial. <br><br>  Outra dificuldade foi o impacto significativo da especifica√ß√£o no desempenho do KOMPAS-3D.  Em alguns cen√°rios de teste complexos, esse componente foi o principal (50% ou mais). <br><div class="spoiler">  <b class="spoiler_title">Especifica√ß√£o</b> <div class="spoiler_text"><blockquote>  A especifica√ß√£o √© o m√≥dulo do sistema KOMPAS-3D, respons√°vel pela forma√ß√£o do documento de design com o mesmo nome.  √â desenvolvido por uma equipe separada. <br><br>  Em particular, a equipe acelerou a sincroniza√ß√£o durante a inser√ß√£o, redesenhando os mecanismos internos do m√≥dulo de especifica√ß√£o. </blockquote><br></div></div><br><h3>  <font color="#00B2FF">Alguns resultados</font> </h3><br>  Adicione componentes √† montagem "Redutor da usina do navio". <br><br><img src="https://habrastorage.org/webt/oh/zs/d-/ohzsd-w4xu3jcz-zko7iein1t8g.png"><br>  <i>Teste abrangente para a montagem "Redutor de uma usina mar√≠tima".</i> <i><br></i>  <i>Os n√∫meros mostram: 1 - suporte, 2 - arruela, 3 - parafusos.</i> <br><br>  <i>Tabela 3. Tempo de inser√ß√£o dos componentes em uma montagem grande em segundos.</i>  <i>Menos √© melhor.</i> <br><table><tbody><tr><td rowspan="2">  <b>Componente</b> </td><td colspan="2" rowspan="2">  <b>Ac√ß√£o</b> </td><td colspan="3">  <b>Tempo s</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td rowspan="13">  Inserir <br>  componente <br>  Suporte <br><br><img src="https://habrastorage.org/webt/0_/uh/gz/0_uhgzadc0r1vpwsjdijjrsx-qa.png"></td><td colspan="2">  A carregar </td><td>  <b>2.0</b> </td><td>  3.0 </td><td>  2.2 </td></tr><tr><td colspan="2">  Mudar para o modo de emparelhamento </td><td>  0,6 </td><td>  0,4 </td><td>  0,4 </td></tr><tr><td rowspan="3">  Primeiro emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.8 </td><td>  3.6. </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Segundo emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,5 </td><td>  1.4 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1.4 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.6. </td><td>  3.0 </td><td>  <b>1,2</b> </td></tr><tr><td rowspan="3">  Terceiro emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,3 </td><td>  1,1 </td><td>  0,3 </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3,7 </td><td>  3.2. </td><td>  <b>1,1</b> </td></tr><tr><td colspan="2">  Confirmar cria√ß√£o de inser√ß√£o </td><td>  7.8 </td><td>  5.2. </td><td>  <b>2,3</b> </td></tr><tr><td colspan="2">  Inser√ß√£o total do suporte </td><td>  24,2 </td><td>  24,6 </td><td>  <b>10.1</b> </td></tr><tr><td rowspan="4">  Inserir <br>  anilhas <br>  da biblioteca <br>  padr√£o <br>  produtos <br><br><img src="https://habrastorage.org/webt/ch/hm/6g/chhm6g-guxcbwvetqsd5teyb3os.png"><br><br></td><td colspan="2">  Primeira sele√ß√£o de emparelhamento </td><td>  6.4 </td><td>  2,4 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Sele√ß√£o do segundo par </td><td>  4.2 </td><td>  3,1 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Confirmar cria√ß√£o de inser√ß√£o </td><td>  15,7 </td><td>  9.2 </td><td>  <b>4.4.</b> </td></tr><tr><td colspan="2">  Total para arruelas de inser√ß√£o </td><td>  26,3 </td><td>  14,7 </td><td>  <b>5.2.</b> </td></tr><tr><td rowspan="13">  Inserir <br>  parafusos <br><br><img src="https://habrastorage.org/webt/14/lp/ro/14lproscfkxs7g82wmaemf0ncbe.png"></td><td colspan="2">  A carregar </td><td>  2.0 </td><td>  2.7 </td><td>  2.0 </td></tr><tr><td colspan="2">  Mudar para o modo de emparelhamento </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td rowspan="3">  Primeiro emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,4 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.4. </td><td>  2.7 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Segundo emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,4 </td><td>  1,2 </td><td>  0,4 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  0,5 </td><td>  <b>0,4</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3,7 </td><td>  2.9 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Terceiro emparelhamento </td><td>  Sele√ß√£o do primeiro objeto </td><td>  0,5 </td><td>  1,0 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  4.2 </td><td>  3.9 </td><td>  <b>1,2</b> </td></tr><tr><td colspan="2">  Confirmar cria√ß√£o de inser√ß√£o </td><td>  32,5 </td><td>  5,4 </td><td>  <b>2.2</b> </td></tr><tr><td colspan="2">  Total para inser√ß√£o de parafusos </td><td>  49. </td><td>  21,2 </td><td>  <b>9,8</b> </td></tr><tr><td colspan="3">  <i><b>A inser√ß√£o total dos tr√™s componentes</b></i> </td><td>  <i>99,5</i> </td><td>  <i>60,5</i> </td><td>  <b><i>25,1</i></b> </td></tr></tbody></table><br><br>  Um teste abrangente pode ser considerado como um dos cen√°rios de edi√ß√£o da montagem (a partir do n√∫mero de comuns). <br><br>  Al√©m disso, a reconstru√ß√£o da montagem acelerou.  Agora, se voc√™ editar uma opera√ß√£o, a montagem inteira n√£o ser√° completamente reconstru√≠da - apenas os objetos alterados ser√£o atualizados.  Para determinar as opera√ß√µes dependentes, ou seja, essas opera√ß√µes, cujo resultado pode ser afetado pelo resultado da opera√ß√£o alterada, √© utilizado um algoritmo especial que cria conex√µes entre opera√ß√µes, corpos e inser√ß√µes. <br><br><h3>  <font color="#00B2FF">Abrir montagens</font> </h3><br>  A id√©ia principal de aumentar a velocidade da leitura de arquivos √© fazer com que o KOMPAS-3D leia apenas o que o usu√°rio precisa no momento. <br><br>  Por exemplo: <br><br><ul><li>  leia apenas a execu√ß√£o atual para pastilhas de montagem, </li><li>  para tipos de download, leia apenas as informa√ß√µes necess√°rias: triangula√ß√£o ou triangula√ß√£o + resultados ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">B-rep</a> ). </li></ul><br>  Tudo isso requereu refinamento da estrutura de dados no arquivo para que suas partes individuais pudessem ser lidas. <br><br><blockquote> <a href=""><img align="right" src="https://habrastorage.org/webt/br/cu/ku/brcukuey6fmjicbcsx2tibjhjhw.png"></a>  <b>Anton Sidyakin, programador, l√≠der de equipe:</b> <br><br>  ‚ÄúH√° algum tempo, o arquivo KOMPAS-3D √© um arquivo que combina v√°rios arquivos de servi√ßo.  Um deles cont√©m dados de modelo / montagem de documentos organizados em uma estrutura em √°rvore.  A capacidade de navegar nessa estrutura j√° existia.  Para leitura parcial, era necess√°rio garantir a independ√™ncia das partes entre si.  Assim, as partes recebidas n√£o deveriam ter se referido, caso contr√°rio, a parte com o link teria se tornado "inferior". <br><br>  Como resultado, para detalhes, foi poss√≠vel separar o desempenho do documento e um do outro.  Nas montagens, o cont√™iner para inser√ß√µes e posicionamentos √© destacado separadamente.  Dentro das execu√ß√µes, tamb√©m foi poss√≠vel separar os dados iniciais para a constru√ß√£o e os resultados na forma de triangula√ß√£o e corpos. <br><br><img src="https://habrastorage.org/webt/yh/h3/kc/yhh3kchzbyacjohgjlzvu1laoz4.png"><br><br>  Se falamos sobre tipos simplificados de carregamento, a montagem edit√°vel √© totalmente carregada e apenas triangula√ß√£o e, dependendo do tipo, representa√ß√£o de limite (B-rep) s√£o carregadas de suas inser√ß√µes.  A exibi√ß√£o de inser√ß√µes com vari√°veis ‚Äã‚Äãexternas alteradas nesse modo apresentou algumas dificuldades, uma vez que foram obtidas anteriormente em tempo real mediante a reconstru√ß√£o durante a leitura e, nos tipos simplificados de carregamento, n√£o h√° dados para isso.  A solu√ß√£o foi anotar os resultados da reconstru√ß√£o dessas pastilhas na montagem.  Isso deu acelera√ß√£o e devido √† falta de reconstru√ß√£o. <br><br>  A divis√£o descrita do documento em pe√ßas permitiu carregar na montagem apenas os desempenhos selecionados nas inser√ß√µes. </blockquote>  Al√©m de acelerar a abertura de arquivos, a leitura parcial tamb√©m ajudou a reduzir os recursos consumidos - principalmente a RAM. <br><br>  Com base nas melhorias, apareceu um novo tipo de carregamento de montagem - ‚ÄúParcial‚Äù.  Nesse tipo de carregamento, apenas os resultados (corpos, superf√≠cies) e triangula√ß√£o s√£o subtra√≠dos do arquivo.  O carregamento parcial permite criar pares e √© pr√≥ximo em termos de funcionalidade ao carregamento completo dos componentes. <br><br>  Ap√≥s implementar melhorias na leitura parcial, a cria√ß√£o de tipos de carregamento personalizados se torna promissora. <br><br><div class="spoiler">  <b class="spoiler_title">Sugest√£o</b> <div class="spoiler_text"><blockquote>  Tipos de inicializa√ß√£o personalizados s√£o combina√ß√µes de m√©todos do sistema para carregar um componente.  Essa fun√ß√£o n√£o √© nova, mas as melhorias feitas na v18 permitem que voc√™ obtenha b√¥nus significativos por seu uso. </blockquote><br></div></div><br>  Para componentes que n√£o s√£o importantes para futuras compila√ß√µes, o tipo de carga "Vazio" pode ser aplicado.  Estes podem ser componentes escondidos dentro de outros ("vnutryanka").  Na v18, componentes (e montagens inteiras) com o tipo de inicializa√ß√£o "Vazio" s√£o abertos quase instantaneamente. <br><br>  <i>Tabela 4. Tempo de abertura para montagens com os tipos de inicializa√ß√£o ‚ÄúVazio‚Äù e ‚ÄúDimens√£o‚Äù em segundos.</i>  <i>Menos √© melhor.</i> <br><table><tbody><tr><td rowspan="2">  Modelo </td><td rowspan="2">  Tipo de Download </td><td colspan="3">  Hor√°rio de abertura, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instala√ß√£o</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°cuo tecnol√≥gico</a> </td><td>  Vazio </td><td>  12,8 </td><td>  11,7 </td><td>  <b>2,5</b> </td></tr><tr><td>  Tamanho </td><td>  21,2 </td><td>  20,8 </td><td>  <b>2.6</b> </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  Vazio </td><td>  31,0 </td><td>  15,9 </td><td>  <b>7.2</b> </td></tr><tr><td>  Tamanho </td><td>  371,5 </td><td>  114,8 </td><td>  <b>7.3</b> </td></tr></tbody></table><br><br>  Os componentes restantes, necess√°rios para entender a apar√™ncia do produto ou ser√£o usados ‚Äã‚Äãcomo objetos de suporte para futuras constru√ß√µes, podem ser carregados ‚ÄúCheio‚Äù ou ‚ÄúParcialmente‚Äù. <br><br>  Como uma ferramenta para preparar tipos de inicializa√ß√£o personalizados, voc√™ pode usar novos comandos para selecionar componentes "invis√≠veis".  Aplicamos o comando e, em seguida, usamos o menu de contexto para alterar o tipo de carregamento dos componentes selecionados para "Vazio". <br><br><h3>  <font color="#00B2FF">Proje√ß√£o</font> </h3><br>  Ao acelerar a proje√ß√£o, nos perguntamos a quest√£o de filtrar os dados recebidos na entrada do n√∫cleo matem√°tico. <br><br>  Em primeiro lugar, decidimos filtrar componentes / corpos invis√≠veis.  Para esse prop√≥sito, foi utilizado o mecanismo de sele√ß√£o de oclus√£o - permite descobrir se o corpo que ser√° projetado √© vis√≠vel ou se fecha e se encontra dentro de outro corpo.  Esta opera√ß√£o √© realizada na lateral da placa de v√≠deo. <br><br>  O maior efeito ser√° ao criar proje√ß√µes de modelos com um grande n√∫mero de componentes ocultos em volumes fechados, por exemplo: <br><br><ul><li>  acionamentos complexos, caixas de engrenagens etc., </li><li>  ve√≠culos </li><li>  edif√≠cios </li><li>  arm√°rios com equipamentos el√©tricos. </li></ul><br>  Para inclus√£o, a op√ß√£o "Proje√ß√£o aproximada" √© respons√°vel.  O nome n√£o √© acidental - pe√ßas relativamente pequenas (por exemplo, um parafuso na escala de uma usina) podem n√£o ser projetadas em uma escala de montagem.  Para muitos usu√°rios, esse estado de coisas ser√° adequado, especialmente no caso de cria√ß√£o de desenhos dimensionais e desenhos gerais. <br><br><div class="spoiler">  <b class="spoiler_title">Leia mais sobre a op√ß√£o Proje√ß√£o aproximada.</b> <div class="spoiler_text"><blockquote>  A op√ß√£o est√° dispon√≠vel apenas para proje√ß√µes padr√£o.  Para especificar imagens (se√ß√µes, se√ß√µes, vistas remotas) "Proje√ß√£o aproximada" n√£o est√° envolvida. </blockquote><br></div></div><br>  Mesmo sem usar esta op√ß√£o, a proje√ß√£o √© visivelmente mais r√°pida em compara√ß√£o com a V16 e v17.  Isso foi ajudado por melhorias do lado do n√∫cleo matem√°tico. <br><br>  <i>Tabela 5. Hora de criar tr√™s proje√ß√µes padr√£o em segundos.</i>  <i>Menos √© melhor.</i> <br><table><tbody><tr><td rowspan="2">  Modelo </td><td colspan="4">  Hora de criar tr√™s proje√ß√µes padr√£o, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 <br>  Inclu√≠do <br>  rascunho <br>  proje√ß√£o </td><td>  v18 <br>  Desligado <br>  rascunho <br>  proje√ß√£o </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instala√ß√£o</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°cuo tecnol√≥gico</a> </td><td>  124,1 </td><td>  47,5 </td><td>  <b>12,9</b> </td><td>  34,6 </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  256 </td><td>  410 </td><td>  <b>38,4</b> </td><td>  54,4 </td></tr><tr><td><img src="https://habrastorage.org/webt/bi/nn/nl/binnnlusnbewy71vya0vorxubpg.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Multiuso</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">unificado</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">corpo da caixa</a> </td><td>  99,9 </td><td>  123,4 </td><td>  <b>44,9</b> </td><td>  53,5 </td></tr></tbody></table><br><br>  Tamb√©m na v18, foi implementada a possibilidade de reconstruir esp√©cies associativas individuais. <br><br>  Em um desenho que cont√©m muitas vistas associativas, o usu√°rio tem a oportunidade de reconstruir vistas irrelevantes individuais.  Por exemplo, aquele ao qual ele deseja adicionar anota√ß√µes.  Voc√™ tamb√©m pode especificar as vistas criadas com a op√ß√£o Proje√ß√£o aproximada ativada. <br><br><div class="spoiler">  <b class="spoiler_title">Reconstruir uma √∫nica visualiza√ß√£o</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/og/nk/em/ognkemiqn2re1hneq0cbw4rcjgy.png"><br></div></div><br>  Esse recurso n√£o se aplica a acelera√ß√µes expl√≠citas, mas permite que o usu√°rio economize tempo. <br><br>  O resultado do trabalho realizado para acelerar a proje√ß√£o do modelo de instala√ß√£o tecnol√≥gica a v√°cuo no desenho: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/P2kloyNOedE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pr√≥xima parte,</a> descreveremos como aceleramos o c√°lculo das caracter√≠sticas de centraliza√ß√£o em massa (MTC), sobre a contribui√ß√£o do n√∫cleo geom√©trico do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">c3dlabs</a> para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">desempenho do</a> COMPAS-3D, altera√ß√µes no C3D Modeler e tamb√©m sobre qual hardware √© adequado para a v18.</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447516/">https://habr.com/ru/post/pt447516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447502/index.html">Como criar um curr√≠culo para empresas de TI estrangeiras</a></li>
<li><a href="../pt447508/index.html">Sergey Zonov: ‚ÄúFiz o primeiro Spectrum porque estava interessado‚Äù</a></li>
<li><a href="../pt447510/index.html">GeekUniversity abre inscri√ß√£o no Departamento de Design</a></li>
<li><a href="../pt447512/index.html">E quem fez isso? Automatize a auditoria de seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt447514/index.html">7 startups interessantes na IoT</a></li>
<li><a href="../pt447520/index.html">Recursos de classifica√ß√£o autom√°tica por n√≠veis no armazenamento Qsan XCubeSAN</a></li>
<li><a href="../pt447522/index.html">Que coisas √∫teis podem ser extra√≠das dos logs de uma esta√ß√£o de trabalho baseada no Windows</a></li>
<li><a href="../pt447526/index.html">Bicicleta pr√≥pria para sincronizar MariaDB e Sphinx</a></li>
<li><a href="../pt447528/index.html">Quem √© respons√°vel pela qualidade?</a></li>
<li><a href="../pt447530/index.html">OceanLotus: atualiza√ß√£o de Malvari para macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>