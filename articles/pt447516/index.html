<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👩🏻 👩‍👩‍👧‍👧 👉🏿 Como fizemos o overclock do CAD COMPASS-3D → Parte 2 🐠 🚾 🔷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na última parte, falamos sobre o nascimento do KOMPAS-3D v18, algo sobre a seleção de critérios e modelos para testar novas funções, e também abordamo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como fizemos o overclock do CAD COMPASS-3D → Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/447516/">  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">última parte,</a> falamos sobre o nascimento do KOMPAS-3D v18, algo sobre a seleção de critérios e modelos para testar novas funções, e também abordamos o tópico de renderização na versão “Básico”. <br>  Vamos continuar com a história sobre a opção de renderização "Melhorado". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/eh/lx/rgehlxcmqgdhw0tfwtdl_ajgyp8.jpeg"></div><a name="habracut"></a><br><h1>  <font color="#00B2FF">Chamadas de desenho</font> </h1><blockquote><a href=""><img align="right" src="https://habrastorage.org/webt/ld/gb/19/ldgb19esjt6fk41auvk5dirjluy.png"></a>  <b>Alexander Tulup, programador:</b> <br>  “O principal problema do desempenho da exibição de cenas grandes está associado a um grande número de chamadas de“ chamadas de desenho ”.  A versão antiga da renderização é construída sobre o modelo de dados matemáticos.  Assim, para cada primitiva - pontos, arestas, faces - um método separado foi chamado para sua exibição. <br><br>  Para cada chamada de empate, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenGL</a> (driver) realiza uma série de verificações, convertendo simultaneamente os comandos recebidos em um formato compreensível para a placa de vídeo, após o qual as chamadas são adicionadas à fila e já são executadas. <br><br><img src="https://habrastorage.org/webt/ei/rd/on/eirdonw__vgqgxcuby2kfglkm9c.png"><br>  <i>Esquema de transferência de comando da GPU no OpenGL ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> )</i> <br><br>  Com um grande número de detalhes, o número de chamadas para a CPU aumenta tanto que os dados simplesmente não têm tempo para chegar na placa de vídeo.  Temos uma situação em que em uma placa de vídeo muito forte ela "desacelera" da mesma maneira que em uma placa média ou mais fraca. <br><br>  Você pode lidar com isso reduzindo o número de renderizações (transições de estado) - agrupe por material, combine geometria comum ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instanciação</a> ) etc. <br><br>  Não devemos esquecer que, de toda a cena, vemos apenas uma parte dela.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Algoritmos para detectar objetos invisíveis são</a> aplicáveis ​​aqui (seleção de frustum, seleção de oclusão, etc.) <br><br>  Inspirados no exemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">The Road to One Million Draws</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AZDO</a> , decidimos seguir um caminho bastante incomum: livrar-se das alterações de estado no lado da CPU o máximo possível.  Agora quase tudo é feito na placa de vídeo.  Todos os atributos necessários são retirados diretamente da memória de vídeo enquanto são desenhados no próprio sombreador ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sombreador</a> ), que foi possível graças ao aumento da memória de vídeo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VRAM</a> ) e ao advento do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSBO</a> . <br><br><img src="https://habrastorage.org/webt/ta/is/xf/taisxf8tjdkcztftev7mbuvxi2m.png"><br>  <i>1.000.000 dados</i> <br><br>  Das vantagens dessa abordagem: a velocidade da tela se tornou realmente alta.  A velocidade é limitada apenas pelos recursos da GPU, ou seja, a quantidade de dados que ela pode processar. <br><br>  Também permitiu implementar com eficiência mecanismos de recorte para objetos invisíveis.  Os resultados da verificação de visibilidade são gravados diretamente na memória de vídeo e, a partir daí, os comandos de desenho são formados com base neles.  Ou seja, no lado da CPU, você não precisa esperar. <br><br>  Uma das principais desvantagens dessa abordagem é a alta complexidade de desenvolvimento.  Muito precisa ser implementado novamente, levando em consideração a abordagem escolhida.  Além disso, muitas vezes tivemos que lidar com uma situação em que o mesmo código de sombreador funcionava de maneira diferente ou não funcionava em placas de vídeo de diferentes fabricantes.  Geralmente, isso era "tratado" pela atualização do driver, mas algumas vezes após uma longa depuração era necessário reescrever o código. <br><br>  Naturalmente, os requisitos para a placa de vídeo também aumentaram.  O suporte ao OpenGL 4.5 é uma chave, mas não é o único requisito. </blockquote>  A seguir, apresentamos os resultados da velocidade de renderização durante a rotação da montagem.  Lembre-se de que 24 quadros por segundo (fps) são considerados indicadores confortáveis ​​para o olho humano. <br><blockquote>  <b>A seguir, as medições foram realizadas em um PC com a seguinte configuração:</b> <br>  CPU: Intel Core i7-6700K 4.00 GHz <br>  RAM: 32 Gb <br>  GPU: NVidia Quadro P2000 <br>  SO: Microsoft Windows 10 x64 Professional </blockquote>  <i>Tabela 1. Taxa de quadros (quadros por segundo, fps) em vários modelos.</i>  <i>Mais é melhor.</i>  <i>Modo de exibição: Meio-tom + estrutura de arame, modo simplificado desativado, qualidade de suavização de serrilhado: média (MSAA 8x)</i> <br><table><tbody><tr><td rowspan="2">  <b>Modelo</b> </td><td rowspan="2">  <b>Quantidade</b> <b><br></b>  <b>componentes</b> </td><td colspan="3">  <b>Taxa de quadros, fps</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/ls/hl/6s/lshl6shv12lncujsabab3t5ed1c.png" alt="imagem"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Carro</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">moagem em mosaico</a> <br></td><td>  2764 </td><td>  4.1 </td><td>  4.7 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/_d/4j/bn/_d4jbnztqcslsnedjtneaudg3ey.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PGU-410</a> </td><td>  108337 </td><td>  0,3 </td><td>  0,4 </td><td>  <b>28,6</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/w6/nm/m5/w6nmm5nt369jn5vldy_5faa2iii.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dumper de carro</a> </td><td>  17342 </td><td>  1,1 </td><td>  1.4 </td><td>  <b>124,7</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/vb/qs/xz/vbqsxzx8qc1gj8isnfdynncvhy0.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ônibus bonde</a> </td><td>  9783 </td><td>  1.9 </td><td>  2,4 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/wp/bv/jm/wpbvjmjl094bur5ajdkwgpjf7z8.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Maré do Norte</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estação de poder</a> </td><td>  48445 </td><td>  0,3 </td><td>  0,5 </td><td>  <b>76,1</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instalação</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vácuo tecnológico</a> </td><td>  7189 </td><td>  1.9 </td><td>  2,3 </td><td>  <b>124,9</b> </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  6414 </td><td>  2.6 </td><td>  3.6. </td><td>  <b>123,9</b> </td></tr></tbody></table><br><br><h3>  <font color="#00B2FF">Adicionando componentes a uma montagem grande</font> </h3><br>  O cenário com a adição de componentes em uma montagem grande acabou evoluindo para o chamado teste complexo, descrito na Tabela 2. <br><br>  <i>Tabela 2. Cenário com inclusão de componentes em uma montagem grande.</i>  <i>Critérios de teste.</i> <br><table><tbody><tr><td>  <b>Critério</b> </td><td>  <b>Critério Descrição</b> </td></tr><tr><td>  Velocidade de abertura de arquivo </td><td>  <i>O componente adicionado à montagem deve ser carregado do disco</i> </td></tr><tr><td>  Velocidade de renderização </td><td>  <i>A montagem e o componente inserido devem estar posicionados, para isso você precisa girar / mover / ampliar a imagem</i> </td></tr><tr><td>  Velocidade de seleção de objetos </td><td>  <i>Para criar posicionamentos, você precisa selecionar os objetos básicos: faces, planos, arestas, etc.</i> </td></tr><tr><td>  Velocidade de sincronização com a árvore de construção </td><td>  <i>O componente adicionado à montagem e suas interfaces devem ser representados na árvore de construção</i> </td></tr><tr><td>  Velocidade de sincronização do módulo de especificação </td><td>  <i>O componente adicionado ao conjunto deve ser considerado na especificação.</i> </td></tr></tbody></table><br>  Na tabela, você pode ver os pontos (desenho, abertura), que desde o início foram selecionados como direções separadas de acelerações.  Mas as melhorias exigiram outros componentes. <br><br>  Um tempo significativo foi gasto pela sincronização com uma árvore.  Resolvemos o problema implementando uma atualização parcial. <br><br>  Outra dificuldade foi o impacto significativo da especificação no desempenho do KOMPAS-3D.  Em alguns cenários de teste complexos, esse componente foi o principal (50% ou mais). <br><div class="spoiler">  <b class="spoiler_title">Especificação</b> <div class="spoiler_text"><blockquote>  A especificação é o módulo do sistema KOMPAS-3D, responsável pela formação do documento de design com o mesmo nome.  É desenvolvido por uma equipe separada. <br><br>  Em particular, a equipe acelerou a sincronização durante a inserção, redesenhando os mecanismos internos do módulo de especificação. </blockquote><br></div></div><br><h3>  <font color="#00B2FF">Alguns resultados</font> </h3><br>  Adicione componentes à montagem "Redutor da usina do navio". <br><br><img src="https://habrastorage.org/webt/oh/zs/d-/ohzsd-w4xu3jcz-zko7iein1t8g.png"><br>  <i>Teste abrangente para a montagem "Redutor de uma usina marítima".</i> <i><br></i>  <i>Os números mostram: 1 - suporte, 2 - arruela, 3 - parafusos.</i> <br><br>  <i>Tabela 3. Tempo de inserção dos componentes em uma montagem grande em segundos.</i>  <i>Menos é melhor.</i> <br><table><tbody><tr><td rowspan="2">  <b>Componente</b> </td><td colspan="2" rowspan="2">  <b>Acção</b> </td><td colspan="3">  <b>Tempo s</b> </td></tr><tr><td>  <b>V16.1</b> </td><td>  <b>v17.1</b> </td><td>  <b>v18</b> </td></tr><tr><td rowspan="13">  Inserir <br>  componente <br>  Suporte <br><br><img src="https://habrastorage.org/webt/0_/uh/gz/0_uhgzadc0r1vpwsjdijjrsx-qa.png"></td><td colspan="2">  A carregar </td><td>  <b>2.0</b> </td><td>  3.0 </td><td>  2.2 </td></tr><tr><td colspan="2">  Mudar para o modo de emparelhamento </td><td>  0,6 </td><td>  0,4 </td><td>  0,4 </td></tr><tr><td rowspan="3">  Primeiro emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.8 </td><td>  3.6. </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Segundo emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,5 </td><td>  1.4 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1.4 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.6. </td><td>  3.0 </td><td>  <b>1,2</b> </td></tr><tr><td rowspan="3">  Terceiro emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,3 </td><td>  1,1 </td><td>  0,3 </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3,7 </td><td>  3.2. </td><td>  <b>1,1</b> </td></tr><tr><td colspan="2">  Confirmar criação de inserção </td><td>  7.8 </td><td>  5.2. </td><td>  <b>2,3</b> </td></tr><tr><td colspan="2">  Inserção total do suporte </td><td>  24,2 </td><td>  24,6 </td><td>  <b>10.1</b> </td></tr><tr><td rowspan="4">  Inserir <br>  anilhas <br>  da biblioteca <br>  padrão <br>  produtos <br><br><img src="https://habrastorage.org/webt/ch/hm/6g/chhm6g-guxcbwvetqsd5teyb3os.png"><br><br></td><td colspan="2">  Primeira seleção de emparelhamento </td><td>  6.4 </td><td>  2,4 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Seleção do segundo par </td><td>  4.2 </td><td>  3,1 </td><td>  <b>0,4</b> </td></tr><tr><td colspan="2">  Confirmar criação de inserção </td><td>  15,7 </td><td>  9.2 </td><td>  <b>4.4.</b> </td></tr><tr><td colspan="2">  Total para arruelas de inserção </td><td>  26,3 </td><td>  14,7 </td><td>  <b>5.2.</b> </td></tr><tr><td rowspan="13">  Inserir <br>  parafusos <br><br><img src="https://habrastorage.org/webt/14/lp/ro/14lproscfkxs7g82wmaemf0ncbe.png"></td><td colspan="2">  A carregar </td><td>  2.0 </td><td>  2.7 </td><td>  2.0 </td></tr><tr><td colspan="2">  Mudar para o modo de emparelhamento </td><td>  0,5 </td><td>  0,5 </td><td>  0,5 </td></tr><tr><td rowspan="3">  Primeiro emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,4 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,4 </td><td>  1,1 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3.4. </td><td>  2.7 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Segundo emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,4 </td><td>  1,2 </td><td>  0,4 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  0,5 </td><td>  <b>0,4</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  3,7 </td><td>  2.9 </td><td>  <b>1,0</b> </td></tr><tr><td rowspan="3">  Terceiro emparelhamento </td><td>  Seleção do primeiro objeto </td><td>  0,5 </td><td>  1,0 </td><td>  0,5 </td></tr><tr><td>  A escolha do segundo objeto </td><td>  0,5 </td><td>  1,0 </td><td>  <b>0,2</b> </td></tr><tr><td>  Selecione o emparelhamento certo </td><td>  4.2 </td><td>  3.9 </td><td>  <b>1,2</b> </td></tr><tr><td colspan="2">  Confirmar criação de inserção </td><td>  32,5 </td><td>  5,4 </td><td>  <b>2.2</b> </td></tr><tr><td colspan="2">  Total para inserção de parafusos </td><td>  49. </td><td>  21,2 </td><td>  <b>9,8</b> </td></tr><tr><td colspan="3">  <i><b>A inserção total dos três componentes</b></i> </td><td>  <i>99,5</i> </td><td>  <i>60,5</i> </td><td>  <b><i>25,1</i></b> </td></tr></tbody></table><br><br>  Um teste abrangente pode ser considerado como um dos cenários de edição da montagem (a partir do número de comuns). <br><br>  Além disso, a reconstrução da montagem acelerou.  Agora, se você editar uma operação, a montagem inteira não será completamente reconstruída - apenas os objetos alterados serão atualizados.  Para determinar as operações dependentes, ou seja, essas operações, cujo resultado pode ser afetado pelo resultado da operação alterada, é utilizado um algoritmo especial que cria conexões entre operações, corpos e inserções. <br><br><h3>  <font color="#00B2FF">Abrir montagens</font> </h3><br>  A idéia principal de aumentar a velocidade da leitura de arquivos é fazer com que o KOMPAS-3D leia apenas o que o usuário precisa no momento. <br><br>  Por exemplo: <br><br><ul><li>  leia apenas a execução atual para pastilhas de montagem, </li><li>  para tipos de download, leia apenas as informações necessárias: triangulação ou triangulação + resultados ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">B-rep</a> ). </li></ul><br>  Tudo isso requereu refinamento da estrutura de dados no arquivo para que suas partes individuais pudessem ser lidas. <br><br><blockquote> <a href=""><img align="right" src="https://habrastorage.org/webt/br/cu/ku/brcukuey6fmjicbcsx2tibjhjhw.png"></a>  <b>Anton Sidyakin, programador, líder de equipe:</b> <br><br>  “Há algum tempo, o arquivo KOMPAS-3D é um arquivo que combina vários arquivos de serviço.  Um deles contém dados de modelo / montagem de documentos organizados em uma estrutura em árvore.  A capacidade de navegar nessa estrutura já existia.  Para leitura parcial, era necessário garantir a independência das partes entre si.  Assim, as partes recebidas não deveriam ter se referido, caso contrário, a parte com o link teria se tornado "inferior". <br><br>  Como resultado, para detalhes, foi possível separar o desempenho do documento e um do outro.  Nas montagens, o contêiner para inserções e posicionamentos é destacado separadamente.  Dentro das execuções, também foi possível separar os dados iniciais para a construção e os resultados na forma de triangulação e corpos. <br><br><img src="https://habrastorage.org/webt/yh/h3/kc/yhh3kchzbyacjohgjlzvu1laoz4.png"><br><br>  Se falamos sobre tipos simplificados de carregamento, a montagem editável é totalmente carregada e apenas triangulação e, dependendo do tipo, representação de limite (B-rep) são carregadas de suas inserções.  A exibição de inserções com variáveis ​​externas alteradas nesse modo apresentou algumas dificuldades, uma vez que foram obtidas anteriormente em tempo real mediante a reconstrução durante a leitura e, nos tipos simplificados de carregamento, não há dados para isso.  A solução foi anotar os resultados da reconstrução dessas pastilhas na montagem.  Isso deu aceleração e devido à falta de reconstrução. <br><br>  A divisão descrita do documento em peças permitiu carregar na montagem apenas os desempenhos selecionados nas inserções. </blockquote>  Além de acelerar a abertura de arquivos, a leitura parcial também ajudou a reduzir os recursos consumidos - principalmente a RAM. <br><br>  Com base nas melhorias, apareceu um novo tipo de carregamento de montagem - “Parcial”.  Nesse tipo de carregamento, apenas os resultados (corpos, superfícies) e triangulação são subtraídos do arquivo.  O carregamento parcial permite criar pares e é próximo em termos de funcionalidade ao carregamento completo dos componentes. <br><br>  Após implementar melhorias na leitura parcial, a criação de tipos de carregamento personalizados se torna promissora. <br><br><div class="spoiler">  <b class="spoiler_title">Sugestão</b> <div class="spoiler_text"><blockquote>  Tipos de inicialização personalizados são combinações de métodos do sistema para carregar um componente.  Essa função não é nova, mas as melhorias feitas na v18 permitem que você obtenha bônus significativos por seu uso. </blockquote><br></div></div><br>  Para componentes que não são importantes para futuras compilações, o tipo de carga "Vazio" pode ser aplicado.  Estes podem ser componentes escondidos dentro de outros ("vnutryanka").  Na v18, componentes (e montagens inteiras) com o tipo de inicialização "Vazio" são abertos quase instantaneamente. <br><br>  <i>Tabela 4. Tempo de abertura para montagens com os tipos de inicialização “Vazio” e “Dimensão” em segundos.</i>  <i>Menos é melhor.</i> <br><table><tbody><tr><td rowspan="2">  Modelo </td><td rowspan="2">  Tipo de Download </td><td colspan="3">  Horário de abertura, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instalação</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vácuo tecnológico</a> </td><td>  Vazio </td><td>  12,8 </td><td>  11,7 </td><td>  <b>2,5</b> </td></tr><tr><td>  Tamanho </td><td>  21,2 </td><td>  20,8 </td><td>  <b>2.6</b> </td></tr><tr><td rowspan="2"><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  Vazio </td><td>  31,0 </td><td>  15,9 </td><td>  <b>7.2</b> </td></tr><tr><td>  Tamanho </td><td>  371,5 </td><td>  114,8 </td><td>  <b>7.3</b> </td></tr></tbody></table><br><br>  Os componentes restantes, necessários para entender a aparência do produto ou serão usados ​​como objetos de suporte para futuras construções, podem ser carregados “Cheio” ou “Parcialmente”. <br><br>  Como uma ferramenta para preparar tipos de inicialização personalizados, você pode usar novos comandos para selecionar componentes "invisíveis".  Aplicamos o comando e, em seguida, usamos o menu de contexto para alterar o tipo de carregamento dos componentes selecionados para "Vazio". <br><br><h3>  <font color="#00B2FF">Projeção</font> </h3><br>  Ao acelerar a projeção, nos perguntamos a questão de filtrar os dados recebidos na entrada do núcleo matemático. <br><br>  Em primeiro lugar, decidimos filtrar componentes / corpos invisíveis.  Para esse propósito, foi utilizado o mecanismo de seleção de oclusão - permite descobrir se o corpo que será projetado é visível ou se fecha e se encontra dentro de outro corpo.  Esta operação é realizada na lateral da placa de vídeo. <br><br>  O maior efeito será ao criar projeções de modelos com um grande número de componentes ocultos em volumes fechados, por exemplo: <br><br><ul><li>  acionamentos complexos, caixas de engrenagens etc., </li><li>  veículos </li><li>  edifícios </li><li>  armários com equipamentos elétricos. </li></ul><br>  Para inclusão, a opção "Projeção aproximada" é responsável.  O nome não é acidental - peças relativamente pequenas (por exemplo, um parafuso na escala de uma usina) podem não ser projetadas em uma escala de montagem.  Para muitos usuários, esse estado de coisas será adequado, especialmente no caso de criação de desenhos dimensionais e desenhos gerais. <br><br><div class="spoiler">  <b class="spoiler_title">Leia mais sobre a opção Projeção aproximada.</b> <div class="spoiler_text"><blockquote>  A opção está disponível apenas para projeções padrão.  Para especificar imagens (seções, seções, vistas remotas) "Projeção aproximada" não está envolvida. </blockquote><br></div></div><br>  Mesmo sem usar esta opção, a projeção é visivelmente mais rápida em comparação com a V16 e v17.  Isso foi ajudado por melhorias do lado do núcleo matemático. <br><br>  <i>Tabela 5. Hora de criar três projeções padrão em segundos.</i>  <i>Menos é melhor.</i> <br><table><tbody><tr><td rowspan="2">  Modelo </td><td colspan="4">  Hora de criar três projeções padrão, s </td></tr><tr><td>  V16.1 </td><td>  v17.1 </td><td>  v18 <br>  Incluído <br>  rascunho <br>  projeção </td><td>  v18 <br>  Desligado <br>  rascunho <br>  projeção </td></tr><tr><td><img src="https://habrastorage.org/webt/s2/mg/lv/s2mglv84fvskfbb_x-qxojpdx4o.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instalação</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vácuo tecnológico</a> </td><td>  124,1 </td><td>  47,5 </td><td>  <b>12,9</b> </td><td>  34,6 </td></tr><tr><td><img src="https://habrastorage.org/webt/uj/vz/m2/ujvzm20hrhc5-r5ohmqnmeea7kw.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Redutor de navio</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usina</a> </td><td>  256 </td><td>  410 </td><td>  <b>38,4</b> </td><td>  54,4 </td></tr><tr><td><img src="https://habrastorage.org/webt/bi/nn/nl/binnnlusnbewy71vya0vorxubpg.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Multiuso</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">unificado</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">corpo da caixa</a> </td><td>  99,9 </td><td>  123,4 </td><td>  <b>44,9</b> </td><td>  53,5 </td></tr></tbody></table><br><br>  Também na v18, foi implementada a possibilidade de reconstruir espécies associativas individuais. <br><br>  Em um desenho que contém muitas vistas associativas, o usuário tem a oportunidade de reconstruir vistas irrelevantes individuais.  Por exemplo, aquele ao qual ele deseja adicionar anotações.  Você também pode especificar as vistas criadas com a opção Projeção aproximada ativada. <br><br><div class="spoiler">  <b class="spoiler_title">Reconstruir uma única visualização</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/og/nk/em/ognkemiqn2re1hneq0cbw4rcjgy.png"><br></div></div><br>  Esse recurso não se aplica a acelerações explícitas, mas permite que o usuário economize tempo. <br><br>  O resultado do trabalho realizado para acelerar a projeção do modelo de instalação tecnológica a vácuo no desenho: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/P2kloyNOedE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">próxima parte,</a> descreveremos como aceleramos o cálculo das características de centralização em massa (MTC), sobre a contribuição do núcleo geométrico do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">c3dlabs</a> para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">desempenho do</a> COMPAS-3D, alterações no C3D Modeler e também sobre qual hardware é adequado para a v18.</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447516/">https://habr.com/ru/post/pt447516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447502/index.html">Como criar um currículo para empresas de TI estrangeiras</a></li>
<li><a href="../pt447508/index.html">Sergey Zonov: “Fiz o primeiro Spectrum porque estava interessado”</a></li>
<li><a href="../pt447510/index.html">GeekUniversity abre inscrição no Departamento de Design</a></li>
<li><a href="../pt447512/index.html">E quem fez isso? Automatize a auditoria de segurança da informação</a></li>
<li><a href="../pt447514/index.html">7 startups interessantes na IoT</a></li>
<li><a href="../pt447520/index.html">Recursos de classificação automática por níveis no armazenamento Qsan XCubeSAN</a></li>
<li><a href="../pt447522/index.html">Que coisas úteis podem ser extraídas dos logs de uma estação de trabalho baseada no Windows</a></li>
<li><a href="../pt447526/index.html">Bicicleta própria para sincronizar MariaDB e Sphinx</a></li>
<li><a href="../pt447528/index.html">Quem é responsável pela qualidade?</a></li>
<li><a href="../pt447530/index.html">OceanLotus: atualização de Malvari para macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>