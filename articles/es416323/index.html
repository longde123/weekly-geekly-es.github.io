<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>  锔 La opci贸n de acceso aleatorio a las configuraciones y grabaciones del registrador de autom贸viles desde cualquier lugar en Internet   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los DVR para autom贸viles han sido uno de los atributos obligatorios para cualquier automovilista. Personalmente, puedo concluir sin exagerar que no pu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La opci贸n de acceso aleatorio a las configuraciones y grabaciones del registrador de autom贸viles desde cualquier lugar en Internet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416323/">  Los DVR para autom贸viles han sido uno de los atributos obligatorios para cualquier automovilista.  Personalmente, puedo concluir sin exagerar que no puedo sentirme seguro detr谩s del volante sin un dispositivo tan simple.  Por supuesto, en los 煤ltimos 10 a帽os, el progreso ha logrado un progreso significativo: hoy ya hay bastantes fabricantes en el mercado que producen modelos decentes, y nosotros, los conductores, ya tenemos mucho para elegir. <br><br>  Mi elecci贸n recay贸 en el registrador Neoline G-Tech X53, y hubo varias razones para esto: <br><br><ul><li>  Est谩 equipado con dos c谩maras, una de las cuales ofrece una imagen FullHD real, </li><li>  Est谩 dise帽ado espec铆ficamente para instalaci贸n encubierta, </li><li>  est谩 totalmente controlado a trav茅s de WiFi a trav茅s de la aplicaci贸n en el tel茅fono inteligente, lo cual es importante en el contexto de este art铆culo, y entre otras cosas, hace posible la instalaci贸n realmente encubierta sin la necesidad de subir o quitar el bloque peri贸dicamente (por ejemplo, copiar un registro de una unidad flash USB). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h8/33/zt/h833ztw2p-hqt3krlhf7jnhekac.png"></div><br>  Luego, como suele suceder, el apetito vino con la comida.  Despu茅s de instalar la grabadora en el autom贸vil, apreci茅 su conveniencia, prob茅 y quer铆a tener acceso a sus registros no solo cerca de la m谩quina, donde se capta su se帽al WiFi, sino en <b>general en todas partes</b> .  Bueno, o al menos en casa, para empezar. <br><br>  Por supuesto, en la naturaleza, hay modelos de registradores que combinan registros en la nube a pedido, pero vinculan al usuario a esta nube y los obligan a pagar por ella, pero esta no es mi opci贸n.  Adem谩s, mi lista de deseos se superpuso bien con los planes de instalar un enrutador WiFi con m贸dem en el autom贸vil, por lo que la tarea parec铆a bastante factible. <br><a name="habracut"></a><br>  Es cierto que r谩pidamente se hizo evidente que el registrador no tiene una API documentada y que solo se puede acceder a ella utilizando la aplicaci贸n nativa para un tel茅fono inteligente.  La aplicaci贸n, a su vez, result贸 ser muy caprichosa: funciona solo cuando el tel茅fono est谩 conectado al registrador WiFi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/yt/_3/mryt_3qkaoesppgkbdgl3ts8m88.png"></div><br>  Es decir, ten铆a que entender lo que la aplicaci贸n quer铆a de WiFi y hacer que "viera" al registrador, ubicado en un lugar completamente diferente, con la soluci贸n a todos los problemas t茅cnicos relacionados; en general, as铆 es como me encanta. <br><br>  Como un enrutador que distribuye Internet a trav茅s de WiFi en el autom贸vil, utilic茅 Mikrotik RBmAP2nD (mAP) con un m贸dem Huawei e3372h (si conoce otras opciones de presupuesto en las que puede implementar las configuraciones que se describen a continuaci贸n, escriba en los comentarios).  Como el registrador solo puede distribuir su WiFi y no puede conectarse a un AP existente, tuve que configurar el AP-Client, que deber铆a conectarse a 茅l.  Y r谩pidamente se hizo evidente que el trabajo de Mikrotik como AP y Cliente AP (en la interfaz esclava) conduce a una distribuci贸n inestable de WiFi, por lo que se decidi贸 emparejar con el enrutador principal otro: Mikrotik RBmAPL-2nD (mAP lite). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/ol/xj/3wolxjn7mc3dbuxbnpnwrqf73zi.jpeg"></div><br><h3>  Aplicaci贸n de trucos </h3><br>  Para comenzar, hice que la aplicaci贸n funcionara con el registrador a trav茅s de una red WiFi completamente diferente que funciona en la misma m谩quina.  En el camino, logr茅 responder las preguntas: c贸mo la aplicaci贸n reconoce la red del registrador y c贸mo enga帽arla.  Adem谩s, en el camino, fue posible lograr una conveniencia a煤n mayor: ahora para trabajar con el registrador en el autom贸vil, no necesita cambiar a su WiFi, en el que no hay Internet. <br><br>  No describir茅 en detalle docenas de experimentos durante los cuales llegu茅 a una soluci贸n de trabajo, solo describo esta soluci贸n.  Entonces, qu茅 se necesita para que la aplicaci贸n reconozca el registrador WiFi: <br><br><ol><li>  El SSID deber铆a verse como " <i>G-Tech X5X-120 ...</i> ", donde en lugar de los 煤ltimos puntos hay d铆gitos arbitrarios (letras peque帽as) en el sistema de n煤meros hexadecimales.  Por ejemplo, instal茅 " <i>G-Tech X5X-120aaa</i> " y as铆 sucesivamente.  Quiz谩s, en lugar de "120" tambi茅n puede poner algo propio, no lo he probado. </li><li>  La direcci贸n del cliente debe obtenerse a trav茅s de DHCP, debe estar en la subred 192.168.100.0/24, la direcci贸n del servidor (registrador) = 192.168.100.1. </li></ol><br>  El resto no es importante.  No he probado muchas otras cosas, pero estoy seguro de que: <br><br><ol><li>  La direcci贸n MAC del AP y el servidor no importan. </li><li>  Si hay secciones con una MTU reducida (por ejemplo, t煤neles) a lo largo de la ruta de tr谩fico, la conexi贸n funciona bien. </li><li>  La ventana TCP es lo suficientemente amplia como para que la descarga de registros no disminuya en pings, incluso a 300 ms o m谩s. </li></ol><br>  Entonces, 驴cu谩l es el resultado final? <br><br><ul><li>  La aplicaci贸n quiere tener una direcci贸n en la red 192.168.100.0/24 y conectarse a la direcci贸n 192.168.100.1. </li><li>  La direcci贸n del registrador tambi茅n es 192.168.100.1 y quiere que el cliente est茅 en la red 192.168.100.0/24 (simplemente no tiene rutas a otros). </li></ul><br>  Esto no es para cambiar, pero queremos aprender c贸mo distribuir la aplicaci贸n y el registrador.  Por lo tanto, debe asignar la direcci贸n 192.168.100.1 al enrutador que distribuye WiFi, y para resolver los problemas con el enrutamiento del tr谩fico, debe ingresar a una subred de conexi贸n y agregar algo de magia de red.  Por ejemplo, as铆: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-4/tn/z4/-4tnz4vvp_c9z71-t13dh357x9s.png"></div><br>  Descripci贸n: <br><br><ul><li>  La aplicaci贸n se ejecuta en un tel茅fono inteligente que est谩 conectado al enrutador R1.  El tel茅fono inteligente recibe la direcci贸n a trav茅s de DHCP, en nuestro ejemplo es 192.168.100.100. </li><li>  La direcci贸n IP de R1 en la interfaz WiFi es 192.168.100.1 (como lo desea la aplicaci贸n), en la interfaz Ethernet es 192.168.99.1 (esta es una subred de acoplamiento). </li><li>  La direcci贸n IP R2 en la interfaz Ethernet es 192.168.99.2, en la interfaz WiFi se obtiene a trav茅s de DHCP del registrador, en nuestro ejemplo es 192.168.100.150. </li><li>  Cada enrutador realiza DNAT en la entrada y SNAT en la salida, por lo que los paquetes en cada subred tienen direcciones de origen y destino que coinciden con las direcciones de los enrutadores de borde de esta red. </li></ul><br>  驴C贸mo es la conexi贸n? <br><br><ol><li>  La aplicaci贸n se asegura de que est茅 conectada al WiFi del registrador e inicia una conexi贸n con la direcci贸n 192.168.100.1, suponiendo que esta sea la direcci贸n del registrador. </li><li>  R1 acepta la solicitud de conexi贸n, ejecut谩ndose en la interfaz DNAT entrante con la sustituci贸n de la direcci贸n de destino a 192.168.99.2, y en la interfaz saliente - SNAT con la sustituci贸n de la direcci贸n de origen a 192.168.99.1. </li><li>  R2 acepta la solicitud de conexi贸n, ejecut谩ndose en la interfaz DNAT entrante con la sustituci贸n de la direcci贸n de destino a 192.168.100.1, y en la interfaz saliente - enmascarado con la sustituci贸n de la direcci贸n de origen a la direcci贸n recibida a trav茅s de DHCP del registrador. </li><li>  El registrador acepta y procesa la solicitud de conexi贸n que proviene de la direcci贸n que emiti贸 previamente a trav茅s de DHCP.  Lo cual fue requerido. </li></ol><br>  Un lector reflexivo ya tiene una pregunta: 驴para qu茅 tipo de tr谩fico redirijo?  Comenzando con "todo el tr谩fico excepto ssh" y activando el registro, me di cuenta de que era <b>suficiente para redirigir los puertos TCP 7777, 7778 y 7779</b> .  La aplicaci贸n no necesita nada m谩s para trabajar con el registrador. <br><br><h3>  Pasamos el tr谩fico a trav茅s de Internet. </h3><br>  Al aprender a enga帽ar a la aplicaci贸n, elimin茅 el obst谩culo m谩s dif铆cil para el objetivo principal: organizar el acceso a los registros desde cualquier lugar en Internet.  Pero para que la aplicaci贸n que se ejecuta en el tel茅fono en este "cualquier punto" pueda conectarse al registrador, para "enga帽ar" es necesario cumplir con todas las condiciones anteriores, y esto impone algunas restricciones.  Sin embargo, en una direcci贸n, los registros son necesarios especialmente a menudo: est谩n en casa.  Aqu铆 comenzamos con un enrutador dom茅stico. <br><br>  En casa, como ya habr谩s adivinado, tambi茅n tengo Mikrotik.  El enrutador externo tiene una direcci贸n IP "blanca", y la utilic茅 para crear un t煤nel L2TP entre el enrutador del autom贸vil y el hogar y organizar otra subred de acoplamiento entre ellos.  Se ha agregado otro enrutador al circuito que describ铆 anteriormente, y ahora parece simplificado as铆: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ji/mu/zb/jimuzbzw8kdjeetkljvp3aqt-bu.png"></div><br>  Descripci贸n: <br><br><ul><li>  La aplicaci贸n se ejecuta en un tel茅fono inteligente que est谩 conectado al enrutador dom茅stico R0.  El tel茅fono inteligente recibe la direcci贸n a trav茅s de DHCP, en nuestro ejemplo es 192.168.100.100. </li><li>  La direcci贸n IP de R0 en la interfaz WiFi es 192.168.100.1 (como lo desea la aplicaci贸n), en la interfaz L2TP es 192.168.98.1 (subred de acoplamiento 0). </li><li>  La direcci贸n IP R1 en la interfaz L2TP es 192.168.98.2, en la interfaz Ethernet es 192.168.99.1 (subred de conexi贸n 1). </li><li>  La direcci贸n IP R2 en la interfaz Ethernet es 192.168.99.2, en la interfaz WiFi se obtiene a trav茅s de DHCP del registrador, en nuestro ejemplo es 192.168.100.150. </li><li>  Cada enrutador realiza DNAT en la entrada y SNAT en la salida, por lo que los paquetes en cada subred tienen direcciones de origen y destino que coinciden con las direcciones de los enrutadores de borde de esta red. </li></ul><br>  驴C贸mo es la conexi贸n? <br><br><ol><li>  La aplicaci贸n se asegura de que est茅 conectada al WiFi del registrador e inicia una conexi贸n con la direcci贸n 192.168.100.1, suponiendo que esta sea la direcci贸n del registrador. </li><li>  R0 acepta la solicitud de conexi贸n, ejecut谩ndose en la interfaz DNAT entrante con la sustituci贸n de la direcci贸n de destino a 192.168.98.2, y en la interfaz saliente - SNAT con la sustituci贸n de la direcci贸n de origen a 192.168.98.1. </li><li>  R1 acepta la solicitud de conexi贸n, ejecut谩ndose en la interfaz DNAT entrante con la sustituci贸n de la direcci贸n de destino a 192.168.99.2, y en la interfaz saliente - SNAT con la sustituci贸n de la direcci贸n de origen a 192.168.99.1. </li><li>  R2 acepta la solicitud de conexi贸n, ejecut谩ndose en la interfaz DNAT entrante con la sustituci贸n de la direcci贸n de destino a 192.168.100.1, y en la interfaz saliente - enmascarado con la sustituci贸n de la direcci贸n de origen a la direcci贸n recibida a trav茅s de DHCP del registrador. </li><li>  El registrador acepta y procesa la solicitud de conexi贸n que proviene de la direcci贸n que emiti贸 previamente a trav茅s de DHCP.  Lo cual fue requerido. </li></ol><br><div class="spoiler">  <b class="spoiler_title">PS.</b> <div class="spoiler_text">  Con el punto 2, puede hacerlo un poco m谩s f谩cil si realiza DNAT inmediatamente en la subred n煤mero 99, en lugar de la 98, y agrega la ruta a la subred n煤mero 99 a trav茅s de R1.  Pero acabo de describir la idea general y un ejemplo de su implementaci贸n, y hay muchas formas de integrar todo esto en una red existente. <br></div></div><br><h3>  驴De d贸nde obtenemos comida? </h3><br>  Los enrutadores y un m贸dem consumen un poco, pero lo suficiente como para agotar la bater铆a del autom贸vil a cero en 3-4 d铆as.  Por lo tanto, es mejor incluirlos a pedido.  Y para encajar en el concepto de "acceso en cualquier momento", aprovech茅 el hecho de que la alarma Starline A96 instalada en mi autom贸vil tiene, entre otras cosas, un m贸dulo GSM, program贸 la inclusi贸n de un canal adicional a pedido desde un control remoto o una aplicaci贸n de tel茅fono inteligente y encendi贸 el enrutador mAP desde un canal adicional, y mAP lite - a trav茅s de PoE desde el principio.  No voy a hablar de esto en detalle aqu铆, todo esto es f谩cilmente google, pero si est谩 interesado, escriba los comentarios. <br><br><h3>  Resumen </h3><br>  Despu茅s de hacer todo esto, tuve la oportunidad no solo de copiar los registros de la grabadora mientras estaba sentado en casa, sino tambi茅n de ver im谩genes de c谩maras en tiempo real.  Y todo esto, independientemente de d贸nde se encuentre el autom贸vil, lo principal es que su enrutador tiene una conexi贸n a Internet.  驴No es eso perfecto? <br><br>  Y con un bono agradable, obtuve una mayor velocidad de copia de videos que estar sentado en el autom贸vil: 1.2-1.5 mb / s versus 1 mb / s.  No se porque. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yi/ro/js/yirojsw0zniqglhireevkolxiuk.png"></div><br><h3>  驴Habr谩 configuraciones? </h3><br>  Honestamente, no creo que se le ocurra a nadie hacer exactamente lo que se describe.  En cualquier caso, habr谩 alguna adaptaci贸n de la soluci贸n a lo que ya est谩 disponible.  Pero si realmente lo necesita, a continuaci贸n encontrar谩 las reglas nat, en las que se implementa el 99% de todo lo que se discuti贸 anteriormente. <br><br><div class="spoiler">  <b class="spoiler_title">R0</b> <div class="spoiler_text"><pre><code class="hljs sql">/ip firewall nat add action=src-nat chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> src-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R1</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=masquerade chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether2 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R2</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=dst-nat chain=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416323/">https://habr.com/ru/post/es416323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416309/index.html">C贸mo usar archivos HDF5 en Python</a></li>
<li><a href="../es416313/index.html">Lista de verificaci贸n de an谩lisis de registro de eventos de seguridad</a></li>
<li><a href="../es416315/index.html">ASP.NET Razor: Resolviendo algunos problemas de arquitectura para el modelo de vista</a></li>
<li><a href="../es416319/index.html">Antecedentes: listas blancas de IMEI y Rossvyaz</a></li>
<li><a href="../es416321/index.html">C贸mo convertirse en orador de conferencias internacionales de TI</a></li>
<li><a href="../es416327/index.html">El nuevo est谩ndar 802.11ax (WLAN de alta eficiencia), 驴qu茅 hay de nuevo en 茅l y cu谩ndo esperarlo?</a></li>
<li><a href="../es416329/index.html">El regreso de la estaci贸n interplanetaria sovi茅tica. Previsi贸n preliminar</a></li>
<li><a href="../es416331/index.html">La historia de refactorizar la aplicaci贸n Citimobil</a></li>
<li><a href="../es416333/index.html">Nueva ola: por qu茅 la refrigeraci贸n por agua en el centro de datos est谩 ganando popularidad</a></li>
<li><a href="../es416335/index.html">Una peque帽a rese帽a de QCon 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>