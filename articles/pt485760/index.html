<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì üß† üêú Extens√µes em Kotlin. Atavismo perigoso ou uma ferramenta √∫til? ‚ù§Ô∏è üéá üê¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kotlin ainda √© um idioma jovem, mas j√° entrou em nossas vidas. Por isso, nem sempre √© claro como implementar corretamente esse ou aquele funcional e q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extens√µes em Kotlin. Atavismo perigoso ou uma ferramenta √∫til?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/485760/"><img src="https://habrastorage.org/webt/kz/wk/5d/kzwk5d50usqqdehsvqpkpzmkogg.jpeg"><br><br>  Kotlin ainda √© um idioma jovem, mas j√° entrou em nossas vidas.  Por isso, nem sempre √© claro como implementar corretamente esse ou aquele funcional e qual a melhor pr√°tica a ser aplicada. <br><br>  Particularmente dif√≠cil √© o caso dos recursos da linguagem, que n√£o est√£o em Java.  Um desses obst√°culos foi a <a href="https://kotlinlang.org/docs/reference/extensions.html">expans√£o</a> . <br><br>  Essa √© uma ferramenta conveniente que torna o c√≥digo mais leg√≠vel, exigindo quase nada em troca.  Mas, ao mesmo tempo, conhe√ßo pelo menos uma pessoa que, se ele n√£o considera a expans√£o como m√°, √© definitivamente c√©tica em rela√ß√£o a elas.  Abaixo, gostaria de discutir as caracter√≠sticas desse mecanismo, que podem causar controv√©rsia e mal-entendidos. <br><a name="habracut"></a><br><h3>  Extens√µes para DTO - viola√ß√£o do modelo de objeto de transfer√™ncia de dados </h3><br>  Por exemplo, h√° uma classe User <br><br><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> age: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sex: String)</code> </pre> <br>  Bastante um DTO!  Al√©m disso, no c√≥digo em v√°rios locais, √© necess√°ria uma verifica√ß√£o para determinar se o usu√°rio √© adulto.  A op√ß√£o mais f√°cil √© fazer uma condi√ß√£o em todos os lugares <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (user.age &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span>) { ... }</code> </pre><br>  Mas, como podem existir arbitrariamente muitos desses lugares, faz sentido colocar essa verifica√ß√£o no m√©todo. <br>  Existem tr√™s op√ß√µes aqui: <br><br><ol><li>  Fun√ß√£o divertida isAdult (usu√°rio: Usu√°rio) - as classes de utilit√°rio geralmente consistem nessas fun√ß√µes. <br></li><li>  Coloque a fun√ß√£o isAdult dentro da classe User <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> age: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sex: String) { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = age &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span> }</code> </pre><br></li><li>  Escreva um inv√≥lucro para o usu√°rio que conter√° fun√ß√µes semelhantes. <br></li></ol><br>  Todas as tr√™s op√ß√µes t√™m tecnicamente direito √† vida.  Mas o primeiro adiciona inconveni√™ncia na forma da necessidade de conhecer todas as fun√ß√µes de utilidade, embora isso, obviamente, n√£o seja um grande problema. <br>  A segunda op√ß√£o parece violar o padr√£o Objeto de Transfer√™ncia de Dados, uma vez que a classe n√£o √© apenas getters e setters.  Mas quebrar padr√µes √© ruim. <br><br>  A terceira op√ß√£o n√£o viola os princ√≠pios de OOP ou modelos, mas sempre que voc√™ precisar criar um wrapper, se desejar usar fun√ß√µes semelhantes.  Esta op√ß√£o tamb√©m n√£o √© muito parecida.  No final, acontece que voc√™ ainda precisa fazer sacrif√≠cios. <br><br>  Na minha opini√£o, √© mais f√°cil sacrificar um modelo de DTO.  Em primeiro lugar, n√£o encontrei uma √∫nica explica√ß√£o de por que fun√ß√µes (exceto getters e setters) n√£o podem ser feitas no DTO.  E, em segundo lugar, apenas em termos de significado, √© conveniente ter esse c√≥digo pr√≥ximo aos dados em que estamos operando. <br><br>  Mas nem sempre √© poss√≠vel inserir esse c√≥digo no shek do DTO, pois o desenvolvedor nem sempre tem a capacidade de editar as classes com as quais trabalha.  Por exemplo, essas podem ser classes geradas a partir do xsd.  Al√©m disso, para algu√©m, pode ser incomum e desconfort√°vel escrever esse c√≥digo nas classes Data.  Kotlin oferece uma solu√ß√£o para tais situa√ß√µes na forma de fun√ß√µes e campos de extens√£o: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> User.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = age &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span></code> </pre><br>  Este c√≥digo pode ser usado como se fosse declarado dentro da classe User: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(user.isAdult()) {...}</code> </pre><br>  O resultado √© uma solu√ß√£o bastante precisa que, com o m√≠nimo compromisso, satisfaz nossas necessidades.  Se falarmos sobre o fato de o modelo DTO ser violado, queremos lembrar que em Java ser√° um m√©todo est√°tico regular do formul√°rio: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NotNull User receiver)</span></span></span></span></code> </pre><br>  Como voc√™ pode ver, formalmente, mesmo o modelo n√£o √© violado.  O uso dessa fun√ß√£o parece ter sido declarado em Usu√°rio e o Idea oferecer√° isso no preenchimento autom√°tico.  √â muito conveniente <br><br><h3>  As extens√µes s√£o espec√≠ficas.  Voc√™ n√£o pode saber sobre a exist√™ncia deles e confundir m√©todos e campos da entidade com extens√µes </h3><br>  A id√©ia √© que o desenvolvedor veio ao projeto e, em torno do c√≥digo implementado nas extens√µes, n√£o est√° claro qual m√©todo √© original e qual √© o m√©todo de extens√£o. <br><br>  Isso n√£o √© um problema, pois o Idea ajuda o desenvolvedor nesse assunto e destaca essas fun√ß√µes.  Embora com justi√ßa, √© preciso dizer que a diferen√ßa √© mais percept√≠vel no tema Darcula.  Se voc√™ mudar para Light, tudo ficar√° menos √≥bvio e a extens√£o ser√° diferente apenas em fonte it√°lica. <br><br>  Abaixo, vemos um exemplo de chamada de dois m√©todos: isAdult √© o m√©todo de extens√£o, isMale √© o m√©todo usual dentro da classe User.  A captura de tela √† esquerda √© o tema Darcula, √† direita √© o tema Light usual. <br><br><img src="https://habrastorage.org/webt/qr/yx/j2/qryxj2ld3i7pyphvqsqd05njozi.png"><img src="https://habrastorage.org/webt/ik/ro/ed/ikroeddsainpwwaevfjjounzeva.png"><br><br>  As coisas um pouco piores s√£o com os campos.  Se, por exemplo, decidirmos implementar o isAdult como um campo de extens√£o, apenas poderemos diferenci√°-lo de um campo regular por tipo de fonte.  Neste exemplo, nome √© um campo regular.  Um campo de extens√£o produz apenas fonte em it√°lico. <br><br><img src="https://habrastorage.org/webt/bt/w1/ej/btw1ejdtlclzohkqlucw8pfpihq.png"><img src="https://habrastorage.org/webt/bz/ok/ux/bzokuxqd_-bykhju0gylzq-g2wq.png"><br><br>  O ambiente de desenvolvimento do Idea ajuda a determinar qual m√©todo √© uma extens√£o e qual √© o original ao preencher automaticamente.  Isso √© conveniente. <br><br><img src="https://habrastorage.org/webt/7v/be/oe/7vbeoe1s9093-wjgwv5piavux1w.png"><br><br>  A situa√ß√£o √© semelhante com os campos. <br><br><img src="https://habrastorage.org/webt/za/0q/jk/za0qjkyxmk94k8khz0atanwusgo.png"><br><br>  "Para usu√°rio em &lt;raiz&gt;" significa que √© uma extens√£o. <br><br>  Al√©m disso, o pr√≥prio fato de o Idea "vincular" uma extens√£o a uma entidade extens√≠vel ajuda muito no desenvolvimento, pois m√©todos e campos de extens√£o s√£o propostos para o preenchimento autom√°tico. <br><br><h3>  As extens√µes est√£o espalhadas por todo o projeto, formando uma lata de lixo </h3><br>  N√£o temos esse problema em projetos, pois n√£o colocamos extens√µes arbitrariamente e usamos c√≥digos com extens√µes p√∫blicas em arquivos ou pacotes separados. <br><br>  Por exemplo, a fun√ß√£o isAdult do exemplo acima pode aparecer no arquivo de usu√°rio do pacote de extens√µes.  Se o pacote n√£o for suficiente e voc√™ apenas desejar n√£o confundir onde est√° a classe e onde est√° o arquivo de fun√ß√£o, voc√™ pode nomear, por exemplo, _User.kt.  O mesmo fizeram os desenvolvedores do JetBrains para cole√ß√µes.  Ou, se a consci√™ncia proibir o in√≠cio do arquivo com um sublinhado, voc√™ poder√° ligar para user.kt.  De fato, n√£o h√° diferen√ßa de qual maneira usar, o principal √© que h√° uniformidade a que toda a equipe adere. <br><br>  Os criadores do idioma, ao desenvolver m√©todos de extens√£o para cole√ß√µes, os colocaram no arquivo <a href="">_Collections.kt</a> . <br><br>  Geralmente, √© uma quest√£o de organizar o c√≥digo, n√£o um problema de extens√µes.  As fun√ß√µes est√°ticas em Java, e n√£o apenas as est√°ticas, podem ser espalhadas n√£o menos aleatoriamente que as extens√µes. <br><br><h3>  N√£o ignore as fun√ß√µes de extens√£o durante o teste da unidade </h3><br>  Na minha opini√£o, n√£o h√° necessidade de molhar fun√ß√µes de extens√µes, assim como n√£o h√° necessidade de molhar m√©todos est√°ticos.  Na fun√ß√£o de expans√£o, voc√™ deve colocar a l√≥gica de trabalhar com dados existentes.  Por exemplo, no caso da fun√ß√£o isAdult da classe User, tudo o que voc√™ precisa est√° em isAdult.  Voc√™ n√£o precisa se molhar. <br><br>  Considere um exemplo um pouco mais complexo.  H√° um certo componente que serve para obter usu√°rios de um sistema externo - UserComponent.  O m√©todo para obter usu√°rios √© chamado getUsers.  Suponha que houvesse a necessidade de obter todos os usu√°rios ativos e decidisse adicionar a l√≥gica de filtragem na forma de uma fun√ß√£o - uma extens√£o.  Como resultado, obtivemos a fun√ß√£o: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> UserComponent.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getActiveUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Users&gt; = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers().filter{it.status == ‚ÄúActive‚Äù}</code> </pre><br>  Pode parecer que aqui est√° - uma situa√ß√£o em que voc√™ precisa de uma simula√ß√£o para expans√£o.  Mas se voc√™ se lembrar de que getActiveUsers √© apenas um m√©todo est√°tico, verifica-se que a simula√ß√£o n√£o √© necess√°ria.  Dip deve ser os m√©todos e fun√ß√µes chamados na extens√£o e nada mais. <br><br><h3>  √â poss√≠vel que a fun√ß√£o de extens√£o se sobreponha √† fun√ß√£o de mesmo nome localizada dentro da classe estendida </h3><br>  Vamos considerar esse caso usando o exemplo do primeiro par√°grafo.  Suponha que exista uma extens√£o de fun√ß√£o isAdult, que verifique se o usu√°rio √© adulto: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> User.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = age &gt;= <span class="hljs-number"><span class="hljs-number">18</span></span></code> </pre><br>  Depois disso, implementamos a fun√ß√£o com o mesmo nome dentro de User: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> age: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sex: String){ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = age &gt;= <span class="hljs-number"><span class="hljs-number">21</span></span> }</code> </pre><br>  Quando user.isAdult () √© chamado, uma fun√ß√£o da classe ser√° chamada, apesar do fato de haver uma extens√£o com o mesmo nome e uma fun√ß√£o adequada.  Esse caso pode ser confuso, pois os usu√°rios que n√£o est√£o cientes da fun√ß√£o declarada dentro da classe aguardam a conclus√£o da fun√ß√£o de extens√£o.  Esta √© uma situa√ß√£o desagrad√°vel que pode ter consequ√™ncias extremamente graves.  Nesse caso, n√£o estamos falando sobre o poss√≠vel inconveniente de uma revis√£o ou viola√ß√£o de modelo, mas sobre o comportamento potencialmente incorreto do c√≥digo. <br><br>  A situa√ß√£o descrita acima mostra que, ao usar as fun√ß√µes de extens√£o, podem surgir problemas reais. <br><br>  Para evit√°-las, n√£o se esque√ßa de cobrir o m√°ximo poss√≠vel as fun√ß√µes de expans√£o com testes de unidade.  Na pior das hip√≥teses, se os testes falharem, haver√° duas fun√ß√µes que funcionam da mesma maneira.  Um √© uma extens√£o e o outro est√° na pr√≥pria classe.  Se os testes falharem, chamar√° a aten√ß√£o para o fato de que uma fun√ß√£o se sobrep√µe a outra. <br><br><h3>  A extens√£o est√° ligada a uma classe, n√£o a um objeto, e isso pode causar confus√£o </h3><br>  Por exemplo, considere a classe Usu√°rio do primeiro par√°grafo.  Vamos abrir e criar seu sucessor Student: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Student</span></span></span></span>(name: String, age: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, sex: String): User(name, age, sex)</code> </pre><br>  Definimos a fun√ß√£o de extens√£o para o Aluno, que tamb√©m determinar√° se o aluno √© adulto ou n√£o.  Somente para o aluno alteramos a condi√ß√£o: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Student.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAdult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age &gt;= <span class="hljs-number"><span class="hljs-number">16</span></span></code> </pre><br>  E agora escrevemos o seguinte c√≥digo: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> user: User = Student(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"M"</span></span>)</code> </pre><br>  O que retornar√° user.isAdult ())? <br>  Parece que um objeto do tipo Student e a fun√ß√£o devem retornar true.  Mas n√£o √© t√£o simples.  As extens√µes s√£o anexadas √† classe, n√£o ao objeto, e o resultado ser√° falso. <br><br>  N√£o h√° nada de estranho nisso, se lembrarmos que extens√µes s√£o m√©todos est√°ticos e uma entidade extens√≠vel √© o primeiro par√¢metro nesse m√©todo.  Esse √© outro ponto a ser lembrado ao usar esse mecanismo.  Caso contr√°rio, voc√™ pode obter um efeito desagrad√°vel e inesperado. <br><br><h3>  Em vez de sa√≠da </h3><br>  Esses pontos controversos n√£o parecem perigosos, se voc√™ se lembrar do que dizemos extens√£o - queremos dizer um m√©todo est√°tico.  Al√©m disso, cobrir essa funcionalidade com testes de unidade ajudar√° a minimizar poss√≠veis confus√µes associadas √† natureza est√°tica das extens√µes. <br><br>  Na minha opini√£o, as extens√µes s√£o uma ferramenta poderosa e conveniente que pode melhorar a qualidade e a legibilidade do c√≥digo, exigindo quase nada em troca.  √â por isso que eu os amo: <br><br><ul><li>  As extens√µes permitem escrever l√≥gica espec√≠fica para o contexto de uma classe extens√≠vel.  Gra√ßas a isso, os campos e m√©todos de extens√£o s√£o lidos como se estivessem sempre presentes na entidade estendida, o que, por sua vez, melhora o entendimento de n√≠vel superior do c√≥digo.  Em Java, infelizmente, isso n√£o pode ser feito.  Al√©m disso, as extens√µes t√™m os mesmos modificadores de acesso que as fun√ß√µes regulares.  Isso permite que voc√™ escreva c√≥digos semelhantes com o escopo realmente necess√°rio para uma fun√ß√£o espec√≠fica. <br></li><li>  √â conveniente usar as fun√ß√µes de extens√£o para mapeamento, que voc√™ precisa ver bastante ao resolver tarefas di√°rias.  Por exemplo, no projeto, existe uma classe UserFromExternalSystem, que √© usada ao chamar um sistema externo, e seria √≥timo colocar o mapeamento na fun√ß√£o de extens√£o, esquec√™-lo e us√°-lo como se estivesse originalmente em Usu√°rio. <br><br><pre> <code class="kotlin hljs">callExternalSystem(user.getUserFromExternalSystem())</code> </pre><br>  Obviamente, o mesmo pode ser feito pelo m√©todo usual, mas essa op√ß√£o √© menos leg√≠vel: <br><br><pre> <code class="kotlin hljs">callExternalSystem(getUserFromExternalSystem(user))</code> </pre><br>  ou essa op√ß√£o: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> externalUser = getUserFromExternalSystem(user) callExternalSystem(externalUser)</code> </pre><br>  De fato, nenhuma m√°gica acontece, mas gra√ßas a essas ninharias √© mais agrad√°vel trabalhar com o c√≥digo. <br></li><li>  Suporte a ideia e conclus√£o autom√°tica.  Diferentemente dos m√©todos das classes de utilit√°rio, as extens√µes s√£o bem suportadas pelo ambiente de desenvolvimento.  Com o preenchimento autom√°tico, as extens√µes s√£o oferecidas pelo ambiente como fun√ß√µes e campos "nativos".  Isso permite um bom aumento na produtividade do desenvolvedor. <br></li><li>  A favor das extens√µes est√° o fato de uma grande parte das bibliotecas Kotlin ser escrita como extens√µes.  Muitos m√©todos convenientes e favoritos para trabalhar com cole√ß√µes s√£o extens√µes (filtro, mapa e assim por diante).  Voc√™ pode verificar isso examinando o arquivo <a href="">_Collections.kt</a> . <br></li></ul><br>  As vantagens das extens√µes cobrem poss√≠veis desvantagens.  Obviamente, existe um grande risco de uso indevido desse mecanismo e a tenta√ß√£o de colocar todo o c√≥digo em extens√µes.  Mas aqui a quest√£o √© mais sobre a organiza√ß√£o do c√≥digo e o uso competente da ferramenta.  Quando usadas corretamente, as extens√µes se tornar√£o um verdadeiro amigo e ajudante ao escrever c√≥digos bem lidos e mantidos. <br><br>  Abaixo est√£o os links para os materiais que foram usados ‚Äã‚Äãpara preparar este artigo: <br><br><ol><li>  <a href="https://proandroiddev.com/kotlin-extension-functions-more-than-sugar-1f04ca7189ff">proandroiddev.com/kotlin-extension-functions-more-than-sugar-1f04ca7189ff</a> - a partir daqui, consideramos interessantes o fato de que, usando extens√µes, trabalhamos mais de perto com o contexto. <br></li><li>  <a href="https://www.nikialeksey.com/2017/11/14/kotlin-is-bad.html">www.nikialeksey.com/2017/11/14/kotlin-is-bad.html</a> - aqui o autor se op√µe a extens√µes e fornece um exemplo interessante, discutido em um dos pontos acima. <br></li><li>  <a href="https://medium.com/%40elizarov/i-do-not-see-much-reason-to-mock-extension-functions-7f24d88a188a">medium.com/@elizarov/i-do-not-see-much-reason-to-mock-extension-functions-7f24d88a188a</a> - A opini√£o de Roman Elizarov sobre o umedecimento dos m√©todos de extens√£o. <br></li></ol><br>  Gostaria tamb√©m de agradecer aos colegas que ajudaram com casos e pensamentos interessantes sobre esse material. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485760/">https://habr.com/ru/post/pt485760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485744/index.html">Intelig√™ncia - a capacidade de um objeto de adaptar seu comportamento ao meio ambiente para preservar (sobreviver)</a></li>
<li><a href="../pt485746/index.html">A 4¬™ plataforma parte do servidor usado</a></li>
<li><a href="../pt485748/index.html">Encadeamento opcional, uni√£o com nulo e como eles mudam nossa abordagem para escrever c√≥digo</a></li>
<li><a href="../pt485750/index.html">APIs para as quais finalmente vale a pena atualizar do Java 8. Parte 1</a></li>
<li><a href="../pt485758/index.html">Gigante modular com controle on-line, bem como teclados t√™xteis e de malha Joe Paradiso</a></li>
<li><a href="../pt485764/index.html">Reagir autentica√ß√£o de token</a></li>
<li><a href="../pt485766/index.html">Regras de alimenta√ß√£o</a></li>
<li><a href="../pt485768/index.html">Tend√™ncias da Web para 2020 que vale a pena experimentar</a></li>
<li><a href="../pt485770/index.html">Pol√™mica incorreta</a></li>
<li><a href="../pt485776/index.html">Em toda a geografia: navega√ß√£o e tarefas geod√©sicas em diferentes idiomas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>