<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ю  叼 D贸nde encontrar la configuraci贸n de DNS en MacOS   锔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola 

 Recientemente, me enfrent茅 a la tarea de depurar el proceso de resoluci贸n de nombres DNS en MacOS. No encontr茅 ning煤n material completo sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D贸nde encontrar la configuraci贸n de DNS en MacOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436484/">  Hola <br><br>  Recientemente, me enfrent茅 a la tarea de depurar el proceso de resoluci贸n de nombres DNS en MacOS.  No encontr茅 ning煤n material completo sobre c贸mo sucede exactamente; tuve que recopilar la informaci贸n yo mismo. <br><br>  Esto es lo que logramos averiguar. <br><a name="habracut"></a><br>  Para tareas relacionadas con DNS en macOS, un demonio llamado mDNSResponder es responsable.  Las aventuras ocurrieron en su vida: fue reemplazado por el demonio descubierto (Yosemite), que se rompi贸 mucho y cre贸 muchos problemas.  Un a帽o despu茅s, Apple recuper贸 el sentido y devolvi贸 (El Capit谩n) el probado mDNSResponder, que repar贸 de inmediato unos 300 errores y devolvi贸 la estabilidad. <br><br>  mDNSResponder es parte de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bonjour</a> , un conjunto de tecnolog铆as destinadas a operar el dispositivo en una red sin necesidad de configuraci贸n, incluye una b煤squeda de servicios, asignaci贸n autom谩tica de direcciones y resoluci贸n de nombres.  Es Bonjour el que se usa cuando sacas tu iPhone y buscas un Apple TV o una impresora. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/th/6p/kv/th6pkv9pqosnyumxfl3x-ass-am.jpeg" alt="imagen" width="400"></div><br>  Bonjour tiene c贸digo fuente abierto y mDNSResponder, respectivamente, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tambi茅n</a> .  Esto simplifica la tarea si necesita llegar al fondo de la verdad 煤ltima y mostrar todo lo que est谩 oculto.  El archivo ya tiene implementaciones listas para Windows, Posix y VxWorks. <br><br>  El daemon maneja unicastDNS y multicastDNS.  UnicastDNS es el DNS habitual al que estamos acostumbrados y que conocemos.  MulticastDNS es un protocolo para usar DNS en redes locales que no requiere un servidor.  Si el dispositivo necesita encontrar a alguien, env铆a una pregunta: paquete de multidifusi贸n de "pregunta" y recibe una respuesta del dispositivo con el nombre solicitado (si es que existe).  El protocolo en s铆 se describe en detalle en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RFC del</a> mismo nombre. <br><br>  Son las caracter铆sticas de MulticastDNS las que el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Respondedor</a> - software para ataques en la red local - abusa.  Despu茅s del lanzamiento, insidiosamente comienza a responder a todas las solicitudes de mDNS, atrayendo a las v铆ctimas desprevenidas a sus garras. <br><br>  Fue una digresi贸n, y ahora a la pregunta principal, c贸mo ver el cach茅 de DNS actual y el estado general de la configuraci贸n de DNS. <br><br>  Entonces, realizamos los siguientes pasos: <br><br><ol><li>  En la terminal escribimos: <br><br><pre><code class="bash hljs">sudo <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> config --mode <span class="hljs-string"><span class="hljs-string">"private_data:on"</span></span></code> </pre> <br>  este comando nos permitir谩 ver la salida, de lo contrario estar谩 oculto bajo el enchufe privado </li><li>  Abra la consola, seleccione nuestro dispositivo: <br><br><img src="https://habrastorage.org/webt/pg/0y/ub/pg0yubn1qdimnustcmublmqf-8w.png"><br><br>  y en el filtro escribimos mDNSResponder <br><br><img src="https://habrastorage.org/webt/vy/nz/rq/vynzrqh4bsl-qtwj9npv9rzvevg.png"></li><li>  Ejecutamos en la terminal: <br><br><pre> <code class="bash hljs">sudo killall -INFO mDNSResponder</code> </pre> </li><li>  Abra la consola y obtenga un buen resultado, que ahora analizaremos un poco: <br><br><img src="https://habrastorage.org/webt/xb/e1/bz/xbe1bzrop_gx2fz25_z18yqki1y.png"><br></li></ol><br>  El estado de la configuraci贸n de DNS es un lienzo grande, dividido en secciones.  El m谩s interesante de ellos: <br><br>  Cach茅: el cach茅 DNS se almacena directamente aqu铆: <br><br><pre> <code class="bash hljs">------------ Cache ------------- Slt Q TTL <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> U Type rdlen 3 4290 en0 + PTR 33 _companion-link._tcp.local. PTR VMAC._companion-link._tcp.local. 3 4273 en0 + PTR 37 _companion-link._tcp.local. PTR VMAC\032(2)._companion-link._tcp.local. 6 107951 -U- - Addr 0 isafronov-G8WP. Addr 6 107951 -U- SOA 64 . SOA a.root-servers.net. nstld.verisign-grs.com. 2019011700 1800 900 604800 86400 6 107951 -U- - AAAA 0 isafronov-G8WP. AAAA 6 107951 -U- SOA 64 . SOA a.root-servers.net. nstld.verisign-grs.com. 2019011700 1800 900 604800 86400 9 763 -U- CNAME 37 1-courier.push.apple.com. CNAME 1.courier-push-apple.com.akadns.net. 13 8819 -U- CNAME 22 ax.itunes.apple.com.edgesuite.net. CNAME a1108.gi3.akamai.net.</code> </pre> <br>  El contenido del archivo / etc / hosts, por si acaso: <br><br><pre> <code class="bash hljs">--------- /etc/hosts --------- State Interface KnownUnique LO 4 localhost. Addr 127.0.0.1 KnownUnique LO 16 localhost. AAAA ::1 KnownUnique LO 4 vmware-localhost. Addr 127.0.0.1 KnownUnique LO 16 vmware-localhost. AAAA ::1 KnownUnique LO 4 broadcasthost. Addr 255.255.255.255</code> </pre> <br>  Estad铆sticas de MDNS: nombres duplicados, n煤mero de paquetes, eventos de interfaz: <br><br><pre> <code class="bash hljs">--- MDNS Statistics --- Name Conflicts 0 KnownUnique Name Conflicts 0 Duplicate Query Suppressions 2045 KA Suppressions 0 KA Multiple Packets 0 Poof Cache Deletions 203 -------------------------------- Multicast packets Sent 8211 Multicast packets Received 22382 Remote Subnet packets 1 QU questions received 25960 Normal multicast questions 62197 Answers <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> questions 4259 Unicast responses 0 Multicast responses 0 Unicast response Demotions 0 -------------------------------- Sleeps 181 Wakeups 182 Interface UP events 665 Interface UP Flap events 48 Interface Down events 817 Interface DownFlap events 16 Cache refresh queries 2876 Cache refreshed 28935 Wakeup on Resolves 0</code> </pre> <br>  Lista de interfaces de red: <br><br><pre> <code class="bash hljs">------ Network Interfaces ------ Struct addr Registered MAC BSSID Interface Address 00007FA2FD834E00 11, 00007FA2FD834E00, v6 utun0 00:00:00:00:00:00 00:00:00:00:00:00 Active A fe80::ebfb:c666:8f7b:62ed 00007FA2FF01B800 9, 00007FA2FF01B800, v6 awdl0 DE:14:B1:E7:21:33 00:00:00:00:00:00 Active v6 AM fe80::dc14:b1ff:fee7:2133 00007FA2FD829C00 7, 0000000000000000, v4 en0 F4:5C:89:8E:9D:C1 E4:8D:8C:61:7F:5D 192.168.1.73 dormant <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 1943 seconds 00007FA2FD00C200 13, 00007FA2FD00C200, v4 en5 42:4D:7F:A3:50:1B 00:00:00:00:00:00 Active v4 AM 169.254.150.120 00007FA2FE008C00 7, 00007FA2FE008C00, v4 en0 F4:5C:89:8E:9D:C1 E4:8D:8C:61:7F:5C Active v4 AM p 192.168.1.73</code> </pre> <br>  Lista de servidores DNS: <br><br><pre> <code class="bash hljs">--------- DNS Servers(2) ---------- DNS Server . en0 127.0.0.1:53 0 Unscoped 30 18283 v4 v6 !cell !exp !clat46 !DNSSECAware DNS Server . en0 127.0.0.1:53 0 InterfaceScoped 30 18291 v4 v6 !cell !exp !clat46 !DNSSECAware v4answers 1 v6answers 1 Last DNS Trigger: 140697 ms ago</code> </pre> <br>  El mundo de las interacciones internas y externas de los subsistemas de MacOS es vasto y lleno de misterios.  Trabajar con nombres de dominio es solo una peque帽a parte.  Para leer m谩s, recomiendo: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Libros blancos de manzana</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Blog de</a> malware Explorer y entusiasta del sistema operativo Patrick Wardle </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sitio del</a> investigador y libros y pr谩ctica * OS Johnatan Levin </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436484/">https://habr.com/ru/post/es436484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436472/index.html">Conferencia DEFCON 20. Captura en 60 segundos: de una cuenta de invitado a un administrador de dominio de Windows. Parte 1</a></li>
<li><a href="../es436474/index.html">Conferencia DEFCON 20. Captura en 60 segundos: de una cuenta de invitado a un administrador de dominio de Windows. Parte 2</a></li>
<li><a href="../es436476/index.html">Nube para aseguradoras</a></li>
<li><a href="../es436480/index.html">Hice un bot que se comunica con los reclutadores para m铆, y me gust贸</a></li>
<li><a href="../es436482/index.html">Advanced Three.js: materiales de sombreado y postprocesamiento</a></li>
<li><a href="../es436486/index.html">驴Qu茅 est谩 pasando en el mercado de podcasts de audio?</a></li>
<li><a href="../es436488/index.html">Curry y aplicaci贸n parcial en C ++ 14</a></li>
<li><a href="../es436490/index.html">Motorola planea introducir la encarnaci贸n Razr v3</a></li>
<li><a href="../es436492/index.html">Estamos buscando oradores en el d茅cimo DIY Mitap 17 de febrero de 2019</a></li>
<li><a href="../es436494/index.html">Reemplazar un disco manteniendo la numeraci贸n adecuada en CEPH</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>