<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏻 👨🏻‍🚒 🛬 Tantangan Rekko 2019: bagaimana itu 👷🏼 🚥 👨🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Belum lama ini, kontes sistem rekomendasi dari bioskop online Okko - Rekko Challenge 2019 diadakan di platform Boosters . Bagi saya itu adalah pengala...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tantangan Rekko 2019: bagaimana itu</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/461055/"><img src="https://habrastorage.org/webt/hb/u7/gu/hbu7guq0ic25zumfxsf5bbipkcq.png"><br><br>  Belum lama ini, kontes sistem rekomendasi dari bioskop online Okko - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rekko Challenge 2019</a> diadakan di platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Boosters</a> .  Bagi saya itu adalah pengalaman pertama berpartisipasi dalam kompetisi dengan leaderboard (sebelumnya saya mencoba kekuatan hanya dalam hackathon).  Tugas ini menarik dan akrab bagi saya dari latihan, ada dana hadiah, yang berarti masuk akal untuk berpartisipasi.  Sebagai hasilnya, saya mengambil tempat ke-14, di mana panitia mengeluarkan kaos peringatan.  Bagus  Terima kasih <br><br>  Dalam artikel ini, saya akan secara singkat membenamkan Anda dalam tugas, berbicara tentang hipotesis yang diajukan oleh saya, serta bagaimana menyeret kompetisi dalam sistem rekomendasi dan masuk ke 15 besar tanpa pengalaman susun, yang akan sangat berguna bagi mereka yang hanya akan berpartisipasi dalam kontes. <br><a name="habracut"></a><br><h3>  Sistem Rekomendasi </h3><br>  Tujuan utama dari sistem rekomendasi adalah untuk memberikan kepada pengguna apa yang <s>ingin</s> ia beli (sayangnya, pandangan hipertrofi seperti itu dikenakan pada kami oleh aplikasi komersial). <br>  Ada berbagai pernyataan tugas (peringkat, cari yang serupa, prediksi elemen tertentu), dan, dengan demikian, cara untuk menyelesaikannya.  Kita semua menyukai variabilitas dalam pilihan, yang disediakan oleh serangkaian solusi potensial untuk setiap masalah.  Berbagai pendekatan dijelaskan dengan baik dalam artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anatomi Sistem Rekomendasi</a> .  Tentu saja, tidak ada yang membatalkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">teorema NFL</a> , yang berarti bahwa dalam masalah kompetitif kita dapat mencoba algoritma yang berbeda. <br><br><h3>  Pernyataan masalah </h3><br>  Baca lebih lanjut tentang tugas dan data dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel oleh</a> penyelenggara.  TL; DR di sini saya akan menjelaskan minimum yang diperlukan untuk memahami konteksnya. <br><br>  Dataset berisi lebih dari sepuluh ribu film dengan atribut anonim.  Opsi berikut tersedia sebagai matriks interaksi item-pengguna: <br><br><ul><li>  transaksi - berisi fakta-fakta pengguna membeli konten / menyewa / melihat dengan berlangganan; </li><li>  peringkat - peringkat film oleh pengguna; </li><li>  bookmark - acara menambahkan film ke bookmark. </li></ul><br>  Semua informasi diambil selama periode waktu tertentu, yang disajikan dalam unit sewenang-wenang yang terhubung dengan nyata. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>t</mi><mi>s</mi><mo>=</mo><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>r</mi><mi>e</mi><mi>a</mi><mi>l</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.146ex" height="2.66ex" viewBox="0 -832 5660.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-73" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-3D" x="1108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-66" x="2165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-28" x="2715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-74" x="3105" y="0"></use><g transform="translate(3466,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-65" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-61" x="918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6C" x="1447" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-29" x="5270" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>t</mi><mi>s</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>r</mi><mi>e</mi><mi>a</mi><mi>l</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> ts = f (ts_ {real}) </script></p><br>  Konten memiliki serangkaian atribut berikut: <br><br><img src="https://habrastorage.org/webt/14/hj/uu/14hjuuoannzvkwpal7n7xwqyvyk.png"><br><br>  Anda dapat membacanya secara detail di artikel oleh panitia, tetapi saya ingin segera memperhatikan apa yang menarik perhatian saya: parameter "atribut".  Isinya sekantong atribut kategorikal dengan kardinalitas ~ 36 ribu.  Ada rata-rata 15 nilai per film.  Sekilas, hanya atribut paling dasar yang menggambarkan konten dienkripsi dalam nilai-nilai ini: aktor, sutradara, negara, langganan atau koleksi di mana film tersebut berada. <br><br>  Diperlukan untuk memprediksi 20 film yang akan ditonton pengguna pengujian dalam dua bulan ke depan.  Pengguna uji adalah 50 ribu dari semua 500 ribu pengguna.  Di leaderboard, mereka terbagi dua: 25 ribu masing-masing di publik / swasta. <br><br><h3>  Metrik </h3><br>  Panitia memilih Mean Normalize Average Precision pada 20 elemen (MNAP @ 20) sebagai metrik.  Perbedaan utama dari MAP biasa adalah bahwa untuk pengguna yang belum menonton 20 film dalam periode pengujian, penjatahan tidak terjadi pada k, tetapi pada nilai aktual dari film yang ditonton. <br><br><img src="https://habrastorage.org/webt/tk/xt/fn/tkxtfnagqxtookssvkg8rjiicqg.png"><br><br>  Baca lebih lanjut dan lihat kode dalam Cython di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini.</a> <br><br><h3>  Validasi </h3><br>  Mendapatkan solusi masalah.  Pertama-tama, perlu memutuskan apa yang divalidasi.  Karena kami perlu memprediksi film di masa mendatang, kami tidak dapat melakukan gangguan sederhana oleh pengguna.  Karena fakta bahwa waktu dianonimkan, saya harus setidaknya mulai menguraikannya setidaknya sekitar.  Untuk melakukan ini, saya mengambil beberapa pengguna, membuat jadwal untuk transaksi dan mengungkapkan musiman tertentu.  Diasumsikan bahwa itu harian, dan mengetahui perbedaan waktu antara hari-hari, kita dapat menghitung untuk periode berapa data diunggah.  Ternyata ini adalah transaksi selama 6 bulan.  Ini kemudian dikonfirmasi di saluran telegram di mana kontes itu dibahas. <br><br><img src="https://habrastorage.org/webt/ba/3_/67/ba3_67yp9-znxb9b_uoeummo6li.png"><br><br>  Bagan di atas menunjukkan frekuensi transaksi per jam menggunakan data selama satu bulan sebagai contoh.  Tiga puncak terkemuka setiap minggu mirip dengan Jumat malam, Sabtu, dan Minggu. <br><br>  Akibatnya, kami memiliki enam bulan menonton, dan film-film perlu diprediksi untuk dua berikutnya.  Kami akan menggunakan sepertiga terakhir waktu sampel pelatihan sebagai dataset validasi. <br><br><img src="https://habrastorage.org/webt/mu/uy/cm/muuycmuqlah95etk4kqmdrbpygo.jpeg"><br><br>  Beberapa kiriman berikutnya menunjukkan bahwa pemisahan dipilih dengan baik dan kecepatan validasi lokal berkorelasi sangat baik dengan leaderboard. <br><br><h3>  Mencoba mendanonimkan data </h3><br>  Untuk mulai dengan, saya memutuskan untuk mencoba mendanonimisasi semua film, sehingga: <br><br><ul><li>  menghasilkan banyak tanda dengan meta-informasi konten.  Setidaknya, orang-orang berikut ini muncul dalam pikiran: genre, pemeran, masuk ke langganan, deskripsi teks, dll. </li><li>  melemparkan tungku interaksi dari samping untuk mengurangi kekenyangan matriks.  Ya, aturan kompetisi tidak melarang penggunaan data eksternal.  Tentu saja, tidak ada harapan kecocokan dengan dataset terbuka, tetapi tidak ada yang membatalkan penguraian portal Rusia. </li></ul><br>  Tampaknya menjadi motivasi logis, yang, sesuai dengan harapan saya, adalah menjadi solusi fitur-pembunuh. <br><br>  Pertama-tama, saya memutuskan untuk mengurai situs web Okko dan mengeluarkan semua film beserta propertinya (peringkat, durasi, batasan umur, dan lainnya).  Nah, bagaimana menguraikan - semuanya ternyata cukup sederhana, dalam hal ini, Anda bisa menggunakan API: <br><br><img src="https://habrastorage.org/webt/c6/i8/8s/c6i88s9db6wj9nl7aqvysuappt8.png"><br><br>  Setelah masuk ke katalog dan memilih genre atau langganan tertentu, Anda hanya perlu masuk ke salah satu elemen.  Menanggapi permintaan di atas, seluruh array film dalam genre / berlangganan dengan semua atribut jatuh.  Sangat nyaman :) <br><br><div class="spoiler">  <b class="spoiler_title">Jadi atribut dari satu elemen dalam struktur terlihat</b> <div class="spoiler_text"><pre><code class="json hljs"><span class="hljs-string"><span class="hljs-string">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"c2f98ef4-2eb5-4bfd-b765-b96589d4c470"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SERIAL"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"originalName"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"covers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"basicCovers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"      ,    ..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"worldReleaseDate"</span></span>: <span class="hljs-number"><span class="hljs-number">1558731600000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ageAccessType"</span></span>: <span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ageAccessDescription"</span></span>: <span class="hljs-string"><span class="hljs-string">"16+    16 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"trailers"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"kinopoiskRating"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-attr"><span class="hljs-attr">"okkoRating"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"imdbRating"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"staraja-gvardija"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"has3d"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasFullHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasUltraHd"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasDolby"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasSound51"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasMultiAudio"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hasSubtitles"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inSubscription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inNovelty"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"earlyWindow"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"releaseType"</span></span>: <span class="hljs-string"><span class="hljs-string">"RELEASE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"playbackStartDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"playbackTimeMark"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"products"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"PURCHASE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"consumptionMode"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fromConsumptionMode"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"qualities"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Q_FULL_HD"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"fromQuality"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"price"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currencyCode"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"priceCategory"</span></span>: <span class="hljs-string"><span class="hljs-string">"679"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startDate"</span></span>: <span class="hljs-number"><span class="hljs-number">1554670800000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"endDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscription"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"bc682dc6-c0f7-498e-9064-7d6cafd8ca66"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"119228"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"offer"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"originalPrice"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, ... ], <span class="hljs-attr"><span class="hljs-attr">"emptyReason"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"licenses"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"assets"</span></span>: {...}, <span class="hljs-attr"><span class="hljs-attr">"genres"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"Detective"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"GENRE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"Detective"</span></span> } }, ... ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"countries"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"3b9706f4-a681-47fb-918e-182ea9dfef0b"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"COUNTRY"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"russia"</span></span> } } ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"subscriptions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"items"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"bc682dc6-c0f7-498e-9064-7d6cafd8ca66"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SUBSCRIPTION"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"119228"</span></span> } }, ... ], <span class="hljs-attr"><span class="hljs-attr">"totalSize"</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"promoText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"innerColor"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"updateRateDescription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"contentCountDescription"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"copyright"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionStartDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionEndDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"subscriptionActivateDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"stickerText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fullSeasonPriceText"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"purchaseDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expireDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastWatchedChildId"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"bookmarkDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"userRating"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"consumeDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastStartingDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"watchDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startingDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"earlyWatchDate"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre> <br></div></div><br>  Masih harus melalui semua genre, parse JSON, dan kemudian memungkinkan duplikat, karena satu film dapat menjadi milik beberapa genre / langganan. <br><br>  Ya, di sini saya beruntung dan saya menghemat banyak waktu.  Jika ini bukan kasus Anda, dan Anda perlu mengurai konten html, maka ada artikel di hub yang dapat membantu dengan ini, misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  "Masalahnya adalah topinya," pikirku, "kita hanya bisa menahannya."  "Intinya adalah topinya," aku menyadari keesokan harinya: data tidak sepenuhnya cocok.  Tentang itu di bawah ini. <br><br>  Pertama, ukuran katalog secara signifikan berbeda: dalam dataset - 10.200, dikumpulkan dari situs - 8870. Ini mengikuti dari historisitas dataset: itu hanya diunduh apa yang ada di situs sekarang, dan data kompetisi untuk 2018.  Beberapa film menjadi tidak tersedia.  Ups <br><br>  Kedua, dari atribut potensial untuk pertandingan adalah intuisi gigih hanya tentang hal-hal berikut: <br><br>  <i>feature5</i> - batas usia.  Cukup mudah dimengerti.  Kardinalitas atribut adalah 5 nilai float unik dan “-1”.  Di antara data yang dikumpulkan, atribut "ageAccessType" ditemukan hanya dengan kardinalitas 5. Pemetaan tampak seperti ini: <br><br><pre> <code class="python hljs">catalogue.age_rating = catalogue.age_rating.map({<span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.4496666915</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">0.5927161087</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">0.6547073468</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">0.6804096966000001</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>})</code> </pre><br>  <i>feature2</i> - nilai film yang dikonversi dari pencarian film.  Awalnya, pada tahap EDA, gagasan bahwa kita berurusan dengan peringkat diajukan oleh korelasi parameter dengan jumlah total tampilan.  Selanjutnya, keyakinan bahwa peringkat ini berasal dari pencarian film mengkonfirmasi keberadaan parameter “kinopoiskRating” di data situs. <br><br>  Selangkah lebih dekat ke pertandingan!  Sekarang tinggal mencari cara untuk membalikkan konversi untuk parameter <i>fitur2 yang</i> disajikan dalam bentuk anonim. <br><br>  Beginilah distribusi nilai-nilai terlihat di <i>feature2</i> : <br><br><img src="https://habrastorage.org/webt/pq/pl/_d/pqpl_d1lpm0xed8limzxedbevfa.png"><br><br>  Dan distribusi nilai parameter <i>kinopoiskRating</i> : <br><br><img src="https://habrastorage.org/webt/wn/6a/np/wn6anpuxtav5ghzgq4tdme0lji8.png"><br><br>  Ketika saya menunjukkan gambar-gambar ini kepada rekan saya Sasha, dia segera melihat bahwa ini adalah tingkat tiga.  Tiga ahli matematika tidak dihormati, tetapi angka Pi bahkan genap.  Hasilnya, ternyata seperti ini: <br><br><img src="https://habrastorage.org/webt/tw/tt/4u/twtt4uravymgxe1lhxj2d9ydqly.png"><br><br>  Tampaknya semuanya, tetapi tidak cukup.  Kami melihat distribusi yang identik, tetapi nilai nominal dan kuantitasnya masih belum bertemu.  Jika kita tahu sejumlah contoh perbandingan, itu hanya akan tetap mendekati fungsi linear untuk menemukan faktornya.  Tetapi kami tidak memilikinya. <br><br>  Ngomong-ngomong, perkiraan bukanlah kata yang paling cocok.  Kami membutuhkan solusi dengan kesalahan yang hampir sama dengan nol.  Akurasi dalam data yang dikumpulkan adalah 2 karakter setelah pemisah.  Jika Anda menganggap bahwa ada banyak film dengan peringkat 6.xx dan ada film dengan peringkat yang sama, maka Anda harus memperjuangkan ketepatan di sini. <br><br>  Apa lagi yang bisa Anda coba?  Anda dapat mengandalkan nilai minimum dan maksimum dan menggunakan MinMaxScaler, tetapi tidak dapat diandalkannya metode ini segera menimbulkan keraguan.  Biarkan saya mengingatkan Anda bahwa jumlah film awalnya tidak bersamaan, dan dataset kami adalah historis, dan keadaan saat ini di situs.  Yaitu  tidak ada jaminan bahwa film-film dengan peringkat minimum dan maksimum di kedua kelompok adalah identik (ternyata mereka memiliki batasan usia yang berbeda, dan durasinya tidak menyatu dari kata "sepenuhnya"), serta tidak ada pemahaman tentang seberapa sering pembaruan OKKO di API setiap hari mengubah peringkat pencarian film. <br><br>  Jadi menjadi jelas bahwa saya membutuhkan lebih banyak kandidat atribut untuk pencocokan. <br><br>  <b>Apa lagi yang menarik?</b> <br><br>  <i>feature1</i> adalah semacam tanggal.  Secara teori, untuk tanggal, penyelenggara menjanjikan pelestarian pemisahan negara, yang menyiratkan fungsi linier.  Secara umum, transformasi seharusnya identik dengan atribut <i>ts</i> untuk matriks interaksi.  Jika Anda melihat distribusi film oleh <i>feature_1</i> ... <br><br><img src="https://habrastorage.org/webt/q2/94/dn/q294dngcpjgbfdgxcpwsrsv-1lu.png"><br><br>  ... maka hipotesis tanggal rilis film segera tersapu.  Intuition menunjukkan bahwa jumlah film yang diproduksi oleh industri harus meningkat dari waktu ke waktu.  Ini dikonfirmasi di bawah ini. <br><br>  Ada 14 atribut dalam data yang kami terima dari situs.  Bahkan, sayangnya, nilai-nilai itu hanya berisi untuk yang berikut: <br><br><img src="https://habrastorage.org/webt/wg/bw/64/wgbw64outbnbatpbee2vt5ge8y0.png"><br><br><img src="https://habrastorage.org/webt/5t/ba/pw/5tbapwosxnjwma2wxnznoj3ntfm.png"><br><br><img src="https://habrastorage.org/webt/rj/l8/jb/rjl8jbpximeqbwahvzmrdbummm4.png"><br><br>  Tidak ada contoh di atas yang mirip dengan <i>fitur_1</i> .  Yah, tidak ada lagi ide untuk perbandingan, dan tampaknya semua kerepotan dengan tugas ini sia-sia.  Tentu saja, saya mendengar tentang kontes, di mana orang-orang menandai data secara manual, tetapi tidak ketika datang ke ratusan dan ribuan salinan. <br><br><h3>  Solusi </h3><br>  <b>1. Model sederhana</b> <br><br>  Menyadari bahwa tidak semuanya sederhana, saya mulai bekerja dengan rendah hati dengan apa yang ada.  Sebagai permulaan, saya ingin memulai dengan yang sederhana.  Saya mencoba beberapa solusi yang sering digunakan dalam industri ini, yaitu: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemfilteran kolaboratif</a> (berdasarkan item kasus kami) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">faktorisasi matriks</a> . <br><br>  Komunitas menggunakan banyak pustaka python yang cocok untuk tugas-tugas ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">implisit</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">LightFM</a> .  Yang pertama mampu memfaktorkan berdasarkan ALS, serta Penyaringan Kolaboratif Tetangga Terdekat dengan beberapa opsi untuk memproses ulang item-item matriks.  Yang kedua memiliki dua faktor khas: <br><br><ul><li>  Factorisasi didasarkan pada SGD, yang memungkinkan untuk menggunakan fungsi kerugian berbasis pengambilan sampel, termasuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WARP</a> . </li><li>  Ini menggunakan pendekatan hybrid, menggabungkan informasi tentang atribut pengguna dan item dalam model sedemikian rupa sehingga vektor laten pengguna adalah jumlah dari vektor laten atributnya.  Dan juga untuk item.  Pendekatan ini menjadi sangat nyaman ketika ada masalah mulai dingin untuk pengguna / item. </li></ul><br>  Kami tidak memiliki atribut pengguna (selain dari kemampuan untuk menampilkannya berdasarkan interaksi dengan film), jadi saya hanya menggunakan atribut item. <br><br>  Secara total, 6 pengaturan pergi untuk menghitung parameter.  Kombinasi tiga matriks digunakan sebagai matriks interaksi, di mana peringkat diubah menjadi biner.  Hasil komparatif dengan hyperparameter terbaik untuk setiap pengaturan pada tabel di bawah ini. <br><div class="scrollable-table"><table><tbody><tr><td>  <b>Model</b> </td><td>  <b>Tes MNAP @ 20</b> </td></tr><tr><td>  ALS implisit </td><td>  0,02646 </td></tr><tr><td>  Cosinus tersirat kNN CF </td><td>  <b>0,03170</b> </td></tr><tr><td>  TFIDF kNN CF Implisit </td><td>  0,03113 </td></tr><tr><td>  LightFM (tanpa fitur item), kehilangan BPR </td><td>  0,02567 </td></tr><tr><td>  LightFM (tanpa fitur item), kehilangan WARP </td><td>  0,02632 </td></tr><tr><td>  LightFM dengan fitur item, kehilangan WARP </td><td>  0,02635 </td></tr></tbody></table></div><br>  Seperti yang Anda lihat, pemfilteran kolaboratif klasik telah terbukti jauh lebih baik daripada model lain.  Tidak sempurna, tetapi banyak yang tidak diperlukan dari garis dasar.  Kirim dengan konfigurasi ini memberi 0,03048 di leaderboard publik.  Saya tidak ingat posisi pada waktu itu, tetapi pada saat penutupan kompetisi, pengajuan ini pasti akan mencapai puncak 80 dan memberikan medali perunggu. <br><br>  <b>2. Hello Boosting</b> <br><br>  Apa yang bisa lebih baik dari satu model?  Benar: beberapa model. <br><br>  Oleh karena itu, opsi berikutnya adalah ansambel atau, dalam konteks rekomendasi, menentukan peringkat model tingkat kedua.  Sebagai pendekatan, saya mengambil artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> dari orang-orang dari Avito.  Tampaknya memasak ketat sesuai resep, diaduk secara berkala dan dibumbui dengan atribut film.  Satu-satunya penyimpangan adalah jumlah kandidat: saya mengambil 200 teratas dari LightFM, karena  dengan 500.000 pengguna, lebih tepatnya tidak sesuai dengan memori. <br><br>  Akibatnya, kecepatan yang saya peroleh pada validasi lebih buruk daripada pada satu model. <br><br>  Setelah beberapa hari bereksperimen, muncul kesadaran bahwa tidak ada yang berhasil dan tidak ada yang berhasil sendiri.  Atau saya tidak tahu cara memasaknya (spoiler: jawaban kedua yang benar).  Apa yang saya lakukan salah?  Ada dua alasan yang muncul: <br><br><ul><li>  Di satu sisi, mengambil 200 teratas dari model tingkat pertama masuk akal dari sudut pandang menghasilkan sampel "negatif keras", yaitu  film-film yang juga relevan bagi pengguna, tetapi tidak ditonton olehnya.  Di sisi lain, beberapa film ini dapat ditonton selama periode pengujian, dan kami menyajikan contoh-contoh ini sebagai negatif.  Selanjutnya, saya memutuskan untuk mengurangi risiko dari fakta ini, memeriksa ulang hipotesis dengan eksperimen berikut: Saya mengambil semua contoh positif + acak untuk sampel pelatihan.  Kecepatan pada sampel uji tidak meningkat.  Di sini perlu untuk mengklarifikasi bahwa dalam pengambilan sampel pada tes ada juga prediksi teratas dari model tingkat pertama, karena pada leaderboard tidak ada yang akan memberi tahu saya semua contoh positif. </li><li>  Dari 10.200 film yang tersedia dalam katalog, hanya 8.296 film yang melakukan interaksi.  Hampir 2.000 film kehilangan perhatian pengguna, sebagian karena tidak tersedia untuk pembelian / sewa / sebagai bagian dari berlangganan.  Orang-orang dalam obrolan bertanya apakah film yang tidak dapat diakses dapat tersedia pada periode pengujian.  Jawabannya adalah ya.  Jelas tidak mungkin untuk membuang mereka.  Jadi, saya menyarankan bahwa hampir 2.000 film lagi akan tersedia dalam 2 bulan ke depan.  Kalau tidak, mengapa membuangnya ke dalam dataset? </li></ul><br>  <b>3. Neuron</b> <br><br>  Dari paragraf sebelumnya, muncul pertanyaan: bagaimana kita bisa bekerja dengan film yang tidak ada interaksi sama sekali?  Ya, kami mengingat fitur item di LightFM, tetapi seperti yang kami ingat, mereka tidak masuk.  Apa lagi  Neuron! <br><br>  Arsenal open source memiliki beberapa perpustakaan tingkat tinggi yang cukup populer untuk bekerja dengan sistem rekomendasi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spotlight</a> dari Maciej Kula (penulis LightFM) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">TensorRec</a> .  Yang pertama di bawah tenda PyTorch, yang kedua - Tensorflow. <br><br>  Spotlight dapat memfaktisasi pada dataset implisit / eksplisit dengan neuron dan urutan model.  Pada saat yang sama, dalam faktorisasi "di luar kotak" tidak ada cara untuk menambahkan fitur pengguna / item, jadi jatuhkan. <br><br>  TensorRec, sebaliknya, hanya tahu cara memfaktorkan dan merupakan kerangka kerja yang menarik: <br><br><ul><li>  grafik representasi - metode transformasi (dapat diatur berbeda untuk pengguna / item) dari data input dalam penyematan, berdasarkan pada perhitungan mana dalam grafik prediksi akan terjadi.  Pilihan terdiri dari lapisan dengan opsi aktivasi berbeda.  Dimungkinkan juga untuk menggunakan kelas abstrak dan menempel pada transformasi kustom, yang terdiri dari urutan lapisan keras. </li><li>  grafik prediksi memungkinkan Anda untuk memilih operasi di akhir: titik produk favorit Anda, jarak euclidean dan kosinus. </li><li>  Kerugian - ada juga banyak untuk dipilih.  Kami senang dengan implementasi WMRB (pada dasarnya WARP yang sama, hanya tahu cara belajar batch dan didistribusikan) </li></ul><br>  Yang paling penting, TensorRec dapat bekerja dengan fitur kontekstual, dan memang penulis mengakui bahwa ia awalnya terinspirasi oleh ide LightFM.  Baiklah, mari kita lihat.  Kami mengambil interaksi (hanya transaksi) dan fitur barang. <br><br>  Kami mengirim untuk mencari berbagai konfigurasi dan menunggu.  Dibandingkan dengan LightFM, pelatihan dan validasi membutuhkan waktu lama. <br><br>  Selain itu, ada beberapa ketidaknyamanan yang harus dihadapi: <br><br><ol><li>  Dari mengubah flag verbose, metode <i>fit</i> tidak mengubah apa pun dan tidak ada callback yang disediakan untuk Anda.  Saya harus menulis fungsi yang secara internal melatih satu era menggunakan metode <i>fit_partial</i> , dan kemudian menjalankan validasi untuk kereta dan tes (dalam kedua kasus, sampel digunakan untuk mempercepat proses). </li><li>  Secara umum, penulis kerangka kerja adalah orang hebat dan memanfaatkan tf.SparseTensor di mana-mana.  Namun, perlu dipahami bahwa sebagai prediksi, termasuk untuk validasi, Anda mendapatkan hasil yang padat sebagai vektor dengan panjang n_item untuk setiap pengguna.  Dua tips berikut dari ini: membuat siklus untuk menghasilkan prediksi dengan batch (metode perpustakaan tidak memiliki parameter seperti itu) dengan penyaringan top-k dan menyiapkan strip dengan RAM. </li></ol><br>  Pada akhirnya, pada opsi konfigurasi terbaik, saya berhasil memeras 0,02869 pada sampel pengujian saya.  Ada sesuatu yang mirip dengan LB. <br><br>  Nah, apa yang saya harapkan?  Bahwa penambahan fitur non-linearitas ke item akan memberikan peningkatan dua kali lipat dalam metrik?  Itu naif. <br><br>  <b>4. Beck tugas itu</b> <br><br>  Jadi tunggu sebentar.  Tampaknya saya kembali bertemu neuron juggling.  Hipotesis apa yang ingin saya uji ketika saya memulai bisnis ini?  Hipotesisnya adalah: “Dalam 2 bulan berikutnya dari pemilihan yang tertunda, hampir 2.000 film baru akan terlihat di papan peringkat.  Beberapa dari mereka akan memiliki banyak pandangan. " <br><br>  Jadi Anda bisa memeriksanya dalam 2 langkah: <br><br><ol><li>  Akan menyenangkan untuk melihat berapa banyak film yang kami tambahkan dalam pemisahan yang jujur ​​oleh kami tentang masa kereta.  Jika kita hanya menonton, maka film "baru" hanya 240 (!).  Hipotesis segera bergetar.  Tampaknya pembelian konten baru tidak dapat berbeda dengan jumlah itu dari periode ke periode. </li><li>  Kita selesai.  Kami memiliki kesempatan untuk melatih model agar hanya menggunakan presentasi berdasarkan fitur-fitur item (dalam LightFM, misalnya, ini dilakukan secara default, jika kami tidak melakukan pra-populasi matriks atribut dengan matriks identitas).  Lebih lanjut, untuk infeness, kami dapat mengirimkan ke model ini saja (!) Film-film kami yang tidak dapat diakses dan tidak pernah dilihat.  Dari hasil ini, kami kirim dan dapatkan 0,0000136. </li></ol><br>  Bingo!  Ini berarti Anda dapat berhenti menekan semantik dari atribut film.  Ngomong-ngomong, kemudian, di DataFest, orang-orang dari OKKO mengatakan bahwa sebagian besar konten yang tidak dapat diakses hanyalah beberapa film lama. <br><br>  Anda perlu mencoba sesuatu yang baru, dan baru - lama terlupakan.  Dalam kasus kami, tidak sepenuhnya dilupakan, tetapi apa yang terjadi beberapa hari yang lalu.  Penyaringan kolaboratif? <br><br>  <b>5. Setel garis dasar</b> <br><br>  Bagaimana saya bisa membantu baseline CF? <br><br>  <b>Ide nomor 1</b> <br><br>  Di Internet, saya menemukan presentasi tentang menggunakan uji rasio kemungkinan untuk menyaring film-film kecil. <br><br>  Di bawah ini saya akan meninggalkan kode python saya untuk menghitung skor LLR, yang harus saya tulis di atas lutut saya untuk menguji ide ini. <br><br><div class="spoiler">  <b class="spoiler_title">Perhitungan LLR</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.sparse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> csr_matrix <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tqdm <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LLR</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, interaction_matrix, interaction_matrix_2=None)</span></span></span><span class="hljs-function">:</span></span> interactions, lack_of_interactions = self.make_two_tables(interaction_matrix) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> interaction_matrix_2 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: interactions_2, lack_of_interactions_2 = self.make_two_tables(interaction_matrix_2) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: interactions_2, lack_of_interactions_2 = interactions, lack_of_interactions self.num_items = interaction_matrix.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>] self.llr_matrix = np.zeros((self.num_items, self.num_items)) <span class="hljs-comment"><span class="hljs-comment"># k11 - item-item co-occurrence self.k_11 = np.dot(interactions, interactions_2.T) # k12 - how many times row elements was bought without column elements self.k_12 = np.dot(interactions, lack_of_interactions_2.T) # k21 - how many times column elements was bought without row elements self.k_21 = np.dot(lack_of_interactions, interactions_2.T) # k22 - how many times elements was not bought together self.k_22 = np.dot(lack_of_interactions, lack_of_interactions_2.T) def make_two_tables(self, interaction_matrix): interactions = interaction_matrix if type(interactions) == csr_matrix: interactions = interactions.todense() interactions = np.array(interactions.astype(bool).T) lack_of_interactions = ~interactions interactions = np.array(interactions, dtype=np.float32) lack_of_interactions = np.array(lack_of_interactions, dtype=np.float32) return interactions, lack_of_interactions def entropy(self, k): N = np.sum(k) return np.nansum((k / N + (k == 0)) * np.log(k / N)) def get_LLR(self, item_1, item_2): k = np.array([[self.k_11[item_1, item_2], self.k_12[item_1, item_2]], [self.k_21[item_1, item_2], self.k_22[item_1, item_2]]]) LLR = 2 * np.sum(k) * (self.entropy(k) - self.entropy(np.sum(k, axis=0)) - self.entropy(np.sum(k, axis=1))) return LLR def compute_llr_matrix(self): for item_1 in range(self.num_items): for item_2 in range(item_1, self.num_items): self.llr_matrix[item_1, item_2] = self.get_LLR(item_1, item_2) if item_1 != item_2: self.llr_matrix[item_2, item_1] = self.llr_matrix[item_1, item_2] def get_top_n(self, n=100, mask=False): filtered_matrix = self.llr_matrix.copy() for i in tqdm(range(filtered_matrix.shape[0])): ind = np.argpartition(filtered_matrix[i], -n)[-n:] filtered_matrix[i][[x for x in range(filtered_matrix.shape[0]) if x not in ind]] = 0 if mask: return filtered_matrix != 0 else: return filtered_matrix</span></span></code> </pre><br></div></div><br>  Akibatnya, matriks yang dihasilkan dapat digunakan sebagai masker untuk hanya meninggalkan interaksi yang paling signifikan dan ada dua opsi: gunakan ambang batas atau biarkan elemen top-k dengan nilai tertinggi.  Dengan cara yang sama, kombinasi beberapa pengaruh pada pembelian dalam satu kecepatan digunakan untuk memberi peringkat item, dengan kata lain, tes menunjukkan betapa pentingnya, misalnya, menambahkan ke favorit tentang kemungkinan konversi ke pembelian.  Tampaknya menjanjikan, tetapi penggunaan menunjukkan bahwa pemfilteran menggunakan skor LLR memberikan peningkatan yang sangat mini, dan menggabungkan beberapa skor hanya memperburuk hasilnya.  Tampaknya, metode ini bukan untuk data ini.  Dari plus, saya hanya dapat mencatat bahwa, sementara mencari tahu bagaimana menerapkan ide ini, saya harus menggali yang tersirat di bawah tenda. <br><br>  Contoh penerapan logika khusus ini secara implisit akan ditinggalkan di bawah kucing. <br><br><div class="spoiler">  <b class="spoiler_title">Modifikasi matriks secara implisit</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   LLR scores.     n_items * n_items. llr = LLR(train_csr, train_csr) llr.compute_llr_matrix() #     id, ,      llr_based_mask = llr.get_top_n(n=500, mask=True) #     ,  - CosineRecommender. model = CosineRecommender(K=10200) model.fit(train_csr.T) # model.similarity -   co-occurrence (  Cosine - ).        . masked_matrix = np.array(model.similarity.todense()) * llr_based_mask #  fit()  scorer     model.similarity. #     . model.scorer = NearestNeighboursScorer(csr_matrix(masked_matrix)) #      :   recommend   . test_predict = {} for id_ in tqdm(np.unique(test_csr.nonzero()[0])): test_predict[id_] = model.recommend(id_, train_csr, filter_already_liked_items=True, N=20) #   tuples (item_id, score),   id  . test_predict_ids = {k: [x[0] for x in v] for k, v in test_predict.items()} #       / ,     ,   Cython.</span></span></code> </pre> <br></div></div><br>  <b>Ide nomor 2</b> <br><br>  Gagasan lain muncul yang dapat meningkatkan prediksi tentang penyaringan kolaboratif sederhana.  Industri sering menggunakan semacam fungsi redaman untuk perkiraan lama, tetapi kami memiliki kasus yang tidak begitu sederhana.  Mungkin, Anda perlu mempertimbangkan 2 kemungkinan kasus: <br><br><ol><li>  Pengguna yang menonton layanan ini kebanyakan baru </li><li>  "Penguji."  Artinya, mereka yang datang relatif baru dan dapat menonton film-film yang sebelumnya populer. </li></ol><br>  Dengan demikian, dimungkinkan untuk membagi komponen kolaboratif menjadi dua kelompok yang berbeda secara otomatis.  Untuk melakukan ini, saya menemukan fungsi yang alih-alih nilai implisit diatur ke "1" atau "0" di persimpangan pengguna dan film, nilai yang menunjukkan betapa pentingnya film ini dalam riwayat menonton pengguna. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>f</mi><mi>i</mi><mi>l</mi><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B1;</mo></mrow><mo>&amp;#x2217;</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>+</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3B2;</mo></mrow><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x394;</mo></mrow><mi>W</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="56.519ex" height="2.66ex" viewBox="0 -832 24334.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6E" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-66" x="1519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-69" x="2070" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-64" x="2415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-65" x="2939" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6E" x="3405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-63" x="4006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-65" x="4439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-28" x="4906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-66" x="5295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-69" x="5846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6C" x="6191" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6D" x="6490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-29" x="7368" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-3D" x="8035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-3B1" x="9092" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-2217" x="9954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-53" x="10677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-74" x="11323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-61" x="11684" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-72" x="12214" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-74" x="12665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-54" x="13027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-69" x="13731" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6D" x="14077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-65" x="14955" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-2B" x="15644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-3B2" x="16644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-2217" x="17433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMAIN-394" x="18156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-57" x="18989" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-61" x="20038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-74" x="20567" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-63" x="20929" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-68" x="21362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-54" x="21939" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-69" x="22643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-6D" x="22989" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/surfstudio/blog/461055/&amp;usg=ALkJrhj0egHZ20qT4-K0z7b2RLN9kUew2A#MJMATHI-65" x="23867" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">(</mo><mi>f</mi><mi>i</mi><mi>l</mi><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mo>∗</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>+</mo><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mo>∗</mo><mrow class="MJX-TeXAtom-ORD"><mo>Δ</mo></mrow><mi>W</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> confidence (film) = α * StartTime + β * ΔWatchTime </script></p><br>  di mana <i>StartTime</i> adalah tanggal rilis film, dan <i>ΔWatchTime</i> adalah perbedaan antara tanggal rilis dan tanggal pengguna menonton, dan <i>α</i> dan <i>β</i> adalah hiperparameter. <br><br>  Di sini, istilah pertama bertanggung jawab untuk meningkatkan kecepatan film yang baru saja dirilis, dan yang kedua adalah untuk memperhitungkan kecanduan pengguna terhadap film-film lama.  Jika sebuah film dirilis sejak lama, dan pengguna langsung membelinya, maka hari ini, fakta ini seharusnya tidak diperhitungkan banyak.  Jika ini semacam hal baru, maka kami harus merekomendasikannya kepada lebih banyak pengguna yang juga menonton item baru.  Jika filmnya cukup kuno, dan pengguna hanya menontonnya sekarang, maka ini bisa juga penting bagi mereka yang menyukainya. <br><br>  Ada sedikit kiri - untuk memilah koefisien <i>α</i> dan <i>β</i> .  Tinggalkan malam itu, dan pekerjaan selesai.  Tidak ada asumsi tentang rentang sama sekali, sehingga awalnya besar, dan di bawah ini adalah hasil pencarian optimal lokal. <br><br><img src="https://habrastorage.org/webt/ej/iy/qk/ejiyqkpfmhz43nlifcd3o_zv40o.png"><br><br>  Menggunakan ide ini, model sederhana pada satu matriks memberikan kecepatan 0,03627 pada validasi lokal dan 0,03685 pada LB publik, yang segera terlihat seperti dorongan yang baik dibandingkan dengan hasil sebelumnya.  Pada saat itu, itu membawa saya ke 20 besar. <br><br> <b> №3</b> <br><br>    ,   ,    ,    .     CF   .      : <br><br><img src="https://habrastorage.org/webt/pk/xd/uk/pkxduk8vw3eyyojevyibbesixbi.png"><br><br> ,            25 . <br><br> ,    ,    0.040312    ,         0.03870  0.03990  public/private      14-   . <br><br><h3> Acknowledgments </h3><br>    jupyter notebook —  .      ,     .      output       .      .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cookiecutter-data-science</a> — Ocean.       .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> .                   . <br><br><h3>   ( ) </h3><br>       private  ,                   .    ,                 .   : <br><br><img src="https://habrastorage.org/webt/vq/c1/ds/vqc1dsjoq63esgrlttp3v9-ky2g.jpeg"><br><br> ,   ,        ,   : <br><br><img src="https://habrastorage.org/webt/p3/im/w3/p3imw3yj1ip5bvqorv_uexldawu.jpeg"><br><br>            ,   2 .           .  ,       . <br><br><img src="https://habrastorage.org/webt/i9/rs/gw/i9rsgwcjimnuhjbgqcpmlyaj2rk.jpeg"><br><br><h3>  Kesimpulan </h3><br>  —  .      ,     .    ?   ,        —  feature importance   ,   ,       «»   . ,    . <br><br> ,           .    ; , ,  . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461055/">https://habr.com/ru/post/id461055/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461045/index.html">Dapatkan ekstrak dari Rosreestr melalui FSIS USRN dan python. Bagian 1</a></li>
<li><a href="../id461047/index.html">Menulis atau tidak menulis. Surat kepada pihak berwenang selama acara</a></li>
<li><a href="../id461049/index.html">ONYX BOOX Faust - Dia yang mencari tidak dipaksa untuk berkeliaran</a></li>
<li><a href="../id461051/index.html">10 kesalahan paling umum yang saya temui di Go-proyek</a></li>
<li><a href="../id461053/index.html">Kami menghubungkan peta online ke navigator di smartphone. Bagian 2 - kartu vektor</a></li>
<li><a href="../id461057/index.html">Saluran telegram tentang pengembangan game</a></li>
<li><a href="../id461059/index.html">Menulis Aplikasi Android untuk Penggemar Film - Bagian 1 (Prototyping)</a></li>
<li><a href="../id461061/index.html">Paduan magnesium, batas kembar, dan pemisahan</a></li>
<li><a href="../id461063/index.html">Interaksi R dengan database pada contoh Microsoft SQL Server dan DBMS lainnya</a></li>
<li><a href="../id461067/index.html">65 pertanyaan SQL teratas dari wawancara kerja yang harus Anda persiapkan di tahun 2019. Bagian I</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>