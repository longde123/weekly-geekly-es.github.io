<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìõ üíì üëçüèø Criando uma AI simples de C # no Unity üì≤ üå≤ üëßüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quase todo jogo requer intelig√™ncia artificial (IA) que interaja com o usu√°rio, na maioria das vezes na forma de uma for√ßa hostil ao jogador. Em algun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando uma AI simples de C # no Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419641/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg" alt="imagem"></div><br>  Quase todo jogo requer intelig√™ncia artificial (IA) que interaja com o usu√°rio, na maioria das vezes na forma de uma for√ßa hostil ao jogador.  Em alguns casos, a IA deve ajudar o jogador, em outros deve combat√™-la, mas todos os personagens controlados pelo computador t√™m algumas semelhan√ßas.  Dependendo dos requisitos do projeto, a IA pode usar comportamentos simples ou complexos.  Tais requisitos podem ser diplomacia com outro jogador ou um simples passeio pela plataforma.  Seja como for, √© necess√°rio garantir que a IA fa√ßa seu trabalho com efici√™ncia. <br><br>  Neste projeto, demonstrarei uma intelig√™ncia artificial muito simples.  Suponha que criamos um jogo no qual um jogador deve se aproximar do quartel-general inimigo.  Quando um jogador √© notado por uma c√¢mera de seguran√ßa, inimigos s√£o criados nas proximidades e, por um curto per√≠odo de tempo, perseguem o jogador.  √â isso que estamos implementando no projeto no n√≠vel mais simples.  Ap√≥s a conclus√£o do projeto, voc√™ receber√° o objeto de um jogador controlado, um c√≠rculo usado como c√¢mera de um inimigo e um objeto de inimigo que perseguir√° o jogador quando o objeto da c√¢mera informar sobre sua presen√ßa. <br><a name="habracut"></a><br><h2>  Prepara√ß√£o </h2><br>  Primeiro, precisamos criar um projeto 3D.  Clique no bot√£o <em>Novo</em> na parte superior da janela ap√≥s iniciar o Unity, como mostra a Figura 1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c16/bbf/df1/c16bbfdf150bec53113bc7955f901e64.jpg"></div><br>  <i>Figura 1: criando um novo projeto</i> <br><br>  Nomeie seu projeto de <em>IA</em> e verifique se √© um projeto 3D.  Ap√≥s escolher um local no computador para armazenar o projeto, clique no bot√£o <em>Criar Projeto</em> na parte inferior, mostrado na Figura 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/f46/c21/a3bf46c21915b44510b6052688e4f3c0.jpg"></div><br>  <i>Figura 2: tela de configura√ß√£o do projeto</i> <br><br>  Depois de criar o projeto, a primeira coisa que precisamos fazer √© configurar as pastas na janela <em>Assets</em> para organizar nosso trabalho.  Clique com o bot√£o direito na janela <em>Ativos</em> e selecione <em>Criar ‚Üí Pasta</em> para criar uma nova pasta.  Nomeie essa pasta de <em>Materiais</em> .  Em seguida, crie uma segunda pasta e nomeie-a como <em>Scripts</em> .  A Figura 3 mostra como deve ser. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db9/68a/709/db968a709778fc5f679ea8dcfd525222.jpg"></div><br>  <i>Figura 3: criando uma nova pasta</i> <br><br>  Depois de tudo isso, a janela <em>Assets</em> deve se parecer com a mostrada na Figura 4. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed8/a95/6f8/ed8a956f80044386ef356d0877931184.jpg"></div><br>  <i>Figura 4: Janela <em>Ativos</em> .</i> <br><br>  Em seguida, crie um piso no qual todos os objetos permane√ßam.  Na janela <em>Hierarquia</em> , selecione <em>Criar ‚Üí Objeto 3D ‚Üí Plano</em> para criar um objeto plano que ser√° usado como piso. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e95/770/adc/e95770adc4bcf7c49f6398634cfb7dcc.jpg"></div><br>  <i>Figura 5: Criando um objeto plano.</i> <br><br>  Nomeie esse objeto <em>Floor</em> e altere seu valor <em>X Scale</em> para 7 e o valor <em>Z Scale</em> para 3. Depois disso, a janela <em>Inspector</em> com o objeto <em>Floor</em> selecionado deve se parecer com o mostrado na Figura 6. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/428/36f/88a/42836f88a4e028e07aa3d8d63e8c90c6.jpg"></div><br>  <i>Figura 6: Definindo as propriedades do objeto <em>Floor</em> .</i> <br><br>  Agora, precisamos criar um novo material para o <em>Floor</em> para diferenci√°-lo dos demais objetos que ser√£o colocados na cena.  Na pasta <em>Materiais</em> da janela <em>Ativos</em> , crie um novo material clicando com o bot√£o direito do mouse na janela <em>Ativos</em> e escolhendo <em>Criar ‚Üí Material</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/790/e22/47c/790e2247cd0c57040bc20f46d2df93d0.jpg"></div><br>  <i>Figura 7: criando novo material</i> <br><br>  Quando terminar, nomeie o material como <em>Piso</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb7/3fc/092/bb73fc09241585429e335997e0cc0ac4.jpg"></div><br>  <i>Figura 8: Material do <em>piso</em> .</i> <br><br>  Na parte superior da janela do <em>Inspetor</em> com <em>Piso</em> selecionado, selecione um seletor de cores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a98/e7e/211/a98e7e21145de32f77d8ba0346f36587.jpg"></div><br>  Figura 9: escolhendo um seletor de cores. <br><br>  Obviamente, voc√™ pode escolher qualquer cor para o piso, mas neste exemplo eu escolhi o marrom vermelho, como mostra a Figura 10. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/bed/360/3ecbed3607552e16d2dc9973c35cdceb.jpg"></div><br>  Figura 10: seletor de cores. <br><br>  Selecione o objeto <em>Piso</em> na janela <em>Hierarquia</em> e, no componente <em>Renderizador de malha</em> , selecione a pequena seta ao lado de <em>Materiais</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/061/3f6/545/0613f6545880f95c917b481336c2589a.jpg"></div><br>  <i>Figura 11: Preparando para uma mudan√ßa de material.</i> <br><br>  Arraste o material <em>Piso</em> da janela <em>Ativos</em> para o campo <em>Elemento 0</em> do componente <em>Renderizador de malha</em> na janela <em>Inspetor</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/3fe/247/e7d3fe24725c026b1d95f823ecd6832c.jpg"></div><br>  <i>Figura 12: Definindo o material do <em>piso</em> como o material do objeto <em>Piso</em> .</i> <br><br>  Depois de terminar com o objeto <em>Floor</em> , precisamos criar em torno da √°rea da parede para que o jogador n√£o possa cair da borda.  Volte para <em>Criar ‚Üí Objeto 3D ‚Üí Plano</em> para criar um novo plano.  Chamamos esse plano de <em>parede</em> e o definimos nas mesmas dimens√µes que <em>Floor</em> , ou seja, <em>X Scale</em> com um valor de 7 e <em>Z Scale</em> com um valor de 3. Em seguida, crie mais tr√™s paredes, selecione um objeto e pressione Ctrl + D tr√™s vezes. sexo de acordo com os dados da tabela. <br><br><table><tbody><tr><td>  <strong>T√≠tulo</strong> <br></td><td>  <strong>Posi√ß√£o X</strong> <br></td><td>  <strong>Posi√ß√£o Y</strong> <br></td><td>  <strong>Posi√ß√£o z</strong> <br></td><td>  <strong>Rota√ß√£o x</strong> <br></td><td>  <strong>Rota√ß√£o z</strong> <br></td></tr><tr><td>  Parede <br></td><td>  -35 <br></td><td>  21 <br></td><td>  0 0 <br></td><td>  0 0 <br></td><td>  -90 <br></td></tr><tr><td>  Parede (1) </td><td>  -1 <br></td><td>  11 <br></td><td>  -15 <br></td><td>  90 <br></td><td>  0 0 <br></td></tr><tr><td>  Parede (2) <br></td><td>  -1 <br></td><td>  11 <br></td><td>  13,5 <br></td><td>  -90 <br></td><td>  0 0 <br></td></tr><tr><td>  Parede (3) <br></td><td>  34 <br></td><td>  21 <br></td><td>  0 0 <br></td><td>  0 0 <br></td><td>  90 </td></tr></tbody></table><br>  Tabela 1: Posi√ß√µes e rota√ß√µes de todos os objetos da <em>parede</em> . <br><br>  Depois de concluir tudo isso, voc√™ precisa alterar a posi√ß√£o da c√¢mera para que ela olhe para o ch√£o de cima.  Selecione o objeto <em>C√¢mera principal</em> e defina a <em>posi√ß√£o Y</em> para 30, a <em>posi√ß√£o Z</em> para 0 e a <em>rota√ß√£o X</em> para 80. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3b/794/765/e3b794765d6fcb079014a487f435bf24.jpg"></div><br>  <i>Figura 13: configurando o objeto da c√¢mera.</i> <br><br>  A cena est√° preparada, ent√£o √© hora de criar o personagem do jogador.  Na janela <em>Hierarquia</em> , clique em <em>Criar ‚Üí Objeto 3D ‚Üí Esfera</em> para criar um objeto de esfera.  Nomeie esse objeto como <em>Player</em> e clique no bot√£o <em>Adicionar componente</em> na parte inferior da janela do <em>Inspetor</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/247/713/079/24771307910b2c0aaf9f19d2c74b6d9a.jpg"></div><br>  <i>Figura 14: adicionando um novo componente.</i> <br><br>  Agora encontre o <em>corpo r√≠gido</em> .  Depois disso, selecione o componente <em>Rigidbody</em> na lista e adicione o <em>Rigidbody</em> ao objeto <em>Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3f/01e/f41/f3f01ef412da352b4131c02be07535df.jpg"></div><br>  <i>Figura 15: adicionando um componente <em>Rigidbody</em> .</i> <br><br>  Em seguida, voc√™ precisa atribuir uma tag ao jogador, que mais tarde ser√° √∫til para n√≥s no c√≥digo.  Clique no menu suspenso <em>Tag</em> , no canto superior esquerdo da janela <em>Inspetor</em> , e selecione a tag <em>Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c35/764/224/c35764224a4bb55b3e725c29aa597e19.jpg"></div><br>  <i>Figura 16: Definindo uma nova tag.</i> <br><br>  Precisamos definir a posi√ß√£o do jogador para que ele n√£o fique embaixo do objeto <em>Floor</em> .  No exemplo, coloquei o player no canto superior esquerdo com a <em>posi√ß√£o X</em> igual a 26, a <em>posi√ß√£o Y</em> igual a 1 e a <em>posi√ß√£o Z</em> igual a -9. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b0/a09/4bf/2b0a094bf170d2d2fb3bb11fd54a5ab1.jpg"></div><br>  <i>Figura 17: posicionamento do jogador.</i> <br><br>  Para que nosso c√≥digo futuro funcione corretamente, √© claro que precisamos anex√°-lo ao objeto.  Volte para a janela <em>Hierarquia</em> e desta vez selecione <em>Criar ‚Üí Objeto 3D ‚Üí Cubo</em> .  Chame esse cubo <em>Guard</em> , adicione o componente <em>Rigidbody</em> e o componente <em>NavMesh Agent</em> usando o bot√£o <em>Add Component</em> na janela <em>Inspector</em> .  Em seguida, coloque-o em algum lugar no canto superior esquerdo da cena.  Depois disso, a janela <em>Inspetor</em> do objeto <em>Guard</em> ficar√° assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/698/d9e/79d/698d9e79d24de65f2586482ed3ffa03b.jpg"></div><br>  <i>Figura 18: Objeto de <em>guarda</em> na janela <em>Inspetor</em> .</i> <br><br>  E este objeto deve estar localizado assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/873/202/f6c/873202f6c470ad2b5b2233dd2fbe7a7f.jpg"></div><br>  <i>Figura 19: Coloca√ß√£o do objeto <em>Guard</em> .</i> <br><br>  Finalmente, precisamos de um objeto usado como o "olho" do objeto <em>Guarda</em> , que notificar√° o <em>Guarda</em> que o jogador est√° tocando nele.  Pela √∫ltima vez, v√° para a janela <em>Hierarquia</em> e selecione <em>Criar ‚Üí Objeto 3D ‚Üí Esfera</em> para criar outro objeto de esfera.  Nomeie esse objeto <em>Looker</em> .  Desta vez, n√£o precisamos adicionar outros componentes a ele.  No entanto, redimensionaremos o objeto.  Depois de escolher o <em>Looker</em> , altere as seguintes vari√°veis ‚Äã‚Äãdo componente <em>Transform</em> na janela <em>Inspector</em> . <br><br><ul><li>  <em>Escala X</em> em 9. </li><li>  <em>Escala Y</em> a 0,5. </li><li>  <em>Escala Z</em> em 9. </li></ul><br>  Depois disso, posicione o <em>Looker de</em> forma que ele esteja localizado na parte superior central do piso, como mostra a Figura 20. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/427/aea/021427aea8c433f0d4beb49dcacf75ac.jpg"></div><br>  <i>Figura 20: Localiza√ß√£o do Looker.</i> <br><br>  √â o momento certo para fornecer ao <em>Looker um</em> material exclusivo, para que voc√™ possa ver que vale a pena evitar.  Na pasta <em>Materiais</em> da janela <em>Ativos</em> , clique com o bot√£o direito do mouse e crie um novo material.  Nomeie-o <em>Looker</em> e d√™ uma cor vermelha brilhante.  Depois disso, designe esse material como o material do objeto <em>Looker</em> para alterar sua cor.  Depois disso, a cena deve ficar assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd4/252/185/fd42521851c8f10540156ddd8678ce21.jpg"></div><br>  <i>Figura 21: Objeto <em>visualizador</em> com novo material.</i> <br><br>  A √∫nica coisa que resta para n√≥s √© criar uma malha de navega√ß√£o para o <em>Guard</em> , na qual ele pode se mover.  H√° um menu <em>Janela</em> na parte superior do editor do Unity.  Escolha <em>Janela ‚Üí Navega√ß√£o</em> para abrir a janela <em>Navega√ß√£o</em> mostrada na Figura 22. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/f06/7b1/dc8f067b1f605af22531520c1de2f28f.jpg"></div><br>  <i>Figura 22: Janela de <em>navega√ß√£o</em> .</i> <br><br>  Selecione o objeto <em>Piso</em> na <em>Hierarquia</em> e, na janela <em>Navega√ß√£o</em> , marque a caixa de sele√ß√£o <em>Est√°tica</em> da <em>Navega√ß√£o</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f67/62e/b41/f6762eb4161c64a5388901e73909f1fc.jpg"></div><br>  <i>Figura 23: <em>Est√°tica de navega√ß√£o</em> .</i> <br><br>  Em seguida, selecione a op√ß√£o <em>Assar</em> na parte superior da janela. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/025/7d0/dce/0257d0dce38af90396512cb4bd205316.jpg"></div><br>  <i>Figura 24: Alterne para o menu <em>Bake</em> .</i> <br><br>  O menu <em>Bake √©</em> aberto, no qual voc√™ pode alterar as propriedades da malha de navega√ß√£o que vamos criar.  No nosso exemplo, nada precisa ser alterado.  Basta clicar no bot√£o <em>Bake</em> no canto inferior direito. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/ec7/6b8/dddec76b89364a5f66168b3cbd0c6fbb.jpg"></div><br>  <i>Figura 25: criando uma nova malha de navega√ß√£o.</i> <br><br>  Nesse ponto, o Unity solicitar√° que voc√™ salve a cena.  Salve-o, ap√≥s o qual uma malha de navega√ß√£o ser√° criada.  Agora a cena ficar√° assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg"></div><br>  <i>Figura 26: A cena atual com a malha de navega√ß√£o adicionada.</i> <br><br>  Agora tudo no Unity est√° configurado, ent√£o √© hora de criar os scripts necess√°rios para o projeto funcionar.  Na janela <em>Ativos</em> , clique com o bot√£o direito do mouse e selecione <em>Criar ‚Üí Script C #</em> .  Nomeie esse script como <em>Player</em> .  Repita esta opera√ß√£o mais duas vezes, criando scripts com os nomes <em>Guard</em> e <em>Looker</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/12e/fb2/26b/12efb226b1de229b7c9b13eb69f0f483.jpg"></div><br>  <i>Figura 27: criando um novo script.</i> <br><br>  Depois disso, a pasta <em>Scripts</em> na janela <em>Assets</em> ficar√° assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/a2f/2a5/e7da2f2a5c94ee8683aed4179721e9bb.jpg"></div><br>  <i>Figura 28: Pasta <em>Scripts</em> .</i> <br><br>  Primeiro, come√ßaremos a escrever o c√≥digo de script do <em>Player</em> .  Clique duas vezes no script <em>Player</em> na janela <em>Assets</em> para abrir o Visual Studio e come√ßar a criar o c√≥digo. <br><br><h2>  C√≥digo </h2><br>  O script <em>Player</em> √© bastante simples, basta permitir que o usu√°rio mova o objeto bola.  Sob a declara√ß√£o de classe, precisamos obter um link para o componente <em>Rigidbody</em> que criamos anteriormente no projeto. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rigidbody rb;</code> </pre> <br>  Logo depois, na fun√ß√£o <strong>Start</strong> , comandamos o Unity para definir o atual componente <em>Rigidbody</em> do objeto <em>Player</em> como <em>rb</em> . <br><br><pre> <code class="cs hljs">rb = GetComponent&lt;Rigidbody&gt;();</code> </pre> <br>  Depois disso, o script <em>Player</em> ficar√° assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/017/686/297/017686297368cffbd3ea3980b6036181.jpg"></div><br>  <i>Figura 29: Script do <em>jogador</em> no momento.</i> <br><br>  Agora que o valor <em>rb</em> est√° atribu√≠do, precisamos permitir que o objeto <em>Player se</em> mova quando pressionamos as teclas de seta.  Para mover o objeto, usaremos a f√≠sica, aplicando for√ßa ao objeto quando o usu√°rio pressionar as teclas de seta.  Para fazer isso, basta adicionar o seguinte c√≥digo √† fun√ß√£o <em>Atualizar</em> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.UpArrow)) rb.AddForce(Vector3.forward * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.DownArrow)) rb.AddForce(Vector3.back * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftArrow)) rb.AddForce(Vector3.left * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.RightArrow)) rb.AddForce(Vector3.right * <span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre> <br>  Com isso, conclu√≠mos o script do <em>Player</em> .  O script final ter√° a seguinte apar√™ncia: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/82e/fc6/3cf82efc6aaef7dc0e7c8c6f21b503ff.jpg"></div><br>  <i>Figura 30: o script <em>Player</em> conclu√≠do.</i> <br><br>  Salve seu trabalho e retorne ao Unity.  Desta vez, selecione o script <em>Guard</em> na janela <em>Assets</em> .  Para fazer o c√≥digo do <em>Guard</em> funcionar, voc√™ precisa adicionar a constru√ß√£o using na parte superior do script. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.AI;</code> </pre> <br>  Em seguida, declare as seguintes vari√°veis ‚Äã‚Äãimediatamente ap√≥s a declara√ß√£o da classe. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject player; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> NavMeshAgent navmesh;</code> </pre> <br>  O objeto <strong>Player</strong> √© usado como o valor da vari√°vel <strong>player</strong> do objeto <em>Guard</em> .  Isso ser√° √∫til mais tarde, quando comandarmos o objeto <em>Guarda</em> para perseguir o jogador.  Em seguida, a vari√°vel <strong>navmesh</strong> √© <strong>declarada</strong> para receber o componente <em>NavMeshAgent</em> do objeto.  N√≥s o usaremos mais tarde quando o <em>Guarda</em> come√ßar a perseguir o jogador depois que ele descobrir que o jogador est√° tocando o objeto <em>Looker</em> .  Na fun√ß√£o <strong>Start</strong> , precisamos definir o valor da vari√°vel <em>navmesh para o</em> componente <em>NavMesh Agent do</em> objeto: <br><br><pre> <code class="cs hljs">navmesh = GetComponent&lt;NavMeshAgent&gt;();</code> </pre> <br>  Em seguida, na fun√ß√£o <em>Atualizar</em> , adicionamos uma √∫nica linha de c√≥digo: <br><br><pre> <code class="cs hljs">navmesh.destination = player.transform.position;</code> </pre> <br>  Esta linha define o destino para o objeto <em>Guard</em> .  No nosso caso, ele assumir√° a posi√ß√£o atual do objeto <em>Player</em> e se mover√° para este ponto.  Ap√≥s a opera√ß√£o, o objeto perseguir√° constantemente o jogador.  A quest√£o √©: como √© realizado o processo de resposta?  N√£o ser√° codificado no script <em>Guard</em> , mas no script <em>Looker</em> .  Antes de passar para o script Looker, observe a Figura 31 para verificar seu c√≥digo de script do <em>Guard</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/412/a11/dfb412a11448f070d31932d6c9e4c6c1.jpg"></div><br>  <i>Figura 31: o script <em>Guard</em> conclu√≠do.</i> <br><br>  Dentro do <em>Looker,</em> novamente precisamos declarar as seguintes vari√°veis: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject guard; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> movingDown;</code> </pre> <br>  Depois disso, comentamos a fun√ß√£o <em>Iniciar</em> , da qual n√£o precisamos neste script.  Vamos para a fun√ß√£o <em>Update</em> e adicione o seguinte c√≥digo: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (movingDown == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) transform.position -= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> transform.position += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &lt; <span class="hljs-number"><span class="hljs-number">-10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset -= Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reset &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  √â aqui que as principais a√ß√µes do projeto ocorrem, ent√£o vamos analisar o c√≥digo.  Primeiramente, dependendo do valor da vari√°vel booleana <strong>movingDown</strong> , o objeto ao qual esse script est√° anexado ser√° movido para cima ou para baixo.  Assim que ele chegar a um certo ponto, ele mudar√° de dire√ß√£o.  Em seguida, o <em>Looker</em> reduzir√° o valor de redefini√ß√£o com base em tempo real.  Assim que o cron√¥metro se tornar menor que zero, ele pegar√° o script <em>Guard do</em> objeto <em>Guard</em> e o desativar√°. Depois disso, o objeto <em>Guard</em> come√ßar√° a se mover para a √∫ltima posi√ß√£o conhecida do jogador at√© ent√£o e depois parar√°.  <em>O Looker</em> tamb√©m liga novamente o colisor para que todo o processo possa come√ßar de novo.  Agora, nosso script fica assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac9/dfc/7ec/ac9dfc7ec347c3422151e55b43682c3e.jpg"></div><br>  <i>Figura 32: Script do <em>visualizador</em> .</i> <br><br>  Falando em coletores: √© hora de criar um c√≥digo de conflito que redefina o timer do <em>Looker</em> e inclua o script <em>Guard</em> .  Na fun√ß√£o <em>Atualizar</em> , crie o seguinte c√≥digo: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collision collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (collision.gameObject.tag == <span class="hljs-string"><span class="hljs-string">"Player"</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  <em>O OnCollisionEnter</em> Unity o reconhece automaticamente como um c√≥digo de colis√£o e, portanto, o executa quando ocorre uma colis√£o com outro objeto.  No nosso caso, ele primeiro verifica se o objeto em colis√£o possui uma tag <em>Player</em> .  Caso contr√°rio, ele ignora o restante do c√≥digo.  Caso contr√°rio, ele ativa o script <em>Guard</em> , define o timer de <em>redefini√ß√£o</em> para 5 (ou seja, cinco segundos) e desativa o colisor para que o jogador ainda possa se mover pelo objeto e n√£o ficar preso acidentalmente no objeto <em>Looker</em> .  A fun√ß√£o √© mostrada na Figura 33. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ad/11c/5ce/5ad11c5cee401f612207f76322f6afc1.jpg"></div><br>  <i>Figura 33: C√≥digo de colis√£o para o</i> Looker. <br><br>  √â tudo o que o c√≥digo do projeto est√° pronto!  Voc√™ pode fazer mais algumas coisas antes de terminar o projeto.  Salve todo o trabalho e retorne ao Unity. <br><br><h2>  Conclus√£o do projeto </h2><br>  Para concluir o projeto, basta anexar scripts aos objetos correspondentes e definir v√°rias vari√°veis.  Primeiro, v√° da janela <em>Navega√ß√£o</em> para a janela <em>Inspetor</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b1/4a4/a83/5b14a4a8305887f6ce685516c0490724.jpg"></div><br>  <i>Figura 34: transi√ß√£o para a janela</i> Inspetor. <br><br>  Depois disso, vamos come√ßar com o objeto <em>Player</em> .  Selecione-o na janela <em>Hierarquia</em> e, na parte inferior da janela <em>Inspetor</em> , clique no bot√£o <em>Adicionar componente</em> e adicione o script <em>Player</em> .  Isso completa o objeto <em>Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d03/fb6/745/d03fb67452e138ccd4a2b3a838e53615.jpg"></div><br>  <i>Figura 35: Componente de script do</i> Player. <br><br>  Em seguida, selecione o objeto <em>Guard</em> .  Como antes, anexe o script <em>Guard</em> ao objeto.  Desta vez, precisamos dizer ao <em>guarda</em> quem √© o jogador.  Para fazer isso, arraste o objeto <em>Player</em> da <em>Hierarquia</em> para o campo <em>Player</em> do componente de script <em>Guard</em> , como mostra a Figura 36. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/14a/6f7/fae14a6f76221641adcdeca2d5993f84.jpg"></div><br>  <i>Figura 36: Fazendo com que o <em>Player</em> objete o valor do campo <em>Player</em> .</i> <br><br>  Tamb√©m precisamos desativar o script <em>Guard</em> .  Em nosso projeto, <em>Guard</em> perseguir√° o jogador depois de ativar seu script.  Esse script de <em>guarda</em> deve ser inclu√≠do somente depois que o jogador tocar no objeto <em>Looker</em> .  Tudo que voc√™ precisa fazer √© desmarcar a caixa ao lado do texto <em>Guard (Script)</em> no componente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed2/ee4/093/ed2ee40931919ee69fa013f005e4a8b5.jpg"></div><br>  <i>Figura 37: Desativando o script <em>Guard</em> .</i> <br><br>  Por fim, vamos para o objeto <em>Looker</em> e anexamos o script <em>Looker</em> .  Dessa vez, o objeto <em>Looker</em> precisar√° de um objeto <em>Guard</em> como o valor de sua vari√°vel <em>Guard</em> .  Assim como atribu√≠mos o objeto <em>Player</em> √† vari√°vel <em>Player</em> do script <em>Guard</em> , faremos o mesmo com o objeto <em>Guard</em> e o script <em>Looker</em> .  Arraste o <em>Guard</em> da <em>Hierarquia</em> para o campo <em>Guard</em> do script <em>Looker</em> .  E o projeto est√° conclu√≠do!  Clique no bot√£o Play na parte superior do editor do Unity para testar seu projeto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/272/4ed/d5b2724edf53e1bc2e2c06951ef38cdc.jpg"></div><br>  <i>Figura 38: Testando um projeto.</i> <br><br>  Tente mover o objeto <em>Player</em> para o objeto <em>Looker</em> (lembre-se de que o movimento √© feito com setas!).  Observe que, depois disso, o objeto <em>Guard</em> come√ßar√° a perseguir o jogador.  Ele continuar√° a busca por cerca de 5 segundos, ap√≥s o que desistir√°. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf2/4ba/729/bf24ba729b9457d0c038c4c50c5464a1.jpg"></div><br>  <i>Figura 39: Um projeto totalmente conclu√≠do em a√ß√£o.</i> <br><br><h2>  Conclus√£o </h2><br>  Essa IA √© muito simples, mas pode ser facilmente expandida.  Suponha que, se imaginarmos que o objeto <em>Looker</em> √© uma c√¢mera, e o guarda o olhar para encontr√°-lo, ser√° l√≥gico atribuir ao objeto o seu pr√≥prio par de olhos.  O jogador pode se aproximar das c√¢meras, mas deve levar em conta os olhos do guarda.  Voc√™ tamb√©m pode combinar este projeto com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conceito de encontrar o caminho</a> : d√™ ao guarda o caminho que ele seguir√°, criando um ambiente mais interessante para o jogador. <br><br>  Uma IA t√£o simples pode ser desenvolvida de v√°rias maneiras diferentes.  Voc√™ pode n√£o querer fazer nada do que precede e decidir fazer algo de sua prefer√™ncia.  Eu aconselho voc√™ a experimentar, talvez voc√™ tenha a id√©ia de um projeto interessante, que vale a pena levar ao fim. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419641/">https://habr.com/ru/post/pt419641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419625/index.html">Vis√£o geral dos meus recursos favoritos do PHP7</a></li>
<li><a href="../pt419627/index.html">Estamos √† procura de palestrantes no Moscow Data Science Major</a></li>
<li><a href="../pt419633/index.html">Agora, todas as principais listas de certificados raiz s√£o confi√°veis ‚Äã‚Äãpelo Let's Encrypt</a></li>
<li><a href="../pt419635/index.html">Lan√ßamento da vers√£o est√°vel do Dart 2.0 e Dart Web Platform</a></li>
<li><a href="../pt419637/index.html">[Tradu√ß√£o] Como Graal - Java JVM JVM Compiler funciona</a></li>
<li><a href="../pt419643/index.html">Confer√™ncia de Engenharia de Software EPAM de Minsk: Realize</a></li>
<li><a href="../pt419647/index.html">Semin√°rio ‚ÄúBlack Friday em e-commerce. Segredos de sobreviv√™ncia, 16 de agosto de Moscou</a></li>
<li><a href="../pt419649/index.html">Um pouco sobre gatos ou qual CAT escolhemos para podcasts de sincroniza√ß√£o</a></li>
<li><a href="../pt419651/index.html">Nem GA nem YM. Como criamos nosso pr√≥prio fluxo de cliques</a></li>
<li><a href="../pt419653/index.html">Como fazer pesquisas de usu√°rios no GitHub sem React + RxJS 6 + Recompose</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>