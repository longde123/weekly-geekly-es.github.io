<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏩 🛀🏻 🧚🏻 Folie et succès du code de base de données Oracle 🤰 🍒 👩🏻‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cette semaine, les utilisateurs de Hacker News ont décidé de discuter de la question "Quelle est la quantité maximale de mauvais code - mais qui fonct...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Folie et succès du code de base de données Oracle</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429946/"> Cette semaine, les utilisateurs de Hacker News ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">décidé de discuter de la question</a> "Quelle est la quantité maximale de mauvais code - mais qui fonctionne toujours - que vous avez vue?"  (plus tard, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les utilisateurs de Reddit les ont rejoints</a> ).  Dans les commentaires, beaucoup d'histoires «drôles» ont été racontées sur des choses que nous rencontrons de temps en temps;  mais l'histoire du code «SGBD avancé utilisé par la plupart des sociétés du Fortune 100» a retenu le plus l'attention. <br><br>  Le gagnant de la nomination Lovecraft Horror était à juste titre l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">histoire d'un ancien développeur Oracle</a> qui a travaillé sur Oracle Database pendant le développement de la version 12.2.  La base de code du SGBD à cette époque était de 25 millions de lignes en C - et dès que vous n'avez modifié qu'une seule de ces lignes, des <i>milliers de</i> tests écrits plus tôt se sont rompus. <br><br>  Au fil des ans, plusieurs générations de programmeurs ont travaillé sur le code, qui ont été régulièrement pourchassés par des délais stricts - et grâce à cela, le code pourrait se transformer en un véritable cauchemar.  Aujourd'hui, il se compose de «morceaux» de code complexes qui sont responsables de la logique, de la gestion de la mémoire, du changement de contexte et bien plus encore;  ils sont connectés les uns aux autres à l'aide de <i>milliers de</i> drapeaux différents.  Tout le code est interconnecté par une mystérieuse macro qui ne peut pas être déchiffrée sans recourir à un ordinateur portable, dans lequel vous devez écrire ce que font les parties pertinentes de la macro.  En conséquence, un développeur peut prendre un jour ou deux juste pour comprendre ce que fait réellement la macro. <br><a name="habracut"></a><br>  Afin de prédire le comportement du code dans l'un ou l'autre cas, vous devez comprendre et vous rappeler quelles valeurs et conséquences 20 (voire une centaine) drapeaux peuvent avoir.  La situation est aggravée par le fait que divers développeurs ont utilisé leurs propres types, qui étaient essentiellement la même chose (par exemple, int32) - et presque personne ne risquerait de toucher à un tel héritage (on peut dire avec certitude que c'était le cas dans Base de code Oracle 8i). <br><br>  La question se pose: comment, avec tout cela, Oracle Database est-il toujours capable de rester debout?  Le secret réside dans des millions de tests.  Leur implémentation complète peut prendre de 20 à 30 heures (en même temps, elles sont effectuées réparties sur un cluster de test de 100 à 200 serveurs). <br><br>  L'équipe qui a travaillé sur le produit à la fin des années 90 et a adhéré aux idées du TDD (développement piloté par les tests), avait l'opinion suivante: «les tests automatisés signifient que vous n'êtes pas obligé d'écrire du code qui peut être compris - à la place, vous devriez pensez aux tests. "  À l'avenir, les développeurs ont été contraints d'adhérer aux principes qu'ils ont posés, et maintenant nous assistons dans la pratique à ce que cette idée s'est transformée à long terme - avec tous ses avantages et inconvénients. <br><br>  Aujourd'hui, le processus de correction d'un nouveau bogue dans Oracle Database prend de plusieurs semaines à plusieurs mois.  Dans un premier temps, le développeur ne doit passer plusieurs jours que pour déterminer les indicateurs dont il a besoin (dont la mystérieuse interaction provoque un bug), après quoi il doit souvent ajouter son propre indicateur, qui sera responsable du traitement d'un script spécifique à l'origine du bug. <br><br>  Ensuite, il envoie le code pour les tests, et le lendemain, il passe calmement à une autre tâche, en attendant que le cluster de tests assemble un nouvel assemblage Oracle DB et exécute tous les tests sur celui-ci.  Si le développeur a de la chance, environ 100 tests «rougiront»;  sinon (et cette option se produit plus souvent) - environ 1000, et il devra vérifier laquelle de ses hypothèses sur le fonctionnement du code existant s'est avérée incorrecte;  il est tout à fait possible qu'il se rende compte qu'il a besoin d'étudier une douzaine de drapeaux différents, qui ont participé de façon non évidente aux travaux du code qu'il a changé. <br><br>  Il devra répéter ce processus pendant quelques semaines avant que la chance ne lui sourie enfin et que tous les tests passent enfin.  Après quoi, il devra écrire plusieurs dizaines de tests - afin de s'assurer que le développeur, qui va déranger son code à l'avenir, ne cassera pas sa «correction».  Ensuite, les améliorations seront envoyées à un examen, qui peut prendre de plusieurs semaines à quelques mois, après quoi le bogue sera finalement fusionné dans la branche de travail principale. <br><br>  En raison du fait qu'il faut au moins une journée pour construire le SGBD et exécuter les tests, il est prévu que chaque développeur travaille simultanément sur 2-3 bugs et bascule entre eux en attendant les résultats du test. <br><br>  Si vous pensiez que la vie des développeurs ajoutant de nouvelles fonctionnalités au SGBD est plus facile, alors vous êtes en vain.  L'ajout d'une nouvelle fonctionnalité, comme un nouveau mode d'authentification, peut prendre de 6 mois à un an, dans des cas particulièrement avancés - jusqu'à deux ans. <br><br>  Dans le cas décrit, TDD permet de ne pas émietter le code "spaghetti", dans lequel il est déjà extrêmement difficile de comprendre quelque chose, et d'avoir un produit fonctionnel en sortie.  Dans le même temps, les coûts continuent de croître et la qualité du nouveau code laisse souvent à désirer.  Non seulement une équipe de développeurs des États-Unis, mais aussi une équipe de l'Inde travaille sur le SGBD, donc certains développeurs Oracle, selon la tradition établie, leur reprochent la qualité du code.  D'autres ne sont pas d'accord avec eux et, d'après le changelog, ils disent que la qualité du code ne dépend pas de la géographie de l'équipe et qu'un mauvais code «vole» périodiquement des deux équipes.  Un problème très sérieux pour le produit est que les développeurs perçoivent le projet comme «entrant dans l'industrie» et travaillent sur le SGBD depuis moins de 1 à 2 ans;  pendant ce temps, il est impossible de comprendre de manière significative les subtilités du projet. <br><br>  Selon un autre développeur qui portait la base de code Oracle 8i vers l'une des versions Unix à la fin des années 90, le code était déjà à cette époque une boule de «spaghetti» qui était complètement impossible à comprendre complètement.  Un autre développeur qui a travaillé avec le code SGBD à la fin des années 80 affirme que la base de code était un énorme tas de sources C et un ensemble de makefiles pour l'assemblage - dont beaucoup étaient beaucoup plus compliqués que le code du noyau lui-même.  Bien sûr, cela vaut la peine d’être réaliste - à peine la situation est-elle meilleure dans des produits similaires, leaders de l’industrie, dont le développement s’effectue depuis plusieurs décennies. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429946/">https://habr.com/ru/post/fr429946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429934/index.html">Qu'y a-t-il?</a></li>
<li><a href="../fr429936/index.html">Dois-je attendre Android sur iOS de Parallels?</a></li>
<li><a href="../fr429938/index.html">Quelle est la vitesse de R pour la productivité?</a></li>
<li><a href="../fr429940/index.html">Pourquoi les plantes ont besoin du machine learning</a></li>
<li><a href="../fr429942/index.html">Obtenez de la musique VK via une API tierce</a></li>
<li><a href="../fr429948/index.html">Pourquoi les chefs de produit chez Fintech sont nécessaires</a></li>
<li><a href="../fr429950/index.html">Comment maintenir de saines habitudes de communication des équipes distantes</a></li>
<li><a href="../fr429952/index.html">Le passé, le présent et l'avenir de Docker et d'autres environnements d'exécution de conteneurs dans Kubernetes</a></li>
<li><a href="../fr429954/index.html">Le programmeur des bookmakers irlandais</a></li>
<li><a href="../fr429956/index.html">Intégration continue dans Yandex. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>