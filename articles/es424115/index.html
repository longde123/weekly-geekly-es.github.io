<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•à üçë üóΩ Casos de uso o falta de equilibradores de carga ‚úåüèº üî∑ ‚òïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace un par de a√±os, complet√© un proyecto de migraci√≥n en la red de uno de nuestros clientes, la tarea era cambiar la plataforma, que distribuye la ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Casos de uso o falta de equilibradores de carga</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424115/">  Hace un par de a√±os, complet√© un proyecto de migraci√≥n en la red de uno de nuestros clientes, la tarea era cambiar la plataforma, que distribuye la carga entre los servidores.  El plan de servicio al cliente ha evolucionado durante casi 10 a√±os junto con los nuevos desarrollos en la industria del centro de datos, por lo que el cliente "exigente", en el buen sentido de la palabra, esperaba una soluci√≥n que satisficiera no solo los requisitos de tolerancia a fallas de equipos de red, equilibradores de carga y servidores , pero tambi√©n poseer√≠a propiedades tales como escalabilidad, flexibilidad, movilidad y simplicidad.  En este art√≠culo tratar√© de presentar, de manera simple y compleja, los principales ejemplos del uso de equilibradores de carga sin referencia al fabricante, sus caracter√≠sticas y m√©todos de emparejamiento con la red de entrega de datos. <br><a name="habracut"></a><br>  Los equilibradores de carga ahora se denominan cada vez m√°s Controladores de entrega de aplicaciones (ADC).  Pero si las aplicaciones se ejecutan en el servidor, ¬øpor qu√© deber√≠an entregarse en alg√∫n lugar?  Por razones de tolerancia a fallas o escalado, la aplicaci√≥n se puede ejecutar en m√°s de un servidor, en este caso necesita un tipo de servidor proxy inverso que oculte la complejidad interna de los consumidores, seleccione el servidor deseado, le entregue una solicitud y se asegure de que el servidor devuelva el correcto , desde el punto de vista del protocolo, el resultado, de lo contrario, seleccionar√° otro servidor y enviar√° una solicitud all√≠.  Para implementar estas funciones, el ADC debe comprender la sem√°ntica del protocolo de capa de aplicaci√≥n con el que funciona; esto le permite configurar reglas espec√≠ficas de aplicaci√≥n para la entrega de tr√°fico, el an√°lisis del resultado y la verificaci√≥n del estado del servidor.  Por ejemplo, una comprensi√≥n de la sem√°ntica de HTTP hace posible la configuraci√≥n cuando HTTP solicita <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /docs/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.html HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> Host: www.company.com Accept-<span class="hljs-keyword"><span class="hljs-keyword">Language</span></span>: en-us Accept-<span class="hljs-keyword"><span class="hljs-keyword">Encoding</span></span>: gzip, deflate</code> </pre> <br>  se env√≠an a un grupo de servidores con la posterior compresi√≥n de los resultados y el almacenamiento en cach√©, y las solicitudes <br><br><pre> <code class="hljs pgsql">POST /api/<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>-put HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> HOST: b2b.company.com X-Auth: <span class="hljs-number"><span class="hljs-number">76</span></span>GDjgtgdfsugs893Hhdjfpsj Content-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>: application/<span class="hljs-type"><span class="hljs-type">json</span></span></code> </pre><br>  procesado de acuerdo con reglas completamente diferentes. <br><br>  Comprender la sem√°ntica del protocolo le permite organizar la sesi√≥n al nivel de los objetos del protocolo de la aplicaci√≥n, por ejemplo, usando encabezados HTTP, cookie RDP o solicitudes multiplex para llenar una sesi√≥n de transporte con muchas solicitudes de usuario si el nivel de aplicaci√≥n del protocolo lo permite. <br>  El alcance de la aplicaci√≥n de ADC a veces se imagina irrazonablemente solo sirviendo el tr√°fico HTTP, de hecho, la lista de protocolos compatibles para la mayor√≠a de los fabricantes es mucho m√°s amplia.  Incluso trabajando sin comprender la sem√°ntica del protocolo de la capa de aplicaci√≥n, ADC puede ser √∫til para resolver varias tareas, por ejemplo, particip√© en la construcci√≥n de una granja virtual autosuficiente de servidores SMTP, durante los ataques de spam, el n√∫mero de instancias aumenta usando el control de retroalimentaci√≥n a lo largo de la cola de mensajes para proporcionar un tiempo satisfactorio para verificar mensajes con algoritmos de uso intensivo de recursos.  Durante la activaci√≥n, el servidor se registr√≥ con ADC y recibi√≥ su parte de las nuevas sesiones TCP.  En el caso de SMTP, dicho esquema de operaci√≥n estaba justificado debido a la alta entrop√≠a de las conexiones en la red y los niveles de transporte; para una distribuci√≥n uniforme de la carga durante los ataques de spam ADC, solo se requiere soporte TCP.  Se puede usar un esquema similar para construir una granja de servidores de bases de datos, DNS, DHCP, AAA o grupos de servidores de acceso remoto altamente cargados cuando los servidores pueden considerarse equivalentes en el dominio y cuando sus caracter√≠sticas de rendimiento no difieren demasiado entre s√≠.  No profundizar√© en el tema de las caracter√≠sticas del protocolo, este aspecto es demasiado extenso para indicarlo en la introducci√≥n, si algo parece interesante, escriba, tal vez sea una ocasi√≥n para un art√≠culo con una presentaci√≥n m√°s profunda de alguna aplicaci√≥n, y ahora vamos al grano. <br><br>  Muy a menudo, ADC cierra la capa de transporte, por lo que la sesi√≥n TCP de extremo a extremo entre el consumidor y el servidor se vuelve compuesta, el consumidor establece una sesi√≥n con ADC y ADC con uno de los servidores. <br><br><img src="https://habrastorage.org/webt/qi/_9/vg/qi_9vglsdqfiqbtzbrsh-egpvwk.png" alt="imagen"><br>  <i>Fig. 1</i> <br><br>  La configuraci√≥n de red y la configuraci√≥n de direccionamiento deben proporcionar tal avance de tr√°fico para que dos partes de la sesi√≥n TCP pasen por el ADC.  La opci√≥n m√°s f√°cil para hacer que el tr√°fico de la primera parte llegue al ADC es asignar una direcci√≥n de servicio a una de las direcciones de la interfaz ADC, con la segunda parte son posibles las siguientes opciones: <br><br><ol><li>  ADC como la puerta de enlace predeterminada para la red del servidor; </li><li>  Transmitir a direcciones de consumidores ADC en una de sus direcciones de interfaz. </li></ol><br>  De hecho, una vista un poco m√°s realista del primer esquema de aplicaci√≥n se ve as√≠, esta es la base a partir de la cual comenzaremos: <br><br><img src="https://habrastorage.org/webt/6z/y8/5y/6zy85y1fcajgfndoybabz9geikk.png" alt="imagen"><br>  <i>Fig.2</i> <br><br>  El segundo grupo de servidores puede ser bases de datos, back-end de aplicaciones, almacenamiento en red o front-end para otro conjunto de servicios en el caso de descomposici√≥n de una aplicaci√≥n cl√°sica en microservicios.  Este grupo de servidores puede ser un dominio de enrutamiento separado, con sus propias pol√≠ticas, ubicado en otro centro de datos, o incluso puede estar aislado por razones de seguridad.  Los servidores rara vez se ubican en un segmento; m√°s a menudo se colocan en segmentos para su prop√≥sito previsto con pol√≠ticas de acceso claramente reguladas, la figura muestra esto como un firewall. <br><br>  Los estudios muestran que las aplicaciones modernas de varios niveles generan m√°s tr√°fico de oeste a este, y es poco probable que desee que todo el tr√°fico intrac√≥digo / entre segmentos pase a trav√©s del ADC.  Los conmutadores de la Figura 2 no son necesariamente f√≠sicos: los dominios de enrutamiento se pueden implementar utilizando entidades virtuales, que se denominan enrutador virtual, vrf, vr, instancia vpn o una tabla de enrutamiento virtual para diferentes fabricantes. <br><br>  Por cierto, existe una variante de emparejamiento con la red, sin requerir simetr√≠a de los flujos de tr√°fico del consumidor al ADC y del ADC a los servidores, es muy demandado en casos de sesiones de larga duraci√≥n, en las que se transmite una gran cantidad de tr√°fico en una direcci√≥n, por ejemplo, transmisi√≥n o transmitir contenido de video.  En este caso, el ADC solo ve el flujo del cliente a los servidores, este flujo se entrega a la direcci√≥n de la interfaz del ADC y despu√©s de un procesamiento simple, que consiste en reemplazar la direcci√≥n MAC con la interfaz MAC de uno de los servidores, la solicitud se env√≠a al servidor donde la direcci√≥n de servicio se asigna a una de las interfaces l√≥gicas.  El tr√°fico inverso del servidor al consumidor pasa por alto el ADC de acuerdo con la tabla de enrutamiento del servidor.  Admitir un solo dominio de difusi√≥n para todos los front-end puede ser muy dif√≠cil, adem√°s, la capacidad de ADC para analizar respuestas y admitir la capacidad de sesi√≥n en este caso es muy limitada, de hecho, es solo un cambio, por lo que esta opci√≥n no se considera m√°s, aunque algunas limitaciones Se pueden utilizar tareas. <br><br><img src="https://habrastorage.org/webt/hm/xb/vs/hmxbvspqknpgsvws5uqbycydaps.png" alt="imagen"><br>  <i>Fig.3</i> <br><br>  Entonces, tenemos un centro de datos b√°sicos, que se muestra en la Figura 2, pensemos en qu√© problemas pueden llevar el centro de datos b√°sicos a la evoluci√≥n, veo dos temas para el an√°lisis: <br><br><ol><li>  Supongamos que el subsistema de conmutaci√≥n est√° completamente reservado, no pensemos c√≥mo ni por qu√©, el tema es demasiado extenso.  Las aplicaciones se ejecutan en varios servidores y se respaldan con ADC, pero ¬øc√≥mo reservo el propio ADC? </li><li>  Si el an√°lisis muestra que la pr√≥xima carga m√°xima estacional puede exceder las capacidades de ADC, usted, por supuesto, piensa en la escalabilidad. </li></ol><br>  Estas tareas son similares en que, en el proceso de resolverlas, la cantidad de instancias de ADC seguramente aumentar√°.  Al mismo tiempo, la tolerancia a fallos se puede organizar de acuerdo con el esquema Activo / Respaldo y Activo / Activo, y el escalado solo se puede realizar de acuerdo con el esquema Activo / Activo.  Tratemos de resolverlos individualmente y veamos qu√© propiedades tienen las diferentes soluciones. <br><br>  Los ADC de muchos fabricantes se pueden considerar como elementos de una infraestructura de red, RIP, OSPF, BGP: todo esto est√° ah√≠, lo que significa que puede construir un esquema trivial de respaldo activo / de respaldo.  El ADC activo pasa los prefijos de servicio al enrutador ascendente y recibe la ruta predeterminada para completar su tabla y transferirla al centro de datos a la tabla de enrutamiento virtual correspondiente.  El ADC de respaldo hace lo mismo, pero, utilizando la sem√°ntica del protocolo de enrutamiento seleccionado, genera anuncios menos atractivos.  Con este enfoque, los servidores pueden ver la direcci√≥n IP real del consumidor, ya que no hay raz√≥n para usar la traducci√≥n de direcciones.  Este esquema tambi√©n funciona correctamente si hay m√°s de un enrutador ascendente, pero para evitar una situaci√≥n en la que el ADC activo pierde el valor predeterminado y la conectividad con el enrutador, mientras sigue recibiendo el valor predeterminado del ADC de respaldo y contin√∫a anunciando hacia el centro de datos, trate de evitar la proximidad entre ADC y el uso de rutas est√°ticas. <br><br><img src="https://habrastorage.org/webt/l8/bw/di/l8bwdie61pvk2wibngd9jwgcco4.png" alt="imagen"><br>  <i>Fig. 4</i> <br><br>  Si los servidores no necesitan operar con direcciones IP de consumo reales, o el protocolo de la capa de aplicaci√≥n le permite incrustarlo en encabezados, como HTTP, el esquema se convierte en Activo / Activo con una dependencia casi lineal del rendimiento en la cantidad de ADC.  En el caso de m√°s de un enrutador ascendente, debe asegurarse de que el tr√°fico entrante venga en porciones m√°s o menos uniformes.  Esta tarea se puede resolver f√°cilmente si en el dominio de enrutamiento ECMP la transferencia comienza a estos enrutadores, si es dif√≠cil o si el dominio de enrutamiento no es atendido por usted, puede usar conexiones de malla completa entre ADX y los enrutadores para que la transferencia ECMP comience directamente a ellos. <br><br><img src="https://habrastorage.org/webt/z3/wr/bu/z3wrbuedtvq62eabsourkdgxkvy.png" alt="imagen"><br>  <i>Fig.5</i> <br><br>  Al comienzo de esta parte, escrib√≠ que la tolerancia a fallas y la escala son dos grandes diferencias.  Las soluciones a estos problemas tienen diferentes niveles de utilizaci√≥n de recursos, si est√° dise√±ando un esquema Activo / En espera, debe soportar el hecho de que la mitad de los recursos estar√°n inactivos.  Y si sucede que necesita dar el siguiente paso cuantitativo, prep√°rese para multiplicar los recursos requeridos por dos m√°s en el futuro. <br><br>  Los beneficios de Active / Active comienzan a aparecer cuando opera con m√°s de dos dispositivos.  Suponga que necesita garantizar el rendimiento de 8 unidades arbitrarias (8 mil conexiones por segundo u 8 millones de sesiones simult√°neas) y proporcionar un solo escenario de falla del dispositivo, en la versi√≥n Active / Active solo necesita tres instancias ADC con una capacidad de 4, en el caso de Active / Standby: dos por 8. Si traduce estos n√∫meros en recursos que est√°n inactivos, obtendr√° un tercio a la mitad.  Se puede usar el mismo principio de c√°lculo para estimar la proporci√≥n de conexiones rotas durante un per√≠odo de falla parcial.  Con el aumento en el n√∫mero de instancias Activo / Activo, las matem√°ticas se vuelven a√∫n m√°s agradables, y el sistema obtiene la capacidad de aumentar gradualmente la productividad en lugar de Active / Standby paso a paso. <br><br>  Ser√° correcto mencionar otra forma de esquemas de trabajo Activo / Activo o Activo / En espera: agrupamiento.  Pero no ser√° muy correcto dedicar mucho tiempo a esto, ya que intent√© escribir sobre enfoques y no sobre las caracter√≠sticas de los fabricantes.  Al elegir esta soluci√≥n, debe comprender claramente las siguientes cosas: <br><br><ol><li>  La arquitectura de cl√∫ster a veces impone restricciones sobre esta o aquella funcionalidad, en algunos proyectos esto es fundamental, en algunos puede volverse importante en el futuro, todo depende del fabricante y cada soluci√≥n debe ser resuelta individualmente; </li><li>  El cl√∫ster es a menudo un dominio de falla; habr√° errores en el software. </li><li>  El cl√∫ster es f√°cil de montar, pero muy dif√≠cil de desmontar.  La tecnolog√≠a tiene menos movilidad: no puede controlar partes del sistema. </li><li>  Caes en el abrazo tenaz de tu fabricante. </li></ol><br>  Sin embargo, hay cosas positivas: <br><br><ol><li>  El cl√∫ster es f√°cil de instalar y f√°cil de operar. </li><li>  A veces puede esperar una utilizaci√≥n de recursos casi √≥ptima. </li></ol><br>  Por lo tanto, nuestro centro de datos de la Figura 5 contin√∫a creciendo, la tarea que debe resolver es aumentar la cantidad de servidores.  No siempre es posible hacer esto en un centro de datos existente, as√≠ que supongamos que aparece una nueva ubicaci√≥n espaciosa con servidores adicionales. <br><br><img src="https://habrastorage.org/webt/o5/kq/fo/o5kqfoeksqpzk09cfrlmdluxts8.png" alt="imagen"><br>  <i>Fig.6</i> <br><br>  Un nuevo sitio puede no estar muy lejos, entonces resolver√° el problema con √©xito renovando los dominios de enrutamiento.  Un caso m√°s general, que no excluye la apariencia del sitio en otra ciudad o en otro pa√≠s, plantear√° nuevos desaf√≠os para el centro de datos: <br><br><ol><li>  Utilizaci√≥n de canales entre sitios; </li><li>  La diferencia en el tiempo de procesamiento de las solicitudes que ADC envi√≥ para su procesamiento a servidores cercanos y distantes. </li></ol><br>  Mantener un amplio canal entre sitios puede ser una tarea muy costosa, y elegir una ubicaci√≥n ya no ser√° una tarea trivial: un sitio sobrecargado con un tiempo de respuesta corto o gratuito con uno grande.  Pensar en esto lo empujar√° a construir una configuraci√≥n de centro de datos distribuida geogr√°ficamente.  Esta configuraci√≥n, por un lado, es amigable para los consumidores, ya que le permite recibir el servicio en un punto cercano a usted, por otro lado, puede reducir significativamente los requisitos para la banda del canal entre sitios. <br><br>  Para el caso cuando las direcciones IP reales no tienen que ser accesibles para los servidores, o cuando el protocolo de la capa de aplicaci√≥n permite que se transmitan en los encabezados, el dispositivo de un centro de datos distribuido geogr√°ficamente no es muy diferente de lo que llam√© el centro de datos base.  ADC en cualquier sitio puede enviar solicitudes de procesamiento a servidores locales o enviarlas para su procesamiento a uno vecino, la transmisi√≥n de la direcci√≥n del consumidor lo hace posible.  Se debe prestar cierta atenci√≥n al monitoreo del volumen de tr√°fico entrante para mantener la cantidad de ADC dentro del sitio adecuada a la proporci√≥n de tr√°fico que recibe el sitio.  La traducci√≥n de la direcci√≥n del consumidor le permite aumentar / disminuir el n√∫mero de ADC o incluso mover instancias entre sitios de acuerdo con los cambios en la matriz de tr√°fico entrante, o durante la migraci√≥n / lanzamiento.  A pesar de su simplicidad, el esquema es bastante flexible, tiene caracter√≠sticas de operaci√≥n agradables y se replica f√°cilmente en m√°s de dos sitios. <br><br><img src="https://habrastorage.org/webt/4f/3k/e0/4f3ke0imkvzickwdmswg76qo8ts.png" alt="imagen"><br>  <i>Fig. 7</i> <br><br>  Si trabaja con un protocolo que permite reenviar solicitudes, como en el caso de HTTP Redirect, esta caracter√≠stica se puede usar como una palanca adicional para controlar la carga del canal entre sitios, como un mecanismo para realizar el mantenimiento de rutina en los servidores o como un m√©todo para construir granjas de servidores Active / Backup en diferentes sitios.  En el momento requerido, autom√°ticamente o despu√©s de algunos eventos desencadenantes, ADC puede eliminar el tr√°fico de los servidores locales y trasladar a los consumidores a un sitio vecino.  Vale la pena prestar mucha atenci√≥n al desarrollo de este algoritmo para que el trabajo coordinado de ADC excluya la posibilidad de reenv√≠o mutuo de solicitudes o resonancia. <br><br>  De particular inter√©s es el caso cuando los servidores necesitan direcciones IP de consumidor reales, y el protocolo de la capa de aplicaci√≥n no tiene la capacidad de transmitir encabezados adicionales, o cuando los ADC funcionan sin comprender la sem√°ntica del protocolo de la capa de aplicaci√≥n.  En este caso, no es posible proporcionar una conexi√≥n consistente entre segmentos de sesi√≥n TCP simplemente declarando una ruta en el valor predeterminado de ADC.  Si hace esto, los servidores del primer sitio comenzar√°n a usar el ADC local como la puerta de enlace predeterminada para las sesiones que provienen del segundo sitio, la sesi√≥n TCP no se establecer√° en este caso porque el ADC del primer sitio ver√° solo un hombro de la sesi√≥n. <br><br><img src="https://habrastorage.org/webt/bh/zs/sg/bhzssgahst0iwxcsj_-rzpnzy4k.png" alt="imagen"><br>  <i>Fig. 8</i> <br><br>  Hay un peque√±o truco que a√∫n le permite ejecutar Active / Active ADC en combinaci√≥n con granjas de servidores Active / Active en diferentes sitios (no considero el caso de Active / Backup en dos sitios, una lectura cuidadosa de lo anterior le permitir√° resolver este problema sin m√°s discusi√≥n).  El truco es usar en el ADC del segundo sitio, no las direcciones de la interfaz del servidor, sino la direcci√≥n l√≥gica del ADC, que corresponde a la granja de servidores en el primer sitio.  Al mismo tiempo, los servidores reciben tr√°fico como si viniera del ADC local y usan la puerta de enlace predeterminada local.  Para mantener este modo de operaci√≥n en el ADC, debe activar la funci√≥n de memoria de la interfaz de la que proviene el primer paquete para configurar la sesi√≥n TCP.  Diferentes fabricantes llaman a esta funci√≥n de manera diferente, pero la esencia es la misma: recuerde la interfaz en la tabla de estado de la sesi√≥n y √∫sela para el tr√°fico de respuesta sin prestar atenci√≥n a la tabla de enrutamiento.  El esquema es completamente funcional y le permite distribuir de manera flexible la carga en todos los servidores disponibles donde sea que se encuentren.  En el caso de dos o m√°s sitios, la falla de un ADC no afecta la disponibilidad del servicio en su conjunto, pero excluye completamente la posibilidad de procesar el tr√°fico en los servidores del sitio con ADC fallidos, esto debe recordarse al predecir el comportamiento y la carga durante fallas parciales. <br><br><img src="https://habrastorage.org/webt/j8/c5/n0/j8c5n0oqpzijkfiz3dbyrrxeaww.png" alt="imagen"><br>  <i>Fig. 9</i> <br><br>  Los servicios de nuestro cliente funcionaban aproximadamente de la misma manera cuando comenc√© a trabajar en un proyecto de migraci√≥n a la nueva plataforma ADC.  No fue dif√≠cil recrear simplemente el comportamiento de los dispositivos de la plataforma anterior en la nueva dentro del marco de un esquema comprobado y amigable para el cliente, esto es lo que esperaban de nosotros. <br><br>  Pero mira nuevamente la Figura 9, ¬øves lo que se puede optimizar all√≠? <br>  La principal desventaja de trabajar con la cadena ADC es que consume los recursos de dos ADC para procesar parte de las sesiones.  En el caso de este cliente, la elecci√≥n fue absolutamente consciente, se debi√≥ a los detalles de las aplicaciones y la necesidad de poder redistribuir muy r√°pidamente (de 20 a 50 segundos) la carga entre servidores de diferentes sitios.  En diferentes per√≠odos de tiempo, el doble procesamiento tom√≥ un promedio de 15 a 30 por ciento de los recursos de ADC, esto es suficiente para pensar en la optimizaci√≥n.  Habiendo discutido este punto con los ingenieros del cliente, propusimos reemplazar el soporte para la tabla de sesi√≥n ADC con enlace de interfaz con enrutamiento de origen en servidores que usan PBR en la pila IP de Linux.  Como clave, consideramos opciones como: <br><br><ol><li>  direcci√≥n IP adicional en servidores en una interfaz com√∫n para cada ADC; </li><li>  interfaz de direcci√≥n IP en servidores en un 802.1q separado para cada ADC; </li><li>  Red de t√∫nel de superposici√≥n separada en servidores para cada ADC. </li></ol><br>  La primera y la segunda opci√≥n afectar√≠an de alguna manera a la red en su conjunto.  Entre los efectos secundarios de la opci√≥n uno, nos pareci√≥ inaceptable que un aumento que fuera un m√∫ltiplo del n√∫mero de ADC, tablas ARP en los conmutadores, y la segunda opci√≥n requerir√≠a un aumento en el n√∫mero de dominios de transmisi√≥n de extremo a extremo entre sitios o instancias individuales de tablas de enrutamiento virtual.  La naturaleza local de la tercera opci√≥n nos pareci√≥ muy atractiva, y nos pusimos a trabajar, lo que result√≥ en un controlador simple que automatiza la configuraci√≥n de t√∫neles en servidores y ADC, as√≠ como la configuraci√≥n PBR en la pila IP de servidores Linux. <br><br><img src="https://habrastorage.org/webt/6a/io/9_/6aio9_jovjmxyo2n2qtuamfzlji.png" alt="imagen"><br>  <i>Fig. 10</i> <br><br>  Como escrib√≠, la migraci√≥n se complet√≥, el cliente obtuvo lo que quer√≠a: una nueva plataforma, simplicidad, flexibilidad, escalabilidad y, como resultado de cambiar a una superposici√≥n, simplificar la configuraci√≥n del equipo de red como parte del servicio de estos servicios, en lugar de varias copias de tablas virtuales y grandes dominios de transmisi√≥n, result√≥ que -   IP . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colegas que trabajan con fabricantes de ADC, este p√°rrafo se centra m√°s en usted. Algunos de sus productos son buenos, pero trate de prestar atenci√≥n a una integraci√≥n m√°s estrecha con las aplicaciones en los servidores, la automatizaci√≥n de su configuraci√≥n y la organizaci√≥n de todo el proceso de desarrollo y operaci√≥n. Esto me parece en la forma de una interacci√≥n cl√°sica controlador-agente, haciendo cambios en el ADC, el usuario inicia la apelaci√≥n del controlador a los agentes registrados, esto es lo que hicimos con el cliente, pero "fuera de la caja".</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, algunos clientes pueden considerar conveniente cambiar de un modelo PULL de interacci√≥n con servidores a un modelo PUSH. Las capacidades de la aplicaci√≥n en los servidores son muy amplias, por lo que a veces es m√°s f√°cil organizar una verificaci√≥n espec√≠fica de la aplicaci√≥n del servicio en el propio agente. Si la verificaci√≥n arroja un resultado positivo, el agente transmite informaci√≥n, por ejemplo, en una forma similar a la Comunidad de Costo BGP, para usar en algoritmos de c√°lculo ponderados. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A menudo, diferentes departamentos de la organizaci√≥n realizan el mantenimiento del servidor y el ADC; cambiar a un modelo de interacci√≥n PUSH puede ser interesante porque este modelo elimina la necesidad de coordinaci√≥n entre los departamentos en una interfaz de persona a persona. Los servicios en los que participa el servidor se pueden transferir directamente del agente al ADC en forma de algo similar a las especificaciones avanzadas de flujo de BGP.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay mucho m√°s para escribir. ¬øPor qu√© soy todo esto? Al estar en una opci√≥n libre, tomamos una decisi√≥n a favor de una opci√≥n m√°s conveniente, m√°s adecuada o en favor de una opci√≥n que ampl√≠e la ventana de oportunidad para minimizar nuestros riesgos. Los grandes jugadores en la industria de Internet inventan algo completamente innovador para resolver sus problemas, algo que ma√±ana dicta, los jugadores m√°s peque√±os y las empresas con experiencia en el desarrollo de software utilizan cada vez m√°s tecnolog√≠as y productos que les permiten una personalizaci√≥n profunda. Muchos fabricantes de equilibradores de carga notan una disminuci√≥n en la demanda de sus productos. En otras palabras, los servidores y aplicaciones que se ejecutan en ellos, conmutadores y enrutadores hace alg√∫n tiempo, ya han cambiado cualitativamente y han entrado en la era SDN. Los balanceadores est√°n en el umbral.d√© este paso mientras la puerta est√° abierta, de lo contrario corre el riesgo de perder ventaja competitiva y mudarse a la periferia.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424115/">https://habr.com/ru/post/es424115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424105/index.html">La NASA sabe c√≥mo hacer que Marte sea verde nuevamente</a></li>
<li><a href="../es424107/index.html">Ha pasado un a√±o desde el vac√≠o en el almacenamiento de la red dom√©stica My Cloud de WD</a></li>
<li><a href="../es424109/index.html">VSCE # 2: Podcast de emprendedores de medios</a></li>
<li><a href="../es424111/index.html">Ondas de contratos inteligentes. Primera experiencia</a></li>
<li><a href="../es424113/index.html">Proceso de dise√±o, investigaci√≥n y b√∫squeda de empleo.</a></li>
<li><a href="../es424119/index.html">¬øHubo un Scrum *?</a></li>
<li><a href="../es424121/index.html">Crear una funci√≥n desencadenante en pgModeler</a></li>
<li><a href="../es424127/index.html">C√≥mo hacer amigos Ovirt y Let's Encrypt</a></li>
<li><a href="../es424129/index.html">Desarrollo de Android. Un poco sobre el trabajo r√°pido con listas</a></li>
<li><a href="../es424131/index.html">Manifiesto para desarrolladores de sistemas inteligentes: 15 principios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>