<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯжС ЁЯд┤ЁЯП╜ тШАя╕П Chatix рдмреИрдХрдПрдВрдб рдХреЗ рд╕рд╛рде рдорд▓реНрдЯреА-рдпреВрдЬрд░ рдЪреИрдЯ рдХреЛ рд░реАрдРрдХреНрдЯ рдХрд░реЗрдВ ЁЯНД ЁЯМО ЁЯС╝ЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЕрдм рдореИрдВ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЯреАрдо / рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ / рджреЛрд╕реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪреИрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВ рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЖрдкрдХрд╛ рдмреИрдХрдПрдВрдб рдирд╣реАрдВ рд╣реИ рдпрд╛ рдЖрдк рдЗрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдордп рдирд╣реАрдВ рдмрд┐рддрд╛рди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chatix рдмреИрдХрдПрдВрдб рдХреЗ рд╕рд╛рде рдорд▓реНрдЯреА-рдпреВрдЬрд░ рдЪреИрдЯ рдХреЛ рд░реАрдРрдХреНрдЯ рдХрд░реЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474492/"><p><img src="https://habrastorage.org/getpro/habr/post_images/d7e/212/ac4/d7e212ac471c99b0cd61dd0e75aab281.png" alt="рдЪрдЯрд┐рдХреНрд╕ рд░реВрдо"></p><br><p>  рдЕрдм рдореИрдВ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЯреАрдо / рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ / рджреЛрд╕реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪреИрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВ рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЖрдкрдХрд╛ рдмреИрдХрдПрдВрдб рдирд╣реАрдВ рд╣реИ рдпрд╛ рдЖрдк рдЗрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдордп рдирд╣реАрдВ рдмрд┐рддрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд╣рдо рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЯреЗрдХреНрд╕реНрдЯ рдЪреИрдЯ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЗрд╕рдореЗрдВ рд╣рдореЗрдВ рд▓рдЧрднрдЧ рдПрдХ рдШрдВрдЯрд╛ рд▓рдЧреЗрдЧрд╛ред </p><br><p> рдмреИрдХрдПрдВрдб рдХреЗ рдмрд┐рдирд╛ рдХрд╛рд░реНрдпрд╢реАрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдЪреИрдЯ рд▓рд┐рдЦрдирд╛ рд▓рдЧрднрдЧ рдЕрд╕рдВрднрд╡ рд╣реИ, рдпрд╣ рдПрдХ рдлреЙрд░реНрдо рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╣рдо рдЪреИрдЯрд┐рдХреНрд╕ рдФрд░ рдЙрд╕рдХреЗ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрд╕рдбреАрдХреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рдЪреИрдЯрд┐рдХреНрд╕ рдФрд░ рдПрд╕рдбреАрдХреЗ рд╕рдВрджреЗрд╢ рднрдВрдбрд╛рд░рдг рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рд▓рдЧреЗ рд░рд╣реЗрдВрдЧреЗ, рдФрд░ рд╣рдо рдлреНрд░рдВрдЯ-рдПрдВрдб рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреИрдпрд╛рд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛрдб GitHub рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЗрдореЛ</a> </p><a name="habracut"></a><br><h2 id="struktura-proekta">  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ </h2><br><ul><li>  рдЕрдиреБрдкреНрд░рдпреЛрдЧ (рдЖрд╡реЗрджрди рдХрд╛ рдореВрд▓ рдШрдЯрдХ, рдПрдХ рд░рд╛рдЬреНрдп рд╕рдВрд░рдХреНрд╖рдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдкрд╛рда рдореЗрдВ рд╣рдо Redux рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд░рд╛рдЬреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЛ рдирд╣реАрдВ рдЬреЛрдбрд╝реЗрдВрдЧреЗ) <br><ul><li>  рд╣реЗрдбрд░ (рд╣рдорд╛рд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рд╣реЗрдбрд░ рдЬреЛ рд▓реЛрдЧреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЪреИрдЯ рдХрд╛ рдирд╛рдо рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ) </li><li>  LogoHeader </li><li>  RoomTitle </li><li>  рдореБрдЦреНрдп </li><li>  рд╕рджрд╕реНрдп рд╕реВрдЪреА (рдЪреИрдЯ рд╕реВрдЪреА) <br><ul><li>  рд╕рджрд╕реНрдп </li></ul></li><li>  рдЪреИрдЯрдлрд┐рд▓реНрдб (рдЪреИрдЯ рд╕рдВрджреЗрд╢реЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣рд░ рдЪреАрдЬ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдВрдЯреЗрдирд░) <br><ul><li>  MessageContainer </li><li>  рд╕рдВрджреЗрд╢ [] (рд╕рдВрджреЗрд╢ рдХреА рдкреНрд░рд╕реНрддреБрддрд┐; рдЗрд╕ рдкрд╛рда рдореЗрдВ рд╣рдо рдХреЗрд╡рд▓ рдкрд╛рда рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗ) </li><li>  SendMessageForm (рдПрдХ рдирдпрд╛ рдЪреИрдЯ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝реЙрд░реНрдо) </li></ul></li><li>  ChatixSDK (рдмреИрдХрдПрдВрдб рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдкреНрд░рдореБрдЦ рдШрдЯрдХ) </li></ul></li></ul><br><blockquote> рд░рд╛рдЬреНрдп рднрдВрдбрд╛рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реВрдЪрдирд╛ред  рдмреЗрд╢рдХ, рдпрд╣рд╛рдВ Redux рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдФрд░ рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░рд╛рдЬреНрдп рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рдордп рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рд░рд╛рдЬреНрдп рдХреЛ рдРрдк рдХреЗ рдореВрд▓ рдШрдЯрдХ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВрдЧреЗ рдФрд░ рдмрд╛рд▓ рдШрдЯрдХреЛрдВ рдХреЛ рдбреЗрдЯрд╛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЙрдирдХреЗ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреЛ рдмрд╛рд▓ рд╡рд┐рдзрд┐рдпреЛрдВ рд╕реЗ рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗред <br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рд╣рдореЗрдВ рдЪреИрдЯ рдХрд╛ рдирд╛рдо рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕реЗ рдРрдк рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рд╣реЗрдЬ рд▓реЗрдВрдЧреЗ рдФрд░ рдЗрд╕реЗ <code>App тЖТ Header тЖТ RoomTitle</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд╕ рдХрд░реЗрдВрдЧреЗ: <code>App тЖТ Header тЖТ RoomTitle</code> ред  рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛрдИ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЙрд╕реЗ SendMessageForm рд╕реЗ рдРрдк рдореЗрдВ <code>SendMessageForm тЖТ ChatField тЖТ Main тЖТ App</code> : <code>SendMessageForm тЖТ ChatField тЖТ Main тЖТ App</code> ред </blockquote><p>  рд╣рдорд╛рд░реА рдЪреИрдЯ рдбрд┐рдЬрд╛рдЗрди рдореЗрдВ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d1e/096/b73/d1e096b7349824c510542cc215ae437e.png" alt="chatix.io"></p><br><h2 id="vzaimodeystvie-mezhdu-komponentami">  рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рдмрд╛рддрдЪреАрдд </h2><br><p>  рд╣рдорд╛рд░реЗ рдШрдЯрдХреЛрдВ рдХреЛ рдПрдХ-рджреВрд╕рд░реЗ рдХреЛ рдбреЗрдЯрд╛ рдкреНрд░реЗрд╖рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╣рд░ рдЪреАрдЬ рдХреЗ рд▓рд┐рдП рдЙрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреИрд╕рд╛ рдХрд┐ рдЕрдм рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╡реЗ рдПрдХ-рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдмрд╛рддрдЪреАрдд рдХрд░реЗрдВрдЧреЗред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/fde/009/821/fde0098218938f714d32a58ad9776ec9.png" alt="рдШрдЯрдХ рдмрд╛рддрдЪреАрдд"></p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЖрдВрдХрдбрд╝реЗ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдореБрдЦреНрдп рдШрдЯрдХ <code>App</code> , рдЬреЛ рдмрд╛рд▓ рдШрдЯрдХреЛрдВ рдХреЛ рдбреЗрдЯрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ (рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рдХрд╛рд░рдг, рд╣рдо рдмрд╕ <code>prop</code> рдЕрд╕рд╛рдЗрди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдмрдЪреНрдЪрд╛ рдШрдЯрдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдЧрд╛), рдФрд░ рдмрдЪреНрдЪреЗ рдШрдЯрдХ рдХреНрд░рдорд┐рдХ рддрд░реАрдХреЗ рд╕реЗ <code>App</code> рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдирд╣реАрдВ рд╣реИ рдЬреЛ рдЙрддреНрдкрд╛рджрди рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдФрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП), рд▓реЗрдХрд┐рди рдпрд╣ рд╣рдорд╛рд░реЗ рд╕рдмрдХ рдХреЗ рд▓рд┐рдП рдХрд░реЗрдЧрд╛ред </p><br><h2 id="sozdanie-proekta">  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдирд┐рд░реНрдорд╛рдг </h2><br><h3 id="sozdaem-vizualnye-komponenty">  рджреГрд╢реНрдп рдШрдЯрдХ рдмрдирд╛рдПрдБ </h3><br><h4 id="shapka">  рдЯреЛрдкреА </h4><br><ol><li><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдПрдХ рдирдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">create-react-app рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br><pre> <code class="plaintext hljs">npx create-react-app chatix-chatroom cd chatix-chatroom</code> </pre> <br><p>  рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЪрд▓рд╛рдПрдБ </p><br><pre> <code class="plaintext hljs">npm start</code> </pre> <br></li><li><p>  рд╣реЗрдбрд░ рдмрдирд╛рдХрд░ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╢реАрд░реНрд╖рд▓реЗрдЦ рдореЗрдВ рдПрдХ рд▓реЛрдЧреЛ рдЬреЛрдбрд╝реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, src рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░, <strong>рдШрдЯрдХ</strong> рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдБ, рдФрд░ рдЗрд╕рдореЗрдВ <strong>logo_header</strong> рдлрд╝реЛрд▓реНрдбрд░ред  рд╣рдо рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд▓реЛрдЧреЛ рдЕрдкрд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ рдФрд░ 2 <strong>LogoHeader.js</strong> рдФрд░ <strong>LogoHeader.css рдлрд╛рдЗрд▓реЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ</strong> </p><br></li></ol><br><p>  <strong>LogoHeader.js</strong> </p><br><pre> <code class="plaintext hljs">import React from 'react' import logo from './chatix_logo.svg'; import './LogoHeader.css'; function LogoHeader(){ return ( &lt;div className="LogoHeader"&gt; &lt;img src={logo} className="App-logo" alt="Chatix logo" /&gt; &lt;/div&gt; ); } export default LogoHeader;</code> </pre> <br><p>  <strong>LogoHeader.css</strong> </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.LogoHeader</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">flex-basis</span></span>: <span class="hljs-number"><span class="hljs-number">200px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">flex-grow</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">flex-shrink</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИ, рдЗрд╕ рдШрдЯрдХ рдореЗрдВ рдПрдХ рд▓реЛрдЧреЛ рдФрд░ рд╢реИрд▓рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрд╕ рдЖрдпрд╛рдд рдХреА рдЬрд╛рддреА рд╣реИред </p><br><p>  рдореИрдВ рдЕрдм рдпрд╣рд╛рдВ рд╕реНрдЯрд╛рдЗрд▓рд╢реАрдЯ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдирд╣реАрдВ рдЬреЛрдбрд╝реВрдВрдЧрд╛, рдЖрдк рдЙрдиреНрд╣реЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреИрдпрд╛рд░ рдкрд░рд┐рдпреЛрдЬрдирд╛</a> рдХреЗ рдкреГрд╖реНрда рдкрд░ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </p><br><p>  рдЕрдм рдЪреИрдЯ рд░реВрдо рдХрд╛ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ <strong>рд░реВрдо-рдЯрд╛рдЗрдЯрд▓</strong> рдлрд╝реЛрд▓реНрдбрд░ рдФрд░ рдЗрд╕рдореЗрдВ <strong>рд░реВрдордЯрд╛рдЗрдЯрд▓</strong> рдШрдЯрдХ <strong>рдмрдирд╛рдПрдВ</strong> ред  рд╣рдо рдкреНрд░реЙрдкреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕ рдШрдЯрдХ рдореЗрдВ рдирд╛рдо рдХреЛ рдлреЗрдВрдХ рджреЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рд╣рдо <code>props.chatroomName</code> рдФрд░ рдЕрдм рд╣рдо рдЗрд╕реЗ рдпрд╣рд╛рдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВрдЧреЗред </p><br><p>  <strong>RoomTitle</strong> </p><br><pre> <code class="plaintext hljs">import React from 'react'; import './RoomTitle.css'; function RoomTitle(props){ return ( &lt;div className="RoomTitle"&gt; &lt;h1&gt;{props.chatroomName}&lt;/h1&gt; &lt;/div&gt; ); } export default RoomTitle;</code> </pre> <br><p>  рдлрд┐рд░ рд╣рдо рд╣реЗрдбрд░ рдХрдВрдкреЛрдиреЗрдВрдЯ рдЦреБрдж рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рдореЗрдВ рд▓реЛрдЧреЛ рдФрд░ рдЪреИрдЯ рд░реВрдо рдХрд╛ рдирд╛рдо рд░рдЦрддреЗ рд╣реИрдВред  рддреБрд░рдВрдд рдмрдЪреНрдЪреЗ рдХреЗ рдирд╛рдо рдХреЛ рдЪреИрдЯ <code>chatroomName</code> рдкреНрд░реЛрдк <code>chatroomName</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдлреЗрдВрдХ рджреЗрдВред </p><br><p>  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рд╕рд╣рдордд рдереЗ рдХрд┐ рд╕рднреА рдбреЗрдЯрд╛ (рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрдЯреЗрдЯ) <strong>рдРрдк</strong> рдХреЗ рд░реВрдЯ рдШрдЯрдХ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред  рдЗрд╕рд╕реЗ рд╣рдо рд╣реИрдбрд░ рдХреЛ рдкрд╣рд▓реЗ <strong>рд╣реИрдбрд░</strong> рдФрд░ <strong>рд╣реИрдбрд░</strong> рд╕реЗ <strong>рд░реВрдордЯрд╛рдЗрдЯрд▓ рдореЗрдВ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░реЗрдВрдЧреЗ</strong> ред </p><br><p>  <strong>рдШрдЯрдХреЛрдВ \ рд╣реИрдбрд░ \ рд╣реИрдбрд░ред рдЬреЗрдПрд╕</strong> </p><br><p>  <strong>Header.js</strong> </p><br><pre> <code class="plaintext hljs">import React from 'react'; import './Header.css' import LogoHeader from '../logo_header/LogoHeader'; import RoomTitle from '../room-title/RoomTitle'; function Header(props) { return ( &lt;header&gt; &lt;LogoHeader/&gt; &lt;RoomTitle chatroomName={props.chatroomName} /&gt; &lt;/header&gt; ); } export default Header;</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, <strong>App.js</strong> рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЙрд╕рдореЗрдВ <strong>Header.js</strong> рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВред <br>  рдлрд┐рд░ рд╣рдо <strong>рд░рд╛рдЬреНрдп</strong> рдореЗрдВ рдирд╛рдо рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ <strong>рдФрд░</strong> рдЗрд╕реЗ <strong>рдкреНрд░реЙрдкреНрд╕ рдХреЗ</strong> рдорд╛рдзреНрдпрдо рд╕реЗ <strong>рд╣реЗрдбрд░</strong> рдкрд░ <strong>рднреЗрдЬрддреЗ рд╣реИрдВ</strong> ред <br>  рд╕рд╛рде рд╣реА рд╣реЗрдбрд░ рдореЗрдВ рдЖрдкрдХреЛ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдирд╛рдо рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд░рд╛рдЬреНрдп рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЗрд╕реА рддрд░рд╣ рдЗрд╕реЗ рд╣реЗрдбрд░ рдкрд░ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">import React from 'react'; import './App.css'; import Header from './components/header/Header'; class App extends React.Component { constructor(props){ super(props); chatroomName: '-', me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } } render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} /&gt; &lt;/div&gt; ); }; } export default App;</code> </pre> <br><p>  рдЕрдм рд╣реЗрдбрд░ рдореЗрдВ рдЖрдкрдХреЛ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдирд╛рдо рдХреЗ рд╕рд╛рде рдПрдХ рдЗрдирдкреБрдЯ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдмрджрд▓рд╛рд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рд╣рдо рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЛ <strong>рдРрдк</strong> рдШрдЯрдХ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХреЗрдВред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо <code>handleChangeName</code> рдлрд╝рдВрдХреНрд╢рди <code>props.updateVisitor</code> рдХреЛ рдирд╛рдо рдХреЗ рд╕рд╛рде рдЗрдирдкреБрдЯ рдореЗрдВ <code>props.updateVisitor</code> рдФрд░ <code>props.updateVisitor</code> рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рдирд╛рдо рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  <strong>Header.js</strong> </p><br><pre> <code class="plaintext hljs">function Header(props) { const [name, setName] = useState(props.me.name ? props.me.name : props.me.uuid.substr(-10)) const handleChangeName = (e) =&gt; { setName(e.target.value) let visitor = {...props.me}; visitor.name = e.target.value; props.updateVisitor(visitor) } return ( &lt;header&gt; &lt;LogoHeader/&gt; &lt;RoomTitle chatroomName={props.chatroomName}/&gt; { props.me ? &lt;input className='name-input' value={name} placeholder=' ' onChange={(e) =&gt; handleChangeName(e)} /&gt; : null } &lt;/header&gt; ); }</code> </pre> <br><p>  рдЕрдм рдЗрд╕ рдлрдВрдХреНрд╢рди <code>props.updateVisitor</code> рдХреЛ <strong>рдРрдк рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ</strong> рдФрд░ рдЗрд╕реЗ <code>props.updateVisitor</code> ред  рдЕрдм рддрдХ, рдпрд╣ рдХреЗрд╡рд▓ рд░рд╛рдЬреНрдп рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВрдЧреЗред </p><br><pre> <code class="plaintext hljs">onUpdateVisitor = (visitor) =&gt; { this.setState({me: visitor}) }</code> </pre> <br><p>  рддреЛ, рдЕрдм рд╣рдорд╛рд░рд╛ рдЖрд╡реЗрджрди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ рдФрд░ рдЕрдм рддрдХ рдХреЗрд╡рд▓ рдирд╛рдо рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдЬрд╛рдирддрд╛ рд╣реИред  рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/685/7ec/243/6857ec2435f476e8d6dad5201d7909a5.png" alt="рдЯреЛрдХрди рд╣реЗрдбрд░"></p><br><h4 id="saydbar">  рд╕рд╛рдЗрдбрдмрд╛рд░ </h4><br><p>  рдЕрдм рд╕рд╛рдЗрдбрдмрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЗрдВред <br>  рд╕рд╛рдЗрдбрдмрд╛рд░ <strong>рдореЗрди.рдЬреЗрдПрд╕</strong> рдкреЗрдЬ рдкрд░ рдореБрдЦреНрдп рдШрдЯрдХ рдХреЗ рдЕрдВрджрд░ рд╕реНрдерд┐рдд рд╣реЛрдЧрд╛ред <br>  рд╣рдо рдЗрд╕реЗ <strong>рдШрдЯрдХ \ main \ Main.js</strong> рдмрдирд╛рддреЗ рд╣реИрдВ, рдлрд┐рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ <strong>рдШрдЯрдХреЛрдВ</strong> рдХреА рдПрдХ рд╕реВрдЪреА рдХреЗ рд╕рд╛рде рдПрдХ рдШрдЯрдХ рдмрдирд╛рддреЗ <strong>рд╣реИрдВ \ рд╕рджрд╕реНрдп-рд╕реВрдЪреА \ рд╕рджрд╕реНрдп-рд╕реВрдЪреАред рдЬреЗрдПрд╕</strong> рдФрд░ рддреБрд░рдВрдд рдПрдХ рдШрдЯрдХ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕реНрд╡рдпрдВ <strong>рдШрдЯрдХ \ рд╕рджрд╕реНрдп-рдЖрдЗрдЯрдо \ рд╕рджрд╕реНрдп-рдХрд╛рд░реНрдп</strong> рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ред </p><br><p>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпреЗ 3 рдШрдЯрдХ рдХреИрд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВ, рд▓реЗрдЦ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд░реВрдкрд░реЗрдЦрд╛ рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред </p><br><p>  рдШрдЯрдХ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЕрдм рдХреНрд░рдо рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВред <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <strong>рдРрдк</strong> рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕рд░рдгреА рдЬреЛрдбрд╝реЗрдВ рдФрд░ <strong>рдореБрдЦреНрдп</strong> рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВред  рдлрд┐рд░ рд╣рдо рдЗрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЗрд╕рдореЗрдВ рднреЗрдЬреЗрдВрдЧреЗред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">class App extends React.Component { constructor(props) { super(props); this.state = { chatroomName: '-', members: [ { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" }, { is_online: true, name: "", uuid: "mnzxcv97zx6chvo" }, { is_online: false, name: "", uuid: "kjuhv987ashdfoua" }, { is_online: false, name: "", uuid: "jdhnf978WEHJSNDL" }, ], me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } }; } render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} /&gt; &lt;Main members={this.state.members} me={this.state.me} /&gt; &lt;/div&gt; ); }; }</code> </pre> <br><p>  <strong>рдореБрдЦреНрдп</strong> рдШрдЯрдХ рдореЗрдВ, <strong>рд╕рджрд╕реНрдп</strong> рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВ рдФрд░ <strong>рдЙрд╕рдореЗрдВ</strong> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕рд░рдгреА рдХреЛ рдЖрдЧреЗ <strong>рдмрдврд╝рд╛рдПрдБ</strong> ред </p><br><p>  <strong>main.js</strong> </p><br><pre> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList members={props.members} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p>  рдФрд░ <strong>рдореЗрдВрдмрд░рд▓рд┐рд╕реНрдЯ</strong> рдШрдЯрдХ рдореЗрдВ <strong>,</strong> рд╣рдо рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реВрдк рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП <strong>рдореЗрдВрдмрд░рдЯреИрдо</strong> рдШрдЯрдХ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  <strong>MemberList.js</strong> </p><br><pre> <code class="plaintext hljs">function MemberList(props) { const members = props.members.map((member) =&gt; &lt;MemberItem key={member.uuid} member={member} /&gt; ); return ( &lt;section className="MemberList"&gt; {members} &lt;/section&gt; ); }</code> </pre> <br><p>  <strong>рд╕рджрд╕реНрдп рдЗрдЯреЗрдо</strong> рдШрдЯрдХ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рд╛рдЗрдбрдмрд╛рд░ рдореЗрдВ рд╕реАрдзреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИред  рдЗрд╕рдореЗрдВ, рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдирд╛рдо рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рдпрджрд┐ рдпрд╣ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рд╣реИ, рддреЛ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рдкрд╣рд▓реЗ 10 рдЕрдХреНрд╖рд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВред  рд╣рдо рдСрдирд▓рд╛рдЗрди / рдСрдлрд╝рд▓рд╛рдЗрди рд╕реНрдерд┐рддрд┐ рдХреА рднреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреА рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХрд░рддреЗ рд╣реИрдВ, рддрд╛рдХрд┐ рд╡рд╣ рдЪрд┐рд╣реНрди "(рдЖрдк)" рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд рд╣реЛред </p><br><pre> <code class="plaintext hljs">function MemberItem(props) { function getName(){ let name = '' if (props.member.uuid === props.me.uuid) { if(props.me.name) { name = props.me.name } else { name = props.me.uuid.substring(props.me.uuid.length-10, props.me.uuid.length); } } else { if(props.member.name){ name = props.member.name } else { name = props.member.uuid.substring(props.member.uuid.length-10, props.member.uuid.length); } } return name; } return( &lt;div className="MemberItem"&gt; &lt;img src={ icon } alt={ props.member.name }/&gt; &lt;span&gt; { getName() } { props.member.uuid === props.me.uuid &amp;&amp; " () " } &lt;/span&gt; { props.member.is_online &amp;&amp; &lt;span className="online"&gt;тАв&lt;/span&gt; } &lt;/div&gt; ); }</code> </pre> <br><p>  рд╣реЛ рдЧрдпрд╛ред  рдЕрдм рдЖрд╡реЗрджрди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eba/512/a8b/eba512a8bca7de4b1487567775f7742b.png" alt="рдЯреЛрдХрди рд╣реЗрдбрд░"></p><br><h4 id="spisok-soobscheniy-i-forma-otpravki">  рдореИрд╕реЗрдЬ рд▓рд┐рд╕реНрдЯ рдФрд░ рд╕рдмрдорд┐рд╢рди рдлреЙрд░реНрдо </h4><br><p>  рдЕрдм рд╣рдо рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реВрдЪреА рдФрд░ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдлрд╝реЙрд░реНрдо рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <strong>рдПрдкреНрд▓рд┐рдХреЗрд╢рди</strong> рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░рдгреА рдЬреЛрдбрд╝реЗрдВред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">this.state = { chatroomName: '-', messages: [ { content: " 1", sender_id: "mnzxcv97zx6chvo", uuid: "dg897sdfg" }, { content: " 2", sender_id: "98s7dfh9a8s7dhf", uuid: "8723hernm" }, { content: "  ", sender_id: "mnzxcv97zx6chvo", uuid: "435nbcv98234" } ], members: [ { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" }, { is_online: true, name: "", uuid: "mnzxcv97zx6chvo" }, { is_online: false, name: "", uuid: "kjuhv987ashdfoua" }, { is_online: false, name: "", uuid: "jdhnf978WEHJSNDL" }, ], me: { is_online: true, name: "", uuid: "98s7dfh9a8s7dhf" } };</code> </pre> <br><p>  рдФрд░ рдЙрдиреНрд╣реЗрдВ <strong>рдореБрдЦреНрдп</strong> рдШрдЯрдХ рдХреЗ рд▓рд┐рдП рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВ </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs"> &lt;Main members={this.state.members} messages={this.state.messages} me={this.state.me} /&gt;</code> </pre> <br><p>  рдЕрдм рдХрдВрдкреЛрдиреЗрдВрдЯ <strong>рдХрдВрдлрд░реНрд╕ / рдЪреИрдЯ-рдлреАрд▓реНрдб / ChatField.js рдмрдирд╛рдПрдВ</strong> <br>  рдЗрд╕реЗ <strong>рдореЗрди</strong> рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ рдФрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВред </p><br><p>  <strong>рдореБрдЦреНрдп</strong> </p><br><pre> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList me={props.me} members={props.members} /&gt; &lt;ChatField messages={props.messages} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдХрдВрдкреЛрдиреЗрдВрдЯ <strong>рдХрдВрд╕рдкрд░реНрд╕ / рдореИрд╕реЗрдЬ-рдХрдВрдЯреЗрдирд░ / MessageContainer.js</strong> рдмрдирд╛рдПрдВ <br>  рдЗрд╕реЗ <strong>ChatField</strong> рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ рдФрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рднреА рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВред </p><br><p>  <strong>Chatfield</strong> </p><br><pre> <code class="plaintext hljs">function Main(props) { return( &lt;section className="Main"&gt; &lt;MemberList me={props.me} members={props.members} /&gt; &lt;ChatField messages={props.messages} /&gt; &lt;/section&gt; ); }</code> </pre> <br><p>  рдлрд┐рд░ рд╣рдо рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реВрдк рдХрд░реЗрдВрдЧреЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдШрдЯрдХ рдХреЛ рд▓реМрдЯрд╛рдПрдЧрд╛ рдЬреЛ рдЗрд╕реЗ рджрд┐рдЦрд╛рдПрдЧрд╛ред <br>  рдЖрдЗрдП рдЗрд╕реЗ рдмрдирд╛рддреЗ рд╣реИрдВ <strong>рд╕рдВрджреЗрд╢ / рд╕рдВрджреЗрд╢ / рд╕рдВрджреЗрд╢.рдЬреЗрдПрд╕</strong> ред  рдЗрд╕рдореЗрдВ рд╣рдо рд╡рд┐рдЬрд╝рд┐рдЯрд░ рдХрд╛ рдЖрдЗрдХрди, рдЙрд╕рдХрд╛ рдирд╛рдо рдпрд╛ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдпрджрд┐ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢ рдкрд╛рда рд╣реА рд╣реИред </p><br><p>  <strong>рд╕рдВрджреЗрд╢</strong> </p><br><pre> <code class="plaintext hljs">function Message(props) { const getSenderName = () =&gt; { if (props.sender) { return props.sender.name ? props.sender.name : props.sender.uuid.substr(-10); } return "Unknown sender"; }; return( &lt;div className="Message"&gt; &lt;div className="message-sender-icon"&gt; &lt;img src={icon} alt="visitor icon"/&gt; &lt;/div&gt; &lt;div className="message-bubble"&gt; &lt;div className="message-sender-name"&gt;{getSenderName()}&lt;/div&gt; &lt;div className="message-content"&gt;{props.message.content}&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ); }</code> </pre> <br><p>  рдЕрдм, <strong>MessageContainer рдореЗрдВ, рд╣рдо</strong> рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реВрдк рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рд╡рд╣ <strong>рд╕рдВрджреЗрд╢</strong> рдШрдЯрдХ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ рдЬрд┐рд╕рд╕реЗ рд╣рдо рд╕рдВрджреЗрд╢ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ </p><br><p>  <strong>MessageContainer</strong> </p><br><pre> <code class="plaintext hljs">function MessageContainer(props) { const messageList = props.messages.map(message =&gt; &lt;Message key={message.uuid} sender={props.members.find((member) =&gt; member.uuid === message.sender_id)} message={message} /&gt; ); return ( &lt;section className="MessageContainer" ref={messagesContainer}&gt; {messageList} &lt;/section&gt; ); }</code> </pre> <br><p>  рдЕрдм рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИ: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/74d/cad/f22/74dcadf22a3086fa2d7182e1aa791cab.png" alt="рдЯреЛрдХрди рд╕рдВрджреЗрд╢"></p><br><p>  рдЕрдм рд╕рдВрджреЗрд╢ <strong>рдШрдЯрдХреЛрдВ / рднреЗрдЬрдиреЗ-рд╕рдВрджреЗрд╢-рдлрд╛рд░реНрдо / SendMessageForm.js</strong> рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╛рд░реНрдо рдХреЗ рд╕рд╛рде рдПрдХ рдШрдЯрдХ рдмрдирд╛рдПрдВред  рдЗрд╕рдореЗрдВ, рд╣рдо рдПрдХ рдЗрдирдкреБрдЯ рдФрд░ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрдЯрди рдмрдирд╛рдПрдВрдЧреЗред  рдЬрдм рдЗрдирдкреБрдЯ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕рдореЗрдВ рд╕реЗ рдкрд╛рда рд░рд╛рдЬреНрдп рдХреЛ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдЖрдк рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо <code>onSendNewMessage</code> рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд░рд╛рдЬреНрдп рд╕реЗ рд╕рдВрджреЗрд╢ рдХреЛ рдЗрд╕рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  <code>onSendNewMessage</code> <strong>рдПрдкреНрд▓рд┐рдХреЗрд╢рди</strong> рдШрдЯрдХ рдореЗрдВ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж <code>onSendNewMessage</code> рдлрд╝рдВрдХреНрд╢рди <code>onSendNewMessage</code> рдФрд░ рдЗрд╕реЗ рдкреНрд░реЙрдкреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗред </p><br><p>  <strong>SendMessageForm</strong> </p><br><pre> <code class="plaintext hljs">class SendMessageForm extends React.Component { constructor(props) { super(props); this.state = { message: '' }; } currentMessageChanged = (e) =&gt; { this.setState({message: e.target.value }); } sendMessageClicked = async (e) =&gt; { e.preventDefault(); if (this.state.message.length &gt; 0) { await this.props.onSendNewMessage(this.state.message); this.setState({...this.state, ...{message : ''}}); } } render(){ return ( &lt;section className="SendMessageForm"&gt; &lt;form&gt; &lt;input type="text" value={this.state.message} onChange={this.currentMessageChanged} placeholder="Type message to send"/&gt; &lt;button type="submit" onClick={this.sendMessageClicked} &gt; Send &lt;/button&gt; &lt;/form&gt; &lt;/section&gt; ); } }</code> </pre> <br><p>  рдЕрдм <strong>SendMessageForm</strong> рдШрдЯрдХ рдХреЛ <strong>ChatField рдХреЗ</strong> рдЕрдВрджрд░ <strong>рд░рдЦреЗрдВ</strong> ред </p><br><p>  <strong>Chatfield</strong> </p><br><pre> <code class="plaintext hljs">function ChatField(props) { return( &lt;section className="ChatField"&gt; &lt;MessageContainer members={props.members} messages={props.messages} /&gt; &lt;SendMessageForm onSendNewMessage={props.onSendNewMessage}/&gt; &lt;/section&gt; ); }</code> </pre> <br><p>  <strong>рдореБрдЦреНрдп</strong> рдШрдЯрдХ рдореЗрдВ, рд╣рдо <code>onSendNewMessage</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рднреА <code>onSendNewMessage</code> рдХрд░реЗрдВрдЧреЗред </p><br><p>  <strong>рдореБрдЦреНрдп</strong> </p><br><pre> <code class="plaintext hljs">&lt;ChatField members={props.members} messages={props.messages} onSendNewMessage={props.onSendNewMessage} /&gt;</code> </pre> <br><p>  рдЕрдм рдЗрд╕ рдлрдВрдХреНрд╢рди рдХреЛ <strong>App</strong> рдореЗрдВ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ <strong>Main рдореЗрдВ</strong> рдлреЙрд░рд╡рд░реНрдб рдХрд░реЗрдВред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">onSendNewMessage = async (message) =&gt; { console.log(message) }</code> </pre> <br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">&lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt;</code> </pre> <br><p>  рд╣реЛ рдЧрдпрд╛ред  рдЕрдм, рдЬрдм рдЖрдк рднреЗрдЬреЗрдВ рд╕рдВрджреЗрд╢ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ <strong>рдРрдк</strong> рдШрдЯрдХ рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br>  рдЕрдм рдЖрд╡реЗрджрди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e53/89e/d31/e5389ed317bd0fb4bf87db34b05f57a6.png" alt="рдЯреЛрдХрди рдлрд╛рдЗрдирд▓"></p><br><p>  рдЗрд╕рд▓рд┐рдП, рдЕрдм рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдореЗрдВ рд╕рдм рдХреБрдЫ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рд╕рдм рдХреБрдЫ рдЙрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕рд╛ рдХрд┐ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рд╕реНрдереИрддрд┐рдХ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде, рдФрд░ рд╣рдорд╛рд░реА рдЪреИрдЯ рдХреЛ рдкреБрдирд░реНрдЬреАрд╡рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЗрд╕реЗ рдмреИрдХрдПрдВрдб рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><h4 id="podklyuchenie-bekenda">  рдмреИрдХрдПрдВрдб рдХрдиреЗрдХреНрд╢рди </h4><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реА рдЪреАрдЬ рдЬреЛ рдЖрдкрдХреЛ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ рд╡рд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЪреИрдЯрд┐рдХреНрд╕-рдХреЛрд░</a> рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">npm i chatix-core</code> </pre> <br><p>  рдлрд┐рд░ <strong>рдЪреИрдЯрд┐рдХреНрд╕</strong> рдкрд░ рдПрдХ рдЦрд╛рддрд╛ <strong>рдмрдирд╛рдПрдВ</strong> рдФрд░ рдПрдХ рдЪреИрдЯ рд░реВрдо рдмрдирд╛рдПрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">chatix.io</a> рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬрд╛рдПрдВ</a> рдФрд░ рдкрдВрдЬреАрдХрд░рдг рдХрд░реЗрдВред <br>  рдкрдВрдЬреАрдХрд░рдг рдХреЗ рдмрд╛рдж, рдЖрдк рдЪреИрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкреЗрдЬ рдкрд░ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ <strong>рд╡реЗрдмрд╕рд╛рдЗрдЯ рдЖрдИрдбреАрдбреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛</strong> рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЕрдм рд╣рдо рдПрдХ рдирдпрд╛ рдЪреИрдЯ рд░реВрдо рдмрдирд╛рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдо рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/38b/26d/034/38b26d03464c1b236beff17c4118ba00.png" alt="рдЪреИрдЯ рд░реВрдо рдмрдирд╛рдирд╛"></p><br><p>  рд╣рдо рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкрд░ рд▓реМрдЯрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдирдпрд╛ рдШрдЯрдХ рдмрдирд╛рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣рдо рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред <br>  <strong>рдШрдЯрдХреЛрдВ \ chatix \ ChatixSDK.js</strong> </p><br><p>  рд╣рдо <strong>рдЗрд╕рдореЗрдВ ChatixCore</strong> рдЖрдпрд╛рдд <strong>рдХрд░рддреЗ рд╣реИрдВред</strong> </p><br><pre> <code class="plaintext hljs">import ChatixCore from 'chatix-core';</code> </pre> <br><p>  <strong>ChatixSDK</strong> рдШрдЯрдХ рдореЗрдВ <strong>,</strong> <strong>ChatixCore</strong> рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдПрдВ рдФрд░ рдПрдХ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ <strong>websiteId</strong> рдкрд╛рд╕ рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs">const websiteId = "_WEBSITE_ID"; this.sdk = new ChatixCore(websiteId);</code> </pre> <br><p>  рдЕрдм <strong>рдЗрд╕рдореЗрдВ .sdk</strong> рдЖрдк рдЪреИрдЯ рд░реВрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЪреИрдЯ-рдХреЛрд░</a> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкреЗрдЬ рдкрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </p><br><p>  рдЕрдЧрд▓рд╛, рд╣рдореЗрдВ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдФрд░ рдкрд╣рд▓реЗ рдмрдирд╛рдП рдЧрдП рдЪреИрдЯ рд░реВрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдореЗрдердб <strong>рд╕реНрдЯрд╛рд░реНрдЯ ()</strong> рдФрд░ <strong>рдЧреЗрдЯрд╡рдЪрд░реВрдо () рд╣реИрдВ</strong> ред </p><br><p>  рдЪреИрдЯ рд░реВрдо рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдЗрдП рддреБрд░рдВрдд рдЗрд╕рдХрд╛ рдирд╛рдо рд▓реЗрдВ рдФрд░ рдЗрд╕реЗ <strong>рдРрдк рдореЗрдВ</strong> рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <strong>рдРрдк</strong> рдореЗрдВ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди <code>updateChatroomTitle(chatroom.title)</code> рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЗрд╕реЗ <strong>ChatixSDK</strong> рдореЗрдВ рдХреЙрд▓ рдХрд░реЗрдВред </p><br><p>  <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">class ChatixSDK extends React.Component { constructor(props){ super(props); const websiteId = "_WEBSITE_ID"; this.chatroomId = "_CHATROOM_ID"; this.sdk = new ChatixCore(websiteId); this.sdk.start() .then( async () =&gt; { try { // refresh information about chatroom and call passed handler const chatroom = await this.sdk.getChatroom(this.chatroomId); if (props.updateChatroomTitle) { props.updateChatroomTitle(chatroom.title); } } catch (err) { console.error(err); } }) .catch((e) =&gt; { console.error(e); }); } render(){ return null; } }</code> </pre> <br><p>  рдЖрдк рд╡рд╛рдВрдЫрд┐рдд рдЪреИрдЯ рд░реВрдо рдЦреЛрд▓рдХрд░ рдкреНрд░рдмрдВрдзрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдЗрд╕. <code>this.chatroomId</code> рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/57d/309/a77/57d309a77bb226589ba225c52cfe37d6.png" alt="ChatroomID"></p><br><p>  рдЕрдм <strong>App рдореЗрдВ</strong> рд╣рдо <strong>ChatixSDK</strong> рдШрдЯрдХ рдХреЛ <strong>рдЬреЛрдбрд╝реЗрдВрдЧреЗ</strong> рдФрд░ рдЕрдкрдбреЗрдЯрдЪреИрдЯ рд░реВрдо рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЗрд╕рдореЗрдВ рдлреЗрдВрдХ рджреЗрдВрдЧреЗ, рдЬреЛ рдЪреИрдЯ рдирд╛рдо рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рджреЗрдЧрд╛ред  рд╣рдо рдЗрд╕рдореЗрдВ рдПрдХ <code>ref</code> рд▓рд┐рдВрдХ рднреА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╣рдо рдЗрд╕ рдШрдЯрдХ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">this.chatixSDK = React.createRef();</code> </pre> <br><pre> <code class="plaintext hljs">setChatroomTitle = (newName) =&gt; { const newStateFragment = { chatroomName: newName}; this.setState({...this.state, ...newStateFragment}); };</code> </pre> <br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} updateVisitor={this.onUpdateVisitor} /&gt; &lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt; &lt;ChatixSDK ref={this.chatixSDK} updateChatroomTitle={this.setChatroomTitle} /&gt; &lt;/div&gt; ); };</code> </pre> <br><p>  рд╣реЛ рдЧрдпрд╛ред  рдЕрдм, рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдХреЗ рдареАрдХ рдмрд╛рдж, рд╣рдо рдЪреИрдЯ рдбреЗрдЯрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рдЙрд╕рдХрд╛ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ <strong>рдРрдк</strong> рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдФрд░ рдЪреВрдВрдХрд┐ рд░рд╛рдЬреНрдп рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдХрд╛рд░рдг рдШрдЯрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣реЗрдбрд░ рдореЗрдВ рдирд╛рдо рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдЕрдм рд░рд╛рдЬреНрдп рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдирд╛рдо рдХреЛ рдПрдХ рд░рд┐рдХреНрдд рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">chatroomName: ''</code> </pre> <br><p>  рдЕрдм рд╕рд╛рдЗрдбрдмрд╛рд░ рдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рднрд░реЗрдВред <br>  рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдЖрдк рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдХреЛ рдЪреИрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдЗрд╕ <code>this.sdk.start()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ <code>this.sdk.start()</code> рд╣рдореЗрдВ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЪреИрдЯ рд░реВрдо рдХреА рдПрдХ рд╕реВрдЪреА рдорд┐рд▓рддреА рд╣реИ, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рдЪрд╛рд▓реВ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЗрд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред </p><br><p>  <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">const myChatrooms = await this.sdk.getMyChatrooms(); if (myChatrooms.filter(x =&gt; x.id===this.chatroomId).length === 0) { await this.sdk.connectToChatroom(this.chatroomId); }</code> </pre> <br><p>  рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХрд┐ рд╣рдорд╛рд░рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЪреИрдЯ рд░реВрдо рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ, рд╣рдо рдЗрд╕ рдЪреИрдЯ рдореЗрдВ рдкреНрд░рддрд┐рднрд╛рдЧрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">// lets get all chatroom members using infinite loop with break on empty server response let membersPage = 1; let allChatroomMembers = []; while(true) { let pagedMembers = await this.sdk.getChatroomMembers(this.chatroomId, membersPage++, 10); allChatroomMembers = [...allChatroomMembers, ...pagedMembers]; if (pagedMembers.length === 0) { break; } }</code> </pre> <br><p>  рдпрд╣рд╛рдВ, рдПрдХ рдЕрдирдВрдд рд▓реВрдк рдореЗрдВ, рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рд╕реЗ рдкреЗрдЬ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рддрдХ рдХрд┐ рд╣рдо рд╕рднреА рдХреЛ рдкреНрд░рд╛рдкреНрдд рди рдХрд░ рд▓реЗрдВ, рдЬреИрд╕реЗ рд╣реА рд╣рдо рд╕рднреА рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рд╣рдо рд▓реВрдк рдХреЛ рддреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЪреИрдЯ рд░реВрдо рдХреЗ рдирд╛рдо рдХреА рддрд░рд╣, рд╣рдо рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдореВрд▓ рдШрдЯрдХ рдореЗрдВ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">if (props.setChatroomMembers) { props.setChatroomMembers(allChatroomMembers); }</code> </pre> <br><p>  рдЕрдм, <strong>рдРрдк</strong> рдШрдЯрдХ рдореЗрдВ, рдЗрд╕ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди <code>setChatroomMembers</code> рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЙрдирдХреА рдСрдирд▓рд╛рдЗрди / рдСрдлрд╝рд▓рд╛рдЗрди рд╕реНрдерд┐рддрд┐ рдФрд░ рд╡рд░реНрдгрд╛рдиреБрдХреНрд░рдо рдореЗрдВ рд╕реЙрд░реНрдЯ рдХрд░реЗрдЧрд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд░рд╛рдЬреНрдп рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд░реЗрдЧрд╛ред </p><br><p>  <strong>App.js</strong> </p><br><pre> <code class="plaintext hljs">setChatroomMembers = (members) =&gt; { members.sort(this.sortMembers); const newStateFragment = { members: members}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p>  рдЫрдБрдЯрд╛рдИ рд╕рдорд╛рд░реЛрд╣ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред  рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕реНрдерд┐рддрд┐ рдФрд░ рд╡рд░реНрдгрд╛рдиреБрдХреНрд░рдо рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХреНрд░рдордмрджреНрдз рдХрд░рддрд╛ рд╣реИред </p><br><p>  <strong>App.js</strong> </p><br><pre> <code class="plaintext hljs">sortMembers(a, b) { if (a.is_online === true &amp;&amp; b.is_online === false) { return -1; } else if (b.is_online === true &amp;&amp; a.is_online === false) { return 1; } else { if (a.name &amp;&amp; b.name) { if (a.name.toLocaleUpperCase() &gt; b.name.toLocaleUpperCase()) { return 1; } else if (a.name.toLocaleUpperCase() &lt; b.name.toLocaleUpperCase()) { return -1; } } else if (a.name &amp;&amp; !b.name) { return -1; } else if (!a.name &amp;&amp; b.name) { return 1; } if (a.uuid &gt; b.uuid) { return -1; } else { return 1; } } }</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдо ChatChatSDK рдореЗрдВ setChatroomMembers рдлрд╝рдВрдХреНрд╢рди рдХреЛ <strong>рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ</strong> ред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">render() { return ( &lt;div className="App"&gt; &lt;Header chatroomName={this.state.chatroomName} me={this.state.me} updateVisitor={this.onUpdateVisitor} /&gt; &lt;Main members={this.state.members} messages={this.state.messages} onSendNewMessage={this.onSendNewMessage} me={this.state.me} /&gt; &lt;ChatixSDK ref={this.chatixSDK} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} /&gt; &lt;/div&gt; ); };</code> </pre> <br><p>  рдЕрдм, рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж, рд╣рдо, рд╕рд╛рде рд╣реА рд╣реЗрдбрд░ рдХреЗ рд╕рд╛рде, рд╕рднреА рдЬреБрдбрд╝реЗ рд╣реБрдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ <strong>рдРрдк</strong> рдШрдЯрдХ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВред  рдФрд░ рд░рд╛рдЬреНрдп рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реВрдЪреА рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдХреЛ рднреА рдмрджрд▓реЗрдВред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">members: []</code> </pre> <br><p>  рдЕрдм, рд╕рдорд╛рди рд╕рд┐рджреНрдзрд╛рдВрдд рджреНрд╡рд╛рд░рд╛, рд╣рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╡рд╕реНрддреБ рдФрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдорд┐рд▓рддреА рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ <strong>рдРрдк</strong> рд╕реНрдерд┐рддрд┐ рдкрд░ рднреА рд▓рд┐рдЦрддреЗ рд╣реИрдВ </p><br><p>  <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">// lets load 100 last messages from current chatroom const lastMessages = await this.sdk.getChatroomMessages(this.chatroomId, null, 100); if (props.setChatroomMessages) { props.setChatroomMessages(lastMessages); } if (props.setMe) { const me = this.sdk.getVisitor(); this.props.setMe(me); }</code> </pre> <br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">&lt;ChatixSDK ref={this.chatixSDK} setMe={this.setMe} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} setChatroomMessages={this.setChatroomMessages} /&gt;</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдВрдЧреЗред </p><br><p>  рд╣рдо <strong>рдРрдк рдореЗрдВ</strong> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдлрд╝рдВрдХреНрд╢рди <code>onSendNewMessage</code> рдЬреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХрдВрд╕реЛрд▓ рдХреЛ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдмрд╕ <code>sendChatroomMessage</code> рд╕реЗ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП <code>sendChatroomMessage</code> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗред <br>  рдпрд╣ рдПрдХ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╡рд┐рдзрд┐ рд╣реИ рдФрд░ рдпрд╣ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢ рдХреА рд╡рд╕реНрддреБ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдо рд░рд╛рдЬреНрдп рдореЗрдВ рд╕рдВрджреЗрд╢ рд╕рд░рдгреА рдореЗрдВ рддреБрд░рдВрдд рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рд╡реИрд╕реЗ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдо рдкрд╣рд▓реЗ рдмрдирд╛рдП рдЧрдП рдЗрд╕. <code>this.chatixSDK</code> рд▓рд┐рдВрдХ <code>this.chatixSDK</code> рдХреЛ <code>this.chatixSDK</code> рдХрд░ рд░рд╣реЗ рд╣реИрдВред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">onSendNewMessage = async (message) =&gt; { let receivedMsg = await this.chatixSDK.current.sendChatroomMessage(message); const currentMessages = this.state.messages; currentMessages.push(receivedMsg); const newStateFragment = {messages: currentMessages}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p>  рдЪреВрдВрдХрд┐ рд░рд╛рдЬреНрдп рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреЗ рдХрд╛рд░рдг рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реВрдЪреА рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧреАред  рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╕рдВрджреЗрд╢ рдЬреЛрдбрд╝рддреЗ рд╕рдордп, рд╕рдВрджреЗрд╢ рдмреНрд▓реЙрдХ рдореЗрдВ рд╕реНрдХреНрд░реЙрд▓ рдиреАрдЪреЗ рдЪрд▓рд╛ рдЬрд╛рдПред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <strong>MessageContainer</strong> рдШрдЯрдХ рдЦреЛрд▓реЗрдВ рдФрд░ <strong>useEffect</strong> рд╣реБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <strong>,</strong> рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрджреЗрд╢ рд╕рд░рдгреА рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВ, рдФрд░ рдЬреИрд╕реЗ рд╣реА рдпрд╣ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢ рдЬреЛрдбрд╝реЗ рдЧрдП рд╣реИрдВ, рд╣рдореЗрдВ рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ <strong>рд╕реНрдХреНрд░реЙрд▓рд╣рд╛рдЗрдЯ</strong> рдмреНрд▓реЙрдХ рдорд┐рд▓рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЙрд╕реА рд░рд╛рд╢рд┐ рд╕реЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ </p><br><pre> <code class="plaintext hljs">function MessageContainer(props) { const messagesContainer = React.createRef(); useEffect(() =&gt; { messagesContainer.current.scrollTop = messagesContainer.current.scrollHeight }, [props, messagesContainer]); const messageList = props.messages.map(message =&gt; &lt;Message key={message.uuid} sender={props.members.find((member) =&gt; member.uuid === message.sender_id)} message={message} /&gt; ); return ( &lt;section className="MessageContainer" ref={messagesContainer}&gt; {messageList} &lt;/section&gt; ); }</code> </pre> <br><p>  рдЕрдм рдпреВрдЬрд╝рд░рдиреЗрдо рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдЦрддреНрдо рдХрд░рддреЗ рд╣реИрдВред  рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рд╣реЗрдбрд░ рдореЗрдВ рдПрдХ рдЗрдирдкреБрдЯ рдмрдирд╛рдпрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдмрджрд▓рддреЗ рд╕рдордп, рд╣рдо рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ <strong>рдРрдк</strong> рдШрдЯрдХ рдкрд░ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╡рд╣рд╛рдВ рд╣рдо рдЗрд╕реЗ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдЪрд▓рд┐рдП рдЗрд╕ рдлрдВрдХреНрд╢рди рдХреЛ рдкреВрд░рд╛ рдХрд░рддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ <code>this.chatixSDK.current.updateVisitor(user)</code> рдХреЛ рдЗрд╕рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ, рдЗрд╕рд╕реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдбреЗрдЯрд╛ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдФрд░ рдмрд╕ рд╕реНрдерд╛рдиреАрдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ, рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдо <code>this.state.me</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ <code>this.state.members</code> рдПрд░реЗ рдореЗрдВ <code>this.state.members</code> рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рднреА <code>this.state.members</code> рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВред  рдЙрдиреНрд╣реЗрдВ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдирд╛рдо рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p>  <strong>рдРрдк</strong> </p><br><pre> <code class="plaintext hljs">onUpdateVisitor = (user) =&gt; { this.chatixSDK.current.updateVisitor(user) this.setMe(user) let currentUser = this.state.members.find((member) =&gt; (member.uuid === user.uuid)) let currentUserIndex = this.state.members.indexOf(currentUser) let newMembers = [...this.state.members] newMembers[currentUserIndex] = user; this.setState({ members: newMembers }) }</code> </pre> <br><p>  рдЕрдм рд╣рдореЗрдВ рдпрд╣ рд╕реАрдЦрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рдХреИрд╕реЗ рджрд┐рдпрд╛ рдЬрд╛рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ / рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдФрд░ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рдЬреБрдбрд╝реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдПред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <strong>рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░</strong> рдореЗрдВ <strong>ChatixSDK.js</strong> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, рд╣рдореЗрдВ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЪреИрдЯ-рдХреЛрд░</a> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкреЗрдЬ рдкрд░ рдХрд╛рд░реНрдпреЛрдВ рдФрд░ рддрд░реНрдХреЛрдВ рдХреА рдкреВрд░реА рд╕реВрдЪреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  <strong>рд╡рд░реНрддрдорд╛рди рдореЗрдВ</strong> рд╣рдо <strong>onChatroomMessageReceived</strong> , <strong>onMemberConnectedToChatroom</strong> , <strong>onMemberDisconnectedFromChatroom</strong> рдФрд░ <strong>onApplyVisitorInfo</strong> рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред </p><br><p>  рд╣рдо рдЙрдиреНрд╣реЗрдВ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╣рдо рдЕрдкрдиреЗ рдХреЙрд▓рдмреИрдХ рдХреЛ рдХрд╣рддреЗ рд╣реИрдВ рдЬреЛ рд╣рдо <strong>рдРрдк</strong> рдореЗрдВ рдмрдирд╛рдПрдВрдЧреЗред </p><br><pre> <code class="plaintext hljs">this.sdk.onChatroomMessageReceived = (chatroomId, message) =&gt; { if (chatroomId === this.chatroomId) { this.props.onNewMessageReceived(message); } }; this.sdk.onMemberConnectedToChatroom = (chatroomId, member) =&gt; { if (chatroomId === this.chatroomId &amp;&amp; props.addChatroomMember) { this.props.addChatroomMember(member); } }; this.sdk.onMemberDisconnectedFromChatroom = (chatroomId, member) =&gt; { if (chatroomId === this.chatroomId &amp;&amp; props.removeChatroomMember) { this.props.removeChatroomMember(member); } }; this.sdk.onApplyVisitorInfo = (visitor) =&gt; { this.props.onMemberUpdated(visitor) }</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, <strong>рдРрдк рдкрд░ рдЬрд╛рдПрдВ</strong> рдФрд░ рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдмрдирд╛рдПрдВред </p><br><p>  <strong>onNewMessageReceived (рд╕рдВрджреЗрд╢)</strong> <br>  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рд╕рдВрджреЗрд╢ рдСрдмреНрдЬреЗрдХреНрдЯ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдмрд╕ рдЗрд╕реЗ рдмрд╛рдХреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред          ,        . </p><br><p> <strong>App</strong> </p><br><pre> <code class="plaintext hljs">onNewMessageReceived = (message) =&gt; { const currentMessages = this.state.messages; currentMessages.push(message); const newStateFragment = {messages: currentMessages}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p> <strong>App</strong> <br> <strong>addChatroomMember(member)</strong> <br>            state     members.              . </p><br><p> <strong>App</strong> </p><br><pre> <code class="plaintext hljs">addChatroomMember = (member) =&gt; { const newStateFragment = {}; const currentMembers = this.state.members; currentMembers.push(member); currentMembers.sort(this.sortMembers); newStateFragment.members = currentMembers; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p> <strong>App</strong> <br> <strong>removeChatroomMember(memberId)</strong> <br>         state     <strong>members</strong>  <strong>state</strong> . </p><br><pre> <code class="plaintext hljs">removeChatroomMember = (memberId) =&gt; { const currentMembers = this.state.members; const filteredMembers = currentMembers.filter(x=&gt; x.uuid !== memberId); const newStateFragment = {members: filteredMembers}; this.setState({...this.state, ...newStateFragment}); }</code> </pre> <br><p> <strong>onMemberUpdated(updatedMember)</strong> <br>      .        .       <strong>state</strong>     . </p><br><p> <strong>App</strong> </p><br><pre> <code class="plaintext hljs">onMemberUpdated = (updatedMember) =&gt; { let oldMember = this.state.members.find(member =&gt; member.uuid === updatedMember.uuid); oldMember = this.state.members.indexOf(oldMember); let newStateMembers = this.state.members; newStateMembers[oldMember] = updatedMember; this.setState({ members: newStateMembers }) }</code> </pre> <br><p>      <strong>ChatixSDK</strong> </p><br><p> <strong>ChatixSDK</strong> </p><br><pre> <code class="plaintext hljs">&lt;ChatixSDK ref={this.chatixSDK} setMe={this.setMe} updateChatroomTitle={this.setChatroomTitle} setChatroomMembers={this.setChatroomMembers} addChatroomMember={this.addChatroomMember} removeChatroomMember={this.removeChatroomMember} setChatroomMessages={this.setChatroomMessages} onNewMessageReceived={this.onNewMessageReceived} onMemberUpdated={this.onMemberUpdated} /&gt;</code> </pre> <br><p>  рд╣реЛ рдЧрдпрд╛!       \ ,   ,    /   . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">alekseyso</a> <br>  рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рд╛рдордЧреНрд░реА: <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SDK Chatix ()</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SDK Chatix (npm)</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">192   -</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi474492/">https://habr.com/ru/post/hi474492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi474478/index.html">рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдкрд░ рд╕рд╛рд░рд╛рдВрд╢ред рдЧрдгрд┐рддреАрдп рдЖрдБрдХрдбрд╝реЗред рдЕрдзрд┐рдХрддрдо рд╕рдВрднрд╛рд╡рдирд╛ рд╡рд┐рдзрд┐</a></li>
<li><a href="../hi474480/index.html">рдпрджрд┐ рдмрдЪрдкрди рдореЗрдВ рдпрд╣ рдирд╣реАрдВ рдерд╛ рддреЛ рдмрдЪреНрдЪреЛрдВ рдХреЛ рддрдХрдиреАрдХ рдХрд╛ рд╕рд╣реА рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рд╢рд┐рдХреНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП?</a></li>
<li><a href="../hi474484/index.html">рдореЙрдХ рдПрдХ рдмреИрд╕рд╛рдЦреА рдирд╣реАрдВ рд╣реИ, рдирдХрд▓реА рдПрдХ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рд╣реИ</a></li>
<li><a href="../hi474488/index.html">рдбреЙрдЯрдиреЗрдХреНрд╕реНрдЯ рдФрд░ рд╣реЛрд▓реАрдЬреЗрдПрд╕ рдХрд╛ рдореБрдлреНрдд рдкреНрд░рд╕рд╛рд░рдг</a></li>
<li><a href="../hi474490/index.html">рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИ: рдХреЛрдХреАрди рдирд╛рдХ рдПрд╕реНрдкрд┐рд░реЗрдЯрд░ рдЕрд╡рд▓реЛрдХрди</a></li>
<li><a href="../hi474494/index.html">рдХреИрд╕рд╛ рдерд╛ рдЬрд╝рдмрд┐рдХреНрд╕ рд╢рд┐рдЦрд░ рд╕рдореНрдореЗрд▓рди 2019</a></li>
<li><a href="../hi474496/index.html">HighLoad ++ 2019 рдкрд░ рдбреЗрдЯрд╛рдмреЗрд╕</a></li>
<li><a href="../hi474498/index.html">JavaFX рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓: рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб</a></li>
<li><a href="../hi474500/index.html">рдЧреНрд░реЗрдлрд╛рдирд╛ рдХреЗ рд▓рд┐рдП рдкреНрд▓рдЧрдЗрди рд╡рд┐рдХрд╛рд╕: рдкреВрд░реНрдг рд╢рдВрдХреБ рдХреА рдХрд╣рд╛рдиреА</a></li>
<li><a href="../hi474502/index.html">рдЬреЛрдХрд░ 2019 рдореЗрдВ рдУрдбрдиреЛрдХрд▓рд╛рд╕реНрдирд┐рдХрд┐рдХреА рдкрд╛рд░реНрд╕рд┐рдВрдЧ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>