<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏽 👐🏻 🙌🏾 Portando aplicativos da área de trabalho para o .NET Core 🧓🏻 👨🏿‍🏫 👩‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde que eu tenho trabalhado com a comunidade na portabilidade de aplicativos de desktop do .NET Framework para o .NET Core, notei que existem dois g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Portando aplicativos da área de trabalho para o .NET Core</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/455325/"><p>  Desde que eu tenho trabalhado com a comunidade na portabilidade de aplicativos de desktop do .NET Framework para o .NET Core, notei que existem dois grupos de pessoas: alguns desejam uma lista muito simples e curta de instruções para que seus aplicativos sejam portados. O .NET Core, enquanto outros preferem uma abordagem mais baseada em princípios, com mais informações básicas.  Em vez de escrever um documento "Canivete suíço", publicaremos duas postagens no blog, uma para cada campo: </p><br><ul><li>  <strong>Este post é um caso simples</strong> .  Ele é focado em instruções simples e aplicativos menores e é a maneira mais fácil de mover seu aplicativo para o .NET Core. </li><li>  <strong>Publicaremos outro post para casos mais complicados</strong> .  Esta postagem se concentrará mais em aplicativos não triviais, como o aplicativo WPF com dependências no WCF e nos pacotes de UI de terceiros. </li></ul><br><p>  Se você prefere assistir a vídeos em vez de ler, aqui está o vídeo em que faço tudo o que está descrito abaixo. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tp1EOFtnTmA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><h2>  Etapa 0 - Pré-requisitos </h2><br><p>  Para portar seus aplicativos de desktop para o Core, você precisará do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">.NET Core 3</a> e do Visual Studio 2019. </p><br><h2>  Etapa 1 - Execute o analisador de portabilidade </h2><br><p>  Antes de portar, verifique se o aplicativo é compatível com o .NET Core.  Para fazer isso, baixe e execute o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">.NET Portability Analyzer</a> . </p><br><ul><li>  Na primeira guia, Resumo da portabilidade, se você possui apenas 100% na coluna .NET Core (tudo está destacado em verde), seu código é totalmente compatível, vá para a Etapa 2. </li><li>  Se você tiver valores inferiores a 100%, verifique primeiro todos os assemblies que não fazem parte do seu aplicativo.  Para esses, verifique se os autores estão fornecendo versões para o .NET Core ou .NET Standard. </li><li>  Agora observe a outra parte dos assemblies provenientes do seu código.  Se você não possui nenhum dos seus assemblies listados no relatório de portabilidade, vá para a Etapa 2. Se tiver, abra a guia Detalhes, filtre a tabela clicando na coluna Montagem e concentre-se apenas nos que são do seu aplicativo.  Percorra a lista e refatorar seu código para parar de usar a API ou substituir o uso da API por alternativas do .NET Core. </li></ul><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4b0/588/322/4b05883226eaae0b7c4dd18a893f5741.png" width="615" height="232"></a> </p><br><h2>  Etapa 2 - Migrar para .csproj no estilo SDK </h2><br><p>  No <strong>Gerenciador de Soluções</strong> , clique com o botão direito do mouse no seu projeto (não na solução!).  Você vê <strong>Editar arquivo de projeto</strong> ?  Se fizer isso, você já usa o arquivo de projeto no estilo SDK, portanto, você deve passar para a <strong>Etapa 3</strong> .  Caso contrário, faça o seguinte. </p><br><ul><li> Verifique no <strong>Solution Explorer</strong> se o seu projeto contém um arquivo <code>packages.config</code> .  Caso contrário, nenhuma ação será necessária; se o fizer, clique com o botão direito do mouse em <code>packages.config</code> e escolha <strong>Migrar packages.config para PackageReference</strong> .  Depois clique em <strong>OK</strong> . </li><li>  Abra o arquivo do projeto clicando com o botão direito do mouse no projeto e escolha <strong>Descarregar Projeto</strong> .  Em seguida, clique com o botão direito do mouse no projeto e escolha <strong>Editar &lt;nome do seu projeto&gt; .csproj</strong> . </li><li>  Copie o conteúdo do arquivo do projeto em algum lugar, por exemplo, no Bloco de Notas, para que você possa pesquisar mais tarde. </li><li>  Exclua tudo do seu arquivo de projeto aberto no Visual Studio (eu sei que parece agressivo, mas adicionaremos apenas o conteúdo necessário da cópia que acabamos de fazer em algumas etapas).  Em vez do texto que você acabou de excluir, cole o código a seguir.Para um aplicativo WinForms: <br><br><pre> <code class="cs hljs">&lt;Project Sdk=<span class="hljs-string"><span class="hljs-string">"Microsoft.NET.Sdk.WindowsDesktop"</span></span>&gt; &lt;PropertyGroup&gt; &lt;OutputType&gt;WinExe&lt;/OutputType&gt; &lt;TargetFramework&gt;net472&lt;/TargetFramework&gt; &lt;UseWindowsForms&gt;<span class="hljs-literal"><span class="hljs-literal">true</span></span>&lt;/UseWindowsForms&gt; &lt;GenerateAssemblyInfo&gt;<span class="hljs-literal"><span class="hljs-literal">false</span></span>&lt;/GenerateAssemblyInfo&gt; &lt;/PropertyGroup&gt; &lt;/Project&gt;</code> </pre> <br>  Para um aplicativo WPF: <br><br><pre> <code class="cs hljs">&lt;Project Sdk=<span class="hljs-string"><span class="hljs-string">"Microsoft.NET.Sdk.WindowsDesktop"</span></span>&gt; &lt;PropertyGroup&gt; &lt;OutputType&gt;WinExe&lt;/OutputType&gt; &lt;TargetFramework&gt;net472&lt;/TargetFramework&gt; &lt;UseWPF&gt;<span class="hljs-literal"><span class="hljs-literal">true</span></span>&lt;/UseWPF&gt; &lt;GenerateAssemblyInfo&gt;<span class="hljs-literal"><span class="hljs-literal">false</span></span>&lt;/GenerateAssemblyInfo&gt; &lt;/PropertyGroup&gt; &lt;/Project&gt;</code> </pre> </li><li>  No bloco de notas, procure <code>PackageReference</code> .  Se você não encontrou nada, siga em frente.  Se você encontrou <code>PackageReference</code> , copie todo o <code>&lt;ItemGroup&gt;</code> que contém <code>PackageReference</code> no seu arquivo de projeto, aberto no Visual Studio, logo abaixo das linhas que você colou na etapa acima.  Faça isso para cada ocorrência do <code>PackageReference</code> você encontrou.  O bloco copiado deve ficar assim. <br><br><pre> <code class="cs hljs">&lt;ItemGroup&gt; &lt;PackageReference Include=<span class="hljs-string"><span class="hljs-string">"NUnit"</span></span>&gt; &lt;Version&gt;<span class="hljs-number"><span class="hljs-number">3.11</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>&lt;/Version&gt; &lt;/PackageReference&gt; &lt;/ItemGroup&gt;</code> </pre> </li><li>  Agora faça o mesmo acima para <code>ProjectReference</code> .  Se você não encontrou nada, siga em frente.  Se você encontrou algum item do <code>ProjectReference</code> , eles se pareceriam com isso. <br><br><pre> <code class="cs hljs">&lt;ItemGroup&gt; &lt;ProjectReference Include=<span class="hljs-string"><span class="hljs-string">"..\WindowsFormsApp1\WindowsFormsApp1.csproj"</span></span>&gt; &lt;Project&gt;{<span class="hljs-number"><span class="hljs-number">7b</span></span>ce0d50<span class="hljs-number"><span class="hljs-number">-17f</span></span>e<span class="hljs-number"><span class="hljs-number">-4f</span></span>da-b6b7-e7960aed8ac2}&lt;/Project&gt; &lt;Name&gt;WindowsFormsApp1&lt;/Name&gt; &lt;/ProjectReference&gt; &lt;/ItemGroup&gt;</code> </pre> </li><li>  Você pode remover linhas com as propriedades <code>&lt;Project&gt;</code> e <code>&lt;Name&gt;</code> , pois elas não são necessárias no novo estilo de arquivo do projeto.  Portanto, para cada <code>ProjectReference</code> que você encontrou (se houver), copie apenas <code>ItemGroup</code> e <code>ProjectReference</code> como este. <br><br><pre> <code class="cs hljs">&lt;ItemGroup&gt; &lt;ProjectReference Include=<span class="hljs-string"><span class="hljs-string">"..\WindowsFormsApp1\WindowsFormsApp1.csproj"</span></span> /&gt; &lt;/ItemGroup&gt;</code> </pre> <br>  Salve tudo.  Feche o arquivo .csproj no Visual Studio.  Clique com o botão direito do mouse no seu projeto no <strong>Solution Explorer</strong> e selecione <strong>Recarregar Projeto</strong> .  Reconstrua e verifique se não há erros. <br><p>  Boas notícias, você acabou de atualizar seu arquivo de projeto para o novo estilo SDK!  O projeto ainda está direcionado ao .NET Framework, mas agora você poderá redirecioná-lo para o .NET Core. </p><br><h2>  Etapa 3 - redirecionar para o .NET Core </h2><br><p>  Abra o arquivo do seu projeto clicando duas vezes no seu projeto no <strong>Solution Explorer</strong> .  Localize a propriedade <code>&lt;TargetFramework&gt;</code> e altere o valor para <code>netcoreapp3.0</code> .  Agora o seu arquivo de projeto deve ficar assim: </p><br><pre> <code class="cs hljs">&lt;Project Sdk=<span class="hljs-string"><span class="hljs-string">"Microsoft.NET.Sdk.WindowsDesktop"</span></span>&gt; &lt;PropertyGroup&gt; &lt;OutputType&gt;WinExe&lt;/OutputType&gt; &lt;TargetFramework&gt;netcoreapp3<span class="hljs-number"><span class="hljs-number">.0</span></span>&lt;/TargetFramework&gt; ... &lt;/PropertyGroup&gt; ... &lt;/Project&gt;</code> </pre> <br><p>  Crie e execute seu projeto.  <strong>Parabéns, você portou para o .NET Core 3!</strong> </p><br><h2>  Corrigindo erros </h2><br><p>  Se você receber erros como </p><br><pre> <code class="cs hljs">The type or <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> &lt;<span class="hljs-title"><span class="hljs-title">some</span></span> <span class="hljs-title"><span class="hljs-title">name</span></span>&gt; <span class="hljs-title"><span class="hljs-title">could</span></span> <span class="hljs-title"><span class="hljs-title">not</span></span> <span class="hljs-title"><span class="hljs-title">be</span></span> <span class="hljs-title"><span class="hljs-title">found</span></span></code> </pre> <br><p>  ou </p><br><pre> <code class="cs hljs">The name &lt;some name&gt; does not exist <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the current context</code> </pre> <br><p>  e seu relatório de portabilidade estiver verde, será fácil corrigi-lo adicionando um pacote NuGet à biblioteca correspondente.  Se você não conseguir encontrar o pacote NuGet com a biblioteca que está faltando, tente fazer referência a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microsoft.Windows.Compatibility</a> .  Este pacote adiciona ~ 21K APIs .NET do .NET Framework. </p><br><h2>  Trabalhando com designers </h2><br><p>  Embora seja possível editar a interface do usuário do seu aplicativo via código, os desenvolvedores geralmente preferem usar os designers visuais.  Com o .NET Core, tivemos que re-projetar a maneira como os designers trabalham com projetos do .NET Core: </p><br><ul><li>  O designer do WPF já está em visualização e estamos trabalhando para adicionar mais funcionalidades a ele. </li><li>  O designer do WinForms para .NET Core estará disponível posteriormente e, enquanto isso, você poderá usar o designer do .NET Framework WinForms como uma solução alternativa. </li></ul><br><p>  Aqui está como você pode usar o designer do .NET Framework WinForms: </p><br><ol><li>  Copie o arquivo .csproj (digamos que você tenha o <code>MyProject.csproj</code> ), atribua um nome diferente, por exemplo, <code>MyProject.NetFramework.csproj</code> e coloque-o ao lado do arquivo de projeto existente. </li><li>  Verifique se o seu projeto está fechado no Visual Studio, abra o novo projeto <code>MyProject.NetFramework.csproj</code> . <br>  No <strong>Gerenciador de Soluções</strong> , clique com o botão direito do mouse em seu projeto e selecione <strong>Propriedades</strong> .  Na guia Aplicativo (deve estar aberto por padrão), defina o <strong>nome do Assembly</strong> e o <strong>namespace padrão</strong> com os mesmos valores do seu projeto inicial (remova “.NetFramework” dos nomes). <br>  Salve esta solução ao lado da sua solução existente. </li><li>  Abra o novo arquivo de projeto e altere o <code>&lt;TargetFramework&gt;</code> para <code>net472</code> . </li><li>  Agora, quando você precisar usar o designer WinForms, carregue seu projeto com o arquivo de projeto <code>MyProject.NetFramework.csproj</code> e obterá a experiência completa do designer do .NET Framework.  Quando terminar o designer, feche e abra seu projeto com o arquivo de projeto do .NET Core. </li><li>  Esta é apenas uma solução alternativa até que o designer do WinForms para .NET Core esteja pronto. </li></ol><br><h2>  Por que porta para o .NET Core </h2><br><p>  Confira o vídeo em que Scott Hunter e eu estamos conversando sobre todas as novidades que vêm com o .NET Core 3 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Porting para o .NET Core 3.0</a> . </p></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt455325/">https://habr.com/ru/post/pt455325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt455314/index.html">O que é uma rede de serviços</a></li>
<li><a href="../pt455316/index.html">Modificamos a pilha Bluetooth para melhorar o som em fones de ouvido sem codecs AAC, aptX e LDAC</a></li>
<li><a href="../pt455318/index.html">Quais são as áreas de aplicação da impressão 3D?</a></li>
<li><a href="../pt455319/index.html">Artista 3D de fluxo de trabalho. Como não se afogar em uma tonelada de informações. Parte 1</a></li>
<li><a href="../pt455321/index.html">Domótica faça você mesmo</a></li>
<li><a href="../pt455329/index.html">Anúncio Extensão (Ferramentas de Borda) da IoT do Azure (Visualização)</a></li>
<li><a href="../pt455331/index.html">Como os computadores aprenderam a reconhecer imagens incrivelmente bem</a></li>
<li><a href="../pt455333/index.html">Quem colocou o Python na atualização do Windows 10 de maio de 2019?</a></li>
<li><a href="../pt455335/index.html">Petty Petty Joy # 3: Poesia</a></li>
<li><a href="../pt455337/index.html">Quem adicionou o Python à atualização mais recente do Windows?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>