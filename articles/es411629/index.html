<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèº üò∫ üóûÔ∏è C√≥mo restauramos el horario del autob√∫s interurbano üë©üèæ‚Äçüéì üõ©Ô∏è üö∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como en todos los mercados normales, los boletos de autob√∫s se han vendido en l√≠nea desde hace un par de a√±os. No es necesario hacer cola en la caja d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo restauramos el horario del autob√∫s interurbano</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tuturu/blog/411629/"><img src="https://habrastorage.org/webt/zq/0q/cb/zq0qcbx7jnixdqezvc2pwx3doqs.jpeg"><br><br>  Como en todos los mercados normales, los boletos de autob√∫s se han vendido en l√≠nea desde hace un par de a√±os.  No es necesario hacer cola en la caja de la estaci√≥n de autobuses para recibir un recibo.  En Rusia, se puede comprar en l√≠nea hasta el 60% de las rutas (en d√≠as mejores, la estimaci√≥n es algo borrosa teniendo en cuenta los vuelos grises).  Incluy√©ndonos, Tutu. <br><br>  Lo primero que quer√≠amos era sacar el horario en l√≠nea tambi√©n y hacer posible comprar un boleto en un par de clics.  Estamos acostumbrados a resolver tales problemas, y de alguna manera nos comimos al perro en el transporte ferroviario.  Los autobuses a primera vista no parec√≠an muy complicados.  Es solo un negocio: negociar con los sistemas de automatizaci√≥n de la estaci√≥n de autobuses, descargar sus vuelos a trav√©s de la API y peinar un poco. <br><br>  <b>Trabajo f√°cil, dijeron.</b>  Un proyecto para un par de d√≠as, dijeron. <br><br>  Nuestras ideas falsas: <br><br>  1. Todas las estaciones de autobuses del pa√≠s est√°n automatizadas. <br>  2. Bien, la mayor√≠a est√°n automatizados. <br>  3. La contabilidad en un cuaderno no se realiza en ning√∫n otro lugar. <br>  4. Bien, pero siempre hay alguna forma de conocer el horario de forma remota. <br>  5. Los que est√°n automatizados muestran la misma ruta por igual. <br>  6. Bien, al menos aquellos que est√°n automatizados por el mismo sistema muestran igualmente la misma ruta. <br>  7. Bien, donde no hay automatizaci√≥n, al menos hay un horario. <br>  8. Bueno, debe haber un horario, ¬°porque sin √©l solo hay tr√°fico ilegal! <br>  9. El tr√°fico ilegal no es suficiente. <br>  10. Bien, hay menos del 10% del mercado. <br>  11. Se puede comprar un boleto all√≠ y de regreso. <br>  12. No hay rutas de ida. <br>  13. Bueno, ¬°al menos los autobuses vuelven!  √ârase una vez ... <br>  14. No puede dejar 300 autobuses a otra ciudad en un a√±o y no regresar. <br>  15. Las paradas tienen diferentes nombres √∫nicos. <br>  16. No habr√° problemas con una parada llamada "Turn" o "Repostar". <a name="habracut"></a><br>  17. Las paradas dentro de la regi√≥n tienen diferentes nombres. <br>  18. No habr√° problemas con una parada con el nombre "Ruta". <br>  19. Las paradas dentro de la ciudad tienen diferentes nombres. <br>  20. Una parada solo puede tener un nombre. <br>  21. De acuerdo, no m√°s de cinco nombres de alias. <br>  22. Estos alias tambi√©n son bastante √∫nicos. <br>  23. En cualquier caso, las paradas en documentos oficiales tienen coordenadas. <br>  24. De acuerdo, la parada se indica al menos con la ciudad / regi√≥n. <br>  25. Cuando hay un horario para una parada, se sabe de d√≥nde vino y ad√≥nde ir√° el autob√∫s. <br>  26. Bien, esto siempre se puede encontrar en los documentos. <br>  27. ¬°Maldita sea, al menos hay un horario para una parada espec√≠fica! <br>  28. La ruta ciudad A - ciudad B es del centro al centro. <br>  29. Bueno, al menos √©l conduce a la ciudad de B. <br>  30. Bueno, al menos una vez condujo a la ciudad de B. <br>  31. Los autobuses no pueden recoger y desaparecer en el medio de la ruta. <br>  32. Un vuelo a una hora espec√≠fica = un autob√∫s. <br>  33. Un autob√∫s no puede moverse a m√°s de 120 kil√≥metros por hora. <br>  34. El centro de la ciudad es un punto comprensible. <br>  35. Bien, esta es al menos la estaci√≥n principal de autobuses. <br>  36. Bien, esto es al menos alg√∫n tipo de estaci√≥n de autobuses. <br>  37. Bien, al menos en la ciudad. <br>  38. No puede ser que el horario sea uno, pero la respuesta del sistema de la estaci√≥n para un vuelo espec√≠fico es diferente. <br>  39. Si puede comprar un boleto all√≠, a su llegada puede comprar un regreso. <br>  40. Los boletos de ida y vuelta cuestan lo mismo. <br>  41. Bueno, no pueden diferir en precio a la mitad. <br><br>  Esto es lo principal.  Todos los d√≠as complementamos esta lista con nuevas cosas peque√±as.  Ahora hablemos un poco m√°s.  Al principio, sobre la base de lo b√°sico, los vuelos oficiales. <br><br><h3>  ¬øQu√© es un vuelo gris? </h3><br>  Hay diferentes trenes en los ferrocarriles y diferentes transportistas y trenes compiten bastante activamente entre s√≠.  Pero cuando compra un boleto, lo compra en √∫ltima instancia en una ventana, porque la infraestructura se reduce a los ferrocarriles rusos.  Sus rieles son su est√°ndar, no colapsar√°n <br><br>  Ya hay un orden de magnitud de m√°s operadores en la aviaci√≥n, pero hay grandes nodos: aeropuertos, est√°ndares comunes y un √∫nico sistema de informaci√≥n (m√°s precisamente, varios), en el que hay identificadores √∫nicos elementales para cada nodo. <br><br>  La informaci√≥n lleg√≥ a los autobuses hace mucho tiempo, pero el mercado, en t√©rminos de TI, es similar a un ornitorrinco.  Esto es mil estaciones de autobuses y diez mil transportistas.  S√≠, hay grandes grupos como Mostransavto, pero tambi√©n hay IP con un bus oxidado.  Incluso las peque√±as estaciones de autobuses en las aldeas tienen sus propios est√°ndares. <br><br>  Y lo m√°s divertido: si no hay transportes ilegales en los ferrocarriles y en el aire, entonces el mercado de autobuses sigue siendo en gran medida "gris".  Estoy hablando de una "parada en un puesto cerca de la estaci√≥n de autobuses" para recoger m√°s pasajeros, y de minibuses en los servicios de otros viajeros, por ejemplo. <br><br>  Si el conductor del vag√≥n de tren recoge a los pasajeros por dinero en efectivo de la estaci√≥n y los coloca en su compartimento, esto, por supuesto, es un transporte gris.  Pero el vuelo en s√≠ no es "gris".  Y en el transporte en autob√∫s, la ruta y el horario son importantes.  Si tomas tu autob√∫s y llevas pasajeros a alg√∫n lugar, entonces este es un vuelo personalizado hecho una vez (fletar un autob√∫s, algo as√≠ como una carta donde se conoce de antemano la lista de pasajeros) o transporte no comercial (autobuses a centros comerciales o autobuses a oficinas del metro). <br><br>  Consigui√≥ amigos en Gazelle y condujo hasta la caba√±a: no tiene derecho a vender boletos.  O pague una multa de alrededor de 200 mil rublos del transportista de la entidad legal. <br><br>  Un vuelo "gris" es algo que parece ordenado, pero no lo hace (venta ilegal de boletos), o es solo un viaje indocumentado con pasajeros, que l√≥gicamente deber√≠a ser gratis, pero en realidad el conductor recolecta dinero para entradas y no emite ning√∫n documento de respaldo. <br><br>  Y tambi√©n se puede implementar un vuelo "gris" utilizando la infraestructura de la estaci√≥n de autobuses, aunque en los √∫ltimos tiempos ha habido menos casos de este tipo.  Esto es cuando los pasajeros aterrizan legalmente, pero el desembarque se encuentra en un punto de parada ilegal. <br><br>  Si algo te sucede durante un vuelo gris, este es tu problema.  En el caso del funcionario, este es un problema del transportista.  Cabe se√±alar que el horario de operaci√≥n y ocio de la compa√±√≠a gris no est√° regulado.  Adem√°s, el conductor "gris" no se somete a un examen m√©dico previo al viaje. <br><br><h3>  ¬øQu√© es una "compra de boletos en l√≠nea"? </h3><br>  Cuando Rusia entr√≥ valientemente en la era digital, la mano invisible del mercado mostr√≥ que era necesario vender boletos en l√≠nea.  Es elemental m√°s rentable para las estaciones de autobuses. <br><br>  Sin embargo, como el mercado est√° fragmentado, por regla general, entran en juego las siguientes entidades: los agregadores.  Hay varios sistemas de tickets importantes y docenas de sistemas m√°s peque√±os.  Y la estaci√≥n de autobuses puede adquirir su propio sistema de informaci√≥n e intentar cambiar de alguna manera los datos del grande. <br><br>  Los tres jugadores de automatizaci√≥n m√°s grandes en Rusia son E-traffic, KVC y Avibus.  Automatizan la estaci√≥n de autobuses y le permiten abrir la API para los agregadores, si a la estaci√≥n de autobuses o al operador no le importa.  A trav√©s de sus sistemas, puede llegar a los boletos de la estaci√≥n de autobuses o transportista.  Por ejemplo, Buses of the Big Country nos da acceso directo a sus rutas; as√≠ es como se construye el trabajo directamente con los jugadores m√°s grandes.  Pero con aquellos empresarios que compraron un autob√∫s en los a√±os 80 y viaja, no funcionar√° de esa manera.  O hay operadores que trabajaron bien durante 40 a√±os sin su Internet y no entienden por qu√© es necesario.  Con cualquier intento de reunirlos a todos en una sola asociaci√≥n (perm√≠tanme recordarles que se trata de decenas de miles de personas jur√≠dicas y empresarios individuales), todos se preguntan de manera amigable y sincera por qu√© es necesario. <br><br>  Trabajamos espec√≠ficamente con peque√±as compa√±√≠as a trav√©s de un agregador que recoge sus vuelos a nivel de las estaciones de autobuses de salida. <br><br>  El siguiente freno importante en el mercado son los requisitos para imprimir un boleto (m√°s precisamente, un recibo de ruta).  Puede ingresar al tren mediante el registro electr√≥nico solo con un pasaporte en la mano.  Se le imprimir√° un boleto de avi√≥n en todas partes en el aeropuerto antes de abordar.  Pero en el autob√∫s: busque una impresora, las estaciones de autobuses no siempre brindan dichos servicios.  Afortunadamente, aqu√≠ el papel debe ser derrotado tal como fue derrotado en el ferrocarril.  Con el tiempo <br><br><h3>  Ahora sangre y lagrimas </h3><br>  Los sistemas de automatizaci√≥n, incluso los m√°s grandes, funcionan muy localmente.  Es decir, automatizan la ciudad, en el mejor de los casos, la regi√≥n.  Luego, si es posible, ve a los vecinos. <br>  Por lo tanto, todos los sistemas usan una estructura de geodatos muy simple (o sin uso).  Es posible que no haya dicho par√°metro en la parada, ya que las coordenadas, la regi√≥n / regi√≥n / regi√≥n tambi√©n est√°n a menudo ausentes. <br><br>  Esto significa que tan pronto como mezcle datos de dos sistemas, por ejemplo, para que pueda comprar un boleto de ida y vuelta en la ruta interregional, debe reunir todos los datos de las paradas en un solo formulario. <br><br>  Como resultado, tuvimos que escribir nuestra propia geobase con la estructura y el conjunto de datos correctos.  Como base, tomaron OpenStreetMap. <br><br>  Los objetos geogr√°ficos de sistemas integrables ya se comparan con los objetos geogr√°ficos de la base de datos principal e intentan adjuntarlos.  En los sistemas integrados, hay muchas paradas como "Track", "Turn", etc., que, de hecho, son parte de la ruta.  Nombres como Aleksandrovka, Mikhaylovka, etc., siempre son una sorpresa, porque hay docenas e incluso cientos de tales aldeas en Rusia. <br><br>  ¬°Pero somos matem√°ticos!  Soluci√≥n: ajuste el motor, lo que generar√° una hip√≥tesis sobre d√≥nde tendr√° tiempo el autob√∫s para llegar entre los puntos ya conocidos (adjuntos) de su ruta, ¬øqu√© Mikhailovka?  Puede resultar que de ninguna manera.  Por cierto, esto significa que, o no se contaba, estaba oculto all√≠, o era Mikhailovka hace 20 a√±os, o algo m√°s.  Tienes que llamar y preguntar a los lugare√±os. <br><br>  Adem√°s m√°s interesante.  No todos los sistemas env√≠an datos en las paradas, y los pasajeros pueden no saber d√≥nde llega o d√≥nde sale el autob√∫s.  En diferentes sistemas, las mismas paradas se llaman de manera diferente.  A veces, los puntos se marcan como puntos materiales, y esto es importante, por ejemplo, si un pasajero compr√≥ un boleto a la ciudad, y el autob√∫s se detiene en la carretera en las afueras de la ciudad y contin√∫a.  Desde el punto de vista del sistema de informaci√≥n, una ciudad puede ser un objeto y un pasajero otros 10 kil√≥metros a pie. <br><br>  Con gran dificultad, hemos recibido y seguimos recibiendo los datos necesarios.  En la misma etapa, en ciudades donde no hay automatizaci√≥n, le pedimos a la gente que nos ayudara a enviar fotos de trozos de papel desde las estaciones de autobuses.  M√°s tarde, estos trozos de papel jugaron un papel muy importante: verificamos la precisi√≥n de las hip√≥tesis us√°ndolas, por ejemplo, sobre el movimiento inverso de los autobuses. <br><br>  Si!  El movimiento inverso es a menudo la tarea de restaurar una ruta.  Porque A - B es una ruta de una regi√≥n, y B - A es otra ruta de otra regi√≥n.  Y pueden estar en diferentes sistemas de informaci√≥n.  Y los boletos para ellos se venden en diferentes estaciones.  Y el horario no se conoce en la taquilla, pero el conductor lo sabe. <br><br>  La hip√≥tesis era que es posible predecir matem√°ticamente el movimiento del autob√∫s a lo largo de la ruta, bas√°ndose en la idea de que los autobuses a veces regresan a casa y que su n√∫mero en la ruta es limitado.  En general, esto result√≥ ser correcto.  En general, debido a que hay situaciones en las que el autob√∫s parte hacia otra ciudad, luego desaparece por un par de semanas (aparentemente, en otras rutas), y de repente se encuentra en la ciudad inicial.  Esos son los horarios que ayudaron a detectar tales casos. <br><br>  Todav√≠a necesito pegar vuelos.  Porque en diferentes sistemas, el mismo vuelo tambi√©n se puede tener en cuenta de diferentes maneras.  E incluso salir en un momento ligeramente diferente.  Como resultado, cuatro vuelos pueden entrar en el horario a las 20:00, por ejemplo.  Tuvimos que escribir la mec√°nica de algo as√≠ como un hash perceptual: comparar vuelos de diferentes sistemas en funci√≥n de 4-5 par√°metros.  Se necesitaba un esquema similar para acoplar vuelos A - B - C - a veces este es un vuelo real, pero dos en sistemas de informaci√≥n. <br><br><h3>  Cambios de horario </h3><br>  En comparaci√≥n con nuestros trenes el√©ctricos favoritos, donde todo est√° automatizado cien veces, pero tambi√©n a menudo cambia, el autob√∫s cambia con mucha menos frecuencia.  Porque para esto necesita acordar un nuevo mapa de ruta y tiempo de viaje.  El procedimiento para actualizar la programaci√≥n es bastante simple, el cach√© de b√∫squeda tampoco es muy complicado, al menos se calienta. <br><br><h3>  Que paso </h3><br><img src="https://habrastorage.org/webt/sp/iz/o2/spizo2_fx6ftwn4sbamfkut4dig.png"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Horario de autobuses Rostov del Don - Mosc√∫</a></i> <br><br>  Ahora tenemos la oportunidad de mostrar a los usuarios informaci√≥n de vuelos y la posibilidad de comprar un boleto de autob√∫s en alg√∫n lugar del 40-50% de los viajes en autob√∫s que viajan por Rusia.  En el 50-60% de los usuarios no encuentran ninguna informaci√≥n sobre los vuelos disponibles (aunque en realidad van, y nos dicen que van).  Por lo tanto, decidimos tomar el camino de cerrar al menos la necesidad b√°sica de informaci√≥n, al tiempo que ampliamos el surtido para comprar boletos. <br><br>  Podemos restaurar las rutas con el mismo grado de error que la diferencia habitual en el tr√°fico de veh√≠culos. <br><br>  Bueno, estamos obteniendo una gran base de datos de revisiones para todos los vuelos, como lo hacemos con trenes y aviones.  Esto le permite comprender muy claramente las caracter√≠sticas de cada ruta, autob√∫s y qu√© sorpresas puede esperar un pasajero. <br><br>  Y aqu√≠ hay m√°s sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥mo funcionan los autobuses en Rusia en general.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es411629/">https://habr.com/ru/post/es411629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es411613/index.html">Choque de titanes: comparando los lectores insignia del PocketBook 740 y Amazon Kindle Oasis 2017</a></li>
<li><a href="../es411617/index.html">Sistema de medios para Toyota Prius (Restayl)</a></li>
<li><a href="../es411621/index.html">SpaceX construir√° Big Fucking Rocket en Los √Ångeles</a></li>
<li><a href="../es411623/index.html">Los cient√≠ficos han creado una enzima que descompone el pl√°stico</a></li>
<li><a href="../es411625/index.html">Radio-86RK en el ESP-01S</a></li>
<li><a href="../es411631/index.html">Telegram en Rusia puede ser bloqueado debido a los planes de Durov de lanzar su propia criptomoneda</a></li>
<li><a href="../es411633/index.html">El embarazo de mam√°, el parto y la salud de sus ojos.</a></li>
<li><a href="../es411635/index.html">Microsoft ha abierto el c√≥digo fuente del Administrador de archivos</a></li>
<li><a href="../es411637/index.html">Hace varios miles de millones de a√±os, el germen del planeta fue destruido en el sistema solar.</a></li>
<li><a href="../es411639/index.html">Los cient√≠ficos han desarrollado tecnolog√≠a para la producci√≥n de grafeno en rollos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>