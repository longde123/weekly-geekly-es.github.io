<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÄ üë©‚Äçüè≠ üë®üèΩ‚Äç‚öñÔ∏è Experi√™ncia VonmoTrade. Parte 2: Pedidos. Tipos, recursos de processamento üôåüèæ ‚ù§Ô∏è ‚è≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para entender como as trocas funcionam, voc√™ precisa lidar com os aplicativos de troca e as regras para seu processamento por um broker. 


 No artigo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Experi√™ncia VonmoTrade. Parte 2: Pedidos. Tipos, recursos de processamento</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481772/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ys/km/8w/yskm8winqrbt3dnqyc-vlzyzggk.png"></div><br><p>  Para entender como as trocas funcionam, voc√™ precisa lidar com os aplicativos de troca e as regras para seu processamento por um broker. </p><br><p>  No artigo, analisaremos os tipos de ordens, as caracter√≠sticas de sua execu√ß√£o na bolsa e as restri√ß√µes impostas pelo modelo de negocia√ß√£o.  Se voc√™ est√° curioso sobre o que significam as abrevia√ß√µes DIA, GTC, FOK, COI, GTD, GAT, MOO, MOC, LOO, LOC, MIT, OCO, OSO, PEG, pe√ßo gato. </p><a name="habracut"></a><br><h2 id="pro-ordery">  Sobre pedidos </h2><br><p>  √â importante que todos os participantes do mercado concluam uma pechincha.  Para iniciar a negocia√ß√£o, voc√™ deve criar um aplicativo (pedido) para a venda ou compra do instrumento financeiro necess√°rio.  Consequentemente, o conjunto total de aplicativos forma a oferta e a demanda atuais. </p><br><p> <strong>Ordem de troca</strong> - instru√ß√µes do cliente para o corretor para a compra ou venda de instrumentos financeiros na bolsa. <br>  Um pedido t√≠pico cont√©m as seguintes informa√ß√µes: </p><br><ul><li>  Identificador do instrumento financeiro (ativo negociado) </li><li>  Tipo de aplica√ß√£o </li><li>  A dire√ß√£o da transa√ß√£o.  Compra ou venda </li><li>  Pre√ßo </li><li>  Quantidade </li><li>  Per√≠odo de validade do aplicativo (opcional) </li><li>  Instru√ß√µes adicionais (opcional) </li></ul><br><h2 id="tipy-orderov">  Tipos de pedidos </h2><br><p>  Ordens b√°sicas podem ser divididas em tr√™s grandes grupos </p><br><ul><li>  <strong>Mercado</strong> .  Esse aplicativo deve ser executado imediatamente ao pre√ßo atual de mercado ou, se o volume necess√°rio n√£o estiver dispon√≠vel, o mais r√°pido poss√≠vel. </li><li>  <strong>Diferido</strong> .  O aplicativo permite controlar o pre√ßo m√°ximo da transa√ß√£o para uma compra e o menor pre√ßo poss√≠vel para uma venda.  Tais ordens n√£o podem ser executadas.  Para pedidos limitados, o pre√ßo √© sempre indicado melhor. </li><li>  <strong>Com condi√ß√µes</strong> .  Qualquer aplicativo que n√£o seja o limite, que para execu√ß√£o requer o cumprimento de condi√ß√µes adicionais. </li></ul><br><h2 id="srok-deystviya">  Data de validade </h2><br><p>  Certamente voc√™ j√° viu abrevia√ß√µes no formato DIA, GTC, FOK, COI, GTD, GAT.  Todos eles limitam a dura√ß√£o do aplicativo. </p><br><ul><li>  <strong>DIA</strong>  Pedidos desse tipo expiram no final do dia de negocia√ß√£o. </li><li>  <strong>GTC</strong> (Bom at√© cancelado).  O aplicativo √© v√°lido at√© ser claramente cancelado.  Para que esses aplicativos n√£o permane√ßam no mercado indefinidamente, √© introduzida uma restri√ß√£o adicional para eles, geralmente de 30 a 90 dias. </li><li>  <strong>FOK</strong> (Preencher ou Matar).  O aplicativo deve ser executado na √≠ntegra ou imediatamente cancelado. </li><li>  <strong>COI</strong> (Imediato ou Cancelar).  O aplicativo √© executado imediatamente ou cancelado pela troca.  Ao contr√°rio do FOK, permita o fechamento parcial. </li><li>  <strong>GTD</strong> (data / hora v√°lida).  O aplicativo √© v√°lido at√© o tempo especificado. </li><li>  <strong>GAT</strong> (Good-after-Time / Date).  O aplicativo √© v√°lido a partir do hor√°rio indicado. </li></ul><br><h2 id="usloviya-vypolneniya-orderov">  Condi√ß√µes de execu√ß√£o da ordem </h2><br><p>  Ao combinar instru√ß√µes sobre pre√ßos, validade e restri√ß√µes adicionais, voc√™ pode obter v√°rias condi√ß√µes para a execu√ß√£o de pedidos. </p><br><p>  Para entender os relacionamentos, descreveremos a estrutura dos tipos de pedidos, apresentada no in√≠cio do artigo. </p><br><h2 id="ordery-rabotayuschie-pri-otkrytii-i-zakrytii-rynka">  Abrir e fechar pedidos de mercado </h2><br><p>  Adicionando um per√≠odo de validade √† ordem do mercado, obtemos: </p><br><ul><li>  <strong>MOO</strong> (Mercado Aberto).  Uma ordem de mercado desse tipo s√≥ pode ser executada no momento em que o dia de negocia√ß√£o √© aberto.  A execu√ß√£o √© garantida com liquidez. </li><li>  <strong>LOO</strong> (Limite de abertura).  Como o MOO, o LOO s√≥ pode ser executado no in√≠cio do dia de negocia√ß√£o.  Diferentemente do MOO, os pedidos limitados desse tipo permitem definir instru√ß√µes para o pre√ßo.  A execu√ß√£o n√£o √© garantida. </li><li>  <strong>MOC</strong> (Market-On-Close).  Semelhante ao MOO, mas uma ordem de mercado s√≥ pode ser fechada no final do dia de negocia√ß√£o.  A execu√ß√£o √© garantida com liquidez. </li><li>  <strong>LOC</strong> (Limite ao fechar).  Semelhante ao LOO, mas uma ordem de limite s√≥ pode ser fechada no final do dia de negocia√ß√£o.  A execu√ß√£o n√£o √© garantida. </li></ul><br><h2 id="uslovnye-ordery">  Pedidos condicionais </h2><br><p>  Quando queremos configurar nossas ordens para a execu√ß√£o de uma estrat√©gia de negocia√ß√£o, as ordens condicionais chegam √†s ordens de resgate, cuja ativa√ß√£o ocorre somente depois que a condi√ß√£o √© atendida.  Assim, o principal objetivo desses pedidos √© minimizar o risco de grandes perdas financeiras. </p><br><h3 id="stop-order">  Parar ordem </h3><br><p>  Uma ordem de parada √© uma solicita√ß√£o para comprar ou vender uma certa quantia de um ativo a um pre√ßo especificado ou pior.  Assim que o pre√ßo de um instrumento se torna igual ou excede o pre√ßo especificado para uma ordem de parada, √© automaticamente convertido em uma ordem de mercado (ordem de mercado) e executado em termos gerais.  Da mesma forma, para uma ordem de stop sell, assim que o pre√ßo atinge o n√≠vel especificado na ordem e continua a cair, ela se transforma em uma ordem de mercado.  Assim, √© garantida a execu√ß√£o de ordens de parada ativas. </p><br><p>  As ordens de parada minimizam poss√≠veis perdas, portanto, stop loss √© sin√¥nimo de ordem de parada. </p><br><h3 id="limitnyy-stop-order-stop-limit-order">  Ordem de parada de limite (ordem de limite de parada) </h3><br><p>  Diferentemente das ordens de parada regulares, nas quais apenas o pre√ßo de parada √© indicado, no limite, devemos indicar adicionalmente o pre√ßo limite. <br>  Assim que o pre√ßo de um ativo se tornar igual ou pior que o pre√ßo de parada, uma ordem limite com o pre√ßo limite especificado ser√° criada automaticamente.  A execu√ß√£o de tal ordem n√£o √© garantida. </p><br><h3 id="skolzyaschiy-stop-order-trailing-stop-order">  Ordem de parada √† direita </h3><br><p>  Diferentemente das ordens de parada regulares, em que o pre√ßo da parada √© indicado em unidades absolutas, as ordens deslizantes usam porcentagens.  Depois de acionado, ele se transforma em uma ordem de mercado regular.  Assim, o pre√ßo de parada est√° atrelado ao pre√ßo no mercado e aumenta com ele.  Por exemplo, fizemos um pedido a um pre√ßo de 10 rublos e o pre√ßo de parada indicou 10% do atual, ou seja, o pre√ßo absoluto de parada ser√° de 9 rublos.  Em seguida, o ativo aumentou para 15 rublos e, ao mesmo tempo, o pre√ßo de parada do nosso pedido para 13,5 rublos. </p><br><p>  Esse tipo de pedido √© usado para minimizar perdas e maximizar lucros. </p><br><h3 id="skolzyaschie-stop-limitnye-ordery-trailing-stop-limit-order">  Seguindo ordens de limite de parada </h3><br><p>  Ao contr√°rio das ordens de parada corredi√ßa, ap√≥s o acionamento, a ordem se transforma em um limite, e n√£o no mercado. </p><br><h3 id="peg-order">  Peg order </h3><br><p>  √â uma esp√©cie de limite de pedidos.  Um pedido altera automaticamente seu pre√ßo ap√≥s uma altera√ß√£o no pre√ßo de oferta / demanda.  As instru√ß√µes de pre√ßo indicam a pior das compensa√ß√µes do melhor pre√ßo atual de compra / venda. </p><br><h3 id="oco-order-one-cancels-other">  Pedido OCO (um cancela outro) </h3><br><p>  Esta √© uma ordem de pares.  Geralmente consiste em uma ordem de parada e um limite.  Ambas as ordens funcionam com um instrumento.  Se um deles for executado, o segundo ser√° automaticamente cancelado. <br>  Um exemplo simples: compramos um ativo por 10 rublos, nosso objetivo √© obter pelo menos 3 rublos de lucro e queremos limitar as perdas a um m√°ximo de 2 rublos.  Em seguida, o pre√ßo final ser√° de 8 rublos e o pre√ßo limite ser√° de 13 rublos. </p><br><h3 id="oso-order-one-sends-other">  Pedido OSO (um envia outro) </h3><br><p>  Essa ordem consiste em uma ordem principal e um grupo de ordens relacionadas.  Os pedidos podem funcionar com diferentes instrumentos.  No caso da execu√ß√£o da ordem principal, todas as relacionadas s√£o criadas automaticamente no mercado. </p><br><p>  Examinamos a teoria das ordens, agora podemos come√ßar a praticar. </p><br><h2 id="praktika">  Pr√°tica </h2><br><p>  Do ponto de vista sist√™mico, √© importante determinar de maneira flex√≠vel, mas precisa, a estrutura b√°sica de todos os tipos de pedidos.  Em Erlang, isso pode ser feito usando as entradas: </p><br><pre><code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">-record</span></span><span class="hljs-params"><span class="hljs-params">(exchange_order, { id :: binary(), orig_id :: binary(), ticker :: binary(), owner :: binary(), trader :: binary(), type :: non_neg_integer(), side :: non_neg_integer(), time_in_force :: non_neg_integer(), price :: binary(), trigger_price :: binary(), qty :: binary(), orig_qty :: binary(), created_ts :: non_neg_integer(), updated_ts :: non_neg_integer(), deals_history :: [#exchange_deal{}], linked_orders :: [#exchange_order{}], opts :: map() })</span></span>.</code> </pre> <br><h3 id="identifikaciya-ordera">  Identifica√ß√£o do pedido </h3><br><p>  Depois que o pedido vai para a troca, √© atribu√≠do um identificador intra-sistema - o campo id.  Para melhorar a experi√™ncia do usu√°rio ao coordenar a troca com sistemas externos, √© necess√°rio permitir que o sistema externo √† troca atribua seu ID √† ordem criada - o campo orig_id.  Isso tornar√° poss√≠vel solicitar pedidos por ID e por orig_id e permitir√° recusar mapeamento adicional de pedidos no sistema externo. </p><br><h3 id="prinadlezhnost-ordera">  Ordem de afilia√ß√£o </h3><br><p>  Colocamos no sistema a possibilidade de criar intermedi√°rios.  As inscri√ß√µes podem ser enviadas diretamente de licitantes ou de um intermedi√°rio que presta servi√ßos a clientes que n√£o t√™m acesso direto √† central. </p><br><p>  No caso de uma aplica√ß√£o direta, propriet√°rio e comerciante s√£o os mesmos. </p><br><h3 id="kodirovanie-instrukciy">  Codifica√ß√£o de instru√ß√µes </h3><br><p>  Analisamos os campos restantes.  Dois campos s√£o usados ‚Äã‚Äãpara codificar instru√ß√µes de pre√ßo: pre√ßo - pre√ßo limite para pedidos limitados e tirgger_price - pre√ßo de resposta para tipos personalizados.  Por exemplo, para ordens de parada, esse campo codificar√° um pre√ßo de parada. </p><br><p>  Para codificar o volume, use qty e qty_orig.  Qty_orig define o volume inicial da ordem e qty - o volume da ordem durante sua execu√ß√£o. </p><br><p>  Para ter informa√ß√µes precisas sobre execu√ß√µes parciais, voc√™ precisa de uma matriz de deals_history.  Com sua ajuda, depois que o pedido foi completamente preenchido, √© poss√≠vel calcular, por exemplo, o pre√ßo m√©dio de um pedido conclu√≠do. </p><br><p>  O campo linked_orders √© necess√°rio para codificar informa√ß√µes sobre pedidos relacionados para OCO e OSO. </p><br><p>  Para poder expandir o sistema sem alterar o registro exchange_order, adicionaremos o campo opts - um dicion√°rio din√¢mico. </p><br><h2 id="promezhutochnyy-itog">  Subtotal </h2><br><p>  Honestamente, pensei que a segunda parte do ciclo seria compacta.  No entanto, para uma compreens√£o hol√≠stica, tive que divulgar o t√≥pico com mais detalhes. </p><br><p>  A parte te√≥rica do pr√≥ximo artigo destacar√° a edi√ß√£o do livro de pedidos e as regras de processamento de pedidos.  O lado t√©cnico revelar√° o esquema para o processamento de dados de mercado e o armazenamento de dados hist√≥ricos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481772/">https://habr.com/ru/post/pt481772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481758/index.html">Estat√≠sticas de constru√ß√£o, fornecimento e visitas ao ISS</a></li>
<li><a href="../pt481762/index.html">Equa√ß√µes para a cozinha debaixo da √°rvore de Natal</a></li>
<li><a href="../pt481764/index.html">Por que a energia verde tem um futuro dif√≠cil?</a></li>
<li><a href="../pt481768/index.html">Lidamos com o WebKit em 1C, por exemplo, a integra√ß√£o do TinyMCE em um formul√°rio gerenciado no UT 11.4</a></li>
<li><a href="../pt481770/index.html">Tony Brucker, pioneiro em programa√ß√£o de computadores, morre aos 94 anos</a></li>
<li><a href="../pt481774/index.html">Dicas de seguran√ßa: Patch virtual</a></li>
<li><a href="../pt481776/index.html">Servi√ßos de jogos 5G e na nuvem - teste como funciona em Moscou</a></li>
<li><a href="../pt481778/index.html">An√°lise de malware do Skeleton Key</a></li>
<li><a href="../pt481780/index.html">O MyOffice possui mais de 200 novos recursos</a></li>
<li><a href="../pt481782/index.html">Sobre os problemas do tradutor Python e repensar o idioma</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>