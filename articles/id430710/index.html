<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¸ ğŸŒ¦ï¸ ğŸ§‘ğŸ¼â€ğŸ¤â€ğŸ§‘ğŸ» Apa yang harus dilakukan jika Black Friday besok dan server Anda belum siap ğŸ™‚ ğŸ˜ #âƒ£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bagi mereka yang gelisah dengan pemasaran atau baru saja masuk ke arus, "Black Friday" adalah hype, pesanan gila dan kerumunan pelanggan. 

 Adalah ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apa yang harus dilakukan jika Black Friday besok dan server Anda belum siap</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/430710/">  Bagi mereka yang gelisah dengan pemasaran atau baru saja masuk ke arus, "Black Friday" adalah hype, pesanan gila dan kerumunan pelanggan. <br><br>  Adalah baik untuk menyiapkan infrastruktur untuk gelombang masuk terlebih dahulu, tetapi siapa yang kita pikirkan tentang hal-hal seperti itu sebelumnya?  Namun terkadang, keputusan untuk berpartisipasi dibuat sehari sebelumnya. <br><br>  Jadi, hari libur konsumerisme dimulai, server toko online mulai berkedip riang, call center terlalu panas, dan layanan pengiriman menawarkan pengiriman di suatu tempat di bulan Januari. <br>  Apa yang harus dilakukan, bersantai dan melihat fakap secara filosofis, atau perkelahian dengan berani? <br><br><img src="https://habrastorage.org/webt/ue/-w/8b/ue-w8bfnunh48ekqvwsgloqmfvs.jpeg"><br><a name="habracut"></a><br>  Saya menemani infrastruktur server toko online selama Black Friday, dan saya tidak pernah dihubungi sebelumnya atau diberi waktu untuk mempersiapkan.  Saya berbagi pengalaman saya dengan mereka yang akan menerima pesanan yang sama hari ini. <br><br>  (Anda beruntung jika dapat melakukannya dengan benar, yaitu, mengatur pemantauan selama beberapa bulan, menganalisis lalu lintas, kemacetan, arsitektur proyek, melakukan tes stres, jika perlu, membangun kembali arsitektur bersama dengan pengembang, menghubungkan kapasitas server tambahan terlebih dahulu.  kita akan berbicara tentang pendekatan yang tepat di lain waktu, di sini tentang tindakan kebakaran). <br><br><h2>  Kami mengatur pemantauan </h2><br>  Saya pikir pemantauan adalah hal utama dalam hal apa pun.  Masih akan ada masalah, tetapi berkat jadwal pemantauan, Anda dapat memahami di mana kemacetan sekarang. <br><br>  Jika memungkinkan, saya menggunakan solusi seperti Zabbix / Prometheus / ELK (tergantung arsitekturnya), jika tidak, saya dengan cepat menghubungkan SaaS seperti okmeter.io.  Bahkan jika penjualan hanya berlangsung sehari, Anda tidak akan dapat melihat banyak indikator di monitor seperti hari zulu berturut-turut. <br><br>  Masih alat yang hebat adalah blackfire.io/newrelic.com untuk profil, pinba.org untuk menganalisis halaman "memperlambat" secara umum. <br><br>  blackfire / newrelic akan membantu untuk menyelesaikan masalah pada halaman tertentu, pinba akan membantu Anda melihat halaman mana yang paling sering dimuat dan berjalan paling lama (ini semua di luar kotak dalam Bitrix, misalnya, tetapi cobalah untuk pergi ke panel adminnya dan bekerja di sana ketika server dan situs ini sudah sangat buruk). <br><br><h2>  Potong kelebihannya </h2><br>  Saya mematikan semua yang dapat dimatikan: modul yang tidak diperlukan secara kondisional saat ini, segala macam kecantikan, dll. <br><br>  Penjualan adalah proses yang sederhana, diskon besar pada sejumlah produk.  Pengunjung dengan mata menyala ingin memilih produk sampai terjual habis, memesan, mendapat diskon, melakukan pembayaran. <br>  Berlangganan buletin, mendaftar di situs, polling tentang kualitas layanan - semua ini tidak tertarik pada klien sekarang, modul-modul ini dapat dinonaktifkan atau disederhanakan.  Saya mematikan semua yang tanpanya situs dapat bekerja dengan tenang selama beberapa hari. <br><br>  Contoh dari praktik: selama Black Friday, saya melakukan debug pada server yang sedang berjalan di bawah banyak lalu lintas, dan setelah 2 jam ternyata modul layanan pengiriman sangat lambat, yang mengakses layanan eksternal dan secara otomatis menghitung biaya pengiriman untuk setiap pesanan.  Ketika lalu lintas tumbuh ratusan kali, layanan eksternal ini tidak lagi berfungsi. <br><br>  Anda bisa duduk dan berpikir, dan apa yang bisa jatuh di situs Anda / di aplikasi seluler / dll? <br><br><h2>  Membiarkan jatuh </h2><br>  Saya sedang mempersiapkan fakta bahwa layanan apa pun akan jatuh.  Dalam hal ini, Anda harus menunjukkan kepada pengunjung setidaknya sesuatu. <br><br>  Misalnya, modul layanan pengiriman yang tidak berfungsi atau formulir pembayaran tidak boleh memblokir seluruh pesanan, pengguna dapat kembali besok dan menyelesaikan pesanannya. <br><br>  Pada halaman kesalahan 50-an, saya menunjukkan surat atau nomor telepon departemen penjualan. <br><br><pre><code class="plaintext hljs">error_page 500 502 503 504 /50x.html; location = /50x.html { root /srv/www/yourwebsite.com/htdocs/sale-contacts/; }</code> </pre> <br><h2>  Naikkan salinan situs </h2><br>  Jika dimungkinkan untuk memiliki salinan situs untuk menguji perubahan, ini sangat bagus.  Saya tidak berbicara tentang sistem penempatan yang mapan :) <br><br>  Omong-omong, layanan cloud yang modis akan memungkinkan Anda untuk dengan cepat dan mudah membuat salinan dari server pertempuran. <br><br>  Studi kasus: satu situs, infrastruktur yang saya bantu pertahankan selama Black Friday, setelah dioptimalkan oleh pengembang (sebagian sedang dalam perjalanan), menambah sumber daya, mengoptimalkan perangkat lunak, mulai bekerja kurang lebih lumayan dengan lalu lintas yang padat, tetapi masih sangat banyak melambat saat melakukan pemesanan.  Pengguna berpikir bahwa pesanan tidak dikirim, dan untuk berjaga-jaga, mereka menekan tombol checkout beberapa kali.  Beberapa angka menekan tombol 300 kali!  Tes stres hebat :) Ratusan kali lebih banyak pengunjung, dan sekitar 300 pesanan lebih banyak!  :) <br><br><h2>  Layanan CDN </h2><br>  Anda dapat melakukannya tanpa CDN, tetapi jika server secara objektif tidak dapat mengatasi kembalinya jumlah statis yang diperlukan, itu perlu. <br><br>  Anda dapat dengan cepat menghubungkan CDN untuk CMS populer seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1C-Bitrix</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wordpress</a> .  Tetapi Anda tidak dapat mengkonfigurasi CDN saat bepergian, Anda harus berhati-hati sebelumnya. <br><br><h2>  AntidDoS </h2><br>  Saya sangat merekomendasikan menghubungkan layanan AntiDDoS, dan pastikan terlebih dahulu (jika tidak, di bawah beban yang tiba-tiba, tanpa beradaptasi dengan lalu lintas normal, mereka mungkin mulai memblokir pengunjung yang sah). <br><br>  Untuk jangka waktu tertentu ini dapat dilakukan secara gratis: <br><br><ul><li>  qrator.net, 10 hari gratis jika Anda memiliki Bitrix - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.1c-bitrix.ru/ddos/</a> </li><li>  DDoS-Guard, ada tarif gratis - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://ddos-guard.net/en/store/web</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cloudflare.com</a> , ada tarif gratis (tapi di sini saya sarankan setidaknya tarif pertama yang dibayar, dan ingat bahwa alamat IP mereka sering diblokir di Federasi Rusia) </li></ul><br><h2>  Tambahkan Kemampuan Server </h2><br>  Kami melihat kemungkinan penambahan sumber daya.  Dimungkinkan untuk menambahkan sumber daya ke server utama, membuat simpul baru untuk memparalelkan kueri, simpul untuk mysql, dll.  Jika bukan diri Anda sendiri, maka agen outsourcing yang dipekerjakan di samping akan berterima kasih banyak untuk itu. <br>  Akan lebih mudah jika penyedia Anda memiliki kemampuan untuk meng-host server fisik dan cloud (Selectel.ru, Servers.com). <br><br><h2>  Fuh, ayo pergi </h2><br>  Yang paling berbahaya adalah menit pertama setelah buletin.  Cache belum memanas, ada beberapa statistik, Anda masih belum tahu kemampuan sistem (jika Anda belum melakukan tes serius sebelumnya). <br><br><h2>  Beberapa konfigurasi </h2><br><h4>  Caching di nginx </h4><br>  Kami akan membuat cache 500 MB selama 3 jam untuk semua halaman kecuali halaman pesanan. <br><br><pre> <code class="plaintext hljs">proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=blackfriday_cache:180m max_size=500m inactive=7d; #  blackfriday_cache,  180  proxy_cache_key "$request_method$scheme$host$request_uri"; proxy_cache_use_stale error timeout invalid_header http_500; map $uri $cookie_nocache { #     ,   ; 1 - , 0 -  "/order" "1"; "/bitrix" "1"; default "0"; } location / { .... proxy_hide_header "Set-Cookie"; #       proxy_ignore_headers "X-Accel-Expires"; proxy_ignore_headers "Expires"; proxy_ignore_headers "Cache-Control"; proxy_ignore_headers "Set-Cookie"; add_header X-Cache $upstream_cache_status; ... proxy_no_cache $cookie_nocache; #  ,   map;  1 -   proxy_cache blackfriday_cache; #    proxy_cache_valid 180m; #  180  proxy_cache_valid 404 1m; # 404  -   1  .... proxy_pass http://backend; #     } location @backend { .... #   }</code> </pre> <br>  Banyak bahan tambahan, tautan: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/post/124684</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://nginx.org/ru/docs/http/ngx_">nginx.org/ru/docs/http/ngx_http_proxy_module.html</a> </li></ul><br>  Saluran 100 mbit memungkinkan Anda memberikan 12 halaman dengan berat 1 MB per detik, ini adalah 43 ribu per jam;  nginx mampu memberikan volume seperti itu bahkan pada server yang murah. <br><br><h4>  Kami mendistribusikan permintaan di beberapa node (situs harus siap bekerja dengan beberapa node web) </h4><br><br><h5>  Melalui Round-Robin DNS </h5><br><br>  (hati-hati di sini, metode ini tidak lagi didukung dengan benar oleh banyak penyedia DNS) <br><br><pre> <code class="plaintext hljs">$ dig lifehacker.ru +short 136.243.37.180 136.243.37.178</code> </pre> <br><br><h5>  Melalui upstream nginx </h5><br><br><pre> <code class="plaintext hljs">$ cat nginx.conf upstream backend { server backend1.yoursite.com; server backend2.yoursite.com; } server { server_name yoursite.com; location / { proxy_pass http://backend; } } location @backend { .... #   }</code> </pre> <br><br><h5>  Melalui Cloudflare, Qrator, dll. </h5><br>  Mereka memiliki kemampuan untuk mengatur beberapa backend langsung dari panel, pembaruan konfigurasi biasanya instan. <br><br><h2>  Dengan tenang </h2><br>  Kebetulan tidak mungkin untuk memastikan pekerjaan yang sempurna, tetapi hal utama untuk bisnis adalah bahwa sistem pada dasarnya bekerja.  Biarkan itu melambat, tetapi seharusnya memungkinkan pengguna untuk melakukan pemesanan, dan tidak terus-menerus menekan F5.  "Menyedihkan, menghambat, membagi saraf semua orang", ribuan pelanggan menggunakannya pada saat yang sama, dan mereka membuat, membuat, membuat pesanan, dan masing-masing dari mereka bernilai.  Saya melihat contoh di mana dalam satu hari toko membuat perputaran enam bulan, dan hasilnya sepadan dengan semua saraf. <br><br>  Penjualan yang sukses untuk Anda :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id430710/">https://habr.com/ru/post/id430710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id430694/index.html">Panduan singkat untuk mempelajari C ++: apa, kapan dan apa yang harus dibuat</a></li>
<li><a href="../id430700/index.html">Sistem terpadu untuk merekam tayangan film online akan mulai berfungsi di Rusia</a></li>
<li><a href="../id430704/index.html">Bagaimana Teknologi Kecerdasan Buatan Membantu Aviasales Tumbuh: Tujuh Contoh</a></li>
<li><a href="../id430706/index.html">Teori Evolusi Baru</a></li>
<li><a href="../id430708/index.html">Tic Tac Toe â€œTanpa Batasâ€</a></li>
<li><a href="../id430712/index.html">NeurIPS: Cara Menaklukkan Konferensi ML Terbaik</a></li>
<li><a href="../id430714/index.html">VMware membeli Heptio - apa artinya untuk Kubernetes</a></li>
<li><a href="../id430718/index.html">Untuk objek apa layak menggunakan pengawasan video cloud?</a></li>
<li><a href="../id430720/index.html">Intel RealSense D435i: pembaruan kecil dan penyimpangan sejarah singkat</a></li>
<li><a href="../id430722/index.html">Kinerja PHP: perencanaan, pembuatan profil, optimisasi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>