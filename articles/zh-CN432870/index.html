<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏸 🌃 🎀 浏览器如何工作-Web应用程序安全性简介 🆙 🧘🏽 🥨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="让我们开始一系列有关Web应用程序安全性的文章，并解释浏览器的功能以及它们的工作方式。 由于大多数客户将通过浏览器与Web应用程序进行交互，因此您需要了解这些出色程序的工作原理。 


 铬和山猫 

 浏览器是渲染引擎 。 他的工作是下载网页并以可读的方式呈现。 

 尽管这几乎是一种犯罪简化，但...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>浏览器如何工作-Web应用程序安全性简介</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/432870/"> 让我们开始一系列有关Web应用程序安全性的文章，并解释浏览器的功能以及它们的工作方式。 由于大多数客户将通过浏览器与Web应用程序进行交互，因此您需要了解这些出色程序的工作原理。 <br><br><img src="https://habrastorage.org/webt/i4/qq/si/i4qqsiiqayis2mfqyhqyxoko5lg.jpeg" alt="图片"><br>  <i>铬和山猫</i> <br><br> 浏览器是<b>渲染引擎</b> 。 他的工作是下载网页并以可读的方式呈现。 <br><br> 尽管这几乎是一种犯罪简化，但是现在这是我们目前所需要知道的。 <br><br><ul><li> 用户在浏览器输入行中输入地址。 </li><li> 浏览器在此URL上下载“文档”并显示它。 </li></ul><a name="habracut"></a><br> 您可能已经习惯了使用最流行的浏览器之一，例如Chrome，Firefox，Edge或Safari，但这并不意味着世界上没有其他浏览器。 <br><br> 例如， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">lynx</a>是轻量级的命令行文本浏览器。  lynx的核心是与其他主流浏览器相同的原理。 用户输入网址（URL），浏览器下载文档并显示它-唯一的区别是lynx不使用图形渲染引擎，而是文本界面，这要归功于像Google这样的网站： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59e/837/f9f/59e837f9f41fda051d727ebae580ef08.png" alt="图片"><br><br> 通常，我们对浏览器的功能有所了解，但让我们仔细研究一下这些巧妙的应用程序为我们执行的操作。 <br><br><h4> 浏览器做什么？ </h4><br> 简而言之，浏览器基本上包括 <br><br><ul><li>  DNS解析 </li><li>  HTTP交换 </li><li> 渲染图 </li><li> 重设并重复 </li></ul><br><h4>  DNS解析 </h4><br> 此过程可帮助浏览器在用户输入URL时知道应连接到哪个服务器。 浏览器联系DNS服务器，并检测到<i>google.com</i>与数字集<i>216.58.207.110</i>相匹配-浏览器可以连接到的IP地址。 <br><br><h4>  HTTP交换 </h4><br> 一旦浏览器确定哪个服务器将满足我们的请求，它将与之建立TCP连接并开始<b>HTTP交换</b> 。 这仅是浏览器与所需服务器之间通信的一种方式，对于服务器而言，它是响应浏览器请求的方式。 <br><br>  HTTP只是网络上最流行的通信协议的名称，浏览器在与服务器通信时大多选择HTTP。  HTTP交换意味着客户端（我们的浏览器）发送<b>请求</b> ，而服务器发送<b>响应</b> 。 <br><br> 例如，浏览器成功连接到服务<i>google.com</i>的服务器后，它将发送如下所示的请求 <br><br> <code>GET / HTTP/1.1 <br> Host: google.com <br> Accept</code> <br> <br> 让我们逐行解析查询： <br><br><ul><li>  <i>GET / HTTP / 1.1</i> ：在第一行中，浏览器要求服务器从<i>/</i>位置检索文档，然后添加其余请求将通过HTTP / 1.1进行（或者也可以使用1.0或2版本） </li><li>  <i>主机：google.com</i> ： <b>这是HTTP / 1.1协议所需的唯一HTTP标头</b> 。 由于服务器可以服务多个域<i>（google.com，google.co.uk</i>等），因此客户端在此处提到该请求是针对该特定主机的。 </li><li>  <i>接受：* / *</i> ：一个可选的标头，浏览器在其中告诉服务器它将接受任何响应。 服务器可以具有JSON，XML或HTML格式的资源，因此它可以选择自己喜欢的任何格式 </li></ul><br> 充当<b>客户端</b>的浏览器完成请求后，服务器将发送响应。 答案是： <br><br><pre> <code class="plaintext hljs">HTTP/1.1 200 OK Cache-Control: private, max-age=0 Content-Type: text/html; charset=ISO-8859-1 Server: gws X-XSS-Protection: 1; mode=block X-Frame-Options: SAMEORIGIN Set-Cookie: NID=1234; expires=Fri, 18-Jan-2019 18:25:04 GMT; path=/; domain=.google.com; HttpOnly &lt;!doctype html&gt;&lt;html"&gt; ... ... &lt;/html&gt;</code> </pre> <br> 哇，这一次需要消化很多信息。 服务器告诉我们请求已成功（ <i>200 OK</i> ），并在<b>响应中</b>添加了多个标头，例如，您可以找出哪个服务器处理了我们的请求（ <i>Server：gws</i> ），此答案的<i>X-XSS-Protection</i>策略是什么，依此类推。进一步等等。 <br><br> 现在，您无需了解答案中的每一行。 在本系列出版物的后面，我们将更多地讨论HTTP协议，其标头等。 <br><br> 目前，您需要知道的是客户端和服务器之间交换信息，并且它们通过HTTP协议进行信息交换。 <br><br><h4> 渲染图 </h4><br> 最后但并非最不重要的一点是，渲染过程正在进行中。 如果仅向用户显示的是有趣字符列表，浏览器的效果如何？ <br><br><pre> <code class="plaintext hljs">&lt;!doctype html&gt;&lt;html"&gt; ... ... &lt;/html&gt;</code> </pre> <br> 在<b>响应</b>的正文中<b>，</b>服务器根据<i>Content-Type</i>标头包括请求的文档的呈现。 在我们的例子中，内容类型设置为<i>text / html</i> ，因此我们期望在响应中使用HTML标记-这就是我们在文档正文中找到的内容。 <br><br> 这正是浏览器真正展示其功能的那一刻。 它读取并分析HTML代码，加载标记中包含的其他资源（例如，可以在其中指定JavaScript文件或CSS文档以进行加载），并尽快将其呈现给用户。 <br><br> 再一次，最终结果应该是普通Vasya可以访问的结果。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e91/6f0/edb/e916f0edb2522c5cd245a5b9ae42f3a1.png" alt="图片"><br><br> 如果您需要更详细的说明，当我们按浏览器地址栏中的Enter键时实际发生的情况，我建议您阅读文章<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“当...时发生的情况”</a> ，这是一种非常细致的尝试，试图解释构成此过程基础的机制。 <br><br> 由于本系列文章专门讨论安全性，因此我将向您提供一些有关我们刚刚发现的信息：攻击者可以轻松地从<b>HTTP交换和呈现方面的漏洞中</b>谋生。 漏洞，恶意用户和其他奇特的生物在其他地方可以找到，但是在上述级别提供保护的更有效方法已经可以使您成功改善安全状态。 <br><br><h4> 供应商 </h4><br> 最受欢迎的4种浏览器属于不同的供应商： <br><br><ul><li> 谷歌浏览器 </li><li>  Mozilla的Firefox </li><li> 苹果Safari </li><li> 微软Edge </li></ul><br> 除了相互竞争以提高其市场渗透率外，供应商还相互交流以提高Web标准，这是浏览器的一种“最低要求”。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">W3C</a>是标准开发的基石，但是浏览器经常开发自己的功能，这些功能最终变成Web标准，安全性也不例外。 <br><br> 例如，Chrome 51中引入了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SameSite cookie</a> ，该功能使Web应用程序摆脱了称为CSRF的某种类型的漏洞（稍后会详细介绍）。 其他制造商认为这是个好主意，因此也效仿，这导致SameSite方法成为Web标准：Safari当前是唯一不<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">支持SameSite cookie的</a>主要浏览器。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d4/3ae/451/5d43ae451112e44dd810d71af2a755b3.png" alt="图片"><br><br> 这告诉我们两件事： <br><br><ul><li>  Safari似乎不太关心用户的安全性（开个玩笑：SameSite cookie将在Safari 12中可用，在阅读本文时可能已经发布了） </li><li>  <b>修复一个浏览器中的漏洞并不意味着您所有的用户都是安全的</b> </li></ul><br> 第一点是在Safari上拍摄（正如我说的那样，我在开玩笑！），第二点真的很重要。 在开发Web应用程序时，我们不仅需要确保它们在不同的浏览器中看起来相同，还需要为不同平台上的用户提供相同的保护。 <br><br>  <b>您的网络安全策略应根据浏览器供应商为我们提供的功能而有所不同。</b> 当前，大多数浏览器都支持相同的功能集，并且很少偏离其总体路线图，但是仍会发生上述情况，这是在定义安全策略时应考虑的问题。 <br><br> 在我们的案例中，如果我们决定仅使用SameSite Cookie来抵消CSRF攻击，那么我们应该知道我们正在使Safari用户面临风险。 我们的用户也应该知道这一点。 <br><br> 最后但并非最不重要的一点是，您必须记住，可以决定是否支持浏览器版本：对每个浏览器版本的支持都是不切实际的（请记住Internet Explorer 6）。 尽管如此，对主要浏览器的多个最新版本的可靠支持通常是一个很好的解决方案。 但是，如果您不打算在任何特定平台上提供保护，则强烈建议您的用户知道这一点。 <br><br><blockquote>  <b>给专业人士的提示</b> ：永远不要鼓励您的用户使用过时的浏览器或积极支持它们。 即使您采取了所有必要的预防措施，其他Web开发人员也没有采取任何措施。 鼓励用户使用其主要浏览器之一的最新受支持版本。 </blockquote><br><h4> 供应商还是标准错误？ </h4><br> 普通用户通过第三方客户端软件（浏览器）访问我们的应用程序这一事实增加了另一个层次，使通向便捷，安全的Web浏览的路径变得复杂：浏览器本身可能是安全漏洞的来源。 <br><br> 供应商通常会向可能在浏览器本身中寻找漏洞的安全研究人员提供奖励（也称为漏洞赏金）。 这些错误与您的Web应用程序无关，而与浏览器如何独立管理安全性有关。 <br><br> 例如， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Chrome奖励计划</a>允许安全研究人员联系Chrome安全小组，以报告他们发现的漏洞。 如果确认存在漏洞，将发布修复程序，并且通常会发布安全通知，研究人员将从该程序中获得（通常是财务上的）报酬。 <br><br> 诸如Google之类的公司已经在其Bug赏金计划中投入了大量资金，因为这使公司能够吸引许多研究人员，并向他们保证，如果发现经过测试的软件有任何问题，便会带来经济利益。 <br><br> 每个人都将赢得Bug赏金计划：提供者设法提高其软件的安全性，研究人员为此得到了报酬。 我们相信，Bug Bounty的计划值得在安全领域中单独讨论，我们将在以后讨论这些程序。 <br><br><blockquote> 杰克·阿奇博尔德（Jake Archibald）是一位Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">倡导者</a> ，他发现了一个影响多个浏览器的漏洞。 他在一篇<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有趣的博客文章</a> （我建议您阅读）中记录了他为检测该漏洞所做的努力，与受此漏洞影响的各个供应商联系的过程以及供应商代表的反应。 </blockquote><br><h4> 开发者浏览器 </h4><br> 到目前为止，我们应该已经理解了一个非常简单但相当重要的概念：浏览器仅仅是为“普通” Internet用户创建的HTTP客户端。 <br><br> 对于任何平台，浏览器绝对比简单的HTTP客户端强大（例如，请记住，NodeJS <i>依赖</i>于“ http”），但最终，它们“只是”简单HTTP客户端自然演进的产物。 <br><br> 对于开发人员，我们的HTTP客户端可能是Daniel Stenberg的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">cURL</a> ，这是Web开发人员每天使用的最受欢迎的程序之一。 它允许我们通过从命令行发送HTTP请求来即时执行HTTP交换： <br><br><pre> <code class="plaintext hljs">$ curl -I localhost:8080 HTTP/1.1 200 OK server: ecstatic-2.2.1 Content-Type: text/html etag: "23724049-4096-"2018-07-20T11:20:35.526Z"" last-modified: Fri, 20 Jul 2018 11:20:35 GMT cache-control: max-age=3600 Date: Fri, 20 Jul 2018 11:21:02 GMT Connection: keep-alive</code> </pre> <br> 在上面的示例中，我们在<i>localhost：8080 /</i>处请求了一个文档，本地服务器成功回答了该文档。 <br><br> 与其将响应主体卸载到命令行，我们使用了<i>-I</i>标志，该标志告诉cURL我们只对响应头感兴趣。 更进一步，我们可以为cURL命令提供更多信息，包括它执行的实际请求，以便我们可以更好地检查所有此HTTP交换。 我们应该使用的选项： <i>-v</i> （ <i>详细</i> ，更多）： <br><br><pre> <code class="plaintext hljs">$ curl -I -v localhost:8080 * Rebuilt URL to: localhost:8080/ * Trying 127.0.0.1... * Connected to localhost (127.0.0.1) port 8080 (#0) &gt; HEAD / HTTP/1.1 &gt; Host: localhost:8080 &gt; User-Agent: curl/7.47.0 &gt; Accept: */* &gt; &lt; HTTP/1.1 200 OK HTTP/1.1 200 OK &lt; server: ecstatic-2.2.1 server: ecstatic-2.2.1 &lt; Content-Type: text/html Content-Type: text/html &lt; etag: "23724049-4096-"2018-07-20T11:20:35.526Z"" etag: "23724049-4096-"2018-07-20T11:20:35.526Z"" &lt; last-modified: Fri, 20 Jul 2018 11:20:35 GMT last-modified: Fri, 20 Jul 2018 11:20:35 GMT &lt; cache-control: max-age=3600 cache-control: max-age=3600 &lt; Date: Fri, 20 Jul 2018 11:25:55 GMT Date: Fri, 20 Jul 2018 11:25:55 GMT &lt; Connection: keep-alive Connection: keep-alive &lt; * Connection #0 to host localhost left intact</code> </pre> <br> 在流行的浏览器中，可以通过其DevTools获得大约相同的信息。 <br><br> 如我们所见，浏览器不过是复杂的HTTP客户端。 当然，它们添加了大量功能（例如，凭证管理，书签，历史记录等），但事实是，它们是作为人们的HTTP客户端而诞生的。 这很重要，因为在大多数情况下，您只需“烟熏”并查看答案，就不需要浏览器来检查Web应用程序的安全性。 <br><br> 最后我要指出的是： <b>浏览器可以是</b>任何东西。 如果您有一个通过HTTP使用API​​的移动应用程序，那么此应用程序就是您的浏览器-您只需按单个订单对其进行配置，该命令就只能识别某种类型的HTTP响应（来自您自己的API）。 <br><br><h4>  HTTP潜水 </h4><br> 正如我们已经提到的，我们将最详细地介绍<b>HTTP交换</b>和<b>呈现</b>的各个阶段，因为它们为攻击者提供了最多<b>的攻击媒介</b> 。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://medium.freecodecamp.org/web-security-">在下一篇文章中，</a>我们将仔细研究HTTP协议，并尝试了解应采取哪些措施来确保HTTP交换的安全性。 <br><br><hr><br>  <em><font color="#999999">该翻译由面向大型客户的专业<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">网站开发公司</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">EDISON Software</a>以及<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">C＃和.NET Web开发提供支持</a> 。</font></em> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN432870/">https://habr.com/ru/post/zh-CN432870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN432852/index.html">根据GOST 34制定技术规范非常简单</a></li>
<li><a href="../zh-CN432858/index.html">非常公司发布2：莫斯科开幕报告</a></li>
<li><a href="../zh-CN432860/index.html">PlayStation Classic被黑，现在可以从闪存驱动器运行游戏</a></li>
<li><a href="../zh-CN432862/index.html">公民数字档案平台的原型将在俄罗斯联邦启动，直到2019年底</a></li>
<li><a href="../zh-CN432866/index.html">重新设计-损失了十亿</a></li>
<li><a href="../zh-CN432872/index.html">微软新的Edge浏览器将支持Chrome扩展</a></li>
<li><a href="../zh-CN432876/index.html">快速设置Aerodisk Engine存储</a></li>
<li><a href="../zh-CN432878/index.html">心灵感应支付，大象清洗机的输入以及UX编辑器的其他测试任务</a></li>
<li><a href="../zh-CN432880/index.html">您对电力批发和零售了解多少？</a></li>
<li><a href="../zh-CN432882/index.html">StarWars风格的自己动手制作雪花（更新于2018年）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>