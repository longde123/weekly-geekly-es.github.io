<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤œğŸ» ğŸˆ² ğŸ‘Ÿ æ—¶é—´é—´éš”ï¼šå³å°†åˆ°æ¥çš„C ++æ¼”å˜ ğŸ‘‹ğŸ» ğŸ¦• ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C ++ 20æ ‡å‡†å°†å¾ˆå¿«å‡ºç°ï¼Œå®ƒå¯èƒ½ä¼šæ·»åŠ èŒƒå›´çš„æ¦‚å¿µï¼Œä½†æ˜¯å¾ˆå°‘æœ‰äººçŸ¥é“å®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸€èµ·åƒä»€ä¹ˆã€‚ æˆ‘æ‰¾ä¸åˆ°å…³äºè¿™ç§é‡å…½çš„é€šä¿—æ˜“æ‡‚çš„ä¿„æ–‡èµ„æ–™ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æ ¹æ®å¤§ä¼šä¼šè®®C ++ 2015-çš„ä¸€å¹´ã€‚ å¯¹äºé‚£äº›é¦–æ¬¡é‡åˆ°æ­¤æ¦‚å¿µçš„äººï¼Œæˆ‘å°†å°½åŠ›ä½¿æœ¬æ–‡å°½å¯èƒ½æ¸…æ™°ï¼ŒåŒæ—¶ï¼Œå¯¹äºé‚£äº›å·²ç»ç†Ÿæ‚‰æ­¤æ¦‚å¿µå¹¶æƒ³äº†è§£æ›´å¤š...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ—¶é—´é—´éš”ï¼šå³å°†åˆ°æ¥çš„C ++æ¼”å˜</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440388/"> C ++ 20æ ‡å‡†å°†å¾ˆå¿«å‡ºç°ï¼Œå®ƒå¯èƒ½ä¼šæ·»åŠ <i>èŒƒå›´</i>çš„æ¦‚å¿µï¼Œä½†æ˜¯å¾ˆå°‘æœ‰äººçŸ¥é“å®ƒä»¬æ˜¯ä»€ä¹ˆä»¥åŠä¸€èµ·åƒä»€ä¹ˆã€‚ æˆ‘æ‰¾ä¸åˆ°å…³äºè¿™ç§é‡å…½çš„é€šä¿—æ˜“æ‡‚çš„ä¿„æ–‡èµ„æ–™ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æ ¹æ®å¤§ä¼šä¼šè®®C ++ 2015-çš„ä¸€å¹´ã€‚ å¯¹äºé‚£äº›é¦–æ¬¡é‡åˆ°æ­¤æ¦‚å¿µçš„äººï¼Œæˆ‘å°†å°½åŠ›ä½¿æœ¬æ–‡å°½å¯èƒ½æ¸…æ™°ï¼ŒåŒæ—¶ï¼Œå¯¹äºé‚£äº›å·²ç»ç†Ÿæ‚‰æ­¤æ¦‚å¿µå¹¶æƒ³äº†è§£æ›´å¤šä¿¡æ¯çš„äººï¼Œæˆ‘å°†è°ˆè®ºå„ç§èŠ¯ç‰‡ï¼Œä¾‹å¦‚åŒºé—´é€‚é…å™¨ã€‚ <br><br><h2> èŒƒå›´åº“ </h2><br> åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæœ‰ä¸‰ä¸ªä¸»è¦çš„å®ç°é—´éš”çš„åº“ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‡å‹èŒƒå›´</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">èŒƒå›´v3</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ™ºåº“å…¬å…±å›¾ä¹¦é¦†</a> </li></ul><br> å®é™…ä¸Šï¼Œç¬¬ä¸€ä¸ªåº“å°±æ˜¯è¿™ä¸ªæ¦‚å¿µçš„æºå¤´ï¼ˆè¿™å¹¶ä¸å¥‡æ€ªï¼Œå› ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Boost</a>åº“çš„é›†åˆä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼šï¼‰ã€‚ ç¬¬äºŒä¸ªæ˜¯Eric Nieblerçš„åº“ï¼Œç¨åå°†å¯¹å…¶è¿›è¡Œæè¿°ã€‚ æœ€åï¼Œæ‚¨å¯èƒ½ä¼šçŒœåˆ°ï¼Œæœ€åä¸€ä¸ªåº“æ˜¯ç”±think-cellç¼–å†™çš„ï¼Œå¯ä»¥è¯´æ˜¯å¼€å‘å’Œæ”¹è¿›äº†Boost.Rangeã€‚ <br><a name="habracut"></a><br><h2> ä¸ºä»€ä¹ˆé—´éš”æ˜¯æˆ‘ä»¬çš„æœªæ¥ï¼Ÿ </h2><br> å¯¹äºä¸ç†Ÿæ‚‰é—´éš”æ¦‚å¿µçš„äººï¼Œæˆ‘ä»¬å°†æ­¤éå¹³å‡¡çš„æ¦‚å¿µå®šä¹‰ä¸ºå…·æœ‰å¼€å§‹å’Œç»“æŸï¼ˆä¸€<u>å¯¹è¿­ä»£å™¨</u> ï¼‰çš„æ¦‚å¿µã€‚ <br><br> ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹ä»»åŠ¡ï¼šæœ‰ä¸€ä¸ªå‘é‡ï¼Œæœ‰å¿…è¦ä»å…¶ä¸­åˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ã€‚ åœ¨å½“å‰æ ‡å‡†ä¸‹ï¼Œæˆ‘ä»¬å°†è¿™æ ·è§£å†³ï¼š <br><br><pre><code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt; vec=...; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::sort( vec.begin(), vec.end() ); vec.erase( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::unique( vec.begin(), vec.end() ), vec.end() );</code> </pre> <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†å‘é‡çš„åç§°æœ€å¤šæŒ‡å®š<b>6</b>æ¬¡ï¼ ä½†æ˜¯ï¼Œä½¿ç”¨é—´éš”çš„æ¦‚å¿µï¼ˆå°†å‘é‡çš„å¼€å§‹å’Œç»“æŸå¤„çš„è¿­ä»£å™¨ç»„åˆåˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼‰ï¼Œåªéœ€æŒ‡å®š<b>ä¸€æ¬¡</b>æ‰€éœ€çš„å‘é‡ï¼Œå°±å¯ä»¥ç¼–å†™å¾ˆå¤šæ¬¡ä»£ç ï¼š <br><br><pre> <code class="cpp hljs">tc::unique_inplace( tc::sort(vec) );</code> </pre> <br><h2> å½“å‰å“ªä¸ªé—´éš”åœ¨å½“å‰æ ‡å‡†ä¹‹å†…ï¼Ÿ </h2><br> åœ¨C ++ 11æ ‡å‡†ä¸­ï¼Œæ·»åŠ äº†åŸºäºèŒƒå›´çš„forå¾ªç¯å’Œå¯¹å®¹å™¨çš„å¼€å§‹/ç»“å°¾çš„é€šç”¨è®¿é—®ï¼Œåœ¨æœ€æ–°çš„C ++ 17æ ‡å‡†ä¸­ï¼Œæœªæ·»åŠ ä¸é—´éš”æœ‰å…³çš„æ–°å†…å®¹ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; i : &lt;range_expression&gt; ) { ... }</code> </pre><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::begin/end(&lt;range_expression&gt;)</code> </pre> <br><h2> æœªæ¥é—´éš” </h2><br> ç°åœ¨è®©æˆ‘ä»¬æ¥è°ˆè°ˆå‰é¢æåˆ°çš„Range V3åº“ã€‚ å…¶åˆ›å»ºè€…Eric Nibleråœ¨å…¶å®¶åº­é¡¹ç›®ä¸­åˆ›å»ºäº†<i>Rangeçš„æŠ€æœ¯è§„èŒƒ</i> ï¼Œå¹¶ä¿®æ”¹äº†<i>ç®—æ³•</i>åº“ä»¥æ”¯æŒé—´éš”ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> ranges { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt; <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Rng, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> What &gt; <span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>) find( Rng &amp;&amp; rng, What <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; what ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::find( ranges::begin(rng), ranges::end(rng), what ); } }</code> </pre> <br> åœ¨ä»–çš„ç½‘ç«™ä¸Šæœ‰ä¸€äº›ä»–æƒ³æ ‡å‡†åŒ–çš„é¢„è§ˆï¼Œè¿™æ˜¯<i>Range V3</i> ã€‚ <br><br><h2> å¯ä»¥è€ƒè™‘ä»€ä¹ˆèŒƒå›´ï¼Ÿ </h2><br> é¦–å…ˆï¼Œ <i>å®¹å™¨</i> ï¼ˆå‘é‡ï¼Œå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ç­‰ï¼‰ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸€ä¸ªå¼€å§‹å’Œä¸€ä¸ªç»“æŸã€‚ æ˜¾ç„¶ï¼Œå®¹å™¨å…·æœ‰å®ƒä»¬è‡ªå·±çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬å¼•ç”¨å®¹å™¨æ—¶ï¼Œæˆ‘ä»¬å°†å¼•ç”¨å…¶æ‰€æœ‰å…ƒç´ ã€‚ åŒæ ·ï¼Œåœ¨å¤åˆ¶å’Œå£°æ˜å¸¸é‡æ—¶ï¼ˆæ·±åº¦å¤åˆ¶å’Œä¸€è‡´æ€§ï¼‰ã€‚ å…¶æ¬¡ï¼Œ <i>è§†å›¾</i>ä¹Ÿå¯ä»¥è§†ä¸ºé—´éš”ã€‚ è§†å›¾åªæ˜¯åˆ†åˆ«æŒ‡å‘èµ·ç‚¹å’Œç»ˆç‚¹çš„ä¸€å¯¹è¿­ä»£å™¨ã€‚ è¿™æ˜¯ä»–ä»¬æœ€ç®€å•çš„å®ç°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> It&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iterator_range</span></span></span><span class="hljs-class"> {</span></span> It m_itBegin; It m_itEnd; <span class="hljs-function"><span class="hljs-function">It </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">begin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_itBegin; } <span class="hljs-function"><span class="hljs-function">It </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_itEnd; } };</code> </pre> <br> è€Œè§†å›¾ä»…å¼•ç”¨å…ƒç´ ï¼Œå› æ­¤å¤åˆ¶å’Œä¸€è‡´æ€§æ˜¯æƒ°æ€§çš„ï¼ˆè¿™ä¸ä¼šå½±å“å…ƒç´ ï¼‰ã€‚ <br><br><h2> é—´éš”é€‚é…å™¨ </h2><br> é—´éš”çš„å‘æ˜è€…å¹¶ä¸ä»…é™äºæ­¤ï¼Œå› ä¸ºå¦åˆ™è¯¥æ¦‚å¿µå°†æ¯«æ— ç”¨å¤„ã€‚ å› æ­¤ï¼Œä»–ä»¬å¼•å…¥äº†èŒƒå›´é€‚é…å™¨ä¹‹ç±»çš„æ¦‚å¿µã€‚ <br><br><h3> è½¬æ¢é€‚é…å™¨ </h3><br> è€ƒè™‘ä»¥ä¸‹ä»»åŠ¡ï¼šç»™å‡ºä¸€ä¸ª<i>int</i>å‘é‡ï¼Œå…¶ä¸­æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç­‰äº4çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = ranges::find(v, <span class="hljs-number"><span class="hljs-number">4</span></span>);</code> </pre><br> ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼Œå‘é‡çš„ç±»å‹ä¸æ˜¯intï¼Œè€Œæ˜¯æŸç§å¤æ‚çš„è‡ªå†™ç»“æ„ï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªintï¼Œå¹¶ä¸”ä»»åŠ¡æ˜¯ç›¸åŒçš„ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> data; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;A&gt; v={...}; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = ranges::find_if( v, [](A <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; a) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a.id == <span class="hljs-number"><span class="hljs-number">4</span></span>; } );</code> </pre> <br> æ˜¾ç„¶ï¼Œè¿™ä¸¤ä¸ªä»£ç åœ¨è¯­ä¹‰ä¸Šç›¸ä¼¼ï¼Œä½†æ˜¯åœ¨è¯­æ³•ä¸Šå´æœ‰å¾ˆå¤§ä¸åŒï¼Œå› ä¸ºåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨ç¼–å†™ä¸€ä¸ªè´¯ç©¿<i>int</i>å­—æ®µçš„å‡½æ•°ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨è½¬æ¢é€‚é…å™¨ï¼ˆ <i>transform adapter</i> ï¼‰ï¼Œé‚£ä¹ˆä¸€åˆ‡çœ‹èµ·æ¥éƒ½ä¼šæ›´åŠ ç®€æ´ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> data; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;A&gt; v={...}; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = ranges::find( tc::transform(v, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::mem_fn(&amp;A::id)), <span class="hljs-number"><span class="hljs-number">4</span></span>);</code> </pre><br> å®é™…ä¸Šï¼Œè½¬æ¢é€‚é…å™¨é€šè¿‡åœ¨intå­—æ®µå‘¨å›´åˆ›å»ºåŒ…è£…å™¨ç±»æ¥â€œè½¬æ¢â€æˆ‘ä»¬çš„ç»“æ„ã€‚ æ˜¾ç„¶ï¼ŒæŒ‡é’ˆæŒ‡å‘<i>id</i>å­—æ®µï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒæŒ‡å‘æ•´ä¸ªç»“æ„ï¼Œåˆ™éœ€è¦åœ¨æœ«å°¾æ·»åŠ <i>.baseï¼ˆï¼‰</i> ã€‚ æ­¤å‘½ä»¤å°è£…äº†è¯¥å­—æ®µï¼Œå› æ­¤æŒ‡é’ˆå¯ä»¥åœ¨æ•´ä¸ªç»“æ„ä¸­è¿è¡Œï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = ranges::find( tc::transform(v, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::mem_fn(&amp;A::id)), <span class="hljs-number"><span class="hljs-number">4</span></span>).base();</code> </pre><br> è¿™æ˜¯è½¬æ¢é€‚é…å™¨çš„ç¤ºä¾‹å®ç°ï¼ˆå®ƒç”±è¿­ä»£å™¨ç»„æˆï¼Œæ¯ä¸ªè¿­ä»£å™¨éƒ½æœ‰è‡ªå·±çš„å‡½å­ï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Base, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Func&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">transform_range</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iterator</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: Func m_func; <span class="hljs-comment"><span class="hljs-comment">//    decltype( tc::begin(std::declval&lt;Base&amp;&gt;()) ) m_it; public: decltype(auto) operator*() const { return m_func(*m_it); } decltype(auto) base() const { return (m_it); } ... }; };</span></span></code> </pre><br><h3> è¿‡æ»¤å™¨é€‚é…å™¨ </h3><br> å¹¶ä¸”å¦‚æœåœ¨æœ€åä¸€ä¸ªä»»åŠ¡ä¸­æˆ‘ä»¬ä¸éœ€è¦æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ­¤ç±»å…ƒç´ ï¼Œè€Œæ˜¯â€œè¿‡æ»¤â€ <i>int</i>çš„<b>æ•´ä¸ª</b>å­—æ®µä»¥æŸ¥æ‰¾æ­¤ç±»å…ƒç´ çš„å­˜åœ¨ï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿‡æ»¤å™¨é€‚é…å™¨ï¼š <br><br><pre> <code class="cpp hljs">tc::filter( v, [](A <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; a) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> == a.id; } );</code> </pre><br> è¯·æ³¨æ„ï¼Œè¿‡æ»¤å™¨åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å»¶è¿Ÿæ‰§è¡Œã€‚ <br><br> è¿™æ˜¯ä»–å¹¼ç¨šçš„å®ç°ï¼ˆç±»ä¼¼çš„ä¸œè¥¿åœ¨Boost.Rangeä¸­å®ç°ï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Base, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Func&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter_range</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iterator</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: Func m_func; <span class="hljs-comment"><span class="hljs-comment">//     decltype( ranges::begin(std::declval&lt;Base&amp;&gt;()) ) m_it; decltype( ranges::begin(std::declval&lt;Base&amp;&gt;()) ) m_itEnd; public: iterator&amp; operator++() { ++m_it; while( m_it != m_itEnd &amp;&amp; !static_cast&lt;bool&gt;(m_func(*m_it)) ) ++m_it; return *this; } ... }; };</span></span></code> </pre><br> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œè¿™é‡Œéœ€è¦ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯è½¬æ¢é€‚é…å™¨ä¸­çš„ä¸€ä¸ªã€‚ ä¸ºäº†é¿å…åœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ„å¤–è¶…å‡ºå®¹å™¨çš„è¾¹ç•Œï¼Œç¬¬äºŒä¸ªè¿­ä»£å™¨æ˜¯å¿…éœ€çš„ã€‚ <br><br><h2> ä¸€äº›ä¼˜åŒ– </h2><br> å¥½çš„ï¼Œä½†æ˜¯ä»<b>tc ::è¿‡æ»¤å™¨ï¼ˆtc ::è¿‡æ»¤å™¨ï¼ˆtc ::è¿‡æ»¤å™¨ï¼ˆ...ï¼‰ï¼‰ï¼‰</b>æ¥çœ‹ï¼Œè¿­ä»£å™¨æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ <br><br><h3> å‡å‹èŒƒå›´ </h3><br> ä½œä¸ºä¸Šè¿°å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">èƒ†å°çš„äººä¸è¦çœ‹ï¼</b> <div class="spoiler_text"> <code>m_func3 <br> m_it3 <br> m_func2 <br> m_it2 <br> m_func1 <br> m_it1; <br> m_itEnd1; <br> m_itEnd2 <br> m_func1 <br> m_it1; <br> m_itEnd1; <br> m_itEnd3 <br> m_func2 <br> m_it2 <br> m_func1 <br> m_it1; <br> m_itEnd1; <br> m_itEnd2 <br> m_func1 <br> m_it1; <br> m_itEnd1; <br></code> <br></div></div><br> æ˜¾ç„¶ï¼Œè¿™æ˜¯<u>éå¸¸</u>ä½æ•ˆçš„ã€‚ <br><br><h3> èŒƒå›´v3 </h3><br> è®©æˆ‘ä»¬è€ƒè™‘å¦‚ä½•ä¼˜åŒ–æ­¤é€‚é…å™¨ã€‚  Eric Niblerçš„æƒ³æ³•æ˜¯åœ¨é€‚é…å™¨å¯¹è±¡ä¸­æ”¾å…¥å¸¸è§„ä¿¡æ¯ï¼ˆä»¿å‡½æ•°å’ŒæŒ‡å‘æœ«å°¾çš„æŒ‡é’ˆï¼‰ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å­˜å‚¨æŒ‡å‘è¯¥é€‚é…å™¨å¯¹è±¡å’Œæ‰€éœ€è¿­ä»£å™¨çš„é“¾æ¥ <br> <code>*m_rng <br> m_it <br></code> <br> ç„¶åï¼Œåœ¨è¿™ç§å®ç°çš„æ¡†æ¶ä¸­ï¼Œä¸‰é‡è¿‡æ»¤å™¨å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æ³°å…‹</b> <div class="spoiler_text"> <code>m_rng3 <br> m_it3 <br> m_rng2 <br> m_it2 <br> m_rng1 <br> m_it1 <br></code> <br></div></div><br> å°½ç®¡æœ‰æ—¶æ¯”ä»¥å‰çš„å®ç°è¦å¿«ï¼Œä½†è¿™ä»ç„¶ä¸æ˜¯å®Œç¾çš„ã€‚ <br><br><h3> æ™ºåº“ï¼Œç´¢å¼•æ¦‚å¿µ </h3><br> ç°åœ¨è€ƒè™‘think-cellè§£å†³æ–¹æ¡ˆã€‚ ä»–ä»¬å¼•å…¥äº†æ‰€è°“çš„<i>ç´¢å¼•æ¦‚å¿µ</i>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ç´¢å¼•å°±æ˜¯è¿™æ ·ä¸€ç§è¿­ä»£å™¨ï¼Œå®ƒæ‰§è¡Œä¸å¸¸è§„è¿­ä»£å™¨ç›¸åŒçš„æ‰€æœ‰æ“ä½œï¼Œä½†æ˜¯é€šè¿‡å¼•ç”¨é—´éš”æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Base, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Func&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index_range</span></span></span><span class="hljs-class"> {</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Index = ...; <span class="hljs-function"><span class="hljs-function">Index </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">begin_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Index </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increment_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Index&amp; idx )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrement_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Index&amp; idx )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">reference </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dereference</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Index&amp; idx )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; ... };</code> </pre><br> æˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•å°†ç´¢å¼•ä¸å¸¸è§„è¿­ä»£å™¨ç»“åˆåœ¨ä¸€èµ·ã€‚ <br><br> æ˜¾ç„¶ï¼Œå¸¸è§„è¿­ä»£å™¨ä¹Ÿå¯ä»¥è§†ä¸ºç´¢å¼•ã€‚ åœ¨ç›¸åçš„æ–¹å‘ä¸Šï¼Œå…¼å®¹æ€§å¯ä»¥ä¾‹å¦‚è¿™æ ·å®ç°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> IndexRng&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iterator_for_index</span></span></span><span class="hljs-class"> {</span></span> IndexRng* m_rng; <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> IndexRng::Index m_idx; iterator&amp; <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>++() { m_rng.increment_index(m_idx); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } ... };</code> </pre><br> ç„¶åï¼Œå°†é«˜æ•ˆåœ°å®ç°ä¸‰é‡è¿‡æ»¤å™¨ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Base, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Func&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter_range</span></span></span><span class="hljs-class"> {</span></span> Func m_func; Base&amp; m_base; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Index = <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Base::Index; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increment_index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Index&amp; idx )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { m_base.increment_index(idx); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ( idx != m_base.end_index() &amp;&amp; !m_func(m_base.dereference_index(idx)) ); } };</code> </pre><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> IndexRng&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iterator_for_index</span></span></span><span class="hljs-class"> {</span></span> IndexRng* m_rng; <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> IndexRng::Index m_idx; ... };</code> </pre><br> åœ¨è¿™ç§å®ç°çš„æ¡†æ¶ä¸­ï¼Œæ— è®ºè¿‡æ»¤å™¨çš„æ·±åº¦å¦‚ä½•ï¼Œè¯¥ç®—æ³•éƒ½èƒ½å¿«é€Ÿå·¥ä½œã€‚ <br><br><h2> å…·æœ‰å·¦å€¼å’Œå³å€¼å®¹å™¨çš„é—´éš” </h2><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åŒºé—´å¦‚ä½•ä¸å·¦å€¼å’Œå³å€¼å®¹å™¨ä¸€èµ·å·¥ä½œï¼š <br><br><h3> å·¦å€¼ </h3><br> èŒƒå›´V3å’Œæ€è€ƒå•å…ƒçš„è¡Œä¸ºä¸å·¦å€¼ç›¸åŒã€‚ å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> rng = view::filter(vec, pred1); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b = ranges::any_of(rng, pred2);</code> </pre><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¢„å…ˆå£°æ˜çš„å‘é‡ä½äºå†…å­˜ï¼ˆå·¦å€¼ï¼‰ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé—´éš”ï¼Œç„¶åä»¥æŸç§æ–¹å¼ä½¿ç”¨å®ƒã€‚ æˆ‘ä»¬ä½¿ç”¨<i>view :: filter</i>æˆ–<i>tc :: filter</i>åˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œç„¶åå˜å¾—å¿«ä¹ï¼Œæ²¡æœ‰é”™è¯¯ï¼Œç„¶åå¯ä»¥åœ¨ä¾‹å¦‚any_ofä¸­ä½¿ç”¨æ­¤è§†å›¾ã€‚ <br><br><h3> èŒƒå›´V3å’Œå³å€¼ </h3><br> ä½†æ˜¯ï¼Œå¦‚æœçŸ¢é‡è¿˜æ²¡æœ‰å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯åœ¨åˆ›å»ºå®ƒï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†é¢ä¸´ç›¸åŒçš„ä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å°è¯•ç¼–å†™å¹¶é¢ä¸´é”™è¯¯ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> rng = view::filter(create_vector(), pred1); <span class="hljs-comment"><span class="hljs-comment">//   bool b = ranges::any_of(rng, pred2);</span></span></code> </pre><br> ä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ ç”±äºæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‘é‡å¹¶å°†å…¶ç›´æ¥æ”¾å…¥è¿‡æ»¤å™¨ä¸­ï¼Œå› æ­¤Viewå°†æˆä¸ºrvalueçš„æ‚¬æŒ‚é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿‡æ»¤å™¨ä¸­å°†å­˜åœ¨ä¸€ä¸ªrvalueé“¾æ¥ï¼Œå½“ç¼–è¯‘å™¨è½¬åˆ°ä¸‹ä¸€è¡Œå¹¶å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå®ƒå°†æŒ‡å‘ä¸€ä¸ªæœªçŸ¥çš„ä¸œè¥¿ã€‚ ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼ŒRange V3æå‡ºäº†ä»¥ä¸‹<i>æªæ–½</i> ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> rng = action::filter(create_vector(), pred1); <span class="hljs-comment"><span class="hljs-comment">//   bool b = ranges::any_of(rng, pred2);</span></span></code> </pre> <br> åŠ¨ä½œåŒæ—¶æ‰§è¡Œæ‰€æœ‰æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªå‘é‡ï¼ŒæŒ‰è°“è¯è¿‡æ»¤å¹¶å°†å…¶æ”¾å…¥ä¸€ä¸ªé—´éš”ä¸­ã€‚ ä½†æ˜¯ï¼Œç¼ºç‚¹æ˜¯å®ƒä¸å†æ˜¯æ‡’æƒ°çš„ï¼Œå› æ­¤Think-cellè¯•å›¾è§£å†³æ­¤é—®é¢˜ã€‚ <br><br><h3> æ€ç»´å•å…ƒå’Œå³å€¼ </h3><br>  Think-cellåšåˆ°äº†ï¼Œå› æ­¤åˆ›å»ºäº†ä¸€ä¸ªå®¹å™¨è€Œä¸æ˜¯è§†å›¾ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> rng = tc::filter(creates_vector(), pred1); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b = ranges::any_of(rng, pred2);</code> </pre><br> ç»“æœï¼Œæˆ‘ä»¬ä¸ä¼šé‡åˆ°ç±»ä¼¼çš„é”™è¯¯ï¼Œå› ä¸ºåœ¨å…¶å®ç°ä¸­ï¼Œè¿‡æ»¤å™¨ä¼šæ”¶é›†å³å€¼å®¹å™¨è€Œä¸æ˜¯é“¾æ¥ï¼Œå› æ­¤è¿™ç§æƒ…å†µå¾ˆæ‡’æƒ°ã€‚  Range V3ä¸æƒ³è¿™æ ·åšï¼Œå› ä¸ºä»–ä»¬æ‹…å¿ƒç”±äºè¿‡æ»¤å™¨ä»¥è§†å›¾æˆ–å®¹å™¨çš„å½¢å¼å‡ºç°é”™è¯¯ï¼Œä½†æ˜¯think-cellç¡®ä¿¡ç¨‹åºå‘˜ä¼šç†è§£è¿‡æ»¤å™¨çš„è¡Œä¸ºï¼Œå¹¶ä¸”å¤§å¤šæ•°é”™è¯¯æ­£æ˜¯ç”±äºè¿™ç§â€œæ‡’æƒ°â€è€Œäº§ç”Ÿçš„ã€‚ <br><br><h2> å‘ç”µæœºé—´éš” </h2><br> æˆ‘ä»¬æ¦‚æ‹¬äº†åŒºé—´çš„æ¦‚å¿µã€‚ å®é™…ä¸Šï¼Œå­˜åœ¨æ²¡æœ‰è¿­ä»£å™¨çš„é—´éš”ã€‚ å®ƒä»¬ç§°ä¸º<i>å‘ç”µæœºèŒƒå›´</i> ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªGUIå°éƒ¨ä»¶ï¼ˆä¸€ä¸ªç•Œé¢å…ƒç´ ï¼‰ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç§»åŠ¨å°éƒ¨ä»¶ã€‚ æˆ‘ä»¬æœ‰ä¸€ä¸ªçª—å£è¦æ±‚ç§»åŠ¨å…¶çª—å£å°éƒ¨ä»¶ï¼Œåœ¨<i>åˆ—è¡¨æ¡†ä¸­</i>è¿˜æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå¦ä¸€ä¸ªçª—å£ä¹Ÿåº”åœ¨å…¶çª—å£å°éƒ¨ä»¶ä¹‹é—´æ»šåŠ¨ï¼Œå³è°ƒç”¨<i>traverse_widgets</i> ï¼Œå®ƒå°†å…ƒç´ è¿æ¥åˆ°å‡½å­ï¼ˆ <i>æ‚¨å¯ä»¥è¯´æœ‰ä¸€ä¸ªæšä¸¾å‡½æ•°ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­è¿æ¥ä»¿å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åˆ—å‡ºå®ƒåœ¨ä»¿å‡½æ•°ä¸­å…·æœ‰çš„æ‰€æœ‰å…ƒç´ </i> ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Func&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traverse_widgets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Func func )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window1) { window1-&gt;traverse_widgets(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ref(func)); } func(button1); func(listbox1); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window2) { window2-&gt;traverse_widgets(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::ref(func)); } }</code> </pre><br> è¿™åœ¨æŸç§ç¨‹åº¦ä¸Šè®©äººè”æƒ³åˆ°å°éƒ¨ä»¶é—´è·ï¼Œä½†æ˜¯è¿™é‡Œæ²¡æœ‰è¿­ä»£å™¨ã€‚ ç›´æ¥ç¼–å†™å®ƒä»¬æ•ˆç‡ä½ä¸‹ï¼Œæœ€å›°éš¾çš„æ˜¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è¯´è¿™æ ·çš„ç»“æ„ä¹Ÿè¢«è§†ä¸ºé—´éš”ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›æœ‰ç”¨çš„é—´éš”æ–¹æ³•ï¼Œä¾‹å¦‚<i>any_of</i> ï¼š <br><br><pre> <code class="cpp hljs">mouse_hit_any_widget=tc::any_of( [] (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> func) { traverse_widgets(func); }, [] (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; widget) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> widget.mouse_hit(); } );</code> </pre><br>  think-cellå°è¯•å®ç°æ–¹æ³•ï¼Œä»¥ä½¿å®ƒä»¬å¯¹äºæ‰€æœ‰é—´éš”éƒ½å…·æœ‰ç›¸åŒçš„æ¥å£ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> tc { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt; <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Rng &gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any_of</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Rng </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; rng )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> bResult = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; tc::enumerate( rng, [&amp;](bool_context b) { bResult = bResult || b; } ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bResult; } }</code> </pre><br> ä½¿ç”¨<i>tc :: enumerate</i>å¯ä»¥éšè—æ—¶é—´é—´éš”ä¹‹é—´çš„å·®å¼‚ï¼Œå› ä¸ºè¿™ç§å®ç°éµå¾ª<i>å†…éƒ¨è¿­ä»£</i>çš„æ¦‚å¿µï¼ˆåœ¨æœ¬è®²åº§ä¸­å°†æ›´è¯¦ç»†åœ°æè¿°<i>å¤–éƒ¨</i> <i>è¿­ä»£</i>å’Œ<i>å†…éƒ¨è¿­ä»£</i>çš„æ¦‚å¿µï¼‰ï¼Œä½†æ˜¯è¿™ç§å®ç°æœ‰å…¶ç¼ºç‚¹ï¼Œå³<i>std :: any_of</i>ä¼šåœ¨é‡åˆ°<i>trueæ—¶</i> <i>ç«‹å³</i>åœæ­¢ã€‚ ä»–ä»¬å°è¯•é€šè¿‡æ·»åŠ ä¾‹å¤–ï¼ˆæ‰€è°“çš„<i>ç”Ÿæˆå™¨é—´éš”ä¸­æ–­</i> ï¼‰æ¥è§£å†³æ­¤é—®é¢˜ã€‚ <br><br><h2> ç»“è®º </h2><br> æˆ‘è®¨åŒåŸºäºèŒƒå›´çš„forå¾ªç¯ï¼Œå› ä¸ºå®ƒä¼šæ¿€åŠ±äººä»¬åœ¨éœ€è¦å’Œä¸éœ€è¦çš„åœ°æ–¹ç¼–å†™å®ƒï¼Œå› ä¸ºä»£ç çš„ç®€æ´æ€§é€šå¸¸ä¼šå˜å·®ï¼Œä¾‹å¦‚ï¼Œäººä»¬ä¼šè¿™æ ·å†™ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n : rng) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( is_prime(n) ) { b = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br> ç›¸åï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b = tc::any_of( rng, is_prime );</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN440388/">https://habr.com/ru/post/zh-CN440388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN440374/index.html">Yandexå‡½æ•°å‘é€é‚®ä»¶</a></li>
<li><a href="../zh-CN440376/index.html">20ä¸ªæ¸¸æˆæ¥æ•™å­©å­ç¼–ç¨‹</a></li>
<li><a href="../zh-CN440378/index.html">å›åˆ°Istioçš„å¾®æœåŠ¡ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN440382/index.html">200æ˜¯å¥½æ˜¯åï¼Ÿ</a></li>
<li><a href="../zh-CN440386/index.html">é€šè¿‡æ¶ˆé™¤é”™è¯¯æ¥é‡Šæ”¾é”™è¯¯å¤„ç†</a></li>
<li><a href="../zh-CN440390/index.html">åµŒå…¥å¼ç³»ç»Ÿçš„å¤šæ ·åŒ–ä¸–ç•Œä»¥åŠEmboxåœ¨å…¶ä¸­çš„åœ°ä½</a></li>
<li><a href="../zh-CN440392/index.html">æ‚¨ç½‘ç«™ä¸Šçš„WebRTC-æ²¡æœ‰é”™è¯¯ï¼Œä¹Ÿæ²¡æœ‰é¢„ç®—</a></li>
<li><a href="../zh-CN440394/index.html">PostgreSQLæƒé™æå‡-CVE-2018-10915è§£æ</a></li>
<li><a href="../zh-CN440398/index.html">å‚åŠ 2018å¹´ä¿„ç½—æ–¯AIæ¯çš„å†å²ï¼ˆå’Œèƒœåˆ©ï¼‰-CodeBall</a></li>
<li><a href="../zh-CN440400/index.html">Apache Kafka + Spring Bootï¼šæ‚¨å¥½ï¼Œå¾®æœåŠ¡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>