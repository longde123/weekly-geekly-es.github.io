<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ó üë®üèª‚Äçüéì üöí A hist√≥ria de um √∫nico servidor com refrigera√ß√£o passiva üë©üèΩ‚Äçü§ù‚Äçüë©üèª ü¶ì ‚ù£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√Äs vezes, as id√©ias surgem sem um estudo adequado no est√°gio inicial, e essas id√©ias, devido √† credibilidade do autor, parecem muito promissoras para ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>A hist√≥ria de um √∫nico servidor com refrigera√ß√£o passiva</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477430/"> √Äs vezes, as id√©ias surgem sem um estudo adequado no est√°gio inicial, e essas id√©ias, devido √† credibilidade do autor, parecem muito promissoras para todos os membros da equipe.  Ent√£o, h√° algum tempo, o grupo de empresas VIT e ComBox Technology teve a id√©ia de implementar um servidor baseado em muitos microcomputadores.  O objetivo do servidor √© a execu√ß√£o de redes neurais na CPU e GPU dos microcomputadores.  O fator de forma estimado do futuro servidor √© 1U, vers√£o para montagem em rack.  E tudo ficaria bem, apenas a id√©ia inclu√≠a refrigera√ß√£o passiva, j√° que a emiss√£o de calor anunciada dos microcomputadores propostos para uso era de 25 W.  Na verdade, o microcomputador proposto para implementa√ß√£o foi o Intel NUC com um processador Intel Core i5 e uma GPU Iris Plus 655 integrada. 25 W, 1U, refrigera√ß√£o passiva, um servidor - tudo isso parece encorajador, mas as nuances surgiram ainda mais. <br><a name="habracut"></a><br>  Primeiramente, 8 computadores deveriam ser microcomputadores no servidor.  Ou seja, a dissipa√ß√£o de calor proporcional ao consumo de energia j√° √© igual a 25 * 8 = 200 watts.  E j√° nesta fase n√£o se pode dizer resfriamento passivo, mas o experimento foi continuado.  Inclusive, por raz√µes de maior adapta√ß√£o da tecnologia para a execu√ß√£o de gabinetes externos.  O desenvolvimento do hardware ocorreu em paralelo com o TOC no uso do software necess√°rio.  Utilizamos um complexo para a detec√ß√£o e reconhecimento de placas e marcas / modelos de ve√≠culos VIT chamados EDGE.  Como se viu, ao medir o consumo de energia a 100% da carga, o Intel NUC8i5BEK consome 46 watts em vez dos 25 declarados. Com essa abordagem, o consumo de energia e a dissipa√ß√£o de calor do servidor j√° se tornam 46 * 8 = 368 watts.  E isso sem levar em considera√ß√£o fontes de alimenta√ß√£o e componentes adicionais. <br><br>  Como dissipador de calor, usamos chapas de cobre ap√≥s retifica√ß√£o e grava√ß√£o especial.  Al√©m disso, a placa de cobre emitia calor para o trocador de calor de alum√≠nio na parte superior do servidor.  Devido a erros nos c√°lculos, o trocador de calor ocupava 2/3 da tampa superior e estava localizado nos dois lados em paralelo com 4 microcomputadores nos lados esquerdo e direito do servidor.  Na √°rea central, havia uma fonte de 550 W na parte traseira e um roteador Mikrotik de 1 Gbit na frente. <br><br><img src="https://habrastorage.org/webt/rj/-1/ks/rj-1ksxnpavugjl5uw1oca8ub4m.png" alt="Fase de design do servidor com base em 8 microcomputadores"><br>  <i>Fase de design do servidor com base em 8 microcomputadores</i> <br><br>  E o resultado que acabou: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c50/b68/139/c50b68139d2c00e0870eddcb9de0a9d5.png" alt="NUC Server   " title="Servidor NUC com refrigera√ß√£o passiva"><br>  <i>Servidor NUC com refrigera√ß√£o passiva</i> <br><br>  Obviamente, esse projeto funcionou com carga m√©dia, mas a 100% continuou a aquecer lentamente e a fornecer uma parte significativa do calor ao meio ambiente.  Mesmo dentro de um gabinete de servidor com um corredor quente e frio, o design inevitavelmente aquecia um "vizinho" mais alto.  Reduzir o n√∫mero de microcomputadores para 4 pe√ßas tornou poss√≠vel estabilizar a temperatura de aquecimento e evitar a acelera√ß√£o mesmo com carga de 100%, mas o problema de um ‚Äúvizinho‚Äù mais alto permaneceu. <br><br>  A pilha de solu√ß√µes tecnol√≥gicas divergiu em duas dire√ß√µes: <br><br><ul><li>  Arrefecimento passivo do Intel NUC8i5BEK no caso de uso externo </li><li>  Refrigera√ß√£o a ar ativa no chassi do servidor 1U </li></ul><br><h3>  Servidor 1U com 8 processadores Core i5 e 8 GPUs instaladas </h3><br>  Sim, sim, √© muito e sim, √© poss√≠vel.  Como voc√™ pergunta?  Combinando v√°rios microcomputadores dentro de um chassi de 1U no n√≠vel da rede atrav√©s de um roteador.  Especificamente, para a implementa√ß√£o de redes neurais e o processamento de fluxos RTSP recebidos, essa solu√ß√£o √© ideal.  Al√©m disso, permite criar sistemas escal√°veis ‚Äã‚Äãcom base em v√°rios Docker, Docker Swarm e Ansible. <br><br>  Durante o processo de desenvolvimento, tivemos que projetar v√°rias vers√µes diferentes: <br><br><h4>  Prot√≥tipo da decis√£o futura </h4><br>  A id√©ia original deixou dissipadores de calor de cobre e radiadores de alum√≠nio comprovados, mas agora localizados diretamente em cada n√≥ de computa√ß√£o dentro do gabinete.  Al√©m disso, para remover o calor, foram utilizados 2 ventiladores, instalados na frente de cada m√≥dulo de computa√ß√£o, direcionando o ar quente de um corredor frio para quente (da frente do servidor).  Para o controle ativo do ventilador, foram desenvolvidas placas especiais que alteravam sua velocidade com base nos sensores de temperatura em cada microcomputador.  Devido √† falta de necessidade de PoE, o roteador foi privado de resfriamento ativo; passou para passivo com uma libera√ß√£o de calor de n√£o mais que 10 watts.  A fonte de alimenta√ß√£o na primeira vers√£o permaneceu 500 W, mas foi instalada em suportes especiais com possibilidade de substitui√ß√£o r√°pida, mas com falta de energia.  Para monitorar o status dos n√≥s de computa√ß√£o, uma indica√ß√£o de 8 diodos foi adicionada no painel frontal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e68/f31/eea/e68f31eeab0da5e600173c8aad55cae5.png" alt="  NUC Server  ComBox Technology, 8 CPU Core i5  8 GPU Iris Plus 655  - 1U" title="Prot√≥tipo NUC Server da ComBox Technology, 8 CPU Core i5 e 8 GPU Iris Plus 655 no formato 1U"><br>  <i>Prot√≥tipo NUC Server da ComBox Technology, 8 CPU Core i5 e 8 GPU Iris Plus 655 no formato 1U</i> <br><br>  Caracter√≠sticas t√©cnicas da primeira vers√£o do servidor no Intel NUC: <br><br><ul><li>  Intel NUC8i5BEK (sem caixa com um sistema de refrigera√ß√£o modificado), 8 pe√ßas. </li><li>  M√≥dulos de mem√≥ria AMD Radeon R7 Performance DDR4 SO-DIMM, 8 GB, 8 pcs. </li><li>  M√≥dulos de mem√≥ria adicionais DDR4 SO-DIMM Kingston, 4 GB, 8 pcs. </li><li>  Unidade SSD M.2 WD Verde, 240Gb, 8 pcs. </li><li>  Caixa 1U (produ√ß√£o pr√≥pria) </li><li>  MikroTik RB4011iGS + RM Router (sem caixa com um sistema de refrigera√ß√£o modificado), 1 pc. </li><li>  Fios de conex√£o (cabos de conex√£o), 11 un. </li><li>  BP 94Y8187, 550 watts. </li></ul><br>  Como fica no processo de trabalho: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Y6u43FeGLXU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Vers√£o de produ√ß√£o do servidor NUC </h4><br>  A vers√£o de produ√ß√£o passou por mudan√ßas significativas.  Em vez de uma fonte de alimenta√ß√£o, 2 apareceram no servidor com a possibilidade de troca a quente.  Utilizamos uma fonte de alimenta√ß√£o compacta de servidor de 600 W da Supermicro.  Para os m√≥dulos de computa√ß√£o, surgiram pegadas especiais e a possibilidade de troca a quente sem desligar o servidor inteiro.  Muitos loops de rede foram substitu√≠dos por barramentos fixos fixados nos assentos.  O microcomputador da arquitetura Nano Pi ARM da FriendlyARM foi adicionado para gerenciar o servidor, para o qual o software foi escrito e instalado para verificar e monitorar o status dos n√≥s de computa√ß√£o, reportando falhas e redefini√ß√£o de hardware de n√≥s de computa√ß√£o espec√≠ficos via GPIO, se necess√°rio.  Os ventiladores na vers√£o de produ√ß√£o s√£o instalados atr√°s do painel frontal na dire√ß√£o do corredor frio em dire√ß√£o ao quente, e as aletas do trocador de calor de alum√≠nio agora est√£o direcionadas para baixo, em vez de para cima, o que tornou acess√≠vel a mem√≥ria e os discos de cada n√≥ de computa√ß√£o. <br><br><h3>  Gabinete para √°rea externa Intel NUC </h3><br>  Como os microcomputadores em si n√£o s√£o industriais, o uso em exteriores exige n√£o apenas um caso, mas tamb√©m condi√ß√µes clim√°ticas apropriadas.  Precis√°vamos de prote√ß√£o contra poeira e umidade IP66, bem como opera√ß√£o de temperatura de -40 a +50 graus Celsius. <br><br>  Testamos duas hip√≥teses para dissipa√ß√£o de calor eficiente: tubos de calor e placas de cobre como dissipador de calor.  Este √∫ltimo mostrou-se mais eficaz, embora com uma √°rea grande e solu√ß√µes mais caras.  Como trocador de calor, tudo tamb√©m √© usado dormentes de alum√≠nio com as dimens√µes calculadas das nervuras. <br><br>  Para iniciar o dispositivo em temperaturas abaixo de zero, usamos cer√¢mica para aquecimento.  Para facilitar a opera√ß√£o e a implementa√ß√£o em v√°rios campos, foram instaladas fontes de alimenta√ß√£o de uma ampla faixa de 6 a 36 V. <br><br>  O principal objetivo do dispositivo resultante: a execu√ß√£o de redes neurais com uso intensivo de recursos nas imedia√ß√µes da fonte de dados.  Tais tarefas incluem o c√°lculo do tr√°fego de passageiros em ve√≠culos (autom√≥veis de passageiros, trens), bem como o processamento centralizado de dados sobre detec√ß√£o e reconhecimento de faces em opera√ß√µes industriais. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b53/11b/7e4/b5311b7e45ae4b033a2f88d5b4cc7557.png" alt="Intel NUC     , IP66   " title="Intel NUC em gabinete externo, IP66 com m√≥dulo clim√°tico"><br>  <i>Intel NUC em gabinete externo, IP66 com m√≥dulo clim√°tico</i> <br><br><h3>  Esquema Geral de Infer√™ncia H√≠brida </h3><br>  Por infer√™ncia, geralmente s√£o utilizados tr√™s tipos de dispositivos: um servidor em um datacenter, c√¢meras com software instalado para detectar e reconhecer objetos neles e microcomputadores de uma instala√ß√£o externa (√† qual as c√¢meras est√£o conectadas, por exemplo, por um comutador).  Al√©m disso, em v√°rios dispositivos (por exemplo, 2 servidores, 15 c√¢meras, 30 microcomputadores), √© necess√°ria a agrega√ß√£o e armazenamento de dados (eventos). <br><br>  Em nossas solu√ß√µes, usamos o seguinte esquema de agrega√ß√£o e armazenamento de dados usando sistemas de armazenamento: <br><br><img src="https://habrastorage.org/webt/1a/l-/lz/1al-lzaqrx6bk6jsplwymzhlypu.jpeg" alt="    " title="O esquema geral da infer√™ncia h√≠brida"><br>  <i>O esquema geral da infer√™ncia h√≠brida</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477430/">https://habr.com/ru/post/pt477430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477414/index.html">Engenheiro de dados - a profiss√£o mais sexy do s√©culo XXI</a></li>
<li><a href="../pt477416/index.html">Quando √© prejudicial ao hash</a></li>
<li><a href="../pt477418/index.html">Refra√ß√£o de tr√™s lados em tr√™s etapas</a></li>
<li><a href="../pt477426/index.html">Se houvesse cidades em Marte ... O que as pessoas fariam com o HighLoad ++ l√°?</a></li>
<li><a href="../pt477428/index.html">Rede Bayesiana, moedas e a crise global</a></li>
<li><a href="../pt477434/index.html">Malha de servi√ßo para microsservi√ßos. Parte II, no√ß√µes b√°sicas de trabalho com o Istio</a></li>
<li><a href="../pt477436/index.html">Como escrever uma calculadora simples cliente-servidor (JavaFX + EJB + WildFly)</a></li>
<li><a href="../pt477438/index.html">Como recuperar o controle e reduzir a depend√™ncia de smartphones e notifica√ß√µes</a></li>
<li><a href="../pt477440/index.html">Flipper Zero - tomagotchi patsan multitool para pentester</a></li>
<li><a href="../pt477442/index.html">56 projetos Python de c√≥digo aberto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>