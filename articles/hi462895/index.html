<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯИ╣ ЁЯСитАНЁЯСж тЧАя╕П Pwnable.kr 17 рдХреЗ рд╕рд╛рде рдПрдХ рдиреМрдХрд░реА рд╣рд▓ рдХрд░рдирд╛ - рдпрд╛рджрдЧрд╛рд░ред рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг ЁЯХС ЁЯд╝ тЦ╢я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╣рдо рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗ, рдФрд░ рд╕рд╛рдЗрдЯ pwnable.kr рд╕реЗ 17 рд╡реЗрдВ рдХрд╛рд░реНрдп рдХреЛ рднреА рд╣рд▓ рдХрд░реЗрдВрдЧреЗ ред 

 рд╕рдВрдЧрдардирд╛рддреНрдордХ рдЬрд╛рдирдХрд╛рд░реА  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рд╕реВрдЪ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pwnable.kr 17 рдХреЗ рд╕рд╛рде рдПрдХ рдиреМрдХрд░реА рд╣рд▓ рдХрд░рдирд╛ - рдпрд╛рджрдЧрд╛рд░ред рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462895/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/al/py/ef/alpyefagnx81cc2xc1ncjqs8lus.png" alt="рдЫрд╡рд┐"></div><br>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╣рдо рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗ, рдФрд░ рд╕рд╛рдЗрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pwnable.kr</a> рд╕реЗ 17 рд╡реЗрдВ рдХрд╛рд░реНрдп рдХреЛ рднреА рд╣рд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░реЗрдВрдЧреЗ</a> ред <br><br><div class="spoiler">  <b class="spoiler_title">рд╕рдВрдЧрдардирд╛рддреНрдордХ рдЬрд╛рдирдХрд╛рд░реА</b> <div class="spoiler_text">  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рд╕реВрдЪрдирд╛ рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рдХрд┐рд╕реА рднреА рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреБрдЫ рдирдпрд╛ рд╕реАрдЦрдирд╛ рдФрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдореИрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦреВрдВрдЧрд╛ рдФрд░ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛: <br><br><ul><li>  PWN; </li><li>  рдХреНрд░рд┐рдкреНрдЯреЛрдЧреНрд░рд╛рдлреА (рдХреНрд░рд┐рдкреНрдЯреЛ); </li><li>  рдиреЗрдЯрд╡рд░реНрдХ рдЯреЗрдХреНрдиреЛрд▓реЙрдЬреАрдЬ (рдиреЗрдЯрд╡рд░реНрдХ); </li><li>  рд░рд┐рд╡рд░реНрд╕ (рд░рд┐рд╡рд░реНрд╕ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ); </li><li>  рд╕реНрдЯреЗрдЧреНрдиреЛрдЧреНрд░рд╛рдлрд╝реА (рд╕реНрдЯреЗрдЧреНрдиреЛ); </li><li>  WEB рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдФрд░ рдЙрдирдХрд╛ рджреЛрд╣рдиред </li></ul><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХреЛ рдХрдВрдкреНрдпреВрдЯрд░ рдлреЛрд░реЗрдВрд╕рд┐рдХ, рдореИрд▓рд╡реЗрдпрд░ рдФрд░ рдлрд░реНрдорд╡реЗрдпрд░ рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг, рд╡рд╛рдпрд░рд▓реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рд╕реНрдерд╛рдиреАрдп рдХреНрд╖реЗрддреНрд░ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣рдорд▓реЗ, рдкреЗрдВрдЯреЗрд╕реНрдЯ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдФрд░ рдХрд╛рд░рдирд╛рдореЗ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░реВрдВрдЧрд╛ред <br><a name="habracut"></a><br>  рддрд╛рдХрд┐ рдЖрдк рдирдП рд▓реЗрдЦ, рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдФрд░ рдЕрдиреНрдп рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдмрд╛рд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдВ рдЬрд╛рди</a> рд╕рдХреЗрдВ, рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдореЗрдВ</a> рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЪреИрдирд▓</a> рдмрдирд╛рдпрд╛ рдФрд░ рдЖрдИрд╕реАрдбреА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рд╕реА рднреА рдореБрджреНрджреЗ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</a> рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдореВрд╣</a> рдмрдирд╛рдпрд╛ред  рд╕рд╛рде рд╣реА, рдореИрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдЖрдкрдХреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЕрдиреБрд░реЛрдзреЛрдВ, рдкреНрд░рд╢реНрдиреЛрдВ, рд╕реБрдЭрд╛рд╡реЛрдВ рдФрд░ рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реНрдпрдХреНрддрд┐рдЧрдд</a> рд░реВрдк рд╕реЗ рд╡рд┐рдЪрд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░реВрдВрдЧрд╛ рдФрд░ рд╕рднреА рдХрд╛ рдЬрд╡рд╛рдм рджреВрдВрдЧрд╛</a> ред <br><cut></cut><br>  рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗрд╡рд▓ рд╢реИрдХреНрд╖рд┐рдХ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИред  рдЗрд╕ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХрд╛ рд▓реЗрдЦрдХ рдЗрд╕ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдкреНрд░рд╛рдкреНрдд рдЬреНрдЮрд╛рди рдФрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдХрд┐рд╕реА рдХреЛ рд╣реБрдП рдиреБрдХрд╕рд╛рди рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЬрд╝рд┐рдореНрдореЗрджрд╛рд░реА рдирд╣реАрдВ рдЙрдард╛рддрд╛ рд╣реИред <br></div></div><br><h2>  рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг </h2><br>  рдХрдВрдкреНрдпреВрдЯрд░ рдХреА рд░реИрдВрдбрдо рдПрдХреНрд╕реЗрд╕ рдореЗрдореЛрд░реА рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд░рдирд╛ рддреЗрдЬреА рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХреЗ рд▓рд┐рдП рдореЗрдореЛрд░реА рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡реНрдпрд╡рд╕реНрдерд╛ рд╣реИред  рд╕реНрдореГрддрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдореБрдЦреНрдп рдЗрдХрд╛рдИ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╢реАрди рд╢рдмреНрдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИрдВред  рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЖрдХрд╛рд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: рдПрдХ, рджреЛ, рдЪрд╛рд░, рдЖрда, рдЖрджрд┐ред  рдмрд╛рдЗрдЯреНрд╕ред  рд╕реНрдореГрддрд┐ рдореЗрдВ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╕рд╣реЗрдЬрддреЗ рд╕рдордп, рдРрд╕рд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХреБрдЫ рдХреНрд╖реЗрддреНрд░ рдЗрди рд╢рдмреНрдж рд╕реАрдорд╛рдУрдВ рд╕реЗ рдкрд░реЗ рдЬрд╛рддреЗ рд╣реИрдВред  рдХреБрдЫ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдВрд░реЗрдЦрд┐рдд рдбреЗрдЯрд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдмрд┐рдирд╛ рдбреЗрдЯрд╛ рдХреЗ рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдФрд░ рдЧреИрд░-рдкрд░рд┐рд╖реНрдХреГрдд рдкреНрд░реЛрд╕реЗрд╕рд░ рдЖрдорддреМрд░ рдкрд░ рдмрд┐рдирд╛ рдбреЗрдЯрд╛ рдХреЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><cut></cut><br>  рд╕рдВрд░реЗрдЦрд┐рдд рдФрд░ рдЧреИрд░-рд╕рдВрд░реЗрдЦрд┐рдд рдбреЗрдЯрд╛ рдХреЗ рдПрдХ рдореЙрдбрд▓ рдХреА рдмреЗрд╣рддрд░ рдХрд▓реНрдкрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ - рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ред <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var1; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* mas[<span class="hljs-number"><span class="hljs-number">4</span></span>]; };</code> </pre> <br>  рдЪреВрдБрдХрд┐ x32 рдФрд░ x64 рдкреНрд░реЛрд╕реЗрд╕рд░ рдореЗрдВ рдПрдХ рдЕрдВрддрд░ рдЪрд░ рдХрд╛ рдЖрдХрд╛рд░ рдХреНрд░рдорд╢рдГ 4 рдмрд╛рдЗрдЯреНрд╕ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдПрдХ рд╢реВрдиреНрдп * рдЪрд░ рдХрд╛ рдореВрд▓реНрдп рдХреНрд░рдорд╢рдГ 4 рдФрд░ 8 рдмрд╛рдЗрдЯреНрд╕ рд╣реИ, x32 рдФрд░ x64 рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╕реНрдореГрддрд┐ рдореЗрдВ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/ce/rm/e-/cerme-hyvfeizjqfnoyk1fqps4k.png" alt="рдЫрд╡рд┐"><br><br>  рдРрд╕реА рд╕рдВрд░рдЪрдирд╛ рд╡рд╛рд▓рд╛ X64 рдкреНрд░реЛрд╕реЗрд╕рд░ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрд┐рдд рдирд╣реАрдВ рд╣реИред  рдбреЗрдЯрд╛ рд╕рдВрд░реЗрдЦрдг рдХреЗ рд▓рд┐рдП, рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдПрдХ рдФрд░ 4 рдмрд╛рдЗрдЯ рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> addition; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* mas[<span class="hljs-number"><span class="hljs-number">4</span></span>]; };</code> </pre> <br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, x64 рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдореГрддрд┐ рдореЗрдВ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/gz/-0/jm/gz-0jmpysxd_rdo9hkdd6mujjl8.png" alt="рдЫрд╡рд┐"><br><br><h2>  рдореЗрдореНрдЪреА рдиреМрдХрд░реА рд╕рдорд╛рдзрд╛рди </h2><br>  рд╣рдо рдпрд╛рджрдЧрд╛рд░ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдЖрдЗрдХрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╣рдореЗрдВ рдмрддрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдкрд╛рд╕рд╡рд░реНрдб рдЕрддрд┐рдерд┐ рдХреЗ рд╕рд╛рде SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рд╡реЗ рд╕реНрд░реЛрдд рдХреЛрдб рднреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// compiled with : gcc -o memcpy memcpy.c -m32 -lm #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;stdlib.h&gt; #include &lt;signal.h&gt; #include &lt;unistd.h&gt; #include &lt;sys/mman.h&gt; #include &lt;math.h&gt; unsigned long long rdtsc(){ asm("rdtsc"); } char* slow_memcpy(char* dest, const char* src, size_t len){ int i; for (i=0; i&lt;len; i++) { dest[i] = src[i]; } return dest; } char* fast_memcpy(char* dest, const char* src, size_t len){ size_t i; // 64-byte block fast copy if(len &gt;= 64){ i = len / 64; len &amp;= (64-1); while(i-- &gt; 0){ __asm__ __volatile__ ( "movdqa (%0), %%xmm0\n" "movdqa 16(%0), %%xmm1\n" "movdqa 32(%0), %%xmm2\n" "movdqa 48(%0), %%xmm3\n" "movntps %%xmm0, (%1)\n" "movntps %%xmm1, 16(%1)\n" "movntps %%xmm2, 32(%1)\n" "movntps %%xmm3, 48(%1)\n" ::"r"(src),"r"(dest):"memory"); dest += 64; src += 64; } } // byte-to-byte slow copy if(len) slow_memcpy(dest, src, len); return dest; } int main(void){ setvbuf(stdout, 0, _IONBF, 0); setvbuf(stdin, 0, _IOLBF, 0); printf("Hey, I have a boring assignment for CS class.. :(\n"); printf("The assignment is simple.\n"); printf("-----------------------------------------------------\n"); printf("- What is the best implementation of memcpy? -\n"); printf("- 1. implement your own slow/fast version of memcpy -\n"); printf("- 2. compare them with various size of data -\n"); printf("- 3. conclude your experiment and submit report -\n"); printf("-----------------------------------------------------\n"); printf("This time, just help me out with my experiment and get flag\n"); printf("No fancy hacking, I promise :D\n"); unsigned long long t1, t2; int e; char* src; char* dest; unsigned int low, high; unsigned int size; // allocate memory char* cache1 = mmap(0, 0x4000, 7, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0); char* cache2 = mmap(0, 0x4000, 7, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0); src = mmap(0, 0x2000, 7, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0); size_t sizes[10]; int i=0; // setup experiment parameters for(e=4; e&lt;14; e++){ // 2^13 = 8K low = pow(2,e-1); high = pow(2,e); printf("specify the memcpy amount between %d ~ %d : ", low, high); scanf("%d", &amp;size); if( size &lt; low || size &gt; high ){ printf("don't mess with the experiment.\n"); exit(0); } sizes[i++] = size; } sleep(1); printf("ok, lets run the experiment with your configuration\n"); sleep(1); // run experiment for(i=0; i&lt;10; i++){ size = sizes[i]; printf("experiment %d : memcpy with buffer size %d\n", i+1, size); dest = malloc( size ); memcpy(cache1, cache2, 0x4000); // to eliminate cache effect t1 = rdtsc(); slow_memcpy(dest, src, size); // byte-to-byte memcpy t2 = rdtsc(); printf("ellapsed CPU cycles for slow_memcpy : %llu\n", t2-t1); memcpy(cache1, cache2, 0x4000); // to eliminate cache effect t1 = rdtsc(); fast_memcpy(dest, src, size); // block-to-block memcpy t2 = rdtsc(); printf("ellapsed CPU cycles for fast_memcpy : %llu\n", t2-t1); printf("\n"); } printf("thanks for helping my experiment!\n"); printf("flag : ----- erased in this source code -----\n"); return 0; }</span></span></code> </pre> <br></div></div><br><img src="https://habrastorage.org/webt/0m/le/g8/0mleg8w4benckt0wl9bmfabxmoa.png" alt="рдЫрд╡рд┐"><br><br>  рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдкрд░, рд╣рдо рд╕рдВрдмрдВрдзрд┐рдд рдмреИрдирд░ рджреЗрдЦрддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/49/xb/ei/49xbeiemqt5c5hsxz7aznyhesra.png" alt="рдЫрд╡рд┐"><br><br>  рдЖрдЗрдП рдЬрд╛рдиреЗрдВ рдХрд┐ рд╕рд░реНрд╡рд░ рдкрд░ рдХреМрди рд╕реА рдлрд╛рдЗрд▓реЗрдВ рд╣реИрдВ, рд╕рд╛рде рд╣реА рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреНрдпрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/px/ce/f-/pxcef-3h7awgskoyyzpwcfeb2ly.png" alt="рдЫрд╡рд┐"><br><br>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд░реАрдбрдореА рдлрд╝рд╛рдЗрд▓ рд╣реИред  рдЗрд╕реЗ рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕реАрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдо 9022 рдкреЛрд░реНрдЯ рдкрд░ рдЪрд▓рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/i_/i9/1m/i_i91mtriufdylye-5dhlsnopbg.png" alt="рдЫрд╡рд┐"><br><br>  рдкреЛрд░реНрдЯ 9022 рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред рд╣рдореЗрдВ рдПрдХ рдкреНрд░рдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдкреЗрд╢рдХрд╢ рдХреА рдЬрд╛рддреА рд╣реИ - рдореЗрдореНрдкреА рдХреЗ рдзреАрдореЗ рдФрд░ рддреЗрдЬ рд╕рдВрд╕реНрдХрд░рдг рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВред  рдлрд┐рд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрдВрддрд░рд╛рд▓ рдореЗрдВ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рджрд░реНрдЬ рдХрд░реЗрдЧрд╛ рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдзреАрдореЗ рдФрд░ рддреЗрдЬрд╝ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдкрд░ рдПрдХ рд░рд┐рдкреЛрд░реНрдЯ рдЬрд╛рд░реА рдХрд░реЗрдЧрд╛ред  рдПрдХ рдмрд╛рдд рд╣реИ: рдкреНрд░рдпреЛрдЧ 10, рдФрд░ рд░рд┐рдкреЛрд░реНрдЯ - 5ред <br><br><img src="https://habrastorage.org/webt/u-/kz/tu/u-kztukm6r-hn4akkbhqefcbijo.png" alt="рдЫрд╡рд┐"><br><br>  рдЪрд▓реЛ рдХреНрдпреЛрдВ рд╕рд╛рдл рд╣реИред  рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдореЗрдВ рдЬрдЧрд╣ рдЦреЛрдЬреЗрдВред <br><br><img src="https://habrastorage.org/webt/yl/a8/dr/yla8drxe3yak9kshwi7nyviiuig.png" alt="рдЫрд╡рд┐"><br><br>  рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИ, рдкрд╣рд▓реЗ slow_memcpy рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ fast_memcpyред  рд▓реЗрдХрд┐рди рдХрд╛рд░реНрдпрдХреНрд░рдо рд░рд┐рдкреЛрд░реНрдЯ рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдХреА рдзреАрдореА рдЧрддрд┐ рд╕реЗ рд░рд┐рд▓реАрдЬрд╝ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдирд┐рд╖реНрдХрд░реНрд╖ рд╣реИ, рдФрд░ рдЬрдм рддреЗрдЬреА рд╕реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдЗрдП рддреНрд╡рд░рд┐рдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛрдб рджреЗрдЦреЗрдВред <br><br><img src="https://habrastorage.org/webt/yy/ed/q8/yyedq8cr4nn_i3sh2bsypcpxs5k.png" alt="рдЫрд╡рд┐"><br><br>  рдХреЛрдбрд┐рдВрдЧ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирдХрд▓ рдХреА рдЬрд╛рддреА рд╣реИред  рд╣рдо рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ SSE2 рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдХрд╣рд╛ рдЧрдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> : SSE2, SSE рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреА рд╢реБрд░реВрдЖрдд рдХреЗ рд╕рд╛рде x86 рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдЖрда 128-рдмрд┐рдЯ рд░рдЬрд┐рд╕реНрдЯрд░ (xmm0 рд╕реЗ xmm7) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ 2 рд▓рдЧрд╛рддрд╛рд░ рдбрдмрд▓-рд╕рдЯреАрдХ рдлрд╝реНрд▓реЛрдЯрд┐рдВрдЧ-рдкреЙрдЗрдВрдЯ рдорд╛рдиреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдХреЛрдб рд╕рдВрд░реЗрдЦрд┐рдд рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/zh/4x/pp/zh4xpp2jtxboamyl7-w8za8geca.png" alt="рдЫрд╡рд┐"><br><br><img src="https://habrastorage.org/webt/df/mm/yb/dfmmybbxzpn2xdijvk8uedgnkfa.png" alt="рдЫрд╡рд┐"><br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдмрд┐рдирд╛ рдбреЗрдЯрд╛ рдХреЗ рдХрд╛рдо рдХрд░рдиреЗ рд╕реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреНрд░реИрд╢ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд╕рдВрд░реЗрдЦрдг 128 рдмрд┐рдЯреНрд╕, рдпрд╛рдиреА 16 рдмрд╛рдЗрдЯреНрд╕ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдмреНрд▓реЙрдХ 16 рдХреЗ рдмрд░рд╛рдмрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рд╣рдореЗрдВ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдвреЗрд░ рдкрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд┐рддрдиреЗ рдмрд╛рдЗрдЯреНрд╕ рд╣реИрдВ (рдЪрд▓реЛ X) рддреЛ рд╣рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдХрдИ рдмрд╛рдЗрдЯреНрд╕ (Y) рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ ( X + Y)% 16 0 рдерд╛ред <br><br>  рдЪреВрдВрдХрд┐ рд╕рднреА рдСрдкрд░реЗрд╢рди рдвреЗрд░ рдмреНрд▓реЙрдХреЛрдВ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ рдЬреЛ рджреЛ рдХреЗ рдЧреБрдгрдХ рд╣реИрдВ, рдПрдХреНрд╕ рдкрд░ 2, 4, 8, рдЗрддреНрдпрд╛рджрд┐ред  16 рддрдХред <br><br><img src="https://habrastorage.org/webt/q3/8y/ys/q38yyshlgrips-4rilx5eia06ua.png" alt="рдЫрд╡рд┐"><br><br><img src="https://habrastorage.org/webt/v3/b5/au/v3b5aubmasath8ccpxp1zl7zqck.png" alt="рдЫрд╡рд┐"><br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдПрдХреНрд╕ = 4 рдХреЗ рд╕рд╛рде, рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЪрд▓рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/vj/hu/kn/vjhuknwdpwmy3ozej_tflst-pik.png" alt="рдЫрд╡рд┐"><br><br>  рд╣рдореЗрдВ рд╢реЗрд▓ рдорд┐рд▓рддрд╛ рд╣реИ, рдЭрдВрдбрд╛ рдкрдврд╝реЗрдВ, 10 рдЕрдВрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред <br><br><img src="https://habrastorage.org/webt/xj/ze/u4/xjzeu4rtqcive4crq2h4tnov1ni.png" alt="рдЫрд╡рд┐"><br><br>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреЗрд▓реАрдЧреНрд░рд╛рдо</a> рдкрд░ рд╣рдорд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдЕрдЧрд▓реА рдмрд╛рд░ рд╣рдо рдвреЗрд░ рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi462895/">https://habr.com/ru/post/hi462895/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi462883/index.html">рдПрд╕рдИрдУ рдХреЗ рд▓рд┐рдП рдПрдХ рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдбрд┐рдЬрд╛рдЗрдирд┐рдВрдЧ: (рд╕рд┐рджреНрдзрд╛рдВрдд + рдЪреЗрдХрд▓рд┐рд╕реНрдЯ)</a></li>
<li><a href="../hi462885/index.html">рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ IPoE рдиреЗрдЯрд╡рд░реНрдХ рд╣рд╛рде рдореЗрдВ</a></li>
<li><a href="../hi462887/index.html">рдПрдХ рдЧрддрд┐рд╢реАрд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдХреЛ рдирд┐рдЬреАрдХреГрдд рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi462889/index.html">рдирд┐рд░рдВрддрд░рддрд╛ рдХрд╣рд╛рдиреА: рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рд╡рд┐рдВрдбреЛрдЬ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕реНрдХрд▓ рдХреЗ рдЕрдкрдиреЗ рд╕рдВрдХрд▓рдХ</a></li>
<li><a href="../hi462893/index.html">рд╢рд╣рд░реЛрдВ рдореЗрдВ рдЪреЗрд╣рд░рд╛ рдкрд╣рдЪрд╛рди: рд╕реБрд░рдХреНрд╖рд╛ рдмрдирд╛рдо рдЧреЛрдкрдиреАрдпрддрд╛</a></li>
<li><a href="../hi462897/index.html">рдУрдкрдирдЬреАрдПрд▓ рдЬрд╛рдиреЗрдВред рдкрд╛рда 7.1 - рдбрд┐рдмрдЧрд┐рдВрдЧ</a></li>
<li><a href="../hi462903/index.html">рд╣рдордиреЗ рдорд╛рд╕реНрдХреЛ рдХрд╛рд░реНрдпрд╛рд▓рдп, рднрд╛рдЧ 3: рд╕рд░реНрд╡рд░ рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рд╣реБрдЖрд╡реЗрдИ рдкрд░ рдирдП рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдХреИрд╕реЗ рдбрд┐рдЬрд╛рдЗрди рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛</a></li>
<li><a href="../hi462905/index.html">рдЕрдЬрдЧрд░ рдореЗрдВ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдмреЙрдЯ рд▓рд┐рдЦрдХрд░ рдЯреЗрд▓реАрдмреЙрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкрд╛рд░реНрдЯ 2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi462907/index.html">рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ</a></li>
<li><a href="../hi462909/index.html">ASIC рд╡рд┐рдХрд╛рд╕ рдХреЗ рдлрд▓: рдирд┐рд░реНрдорд╛рддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, SHA-256 рдХреЗ рд▓рд┐рдП рдЦрдирд┐рдХ рдФрд░ рдЦрдЧреЛрд▓реАрдп рд╣реИрд╢рдЯреНрд░реЗрдЯ рдХреА рд╡рд┐рд╖рдорддрд╛рдПрдБ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>