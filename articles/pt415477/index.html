<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚ÄçüöÄ üèîÔ∏è üè° Monitorando a opera√ß√£o de sistemas residenciais suburbanos: os primeiros passos para uma casa inteligente üåî üèïÔ∏è üåï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo anterior causou uma discuss√£o bastante acalorada, e essa circunst√¢ncia me convenceu da necessidade de continuar o que chamamos de "compartilh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monitorando a opera√ß√£o de sistemas residenciais suburbanos: os primeiros passos para uma casa inteligente</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/415477/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1q/ir/bi/1qirbi2pjzork0gilefg7xlyoho.jpeg"></div><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O artigo anterior</a> causou uma discuss√£o bastante acalorada, e essa circunst√¢ncia me convenceu da necessidade de continuar o que chamamos de "compartilhar experi√™ncia".  Ent√£o, decidimos que, ap√≥s o surgimento de fontes alternativas de energia na casa, principalmente o coletor solar, eu queria medir os par√¢metros que acompanham seu trabalho.  Por exemplo, para ver como a temperatura do l√≠quido de arrefecimento solar muda, a √°gua na caldeira superaquece, etc.  √â claro que a medi√ß√£o de algo em si mesma e at√© a transmiss√£o dessas informa√ß√µes para o local de consumo (telemetria) n√£o aumentam o conforto ou a seguran√ßa; portanto, imediatamente um item no controle remoto de v√°rios atuadores foi adicionado ao "TK".  Neste artigo, n√£o darei listagens de c√≥digo, detalhe todas as solu√ß√µes t√©cnicas nos m√≠nimos detalhes.  Meu objetivo √© mostrar a linha de pensamento e as solu√ß√µes t√©cnicas adotadas, bem como o resultado delas.  Quem quiser seguir um caminho semelhante ainda ter√° que resolver muitos problemas por conta pr√≥pria. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Uma ligeira digress√£o l√≠rica.</b> <div class="spoiler_text"><p>  Em 2010, junto com um inversor / baterias, um sistema universal de alarme-controlador GSM da empresa russa RADS Electronics apareceu em casa.  Este maravilhoso dispositivo universal foi usado al√©m das fun√ß√µes de alarme com alertas GSM, tamb√©m para controlar a luz na sala de estar e, o mais importante, para controlar a caldeira el√©trica.  Aprendi a controlar a temperatura, manter a temperatura e tamb√©m aquecer a casa com anteced√™ncia, antes da chegada, h√° muito tempo.  A conveni√™ncia de tais sistemas √© bastante √≥bvia.  No entanto, as capacidades do controlador s√£o limitadas, de modo que o novo "TK" lan√ßou as bases para a cria√ß√£o de um sistema paralelo, mesmo com fun√ß√µes parcialmente repetidas e, √© claro, com acesso a informa√ß√µes de sensores e controle via Internet. </p></div></div><br><p>  Portanto, os requisitos iniciais surgiram: </p><br><ol><li>  Me√ßa a temperatura nos 8 bicos da caldeira e nos 2 bicos da caldeira. </li><li>  Me√ßa a temperatura e a umidade na sala da caldeira onde o equipamento est√° montado. </li><li>  Me√ßa a temperatura e a umidade do ar externo.  Um dia implementar o controle de aquecimento dependente do clima. </li><li>  Dirija uma caldeira el√©trica enquanto mant√©m o sistema antigo.  A caldeira √© de tr√™s est√°gios, com ajuste da temperatura de aquecimento e feedback sobre a temperatura do l√≠quido de refrigera√ß√£o.  No entanto, para fins de controle remoto, √© suficiente ativar / desativar as etapas de aquecimento. </li><li>  Gerencie o aquecedor da caldeira. </li><li>  Coloque um m√≠nimo de fios.  Nem tanto para n√£o incomodar, mas porque a decora√ß√£o da casa j√° foi feita. </li><li>  Tenha uma interface conveniente para gerenciar e trabalhar com as leituras dos sensores.  A interface deve estar acess√≠vel em dispositivos m√≥veis. </li></ol><br><div class="spoiler">  <b class="spoiler_title">E mais uma pequena digress√£o.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/-l/p-/jz/-lp-jzlqt49mog78ksamlq75azq.jpeg" align="left">  <i>Na foto - um gerador com acionador de partida el√©trico.</i>  <i>Para iniciar o inverno, tive que colocar uma bateria e um carregador de carro.</i>  <i>E use √≥leo sint√©tico.</i> </p><br><p>  No mesmo ano de 2010, um gerador de gasolina instalou-se na garagem.  E logo um controlador de partida autom√°tico foi adicionado, feito de forma independente com base no microcontrolador Arduino.  O controlador observa n√£o apenas a presen√ßa de uma rede de 220V, mas tamb√©m o sinal do inversor sobre a descarga das baterias, e o pr√≥prio inversor fornece entrada autom√°tica do gerador.  No total, foi poss√≠vel implementar um algoritmo de controle do gerador bastante inteligente.  Em geral, n√£o havia medo de usar microcontroladores, tanto no sentido de conectar perif√©ricos quanto no de programa√ß√£o.  No passado, eu programava muito em C / C ++. </p></div></div><br><p>  Os requisitos s√£o, em geral, simples, se n√£o triviais.  Existem milhares de maneiras diferentes de implement√°-las.  E √© por isso que a pedra angular √© a escolha da arquitetura e a pilha tecnol√≥gica na qual o novo sistema ser√° constru√≠do.  A abordagem sistem√°tica √© exatamente o que √© importante aqui, o entendimento de que solu√ß√µes t√©cnicas individuais devem estar ligadas entre si, o entendimento de que o sistema certamente se expandir√° ainda mais, como j√° aconteceu com o sistema de fornecimento de energia em casa.  E tamb√©m √© importante entender seus pr√≥prios recursos.  Portanto, tive que procurar no Google, "ajudar a plat√©ia" e "ligar para um amigo". </p><br><p>  <i>Na foto Arduino Nano e nRF24L01 + com antena</i> <br><img src="https://habrastorage.org/webt/8b/jv/9m/8bjv9mq_4o9_pllkockdofys34m.jpeg" align="left">  Comecei a procurar em sistemas baseados no padr√£o Z-Wave amplamente utilizado, isso influenciou bastante outras decis√µes, embora o Z-Wave tenha sido descartado no in√≠cio.  Como o Z-Wave √© uma escolha √≥bvia para requisitos pr√≥ximos aos meus, √© importante entender por que ele foi descartado.  Primeiro, √© claro, o custo de um sensor.  E eu s√≥ preciso medir a temperatura em uma caldeira em 8 pontos, cada ponto resulta em mais de 3000 rublos.  Em segundo lugar, o fator de forma dos sensores padr√£o, que n√£o permite seu uso em bicos de caldeiras.  Terceiro, a escolha limitada de sistemas de controle e acesso remoto, que tamb√©m s√£o todos propriet√°rios (voc√™ deve ler: ‚Äúlimitado‚Äù) e pago.  No entanto, a pr√≥pria id√©ia de uma rede auto-organizada com a possibilidade de comunica√ß√µes ponto a ponto (associa√ß√µes) de um atuador sensor e um gerenciamento servidor-cliente centralizado √© muito atraente.  A conselho de um amigo, ele iniciou um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">projeto interessante</a> , que inicialmente parecia uma extens√£o da funcionalidade dos sistemas Z-Wave baseados em controladores Vera, mas usando a abordagem DIY.  O projeto usou transceptores sem fio Arduino, 2.4GHz nRF24L01 + e a biblioteca correspondente.  Tudo junto √© exatamente o que √© necess√°rio para minhas necessidades.  O uso do Arduino abre possibilidades quase ilimitadas de automa√ß√£o residencial por dinheiro, uma ordem de magnitude (!) Menor que no caso do Z-Wave.  Tamb√©m √© importante que o Arduino seja uma plataforma excepcionalmente est√°vel.  O controlador de partida autom√°tica do gerador, uma vez montado no Arduino, trabalha sem problemas h√° 7 anos.  Dada a experi√™ncia de desenvolvimento, solda e programa√ß√£o, parei neste projeto. </p><br><p>  E at√© continuou.  No c√≥digo, eu me recusei completamente a vincular a Vera.  Em vez disso, ele escolheu um dos controladores de software recomendados pelo autor da biblioteca de mysensors.  Depois de estudar os f√≥runs e sites de fabricantes, ele se tornou o projeto de c√≥digo aberto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">openHAB</a> .  O fator decisivo, al√©m de abertura, plataforma cruzada e poderosa linguagem de regras, presen√ßa de clientes m√≥veis, foi a seguinte propriedade declarada: ‚Äúum fornecedor e um agn√≥stico em tecnologia‚Äù.  √â exatamente disso que um especialista em TI com esp√≠rito de sistema precisa: a possibilidade de expandir o sistema no futuro, usando componentes de diferentes fabricantes e padr√µes, enquanto √© mais adequado para fins espec√≠ficos.  I.e.  Desde o in√≠cio, houve um entendimento de que nem tudo <b>precisa ser</b> feito no Arduino e nem tudo √© <b>poss√≠vel</b> dentro dos limites do Z-Wave.  Ao mesmo tempo, decidi aderir a uma l√≥gica de gerenciamento centralizada, que, para come√ßar, √© bastante natural.  I.e.  nos dispositivos terminais montados no Arduino, haver√° uma l√≥gica de neg√≥cios m√≠nima: ligar / desligar a luz de interruptores mec√¢nicos convencionais <s>antigos</s> que simplesmente se tornam sensores, ler e converter informa√ß√µes de sensores de par√¢metros f√≠sicos, transmitir dados ao servidor, receber e executar comandos do servidor.  N√£o planejo nenhuma intera√ß√£o direta entre os n√≥s da rede do dispositivo.  Toda l√≥gica real de gerenciamento de neg√≥cios √© baseada em regras do openHAB.  Agora, existem poucas coisas: escolha a plataforma de hardware e o sistema operacional para a parte do servidor, para o openHAB. </p><br><p>  Muitos entusiastas de bricolage no openHAB escolhem o Raspberry Pi.  E esta √© uma √≥tima solu√ß√£o, econ√¥mica, compacta e silenciosa.  No entanto, pareceu-me errado limitar-me ao poder de processamento, porque decidi imediatamente usar o futuro servidor como um dispositivo multifuncional, por exemplo, queria implantar o media center Kodi nele e, possivelmente, no futuro, algo mais, por exemplo, um gravador de v√≠deo de software.  Olhando para o futuro, direi que, no final, o Kodi est√° integrado a uma casa inteligente, quando o v√≠deo come√ßa, a luz apaga, quando para e acende.  E o DVR tamb√©m apareceu e tamb√©m est√° integrado.  Ao mesmo tempo, n√£o tenho requisitos especiais para componentes de multim√≠dia, basta que o servidor possua HDMI e S / PDIF.  Em geral, no outono de 2015, a escolha caiu em um nettop sem ventilador da Hystou (veja no AliExpress): Intel Core i7, 8GB, SSD de 256GB, 8 portas USB, incluindo 4 3.0, 2 LAN, WiFi, 2 HDMI, S / PDIF, Leitor de cart√µes em geral, tudo o que voc√™ precisa para a felicidade de uma caixa de bricolage.  Ele ent√£o custou cerca de 24 tr.  Nunca me arrependi da escolha, embora deva dizer que o WiFi n√£o √© muito est√°vel para ele.  Mas, a experi√™ncia que se seguiu a tudo isso diz com seguran√ßa: onde quer que voc√™ possa colocar fios - coloque fios.  Um canal de r√°dio, independentemente do padr√£o e da frequ√™ncia (WiFi, Z-Wave, 433 MHz, 869 MHz, 2,4 GHz, etc.) √© sempre pior que um fio.  Portanto, o nettop est√° finalmente conectado ao fio da LAN dom√©stica.  E v√°rios outros sistemas diferentes se estabeleceram nele. <br>  Quanto ao sistema operacional do servidor, eu recomendaria estabilidade e previsibilidade.  As distribui√ß√µes Linux com uma grande comunidade possuem essa propriedade.  Eu estou mais familiarizado com o Ubuntu.  Embora, gra√ßas √† plataforma cruzada, tudo possa ser feito no Windows. </p><br><p>  Ent√£o, arquitetura e pilha s√£o selecionadas.  N√≥s estamos agindo. </p><br><p><img src="https://habrastorage.org/webt/2h/na/oq/2hnaoqpssegd8ks0mgvm5bpymd4.jpeg" align="left">  <b>Tarefa 1.</b> Selecione sensores e atuadores.  A temperatura do l√≠quido de arrefecimento e da √°gua ser√° medida nos bicos da caldeira e da caldeira.  Para isso, utilizamos sensores DS18B20 de 1 fio em um inv√≥lucro vedado com metal, eles s√£o convenientemente montados diretamente nos bicos, pelo lado de fora.  E os pr√≥prios tubos com sensores na parte superior s√£o cobertos com isolamento de espuma para tubos.  Quando existem muitos sensores semelhantes, o barramento de 1 fio √© muito conveniente.  Para medir a temperatura e a umidade do ar na caldeira e na rua, escolhemos o DHT22, simplesmente porque essa √© uma op√ß√£o padr√£o de bricolage.  Gerencie a caldeira separadamente por etapas - usando rel√©s mec√¢nicos convencionais de cinco volts, tamb√©m familiares aos quadros de distribui√ß√£o de bricolage.  √â importante observar que esses rel√©s s√£o conectados em paralelo com os interruptores de est√°gio da caldeira, e n√£o os rel√©s TEN, que s√£o controlados pela automa√ß√£o da caldeira.  Todos os perif√©ricos selecionados s√£o programados sem arte diretamente, como um rel√©, por exemplo, ou possuem as bibliotecas apropriadas para o Arduino, como 1-wire / DS18B20 / DHT22.  Sem complica√ß√µes. </p><br><p>  <i>Na foto, uma caldeira de 300l.</i>  <i>Pode-se observar que um fio preto com um sensor na extremidade se aproxima de cada tubo de deriva√ß√£o, eles s√£o combinados em uma caixa branca e um fio branco comum de 1 fio vai para o controlador.</i> </p><br><p>  <b>Tarefa 2.</b> Troque dados e comandos com o openHAB.  Eu tive que mexer um pouco, porque com o openHAB eu ainda n√£o estava ‚Äúcontigo‚Äù.  A arquitetura dos mysensors implica a presen√ßa de um gateway (gateway) para conectar-se ao controlador / servidor central, ou seja,  para abrir o HAB. <img src="https://habrastorage.org/webt/gs/hc/ku/gshcku8ujafvh5b_mytcifai_kw.jpeg" align="right">  O gateway em si √© um controlador fisicamente separado no Arduino / nRF24L01 + e pode ser conectado ao servidor via LAN / WiFi ou Serial.  Como estou no in√≠cio do caminho, seleciono Serial e coloco o gateway ao lado do servidor.  O gateway √© usado para rotear as mensagens enviadas para a rede de mysensors atrav√©s do gateway e se comunicar diretamente com o controlador central, o openHAB.  As mensagens de Mysensors s√£o de formato fixo e f√°ceis de analisar.  Adicionamos ao Serial de liga√ß√£o do openHAB para conectar o gateway via USB e escrevemos uma regra para analisar mensagens de dispositivos na rede de mysensors recebidos via USB do gateway.  A regra do openHAB que analisa mensagens √© baseada no c√≥digo encontrado no f√≥rum de mysensors.  Em seguida, escrevemos as regras para os atuadores - rel√© de controle da caldeira, aquecedor da caldeira, luz etc. </p><br><p>  <i>A foto mostra um gateway, uma pequena caixa marrom com uma antena em um alto-falante.</i> </p><br><div class="spoiler">  <b class="spoiler_title">Sobre o openHAB</b> <div class="spoiler_text"><p>  openHAB - uma solu√ß√£o aberta, expandida com a ajuda da comunidade, desenvolvendo liga√ß√µes para dispositivos espec√≠ficos com os quais o openHAB ir√° interagir.  Por exemplo, para interagir com dispositivos via USB, existe um Serial de liga√ß√£o.  Da mesma forma para outros dispositivos ou protocolos, por exemplo, Modbus, NTP, HTTP, Squeezebox, Kodi / XBMC, Z-Wave, ZigBee, Nest e assim por diante.  Eu pr√≥prio participei do desenvolvimento como um testador de liga√ß√£o Modbus ativo. </p></div></div><br><p><img src="https://habrastorage.org/webt/gv/ud/dt/gvuddthvqwvemt9nxugqzbcefjg.jpeg" align="left">  Enquanto eu estava ocupado conectando o gateway ao servidor openHAB, decidi finalizar o c√≥digo do gateway (e o pr√≥prio gateway), retirado do mysensors.org e adicionar o sensor de temperatura e umidade DHT22 e o sensor de press√£o atmosf√©rica BMP180 a ele, e ao mesmo tempo encontrei o c√≥digo fonte para previs√£o do tempo da din√¢mica atmosf√©rica press√£o.  Todas essas medi√ß√µes e previs√µes s√£o transmitidas para o openHAB. <br>  <i>Na foto, o gateway est√° dentro.</i>  <i>No fio branco √© DHT22, a placa com pinos livres √© Arduino, o canto inferior direito √© nRF24L01 + e BMP180.</i> </p><br><p>  <b>Tarefa 3.</b> Interface e acesso remoto.  O openHAB √© um sistema totalmente personaliz√°vel, incluindo o layout da interface.  E essa marca√ß√£o √© unificada, tanto para acesso comum por meio de um navegador quanto por um aplicativo m√≥vel.  A marca√ß√£o universal, √© claro, pode n√£o ser o ideal, mas fica bem em um smartphone, e isso √© importante.  Resta decidir como acessar o servidor openHAB fora da rede local.  Primeiro, voc√™ pode (e mais importante, opcionalmente) usar a nuvem myopenhab.org.  O servidor openHAB se conecta diretamente √† nuvem usando liga√ß√£o especial.  Esta solu√ß√£o √© a mais simples e fornece funcionalidade completa de gerenciamento do sistema, exceto para a transfer√™ncia de v√≠deo de c√¢meras IP.  Em segundo lugar, para quem n√£o gosta das nuvens e eu perten√ßo a elas, existem os meios usuais de acesso remoto, por exemplo, uma combina√ß√£o de VPN + VNC, etc.  N√£o divulgarei detalhes por motivos √≥bvios, principalmente porque esse problema n√£o se relaciona diretamente ao t√≥pico do artigo.  Observo apenas que o cliente m√≥vel do openHAB possui uma configura√ß√£o para dois endere√ßos.  Passa para o primeiro, se ele v√™ um servidor openHAB neste endere√ßo, para o segundo - se n√£o v√™.  Este √© um recurso muito conveniente da interface.  Por exemplo, voc√™ pode especificar a nuvem como o segundo endere√ßo e o openHAB estar√° sempre dispon√≠vel sem manipula√ß√µes adicionais com a conex√£o VPN.  Ou especifique o endere√ßo virtual obtido usando qualquer solu√ß√£o VPN.  Ou algo mais. </p><br><table><thead><tr><th>  Tela inicial da interface </th><th>  Rolar a tela inicial para baixo </th><th>  O item de menu aberto "Light" </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/webt/9z/ls/yp/9zlsyp9mydxjhq7g46p4a1lqvba.jpeg"></td><td><img src="https://habrastorage.org/webt/j8/zx/7_/j8zx7_o6z7tb2ihivbhn-tbkqzw.jpeg"></td><td><img src="https://habrastorage.org/webt/vp/ws/ld/vpwsldzn6krpnzqvvzqow0yvtuy.jpeg"></td></tr></tbody></table><br><p>  <em>A marca√ß√£o permite realizar formata√ß√£o condicional, por exemplo, real√ßar a temperatura em vermelho quando exceder o valor especificado na marca√ß√£o.</em>  <em>Alguns itens s√£o exibidos quando pressionados, por exemplo, "Aquecimento", "Luz", "Sirene" etc.</em> </p><br><p>  S√≥ isso.  Pegamos um ferro de soldar, depois um teclado.  E gradualmente a primeira vers√£o do sistema toma forma.  Como voc√™ sabe, o apetite vem com a comida.  Como resultado, novos sensores e at√© novos controladores s√£o adicionados √† primeira vers√£o do sistema, por exemplo, para automatizar uma casa de h√≥spedes.  Como resultado, no primeiro est√°gio, foi introduzido um sistema que: </p><br><ol><li>  Mede a temperatura em 16 pontos. </li><li>  Mede a umidade em 4 pontos. </li><li>  Mede a tens√£o da rede de 220V na entrada da casa, para o estabilizador. </li><li>  Mede a luz ambiente.  A ilumina√ß√£o √© usada para ligar automaticamente a luz. </li><li>  Mede a press√£o atmosf√©rica e faz uma previs√£o do tempo na din√¢mica da press√£o. </li><li>  Detecta movimento em v√°rios pontos. </li><li>  Controla o mundo inteiro em uma casa de h√≥spedes.  Os interruptores se transformaram em sensores. </li><li>  Aciona sirenes. </li><li>  Controla separadamente tr√™s etapas de uma caldeira el√©trica, preservando a funcionalidade do sistema antigo.  Controla o aquecedor da caldeira. </li><li>  Verifica a presen√ßa de tens√£o na caldeira e os elementos de aquecimento da caldeira e tamb√©m l√™ os fatos da inclus√£o dos elementos de aquecimento da caldeira.  Isso √© importante porque, em primeiro lugar, a caldeira tem feedback sobre a temperatura do l√≠quido de arrefecimento e pode desligar os elementos de aquecimento propriamente ditos; em segundo lugar, um rel√© de limita√ß√£o de carga de dois est√°gios √© montado na blindagem, que desconecta a caldeira e a caldeira em s√©rie se o limiar de consumo na casa for excedido.  Esses dados ser√£o mais usados ‚Äã‚Äãem algoritmos de casa inteligente.  Mas, nesta fase, eu n√£o sabia exatamente como, apenas senti que elas seriam necess√°rias. </li><li>  L√™ os fatos de ligar e desligar a bomba do circuito solar. <img src="https://habrastorage.org/webt/pv/so/fa/pvsofanjhrkcdclj2mlrurnll8u.jpeg" align="right"></li><li>  Cria gr√°ficos de temperatura para a semana, dia e hora. </li><li>  Envia notifica√ß√µes push sobre v√°rios eventos.  Os eventos podem ser praticamente qualquer movimento, por exemplo, na varanda, temperatura superior a um limite predeterminado, perda / apar√™ncia de eletricidade, etc.  Um alerta por SMS tamb√©m foi feito. </li><li>  O sistema antigo permaneceu f√≠sica e logicamente separado do novo, embora os mesmos sensores sejam parcialmente reutilizados no novo.  O sistema antigo mantinha as fun√ß√µes de seguran√ßa e um sistema de monitoramento / controle de backup. </li></ol><br><p>  <em>A foto mostra o equipamento el√©trico da casa de h√≥spedes.</em>  <em>A caixa com a antena √© o controlador, a ‚Äúarruela‚Äù redonda √© a sirene, entre eles est√° o sensor DHT22, sob a prote√ß√£o h√° um sensor de movimento, √† esquerda h√° uma fonte de alimenta√ß√£o ininterrupta de 12V.</em> </p><br><div class="spoiler">  <b class="spoiler_title">Exemplo de opera√ß√£o do sistema</b> <div class="spoiler_text"><p>  A cada 30 segundos, o controlador controla os sensores de temperatura.  No caso de uma altera√ß√£o nas leituras ou mediante solicita√ß√£o do servidor, envia os dados para o gateway separadamente para cada sensor.  O Gateway recebe dados e os envia via USB para o openHAB.  No openHAB, uma regra √© acionada, a mensagem √© analisada, o valor da temperatura correspondente √© atribu√≠do ao item correspondente (o conceito b√°sico do openHAB).  √â gerada uma regra configurada para alterar este item.  Se alguma rea√ß√£o for fornecida pela l√≥gica, por exemplo, ‚Äúse a temperatura caiu abaixo de um determinado n√≠vel‚Äù, uma a√ß√£o √© executada, por exemplo, ‚Äúligue o aquecedor da caldeira‚Äù.  Este comando √© enviado via USB para o gateway.  O Gateway envia um comando pelo r√°dio para o controlador, o controlador recebe o comando e liga o rel√© correspondente.  Retorna uma confirma√ß√£o de recebimento do comando.  Algo assim se parece com o esquema geral de intera√ß√£o dos componentes do sistema. </p></div></div><br><p>  <strong>O resultado.</strong>  Metas iniciais alcan√ßadas e ainda mais.  As temperaturas s√£o medidas e visualizadas em gr√°ficos e na interface.  De acordo com os resultados das observa√ß√µes, ficou claro que a temperatura da √°gua quente nunca sobe acima de 55 graus, e o l√≠quido de arrefecimento no circuito solar - 60, voc√™ n√£o precisa se preocupar com superaquecimento.  Pode-se observar que a temperatura do ar na sala das caldeiras √†s vezes excede 30 graus e √© necess√°rio instalar o ar-condicionado.  Tornou-se conveniente controlar o aquecimento, basta tocar nos interruptores virtuais na tela do smartphone.  Pr√≥ximo.        . ,    ,       .    ,         .   .     ¬´¬ª,      . <br>    .      ,  24..     ,  Raspberry Pi  2500. Arduino  AliExpress   200,    (nRF24L01+, )     .  ‚Äì .       - ,      .  I.e.      . </p><br><div class="spoiler"> <b class="spoiler_title">,     .</b> <div class="spoiler_text"><p>  ,    .  ‚Äî 11.05.2018. ,        49 .     38,      35 .      .           .     . <img src="https://habrastorage.org/webt/a3/ba/3w/a3ba3wjudxbn9u-x-xcp2yjjhvo.jpeg"></p></div></div><br><p> <strong></strong> .  ,  ,          . ,   ,    C++,  Arduino, .     ,         openHAB.  ,        ‚Äì .      . - ,      ,  .    ¬´¬ª.    , ,    .     .   ‚Äì  .         . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt415477/">https://habr.com/ru/post/pt415477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt415467/index.html">Concurso de Programa√ß√£o: Com√©rcio (An√∫ncios)</a></li>
<li><a href="../pt415469/index.html">Adblock para r√°dio</a></li>
<li><a href="../pt415471/index.html">Extens√£o PHP e Kotlin Native. Parte um, ing√™nua</a></li>
<li><a href="../pt415473/index.html">Quem digitaliza a Internet. Hora de forjar ferro</a></li>
<li><a href="../pt415475/index.html">An√°lise do c√≥digo legado quando o c√≥digo fonte √© perdido: fazer ou n√£o fazer?</a></li>
<li><a href="../pt415481/index.html">Venezuela bloqueia conex√µes diretas com Tor e ofusca tr√°fego para pontes</a></li>
<li><a href="../pt415483/index.html">7 erros comuns ao comparar seus servidores com a nuvem</a></li>
<li><a href="../pt415485/index.html">Dirija Kingston A1000 - uma ambul√¢ncia para o laptop?</a></li>
<li><a href="../pt415487/index.html">P√°ginas da hist√≥ria da Intel. Primeiro chip, Intel 3101</a></li>
<li><a href="../pt415489/index.html">Facebook fecha projeto de distribui√ß√£o da Internet por meio de drones em energia solar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>