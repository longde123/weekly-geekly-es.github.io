<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💽 🏂🏼 👈🏻 ShIoTiny：更新和通知 👩🏻‍💻 📮 🤘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="这篇文章是关于什么的 
 我们将继续介绍关于ShIoTiny的系列文章， 这是一种基于ESP8266芯片的可视可编程控制器。 

 本文讨论自上一个ShIoTiny固件以来发生的变化：用户界面如何更改； 如何重新分配“腿”等不太重要，但同样值得期待的事情。 

 本文介绍了有关ShIoTiny固件开...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny：更新和通知</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473832/"><img src="https://habrastorage.org/webt/2x/3l/hz/2x3lhz-tej3w7wnbri8k_crqjbs.jpeg"><br><br><h4> 这篇文章是关于什么的 </h4><br> 我们将继续介绍关于<b>ShIoTiny</b>的系列文章， <b>这</b>是一种基于<b>ESP8266</b>芯片的可视可编程控制器。 <br><br> 本文<b>讨论</b>自上一个<b>ShIoTiny</b>固件以来发生的变化：用户界面如何更改； 如何重新分配“腿”等不太重要，但同样值得期待的事情。 <br><br> 本文介绍了有关<b>ShIoTiny</b>固件<b>开发</b>领域中的事务状态的类似“情况<i><b>说明书</b></i> ”的内容。 那些对我对本文的发展不感兴趣的人可以清楚地跳过本文。 <br><br> 那些不知道他们在说什么，但想要了解的人，可以阅读我以前关于<b>ShIoTiny</b>固件的文章或参考<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档</a> 。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>ShIoTiny</b>项目<b>现场</b></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>ElDraw</b>编辑器的在线版本</a>与固件完全相同，以供参考。 <br><br> 链接到原理图，固件等-在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>ShIoTiny</b></a>网站的文档部分。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">以前的<b>ShIoTiny文章</b>和我的其他文章</a> <br><a name="habracut"></a><br><h3> 介绍让老百姓放心 </h3><br> 碰巧第四季度是一个永久的高峰。 因此，一些同志已经开始掩埋<b>ShIoTiny</b>项目并通过邮件给我写信，他们说：“嘿，作者，你在哪里？！ 你为什么不写？！ 我们在这里使用您的固件！ 而且您还不是一篇新文章！” <br> 当然，这是有礼貌的，但是从含义上来说是这样。 相反，有些人提出了建议和评论，这在捕获软件跳蚤方面大有帮助。 谢谢你们 不用自己做饭而是有志同道合的人总是很高兴。 <br><br> 朋友们！ 我提醒您，我的项目是业余爱好，除此之外，我还有工作，妻子和孩子。 所以我求你：宽容！ 作者写了他如何以及可以:) <br><br> 我赶紧向大家保证：该<u>项目尚未结束</u> ！ 我从代码中抓了很多东西，此外，重做了项目站点（尽管我还没有完成它-我用内容填充了站点）。 <br><br> 从世界上大多数哲学教义的角度来看，没有永久的东西。 甚至我们的宇宙也在不断发展。 关于微控制器固件或项目网站，我们能说些什么？ <br><br>  <b>ShIoTiny</b>固件中的关键更改主要影响两件事：重新定义支脚和控制器状态页面的可能性。 我们将讨论它们。 至于该项目网站的新设计，我不会在这里碰到它：任何有好奇心的人都会过来，看着和批评。 <br><br><h3> 重新定义<b>ESP8266支</b>脚 </h3><br> 因此，支脚或它们是<b>-GPIO</b> 。 最初， <b>ESP866</b>微控制器的支路不打算重新定义。 它们被牢牢地钉在<b>ESP-07</b>板的输入和输出上（任何有兴趣的人-一切都在项目网站上）。 <br><br> 但是突然发现，我的固件没有任何更改，不仅在具有1MB闪存的<b>ESP-07</b>模块上，而且在<b>ESP-01</b> ， <b>ESP-12</b>甚至在<b>ESP-8285上都可以使用</b> ！ <br><br> 正确地提出了一个问题，其中一个需要5个输入和一个输出，其他6个输出而不需要输入，并且同时需要三个温度计。 <br><br> 愤愤不平的公众的来信浪潮几乎使我心中的残留物变得黯淡！ 我的妻子已经准备好给我打电话给我一件带有死亡衬衫的命令...但是我原来是个强硬的人！ <br> 我咬着牙，喝了三公升的咖啡，收集了大脑的残余物，这些残余物是偶然没喝到学生体内的，并想出了如何通过重新定义腿部来实现这一技巧，从而使每个人都感觉良好。 <br><br> 我不会对内部程序厨房感到厌烦。 从用户的角度来看，一切看起来都非常简单：他将鼠标戳到与<b>GPIO</b>模块的任意分支相连的节点上，并从可能的分支中选择一条。 大致如下图所示。 <br><br><img src="https://habrastorage.org/webt/zn/-f/9x/zn-f9x5xesj70levkx1noewx5ay.jpeg"><br><br>  <b>N / A-</b>表示未选中脚。 <br> 如果电路中的某个节点未选择<b>N / A</b>支路，则无法将该电路加载到设备中<b>-ElDraw</b>编辑器将不允许<b>它</b> 。 但是，可以将这样的方案下载到磁盘上，以便“稍后”继续对其进行编辑。 <br><br> 一切都很简单，但有细微差别。 <br><br>  <b>首先</b> ，我认为这非常方便，列表中仅显示未使用的支腿。 也就是说，两次选择一条腿是不可能的。 <br><br>  <b>其次</b> ， <b>GPIO15</b>支路保留用于AP按钮，不能用于其他目的。 对不起，但是没有办法... <br><br>  <b>第三</b> ， <b>GPIO16</b>支路不能用作常规二进制输入（ <b>输入</b>节点）。 <br><br>  <b>第四</b> ， <b>GPIO9</b>和<b>GPIO10支脚</b>只能在<b>ESP-8285</b>模块上使用。 在其他模块上，结果将是灾难性的-完全依赖和无限重启！ <br><br> 最后一点-选择<b>GPIO9</b>和<b>GPIO10支脚</b>时某些模块的悬挂使我很难思考。 毕竟，如果腿的选择不正确，我不想每次都更改控制器！ 我想出了一种经过修改的新方式进入配置模式。 <br><br><h3> 进入配置模式的新方法 </h3><br> 如果有人阅读了我以前的文章，他会记得<b>ShIoTiny</b>固件配置模式是ESP8266芯片成为开放访问点时的模式，并且重启后程序电路不会自动启动。 而且如果它没有启动，那么在选择任何<b>GPIO</b>引脚时它都不会挂起。 <br><br> 也就是说，在配置模式下，您可以将<b>GPIO9</b>和<b>GPIO10</b>的问题<b>分支</b> <b>更改</b>为其他<b>分支</b> 。 但麻烦的是，仅按住<b>AP</b>按钮约4秒钟，您才能进入配置模式！ 在这段时间内，控制器将有时间开始执行“曲线”电路程序并冻结！ <br><br> 为解决此问题，重新启动控制器后，我提出了半秒的保护间隔。 如果在重新启动控制器后0.5秒钟内按了<b>AP</b>按钮，则控制器将立即以配置模式重新启动。 同时，在半秒的保护间隔内，程序方案不会启动。 这意味着它无法挂起。 <br><br> 缺点很明显-程序不会立即启动，而是半秒后启动。 优势更为可观-如果您选择“错误的分支”或电路程序由于其他原因而冻结，则始终可以进入配置模式并解决问题，而无需闪烁控制器。 <br><br> 实际上，一切看上去都比蒸熟的萝卜更简单：我们按下“ <b>重置”</b>按钮，然后在不干扰的情况下释放此处的“ <b>重置”</b>按钮，我们按下<b>AP</b>按钮。 立即大约半秒钟，蓝色<b>STATUS</b> LED点亮（如果您将其焊接到<b>GPIO0</b> ，当然），控制器将在配置模式下重启。 <br><br> 如果程序电路正常工作，则可以始终以“旧”方式切换到配置模式-按住<b>AP</b>按钮约4秒钟（直到蓝色的<b>STATUS</b> LED亮起）。 <br><br><h3>  <b>ShIoTiny</b>状态<b>页面</b> </h3><br> 根据用户的意愿连接支腿的能力已导致<b>ShIoTiny</b>固件的主要信息页的<b>修订</b> 。 <br><br> 经过深思熟虑，我得出的结论是，该页面应a）内容丰富，b）内容不宜过多。 <br><br> 下图显示了我所得到的。 <br><br><img src="https://habrastorage.org/webt/c6/lr/as/c6lrasjcqqtzgd1fhz_gk--k4z4.jpeg"><br><br> 主要信息页面上有两个部分： <b>信息</b> -常规信息和已<b>使用的GPIO-</b>有关I / O支脚使用的信息。 让我们更详细地考虑它们。 <br><br><h4> 信息部分 </h4><br>  <b>名称：esp_8266_155da4-</b>设备的唯一名称。 它是自动生成的，无法更改。 <br><br>  <b>Ver：2019-10-22 22:54:51 +0700 6b5ee82 clean-</b>固件版本（构建日期和提交标识符）。 <br><br>  <b>MQTT：已连接到：192.168.1.2:21064，</b> SSL-与MQTT服务器的连接。 如果正在使用安全连接，则显示服务器的IP地址或URL，服务器端口和SSL模式。 请记住，如果电路程序不包含用于MQTT的节点，则将永远无法建立连接！ <br><br>  <b>WiFi：STA IP：192.168.1.134。</b>  <b>-WiFi ESP8266</b>工作模式： <b>STA-</b>站， <b>AP-</b>接入点。 可以同时选择具有不同IP地址的两种模式。 <br><br>  <b>现在：2019年10月30日星期三21:49:28 GMT + 0700-</b>当前时间。 它显示只有“ <b>设置时间”</b>节点<b>设置的时间</b> ！ 否则，将指示时间未同步且未设置。 <br><br><h4>  GPIO使用部分 </h4><br> 本节显示了程序图中使用的所有模块分支及其当前状态。 <br><br> 输出格式很明显： <b>GPIO &lt;leg number&gt;（功能）：状态</b> <br> 支路编号是数字，或者对于<b>ADC</b> ，数字是题字<b>adc</b> 。 <br> 功能： <b>输入</b> -二进制输入；  <b>继电器</b> -二进制输出;  <b>ADC</b> -ADC或传感器类型： <b>DS182x</b>或<b>DHTxx</b> 。 <br><br> 字段“状态”-取决于腿的目的。 <br> 对于二进制输入和输出-0或1。 <br> 对于传感器-温度，湿度。 <br> 对于ADC-根据给定的公式重新计算其读数（请参见说明中有关使用ADC的说明）。 <br><br> 我认为，主页包含有关控制器操作的所有必要信息。 <br><br><h3> 结论 </h3><br> 实际上，这是当今固件中的所有主要更改。 除了这些创新之外，还修复了五个五个小错误。 <br><br> 照常<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>-ShIoTiny</b></a>网站上文档部分或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处的</a>详细说明。 <br><br> 建议，愿望，批评， <s>金钱，礼物</s>等-给我发送评论或电子邮件： <b>shiotiny@yandex.ru</b> 。 <br><br> 等待反馈和建议。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN473832/">https://habr.com/ru/post/zh-CN473832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN473818/index.html">在TSD上的应用以及通过HTTP服务与1C：Enterprise 8.3的通信。 第4部分（带有键盘仿真的OnKeyUp。SC扫描器）</a></li>
<li><a href="../zh-CN473822/index.html">1天的工作机会：我们如何在同一天进行面试并提供反馈</a></li>
<li><a href="../zh-CN473824/index.html">如何在单个系统中构建用于销售计划的业务技术</a></li>
<li><a href="../zh-CN473826/index.html">Apache Web服务器上的OTP身份验证</a></li>
<li><a href="../zh-CN473828/index.html">计算机视觉代替办公室通行证</a></li>
<li><a href="../zh-CN473834/index.html">Clos网络中的黑盒监控。 Yandex报告</a></li>
<li><a href="../zh-CN473838/index.html">DJI Mavic Mini：最轻的折叠直升机</a></li>
<li><a href="../zh-CN473840/index.html">通过UDP将Android设备中的视频流传输到JAVA应用程序</a></li>
<li><a href="../zh-CN473842/index.html">十月机器学习和人工智能新闻摘要</a></li>
<li><a href="../zh-CN473844/index.html">为什么在简单的破碎机中需要C ++ 20的范围？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>