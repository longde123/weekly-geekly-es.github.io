<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐พโ๐คโ๐จ๐ผ ๐ค๐ฟ ๐คฑ๐ป MVCC ูู PostgreSQL-5. ูุฑุงุบ ูู ุงูุตูุญุฉ ูุงูุชุญุฏูุซุงุช ุงูุณุงุฎูุฉ ๐ ๐ง๐ฝ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุท ูุชุฐููุฑู ุ ููุฏ ูุงูุดูุง ุจุงููุนู ุงููุณุงุฆู ุงููุชุนููุฉ ุจุงูุนุฒูุฉ ุ ููููุง ุจุงุณุชูุดุงู ุจุฎุตูุต ุจููุฉ ุงูุจูุงูุงุช ููุฎูุถุฉ ุงููุณุชูู ุ ุซู ุงุณุชูุดููุง ุฅุตุฏุงุฑุงุช ุงูุตููู ููุงุญุธูุง ูููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MVCC ูู PostgreSQL-5. ูุฑุงุบ ูู ุงูุตูุญุฉ ูุงูุชุญุฏูุซุงุช ุงูุณุงุฎูุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/483768/" style=";text-align:right;direction:rtl">  ููุท ูุชุฐููุฑู ุ ููุฏ ูุงูุดูุง ุจุงููุนู ุงููุณุงุฆู ุงููุชุนููุฉ <a href="https://habr.com/ru/company/postgrespro/blog/467437/">ุจุงูุนุฒูุฉ</a> ุ ููููุง ุจุงุณุชูุดุงู ุจุฎุตูุต <a href="https://habr.com/ru/company/postgrespro/blog/469087/">ุจููุฉ ุงูุจูุงูุงุช ููุฎูุถุฉ ุงููุณุชูู</a> ุ ุซู ุงุณุชูุดููุง <a href="https://habr.com/ru/company/postgrespro/blog/477648/">ุฅุตุฏุงุฑุงุช ุงูุตููู</a> ููุงุญุธูุง ููููุฉ ุงูุญุตูู ุนูู <a href="https://habr.com/ru/company/postgrespro/blog/479512/">ููุทุงุช ุงูุจูุงูุงุช</a> ูู ุฅุตุฏุงุฑุงุช ุงูุตููู. <br><br>  ุงูุขู ุณููุชูู ุฅูู ูุดููุชูู ูุชุตูุชูู ุจุดูู ูุซูู: <em>ุงููุฑุงุบ ูู ุงูุตูุญุฉ</em> <em>ูุงูุชุญุฏูุซุงุช ุงูุณุงุฎูุฉ</em> .  ูููู ุฅุญุงูุฉ ููุชุง ุงูุชูููุชูู ุฅูู ุงูุชุญุณููุงุช ุ  ุฃููุง ูููุฉ ุ ูููููุง ุบูุฑ ูุดูููุฉ ุชูุฑูุจูุง ูู ุงููุซุงุฆู. <br><br><h1 style=";text-align:right;direction:rtl">  ูุฑุงุบ ูู ุงูุตูุญุฉ ุฃุซูุงุก ุงูุชุญุฏูุซุงุช ุงูููุชุธูุฉ </h1><br>  ุนูุฏ ุงููุตูู ุฅูู ุตูุญุฉ ุฅูุง ูุชุญุฏูุซ ุฃู ูุฑุงุกุฉ ุ ุฅุฐุง ูุงู PostgreSQL ูุฏุฑู ุฃู ุงูุตูุญุฉ ููุฏุช ูุณุงุญุชูุง ุ ููููููุง ุนูู ูุฑุงุบ ุณุฑูุน ุฏุงุฎู ุงูุตูุญุฉ.  ูุญุฏุซ ูุฐุง ูู ุฃู ูู ุงูุญุงูุงุช: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ูุนุซุฑ ุงูุชุญุฏูุซ ุงูุณุงุจู ูู ูุฐู ุงูุตูุญุฉ ุนูู ูุณุงุญุฉ ูุงููุฉ ูุชุฎุตูุต ุฅุตุฏุงุฑ ุตู ุฌุฏูุฏ ูู ููุณ ุงูุตูุญุฉ.  ูุชู ุชุฐูุฑ ูุซู ูุฐุง ุงููููู ูู ุฑุฃุณ ุงูุตูุญุฉ ุ ููู ุงููุฑุฉ ุงููุงุฏูุฉ ูุชู ุชูุฑูุบ ุงูุตูุญุฉ. </li><li style=";text-align:right;direction:rtl"> ุงูุตูุญุฉ ุฃูุซุฑ ูู <code>fillfactor</code> ุงููุฆุฉ ููุชูุฆุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุฅุฌุฑุงุก ูุฑุงุบ ุนูู ุงูููุฑ ุฏูู ุชุฃุฌูู ุญุชู ุงูุชุงูู ุงูุชุงูู. </li></ol><a name="habracut"></a><br>  <code>fillfactor</code> ูู ูุนููุฉ ุชุฎุฒูู ูููู ุชุนุฑูููุง ูุฌุฏูู (ูููููุฑุณ).  ูููู PostgresSQL ุจุฅุฏุฑุงุฌ ุตู ุฌุฏูุฏ ูู ุตูุญุฉ ููุท ุฅุฐุง ูุงูุช ุงูุตูุญุฉ ุฃูู ูู <code>fillfactor</code> ุงููุฆุฉ ููุชูุฆุฉ.  ุงููุณุงุญุฉ ุงููุชุจููุฉ ูุญุฌูุฒุฉ ููุฃูุงุจูุจ ุงูุฌุฏูุฏุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุชูุฌุฉ ููุชุญุฏูุซุงุช.  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุฌุฏุงูู ูู 100 ุ ุฃู ุฃูู ูุง ุชูุฌุฏ ูุณุงุญุฉ ูุฎุตุตุฉ (ูุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููููุงุฑุณ ูู 90). <br><br>  ูุญุฐู ุงููุฑุงุบ ุงูููุฌูุฏ ูู ุงูุตูุญุฉ ุงูุฃููุงุน ุบูุฑ ุงููุฑุฆูุฉ ูู ุฃู ููุทุฉ (ุชูู ุงูุชู ุชุชุฌุงูุฒ ุฃูู ุงููุนุงููุงุช ููุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุงูุชู ุชูุช ููุงูุดุชูุง <a href="https://habr.com/ru/company/postgrespro/blog/479512/">ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ</a> ) ุ ูููููุง ุชููู ุจุฐูู ุฏุงุฎู ุตูุญุฉ ุฌุฏูู ูุงุญุฏุฉ ุจุดูู ุตุงุฑู.  ูุง ูุชู ุฅุตุฏุงุฑ ูุคุดุฑุงุช ุฅูู ูุฑุงุบุงุช ููุฑุบุฉ ุญูุซ ูููู ุงูุฑุฌูุน ุฅูููุง ูู ููุงุฑุณ ุ ูุงูููุฑุณ ููุฌูุฏ ูู ุตูุญุฉ ุฃุฎุฑู.  ูุง ูุชุฌุงูุฒ ูุฑุงุบ ุงูุตูุญุฉ ุฃุจุฏุงู ุตูุญุฉ ุฌุฏูู ูุงุญุฏุฉ ุ ูููู ูุนูู ุจุณุฑุนุฉ ูุจูุฑุฉ. <br><br>  ูููุณ ุงูุฃุณุจุงุจ ุ ูุง ูุชู ุชุญุฏูุซ ุฎุฑูุทุฉ ุงููุณุงุญุฉ ุงูุญุฑุฉ ุ  ูุฐุง ุฃูุถูุง ูุญุชูุธ ุจูุณุงุญุฉ ุฅุถุงููุฉ ููุชุญุฏูุซุงุช ุจุฏูุงู ูู ุฅุฏุฑุงุฌูุง.  ูุง ูุชู ุชุญุฏูุซ ุฎุฑูุทุฉ ุงูุฑุคูุฉ ุฃูุถูุง. <br><br>  ุญูููุฉ ุฃู ุงูุตูุญุฉ ูููู ูุฑุงุบูุง ุฃุซูุงุก ุงููุฑุงุกุฉ ุชุนูู ุฃู ุงุณุชุนูุงู SELECT ูููู ุฃู ูุณุชูุฒู ุชุบููุฑ ุงูุตูุญุงุช.  ูุฐู ุญุงูุฉ ุฃุฎุฑู ูุซู ูุฐู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุบููุฑ ูุคุฌู ููุจุช ุงูุชูููุญุงุช ุ ูุงูุชู ุชูุช ููุงูุดุชูุง ุณุงุจููุง. <br><br>  ุฏุนูุง ูููุฑ ููุซุงู ูููููุฉ ุนูููุง.  ูููู ุจุฅูุดุงุก ุฌุฏูู ูููุงุฑุณ ูู ููุง ุงูุนููุฏูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> hot(id <span class="hljs-type"><span class="hljs-type">integer</span></span>, s <span class="hljs-type"><span class="hljs-type">char</span></span>(<span class="hljs-number"><span class="hljs-number">2000</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (fillfactor = <span class="hljs-number"><span class="hljs-number">75</span></span>); =&gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> hot_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> hot(id); =&gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> hot_s <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> hot(s);</code> </pre><br>  ุฅุฐุง ูุงู ุงูุนููุฏ <code>s</code> ูุฎุฒู ุงูุฃุญุฑู ุงููุงุชูููุฉ ููุท ุ ูุณูุดุบู ูู ุฅุตุฏุงุฑ ุตู 2004 ุจุงูุช ุจุงูุฅุถุงูุฉ ุฅูู 24 ุจุงูุช ูู ุงูุฑุฃุณ.  ุญุฏุฏูุง ูุนููุฉ ุชุฎุฒูู <code>fillfactor</code> ุนูู 75 ูช ุ ูุงูุชู ุชุญุชูุธ ุจูุณุงุญุฉ ูุงููุฉ ููุท ูุซูุงุซุฉ ุตููู. <br><br>  ูููุธุฑ ุจุณูููุฉ ูู ูุญุชููุงุช ุตูุญุฉ ุงูุฌุฏูู ุ ุฏุนููุง ูุนูุฏ ุฅูุดุงุก ูุธููุฉ ูุฃูููุฉ ุจุงููุนู ุนู ุทุฑูู ุฅุถุงูุฉ ุญูููู ุขุฎุฑูู ุฅูู ุงูุฅุฎุฑุงุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> heap_page(relname <span class="hljs-type"><span class="hljs-type">text</span></span>, pageno <span class="hljs-type"><span class="hljs-type">integer</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span>(ctid tid, state <span class="hljs-type"><span class="hljs-type">text</span></span>, xmin <span class="hljs-type"><span class="hljs-type">text</span></span>, xmax <span class="hljs-type"><span class="hljs-type">text</span></span>, hhu <span class="hljs-type"><span class="hljs-type">text</span></span>, hot <span class="hljs-type"><span class="hljs-type">text</span></span>, t_ctid tid) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $$<span class="pgsql"><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">SELECT</span></span></span><span class="pgsql"> (pageno,lp)::</span><span class="hljs-type"><span class="pgsql"><span class="hljs-type">text</span></span></span><span class="pgsql">::tid </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> ctid, </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">CASE</span></span></span><span class="pgsql"> lp_flags </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'unused'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">1</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'normal'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">2</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'redirect to '</span></span></span><span class="pgsql">||lp_off </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">3</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'dead'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">END</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> state, t_xmin || </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">CASE</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">256</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">' (c)'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">512</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">' (a)'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">ELSE</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">''</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">END</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> xmin, t_xmax || </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">CASE</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">1024</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">' (c)'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">2048</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">' (a)'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">ELSE</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">''</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">END</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> xmax, </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">CASE</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask2 &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">16384</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'t'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">END</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> hhu, </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">CASE</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">WHEN</span></span></span><span class="pgsql"> (t_infomask2 &amp; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">32768</span></span></span><span class="pgsql">) &gt; </span><span class="hljs-number"><span class="pgsql"><span class="hljs-number">0</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">THEN</span></span></span><span class="pgsql"> </span><span class="hljs-string"><span class="pgsql"><span class="hljs-string">'t'</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">END</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">AS</span></span></span><span class="pgsql"> hot, t_ctid </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">FROM</span></span></span><span class="pgsql"> heap_page_items(get_raw_page(relname,pageno)) </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">ORDER</span></span></span><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">BY</span></span></span><span class="pgsql"> lp; $$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span> <span class="hljs-keyword"><span class="hljs-keyword">LANGUAGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SQL</span></span>;</code> </pre><br>  ูููู ุฃูุถูุง ุจุฅูุดุงุก ูุธููุฉ ูููุธุฑ ูู ุตูุญุฉ ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> index_page(relname <span class="hljs-type"><span class="hljs-type">text</span></span>, pageno <span class="hljs-type"><span class="hljs-type">integer</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span>(itemoffset <span class="hljs-type"><span class="hljs-type">smallint</span></span>, ctid tid) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $$<span class="pgsql"><span class="pgsql"> </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">SELECT</span></span></span><span class="pgsql"> itemoffset, ctid </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">FROM</span></span></span><span class="pgsql"> bt_page_items(relname,pageno); $$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span> <span class="hljs-keyword"><span class="hljs-keyword">LANGUAGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SQL</span></span>;</code> </pre><br>  ุฏุนููุง ูุชุญูู ูู ููููุฉ ุนูู ุงููุฑุงุบ ูู ุงูุตูุญุฉ.  ููููุงู ุจุฐูู ุ ูููู ุจุฅุฏุฑุงุฌ ุตู ูุงุญุฏ ูุชุบููุฑู ุนุฏุฉ ูุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'A'</span></span>); =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'B'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'C'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'D'</span></span>;</code> </pre><br>  ููุงู ุฃุฑุจุนุฉ tuples ูู ุงูุตูุญุฉ ุงูุขู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+--------+----------+----------+-----+-----+-------- (0,1) | normal | 3979 (c) | 3980 (c) | | | (0,2) (0,2) | normal | 3980 (c) | 3981 (c) | | | (0,3) (0,3) | normal | 3981 (c) | 3982 | | | (0,4) (0,4) | normal | 3982 | 0 (a) | | | (0,4) (4 rows)</code> </pre><br>  ููุง ูู ูุชููุน ุ ููุฏ ุชุฌุงูุฒูุง ุนุชุจุฉ <code>fillfactor</code> .  ูุฐุง ูุงุถุญ ูู ุงููุฑู ุจูู ููู <code>pagesize</code> <code>upper</code> : ูุชุฌุงูุฒ ุงูุญุฏ <code>pagesize</code> ุจู 75ูช ูู ุญุฌู ุงูุตูุญุฉ ุ ููุง ูุฌุนู 6144 ุจุงูุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> lower, upper, pagesize <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> page_header(get_raw_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> lower | upper | pagesize -------+-------+---------- 40 | 64 | 8192 (1 row)</code> </pre><br>  ูุฐูู ุ ุนูุฏูุง ูุชู ุงููุตูู ุฅูู ุงูุตูุญุฉ ูู ุงููุฑุฉ ุงููุงุฏูุฉ ุ ูุฌุจ ุฃู ูุญุฏุซ ูุฑุงุบ ูู ุงูุตูุญุฉ.  ุฏุนููุง ุงูุชุญูู ูู ูุฐุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'E'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+--------+----------+-------+-----+-----+-------- (0,1) | dead | | | | | (0,2) | dead | | | | | (0,3) | dead | | | | | (0,4) | normal | 3982 (c) | 3983 | | | (0,5) (0,5) | normal | 3983 | 0 (a) | | | (0,5) (5 rows)</code> </pre><br>  ุฌููุน ุงููุฑุงุบุงุช ุงูููุชุฉ (0ุ1) ู (0ุ2) ู (0ุ3) ูุชู ุชูุฑูุบูุง ุจุนูุฏูุง ุ  ุจุนุฏ ุฐูู ุ ูุชู ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ (0.5) ูู ุงููุณุงุญุฉ ุงููุญุฑุฑุฉ. <br><br>  ูุชู ููู ุงูุนูุงุตุฑ ุงูุชู ูุฌุช ูู ุงููุฑุงุบ ูุนูููุง ูุญู ุนูุงููู ุนุงููุฉ ูู ุงูุตูุญุฉ ุจุญูุซ ูุชู ุชูุซูู ูู ุงููุณุงุญุฉ ุงูุญุฑุฉ ุจูุณุงุญุฉ ูุงุญุฏุฉ ูุชุตูุฉ.  ูุชู ุชุบููุฑ ููู ุงููุคุดุฑุงุช ููููุง ูุฐูู.  ุจูุถู ูุฐุง ุ ูุง ุชูุดุฃ ุฃู ูุดุงูู ูุน ุชุฌุฒุฆุฉ ุงููุณุงุญุฉ ุงูุญุฑุฉ ูู ุงูุตูุญุฉ. <br><br>  ูุง ูููู ุฅุตุฏุงุฑ ูุคุดุฑุงุช ุฅูู ูุฑุงุบุงุช ููุฑุบุฉ ุญูุซ ูุชู ุงูุฑุฌูุน ุฅูููุง ูู ุตูุญุฉ ุงูููุฑุณ.  ููููู ูุธุฑุฉ ุนูู ุงูุตูุญุฉ ุงูุฃููู ูู ููุฑุณ <code>hot_s</code> (ูุธุฑูุง ูุฃู ุงูุตูุญุฉ ุตูุฑ ูุดุบููุฉ <code>hot_s</code> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> index_page(<span class="hljs-string"><span class="hljs-string">'hot_s'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> itemoffset | ctid ------------+------- 1 | (0,1) 2 | (0,2) 3 | (0,3) 4 | (0,4) 5 | (0,5) (5 rows)</code> </pre><br>  ูุฑู ุฃูุถูุง ููุณ ุงูุตูุฑุฉ ูู ุงูููุฑุณ ุงูุขุฎุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> index_page(<span class="hljs-string"><span class="hljs-string">'hot_id'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> itemoffset | ctid ------------+------- 1 | (0,5) 2 | (0,4) 3 | (0,3) 4 | (0,2) 5 | (0,1) (5 rows)</code> </pre><br>  ูุฏ ุชูุงุญุธ ุฃู ูุคุดุฑุงุช ุฅูู ุตููู ุงูุฌุฏูู ุชุชุจุน ููุง ุจุชุฑุชูุจ ุนูุณู ุ ููู ูุฐุง ูุง ูุญุฏุซ ูุฑููุง ูุฃู ุฌููุน ุงููุฌููุนุงุช ููุง ููุณ ุงููููุฉ: id = 1.  ููู ูู ุงููุคุดุฑ ุงูุณุงุจู ุ ูุชู ุชุฑุชูุจ ุงููุคุดุฑุงุช ุญุณุจ ููู <code>s</code> ุ ููุฐุง ุถุฑูุฑู. <br><br>  ุจุงุณุชุฎุฏุงู ุงููุตูู ุฅูู ุงูููุฑุณ ุ ูููู ูู PostgreSQL ุงูุญุตูู ุนูู (0ุ1) ุฃู (0ุ2) ุฃู (0ุ3) ููุนุฑูุงุช tuple.  ุณุชุญุงูู ุจุนุฏ ุฐูู ุงูุญุตูู ุนูู ุฅุตุฏุงุฑ ุงูุตู ุงูููุงุณุจ ูู ุตูุญุฉ ุงูุฌุฏูู ุ ูููู ุจุณุจุจ ุงูุญุงูุฉ "ุงูููุช" ูููุคุดุฑ ุ ุณุชูุชุดู PostgreSQL ุฃู ูุซู ูุฐุง ุงูุฅุตุฏุงุฑ ูู ูุนุฏ ููุฌูุฏูุง ูุณูู ูุชุฌุงููู.  (ูู ุงููุงูุน ุ ุจุนุฏ ุฃู ุงูุชุดููุง ูุฑุฉ ูุงุญุฏุฉ ุฃู ุฅุตุฏุงุฑ ุตู ุงูุฌุฏูู ุบูุฑ ูุชุงุญ ุ ูุฅู PostgreSQL ุณุชุบูุฑ ุญุงูุฉ ุงููุคุดุฑ ูู ุตูุญุฉ ุงูููุฑุณ ุญุชู ูุง ุชุชููู ูู ุงููุตูู ุฅูู ุตูุญุฉ ุงูุฌุฏูู ุจุนุฏ ุงูุขู.) <br><br>  ูู ุงูุถุฑูุฑู ุฃู ูุนูู ุงููุฑุงุบ ุงูููุฌูุฏ ูู ุงูุตูุญุฉ ุถูู ุตูุญุฉ ุฌุฏูู ูุงุญุฏุฉ ููุท ููุง ูุนูู ูุฑุงุบ ููุฑุณ ุงูุตูุญุงุช. <br><br><h1 style=";text-align:right;direction:rtl">  ุชุญุฏูุซุงุช ุณุงุฎูุฉ </h1><br>  ููุงุฐุง ููุณ ูู ุงูุฌูุฏ ุชุฎุฒูู ุงูุฅุดุงุฑุงุช ุฅูู ุฌููุน ุฅุตุฏุงุฑุงุช ุงูุตู ูู ุงูููุฑุณุ <br><br>  ุฃููุงู ุ ูุฃู ุชุบููุฑ ูู ุงูุตู ุ ูุฌุจ ุชุญุฏูุซ ุฌููุน ุงูููุงุฑุณ ุงูุชู ุชู ุฅูุดุงุคูุง ููุฌุฏูู: ุจูุฌุฑุฏ ุฅูุดุงุก ูุณุฎุฉ ุฌุฏูุฏุฉ ุ ูุฌุจ ุงูุฑุฌูุน ุฅูููุง.  ููุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฐูู ูู ุฃู ุญุงู ุ ุญุชู ุฅุฐุง ุชู ุชุบููุฑ ุงูุญููู ุงูุชู ูู ูุชู ููุฑุณุชูุง.  ูู ุงููุงุถุญ ุฃู ูุฐุง ุบูุฑ ูุนุงู ููุบุงูุฉ. <br><br>  ุซุงููุงู ุ ุชุชุฑุงูู ุงูููุงุฑุณ ุฅุดุงุฑุงุช ุฅูู ุงููุฌููุนุงุช ุงูุชุงุฑูุฎูุฉ ุ ูุงูุชู ุชุญุชุงุฌ ุจุนุฏ ุฐูู ุฅูู ุชูุฑูุบูุง ุฅูู ุฌุงูุจ ุงูุชูุงููุฐ ุฃููุณูู (ุณููุงูุด ูุงุญููุง ููู ูุชู ุฐูู). <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุชุญุชูู B-tree ูู PostgreSQL ุนูู ุชูุงุตูู ุงูุชูููุฐ.  ุฅุฐุง ูุงูุช ุตูุญุฉ ุงูููุฑุณ ูุง ุชุญุชูู ุนูู ูุณุงุญุฉ ูุงููุฉ ูุฅุฏุฑุงุฌ ุตู ุฌุฏูุฏ ุ ูุชู ุชูุณูู ุงูุตูุญุฉ ุฅูู ูุณููู ุ ููุชู ุชูุฒูุน ุฌููุน ุงูุจูุงูุงุช ุจููููุง.  ููุฐุง ูุง ูุณูู ุชูุณูู ุงูุตูุญุฉ.  ููุน ุฐูู ุ ุนูุฏ ุญุฐู ุงูุตููู ุ ูุง ูุชู ุฏูุฌ ุตูุญุชูู ูู ููุฑุณ ูุงุญุฏ.  ููุฐุง ุงูุณุจุจ ุ ูุฏ ููุดู ุญุฌู ุงูููุฑุณ ูู ุงูุชูููู ุญุชู ุฅุฐุง ุชู ุญุฐู ุฌุฒุก ูุจูุฑ ูู ุงูุจูุงูุงุช. <br><br>  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุชู ุฅูุดุงุก ุงููุฒูุฏ ูู ุงูููุงุฑุณ ุนูู ุฌุฏูู ุ ูุชูุงุฌู ุงููุฒูุฏ ูู ุงูุชุนููุฏุงุช. <br><br>  ููุน ุฐูู ุ ุฅุฐุง ุชู ุชุบููุฑ ูููุฉ ูู ุนููุฏ ุบูุฑ ูููุฑุณุฉ ุนูู ุงูุฅุทูุงู ุ ูููุณ ูู ุงูููุทูู ุฅูุดุงุก ุตู ุดุฌุฑุฉ B ุฅุถุงูู ูุญุชูู ุนูู ููุณ ูููุฉ ุงูููุชุงุญ.  ูุฐุง ูู ุจุงูุถุจุท ููู ูุนูู ุงูุชุญุณูู ุงููุณูู <em>HOT update</em> ( <em>ุชุญุฏูุซ</em> Heap-Only Tuple). <br><br>  ุฃุซูุงุก ูุฐุง ุงูุชุญุฏูุซ ุ ุชุญุชูู ุตูุญุฉ ุงูููุฑุณ ุนูู ุตู ูุงุญุฏ ููุท ุ ูุงูุฐู ูุดูุฑ ุฅูู ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู ุงูุตู ูู ุตูุญุฉ ุงูุฌุฏูู.  ููู ููุฌูุฏุฉ ุจุงููุนู ุฏุงุฎู ุตูุญุฉ ุงูุฌุฏูู ุ ุญูุซ ูุชู ุชูุธูู ุณูุณูุฉ ูู ุงููุฌููุนุงุช ุงูุซุงูููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุชุณููุฉ ุงูุตููู ุงููุญุฏุซุฉ ุงูููุฌูุฏุฉ ูู ุงูุณูุณูุฉ ุจุฌุฒุก ุชุญุฏูุซ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชุตููู ุงูุตููู ุงูุชู ูู ูุชู ุงูุฑุฌูุน ุฅูููุง ูู ุงูููุฑุณ ุจุช ุจุช Heap Only Tuple. </li><li style=";text-align:right;direction:rtl">  ูุงูุนุงุฏุฉ ุ ูุชู ุฑุจุท ุฅุตุฏุงุฑุงุช ุงูุตู ูู ุฎูุงู ุงูุญูู <code>ctid</code> . </li></ul><br>  ุฅุฐุง ูุงู PostgreSQL ูุตู ุฅูู ุตูุญุฉ ุฌุฏูู ุฃุซูุงุก ูุณุญ ุงูููุฑุณ ุ ููุฌุฏ tuple ุงููุณูู "Heap Hot ูุญุฏุซ" ุ ูุฅูู ูููู ุฃูู ูุฌุจ ุฃูุง ูุชููู ุ ูููู ูุฌุจ ุฃู ูุชุจุน ุณูุณูุฉ HOT ุ ูุน ูุฑุงุนุงุฉ ูู tuple ูููุง.  ุจุงูุชุฃููุฏ ุ ุจุงููุณุจุฉ ูุฌููุน ุงูุชูุงููุฐ ุญุตููุง ุนูู ูุฐุง ุงููุญู ุ ูุชู ุงูุชุญูู ูู ุงูุฑุคูุฉ ูุจู ุฅุนุงุฏุชูู ุฅูู ุงูุนููู. <br><br>  ููุฑุงูุจุฉ ููููุฉ ุนูู ุชุญุฏูุซ HOT ุ ุฏุนูุง ูุญุฐู ููุฑุณูุง ูุงุญุฏูุง ูููุณุญ ุงูุฌุฏูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> hot_s; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">TRUNCATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> hot;</code> </pre><br>  ุงูุขู ูุนูุฏ ุฅุฏุฑุงุฌ ูุชุญุฏูุซ ุตู ูุงุญุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'A'</span></span>); =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'B'</span></span>;</code> </pre><br>  ููุฐุง ูุง ูุฑุงู ูู ุตูุญุฉ ุงูุฌุฏูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+--------+----------+-------+-----+-----+-------- (0,1) | normal | 3986 (c) | 3987 | t | | (0,2) (0,2) | normal | 3987 | 0 (a) | | t | (0,2) (2 rows)</code> </pre><br>  ููุงู ุณูุณูุฉ ูู ุงูุชุบููุฑุงุช ูู ุงูุตูุญุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุดูุฑ ุนูุงูุฉ ุชุญุฏูุซ ุชุญุฏูุซ ุงููููุฉ ุฅูู ุฃูู ูุฌุจ ุงุชุจุงุน ุณูุณูุฉ <code>ctid</code> . </li><li style=";text-align:right;direction:rtl">  ุชุดูุฑ ุนูุงูุฉ Heap Only Tuple ุฅูู ุฃู ูุฐู ุงููุฌููุนุฉ ุบูุฑ ูุฑุฌุนูุฉ ูู ุงูููุงุฑุณ. </li></ul><br>  ุณูู ุชููู ุงูุณูุณูุฉ (ุฏุงุฎู ุงูุตูุญุฉ) ูุน ูุฒูุฏ ูู ุงูุชุบููุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'C'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'D'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+--------+----------+----------+-----+-----+-------- (0,1) | normal | 3986 (c) | 3987 (c) | t | | (0,2) (0,2) | normal | 3987 (c) | 3988 (c) | t | t | (0,3) (0,3) | normal | 3988 (c) | 3989 | t | t | (0,4) (0,4) | normal | 3989 | 0 (a) | | t | (0,4) (4 rows)</code> </pre><br>  ูููู ููุงู ุฅุดุงุฑุฉ ูุงุญุฏุฉ ููุท ุฅูู ุฑุฃุณ ุงูุณูุณูุฉ ูู ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> index_page(<span class="hljs-string"><span class="hljs-string">'hot_id'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> itemoffset | ctid ------------+------- 1 | (0,1) (1 row)</code> </pre><br>  ููุชุฃููุฏ ุ ุชุนูู ุชุญุฏูุซุงุช HOT ูู ุญุงูุฉ ุนุฏู ููุฑุณุฉ ุงูุญููู ุงููุฑุงุฏ ุชุญุฏูุซูุง ุนูู ุงูุฅุทูุงู.  ุฎูุงู ุฐูู ุ ูุฅู ุจุนุถ ุงูููุฑุณ ูุญุชูู ุนูู ุฅุดุงุฑุฉ ูุจุงุดุฑุฉ ุฅูู ุฅุตุฏุงุฑ ุตู ุฌุฏูุฏ ุ ููุฐุง ุบูุฑ ูุชูุงูู ูุน ููููู ูุฐุง ุงูุชุญุณูู. <br><br>  ูุนูู ุงูุชุญุณูู ููุท ุฏุงุฎู ุตูุญุฉ ูุงุญุฏุฉ ุ ูุจุงูุชุงูู ูุฅู ุงูุณูุฑ ุงูุฅุถุงูู ุนุจุฑ ุงูุณูุณูุฉ ูุง ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงูุตูุญุงุช ุงูุฃุฎุฑู ููุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก. <br><br><h1 style=";text-align:right;direction:rtl">  ูุฑุงุบ ูู ุงูุตูุญุฉ ุฃุซูุงุก ุงูุชุญุฏูุซุงุช ุงูุณุงุฎูุฉ </h1><br>  ูุนุชุจุฑ ุงูุชูุธูู ุจุงููููุณุฉ ุงูููุฑุจุงุฆูุฉ ุฎูุงู ุชุญุฏูุซุงุช HOT ุญุงูุฉ ุฎุงุตุฉ ุ ูููููุง ูููุฉ ูููุฑุงุบ ุงูููุฌูุฏ ูู ุงูุตูุญุฉ. <br><br>  ููุง ุญุฏุซ ูู ูุจู ุ ููุฏ ุชุฌุงูุฒูุง ุจุงููุนู ุนุชุจุฉ <code>fillfactor</code> ุ ูุฐูู ูุฌุจ ุฃู ูุชุณุจุจ ุงูุชุญุฏูุซ ุงูุชุงูู ูู ุญุฏูุซ ูุฑุงุบ ูู ุงูุตูุญุฉ.  ูููู ูุฐู ุงููุฑุฉ ููุงู ุณูุณูุฉ ูู ุงูุชุญุฏูุซุงุช ูู ุงูุตูุญุฉ.  ูุฌุจ ุฃู ูุธู ุฑุฃุณ ุณูุณูุฉ HOT ุฏุงุฆููุง ููุง ูู ุญูุซ ูุชู ุงูุฑุฌูุน ุฅูููุง ุจูุงุณุทุฉ ุงูููุฑุณ ุ ุจูููุง ูููู ุฅุตุฏุงุฑ ุจููุฉ ุงููุคุดุฑุงุช: ูู ุงููุนุฑูู ุฃููุง ูุง ุชุญุชูู ุนูู ูุฑุงุฌุน ูู ุงูุฎุงุฑุฌ. <br><br>  ูู ุฃุฌู ุนุฏู ููุณ ูุคุดุฑ ุงูุฑุฃุณ ุ ูุชู ุงุณุชุฎุฏุงู ุงูุนูููุฉ ุบูุฑ ุงููุจุงุดุฑุฉ: ููุชุณุจ ุงููุคุดุฑ ุงููุดุงุฑ ุฅููู ุจูุงุณุทุฉ ุงูููุฑุณ - (0ุ1) ูู ูุฐู ุงูุญุงูุฉ - ุญุงูุฉ "ุฅุนุงุฏุฉ ุงูุชูุฌูู" ุ ุงูุชู ุชุนูุฏ ุงูุชูุฌูู ุฅูู ุงููุฌููุนุฉ ุงูููุงุณุจุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'E'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+---------------+----------+-------+-----+-----+-------- (0,1) | redirect to 4 | | | | | (0,2) | normal | 3990 | 0 (a) | | t | (0,2) (0,3) | unused | | | | | (0,4) | normal | 3989 (c) | 3990 | t | t | (0,2) (4 rows)</code> </pre><br>  ูุงุญุธ ุฃู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชู ุชูุฑูุบ ุงูููุงุฏ ุงูุฃูุจูุจูุฉ (0ุ1) ู (0ุ2) ู (0ุ3). </li><li style=";text-align:right;direction:rtl">  ูุจูู ูุคุดุฑ ุงูุฑุฃุณ (0ุ1) ุ ูููู ุญุตู ุนูู ุญุงูุฉ "ุฅุนุงุฏุฉ ุงูุชูุฌูู". </li><li style=";text-align:right;direction:rtl">  ุชูุช ุงููุชุงุจุฉ ููู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ููุตู (0ุ2) ูุธุฑูุง ูุนุฏู ูุฌูุฏ ุฅุดุงุฑุงุช ุฅูู ูุฐู ุงููุฌููุนุฉ ุจุงูุชุฃููุฏ ุ ูุชู ุฅุตุฏุงุฑ ุงููุคุดุฑ (ุงูุญุงูุฉ "ุบูุฑ ุงููุณุชุฎุฏูุฉ"). </li></ul><br>  ูููู ุจุชุญุฏูุซ ุนุฏุฉ ูุฑุงุช ุฃูุซุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'F'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'G'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+---------------+----------+----------+-----+-----+-------- (0,1) | redirect to 4 | | | | | (0,2) | normal | 3990 (c) | 3991 (c) | t | t | (0,3) (0,3) | normal | 3991 (c) | 3992 | t | t | (0,5) (0,4) | normal | 3989 (c) | 3990 (c) | t | t | (0,2) (0,5) | normal | 3992 | 0 (a) | | t | (0,5) (5 rows)</code> </pre><br>  ุงูุชุญุฏูุซ ุงูุชุงูู ูุคุฏู ุฅูู ููุณ ูู ุงูุตูุญุฉ ูุฑุฉ ุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'H'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+---------------+----------+-------+-----+-----+-------- (0,1) | redirect to 5 | | | | | (0,2) | normal | 3993 | 0 (a) | | t | (0,2) (0,3) | unused | | | | | (0,4) | unused | | | | | (0,5) | normal | 3992 (c) | 3993 | t | t | (0,2) (5 rows)</code> </pre><br>  ูุฑุฉู ุฃุฎุฑู ุ ูุชู ุชูุฑูุบ ุจุนุถ ุงูุตููู ุ ููุชู ุชุญุฑูู ุงููุคุดุฑ ุฅูู ุฑุฃุณ ุงูุณูุณูุฉ ููููุง ูุฐูู. <br><br>  ุงูุฎูุงุตุฉ: ุฅุฐุง ุชู ุชุญุฏูุซ ุงูุฃุนูุฏุฉ ุบูุฑ ุงููููุฑุณุฉ ุจุดูู ูุชูุฑุฑ ุ ููุฏ ูููู ูู ุงูููุทูู ุชูููู ูุนููุฉ <code>fillfactor</code> ุฃุฌู ุญุฌุฒ ุจุนุถ ูุณุงุญุฉ ุงูุตูุญุฉ ููุชุญุฏูุซุงุช.  ููุน ุฐูู ุ ูุฌุจ ุฃู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃูู ูููุง ูู <code>fillfactor</code> ุ ูููุง ุชุฑูุช ูุณุงุญุฉ ุฎุงููุฉ ุฃูุจุฑ ูู ุงูุตูุญุฉ ุ ูุจุงูุชุงูู ูุฒุฏุงุฏ ุงูุญุฌู ุงููุนูู ููุฌุฏูู. <br><br><h1 style=";text-align:right;direction:rtl">  ูุณุฑ ุณูุณูุฉ ุงูุณุงุฎูุฉ </h1><br>  ุฅุฐุง ูุงูุช ุงูุตูุญุฉ ุชูุชูุฑ ุฅูู ูุณุงุญุฉ ุฎุงููุฉ ูุชุฎุตูุต ูุฆุฉ ุฌุฏูุฏุฉ ุ ูุณุชุชููู ุงูุณูุณูุฉ.  ูุณูุชุนูู ุนูููุง ุนูู ูุฑุฌุน ูููุตู ูู ุงูููุฑุณ ุฅูู ุฅุตุฏุงุฑ ุงูุตู ุงูููุฌูุฏ ูู ุตูุญุฉ ูุฎุชููุฉ. <br><br>  ูุฅุนุงุฏุฉ ุฅูุชุงุฌ ูุฐุง ุงููููู ุ ุฏุนูุง ูุจุฏุฃ ูุนุงููุฉ ูุชุฒุงููุฉ ูุฅูุดุงุก ููุทุฉ ุงูุจูุงูุงุช ูููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">| =&gt; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ISOLATION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEVEL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPEATABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">READ</span></span>; | =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> count(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> hot;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">| count | ------- | 1 | (1 row)</code> </pre><br>  ูู ุชุณูุญ ุงูููุทุฉ ุจุฅุฒุงูุฉ ุงููุฑุงุบุงุช ุงูููุฌูุฏุฉ ูู ุงูุตูุญุฉ.  ุงูุขู ูููู ุจุชุญุฏูุซ ูู ุงูุฌูุณุฉ ุงูุฃููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'I'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'J'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'K'</span></span>; =&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+---------------+----------+----------+-----+-----+-------- (0,1) | redirect to 2 | | | | | (0,2) | normal | 3993 (c) | 3994 (c) | t | t | (0,3) (0,3) | normal | 3994 (c) | 3995 (c) | t | t | (0,4) (0,4) | normal | 3995 (c) | 3996 | t | t | (0,5) (0,5) | normal | 3996 | 0 (a) | | t | (0,5) (5 rows)</code> </pre><br>  ูู ุงูุชุญุฏูุซ ุงูุชุงูู ุ ูู ุชุญุชูู ุงูุตูุญุฉ ุนูู ูุณุงุญุฉ ูุงููุฉ ุ ููู ุงููุฑุงุบ ุงูููุฌูุฏ ูู ุงูุตูุญุฉ ูู ูููู ูุงุฏุฑูุง ุนูู ุชูุฑูุบ ุฃู ุดูุก ุจุนูุฏูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> hot <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> s = <span class="hljs-string"><span class="hljs-string">'L'</span></span>;</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">| =&gt; <span class="hljs-keyword"><span class="hljs-keyword">COMMIT</span></span>; <span class="hljs-comment"><span class="hljs-comment">-- snapshot no longer needed</span></span></code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+---------------+----------+----------+-----+-----+-------- (0,1) | redirect to 2 | | | | | (0,2) | normal | 3993 (c) | 3994 (c) | t | t | (0,3) (0,3) | normal | 3994 (c) | 3995 (c) | t | t | (0,4) (0,4) | normal | 3995 (c) | 3996 (c) | t | t | (0,5) (0,5) | normal | 3996 (c) | 3997 | | t | (1,1) (5 rows)</code> </pre><br>  ูู ุงููุฌููุนุฉ (0ุ5) ุ ููุงู ุฅุดุงุฑุฉ ุฅูู (1ุ1) ุ ูุงูุชู ูู ูู ุงูุตูุญุฉ 1. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> heap_page(<span class="hljs-string"><span class="hljs-string">'hot'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ctid | state | xmin | xmax | hhu | hot | t_ctid -------+--------+------+-------+-----+-----+-------- (1,1) | normal | 3997 | 0 (a) | | | (1,1) (1 row)</code> </pre><br>  ููุฌุฏ ุงูุขู ุตููู ูู ุงููุคุดุฑ ุ ูุดูุฑ ูู ููููุง ุฅูู ุจุฏุงูุฉ ุณูุณูุฉ HOT: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">=&gt; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> index_page(<span class="hljs-string"><span class="hljs-string">'hot_id'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> itemoffset | ctid ------------+------- 1 | (1,1) 2 | (0,1) (2 rows)</code> </pre><br><blockquote style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ุ ุชูุชูุฑ ุงููุซุงุฆู ุชูุฑูุจูุง ุฅูู ูุนูููุงุช ุญูู ุงูุชุญุฏูุซุงุช ูู ุงูุตูุญุฉ ูุชุญุฏูุซุงุช HOT ุ ููุฌุจ ุฃู ุชุจุญุซ ุนู ุฅุฌุงุจุงุช ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ.  ุฃูุตุญู ุฃู ุชุจุฏุฃ ูุน <a href="https://git.postgresql.org/gitweb/%3Fp%3Dpostgresql.git%3Ba%3Dblob%3Bf%3Dsrc/backend/access/heap/README.HOT%3Bhb%3DHEAD">README.HOT</a> . <br></blockquote><br>  <a href="https://habr.com/ru/company/postgrespro/blog/484106/">ุงูุฑุฃ ุนูู</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar483768/">https://habr.com/ru/post/ar483768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar483754/index.html">ููููุฉ ููุงุณ ุชุญุณู ุงููุฑููุ</a></li>
<li><a href="../ar483756/index.html">ูุญู ููุฏู ุทูุจุงุช HTTP ุ ููุญู ุจุฃูุงู (ูููุณ ูุฌูุฉ ูุงุญุฏุฉ)</a></li>
<li><a href="../ar483758/index.html">ูููู ูุฃูุถู 10 ุดุฑูุงุช ูุชุทููุฑ ุชุทุจููุงุช ุงููุงุชู ุงููุญููู ุงููุดุงุฑูุฉ ูู ุนุงู 2020</a></li>
<li><a href="../ar483762/index.html">ุฅุตุฏุงุฑ GitLab 12.6 ูุน ุชุตูููุงุช ุฃูุงู ุงููุดุฑูุน ูููุงุฏ ุงูุฅุตุฏุงุฑ</a></li>
<li><a href="../ar483766/index.html">ุงููุญุงูู ูุฃุฏุงุฉ ูููุฑุตูุฉ ุงูุงุฌุชูุงุนูุฉ ุฃู ููููุงู ุนู ููุซูููุฉ ุงููุนูููุงุช ูู ููุงุนุฏ ุจูุงูุงุช WHOIS</a></li>
<li><a href="../ar483770/index.html">ูุญู ุฃุชูุชุฉ SSL</a></li>
<li><a href="../ar483774/index.html">ููุฎุต ุงูุฃุญุฏุงุซ ููุญุชุฑูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูู ุชูููููุฌูุง ุงููุนูููุงุช ูุดูุฑ ููุงูุฑ 2020</a></li>
<li><a href="../ar483776/index.html">ููุฏูุฉ ูู ุงูุฃุณููุจ ุงูุชูุงุถูู ุงูุฏูุงูู ูู 5 ุฏูุงุฆู</a></li>
<li><a href="../ar483778/index.html">ุฃุณุจูุน ุงูุฃูู 03: ูุจุงุฏุฆ ุจูุฌุฑุจูุฑุช ุงููุณุคููุฉ</a></li>
<li><a href="../ar483780/index.html">ูุง ูู ุงูุฑููุฏ ูููู ูุนููุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>