<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ∞Ô∏è üë∞üèº ‚õ∏Ô∏è Keybase y verdadero TOFU üéôÔ∏è üë©‚Äçüè´ üß¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En los mensajeros con cifrado de extremo a extremo (E2E), el usuario es responsable de sus claves. Cuando los pierde, se ve obligado a restablecer su ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Keybase y verdadero TOFU</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449350/">  En los mensajeros con cifrado de extremo a extremo (E2E), el usuario es responsable de sus claves.  Cuando los pierde, se ve obligado a restablecer su cuenta. <br><br>  Restablecer una cuenta es peligroso.  Borras las claves p√∫blicas y en todas las conversaciones te conviertes en un extra√±o criptogr√°fico.  Debe restaurar su identidad y, en casi todos los casos, esto significa una reuni√≥n personal y una comparaci√≥n de "n√∫meros de seguridad" con cada uno de los contactos.  ¬øCon qu√© frecuencia realmente pasa por esa prueba, que es la √∫nica protecci√≥n de MiTM? <br><br>  Incluso si se toma en serio los n√∫meros de seguridad, ve a muchos socios de chat solo una vez al a√±o en una conferencia, por lo que est√° estancado. <br><a name="habracut"></a><br>
<h1>  Pero esto sucede con poca frecuencia, ¬øverdad? </h1><br>  ¬øCon qu√© frecuencia ocurre un reinicio?  Respuesta: en la mayor√≠a de las aplicaciones de chat E2E todo el tiempo. <br><br>  En estos mensajeros instant√°neos, suelta la criptograf√≠a y simplemente comienza a confiar en el servidor: (1) cada vez que cambia a un nuevo tel√©fono;  (2) cada vez que un interlocutor cambia a un nuevo tel√©fono;  (3) cuando se restablece la configuraci√≥n de f√°brica del tel√©fono;  (4) cuando cualquier interlocutor realiza un restablecimiento a la configuraci√≥n de f√°brica;  (5) cada vez que desinstala y reinstala la aplicaci√≥n, o (6) cuando cualquier persona con la que est√° hablando lo desinstala y lo vuelve a instalar.  Si tiene docenas de contactos, se realizar√° un reinicio cada pocos d√≠as. <br><br>  El restablecimiento ocurre tan regularmente que estas aplicaciones fingen que esto no es un problema: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbe/046/a7f/dbe046a7fde23783eff076ae8a59084a.png"></div><br>  <i>¬°Parece que tenemos una actualizaci√≥n de seguridad!</i>  <i>(Pero no realmente)</i> <br><br><h1>  ¬øEs realmente TOFU? </h1><br>  En criptograf√≠a, el t√©rmino TOFU ("confianza en el primer uso") describe un juego de azar cuando dos partes hablan por primera vez.  En lugar de reunirse en persona, el mediador es responsable de cada lado ... y luego, despu√©s de que las partes se presenten, cada lado monitorea cuidadosamente las claves para asegurarse de que nada haya cambiado.  Si la llave ha cambiado, cada lado emite una alarma. <br><br>  Si la clave del host remoto cambia en SSH en tal situaci√≥n, no "simplemente funcionar√°", sino que se volver√° completamente beligerante: <br><br><blockquote><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ <br> @ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @ <br> @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ <br> <br> IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY! <br> Someone could be eavesdropping on you right now (man-in-the-middle attack)! <br> It is also possible that a host key has just been changed. <br> The fingerprint for the RSA key sent by the remote host is <br> 00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff <br> Please contact your system administrator. <br> Add correct host key in /Users/rmueller/.ssh/known_hosts to get rid of this message. <br> Offending RSA key in /Users/rmueller/.ssh/known_hosts:12 <br> RSA host key for 8.8.8.8 has changed and you have requested strict checking. <br> Host key verification failed.</code> </blockquote> <br>  Aqu√≠ est√° el comportamiento correcto.  Y recuerde: <b>esto no es TOFU si le permite trabajar m√°s lejos con una peque√±a advertencia.</b>  <b>Deber√≠as ver una calavera gigante con huesos cruzados</b> . <br><br>  Por supuesto, estos mensajeros instant√°neos afirmar√°n que todo est√° bien, porque el usuario est√° advertido.  Si quiere, <i>puede</i> verificar los n√∫meros de seguridad.  Por eso no estamos de acuerdo: <br><br><ol><li>  La verificaci√≥n no se realiza porque ocurre con demasiada frecuencia. <br></li><li>  El control apesta. <br></li><li>  Incluso una encuesta superficial de nuestros amigos que est√°n preocupados por la seguridad mostr√≥ que a nadie le preocupa esta prueba. <br></li><li>  As√≠ que solo conf√≠a en el servidor y conf√≠a en los SMS (¬°bueno, bueno!) <b>Una y otra vez</b> . <br></li><li>  Finalmente, estas aplicaciones no deber√≠an funcionar de esta manera.  Especialmente cuando se cambian dispositivos.  Un caso normal t√≠pico puede manejarse sin problemas y de forma segura, y cuanto m√°s rara sea la situaci√≥n, peor deber√≠a verse.  En un minuto, muestre la soluci√≥n Keybase. </li></ol><br><h1>  Deja de llamarlo TOFU </h1><br>  Hay un ataque muy efectivo.  Supongamos que Eve quiere irrumpir en la conversaci√≥n existente de Alice y Bob y ponerse entre ellos.  Alice y Bob han estado en contacto durante muchos a√±os, desde hace mucho tiempo que pasaron TOFU. <br><br>  Eve solo le hace pensar a Alice que Bob compr√≥ un tel√©fono nuevo: <br><br><blockquote>  <b>Bob (Eve):</b> ¬°Oye, oye! <br><br>  <b>Alice: ¬°</b> Yo Bob!  Parece que tienes nuevos n√∫meros de seguridad. <br><br>  <b>Bob (Eve):</b> S√≠, compr√© el iPhone XS, un buen tel√©fono, muy satisfecho con √©l.  Intercambiemos n√∫meros de seguridad en el RWC 2020. Oye, ¬øtienes tu direcci√≥n actual de Caroline?  Quiero sorprenderla mientras estoy en San Francisco. <br><br>  <b>Alice: No</b> puedo comparar, Android 4 life!  S√≠, calle acogedora 555. </blockquote><br>  Por lo tanto, es poco probable que la mayor√≠a de los mensajeros cifrados ganen el cumplimiento de TOFU.  Esto es m√°s como TADA: confianza despu√©s de agregar dispositivos.  Este es un problema real, no ficticio, porque crea la oportunidad de implementaci√≥n maliciosa en una conversaci√≥n preexistente.  En TOFU real, cuando alguien est√© interesado en tu conversaci√≥n, no podr√° infiltrarse en ella.  Con TADA, esto es posible. <br><br>  En los chats grupales, la situaci√≥n es a√∫n peor.  Cuantas m√°s personas participen en el chat, m√°s a menudo se reinstalar√° la cuenta.  En una empresa de solo 20 personas, esto suceder√° aproximadamente cada dos semanas, seg√∫n nuestro c√°lculo.  Y cada persona en la empresa debe conocer a esta persona.  Personalmente  De lo contrario, todo el chat se ve comprometido por un topo o hacker. <br><br><h1>  Soluci√≥n </h1><br>  ¬øExiste una buena soluci√≥n que no implique confianza en servidores de clave privada?  Creemos que existe: soporte real para m√∫ltiples dispositivos.  Esto significa que administra una cadena de dispositivos que representan su identidad.  Cuando recibe un nuevo dispositivo (tel√©fono, computadora port√°til, computadora de escritorio, iPad, etc.), genera su propio par de claves y su dispositivo anterior lo firma.  Si pierde el dispositivo, entonces "b√≥rrelo" de uno de los restantes.  T√©cnicamente, dicha eliminaci√≥n es un recuerdo, y en este caso tambi√©n hay alg√∫n tipo de inversi√≥n clave que ocurre autom√°ticamente. <br><br>  Como resultado, <b>no necesita confiar en el servidor o reunirse en persona cuando el interlocutor o colega recibe un nuevo dispositivo</b> .  Del mismo modo, no es necesario que conf√≠e en el servidor o se re√∫na en persona cuando retire el dispositivo, si no fue el √∫ltimo.  El √∫nico momento en que necesita ver una advertencia es cuando alguien realmente pierde el acceso a todas sus configuraciones.  Y en este caso, ver√° una advertencia seria, como deber√≠a: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b52/c11/c30/b52c11c30705695088a044658f3fb608.png"></div><br>  <i><font color="gray">Especialmente muy feo</font></i> <br><br>  Como resultado, se restablecen y reinstalan muchas menos cuentas.  Hist√≥ricamente, en Keybase, el n√∫mero total de complementos y revisiones de dispositivos es <b>diez veces el</b> n√∫mero de descargas de cuentas (no es necesario que conf√≠e en nuestra palabra, est√° disponible p√∫blicamente en nuestro √°rbol de Merkle).  A diferencia de otros mensajeros, podemos mostrar una advertencia realmente aterradora cuando habla con alguien que recientemente ha reinstalado las llaves. <br><br>  La administraci√≥n de dispositivos es una operaci√≥n de ingenier√≠a compleja que hemos refinado varias veces.  El dispositivo existente firma las claves p√∫blicas del nuevo dispositivo y cifra todos los datos secretos importantes para la clave p√∫blica del nuevo dispositivo.  Esta operaci√≥n debe realizarse r√°pidamente (en un segundo), ya que estamos hablando del rango de atenci√≥n del usuario.  Como resultado, Keybase utiliza una jerarqu√≠a de claves, de modo que al transferir 32 bytes de datos secretos desde un dispositivo antiguo, el nuevo dispositivo puede ver todos los datos criptogr√°ficos de larga duraci√≥n (consulte las preguntas frecuentes a continuaci√≥n para obtener m√°s detalles).  Esto puede parecer un poco sorprendente, pero <i>ese es exactamente el punto de la criptograf√≠a</i> .  No resuelve sus problemas de gesti√≥n de secretos; solo hace que el sistema sea m√°s escalable. <br><br><h1>  La imagen completa de seguridad </h1><br>  Ahora podemos formular cuatro propiedades de seguridad b√°sicas para la aplicaci√≥n Keybase: <br><br><ol><li>  las claves secretas duraderas nunca abandonan los dispositivos en los que se crean <br></li><li>  El soporte completo para m√∫ltiples dispositivos minimiza las ca√≠das de cuentas <br></li><li>  la revocaci√≥n de claves no se puede retrasar o revertir maliciosamente <br></li><li>  secreto directo usando mensajes de tiempo ef√≠mero </li></ol><br>  Los dos primeros parecen entendibles.  Un tercero se vuelve importante en un dise√±o donde el retiro del dispositivo se espera y se considera normal.  El sistema debe tener comprobaciones de que los servidores maliciosos no pueden retrasar las revisiones de dispositivos, sobre lo que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribimos anteriormente</a> . <br><br>  Consulte nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo sobre mensajes ef√≠meros para</a> obtener m√°s informaci√≥n sobre la cuarta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">caracter√≠stica de</a> seguridad. <br><br><h1>  Mucha nueva criptograf√≠a, ¬øest√° todo implementado correctamente? </h1><br>  Keybase nunca antes ha implementado las funciones b√°sicas de seguridad y nunca lo ha descrito en art√≠culos cient√≠ficos.  Tuvimos que inventar algunos <i>protocolos</i> criptogr√°ficos nosotros mismos.  Afortunadamente, hay muchos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i>algoritmos</i> criptogr√°ficos</a> estandarizados y ampliamente utilizados para cualquier situaci√≥n.  Todo nuestro c√≥digo de cliente est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">abierto</a> .  Te√≥ricamente, cualquiera puede encontrar errores de dise√±o o implementaci√≥n.  Pero quer√≠amos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">demostrar la estructura interna</a> y contratamos a la mejor firma de auditor√≠a de seguridad para un an√°lisis completo. <br><br>  Hoy presentamos el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">informe del</a> Grupo NCC y estamos extremadamente alentados por los resultados.  Keybase gast√≥ m√°s de $ 100,000 en auditor√≠a, y el Grupo NCC contrat√≥ expertos en seguridad y criptograf√≠a de alto nivel.  Encontraron dos errores importantes en nuestra implementaci√≥n, y los reparamos r√°pidamente.  Estos errores solo pueden aparecer si nuestros servidores act√∫an de manera maliciosa.  Podemos asegurar que no actuar√°n as√≠, pero no tiene motivos para creernos.  <i>Esa es la cosa!</i> <br><br>  Creemos que el equipo de NCC ha hecho un excelente trabajo.  Respeto por el tiempo que dedicaron a comprender completamente nuestra arquitectura e implementaci√≥n.  Encontraron errores sutiles que pasaron la atenci√≥n de nuestros desarrolladores, aunque recientemente hemos visto esta parte de la base del c√≥digo repetidamente.  Le recomendamos que mire el informe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> o consulte nuestras Preguntas frecuentes. <br><br><h1>  FAQ </h1><br><h3>  ¬øC√≥mo te atreves a atacar un producto XYZ? </h3><br>  Ya hemos eliminado las referencias a productos espec√≠ficos del art√≠culo. <br><br><h3>  Que mas </h3><br>  Estamos orgullosos de que Keybase no requiera n√∫meros de tel√©fono y pueda verificar criptogr√°ficamente los identificadores de Twitter, HackerNews, Reddit y Github si conoce a alguien. <br><br>  Y ... muy pronto ... habr√° apoyo para Mastodon. <br><br><h3>  ¬øQu√© pasa con los ataques de redirecci√≥n de tel√©fono? </h3><br>  Muchas aplicaciones son susceptibles a ataques de redireccionamiento.  Eve entra a un quiosco en un centro comercial y convence a Bob, el operador de telefon√≠a m√≥vil, de que env√≠e el n√∫mero de tel√©fono de Bob a su dispositivo.  O ella convence al representante por tel√©fono.  Ahora, Eve puede autenticarse en los servidores de mensajer√≠a, alegando que ella es Bob.  El resultado parece que nuestro ejemplo de Alice, Bob y Eve es m√°s alto, pero Eve no necesita penetrar en ning√∫n servidor.  Algunas aplicaciones ofrecen "bloqueo de registro" para protegerse contra este ataque, pero por defecto son molestas. <br><br><h3>  ¬øEscuch√© que Keybase env√≠a algunas claves privadas al servidor? </h3><br>  En los primeros d√≠as (2014 y principios de 2015), Keybase funcionaba como una aplicaci√≥n web PGP, y el usuario pod√≠a elegir la funci√≥n para almacenar sus claves PGP privadas en nuestros servidores, cifradas con frases de contrase√±a (que Keybase no conoc√≠a). <br><br>  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">septiembre de 2015,</a> presentamos el nuevo modelo Keybase.  Las claves PGP nunca se usan (y nunca se usan) en el chat de Keybase o en el sistema de archivos. <br><br><h3>  ¬øC√≥mo aparecen instant√°neamente los viejos chats en los nuevos tel√©fonos? </h3><br>  En algunas otras aplicaciones, los dispositivos nuevos no ven mensajes antiguos, ya que sincronizar mensajes antiguos a trav√©s del servidor es contrario al secreto directo.  La aplicaci√≥n Keybase le permite designar ciertos mensajes, o conversaciones completas, como "ef√≠meras".  Se destruyen despu√©s de un cierto tiempo y se cifran dos veces: una usando claves de cifrado de chat de larga duraci√≥n, y la otra utilizando claves ef√≠meras que cambian con frecuencia.  Por lo tanto, los mensajes ef√≠meros proporcionan secreto directo y no pueden sincronizarse entre tel√©fonos. <br><br>  Los mensajes no ef√≠meros permanecen hasta que el usuario los elimina expl√≠citamente y sincroniza E2E con los nuevos dispositivos de estilo Slack, ¬°solo con cifrado!  Por lo tanto, cuando agrega a alguien a un equipo o agrega un nuevo dispositivo para usted, los mensajes se desbloquean. <br><br>  M√°s sobre sincronizaci√≥n en el siguiente p√°rrafo. <br><br><h3>  ¬°Cu√©ntanos sobre los PUK! </h3><br>  Hace dos a√±os, presentamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">claves para usuarios (PUK)</a> .  La mitad p√∫blica del PUK se anuncia en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sigchain</a> p√∫blico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de los</a> usuarios.  La mitad secreta se cifra para la clave p√∫blica de cada dispositivo.  Cuando Alice est√° preparando un nuevo dispositivo, su antiguo dispositivo conoce la mitad secreta de su PUK y la clave p√∫blica del nuevo dispositivo.  Cifra la mitad secreta del PUK para la clave p√∫blica del nuevo dispositivo, y el nuevo dispositivo descarga este texto cifrado a trav√©s del servidor.  El nuevo dispositivo descifra el PUK y puede acceder de inmediato a todos los mensajes de chat de larga duraci√≥n. <br><br>  Cada vez que Alice recuerda un dispositivo, cambia su PUK, de modo que todos sus dispositivos, excepto el m√°s reciente, reciben un nuevo PUK. <br><br>  Este esquema de sincronizaci√≥n es fundamentalmente diferente del anterior sistema Keybase PGP.  Aqu√≠, todas las claves involucradas tienen 32 bytes de entrop√≠a verdadera; no se rompen con fuerza bruta en caso de un pirateo del servidor.  Es cierto, si el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Curve25519</a> o el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PRNG</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de Go</a> est√°n rotos, entonces todo se rompe.  Pero la sincronizaci√≥n PUK no hace otras suposiciones criptogr√°ficas significativas. <br><br><h3>  ¬øQu√© pasa con los chats de grupos grandes? </h3><br>  <b>Los</b> grupos <b>tL; dr</b> tienen sus propias cadenas de firmas auditadas para cambiar roles, agregar y eliminar miembros. <br><br>  Los investigadores de seguridad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribieron</a> sobre ataques fantasmas de usuarios en chats grupales.  Si los clientes de los usuarios no pueden verificar criptogr√°ficamente la pertenencia al grupo, los servidores maliciosos pueden incrustar spyware y moles en los chats grupales.  Keybase tiene un sistema muy confiable en forma de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funci√≥n especial de grupos</a> , sobre lo que escribiremos en el futuro. <br><br><h3>  ¬øPuedes hablar sobre NCC-KB2018-001? </h3><br>  Creemos que este error es el hallazgo m√°s significativo de la auditor√≠a de NCC.  Keybase utiliza activamente estructuras de datos inmutables para proteger contra la ambig√ºedad del servidor de solo agregar.  En el caso de un error, un servidor honesto puede comenzar a evadir: "Te dije A antes, pero ocurri√≥ un error, quise decir B".  Pero nuestros clientes tienen una pol√≠tica com√∫n de no permitir al servidor tal flexibilidad: tienen <a href="">excepciones codificadas</a> en caso de errores. <br><br>  Recientemente, tambi√©n presentamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sigchain V2</a> : este sistema resuelve los problemas de escalabilidad que no predecimos correctamente en la primera versi√≥n.  Ahora los clientes son m√°s econ√≥micos con los datos criptogr√°ficos que obtienen del servidor, ya que reciben solo una firma de la cola de la cadena de firmas, en lugar de la firma de cada enlace intermedio.  Por lo tanto, los clientes han perdido la oportunidad de ir en ciclos en la b√∫squeda de un hash de firma espec√≠fico, pero anteriormente utilizamos estos hash para buscar enlaces de cadena defectuosos en esta lista de excepciones codificadas.  Nos est√°bamos preparando para el lanzamiento de Sigchain V2, olvidando este detalle oculto bajo varias capas de abstracciones, por lo que el sistema simplemente confi√≥ en el campo desde la respuesta del servidor. <br><br>  Una vez que el NCC descubri√≥ este error, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soluci√≥n</a> fue lo suficientemente simple: buscando excepciones codificadas con un hash de chainlink en lugar de un hash de chainlink.  El cliente siempre puede calcular directamente estos hashes. <br><br>  Tambi√©n podemos atribuir este error a la complejidad adicional requerida para soportar Sigchain V1 y Sigchain V2 simult√°neamente.  Los clientes modernos escriben enlaces Sigchain V2, pero todos los clientes deben admitir enlaces v1 heredados por un tiempo ilimitado.  Recuerde que los clientes firman enlaces con sus claves privadas para cada dispositivo.  No podemos coordinar a todos los clientes que sobrescriban datos hist√≥ricos en un per√≠odo de tiempo razonable, ya que estos clientes pueden simplemente estar desconectados. <br><br><h3>  ¬øPuedes hablar sobre NCC-KB2018-004? </h3><br>  Al igual que en 001 (ver arriba), nos decepcion√≥ una cierta combinaci√≥n de soporte simult√°neo para soluciones obsoletas y optimizaci√≥n, lo que parec√≠a importante a medida que gan√°bamos m√°s experiencia trabajando con el sistema. <br><br>  En Sigchain V2, reducimos el tama√±o de las cadenas en bytes para reducir el ancho de banda necesario para buscar usuarios.  Este ahorro es especialmente importante en los tel√©fonos m√≥viles.  Por lo tanto, codificamos enlaces de cadena con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MessagePack</a> , no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JSON</a> , lo que ofrece buenos ahorros.  A su vez, los clientes firman y verifican las firmas en estas cadenas.  Los investigadores de NCC han encontrado formas dif√≠ciles de crear "firmas" que se parecen a JSON y MessagePack al mismo tiempo, lo que lleva a un conflicto.  Involuntariamente presentamos esta ambig√ºedad de decodificaci√≥n durante la optimizaci√≥n cuando cambiamos los analizadores JSON del analizador Go est√°ndar a uno m√°s eficiente.  Este analizador r√°pido omiti√≥ silenciosamente un mont√≥n de basura antes de encontrar el JSON real, que inclu√≠a esta funci√≥n de ataque pol√≠glota.  El error se corrige mediante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una verificaci√≥n de entrada adicional</a> . <br><br>  En Sigchain V2, tambi√©n aceptamos la sugerencia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adam Langley de</a> que los firmantes preceden sus paquetes con firmas por el prefijo de la l√≠nea de contexto y el byte <code>\0</code> para que los verificadores no se confundan con las intenciones del firmante.  En el lado de verificaci√≥n de esta idea de prefijo de contexto, hubo errores que podr√≠an conducir a otros ataques pol√≠glotas.  R√°pidamente arreglamos esta falla <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con una lista blanca</a> . <br><br>  Despu√©s de corregir ambos errores, el servidor rechaza las cargas maliciosas del ataque pol√≠glota, por lo que la explotaci√≥n de estas vulnerabilidades solo es posible con la ayuda de un servidor comprometido. <br><br><h3>  ¬øD√≥nde est√° la documentaci√≥n? </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://keybase.io/docs</a> <br><br>  En los pr√≥ximos meses, dedicaremos m√°s tiempo a trabajar en la documentaci√≥n. <br><br><h3>  Puede proporcionar m√°s informaci√≥n sobre esta declaraci√≥n de NCC: "Sin embargo, un atacante puede negarse a actualizar sigchain o revertir la cadena de un usuario a un estado anterior truncando los enlaces posteriores en la cadena" </h3><br>  Keybase hace un uso extensivo de estructuras de datos p√∫blicos inmutables de solo agregado que obligan a la infraestructura del servidor a capturar una representaci√≥n real de los identificadores de usuario.  Podemos garantizar la retirada de dispositivos y la eliminaci√≥n de los miembros del grupo de tal manera que un servidor comprometido no pueda retroceder.  Si el servidor decide mostrar una vista inconsistente, esta desviaci√≥n se convierte en parte del registro p√∫blico inmutable.  Los clientes de Keybase o un auditor externo pueden detectar un desajuste en cualquier momento despu√©s del ataque.  Creemos que estas garant√≠as superan con creces las garant√≠as de los productos de la competencia y son casi √≥ptimas, teniendo en cuenta las limitaciones pr√°cticas de los tel√©fonos m√≥viles y los clientes con potencia inform√°tica limitada. <br><br>  En pocas palabras, Keybase no puede inventar las firmas de otra persona.  Como cualquier servidor, puede contener datos.  Pero nuestro √°rbol Merkle transparente est√° dise√±ado para almacenarlos durante un per√≠odo de tiempo muy corto, y siempre es reconocible. <br><br><h3>  ¬øC√≥mo maneja Keybase los reinicios de cuenta? </h3><br>  Cuando los usuarios de Keybase realmente pierden todos sus dispositivos (en lugar de agregar nuevos o perder algunos), deben reiniciar.  Despu√©s de restablecer la cuenta, el usuario es b√°sicamente nuevo, pero tiene el mismo nombre de usuario.  No puede firmar la "instrucci√≥n de reinicio" porque ha perdido todas sus claves.  Entonces, en cambio, el servidor Keybase confirma la declaraci√≥n no borrable en el √°rbol Merkle, lo que significa restablecer.  Los clientes fuerzan la imposibilidad de revertir estas instrucciones.  En un art√≠culo futuro, se describir√°n en detalle mecanismos espec√≠ficos. <br><br>  Este usuario tendr√° que volver a agregar verificaciones de identidad (Twitter, Github, lo que sea) con las nuevas claves. <br><br><h3>  ¬øPuede un servidor simplemente intercambiar la hoja del √°rbol Merkle de alguien para anunciar un conjunto de claves completamente diferente? </h3><br>  Los autores de NCC est√°n considerando un servidor Keybase hostil que cambia completamente la hoja del √°rbol de Merkle, reemplazando el verdadero conjunto de claves de Bob con un conjunto falso completamente nuevo.  Un servidor atacante tiene dos opciones.  Primero, puede bifurcar el estado del mundo colocando a Bob en una bifurcaci√≥n, y a los que quiere enga√±ar en otra.  En segundo lugar, puede "enga√±ar" al publicar una versi√≥n del √°rbol de Merkle con el juego correcto de llaves Bob y otras versiones con un juego falso.  Los usuarios que interact√∫an regularmente con Bob descubrir√°n este ataque, ya que verificar√°n que las versiones descargadas previamente del historial de Bob son prefijos v√°lidos de las nuevas versiones que descargan del servidor.  Los validadores de terceros que analizan todas las actualizaciones de Keybase tambi√©n notar√°n este ataque.  Si escribe un validador de Keybase de terceros que nos gusta, podemos ofrecerle una recompensa significativa.  Consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>max</code></a> en Keybase.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De lo contrario, esperamos planificar pronto la creaci√≥n de un validador aut√≥nomo. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øPuedes creer lo que le√≠ hasta el final? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øLeer o simplemente desplazarse hacia abajo? </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449350/">https://habr.com/ru/post/449350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449340/index.html">Bloque or√°culo basado en or√°culo aleatorio basado en firma digital</a></li>
<li><a href="../449342/index.html">Or√°culo aleatorio basado en la firma digital blockchain</a></li>
<li><a href="../449344/index.html">Kodim - pizza</a></li>
<li><a href="../449346/index.html">MODX Digest # 4 (8 al 22 de abril de 2019)</a></li>
<li><a href="../449348/index.html">Buildroot - parte 2. Crear la configuraci√≥n de su placa; aplicaci√≥n de √°rbol externo, rootfs-overlay, scripts posteriores a la compilaci√≥n</a></li>
<li><a href="../449352/index.html">C√≥mo construimos el monitoreo en Prometheus, Clickhouse y ELK</a></li>
<li><a href="../449356/index.html">Procesos de negocio. Extracci√≥n del modelo BPMN del documento. Parte 1</a></li>
<li><a href="../449358/index.html">Nuevas fronteras en f√≠sica</a></li>
<li><a href="../449360/index.html">Microsoft ha adaptado la realidad virtual para personas con discapacidad visual</a></li>
<li><a href="../449362/index.html">UPS de atenci√≥n m√©dica: experiencia en salud de Delta Electronics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>