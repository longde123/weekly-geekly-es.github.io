<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’‡ğŸ¾ ğŸˆ ğŸŒŠ VVVVVV ??? VVVVVV !!! :) ğŸ€ ğŸ¥ ğŸ¤¶ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¦‚æœæ‚¨æ­£åœ¨é˜…è¯»æœ¬æ–‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ‚¨è®¤ä¸ºæ ‡é¢˜æœ‰è¯¯ï¼Œæˆ–è€…æ‚¨çœ‹åˆ°äº†ç†Ÿæ‚‰çš„è®¡ç®—æœºæ¸¸æˆçš„åç§°ã€‚ VVVVVVæ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„å¹³å°æ¸¸æˆï¼Œå…¶ä»¤äººæ„‰æ‚¦çš„å¤–éƒ¨ç®€æ´æ€§å’Œä»¤äººæ„‰æ‚¦çš„å†…éƒ¨å¤æ‚æ€§å¸å¼•äº†è®¸å¤šç©å®¶çš„å¿ƒã€‚ å‡ å¤©å‰ï¼ŒVVVVVVè¯ç”Ÿäº†10å¹´ï¼Œè¯¥æ¸¸æˆçš„ä½œè€…Terry Cavanaghé€šè¿‡å‘å¸ƒå…¶æºä»£ç åº†ç¥äº†è¿™ä¸ªå‡æœŸã€‚ å®ƒéšè—äº†...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VVVVVV ??? VVVVVV !!! :)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/484388/"> å¦‚æœæ‚¨æ­£åœ¨é˜…è¯»æœ¬æ–‡ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ‚¨è®¤ä¸ºæ ‡é¢˜æœ‰è¯¯ï¼Œæˆ–è€…æ‚¨çœ‹åˆ°äº†ç†Ÿæ‚‰çš„è®¡ç®—æœºæ¸¸æˆçš„åç§°ã€‚  VVVVVVæ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„å¹³å°æ¸¸æˆï¼Œå…¶ä»¤äººæ„‰æ‚¦çš„å¤–éƒ¨ç®€æ´æ€§å’Œä»¤äººæ„‰æ‚¦çš„å†…éƒ¨å¤æ‚æ€§å¸å¼•äº†è®¸å¤šç©å®¶çš„å¿ƒã€‚ å‡ å¤©å‰ï¼ŒVVVVVVè¯ç”Ÿäº†10å¹´ï¼Œè¯¥æ¸¸æˆçš„ä½œè€…Terry Cavanaghé€šè¿‡å‘å¸ƒå…¶æºä»£ç åº†ç¥äº†è¿™ä¸ªå‡æœŸã€‚ å®ƒéšè—äº†ä»€ä¹ˆä»¤äººéš¾ä»¥ç½®ä¿¡çš„ä¸œè¥¿ï¼Ÿ é˜…è¯»æœ¬æ–‡çš„ç­”æ¡ˆã€‚ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c8/fdf/72a/0c8fdf72ab45ed2077f8ea957e6b7ea5.png" alt="å›¾1"></div><a name="habracut"></a><br><h2> å¼•è¨€ </h2><br> å“¦ï¼ŒVVVVVV ...æˆ‘è®°å¾—å‘å¸ƒåä¸ä¹…å°±é‡åˆ°äº†å®ƒï¼Œå¹¶ä¸”æ˜¯åƒç´ å¤å¤æ¸¸æˆçš„å¿ å®æ‹¥æŠ¤è€…ï¼Œæˆ‘éå¸¸é«˜å…´å°†å…¶å®‰è£…åœ¨è®¡ç®—æœºä¸Šã€‚ æˆ‘è®°å¾—æˆ‘çš„ç¬¬ä¸€å°è±¡ï¼šâ€œå°±è¿™äº›å—ï¼Ÿ åªæ˜¯åœ¨å¹¿åœºæˆ¿é—´é‡Œè·‘æ¥è·‘å»ï¼Ÿ æˆ‘å½“æ—¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåœ¨ç­‰æˆ‘ã€‚ ä¸€ç¦»å¼€å‡ºå‘åœ°ç‚¹ï¼Œæˆ‘ä¾¿å‘ç°è‡ªå·±èº«å¤„ä¸€ä¸ªå°è€Œåˆæ··ä¹±è€Œåˆå¯ŒèŠ±çš„äºŒç»´ä¸–ç•Œï¼Œé‡Œé¢å……æ»¡äº†æˆ‘æ‰€ä¸çŸ¥é“çš„å¼‚å¸¸æ™¯è§‚å’Œåƒç´ ä¼ªåƒã€‚ <br><br> æˆ‘è¢«æ¸¸æˆè¿·ä½äº†ã€‚ æœ€ç»ˆï¼Œå°½ç®¡é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œä½†æˆ‘è¿˜æ˜¯å®Œå…¨å‡»è´¥äº†æ¸¸æˆï¼Œä¾‹å¦‚ï¼Œå¤æ‚æ€§é«˜ï¼Œå¹¶ç†Ÿç»ƒåœ°è¿ç”¨äº†æ¸¸æˆæ§åˆ¶-ä¸»è§’ä¸ä¼šè·³è·ƒï¼Œä½†èƒ½å¤Ÿé¢ å€’é‡åŠ›çŸ¢é‡çš„æ–¹å‘ã€‚ æˆ‘ä¸çŸ¥é“æˆ‘çš„è§’è‰²å½“æ—¶æ­»äº†å¤šå°‘æ¬¡ï¼Œä½†æˆ‘æ•¢è‚¯å®šæ­»äº¡äººæ•°ä»¥å‡ ç™¾è®¡ã€‚ æ¯•ç«Ÿï¼Œæ¯ä¸ªæ¸¸æˆéƒ½æœ‰å…¶ç‹¬ç‰¹çš„çƒ­æƒ…ï¼š) <br><br> æ— è®ºå¦‚ä½•ï¼Œè®©æˆ‘ä»¬å›åˆ°ä¸º<a href="http://distractionware.com/blog/2020/01/vvvvvv-is-now-open-source/">çºªå¿µæ¸¸æˆå‘¨å¹´çºªå¿µè€Œ</a>å‘å¸ƒçš„æºä»£ç ã€‚ <br><br> ç›®å‰ï¼Œæˆ‘æ˜¯PVS-Studioçš„å¼€å‘äººå‘˜ï¼Œè¯¥äº§å“æ˜¯ç”¨äºCï¼ŒC ++ï¼ŒCï¼ƒå’ŒJavaçš„é™æ€ä»£ç åˆ†æå™¨ã€‚ é™¤äº†ç›´æ¥å¼€å‘å¤–ï¼Œæˆ‘ä»¬è¿˜ä»äº‹äº§å“æ¨å¹¿ã€‚ å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œæœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯æ’°å†™æœ‰å…³æ£€æŸ¥å¼€æºé¡¹ç›®çš„æ–‡ç« ã€‚ æˆ‘ä»¬çš„è¯»è€…å¯ä»¥è·å¾—æœ‰å…³ç¼–ç¨‹ä¸»é¢˜çš„å¸å¼•äººçš„æ–‡ç« ï¼Œå¹¶ä¸”æˆ‘ä»¬æœ‰æœºä¼šå±•ç¤ºPVS-Studioçš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œå½“æˆ‘å¬è¯´VVVVVVæºä»£ç çš„æ‰“å¼€æ—¶ï¼Œæˆ‘åªæ˜¯æ— æ³•è¿‡å»ã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶PVS-Studioåˆ†æä»ªåœ¨VVVVVVä»£ç ä¸­å‘ç°çš„ä¸€äº›æœ‰è¶£çš„é”™è¯¯ï¼Œå¹¶è¯¦ç»†ç ”ç©¶è¿™äº›é”™è¯¯ã€‚ å°†é‡åŠ›çŸ¢é‡æŒ‡å‘ä¸‹æ–¹ï¼Œè®©è‡ªå·±æ„Ÿåˆ°èˆ’é€‚-æˆ‘ä»¬å³å°†å¼€å§‹ï¼ <br><br><h2> åˆ†æä»ªè­¦å‘Šæ¦‚è¿° </h2><br><h3> è­¦å‘Š1 </h3><br>  <a href="https://www.viva64.com/en/w/v512/">V512</a>è°ƒç”¨'sprintf'å‡½æ•°å°†å¯¼è‡´ç¼“å†²åŒº'fileSearch'æº¢å‡ºã€‚  FileSystemUtils.cpp 307 <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_PATH 260 .... void PLATFORM_migrateSaveData(char *output) { char oldLocation[MAX_PATH]; char newLocation[MAX_PATH]; char oldDirectory[MAX_PATH]; char fileSearch[MAX_PATH]; .... </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* Same place, different layout. */</span></span></span><span class="hljs-meta"> strcpy(oldDirectory, output); sprintf(fileSearch, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"%s\\*.vvvvvv"</span></span></span><span class="hljs-meta">, oldDirectory); .... }</span></span></code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œå­—ç¬¦ä¸²<i>fileSearch</i>å’Œ<i>oldDirectory</i>å…·æœ‰ç›¸åŒçš„å¤§å°ï¼š260ä¸ªå­—ç¬¦ã€‚ åœ¨æ ¼å¼å­—ç¬¦ä¸²ï¼ˆç¬¬ä¸‰ä¸ª<i>sprintf</i>å‚æ•°ï¼‰ä¸­å†™å…¥<i>oldDirectory</i>å­—ç¬¦ä¸²çš„å†…å®¹ä¹‹åï¼Œå®ƒå°†çœ‹èµ·æ¥åƒï¼š <br><pre> <code class="cpp hljs">&lt;i&gt;contents_oldDirectory\*.vvvvvv&lt;/i&gt;</code> </pre> <br> è¯¥è¡Œæ¯”<i>oldDirectory</i>çš„åŸå§‹å€¼é•¿9ä¸ªå­—ç¬¦ã€‚ è¿™æ˜¯å°†åœ¨<i>fileSearchä¸­</i>å†™å…¥çš„å­—ç¬¦åºåˆ—ã€‚ å¦‚æœ<i>oldDirectory</i>å­—ç¬¦ä¸²çš„é•¿åº¦å¤§äº251ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ ç»“æœå­—ç¬¦ä¸²å°†é•¿äº<i>fileSearch</i>å¯èƒ½åŒ…å«çš„é•¿åº¦ï¼Œè¿™å°†å¯¼è‡´è¿åæ•°ç»„èŒƒå›´ã€‚  RAMä¸­çš„å“ªäº›æ•°æ®å¯èƒ½ä¼šæŸåï¼Œä»¥åŠå°†å¯¼è‡´ä»€ä¹ˆç»“æœï¼Œè¿™æ˜¯ä¸€ä¸ªåé—®çš„é—®é¢˜ï¼š) <br><br><h3> è­¦å‘Š2 </h3><br>  <a href="https://www.viva64.com/en/w/v519/">V519ä¸º</a> â€œèƒŒæ™¯â€å˜é‡è¿ç»­ä¸¤æ¬¡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š1367ã€1373ã€‚Map.cpp 1373 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> mapclass::loadlevel(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-comment"><span class="hljs-comment">//The Warpzone tmap = warplevel.loadlevel(rx, ry, game, obj); fillcontent(tmap); roomname = warplevel.roomname; tileset = 1; background = 3; // &lt;= dwgfx.rcol = warplevel.rcol; dwgfx.backgrounddrawn = false; warpx = warplevel.warpx; warpy = warplevel.warpy; background = 5; // &lt;= if (warpy) background = 4; if (warpx) background = 3; if (warpx &amp;&amp; warpy) background = 5; break; .... }</span></span></code> </pre> <br> åŒä¸€å˜é‡è¿ç»­ä¸¤æ¬¡åˆ†é…ä¸€ä¸ªå€¼ã€‚ ä½†æ˜¯ï¼Œåœ¨åˆ†é…ä¹‹é—´çš„ä»»ä½•åœ°æ–¹éƒ½ä¸ä¼šä½¿ç”¨æ­¤å˜é‡ã€‚ è¿™å¾ˆå¥‡æ€ªã€‚æ­¤é¡ºåºå¯èƒ½ä¸ä¼šè¿åç¨‹åºçš„é€»è¾‘ï¼Œä½†æ˜¯è¿™æ ·çš„åˆ†é…æœ¬èº«è¡¨æ˜ç¼–å†™ä»£ç æ—¶æœ‰äº›æ··ä¹±ã€‚ å®é™…ä¸Šè¿™æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯-åªæœ‰ä½œè€…æ‰èƒ½ç¡®å®šã€‚ å°½ç®¡åœ¨ä»£ç ä¸­æœ‰æ›´å¤šå…³äºæ­¤é”™è¯¯çš„ç”ŸåŠ¨ç¤ºä¾‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Game::loadquick(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"frames"</span></span>) { frames = atoi(pText); frames = <span class="hljs-number"><span class="hljs-number">0</span></span>; } .... }</code> </pre> <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆæ˜æ˜¾ï¼Œé”™è¯¯éšè—åœ¨é€»è¾‘æˆ–å†—ä½™åˆ†é…ä¸­ã€‚ ä¹Ÿè®¸ï¼Œç¬¬äºŒè¡Œæ˜¯ä¸ºè°ƒè¯•è€Œä¸´æ—¶ç¼–å†™çš„ï¼Œç„¶åè¢«é—å¿˜äº†ã€‚ æ€»è®¡ï¼ŒPVS-Studioé’ˆå¯¹æ­¤ç±»æƒ…å†µå‘å‡ºäº†8æ¡è­¦å‘Šã€‚ <br><br><h3> è­¦å‘Š3 </h3><br> åˆ›å»ºäº†'basic_string'ç±»å‹çš„V808'pKey'å¯¹è±¡ï¼Œä½†æœªä½¿ç”¨ã€‚ ç¼–è¾‘å™¨.cpp 1866 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> editorclass::load(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;_path) { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pElem-&gt;Value())</span></span></span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"edEntities"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (TiXmlElement *edEntityEl = pElem-&gt;FirstChildElement(); edEntityEl; edEntityEl = edEntityEl-&gt;NextSiblingElement()) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(edEntityEl-&gt;Value())</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= //const char* pText = edEntityEl-&gt;GetText() ; if (edEntityEl-&gt;GetText() != NULL) { edentity[i].scriptname = std::string(edEntityEl-&gt;GetText()); } edEntityEl-&gt;QueryIntAttribute("x", &amp;edentity[i].x); edEntityEl-&gt;QueryIntAttribute("y", &amp;edentity[i].y); edEntityEl-&gt;QueryIntAttribute("t", &amp;edentity[i].t); edEntityEl-&gt;QueryIntAttribute("p1", &amp;edentity[i].p1); edEntityEl-&gt;QueryIntAttribute("p2", &amp;edentity[i].p2); edEntityEl-&gt;QueryIntAttribute("p3", &amp;edentity[i].p3); edEntityEl-&gt;QueryIntAttribute("p4", &amp;edentity[i].p4); edEntityEl-&gt;QueryIntAttribute("p5", &amp;edentity[i].p5); edEntityEl-&gt;QueryIntAttribute("p6", &amp;edentity[i].p6); i++; } EditorData::GetInstance().numedentities = i; } .... }</span></span></code> </pre> <br> è¿™æ®µä»£ç å¾ˆå¥‡æ€ªã€‚ åˆ†æå™¨è­¦å‘Šå·²åˆ›å»ºä½†æœªä½¿ç”¨çš„å˜é‡<i>pKey</i> ï¼Œä½†å®é™…ä¸Šï¼Œè¿™ä¸ªé—®é¢˜æ›´æœ‰è¶£ã€‚ æˆ‘æ•…æ„ç”¨ç®­å¤´çªå‡ºæ˜¾ç¤ºè§¦å‘è­¦å‘Šçš„è¡Œï¼Œå› ä¸ºæ­¤å‡½æ•°åŒ…å«å¤šä¸ªåç§°ä¸º<i>pKeyçš„</i>å­—ç¬¦ä¸²å®šä¹‰ã€‚ æ˜¯çš„ï¼Œåœ¨<i>for</i>å¾ªç¯ä¸­å£°æ˜äº†å¦ä¸€ä¸ªè¿™æ ·çš„å˜é‡ã€‚ å®ƒä¸åœ¨å¾ªç¯å¤–éƒ¨å£°æ˜çš„é‚£ä¸ªé‡å ã€‚ <br><br> å› æ­¤ï¼Œå¦‚æœåœ¨<i>for</i>å¾ªç¯å¤–å¼•ç”¨<i>pKey</i>å­—ç¬¦ä¸²çš„å€¼ï¼Œ <i>åˆ™å°†</i>å¾—åˆ°ç­‰äº<i>pElem-&gt; Valueï¼ˆï¼‰çš„å€¼</i> ï¼Œä½†æ˜¯åœ¨å¾ªç¯å†…è¿›è¡Œç›¸åŒæ“ä½œæ—¶ï¼Œå°†å¾—åˆ°ç­‰äº<i>edEntityEl</i>çš„å€¼<i>-&gt;å€¼ï¼ˆï¼‰</i> ã€‚ é‡å çš„åç§°æ˜¯ä¸€ä¸ªç›¸å½“ç²—ç•¥çš„é”™è¯¯ï¼Œåœ¨ä»£ç æ£€æŸ¥è¿‡ç¨‹ä¸­å¯èƒ½å¾ˆéš¾è‡ªè¡Œæ‰¾åˆ°ã€‚ <br><br><h3> è­¦å‘Š4 </h3><br>  <a href="https://www.viva64.com/en/w/v805/">V805</a>æ€§èƒ½<a href="https://www.viva64.com/en/w/v805/">ä¸‹é™</a> ã€‚ ä½¿ç”¨'strlenï¼ˆstrï¼‰&gt; 0'æ„é€ æ¥è¯†åˆ«ç©ºå­—ç¬¦ä¸²æ•ˆç‡ä¸é«˜ã€‚ ä¸€ç§æ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯æ£€æŸ¥ï¼šstr [0]ï¼='\ 0'ã€‚ ç¬¬1604ç«  <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *prefDir = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PHYSFS_getPrefDir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *org, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *app)</span></span></span><span class="hljs-function"> </span></span>{ .... assert(<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(prefDir) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefDir; } <span class="hljs-comment"><span class="hljs-comment">/* PHYSFS_getPrefDir */</span></span></code> </pre> <br> åˆ†æä»ªå‘ç°äº†å¯èƒ½è¿›è¡Œå¾®ä¼˜åŒ–çš„ç‰‡æ®µã€‚ å®ƒä½¿ç”¨<i>strlen</i>å‡½æ•°æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚ æ­¤å‡½æ•°éå†æ‰€æœ‰å­—ç¬¦ä¸²å…ƒç´ ï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªå­—ç¬¦ä¸²å…ƒç´ æ˜¯å¦ä¸ºç©ºç»ˆæ­¢ç¬¦ï¼ˆ'\ 0'ï¼‰ã€‚ å¦‚æœæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œåˆ™å°†å…¶æ¯ä¸ªå­—ç¬¦ä¸ä¸€ä¸ªç©ºç»ˆæ­¢ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚ <br><br> ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºå³å¯ï¼ æ‚¨éœ€è¦åšçš„å°±æ˜¯æ‰¾å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å­—ç¬¦æ˜¯å¦ä¸ºç»ˆç«¯nullã€‚ å› æ­¤ï¼Œè¦ä¼˜åŒ–æ–­è¨€ä¸­çš„æ­¤æ£€æŸ¥ï¼Œå€¼å¾—ç¼–å†™ï¼š <br><br><pre> <code class="cpp hljs">str[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-string"><span class="hljs-string">'\0'</span></span></code> </pre> <br> é‚£å°±æ˜¯åˆ†æä»ªç»™æˆ‘ä»¬çš„å»ºè®®ã€‚ å½“ç„¶ï¼Œå¯¹strlenå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨<i>assert</i>å®çš„æ¡ä»¶ä¸‹è¿›è¡Œçš„ï¼Œå› æ­¤åªèƒ½åœ¨è°ƒè¯•é€Ÿåº¦ä¸å¤ªé‡è¦çš„è°ƒè¯•ç‰ˆæœ¬ä¸­æ‰§è¡Œã€‚ åœ¨å‘è¡Œç‰ˆä¸­ï¼Œå‡½æ•°å’Œä»£ç çš„è°ƒç”¨å°†å¿«é€Ÿæ‰§è¡Œã€‚ å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯æƒ³è¯æ˜æˆ‘ä»¬çš„åˆ†æä»ªåœ¨å¾®è§‚ä¼˜åŒ–æ–¹é¢å¯ä»¥æå‡ºä»€ä¹ˆå»ºè®®ã€‚ <br><br><h3> è­¦å‘Š5 </h3><br> ä¸ºäº†æ¼”ç¤ºå¦ä¸€ä¸ªé”™è¯¯çš„æœ¬è´¨ï¼Œæˆ‘å¿…é¡»åœ¨æ­¤å¤„å¼•ç”¨ä¸¤ä¸ªä»£ç ç‰‡æ®µï¼š <i>entclass</i>ç±»å£°æ˜åŠå…¶æ„é€ å‡½æ•°ã€‚ è®©æˆ‘ä»¬ä»å£°æ˜å¼€å§‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">entclass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: entclass(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outside</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-comment"><span class="hljs-comment">//Fundamentals bool active, invis; int type, size, tile, rule; int state, statedelay; int behave, animate; float para; int life, colour; //Position and velocity int oldxp, oldyp; float ax, ay, vx, vy; int cx, cy, w, h; float newxp, newyp; bool isplatform; int x1, y1, x2, y2; //Collision Rules int onentity; bool harmful; int onwall, onxwall, onywall; //Platforming specific bool jumping; bool gravity; int onground, onroof; int jumpframe; //Animation int framedelay, drawframe, walkingframe, dir, actionframe; int yp; int xp; };</span></span></code> </pre> <br> è¯¥ç±»çš„æ„é€ å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="cpp hljs">entclass::entclass() { clear(); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> entclass::clear() { <span class="hljs-comment"><span class="hljs-comment">// Set all values to a default, // required for creating a new entity active = false; invis = false; type = 0; size = 0; tile = 0; rule = 0; state = 0; statedelay = 0; life = 0; colour = 0; para = 0; behave = 0; animate = 0; xp = 0; yp = 0; ax = 0; ay = 0; vx = 0; vy = 0; w = 16; h = 16; cx = 0; cy = 0; newxp = 0; newyp = 0; x1 = 0; y1 = 0; x2 = 320; y2 = 240; jumping = false; gravity = false; onground = 0; onroof = 0; jumpframe = 0; onentity = 0; harmful = false; onwall = 0; onxwall = 0; onywall = 0; isplatform = false; framedelay = 0; drawframe = 0; walkingframe = 0; dir = 0; actionframe = 0; }</span></span></code> </pre> <br> å­—æ®µå¾ˆå¤šï¼Œä½ ä¸è¯´å—ï¼Ÿ éš¾æ€ªPVS-Studioå‘å‡ºäº†ä¸€ä¸ªè­¦å‘Šè­¦å‘Šï¼Œéšè—åœ¨è¿™é‡Œï¼š <br><br>  <a href="https://www.viva64.com/en/w/v730/">V730</a>å¯èƒ½å¹¶éæ‰€æœ‰ç±»çš„æˆå‘˜éƒ½åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ã€‚ è€ƒè™‘æ£€æŸ¥ï¼šoldxpï¼Œoldypã€‚  Ent.cpp 3 <br><br> å¦‚æ‚¨æ‰€è§ï¼Œè¿™ä¹ˆé•¿çš„åˆ—è¡¨ä¸­ä¸¢å¤±äº†ä¸¤ä¸ªç±»å­—æ®µåˆå§‹åŒ–ã€‚ ç»“æœï¼Œå®ƒä»¬çš„å€¼ä¿æŒæœªå®šä¹‰çŠ¶æ€ï¼Œå› æ­¤å®ƒä»¬å¯èƒ½ä¼šåœ¨ç¨‹åºçš„å…¶ä»–ä½ç½®è¢«é”™è¯¯åœ°è¯»å–å’Œä½¿ç”¨ã€‚ ä»…é€šè¿‡æ£€æŸ¥å°±å¾ˆéš¾å‘ç°è¿™ç§é”™è¯¯ã€‚ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/983/5f3/1be/9835f31be343f47654d9dd80fc159472.png" alt="å›¾4"></div><br><br><h3> è­¦å‘Š6 </h3><br> çœ‹ä¸‹é¢çš„ä»£ç ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> mapclass::loadlevel(....) { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; tmap; .... tmap = otherlevel.loadlevel(rx, ry, game, obj); fillcontent(tmap); .... <span class="hljs-comment"><span class="hljs-comment">// The tmap vector gets changed again many times. }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://www.viva64.com/en/w/v688/">V688'tmap</a> 'å±€éƒ¨å˜é‡ä¸ä¸€ä¸ªç±»æˆå‘˜å…·æœ‰ç›¸åŒçš„åç§°ï¼Œè¿™å¯èƒ½å¯¼è‡´æ··ä¹±ã€‚ ç¬¬1192ç«  <br><br> ç¡®å®ï¼Œåœ¨<i>mapclass</i>ç±»å†…éƒ¨ï¼Œæ‚¨å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°å…·æœ‰ç›¸åŒåç§°çš„ç›¸åŒå‘é‡ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mapclass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; roomdeaths; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; roomdeathsfinal; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; areamap; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; contents; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; explored; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; vmult; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; tmap; <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... };</span></span></code> </pre> <br> ä¸å¹¸çš„æ˜¯ï¼Œå‡½æ•°å†…éƒ¨ç›¸åŒåç§°çš„çŸ¢é‡å£°æ˜ä½¿åœ¨ç±»ä¸­å£°æ˜çš„çŸ¢é‡ä¸å¯è§ã€‚ äº‹å®è¯æ˜ï¼Œä»…åœ¨<i>loadlevel</i>å‡½æ•°å†…éƒ¨æ›´æ”¹äº†<i>tmap</i>å‘é‡ã€‚ åœ¨ç±»ä¸­å£°æ˜çš„å‘é‡ä¿æŒä¸å˜ï¼ <br><br> æœ‰è¶£çš„æ˜¯ï¼ŒPVS-Studioå·²ç»æ‰¾åˆ°äº†20ä¸ªè¿™æ ·çš„ä»£ç ç‰‡æ®µï¼ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸å·²è¢«ä¸´æ—¶å£°æ˜ä¸ºç±»æˆå‘˜çš„ä¸´æ—¶å˜é‡æœ‰å…³ã€‚ æ¸¸æˆä½œè€…ï¼ˆåŠå…¶å”¯ä¸€çš„å¼€å‘äººå‘˜ï¼‰å†™é“ï¼Œè‡ªå·±æ›¾ç»æœ‰è¿™ç§ä¸è‰¯ä¹ æƒ¯ã€‚ æ‚¨å¯ä»¥åœ¨æ–‡ç« ä¸­é˜…è¯»æœ‰å…³æ­¤å†…å®¹çš„é“¾æ¥-æœ¬æ–‡å¼€å¤´æä¾›äº†é“¾æ¥ã€‚ <br><br> ä»–è¿˜æŒ‡å‡ºï¼Œæ­¤ç±»åç§°å¯¼è‡´äº†éš¾ä»¥å‘ç°çš„æœ‰å®³é”™è¯¯ã€‚ å—¯ï¼Œè¿™æ ·çš„é”™è¯¯å¯èƒ½ç¡®å®å…·æœ‰ç ´åæ€§ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä½¿ç”¨é™æ€åˆ†æï¼Œåˆ™æ•è·å®ƒä»¬çš„éš¾åº¦å°†é™ä½ï¼š) <br><br><h3> è­¦å‘Š7 </h3><br>  <a href="https://www.viva64.com/en/w/v601/">V601</a>æ•´æ•°ç±»å‹éšå¼è½¬æ¢ä¸ºcharç±»å‹ã€‚ æ¸¸æˆ.cpp 4997 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Game::loadquick(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"totalflips"</span></span>) { totalflips = atoi(pText); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"hardestroom"</span></span>) { hardestroom = atoi(pText); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } else if (pKey == "hardestroomdeaths") { hardestroomdeaths = atoi(pText); } .... }</span></span></code> </pre> <br> è¦äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ç»™å®šéƒ¨åˆ†ä¸­çš„å˜é‡å®šä¹‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//Some stats: int totalflips; std::string hardestroom; int hardestroomdeaths;</span></span></code> </pre> <br>  <i>totalflips</i>å’Œ<i>hardestroomdeaths</i>å˜é‡æ˜¯æ•´æ•°ï¼Œå› æ­¤ä¸ºå…¶åˆ†é…<i>atoi</i>å‡½æ•°çš„ç»“æœæ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä¸º<i>std :: string</i>åˆ†é…ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ ä»è¯­è¨€çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ç§åˆ†é…æ˜¯æœ‰æ•ˆçš„ã€‚ ç»“æœï¼Œä¸æ¸…æ¥šçš„å€¼å°†è¢«å†™å…¥<i>hardestroom</i>å˜é‡ï¼ <br><br><h3> è­¦å‘Š8 </h3><br>  <a href="https://www.viva64.com/en/w/v1004/">V1004</a>åœ¨å¯¹nullptrè¿›è¡Œäº†éªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†â€œ pElemâ€æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š1739ã€1744ã€‚editor.cpp 1744 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> editorclass::load(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;_path) { .... <span class="hljs-function"><span class="hljs-function">TiXmlHandle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hDoc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;doc)</span></span></span></span>; TiXmlElement *pElem; <span class="hljs-function"><span class="hljs-function">TiXmlHandle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hRoot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; version = <span class="hljs-number"><span class="hljs-number">0</span></span>; { pElem = hDoc.FirstChildElement().Element(); <span class="hljs-comment"><span class="hljs-comment">// should always have a valid root // but handle gracefully if it does if (!pElem) { printf("No valid root! Corrupt level file?\n"); } pElem-&gt;QueryIntAttribute("version", &amp;version); // &lt;= // save this for later hRoot = TiXmlHandle(pElem); } .... }</span></span></code> </pre> <br> åˆ†æå™¨è­¦å‘Šåœ¨æ£€æŸ¥<i>nullptr</i>ä¹‹åç«‹å³ä¸å®‰å…¨åœ°ä½¿ç”¨<i>pElem</i>æŒ‡é’ˆã€‚ ä¸ºäº†ç¡®ä¿åˆ†æå™¨æ­£ç¡®ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹<i>Elementï¼ˆï¼‰</i>å‡½æ•°çš„å®šä¹‰ï¼Œè¯¥å‡½æ•°è¿”å›è¿”å›å€¼çš„å€¼ï¼Œè¯¥å€¼<i>ä¾æ¬¡</i>åˆå§‹åŒ–<i>pElem</i> poiterï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** @deprecated use ToElement. Return the handle as a TiXmlElement. This may return null. */</span></span> <span class="hljs-function"><span class="hljs-function">TiXmlElement *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Element</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ToElement(); }</code> </pre> <br> ä»æ³¨é‡Šä¸­å¯ä»¥çœ‹å‡ºï¼Œè¯¥å‡½æ•°å¯èƒ½è¿”å›<i>null</i> ã€‚ <br><br> ç°åœ¨æƒ³è±¡ä¸€ä¸‹å®ƒç¡®å®å‘ç”Ÿäº†ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ äº‹å®æ˜¯è¿™ç§æƒ…å†µä¸ä¼šä»¥ä»»ä½•æ–¹å¼å¤„ç†ã€‚ æ˜¯çš„ï¼Œå°†å‡ºç°ä¸€æ¡æ¶ˆæ¯ï¼ŒæŒ‡å‡ºå‘ç”Ÿäº†é—®é¢˜ï¼Œä½†æ˜¯é”™è¯¯çš„æŒ‡é’ˆå°†ä»…åœ¨ä¸‹é¢çš„ä¸€è¡Œä¸­è¢«å–æ¶ˆå¼•ç”¨ã€‚ è¿™ç§å–æ¶ˆå¼•ç”¨å°†å¯¼è‡´ç¨‹åºå´©æºƒæˆ–ä¸ç¡®å®šçš„è¡Œä¸ºã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é”™è¯¯ã€‚ <br><br><h3> è­¦å‘Š9 </h3><br> æ­¤ä»£ç æ®µè§¦å‘äº†å››ä¸ªPVS-Studioåˆ†æä»ªè­¦å‘Šï¼š <br><br><ul><li>  <a href="https://www.viva64.com/en/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šx&gt; =0ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/en/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šy&gt; =0ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/en/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šx &lt;40ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/en/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šy &lt;30ã€‚editor.cpp 1137 </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> editorclass::at( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(<span class="hljs-number"><span class="hljs-number">0</span></span>,y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(x,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&gt;=<span class="hljs-number"><span class="hljs-number">40</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(<span class="hljs-number"><span class="hljs-number">39</span></span>,y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y&gt;=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(x,<span class="hljs-number"><span class="hljs-number">29</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; y&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; x&lt;<span class="hljs-number"><span class="hljs-number">40</span></span> &amp;&amp; y&lt;<span class="hljs-number"><span class="hljs-number">30</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contents[x+(levx*<span class="hljs-number"><span class="hljs-number">40</span></span>)+vmult[y+(levy*<span class="hljs-number"><span class="hljs-number">30</span></span>)]]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br> æ‰€æœ‰è­¦å‘Šå‡ä¸æœ€åçš„<i>if</i>è¯­å¥æœ‰å…³ã€‚ é—®é¢˜åœ¨äºåœ¨å…¶ä¸­æ‰§è¡Œçš„æ‰€æœ‰å››ä¸ªæ£€æŸ¥å°†å§‹ç»ˆè¿”å›<i>true</i> ã€‚ æˆ‘ä¸ä¼šè¯´è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é”™è¯¯ï¼Œä½†è¿™å¾ˆæœ‰è¶£ã€‚ ä½œè€…å†³å®šè®¤çœŸå¯¹å¾…æ­¤åŠŸèƒ½ï¼Œä»¥é˜²ä¸‡ä¸€å†æ¬¡æ£€æŸ¥æ¯ä¸ªå˜é‡:) <br><br> ä»–æœ¬å¯ä»¥åˆ é™¤æ­¤æ£€æŸ¥ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•æ‰§è¡Œæµéƒ½ä¸ä¼šåˆ°è¾¾è¡¨è¾¾å¼â€œ <i>return 0;</i> â€ã€‚ å®ƒä¸ä¼šæ”¹å˜ç¨‹åºé€»è¾‘ï¼Œä½†æ˜¯å°†æœ‰åŠ©äºæ‘†è„±å†—ä½™æ£€æŸ¥å’Œæ— æ•ˆä»£ç ã€‚ <br><br><h3> è­¦å‘Š10 </h3><br> ç‰¹é‡Œåœ¨å…¶æ¸¸æˆå‘¨å¹´çºªå¿µæ—¥çš„æ–‡ç« ä¸­è®½åˆºåœ°æŒ‡å‡ºï¼Œæ§åˆ¶æ¸¸æˆé€»è¾‘çš„è¦ç´ ä¹‹ä¸€æ˜¯å¯¹<i>Game :: updatestateï¼ˆï¼‰</i>å‡½æ•°çš„å·¨å¤§åˆ‡æ¢ï¼Œè¯¥åŠŸèƒ½åŒæ—¶è´Ÿè´£æ¸¸æˆçš„è®¸å¤šä¸åŒçŠ¶æ€ã€‚ éå¸¸æœŸå¾…æˆ‘ä¼šå‘ç°ä»¥ä¸‹è­¦å‘Šï¼š <br><br>  <a href="https://www.viva64.com/en/w/v2008/">V2008</a>å¾ªç¯å¤æ‚åº¦ï¼š548ã€‚è¯·è€ƒè™‘é‡æ„â€œæ¸¸æˆ::æ›´æ–°çŠ¶æ€â€åŠŸèƒ½ã€‚  Game.cpp 612 <br><br> æ˜¯çš„ï¼Œæ‚¨åšå¯¹äº†ï¼šPVS-Studioå¯¹åŠŸèƒ½è¿›è¡Œäº†ä»¥ä¸‹å¤æ‚åº¦è¯„å®š-548ã€‚458åˆ†ï¼ï¼ï¼ è¿™å°±æ˜¯â€œæ•´æ´çš„ä»£ç â€çš„æ ·å­ã€‚ å°½ç®¡æœ‰è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œé™¤äº†switchè¯­å¥å¤–ï¼Œå‡½æ•°ä¸­å‡ ä¹æ²¡æœ‰å…¶ä»–å†…å®¹ã€‚ åœ¨äº¤æ¢æœºæœ¬èº«ä¸­ï¼Œæˆ‘è®¡ç®—äº†300å¤šä¸ªcase-expressionã€‚ <br><br> æ‚¨çŸ¥é“ï¼Œåœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œå¯¹äºæœ€é•¿æ–‡ç« çš„ç«äº‰å¾ˆå°ã€‚ æˆ‘å¾ˆæƒ³å°†æ•´ä¸ªåŠŸèƒ½ä»£ç ï¼ˆ3,450è¡Œï¼‰å¸¦åˆ°è¿™é‡Œï¼Œä½†æ˜¯è¿™æ ·çš„èƒœåˆ©å°†æ˜¯ä¸å…¬å¹³çš„ï¼Œå› æ­¤ï¼Œæˆ‘å°†è‡ªå·±é™åˆ¶åœ¨ä¸å·¨å‹å¼€å…³çš„<a href="">é“¾æ¥</a>ä¸Šã€‚ æˆ‘å»ºè®®æ‚¨ç‚¹å‡»é“¾æ¥ï¼Œè‡ªå·±çœ‹çœ‹å®ƒçš„é•¿åº¦ï¼ å› æ­¤ï¼Œé™¤äº†<i>Game :: updatestateï¼ˆï¼‰ä¹‹å¤–</i> ï¼ŒPVS-Studioè¿˜å‘ç°44ä¸ªå‡½æ•°çš„å¾ªç¯å¤æ‚åº¦è¿‡é«˜ï¼Œå…¶ä¸­10ä¸ªçš„å¤æ‚åº¦å¤§äº200ã€‚ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/a63/bac/ddba63bac1b88d806adea03d73b70888.png" alt="å›¾5"></div><br><br><h2> ç»“è®º </h2><br> æˆ‘è®¤ä¸ºä»¥ä¸Šé”™è¯¯è¶³ä»¥æ»¡è¶³æœ¬æ–‡è¦æ±‚ã€‚ æ˜¯çš„ï¼Œé¡¹ç›®ä¸­å­˜åœ¨å¾ˆå¤šé”™è¯¯ï¼Œä½†è¿™æ˜¯ä¸€ç§åŠŸèƒ½ã€‚ é€šè¿‡æ‰“å¼€ä»–çš„ä»£ç ï¼ŒTerry Cavanaghè¡¨æ˜æ‚¨ä¸å¿…æˆä¸ºå®Œç¾çš„ç¨‹åºå‘˜æ¥ç¼–å†™å‡ºè‰²çš„æ¸¸æˆã€‚ åå¹´åçš„ç°åœ¨ï¼Œç‰¹é‡Œé¢‡å…·è®½åˆºæ„å‘³åœ°å›æƒ³èµ·é‚£äº›æ—¶ä»£ã€‚ ä»é”™è¯¯ä¸­å­¦ä¹ éå¸¸é‡è¦ï¼Œè€Œå®è·µæ˜¯åšåˆ°è¿™ä¸€ç‚¹çš„æœ€ä½³æ–¹æ³•ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨çš„ç»ƒä¹ å¯ä»¥å¼•å‘VVVVVVä¹‹ç±»çš„æ¸¸æˆï¼Œé‚£å°±å¤ªå¥½äº†ï¼ å¥½å§ï¼Œç°åœ¨è¯¥å†ç©ä¸€æ¬¡äº†:) <br><br> è¿™äº›å¹¶ä¸æ˜¯åœ¨æ¸¸æˆä»£ç ä¸­å‘ç°çš„æ‰€æœ‰é”™è¯¯ã€‚ å¦‚æœæ‚¨æƒ³äº²è‡ªçœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆå¯ä»¥æ‰¾åˆ°çš„-æˆ‘å»ºè®®æ‚¨<a href="https://www.viva64.com/en/pvs-studio-download/">ä¸‹è½½å¹¶å°è¯•PVS-Studio</a> ï¼ å¦å¤–ï¼Œè¯·ä¸è¦å¿˜è®°æˆ‘ä»¬<a href="https://www.viva64.com/en/b/0614/">ä¸º</a>å¼€æºé¡¹ç›®æä¾›äº†å…è´¹è®¸å¯è¯ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484388/">https://habr.com/ru/post/zh-CN484388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484376/index.html">ä¸‰æ˜Ÿè«æ–¯ç§‘äººå·¥æ™ºèƒ½ä¸­å¿ƒå‘˜å·¥æ•…äº‹</a></li>
<li><a href="../zh-CN484378/index.html">SwayWM-è‡ªå·±è¿›è¡ŒUnixè‰²æƒ…</a></li>
<li><a href="../zh-CN484380/index.html">æ„ŸåŠ¨-ä¸Šä¸ªä¸–çºªï¼ std ::çš„æ›¿ä»£å“ï¼Œè¿ˆå‘â€œæœªæ¥çš„C ++â€</a></li>
<li><a href="../zh-CN484382/index.html">Bellman-Fordç®—æ³•</a></li>
<li><a href="../zh-CN484386/index.html">Raiffeisenbankçš„AWS_Ruèšä¼š</a></li>
<li><a href="../zh-CN484390/index.html">Gleanæ·±å…¥äº†è§£2020å¹´å°†ä½¿ç”¨çš„18ç§æœ€ä½³Javaæ¡†æ¶</a></li>
<li><a href="../zh-CN484392/index.html">ç™«ç—«å‘ä½œ</a></li>
<li><a href="../zh-CN484394/index.html">æ¥å¹´çš„ä¸ƒä¸ªæœ€ä»¤äººå…´å¥‹çš„å¤ªç©ºä»»åŠ¡</a></li>
<li><a href="../zh-CN484396/index.html">ä½¿Windows Serveræ›´å®‰å…¨</a></li>
<li><a href="../zh-CN484402/index.html">TypeScriptçš„ç®€æ´ä»£ç -ç¬¬1éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>