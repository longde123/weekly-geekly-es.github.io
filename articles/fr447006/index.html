<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß¢ üåá üî¨ Guide: comment cr√©er un bot simple pour JS Telegram pour un d√©butant en programmation ü§öüèª ü•© üîõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai commenc√© √† plonger dans le monde informatique il y a seulement trois semaines. S√©rieusement, il y a trois semaines, je ne comprenais m√™me pas la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guide: comment cr√©er un bot simple pour JS Telegram pour un d√©butant en programmation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447006/">  J'ai commenc√© √† plonger dans le monde informatique il y a seulement trois semaines.  S√©rieusement, il y a trois semaines, je ne comprenais m√™me pas la syntaxe HTML, et ma connaissance des langages de programmation s'est termin√©e avec un programme scolaire Pascal de 10 ans.  Cependant, j'ai d√©cid√© d'aller au camp informatique, pour les enfants de qui ce serait bien de faire un bot.  J'ai d√©cid√© que ce n'√©tait pas si difficile. <br><br>  Cela a commenc√© un long voyage, au cours duquel j'ai: <br><br><ul><li>  d√©ploy√© un serveur cloud avec Ubuntu, </li><li>  enregistr√© sur github </li><li>  Apprentissage de la syntaxe JavaScript de base </li><li>  lire une tonne d'articles en anglais et en russe, </li><li>  enfin fait un bot </li><li>  a finalement √©crit cet article. </li></ul><br>  Le r√©sultat final ressemblait √† ceci: <br><br><img src="https://habrastorage.org/webt/qi/72/kz/qi72kzkdbw7i_mk0bry9i9bcrew.png"><br><a name="habracut"></a><br>  Je dirai tout de suite, c'est un article pour les d√©butants - juste pour comprendre comment faire des choses de base √† partir du point z√©ro. <br><br>  Et aussi - pour les programmeurs avanc√©s - juste pour les faire rire un peu. <br><br>  <b>1. Comment √©crire du code dans JS?</b> <br><br>  J'ai compris que cela valait la peine de commencer par comprendre au moins la syntaxe du langage.  Le choix s'est port√© sur JavaScript, simplement parce que la prochaine √©tape pour moi a √©t√© de cr√©er une application sur ReactNative.  J'ai commenc√© par un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cours</a> sur la cod√©cademie et j'√©tais ravi.  Les 7 premiers jours sont gratuits.  De vrais projets.  Je le recommande.  Le d√©passement a pris environ 25 heures.  En fait, loin de tout cela a √©t√© utile.  Voici √† quoi ressemble la structure du cours et le premier bloc est d√©taill√©. <br><br><img src="https://habrastorage.org/webt/cv/et/v9/cvetv9w-mfsa3oyb4rjzqhsaphu.png"><br><br>  <b>2. Comment enregistrer un bot?</b> <br><br>  Au d√©but, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet article</a> du blog d'un certain Archakov m'a beaucoup aid√©.  Il m√¢che le tout d√©but.  Mais l'essentiel est qu'il existe une instruction pour enregistrer un bot.  Je n'√©crirai pas mieux, et comme c'est la partie la plus simple, je vais juste √©crire l'essentiel.  Vous devez cr√©er un bot et obtenir son API.  Cela se fait via un autre bot - @BotFather.  Trouvez-le dans le t√©l√©gramme, √©crivez-le, suivez un chemin simple et obtenez (enregistrez!) Une cl√© API (il s'agit d'un ensemble de chiffres et de lettres).  Il a √©t√© utile plus tard. <br><br><img src="https://habrastorage.org/webt/se/yv/pj/seyvpjcxg3cv4s_vcagqxyyhtwq.png"><br><br>  <b>3. √Ä quoi ressemble le code bot?</b> <br><cut><br>  Apr√®s une longue √©tude des articles, j'ai r√©alis√© qu'il valait la peine d'utiliser une sorte de biblioth√®que (code tiers au format module) afin de ne pas prendre la peine d'apprendre l'API du t√©l√©gramme et de cr√©er de gros morceaux de code √† partir de z√©ro.  J'ai trouv√© le framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">telegraf</a> qui devait √™tre en quelque sorte connect√© √† quelque chose en utilisant npm ou fil.  C‚Äôest ainsi que j‚Äôai compris alors en quoi consiste le d√©ploiement du bot.  Riez ici.  Je ne serai pas offens√©.  Les exemples suivants du bas de la page m'ont le plus aid√© lors de la cr√©ation ult√©rieure du bot: <br><br><img src="https://habrastorage.org/webt/j_/n_/pr/j_n_praw6dpswa0q0veu5bj1osm.png"><br><br>  <b>3. Comment cr√©er votre propre serveur cloud pour 100 roubles</b> <br><br>  Apr√®s une longue recherche, j'ai r√©alis√© que la commande 'npm' de l'image ci-dessus fait r√©f√©rence √† la ligne de commande.  La ligne de commande est partout, mais pour l'ex√©cuter, vous devez installer NodePackageManager.  Le probl√®me √©tait que je programmais sur le PixelBook avec ChromeOS.  Je vais sauter un gros bloc ici sur la fa√ßon dont j'ai appris Linux - pour la plupart, c'est vide et inutile.  Si vous avez un Windows ou un MacBook, vous avez d√©j√† une console. <br><br>  En bref, j'ai install√© Linux via Crostini. <br><br>  Cependant, au cours du processus, j'ai r√©alis√© que pour que le bot fonctionne en continu (et pas seulement lorsque mon ordinateur est allum√©), j'ai besoin d'un serveur cloud.  J'ai choisi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vscale.io</a> J'ai jet√© 100 roubles, achet√© le serveur Ubuntu le moins cher ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voir photo</a> ). <br><br><img src="https://habrastorage.org/webt/rs/ad/jn/rsadjnqc7eok_5wps7dqbftw9yo.png"><br><br>  <b>4. Comment pr√©parer un serveur pour lancer un bot</b> <br><br>  Apr√®s cela, j'ai r√©alis√© que je devais cr√©er une sorte de dossier sur le serveur dans lequel je mettrais le fichier avec le texte du code.  Pour ce faire, dans la console (ex√©cut√© directement sur le site via le bouton "Ouvrir la console") j'ai conduit <br><br><pre><code class="plaintext hljs">mkdir bot</code> </pre> <br>  bot - c'est devenu le nom de mon dossier.  Apr√®s cela, j'ai install√© npm et Node.js, ce qui me permettra ensuite d'ex√©cuter du code √† partir de fichiers avec l'autorisation * .js <br><br><pre> <code class="plaintext hljs">sudo apt update sudo apt install nodejs sudo apt install npm</code> </pre> <br>  Je recommande fortement qu'√† ce stade, configurez la connexion au serveur via votre console.  Voici les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">instructions</a> qui vous permettront de travailler directement avec le serveur via la console de votre ordinateur. <br><br>  <b>5. Comment √©crire le code du premier bot.</b> <br><br>  Et maintenant c'est juste une d√©couverte pour moi.  Tout programme n'est que des lignes de texte.  Ils peuvent √™tre conduits n'importe o√π, enregistr√©s avec l'extension souhait√©e et tout.  Tu es belle.  J'ai utilis√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Atom</a> , mais vraiment, vous pouvez simplement √©crire dans le bloc-notes standard.  L'essentiel est d'enregistrer le fichier dans l'extension souhait√©e ult√©rieurement.  Voici comment √©crire du texte dans Word et enregistrer. <br><br>  J'ai cr√©√© un nouveau fichier, dans lequel j'ai ins√©r√© le code de l'exemple sur la page telegraf et l'ai enregistr√© dans le fichier index.js (il n'est pas n√©cessaire de nommer le fichier de cette fa√ßon, mais il est accept√©).  Important - au lieu de BOT_TOKEN, ins√©rez votre cl√© API √† partir du deuxi√®me paragraphe. <br><br><pre> <code class="plaintext hljs">const Telegraf = require('telegraf') const bot = new Telegraf(process.env.BOT_TOKEN) bot.start((ctx) =&gt; ctx.reply('Welcome!')) bot.help((ctx) =&gt; ctx.reply('Send me a sticker')) bot.on('sticker', (ctx) =&gt; ctx.reply('')) bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there')) bot.launch()</code> </pre> <br>  <b>6. Comment t√©l√©charger du code sur le serveur via github</b> <br><br>  Maintenant, je devais en quelque sorte t√©l√©charger ce code sur le serveur et l'ex√©cuter.  Pour moi, c'est devenu un d√©fi.  En cons√©quence, apr√®s une longue √©preuve, j'ai r√©alis√© qu'il serait plus facile de cr√©er un fichier sur github, qui appelle √† mettre √† jour le code √† l'aide de la commande dans la console.  J'ai enregistr√© un compte sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> et cr√©√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nouveau projet</a> , o√π j'ai t√©l√©charg√© le fichier.  Apr√®s cela, j'avais besoin de comprendre comment configurer le t√©l√©chargement de fichiers depuis mon compte (ouvert!) Vers le serveur dans le dossier bot (si vous l'avez soudainement quitt√©, √©crivez simplement cd bot). <br><br>  <b>7. Comment t√©l√©charger des fichiers sur le serveur via github partie 2</b> <br><br>  J'avais besoin de mettre sur le serveur un programme qui t√©l√©chargera des fichiers depuis git.  Je mets git sur le serveur, le conduisant √† la console <br><br><pre> <code class="plaintext hljs">apt-get install git</code> </pre> <br>  Apr√®s cela, je devais configurer le t√©l√©chargement du fichier.  Pour ce faire, j'ai martel√© la ligne de commande <br><br><pre> <code class="plaintext hljs">git clone git://github.com/b0tank/bot.git bot</code> </pre><br>  En cons√©quence, tout du projet a √©t√© t√©l√©charg√© sur le serveur.  L'erreur √† ce stade √©tait que j'ai essentiellement cr√©√© un deuxi√®me dossier √† l'int√©rieur du dossier de robots d√©j√† existant.  L'adresse avant le fichier ressemblait √† * / bot / bot / index.js <br><br>  J'ai d√©cid√© de n√©gliger ce probl√®me. <br><br>  Et pour charger la biblioth√®que telegraf, que nous demandons dans la premi√®re ligne de code, lancez une commande dans la console. <br><br><pre> <code class="plaintext hljs">npm install telegraf</code> </pre> <br>  <b>8. Comment d√©marrer un bot</b> <br><br>  Pour ce faire, lorsque vous √™tes dans le dossier avec le fichier (pour passer d'un dossier √† un dossier via la console - ex√©cutez la commande du format <code>cd bot</code> pour vous assurer que vous √™tes l√† o√π vous devez conduire une commande qui affiche dans la console tous les fichiers et dossiers qui s'y trouvent <code>ls -a</code> <br><br>  Pour courir, je suis entr√© dans la console <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre><br>  S'il n'y a pas d'erreur - tout va bien, le bot fonctionne.  Cherchez-le dans le t√©l√©gramme.  S'il y a une erreur - appliquez vos connaissances √† partir d'un point. <br><br>  <b>9. Comment d√©marrer un bot en arri√®re-plan</b> <br><br>  Assez rapidement, vous vous rendrez compte que le bot ne fonctionne que lorsque vous √™tes vous-m√™me assis dans la console.  Pour r√©soudre ce probl√®me, j'ai utilis√© la commande <br><br><pre> <code class="plaintext hljs">screen</code> </pre> <br>  Apr√®s cela, un √©cran avec du texte appara√Ætra.  Cela signifie que tout va bien.  Vous √™tes sur un serveur virtuel sur un serveur cloud.  Pour mieux comprendre comment tout cela fonctionne, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici un article</a> .  Acc√©dez simplement √† votre dossier et lancez la commande pour lancer le bot <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre> <br>  <b>10. Comment fonctionne le bot et comment √©tendre ses fonctionnalit√©s</b> <br><br>  Que peut faire notre robot de l'exemple?  Il peut <br><br><pre> <code class="plaintext hljs">bot.start((ctx) =&gt; ctx.reply('Welcome!'))</code> </pre> <br>  dites "Bienvenue!"  au moment du d√©marrage (essayez de changer le texte) <br><br><pre> <code class="plaintext hljs">bot.help((ctx) =&gt; ctx.reply('Send me a sticker'))</code> </pre> <br>  en r√©ponse √† la commande / aide standard envoyer un message "Envoyez-moi un autocollant" <br><br><pre> <code class="plaintext hljs">bot.on('sticker', (ctx) =&gt; ctx.reply(''))</code> </pre> <br>  en r√©ponse √† l'autocollant envoyer l'approbation <br><br><pre> <code class="plaintext hljs">bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there'))</code> </pre> <br>  r√©pondez ¬´H√© l√†¬ª s'ils disent ¬´salut¬ª <br>  bot.launch () <br><br><img src="https://habrastorage.org/webt/af/dy/rw/afdyrw8ffn4et_wcaqhpqvblxcc.png"><br><br>  Si vous regardez le code sur <a href="">github</a> , vous vous <a href="">rendrez</a> vite compte que je ne suis pas all√© loin de cette fonctionnalit√©.  Ce qui est activement utilis√© est la fonction <code>ctx.replyWithPhoto</code> qui vous permet d'envoyer une photo ou un gif donn√© en r√©ponse √† un texte sp√©cifique. <br><br>  Une partie importante du code a √©t√© √©crite par des enfants de 11 √† 13 ans, √† qui j'ai donn√© acc√®s au bot.  Ils ont pr√©sent√© leur cas d'utilisation.  Je pense qu'il est facile de d√©terminer quelle partie a √©t√© faite par eux. <br><br>  Par exemple, le message ¬´jake¬ª est accompagn√© d'un gif avec un personnage c√©l√®bre du dessin anim√© Adventure Time. <br><br><img src="https://habrastorage.org/webt/d_/uw/7l/d_uw7lowyis6kiupnbc_vb5_cfs.png"><br><br>  Pour d√©velopper davantage le bot, pour connecter le clavier, vous devez regarder des exemples, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'ici</a> <br><br>  <b>11. Comment mettre √† jour le code et red√©marrer le bot</b> <br><br>  N'oubliez pas que vous devez mettre √† jour le code non seulement sur github, mais aussi sur le serveur.  Pour ce faire, c'est simple - arr√™tez le bot (appuyez sur ctrl + c), <br><br>  - entrez dans la console, √©tant dans le dossier cible, <code>git pull</code> <br>  - <code>node index.js</code> le bot avec la <code>node index.js</code> <br><br>  <b>Fin</b> <br><br>  Beaucoup de choses d√©crites dans ce fichier seront super √©videntes pour les programmeurs avanc√©s.  Cependant, quand j'ai moi-m√™me essay√© d'un seul coup de sauter par-dessus l'ab√Æme dans le monde des bots, j'ai vraiment manqu√© un tel guide.  Un guide dans lequel les choses √©videntes et simples pour tout sp√©cialiste informatique ne sont pas n√©glig√©es. <br><br>  √Ä l'avenir, je pr√©vois un article sur la fa√ßon de cr√©er ma premi√®re application ReactNative dans le m√™me style, abonnez-vous! </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447006/">https://habr.com/ru/post/fr447006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr446996/index.html">La m√©thode Pomodoro n'est pas aussi cool qu'elle pourrait l'√™tre</a></li>
<li><a href="../fr446998/index.html">D√©marrage de SAP GUI √† partir d'un navigateur</a></li>
<li><a href="../fr447000/index.html">Guerres du format audio: 10 mat√©riaux sur supports num√©riques et analogiques</a></li>
<li><a href="../fr447002/index.html">Visite de coworking photo du Cabinet Lounge</a></li>
<li><a href="../fr447004/index.html">Chien de garde universel sur ATtiny13</a></li>
<li><a href="../fr447008/index.html">Comment prendre le contr√¥le de votre infrastructure r√©seau. Table des mati√®res</a></li>
<li><a href="../fr447010/index.html">Pas pour longtemps la musique jou√©e ... ou comment l'OS Elbrus n'est jamais devenu gratuit</a></li>
<li><a href="../fr447014/index.html">Structures de r√©f√©rence jetables en C # 8.0</a></li>
<li><a href="../fr447016/index.html">25 ans plus tard: une entrevue avec Linus Torvalds</a></li>
<li><a href="../fr447018/index.html">L'enrichissement quantique dans une interpr√©tation multi-monde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>