<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✋🏻 🤾🏽 👨🏿‍🎓 R中针对“企业”任务的并行计算的几点注意事项 🐔 ☄️ 👩‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="并行或分布式计算本身并不是一件容易的事。 开发环境均应提供支持，DS专家应具有进行并行计算的技能，并且应将任务简化为可以分成几部分的形式（如果存在）。 但是，如果您拥有至少一个多核处理器（现在几乎每个人都拥有），并根据阿曼定律确定的理论加速度极限进行了调整，那么采用一种有效的方法，您可以极大地加快单...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>R中针对“企业”任务的并行计算的几点注意事项</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462469/"><p> 并行或分布式计算本身并不是一件容易的事。 开发环境均应提供支持，DS专家应具有进行并行计算的技能，并且应将任务简化为可以分成几部分的形式（如果存在）。 但是，如果您拥有至少一个多核处理器（现在几乎每个人都拥有），并根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">阿曼定律</a>确定的理论加速度极限进行了调整，那么采用一种有效的方法，您可以极大地加快单线程R解决问题的速度。 但是，在某些情况下，甚至可以绕开它。 </p><br><p> 它是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">以前出版物</a>的延续。 <a name="habracut"></a></p><br><h1 id="tipovoy-podhod"> 典型方法 </h1><br><p>通常，当分析师（DS专家，开发人员或为您自己选择任何合适的名称）试图加速单台计算机上的任务并开始从单线程模式转移到多线程模式时，他将以模板方式进行。  <code>parApply</code> ， <code>foreach\%dopar%</code>等 您可以紧凑而清晰地看到它，例如，在这里： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“ R中的并行”</a> 。  3个步骤： </p><br><ol><li> 使<code>core-1</code>线程 </li><li> 使用<code>foreach</code>运行 </li><li> 收集答案并获得结果。 </li></ol><br><p> 对于占用100％CPU且不要求传输大量输入信息的典型计算任务，这是正确的方法。 需要注意的重点是在线程内提供日志记录，以便能够控制进程。 如果没有日志记录，即使没有仪器，飞行也将继续进行。 </p><br><p> 对于“企业”任务，将它们并行化时，会出现许多其他方法上的困难，这些困难会大大降低上述简单方法的影响： </p><br><ul><li> 流上的负载可能严重不平衡； </li><li> 只需几次尖锐的突发操作就可以破坏单个任务中的CPU性能要求。 </li><li> 每个单独的计算可能需要大量的内存来输入和输出同样大小的结果； </li><li> 作为单独任务的一部分，在计算，使用磁盘和查询外部系统之间可能会混合使用。 </li></ul><br><p> 这是一个完全典型的场景，在此过程中，您需要获得大量的工作作为输入，从磁盘读取数据，从数据库中提取一大块，要求外部系统并等待它们的回答（经典-REST API请求），然后将N返回给父进程结果是兆字节。 </p><br><p> 通过用户，位置，文档，IP地址，日期等<code>Map-reduce</code> （自己添加）。 在最可悲的情况下，并行执行可能比单线程执行的时间更长。 内存不足问题也可能发生。 全部都消失了吗？ 一点也不。 </p><br><h1 id="alternativnyy-put"> 替代方式 </h1><br><p> 考虑一种从根本上改善这种状况的方法。 同时，我们不会忘记我们生活在一个完整的动物园框架内。  <code>*nix</code>上的生产电路，Win * nix \ MacOS上的DS笔记本电脑，但是有必要在所有地方统一工作。 </p><br><ol><li> 一个微任务：接收用户输入，请求数据库，通过REST请求2个外部IC，从磁盘下载并解析目录，执行计算，将结果转储到disk \ database。 用户，例如<code>10^6</code> 。 </li><li> 我们转向使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>future</code></a>软件包和通用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>doFuture</code></a>适配器。 </li><li> 如果在单独的任务中需要少量的处理器时间（我们正在等待第三方系统的答复），那么<code>doFuture</code>允许您从<strong>流</strong>拆分切换<strong>为</strong>在一行中拆分<strong>为单独的进程</strong> （您可以在<code>htop</code> <code>*nix</code>中看到启动参数） 。 </li><li> 这些过程可以创建的比核心更多。 由于大多数情况下单个进程都处于待机模式，因此不会发生任何故障。 但是，有必要根据典型处理过程的专题图在实验上选择最佳的过程数。 </li></ol><br><p> 结果-原始任务快了很多倍。 加速可能甚至大于可用内核的数量。 <br> 没有自觉的代码，因为该出版物的主要任务是共享该方法和一系列出色的<code>future</code>软件包。 </p><br><h1 id="ps"> 聚苯乙烯 </h1><br><p> 还有一些细微差别也需要追溯： </p><br><ul><li> 每个进程都会消耗内存，包括接收和返回的数据。 进程数量的增加将使可用RAM的需求成倍增加。 </li><li>  <code>doFuture</code>使用“魔术”来自动确定传递到进程的变量和数据包的组成，但是您不应该让一切自行进行，最好检查一下。 </li><li> 在进程中，使用<code>rm</code>显式的<code>gc</code>控制和显式的变量删除将不会受到损害。 这不是万能药，可能<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">无法使用</a> ，但是明确指出已删除的对象会有所帮助。 </li><li> 计算完成后，调用<code>plan(sequential)</code> 。 这将关闭所有进程并释放它们占用的内存。 </li><li> 如果需要将大量数据传输到进程，请考虑使用外部存储（磁盘，数据库）。 不要忘记描述符无法传输，必须在流程本身内部打开源。 </li></ul><br><p> 以前的出版物- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“企业公司的业务流程：投机与现实。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们用R“阐明了</a> 。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN462469/">https://habr.com/ru/post/zh-CN462469/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN462457/index.html">Maltego的4个发行版。 工作与机会原则</a></li>
<li><a href="../zh-CN462459/index.html">使用CC2531将ZigBee设备添加到Homebridge</a></li>
<li><a href="../zh-CN462461/index.html">GOES-17事故调查结果</a></li>
<li><a href="../zh-CN462465/index.html">使用苹果的故乡</a></li>
<li><a href="../zh-CN462467/index.html">前端每周摘要（2019年7月29日至8月4日）</a></li>
<li><a href="../zh-CN462471/index.html">使用pwnable.kr 16解决工作-UAF。 释放漏洞后使用</a></li>
<li><a href="../zh-CN462473/index.html">我们正在开发一个使用微服务的环境。 第1部分在裸机上安装Kubernetes HA（Debian）</a></li>
<li><a href="../zh-CN462475/index.html">阿列克谢·萨瓦捷捷夫（Alexey Savvateev）：如何借助数学打击腐败（2016年诺贝尔经济学奖）</a></li>
<li><a href="../zh-CN462477/index.html">科学家声称AI是一项新专利的作者，并正在试图改变专利法</a></li>
<li><a href="../zh-CN462479/index.html">Steam Windows客户端本地特权升级0天</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>