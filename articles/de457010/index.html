<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☦️ 👨🏻‍🎓 ✏️ Warum ich keine Webkomponenten verwende 🈸 🎫 👴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich schreibe dies hauptsächlich für mich selbst in der Zukunft, damit ich einen Platz habe, an den ich mich wenden kann, wenn mich jemand fragt, warum...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Warum ich keine Webkomponenten verwende</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457010/"><p>  Ich schreibe dies hauptsächlich für mich selbst in der Zukunft, damit ich einen Platz habe, an den ich mich wenden kann, wenn mich jemand fragt, warum ich skeptisch gegenüber Webkomponenten bin und warum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Svelte</a> nicht standardmäßig in Webkomponenten kompiliert wird.  (Es kann jedoch in Webkomponenten kompiliert und in diese integriert werden, wie die hervorragende Bewertung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Custom Elements Everywhere zeigt.</a> ) </p><br><p>  Keine der folgenden Aussagen sollte als Kritik an der harten Arbeit an Webkomponenten ausgelegt werden.  Vielleicht habe ich auch in dieser Veröffentlichung Fehler gemacht. In diesem Fall würde ich gerne Änderungen vornehmen.  Ich erkläre auch nicht, dass Sie keine Webkomponenten verwenden sollten.  Sie haben ihren eigenen Anwendungsbereich.  Ich erkläre nur, warum sie nicht für mich geeignet sind. </p><a name="habracut"></a><br><h2 id="1-progressivnoe-uluchshenie">  1. Fortschreitende Verbesserung </h2><br><p> Dies mag eine altmodische Überzeugung sein, aber ich glaube, dass Websites so weit wie möglich ohne JavaScript funktionieren sollten.  Webkomponenten ohne JS funktionieren nicht.  Dies ist normal für Dinge, die von Natur aus interaktiv sind, wie z. B. benutzerdefinierte Formularelemente (&lt;cool-datepicker&gt;), aber nicht normal für die Site-Navigation.  Oder stellen Sie sich eine <code>&lt;twitter-share&gt;</code> -Komponente vor, die die Logik zum Erstellen einer URL zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Senden an Twitter zusammenfasst</a> .  Ich könnte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">es auf Svelte implementieren</a> , das mir den folgenden HTML-Code auf dem Server rendert: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">noreferrer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"svelte-1jnfxx"</span></span></span><span class="hljs-tag">&gt;</span></span> Tweet this <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Mit anderen Worten, das übliche <code>&lt;a&gt;</code> in seiner ganzen Pracht zur Verfügung. </p><br><p>  Wenn JavaScript aktiviert ist, erfolgt eine schrittweise Verbesserung. Anstatt eine neue Registerkarte zu öffnen, wird ein kleines Popup-Fenster geöffnet.  Aber auch ohne JS funktioniert die Komponente noch einwandfrei. </p><br><p>  Im Fall einer HTML-Webkomponente würde dies ungefähr so ​​aussehen: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">twitter-share</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">via</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><p>  ... was nutzlos und ungeeignet ist, wenn JS blockiert ist oder aus irgendeinem Grund defekt ist oder der Benutzer einen alten Browser hat. </p><br><p>  Darüber hinaus bietet <code>class="svelte-1jnfxx"</code> eine <code>class="svelte-1jnfxx"</code> ohne Shadow DOM.  Das bringt uns zum nächsten Punkt. </p><br><h2 id="2-css-v-eee-js">  2. CSS in, äh ... JS </h2><br><p>  Wenn Sie das Schatten-DOM zum Einkapseln von Stilen verwenden möchten, müssen Sie Ihr CSS in das <code>&lt;style&gt;</code> einfügen.  Die einzige praktische Möglichkeit, dies zu tun, wenn Sie das Laden von blinkendem Inhalt (FOUC) vermeiden möchten, besteht darin, CSS als Zeichenfolge in JavaScript einzubetten, die den Rest der Logik Ihrer Webkomponente definiert. </p><br><p>  Dies widerspricht dem Ratschlag zur Leistungsverbesserung, der lautet: "Bitte weniger JavaScript."  Insbesondere die CSS-in-JS-Community wurde vielfach dafür kritisiert, dass sie keine CSS-Dateien für CSS verwendet, und hier sind wir wieder mit Webkomponenten. </p><br><p>  In Zukunft können wir sowohl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CSS-Module</a> als auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konstruierbare Stylesheets verwenden</a> , um dieses Problem zu lösen.  Wir werden auch die Möglichkeit haben, die Interna des Shadow DOM durch <code>::theme</code> und <code>::part</code> .  Aber hier war es nicht ohne Probleme. </p><br><h2 id="3-ustalost-platformy">  3. Ermüdung der Plattform </h2><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1141404066704232448"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><blockquote>  Dies ist eine schmerzhafte Krone für mich - ich habe diese Dinge seit mehreren Jahren als „Die Zukunft“ beworben, aber um mit der <em>Gegenwart</em> Schritt zu halten <em>, mussten</em> wir die Plattform mit einer Reihe verschiedener Funktionen füllen, was die Lücke zwischen den Browsern vergrößert. </blockquote><p>  Zum Zeitpunkt des Schreibens waren unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://crbug.com</a> , dem Bug-Tracker von Chrome, 61.000 offene Bugs vorhanden, die die enorme Komplexität des Schreibens eines modernen Browsers belegen. </p><br><p>  Jedes Mal, wenn wir der Plattform eine neue Funktion hinzufügen, erhöhen wir die Komplexität - schaffen das Potenzial für neue Fehler und verringern die Wahrscheinlichkeit, dass Chrome einen neuen Konkurrenten hat.  Dies führt auch zu Schwierigkeiten für Entwickler, die aufgefordert werden, diese neuen Funktionen zu erlernen (von denen einige, wie z. B. HTML-Importe oder die Originalversion des Standards für benutzerdefinierte Elemente, außerhalb von Google keine Wurzeln geschlagen haben und derzeit entfernt werden). </p><br><h2 id="4-polifily">  4. Polyphile </h2><br><p>  Die Tatsache, dass Sie Polyfiles verwenden müssen, um ältere Browser zu unterstützen, trägt nicht zur Entwicklung der Situation bei.  Und es <em>hilft überhaupt</em> nicht, dass Artikel in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Constructable Stylesheets</a> in Google geschrieben wurden (hi Jason!). Erwähnen Sie nicht, dass diese Funktion nur in Chrome verfügbar ist.  (Alle drei Autoren der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spezifikation</a> arbeiten für Google. Webkit scheint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zweifel</a> an einigen Aspekten dieses Standards zu haben.) </p><br><h2 id="5-kompoziciya">  5. Zusammensetzung </h2><br><p>  Es kann nützlich sein zu steuern, wann der Inhalt eines Slots gerendert werden soll.  Stellen Sie sich vor, Sie haben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code> &lt;html-include&gt;</code></a> zum Laden zusätzlicher Inhalte, wenn diese sichtbar sind: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Toggle the section for more info:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toggled-section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html-include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./more-info.html"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toggled-section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Auf einmal!  Auch wenn wir den <code>toggled-section</code> noch nicht geöffnet <code>toggled-section</code> , der Browser jedoch bereits <code>more-info.html</code> angefordert <code>more-info.html</code> , zusammen mit allen Bildern und anderen Ressourcen, die dort vorhanden sind. </p><br><p>  Dies liegt daran, dass der Inhalt der Slots <em>im Voraus</em> in den Webkomponenten gerendert wird.  In der Realität stellt sich heraus, dass Sie in den meisten Fällen den Inhalt der Slots träge rendern möchten.  Svelte v2 hat ein proaktives Redning-Modell eingeführt, um die Webstandards zu erfüllen. Dies war jedoch die Hauptursache für Unannehmlichkeiten. Wir konnten beispielsweise nichts Ähnliches wie den React Router erstellen.  In Svelte v3 haben wir uns vom Verhalten von Webkomponenten entfernt und nie zurückgeschaut. </p><br><p>  Leider war dies eines der grundlegenden Merkmale des DOM.  Was uns zu ... </p><br><h2 id="6-putanica-mezhdu-svoystvami-i-atributami">  6. Verwirrung zwischen Eigenschaften und Attributen </h2><br><p>  Eigenschaften und Attribute sind im Grunde dasselbe, oder? </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> button = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'button'</span></span>); button.hasAttribute(<span class="hljs-string"><span class="hljs-string">'disabled'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// false button.disabled = true; button.hasAttribute('disabled'); // true button.removeAttribute('disabled'); button.disabled; // false</span></span></code> </pre> <br><p>  Na ja, fast: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> button.disabled; <span class="hljs-comment"><span class="hljs-comment">// 'boolean' typeof button.getAttribute('disabled'); // 'object' button.disabled = true; typeof button.getAttribute('disabled'); // 'string'</span></span></code> </pre> <br><p>  Es gibt Namen, die nicht übereinstimmen: </p><br><pre> <code class="javascript hljs">div = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); div.setAttribute(<span class="hljs-string"><span class="hljs-string">'class'</span></span>, <span class="hljs-string"><span class="hljs-string">'one'</span></span>); div.className; <span class="hljs-comment"><span class="hljs-comment">// 'one' div.className = 'two'; div.getAttribute('class'); // 'two'</span></span></code> </pre> <br><p>  ... und es gibt solche, die überhaupt nicht vereinbart sind: </p><br><pre> <code class="javascript hljs">input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); input.getAttribute(<span class="hljs-string"><span class="hljs-string">'value'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// null input.value = 'one'; input.getAttribute('value'); // null input.setAttribute('value', 'two'); input.value; // 'one'</span></span></code> </pre> <br><p>  Aber wir könnten uns mit diesen Macken befassen, dem Zusammenspiel von String-Format (HTML) und DOM.  Es gibt eine begrenzte Anzahl dieser Funktionen, sie sind dokumentiert, so dass wir zumindest etwas über sie lernen können, wenn wir Zeit und Geduld haben. </p><br><p>  Webkomponenten machen einen Unterschied.  Es gibt keine Garantie mehr für die Beziehung zwischen Eigenschaften und Attributen, und Sie als Webkomponentenentwickler müssen beide unterstützen.  Was uns zu so etwas bringt: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyThing</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span>, <span class="hljs-string"><span class="hljs-string">'baz'</span></span>]; } get foo() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>); } set foo(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, value); } get bar() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>); } set bar(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, value); } get baz() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hasAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>); } set baz(value) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.removeAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>); } } attributeChangedCallback(name, oldValue, newValue) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name === <span class="hljs-string"><span class="hljs-string">'foo'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ... } if (name === 'bar') { // ... } if (name === 'baz') { // ... } } }</span></span></code> </pre> <br><p>  Sie können das Gegenteil tun - <code>attributeChangedCallback</code> Getter und Setter rufen auf.  In jedem Fall ist die Bequemlichkeit, damit zu arbeiten, nur deprimierend.  Gleichzeitig gibt es in Frameworks eine einfache und eindeutige Möglichkeit, Daten an eine Komponente zu übertragen. </p><br><h2 id="7-protekayuschiy-dizayn">  7. Undichtes Design </h2><br><p>  Dieses Element ist etwas vage, aber es scheint mir seltsam, dass <code>attributeChangedCallback</code> nur eine Klassenmethode ist.  Sie können buchstäblich Folgendes tun: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'my-thing'</span></span>); element.attributeChangedCallback(<span class="hljs-string"><span class="hljs-string">'w'</span></span>, <span class="hljs-string"><span class="hljs-string">'t'</span></span>, <span class="hljs-string"><span class="hljs-string">'f'</span></span>);</code> </pre> <br><p>  Die Attribute haben sich nicht geändert, aber der Code verhält sich so, als ob es passiert wäre.  Natürlich gab es in JavaScript immer viele Möglichkeiten, Schaden anzurichten, aber wenn ich sehe, dass ein Implementierungsdetail auf diese Weise herausragt, scheint mir, dass etwas mit dem Design eindeutig nicht stimmt. </p><br><h2 id="8-plohoy-dom">  8. Schlechtes DOM </h2><br><p>  Ok, wir haben bereits festgestellt, dass das DOM schlecht ist.  Es ist jedoch immer noch schwer zu übertreiben, wie unpraktisch es ist, interaktive Anwendungen zu erstellen. </p><br><p>  Vor einigen Monaten schrieb ich einen Artikel mit dem Titel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Schreibe weniger Code“, um</a> zu veranschaulichen, wie Svelte Komponenten effizienter schreiben kann als Frameworks wie React und Vue.  Es gab keinen Vergleich mit dem Vanille-DOM, sollte es aber.  Kurz gesagt, wir haben eine einfache Komponente <code>&lt;Adder a={1} b={2}/&gt;</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> a; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> b; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{a}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{b}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{a} + {b} = {a + b}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Das ist alles.  Schreiben Sie nun dasselbe über die Webkomponente: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attachShadow({ <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">'open'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.innerHTML = <span class="hljs-string"><span class="hljs-string">` &lt;input type="number"&gt; &lt;input type="number"&gt; &lt;p&gt;&lt;/p&gt; `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.p = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.querySelector(<span class="hljs-string"><span class="hljs-string">'p'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">0</span></span>].addEventListener(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = +e.target.value; }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].addEventListener(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = +e.target.value; }); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]; } get a() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); } set a(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'a'</span></span>, value); } get b() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'b'</span></span>); } set b(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'b'</span></span>, value); } attributeChangedCallback() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update(); } update() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">0</span></span>].value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.p.textContent = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.a}</span></span></span><span class="hljs-string"> + </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.b}</span></span></span><span class="hljs-string"> = </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.a + </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.b}</span></span></span><span class="hljs-string">`</span></span>; } } customElements.define(<span class="hljs-string"><span class="hljs-string">'my-adder'</span></span>, Adder);</code> </pre> <br><p>  Ja. </p><br><p>  Beachten Sie, dass wir zwei separate Updates haben, wenn wir sowohl <code>a</code> als auch <code>b</code> synchron ändern.  Die meisten Frameworks leiden nicht unter diesem Problem. </p><br><h2 id="9-globalnye-imena">  9. Globale Namen </h2><br><p>  Ich werde mich noch lange nicht darauf konzentrieren, es genügt zu sagen, dass die Gefahren der Arbeit in einem einzigen gemeinsamen Namespace seit langem bekannt und zerlegt sind. </p><br><h2 id="10-vse-eti-problemy-uzhe-resheny">  10. Alle diese Probleme wurden bereits behoben. </h2><br><p>  Die größte Traurigkeit ist, dass wir bereits gute Komponentenmodelle haben.  Wir lernen noch, aber die grundlegende Aufgabe - das Synchronisieren der Ansicht mit einem bestimmten Status durch Aktualisieren des DOM in einem komponentenorientierten Stil - wurde bereits vor einigen Jahren gelöst.  Und wir fügen der Webplattform immer noch Funktionen hinzu, um das nachzuholen, was wir bereits in Bibliotheken und Frameworks haben. </p><br><p>  Da unsere Ressourcen nicht unendlich sind, bedeutet die für eine Aufgabe aufgewendete Zeit einen Mangel an Aufmerksamkeit für eine andere Aufgabe.  Trotz der allgemeinen Gleichgültigkeit der Entwickler wurde viel Energie für Webkomponenten aufgewendet.  Was könnten wir erreichen, wenn wir diese Energie für etwas anderes ausgeben? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457010/">https://habr.com/ru/post/de457010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456992/index.html">Einige nützliche Tipps für diejenigen, die selbst Englisch lernen möchten</a></li>
<li><a href="../de456996/index.html">Drei weiße Pferde</a></li>
<li><a href="../de456998/index.html">Die komplette Geschichte von Harold und dem Bob Herbert Tree in Fallout</a></li>
<li><a href="../de457004/index.html">Einfache Methoden zur Optimierung von Go-Programmen</a></li>
<li><a href="../de457008/index.html">Antiquitäten: Drei Palmengeschichten</a></li>
<li><a href="../de457016/index.html">BEM-Methodik als Beispiel für Aufkleber in OpenCart</a></li>
<li><a href="../de457018/index.html">Über Komplexität</a></li>
<li><a href="../de457020/index.html">Eine Auswahl von akademischen und Science-Pop-Quellen</a></li>
<li><a href="../de457022/index.html">IT-Umzug. Von Bangkok nach Sydney</a></li>
<li><a href="../de457026/index.html">Wie ich Redner bei Percona Live wurde (und ein paar faszinierende Details von der amerikanischen Grenze)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>