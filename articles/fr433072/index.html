<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😚 🤾🏿 😶 Comment pirater la protection contre la copie de la console Sega Dreamcast 🥐 👩‍👩‍👧 💇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Après la sortie du DOOM Black Book, je suis parti en vacances au Japon, où j'ai réussi à jouer Ikaruga sur une vraie machine d'arcade dans la salle de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment pirater la protection contre la copie de la console Sega Dreamcast</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433072/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/75/nh/l3/75nhl327vyzpklsanxeb3yb9tsw.png"></div><br>  Après la sortie du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DOOM Black Book,</a> je suis parti en vacances au Japon, où j'ai réussi à jouer Ikaruga sur une vraie machine d'arcade dans la salle de jeux Taito HEY dans le quartier Akihabara de Tokyo.  Cette expérience a de nouveau ravivé mon intérêt pour la dernière console de jeu vidéo SEGA - Dreamcast. <br><br>  Sur le réseau, vous pouvez trouver de nombreux documents qui facilitent grandement le processus d'étude de la question.  Il existe deux excellentes ressources qui peuvent rapidement mettre à jour n'importe qui: le merveilleux site Web de Marcus Comstedt, qui décrit tout jusqu'aux registres du GPU, et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la</a> ressource de Jockel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Créons un jeu pour Sega Dreamcast à partir de zéro»</a> . <br><br>  En étudiant la voiture, j'ai découvert une histoire incroyable sur la façon dont les pirates ont rapidement craqué la protection des copies de jeux et ruiné les derniers espoirs matériels de SEGA. <br><a name="habracut"></a><br><h2>  Premier niveau de protection: GD-ROM </h2><br>  Sur le papier, la protection contre la copie pour SEGA Dreamcast semblait très solide.  Les jeux ont été livrés sur un support spécial appelé GD-ROM, que seul SEGA pouvait produire.  GD signifie «Gigabyte Disc» («disque gigaoctet»), c'est-à-dire que sa densité d'enregistrement accrue a fourni un volume maximal de 1 Go, ce qui était bien plus que les capacités d'un CD-ROM conventionnel (700 Mo). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/3dc/d90/c593dcd90243f19b05b025685883c7de.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/797/044/2e8/7970442e84c49259e3a534c34a2909e0.svg" alt="image"></div><br>  Le GD-ROM avait les mêmes dimensions physiques que le CD-ROM, mais au niveau macro, il se composait de deux zones reconnaissables à l'œil nu. <br><br>  La première zone (sombre) est une région basse densité compatible CD-ROM contenant jusqu'à 35 Mo.  Il contenait une piste audio vocale rappelant à l'utilisateur que le contenu du disque était destiné à SEGA Dreamcast, et non à un lecteur CD <sup>[1]</sup> .  De plus, le développeur y a ajouté une piste avec des fichiers texte, par exemple, des informations sur les droits d'auteur et parfois du matériel promotionnel, par exemple, des illustrations du jeu. <br><br>  La zone haute densité (lumière) a été stockée jusqu'à 984 Mo <sup>[2]</sup> et tout le contenu du jeu s'y trouvait. <br><br>  Il semblait impossible pour les pirates d'éjecter le jeu du disque et de le graver à nouveau pour la distribution. <br><br><h2>  Démarrage à partir de GD-ROM: IP.BIN et 1ST_READ.BIN </h2><br>  Avant de parler de la façon dont les pirates ont réussi à copier des jeux, nous devons comprendre la séquence de chargement.  Dreamcast n'avait pas de système d'exploitation.  Il existe une idée fausse répandue selon laquelle il utilisait Windows CE, mais en fait, Microsoft OS n'était qu'une bibliothèque statique supplémentaire que les développeurs de Dreamcast pouvaient connecter pour utiliser DirectX, DirectInput et DirectSound <sup>[3]</sup> .  Dans certains jeux, WinCE a été utilisé <sup>[4]</sup> , mais dans la plupart (par exemple, Ikaruga), il n'a pas été utilisé.  Indépendamment de ce que le développeur a utilisé, un jeu avec un système d'exploitation entièrement connecté et Dreamcast a toujours commencé de la même manière. <br><br>  Pendant l'utilisation normale et le lancement du jeu officiel sur le Dreamcast qui vient d'être allumé, BOOTROM a été lancé, chargeant le bootstrap du GD-ROM dans la RAM.  Ce petit programme, situé sur la dernière piste GD-ROM et connu de la communauté sous le nom «IP.BIN», affichait un écran sous licence SEGA et effectuait deux niveaux de démarrage pour configurer les registres matériels, créer une pile CPU et initialiser VBR <sup>[5]</sup> . <br><br>  Plus important encore, IP.BIN contenait le nom de l'exécutable du jeu.  Ce nom a été recherché dans le système de fichiers GD-ROM et chargé dans la RAM à 0x8C010000, après quoi le programme y a été transféré.  En règle générale, l'exécutable était nommé «1ST_READ.BIN». <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14f/fac/4a7/14ffac4a70c0af94444f819b03acf2af.svg"></div><br>  Après que le CPU est allé à l'adresse 0x8C010000, le jeu a commencé comme il se doit. <br><br><h2>  Deuxième niveau de protection: le rançongiciel Scrambler </h2><br>  La possibilité théorique de piratage s'est présentée en raison de la capacité apparemment insignifiante de Dreamcast à démarrer non pas à partir du GD-ROM, mais à partir du CD-ROM.  Initialement, cette fonctionnalité appelée «MIL-CD» a été conçue pour ajouter des fonctions multimédias aux CD de musique, mais n'était pratiquement pas utilisée, à l'exception de sept applications de karaoké. <br><br>  Les ingénieurs de SEGA ont compris que le chargement d'un MIL-CD pouvait être utilisé comme vecteur d'attaque, ils ont donc ajouté une protection.  Lorsque la console a reconnu le CD-ROM, BOOTROM a chargé IP.BIN de la manière habituelle, mais a chiffré 1ST_READ.BIN, à première vue de façon aléatoire.  L'exécutable de travail s'est transformé en un hachage chaotique qui a provoqué le gel de la console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/377/512/b26/377512b26e5672bd9f78bc904dc9715d.svg"></div><br>  De ce point de vue, la console semblait être protégée de manière fiable.  Dreamcast pourrait reconnaître une copie piratée du jeu, corrompre le fichier exécutable pendant le processus de téléchargement et vaincre les pirates. <br><br><h2>  Sers ma longue épée! </h2><br>  Le problème avec le fichier endommagé a été résolu lorsque fin 1999, le SDK Katana (SDK Sega officiel pour Dreamcast) a été volé par l'équipe de pirates d'Utopia <sup>[6]</sup> .  Il s'est avéré que le brouilleur n'était rien d'autre qu'une mise en œuvre du principe de la «sécurité par l'obscurité».  Le SDK contenait un brouilleur inversé, qui transformait l'exécutable correct en un «hachage arrière», qui redevenait un exécutable après avoir chargé et brouillé la console Dreamcast lors du démarrage à partir du CD-ROM. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/102/4e1/0b5/1024e10b5ec8dfd9b9604248728e9e83.svg"></div><br><h2>  Récupérer un jeu avec son GD-ROM </h2><br>  Le SDK volé était tout ce dont les pirates avaient besoin.  Grâce à la possibilité d'exécuter du code sur une machine, Dreamcast peut désormais être utilisé non pas comme une console de jeu, mais comme un lecteur GD-ROM.  Le «câble codeur» du SDK <sup>[7]</sup> a permis de connecter la console à un PC et d'établir une connexion physique.  Pour que la console vide le contenu des pistes GD, un fichier exécutable spécial a été écrit.  Ensuite, il a été réembrouillé et gravé sur un CD-ROM pour sortir tous les 1 Go de données via le port série de la console.  C'était un processus sujet aux erreurs qui prenait jusqu'à 18 heures <sup>[8]</sup> <sup>[9]</sup> .  Le résultat a été enregistré dans un format ".gdi" spécialement créé. <br><br><pre>  ikaruga.gdi 153 octets
 track01.bin 13 982 640 octets
 track02.raw 2,088,576 octets
 track03.bin 1185760800 octets </pre><br>  <b>Un fait intéressant</b> : vous pouvez voir que la quantité totale de données n'est pas de 1 Go, comme mentionné ci-dessus, mais de 1,2 Go.  Cela est dû au fait que les secteurs GD-ROM de 2352 octets suivent le format Red Book, qui utilise 12 octets pour la synchronisation, 4 octets pour l'en-tête, 2048 octets pour la charge utile et 288 octets pour le code de détection d'erreur / code de correction d'erreur <sup>[10 ]</sup> . <br><br><pre>  $ cat ikaruga.gdi 
 3
 1 0 4 2352 track01.bin 0
 2 5945 0 2352 track02.raw 0
 3 45000 4 2352 track03.bin 0 </pre><br><h2>  Comment adapter un GD-ROM de 1000 mégaoctets à un CD-ROM de 700 mégaoctets </h2><br>  Pour adapter le jeu sur un CD-ROM de 700 mégaoctets, les ressources du jeu ont été retravaillées.  Le système de fichiers ISO-9660 utilisé dans GD-ROM a facilité la modification de la discrétisation des vidéos et de la musique, ainsi que leur suppression complète.  Cependant, pour la plupart des jeux, un processus aussi complexe n'était pas nécessaire car ils n'occupaient pas l'intégralité des 1 Go.  Par exemple, l'Ikaruga de Treasure ne prenait que 150 Mo et la plupart de son contenu était rempli de zéros.  Dans de tels cas, il suffit de modifier les données de remplissage. <br><br>  En fait, ISO-9660 est un format tellement connu que même des scripts Python (par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gditools.py</a> ) ont été écrits pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">étudier le</a> contenu des archives .gdi. <br><br><h2>  Emballage et distribution </h2><br>  Les deux dernières étapes du processus ont été le brouillage inverse 1ST_READ.BIN et le regroupement de toutes les informations dans une archive .cdi afin que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DiscJuggler</a> puisse graver l'image sur CD-R.  Le résultat obtenu a fonctionné sans problème sur n'importe quel vancast Dreamcast sans avoir besoin d'une puce de modification. <br><br><h2>  Réaction SEGA et conséquences </h2><br>  SEGA a rapidement sorti la deuxième version de la console DC avec le MIL-CD complètement désactivé, mais le dommage a déjà été fait.  Après une chute catastrophique des revenus et la sortie de la PS2 concurrente, les développeurs ont abandonné Dreamcast et SEGA a abandonné le développement des équipements, se concentrant entièrement sur la création de logiciels. <br><br><h2>  Les références </h2><br>  [1] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Atelier SEGA GD</a> <br>  [2] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">segaretro.org: GD-ROM</a> <br>  [3] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microsoft annonce Windows CE Toolkit pour Dreamcast</a> <br>  [4] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeux Dreamcast utilisant Windows CE</a> <br>  [5] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IP.BIN et 1ST_READ.BIN</a> <br>  [6] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Construisons un jeu Sega Dreamcast à partir de zéro</a> <br>  [7] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">adaptateur série PC</a> <br>  [8] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un regard plus précis et plus approfondi sur la sécurité du Dreamcast</a> <br>  [9] Source: des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moyens plus rapides ont été conçus en dernier, en utilisant le connecteur à large bande du DC</a> <br>  [10] Source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dreamcast Myth: Capacité de stockage GD-ROM</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433072/">https://habr.com/ru/post/fr433072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433060/index.html">Pourquoi je ne crois pas aux microbenchmarks</a></li>
<li><a href="../fr433062/index.html">AXIS P1367 vs IDIS DC-B3303X: Comparez les caméras CCTV</a></li>
<li><a href="../fr433064/index.html">Gestion des incidents: «vous ne pouvez pas abandonner» ou l'art de placer des virgules</a></li>
<li><a href="../fr433066/index.html">Coupe HighLoad # 2. Championnat pour les développeurs backend de retour en service</a></li>
<li><a href="../fr433070/index.html">Comment distinguer le shampoing des champignons et les brochettes du champagne ... Elasticsearch - rechercher des produits dans les bases de données du magasin</a></li>
<li><a href="../fr433074/index.html">Passer à Kotlin dans un projet Android: trucs et astuces</a></li>
<li><a href="../fr433076/index.html">Comment nous avons créé notre bibliothèque Android Gallery pour afficher le contenu multimédia</a></li>
<li><a href="../fr433078/index.html">Nous écrivons des robots de trading en utilisant le cadre graphique StockSharp. 2e partie</a></li>
<li><a href="../fr433082/index.html">Pomper les comptes d'autrui est devenu une infraction pénale en Corée du Sud</a></li>
<li><a href="../fr433084/index.html">Leçon ouverte "Ingénierie des fonctionnalités sur l'exemple du jeu de données Titanic classique"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>