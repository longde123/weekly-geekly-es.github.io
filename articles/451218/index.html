<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öïÔ∏è üëáüèæ üß¢ Inteligencia de negocios en ruso - Quintetos üéæ ü§´ üèçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En una de las notas de nuestro blog, cubrimos el enfoque del almacenamiento y procesamiento de datos , sobre el cual recibimos varias preguntas bastan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inteligencia de negocios en ruso - Quintetos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/neoflex/blog/451218/"><p> En una de las notas de nuestro blog, cubrimos el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enfoque del almacenamiento y procesamiento de datos</a> , sobre el cual recibimos varias preguntas bastante esperadas de dicho plan: "En general, estamos esperando la implementaci√≥n, ahora vuela ...".  Con base en los resultados de varias implementaciones, hablar√© sobre los pros y los contras de este enfoque utilizando uno de nuestros desarrollos como ejemplo. </p><br><p>  Por lo general, ofrecemos a nuestros clientes una herramienta de BI bastante potente y flexible que puede resolver todos sus problemas, sin embargo, este es un producto comercial extranjero y los clientes est√°n cada vez m√°s interesados ‚Äã‚Äãen el tema de la sustituci√≥n de importaciones.  Como parte de la exploraci√≥n de nuestras perspectivas a este respecto, comenzamos a probar nuestro propio conjunto de herramientas de BI utilizando soluciones de c√≥digo abierto y una plataforma de desarrollo basada en quintetos. </p><br><img src="https://habrastorage.org/webt/u9/pk/5e/u9pk5ewq1x1ri6jrggrn9e38qu0.png"><br><br><p>  Tomamos nuestro producto comercial existente como referencia, por lo que realizaremos una comparaci√≥n con √©l siempre que sea posible. </p><a name="habracut"></a><br><p>  La tarea consist√≠a en crear los siguientes componentes: </p><br><ul><li>  una base de datos para almacenar marts de datos e informaci√≥n de servicio (usuarios, configuraciones, etc.); </li><li>  interfaz web del sistema y su ORM; </li><li>  Funcionalidad de BI: carga de datos, informes personalizados, gr√°ficos, tablas din√°micas. </li></ul><br><p>  Como base, tomamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una plataforma de desarrollo</a> que incluye un modelo de datos, un dise√±ador de consultas, un motor de plantillas y admite un modelo a seguir para el control de acceso de los usuarios. </p><br><blockquote><p>  El objeto de la orden es la conciliaci√≥n de los extractos bancarios y el an√°lisis de sus datos acumulados durante los √∫ltimos 7 a√±os.  Los datos de origen se almacenan en HDFS, los informes se calculan en el mismo lugar, luego sus resultados caen en la ventana de la base de datos relacional.  Los escaparates contienen aproximadamente 300 GB de datos para varias docenas de formularios de informes diferentes y varios cientos de informes relacionados.  El sistema debe atender a 20 usuarios con carga m√°xima, el tiempo de respuesta de la interfaz debe ser de 1 segundo. </p></blockquote><br><p>  La creaci√≥n de una estructura de datos no nos llev√≥ mucho tiempo: el editor de tipos de plataforma le permite crear y describir objetos de negocio tal cual, sin la necesidad de adaptar los requisitos del usuario a los detalles del entorno (tipos y dimensiones de datos, claves, restricciones, nombres de campos de datos, identificadores, etc.).  Esta es la primera ventaja de los quintetos que podemos solucionar. </p><br><p>  As√≠ es como se crea la estructura de datos: definimos los t√©rminos necesarios y a partir de ellos formamos los objetos de nuestra √°rea tem√°tica: </p><br><img src="https://habrastorage.org/webt/ca/xm/ow/caxmowlcuib8qxvoeferzoit26y.gif"><br><p>  Despu√©s de varios minutos de actividad en formato copiar / pegar, obtuvimos la estructura de datos requerida para un formulario y varios directorios auxiliares.  La estructura de los datos del formulario (despu√©s de la descomposici√≥n por parte del analista) se ve as√≠: </p><br><img src="https://habrastorage.org/webt/ok/gd/9d/okgd9dlwt9nkiaet4nhee488nl4.png"><br><br><p>  Un analista familiarizado con el sentido comercial de los datos presentados aqu√≠ lee lo siguiente: cada instancia F110 (Formulario 110 en terminolog√≠a CB) tiene una precisi√≥n dada (puede ser "exacta" o "redondeada") e incluye un conjunto de c√≥digos, para cada uno de los cuales se indican cantidades en rublos y moneda. </p><br><p>  En el navegador de datos, donde los datos se presentan de acuerdo con la estructura especificada, vemos una tabla sobre las instancias de formularios existentes en el sistema: </p><br><img src="https://habrastorage.org/webt/ro/n6/ft/ron6ftlagq_rqj5tz8c_ghxdkzk.png"><br><br><p>  El valor de identificaci√≥n del formulario es su fecha de informe, los c√≥digos de informe se almacenan en forma de una matriz subordinada, cuyo tama√±o vemos entre par√©ntesis. </p><br><p>  Como se mencion√≥, descomponemos un poco los datos, en comparaci√≥n con la estructura original, para no almacenar largas filas de valores repetidos en la base de datos, como lo que ve un programador o administrador de base de datos: </p><br>  Tabla con datos en el sistema de referencia: <br><img src="https://habrastorage.org/webt/nr/4m/k3/nr4mk3p6jfxs-ejr8upnxi1vbns.png"><br><br><p>  Por cierto, es por eso que estamos posicionando la plataforma (en adelante la llamaremos Integral) como una herramienta de desarrollo para el analista, no para el programador. </p><br><p>  La estructura de datos auxiliares es inconmensurablemente m√°s grande, porque almacena todos los datos iniciales, la configuraci√≥n del informe, las reglas para verificar la integridad de los datos dentro del informe y en los informes relacionados, el historial de c√°lculos y conciliaciones, as√≠ como algunas reglas para la transformaci√≥n del negocio de datos durante la construcci√≥n del informe: </p><br><img src="https://habrastorage.org/webt/5-/ty/xy/5-tyxyaidwomjswea4rpn8sibhs.png"><br><p>  (la estructura no se da en su totalidad) </p><br><p>  Cuando la estructura de datos est√° lista, puede cargar datos en ella.  La manera m√°s f√°cil aqu√≠ es cargar un archivo preparado en el formato Integral (an√°logo a .csv, pero con marcado de tipo).  Este formato contiene una descripci√≥n de los datos y los datos en s√≠. </p><br><div class="spoiler">  <b class="spoiler_title">Ver archivo</b> <div class="spoiler_text"><p>  En el ejemplo a continuaci√≥n, las primeras 3 l√≠neas del archivo describen la estructura del formulario (si no est√° en el sistema, se crear√°), y luego los datos en s√≠, los par√°metros del formulario y los par√°metros de los objetos de informe subordinados a √©l. </p><br><pre><code class="plaintext hljs">268:110:DATE;277;270; 277::SHORT; 270:  :SHORT;  :SIGNED;   :SIGNED; 268::20121231;281;; 270::A/5.2;1233682389.47;; 277:281:; 270::A/5.3;622836720.22;; 270::A/6.4;19800;; 270::A/9.2;27125165.14;; 270::S16203/1.2;608607846.309999;; 270::S16305/4;2727510994.84;; 270::S16305/4.1;32049069.51;; 270::S16305/14;2737711.65;; 270::S25302/4;2725748122.98999;; 270::S25302/4.1;40952511.36;; 270::IL/2;87429694.5699999;62717458.21; 270::IL/4;33517212.95;; 270::IL/9;1423281.69;8278.24; 270::IL/11;86433534.5699999;519956.63; 270::IA/1;147792224.509999;4517060.94; 270::IA/2;737704.92;; 270::IA/3;27099836.07;2637.79; 270::IA/6;5607868.86;408410.4; 270::IA/8;103837028.49;48841202.69; 270::IA/10;112302573.56;; 268::20121231;280;; 270::A/5.2;1233682;; 277:280:; 270::A/5.3;622837;; 270::A/6.4;20;; 270::A/9.2;27125;; 270::S16203/1.2;608608;;</code> </pre> </div></div><br>  Para este formulario, la base de datos tiene 4470 fechas de informes, que, cuando se descargan en un archivo plano, ocupan un poco m√°s de 1 MB.  En la base de datos original (Oracle), ocupan 3.1 MB (sin √≠ndices) en forma normalizada y 4.2 MB en un escaparate desnormalizado, que estamos tratando de repetir como quintetos.  Los quintetos est√°n indexados y normalizados, y en su formato estos datos ya ocupan 10 MB. <br><a name="volumes"></a><br><br>  Las cantidades de datos para comparaci√≥n se resumen en la tabla (en megabytes): <br><div class="scrollable-table"><table><tbody><tr><th></th><th align="center">  Texto </th><th align="center">  RDBMS </th><th align="center">  Quintetos </th></tr><tr><td>  Datos </td><td align="right">  1.1 </td><td align="right">  3.1 </td><td align="right">  5.1 </td></tr><tr><td>  Desnormalizado </td><td></td><td align="right">  4.2 4.2 </td><td></td></tr><tr><td>  √çndices </td><td></td><td align="right">  6.2 </td><td align="right">  5.1 </td></tr><tr><td>  Datos + √çndices </td><td></td><td align="right">  9.3 </td><td align="right">  10,2 </td></tr></tbody></table></div><br><p>  En este punto, se debe prestar atenci√≥n al tama√±o ocupado por las bases para los enfoques comparados.  Debido a la normalizaci√≥n adicional de quintetos y gastos para √≠ndices compuestos en la base de referencia, el tama√±o total ocupado por las bases de datos es casi el mismo. </p><br>  Base de referencia: <br><img src="https://habrastorage.org/webt/07/ue/vu/07uevub4nkj0qnbgctmpqfho9pe.png"><br><br>  Quintetos: <br><img src="https://habrastorage.org/webt/cq/_e/d2/cq_ed2rliwl4gkwnxgp_pqsjlvy.png"><br><br><p>  Adem√°s, en Integral, indexamos inmediatamente todos los campos de la tabla y del sistema de referencia, solo la fecha, el c√≥digo y la cantidad en rublos, lo que requerir√° costos adicionales cuando surjan nuevas necesidades. </p><br><p>  <i>Como referencia: en la base de datos, el tama√±o total de este formulario, incluidos los informes y la configuraci√≥n de soporte, es de aproximadamente 400 MB (es relativamente peque√±o).</i> </p><br><p>  Entonces, los datos se cargan y la parte m√°s dif√≠cil del proyecto est√° por venir: crear una interfaz.  La interfaz del sistema de referencia le permite ver los datos de los formularios, informes de respaldo, configuraciones y el ciclo de vida de los formularios.  Para administrar el acceso y comunicarse con la base de datos, utilizamos las capacidades b√°sicas de nuestra plataforma: un modelo a seguir y un dise√±ador de informes. </p><br><p>  La lista de usuarios con sus roles se ve as√≠: </p><br><img src="https://habrastorage.org/webt/ie/v1/g5/iev1g5bfej66iarj8prm4rxeen4.png"><br><br><p>  Si hace clic en el nombre del rol (marcado con un √≥valo rojo en la figura anterior), puede ver su contenido: </p><br><img src="https://habrastorage.org/webt/g1/8x/4w/g18x4wxhcqn-ybvo_fxrocan-s4.png"><br><br><p>  Los objetos de rol se pueden establecer en 3 niveles de acceso; se puede usar la m√°scara: </p><br><img src="https://habrastorage.org/webt/dv/e4/tr/dve4trqzpgdl84uijgfbn_1lcds.png"><br><br><p>  La edici√≥n de datos tambi√©n se realiza mediante la interfaz b√°sica.  Aqu√≠, por ejemplo, hay un formulario de edici√≥n de usuario: </p><br><img src="https://habrastorage.org/webt/jd/vt/xz/jdvtxzhmaylnkg-zhv0swxwefqa.png"><br><br><p>  Presentamos el men√∫ espec√≠fico de nuestra aplicaci√≥n y sus lugares de trabajo en un archivo compacto, ya que todos son del mismo tipo: un formulario de solicitud de 2-3 elementos y una tabla con los resultados de las solicitudes. </p><br><img src="https://habrastorage.org/webt/up/el/pr/upelprt0of7_mecdtpk_mqgxvd4.png"><br><br><h4>  La arquitectura result√≥ ser muy simple: creamos muchas consultas de datos (vistas) y escribimos un complemento que implementa muestras de datos arbitrarias dentro de las tablas y campos incluidos en estas vistas. </h4><br><p>  Por ejemplo, tenemos un llamado informe de descifrado para formar 110, que contiene datos no agregados sobre los que se basa.  As√≠ es como se ve este informe: </p><br><img src="https://habrastorage.org/webt/jd/zm/fc/jdzmfcrujmetvb_w2vqrkfa6g-y.png"><br><br><p>  Para verificar la exactitud del formulario, el usuario debe poder hacer cualquier selecci√≥n, ordenar, filtrar, agrupar, transponer, as√≠ como crear sus propios campos calculados.  Nuestro complemento se llama mediante el bot√≥n "Acciones" en la parte superior de la tabla. </p><br><img src="https://habrastorage.org/webt/n4/kx/ni/n4kxnicwdqq4y6_ykf06x-pnhi0.png"><br><br><p>  El complemento repite la funcionalidad del generador de consultas Integral, pero adem√°s de obtener datos, puede dibujar gr√°ficos y tablas din√°micas.  Por ejemplo, necesitamos filtrar por Secci√≥n, agregar un par de columnas calculadas y hacer una selecci√≥n de las cantidades agrupadas por ellas.  Establecemos todo esto: </p><br><img src="https://habrastorage.org/webt/zd/hi/rx/zdhirxamjgonu9xzepqwike0cqe.png"><br><br><p>  Las nuevas columnas se agregan a la lista mediante el enlace del mismo nombre.  Mediante el bot√≥n "C√°lculos" establecemos las f√≥rmulas para ellos utilizando un constructor simple: </p><br><img src="https://habrastorage.org/webt/d6/tu/fc/d6tufcwrz1qaxfhca1fwiokqdjo.png"><br><br><p>  Establecemos un nuevo orden de columnas y hacemos clic en "Aplicar" y nuestro informe se modifica seg√∫n sea necesario; en lugar de 7 columnas base, vemos tres, dos de las cuales acabamos de crear: </p><br><img src="https://habrastorage.org/webt/4t/sp/1a/4tsp1arr8uu8nbz7zeut6qd0foi.png"><br><br><div class="spoiler">  <b class="spoiler_title">¬øC√≥mo funciona debajo del cap√≥?</b> <div class="spoiler_text"><p>  El complemento se comunica con el servicio web de la aplicaci√≥n a trav√©s de la API, realiz√≥ la siguiente solicitud: </p><br><pre> <code class="plaintext hljs">api/neo/report/1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\:1392578\:\,5),SUBSTRING(\:1392578\:\,6\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10</code> </pre><br><p>  Y obtuve esta respuesta: </p><br><pre> <code class="json hljs">{ ¬´columns¬ª: [ ¬´LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">5</span></span>)¬ª, ¬´SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)¬ª, ¬´<span class="hljs-number"><span class="hljs-number">1392617</span></span>¬ª ], ¬´formats¬ª: [ ¬´SHORT¬ª, ¬´SHORT¬ª, ¬´SIGNED¬ª ], ¬´data¬ª: { ¬´LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,5)¬ª: [ ¬´<span class="hljs-number"><span class="hljs-number">60324</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">40817</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">47425</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">47404</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">60302</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">47404</span></span>¬ª ], ¬´SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,6,3)¬ª: [ ¬´<span class="hljs-number"><span class="hljs-number">810</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">810</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">810</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">840</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">810</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">978</span></span>¬ª ], ¬´  ¬ª: [ ¬´<span class="hljs-number"><span class="hljs-number">153</span></span> <span class="hljs-number"><span class="hljs-number">825.71</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">527</span></span> <span class="hljs-number"><span class="hljs-number">901.11</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">415</span></span> <span class="hljs-number"><span class="hljs-number">189.23</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.02</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">330.88</span></span>¬ª, ¬´<span class="hljs-number"><span class="hljs-number">58</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.00</span></span>¬ª ] }, ¬´totals¬ª: [ ¬´‚Äû, ‚Äú¬ª, ¬´<span class="hljs-number"><span class="hljs-number">69</span></span> <span class="hljs-number"><span class="hljs-number">685</span></span> <span class="hljs-number"><span class="hljs-number">246.95</span></span>¬ª ] }</code> </pre><br><p>  Si alguien est√° interesado en qu√© consulta SQL real se ejecut√≥ en la base de datos de quintetos, aqu√≠ est√°: </p><br><div class="spoiler">  <b class="spoiler_title">Ver SQL</b> <div class="spoiler_text"><h4>  El analista no ve este SQL; utiliza el generador de consultas que se describe a continuaci√≥n. </h4><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">5</span></span>) v13, <span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v14, <span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> neo a182081 <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182083 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182083.up=a182081.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.t=<span class="hljs-number"><span class="hljs-number">182083</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182088 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182088.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182088.t=<span class="hljs-number"><span class="hljs-number">182088</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182090 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182090.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182090.t=<span class="hljs-number"><span class="hljs-number">182090</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182091 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182091.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182091.t=<span class="hljs-number"><span class="hljs-number">182091</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182092 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182092.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182092.t=<span class="hljs-number"><span class="hljs-number">182092</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a299 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a299.t=<span class="hljs-number"><span class="hljs-number">299</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.val=a299.val <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a328 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a328.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a328.t=<span class="hljs-number"><span class="hljs-number">328</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a303 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a303.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.t=<span class="hljs-number"><span class="hljs-number">303</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a304 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a304.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.t=<span class="hljs-number"><span class="hljs-number">304</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182089 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182089.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182089.t=<span class="hljs-number"><span class="hljs-number">182089</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> a182081.up!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(a182081.val)!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.t=<span class="hljs-number"><span class="hljs-number">182081</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.val=<span class="hljs-string"><span class="hljs-string">'20181231‚Ä≤ AND a328.val ='</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>‚Ä≤ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.val&gt;=<span class="hljs-string"><span class="hljs-string">'19000101‚Ä≤ AND a303.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20181231</span></span>‚Ä≤ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.val&gt;=<span class="hljs-string"><span class="hljs-string">'20181231‚Ä≤ AND a304.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20991231</span></span>‚Ä≤ <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v13, v14 <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> SIGNED) <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> </div></div><br><p>  La solicitud puede parecer un poco m√°s complicada de lo esperado, ya que selecciona los datos actuales de los c√≥digos de informes en funci√≥n de su validez.  En el generador de informes integrales, esta consulta consta de columnas de informes, par√°metros y condiciones de uni√≥n de tabla, si es necesario. </p><br><img src="https://habrastorage.org/webt/ro/mx/tw/romxtw85qjp94yfrzqmf47vnvsm.png"><br><br><p>  La integral en s√≠ misma puede generar condiciones de uni√≥n a la tabla, ya que todas ellas est√°n determinadas por las relaciones de quinteto, sin embargo, en el caso de las versiones, tuvimos que combinar las tablas manualmente y especificar expl√≠citamente la condici√≥n para la UNI√ìN.  Los c√≥digos en la cl√°usula ON son identificadores para columnas y objetos de consulta. </p><br><p>  La consulta combina tres tablas, eligiendo de ellas los siguientes campos de datos ("columnas de consulta" necesarias): </p><br><img src="https://habrastorage.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png"><br>  <a href="">(imagen a tama√±o completo)</a> <br><br><p>  Las columnas del informe, los campos calculados, los filtros, etc., que conforman la consulta SQL, se enumeran aqu√≠.  Report Builder le permite implementar casi cualquier dise√±o del lenguaje SQL, incluidas las consultas de uni√≥n y las consultas anidadas. </p><br></div></div><br><p>  Adem√°s de las selecciones con agrupaciones, el usuario puede usar el mecanismo de tablas din√°micas.  Hemos agregado la popular herramienta de tabla <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pivottable.js.org</a> a nuestro complemento. <br>  Seleccione las columnas de inter√©s para nosotros y cambie al modo de tabla din√°mica: </p><br><img src="https://habrastorage.org/webt/5n/wb/du/5nwbduykd19ryanqanvvtaymp4g.png"><br><br><p>  Aqu√≠, usando arrastrar y soltar, podemos analizar los datos recibidos por la muestra que configuramos, incluidos nuestros campos arbitrarios.  Adem√°s, aqu√≠ tambi√©n puede filtrar datos por cualquier campo. </p><br><img src="https://habrastorage.org/webt/y6/dg/tg/y6dgtgwvwf4yprzf6qvp2dijbss.gif"><br><br><p>  Utilizamos el producto gratuito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.amcharts.com</a> para dibujar gr√°ficos.  Con √©l, como con pivottable, todo es bastante simple: seleccionamos el tipo de gr√°fico e inicializamos el componente con nuestra matriz de datos obtenida de Integral: </p><br><img src="https://habrastorage.org/webt/j3/zt/eu/j3zteutdk8xhxddxikns8nr12fo.gif"><br><br><p>  Con esto, de hecho, completamos la tarea en la medida que satisfaga a los usuarios del producto existente.  Ahora tenemos un sistema que cumple con los requisitos de sustituci√≥n de importaciones: todos los productos son gratuitos y reemplazables.  S√≠, nos hemos dado cuenta de todas las posibilidades que ofrece el sistema existente, pero solo de las que son necesarias para <i>este</i> cliente.  ¬°Pero acabamos de empezar! </p><br><a name="tests"></a><br><h2>  ¬øEntonces vol√≥ o no? </h2><br><p>  Tambi√©n deber√≠amos discutir el rendimiento del sistema resultante.  En este problema, con una cantidad de datos suficientemente grande (cientos de gigabytes), las muestras afectan a peque√±os fragmentos, cuyos quintetos siempre se recopilan mediante √≠ndices.  Esto lleva al hecho de que, en cualquier tama√±o de la base de datos, las consultas se procesan a una velocidad aceptable, sin provocar una degradaci√≥n del rendimiento similar a una avalancha. </p><br><p>  Registramos 20 acciones del usuario en un script de prueba y lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejecutamos</a> en el servicio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">loadimpact.com</a> .  Result√≥ 27 solicitudes diferentes, porque algunas acciones se realizan en 2 solicitudes al servidor (por ejemplo, para crear una p√°gina visualizada). </p><br><div class="spoiler">  <b class="spoiler_title">El gui√≥n de prueba result√≥ as√≠</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { group, sleep } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'k6‚Ä≤; import http from '</span></span>k6/http<span class="hljs-string"><span class="hljs-string">'; // Version: 1.3 // Creator: Load Impact URL test analyzer export let options = { stages: [ { ¬´duration¬ª: ¬´3m0s¬ª, ¬´target¬ª: 25 } ], maxRedirects: 0, discardResponseBodies: true, }; export default function() { group("page_1 ‚Äî https://*****.ru/neo/dict¬´, function() { let req, res; req = [{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/info¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´upgrade-insecure-requests¬ª: ¬´1¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8¬ª } } }]; res = http.batch(req); sleep(0.62); req = [{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/info¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´upgrade-insecure-requests¬ª: ¬´1¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392573?FR_date=20181231&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392573?FR_date=20181031¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392573?FR_date=20180930&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´*/*¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1387723?&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´*/*¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1387723?&amp;LIMIT=10&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´*/*¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392741?¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392757?&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392768?&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_dropdown_arrow.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_detailed_report.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_classifiers.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_launch_report.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_manage_form_status.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_quality_management.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/img/nav_download.svg¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´image/webp,image/apng,image/*,*/*;q=0.8¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/download/neo/css/variables.css¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392779?&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392538?&amp;LIMIT=10&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/edit_obj/1392129¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/edit_obj/1390552¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/object/18¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/neo/info¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNT¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´text/css,*/*;q=0.1¬ª, ¬´referer¬ª: ¬´https://*****.ru/neo/dict¬ª } } },{ ¬´method¬ª: ¬´get¬ª, ¬´url¬ª: ¬´https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxP.ttf¬ª, ¬´params¬ª: { ¬´headers¬ª: { ¬´origin¬ª: ¬´https://*****.ru¬ª, ¬´accept-encoding¬ª: ¬´gzip, deflate¬ª, ¬´accept-language¬ª: ¬´en-US¬ª, ¬´user-agent¬ª: ¬´Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36¬ª, ¬´accept¬ª: ¬´*/*¬ª, ¬´referer¬ª: ¬´https://fonts.googleapis.com/css?family=Roboto¬ª } } }]; res = http.batch(req); // Random sleep between 5s and 10s sleep(Math.floor(Math.random()*5+5)); }); }</span></span></code> </pre> <br></div></div><br><p>  Esto es lo que vimos cuando ejecutamos el script: el generador de carga envi√≥ a nuestra aplicaci√≥n un n√∫mero creciente de solicitudes por segundo, obtuvimos una escalera cl√°sica para buscar el rendimiento m√°ximo / m√°ximo: </p><br><img src="https://habrastorage.org/webt/ig/a_/xt/iga_xtu0manyadhs8cz_ytmj3k4.png"><br><br><p>  Este generador env√≠a solicitudes en lotes, y no de manera uniforme, como ser√≠a el caso con usuarios simult√°neos.  Por lo tanto, el gr√°fico muestra picos de carga, y el rendimiento general tambi√©n se ve peor en este modo. </p><br><p>          : </p><br><img src="https://habrastorage.org/webt/zn/an/je/znanjexiyp3mkguce5d0ycw0ulc.png"><br><br><p>       ,   -      SQL-.   ,   ,   8  33 SQL-     :       ,  -,  SQL- (   ,  )      . </p><br><p>   ,  20-25    (    20 ),       ‚Äî 1   .     ,     : 1  2.4   1   . </p><br><p>    ( 10   )      0.1-0.3 ,     . </p><br><h4>  ,                  . </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451218/">https://habr.com/ru/post/451218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451208/index.html">Clasificaci√≥n "topol√≥gica" de un gr√°fico con ciclos</a></li>
<li><a href="../451210/index.html">Integraci√≥n de Jira con GitLab</a></li>
<li><a href="../451212/index.html">Sistema de protecci√≥n de arco con la capacidad de operar con una se√±al de corriente.</a></li>
<li><a href="../451214/index.html">Fundamentos de la inteligencia artificial moderna: ¬øc√≥mo funciona y destruir√° nuestra sociedad este a√±o?</a></li>
<li><a href="../451216/index.html">C√≥mo deshabilitar completamente Windows Defender en Windows 10</a></li>
<li><a href="../451220/index.html">Detalles t√©cnicos del bloqueo reciente de la extensi√≥n de Firefox</a></li>
<li><a href="../451222/index.html">No soy ingeniero en mama</a></li>
<li><a href="../451224/index.html">Noticias de la semana: los coleccionistas quieren acceso a tel√©fonos rusos, nuevo kernel Linux 5.1, fuga de datos de Samsung</a></li>
<li><a href="../451226/index.html">Nueva vida de juegos antiguos: el directorio de c√≥digo fuente m√°s abierto de los puertos de origen (Java + PHP)</a></li>
<li><a href="../451230/index.html">Cinco errores que cometen las personas al prepararse para la inmigraci√≥n laboral en los Estados Unidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>