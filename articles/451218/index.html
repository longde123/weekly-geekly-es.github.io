<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âš•ï¸ ğŸ‘‡ğŸ¾ ğŸ§¢ Inteligencia de negocios en ruso - Quintetos ğŸ¾ ğŸ¤« ğŸï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En una de las notas de nuestro blog, cubrimos el enfoque del almacenamiento y procesamiento de datos , sobre el cual recibimos varias preguntas bastan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inteligencia de negocios en ruso - Quintetos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/neoflex/blog/451218/"><p> En una de las notas de nuestro blog, cubrimos el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enfoque del almacenamiento y procesamiento de datos</a> , sobre el cual recibimos varias preguntas bastante esperadas de dicho plan: "En general, estamos esperando la implementaciÃ³n, ahora vuela ...".  Con base en los resultados de varias implementaciones, hablarÃ© sobre los pros y los contras de este enfoque utilizando uno de nuestros desarrollos como ejemplo. </p><br><p>  Por lo general, ofrecemos a nuestros clientes una herramienta de BI bastante potente y flexible que puede resolver todos sus problemas, sin embargo, este es un producto comercial extranjero y los clientes estÃ¡n cada vez mÃ¡s interesados â€‹â€‹en el tema de la sustituciÃ³n de importaciones.  Como parte de la exploraciÃ³n de nuestras perspectivas a este respecto, comenzamos a probar nuestro propio conjunto de herramientas de BI utilizando soluciones de cÃ³digo abierto y una plataforma de desarrollo basada en quintetos. </p><br><img src="https://habrastorage.org/webt/u9/pk/5e/u9pk5ewq1x1ri6jrggrn9e38qu0.png"><br><br><p>  Tomamos nuestro producto comercial existente como referencia, por lo que realizaremos una comparaciÃ³n con Ã©l siempre que sea posible. </p><a name="habracut"></a><br><p>  La tarea consistÃ­a en crear los siguientes componentes: </p><br><ul><li>  una base de datos para almacenar marts de datos e informaciÃ³n de servicio (usuarios, configuraciones, etc.); </li><li>  interfaz web del sistema y su ORM; </li><li>  Funcionalidad de BI: carga de datos, informes personalizados, grÃ¡ficos, tablas dinÃ¡micas. </li></ul><br><p>  Como base, tomamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una plataforma de desarrollo</a> que incluye un modelo de datos, un diseÃ±ador de consultas, un motor de plantillas y admite un modelo a seguir para el control de acceso de los usuarios. </p><br><blockquote><p>  El objeto de la orden es la conciliaciÃ³n de los extractos bancarios y el anÃ¡lisis de sus datos acumulados durante los Ãºltimos 7 aÃ±os.  Los datos de origen se almacenan en HDFS, los informes se calculan en el mismo lugar, luego sus resultados caen en la ventana de la base de datos relacional.  Los escaparates contienen aproximadamente 300 GB de datos para varias docenas de formularios de informes diferentes y varios cientos de informes relacionados.  El sistema debe atender a 20 usuarios con carga mÃ¡xima, el tiempo de respuesta de la interfaz debe ser de 1 segundo. </p></blockquote><br><p>  La creaciÃ³n de una estructura de datos no nos llevÃ³ mucho tiempo: el editor de tipos de plataforma le permite crear y describir objetos de negocio tal cual, sin la necesidad de adaptar los requisitos del usuario a los detalles del entorno (tipos y dimensiones de datos, claves, restricciones, nombres de campos de datos, identificadores, etc.).  Esta es la primera ventaja de los quintetos que podemos solucionar. </p><br><p>  AsÃ­ es como se crea la estructura de datos: definimos los tÃ©rminos necesarios y a partir de ellos formamos los objetos de nuestra Ã¡rea temÃ¡tica: </p><br><img src="https://habrastorage.org/webt/ca/xm/ow/caxmowlcuib8qxvoeferzoit26y.gif"><br><p>  DespuÃ©s de varios minutos de actividad en formato copiar / pegar, obtuvimos la estructura de datos requerida para un formulario y varios directorios auxiliares.  La estructura de los datos del formulario (despuÃ©s de la descomposiciÃ³n por parte del analista) se ve asÃ­: </p><br><img src="https://habrastorage.org/webt/ok/gd/9d/okgd9dlwt9nkiaet4nhee488nl4.png"><br><br><p>  Un analista familiarizado con el sentido comercial de los datos presentados aquÃ­ lee lo siguiente: cada instancia F110 (Formulario 110 en terminologÃ­a CB) tiene una precisiÃ³n dada (puede ser "exacta" o "redondeada") e incluye un conjunto de cÃ³digos, para cada uno de los cuales se indican cantidades en rublos y moneda. </p><br><p>  En el navegador de datos, donde los datos se presentan de acuerdo con la estructura especificada, vemos una tabla sobre las instancias de formularios existentes en el sistema: </p><br><img src="https://habrastorage.org/webt/ro/n6/ft/ron6ftlagq_rqj5tz8c_ghxdkzk.png"><br><br><p>  El valor de identificaciÃ³n del formulario es su fecha de informe, los cÃ³digos de informe se almacenan en forma de una matriz subordinada, cuyo tamaÃ±o vemos entre parÃ©ntesis. </p><br><p>  Como se mencionÃ³, descomponemos un poco los datos, en comparaciÃ³n con la estructura original, para no almacenar largas filas de valores repetidos en la base de datos, como lo que ve un programador o administrador de base de datos: </p><br>  Tabla con datos en el sistema de referencia: <br><img src="https://habrastorage.org/webt/nr/4m/k3/nr4mk3p6jfxs-ejr8upnxi1vbns.png"><br><br><p>  Por cierto, es por eso que estamos posicionando la plataforma (en adelante la llamaremos Integral) como una herramienta de desarrollo para el analista, no para el programador. </p><br><p>  La estructura de datos auxiliares es inconmensurablemente mÃ¡s grande, porque almacena todos los datos iniciales, la configuraciÃ³n del informe, las reglas para verificar la integridad de los datos dentro del informe y en los informes relacionados, el historial de cÃ¡lculos y conciliaciones, asÃ­ como algunas reglas para la transformaciÃ³n del negocio de datos durante la construcciÃ³n del informe: </p><br><img src="https://habrastorage.org/webt/5-/ty/xy/5-tyxyaidwomjswea4rpn8sibhs.png"><br><p>  (la estructura no se da en su totalidad) </p><br><p>  Cuando la estructura de datos estÃ¡ lista, puede cargar datos en ella.  La manera mÃ¡s fÃ¡cil aquÃ­ es cargar un archivo preparado en el formato Integral (anÃ¡logo a .csv, pero con marcado de tipo).  Este formato contiene una descripciÃ³n de los datos y los datos en sÃ­. </p><br><div class="spoiler">  <b class="spoiler_title">Ver archivo</b> <div class="spoiler_text"><p>  En el ejemplo a continuaciÃ³n, las primeras 3 lÃ­neas del archivo describen la estructura del formulario (si no estÃ¡ en el sistema, se crearÃ¡), y luego los datos en sÃ­, los parÃ¡metros del formulario y los parÃ¡metros de los objetos de informe subordinados a Ã©l. </p><br><pre><code class="plaintext hljs">268:110:DATE;277;270; 277::SHORT; 270:  :SHORT;  :SIGNED;   :SIGNED; 268::20121231;281;; 270::A/5.2;1233682389.47;; 277:281:; 270::A/5.3;622836720.22;; 270::A/6.4;19800;; 270::A/9.2;27125165.14;; 270::S16203/1.2;608607846.309999;; 270::S16305/4;2727510994.84;; 270::S16305/4.1;32049069.51;; 270::S16305/14;2737711.65;; 270::S25302/4;2725748122.98999;; 270::S25302/4.1;40952511.36;; 270::IL/2;87429694.5699999;62717458.21; 270::IL/4;33517212.95;; 270::IL/9;1423281.69;8278.24; 270::IL/11;86433534.5699999;519956.63; 270::IA/1;147792224.509999;4517060.94; 270::IA/2;737704.92;; 270::IA/3;27099836.07;2637.79; 270::IA/6;5607868.86;408410.4; 270::IA/8;103837028.49;48841202.69; 270::IA/10;112302573.56;; 268::20121231;280;; 270::A/5.2;1233682;; 277:280:; 270::A/5.3;622837;; 270::A/6.4;20;; 270::A/9.2;27125;; 270::S16203/1.2;608608;;</code> </pre> </div></div><br>  Para este formulario, la base de datos tiene 4470 fechas de informes, que, cuando se descargan en un archivo plano, ocupan un poco mÃ¡s de 1 MB.  En la base de datos original (Oracle), ocupan 3.1 MB (sin Ã­ndices) en forma normalizada y 4.2 MB en un escaparate desnormalizado, que estamos tratando de repetir como quintetos.  Los quintetos estÃ¡n indexados y normalizados, y en su formato estos datos ya ocupan 10 MB. <br><a name="volumes"></a><br><br>  Las cantidades de datos para comparaciÃ³n se resumen en la tabla (en megabytes): <br><div class="scrollable-table"><table><tbody><tr><th></th><th align="center">  Texto </th><th align="center">  RDBMS </th><th align="center">  Quintetos </th></tr><tr><td>  Datos </td><td align="right">  1.1 </td><td align="right">  3.1 </td><td align="right">  5.1 </td></tr><tr><td>  Desnormalizado </td><td></td><td align="right">  4.2 4.2 </td><td></td></tr><tr><td>  Ãndices </td><td></td><td align="right">  6.2 </td><td align="right">  5.1 </td></tr><tr><td>  Datos + Ãndices </td><td></td><td align="right">  9.3 </td><td align="right">  10,2 </td></tr></tbody></table></div><br><p>  En este punto, se debe prestar atenciÃ³n al tamaÃ±o ocupado por las bases para los enfoques comparados.  Debido a la normalizaciÃ³n adicional de quintetos y gastos para Ã­ndices compuestos en la base de referencia, el tamaÃ±o total ocupado por las bases de datos es casi el mismo. </p><br>  Base de referencia: <br><img src="https://habrastorage.org/webt/07/ue/vu/07uevub4nkj0qnbgctmpqfho9pe.png"><br><br>  Quintetos: <br><img src="https://habrastorage.org/webt/cq/_e/d2/cq_ed2rliwl4gkwnxgp_pqsjlvy.png"><br><br><p>  AdemÃ¡s, en Integral, indexamos inmediatamente todos los campos de la tabla y del sistema de referencia, solo la fecha, el cÃ³digo y la cantidad en rublos, lo que requerirÃ¡ costos adicionales cuando surjan nuevas necesidades. </p><br><p>  <i>Como referencia: en la base de datos, el tamaÃ±o total de este formulario, incluidos los informes y la configuraciÃ³n de soporte, es de aproximadamente 400 MB (es relativamente pequeÃ±o).</i> </p><br><p>  Entonces, los datos se cargan y la parte mÃ¡s difÃ­cil del proyecto estÃ¡ por venir: crear una interfaz.  La interfaz del sistema de referencia le permite ver los datos de los formularios, informes de respaldo, configuraciones y el ciclo de vida de los formularios.  Para administrar el acceso y comunicarse con la base de datos, utilizamos las capacidades bÃ¡sicas de nuestra plataforma: un modelo a seguir y un diseÃ±ador de informes. </p><br><p>  La lista de usuarios con sus roles se ve asÃ­: </p><br><img src="https://habrastorage.org/webt/ie/v1/g5/iev1g5bfej66iarj8prm4rxeen4.png"><br><br><p>  Si hace clic en el nombre del rol (marcado con un Ã³valo rojo en la figura anterior), puede ver su contenido: </p><br><img src="https://habrastorage.org/webt/g1/8x/4w/g18x4wxhcqn-ybvo_fxrocan-s4.png"><br><br><p>  Los objetos de rol se pueden establecer en 3 niveles de acceso; se puede usar la mÃ¡scara: </p><br><img src="https://habrastorage.org/webt/dv/e4/tr/dve4trqzpgdl84uijgfbn_1lcds.png"><br><br><p>  La ediciÃ³n de datos tambiÃ©n se realiza mediante la interfaz bÃ¡sica.  AquÃ­, por ejemplo, hay un formulario de ediciÃ³n de usuario: </p><br><img src="https://habrastorage.org/webt/jd/vt/xz/jdvtxzhmaylnkg-zhv0swxwefqa.png"><br><br><p>  Presentamos el menÃº especÃ­fico de nuestra aplicaciÃ³n y sus lugares de trabajo en un archivo compacto, ya que todos son del mismo tipo: un formulario de solicitud de 2-3 elementos y una tabla con los resultados de las solicitudes. </p><br><img src="https://habrastorage.org/webt/up/el/pr/upelprt0of7_mecdtpk_mqgxvd4.png"><br><br><h4>  La arquitectura resultÃ³ ser muy simple: creamos muchas consultas de datos (vistas) y escribimos un complemento que implementa muestras de datos arbitrarias dentro de las tablas y campos incluidos en estas vistas. </h4><br><p>  Por ejemplo, tenemos un llamado informe de descifrado para formar 110, que contiene datos no agregados sobre los que se basa.  AsÃ­ es como se ve este informe: </p><br><img src="https://habrastorage.org/webt/jd/zm/fc/jdzmfcrujmetvb_w2vqrkfa6g-y.png"><br><br><p>  Para verificar la exactitud del formulario, el usuario debe poder hacer cualquier selecciÃ³n, ordenar, filtrar, agrupar, transponer, asÃ­ como crear sus propios campos calculados.  Nuestro complemento se llama mediante el botÃ³n "Acciones" en la parte superior de la tabla. </p><br><img src="https://habrastorage.org/webt/n4/kx/ni/n4kxnicwdqq4y6_ykf06x-pnhi0.png"><br><br><p>  El complemento repite la funcionalidad del generador de consultas Integral, pero ademÃ¡s de obtener datos, puede dibujar grÃ¡ficos y tablas dinÃ¡micas.  Por ejemplo, necesitamos filtrar por SecciÃ³n, agregar un par de columnas calculadas y hacer una selecciÃ³n de las cantidades agrupadas por ellas.  Establecemos todo esto: </p><br><img src="https://habrastorage.org/webt/zd/hi/rx/zdhirxamjgonu9xzepqwike0cqe.png"><br><br><p>  Las nuevas columnas se agregan a la lista mediante el enlace del mismo nombre.  Mediante el botÃ³n "CÃ¡lculos" establecemos las fÃ³rmulas para ellos utilizando un constructor simple: </p><br><img src="https://habrastorage.org/webt/d6/tu/fc/d6tufcwrz1qaxfhca1fwiokqdjo.png"><br><br><p>  Establecemos un nuevo orden de columnas y hacemos clic en "Aplicar" y nuestro informe se modifica segÃºn sea necesario; en lugar de 7 columnas base, vemos tres, dos de las cuales acabamos de crear: </p><br><img src="https://habrastorage.org/webt/4t/sp/1a/4tsp1arr8uu8nbz7zeut6qd0foi.png"><br><br><div class="spoiler">  <b class="spoiler_title">Â¿CÃ³mo funciona debajo del capÃ³?</b> <div class="spoiler_text"><p>  El complemento se comunica con el servicio web de la aplicaciÃ³n a travÃ©s de la API, realizÃ³ la siguiente solicitud: </p><br><pre> <code class="plaintext hljs">api/neo/report/1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\:1392578\:\,5),SUBSTRING(\:1392578\:\,6\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10</code> </pre><br><p>  Y obtuve esta respuesta: </p><br><pre> <code class="json hljs">{ Â«columnsÂ»: [ Â«LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">5</span></span>)Â», Â«SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)Â», Â«<span class="hljs-number"><span class="hljs-number">1392617</span></span>Â» ], Â«formatsÂ»: [ Â«SHORTÂ», Â«SHORTÂ», Â«SIGNEDÂ» ], Â«dataÂ»: { Â«LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,5)Â»: [ Â«<span class="hljs-number"><span class="hljs-number">60324</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">40817</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">47425</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">47404</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">60302</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">47404</span></span>Â» ], Â«SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,6,3)Â»: [ Â«<span class="hljs-number"><span class="hljs-number">810</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">810</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">810</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">840</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">810</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">978</span></span>Â» ], Â«  Â»: [ Â«<span class="hljs-number"><span class="hljs-number">153</span></span> <span class="hljs-number"><span class="hljs-number">825.71</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">527</span></span> <span class="hljs-number"><span class="hljs-number">901.11</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">415</span></span> <span class="hljs-number"><span class="hljs-number">189.23</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.02</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">330.88</span></span>Â», Â«<span class="hljs-number"><span class="hljs-number">58</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.00</span></span>Â» ] }, Â«totalsÂ»: [ Â«â€, â€œÂ», Â«<span class="hljs-number"><span class="hljs-number">69</span></span> <span class="hljs-number"><span class="hljs-number">685</span></span> <span class="hljs-number"><span class="hljs-number">246.95</span></span>Â» ] }</code> </pre><br><p>  Si alguien estÃ¡ interesado en quÃ© consulta SQL real se ejecutÃ³ en la base de datos de quintetos, aquÃ­ estÃ¡: </p><br><div class="spoiler">  <b class="spoiler_title">Ver SQL</b> <div class="spoiler_text"><h4>  El analista no ve este SQL; utiliza el generador de consultas que se describe a continuaciÃ³n. </h4><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">5</span></span>) v13, <span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v14, <span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> neo a182081 <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182083 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182083.up=a182081.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.t=<span class="hljs-number"><span class="hljs-number">182083</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182088 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182088.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182088.t=<span class="hljs-number"><span class="hljs-number">182088</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182090 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182090.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182090.t=<span class="hljs-number"><span class="hljs-number">182090</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182091 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182091.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182091.t=<span class="hljs-number"><span class="hljs-number">182091</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182092 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182092.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182092.t=<span class="hljs-number"><span class="hljs-number">182092</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a299 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a299.t=<span class="hljs-number"><span class="hljs-number">299</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.val=a299.val <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a328 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a328.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a328.t=<span class="hljs-number"><span class="hljs-number">328</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a303 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a303.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.t=<span class="hljs-number"><span class="hljs-number">303</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a304 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a304.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.t=<span class="hljs-number"><span class="hljs-number">304</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182089 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182089.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182089.t=<span class="hljs-number"><span class="hljs-number">182089</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> a182081.up!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(a182081.val)!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.t=<span class="hljs-number"><span class="hljs-number">182081</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.val=<span class="hljs-string"><span class="hljs-string">'20181231â€² AND a328.val ='</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>â€² <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.val&gt;=<span class="hljs-string"><span class="hljs-string">'19000101â€² AND a303.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20181231</span></span>â€² <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.val&gt;=<span class="hljs-string"><span class="hljs-string">'20181231â€² AND a304.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20991231</span></span>â€² <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v13, v14 <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> SIGNED) <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> </div></div><br><p>  La solicitud puede parecer un poco mÃ¡s complicada de lo esperado, ya que selecciona los datos actuales de los cÃ³digos de informes en funciÃ³n de su validez.  En el generador de informes integrales, esta consulta consta de columnas de informes, parÃ¡metros y condiciones de uniÃ³n de tabla, si es necesario. </p><br><img src="https://habrastorage.org/webt/ro/mx/tw/romxtw85qjp94yfrzqmf47vnvsm.png"><br><br><p>  La integral en sÃ­ misma puede generar condiciones de uniÃ³n a la tabla, ya que todas ellas estÃ¡n determinadas por las relaciones de quinteto, sin embargo, en el caso de las versiones, tuvimos que combinar las tablas manualmente y especificar explÃ­citamente la condiciÃ³n para la UNIÃ“N.  Los cÃ³digos en la clÃ¡usula ON son identificadores para columnas y objetos de consulta. </p><br><p>  La consulta combina tres tablas, eligiendo de ellas los siguientes campos de datos ("columnas de consulta" necesarias): </p><br><img src="https://habrastorage.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png"><br>  <a href="">(imagen a tamaÃ±o completo)</a> <br><br><p>  Las columnas del informe, los campos calculados, los filtros, etc., que conforman la consulta SQL, se enumeran aquÃ­.  Report Builder le permite implementar casi cualquier diseÃ±o del lenguaje SQL, incluidas las consultas de uniÃ³n y las consultas anidadas. </p><br></div></div><br><p>  AdemÃ¡s de las selecciones con agrupaciones, el usuario puede usar el mecanismo de tablas dinÃ¡micas.  Hemos agregado la popular herramienta de tabla <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pivottable.js.org</a> a nuestro complemento. <br>  Seleccione las columnas de interÃ©s para nosotros y cambie al modo de tabla dinÃ¡mica: </p><br><img src="https://habrastorage.org/webt/5n/wb/du/5nwbduykd19ryanqanvvtaymp4g.png"><br><br><p>  AquÃ­, usando arrastrar y soltar, podemos analizar los datos recibidos por la muestra que configuramos, incluidos nuestros campos arbitrarios.  AdemÃ¡s, aquÃ­ tambiÃ©n puede filtrar datos por cualquier campo. </p><br><img src="https://habrastorage.org/webt/y6/dg/tg/y6dgtgwvwf4yprzf6qvp2dijbss.gif"><br><br><p>  Utilizamos el producto gratuito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.amcharts.com</a> para dibujar grÃ¡ficos.  Con Ã©l, como con pivottable, todo es bastante simple: seleccionamos el tipo de grÃ¡fico e inicializamos el componente con nuestra matriz de datos obtenida de Integral: </p><br><img src="https://habrastorage.org/webt/j3/zt/eu/j3zteutdk8xhxddxikns8nr12fo.gif"><br><br><p>  Con esto, de hecho, completamos la tarea en la medida que satisfaga a los usuarios del producto existente.  Ahora tenemos un sistema que cumple con los requisitos de sustituciÃ³n de importaciones: todos los productos son gratuitos y reemplazables.  SÃ­, nos hemos dado cuenta de todas las posibilidades que ofrece el sistema existente, pero solo de las que son necesarias para <i>este</i> cliente.  Â¡Pero acabamos de empezar! </p><br><a name="tests"></a><br><h2>  Â¿Entonces volÃ³ o no? </h2><br><p>  TambiÃ©n deberÃ­amos discutir el rendimiento del sistema resultante.  En este problema, con una cantidad de datos suficientemente grande (cientos de gigabytes), las muestras afectan a pequeÃ±os fragmentos, cuyos quintetos siempre se recopilan mediante Ã­ndices.  Esto lleva al hecho de que, en cualquier tamaÃ±o de la base de datos, las consultas se procesan a una velocidad aceptable, sin provocar una degradaciÃ³n del rendimiento similar a una avalancha. </p><br><p>  Registramos 20 acciones del usuario en un script de prueba y lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejecutamos</a> en el servicio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">loadimpact.com</a> .  ResultÃ³ 27 solicitudes diferentes, porque algunas acciones se realizan en 2 solicitudes al servidor (por ejemplo, para crear una pÃ¡gina visualizada). </p><br><div class="spoiler">  <b class="spoiler_title">El guiÃ³n de prueba resultÃ³ asÃ­</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { group, sleep } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'k6â€²; import http from '</span></span>k6/http<span class="hljs-string"><span class="hljs-string">'; // Version: 1.3 // Creator: Load Impact URL test analyzer export let options = { stages: [ { Â«durationÂ»: Â«3m0sÂ», Â«targetÂ»: 25 } ], maxRedirects: 0, discardResponseBodies: true, }; export default function() { group("page_1 â€” https://*****.ru/neo/dictÂ«, function() { let req, res; req = [{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/infoÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«upgrade-insecure-requestsÂ»: Â«1Â», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Â» } } }]; res = http.batch(req); sleep(0.62); req = [{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/infoÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«upgrade-insecure-requestsÂ»: Â«1Â», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Â» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392573?FR_date=20181231&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392573?FR_date=20181031Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392573?FR_date=20180930&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«*/*Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1387723?&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«*/*Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1387723?&amp;LIMIT=10&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«*/*Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392741?Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392757?&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392768?&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_dropdown_arrow.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_detailed_report.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_classifiers.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_launch_report.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_manage_form_status.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_quality_management.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/img/nav_download.svgÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«image/webp,image/apng,image/*,*/*;q=0.8Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/download/neo/css/variables.cssÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392779?&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392538?&amp;LIMIT=10&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/edit_obj/1392129Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/edit_obj/1390552Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/object/18Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/neo/infoÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNTÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10Â», Â«paramsÂ»: { Â«headersÂ»: { Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«text/css,*/*;q=0.1Â», Â«refererÂ»: Â«https://*****.ru/neo/dictÂ» } } },{ Â«methodÂ»: Â«getÂ», Â«urlÂ»: Â«https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxP.ttfÂ», Â«paramsÂ»: { Â«headersÂ»: { Â«originÂ»: Â«https://*****.ruÂ», Â«accept-encodingÂ»: Â«gzip, deflateÂ», Â«accept-languageÂ»: Â«en-USÂ», Â«user-agentÂ»: Â«Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36Â», Â«acceptÂ»: Â«*/*Â», Â«refererÂ»: Â«https://fonts.googleapis.com/css?family=RobotoÂ» } } }]; res = http.batch(req); // Random sleep between 5s and 10s sleep(Math.floor(Math.random()*5+5)); }); }</span></span></code> </pre> <br></div></div><br><p>  Esto es lo que vimos cuando ejecutamos el script: el generador de carga enviÃ³ a nuestra aplicaciÃ³n un nÃºmero creciente de solicitudes por segundo, obtuvimos una escalera clÃ¡sica para buscar el rendimiento mÃ¡ximo / mÃ¡ximo: </p><br><img src="https://habrastorage.org/webt/ig/a_/xt/iga_xtu0manyadhs8cz_ytmj3k4.png"><br><br><p>  Este generador envÃ­a solicitudes en lotes, y no de manera uniforme, como serÃ­a el caso con usuarios simultÃ¡neos.  Por lo tanto, el grÃ¡fico muestra picos de carga, y el rendimiento general tambiÃ©n se ve peor en este modo. </p><br><p>          : </p><br><img src="https://habrastorage.org/webt/zn/an/je/znanjexiyp3mkguce5d0ycw0ulc.png"><br><br><p>       ,   -      SQL-.   ,   ,   8  33 SQL-     :       ,  -,  SQL- (   ,  )      . </p><br><p>   ,  20-25    (    20 ),       â€” 1   .     ,     : 1  2.4   1   . </p><br><p>    ( 10   )      0.1-0.3 ,     . </p><br><h4>  ,                  . </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451218/">https://habr.com/ru/post/451218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451208/index.html">ClasificaciÃ³n "topolÃ³gica" de un grÃ¡fico con ciclos</a></li>
<li><a href="../451210/index.html">IntegraciÃ³n de Jira con GitLab</a></li>
<li><a href="../451212/index.html">Sistema de protecciÃ³n de arco con la capacidad de operar con una seÃ±al de corriente.</a></li>
<li><a href="../451214/index.html">Fundamentos de la inteligencia artificial moderna: Â¿cÃ³mo funciona y destruirÃ¡ nuestra sociedad este aÃ±o?</a></li>
<li><a href="../451216/index.html">CÃ³mo deshabilitar completamente Windows Defender en Windows 10</a></li>
<li><a href="../451220/index.html">Detalles tÃ©cnicos del bloqueo reciente de la extensiÃ³n de Firefox</a></li>
<li><a href="../451222/index.html">No soy ingeniero en mama</a></li>
<li><a href="../451224/index.html">Noticias de la semana: los coleccionistas quieren acceso a telÃ©fonos rusos, nuevo kernel Linux 5.1, fuga de datos de Samsung</a></li>
<li><a href="../451226/index.html">Nueva vida de juegos antiguos: el directorio de cÃ³digo fuente mÃ¡s abierto de los puertos de origen (Java + PHP)</a></li>
<li><a href="../451230/index.html">Cinco errores que cometen las personas al prepararse para la inmigraciÃ³n laboral en los Estados Unidos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>