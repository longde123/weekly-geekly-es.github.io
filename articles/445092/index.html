<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óªÔ∏è ‚ùóÔ∏è üö∂üèø Problema de enlace profundo de HATEOAS üö£ üêõ ‚èèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Enlace externo (enlace profundo): en Internet, esta es la ubicaci√≥n de un hiperv√≠nculo en un sitio que apunta a una p√°gina en otro sitio web, en lugar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Problema de enlace profundo de HATEOAS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445092/"><blockquote>  Enlace externo (enlace profundo): en Internet, esta es la ubicaci√≥n de un hiperv√≠nculo en un sitio que apunta a una p√°gina en otro sitio web, en lugar de apuntar a la p√°gina de inicio (inicio, inicio) de ese sitio.  Dichos enlaces se denominan enlaces externos (enlaces profundos). <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> </blockquote>  El t√©rmino <b>"enlaces profundos"</b> se utilizar√° adem√°s como el m√°s cercano al idioma ingl√©s "enlaces profundos".  Este art√≠culo se centrar√° en la API REST, por lo que los enlaces profundos significar√°n enlaces a recursos HTTP.  Por ejemplo, el enlace profundo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/en/post/426691</a> apunta a un art√≠culo espec√≠fico en habr.com. <br><br>  <b>HATEOAS</b> es un componente de la arquitectura REST que permite proporcionar informaci√≥n a los clientes API a trav√©s de hipermedia.  El cliente conoce la √∫nica direcci√≥n fija, el punto de entrada de la API;  √©l aprende todas las acciones posibles de los recursos recibidos del servidor.  Las vistas de recursos contienen enlaces a acciones u otros recursos;  el cliente interact√∫a con la API, seleccionando din√°micamente una acci√≥n de los enlaces disponibles.  Puede leer m√°s sobre HATEOAS en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> o en este maravilloso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> sobre Habr√©. <br><br>  HATEOAS es el siguiente nivel de API REST.  Gracias al uso de hipermedia, responde muchas preguntas que surgen durante el desarrollo de la API: c√≥mo controlar el acceso a las acciones en el lado del servidor, c√≥mo deshacerse de la estrecha conectividad entre el cliente y el servidor, c√≥mo cambiar las direcciones de los recursos si es necesario.  Pero no proporciona una respuesta a la pregunta de qu√© tan profundos deber√≠an ser los enlaces a los recursos. <br><a name="habracut"></a><br>  En la implementaci√≥n REST "cl√°sica", el cliente conoce la estructura de las direcciones, sabe c√≥mo obtener un recurso por identificador en la API REST.  Por ejemplo, un usuario sigue un enlace profundo a una p√°gina de libro en una tienda en l√≠nea.  La barra de URL <code>https://domain.test/books/1</code> muestra en la barra de direcciones del navegador.  El cliente sabe que "1" es el identificador del recurso del libro y, para obtenerlo, debe sustituir este identificador en la URL de la API REST <code>https://api.domain.test/api/books/{id}</code> .  Por lo tanto, el enlace profundo al recurso de este libro en la API REST se ve as√≠: <code>https://api.domain.test/api/books/1</code> . <br><br>  En HATEOAS, el cliente no sabe acerca de los identificadores de recursos o la estructura de direcciones.  No codifica, pero "descubre" enlaces.  Adem√°s, la estructura de las URL puede cambiar sin el conocimiento del cliente, HATEOAS lo permite.  Debido a estas diferencias, los enlaces profundos no se pueden implementar de la misma manera que la API REST cl√°sica.  Sorprendentemente, una b√∫squeda en Internet de recetas para implementar dichos enlaces en HATEOAS no arroj√≥ una gran cantidad de resultados, solo algunas preguntas desconcertantes sobre Stackoverflow.  Por lo tanto, consideraremos varias opciones posibles e intentaremos elegir la mejor. <br><br>  La opci√≥n cero fuera de la competencia no es implementar enlaces profundos.  Esto puede ser adecuado para algunos administradores o aplicaciones m√≥viles que no requieren la capacidad de cambiar directamente a recursos internos.  Esto est√° completamente en el esp√≠ritu de HATEOAS, el usuario puede abrir p√°ginas solo secuencialmente, comenzando desde el punto de entrada, porque el cliente no sabe c√≥mo ir directamente al recurso interno.  Pero esta opci√≥n no es adecuada para aplicaciones web: esperamos que el enlace a la p√°gina interna se pueda marcar como favorito, y la actualizaci√≥n de la p√°gina no nos transferir√° a la p√°gina principal del sitio. <br><br>  Entonces, la primera opci√≥n: el c√≥digo de la URL de la API de HATEOAS.  El cliente conoce la estructura de las direcciones de recursos para las que se necesitan enlaces profundos y sabe c√≥mo obtener el identificador de recursos para la b√∫squeda.  Por ejemplo, el servidor devuelve la direcci√≥n <code>https://api.domain.test/api/books/1</code> como referencia al recurso del libro.  El cliente sabe que "1" es el identificador del libro y puede generar esta URL por s√≠ solo al hacer clic en el enlace profundo.  Esta es ciertamente una opci√≥n de trabajo, pero viola los principios de HATEOAS.  La estructura de direcciones y el identificador de recursos ya no se pueden cambiar, de lo contrario, el cliente se interrumpir√°, hay una conexi√≥n r√≠gida.  Esto no es HATEOAS, lo que significa que la opci√≥n no nos conviene. <br><br>  La segunda opci√≥n es sustituir la URL de la API REST en la URL del cliente.  Para un ejemplo con un libro, el enlace profundo se ver√° as√≠: <code>https://domain.test/books?url=https://api.domain.test/api/books/1</code> .  Aqu√≠, el cliente toma el enlace de recursos recibido del servidor y lo sustituye completamente en la direcci√≥n de la p√°gina.  Esto es m√°s como HATEOAS, el cliente no sabe acerca de los identificadores y la estructura de la direcci√≥n, recibe un enlace y lo usa como est√°.  Al hacer clic en dicho enlace en profundidad, el cliente recibir√° el recurso deseado a trav√©s del enlace REST API del par√°metro url.  Parece que la soluci√≥n est√° funcionando, y bastante en el esp√≠ritu de HATEOAS.  Pero si agrega dicho enlace a sus marcadores, en el futuro ya no podremos cambiar la direcci√≥n del recurso en la API (o siempre tendremos que redirigir a una nueva direcci√≥n).  Una vez m√°s, se pierde una de las ventajas de HATEOAS; esta opci√≥n tampoco es la ideal. <br><br>  Por lo tanto, queremos tener enlaces permanentes, que, sin embargo, pueden cambiar.  Dicha soluci√≥n existe y se usa ampliamente en Internet: muchos sitios proporcionan enlaces cortos a p√°ginas internas que se pueden compartir.  Adem√°s de la brevedad, su ventaja es que el sitio puede cambiar la direcci√≥n real de la p√°gina, pero dichos enlaces no se romper√°n.  Por ejemplo, Microsoft usa enlaces de Windows para ayudar a las p√°ginas con el formato <code>http://go.microsoft.com/fwlink/?LinkId=XXX</code> .  Con los a√±os, los sitios de Microsoft se han redise√±ado varias veces, pero los enlaces en versiones anteriores de Windows contin√∫an funcionando. <br><br>  Solo queda adaptar esta soluci√≥n a HATEOAS.  Y esta es la tercera opci√≥n: usar identificadores √∫nicos de enlace profundo en la API REST.  Ahora la direcci√≥n de la p√°gina del libro se ver√° as√≠: <code>https://domain.test/books?deepLinkId=3f0fd552-e564-42ed-86b6-a8e3055e2763</code> .  Al hacer clic en un enlace tan profundo, el cliente debe preguntarle al servidor: ¬øqu√© enlace de recursos corresponde a dicho identificador <code>deepLinkId</code> ?  El servidor devolver√° el enlace <code>https://api.domain.test/api/books/1</code> (bueno, o inmediatamente un recurso, para no ir dos veces).  Si la direcci√≥n del recurso en la API REST cambia, el servidor simplemente devolver√° otro enlace.  Se guarda un registro en la base de datos de que el identificador de referencia 3f0fd552-e564-42ed-86b6-a8e3055e2763 corresponde al identificador de entidad del libro 1. <br><br>  Para esto, los recursos deben contener un campo <code>deepLinkId</code> con los identificadores de sus enlaces profundos, y el cliente debe sustituirlos en la direcci√≥n de la p√°gina.  Esta direcci√≥n se puede marcar de forma segura y enviar a amigos.  No es muy bueno que el cliente trabaje independientemente con ciertos identificadores, pero esto le permite guardar las ventajas de HATEOAS para la API en su conjunto. <br><br><h1>  Ejemplo </h1><br>  Este art√≠culo no estar√≠a completo sin un ejemplo de implementaci√≥n.  Para probar el concepto, considere un ejemplo de un hipot√©tico sitio de cat√°logo de una tienda en l√≠nea con un backend en Spring Boot / Kotlin y una interfaz de SPA en Vue / JavaScript.  La tienda vende libros y l√°pices, el sitio tiene dos secciones en las que puede ver la lista de productos y abrir sus p√°ginas. <br><br>  Secci√≥n "Libros": <br><br><img src="https://habrastorage.org/webt/ly/nz/v6/lynzv689wey61onndh2dazh9_og.png"><br><br>  Una p√°gina de libro: <br><br><img src="https://habrastorage.org/webt/th/vh/we/thvhwevb1jq9zrbpht5acjbxg_u.png"><br><br>  Para el almacenamiento de bienes, se definen las entidades Spring Data JPA: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityType</span></span></span><span class="hljs-class"> </span></span>{ PEN, BOOK } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pen</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.PEN, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.BOOK, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeepLink</span></span></span></span>( <span class="hljs-meta"><span class="hljs-meta">@Enumerated(EnumType.STRING)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityType: EntityType, <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityId: UUID ) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() }</code> </pre><br>  Para crear y almacenar <code>DeepLink</code> enlace profundo, se <code>DeepLink</code> entidad <code>DeepLink</code> , una instancia de la cual se crea con cada objeto de dominio.  El identificador en s√≠ se genera de acuerdo con el est√°ndar UUID en el momento en que se cre√≥ la entidad.  Su tabla contiene el identificador del enlace profundo, el identificador y el tipo de entidad a la que conduce el enlace. <br><br>  La API REST del servidor est√° organizada de acuerdo con el concepto HATEOAS, el punto de entrada de la API contiene enlaces a colecciones de productos, as√≠ como un enlace <code>#deepLink</code> para formar enlaces profundos sustituyendo un identificador: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api { <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"pens"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/pens"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"books"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"deepLink"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/links/{id}"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"templated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br>  El cliente, al abrir la secci√≥n "Libros", solicita una colecci√≥n de recursos en el enlace <code>#books</code> en el punto de entrada: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api/books ... { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry Potter"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"4bda3c65-e5f7-4e9b-a8ec-42d16488276f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/1272e287-07a5-4ebc-9170-2588b9cf4e20"</span></span> } } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cryptonomicon"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"a23d92c2-0b7f-48d5-88bc-18f45df02345"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/5d04a6d0-5bbc-463e-a951-a9ff8405cc70"</span></span> } } } ...</code> </pre><br>  SPA utiliza Vue Router, para el cual se define la ruta a la p√°gina del libro <code>{ path: '/books/:deepLinkId', name: 'book', component: Book, props: true }</code> , y los enlaces en la lista de libros se ven as√≠: <code>&lt;router-link :to="{name: 'book', params: {link: book._links.self.href, deepLinkId: book.deepLinkId}}"&gt;{{ book.name }}&lt;/router-link&gt;</code> . <br><br>  Es decir, cuando abre la p√°gina de un libro espec√≠fico, se llama al componente <code>Book</code> , que recibe dos par√°metros: <code>link</code> (enlace al recurso del libro en la API REST, valor del campo <code>href</code> del enlace <code>#self</code> ) y <code>deepLinkId</code> del recurso). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Book = { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">`&lt;div&gt;{{ 'Book: ' + book.name }}&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">deepLinkId</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">book</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } }, mounted() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-string"><span class="hljs-string">'/api/links/'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.deepLinkId : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link; fetch(url).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json().then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.book = json }) }) } }</code> </pre><br>  Vue Router establece el valor de <code>deepLinkId</code> en la direcci√≥n de la p√°gina <code>/books/:deepLinkId</code> , y el componente solicita el recurso por enlace directo desde la propiedad de <code>link</code> .  Al forzar una actualizaci√≥n de la p√°gina, Vue Router establece la propiedad del componente <code>deepLinkId</code> , obteni√©ndola de la direcci√≥n de la p√°gina.  La propiedad del <code>link</code> permanece <code>null</code> .  El componente verifica: si se obtiene un enlace directo de la colecci√≥n, se solicita el recurso en √©l.  Si solo est√° <code>deepLinkId</code> identificador <code>deepLinkId</code> , se sustituye en el enlace <code>#deepLink</code> desde el punto de entrada para recibir el recurso por el enlace profundo. <br><br>  En el backend, el m√©todo del controlador para enlaces profundos se ve as√≠: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/links/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deepLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">UUID</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, response: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HttpServletResponse</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ResponseEntity&lt;Any&gt; { id!!; response!! <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink = deepLinkRepo.getOne(id) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> path: String = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (deepLink.entityType) { EntityType.PEN -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getPen</span></span></span></span>(deepLink.entityId)) EntityType.BOOK -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getBook</span></span></span></span>(deepLink.entityId)) }.toUri().path response.sendRedirect(path) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ResponseEntity.notFound().build() }</code> </pre><br>  Por identificador es la esencia del enlace profundo.  Dependiendo del tipo de entidad de aplicaci√≥n, se forma un enlace al m√©todo del controlador, que devuelve su recurso por <code>entityId</code> .  La solicitud se redirige a esta direcci√≥n.  Por lo tanto, si en el futuro cambia el enlace al controlador de la entidad, ser√° posible simplemente cambiar la l√≥gica de la formaci√≥n del enlace en el m√©todo <code>deepLink</code> . <br><br>  El c√≥digo fuente completo para el ejemplo est√° disponible en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445092/">https://habr.com/ru/post/445092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445082/index.html">El mes pasado llamamos a Zuckerberg un bobo; corregido: de hecho, √©l y su Facebook son una pena</a></li>
<li><a href="../445084/index.html">¬øQui√©n es qui√©n en el mercado de Smart Homes?</a></li>
<li><a href="../445086/index.html">Misi√≥n lunar "Bereshit": el primer video de la c√°mara a bordo y nuevas fotos en el espacio exterior</a></li>
<li><a href="../445088/index.html">¬øHan sido las aventuras en tu vida m√°s interesantes que en los juegos de computadora?</a></li>
<li><a href="../445090/index.html">¬øYouTube se mantendr√° como lo conocemos?</a></li>
<li><a href="../445094/index.html">Acceso centralizado a firmas digitales y otras claves de protecci√≥n electr√≥nica mediante hardware USB sobre IP</a></li>
<li><a href="../445098/index.html">DynamicData: colecciones cambiantes, patr√≥n de dise√±o MVVM y extensiones reactivas</a></li>
<li><a href="../445100/index.html">Anycubic: Photon S, 4Max Pro y cambio de nombre grande</a></li>
<li><a href="../445102/index.html">Animaci√≥n flash en Unity3D desde cero. Primera parte, l√≠rica</a></li>
<li><a href="../445104/index.html">Una breve historia de la marca de audio Klipsch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>