<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚿 🥃 🐗 WWDC19: Premiers pas avec le plan de test pour XCTest 🕵️ ⛅️ 🛀🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction de l'article «WWDC19: Premiers pas avec le plan de test pour XCTest» de Shashikant Jagtap. 



 Lors de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WWDC19: Premiers pas avec le plan de test pour XCTest</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/457108/">  Bonjour, Habr!  Je vous présente la traduction de l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«WWDC19: Premiers pas avec le plan de test pour XCTest»</a> de Shashikant Jagtap. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a2/9a9/122/6a29a9122ce8deb03a188773b00eda1d.png" alt="image"><br><br>  Lors de la dernière conférence de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WWDC</a> , Apple a présenté de nouvelles fonctionnalités intéressantes aux développeurs.  Xcode 11 ajoute également des fonctionnalités impressionnantes.  Vous pouvez les lire dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notes de version</a> .  L'un des outils les plus importants annoncés cette année est le plan de test pour les tests XCTest et Xcode UI.  Dans cet article, nous examinerons en détail comment la fonctionnalité de Test Plan fonctionnera avec XCTest.  Si vous souhaitez en savoir plus, regardez la vidéo de la session <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Test sur Xcode».</a> <br><br><a name="habracut"></a><h3>  Plan de test Xcode </h3><br><p>  Avant Xcode 11, la configuration de test faisait partie des schémas Xcode.  Si les développeurs voulaient configurer différentes suites de tests pour différentes conditions, ils ont soit créé un nouveau circuit, soit édité un circuit existant pour des besoins de test spécifiques.  La configuration de test était étroitement liée aux schémas Xcode, j'ai donc dû créer de nombreux schémas pour différentes tâches pendant les tests. <br>  La nouvelle fonctionnalité de Xcode 11 permet aux développeurs et aux ingénieurs d'assurance qualité de personnaliser les tests en fonction de leurs besoins.  Le plan de test vous permet de déterminer: <br><br></p><ul><li>  quels tests exécuter dans l'assemblage; </li><li>  comment exécuter ces tests (par exemple, dans un ordre aléatoire ou alphabétique); </li><li>  Comment gérer les artefacts de test (par exemple, les pièces jointes et les captures d'écran); </li><li>  comment utiliser les outils d'exécution dans le cadre des tests. </li></ul><br>  Avec Xcode Test Plan, vous pouvez configurer des suites de tests indépendamment des schémas Xcode.  Il s'agit d'une amélioration significative de la technologie de test qui peut faire passer vos tests au niveau supérieur.  Jetons maintenant un coup d'œil au plan de test Xcode en action. <br><br><h3>  Le script </h3><br>  Supposons que nous créons un plan de test pour les tests fonctionnels avec les exigences suivantes: <br><br><ul><li>  Les tests fonctionnels devraient inclure des kits pour les tests de fumée et de régression; </li><li>  Des tests de fumée devraient être effectués à Londres (Royaume-Uni) et des tests de régression à San Francisco (États-Unis); </li><li>  Les tests de fumée doivent être exécutés dans l'ordre alphabétique et les tests de régression doivent être exécutés dans un ordre aléatoire pour détecter les problèmes entre les tests. </li></ul><br>  Nous allons créer ce plan de test pour Xcode pour diverses plates-formes Apple. <br><br><h3>  Création d'un plan de test dans Xcode </h3><br>  Xcode 11 nous permet de définir ces exigences dans le plan de test.  Xcode vous permet de créer un plan de test à partir de la configuration de schéma actuelle.  Lorsque vous modifiez le circuit et passez aux étapes de test en cours, Xcode affiche une option pour créer un plan de test.  Vous pouvez créer un plan de test avec les paramètres suivants: <br><br><ul><li>  <b>Plan de test vierge</b> : crée un modèle vide et vous permet de créer votre propre plan; </li><li>  <b>Plan de test du schéma</b> : prend une configuration de circuit et crée un plan de test; </li><li>  <b>Choisissez un plan de test</b> : si vous avez déjà créé un plan de test, vous pouvez le sélectionner et l'ajouter au graphique. </li></ul><br>  Pour vous familiariser, créez un plan de test à partir de la configuration du circuit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30f/b4e/35c/30fb4e35ca1f47fea781e215662dd381.png" alt="image"><br><br>  Vous devez nommer le plan de test et spécifier la cible de test correcte.  Lorsqu'un plan de test est créé, il est attaché au circuit.  Cependant, le schéma peut remplacer tout plan de test créé après avoir utilisé l'indicateur lors de l'appel de la commande Xcodebuild.  Après avoir créé un plan de test, vous pouvez l'attacher à une cible spécifique.  Ajoutons le plan actuel à la cible avec des tests d'interface et donnons-lui un nom. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a1/b23/1be/3a1b231be28d8ba7592cc0cc62485612.png" alt="image"><br><br>  Vous trouverez un nouveau fichier avec l'extension fonctionnelle.xctestplan.  Ceci est votre plan de test.  Il peut être édité si nécessaire.  Vous pouvez créer un plan de test composite dans la même cible, en fonction des besoins des tests.  À ce stade, nous avons un plan de test disponible pour notre cible avec des tests d'interface utilisateur. <br><br><h3>  Fichier de plan de test </h3><br>  Le fichier de plan de test est un simple fichier de configuration de type json qui contient des informations sur la façon de configurer vos tests pour qu'ils s'exécutent indépendamment de tout circuit.  Voici les différents paramètres de configuration de test disponibles dans Plan de test.  Le plan de test de base contient trois éléments clés: <br><br><ul><li>  Configurations </li><li>  Objectifs de test </li><li>  Paramètres </li></ul><br>  Chaque configuration dans Test Plan contient un ensemble de tests qui lui sont associés avec des paramètres différents.  Conformément aux exigences de notre plan de test, nous aurons besoin de deux configurations: une pour les tests de fumée, l'autre pour les tests de régression. <br>  Maintenant, ouvrons le fichier Functional.xctestplan dans Xcode et renommons configuration1 en smoke-uk, puis cliquez sur le bouton «+» en haut du plan et ajoutez une autre configuration de régression-usa. <br>  Maintenant, nous avons deux configurations dans le plan de test et le plan de test est déjà lié à une cible avec des tests d'interface utilisateur.  Ajoutez des paramètres à chaque configuration.  Lorsque la configuration smoke-uk est sélectionnée, nous pouvons changer l'emplacement pour Londres et apporter d'autres modifications aux paramètres.  De même, changez la configuration de régression-usa.  Voici à quoi ressemblera Plan de test pour déclencher une régression: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/44a/ff4/09b/44aff409be8d8d43ef4ac09ece172e4c.png" alt="image"><br><br>  Paramètres disponibles dans le plan de test: <br><br><ul><li>  Arguments - vous permet de remplacer les arguments de lancement et l'environnement de lancement pour les tests; </li><li>  Localisation - vous permet de configurer des tests pour différentes géolocalisations, paramètres régionaux et langues.  C'est un cadre très cool pour tester l'internationalisation et la localisation; </li><li>  Test d'interface utilisateur / pièce jointe / exécution de test / couverture de code - options spécifiques pour les tests d'interface utilisateur et les artefacts de test.  Vous pouvez décider de laisser les artefacts ou de les supprimer dès que possible.  Vous pouvez également choisir l'ordre dans lequel les tests sont exécutés et le calcul de la couverture du code; </li><li>  Outils de diagnostic de code Xcode - Plusieurs outils de diagnostic de code Xcode, tels que Address Sanitizer ou Thread Sanitizer, sont disponibles pour rechercher des erreurs d'exécution.  Vous pouvez également utiliser d'autres options qui vous aident à rechercher les fuites de mémoire, etc. </li></ul><br><h3>  Création d'un plan de test à partir de zéro </h3><br>  Si vous ne souhaitez pas créer un plan de test à l'aide du schéma Xcode, vous pouvez toujours créer un nouveau plan de test via Xcode → Produit → Plan de test. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a2/9a9/122/6a29a9122ce8deb03a188773b00eda1d.png" alt="image"><br><br>  Après avoir créé le plan de test de cette manière, nous le rattacherons à une cible de test en lui ajoutant des tests.  Dans l'exemple ci-dessous, nous avons créé un nouveau plan de test et y avons ajouté des tests. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be9/14e/1ec/be914e1eca257b745ef3d194c7d3279f.png" alt="image"><br><br><h3>  Création d'un plan de test à partir de la source </h3><br>  Comme mentionné précédemment, Xcode Test Plan est juste un fichier de configuration, où nous avons installé toutes les configurations que nous avons définies.  Dans notre scénario, nous avons créé Functional.xctestplan, et le code source correspondant ressemble à ceci: <br><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"configurations"</span></span> : [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"smoke-uk"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"options"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"language"</span></span> : <span class="hljs-string"><span class="hljs-string">"en-GB"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"locationScenario"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"London, England"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"referenceType"</span></span> : <span class="hljs-string"><span class="hljs-string">"built-in"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"region"</span></span> : <span class="hljs-string"><span class="hljs-string">"GB"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"testExecutionOrdering"</span></span> : <span class="hljs-string"><span class="hljs-string">"lexical"</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Regression-usa"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"options"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"addressSanitizer"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"enabled"</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"language"</span></span> : <span class="hljs-string"><span class="hljs-string">"en"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"locationScenario"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"San Francisco, CA, USA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"referenceType"</span></span> : <span class="hljs-string"><span class="hljs-string">"built-in"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"region"</span></span> : <span class="hljs-string"><span class="hljs-string">"US"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"testExecutionOrdering"</span></span> : <span class="hljs-string"><span class="hljs-string">"random"</span></span> } } ], <span class="hljs-attr"><span class="hljs-attr">"defaultOptions"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"codeCoverage"</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"testTargets"</span></span> : [ { <span class="hljs-attr"><span class="hljs-attr">"target"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"containerPath"</span></span> : <span class="hljs-string"><span class="hljs-string">"container:XCTestPlan.xcodeproj"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"9B0E393A22A6EB5400F666A1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"XCTestPlanUITests"</span></span> } } ], <span class="hljs-attr"><span class="hljs-attr">"version"</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br>  Vous pouvez créer la configuration de cette manière et l'enregistrer dans un fichier avec l'extension .xctestplan dans Xcode 11. <br><br><h3>  Lancer le plan de test </h3><br>  Nous comprenons maintenant le processus de création d'un fichier de plan de test dans Xcode.  Voyons comment exécuter le plan de test et obtenir des rapports dans Xcode.  Vous pouvez exécuter des tests via Xcode -&gt; Product -&gt; Test as usual, en exécutant les plans de test joints sur le schéma.  Dans notre cas, cela lancera les deux configurations de test - fumée et régression. <br>  Il existe plusieurs options de ligne de commande dans Xcodebuild pour afficher et exécuter des plans de test.  Vous pouvez exécuter la commande suivante: <br><br><pre> <code class="plaintext hljs">$ Xcodebuild -showTestPlans -scheme YOUR_SCEME</code> </pre> <br>  Il affichera tous les plans de test du circuit actuel.  Vous pouvez également exécuter un test distinct: <br><br><pre> <code class="plaintext hljs">$ Xcodebuild -project XCTestPlan.Xcodeproj/ -scheme XCTestPlan -destination 'platform=iOS Simulator,OS=13.0,name=iPhone XR' test -testPlan functional</code> </pre> <br>  Ce script exécutera le test à l'aide de la configuration du plan de test. <br><br><h3>  Rapports du plan de test </h3><br>  Après avoir exécuté les tests pour un plan de test spécifique, vous pouvez voir les bons rapports générés dans Xcode.  Les rapports sont générés séparément pour chaque configuration. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08c/e42/f26/08ce42f2651ca6c28fe18b3078fb3634.png" alt="image"><br><br>  Dans Xcode, dans la section Navigateur de test, vous pouvez filtrer les rapports par plans de test.  Les rapports du plan de test Xcode peuvent être configurés sur le serveur Xcode. <br><br>  <i>Code source de démonstration disponible sur Github: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">XCTestPlan</a></i> <br><br><h3>  Plan de test Xcode: application </h3><br>  Brièvement sur où le plan de test Xcode peut être utilisé et comment il change en fonction de la configuration du circuit.  Voici quelques exemples d'utilisation du plan de test Xcode: <br><br><ul><li>  Différents types de tests, comme cela a été montré dans la démo: fumée, régression, etc.; </li><li>  Tester l'internationalisation et la localisation de l'application, par exemple, si vous souhaitez tester votre application pour plusieurs langues, vous pouvez créer différentes configurations; </li><li>  Exécution de tests lourds, tels que les performances, les tests de stress et leur séparation des tests fonctionnels.  Vous pouvez configurer des tests pour travailler avec des outils de diagnostic de code ou d'autres tests non fonctionnels. </li></ul><br>  De nombreux autres scénarios sont également possibles où les plans de test Xcode peuvent aider à étendre le processus de test. <br><br><h3>  Conclusion </h3><br>  Avec le plan de test Xcode, XCTest peut passer au niveau supérieur avec la possibilité de gérer votre configuration et d'exécuter vos tests.  Les plans de test Xcode vous permettent de mieux contrôler la plate-forme de test basée sur Apple. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457108/">https://habr.com/ru/post/fr457108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457096/index.html">Nous libérons nos mains de plusieurs analystes: API Livy pour l'automatisation des tâches bancaires typiques</a></li>
<li><a href="../fr457098/index.html">Gestion élégante des erreurs JavaScript avec la monade Either</a></li>
<li><a href="../fr457100/index.html">AWS Lambda - Théorie, connaissance</a></li>
<li><a href="../fr457102/index.html">Fichiers QVD - contenu, partie 3</a></li>
<li><a href="../fr457106/index.html">La guerre américaine par appel robotique - qui gagne et pourquoi</a></li>
<li><a href="../fr457110/index.html">Tests unitaires de modèles d'injection C ++ et simulés à l'aide de traits</a></li>
<li><a href="../fr457112/index.html">Les résultats de HolyJS 2019 Piter</a></li>
<li><a href="../fr457114/index.html">Choisissez un système de vidéosurveillance: cloud vs local avec Internet</a></li>
<li><a href="../fr457116/index.html">Fonctionnalités AvaloniaUI utilisant la MessageBox personnalisée</a></li>
<li><a href="../fr457118/index.html">Habr Weekly # 6 / Runet est prêt à se démarquer, Adobe recherche des traces de Photoshop, de la vulnérabilité de Vim, du géo-chat dans le panier et d'autre chose</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>