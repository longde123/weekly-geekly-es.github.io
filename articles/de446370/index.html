<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛄 👨🏻‍🏭 📞 "Nun, wieder die Wetterstation"? Nicht wirklich 👋 ⛺️ ✳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die vorgeschlagene Wetterstation basiert auf einem selbstgebauten PIDP11- Computer, der aus einer Himbeere mit einem PDP-11-Emulator und einem Gehäuse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Nun, wieder die Wetterstation"? Nicht wirklich</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446370/"><img src="https://habrastorage.org/webt/aw/wy/yu/awwyyuan47fvnwenytungq8clu8.jpeg"><br><br>  Die vorgeschlagene Wetterstation basiert auf einem selbstgebauten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PIDP11-</a> Computer, der aus einer Himbeere mit einem PDP-11-Emulator und einem Gehäuse mit einer Frontplatte mit aktiven LEDs und Schaltern besteht.  Trotzdem verfügt die „Himbeere“ über genügend unbesetzte GPIOs, um auch einen Druck- und Temperatursensor anzuschließen. <br><br>  Auf dem Emulator wird OS 2.11BSD ausgeführt, in dem sich die Wetterstationssoftware „dreht“.  Daten werden an zwei Terminalemulatoren ausgegeben.  Einer von ihnen - cool-retro-term - zeigt Textinformationen in Großdruck mit ASCII-Grafik an.  Der zweite - ein grafischer Terminalemulator Tektronix 4010 mit einem Speicherrohr - zeigt die Druck- und Temperaturkurven an. <a name="habracut"></a><br><br>  Die Methode zum Anschließen des BME280-Sensors wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> beschrieben: <br><br><pre><code class="plaintext hljs"> |  | GPIO    | | Raspberry Pi  | | ------------+--------------+-------------- VCC | 3,3  | P1-01 GND |  | P1-06 SCL | SCL  I2C | P1-05 SDA | SDA  I2C | P1-03</code> </pre> <br>  Das auf dem Foto unten gezeigte OLED-Display ist parallel zum Sensor geschaltet, erhält jedoch eine andere Adresse auf dem I <sup>2</sup> C-Bus.  Wenn Sie möchten, müssen Sie überhaupt kein Display installieren.  Der Autor hat außerdem eine Schaltfläche zum korrekten Herunterfahren des Betriebssystems eingestellt, bevor das Gerät ausgeschaltet wird. <br><br><img src="https://habrastorage.org/webt/zn/uj/p6/znujp611prwu14vttig0mwsiawy.jpeg"><br><br>  Damit das Gerät funktioniert, müssen Sie dem laufenden Benutzer im 2.11BSD-Emulator zunächst einen neuen Benutzer hinzufügen: <br><br>  Melden Sie sich als Root an.  Geben Sie den Befehl vipw ein, um den vi-Editor mit der Datei / etc / passwd zu starten <br><br>  Fügen Sie die Zeile in die Datei ein: <br><br><pre> <code class="plaintext hljs">firstname::201:20:fullname:/home/firstname:/bin/tcsh</code> </pre> <br>  Dabei sind Vorname und vollständiger Name die kurzen und vollständigen Benutzernamen. <br><br>  Beenden Sie den Editor und erstellen Sie den Home-Ordner des Benutzers: <br><br><pre> <code class="plaintext hljs">cd /home mkdir firstname chown firstname firstname</code> </pre> <br>  Kopieren Sie die Dateien .login und .cshrc in diesen Ordner. ' <br><br><pre> <code class="plaintext hljs"> cd /home/user cp .* /home/firstname cd /home/firstname chown firstname .*</code> </pre> <br>  Geben Sie vi .login ein und bearbeiten Sie die Eingabeaufforderung, indem Sie die entsprechende Zeile in Folgendes ändern: <br><br><pre> <code class="plaintext hljs">set prompt='%n@%m:%c$ '</code> </pre> <br>  Beenden Sie den Editor.  Melden Sie sich mit dem Befehl logout ab, ändern Sie das Kennwort für den neuen Benutzer mit dem Befehl passwd unter dem Stammverzeichnis. Jetzt können Sie sich mit dem Benutzernamen und dem Kennwort des neuen Benutzers anmelden. <br><br>  Danach müssen Sie Datum und Uhrzeit im System beim Booten automatisch einstellen. Für die folgenden Informationen dankt der Autor Jason Vanick und Johnny Billquist: <br><br>  Konfigurieren Sie zuerst das Netzwerk und stellen Sie sicher, dass Ping funktioniert.  Fügen Sie dann unmittelbar vor der ntpt-Zeile in der Datei /etc/rc.local die folgende Zeile ein: <br><br><pre> <code class="plaintext hljs">ntp -sf pool.ntp.org</code> </pre> <br>  Ändern Sie die letzte Zeile in der Datei /etc/ntp.conf in: <br><br><pre> <code class="plaintext hljs">server pool.ntp.org</code> </pre> <br>  Sie können einen anderen NTP-Server auswählen.  Um die Zeitzone festzulegen, überprüfen Sie die Liste der Zonen in der Datei / usr / share / zoneinfo und suchen Sie dort den Namen Ihrer Zone.  Melden Sie sich als Root an und geben Sie die folgenden Befehle ein: <br><br><pre> <code class="plaintext hljs">cd /etc mv localtime localtime.old ln -s /usr/share/zoneinfo/timezone localtime</code> </pre> <br>  Der nächste Vorgang besteht darin, ein Programm zu installieren und zu konfigurieren, mit dem Sie die Raspbian-Befehlszeile, die auf einem echten "Malink" ausgeführt wird, an die im Emulator ausgeführte 2.11BSD-Befehlszeile weiterleiten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">können</a> : <br><br>  Geben Sie in Raspbian unter root den folgenden Befehl ein: <br><br><pre> <code class="plaintext hljs">sudo apt-get install rsh-server</code> </pre> <br>  Erstellen Sie im Home-Ordner eine .rhosts-Datei mit folgendem Inhalt: <br><br><pre> <code class="plaintext hljs">bsd_ip_address bsd_user_name</code> </pre> <br>  Dabei ist bsd_ip_address die IP-Adresse der virtuellen Maschine mit 2.11 BSD und bsd_user_name der Name des Benutzers in 2.11 BSD, der Befehle auf einer echten „Himbeere“ ausführen kann, zum Beispiel: <br><br><pre> <code class="plaintext hljs">192.168.1.99 rene</code> </pre> <br>  Legen Sie die Berechtigungen für diese Datei fest, da sonst nichts funktioniert: <br><br><pre> <code class="plaintext hljs">chmod 600 .rhosts</code> </pre> <br>  Gehen Sie zum Emulator, geben Sie 2.11 BSD als Root ein und bearbeiten Sie / etc / hosts - fügen Sie die Zeile hinzu: <br><br><pre> <code class="plaintext hljs">remote_ip_address remote_full_name remote_nick_name</code> </pre> <br>  Dabei ist remote_ip_address die IP-Adresse der echten "Himbeere" und remote_full_name und remote_nick_name der Domänenname und der Alias, zum Beispiel: <br><br><pre> <code class="plaintext hljs">192.168.1.103 pizerow.home.lan pizerow</code> </pre> <br>  Melden Sie sich mit dem zuvor festgelegten Namen (bsd_user_name) an und überprüfen Sie, ob alles funktioniert hat: <br><br><pre> <code class="plaintext hljs">rsh remote_nick_name -l pi -n “ls”</code> </pre> <br>  Sie haben gerade den Befehl ls vom Emulator auf einem echten Malink ausgeführt.  Wenn stattdessen ein Passworteingabeformular vor Ihnen angezeigt wurde, bedeutet dies, dass ein Fehler aufgetreten ist. <br><br>  Versuchen Sie jetzt etwas komplizierteres.  Geben Sie den Befehl ein: <br><br><pre> <code class="plaintext hljs">rsh remote_nick_name -l pi -n “cat /sys/class/thermal/thermal_zone0/temp”</code> </pre> <br>  Im rtest-Ordner dieses Repositorys befindet sich ein kleines C-Programm, das zeigt, wie mit popen Informationen aus einem bestimmten Programm abgerufen und so verarbeitet werden, dass in 2.11BSD eine für Menschen lesbare Ausgabe erhalten wird: <br><br><pre> <code class="plaintext hljs">rene@pdp11:rtest$ rtest **************************************************** * The CPU temperature on the pizerow is 42.2 deg C * **************************************************** rene@pdp11:rtest$</code> </pre> <br>  Sie haben gerade im Emulator die Temperatur des realen Prozessors gesehen, auf dem sich dieser Emulator „dreht“. <br><br>  Laden Sie das Python-Skript aus dem Wetter- / Sensorordner dieses Repositorys herunter. <br><br>  Stellen Sie sicher, dass das Skript in Remote Pizerow ordnungsgemäß funktioniert, und legen Sie es im Ordner / home / pi / bin ab <br><br>  Führen Sie cool-retro-term und den Emulator aus, geben Sie 2.11BSD als den gerade erstellten Benutzer ein und geben Sie die folgenden Befehle ein: <br><br><pre> <code class="plaintext hljs">mkdir weather cd weather</code> </pre> <br>  Auf die eine oder andere Weise (z. B. mit FileZilla) ziehen Sie Dateien aus dem Wetter- / BSD-Ordner des Repositorys in den Wetterordner des Betriebssystems, das im Emulator ausgeführt wird.  Geben Sie den Wetterbefehl ein, und das Programm extrahiert die Daten aus dem Sensor und zeigt sie in folgender Form an: <br><br><pre> <code class="plaintext hljs"> rene@pdp11:weather$ weather Contacting remote sensor... Data received, analyzing ... ************************************** The sensor reports the following data: Temperature 7.0 C Pressure 969.8 hPa Humidity 66.8 % ************************************** rene@pdp11:weather$</code> </pre> <br>  Wenn alles funktioniert hat, erstellen Sie den Ordner dats im Ordner ~ / weather, in dem weather2 das Protokoll speichern kann: <br><br><pre> <code class="plaintext hljs">cd cd weather mkdir data weather2</code> </pre> <br>  Jeden Tag begann weather2, im Ordner ~ / weather / data eine Datei mit dem Namen zu erstellen, der dem Datum entspricht, und fügte jede Minute eine Zeile mit den Daten hinzu.  Auf dem Terminal wird kontinuierlich Folgendes angezeigt, wobei der Bildschirm auch einmal pro Minute aktualisiert wird: <br><br><img src="https://habrastorage.org/webt/pp/bt/zk/ppbtzkw1rmufumlfz-ciivd1ffc.jpeg"><br><br>  Nun, weather3 funktioniert genauso, zeigt nur mehr Zeit und Druck an.  Es verwendet die Curses-Bibliothek, um den Cursor zu bewegen. <br><br><img src="https://habrastorage.org/webt/vl/tv/a8/vltva8sjlqvyuq6byh3arhdhhye.jpeg"><br><br>  Versuchen Sie auch, die Temperatur- und Druckwerte der vorherigen Tage auf dieselbe Weise anzuzeigen und ein Skript zu schreiben, um die Wettervorhersage basierend auf diesen Daten zu erhalten.  Viel Glück! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anhang 1</a> - Cool-Retro-Term installieren und konfigurieren <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anhang 2</a> - Installation und Konfiguration des Tektronix 4010-Grafikterminalemulators </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de446370/">https://habr.com/ru/post/de446370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de446354/index.html">Sicherheitswoche 14: ShadowHammer und Lieferkette</a></li>
<li><a href="../de446360/index.html">Ausstellung "Subsoil-2019. Die Studie. Intelligenz. Bergbau</a></li>
<li><a href="../de446362/index.html">3 Schlüsselqualitäten für einen erfolgreichen Produktmanager: Dmitry Orlov, Senior Product Manager</a></li>
<li><a href="../de446364/index.html">Witze und Referenzen von The Simpsons in Englisch zu erklären</a></li>
<li><a href="../de446366/index.html">ZX Spectrum 128k selbst machen. Teil 2</a></li>
<li><a href="../de446372/index.html">Liebe Quests, liebe und finde deine persönlichen Daten in der Öffentlichkeit</a></li>
<li><a href="../de446376/index.html">Wie schreibe ich die Heimatadresse richtig?</a></li>
<li><a href="../de446378/index.html">Das Problem der Umstellung auf Winter- und Sommerzeit für eine einzelne Skype-Schule</a></li>
<li><a href="../de446380/index.html">H2 Evolution - Fensterfunktionen, CTE, JSON / XML in einer eingebetteten Datenbank</a></li>
<li><a href="../de446384/index.html">Tipps zum Entwickeln sehr großer Projekte in Revit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>