<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌙 📼 🏸 Membuat cerita untuk Instagram dari PHP 🐄 ♎️ 🧠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entri 
 Baru-baru ini, orang lebih bersedia untuk menonton video di jejaring sosial daripada menjelajah foto. Storis di Instagram memperoleh tampilan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat cerita untuk Instagram dari PHP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436514/"><h2>  Entri </h2><br>  Baru-baru ini, orang lebih bersedia untuk menonton video di jejaring sosial daripada menjelajah foto.  Storis di Instagram memperoleh tampilan 3-4 kali lebih banyak dari sekadar foto yang ditata. <br><br>  Dan tentu saja, kita tidak berhenti lupa bahwa jejaring sosial tidak hanya untuk menunjukkan diri mereka sendiri, untuk melihat orang lain, tetapi juga untuk mempromosikan barang, layanan, dll.  Kami telah lama belajar cara memposting berita yang baru dipublikasikan dari situs di VKontakte.  Tetapi bagaimana jika kita melangkah lebih jauh?  Bagaimana jika Anda mengirimkan informasi ini sebagai video?  Atau unggah cerita video yang menarik di Instagram untuk menarik lebih banyak perhatian penonton? <br><br>  Jadi saya muncul dengan ide membuat perpustakaan yang memungkinkan saya membuat video pendek dari foto, teks, dan animasi dari objek-objek ini.  Ya, seseorang dapat mengatakan bahwa sudah ada layanan yang memungkinkan Anda melakukan ini, dan mengapa datang dengan sepeda?  Pertama - saya mau, kedua - saya bisa, ketiga - itu akan gratis. <br><br>  Artikel ini adalah tentang cara bekerja dengan perpustakaan, cara membuat cerita Anda sendiri dari PHP. <br><a name="habracut"></a><br>
<h2>  Keterbatasan </h2><br>  Harus segera dikatakan bahwa perpustakaan menggunakan FFmpeg untuk menghasilkan file video akhir.  FFmpeg harus diinstal di server.  Mungkin di masa depan, akan ada opsi untuk menghasilkan cerita sebagai file gif, tetapi untuk diri saya sendiri, saya memilih file video sebagai hasil dari pekerjaan. <br><br><h2>  Persiapan </h2><br>  Perpustakaan diinstal melalui komposer <br><br><pre><code class="bash hljs">composer require borodin-vasiliy/php-stories</code> </pre> <br><h2>  Menciptakan cerita </h2><br>  Saatnya untuk membuat cerita Anda sendiri.  Sebagai contoh, kami ingin melihat foto latar belakang anak kucing, yang sedikit lebih dekat di sepanjang cerita dan menampilkan 2 teks di atasnya dengan animasi penampilan.  Mudah! <br><br><div class="spoiler">  <b class="spoiler_title">Inisialisasi Storis</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    5    720x1280 $stories = new Stories([ "width" =&gt; 720, "height" =&gt; 1280, "duration" =&gt; 5 ]);</span></span></code> </pre><br></div></div><br>  Seperti yang Anda lihat, semua parameter dilewatkan sebagai array.  Saat ini, Anda dapat mengubah: <br><br><ul><li>  "Width" - Lebar storis dalam piksel </li><li>  "Tinggi" - Tinggi dalam piksel </li><li>  "Durasi" - Durasi dalam detik </li><li>  "Fps" - Jumlah bingkai per detik, sesuai dengan standar - 30 </li></ul><br>  Selanjutnya, kita perlu menambahkan 3 objek (gambar dan 2 teks) ke cerita masa depan kita.  Saat ini, perpustakaan memungkinkan Anda untuk menambahkan 4 jenis objek yang berbeda - gambar, teks, eleps, persegi panjang.  Setiap objek memiliki metode sendiri, argumen metode adalah array dari parameter objek yang ditambahkan. <br><br>  Objek memiliki sebagai parameter umum: <br><br><ul><li>  "Top" - posisi objek dari tepi atas cerita </li><li>  "Kiri" - posisi elemen dari tepi kiri cerita </li><li>  "Opacity" - transparansi, seperti dalam css [0 ... 1] </li><li>  "Putar" - sudut rotasi objek [0 ... 359] </li><li>  "Z-index" - sebuah layer, seperti z-index dalam css - semakin besar, semakin tinggi layer akan terletak pada elemen frame </li><li>  "Mulai" - yang kedua saat item harus ditambahkan ke cerita </li><li>  "End" - yang kedua saat item tersebut harus dihapus dari cerita </li></ul><br>  Sangat unik untuk setiap jenis objek, misalnya, untuk gambar: <br><br><ul><li>  "Path" - Jalur ke gambar yang ingin kita tambahkan </li><li>  "Skala" - Pengganda ukuran gambar (perkiraan) </li></ul><br><div class="spoiler">  <b class="spoiler_title">Menambahkan gambar ke cerita</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//      $main_image = $dir."/images/1.jpg"; //   ) list($image_width, $image_height) = getimagesize($main_image); // ,      ,       $image_start_scale = round(1280 / $image_height, 1); //   $stories-&gt;addImage([ "path" =&gt; $main_image, "top" =&gt; round(-1 * ($image_height * $image_start_scale - $stories_height) / 2), //        "left" =&gt; round(-1 * ($image_width * $image_start_scale - $stories_width) / 2), //        "scale" =&gt; $image_start_scale ]);</span></span></code> </pre><br></div></div><br>  Selesai!  Jika sekarang menghasilkan cerita, maka selama 5 detik kami akan mengagumi kucing.  Tapi saya berjanji akan ada animasi, mari kita tambahkan. <br><br>  Animasi untuk objek ditambahkan menggunakan metode yang terpisah, argumen yang merupakan array parameter yang objek harus datang.  Animasi untuk satu objek dapat berupa angka apa saja.  Perlu dikatakan bahwa sintaks perpustakaan menyiratkan penggunaan Antarmuka Fasih. <br><br><div class="spoiler">  <b class="spoiler_title">Menambahkan gambar dan animasi</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//      $main_image = $dir."/images/1.jpg"; //   ) list($image_width, $image_height) = getimagesize($main_image); // ,      ,       $image_start_scale = round(1280 / $image_height, 1); // $image_end_scale = $image_start_scale + 0.5; //     $stories-&gt;addImage([ "path" =&gt; $main_image, "top" =&gt; round(-1 * ($image_height * $image_start_scale - $stories_height) / 2), //        "left" =&gt; round(-1 * ($image_width * $image_start_scale - $stories_width) / 2), //        "scale" =&gt; $image_start_scale ])-&gt;addAnimation([ "top" =&gt; round(-1 * ($image_height * $image_end_scale - $stories_height) / 2), //         "left" =&gt; round(-1 * ($image_width * $image_end_scale - $stories_width) / 2),//         "scale" =&gt; $image_end_scale, ]);</span></span></code> </pre><br></div></div><br>  Seperti yang mungkin Anda perhatikan, metode addAnimation digunakan untuk menambahkan animasi.  Parameter yang diperlukan untuk animasi: <br><br><ul><li>  "Mulai" - Yang kedua saat animasi harus dimulai.  Jika tidak disetel, animasi akan dimulai ketika objek ditambahkan. </li><li>  "Durasi" - Durasi animasi dalam hitungan detik </li></ul><br>  Array parameter yang dapat dipengaruhi animasi: <br><br><ul><li>  "Atas" </li><li>  "Kiri" </li><li>  "Opacity" </li><li>  "Putar" </li><li>  "Skala" </li><li>  "Lebar" </li><li>  "Tinggi" </li></ul><br><div class="spoiler">  <b class="spoiler_title">Menambahkan Teks</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//   $stories-&gt;addText([ "text" =&gt; "Hello world!", "path" =&gt; $dir."/fonts/helvetica.ttf", "size" =&gt; 130, "color" =&gt; "#ffffff", "width" =&gt; 620, "top" =&gt; 200, "left" =&gt; 50, "opacity" =&gt; 0, "shadow" =&gt; [ "color" =&gt; "#000000", "top" =&gt; 4, "left" =&gt; 4 ] ])-&gt;addAnimation([ "duration" =&gt; 1, "opacity" =&gt; 1 ])-&gt;addAnimation([ "start" =&gt; 4.5, "duration" =&gt; 0.5, "opacity" =&gt; 0 ]); //   $stories-&gt;addText([ "text" =&gt; "This is a test of function adding text", "path" =&gt; $dir."/fonts/helvetica.ttf", "size" =&gt; 100, "color" =&gt; "#ffffff", "width" =&gt; 620, "top" =&gt; 750, "left" =&gt; 50, "start" =&gt; 0.5, "opacity" =&gt; 0, "shadow" =&gt; [ "color" =&gt; "#000000", "top" =&gt; 4, "left" =&gt; 4 ] ])-&gt;addAnimation([ "duration" =&gt; 1, "opacity" =&gt; 1 ])-&gt;addAnimation([ "start" =&gt; 4.5, "duration" =&gt; 0.5, "opacity" =&gt; 0 ]);</span></span></code> </pre><br></div></div><br>  Teks memiliki parameter uniknya sendiri: <br><br><ul><li>  "Teks" - teks yang ingin Anda tampilkan - wajib ada </li><li>  "Path" - path ke font (.ttf) - wajib ada </li><li>  "Ukuran" - ukuran font </li><li>  "Warna" - warna, misalnya "#ffffff" </li><li>  "Lebar" - lebar blok teks, jika diatur, teks akan secara otomatis dibagi menjadi beberapa baris </li><li>  "Align" - perataan teks [kiri, tengah, kanan] </li><li>  "Bayangan" adalah bayangan </li></ul><br>  Bayangan juga merupakan larik parameter: <br><br><ul><li>  "Warna" - warna bayangan </li><li>  "Top" - lekukan dari atas </li><li>  "Kiri" - margin kiri </li></ul><br><div class="spoiler">  <b class="spoiler_title">Generasi cerita</b> <div class="spoiler_text"><pre> <code class="php hljs">$file_hash = $stories-&gt;generate(<span class="hljs-string"><span class="hljs-string">"/tmp"</span></span>);</code> </pre><br></div></div><br>  Akibatnya, kami mendapatkan nama file yang ada di folder sementara yang dilewatkan sebagai argumen. <br><br><h2>  Hasil kerja </h2><br><img src="https://habrastorage.org/webt/kh/yg/2c/khyg2cy_9yemzeksskxu9jsd1ro.gif"><br><br>  Perlu dikatakan bahwa kecepatan membuat cerita tidak bagus, di komputer yang bagus, klip 5 detik dihasilkan dalam urutan satu menit, pada server sederhana lebih dari 3 menit. <br><br><h2>  Rencana pengembangan </h2><br><ul><li>  Menambahkan skrip animasi standar untuk mengurangi kode </li><li>  Animasi teks (tampilan baris demi baris, dll.) </li><li>  Latar belakang untuk teks. </li></ul><br>  Saya harap seseorang akan menemukan perpustakaan ini bermanfaat.  Saya akan senang mendengar kritik dan harapan dalam hal fungsional. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Git repositori</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id436514/">https://habr.com/ru/post/id436514/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id436504/index.html">Sistem dalam Paket, atau Penutup Paket Apa Yang Ada Dalam Chip?</a></li>
<li><a href="../id436506/index.html">Cara membuat AI-rasis tanpa banyak usaha</a></li>
<li><a href="../id436508/index.html">Investasi $ 10 juta dan pujian Wozniak - menciptakan komputer pendidikan untuk anak-anak</a></li>
<li><a href="../id436510/index.html">Data inti secara detail</a></li>
<li><a href="../id436512/index.html">Bagaimana kami menemukan rilis bermasalah dengan Graphite dan Moira. Rasakan Yandex.Money</a></li>
<li><a href="../id436518/index.html">Haiku β1 - buat / b / OS hebat lagi</a></li>
<li><a href="../id436520/index.html">Jangan menggunakan layanan verifikasi online ketika membocorkan data pribadi</a></li>
<li><a href="../id436522/index.html">Bertentangan dengan instruksi</a></li>
<li><a href="../id436524/index.html">Pengalaman pemrograman Unix *</a></li>
<li><a href="../id436528/index.html">Men-debug jaringan menggunakan eBPF (RHEL 8 Beta)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>