<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏üèø üíÖüèª üèÇüèæ Le moyen le plus simple de faire du chat dans une application iOS üë©‚Äçüîß üë©üèø‚Äç‚öñÔ∏è üëºüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Chaque fois pendant la conception et la mise en page du chat, j'avais une question: "Est-ce que cela peut √™tre simplifi√© d'une mani√®re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le moyen le plus simple de faire du chat dans une application iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448416/">  Bonjour √† tous!  Chaque fois pendant la conception et la mise en page du chat, j'avais une question: "Est-ce que cela peut √™tre simplifi√© d'une mani√®re ou d'une autre?"  La semaine prochaine, je dois faire un grand chat pour l'application, donc encore une fois des pens√©es sur la facilitation des mises en page ont commenc√© √† appara√Ætre dans ma t√™te.  Apr√®s m'√™tre assis un peu et avoir piqu√© les fonctionnalit√©s d'AutoLayout, j'ai trouv√© un moyen de simplifier le processus de mise en page et de continuer √† travailler au maximum.  Pour r√©soudre ces probl√®mes, ils utilisent souvent UICollectionView, mais cette fois, nous utiliserons UITableView. <br><a name="habracut"></a><br><h3>  Premi√®re √©tape: pr√©paration d'une vue UITableView </h3><br>  Vous devez d'abord cr√©er et configurer correctement une UITableView.  Je pr√©f√®re le faire avec du code: <br><br><pre><code class="swift hljs">tableView = <span class="hljs-type"><span class="hljs-type">UITableView</span></span>() tableView.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> tableView.dataSource = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> tableView.rowHeight = <span class="hljs-type"><span class="hljs-type">UITableView</span></span>.automaticDimension tableView.estimatedRowHeight = <span class="hljs-number"><span class="hljs-number">44.0</span></span> tableView.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal"><span class="hljs-literal">false</span></span> view.addSubview(tableView) tableView.topAnchor.constraint(equalTo: view.topAnchor).isActive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> tableView.leftAnchor.constraint(equalTo: view.leftAnchor).isActive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> tableView.rightAnchor.constraint(equalTo: view.rightAnchor).isActive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> tableView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Le point important ici est de d√©finir rowHeight et de d√©finir estimationRowHeight. <br><br><h3>  Deuxi√®me √©tape: cr√©er une cellule </h3><br>  Nous passons maintenant √† la partie la plus int√©ressante - la disposition de la cellule!  Cr√©ez un nouveau fichier, il doit s'agir d'une sous-classe de UITableViewCell, n'oubliez pas de cocher ¬´Cr√©er √©galement un fichier XIB¬ª.  Nous diviserons le processus de mise en page en √©tapes pour le rendre plus facile. <br><br>  Faites glisser une nouvelle UIView dans la cellule et placez n'importe quel backgroundColor, puis faites glisser la nouvelle UILabel sur cette vue.  Maintenant, dans l'inspecteur d'attributs de cette UILabel, vous devez d√©finir 0 dans le champ Lignes.  Cela permettra √† la cellule d'avoir plusieurs lignes de texte.  Cela devrait ressembler √† ceci: <br><br><img src="https://habrastorage.org/webt/va/2z/vu/va2zvuf02buhb69zlv9r1lyc0dy.png" alt="image"><br><br>  Vous devez maintenant attacher les bords de l'√©tiquette aux bords de sa vue d'ensemble avec une l√©g√®re indentation. <br><br><img src="https://habrastorage.org/webt/oy/fb/i8/oyfbi8u1x8spp5fsnx5te9bzdto.png" alt="image"><br><br>  Et maintenant de la pure magie!  Accrochez les bords gauche, sup√©rieur et inf√©rieur de la vue grise aux bords correspondants de la cellule, puis, dans une √©tape distincte, cr√©ez une constante du bord droit de la vue grise au bord droit de la vue de la cellule.  S√©lectionnez maintenant la constante nouvellement cr√©√©e et ouvrez l'inspecteur d'attributs correspondant.  Dans le champ Relation, d√©finissez "Sup√©rieur ou √©gal" et dans le champ Constante, ins√©rez un nombre, par exemple 60. Cette contrainte limitera la largeur maximale du message "bulle". <br><br><img src="https://habrastorage.org/webt/qf/7b/vs/qf7bvs2z3bg5he4vhfsnlljw45k.png" alt="image"><br><br>  Nous passons √† la derni√®re partie.  Cr√©ez une constante de hauteur pour la bulle de message, puis d√©finissez Sup√©rieur ou √©gal √† Relation et toute valeur dans le champ Constante.  La valeur de Constant sera la taille minimale de la "bulle" en hauteur, cela d√©pend de la taille de la police et de l'indentation.  Cr√©ez maintenant un IBOutlet pour l'√©tiquette et la bulle dans la classe de cellules. <br><br><h3>  Troisi√®me et derni√®re √©tape: tout mettre ensemble </h3><br>  Il ne reste plus qu'√† renseigner les m√©thodes de UITableViewDataSource et enregistrer notre cellule: <br><br><pre> <code class="swift hljs">tableView.register(<span class="hljs-type"><span class="hljs-type">UINib</span></span>(nibName: <span class="hljs-string"><span class="hljs-string">"ExampleCell"</span></span>, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), forCellReuseIdentifier: <span class="hljs-string"><span class="hljs-string">"incomingMessage"</span></span>)</code> </pre> <br>  Apr√®s cela, il ne reste plus qu'√† cr√©er et rendre notre cellule: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="hljs-string"><span class="hljs-string">"incomingMessage"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: indexPath) cell.messageLabel.text = <span class="hljs-string"><span class="hljs-string">"This is a test message"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell</code> </pre> <br><h3>  Conclusion </h3><br>  Il vous suffit de composer la m√™me cellule pour les messages sortants et de contourner les coins de la ¬´bulle¬ª.  D'accord, la m√©thode est aussi simple que possible.  Il n'est pas n√©cessaire de faire des calculs de la hauteur et de la largeur de cette tr√®s ¬´bulle¬ª, il suffit de d√©l√©guer ce travail √† AutoLayout.  Voici le plus ou le moins le projet termin√©: <br><br><img src="https://habrastorage.org/webt/jk/35/wd/jk35wdcaxax2wjvqxfdqu-ikuao.png" alt="image"><br><br>  C‚Äôest tout!  J'esp√®re que √ßa vous a plu! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448416/">https://habr.com/ru/post/fr448416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448402/index.html">√âchec de la migration de l'autorit√© de certification (CA) de Windows 2008R vers Windows 2012 R2</a></li>
<li><a href="../fr448404/index.html">Comment acc√©l√©rer le travail avec l'API R-language en utilisant le calcul parall√®le, en utilisant l'exemple d'API Yandex.Direct (Partie 2)</a></li>
<li><a href="../fr448408/index.html">DCIM - La cl√© de la gestion des centres de donn√©es</a></li>
<li><a href="../fr448410/index.html">Les trackers de Google sont int√©gr√©s √† un certain nombre de ressources √©lectroniques russes officielles</a></li>
<li><a href="../fr448414/index.html">Laboratoire √† domicile pour la ma√Ætrise de soi ou quoi acheter dans un kit geek</a></li>
<li><a href="../fr448420/index.html">De la vie avec Kubernetes: comment le serveur HTTP espagnol ne s'est pas plaint</a></li>
<li><a href="../fr448422/index.html">E-Dobavki est un service de recherche de compl√©ments alimentaires Java et Spring Boot √©crit par mes √©tudiants</a></li>
<li><a href="../fr448424/index.html">55 ans plus tard: les embl√©matiques consoles IBM System / 360 culte</a></li>
<li><a href="../fr448430/index.html">Contenu pro 2019: trois rapports et une chanson</a></li>
<li><a href="../fr448432/index.html">Rayonnement adh√©sif: radioactivit√© induite, contamination radioactive, d√©contamination ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>