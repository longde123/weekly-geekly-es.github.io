<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ฟโโ๏ธ ๐ ๐ ุชูุฏูู HealthKit ๐ฉ๐พโ๐ค ๐๐ผ ๐คถ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุงูุฉ HealthKit ูุฐู ุ ุณุชุชุนูู ููููุฉ ุทูุจ ุฅุฐู ูููุตูู ุฅูู ุจูุงูุงุช HealthKit ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุฑุงุกุฉ ููุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ูุณุชูุฏุน HealthKit ุงููุฑูุฒู. ูุณุชุฎุฏู ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูุฏูู HealthKit</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434978/" style=";text-align:right;direction:rtl"> ูู ููุงูุฉ HealthKit ูุฐู ุ ุณุชุชุนูู ููููุฉ ุทูุจ ุฅุฐู ูููุตูู ุฅูู ุจูุงูุงุช HealthKit ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุฑุงุกุฉ ููุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ูุณุชูุฏุน HealthKit ุงููุฑูุฒู.  ูุณุชุฎุฏู ุงูููุงู ุฅุตุฏุงุฑ Swift 4 ู iOS 11 ู Xcode 9. <br><br>  <b>HealthKit</b> ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุชู ุชูุฏูููุง ูู ูุธุงู ุงูุชุดุบูู iOS 8. ูุนูู <i>HealthKit</i> ููุณุชูุฏุน ูุฑูุฒู ูุฌููุน ุงูุจูุงูุงุช ุงููุชุนููุฉ ุจุงูุตุญุฉ ุ ููุง ูุณูุญ ูููุณุชุฎุฏููู ุจุฅูุดุงุก ููู ุชุนุฑูู ุจููููุฌู ูุชุฎุฒูู ุจูุงูุงุช ุงูุชูุฑูู. <br><br>  ุฃุซูุงุก ูุฑุงุกุฉ ููุงู HealthKit ุ ุณุชูุดุฆ ุฃุจุณุท ุชุทุจูู ูุชุชุจุน ุงูุชุฏุฑูุจ ูุชุชุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููุฉ ุทูุจ ุฅุฐู ูุงููุตูู ุฅูู ุจูุงูุงุช HealthKit </li><li style=";text-align:right;direction:rtl">  ููููุฉ ูุฑุงุกุฉ ุจูุงูุงุช HealthKit ูุนุฑุถูุง ูู UITableView </li><li style=";text-align:right;direction:rtl">  ููููุฉ ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ูุณุชูุฏุน HealthKit ุงููุฑูุฒู </li></ul><br>  ูู ุฃูุช ุฌุงูุฒ ููุจุฏุก ูู HealthKitุ  ุงูุฑุฃ ุนูู! <br><a name="habracut"></a><br>  <b>ููุงุญุธุฉ:</b> <i>ููุนูู ุนูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ุณุชุญุชุงุฌ ุฅูู ุญุณุงุจ ูุทูุฑ ูุดุท ููุธุงู ุงูุชุดุบูู iOS.</i>  <i>ุจุฏูู ุฐูู ุ ูุง ููููู ุชูููู HealthKit Capability ูุงููุตูู ุฅูู ูุณุชูุฏุน HealthKit.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงุจุฏุฃ </h3><br>  ูุชุชุจุน ุงูุชุทุจูู ุงููุจุฏุฆู ุญุฑู ุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ ุฃุซูุงุก ุจุฑูุงูุฌ ุงูุชูุฑูู.  ุจุงููุณุจุฉ ุฅูู ุงููุทูุนูู ุนูู <b>ุงูุดุคูู</b> ุงูุงุฌุชูุงุนูุฉ ูุงูุงุฌุชูุงุนูุฉ ูู ูููููุฏ ุ ููุจุบู ุฃู ูููู ูู ุงููุงุถุญ ุฃููู ุฃุชุญุฏุซ ุนู <b>Prancercise</b> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sp/rk/if/sprkif8aw8ng01gh-y4vrroags8.png" alt="ูุฒูุฉ" width="764" height="430"></div><br>  <a href="">ูู ุจุชูุฒูู ูุดุฑูุน ุงูุจุฏุงูุฉ ูุงูุชุญู ูู Xcode</a> . <br><br>  ุชุฑุฌูุฉ ูุชุดุบูู ุงูุชุทุจูู.  ุณุชุฑู "ุงููููู ุงูุนุธูู" ููุงุฌูุฉ ุงููุณุชุฎุฏู.  ุฎูุงู ุงููุงุฏุชูู ุงูุชุงููุชูู ุ ุณูู ุชุถูู ูุธููุฉ ููุฐุง ุงูุชุทุจูู ุชุฏุฑูุฌูุงู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/68a/4a5/c8f68a4a5bea9dfc34c426606e443458.png" alt="ุงูุตูุฑุฉ" width="281" height="500"></div><br><h3 style=";text-align:right;direction:rtl">  ุชุนููู ูุฑูู </h3><br>  <b>HealthKit</b> ูู ุฅุทุงุฑ ุฎุงุต.  ูู ูููู ุงูุชุทุจูู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฏุงูู ุฅุฐุง ูู ููู ูุฏูู ุญุณุงุจ ูุทูุฑ ูุดุท.  ุจุนุฏ ุฃู ูููู ูุฏูู ุญุณุงุจ ูุทูุฑ ุ ููููู ุชุนููู ูุฑููู. <br><br>  ุญุฏุฏ <b>PrancerciseTracker</b> ูู Project Navigator ุ ุซู ุญุฏุฏ <b>ุงููุฏู PrancerciseTracker</b> .  ุงูุชูู ุฅูู ุนูุงูุฉ ุงูุชุจููุจ ุนุงู ูุงููุฑ ููู ุญูู <b>ุงููุฑูู</b> . <br><br>  ุญุฏุฏ ุงูุฃูุฑ ุงููุฑุชุจุท ุจุญุณุงุจ ุงููุทูุฑ ุงูุฎุงุต ุจู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/809/a3e/af2/809a3eaf2aa966919ed95ad1f8a4be38.png" alt="ุงูุตูุฑุฉ" width="2020" height="752"></div><br><h3 style=";text-align:right;direction:rtl">  ุฃุฐููุงุช / ุงุณุชุญูุงูุงุช </h3><br>  ูุฏู HealthKit ุฃูุถูุง ูุฌููุนุฉ ุงูุญููู ุงูุฎุงุตุฉ ุจูุง ุ ูุณุชุญุชุงุฌ ุฅูู ุชูููููุง ูู ุฃุฌู ุฅูุดุงุก ุชุทุจููุงุช ุชุณุชุฎุฏู ุงูุฅุทุงุฑ. <br><br>  ุงูุชุญ ุนูุงูุฉ ุชุจููุจ <b>Capabilities</b> ูู ุงููุญุฑุฑ ุงููุฏู ููู ุจุชูููู <b>HealthKit</b> ุ ููุง ูู ููุถุญ ูู ููุทุฉ ุงูุดุงุดุฉ ุฃุฏูุงู: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dce/374/42e/dce37442eebca83d0e6e480113dcd3fc.png" alt="ุงูุตูุฑุฉ"><br><br>  ุงูุชุธุฑ Xcode ูุชูููู HealthKit ูู.  ููุงุนุฏุฉ ุนุงูุฉ ุ ูุง ุชูุฌุฏ ูุดุงูู ููุง ุ ููู ูุง ูุฒุงู ุจุฅููุงูู ููุงุฌูุฉ ุจุนุถ ุงููุดุงูู ุฅุฐุง ูุณูุช ุชุญุฏูุฏ ูุนุฑู ุงููุฑูู ูุงูุญุฒูุฉ ุจุดูู ุตุญูุญ. <br><br>  ุงูุขู ูู ุดูุก ุฌุงูุฒ.  ุชุญุชุงุฌ ููุท ุฅูู ุทูุจ ุฅุฐู ุงููุณุชุฎุฏู ูุงุณุชุฎุฏุงู HealthKit. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃุฐููุงุช </h3><br>  HealthKit ูุนูู ูุน ุจูุงูุงุช ุณุฑูุฉ ูุญุณุงุณุฉ.  ูุง ูุดุนุฑ ุงูุฌููุน ุจุงูุฑุงุญุฉ ุจุญูุซ ูุณูุญ ููุชุทุจููุงุช ุงููุซุจุชุฉ ุจุงููุตูู ุฅูู ูุฐู ุงููุนูููุงุช. <br><br>  ููุฐุง ุงูุณุจุจ ูุฏู HealthKit ูุธุงู ุฎุตูุตูุฉ ููู.  ูุง ุชุตู HealthKit ุฅูุง ุฅูู ุงูุจูุงูุงุช ุงูุชู ููุงูู ุงููุณุชุฎุฏููู ุนูู ูุดุงุฑูุชูุง.  ูุฅูุดุงุก ููู ุชุนุฑูู ููุณุชุฎุฏูู Prancercise Tracker ุ ูุฌุจ ุฃููุงู ุงูุญุตูู ุนูู ุฅุฐู ูููุตูู ุฅูู ูู ููุน ูู ุงูุจูุงูุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ูุตู ุงูุงุณุชุฎุฏุงู ุงูุชุญุฏูุซ </h3><br>  ุฃููุงู ุ ุนููู ุฃู ุชุตู ููุงุฐุง ุชุทูุจ ูุคุดุฑุงุช ุตุญูุฉ ูู ุงููุณุชุฎุฏููู ูุฏูู.  ูููุญู <b>Xcode</b> ุงููุฏุฑุฉ ุนูู ุชุญุฏูุฏ ูุฐุง ูู ููู <b>Info.plist</b> ููุชุทุจูู ุงูุฎุงุต ุจู. <br><br>  ุงูุชุญ <b>Info.plist</b> .  ุซู ุฃุถู ุงูููุงุชูุญ ุงูุชุงููุฉ: <br>  <b>ุงูุฎุตูุตูุฉ</b> - <b>ูุตู ุญุตุฉ ุงุณุชุฎุฏุงู ุงูุตุญุฉ</b> <br>  <b>ุงูุฎุตูุตูุฉ</b> - <b>ูุตู ุงุณุชุฎุฏุงู ุงูุชุญุฏูุซ ุงูุตุญู</b> <br><br>  ุชุฎุฒู ูุฐู ุงูููุงุชูุญ ุงููุต ุงูุฐู ุณูุชู ุนุฑุถู ุนูุฏ ุธููุฑ ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู ุฅูู HeathKit.  ูุดูุฑ <b>ูุตู ุงุณุชุฎุฏุงู ูุดุงุฑูุฉ ุงูุตุญุฉ</b> ุฅูู ูุณู ุงูุจูุงูุงุช ุงูุชู ูุฌุจ ูุฑุงุกุชูุง ูู HealthKit.  <b>ูุตู ุงุณุชุฎุฏุงู ุชุญุฏูุซ ุงูุตุญุฉ</b> ูุชูุงูู ูุน ุงูุจูุงูุงุช ุงูููุชูุจุฉ ุนูู HealthKit. <br><br>  ููููู "ุฅุถุงูุฉ" ูู ูุง ุชุฑูุฏ ููุงู.  ุนุงุฏุฉ ูุง ูููู ูุฐุง ูุตููุง: "ุณูุณุชุฎุฏู ูุนูููุงุชู ุงูุตุญูุฉ ูุชุชุจุน ุชูุงุฑููู ุจุดูู ุฃูุถู." <br><br>  ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ุฅุฐุง ูู ูุชู ุชุซุจูุช ูุฐู ุงูููุงุชูุญ ุ ูุณูุชุนุทู ุงูุชุทุจูู ุนูุฏ ูุญุงููุฉ ุชุณุฌูู ุงูุฏุฎูู ุฅูู HealthKit. <br><br><h3 style=";text-align:right;direction:rtl">  HealthKit ุฅุฐู </h3><br>  ุงูุชุญ ููู <i>HealthKitSetupAssistant.swift</i> ุงูุฐู ูุนุฏ ุทุฑููุฉ ุงููุตู ุงูุชู ุณุชุณุชุฎุฏููุง ููุชุฎููู ูู HealthKit. <br><br><pre style=";text-align:right;direction:rtl"><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorizeHealthKit</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">completion</span></span></span><span class="hljs-class">: @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">escaping</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bool</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class">?) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Swift</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">) </span></span>{ }</code> </pre> <br>  ูุง ูุฃุฎุฐ ุฃุณููุจ <b>AuthorizeHealthKit</b> (ุฅููุงู :) ุฃู ูุนููุงุช ุ ููุฏูู <b>ุดููู</b> ุชูุฑุฌุน ููุทููุฉ ( <b>ูุฌุงุญ</b> ุฃู <b>ูุดู</b> ) ูุฎุทุฃ ุงุฎุชูุงุฑู ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ูุง.  ุฅุฐุง ุชู ุฅุฑุฌุงุน ุงูุฃุฎุทุงุก ุ ูุณูู ุชูุฑุฑูุง ุฅูู ุงูุดููู ูู ุญุงูุชูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏ ูุง ูููู ุชุทุจูู HealthKit ูุชุงุญูุง ุนูู ุฌูุงุฒู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ุงูุชุทุจูู ูุนูู ุนูู iPad. </li><li style=";text-align:right;direction:rtl">  ูุฏ ูุง ุชุชููุฑ ุจุนุถ ุฃููุงุน ุงูุจูุงูุงุช ูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู HealthKit. </li></ol><br>  ุฏุนููุง ูุณุฑ ูุฐู ุงูุนูููุฉ.  ูุชุฎููู HealthKit ุ ูุฌุจ ุฃู ุชููู ุทุฑููุฉ AuthorizeHealthKit <i>(ุฅููุงู :)</i> ุงูุฎุทูุงุช ุงูุฃุฑุจุน ุงูุชุงููุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ุชููุฑ Healthkit ุนูู ูุฐุง ุงูุฌูุงุฒ.  ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุฃุฑุฌุน ุงููุดู ูุงูุฎุทุฃ ุฅูู ุงูุดููู. </li><li style=";text-align:right;direction:rtl">  ุชุญุถูุฑ ุฃููุงุน ุงูุจูุงูุงุช ุงูุตุญูุฉ.  ุณูู Prancercise Tracker ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู HealthKit. </li><li style=";text-align:right;direction:rtl">  ุชูุธูู ูุฐู ุงูุจูุงูุงุช ูู ูุงุฆูุฉ ุงูุฃููุงุน ููุฑุงุกุฉ ูุฃููุงุน ุงููุชุงุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุทูุจ ุฅุฐู.  ุฅุฐุง ูุฌุญ ูุฐุง ุงูุฅุฌุฑุงุก ุ ููุงูุช ุฌููุน ุงูุฃูุดุทุฉ ุตุญูุญุฉ ูุชู ุฅููุงููุง ุจุดูู ุตุญูุญ. </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุชูุงูุฑ HealthKit </h3><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุชูุงูุฑ HealthKit ุนูู ุงูุฌูุงุฒ. <br>  ุงูุตู ุงูููุฏ ุงูุชุงูู ูู ุจุฏุงูุฉ <i>AuthoriseHealthKit (complet :)</i> method: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//1. ,      HealthKit guard HKHealthStore.isHealthDataAvailable() else { completion(false, HealthkitSetupError.notAvailableOnDevice) return }</span></span></code> </pre><br>  ุณูู ุชุชูุงุนู ูุน <b>HKHealthStore ูู</b> ูุซูุฑ ูู ุงูุฃุญูุงู.  ุฅูู ูุณุชูุฏุน ูุฑูุฒู ูุฎุฒู ุจูุงูุงุช ุตุญุฉ ุงููุณุชุฎุฏู.  <i>ุณุชุณุงุนุฏู</i> ุทุฑููุฉ <i>isHealthDataAvailable ()</i> ุนูู ููู ูุง ุฅุฐุง ูุงู ุฌูุงุฒ ุงููุณุชุฎุฏู ุงูุญุงูู ูุฏุนู ุจูุงูุงุช Heathkit. <br><br>  ูููุน ุจูุงู ุงูุญูุงูุฉ ุงูุชุทุจูู ูู ุชูููุฐ ุจููุฉ <i>ุงูุชุฎููู</i> HealthKit <i>(ุฅููุงู :)</i> ุทุฑููุฉ ุฅุฐุง ูุงู HealthKit ุบูุฑ ูุชููุฑ ุนูู ุงูุฌูุงุฒ.  ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูุชู <b>ุงุณุชุฏุนุงุก</b> ูุชูุฉ ุงูุฅููุงู ูุน ุงูุฎุทุฃ <b>notAvailableOnDevice</b> .  ููููู ุจุจุณุงุทุฉ ุฅุฎุฑุงุฌ ูุฐุง ุฅูู ูุญุฏุฉ ุงูุชุญูู ุฃู ูู ูุญุฏุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ ููุนุงูุฌุฉ ุงูุฎุทูุงุช ุงูุฅุถุงููุฉ ูู ุญุงูุฉ ุญุฏูุซ ูุซู ูุฐุง ุงูุฎุทุฃ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุจูุงูุงุช </h3><br>  ุจูุฌุฑุฏ ุฃู ุชุนุฑู ุฃู HealthKit ูุชุงุญ ุนูู ุฌูุงุฒ ุงููุณุชุฎุฏู ุ ููุฏ ุญุงู ุงูููุช ูุฅุนุฏุงุฏ ุฃููุงุน ุงูุจูุงูุงุช ุงูุชู ุณูุชู ูุฑุงุกุชูุง ููุชุงุจุชูุง ุนูู HealthKit. <br>  HealthKit ูุนูู ูุน ููุน <b>HKObjectType</b> .  ูู ููุน ูุฏุฎู ุฃู ูุนูุฏ ุฅูู ูุณุชูุฏุน HealthKit ุงููุฑูุฒู ูู ููุน ูู <b>HKObjectType</b> .  ุณุชุฑู ุฃูุถูุง HKSampleType ู <b>HKWorkoutType</b> .  ููุงููุง ูุฑุซ ูู <b>HKObjectType</b> ุ ูุฐูู ูุฐุง ูู ููุณ ุงูุดูุก ูู ุงูุฃุณุงุณ. <br><br>  ูู ุจูุตู ููุชุทู ุงูุดูุฑุฉ ุงูุชุงูู ูุจุงุดุฑุฉ ุจุนุฏ ููุชุทู ุงูุดูุฑุฉ ุงูุฃูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//2.   ,     HealthKit guard let dateOfBirth = HKObjectType.characteristicType(forIdentifier: .dateOfBirth), let bloodType = HKObjectType.characteristicType(forIdentifier: .bloodType), let biologicalSex = HKObjectType.characteristicType(forIdentifier: .biologicalSex), let bodyMassIndex = HKObjectType.quantityType(forIdentifier: .bodyMassIndex), let height = HKObjectType.quantityType(forIdentifier: .height), let bodyMass = HKObjectType.quantityType(forIdentifier: .bodyMass), let activeEnergy = HKObjectType.quantityType(forIdentifier: .activeEnergyBurned) else { completion(false, HealthkitSetupError.dataTypeNotAvailable) return }</span></span></code> </pre><br>  ูุงู ุ ูุฐุง <b>ุญุงุฑุณ</b> ูุจูุฑ!  ูุฐุง ุฃูุถูุง ูุซุงู ุฑุงุฆุน ุนูู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุญูุงูุฉ ูุงุญุฏุฉ ูุงุณุชุฑุฏุงุฏ ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ. <br><br>  ูุฅูุดุงุก <b>HKObjectType</b> ููุฐู ุงูุฎุตุงุฆุต ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู <i>HKObjectType.characteristicType (forIdentifier :)</i> ุฃู <i>HKObjectType.quantityType (forIdentifier :)</i> <br>  ุงูุฃููุงุน ุงููููุฒุฉ ูุฃููุงุน ุงููููุงุช ุนุจุงุฑุฉ ุนู ุชุนุฏุงุฏุงุช ูุญุฏุฏูุง ุงูุฅุทุงุฑ.  HealthKit ุงูุฃุญุฐูุฉ ูุนูู. <br><br>  ุณุชูุงุญุธ ุฃูุถูุง ุฃูู ูู ุญุงูุฉ ุนุฏู ุชููุฑ ููุน ูููุฒ ุฃู ููุน ุงุฎุชูุงุฑ ุ ุณุชูุดู ุงูุทุฑููุฉ.  ูุฐุง ูุชุนูุฏ.  ูุฌุจ ุฃู ูุนุฑู ุงูุชุทุจูู ุงูุฎุงุต ุจู ุฏุงุฆููุง ุฃููุงุน HealthKit ุงูุชู ููููู ุงูุนูู ุจูุง ุ ุฅู ูุฌุฏุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ูุงุฆูุฉ ุจุฃููุงุน ุงูุจูุงูุงุช ูููุฑุงุกุฉ ูุงููุชุงุจุฉ </h3><br>  ุญุงู ุงูููุช ุงูุขู ูุฅุนุฏุงุฏ ูุงุฆูุฉ ุจุฃููุงุน ุงูุจูุงูุงุช ูููุฑุงุกุฉ ูุงููุชุงุจุฉ. <br>  ุงูุตู ูุฐุง ุงูุฑูุฒ ุงูุซุงูุซ ูู <i>AuthoriseHealthKit (ุฅููุงู :)</i> ุทุฑููุฉ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุฌุฒุก ุงูุซุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//3.   ,  HealthKit     let healthKitTypesToWrite: Set&lt;HKSampleType&gt; = [bodyMassIndex, activeEnergy, HKObjectType.workoutType()] let healthKitTypesToRead: Set&lt;HKObjectType&gt; = [dateOfBirth, bloodType, biologicalSex, bodyMassIndex, height, bodyMass, HKObjectType.workoutType()]</span></span></code> </pre><br>  ุชุชููุน HealthKit ูุฌููุนุฉ ูู ูุงุฆูุงุช <b>HKSampleType</b> ุงูุชู ุชูุซู ุฃููุงุน ุงูุจูุงูุงุช ุงูุชู ูููู ูููุณุชุฎุฏู ุฃู ููุชุจูุง ุ ูุชุชููุน ุฃูุถูุง ูุฌููุนุฉ ูู ูุงุฆูุงุช HKObjectType ููุชู ุนุฑุถูุง ููุชุทุจูู ุงูุฎุงุต ุจู. <br><br>  <b>HKObjectType.workoutType ()</b> ูู ููุน ุฎุงุต ูู <b>HKObjectType</b> .  ูุฐุง ูู ุฃู ุชุฌุฑูุจ. <br><br><h3 style=";text-align:right;direction:rtl">  HealthKit ุฅุฐู </h3><br>  ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุงูุฃุณูู.  ุชุญุชุงุฌ ููุท ุฅูู ุทูุจ ุฅุฐู ูู HealthKit.  ุงูุตู ุขุฎุฑ ูุทุนุฉ ูู ุงูุดูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//4.    HKHealthStore().requestAuthorization(toShare: healthKitTypesToWrite, read: healthKitTypesToRead) { (success, error) in completion(success, error) }</span></span></code> </pre><br>  ูุทูุจ ูุฐุง ุงูุฑูุฒ ุฅุฐููุง ูู HealthKit ุ ุซู ูุณุชููู ุงูุงุณุชููุงู.  ูุณุชุฎุฏููู ุงููุชุบูุฑุงุช ูุนูููุงุช ูุงุฌุญุฉ ูุงูุฃุฎุทุงุก ุงูุชู ุชู ุชูุฑูุฑูุง ูู requestHuthorization HKHealthStore <i>(toShare: read: complet :)</i> method. <br><br>  ููููู ุงูุชูููุฑ ูู ุงูุฃูุฑ ุนูู ุฃูู ุฅุนุงุฏุฉ ุชูุฌูู.  ุจุฏูุงู ูู ูุนุงูุฌุฉ ุงูุฅููุงู ุฏุงุฎู HealthKitSetupAssistant ุ ููููู ุชูุฑูุฑ ุงูุญุฒูุฉ ุฅูู ูุญุฏุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ ุ ููุง ูุฏ ูุนุฑุถ ุชุญุฐูุฑูุง ุฃู ูุชุฎุฐ ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ุงูุฃุฎุฑู. <br><br>  ูุญุชูู ุงููุดุฑูุน ุจุงููุนู ุนูู ุฒุฑ ุชุฎููู HealthKit ุ ููุณุชุฏุนู ุทุฑููุฉ AuthorizeHealthKit <i>()</i> ูู MasterViewController.  ูุฐุง ูู ุงูููุงู ุงููุซุงูู ููุงุชุตุงู ุจุฃุณููุจ ุงูุชุฑุฎูุต ุงูุฐู ูุชุจูุงู ููุชู. <br><br>  ุงูุชุญ <b>MasterViewController.swift</b> ุ ูุงุจุญุซ ุนู ุทุฑููุฉ <b>AuthoriseHealthKit</b> <i>(</i> ) ูุงูุตู ูุฐุง ุงูุฑูุฒ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HealthKitSetupAssistant</span></span>.authorizeHealthKit { (authorized, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> authorized <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> baseMessage = <span class="hljs-string"><span class="hljs-string">"HealthKit Authorization Failed"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = error { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\(baseMessage). Reason: \(error.localizedDescription)"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(baseMessage) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"HealthKit Successfully Authorized."</span></span>) }</code> </pre><br>  ูุณุชุฎุฏู ูุฐุง ุงูุฑูุฒ <i>AuthoriseHealthKit (ุฅููุงู :)</i> ุงูุทุฑููุฉ ุงูุชู ุทุจูุชูุง ููุชู.  ุนูุฏ ุงูุงูุชูุงุก ุ ุณูุนุฑุถ ุฑุณุงูุฉ ูู ูุญุฏุฉ ุงูุชุญูู ููุฅุดุงุฑุฉ ุฅูู ูุง ุฅุฐุง ูุงู ุงูุชูููุถ ูุงุฌุญูุง ูู HealthKit. <br><br>  ูู ุจุชุดุบูู ุงูุชุทุจูู.  ุงููุฑ ููู ุชุฎููู HealthKit ูู ุงููุงูุฐุฉ ุงูุฑุฆูุณูุฉ ูุณุชุฑู ุดุงุดุฉ ุชุฑุฎูุต ููุจุซูุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4ef/2bc/500/4ef2bc50015fda69b7d916b9231a5f1a.png" alt="ุงูุตูุฑุฉ" width="281" height="500"></div><br>  ูู ุจุชุดุบูู ุฌููุน ุงูููุงุชูุญ ุ ููู ุจุงูุชูุฑูุฑ ูุฑุคูุฉ ูู ูููู ุ ูุงุถุบุท ุนูู <b>ุณูุงุญ</b> .  ูู ูุญุฏุฉ ุงูุชุญูู ุ ุณุชุฑู ุฑุณุงูุฉ ูุซู ูุฐู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HealthKit</span></span> <span class="hljs-type"><span class="hljs-type">Successfully</span></span> <span class="hljs-type"><span class="hljs-type">Authorized</span></span>.</code> </pre><br>  <b>ุนุธูู!</b>  ุงูุชุทุจูู ูุฏูู ุญู ุงููุตูู ุฅูู ูุณุชูุฏุน ูุฑูุฒู HealthKit.  ุงูุขู ุญุงู ุงูููุช ูุจุฏุก ุชุนูุจ ุงูุนูุงุตุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฎุตุงุฆุต ูุงูุนููุงุช </h3><br>  ูู ูุฐุง ุงููุณู ุณูู ุชุชุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููุฉ ูุฑุงุกุฉ ุงูุฎุตุงุฆุต ุงูุจููููุฌูุฉ ูููุณุชุฎุฏู ุงูุฎุงุต ุจู. </li><li style=";text-align:right;direction:rtl">  ููููุฉ ูุฑุงุกุฉ ููุชุงุจุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุนููุงุช (ุงููุฒู ุ ุงูุทูู ุ ุฅูุฎ) </li></ul><br>  ุงูุฎุตุงุฆุต ุงูุจููููุฌูุฉ ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุฃููุงุน ูู ุงูุนูุงุตุฑ ุงูุชู ูุง ุชุชุบูุฑ ุ ุชูุงููุง ูุซู ูุตููุฉ ุฏูู.  ุงูุนููุงุช ูู ุงูุนูุงุตุฑ ุงูุชู ุชุชุบูุฑ ุจุดูู ูุชูุฑุฑ ุ ูุซู ุงููุฒู. <br><br>  ูู ุฃุฌู ุชุชุจุน ูุนุงููุฉ <b>ูุถุน</b> ุชุฌุฑูุจ <b>Prancercise</b> ุจุดูู ุตุญูุญ ุ ูุฌุจ ุฃู ูุชููู ุชุทุจูู <b>Prancercise Tracker</b> ุนููุฉ ูู ูุฒู ุงููุณุชุฎุฏู ูุงุฑุชูุงุนู.  ูุนุง ุ ูููู ุงุณุชุฎุฏุงู ูุฐู ุงูุนููุงุช ูุญุณุงุจ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู (BMI). <br><br>  <b>ููุงุญุธุฉ:</b> <i>ูุคุดุฑ ูุชูุฉ ุงูุฌุณู (BMI) ูู ูุคุดุฑ ูุณุชุฎุฏู ุนูู ูุทุงู ูุงุณุน ููุฏููู ูู ุงูุฌุณู ููุชู ุญุณุงุจู ุนูู ุฃุณุงุณ ูุฒู ุงูุดุฎุต ูุงุฑุชูุงุนู.</i>  <i>ุงูุชุดู ุงููุฒูุฏ ุนููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> .</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงูููุงุตูุงุช </h3><br>  Prancercise Tracker ูุง ูุณุฌู ุงูุฎุตุงุฆุต ุงูุจููููุฌูุฉ.  ุงูู ูุญุตู ุนูููุง ูู HealthKit.  ูุฐุง ูุนูู ุฃูู ูุฌุจ ุฃููุงู ุชุฎุฒูู ูุฐู ุงูุฎุตุงุฆุต ูู ูุณุชูุฏุน HeathKit ุงููุฑูุฒู. <br><br>  ุฅุฐุง ูู ุชูู ูุฏ ูุนูุช ุฐูู ุจุนุฏ ุ ููุฏ ุญุงู ุงูููุช ูุฅุฎุจุงุฑ <b>ููุซููุช</b> ููููุงู ุนู ููุณู. <br><br>  ุงูุชุญ ุชุทุจูู Health ุนูู ุฌูุงุฒู ุฃู ุฌูุงุฒ ูุญุงูุงุฉ.  ุญุฏุฏ ุนูุงูุฉ ุชุจููุจ ุงูุจูุงูุงุช ุงูุตุญูุฉ.  ุซู ุงููุฑ ุนูู ุฃููููุฉ ุงูููู ุงูุดุฎุตู ูู ุงูุฒุงููุฉ ุงููููู ุงูุนููุง ูุนุฑุถ ูููู ุงูุตุญู.  ุงููุฑ ููู " <b>ุชุนุฏูู"</b> ูุฃุฏุฎู ูุนูููุงุช ุชุงุฑูุฎ ุงููููุงุฏ ูุงูุฌูุณ ูููุน ุงูุฏู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/324/285/ea4/324285ea449bb8049ff166c1e83ec76f.png" alt="ุงูุตูุฑุฉ" width="1732" height="1540"></div><br>  ุงูุขู <b>ูุจุนุฏ</b> ุฃู ุชุนุฑู <b>HealthKit</b> ุชุงุฑูุฎ ูููุงุฏู ูููุน ุงูุฌูุณ ูููุน ุงูุฏู ุ ููุฏ ุญุงู ุงูููุช ููุฑุงุกุฉ ูุฐู ุงูููุฒุงุช ูู <b>Prancercise Tracker</b> . <br><br>  ุงูุนูุฏุฉ ุฅูู <b>Xcode</b> ููุชุญ <i>ProfileDataStore.swift</i> .  ุชูุซู ูุฆุฉ <b>ProfileDataStore</b> ููุทุฉ ุงููุตูู ุฅูู ุฌููุน ุงูุจูุงูุงุช ุงููุชุนููุฉ ุจุงูุตุญุฉ ูููุณุชุฎุฏููู. <br><br>  ุงูุตู ุงูุทุฑููุฉ ุงูุชุงููุฉ ูู <b>ProfileDataStore</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getAgeSexAndBloodType</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">throws</span></span></span><span class="hljs-class"> -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">age</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Int</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">biologicalSex</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKBiologicalSex</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bloodType</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKBloodType</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> healthKitStore = <span class="hljs-type"><span class="hljs-type">HKHealthStore</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1. This method throws an error if these data are not available. let birthdayComponents = try healthKitStore.dateOfBirthComponents() let biologicalSex = try healthKitStore.biologicalSex() let bloodType = try healthKitStore.bloodType() //2. Use Calendar to calculate age. let today = Date() let calendar = Calendar.current let todayDateComponents = calendar.dateComponents([.year], from: today) let thisYear = todayDateComponents.year! let age = thisYear - birthdayComponents.year! //3. Unwrap the wrappers to get the underlying enum values. let unwrappedBiologicalSex = biologicalSex.biologicalSex let unwrappedBloodType = bloodType.bloodType return (age, unwrappedBiologicalSex, unwrappedBloodType) } }</span></span></code> </pre><br>  <i>ุชุณุชุฏุนู</i> ุทุฑููุฉ <i>getAgeSexAndBloodType ()</i> <b>HKHealthStore</b> ุ ูุชุทูุจ ุชุงุฑูุฎ ูููุงุฏ ุงููุณุชุฎุฏู ูููุน ุงูุฌูุณ ูููุน ุงูุฏู.  ููุง ูุญุณุจ ุนูุฑ ุงููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ุชุงุฑูุฎ ุงููููุงุฏ. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑุจูุง ูุงุญุธุช ุฃู ูุฐู ุงูุทุฑููุฉ ูุฏ ุชุชุณุจุจ ูู ุญุฏูุซ ุฎุทุฃ.  ูุญุฏุซ ูุฐุง ุนูุฏูุง ูุง ูุชู ุชุฎุฒูู ุชุงุฑูุฎ ุงููููุงุฏ ุฃู ุงูุฌูุณ ุฃู ูุตููุฉ ุงูุฏู ูู ูุณุชูุฏุน HealthKit ุงููุฑูุฒู.  ูุธุฑูุง ูุฃูู ุฃุฏุฎูุช ููุชู ูุฐู ุงููุนูููุงุช ูู ุชุทุจููู ุ ูุฌุจ ุฃูุง ุชุชุณุจุจ ูู ุญุฏูุซ ุฃุฎุทุงุก. </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ูุฆุฉ <b>ุงูุชูููู</b> ุ ููููู ุชุญููู ุฃู ุชุงุฑูุฎ ุฅูู ูุฌููุนุฉ ูู <b>ููููุงุช ุงูุชุงุฑูุฎ</b> .  ูุฐุง ููุงุณุจ ุญููุง ุนูุฏูุง ุชุฑูุฏ ุงูุญุตูู ุนูู ุณูุฉ ููุญุตูู ุนูู ููุนุฏ.  ูุญุตู ูุฐุง ุงูุฑูุฒ ููุท ุนูู ุนุงู ูููุงุฏู ุ ุงูุณูุฉ ุงูุญุงููุฉ ุ ุซู ูุญุณุจ ุงููุฑู. </li><li style=";text-align:right;direction:rtl">  ุชุชู ุชุณููุฉ ุงููุชุบูุฑุงุช "ุงูููุณุนุฉ" ุจุทุฑููุฉ ุชุฌุนู ูู ุงููุงุถุญ ุฃูู ุชุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงูุชุนุฏุงุฏ ุงูุฃุณุงุณู ูู ูุฆุฉ ุงููุฌูุน ( <b>HKBiologicalSexObject</b> ู <b>HKBloodTypeObject</b> ). </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู </h3><br>  ุฅุฐุง ููุช ุงูุขู ุจุชุฑุฌูุฉ ุงูุชุทุจูู ูุชุดุบููู ุ ููู ุชุฑู ุฃู ุชุบููุฑุงุช ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูุฃูู ูู ุชูู ุจุชูุตูู ูุฐุง ุงูููุทู ุจู ุญุชู ุงูุขู. <br>  ุงูุชุญ <b>ProfileViewController.swif</b> ูุงุจุญุซ ุนู ุงูุฃุณููุจ <i>loadAndDisplayAgeSexAndBloodType (</i> ) <br><br>  ุณุชุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ <b>ProfileDataStore</b> ูุชุญููู ุงูุฎุตุงุฆุต ุงูุจููููุฌูุฉ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู. <br><br>  ูู ุจูุตู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ูู ุฃุณููุจ <i>loadAndDisplayAgeSexAndBloodType ()</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> userAgeSexAndBloodType = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.getAgeSexAndBloodType() userHealthProfile.age = userAgeSexAndBloodType.age userHealthProfile.biologicalSex = userAgeSexAndBloodType.biologicalSex userHealthProfile.bloodType = userAgeSexAndBloodType.bloodType updateLabels() } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: error) }</code> </pre><br>  ูุญููู ุฑูุฒ ุงูููุฏ ูุฐุง ุงูุนูุฑ ูุงูุฌูุณ ูููุน ุงูุฏู ููุชุงุจ.  ุซู ูููู ุจุชุนููู ูุฐู ุงูุญููู ูู ุงููุซูู ุงููุญูู ููููุฐุฌ UserHealthProfile.  ุฃุฎูุฑูุง ุ ูููู ุจุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ ูู <b>UserHealthProfile</b> ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <b>updateLabels</b> <i>()</i> . <br><br>  ูุธุฑูุง ูุฃู ุทุฑููุฉ <i>getAgeSexAndBloodType ()</i> <b>ProfileDataStore</b> ูุฏ ุชุคุฏู ุฅูู ุญุฏูุซ ุฎุทุฃ ุ ูุฌุจ ุนูู <b>ProfileViewController</b> ูุนุงูุฌุชู.  ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ููุท ุฃุฎุฐ ุงูุฎุทุฃ ูุชูุฏููู ูุชุญุฐูุฑ. <br><br>  ูู ูุฐุง ุนุธูู ุ ูููู ููุงู ุงูุตูุฏ ูุงุญุฏ.  ุฃุณููุจ <i>updateLabels () ูุง ููุนู</i> ุดูุฆูุง ุจุนุฏ.  ูุฐุง ูุฌุฑุฏ ุฅุนูุงู ูุงุฑุบ.  ูุฐู ุงููุฑุฉ ุ ุฏุนูุง ููุชูู ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู. <br><br>  ุงุจุญุซ ุนู ุทุฑููุฉ <i>updateLabels ()</i> ูุงูุตู ูุฐู ุงูุดูุฑุฉ ูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> age = userHealthProfile.age { ageLabel.text = <span class="hljs-string"><span class="hljs-string">"\(age)"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> biologicalSex = userHealthProfile.biologicalSex { biologicalSexLabel.text = biologicalSex.stringRepresentation } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bloodType = userHealthProfile.bloodType { bloodTypeLabel.text = bloodType.stringRepresentation }</code> </pre><br>  ุงูููุฏ ุจุณูุท ุฌุฏุง.  ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุฏ ุญุฏุฏ ุงูุนูุฑ ุ ูุณูุชู ุชูุณููู ูู ุชุตููู.  ุงูุดูุก ููุณู ููุทุจู ุนูู ุงูุฌูุณ ุงูุจููููุฌู ูููุน ุงูุฏู.  ุชุญููู stringReprุงุถุฑation ุงููุชุบูุฑ ุงูุชุนุฏุงุฏ ุฅูู ุณูุณูุฉ ูุฃุบุฑุงุถ ุงูุนุฑุถ. <br><br>  ุชุฑุฌูุฉ ูุชุดุบูู ุงูุชุทุจูู.  ุงูุชูู ุฅูู ุดุงุดุฉ ููู ุงูุชุนุฑูู ููุคุดุฑ ูุชูุฉ ุงูุฌุณู.  ุงููุฑ ููู ุงูุฒุฑ ูุฑุงุกุฉ HealthKit ุงูุจูุงูุงุช. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e13/3a5/ed1/e133a5ed1cd1d13016f28cc1a3452af9.png" alt="ุงูุตูุฑุฉ" width="281" height="500"></div><br>  ุฅุฐุง ููุช ุจุฅุฏุฎุงู ูุนูููุงุชู ูุณุจููุง ูู ุงูุชุทุจูู ุ ููุฌุจ ุฃู ุชุธูุฑ ูู ุงูุงุฎุชุตุงุฑุงุช ุนูู ูุฐู ุงูุดุงุดุฉ.  ุฅุฐุง ูู ุชูู ุจุฐูู ุ ูุณุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ. <br><br>  ูุงู!  ููููู ูุฑุงุกุฉ ูุนุฑุถ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ูู <b>HealthKit</b> . <br><br><h3 style=";text-align:right;direction:rtl">  ุนููุงุช ุงูุงุณุชุนูุงู </h3><br>  ุงูุขู ุญุงู ุงูููุช ููุฑุงุกุฉ ุงููุฒู ูุงูุงุฑุชูุงุน ูููุณุชุฎุฏู.  ุณูุชู ุงุณุชุฎุฏุงููุง ูุญุณุงุจ ูุนุฑุถ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูู ุนุฑุถ ุงูููู ุงูุดุฎุตู. <br><br>  ุงูุฎุตุงุฆุต ุงูุจููููุฌูุฉ ูุชููุฑุฉ ุจุณูููุฉ ูุฃููุง ูุง ุชุชุบูุฑ ุฃุจุฏูุง.  ุนููุงุช ุชุชุทูุจ ููุฌุง ุฃูุซุฑ ุชุนููุฏุง ุจูุซูุฑ.  ูุณุชุฎุฏููู <b>HKQuery</b> ุ ูุจุดูู ุฃูุซุฑ ุฏูุฉ <b>HKSampleQuery</b> . <br><br>  ูุทูุจ ุนููุงุช ูู HealthKit ุ ุณูู ุชุญุชุงุฌ ุฅูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญุฏุฏ ููุน ุงูุนููุฉ ุงูุชู ุชุฑูุฏ ุทูุจูุง (ุงููุฒู ุ ุงูุทูู ุ ุฅูุฎ) ุ </li><li style=";text-align:right;direction:rtl">  ุจุนุถ ุงูุฎูุงุฑุงุช ุงูุฅุถุงููุฉ ุงูุชู ุชุณุงุนุฏ ุนูู ุชุตููุฉ ุงูุจูุงูุงุช ููุฑุฒูุง.  ููููุงู ุจุฐูู ุ ููููู ุชูุฑูุฑ <b>NSPredicate</b> ุงุฎุชูุงุฑู ุฃู ุตููู <b>NSSortDescriptors</b> . </li></ol><br>  <b>ููุงุญุธุฉ:</b> <i>ุฅุฐุง ููุช ูุนุชุงุฏูุง ุนูู CoreData ุ ููู ุงููุญุชูู ุฃูู ูุงุญุธุช ุจุนุถ ุฃูุฌู ุงูุชุดุงุจู.</i>  <i>ูุดุจู <b>HKSampleQuery NSFetchedRequest</b> ูููุน ูุงุฆู ุ ุญูุซ ุชุญุฏุฏ ูุงุตูุงุช ุงููุฑุฒ <b>ูุชุฑุชูุจูุง</b> ุ ุซู ุชููู ุจุชุนููู ุณูุงู ุงููุงุฆู ูุชูููุฐ ุงูุงุณุชุนูุงู ููุญุตูู ุนูู ุงููุชุงุฆุฌ.</i> <br><br>  ุจูุฌุฑุฏ ุฅุนุฏุงุฏ ุงูุงุณุชุนูุงู ุงูุฎุงุต ุจู ุ ููููู ุจุจุณุงุทุฉ ุงุณุชุฏุนุงุก ุฃุณููุจ <b>HKHealthStore</b> <i>ExecuteQuery ()</i> ููุญุตูู ุนูู ุงููุชุงุฆุฌ. <br><br>  ุจุงููุณุจุฉ ุฅูู <b>Prancercise Tracker ุ</b> ุณุชููู ุจุฅูุดุงุก ูุธููุฉ ูุงุญุฏุฉ ุนุงูููุฉ ูุชูุฒูู ุฃุญุฏุซ ุงูุนููุงุช ูู ุฃู ููุน.  ูุจุงูุชุงูู ุ ููููู ุงุณุชุฎุฏุงูู ููู ูู ุงููุฒู ูุงูุทูู. <br><br>  ุงูุชุญ <b>ProfileDataStore.swift</b> ูุงูุตู ุงูุทุฑููุฉ ุงูุชุงููุฉ ูู ุงููุตู ุ ุฃุณูู ุทุฑููุฉ <i>getAgeSexAndBloodType () ูุจุงุดุฑุฉู</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getMostRecentSample</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sampleType</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKSampleType</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">completion</span></span></span><span class="hljs-class">: @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">escaping</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKQuantitySample</span></span></span><span class="hljs-class">?, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class">?) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Swift</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//1.  HKQuery    . let mostRecentPredicate = HKQuery.predicateForSamples(withStart: Date.distantPast, end: Date(), options: .strictEndDate) let sortDescriptor = NSSortDescriptor(key: HKSampleSortIdentifierStartDate, ascending: false) let limit = 1 let sampleQuery = HKSampleQuery(sampleType: sampleType, predicate: mostRecentPredicate, limit: limit, sortDescriptors: [sortDescriptor]) { (query, samples, error) in //2.       . DispatchQueue.main.async { guard let samples = samples, let mostRecentSample = samples.first as? HKQuantitySample else { completion(nil, error) return } completion(mostRecentSample, nil) } } HKHealthStore().execute(sampleQuery) }</span></span></code> </pre><br>  ุชุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ููุน ุงูุนููุฉ (ุงูุทูู ุ ุงููุฒู ุ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ุ ุฅูุฎ).  ุซู ูููู ุจุฅูุดุงุก ุงุณุชุนูุงู ูุงุณุชุฑุฏุงุฏ ุขุฎุฑ ุนููุฉ ููุฐุง ุงูููุน.  ุฅุฐุง ูุฑุฑุช ุจููุน ุงูุนููุฉ ููููู ุ ูุณุชุนูุฏ ุฅูู ุขุฎุฑ ุณุฌู ููู ูุฏูู. <br><br>  ุงููุซูุฑ ูุญุฏุซ ููุง.  ุณุฃุชููู ูุดุฑุญ ุจุนุถ ุงูุฃุดูุงุก. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุงู ุนุฏุฉ ุทุฑู ูู <b>HKQuery</b> ูููููุง ูุณุงุนุฏุชู ูู ุชุตููุฉ ุฃูุซูุฉ ุงุณุชุนูุงู HealthKit.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุณุชุฎุฏู ุงูุชุงุฑูุฎ ุงููุณูุฏ ุงููุฏูุฌ. </li><li style=";text-align:right;direction:rtl">  ุทูุจ ุนููุงุช ูู HealthKit ูู ุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ.  ูุฐุง ูู ุงูุณุจุจ ูู ุฃู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูููุฌูุฏุฉ ูู ูุนุงูุฌ ุงูุฅููุงู ููุฌูุฏุฉ ุฏุงุฎู ูุชูุฉ ุงูุฅุฑุณุงู.  ูุทููุจ ุงูุงูุชุซุงู ุนูู ุงูููุถูุน ุงูุฑุฆูุณู.  ุฅุฐุง ูู ุชูู ุจุฐูู ุ ูุณููุดู ุงูุชุทุจูู. </li></ol><br>  ุฅุฐุง ุณุงุฑุช ุงูุฃููุฑ ุนูู ูุง ูุฑุงู ุ ูุณูุชู ุชูููุฐ ุทูุจู ูุณุชุญุตู ุนูู ูููุฐุฌ ุฃููู ูุชู ุฅุฑุฌุงุนู ูู ุณูุณูุฉ <b>ุงูุฑุณุงุฆู</b> <b>ุงูุฑุฆูุณูุฉ</b> ุ ุญูุซ ูููู ูู <b>ProfileViewController</b> ูุถุน ูุญุชููุงุชู ูู ุงูุชุตููู.  ุฏุนููุง ููุนู ูุฐุง ุงูุฌุฒุก ุงูุขู. <br><br><h3 style=";text-align:right;direction:rtl">  ุนุฑุถ ุงูุนููุงุช ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู </h3><br>  ูู ุงููุณู ุงูุณุงุจู ุ ููุช ุจุชูุฒูู ุงูุจูุงูุงุช ูู <b>HealthKit</b> .  <b>ุงุญูุธูุง</b> ููููุฐุฌ ูู <b>ProfileViewController</b> ุ ุซู ูู ุจุชุญุฏูุซ ุงููุญุชูู ูู ุงูุตููู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <b>ProfileViewController updateLabels</b> <i>()</i> <br><br>  ูู ูุง ุนููู ุงูููุงู ุจู ูู ุชูุณูุน ูุฐู ุงูุนูููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ูุธููุฉ ุชููู ุจุชุญููู ุงูุนููุงุช ุ ููุนุงูุฌุชูุง ููุงุฌูุฉ ุงููุณุชุฎุฏู ุ ุซู ุงุณุชุฏุนุงุก <i>updateLabels ()</i> ูููุก ุงูุชุณููุงุช ุจูุต. <br><br>  ุงูุชุญ ุงูููู <b>ProfileViewController.swift</b> ุ ูุงุจุญุซ ุนู ุงูุฃุณููุจ <i>loadAndDisplayMostRecentHeight (</i> ) ูุงูุตู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//1.  HealthKit      guard let heightSampleType = HKSampleType.quantityType(forIdentifier: .height) else { print("Height Sample Type is no longer available in HealthKit") return } ProfileDataStore.getMostRecentSample(for: heightSampleType) { (sample, error) in guard let sample = sample else { if let error = error { self.displayAlert(for: error) } return } //2.     ,   , //    . let heightInMeters = sample.quantity.doubleValue(for: HKUnit.meter()) self.userHealthProfile.heightInMeters = heightInMeters self.updateLabels() }</span></span></code> </pre><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ูุฐู ุงูุทุฑููุฉ ุนู ุทุฑูู ุฅูุดุงุก ููุน ูู ูููุฐุฌ ุงูููู.  ุซู ููุฑุฑ ูุฐุง ุงูููุน ูู ุงูุนููุฉ ุฅูู ุงูุทุฑููุฉ ุงูุชู ูุชุจุชูุง ููุชู ุ ูุงูุชู ุณุชูุฑุฌุน ูููุฐุฌ ููู ุงููุณุชุฎุฏู ุงูุฃุญุฏุซ ุงููุณุฌู ูู HealthKit. </li><li style=";text-align:right;direction:rtl">  ุจูุฌุฑุฏ ุฅุฑุฌุงุน ุงูุนููุฉ ุ ูุชู ุชุญููู ุงูููู ุฅูู ูุชุฑ ูุชุฎุฒููู ูู ูููุฐุฌ UserHealthProfile.  ุซู ุณูุชู ุชุญุฏูุซ <b>ูุงุฌูุฉ ุงููุณุชุฎุฏู</b> . </li></ol><br>  <b>ููุงุญุธุฉ:</b> <i>ุนุงุฏุฉ ูุง ุชุฑูุฏ ุชุญููู ุนููุฉ ูููุฉ ุฅูู ูุญุฏุฉ ููุงุณูุฉ.</i>  <i>ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู ุงูุฑูุฒ ุฃุนูุงู <i>doubleValue (</i> ููุฃุณููุจ <i>:)</i> ุ ูุงูุฐู ูุณูุญ ูู <b>ุจุชูุฑูุฑ</b> ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ุงูุชู ุชุญุชุงุฌูุง (ูู ูุฐู ุงูุญุงูุฉ ุ ูุชุฑ) ุฅูู <b>HKUnit</b> .</i> <i><br><br></i>  <i>ููููู ุฅูุดุงุก ุฃููุงุน ูุฎุชููุฉ ูู <b>HKUnits</b> ุจุงุณุชุฎุฏุงู ุจุนุถ ุฃุณุงููุจ ุงููุตู ุงูุดุงุฆุนุฉ ุงููุชุงุญุฉ ูู ุฎูุงู <b>HealthKit</b> .</i>  <i>ููุญุตูู ุนูู ุงูุนุฏุงุฏุงุช ุ ููููู ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู ุทุฑููุฉ meter () ูู <b>HKUnit</b> ุ ูุณูููู ุฐูู ูุง ุชุญุชุงุฌู.</i> <br><br>  ูุน ููู ุชุณููุชูุง.  ูุงุฐุง ุนู ุงููุฒูุ  ูู ุดูุก ูุชุดุงุจู ุฅูู ุญุฏ ูุง ุ ูููู ุณุชุญุชุงุฌ ุฅูู ููุก ุงูุฃุณููุจ <i>loadAndDisplayMostRecentWeight ()</i> ูู <b>ProfileViewController</b> . <br><br>  ูู ุจูุตู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ูู ุฃุณููุจ <i>loadAndDisplayMostRecentWeight ()</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightSampleType = <span class="hljs-type"><span class="hljs-type">HKSampleType</span></span>.quantityType(forIdentifier: .bodyMass) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Body Mass Sample Type is no longer available in HealthKit"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.getMostRecentSample(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: weightSampleType) { (sample, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sample = sample <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = error { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: error) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightInKilograms = sample.quantity.doubleValue(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">HKUnit</span></span>.gramUnit(with: .kilo)) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.userHealthProfile.weightInKilograms = weightInKilograms <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateLabels() }</code> </pre><br>  ููููู ุฅูุดุงุก ููุน ุงูุนููุฉ ุงูุชู ุชุฑูุฏ ุชููููุง ุ ูุทูุจ <b>HealthKit</b> ูุฐูู ุ ูุฅุฌุฑุงุก ุจุนุถ ุชุญูููุงุช ุงููุญุฏุฉ ุ ูุญูุธูุง ูู ุงููููุฐุฌ ุงูุฎุงุต ุจู ูุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู. <br><br>  ูู ุงูููุช ุงูุญุงูู ุ ูููู ุฃู ุชุธูุฑ ุฃู ุงููููุฉ ูุฏ ุชูุช ุ ูููู ููุงู ุดูุก ุขุฎุฑ.  ูุธููุฉ <i>updateLabels ()</i> ููุณุช ุนูู ุฏุฑุงูุฉ ุจุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุงูุชู ููุฑุชูุง ููุง. <br><br>  ุฏุนููุง ุฅุตูุงุญู. <br><br>  ุฃุถู ุงูุฃุณุทุฑ ุงูุชุงููุฉ ุฅูู ูุธููุฉ <i>updateLabels ()</i> ุ ุฃุณูู ุงูุฌุฒุก ุงูุฐู ุชูุณุน ููู ูุตููุฉ ุงูุฏู ูุนุฑุถู ุนูู ูุงุฌูุฉ ุงููุณุชุฎุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weight = userHealthProfile.weightInKilograms { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightFormatter = <span class="hljs-type"><span class="hljs-type">MassFormatter</span></span>() weightFormatter.isForPersonMassUse = <span class="hljs-literal"><span class="hljs-literal">true</span></span> weightLabel.text = weightFormatter.string(fromKilograms: weight) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> height = userHealthProfile.heightInMeters { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> heightFormatter = <span class="hljs-type"><span class="hljs-type">LengthFormatter</span></span>() heightFormatter.isForPersonHeightUse = <span class="hljs-literal"><span class="hljs-literal">true</span></span> heightLabel.text = heightFormatter.string(fromMeters: height) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bodyMassIndex = userHealthProfile.bodyMassIndex { bodyMassIndexLabel.text = <span class="hljs-type"><span class="hljs-type">String</span></span>(format: <span class="hljs-string"><span class="hljs-string">"%.02f"</span></span>, bodyMassIndex) }</code> </pre><br>  ุจุงุชุจุงุน ุงููุงูุจ ุงูุฃุตูู ูู ูุธููุฉ <i>updateLabels ()</i> ุ ูุฅูู ููุณุน ูุคุดุฑ ุงูุทูู ูุงููุฒู ููุชูุฉ ุงูุฌุณู ูู ูููุฐุฌ <b>UserHealthProfile</b> ุงูุฎุงุต ุจู.  ูู ุญุงูุฉ ุชููุฑูุง ุ ูุฅููุง ุชูุดุฆ ุงูุฎุทูุท ุงูููุงุณุจุฉ ูุชุนูููุง ุฅูู ุงูุชุตูููุงุช ุนูู ุดุงุดุฉ ุงููุณุชุฎุฏู. <br><br>  <b>ุชููู MassFormatter</b> ู <b>LengthFormatter</b> ุจุนูู ุชุญููู ูููู ุฅูู ุณูุงุณู. <br><br>  ูุง ูุชู ุชุฎุฒูู ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ุจุงููุนู ูู ูููุฐุฌ <b>UserHealthProfile</b> .  ูุฐู ุฎุงุตูุฉ ูุญุณูุจุฉ ุชููู ุจุญุณุงุจู. <br><br>  ุงููุฑ ุนูู ุฎุงุตูุฉ <b>bodyMassIndex ูุณุชุฑู</b> ูุง <b>ุฃูุตุฏู</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bodyMassIndex: <span class="hljs-type"><span class="hljs-type">Double?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightInKilograms = weightInKilograms, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> heightInMeters = heightInMeters, heightInMeters &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (weightInKilograms/(heightInMeters*heightInMeters)) }</code> </pre><br>  ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูู ุฎุงุตูุฉ ุงุฎุชูุงุฑูุฉ ุ ุฃู ุฃููุง ูููู ุฃู ุชุนูุฏ ุตูุฑูุง ุฅุฐุง ูู ุชุญุฏุฏ ุฃููุง ูู ุงูุทูู ุฃู ุงููุฒู (ุฃู ุฅุฐุง ูุงูุช ูุถุจูุทุฉ ุนูู ุนุฏุฏ ูุง ูุนูู ูู).  ุงูุญุณุงุจ ุงููุนูู ูู ุจุจุณุงุทุฉ ุงููุฒู ููุณูููุง ุนูู ุงูุงุฑุชูุงุน ุงูุชุฑุจูุนู. <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุจุงู ุณูู ุชุบูุฑ ููุณู ูู ูู ูุฐุง ุฅุฐุง ูู ุชูู ุจุฅุถุงูุฉ ุจูุงูุงุช ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฑุงุกุชูุง ุจูุงุณุทุฉ ุงูุชุทุจูู. ุฅุฐุง ูู ุชูู ูุฏ ููุช ุจุฐูู ุจุงููุนู ุ ูุณุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุนููุงุช ูููุฒู ูุงููุฒู ุนูู ุงูุฃูู. </font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ ุชุทุจูู Health ูุงูุชูู ุฅูู ุนูุงูุฉ ุงูุชุจููุจ Health Data. ููุงู ุ ุญุฏุฏ ูุนููุฉ ููุงุณุงุช ุงูุฌุณู ุ ุซู ุญุฏุฏ ุงููุฒู ุ ุซู ูู ุจุฅุถุงูุฉ ููุทุฉ ุจูุงูุงุช ูุฅุถุงูุฉ ุนููุฉ ูุฒู ุฌุฏูุฏุฉ. ูุฑุฑ ุงูุนูููุฉ ููููู.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐู ุงููุฑุญูุฉ ุ </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prancercise Tracker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฏุฑูุง ุนูู ูุฑุงุกุฉ ุนููุฉ ุญุฏูุซุฉ ูู ูุฒู ุงููุณุชุฎุฏู ูุงุฑุชูุงุนู ุ ุซู ุนุฑุถูุง ูู ุงููุต. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฌูุฉ ูุชุดุบูู ุงูุชุทุจููุงุช. ุงูุฐูุงุจ ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู ุงูุดุฎุตู ููุคุดุฑ ูุชูุฉ ุงูุฌุณู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุซู ุงููุฑ ููู ุงูุฒุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงุกุฉ HealthKit ุงูุจูุงูุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/841/d4d/35d/841d4d35d54528b5578fe32a3b163c0a.png" alt="ุงูุตูุฑุฉ" width="281" height="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุฆุน! </font><font style="vertical-align: inherit;">ููุฏ ูุฑุฃุช ููุชู ุนููุงุชู ุงูุฃููู ูู ูุณุชูุฏุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุณุชุฎุฏูุชูุง ูุญุณุงุจ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ุงูุนููุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prancercise ุงูููุชูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏููุง ุจุงููุนู ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ุขูุฉ ุญุงุณุจุฉ ูู ูุชูุงูู ูุฏู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุณุชุฎุฏููุง ูุชุณุฌูู ุนููุฉ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูููุณุชุฎุฏู ุงูุฎุงุต ุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProfileDataStore.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุถู ุงูุทุฑููุฉ ุงูุชุงููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">saveBodyMassIndexSample</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bodyMassIndex</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Double</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">date</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//1. ,      guard let bodyMassIndexType = HKQuantityType.quantityType(forIdentifier: .bodyMassIndex) else { fatalError("Body Mass Index Type is no longer available in HealthKit") } //2.   HKUnit     let bodyMassQuantity = HKQuantity(unit: HKUnit.count(), doubleValue: bodyMassIndex) let bodyMassIndexSample = HKQuantitySample(type: bodyMassIndexType, quantity: bodyMassQuantity, start: date, end: date) //3.      HealthKit HKHealthStore().save(bodyMassIndexSample) { (success, error) in if let error = error { print("Error Saving BMI Sample: \(error.localizedDescription)") } else { print("Successfully saved BMI Sample") } } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ุฃููุงุน ุงูุนููุงุช ุงูุฃุฎุฑู ุ ูุฌุจ ุนููู ุฃููุงู ุงูุชุฃูุฏ ูู ุฃู ููุน ุงูุนููุฉ ูุชุงุญ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชุญูู ุงูููุฏ ูู ูุฌูุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุงููููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุคุดุฑ ูุชูุฉ ุงูุฌุณู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูุชู ุงุณุชุฎุฏุงูู ูุฅูุดุงุก ุนููุฉ ูููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ูุชููู ุงูุชุทุจูู ุนู ุงูุนูู.</font></font></li><li style=";text-align:right;direction:rtl">  <i>count()</i>  <b>HKUnit</b>    ,       ,   .  -      ,    ,           . </li><li style=";text-align:right;direction:rtl"> <b>HKHealthStore</b>     ,        .      ,        . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูู ุชูุฑูุจุง. ูุชูุฎูุต ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProfileViewController.swif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงุจุญุซ ุนู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saveBodyMassIndexToHealthKit (</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). ูุชู ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุงูููุฑ ููู ุงูุฒุฑ "ุญูุธ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู" ูู ุงูุฌุฏูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตู ุงูููุฏ ุงูุชุงูู ูู ุงูุทุฑููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bodyMassIndex = userHealthProfile.bodyMassIndex <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">ProfileDataError</span></span>.missingBodyMassIndex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.saveBodyMassIndexSample(bodyMassIndex: bodyMassIndex, date: <span class="hljs-type"><span class="hljs-type">Date</span></span>())</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุฐูุฑ ุฃู ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูู ุฎุงุตูุฉ ูุญุณูุจุฉ ุชููู ุจุฅุฑุฌุงุน ูููุฉ ุนูุฏ ุชุญููู ุนููุงุช ุงูุทูู ูุงููุฒู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุชุญุงูู ูุฐู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุญุณุงุจ ูุฐู ุงูุฎุงุตูุฉ ุ ูุฅุฐุง ุฃููู ุ ุณูุชู ุชูุฑูุฑูุง ุฅูู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saveBodyMassIndexSample (bodyMassIndex: date :) ุ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุงูุชู ูุชุจุช ุจูุง ููุชู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธูุฑ ุฃูุถูุง ุชูุจูููุง ูุฑูุญูุง ุฅุฐุง ูุงู ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูุง ูููู ุญุณุงุจู ูุฃู ุณุจุจ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฌูุฉ ูุชุดุบูู ุงูุชุทุจูู. ุงูุชูู ุฅูู ุดุงุดุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุชุนุฑูู ููุคุดุฑ ูุชูุฉ ุงูุฌุณู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุจุชูุฒูู ุงูุจูุงูุงุช ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HeathKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุซู ุงููุฑ ููู ุงูุฒุฑ Save BMI. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุธุฑ ุฅูู ูุญุฏุฉ ุงูุชุญูู. ูู ุชุฑู ุฐููุ</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="swift hljs">   <span class="hljs-type"><span class="hljs-type">BMI</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ุชูุงูููุง! </font><font style="vertical-align: inherit;">ูุชู ุงูุขู ุชุฎุฒูู ุนููุฉ ูุคุดุฑ ูุชูุฉ ุงูุฌุณู ูู ูุณุชูุฏุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฑูุฒู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฑู ูุง ุงุฐุง ููุง ูุณุชุทูุน ุงูุนุซูุฑ ุนููู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ ุชุทุจูู Health ุ ูุงููุฑ ููู ุนูุงูุฉ ุงูุชุจููุจ Health Data ุ ุซู ุงููุฑ ููู ููุงุณุงุช ุงูุฌุณู ูู ุนุฑุถ ุงูุฌุฏูู ุ ุซู ุงููุฑ ููู ูุคุดุฑ ูุชูุฉ ุงูุฌุณู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/953/802/724/953802724c0ccad14b5184bd8b01b17f.png" alt="ุงูุตูุฑุฉ" width="281" height="500"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar434978/">https://habr.com/ru/post/ar434978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar434968/index.html">ุดูุก ุนู ูุณุงุญุฉ ุงูุงุณู</a></li>
<li><a href="../ar434970/index.html">ุญูู ุชูููููุฌูุง ุงููุนูููุงุช ุงูุชุฌุงุฑูุฉ ูุฃูุซุฑ ูู ุฐูู</a></li>
<li><a href="../ar434972/index.html">ููู ุชูุชุจ ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุฐูู ุนูู ุงูุฅุทูุงู</a></li>
<li><a href="../ar434974/index.html">ุงูุนูู ุจุงุณุชุฎุฏุงู ุชูุณูู ุงูุชููููุงุช 1C: Enterprise</a></li>
<li><a href="../ar434976/index.html">ITMO University Fablab: ุงูุชุนููู ุนู ุจุนุฏ ููุฃุตุญุงุจ ุงููุจุฏุนูู - ุฃุธูุฑ ูุง ุจุฏุงุฎููุง</a></li>
<li><a href="../ar434982/index.html">ุงูููุธูุฑ: MultiClet S1</a></li>
<li><a href="../ar434984/index.html">ููุงุฐุง ุฃูุฑู ุงููุตูุญ</a></li>
<li><a href="../ar434986/index.html">ุงูููุงููู ุงูุฃุณุงุณูุฉ ูููุชุจุฉ C ++ ุงูููุงุณูุฉ</a></li>
<li><a href="../ar434992/index.html">ุชุฑููุฉ IDA Pro. ูุตุญุญ ุฃุฎุทุงุก Sega Mega Drive (ุงูุฌุฒุก ุงูุฃูู)</a></li>
<li><a href="../ar434994/index.html">Android: ุฅูุดุงุก ูููุงุช ุงูููุชุฌุงุช ุงูุฏููุงููููุฉ ูุชูููุน ุงูุชูููุนุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>