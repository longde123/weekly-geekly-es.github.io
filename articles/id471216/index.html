<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸšµğŸ» ğŸ‘©ğŸ»â€ğŸ³ ğŸ‘²ğŸ¾ Sejarah panjang buku panduan - bagaimana saya menulis layanan untuk jalur pendakian yang cerdas selama 5 tahun ğŸš¿ ğŸ¤¦ ğŸ‘†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Banyak yang memiliki satu atau lebih proyek rumah mereka. Ini adalah utilitas kecil, karya eksperimental, sampel teknologi baru, "pembunuh" Facebook d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sejarah panjang buku panduan - bagaimana saya menulis layanan untuk jalur pendakian yang cerdas selama 5 tahun</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471216/"><p> Banyak yang memiliki satu atau lebih proyek rumah mereka.  Ini adalah utilitas kecil, karya eksperimental, sampel teknologi baru, "pembunuh" Facebook dan banyak lagi.  Khususnya, proyek semacam itu jarang dilakukan untuk waktu yang lama. </p><br><p>  Dalam artikel tersebut saya akan membagikan pengalaman saya dan memberi tahu Anda bagaimana selama 5 tahun saya sesekali mengerjakan pengembangan buku panduan cerdas untuk St. Petersburg, bagaimana saya berhasil tidak meninggalkan bisnis ini, bagaimana sikap terhadap proyek berubah dan apa yang terjadi pada akhirnya. </p><br><p><img src="https://habrastorage.org/webt/ee/8f/lg/ee8flg22vilx7tptxu7jal6iity.jpeg"></p><a name="habracut"></a><br><blockquote>  Banyak solusi teknis dan sepeda yang diragukan dijelaskan di bawah ini, tetapi jangan kaget - hampir semuanya dibenarkan untuk tujuan dan sumber daya yang tersedia pada waktu itu (= biasanya pengetahuan dan waktu saya) </blockquote><br><h2 id="ideya">  Ide </h2><br><p>  Di setiap kota wisata besar ada ratusan panduan, baik dan tidak terlalu baik, di mana rute utama dicat, poin utama dan banyak informasi bermanfaat lainnya ditunjukkan. <br>  Tetapi rute di sana konstan dan terbatas, dan pemandangan biasanya hanya yang paling penting, seperti "apa yang akan dilihat dalam 3 hari." </p><br><p>  Karena itu, muncul ide membangun rute yang cerdas.  Pengguna memilih titik A dan B dan tidak menerima rute terpendek klasik, tetapi sesuatu yang dekat dengannya, tetapi melewati tempat wisata terdekat. </p><br><p>  Penonton panduan semacam itu tidak hanya turis, tetapi juga penduduk lokal yang ingin mendiversifikasi rute khas mereka ke rumah / pekerjaan / toko (dan ada ulasan seperti itu di app!) Atau hanya lebih baik untuk mengetahui kota. </p><br><p>  <strong>TL; DR</strong> <br>  Intinya adalah aplikasi Android <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wander</a> , yang sekarang hanya berfungsi untuk St. Petersburg. </p><br><h2 id="akt-1-prototip">  Babak 1: Prototipe </h2><br><p> Gagasan itu muncul kembali di universitas pada tahun 2014, saya bahkan tidak yakin bahwa gagasan itu pada mulanya adalah milik saya, pada beberapa hal perlu dibedakan menjadi kelompok, membuat proyek dan menyelesaikannya sebagai makalah.  Mereka jatuh dan menghasilkan ide proyek, dan kemudian nama <code>TravelPath</code> dimulai. </p><br><p>  Seharusnya layanan web, saya tahu sedikit tentang PHP, jadi saya memilih PHP. <br>  Itu perlu untuk memecahkan beberapa masalah: </p><br><p>  <strong>1. Basis Atraksi</strong> <br>  Di sini kami bertemu dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OpenStreetMap</a> , ternyata ini adalah proyek paling keren yang cocok untuk kami.  OSM adalah proyek peta komunitas berbasis komunitas dan nirlaba.  Seperti Wikipedia, hanya tentang peta. <br>  Unduh peta dalam format xml St. Petersburg - <a href="">ada</a> daftar sumber daya tempat Anda dapat melakukan ini. <br>  Saat itu, saya ingat, memetakan file dengan berat lebih dari 1 GB, sehingga pengurai streaming ditulis yang memilih objek dari kategori yang dipilih sebelumnya - monumen, taman, gereja, museum. <br>  OSM memiliki dokumentasi lengkap tentang tag, atribut, dan semua yang Anda butuhkan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , berkat itu tidak akan sulit untuk mengetahui cara mendapatkan data yang Anda butuhkan dari kartu. </p><br><p>  Data kartografi dibuat oleh penggemar, oleh karena itu tidak di mana-mana dan tidak selalu objek memiliki tag yang diperlukan, beberapa tempat memiliki kesalahan, masalah.  Namun untuk kota-kota besar, datanya berkualitas cukup tinggi. </p><br><p>  Jika saya benar menggali kode lama saya, maka saya menggunakan tag berikut untuk mengambil objek: </p><br><ul><li>  <code>building</code> makna <code>cathedral</code> , <code>chapel</code> , <code>church</code> sudah menjadi kategori <code>church</code> </li><li>  <code>amenity</code> dengan nilai <code>fountain</code> jatuh ke <code>monument</code> </li><li>  <code>tourism</code> dengan nilai <code>artwork</code> dan <code>viewpoint</code> pergi ke <code>monument</code> , <code>zoo</code> dan <code>museum</code> ke <code>museum</code> , dan <code>theme_park</code> to <code>park</code> </li><li>  <code>historic</code> dengan <code>boundary_stone</code> , <code>castle</code> , <code>memorial</code> , <code>monument</code> masuk ke kategori <code>monument</code> </li><li>  <code>leisure</code> dengan nilai di <code>park</code> secara alami berakhir di <code>park</code> </li></ul><br><p>  Kami menempatkan semua objek yang diterima ke dalam database dengan koordinat dan bersukacita!  Lebih dari 1.200 poin telah dirilis di St. Petersburg. </p><br><p>  <strong>2. Membangun rute</strong> <br>  Itu tidak dimaksudkan untuk menerapkan sistem yang kompleks sebagai bagian dari kursus, dan pengetahuan teknis pada waktu itu langka, jadi kami memutuskan untuk membagi konstruksi rute menjadi dua bagian: pilihan objek dalam rute dan konstruksi rute itu sendiri.  Sebagian, ini menentukan nasib masa depan, karena nanti saya tidak ingin mengubah skema ini. </p><br><p>  Konstruksi rute antara titik-titik yang dipilih diberikan oleh Google Maps API, yang membuat rute mobil cukup baik, tetapi pada saat itu tidak tahu cara berjalan, setidaknya di Rusia. </p><br><p>  Pilihan objek harus dilaksanakan sendiri.  Ternyata skema aplikasi berikut: </p><br><p><img src="https://habrastorage.org/webt/qf/ji/cu/qfjicujbis8zm-4ojiuumt9vkqk.jpeg"></p><br><p>  Kerugian utama dari pendekatan ini adalah pemilihan titik di rute tanpa memperhitungkan peta, hanya berdasarkan koordinat GPS.  Dan secara keseluruhan, ini bekerja dengan cukup baik, terutama di mana ada jalan sering.  Masalah langka terlihat di sepanjang sungai dengan jembatan langka, misalnya. </p><br><p>  Selanjutnya, kami datang dengan algoritma untuk memilih titik di rute.  Di satu sisi, perlu bahwa rute tidak mengalihkan banyak ke samping, tetapi di sisi lain masih memilih beberapa titik di lingkungan yang diberikan. </p><br><p>  Bukan pernyataan masalah yang sangat jelas, algoritma yang sama keluar, sesuatu yang mirip dengan A * ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki</a> ): diyakini bahwa dari setiap titik ada transisi ke masing-masing.  Selain itu, dalam A *, harga pergi ke simpul n saat mencari rute AB biasanya dinyatakan sebagai berikut: <code>f(n) = g(An) + h(nB)</code> , di mana <code>g(x,y)</code> adalah panjang jalur dari x ke y, dan <code>h(x,y)</code> adalah perkiraan heuristik jarak dari x ke y.  Harga saya sama - <code>f(n) = h(x,n) + h(n,y) * q</code> , di mana q adalah konstanta kurang dari 1. Dengan mengubah nilai q, Anda dapat memengaruhi jumlah titik dalam rute. </p><br><p>  Kami menerapkan algoritme dan, tepuk tangan, semuanya berfungsi, kencangkan antarmuka, beli domain, unggah ke hosting, tulis laporan dan birokrasi lainnya, dan bersukacitalah!  Itu terlihat seperti ini (dan tidak banyak berubah setelah): </p><br><p><img src="https://habrastorage.org/webt/b3/fw/uz/b3fwuz0lqz_x3z2adx9qv-usau8.jpeg"></p><br><p>  <strong>Total: Saya</strong> mendapat prototipe ide keren, berkenalan dengan OSM, Google API, bekerja sebagai tim, mendapat kredit di universitas, dan itu juga menarik. </p><br><h2 id="akt-2-pervaya-polnocennaya-web-versiya">  Babak 2: Versi web lengkap pertama </h2><br><p>  Saya sangat menyukai ide itu dan saya memutuskan untuk mengembangkannya lebih lanjut, tetapi sudah satu.  Dan segera jelas apa yang diperlukan pertama-tama: pada saat itu Google Maps belum dapat membangun rute berjalan, hanya yang mobil sedang dibangun.  Dan seluruh ide dari aplikasi ini terutama tentang berjalan, yang berarti Anda harus dapat membangun rute di sepanjang lorong-lorong taman yang teduh, trotoar pejalan kaki, jembatan dan banyak lagi. </p><br><p>  Itu pada tahun 2015, dan saya terus bekerja di TravelPath, mengambil koreksi dari kesalahan fatal ini - saya mulai membangun cara saya sendiri. </p><br><p>  Saya tidak mengubah teknologi, <code>PHP</code> + <code>MySQL</code> .  Tentu saja, saya segera menyadari bahwa ini bukan tumpukan teknis terbaik untuk tugas seperti itu (membangun rute dalam PHP? Serius?). <br>  Tetapi saya terbatas waktu dan tidak siap untuk beralih ke tumpukan yang lebih masuk akal, dan kedua, sampai sekarang proyek ditulis "di atas meja" - Saya ingin menggunakan aplikasi seperti itu dari perangkat seluler, dan pada tahun-tahun itu hanya berarti pengembangan asli.  Artinya, ketidakmampuannya dalam bentuk versi web sudah jelas, meskipun ada beberapa upaya untuk membuat antarmuka adaptif. </p><br><p>  Tugas-tugas berikut muncul: </p><br><p>  <strong>1. Memperoleh grafik kota</strong> <br>  Di sini OSM yang sama menyelamatkan kita.  Sekali lagi, unduh grafik dalam format xml, parsing, pilih hanya jenis jalan yang diperlukan dan kagumi jumlah data - pada saat itu lebih dari 3 juta simpul dan tepi 500k keluar.  Gagasan pertama adalah bahwa grafik mungkin tidak berhubungan. <br>  Halaman, wilayah tertutup, hal-hal yang tidak dapat dipahami tidak terlalu menarik untuk membangun rute, jadi kami memilih beberapa titik, berkeliling di seluruh grafik dari itu, menandai simpul yang dilewati dan mendapatkan bagian yang terhubung dari grafik. <br>  Secara total, lebih dari 600 ribu puncak dan 150 ribu tepi keluar. <br>  Disimpan diterima dalam database dan dibiarkan sampai waktu yang lebih baik. </p><br><p>  <strong>2. Membangun rute</strong> <br>  Ada data, semuanya diserahkan kepada yang kecil: buat rute di atasnya.  Kami tidak harus menciptakan sesuatu yang baru - ingat jalannya algoritma, baca artikel dengan hati-hati tentang bekerja dengan grafik, ambil algoritma A *, terapkan dalam PHP dan <del>  bersukacitalah </del>  frustrasi oleh betapa lambatnya semuanya bekerja. </p><br><p>  Ada banyak data, oleh karena itu, ketika menyusun grafik, kami tidak menggunakan yang lengkap, tetapi kami hanya membaca sebagian saja - semua yang jatuh ke dalam persegi panjang diperoleh dari semua titik yang dipilih dalam rute. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/p7/9k/qcp79klhlir-x7udd5im-0h-cw0.jpeg"></div><br><p>  (bingkai merah = ~ grafik seperti itu dibaca untuk membangun jalan) </p><br><p>  Sama dengan poin kandidat untuk rute - kami memperhitungkan tidak semuanya, tetapi hanya yang antara awal dan akhir + nilai kecil. <br>  Setelah memilih ukuran persegi panjang ini (konstanta yang digunakan untuk meningkatkannya), kami mencoba menjamin bahwa kami membaca ukuran data minimum yang disyaratkan. <br>  Ada juga ide memecah kota menjadi kotak, membangun rute pertama dengan kotak, dan kemudian membaca grafik di dalam kotak ini dan mencari jalan hanya di sepanjang itu.  Dan Anda dapat pra-menghitung jalur antara semua kotak tetangga.  Atau bahkan lebih - untuk menghitung dan menyimpan jalur di antara semua pemandangan.  Kemudian on the fly tetap membangun hanya jalur dari awal ke objek pertama, dan dari objek terakhir ke garis finish. <br>  Tetapi tangan tidak mencapai realisasi sepeda seperti itu. </p><br><p>  <strong>3. Routing dalam jumlah waktu yang wajar</strong> <br>  Segera menjadi jelas bahwa bottleneck adalah penyimpanan dan bekerja dengan data - algoritma pencarian itu sendiri tidak terlalu dipercepat.  Dan tolok ukur pada lutut mengkonfirmasi bahwa sebagian besar waktu dihabiskan membaca dari database dan manipulasi serupa. <br>  Apa yang harus dilakukan dalam kasus seperti itu?  Jangan simpan grafik ini.  Tapi saya punya cara khusus, <code>MySQL</code> dan tidak lebih, tetapi masalahnya harus diselesaikan. </p><br><ol><li>  Yang pertama - data dinormalisasi, yang nyaman saat parsing, tetapi membaca puluhan ribu catatan dan bahkan dari dua tabel itu menyakitkan.  Solusi yang jelas adalah membuat satu dari dua tabel (untuk simpul dan tepi), hanya untuk tepi, di mana di setiap rekaman koordinat dari kedua simpul dan id mereka. </li><li>  Kami menghitung terlebih dahulu simpul terdekat dari grafik ke pemandangan, dan tidak melakukannya dengan cepat setiap saat. </li><li>  Sejumlah besar waktu dihabiskan untuk mencari titik grafik terdekat dengan pengguna yang diberikan.  Untuk mempercepat ini, saya membagi seluruh grafik menjadi sektor-sektor kecil, menggunakan rumus koordinat yang Anda dapat langsung mendapatkan id sektor, dan kemudian pilih hanya titik di dalam sektor, dan bukan di seluruh grafik, yang jauh lebih cepat. </li></ol><br><p>  Setelah semua manipulasi, kami mendapatkan konstruksi rute berjalan yang wajar di St. Petersburg dalam waktu 2 detik, yang terdengar bagus - ini adalah waktu tunggu yang dapat diterima bagi pengguna. <br>  Skema terakhir keluar seperti ini: </p><br><p><img src="https://habrastorage.org/webt/gk/f0/mh/gkf0mhnk5i9xnnnm6g1eym_a3ce.jpeg"></p><br><p>  <strong>Total: Saya</strong> berkenalan dengan data OSM bahkan lebih baik, dalam praktiknya saya memecahkan masalah grafik (kasus ketika algoritma grafik akhirnya berguna), menulis tolok ukur pertama saya. </p><br><h2 id="akt-3-pervaya-normalnaya-web-versiya">  Babak 3: Versi web normal pertama </h2><br><p>  Di sinilah pikiran pertama tentang proyek sebagai produk yang mungkin berguna bagi seseorang, dan bukan tentang kerajinan di atas meja. <br>  Jadi, Anda perlu menyelesaikan dua masalah paling penting: </p><br><ol><li>  Segera jelas bahwa membangun rute seperti yang saya lakukan pada paragraf terakhir salah. </li><li>  Panduan di peramban mungkin tidak nyaman bagi siapa pun - Anda ingin berjalan-jalan di kota, melihat ke aplikasi yang nyaman di mana Anda dapat membaca apa yang istimewa di sekitar dan seterusnya.  Singkatnya, setidaknya - Anda memerlukan antarmuka adaptif yang keren, dan dalam cara yang baik aplikasi seluler. </li></ol><br><p>  Tetapi pada tahap ini, saya memutuskan untuk hanya berurusan dengan poin pertama.  Kami mempelajari Internet tentang hal ini dan di sini sekali lagi OSM membantu, atau lebih tepatnya proyek yang lahir berkat mereka - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OSRM</a> . <br>  Berdasarkan data peta dari OSM, Open Source Routing Machine dapat membangun berbagai rute dalam waktu yang baik.  Ya, dan proyek sumber terbuka dengan dokumentasi yang baik yang dapat Anda instal di server dan digunakan. <br>  Sebagai bonus, ia juga memiliki API yang cukup nyaman. <br>  Dan antaresm sudah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menulis</a> tentang OSRM pada habr yang membantu saya saat itu.  Benar, banyak air telah mengalir dan artikelnya sudah usang.  Tetapi banyak terima kasih kepada penulis!  Dokumentasi aktual dan cukup bagus ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Setelah instalasi berhasil, kami membuang, hampir tanpa penyesalan, semua kode kami tentang rute dan mulai mengikuti rute di api OSRM, dan diagram terakhirnya seperti ini: </p><br><p><img src="https://habrastorage.org/webt/by/2_/sg/by2_sgklt4qfns1b6l_i544t9z8.jpeg"></p><br><p>  Kami bahkan tidak menyentuh bagian klien - pada bagiannya, API layanan kami tidak berubah dengan cara apa pun. </p><br><p>  <strong>Total</strong> : Saya berpikir tentang penggunaan aplikasi yang sebenarnya oleh orang lain, ternyata arsitektur yang normal dan rute yang baik.  Versi web masih tersedia, meskipun belum berubah sejak saat itu.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://travelpath.ru/</a> </p><br><h2 id="akt-4-android-prilozhenie">  Babak 4: Aplikasi Android </h2><br><p>  Terlepas dari solusi untuk masalah masa lalu, masih jelas bahwa proyek ini masih tidak berguna untuk semua orang kecuali saya.  Karena Anda memerlukan antarmuka normal dan, yang paling penting, aplikasi seluler, bukan versi peramban.  Sekarang teknologinya telah maju dan, mungkin, sudah dimungkinkan untuk membuat aplikasi browser yang berfungsi baik untuk klien seluler, tetapi tidak pada 2015-2016.  Yang berarti kemungkinan yang sangat sempit untuk menggunakan proyek dalam bentuk versi web - untuk duduk di rumah, pilih tempat yang menarik untuk dikunjungi terlebih dahulu.  Karena itu, jika kita berbicara tentang produk normal, Anda memerlukan aplikasi seluler dengan antarmuka yang baik. </p><br><p>  Kemudian pada tahun 2016, saya mulai menulis di Jawa (tetapi backend) dan berpikir bahwa di bawah Android, mereka juga menulis di Jawa.  Mengapa tidak mencoba pengembangan aplikasi, itu harus menjadi pengalaman yang menarik. <br>  Masalah kedua adalah bahwa saya tidak tahu cara mendesain dan saya sendiri tidak akan melakukan antarmuka yang baik.  Saya datang untuk mengunjungi tempat kerja pertama saya (sebuah studio kecil Le-Dantu) dan mengundang kolega saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">burovk untuk</a> berpartisipasi dalam proyek ini.  Anehnya, dia setuju, untuk itu banyak terima kasih :) </p><br><p>  <strong>Tata letak dan prototipe pertama</strong> <br>  Pertama-tama, kami mencoba mencari nama baru, karena TravelPath bukan singkatan yang terlalu, dan terlalu berbicara.  Maka melalui upaya Cyril muncul "Berkeliaran" dengan logo lucu: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6t/8y/7f/6t8y7fht6pqmxvwnajhrtimxe5u.png"></div><br><p>  Saya sangat mengaitkannya dengan pria berkumis, tetapi secara umum saya menyukainya. </p><br><p>  Kemudian tata letak pertama aplikasi yang akan datang muncul: </p><br><p><img src="https://habrastorage.org/webt/t4/u6/x8/t4u6x8pszrlpk7vop64rizgsywu.jpeg"></p><br><p>  Kami juga berpikir, membahas, opsi kedua muncul, yang menjadi versi pertama aplikasi: </p><br><p><img src="https://habrastorage.org/webt/uk/nr/py/uknrpyeckiz1gdqogmtyngojun4.jpeg"></p><br><p>  Dari sisi pengembangan, saya secara sadar memutuskan untuk tidak menggunakan segala macam kerangka kerja modis yang melakukan sihir yang berbeda - karena ada risiko besar ketika menggunakannya tanpa memahami pekerjaan, dan mempelajari dasar-dasar dan keduanya terlalu sulit.  Google, kami membaca dok resmi, artikel pendidikan dan kami mengatasi kesulitan. </p><br><p>  Dari masalah dan tugas yang diingat: </p><br><ul><li>  Untuk android, ada <code>ProGuard</code> - sebuah utilitas yang memampatkan kode sumber selama perakitan, memotong yang tidak digunakan, mengubah nama, dan banyak lagi.  Adalah masuk akal bahwa itu ada, tetapi ketika Anda hanya pergi ke pengembangan dan melakukannya sendiri - tidak jelas bahwa ada bidang penamaan ulang dan ini dapat mempengaruhi perilaku.  Dan segala sesuatu yang terjadi hanya di majelis prod.  Sebagai hasil dari rilis, semuanya keren, tetapi untuk beberapa alasan tidak ada statistik.  Anda mulai mendebit dari backend - dan klien mengirim beberapa omong kosong, alih-alih nama bidang normal - <code>a, b, c</code> , dll.  Kruk sehingga API mampu menguraikan ini dengan terampil, dan kemudian Anda mengetahui bahwa ProGuard mencoba dan Anda perlu menentukan kelas yang diperlukan sebagai pengecualian dalam konfigurasi.  Secara umum tidak ada yang aneh, tetapi jam debugging terbang jauh. </li><li>  Tugas yang menarik adalah memperbarui data aplikasi.  Basis data utama dilengkapi dengan file <code>apk</code> dan saya memperbaruinya sebelum setiap rilis.  Tetapi Anda juga perlu mendukung pembaruan melalui jaringan sehingga klien selalu memiliki data baru jika ada perubahan. <br>  Di versi pertama, saya memutuskan untuk hanya fokus pada waktu pembaruan terakhir.  Aplikasi menyimpan waktu dari objek yang paling segar, pada setiap permulaannya menanyakan backend dengan waktu ini jika sesuatu yang baru telah muncul.  Pembaruan dikirim kepadanya, klien mengingat lagi waktu terbaru dari objek yang diterima (tetapi bukan waktu pembaruan itu sendiri, ini penting). <br>  Ternyata saya berpikiran buruk - karena setahun kemudian kategori kelima muncul - bangunan.  Dan ketika meningkatkan dari versi lama ke versi baru, muncul masalah.  Saya harus berubah sedikit dan klien mengirimkan waktu untuk setiap kategori, bukan yang umum.  Namun skemanya masih belum sempurna - saat menambahkan bidang baru ke objek, muncul masalah yang tidak dapat dipecahkan seperti itu.  Ada ide tentang bagaimana melakukan yang lebih baik, tetapi tangan tidak mencapai dan secara umum tugas itu tidak terlalu prioritas.  Moralitas - ada baiknya untuk secara hati-hati mendekati masalah ini dan berpikir sedikit lebih awal. </li></ul><br><p>  Dan saya juga ingin mengatakan apa yang sudah diketahui semua orang - Stack Overflow sangat keren dan ini terutama terlihat ketika Anda terbang ke pengembangan sesuatu yang tidak lazim seperti yang saya lakukan - segera menulis aplikasi, dan tidak lancar dari kursus, panduan, contoh demo .  Dan ketika tidak ada seorang pun yang bertanya kepada seorang teman.  Tapi selain dia, obrolan tentang pengembangan Android juga membantu - di sana Anda dapat mengajukan lebih banyak pertanyaan abstrak dan meminta tips tentang cara terbaik untuk melakukan sesuatu. </p><br><p>  5 Desember 2016 aplikasi tersebut hits Google Play <br>  Dia hanya memiliki fungsi dasar - meletakkan rute, melihat informasi tentang poin.  Tetapi itu pun tampaknya berhasil!  Sukses, tentu saja, hanya di mata mereka sendiri.  Ada pemahaman bahwa aplikasi tersebut masih mentah dan perlu ditingkatkan. </p><br><p>  <strong>Versi lengkap pertama dan media</strong> <br>  Oleh karena itu, saya menganggap rilis berikutnya sebagai versi lengkap dan peluncuran pertama. <br>  Pertama-tama, kami meninjau desain dan logo - sekarang menjadi seperti ini: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4c/0q/ii/4c0qii9_t77tgksfkp31mldx94k.png" width="96"></div><br><p>  Dan mereka menambahkan fungsionalitas penting untuk buku panduan - favorit, melihat titik pada peta itu sendiri, daftar objek wisata dengan pencarian.  Aplikasi yang diperbarui terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/eo/fh/2j/eofh2jhc1tjz8lyrc1t-ra9kpnk.jpeg"></p><br><p>  Gagasan lain muncul - untuk menghubungi Museum Night dan membuat mode terpisah untuk acara di St. Petersburg. <br>  Museum Night adalah hari libur internasional tahunan di mana museum buka pada malam hari sering dengan program khusus.  Satu tiket berlaku dan banyak yang mencoba berkeliling di banyak museum sekaligus.  Pada saat yang sama tidak ada navigator / peta untuk seluler - hanya beberapa fungsi di situs web resmi acara tersebut. <br>  Kedengarannya sangat cocok dengan gagasan Wander dan juga diminati.  Saya menghubungi penyelenggara acara, tetapi, sayangnya, ide itu tidak dihargai dan tetap ada di pikiran saya sampai waktu yang lebih baik. </p><br><p>  Pada akhirnya, ternyata keren dan akhirnya aplikasi bisa sepenuhnya digunakan.  Pada 2 Juni 2018, sebuah rilis dirilis dan kami memutuskan untuk mencoba menunjukkannya kepada dunia - kami membeli beberapa iklan di VKontakte dan Instagram.  Tetapi yang paling penting, mereka menulis ke beberapa media.  Koran itu menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">catatan</a> tentang peluncuran aplikasi, setelah itu sejumlah publikasi Petersburg - The Village, Dog, dan lainnya - ditulis atau dicetak ulang dengan kipas.  Dan akhirnya ada lalu lintas!  Instalasi bergegas dengan puncak, grafik aktivitas di dalam aplikasi juga.  Tentu saja, kami tidak harus bersukacita untuk waktu yang lama - tetapi kami mendapatkan pengguna pertama, umpan balik yang bermanfaat dan secara umum itu sangat memotivasi.  Pada musim panas yang sama, lalu lintas dari pencarian Google Play terlihat, yang sangat menyenangkan, tetapi kemudian hasilnya tidak dapat direproduksi. <br>  Secara keseluruhan, ini memberikan motivasi yang cukup kuat dan membantu untuk terus bekerja pada aplikasi. </p><br><p>  <strong>Apa yang harus dilakukan selanjutnya?</strong>  <strong>Museum Night, Google jahat, rute melingkar</strong> </p><br><p>  Musim telah berlalu, aktivitas dalam aplikasi telah turun secara dramatis dan jelas bahwa hanya menggergaji fitur tidak terlalu berguna - tidak ada yang akan melihatnya, tidak ada anggaran untuk pemasaran.  Itu perlu untuk datang dengan sesuatu dan kemudian kami kembali ke ide yang ditunda dengan Night of Museums. <br>  Tetapi sekali lagi, tidak mungkin untuk menyetujui kemitraan, namun kali ini kami memutuskan untuk tidak menunda ide, tetapi untuk melakukan semuanya sendiri.  Ternyata sejumlah fitur berguna dalam mode panduan terpisah: museum di peta, rute hanya untuk peserta, informasi singkat, favorit. </p><br><p>  Selain mode ini, bahkan dari simpanan kami mendapat pelestarian rute dan yang paling penting - fitur tentang rute melingkar. </p><br><p>  Rute melingkar selalu lebih penting daripada rute AB, tetapi dengan keras kepala diabaikan.  Namun, orang sering berjalan di sekitar metro / rumah / kantor / hotel daripada sengaja dari A ke B. Akhirnya, mereka meraih tangan mereka dan saya datang dengan heuristik sederhana: <br>  Kami mendapatkan semua poin di dalam radius yang diberikan.  Radius adalah pembatas untuk panjang rute.  Kami memilih beberapa titik terlebih dahulu (syarat acak).  Semua yang lain darinya disortir dalam urutan menaik dari sudut di antara itu, pusat dan titik yang diberikan.          /  ,  . </p><br><p>       ,            . </p><br><p>     ,  ,   : </p><br><p><img src="https://habrastorage.org/webt/fe/nx/6s/fenx6slnfgifc85nw-prhsv51mq.jpeg"></p><br><p>    ,   ,       ,     ,  ,    .     â€”  ,         , . </p><br><p>        Kotlin   , ,   Wander.   ,     .    ,   .         ,     java   â€”       . </p><br><p>     ,  ,  ,   .          â€”    The Village.        -        1000 ,    1400   . ,      Wander  , , ,       .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </p><br><p>    Google  .            â€”  2018      ,         API.        â€”         2018-        <code>Places API</code>   .         API,   -  â€”        .        . </p><br><p>        â€”  <code>Places API</code> ,          .        ,      .  ,         â€”   Google Maps,    .           . </p><br><p> <strong></strong> :  android        Google Play,       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">burovk</a> ,    Wander    ,       . </p><br><h2 id="ty-teper-ne-tolko-razrabotchik">      </h2><br><p>    ,   ,       ,     â€”       .      ,  ,    ,      â€”     .   ,   â€” ,      .    ,         ,     . </p><br><ul><li>                 â€”          <code>git tag v1.0.5</code> . </li><li>   ,   ,   ,    . </li><li>         -   ,       . </li><li>            â€”      ,    //etc       . </li></ul><br><p>        Android  .      , ,      ,       . </p><br><p>       â€”      ,    . </p><br><h2 id="plany">  </h2><br><p>  !  ,       .  , ,    ,           ,      ,   . <br>      : </p><br><ol><li>     â€” ? -   ? </li><li>   .   ,    â€”   . </li><li>   IOS </li><li>   </li></ol><br><p>     . ,   IOS      ,    . </p><br><p>      â€” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Google Play</a> . </p><br><h2 id="vyvody">  </h2><br><ul><li>      ,   â€” .      ,          .           . ,       . </li><li>   â€”  ,      .   backend ,       ,    android   Kotlin,   ,  ,     .     ,     . </li><li>      â€” .      - ,           .   -   .   ,    â€”   . </li></ul><br><p>     .         IOS (   ) â€”   ! </p><br><p>  PS <br>         â€” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://habr.com/post/414433/</a> .         . ,       (    -!),       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471216/">https://habr.com/ru/post/id471216/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471198/index.html">Kami mempelajari pernyataan teorema limit pusat menggunakan distribusi eksponensial</a></li>
<li><a href="../id471202/index.html">Bagaimana saya tidak dapat mengaktifkan MacBook saya karena mencopot TeamViewer</a></li>
<li><a href="../id471204/index.html">Kenali tanggal dan waktu dalam pidato alami</a></li>
<li><a href="../id471210/index.html">Ya Tuhan ... Balada tentang seorang programmer</a></li>
<li><a href="../id471212/index.html">10 tips dan trik untuk membantu Anda menjadi pengembang terbaik di VueJS</a></li>
<li><a href="../id471220/index.html">Cockpit - menyederhanakan tugas administrasi tipikal di Linux melalui antarmuka web yang nyaman</a></li>
<li><a href="../id471222/index.html">Memahami kebijakan privasi aplikasi dan layanan akan membantu jaringan saraf</a></li>
<li><a href="../id471226/index.html">Linux memiliki banyak wajah: cara bekerja pada distribusi apa pun</a></li>
<li><a href="../id471228/index.html">Grokay PyTorch</a></li>
<li><a href="../id471232/index.html">Pengalaman saya menghubungkan LPS331AP ke Omega Onion2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>