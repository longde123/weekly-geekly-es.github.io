<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💗 🤛🏻 💊 QGIS- und Kachelexport ㊗️ 🤘🏽 🎵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seit einigen Jahren beschäftige ich mich mit dem Zeichnen und Aktualisieren von Kammplänen zweier Bergregionen. Dzungarian Alatau und Central Tien Sha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>QGIS- und Kachelexport</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429426/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3r/xp/qo/3rxpqonbc9bpny5n0esihlfssb8.jpeg"></div><br>  Seit einigen Jahren beschäftige ich mich mit dem Zeichnen und Aktualisieren von Kammplänen zweier Bergregionen.  Dzungarian Alatau und Central Tien Shan. <br><br>  Anfangs habe ich alles im Ocad-Programm gezeichnet.  Dies ist ein spezielles Programm zum Zeichnen von Orientierungslaufkarten.  Das Projekt wurde in Dutzende Blätter unterteilt.  Dann wurden diese Blätter in Bilder exportiert, genäht und in Fliesen geschnitten.  Auf ftp hochgeladene Kacheln. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist ein Beispiel dafür, was in QGis passiert</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Und so war es in Ocad</a> <br><a name="habracut"></a><br>  Und dann traf ich eines Tages QGIS. <br><br>  Das Programm hat mich beeindruckt.  Netter Renderer.  Nicht so ausdrucksstark wie in OCAD, aber die Qualität passte zu mir.  Die Fähigkeit, direkt mit Geodaten zu arbeiten.  Die Fähigkeit, mit dem gesamten Projekt zu arbeiten, ohne es in Stücke zu zerbrechen. <br>  All dies führte zur Übertragung des gesamten Projekts an QGIS. <br><br>  Aber jetzt bereue ich es ein wenig. <br>  <b>Der QGIS-Renderer eignet sich nicht zum Generieren von Kacheln.</b> <br>  Natürlich gibt es zwei Plugins QTiles und QMetaTiles für QGIS 2. Ich habe sie für QGIS 3 angepasst. <br><br>  Ich werde Ihnen mehr über unverbesserliche Pfosten erzählen, die die Erzeugung von Kachelkarten in QGIS beeinträchtigen. <br>  Export erfolgt mit dem QTiles Plugin <br><br>  <b>Pfosten Nummer 1.</b>  <b>Wenn der Renderer berechnet, welche Objekte in seinen Geltungsbereich fallen (in QGIS wird dies als Zeichenfläche bezeichnet), berücksichtigt er nicht die Größe der Symbole der Objekte.</b> <br><br>  <b>Beispiel 1a</b>  <b>Punktfunktion</b> <br><br><img src="https://habrastorage.org/webt/eg/gk/nm/eggknmsu4gnitkztdps8rtfqdiw.jpeg" alt="Bild"><br><br>  Wie Sie sehen können, wurde das Scheitelpunktsymbol zugeschnitten.  Der Renderer hat es auf der unteren Kachel gerendert, aber nicht auf der oberen Kachel.  Weil die Mitte des Gipfels nicht innerhalb der Grenzen der Kachel lag. <br><br>  <b>Beispiel 1b</b>  <b>Linienfunktion</b> <br><br><img src="https://habrastorage.org/webt/9z/-k/b9/9z-kb90ujubf1xxqvrpn0dsde20.jpeg"><br><br>  Die dicke Linie verläuft nahe dem Rand der Fliese.  Sie fiel teilweise auf die untere Fliese.  Ich bin überhaupt nicht auf die oberste Kachel gekommen. <br><br>  Die Linie muss nicht entlang der Kachelgrenze verlaufen.  Möglicherweise gibt es noch ein solches Artefakt <br><br><img src="https://habrastorage.org/webt/c9/ju/mx/c9jumxyc_0h66y8ohjvhsm4jtn8.jpeg"><br><br>  <b>Pfosten Nummer 2.</b>  <b>Anordnung der Inschriften.</b> <br><br>  <b>Beispiel 2a</b>  <b>Kurze Inschrift auf einem linearen Objekt</b> <br><br><img src="https://habrastorage.org/webt/0z/51/cq/0z51cqyapbsggzsexvxulffzymu.jpeg"><br>  Der Renderer hat den Namen auf jeder Kachel abgeleitet. <br><br>  <b>Beispiel 2b</b>  <b>Lange Inschrift auf einem linearen Objekt</b> <br><br>  Z15 <img src="https://habrastorage.org/webt/ka/m7/gi/kam7gihdqmdbhifcerrls0fpulq.jpeg"><br><br>  Z16 <img src="https://habrastorage.org/webt/gd/2n/r_/gd2nr_-0_ktpnoermw0eykkd5dk.jpeg"><br><br>  Auf Z15 befindet sich eine Inschrift, da sie vollständig in die Ränder der Fliese passt. <br>  Auf Z16 befinden sich keine Inschriften mehr, da eine lange Inschrift nicht in die Ränder der Kachel passt. <br><br>  Stellen Sie sich vor, Sie möchten eine Weltkarte zeichnen und auf dem gesamten Kontinent „EURASIA“ in Großbuchstaben schreiben.  Nichts wird daraus werden.  Die Inschrift erscheint nur auf den Zooms, auf denen sie auf der gesamten Kachel platziert ist. <br><br>  <b>Beispiel 2c.</b>  <b>Beschriftungspunktfunktion</b> <br><br>  Ich habe die Option "Teilbeschriftungen anzeigen" aktiviert. <br><br>  Z16 <img src="https://habrastorage.org/webt/uj/lt/ru/ujltrutwyddzyef2qofd_utjdhw.jpeg"><br><br>  Z15 <img src="https://habrastorage.org/webt/e9/ra/hg/e9rahgmmi4wlx1vzen_k5my-tng.jpeg"><br><br>  Auf Z16 zeigt der Renderer nur den Teil der Inschrift an, der in die Kachel einbricht.  Beim Rendern einer benachbarten Kachel vergisst er das natürlich. <br><br>  Wenn die Option „Teilbeschriftungen anzeigen“ deaktiviert ist, gibt es auf Z16 überhaupt keine Beschriftung. <br><br>  Zur Bekämpfung dieser Probleme sind zwei Methoden erforderlich. <br><br>  1. Metatalisierung <br>  2. Pufferzonen <br><br>  <b>Metatailing.</b> <br>  Nicht jede Kachel wird einzeln gerendert, sondern eine Gruppe von mehreren Kacheln.  Sagen Sie 4x4 und schneiden Sie dann in kleinere Stücke. <br><br>  <b>Pufferzonen</b> <br>  Ein Bereich, der größer als eine Kachel oder eine Metatile ist, wird gerendert, und dann wird das gewünschte Stück daraus geschnitten. <br><br>  Beide Methoden korrigieren die obigen Pfosten nicht, sondern verschieben sie um mehrere Zoomstufen nach unten.  Dieselben Pfosten erscheinen bereits an den Rändern von Kacheln und an den Rändern von Metatilen oder Pufferzonen. <br><br>  <b>Beispiel 2d.</b>  <b>Punktfunktion</b> <br>  Ich mache das Export-Plugin QMetaTiles.  Die Größe der Metadatei beträgt 2x2.  Dies bedeutet, dass der Bereich in 2x2 Kacheln gerendert und dann in Stücke geschnitten wird. <br><br>  Z16 <img src="https://habrastorage.org/webt/-p/20/th/-p20thjawza5j1jee969dqgzqey.jpeg" alt="Bild"><br><br>  Wirklich.  Die Inschrift ist jetzt nicht zugeschnitten, da sie vollständig in den 2x2-Fliesenbereich passt.  Aber an der Grenze des Metatails wurde das Objekt selbst abgeschnitten.  Das gleiche gilt für ein lineares Objekt. <br>  Das Problem wurde um eine Zoomstufe nach unten verschoben. <br><br>  <b>Pfosten Nummer 3.</b>  <b>Inschriften herunterladen</b> <br>  <b>Beispiel 3a</b> <br>  Jedes Mal wählt der Aligner die vorteilhafteste Position für die nächste Inschrift.  Darüber hinaus hängt die Position der Etiketten von der Position der Leinwand ab.  Bewegen Sie es ein paar Millimeter, und alle Inschriften befinden sich völlig anders. <br><br>  Dies bedeutet, dass sich beim Rendern einer Metadatei und der Pufferzone um sie herum die Beschriftung an einer Stelle befinden kann und beim Rendern einer benachbarten Metadatei an einer völlig anderen Stelle. <br><br>  Ich exportiere ein Stück Karte in Kacheln.  Die Inschriften nehmen eine Bestellung auf. <br><br>  Dann verschiebe ich die Leinwand ein wenig und exportiere erneut.  Die Inschriften sind bereits in einer völlig anderen Reihenfolge.  In diesem Fall erscheinen solche Artefakte. <br><br><img src="https://habrastorage.org/webt/ei/ym/fd/eiymfdaaw2bddxxxb9ct--vwhds.jpeg"><br><br>  <b>Was tun mit all dem?</b> <br><br>  Metatailing- und Pufferbereiche lösen die oben genannten Probleme nicht, sondern verschieben sie in niedrigere Zoomstufen. <br><br>  1. Wenn der Renderer berechnet, welche Objekte er zeichnen soll, sollte er nicht nur die Geodaten der Objekte berücksichtigen, sondern auch deren Symbolik. <br><br>  Beispielsweise muss der Renderer für alle Objekte die BBOX speichern, die das Objekt nach dem einzelnen Rendering übernimmt.  Beim Rendern einer Szene müssen Sie den Schnittpunkt der Leinwand mit einzelnen BBOXs gerenderter Objekte berücksichtigen. <br><br>  Gleichzeitig ist es wünschenswert, dass die BBOX auch Inschriften enthält, die an das Objekt angehängt sind. <br><br>  2. Die Position der Etiketten sollte nicht von der Position der Leinwand abhängen.  Beim teilweisen Export werden dann Etikettenfragmente gut zusammengefügt.  Metatilierungs- und Pufferzonen sind nicht erforderlich. <br><br>  Leider ist der Export von Kacheln aus QGIs im Moment einfach schrecklich, und wann es repariert wird, ist nicht klar. <br><br>  Vielleicht ist hier jemand an der Entwicklung von QGis beteiligt? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429426/">https://habr.com/ru/post/de429426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar486158/index.html">تصور الترجمة الآلية العصبية (نماذج seq2seq مع آلية الاهتمام)</a></li>
<li><a href="../ar486164/index.html">فيروس كورونا 2019-nCoV. أسئلة وأجوبة عن حماية الجهاز التنفسي والتطهير</a></li>
<li><a href="../ar486174/index.html">لدي صفر دوران</a></li>
<li><a href="../de429422/index.html">UHCI oder der allererste USB</a></li>
<li><a href="../de429424/index.html">Robotaxi von Daimler und Bosch wird in Kalifornien auftreten</a></li>
<li><a href="../de429448/index.html">Wir schreiben den FPGA-Loader in LabVIEW. Teil 2</a></li>
<li><a href="../de429450/index.html">Verallgemeinerte Programmiertechniken in Rust: Wie wir Exonum von Iron nach Actix-Web übersetzt haben</a></li>
<li><a href="../de429452/index.html">Das Pentagon begann, die Malware anderer Leute zu deklassieren</a></li>
<li><a href="../de429456/index.html">Schon eine Geschichte: Wo begann die Startup-Kultur in den 1930er Jahren?</a></li>
<li><a href="../de429458/index.html">Wie ich Animationen des Sonnensystems für einen Zweitklässlersohn gemacht habe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>