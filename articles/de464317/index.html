<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♣️ 👨🏼‍🤝‍👨🏻 😽 Konbanwa-Projekt 🦂 👨🏽‍💼 🙏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KONBANWA („Guten Abend“ - こ ん ば ん は). 

 Dies ist ein LED-Streifen, der oben am Fenster angebracht ist und zur Verlängerung der Tageslichtstunden verw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Konbanwa-Projekt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464317/"> KONBANWA („Guten Abend“ - こ ん ば ん は). <br><br>  Dies ist ein LED-Streifen, der oben am Fenster angebracht ist und zur Verlängerung der Tageslichtstunden verwendet wird.  Da die Tageslichtquelle und zusätzliche Quelle ihre Position nicht ändert, wird eine komfortable Beleuchtung im Raum erzielt.  Darüber hinaus können Sie mit Straßenbeleuchtungsvorhängen nicht sehen, was im Raum passiert. <br><a name="habracut"></a><br>  Das Konbanwa-Projekt berücksichtigt die astronomische Dämmerung, indem es den Breiten- und Längengrad des Geräts überträgt.  Durch Verschieben des Breitengrads nach Süden oder Norden können Sie die Zeit und Dauer der Morgendämmerung / des Sonnenuntergangs steuern. <br><br>  Für jede astronomische Dämmerung können Sie die Farbe und Helligkeit der Beleuchtung einstellen. <br>  Von Sonnenuntergang bis zivilem Sonnenuntergang die hellste Arbeitsperiode.  Zu diesem Zeitpunkt schläft die Person normalerweise nicht.  Sie können eine Farbe wählen, die der untergehenden Sonne nahe kommt (Rottöne), und die Helligkeit ist so angenehm wie möglich.  Es ist sehr ungewöhnlich, wenn es Matsch, Regen auf der Straße und die Strahlen der untergehenden Sonne an den Wänden gibt.  Nachts ist der Nachtmodus aktiviert.  Zu diesem Zeitpunkt ist die Helligkeit minimal, es ist besser, Blau- oder Grüntöne zu wählen.  Im Morgengrauen orange-gelbe Farbtöne mit minimaler Helligkeit.  Nachmittags frei. <br><br>  All dies funktioniert im automatischen Modus. Passen Sie Helligkeit und Farbe nur einmal an.  Die einzige Bedingung ist, dass WiFi funktioniert.  Als „Gehirn“ wurde Node-Red angewendet, das auf dem Raspberry PI im lokalen Netzwerk oder auf externen Servern installiert werden kann.  Die mqtt-Brokermücke wird für den Datentransport verwendet.  Geolokalisierung wird nicht automatisch erkannt.  Diese Funktion wird dem knotenroten Server zugewiesen, wo sie manuell registriert wird. <br><br><div class="spoiler">  <b class="spoiler_title">knotenrot</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mn/wc/el/mnwcel-_401fam6lnwk4oto4lny.png" alt="Bild"><br></div></div><br>  Geltungsbereich: Von den nördlichen Gebieten, in denen es im frühen Winter dunkel wird, zu den südlichen Gebieten, in denen die Dunkelheit fast unmittelbar nach Sonnenuntergang eintritt.  Die Hauptanwendung ist die Fensterinstallation.  Es kann auch an der Vordertür angebracht werden, um den Eingang automatisch zu beleuchten und nicht im Dunkeln nach dem Schlüsselloch zu suchen. <br><br>  Ein bisschen Geschichte: <br>  2018 wurde der erste Prototyp zusammengebaut, der sich als funktionsfähig herausstellte.  Es wurde auf Basis von esp01 und Adress-LEDs ws2812b zusammengebaut.  Schutzart IP30.  Das Licht ging rechtzeitig an und der Einschluss musste ständig korrigiert werden.  Das Gerät ist im Kinderzimmer installiert und wird weiterhin als Nachtlicht verwendet. <br><br>  Der zweite Prototyp auf esp01 wurde für die Vordertür montiert, aber die Schutzart IP30 erlaubte keine Arbeiten auf der Straße und nach dem Winter wurden die LEDs unbrauchbar. <br><br>  Anfang 2019 fand ein Umdenken statt und das Projekt erhielt eine Fortsetzung von Konbanwa 2.0, das die astronomische Dämmerung berücksichtigte.  Außerdem wird die Helligkeit der Morgendämmerung fast auf den Nachtlichtmodus reduziert. <br><br>  Konbanwa 3.0 wird auf esp12e mit einem optionalen DHT22-Temperatur- und Feuchtigkeitssensor und einem LED-Streifen von 60 LEDs pro Meter montiert.  Zu diesem Zeitpunkt wurde klar, dass die Bänder stark vom Hersteller abhängig sind.  Und sie haben unterschiedliche Farbwiedergabe. <br><br>  Konbanwa 4.0 wurde im Hochsommer 2019 fortgesetzt.  Der DHT22 wurde durch einen BME280-Sensor für Temperatur, Luftfeuchtigkeit und Luftdruck ersetzt.  2 Kanäle für LED-Streifen angeschlossen.  Zusätzlich sind zwei Relais mit optischer Isolation angeschlossen, die von einem Ein-Schlüssel-Schalter ohne Verriegelung gesteuert werden.  Die Firmware wurde neu geschrieben, die Leiterplatte wurde geschieden und die Herstellung von Leiterplatten wurde auf JLCPCB bestellt.  Das esp12e-Modul wurde durch NodeMCU v3 ersetzt. <br><br><div class="spoiler">  <b class="spoiler_title">Schaltung und Leiterplatte</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/jt/ff/zd/jtffzdne1hyxaywqdbjppatsen4.png" alt="Bild"><br><img src="https://habrastorage.org/webt/vv/jt/71/vvjt71rpxuxixp0_wbpcr-epj9o.png" alt="Bild"><br></div></div><br>  All diese Änderungen in der Zukunft machen es einfach, das Gerät an der Decke unter einer abgehängten oder abgehängten Decke oder in einem Kronleuchter zu montieren.  Im Inneren des Kronleuchters ist ein 5-Volt-Netzteil montiert, das ständig über einen Kanal des Schalters mit Strom versorgt wird.  Mit einem Ein-Schlüssel-Schalter können zwei Kanäle des Kronleuchters gesteuert werden.  LED-Streifen sind durch sechs dünne Drähte (Kabel) verbunden, die leicht an die Decke geklebt oder von der Decke entfernt werden können.  Eine Schleife von drei Drähten pro Kanal.  +5 Volt, -5 Volt und Daten.  LED-Streifen am Fenster montiert.  Maximal zwei in der Anzahl der Kanäle.  Die Logik des Leistungsschalters ist einfach.  Klicken Sie auf - 1. Kanal, klicken Sie auf - 2. Kanal, klicken Sie auf - beide Kanäle.  Wenn zwischen den Klicks 10 Sekunden vergangen sind, werden die internen Relais unabhängig von der gewählten Betriebsart abgeschaltet.  Zwischen den Klicks sollten mindestens 500 Millisekunden und nicht mehr als eine Sekunde liegen.  Alle Arbeiten werden vom mqtt-Broker gesteuert.  Daten, Temperatur, Luftfeuchtigkeit, Luftdruck, welche Farbe auf den LEDs leuchtet und welcher Kanal den Kronleuchter einschaltet.  All dies kann ferngesteuert oder abgelesen werden.  Mit Bme280 können Sie durch Senden von Daten an den Broker das Klima des Systems weiter steuern. <br><br><div class="spoiler">  <b class="spoiler_title">Foto Hintergrundbeleuchtung</b> <div class="spoiler_text">  Tag. <br><br><img src="https://habrastorage.org/webt/7x/tl/mo/7xtlmothd7yhawwj8rr16lyjidi.jpeg" alt="Bild"><br><br>  Sonnenuntergang <br><br><img src="https://habrastorage.org/webt/ax/si/bc/axsibclpfsvbhtjqcqf-bmxcqr0.jpeg" alt="Bild"><br><br>  Ziviles Zwielicht <br><br><img src="https://habrastorage.org/webt/i6/am/td/i6amtdwfgkecgr_lljonwvighs8.jpeg" alt="Bild"><br><br>  Nautische Dämmerung <br><br><img src="https://habrastorage.org/webt/hi/id/r_/hiidr_ujug6e6t2e7hfzlsodgio.jpeg" alt="Bild"><br><br></div></div><br>  Der Quellcode enthält nichts Interessantes.  Standardabonnements und Veröffentlichungen in mqtt-Themen. <br>  Das Projekt ist von zu Hause aus, daher beschäftige ich mich damit, wenn Interesse daran besteht. <br><br><div class="spoiler">  <b class="spoiler_title">Quellen.</b>  <b class="spoiler_title">Nicht zum Anzeigen empfohlen.</b>  <b class="spoiler_title">Pass auf deine Nerven auf.</b> <div class="spoiler_text">  Eine frühe Version des Quellcodes für vscode (PlatfornIO) kann auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github angezeigt werden</a> <br>  Ein Diagramm des ersten Geräts auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">easyeda</a> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464317/">https://habr.com/ru/post/de464317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464303/index.html">Zeitreihendaten in einem relationalen DBMS. Erweiterungen TimescaleDB und PipelineDB für PostgreSQL</a></li>
<li><a href="../de464305/index.html">Klein, ja. Unboxing des Firecracker mikrovirtuell</a></li>
<li><a href="../de464307/index.html">Integrationstests von Microservices auf Scala</a></li>
<li><a href="../de464309/index.html">DIY Ruftaste. Raspberry Pi, MajorDoMo, Freeswitch und Linphonec</a></li>
<li><a href="../de464315/index.html">Der Film, in dem es Erde gab. Yandex-Forschung und eine kurze Geschichte der Suche nach Bedeutung</a></li>
<li><a href="../de464325/index.html">Wie Scrumban das Beste aus Kanban- und Scrum-Methoden vereint</a></li>
<li><a href="../de464327/index.html">Vergleich der Speichernutzung verschiedener Toolkit-GUIs</a></li>
<li><a href="../de464331/index.html">Nutzlose Vorteile: Synthese von UV-absorbierenden Chemikalien aus Cashewnüssen</a></li>
<li><a href="../de464333/index.html">Verfolgung des Lebenszyklus von Benutzern ohne Zange und Isolierband</a></li>
<li><a href="../de464335/index.html">Unit-Tests in DBMS - wie wir es in Sportmaster machen, Teil eins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>