<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏾 🖋️ 😉 我们如何在SmartMailHack 2中获胜 🔅 🚪 🍂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="上周末（7月14日至15日），又在Mail.Ru集团办公室举行了SmartMailHack黑客马拉松。 我们被要求“提出一项功能，使您可以从邮件中访问数据并更有效地与它们进行交互。” 
 数据描述，想法和解决方案 


 我们有一个包含超过1500条消息的测试框，并且可以通过API对其进行完全访问。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们如何在SmartMailHack 2中获胜</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/417531/"><p> 上周末（7月14日至15日），又在Mail.Ru集团办公室举行了SmartMailHack黑客马拉松。 我们被要求“提出一项功能，使您可以从邮件中访问数据并更有效地与它们进行交互。” </p><a name="habracut"></a><br><h2> 数据描述，想法和解决方案 </h2><br><p> 我们有一个包含超过1500条消息的测试框，并且可以通过API对其进行完全访问。 组织者提供了有关其使用的大型详细手册（共547页）。 借助令牌和简单的JSON请求，我们可以接收有关邮件的所有必要信息：字母，发件人姓名，各种特征。 </p><br><p> 讨论过我们每个人在邮件中的邮件列表中大约有数千封未读的信件之后，我们决定解决此问题。 在我们的情况下，该信件的相关性不再由它出现在邮箱中的时间确定。 并且基于并非所有字母都会被打开的事实，那么最好仅向用户显示他可能会打开的字母。 其他所有内容都可以删除。 因此，我们决定对邮件进行排序。 </p><br><p>应该对分类字母进行分类，并将分类放在磁贴内部（嗨，Trello）。 磁贴的上排结合了来自不同发件人的字母的含义。 可以有大约10个类别的“ Trips”，“ Registration”，“与Vasya对应”，“ Events”，“ Finance”等。 第二排是公司报价最低的瓷砖。 我们搜索了最相关的促销代码，最优惠的促销，最有价值的报价，并在此处按公司分组显示了它们。 然后是寄件公司分发的所有其他信件，这些寄件人又被分为几类（“食品”，“化妆品”，“电子产品”等）。 此外，类别也按字母的相关性进行排名，并且内部仅显示超过特定阈值的字母。 用“找到需要的东西并摆脱多余的东西”的字眼强化了这个想法之后，我们进入了ML。 </p><br><h2> 机器学习 </h2><br><p> 我们决定构建三个模型： </p><br><ul><li> 我们已将所有用户指定为30多个类别的分类器； </li><li> 根据用户喜好聚类并突出显示新类别； </li><li> 从最相关到​​最不相关对类别中的字母进行排名。 </li></ul><br><img src="https://habrastorage.org/webt/z1/lp/4c/z1lp4ctrc2qjtboon88dpqpe2iw.png"><br><h2> 迹象 </h2><br><p> 似乎应该针对每个任务单独描述该项目。 但是，我们生成了一个通用要素数据集，并在其上训练了所有模型。 没有时间进行仔细选择。 </p><br><p> 使用API​​卸载了一堆二进制符号。 但是，它们大多数是在文本上生成的： </p><br><ul><li>  tf-idf收集文件； </li><li> 通过Word2Vec收到的嵌入； </li><li> 行为症状，例如： <br>  -在最后一个窗口（1、2、5周前）中读取的消息数； <br>  -来自此的消息数。 </li></ul><br><h2> 分类任务 </h2><br><p> 我们用手划出了1000个字母进行培训。 事实证明，这项工作并不像乍看起来那样缓慢而乏味。 如果使用地址和标题，则可以大大加快工作速度。 例如，拉莫达几乎总是将信件发送到“服装”类别。 </p><br><p> 接下来，我们对整个符号集进行LightGBM训练，并获得0.913精度和0.892 f1量度的质量，我们认为这是在基线水平上非常好的结果。 这表明字母可以很好地分类。 </p><br><h2> 排名任务 </h2><br><p> 作为目标变量，我们使用了二进制标志0/1-用户是否读取了消息。 根据模型预测的概率对他们进行进一步排名，因为这恰恰反映了模型对人是否会阅读消息的信心。 </p><br><p> 在这里，我们还对LightGBM的全部功能进行了培训，并获得了约0.816 auc-roc的质量。 </p><br><h2> 聚类并突出显示新类别 </h2><br><p> 除了主要类别外，我们还有“其他”类别。 从中可以突出显示新主题。 </p><br><p> 我们用来自该小组的信件训练了标准的DBSCAN，然后选择了其中包含大量消息的集群（阈值可以优化，但是偶然固定）。 例如，可以在群集文档的集合上设置主题建模，获取给定群集最相关的主题，然后在单独的组中进行选择。 没有足够的时间来验证该算法。 </p><br><p> 因此，如果传入的字母属于“其他”类别，它们将通过分类器传递-它们被聚集在一起，新的主题正试图脱颖而出，然后进行排名。 发送一个后端请求，该请求汇总所有内容，并呈现前端。 </p><br><img src="https://habrastorage.org/webt/hh/im/e2/hhime2drbnnlgca1jorvldzfvou.png"><br><hr><br><p>  <strong>剩余的想法</strong> </p><br><ul><li> 改善机器学习模型； </li><li> 从更多用户那里收集数据以更好地预测每个用户的行为； </li><li> 彻底验证新出现的类别； </li><li> 使用图片作为标志，例如来自预训练神经网络的嵌入分配。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417531/">https://habr.com/ru/post/zh-CN417531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417515/index.html">我在5年内创造了100款游戏所学到的东西</a></li>
<li><a href="../zh-CN417517/index.html">英特尔历史页面。 照片纪事和测验</a></li>
<li><a href="../zh-CN417521/index.html">查看SSL证书以作废</a></li>
<li><a href="../zh-CN417527/index.html">我们开发Shrimp：我们控制并行请求，我们通过spdlog登录等等。</a></li>
<li><a href="../zh-CN417529/index.html">改变贸易和消费者的三种技术趋势</a></li>
<li><a href="../zh-CN417533/index.html">Windows上的记事本收到了二十年来的首次重大更新</a></li>
<li><a href="../zh-CN417535/index.html">CUBA的开发离Spring迈出了一大步吗？</a></li>
<li><a href="../zh-CN417537/index.html">“您的游戏很无聊”，或者如何提高第一天已经很高的保留率</a></li>
<li><a href="../zh-CN417539/index.html">谷歌因违反欧洲反托拉斯法被罚款50亿美元</a></li>
<li><a href="../zh-CN417541/index.html">与美国国家航空航天局（NASA）飞行控制中心数字化的阿波罗飞行任务记录</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>