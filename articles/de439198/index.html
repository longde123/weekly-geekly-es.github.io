<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖ üç¶ üëÅÔ∏è Barrier Island Generation üêª ‚Ü™Ô∏è üêì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Dezember-Nachrichten √ºber den Hurrikan Florenz bezogen sich oft auf externe Schw√§rme - eine Reihe von Barriereinseln vor der K√ºste von North Carol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Barrier Island Generation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439198/">  Die Dezember-Nachrichten √ºber den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hurrikan Florenz bezogen sich</a> oft auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">externe Schw√§rme</a> - eine Reihe von Barriereinseln vor der K√ºste von North Carolina: <br><br><div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/getpro/habr/post_images/a00/e8c/eef/a00e8ceef5bfbae53ac9a95a42a7cf5e.png"></div><br>  Barriereinseln sind flache oder blockige Sandflecken, die von Wellen gebildet werden und parallel zur K√ºste des Festlandes surfen.  Sie haben oft die Form langer Ketten, die sich √ºber mehrere zehn Kilometer erstrecken k√∂nnen.  Die Barriereinseln sind normalerweise durch kleine Gezeitenkan√§le getrennt und k√∂nnen Lagunen zwischen den Inseln und dem Festland bilden. <br><br>  Laut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> k√∂nnen Barriereinseln bis zu 15% der K√ºste bedecken, sodass Sie erwarten k√∂nnen, sie auf den meisten Fantasy-Karten zu sehen, aber tats√§chlich sind sie ziemlich selten.  Und aufgrund der Art des Rauschens treten sie fast nie auf prozedural generierten Karten auf, die Rauschen verwenden, um Gel√§nde zu erstellen. <br><br>  Um zu verstehen, warum dies so ist, werfen wir einen Blick auf die Vanillekarte der Insel: <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb8/342/f10/cb8342f1095276e3e7ced43ed57bf688.png"></div><br>  Tats√§chlich handelt es sich um einen Kreis, der durch eine geringe Menge an niederfrequentem Rauschen verzerrt ist, um eine Kreisform zu teilen.  Versuchen wir nun, mit L√§rm die K√ºste zu durchbrechen und K√ºsteninseln zu bilden.  Hier ist dieselbe Insel mit dem Zusatz von niederfrequentem Rauschen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e18/658/5b7/e186585b7a15a9287ad56bc13ac61f6d.png"></div><br>  Es hat Buchten und Umh√§nge.  Die Reliefelemente sind ziemlich gro√ü, weil ich niederfrequentes Rauschen verwendet habe, das sich langsam √§ndert.  Der L√§rm ist jedoch nicht stark genug, um Inseln zu erzeugen.  Lassen Sie es uns ein bisschen schieben: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9a/e78/c4a/f9ae78c4a84f5e99b2f58821ccade3b0.png"></div><br>  Jetzt haben wir mehrere Inseln geschaffen, aber es handelt sich im Wesentlichen um kreisf√∂rmige Flecken, die sich nicht unbedingt entlang der K√ºste erstrecken.  Sie k√∂nnen hochfrequentes Rauschen hinzuf√ºgen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/89f/834/cab89f83445965bbad12d0f95bba1d94.png"></div><br>  Dies kann uns sehr zerbrochene K√ºsten und kleine Inseln entlang der K√ºste geben, aber nichts, was einer Barriereinsel √§hnelt. <br><br>  Der einzige Grund daf√ºr ist, dass das Rauschen in x und y nicht √ºbereinstimmt. Obwohl das Rauschen im Allgemeinen nicht zuf√§llig ist, sind die Formen, die es erzeugt, zuf√§llig: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2e/4b4/ef6/d2e4b4ef6005d2675d2557f71eb0ce7b.png"></div><br>  F√ºr einige Dinge ist dies gut, aber es ist nicht geeignet, eine bestimmte Form zu erstellen, zum Beispiel Inseln entlang der K√ºste. <br><br>  Wie in anderen F√§llen war es beim Generieren einer bestimmten Form oder eines bestimmten Bereichs erforderlich, eine Maske mit der erforderlichen Form zu erstellen und dann das Rauschen in der Maske zu verwenden.  (Sie k√∂nnen auch Rauschen verwenden, um die Maske zu verzerren und ihr eine nat√ºrlichere Form zu geben.) Barriereinseln sind in der Tat lange, d√ºnne Bereiche, die von der K√ºste versetzt sind.  Erstellen wir also eine Maske dieser Form. <br><br>  Zun√§chst legen wir den Teil der K√ºste fest, an dem sich die Barriereinsel befindet.  Dies kann durch Auswahl eines zuf√§lligen Punkts an der K√ºste und eines zweiten unteren Punkts erfolgen, die in der Abbildung mit einer roten Linie in der oberen rechten Ecke markiert sind: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/e88/a41/b45e88a410c47b6832350b02b3215525.png"></div><br>  Um eine Barriereinsel zu erstellen, kann ich einfach eine gerade Linie zwischen diesen beiden Punkten nehmen und sie ein wenig nach au√üen ins Wasser projizieren.  Dies gibt mir eine sehr gerade und unnat√ºrlich aussehende Insel, aber Sie k√∂nnen ihre Form verzerren, um sie zu verbergen.  Das eigentliche Problem ist, dass die Insel nicht der K√ºste folgt.  Es wird wahrscheinlich f√ºr die meisten direkten Abschnitte der K√ºste normal aussehen, aber es wird an gewundenen K√ºsten seltsam erscheinen.  Es ist besser, die K√ºste nachzubilden und sie zur Grundlage f√ºr die Form der Insel zu machen. <br><br>  Dazu muss ich eine Kopie der K√ºste erstellen und sie dann senkrecht zur K√ºste in den Ozean projizieren.  Ich habe bereits ein Verfahren zum Berechnen von Senkrechten (Normalen) zu unterbrochenen Linien, da ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">handgeschriebene Linien</a> realisiert habe und meine K√ºsten immer in die gleiche Richtung verlaufen. Es ist also ziemlich einfach: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/9f1/b1e/0b39f1b1e868bb43d98839614109a3f5.png"></div><br>  Oder <i>es scheint</i> einfach.  Mal sehen, was passiert, wenn ich die K√ºste etwas weiter nach au√üen projiziere (um die andere Seite der Inselmaske zu erstellen) auf den weniger glatten Teil der K√ºste: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/99f/5b8/a3e99f5b8bed9f6a0ffd74f5ae7e864a.png"></div><br>  Zwei Segmente der projizierten Linie schneiden sich und erzeugen eine erschreckende ‚ÄûAcht‚Äú auf dem Polygon.  Dies ist das sogenannte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Parallelkurvenproblem</a> .  Wir k√∂nnen die K√ºste nicht nur in eine gewisse Entfernung verschieben, sondern m√ºssen auch die Probleme l√∂sen, die sich aus den scharfen Innen- und Au√üenecken ergeben. <br><br>  Ich suchte nach Javascript-Code, um dieses Problem zu l√∂sen, aber das einzige gefundene Beispiel ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von hier</a> ) war ein erstaunlicher Absturz, selbst bei relativ einfachen Beispielen.  Also habe ich meine eigenen geschrieben.  Im Allgemeinen besteht die L√∂sung darin, jeden Punkt entlang der Normalen zu verschieben, dann aber zu pr√ºfen, ob der neue Punkt eine Linie erstellt, die eine der vorhandenen Linien schneidet.  Wenn ja, dann schneiden wir die Schleife ab und f√ºgen eine neue Linie ein, die aus dem Schnittpunkt und dem neuen Punkt besteht.  In den von mir getesteten Testf√§llen funktionierte dieses System recht gut f√ºr meine Anforderungen. <br><br>  Jetzt kann ich einfache Masken (keine Schleifen) f√ºr die Inseln erstellen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/599/060/e89/599060e8909fb0d5dda3f01b7ca82806.png"></div><br>  Das ist zu gleichm√§√üig, also werde ich die Konturen verzerren: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b00/420/8a9/b004208a92018017e000669848f991ad.png"></div><br>  Die Konturen k√∂nnen an einigen Stellen die K√ºste ber√ºhren, dies ist jedoch normal und wird h√§ufig auf Barriereinseln gefunden. <br><br>  Der n√§chste Schritt besteht darin, die Kontur mit Land zu f√ºllen. Bevor ich dies tue, m√∂chte ich die Inseln verl√§ngern und die Logik hinzuf√ºgen, sich kreuzende Inseln zu vermeiden, wenn mehrere Barriereinseln an derselben K√ºste erstellt werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cee/654/659/cee6546597a3c9a4552344298e07e2ca.png"></div><br>  Versuchen wir nun, etwas Land hinzuzuf√ºgen.  Um dies zu tun, werde ich die H√∂he eines beliebigen Landstandorts (bei dem es sich um Delaunay-Dreiecke handelt) √ºber den Meeresspiegel erh√∂hen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf7/206/5d4/bf72065d44a8acc8247d2a1895c5db72.png"></div><br>  Es gibt einige bemerkenswerte Aspekte.  Erstens gibt es in der oberen linken Ecke eine ziemlich erfolgreiche Barriereinsel.  Die Insel scheint die Deponie jedoch nicht gut zu f√ºllen.  Viele Landdreiecke sind aufgrund des Vorhandenseins ihrer Zentren innerhalb des Polygons eingeschaltet.  Dies f√ºgt der Form der Insel Zuf√§lligkeit hinzu.  Zweitens kann man feststellen, dass die beiden anderen Inseln so nah an der K√ºste lagen, dass sie einfach mit ihr verschmolzen.  Da ich hier Inseln erstellen m√∂chte, muss dies nicht zu oft vorkommen. Daher werde ich die Generation so einrichten, dass ein gr√∂√üerer Wasserspalt zwischen der K√ºste und der Insel entsteht.  (Sp√§ter werde ich einen Scheck hinzuf√ºgen, um dies zu verhindern.) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/150/ba5/6ca150ba54c211d1da8fdf4470401a02.png"></div><br>  Eines der sch√∂nen Dinge an den unregelm√§√üigen Dreiecken des Landes ist, dass sie auf nat√ºrliche Weise Gezeitenkan√§le bilden, die typisch f√ºr Barriereinseln sind.  Das Schlechte an ihnen ist, dass sie normalerweise Fleckeninseln bilden, die wie verzerrte Perlen an einer Schnur aussehen.  Sie sind Barriereinseln nicht sehr √§hnlich, und wenn Sie viele einzelne Dreiecke nehmen, sehen sie sehr unnat√ºrlich aus. <br><br>  Wenn ich die Breite der Inseln vergr√∂√üere, verschwinden beide Effekte und ich bekomme mehr nat√ºrliche Inseln, aber ohne Gezeitenkan√§le: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/153/005/e17/153005e17c9d6bf4e464e2e27b77c1c7.png"></div><br>  Aber ich w√ºrde gerne lernen, wie man sehr schmale Inseln erzeugt.  Ein anderer Ansatz besteht darin, die Anzahl der Standorte auf der Welt (signifikant) zu erh√∂hen, um die Aufl√∂sung zu erh√∂hen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/57c/f04/3b657cf0414f8bcc8cc21da0921d25e6.png"></div><br>  So k√∂nnen wir beeindruckend d√ºnne und detaillierte Inseln erhalten, aber dies erh√∂ht die Zeit und den Speicher, die zum Erstellen einer Karte erforderlich sind, erheblich. <br><br>  Bei beiden Methoden besteht eine gute Chance, dass einige Teile der Insel sehr uneben sind: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/32a/edd/a7532aedd16eeeba152ab0ee2e213f4b.png"></div><br>  Dies geschieht, weil der Pfad die beiden Seiten (und manchmal alle drei Seiten) der zugrunde liegenden Delaunay-Dreiecke schneidet.  Dies ist ein inh√§rentes Problem bei der Verwendung der Delaunay-Triangulation bei der Kartengenerierung, aber aus irgendeinem Grund wird es selten diskutiert!  Dies passiert in meinem Spiel an den K√ºsten nicht sehr oft, da ich absichtlich eine Gl√§ttungsstufe hinzugef√ºgt habe, um die Anzahl solcher F√§lle zu verringern, aber diese Stufe hat die Tendenz, schmale Inseln zu zerst√∂ren.  Eine m√∂gliche L√∂sung besteht darin, etwas breitere Inseln zu erstellen und Anti-Aliasing zu verwenden. Bei korrekter Einrichtung k√∂nnen Sie d√ºnnere Inseln ohne viele Dreiecksartefakte erhalten: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52d/558/3f3/52d5583f3b04c85ddd7f504c3679cc01.png"></div><br>  Bei diesem Ansatz gibt es jedoch immer noch Einschr√§nkungen, wie eng die Inseln sein k√∂nnen.  Dar√ºber hinaus bedeutet dies, dass wir niemals wirklich fraktale K√ºsten bekommen werden. <br><br>  Manchmal f√ºhrt der Gl√§ttungsalgorithmus dazu, dass die lange Barriereinsel in mehrere kleine aufgeteilt wird (wie in der unteren linken Ecke des obigen Bildes), aber es w√§re praktisch, eine Option zu haben, mit der Sie dies zwangsweise tun k√∂nnen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/e5f/489/863e5f4893bdb0069219c761308b2ff7.png"></div><br>  Das einzige, was noch √ºbrig ist, ist, den Inselnamen zu geben und sie zu kartieren.  Der einzige subtile Aspekt hier ist, dass ich nicht allen Inseln in der Kette der Barriereinseln Namen geben m√∂chte.  In realen Ketten von Barriereinseln haben einzelne Inseln oft Namen, was zu Chaos auf der Karte f√ºhrt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/8b4/b27/e158b4b272c4b55b1d3b128e5e1b9d4c.png"></div><br>  Daher ber√ºcksichtige ich beim Erstellen einer Barriereinsel den gesamten Bogen und f√ºge ihm einen Namen hinzu, auch wenn die Generation den Bogen dadurch in mehrere Inseln aufteilt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fd/797/070/6fd797070e48a48856b4862892ff3b66.png"></div><br>  Normalerweise werden Barriereinseln als "Banks" oder "Shafts" (Bars) bezeichnet, daher werden diese W√∂rter in Variantennamen gefunden. <br><br>  Dieses Beispiel zeigt ein potenzielles Problem mit Barriereinseln: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/028/cee/b56/028ceeb56ebe1c5c83ea7e56f02c3a2f.png"></div><br>  Hier wurde die Barriereinsel innerhalb der Bucht angelegt.  Dies ist unlogisch (f√ºhrt au√üerdem zur √úberschneidung von Namen).  Um dies zu vermeiden, kann ich meine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Buchtenerkennungslogik verwenden</a> und diese Abschnitte der K√ºste √ºberspringen.  Es gibt wahrscheinlich keinen Schutz vor dem Narren in dieser Methode, aber es funktioniert gut f√ºr diese Karte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/086/180/a33/086180a3377f856a818fd9097925a998.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439198/">https://habr.com/ru/post/de439198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439186/index.html">UX Editor: wahre Geschichte, riales Leben</a></li>
<li><a href="../de439190/index.html">So erstellen Sie eine Augmented Reality-Anwendung mit ARCore</a></li>
<li><a href="../de439192/index.html">PC-Lautsprecher bis elf</a></li>
<li><a href="../de439194/index.html">Charakterverwaltung mit SharedEvents</a></li>
<li><a href="../de439196/index.html">JPMorgan-Analysten: Apple sollte Blizzard, Netflix oder Sonos kaufen, um die Anleger zu beruhigen</a></li>
<li><a href="../de439200/index.html">Komponist f√ºr die Kleinen</a></li>
<li><a href="../de439202/index.html">Web Attack Detection mit Seq2Seq Auto Encoder</a></li>
<li><a href="../de439204/index.html">Verbesserung der Effizienz der Photosynthese durch genetische Ver√§nderung von Pflanzen</a></li>
<li><a href="../de439206/index.html">Wie haben wir das Problem der Fortsetzung der Wiedergabelisten bei RecSys Challenge gel√∂st und den 3. Platz belegt?</a></li>
<li><a href="../de439208/index.html">Oh, mein Code: Wie MAPS.ME funktioniert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>