<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ฝโ๐จ ๐ ๐ง๐ป ุงููุชุฒุงูู / ุชูุชุธุฑ ูู C #: ููููู ุ ูุงูุชุตููู ุงูุฏุงุฎูู ุ ูุงูุญูู ูููุฏุฉ ๐ฅ๏ธ ๐ฆ โฌ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููู ุฌูุฏ. ูุฐู ุงููุฑุฉ ุ ุฏุนูุง ูุชุญุฏุซ ุนู ููุถูุน ุจุฏุฃ ูู ุฃุชุจุงุน ูุญุชุฑููู ุฃููุณูู ููุบุฉ C # ูู ูููู - ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุงุณุชุฎุฏุงู Task ุฃู ุ ูู ุญุงูุฉ ุนุงูุฉ ุงููุงุณ ุ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงููุชุฒุงูู / ุชูุชุธุฑ ูู C #: ููููู ุ ูุงูุชุตููู ุงูุฏุงุฎูู ุ ูุงูุญูู ูููุฏุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470830/" style=";text-align:right;direction:rtl">  ููู ุฌูุฏ.  ูุฐู ุงููุฑุฉ ุ ุฏุนูุง ูุชุญุฏุซ ุนู ููุถูุน ุจุฏุฃ ูู ุฃุชุจุงุน ูุญุชุฑููู ุฃููุณูู ููุบุฉ C # ูู ูููู - ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุงุณุชุฎุฏุงู Task ุฃู ุ ูู ุญุงูุฉ ุนุงูุฉ ุงููุงุณ ุ ุบูุฑ ูุชุฒุงููุฉ / ูู ุงูุชุธุงุฑ.  ููุฏ ูุงูุช Microsoft ุจุนูู ุฌูุฏ - ูู ุฃุฌู ุงุณุชุฎุฏุงู ุนุฏู ุงูุชุฒุงูู ูู ูุนุธู ุงูุญุงูุงุช ุ ูุง ุนููู ุณูู ูุนุฑูุฉ ุจูุงุก ุงูุฌููุฉ ูุฃู ุชูุงุตูู ุฃุฎุฑู.  ููู ุฅุฐุง ุชุนููุช ุ ูุฅู ุงูููุถูุน ุถุฎู ููุนูุฏ ููุบุงูุฉ.  ุตุฑุญ ุจุฐูู ุงููุซูุฑ ุ ูู ูู ุฃุณููุจู ุงูุฎุงุต.  ููุงู ุงููุซูุฑ ูู ุงูููุงูุงุช ุงูุฑุงุฆุนุฉ ุญูู ูุฐุง ุงูููุถูุน ุ ูููู ูุง ูุฒุงู ููุงู ุงููุซูุฑ ูู ุงูููุงููู ุงูุฎุงุทุฆุฉ ุญููู.  ุณูุญุงูู ุชุตุญูุญ ุงููููู ููุถุบ ุงูููุงุฏ ูุฏุฑ ุงูุฅููุงู ุ ุฏูู ุงูุชุถุญูุฉ ุจุงูุนูู ุฃู ุงูููู. <br><br><img src="https://habrastorage.org/webt/zn/or/r1/znorr1o7rsk1tzudgdrmgchrss4.jpeg"><br><a name="habracut"></a><br>  ุงูููุถูุนุงุช / ุงููุตูู ุงููุดูููุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููู ุนุฏู ุงูุชุฒุงูู</a></b> - ููุงุฆุฏ ุนุฏู ุงูุชุฒุงูู ูุงูุฎุฑุงูุงุช ุญูู ููุถูุน "ูุญุธูุฑ" </li><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TAP.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุงุก ุงูุฌููุฉ ูุดุฑูุท ุงูุชุฑุฌูุฉ</a></b> - ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ ููุชุงุจุฉ ุทุฑููุฉ ุงูุชุฑุฌูุฉ </li><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุนูู ุจุงุณุชุฎุฏุงู TAP</a></b> - ูููุงูููุง ูุณููู ุงูุจุฑูุงูุฌ ูู ุงูููุฏ ุบูุฑ ุงููุชุฒุงูู (ุชุญุฑูุฑ ุณูุงุณู ุงูุฑุณุงุฆู ุ ุจุฏุก ุงูููุงู ูุงูุชุธุงุฑ ุงุณุชููุงููุง) </li><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุงุก ุงูููุงููุณ: ุขูุฉ ุงูุญุงูุฉ</a></b> - ูุธุฑุฉ ุนุงูุฉ ุนูู ุชุญูููุงุช ุงููุชุฑุฌู ูุงููุฆุงุช ุงูุชู ููุดุฆูุง </li><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุตูู ุนุฏู ุงูุชุฒุงูู.</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุงุฒ ุงูุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ ุงูููุงุณูุฉ</a></b> - <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทุฑู</a></b> ุบูุฑ ูุชุฒุงููุฉ ููุนูู ูุน ุงููููุงุช ูุงูุดุจูุฉ ูู ุงูุฏุงุฎู </li><li style=";text-align:right;direction:rtl">  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฆุงุช TAP ูุญูููุง</a></b> ุนุจุงุฑุฉ ุนู <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญูู</a></b> ูููุฏุฉ ูููู ุฃู ุชุณุงุนุฏู ูู ุฅุฏุงุฑุฉ ุจุฑูุงูุฌ ูุชุณุฑูุนู ุจุงุณุชุฎุฏุงู TAP </li></ol><a name="conception"></a><br><h2 style=";text-align:right;direction:rtl">  ููููู ุบูุฑ ูุชุฒุงูู </h2><br>  ุนุฏู ุงูุชุฒุงูู ูู ุญุฏ ุฐุงุชู ุฃุจุนุฏ ูุง ูููู ุนู ุงูุฌุฏูุฏ.  ุบุงูุจูุง ูุง ูุชุถูู ุงูุชุฒุงูู ุฅุฌุฑุงุก ุนูููุฉ ุจุฃุณููุจ ูุง ูุนูู ุญุธุฑ ูุคุดุฑ ุชุฑุงุจุท ุงูุงุชุตุงู ุ ุฃู ุจุฏุก ุงูุนูููุฉ ุฏูู ุงูุชุธุงุฑ ุงูุชูุงููุง.  ุงูุญุฌุจ ููุณ ุดุฑูุง ููุง ูู ููุตูู.  ูุฏ ูุตุงุฏู ุงููุฑุก ุงูุงุฏุนุงุกุงุช ุจุฃู ุงูุฎููุท ุงููุญุธูุฑุฉ ุชูุฏุฑ ููุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุชุนูู ุจุจุทุก ุฃูุซุฑ ูุชุณุจุจ ุงููุทุฑ.  ูู ูุจุฏู ูุฐุง ุงูุฃุฎูุฑ ุบูุฑ ูุฑุฌุญุ  ูู ุงููุงูุน ุ ูุฅู 2 ููุทุฉ ุงูุณุงุจูุฉ ูู ููุณูุง. <br><br>  ุนูู ูุณุชูู ุฌุฏููุฉ ูุธุงู ุงูุชุดุบูู ุ ุนูุฏูุง ูููู ุงูุฎูุท ูู ุญุงูุฉ "ูุญุธูุฑุฉ" ุ ููู ูุชู ุชุฎุตูุต ููุช ุซููู ูููุนุงูุฌ.  ููุงููุงุช ุฌุฏููุฉ ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ุชูุน ุนูู ุงูุนูููุงุช ุงูุชู ุชุณุจุจ ุญุธุฑ ุงูููุงุทุนุงุช ุฌูุงุฒ ุถุจุท ุงูููุช ู ููุงุทุนุงุช ุฃุฎุฑู.  ููุฐุง ูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชููู ูุญุฏุฉ ุชุญูู ุงููุฑุต ุนูููุฉ ุงููุฑุงุกุฉ ูุชุจุฏุฃ ููุงุทุนุฉ ููุงุณุจุฉ ุ ูุจุฏุฃ ุงููุฌุฏูู.  ุณูู ููุฑุฑ ูุง ุฅุฐุง ูุงู ุณูุชู ุจุฏุก ุชุดุบูู ุณูุณูุฉ ุฑุณุงุฆู ุชู ุญุธุฑูุง ุจูุงุณุทุฉ ูุฐู ุงูุนูููุฉ ุ ุฃู ุณูุญุฏุฏ ููุถูุนูุง ุขุฎุฑ ูู ุฃููููุฉ ุฃุนูู. <br><br>  ุงูุนูู ุงูุจุทูุก ูุจุฏู ุฃูุซุฑ ุณุฎุงูุฉ.  ูู ุงููุงูุน ุ ูู ุงููุงูุน ุ ุงูุนูู ูุงุญุฏ.  ุณุชุนูู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ููุท ุนูู ุฅุถุงูุฉ ููุฏุงุฑ ุฃูุจุฑ ููููุงู ูู ุงูุญูู. <br><br>  ุชุญุฏู ุงููุทุฑ ููุณ ุนููููุง ุดูุฆูุง ูู ูุฐู ุงูููุทูุฉ. <br><br>  ูุดููุฉ ุงูุญุฌุจ ุงูุฑุฆูุณูุฉ ูู ุงูุงุณุชููุงู ุบูุฑ ุงููุนููู ูููุงุฑุฏ ุงูููุจููุชุฑ.  ุญุชู ูู ูุณููุง ููุช ุฅูุดุงุก ุณูุณูุฉ ุฑุณุงุฆู ูุงูุนูู ูุน ูุฌููุนุฉ ูุคุดุฑุงุช ุชุฑุงุจุท ุ ูุฅู ูู ูุคุดุฑ ุชุฑุงุจุท ูุญุธูุฑ ูุณุชููู ูุณุงุญุฉ ุฅุถุงููุฉ.  ุญุณููุง ุ ููุงู ุณููุงุฑูููุงุช ุญูุซ ูููู ููุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ููุท ุฃุฏุงุก ุนูู ูุนูู (ุนูู ุณุจูู ุงููุซุงู ุ ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู).  ููููุง ูุฐูู ุ ูุง ุฃุฑูุฏู ุฃู ูููู ูุดุบูููุง ุจูููุฉ ูููู ุฃู ูููู ุจูุง ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ุ ูุงูุชุถุญูุฉ ุจุฃุฏุงุก ุงูุนูููุงุช ุงูุฎุงุตุฉ ุจู. <br><br>  ูุนุฏ ุนุฏู ุงูุชุฒุงูู ููููููุง ูุงุณุนูุง ููุบุงูุฉ ููููู ุชุญูููู ุจุนุฏุฉ ุทุฑู. <br>  <b>ูููู ุชูููุฒ ูุง ููู ูู ูุญููุธุงุช .NET</b> : <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  EAP (ููุท ุบูุฑ ูุชุฒุงูู ูุงุฆู ุนูู ุงูุฃุญุฏุงุซ) - ููุง ูุฏู ุงูุงุณู ุ ูุฅู ุงูุงุฑุชูุงุน ูุณุชูุฏ ุฅูู ุงูุฃุญุฏุงุซ ุงูุชู ุชูุทูู ุนูุฏ ุงูุชูุงู ุงูุนูููุฉ ูุงูุทุฑููุฉ ุงููุนุชุงุฏุฉ ุงูุชู ุชุณุชุฏุนู ูุฐู ุงูุนูููุฉ </li><li style=";text-align:right;direction:rtl">  APM (ูููุฐุฌ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงูู) - ูุนุชูุฏ ุนูู ุทุฑููุชูู.  ุฅุฑุฌุงุน ุงูุฃุณููุจ BeginSmth ูุงุฌูุฉ IAsyncResult.  ููุจู ุฃุณููุจ EndSmth IAsyncResult (ุฅุฐุง ูู ูุชู ุฅููุงู ุงูุนูููุฉ ุจุญููู ุงูููุช ุงูุฐู ูุชู ููู ุงุณุชุฏุนุงุก EndSmth ุ ูุชู ุญุธุฑ ูุคุดุฑ ุงูุชุฑุงุจุท) </li><li style=";text-align:right;direction:rtl">  TAP (ุงูููุท ุบูุฑ ุงููุชุฒุงูู ุงููุงุฆู ุนูู ุงูููุงู) ูู ููุณ ุงูุชุฒุงูู / ุงูุงูุชุธุงุฑ (ุจุงููุนูู ุงูุฏููู ูููููุฉ ุ ุธูุฑุช ูุฐู ุงููููุงุช ุจุนุฏ ุงูููุฌ ูุฃููุงุน ุงููููุฉ ูุงููููุฉ &lt;&lt;ุงููุชูุฌุฉ&gt; ุธูุฑุช ุ ููู ุงููุฒุงููุฉ / ุงูุงูุชุธุงุฑ ุชุญุณูุช ุจุดูู ูุจูุฑ ูุฐุง ุงูููููู) </li></ol><br>  ูุงู ุงูููุฌ ุงูุฃุฎูุฑ ูุงุฌุญูุง ูุฏุฑุฌุฉ ุฃู ุงูุฌููุน ูุณูุง ุจูุฌุงุญ ุชูู ุงูุณุงุจูุฉ.  ูุฐูู ุ ุณูููู ุนูู. <br><a name="tap_syntax"></a><br><h2 style=";text-align:right;direction:rtl">  ููุท ุบูุฑ ูุชุฒุงูู ูุณุชูุฏ ุฅูู ุงูููุงู.  ุจูุงุก ุงูุฌููุฉ ูุดุฑูุท ุงูุชุฌููุน </h2><br>  ุทุฑููุฉ ุบูุฑ ูุชุฒุงููุฉ ุนูู ุบุฑุงุฑ TAP ุงูููุงุณูุฉ ูู ุณููุฉ ุฌุฏุง ูููุชุงุจุฉ. <br><br>  <b>ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู</b> : <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชููู ูููุฉ ุงูุฅุฑุฌุงุน ูููุฉ ุฃู ูููุฉ &lt;T&gt; ุฃู ูุงุบูุฉ (ุบูุฑ ูุณุชุญุณู ุ ุชูุช ููุงูุดุชูุง ูุงุญููุง).  ูู C # 7 ุฌุงุกุช ุฃููุงุน ุชุดุจู ุงูููุงู (ุชูุช ููุงูุดุชูุง ูู ุงููุตู ุงูุฃุฎูุฑ).  ูู C # 8 ุ ุชุชู ุฅุถุงูุฉ IAsyncEnumerable &lt;T&gt; ู IAsyncEnumerator &lt;T&gt; ุฅูู ูุฐู ุงููุงุฆูุฉ. </li><li style=";text-align:right;direction:rtl">  ุจุญูุซ ูุชู ุชูููุฒ ุงูุทุฑููุฉ ุจุงููููุฉ ุงูุฑุฆูุณูุฉ ุบูุฑ ุงููุชุฒุงูู ูุชุญุชูู ุนูู ุงูุงูุชุธุงุฑ ุจุฏุงุฎููุง.  ูุฐู ุงููููุงุช ุงูุฑุฆูุณูุฉ ููุชุฑูุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ูุงูุช ุงูุทุฑููุฉ ุชุญุชูู ุนูู ุงูุชุธุงุฑ ุ ูุชุฃูุฏ ูู ูุถุน ุนูุงูุฉ ุนูู ุฃููุง ุบูุฑ ูุชุฒุงููุฉ ุ ูุงูุนูุณ ุบูุฑ ุตุญูุญ ุ ูููู ุจูุง ูุงุฆุฏุฉ </li><li style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุงูุญุดูุฉ ุ ูุฌุจ ุงูุงูุชุฒุงู ุจูุนุงูุฏุฉ ูุงุญูุฉ Async.  ุจุงูุทุจุน ุ ูุฅู ุงููุชุฑุฌู ูู ูุนุชุจุฑ ูุฐุง ุฎุทุฃ.  ุฅุฐุง ููุช ูุทูุฑูุง ูุงุฆููุง ููุบุงูุฉ ุ ูููููู ุฅุถุงูุฉ ุฃุญูุงู ุฒุงุฆุฏุฉ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุฅูุบุงุก ุงูุนูุงูุฉ (ุงูุชู ุชูุช ููุงูุดุชูุง ูู ุงููุตู ุงูุฃุฎูุฑ) </li></ol><br>  ููุซู ูุฐู ุงูุฃุณุงููุจ ุ ูููู ุงููุชุฑุฌู ุจุนูู ุฌุฏู.  ููุตุจุญูู ุบูุฑ ูุนุฑูููู ุชูุงููุง ูู ูุฑุงุก ุงูููุงููุณ ุ ููู ุงููุฒูุฏ ุนู ุฐูู ูุงุญููุง. <br><br>  ููุฏ ุฐูุฑ ุฃู ุงูุทุฑููุฉ ูุฌุจ ุฃู ุชุญุชูู ุนูู ุงููููุฉ ุงูุฑุฆูุณูุฉ ูู ุงูุชุธุงุฑ.  ุชุดูุฑ (ุงููููุฉ) ุฅูู ุงูุญุงุฌุฉ ุฅูู ุงูุงูุชุธุงุฑ ุบูุฑ ุงููุชุฒุงูู ูููููุฉ ุงููุฑุงุฏ ุชูููุฐูุง ุ ููู ูุงุฆู ุงููููุฉ ุงูุฐู ูุชู ุชุทุจููู ุนููู. <br><br>  <b>ูุญุชูู ูุงุฆู ุงููููุฉ ุฃูุถูุง ุนูู ุดุฑูุท ูุนููุฉ ุจุญูุซ ูููู ุชุทุจูู ุงูุงูุชุธุงุฑ ุนูููุง:</b> <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุญุชูู ุงูููุน ุงููุชููุน ุนูู ุฃุณููุจ GetAwaiter () ุนุงู (ุฃู ุฏุงุฎูู) ุ ููุง ูููู ุฃู ูููู ูุณููุฉ ุงูุชุฏุงุฏ.  ูุฐู ุงูุทุฑููุฉ ุชููู ุจุฅุฑุฌุงุน ูุงุฆู ุงูุชุธุงุฑ. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู ูุงุฆู ุงูุงูุชุธุงุฑ ุจุชุทุจูู ูุงุฌูุฉ INotifyCompletion ุ ูุงูุชู ุชุชุทูุจ ุชุทุจูู ุงูุฃุณููุจ OnCompleted (Action Action) ุงููุงุฑุบ.  ูุฌุจ ุฃู ูุญุชูู ุฃูุถูุง ุนูู IsCompleted bool ูุฎุงุตูุฉ ูุซูู ุ ุฃุณููุจ GetResult () ุงูุฎุงูู.  ูููู ุฃู ูููู ุฅูุง ูููู ุฃู ูุฆุฉ. </li></ol><br>  ููุถุญ ุงููุซุงู ุงูุชุงูู ููููุฉ ุฌุนู int ูุชููุนูุง ุ ูุญุชู ูุง ูุชู ุชูููุฐู ูุทูููุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูุฏูุฏ ูุซุงูุฉ ุงูุนูููุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WeirdExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> AnyTypeAwaiter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetAwaiter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnyTypeAwaiter(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AnyTypeAwaiter</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyCompletion</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsCompleted =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCompleted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action continuation</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } } }</code> </pre> <br></div></div><br><a name="tap_progr"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุนูู ูุน TAP </h2><br>  ูู ุงูุตุนุจ ุงูุฎูุถ ูู ุงูุบุงุจุฉ ุฏูู ููู ููููุฉ ุนูู ุดูุก ูุง.  ุงููุธุฑ ูู TAP ูู ุญูุซ ุณููู ุงูุจุฑูุงูุฌ. <br><br>  ูู ุงููุตุทูุญุงุช: ุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ููุฏ ุงููุธุฑ ุ ูุงูุชู ุณูุชู ุงููุธุฑ ูู ุงูููุฏ ุงูุฎุงุต ุจูุง ุ ุณุฃุชุตู <b>ุจุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ</b> ุ ูุงูุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ ุงููุฏุนููุฉ ุจุฏุงุฎููุง ุ ูุงูุชู <b>ุณุฃุฏุนููุง ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ</b> . <br><br>  ููุฃุฎุฐ ุฃุจุณุท ูุซุงู ุ ูุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ ูุฃุฎุฐ Task.Delay ุ ูุงูุชู ุชุคุฎุฑ ุงูููุช ุงููุญุฏุฏ ุฏูู ุญุธุฑ ุงูุฏูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DelayOperationAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//   { BeforeCall(); Task task = Task.Delay(1000); //  AfterCall(); await task; AfterAwait(); }</span></span></span></span></code> </pre><br>  ุชูููุฐ ุงูุทุฑููุฉ ูู ุญูุซ ุงูุณููู ุนูู ุงููุญู ุงูุชุงูู. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุณุจู ุงุณุชุฏุนุงุก ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฐุง ูู ุงูุฃุณููุจ <i>BeforeCall</i> </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก ุนูููุฉ ุบูุฑ ูุชุฒุงูู ููุฏ ุงูุชูุฏู.  ูู ูุฐู ุงููุฑุญูุฉ ุ ูุง ูุชู ุชุญุฑูุฑ ุงูุฎูุท ุฃู ุญุธุฑู.  ุชููู ูุฐู ุงูุนูููุฉ ุจุฅุฑุฌุงุน ุงููุชูุฌุฉ - ูุงุฆู ุงููููุฉ ุงููุฐููุฑ (ุนุงุฏุฉู ุงููููุฉ) ุ ูุงูุฐู ูุชู ุชุฎุฒููู ูู ูุชุบูุฑ ูุญูู </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุงูุฑูุฒ ุจุนุฏ ุงุณุชุฏุนุงุก ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ูููู ูุจู ุงูุงูุชุธุงุฑ (ูู ุงูุชุธุงุฑ).  ูู ุงููุซุงู - <i>AfterCall</i> </li><li style=";text-align:right;direction:rtl">  ูู ุงูุชุธุงุฑ ุงูุงูุชูุงุก ูู ูุงุฆู ุงููููุฉ (ุงูุฐู ูุชู ุชุฎุฒููู ูู ูุชุบูุฑ ูุญูู) - ูู ุงูุชุธุงุฑ ุงููููุฉ. <br><br>  ุฅุฐุง ุงูุชููุช ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ูุฐู ุงููุฑุญูุฉ ุ ูุณูุณุชูุฑ ุงูุชูููุฐ ุจุดูู ูุชุฒุงูู ูู ููุณ ุงูุฎูุท. <br><br>  ูู ุญุงูุฉ ุนุฏู ุงูุชูุงู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ูุชู ุญูุธ ุงูุฑูุฒ ุงูุฐู ูุฌุจ ุงุณุชุฏุนุงุคู ุนูุฏ ุฅููุงู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ (ูุง ูุณูู ุงุณุชูุฑุงุฑ) ุ ููุนูุฏ ุงูุฏูู ุฅูู ุชุฌูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ููุตุจุญ ูุชุงุญูุง ููุงุณุชุฎุฏุงู. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุงูุนูููุงุช ุจุนุฏ ุงูุงูุชุธุงุฑ - <i>AfterAwait</i> - ุฅูุง ุนูู ุงูููุฑ ุ ูู ููุณ ุงูุฎูุท ุนูุฏ ุงูุชูุงู ุงูุนูููุฉ ูู ููุช ุงูุงูุชุธุงุฑ ุ ุฃู ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูููุฉ ุ ูุชู ุฃุฎุฐ ุฎูุท ุฌุฏูุฏ ุณูุณุชูุฑ (ูุชู ุญูุธู ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ) </li></ol><br><a name="internals"></a><br><h2 style=";text-align:right;direction:rtl">  ูุฑุงุก ุงูููุงููุณ.  ุขูุฉ ุงูุฏููุฉ </h2><br>  ูู ุงููุงูุน ุ ูุชู ุชุญููู ุงูุฃุณููุจ ุงูุฎุงุต ุจูุง ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ุฅูู ุทุฑููุฉ ูุนุจ ุญูุซ ูุชู ุชููุฆุฉ ุงููุฆุฉ ุงูุชู ุชู ุฅูุดุงุคูุง - ุขูุฉ ุงูุญุงูุฉ -.  ุซู ูุจุฏุฃ (ุงูุฌูุงุฒ) ูู ุงูุนูู ุ ููุชู ุฅุฑุฌุงุน ูุงุฆู ุงููููุฉ ุงููุณุชุฎุฏู ูู ุงูุฎุทูุฉ 2 ูู ุงูุทุฑููุฉ. <br><br>  ุฐุงุช ุฃูููุฉ ุฎุงุตุฉ ูู ุทุฑููุฉ <i>MoveNext</i> ูุขูุฉ ุงูุญุงูุฉ.  ูุฐู ุงูุทุฑููุฉ ุชูุนู ูุง ูุงูุช ุนููู ูุจู ุงูุชุญููู ุจุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ.  ุฅูู ููุณุฑ ุงูุฑูุฒ ุจูู ูู ุงูุชุธุงุฑ ููุงููุฉ.  ูุชู ุชูููุฐ ูู ุฌุฒุก ูู ุญุงูุฉ ูุนููุฉ ูู ุงูุฌูุงุฒ.  ูุชู ุฅุฑูุงู ุงูุฃุณููุจ <i>MoveNext</i> ููุณู ุฅูู ูุงุฆู ุงูุงูุชุธุงุฑ ููุชุงุจุนุฉ.  ุฅู ุงูุญูุงุธ ุนูู ุงูุฏููุฉ ูุถูู ุชูููุฐ ูุฐุง ุงูุฌุฒุก ุจุงูุชุญุฏูุฏ ุงูุฐู ูุชุจุน ุงูุชููุน ุงูููุทูู. <br><br>  ููุง ูููููู ุ ูู ุงูุฃูุถู ุฃู ุชุฑู ูุฑุฉ ูุงุญุฏุฉ ุจุฏูุงู ูู ุฃู ุชุณูุน 100 ูุฑุฉ ุ ูุฐูู ุฃูุตู ุจุดุฏุฉ ุฃู ุชุชุนุฑู ุนูู ุงููุซุงู ุงูุชุงูู.  ุฃุนุฏุช ูุชุงุจุฉ ุงูููุฏ ููููุงู ุ ูุญุณููุช ุงูุชุณููุฉ ุงููุชุบูุฑุฉ ุ ูุนููุช ุจุณุฎุงุก. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delays</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); Console.WriteLine(<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); Console.WriteLine(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); Console.WriteLine(<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); Console.WriteLine(<span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); }</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุทุฑููุฉ ูุนุจ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AsyncStateMachine(typeof(DelaysStateMachine))</span></span>] [DebuggerStepThrough] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delays</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { DelaysStateMachine stateMachine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DelaysStateMachine(); stateMachine.taskMethodBuilder = AsyncTaskMethodBuilder.Create(); stateMachine.currentState = <span class="hljs-number"><span class="hljs-number">-1</span></span>; AsyncTaskMethodBuilder builder = stateMachine.taskMethodBuilder; taskMethodBuilder.Start(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> stateMachine); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> stateMachine.taskMethodBuilder.Task; }</code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุขูุฉ ุงูุฏููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CompilerGenerated</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DelaysStateMachine</span></span> : <span class="hljs-title"><span class="hljs-title">IAsyncStateMachine</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  ,     await   //       await'a public int currentState; public AsyncTaskMethodBuilder taskMethodBuilder; //   private TaskAwaiter taskAwaiter; //  ,             ""  public int paramInt; private int localInt; private void MoveNext() { int num = currentState; try { TaskAwaiter awaiter5; TaskAwaiter awaiter4; TaskAwaiter awaiter3; TaskAwaiter awaiter2; TaskAwaiter awaiter; switch (num) { default: localInt = paramInt; //  await Console.WriteLine(1); //  await awaiter5 = Task.Delay(1000).GetAwaiter(); //  await if (!awaiter5.IsCompleted) //  await. ,    { num = (currentState = 0); // ,      taskAwaiter = awaiter5; //    ,        DelaysStateMachine stateMachine = this; //    taskMethodBuilder.AwaitUnsafeOnCompleted(ref awaiter5, ref stateMachine); //                 return; } goto Il_AfterFirstAwait; //  ,   ,    case 0: //            ,        .   ,          awaiter5 = taskAwaiter; //   taskAwaiter = default(TaskAwaiter); //   num = (currentState = -1); //  goto Il_AfterFirstAwait; //       case 1: //  ,      ,    ,     . awaiter4 = taskAwaiter; taskAwaiter = default(TaskAwaiter); num = (currentState = -1); goto Il_AfterSecondAwait; case 2: // ,     . awaiter3 = taskAwaiter; taskAwaiter = default(TaskAwaiter); num = (currentState = -1); goto Il_AfterThirdAwait; case 3: //    awaiter2 = taskAwaiter; taskAwaiter = default(TaskAwaiter); num = (currentState = -1); goto Il_AfterFourthAwait; case 4: //    { awaiter = taskAwaiter; taskAwaiter = default(TaskAwaiter); num = (currentState = -1); break; } Il_AfterFourthAwait: awaiter2.GetResult(); Console.WriteLine(5); //     awaiter = Task.Delay(1000).GetAwaiter(); //   if (!awaiter.IsCompleted) { num = (currentState = 4); taskAwaiter = awaiter; DelaysStateMachine stateMachine = this; taskMethodBuilder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine); return; } break; Il_AfterFirstAwait: //  ,        awaiter5.GetResult(); //       Console.WriteLine(2); //  ,     await awaiter4 = Task.Delay(1000).GetAwaiter(); //    if (!awaiter4.IsCompleted) { num = (currentState = 1); taskAwaiter = awaiter4; DelaysStateMachine stateMachine = this; taskMethodBuilder.AwaitUnsafeOnCompleted(ref awaiter4, ref stateMachine); return; } goto Il_AfterSecondAwait; Il_AfterThirdAwait: awaiter3.GetResult(); Console.WriteLine(4); //     awaiter2 = Task.Delay(1000).GetAwaiter(); //   if (!awaiter2.IsCompleted) { num = (currentState = 3); taskAwaiter = awaiter2; DelaysStateMachine stateMachine = this; taskMethodBuilder.AwaitUnsafeOnCompleted(ref awaiter2, ref stateMachine); return; } goto Il_AfterFourthAwait; Il_AfterSecondAwait: awaiter4.GetResult(); Console.WriteLine(3); //     awaiter3 = Task.Delay(1000).GetAwaiter(); //   if (!awaiter3.IsCompleted) { num = (currentState = 2); taskAwaiter = awaiter3; DelaysStateMachine stateMachine = this; taskMethodBuilder.AwaitUnsafeOnCompleted(ref awaiter3, ref stateMachine); return; } goto Il_AfterThirdAwait; } awaiter.GetResult(); } catch (Exception exception) { currentState = -2; taskMethodBuilder.SetException(exception); return; } currentState = -2; taskMethodBuilder.SetResult(); //    ,   ,       } void IAsyncStateMachine.MoveNext() {...} [DebuggerHidden] private void SetStateMachine(IAsyncStateMachine stateMachine) {...} void IAsyncStateMachine.SetStateMachine(IAsyncStateMachine stateMachine) {...} }</span></span></code> </pre><br></div></div><br>  ุฃุฑูุฒ ุนูู ุนุจุงุฑุฉ "ูู ูุฐู ุงููุฑุญูุฉ ูู ูุชู ุชูููุฐูุง ุจุดูู ูุชุฒุงูู."  ูููู ุฃู ุชุชุจุน ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุฃูุถูุง ูุณุงุฑ ุงูุชูููุฐ ุงููุชุฒุงูู.  ุงูุดุฑุท ุงูุฑุฆูุณู ููุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุงูุญุงููุฉ ููุชู ุชูููุฐูุง ุจุดูู ูุชุฒุงูู ุ ููุฐุง ูู ุ ุฏูู ุชุบููุฑ ุงูุฎูุท ุ ูู ุฅููุงู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ููุช ุงูุชุญูู <i>IsCompleted</i> . <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุถุญ ูุฐุง ุงููุซุงู ุจูุถูุญ ูุฐุง ุงูุณููู.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(Thread.CurrentThread.ManagedThreadId); <span class="hljs-comment"><span class="hljs-comment">//1 Task task = Task.Delay(1000); Thread.Sleep(1700); await task; Console.WriteLine(Thread.CurrentThread.ManagedThreadId); //1 }</span></span></code> </pre><br></div></div><br>  ุญูู ุณูุงู ุงูุชุฒุงูู.  <i>ูุคุฏู</i> ุงูุฃุณููุจ <i>AwaitUnsafeOnCompleted</i> ุงููุณุชุฎุฏู ูู ุงูุฌูุงุฒ ูู ุงูููุงูุฉ ุฅูู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <i>Task.SetContinuationForAwait</i> .  ูู ูุฐู ุงูุทุฑููุฉ ุ ูุชู ุงุณุชุฑุฏุงุฏ ุณูุงู ุงููุฒุงููุฉ ุงูุญุงูู <i>SynchronizationContext.Current</i> .  ูููู ุชูุณูุฑ ุณูุงู ุงูุชุฒุงูู ูููุน ูู ุงูุฏูู.  ุฅุฐุง ูุงูุช ูุญุฏุฏุฉ ุฃูุถูุง (ุนูู ุณุจูู ุงููุซุงู ุ ุณูุงู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู) ุ ูุชู ุฅูุดุงุก ุงุณุชูุฑุงุฑูุฉ ุจุงุณุชุฎุฏุงู ูุฆุฉ <i>SynchronizationContextAwaitTaskContinuation</i> .  ูุณุชุฏุนู ูุฐุง ุงููุตู ูุจุฏุก ุงููุชุงุจุนุฉ ุทุฑููุฉ ุงููุดุฑ ูู ุงูุณูุงู ุงููุญููุธ ุ ููุง ูุถูู ุชูููุฐ ุงููุชุงุจุนุฉ ูู ุงูุณูุงู ุงููุญุฏุฏ ุญูุซ ุชู ุชุดุบูู ุงูุทุฑููุฉ.  ูุนุชูุฏ ุงูููุทู ุงููุญุฏุฏ ูุชูููุฐ ุงูุงุณุชูุฑุงุฑูุฉ ุนูู ุทุฑููุฉ <i>ุงููุดุฑ</i> ูู ุณูุงู ุ ุจุนุจุงุฑุฉ ููุทูุฉ ุ ุบูุฑ ูุนุฑูู ุจุงูุณุฑุนุฉ.  ุฅุฐุง ูู ููู ููุงู ุณูุงู ุงูุชุฒุงูู (ุฃู ุชูุช ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูุง ููููุง ูู ุฃู ุณูุงู ุณูุณุชูุฑ ุงูุชูููุฐ ุจุงุณุชุฎุฏุงู ConfigureAwait (false) ุ ูุงูุฐู ุณูุชู ููุงูุดุชู ูู ุงููุตู ุงูุฃุฎูุฑ) ุ ุณูุชู ุชูููุฐ ุงููุชุงุจุนุฉ ุจูุงุณุทุฉ ุณูุณูุฉ ุงูุฑุณุงุฆู ูู ุงูุชุฌูุน. <br><a name="libs"></a><br><h2 style=";text-align:right;direction:rtl">  ุฃุตูู ุนุฏู ุงูุชุฒุงูู.  ุทุฑู ุงูุฌูุงุฒ ุงูููุงุณูุฉ ุบูุฑ ูุชุฒุงูู </h2><br>  ูุธุฑูุง ูู ุทุฑููุฉ ุงุณุชุฎุฏุงู ุงููุฒุงููุฉ ูุงูุชุธุงุฑ ุงููุธูุฑ ููุง ูุญุฏุซ ูุฑุงุก ุงูููุงููุณ.  ูุฐู ุงููุนูููุงุช ููุณุช ุบูุฑ ุดุงุฆุนุฉ.  ูููู ูู ุงูููู ุฃู ูููู ุทุจูุนุฉ ุงูุนูููุงุช ุบูุฑ ุงููุชุฒุงููุฉ.  ูุฃูู ุ ููุง ุฑุฃููุง ูู ุฌูุงุฒ ุงูุญุงูุฉ ุ ูุชู ุงุณุชุฏุนุงุก ุงูุนูููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ูู ุงูููุฏ ุ ูุง ูู ุชุชู ูุนุงูุฌุฉ ูุชูุฌุชูุง ุจุทุฑููุฉ ุฃูุซุฑ ุฏูุงุก.  ููุน ุฐูู ุ ูุงุฐุง ูุญุฏุซ ุฏุงุฎู ุงูุนูููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ููุณูุงุ  ุฑุจูุง ููุณ ุงูุดูุก ุ ูููู ูุฐุง ูุง ูููู ุฃู ูุญุฏุซ ุจูุง ุญุฏูุฏ. <br><br>  ูููุฉ ูููุฉ ูู ููู ุทุจูุนุฉ ุนุฏู ุงูุชุฒุงูู.  ุนูุฏ ูุญุงููุฉ ููู ุนุฏู ุงูุชุฒุงูู ุ ููุงู ุชูุงูุจ ุจูู ุงูุญุงูุงุช "ุฃุตุจุญ ูุงุถุญูุง ุงูุขู" ู "ุงูุขู ุบูุฑ ููููู ูู ุฌุฏูุฏ".  ูุณูููู ูุฐุง ุงูุชูุงูุจ ุญุชู ูุชู ููู ูุตุฏุฑ ุนุฏู ุงูุชุฒุงูู. <br><br>  ุนูุฏ ุงูุนูู ูุน ุนุฏู ุงูุชุฒุงูู ุ ูุนูู ุนูู ุงูููุงู.  ูุฐุง ููุณ ูู ูู ููุณ ุงูุฏูู.  ูููู ุชูููุฐ ูููุฉ ูุงุญุฏุฉ ุนู ุทุฑูู ุงูุนุฏูุฏ ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุ ููููู ุชูููุฐ ูุคุดุฑ ูุงุญุฏ ุงูุนุฏูุฏ ูู ุงูููุงู. <br><br>  ูุจุฏุฃ ุนุฏู ุงูุชุฒุงูู ุนุงุฏุฉู ุจุฃุณููุจ ููุฑุฌุน ุงููููุฉ (ุนูู ุณุจูู ุงููุซุงู) ุ ูููู ูุง ูุชู ูุถุน ุนูุงูุฉ ุจุงุณู ุบูุฑ ูุชุฒุงูู ุ ูุจุงูุชุงูู ูุง ูุณุชุฎุฏู ุงูุงูุชุธุงุฑ ุจุฏุงุฎูู.  ูุง ุชุชุณุงูุญ ูุฐู ุงูุทุฑููุฉ ูุน ุฃู ุชุบููุฑุงุช ูุชุฑุฌู ุ ูุชู ุชูููุฐูุง ููุง ูู. <br><br>  <b>ูุฐูู ุ ุฏุนููุง ููุธุฑ ุฅูู ุจุนุถ ุฌุฐูุฑ ุนุฏู ุงูุชุฒุงูู.</b> <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Task.Run ุ Task (..) ุฌุฏูุฏุฉ. ุงุจุฏุฃ () ุ Factory.StartNew ููุง ุดุงุจู.  ุฃุณูู ุทุฑููุฉ ูุจุฏุก ุงูุชูููุฐ ุบูุฑ ุงููุชุฒุงูู.  ูุฐู ุงูุทุฑู ุจุจุณุงุทุฉ ุฅูุดุงุก ูุงุฆู ูููุฉ ุฌุฏูุฏุฉ ุ ูููุฑ ุงููููุถ ููุงุญุฏุฉ ูู ุงููุนููุงุช.  ูุชู ููู ุงููููุฉ ุฅูู ุจุฑูุงูุฌ ุงูุฌุฏููุฉ ุ ููุง ูุนุทููุง ููุชู ุชูููุฐูุง ุจูุงุณุทุฉ ุฃุญุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุงูุชุฌูุน.  ูุชู ุฅุฑุฌุงุน ุงููููุฉ ุงูููุงุฆูุฉ ุงูุชู ูููู ุชููุนูุง.  ุนุงุฏุฉู ูุง ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฃุณููุจ ูุจุฏุก ุงูุญูุณุจุฉ (ูุฑุชุจุท CPU) ูู ูุคุดุฑ ุชุฑุงุจุท ูููุตู. </li><li style=";text-align:right;direction:rtl">  TaskCompletionSource.  ูุฆุฉ ูุณุงุนุฏุฉ ุชุณุงุนุฏ ูู ุงูุชุญูู ูู ูุงุฆู ุงููููุฉ.  ูุตููุฉ ูุฃููุฆู ุงูุฐูู ูุง ูุณุชุทูุนูู ุชุฎุตูุต ูููุถ ููุชูููุฐ ููุณุชุฎุฏู ุขููุงุช ุฃูุซุฑ ุชุทูุฑุง ููุณูุทุฑุฉ ุนูู ุงูุงูุชูุงุก.  ูุฏูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุจุณูุทุฉ ููุบุงูุฉ - SetResult ุ SetError ุ ุฅูุฎ ุ ูุงูุชู ุชููู ุจุชุญุฏูุซ ุงููููุฉ ููููุง ูุฐูู.  ูุฐู ุงููููุฉ ูุชุงุญุฉ ูู ุฎูุงู ุฎุงุตูุฉ ุงููููุฉ.  ุฑุจูุง ูู ุฏุงุฎูู ุณุชููู ุจุฅูุดุงุก ุณูุงุณู ุฑุณุงุฆู ุ ููุฏูู ููุทู ูุนูุฏ ูุชูุงุนููุง ุฃู ุฅููุงููุง ุญุณุจ ุงูุญุฏุซ.  ูุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ูุฐุง ุงููุตู ุณุชููู ูู ุงููุณู ุงูุฃุฎูุฑ. </li></ol><br>  ูู ููุฑุฉ ุฅุถุงููุฉ ุ ููููู ุฌุนู ุฃุณุงููุจ ุงูููุชุจุงุช ุงูููุงุณูุฉ.  ูุชุดูู ูุฐู ุงููููุงุช ูุฑุงุกุฉ / ูุชุงุจุฉ ุ ุงูุนูู ูุน ุดุจูุฉ ุ ููุง ุดุงุจู.  ููุงุนุฏุฉ ุนุงูุฉ ุ ุชุณุชุฎุฏู ูุฐู ุงูุทุฑู ุงูุดุงุฆุนุฉ ูุงููุดุชุฑูุฉ ููุงููุงุช ุงููุธุงู ุงูุชู ุชุฎุชูู ุนูู ููุตุงุช ูุฎุชููุฉ ุ ูุฃุฌูุฒุชูู ูุณููุฉ ููุบุงูุฉ.  ุงููุธุฑ ูู ุงูุนูู ูุน ุงููููุงุช ูุงูุดุจูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูููุงุช </h3><br>  ููุงุญุธุฉ ูููุฉ - ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุนูู ูุน ุงููููุงุช ุ ูุฌุจ ุนููู ุชุญุฏูุฏ useAsync = true ุนูุฏ ุฅูุดุงุก FileStream. <br><br>  ูุชู ุชุฑุชูุจ ูู ุดูุก ูู ูููุงุช ุบูุฑ ุชุงููุฉ ููุฑุจูุฉ.  ูุชู ุชุนุฑูู ูุฆุฉ FileStream ุฌุฒุฆููุง.  ูุฅูู ุฌุงูุจ ุฐูู ุ ููุงู 6 ูุธุงุฆู ุฅุถุงููุฉ ุฎุงุตุฉ ุจุงููุธุงู ุงูุฃุณุงุณู.  ูุฐูู ุ ูู Unix ุ ูุณุชุฎุฏู ุงููุตูู ุบูุฑ ุงููุชุฒุงูู ุฅูู ููู ุชุนุณูู ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ุนูููุฉ ูุชุฒุงููุฉ ูู ุณูุณูุฉ ุฑุณุงุฆู ูููุตูุฉ.  ูู ูุธุงู Windows ุ ููุงู ุฏุนูุงุช ูููุธุงู ูุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ ุ ูุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ุจุงูุทุจุน.  ูุฐุง ูุคุฏู ุฅูู ุงุฎุชูุงูุงุช ูู ุงูุนูู ุนูู ููุตุงุช ูุฎุชููุฉ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุตุงุฏุฑ</a> . <br><br>  <b>ููููุณ</b> <br><br>  ูุชูุซู ุงูุณููู ุงูููุงุณู ุนูุฏ ุงููุชุงุจุฉ ุฃู ุงููุฑุงุกุฉ ูู ุฅุฌุฑุงุก ุงูุนูููุฉ ุจุดูู ูุชุฒุงูู ุ ุฅุฐุง ูุงู ุงููุฎุฒู ุงููุคูุช ูุณูุญ ุจุฐูู ููู ููู ุงูุฏูู ูุดุบูููุง ุจุนูููุฉ ุฃุฎุฑู: <br><br>  1. ุฏูู ููุณุช ูุดุบูู ูุน ุนูููุฉ ุฃุฎุฑู <br><br>  ุชุญุชูู ูุฆุฉ Filestream ุนูู ูุงุฆู ููุฑูุซ ูู SemaphoreSlim ูุน ุงููุนููุงุช (1 ุ 1) - ุฃู ููุทุน ุญุฑุฌ - ูููู ุชูููุฐ ุฌุฒุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุญูู ุจูุงุณุทุฉ ูุฐุง ุงูุฅุดุงุฑุฉ ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ููุท ูู ูู ูุฑุฉ.  ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฅุดุงุฑุฉ ุนูู ุญุฏ ุณูุงุก ูููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ููุฐุง ูุนูู ุฃูู ูู ุงููุณุชุญูู ุฅูุชุงุฌ ูู ูู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูู ููุช ูุงุญุฏ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูุญุฏุซ ุญุธุฑ ุนูู ุงูุฅุดุงุฑุฉ.  ูุชู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ this._asyncState.WaitAsync () ุนููู ุ ูุงูุฐู ููุฑุฌุน ูุงุฆู ูููุฉ (ูุง ููุฌุฏ ููู ุฃู ุงูุชุธุงุฑ ุ ูุณูููู ุงูุฃูุฑ ุฅุฐุง ุชู ุชุทุจูู ุงููููุฉ ุงูุฑุฆูุณูุฉ "ุงูุชุธุงุฑ" ุนูู ูุชูุฌุฉ ุงูุทุฑููุฉ).  ุฅุฐุง ูู ูุชู ุฅููุงู ูุงุฆู ุงููููุฉ ูุฐุง - ุฃู ุ ูุชู ุงูุชูุงุท ุงูุฅุดุงุฑุฉ ุ ูุณูุชู ุฅุฑูุงู ุงููุชุงุจุนุฉ (Task.ContinueWith) ุงูุชู ูุชู ูููุง ุชูููุฐ ุงูุนูููุฉ ุจูุงุฆู ุงูุงูุชุธุงุฑ ุงูุฐู ุชู ุฅุฑุฌุงุนู.  ุฅุฐุง ูุงู ุงููุงุฆู ูุฌุงูููุง ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ููุง ููู <br><br>  2. ูุณูุญ ุงูุนุงุฒูุฉ <br><br>  ููุง ูุนุชูุฏ ุงูุณููู ุจุงููุนู ุนูู ุทุจูุนุฉ ุงูุนูููุฉ. <br><br>  ููุชุณุฌูู - ูุชู ุงูุชุญูู ูู ุฃู ุญุฌู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงููุชุงุจุฉ + ุงูููุถุน ูู ุงูููู ุฃูู ูู ุญุฌู ุงููุฎุฒู ุงููุคูุช ุ ูุงูุฐู ูููู ุงูุชุฑุงุถููุง 4096 ุจุงูุช.  ุจูุนูู ุ ูุฌุจ ุฃู ููุชุจ 4096 ุจุงูุช ูู ุงูุจุฏุงูุฉ ุ ู 2048 ุจุงูุช ูุน ุฅุฒุงุญุฉ 2048 ุ ูููุฐุง.  ุฅุฐุง ูุงูุช ูุฐู ูู ุงูุญุงูุฉ ุ ูุณูุชู ุชูููุฐ ุงูุนูููุฉ ุจุดูู ูุชุฒุงูู ุ ูุฅูุง ุชููู ุงููุชุงุจุนุฉ ูุชุตูุฉ (Task.ContinueWith).  ุชุชูุฉ ูุณุชุฎุฏู ุงุณุชุฏุนุงุก ูุธุงู ูุชุฒุงูู ููุชุธู.  ุนูุฏ ุงูุชูุงุก ุงููุฎุฒู ุงููุคูุช ุ ุชุชู ูุชุงุจุชู ุนูู ุงููุฑุต ุจุดูู ูุชุฒุงูู. <br>  ูููุฑุงุกุฉ - ูุชู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ููุงู ุจูุงูุงุช ูุงููุฉ ูู ุงููุฎุฒู ุงููุคูุช ูู ุฃุฌู ุฅุฑุฌุงุน ุฌููุน ุงูุจูุงูุงุช ุงููุงุฒูุฉ.  ุฅุฐุง ูู ููู ูุฐูู ุ ุฅุฐู ุ ูุฑุฉ ุฃุฎุฑู ุ ุงุณุชูุฑุงุฑ (Task.ContinueWith) ูุน ุงุณุชุฏุนุงุก ูุธุงู ูุชุฒุงูู. <br><br>  ุจุงูููุงุณุจุฉ ุ ููุงู ุชูุงุตูู ูุซูุฑุฉ ููุงูุชูุงู.  ุฅุฐุง ูุงู ุฌุฒุก ูุงุญุฏ ูู ุงูุจูุงูุงุช ูุดุบู ุงููุฎุฒู ุงููุคูุช ุจุฃูููู ุ ูุณูุชู ูุชุงุจุชู ูุจุงุดุฑุฉ ุฅูู ุงูููู ุ ุฏูู ูุดุงุฑูุฉ ุงููุฎุฒู ุงููุคูุช.  ูู ุงูููุช ููุณู ุ ููุงู ูููู ุญูุซ ุณูููู ููุงู ุงููุฒูุฏ ูู ุงูุจูุงูุงุช ูู ุญุฌู ุงููุฎุฒู ุงููุคูุช ุ ููููุง ุณูู ุชูุฑ ุนุจุฑู.  ูุญุฏุซ ูุฐุง ุฅุฐุง ูุงู ููุงู ุจุงููุนู ุดูุก ูู ุงููุฎุฒู ุงููุคูุช.  ุจุนุฏ ุฐูู ุ ุณูุชู ุชูุณูู ุจูุงูุงุชูุง ุฅูู ุฌุฒุฃูู ุ ุฃุญุฏููุง ุณูู ูููุฃ ุงููุฎุฒู ุงููุคูุช ุญุชู ุงูููุงูุฉ ูุณูุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ุงูููู ุ ุฃูุง ุงูุซุงูู ูุณูุชู ูุชุงุจุชู ุฅูู ุงููุฎุฒู ุงููุคูุช ุฅุฐุง ูุตู ุฅููู ุฃู ูุจุงุดุฑุฉ ุฅูู ุงูููู ุฅุฐุง ูู ููุนู.  ูุฐูู ุ ุฅุฐุง ุฃูุดุฃูุง ุฏูููุง ููุชุจูุง 4097 ุจุงูุช ูู ุ ูุณูู ูุธูุฑูู ุนูู ุงูููุฑ ูู ุงูููู ุ ุฏูู ุงุณุชุฏุนุงุก Dispose.  ุฅุฐุง ูุชุจูุง 4095 ุ ููู ูููู ููุงู ุดูุก ูู ุงูููู. <br><br>  <b>ููุงูุฐ</b> <br><br>  ุชุญุช Windows ุ ุฎูุงุฑุฒููุฉ ุงุณุชุฎุฏุงู ุงููุฎุฒู ุงููุคูุช ูุงููุชุงุจุฉ ูุจุงุดุฑุฉ ูุชุดุงุจูุฉ ููุบุงูุฉ.  ูููู ููุญุธ ุงุฎุชูุงู ูุจูุฑ ูุจุงุดุฑุฉ ูู ุงููุธุงู ุบูุฑ ุงููุชุฒุงูู ุงููุชุงุจุฉ ููุฑุงุกุฉ ุงูููุงููุงุช.  ุงูุชุญุฏุซ ุฏูู ุงูุชูุฌู ุฅูู ุฃุนูุงู ููุงููุงุช ุงููุธุงู ุ ููุงู ูุซู ูุฐุง ุงููููู ุงููุชุฏุงุฎู.  ูุฏููุง ูุฌุงู ููู ุจุงููุณุจุฉ ููุง - HANDLE hEvent.  ูุฐุง ูู ุญุฏุซ ุฅุนุงุฏุฉ ุงูุถุจุท ุงููุฏูู ุงูุฐู ูุฐูุจ ุฅูู ุญุงูุฉ ุงูุฅูุฐุงุฑ ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูููุฉ.  ุงูุนูุฏุฉ ุฅูู ุงูุชูููุฐ.  ุงููุชุงุจุฉ ูุจุงุดุฑุฉ ุ ููุฐูู ุงููุชุงุจุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช ุ ุงุณุชุฎุฏู ููุงููุงุช ุงููุธุงู ุบูุฑ ุงููุชุฒุงูู ุ ูุงูุชู ุชุณุชุฎุฏู ุงููููู ุฃุนูุงู ููุนููุฉ.  ุนูุฏ ุงูุชุณุฌูู ุ ูุชู ุฅูุดุงุก ูุงุฆู FileStreamCompletionSource - ูุฑุซ TaskCompletionSource ุ ุญูุซ ุชู ุชุญุฏูุฏ IOCallback.  ูุชู ุงุณุชุฏุนุงุคู ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ูุฌุงูู ูู ุงูุชุฌูุน ุนูุฏ ุงูุชูุงู ุงูุนูููุฉ.  ูู ุฑุฏ ุงูุงุชุตุงู ุ ูุชู ุชุญููู ุจููุฉ Overlapped ููุชู ุชุญุฏูุซ ูุงุฆู ุงูููุงู ููููุง ูุฐูู.  ูุฐุง ููู ุณุญุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุดุจูุฉ </h3><br>  ูู ุงูุตุนุจ ูุตู ูู ุดูุก ุฑุฃูุชู ูููู ุงููุตุฏุฑ.  ุชููู ูุณุงุฑู ูู HttpClient ุฅูู Socket ูุฅูู SocketAsyncContext ูู Unix.  ุงููุฎุทุท ุงูุนุงู ูู ููุณู ููุง ูู ุงูุญุงู ูุน ุงููููุงุช.  ุจุงููุณุจุฉ ููุธุงู Windows ุ ูุชู ุงุณุชุฎุฏุงู ุจููุฉ Overlapped ุงููุฐููุฑุฉ ููุชู ุชูููุฐ ุงูุนูููุฉ ุจุดูู ุบูุฑ ูุชุฒุงูู.  ูู ูุธุงู ุงูุชุดุบูู Unix ุ ุชุณุชุฎุฏู ุนูููุงุช ุงูุดุจูุฉ ุฃูุถูุง ูุธุงุฆู ุฑุฏ ุงูุงุชุตุงู. <br><br>  ูุดุฑุญ ููููุง.  ุณูู ููุงุญุธ ุงููุงุฑุฆ ุงูููุธ ุฃูู ุนูุฏ ุงุณุชุฎุฏุงู ููุงููุงุช ุบูุฑ ูุชุฒุงููุฉ ุจูู ููุงููุฉ ูุงุณุชุฏุนุงุก ุ ููุงู ูุฑุงุบ ูุนูู ูุนูู ุจุทุฑููุฉ ูุง ูุน ุงูุจูุงูุงุช.  ููุง ูุฌุฏุฑ ุงูุชูุถูุญ ููุชุฃูุฏ ูู ุงูุชูุงูู.  ูู ูุซุงู ุงููููุงุช ุ ูููู ุฌูุงุฒ ุงูุชุญูู ุจุงููุฑุต ุจุฅุฌุฑุงุก ุนูููุงุช ูุจุงุดุฑุฉ ูุน ุงููุฑุต ุจูุงุณุทุฉ ูุญุฏุฉ ุงูุชุญูู ูู ุงููุฑุต ุ ููู ุงูุฐู ูุนุทู ุงูุฅุดุงุฑุงุช ุญูู ููู ุงูุฑุคูุณ ุฅูู ุงููุทุงุน ุงููุทููุจ ุ ุฅูุฎ.  ุงููุนุงูุฌ ูุฌุงูู ูู ูุฐุง ุงูููุช.  ูุญุฏุซ ุงูุงุชุตุงู ูุน ุงููุฑุต ูู ุฎูุงู ููุงูุฐ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ.  ููู ุชุดูุฑ ุฅูู ููุน ุงูุนูููุฉ ุ ููููุน ุงูุจูุงูุงุช ุนูู ุงููุฑุต ุ ุฅูุฎ.  ุจุนุฏ ุฐูู ุ ุชุนูู ูุญุฏุฉ ุงูุชุญูู ูุงููุฑุต ูู ูุฐู ุงูุนูููุฉ ูุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ุ ูุชู ุฅูุดุงุก ููุงุทุนุฉ.  ููููุง ูุฐูู ุ ูุฅู ููุงููุฉ ุงููุธุงู ุบูุฑ ุงููุชุฒุงูู ูุง ุชุณุงูู ุฅูุง ูู ุงููุนูููุงุช ูู ููุงูุฐ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ุจูููุง ููุชุธุฑ ุงููุชุฒุงูู ุฃูุถูุง ุงููุชุงุฆุฌ ุ ููุถุน ุงูุฏูู ูู ุญุงูุฉ ุญุธุฑ.  ูุง ูุฏุนู ูุฐุง ุงููุฎุทุท ุฃูู ุฏููู ุชูุงููุง (ูุง ูุชุนูู ุจูุฐู ุงูููุงูุฉ) ุ ููููู ูุนุทู ููููุง ููุงูููููุง ููุนูู. <br><br>  ุงูุขู ุทุจูุนุฉ ุงูุนูููุฉ ูุงุถุญุฉ.  ูููู ูุฏ ูุณุฃู ุดุฎุต ูุง ุ ูุงุฐุง ุชูุนู ูุน ุนุฏู ุงูุชุฒุงููุ  ูู ุงููุณุชุญูู ุฃู ุชูุชุจ ุงููุชุฒุงูู ุนูู ุทุฑููุฉ ุฅูู ุงูุฃุจุฏ. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก.  ูููู ุชูุฏูู ุงูุทูุจ ูุฎุฏูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุชู ูุชุงุจุฉ ููุทุฉ ุงูุฏุฎูู - ุงูุฑุฆูุณูุฉ - ูู ุงูุจุฏุงูุฉ.  ุญุชู ููุช ูุฑูุจ ุ ูุง ูููู ุฃู ูููู Main ุบูุฑ ูุชุฒุงูู ุ ูู ุงูุฅุตุฏุงุฑ 7 ูู ุงููุบุฉ ุ ุชูุช ุฅุถุงูุฉ ูุฐู ุงูููุฒุฉ.  ูููู ูุง ูุบูุฑ ุฃู ุดูุก ุจุดูู ุฌุฐุฑู ุ ููุท ุงููุชุฑุฌู ูููุฏ ุงูุฑุฆูุณู ุงููุนุชุงุฏ ุ ููู ุบูุฑ ุงููุชุฒุงูู ููุท ูุชู ุฅูุดุงุก ุทุฑููุฉ ุซุงุจุชุฉ ุ ูุงูุชู ุชุณูู ูู ุงูุฑุฆูุณูุฉ ููุชููุน ุงูุชูุงููุง ุจุดูู ูุชุฒุงูู.  ูุฐูู ุ ุนูู ุงูุฃุฑุฌุญ ูุฏูู ุจุนุถ ุงูุฃุนูุงู ุงูุชู ุทุงู ุฃูุฏูุง.  ูุณุจุจ ูุง ุ ูู ูุฐู ุงููุญุธุฉ ุ ูุจุฏุฃ ุงูุนุฏูุฏ ูู ุงูุฃุดุฎุงุต ูู ุงูุชูููุฑ ูู ููููุฉ ุฅูุดุงุก ุณูุงุณู ุฑุณุงุฆู ููุฐุง ุงูุนูู: ูู ุฎูุงู Task ุฃู ThreadPool ุฃู Thread ุจุดูู ุนุงู ูุฏูููุง ุ ูุฃูู ูุฌุจ ุฃู ูููู ููุงู ุงุฎุชูุงู ูู ุดูุก ูุง.  ุงูุฌูุงุจ ุจุณูุท - ุจุงูุทุจุน ุงููููุฉ.  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุฃุณููุจ TAP ุ ููุง ุชุชุฏุงุฎู ูุน ุฅูุดุงุก ุณูุณูุฉ ุฑุณุงุฆู ูุฏููุฉ.  ูุฐุง ุฃูุฑุจ ุฅูู ุงุณุชุฎุฏุงู HttpClient ูุฌููุน ุงูุทูุจุงุช ุชูุฑูุจูุง ุ ููุชู POST ุจุดูู ูุณุชูู ูู ุฎูุงู Socket. <br><br>  ุซุงููุง.  ุชุทุจููุงุช ุงูููุจ.  ูุคุฏู ูู ุทูุจ ูุงุฑุฏ ุฅูู ุณุญุจ ูุคุดุฑ ุชุฑุงุจุท ุฌุฏูุฏ ูู ThreadPool ูููุนุงูุฌุฉ.  ุงููุฌููุนุฉ ุ ุจุงูุทุจุน ุ ูุจูุฑุฉ ุ ูููู ููุณุช ูุงููุงุฆูุฉ.  ูู ุญุงูุฉ ูุฌูุฏ ุงููุซูุฑ ูู ุงูุทูุจุงุช ุ ูุฏ ูุง ูููู ููุงู ุนุฏุฏ ูุงูู ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุนูู ุงูุฅุทูุงู ุ ูุณูุชู ูุถุน ุฌููุน ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูููุนุงูุฌุฉ.  ูุฐุง ุงููุถุน ูุณูู ุงูุฌูุน.  ูููู ูู ุญุงูุฉ ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงูุชุญูู ุบูุฑ ุงููุชุฒุงููุฉ ุ ููุง ุชูุช ููุงูุดุชู ูุณุจููุง ุ ูุนูุฏ ุงูุฏูู ุฅูู ุงูุชุฌูุน ููููู ุงุณุชุฎุฏุงูู ููุนุงูุฌุฉ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ.  ูุจุงูุชุงูู ุ ูุชู ุฒูุงุฏุฉ ุฅูุชุงุฌูุฉ ุงูุฎุงุฏู ุจุดูู ูุจูุฑ. <br><br>  ูุธุฑูุง ุฅูู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณูุญูู ุจููู ูู ูุฐุง ุบูุฑ ุงููุชุฒุงูู ุ ุงูุฐู ูุชูุงูุถ ูุน ุงูุทุจูุนุฉ ุงูุจุดุฑูุฉ ุ ุณููุธุฑ ูู ุจุนุถ ุงูุญูู ุงููููุฏุฉ ุนูุฏ ุงูุนูู ูุน ุฑูุฒ ุบูุฑ ูุชุฒุงูู. </font></font><br><a name="api"></a><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตูู ูุญูู ูููุฏุฉ ุนูุฏ ุงูุนูู ูุน TAP </font></font></h2><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชููุน ุงูุซุงุจุช ููุฆุฉ ุงููููุฉ. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ูุฆุฉ ุงูููุงู ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุณุงููุจ ุงูุซุงุจุชุฉ ุงููููุฏุฉ. </font><font style="vertical-align: inherit;">ูููุง ููู ุฃูููุง.</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task.WhenAny (..) ุนุจุงุฑุฉ ุนู ุฃุฏุงุฉ ุฏูุฌ ุชุฃุฎุฐ IEnumerable / params ูู ูุงุฆูุงุช ุงูููุงู ูุชููู ุจุฅุฑุฌุงุน ูุงุฆู ูููุฉ ุณูุชู ุฅููุงูู ุนูุฏ ุงูุชูุงู ุงููููุฉ ุงูุฃููู ุงูุชู ูุชู ุฅููุงููุง. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃูู ูุณูุญ ูู ุจุงูุงูุชุธุงุฑ ูุฃุญุฏ ุงูููุงู ุงูุนุฏูุฏุฉ ุงูุฌุงุฑูุฉ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Task.WhenAll (..) - ุฃุฏุงุฉ ุงูุฌูุน ุ ูุชูุจู IEnumerable / params ููุงุฆูุงุช ุงููููุฉ ูุฅุฑุฌุงุน ูุงุฆู ุงููููุฉ ุ ุงูุฐู ุณูุชู ุฅููุงูู ุนูุฏ ุงูุงูุชูุงุก ูู ุฌููุน ุงูููุงู ุงููููููุฉ </font></font></li><li style=";text-align:right;direction:rtl"> Task.FromResult&lt;T&gt;(T value) โ    ,    .          </li><li style=";text-align:right;direction:rtl"> Task.Delay(..) โ     </li><li style=";text-align:right;direction:rtl"> Task.Yield() โ  .   ,      .  ,    ,      </li></ol><br><h3 style=";text-align:right;direction:rtl"> ConfigureAwait </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุทุจูุนุฉ ุงูุญุงู ุ ุงูููุฒุฉ ุงูุฃูุซุฑ ุชูุฏูุง "ุงููุชูุฏูุฉ". ุชูุชูู ูุฐู ุงูุทุฑููุฉ ุฅูู ูุฆุฉ ุงูููุงู ูุชุชูุญ ูู ุชุญุฏูุฏ ูุง ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุงููุชุงุจุนุฉ ูู ููุณ ุงูุณูุงู ุงูุฐู ุชู ุงุณุชุฏุนุงุก ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ููู. ุจุดูู ุงูุชุฑุงุถู ุ ุฏูู ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ุ ูุชู ุชุฐูุฑ ุงูุณูุงู ููุชุงุจุนุชู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุงููุดุฑ ุงููุฐููุฑุฉ. ููุน ุฐูู ุ ููุง ูููุง ุ ุจูุณุช ูู ูุชุนุฉ ููููุฉ ููุบุงูุฉ. ูุฐูู ุ ุฅุฐุง ูุงู ุงูุฃุฏุงุก ูู ุงููุฑูุฒ ุงูุฃูู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฃููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุงููุชุงุจุนุฉ ูู ุชููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ููููู ุชุญุฏูุฏ </font><i><font style="vertical-align: inherit;">.ConfigureAwait (false)</font></i><font style="vertical-align: inherit;"> ุนูู ูุงุฆู ุงูุงูุชุธุงุฑ </font><font style="vertical-align: inherit;">. ูุฐุง ูุนูู ุฃูู ูุง ููููุง ุฃูู ุณูุชู ุชูููุฐ ุงูุงุณุชูุฑุงุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุนู ุงููุดููุฉ. ููุง ูููููู ุ ูุฎูู ููุณ ุงูุฌูู ุ ูููู ุงููุนุฑูุฉ ุงูุฎุงุทุฆุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุฏุซ ุฃููู ูุงุญุธุช ุจุทุฑููุฉ ูุง ุฑูุฒ ุชุทุจูู ููุจ ุ ุญูุซ ุชู ุชุฒููู ูู ููุงููุฉ ุบูุฑ ูุชุฒุงููุฉ ูุน ูุฐุง ุงููุนุฌู. </font><font style="vertical-align: inherit;">ูุฐุง ููุณ ูู ุฃู ุชุฃุซูุฑ ุจุฎูุงู ุงูุงุดูุฆุฒุงุฒ ุงูุจุตุฑู. </font><font style="vertical-align: inherit;">ูุง ูุญุชูู ุชุทุจูู ุงูููุจ ASP.NET Core ุงูููุงุณู ุนูู ุฃู ุณูุงูุงุช ูุฑูุฏุฉ (ูุง ูู ุชูุชุจูุง ุจููุณู ุ ุจุงูุทุจุน). </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูุง ูุชู ุงุณุชุฏุนุงุก ุฃุณููุจ ุงููุดุงุฑูุฉ ููุงู ุนูู ุฃู ุญุงู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TaskCompletionSource &lt;T&gt; </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฆุฉ ุชุฌุนู ูู ุงูุณูู ุฅุฏุงุฑุฉ ูุงุฆู ุงููููุฉ. </font><font style="vertical-align: inherit;">ูุชูุชุน ุงููุตู ุจูุฑุต ูุงูุฑุฉ ุ ููููู ูููุฏ ููุบุงูุฉ ุนูุฏูุง ูุฑูุฏ ุฃู ูุฎุชุชู ูููุฉ ุจุฅุฌุฑุงุก ูุง ุ ูุชูุชูู ููุงูุชู ูู ุญุฏุซ ูุง. </font><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ุชู ุฅูุดุงุก ุงููุตู ูุชูููู ุงูุฃุณุงููุจ ุบูุฑ ุงููุชุฒุงููุฉ ุงููุฏููุฉ ูุน TAP ุ ูููู ููุง ุฑุฃููุง ุ ูุชู ุงุณุชุฎุฏุงูู ููุณ ููุท ููุฐุง ุงูุบุฑุถ. </font><font style="vertical-align: inherit;">ูุซุงู ุตุบูุฑ ููุนูู ูุน ูุฐู ุงููุฆุฉ:</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุซุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSomeDataAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { TaskCompletionSource&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; tcs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TaskCompletionSource&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); FileSystemWatcher watcher = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileSystemWatcher { Path = Directory.GetCurrentDirectory(), NotifyFilter = NotifyFilters.LastAccess, EnableRaisingEvents = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; watcher.Changed += (o, e) =&gt; tcs.SetResult(e.FullPath); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tcs.Task; }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููู ูุฐู ุงููุฆุฉ ุจุฅูุดุงุก ุจุฑูุงูุฌ ุงูุชูุงู ุบูุฑ ูุชุฒุงูู ููุญุตูู ุนูู ุงุณู ุงูููู ุงูุฐู ุชู ุงููุตูู ุฅููู ูู ุงููุฌูุฏ ุงูุญุงูู. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CancellationTokenSource </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุฅูุบุงุก ุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ. </font><font style="vertical-align: inherit;">ูุดุจู ุงููุฎุทุท ุงูุชูุตููู ุงูุนุงู ุงุณุชุฎุฏุงู TaskCompletionSource. </font><font style="vertical-align: inherit;">ุฃููุงู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅูุดุงุก var cts = new CancellationTokenSource ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุ ุจุงูููุงุณุจุฉ ุ ูู IDisposable ุ ุซู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cts.Token</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุชูุฑูุฑู ุฅูู ุนูููุงุช ุบูุฑ ูุชุฒุงููุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ุจุงุชุจุงุน ุจุนุถ ุงูููุทู ุ ูู ุธู ุธุฑูู ูุนููุฉ ุ ูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑููุฉ </font><i><font style="vertical-align: inherit;">cts.Cancel ()</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุงูุงุดุชุฑุงู ูู ุญุฏุซ ุฃู ุฃู ุดูุก ุขุฎุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CancellationToken</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุงุฑุณุฉ ุฌูุฏุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ูุชุงุจุฉ ุทุฑููุฉ ุบูุฑ ูุชุฒุงููุฉ ุชููู ุจุจุนุถูุง ูู ุงูุฎูููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ูุง ุงูุญุตุฑ ุ ููููู ุจุจุณุงุทุฉ ุฅุฏุฑุงุฌ ุณุทุฑ ูุงุญุฏ ูู ูุต ุงูุญููุฉ: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cancellationToken.ThrowIfCancellationRequested ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุณูุคุฏู ุฅูู ุงุณุชุซูุงุก</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OperationCanceledException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุชู ุงูุชุนุงูู ูุน ูุฐุง ุงูุงุณุชุซูุงุก ุนูู ุฃูู ุฅูุบุงุก ููุนูููุฉ ููุง ูุชู ุญูุธู ูุงุณุชุซูุงุก ุฏุงุฎู ูุงุฆู ุงููููุฉ. </font><font style="vertical-align: inherit;">ุฃูุถุงู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชุตุจุญ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎุงุตูุฉ </font><i><font style="vertical-align: inherit;">IsCanceled</font></i><font style="vertical-align: inherit;"> ุนูู ูุงุฆู ุงูููุงู ุตุญูุญุงู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LongRunning </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบุงูุจูุง ูุง ุชููู ููุงู ููุงูู ุ ุฎุงุตุฉ ุนูุฏ ูุชุงุจุฉ ุงูุฎุฏูุงุช ุ ุนูุฏ ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงูููุงู ุงูุชู ุณุชุนูู ุทูุงู ูุชุฑุฉ ุงูุฎุฏูุฉ ุฃู ููุชุฑุฉ ุทูููุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ููุง ูุชุฐูุฑ ุ ูุฅู ุงุณุชุฎุฏุงู ุชุฌูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูุนุฏ ุฃูุฑูุง ูุจุฑุฑูุง ูุฅูุดุงุก ูุคุดุฑ ุชุฑุงุจุท. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุฅุฐุง ูุงุฏุฑุงู ูุง ูุชู ุฅูุดุงุก ุฏูู (ุญุชู ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุณุงุนุฉ) ุ ูุณูุชู ุชุณููุฉ ูุฐู ุงูุชูุงููู ูููููู ุฅูุดุงุก ุฏูู ูููุตู ุจุฃูุงู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุนูุฏ ุฅูุดุงุก ูููุฉ ุ ููููู ุชุญุฏูุฏ ุฎูุงุฑ ุฎุงุต: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task.Factory.StartNew (ุฅุฌุฑุงุก ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TaskCreationOptions.LongRunning</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุฃู ุญุงู ุ ุฃูุตุญู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุงุทูุงุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุฌููุน </font><i><font style="vertical-align: inherit;">ุงูุชุญูููุงุช</font></i><font style="vertical-align: inherit;"> ุงูุฒุงุฆุฏุฉ </font><i><font style="vertical-align: inherit;">Task.Factory.StartNew</font></i><font style="vertical-align: inherit;"> ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุทุฑู ูุชูููู ุงููููุฉ ุจูุฑููุฉ ูุชูุจูุฉ ุงูุงุญุชูุงุฌุงุช ุงููุญุฏุฏุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุซูุงุกุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ููุทุจูุนุฉ ุบูุฑ ุงูุญุชููุฉ ูุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ูุฅู ูุณุฃูุฉ ุงูุงุณุชุซูุงุกุงุช ูููุฉ ููุบุงูุฉ. ุณูููู ูู ุงูุนุงุฑ ุฅุฐุง ูู ุชุชููู ูู ุงูุงุณุชุซูุงุก ูุชู ุทุฑุญู ูู ุงูุฎูุท ุงูุฃูุณุฑ ุ ููุง ุฃุฏู ุฅูู ููุชู ุงูุนูููุฉ. ุชู ุฅูุดุงุก ูุฆุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExceptionDispatchInfo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุชูุงุท ุงุณุชุซูุงุก ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ูุฑูููุง ููู </font><font style="vertical-align: inherit;">. ูุงูุชูุงุท ุงูุงุณุชุซูุงุก ุ ูุชู ุงุณุชุฎุฏุงู ุงูุฃุณููุจ ุงูุซุงุจุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExceptionDispatchInfo.Capture (ex) ุ ูุงูุฐู ูููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅุฑุฌุงุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExceptionDispatchInfo.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูุฑูุฑ ุงุฑุชุจุงุท ุฅูู ูุฐุง ุงููุงุฆู ุฅูู ุฃู ูุคุดุฑ ุชุฑุงุจุท ุ ูุงูุฐู ูุณุชุฏุนู ุทุฑููุฉ Throw () ูุฑูููุง ุจุนูุฏูุง. </font><font style="vertical-align: inherit;">ูุง ูุญุฏุซ ุฑูู ููุณู ูู ููุงู ุงุณุชุฏุนุงุก ุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ ุ ูููู ูู ููุงู ุงุณุชุฎุฏุงู ุนุงูู ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ูููุง ุชุนูู ุ ูุง ูููู ุฃู ุชูุชุธุฑ ุญุชู ูุชู ุชุทุจูููุง. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ุฅุฐุง ูุงู ุงูุณูุงู ููุฌูุฏูุง ุ ูุณูุชู ุชูุฑูุฑู ุฅููู ุจูุงุณุทุฉ ุทุฑููุฉ ุงููุดุฑ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุณูููู ูุชุญูุณ ูู ุงูุฏูู ูู ุงูุชุฌูุน. </font><font style="vertical-align: inherit;">ููุฐุง ูู ูุง ููุฑุจ ูู 100 ูช ูุฑุญุจุง ุฅูู ุงูููุงุฑ ุงูุชุทุจูู. </font><font style="vertical-align: inherit;">ูููุง ูุฃุชู ุฅูู ุญูููุฉ ุฃููุง ูุฌุจ ุฃู ูุณุชุฎุฏู ุงููููุฉ ุฃู ุงููููุฉ &lt;T&gt; ุ ููู ููุณ ุจุงุทูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃูุซุฑ ุดูุก ูุงุญุฏ. </font><font style="vertical-align: inherit;">ูุญุชูู ุงููุฌุฏูู ุนูู ุญุฏุซ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TaskScheduler.UnobservedTaskException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฐู </font><i><font style="vertical-align: inherit;">ูุชู ุชุดุบููู</font></i><font style="vertical-align: inherit;"> ุนูุฏ ุทุฑุญ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnobservedTaskException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชู ุทุฑุญ ูุฐุง ุงูุงุณุชุซูุงุก ุฃุซูุงุก ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุนูุฏูุง ูุญุงูู GC ุชุฌููุน ูุงุฆู ูููุฉ ูู ุงุณุชุซูุงุก ุบูุฑ ูุนุงููุฌ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"> IAsyncEnumerable </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงูุฅุตุฏุงุฑ C # 8 ู .NET Core 3.0 ุ ูู ููู ูู ุงููููู ุงุณุชุฎุฏุงู ููุฑุฑ ุงูุนุงุฆุฏ ุจุทุฑููุฉ ุบูุฑ ูุชุฒุงููุฉ ุ ููุง ุฃุฏู ุฅูู ุชุนููุฏ ุงูุญูุงุฉ ูุฌุนููุง ุชูุฑุฌุน ุงููููุฉ &lt;IEnumerable &lt;T&gt;&gt; ูู ูุฐู ุงูุทุฑููุฉ ุ ุฃู ูู ููู ููุงู ุทุฑููุฉ ููุชูุฑุงุฑ ูู ุฎูุงู ุงููุฌููุนุฉ ุญุชู ุชู ุงุณุชูุงููุง ุจุงููุงูู. ุงูุขู ููุงู ูุซู ูุฐู ุงููุฑุตุฉ. ุชุนูู ุงููุฒูุฏ ุนู ุฐูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ููุฐุง ุ ูุฌุจ ุฃู ูููู ููุน ุงูุฅุฑุฌุงุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IAsyncEnumerable &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IAsyncEnumerator &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). ูุงุฌุชูุงุฒ ูุซู ูุฐู ุงููุฌููุนุฉ ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ุญููุฉ foreach ูุน ุงููููุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชูุชุธุฑ ุงูุงูุชุธุงุฑ. ุฃูุถุง ุ ูููู ุงุณุชุฏุนุงุก ุฃุณุงููุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WithCancellation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigureAwait</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ูุชูุฌุฉ ุงูุนูููุฉ </font><font style="vertical-align: inherit;">ุ ููุง ูุดูุฑ ุฅูู CancelationToken ุงููุณุชุฎุฏูุฉ ูุงูุญุงุฌุฉ ุฅูู </font><i><font style="vertical-align: inherit;">ุงููุชุงุจุนุฉ</font></i><font style="vertical-align: inherit;"> ูู ููุณ ุงูุณูุงู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ูุชููุน ุ ูุชู ูู ุดูุก ูุณูู ูุฏุฑ ุงูุฅููุงู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏูุงู ูุซุงู ูุฎูุงุตุฉ ูุนุทููุง.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุซุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Stopwatch sw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stopwatch(); sw.Start(); IAsyncEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; enumerable = AsyncYielding(); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"Time after calling: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{sw.ElapsedMilliseconds}</span></span></span><span class="hljs-string">"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerable.WithCancellation(..).ConfigureAwait(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"element: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{element}</span></span></span><span class="hljs-string">"</span></span>); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"Time: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{sw.ElapsedMilliseconds}</span></span></span><span class="hljs-string">"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> IAsyncEnumerable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsyncYielding</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uselessElement <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)) { Task task = Task.Delay(TimeSpan.FromSeconds(uselessElement)); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">$"Task run: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{uselessElement}</span></span></span><span class="hljs-string">"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> task; <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> uselessElement; } } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุตุฉ: </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุช ุจุนุฏ ุงูุงุชุตุงู: 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู ุงูููุงู: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑ </font><font style="vertical-align: inherit;">ูุงุญุฏ </font><font style="vertical-align: inherit;">: 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุช: 1033 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู ุงููููุฉ: 2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑ: 2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุช: 3034 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู ุงููููุฉ: 3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑ: 3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุช: 6035</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ThreadPool </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐุง ุงููุตู ุจูุดุงุท ุนูุฏ ุงูุจุฑูุฌุฉ ุจุงุณุชุฎุฏุงู TAP. ูุฐูู ุ ุณุฃูุฏู ุงูุญุฏ ุงูุฃุฏูู ูู ุชูุงุตูู ุชูููุฐู. ูู ุงูุฏุงุฎู ุ ูุญุชูู ThreadPool ุนูู ูุฌููุนุฉ ูู ููุงุฆู ุงูุงูุชุธุงุฑ: ูุงุญุฏุฉ ููู ุฎูุท + ุนุงู ูุงุญุฏ. ุนูุฏ ุฅุถุงูุฉ ูุธููุฉ ุฌุฏูุฏุฉ ุฅูู ุงูุชุฌูุน ุ ูุชู ูุฑุงุนุงุฉ ุณูุณูุฉ ุงูุฑุณุงุฆู ุงูุชู ุจุฏุฃุช ุงูุฅุถุงูุฉ. ุฅุฐุง ูุงู ููุถูุนูุง ูู ุงูุชุฌูุน ุ ูุณูุชู ูุถุน ุงูุนูู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฎุงุตุฉ ุจู ููุฐุง ุงูููุถูุน ุ ุฅุฐุง ูุงู ููุถูุนูุง ุขุฎุฑ - ูู ุณูุณูุฉ ุนููููุฉ. ุนูุฏ ุชุญุฏูุฏ ูุคุดุฑ ุชุฑุงุจุท ููุนูู ุ ุชุธูุฑ ูุงุฆูุฉ ุงูุชุธุงุฑู ุงููุญููุฉ ุฃููุงู. ุฅุฐุง ูุงู ูุงุฑุบูุง ุ ูุณูุฃุฎุฐ ูุคุดุฑ ุงูุชุฑุงุจุท ูุธุงุฆู ูู ุงููุณุชูู ุงูุนุงููู. ุฅุฐุง ูุงู ูุงุฑุบูุง ุ ูุจุฏุฃ ูู ุงูุณุฑูุฉ ูู ุงูุขุฎุฑูู. ุฃูุถูุง ุ ูุฌุจ ุฃูุง ุชุนุชูุฏ ุฃุจุฏูุง ุนูู ุชุฑุชูุจ ุงูุนูู ุ ูุฃูู ูู ุงููุงูุน ุ ูุง ููุฌุฏ ุฃูุฑ. ูุนุชูุฏ ุงูุนุฏุฏ ุงูุงูุชุฑุงุถู ููุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุงูุชุฌูุน ุนูู ุงูุนุฏูุฏ ูู ุงูุนูุงูู ุ ุจูุง ูู ุฐูู ุญุฌู ูุณุงุญุฉ ุงูุนููุงู. ุฅุฐุง ูุงู ููุงู ุงููุฒูุฏ ูู ุงูุทูุจุงุช ููุชูููุฐ ุูู ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงููุชุงุญุฉ ุ ุงูุทูุจุงุช ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุชุฌูุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ูุคุดุฑุงุช ุชุฑุงุจุท ุงูุฎูููุฉ (ุงูุฎุงุตูุฉ isBackground = true). </font><font style="vertical-align: inherit;">ูุง ูุฏุนู ูุฐุง ุงูููุน ูู ุณูุงุณู ุงูุนูููุงุช ุนูุฑ ุงูุนูููุฉ ูู ุญุงูุฉ ุงูุชูุงู ูุงูุฉ ุณูุงุณู ุงูุนูููุงุช ุงูุฃูุงููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงูุจ ูุคุดุฑ ุชุฑุงุจุท ุงููุธุงู ุญุงูุฉ ูุคุดุฑ ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ุชูุชูู ุนูููุฉ ุงูุงูุชุธุงุฑ ุ ูุชู ุชูููุฐ ุฑุฏ ุงูุงุชุตุงู ุงูููููู ุจูุงุณุทุฉ ุณูุณูุฉ ุงูุฑุณุงุฆู ูู ุงูุชุฌูุน (ุชุฐูุฑ ุงููููุงุช ุงูููุฌูุฏุฉ ูู ูุธุงู Windows).</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุดุจู ูููุฉ ููุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฐููุฑุฉ ุณุงุจููุง ุ ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูููุน (ุจููุฉ ุฃู ูุฆุฉ) ููููุฉ ุงูุฅุฑุฌุงุน ูู ุงูุฃุณููุจ ุบูุฑ ุงููุชุฒุงูู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุฑุชุจุท ููุน ุงูุจุงูู ุจูุฐุง ุงูููุน ุจุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุฉ [AsyncMethodBuilder (..)]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ููุฐุง ุงูููุน ุงูุฎุตุงุฆุต ุงููุฐููุฑุฉ ุฃุนูุงู ุญุชู ูุชููู ูู ุชุทุจูู ุงููููุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชูุชุธุฑูุง. </font><font style="vertical-align: inherit;">ูููู ุฃู ุชููู ูุนููุฉ ููุทุฑู ุงูุชู ูุง ุชูุฑุฌุน ูููุฉ ูุงููุนููุงุช ูุชูู ุงูุชู ุชุฑุฌุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุดุฆ ููุณู ุนุจุงุฑุฉ ุนู ูุฆุฉ ุฃู ูููู ูุธูุฑ ุฅุทุงุฑู ูู ุงููุซุงู ุฃุฏูุงู. </font><font style="vertical-align: inherit;">ูุญุชูู ุงูุฃุณููุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ูุนููุฉ ูู ุงูููุน T ูููุน ูุดุจู ุงููููุฉ </font><font style="vertical-align: inherit;">ุชู </font><i><font style="vertical-align: inherit;">ุชุญุฏูุฏู</font></i><font style="vertical-align: inherit;"> ุจูุงุณุทุฉ T. ุจุงููุณุจุฉ ููุฃููุงุน ุบูุฑ ุงููุนููุฉ ุ ูุง ุชุญุชูู ุงูุทุฑููุฉ ุนูู ูุนููุงุช.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทููุจ ููุดุฆ ูุงุฌูุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyTaskMethodBuilder</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> MyTaskMethodBuilder&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Start&lt;TStateMachine&gt;(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetStateMachine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IAsyncStateMachine stateMachine</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetException</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Exception exception</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T result</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AwaitOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : INotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AwaitUnsafeOnCompleted&lt;TAwaiter, TStateMachine&gt;( <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TAwaiter awaiter, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> TStateMachine stateMachine) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TAwaiter : ICriticalNotifyCompletion <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TStateMachine : IAsyncStateMachine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MyTask&lt;T&gt; Task { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุดุฑุญ ูุจุฏุฃ ุงูุนูู ูู ูุฌูุฉ ูุธุฑ ูุชุงุจุฉ ููุน ููุงูู ุฃุฏูุงู. ุชู ูุตู ูุนุธู ูุฐุง ุจุงููุนู ุนูุฏ ุชุญููู ุงูููุฏ ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุงููุชุฑุฌู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงููุชุฑุฌู ูู ูุฐู ุงูุฃููุงุน ูุฅูุดุงุก ุฌูุงุฒ ุญุงูุฉ. ูุนุฑู ุงููุญูู ุงูุจุฑูุฌู ููุดุฆู ุงูุฅูุดุงุกุงุช ุงูุฐูู ูุณุชุฎุฏููู ุงูุฃููุงุน ุงูุชู ูุนุฑููุง ุ ูููุง ูุญุฏุฏ ูุง ุณูุชู ุงุณุชุฎุฏุงูู ุฃุซูุงุก ุฅูุดุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. ุฅุฐุง ูุงูุช ุขูุฉ ุงูุญุงูุฉ ุนุจุงุฑุฉ ุนู ูููู ุ ูุณูุชู ุชุนุจุฆุชูุง ุนูุฏ ุงุณุชุฏุนุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetStateMachine</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู </font><i><font style="vertical-align: inherit;">ููุจุงูู</font></i><font style="vertical-align: inherit;"> ุชุฎุฒูู ุงููุณุฎุฉ ุงููุนุจุฃุฉ ูุคูุชูุง ุฅุฐุง ูุฒู ุงูุฃูุฑ. ูุฌุจ ุฃู ูููู ุงูููุดุฆ ุจุงุณุชุฏุนุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stateMachine.MoveNext</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฏุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุจุนุฏ ุงุณุชุฏุนุงุฆู ูุจุฏุก ุงูุชูููุฐ ูุฏูุน ุฌูุงุฒ ุงูุญุงูุฉ. ุจุนุฏ ุงูุงุชุตุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุจุฏุฃ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุณูุชู ุฅุฑุฌุงุน ุงูุฎุงุตูุฉ Task ูู ุงูุฃุณููุจ. ุฃูุตู ุจุงูุนูุฏุฉ ุฅูู ุทุฑููุฉ ูุนุจ ุงูุฑูุชูู ูุนุฑุถ ูุฐู ุงูุฎุทูุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุชูุงู ุฌูุงุฒ ุงูุญุงูุฉ ุจูุฌุงุญ ุ ูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุณููุจ </font><i><font style="vertical-align: inherit;">SetResult</font></i><font style="vertical-align: inherit;"> ุ ูุฅูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุญุงูุฉ ูุตูู ุฌูุงุฒ ุงูุญุงูุฉ ุฅูู ุงูุงูุชุธุงุฑ ุ ูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุณููุจ </font><i><font style="vertical-align: inherit;">GetAwaiter ()</font></i><font style="vertical-align: inherit;"> ูู </font><font style="vertical-align: inherit;">ุงูููุน ุงูุฐู ูุดุจู ุงููููุฉ. ุฅุฐุง ูุงู ูุงุฆู ุงูุงูุชุธุงุฑ ูุทุจู ูุงุฌูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICriticalNotifyCompletion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู IsCompleted = false ุ ูุฅู ุฌูุงุฒ ุงูุญุงูุฉ ูุณุชุฎุฏู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">builder.AwaitUnsafeOnCompleted (ุงููุฑุฌุน ูู ุงูุชุธุงุฑ ุ ref stateMachine)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AwaitUnsafeOnCompleted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุจ ุงุณุชุฏุนุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awaiter.OnCompleted (ุงูุนูู)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูู ุงูุนูู ูุฌุจ ุงุณุชุฏุนุงุก </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stateMachine.MoveNext</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุชูุงู ูุงุฆู ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ูุจุงููุซูุ ูุฅู ูุงุฌูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INotifyCompletion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">builder.AwaitOnCompleted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฉ ุงุณุชุฎุฏุงู ูุฐุง ุงูุฃูุฑ ูุชุฑูู ูู. </font><font style="vertical-align: inherit;">ููููู ุฃูุตุญู ุจุงูุชูููุฑ ูู 514 ูุฑุฉ ูุจู ุชุทุจูู ูุฐุง ูู ุงูุฅูุชุงุฌ ุ ูููุณ ููุชุฏููู. </font><font style="vertical-align: inherit;">ูููุง ููู ูุซุงู ููุงุณุชุฎุฏุงู. </font><font style="vertical-align: inherit;">ููุฏ ุฑุณูุช ููุท ูููููุง ูุจุงูู ููุงุณู ูุนุฑุถ ุนูู ูุญุฏุฉ ุงูุชุญูู ุงูุทุฑููุฉ ุงูุชู ุชู ุงุณุชุฏุนุงุคูุง ููู ุฃู ููุช. </font><font style="vertical-align: inherit;">ุจุงูููุงุณุจุฉ ุ ูุง ูุฑูุฏ Main (ุบูุฑ ุงููุชุฒุงูู) ุฏุนู ููุน ูุฎุตุต ูู ุงูุชููุน (ุฃุนุชูุฏ ุฃู ุฃูุซุฑ ูู ูุดุฑูุน ุฅูุชุงุฌ ุชุงูู ุจุดูู ููุคูุณ ููู ุจุณุจุจ ูุฐู ูููุฉ ุฌูุงู ุจูุงุณุทุฉ Microsoft). </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฐูู ุ ููููู ุชุนุฏูู ูุณุฌู ุงููููู ุจุงุณุชุฎุฏุงู ูุณุฌู ุนุงุฏู ูุชุณุฌูู ูุฒูุฏ ูู ุงููุนูููุงุช.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุฌูู ูููู ุงููููุฉ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Start"</span></span>); JustMethod().Task.Wait(); <span class="hljs-comment"><span class="hljs-comment">//   Console.WriteLine("Stop"); } public static async LogTask JustMethod() { await DelayWrapper(1000); } public static LogTask DelayWrapper(int milliseconds) =&gt; new LogTask { Task = Task.Delay(milliseconds)}; } [AsyncMethodBuilder(typeof(LogMethodBuilder))] public class LogTask { public Task Task { get; set; } public TaskAwaiter GetAwaiter() =&gt; Task.GetAwaiter(); } public class LogMethodBuilder { private AsyncTaskMethodBuilder _methodBuilder = AsyncTaskMethodBuilder.Create(); private LogTask _task; public static LogMethodBuilder Create() { Console.WriteLine($"Method: Create; {DateTime.Now :O}"); return new LogMethodBuilder(); } public void Start&lt;TStateMachine&gt;(ref TStateMachine stateMachine) where TStateMachine : IAsyncStateMachine { Console.WriteLine($"Method: Start; {DateTime.Now :O}"); _methodBuilder.Start(ref stateMachine); } public void SetStateMachine(IAsyncStateMachine stateMachine) { Console.WriteLine($"Method: SetStateMachine; {DateTime.Now :O}"); _methodBuilder.SetStateMachine(stateMachine); } public void SetException(Exception exception) { Console.WriteLine($"Method: SetException; {DateTime.Now :O}"); _methodBuilder.SetException(exception); } public void SetResult() { Console.WriteLine($"Method: SetResult; {DateTime.Now :O}"); _methodBuilder.SetResult(); } public void AwaitOnCompleted&lt;TAwaiter, TStateMachine&gt;(ref TAwaiter awaiter, ref TStateMachine stateMachine) where TAwaiter : INotifyCompletion where TStateMachine : IAsyncStateMachine { Console.WriteLine($"Method: AwaitOnCompleted; {DateTime.Now :O}"); _methodBuilder.AwaitOnCompleted(ref awaiter, ref stateMachine); } public void AwaitUnsafeOnCompleted&lt;TAwaiter, TStateMachine&gt;(ref TAwaiter awaiter, ref TStateMachine stateMachine) where TAwaiter : ICriticalNotifyCompletion where TStateMachine : IAsyncStateMachine { Console.WriteLine($"Method: AwaitUnsafeOnCompleted; {DateTime.Now :O}"); _methodBuilder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine); } public LogTask Task { get { Console.WriteLine($"Property: Task; {DateTime.Now :O}"); return _task ??= new LogTask {Task = _methodBuilder.Task}; } set =&gt; _task = value; } }</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุตุฉ: </font><i><font style="vertical-align: inherit;">ุทุฑููุฉ </font></i></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฏุก </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุฅูุดุงุก ุ </font><font style="vertical-align: inherit;">2019-10-09T17: 55: 13.7152733 + 03: 00 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ: ุงุจุฏุฃ ุ </font><font style="vertical-align: inherit;">2019-10-09T17: 55: 13.7262226 + 03: 00 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ: AwaitUnsafeOnCompletedุ </font><font style="vertical-align: inherit;">2019-10-09T17: 55: 13.7275206 + 03: 00 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ: Taskุ </font><font style="vertical-align: inherit;">2019-10-09T17: 55: 13.7292005 + 03: 00 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ: SetResultุ </font><font style="vertical-align: inherit;">2019-10-09T17: 55: 14.7297967 + 03: 00 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูู ุดูุก ุ ุดูุฑุงู ููู ุฌููุนูุง.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar470830/">https://habr.com/ru/post/ar470830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar470820/index.html">ุงุฎุชุจุงุฑ ุณุฑูุน ูุนุดุฑุงุช ุงููุฑุถูุงุช: ููู ูุฎุฑุฌ ุนู ุงูุฑูุชูู ูููุงูุด ูู ูุฏููุฉ ุฃุฎุฑู</a></li>
<li><a href="../ar470822/index.html">ูุฑุงูุจุฉ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุงููุคุณุณุฉ</a></li>
<li><a href="../ar470824/index.html">ุญูุงุฑุงุช ุนูู ุงููุนุฏ</a></li>
<li><a href="../ar470826/index.html">ุนูุงู ุงูููุงุฌู ูุงูุบูุงุตูู ูุงูููุจุงูุช: ููู ูููุฑ ููุนููุงุก ุงููุตูู ุงูุขูู ุฅูู ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar470828/index.html">ูุงุฆูุฉ ุจูุซูู ุงููุฑุชุจุทุฉ: ุงููุทุท ูู ูุฑุจุนุงุช</a></li>
<li><a href="../ar470834/index.html">ุงูุชุทููุฑ ุ ูุงููุถุงุฏุงุช ุงูุญูููุฉ ูููุงุฐุฌ ููุงูุฉ ุงูุนุงูู ุบูุจูุจุฉ</a></li>
<li><a href="../ar470838/index.html">ุญุงููุฉ ุงูุฃูู ูู CI / CD</a></li>
<li><a href="../ar470844/index.html">ุงููุดุฑูุน ุงูุฌุฏูุฏ ููุฃุฎูุฉ Durov: Telegram Open Network</a></li>
<li><a href="../ar470852/index.html">ูุนุงูุฌุฉ 40 ุชูุฑุงุจุงูุช ูู ุงูุดูุฑุฉ ูู 10 ููููู ูุดุฑูุน ุนูู ุฎุงุฏู ูุฎุตุต ุจุงุณุชุฎุฏุงู Go ููุงุจู 100 ุฏููุงุฑ</a></li>
<li><a href="../ar470856/index.html">Telegram GRAM Wallet: ุดุฑูุท ุงูุฎุฏูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>