<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🔧 😄 👨🏼‍🏫 Günstige STM32-Karte + Arduino IDE UPD 17.08.2017 ↙️ 🍣 👩🏾‍🤝‍👩🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Möchten Sie Ihre Arduino-Projekte aktualisieren? Lassen Sie sie schneller arbeiten, machen Sie Messungen und Anpassungen genauer und fügen Sie Fehler ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Günstige STM32-Karte + Arduino IDE UPD 17.08.2017</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395577/"><img src="https://habrastorage.org/files/c77/812/08e/c7781208e99a4b5ba071204b56d89691.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möchten Sie Ihre Arduino-Projekte aktualisieren? </font><font style="vertical-align: inherit;">Lassen Sie sie schneller arbeiten, machen Sie Messungen und Anpassungen genauer und fügen Sie Fehler hinzu (sie sind bei neuen Geräten unvermeidlich). </font><font style="vertical-align: inherit;">Dann ist dieser Artikel für Sie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Arduino-Thema fängt immer mehr die Köpfe der Menschheit ein, aber früher oder später sehen wir uns mit der Tatsache konfrontiert, dass uns etwas fehlt, zum Beispiel Budget / Größen / </font><font style="vertical-align: inherit;">Port- </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pins</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / Bit-Kapazität / Leistung ... Wie ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weiser Mann sagte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : „Wer will, sucht nach Möglichkeiten Wer nicht will, sucht nach Gründen. “ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gute Leute verstehen das und beginnen langsam, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 an das Arduino-Thema anzuhängen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da die 8-Bit-AVR-Mikrocontroller, auf denen viele Arduino-Boards basieren, die Aufgaben nicht immer bewältigen können.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Zusammenfassung dieses Artikels im Videoformat:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/878k4KqF7Xs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Okay, weniger Texte und näher am Thema. </font><font style="vertical-align: inherit;">In diesem Artikel werde ich eine billige Debugging- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> betrachten, die auf dem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Mikrocontroller STM32F103C8T6</font></a><font style="vertical-align: inherit;"> basiert </font><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/files/b41/614/68c/b4161468c90142148c300aaa7e2f846e.JPG" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergleichen wir zunächst die Hauptparameter der STM32- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Karte</font></a><font style="vertical-align: inherit;"> und ihr Preisanalog - Arduino Nano V3.0:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betriebsfrequenz 72 MHz gegenüber 16 für Arduino;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Größe des Flash-Speichers beträgt 64 KB gegenüber 32 KB.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM, es ist RAM (wo die Variablen gespeichert sind), der STM32 hat bis zu 20 KB, der Arduinka hat nur 2;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schneller 12-Bit-ADC, während Arduino-Karten, die AVR-Mikrocontroller verwenden (dies ist normalerweise die Mehrheit), 10-Bit verwenden. </font><font style="vertical-align: inherit;">Dies bedeutet, dass im Fall von STM32 die Funktion analogRead (*) ist; </font><font style="vertical-align: inherit;">gibt 0..4095 gegenüber 0..1023 zurück, was im ersten Fall zu genaueren Messungen führt;</font></font></li>
<li>16-   ,  8-  Arduino ,  ,  <s>analogWrite(*);</s>pwmWrite(*);    0..65535,   0..255.       ,    ,     ;</li>
<li>   USB,       Arduino    2 ;</li>
<li>  —  2  3.6(    2 AA ),  2.7...5   ;</li>
<li>     — 1.9   1.8().</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich übertrifft die STM32-basierte Debugging-Karte den Arduino Nano in jeder Hinsicht, abgesehen vom Preis, aber 10 Cent sind ein guter Preis für großartige Leistung, aber über die Peripheriegeräte, mit denen der STM32 gefüllt ist, bin ich völlig still darüber, was </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wert ist </font><font style="vertical-align: inherit;">oder integrierte Echtzeituhren im Mikrocontroller. </font></font><br>
<br>
<img src="https://habrastorage.org/files/2d1/1b1/c4c/2d11b1c4c96342dbb0b7fe9aeedd046c.JPG" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies macht dieses Board in allem äußerst attraktiv, außer in einer Sache - für einen Anfänger wie mich scheint das STM32-Thema zu zeitaufwändig zu sein, es gibt ganze Websites, die sich der Programmierung dieser Mikrocontroller widmen. Wenn Sie jedoch STM32 mit der Arduino IDE befreundet haben, sinkt die Eintrittsschwelle auf ein extrem niedriges Niveau. Obwohl, wie sie sagen, "In jedem Fass Honig ist eine Fliege in der Salbe", aber mehr dazu weiter unten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bereiten wir das Board für die Arbeit mit der Arduino IDE vor. </font><font style="vertical-align: inherit;">Als erstes muss ein spezieller Bootloader auf den Mikrocontroller hochgeladen werden, mit dem Sie die Karte über Hardware-USB und direkt aus der Entwicklungsumgebung flashen können. </font><font style="vertical-align: inherit;">Bewegen Sie dazu den oberen Jumper (auch bekannt als „BOOT0“) auf Position „1“:</font></font><br>
<br>
<img src="https://habrastorage.org/files/198/fd7/ed4/198fd7ed436d475d88bcf52498d474d6.JPG" alt="Bild"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wofür sind die Jumper BOOT0 und BOOT1 gedacht?</font></font></b><div class="spoiler_text">  ,   STM32   ,     (system memory),  ,        USB to UART ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ST-Link V2</a>.<br>
<br>
<img src="https://habrastorage.org/files/5a4/813/115/5a48131155d249a1b97e5619c133a0af.png" alt="image"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes benötigen wir einen Adapter von USB zu UART. Es ist zu beachten, dass </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 eine 3,3-V-Logik ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und die Kompatibilität mit 5 V nicht garantiert </font><b><font style="vertical-align: inherit;">ist. Daher</font></b><font style="vertical-align: inherit;"> wird empfohlen, USB zu UART zu verwenden, mit dem Betriebsmodi mit 3,3 / 5-V-Logik ausgewählt werden können. Ich habe einen billigen Adapter verwendet, der auf CH340G basiert: </font></font><br>
<br>
<img src="https://habrastorage.org/files/85c/50b/0cb/85c50b0cbdf442daa01f436e37fd4b9b.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Wie Sie sehen, hat sich der Hersteller nicht mit einer Flussmittelwäsche </font><font style="vertical-align: inherit;">umgedreht </font><font style="vertical-align: inherit;">, dies hat natürlich keinen Einfluss auf die Arbeit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe die Karte wie folgt an den USB-UART-Adapter angeschlossen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
G &lt;-&gt; GND; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 V 5 V; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA10 TXD; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA9 &lt;-&gt; RXD. </font></font><br>
<br>
<img src="https://habrastorage.org/files/fa1/7c6/356/fa17c635681842d6b94add76cf4b2beb.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* PA10 / PA9 auf der Karte ist einfach als A10 / A9 signiert - diese Ports sind die erste USART-Hardware, es gibt 3 davon auf der Karte, es gibt auch 2 Hardware-I2Cs und 2 SPIs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Einfachheit halber habe ich die Platine mit 5 V betrieben. Bei einer Stromversorgung von 3,3 V befindet sich ein Pin „3.3“ auf der Platine. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung, 5 V können den Mikrocontroller leicht deaktivieren. Achten Sie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> daher auf die Verbindung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash Loader Demonstrator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunter, installieren Sie ihn und führen Sie ihn aus </font><font style="vertical-align: inherit;">(verfügbar im Archiv für den Artikel): </font></font><br>
<br>
<img src="https://habrastorage.org/files/124/554/93b/12455493b0334429b4f975143717ef88.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wählen Sie die COM-Portnummer unseres Adapters aus, in meinem Fall COM43, und klicken Sie dann auf "Weiter": </font></font><br>
<br>
<img src="https://habrastorage.org/files/866/092/649/866092649ba24aaf9db036baa5aa29df.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da ich einen neuen Mikrocontroller habe, </font><s><font style="vertical-align: inherit;">saß</font></s><font style="vertical-align: inherit;"> die </font><s><font style="vertical-align: inherit;">Fliege</font></s><font style="vertical-align: inherit;"> immer </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noch nicht</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">niemand hat etwas darauf geschrieben (außer dem Hersteller selbst), dann gibt es standardmäßig einen Leseschutz. Das Programm warnt uns, dass der Flash-Speicher gelöscht wird, wenn Sie auf die Schaltfläche "Schutz entfernen" klicken, dh wenn es eine Art Firmware gab - Sie wird in Rente gehen. In meinem Fall gibt es dort nichts Nützliches, also drücke ich mutig. Dann sehe ich Folgendes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/faf/937/62f/faf93762f79843ec8bb1989cc5ed2295.PNG" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie auf „OK“: </font></font><br>
<br>
<img src="https://habrastorage.org/files/132/4ea/aa8/1324eaaa861144bca5619c2703a49b38.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da meine Debugging-Karte auf dem STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C8-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mikrocontroller basiert </font><font style="vertical-align: inherit;">- es gibt 64 KB Flash-Speicher, gibt es auch einen STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CB-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mikrocontroller, auf dem doppelt so viel Flash vorhanden ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie dann auf "Weiter": </font></font><br>
<br>
<img src="https://habrastorage.org/files/021/79d/9e9/02179d9e9acb48fd845b79364cf3765a.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wieder auf "Weiter". Das folgende Fenster wird </font></font><br>
<br>
<img src="https://habrastorage.org/files/eb8/373/a44/eb8373a444d2489ba2ac37077ebe9093.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
angezeigt </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Wählen Sie "Auf Gerät herunterladen" und klicken Sie auf "...":</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd4/f1e/af6/cd4f1eaf6e4a4557befea62a0d5f91ee.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ändern Sie den Dateityp in * .bin und öffnen Sie die Datei "generic_boot20_pc13.bin" (ebenfalls im Archiv vorhanden), die aus dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32duino-Bootloader-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt entnommen werden kann </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann klicken wir auf die Schaltfläche "Weiter". Nach der Bootloader-Firmware sehen wir grünes Licht: </font></font><br>
<br>
<img src="https://habrastorage.org/files/694/7e2/a39/6947e2a39b0e4dd2995145f80ec1a1b8.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann müssen wir für die Arduino IDE-Entwicklungsumgebung einen speziellen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32-Kernel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunterladen </font><font style="vertical-align: inherit;">(dieser befindet sich auch im Archiv für den Artikel). </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier gibt es eine Nuance: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zeitpunkt des Schreibens </font><b><font style="vertical-align: inherit;">funktioniert</font></b><font style="vertical-align: inherit;"> der </font><b><font style="vertical-align: inherit;">Kernel nicht mit Versionen der Entwicklungsumgebung über 1.6.5</font></b><font style="vertical-align: inherit;"> . Ich habe 1.6.5-r5, das ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier heruntergeladen habe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></s> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Kernel wurde getestet, um mit der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino IDE Version 1.6.9 zu arbeiten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entpacken Sie als Nächstes den Inhalt unter Eigene Dateien \ Arduino \ Hardware:</font></font><br>
<br>
<img src="https://habrastorage.org/files/98b/ed2/7f9/98bed27f9cf3403d9518307b9d5a9b57.PNG" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In meinem Fall sieht der vollständige Pfad folgendermaßen aus: "C: \ Benutzer \ RSK \ Dokumente \ Arduino \ Hardware". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich kann das System das System des Geräts nicht bestimmen, daher müssen Sie die Treiber weiterhin auf der Karte installieren. Wir gehen in den Ordner "Eigene Dateien \ Arduino \ Hardware \ Arduino_STM32 \ Treiber \ Win" (oder "Treiber \ Win", im Fall eines Archivs zum Artikel) und führen die Datei "install_drivers.bat" als Administrator aus: </font></font><br>
<br>
<img src="https://habrastorage.org/files/99a/523/588/99a523588e134d478d0d72988d9b1e6a.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach den obersten Jumper (das das "BOOT0"), setzen Sie es auf Position "0" und verbinden Sie die Karte über ein Micro-USB-Kabel mit dem Computer: </font></font><br>
<br>
<img src="https://habrastorage.org/files/be6/c72/ff8/be6c72ff836947a382a558c1e6323a60.JPG" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sollte im Geräte-Manager entweder als "Maple DFU" oder "Maple Serial (COM *)" definiert werden: </font></font><br>
<br>
<img src="https://habrastorage.org/files/97b/154/a3b/97b154a3b891400ca365af6e0c7ef922.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist nicht klar, warum nach der ersten Verbindung Die Karte ist auf verschiedenen Computern unterschiedlich definiert, aber nicht der Punkt, wir fahren mit der Konfiguration der Arduino IDE fort.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir starten die Entwicklungsumgebung und dann Tools -&gt; </font></font><br>
<br>
<img src="https://habrastorage.org/files/3c6/306/4e1/3c63064e14424feeba0dd583863de356.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Board </font><font style="vertical-align: inherit;">-&gt; Boards Manager: </font><font style="vertical-align: inherit;">Hier müssen Sie den Kernel für das Arduino Due Board installieren. Wählen Sie die neueste Version aus und klicken Sie auf „Installieren“: </font></font><br>
<br>
<img src="https://habrastorage.org/files/558/187/594/558187594cfb4bce944089a37d76d7f9.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann auf Tools -&gt; Board -&gt; „Generic STM32F103C“, dann auf Variante: „STM32F103C8 (20 KB RAM. 64 KB Flash)“, Upload-Methode: „STM32duino Bootloader“, Port-Board-COM-Portnummer Im Allgemeinen ist alles wie im Screenshot: </font></font><br>
<br>
<img src="https://habrastorage.org/files/3a3/2a2/ecd/3a32a2ecdfdf4ca2bb9164eeffa9050d.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles, das Board ist bereit für Firmware und Programmierung in der Arduino IDE-Entwicklungsumgebung. Lassen Sie uns eine Skizze aus den Beispielen nähen, die in den Kernel „eingenäht“ sind. Gehen Sie zu Datei -&gt; Ordner mit Skizzen -&gt; Hardware -&gt; Arduino_STM32 -&gt; STM32F1 -&gt; Bibliotheken -&gt; A_STM32_Beispiele -&gt; Digital -&gt; Blinken: </font></font><br>
<br>
<img src="https://habrastorage.org/files/fdb/7df/6fb/fdb7df6fb6b64ade9f6c23a031367e4b.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klassisch „Hallo Welt“ in der Welt der Mikrocontroller. Wir ändern PB1 auf PC13, da die LED auf der Platinemit diesem Port verbunden:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a24/e91/2d9/a24e912d93fb42869921f9c9dd985bd5.JPG" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Übrigens leuchtet es am PC13-Bein schwach auf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir klicken auf die Schaltfläche "Herunterladen". Nach der Firmware zeigt die Entwicklungsumgebung Folgendes an: </font></font><br>
<br>
<img src="https://habrastorage.org/files/ae6/07b/674/ae607b6742f744088bd27b5388dbf31b.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Fertig! </font><font style="vertical-align: inherit;">
Zurücksetzen von </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
USB zum Zurückschalten in den Laufzeitmodus </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehler beim Zurücksetzen nach dem Download: usb_reset: Gerät konnte nicht zurückgesetzt werden, Win-Fehler: Die angegebene Datei wurde nicht gefunden. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber die Firmware wurde dann erfolgreich geladen, obwohl dies nicht immer der Fall ist. Manchmal gibt die Arduino IDE andere Meldungen aus.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das DFU-Gerät konnte nicht gefunden werden</font></font></b><div class="spoiler_text"> ,  :<br>
<br>
<img src="https://habrastorage.org/files/2f7/9b6/3c3/2f79b63c37dd44f6804f39c83d8ca14c.png" alt="image"><br>
<br>
«dfu-util — © 2007-2008 by OpenMoko Inc.<br>
Couldn't find the DFU device: [1EAF:0003]<br>
This program is Free Software and has ABSOLUTELY NO WARRANTY»<br>
<br>
 ,     .<br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suche nach DFU-Gerät [1EAF: 0003] ...</font></font></b><div class="spoiler_text">   :<br>
<br>
<img src="https://habrastorage.org/files/b2f/a3e/a09/b2fa3ea09c004c8caf3175f1053e9d39.png" alt="image"><br>
<br>
«Searching for DFU device [1EAF:0003]…<br>
Assuming the board is in perpetual bootloader mode and continuing to attempt dfu programming...»<br>
<br>
    ,         .      Arduino Pro Mini.<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und nun zu der "Fliege in der Salbe", über die ich am Anfang des Artikels geschrieben habe, ist es aus irgendeinem Grund nicht immer möglich, das Board in der Entwicklungsumgebung zu flashen, noch mehr, es wird nicht immer vom Computer bestimmt. </font><font style="vertical-align: inherit;">Ich habe dies wie folgt für mich entschieden, bevor ich die Firmware herunterlade (bevor ich auf die Schaltfläche "Herunterladen" klicke), auf der Karte auf "Zurücksetzen" klicke und nach der Firmware die Karte neu starte. </font><font style="vertical-align: inherit;">In diesem Fall beträgt der Prozentsatz der Wahrscheinlichkeit, dass das Brett genäht wird, 99%. </font><font style="vertical-align: inherit;">Es ist unklar, warum es so funktioniert, aber eine Tatsache. </font><font style="vertical-align: inherit;">Ich denke, dass früher oder später dieser Pfosten korrigiert wird und alles bei Bedarf automatisch neu gestartet wird. </font><font style="vertical-align: inherit;">Und um dies schneller zu beheben, muss die Community dieses wunderbaren STM32-Debugboards wachsen. Teilen Sie diesen Artikel also mit Freunden, insbesondere mit Programmiererfreunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Über die Pinbelegung:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klickbar</font></font></b><div class="spoiler_text">    ,    (   ):<br>
<br>
<a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/4b0/def/711/4b0def711af2f6fc049dcb9c2c6c759e.png" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.stm32duino.com/viewtopic.php?p=11137</a><br>
<br>
      , : <br>
<br>
<i>digitalWrite(PB0, LOW); <br>
<s>analogWrite(PA8, 65535);</s>pwmWrite(PA8, 65535); <br>
analogRead(PA0); <br>
LiquidCrystal lcd(PB0, PA7, PA6, PA5, PA4, PA3);</i><br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">docs.leaflabs.com/docs.leaflabs.com/index.html</a>          Arduino IDE,    .<br>
<br>
    ,     :<br>
<i>Documents\Arduino\hardware\Arduino_STM32\STM32F1\variants\generic_stm32f103c\board.cpp</i><br>
<br>
   ,  :<br>
<ul>
<li>,    <s>analogWrite();</s>pwmWrite(); — PB0, PA7, PA6, PA3, PA2, PA1, PA0, PB7, PB6, PA10, PA9, PA8,     ,     ;</li>
<li>,  analogRead(); — PB0, PA7, PA6, PA5, PA4, PA3, PA2, PA1, PA0.</li>
</ul><br>
<br>
    .       ,   1.9 .<br>
<br>
 ,   PA12/PA11   D+/D- USB,       ,   ,    2-     ,    .<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Leiterplatte:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klickbar</font></font></b><div class="spoiler_text"><a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/133/e87/543/133e875430de3f6b647547475f8358af.jpg" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.stm32duino.com/viewtopic.php?p=11464#p11464</a><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, zum Schluss:</font></font><br>
<br>
<img src="https://habrastorage.org/files/9cb/14b/562/9cb14b562e7f43b58a156618f171aa84.JPG" alt="Bild"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo geektimes.ru</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//https://github.com/mk90/LiquidCrystalRus</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//STM32  !</span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lcd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PB9, PB8, PB7, PB6, PB5, PB4)</span></span></span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>);<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">"geektimes.ru"</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(millis() / <span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Links: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archiv zum Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portal eines Freundes von Roger Clark, der sich der Portierung von STM32 widmet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Fragen / Vorschläge / Danke, alles da; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/rogerclarkmelbourne/Arduino_STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://docs.leaflabs.com/docs.leaflabs.com/index.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dieses Projekt hat Roger als Grundlage genommen, daher gibt es viele nützliche Dinge, allerdings auf Englisch; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino IDE Version 1.6.5-r5 kann hier heruntergeladen werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Artikel überschneidet sich bis zu einem gewissen Grad mit dem </font><font style="vertical-align: inherit;">Freund </font><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 vs Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@RaJa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Datenblatt auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32F103C8T6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle meine Veröffentlichungen zu Geektimes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD 15.07.2016</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Kernel wurde getestet, um mit der Arduino IDE Version 1.6.9 zu arbeiten: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru/post/277928/#comment_9532576</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sonst noch vergessen</font></font></b><div class="spoiler_text">       :<br>
<br>
<img src="https://habrastorage.org/files/08e/d64/4c5/08ed644c5daf40cb80ef5e2aa9442d51.JPG" alt="image"><br>
<br>
   ,      .<br>
<br>
   ,    microUSB :<br>
<br>
<img src="https://habrastorage.org/files/9fa/27c/f23/9fa27cf2394a446d8411f0b14f77f427.jpg" alt="image"><br>
<br>
      , ,   .<br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de395577/">https://habr.com/ru/post/de395577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de395565/index.html">Ethereum Software Fork Bug, Rollback der Ergebnisse und Ripple-Wachstum</a></li>
<li><a href="../de395567/index.html">Kingston UV400 480 GB SSD Test - Rosinen-SSD</a></li>
<li><a href="../de395571/index.html">Fragen Sie Ethan Nr. 66: Haben wir dunkle Materie gefunden?</a></li>
<li><a href="../de395573/index.html">Russische Verkäufer schlagen Alarm: Waren sind in ausländischen Online-Shops billiger</a></li>
<li><a href="../de395575/index.html">SanDisk startet MicroSDXC Bis zu 256 GB</a></li>
<li><a href="../de395579/index.html">Was sollte das echte E-Government sein? Estland zeigt ein Beispiel</a></li>
<li><a href="../de395581/index.html">Wie genomische Bearbeitung die Landwirtschaft verändern wird. Wenn wir erlauben ...</a></li>
<li><a href="../de395583/index.html">Roaming wird Innovationen außer Kraft setzen, nicht Gesetze</a></li>
<li><a href="../de395587/index.html">Echte Panzer im Spieluniversum</a></li>
<li><a href="../de395591/index.html">OnePlus 3: die am meisten erwartete Android-Neuheit des Sommers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>