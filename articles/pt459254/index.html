<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèø üë≤üèº ü§Ωüèº Bomba zip ainda melhor ‚¨ÜÔ∏è üë®üèø‚Äçüè≠ üë©‚Äç‚ù§Ô∏è‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo mostra como criar uma bomba zip n√£o recursiva que fornece um alto grau de compacta√ß√£o ao sobrepor arquivos dentro de um cont√™iner zip. ‚ÄúN√£o r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bomba zip ainda melhor</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459254/"> O artigo mostra como criar uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bomba zip</a> <i>n√£o recursiva</i> que fornece um alto grau de compacta√ß√£o ao sobrepor arquivos dentro de um cont√™iner zip.  ‚ÄúN√£o recursivo‚Äù significa que ele n√£o depende da descompacta√ß√£o dos arquivos descompactados anexados aos arquivos zip: existe apenas uma rodada.  O tamanho da sa√≠da aumenta quadraticamente a partir da entrada, atingindo uma taxa de compress√£o superior a 28 milh√µes (10 MB ‚Üí 281 TB) no formato zip.  √â poss√≠vel expandir ainda mais com extens√µes de 64 bits.  O design usa apenas o algoritmo de compacta√ß√£o DEFLATE mais comum e √© compat√≠vel com a maioria dos analisadores de zip. <br><br><a name="2"></a><ul><li>  <a href="">zbsm.zip</a> 42 kB ‚Üí 5,5 GB <br></li><li>  <a href="">zblg.zip</a> 10 MB ‚Üí 281 TB <br></li><li>  <a href="">zbxl.zip</a> 46 MB ‚Üí 4.5 PB (Zip64, menos compat√≠vel com analisadores) </li></ul><br>  C√≥digo fonte: <br><pre>  git clone https://www.bamsoftware.com/git/zipbomb.git </pre>  <a href="">zipbomb-20190702.zip</a> <br><br>  Dados e fonte de ilustra√ß√µes: <br><pre>  git clone https://www.bamsoftware.com/git/zipbomb-paper.git </pre><a name="habracut"></a><br><div class="scrollable-table"><table><thead><tr><td colspan="2"></td><th colspan="2">  n√£o recursivo </th><th colspan="2">  recursivo </th></tr><tr><td></td><th>  tamanho do arquivo </th><th>  tamanho descomprimido </th><th>  a propor√ß√£o </th><th>  tamanho descomprimido </th><th>  a propor√ß√£o </th></tr></thead><tbody><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Quine Cox</a> </th><td>  440 </td><td>  440 </td><td>  1.0 </td><td>  ‚àû </td><td>  ‚àû </td></tr><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://web.archive.org/web/20160130230432/">Quine Ellingsen</a> </th><td>  28.809 </td><td>  42 569 </td><td>  1.5 </td><td>  ‚àû </td><td>  ‚àû </td></tr><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">42.zip</a> </th><td>  42.374 * </td><td>  558 432 </td><td>  13,2 </td><td>  4 507 981 343 026 016 </td><td>  106 bilh√µes </td></tr><tr><th>  esta t√©cnica </th><td>  42.374 </td><td>  5 461 307 620 </td><td>  129 mil </td><td>  5 461 307 620 </td><td>  129 mil </td></tr><tr><th>  esta t√©cnica </th><td>  9 893 525 </td><td>  281 395 456 244 934 </td><td>  28 milh√µes </td><td>  281 395 456 244 934 </td><td>  28 milh√µes </td></tr><tr><th>  esta t√©cnica (Zip64) </th><td>  45 876 ‚Äã‚Äã952 </td><td>  4 507 981 427 706 459 </td><td>  98 milh√µes </td><td>  4 507 981 427 706 459 </td><td>  98 milh√µes </td></tr></tbody></table></div><br>  <sub>* Existem duas vers√µes do 42.zip: os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://web.archive.org/web/20120222083624/">antigos</a> 42 374 bytes e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://web.archive.org/web/20120301154142/">os</a> 42 428 bytes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://web.archive.org/web/20120301154142/">mais recentes</a> .</sub>  <sub>A diferen√ßa √© que o novo requer uma senha antes de desembalar.</sub>  <sub>N√≥s comparamos apenas com a vers√£o antiga.</sub>  <sub>Aqui est√° uma c√≥pia do arquivo, se necess√°rio: <a href="">42.zip</a> .</sub> <sub><br><br></sub>  <sub>** Gostaria de saber e indicar o autor do 42.zip, mas n√£o o encontrei - informe-me se voc√™ tiver alguma informa√ß√£o.</sub> <br><br>  As bombas zip devem superar o fato de que o algoritmo de compacta√ß√£o DEFLATE mais frequentemente suportado pelos analisadores <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o pode exceder a</a> taxa de compacta√ß√£o de 1032 a 1. Por esse motivo, as bombas zip geralmente confiam na descompress√£o recursiva, inserindo arquivos zip em arquivos zip para obter uma taxa adicional 1032 com cada camada.  Mas o truque s√≥ funciona em implementa√ß√µes que se descomprimem recursivamente, e a maioria n√£o.  A bomba <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">42.zip</a> mais famosa se expande para um formid√°vel 4.5 PB, se todas as seis camadas forem descompactadas recursivamente, mas na camada superior ela tem 0,6 MB em tamanho insignificante.  Os tirolesas, como os de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cox</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://web.archive.org/web/20160130230432/">Ellingsen</a> , emitem uma c√≥pia de si mesmos e, assim, se expandem indefinidamente quando descompactados recursivamente.  Mas eles tamb√©m s√£o completamente seguros ao desembalar uma vez. <br><br>  Este artigo mostra como criar uma bomba zip n√£o recursiva, cuja taxa de compacta√ß√£o excede o limite DEFLATE de 1032. Ele funciona sobrepondo arquivos dentro de um cont√™iner zip para referenciar o "n√∫cleo" de dados altamente compactados em v√°rios arquivos sem fazer v√°rias c√≥pias.  O tamanho da sa√≠da da bomba zip cresce quadraticamente a partir do tamanho da entrada;  isto √©, a taxa de compress√£o melhora com o aumento do tamanho da bomba.  O design depende dos recursos de zip e DEFLATE: n√£o pode ser transferido diretamente para outros formatos de arquivo ou algoritmos de compacta√ß√£o.  A bomba √© compat√≠vel com a maioria dos analisadores de zip, exceto os de "streaming", que analisam arquivos de uma s√≥ vez sem verificar o diret√≥rio central do arquivo zip.  Tentamos equilibrar dois objetivos conflitantes: <br><br><ul><li>  Aumente a taxa de compacta√ß√£o.  Definimos a taxa de compacta√ß√£o como a soma dos tamanhos de todos os arquivos no arquivo dividido pelo tamanho do pr√≥prio arquivo zip.  Ele n√£o leva em considera√ß√£o nomes de arquivos ou outros metadados do sistema de arquivos, mas apenas o conte√∫do. <br></li><li>  Mantenha a compatibilidade.  Zip √© um formato complexo e os analisadores diferem, especialmente em situa√ß√µes lim√≠trofes e fun√ß√µes adicionais.  N√£o use t√©cnicas que funcionem apenas com determinados analisadores.  Vamos observar algumas maneiras de aumentar a efici√™ncia de uma bomba zip com uma certa perda de compatibilidade. </li></ul><br><h1>  Estrutura do arquivo zip </h1><br>  O arquivo zip consiste em um <i>diret√≥rio central de</i> links <i>de</i> arquivos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/896/5d8/074/8965d80745e0b95831b8e3f7c68c5386.svg"><br><br>  O diret√≥rio central est√° no final do arquivo zip.  Esta √© uma lista dos <i>cabe√ßalhos de diret√≥rio central</i> .  Cada cabe√ßalho do diret√≥rio central cont√©m metadados para um √∫nico arquivo, como o nome do arquivo e a soma de verifica√ß√£o CRC-32, al√©m de um ponteiro para o cabe√ßalho do arquivo local.  O cabe√ßalho do diret√≥rio central tem um comprimento de 46 bytes mais o comprimento do nome do arquivo. <br><br>  O arquivo consiste no cabe√ßalho do arquivo local, seguido pelos dados do arquivo compactado.  O comprimento do cabe√ßalho do arquivo local √© de 30 bytes, mais o comprimento do nome do arquivo.  Ele cont√©m uma c√≥pia redundante dos metadados do cabe√ßalho do diret√≥rio central, bem como os tamanhos dos arquivos de dados compactados e descompactados por tr√°s dele.  Zip √© um formato de cont√™iner, n√£o um algoritmo de compacta√ß√£o.  Os dados de cada arquivo s√£o compactados usando o algoritmo especificado nos metadados - geralmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DEFLATE</a> . <br><br>  Esta descri√ß√£o do formato zip omite muitos detalhes que n√£o s√£o necess√°rios para entender a bomba zip.  Para obter informa√ß√µes completas, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se√ß√£o 4.3 APPNOTE.TXT</a> ou a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Estrutura do arquivo PKZip de</a> Florian Buchholz, ou consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo-fonte</a> . <br><br>  Redund√¢ncia significativa e muitas ambiguidades no formato zip abrem oportunidades para travessuras de diferentes tipos.  Uma bomba zip √© apenas a ponta do iceberg.  Links para leitura adicional: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúDez mil armadilhas de seguran√ßa: um formato ZIP‚Äù, de</a> Ginwael Coldwind <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A an√°lise de zip amb√≠gua permite ocultar os arquivos complementares do Firefox do linter e das pessoas</a> : minha vulnerabilidade em addons.mozilla.org </li></ul><br><h1>  Primeira descoberta: sobreposi√ß√£o de arquivos </h1><br>  Ao compactar uma longa sequ√™ncia de bytes repetidos, podemos criar um <i>n√∫cleo de</i> dados altamente compactados.  A taxa de compacta√ß√£o do pr√≥prio kernel n√£o pode exceder o limite DEFLATE de 1032, portanto, precisamos de uma maneira de reutilizar o kernel em muitos arquivos, sem criar uma c√≥pia separada em cada arquivo.  Podemos fazer isso sobrepondo arquivos: fa√ßa com que muitos cabe√ßalhos do diret√≥rio central aponte para um √∫nico arquivo cujos dados sejam o n√∫cleo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f80/675/a85/f80675a8530b8adfc1d5847eaaf813ca.svg"><br><br>  Considere um exemplo de como esse design afeta a taxa de compacta√ß√£o.  Suponha que um n√∫cleo de 1000 bytes seja descompactado em 1 MB.  Em seguida, o primeiro megabyte de sa√≠da "custa" 1078 bytes de dados de entrada: <br><br><ul><li>  31 bytes para o cabe√ßalho do arquivo local (incluindo o nome do arquivo de 1 byte) <br></li><li>  47 bytes para o cabe√ßalho do diret√≥rio central (incluindo um nome de arquivo de 1 byte) <br></li><li>  1000 bytes por n√∫cleo </li></ul><br>  Mas cada 1 MB de sa√≠da ap√≥s o primeiro custa apenas 47 bytes - n√£o precisamos de outro cabe√ßalho do arquivo local ou de outra c√≥pia do kernel, apenas de um cabe√ßalho adicional do diret√≥rio central.  Assim, enquanto o primeiro link do n√∫cleo tem uma taxa de compress√£o de 1.000.000 / 1.078 ¬± 928, cada link adicional move o coeficiente para mais perto de 1.000.000 / 47 √ó 21.277, e um n√∫cleo grande eleva o teto. <br><br>  O problema com essa id√©ia √© a falta de compatibilidade.  Como muitos cabe√ßalhos do diret√≥rio central apontam para um cabe√ßalho do arquivo local, os metadados (em particular, o nome do arquivo) n√£o podem ser os mesmos para cada arquivo.  Alguns analisadores <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">juram isso</a> .  Por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Info-ZIP UnZip</a> (o programa padr√£o de <code>unzip</code> no Unix) recupera arquivos, mas com avisos: <br><br><pre>  $ unzip overlap.zip
   inflar: A
 B: nome de arquivo "local" incompat√≠vel (A),
          continuando com a vers√£o do arquivo "central"
   inflar: B
 ... </pre><br>  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">zipfile do</a> Python tamb√©m <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gera uma exce√ß√£o</a> : <br><br><pre>  $ python3 -m zipfile -e overlap.zip.
 Traceback (√∫ltima chamada mais recente):
 ...
 __main __. BadZipFile: O nome do arquivo no diret√≥rio 'B' e o cabe√ßalho b'A 'diferem. </pre><br>  A seguir, veremos como redesenhar a consist√™ncia do nome do arquivo, preservando a maioria dos benef√≠cios da sobreposi√ß√£o de arquivos. <br><br><h1>  Segunda descoberta: citando os cabe√ßalhos dos arquivos locais </h1><br>  Precisamos separar os cabe√ßalhos dos arquivos locais para cada arquivo, enquanto reutilizamos um n√∫cleo.  Simplesmente combinar todos os cabe√ßalhos n√£o funciona, porque o analisador zip encontrar√° o cabe√ßalho do arquivo local onde espera o in√≠cio do fluxo DEFLATE.  Mas a id√©ia funcionar√°, com pequenas mudan√ßas.  Usaremos a fun√ß√£o DEFLATE de blocos n√£o compactados para "citar" os cabe√ßalhos dos arquivos locais, para que pare√ßam fazer parte do mesmo fluxo DEFLATE que termina no kernel.  Cada cabe√ßalho do arquivo local (exceto o primeiro) ser√° interpretado de duas maneiras: como c√≥digo (parte da estrutura do arquivo zip) e como dados (parte do conte√∫do do arquivo). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c1/668/e92/1c1668e92501880340aaf1651df25095.svg"><br><br>  Um fluxo DEFLATE √© uma sequ√™ncia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blocos em</a> que cada bloco pode ser compactado ou descompactado.  Normalmente pensamos apenas em blocos compactados, por exemplo, o kernel √© um grande bloco compactado.  Mas tamb√©m existem os descompactados que come√ßam com um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cabe√ßalho de 5 bytes</a> com um campo de comprimento, o que significa simplesmente: "imprima os pr√≥ximos <i>n</i> bytes literalmente".  Descompactar um bloco n√£o compactado significa excluir apenas o cabe√ßalho de 5 bytes.  Blocos compactados e n√£o compactados podem se misturar livremente no fluxo DEFLATE.  A sa√≠da √© uma concatena√ß√£o dos resultados da descompacta√ß√£o de todos os blocos em ordem.  O conceito de "n√£o compactado" importa apenas no n√≠vel DEFLATE;  os dados do arquivo ainda s√£o considerados "compactados" no n√≠vel do zip, independentemente de quais blocos s√£o usados. <br><br>  A maneira mais f√°cil de imaginar esse design √© como uma sobreposi√ß√£o interna, do √∫ltimo arquivo ao primeiro.  Come√ßamos inserindo um kernel que formar√° o final do arquivo de dados para cada arquivo.  Adicione o cabe√ßalho do arquivo LFH <sub><i>N</i></sub> local e o cabe√ßalho do diret√≥rio CDH <sub><i>N</i></sub> central que aponta para ele.  Defina o campo de metadados "tamanho compactado" em LFH <sub><i>N</i></sub> e CDH <sub><i>N</i></sub> para o tamanho do n√∫cleo compactado.  Agora adicione o cabe√ßalho de 5 bytes do bloco n√£o compactado (em verde no diagrama), cujo campo de comprimento √© igual ao tamanho LFH <sub><i>N.</i></sub>  Adicione o segundo cabe√ßalho do arquivo LFH local <sub><i>N-</i> 1</sub> e o t√≠tulo do diret√≥rio central CDH <sub><i>N-</i> 1</sub> , que aponta para ele.  Defina o campo de metadados "tamanho compactado" como o novo cabe√ßalho para o tamanho do kernel compactado <i>mais o</i> tamanho do cabe√ßalho de bloco n√£o compactado (5 bytes) <i>mais o</i> tamanho de LFH <sub><i>N.</i></sub> <br><br>  No momento, o arquivo zip cont√©m dois arquivos com os nomes Y e Z. Vamos ver o que o analisador ver√° ao analisar.  Suponha que o tamanho do kernel compactado seja 1000 bytes e o tamanho LFH <sub><i>N</i></sub> seja 31 bytes.  Come√ßamos com CDH <sub><i>N-</i> 1</sub> e seguimos o sinal para LFH <sub><i>N-</i> 1</sub> .  O nome do primeiro arquivo √© Y e o tamanho compactado do arquivo de dados √© 1036 bytes.  Interpretando os pr√≥ximos 1036 bytes como um fluxo DEFLATE, primeiro encontramos um cabe√ßalho de 5 bytes de um bloco n√£o compactado que diz copiar os pr√≥ximos 31 bytes.  Anotamos os pr√≥ximos 31 bytes, que s√£o LFH <sub><i>N</i></sub> , que descompactamos e adicionamos ao arquivo Y. Seguindo adiante no fluxo DEFLATE, encontramos o bloco compactado (kernel) que descompactamos no arquivo Y. Agora chegamos ao final dos dados compactados e finalizamos o arquivo Y. <br><br>  Passando para o pr√≥ximo arquivo, seguimos o ponteiro de CDH <sub><i>N</i></sub> para LFH <sub><i>N</i></sub> e encontramos um arquivo chamado Z com um tamanho compactado de 1000 bytes.  Interpretando esses 1000 bytes como um fluxo DEFLATE, encontramos imediatamente um bloco compactado (n√∫cleo novamente) e o descompactamos em um arquivo Z. Agora chegamos ao final do arquivo final e finalizamos.  O arquivo de sa√≠da Z cont√©m o kernel descompactado;  o arquivo de sa√≠da Y √© o mesmo, mas opcionalmente com um prefixo de 31 bytes LFH <sub><i>N.</i></sub> <br><br>  Conclu√≠mos a constru√ß√£o repetindo o procedimento de cita√ß√£o at√© que o arquivo zip inclua o n√∫mero necess√°rio de arquivos.  Cada novo arquivo adiciona um cabe√ßalho de diret√≥rio central, um cabe√ßalho de arquivo local e um bloco n√£o compactado para citar diretamente do pr√≥ximo cabe√ßalho de arquivo local.  Os dados do arquivo compactado geralmente s√£o uma cadeia de blocos DEFLATE n√£o compactados (cabe√ßalhos de arquivo locais citados) seguidos por um n√∫cleo compactado.  Cada byte no kernel contribui com cerca de 1032 <i>N</i> para o tamanho da sa√≠da, porque cada byte faz parte de todos os <i>N</i> arquivos.  Os arquivos de sa√≠da tamb√©m s√£o de tamanhos diferentes: os anteriores s√£o maiores que os posteriores porque citam mais os cabe√ßalhos dos arquivos locais.  O conte√∫do dos arquivos de sa√≠da n√£o faz muito sentido, mas ningu√©m disse que isso deveria fazer sentido. <br><br>  Esse design de cita√ß√£o de sobreposi√ß√£o possui uma compatibilidade melhor do que o design de sobreposi√ß√£o total da se√ß√£o anterior, mas a compatibilidade √© obtida atrav√©s da compacta√ß√£o.  L√°, cada arquivo adicionado custa apenas o t√≠tulo do diret√≥rio central, aqui custa o t√≠tulo do diret√≥rio central, o cabe√ßalho do arquivo local e outros 5 bytes para o cabe√ßalho da cita√ß√£o. <br><br><h1>  Otimiza√ß√£o </h1><br>  Tendo recebido o design b√°sico da bomba zip, tentaremos torn√°-la o mais eficiente poss√≠vel.  Queremos responder duas perguntas: <br><br><ul><li>  Qual √© a taxa m√°xima de compacta√ß√£o para um determinado tamanho de arquivo zip? <br></li><li>  Qual √© a taxa m√°xima de compacta√ß√£o, dadas as limita√ß√µes do formato zip? </li></ul><br><h3>  Compacta√ß√£o do Kernel </h3><br>  √â ben√©fico para n√≥s compactar o kernel o m√°ximo poss√≠vel, porque cada byte descompactado √© multiplicado por <i>N.</i>  Para esse fim, usamos um compressor DEFLATE personalizado chamado bulk_deflate, especializado em compactar uma sequ√™ncia de bytes repetidos. <br><br>  Todos os arquivadores DEFLATE decentes se aproximam da taxa de compress√£o de 1032 em um fluxo intermin√°vel de bytes repetidos, mas estamos preocupados com o tamanho espec√≠fico.  Em nosso tamanho de arquivo, bulk_deflate cont√©m mais dados que arquivadores de uso geral: cerca de 26 KB a mais que zlib e Info-ZIP e 15 KB a mais que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zopfli</a> , o que sacrifica a velocidade em prol da qualidade da compacta√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b4/cac/e5b/8b4cace5b49ef6945fd1d1ddc8fd7310.svg"><br><br>  O pre√ßo de uma alta taxa de compress√£o bulk_deflate - a falta de versatilidade.  Ele pode compactar apenas linhas de bytes repetidos e apenas um determinado comprimento, ou seja, 517 + 258 <i>k</i> para um n√∫mero inteiro <i>k</i> ‚â• 0. Al√©m da boa compacta√ß√£o, o bulk_deflate funciona rapidamente, realizando trabalhos quase ao mesmo tempo, independentemente do tamanho dos dados de entrada, contando o trabalho de escrever uma string compactada. <br><br><a name="1"></a><h3>  Nomes de arquivos </h3><br>  Para nossos prop√≥sitos, os nomes de arquivos t√™m quase peso morto.  Embora eles contribuam para o tamanho da sa√≠da fazendo parte dos cabe√ßalhos citados dos arquivos locais, os bytes no nome do arquivo contribuem muito menos que os bytes no kernel.  Queremos que os nomes dos arquivos sejam o mais curtos poss√≠vel, embora diferentes, sem esquecer a compatibilidade. <br><br>  Cada byte gasto em um nome de arquivo significa dois bytes n√£o gastos no kernel (dois porque cada nome de arquivo aparece duas vezes: no cabe√ßalho do diret√≥rio central e no cabe√ßalho do arquivo local).  Um byte de nome de arquivo resulta em uma m√©dia de apenas ( <i>N</i> + 1) / 4 bytes de sa√≠da, enquanto um byte no kernel conta como 1032 <i>N.</i>  Exemplos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">3</a> . <br><br>  A primeira considera√ß√£o de compatibilidade √© a codifica√ß√£o.  A especifica√ß√£o do formato zip indica que os nomes de arquivos devem ser interpretados como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CP 437</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UTF-8</a> se um bit de flag espec√≠fico estiver definido ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">APPNOTE.TXT, ap√™ndice D</a> ).  Esse √© o principal ponto de incompatibilidade entre os analisadores zip, que podem interpretar nomes de arquivos em alguma codifica√ß√£o fixa ou espec√≠fica do c√≥digo do idioma.  Portanto, para compatibilidade, √© melhor limitar-se a caracteres com a mesma codifica√ß√£o no CP 437 e UTF-8.  Nomeadamente, esses s√£o 95 caracteres imprim√≠veis em US-ASCII. <br><br>  Tamb√©m estamos sujeitos a restri√ß√µes de nomea√ß√£o de sistemas de arquivos.  Alguns sistemas de arquivos n√£o diferenciam mai√∫sculas de min√∫sculas, portanto 'a' e 'A' n√£o s√£o considerados nomes diferentes.  Sistemas de arquivos comuns, como o FAT32, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pro√≠bem certos caracteres</a> , como '*' e '?'. <br><br>  Como um compromisso seguro, mas n√£o necessariamente ideal, nossa bomba zip usar√° nomes de arquivos do alfabeto de 36 caracteres, que n√£o inclui caracteres especiais e caracteres de mai√∫sculas e min√∫sculas: <br><br><pre>  0 1 2 3 4 5 6 7 8 9 ABCDEFGHIJKLMNOPQRSTU VWXYZ </pre><br>  Os nomes dos arquivos s√£o gerados de maneira √≥bvia, todas as posi√ß√µes, por sua vez, com a adi√ß√£o de uma posi√ß√£o no final do loop: <br><br><pre>  "0", "1", "2", ..., "Z",
 "00", "01", "02", ..., "0Z",
 ...
 "Z0", "Z1", "Z2", ..., "ZZ",
 "000", "001", "002", ... </pre><br>  Existem 36 nomes de arquivo de um caractere, 36¬≤ nomes de dois caracteres e assim por diante.  Quatro bytes s√£o suficientes para 1.727.604 nomes de arquivos diferentes. <br><br>  Como os nomes dos arquivos no arquivo geralmente t√™m comprimentos diferentes, como posso classific√°-los melhor: do mais curto ao mais longo ou vice-versa?  Se voc√™ pensa um pouco, √© melhor colocar os nomes mais longos por √∫ltimo.  Essa classifica√ß√£o adiciona mais de 900 MB de sa√≠da ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">zblg.zip</a> , em compara√ß√£o com a ordem mais longa e mais curta.  No entanto, essa √© uma otimiza√ß√£o menor, porque 900 MB representa apenas 0,0003% do tamanho total do problema. <br><br><h3>  Tamanho do n√∫cleo </h3><br>  O design de cota√ß√£o sobreposto permite que voc√™ coloque um n√∫cleo de dados compactados e depois copie-o de forma barata v√°rias vezes.  Para um tamanho espec√≠fico do arquivo zip <i>X</i> , quanto espa√ßo √© ideal para alocar para armazenar o kernel e quanto criar c√≥pias? <br><br>  Para encontrar o equil√≠brio ideal, voc√™ precisa otimizar apenas uma vari√°vel <i>N</i> , o n√∫mero de arquivos no arquivo zip.  Cada valor <i>N</i> requer uma certa quantidade de sobrecarga para os cabe√ßalhos do diret√≥rio central, cabe√ßalhos de arquivos locais, cabe√ßalhos de blocos de cita√ß√µes e nomes de arquivos.  O restante do espa√ßo ser√° ocupado pelo n√∫cleo.  Como <i>N</i> deve ser um n√∫mero inteiro e voc√™ s√≥ pode colocar um certo n√∫mero de arquivos antes que o tamanho do kernel caia para zero, basta verificar todos os valores poss√≠veis de <i>N</i> e selecionar o que fornece a melhor sa√≠da. <br><br>  A aplica√ß√£o do procedimento de otimiza√ß√£o a <i>X</i> = 42.374 para 42.zip encontra um m√°ximo em <i>N</i> = 250. Esses 250 arquivos requerem 21.195 bytes de sobrecarga, deixando 21.179 bytes para o kernel.  Um kernel desse tamanho √© descompactado em 21.841.249 bytes (propor√ß√£o de 1031,3 para 1).  250 c√≥pias do kernel descompactado mais alguns cabe√ßalhos de arquivos locais citados fornecem uma sa√≠da total descompactada de 5.461.307.620 bytes e uma taxa de compacta√ß√£o de 129.000. <br><br><ul><li>  <a href="">zbsm.zip</a> 42 kB ‚Üí 5,5 GB </li></ul><pre>  zipbomb --mode = quoted_overlap --num-files = 250 --compressed-size = 21179&gt; zbsm.zip </pre><br>  A otimiza√ß√£o levou a uma distribui√ß√£o quase uniforme de espa√ßo entre o kernel e os cabe√ßalhos de arquivo.  Isto n√£o √© uma coincid√™ncia.  Considere um modelo simplificado de uma constru√ß√£o de cita√ß√£o com sobreposi√ß√£o.  Em um modelo simplificado, ignoramos os nomes dos arquivos, bem como um ligeiro aumento no tamanho do arquivo de sa√≠da devido √† cita√ß√£o dos cabe√ßalhos dos arquivos locais.  A an√°lise do modelo simplificado mostrar√° que a distribui√ß√£o ideal entre o kernel e os cabe√ßalhos de arquivo √© aproximadamente uniforme, e o tamanho da sa√≠da com a distribui√ß√£o ideal cresce quadraticamente, dependendo do tamanho da entrada. <br><br>  Defini√ß√£o de algumas constantes e vari√°veis: <br><br><div class="scrollable-table"><table><tbody><tr><td>  X </td><td></td><td>  tamanho do arquivo zip (considerado fixo) </td></tr><tr><td>  N </td><td></td><td>  n√∫mero de arquivos no arquivo zip (vari√°vel para otimiza√ß√£o) </td></tr><tr><td>  Cdh </td><td>  = 46 </td><td>  tamanho do cabe√ßalho do diret√≥rio central (sem nome do arquivo) </td></tr><tr><td>  Lfh </td><td>  = 30 </td><td>  tamanho do cabe√ßalho do arquivo local (sem nome do arquivo) </td></tr><tr><td>  Q </td><td>  = 5 </td><td>  DEFLATE tamanho descompactado do bloco </td></tr><tr><td>  C </td><td>  ‚âà 1032 </td><td>  taxa de compress√£o do kernel </td></tr></tbody></table></div><br>  Seja <i>H (N)</i> o volume da sobrecarga dos cabe√ßalhos dos <i>N</i> arquivos.  Veja o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">quadro</a> para entender a ess√™ncia da f√≥rmula. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">H</span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">N</span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-6" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">N</span><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mo" id="MJXp-Span-9" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">H</span><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">H</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-19" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">N</span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-22">1</span><span class="MJXp-mo" id="MJXp-Span-23" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">Q</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.802ex" height="2.66ex" viewBox="0 -832 18428.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4E" x="1278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="2166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="2833" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4E" x="3890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-22C5" x="5000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="5501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-43" x="5891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-44" x="6651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-48" x="7480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2B" x="8590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4C" x="9591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-46" x="10272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-48" x="11022" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="11910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2B" x="12522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="13523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4E" x="13912" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2212" x="15023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-31" x="16024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="16524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-22C5" x="17136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-51" x="17637" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> H (N) = N ‚ãÖ (CDH + LFH) + (N - 1) ‚ãÖ Q </script></p><br>  Para o kernel, os locais <i>X - H (N)</i> permanecem.  O tamanho total descompactado <i>S <sub>X</sub> (N)</i> √© igual ao tamanho de <i>N</i> c√≥pias do kernel descompactado com a propor√ß√£o <i>C</i> (neste modelo simplificado, ignoramos a pequena extens√£o adicional dos cabe√ßalhos de arquivos locais mencionados). <br><br><p><math> </math> $$ display $$ S_X (N) = (X - H (N)) CN \\ = (X - (N ‚ãÖ (CDH + LFH) + (N - 1) ‚ãÖ Q)) CN \\ = - (CDH + LFH + Q) CN ^ 2 + (X + Q) exibi√ß√£o CN $$ $$ </p><br>  S <sub>X</sub> (N) √© um polin√¥mio na parte N; portanto, o m√°ximo deve estar onde a derivada S ' <sub>X</sub> (N) √© igual a zero.  Tomar a derivada e encontrar zero nos d√° N <sub>OPT</sub> , o n√∫mero ideal de arquivos. <br><br><p><math> </math> $$ display $$ S‚Ä≤X (N_ {OPT}) = ‚àí2 (CDH + LFH + Q) C N_ {OPT} + (X + Q) C \\ 0 = ‚àí2 (CDH + LFH + Q) C N_ {OPT} + (X + Q) C \\ N_ {OPT} = (X + Q) / (CDH + LFH + Q) / 2 $$ exibi√ß√£o $$ </p><br>  <i>H (N <sub>OPT</sub> )</i> oferece a quantidade ideal de espa√ßo para colocar os cabe√ßalhos dos arquivos.  √â independente de CDH, LFH e C e est√° pr√≥ximo de <i>X / 2</i> . <br><br><p><math> </math> exibi√ß√£o $$ $$ H (N_ {OPT}) = N_ {OPT} ‚ãÖ (CDH + LFH) + (N_ {OPT} - 1) ‚ãÖ Q \\ = (X - Q) / 2 $$ exibi√ß√£o $$ </p><br>  S <sub>X</sub> (N <sub>OPT</sub> ) - tamanho total n√£o embalado na distribui√ß√£o ideal.  A partir disso, vemos que o tamanho da sa√≠da aumenta quadraticamente com o aumento dos dados de entrada. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-249"><span class="MJXp-msubsup" id="MJXp-Span-250"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-252" style="vertical-align: -0.4em;">X</span></span><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-254"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255" style="margin-right: 0.05em;">N</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-256" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">T</span></span></span><span class="MJXp-mo" id="MJXp-Span-260" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-261" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-262" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">X</span><span class="MJXp-mo" id="MJXp-Span-264" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">Q</span><span class="MJXp-msubsup" id="MJXp-Span-266"><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-268" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">C</span><span class="MJXp-mrow" id="MJXp-Span-270"><span class="MJXp-mo" id="MJXp-Span-271" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-272" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">H</span><span class="MJXp-mo" id="MJXp-Span-276" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">H</span><span class="MJXp-mo" id="MJXp-Span-280" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">Q</span><span class="MJXp-mo" id="MJXp-Span-282" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-283"><span class="MJXp-mo" id="MJXp-Span-284" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-285">4</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="48.954ex" height="3.021ex" viewBox="0 -987.6 21077.5 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-53" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-58" x="867" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1316" y="0"></use><g transform="translate(1705,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4E" x="0" y="0"></use><g transform="translate(803,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-50" x="763" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-54" x="1514" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="4178" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="4846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="5902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-58" x="6291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2B" x="7366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-51" x="8367" y="0"></use><g transform="translate(9158,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-43" x="10002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2F" x="10762" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="11263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-43" x="11652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-44" x="12413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-48" x="13241" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2B" x="14352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4C" x="15353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-46" x="16034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-48" x="16784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2B" x="17894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-51" x="18895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="19687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-2F" x="20076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-34" x="20577" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> S_X (N_ {OPT}) = (X + Q) ^ 2C / (CDH + LFH + Q) / 4 </script></p><br>  Aumentando o tamanho do arquivo zip, no final, encontraremos os limites do formato zip: o archive n√£o pode ter mais que 2 16-1 arquivos com um tamanho n√£o superior a 2 32-1 bytes cada.  Pior, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">algumas implementa√ß√µes</a> usam valores m√°ximos como um indicador da presen√ßa de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">extens√µes</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">64 bits</a> , portanto, nossos limites s√£o realmente 2 <sup>16</sup> ‚àí2 e 2 <sup>32</sup> ‚àí2.  Acontece que na primeira vez que encontramos um limite no tamanho de um arquivo n√£o compactado.  Com um tamanho de arquivo zip de 8 319 377 bytes, a otimiza√ß√£o ing√™nua fornecer√° o n√∫mero de arquivos 47 837 e o arquivo m√°ximo √© 2 <sup>32</sup> +311 11 bytes. <br><br>  (Na verdade, tudo √© um pouco mais complicado, porque os limites exatos dependem da implementa√ß√£o. O arquivo zip do Python <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ignora o</a> n√∫mero de arquivos, o archive / zip no Go <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">permite</a> aumentar o n√∫mero de arquivos at√© que correspondam aos 16 bits inferiores. Mas, para compatibilidade geral, devemos seguir limites estabelecidos). <br><br>  Se n√£o pudermos aumentar infinitamente o tamanho do <i>N</i> ou do kernel, gostar√≠amos de encontrar a taxa m√°xima de compacta√ß√£o no formato zip.  Voc√™ precisa tornar o kernel o maior poss√≠vel com o n√∫mero m√°ximo de arquivos.  Apesar de n√£o podermos mais manter uma separa√ß√£o aproximadamente uniforme entre o kernel e os cabe√ßalhos de arquivo, cada arquivo adicionado <i>ainda</i> aumenta a taxa de compacta√ß√£o - apenas n√£o t√£o r√°pido como se pud√©ssemos continuar aumentando o kernel.  De fato, √† medida que os arquivos s√£o adicionados, precisaremos <i>reduzir o</i> tamanho do kernel para liberar espa√ßo para o tamanho m√°ximo do arquivo, que cresce um pouco com cada arquivo adicionado. <br><br>  O plano leva a um arquivo zip com 2 16-2 arquivos e um kernel, que √© descompactado em 2 32-2 178 825 bytes.  Os arquivos ser√£o maiores no in√≠cio do arquivo zip - o primeiro e maior arquivo √© descompactado em 2 <sup>32 a</sup> 56 bytes.  Isso √© o mais pr√≥ximo poss√≠vel do uso dos par√¢metros de sa√≠da aproximados de bulk_deflate - codificar os 54 bytes finais custar√° mais do que seu tamanho (o arquivo zip como um todo tem uma taxa de compacta√ß√£o de 28 milh√µes e os 54 bytes finais receber√£o no m√°ximo 54 ‚ãÖ 10 <sup>32</sup> ‚ãÖ ( 2 <sup>16</sup> - 2)? 36? 5 milh√µes de bytes, portanto, isso s√≥ ajuda se 54 bytes puderem ser codificados em um byte - e eu n√£o puder codificar menos de dois.Portanto, se voc√™ n√£o puder codificar 54 bytes em 1 byte, apenas reduz a taxa de compress√£o).  O tamanho da sa√≠da desta bomba zip √© de 281.395.456.244.934 bytes, 99,97% do m√°ximo te√≥rico (2 <sup>32</sup> - 1) √ó (2 <sup>16</sup> - 1).  Qualquer melhoria significativa na taxa de compress√£o pode ser alcan√ßada apenas reduzindo o tamanho do sinal de entrada e n√£o aumentando a sa√≠da. <br><br><ul><li>  <a href="">zblg.zip</a> 10 MB ‚Üí 281 TB </li></ul><pre>  zipbomb --mode = quoted_overlap --num-files = 65534 --max-uncompressed-size = 4292788525&gt; zblg.zip </pre><br><h1>  Computa√ß√£o CRC-32 eficiente </h1><br>  Entre os metadados no cabe√ßalho do diret√≥rio central e no cabe√ßalho do arquivo local, est√° uma soma de verifica√ß√£o dos dados do arquivo n√£o compactado - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CRC-32</a> .  Isso representa um problema porque a quantidade de c√°lculos de CRC-32 para cada arquivo √© proporcional ao seu tamanho, que √© muito grande por padr√£o (afinal, √© uma bomba compactada).  Preferimos fazer um trabalho que seja pelo menos proporcional ao tamanho do arquivo morto.  Dois fatores funcionam a nosso favor: todos os arquivos t√™m um n√∫cleo comum e um kernel n√£o compactado √© uma sequ√™ncia de bytes repetidos.  Vamos imaginar o CRC-32 como um produto matricial - isso permitir√° n√£o apenas calcular rapidamente a soma de verifica√ß√£o do kernel, mas tamb√©m reutilizar os c√°lculos entre os arquivos.  O m√©todo descrito nesta se√ß√£o √© uma pequena extens√£o da fun√ß√£o <a href="">crc32_combine</a> no zlib, que Mark Adler explica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  O CRC-32 pode ser modelado como uma m√°quina de estado, atualizando um registro de estado de 32 bits para cada bit de entrada.  As opera√ß√µes b√°sicas de atualiza√ß√£o para os bits 0 e 1 s√£o: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">uint32 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crc32_update_0</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(uint32 state)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Shift out the least significant bit. bit b = state &amp; 1; state = state &gt;&gt; 1; // If the shifted-out bit was 1, XOR with the CRC-32 constant. if (b == 1) state = state ^ 0xedb88320; return state; } uint32 crc32_update_1(uint32 state) { // Do as for a 0 bit, then XOR with the CRC-32 constant. return crc32_update_0(state) ^ 0xedb88320; }</span></span></code> </pre> <br>  Se voc√™ representa o registro de estado como um vetor bin√°rio de 32 elementos e usa o XOR para adi√ß√£o e multiplica√ß√£o, <code>crc32_update_0</code> √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mapeamento linear</a> ;  isto √©, pode ser representado como uma multiplica√ß√£o por uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">matriz de transi√ß√£o</a> bin√°ria 32 √ó 32.  Para entender o porqu√™, observe que multiplicar uma matriz por um vetor √© simplesmente adicionar as colunas da matriz depois de multiplicar cada coluna pelo elemento correspondente do vetor.  O <code>state &gt;&gt; 1</code> opera√ß√£o shift <code>state &gt;&gt; 1</code> simplesmente pega cada bit <i>i</i> do vetor de estado e o multiplica por um vetor que √© zero em qualquer lugar, exceto pelo bit <i>i</i> -1 (numerando os bits da direita para a esquerda).  Relativamente falando, o <code>state ^ 0xedb88320</code> XOR final <code>state ^ 0xedb88320</code> ocorre apenas quando o bit <code>b</code> √© igual a um.  Isso pode ser representado como a primeira multiplica√ß√£o de b por 0xedb88320 e, em seguida, XOR para esse estado. <br><br>  Al√©m disso, <code>crc32_update_1</code> √© apenas uma <code>crc32_update_0</code> mais (XOR).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso faz </font></font><code>crc32_update_1</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uma transforma√ß√£o afim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : multiplica√ß√£o da matriz seguida de mapeamento (isto √©, adi√ß√£o de vetor). Podemos imaginar a multiplica√ß√£o e o mapeamento da matriz em uma √∫nica etapa, se aumentarmos o tamanho da matriz de transforma√ß√£o para 33 √ó 33 e adicionarmos um elemento adicional ao vetor de estado, que √© sempre 1 (essa representa√ß√£o √© chamada de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordenadas homog√™neas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><img src="https://habrastorage.org/webt/sg/ay/or/sgayorbdqetnkmc1y-qm42uywic.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As matrizes de transforma√ß√£o s√£o 33 √ó 33 M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que calculam a mudan√ßa de estado CRC-32 feita pelos bits 0 e 1, respectivamente. Os vetores da coluna s√£o armazenados com o bit mais significativo abaixo: lendo a primeira coluna de baixo para cima, voc√™ v√™ a constante polinomial CRC-32 edb8832016 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">111</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">111</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 000 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 00000 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 00 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 00000 </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essas duas matrizes diferem apenas na coluna final, que representa o vetor de convers√£o em coordenadas homog√™neas. Em M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0, a</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transla√ß√£o √© zero e em M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© edb88320 </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a constante polinomial √© CRC-32. As unidades s√£o imediatamente acima do estado da diagonal da opera√ß√£o</font></font><code>state &gt;&gt; 1</code></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ambas as opera√ß√µes</font></font><code>crc32_update_0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font><code>crc32_update_1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode ser representado pela matriz de transi√ß√£o de 33 √ó 33. As matrizes M</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e M</font><sub><font style="vertical-align: inherit;"> 1</font></sub><font style="vertical-align: inherit;"> s√£o mostradas.</font></font><sub><font style="vertical-align: inherit;"></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A vantagem da representa√ß√£o da matriz √© que as matrizes podem ser multiplicadas. </font><font style="vertical-align: inherit;">Suponha que desejamos ver uma mudan√ßa de estado feita processando um caractere ASCII 'a', cuja representa√ß√£o bin√°ria √© 01100001 </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Podemos imaginar a mudan√ßa cumulativa no estado do CRC-32 desses oito bits em uma matriz de transforma√ß√£o:</font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-286"><span class="MJXp-msubsup" id="MJXp-Span-287"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-289" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-291"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-293" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-294"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-296" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-297"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-299" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-300"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-302" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-305" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-306"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-308" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-311" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-312"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-314" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.921ex" height="2.419ex" viewBox="0 -780.1 14174.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="1722" y="0"></use><g transform="translate(2778,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-30" x="1372" y="-213"></use></g><g transform="translate(4203,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-31" x="1372" y="-213"></use></g><g transform="translate(5627,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-31" x="1372" y="-213"></use></g><g transform="translate(7052,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-30" x="1372" y="-213"></use></g><g transform="translate(8476,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-30" x="1372" y="-213"></use></g><g transform="translate(9901,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-30" x="1372" y="-213"></use></g><g transform="translate(11325,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-30" x="1372" y="-213"></use></g><g transform="translate(12749,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-31" x="1372" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6">M_a = M_0 M_1 M_1 M_0 M_0 M_0 M_0 M_1</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E podemos imaginar uma mudan√ßa no estado de uma linha repetindo 'a' multiplicando muitas c√≥pias de M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - elevando a matriz a uma pot√™ncia. </font><font style="vertical-align: inherit;">Podemos fazer isso rapidamente usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo r√°pido exponencia√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que permite calcular a M </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basta ligar </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></sub> <sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passos. </font><font style="vertical-align: inherit;">Por exemplo, aqui est√° uma matriz para alterar o estado de uma sequ√™ncia de 9 caracteres 'a':</font></font><br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-315"><span class="MJXp-mo" id="MJXp-Span-316" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-317"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-319" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-320"><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-322" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-323" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-324"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-326" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-327"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-329" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-330"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-332" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-333"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-335" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-336"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-338" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-339"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-341" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-342"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-344" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><span class="MJXp-msubsup" id="MJXp-Span-345"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-347" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span></span><font style="vertical-align: inherit;"><span class="MJXp-msubsup" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">M </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-350" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-345"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">M </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-345"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-347" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">a </font></span></span></font><span class="MJXp-msubsup" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-350" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span><span class="MJXp-mspace" id="MJXp-Span-351" style="width: 0em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-352" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-353" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-354"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-356" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-357"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-359" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-360"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-362" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-363"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-365" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-366"><span class="MJXp-mo" id="MJXp-Span-367" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-368" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-371" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mspace" id="MJXp-Span-372" style="width: 0em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-373" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-374" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-376"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-378" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-379"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-381" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-382"><span class="MJXp-mo" id="MJXp-Span-383" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-384" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-385"><span class="MJXp-mo" id="MJXp-Span-386" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-387" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-390" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-mspace" id="MJXp-Span-391" style="width: 0em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-392" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-393" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-394" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-395" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-396"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-398" style="vertical-align: -0.4em;">a</span></span><span class="MJXp-msubsup" id="MJXp-Span-399"><span class="MJXp-mo" id="MJXp-Span-400" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-401" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-402"><span class="MJXp-mo" id="MJXp-Span-403" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-404" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-405"><span class="MJXp-mo" id="MJXp-Span-406" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-407" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-408"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409" style="margin-right: 0.05em;">M</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-410" style="vertical-align: -0.4em;">a</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="93.735ex" height="13.985ex" viewBox="0 -987.6 40358 6021.4" role="img" focusable="false" style="vertical-align: -11.691ex; max-width: 778px;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(11670,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(1834,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-39" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="2955" y="0"></use><g transform="translate(4011,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(5456,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(6901,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(8346,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(9791,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(11236,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(12681,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(14126,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(15571,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g></g><g transform="translate(15422,-1567)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1056" y="0"></use><g transform="translate(1445,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(2890,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(4335,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(5780,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(7225,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(8068,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g></g><g transform="translate(16250,-3133)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1445" y="0"></use><g transform="translate(1835,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(3280,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(4725,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(5568,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(6411,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g></g><g transform="translate(16356,-4699)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-28" x="1835" y="0"></use><g transform="translate(2224,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g><g transform="translate(3669,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(4513,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(5356,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMAIN-32" x="550" y="583"></use></g><g transform="translate(6199,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/459254/&amp;usg=ALkJrhheRZAa56ojtqFUj4eOBfrahCpbYg#MJMATHI-61" x="1372" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-7">(M_a)^9 = M_a M_a M_a M_a M_a M_a M_a M_a M_a\\ = (M_a M_a M_a M_a)^2 M_a\\ = ((M_a M_a)^2)^2 M_a\\ = (((M_a)^2)^2)^2 M_a</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O algoritmo de multiplica√ß√£o r√°pida da matriz √© √∫til para calcular o </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kernel</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> M </font><font style="vertical-align: inherit;">, uma matriz para um kernel n√£o compactado, j√° que o kernel √© uma sequ√™ncia de bytes repetidos. Para obter a soma de verifica√ß√£o CRC-32 da matriz, multiplique a matriz pelo vetor zero (o vetor zero est√° em coordenadas uniformes, que s√£o 32 zeros e depois na unidade; aqui omitimos a ligeira complica√ß√£o do pr√© e p√≥s-processamento da soma de verifica√ß√£o para verificar a conformidade). Para calcular a soma de verifica√ß√£o para cada arquivo, trabalhamos na dire√ß√£o oposta. Come√ßamos inicializando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M: = M </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kernel</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A soma de verifica√ß√£o do kernel tamb√©m √© a soma de verifica√ß√£o do arquivo final </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , portanto multiplicamos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um vector zero e a soma de verifica√ß√£o armazena recebido no CDH </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e LFH </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Os dados do arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N-1 s√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iguais aos dados do arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas com o prefixo LFH </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adicionado </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Portanto, calculamos</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-411"><span class="MJXp-msubsup" id="MJXp-Span-412"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-414" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mrow" id="MJXp-Span-416"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-418"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-420" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , matriz de mudan√ßa de estado para LFH</font><sub><font style="vertical-align: inherit;">N</font></sub><font style="vertical-align: inherit;">e atualiza√ß√£o</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8">M_{L{FH_N}}</script><font style="vertical-align: inherit;"></font><sub><font style="vertical-align: inherit;"></font></sub><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-421"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mo" id="MJXp-Span-423" style="margin-left: 0.111em; margin-right: 0.167em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-425"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-427" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mrow" id="MJXp-Span-429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-431"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-433" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9">M := M M_{L{FH_N}}</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> representa a mudan√ßa cumulativa de estado do tratamento com LFH </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atr√°s do n√∫cleo. </font><font style="vertical-align: inherit;">Calculamos a soma de verifica√ß√£o para o arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N - 1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , multiplicando novamente </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pelo vetor zero. </font><font style="vertical-align: inherit;">Continuamos o procedimento acumulando matrizes de mudan√ßa de estado em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at√© que todos os arquivos sejam processados.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extens√£o: Zip64 </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anteriormente, enfrentamos o problema de expans√£o devido a limita√ß√µes do formato zip - era imposs√≠vel emitir mais de 281 TB, independentemente da qualidade da compacta√ß√£o do arquivo zip. </font><font style="vertical-align: inherit;">Voc√™ pode transcender esses limites usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zip64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, uma extens√£o de formato zip que aumenta o tamanho de alguns campos de cabe√ßalho para 64 bits. O suporte ao Zip64 n√£o √© universal, mas √© uma das extens√µes mais comumente implementadas. Quanto √† taxa de compacta√ß√£o, o efeito do Zip64 √© aumentar o tamanho do cabe√ßalho do diret√≥rio central de 46 para 58 bytes e o tamanho do cabe√ßalho do diret√≥rio local de 30 para 50 bytes. Observando a f√≥rmula ideal do coeficiente de expans√£o em um modelo simplificado, vemos que a bomba zip no formato Zip64 ainda cresce quadraticamente, mas mais lentamente devido ao denominador maior - isso pode ser visto no diagrama abaixo. Devido √† perda de compatibilidade e retardo de crescimento, removemos quase todas as restri√ß√µes no tamanho do arquivo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suponha que precisamos de uma bomba zip que se expanda para 4,5 PB, como 42.zip. </font><font style="vertical-align: inherit;">Qual o tamanho do arquivo? </font><font style="vertical-align: inherit;">Usando a pesquisa bin√°ria, descobrimos que o tamanho m√≠nimo de um arquivo √© 46 MB.</font></font><br><br><ul><li> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zbxl.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 46 MB ‚Üí 4.5 PB (Zip64, menos compat√≠vel)</font></font></li></ul><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zipbomb --mode = quoted_overlap --num-files = 190023 --compressed-size = 22982788 --zip64&gt; zbxl.zip </font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4,5 petabytes - aproximadamente a </font><font style="vertical-align: inherit;">mesma </font><font style="vertical-align: inherit;">quantidade de dados foi registrada pelo Event Horizon Telescope para a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeira imagem de um buraco negro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : racks e racks com discos r√≠gidos no data center. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com o Zip64, quase n√£o √© interessante considerar a taxa m√°xima de compacta√ß√£o, porque podemos simplesmente continuar aumentando o tamanho do arquivo zip e a taxa de compacta√ß√£o, at√© que at√© o arquivo zip compactado se torne proibitivo. Um limite interessante, no entanto, √© de 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bytes (18 EB ou 16 EiB) - muitos dados n√£o cabem na maioria dos sistemas de arquivos. A pesquisa bin√°ria encontra a menor bomba zip que produz pelo menos a mesma quantidade: cont√©m 12 milh√µes de arquivos e um n√∫cleo compactado de 1,5 GB. O tamanho total do arquivo zip √© 2,9 GB e √© descompactado em 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+11 727 895 877 bytes com uma taxa de compress√£o superior a 6,2 bilh√µes para um. </font><font style="vertical-align: inherit;">N√£o enviei este arquivo para download, mas voc√™ pode ger√°-lo usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo-fonte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ele possui arquivos de tamanho que at√© um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi revelado </font><font style="vertical-align: inherit;">no Info-ZIP UnZip 6.0.</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zipbomb --mode = quoted_overlap --num-files = 12056313 --compressed-size = 1482284040 --zip64&gt; zbxxl.zip </font></font></pre><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extens√£o: bzip2 </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEFLATE √© o algoritmo de compacta√ß√£o mais comum para o formato zip, mas essa √© apenas uma das muitas op√ß√µes. Provavelmente o segundo algoritmo mais comum √© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bzip2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Embora n√£o seja t√£o compat√≠vel quanto DEFLATE. Teoricamente, no bzip2, a taxa de compress√£o m√°xima √© de cerca de 1,4 milh√£o para um, o que permite um empacotamento mais denso do n√∫cleo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O bzip2 codifica primeiro a "codifica√ß√£o de comprimento de execu√ß√£o", reduzindo o comprimento da string de bytes repetidos em 51 vezes. Em seguida, os dados s√£o divididos em blocos de 900 KB e cada bloco √© compactado separadamente. Teoricamente, um bloco pode compactar at√© 32 bytes. 900 000 √ó 51/32 = 1 434 375. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ignorando a perda de compatibilidade, o bzip2 produz uma bomba mais eficaz?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sim - mas apenas para arquivos pequenos. O problema √© que no bzip2 n√£o h√° nada como os blocos DEFLATE descompactados que usamos para citar os cabe√ßalhos dos arquivos locais. Portanto, √© imposs√≠vel sobrepor arquivos e reutilizar o kernel - para cada arquivo voc√™ precisa escrever sua pr√≥pria c√≥pia, para que a taxa de compacta√ß√£o geral n√£o seja melhor que a taxa de um √∫nico arquivo. No gr√°fico abaixo, vemos que, sem sobreposi√ß√£o, o bzip2 √© superior a DEFLATE apenas para arquivos com tamanho de megabytes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√° apenas uma esperan√ßa de um meio alternativo de citar cabe√ßalhos no bzip2, que ser√° discutido na pr√≥xima se√ß√£o. Al√©m disso, se voc√™ souber que um analisador zip espec√≠fico suporta bzip2 </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite nomes de arquivos incompat√≠veis, voc√™ pode usar a constru√ß√£o de sobreposi√ß√£o completa, que n√£o precisa ser citada. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/350/bb1/aa1/350bb1aa131f71762b2ad03d4203ac66.svg"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compara√ß√£o da taxa de compress√£o de diferentes bombas zip. Preste aten√ß√£o ao eixo logar√≠tmico. Cada design √© mostrado com e sem Zip64. Estruturas sem sobreposi√ß√£o t√™m uma taxa de crescimento linear, que pode ser vista a partir da raz√£o constante dos eixos. O deslocamento vertical do gr√°fico bzip2 significa que a taxa de compress√£o do bzip2 √© cerca de mil vezes maior que a do DEFLATE. As constru√ß√µes DEFLATE citadas t√™m uma taxa de crescimento quadr√°tica, como evidenciado por uma inclina√ß√£o nos eixos 2: 1. A variante Zip64 √© um pouco menos eficaz, mas permite mais de 281 TB. Os gr√°ficos para bzip2 com aspas atrav√©s de um campo adicional passam de quadr√°tico para linear quando o tamanho m√°ximo do arquivo √© atingido (2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -2 bytes) ou o n√∫mero m√°ximo permitido de arquivos</font></font></font></i> <br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extens√£o: citando atrav√©s de um campo adicional </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At√© o momento, usamos a fun√ß√£o DEFLATE para citar os cabe√ßalhos dos arquivos locais e vimos que esse truque n√£o funciona no bzip2. </font><font style="vertical-align: inherit;">No entanto, existe um m√©todo de cita√ß√£o alternativo, um pouco mais limitado, que usa apenas fun√ß√µes no formato zip e √© independente do algoritmo de compacta√ß√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No final da estrutura do cabe√ßalho do arquivo local, h√° </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um campo adicional de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tamanho vari√°vel para armazenar informa√ß√µes que n√£o se encaixam nos campos comuns do cabe√ßalho ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APPNOTE.TXT, se√ß√£o 4.3.7</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Informa√ß√µes adicionais podem incluir, por exemplo, um carimbo de data / hora ou uid / gid do Unix. </font><font style="vertical-align: inherit;">As informa√ß√µes do Zip64 tamb√©m s√£o armazenadas em um campo adicional. </font><font style="vertical-align: inherit;">Um campo adicional √© representado como uma estrutura de valor-comprimento; </font><font style="vertical-align: inherit;">se voc√™ aumentar o tamanho sem adicionar um valor, o campo adicional incluir√° o que est√° por tr√°s dele no arquivo zip, ou seja, o pr√≥ximo cabe√ßalho do arquivo local. </font><font style="vertical-align: inherit;">Usando esse m√©todo, cada cabe√ßalho do arquivo local pode "citar" os seguintes cabe√ßalhos, colocando-os em seu pr√≥prio campo adicional. </font><font style="vertical-align: inherit;">Comparado ao DEFLATE, existem tr√™s vantagens:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A cita√ß√£o atrav√©s de um campo extra requer apenas 4 bytes, n√£o 5, deixando mais espa√ßo para o kernel. </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N√£o aumenta o tamanho do arquivo, o que significa um kernel maior, dadas as limita√ß√µes do formato zip. </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ele fornece cita√ß√µes no bzip2. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apesar dessas vantagens, a cita√ß√£o atrav√©s de campos adicionais √© menos flex√≠vel. Isso n√£o √© uma cadeia, como em DEFLATE: cada cabe√ßalho de um arquivo local deve conter n√£o apenas o cabe√ßalho imediatamente a seguir, mas tamb√©m </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> os cabe√ßalhos subsequentes. Campos adicionais aumentam √† medida que voc√™ se aproxima do in√≠cio do arquivo zip. Uma vez que o comprimento do campo m√°xima √© de 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1 bytes podem citar apenas at√© 1808 cabe√ßalho do ficheiro local (ou 1170 em Zip64), sugerindo que os nomes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atribu√≠dos, como esperado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(no caso de DEFLATE, voc√™ pode usar um campo adicional para citar os primeiros (mais curtos) cabe√ßalhos dos arquivos locais e depois mudar para citar DEFLATE para os demais). Outro problema: para corresponder √† estrutura de dados interna do campo adicional, √© necess√°rio selecionar um tag de 16 bits para o tipo ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APPNOTE.TXT, se√ß√£o 4.5.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) que precede os dados de cita√ß√£o. Queremos selecionar uma tag de tipo que fa√ßa com que os analisadores ignorem os dados entre aspas, em vez de tentar interpret√°-los como metadados significativos. Os analisadores de zip devem ignorar as tags de um tipo desconhecido, para que possamos selecion√°-las aleatoriamente, mas existe o risco de que, no futuro, alguma tag viole a compatibilidade do design.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O diagrama anterior ilustra a possibilidade de usar campos adicionais no bzip2, ce sem o Zip64. Nos dois gr√°ficos, h√° um ponto de virada, quando o crescimento passa de quadr√°tico para linear. Sem o Zip64, isso acontece quando o tamanho m√°ximo do arquivo descompactado √© atingido (2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-2 bytes); </font><font style="vertical-align: inherit;">s√≥ √© poss√≠vel aumentar o n√∫mero de arquivos, mas n√£o o tamanho. </font><font style="vertical-align: inherit;">O gr√°fico termina completamente quando o n√∫mero de arquivos atinge 1809, ent√£o o espa√ßo em um campo adicional √© insuficiente para citar cabe√ßalhos adicionais. </font><font style="vertical-align: inherit;">Com o Zip64, ocorre uma fratura nos arquivos 1171, ap√≥s os quais apenas o tamanho do arquivo pode ser aumentado, mas n√£o o n√∫mero. </font><font style="vertical-align: inherit;">Um campo adicional ajuda no caso de DEFLATE, mas a diferen√ßa √© t√£o pequena que n√£o √© visualmente percept√≠vel. </font><font style="vertical-align: inherit;">Aumenta a taxa de compacta√ß√£o de zbsm.zip em 1,2%; </font><font style="vertical-align: inherit;">zblg.zip em 0,019%; </font><font style="vertical-align: inherit;">e zbxl.zip em 0,0025%.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A discuss√£o </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seu trabalho sobre esse assunto, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pletz e colegas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usam a sobreposi√ß√£o de arquivos para criar um arquivo zip quase auto-replicante. A sobreposi√ß√£o do arquivo foi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sugerida anteriormente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (slide 47) por Ginvael Coldwind. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvemos um design de uma bomba zip com uma sobreposi√ß√£o de cota√ß√£o, levando em considera√ß√£o a compatibilidade - v√°rias diferen√ßas nas implementa√ß√µes, algumas das quais s√£o mostradas na tabela abaixo. O design resultante √© compat√≠vel com analisadores zip que funcionam da maneira usual, ou seja, primeiro verificando o diret√≥rio central e usando-o como um √≠ndice de arquivos. Entre eles, um analisador de zip exclusivo da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que √© gerado automaticamente a partir da gram√°tica formal. No entanto, o design √© incompat√≠vel com os analisadores de "streaming", que analisam o arquivo zip do in√≠cio ao fim em uma passagem sem primeiro ler o diret√≥rio central. Por sua natureza, os analisadores de streaming n√£o permitem a sobreposi√ß√£o de arquivos. Provavelmente, eles extrair√£o apenas o primeiro arquivo. Al√©m disso, eles podem at√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerar um</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erro, como √© o caso do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">sunzip</font></a><font style="vertical-align: inherit;"> , que analisa o diret√≥rio central no final e verifica a consist√™ncia com os cabe√ßalhos dos arquivos locais que ele j√° viu.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ deseja que os arquivos extra√≠dos iniciem com um prefixo espec√≠fico diferente dos bytes do cabe√ßalho do arquivo local, √© poss√≠vel inserir um bloco DEFLATE antes do bloco descompactado que o cabe√ßalho a seguir cita. Nem todos os arquivos no arquivo zip devem participar da cria√ß√£o da bomba: voc√™ pode incluir arquivos comuns no arquivo, se necess√°rio, para corresponder a algum formato especial (existe um par√¢metro no c√≥digo-fonte </font></font><code>--template</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para este caso de uso). Muitos formatos usam o zip como um cont√™iner, como documentos Java JAR, Android APK e LibreOffice. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de muitas maneiras semelhantes ao zip. Ele possui uma tabela de refer√™ncia cruzada no final do arquivo que aponta para objetos anteriores e suporta a compacta√ß√£o de objetos por meio do filtro FlateDecode. Eu n√£o tentei, mas voc√™ pode usar a id√©ia de citar com sobreposi√ß√£o para fazer uma bomba em PDF. Talvez voc√™ nem precise trabalhar duro aqui: binaryhax0r </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escreve em um post no blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que voc√™ pode simplesmente especificar v√°rias camadas FlateDecode em um objeto, ap√≥s o qual a cria√ß√£o de uma bomba PDF se torna trivial. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â f√°cil definir uma classe espec√≠fica de bombas zip descritas neste artigo: basta encontrar os arquivos sobrepostos. Mark Adler escreveu um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">patch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para descompactar Info-ZIP, o que faz exatamente isso. </font><font style="vertical-align: inherit;">No entanto, em geral, o bloqueio de arquivos sobrepostos n√£o protege contra todas as classes de bombas compactas. </font><font style="vertical-align: inherit;">√â dif√≠cil prever com anteced√™ncia se o arquivo √© uma bomba zip ou n√£o, se voc√™ n√£o tiver um conhecimento preciso sobre os componentes internos dos analisadores que ser√£o usados ‚Äã‚Äãpara analis√°-lo. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observar os cabe√ßalhos e somar os campos "tamanho n√£o compactado" de todos os arquivos n√£o funciona</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque o valor nos cabe√ßalhos pode n√£o corresponder ao tamanho real n√£o compactado (na tabela de compatibilidade, consulte a linha "permite que o arquivo seja muito pequeno"). </font><font style="vertical-align: inherit;">A prote√ß√£o confi√°vel contra bombas zip inclui limites de tempo, mem√≥ria e espa√ßo em disco no analisador zip durante sua opera√ß√£o. </font><font style="vertical-align: inherit;">Fa√ßa uma an√°lise de arquivos zip, como qualquer opera√ß√£o complexa com dados n√£o confi√°veis, com cuidado.</font></font><br><br><div class="scrollable-table"><table><thead><tr><td></td><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Info-zip </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnZip 6.0</font></font></a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Python 3.7 <br> zipfile</a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Go 1.12 <br> archive/zip</a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">yauzl 2.10.0 <br> (Node.js)</a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Nail <br> examples/zip</a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Android 9.0.0 r1 <br> libziparchive</a> </th><th> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sunzip 0.4</a> <br> (streaming) </th></tr></thead><tbody><tr><th> DEFLATE </th><td>  ‚úì </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td></tr><tr><th> Zip64 </th><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚úì</a> </td></tr><tr><th> bzip2 </th><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚úì</a> </td></tr><tr><th>     </th><td>  </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚àí</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚úì</a> </td></tr><tr><th>   CRC-32 </th><td> <abbr title="mostra o CRC esperado e real"></abbr> </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚àí</a> </td><td> <a href=""> </a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚àí</a> </td></tr><tr><th>      </th><td>  ‚úì </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td><td> <a href="">‚àí</a> </td></tr><tr><th>  2 <sup>32</sup> ‚àí1  </th><td>  ‚úì </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚àí</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td></tr><tr><th>  2 <sup>16</sup> ‚àí1  </th><td>  ‚úì </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚àí</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td><td> <a href="">‚úì</a> </td></tr></tbody><tbody><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">overlap.zip</a> </th><td>  </td><td> ‚àí </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td> ‚àí </td><td> ‚àí </td></tr><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">zbsm.zip  zblg.zip</a> </th><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td> ‚àí </td></tr><tr><th>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">zbxl.zip</a> </th><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td>  ‚úì </td><td> ‚àí </td><td> ‚àí </td><td> ‚àí </td></tr></tbody></table></div><br> <i><font color="gray">    zip-,    ,     zip-.      DEFLATE  Zip64,          ,    CRC     32-  16- .</font></i> <br><br><h1>  Agradecimentos </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agradecemos a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mark Adler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Russ Cox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brandon Enright</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marek Maykovsky</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Josh Wolfe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e os revisores do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USENIX WOOT 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por coment√°rios sobre o rascunho deste artigo. </font><font style="vertical-align: inherit;">Kaolan McNamara avaliou o impacto das bombas zip na seguran√ßa do LibreOffice. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma vers√£o deste artigo foi preparada para o Workshop </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USENIX WOOT 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O c√≥digo fonte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° dispon√≠vel. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os artefatos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para apresenta√ß√£o no workshop est√£o no arquivo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zipbomb-woot19.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ encontrou um sistema que lan√ßa uma das bombas? </font><font style="vertical-align: inherit;">As bombas o ajudaram a encontrar um bug ou ganhar dinheiro em um programa de busca de bug? </font><font style="vertical-align: inherit;">Deixe-me saber, vou tentar mencionar aqui.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LibreOffice 6.1.5.2 </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s renomear zblg.zip para zblg.odt ou zblg.docx, o LibreOffice cria e exclui uma s√©rie de arquivos tempor√°rios de aproximadamente 4 GB, tentando determinar o formato do arquivo. </font><font style="vertical-align: inherit;">Por fim, ele acaba fazendo isso e exclui os arquivos tempor√°rios √† medida que eles chegam, portanto a bomba zip causa apenas um DoS tempor√°rio sem encher o disco. </font><font style="vertical-align: inherit;">Kaolan McNamara respondeu √† minha mensagem de erro.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mozilla addons-server 2019.06.06 </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentei compactar bombas contra a instala√ß√£o local do servidor de addons, que faz parte do software addons.mozilla.org. </font><font style="vertical-align: inherit;">O sistema lida com a bomba graciosamente, impondo um limite de tempo de 110 segundos na extra√ß√£o de arquivos. </font><font style="vertical-align: inherit;">A bomba zip se expande rapidamente, tanto quanto o disco permite at√© esse limite de tempo, mas o processo √© interrompido e os arquivos descompactados s√£o limpos automaticamente.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Descompacte 6.0 </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mark Adler escreveu um patch para o UnZip para detectar essa classe de bombas zip. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 de julho de 2019: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Observei</font></a><font style="vertical-align: inherit;"> que o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CVE-2019-13232 foi atribu√≠do ao UnZip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Pessoalmente, eu argumentaria que a capacidade / incapacidade do UnZip (ou de qualquer analisador de zip) de processar esse tipo de bomba zip √© necessariamente uma vulnerabilidade ou mesmo um bug. Esta √© uma implementa√ß√£o natural que n√£o viola a especifica√ß√£o, o que posso dizer. O tipo de bomba neste artigo √© apenas um tipo e existem muitas outras maneiras de decifrar um analisador de zip. Como mencionado acima, se voc√™ deseja se proteger de ataques de exaust√£o de recursos, n√£o tente listar, detectar e bloquear todos os ataques conhecidos; em vez disso, √© necess√°rio estabelecer restri√ß√µes externas de tempo e outros recursos para que o analisador n√£o entre nessa situa√ß√£o, independentemente do tipo de ataque encontrado. N√£o h√° nada errado em tentar detectar e rejeitar determinados projetos como uma otimiza√ß√£o da primeira passagem,mas voc√™ n√£o pode parar por a√≠. A menos que voc√™ acabe isolando e restringindo opera√ß√µes com dados n√£o confi√°veis, seu sistema provavelmente ainda estar√° vulner√°vel. Considere a analogia com o script entre sites em HTML: a prote√ß√£o certa n√£o √© tentar filtrar bytes espec√≠ficos que podem ser interpretados como c√≥digo, mas evitar tudo corretamente.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mecanismos antiv√≠rus </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O usu√°rio do Twitter @TVqQAAMAAAAEAAA </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : "O antiv√≠rus McAfee na minha m√°quina de teste simplesmente explodiu". </font><font style="vertical-align: inherit;">Eu mesmo n√£o testei e n√£o tenho detalhes como o n√∫mero da vers√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tavis Ormandi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VirusTotal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tem v√°rios tempos limite </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">para o zblg.zip</font></a><font style="vertical-align: inherit;"> ( </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">captura de tela de 6 de junho de 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): AhnLab-V3, ClamAV, DrWeb, Endgame, F-Secure, GData, K7AntiVirus, K7GW, MaxSecure, McAfee, McAfee-GW - Edi√ß√£o, Panda, Qihoo-360, Sophos ML, VBA32. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados para zbsm.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">captura de tela de 6 de junho de 2019)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) s√£o semelhantes, mas com um conjunto diferente de mecanismos de tempo limite: Baido, Bkav, ClamAV, CMC, DrWeb, Endgame, ESET-NOD32, F-Secure, GData, Kingsoft, McAfee-GW-Edition, NANO-Antiv√≠rus, Acronis. </font><font style="vertical-align: inherit;">Curiosamente, </font><font style="vertical-align: inherit;">n√£o h√° tempos limite </font><font style="vertical-align: inherit;">nos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados do zbxl.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">captura de tela de 6 de junho de 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Talvez alguns antiv√≠rus n√£o sejam compat√≠veis com o Zip64? </font><font style="vertical-align: inherit;">V√°rios mecanismos detectam arquivos como uma esp√©cie de "bomba de compress√£o". </font><font style="vertical-align: inherit;">√â interessante ver se eles continuar√£o fazendo isso com pequenas altera√ß√µes, como alterar nomes de arquivos ou adicionar um prefixo ASCII a cada arquivo.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Declara√ß√£o final </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â hora de acabar com o Facebook. </font><font style="vertical-align: inherit;">Este n√£o √© um trabalho neutro para voc√™: todos os dias, quando chega ao trabalho, est√° fazendo algo errado. </font><font style="vertical-align: inherit;">Se voc√™ possui uma conta no Facebook, exclua-a. </font><font style="vertical-align: inherit;">Se voc√™ trabalha no Facebook, seja demitido. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E n√£o esque√ßa que a Ag√™ncia de Seguran√ßa Nacional deve ser destru√≠da.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt459254/">https://habr.com/ru/post/pt459254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt459244/index.html">Gerente de produto do Notes: comportamento do usu√°rio nas p√°ginas dos jogos na loja de aplicativos. Quanto tempo leva para baixar um jogo</a></li>
<li><a href="../pt459246/index.html">Por que a convers√£o do site est√° diminuindo? Exemplos de 60 erros de design e usabilidade</a></li>
<li><a href="../pt459248/index.html">Eventos digitais em Moscou, de 9 a 14 de julho</a></li>
<li><a href="../pt459250/index.html">WAL no PostgreSQL: 2. Log de pr√©-registro</a></li>
<li><a href="../pt459252/index.html">Semana 28 de Seguran√ßa: invadindo uma casa inteligente</a></li>
<li><a href="../pt459256/index.html">Como otimizamos nosso Hospital Tem√°tico para diferentes plataformas</a></li>
<li><a href="../pt459258/index.html">14.000 milhas n√£o gancho</a></li>
<li><a href="../pt459262/index.html">Aposentado aos 22</a></li>
<li><a href="../pt459264/index.html">Saindo das redes Tarantool. Sincroniza√ß√£o de n√≥ ao filtrar o tr√°fego</a></li>
<li><a href="../pt459272/index.html">Escrevendo uma API para componentes React, parte 1: n√£o crie objetos conflitantes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>