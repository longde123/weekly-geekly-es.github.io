<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๐ผ ๐ง ุงุฐูุจ ุขููุงุช ุงูุชุฎุตูุต ๐๐ป ๐ด๐ฝ ๐ฌ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏูุง ุญุงููุช ูุฃูู ูุฑุฉ ุฃู ุฃููู ููู ุชุนูู ุฃุฏูุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู Go ุ ูุฅู ูุง ุฃุฑุฏุช ุงูุชุนุงูู ูุนู ุจุฏุง ููุฃูู ุตูุฏูู ุฃุณูุฏ ุบุงูุถ. ููุง ูู ุงูุญุงู ูุน ุฃู ุชูููุฉ ุฃุฎุฑู ุ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุฐูุจ ุขููุงุช ุงูุชุฎุตูุต</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/442648/" style=";text-align:right;direction:rtl">  ุนูุฏูุง ุญุงููุช ูุฃูู ูุฑุฉ ุฃู ุฃููู ููู ุชุนูู ุฃุฏูุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู Go ุ ูุฅู ูุง ุฃุฑุฏุช ุงูุชุนุงูู ูุนู ุจุฏุง ููุฃูู ุตูุฏูู ุฃุณูุฏ ุบุงูุถ.  ููุง ูู ุงูุญุงู ูุน ุฃู ุชูููุฉ ุฃุฎุฑู ุ ูุชู ุฅุฎูุงุก ุงูุดูุก ุงูุฃูุซุฑ ุฃูููุฉ ููุง ูุฑุงุก ุงูุนุฏูุฏ ูู ุทุจูุงุช ุงูุชุฌุฑูุฏ ุ ูุงูุชู ูู ุฎูุงููุง ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจูุง ูููู ุดูุก ูุง. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/tv/0k/gh/tv0kghio2zhsc-og7bjd-mtl41q.jpeg"></a> <br><br>  ูุฑุฑ ูุคูู ุงููุงุฏุฉ ุ ุงูุชู ููุดุฑ ุชุฑุฌูุชูุง ุ ุงููุตูู ุฅูู ุฃุณูู ูุณุงุฆู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู Go ูุงูุชุญุฏุซ ุนููุง. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ุงูุฐุงูุฑุฉ ุงููุงุฏูุฉ ูุงูุธุงูุฑูุฉ</font> </h2><br>  ูุฌุจ ุฃู ุชุนูู ุฌููุน ูุณุงุฆู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุน ูุณุงุญุฉ ุนููุงู ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ุ ูุงูุชู ูุชู ุงูุชุญูู ูููุง ุจูุงุณุทุฉ ูุธุงู ุงูุชุดุบูู.  ุฏุนููุง ููุธุฑ ูู ููููุฉ ุนูู ุงูุฐุงูุฑุฉ ุ ุจุฏุกุง ูู ุฃุฏูู ูุณุชูู - ูุน ุฎูุงูุง ุงูุฐุงูุฑุฉ. <br>  ุฅููู ููููุฉ ุชุฎูู ุฎููุฉ ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e22/5e5/74c/e225e574c2649eb0bf9f5dd9cb1edadb.png"></div><br>  <i><font color="#999999">ุชุฎุทูุท ุฎููุฉ ุงูุฐุงูุฑุฉ</font></i> <br><br>  ุฅุฐุง ุชุฎูููุง ุ ุจุณุงุทุฉ ุดุฏูุฏุฉ ุ ุฎููุฉ ุฐุงูุฑุฉ ููุง ูุญูุท ุจูุง ุ ูุณูุญุตู ุนูู ูุง ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุณุทุฑ ุงูุนููุงู (ูุนูู ุงูุชุฑุงูุฒุณุชูุฑ ููุญูู) ูู ูุง ูุชูุญ ุงููุตูู ุฅูู ุงูููุซู (ุฎุท ุงูุจูุงูุงุช). </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุธูุฑ ุฅุดุงุฑุฉ ูู ุณุทุฑ ุงูุนููุงู (ุงูุฎุท ุงูุฃุญูุฑ) ุ ูุชูุญ ูู ุฎุท ุงูุจูุงูุงุช ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ุฎููุฉ ุงูุฐุงูุฑุฉ ุ ุฃู ุดุญู ุงูููุซู ุ ููุง ูุฌุนู ูู ุงููููู ุชุฎุฒูู ูููุฉ ููุทููุฉ ููุงุจูุฉ ููููุฉ 1 ูููุง. </li><li style=";text-align:right;direction:rtl"> ุนูุฏูุง ูุง ุชูุฌุฏ ุฅุดุงุฑุฉ ูู ุณุทุฑ ุงูุนููุงู (ุงูุฎุท ุงูุฃุฎุถุฑ) ุ ูุชู ุนุฒู ุงูููุซู ููุง ูุชุบูุฑ ุดุญูุชู.  ูููุชุงุจุฉ ุฅูู ุงูุฎููุฉ 0 ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ุนููุงููุง ูุชูุฏูู 0 ููุทููุฉ ูู ุฎูุงู ุฎุท ุงูุจูุงูุงุช ุ ุฃู ุชูุตูู ุฎุท ุงูุจูุงูุงุช ุจุทุฑุญ ุ ูุจุงูุชุงูู ุชูุฑูุบ ุงูููุซู. </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุญุชุงุฌ ุงููุนุงูุฌ ุฅูู ูุฑุงุกุฉ ุงููููุฉ ูู ุงูุฐุงูุฑุฉ ุ ูุชู ุฅุฑุณุงู ุงูุฅุดุงุฑุฉ ุนูู ุทูู ุฎุท ุงูุนููุงู (ูุชู ุฅุบูุงู ุงูููุชุงุญ).  ุฅุฐุง ุชู ุดุญู ุงูููุซู ุ ูุฅู ุงูุฅุดุงุฑุฉ ุชูุฑ ุนุจุฑ ุฎุท ุงูุจูุงูุงุช (ุชุชู ูุฑุงุกุฉ 1) ุ ูุฅูุง ูุฅู ุงูุฅุดุงุฑุฉ ูุง ุชูุฑ ุนุจุฑ ุฎุท ุงูุจูุงูุงุช (ุชุชู ูุฑุงุกุฉ 0). </li></ol><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e8d/33a/100/e8d33a100b5dbf94d34e794785670f24.png"></div><br>  <i><font color="#999999">ูุฎุทุท ุชูุงุนู ุงูุฐุงูุฑุฉ ุงููุนููุฉ ูุงููุนุงูุฌ</font></i> <br><br>  ูุงูู ุงูุจูุงูุงุช ูุณุคูู ุนู ููู ุงูุจูุงูุงุช ุจูู ุงููุนุงูุฌ ูุงูุฐุงูุฑุฉ ุงููุนููุฉ. <br><br>  ุงูุขู ุฏุนููุง ูุชุญุฏุซ ุนู ุณุทุฑ ุงูุนููุงู ูุงูุจุงูุช ุนูููุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d24/e38/542/d24e38542de230b449750b26641f5e8c.png"></div><br>  <i><font color="#999999">ุฎุทูุท ุนููุงู ุงููุงูู ุจูู ุงููุนุงูุฌ ูุงูุฐุงูุฑุฉ ุงููุนููุฉ</font></i> <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุชุนููู ูู ุจุงูุช ูู RAM ูุนุฑู ุฑููู ูุฑูุฏ (ุนููุงู).  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุงููุนููุฉ ุงูููุฌูุฏุฉ ูู ุงูุฐุงูุฑุฉ ูุง ูุณุงูู ุนุฏุฏ ุฃุณุทุฑ ุงูุนูุงููู. </li><li style=";text-align:right;direction:rtl">  ูููู ููู ุณุทุฑ ุนููุงู ุชุญุฏูุฏ ูููุฉ 1 ุจุช ุ ูุฐูู ูุดูุฑ ุฅูู ูุงุญุฏ ุจุช ูู ุนููุงู ุจุงูุช ูุนูู. </li><li style=";text-align:right;direction:rtl">  ุฏุงุฆุฑุชูุง ุจูุง 32 ุณุทุฑ ุนููุงู.  ูุชูุฌุฉ ูุฐูู ุ ูุณุชุฎุฏู ูู ุจุงูุช addressable ุฑูู 32 ุจุช ูุนููุงูู.  [00000000000000000000000000000000] - ุฃุฏูู ุนููุงู ุฐุงูุฑุฉ.  [1111111111111111111111111111111111] - ุฃุนูู ุนููุงู ุงูุฐุงูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ูู ุจุงูุช ูุญุชูู ุนูู ุนููุงู 32 ุจุช ุ ูุฅู ูุณุงุญุฉ ุงูุนููุงู ุงูุฎุงุตุฉ ุจูุง ุชุชููู ูู 2 <sup>32</sup> ุจุงูุช ูุงุจู ููุนูููุฉ (4 ุฌูุฌุงุจุงูุช). </li></ol><br>  ูุชูุฌุฉ ูุฐูู ุ ุงุชุถุญ ุฃู ุนุฏุฏ ุงูุจุงูุชุงุช ุงููุงุจูุฉ ููุนูููุฉ ูุนุชูุฏ ุนูู ุฅุฌูุงูู ุนุฏุฏ ุฃุณุทุฑ ุงูุนูุงููู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ููุงู 64 ุณุทุฑ ุนููุงู (x86-64 ูุนุงูุฌุงุช) ุ ููููู ูุนุงูุฌุฉ 2 <sup>64</sup> ุจุงูุช (16 ุฅูุณุจุงูุช) ูู ุงูุฐุงูุฑุฉ ุ ูููู ูุนุธู ุงูุจููุงุช ุงูุชู ุชุณุชุฎุฏู ูุคุดุฑุงุช 64 ุจุช ุชุณุชุฎุฏู ุจุงููุนู ุฎุทูุท ุนูุงููู 48 ุจุช (AMD64) ูุฎุทูุท ุนููุงู 42 ุจุช (Intel) ุ ุงูุชู ุชุณูุญ ูุธุฑููุง ุจุชุฒููุฏ ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุจู 256 ุชูุฑุงุจุงูุช ูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ (ูุณูุญ Linux ุ ุนูู ุจููุฉ x86-64 ุ ุนูุฏ ุงุณุชุฎุฏุงู ุตูุญุงุช ุนูุงููู ุงููุณุชูู 4 ุ ุจุชุฎุตูุต ูุง ูุตู ุฅูู 128 ุชูุฑุงุจุงูุช ูู ูุณุงุญุฉ ุงูุนููุงู ููุนูููุงุช ุ 192 ุชูุฑุงุจุงูุช). <br>  ูุธุฑูุง ูุฃู ุญุฌู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุงููุนููุฉ ูุญุฏูุฏ ุ ูุชู ุชุดุบูู ูู ุนูููุฉ ูู "ุตูุฏูู ุงูุญูุงูุฉ" ุงูุฎุงุต ุจูุง - ูู ูุง ูุณูู "ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ" ุ ูุงูุชู ุชุณูู ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ. <br><br>  ูุง ุชุทุงุจู ุนูุงููู ุงูุจุงูุช ูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ุงูุนูุงููู ุงูุชู ูุณุชุฎุฏููุง ุงููุนุงูุฌ ูููุตูู ุฅูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ.  ูุชูุฌุฉ ูุฐูู ุ ูุญุชุงุฌ ุฅูู ูุธุงู ูุณูุญ ููุง ุจุชุญููู ุงูุนูุงููู ุงูุงูุชุฑุงุถูุฉ ุฅูู ุนูุงููู ูุนููุฉ.  ุฃููู ูุธุฑุฉ ุนูู ุดูู ุนูุงููู ุงูุฐุงูุฑุฉ ุงูุงูุชุฑุงุถูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9d0/09b/354/9d009b354ada519bf1280ea96e139e64.jpg"></div><br>  <i><font color="#999999">ุงูุชูุซูู ุงูุงูุชุฑุงุถู ููุณุงุญุฉ ุงูุนููุงู</font></i> <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุนูุฏูุง ูููุฐ ุงููุนุงูุฌ ุชุนูููุฉ ุชุดูุฑ ุฅูู ุนููุงู ุงูุฐุงูุฑุฉ ุ ูุฅู ุงูุฎุทูุฉ ุงูุฃููู ุชุชูุซู ูู ุชุฑุฌูุฉ ุงูุนููุงู ุงูููุทูู ุฅูู ุนููุงู ุฎุทู.  ูุชู ุชูููุฐ ูุฐุง ุงูุชุญููู ุจูุงุณุทุฉ ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/56a/330/ba9/56a330ba9d27daeb5737e013c0c15156.png"></div><br>  <i><font color="#999999">ุชูุซูู ูุจุณุท ููุนูุงูุฉ ุจูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ ูุงูุฐุงูุฑุฉ ุงููุนููุฉ</font></i> <br><br>  ูุธุฑูุง ูุฃู ุงูุนูุงููู ุงูููุทููุฉ ุฃูุจุฑ ูู ุฃู ุชููู ูุฑูุญุฉ ููุนูู ูุนูุง ุจุดูู ูููุตู (ูุนุชูุฏ ูุฐุง ุนูู ุนูุงูู ูุชุนุฏุฏุฉ) ุ ูุชู ุชูุธูู ุงูุฐุงูุฑุฉ ูู ููุงูู ุชุณูู ุงูุตูุญุงุช.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชูุณูู ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ุฅูู ูุณุงุญุงุช ุตุบูุฑุฉ ูุตูุญุงุช ูุจูุบ ุญุฌููุง 4 ููููุจุงูุช ูู ูุนุธู ุฃูุธูุฉ ุงูุชุดุบูู ุ ุฑุบู ุฃูู ูููู ุชุบููุฑ ูุฐุง ุงูุญุฌู ุนุงุฏุฉู.  ูุฐู ูู ุฃุตุบุฑ ูุญุฏุฉ ูุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุงูุงูุชุฑุงุถูุฉ.  ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ูุง ุชุฎุฒู ุฃู ุดูุก ุ ููู ุจุจุณุงุทุฉ ุชุญุฏุฏ ุงููุฑุงุณูุงุช ุจูู ูุณุงุญุฉ ุนููุงู ุงูุจุฑูุงูุฌ ูุงูุฐุงูุฑุฉ ุงููุนููุฉ. <br><br>  ุชุฑู ุงูุนูููุงุช ููุท ุนูุงููู ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ.  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุงู ุงูุจุฑูุงูุฌ ูุญุชุงุฌ ุฅูู ุฐุงูุฑุฉ ุฃูุซุฑ ุฏููุงููููุฉ (ูุชุณูู ุฃูุถูุง ุฐุงูุฑุฉ ุงููููุฉ ุฃู "ุงููููุฉ")ุ  ูููุง ููู ูุซุงู ูุฑูุฒ ุงููุฌููุน ุงูุจุณูุท ุงูุฐู ุชุทูุจ ููู ุงูุฐุงูุฑุฉ ุงูุฅุถุงููุฉ ุงููุฎุตุตุฉ ุฏููุงูููููุง ูู ุงููุธุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">_start:        mov $12, %rax #    brk        mov $0, %rdi # 0 -  ,            syscall b0:        mov %rax, %rsi #  rsi    ,           mov %rax, %rdi #     ...        add $4, %rdi # ..  4 ,           mov $12, %rax #    brk        syscall</code> </pre> <br>  ููุง ูู ููู ูููู ุชูุซููู ูู ุดูู ุฑุณู ุจูุงูู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c22/962/904/c229629041c7612e254d89d146fcc4ef.png"></div><br>  <i><font color="#999999">ุฒูุงุฏุฉ ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ุจุดูู ุญููู</font></i> <br><br>  ูุทูุจ ุงูุจุฑูุงูุฌ ุฐุงูุฑุฉ ุฅุถุงููุฉ ุจุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุก ูุธุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">brk</a> (sbrk / mmap ููุง ุฅูู ุฐูู).  ูููู kernel ุจุชุญุฏูุซ ุงููุนูููุงุช ุงููุชุนููุฉ ุจุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ุ ูููู ูู ูุชู ุชูุฏูู ุตูุญุงุช ุฌุฏูุฏุฉ ูู ุงูุฐุงูุฑุฉ ุงููุนููุฉ ุ ูููุง ููุฌุฏ ูุฑู ุจูู ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ูุงูุฐุงูุฑุฉ ุงููุนููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ูุฎุตุต ุงูุฐุงูุฑุฉ</font> </h2><br>  ุจุนุฏ ุฃู ูุงูุดูุง ุ ุจุดูู ุนุงู ุ ุงูุนูู ูุน ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ุ ูุชุญุฏุซูุง ุนู ููููุฉ ุทูุจ ุฐุงูุฑุฉ ุฏููุงููููุฉ ุฅุถุงููุฉ (ุงูุฐุงูุฑุฉ ุนูู ุงููููุฉ) ุ ุณูููู ูู ุงูุฃุณูู ุจุงููุณุจุฉ ููุง ุฃู ูุชุญุฏุซ ุนู ูุณุงุฆู ุชุฎุตูุต ุงูุฐุงูุฑุฉ. <br><br>  ุฅุฐุง ูุงูุช ุงููููุฉ ุชุญุชูู ุนูู ุฐุงูุฑุฉ ูุงููุฉ ูุชูุจูุฉ ุทูุจุงุช ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูููู ููุฎุตุต ุงูุฐุงูุฑุฉ ุชูููุฐ ูุฐู ุงูุทูุจุงุช ุฏูู ุงููุตูู ุฅูู kernel.  ุฎูุงู ุฐูู ุ ูุฌุจ ุนููู ุฒูุงุฏุฉ ุญุฌู ุงููููุฉ ุจุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุก ูุธุงู (ุจุงุณุชุฎุฏุงู brk ุ ุนูู ุณุจูู ุงููุซุงู) ุ ุฃุซูุงุก ุทูุจ ูุชูุฉ ูุจูุฑุฉ ูู ุงูุฐุงูุฑุฉ.  ูู ุญุงูุฉ malloc ุ ูุนูู "ูุจูุฑ" ุงูุญุฌู ุงูููุตูู ุจูุงุณุทุฉ ุงููุนููุฉ <code>MMAP_THRESHOLD</code> ุ ูุงูุชู ุ ุงูุชุฑุงุถููุง ุ ูู 128 ูููู ุจุงูุช. <br><br>  ููุน ุฐูู ุ ูุฅู ูุฎุตุต ุงูุฐุงูุฑุฉ ูุฏูู ูุณุคูููุงุช ุฃูุซุฑ ูู ูุฌุฑุฏ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  ุชุชูุซู ุฅุญุฏู ุฃูู ูุณุคูููุงุชู ูู ุชูููู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉ ุงูุฏุงุฎููุฉ ูุงูุฎุงุฑุฌูุฉ ุ ูุชุฎุตูุต ูุชู ุงูุฐุงูุฑุฉ ูู ุฃุณุฑุน ููุช ูููู.  ุงูุชุฑุถ ุฃู ุจุฑูุงูุฌูุง ูููุฐ ุจุดูู ูุชุชุงูู ุทูุจุงุช ุชุฎุตูุต ูุชู ูุณุชูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุฏุงูุฉ ูู <code>malloc(size)</code> ุงููููุฐุฌ <code>malloc(size)</code> ุ ูุจุนุฏ ุฐูู ูุชู ุชุญุฑูุฑ ูุฐู ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุฏุงูุฉ ูููููุฐุฌ <code>free(pointer)</code> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/944/8a0/779/9448a077982dfb81e4c982c1228cad15.png"></div><br>  <i><font color="#999999">ูุธุงูุฑุฉ ุชุฌุฒุฆุฉ ุงูุฎุงุฑุฌูุฉ</font></i> <br><br>  ูู ุงูุฑุณู ุงูุจูุงูู ุงูุณุงุจู ุ ูู ุงูุฎุทูุฉ p4 ุ ููุณ ูุฏููุง ูุง ูููู ูู ูุชู ุงูุฐุงูุฑุฉ ุงูููุฌูุฏุฉ ุจุงูุชุณูุณู ููููุงุก ุจุทูุจ ุชุฎุตูุต ุณุชุฉ ูุชู ูู ูุฐุง ุงููุจูู ุ ุนูู ุงูุฑุบู ูู ุฃู ุฅุฌูุงูู ุญุฌู ุงูุฐุงูุฑุฉ ุงูุฎุงููุฉ ูุณูุญ ุจุฐูู.  ูุฐุง ุงููููู ูุคุฏู ุฅูู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉ. <br><br>  ููููุฉ ุงูุญุฏ ูู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉุ  ุชุนุชูุฏ ุฅุฌุงุจุฉ ูุฐุง ุงูุณุคุงู ุนูู ุฎูุงุฑุฒููุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุญุฏุฏุฉ ุ ูุงูุชู ุชุณุชุฎุฏู ุงูููุชุจุฉ ุงูุฃุณุงุณูุฉ ููุชุนุงูู ูุน ุงูุฐุงูุฑุฉ. <br><br>  ุณููุธุฑ ุงูุขู ูู ุฃุฏุงุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ TCMalloc ุ ุงูุชู ุชุณุชูุฏ ุฅูููุง ุขููุงุช ุชุฎุตูุต ุฐุงูุฑุฉ Go. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">TCMalloc</font> </h2><br>  ูุนุชูุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TCMalloc</a> ุนูู ููุฑุฉ ุชูุณูู ุงูุฐุงูุฑุฉ ุฅูู ุนุฏุฉ ูุณุชููุงุช ูุชูููู ุชุฌุฒุฆุฉ ุงูุฐุงูุฑุฉ.  ุฏุงุฎู TCMalloc ุ ุชููุณู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุฅูู ูุณููู: ุงูุนูู ูุน ุฐุงูุฑุฉ ูุคุดุฑ ุงูุชุฑุงุจุท ูุงูุนูู ูุน ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">โ ุฐุงูุฑุฉ ุงูููุถูุน</font> </h3><br>  ุชููุณู ูู ุตูุญุฉ ูู ุงูุฐุงูุฑุฉ ุฅูู ุณูุณูุฉ ูู ุงูุฃุฌุฒุงุก ุฐุงุช ุงูุฃุญุฌุงู ุงููุญุฏุฏุฉ ุ ูุชู ุงุฎุชูุงุฑูุง ููููุง ููุฆุงุช ุงูุญุฌู.  ูุฐุง ูููู ูู ุชุฌุฒุฆุฉ.  ูุชูุฌุฉ ูุฐูู ุ ููุฌุฏ ุชุญุช ุชุตุฑู ูู ูุคุดุฑ ุชุฑุงุจุท ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูููุงุฆูุงุช ุงูุตุบูุฑุฉ ุ ููุง ูุณูุญ ุจุชุฎุตูุต ุฐุงูุฑุฉ ูุนุงู ูููุงุฆูุงุช ุงูุชู ููู ุญุฌููุง ุนู 32 ูููู ุจุงูุช. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/331/901/7c8/3319017c8657e4b75a25003357d4b4f4.png"></div><br>  <i><font color="#999999">ุฏูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช</font></i> <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">unch ุญููุฉ</font> </h3><br>  ุงููููุฉ ุงูุชู ุชุฏูุฑูุง TCMalloc ูู ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงูุตูุญุงุช ุงูุชู ูููู ูููุง ุชูุซูู ูุฌููุนุฉ ูู ุงูุตูุญุงุช ุงููุชุชุงููุฉ ููุฌููุนุฉ ูู ุงูุตูุญุงุช (span).  ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชุฎุตูุต ุฐุงูุฑุฉ ููุงุฆู ุฃูุจุฑ ูู 32 ูููู ุจุงูุช ุ ูุชู ุงุณุชุฎุฏุงู ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ูุชุฎุตูุต ุงูุฐุงูุฑุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/48c/f49/707/48cf497071e18b1539c18e6c2057e85d.png"></div><br>  <i><font color="#999999">ูููุฉ ูุงูุนูู ูุน ุงูุตูุญุงุช</font></i> <br><br>  ุนูุฏูุง ูุง ุชูุฌุฏ ูุณุงุญุฉ ูุงููุฉ ููุถุน ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุ ูุฅููุง ุชุชุญูู ุฅูู ูููุฉ ุงูุฐุงูุฑุฉ.  ุฅุฐุง ูุงู ุงููููุฉ ูุง ุชุญุชูู ุนูู ุฐุงูุฑุฉ ุญุฑุฉ ูุงููุฉ ุ ูุชู ุทูุจ ุฐุงูุฑุฉ ุฅุถุงููุฉ ูู ูุธุงู ุงูุชุดุบูู. <br><br>  ููุชูุฌุฉ ูุฐูู ุ ูุฏุนู ุงููููุฐุฌ ุงูููุฏู ููุนูู ูุน ุงูุฐุงูุฑุฉ ุชุฌูุน ุฐุงูุฑุฉ ุงููุณุชุฎุฏู ุ ูุญุณู ุงุณุชุฎุฏุงูู ุจุดูู ูุจูุฑ ูู ููุงุกุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุชุญุฑูุฑูุง. <br><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุฃุฏุงุฉ ุชุฎุตูุต ุฐุงูุฑุฉ Go ุชุณุชูุฏ ูู ุงูุฃุตู ุฅูู TCMalloc ุ ูููููุง ุชุฎุชูู ููููุงู ุนููุง. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ุงูุฐูุงุจ ูุฎุตุต ุงูุฐุงูุฑุฉ</font> </h2><br>  ูุญู ูุนูู ุฃู ููุช ุงูุชุดุบูู Go ูุฎุทุท ูุชุดุบูู goroutines ุนูู ูุนุงูุฌุงุช ููุทููุฉ.  ูุจุงููุซู ุ ูุฅู ุฅุตุฏุงุฑ TCMalloc ุงููุณุชุฎุฏู ูู ูุจู Go ููุณู ุตูุญุงุช ุงูุฐุงูุฑุฉ ุฅูู ูุชู ุชุชูุงูู ุฃุญุฌุงููุง ูุน ูุฆุงุช ุญุฌู ูุนููุฉ ูููุง 67. <br><br>  ุฅุฐุง ูู ุชูู ูุนุชุงุฏูุง ุนูู ุจุฑูุงูุฌ ุฌุฏููุฉ Go <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุ</a> ูููููู ุงููุฑุงุกุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/824/d5c/0df/824d5c0dfac562629662650924292583.png"></div><br>  <i><font color="#999999">ุงูุฐูุงุจ ุงูุทุจูุงุช ุงูุญุฌู</font></i> <br><br>  ูุธุฑูุง ูุฃู ุงูุญุฏ ุงูุฃุฏูู ูุญุฌู ุงูุตูุญุฉ ูู Go ูู 8192 ุจุงูุช (8 ูููู ุจุงูุช) ุ ุฅุฐุง ูุงูุช ูุฐู ุงูุตูุญุฉ ููุณูุฉ ุฅูู ูุชู ุชุจูุบ 1 ูููู ุจุงูุช ุ ูุณูุญุตู ุนูู 8 ูุชู ูู ูุฐุง ุงููุจูู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/150/865/6ba/1508656ba4a4c009624468a164d41e5b.png"></div><br>  <i><font color="#999999">ุญุฌู ุงูุตูุญุฉ 8 ูููู ุจุงูุช ููุณู ุฅูู ูุชู ุงููุทุงุจูุฉ ูุญุฌู ูุฆุฉ 1 ูููู ุจุงูุช</font></i> <br><br>  ูุชู ุงูุชุญูู ูู ุชุณูุณู ุงูุตูุญุงุช ุงููุดุงุจูุฉ ูู Go ุจุงุณุชุฎุฏุงู ุจููุฉ ุชุณูู mspan. <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ruct ูููู mspan</font> </h3><br>  ูููู mspan ูู ูุงุฆูุฉ ูุฑุชุจุทุฉ ูุฒุฏูุฌุฉ ุ ูุงุฆู ูุญุชูู ุนูู ุนููุงู ุงูุจุฏุงูุฉ ููุตูุญุฉ ุ ููุนูููุงุช ุญูู ุญุฌู ุงูุตูุญุฉ ูุนุฏุฏ ุงูุตูุญุงุช ุงููุถููุฉ ููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dbd/cae/fc0/dbdcaefc090a443369d33c2cde7e06ae.png"></div><br>  <i><font color="#999999">ูููู Mspan</font></i> <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">c ูููู ููุงุด</font> </h3><br>  ูุซู TCMalloc ุ ูููุฑ Go ููู ูุนุงูุฌ ููุทูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ููุคุดุฑ ุงูุชุฑุงุจุท ุงููุญูู ุ ูุงููุนุฑููุฉ ุจุงุณู mcache.  ูุชูุฌุฉ ูุฐูู ุ ุฅุฐุง ูุงู goroutine ูุญุชุงุฌ ุฅูู ุฐุงูุฑุฉ ุ ูููููู ุงูุญุตูู ุนูููุง ูุจุงุดุฑุฉู ูู mcache.  ููููุงู ุจุฐูู ุ ูุง ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจุงูุฃููุงู ุ ูุฃูู ูู ุฃู ููุช ูุนูู ูุชู ุชูููุฐ goroutin ูุงุญุฏ ููุท ุนูู ูุนุงูุฌ ููุทูู ูุงุญุฏ. <br><br>  ุชุญุชูู ุจููุฉ mcache ุ ูู ุดูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุนูู ููุงูู mspan ูู ูุฎุชูู ูุฆุงุช ุงูุญุฌู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/478/7bb/459/4787bb4597d56f89b474189c5e86441b.png"></div><br>  <i><font color="#999999">ุงูุชูุงุนู ุจูู ุงููุนุงูุฌ ุงูููุทูู ู mcache ู mspan ูู Go</font></i> <br><br>  ูุธุฑูุง ูุฃู ูู ูุนุงูุฌ ููุทูู ุจู mcache ุงูุฎุงุต ุจู ุ ูููุณุช ููุงู ุญุงุฌุฉ ููุฃููุงู ุนูุฏ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู mcache. <br><br>  ูููู ุชูุซูู ูู ูุฆุฉ ุญุฌู ุจุฃุญุฏ ุงููุงุฆูุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฆู ุงููุณุญ ูู ูุงุฆู ูุญุชูู ุนูู ูุคุดุฑ. </li><li style=";text-align:right;direction:rtl">  ูุงุฆู noscan ูู ูุงุฆู ูุง ููุฌุฏ ููู ูุคุดุฑ. </li></ul><br>  ุชุชูุซู ุฅุญุฏู ููุงุท ุงูููุฉ ูู ูุฐุง ุงูุฃุณููุจ ูู ุฃูู ุนูุฏ ุฅุฌุฑุงุก ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุ ูุง ุชุญุชุงุฌ ูุงุฆูุงุช noscan ุฅูู ุงูุชุญุงูู ุนูููุง ุ ูุฃููุง ูุง ุชุญุชูู ุนูู ูุงุฆูุงุช ูุฎุตุตุฉ ููุฐุงูุฑุฉ. <br><br>  ูุง ูุญุตู ูู mcacheุ  ุงููุงุฆูุงุช ุงูุชู ูุง ูุฒูุฏ ุญุฌููุง ุนู 32 ูููู ุจุงูุช ุ ุชูุชูู ูุจุงุดุฑุฉู ุฅูู mcache ุจุงุณุชุฎุฏุงู mspan ูู ูุฆุฉ ุงูุญุฌู ุงูููุงุจูุฉ. <br><br>  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูู ููู mcache ูุญุชูู ุนูู ุฎููุฉ ุญุฑุฉุ  ุซู ูุญุตููู ุนูู mspan ุฌุฏูุฏ ูู ูุฆุฉ ุงูุญุฌู ุงููุทููุจ ูู ูุงุฆูุฉ ูุงุฆูุงุช mspan ุชุณูู mcentral. <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">cent ุงููููู ุงููุฑูุฒู</font> </h3><br>  ุชุฌูุน ุงูุจููุฉ ุงููุฑูุฒูุฉ ุฌููุน ูุทุงูุงุช ุงูุตูุญุงุช ููุฆุฉ ุญุฌู ูุนููุฉ.  ูุญุชูู ูู ูุงุฆู mcentral ุนูู ูุงุฆูุชูู ูู ุงููุงุฆูุงุช mspan. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ูุงุฆูุงุช mspan ุงูุชู ูุง ุชูุฌุฏ ุจูุง ูุงุฆูุงุช ูุฌุงููุฉ ุ ุฃู ุชูู ุงููุงุฆูุงุช ุงูููุฌูุฏุฉ ูู mcache. </li><li style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงููุงุฆูุงุช mspan ุงูุชู ุชุญุชูู ุนูู ูุงุฆูุงุช ูุฌุงููุฉ. </li></ol><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6dc/b88/7f9/6dcb887f9c717bb1f24735daa4b50aa7.png"></div><br>  <i><font color="#999999">ุงููููู ุงููุฑูุฒู</font></i> <br><br>  ูู ูููู mcentral ููุฌูุฏ ุฏุงุฎู ูููู mheap. <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ูููู โMheap</font> </h3><br>  ูุชู ุชูุซูู ุจููุฉ mheap ุจูุงุณุทุฉ ูุงุฆู ูุนุงูุฌ ุฅุฏุงุฑุฉ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ูู Go.  ููุฌุฏ ูุงุฆู ุนูููู ูุงุญุฏ ููุท ููุชูู ูุณุงุญุฉ ุนููุงู ุงูุชุฑุงุถูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c8e/b07/01b/c8eb0701bbe46523e2735e695db97115.png"></div><br>  <i><font color="#999999">ูููู ูููุจ</font></i> <br><br>  ููุง ุชุฑูู ูู ุงูุฑุณู ุงูุจูุงูู ุฃุนูุงู ุ ุชุญุชูู ุจููุฉ mheap ุนูู ูุฌููุนุฉ ูู ุงูููุงูู ุงููุฑูุฒูุฉ.  ุชุญุชูู ูุฐู ุงููุฌููุนุฉ ุนูู ููุงูู ูุฑูุฒูุฉ ูุฌููุน ูุฆุงุช ุงูุญุฌู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">central [numSpanClasses]struct { mcentral mcentral   pad     [sys.CacheLineSize unsafe.Sizeof(mcentral{})%sys.CacheLineSize]byte }</code> </pre> <br>  ูุธุฑูุง ูุฃู ูุฏููุง ูููู ูุฑูุฒู ููู ูุฆุฉ ุญุฌู ุ ุนูุฏูุง ูุทูุจ mcache ุจููุฉ mspan ูู mcentral ุ ูุชู ุชุทุจูู ุงูููู ุนูู ุงููุณุชูู ุงููุฑูุฒู ุงููุฑุฏู ุ ููุชูุฌุฉ ูุฐูู ุ ูููู ุชูุฏูู ุทูุจุงุช ูู mcache ุฃุฎุฑู ุชุทูุจ ููุงูู mspan ุฐุงุช ุฃุญุฌุงู ุฃุฎุฑู ูู ููุณ ุงูููุช. <br><br>  ูุถูู ุงููุญุงุฐุงุฉ (ุงููุณุงุฏุฉ) ูุตู ุงูููุงูู ุงููุฑูุฒูุฉ ุนู ุจุนุถูุง ุงูุจุนุถ ุจุนุฏุฏ ุงูุจุงูุชุงุช ุงููุชูุงููุฉ ูุน ูููุฉ <code>CacheLineSize</code> .  ูุชูุฌุฉ ูุฐูู ุ ูู <code>mcentral.lock</code> ูุฏูู ุฎุท ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุฎุงุต ุจู ุ ูุงูุฐู ูุชุฌูุจ ุงููุดุงูู ุงููุฑุชุจุทุฉ ุจูุดุงุฑูุฉ ุงูุฐุงูุฑุฉ ุงูุฎุงุทุฆุฉ. <br><br>  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุงูุช ุงููุงุฆูุฉ ุงููุฑูุฒูุฉ ูุงุฑุบุฉุ  ุซู ูุชููู mcentral ุณูุณูุฉ ูู ุงูุตูุญุงุช ูู mheap ูุชุฎุตูุต ุฃุฌุฒุงุก ุงูุฐุงูุฑุฉ ููุฆุฉ ุงูุญุฌู ุงููุทููุจุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>free[_MaxMHeapList]mSpanList</code> ุนุจุงุฑุฉ ุนู ุตููู ูู spanList.  ุชุชููู ุจููุฉ mspan ูู ูู ูุงุฆูุฉ ูู 1 ุฅูู 127 ุตูุญุฉ (_MaxMHeapList - 1).  ุนูู ุณุจูู ุงููุซุงู ุ free [3] ูู ูุงุฆูุฉ ูุฑุชุจุทุฉ ุจููุงูู mspan ุงูุชู ุชุญุชูู ุนูู 3 ุตูุญุงุช.  ุชุดูุฑ ูููุฉ "free" ูู ูุฐู ุงูุญุงูุฉ ุฅูู ุฃููุง ูุชุญุฏุซ ุนู ูุงุฆูุฉ ูุงุฑุบุฉ ูุง ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูููุง.  ูููู ุฃู ุชููู ุงููุงุฆูุฉ ุ ุจุฏูุงู ูู ูุงุฑุบุฉ ุ ูุงุฆูุฉ ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูููุง (ูุดุบูู). </li><li style=";text-align:right;direction:rtl">  <code>freelarge mSpanList</code> ูู ูุงุฆูุฉ ููุงูู mspan ุงููุฌุงููุฉ.  ุนุฏุฏ ุงูุตูุญุงุช ููู ุนูุตุฑ (ุฃู ุ mspan) ูู ุฃูุซุฑ ูู 127. ูุฏุนู ูุฐู ุงููุงุฆูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุจููุฉ ุจูุงูุงุช mtreap.  ุชุณูู ูุงุฆูุฉ ููุงูู mspan ุงููุฒุฏุญูุฉ busylarge. </li></ul><br>  ูุงุฆูุงุช ุฃูุจุฑ ูู 32 ูููู ุจุงูุช ุชุนุชุจุฑ ูุงุฆูุงุช ูุจูุฑุฉ ุ ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ููุง ูุจุงุดุฑุฉ ูู mheap.  ูุชู ุชูููุฐ ุทูุจุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ููุฐู ุงููุงุฆูุงุช ุจุงุณุชุฎุฏุงู ููู ุ ููุชูุฌุฉ ูุฐูู ุ ูู ููุช ูุนูู ุ ูููู ูุนุงูุฌุฉ ุทูุจ ููุงุซู ูู ูุนุงูุฌ ููุทูู ูุงุญุฏ ููุท. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ุนูููุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูููุงุฆูุงุช</font> </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชุฌุงูุฒ ุญุฌู ุงููุงุฆู 32 ูููู ุจุงูุช ุ ูุณูุชู ุงุนุชุจุงุฑู ูุจูุฑูุง ุ ููุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุฎุงุตุฉ ุจู ูุจุงุดุฑุฉู ูู mheap. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุญุฌู ุงููุงุฆู ุฃูู ูู 16 ูููู ุจุงูุช ุ ูุชู ุงุณุชุฎุฏุงู ุขููุฉ mcache ุงูุชู ุชุณูู ุฃุฏุงุฉ ุงูุชุฎุตูุต ุงูุตุบูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุญุฌู ุงููุงุฆู ูู ุญุฏูุฏ 16-32 ููููุจุงูุช ุ ูุณูู ูุชู ุชุญุฏูุฏ ูุฆุฉ ุงูุญุฌู (sizeClass) ุงููุฑุงุฏ ุงุณุชุฎุฏุงููุง ุ ุซู ูุชู ุชุฎุตูุต ูุชูุฉ ููุงุณุจุฉ ูู mcache. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชูู ููุงู ูุชู ูุชููุฑุฉ ูู sizeClass ุงููุทุงุจู ูู mcache ุ ูุณูุชู ุงุณุชุฏุนุงุก mcentral. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู ูุฏู mcentral ูุชู ุญุฑุฉ ุ ูุฅููู ูุณููู mheap ููุจุญุซูู ุนู mspan ุงูุฃูุซุฑ ููุงุฆูุฉ.  ุฅุฐุง ุชุจูู ุฃู ุญุฌู ุงูุฐุงูุฑุฉ ุงููุทููุจ ูู ูุจู ุงูุชุทุจูู ุฃูุจุฑ ููุง ูููู ุชุฎุตูุตู ุ ูุณุชุชู ูุนุงูุฌุฉ ุญุฌู ุงูุฐุงูุฑุฉ ุงููุทููุจ ุจุญูุซ ูููู ูู ุงููููู ุฅุฑุฌุงุน ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูุตูุญุงุช ุญุณุจ ุญุงุฌุฉ ุงูุจุฑูุงูุฌ ุ ููุง ูุดูู ุจููุฉ mspan ุฌุฏูุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงูุฐุงูุฑุฉ ุงูุงูุชุฑุงุถูุฉ ููุชุทุจูู ูุง ุชุฒุงู ุบูุฑ ูุงููุฉ ุ ูุณูุชู ุงููุตูู ุฅูู ูุธุงู ุงูุชุดุบูู ููุญุตูู ุนูู ูุฌููุนุฉ ุฌุฏูุฏุฉ ูู ุงูุตูุญุงุช (ูุทููุจ 1 ููุบุงุจุงูุช ุนูู ุงูุฃูู ูู ุงูุฐุงูุฑุฉ). </li></ul><br>  ูู ุงููุงูุน ุ ุนูู ูุณุชูู ูุธุงู ุงูุชุดุบูู ุ ูุทูุจ Go ุชุฎุตูุต ุฃุฌุฒุงุก ุฃูุจุฑ ูู ุงูุฐุงูุฑุฉ ุชุณูู ุงูุณุงุญุงุช.  ูุชูุญ ูู ุงูุชุฎุตูุต ุงููุชุฒุงูู ูุดุธุงูุง ูุจูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุฅูุฌุงุฏ ุญู ูุณุท ุจูู ููุฏุงุฑ ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ููุชุทุจูู ูุงููุตูู ุงููููู ุฅูู ูุธุงู ุงูุชุดุบูู ูู ุญูุซ ุงูุฃุฏุงุก. <br><br>  ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุทููุจุฉ ุนูู ุงููููุฉ ูู ุงูุณุงุญุฉ.  ุงููุธุฑ ูู ูุฐู ุงูุขููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ุชุฐูุจ</font> </h2><br>  ุฃููู ูุธุฑุฉ ุนูู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ูู ุฎูุงู ุจุฑูุงูุฌ ุจุณูุท ููุชูุจ ูู Go: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">func main() {   for {} }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c33/4cd/dee/c334cddee46f32a66d3528b08deda48e.png"></div><br>  <i><font color="#999999">ูุนูููุงุช ุนูููุฉ ุงูุจุฑูุงูุฌ</font></i> <br><br>  ุชุจูุบ ูุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ ุญุชู ูู ูุซู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุจุณูุท ุญูุงูู 100 ููุฌุงุจุงูุช ุ ุจูููุง ูุจูุบ ูุคุดุฑ RSS 696 ูููู ุจุงูุช ููุท.  ุฃููุงู ุ ุฏุนููุง ูุญุงูู ูุนุฑูุฉ ุณุจุจ ูุฐุง ุงูุชูุงูุถ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f34/2a7/f41/f342a7f41d8ff7fbf3b5f081415c5ab4.png"></div><br>  <i><font color="#999999">ุฎุฑูุทุฉ ู smap ุงููุนูููุงุช</font></i> <br><br>  ููุง ููููู ุฑุคูุฉ ููุงุทู ุงูุฐุงูุฑุฉ ุ ูุญุฌููุง ูุณุงูู ุชูุฑูุจูุง 2 ููุบุงุจุงูุช ู 64 ููุฌุงุจุงูุช ู 32 ููุฌุงุจุงูุช.  ุฃู ููุน ูู ุงูุฐุงูุฑุฉ ูุฐุงุ <br><br><h3 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ren ุฃุฑููุง</font> </h3><br>  ุงุชุถุญ ุฃู ุงูุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ูู Go ุชุชููู ูู ูุฌููุนุฉ ูู ุงูุณุงุญุงุช.  ูุชูุงูู ุญุฌู ุงูุฐุงูุฑุฉ ุงูุฃููู ุงููุฎุตุต ูููููุจ ูุน ุณุงุญุฉ ูุงุญุฏุฉ ุ ุฃู 64 ููุฌุงุจุงูุช (ูุฐุง ููุงุณุจ ูู Go 1.11.5). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9dd/17e/ba9/9dd17eba9a4c5acf9371052d62d902d9.png"></div><br>  <i><font color="#999999">ุญุฌู ุงูุณุงุญุฉ ุงูุญุงูู ูู ุงููุธู ุงููุฎุชููุฉ</font></i> <br><br>  ูุชูุฌุฉ ูุฐูู ุ ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุงุฒูุฉ ููุงุญุชูุงุฌุงุช ุงูุญุงููุฉ ููุจุฑูุงูุฌ ูู ุฃุฌุฒุงุก ุตุบูุฑุฉ.  ุชุจุฏุฃ ูุฐู ุงูุนูููุฉ ุจุณุงุญุฉ 64 ููุบุงุจุงูุช. <br><br>  ูุง ููุจุบู ุฃู ุชุคุฎุฐ ุชูู ุงููุคุดุฑุงุช ุงูุนุฏุฏูุฉ ุงูุชู ูุชุญุฏุซ ุนููุง ููุง ูุจุนุถ ุงูููู ุงููุทููุฉ ูุบูุฑ ุงููุชุบูุฑุฉ.  ูููููู ุงูุชุบููุฑ.  ูู ููุช ุณุงุจู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฎุตุต Go ูุณุงุญุฉ ุงูุชุฑุงุถูุฉ ูุณุชูุฑุฉ ููุฏููุง ุ ุนูู ุฃูุธูุฉ 64 ุจุช ุ ูุงู ุญุฌู ุงูุณุงุญุฉ 512 ุฌูุฌุงุจุงูุช (ูู ุงููุซูุฑ ููุงูุชูุงู ุฃู ูููุฑ ูููุง ูุญุฏุซ ุฅุฐุง ูุงู ุงูุทูุจ ุนูู ุงูุฐุงูุฑุฉ ุงูุญููููุฉ ูุจูุฑูุง ุฌุฏูุง ุจุญูุซ ูุชู ุฑูุถ ุงูุทูุจ ุงูููุงุจู ุจูุงุณุทุฉ mmapุ). <br><br>  ูู ุงููุงูุน ุ ูุฏุนู ูุฌููุนุฉ ูู ุงูุณุงุญุงุช ุญููุฉ.  ูู Go ุ ุชูุฑู ุงูุณุงุญุงุช ุนูู ุฃููุง ุฃุฌุฒุงุก ูู ุงูุฐุงูุฑุฉ ุ ููุณูุฉ ุฅูู ูุชู ุจุญุฌู 8192 ุจุงูุช (8 ูููู ุจุงูุช) ูู ุงูุญุฌู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/55b/927/7e0/55b9277e0c55876b1bbf11bb1b869c9e.png"></div><br>  <i><font color="#999999">ูุงุญุฏ 64 ููุบุงุจุงูุช ุงูุณุงุญุฉ</font></i> <br><br>  Go ูุฏูู ุจุถุนุฉ ูููุงุช ูู ุงููุชู - span ู ููุทูุฉ.  ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ููู ุฎุงุฑุฌ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุ ูุฅููุง ุชุฎุฒู ุงูุจูุงูุงุช ุงููุตููุฉ ุงูุณุงุญุฉ.  ููู ุชุณุชุฎุฏู ุฃุณุงุณุง ูู ุฌูุน ุงูููุงูุฉ. <br>  ูููุง ููู ูุฎุทุท ุนุงู ูููููุฉ ุนูู ุขููุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู Go. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b01/61f/13f/b0161f13f6bc905731f0bfb339fd3a10.png"></div><br>  <i><font color="#999999">ูุฎุทุท ุนุงู ูุขููุงุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู Go</font></i> <br><br><h2 style=";text-align:right;direction:rtl">  <font color="#3AC1EF">ุงููุชุงุฆุฌ</font> </h2><br>  ุจุดูู ุนุงู ุ ูููู ุงูุฅุดุงุฑุฉ ุฅูู ุฃููุง ูู ูุฐู ุงููุงุฏุฉ ูุตููุง ุงููุธู ุงููุฑุนูุฉ ููุนูู ูุน ุฐุงูุฑุฉ Go ุจุนุจุงุฑุงุช ุนุงูุฉ ุฌุฏูุง.  ุชุชูุซู ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ูููุธุงู ุงููุฑุนู ููุฐุงูุฑุฉ ูู Go ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ูุฎุชูู ุงูููุงูู ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ูุณุชููุงุช ูุฎุชููุฉ.  ูุฐุง ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุญุฌู ุงููุงุฆูุงุช ุงูุชู ูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ. <br><br>  ุชูุซูู ูุชูุฉ ูุงุญุฏุฉ ูู ุนูุงููู ุงูุฐุงูุฑุฉ ุงููุณุชูุฑุฉ ุงููุณุชููุฉ ูู ูุธุงู ุงูุชุดุบูู ูู ุดูู ุจููุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช ูุฒูุฏ ูู ููุงุกุฉ ุขููุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุณุจุจ ุญูููุฉ ุฃู ูุฐุง ุงูููุฌ ูุชุฌูุจ ุงูุญุฌุจ.  ุฅู ุชุฎุตูุต ุงูููุงุฑุฏ ุ ูุน ูุฑุงุนุงุฉ ุญุฌู ุงููุงุฆูุงุช ุงูุชู ูุฌุจ ุชุฎุฒูููุง ูู ุงูุฐุงูุฑุฉ ุ ูููู ูู ุงูุชูุชุช ุ ูุจุนุฏ ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุ ูุชูุญ ูู ุชุณุฑูุน ุนูููุฉ ุฌูุน ุงูููุงูุฉ. <br><br>  <b>ุฃุนุฒุงุฆู ุงููุฑุงุก!</b>  ูู ูุงุฌูุชู ูุดุงูู ุจุณุจุจ ุฎูู ูู ุงูุฐุงูุฑุฉ ูู ุงูุจุฑุงูุฌ ุงูููุชูุจุฉ ูู Goุ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar442648/">https://habr.com/ru/post/ar442648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar442638/index.html">ุชูุณูุน ูุทุงู ุชุทุจูู Kubernetes ุนูู ุฃุณุงุณ ููุงููุณ ูู ุจุฑูููุซููุณ</a></li>
<li><a href="../ar442640/index.html">ุนูุฉ ุงูููุงู: ุงุณุชุฎุฏุงู ููุน ุงูุงุฑุชุจุงู ูู ููุงุด. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar442642/index.html">ูุง ูุฌุจ ูุฑุงุกุชู ูู ูุงุฑุณ: 22 ูุชุงุจูุง ุฌุฏูุฏูุง ูููุณูููู ูุงููุฏูุฑูู ูุงููุทูุฑูู ูุงููุตูููู</a></li>
<li><a href="../ar442644/index.html">ูุนุธู ุงูููุงุฑุงุช ุบูุฑ ุงูุจุฑูุฌุฉ ุชุฒูุฏ ูู ูููุฉ ุงููุทูุฑ</a></li>
<li><a href="../ar442646/index.html">ุดุจูุงุช Kubernetes: ุฏุฎูู</a></li>
<li><a href="../ar442650/index.html">ุชุญููู ูุชุญุณูู ุชุทุจููุงุช React</a></li>
<li><a href="../ar442652/index.html">ุงุณุชุฎุฏุงู Fastify ู Preact ูุชุทุจููุงุช ุงูููุจ ุงูุณุฑูุนุฉ</a></li>
<li><a href="../ar442654/index.html">ุงูุชุจุฏูู ุฅูู Next.js ูุงูุฅุณุฑุงุน ูู ุชุญููู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูู manifold.co 7.5 ูุฑุฉ</a></li>
<li><a href="../ar442658/index.html">8 ุงูุญูู ููุนูู ูุน CSS: ุงูููุธุฑ ุ ุชุฐููู ูุฒุฌุฉ ูุบูุฑูุง</a></li>
<li><a href="../ar442660/index.html">ุงูุชูููู ุจูู ุงูุฑูุงุถูุงุช ูููุชู ูุงูุนุงูู ุงููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>