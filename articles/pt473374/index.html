<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç≠ üîñ üè© Como integramos o YouTube Live com o Zoom ü§Ωüèø üëÜüèª üï§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! Esta √© a segunda parte de uma s√©rie de artigos da equipe de TI do servi√ßo de reservas de hot√©is Ostrovok.ru sobre a organiza√ß√£o da transm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como integramos o YouTube Live com o Zoom</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ostrovok/blog/473374/"> Ol√° pessoal!  Esta √© a segunda parte de uma s√©rie de artigos da equipe de TI do servi√ßo de reservas de hot√©is <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ostrovok.ru</a> sobre a organiza√ß√£o da transmiss√£o on-line de apresenta√ß√µes e eventos corporativos em uma sala separada. <br><br>  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro artigo,</a> falamos sobre como resolvemos o problema do som de transmiss√£o ruim usando um console de mixagem e um sistema de microfone sem fio. <br><br><img src="https://habrastorage.org/webt/v7/ix/_m/v7ix_misdt4x4-6pen0yp2a2gpc.png"><br><br>  E tudo parecia estar bem, mas depois de algum tempo uma nova tarefa chegou ao nosso departamento - vamos tornar nossas transmiss√µes mais interativas!  Todo o nosso TK estava em uma proposta - era necess√°rio dar aos funcion√°rios remotos a oportunidade de se conectar √†s reuni√µes da equipe, ou seja, n√£o apenas assistir, mas tamb√©m participar ativamente: mostrar uma apresenta√ß√£o, fazer perguntas em tempo real, etc.  Ap√≥s analisar a situa√ß√£o, decidimos usar a teleconfer√™ncia Zoom. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/z5/tb/de/z5tbdevbqhaz5cqy_stwuqjgnp8.png"><br><br>  Uma pequena digress√£o: o zoom para videoconfer√™ncia foi integrado √† nossa infraestrutura por um longo tempo.  Muitos de nossos funcion√°rios o utilizam todos os dias para entrevistas remotas, reuni√µes e reuni√µes de planejamento.  A maioria das nossas salas de reuni√µes est√° equipada com salas de zoom e grandes televis√µes e microfones com cobertura circular de 360 ‚Äã‚Äãgraus.  A prop√≥sito, tentamos colocar esses microfones em nossa sala de reuni√µes "especial", mas devido ao grande tamanho da sala, eles emitiram apenas mingau dos sons, e foi muito dif√≠cil entender o que os oradores diziam.  Em salas pequenas, esses microfones funcionam perfeitamente. <br><br>  Vamos voltar √† nossa tarefa.  Parece que a solu√ß√£o √© simples: <br><br><ol><li>  N√≥s removemos o cabo HDMI para conectar via fio; </li><li>  Configuramos o Zoom Rooms na sala de reuni√µes para que os funcion√°rios possam se conectar √† reuni√£o e mostrar uma apresenta√ß√£o de qualquer dispositivo e de qualquer lugar; </li><li>  N√≥s removemos a c√¢mera do nosso circuito, porque por que precisamos capturar a imagem da c√¢mera quando podemos capturar a imagem do Zoom?  Conectamos o projetor atrav√©s da placa de captura de v√≠deo ao laptop, transferimos o host para l√°, reconfiguramos o Xsplit para capturar a janela com o programa (fun√ß√£o Sele√ß√£o inteligente) e vamos para a transmiss√£o de teste. </li><li>  Ajustamos o som para que os caras remotos possam ser ouvidos e o som no YouTube n√£o sofra. </li></ol><br>  Foi exatamente isso que fizemos: conectamos microfones ao Intel NUC com o Zoom Rooms (a seguir denominado "host"), removemos o cabo HDMI do projetor, ensinamos aos funcion√°rios como "compartilhar a imagem no Zoom" e coloc√°-la no ar.  Para tornar mais claro, abaixo est√° o diagrama de conex√£o. <br><br><img src="https://habrastorage.org/webt/fk/jl/a9/fkjla91kpi2ldamqdh7zi1xyxee.png"><br><br>  Est√°vamos preparados para o fato de que a busca pela solu√ß√£o perfeita seria espinhosa e, infelizmente, esse esquema n√£o funcionou - tudo foi completamente diferente do que esper√°vamos.  Como resultado, fomos confrontados com novos problemas com o som, ou melhor, com sua completa aus√™ncia na transmiss√£o.  Supunha-se que uma placa de captura de v√≠deo conectada ao hub da sala via HDMI transmitisse som ao Xsplit, mas n√£o importa como.  N√£o havia som.  Absolutamente. <br><br>  Isso nos intrigou um pouco, depois do qual passamos mais um m√™s testando v√°rias op√ß√µes de conex√£o com sucesso vari√°vel, mas primeiro as primeiras coisas. <br><br><h3>  Alto-falante + microfone </h3><br>  A primeira coisa que tentamos foi colocar um alto-falante embaixo da tela de proje√ß√£o que deveria transmitir as vozes dos alto-falantes remotos, conect√°-lo ao nosso controle remoto e colocar um microfone na frente dele que capturasse o som desse alto-falante.  Parecia assim: <br><br><img src="https://habrastorage.org/webt/8a/52/e9/8a52e9bmpam7bfr7n71wbr-pd_8.png"><br><br>  Testamos essa solu√ß√£o em uma reuni√£o, cujos participantes se conectaram principalmente √† sala de reuni√£o remotamente.  Surpreendentemente, o resultado foi muito bom.  Decidimos deixar esse esquema por um tempo, j√° que n√£o t√≠nhamos solu√ß√£o melhor naquele momento.  Que pare√ßa muito estranho - o principal √© que funcionou! <br><br><h3>  Migrar salas de zoom </h3><br>  "Mas e se voc√™ executar o Zoom Rooms em um laptop com o Xsplit instalado e distribuir os dois programas em diferentes tabelas virtuais?"  - Uma vez que pensamos.  Parece soar como uma solu√ß√£o ideal para atingir a meta e, ao mesmo tempo, reduzir o n√∫mero de n√≥s necess√°rios para a transmiss√£o (e que podem cair potencialmente).  Lembro-me do prov√©rbio sobre a montanha e Magomed: <br><br><img src="https://habrastorage.org/webt/4k/iz/0z/4kiz0z9uvoe7rpgxvjjnypbfvg0.png"><br><br>  A captura de v√≠deo ocorreu em √°reas de trabalho virtuais.  O Xsplit est√° aberto em uma tabela virtual, por outro, em um host com uma confer√™ncia de trabalho.  Se antes transmitimos a tela inteira, aproveitamos a oportunidade para capturar o processo em execu√ß√£o.  Ao mesmo tempo, o console de mixagem estava conectado ao laptop, portanto n√£o era mais necess√°rio direcionar o microfone para o alto-falante.  O Xsplit tamb√©m capturou as vozes dos telecomutadores participantes da confer√™ncia por meio do aplicativo Zoom. <br><br>  De fato, essa op√ß√£o foi a mais bem-sucedida. <br><br>  A primeira pergunta que mais nos preocupou foi se haveria um conflito na transfer√™ncia de √°udio entre aplicativos.  Como se viu, n√£o.  Testes mostraram que tudo funciona muito bem!  T√≠nhamos um som igualmente bom no Zoom e no YouTube!  A imagem tamb√©m agradou.  Qualquer apresenta√ß√£o foi exibida no YouTube, como est√°, na qualidade 1080p.  Para entender, darei mais um diagrama - no processo de inventar v√°rias solu√ß√µes, poucas pessoas entenderam que tipo de animal n√≥s temos, ent√£o tentamos consertar tudo e fazer o m√°ximo poss√≠vel de ilustra√ß√µes: <br><br><img src="https://habrastorage.org/webt/3e/8i/ie/3e8iieffttpyedvzyt7koyfclyc.png"><br><br>  Inspirados por esse sucesso, realizamos a primeira reuni√£o com esse esquema de conex√£o no mesmo dia.  E tudo parecia estar indo bem, mas surgiu um problema, cuja fonte n√£o estabelecemos imediatamente.  Por motivos desconhecidos, as webcams do projetor n√£o exibiam as webcams dos alto-falantes, mas apenas o conte√∫do exibido.  Infelizmente, isso n√£o foi muito agrad√°vel para o cliente interno e come√ßamos a nos aprofundar.  Aconteceu que tudo estava relacionado ao fato de termos duas telas (um projetor e uma tela de laptop) e, nas configura√ß√µes de Zoom Rooms, existe um v√≠nculo r√≠gido com o n√∫mero de telas.  Como resultado, as webcams dos participantes foram mostradas na tela do laptop, ou seja, na √°rea de trabalho virtual onde o Zoom Rooms foi lan√ßado, para que n√£o as v√≠ssemos.  N√£o h√° como mudar isso, ent√£o fomos for√ßados a abandonar essa decis√£o.  Isso √© um fiasco. <br><br><h3>  Abaixo a captura de v√≠deo! </h3><br>  No mesmo dia, decidimos tentar abandonar a placa de captura de v√≠deo (e finalmente a fizemos completamente) e colocar o projetor no modo "Screen Repeat" para que o host determine apenas uma tela, conforme necess√°rio.  Quando tudo foi configurado, uma nova transmiss√£o de teste foi ... <br><br><img src="https://habrastorage.org/webt/vx/mg/_2/vxmg_2i_lrwefis54eugschtp2e.png"><br><br>  Tudo funcionou como deveria.  Todos os participantes da confer√™ncia estavam vis√≠veis no projetor (testado por quatro), o som era excelente, a imagem era boa.  "Esta √© uma vit√≥ria!"  - Pensamos, mas a realidade, como sempre, est√° atingindo furtivamente.  Nosso mais recente laptop Core-i7 de oitava gera√ß√£o, com uma placa gr√°fica discreta e 16 gigabytes de RAM, come√ßou a engasgar ap√≥s 30 minutos de √©ter de teste.  O processador simplesmente n√£o suportava a carga, trabalhava a 100% e, como resultado, superaquecia.  Por isso, fomos confrontados com a limita√ß√£o do processador, o que acabou resultando em uma dispers√£o de imagens e sons.  A apresenta√ß√£o que na tela do projetor, que no YouTube, se transformou em uma confus√£o de pixels, e n√£o havia absolutamente nada no som, era imposs√≠vel entender.  Ent√£o nossa primeira vit√≥ria foi outro fiasco.  Al√©m disso, j√° pensamos em montar uma √°rea de trabalho de serpentina completa para n√≥s ou fazer o que temos. <br><br><h3>  Novo h√°lito </h3><br>  Achamos que montar uma √°rea de trabalho n√£o √© a solu√ß√£o que gostar√≠amos de aplicar: √© caro, ocupa muito espa√ßo (voc√™ precisa manter uma √°rea de trabalho completa em vez de uma mesa de cabeceira compacta) e, em caso de falta de energia, perdemos tudo.  Mas, nessa √©poca, nossas id√©ias sobre como fazer tudo funcionar em conjunto estavam quase esgotadas.  E ent√£o decidimos retornar √† solu√ß√£o anterior e finaliz√°-la.  Em vez de transferir o host, decidimos tentar fazer um participante de pleno direito na confer√™ncia do nosso laptop com nossos microfones e conta.  Novamente, foi feita uma ilustra√ß√£o para entender o que estava acontecendo em geral. <br><br><img src="https://habrastorage.org/webt/ua/i9/c6/uai9c6pw1lvgedw0ejsbe4ccxms.png"><br><br>  Devo dizer imediatamente que essa decis√£o acabou sendo exatamente a que precis√°vamos. <br><br>  O host trabalhou no NUC e apenas o carregou, e o laptop com o cliente carregou apenas o Xsplit (experimentos anteriores mostraram que ele o puxa perfeitamente).  Nesta solu√ß√£o, o Zoom Rooms tem as seguintes vantagens sobre a conex√£o com fio convencional: <br><br><ol><li>  A exibi√ß√£o do conte√∫do na tela atrav√©s do Zoom Rooms √© convenientemente controlada usando o tablet host.  Iniciar, encerrar, gerenciar uma confer√™ncia ou reuni√£o √© muito mais conveniente na tela do tablet do que executar uma certa sequ√™ncia de a√ß√µes para controlar a reuni√£o. </li><li>  Para conectar-se √† sala, sempre temos um link - este √© o ID da reuni√£o, pelo qual todos os participantes se conectam, n√£o precisa ser enviado a todos pessoalmente, pois os an√∫ncios de transmiss√£o no messenger corporativo sempre cont√™m esse link. </li><li>  Ter uma conta Zoom Premium para um host de sala √© muitas vezes mais lucrativa do que entreg√°-la pessoalmente a cada funcion√°rio do escrit√≥rio que usar√° o sistema de videoconfer√™ncia. </li><li>  Como o host e o laptop necess√°rios para as transmiss√µes n√£o est√£o mais conectados um ao outro, podemos dizer que temos um sistema tolerante a falhas: quando voc√™ desconecta um dispositivo, podemos restaurar a transmiss√£o sem interromper a confer√™ncia.  Por exemplo, se um laptop com transmiss√£o falhar, e usando o tablet, come√ßaremos a gravar a reuni√£o na nuvem;  se a NUC cair, nem a confer√™ncia nem a transmiss√£o terminam, basta trocar o projetor da NUC para o laptop conectado ao Zoom e continuar assistindo. </li><li>  Os convidados costumam vir ao escrit√≥rio com seus dispositivos e apresenta√ß√µes.  Nesta solu√ß√£o, conseguimos evitar problemas eternos com a conex√£o √† tela via cabo - o h√≥spede s√≥ precisa seguir o nosso link e ele se tornar√° automaticamente um participante da reuni√£o.  No entanto, ele n√£o precisa baixar o aplicativo, tudo funciona bem atrav√©s do navegador. </li></ol><br>  Al√©m disso, √© muito conveniente controlar a imagem no pr√≥prio YouTube, pois podemos alterar seu tamanho, mudar o foco do conte√∫do para a webcam etc.  Essa op√ß√£o acabou sendo ideal para n√≥s, e √© exatamente isso que usamos at√© hoje. <br><br><h3>  Conclus√£o </h3><br>  Talvez tenhamos sugado o problema do dedo e a solu√ß√£o certa esteja na superf√≠cie ou ainda esteja, mas ainda n√£o o vemos, mas o que temos hoje √© a base que queremos desenvolver ainda mais.  √â poss√≠vel que um dia abandonemos o Zoom em favor de uma solu√ß√£o mais conveniente e de alta qualidade, mas n√£o ser√° hoje.  Hoje, temos o prazer de saber que nossa solu√ß√£o funciona e todos os funcion√°rios passaram a usar o Zoom.  Foi uma experi√™ncia muito interessante que quer√≠amos compartilhar e ficaremos felizes em descobrir como nossos colegas do workshop resolveram problemas semelhantes usando outras ferramentas - escreva nos coment√°rios! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473374/">https://habr.com/ru/post/pt473374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473362/index.html">Experi√™ncia GSoC: como dois (tr√™s) alunos realmente aprimoraram o c√≥digo CRIU</a></li>
<li><a href="../pt473364/index.html">H√° um g√≥bio, balan√ßando: uma lista de verifica√ß√£o para o com√©rcio eletr√¥nico na temporada de vendas</a></li>
<li><a href="../pt473366/index.html">O que est√° na minha tv inteligente para voc√™? Ou o que pode ser amontoado na TV?</a></li>
<li><a href="../pt473368/index.html">O MIRO √© uma plataforma de rob√¥ indoor aberta. Parte 3 - Componente de software: ESP8266</a></li>
<li><a href="../pt473372/index.html">Criando um servi√ßo simples de rastreamento de chamadas, parte 1</a></li>
<li><a href="../pt473376/index.html">Documenta√ß√£o no Windows 10X - uma nova vers√£o do sistema operacional para dispositivos com duas telas vazadas na rede</a></li>
<li><a href="../pt473378/index.html">Contratos de licen√ßa de malware</a></li>
<li><a href="../pt473380/index.html">4. Teste de carga do ponto de verifica√ß√£o Maestro</a></li>
<li><a href="../pt473384/index.html">3DToday Fest: como foi (ser√°). Impress√µes dos membros</a></li>
<li><a href="../pt473390/index.html">FDM est√° vivo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>