<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå©Ô∏è üèº üí´ Java Eastern European Conference 2018: Berichte und Eindr√ºcke üôà ‚ÜôÔ∏è üöµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gepostet von Igor Masternaya, Senior Developer, Community Leader von DataArt Java 

 Vom 18. bis 19. Mai fand in Kiew die JEEonf statt, eine der am me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java Eastern European Conference 2018: Berichte und Eindr√ºcke</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/412941/"><img src="https://habrastorage.org/webt/yg/-q/5j/yg-q5j1vqjcwmaqigggiuqll1yk.jpeg"><br><br>  <i>Gepostet von Igor Masternaya, Senior Developer, Community Leader von DataArt Java</i> <br><br>  Vom 18. bis 19. Mai fand in Kiew die JEEonf statt, eine der am meisten erwarteten Veranstaltungen f√ºr die gesamte osteurop√§ische Java-Community.  DataArt war Partner der Konferenz.  Referenten aus der ganzen Welt sprachen auf vier B√ºhnen: Volker Simonis, SAP-Vertreter bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JCP</a> und OpenJDK-Mitarbeiter, J√ºrgen H√∂ller, Pivotal Chief Engineer, Vater des geliebten Spring Framework, Klaus Ibsen, Erfinder von Apache Camel, und Hugh McKee, Evangelist bei Lightbend. <br><br>  Der Zeitplan war sehr voll: an zwei Tagen mehr als 50 Vorstellungen, jeweils 45 Minuten.  10 Minuten Pause - und zu einem neuen Bericht laufen.  Es wird lange dauern, bis alle Videos im Netzwerk angezeigt werden.  Daher werde ich kurz die Berichte beschreiben, die ich am interessantesten fand und die ich pers√∂nlich besuchte. <a name="habracut"></a><br><br><h3>  15 Jahre Fr√ºhling </h3><br>  Die Konferenz wurde von J√ºrgen H√∂ller er√∂ffnet.  Er sprach √ºber die 15-j√§hrige (!) Geschichte des Spring Frameworks, von den ‚Äûbevorzugten‚Äú XML-Konfigurationen in Version 0.9 bis zum reaktiven Spring WebFlux, der aus Forschungsprojekten hervorging, die vom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reactive Manifesto</a> beeinflusst wurden.  J√ºrgen sprach √ºber die Koexistenz von Spring MVC und Spring WebFlux im Fr√ºhjahr WEB und erkl√§rte, warum sie beschlossen, sie nicht zu integrieren.  Der Punkt ist, dass die Hauptabstraktion von Spring MVC Servlet API 3.0 und blockierende E / A ist, w√§hrend Spring WebFlux die Abstraktion von reaktiven Streams und nicht blockierenden E / A verwendet.  Sie k√∂nnen Ihren Dienst unter SpringWebFlux auf jedem Server ausf√ºhren, der nicht blockierende E / A unterst√ºtzt: Netty, neue Versionen von Tomcat (&gt; 8.5), Jetty.  Das Erstellen reaktiver WebFlux-Controller unterscheidet sich nicht wesentlich vom Erstellen mit Spring MVC, es gibt jedoch immer noch Unterschiede.  Der reaktive Controller verarbeitet eine Benutzeranforderung nicht im √ºblichen Sinne, sondern erstellt eine Pipeline zur Verarbeitung der Anforderung.  Der Dispatcher ruft die Controller-Methode auf, die eine Pipeline erstellt und diese sofort als Publisher-Stream bereitstellt.  Der Publisher-Stream in Reactive Spring wird als zwei Abstraktionen dargestellt: Flux / Mono.  Flux gibt einen Strom von Objekten zur√ºck, w√§hrend Mono immer ein einzelnes Objekt zur√ºckgibt. <br><br>  J√ºrgen erw√§hnte auch die Bequemlichkeit der Verwendung von Java 8-Stil bei der Arbeit mit Spring 5.0 und versprach einen Release-Kandidaten Spring 5.1 im Juli 2018 und ein Release im September, das Java 11 unterst√ºtzen und an der Feinabstimmung der neuen Spring 5.0-Funktionen arbeiten wird <br><br><h3>  Python / Java-Integration </h3><br>  Es gab viele Berichte, und es war schwierig, den interessantesten im n√§chsten Slot auszuw√§hlen.  Die Beschreibungen waren ebenso interessant, also vertraute ich meinen Instinkten und beschloss, Tamas Rozman, dem Vizepr√§sidenten von BlackRock aus Ungarn, zuzuh√∂ren.  Aber es w√§re besser, wenn ich noch einmal √ºber Events Sourcing und CQRS h√∂ren w√ºrde.  Nach der Beschreibung ist das Unternehmen in Data Science f√ºr einen gro√üen Investmentfonds t√§tig.  Der Bericht sollte zeigen, wie sie ein skalierbares, stabiles System erstellt haben, das sowohl f√ºr Datenanalysten mit ihrem Python als auch f√ºr Java-Entwickler des Hauptsystems geeignet ist.  Es schien mir jedoch zweifelhaft, dass sich das konstruierte System wirklich als praktisch herausstellte.  Um sich mit Python und Java anzufreunden, hatten die Ingenieure von BlackRock die Idee, einen Python-Interpreter als Prozess aus einer Java-Anwendung heraus zu starten.  Sie kamen aus mehreren Gr√ºnden dazu: <br><ul><li>  Jython (Python in der JVM) passte aufgrund veralteter Codebasis 2.7 gegen√ºber CPython 3.6 nicht. </li><li>  Sie betrachteten die Option, die Logik von Data Science in Java neu zu schreiben, als zu langen Prozess. </li><li>  Apache Spark hat beschlossen, es nicht zu verwenden, da Sie, wie der Redner erkl√§rte, keine in Java und Python geschriebenen Workloads mischen k√∂nnen.  Obwohl nicht klar ist, warum UDF und UDFA nicht passten [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2</a> ].  Au√üerdem passte Spark nicht, weil sie bereits einen Jobrahmen hatten und nicht wirklich einen neuen einf√ºhren wollten.  Wie sich herausstellte, verf√ºgen sie auch nicht √ºber Big Data, und die gesamte Verarbeitung erfolgt √ºber Statistiken zu erb√§rmlichen 100-MB-Dateien. </li></ul><br><br>  Die Kommunikation von Java mit dem Python-Prozess wurde mithilfe von Speicherzuordnungsdateien (eine Datei wird als Eingabedatendatei verwendet) und Befehlen (die zweite Datei ist die Ausgabe des Python-Prozesses) organisiert.  Kommunikation war also etwas in Form von: <br><br><pre>  Java: calcExr |  1 + javaFunc (sqrt (36))
 Python: 1 + javaFunct | 6
 Java: 1 + Erfolg | 64
 Python: Erfolg |  65 </pre><br><br>  Die Hauptprobleme einer solchen Integration nannte Tamas den Overhead w√§hrend der Serialisierung und Deserialisierung von Eingabe- / Ausgabeparametern. <br><br><img src="https://habrastorage.org/webt/zz/l9/vt/zzl9vtuqxaff5kn7rvdqtpgsbey.jpeg"><br><br><h3>  Java 10 App CDS </h3><br>  Nach einer Pr√§sentation √ºber die Feinheiten des Ausf√ºhrens von Python wollte ich unbedingt etwas zutiefst Technisches aus der Java-Welt h√∂ren.  Also ging ich zu dem Bericht von Volker Simonis, in dem er √ºber die Datenfreigabefunktion der Anwendungsklasse von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java 10+</a> sprach.  In der modernen Welt, die auf Microservices in Docker basiert, beschleunigt die gemeinsame Nutzung von Java Codecache und Metaspace den Start der Anwendung und spart Speicherplatz.  Das Bild zeigt die Ergebnisse des Starts von Docker-Tomaten mit einem gemeinsam genutzten Archiv von Tomcat-Klassen.  Wie Sie sehen k√∂nnen, sind beim zweiten Prozess einige Seiten im Speicher bereits als shared_clean markiert. Dies bedeutet, dass der aktuelle und mindestens ein Prozess (der zweite laufende Tomcat) auf sie verweist. <br><br><img src="https://habrastorage.org/webt/4b/wf/hc/4bwfhctgsicnp_ulp-r0fo08opm.png"><br><br>  Details zum Spielen mit CDS in OpenJDK 10 finden Sie unter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">App CDS</a> .  Neben der Aufteilung der Anwendungsklassen auf Prozesse ist in Zukunft geplant, internierte Zeichenfolgen im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JEP-250 gemeinsam zu nutzen</a> . <br>  Hauptbeschr√§nkungen von AppCDS: <br><br>  Funktioniert nicht mit Klassen bis 1.5. <br><ul><li>  Sie k√∂nnen keine aus Dateien geladenen Klassen verwenden (nur .jar-Archive). </li><li>  Vom Klassenladeprogramm ge√§nderte Klassen k√∂nnen nicht verwendet werden. </li><li>  Von mehreren Klassenladeprogrammen geladene Klassen k√∂nnen nur einmal wiederverwendet werden. </li><li>  Das Umschreiben von Bytecode funktioniert nicht, was zu Leistungseinbu√üen von bis zu 2% f√ºhren kann.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JDK-8074345</a> </li></ul><br><br><img src="https://habrastorage.org/webt/ql/id/ll/qlidll3gw8_b91uclq8onav6s3g.jpeg"><br><br><h3>  Pipeline zur Verarbeitung nat√ºrlicher Sprache mit Apache Spark </h3><br>  Der Bericht √ºber NLP und Apache Spark wurde von Vitaliy Kotlyarenko - Ingenieur von Grammarly - pr√§sentiert.  Vitaliy zeigte, wie Grammatik-Prototypen NLP-Jobs auf Apache Zeppelin.  Ein Beispiel war der Aufbau einer einfachen Pipeline f√ºr die thematische Modellierung basierend auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LDA-</a> Algorithmus des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gemeinsamen Crawling-</a> Internetarchivs.  Die Ergebnisse der Themenmodellierung wurden verwendet, um Websites mit unangemessenem Inhalt als Beispiel f√ºr die Kindersicherungsfunktion zu filtern.  Zum Erstellen der Pipeline haben wir Terraform-Skripts und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AWS EMR</a> Spark-Cluster verwendet, mit denen Sie Spark-Cluster mit YARN in Amazon bereitstellen k√∂nnen.  Schematisch sieht die Pipeline folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/p6/m7/wp/p6m7wpmj43z9dyesvyjfptjf3z4.png"><br><br>  Der Zweck des Berichts war es zu zeigen, dass die Verwendung moderner Frameworks zur Erstellung eines Prototyps f√ºr ML-Aufgaben recht einfach ist. Bei Verwendung von Standardbibliotheken treten jedoch immer noch Schwierigkeiten auf.  Zum Beispiel: <br><ul><li>  Beim ersten Schritt des Lesens von WARC-Dateien mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HadoopInputFormat-</a> Bibliothek st√ºrzten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IllegalStateExceptions</a> manchmal aufgrund falscher Dateikopfzeilen ab. Die Bibliothek musste neu geschrieben und falsche Dateien √ºbersprungen werden. </li><li>  Die Abh√§ngigkeiten von Guave - der Sprachdefinitionsbibliothek - kollidierten mit den Abh√§ngigkeiten, die Spark auf sich selbst zieht.  Java 8 half, mit dessen Hilfe es m√∂glich war, Abh√§ngigkeiten von Guave in die verwendete Bibliothek zu werfen. </li></ul><br><br>  W√§hrend der Demo haben wir die Ausf√ºhrung des Jobs mithilfe der Standard-Spark-Benutzeroberfl√§che und des √úberwachungssubsystems <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ganglia</a> √ºberwacht, das bei der Bereitstellung in AWS EMR automatisch verf√ºgbar ist.  Der Autor konzentrierte sich auf die Heatmap-Server-Lastverteilung, die die Lastverteilung zwischen den Knoten im Cluster zeigt, und gab allgemeine Ratschl√§ge zur Optimierung der Arbeit von Spark Job: Erh√∂hen der Anzahl der Partitionen, Optimieren der Datenserialisierung, Analysieren von GC-Protokollen.  Weitere Informationen zur Optimierung von Spark-Jobs finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Die Quelldateien f√ºr die Demo finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github des</a> Autors des Berichts. <br><br><h3>  Graal, Tr√ºffel, SubstrateVM und andere Vorteile: Was sind das und warum brauchen Sie sie? </h3><br>  Am meisten erwartet wurde f√ºr mich ein Bericht von Oleg Chirukhin von JUG.ru.  Er erz√§hlte, wie man den fertigen Code mit dem Gral optimiert.  Was ist der Gral?  Grail ist eine Marke von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Oracle Labs</a> , die den JIT-Compiler (Just-in-Time), das Framework zum Schreiben von DSL-Sprachen - Truffle - und die spezielle JVM ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SubstrateVM</a> ) - eine universelle virtuelle Maschine mit <a href="">geschlossener Welt</a> , f√ºr die Sie in JavaScript schreiben k√∂nnen. Ruby, Python, Java, Scala.  Der Bericht konzentrierte sich auf den JIT-Compiler und seine Tests in der Produktion. <br><br>  Erinnern Sie sich zun√§chst an den Prozess der Ausf√ºhrung von Code auf dem Java-Computer und beachten Sie, dass Java bereits zwei Compiler hat: C1 (Client-Compiler) und C2 (Server-Compiler).  Grail kann als C2-Compiler verwendet werden. <br><br><img src="https://habrastorage.org/webt/3k/qk/lt/3kqklt1q02gtnej89a0wa2ttou0.png"><br><br>  Auf die Frage, warum wir einen anderen Compiler ben√∂tigen, antwortete einer der Mitarbeiter von Oracle Labs, Dr. Chris Seaton, im Artikel ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verstehen, wie Graal funktioniert‚Äú</a> sehr gut.  Kurz gesagt, die urspr√ºngliche Idee des Graal-Projekts sowie des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Metropolis-</a> Projekts besteht darin, Teile des in C ++ in Java geschriebenen JVM-Codes neu zu schreiben.  Dies wird es in Zukunft erm√∂glichen, den Code bequem zu erg√§nzen.  Eine der Optimierungen - P <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">artial Escape Analysis</a> - befindet sich beispielsweise bereits im Grail, jedoch nicht im Hotspot, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">da das Erweitern des Grail-Codes viel einfacher ist als der C2-Code</a> . <br><br>  Das h√∂rt sich toll an, aber wie wird das in meinem Projekt in der Praxis funktionieren, fragen Sie?  Gral eignet sich f√ºr Projekte: <br><br><ul><li>  Welche viel M√ºll, viele kleine Objekte schaffen. </li><li>  Geschrieben im Stil von Java 8, mit einer Reihe von Streams und Lambdas. </li><li>  Verwendung verschiedener Sprachen: Ruby, Java, R. </li></ul><br><br>  Als einer der ersten in der Produktion wurde der Gral auf Twitter verwendet.  Mehr dazu lesen Sie in einem auf Habr√© ver√∂ffentlichten Interview mit Christian Talinger ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">interview_1</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">interview_2</a> ).  Dort erkl√§rt er, dass Twitter durch das Ersetzen von C2 durch Graal etwa 8% der CPU-Auslastung einsparte, was angesichts der Gr√∂√üe des Unternehmens ziemlich gut ist. <br><br>  Auf der Konferenz konnten wir auch die Geschwindigkeit von Graal √ºberpr√ºfen, indem wir einen der Scala-Benchmarks darunter starteten - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scala DaCapo</a> .  Infolgedessen bestand der Benchmark auf Graal in ~ 7000 ms und auf einer regul√§ren JVM in ~ 14000 ms!  Warum dies passiert ist, k√∂nnen Sie anhand der gclog-Tests sehen.  Die Anzahl der Zuordnungsfehler bei Verwendung von Graal ist erheblich geringer als die von Hotspot.  Sie k√∂nnen jedoch immer noch nicht sagen, dass der Grail die L√∂sung f√ºr die Leistungsprobleme Ihrer Java-Anwendung sein wird.  Oleg zeigte in seinem Bericht auch eine Fehlergeschichte, in der er die Arbeit von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apache Ignite</a> unter dem Gral und ohne sie verglich - es gab keine merkliche Leistungs√§nderung. <br><br><img src="https://habrastorage.org/webt/wg/a9/9i/wga99iykqcg8ubellwz6_upyy9o.jpeg"><br><br><h3>  Entwerfen fehlertoleranter Microservices </h3><br>  Ein weiterer Bericht √ºber die ausfallsichere Microservice-Architektur wurde von Orkhan Gasimov von AppsFlyer gelesen.  Er f√ºhrte beliebte Entwurfsmuster f√ºr die Erstellung verteilter Anwendungen ein.  Wir kennen vielleicht viele von ihnen, aber herumlaufen und sich an jeden von ihnen erinnern, wird √ºberhaupt nicht schaden. <br><br>  Die Hauptprobleme der Fehlertoleranz von Diensten, mit denen die im Bericht beschriebenen Muster bek√§mpft werden sollen, sind: Netzwerk, Spitzenlasten, RPC-Kommunikationsmechanismen zwischen Diensten. <br>  Um Probleme mit dem Netzwerk zu l√∂sen, wenn einer der Dienste nicht mehr verf√ºgbar ist, m√ºssen wir ihn schnell durch einen anderen ersetzen k√∂nnen.  In der Praxis kann dies mit mehreren Instanzen desselben Dienstes und einer Beschreibung alternativer Pfade zu diesen Instanzen erreicht werden, bei denen es sich um ein Diensterkennungsmuster handelt.  Die Teilnahme an <b>Heartbeat-</b> Diensten und die Registrierung neuer Dienste erfolgt in einer separaten Instanz - der Dienstregistrierung.  Es ist √ºblich, den bekannten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zookeeper</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konsul</a> als Serviceregistrierung zu verwenden.  Die wiederum einen verteilten Charakter haben und die Fehlertoleranz unterst√ºtzen. <br><br>  Nachdem wir die Probleme mit dem Netzwerk gel√∂st haben, wenden wir uns dem Problem der Spitzenlasten zu, wenn einige Dienste unter Last stehen und Anforderungen viel langsamer verarbeiten als im regul√§ren Modus.  Um dies zu l√∂sen, k√∂nnen Sie das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">automatische Skalierungsmuster verwenden</a> .  Er wird nicht nur die Aufgabe √ºbernehmen, hoch ausgelastete Dienste automatisch zu skalieren, sondern auch die Instanzen nach der Spitzenlastzeit zu stoppen. <br><br>  Das letzte Kapitel des Berichts des Autors war eine Beschreibung m√∂glicher Probleme der internen RPC-Kommunikation zwischen Diensten.  Urahan widmete der These "Der Benutzer sollte nicht lange auf eine Fehlermeldung warten" besondere Aufmerksamkeit.  Eine solche Situation kann auftreten, wenn seine Anfrage von der Servicekette verarbeitet wird und das Problem am Ende der Kette liegt: Dementsprechend kann der Benutzer warten, bis die Anfrage von jedem der Services in der Kette verarbeitet wird, und erh√§lt erst in der letzten Phase einen Fehler.  Am schlimmsten ist es, wenn der Enddienst √ºberlastet ist und der Client nach langem Warten einen bedeutungslosen HTTP-FEHLER erh√§lt: 500. <br><br>  Um solchen Situationen entgegenzuwirken, k√∂nnen Sie Timeouts verwenden. Anforderungen, die noch korrekt verarbeitet werden k√∂nnen, k√∂nnen jedoch in das Timeout fallen.  Dazu kann die Timeout-Logik kompliziert sein und ein spezieller Schwellenwert f√ºr die Anzahl der Servicefehler pro Zeitintervall hinzugef√ºgt werden.  Wenn die Anzahl der Fehler den Schwellenwert √ºberschreitet, verstehen wir, dass der Dienst unter Last steht, und betrachten ihn als nicht verf√ºgbar, sodass er die erforderliche Zeit hat, um aktuelle Aufgaben zu erledigen.  Dieser Ansatz beschreibt das Leistungsschaltermuster.  Sie k√∂nnen CircuitBreaker.html "&gt; Circuit Beaker auch als zus√§tzliche Messgr√∂√üe f√ºr die √úberwachung verwenden, mit der Sie schnell auf m√∂gliche Probleme reagieren und klar erkennen k√∂nnen, bei welchen Serviceketten sie auftreten. Dazu muss jeder Serviceabruf in Circuit Breaker eingeschlossen werden. <br><br>  In dem Bericht erinnerte der Autor auch an das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">N-Modular-Redundanzmuster</a> , mit dem ‚ÄûAnforderungen nach M√∂glichkeit schneller verarbeitet werden sollen‚Äú, und lieferte ein sch√∂nes Beispiel f√ºr die Verwendung zur Validierung der Adresse eines Kunden.  Die Anfrage in ihrem System √ºber den Adresscache wurde sofort an mehrere Geo Map-Anbieter gesendet, wodurch die schnellste Antwort gewonnen wurde. <br><br>  Zus√§tzlich zu den beschriebenen Mustern wurden folgende erw√§hnt: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Fast Path-</b> Muster</a> , das beispielsweise beim Zwischenspeichern von Abfrageergebnissen angewendet werden kann.  Dann ist der Cache-Zugriff ein schneller Weg. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Fehlerkernmuster</b></a> - Ein Muster aus der Welt von Akka, bei dem eine Aufgabe in Unteraufgaben unterteilt und Unteraufgaben an nachgeschaltete Akteure delegiert werden.  Auf diese Weise wird die Flexibilit√§t der Verarbeitung von Ausf√ºhrungsfehlern f√ºr Unteraufgaben erreicht. </li><li>  <b>Instanzheiler</b> , der die Existenz eines speziellen Dienstes voraussetzt - ein Supervisor, der andere Dienste verwaltet und auf √Ñnderungen in ihrem Status reagiert.  Beispielsweise kann der Supervisor bei Fehlern im Dienst den Problemdienst neu starten. </li></ul><br><br><img src="https://habrastorage.org/webt/am/ik/kr/amikkrgoxhuaajndqk1zgfhv12u.jpeg"><br><br><h3>  Clustered Event Sourcing und CQRS mit Akka und Java </h3><br>  Der letzte Bericht, auf den ich Sie aufmerksam machen m√∂chte, wurde von einem der Lightbend-Evangelisten und Architekten Hugh McKee gelesen.  Lightbend (fr√ºher Typesafe) ist so etwas wie Oracle, aber f√ºr die Scala-Sprache.  Das Unternehmen entwickelt au√üerdem aktiv das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akka.io-</a> Framework.  In einem Bericht sprach Hugh √ºber die Implementierung des beliebten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CQRS-</a> Ansatzes (Command Query Responsibility Commands / SEGREGATION) f√ºr das Akka-Framework.  Schematisch sieht die Architektur des CQRS-Systems folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/n-/jy/in/n-jyin0xfhmrsqxlixxwh478ot0.png"><br><br>  Hugh nahm einen Prototyp einer Bank als Beispiel f√ºr ein funktionierendes System.  Ein Client in der CQRS-Architektur f√ºhrt zwei Operationen aus: Abfrage, Befehl.  Jedes Team (z. B. eine Bank√ºberweisung, die Geld von einem Konto auf ein anderes √ºberweist) generiert ein Ereignis (eine vollendete Tatsache), das im EventStore aufgezeichnet wird (z. B. Cassandra).  Die Aggregation der Kette (Geld auf ein Konto einzahlen, von Konto zu Konto √ºberweisen, an einem Geldautomaten abheben) von Ereignissen bildet den aktuellen Status des Kunden, seinen Geldbetrag auf dem Konto.  Anforderungen f√ºr den aktuellen Status werden an ein separates Repository gesendet, eine Momentaufnahme des Ereignis-Repositorys, da es keinen Sinn macht, den vollst√§ndigen Verlauf eines Bankkontos zu f√ºhren.  Es reicht aus, die Statusumwandlung f√ºr jeden Benutzer regelm√§√üig zu aktualisieren. <br><br>  Dieser Ansatz erm√∂glicht die automatische Wiederherstellung, wenn Fehler auftreten. Dazu m√ºssen wir die letzte Umwandlung des Benutzerstatus abrufen und alle Ereignisse anwenden, die vor dem Auftreten des Fehlers aufgetreten sind.  Aufgrund des Vorhandenseins von zwei Speichern toleriert die CQRS-Architektur die auftretenden Spitzenlasten (Spikes) gut.  Eine gro√üe Anzahl von Ereignissen l√§dt den Ereignisspeicher, wirkt sich jedoch nicht auf den Lesespeicher aus, und Benutzer k√∂nnen weiterhin Abfragen an die Datenbank ausf√ºhren. <br><br>  Kehren wir zum Prototyping des Bankensystems auf Akka und CQRS zur√ºck.  Jeder Kunde der Bank / des Kontos / des m√∂glichen Teams im System wird von einem (!) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akteur vertreten</a> .  Eine gro√üe Bank kann Hunderttausende von Konten unterst√ºtzen, und dies wird f√ºr Akka kein Problem sein.  Das Out-of-the-Box-Framework unterst√ºtzt Clustering und kann auf Hunderten von JVMs ausgef√ºhrt werden.  Wenn einer der Computer im Cluster ausf√§llt, bietet Akka spezielle Mechanismen, die automatisch auf solche Situationen reagieren: In unserem Fall kann der Akteur des Clients auf jedem verf√ºgbaren Computer im Cluster erneut erstellt werden, und sein Status wird erneut aus dem Repository gelesen. <br><br>  F√ºr einen Akteur wird kein separater Thread erstellt. Dadurch k√∂nnen Zehntausende von Akteuren innerhalb einer einzelnen JVM unterst√ºtzt werden.  Gleichzeitig garantiert der Akteur, dass jede Anfrage separat (!) In der Reihenfolge des Eingangs der Anfragen bearbeitet wird.  Diese Garantie eliminiert automatisch m√∂gliche Rennbedingungen bei der Bearbeitung von Anfragen.  Sie k√∂nnen den Prototyp des Systems genauer verstehen, indem Sie den Code √ºber die Links in GitHub √∂ffnen.  Jedes Teilprojekt zeigt die Implementierung der komplexesten Phasen der Erstellung eines Prototyps: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akka-Clustering f√ºr verteilte Akteure</a> ist ein einfaches Beispiel f√ºr die Erstellung eines <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akka-Clusters</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akka-Cluster-Singleton</a> zeigt, wie ein Singleton-Muster in einer verteilten Akka-Umgebung implementiert wird. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verteiltes Sharding</a> von Entit√§ten Das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Akka-Cluster-Sharding</a> ist ein Beispiel f√ºr die Verwaltung der Verteilung von Entit√§ten in einem Cluster und das Routing von Clientanforderungen. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CQRS - Write Side Akka Persistence</a> - Aufzeichnung von Ereignissen im Repository. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CQRS - Read Side Akka Persistence Query</a> - Verarbeitung von Client-Anforderungen </li></ul>  Wespen. <br><br>  Die Aufzeichnungen aller Berichte werden innerhalb weniger Wochen online angezeigt.  Ich hoffe, dass dieser Artikel Ihnen dabei hilft, die Anzeigereihenfolge zu bestimmen, zumal ich denke, dass es sich lohnt, die Auff√ºhrungen anzusehen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412941/">https://habr.com/ru/post/de412941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412927/index.html">Was am Wochenende zu sehen ist: 5 Filme √ºber Hacker</a></li>
<li><a href="../de412929/index.html">Fintech-Digest: Von der GD genehmigte Kryptow√§hrungsgesetze, die nicht mit Experten √ºbereinstimmen, werden Fintech-L√∂sungen immer beliebter</a></li>
<li><a href="../de412933/index.html">Tesla hat den Quellcode f√ºr Model S / X 2018.12 teilweise ge√∂ffnet</a></li>
<li><a href="../de412937/index.html">Demo-Hack: PenTest Show zeigt, wie einfach es ist, das B√ºronetzwerk und die Sicherheitssysteme zu hacken, um etwas zu stehlen</a></li>
<li><a href="../de412939/index.html">Tester gegen das Testen</a></li>
<li><a href="../de412945/index.html">Abh√§ngigkeitsmanager</a></li>
<li><a href="../de412947/index.html">Lasttests in der Azure-Cloud. Wie teste ich einen gro√üen Online-Shop unter realen Bedingungen?</a></li>
<li><a href="../de412949/index.html">Astrologen k√ºndigen eine Woche iOS-Entwicklung in Avito an</a></li>
<li><a href="../de412951/index.html">DotVVM - Kommunikation zwischen Client und Server</a></li>
<li><a href="../de412953/index.html">Intel RealSense d435 Kamerakalibrierung mit OpenCV2 und ROS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>