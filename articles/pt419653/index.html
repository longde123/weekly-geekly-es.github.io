<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐁 🎒 👨‍👦 Como fazer pesquisas de usuários no GitHub sem React + RxJS 6 + Recompose 👨🏻‍🚒 🕊️ 😽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo é uma resposta ao artigo de tradução “Como pesquisar usuários no GitHub usando o React + RxJS 6 + Recompose” , que ontem nos ensinou como ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como fazer pesquisas de usuários no GitHub sem React + RxJS 6 + Recompose</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419653/">  Este artigo é uma resposta ao artigo de tradução <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">“Como pesquisar usuários no GitHub usando o React + RxJS 6 + Recompose”</a> , que ontem nos ensinou como usar o React, o RxJS e o Recompose juntos.  Bem, proponho agora ver como isso pode ser implementado sem essas ferramentas. <br><br><img src="https://habrastorage.org/webt/o_/ig/ob/o_igobe416ik1nqyqp0pa8m0dbo.png"><br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Isenção de responsabilidade</b> <div class="spoiler_text">  <i>Pode parecer para muitos que este artigo contém elementos de trolling, foi escrito às pressas e em um fã ... Então é isso.</i> <br></div></div><br><br>  Como este é um artigo de retorno, decidi compilá-lo no mesmo formato passo a passo que o original.  Além disso, o artigo também tem como objetivo comparar a implementação original com a descrita aqui.  Portanto, contém uma abundância de referências e citações do original.  Vamos começar. <br><br><blockquote>  Este artigo é para pessoas com experiência com React e RxJS.  Estou apenas compartilhando modelos que achei úteis para criar uma interface do usuário. </blockquote><br>  Este artigo é para pessoas com experiência em Javascript (ES6), HTML e CSS.  Além disso, em minha implementação, usarei a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estrutura</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SvelteJS</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">“desaparecendo”</a> , mas é tão simples que você não precisa ter experiência em usá-la para entender o código. <br><br>  Estamos fazendo a mesma coisa: <br><br><img src="https://habrastorage.org/webt/td/kk/jm/tdkkjm_g27kgq-l5h881veo9i5q.gif"><br><br><blockquote>  Sem classes, trabalhando com um ciclo de vida ou setState. </blockquote><br>  Sim, sem classes, trabalhando com um ciclo de vida ou setState.  E também sem React, ReactDOM, RxJS, Recompose.  Além disso, sem componentFromStream, createEventHandler, combineLatest, map, startWith, setObservableConfig, BehaviorSubject, merge, of, catchError, delay, filter, map, arranque, switchMap, toque em {outra besteira} ... Em resumo, você entende. <br><br><h3>  Preparação </h3><br>  Tudo o que você precisa está no meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">exemplo do REPL</a> no site do SvelteJS.  Você pode cheirar lá, localmente, baixando a fonte de lá (botão com um ícone de característica). <br><br>  Primeiro, crie um arquivo simples App.html, que será o componente raiz do nosso widget, com o seguinte conteúdo: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GitHub username"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">input</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid black; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-radius</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin-bottom</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  A seguir, uso os estilos do artigo original.  No momento, eles estão no escopo, ou seja,  se aplicam apenas a este componente e você pode usar com segurança os nomes das tags, quando relevante. <br><br>  Escreverei estilos diretamente nos componentes, porque o SFC e também porque o REPL não suporta a exportação de CSS / JS / HTML para arquivos diferentes, embora isso seja feito facilmente com os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pré-processadores Svelte</a> . <br><br><h3>  <s>Recompor</s> </h3><br>  Descansando ... <br><br><h3>  <s>Componente em linha</s> </h3><br>  ... banhos de sol ... <br><br><h3>  <s>Configuração</s> </h3><br>  ... tomando café ... <br><br><h3>  <s>Recompor + RxJS</s> </h3><br>  ... enquanto outros ... <br><br><h3>  <s>Mapa</s> </h3><br>  ... trabalho. <br><br><h3>  Adicionar um manipulador de eventos </h3><br>  Não é realmente um manipulador, é claro, apenas uma ligação: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">username</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GitHub username"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Bem, definimos o valor padrão do nome de usuário: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">username</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript"> }; } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Agora, se você começar a digitar algo no campo de entrada, o valor do nome de usuário será alterado. <br><img src="https://habrastorage.org/webt/3h/xj/ew/3hxjewq7xkgqe_uhg5dqdbvt4wy.gif"><br><br><h3>  <s>Problema com ovo e galinha</s> </h3><br>  Sem galinhas, sem ovos, sem problemas com outros animais, não usamos RxJS. <br><br><h3>  <s>Tricotar juntos</s> </h3><br>  Tudo já está reativo e conectado.  Então, tomamos café. <br><br><h3>  Componente do usuário </h3><br><blockquote>  Este componente será responsável por exibir o usuário cujo nome iremos transferir para ele.  Ele receberá valor do componente App e o converte em uma solicitação AJAX. </blockquote><br>  “Uau uau uau, vá com calma” © <br><br>  Conosco, este componente será estúpido e apenas exibirá um belo cartão de usuário de acordo com um modelo conhecido anteriormente.  Não importa de onde os dados possam vir e / ou em que local da interface queremos mostrar este cartão. <br><br>  O componente User.html será parecido com este: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"github-card user-card"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header User"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"avatar"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{avatar_url}&amp;s=80"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{name}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{name || login}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}?tab=repositories"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{public_repos}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Repos <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://gist.github.com/{login}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{public_gists}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Gists <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}/followers"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{followers}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Followers <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*  */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h3>  <s>Jsx / css</s> </h3><br>  CSS foi adicionado apenas ao componente.  Em vez de JSX, temos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HTMLx</a> incorporado no Svelte. <br><br><h3>  <s>Container</s> </h3><br>  O contêiner é qualquer componente pai para o componente Usuário.  Nesse caso, é um componente do aplicativo. <br><br><h3>  <s>debounceTime</s> </h3><br>  A depuração da entrada de texto não faz sentido se a operação substituir apenas o valor no modelo de dados.  Portanto, na própria ligação, não precisamos disso. <br><br><h3>  <s>arrancar</s> </h3><br><h3>  <s>filtrar</s> </h3><br><h3>  <s>mapa</s> </h3><br><h3>  Conectar </h3><br>  Vamos voltar ao App.html e importar o componente Usuário: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> User <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./User.html'</span></span>;</code> </pre><br><br><h3>  Pedido de dados </h3><br><blockquote>  O GitHub fornece uma API para recuperar informações do usuário: </blockquote><br>  Para demonstração, basta escrever um pequeno arquivo api.js. que abstrairá o recebimento de dados e exportará a função correspondente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserCard</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> axios.get(<span class="hljs-string"><span class="hljs-string">`https://api.github.com/users/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${username}</span></span></span><span class="hljs-string">`</span></span>) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.data); }</code> </pre><br><br>  E assim, importamos essa função para App.html. <br><br>  Agora, formulamos o problema em um idioma mais específico: precisamos alterar outro valor ao alterar um valor no modelo de dados (nome de usuário).  Nós o chamaremos de usuário, respectivamente - dados do usuário que obtemos da API.  Reatividade em toda a sua glória. <br><br>  Para fazer isso, escreva uma propriedade Svelte calculada usando a seguinte construção em App.html: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { getUserCard } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./api.js'</span></span></span><span class="javascript">; ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">user</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ username }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> username &amp;&amp; getUserCard(username) } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  É isso, agora, quando você altera o nome de usuário, uma solicitação será enviada para receber dados sobre esse valor.  No entanto, como os binders respondem a todas as alterações, ou seja, inserem um campo de texto, haverá muitas solicitações e excederemos rapidamente todos os limites disponíveis. <br><br>  No artigo original, esse problema é resolvido pela função debounceTime incorporada ao RxJS, o que nos impede de solicitar dados com muita frequência.  Para nossa implementação, você pode usar a solução autônoma, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">debounce-promessa</a> ou qualquer outra solução adequada, pois há muito por onde escolher. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> debounce </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'debounce-promise'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { getUserCard } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./api.js'</span></span></span><span class="javascript">; ... const getUser = debounce(getUserCard, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1000</span></span></span><span class="javascript">); ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">user</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ username }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> username &amp;&amp; getUser(username) } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Portanto, essa lib cria uma versão de rejeição da função passada para ela, que usamos na propriedade computada. <br><br><h3>  <s>switchMap</s> </h3><br><h3>  ajax </h3><br><blockquote>  O RxJS fornece sua própria implementação de ajax que funciona muito bem com o switchMap! </blockquote><br>  Como não usamos RxJS e, especialmente, switchMap, podemos usar qualquer biblioteca para trabalhar com ajax. <br><br>  Uso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">axios</a> porque é conveniente para mim, mas você pode usar qualquer coisa e isso não muda a essência do assunto. <br><br><h3>  Experimente </h3><br>  Primeiro, precisamos registrar o componente Usuário para usá-lo como uma tag de modelo, pois a importação em si não adiciona o componente ao contexto do modelo: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> User </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./User.html'</span></span></span><span class="javascript">; ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">components</span></span></span><span class="javascript">: { User } ... }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Apesar do rabisco aparentemente excessivo, isso permite, entre outras coisas, atribuir nomes de tags diferentes a instâncias do mesmo componente, tornando seus modelos mais semanticamente compreensíveis. <br><br>  Além disso, o valor do usuário não são os dados em si, mas uma promessa para esses dados.  Como somos freelancers e não queremos fazer nenhum trabalho, basta tomar café com biscoitos. <br><br>  Para transferir dados reais para o componente Usuário, podemos usar um design especial para trabalhar com promessas: <br><br><pre> <code class="html hljs xml">{#await user} <span class="hljs-comment"><span class="hljs-comment">&lt;!--     --&gt;</span></span> {:then user} <span class="hljs-comment"><span class="hljs-comment">&lt;!--      .    . --&gt;</span></span> {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {/await}</code> </pre><br>  Faz sentido verificar a existência do objeto de dados antes de passá-lo para o componente Usuário.  O operador Spread aqui permite que você “divida” um objeto em objetos separados ao criar uma instância do componente Usuário. <br><br><img src="https://habrastorage.org/webt/ml/1c/1c/ml1c1c5qwdhfpq4slz_38vjoym8.gif"><br><br>  Trabalho mais curto. <br><br><h3>  Tratamento de erros </h3><br><blockquote>  Tente digitar um nome de usuário inexistente. <br>  ... <br>  Nosso aplicativo está quebrado. </blockquote><br>  Seu provavelmente sim, mas o nosso definitivamente não é))) Simplesmente nada acontecerá, embora esse certamente não seja o caso. <br><br><h3>  catchError </h3><br>  Adicione um bloco adicional ao processamento de promessa rejeitada: <br><br><pre> <code class="html hljs xml">{#await user} {:then user} {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {:catch error} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Error</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...error</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/await}</code> </pre><br><br><h3>  Erro de componente </h3><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Oops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>{response.status}: {response.data.message}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Please try searching again.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><blockquote>  Agora nossa interface do usuário parece muito melhor: </blockquote><br>  E não diga, e mais importante ainda, nenhum esforço. <br><br><img src="https://habrastorage.org/webt/ix/2k/af/ix2kaf9saodoqtihwcajw_rb2s4.gif"><br><br><h3>  Indicador de carregamento </h3><br>  Em suma, uma nova heresia começou por aí, com todos os tipos de assuntos comportamentais e outros como eles.  Apenas adicionamos um indicador de carregamento e não ordenharemos o elefante: <br><br><pre> <code class="html hljs xml">{#await user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>Loading...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> {:then user} {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {:catch error} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Error</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...error</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/await}</code> </pre><br><blockquote>  Resultado? </blockquote><br>  Dois pequenos componentes sem lógica (Usuário e Erro) e um componente de controle (App), onde a lógica de negócios mais complexa é descrita em uma linha - criando uma propriedade calculada.  Não escovar objetos observáveis ​​da cabeça aos pés e conectar +100500 ferramentas que você não precisa. <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Demonstração interativa</a> <br><br>  Escreva um código simples e claro.  Escreva menos código, o que significa menos trabalho e mais tempo com sua família.  Live! <br><br>  Toda felicidade e saúde! <br><br><blockquote>  All :) </blockquote><br><br><h4>  Fyi </h4><br>  Se você já olhou o exemplo no REPL, provavelmente notou a torrada com um aviso no canto inferior esquerdo: <br><blockquote>  Compilado, mas com 1 aviso - verifique o console para obter detalhes </blockquote><br>  Se você não estiver com preguiça de abrir o console, você verá esta mensagem: <br><blockquote>  Seletor CSS não utilizado <br>  .user-card .Organization { <br>  posição de fundo: canto superior direito; <br>  } <br></blockquote><br>  O Svelte Static Analyzer nos informa que alguns estilos de componentes não são usados.  Além disso, a seu pedido ou o comando das configurações padrão do compilador, os estilos não utilizados serão removidos do pacote css final sem a sua participação. <br><br><h4>  P / s </h4><br>  Leia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">outros artigos sobre o Svelte</a> e também procure o canal de telegrama em russo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SvelteJS</a> .  Teremos o maior prazer em vê-lo! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419653/">https://habr.com/ru/post/pt419653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419641/index.html">Criando uma AI simples de C # no Unity</a></li>
<li><a href="../pt419643/index.html">Conferência de Engenharia de Software EPAM de Minsk: Realize</a></li>
<li><a href="../pt419647/index.html">Seminário “Black Friday em e-commerce. Segredos de sobrevivência, 16 de agosto de Moscou</a></li>
<li><a href="../pt419649/index.html">Um pouco sobre gatos ou qual CAT escolhemos para podcasts de sincronização</a></li>
<li><a href="../pt419651/index.html">Nem GA nem YM. Como criamos nosso próprio fluxo de cliques</a></li>
<li><a href="../pt419655/index.html">Música no apartamento. Incorporação</a></li>
<li><a href="../pt419657/index.html">Como a inteligência coletiva foi desenvolvida para um bando de drones</a></li>
<li><a href="../pt419659/index.html">Onde Hollywood retrata os hackers corretamente e onde - erroneamente</a></li>
<li><a href="../pt419661/index.html">Fazendo uma estação de rádio a partir do GTA: San Andreas</a></li>
<li><a href="../pt419663/index.html">Organizações governamentais atraem criadores de pH ultra pequeno com contratos, bônus e simplificação da burocracia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>