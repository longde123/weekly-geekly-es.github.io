<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¤´ï¸ ğŸ‘‰ğŸ» ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¼ TypeScript School of Magic: Generik dan Jenis Ekstensi ğŸ¥Œ âŒšï¸ ğŸ––ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penulis artikel yang kami terjemahkan hari ini mengatakan TypeScript is awesome. Ketika pertama kali mulai menggunakan TS, ia sangat menyukai kebebasa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TypeScript School of Magic: Generik dan Jenis Ekstensi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/426729/"> Penulis artikel yang kami terjemahkan hari ini mengatakan TypeScript is awesome.  Ketika pertama kali mulai menggunakan TS, ia sangat menyukai kebebasan yang melekat dalam bahasa ini.  Semakin banyak upaya yang dilakukan seorang programmer dalam pekerjaannya dengan mekanisme TS-spesifik, semakin besar manfaat yang akan diterimanya.  Kemudian ia menggunakan tipe anotasi hanya secara berkala.  Kadang-kadang ia menggunakan peluang untuk penyelesaian kode dan petunjuk kompiler, tetapi terutama hanya mengandalkan visinya sendiri tentang tugas-tugas yang diselesaikannya. <br><br>  Seiring waktu, penulis materi ini menyadari bahwa setiap kali ia mem-bypass kesalahan yang terdeteksi pada tahap kompilasi, ia meletakkan bom waktu dalam kodenya yang dapat meledak selama eksekusi program.  Setiap kali dia "berjuang" dengan kesalahan menggunakan konstruksi sederhana <code>as any</code> , dia harus membayarnya dengan berjam-jam hard debugging. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/8x/yn/4p/8xyn4p7bv34meq9s1o9k1i-hy0e.jpeg"></a> <br><br>  Akibatnya, ia sampai pada kesimpulan bahwa lebih baik tidak melakukannya.  Dia berteman dengan kompiler, mulai memperhatikan petunjuknya.  Kompiler menemukan masalah dalam kode dan melaporkannya jauh sebelum mereka dapat menyebabkan kerusakan nyata.  Penulis artikel, yang memandang dirinya sebagai pengembang, menyadari bahwa kompiler adalah sahabatnya, karena melindungi dirinya dari dirinya sendiri.  Bagaimana seseorang tidak dapat mengingat kata-kata Albus Dumbledore: "Dibutuhkan banyak keberanian untuk berbicara melawan musuhmu, tetapi tidak kurang dari itu diperlukan untuk berbicara melawan temanmu." <br><br>  Tidak peduli seberapa bagus kompilernya, tidak selalu mudah untuk menyenangkannya.  Terkadang menghindari penggunaan jenis <code>any</code> sangat sulit.  Dan kadang-kadang tampaknya <code>any</code> solusi satu-satunya yang masuk akal untuk beberapa masalah. <br><br>  Materi ini berfokus pada dua situasi.  Dengan menghindari penggunaan jenis <code>any</code> di dalamnya, Anda dapat memastikan keamanan jenis kode, membuka kemungkinan untuk digunakan kembali, dan membuatnya intuitif. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Generik</font> </h2><br>  Misalkan kita sedang mengerjakan basis data sebuah sekolah.  Kami menulis fungsi pembantu yang sangat nyaman, <code>getBy</code> .  Untuk mendapatkan objek yang mewakili siswa dengan namanya, kita dapat menggunakan perintah dari form <code>getBy(model, "name", "Harry")</code> .  Mari kita lihat implementasi mekanisme ini (di sini, agar tidak menyulitkan kode, database diwakili oleh array biasa). <br><br><pre> <code class="hljs powershell">type Student = { name: string; age: number; hasScar: boolean; }; const students: Student[] = [ { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>, <span class="hljs-type"><span class="hljs-type">age</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-type"><span class="hljs-type">hasScar</span></span>: <span class="hljs-type"><span class="hljs-type">false</span></span> } ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model, prop, value)</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] }</code> </pre> <br>  Seperti yang Anda lihat, kami memiliki fungsi yang baik, tetapi tidak menggunakan anotasi jenis, dan ketidakhadirannya juga berarti bahwa fungsi semacam itu tidak dapat disebut tipe-aman.  Perbaiki <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: Student[], prop: string, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Student</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null } const result = getBy(students, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // result: Student</code> </pre> <br>  Jadi fungsi kita sudah terlihat jauh lebih baik.  Kompiler sekarang tahu jenis hasil yang diharapkan darinya, ini akan berguna nanti.  Namun, untuk mencapai pekerjaan yang aman dengan tipe, kami mengorbankan kemungkinan menggunakan kembali fungsi.  Bagaimana jika kita perlu menggunakannya untuk mendapatkan entitas lain?  Tidak mungkin fungsi ini tidak dapat ditingkatkan dengan cara apa pun.  Dan memang benar. <br><br>  Dalam TypeScript, seperti dalam bahasa yang sangat diketik lainnya, kita dapat menggunakan generik, yang juga disebut "tipe generik", "tipe universal", "generalisasi". <br><br>  Sebuah generik mirip dengan variabel biasa, tetapi alih-alih beberapa nilai, itu berisi definisi tipe.  Kami menulis ulang kode fungsi kami sehingga alih-alih tipe <code>Student</code> itu akan menggunakan tipe universal <code>T</code> <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: T[], prop: string, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] } const result = getBy&lt;Student&gt;(students, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // result: Student</code> </pre> <br>  Cantik!  Sekarang fungsi ini ideal untuk digunakan kembali, sementara keamanan jenis masih di pihak kita.  Perhatikan bagaimana tipe <code>Student</code> secara eksplisit diatur di baris terakhir dari potongan kode di atas di mana <code>T</code> generik <code>T</code> .  Hal ini dilakukan untuk membuat contoh sejelas mungkin, tetapi kompiler, pada kenyataannya, secara mandiri dapat menurunkan tipe yang diperlukan, jadi dalam contoh berikut ini kami tidak akan melakukan penyempurnaan tipe tersebut. <br><br>  Jadi sekarang kami memiliki fungsi pembantu yang andal, cocok untuk digunakan kembali.  Namun, itu masih bisa diperbaiki.  Bagaimana jika kesalahan dibuat ketika memasukkan parameter kedua dan bukannya <code>"name"</code> tampaknya ada <code>"naem"</code> ?  Fungsi tersebut akan berperilaku seolah-olah siswa yang Anda cari sama sekali tidak ada dalam database, dan, yang paling tidak menyenangkan, itu tidak akan menghasilkan kesalahan.  Ini dapat menghasilkan debugging jangka panjang. <br><br>  Untuk melindungi dari kesalahan semacam itu, kami memperkenalkan tipe universal lain, <code>P</code>  Dalam hal ini, perlu bahwa <code>P</code> menjadi kunci dari tipe <code>T</code> , oleh karena itu, jika <code>Student</code> digunakan di sini, maka perlu bahwa <code>P</code> menjadi string <code>"name"</code> , <code>"age"</code> atau <code>"hasScar"</code> .  Begini cara melakukannya. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model: T[], prop: P, value)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null } const result = getBy(students, <span class="hljs-string"><span class="hljs-string">"naem"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hermione"</span></span>) // Error: Argument of type <span class="hljs-string"><span class="hljs-string">'"naem"'</span></span> is not assignable to <span class="hljs-keyword"><span class="hljs-keyword">parameter</span></span> of type <span class="hljs-string"><span class="hljs-string">'"name" | "age" | "hasScar"'</span></span>.</code> </pre> <br>  Menggunakan obat generik dan <code>keyof</code> adalah trik yang sangat kuat.  Jika Anda menulis program dalam IDE yang mendukung TypeScript, maka dengan memasukkan argumen, Anda dapat memanfaatkan kapabilitas pelengkapan otomatis, yang sangat nyaman. <br><br>  Namun, kami belum selesai mengerjakan fungsi <code>getBy</code> .  Dia memiliki argumen ketiga, jenis yang belum kita tentukan.  Ini sama sekali tidak cocok untuk kita.  Sampai sekarang, kita tidak bisa tahu sebelumnya apa yang seharusnya, karena itu tergantung pada apa yang kita lewati sebagai argumen kedua.  Tetapi sekarang, karena kita memiliki tipe <code>P</code> , kita dapat secara dinamis menyimpulkan tipe untuk argumen ketiga.  Jenis argumen ketiga pada akhirnya adalah <code>T[P]</code> .  Akibatnya, jika <code>T</code> adalah <code>Student</code> , dan <code>P</code> adalah <code>"age"</code> , maka <code>T[P]</code> akan menjadi <code>number</code> tipe. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getBy&lt;T, P extends keyof T&gt;(model: T[], prop: P, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: T[P]): T | <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model.<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(item =&gt; item[prop] === <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> } const result = getBy(students, "age", "17") // Error: Argument <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'"17"'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'number'</span></span>. const anotherResult = getBy(students, "hasScar", "true") // Error: Argument <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'"true"'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> assignable <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>. const yetAnotherResult = getBy(students, "name", "Harry") //     </code> </pre> <br>  Saya harap sekarang Anda memiliki pemahaman yang sangat jelas tentang cara menggunakan obat generik dalam TypeScript, tetapi jika Anda ingin bereksperimen dengan sangat baik dengan semua yang Anda ingin bereksperimen dengan kode yang dibahas di sini, Anda dapat melihatnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h2>  <font color="#3AC1EF">Memperluas jenis yang ada</font> </h2><br>  Kadang-kadang kita mungkin mengalami kebutuhan untuk menambahkan data atau fungsionalitas ke antarmuka yang kodenya tidak dapat kita ubah.  Anda mungkin perlu mengubah objek standar, katakan - tambahkan beberapa properti ke objek <code>window</code> , atau memperpanjang perilaku beberapa perpustakaan eksternal seperti <code>Express</code> .  Dan dalam kedua kasus, Anda tidak memiliki kemampuan untuk secara langsung mempengaruhi objek yang ingin Anda gunakan. <br><br>  Kami akan melihat solusi untuk masalah ini dengan menambahkan fungsi <code>getBy</code> yang sudah Anda ketahui ke prototipe <code>Array</code> .  Ini akan memungkinkan kami, menggunakan fungsi ini, untuk membangun konstruksi sintaksis yang lebih akurat.  Saat ini, kita tidak berbicara tentang apakah baik atau buruk untuk memperluas objek standar, karena tujuan utama kami adalah mempelajari pendekatan yang sedang dipertimbangkan. <br><br>  Jika kita mencoba menambahkan fungsi ke prototipe <code>Array</code> , kompiler tidak akan terlalu menyukai ini: <br><br><pre> <code class="hljs powershell">Array.prototype.getBy = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(   this: T[],   prop: P,   value: T[P] )</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null; }; // Error: Property <span class="hljs-string"><span class="hljs-string">'getBy'</span></span> does not exist on type <span class="hljs-string"><span class="hljs-string">'any[]'</span></span>. const bestie = students.getBy(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>); // Error: Property <span class="hljs-string"><span class="hljs-string">'getBy'</span></span> does not exist on type <span class="hljs-string"><span class="hljs-string">'Student[]'</span></span>. const potionsTeacher = (teachers as any).getBy(<span class="hljs-string"><span class="hljs-string">"subject"</span></span>, <span class="hljs-string"><span class="hljs-string">"Potions"</span></span>) //  ...   ?</code> </pre> <br>  Jika kami mencoba meyakinkan kompilator dengan menggunakan konstruk <code>as any</code> secara berkala, kami akan membatalkan semua yang telah kami capai.  Kompiler akan diam, tetapi Anda bisa melupakan pekerjaan aman dengan tipe. <br><br>  Akan lebih baik untuk memperluas jenis <code>Array</code> , tetapi sebelum melakukan ini, mari kita bicara tentang bagaimana TypeScript menangani situasi ketika dua antarmuka dari jenis yang sama hadir dalam kode.  Di sini skema tindakan sederhana diterapkan.  Iklan akan, jika mungkin, digabungkan.  Jika Anda tidak dapat menggabungkannya, sistem akan memberikan kesalahan. <br><br>  Jadi kode ini berfungsi: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> { length: number } <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> {   core: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myWand: Wand = { length: <span class="hljs-number"><span class="hljs-number">11</span></span>, core: <span class="hljs-string"><span class="hljs-string">"phoenix feather"</span></span> } <span class="hljs-comment"><span class="hljs-comment">//  !</span></span></code> </pre> <br>  Dan yang ini bukan: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> { length: number } <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Wand</span></span> {   length: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-comment"><span class="hljs-comment">// Error: Subsequent property declarations must have the same type.  Property 'length' must be of type 'number', but here has type 'string'.</span></span></code> </pre> <br>  Sekarang, setelah berurusan dengan ini, kita melihat bahwa kita dihadapkan dengan tugas yang agak sederhana.  Yaitu, yang perlu kita lakukan adalah mendeklarasikan antarmuka <code>Array&lt;T&gt;</code> dan menambahkan fungsi <code>getBy</code> ke dalamnya. <br><br><pre> <code class="hljs powershell">interface Array&lt;T&gt; {  getBy&lt;P extends keyof T&gt;(prop: P, value: T[<span class="hljs-type"><span class="hljs-type">P</span></span>]): T | null; } Array.prototype.getBy = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">P</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyof</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(   this: T[],   prop: P,   value: T[P] )</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.filter(item =&gt; item[<span class="hljs-type"><span class="hljs-type">prop</span></span>] === value)[<span class="hljs-number"><span class="hljs-number">0</span></span>] || null; }; const bestie = students.getBy(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"Ron"</span></span>); //   ! const potionsTeacher = (teachers as any).getBy(<span class="hljs-string"><span class="hljs-string">"subject"</span></span>, <span class="hljs-string"><span class="hljs-string">"Potions"</span></span>) //    </code> </pre> <br>  Harap dicatat bahwa sebagian besar kode yang cenderung Anda tulis dalam file modul, oleh karena itu, untuk membuat perubahan pada antarmuka <code>Array</code> , Anda akan memerlukan akses ke lingkup global.  Anda dapat melakukan ini dengan menempatkan definisi tipe di dalam <code>declare global</code> .  Misalnya, seperti ini: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> {   interface <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>&lt;T&gt; {       getBy&lt;P extends keyof T&gt;(prop: P, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: T[P]): T | <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;   } }</code> </pre> <br>  Jika Anda akan memperluas antarmuka perpustakaan eksternal, maka kemungkinan besar Anda akan memerlukan akses ke <code>namespace</code> perpustakaan ini.  Berikut adalah contoh cara menambahkan bidang <code>userId</code> ke <code>Request</code> dari perpustakaan <code>Express</code> : <br><br><pre> <code class="hljs cs">declare <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Express</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">Request</span></span> {     userId: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>;   } } }</code> </pre> <br>  Anda dapat bereksperimen dengan kode di bagian ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Pada artikel ini, kami melihat teknik untuk menggunakan generik dan mengetik ekstensi dalam TypeScript.  Kami berharap apa yang Anda pelajari hari ini akan membantu Anda menulis kode yang andal, mudah dimengerti, dan aman. <br><br>  <b>Pembaca yang budiman!</b>  Bagaimana perasaan Anda tentang semua jenis dalam TypeScript? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426729/">https://habr.com/ru/post/id426729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426719/index.html">Hackathon pada Ilmu Data dalam SIBUR: bagaimana itu</a></li>
<li><a href="../id426721/index.html">Menghindari Gagal Selama Pengembangan Produk: 10 Tips Dari Rookee</a></li>
<li><a href="../id426723/index.html">Microsoft dan para mitra berharap dapat membuat kapsul waktu di bulan</a></li>
<li><a href="../id426725/index.html">Bagaimana melakukan sesuatu ketika Anda tidak ingin melakukannya</a></li>
<li><a href="../id426727/index.html">EME? Cdm? DRM? CENC? IDK! Apa yang Anda butuhkan untuk membuat pemutar video Anda sendiri di browser</a></li>
<li><a href="../id426731/index.html">CSS: fitur menarik dari radius batas</a></li>
<li><a href="../id426733/index.html">Besi tidak akan gagal. Bagaimana saya menyiapkan puluhan server per hari untuk pertempuran</a></li>
<li><a href="../id426735/index.html">Selamat datang di JETHACK Hackathon</a></li>
<li><a href="../id426737/index.html">Secara singkat tentang arsitektur prosesor neuromorfik: tampilan dalam</a></li>
<li><a href="../id426739/index.html">File proxy dari AWS S3 menggunakan nginx</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>