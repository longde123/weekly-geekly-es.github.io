<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌃 🃏 🎬 Saat saya menulis cryptocurrency terpusat di PHP. (Bagian 1 - Ringkasan dasar + Mulai cepat) 🎦 🔊 😅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Ya, Anda hanya memikirkannya, cryptocurrency terpusat di PHP, ini tidak benar. Tetapi keterbatasan saya pada gagasan tetap berjalan, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Saat saya menulis cryptocurrency terpusat di PHP. (Bagian 1 - Ringkasan dasar + Mulai cepat)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481392/"><h1>  Kata Pengantar </h1><br>  Ya, Anda hanya memikirkannya, cryptocurrency terpusat di PHP, ini tidak benar.  Tetapi keterbatasan saya pada gagasan tetap berjalan, oleh karena itu, seperti yang Anda duga, saya memutuskan untuk menulisnya.  Pada bagian pertama, kami akan memberi tahu Anda apa itu cryptocurrency, mendiskusikan catatan awal, dan membuat sistem dompet.  Sekarang, mari kita mulai. <br><a name="habracut"></a><br><h2>  Cryptocurrency, seperti apa itu? </h2><br>  <i>informasi diambil dari <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BB%25D1%258E%25D1%2582%25D0%25B0" rel="nofollow">Wikipedia</a></i> <br><br><img align="left" src="https://habrastorage.org/webt/tc/tm/td/tctmtd68gowbmixyb4syaphyxm4.jpeg" width="45%" height="50%">  Cryptocurrency adalah jenis mata uang digital, akuntansi unit penyelesaian internal yang dijamin oleh sistem pembayaran terdesentralisasi (tidak ada administrator internal atau eksternal atau analog apa pun darinya), yang bekerja dalam mode sepenuhnya otomatis. <br><br>  Cryptocurrency itu sendiri tidak memiliki bahan khusus atau bentuk elektronik - itu hanya nomor yang menunjukkan jumlah data unit penyelesaian, yang ditulis dalam posisi yang sesuai dari paket informasi dari protokol transfer data dan seringkali bahkan tidak dienkripsi, seperti semua informasi lain tentang transaksi antara alamat sistem. <br><br>  Singkatnya, cryptocurrency berfungsi seperti ini: <br><br><ol><li>  Pengguna jaringan, yang memiliki saldo, mengirim transaksi ke pengguna anonim lain. </li><li>  Transaksi memasuki jaringan. </li><li>  Penambang (atau pengguna membuat blok) menyelesaikan masalah yang dihasilkan oleh algoritma khusus dengan kondisi (misalnya, untuk keberadaan 10-30 nol sebelumnya dalam hash, atau sebaliknya). </li><li>  Ketika suatu kondisi (atau kondisi) dipenuhi dalam sebuah hash, terima kasih untuk itu, penambang mengirim pesan ke jaringan yang menginformasikan tentang pembuatan blok baru dan transaksi. </li><li>  Penerima menerima dana, dan penambang menerima jumlah remunerasi, dalam bentuk komisi yang dihitung selama persiapan tugas. </li></ol><br><h2>  Apakah masuk akal untuk menulis cryptocurrency terpusat, dan juga dalam PHP? </h2><br>  Saya pikir tidak terlalu.  Tetapi coba lagi sebagaimana mestinya. <br><br><h2>  Kami mempertimbangkan catatan sebelum pengembangan </h2><br>  Kami akan menggunakan sistem verifikasi hash ganda menggunakan Bukti-of-Work.  Masuk akal untuk memeriksa hash di tingkat perangkat lunak dan aplikasi jaringan.  Ini karena proses mengoptimalkan beban di server.  Karena ketika kita pergi ke server untuk memeriksa hash berkali-kali, beban seperti itu akan muncul.  Oleh karena itu, saya mengusulkan untuk melakukan metode berikut: <br><br><ol><li>  Pada penambang perangkat lunak, periksa hash secara lokal untuk memenuhi persyaratan. </li><li>  Ketika kondisi pada penambang perangkat lunak bertepatan dengan kondisi yang diperlukan, kami melakukan pemeriksaan di tingkat jaringan aplikasi (di tingkat server). </li></ol><br>  Ini, menurut saya, adalah cara terbaik untuk mendistribusikan beban.  Lebih mudah untuk memeriksa beberapa kali secara lokal di komputer daripada permintaan spam ke server berkali-kali. <br><br>  Nama - Saya datang dengan nama yang sederhana, dan mungkin mudah diingat - FlyCoin dengan kode mata uang FLC tiga digit. <br><br>  Basis Data - Saya akan menggunakan opsi yang sederhana dan nyaman, PDO. <br><br>  Crypto-wallet - akan dihasilkan menggunakan GUID dan mt_rand, dan waktu POSIX akan digunakan sebagai seed. <br><br>  Apakah Anda terlalu malas untuk memiliki fungsi pemeriksaan hash?  - Ya, itu sebabnya saya memutuskan untuk mengambil kode dari satu penambang (open source) lama dari cryptocurrency Entropy (sudah mati), teman saya, Nikita. <br><br><div class="spoiler">  <b class="spoiler_title">Saya tidak percaya bahwa dia hanya menciptakan satu cryptocurrency.</b>  <b class="spoiler_title">Apakah ada sesuatu yang lain?</b> <div class="spoiler_text">  Secara umum, semua ciptaannya (yang kadang-kadang saya bahkan gunakan), dapat Anda temukan di grup <a href="https://vk.com/hphp_convertation" rel="nofollow">VKontakte-</a> nya.  Saya harap mereka berguna juga. <br></div></div><br><h2>  Ayo pergi! </h2><br>  Mari kita mulai dengan membuat kerangka kerja sistem masa depan kita.  Mari kita mulai dengan pengembangan API aplikasi untuk cryptocurrency kita.  Dan bingkainya terlihat sangat kosong sejauh ini. <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* * The API for FlyCoin */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkHash</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($hash, $exp)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-function"> -     ,  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exp</span></span></span><span class="hljs-function"> - .    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Entropy</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Miner</span></span></span><span class="hljs-function">,   . </span></span>{ $sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    . $len = strlen ($hash); // C  . for ($i = 0; $i &lt; $len; ++$i) $sum += 2 * base_convert ($hash[$i], 16, 10); //        return $sum % 10 == 0 &amp;&amp; substr ($hash, -$exp) === str_repeat ('0', $exp); //  false       true,         . } class Block { public $id; // ID  public $prev_hash; //    public $from; //   public $to; //  public $ammount; //  public $difficult; //   } class API { protected $db; public function __construct () { $dsn = "mysql:host=localhost;dbname=flc"; // DSN   $this-&gt;db = new PDO ($dsn, $username, $password); //     try { return true; //  . } catch (PDOException $exception) { return false; //  . } } }</span></span></code> </pre> <br>  Ini dia, bingkai mukjizat kita.  Pertama-tama, kami menerapkan registrasi dan pembuatan GUID untuk dompet kami.  Saya segera membuat definisi fungsi API kosong dan juga menemukan fungsi pembuatan GUID di Google.  Jangan lupakan benih.  Saya baru saja menemukan fungsi untuk mendapatkan seed, untuk mendapatkan GUID yang unik. <br><br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_seed</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PHP</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> ($usec, $sec) = explode (<span class="hljs-string"><span class="hljs-string">' '</span></span>, microtime ()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $sec + $usec * <span class="hljs-number"><span class="hljs-number">1000000</span></span>; } mt_srand (make_seed ());</code> </pre><br>  Bagus  Dan fungsi untuk menghasilkan GUID untuk dompet terlihat seperti ini (dan juga rintisan itu sendiri): <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //    </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">genGUID4</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Google</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sprintf (<span class="hljs-string"><span class="hljs-string">'%04x%04x-%04x-%04x-%04x-%04x%04x%04x'</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x4000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x3fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x8000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//     ,   . }</span></span></code> </pre><br>  Karena kami melakukan semuanya secara anonim, kami tidak akan menyimpan IP atau E-Mail.  Tidak ada konfirmasi  Kami akan cukup.  Dalam ~ 25 menit saya menulis fungsi registrasi.  Hanya satu kata sandi yang diperlukan dari kami.  Fungsi API akan mengembalikan dompet kepada kami. <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($password)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">password</span></span></span><span class="hljs-function"> -    </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $walletId = 'FLC@' . $this-&gt;genGUID4 (); //      $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" INSERT INTO `wallets` (walletId, loginHash, balance) VALUES (:walletId, :hash, :startBalance) "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':startBalance', 0, PDO::PARAM_INT); //    (   ,   0!)   $newUser-&gt;execute (); //  . return ['walletId' =&gt; $walletId]; //     ( ) } else return false; //      . }</span></span></code> </pre><br>  Di sini saya menjelaskan secara singkat apa yang dilakukan baris ini atau itu. <br><br><div class="spoiler">  <b class="spoiler_title">Pesan adil untuk orang-orang dan programmer yang adil.</b> <div class="spoiler_text">  Jika Anda telah meninggalkan kontak Anda di situs (di mana, mungkin, cryptocurrency ini akan ditemukan), dan mereka menulis sesuatu seperti ini kepada Anda: <br><br>  "Halo, bisakah kamu membantu?"  Saya terus mani di blockchain Anda, dan tiba-tiba saya kehilangan kata sandi saya, tolong bantu dan Anda akan baik-baik saja ”- silakan menolak tawaran ini.  Inti dari cryptocurrency adalah penyimpanan angka yang digali dengan aman.  Tidak ada yang dapat membuktikan bahwa ia memiliki akun.  Dengan demikian, setiap penyerang bahkan dapat mencuri dana orang lain <b>bahkan tanpa partisipasi korban!</b>  Tidak masalah, meskipun orang ini benar-benar pemilik akun, lebih baik menolak.  Jika Anda kehilangan uang, itu berarti Anda tidak menyimpan data dari akun dengan benar.  Untuk keamanan tambahan, kami tidak akan lagi menerapkan pemulihan kata sandi. <br></div></div><br>  Fungsi hash yang disajikan di sini dapat direpresentasikan sebagai berikut: <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mi>w</mi><mo>,</mo><mi>p</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mo stretchy=&quot;false&quot;>(</mo><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.289ex" height="2.66ex" viewBox="0 -832 16485.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-68" x="1575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-28" x="2152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-77" x="2541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-2C" x="3258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-70" x="3703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-77" x="4206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-29" x="4923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-3D" x="5590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-63" x="6646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-72" x="7080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-63" x="7531" y="0"></use><g transform="translate(7965,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-28" x="8966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-77" x="9355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-29" x="10072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-2E" x="10461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-77" x="10906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-2E" x="11623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-68" x="12068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-6D" x="12645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-61" x="13523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-63" x="14053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-28" x="14486" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-70" x="14876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMATHI-77" x="15379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/481392/&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhg1jkawnNMJwj_Bo4tAROHJabTSiw#MJMAIN-29" x="16096" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo stretchy="false">(</mo><mi>w</mi><mo>,</mo><mi>p</mi><mi>w</mi><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mo stretchy="false">(</mo><mi>p</mi><mi>w</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> hash (w, pw) = crc32 (w) .w.hmac (pw) </script><br><br>  Fungsi kerjanya seperti ini: <br><br>  Kata sandi dimasukkan, kami memeriksa apakah basis data terhubung: <br><br><div class="spoiler">  <b class="spoiler_title">Ya, terhubung.</b>  <b class="spoiler_title">(Mari kita membuat kata sandi 12345)</b> <div class="spoiler_text">  Kami menghasilkan alamat dompet, dan menulis dalam $ walletId - kami mendapatkan sesuatu seperti ini: <b>FLC @ c1cbe61d-a19d-4c82-ba17-3a577df0aeb5</b> (GUID ini dihasilkan oleh situs lain, saya kemudian menambahkan awalan FLC @ ke sana). <br><br>  Kami menghitung hash teks biasa.  Pada seri pertama, kami mendapatkan <b>berikut: 0087196442FLC @ c1cbe61d-a19d-4c82</b> -ba17-3a577df0aeb59ee77779db5a44ef3f60044fcb0e1170218e642cb9adc0789ddd08871ad95c7e1d3b1391c6c79774d319b5141bd3b13b717c3d389206ede659cb280949feac66 ( banyak surat, jangan kaget). <br>  Pada belokan kedua, hash akan menjadi seratus persen HMAC: <b>5e43cbb404c81efeb35162e5bba0766f20b340fbabcc66fd5f7a6a1993a8ccd43fc6384ac53f939acca4378681e2bb17912665memiliki</b> lagi <br><br>  Kami menulis semuanya dalam database. <br><br>  Sebagai tanggapan, kami menulis nomor dompet yang dapat Anda gunakan untuk masuk. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tidak, tidak terhubung.</b> <div class="spoiler_text">  Dalam hal ini, Anda tidak perlu mengharapkan sesuatu yang sepadan, kembalikan FALSE. <br></div></div><br>  Seperti inilah bentuk sistem pendaftaran yang canggih.  Bahkan, tampilannya sangat sederhana.  Dan dalam hal kode - jauh lebih rumit. <br><br>  Kami akan menghabiskan lebih banyak waktu dan melakukan otorisasi.  Dengan otorisasi, situasinya lebih sederhana.  Kami sedang mencari akun, dan mencoba masuk, mengetahui algoritma pembuatan hash kata sandi yang umum.  Kemudian kami memverifikasi, dan jika data benar, kami memberikan klien garis penting di mana data disimpan untuk komunikasi antara server dan penambang. <br><br><div class="spoiler">  <b class="spoiler_title">Dari diriku sendiri.</b> <div class="spoiler_text">  Kedengarannya seperti yang kita lakukan bukan cryptocurrency, tetapi sistem otorisasi antara PHP di server dan PHP menggunakan php.exe.  Pada bagian kedua, kita akan menambahkan kue kedua ke "kue" kita, di mana kita akan melihat sesuatu yang berkaitan dengan penambangan, blockchain dan transaksi. <br></div></div><br>  Setelah 15-25 menit, fungsi otorisasi siap.  Lihat kode di bawah ini: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($walletId, $password)</span></span></span><span class="hljs-function"> //  </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" SELECT * FROM `wallets` WHERE walletId = :walletId AND loginHash = :hash LIMIT 0, 1 "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;execute (); //  . $object = $newUser-&gt;fetch_object (); //   ,     if ($object AND hash_equals ($object-&gt;hash, $hash)) //   ,   . { $loginString = new stdClass; //    stdClass $loginString-&gt;hash = $hash; //       . $loginString-&gt;wallet = $walletId; return ['token' =&gt; serialize ($loginString)]; //      ,   . } else return false; //   / . } else return false; //    }</span></span></code> </pre><br>  Kode ini hampir pendaftaran, tetapi beroperasi dalam algoritma terbalik.  Bekerja dengan pengguna telah berakhir. <br><br><h2>  Postcondition </h2><br>  Selama waktu yang menarik ini membaca artikel, kami melakukan hal berikut: <br><br><ul><li>  Kami sempat berkenalan dengan cryptocurrency, dan bagaimana itu harus dibangun dengan benar. </li><li>  Mereka secara singkat menjawab pertanyaan, "Apakah masuk akal untuk membuat cryptocurrency terpusat, dan juga dalam PHP?" </li><li>  Catatan yang dibahas sebelum melakukan tugas ini </li><li>  Menerapkan sistem akun crypto. </li></ul><br>  Dan sekarang, Anda dapat membaca apa yang ada di balik tirai: <br><br><div class="spoiler">  <b class="spoiler_title">Di bawah tirai</b> <div class="spoiler_text">  Artikel ini ditulis sekitar 4-5 jam (sepanjang matahari terbenam dan sore).  Selama masa ini, saya berkembang seperti yang saya tulis, tetapi ketika harus menulis artikel tentang Habrahabr, keinginan saya untuk memenuhi impian saya tidak hilang.  Memang, karena konsep sederhana OOP, lebih mudah bagi saya untuk menggunakannya daripada MySQLi, atau lebih buruk, fungsi biasa dengan awalan mysql_, yang dianggap usang dan tidak lagi cocok untuk pengembangan dalam PHP. <br></div></div><br>  Apa yang akan kita lakukan selanjutnya: <br><br><ul><li>  Mari kita lakukan penambangan. </li><li>  Mari kita pertimbangkan bagaimana transaksi dan blok diatur. </li><li>  Kami akan melakukan transaksi, dan kami akan memberikan pengertian kepada kelas Blok yang tidak digunakan. </li></ul><br>  Terima kasih sudah membaca!  Sampai jumpa lagi!  Ini adalah artikel pertama saya - saya sedang menunggu kritik. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481392/">https://habr.com/ru/post/id481392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481378/index.html">Cara mengoptimalkan pengembangan aplikasi</a></li>
<li><a href="../id481382/index.html">Aplikasi Asli Windows dan Acronis Active Restore</a></li>
<li><a href="../id481386/index.html">Dithering: Sinyal bising untuk memperbaikinya</a></li>
<li><a href="../id481388/index.html">Bagaimana pertukaran cryptocurrency membangun blockchains mereka melawan DeFi</a></li>
<li><a href="../id481390/index.html">Berita dari dunia OpenStreetMap No. 490 (12/03/2019 - 09/12/2019)</a></li>
<li><a href="../id481394/index.html">Menciptakan dalam permainan baru apa yang kita sukai untuk yang lama</a></li>
<li><a href="../id481398/index.html">Perintah Linux dasar untuk penguji dan banyak lagi</a></li>
<li><a href="../id481402/index.html">Implementasi malas melintasi pohon anak-anak dari kelas QObject</a></li>
<li><a href="../id481406/index.html">Pencelupan mendalam dalam investasi Masker Ilona</a></li>
<li><a href="../id481416/index.html">Pengumuman Pertemuan AWS kedua di Minsk (13/02/2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>