<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš­ ğŸ†š ğŸš´ğŸ» æ´‹è‘±æ§åˆ¶å™¨ã€‚ æˆ‘ä»¬å°†å±å¹•åˆ†æˆå‡ éƒ¨åˆ† ğŸš­ ğŸ˜Š ğŸ¤ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åŸå­è®¾è®¡å’Œç³»ç»Ÿè®¾è®¡åœ¨è®¾è®¡ä¸­å¾ˆæµè¡Œï¼šè¿™æ˜¯æŒ‡ä»æ§ä»¶åˆ°å±å¹•çš„æ‰€æœ‰ç»„ä»¶éƒ½ç”±ç»„ä»¶ç»„æˆçš„æƒ…å†µã€‚ ç¨‹åºå‘˜ç¼–å†™å•ç‹¬çš„æ§ä»¶å¹¶ä¸éš¾ï¼Œä½†æ˜¯å¦‚ä½•å¤„ç†æ•´ä¸ªå±å¹•å‘¢ï¼Ÿ 


 è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ–°å¹´çš„ä¾‹å­ï¼š 


- è®©æˆ‘ä»¬æŠŠæ‰€æœ‰ä¸œè¥¿ç²˜åœ¨ä¸€èµ·ï¼› 
- åˆ†ä¸ºæ§åˆ¶å™¨ï¼šé€‰æ‹©å¯¼èˆªï¼Œæ¨¡æ¿å’Œå†…å®¹ï¼› 
- åœ¨å…¶ä»–å±å¹•ä¸Šé‡ç”¨ä»£ç ã€‚ 



 ä¸€å † 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ´‹è‘±æ§åˆ¶å™¨ã€‚ æˆ‘ä»¬å°†å±å¹•åˆ†æˆå‡ éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/434470/"><p> åŸå­è®¾è®¡å’Œç³»ç»Ÿè®¾è®¡åœ¨è®¾è®¡ä¸­å¾ˆæµè¡Œï¼šè¿™æ˜¯æŒ‡ä»æ§ä»¶åˆ°å±å¹•çš„æ‰€æœ‰ç»„ä»¶éƒ½ç”±ç»„ä»¶ç»„æˆçš„æƒ…å†µã€‚ ç¨‹åºå‘˜ç¼–å†™å•ç‹¬çš„æ§ä»¶å¹¶ä¸éš¾ï¼Œä½†æ˜¯å¦‚ä½•å¤„ç†æ•´ä¸ªå±å¹•å‘¢ï¼Ÿ </p><br><p> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ–°å¹´çš„ä¾‹å­ï¼š </p><br><ul><li> è®©æˆ‘ä»¬æŠŠæ‰€æœ‰ä¸œè¥¿ç²˜åœ¨ä¸€èµ·ï¼› </li><li> åˆ†ä¸ºæ§åˆ¶å™¨ï¼šé€‰æ‹©å¯¼èˆªï¼Œæ¨¡æ¿å’Œå†…å®¹ï¼› </li><li> åœ¨å…¶ä»–å±å¹•ä¸Šé‡ç”¨ä»£ç ã€‚ </li></ul><br><p><img src="https://habrastorage.org/webt/_5/-_/tz/_5-_tzispwunqkjevxcprqjnxb0.png"></p><a name="habracut"></a><br><h2 id="vsyo-v-kuchu"> ä¸€å † </h2><br><p> è¿™ä¸ªæ–°å¹´çš„å±å¹•ä¸Šè®¨è®ºäº†æ¯”è¨åº—çš„ç‰¹æ®Šè¥ä¸šæ—¶é—´ã€‚ è¿™éå¸¸ç®€å•ï¼Œå› æ­¤å°†å…¶è®¾ç½®ä¸ºæ§åˆ¶å™¨å°†ä¸ä¼šæ„æˆçŠ¯ç½ªï¼š </p><br><p><img src="https://habrastorage.org/webt/hw/ra/l5/hwral5o1ajc9znvde9tozjf8tbe.png"></p><br><p> ä½†æ˜¯ ä¸‹æ¬¡ï¼Œå½“æˆ‘ä»¬éœ€è¦ç±»ä¼¼çš„å±å¹•æ—¶ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸å†æ¬¡é‡å¤æ‰€æœ‰æ“ä½œï¼Œç„¶åå¯¹æ‰€æœ‰å±å¹•è¿›è¡Œç›¸åŒçš„æ›´æ”¹ã€‚ å¥½å§ï¼Œæ²¡æœ‰ä¿®æ”¹å°±ä¸ä¼šå‘ç”Ÿã€‚ </p><br><p> å› æ­¤ï¼Œå°†å…¶åˆ’åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†å¹¶ç”¨äºå…¶ä»–å±å¹•æ›´ä¸ºåˆç†ã€‚ æˆ‘å¼ºè°ƒäº†ä¸‰ä¸ªï¼š </p><br><ul><li> å¯¼èˆª </li><li> åœ¨å±å¹•åº•éƒ¨å…·æœ‰å†…å®¹åŒºåŸŸå’Œæ“ä½œä½ç½®çš„æ¨¡æ¿ï¼Œ </li><li> ä¸­å¿ƒçš„ç‹¬ç‰¹å†…å®¹ã€‚ </li></ul><br><p>åœ¨å…¶è‡ªå·±çš„<code>UIViewController</code>é€‰æ‹©æ¯ä¸ªéƒ¨åˆ†ã€‚ </p><br><h2 id="konteyner-navigaciya"> é›†è£…ç®±å¯¼èˆª </h2><br><p> å¯¼èˆªå®¹å™¨æœ€å¼•äººæ³¨ç›®çš„ç¤ºä¾‹æ˜¯<code>UINavigationController</code>å’Œ<code>UITabBarController</code> ã€‚ æ¯ä¸ªæ§ä»¶åœ¨å…¶è‡ªå·±çš„æ§ä»¶ä¸‹åœ¨å±å¹•ä¸Šå æ®ä¸€ä¸ªå°æ¡ï¼Œå¹¶ä¸ºå¦ä¸€ä¸ª<code>UIViewController</code>ä¿ç•™å‰©ä½™ç©ºé—´ã€‚ </p><br><p> åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå°†ä¸ºæ‰€æœ‰æ¨¡å¼å±å¹•æä¾›ä¸€ä¸ªå®¹å™¨ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªå…³é—­æŒ‰é’®ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ</b> <div class="spoiler_text"><p> å¦‚æœè¦å‘å³ç§»åŠ¨æŒ‰é’®ï¼Œåˆ™åªéœ€è¦åœ¨ä¸€ä¸ªæ§åˆ¶å™¨ä¸­è¿›è¡Œæ›´æ”¹å³å¯ã€‚ </p><br><p> æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šç”¨ç‰¹æ®Šçš„åŠ¨ç”»æ˜¾ç¤ºæ‰€æœ‰æ¨¡æ€çª—å£ï¼Œå¹¶é€šè¿‡æ»‘åŠ¨ä»¥äº¤äº’æ–¹å¼å…³é—­ï¼Œå¦‚AppStoreæ•…äº‹å¡ä¸­æ‰€ç¤ºã€‚ ç„¶åï¼Œä»…éœ€è¦ä¸ºæ­¤æ§åˆ¶å™¨è®¾ç½®<code>UIViewControllerTransitioningDelegate</code> ã€‚ </p></div></div><br><p><img src="https://habrastorage.org/webt/uv/hy/sk/uvhyskhr-hvxrbzgwgswlc6ul6c.png"></p><br><p> æ‚¨å¯ä»¥ä½¿ç”¨<code>container view</code>æ¥åˆ†éš”æ§åˆ¶å™¨ï¼šå®ƒå°†åœ¨çˆ¶<code>container view</code>ä¸­åˆ›å»ºä¸€ä¸ª<code>UIView</code>å¹¶å°†å­æ§åˆ¶å™¨çš„<code>UIView</code>æ’å…¥å…¶ä¸­ã€‚ </p><br><p><img src="https://habrastorage.org/webt/xo/pw/ht/xopwhtfz1or0ro86mipsqyfb6y8.png"></p><br><p> å°†<code>container view</code>æ‹‰ä¼¸åˆ°å±å¹•è¾¹ç¼˜ã€‚  <code>Safe area</code>å°†è‡ªåŠ¨åº”ç”¨äºå­æ§åˆ¶å™¨ï¼š </p><br><p><img src="https://habrastorage.org/webt/du/gc/rh/dugcrhatpjzzl1essnh-5j0clrk.png"></p><br><h2 id="shablon-ekrana"> å±å¹•å›¾æ¡ˆ </h2><br><p> å†…å®¹åœ¨å±å¹•ä¸Šæ˜¾è€Œæ˜“è§ï¼šå›¾ç‰‡ï¼Œæ ‡é¢˜ï¼Œæ–‡æœ¬ã€‚ è¯¥æŒ‰é’®ä¼¼ä¹æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä½†å†…å®¹åœ¨ä¸åŒçš„iPhoneä¸Šæ˜¯åŠ¨æ€çš„ï¼Œå¹¶ä¸”è¯¥æŒ‰é’®æ˜¯å›ºå®šçš„ã€‚ å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªä»»åŠ¡ä¸åŒçš„ç³»ç»Ÿï¼šä¸€ä¸ªæ˜¾ç¤ºå†…å®¹ï¼Œå¦ä¸€ä¸ªåµŒå…¥å¹¶å¯¹é½å†…å®¹ã€‚ å®ƒä»¬åº”åˆ†ä¸ºä¸¤ä¸ªæ§åˆ¶å™¨ã€‚ </p><br><p><img src="https://habrastorage.org/webt/sc/qf/cr/scqfcryfeq1ginkhko_ypvzzt6o.jpeg"></p><br><p> ç¬¬ä¸€ä¸ªè´Ÿè´£å±å¹•çš„å¸ƒå±€ï¼šå†…å®¹åº”å±…ä¸­ï¼Œå¹¶ä¸”æŒ‰é’®åº”é’‰åœ¨å±å¹•åº•éƒ¨ã€‚ ç¬¬äºŒä¸ªå°†ç»˜åˆ¶å†…å®¹ã€‚ </p><br><p><img src="https://habrastorage.org/webt/gp/dr/qi/gpdrqi4gjxch0scmu7rh3zzrg8g.jpeg"></p><br><blockquote> æ²¡æœ‰æ¨¡æ¿ï¼Œæ‰€æœ‰æ§åˆ¶å™¨éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å…ƒç´ å´åœ¨èµ·èˆã€‚ </blockquote><p> æœ€åä¸€ä¸ªå±å¹•ä¸Šçš„æŒ‰é’®ä¸åŒ-å®ƒå–å†³äºå†…å®¹ã€‚ å§”æ´¾å°†å¸®åŠ©è§£å†³é—®é¢˜ï¼šæ§åˆ¶å™¨æ¨¡æ¿å°†ä»å†…å®¹ä¸­è¯·æ±‚æ§ä»¶ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºåœ¨å…¶<code>UIStackView</code> ã€‚ </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift protocol OnboardingViewControllerDatasource { var supportingViews: [UIView] { get } } // NewYearContentViewController.swift extension NewYearContentViewController: OnboardingViewControllerDatasource { var supportingViews: [UIView] { return [view().doneButton] } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">ä¸ºä»€ä¹ˆè¦æŸ¥çœ‹ï¼ˆï¼‰ï¼Ÿ</b> <div class="spoiler_text"><p>  <code>UIViewController</code>å¯ä»¥åœ¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Controllerä¸­</a>é˜…è¯»æœ‰å…³å¦‚ä½•ä½¿ç”¨<code>UIViewController</code>ä¸“é—¨åŒ–<code>UIView</code> ï¼Œè¯·<code>UIViewController</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬å–å‡ºUIViewä¸­çš„ä»£ç ã€‚</a> </p></div></div><br><p> å¯ä»¥é€šè¿‡ç›¸å…³å¯¹è±¡å°†æŒ‰é’®é™„åŠ åˆ°æ§åˆ¶å™¨ã€‚ å®ƒä»¬çš„<code>IBOutlet</code>å’Œ<code>IBAction</code>å­˜å‚¨åœ¨å†…å®¹æ§åˆ¶å™¨ä¸­ï¼Œåªæ˜¯å…ƒç´ æœªæ·»åŠ åˆ°å±‚æ¬¡ç»“æ„ä¸­ã€‚ </p><br><p><img src="https://habrastorage.org/webt/7z/se/ub/7zseub0d7hkkc9laghstrr7u8cw.png"></p><br><p> æ‚¨å¯ä»¥åœ¨<code>UIStoryboardSegue</code>çš„å‡†å¤‡é˜¶æ®µä»å†…å®¹ä¸­è·å–å…ƒç´ å¹¶å°†å…¶æ·»åŠ åˆ°æ¨¡æ¿ä¸­ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift override func prepare(for segue: UIStoryboardSegue, sender: Any?) { if let buttonsDatasource = segue.destination as? OnboardingViewControllerDatasource { view().supportingViews = buttonsDatasource.supportingViews } }</span></span></code> </pre> <br><p> åœ¨è®¾ç½®å™¨ä¸­ï¼Œæˆ‘ä»¬å‘<code>UIStackView</code>æ·»åŠ æ§ä»¶ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingView.swift var supportingViews: [UIView] = [] { didSet { for view in supportingViews { stackView.addArrangedSubview(view) } } }</span></span></code> </pre> <br><p> ç»“æœï¼Œæˆ‘ä»¬çš„æ§åˆ¶å™¨åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå¯¼èˆªï¼Œæ¨¡æ¿å’Œå†…å®¹ã€‚ åœ¨å›¾ç‰‡ä¸­ï¼Œæ‰€æœ‰<code>container view</code>æ˜¾ç¤ºä¸ºç°è‰²ï¼š </p><br><p><img src="https://habrastorage.org/webt/yg/71/v1/yg71v1ajukht7pki8alekccwrcy.png"></p><br><h2 id="dinamicheskiy-razmer-kontrollera"> åŠ¨æ€æ§åˆ¶å™¨å°ºå¯¸ </h2><br><p> å†…å®¹æ§åˆ¶å™¨å…·æœ‰è‡ªå·±çš„æœ€å¤§å¤§å°ï¼Œå—å†…éƒ¨<code>constraints</code> ã€‚ </p><br><p>  <code>Container view</code>åŸºäºè‡ªåŠ¨è°ƒæ•´<code>Autoresizing mask</code>æ·»åŠ äº†<code>Autoresizing mask</code> ï¼Œå®ƒä»¬ä¸å†…å®¹çš„å†…éƒ¨å°ºå¯¸å†²çªã€‚ è¯¥é—®é¢˜å·²åœ¨ä»£ç ä¸­è§£å†³ï¼šåœ¨å†…å®¹æ§åˆ¶å™¨ä¸­ï¼Œæ‚¨éœ€è¦ä»<code>Autoresizing mask</code>æŒ‡ç¤ºå®ƒä¸å—å­˜å‚¨åº“çš„å½±å“ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// NewYearContentViewController.swift override func loadView() { super.loadView() view.translatesAutoresizingMaskIntoConstraints = false }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/je/5q/dp/je5qdpshqbjzke7vbli8vrflpnq.png"></p><br><p>  Interface Builderè¿˜æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š </p><br><p>  <strong>æ­¥éª¤1.</strong>ä¸º<code>UIView</code>æŒ‡å®š<code>Intrinsic size</code> ã€‚ å®é™…ä»·å€¼å°†åœ¨å‘å¸ƒåæ˜¾ç¤ºï¼Œä½†ç°åœ¨æˆ‘ä»¬å°†æ”¾ç½®æ‰€æœ‰åˆé€‚çš„ä»·å€¼ã€‚ </p><br><p><img src="https://habrastorage.org/webt/zg/st/lh/zgstlh9ascudcd06z-3c-edpmzi.png"></p><br><p>  <strong>æ­¥éª¤2.</strong>å¯¹äºå†…å®¹æ§åˆ¶å™¨ï¼ŒæŒ‡å®š<code>Simulated Size</code> ã€‚ å®ƒå¯èƒ½ä¸è¿‡å»çš„å¤§å°ä¸ç¬¦ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">å‡ºç°å¸ƒå±€é”™è¯¯ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</b> <div class="spoiler_text"><p> å½“<code>AutoLayout</code>æ— æ³•æ‰¾å‡ºå¦‚ä½•åˆ†è§£å½“å‰å¤§å°çš„å…ƒç´ æ—¶ï¼Œä¼šå‘ç”Ÿé”™è¯¯ã€‚ </p><br><p> é€šå¸¸ï¼Œåœ¨æ›´æ”¹å¸¸æ•°çš„ä¼˜å…ˆçº§åé—®é¢˜å°±æ¶ˆå¤±äº†ã€‚ æ‚¨éœ€è¦æ”¾ä¸‹å®ƒä»¬ï¼Œä»¥ä¾¿å…¶ä¸­ä¸€ä¸ª<code>UIView</code>å¯ä»¥æ¯”å…¶ä»–<code>UIView</code>è¿›è¡Œæ›´å¤šçš„æ‰©å±•/æ”¶ç¼©ã€‚ </p></div></div><br><h2 id="razdelyaem-na-chasti-i-pishem-v-kode"> æˆ‘ä»¬åˆ†æˆå‡ éƒ¨åˆ†å¹¶ç¼–å†™ä»£ç  </h2><br><p> æˆ‘ä»¬å°†æ§åˆ¶å™¨åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ— æ³•é‡ç”¨å®ƒä»¬ï¼Œ <code>UIStoryboard</code>çš„æ¥å£å¾ˆéš¾åˆ†éƒ¨åˆ†æå–ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦å°†ä¸€äº›æ•°æ®ä¼ è¾“åˆ°å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸å¾—ä¸åœ¨æ•´ä¸ªå±‚æ¬¡ç»“æ„ä¸­åŠ ä»¥å¤„ç†ã€‚ å®ƒåº”è¯¥æ˜¯å¦ä¸€ç§æ–¹å¼ï¼šé¦–å…ˆè·å–å†…å®¹ï¼Œå¯¹å…¶è¿›è¡Œé…ç½®ï¼Œç„¶åå°†å…¶åŒ…è£…åœ¨å¿…è¦çš„å®¹å™¨ä¸­ã€‚ åƒç¯æ³¡ã€‚ </p><br><p> æˆ‘ä»¬çš„æ–¹æ³•å‡ºç°äº†ä¸‰ä¸ªä»»åŠ¡ï¼š </p><br><ol><li> å°†æ¯ä¸ªæ§åˆ¶å™¨åˆ†æˆè‡ªå·±çš„<code>UIStoryboard</code> ã€‚ </li><li> æ‹’ç»<code>container view</code> ï¼Œå°†æ§åˆ¶å™¨æ·»åŠ åˆ°ä»£ç å®¹å™¨ä¸­ã€‚ </li><li> ç»‘å›å»ã€‚ </li></ol><br><h3 id="razdelyaem-uistoryboard"> å…±äº«UIStoryboard </h3><br><p> æ‚¨éœ€è¦åˆ›å»ºä¸¤ä¸ªé™„åŠ çš„<code>UIStoryboard</code>ç„¶åå°†å¯¼èˆªæ§åˆ¶å™¨å’Œæ¨¡æ¿æ§åˆ¶å™¨å¤åˆ¶ç²˜è´´åˆ°å…¶ä¸­ã€‚  <code>Embed segue</code>å°†ä¸­æ–­ï¼Œä½†æ˜¯å°†ä¼ è¾“å…·æœ‰å·²é…ç½®çº¦æŸçš„<code>container view</code> ã€‚ å¿…é¡»ä¿å­˜çº¦æŸï¼Œå¹¶ä¸”å¿…é¡»ç”¨å¸¸è§„<code>UIView</code>æ›¿æ¢<code>container view</code> ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨UIStoryboardä»£ç ä¸­æ›´æ”¹Containerè§†å›¾çš„ç±»å‹ã€‚</b> <div class="spoiler_text"><ul><li> ä»¥ä»£ç å½¢å¼æ‰“å¼€<code>UIStoryboard</code> ï¼ˆæ–‡ä»¶ä¸Šä¸‹æ–‡èœå•â†’ä»¥...å½¢å¼æ‰“å¼€â†’æºä»£ç ï¼‰ï¼› </li><li><p> å°†ç±»å‹ä»<code>containerView</code>æ›´æ”¹ä¸º<code>view</code> ã€‚ å¿…é¡»åŒæ—¶æ›´æ”¹å¼€å§‹å’Œ<strong>ç»“æŸ</strong>æ ‡ç­¾ã€‚ </p><br><p> åŒæ ·ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å°†<code>UIView</code>æ›´æ”¹ä¸º<code>UIScrollView</code> ã€‚ åä¹‹äº¦ç„¶ã€‚ </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/g8/ae/6d/g8ae6dvzd685hag645eyhc-u__y.png"></p></div></div><br><p> æˆ‘ä»¬å°†æ§åˆ¶å™¨è®¾ç½®<code>is initial view controller</code> ï¼Œç„¶åå°†<code>UIStoryboard</code>ç§°ä¸ºæ§åˆ¶å™¨ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">æˆ‘ä»¬ä»UIStoryboardåŠ è½½æ§åˆ¶å™¨ã€‚</b> <div class="spoiler_text"><p> å¦‚æœæ§åˆ¶å™¨çš„åç§°ä¸<code>UIStoryboard</code>çš„åç§°åŒ¹é…ï¼Œåˆ™å¯ä»¥å°†ä¸‹è½½å†…å®¹åŒ…è£…åœ¨ä¸€ç§æ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•æœ¬èº«å°†æ‰¾åˆ°æ‰€éœ€çš„æ–‡ä»¶ï¼š </p><br><pre> <code class="objectivec hljs">protocol Storyboardable { } extension Storyboardable where Self: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func instantiateInitialFromStoryboard() -&gt; Self { let controller = storyboard().instantiateInitialViewController() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> controller! as! Self } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func storyboard(fileName: String? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span> { let storyboard = <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span>(name: fileName ?? storyboardIdentifier, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboard } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardIdentifier: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String(describing: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardName: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboardIdentifier } }</code> </pre> <br><p> å¦‚æœåœ¨<code>.xib</code>æè¿°äº†æ§åˆ¶å™¨ï¼Œåˆ™æ ‡å‡†æ„é€ å‡½æ•°å°†åŠ è½½è€Œä¸ä¼šå‘ç”Ÿæ­¤ç±»èˆåŠ¨ã€‚  xiï¼Œ <code>.xib</code>åªèƒ½åŒ…å«ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œé€šå¸¸è¿™è¿˜ä¸å¤Ÿï¼šåœ¨ä¸€ä¸ªå¥½çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå±å¹•åŒ…å«å¤šä¸ªå±å¹•ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>UIStoryborad</code> ï¼Œå¾ˆå®¹æ˜“å°†å±å¹•åˆ†æˆå‡ éƒ¨åˆ†ã€‚ </p></div></div><br><h3 id="dobavlyaem-kontroller-v-kode"> åœ¨ä»£ç ä¸­æ·»åŠ æ§åˆ¶å™¨ </h3><br><p> ä¸ºäº†ä½¿æ§åˆ¶å™¨æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å…¶ç”Ÿå‘½å‘¨æœŸä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼š <code>will/did-appear/disappear</code> ã€‚ </p><br><p> ä¸ºäº†æ­£ç¡®æ˜¾ç¤ºï¼Œæ‚¨éœ€è¦è°ƒç”¨5ä¸ªæ­¥éª¤ï¼š </p><br><pre> <code class="objectivec hljs"> willMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?) addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p> è‹¹æœå»ºè®®å°†ä»£ç å‡å°‘åˆ°4ä¸ªæ­¥éª¤ï¼Œå› ä¸º<code>addChild()</code>æœ¬èº«å°†è°ƒç”¨<code>willMove(toParent)</code> ã€‚ æ€»ç»“ï¼š </p><br><pre> <code class="objectivec hljs"> addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p> ä¸ºç®€å•èµ·è§ï¼Œæ‚¨å¯ä»¥å°†å…¶å…¨éƒ¨åŒ…è£…åœ¨<code>extension</code> ã€‚ å¯¹äºæˆ‘ä»¬çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¸¦æœ‰<code>insertSubview()</code>çš„ç‰ˆæœ¬ã€‚ </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { func insertFullframeChildController(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>, toView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, index: Int) { let containerView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> = toView ?? view addChild(childController) containerView.insertSubview(childController.view, at: index) containerView.pinToBounds(childController.view) childController.didMove(toParent: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } }</code> </pre> <br><p> è¦åˆ é™¤ï¼Œæ‚¨éœ€è¦æ‰§è¡Œç›¸åŒçš„æ­¥éª¤ï¼Œåªéœ€è¦è®¾ç½®<code>nil</code>ä»£æ›¿çˆ¶æ§åˆ¶å™¨ã€‚ ç°åœ¨<code>removeFromParent()</code>è°ƒç”¨<code>didMove(toParent: nil)</code> ï¼Œå¹¶ä¸”ä¸éœ€è¦å¸ƒå±€ã€‚ ç¼©çŸ­çš„ç‰ˆæœ¬éå¸¸ä¸åŒï¼š </p><br><pre> <code class="objectivec hljs"> willMove(toParent: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) view.removeFromSuperview() removeFromParent()</code> </pre> <br><h2 id="leyaut"> å¸ƒå±€å›¾ </h2><br><h3 id="stavim-konstreynty"> è®¾ç½®çº¦æŸ </h3><br><p> ä¸ºäº†æ­£ç¡®è®¾ç½®æ§åˆ¶å™¨çš„å¤§å°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>AutoLayout</code> ã€‚ æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰æ–¹é¢éƒ½ç‰¢ç‰¢é’‰åœ¨èº«è¾¹ï¼š </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> { func pinToBounds(_ view: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) { view.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSLayoutConstraint</span></span>.activate([ view.topAnchor.constraint(equalTo: topAnchor), view.bottomAnchor.constraint(equalTo: bottomAnchor), view.leadingAnchor.constraint(equalTo: leadingAnchor), view.trailingAnchor.constraint(equalTo: trailingAnchor) ]) } }</code> </pre> <br><h2 id="dobavlyaem-docherniy-kontroller-v-kode"> åœ¨ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªå­æ§åˆ¶å™¨ </h2><br><p> ç°åœ¨å¯ä»¥å°†æ‰€æœ‰å†…å®¹ç»„åˆåœ¨ä¸€èµ·ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift public func embedController(_ controller: UIViewController) { insertFullframeChildController(controller, index: 0) }</span></span></code> </pre> <br><p> ç”±äºä½¿ç”¨é¢‘ç‡é«˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰è¿™äº›åŒ…è£…åœ¨<code>extension</code> ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift extension UIViewController { func wrapInModalContainer() -&gt; ModalContainerViewController { let modalController = ModalContainerViewController.instantiateInitialFromStoryboard() modalController.embedController(self) return modalController } }</span></span></code> </pre> <br><p> æ¨¡æ¿æ§åˆ¶å™¨ä¹Ÿéœ€è¦ç±»ä¼¼çš„æ–¹æ³•ã€‚  <code>prepare(for segue:)</code>è¿‡å»æ˜¯åœ¨<code>prepare(for segue:)</code>è®¾ç½®çš„<code>prepare(for segue:)</code> ï¼Œä½†æ˜¯ç°åœ¨æ‚¨å¯ä»¥å°†å…¶ç»‘å®šåˆ°æ§åˆ¶å™¨çš„embedæ–¹æ³•ä¸­ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift public func embedController(_ controller: UIViewController, actionsDatasource: OnboardingViewControllerDatasource) { insertFullframeChildController(controller, toView: view().contentContainerView, index: 0) view().supportingViews = actionsDatasource.supportingViews }</span></span></code> </pre> <br><p> åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// MainViewController.swift @IBAction func showModalControllerDidPress(_ sender: UIButton) { let content = NewYearContentViewController.instantiateInitialFromStoryboard() //     let onboarding = OnboardingViewController.instantiateInitialFromStoryboard() onboarding.embedController(contentController, actionsDatasource: contentController) let modalController = onboarding.wrapInModalContainer() present(modalController, animated: true) }</span></span></code> </pre> <br><p> å°†æ–°å±å¹•è¿æ¥åˆ°æ¨¡æ¿å¾ˆç®€å•ï¼š </p><br><ul><li> åˆ é™¤ä¸å†…å®¹æ— å…³çš„å†…å®¹ï¼› </li><li> é€šè¿‡å®ç°OnboardingViewControllerDatasourceåè®®æŒ‡å®šæ“ä½œæŒ‰é’®ï¼› </li><li> ç¼–å†™é“¾æ¥æ¨¡æ¿å’Œå†…å®¹çš„æ–¹æ³•ã€‚ </li></ul><br><h2 id="eschyo-pro-konteynery"> æœ‰å…³å®¹å™¨çš„æ›´å¤šä¿¡æ¯ </h2><br><h3 id="status-bar"> çŠ¶æ€æ  </h3><br><p> é€šå¸¸ï¼Œ <code>status bar</code>çš„å¯è§æ€§å¿…é¡»ç”±å…·æœ‰å†…å®¹çš„æ§åˆ¶å™¨è€Œä¸æ˜¯å®¹å™¨æ¥æ§åˆ¶ã€‚ æœ‰ä¸¤ä¸ª<code>property</code> ï¼š </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// UIView.swift var childForStatusBarStyle: UIViewController? var childForStatusBarHidden: UIViewController?</span></span></code> </pre> <br><p> ä½¿ç”¨è¿™äº›<code>property</code>æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨é“¾ï¼Œåè€…å°†è´Ÿè´£æ˜¾ç¤º<code>status bar</code> ã€‚ </p><br><h3 id="safe-area"> å®‰å…¨åŒº </h3><br><p> å¦‚æœå®¹å™¨æŒ‰é’®ä¸å†…å®¹é‡å ï¼Œåˆ™åº”å¢åŠ <code>safeArea</code>åŒºåŸŸã€‚ è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å®Œæˆï¼šä¸ºå­æ§åˆ¶å™¨è®¾ç½®<code>additinalSafeAreaInsets</code> ã€‚ æ‚¨å¯ä»¥ä»<code>embedController()</code>è°ƒç”¨å®ƒï¼š </p><br><pre> <code class="objectivec hljs">private func addSafeArea(to controller: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-meta"><span class="hljs-meta">#available(iOS 11.0, *) { let buttonHeight = CGFloat(30) let topInset = UIEdgeInsets(top: buttonHeight, left: 0, bottom: 0, right: 0) controller.additionalSafeAreaInsets = topInset } }</span></span></code> </pre> <br><p> å¦‚æœåœ¨é¡¶éƒ¨æ·»åŠ 30ä¸ªç‚¹ï¼Œåˆ™è¯¥æŒ‰é’®å°†åœæ­¢é‡å å†…å®¹ï¼Œå¹¶ä¸”<code>safeArea</code>å°†å æ®ç»¿è‰²åŒºåŸŸï¼š </p><br><p><img src="https://habrastorage.org/webt/v-/ko/go/v-kogoeqmzsu0gv_x_ugytn5oos.png"></p><br><h3 id="margins-preserve-superview-margins"> ä¿è¯é‡‘ã€‚ ä¿ç•™è¶…çº§è§†å›¾è¾¹è· </h3><br><p> æ§åˆ¶å™¨å…·æœ‰æ ‡å‡†<code>margins</code> ã€‚ é€šå¸¸ï¼Œå®ƒä»¬ä»å±å¹•çš„æ¯ä¸€ä¾§ç­‰äº16ç‚¹ï¼Œä»…åœ¨åŠ å¤§å°ºå¯¸ä¸Šä¸º20ç‚¹ã€‚ </p><br><p> æ ¹æ®<code>margins</code>æ‚¨å¯ä»¥åˆ›å»ºå¸¸é‡ï¼Œä¸åŒiPhoneçš„è¾¹ç¼˜ç¼©è¿›é‡å°†æœ‰æ‰€ä¸åŒï¼š </p><br><p><img src="https://habrastorage.org/webt/vn/8y/0w/vn8y0whfciurongx5qmzuhenzq4.png"></p><br><p> å½“æˆ‘ä»¬å°†ä¸€ä¸ª<code>UIView</code>æ”¾å…¥å¦ä¸€ä¸ª<code>UIView</code> ï¼Œ <code>margins</code>å‡åŠï¼šé™è‡³8ç‚¹ã€‚ ä¸ºé˜²æ­¢è¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦åŒ…æ‹¬<code>Preserve superview margins</code> ã€‚ ç„¶åï¼Œå­çº§<code>UIView</code>çš„<code>margins</code>å°†ç­‰äºçˆ¶çº§<code>UIView</code>çš„<code>margins</code> ã€‚ é€‚ç”¨äºå…¨å±å®¹å™¨ã€‚ </p><br><h2 id="konec"> ç»“æŸ </h2><br><p> å®¹å™¨æ§åˆ¶å™¨æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚ å®ƒä»¬ç®€åŒ–äº†ä»£ç ï¼Œåˆ†ç¦»äº†ä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥é‡å¤ä½¿ç”¨ã€‚ æ‚¨å¯ä»¥ä»¥ä»»ä½•æ–¹å¼ç¼–å†™åµŒå¥—æ§åˆ¶å™¨ï¼šåœ¨<code>UIStoryboard</code> ï¼Œåœ¨<code>UIStoryboard</code>ä¸­æˆ–ä»…åœ¨ä»£ç ä¸­ã€‚ æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬æ˜“äºåˆ›å»ºä¸”æ˜“äºä½¿ç”¨ã€‚ </p><br><p>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubä¸Šä¸€ç¯‡æ–‡ç« çš„ç¤ºä¾‹</a> </p><br><p> æ‚¨æ˜¯å¦æœ‰å€¼å¾—ä»ä¸­åˆ¶ä½œæ¨¡æ¿çš„å±å¹•ï¼Ÿ åˆ†äº«è¯„è®ºï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN434470/">https://habr.com/ru/post/zh-CN434470/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN434452/index.html">AXIS vs IDIS-è§†é¢‘ç›‘æ§åˆ¶é€ å•†ä¹‹æˆ˜</a></li>
<li><a href="../zh-CN434456/index.html">æˆ‘ä»¬ä»å“ªé‡Œæ‹¿åˆ°ç“¶å­çš„ï¼Ÿ</a></li>
<li><a href="../zh-CN434460/index.html">æˆ‘çš„Linuxå•è¡ŒDropboxå®¢æˆ·ç«¯</a></li>
<li><a href="../zh-CN434466/index.html">åœ¨å®è·µä¸­å†³å®šèˆªç­æˆæœ¬çš„å› ç´ æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN434468/index.html">ä¿å­˜å†…å®¹vCenter Content Library</a></li>
<li><a href="../zh-CN434474/index.html">å…³äºç©ºé—´å†…å®¹çš„ç»¿çŒ«</a></li>
<li><a href="../zh-CN434476/index.html">GitLabä¸­çš„ChatOpså°†å‘æ‰€æœ‰äººå¼€æ”¾</a></li>
<li><a href="../zh-CN434478/index.html">ä¸éœ²é¢çš„ä»£ç ä¼šæ€æ­»ç¨‹åºï¼Œæˆ‘ä»¬ä¸ä¼šå¯¹æ­¤åšä»»ä½•äº‹æƒ…ã€‚</a></li>
<li><a href="../zh-CN434480/index.html">æ–°å¹´ï¼Œå°ç©æ„ï¼Œç«</a></li>
<li><a href="../zh-CN434482/index.html">æˆ‘ä»¬åšå®¢çš„å¦ä¸€å¹´ï¼š2018å¹´çš„ç»“æœ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>