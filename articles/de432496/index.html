<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ï üï∞Ô∏è ü§≠ DEFCON-Konferenz 18. Sie haben das ganze Geld ausgegeben, aber sie haben Sie weiterhin. Teil 2 ‚è∏Ô∏è üï∫üèª üéº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DEFCON-Konferenz 18. Sie haben das ganze Geld ausgegeben, aber sie haben Sie weiterhin. Teil 1 

 Ich benutze eine interessante Sache von Gary O'Leary...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON-Konferenz 18. Sie haben das ganze Geld ausgegeben, aber sie haben Sie weiterhin. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/432496/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DEFCON-Konferenz 18. Sie haben das ganze Geld ausgegeben, aber sie haben Sie weiterhin.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> <br><br>  Ich benutze eine interessante Sache von Gary O'Leary-Steele namens Unicod-fun, die f√ºr ein in Ruby geschriebenes Dienstprogramm ziemlich gut ist.  Sie wissen, dass meine Tools ausschlie√ülich in Python geschrieben werden sollten, deshalb haben wir dies in Python √ºbersetzt.  Jetzt k√∂nnen wir eine andere Codierung f√ºr Tools anwenden, die zum Angriff auf Webanwendungen entwickelt wurden und Teil des WAF-Frameworks sind. <br><br><img src="https://habrastorage.org/webt/fu/vw/kz/fuvwkztjmn8ydmom8nbow8z1owu.jpeg"><br><br>  Das WAF-Framework umfasst WAF Fun und WAFWOOF und basiert auf Multicodierung und Informationen, die vom Proxy empfangen werden. Bei all diesen verschiedenen Aufgaben kann es √ºber Tor- oder GLib-Proxys funktionieren.  Dies ist also wirklich eine n√ºtzliche Sache, um die Informationen zu erhalten, die Sie ben√∂tigen. <a name="habracut"></a><br><br>  Wir haben dar√ºber gesprochen, Websites √ºber Tor anzugreifen. Ich habe letztes Jahr ausf√ºhrlich dar√ºber gesprochen.  Die folgende Folie zeigt die Skripte f√ºr einen solchen Angriff: <br><br><pre><code class="plaintext hljs">alias hide='su -c "/home/j0e/dumbscripts/hide.sh"' $ cat /home/j0e/dumbscripts/hide.sh #!/bin/bash # Startup privoxy /usr/sbin/privoxy /etc/privoxy/config # Start Tor /usr/bin/tor $ hide</code> </pre> <br>  Erw√§hnt werden sollte auch das Plugin, das als Tor-Schaltfl√§che in den Firefox-Browser eingebettet ist. <br>  Ich wei√ü nicht, ob einer von Ihnen mit dem DotNet Defender WAF gearbeitet hat, der von diesen verdammten Unternehmen verwendet wird.  Wir haben festgestellt, dass es den Server vor SQL-Injection sch√ºtzen kann.  Auf der Folie sehen Sie das Ergebnis der Generierung eines Cross-Site-Scripting-Angriffs - dotDefender hat unsere Anfrage blockiert. <br><br><img src="https://habrastorage.org/webt/p9/zg/eq/p9zgeqmu6a5a_nvjpj-1cdrr4j8.jpeg"><br><br>  Als N√§chstes sehen Sie einen Versuch, diese Art von Schutz mithilfe der SQL-Injektion ohne Codierung zu umgehen.  Und DotNet Defender konnte nichts dagegen tun. <br><br><img src="https://habrastorage.org/webt/cr/_g/yz/cr_gyznstlcjni0vg8jhi04zwqw.jpeg"><br><br>  Tatsache ist, dass es nur bestimmte SQL-Injektionen blockiert, die haupts√§chlich das Wort select enthalten.  Dies ist der H√∂hepunkt der Sicherheitstechnologie - blockieren Sie die Wortauswahl.  Wenn Sie in Unicode verschl√ºsseln, k√∂nnen Sie an diesem Verteidiger vorbeikommen, sodass er diese Sicherheitsanf√§lligkeit im letzten Jahr behoben hat, aber nichts gegen andere Codierungsstandards unternommen hat.  Wenn Sie eine andere Codierung verwenden, k√∂nnen Sie DotNet Defender daher problemlos umgehen.  Dadurch konnte ich den Administratorkennwort-Hash ohne Codierung zur√ºcksetzen. <br><br><img src="https://habrastorage.org/webt/di/ct/x_/dictx_cvz2dqmc9fax3fis4po8o.jpeg"><br><br>  Tut mir leid, Leute vom DotNet Defender, aber Sie m√ºssen Ihre Schei√üe reparieren. <br><br>  Das Wichtigste, was ich geschafft habe, war, √ºber das Internet in das LAN einzudringen.  Das ist schwierig genug, aber immer noch m√∂glich.  Daf√ºr habe ich ein einfaches Tool in Perl verwendet, das ich mir gefallen lassen musste, obwohl ich ein begeisterter Anh√§nger von Python bin.  Es funktioniert sehr gut, dank dessen k√∂nnen Sie die Netzwerkschnittstelle von netcat oder meterpreter shell √ºber einen DNS-Tunnel laden.  Dies ist ein wirklich gro√üartiges Projekt und ein neues Update wurde k√ºrzlich daf√ºr ver√∂ffentlicht. <br><br><img src="https://habrastorage.org/webt/fo/2j/je/fo2jjei6arth5jmuvcvhei8bx60.jpeg"><br><br>  Im Folgenden finden Sie eine M√∂glichkeit, SQL mithilfe des SQL Map-Tools einzuf√ºgen.  Mit diesem in Python geschriebenen Tool k√∂nnen Sie Os-Shell oder Meterpreter herunterladen.  Es hat auch eine eigene OS-Shell, mit der Sie basteln k√∂nnen.  Auf diese Weise k√∂nnen Sie die erforderlichen Befehle eingeben, um das System zu steuern, netcat zu konfigurieren oder direkt die Meterpreter-Shell aufzurufen. Daher verwende ich dieses Tool h√§ufig. <br><br>  Und jetzt kommen wir zu wichtigerem Material.  Der offizielle Name dieses Teils des Berichts lautet: Lass dich nicht erwischen!  Sei kein Tiger! <br><br><img src="https://habrastorage.org/webt/ef/rp/ku/efrpkusaeqpcsppcp1ibbjbkjze.jpeg"><br><br>  Ich m√∂chte nur nicht erwischt werden.  Wer ist Tiger?  Er ist ein Punk, verdammter Punk, wer stimmt mir zu?  Wenn ich eine Milliarde Dollar wert bin und du ein Pornostar bist, wei√üt du, dass ich Leute habe, die bereit sind, dich zu t√∂ten, wenn du es zul√§sst.  Stimmen Sie mir zu <br><br>  Das Wichtigste, um nicht erwischt zu werden, ist die Definition von Einbruchsfiltern.  Viele Leute probieren verschiedene Optionen aus.  Die erste ist die clientseitige Filterung.  Das ist schlecht.  Das ist schlecht.  Und noch f√ºnf Mal - das ist schlecht!  Verwenden Sie keine JavaScript- oder VB-Skripte oder andere Elemente auf der Clientseite, um zu versuchen, die Eingaben einer wichtigen Anwendung herauszufiltern.  Wenn Sie ein Framework wie J2EE verwenden, das diese JavaScripts erstellt, m√ºssen Sie serverseitigen Code schreiben, der √ºberpr√ºft, ob alles, was vom Client stammt, in Ordnung ist. <br><br><img src="https://habrastorage.org/webt/we/-6/yp/we-6ypbesjhfnnafos_sshfsb5e.jpeg"><br><br>  √úberpr√ºfen Sie den Quellcode auf Parameter, die √ºber die Site √ºbertragen werden und mit JavaScript oder VB-Skript gefiltert werden k√∂nnen, und l√∂schen Sie sie.  Speichern Sie die Seite lokal und l√∂schen Sie die entsprechenden JavaScript- oder VB-Skripte oder verwenden Sie einen lokalen Proxy wie Paros, Web Scarab, Burp Suite. <br><br>  Wenn Sie gerade diesen verdammten Deal mit einer Person gemacht haben, denken Sie daran, dass alles Schlimme auf dem Computer des Kunden passiert. Sie m√ºssen den Entwicklern diese kleinen Lektionen beibringen.  Ich sage ihnen: "OK, Entwickler, ich m√∂chte, dass Sie dar√ºber nachdenken, weil Sie all diese Sicherheit in einen Hacker-Laptop stecken werden!"  Glaubst du, das ist richtig? "  Deshalb, Leute, benutzt keine Filterung auf der Client-Seite! <br><br>  Die folgenden Einschr√§nkungen gelten f√ºr die schwarze Liste.  Oft versuchen Menschen, die Verwendung von Sonderzeichen einzuschr√§nken.  Nehmen wir an, Sie k√∂nnen kein Gleichheitszeichen, mehr oder weniger Zeichen und dergleichen senden. <br><br><img src="https://habrastorage.org/webt/lh/gp/jw/lhgpjwttfy06fwaobmcgekqkgms.jpeg"><br><br>  In Bezug auf die SQL-Syntax m√ºssen Sie jedoch nicht 1 = 1 angeben.  Beispielsweise k√∂nnen Sie in der Anforderung http: // [site] /page.asp?id=2 oder 1 wie 1 generell die Verwendung des Gleichheitszeichens und des Operators oder vermeiden, indem Sie sie in der Adressleiste durch die W√∂rter ‚Äûund‚Äú und ‚Äûersetzen. wie "zum Beispiel" und 1 als 1 "," und 1 als 2 "und so weiter: <br><br>  http: // [site] /page.asp?id=2 und 1 wie 1 <br>  http: // [site] /page.asp?id=2 und 1 wie 2 <br><br>  Tats√§chlich verwenden SQL-Injektionen in den meisten F√§llen keine Sonderzeichen. <br>  Betrachten Sie als N√§chstes signaturbasiertes IDS.  Sag mir, wer von euch hat so einen Tisch auf dem Mauspad?  Wenn Sie eine Tabelle mit ASCII- oder HEX-Dezimalcodes haben, rei√üen Sie sie mit dieser Matte auf. <br><br><img src="https://habrastorage.org/webt/ci/su/0g/cisu0gqplsuhv1jcsqb86pbdh88.jpeg"><br><br>  Was ich letzte Nacht gelernt habe, als ich in der Innensohle betrunken war, ist, dass ASCII wirklich funktioniert!  Wenn Sie also mit IDS zu tun haben und eine TCP-Warnung von einer beliebigen IP-Adresse von einem beliebigen Port erhalten, der an den Port unseres Webservers gelangt, suchen Sie nach einem speziellen Datentyp 1 = 1.  √úberlegen wir mal, wie viele Hacker konnten dieses Ding fangen?  Lass uns dar√ºber nachdenken. <br><br><img src="https://habrastorage.org/webt/xe/mp/ua/xempuan-tcnciw18noczamu2kxg.jpeg"><br><br>  2 ist 2?  Vierzig Unzen gleich vierzig Unzen?  1 = 1 ist nicht die einzige M√∂glichkeit, eine Anfrage zu erstellen, f√ºr die Sie die Antwort "true" erhalten k√∂nnen. Sie k√∂nnen eine Anfrage vom Typ "2 = 2", "1 &lt;2" usw. senden.  Wenn Signaturen so einfach zu umgehen sind, warum werden sie dann ben√∂tigt?  Die Antwort ist f√ºr automatische Werkzeuge und Kinder. <br><br>  Die folgende Folie zeigt meine auf Signaturen basierende IDS-Vision - dies ist der Torh√ºter, der 1 Ball gefangen hat, w√§hrend hundert B√§lle durch das Tor geflogen sind. <br><br><img src="https://habrastorage.org/webt/a0/mn/vo/a0mnvo3pk1eingnhy52hhcsqcus.jpeg"><br><br>  Das Pentester-Dienstprogramm namens sqlmap umgeht diesen Schutz, den ich Ihnen standardm√§√üig gezeigt habe, und es ist auch in Python geschrieben! <br><br>  √Ñhnliches wird auf der n√§chsten Folie gezeigt.  Hier habe ich zur Umgehung dieses Problems die 2- oder 2-Technik verwendet und den Benutzer ausgew√§hlt. <br><br><img src="https://habrastorage.org/webt/3r/vk/_b/3rvk_blgnuuu-w8ntjwqmuwgrbm.jpeg"><br><br>  In diesem Fall habe ich den gesamten Ausdruck in hexadezimalem Code dargestellt, aber Sie k√∂nnen ihn in Unicode, utf7, utf-8, utf-16 ausf√ºhren. Bei jeder Codierung spielt es keine Rolle, diese Methode funktioniert immer noch und erm√∂glicht es Ihnen, viele WAFs zu umgehen. <br><br>  Es gibt ein anderes Produkt auf dem Gebiet von PHP - dies ist PHP IDS. Ich finde es verdammt cool, dass sie jetzt eine Demonstration seiner F√§higkeiten auf der Website haben.  Wenn Sie zu demo.phpids.net gehen, k√∂nnen Sie den Rauchtest versuchen.  Mit diesem Smoketest k√∂nnen Sie alle Ihre SQL-Injektionen, Cross-Site-Scripting- oder Webanwendungsangriffe ausprobieren und Ihnen zeigen, welche Signaturen diese Angriffe erkennen, sodass Sie weiterhin Kung Fu im Internet √ºben k√∂nnen. <br><br><img src="https://habrastorage.org/webt/5b/o2/ig/5bo2ig31xb7vefbhhzve4gogs-0.jpeg"><br><br>  Sie k√∂nnen beispielsweise einen Effekt anwenden, eine Signatur abrufen, einen anderen versuchen, einen anderen Satz von Signaturen abrufen usw.  Sie arbeiten einfach weiter und arbeiten, bis dieser b√∂se Junge sagt, dass alles in Ordnung ist, Sie die Verteidigung umgangen haben und nichts anderes Sie ‚Äûraucht‚Äú.  So verbessern Sie Ihre Kung-Fu-F√§higkeiten, bis Sie etwas finden, das die meisten Regeln umgehen kann. <br><br><img src="https://habrastorage.org/webt/sb/za/ns/sbzansb4oyj8fz9thrazk418jtc.jpeg"><br><br>  Jetzt hat sich Modsecurity mit PHP IDS zusammengetan und sie haben ihren eigenen Rauchtest.  Ich habe es aufgrund eines morgendlichen Kater nicht zu meinen Folien hinzugef√ºgt, aber ich m√∂chte sagen, dass es ihnen gelungen ist, den Modsecurity-Regelsatz mit dem PHP-IDS-Regelsatz in einer Weboberfl√§che zu kombinieren. F√ºgen Sie dort einfach Ihre Exploits ein, bis Sie alle Regeln umgangen haben.  Kurz gesagt, signaturbasiertes IDS ist nur ein dummer Witz.  Zumindest hatte ich keine Kunden, die von diesen Produkten wussten, aber sie kauften sie trotzdem.  Aber das ist eine etwas andere Geschichte. <br><br>  Ich verstehe diejenigen von Ihnen, die Analysten von IDS und WAF sind, vollkommen.  Ich wei√ü, dass ich viel rede, aber ich f√ºhle deinen Schmerz, weil ich deine Arbeit gemacht habe und es nicht genug Alkohol auf der Welt gibt, um deiner Arbeit standzuhalten. <br><br><img src="https://habrastorage.org/webt/ad/b-/ok/adb-oktonu-m15srcmq-zh4k6di.jpeg"><br><br>  Die √ºberwiegende Mehrheit der Dinge, die ich Ihnen gerade gezeigt habe, erfolgt √ºber das Netzwerk.  Wie gesagt, Sie interagieren remote mit IDS und IPS und laden verschiedene Exploits.  Wie viele von Ihnen haben sich mit JBoss, einem Open-Source-Anwendungsserver, befasst, wei√ü, dass die meisten Dateien damit heruntergeladen werden.  Die SQL-Injection codiert einfach einige Pfade, auf die ich zugreifen kann, wodurch ich normalerweise Zugriff auf die Shell und die DMZ habe, und ich versuche, von dort aus zu arbeiten. <br><br>  Danach mache ich eine unglaubliche Sache und sende eine E-Mail an den Kunden, weil es funktioniert.  Ihre Clientseite mit dem Metasploit-Framework sieht einfach wunderbar aus. Sie k√∂nnen also alles ausw√§hlen, was den neuesten Browser-, PDF-, ActiveX- oder Datei-Exploit unterst√ºtzt. Stellen Sie sicher, dass die TCP-Shell umgekehrt wird. Anschlie√üend wandelt Metasploit diese Nachricht in HTTPS um.  Alles ist gro√üartig, das einzig schlechte ist, dass es in Ruby geschrieben ist.  Das Python SET-Tool ist jedoch eine v√∂llig neue Ebene des Pentesting. <br><br><img src="https://habrastorage.org/webt/nn/zn/h4/nnznh4uhjpij9ty0hrby0a0-dyo.jpeg"><br><br>  Mit diesem Tool k√∂nnen Sie unglaubliche Dinge tun.  SET wurde von David Kennedy von der ReLic-Gruppe erstellt. Wir begr√º√üen ihn daf√ºr.  Dies ist genau das, was wir brauchen, um die Essenz des Geschehens zu veranschaulichen.  Hacker scannen nicht mehr die Ports Ihres Netzwerks. Wenn sie dies nicht versuchen, werden sie die Shell wahrscheinlich auf keinen Fall √ºbernehmen.  Hacker versuchen, Ihnen etwas B√∂sartiges per E-Mail oder √§hnlichem herunterzuladen. <br><br>  Daher muss der Kunde verstehen, dass es w√§hrend des Pentests notwendig ist, sein System auf Best√§ndigkeit gegen die Auswirkungen betr√ºgerischer Websites, Phishing und dergleichen zu testen.  Besonders wenn Sie auf einen solchen Kunden sto√üen, den ich hatte, stand er auf und sagte: "OK, Joe, ich werde Sie nicht f√ºr Ratschl√§ge bezahlen, um den Mitarbeitern des Unternehmens den richtigen Umgang mit dem Netzwerk beizubringen."  Sie m√ºssen also alle realen Bedrohungen auf der Client-Seite reproduzieren, damit er versteht, wie ernst dies ist. <br><br>  Die n√§chste Stufe des Pentests ist also der Pivot-Angriff oder ‚ÄûTurning Attack‚Äú, bei dem ein gehackter Host verwendet wird, um andere Hosts anzugreifen.  "Turning Attack" im LAN ist ein wichtiger Bestandteil des clientseitigen Pentests. <br><br><img src="https://habrastorage.org/webt/i0/a3/ae/i0a3aeevv25jnxgqfm6lktiwjso.jpeg"><br><br>  Metasploit unterst√ºtzt Pivot. Wenn ich das CAB-Archiv nicht mit allen ausf√ºhrbaren Dateien herunterladen kann, die zuvor statisch kompiliert wurden, muss nichts installiert werden.  Ich verwende dies in meiner Werkstatt, um einen Pivot-Rollout in einem LAN durchzuf√ºhren, also ‚Äûspringe‚Äú ich hinein und beginne von dort aus zu bewegen. <br><br>  Als n√§chstes denke ich √ºber allgemeine Sicherheitsl√∂sungen f√ºr das LAN nach.  Dieser Mangel an DHCP, dh statischen IP-Adressen, DHCP-MAC-Adressen, Port-Sicherheit und NAC-L√∂sungen, macht es mir unm√∂glich, in das Netzwerk zu gelangen.  Was mache ich also, wenn ich nicht ins Netz komme? <br><br>  Wenn DHCP fehlt und die IP-Adressen statisch sind, stehle ich dem Host eine g√ºltige IP-Adresse.  Meine Kinder haben mir das beigebracht, weil statische IP-Adressen unglaublich ineffizient sind.  Ich hoffe, Sie haben keine Clients, die sagen, dass sie Hacker daran hindern werden, statische IP-Adressen zu verwenden.  Ich mache dasselbe bei Vorhandensein von DHCP-MAC-Adressen - ich stehle eine g√ºltige MAC-Adresse.  Wenn wir einen sicheren Port haben, stehle ich auch eine g√ºltige IP- oder MAC-Adresse.  Wenn es NAC-L√∂sungen gibt, k√∂nnen Sie den Computer einfach abholen, umdrehen und seine MAC-Adresse √ºberpr√ºfen oder versuchen, Ausnahmen f√ºr das 802.1x-Protokoll zu finden, dh Ger√§te, die 802.1x nicht unterst√ºtzen, z. B. Drucker, Kopierer und CD-ROM-Racks und VoIP-Telefone. <br><br>  Alle diese Methoden funktionieren f√ºr mich und die besten Ger√§te zum Durchdringen von LANs sind VoIP-Telefone.  Ich hatte viele Clients, die die automatische Autorisierung von VoIP-Telefonen im Sprachnetzwerk basierend auf der MAC-Adresse und dem VLAN-Tag verwendeten.  Sie k√∂nnen also eine Linux-Box √§hnlich einem VoIP-Telefon erstellen und unter Umgehung von NAC-L√∂sungen in ein virtuelles Voice-LAN-Netzwerk st√ºrzen. <br><br>  Die meisten Telefone meiner Kunden mussten direkt mit dem CallManager-Softwarecenter in der internen DMZ verbunden werden, da alle CallManager-Center mit den √ºbrigen Servern zusammenarbeiten sollten, sodass mein Empfang f√ºr das gesamte Netzwerk einwandfrei funktionierte. <br><br>  Es gibt eine Funktion namens Voip Hopper, die den Prozess des Eindringens in ein Sprach-VLAN automatisiert.  Sie k√∂nnen diesen Exploit von voiphopper.sourceforge.net herunterladen und damit direkt in das VLAN ‚Äûspringen‚Äú. <br><br>  Wenn ich in das Netzwerk komme, finde ich normalerweise zuerst heraus, wer der Dom√§nenadministrator ist.  Auf der Folie sehen Sie eine Liste der Befehle, die ich verwende: set - um Informationen √ºber die Dom√§ne und die Benutzer herauszufinden, Netzansicht - um Netzwerkcomputer, Benutzerdom√§nen und andere Dom√§nen anzuzeigen, net localgroup - um lokale Computergruppen zu finden und so weiter. <br><br><img src="https://habrastorage.org/webt/9a/sk/sc/9askscguc6uavr4wuhu1vyl01na.jpeg"><br><br>  Ich mache das, um herauszufinden, wer und in welchen Gruppen im Netzwerk arbeitet, um zu versuchen, ihre Computer anzugreifen.  Noch besser, wenn ich einen lokalen Administrator oder ein lokales System erhalten kann, scanne ich als N√§chstes das Netzwerk, um festzustellen, wer der bestimmte Benutzer dieses Computers ist. <br><br><img src="https://habrastorage.org/webt/2n/2w/kx/2n2wkxxigbhr3c3kdihw9rrg-ow.jpeg"><br><br>  Sie k√∂nnen verschiedene Skripte verwenden, um das Netzwerk zu √ºberpr√ºfen, um herauszufinden, wo und auf welchem ‚Äã‚ÄãComputer sich die ‚ÄûBox‚Äú des Administrators befindet.  Wenn Sie einen lokalen Administrator oder ein lokales System "erwischt" haben, k√∂nnen Sie in dessen "Box" "springen" und von dort aus die pcexec-Shell verwenden. <br><br><img src="https://habrastorage.org/webt/fy/wf/kl/fywfklgaif8vw1dsxcuc35g4j_0.jpeg"><br><br>  Nachdem ich in die "Box" gesprungen bin, suche ich nach einer M√∂glichkeit, meine Privilegien zu erh√∂hen.  Privilegien aufzubauen ist eine wirklich schwierige Sache.  In Windows XP funktionieren diese Dinge sogar mit dem Sp3-Service Pack, das diese sch√∂ne Befehlszeilenschnittstelle cmd.exe verwendet, was eine gro√üartige Sache ist. <br><br>  Als ich eine Bank pentestierte, musste ich den McAfee Framework Service "t√∂ten", der sich auf das HIPS Intrusion Prevention System bezieht.  Daf√ºr habe ich den Befehl pskill.exe verwendet.  Also habe ich McAfee deaktiviert, HIPS deaktiviert, den Interceptor und Firepm sowie alle anderen vom Intrusion Prevention-System gestarteten Prozesse deaktiviert. <br><br><img src="https://habrastorage.org/webt/hg/zo/j9/hgzoj99riuecwoqodktqspulkre.jpeg"><br><br>  Eine andere Sache, f√ºr die ich keine Zeit hatte, auf der Folie zu zeigen, ist, dass Sie beim Deaktivieren von McAfee zuerst die Berechtigungen erh√∂hen m√ºssen. Dies funktioniert auch in Bezug auf den Symantec-Endpunktschutz.  Tatsache ist, dass, nachdem Sie alle diese Prozesse ‚Äûbeendet‚Äú haben, sie nach einer Weile von vorne beginnen.  Daher m√ºssen Sie die DLL-Dateien im Speicher "aush√§ngen", um den Neustart des Schutzes zu beenden.  Ich habe dies nicht auf den Folien gepostet, aber wenn Sie sich sp√§ter erinnern, werde ich Ihnen die Syntax f√ºr diesen Trick geben. <br>  Eine andere Sache, die ich gerade √ºber McAfee erfahren habe, ist, dass die Dateien in der Ausschlussliste unter einem bestimmten Namen angezeigt werden, nicht unter einem Hash oder √§hnlichem.  Daher sind Dateien, die in der McAfee Antivirus-Ausschlussliste enthalten sind, nicht vor Puffer√ºberl√§ufen gesch√ºtzt, und ich werde diese Tatsache f√ºr meine eigenen Zwecke verwenden. <br><br>  Das Folgende zeigt das "T√∂ten" von HIPS als System mit Metasploit.  Jetzt haben sie etwas namens getsystem, also k√∂nnen Sie einfach Metasploit schreiben, getsystem aufrufen und es wird Sie mit einer von vier Methoden direkt in das System werfen: Stoppen Sie den allgemeinen Virenschutz, stoppen Sie HIPS, "t√∂ten" Sie McAfee-Prozesse oder "t√∂ten" Sie HIPS-Prozesse. <br><br><img src="https://habrastorage.org/webt/v4/zj/l0/v4zjl0bsdiczwgmjcsfsyz4_x8m.jpeg"><br><br>  Das Letzte, was ich zeigen wollte, war die Domain-Erfassung. <br><br><img src="https://habrastorage.org/webt/zx/q7/ol/zxq7oldrdrybyhrvhxh55qjwyym.jpeg"><br><br>  Sobald ich an der "Box" des Administrators angekommen bin, verwende ich alle gestohlenen Token und beginne, seine Kr√§fte einzusetzen.  Als Dom√§nenadministrator erstelle ich eine Benutzergruppe und f√ºge sie der Administratorgruppe hinzu.  F√ºr meine Zwecke funktioniert das gro√üartig. <br><br><img src="https://habrastorage.org/webt/xa/cp/hw/xacphwket5nhebsdpc3kzor_y04.jpeg"><br><br>  Zum Schutz habe ich 1-2 Seiten Dokumentation zum Schutz vor jedem der Angriffe, √ºber die ich heute gesprochen habe.  Es hei√üt, wie man einen Angriff ausf√ºhrt und wie man sich dagegen verteidigt.  Wenn Sie solche Informationen ben√∂tigen, kontaktieren Sie mich, alle Kontakte befinden sich auf der Folie. <br><br>  Wenn ich keine Fragen habe, werde ich dort enden. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tJsNu0VRKYY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Vielen Dank f√ºr Ihren Aufenthalt bei uns.  Gef√§llt dir unser Artikel?  M√∂chten Sie weitere interessante Materialien sehen?  Unterst√ºtzen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% f√ºr Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir f√ºr Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit √ºber VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s bis Januar kostenlos,</b> wenn Sie f√ºr einen Zeitraum von sechs Monaten bezahlen, k√∂nnen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> bestellen. <br><br>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgeb√§udes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432496/">https://habr.com/ru/post/de432496/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432484/index.html">Globales AI & MR Bootcamp Moskau 2018</a></li>
<li><a href="../de432486/index.html">Warum Autofahren selbst f√ºr KI eine Herausforderung ist</a></li>
<li><a href="../de432488/index.html">Was ich in C und C ++ nicht mag</a></li>
<li><a href="../de432492/index.html">5 B√ºcher, die Bill Gates 2018 ber√§t</a></li>
<li><a href="../de432494/index.html">IntelliCode ist jetzt auch in TypeScript / JavaScript</a></li>
<li><a href="../de432498/index.html">Definition von Zahlen nach Geh√∂r: Implementierung auf Arduino</a></li>
<li><a href="../de432500/index.html">PMP-Zertifizierung: Anwendungsaudit</a></li>
<li><a href="../de432502/index.html">Das Internet kann aufgrund von Sprachen wie C und C ++, die zu Sicherheitsl√ºcken beitragen, schwerwiegende Probleme haben</a></li>
<li><a href="../de432506/index.html">Microsoft Connect (); 2018: Alle Ank√ºndigungen der Cloud-Konferenz</a></li>
<li><a href="../de432508/index.html">Zu den Hindernissen f√ºr den Einsatz von Zeichensystemen in der k√ºnstlichen Intelligenz</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>