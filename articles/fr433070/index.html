<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è≠Ô∏è üèê ‚öîÔ∏è Comment distinguer le shampoing des champignons et les brochettes du champagne ... Elasticsearch - rechercher des produits dans les bases de donn√©es du magasin üö∂üèΩ üåÑ üèáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D√©fi 


 L'une des grandes t√¢ches de l'application de stockage et d'analyse des achats est de rechercher des produits identiques ou tr√®s proches dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment distinguer le shampoing des champignons et les brochettes du champagne ... Elasticsearch - rechercher des produits dans les bases de donn√©es du magasin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433070/"><h1 id="zadacha">  D√©fi </h1><br><p> L'une des grandes t√¢ches de l'application de stockage et d'analyse des achats est de rechercher des produits identiques ou tr√®s proches dans la base de donn√©es, qui contient des noms de produits vari√©s et obscurs obtenus √† partir des re√ßus.  Il existe deux types de demande d'entr√©e: </p><br><ol><li>  Un nom sp√©cifique avec des abr√©viations, qui ne peut √™tre compris que par les caissiers d'un supermarch√© local ou les acheteurs avides. </li><li>  Une requ√™te en langage naturel entr√©e par l'utilisateur dans la cha√Æne de recherche. </li></ol><br><p>  En r√®gle g√©n√©rale, les demandes du premier type proviennent des produits du ch√®que lui-m√™me, lorsque l'utilisateur a besoin de trouver des produits moins chers.  Notre t√¢che consiste √† s√©lectionner l'analogue de produit le plus similaire √† partir de la v√©rification dans d'autres magasins √† proximit√©.  Il est important de choisir la marque de produit la plus appropri√©e et, si possible, le volume. </p><br><p><img src="https://habrastorage.org/webt/yp/_d/ny/yp_dnyvhrlrrrr6v0pa_6sz_ibk.jpeg"></p><a name="habracut"></a><br><p>  Le deuxi√®me type de demande est une simple demande de l'utilisateur de rechercher un produit sp√©cifique dans le magasin le plus proche.  La demande peut √™tre une description tr√®s g√©n√©rale et non unique du produit.  Il peut y avoir de l√©gers √©carts par rapport √† la demande.  Par exemple, si un utilisateur recherche du lait √† 3,2% et dans notre base de donn√©es seulement 2,5% de lait, nous voulons toujours afficher au moins ce r√©sultat. </p><br><p><img src="https://habrastorage.org/webt/ar/0-/03/ar0-03doeo4rgkrbni26iz9rek4.jpeg"></p><br><h1 id="osobennosti-dataseta--problemy-dlya-resheniya">  Ensemble de donn√©es sur les fonctionnalit√©s - probl√®mes √† r√©soudre </h1><br><p>  Les informations contenues dans le re√ßu du produit sont loin d'√™tre id√©ales.  Il a beaucoup d'abr√©viations pas toujours claires, d'erreurs grammaticales, de fautes de frappe, de traductions diverses, de lettres latines au milieu de l'alphabet cyrillique et de jeux de caract√®res qui n'ont de sens que pour l'organisation interne dans un magasin particulier. <br>  Par exemple, une pur√©e de pomme-banane avec du fromage cottage peut facilement √™tre inscrite sur le ch√®que comme ceci: </p><br><p><img src="https://habrastorage.org/webt/kv/gg/23/kvgg23lcyv2h5gulck5k_9x1a-s.jpeg"></p><cut></cut><br><h1 id="o-tehnologii">  √Ä propos de la technologie </h1><br><p>  Elasticsearch est une technologie assez populaire et abordable pour impl√©menter la recherche.  Il s'agit d'un moteur de recherche d'API JSON REST utilisant Lucene et √©crit en Java.  Les principaux avantages d'Elastic sont la vitesse, l'√©volutivit√© et la tol√©rance aux pannes.  Des moteurs similaires sont utilis√©s pour des recherches complexes dans la base de donn√©es de documents.  Par exemple, une recherche prenant en compte la morphologie de la langue ou une recherche par g√©o-coordonn√©es. </p><br><h1 id="napravleniya-dlya-eksperimentov-i-uluchsheniy">  Orientations pour l'exp√©rimentation et l'am√©lioration </h1><br><p>  Pour comprendre comment vous pouvez am√©liorer votre recherche, vous devez analyser le syst√®me de recherche dans ses composants personnalis√©s.  Pour notre cas, la structure du syst√®me ressemble √† ceci. </p><br><ol><li>  La cha√Æne d'entr√©e pour la recherche passe par l'analyseur qui, d'une certaine mani√®re, divise la cha√Æne en jetons - unit√©s de recherche qui recherchent parmi les donn√©es qui sont √©galement stock√©es en tant que jetons. </li><li>  Ensuite, il y a une recherche directe de ces jetons pour chaque document dans la base de donn√©es existante.  Apr√®s avoir trouv√© le jeton dans un certain document (qui est √©galement pr√©sent√© dans la base de donn√©es comme un ensemble de jetons), sa pertinence est calcul√©e selon le mod√®le de similarit√© s√©lectionn√© (nous l'appellerons le mod√®le de pertinence).  Il peut s'agir d'un simple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TF / IDF</a> (terme fr√©quence - fr√©quence de document inverse), ou il peut s'agir d'autres mod√®les plus complexes ou sp√©cifiques. </li><li>  √Ä l'√©tape suivante, le nombre de points marqu√©s par chaque jeton individuel est agr√©g√© d'une certaine mani√®re.  Les param√®tres d'agr√©gation sont d√©finis par la s√©mantique des requ√™tes.  Un exemple de telles agr√©gations peut √™tre des poids suppl√©mentaires pour certains jetons (valeur ajout√©e), des conditions pour la pr√©sence obligatoire d'un jeton, etc.  Le r√©sultat de cette √©tape est Score - l'√©valuation finale de la pertinence d'un document particulier de la base de donn√©es par rapport √† la demande initiale. </li></ol><br><p><img src="https://habrastorage.org/webt/_u/yg/zp/_uygzp1ohyyhtksrfuwbfvmi3r0.jpeg"></p><br><p>  Trois composants configurables s√©par√©ment peuvent √™tre distingu√©s du dispositif de recherche, dans chacun desquels vous pouvez mettre en √©vidence vos propres voies et m√©thodes d'am√©lioration. </p><br><ol><li>  Analyseurs </li><li>  Mod√®le de similitude </li><li>  Am√©liorations au moment de la requ√™te </li></ol><br><p>  Ensuite, nous examinerons chaque composant individuellement et analyserons les param√®tres sp√©cifiques qui ont contribu√© √† am√©liorer la recherche dans le cas des noms de produits. </p><br><h3 id="query-time-uluchsheniya">  Am√©liorations au moment de la requ√™te </h3><br><p>  Pour comprendre ce que nous pouvons am√©liorer dans la demande, nous donnons un exemple de la demande initiale. </p><br><pre><code class="sql hljs">{ "query": { "multi_match": { "query": "  105", "type": "most_fields", "fields": ["name"], "minimum_should_match": "70%" } }, ‚Äúsize‚Äù: 100, ‚Äúmin_score‚Äù: 15 }</code> </pre> <br><p>  Nous utilisons le type de requ√™te most_fields, car nous pr√©voyons la n√©cessit√© d'une combinaison de plusieurs analyseurs pour le champ ¬´nom du produit¬ª.  Ce type de requ√™te vous permet de combiner les r√©sultats de recherche pour diff√©rents attributs de l'objet contenant le m√™me texte, analys√©s de diff√©rentes mani√®res.  Une alternative √† cette approche consiste √† utiliser les requ√™tes best_fields ou cross_fields, mais elles ne conviennent pas √† notre cas, car la recherche est calcul√©e parmi les diff√©rents attributs de l'objet (ex: nom et description).  Nous sommes confront√©s √† la t√¢che de prendre en compte divers aspects d'un attribut - le nom du produit. </p><br><p>  Ce qui peut √™tre configur√©: </p><br><ul><li>  Combinaison pond√©r√©e de diff√©rents analyseurs. <br>  Initialement, tous les √©l√©ments de recherche ont le m√™me poids - et donc, la m√™me importance.  Cela peut √™tre modifi√© en ajoutant le param√®tre ¬´boost¬ª, qui prend des valeurs num√©riques.  Si le param√®tre est sup√©rieur √† 1, l'√©l√©ment de recherche aura un impact plus important sur les r√©sultats, respectivement, inf√©rieur √† 1 - inf√©rieur. </li><li>  S√©paration des analyseurs en ¬´devrait¬ª et ¬´doit¬ª. <br>  √Ä savoir, certains analyseurs doivent co√Øncider, et certains sont facultatifs, c'est-√†-dire insuffisants.  Dans notre cas, l'analyseur de nombres peut √™tre un exemple des avantages d'une telle s√©paration.  Si seul le num√©ro correspond au nom du produit dans la demande et au nom du produit dans la base de donn√©es, alors ce n'est pas une condition suffisante pour leur √©quivalence.  Nous ne voulons pas voir de tels produits en cons√©quence.  Dans le m√™me temps, si la demande est ¬´cr√®me 10%¬ª, nous voulons que toutes les cr√®mes avec 10% de mati√®res grasses aient un gros avantage sur les cr√®mes avec 20% de mati√®res grasses. </li><li>  Le param√®tre minimum_should_match.  Combien de jetons doivent n√©cessairement correspondre dans la demande et le document de la base de donn√©es?  Ce param√®tre fonctionne avec le type de notre demande (most_fields) et v√©rifie le nombre minimum de jetons correspondants pour chacun des champs (dans notre cas, pour chaque analyseur). </li><li>  Param√®tre Min_score.  Documents de s√©lection des seuils avec des points insuffisants.  Le hic, c'est qu'il n'y a pas de vitesse maximale connue.  Le score obtenu d√©pend d'une demande sp√©cifique et d'une base de donn√©es sp√©cifique de documents.  Parfois, il peut √™tre de 150 et parfois de 2, mais ces deux valeurs signifient que l'objet de la base de donn√©es est pertinent pour la demande.  Nous ne pouvons pas comparer les scores des r√©sultats de diff√©rentes requ√™tes. <br><ul><li>  Constante <br>  Apr√®s un contr√¥le suffisant des valeurs finales de la vitesse pour diff√©rentes requ√™tes, vous pouvez identifier une fronti√®re approximative, apr√®s quoi pour la plupart des requ√™tes, les r√©sultats deviennent inappropri√©s.  C'est la d√©cision la plus simple, mais aussi la plus stupide, ce qui conduit √† une recherche de mauvaise qualit√©. </li><li>  Essayez d'analyser les scores obtenus pour une demande sp√©cifique apr√®s avoir effectu√© une recherche avec un minimum ou z√©ro min_score. <br>  L'id√©e est qu'apr√®s un certain moment, vous pouvez observer un saut brusque dans le sens d'une vitesse d√©croissante.  Il ne reste plus qu'√† d√©terminer ce saut afin de s'arr√™ter dans le temps.  Une telle approche fonctionnerait bien sur des requ√™tes similaires: <br><img src="https://habrastorage.org/webt/9z/qo/-u/9zqo-uovb_75ytduyti4byhmeyo.png"><br>  Le saut peut √™tre trouv√© par des m√©thodes statistiques.  Mais, malheureusement, pas dans toutes les demandes, ce saut est pr√©sent et est facilement identifiable. </li><li>  Calculez la vitesse id√©ale et d√©finissez min_score comme une certaine fraction de l'id√©al, ce qui peut √™tre fait de deux mani√®res: <br><ul><li>  D'apr√®s la description d√©taill√©e des calculs fournis par Elastic lui-m√™me lors de la d√©finition du param√®tre expliquer: true.  C'est une t√¢che difficile, n√©cessitant une compr√©hension approfondie de l'architecture des requ√™tes et des algorithmes de calcul utilis√©s par Elastic. </li><li>  Par un petit truc.  Nous recevons une demande, ajoutons un nouveau produit √† notre base de donn√©es du m√™me nom, effectuons une recherche et obtenons la vitesse maximale.  Puisqu'il y aura une correspondance de 100% dans le nom, la valeur r√©sultante sera id√©ale.  C'est cette approche que nous utilisons dans notre syst√®me, car les inqui√©tudes concernant le co√ªt √©lev√© de cette op√©ration dans le temps n'ont pas √©t√© confirm√©es. </li></ul></li></ul></li><li>  Modifiez l'algorithme de notation, qui est responsable de la valeur de pertinence finale.  Cela peut prendre en compte la distance par rapport au magasin (donner plus de points aux produits les plus proches), les prix des produits (donner plus de points aux produits avec le prix le plus probable), etc. </li></ul><br><h3 id="analizatory">  Analyseurs </h3><br><p>  L'analyseur analyse la cha√Æne d'entr√©e en trois √©tapes et √©met des jetons √† la sortie - unit√©s de recherche: </p><br><p><img src="https://habrastorage.org/webt/cd/vc/u8/cdvcu8tw-9wsrgelal2ii0waeio.jpeg"></p><br><p>  Tout d'abord, les modifications se produisent au niveau des caract√®res de la cha√Æne.  Il peut s'agir de remplacer, de supprimer ou d'ajouter des caract√®res √† une cha√Æne.  Ensuite, un tokenizer entre en jeu, qui est con√ßu pour diviser la cha√Æne en jetons.  Le tokenizer standard divise la cha√Æne en jetons en fonction des signes de ponctuation.  Dans la derni√®re √©tape, les jetons re√ßus sont filtr√©s et trait√©s. </p><br><p>  Consid√©rez quelles variations des √©tapes sont devenues utiles dans notre cas. </p><br><h5 id="char-filters">  Filtres char </h5><br><ul><li>  Selon les sp√©cificit√©s de la langue russe, il serait utile de traiter des caract√®res tels que th et e et de les remplacer respectivement par et et e. </li><li>  Effectuer la translitt√©ration - le transfert de caract√®res d'une √©criture par des caract√®res d'une autre √©criture.  Dans notre cas, il s'agit du traitement des noms √©crits en latin ou m√©lang√©s aux deux alphabets.  La translitt√©ration peut √™tre impl√©ment√©e en utilisant le plug-in ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ICU Analysis Plugin</a> ) comme filtre √† jetons (c'est-√†-dire qu'il ne traite pas la cha√Æne d'origine, mais les jetons finaux).  Nous avons d√©cid√© d'√©crire notre translitt√©ration, car nous n'√©tions pas tr√®s satisfaits de l'algorithme dans le plugin.  L'id√©e est de remplacer d'abord les occurrences du jeu de quatre caract√®res (par exemple, ¬´SHCH =&gt; u¬ª), puis les occurrences de trois caract√®res, etc. L'ordre dans lequel les filtres de symboles sont utilis√©s est important car le r√©sultat d√©pendra de l'ordre. </li><li>  Remplacer le latin c, entour√© de cyrillique, par le russe p.  La n√©cessit√© de cela a √©t√© identifi√©e apr√®s analyse des noms dans la base de donn√©es - de tr√®s nombreux noms en cyrillique comprenaient le latin c, ce qui signifie cyrillique c.  Quand comme si le nom est compl√®tement en latin, alors latin C signifie cyrillique k ou c.  Par cons√©quent, avant la translitt√©ration, il est n√©cessaire de remplacer le caract√®re c. </li><li>  Suppression de trop grands nombres des noms.  Parfois, dans les noms de produits, il y a un num√©ro d'identification interne (par exemple 3387522 K.Ts. Maslo podsoln.raf. 0.9l), qui n'a aucune signification dans le cas g√©n√©ral. </li><li>  Remplacement des virgules par des points.  Pourquoi est-ce n√©cessaire?  Pour que les chiffres, par exemple, la teneur en mati√®res grasses du lait 3.2 et 3.2, soient √©quivalents </li></ul><br><h5 id="tokenizer">  Tokenizer </h5><br><ul><li>  Tokenizer standard - s√©pare les lignes en fonction de l'espace et des signes de ponctuation (par exemple, "twix extra 2" -&gt; "twix", "extra", "2") </li><li>  Tokenizer EdgeNGram - divise chaque mot en jetons d'une longueur donn√©e (g√©n√©ralement une plage de nombres), en commen√ßant par le premier caract√®re (par exemple, pour N = [3, 6]: "twix extra 2" -&gt; "twee", "tweak", "Twix", "ex", "ext", "ext", "extra") </li><li>  Tokenizer pour les nombres - s√©lectionne uniquement les nombres dans une cha√Æne en recherchant une expression r√©guli√®re (par exemple, "twix extra 2 4.5" -&gt; "2", "4.5") </li></ul><br><h5 id="token-filter">  Filtre √† jeton </h5><br><ul><li>  Filtre en minuscules </li><li>  Filtre de stamming - ex√©cute un algorithme de stamming pour chaque jeton.  La racine consiste √† d√©terminer la forme initiale d'un mot (par exemple, ¬´riz¬ª -&gt; ¬´riz¬ª) </li><li>  Analyse phon√©tique.  Il est n√©cessaire afin de minimiser l'influence des fautes de frappe et des diff√©rentes fa√ßons d'√©crire le m√™me mot sur les r√©sultats de la recherche.  Le tableau pr√©sente les diff√©rents algorithmes disponibles pour l'analyse phon√©tique et le r√©sultat de leur travail dans des cas probl√©matiques.  Dans le premier cas (Shampooing / champagne / champignon / champignon), le succ√®s est d√©termin√© par la g√©n√©ration de codages diff√©rents, dans le reste - les m√™mes. </li></ul><br><p><img src="https://habrastorage.org/webt/gi/oi/x6/gioix68jytjyfxexdt3pvjpatze.png"></p><br><h3 id="similarity-model">  Mod√®le de similitude </h3><br><p>  Le mod√®le de pertinence est n√©cessaire afin de d√©terminer dans quelle mesure la co√Øncidence d'un jeton affecte la pertinence de l'objet de la base de donn√©es par rapport √† la demande.  Supposons que le jeton de la demande et le produit de la base de donn√©es correspondent - ce n'est certainement pas mauvais, mais cela ne dit pas grand-chose sur la conformit√© du produit √† la demande.  Ainsi, la co√Øncidence de diff√©rents jetons porte des valeurs diff√©rentes.  Pour en tenir compte, un mod√®le de pertinence est n√©cessaire.  Elastic propose de nombreux mod√®les diff√©rents.  Si vous les comprenez vraiment, vous pouvez choisir un mod√®le tr√®s sp√©cifique et adapt√© √† un cas particulier.  Le choix peut √™tre bas√© sur le nombre de mots fr√©quemment utilis√©s (comme le m√™me jeton pour), une √©valuation de l'importance des longs jetons (plus long signifie mieux? Pire? Peu importe?), Quels r√©sultats voulons-nous voir √† la fin, etc.  Des exemples de mod√®les propos√©s dans Elastic peuvent √™tre TF-IDF (le mod√®le le plus simple et le plus compr√©hensible), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Okapi BM25</a> (TF-IDF am√©lior√©, le mod√®le par d√©faut), la divergence par rapport au hasard, la divergence par rapport √† l'ind√©pendance, etc.  Chaque mod√®le dispose √©galement d'options personnalisables.  Apr√®s plusieurs exp√©riences avec le mod√®le, le mod√®le par d√©faut Okapi BM25 a montr√© le meilleur r√©sultat, mais avec des param√®tres diff√©rents de ceux pr√©d√©finis. </p><br><h1 id="ispolzovanie-kategoriy">  Utiliser des cat√©gories </h1><br><p>  Au cours de la recherche, des informations suppl√©mentaires tr√®s importantes sur le produit - sa cat√©gorie - sont devenues disponibles.  Vous pouvez en savoir plus sur la fa√ßon dont nous avons impl√©ment√© la cat√©gorisation dans l'article. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Si je comprends bien, je mange beaucoup de bonbons, ou le classement des marchandises par ch√®que dans l'application</a> .  Jusque-l√†, nous avons bas√© notre recherche uniquement sur une comparaison des noms de produits, il est maintenant possible de comparer la cat√©gorie de demande et les produits dans la base de donn√©es. <br>  Les options possibles pour utiliser ces informations sont une correspondance obligatoire dans le champ cat√©gorie (format√©e comme un filtre de r√©sultats), un avantage suppl√©mentaire sous la forme de points pour les marchandises de la m√™me cat√©gorie (comme dans le cas des nombres) et le tri des r√©sultats par cat√©gorie (premi√®re correspondance, puis toutes les autres).  Pour notre cas, la derni√®re option a fonctionn√© le mieux.  En effet, notre algorithme de cat√©gorisation est trop bon pour utiliser la deuxi√®me m√©thode, et pas assez bon pour utiliser la premi√®re.  Nous avons suffisamment confiance en l'algorithme et souhaitons que l'appariement des cat√©gories soit un gros avantage.  Dans le cas de l'ajout de points suppl√©mentaires √† la vitesse (deuxi√®me m√©thode), les produits de m√™me cat√©gorie remonteront dans la liste, mais perdront tout de m√™me pour certains produits dont le nom correspond mieux.  Cependant, la premi√®re m√©thode ne nous convient pas non plus, car des erreurs de cat√©gorisation sont encore possibles.  Parfois, la demande peut contenir des informations insuffisantes pour d√©terminer correctement la cat√©gorie, ou il y a trop peu de produits dans cette cat√©gorie dans le rayon imm√©diat de l'utilisateur.  Dans ce cas, nous voulons toujours afficher les r√©sultats avec une cat√©gorie diff√©rente, mais toujours pertinente par nom de produit. <br>  La seconde m√©thode est √©galement bonne car elle ne "g√¢che" pas la vitesse des produits √† la suite de la recherche, et permet de continuer √† utiliser la vitesse minimale calcul√©e sans obstacles. <br>  L'impl√©mentation sp√©cifique du tri est visible dans la requ√™te finale. </p><br><h1 id="finalnaya-model">  Mod√®le final </h1><br><p>  La s√©lection du mod√®le de recherche final a inclus la g√©n√©ration de divers moteurs de recherche, leur √©valuation et leur comparaison.  Le plus souvent, la comparaison √©tait bas√©e sur l'un des param√®tres.  Supposons que dans un cas sp√©cifique, nous devions calculer la meilleure taille pour le tokenizer edgeNgram (c'est-√†-dire choisir la plage de N la plus efficace).  Pour ce faire, nous avons g√©n√©r√© les m√™mes moteurs de recherche avec une seule diff√©rence dans la taille de cette plage.  Apr√®s cela, il a √©t√© possible de d√©terminer la meilleure valeur pour ce param√®tre. <br>  Les mod√®les ont √©t√© √©valu√©s √† l'aide de la mesure nDCG (gain cumulatif actualis√© normalis√©), une mesure permettant d'√©valuer la qualit√© du classement.  Des requ√™tes pr√©d√©finies ont √©t√© envoy√©es √† chaque mod√®le de recherche, apr√®s quoi la m√©trique nDCG a √©t√© calcul√©e sur la base des r√©sultats de recherche re√ßus. <br>  Analyseurs qui sont entr√©s dans le mod√®le final: </p><br><p><img src="https://habrastorage.org/webt/nb/-m/ti/nb-mtitufklquryy-5o3m2trrl4.jpeg"></p><br><p><img src="https://habrastorage.org/webt/5n/y3/6g/5ny36gkpfblbdtr5xvu8b4fx_r4.jpeg"></p><br><p><img src="https://habrastorage.org/webt/2r/er/zv/2rerzvbqvsdgezshkhpfeds2mc0.jpeg"></p><br><p><img src="https://habrastorage.org/webt/5h/tv/69/5htv691pabkoks90jq08h6nmdxo.jpeg"></p><br><p>  Le mod√®le par d√©faut (Okapi - BM25) avec le param√®tre b = 0,5 a √©t√© choisi comme mod√®le de pertinence.  La valeur par d√©faut est 0,75.  Ce param√®tre indique dans quelle mesure la longueur du nom de produit normalise la variable tf (terme fr√©quence).  Un nombre plus petit dans notre cas fonctionne mieux, car un nom long n'affecte pas tr√®s souvent la signification d'un seul mot.  C'est-√†-dire que le mot ¬´chocolat¬ª dans le nom ¬´chocolat aux noisettes broy√©es dans un paquet de 25 pi√®ces¬ª ne perd pas sa valeur du fait que le nom est assez long. </p><br><p>  La requ√™te finale ressemble √† ceci: </p><br><p><img src="https://habrastorage.org/webt/ol/9y/5n/ol9y5nfbppfwyxhqaskziiypuru.jpeg"></p><br><p>  Exp√©rimentalement, la meilleure combinaison d'analyseurs et de poids a √©t√© r√©v√©l√©e. </p><br><p>  Suite au tri, les produits de m√™me cat√©gorie vont au d√©but des r√©sultats, puis √† tous les autres.  Le tri par nombre de points (vitesse) est stock√© dans chaque sous-ensemble. </p><br><p>  Par souci de simplicit√©, le seuil de vitesse est fix√© √† 15 dans cette demande, bien que dans notre syst√®me, nous utilisons le param√®tre calcul√© qui a √©t√© d√©crit pr√©c√©demment. </p><br><h1 id="v-buduschem">  Dans le futur </h1><br><p>  Il y a des r√©flexions sur l'am√©lioration de la recherche en r√©solvant l'un des probl√®mes les plus embarrassants de notre algorithme, qui est l'existence d'un million et d'une mani√®re diff√©rente de raccourcir un mot de 5 lettres.  Il peut √™tre r√©solu par le traitement initial des noms afin de r√©v√©ler les abr√©viations.  Une fa√ßon de r√©soudre ce probl√®me est d'essayer de comparer le nom abr√©g√© de notre base de donn√©es avec l'un des noms de la base de donn√©es avec les noms complets ¬´corrects¬ª.  Cette d√©cision rencontre ses propres obstacles, mais elle semble un changement prometteur. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433070/">https://habr.com/ru/post/fr433070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433058/index.html">Quintet comme entit√© de base pour d√©crire un domaine</a></li>
<li><a href="../fr433060/index.html">Pourquoi je ne crois pas aux microbenchmarks</a></li>
<li><a href="../fr433062/index.html">AXIS P1367 vs IDIS DC-B3303X: Comparez les cam√©ras CCTV</a></li>
<li><a href="../fr433064/index.html">Gestion des incidents: ¬´vous ne pouvez pas abandonner¬ª ou l'art de placer des virgules</a></li>
<li><a href="../fr433066/index.html">Coupe HighLoad # 2. Championnat pour les d√©veloppeurs backend de retour en service</a></li>
<li><a href="../fr433072/index.html">Comment pirater la protection contre la copie de la console Sega Dreamcast</a></li>
<li><a href="../fr433074/index.html">Passer √† Kotlin dans un projet Android: trucs et astuces</a></li>
<li><a href="../fr433076/index.html">Comment nous avons cr√©√© notre biblioth√®que Android Gallery pour afficher le contenu multim√©dia</a></li>
<li><a href="../fr433078/index.html">Nous √©crivons des robots de trading en utilisant le cadre graphique StockSharp. 2e partie</a></li>
<li><a href="../fr433082/index.html">Pomper les comptes d'autrui est devenu une infraction p√©nale en Cor√©e du Sud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>