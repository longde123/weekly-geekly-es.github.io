<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßôüèΩ üêó üé™ So funktioniert das JPEG-Format üë∑üèº üíáüèø üòã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JPEG-Bilder sind √ºberall in unserem digitalen Leben zu finden, aber hinter dieser Abdeckung des Bewusstseins stecken Algorithmen, die Details eliminie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So funktioniert das JPEG-Format</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454944/"><h4>  JPEG-Bilder sind √ºberall in unserem digitalen Leben zu finden, aber hinter dieser Abdeckung des Bewusstseins stecken Algorithmen, die Details eliminieren, die vom menschlichen Auge nicht wahrgenommen werden.  Das Ergebnis ist die h√∂chste visuelle Qualit√§t bei kleinster Dateigr√∂√üe - aber wie genau funktioniert das alles?  Mal sehen, was genau unsere Augen nicht sehen! </h4><br><img src="https://habrastorage.org/webt/xh/7m/8n/xh7m8nokzhgfqixb00fnwcmkthm.jpeg"><br><br>  Es ist einfach, die M√∂glichkeit, ein Foto an einen Freund zu senden, als selbstverst√§ndlich zu betrachten und sich keine Gedanken dar√ºber zu machen, welches Ger√§t, welcher Browser oder welches Betriebssystem verwendet wird. Dies war jedoch nicht immer der Fall.  In den fr√ºhen 1980er Jahren wussten Computer, wie man digitale Bilder speichert und anzeigt, aber es gab viele konkurrierende Ideen, wie dies am besten m√∂glich ist.  Es war unm√∂glich, einfach ein Bild von einem Computer auf einen anderen zu senden und zu hoffen, dass alles funktionierte. <br><a name="habracut"></a><br>  Um dieses Problem zu l√∂sen, wurde 1986 in Zusammenarbeit mit der Internationalen Organisation f√ºr Normung (ISO) und der Internationalen Elektrotechnischen Kommission (IEC) ein Expertenkomitee aus der ganzen Welt unter dem Namen Joint Photographic Experts Group (JPEG) zusammengestellt ) - zwei internationale Normungsorganisationen mit Hauptsitz in Genf (Schweiz). <br><br>  Eine Gruppe von Personen namens JPEG schuf 1992 den JPEG-Standard f√ºr die digitale Bildkomprimierung.  Jeder, der das Internet nutzt, st√∂√üt wahrscheinlich auf JPEG-codierte Bilder.  Dies ist die h√§ufigste Methode zum Codieren, Senden und Speichern von Bildern.  Von Webseiten √ºber E-Mails bis hin zu sozialen Netzwerken wird JPEG milliardenfach am Tag verwendet - fast jedes Mal, wenn wir ein Bild online ansehen oder senden.  Ohne JPEG w√§re das Web weniger lebendig, langsamer und wahrscheinlich weniger Katzenbilder! <br><br>  In diesem Artikel wird beschrieben, wie Sie ein JPEG-Bild dekodieren.  Mit anderen Worten, was erforderlich ist, um auf einem Computer gespeicherte komprimierte Daten in ein Bild umzuwandeln, das auf dem Bildschirm angezeigt wird.  Es ist wichtig, dar√ºber Bescheid zu wissen, nicht nur, weil es wichtig ist, die Technologie zu verstehen, die wir t√§glich verwenden, sondern auch, weil wir bei der Offenlegung der Kompressionsstufen die Wahrnehmung und das Sehen sowie die Details, f√ºr die unsere Augen am empfindlichsten sind, besser verstehen. <br><br>  Au√üerdem ist es sehr interessant, auf diese Weise mit Bildern zu spielen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f8/312/709/4f831270939c4f685405283f4286e867.gif"><br><br><h2>  Blick in ein JPEG </h2><br>  Auf einem Computer wird alles als Folge von Bin√§rzahlen gespeichert.  Typischerweise sind diese Bits, Nullen und Einsen, in acht gruppiert und bilden Bytes.  Wenn Sie ein JPEG-Bild auf einem Computer √∂ffnen, sollte etwas (Browser, Betriebssystem, etwas anderes) die Bytes dekodieren und das Originalbild in Form einer Liste von Farben wiederherstellen, die angezeigt werden k√∂nnen. <br><br>  Wenn Sie dieses s√º√üe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Katzenfoto</a> herunterladen und in einem Texteditor √∂ffnen, sehen Sie eine Reihe inkoh√§renter Zeichen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e4/8a0/017/1e48a0017ada1830f50eefc5079410ea.png"><br>  <i>Hier verwende ich Notepad ++, um den Inhalt einer Datei zu untersuchen, da normale Texteditoren wie Notepad von Windows die Bin√§rdatei nach dem Speichern besch√§digen und das JPEG-Format nicht mehr erf√ºllen.</i> <br><br>  Wenn Sie ein Bild in einem Texteditor √∂ffnen, verwirren Sie den Computer, genauso wie Sie Ihr Gehirn verwirren, wenn Sie sich die Augen reiben und anfangen, farbige Flecken zu sehen! <br><br>  Diese Flecken, die Sie sehen, werden als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Phosphene bezeichnet</a> und sind nicht das Ergebnis der Exposition gegen√ºber einem Lichtreiz oder Halluzinationen, die vom Geist erzeugt werden.  Sie treten auf, weil Ihr Gehirn glaubt, dass elektrische Signale in den Sehnerven Informationen √ºber das Licht √ºbertragen.  Das Gehirn muss solche Annahmen treffen, da es unm√∂glich ist zu wissen, ob das Signal Ton, Vision oder irgendetwas anderes ist.  Alle Nerven im K√∂rper √ºbertragen genau die gleichen elektrischen Impulse.  Durch Dr√ºcken auf die Augen senden Sie Signale, die nicht visuell sind, sondern die Rezeptoren des Auges aktivieren, die Ihr Gehirn - in diesem Fall falsch - als etwas Visuelles interpretiert.  Sie k√∂nnen buchst√§blich den Druck sehen! <br><br>  Es ist lustig dar√ºber nachzudenken, wie Computer wie ein Gehirn aussehen, aber es ist auch eine n√ºtzliche Analogie, die zeigt, wie stark die Bedeutung von Daten, die von Nerven durch den K√∂rper √ºbertragen oder auf einem Computer gespeichert werden, von ihrer Interpretation abh√§ngt.  Alle Bin√§rdaten bestehen aus Nullen und Einsen, Grundkomponenten, die Informationen jeglicher Art √ºbertragen k√∂nnen.  Ihr Computer err√§t h√§ufig anhand von Hinweisen wie Dateierweiterungen, wie sie interpretiert werden sollen.  Und jetzt zwingen wir ihn, sie als Text zu interpretieren, wie es der Texteditor erwartet. <br><br>  Um zu verstehen, wie JPEG dekodiert wird, m√ºssen wir die Originalsignale selbst sehen - Bin√§rdaten.  Dies kann mit dem Hex-Editor oder direkt auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Webseite des Originalartikels erfolgen</a> !  Es gibt ein Bild, neben dem im Textfeld alle Bytes (au√üer der Kopfzeile) in Dezimalform angezeigt werden.  Sie k√∂nnen sie √§ndern, und das Skript wird sofort neu codieren und ein neues Bild erstellen. <br><br><img src="https://habrastorage.org/webt/0e/tu/az/0etuazw_ujtrjmepdjpaacmg_jo.png"><br><br>  Sie k√∂nnen viel lernen, indem Sie einfach mit diesem Editor spielen.  K√∂nnen Sie beispielsweise feststellen, in welcher Reihenfolge die Pixel gespeichert sind? <br><br>  In diesem Beispiel ist es seltsam, dass das √Ñndern einiger Zahlen das Bild √ºberhaupt nicht beeinflusst. Wenn Sie beispielsweise die Zahl 17 in der ersten Zeile durch 0 ersetzen, wird das Foto vollst√§ndig besch√§digt! <br><br><img src="https://habrastorage.org/webt/ql/47/xz/ql47xznmt7fq29yoynour0fscls.png"><br><br>  Andere √Ñnderungen, zum Beispiel das Ersetzen von 7 in Zeile 1988 durch die Nummer 254, √§ndern die Farbe, jedoch nur der nachfolgenden Pixel. <br><br><img src="https://habrastorage.org/webt/tj/tu/0o/tjtu0o9qppmq2pgv5mpfh02hpzw.png"><br><br>  Das Seltsamste ist vielleicht, dass einige Zahlen nicht nur die Farbe, sondern auch die Form des Bildes √§ndern.  √Ñndern Sie 70 in Zeile 12 in 2 und schauen Sie in die obere Reihe des Bildes, um zu sehen, was ich meine. <br><br><img src="https://habrastorage.org/webt/wr/ui/w3/wruiw3ds_yihzasjgytn8vul1de.png"><br><br>  Unabh√§ngig davon, welches JPEG-Bild Sie verwenden, finden Sie diese kryptischen Schachsequenzen beim Bearbeiten von Bytes immer. <br><br>  Wenn Sie mit dem Editor spielen, ist es schwer zu verstehen, wie das Foto aus diesen Bytes neu erstellt wird, da die JPEG-Komprimierung aus drei verschiedenen Technologien besteht, die nacheinander √ºber die Ebenen hinweg angewendet werden.  Wir werden jeden von ihnen einzeln untersuchen, um das mysteri√∂se Verhalten zu enth√ºllen, das wir beobachten. <br><br>  <b>Drei Stufen der JPEG-Komprimierung:</b> <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Farb-Downsampling</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diskrete Cosinustransformation und Diskretisierung</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Codierung von Serienl√§ngen</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Delta</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Huffman</a> </li></ol><br>  Damit Sie sich die Komprimierungsskala vorstellen k√∂nnen, beachten Sie bitte, dass das obige Bild 79.819 Zahlen darstellt, dh ungef√§hr 79 KB.  Wenn wir es ohne Komprimierung speichern w√ºrden, w√§ren f√ºr jedes Pixel drei Zahlen erforderlich - f√ºr die rote, gr√ºne und blaue Komponente.  Das w√§ren 917.700 Zahlen oder ca.  917 Kb.  Infolge der JPEG-Komprimierung hat sich die resultierende Datei um mehr als das Zehnfache verringert! <br><br>  Tats√§chlich kann dieses Bild viel st√§rker komprimiert werden.  Unten sehen Sie zwei Bilder nebeneinander - das Foto rechts wurde auf 16 KB verkleinert, das ist 57-mal kleiner als die unkomprimierte Version! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec8/a0f/b53/ec8a0fb53e28470aafb8fb6b04713de3.png"><br><br>  Wenn Sie genau hinschauen, werden Sie feststellen, dass diese Bilder nicht identisch sind.  Beide sind Bilder mit JPEG-Komprimierung, aber das richtige ist viel kleiner.  Es sieht auch etwas schlechter aus (siehe die Quadrate der Hintergrundfarben).  Daher wird JPEG auch als verlustbehaftete Komprimierung bezeichnet.  W√§hrend der Komprimierung √§ndert sich das Bild und verliert einige Details. <br><br><h2>  1. Farb-Downsampling </h2><br>  Hier ist ein Bild, das nur die erste Komprimierungsstufe verwendet. <br><br><img src="https://habrastorage.org/webt/bn/jq/j3/bnjqj3gjgcxd3xazrfnepcfwo-s.png"><br>  <i>(Interaktive Version - im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Originalartikel</a> ).</i>  <i>Durch Entfernen einer Zahl werden alle Farben zerst√∂rt.</i>  <i>Wenn Sie jedoch genau sechs Zahlen l√∂schen, hat dies praktisch keine Auswirkungen auf das Bild.</i> <br><br>  Jetzt sind die Zahlen etwas leichter zu entziffern.  Dies ist eine fast einfache Liste von Farben, bei der jedes Byte genau ein Pixel √§ndert, gleichzeitig aber bereits halb so gro√ü ist wie ein unkomprimiertes Bild (das bei einer derart reduzierten Gr√∂√üe etwa 300 KB einnehmen w√ºrde).  Ratet mal warum? <br><br>  Sie k√∂nnen sehen, dass diese Zahlen nicht die Standardkomponenten Rot, Gr√ºn und Blau bezeichnen. Wenn wir alle Zahlen durch Nullen ersetzen, erhalten wir ein gr√ºnes Bild (und kein Wei√ü). <br><br><img src="https://habrastorage.org/webt/ij/ar/qj/ijarqjsfiuanba52sxsn-ovh6q0.png"><br><br>  Dies liegt daran, dass diese Bytes Y (Helligkeit) anzeigen. <br><br><img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br><br>  Cb (relative Blauheit), <br><br><img src="https://habrastorage.org/webt/_s/ao/1c/_sao1c1div5bv1dltl6gahkp86a.png"><br><br>  und Cr-Bilder (relative R√∂tung). <br><br><img src="https://habrastorage.org/webt/mp/fz/jt/mpfzjtlicxlsmw3wmbrnqhywinu.png"><br><br>  Warum nicht RGB verwenden?  So funktionieren die meisten modernen Bildschirme.  Ihr Monitor kann jede Farbe anzeigen, einschlie√ülich Rot, Gr√ºn und Blau mit unterschiedlichen Intensit√§ten f√ºr jedes Pixel.  Wei√ü wird erhalten, indem alle drei bei voller Helligkeit eingeschaltet werden, und Schwarz, indem sie ausgeschaltet werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c27/504/f77/c27504f7737bca3efab3468f2a09aacc.png"><br><br>  Es ist auch der Arbeit des menschlichen Auges sehr √§hnlich.  Die Farbrezeptoren unserer Augen werden als " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zapfen</a> " bezeichnet und sind in drei Typen unterteilt, von denen jeder empfindlicher auf Rot, Gr√ºn oder Blau reagiert. [Zapfen vom Typ S sind in Violettblau empfindlich (S von English Short - Shortwave) Spektrum), M-Typ - in gr√ºn-gelb (M aus dem Englischen. Mittel - Mittelwelle) und L-Typ - in den gelb-roten (L aus dem Englischen. Lang - langwellig) Teilen des Spektrums.  Das Vorhandensein dieser drei Arten von Zapfen (und St√§bchen, die im smaragdgr√ºnen Teil des Spektrums empfindlich sind) gibt einer Person Farbsehen.  / ca.  √ºbersetzt.].  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">St√§bchen</a> , eine andere Art von Fotorezeptor in unseren Augen, k√∂nnen nur Helligkeits√§nderungen erfassen, sind jedoch viel empfindlicher.  In unseren Augen gibt es ungef√§hr 120 Millionen St√§bchen und nur 6 Millionen Zapfen. <br><br>  Daher bemerken unsere Augen Helligkeits√§nderungen viel besser als Farb√§nderungen.  Wenn Sie die Farbe von der Helligkeit trennen, k√∂nnen Sie ein wenig Farbe entfernen, und niemand wird etwas bemerken.  Beim Farb-Downsampling werden die Farbkomponenten eines Bildes mit einer niedrigeren Aufl√∂sung als die Helligkeitskomponenten dargestellt.  Im obigen Beispiel hat jedes Pixel genau eine Y-Komponente, und jede einzelne Gruppe von vier Pixeln hat genau eine Cb-Komponente und ein Cr.  Daher enth√§lt das Bild viermal weniger Farbinformationen als das Original. <br><br>  Der YCbCr-Farbraum wird nicht nur in JPEG verwendet.  Es wurde urspr√ºnglich 1938 f√ºr Fernsehshows erfunden.  Nicht jeder hat einen Farbfernseher, so dass durch die Trennung von Farbe und Helligkeit jeder das gleiche Signal empfangen konnte, und Fernseher ohne Farbe verwendeten nur die Helligkeitskomponente. <br><br>  Wenn Sie also eine Zahl aus dem Editor l√∂schen, werden alle Farben vollst√§ndig zerst√∂rt.  Komponenten werden als JJJJ Cb Cr gespeichert (tats√§chlich nicht unbedingt in dieser Reihenfolge - die Speicherreihenfolge wird im Dateikopf angegeben).  Das Entfernen der ersten Zahl f√ºhrt dazu, dass der erste Cb-Wert als Y, Cr als Cb wahrgenommen wird und insgesamt ein Dominoeffekt auftritt, der alle Farben des Bildes wechselt. <br><br>  Die JPEG-Spezifikation verpflichtet Sie nicht zur Verwendung von YCbCr.  In den meisten Dateien wird es jedoch verwendet, da es nach dem Downsampling Bilder mit besserer Qualit√§t liefert als RGB.  Aber du musst nicht mein Wort daf√ºr nehmen.  √úberzeugen Sie sich in der folgenden Tabelle, wie das Downsampling jeder einzelnen Komponente in RGB und YCbCr aussehen wird. <br><br><img src="https://habrastorage.org/webt/9b/fl/ei/9bfleirkdnq8sdwiudks05bdz1o.png"><br>  (Interaktive Version - im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Originalartikel</a> ). <br><br>  Das Entfernen von Blau ist nicht so auff√§llig wie das Entfernen von Rot oder Gr√ºn.  Dies liegt an den sechs Millionen Zapfen in Ihren Augen, etwa 64% reagieren empfindlich auf Rot, 32% auf Gr√ºn und 2% auf Blau. <br><br>  Die Unterabtastung der Komponente Y (unten links) ist am besten zu sehen.  Auff√§llig ist sogar eine geringf√ºgige √Ñnderung. <br><br>  Durch das Konvertieren eines Bilds von RGB in YCbCr wird die Dateigr√∂√üe nicht verringert, es wird jedoch einfacher, weniger auff√§llige Details zu finden, die entfernt werden k√∂nnen.  In der zweiten Stufe tritt eine verlustbehaftete Komprimierung auf.  Es basiert auf der Idee, Daten in einer komprimierbareren Form darzustellen. <br><br><h2>  2. Diskrete Cosinustransformation und Diskretisierung </h2><br>  Diese Komprimierungsstufe bestimmt gr√∂√ütenteils die Essenz von JPEG.  Nach dem Konvertieren von Farben in YCbCr werden die Komponenten separat komprimiert, sodass wir uns erst sp√§ter auf die Y-Komponente konzentrieren k√∂nnen. So sehen die Bytes der Y-Komponente nach dem Anwenden dieser Ebene aus. <br><br><img src="https://habrastorage.org/webt/sr/c2/en/src2enhysp480z4qoycrgptdn5m.png"><br>  <i>(Interaktive Version - im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Originalartikel</a> ).</i>  Wenn Sie in der interaktiven Version auf ein Pixel klicken, wird der Editor zu der Zeile gescrollt, die dies angibt.  Versuchen Sie, Zahlen vom Ende zu entfernen oder einer bestimmten Zahl einige Nullen hinzuzuf√ºgen. <br><br>  Auf den ersten Blick sieht es nach einer sehr schlechten Komprimierung aus.  Das Bild enth√§lt 100.000 Pixel, und 102.400 Zahlen sind erforderlich, um ihre Helligkeit (Y-Komponenten) anzuzeigen - dies ist schlimmer, als √ºberhaupt nichts zu komprimieren! <br><br>  Beachten Sie jedoch, dass die meisten dieser Zahlen Null sind.  Dar√ºber hinaus k√∂nnen alle diese Nullen am Zeilenende gel√∂scht werden, ohne das Bild zu √§ndern.  Es sind noch ungef√§hr 26.000 Nummern √ºbrig, und das ist fast viermal weniger! <br><br>  Auf dieser Ebene liegt das Geheimnis der Schachmuster.  Im Gegensatz zu anderen Effekten, die wir gesehen haben, ist das Erscheinungsbild dieser Muster kein Fehler.  Sie sind die Bausteine ‚Äã‚Äãdes gesamten Bildes.  Jede Zeile des Editors enth√§lt genau 64 Zahlen, diskrete Cosinustransformationskoeffizienten (DCT), die Intensit√§ten von 64 eindeutigen Mustern entsprechen. <br><br>  Diese Muster werden auf der Basis des Kosinusgraphen gebildet.  Hier sind einige davon: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2cc/8da/dd7/2cc8dadd7ca3d6565753fdd8f14a4fcd.png"><br>  <i>8 von 64 Gewinnchancen</i> <br><br>  Unten sehen Sie ein Bild, das alle 64 Muster zeigt. <br><br><img src="https://habrastorage.org/webt/z3/8n/ri/z38nrihqi2zbdt2cznzqy3p1bh0.png"><br>  <i>(Interaktive Version - im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Originalartikel</a> ).</i> <br><br>  Diese Muster sind von besonderer Bedeutung, da sie die Grundlage f√ºr 8x8-Bilder bilden.  Wenn Sie mit linearer Algebra nicht vertraut sind, bedeutet dies, dass aus diesen 64 Mustern jedes 8x8-Bild erhalten werden kann.  Bei DCT werden Bilder in 8 x 8 Bl√∂cke unterteilt und jeder Block in eine Kombination dieser 64 Koeffizienten umgewandelt. <br><br>  Die Tatsache, dass jedes Bild aus 64 spezifischen Mustern bestehen kann, scheint magisch.  Dies ist jedoch dasselbe wie zu sagen, dass jeder Ort auf der Erde durch zwei Zahlen beschrieben werden kann - Breite und L√§nge [was Hemisph√§ren anzeigt / ca.  √ºbersetzt.].  Wir betrachten die Erdoberfl√§che oft als zweidimensional, daher ben√∂tigen wir nur zwei Zahlen.  Ein 8x8-Bild hat 64 Dimensionen, daher ben√∂tigen wir 64 Zahlen. <br><br>  Es ist noch nicht klar, wie uns dies im Sinne der Komprimierung hilft.  Wenn wir 64 Zahlen ben√∂tigen, um ein 8x8-Bild darzustellen, warum ist dies besser, als nur 64 Luminanzkomponenten zu speichern?  Wir tun dies aus dem gleichen Grund, aus dem wir drei RGB-Nummern in drei YCbCr-Nummern umgewandelt haben: Dadurch k√∂nnen wir unsichtbare Details entfernen. <br><br>  Es ist schwer zu erkennen, welche Details zu diesem Zeitpunkt genau entfernt werden, da JPEG DCT auf 8x8-Bl√∂cke anwendet.  Niemand verbietet uns jedoch, es auf das ganze Bild anzuwenden.  So sieht DCT in Komponente Y aus, wenn es auf das gesamte Bild angewendet wird: <br><br><img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br><br>  Am Ende k√∂nnen Sie mehr als 60.000 Nummern l√∂schen, ohne dass sich das Foto merklich √§ndert. <br><br><img src="https://habrastorage.org/webt/we/mq/ma/wemqmatswqyazpgyxm12k-g7l-s.png"><br><br>  Beachten Sie jedoch, dass der Unterschied offensichtlich ist, wenn wir die ersten f√ºnf Zahlen zur√ºcksetzen. <br><br><img src="https://habrastorage.org/webt/m0/fj/tj/m0fjtjcfr_-6b50duzk3-zvl7gi.png"><br><br>  Die Zahlen am Anfang zeigen niederfrequente √Ñnderungen im Bild an, und unsere Augen nehmen sie am besten auf.  Die Zahlen am Ende zeigen √Ñnderungen bei hohen Frequenzen an, die schwieriger zu bemerken sind.  Um zu sehen, was mit dem Auge nicht sichtbar ist, k√∂nnen wir diese hochfrequenten Teile isolieren, indem wir die ersten 5000 Zahlen auf Null setzen. <br><br><img src="https://habrastorage.org/webt/si/gj/w2/sigjw20pylfjmu0rzqjocl6oqv4.png"><br><br>  Wir sehen alle Bereiche des Bildes, in denen die gr√∂√üte √Ñnderung von Pixel zu Pixel auftritt.  Die Augen der Katze, sein Schnurrbart, die Frotteedecke und die Schatten in der unteren linken Ecke fallen auf.  Sie k√∂nnen noch weiter gehen, indem Sie die ersten 10.000 Zahlen l√∂schen: <br><br><img src="https://habrastorage.org/webt/eg/vi/9a/egvi9a_wkwv48xktp7jiyajnhuc.png"><br><br>  20.000: <br><br><img src="https://habrastorage.org/webt/y9/fr/ri/y9frrialb_94gnwdd-plq_hcyqc.png"><br><br>  40.000: <br><br><img src="https://habrastorage.org/webt/0d/ce/kr/0dcekrobg9_ir-hqnggr9fjlw4u.png"><br><br>  60.000: <br><br><img src="https://habrastorage.org/webt/uo/8f/qx/uo8fqxadj-snukbdf1dcjgvoux0.png"><br><br>  Diese Hochfrequenzteile sind JPEG und werden w√§hrend der Komprimierungsphase gel√∂scht.  Das Konvertieren von Farben in DCT-Koeffizienten ist verlustfrei.  Verluste werden im Diskretisierungsschritt erzeugt, bei dem Hochfrequenzwerte oder nahe Null entfernt werden.  Wenn Sie die Qualit√§t des Speicherns von JPEG verringern, erh√∂ht das Programm den Schwellenwert f√ºr die Anzahl der gel√∂schten Werte, wodurch die Dateigr√∂√üe verringert wird, das Bild jedoch pixeliger wird.  Daher sah das Bild im ersten Abschnitt, das 57-mal kleiner war, so aus.  Jeder 8x8-Block schien im Vergleich zu einer besseren Version eine viel geringere Anzahl von DCT-Koeffizienten zu haben. <br><br>  Sie k√∂nnen einen coolen Effekt erzielen, z. B. das schrittweise Streamen von Bildern.  Sie k√∂nnen ein verschwommenes Bild anzeigen, das detaillierter wird, wenn immer mehr Koeffizienten heruntergeladen werden. <br><br>  Hier, nur zum Spa√ü, was passiert, wenn nur 24.000 Zahlen verwendet werden: <br><br><img src="https://habrastorage.org/webt/vn/sf/xr/vnsfxrqyogsnc4qx9pzsok--rno.png"><br><br>  Oder nur 5000: <br><br><img src="https://habrastorage.org/webt/oi/y3/u6/oiy3u6saz6kliguv_pm8iucdbqa.png"><br><br>  Sehr verschwommen, aber als ob erkennbar! <br><br><h2>  3. Codierung von Serienl√§ngen, Delta und Huffman </h2><br>  Bisher sind alle Komprimierungsstufen mit Verlusten verbunden.  Die letzte Etappe verl√§uft dagegen verlustfrei.  Es l√∂scht keine Informationen, reduziert jedoch die Dateigr√∂√üe erheblich. <br><br>  Wie k√∂nnen Sie etwas komprimieren, ohne Informationen zu verwerfen?  Stellen Sie sich vor, wie wir ein einfaches schwarzes Rechteck 700 x 437 beschreiben w√ºrden. <br><br>  JPEG verwendet hierf√ºr 5000 Zahlen, aber es kann ein viel besseres Ergebnis erzielt werden.  K√∂nnen Sie sich ein Codierungsschema vorstellen, das ein solches Bild mit m√∂glichst wenigen Bytes beschreibt? <br><br>  Das minimale Schema, das ich mir ausdenken k√∂nnte, verwendet vier: drei, um die Farbe anzuzeigen, und das vierte - wie viele Pixel haben diese Farbe.  Die Idee, wiederholte Werte auf solch komprimierte Weise darzustellen, wird als Serienl√§ngencodierung bezeichnet.  Es gibt keine Verluste, da wir die verschl√ºsselten Daten in ihrer urspr√ºnglichen Form wiederherstellen k√∂nnen. <br><br>  Die Gr√∂√üe einer JPEG-Datei mit einem schwarzen Rechteck ist viel gr√∂√üer als 4 Byte. Denken Sie daran, dass auf DCT-Ebene die Komprimierung auf Bl√∂cke mit 8 x 8 Pixel angewendet wird.  Daher ben√∂tigen wir mindestens einen DCT-Koeffizienten pro 64 Pixel.  Wir brauchen einen, weil wir anstelle eines einzelnen DCT-Koeffizienten gefolgt von 63 Nullen durch Codieren der L√§ngen der Reihe eine Zahl speichern und angeben k√∂nnen, dass ‚Äûalle anderen Nullen sind‚Äú. <br><br>  Die Delta-Codierung ist eine Technik, bei der jedes Byte eine Differenz zu einem bestimmten Wert und nicht zu einem absoluten Wert enth√§lt.  Daher √§ndert das Bearbeiten bestimmter Bytes die Farbe aller anderen Pixel.  Zum Beispiel anstatt zu speichern <br><br>  12 13 14 14 14 13 13 14 <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir k√∂nnten mit 12 beginnen und dann einfach angeben, wie viel wir addieren oder subtrahieren m√ºssen, um die n√§chste Zahl zu erhalten. Und diese Sequenz in der Delta-Codierung hat die Form: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 1 1 0 0 -1 0 1 Die </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konvertierten Daten werden nicht weniger als das Original erhalten, aber es ist bereits einfacher, sie zu komprimieren. Die Verwendung der Delta-Codierung vor der Codierung von Serienl√§ngen kann sehr hilfreich sein, w√§hrend die verlustfreie Komprimierung erhalten bleibt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Delta-Codierung ist eine der wenigen Techniken, die au√üerhalb von 8x8-Bl√∂cken verwendet werden. Von den 64 DCT-Koeffizienten ist einer einfach eine Konstantwellenfunktion (Volltonfarbe). Es repr√§sentiert die durchschnittliche Helligkeit jedes Blocks f√ºr die Luminanzkomponenten oder die durchschnittliche Blauheit f√ºr die Cb-Komponenten und so weiter. Der erste Wert jedes DCT-Blocks wird als DC-Wert bezeichnet, und jeder DC-Wert wird in Bezug auf die vorherigen Delta-Codierungen unterzogen. Daher wirkt sich eine √Ñnderung der Helligkeit des ersten Blocks auf alle Bl√∂cke aus. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das letzte R√§tsel bleibt: Wie verdirbt die singul√§re Ver√§nderung das ganze Bild? Bisher hatten Komprimierungsstufen keine solchen Eigenschaften. Die Antwort liegt im JPEG-Header. Die ersten 500 Bytes enthalten Metadaten zu Bild - Breite, H√∂he usw., mit denen wir bisher nicht gearbeitet haben.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ohne Header ist es fast unm√∂glich (gut oder sehr schwierig), JPEG zu dekodieren. Es wird so aussehen, als w√ºrde ich versuchen, Ihnen das Bild zu beschreiben und Worte zu erfinden, um meinen Eindruck zu vermitteln. Die Beschreibung wird wahrscheinlich sehr pr√§gnant sein, da ich W√∂rter mit genau der Bedeutung erfinden kann, die ich vermitteln m√∂chte, aber f√ºr alle anderen werden sie keinen Sinn ergeben. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es klingt dumm, aber genau das passiert. Jedes JPEG-Bild wird mit spezifischen Codes komprimiert. Ein Header von Codes wird in der Kopfzeile gespeichert. Diese Technik wird als Huffman-Code bezeichnet, und das W√∂rterbuch wird als Huffman-Tabelle bezeichnet. In der Kopfzeile wird die Tabelle mit zwei Bytes markiert - 255 und dann 196. Jede Farbkomponente kann eine eigene Tabelle haben.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñnderungen an den Tabellen wirken sich radikal auf jedes Bild aus. Ein gutes Beispiel ist das √Ñndern von 1 zu 12 in der 15. Zeile. </font></font><br><br><img src="https://habrastorage.org/webt/mz/-c/xd/mz-cxdyzf2haxuj1_tojoatbl7s.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies liegt daran, dass die Tabellen angeben, wie einzelne Bits gelesen werden sollen. Bisher haben wir nur mit Bin√§rzahlen in Dezimalform gearbeitet. Dies verbirgt uns jedoch die Tatsache, dass, wenn Sie die Nummer 1 in einem Byte speichern m√∂chten, diese wie 00000001 aussieht, da jedes Byte genau acht Bits haben sollte, selbst wenn nur eines von ihnen ben√∂tigt wird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist m√∂glicherweise eine gro√üe Platzverschwendung, wenn Sie viele kleine Zahlen haben. Der Huffman-Code ist eine Technik, mit der wir diese Anforderung lockern k√∂nnen, nach der jede Zahl acht Bits belegen sollte. Dies bedeutet, wenn Sie zwei Bytes sehen: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">234 115</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das k√∂nnen je nach Huffman-Tabelle drei Zahlen sein. Um sie zu extrahieren, m√ºssen Sie sie zuerst in separate Bits </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aufteilen </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">11101010 01110011 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dann wenden wir uns der Tabelle zu, um zu verstehen, wie sie gruppiert werden. Zum Beispiel k√∂nnen es die ersten sechs Bits (111010) oder 58 im Dezimalsystem sein, gefolgt von f√ºnf Bits (10011) oder 19 und schlie√ülich den letzten vier Bits (0011) oder 3. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher ist es sehr schwierig, Bytes zu verstehen in diesem Stadium der Kompression. Bytes repr√§sentieren nicht das, was es scheint. Ich werde in diesem Artikel nicht auf die Details der Arbeit mit der Tabelle eingehen, aber </font><font style="vertical-align: inherit;">es gibt </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">gen√ºgend </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Materialien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu diesem Thema im Netzwerk </font><font style="vertical-align: inherit;">.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einer der interessanten Tricks, die Sie ausf√ºhren k√∂nnen, wenn Sie dies wissen, besteht darin, den Header vom JPEG zu trennen und separat zu speichern. </font><font style="vertical-align: inherit;">Tats√§chlich stellt sich heraus, dass nur Sie die Datei lesen k√∂nnen. </font><font style="vertical-align: inherit;">Facebook tut dies, um die Dateigr√∂√üe weiter zu reduzieren. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen die Huffman-Tabelle auch noch ein wenig √§ndern. </font><font style="vertical-align: inherit;">F√ºr andere sieht es aus wie ein besch√§digtes Bild. </font><font style="vertical-align: inherit;">Und nur Sie kennen die magische Version der Korrektur. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassend: Was wird also f√ºr die JPEG-Dekodierung ben√∂tigt?</font></font> Es ist notwendig: <br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extrahieren Sie die Huffman-Tabelle (n) aus dem Header und decodieren Sie die Bits. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extrahieren Sie diskrete Cosinustransformationskoeffizienten f√ºr jede Farb- und Helligkeitskomponente f√ºr jeden 8x8-Block, indem Sie inverse Transformationen der Codierung von Serienl√§ngen und Deltas durchf√ºhren. </font></font></li><li>     ,        88. </li><li>   ,    (    ). </li><li>    YCbCr     RGB. </li><li>    ! </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ernsthafte Arbeit zum einfachen Betrachten von Bildern mit einer Katze! </font><font style="vertical-align: inherit;">Was mir jedoch gef√§llt, ist, dass Sie sehen k√∂nnen, wie menschlich die JPEG-Technologie ist. </font><font style="vertical-align: inherit;">Es basiert auf den Merkmalen unserer Wahrnehmung, die es uns erm√∂glichen, eine viel bessere Komprimierung als bei herk√∂mmlichen Technologien zu erzielen. </font><font style="vertical-align: inherit;">Wenn Sie nun verstehen, wie JPEG funktioniert, k√∂nnen Sie sich vorstellen, wie diese Technologien auf andere Bereiche √ºbertragen werden k√∂nnen. </font><font style="vertical-align: inherit;">Beispielsweise kann die Delta-Codierung in einem Video die Dateigr√∂√üe erheblich reduzieren, da es h√§ufig ganze Bereiche gibt, die sich nicht von Bild zu Bild √§ndern (z. B. Hintergrund). </font></font><br><br> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der im Artikel verwendete Code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist offen und enth√§lt Anweisungen zum Ersetzen von Bildern durch Ihre eigenen.</font></font></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454944/">https://habr.com/ru/post/de454944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454928/index.html">M√∂glichkeit, den Windows-Sperrbildschirm in RDP-Sitzungen zu umgehen</a></li>
<li><a href="../de454932/index.html">Investitionen und Software: 5 Handelsterminals f√ºr den Handel an der B√∂rse</a></li>
<li><a href="../de454936/index.html">Vivaldi: Das Blockieren von Anzeigen sollte die Wahl des Nutzers sein</a></li>
<li><a href="../de454938/index.html">Entwicklung eines eigenen Kerns zur Einbettung in ein auf FPGA basierendes Prozessorsystem</a></li>
<li><a href="../de454940/index.html">Reisekrankenversicherung: detaillierte Anweisungen</a></li>
<li><a href="../de454946/index.html">Globale Staaten: warum und wie man sie vermeidet</a></li>
<li><a href="../de454958/index.html">Ein Einblick: Graduiertenschule an der EPFL. Teil 4.1: Alltag</a></li>
<li><a href="../de454960/index.html">Microbiota. Wie Medikamente Darmbakterien beeinflussen</a></li>
<li><a href="../de454962/index.html">Wie sch√ºtzen sich IT-Unternehmen weltweit vor Wettbewerbern gegen√ºber ehemaligen Mitarbeitern?</a></li>
<li><a href="../de454966/index.html">Erstellen Sie Sofortspiele auf Unity in Google Play Instant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>