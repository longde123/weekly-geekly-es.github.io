<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüé§ üò£ üßùüèº O suporte t√©cnico da 3CX responde - 5 regras de seguran√ßa do PBX IP üõÑ üßõüèª üë©‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hacks de trocas telef√¥nicas autom√°ticas 3CX, que levam a s√©rias conseq√º√™ncias, s√£o bastante raros. No entanto, nossos clientes √†s vezes se tornam v√≠ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O suporte t√©cnico da 3CX responde - 5 regras de seguran√ßa do PBX IP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/3cx/blog/443186/">  Hacks de trocas telef√¥nicas autom√°ticas 3CX, que levam a s√©rias conseq√º√™ncias, s√£o bastante raros.  No entanto, nossos clientes √†s vezes se tornam v√≠timas de golpes.  Como a pr√°tica demonstrou, isso se deve principalmente a configura√ß√µes incorretas do sistema ou ao uso da vers√£o desatualizada do 3CX.  Neste artigo, examinaremos os erros mais comuns que podem levar √† invas√£o do seu PABX e explicaremos como evit√°-los. <a name="habracut"></a><br><br><h3>  Como funcionam os golpistas por telefone? </h3><br>  A fraude de telefonia √© bastante comum - pessoas de fora ou um rob√¥ mergulhador fazem chamadas pelo seu PBX √†s suas custas.  Isso geralmente acontece tarde da noite ou em dias n√£o √∫teis.  As chamadas duram o maior tempo poss√≠vel, com alta frequ√™ncia e para os destinos internacionais mais caros.  E no final do m√™s, voc√™ recebe uma fatura do operador de telecomunica√ß√µes por uma quantia enorme, que deve pagar ou contestar judicialmente. <br><br>  As chamadas para os destinos internacionais mais caros foram o principal objetivo dos hackers no per√≠odo inicial do desenvolvimento de trocas de software.  Voc√™ pode pensar que esse tipo de fraude √© coisa do passado, especialmente considerando o custo das negocia√ß√µes internacionais.  No entanto, isso est√° sendo feito atualmente por grupos internacionais bem organizados que saqueiam clientes e operadoras em escala industrial. <br><br>  Agora, os PBXs est√£o sendo invadidos para fazer milhares de chamadas para n√∫meros "caros" de v√°rios servi√ßos autom√°ticos pagos, controlados pelos mesmos golpistas.  Nesse caso, o atacante obt√©m lucro sob a forma de comiss√£o do operador por cada minuto de uma chamada paga.  Essa fraude tamb√©m √© chamada de International Revenue Sharing Fraud (IRSF). <br><br>  Outra maneira de ganhar dinheiro ilegal √© vender credenciais roubadas de clientes SIP em trocas on-line "clandestinas".  Al√©m disso, esse acesso √© usado de diferentes maneiras - seja para concorr√™ncia com operadoras de telecomunica√ß√µes legais, devido √†s quais √© poss√≠vel vender minutos muito mais baratos que o pre√ßo de mercado, ou para algumas necessidades pessoais do comprador. <br><br>  O 3CX possui v√°rios n√≠veis de seguran√ßa cujas configura√ß√µes padr√£o impedem os tipos de ataque mais conhecidos.  No entanto, alguns administradores de sistema alteram ou desabilitam essas configura√ß√µes sem nem perceber quais s√£o as consequ√™ncias. <br><br>  Vejamos as configura√ß√µes de seguran√ßa mais comuns que os administradores da 3CX fazem. <br><br><h3>  Credenciais de usu√°rio fracas </h3><br>  O primeiro erro s√£o as credenciais de conta "fracas" usadas pelos aplicativos, telefones IP e usu√°rios da 3CX. <br><br>  Quando voc√™ cria um usu√°rio (extens√£o) no 3CX, credenciais seguras s√£o geradas automaticamente para ele em todos os n√≠veis de acesso.  Essa √© uma senha SIP complexa e senha de login do cliente da Web, senhas geradas aleatoriamente para acessar a interface da Web de telefones IP, PINs de correio de voz aleat√≥rios, etc. ... Certifique-se de usar apenas essas credenciais seguras, porque senhas longas aleat√≥rias garantem prote√ß√£o contra ataques adivinha√ß√£o de senha (tamb√©m chamada de ataques de for√ßa bruta). <br><br>  A partir do 3CX v15.5, o sistema n√£o permitir√° que voc√™ defina a senha do ramal mais fraca que a exigida pelas regras de seguran√ßa modernas.  No entanto, as senhas de conta geralmente fracas s√£o herdadas dos backups das vers√µes anteriores do 3CX.  Portanto, agora o 3CX avisa o administrador se n√∫meros de ramal com senhas fracas estiverem presentes no sistema - um aviso aparece pr√≥ximo a esses n√∫meros.  Se voc√™ passar o mouse sobre ela, informa√ß√µes adicionais ser√£o exibidas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/d60/7c1/a45d607c16ba76b93ef3fcbd317ad14c.png"><br><br>  A prop√≥sito, n√£o recomendamos definir senhas fracas para fins de teste.  Como regra, as pessoas esquecem de troc√°-las e deixar o PABX "cheio de buracos". <br><br><h3>  Acesso remoto SIP ativado ao ramal </h3><br>  O segundo erro √© desativar a op√ß√£o "Negar conex√£o da rede p√∫blica" e n√£o ativ√°-la novamente quando o usu√°rio n√£o precisar mais dela. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85b/6aa/c5d/85b6aac5d6519d065624dd17afdadf40.png"><br><br>  Esta op√ß√£o est√° inclu√≠da no 3CX por padr√£o e impede o registro de qualquer usu√°rio fora da sua rede local.  Observe que voc√™ pode usar aplicativos ou o cliente da web 3CX sem ativar o acesso remoto, porque eles usam a tecnologia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">encapsulamento</a> para conectar-se ao PBX.  Esta op√ß√£o deve ser desativada apenas se algu√©m precisar de uma conex√£o SIP direta para um telefone IP de hardware. <br><br>  <b>Tente evitar conex√µes SIP diretas ao seu PBX ou permita-as apenas a partir de determinados endere√ßos IP especificados no firewall.</b> <br><br><h3>  Muitas chamadas permitidas </h3><br>  Ao instalar o 3CX, o Assistente de configura√ß√£o inicial pergunta para quais pa√≠ses voc√™ deseja permitir chamadas.  A mesma lista de pa√≠ses pode ser vista (e alterada) na se√ß√£o Configura√ß√µes - Seguran√ßa - C√≥digos internacionais de pa√≠ses permitidos.  Somente os pa√≠ses (prefixos) para os quais seus usu√°rios realmente ligam devem ser permitidos.  Por padr√£o, o 3CX permite apenas chamadas para o pa√≠s que foi especificado como o local da troca. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3a/575/676/c3a575676fa7db66ab7d4c679b38be15.png"><br><br>  Uma pr√°tica muito perigosa √© permitir que todos os pa√≠ses instalem trocas telef√¥nicas autom√°ticas e limit√°-las mais tarde.  Geralmente eles esquecem disso, permitindo que o invasor ligue em todas as dire√ß√µes assim que receber as credenciais do usu√°rio do PBX. <br><br><h3>  Regras de sa√≠da muito frouxas </h3><br>  Outra m√° pr√°tica √© usar regras de sa√≠da muito gerais que permitem que qualquer usu√°rio (grupo organizacional 3CX Padr√£o) chame em qualquer dire√ß√£o permitida.  Alguns administradores, para n√£o complicar suas vidas, criam uma regra universal para isso. <br><br>  De fato, voc√™ deve criar regras de sa√≠da com as permiss√µes m√≠nimas necess√°rias, de acordo com o mesmo princ√≠pio pelo qual elas s√£o criadas, por exemplo, em um firewall.  Liste especificamente os prefixos, especifique o comprimento m√≠nimo e m√°ximo do n√∫mero, indique claramente os grupos de n√∫meros de ramal que podem chamar nessa dire√ß√£o. <br><br><h3>  Par√¢metros de processamento E164 inv√°lidos </h3><br>  Na se√ß√£o Par√¢metros - N√∫meros E164, √© definido o processamento de n√∫meros, no qual o s√≠mbolo "+" no in√≠cio do n√∫mero √© substitu√≠do pelo c√≥digo de discagem internacional.  As regras de substitui√ß√£o s√£o definidas para o pa√≠s indicado como o local de instala√ß√£o da central telef√¥nica.  Na maioria dos pa√≠ses, ‚Äú+‚Äù √© substitu√≠do por 00 e, na Am√©rica, por 011. A substitui√ß√£o est√° de acordo com os padr√µes da ITU. <br><br>  Os par√¢metros E164 s√£o importantes porque s√£o usados ‚Äã‚Äãpara determinar as dire√ß√µes proibidas (prefixos) discutidas acima.  Por exemplo, se um pa√≠s bloqueado for a Alb√¢nia, o 3CX analisar√° e bloquear√° os n√∫meros come√ßando com 00355xxx e + 355xxx. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cef/2da/7f0/cef2da7f0b06aeaa7be3778a055d451b.png"><br><br>  Se voc√™ digitou incorretamente o c√≥digo de discagem internacional do seu pa√≠s, isso levar√° n√£o apenas √† substitui√ß√£o incorreta "+", mas tamb√©m ao mau funcionamento da fun√ß√£o de bloqueio do pa√≠s. <br><br><h3>  Novos recursos de seguran√ßa no 3CX v16 </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O 3CX v16</a> adiciona dois recursos de seguran√ßa interessantes. <br><br>  O primeiro √© restringir o acesso pelo endere√ßo IP √† interface de gerenciamento 3CX.  Est√° configurado na se√ß√£o Configura√ß√µes - Seguran√ßa - Restringir o acesso √† interface.  Por padr√£o, todos os endere√ßos IP s√£o permitidos, mas se a prote√ß√£o IP estiver ativada, o acesso ser√° permitido apenas a partir da rede local e endere√ßos IP externos explicitamente especificados.  Observe que esta restri√ß√£o n√£o afeta a opera√ß√£o de outros servi√ßos da web 3CX, como telefones com auto-ajuste, cliente da web etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/142/3b5/8ec/1423b58ec839a8952e04cb8879f8a33a.png"><br><br>  O segundo recurso de seguran√ßa √© a lista negra global de IP de auto-aprendizado mantida pela 3CX.  Ele est√° inclu√≠do na se√ß√£o Configura√ß√µes - Configura√ß√µes de seguran√ßa - Anti-ataque.  Se essa op√ß√£o estiver ativada, o PBX transmitir√° automaticamente informa√ß√µes sobre atividades suspeitas, incluindo o endere√ßo IP de origem, ao nosso servidor central.  Ap√≥s analisar o evento, as informa√ß√µes sobre esse endere√ßo IP ser√£o transmitidas automaticamente para todos os sistemas 3CX do mundo que tamb√©m tenham esse recurso ativado.  Assim, o tr√°fego suspeito ser√° bloqueado devido √† "intelig√™ncia coletiva".  Hoje, nossa lista global j√° cont√©m mais de 1000 endere√ßos IPv4 IP dos quais as tentativas de digitalizar ou quebrar foram repetidas de forma consistente.  √â altamente recomend√°vel ativar esse recurso no seu PBX! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b67/5b3/aa0/b675b3aa03b05d6b1535af94728921a3.png"><br><br><h3>  Conclus√£o </h3><br>  Percebemos que a invas√£o do sistema √© imediatamente precedida por v√°rios erros juntos.  Praticamente n√£o observamos situa√ß√µes em que s√©rias conseq√º√™ncias surgiram apenas devido a um erro. <br><br>  Bem, se voc√™ foi hackeado, n√£o entre em p√¢nico!  √â muito importante coletar logs do servidor antes de tomar a√ß√µes radicais.  Posteriormente, isso ajudar√° a conduzir uma investiga√ß√£o de qualidade do incidente.  Para coletar logs, v√° para a se√ß√£o Suporte - Crie um arquivo para suporte t√©cnico.  Um arquivo zip ser√° gerado, com um link para o qual ser√° enviado por e-mail.  Anexe este arquivo e a descri√ß√£o do incidente ao Suporte t√©cnico da 3CX. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/149/17c/cf8/14917ccf821caade2629806edf87b1f2.png"><br><br>  Voc√™ deve entrar em contato com o suporte t√©cnico se tiver alguma d√∫vida razo√°vel sobre a seguran√ßa da 3CX ou quiser denunciar um hack j√° ocorrido.  Para entender a situa√ß√£o e obter as recomenda√ß√µes necess√°rias, abra um recurso na categoria Seguran√ßa - Fraude.  Essas solicita√ß√µes s√£o consideradas com a maior prioridade.  Voc√™ tamb√©m pode obter conselhos de seguran√ßa 3CX em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√≥rum de usu√°rios</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt443186/">https://habr.com/ru/post/pt443186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt443176/index.html">7 extens√µes do Chrome para aprender ingl√™s</a></li>
<li><a href="../pt443178/index.html">Crystal Blockchain Analytics: Investigando os casos de hackers e roubos</a></li>
<li><a href="../pt443180/index.html">Aterragem do grupo de drag√µes e filmagem de aster√≥ide</a></li>
<li><a href="../pt443182/index.html">Puxe o YPbPr do Commodore 64</a></li>
<li><a href="../pt443184/index.html">Do amor para controlar um passo</a></li>
<li><a href="../pt443188/index.html">Tr√™s olhos penduram em um pilar, ou a hist√≥ria de que cinco pernas de ATtiny13 s√£o suficientes</a></li>
<li><a href="../pt443190/index.html">Introdu√ß√£o √†s diretivas de rede Kubernetes para profissionais de seguran√ßa</a></li>
<li><a href="../pt443192/index.html">M√©todos particulares sem sublinhados e interfaces em Python</a></li>
<li><a href="../pt443194/index.html">Os engenheiros da WFIRM inventaram um bioprinter que imprime a pele diretamente em uma ferida</a></li>
<li><a href="../pt443196/index.html">Nem um minuto offline - Escolhendo um roteador LTE industrial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>