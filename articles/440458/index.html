<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèΩ üë£ üõ†Ô∏è Predicci√≥n del estado de la red VoIP basada en archivos de registro de texto del servidor de aplicaciones SIP üí≤ üëÆ üö¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Monitorear el estado de la red de se√±alizaci√≥n de VoIP es una de las condiciones importantes que permiten al proveedor de UCaaS proporcionar a los cli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Predicci√≥n del estado de la red VoIP basada en archivos de registro de texto del servidor de aplicaciones SIP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/440458/"><p>  Monitorear el estado de la red de se√±alizaci√≥n de VoIP es una de las condiciones importantes que permiten al proveedor de UCaaS proporcionar a los clientes un nivel garantizado de calidad de servicios como llamadas de audio y video, recepci√≥n y transmisi√≥n de fax.  T√≠picamente, dicho control se lleva a cabo utilizando varios sistemas de monitoreo, recolecci√≥n y an√°lisis de tr√°fico, an√°lisis CDR.  Algunos de los par√°metros de la red de se√±ales son bastante dif√≠ciles y, a menudo, imposibles de evaluar utilizando los m√©todos indicados. </p><a name="habracut"></a><br><p>  Una posible fuente de informaci√≥n importante sobre el estado de una red de se√±alizaci√≥n VoIP es el Servidor de aplicaciones SIP (SIP AS), uno de los principales elementos involucrados en el procesamiento de llamadas en una red VoIP.  Los archivos de registro SIP AS le permiten, entre otras cosas, evaluar los siguientes par√°metros de una red de se√±alizaci√≥n VoIP: </p><br><ul><li>  Longitud de di√°logo SIP </li><li>  El intervalo de tiempo entre enviar una solicitud y recibir una respuesta final (tiempo de solicitud-respuesta, RRT) para varios tipos de solicitudes SIP </li><li>  El n√∫mero de retransmisiones de mensajes (retransmisiones, RTR) para diferentes tipos de mensajes SIP </li></ul><br><p>  No solo los valores de estos par√°metros son importantes, sino tambi√©n la distribuci√≥n de estos par√°metros, as√≠ como sus cambios a lo largo del tiempo.  La informaci√≥n sobre el cambio en los valores de los par√°metros a lo largo del tiempo permite predecir posibles problemas en una red VoIP.  Esta informaci√≥n tambi√©n puede servir como una de las fuentes de datos para varios algoritmos de aprendizaje autom√°tico (machine learning, ML), lo que permitir√° predecir cambios en los par√°metros no solo en funci√≥n del tiempo, sino tambi√©n de otros factores. </p><br><p>  Dependiendo de la carga de la se√±al, SIP AS puede generar archivos de registro en formato de texto de hasta varias decenas de GB por d√≠a.  El an√°lisis de los archivos de texto de dicho volumen es una tarea que requiere muchos recursos.  Como una de las opciones posibles, se pueden usar varias herramientas de Python para este an√°lisis.  Por ejemplo, la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pandas</a> proporciona herramientas bastante convenientes para procesar y analizar diversos datos, en particular, marcos de datos (DF).  El c√≥digo utilizado en este art√≠culo est√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br>  Se sugieren los siguientes pasos para analizar los archivos de registro SIP AS: </p><br><ol><li>  Abra el archivo de registro para leer.  Si SIP AS cre√≥ varios archivos de registro, entonces deber√≠an abrirse en el mismo orden en que fueron creados. </li><li>  Leer datos l√≠nea por l√≠nea.  Esto es necesario para ahorrar RAM en el caso de trabajar con archivos de unidades de decenas de GB </li><li>  Resalte los mensajes SIP ubicados entre secuencias espec√≠ficas de caracteres - delimitadores </li><li>  Crea una lista de diccionarios.  Cada uno de los diccionarios, a su vez, consta de una marca de tiempo (clave) y el mensaje SIP real (valor) en forma de una lista </li><li>  Guarde esta lista en el disco o en el almacenamiento de red como, por ejemplo, un archivo pickle.  Este archivo luego se usar√° para crear varios DF. </li><li>  Cree un DF a partir de un archivo pickle guardado que contenga la informaci√≥n necesaria para un an√°lisis posterior (SIP DF) </li></ol><br><p>  En este caso particular, se cre√≥ un SIP DF que contiene las siguientes columnas: </p><br><ul><li>  Marca de tiempo: marca de tiempo agregada por SIP AS </li><li>  Call-ID - Call-ID de la conversaci√≥n SIP </li><li> CSeq_num, CSeq_meth: datos del encabezado SIP 'CSeq' </li><li>  Direcci√≥n: mensaje recibido (Rx &lt;-) o enviado (Tx-&gt;), se agrega SIP AS </li><li>  M√©todo SIP: m√©todo SIP de SIP Request-Line </li><li>  Src Dst IP: direcci√≥n IP desde la que se envi√≥ o recibi√≥ el mensaje </li></ul><br><p><img src="https://habrastorage.org/webt/9e/pq/x4/9epqx4i7nfowaxkmfuji7cqusau.png" alt="imagen"></p><br><p>  Fig.  1. Par√°metros de SIP DF obtenidos de un archivo pickle de aproximadamente 3 GB </p><br><p><img src="https://habrastorage.org/webt/mm/xg/fs/mmxgfsyxywnoeszied6n7tiyc6g.png" alt="imagen"></p><br><p>  Fig.  2. Contenido de SIP DF </p><br><p>  Con un SIP DF similar, puede evaluar varios par√°metros de una red VoIP de se√±alizaci√≥n.  Todos los ejemplos a continuaci√≥n se toman de una red VoIP v√°lida.  Se han cambiado las direcciones IP y otros datos que pueden proporcionar informaci√≥n sobre la red especificada. </p><br><h4 id="1-dlina-sip-dialoga">  1. La duraci√≥n del di√°logo SIP </h4><br><p><img src="https://habrastorage.org/webt/tg/fp/g2/tgfpg2yil79lpysldretfmpwg6g.png" alt="imagen"><br><img src="https://habrastorage.org/webt/ae/fy/i2/aefyi2ndnytapmictjqm0ifart0.png" alt="imagen"><br>  Fig.  3. Longitud del di√°logo DF y SIP </p><br><p>  Para cada caso de un di√°logo SIP largo, puede encontrar la llamada por el valor de ID de llamada y luego, por registros de texto, analizar el escenario de esta llamada.  A pesar del n√∫mero relativamente peque√±o de llamadas cuya duraci√≥n de la conversaci√≥n SIP es de decenas a cientos de mensajes, se deben investigar los escenarios de estas llamadas.  El estudio de tales llamadas revel√≥ las siguientes fuentes de largos di√°logos SIP: </p><br><ul><li>  Transmisi√≥n de varias docenas de grupos de una determinada estructura, que consisten en caracteres DTMF, despu√©s del establecimiento de una sesi√≥n de voz.  Este es un escenario de llamada de voz durante el cual se lleva a cabo la autenticaci√≥n, autorizaci√≥n e intercambio de informaci√≥n entre los abonados que llaman y los que llaman. </li><li>  Videollamadas durante las cuales se not√≥ una gran cantidad de solicitudes de Solicitud Completa Intra-Frame ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FIR</a> ).  Esto, en particular, indica un problema de software del tel√©fono o p√©rdida de paquetes RTP durante las videollamadas. </li></ul><br><p>  Tambi√©n pueden aparecer cuadros de di√°logo SIP largos debido a un mal funcionamiento del equipo VoIP, intentos de seleccionar c√≥digos PIN a trav√©s de un men√∫ IVR (enviando una gran cantidad de secuencias DTMF).  En cualquier caso, es necesario monitorear el n√∫mero de largas conversaciones SIP, porque con un aumento en el n√∫mero de dichos di√°logos, puede aparecer una carga de se√±al in√∫til adicional en los elementos de la red VoIP. </p><br><h4 id="2-rrt">  2. RRT </h4><br><p>  Se calcula por separado para las solicitudes INFO e INVITE recibidas y enviadas.  Tenga en cuenta que al procesar una gran cantidad de llamadas, pueden aparecer los mismos valores CSeq para diferentes di√°logos.  Se puede suponer que la distribuci√≥n de los valores RRT debe ser aproximadamente la misma para las solicitudes enviadas, los valores absolutos deben diferir debido al diferente tama√±o y contenido de las solicitudes INFO e INVITE y, como resultado, los diferentes tiempos de procesamiento de estas solicitudes por elementos de red. </p><br><p><img src="https://habrastorage.org/webt/rd/d3/2q/rdd32qczrh2glgsxgxhqsx0g9ia.png" alt="imagen"><br>  Fig.  3. RRT para solicitudes de informaci√≥n recibidas por SIP AS <br>  El aumento en los valores de RRT en este caso indica posibles problemas con la virtualizaci√≥n, un aumento en la carga en SIP AS.  Call-ID y CSeq_num le permiten examinar los valores RRT para cada caso. </p><br><p><img src="https://habrastorage.org/webt/ht/a0/yw/hta0ywhl6nfznqymdgzl4eo7_fc.png" alt="imagen"><br>  Fig.  4. RRT para solicitudes de informaci√≥n enviadas por SIP AS.  El RRT en el gr√°fico est√° limitado a 500 ms, que es el valor predeterminado para el temporizador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SIP T1</a> . </p><br><p><img src="https://habrastorage.org/webt/kn/d3/wf/knd3wfmcqfmwij1wk4jgqlmax24.png" alt="imagen"><br>  Fig.  5. RRT para solicitudes INVITE enviadas por SIP AS.  Como se esperaba, la distribuci√≥n es aproximadamente la misma que para las consultas INFO. </p><br><h4 id="3-rtr">  3. RTR </h4><br><p>  Un par√°metro importante que caracteriza el estado de una red de se√±alizaci√≥n VoIP. </p><br><p><img src="https://habrastorage.org/webt/yl/v3/h5/ylv3h5eqljf3prx1p9oqogs4fr0.png" alt="imagen"><br>  Fig.  6. El porcentaje de retransmisi√≥n de solicitudes INFO e INVITE, respectivamente.  Las RTR que ocurren una o m√°s veces se tienen en cuenta. </p><br><p>  Adem√°s de los ejemplos descritos, se pueden obtener otros datos utilizando DF, por ejemplo: </p><br><ul><li>  Corregir el equilibrio de carga SIP AS para mensajes salientes.  Para hacer esto, debe contar el n√∫mero de mensajes enviados (Tx) a diferentes direcciones IP (SrcDst IP) usando groupby (). Count () - similar a la funci√≥n retransmits_counter_tx ().  La diferencia en la cantidad de mensajes superiores al 15-20% indica un reparto de carga incorrecto </li><li>  El n√∫mero de transferencias de llamadas fallidas.  Para hacer esto, puede crear un DF separado que contenga solo cuadros de di√°logo REFER, as√≠ como los encabezados y campos necesarios de los mensajes de estos cuadros de di√°logo </li><li>  La dependencia de los par√°metros en el tiempo.  Si recopila el valor promedio de uno de los par√°metros, por ejemplo, RRT, durante varios meses, luego, en funci√≥n de los datos, puede construir una serie temporal (series temporales, TS).  Usando varias bibliotecas para el an√°lisis de TS, por ejemplo, statsmodels, puede determinar la tendencia, la estacionalidad y otros par√°metros de TS.  Los datos de este pron√≥stico se pueden usar para ajustar la arquitectura de la red VoIP. </li></ul><br><h4 id="zaklyuchenie">  Conclusi√≥n </h4><br><p>  Los archivos de registro de texto SIP AS son una fuente importante de informaci√≥n sobre el estado actual de una red VoIP.  Adem√°s, los datos obtenidos despu√©s del procesamiento apropiado de esta informaci√≥n se pueden usar para predecir el estado de una red VoIP, en particular, utilizando m√©todos ML. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440458/">https://habr.com/ru/post/440458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440444/index.html">Sistemas Basados ‚Äã‚Äãen Cola</a></li>
<li><a href="../440446/index.html">Serie de seminarios web de flujo de trabajo justo de TDMS</a></li>
<li><a href="../440448/index.html">Lo que termin√≥ la historia con el programador sin hogar</a></li>
<li><a href="../440450/index.html">Hay un rublo para la entrada, pero no hay salida: c√≥mo entran los archivos de terceros en la cadena de bloques y qu√© hacer al respecto</a></li>
<li><a href="../440454/index.html">Paul Graham: Lo que aprend√≠ de Hacker News</a></li>
<li><a href="../440460/index.html">C√≥mo los siete modders de Mount y Blade crearon un estudio de juegos</a></li>
<li><a href="../440462/index.html">Las 7 mejores estrategias de marketing de contenidos que no debe perderse en 2019</a></li>
<li><a href="../440464/index.html">Trabaje con el servicio de bases de datos administradas de Digital Ocean en .NET Core</a></li>
<li><a href="../440466/index.html">Control remoto web UART</a></li>
<li><a href="../440468/index.html">2 veces m√°s, 10 veces m√°s r√°pido, durante todo el d√≠a, todo por el bien de las personas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>