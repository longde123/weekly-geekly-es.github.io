<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🚒 🙏🏿 🤜🏽 Pencarian Linux. Selamat kepada pemenang dan berbicara tentang pemecahan masalah 🙍 🚲 😙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="25 Maret, kami membuka pendaftaran untuk Linux Quest , ini adalah permainan untuk para penggemar dan pakar sistem operasi Linux. Beberapa statistik: 1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pencarian Linux. Selamat kepada pemenang dan berbicara tentang pemecahan masalah</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/447222/"><img src="https://habrastorage.org/webt/1h/zh/nd/1hzhnd4vk8qks_p2sjyylz-kpy4.png"><br><br>  25 Maret, kami membuka pendaftaran untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Linux Quest</a> , ini adalah permainan untuk para penggemar dan pakar sistem operasi Linux.  Beberapa statistik: 1117 orang mendaftar untuk permainan, 317 dari mereka menemukan setidaknya satu kunci, 241 berhasil menyelesaikan tugas tahap pertama, 123 dari tahap kedua dan 70 menyelesaikan tahap ketiga.  Hari ini permainan kami telah berakhir, dan kami mengucapkan selamat kepada para pemenang kami! <br><a name="habracut"></a><br><ul><li>  <b>Tempat pertama diambil oleh Alexander Teldekov.</b> <br>  Alexander berkata pada dirinya sendiri bahwa dia adalah sysadmin yang paling khas.  Tinggal di Volgograd, mengelola berbagai sistem mirip Unix selama dua puluh tahun.  Berhasil bekerja di penyedia Internet, bank, integrator sistem.  Sekarang dia bekerja jarak jauh di sebuah perusahaan kecil, dia terlibat dalam infrastruktur cloud untuk pelanggan asing yang besar.  Suka membaca, mendengarkan musik.  Tentang permainan, Alexander mengatakan bahwa dia menyukai permainan secara keseluruhan, dia menyukai teka-teki seperti itu.  Di salah satu perusahaan di wawancara saya terlibat dalam mirip dengan Hackerrank, itu menarik. </li><li>  <b>Tempat kedua - Roman Suslov.</b> <br>  Sebuah novel dari Moskow.  Usianya 37 tahun.  Ia bekerja sebagai insinyur Linux / Unix di Jet Infosystems.  Untuk bekerja, saya harus mengelola dan memecahkan masalah sistem Linux / Unix + SAN.  Minatnya sangat berbeda: sistem Linux, pemrograman, rekayasa terbalik, keamanan informasi, Arduino.  Tentang Game, Roman mencatat bahwa ia umumnya menyukai game.  “Saya sedikit melenturkan gyrus saya dan teralihkan dari kehidupan sehari-hari yang kelabu dari pekerjaan sehari-hari.  :) Saya ingin lebih banyak tugas, kalau tidak saya tidak punya waktu untuk merasakan bagaimana permainan sudah berakhir. " </li><li>  <b>Yang ketiga adalah alex3d.</b> <br>  Alex tinggal di Moskow, bergerak dalam pengembangan perangkat lunak.  "Terima kasih untuk kontesnya, menarik untuk memeriksa keterampilan google-fu kamu." </li></ul><br>  Juga di peringkat 10 pemain teratas: <br><br><ul><li>  Yevgeniy saldayev </li><li>  Markel Mokhnachevsky </li><li>  Konstantin Konosov </li><li>  Pavel Sergeev </li><li>  Vladimir Bovaev </li><li>  Ivan Bubnov </li><li>  Pavlo klet </li></ul><br>  Kami memahami bahwa ada banyak opsi untuk menyelesaikan semua masalah kami, salah satu solusi yang mungkin dijelaskan di bawah ini. <br><br><h3>  1. Tahap pertama </h3><br>  Kami menyebutnya "Apakah Anda yakin admin?", Karena tugasnya cukup sederhana - untuk memperbaiki layanan lampu hangat. <br><br><h4>  1.1.  Fakta menarik: </h4><br>  Dua pemain menemukan kunci pertama dalam 15 menit pertama pertandingan, dan pada jam pertama kami memiliki tiga pemimpin yang mengatasi tugas tersebut. <br><br><h4>  1.2.  Tugas </h4><br>  Anda pergi bekerja untuk sebuah perusahaan di mana untuk waktu yang lama tidak ada spesialis IT yang kompeten.  Sebelum Anda mulai membersihkan, Anda harus menyelesaikan masalah pembakaran yang menghambat pekerjaan kantor. <br><br>  Seorang wanita pembersih mengepel kabel daya ke kabinet server.  Daya pulih, tetapi situs web yang sangat penting masih tidak berfungsi.  Situs web ini penting karena perusahaan tidak terlalu mementingkan keamanan informasi, dan di halaman utama ini Anda dapat menemukan kata sandi administrator dari komputer CEO dalam teks yang jelas. <br><br>  Suatu hari, kata sandi diubah, tetapi semua orang lupa yang baru, direktur tidak dapat bekerja.  Rumor mengatakan bahwa ada kunci pada mesin ini yang dapat membantu kami mendekripsi cadangan dokumen akuntansi. <br><br>  Semua orang menunggu solusi cepat untuk masalah ini! <br><br><h4>  1.3.  Solusi </h4><br>  1. Pertama-tama, Anda perlu mengubah kata sandi root di mesin virtual untuk mendapatkan akses ke sana.  Saat startup, kami perhatikan bahwa ini adalah Ubuntu 16.04 Server. <br><br>  Untuk mengatur ulang kata sandi root, kami menyalakan ulang mesin, saat startup, ketika menu grub ditampilkan, buka pengeditan item Ubuntu dengan tombol "e".  Kami mengedit baris linux, tambahkan <code>init=/bin/bash</code> sampai akhir.  Kami memuat melalui Ctrl + x, kami mendapatkan bash.  Remount root dengan rw, ubah kata sandi: <br><br><pre> <code class="bash hljs">$ mount -o remount,rw /dev/mapper/ubuntu--vg-root $ passwd</code> </pre> <br>  Jangan lupa tentang sinkronisasi, reboot. <br><br>  2. Syaratnya mengatakan bahwa server web tidak bekerja untuk kita, kita lihat: <br><br><pre> <code class="bash hljs">$ curl localhost Not Found The requested URL / was not found on this server. Apache/2.4.18</code> </pre> <br>  Faktanya, Apache berjalan, tetapi merespons dengan kode 404. Kami melihat konfigurasi: <br><br><pre> <code class="bash hljs">$ vim /etc/apache2/sites-enabled/000-default.conf</code> </pre> <br>  Ada juga kunci - StevenPaulSteveJobs. <br><br>  Kami memeriksa jalur <code>/usr/share/WordPress</code> - ini bukan, tetapi ada <code>/usr/share/wordpress</code> .  Kami memperbaiki konfigurasi dan memulai kembali Apache. <br><br><pre> <code class="bash hljs">$ systemctl restart apache2</code> </pre> <br>  3. Kami mencoba lagi, kami mendapatkan kesalahan: <br><br><pre> <code class="bash hljs">Warning: mysqli_real_connect(): (HY000/2002): Connection refused <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /usr/share/wordpress/wp-includes/wp-db.php on line 1488</code> </pre> <br>  Basis data tidak berjalan? <br><br><pre> <code class="bash hljs">$ systemctl status mysql Active: active (running)</code> </pre> <br>  Ada apa?  Ini perlu dipahami.  Untuk melakukan ini, Anda perlu mengakses MySQL, cara melakukannya dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> .  Salah satu poin dalam dokumentasi merekomendasikan agar kita menulis opsi <code>skip-grant-tables</code> di <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code> .  Ini juga kuncinya - AugustaAdaKingByron. <br><br>  Kami memperbaiki hak pengguna <code>'wp'@'localhost'</code> .  Kami memulai MySQL, membuatnya dapat diakses melalui jaringan, mengomentari opsi <code>skip-networking</code> di konfigurasi. <br><br>  4. Setelah tindakan diambil, server web memulai, tetapi situs tersebut tetap tidak berfungsi, seperti <br><br><pre> <code class="bash hljs">Warning: require_once(/usr/share/wordpress/wp-content/themes/twentysixteen/footer.php): failed to open stream: Permission denied <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /usr/share/wordpress/wp-includes/template.php on line 562</code> </pre> <br>  Kami memperbaiki hak atas file tersebut. <br><br><pre> <code class="bash hljs">$ chmod 644 /usr/share/wordpress/wp-content/themes/twentysixteen/footer.php</code> </pre><br>  Kami menyegarkan halaman, pergi ke situs dan temukan kunci - BjarneStroustrup!  Kami menemukan ketiga kunci, direktur kami dapat bekerja, kami mendekripsi file akuntansi.  Semua orang senang, dan Anda memiliki banyak pekerjaan di depan untuk membangun infrastruktur, cadangan, dan keamanan di perusahaan. <br><br><h3>  2. Tahap kedua </h3><br>  Itu perlu untuk memecahkan masalah pengumpulan analitik.  Semua orang menyukai analitik - siapa dan ke mana dan dalam jumlah berapa.  Kami menemukan sebuah kasus yang mungkin dihadapi semua insinyur dalam satu atau lain bentuk. <br><br><h4>  2.1.  Fakta menarik </h4><br>  Salah satu pemain kami memasukkan kunci yang benar dalam 10 menit pertama pertandingan, dan pada jam pertama kami mendapat pemimpin yang mengatasi tugas tersebut. <br><br><h4>  2.2.  Tugas </h4><br>  Anda pergi bekerja untuk perusahaan, manajer mendatangi Anda dan meminta untuk mencari siapa surat dikirim dari Afrika.  Anda perlu membangun 21 alamat penerima teratas di atasnya.  Huruf pertama dari alamat penerima adalah kuncinya.  Satu hal: server surat yang digunakan untuk mengirim surat tidak dimuat.  Semua orang menunggu solusi cepat untuk masalah ini! <br><br><h4>  2.3.  Solusi </h4><br>  1. Server tidak dimuat karena partisi swap tidak ada di fstab, saat boot sistem mencoba me-mount dan crash.  Bagaimana cara mem-boot? <br><br>  Unduh gambar, kami unduh CentOS 7, boot dari Live CD / DVD (Pemecahan Masalah -&gt; Penyelamatan), pasang sistem, edit <code>/etc/fstab</code> .  Di sini kita menemukan kunci pertama - GottfriedWilhelm11646Leibniz! <br><br>  Buat swap: <br><br><pre> <code class="bash hljs">$ lvcreate -n swap centos -L 256M $ sync &amp;&amp; reboot</code> </pre> <br>  2. Seperti biasa, tidak ada kata sandi, Anda perlu mengubah kata sandi root di mesin virtual.  Kami sudah melakukan ini dalam tugas pertama.  Kami berubah dan berhasil masuk ke server, tetapi segera masuk ke reboot.  Server kelebihan beban pada kecepatan yang Anda bahkan tidak punya waktu untuk melihat semua log dengan hati-hati.  Bagaimana memahami apa yang terjadi? <br><br>  Sekali lagi kita boot dari livecd, hati-hati mempelajari log sistem dan kalau-kalau kita melihat mahkota, karena frekuensi seperti itu.  Di sana kami menemukan masalah dan kunci kedua adalah Alan1912MathisonTuring! <br><br>  Penting untuk menghapus atau mengomentari baris <code>echo b &gt; /proc/sysrq-trigger</code> di <code>/etc/crontab</code> . <br><br>  3. Setelah itu server boot, dan Anda dapat menyelesaikan tugas manajer: "Apa alamat Afrika?"  Informasi ini umumnya tersedia untuk umum.  Anda dapat menemukan informasi ini di Internet menggunakan frasa “ip address africa”, “geoip database”.  Untuk mengatasi masalah ini, Anda dapat menggunakan basis distribusi alamat yang tersedia secara bebas (geoip).  Kami menggunakan basis data <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MaxMind GeoLite2</a> , tersedia di bawah lisensi Creative Commons Attribution-ShareAlike 4.0, sebagai referensi. <br><br>  Mari kita coba selesaikan masalah kita hanya dengan menggunakan utilitas sistem Linux, tetapi secara umum dapat diselesaikan dengan sejumlah besar cara: menggunakan utilitas penyaringan teks dan menggunakan skrip dalam berbagai bahasa pemrograman. <br><br>  Untuk memulainya, kita hanya mendapatkan pasangan "pengirim IP - penerima" dari log surat <code>/var/log/maillog</code> ( <code>/var/log/maillog</code> buat tabel email penerima - pengirim IP).  Ini dapat dilakukan dengan perintah berikut: <br><br><pre> <code class="bash hljs">$ cat /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/maillog | fgrep -e <span class="hljs-string"><span class="hljs-string">' connect from'</span></span> -e <span class="hljs-string"><span class="hljs-string">'status=sent'</span></span> | sed <span class="hljs-string"><span class="hljs-string">'s/[]&lt;&gt;[]/ /g'</span></span> | awk <span class="hljs-string"><span class="hljs-string">'/connect from/ {ip=$11} /status=sent/ {print $10" "ip}'</span></span> &gt; log1.txt</code> </pre> <br>  Dan sebelum kita melanjutkan dengan kompilasi database alamat Afrika, kita melihat alamat IP pengirim teratas. <br><br><pre> <code class="bash hljs">$ cat log1.txt | cut -d<span class="hljs-string"><span class="hljs-string">' '</span></span> -f1 | sort | uniq -c | sort -r | head -n 40 5206 L2JhbjAbM67GA99jg@mail.ru 4165 iHKTBkegOQa6fIALq@mail.ru 3739 nHkcBl7BdgXxijSYD7@mail.ru 3405 SMAzPJAzbl9vp4hAXo@mail.ru 3346 xILz6d7P@mail.ru</code> </pre><br>  Di antara semuanya, tiga penerima pertama dari atas jelas dibedakan dengan jumlah huruf.  Jika Anda menerima alamat IP pengirim yang dikirim ke alamat dari top-3 ini, Anda dapat melihat dominasi yang jelas dari jaringan tertentu: <br><br><pre> <code class="bash hljs">$ cat log1.txt | fgrep <span class="hljs-string"><span class="hljs-string">'L2JhbjAbM67GA99jg@mail.ru'</span></span> | cut -d<span class="hljs-string"><span class="hljs-string">' '</span></span> -f2 | sort | cut -d<span class="hljs-string"><span class="hljs-string">'.'</span></span> -f1 | uniq -c | sort -r | head 831 105 806 41 782 197 664 196 542 154 503 102 266 156 165 45 150 160 108 165</code> </pre> <br>  Sebagian besar jaringan 105/8, 41/8, 196 / 8.197 / 8 dialokasikan oleh AFRINIC - salah satu dari lima pendaftar Internet regional yang mendistribusikan sumber daya Internet.  AFRINIC mendistribusikan ruang alamat di Afrika.  Dan 41/8 mengacu sepenuhnya pada AFRINIC. <br><br><pre> <code class="bash hljs">https://www.nic.ru/whois/?searchWord=105.0.0.0 https://www.nic.ru/whois/?searchWord=41.0.0.0</code> </pre><br>  Dengan demikian, jawaban untuk masalah tersebut, sebenarnya, ada di dalam log itu sendiri. <br><br><pre> <code class="bash hljs">$ cat log1.txt | fgrep -e <span class="hljs-string"><span class="hljs-string">'105.'</span></span> -e <span class="hljs-string"><span class="hljs-string">'41.'</span></span> -e <span class="hljs-string"><span class="hljs-string">'196.'</span></span> -e <span class="hljs-string"><span class="hljs-string">'197.'</span></span> -e <span class="hljs-string"><span class="hljs-string">'154.'</span></span> -e <span class="hljs-string"><span class="hljs-string">'102.'</span></span> | awk <span class="hljs-string"><span class="hljs-string">'{print $1}'</span></span> | sort | uniq -c | sort -r | head -n 21 4209 L2JhbjAbM67GA99jg@mail.ru 3313 iHKTBkegOQa6fIALq@mail.ru 2704 nHkcBl7BdgXxijSYD7@mail.ru 2215 uvRbp1O@mail.ru 1774 sPmMsmmFiV@mail.ru 1448 BtG3aHgQgCKuze2AKuRH@mail.ru 1233 eQpuuQ2uQdbwRL3@mail.ru 958 nJT5dpaBZ@mail.ru 862 ef4WbQiB@mail.ru 762 dQCqKL6eVminFfH7wLA@mail.ru 632 ifq6Rd1HxuCQOdO9@mail.ru 539 cFwm2ssypMmx1sA7@mail.ru 531 twtTnr4G@mail.ru 431 TSrczgYASrR11Hs3qCi@mail.ru 380 o3r3exc3OL@mail.ru 357 rzmjr2VAHK@mail.ru 348 vnPr6YjJ3ndw@mail.ru 312 anOjFXrwOtLP2Rl1Vcz6@mail.ru 289 dvny5zHmRW8fiT@mail.ru 282 sgg9jPxFDYvzw8Kr@mail.ru 274 tKSevzA7GntJ@mail.ru</code> </pre> <br>  Pada titik ini, kita mendapatkan string "LinuxBenedictTorvadst". <br><br>  Kunci yang benar adalah LinusBenedictTorvalds. <br><br>  String yang dihasilkan berisi kesalahan ketik yang terkait dengan kunci yang benar dalam 3 karakter ekstrim.  Ini disebabkan oleh fakta bahwa jaringan yang kami pilih tidak sepenuhnya dialokasikan ke negara-negara Afrika dan bagaimana email didistribusikan oleh alamat IP di log kami. <br><br>  Dengan klarifikasi yang cukup dari jaringan terbesar yang dialokasikan ke negara-negara Afrika, Anda bisa mendapatkan jawaban yang tepat: <br><br><pre> <code class="bash hljs">$ cat log1.txt | fgrep -e<span class="hljs-string"><span class="hljs-string">' '</span></span>105.{30..255}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>41. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>196.{64..47}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>196.{248..132}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>197.{160..31}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>154.{127..255}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>102.{70..255}. -e<span class="hljs-string"><span class="hljs-string">' '</span></span>156.{155..255}. | awk <span class="hljs-string"><span class="hljs-string">'{print $1}'</span></span> | sort | uniq -c | sort -r | head -n 21 3350 L2JhbjAbM67GA99jg@mail.ru 2662 iHKTBkegOQa6fIALq@mail.ru 2105 nHkcBl7BdgXxijSYD7@mail.ru 1724 uvRbp1O@mail.ru 1376 sPmMsmmFiV@mail.ru 1092 BtG3aHgQgCKuze2AKuRH@mail.ru 849 eQpuuQ2uQdbwRL3@mail.ru 712 nJT5dpaBZ@mail.ru 584 ef4WbQiB@mail.ru 463 dQCqKL6eVminFfH7wLA@mail.ru 365 ifq6Rd1HxuCQOdO9@mail.ru 269 cFwm2ssypMmx1sA7@mail.ru 225 twtTnr4G@mail.ru 168 TSrczgYASrR11Hs3qCi@mail.ru 142 o3r3exc3OL@mail.ru 111 rzmjr2VAHK@mail.ru 96 vnPr6YjJ3ndw@mail.ru 78 anOjFXrwOtLP2Rl1Vcz6@mail.ru 56 lHzWiB7ExvRtSbAcU9@mail.ru 56 dvny5zHmRW8fiT@mail.ru 40 sgg9jPxFDYvzw8Kr@mail.ru</code> </pre> <br>  Masalahnya juga bisa diselesaikan dengan cara lain. <br>  Unduh MaxMind, buka paket, dan tiga tim berikut ini juga menyelesaikan masalah kami. <br><br><pre> <code class="bash hljs">$ cat GeoLite2-Country-Locations-ru.csv | grep <span class="hljs-string"><span class="hljs-string">""</span></span> | cut -d<span class="hljs-string"><span class="hljs-string">','</span></span> -f1 &gt; africaIds.txt $ grep -Ff africaIds.txt GeoLite2-Country-Blocks-IPv4.csv | cut -d<span class="hljs-string"><span class="hljs-string">','</span></span> -f1 &gt; africaNetworks.txt $ grepcidr -f africaNetworks.txt log1.txt | cut -d<span class="hljs-string"><span class="hljs-string">' '</span></span> -f1 | sort | uniq -c | sort -r | head -n21</code> </pre><br>  Dengan satu atau lain cara, kami akhirnya menghitung statistik, dan para manajer mendapatkan data yang mereka butuhkan untuk bekerja! <br><br><h3>  3. Tahap ketiga </h3><br>  Tahap ketiga agak mirip dengan yang pertama - Anda juga perlu memperbaiki layanan lampu hangat, tetapi lebih sulit daripada di tugas pertama. <br><br><h4>  3.1.  Fakta menarik </h4><br>  Dalam 15 menit pertama, tiga pemain menemukan kunci pertama, 2 jam 20 menit setelah dimulainya tahap, pemenang kami menyelesaikan tugas. <br><br><h4>  3.2.  Tugas </h4><br>  Anda pergi bekerja di perusahaan tempat semua dokumen perusahaan disimpan di server Wiki internal.  Tahun lalu, seorang insinyur memesan 3 disk baru untuk server di samping satu yang sudah ada, dengan alasan bahwa untuk toleransi kesalahan sistem perlu menempatkan disk di beberapa array.  Sayangnya, beberapa minggu setelah instalasi mereka, insinyur pergi untuk beristirahat di India dan tidak kembali. <br><br>  Selama beberapa tahun, server bekerja tanpa kegagalan, tetapi beberapa hari yang lalu jaringan perusahaan diretas.  Menurut instruksi, petugas keamanan menghapus disk dari server dan mengirimkannya kepada Anda.  Selama transportasi, satu disk hilang. <br><br>  Anda perlu mengembalikan wiki, pertama-tama, konten halaman wiki menarik.  Sepotong teks yang ada di salah satu halaman wiki ini adalah kata sandi dari server 1C dan sangat dibutuhkan untuk membukanya. <br><br>  Selain itu, di suatu tempat di halaman wiki atau di tempat lain terdapat kata sandi dari server log dan server pengawasan video, yang juga diinginkan untuk dipulihkan, tanpa mereka tidak mungkin untuk menyelidiki insiden tersebut.  Seperti biasa, mereka diharapkan dari solusi operasional untuk masalah ini! <br><br><h4>  3.3.  Solusi </h4><br>  1. Kami mencoba untuk mem-boot dari drive yang kami miliki dan di mana pun kami menerima pesan yang sama: <br><br><pre> <code class="bash hljs">No bootable medium found! System halted</code> </pre><br>  Perlu untuk boot dari sesuatu.  Sekali lagi menyelamatkan boot dari Live CD / DVD (Pemecahan Masalah -&gt; Penyelamatan).  Saat boot, kami mencoba menemukan partisi boot, kami tidak menemukannya, kami masuk ke shell.  Kami mencoba mempelajari apa dan bagaimana dengan disk.  Diketahui ada tiga.  Ada lebih banyak alat untuk ini dalam versi CentOS ke-7, di mana ada <code>lsblk</code> atau <code>lsblk</code> yang menunjukkan kepada kita semua informasi tentang disk. <br><br>  Bagaimana dan apa yang harus dilakukan: <br><br><pre> <code class="bash hljs">$ ls /dev/sd*</code> </pre> <br>  Segera jelas itu <br><br><pre> <code class="bash hljs">/dev/sdb1 - ext4 /dev/sdb2 -  lvm /dev/sda1  /dev/sdc1 -   /dev/sda2  /dev/sdc2 -        </code> </pre> <br>  Mount sdb1, jelas bahwa ini adalah partisi boot CentOS 6. <br><br><pre> <code class="bash hljs">$ mkdir /mnt/sdb1 &amp;&amp; mount /dev/sdb1 /mnt/sdb1</code> </pre> <br>  Jelas, kita pergi ke bagian grub dan menemukan kunci pertama di sana - James191955Mengambil file yang tidak biasa. <br><br>  2. Kami mempelajari pvs dan lvs, karena kami bekerja dengan LVM.  Kita melihat bahwa harus ada 2 volume fisik, satu tidak ditemukan dan bersumpah pada cairan yang hilang.  Kita melihat bahwa harus ada 2 volume logis: root dan swap, sementara root sebagian hilang (atribut P volume).  Mount tidak berfungsi, tapi maaf!  Kami benar-benar membutuhkannya. <br><br>  Ada 2 disk lagi, lihat, pasang dan pasang: <br><br><pre> <code class="bash hljs">$ mdadm --examine --verbose --scan $ mdadm --assemble --verbose --scan $ mkdir /mnt/md127 &amp;&amp; mount /dev/md127 /mnt/md127</code> </pre> <br>  Kami melihat, jelas bahwa ini adalah partisi boot CentOS 6 dan mengambil apa yang sudah ada di <code>/dev/sdb1</code> , dan di sini lagi kunci yang sama adalah James191955Gosling! <br><br>  Kami melihat bagaimana <code>/dev/md127</code> . <br><br><pre> <code class="bash hljs">$ mdadm --detail /dev/md127</code> </pre><br>  Kita melihat bahwa itu harus dirakit dari 4 disk, dirakit dari dua <code>/dev/sda1</code> dan <code>/dev/sdc1</code> , mereka harus nomor 2 dan 4 dalam sistem.  Kami berasumsi bahwa Anda juga dapat membangun array dari <code>/dev/sda2</code> dan <code>/dev/sdc2</code> .  Tidak jelas mengapa tidak ada metadata pada mereka, tetapi ini adalah hati nurani administrator, yang berada di suatu tempat di Goa.  Kami berasumsi bahwa harus ada RAID10, meskipun ada opsi.  Kami mengumpulkan: <br><br><pre> <code class="bash hljs">$ mdadm --create --verbose /dev/md0 --assume-clean --level=10 --raid-devices=4 missing /dev/sda2 missing /dev/sdc2</code> </pre><br>  Kami melihat blkid, pvs, lvs.  Kami menemukan bahwa kami mengumpulkan volume fisik, yang sebelumnya tidak kami miliki. <br><br>  Kami segera memperbaiki lvroot, memasangnya, tetapi pertama-tama aktifkan VG: <br><br><pre> <code class="bash hljs">$ vgchange -ay $ mkdir /mnt/lvroot &amp;&amp; mount /dev/mapper/vg_c6m1-lv_root /mnt/lvroot</code> </pre><br>  Dan semuanya ada di sana, termasuk kunci DennisBMacAlistairCRitchie - di direktori home root - <code>/root/sweet</code> . <br><br>  3. Namun demikian, kami mencoba untuk menghidupkan kembali server kami sehingga mulai normal.  Semua volume logis c dari <code>/dev/md0</code> (di mana kita memiliki segalanya) diseret ke <code>/dev/sdb2</code> , di mana seluruh server awalnya bekerja. <br><br><pre> <code class="bash hljs">$ pvmove /dev/md0 /dev/sdb2 $ vgreduce vg_c6m1 /dev/md0</code> </pre> <br>  Kami memadamkan server, menghapus 1 dan 3 disk, meninggalkan yang kedua, boot dari Live CD / DVD di Rescue.  Kami menemukan bagian boot, mengembalikan bootloader di grub: <br><br><pre> <code class="bash hljs">root (hd0,0) setup (hd0)</code> </pre><br>  Kami merobek boot disk dan menjalankan boot dengan sukses, tetapi situs tidak berfungsi. <br><br>  4. Ada dua opsi untuk memulai situs: konfigurasikan Apache dari awal atau gunakan nginx yang sudah dikonfigurasikan sebelumnya dengan php-fpm: <br><br><pre> <code class="bash hljs">$ /etc/init.d/nginx start $ /etc/init.d/php-fpm start</code> </pre><br>  Akhirnya, Anda harus memulai MySQL: <br><br><pre> <code class="bash hljs">$ /etc/init.d/mysqld start</code> </pre> <br>  Itu tidak memulai, dan solusinya terletak pada <code>/var/log/mysql</code> .  Segera setelah Anda menyelesaikan masalah dengan MySQL, situs tersebut akan berfungsi, akan ada kunci di halaman utama - RichardGCCMatthewGNUStallman!  Sekarang kami memiliki akses ke 1C, dan karyawan akan dapat dibayar.  Dan seperti biasa, Anda memiliki banyak pekerjaan di depan untuk membangun infrastruktur dan keamanan di perusahaan. <br><br>  Kami juga dapat sekali lagi berbagi daftar buku yang membantu kami dan peserta kami mempersiapkan diri untuk permainan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">linux.mail.ru/books</a> . <br><br>  Terima kasih telah bersama kami!  Ikuti pengumuman game selanjutnya! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id447222/">https://habr.com/ru/post/id447222/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id447210/index.html">@Pythonetc kompilasi Maret 2019</a></li>
<li><a href="../id447212/index.html">Kiat dan trik dari saluran Telegram saya @pythonetc, Maret 2019</a></li>
<li><a href="../id447214/index.html">Cara meningkatkan desain game dengan strategi optimal</a></li>
<li><a href="../id447218/index.html">JPoint 2019 parsing</a></li>
<li><a href="../id447220/index.html">Dasar-dasar mesin JavaScript: bentuk umum dan cache inline. Bagian 2</a></li>
<li><a href="../id447226/index.html">Wawancara dengan popularizer sains, kepala satu-satunya sekolah astronomi swasta di Rusia, Pavel Skripnichenko</a></li>
<li><a href="../id447232/index.html">Pengalaman pribadi Bagaimana kami menghubungkan telepon internasional: perbandingan 6 pertukaran virtual</a></li>
<li><a href="../id447234/index.html">Cara menulis program polimorfik menggunakan Arrow</a></li>
<li><a href="../id447236/index.html">Membuat tambak perangkat Android menggunakan Open STF</a></li>
<li><a href="../id447240/index.html">Pelajari Taktik Adversarial, Teknik & Pengetahuan Umum (ATT @ CK). Taktik Perusahaan. Bagian 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>