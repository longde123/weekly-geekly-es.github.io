<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ©Ô∏è üìß üë©‚Äçüëß (Pas tr√®s) les co√ªts cach√©s de la base de code commune d'iOS et d'Android üìπ üëà ü•°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jusqu'√† r√©cemment, Dropbox avait une strat√©gie technique pour utiliser du code C ++ commun pour les applications mobiles iOS et Android. L'id√©e est cl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>(Pas tr√®s) les co√ªts cach√©s de la base de code commune d'iOS et d'Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463921/"> Jusqu'√† r√©cemment, Dropbox avait une strat√©gie technique pour utiliser du code C ++ commun pour les applications mobiles iOS et Android.  L'id√©e est claire: √©crire du code une fois en C ++ au lieu de le dupliquer s√©par√©ment en Java et Objective C.Nous avons adopt√© cette strat√©gie en 2013, lorsque le groupe d'ing√©nieurs de d√©veloppement mobile √©tait relativement petit et devait d√©velopper rapidement le produit.  Une telle solution a permis de produire une grande quantit√© de code sur Android et iOS par les forces d'une petite √©quipe. <br><br>  Nous avons maintenant compl√®tement abandonn√© cette strat√©gie au profit des langues natives de chaque plateforme (principalement Swift et Kotlin, qui n'existaient pas au d√©part).  La solution implique les co√ªts cach√©s (pas si) du partage de code. <br><br>  Tous les probl√®mes proviennent de l'essentiel: la <b>surcharge s'est av√©r√©e √™tre plus qu'une simple √©criture du code deux fois</b> . <br><a name="habracut"></a><br>  Avant d'analyser les diff√©rents types de surcharge, je voudrais pr√©ciser que nous ne sommes jamais arriv√©s au point o√π la majeure partie de la base de code √©tait en C ++.  Les co√ªts nous ont en fait emp√™ch√©s d'aller dans cette direction. <br><br>  Il convient √©galement de noter que des entreprises beaucoup plus grandes telles que Google et Facebook d√©veloppent depuis plusieurs ann√©es des solutions de partage de code √©volutives.  De telles solutions ne sont pas tr√®s courantes.  Bien que les syst√®mes tiers tels que React Native ou Flutter √©vitent une partie des frais g√©n√©raux, certains co√ªts demeurent (au moins jusqu'√† ce qu'une de ces technologies devienne populaire et suffisamment mature).  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Airbnb a refus√© d'utiliser React Native</a> pour plusieurs des m√™mes raisons que celles d√©crites dans cet article. <br><br>  Tous les co√ªts peuvent √™tre regroup√©s en quatre cat√©gories principales. <br><br><h3>  Frais g√©n√©raux des cadres et biblioth√®ques personnalis√©s </h3><br>  Le moyen le plus simple de pr√©voir les co√ªts de cr√©ation de frameworks et de biblioth√®ques.  Ils sont grossi√®rement divis√©s en deux sous-cat√©gories: <br><br><ul><li>  Cadres qui vous permettent d'interagir avec l'environnement h√¥te pour cr√©er une application mobile √† part enti√®re.  Par exemple: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Djinni</a> , un outil de cr√©ation de d√©clarations interlangues de types de connexion et d'interfaces <br></li><li>  Un cadre pour effectuer des t√¢ches en arri√®re-plan par rapport au thread principal (trivialement dans les langues natives de la plateforme) </li></ul><br></li><li>  Biblioth√®ques pour remplacer les standards de langue ou les solutions open source pouvant √™tre utilis√©es dans les langues natives, par exemple: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">json11</a> pour (d√©) s√©rialiser JSON <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nn</a> pointeurs non nuls pour C ++ </li></ul></li></ul><br>  Rien de tout cela n'est n√©cessaire si vous restez dans les langues maternelles de la plateforme.  Et notre participation √† des projets open source en langues natives serait probablement plus b√©n√©fique pour les d√©veloppeurs.  Dans la communaut√© C ++, la culture open source n'√©tait pas (et n'est-ce pas?) Pas aussi d√©velopp√©e que dans la communaut√© des d√©veloppeurs mobiles, d'autant plus que la communaut√© <b>mobile</b> C ++ n'existe pratiquement pas. <br><br>  Veuillez noter que ces frais g√©n√©raux sont particuli√®rement √©lev√©s pour C ++ (contrairement √† d'autres langages non natifs possibles tels que Python ou C #), car il n'y a pas de biblioth√®que standard enti√®rement fonctionnelle.  Cependant, seul C / C ++ poss√®de un compilateur pris en charge par Google et Apple, donc le passage √† une autre langue entra√Æne un certain nombre d'autres probl√®mes. <br><br><h3>  Environnement de d√©veloppement personnalis√© surdimensionn√© </h3><br>  Il existe de nombreux outils dans l'√©cosyst√®me mobile pour am√©liorer l'efficacit√© du d√©veloppement.  Les IDE mobiles sont tr√®s fonctionnels, et Google et Apple ont investi beaucoup de ressources pour les rendre id√©ales sur leurs plateformes.  En nous √©loignant des valeurs par d√©faut, nous renon√ßons √† certains avantages.  Tout d'abord, le d√©bogage en langue native surpasse g√©n√©ralement le d√©bogage C ++ dans l'EDI par d√©faut. <br><br>  Je me souviens surtout d'une erreur qui a provoqu√© un blocage de la structure de diffusion en arri√®re-plan, ce qui a entra√Æn√© des plantages accidentels d'application.  De telles erreurs sont difficiles √† suivre m√™me avec une pile simple et standard.  √âtant donn√© que le probl√®me impliquait le d√©bogage de code multi-thread s'ex√©cutant entre C ++ et Java, il a fallu des semaines pour le suivre! <br><br>  En plus de perdre les outils standard, j'ai d√ª investir du temps dans la cr√©ation de mes propres outils pour supporter le code C ++ commun.  Plus important encore, un syst√®me de construction personnalis√© √©tait n√©cessaire pour cr√©er des biblioth√®ques contenant du code C ++, ainsi que des shells Java et Objective-C.  Il devrait g√©n√©rer des objectifs que Xcodebuild et Gradle comprennent.  La cr√©ation d'un tel syst√®me nous a pris beaucoup de ressources, car il devait √™tre constamment mis √† jour pour prendre en charge les modifications des deux syst√®mes de g√©n√©ration. <br><br><h3>  Remplacement de plate-forme pour les diff√©rences de plate-forme </h3><br>  Bien qu'iOS et Android soient des ¬´applications mobiles¬ª qui fournissent g√©n√©ralement les m√™mes fonctionnalit√©s, il existe certaines diff√©rences dans les plates-formes elles-m√™mes qui affectent la mise en ≈ìuvre.  Par exemple, comment une application effectue des t√¢ches en arri√®re-plan.  M√™me des choses similaires peuvent commencer √† diff√©rer consid√©rablement au fil du temps (par exemple, interagir avec l'appareil photo). <br><br>  Par cons√©quent, vous ne pouvez pas simplement √©crire du code une fois et l'ex√©cuter sur une autre plate-forme.  Vous devez passer beaucoup de temps √† int√©grer et √† coder pour une plate-forme sp√©cifique, et parfois ce code se termine juste au niveau C ++! <br><br>  <b>Les √©conomies th√©oriques r√©sultant de l'√©criture d'une seule fois du code ne correspondent pas √† la r√©alit√©, ce qui r√©duit imm√©diatement consid√©rablement l'efficacit√© de cette approche.</b> <br><br><h3>  Frais g√©n√©raux pour l'embauche, la formation et la fid√©lisation des d√©veloppeurs </h3><br>  Le dernier, mais non le moindre, est le co√ªt de la formation et / ou de l'embauche de d√©veloppeurs pour travailler avec notre pile tr√®s particuli√®re.  Lorsque Dropbox a commenc√© √† utiliser cette strat√©gie mobile, nous avions un noyau de d√©veloppeurs C ++ exp√©riment√©s.  Ce groupe a lanc√© le projet C ++ et form√© d'autres d√©veloppeurs mobiles. <br><br>  Au fil du temps, ces d√©veloppeurs ont rejoint d'autres √©quipes et d'autres soci√©t√©s.  Les autres n'avaient pas suffisamment d'exp√©rience pour combler le vide en mati√®re de leadership technique, et il est devenu de plus en plus difficile de trouver des ing√©nieurs exp√©riment√©s poss√©dant l'exp√©rience C ++ appropri√©e et int√©ress√©s √† d√©velopper pour les appareils mobiles. <br><br>  En cons√©quence, nous avons √©t√© confront√©s √† un r√©el manque de connaissances critiques pour maintenir la base de code C ++.  Il ne restait que deux options et chacune n√©cessitait des efforts importants: <br><br><ol><li>  Trouvez et embauchez des candidats avec un ensemble de comp√©tences tr√®s sp√©cifique (nous avons essay√© sans succ√®s pendant un an). <br></li><li>  Formez vos propres d√©veloppeurs mobiles (ou C ++), ce qui est presque impossible √† faire en l'absence de personnes √¢g√©es poss√©dant le bon ensemble de comp√©tences pour terminer la formation.  M√™me lorsque le groupe principal ne s'√©tait pas encore dispers√©, les d√©veloppeurs mobiles n'√©taient g√©n√©ralement pas int√©ress√©s par le C ++, donc trouver des gens pour apprendre √©tait √©galement un gros probl√®me. </li></ol><br>  En plus du recrutement, la sortie de sa propre pile technologique a cr√©√© un probl√®me de r√©tention - les d√©veloppeurs mobiles ne voulaient tout simplement pas travailler sur un projet C ++.  Cela a amen√© de nombreux ing√©nieurs talentueux √† quitter le projet au lieu de continuer √† souffrir avec une pile personnalis√©e mal entretenue.  En g√©n√©ral, la communaut√© des d√©veloppeurs mobiles est tr√®s dynamique - les nouvelles technologies et les nouveaux mod√®les apparaissent fr√©quemment et sont mis en ≈ìuvre rapidement.  Les meilleurs ing√©nieurs aiment garder leurs comp√©tences √† jour. <br><br>  Un produit mature avec une pile standard n'est pas facile √† tenir √† jour.  Vous sacrifiez la nouveaut√© pour la stabilit√©.  Ce probl√®me augmente consid√©rablement si vous vous enfermez dans une pile personnalis√©e en dehors de l'√©cosyst√®me mobile plus large. <br><br><h1>  Conclusion </h1><br>  Une fois, √©crire du code une fois pour diff√©rentes plates-formes semblait beaucoup, mais les co√ªts qui y √©taient associ√©s l'emportaient sur ses avantages (qui en tout cas √©taient inf√©rieurs aux attentes).  En fin de compte, nous n'utilisons plus une base de code commune via C ++ (ou toute autre m√©thode non standard), mais √©crivons du code dans nos langues natives pour chaque plate-forme. <br><br>  De plus, nous voulons que nos ing√©nieurs se sentent bien et puissent contribuer √† la communaut√©.  C'est pourquoi nous avons d√©cid√© de mettre notre pratique en conformit√© avec les normes de l'industrie. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463921/">https://habr.com/ru/post/fr463921/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463907/index.html">Cr√©ation d'une application Sticky Notes √† l'aide de 8base, GraphQL et React</a></li>
<li><a href="../fr463913/index.html">Et comment les agences de recrutement recherchent-elles vraiment des programmeurs?</a></li>
<li><a href="../fr463915/index.html">Qu'est-ce qu'un CDN et comment fonctionne-t-il?</a></li>
<li><a href="../fr463917/index.html">20 choses que j'aimerais savoir avant de devenir d√©veloppeur web</a></li>
<li><a href="../fr463919/index.html">Grande pens√©e philosophique: Top 10 des discussions Piter de DotNext 2019</a></li>
<li><a href="../fr463923/index.html">.container n'est plus n√©cessaire</a></li>
<li><a href="../fr463925/index.html">Vivaldi: Comment comptons-nous le nombre d'utilisateurs?</a></li>
<li><a href="../fr463927/index.html">Contournement de la s√©curit√© et de la censure: 5 VPN et procurations pour Google Chrome</a></li>
<li><a href="../fr463929/index.html">Explorer les profondeurs des annotations de type en Python. Partie 1</a></li>
<li><a href="../fr463931/index.html">Explorer les profondeurs des annotations de type en Python. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>