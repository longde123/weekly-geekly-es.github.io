<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚🏽 🤼 🔺 AudioKit dan sintesis audio di iOS / OSX 🈚️ 👩🏿 🛷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AudioKit adalah kerangka kerja audio yang dikembangkan oleh insinyur audio, programer dan musisi khusus untuk iOS dan OSX. Ini menyediakan alat untuk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AudioKit dan sintesis audio di iOS / OSX</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/440226/"><img src="https://habrastorage.org/webt/y1/mf/ce/y1mfceq59vbcmxgabehfybmd5rc.jpeg"><br><br>  AudioKit adalah kerangka kerja audio yang dikembangkan oleh insinyur audio, programer dan musisi khusus untuk iOS dan OSX.  Ini menyediakan alat untuk <b>memproses</b> dan <b>mensintesis</b> suara.  Di bawah kap adalah campuran dari Swift, Objective-C, C ++ dan C, dan API Unit Audio Apple.  Teknologi luar biasa (dan agak canggih) dibungkus dengan API Swift yang sangat ramah, yang dapat diakses langsung dari Xcode Playgrounds! <br><br>  Dalam tutorial ini, kita akan melakukan perjalanan melalui AudioKit, serta <b>sejarah</b> sintesis suara.  Anda akan mempelajari dasar-dasar fisika bunyi dan bagaimana synthesizer pertama seperti Hammond Organ bekerja.  Juga, teknik-teknik modern, misalnya, pengambilan sampel, akan dipertimbangkan. <br><br>  Buat minuman favorit Anda, duduk dan pergi! <br><a name="habracut"></a><br><h1>  Langkah pertama </h1><br>  Dimulai dengan AudioKit 3.6, mengatur taman bermain untuk bekerja dengan kerangka kerja menjadi sangat sederhana.  Unduh dan unzip daftar putar starter di <a href="">sini</a> . <br><br>  Perjalanan dimulai dengan beberapa langkah untuk mengkonfigurasi taman bermain untuk bekerja dengan AudioKit. <br><br>  Buka file <b>AudioKitPlaygrounds.xcodeproj</b> di Xcode.  Klik tombol <b>+</b> di sudut kiri bawah layar, pilih <b>File ...</b> lalu <b>Blank</b> di bagian <b>Playground</b> , simpan file baru di folder Playgrounds bersama dengan taman bermain demo. <br><br>  Taman bermain yang baru ditambahkan akan mulai dan akan terlihat seperti ini: <br><img src="https://habrastorage.org/webt/tz/db/cn/tzdbcnrjbmbep10dyndfyg3xu2s.png"><br><br>  Ganti kode yang dihasilkan dengan yang berikut ini: <br><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit let oscillator = AKOscillator()  AudioKit.output = oscillator try AudioKit.start() oscillator.start() sleep(10)</code> </pre> <br>  Taman bermain tidak akan dimulai sampai Anda setidaknya sekali merakit proyek, untuk ini Anda dapat menggunakan item menu <b>Product / Build</b> atau kombinasi tombol <b>⌘-B</b> .  Setelah itu, jalankan lagi taman bermain dan dengarkan suara berdengung selama 10 detik.  (Catatan penerjemah: kadang-kadang kesalahan tidak hilang, dan Anda perlu beralih ke taman bermain lain dan kembali untuk membuatnya berfungsi).  Anda dapat menggunakan tombol Mainkan / Hentikan di kiri bawah jendela putar untuk menghentikan pemutaran atau memulai kembali. <br><blockquote>  <b>Catatan:</b> Jika Anda masih melihat kesalahan, coba mulai ulang Xcode.  Sayangnya, kerangka kerja dan taman bermain bukanlah teman yang sangat baik satu sama lain dan dapat berperilaku tak terduga. </blockquote><h1>  Osilator dan fisika bunyi </h1><br>  Umat ​​manusia telah memainkan musik melalui berbagai objek fisik selama ribuan tahun.  Banyak instrumen kami yang biasa, seperti gitar atau drum, berusia ratusan tahun.  Pengalaman rekaman pertama menggunakan sirkuit elektronik untuk menghasilkan suara dilakukan pada tahun 1874 oleh Elias Gray.  Elisha bekerja di bidang telekomunikasi, dan ia menemukan osilator - synthesizer musik paling sederhana.  Dengan dia kita akan mulai menyelam. <br><br>  Klik kanan pada taman bermain Anda, pilih <b>New Playground Page</b> dan ganti kode yang dihasilkan dengan yang berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport <span class="hljs-comment"><span class="hljs-comment">// 1. Create an oscillator let oscillator = AKOscillator() // 2. Start the AudioKit 'engine' AudioKit.output = oscillator try AudioKit.start() // 3. Start the oscillator oscillator.start() PlaygroundPage.current.needsIndefiniteExecution = true</span></span></code> </pre> <br>  Taman bermain akan mulai menghasilkan buzz berkelanjutan - sebagaimana dimaksud.  Anda dapat mengklik berhenti untuk menghentikannya. <br><br>  Ini hampir sama dengan apa yang kami lakukan di taman bermain sebelumnya, tapi kali ini kami akan menyelami detailnya. <br><br>  Pertimbangkan semua langkah dalam urutan: <br><br><ol><li>  Di sini kita membuat osilator.  Osilator adalah penerus <code>AKNode</code> .  Node adalah elemen yang membentuk rantai audio yang menghasilkan dan memodifikasi suara. <br></li><li>  Di sini kita menghubungkan output dari simpul terakhir kami dengan mesin AudioKit.  Dalam kasus kami, hanya satu simpul.  Selanjutnya, kerangka kerja akan mengarahkan output dari node ke perangkat pemutaran audio. <br></li><li>  Nah, kita mulai osilator, pada output itu mulai mengirimkan gelombang suara. <br></li></ol><br>  Osilator menghasilkan sinyal berulang yang tidak berhenti.  Dalam buku pedoman ini, <code>AKOscillator</code> menghasilkan gelombang sinus.  Menggunakan AudioKit, sinyal gelombang sinus digital dikirim ke speaker atau headphone.  Hasilnya, kami mendengar suara yang berosilasi pada frekuensi yang sama dengan gelombang sinus yang kami hasilkan.  Gelombang sinus ini tidak terdengar terlalu musikal. <br><br><img src="https://habrastorage.org/webt/rx/yw/xw/rxywxwhvbneupuvsb3tx4egropi.png"><br><br>  Dua parameter bertanggung jawab untuk suara osilator ini: amplitudo - ketinggian gelombang sinus, menentukan volume dan frekuensi suara - ketinggian suara tergantung padanya. <br><br>  Di taman bermain, tambahkan baris kode berikut tepat setelah membuat osilator: <br><br><pre> <code class="swift hljs">oscillator.frequency = <span class="hljs-number"><span class="hljs-number">300</span></span> oscillator.amplitude = <span class="hljs-number"><span class="hljs-number">0.5</span></span></code> </pre><br>  Suara telah berubah, sekarang terdengar dua kali lebih tenang dan jauh lebih rendah.  Frekuensi sinyal diukur dalam hertz (jumlah pengulangan per detik) dan menentukan nada not.  Amplitudo (amplitudo) diatur dari 0 ke 1 dan bertanggung jawab untuk volume. <br><br>  Penemuan Elijah Gray dicatat dalam paten pertama untuk alat musik elektronik. <br><br><img src="https://habrastorage.org/webt/33/xp/gy/33xpgyaps40rjq2tyojz5wdzfxi.png"><br><br>  Bertahun-tahun kemudian, Leo Theremin menemukan alat musik yang agak aneh yang digunakan sampai hari ini - theremin.  Di theremin, Anda dapat mengubah frekuensi suara dengan gerakan tangan di atas instrumen.  Untuk memahami bagaimana suara Theremin, Anda dapat mendengarkan Getaran Beach Boys, suara Theremin tidak perlu dikacaukan. <br><br>  Anda dapat mensimulasikan suara thereminvox, untuk ini, tambahkan kode berikut ke pengaturan osilator: <br><br><pre> <code class="swift hljs">oscillator.rampDuration = <span class="hljs-number"><span class="hljs-number">0.2</span></span></code> </pre> <br>  Dan ganti baris mulai AudioKit ( <code>try AudioKit.start()</code> ) dengan yang berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { oscillator.frequency = oscillator.frequency == <span class="hljs-number"><span class="hljs-number">500</span></span> ? <span class="hljs-number"><span class="hljs-number">100</span></span> : <span class="hljs-number"><span class="hljs-number">500</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start()</code> </pre> <br>  Properti <code>rampDuration</code> memungkinkan osilator untuk dengan lancar mengubah nilai parameternya (misalnya, frekuensi atau amplitudo).  <code>AKPeriodicFunction</code> adalah utilitas yang berguna dari AudioKit untuk eksekusi kode periodik.  Dalam contoh kami, ini mengubah frekuensi gelombang sinus dari 500Hz ke 100Hz setiap 0,5 detik. <br><br>  Selamat!  Anda baru saja membuat theremin pertama Anda.  Osilator sederhana dapat menghasilkan not musik, tetapi tidak terdengar bagus.  Ada banyak faktor yang mempengaruhi suara instrumen fisik, seperti piano, misalnya.  Dan selanjutnya kita akan mempertimbangkan beberapa dari mereka. <br><br><h1>  Amplop Suara </h1><br>  Ketika alat musik memainkan nada, volume suaranya berubah seiring waktu, dan sifat perubahannya berbeda dari satu instrumen ke instrumen lainnya.  Model yang dapat mensimulasikan efek ini disebut amplop Attack-Decay-Sustain-Release (ADSR) (Catatan: synthesizer yang tersedia untuk pembelian tidak pernah dilokalkan, sehingga nama kurva sama dengan yang dapat dilihat pada panel synthesizer ini). <br><br><img src="https://habrastorage.org/webt/hj/nu/1i/hjnu1iomuddzc5t-p0egelaougy.png"><br><br>  Amplop ADSR terdiri dari: <br><br><ul><li>  <b>Serangan</b> : serangan atau waktu di mana suara mencapai volume maksimum. <br></li><li>  <b>Decay</b> : liar atau waktu volume turun dari maksimum ke utama <br></li><li>  <b>Sustain</b> : volume utama, tidak seperti dua parameter sebelumnya, bukan waktu, setelah serangan dan buas berlalu dan sebelum Anda melepaskan kunci synthesizer, suara akan dihasilkan dengan volume ini <br></li><li>  <b>Rilis</b> : rilis atau waktu di mana volume menjadi nol <br></li></ul><br>  Dalam piano, suara diekstraksi oleh palu mengetuk senar, dan karenanya di dalamnya cepat atau, mereka juga mengatakan, serangan pendek dan liar.  Biola dapat memiliki serangan panjang, liar dan berkelanjutan, musisi dapat mempengaruhi parameter ini dengan cara dia menggunakan busur. <br><br>  Salah satu alat musik elektronik pertama adalah Hammond Novachord.  Instrumen ini diproduksi pada tahun 1939, terdiri dari 163 tabung vakum dan lebih dari 1000 kapasitor, dan beratnya 230 kilogram.  Sayangnya, hanya beberapa ratus salinan dibuat, dan ia tidak pernah menerima kesuksesan komersial. <br><br><img src="https://habrastorage.org/webt/xm/ag/oa/xmagoabyxwbjfzl97fil0x-xo1u.jpeg"><br><br>  Klik kanan pada <b>Journey</b> <b>Playground</b> , pilih <b>New Playground Page</b> dan buat halaman baru yang disebut <b>ADSR</b> .  Ganti kode yang dihasilkan dengan yang berikut ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport          let oscillator = AKOscillator()</code> </pre><br>  Itu hanya menciptakan osilator yang sudah kita kenal.  Selanjutnya, tambahkan kode berikut di akhir taman bermain: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> envelope = <span class="hljs-type"><span class="hljs-type">AKAmplitudeEnvelope</span></span>(oscillator) envelope.attackDuration = <span class="hljs-number"><span class="hljs-number">0.01</span></span> envelope.decayDuration = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.sustainLevel = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.releaseDuration = <span class="hljs-number"><span class="hljs-number">0.3</span></span></code> </pre> <br>  Ini menciptakan <code>AKAmplitudeEnvelope</code> yang mendefinisikan amplop ADSR.  Parameter durasi (attackDuration, decayDuration, releaseDuration) ditentukan dalam detik, dan volume (SustainLevel) diatur dalam kisaran dari 0 hingga 1. <br><br>  <code>AKAmplitudeEnvelope</code> adalah penerus <code>AKNode</code> dengan cara yang sama seperti <code>AKOscillator</code> . Dalam kode di atas, kita meneruskan node amplop osilator ke penginisialisasi, sehingga menghubungkan node. <br><br>  Selanjutnya, tambahkan kode berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = envelope <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (envelope.isStarted) { envelope.stop() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { envelope.start() } } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start() oscillator.start() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Ini akan meluncurkan AudioKit, tapi kali ini kami mengumpankan output dari node ADSR ke inputnya.  Untuk mendengar efek ADSR, kami terus-menerus menghidupkan dan mematikan simpul menggunakan <code>AKPeriodicFunction</code> . <br><br><img src="https://habrastorage.org/webt/q6/nl/s1/q6nls1yfzrh8wxwzwxhzc0wny1s.png"><br><br>  Sekarang Anda dapat mendengar bagaimana not dimainkan dalam siklus, tetapi kali ini lebih seperti piano. <br><br>  Loop berjalan dua kali per detik pada setiap iterasi, memulai atau menghentikan ADSR.  Ketika ADSR dimulai dengan serangan cepat, volume mencapai nilai maksimumnya dalam 0,01 detik, setelah itu volume menurun ke tingkat utama dalam 0,1 detik dan tetap di sana selama 0,5 detik, dan pada akhirnya meluruh dalam 0,3 detik. <br><br>  Anda dapat bermain dengan parameter sendiri dan mencoba untuk bermain, misalnya, suara biola. <br><br>  Suara yang kami temui didasarkan pada gelombang sinus yang dihasilkan <code>AKOscillator</code> .  Meskipun ASDR membantu memuluskan suara-suara keras, Anda tetap tidak bisa menyebut suara-suara ini musikal. <br><br>  Selanjutnya kami akan mempertimbangkan cara mendapatkan suara yang lebih dalam. <br><br><h1>  Sintesis aditif </h1><br>  Setiap alat musik memiliki suara atau timbre khusus.  <b>Timbre</b> adalah yang membedakan piano dari biola, meskipun mereka dapat memainkan nada yang sama.  Parameter penting dari timbre adalah spektrum suara.  Spektrum suara menggambarkan kisaran frekuensi yang direproduksi yang, jika ditambahkan bersama, memberikan catatan.  Taman bermain kami saat ini menggunakan osilator yang terdengar hanya pada satu frekuensi, dan itu terdengar sangat artifisial. <br><br>  Anda bisa mendapatkan suara yang lebih hidup menggunakan satu set osilator untuk memainkan satu not.  Pendekatan ini dikenal sebagai sintesis aditif, dan ini adalah topik taman bermain kami berikutnya. <br><br>  Klik kanan pada taman bermain, pilih <b>New Playground Page</b> dan buat halaman baru yang disebut <b>Sintesis Aditif</b> .  Ganti kode yang dihasilkan dengan yang berikut ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitUI <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport func createAndStartOscillator(frequency: Double) -&gt; AKOscillator { let oscillator = AKOscillator() oscillator.frequency = frequency return oscillator }</code> </pre> <br>  Untuk sintesis aditif, Anda memerlukan beberapa osilator, untuk ini kami akan gunakan. <code>createAndStartOscillator</code> <br><br>  Selanjutnya, tambahkan kode: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> frequencies = (<span class="hljs-number"><span class="hljs-number">1</span></span>...<span class="hljs-number"><span class="hljs-number">5</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { $<span class="hljs-number"><span class="hljs-number">0</span></span> * <span class="hljs-number"><span class="hljs-number">261.63</span></span> }</code> </pre> <br>  Di sini kita mengambil interval angka dari 1 hingga 5 dan kalikan masing-masing dengan 261,53, frekuensi catatan.  Frekuensi ganda yang dihasilkan disebut harmonik. <br><br>  Sekarang tambahkan kode: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> oscillators = frequencies.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> { createAndStartOscillator(frequency: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre> <br>  Di sini kami membuat osilator untuk setiap frekuensi yang kami gunakan. <br><br>  Untuk menggabungkan osilator tambahkan kode berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mixer = <span class="hljs-type"><span class="hljs-type">AKMixer</span></span>() oscillators.forEach { $<span class="hljs-number"><span class="hljs-number">0</span></span>.connect(to: mixer) }</code> </pre> <br>  <code>AKMixer</code> adalah jenis lain dari simpul AudioKit.  Ia menerima input dari satu atau lebih node dan menggabungkannya menjadi satu. <br><br>  Tambahkan kode berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> envelope = <span class="hljs-type"><span class="hljs-type">AKAmplitudeEnvelope</span></span>(mixer) envelope.attackDuration = <span class="hljs-number"><span class="hljs-number">0.01</span></span> envelope.decayDuration = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.sustainLevel = <span class="hljs-number"><span class="hljs-number">0.1</span></span> envelope.releaseDuration = <span class="hljs-number"><span class="hljs-number">0.3</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = envelope <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> performance = <span class="hljs-type"><span class="hljs-type">AKPeriodicFunction</span></span>(every: <span class="hljs-number"><span class="hljs-number">0.5</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (envelope.isStarted) { envelope.stop() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { envelope.start() } } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start(withPeriodicFunctions: performance) performance.start() oscillators.forEach { $<span class="hljs-number"><span class="hljs-number">0</span></span>.start() }</code> </pre> <br>  Semuanya harus jelas dengan kode ini: tambahkan ADSR ke output mixer, output melalui AudioKit dan secara berkala menyalakan / mematikannya. <br><br>  Agar dapat menangani sintesis aditif dengan baik, akan berguna untuk bermain dengan berbagai kombinasi frekuensi ini.  Dan dalam hal ini, peluang taman bermain seperti Live View sangat ideal bagi kami. <br><br>  Untuk melakukan ini, tambahkan kode: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { addTitle(<span class="hljs-string"><span class="hljs-string">"Harmonics"</span></span>) oscillators.forEach { oscillator <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> harmonicSlider = <span class="hljs-type"><span class="hljs-type">AKSlider</span></span>( property: <span class="hljs-string"><span class="hljs-string">"\(oscillator.frequency) Hz"</span></span>, value: oscillator.amplitude ) { amplitude <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> oscillator.amplitude = amplitude } addView(harmonicSlider) } } } <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.liveView = <span class="hljs-type"><span class="hljs-type">LiveView</span></span>()</code> </pre> <br>  Di AudioKit ada kelas khusus untuk pekerjaan yang nyaman di taman bermain.  Dalam contoh <code>AKLiveViewController</code> , <code>AKLiveViewController</code> menggunakan <code>AKLiveViewController</code> , dengan menggunakannya kita menempatkan elemen secara vertikal.  Dan juga untuk setiap osilator kami membuat <code>AKSlider</code> .  Slider diinisialisasi oleh nilai frekuensi dan amplitudo osilator, dan menyebabkan blok ketika berinteraksi dengan mereka.  Di blok setiap slider, kami mengubah amplitudo osilator yang sesuai.  Jadi Anda bisa menambahkan interaktivitas ke taman bermain Anda. <br><br>  Untuk melihat hasil taman bermain, Anda harus memiliki Live View yang ditampilkan di layar.  Untuk melakukan ini, pilih tombol dengan lingkaran berpotongan di bagian kanan atas jendela dan pastikan bahwa daftar putar yang benar dipilih untuk Live View. <br><br><img src="https://habrastorage.org/webt/rz/sg/3p/rzsg3psadssk1spigpzyqaltcwq.png"><br><br>  Untuk mengubah nada instrumen Anda, Anda dapat mengubah nilai masing-masing slider secara individual.  Untuk suara realistis, saya sarankan Anda mencoba konfigurasi yang ditunjukkan pada gambar di atas. <br><br>  Salah satu synthesizer pertama yang menggunakan sintesis aditif adalah Teleharmonium dan beratnya 200 ton!  Berat dan ukurannya yang luar biasa, kemungkinan besar, menjadi alasan ketidakjelasannya.  Organ Hammond yang lebih sukses menggunakan roda nada yang serupa, tetapi jauh lebih kecil.  Diciptakan pada tahun 1935, masih banyak dikenal sebagai instrumen populer di era rock progresif. <br><br><img src="https://habrastorage.org/webt/tb/nj/tn/tbnjtngmdjzwb6ddutkpmumkbqy.jpeg"><br><br>  Roda nada adalah disk berputar dengan rongga kecil di sepanjang tepi dan pickup yang terletak di dekat tepi.  Organ Hammond memiliki satu set roda nada yang dapat berputar dengan kecepatan yang berbeda.  Cara yang agak tidak biasa untuk menghasilkan suara lebih elektromekanis daripada elektronik. <br><br>  Untuk menghasilkan spektrum suara yang lebih realistis, ada beberapa teknik lagi: modulasi frekuensi (Frequency Modulation atau FM) dan modulasi lebar pulsa (Pulse Width Modulation atau PWM), kedua teknik tersebut tersedia dalam AudioKit di kelas <code>AKFMOscillator</code> dan <code>AKPWMOscillator</code> .  Saya sarankan Anda mencoba keduanya, ganti mereka bukan <code>AKOscillator</code> , yang kami gunakan sebelumnya. <br><br><h1>  Polifoni </h1><br>  Pada tahun 1970-an, perpindahan dimulai dari synthesizer modular, yang terdiri dari osilator dan filter amplop terpisah, hingga yang mikroprosesor.  Alih-alih menggunakan sirkuit analog, suara mulai dihasilkan dalam format digital.  Ini membuat synthesizer lebih murah dan lebih kompak, dan synthesizer dari merek seperti Yamaha sangat populer. <br><br><img src="https://habrastorage.org/webt/xi/2y/uc/xi2yucsslswbjqknyj0b_8cgtcw.jpeg"><br><br>  Semua taman bermain kami terbatas untuk memainkan satu not pada satu waktu.  Banyak instrumen yang mampu memainkan lebih dari satu not pada satu waktu, mereka disebut <b>polifonik</b> .  Instrumen yang dapat memainkan hanya satu not disebut <b>monofonik</b> . <br><br>  Untuk mendapatkan suara polifonik, Anda dapat membuat beberapa osilator dan mengirimkannya ke mixer, tetapi di AudioKit ada cara yang lebih cocok untuk ini. <br><br>  Buat halaman baru di taman bermain dan beri nama Polifoni.  Ganti kode yang dihasilkan dengan yang berikut ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitUI <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport let bank = AKOscillatorBank() AudioKit.output = bank try AudioKit.start()</code> </pre> <br>  Di sini kami menciptakan bank osilator <code>AKOscillatorBank</code> .  Jika Anda pergi ke deklarasi kelas, Anda dapat menemukan bahwa itu adalah pewaris <code>AKPolyphonicNode</code> , yang, pada gilirannya, adalah pewaris <code>AKNode</code> sudah diketahui oleh kami, dan juga mengimplementasikan protokol <code>AKPolyphonic</code> . <br><br>  Akibatnya, bank osilator adalah simpul AudioKit yang sama seperti yang kami ulas sebelumnya.  Keluarannya dapat dikirim ke mixer, amplop, atau filter dan efek lainnya.  Protokol <code>AKPolyphonic</code> menjelaskan cara memainkan not pada not polifonik, mari kita pertimbangkan lebih detail. <br><br>  Untuk menguji osilator kami, kami membutuhkan cara untuk memainkan beberapa catatan sekaligus.  Ini sama sekali tidak sulit! <br><br>  Tambahkan kode berikut ke daftar putar dan pastikan Live View terbuka: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKKeyboardDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> keyboard = <span class="hljs-type"><span class="hljs-type">AKKeyboardView</span></span>(width: <span class="hljs-number"><span class="hljs-number">440</span></span>, height: <span class="hljs-number"><span class="hljs-number">100</span></span>) addView(keyboard) } } <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.liveView = <span class="hljs-type"><span class="hljs-type">LiveView</span></span>() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Saat taman bermain dikompilasi, Anda akan melihat yang berikut: <br><br><img src="https://habrastorage.org/webt/c4/jc/ra/c4jcramxnalsdi-ksf1nfq5zm80.png"><br><br>  Keren ya  Keyboard musik tepat di taman bermain! <br><br>  <code>AKKeyboardView</code> adalah utilitas lain dari AudioKit yang membuatnya mudah untuk mengeksplorasi kemungkinan kerangka kerja.  Tekan tombol dan Anda akan menemukan bahwa mereka tidak mengeluarkan suara. <br><br>  Perbarui <code>setUp</code> <code>PlaygroundView</code> Anda dengan yang berikut ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> keyboard = <span class="hljs-type"><span class="hljs-type">AKKeyboardView</span></span>(width: <span class="hljs-number"><span class="hljs-number">440</span></span>, height: <span class="hljs-number"><span class="hljs-number">100</span></span>) keyboard.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addView(keyboard)</code> </pre> <br>  Ini akan menjadikan <code>PlaygroundView</code> kami sebagai delegasi keyboard dan memungkinkan Anda untuk menanggapi penekanan tombol. <br><br>  Perbarui deklarasi kelas sebagai berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LiveView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKLiveViewController</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AKKeyboardDelegate</span></span></span></span></code> </pre> <br><br>  Tambahkan juga beberapa metode setelah <code>setUp</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noteOn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(note: MIDINoteNumber)</span></span></span></span> { bank.play(noteNumber: note, velocity: <span class="hljs-number"><span class="hljs-number">80</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">noteOff</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(note: MIDINoteNumber)</span></span></span></span> { bank.stop(noteNumber: note) }</code> </pre> <br>  Setiap kali Anda menekan tombol, metode <code>noteOn</code> , yang dilakukannya hanyalah memberi tahu oscillator untuk mulai memainkan note tersebut, masing-masing, dalam metode <code>noteOff</code> , <code>noteOff</code> tersebut berhenti dimainkan. <br><br>  Pegang mouse dan geser tombolnya, Anda akan mendengar crescendo yang indah (istilah musikal untuk peningkatan kekuatan suara secara bertahap).  Bank osilator sudah mengandung efek ADSR bawaan, sebagai hasil dari pelemahan satu not yang dicampur dengan serangan berikutnya dan terdengar cukup bagus. <br><br>  Anda mungkin telah memperhatikan bahwa catatan yang memberi kami kunci tidak datang dalam bentuk frekuensi.  Mereka dinyatakan sebagai <code>MIDINoteNumber</code> .  Jika Anda membuka iklan jenis ini, Anda akan melihat yang berikut: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">MIDINoteNumber</span></span> = <span class="hljs-type"><span class="hljs-type">Int</span></span></code> </pre> <br>  MIDI adalah singkatan dari Musical Instrument Digital Interface.  Ini adalah format luas untuk interaksi alat musik satu sama lain.  Catatan nomor sesuai dengan catatan pada keyboard musik standar.  Parameter kedua - Velocity (velocity) ini sesuai dengan gaya tumbukan pada kunci.  Semakin rendah nilainya, semakin lembut sentuhan pada tombol, semakin tenang bunyi akhir. <br><br>  Pada akhirnya, Anda perlu mengaktifkan mode polifonik pada tombol.  Tambahkan kode berikut ke metode <code>setUp</code> : <br><br><pre> <code class="swift hljs">keyboard.polyphonicMode = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Sekarang Anda dapat memainkan beberapa catatan sekaligus, seperti yang ditunjukkan pada gambar: <br><br><img src="https://habrastorage.org/webt/ji/vq/_x/jivq_xdx2rewvc4prnyjtu4b2p8.png"><br><br>  Ngomong-ngomong, ini ada di C mayor :) <br><br>  AudioKit memulai ceritanya sejak lama.  Hari ini ia menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Soundpipe</a> dan kode dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Csound</a> (proyek MIT yang diluncurkan pada 1985).  Anehnya, kode yang sekarang kita luncurkan di taman bermain dan ditambahkan ke iPhone ditulis hampir 30 tahun yang lalu. <br><br><h1>  Sampling </h1><br>  Teknik-teknik sintesis suara yang kami eksplorasi sebelumnya sedang mencoba untuk menciptakan kembali suara realistis menggunakan blok-blok dasar sederhana: osilator, filter, dan mixer.  Pada awal tahun 1970-an, pengembangan kapasitas komputer menyebabkan munculnya pendekatan baru - pengambilan sampel suara, yang tujuannya adalah untuk membuat salinan suara digital. <br><br>  Sampling adalah teknologi yang cukup sederhana mirip dengan fotografi digital.  Selama pengambilan sampel secara berkala, amplitudo gelombang suara direkam: <br><br><img src="https://habrastorage.org/webt/o4/a_/uu/o4a_uur6ow0lpjkukkaappxx25a.png"><br><br>  Dua parameter memengaruhi seberapa akurat suara direkam: <br><br><ul><li>  <b>Kedalaman bit</b> : atau kedalaman bit, jumlah level volume individual yang dapat dimainkan sampler <br></li><li>  <b>Sample rate</b> : atau sample rate, menunjukkan seberapa sering pengukuran amplitudo diambil.  Diukur dalam hertz. <br></li></ul><br>  Mari jelajahi properti ini di taman bermain baru.  Buat halaman baru dan beri nama "Sampel".  Ganti kode yang dihasilkan dengan yang berikut ini: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKitPlaygrounds <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AudioKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PlaygroundSupport let file = try AKAudioFile(readFileName: "climax-disco-part2.wav", baseDir: .resources) let player = try AKAudioPlayer(file: file) player.looping = true</code> </pre> <br>  Kode di atas memuat sampel, membuat pemutar audio dan menempatkannya pada pemutaran tanpa akhir. <br><br>  Arsip dengan file WAV untuk tutorial ini tersedia di <a href="">sini</a> .  Unduh dan unzip ke folder Resources di taman bermain Anda. <br><br>  Kemudian tambahkan kode berikut di akhir taman bermain: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = player <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.start() player.play() <span class="hljs-type"><span class="hljs-type">PlaygroundPage</span></span>.current.needsIndefiniteExecution = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Ini akan menghubungkan pemutar audio Anda dengan AudioKit, Anda hanya perlu menaikkan volume dan menikmati! <br><br>        ,         . <br><br> MP3-,    ,      ,      .                : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bitcrusher = <span class="hljs-type"><span class="hljs-type">AKBitCrusher</span></span>(player) bitcrusher.bitDepth = <span class="hljs-number"><span class="hljs-number">16</span></span> bitcrusher.sampleRate = <span class="hljs-number"><span class="hljs-number">40000</span></span></code> </pre> <br>      AudioKit: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = bitcrusher</code> </pre> <br>    .    ,      . <br><br> <code>AKBitCrusher</code> —   AudioKit,       . ,     ,       ZX Spectrum  BBC Micro.            ,  . <br><br>           ,     (. delay).     ,       <code>AKBitCrusher</code> .    : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> delay = <span class="hljs-type"><span class="hljs-type">AKDelay</span></span>(player) delay.time = <span class="hljs-number"><span class="hljs-number">0.1</span></span> delay.dryWetMix = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>      0.1       .  <code>dryWetMix</code>          .     1 ,          . <br><br>   : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> leftPan = <span class="hljs-type"><span class="hljs-type">AKPanner</span></span>(player, pan: -<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rightPan = <span class="hljs-type"><span class="hljs-type">AKPanner</span></span>(delay, pan: <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br> <code>AKPanner</code>     ,   - .             . <br><br>          AudioKit.  ,   <code>AKBitCrusher</code>  AudioKit   : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mix = <span class="hljs-type"><span class="hljs-type">AKMixer</span></span>(leftPan, rightPan) <span class="hljs-type"><span class="hljs-type">AudioKit</span></span>.output = mix</code> </pre> <br>  ,    ,         . <br><br><img src="https://habrastorage.org/webt/i0/6x/ha/i06xhaf2i0gnjeuebj3xqbdc3iw.png"><br><br><h1>  Apa selanjutnya </h1><br>          AudioKit.    , -, ,  ,      .   ,      ,     . <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440226/">https://habr.com/ru/post/id440226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440214/index.html">Spring dan JDK 8: Apakah Anda masih menggunakan @Param dan nama / nilai dalam anotasi Spring MVC? Maka artikel itu untuk Anda</a></li>
<li><a href="../id440216/index.html">Bagaimana saya mengajar Zabbix untuk mengawasi simpul saya dan melaporkan masalah</a></li>
<li><a href="../id440218/index.html">Serangan DoS yang tidak dapat ditutup: pengadaan memiliki atmosfernya sendiri</a></li>
<li><a href="../id440220/index.html">Sindrom penipu tidak hanya berbahaya, tetapi juga bermanfaat</a></li>
<li><a href="../id440222/index.html">Modul Pengintai Ultrasonik Bawah Air</a></li>
<li><a href="../id440230/index.html">Negara Duma menunda pembahasan RUU tentang agregator berita</a></li>
<li><a href="../id440232/index.html">Bill pada "kerja berkelanjutan" Runet - apa yang harus dilakukan sebelum pembacaan kedua?</a></li>
<li><a href="../id440234/index.html">Julia dan segerombolan partikel</a></li>
<li><a href="../id440236/index.html">Steroid karier. Algoritma dasar</a></li>
<li><a href="../id440238/index.html">Bagaimana manajer produk dapat merusak rilis di segmen terakhir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>