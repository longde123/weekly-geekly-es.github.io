<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👦 🗑️ ✳️ En bref, fait la couleur blockbuster centenaire 👈🏼 👸🏿 👩‍👧‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Synopsis 

 La coloration des films avant cette année a coûté des centaines de milliers de dollars, a nécessité la participation d'une masse de spécia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>En bref, fait la couleur blockbuster centenaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481710/"><h3>  Synopsis </h3><p>  La coloration des films avant cette année a coûté des centaines de milliers de dollars, a nécessité la participation d'une masse de spécialistes et a pris beaucoup de temps.  Maintenant, tout a changé.  Le développement du projet Deoldify a atteint un tel état que les résultats de son travail peuvent être confortablement observés en relaxant le visage.  À partir du texte, vous découvrirez les détails d'une expérience réussie de colorisation d'un film sans frais, réalisée en quelques semaines par une seule personne. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/416/ca1/b31/416ca1b3173dcd87e25f7878ab42d395.png" alt="retourner l'image"><br><a name="habracut"></a><br><br><h3>  10 commencer </h3><p>  Cette histoire a commencé comme toute autre histoire similaire.  L'algorithme de recommandation YouTube extravagant a produit quelque chose qui a attiré mon attention et qui a eu les conséquences les plus inattendues.  L'avant-dernière fois, cela a conduit à rester sur le canal des armes oubliées.  Il est difficile de comprendre pourquoi on m'a donné une telle offre à l'époque, mais c'était probablement comme ceci: <br><br>  1. user_id regarde des vidéos sur RDR2. <br>  2. Il y a un pistolet volcanique dans RDR2. <br>  3. Sur le canal des armes oubliées, il y a une revue du pistolet volcanique. <br>  4. Les personnes intéressées par RDR2 veulent souvent en savoir plus sur le pistolet volcanique. <br>  5. Mille démons, mais des armes oubliées viendront à lui! <br><br>  Moins de deux jours plus tard, j'ai déjà étudié la littérature partisane sur la fabrication de divers types d'armes à feu, regardé à travers des photographies de karamultuk de pays tiers et examiné à quel point il était facile de couper le tronc d'une maison.  Déchiré entre les options: acheter un semi-jouet et le mettre dans le bon état ou assembler un ensemble de pièces dans une quincaillerie.  Finalement, la tombola du magasin a gagné pour des raisons légales.  Heureusement, il n'y a pas eu de réponse à la question «pourquoi», et les actions actives dans ce sens ont échoué. <br><br></p><br><h3>  Et envelopper .... </h3><p>  Cette fois, il n'y avait aucune raison évidente de jeter un œil au Charlie Chaplin de couleur.  Les voies de réponse du réseau neuronal sont mystérieuses.  La vue observée a provoqué d'abord de la confusion et des questions, puis une violente salivation mentale.  Contrairement aux tentatives auparavant déplorables de coloration automatique, cette séquence vidéo a été perçue comme un spectacle tout à fait crédible.  Creuser, bien sûr, c'était quoi, mais: <br><br>  a.  il n'y avait pas de contrariété de bizarrerie <br>  b.  il y avait vraiment un sentiment de la profondeur de l'image, supprimant la complexité de la perception des images n / b par le cerveau moderne <br><br>  La curiosité a traîné, étudiant déjà un projet sur github.  Après le test de la version cloud sur quelques photos, après avoir regardé les vidéos, j'ai clairement commencé à voir un peu de désir en moi.  La possibilité de remettre des preuves réelles du passé dans le contexte médiatique actuel, sans investir des centaines de milliers d'argent, hmm, il y a quelque chose d'excitant à ce sujet, quelque chose de tout à fait suffisant pour revigorer l'esprit de refroidissement. <br><br>  «Essayons», cette phrase sacrée, qui se prononce timidement, mais quelque part dans les profondeurs de l'âme, il y a déjà un noyau de compréhension qu'une bonne histoire commence maintenant. <br><br></p><br><h3>  Observation </h3><p>  Eh bien, supposons que le moteur, l'action.  Nous prenons la première séquence vidéo pendant 4 minutes.  Quoi en premier?  Supprimez les vils tremblements de l'appareil photo et du film, qui sont toujours dans un tel matériau par défaut.  Il recherche les options disponibles avec une large gamme de contrôle et en dehors des éditeurs vidéo.  Comme il était nécessaire d'utiliser toute une chaîne d'outils logiciels différents, l'utilisation de tout progiciel de montage vidéo standard a immédiatement disparu.  Seulement des images uniques avec des fichiers, uniquement du hardcore.  Et, bien sûr, il est nécessaire non seulement de se stabiliser d'une manière ou d'une autre, mais de se stabiliser cinématographiquement, en imitant les mouvements limités et fluides de la caméra.  Au moins une certaine confiance a été causée par un seul module pour python.  Eh bien, ça veut dire que le code ira tout de suite. <br><br>  Stabilisé.  Un peu long, d'accord.  Wow, cool, il s'est avéré, oui, ce dont vous avez besoin, bien sûr, vous devez terminer avec un fichier, mais sinon pourquoi sommes-nous ici?  Plus d'auto-floraison.  On le met, on le met, on en met un autre, encore un conflit, on le met toujours, en haut, sur le côté, on n'abandonne pas, peut-être le manuel lu, semble-t-il, il est allé, non, supprimer dir, encore une fois, oh, c'est tout, bon, enfin.  Lancer.  Merde, quelque chose de très long.  Mais les couleurs, les couleurs, wow, vous avez raison, mais dans tout cela, cependant, cela a du sens et cela vaut la peine de continuer. <br><br>  Et maintenant  Probablement, en 2019, l'interpolation d'images n'est pas quelque chose d'exceptionnel, et vous pouvez creuser un projet pour une utilisation professionnelle conditionnelle.  Et pourtant oui, succès encore, un tel projet est disponible gratuitement.  Nous le mettons, le mettons ... Lancement.  Merde, quelque chose n'est pas encore rapide.  Mais comment en douceur, comment en douceur les cadres se remplacent, un miracle, comme si les 24 cadres habituels. <br><br>  Alors, c'est ce qui sort, tout a fonctionné?  L'ensemble du convoyeur ici est prêt à l'emploi, il vous suffit de jeter quelque chose dessus et d'obtenir le résultat? <br><br>  :: résolu :: <br><br></p><br><h3>  Difficultés temporaires </h3><p>  À chaque étape du traitement, le temps passé a été enregistré.  J'extrapole pendant 90 minutes: des attaques de découragement, pour dire le moins.  J'ai même vérifié les mesures et les calculs plusieurs fois, car les chiffres obtenus ont transformé l'idée originale de «juste-rapide-facile-amusant» en «juste-longtemps-facile-triste».  Bien que plus tard, deux autres mots dans cette formule changeront pour le pire, mais il y avait déjà quelque chose à penser sérieusement. <br><br>  Ainsi, le film sélectionné prendra 4 heures de stabilisation, 420 heures de floraison et 30 heures d'interpolation d'images.  Ouais ... Eh bien, merci, Charlie. <br><br>  Cho de faire quelque chose?  Le Mac mini 2012 à huit cœurs est la seule chose que vous pouvez exploiter.  Devant mes yeux se tenait une vidéo avec Linux fonctionnant sur PS4.  Les dents grinçaient dans une colère impuissante face à l'impossibilité de faire reculer les mises à jour du firmware, qui ont été installées avec la fière conviction que le jailbreak n'était pas nécessaire.  ¿Comment tous ces projets python fonctionneraient-ils là-bas?  ¿Y aurait-il accès aux calculs sur le GPU?  Je n'étais pas destiné à étudier ces questions. <br><br>  Il restait soit à se rendre, soit à se lancer humblement et à attendre.  La remise n'est pas une option.  Attendez quelques semaines aussi.  Mais il n'y avait pas d'autre option. <br><br></p><br><h3>  Stabilisez-le </h3><br><div class="spoiler">  <b class="spoiler_title">À propos de l'outil de stabilisation</b> <div class="spoiler_text">  Lien vers le projet de stabilisation vidéo: <a href="https://pypi.org/project/vidstab/" rel="nofollow">pypi.org/project/vidstab</a> <br>  Description: le projet utilise les fonctions opencv pour déterminer le décalage du cadre par rapport à la valeur attendue, calcule la compensation de décalage nécessaire et effectue un recadrage pour masquer les bords de saut, créant ainsi une image en mouvement fluide.  En raison de la possibilité de choisir une méthode de recherche des différences entre les trames, cela permet d'obtenir un degré de stabilisation / rapport de perte de pixels différent.  Il a une fonctionnalité de débogage très utile pour afficher graphiquement les valeurs d'entrée et calculées. <br></div></div><br><br><p>  Enfin, la dure réalité commence à pénétrer dans un monde confortable.  En plus des problèmes matériels, des problèmes logiciels apparaissent.  Ce qui a fonctionné dans un test par défaut sur un clip vidéo de test commence à échouer ici et là dans un film à part entière.  (De façon inattendue, hein?) <br><br>  Je dois avouer qu’il est temps d’échanger des pantoufles contre des bottes en caoutchouc, et il est préférable de retrousser les manches, car je ne le voudrais pas, mais l’immersion dans l’intérieur du module ne peut pas être évitée. <br><br>  La principale difficulté est le changement de scènes.  Le projet est conçu pour gérer uniquement de courts fragments dans lesquels le contexte ne change pas.  Après avoir étudié ce qui se passe et comment cela se produit, il y a une place pour un patch approximatif, dont le sens est de désactiver la stabilisation aux décalages de trame élevés.  Sans ce patch, l'effet négatif s'est manifesté comme une exploration fluide de la scène suivante, quelque part du bord vers un champ noir. <br><br>  Au lieu de lancer le script terminé, un script est apparu à la fin, dont l'essence réside dans le recadrage du cadre et la définition des valeurs optimales.  Le code donné n'a aucune valeur, car il répète essentiellement l'exemple de l'auteur du module, mais vous devez diluer le texte avec quelque chose. </p><br><img src="https://habrastorage.org/webt/ap/ns/jx/apnsjxec9h2wwwbhueowdujn2jg.png" alt="retourner l'image"><br><br><p>  Une découverte intéressante en était exactement une: pour quelques scènes, le recadrage a été effectué de façon linéaire, ce qui crée un effet d'approximation, mais masque en fait des sauts de cadre complètement sauvages dans la scène.  Si vous configurez immédiatement un recadrage étroit, alors beaucoup d'informations sont perdues, dans la version finale, le spectateur ne remarque rien de suspect, car le «zoom avant» est combiné avec un rythme dramatique. <br><br></p><br><h3>  Cher long </h3><br><div class="spoiler">  <b class="spoiler_title">À propos de l'outil de floraison</b> <div class="spoiler_text">  Lien vers le projet: <a href="https://github.com/jantic/DeOldify" rel="nofollow">github.com/jantic/DeOldify</a> <br>  Description: Le projet réalise des images couleur en noir et blanc.  Il a trois modes de fonctionnement: photographies, images d'art, vidéo.  Pour chaque mode, vous devez télécharger l'état de votre modèle.  Il est possible de former le modèle par l'utilisateur.  L'auteur du projet a utilisé une approche non standard pour l'architecture du réseau neuronal, grâce à laquelle un effet stable a été obtenu, différent des autres implémentations. <br></div></div><br><br><img src="https://habrastorage.org/webt/5e/ye/ab/5eyeaban4k3pf7jquznyttxlxfc.jpeg" alt="retourner l'image"><br><br><p>  L'ordinateur est emporté dans la cuisine, car le Mac Mini, généralement silencieux, sous charge, fait constamment du bruit.  Peu de propriétaires de ces gadgets parviennent à entendre ce son, car ce qu'ils considèrent comme le bruit des ventilateurs (qui peut être entendu à une charge grave) n'est que la moitié de la vitesse du possible.  La floraison commence. <br><br>  Les fichiers du projet ont dû être patchés un peu afin d'apprendre à travailler avec mes données entrantes, et les mettre dans le bon format, l'ordre et la vue.  Bien que nous devions écrire un petit script pour l'exécuter, nous supposons que le projet fonctionne sans fichier.  Des questions ne peuvent se poser que sur le paramètre render_factor. <br><br>  L'effet sur le résultat est le suivant: <br>  0-7 bouillie complète <br>  8-12 couleurs sursaturées, coloration rugueuse (pour les scènes mal reconnues, cela donne au moins un certain effet) <br>  13-18 est ainsi pour vous-même, pour les scènes non reconnues, cela vaut la peine d'essayer cette gamme en premier <br>  19-20 pour des expériences (nous effectuerons des goulottes de barres à partir d'écorce de bouleau) <br>  21 est le nombre optimal <br>  &gt; = 22 la saturation commence à se perdre, le sens de l'usage diminue <br><br>  Plus ce nombre est petit, plus la consommation de mémoire est faible et plus le calcul est rapide. </p><br><img src="https://habrastorage.org/webt/y9/w9/13/y9w913b74okrbum8evonvds_6rq.jpeg" alt="retourner l'image"><br><br><p>  Ouais  Le lendemain, des souvenirs surgissent dans ma tête que le processeur i7 a le mode turbo, et même d'une manière ou d'une autre son fonctionnement a été vérifié.  Des informations sont trouvées sur la façon de l'activer sous Windows et les utilitaires de test commencent à afficher des valeurs de fréquence centrale plus vigoureuses.  La température du processeur passe de 85 à 99 ° C.  Une casserole d'eau est placée sur le dessus pour éliminer la chaleur.  De dessous le refroidisseur souffle de l'ordinateur portable.  Si plus de 5% des images étaient traitées par jour auparavant, alors en mode accéléré, cette valeur devenait 7%.  Au moins un peu de joie. </p><br><img src="https://habrastorage.org/webt/pg/rg/d-/pgrgd-ks0djgnibtbl7sguhmgc0.jpeg" alt="retourner l'image"><br><br><h3>  L'aventure nous attend </h3><p>  Tout programme peut tomber.  Bien sûr, la floraison est tombée.  Eh bien tombé, redémarrez.  Et puis est venu "oh".  Parfois, les versions pour les expériences tombent dans la prod, vous savez, donc quand j'ai patché les modules du projet, j'ai été distrait et j'ai oublié de regarder toute la chaîne et la signification de chaque instruction et j'ai considéré que le patch était terminé.  Le projet supprime initialement le dossier temporaire, en crée un nouveau, y ajoute les images extraites de la vidéo ... en général, vous avez déjà deviné que le dossier avec les résultats de la journée m'avait été soufflé. <br><br>  Ensuite, il y a eu R.saver, pendant plusieurs heures au lieu de fleurir, nous scannons le disque, et c'est un inconvénient par rapport au temps de rendu.  Nous passons à un autre ordinateur avec le enregistré.  De plus, bien sûr, il s'avère que, puisque le problème n'a pas été remarqué immédiatement, un tas de fichiers n'ont pas le contenu complet.  Nous devons écrire un vérificateur afin, d'une part, d'estimer les pertes, et d'autre part, de compiler une liste de cadres pour la re-floraison. <br><br>  Smaku ajoute que la floraison supprime les images d'origine, et il est normal de ne pas se confondre lors du redémarrage de ce qui doit être traité et de ce qui ne l'est pas.  Il n'est pas normal d'avoir un dossier d'images stabilisées, pas «bien, qu'est-ce qui ne va pas» et «si cela, vous pouvez toujours vous stabiliser à nouveau».  Eh bien, oui, tout est possible en passant du temps. <br><br></p><br><h3>  Affaires, inquiétudes </h3><p>  D'accord, il semblait que la vie s'était en quelque sorte améliorée, le minicut bourdonnait doucement, il était déjà possible de planifier d'autres travaux et d'écrire des scripts pour le post-traitement. <br><br>  L'observation de la matière fleurie, outre la joie, a également causé des ennuis.  Il y avait deux choses désagréables.  Premièrement, la tonalité de couleur galopait entre les images, probablement en raison de la luminosité inégale de la source. </p><br><img src="https://habrastorage.org/webt/qo/6q/zv/qo6qzv4wd4cyxoobjo1cj3k2qes.jpeg" alt="retourner l'image"><br><br><p>  Deuxièmement, un tas de cadres en double est apparu.  Il semblerait pourquoi, mais, apparemment, les lecteurs vidéo domestiques ne sont pas devenus fous avec quelque chose de moins de 24 images / s. <br><br>  Il y a des problèmes et ils doivent être résolus d'une manière ou d'une autre.  Il devient évident que le flux d'images doit être décomposé en scènes.  Pour régler la tonalité / luminosité, vous devez avoir des bordures.  Et pour ne pas supprimer les textes avec des cadres en double, il est nécessaire de diviser les cadres en texte et non-texte. <br><br>  De longues expériences commencent à déterminer la similitude du personnel.  Eh bien bonjour, qu'est-ce que tu es? <br>  Ignorons les lancers de cœur (ils seront visibles par le code), le nombre de versions, les méthodes essayées (visibles par le nombre de fonctions auxiliaires). </p><br><img src="https://habrastorage.org/webt/x7/pb/pu/x7pbpuvt_oatfny8umix-02hxma.png" alt="retourner l'image"><br><br><p>  Je vais essayer d'expliquer la version finale. <br></p><br><img src="https://habrastorage.org/webt/zn/8r/k7/zn8rk78v7uf_xyngtgq6echp7i0.png" alt="retourner l'image"><br><br><p>  Nous chargeons deux images séquentiellement.  Nous faisons un léger flou, le diable sait pourquoi, mais si c'est le cas, alors les expériences ont montré une amélioration des résultats (peut-être que l'influence du bruit est éliminée).  Trouvez les points clés dans les cadres et comparez-les. <br></p><br><img src="https://habrastorage.org/webt/ul/xj/ag/ulxjageumfoo9kagwzwoxu54o0m.png" alt="retourner l'image"><br><br><p>  Explication pour ceux qui ne connaissent pas l'ouverture: <br><br>  Recherche de points clés (points-clés, kp) - mettant en évidence les caractéristiques qui restent inchangées lorsque l'image change.  Très grossier, mais simple, il peut être imaginé comme un tableau de micro-hachages. <br><br>  ORB est l'une des nombreuses méthodes de mise en évidence des points clés. <br><br>  des - descriptions, descriptions paramétriques des points clés. <br><br>  BFMatcher - raifort pour comparer les points clés en utilisant des.  Sa tâche consiste à sélectionner le même point dans deux matrices et à calculer la distance de départ de chaque point d'enroulement par rapport à sa position d'origine.  Désolé ma mine inglezh. <br><br>  Il s'avère que plus la distance totale du déplacement des points est petite, plus les cadres sont identiques. <br></p><br><img src="https://habrastorage.org/webt/yd/uz/8e/yduz8ekpjcwpoaxnwdy7r9cb5pc.png" alt="retourner l'image"><br><br><p>  Si le score est supérieur au nombre magique, alors il vaut la peine d'effectuer des vérifications supplémentaires, peut-être que c'est vraiment une scène différente?  Tout d'abord, vérifions s'il y a un cadre de deux textes, premièrement, nous avons besoin de cette fonctionnalité, et deuxièmement, si le type du cadre a changé (texte -&gt; not_text), alors la scène a définitivement changé.  Réduisez l'image couleur à monotone et envoyez la personne malsaine à la détection de texte (bien que is_text soit encore plus beau). <br></p><br><img src="https://habrastorage.org/webt/mi/c0/q1/mic0q1xnch-j8zww9jjac4niyvi.png" alt="retourner l'image"><br><br><p>  Si vous essayez de décrire l'essence, alors il y a une recherche de contours fermés, et s'il s'avère que nous avons de nombreux contours qui correspondent à nos attentes magiques, alors il est fort probable que ce soit du texte.  Comme vous pouvez le deviner, ce code a remplacé is_text, il peut être considéré comme réussi, bien qu'il y ait des échecs sur de très GRANDES lettres et des scènes comme des reflets sur l'eau noire.  Avec des mots, il sera difficile de transmettre tout le lancer entre les différentes options «simple, mais ça marche» et «ça marche définitivement, mais exagéré».  Une sorte de redneck d'ingénierie ne nous permettait pas d'aller loin de la solution «bandes noires sur tous les bords = texte». <br></p><br><img src="https://habrastorage.org/webt/qc/xp/xa/qcxpxaou5vzro07nqoosw3ggexa.png" alt="retourner l'image"><br><br><p>  Si le texte ne sent pas ici, alors nous essayons de comparer les histogrammes en noir et blanc, si les soupçons s'intensifient, puis nous comparons ceux en couleur, si c'est directement très suspect, alors nous le comparons dans un cadre, donc c'est sûr. <br></p><br><img src="https://habrastorage.org/webt/jh/1z/i5/jh1zi5zkbahzgo3nnqf0vhmgaii.png" alt="retourner l'image"><br><br><p>  Ici, des actions purement pratiques: si le script voulait faire une courte scène, alors il lui semblait probablement préférable d'ajouter cette scène à la précédente.  Et s'il y a plus de 90 images dans la scène, cela augmentera le temps de traitement ultérieur de la scène. <br><br>  Trouver quelque chose pour compenser le ton n'a pas été facile.  Un seul article scientifique et projet connexe sont évidemment google. <br><br></p><div class="spoiler">  <b class="spoiler_title">Outil pro pour stabiliser la tonalité des couleurs</b> <div class="spoiler_text">  Lien vers le projet: <a href="https://github.com/Al-th/MVA_Project_TonalStabilization" rel="nofollow">github.com/Al-th/MVA_Project_TonalStabilization</a> <br>  Lien vers un article décrivant l'essence mathématique: <a href="https://www.cse.huji.ac.il/labs/cglab/projects/tonestab/" rel="nofollow">www.cse.huji.ac.il/labs/cglab/projects/tonestab</a> <br>  Description: Le projet examine d'abord les images de la vidéo, en calculant les différences locales d'images dues au hardcore matan.  Dans la deuxième passe, ces différences sont réduites à la valeur «correcte» calculée. <br></div></div><br><br>  Il y a un petit problème.  Voici Matlab.  Pour une raison quelconque, je ne voulais vraiment pas mettre immédiatement ce monstre et me traîner vers GNU Octave.  Le code, bien sûr, n'était pas complètement compatible, je devais comprendre comment lire et écrire des images, satisfaire les attentes de ces fonctions qui fonctionnent différemment dans Octave, en général, le langage n'est pas entièrement conforme au courant dominant, plus j'ai dû me plonger dans différentes nuances Matanov, et c'est un jour perdu. <br><br>  Quand cela a finalement fonctionné, la vitesse de traitement est pour le moins contrariée.  20 secondes par image.  Même sur l'ancien processeur, c'est exagéré.  Bon, voyons comment va Matlab.  "Choisissez un forfait."  Eh, mais xs de quoi ai-je besoin, eh bien, allons avec DSP.  Et lancez-vous!  "Le package de traitement d'image n'est pas installé dans votre version."  Bon, ok, j'ai encore des adresses gratuites pour l'inscription. <br><br>  Enfin ça a commencé et même travaillé beaucoup plus vite qu'en Octave, mais encore trop long, comparable à la floraison, cette fois, et d'autre part, les résultats des corrections reçues n'ont pas répondu à mes attentes. <br><br><br><p>  Si vous voulez faire quelque chose, faites-le vous-même.  Je n'ai pas envie de le faire moi-même, mais je dois le faire.  Googler avec la dépendance a finalement aidé à trouver au moins quelque chose dans l'opencv qui pourrait m'aider.  Un ensemble de classes a été trouvé pour l'assemblage de photos panoramiques, parmi lesquelles un mécanisme pour corriger les différences de lumière et de ton.  Pas tout à fait ce dont vous avez besoin, mais au moins c'est une option. <br><br>  Après de longues expériences avec le seul (oui!) Exemple d'utilisation de cette chose, j'ai finalement obtenu un code utile. </p><br><img src="https://habrastorage.org/webt/b8/gz/_2/b8gz_2levi7fzjupi8kebu8h6_c.png" alt="retourner l'image"><br><br><p>  Toute la magie était d'établir expérimentalement une classe qui convenait à mes besoins et de déterminer le format du masque.  Ensuite, c'est évident: alimentez le compensateur avec des images pour calculer la valeur moyenne de l'exposition totale et le niveau de chaque canal de couleur, puis re-palmez la source pour la conversion. <br><br>  Le premier résultat ne me convenait plus.   ,      . ,      ,    .   -  .       ,            . <br><br>     . </p><br><img src="https://habrastorage.org/webt/pg/vw/rp/pgvwrpbnyh8vickr-csqhworfoa.png" alt="  "><br><br><p>        ,         .    «  ,   ».   ,    ,       ,        . <br><br>  ,      ,      ,    ,     .     small_wb  ,  run,       ,  ,   ,      - -  .    ,     .   ,      . <br><br>     .  ,        ,    ,    .    .  Presque. <br><br></p><br><p>       ,         ,     .  ,   -   . ,       .   ,      .   ,    ,   . <br><br> <a href="https://github.com/sniklaus/3d-ken-burns" rel="nofollow">github.com/sniklaus/3d-ken-burns</a> <br><br> ,  ,   .  Mais.         .      «».    «»,   ,         ,  .  Dommage. <br><br>     opencv. </p><br><img src="https://habrastorage.org/webt/rq/-e/xp/rq-exputfm0r6ja5f9mxf9-3tf8.png" alt="  "><br><br><p>    ,      .    ,    . <br><br></p><br><img src="https://habrastorage.org/webt/g5/5b/_a/g55b_awcdgwa6rwynzsyiiwt2ta.png" alt="  "><br><br><p>       , ,         ,  ,  ,   . </p><br><img src="https://habrastorage.org/webt/n-/ex/cx/n-excx9kqmpzwdjcwaq2za-tdra.png" alt="  "><br><br><br><h3>   </h3><p>      , ,    -,   .   ,    -.  ,  ,      .      ,     ,         ,      ,      .   -  .   :  .   ,  ,   ,         .    ,          ,      ,   ,    (,       ) mac mini      . <br><br>   ,   ,              ,          . <br><br>   .       ,  -  .      ,       ,        . <br><br></p><br><h3>     </h3><p>        ,     ,     . -  ,  .  ,    ,   .  ,   ,     ,       /    .  , «  ,   ». <br><br>      ,        ,        (,   ,   ?),      / .     ,  .     «».     ,       ,        2014.    «     ».  -  ,     .    ,    «»,   «  ?»,  -       . ? ?  ?       .  !   ! <br><br>             . ,     «»,      ? , . <br><br>    3 ,        .    -  .     ,         ,         . ,    .   «---»   - .         . <br><br></p><br><h3>  ,     </h3><p>    GPU-    .    .     ,           . <br><br> , ,  . .  .     ,       .   ,  ,       ,  720   400 .  ,  .       .   ,    Pentium 133 (   Cyrix 100,   ).  ,  . .   ,        ,      ,   .    ?       . ,   ,     . <br><br>  2  ,  ,      .  ,     ,   12 , . <br><br> ,     ,   ssd     .   , ,     -    ,       . <br><br>       ,             . !       ?   ,   -      GPU.   ,   ,           ,    «if APU available»,       APU ,       , ?  Non. </p><br><img src="https://habrastorage.org/webt/tm/5k/ad/tm5kadysj4m8f2vie7dmw9k8rxe.jpeg" alt="  "><br><br><p> Nous n'hésitons pas à overclocker et à obtenir un 1 GHz gratuit, un long choix de refroidisseur et son coût ont payé.  Nous avons mis un coloriste.  Nous commençons.  Boum!  CUDA manque de mémoire.  Cool, super, nous allons le découvrir le matin. <br><br>  Le matin, il n'y avait aucun souvenir.  Google a signalé que cette erreur signifie que la taille de la mémoire vidéo disponible est inférieure à celle nécessaire.  Je ne voulais vraiment pas y croire, car cela ne devrait pas être vrai.  Après tout, je ne pouvais pas me tromper, ayant acheté une version d'une carte vidéo avec une mémoire épurée, non je ne pouvais pas, mais je ne me trompe jamais. <br><br>  Les expériences ont commencé par le nettoyage forcé de la mémoire, en changeant les paramètres, l'espoir était donné par le fait que la chute ne se produisait pas immédiatement, que plusieurs images avaient le temps d'apparaître sur la sortie.  Il était possible de démarrer le redémarrage de la floraison dans un cycle, bien sûr, mais le temps de préparation pour le lancement était d'environ 2 minutes, et cela n'avait aucun sens. <br><br>  Soudain, le script de débogage a commencé à fonctionner correctement, et le traitement a volé, je n'ai aucune idée de ce que j'ai fait là-bas, j'ai décidé de ne rien toucher et de récupérer mes cadres de couleur déjà.  Les 60% restants des images se sont terminés après 5 heures.  À ce jour, le traitement sur une minicar ne commencerait qu'à se terminer, oh, pauvre minicar. <br><br></p><br><h3>  Commence toujours </h3><p>  Exécutez le script de recherche de scène et remplissez les répertoires.  Nous allons plus loin, vérifions si quelque chose ne va pas, nous le réparons.  En général, tout va bien.  Ensuite, vous devez nettoyer les images en double afin d'exclure une perte de temps lors de manipulations ultérieures.  Un hitch, comment être sûr que le script ne supprimera que le nécessaire et ne manquera de rien.  Si vous pensez logiquement, ajouter des images supplémentaires ne devrait pas être chaotique, mais devrait avoir une sorte d'algorithme.  Bien sûr, il ne faut pas y être attaché, mais il faut en tenir compte.  Nous faisons cela: copiez toutes les scènes sans images en double dans un autre dossier, puis comparez chaque dossier avec l'original, en utilisant la comparaison des répertoires du gestionnaire de fichiers.  Si le rythme répétitif dans les fichiers supprimés est observé visuellement, nous considérons que tout est normal.  Cela a fonctionné à première vue. <br><br>  Seulement une demi-heure et vous pouvez aller plus loin.  Nous commençons la compensation de tonalité.  Après quelques heures, nous essayons d'apprécier le résultat, mais la moitié de la joie.  Une petite partie des scènes est mal colorée.  Encore une petite partie des scènes de compensation de tonalité a mal tourné.  Si c'était possible avec le second, ou simplement prendre ce qui était avant la compensation, ou essayer d'égaliser le ton sans utiliser la balance des blancs.  Cela avec la re-floraison était d'autant plus difficile.  Certaines scènes se sont améliorées en diminuant le paramètre render_factor, les autres n'ont tout simplement pas cédé.  L'algorithme n'a tout simplement pas trouvé quelque chose de similaire dans le modèle entraîné et a produit des résultats étranges.  J'ai dû colorer chacune de ces scènes plusieurs fois avec un render_factor différent, puis choisir la meilleure image pour qu'elle ressemble au moins à la vérité.  Il est difficile de dire à quel point cette activité épuise le cerveau.  J'ai dû écrire des scripts qui collectent les options pour chaque image dans un dossier séparé, ce qui a augmenté la productivité et réduit le flux d'abus. <br><br></p><br><p>  Avant de continuer, vous devez couper des textes supplémentaires et réorganiser plusieurs scènes à certains endroits.  Il a fallu des moyens simples pour le montage vidéo.  Nous chargeons la structure des dossiers avec des cadres directement dans l'éditeur actuel. </p><br><img src="https://habrastorage.org/webt/yq/p7/rd/yqp7rdlmtk5zica_wmwbzzpwi4m.png" alt="retourner l'image"><br><br><p>  Nous supprimons des scènes, les échangeons, déchargeons la structure mise à jour sur le disque dans un nouveau dossier. </p><br><img src="https://habrastorage.org/webt/jw/fd/sh/jwfdsh4xeluzh6ct-zvthc8nelq.png" alt="retourner l'image"><br><br><p>  Vous pouvez maintenant convertir 12 ips en 24 ips. <br><br></p><div class="spoiler">  <b class="spoiler_title">Outil de ralentissement vidéo</b> <div class="spoiler_text">  Lien vers le projet: <a href="https://github.com/avinashpaliwal/Super-SloMo" rel="nofollow">github.com/avinashpaliwal/Super-SloMo</a> <br>  Description: Le projet calcule les images intermédiaires à l'aide d'un modèle formé.  Vous pouvez télécharger des paramètres prêts à l'emploi.  Vous pouvez vous apprendre.  Avec le bon choix de données d'entraînement, le résultat est d'une beauté enchanteresse. <br></div></div><br><br>  Nous corrigeons le projet pour travailler avec des images individuelles, sinon cela fonctionne.  Nous commençons, regardons le résultat.  Avec «wow», un nouveau problème surgit, certaines scènes sont remplies d'artefacts, car pour obtenir 12 images sur 24, vous devez spécialement former le modèle. <br><br>  Il y a deux options.  Et vous n'aimerez pas tous les deux.  Supprimez manuellement les cadres défectueux ou suivez une formation sur le modèle.  Autrement dit, ou passez beaucoup de temps, ou passez un temps inconnu avec des résultats imprévisibles.  La clarté a prévalu. <br><br>  Eh bien, regardez plus de 200 000 images.  Quelle est la difficulté?  Le fait que vous ne pouvez pas supprimer tous les mauvais cadres.  Il est nécessaire d'éliminer exactement ceux qui frappent les yeux et de laisser ceux qui sont invisibles.  Autrement dit, essayez, répétez, force brute la bonne combinaison.  Quelque part dans la seconde moitié des trames, le réseau neuronal organique a également appris, et il est devenu intuitif à quels moments attendre les défauts, et quelles trames doivent être supprimées et lesquelles ne doivent pas être touchées.  Seulement 4 jours et nous avons une version fluide. <br><br>  Nous collectons le fichier vidéo.  Nous regardons.  Ça semble bien.  Mais quelque chose semble se bloquer.  Qu'est-ce que c'est?  Wow, wow, wow en double, mais comment, où, pourquoi?  Il devient clair que ce boomerang est parti du passé.  La stabilisation a également traité les images en double et saisi chacune d'elles séparément dans l'arc de mouvement, en ajoutant un décalage unique à chacune.  Et l'algorithme de recherche en double, raisonnablement considéré qu'il s'agit de trames différentes, puisqu'elles sont décalées, tout est logique. <br><br>  Super, super.  Mais ne revoyez pas tous les cadres sans essayer d'écrire au moins un peu de code? <br><p>  Les expériences ont commencé avec des algorithmes pour comparer des images similaires.  La difficulté était que la plupart d'entre eux vous permettent de signaler que les images sont complètement différentes ou relativement similaires.  Pour moi, des images vraiment différentes dans une scène étaient presque similaires, et il fallait capturer des images qui sont des copies offset.  Tous les algorithmes testés et éprouvés interféraient dans un seul tas, et les deux. <br><br>  Compare_ssim de skimage pourrait apporter certains avantages.  Je ne prétendrai pas me souvenir de ce que c'est, cela a au moins parfois donné les bons résultats et permis d'identifier immédiatement certains des doublons.  Je devais chercher le reste avec mes yeux.  Le deuxième jour, mon réseau neuronal naturel a été formé pour remarquer ce qui n'était pas visible.  À ce stade, j'étais déjà tourmenté par une déformation professionnelle: les images en noir et blanc qui ont attiré mon attention étaient perçues comme un travail incomplet, et toute contraction du contenu vidéo tiers a été entendue comme "des doublons à nouveau!" <br><br>  Mettre la prochaine version de la vidéo, regarder.  Il s'agit de comprendre que certaines scènes ont une saturation acide.  Et c'est encore un problème, car vous ne pouvez pas simplement prendre et réduire la saturation de toutes les scènes à la valeur générale, certaines d'entre elles, au contraire, ne sont pas très lumineuses. <br><br>  Le défi de saturation commence.  La modification de ce paramètre est facile, mais incroyablement difficile à mesurer correctement.  Cela était compréhensible en théorie, dans la pratique, cela n'a été que confirmé.  Toute manière naïve de comparer la saturation des images est apparue lors des tests sur des scènes lumineuses, mais leur fréquence était normale ou décolorée, mais leur fréquence était très élevée. <br><br>  À la fin de la journée, au moins d'une manière ou d'une autre, une solution de travail était née. </p><br><img src="https://habrastorage.org/webt/ik/yi/z5/ikyiz5dzdeoy_jh0gqj6ranw_v0.png" alt="retourner l'image"><br><br><p>  À la médiane de la propagation de la saturation des pixels, nous ajoutons l'écart type de la saturation, et nous obtenons la saturation maximale conditionnelle de l'image.  Ce n'est pas idéal, mais avec cette méthode de mesure, l'égalisation de la saturation a commencé à fonctionner.  Il ne restait plus qu'à substituer le polynôme <i>correction_value = f (valeur_mesurée)</i> .  Nous établissons la plaque sur les données de test avec nos mains «gelées» -&gt; «la valeur de correction qui a donné un résultat agréable», nous enfonçons la plaque dans n'importe quel outil qui peut se rapprocher. <br><br>  Fonction de correction de saturation totale: </p><br><img src="https://habrastorage.org/webt/lw/x2/k9/lwx2k9_jfeymrs7ullv_9goszwe.png" alt="retourner l'image"><br><br><p>  On passe de l'espace BGR (vue par défaut d'opencv) à HSV.  Nous caractérisons la matrice de saturation par un nombre.  Nous calculons le gain / atténuation de la saturation.  Nous avons coupé les départs pour la gamme.  Fusionnez la matrice de saturation ajustée avec la luminosité et la tonalité d'origine, revenez à l'espace BGR. <br><br></p><br><h3>  Quand est la sortie déjà? </h3><p>  Eh bien, il semble que la vidéo soit enfin prête.  Vous pouvez faire de la musique. <br><br>  Puisqu'aucun des accompagnements musicaux existants ne me semblait adéquat, il n'y avait rien d'autre à faire que de faire quelque chose moi-même. <br><br>  Un problème stupide s'est posé dès le début: la moitié du disque était obstruée par des sauvegardes de différents états du film.  Et le programme, qui devait faire de la musique, nécessitait des dizaines de gigaoctets pour la bibliothèque de morceaux.  J'ai pensé: "qu'est-ce qui pourrait mal se passer?" Et j'ai supprimé les sauvegardes préfinales, car j'ai des sauvegardes préfinales sur deux disques, et je ne perds rien de significatif, et il est peu probable que quelque chose doive être refait. <br><br>  Le troisième jour de travail avec la musique, le nombre de scènes qui ont perdu leur saturation ne pouvait plus être ignoré.  Certains des cadres sont devenus complètement noirs et blancs, et avant cela, ce sont ces cadres qui étaient les plus brillants.  Fait intéressant, que pourrait-il être?  Un polynôme de troisième ordre à l'extérieur de la table d'origine vole-t-il brusquement dans l'espace?  C'est une surprise, non?  Il convient de noter qu'une fois de plus, je ne voulais pas revoir l'intégralité du film après correction de la saturation, je me suis limité à visualiser une image de chaque scène, ce qui donnait une impression illusoire de la suffisance du résultat. <br><br>  Il n'y a eu aucun problème à ajouter des conditions aux limites au code de correction de saturation.  Le problème était le manque de source à partir de laquelle vous pouviez obtenir la même séquence d'images pour lesquelles la synchronisation avec le son était déjà terminée. </p><br><p>  Il existe deux options: libérer une image incurvée dans le monde avec un son cool ou revenir en arrière de deux étapes.  Il était dommage de perdre accidentellement la parfaite synchronisation parfaite, mais tout le point du travail était en couleur. <br><br>  Nous répétons le nettoyage des doublons, le remontage, le réglage de la saturation, bien sûr, nous obtenons une forte désynchronisation du son, nous commençons à accorder les points clés des pistes, nous sommes fâchés que la synchronisation magique disparaisse presque.  Une autre semaine s'est donc écoulée. </p><br><h3>  À propos de la musique </h3><p>  Écrire de la nouvelle musique gratuitement n'est pas une option du tout, mais coller quelque chose parmi les options d'accompagnement disponibles (bien qu'il y en ait au moins 5) manque également d'honnêteté.  Dans le processus de recherche de titres gratuits, je tombe sur une chose intéressante. <br><br>  <a href="https://filmstro.com/" rel="nofollow">filmstro.com</a> <br><br>  À partir de la description, il devient clair que cela vous permet de faire quelque chose entre la substitution des pistes des autres et la composition à partir de zéro.  Il possède une vaste bibliothèque de compositions, dont chacune peut être représentée comme un projet à partir des boucles conditionnelles Fruity.  Toutes les pistes d'une même composition sont regroupées en trois sections: intensité, profondeur, tension.  En changeant la "force" de la section, vous pouvez changer le nombre de pistes activées.  Total: une composition contient en moyenne 11 options sonores, qui résultent de l'influence mutuelle des sections.  Avec l'aide de la disposition des points clés le long de la séquence vidéo, le changement dans le son de la composition est lié à ce qui se passe à l'écran.  Un tel doshirak.  Savoureux, si vous ne savez pas comment c'est arrivé. <br></p><br><img src="https://habrastorage.org/webt/z6/ke/xn/z6kexnm_p7wkdoz2zhdofn9j6ma.jpeg" alt="retourner l'image"><br><br><br><h3>  À propos de YouTube </h3><p>  Enfin, vous pouvez créer une chaîne et télécharger la vidéo.  Il semblerait que tout, fini, vous puissiez vous détendre.  Mais la réalité n'a pas lâché prise, et si la vidéo originale peut être arbitrairement considérée comme HD, alors après le téléchargement, elle s'est avérée d'une qualité dégoûtante.  Selon toutes les indications et opinions, il s'est avéré sur Internet que Google utilise intentionnellement un débit binaire très faible pour toutes les nouvelles chaînes.  Heureusement, un bon conseil a glissé quelque part: remplissez à un taux de 1440p, comme si cela rend YouTube plus prudent en matière de serrage.  Le conseil a vraiment aidé, il est devenu au moins observable. <br><br>  Après le téléchargement, les plaintes concernant l'utilisation des vidéos d'autres personnes ont immédiatement volé.  Très intéressant, il s'avère que le grand Youtube n'a toujours pas de base de données de travail dans le domaine public, nous allons l'aider en envoyant des objections. <br><br>  Résultat: <a href="https://www.youtube.com/watch%3Fv%3Dr3NQyCInZiQ" rel="nofollow">www.youtube.com/watch?v=r3NQyCInZiQ</a> <br>  Lien de téléchargement en qualité d'origine: <a href="https://drive.google.com/uc%3Fid%3D1dEPcjKbjNowxsfaNcbV6DsbAr3kbACKH%26export%3Ddownload" rel="nofollow">drive.google.com/uc?id=1dEPcjKbjNowxsfaNcbV6DsbAr3kbACKH&amp;export=download</a> <br><br></p><br><h3>  Outro </h3><p>  Dans l'ensemble, j'aime ce qui s'est passé.  L'équipe de spécialistes rémunérés ferait des bonbons.  Dans ce cas: 70% des images normales, 20% des images pauvres, 10% épiques.  Gratuit, automatiquement.  Tous les problèmes que j'ai dû résoudre avec mes mains ne sont dus qu'au fait que cela a été fait pour la première fois.  Le prochain film à colorier sera infiniment plus facile.  Je ne sais pas ce que ce sera, à l'ère du cinéma muet, je n'ai pas encore rencontré d'autres œuvres qui demanderaient leur transfert à notre méta-événement.  Probablement, ce sera quelque chose d'un premier film sonore, ce qui signifie qu'il est nécessaire de restaurer le son, de le porter à 20-20 KHz, de le convertir en stéréo.  Vous pouvez toucher autant de réseaux de neurones différents =) Aujourd'hui, la qualité de la floraison dépend fortement du matériau source, plus les nuances de gris sont préservées, plus la clarté est élevée, meilleur est le résultat.  Très probablement, la prochaine génération de tels outils synthétisera de nouvelles images de haute qualité, et n'adaptera pas la couleur aux anciens contours, ce sera similaire à des projets qui font des imitations de photographies en dessinant.  En attendant, pour obtenir un excellent résultat, vous devez étirer l'image en noir et blanc et former individuellement le spécificateur de couleur sur les matériaux vidéo correspondant au film cible. <br><br>  Notre vie change de plus en plus vite, le délai avec lequel nous entrons dans une autre réalité se rétrécit.  Nous écrivons des réseaux de neurones afin de garder une trace de tout ce qui se passe avec les réseaux de neurones.  Mais nous avons de moins en moins de temps.  Il y a à peine six mois, ils m'ont demandé s'il était possible de faire automatiquement une photo arbitraire de couleur authentique, ma réponse a été: "non, c'est toujours fantastique". </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481710/">https://habr.com/ru/post/fr481710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481700/index.html">Une tante</a></li>
<li><a href="../fr481702/index.html">Du grille-pain au drone. Comment Internet des objets est-il né et pourquoi ne s'est-il déclenché que 30 ans plus tard</a></li>
<li><a href="../fr481704/index.html">C'est la norme - 2: comment les cartes normales sont cuites</a></li>
<li><a href="../fr481706/index.html">Des ordinateurs quantiques perdus dans la course et leurs erreurs fatales</a></li>
<li><a href="../fr481708/index.html">PocketBook est-il si bon?</a></li>
<li><a href="../fr481714/index.html">Pourquoi les jeux vidéo et les jeux de société ne sont pas le meilleur indicateur des capacités de l'IA (entretien avec le créateur de Keras)</a></li>
<li><a href="../fr481716/index.html">Programmation réactive, ça vaut le coup de tout laisser tomber et de se précipiter vers le rêve</a></li>
<li><a href="../fr481718/index.html">11 facteurs et astuces de vie qui augmenteront votre efficacité</a></li>
<li><a href="../fr481726/index.html">Laravel Routage localisé</a></li>
<li><a href="../fr481728/index.html">Pry -> REPL pour Ruby, qui en vaut la peine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>