<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¯ ğŸœï¸ ğŸ‘µ æ‚¨éœ€è¦äº†è§£çš„JavaScript Engine Switcher 3.0 ğŸ¤›ğŸ½ ğŸ‘‹ğŸ» ğŸ‘¨ğŸ¾â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JavaScript Engine Switcheræœ€åˆæ˜¯ä½œä¸ºè¾…åŠ©åº“åˆ›å»ºçš„ï¼Œå…¶å¼€å‘å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä½¿ç”¨å®ƒçš„åº“çš„éœ€æ±‚ã€‚ å®é™…ä¸Šï¼Œæ¯ä¸ªä¸»è¦ç‰ˆæœ¬éƒ½è§£å†³äº†è¿›ä¸€æ­¥å¼€å‘å…¶ä»–åº“æ‰€éœ€çš„ä¸€é¡¹æˆ–å¤šé¡¹ä¸»è¦ä»»åŠ¡ï¼š 


1. åœ¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæ­¤ä»»åŠ¡æ˜¯ä¸ºæ”¯æŒ.NETå¹³å°çš„æµè¡ŒJSå¼•æ“æ·»åŠ å°½å¯èƒ½å¤šçš„é€‚é…å™¨æ¨¡å—ã€‚ è¿™ä¸ºBundl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ‚¨éœ€è¦äº†è§£çš„JavaScript Engine Switcher 3.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439446/"><p><img src="https://habrastorage.org/webt/qo/zx/ss/qozxssedwxgcrteo4wnodfixdmy.png" alt="JavaScript Engine Switcherç¬¬ä¸‰ç‰ˆçš„å¾½æ ‡"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaScript Engine Switcher</a>æœ€åˆæ˜¯ä½œä¸ºè¾…åŠ©åº“åˆ›å»ºçš„ï¼Œå…¶å¼€å‘å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä½¿ç”¨å®ƒçš„åº“çš„éœ€æ±‚ã€‚ å®é™…ä¸Šï¼Œæ¯ä¸ªä¸»è¦ç‰ˆæœ¬éƒ½è§£å†³äº†è¿›ä¸€æ­¥å¼€å‘å…¶ä»–åº“æ‰€éœ€çš„ä¸€é¡¹æˆ–å¤šé¡¹ä¸»è¦ä»»åŠ¡ï¼š </p><br><ol><li>åœ¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæ­¤ä»»åŠ¡æ˜¯ä¸ºæ”¯æŒ.NETå¹³å°çš„æµè¡ŒJSå¼•æ“æ·»åŠ å°½å¯èƒ½å¤šçš„é€‚é…å™¨æ¨¡å—ã€‚ è¿™ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Bundle Transformer</a>ç”¨æˆ·æä¾›äº†ä¸€å®šçš„çµæ´»æ€§ï¼šåœ¨å¼€å‘äººå‘˜çš„è®¡ç®—æœºä¸Šï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨æ”¯æŒä½¿ç”¨Visual Studioè°ƒè¯•JSä»£ç çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MSIE</a>æ¨¡å—ï¼Œåœ¨æ²¡æœ‰ç°ä»£ç‰ˆæœ¬Internet Exploreræˆ–æ ¹æœ¬æ²¡æœ‰å®‰è£…Internet Explorerçš„æœåŠ¡å™¨ä¸Šï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V8</a>æ¨¡å—ã€‚ ä¸€äº›äººç”šè‡³è®¾æ³•ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Jurassic</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Jint</a>æ¨¡å—åœ¨Linuxå’ŒMacä¸Šçš„Monoä¸­è¿è¡ŒBundle Transformerã€‚ </li><li> ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ä¸»è¦ä»»åŠ¡æ˜¯å®ç°.NET Coreæ”¯æŒï¼Œè¿™æ˜¯æ–°ç‰ˆæœ¬çš„<a href="">ReactJS.NET</a>åº“æ‰€<a href="">å¿…éœ€çš„</a> ã€‚ å¦ä¸€ä¸ªé‡è¦ä»»åŠ¡æ˜¯åˆ›å»ºä¸€ä¸ªè·¨å¹³å°æ¨¡å—ï¼Œè¯¥æ¨¡å—å¯ä»¥å¿«é€Ÿå¤„ç†å¤§é‡JSä»£ç ï¼ˆJurassicå’ŒJintæ¨¡å—ä¸é€‚åˆæ­¤åŠŸèƒ½ï¼‰ï¼Œç»è¿‡å¤§é‡æ”¹è¿›ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ChakraCore</a>æ¨¡å—æˆä¸ºäº†è¿™æ ·çš„æ¨¡å—ã€‚ </li><li> åœ¨ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ä¸­ï¼Œä¸»è¦é‡ç‚¹æ˜¯æ”¹å–„ä¸ReactJS.NETåº“çš„é›†æˆå¹¶æé«˜ç”Ÿäº§ç‡ã€‚ </li></ol><br><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è€ƒè™‘ç¬¬ä¸‰ç‰ˆçš„ä¸€äº›åˆ›æ–°ï¼Œå³ä½¿é˜…è¯»äº†<a href="">å‘è¡Œæ–‡æœ¬</a>å’Œæ–‡æ¡£éƒ¨åˆ†<a href="">â€œå¦‚ä½•å°†åº”ç”¨ç¨‹åºå‡çº§åˆ°3.X</a>ç‰ˆâ€ï¼Œå¯¹äºè®¸å¤šäººæ¥è¯´ï¼Œè¿™äº›åˆ›æ–°ä»ç„¶æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š <code>JsEngineSwitcher</code>ç±»çš„æ›´æ”¹ï¼Œå¼‚å¸¸çš„é‡ç»„ï¼Œæ›´å¤šæœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯ï¼Œä¸­æ–­ä»¥åŠè„šæœ¬çš„åˆæ­¥ç¼–è¯‘ï¼Œæ›´æ”¹ChakraCoreå’ŒMSIEæ¨¡å—ä»¥åŠåŸºäºNiL.JSçš„æ–°æ¨¡å—çš„æœ€å¤§å †æ ˆå¤§å°çš„åŠŸèƒ½ã€‚ </p><a name="habracut"></a><br><h2> å¯¹JsEngineSwitcherç±»çš„æ›´æ”¹ </h2><br><p> åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œ <code>JsEngineSwitcher</code>ç±»å®ç°äº†<code>IJsEngineSwitcher</code>æ¥å£ï¼Œå¹¶ä¸”ä¸å†æ˜¯å•ä¾‹ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨<code>new</code>è¿ç®—ç¬¦å®ä¾‹åŒ–å®ƒï¼‰ã€‚ è‹¥è¦è·å–å…¨å±€å®ä¾‹ï¼Œè¯·ä½¿ç”¨<code>Current</code>å±æ€§è€Œä¸æ˜¯<code>Instance</code>å±æ€§ã€‚ ä¸ä¸æ¨èä½¿ç”¨çš„<code>Instance</code>å±æ€§ä¸åŒï¼Œ <code>Current</code>å±æ€§çš„è¿”å›ç±»å‹ä¸º<code>IJsEngineSwitcher</code> ã€‚ å¦å¤–ï¼Œ <code>Current</code>å±æ€§å…·æœ‰ä¸€ä¸ªsetterï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥setteræ›¿æ¢æ ‡å‡†å®ç°ï¼š </p><br><pre> <code class="cs hljs">JsEngineSwitcher.Current = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyJsEngineSwitcher();</code> </pre> <br><p> åœ¨å®‰è£…äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaScriptEngineSwitcher.Extensions.MsDependencyInjection</a>ç¨‹åºåŒ…çš„ASP.NET Core Webåº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨<code>AddJsEngineSwitcher</code>æ‰©å±•<code>AddJsEngineSwitcher</code>æ›¿æ¢å®ç°ï¼š </p><br><pre> <code class="cs hljs">â€¦ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> JavaScriptEngineSwitcher.Extensions.MsDependencyInjection; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { â€¦ services.AddJsEngineSwitcher(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyJsEngineSwitcher(), options =&gt; â€¦ ) â€¦ ; â€¦ } â€¦ } â€¦</code> </pre> <br><p> è¿™äº›æ›´æ”¹å‡ ä¹æ€»æ˜¯â€œç ´åâ€ä½¿ç”¨æ—§ç‰ˆJavaScript Engine Switcherçš„åº”ç”¨ç¨‹åºæˆ–åº“ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦å¯¹ä»£ç è¿›è¡Œä»¥ä¸‹æ›´æ”¹ï¼š </p><br><ol><li> å°†å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§çš„ç±»å‹ä»<code>JsEngineSwitcher</code>ä¸º<code>IJsEngineSwitcher</code> ã€‚ </li><li> ä»£æ›¿<code>Instance</code>å±æ€§ï¼Œåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨<code>Current</code>å±æ€§ã€‚ </li></ol><br><p> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå¤§å¤šæ•°å¼€å‘äººå‘˜è€Œè¨€ï¼Œè¿™äº›æ›´æ”¹ä¸ä¼šå¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Œå› ä¸ºå®ƒä»¬çš„ä¸»è¦ç›®çš„æ˜¯ç®€åŒ–å•å…ƒæµ‹è¯•ï¼ˆä¾‹å¦‚ï¼Œä»¥å‰ï¼Œåœ¨ReactJS.NETåº“çš„å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨äº†é”ï¼Œä½†æ˜¯ç°åœ¨å¯ä»¥<a href="">ä¸ç”¨å®ƒä»¬äº†</a> ï¼‰ã€‚ </p><br><h2> é‡ç»„ä¾‹å¤– </h2><br><p> åœ¨ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œå¤§å¤šæ•°JSå¼•æ“é”™è¯¯éƒ½å˜æˆäº†<code>JsRuntimeException</code>ç±»å‹çš„<code>JsRuntimeException</code> ï¼Œåªæœ‰å¼•æ“åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯æ‰å˜æˆäº†<code>JsEngineLoadException</code> ã€‚ è¿˜æœ‰ä¸€ä¸ªåŸºç±»<code>JsException</code> ï¼Œä»ä¸­ç»§æ‰¿äº†ä¸Šè¿°ä¸¤ç§å¼‚å¸¸ç±»å‹ï¼Œè¿™ä½¿å¾—ç»å¯¹å¯ä»¥æˆªè·JSå¼•æ“è¿è¡ŒæœŸé—´å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ã€‚ å°½ç®¡å­˜åœ¨æ˜æ˜¾çš„ç¼ºç‚¹ï¼Œä½†è¿™ç§å¼‚å¸¸ç»„ç»‡æ–¹å¼éå¸¸é€‚åˆç”¨äºè®¿é—®JSå¼•æ“åŸºæœ¬åŠŸèƒ½çš„ç»Ÿä¸€æ¥å£çš„æ¦‚å¿µã€‚ </p><br><p> ä½†æ˜¯éšç€è„šæœ¬çš„ä¸­æ–­å’Œé¢„ç¼–è¯‘çš„å®ç°ï¼ˆæˆ‘å°†åœ¨ä»¥ä¸‹å„èŠ‚ä¸­è®¨è®ºå®ƒä»¬ï¼‰ï¼Œéœ€è¦ä¸€ç§æ–°çš„ç»„ç»‡å¼‚å¸¸çš„æ–¹æ³•ã€‚ é¦–å…ˆè¦åšçš„æ˜¯æ·»åŠ ä¸€ç§æ–°çš„å¼‚å¸¸ç±»å‹<code>JsInterruptedException</code> ï¼Œè¯¥å¼‚å¸¸æ˜¯é€šçŸ¥ç”¨æˆ·è„šæœ¬æ‰§è¡Œä¸­æ–­æ‰€å¿…éœ€çš„ã€‚ ç„¶åï¼Œæœ‰å¿…è¦å°†è„šæœ¬å¤„ç†æœŸé—´å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯æ˜ç¡®åœ°åˆ†ä¸ºä¸¤ç±»ï¼šç¼–è¯‘é”™è¯¯ï¼ˆåˆ†æï¼‰å’Œè¿è¡Œæ—¶é”™è¯¯ã€‚ è¿˜éœ€è¦åˆ†ç¦»å‡ºChakraå’ŒV8çš„å„ç§ç‰¹å®šé”™è¯¯ï¼Œè¿™äº›é”™è¯¯ä¸è„šæœ¬çš„å¤„ç†æ— å…³ã€‚ è¿˜å¿…é¡»è€ƒè™‘åˆ°Jintå¼•æ“ä¸­å­˜åœ¨å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸æ˜¯åœ¨æ‰§è¡Œè„šæœ¬çš„è¶…æ—¶æ—¶é—´ï¼ˆè¶…æ—¶ï¼‰åˆ°æœŸæ—¶å‘ç”Ÿçš„ã€‚ ç»“æœï¼Œå½¢æˆäº†ä¸€ç§æ–°çš„ç»„ç»‡å¼‚å¸¸çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶è¡¨ç¤ºä¸ºä»¥ä¸‹å±‚æ¬¡ç»“æ„ï¼š </p><br><ul><li> <code>JsException</code> <br> <ul><li> <code>JsEngineException</code> <br> <ul><li> <code>JsEngineLoadException</code> </li> </ul></li><li> <code>JsFatalException</code> </li> <li> <code>JsScriptException</code> <br> <ul><li> <code>JsCompilationException</code> </li> <li> <code>JsRuntimeException</code> <br> <ul><li> <code>JsInterruptedException</code> </li> <li> <code>JsTimeoutException</code> </li> </ul></li></ul></li><li> <code>JsUsageException</code> </li> </ul></li><li>  <code>JsEngineNotFoundException</code> <sup>*</sup> </li></ul><br><p>  *-æ­¤å¼‚å¸¸ä¸ä¼šåœ¨JSå¼•æ“çº§åˆ«å‘ç”Ÿï¼Œè€Œæ˜¯åœ¨JavaScriptå¼•æ“åˆ‡æ¢å™¨çº§åˆ«å‘ç”Ÿã€‚ </p><br><p> æˆ‘è®¤ä¸ºä¸Šè¿°å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„ä¸éœ€è¦æ³¨é‡Šï¼Œå› ä¸ºå¼‚å¸¸çš„åç§°å¯ä»¥è¯´æ˜ä¸€åˆ‡ã€‚ é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥è·å¾—æœ‰å…³é”™è¯¯åŸå› çš„æ›´å¤šä¿¡æ¯ï¼Œè€Œä¸”å¯ä»¥æ›´çµæ´»åœ°å¤„ç†æŸäº›ç±»å‹çš„å¼‚å¸¸ã€‚ </p><br><h2> ç»Ÿä¸€é”™è¯¯æ¶ˆæ¯æ ¼å¼ </h2><br><p> ä»¥å‰ç‰ˆæœ¬çš„JavaScript Engine Switcherçš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯éš¾ä»¥å®šä½åœ¨å¤„ç†è„šæœ¬æ—¶å‘ç”Ÿçš„é”™è¯¯ã€‚ ä»<code>Message</code>å¼‚å¸¸å±æ€§ä¸­ï¼Œå¾ˆéš¾å‡†ç¡®äº†è§£ä»£ç ä¸­é”™è¯¯çš„å‘ç”Ÿä½ç½®ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸åˆ†æå…¶ä»–å¼‚å¸¸å±æ€§ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¾ˆæ–¹ä¾¿ã€‚ æ­¤å¤–ï¼Œç°æœ‰å±æ€§é›†è¿˜ä¸å¤Ÿã€‚ </p><br><p> å› æ­¤ï¼Œå‘<code>JsScriptException</code>ç±»æ·»åŠ äº†2ä¸ªæ–°å±æ€§ï¼š </p><br><ol><li>  <strong>Type</strong> -JavaScripté”™è¯¯çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œ <code>SyntaxError</code>æˆ–<code>TypeError</code> ï¼‰ï¼› </li><li>  <strong>DocumentName-æ–‡æ¡£</strong>çš„åç§°ï¼ˆé€šå¸¸ä»ä»¥ä¸‹å‚æ•°çš„å€¼ä¸­æå–ï¼š <code>Execute</code>å’Œ<code>Evaluate</code>æ–¹æ³•çš„<code>ExecuteFile</code> ï¼Œ <code>ExecuteFile</code>æ–¹æ³•çš„<code>path</code> <code>ExecuteResource</code>æ–¹æ³•çš„<code>resourceName</code>ç­‰ï¼‰ï¼› </li></ol><br><p> ä¸€ä¸ªæ–°å±æ€§ä¹Ÿå·²æ·»åŠ åˆ°<code>JsRuntimeException</code>ç±»<strong>-CallStackä¸­</strong> ï¼Œè¯¥å±æ€§åŒ…å«è°ƒç”¨å †æ ˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ </p><br><p> ä»¥å‰ï¼Œæ¥è‡ªåŸå§‹.NETå¼‚å¸¸çš„ç›¸ä¼¼å±æ€§çš„å€¼æˆ–JavaScripté”™è¯¯çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼åªæ˜¯è¢«å¤åˆ¶åˆ°<code>Message</code>å±æ€§ä¸­ã€‚ é€šå¸¸ï¼Œä¸åŒJSå¼•æ“ä¸­çš„é”™è¯¯æ¶ˆæ¯ä¸ä»…åœ¨æ ¼å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œè€Œä¸”åœ¨å…¶ä¸­å‘ˆç°çš„æœ‰ç”¨ä¿¡æ¯é‡ä¹Ÿæœ‰æ‰€ä¸åŒã€‚ ä¾‹å¦‚ï¼Œç”±äºæŸäº›é”™è¯¯æ¶ˆæ¯ä¸­ç¼ºå°‘è¡Œå·å’Œåˆ—å·ä¿¡æ¯ï¼Œå› æ­¤ReactJS.NETåº“çš„å¼€å‘äººå‘˜è¢«è¿«<a href="">é‡æ–°æŠ›å‡º</a>ä»JavaScript Engine Switcheræ¥æ”¶åˆ°çš„<a href="">å¼‚å¸¸</a> ã€‚ </p><br><p> å› æ­¤ï¼Œæˆ‘å†³å®šåœ¨é€‚é…å™¨æ¨¡å—çº§åˆ«ç”Ÿæˆè‡ªå·±çš„é”™è¯¯æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯å°†å…·æœ‰å•ä¸€ï¼ˆç»Ÿä¸€ï¼‰æ ¼å¼ã€‚ è¿™ç§æ ¼å¼ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„é”™è¯¯ä¿¡æ¯ï¼šç±»å‹ï¼Œæè¿°ï¼Œæ–‡æ¡£åç§°ï¼Œè¡Œå·ï¼Œåˆ—å·ï¼Œä»£ç ç‰‡æ®µå’Œè°ƒç”¨å †æ ˆã€‚ ä½œä¸ºæ–°æ ¼å¼çš„åŸºç¡€ï¼Œæˆ‘ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoft ClearScript</a>åº“ä¸­è·å–äº†é”™è¯¯æ ¼å¼ã€‚ </p><br><p> ä»¥ä¸‹æ˜¯æœ‰å…³ç”±ä¸åŒé€‚é…å™¨æ¨¡å—ç”Ÿæˆçš„ç›¸åŒç¼–è¯‘é”™è¯¯çš„æ¶ˆæ¯ï¼š </p><br><pre> <code class="plaintext hljs">ChakraCore ========== SyntaxError: Unexpected identifier after numeric literal at declinationOfSeconds.js:12:23 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; Jint ==== SyntaxError: Unexpected token ILLEGAL at declinationOfSeconds.js:12:25 Jurassic ======== SyntaxError: Expected operator but found 'O' at declinationOfSeconds.js:12 MSIE   Classic ===================== SyntaxError: Expected ';' at declinationOfSeconds.js:12:25 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; MSIE   Chakra ActiveScript ================================= SyntaxError: Expected ';' at declinationOfSeconds.js:12:25 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; MSIE   Chakra IE JsRT ============================ SyntaxError: Expected ';' at 12:25 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; MSIE   Chakra Edge JsRT ============================== SyntaxError: Unexpected identifier after numeric literal at declinationOfSeconds.js:12:23 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; NiL === SyntaxError: Unexpected token 'O' at 12:25 V8 == SyntaxError: Invalid or unexpected token at declinationOfSeconds.js:12:24 -&gt; caseIndex = number % 1O &lt; 5 ? number % 10 : 5; Vroom ===== SyntaxError: Unexpected token ILLEGAL at declinationOfSeconds.js:12:24</code> </pre> <br><p> è¿è¡Œæ—¶é”™è¯¯çš„ç±»ä¼¼ç¤ºä¾‹ï¼š </p><br><pre> <code class="plaintext hljs">ChakraCore ========== TypeError: Unable to get property '' of undefined or null reference at transliterate (russian-translit.js:929:4) -&gt; newCharValue = typeof charMapping[charValue] !== 'undefined' ? at Global code (Script Document:1:1) Jint ==== TypeError: charMapping is undefined at russian-translit.js:929:26 Jurassic ======== TypeError: undefined cannot be converted to an object at transliterate (russian-translit.js:929) at Global code (Script Document:1) MSIE   Classic ===================== TypeError: 'undefined' is null or not an object at russian-translit.js:929:4 MSIE   Chakra ActiveScript ================================= TypeError: Unable to get property '' of undefined or null reference at russian-translit.js:929:4 MSIE   Chakra IE JsRT ============================ TypeError: Unable to get property '' of undefined or null reference at transliterate (russian-translit.js:929:4) at Global code (Script Document:1:1) MSIE   Chakra Edge JsRT ============================== TypeError: Unable to get property '' of undefined or null reference at transliterate (russian-translit.js:929:4) at Global code (Script Document:1:1) NiL === TypeError: Can't get property "" of "undefined" V8 == TypeError: Cannot read property '' of undefined at transliterate (russian-translit.js:929:37) -&gt; newCharValue = typeof charMapping[charValue] !== 'undefined' ? at Script Document:1:1 Vroom ===== TypeError: Cannot read property '' of undefined at russian-translit.js:929:37</code> </pre> <br><p> ä»ç¤ºä¾‹ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒæŸäº›JSå¼•æ“ä¸ºæˆ‘ä»¬æä¾›äº†å®Œå…¨ä¸åŒçš„é”™è¯¯æè¿°å’Œåˆ—å·ï¼Œæˆ‘ä»¬æœ‰æ—¶æ— æ³•å§‹ç»ˆè·å¾—å®Œæ•´çš„é”™è¯¯æ•°æ®é›†ï¼Œä½†æ˜¯å°½ç®¡æœ‰è¿™äº›ç¼ºç‚¹ï¼Œä½†ç»Ÿä¸€æ ¼å¼ä¸ºæˆ‘ä»¬æä¾›äº†æœ‰å…³é”™è¯¯ä½ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯åŸå§‹é”™è¯¯æ¶ˆæ¯ã€‚ </p><br><h2> æœ¬æœºç¨‹åºé›†éƒ¨ç½²æŠ€å·§ </h2><br><p> ä½¿ç”¨ç¬¬äºŒç‰ˆJavaScript Engine Switcheræ—¶å¯¼è‡´é”™è¯¯çš„ä¸»è¦åŸå› æ˜¯ï¼Œè®¸å¤šå¼€å‘äººå‘˜å¿˜è®°å®‰è£…åŒ…å«ChakraCoreå’ŒV8æ¨¡å—æœ¬æœºç¨‹åºé›†çš„NuGetç¨‹åºåŒ…ã€‚ æœ‰ä¸€æ¬¡ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ReactJS.NET bugtrackerä¸­çš„å¸–å­</a>ä¹Ÿä¸“é—¨è®¨è®ºäº†è¿™ä¸ªé—®é¢˜ï¼ˆä¹Ÿæä¾›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¿„è¯­ç¿»è¯‘</a> ï¼‰ã€‚ ç°åœ¨ï¼Œè¿™æ ·çš„é”™è¯¯ä¸»è¦ä»…å‘ç”Ÿäºç”±äºæŸç§åŸå› è€Œæ²¡æœ‰é˜…è¯»æ–‡æ¡£çš„åˆå­¦è€…ã€‚ </p><br><p>  ReactJS.NETçš„ä½œè€…è¯•å›¾ä½¿ç”¨é”™è¯¯æ¶ˆæ¯ä¸­çš„æç¤ºæ¥æœ€å°åŒ–æ­¤ç±»é”™è¯¯çš„æ•°é‡ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•çš„<a href="">å®æ–½ä¸æ˜¯å¾ˆæˆåŠŸï¼Œ</a>è¿™å¯¼è‡´äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ›´å¤šçš„æ··ä¹±</a> ã€‚ æç¤ºçš„æƒ³æ³•å¾ˆå¥½ï¼Œä½†æ˜¯å®ƒéœ€è¦ä¸€ä¸ªæ ¹æœ¬ä¸åŒçš„å®ç°ï¼Œå³åœ¨JSå¼•æ“çš„é€‚é…å™¨æ¨¡å—çº§åˆ«å®ç°ã€‚ åœ¨æ–°ç‰ˆæœ¬çš„JavaScript Engine Switcherä¸­ï¼Œå°†<code>DllNotFoundException</code>å’Œ<code>TypeLoadException</code>å¼‚å¸¸åŒ…è£…<code>JsEngineLoadException</code>æ—¶ï¼Œæ­¤ç±»æç¤ºä¼šæ·»åŠ åˆ°é”™è¯¯æ¶ˆæ¯ä¸­ï¼ˆè¯·å‚é˜…<a href="">ChakraCore</a> ï¼Œ <a href="">V8</a>å’Œ<a href="">Vroom</a>æ¨¡å—çš„å®ç°ç¤ºä¾‹ï¼‰ã€‚ è€Œä¸”ï¼Œè¿™äº›æŠ€å·§å¾ˆèªæ˜ï¼Œå› ä¸º å®ƒä»¬çš„ç”Ÿæˆè€ƒè™‘äº†è®¸å¤šå› ç´ ï¼šæ“ä½œç³»ç»Ÿç±»å‹ï¼Œå¤„ç†å™¨ä½“ç³»ç»“æ„å’Œè¿è¡Œæ—¶ï¼ˆ.NET Frameworkï¼Œ.NET Coreæˆ–Monoï¼‰ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œåœ¨Windowsæ“ä½œç³»ç»Ÿä¸Šçš„64ä½è¿›ç¨‹ä¸­ä½¿ç”¨ä¸å¸¦æœ¬åœ°ç¨‹åºé›†çš„ChakraCoreæ¨¡å—æ—¶ï¼Œé”™è¯¯æ¶ˆæ¯å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><blockquote> æ— æ³•åˆ›å»ºChakraCoreJsEngineçš„å®ä¾‹ã€‚ æœ€æœ‰å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå› ä¸ºæœªæ‰¾åˆ°â€œ ChakraCore.dllâ€ç¨‹åºé›†æˆ–å…¶ä¾èµ–é¡¹ä¹‹ä¸€ã€‚ å°è¯•é€šè¿‡NuGetå®‰è£…JavaScriptEngineSwitcher.ChakraCore.Native.win-x64è½¯ä»¶åŒ…ã€‚ æ­¤å¤–ï¼Œæ‚¨ä»ç„¶éœ€è¦å®‰è£…é€‚ç”¨äºVisual Studio 2017çš„Microsoft Visual C ++ Redistributableï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://www.visualstudio.com/downloads/#microsoft-visual-c-redistributable-for-visual-studio-2017</a> ï¼‰ã€‚ </blockquote><br><p> è¯¥é”™è¯¯æ¶ˆæ¯æç¤ºæ‚¨éœ€è¦å®‰è£…JavaScript NuGetç¨‹åºåŒ…EngineSwitcher.ChakraCore.Native.win-x64ï¼Œå¹¶ä¸”è¿˜æåˆ°Windowsçš„ChakraCoreéœ€è¦Microsoft Visual C ++å¯å†å‘è¡Œç»„ä»¶æ‰èƒ½ä½¿Visual Studio 2017æ­£å¸¸å·¥ä½œã€‚å¦‚æœå‘ç”Ÿåœ¨32ä½è¿›ç¨‹ä¸­ï¼Œåˆ™å°†è¦æ±‚ç”¨æˆ·å®‰è£…JavaScriptEngineSwitcher.ChakraCore.Native.win-x86è½¯ä»¶åŒ…ã€‚ </p><br><p> åœ¨.NET Coreä¸­çš„Linuxä¸Šï¼Œç±»ä¼¼çš„é”™è¯¯æ¶ˆæ¯å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><blockquote> æ— æ³•åˆ›å»ºChakraCoreJsEngineçš„å®ä¾‹ã€‚ æœ€æœ‰å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå› ä¸ºæœªæ‰¾åˆ°â€œ libChakraCore.soâ€ç¨‹åºé›†æˆ–å…¶ä¾èµ–é¡¹ä¹‹ä¸€ã€‚ å°è¯•é€šè¿‡NuGetå®‰è£…JavaScriptEngineSwitcher.ChakraCore.Native.linux-x64è½¯ä»¶åŒ…ã€‚ </blockquote><br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®å®‰è£…JavaScriptEngineSwitcher.ChakraCore.Native.linux-x64è½¯ä»¶åŒ…ã€‚ </p><br><p> åœ¨Monoä¸­å¯åŠ¨æ—¶ï¼Œå°†æ˜¾ç¤ºå¦ä¸€ä¸ªæç¤ºï¼š </p><br><blockquote>  ... JavaScriptEngineSwitcher.ChakraCore.Native.linux- *è½¯ä»¶åŒ…ä¸æ”¯æŒåœ¨Monoä¸‹å®‰è£…ï¼Œä½†æ˜¯æ‚¨å¯ä»¥æ‰‹åŠ¨å®‰è£…æœ¬æœºç¨‹åºé›†ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/Taritsyn/JavaScriptEngineSwitcher/wiki/ChakraCore#linux</a> ï¼‰ã€‚ </blockquote><br><p> ç”±äºJavaScriptEngineSwitcher.ChakraCore.Native.linux-x64è½¯ä»¶åŒ…ä»…ä¸.NET Coreå…¼å®¹ï¼Œå› æ­¤å·¥å…·æç¤ºå°†æä¾›æŒ‡å‘æœ‰å…³åœ¨Linuxä¸Šæ‰‹åŠ¨éƒ¨ç½²æœ¬æœºç¨‹åºé›†çš„è¯´æ˜çš„é“¾æ¥ã€‚ </p><br><p> å¯ä»¥ç»™å‡ºæ›´å¤šç¤ºä¾‹ï¼Œä½†è¿™æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ </p><br><h2> ä¸­æ­¢è„šæœ¬æ‰§è¡Œ </h2><br><p> å½“æˆ‘ä»¬ä¸ºç”¨æˆ·æä¾›åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„JSä»£ç çš„æœºä¼šæ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜-æˆ‘ä»¬ä¸çŸ¥é“æ‰§è¡Œæ­¤ä»£ç éœ€è¦èŠ±è´¹å¤šé•¿æ—¶é—´ã€‚ è¿™å¯èƒ½æ˜¯å¤§é‡çš„éæœ€ä½³ä»£ç æˆ–è¿è¡Œæ— é™å¾ªç¯çš„ä»£ç ã€‚ æ— è®ºå¦‚ä½•ï¼Œå®ƒå°†æ˜¯ä¸å—æ§åˆ¶çš„ä»£ç ï¼Œå®ƒå°†æ— é™æœŸåœ°æ¶ˆè€—æˆ‘ä»¬æœåŠ¡å™¨çš„èµ„æºã€‚ ä¸ºäº†ä»¥æŸç§æ–¹å¼æ§åˆ¶æ­¤è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿä¸­æ–­è„šæœ¬çš„æ‰§è¡Œã€‚ ä½¿ç”¨çº¯.NETç¼–å†™çš„å¼•æ“ï¼ˆä¾‹å¦‚Jintï¼ŒJurassicæˆ–NiL.JSï¼‰æ—¶ï¼Œæˆ‘ä»¬å§‹ç»ˆå¯ä»¥å°†å…·æœ‰å–æ¶ˆåŠŸèƒ½çš„JSä»£ç ä½œä¸ºä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¸é€‚ç”¨äºå…¶ä»–å¼•æ“ã€‚ å¯¹æˆ‘ä»¬æ¥è¯´å¹¸è¿çš„æ˜¯ï¼ŒC ++å¼•æ“å…·æœ‰ç”¨äºä¸­æ–­è„šæœ¬çš„å†…ç½®æœºåˆ¶ã€‚ </p><br><p> ä¸ºäº†æä¾›å¯¹è¿™äº›æœºåˆ¶çš„è®¿é—®ï¼Œå°†<code>SupportsScriptInterruption</code>å±æ€§å’Œ<code>Interrupt</code>æ–¹æ³•æ·»åŠ åˆ°äº†<code>IJsEngine</code>æ¥å£ã€‚ ç”±äºå¹¶éæ‰€æœ‰å¼•æ“éƒ½æ”¯æŒæ­¤åŠŸèƒ½ï¼Œå› æ­¤åœ¨è°ƒç”¨<code>Interrupt</code>æ–¹æ³•ä¹‹å‰ï¼Œåº”å§‹ç»ˆæ£€æŸ¥<code>SupportsScriptInterruption</code>å±æ€§çš„å€¼ï¼ˆå¦‚æœåœ¨JavaScript Engine Switcherçš„æ—©æœŸç‰ˆæœ¬ä¸­å¿…é¡»æ‰‹åŠ¨è¿è¡Œåƒåœ¾æ”¶é›†å™¨ï¼Œæ‚¨å°†ç«‹å³äº†è§£æˆ‘åœ¨è¯´ä»€ä¹ˆï¼‰ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (engine.SupportsScriptInterruption) { engine.Interrupt(); }</code> </pre> <br><p> å¹¶ä¸”æ‚¨éœ€è¦åœ¨ä¸æ‰§è¡Œè„šæœ¬çš„çº¿ç¨‹ä¸åŒçš„å•ç‹¬çº¿ç¨‹ä¸­è°ƒç”¨æ­¤æ–¹æ³•ã€‚ è°ƒç”¨<code>Interrupt</code>æ–¹æ³•åï¼Œæ‰€æœ‰å…ˆå‰è¿è¡Œçš„<code>Evaluate</code> ï¼Œ <code>Execute*</code>å’Œ<code>CallFunction</code>éƒ½å°†ä»¥<code>JsInterruptedException</code> ã€‚ </p><br><p> ç”±äºæ­¤APIæ˜¯ä½çº§çš„ï¼Œå› æ­¤å¯¹äºæœ¬èŠ‚å¼€å¤´æ‰€è¿°çš„ä»»åŠ¡ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹æ‰©å±•æ–¹æ³•ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> !NET40 using System.Runtime.ExceptionServices; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> using System.Threading; using System.Threading.Tasks; using JavaScriptEngineSwitcher.Core; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> NET40 using JavaScriptEngineSwitcher.Core.Extensions; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> using JavaScriptEngineSwitcher.Core.Resources; â€¦ /// &lt;summary&gt; /// Extension methods for &lt;see cref="IJsEngine"/&gt; /// &lt;/summary&gt; public static class JsEngineExtensions { /// &lt;summary&gt; /// Evaluates an expression within a specified time interval /// &lt;/summary&gt; /// &lt;typeparam name="T"&gt;Type of result&lt;/typeparam&gt; /// &lt;param name="engine"&gt;JS engine&lt;/param&gt; /// &lt;param name="expression"&gt;JS expression&lt;/param&gt; /// &lt;param name="timeoutInterval"&gt;Interval to wait before the /// script execution times out&lt;/param&gt; /// &lt;param name="documentName"&gt;Document name&lt;/param&gt; /// &lt;returns&gt;Result of the expression&lt;/returns&gt; /// &lt;exception cref="ObjectDisposedException"/&gt; /// &lt;exception cref="ArgumentNullException"/&gt; /// &lt;exception cref="ArgumentException"/&gt; /// &lt;exception cref="JsCompilationException"/&gt; /// &lt;exception cref="JsTimeoutException"/&gt; /// &lt;exception cref="JsRuntimeException"/&gt; /// &lt;exception cref="JsException"/&gt; public static T Evaluate&lt;T&gt;(this IJsEngine engine, string expression, TimeSpan timeoutInterval, string documentName) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (engine == null) { throw new ArgumentNullException(nameof(engine)); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (engine.SupportsScriptInterruption) { using (var timer = new Timer(state =&gt; engine.Interrupt(), null, timeoutInterval, #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> NET40 new TimeSpan(0, 0, 0, 0, -1))) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> Timeout.InfiniteTimeSpan)) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> { try { return engine.Evaluate&lt;T&gt;(expression, documentName); } catch (JsInterruptedException e) { throw new JsTimeoutException( Strings.Runtime_ScriptTimeoutExceeded, e.EngineName, e.EngineVersion, e ); } } } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> NET40 Task&lt;T&gt; task = Task.Factory.StartNew(() =&gt; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> Task&lt;T&gt; task = Task.Run(() =&gt; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> { return engine.Evaluate&lt;T&gt;(expression, documentName); }); bool isCompletedSuccessfully = false; try { isCompletedSuccessfully = task.Wait(timeoutInterval); } catch (AggregateException e) { Exception innerException = e.InnerException; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (innerException != null) { #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> NET40 innerException.PreserveStackTrace(); throw innerException; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> ExceptionDispatchInfo.Capture(innerException).Throw(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { throw; } } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (isCompletedSuccessfully) { return task.Result; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { throw new JsTimeoutException( Strings.Runtime_ScriptTimeoutExceeded, engine.Name, engine.Version ); } } } â€¦ } â€¦</span></span></code> </pre> <br><p> æ­¤æ–¹æ³•æ˜¯å¼•æ“æ–¹æ³•<code>Evaluate&lt;T&gt;</code>çš„é™„åŠ ç»„ä»¶ï¼Œè¯¥æ–¹æ³•å…è®¸ä½¿ç”¨<code>timeoutInterval</code>å‚æ•°è®¾ç½®ç­‰å¾…è„šæœ¬æ‰§è¡Œçš„è¶…æ—¶ã€‚ è¿™ç§æ‰©å±•æ–¹æ³•çš„æ“ä½œåŸç†éå¸¸ç®€å•ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥å¼•æ“æ˜¯å¦æ”¯æŒå†…ç½®çš„ä¸­æ–­æœºåˆ¶ã€‚ å¦‚æœæ˜¯<code>timeoutInterval</code> ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code>Timer</code>ç±»çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹åœ¨<code>timeoutInterval</code>å‚æ•°æŒ‡å®šçš„<code>timeoutInterval</code>é—´éš”åå¯åŠ¨<code>Interrupt</code>æ–¹æ³•ï¼Œç„¶åè°ƒç”¨<code>Evaluate&lt;T&gt;</code>å¼•æ“æ–¹æ³•ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™æ•è·<code>JsInterruptedException</code>å¹¶å°†å…¶åŒ…è£…åœ¨<code>JsTimeoutException</code> ã€‚ å¦‚æœå¼•æ“ä¸æ”¯æŒä¸­æ–­ï¼Œåˆ™åˆ›å»ºè¿è¡Œå¼•æ“çš„<code>Evaluate&lt;T&gt;</code>æ–¹æ³•çš„<code>Task</code>ç±»çš„å®ä¾‹ï¼Œç„¶åå°†è¦æ‰§è¡Œçš„ä»»åŠ¡çš„ç­‰å¾…é—´éš”è®¾ç½®ä¸ºä¸<code>timeoutInterval</code>å‚æ•°ä¸­çš„å€¼ç›¸ç­‰ï¼Œå¦‚æœä»»åŠ¡åœ¨è¶…æ—¶ä¹‹å‰å®Œæˆï¼Œåˆ™æŠ›å‡º<code>JsTimeoutException</code>ç±»å‹<code>JsTimeoutException</code> ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨æ­¤æ‰©å±•æ–¹æ³•çš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> JavaScriptEngineSwitcher.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> JavaScriptEngineSwitcher.Core.Helpers; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> expression = <span class="hljs-string"><span class="hljs-string">@"function getRandomInt(minValue, maxValue) { minValue = Math.ceil(minValue); maxValue = Math.floor(maxValue); return Math.floor(Math.random() * (maxValue - minValue + 1)) + minValue; } function sleep(millisecondsTimeout) { var totalMilliseconds = new Date().getTime() + millisecondsTimeout; while (new Date().getTime() &lt; totalMilliseconds) { } } var randomNumber = getRandomInt(1, 10); sleep(randomNumber * 1000); randomNumber;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (IJsEngine engine = JsEngineSwitcher.Current.CreateDefaultEngine()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = engine.Evaluate&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(expression, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">3</span></span>), <span class="hljs-string"><span class="hljs-string">"randomNumber.js"</span></span>); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">" = {0}"</span></span>, result); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsTimeoutException) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"    JavaScript "</span></span> + <span class="hljs-string"><span class="hljs-string">"   !"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsException e) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"   JavaScript-  "</span></span> + <span class="hljs-string"><span class="hljs-string">"!"</span></span>); Console.WriteLine(); Console.WriteLine(JsErrorHelpers.GenerateErrorDetails(e)); } } } â€¦ } â€¦</code> </pre> <br><p> ä½¿ç”¨æ‰©å±•æ–¹æ³•ï¼Œæˆ‘ä»¬è®¡ç®—JSè¡¨è¾¾å¼çš„ç»“æœã€‚ è¡¨è¾¾å¼çš„ç»“æœæ˜¯ä¸€ä¸ªéšæœºæ•´æ•°ï¼Œè¯¥æ•°å­—ä¹Ÿæ˜¯è¯¥è¡¨è¾¾å¼å»¶è¿Ÿçš„ç§’æ•°ã€‚ å¦å¤–ï¼Œåœ¨è°ƒç”¨æ‰©å±•æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®š3ç§’çš„ç­‰å¾…é—´éš”ã€‚ ç”±äºè®¡ç®—è¡¨è¾¾å¼çš„æ—¶é—´åœ¨1åˆ°10ç§’ä¹‹é—´å˜åŒ–ï¼Œå› æ­¤åœ¨ä¸€ç§æƒ…å†µä¸‹ï¼Œè¡¨è¾¾å¼çš„ç»“æœå°†æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Šï¼Œè€Œåœ¨å¦ä¸€ç§æƒ…å†µä¸‹ï¼Œåˆ™æ˜¾ç¤ºæœ‰å…³è¶…æ—¶çš„æ¶ˆæ¯ã€‚ </p><br><p> é‡æ–°<code>CallFunction</code>æ­¤æ‰©å±•æ–¹æ³•ä»¥è°ƒç”¨å…¶ä»–å¼•æ“æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå¯¹<code>Execute*</code> ï¼Œ <code>CallFunction</code>æˆ–<code>Evaluate</code>æ–¹æ³•çš„å…¶ä»–é‡è½½ç‰ˆæœ¬ï¼‰åº”è¯¥å¹¶ä¸å›°éš¾ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å°šæœªå†³å®šæ˜¯å¦å°†æ­¤ç±»æ‰©å±•æ–¹æ³•æ·»åŠ åˆ°åº“æœ¬èº«ï¼Œå› ä¸ºç›®å‰å°šä¸æ¸…æ¥šå®ƒä»¬å°†éœ€è¦å¤šå°‘ã€‚ </p><br><h2> è„šæœ¬é¢„ç¼–è¯‘ </h2><br><p> æˆ‘è¢«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¦æ±‚åœ¨2015å¹´</a>å¢åŠ å¯¹è„šæœ¬çš„åˆæ­¥ç¼–è¯‘çš„æ”¯æŒã€‚ å½“æ—¶è¿˜ä¸æ¸…æ¥šè¿™ç§åŠŸèƒ½å¦‚ä½•é€‚åˆç»Ÿä¸€æ¥å£çš„æ¦‚å¿µã€‚ ä½†æ˜¯éšç€æ—¶é—´çš„æµé€ï¼ŒJavaScriptå¼•æ“åˆ‡æ¢å™¨å¼€å§‹é€æ¸å‡ºç°äº†å¯¹è¯¸å¦‚åƒåœ¾æ”¶é›†å’Œè„šæœ¬ä¸­æ–­ä¹‹ç±»çš„å¯è®¿é—®æ€§åŠŸèƒ½çš„æ”¯æŒã€‚ åœ¨ç¬¬ä¸‰ç‰ˆå·¥ä½œçš„æœ€åé˜¶æ®µï¼Œè½¬å‘åˆæ­¥ç¼–è¯‘ã€‚ </p><br><p> ä½¿ç”¨é¢„ç¼–è¯‘ï¼Œæ‚¨å¯ä»¥ç¼–è¯‘ä¸€æ¬¡è„šæœ¬ï¼Œç„¶åå¤šæ¬¡ä½¿ç”¨å®ƒæ¥åˆå§‹åŒ–JSå¼•æ“ã€‚ ç”±äºé¢„ç¼–è¯‘è„šæœ¬ä¸éœ€è¦è§£æï¼Œå› æ­¤å¼•æ“çš„åˆå§‹åŒ–ä¼šæ›´å¿«ã€‚ </p><br><p> å½“å‰ï¼Œé¢„ç¼–è¯‘ç”±5ä¸ªé€‚é…å™¨æ¨¡å—æ”¯æŒï¼šChakraCoreï¼ŒJintï¼ŒJurassicï¼ŒMSIEï¼ˆä»…åœ¨JsRTæ¨¡å¼ä¸‹ï¼‰å’ŒV8ã€‚ ä¸ºäº†æä¾›å¯¹ç›¸åº”å¼•æ“æœºåˆ¶çš„è®¿é—®ï¼Œåœ¨<code>IJsEngine</code>æ¥å£ä¸­æ·»åŠ äº†<code>SupportsScriptPrecompilation</code>å±æ€§å’Œ3ä¸ªæ–°æ–¹æ³•ï¼š <code>Precompile</code> ï¼Œ <code>PrecompileFile</code>å’Œ<code>PrecompileResource</code> ã€‚  <code>Precompile*</code>æ–¹æ³•è¿”å›å®ç°<code>IPrecompiledScript</code>æ¥å£çš„å¯¹è±¡çš„å®ä¾‹ã€‚ è¯¥å¯¹è±¡æ˜¯å¯ä»¥ç”±å¼•æ“çš„ä¸åŒå®ä¾‹ä½¿ç”¨çš„é¢„ç¼–è¯‘è„šæœ¬ï¼ˆä¸ºæ­¤ç›®çš„ï¼Œ <code>Execute</code>æ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼‰ã€‚ è€ƒè™‘ä¸€ä¸ªä½¿ç”¨æ­¤APIçš„ç®€å•ç¤ºä¾‹ï¼š </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> JavaScriptEngineSwitcher.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> JavaScriptEngineSwitcher.Core.Helpers; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> sourceCode = <span class="hljs-string"><span class="hljs-string">@"function declinationOfSeconds(number) { var result, titles = ['', '', ''], titleIndex, cases = [2, 0, 1, 1, 1, 2], caseIndex ; if (number % 100 &gt; 4 &amp;&amp; number % 100 &lt; 20) { titleIndex = 2; } else { caseIndex = number % 10 &lt; 5 ? number % 10 : 5; titleIndex = cases[caseIndex]; } result = number + ' ' + titles[titleIndex]; return result; }"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> functionName = <span class="hljs-string"><span class="hljs-string">"declinationOfSeconds"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> itemCount = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] inputSeconds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[itemCount] { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] outputStrings = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[itemCount]; IJsEngineSwitcher engineSwitcher = JsEngineSwitcher.Current; IPrecompiledScript precompiledCode = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine = engineSwitcher.CreateDefaultEngine()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!engine.SupportsScriptPrecompilation) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"{0}  {1}   "</span></span> + <span class="hljs-string"><span class="hljs-string">"  !"</span></span>, engine.Name, engine.Version); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { precompiledCode = engine.Precompile(sourceCode, <span class="hljs-string"><span class="hljs-string">"declinationOfSeconds.js"</span></span>); engine.Execute(precompiledCode); outputStrings[<span class="hljs-number"><span class="hljs-number">0</span></span>] = engine.CallFunction&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(functionName, inputSeconds[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsCompilationException e) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"     "</span></span> + <span class="hljs-string"><span class="hljs-string">" !"</span></span>); Console.WriteLine(); Console.WriteLine(JsErrorHelpers.GenerateErrorDetails(e)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsException e) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"   JavaScript-  "</span></span> + <span class="hljs-string"><span class="hljs-string">"!"</span></span>); Console.WriteLine(); Console.WriteLine(JsErrorHelpers.GenerateErrorDetails(e)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> itemIndex = <span class="hljs-number"><span class="hljs-number">1</span></span>; itemIndex &lt; itemCount; itemIndex++) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine = engineSwitcher.CreateDefaultEngine()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { engine.Execute(precompiledCode); outputStrings[itemIndex] = engine.CallFunction&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;( functionName, inputSeconds[itemIndex]); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsException e) { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"   JavaScript- "</span></span> + <span class="hljs-string"><span class="hljs-string">" !"</span></span>); Console.WriteLine(); Console.WriteLine(JsErrorHelpers.GenerateErrorDetails(e)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> itemIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; itemIndex &lt; itemCount; itemIndex++) { Console.WriteLine(outputStrings[itemIndex]); } } â€¦ } â€¦</code> </pre> <br><p>    ,         .     <code>SupportsScriptPrecompilation</code>  ,       ,  ,     .     <code>Precompile</code>  ,      ,      <code>JsCompilationException</code> . C   <code>Execute</code>      , ..   .     <code>CallFunction</code>   <code>declinationOfSeconds</code>      .     .   ,    ,           .     3        .  ,        ,        .         ,    ,      . </p><br><p>      ,     ,    .   ,  ,           .       ReactJS.NET.        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JSPool</a> ,         ( <code>System.Runtime.Caching.MemoryCache</code>  .NET Framework 4.X, <code>System.Web.Caching.Cache</code>  ASP.NET 4.X  <code>Microsoft.Extensions.Caching.Memory.IMemoryCache</code>  ASP.NET Core).      ,        (       <a href=""> </a> ).    ,       ReactJS.NET. </p><br><p>      ReactJS.NET .              .        <code>AllowJavaScriptPrecompilation</code>   <code>true</code> . </p><br><p>  ASP.NET 4.X       <code>App_Start/ReactConfig.cs</code> : </p><br><pre> <code class="cs hljs">â€¦ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ReactConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ReactSiteConfiguration.Configuration â€¦ .SetAllowJavaScriptPrecompilation(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) â€¦ ; â€¦ } } â€¦</code> </pre> <br><p>  ASP.NET Core      <code>Startup.cs</code> : </p><br><pre> <code class="cs hljs">â€¦ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env</span></span></span><span class="hljs-function">)</span></span> { â€¦ app.UseReact(config =&gt; { config â€¦ .SetAllowJavaScriptPrecompilation(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) â€¦ ; }); app.UseStaticFiles(); â€¦ } } â€¦</code> </pre> <br><p>       ,      .       <a href="">JsExecutionBenchmark</a> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BenchmarkDotNet</a> .        JS-     .    14,9 ,     ,       .          JavaScript Engine Switcher ( 3.0.4). </p><br><p>   ,      .NET Framework 4.7.2: </p><br><table><thead><tr><th align="left"> <sup> </sup> </th><th align="left"> <sup>. </sup> </th><th align="left"> <sup> . </sup> </th><th align="left"> <sup>Gen 0  . .</sup> </th><th align="left"> <sup>Gen 1  . .</sup> </th><th align="left"> <sup>Gen 2  . .</sup> </th><th align="left"> <sup>    .</sup> </th></tr></thead><tbody><tr><td rowspan="2"> <sup>ChakraCore</sup> </td><td> <sup></sup> </td><td align="right"> <sup>41,72 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>74,46 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>35,07 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>91,79 </sup> </td></tr><tr><td rowspan="2"> <sup>Jint</sup> </td><td> <sup></sup> </td><td align="right"> <sup>27,19 </sup> </td><td align="right"> <sup>2 812,50</sup> </td><td align="right"> <sup>1 343,75</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>16 374,58 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>15,54 </sup> </td><td align="right"> <sup>1 296,88</sup> </td><td align="right"> <sup>640,63</sup> </td><td align="right"> <sup>31,25</sup> </td><td align="right"> <sup>7 521,49 </sup> </td></tr><tr><td rowspan="2"> <sup>Jurassic</sup> </td><td> <sup></sup> </td><td align="right"> <sup>455,70 </sup> </td><td align="right"> <sup>2 000,00</sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>15 575,28 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>78,70 </sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>7 892,94 </sup> </td></tr><tr><td rowspan="2"> <sup>MSIE   Chakra IE JsRT</sup> </td><td> <sup></sup> </td><td align="right"> <sup>30,97 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>77,75 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>24,40 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>90,58 </sup> </td></tr><tr><td rowspan="2"> <sup>MSIE   Chakra Edge JsRT</sup> </td><td> <sup></sup> </td><td align="right"> <sup>33,14 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>78,40 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>32,86 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>95,48 </sup> </td></tr><tr><td rowspan="2"> <sup>V8</sup> </td><td> <sup></sup> </td><td align="right"> <sup>41,10 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>79,33 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>39,25 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>96,17 </sup> </td></tr></tbody></table><br><p>         ,    .NET â€”     Jurassic  5,79 ,   Jint  1,75 a.      2     ,      2       .                .      Jurassic,          : Jurassic   JS-  IL-  Reflection.Emit,    .        ,          ,      . Jint           .NET-,    .    Jint      ,             .      ,  Jint    ,    ,            .  Jint  Jurassic        . </p><br><p>      ,   C++,  MSIE   Chakra IE JsRT â€”     26,93%.    ChakraCore (18,96%),  V8 (4,71%)  MSIE   Chakra Edge JsRT    (0,85%).           Internet Explorer    Edge.            .          (   )      .   ,      -         12-17  (       ).         .       .         . </p><br><p>     .NET Core 2.0    ( V8 ,    Microsoft ClearScript,    ,   .NET Core): </p><br><table><thead><tr><th align="left"> <sup> </sup> </th><th align="left"> <sup>. </sup> </th><th align="left"> <sup> . </sup> </th><th align="left"> <sup>Gen 0  . .</sup> </th><th align="left"> <sup>Gen 1  . .</sup> </th><th align="left"> <sup>Gen 2  . .</sup> </th><th align="left"> <sup>    .</sup> </th></tr></thead><tbody><tr><td rowspan="2"> <sup>ChakraCore</sup> </td><td> <sup></sup> </td><td align="right"> <sup>43,65 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>18,07 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>36,37 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>16,59 </sup> </td></tr><tr><td rowspan="2"> <sup>Jint</sup> </td><td> <sup></sup> </td><td align="right"> <sup>24,87 </sup> </td><td align="right"> <sup>2 750,00</sup> </td><td align="right"> <sup>1 375,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>16 300,25 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>15,25 </sup> </td><td align="right"> <sup>1 281,25</sup> </td><td align="right"> <sup>593,75</sup> </td><td align="right"> <sup>62,50</sup> </td><td align="right"> <sup>7 447,44 </sup> </td></tr><tr><td rowspan="2"> <sup>Jurassic</sup> </td><td> <sup></sup> </td><td align="right"> <sup>469,97 </sup> </td><td align="right"> <sup>2 000,00</sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>15 511,70 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>80,72 </sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>7 845,98 </sup> </td></tr><tr><td rowspan="2"> <sup>MSIE   Chakra IE JsRT</sup> </td><td> <sup></sup> </td><td align="right"> <sup>31,50 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>20,28 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>24,52 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>18,78 </sup> </td></tr><tr><td rowspan="2"> <sup>MSIE   Chakra Edge JsRT</sup> </td><td> <sup></sup> </td><td align="right"> <sup>35,54 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>20,45 </sup> </td></tr><tr><td> <sup></sup> </td><td align="right"> <sup>31,44 </sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>18,99 </sup> </td></tr></tbody></table><br><p>      . ,     â€”  MSIE   Chakra Edge JsRT  (7,69%).           Chakra    . </p><br><h2>        ChakraCore  MSIE </h2><br><p>    ,  Microsoft,    ,    .     IIS    (256   32-   512   64-),     ASP.NET  JS- (,  TypeScript)   .       JavaScript Engine Switcher        .             ,        Node.js (492   32-   984   64-).   ,      ,  -    .        ChakraCore  MSIE    <code>MaxStackSize</code> ,          .         Node.js.       ,             . </p><br><h2>     NiL.JS </h2><br><p>      - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NiL</a> ,      <a href="">NiL.JS</a> . NiL.JS â€”    JS-,    .NET.      2014 ,        Jurassic  Jint.    â€”  .         ,       . </p><br><p>     .NET Framework 4.7.2    : </p><br><table><thead><tr><th align="left"> <sup> </sup> </th><th align="left"> <sup> . </sup> </th><th align="left"> <sup>Gen 0  . .</sup> </th><th align="left"> <sup>Gen 1  . .</sup> </th><th align="left"> <sup>Gen 2  . .</sup> </th><th align="left"> <sup>    .</sup> </th></tr></thead><tbody><tr><td> <sup>Jint</sup> </td><td align="right"> <sup>27,19 </sup> </td><td align="right"> <sup>2 812,50</sup> </td><td align="right"> <sup>1 343,75</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>16 374,58 </sup> </td></tr><tr><td> <sup>Jurassic</sup> </td><td align="right"> <sup>455,70 </sup> </td><td align="right"> <sup>2 000,00</sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>15 575,28 </sup> </td></tr><tr><td> <sup>NiL</sup> </td><td align="right"> <sup>17,80 </sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>4 424,09 </sup> </td></tr></tbody></table><br><p>     .NET Core 2.0  : </p><br><table><thead><tr><th align="left"> <sup> </sup> </th><th align="left"> <sup> . </sup> </th><th align="left"> <sup>Gen 0  . .</sup> </th><th align="left"> <sup>Gen 1  . .</sup> </th><th align="left"> <sup>Gen 2  . .</sup> </th><th align="left"> <sup>    .</sup> </th></tr></thead><tbody><tr><td> <sup>Jint</sup> </td><td align="right"> <sup>24,87 </sup> </td><td align="right"> <sup>2 750,00</sup> </td><td align="right"> <sup>1 375,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>16 300,25 </sup> </td></tr><tr><td> <sup>Jurassic</sup> </td><td align="right"> <sup>469,97 </sup> </td><td align="right"> <sup>2 000,00</sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>15 511,70 </sup> </td></tr><tr><td> <sup>NiL</sup> </td><td align="right"> <sup>19,67 </sup> </td><td align="right"> <sup>1 000,00</sup> </td><td align="center"> <sup>-</sup> </td><td align="center"> <sup>-</sup> </td><td align="right"> <sup>4 419,95 </sup> </td></tr></tbody></table><br><p>       .        ,     (     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a> ).   ,   Jint        2016       ,       .   <a href="">   3.0.0 Beta 1353</a> ,    Jint    2,4  ,  NiL.JS  2.5.1200,        . </p><br><p>   NiL.JS  .         -  ,      -  ,    .    Bundle Transformer,  JavaScript Engine Switcher,     Hogan  Handlebars,      ReactJS.NET.              NiL.JS. </p><br><h2> å‚è€ƒæ–‡çŒ® </h2><br><ol><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JavaScript Engine Switcher</a>  GitHub </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> JavaScript Engine Switcher</a> </li><li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Â«  JavaScript Engine Switcher 2.XÂ»</a> </li><li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">JSPool</a>  GitHub </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  ReactJS.NET</a> </li><li>   <a href="">ReactJS.NET</a>  GitHub </li></ol><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439446/">https://habr.com/ru/post/zh-CN439446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439432/index.html">å¦‚ä½•åœ¨1.5å¹´å†…æˆä¸ºä¸€åJavaå¼€å‘äººå‘˜</a></li>
<li><a href="../zh-CN439434/index.html">NestJS-Node.jsä¸Šçš„çœŸå®åç«¯</a></li>
<li><a href="../zh-CN439436/index.html">åœ¨ä¿„ç½—æ–¯å‡å°‘å°æ‰¹é‡ç”µå­äº§å“çš„æˆæœ¬ã€‚ WOLNAç½‘ç»œå¹¿æ’­æ¡ˆä¾‹</a></li>
<li><a href="../zh-CN439440/index.html">å®æ–½Zimbraåä½œå¼€æºï¼Œé€šè¿‡ADæˆæƒï¼Œå¹¶è‡ªåŠ¨åˆ›å»ºé‚®ç®±</a></li>
<li><a href="../zh-CN439442/index.html">æœ±è‰å¨… æŠ¥å‘Šå’Œæ–‡ä»¶ç”Ÿæˆå™¨</a></li>
<li><a href="../zh-CN439448/index.html">æ‚¨å¸Œæœ›æ¯•ä¸šç”Ÿå¯¹è™šæ‹ŸåŒ–æœ‰ä½•ç–‘é—®ï¼Ÿ</a></li>
<li><a href="../zh-CN439450/index.html">Milanderå…¬å¸çš„å®¶ç”¨å¾®æ§åˆ¶å™¨ä¸Šçš„RS-485</a></li>
<li><a href="../zh-CN439454/index.html">ç¨‹åºå³è‰ºæœ¯-ä¸€ç§æ–°çš„è½¯ä»¶ç®¡ç†èŒƒä¾‹</a></li>
<li><a href="../zh-CN439456/index.html">æ—¶é«¦æ’­å®¢ï¼ƒ2</a></li>
<li><a href="../zh-CN439458/index.html">æˆ‘ä»¬å¦‚ä½•å°†Republicç½‘ç«™ç¿»è¯‘æˆKubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>