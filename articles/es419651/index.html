<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Ni GA ni YM. C贸mo hicimos nuestro propio clickstream   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recopilamos m谩s de dos mil millones de eventos anal铆ticos por d铆a. Gracias a esto, podemos descubrir un mont贸n de cosas necesarias: si hacen clic en l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ni GA ni YM. C贸mo hicimos nuestro propio clickstream</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/419651/"><p>  Recopilamos m谩s de dos mil millones de eventos anal铆ticos por d铆a.  Gracias a esto, podemos descubrir un mont贸n de cosas necesarias: si hacen clic en los corazones m谩s que en las estrellas, a qu茅 horas escriben descripciones m谩s detalladas, en qu茅 regiones a menudo pierden los botones verdes. </p><br><p>  El sistema de recopilaci贸n y an谩lisis de eventos se puede llamar gen茅ricamente clickstream.  Le contar茅 sobre el aspecto t茅cnico de la secuencia de clics en Avito: la organizaci贸n de eventos, su env铆o y entrega, an谩lisis, informes.  驴Por qu茅 quieres el tuyo, si hay Google Analytics y Yandex.Metrica, a quienes los desarrolladores de clickstream arruinan la vida y por qu茅 los codificadores no pueden olvidar el php? </p><br><p><img src="https://habrastorage.org/webt/b_/yj/uz/b_yjuzzjoz1p2bhzpwnnubrhrt0.png"></p><a name="habracut"></a><br><h1 id="obo-mne">  Acerca de mi </h1><br><p>  Dmitry Khasanov, diez a帽os en desarrollo web, tres a帽os en Avito.  Trabajo en un equipo de plataforma, desarrollo herramientas de infraestructura comunes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Amo los hackathons</a> . </p><br><h1 id="zadacha">  Desaf铆o </h1><br><p>  El negocio requiere una comprensi贸n profunda de los procesos que tienen lugar en el sitio.  Por ejemplo, al registrar un usuario, quiero saber desde qu茅 regi贸n, desde qu茅 dispositivo y a trav茅s de qu茅 navegador ha iniciado sesi贸n el usuario.  C贸mo se rellenan los campos del formulario, si se envi贸 o si el usuario se dio por vencido.  Y si te rendiste, a qu茅 paso.  Y cuanto tiempo tom贸. </p><br><p> Me gustar铆a saber si har谩n clic en el bot贸n con m谩s frecuencia si se vuelve a pintar en verde.  驴Los usuarios de aplicaciones m贸viles o del sitio presionar谩n el bot贸n verde con m谩s frecuencia en Murmansk o Vladivostok, de d铆a o de noche?  usuarios que vinieron del principal o de la b煤squeda;  quien compr贸 antes en Avito o quien vino por primera vez. </p><br><p>  Todos estos signos: sistema operativo, ID de usuario, hora de solicitud, dispositivo, navegador, valores en los campos, deben estar disponibles para su an谩lisis.  Recopilar, estructurar, dar acceso r谩pido a los datos. </p><br><p>  Adem谩s, a menudo se requiere dividir el flujo de eventos.  Los proyectos deben tomar medidas cuando ocurren ciertos eventos.  Por ejemplo, de esta manera, se obtiene retroalimentaci贸n para reentrenar el modelo para el reconocimiento de patrones y la moderaci贸n autom谩tica, y se compilan estad铆sticas en tiempo real. </p><br><p>  Usando clickstream como producto, deber铆a ser f谩cil para los programadores enviar eventos desde un proyecto, y para los analistas gestionar eventos recopilados y crear una variedad de informes que muestran tendencias e hip贸tesis de apoyo. </p><br><p>  <strong>Informes basados en el flujo de eventos.</strong> <br>  <strong>Ejemplo 1</strong> <br><img src="https://habrastorage.org/webt/lt/vt/e3/ltvte3vhpz37df89hbwurg1gjno.png"></p><br><p>  <strong>Ejemplo 2</strong> <br><img src="https://habrastorage.org/webt/bl/he/wc/blhewctbesnuyilsxv4zozn7tlu.png"></p><br><h1 id="gotovye-instrumenty">  Herramientas acabadas </h1><br><p>  Conocemos Yandex Metric y Google Analytics, lo usamos para algunas tareas.  Con su ayuda, es bueno y r谩pido recopilar datos anal铆ticos de los front-end.  Pero para exportar datos de backends a sistemas anal铆ticos externos, debe realizar integraciones complejas. </p><br><p>  Con herramientas externas, debe resolver de forma independiente el problema de dividir el flujo de eventos. </p><br><p>  La informaci贸n anal铆tica es muy valiosa.  Lo hemos estado recolectando durante a帽os, nos permite saber con gran detalle c贸mo se comportan nuestros usuarios.  No quiero compartir ese conocimiento con el mundo exterior. </p><br><p>  La legislaci贸n obliga a almacenar datos en el territorio de Rusia. </p><br><p>  Estas razones fueron suficientes para desarrollar nuestra propia soluci贸n como la herramienta principal para recopilar y procesar datos anal铆ticos. </p><br><h1 id="reshenie">  Soluci贸n </h1><br><p>  Los eventos se env铆an a trav茅s del transporte de alto rendimiento (Event Streaming Processing, ESP) en el almacenamiento (Data Warehouse, DWH).  Sobre la base de los datos en el repositorio, se crean informes anal铆ticos. </p><br><h3 id="sobytie">  El evento </h3><br><p>  Entidad central.  En s铆 mismo, significa hecho.  Algo concreto sucedi贸 en la unidad de tiempo designada. </p><br><p>  Es necesario distinguir un evento de otro.  Este es el identificador 煤nico del evento. </p><br><p>  Tambi茅n interesado en el momento de ocurrencia de eventos.  Lo transmitimos en cada evento con una precisi贸n de microsegundos.  En los eventos que llegan desde las interfaces, tambi茅n fijamos el tiempo en el dispositivo del cliente para restaurar con mayor precisi贸n la secuencia de acciones. </p><br><h3 id="pole">  El campo </h3><br><p>  Un evento consta de campos.  El campo es la unidad sem谩ntica m谩s peque帽a del sistema anal铆tico.  En el p谩rrafo anterior hay ejemplos de campos: identificador de evento, hora de env铆o. </p><br><p>  Atributos de campo: tipo (cadena, n煤mero, matriz), obligatorio. </p><br><h3 id="okruzhenie">  El medio ambiente </h3><br><p>  El mismo evento puede ocurrir en diferentes partes del sistema: por ejemplo, la autorizaci贸n es posible en el sitio o en una aplicaci贸n m贸vil.  En este caso, enviamos el mismo evento, pero siempre agregamos el identificador 煤nico del origen del evento dentro. </p><br><p>  Las fuentes son notablemente diferentes entre s铆.  Pueden ser demonios internos y coronas, un servicio frontend o backend, una aplicaci贸n m贸vil.  Parte de los campos deben enviarse con cada evento de una fuente en particular. </p><br><p>  Existe el concepto de "medio ambiente".  Esta es una agrupaci贸n l贸gica de eventos por origen con la capacidad de establecer campos comunes para todos los eventos de origen. </p><br><p>  Ejemplos de entornos: "back-end del servicio A", "interfaz del servicio A", "ios-aplicaci贸n del servicio A". </p><br><h3 id="spravochnik-sobytiy">  Directorio de eventos </h3><br><p>  Todos los eventos existentes se describen en un directorio que los desarrolladores y analistas pueden editar.  Los eventos se agrupan l贸gicamente por entorno, cada evento tiene un propietario, se mantiene un registro de cambios en el directorio. </p><br><p>  Por el momento, el directorio describe varios cientos de campos, varias decenas de entornos y m谩s de mil eventos. </p><br><h3 id="langpak">  Langpack </h3><br><p>  Rechazamos la tortura y ya no obligamos a los desarrolladores a escribir manualmente el c贸digo de env铆o de eventos.  En cambio, seg煤n el directorio, generamos un conjunto de archivos para cada uno de los idiomas de servidor admitidos por la compa帽铆a: php, go o python.  Tal c贸digo generado se llama "langpack". </p><br><p>  Los archivos en el langpack son lo m谩s simples posible, no conocen la l贸gica empresarial de los proyectos.  Este es un conjunto de captadores y establecedores de campo para cada uno de los eventos y un c贸digo para enviar el evento. </p><br><p>  Se crea un langpack para cada entorno.  Se descompone en un repositorio de paquetes (satis para php, pypi para python).  Se actualiza autom谩ticamente cuando se realizan cambios en el directorio. </p><br><p>  No puedes dejar de escribir en PHP.  El c贸digo para el servicio que genera los langpacks est谩 escrito en Go.  La compa帽铆a tiene suficientes proyectos PHP, as铆 que tuve que recordar mi lenguaje de programaci贸n favorito de tres letras y generar c贸digo PHP en Go.  Si se deja llevar un poco, tambi茅n puede generar pruebas para probar el c贸digo generado con estas pruebas. </p><br><h3 id="versionirovanie">  Versionado </h3><br><p>  La referencia puede ser editada.  El c贸digo en la batalla no puede ser roto.  Generamos el c贸digo de combate basado en el directorio.  Peligrosamente </p><br><p>  Despu茅s de cada cambio del evento, se crea una nueva versi贸n en el directorio.  Todas las versiones de eventos creadas viven para siempre en el directorio.  Entonces resolvemos el problema de la inmutabilidad de eventos espec铆ficos.  Los proyectos siempre indican con qu茅 versi贸n del evento estamos trabajando. </p><br><p>  Si el c贸digo de langpack cambia (por ejemplo, solo hab铆a setters, pero ahora tambi茅n decidimos agregar getters), cree una nueva versi贸n de langpack.  Ella tambi茅n vivir谩 para siempre.  Los proyectos siempre solicitan una versi贸n espec铆fica del langpack para su entorno.  Entonces resolvemos el problema de la invariancia de la interfaz langpack. </p><br><p>  Usamos semver.  La versi贸n de cada langpack consta de tres n煤meros.  El primero es siempre cero, el segundo es la versi贸n del c贸digo langpack, el tercero es el incremento.  El tercer d铆gito cambia con mayor frecuencia, despu茅s de cada cambio de eventos. </p><br><p>  El control de versiones de dos niveles te permite editar el directorio sin romper el c贸digo en la batalla.  Se basa en dos principios: no puede eliminar nada;  No puede editar entidades creadas, solo cree copias modificadas una al lado de la otra. </p><br><h3 id="transport">  Transporte </h3><br><p>  A diferencia de los chicos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Badoo en LSD</a> , nunca aprendimos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a escribir archivos maravillosamente</a> .  Y creemos que NSQ no es solo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un servidor de colas</a> , sino tambi茅n un transporte para eventos. </p><br><p>  Ocultaron NSQ detr谩s de una peque帽a capa de c贸digo go, distribuyeron los recopiladores para cada nodo en el cl煤ster de Kubernetes utilizando conjuntos de demonios y escribieron consumidores que pueden agregar eventos a diferentes fuentes. </p><br><p>  Por el momento, el transporte ofrece alrededor de dos mil millones de eventos por d铆a.  Bajo tal carga, treinta coleccionistas trabajan con cierto margen.  Cada uno consume un poco m谩s de n煤cleo de procesador y un poco m谩s de un gigabyte de memoria. </p><br><h3 id="routing-sobytiy">  Enrutamiento de eventos </h3><br><p>  Los remitentes de eventos pueden ser proyectos que viven dentro o fuera de nuestro cl煤ster.  Dentro de los cl煤steres, estos son backends de servicio, coronas, daemons, proyectos de infraestructura y una intranet.  Afuera, los eventos provienen de los frentes de proyectos p煤blicos, de aplicaciones m贸viles y proyectos de socios. </p><br><p>  Para recibir eventos fuera del cl煤ster, utilizamos un proxy.  Un punto de entrada com煤n con un peque帽o filtrado del flujo de eventos, con la posibilidad de su enriquecimiento.  Env铆o posterior al transporte seg煤n el esquema general. </p><br><p>  Esquema de enrutamiento general: cada evento puede tener un conjunto de destinatarios.  Los posibles destinatarios incluyen un repositorio anal铆tico compartido (DWH), rebbits o proyectos monga interesados en ciertos eventos.  El 煤ltimo caso, por ejemplo, se usa para reentrenar los modelos de moderaci贸n autom谩tica de anuncios.  Las modelos escuchan ciertos eventos y obtienen los comentarios necesarios. </p><br><p>  Del lado de los proyectos no hay conocimiento sobre enrutamiento.  Env铆an eventos utilizando langpacks en los que se cosen las direcciones de los coleccionistas comunes. </p><br><h3 id="hranilische">  Almacenamiento </h3><br><p>  El repositorio principal de eventos es el HP Vertica, unas pocas docenas de terabytes.  Una base de columna con caracter铆sticas adecuadas para nuestros analistas.  Interfaz: Tableau para informes. </p><br><p>  Es m谩s eficiente registrar eventos en nuestro almacenamiento en grandes lotes.  Delante del almacenamiento hay un b煤fer en forma de Mongo.  Colecciones de eliminaci贸n autom谩tica creadas autom谩ticamente para cada hora.  Las colecciones se almacenan durante varios d铆as para poder reiniciar la correcci贸n de pruebas en Vertica si algo sale mal. </p><br><p>  Lectura del buffer Mongo en scripts de mascotas.  Los guiones est谩n guiados por una referencia, tratamos de no mantener la l贸gica de negocios aqu铆.  En esta etapa, el enriquecimiento de eventos es posible. </p><br><h1 id="evolyuciya">  Evoluci贸n </h1><br><h3 id="ruchnye-tancy-v-temnote">  Mano bailando en la oscuridad </h3><br><p>  La necesidad de registrar eventos surgi贸 mucho antes que la conciencia de la necesidad de mantener un directorio.  Los desarrolladores de cada uno de los proyectos idearon una forma de enviar eventos en busca de transporte.  Esto gener贸 una gran cantidad de c贸digo en diferentes idiomas, en proyectos diferentes, pero resolviendo un problema. </p><br><p>  A menudo, dentro del c贸digo de env铆o de eventos, los bits de la l贸gica empresarial perduraron.  El c贸digo con este conocimiento no se puede portar a otros proyectos.  Al refactorizar, la l贸gica empresarial debe devolverse al proyecto, dejando en el c贸digo del evento solo el cumplimiento del formato de datos especificado. </p><br><p>  En esta etapa, no hab铆a un directorio de eventos.  Para comprender qu茅 eventos ya se est谩n registrando, qu茅 campos ten铆an los eventos, solo fue posible mirando el c贸digo.  Para saber que el desarrollador accidentalmente dej贸 de escribir datos en el campo requerido, fue posible al crear el informe, si presta atenci贸n espec铆ficamente a esto. </p><br><p>  No hubo muchos eventos.  Se agregaron colecciones de amortiguadores en mongos seg煤n sea necesario.  A medida que crec铆a el n煤mero de eventos, era necesario redirigir manualmente los eventos a otras colecciones, para crear las colecciones necesarias.  La decisi贸n de colocar el evento en una colecci贸n de b煤fer particular se tom贸 al momento del env铆o, en el lado del proyecto.  El transporte era fluido, el cliente era td-agent. </p><br><h3 id="osvedomlyonnyy-rassinhron">  Consciente asincr贸nico </h3><br><p>  Se decidi贸 crear un directorio de todos los eventos existentes.  Analizamos el c贸digo de los backends, sacamos parte de la informaci贸n de all铆.  Obligamos a los desarrolladores a tener esto en cuenta en el directorio con cada cambio en el c贸digo del evento. </p><br><p>  Los eventos que llegan desde las interfaces y las aplicaciones m贸viles se describieron manualmente, a veces capturando la informaci贸n necesaria del flujo de eventos a nivel de transporte. </p><br><p>  Los desarrolladores saben c贸mo olvidar.  Esto condujo a una desincronizaci贸n del directorio y el c贸digo, pero el directorio mostr贸 la imagen general. </p><br><p>  El n煤mero de colecciones de b煤fer ha crecido significativamente, el trabajo manual para mantenerlas ha aumentado significativamente.  Una persona irremplazable apareci贸 con un mont贸n de conocimiento secreto sobre el almacenamiento del b煤fer. </p><br><h3 id="novyy-transport">  Nuevo transporte </h3><br><p>  Crearon un transporte compartido, ESP, consciente de todos los puntos de entrega de eventos.  Lo convirtieron en un 煤nico punto de recepci贸n.  Esto hizo posible controlar todos los flujos de eventos.  Los proyectos dejaron de acceder directamente al almacenamiento intermedio. </p><br><h3 id="prosveschyonnyy-klikstrimizm">  Clickstreamism iluminado </h3><br><p>  Seg煤n el directorio, se generaron langpacks.  No permiten la creaci贸n de eventos inv谩lidos. </p><br><p>  Se introdujeron comprobaciones autom谩ticas para la exactitud de los eventos que llegan desde aplicaciones frontales y m贸viles.  En este caso, no dejamos de escribir eventos para no perder datos, sino que registramos los errores y los enviamos a los desarrolladores. </p><br><p>  Los eventos raros en backends que son dif铆ciles de refactorizar y que a煤n no se env铆an a trav茅s de langpacks son validados por una biblioteca separada de acuerdo con las reglas del directorio.  En caso de errores, inicie una excepci贸n que bloquee la implementaci贸n. </p><br><p>  Tengo un sistema que tiende a coincidir con el directorio.  Bonificaciones: transparencia, manejabilidad, velocidad de creaci贸n y cambio de eventos. </p><br><h1 id="posleslovie">  Ep铆logo </h1><br><p>  Las principales dificultades y lecciones fueron de organizaci贸n.  Es dif铆cil vincular iniciativas que involucren a varios equipos.  No es f谩cil cambiar el c贸digo de un gran proyecto antiguo.  Las habilidades de comunicarse con otros equipos, dividiendo las tareas en una integraci贸n relativamente independiente y pensada con la posibilidad de una ayuda de despliegue independiente.  Los desarrolladores de Clickstream ya no aman a los equipos de productos cuando comienza la fase de integraci贸n de una nueva soluci贸n.  Si las interfaces cambian, el trabajo se agrega a todos. </p><br><p>  Crear un directorio fue una muy buena idea.  Se convirti贸 en la 煤nica fuente de verdad, siempre se puede recurrir a 茅l en caso de discrepancias en el c贸digo.  Una gran cantidad de automatizaci贸n est谩 vinculada al directorio: verificaciones, enrutamiento de eventos, generaci贸n de c贸digo. </p><br><p>  La infraestructura no necesita saber acerca de la l贸gica empresarial.  Se帽ales del surgimiento de la l贸gica empresarial: los eventos cambian en el camino desde el proyecto hasta el repositorio;  Cambiar el transporte sin cambiar los proyectos se vuelve imposible.  En el lado de la infraestructura, debe haber conocimiento sobre la composici贸n de los eventos, los tipos de campos y su obligatoriedad.  Del lado del producto, el significado l贸gico de estos campos. </p><br><p>  Siempre hay espacio para crecer.  T茅cnicamente, esto es un aumento en el n煤mero de eventos, una disminuci贸n en el tiempo desde la creaci贸n del evento hasta el inicio del registro de datos, la eliminaci贸n del trabajo manual en todas las etapas. </p><br><p>  Hay un par de ideas audaces.  Obtener un gr谩fico detallado de las transiciones de los usuarios, configurar eventos sobre la marcha sin implementar el servicio.  Pero m谩s sobre eso en los siguientes art铆culos. </p><br><p>  PD: Habl茅 sobre este tema en la reuni贸n Backend United # 1.  Vinagreta  Puede ver <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">presentaci贸n</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">video</a> de la reuni贸n. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419651/">https://habr.com/ru/post/es419651/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419637/index.html">[Traducci贸n] C贸mo funciona Graal - Compilador JVM JVM de Java</a></li>
<li><a href="../es419641/index.html">Crear una IA simple de C # en Unity</a></li>
<li><a href="../es419643/index.html">Conferencia de Ingenier铆a de Software EPAM de Minsk: Hazlo Real</a></li>
<li><a href="../es419647/index.html">Seminario Viernes negro en comercio electr贸nico. Secretos de supervivencia, 16 de agosto, Mosc煤</a></li>
<li><a href="../es419649/index.html">Un poco sobre los gatos, o qu茅 CAT elegimos para los podcasts de sincronizaci贸n</a></li>
<li><a href="../es419653/index.html">C贸mo hacer b煤squedas de usuarios en GitHub sin React + RxJS 6 + Recompose</a></li>
<li><a href="../es419655/index.html">M煤sica en el departamento. Incrustaci贸n</a></li>
<li><a href="../es419657/index.html">C贸mo se desarroll贸 la inteligencia colectiva para una bandada de drones</a></li>
<li><a href="../es419659/index.html">Donde Hollywood retrata a los hackers correctamente y d贸nde, err贸neamente</a></li>
<li><a href="../es419661/index.html">Hacer una estaci贸n de radio de GTA: San Andreas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>