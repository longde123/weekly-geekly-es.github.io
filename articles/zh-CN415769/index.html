<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ ğŸ âœŠğŸ½ é€šè¿‡TeamCityè®¾ç½®è‡ªåŠ¨å¯åŠ¨Androidåº”ç”¨ç¨‹åºçš„UIæµ‹è¯• ğŸŒ ğŸ‘©ğŸ¿â€ğŸ”§ ğŸ‘©ğŸ¾â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»»ä½•å¼€å‘è‡ªæˆ‘æµ‹è¯•å®è·µçš„æµ‹è¯•äººå‘˜è¿Ÿæ—©éƒ½ä¼šé¢ä¸´è‡ªä¸»æ‰§è¡Œæµ‹è¯•çš„é—®é¢˜ã€‚ æ­¤å¤–ï¼Œå¦‚æœä¸“å®¶ç»éªŒä¸°å¯Œï¼Œé‚£ä¹ˆä»–å°†å°½æ—©å¤„ç†æ­¤é—®é¢˜ã€‚ å› æ­¤ï¼Œåœ¨é¦–æ¬¡æˆåŠŸåœ¨æœ¬åœ°è¿è¡Œè‡ªåŠ¨æµ‹è¯•ä¹‹åï¼Œæˆ‘å†³å®šç«‹å³åœ¨TeamCityä¸­é…ç½®å¯åŠ¨ã€‚ 

 æˆ‘æ³¨æ„åˆ°ï¼Œåœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œå‡ ä¹æ²¡æœ‰å…³äºè¿œç¨‹å¯åŠ¨Androidå·¥å…·æµ‹è¯•çš„ä¸“ä¸šçŸ¥è¯†ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸åŠªåŠ›ç ”ç©¶...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é€šè¿‡TeamCityè®¾ç½®è‡ªåŠ¨å¯åŠ¨Androidåº”ç”¨ç¨‹åºçš„UIæµ‹è¯•</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415769/"> ä»»ä½•å¼€å‘è‡ªæˆ‘æµ‹è¯•å®è·µçš„æµ‹è¯•äººå‘˜è¿Ÿæ—©éƒ½ä¼šé¢ä¸´è‡ªä¸»æ‰§è¡Œæµ‹è¯•çš„é—®é¢˜ã€‚ æ­¤å¤–ï¼Œå¦‚æœä¸“å®¶ç»éªŒä¸°å¯Œï¼Œé‚£ä¹ˆä»–å°†å°½æ—©å¤„ç†æ­¤é—®é¢˜ã€‚ å› æ­¤ï¼Œåœ¨é¦–æ¬¡æˆåŠŸåœ¨æœ¬åœ°è¿è¡Œè‡ªåŠ¨æµ‹è¯•ä¹‹åï¼Œæˆ‘å†³å®šç«‹å³åœ¨TeamCityä¸­é…ç½®å¯åŠ¨ã€‚ <br><br> æˆ‘æ³¨æ„åˆ°ï¼Œåœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œå‡ ä¹æ²¡æœ‰å…³äºè¿œç¨‹å¯åŠ¨Androidå·¥å…·æµ‹è¯•çš„ä¸“ä¸šçŸ¥è¯†ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸åŠªåŠ›ç ”ç©¶Googleï¼Œä½†åœ¨é‚£é‡Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°ä»»ä½•è¯¦ç»†çš„æŒ‡å—ã€‚ å› æ­¤ï¼Œæˆ‘å†³å®šå–æ¶ˆè¿™æ¡æŒ‡ä»¤ã€‚ <br><a name="habracut"></a><br> åœ¨å…¥å£å¤„ï¼Œæˆ‘ä»¬æœ‰ï¼š <br><br><ul><li> æµ‹è¯•åœ¨æœ¬åœ°æˆåŠŸè¿è¡Œ </li><li> è¿è¡ŒTeamCityæœåŠ¡å™¨ </li><li>  Debianä¸Šå…·æœ‰KVMå’ŒXçš„æœåŠ¡å™¨ </li></ul><br>  <i>ç«‹å³å…³äºå°†åœ¨å…¶ä¸­å¯åŠ¨æœåŠ¡å™¨çš„å…è´£å£°æ˜ï¼šè®¾ç½®æ“ä½œç³»ç»Ÿï¼Œç¡¬ä»¶è™šæ‹ŸåŒ–å’Œå›¾å½¢å¤–å£³ä¸æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ï¼Œå› æ­¤å°†è¢«çœç•¥ã€‚</i> <br><br><h3> å®‰è£…å’Œé…ç½®TeamCityä»£ç† </h3><br> è®©æˆ‘ä»¬ä»Javaå¼€å§‹ã€‚ è¿™é‡Œæœ€ä¸»è¦çš„æ˜¯é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬ã€‚ æˆ‘æœ‰3ä¸ªä¾èµ–é¡¹ï¼šæµ‹è¯•æœ¬èº«ï¼Œandroidå·¥å…·å’Œteamcityä»£ç†ã€‚ æˆ‘åœæ­¢åœ¨ç‰ˆæœ¬8ä¸Šä¸ºæ‰€æœ‰äººä½¿ç”¨ä¸€ä¸ªJVMã€‚ å¦‚æœæ‚¨ä¸å¤ªå¹¸è¿ï¼Œå¹¶ä¸”ä¼šå‘ç”Ÿå†²çªï¼Œåˆ™å¿…é¡»åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šé…ç½®ä½¿ç”¨å¤šä¸ªJavaç‰ˆæœ¬ã€‚ è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šå¦‚æœæ‚¨æœ‰debianï¼Œé‚£ä¹ˆé¦–å…ˆæ‚¨éœ€è¦æ·»åŠ webupd8teamå­˜å‚¨åº“ï¼ˆGoogleé€Ÿåº¦éå¸¸å¿«ï¼‰ã€‚ <br><br><pre><code class="bash hljs">sudo apt-get install oracle-java8-installer sudo apt-get install oracle-java8-set-default</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåœ¨è¯¥ç”¨æˆ·ä¸‹å°†å¯åŠ¨ä»£ç†ï¼Œç„¶åå¯åŠ¨å…¶ä»–æ‰€æœ‰ç”¨æˆ·ã€‚ ä¸è¦å¿˜è®°è®¾ç½®å¯†ç ã€‚ <br><br><pre> <code class="bash hljs">sudo useradd -d /home/tc_agent -s /bin/bash -m tc_agent sudo passwd tc_agent</code> </pre> <br> å¯ä»¥åœ¨æ‚¨å›¢é˜Ÿçš„Webç•Œé¢ä¸­è¿›è¡Œä»£ç†åˆ†å‘ã€‚ ä¸ºæ­¤ï¼Œè¯·è½¬åˆ°â€œ <i>ä»£ç†â€</i>éƒ¨åˆ†ï¼Œç„¶åå•å‡»å³ä¸Šè§’çš„â€œ <i>å®‰è£…æ„å»ºä»£ç†â€</i>é“¾æ¥ã€‚ ä¸‹è½½å¹¶è§£å‹ç¼©åˆ°æœåŠ¡å™¨ä¸Šæ‰€éœ€çš„æ–‡ä»¶å¤¹ï¼ˆæˆ‘å»ºè®®æˆ‘ä»¬ç”¨æˆ·çš„ä¸»æ–‡ä»¶å¤¹- <code>/home/tc_agent</code> ï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œæ·»åŠ è¿è¡Œæ‰€æœ‰è„šæœ¬çš„æƒé™ï¼š <br><br><pre> <code class="bash hljs">sudo chmod +x /home/tc_agent/BuildAgent/bin/*</code> </pre> <br> å¦‚æœæ‚¨çš„teamcityç‰ˆæœ¬æ”¯æŒAgent Pushï¼Œé‚£ä¹ˆå®ƒä¼šæ›´å®¹æ˜“ã€‚ åªéœ€åœ¨Webç•Œé¢ä¸­æ‰“å¼€ç›¸åº”çš„é€‰é¡¹å¡ï¼Œå•å‡»<i>Install Agent ...</i>æŒ‰é’®ï¼Œç„¶åæŒ‰ç…§è¯´æ˜è¿›è¡Œæ“ä½œå³å¯ã€‚ <br><br> æˆ‘ä»¬é…ç½®ä¸€ä¸ªé…ç½®ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è¿œç¨‹å®‰è£…ï¼Œåˆ™è¯´æ˜å®ƒå·²ç»åˆ›å»ºï¼Œæ‚¨åªéœ€è¦åœ¨å…¶ä¸­æŒ‡å®šä»£ç†åç§°å³å¯ã€‚ å¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/tc_agent/BuildAgent/conf cp buildAgent.dist.properties buildAgent.properties nano buildAgent.properties</code> </pre> <br>  <code>serverUrl=</code>æœåŠ¡å™¨Webç•Œé¢<code>serverUrl=</code>åœ°å€<code>serverUrl=</code> ï¼Œå¹¶<code>name=</code>ä»£ç†<code>name=</code>å”¯ä¸€åç§°<code>serverUrl=</code> <code>name=</code> ã€‚ å¦‚æœæ‚¨æœ‰å¤šä¸ªä»£ç†ç¨‹åºæˆ–é»˜è®¤ç«¯å£ï¼ˆ9090ï¼‰ç¹å¿™ï¼Œè¯·ä½¿ç”¨<code>ownPort=</code>å‚æ•°è®¾ç½®æ‚¨è‡ªå·±çš„<code>ownPort=</code> ã€‚ <br><br> æˆ‘ä»¬<code>/home/tc_agent/BuildAgent/bin/agent.sh start</code>å‘½ä»¤<code>/home/tc_agent/BuildAgent/bin/agent.sh start</code> ã€‚ å¦‚æœä¸€åˆ‡é…ç½®æ­£ç¡®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åœ¨â€œ <i>æœªæˆæƒâ€</i>é€‰é¡¹å¡ä¸Šçœ‹åˆ°æˆ‘ä»¬çš„ä»£ç†ã€‚ æˆ‘ä»¬æˆæƒï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ã€‚ <br><br> è¦è‡ªåŠ¨å¯åŠ¨ä»£ç†ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å†…å®¹åˆ›å»º<code>/etc/init.d/teamcity_agent</code>è„šæœ¬ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash BINARY="/home/tc_agent/BuildAgent/bin/agent.sh" RUNAS="tc_agent" LOGFILE="/home/tc_agent/BuildAgent/logs/start.log" CMD="$BINARY $1 $2" runuser - "$RUNAS" -c "$CMD &gt; $LOGFILE" cat $LOGFILE</span></span></code> </pre><br> æ·»åŠ è¿è¡Œ<code>sudo chmod +x /etc/init.d/teamcity_agent</code>çš„æƒé™ï¼Œå¹¶å°†<code>/etc/init.d/teamcity_agent start</code>è¡Œæ·»åŠ åˆ°æ–‡ä»¶<code>/etc/rc.local</code> ã€‚ <br><br> æ§åˆ¶é‡æ–°å¯åŠ¨ï¼Œä»£ç†å·²ä¸Šå‡ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚ <br><br><h3> å®‰è£…Android SDKå’Œæ¨¡æ‹Ÿå™¨ </h3><br> ä¸‹è½½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">android sdkå·¥å…·</a> ï¼ˆä»…å‘½ä»¤è¡Œå·¥å…·ï¼‰ï¼Œç„¶åå°†å…¶è§£å‹ç¼©åˆ°æ‰€éœ€ç›®å½•ä¸­ã€‚ åˆ›å»ºä¸€ä¸ªç›®å½•æ¥å­˜å‚¨å°†æ¥çš„AVDå›¾åƒï¼ˆåº”è¯¥æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼‰ã€‚ å¯¹æˆ‘æ¥è¯´ï¼Œç®¡ç†å‘˜å·²å°†ä¸»å­˜å‚¨åº“è¿æ¥åˆ°<code>/var,</code>ç›®å½•<code>/var,</code>æˆ‘å°†æŠŠæ‰€æœ‰å†…å®¹æ”¾åœ¨é‚£é‡Œã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ–‡ä»¶çš„æ‰€æœ‰è€…æ›´æ”¹ä¸ºæˆ‘ä»¬çš„ç”¨æˆ·ï¼Œç„¶åæœ€å¥½åœ¨ä»–çš„é¢†å¯¼ä¸‹å®Œæˆä¸‹ä¸€æ­¥ã€‚ <br><br><pre> <code class="bash hljs">sudo chown tc_agent -R /var/opt/android-sdk sudo mkdir /var/opt/.android sudo chown tc_agent /var/opt/.android</code> </pre> <br> æ·»åŠ ç¯å¢ƒå˜é‡ã€‚ æ‰“å¼€æ–‡ä»¶<code>/home/tc_agent/.bash_profile</code>è¿›è¡Œç¼–è¾‘å’Œç¼–å†™ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ANDROID_HOME=/var/opt/android-sdk <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ANDROID_AVD_HOME=/var/opt/.android/avd <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/platform-tools:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/tools:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span></code> </pre> <br> æˆ‘ä»¬é‡æ–°å¯åŠ¨å¹¶éªŒè¯å˜é‡æ˜¯å¦åœ¨â€œ <i>ä»£ç†ç¨‹åºå‚æ•°â€</i>é€‰é¡¹å¡ä¸Šçš„teamcity Webç•Œé¢ä¸­æ­£ç¡®æ˜¾ç¤ºã€‚ <br><br> æˆ‘ä»¬å°è¯•è¿è¡Œsdkmanagerï¼š <code>$ANDROID_HOME/tools/bin/sdkmanager --list</code>åº”åˆ—å‡ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶åŒ…ã€‚ å¦‚æœ<code>Exception in thread "main" java.lang.NoClassDefFoundError</code>æ”¶åˆ°è¯¸å¦‚<code>Exception in thread "main" java.lang.NoClassDefFoundError</code>ç±»çš„é”™è¯¯ï¼Œè¯·å°è¯•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤è§£å†³æ–¹æ¡ˆ</a> ã€‚ <br><br> å®‰è£…å¿…è¦çš„å·¥å…·å’Œè™šæ‹Ÿæœºçš„æ˜ åƒã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/tools/bin/sdkmanager emulator platform-tools tools <span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/tools/bin/sdkmanager <span class="hljs-string"><span class="hljs-string">'system-images;android-25;google_apis;x86'</span></span></code> </pre> <br><h3> åˆ›å»ºå¹¶è¿è¡ŒAVD </h3><br> å› æ­¤ï¼Œæˆ‘ä»¬ä¸‹è½½äº†<code>'system-images;android-25;google_apis;x86'</code> ï¼ˆAndroid 7.1.1ï¼‰çš„æ˜ åƒï¼Œå¹¶åŸºäºè¯¥æ˜ åƒåˆ›å»ºäº†è™šæ‹Ÿè®¾å¤‡ã€‚ æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç»avdmanagerå®ç”¨ç¨‹åºçš„æ‰€æœ‰å¯èƒ½å‚æ•°ï¼Œå°†ä»¥æœ€å°å¯èƒ½é‡æ˜¾ç¤ºå®ƒï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/tools/bin/avdmanager create avd -n avd_name -k <span class="hljs-string"><span class="hljs-string">"system-images;android-25;google_apis;x86"</span></span></code> </pre> <br> æˆ‘ä»¬ä¼ è¾“åç§°å’ŒåŸå§‹å›¾åƒï¼ˆå¿…é¡»äº‹å…ˆé€šè¿‡sdkmanagerä¸‹è½½ï¼‰ã€‚ å¦‚æœè¿”å›é”™è¯¯ï¼Œè¯·æ·»åŠ <code>-v</code>æ ‡å¿—ä»¥æŸ¥çœ‹æ–‡æœ¬ã€‚ <br><br> æˆ‘ä»¬ä¼ é€’ç»™æ¨¡æ‹Ÿå™¨ã€‚ é¦–å…ˆï¼Œåœ¨SDKç›®å½•ä¸­æ£€æŸ¥æ¨¡æ‹Ÿå™¨ï¼Œå¹³å°ï¼Œå¹³å°å·¥å…·ï¼Œç³»ç»Ÿæ˜ åƒæ–‡ä»¶å¤¹ã€‚ æˆ‘ç”¨åŒæ‰‹åˆ›å»ºäº†å¹³å°ï¼Œå…¶ä½™çš„åˆ™æ˜¯é€šè¿‡sdkmanagerå®‰è£…è½¯ä»¶åŒ…æ—¶åˆ›å»ºçš„ã€‚ æ¥ä¸‹æ¥ï¼Œæ£€æŸ¥ç¡¬ä»¶åŠ é€Ÿã€‚ åº”è¯¥æœ‰è¿™æ ·çš„ç­”æ¡ˆã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/emulator/emulator -accel-check accel: 0 KVM (version 12) is installed and usable. accel</code> </pre><br> å¦‚æœè®¿é—®<code>/dev/kvm</code>å‡ºé”™ï¼Œåˆ™æ·»åŠ æƒé™ï¼š <br><br><pre> <code class="bash hljs">addgroup kvm usermod -a -G kvm tc_agent chown root:kvm /dev/kvm</code> </pre><br> å¦å¤–ï¼Œæˆ‘ä»ç„¶éœ€è¦å®‰è£…QEMUï¼š <code>sudo apt-get install qemu-kvm</code> <br> é‡æ–°ç™»å½•å¹¶å†æ¬¡æ£€æŸ¥æ¨¡æ‹Ÿå™¨ã€‚ <br><br> å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè¯·å°è¯•è¿è¡Œã€‚ è¦é€šè¿‡çœ¼ç›æŸ¥çœ‹ï¼Œè¯·é€šè¿‡vncè¿æ¥åˆ°æœåŠ¡å™¨ã€‚ å¹¶è¿è¡Œæ¨¡æ‹Ÿå™¨ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$ANDROID_HOME</span></span>/emulator/emulator @avd_name</code> </pre> <br> å°†å‡ºç°ä»¥ä¸‹çª—å£ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xh/j8/ba/xhj8ba7qlv8xivwalti-cg9mf-m.png"></div><br> åœ¨æµ‹è¯•è¿è¡ŒæœŸé—´ï¼Œæˆ‘ä»¬å°†åœ¨æ²¡æœ‰å›¾å½¢çš„æƒ…å†µä¸‹è¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬å°†æ·»åŠ <code>-no-window</code>å‚æ•°ã€‚ <br><br><h3> åœ¨TeamCityä¸­é…ç½®æ„å»º </h3><br> æˆ‘ä»¬è¿›å…¥æœ€åé˜¶æ®µ-è®¾ç½®æµ‹è¯•çš„è‡ªä¸»å¯åŠ¨ã€‚ æˆ‘å»ºç«‹äº†4ä¸ªæ­¥éª¤ã€‚ <br><br>  1.å¯åŠ¨æ¨¡æ‹Ÿå™¨ <br><br><pre> <code class="bash hljs">nohup /var/opt/android-sdk/emulator/emulator @avd_name -no-snapshot-save -no-boot-anim -no-window -snapshot clean_snap_1 &gt; start_emulator.log 2&gt;&amp;1&amp;</code> </pre> <br> ç”±äºä»¿çœŸå™¨â€œé”å®šâ€äº†ç»ˆç«¯ï¼Œå› æ­¤æ‚¨éœ€è¦ä½¿ç”¨nohupå®ç”¨ç¨‹åºè§£å¼€è¿›ç¨‹ï¼ˆå¯ä»¥ç”¨å¦ä¸€ç§æ–¹æ³•æ¥å®Œæˆ-æ‚¨å¯ä»¥è‡ªè¡Œå†³å®šï¼‰ã€‚ ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œè¯·å°†ä»¿çœŸå™¨æ—¥å¿—ä¿å­˜åˆ°<code>start_emulator.log</code>æ–‡ä»¶ä¸­ã€‚ ä¸ºäº†è¿è¡Œæµ‹è¯•ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå¹²å‡€çš„å¿«ç…§ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³</a>å¦‚ä½•æ‰§è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤æ“ä½œï¼Œ</a>è¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a> ï¼‰ï¼Œå¹¶æ·»åŠ äº†<code>-no-snapshot-save</code>å¼€å…³ï¼Œä»¥ä¾¿ä¸ä¼šè¢«è¦†ç›–ã€‚ <br><br>  2.ç­‰å¾…è®¾å¤‡å¯åŠ¨ã€‚ <br><br><pre> <code class="bash hljs">adb <span class="hljs-built_in"><span class="hljs-built_in">wait</span></span>-for-device shell <span class="hljs-string"><span class="hljs-string">'while [[ -z $(getprop sys.boot_completed) ]]; do sleep 1; done;'</span></span></code> </pre> <br> é¦–å…ˆï¼Œæˆ‘ä»¬ç­‰å¾…è®¾å¤‡çš„<code>wait-for-device</code>çŠ¶æ€ï¼Œç„¶ååœ¨å¾ªç¯ä¸­ç­‰å¾…<code>sys.boot_completed</code>å˜é‡è¿”å›1ã€‚ <br><br>  3.è¿è¡Œæµ‹è¯•ã€‚ è¿™é‡Œçš„ä¸€åˆ‡éƒ½æ˜¯ä¸ªåˆ«çš„ï¼Œè¿™æ˜¯æˆ‘çš„ä¾‹å­ï¼š <br><br><pre> <code class="bash hljs">./gradlew clean connectedAndroidTest</code> </pre> <br>  4.å…³é—­ä»¿çœŸå™¨ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å·²ç»ç®€å•åœ°ç»ˆæ­¢äº†è¯¥è¿‡ç¨‹ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> -s 2 `pgrep qemu-system`</code> </pre> <br> å½“ç„¶ï¼Œæœ€å¥½åœ¨åˆ›å»ºæ¨¡æ‹Ÿå™¨æ—¶è®°ä½è¿›ç¨‹IDã€‚ å½“æˆ‘ä»¬å¼€å§‹åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è¿è¡Œæµ‹è¯•æ—¶ï¼Œè¿™å°†æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºè¿™å¶ç„¶ä¸ä¼šâ€œæ€æ­»â€é”™è¯¯çš„è¿›ç¨‹ã€‚ <br><br> å°±è¿™æ ·ï¼Œè°¢è°¢æ‚¨çš„é˜…è¯»ã€‚ å¦‚æœæœ‰ç»éªŒæ›´ä¸°å¯Œçš„åŒäº‹æå‡ºæ„è§ï¼Œæˆ‘å°†å¾ˆä¹æ„å¯¹æ‰‹å†Œè¿›è¡Œæ›´æ”¹ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN415769/">https://habr.com/ru/post/zh-CN415769/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN415759/index.html">å›½å®¶å®‰å…¨å±€å·²å¼€å§‹åˆ é™¤ç”±äºâ€œæ•…éšœâ€è€Œè®°å½•çš„å…ƒæ•°æ®</a></li>
<li><a href="../zh-CN415761/index.html">å¯æ’­æ”¾å¹¿å‘Šçš„å†…å®¹ï¼Œæ–¹å¼å’ŒåŸå› </a></li>
<li><a href="../zh-CN415763/index.html">ç¾å›½æ”¿åºœæ­£åœ¨è®¨è®ºé‡æ–°è·å¾—å¯¹IANAçš„æ§åˆ¶æƒçš„å¯èƒ½æ€§[ä½†è¿™ä¸å¤ªå¯èƒ½]</a></li>
<li><a href="../zh-CN415765/index.html">ä¸ºä»€ä¹ˆVMwareå†³å®šåˆ›å»ºä¸€ä¸ªç”¨äºå¼€å‘ä¼ä¸šåŒºå—é“¾çš„å¹³å°</a></li>
<li><a href="../zh-CN415767/index.html">ç‰¹æ–¯æ‹‰å…¬å¸ï¼ˆTesla Incï¼‰å¼€å¯äº†ä¸ºåŠ æ‹¿å¤§å’Œç¾å›½å±…æ°‘è®¢è´­ç‰¹æ–¯æ‹‰Model 3çš„å¯èƒ½æ€§</a></li>
<li><a href="../zh-CN415771/index.html">Goç¼–è¯‘å™¨ï¼šSSAä¼˜åŒ–è§„åˆ™æè¿°è¯­è¨€</a></li>
<li><a href="../zh-CN415773/index.html">éåŠŸèƒ½éœ€æ±‚ï¼šå¯æ‰©å±•æ€§</a></li>
<li><a href="../zh-CN415775/index.html">ä¸ºé…·ä¼šè®®å‡†å¤‡æŠ¥å‘Šçš„ç®€å•ä½†ä¸æ˜æ˜¾çš„æŠ€å·§</a></li>
<li><a href="../zh-CN415777/index.html">ç¬¬ä¸€ä¸ªå¼€å‘ä¸­çš„æœºå™¨å­¦ä¹ å† å†›</a></li>
<li><a href="../zh-CN415779/index.html">å®æ–½å®‰å…¨çš„NASè½¯ä»¶å¹³å°</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>