<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèº üë©üèª‚Äçüöí üëãüèø Ce que j'ai appris d'un grand programmeur üëäüèª üç∏ ‚è≠Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a un an, j'ai commenc√© √† travailler √† temps plein chez Bloomberg. Et puis j'ai d√©cid√© d'√©crire cet article. J'ai pens√© que je serais plein d'id√©e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ce que j'ai appris d'un grand programmeur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/465561/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/m9/v8/ccm9v8yphneof1qcnuaru8peu1e.jpeg"></div><br>  Il y a un an, j'ai commenc√© √† travailler √† temps plein chez Bloomberg.  Et puis j'ai d√©cid√© d'√©crire cet article.  J'ai pens√© que je serais plein d'id√©es que je pourrais jeter sur papier le moment venu.  Mais en l'espace d'un mois, j'ai r√©alis√© que tout ne serait pas si simple: j'ai d√©j√† commenc√© √† oublier ce que j'ai appris.  Soit la connaissance √©tait si bien acquise que mon esprit m'a fait croire que je la savais toujours, soit ils ont juste vol√© hors de ma t√™te.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>1</sup></a> <br><br>  C'est l'une des raisons pour lesquelles j'ai commenc√© √† tenir un journal.  Chaque jour, entrant dans des situations int√©ressantes, je les d√©crivais.  Et tout cela gr√¢ce au fait que j'√©tais assis √† c√¥t√© d'un programmeur de premier plan.  J'ai pu observer de pr√®s son travail et j'ai vu √† quel point c'√©tait diff√©rent de ce que je ferais.  Nous avons beaucoup programm√© ensemble, ce qui a rendu mes observations encore plus faciles.  De plus, notre √©quipe ne condamne pas ¬´l'espionnage¬ª des personnes √©crivant du code.  Quand il m'a sembl√© qu'il se passait quelque chose d'int√©ressant, je me suis retourn√© et j'ai regard√©.  Gr√¢ce √† l'augmentation constante, j'ai toujours √©t√© au courant de ce qui se passait. <br><br>  J'ai pass√© un an √† c√¥t√© d'un programmeur de premier plan.  Voil√† ce que j'ai appris. <br><a name="habracut"></a><br><h1>  Table des mati√®res </h1><br><ul><li>  √âcriture de code <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment nommer les choses dans le code</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Code h√©rit√© et prochain d√©veloppeur</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation et commentaires en code</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Atomic s'engage</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment supprimer en toute confiance le code moche</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Examen du code</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©duction des risques</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'architecture</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous cr√©ons de l'architecture, sans oublier la maintenance</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©ployer</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quand quelque chose tourne mal</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V√©lo</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suivi</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conclusion</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ce dont je ne suis pas s√ªr</a> <br></li></ul><br><h2>  √âcriture de code </h2><br><a name="1"></a><h4>  Comment nommer les choses dans le code </h4><br>  L'une de mes premi√®res t√¢ches a √©t√© de travailler sur React UI.  Nous avions un composant principal qui contenait tous les autres composants.  J'aime ajouter un peu d'humour au code, et je voulais nommer le composant principal de <code>GodComponent</code> .  Le moment est venu de revoir le code, et j'ai compris pourquoi il est si difficile de donner des noms. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="7269997868"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Chaque morceau de code que j'ai baptis√© a acquis un objectif implicite.  <code>GodComponent</code> ?  C'est le composant qui r√©cup√®re toutes les ordures que je ne veux pas mettre au bon endroit.  Il contient tout.  Nommez-le <code>LayoutComponent</code> , et l'avenir, je d√©ciderais que ce composant attribue une disposition.  Qu'il ne contient pas d'√©tat. <br><br>  Une autre le√ßon importante que j'ai apprise est que si quelque chose semble trop gros, comme un <code>LayoutComponent</code> avec un tas de logique m√©tier, il est temps de le refactoriser, car il ne devrait pas y avoir de logique m√©tier ici.  Et dans le cas du nom <code>GodComponent</code> pr√©sence de la logique m√©tier n'aura pas d'importance. <br><br>  Besoin de nommer les clusters?  Les appeler apr√®s les services qui s'ex√©cutent sur eux sera une excellente id√©e jusqu'√† ce que vous ex√©cutiez autre chose sur ces clusters.  Nous leur avons donn√© un nom en l'honneur de notre √©quipe. <br><br>  La m√™me chose s'applique aux fonctions.  <code>doEverything()</code> est un nom terrible avec de nombreuses cons√©quences.  Si la fonction fait tout, il sera sacr√©ment difficile de tester ses diff√©rentes parties.  Quelle que soit la taille de cette fonction, elle ne vous semblera jamais trop √©trange, car elle devrait tout faire.  Alors changez le nom.  Refact. <br><br>  Un nom significatif a un inconv√©nient.  Soudain, le nom sera trop significatif et cachera une sorte de nuance?  Par exemple, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fermeture de sessions</a> ne ferme pas la connexion √† la base de donn√©es lorsque <code>session.close()</code> appel√©e dans SQLAlchemy.  J'aurais d√ª lire la documentation et √©viter ce bug, plus √† ce sujet dans la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">v√©lo</a> . <br><br>  De ce point de vue, nommer des fonctions comme <code>x</code> , <code>y</code> , <code>z</code> au lieu de <code>count()</code> , <code>close()</code> , <code>insertIntoDB()</code> ne nous permet pas de leur donner une certaine signification et me fait surveiller attentivement ce que font ces fonctions.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>2</sup></a> <br><br>  Je n'ai jamais pens√© que j'√©crirais sur les principes de nommer plus d'une ligne de texte. <br><br><a name="2"></a><h4>  Code h√©rit√© et prochain d√©veloppeur </h4><br>  Avez-vous d√©j√† regard√© le code et il vous semble √©trange?  Pourquoi as-tu √©crit √ßa?  Cela n'a aucun sens. <br><br>  J'ai eu la chance de travailler avec une base de code h√©rit√©e.  Ceci, vous le savez, avec des commentaires comme "D√©commentez le code lorsque Mahomet comprend la situation."  Que fais tu ici?  Qui est Mohammed? <br><br>  Je peux changer de r√¥le et penser √† la personne qui recevra ensuite mon code, cela lui para√Ætra-t-il √©trange?  Une r√©vision partielle de votre code aide vos coll√®gues √† r√©viser votre code.  Cela m'a amen√© √† r√©fl√©chir au contexte: je dois me souvenir du contexte dans lequel mon √©quipe travaille. <br><br>  Si j'oublie ce code, y reviens plus tard et ne peux pas restaurer le contexte, je dirai: ¬´Qu'est-ce qu'ils ont fait?  C'est stupide ... Ah, attends, je l'ai fait. " <br><br>  Et ici, la documentation et les commentaires du code entrent en jeu. <br><br><a name="3"></a><h4>  Documentation et commentaires en code </h4><br>  Ils aident √† maintenir le contexte et √† transmettre les connaissances.  Comme Lee l'a dit dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment construire un bon logiciel</a> : <br><br><blockquote>  La valeur principale du logiciel n'est pas dans le code cr√©√©, mais dans les connaissances accumul√©es par les personnes qui ont cr√©√© ce logiciel </blockquote><br>  Vous disposez d'un point de terminaison API client ouvert que personne ne semble avoir jamais utilis√©.  Doit-il simplement √™tre supprim√©?  D'une mani√®re g√©n√©rale, il s'agit d'un devoir technique.  Et si je vous dis que dans l'un des pays 10 journalistes envoient leurs reportages √† ce point final une fois par an?  Comment le v√©rifier?  Si cela n'est pas mentionn√© dans la documentation (il l'√©tait), il n'y a aucun moyen de le v√©rifier.  Nous n'avons pas v√©rifi√©.  Ils l'ont enlev√©, et quelques mois plus tard est venu ce moment tr√®s annuel.  Dix journalistes n'ont pas pu envoyer leurs rapports importants car le point final n'existait plus.  Et des personnes connaissant les produits ont d√©j√† quitt√© l'√©quipe.  Bien s√ªr, maintenant dans le code, il y a des commentaires expliquant pourquoi cela est n√©cessaire. <br><br>  Autant que je sache, chaque √©quipe se bat avec la documentation.  Et avec la documentation, non seulement par code, mais aussi par les processus qui lui sont associ√©s. <br><br>  Nous n'avons pas encore trouv√© la solution parfaite.  Personnellement, j'aime la fa√ßon dont Antirez a divis√© les commentaires dans le code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en diff√©rents types de valeurs</a> . <br><br><a name="4"></a><h4>  Atomic s'engage </h4><br>  Si vous devez revenir en arri√®re (et vous en avez besoin. Voir le chapitre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test</a> ), cette validation aura-t-elle un sens en tant que module unique? <br><br><a name="5"></a><h4>  Comment supprimer en toute confiance le code moche </h4><br>  J'√©tais tr√®s d√©sagr√©able de supprimer le code moche ou obsol√®te.  Il me semblait que tout ce qui √©tait √©crit il y a des si√®cles est sacr√©.  J'ai pens√©: "Ils avaient quelque chose en t√™te quand ils ont √©crit comme √ßa."  Il s'agit d'une confrontation entre tradition et culture d'une part, et r√©flexion √† la mani√®re du ¬´principe primaire¬ª d'autre part.  C'est la m√™me chose que la suppression du point final annuel.  J'ai appris une le√ßon sp√©ciale.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>3</sup></a> <br><br>  J'essaierais de contourner le code et les principaux d√©veloppeurs essaieraient de le traverser.  Effacez-le.  Une expression if inaccessible?  Ouais, on efface.  Qu'ai-je fait?  Je viens d'√©crire ma fonction dessus.  Je n'ai pas r√©duit la dette technique.  Quoi qu'il en soit, je viens d'augmenter la complexit√© du code et le transfert.  Il sera encore plus difficile pour la prochaine personne d'assembler les morceaux de l'image. <br><br>  Empiriquement, je suis arriv√© √† la conclusion: il y a un code que vous ne comprenez pas, mais il y a un code que vous ne contacterez certainement jamais.  Effacez le code que vous ne contactez pas et soyez prudent avec le code que vous ne comprenez pas. <br><br><a name="6"></a><h4>  Examen du code </h4><br>  Un examen du code est un excellent outil pour l'auto-√©ducation.  Il s'agit d'une boucle de r√©troaction externe montrant comment ils √©criraient le code et comment vous l'avez √©crit.  Quelle est la diff√©rence?  D'une mani√®re meilleure qu'une autre?  Je me suis pos√© des questions √† ce sujet √† chaque avis: ¬´Pourquoi ont-ils √©crit de cette fa√ßon?  Et s'il ne pouvait pas trouver une r√©ponse appropri√©e, alors il est all√© demander. <br><br>  Apr√®s le premier mois, j'ai commenc√© √† trouver des erreurs dans le code de mes coll√®gues (comme ils l'ont trouv√© dans le mien).  C'√©tait une sorte de folie.  La revue est devenue beaucoup plus int√©ressante pour moi, elle s'est transform√©e en un jeu qui me manquait, un jeu qui a am√©lior√© mon "sens du code". <br><br>  D'apr√®s mon exp√©rience, vous n'avez pas √† approuver le code tant que je ne comprends pas comment il fonctionne. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96a/2ad/248/96a2ad248018ff0721f16a262dbb294c.png"><br>  <i>Mes statistiques github.</i> <br><br><a name="7"></a><h2>  Test </h2><br>  J'ai tellement aim√© les tests qu'il est d√©sagr√©able d'√©crire du code dans une base de code sans tests. <br><br>  Si votre application ne fait qu'une seule chose (comme tous mes projets scolaires), vous pouvez toujours tester manuellement.  C'est exactement ce que j'ai fait.  Mais que se passe-t-il si une application effectue 100 t√¢ches diff√©rentes?  Je ne veux pas passer une demi-heure √† tester, et parfois je perds de vue quelque chose.  Un cauchemar. <br><br>  Les tests et l'automatisation des tests aident ici. <br><br>  Je traite les tests comme de la documentation.  Ceci est la documentation de mes id√©es sur le code.  Les tests me disent comment j'imagine (ou quelqu'un d'autre avant moi) le fonctionnement du code et o√π quelque chose devrait mal tourner. <br><br>  Aujourd'hui, quand j'√©cris des tests, j'essaye: <br><br><ol><li>  Montrez comment utiliser la classe, la fonction ou le syst√®me de test. <br></li><li>  Montrez ce qui, √† mon avis, pourrait mal tourner. <br></li></ol><br>  Du coup, je teste le plus souvent le comportement, mais pas l'impl√©mentation ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici un exemple</a> que j'ai choisi lors des pauses chez Google). <br><br>  Au paragraphe 2, je n'ai pas mentionn√© les sources de bugs. <br><br>  Lorsque je remarque un bogue, je m'assure que le correctif dispose d'un test appropri√© (appel√© test de r√©gression) pour documenter les informations.  C'est une autre raison pour laquelle quelque chose pourrait mal tourner.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>5</sup></a> <br><br>  Bien s√ªr, la qualit√© de mon code s'am√©liore non pas parce que j'√©cris des tests, mais parce que j'√©cris du code.  Mais la lecture des tests m'aide √† mieux comprendre les situations et √† √©crire un meilleur code. <br><br>  C'est la situation g√©n√©rale des tests. <br><br>  Mais ce n'est pas le seul type de test que j'applique.  Je parle des environnements de d√©ploiement.  Vous pouvez avoir des tests unitaires id√©aux, mais si vous n'avez pas de tests syst√®me, quelque chose comme cela peut se produire: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/905/1c5/bb8/9051c5bb8da5d845cbd0d9c6dcccf236.gif"><br><br>  Cela s'applique √©galement au code bien test√©: si vous n'avez pas les biblioth√®ques n√©cessaires sur votre ordinateur, alors tout se bloquera. <br><br><ul><li>  Il y a des machines sur lesquelles vous d√©veloppez (la source de tous les m√®mes comme "√áa a fonctionn√© sur mon ordinateur!"). <br></li><li>  Il y a des machines sur lesquelles vous testez (peuvent co√Øncider avec les pr√©c√©dentes). <br></li><li>  Enfin, il y a des machines sur lesquelles vous d√©ployez (elles ne doivent pas co√Øncider avec les machines sur lesquelles vous avez d√©velopp√©). <br></li></ul><br>  Si les environnements de test et de d√©ploiement ne correspondent pas sur les machines, vous aurez des probl√®mes.  Les environnements de d√©ploiement aideront √† √©viter cela. <br><br>  Nous faisons du d√©veloppement local dans Docker sur notre ordinateur. <br><br>  Nous avons un environnement de d√©veloppement, ces ordinateurs sont √©quip√©s d'un ensemble de biblioth√®ques (et d'outils de d√©veloppement), et ici nous installons le code √©crit.  Ici, il peut √™tre test√© avec tous les syst√®mes n√©cessaires.  Nous avons √©galement un environnement b√™ta / interm√©diaire qui reproduit enti√®rement l'environnement op√©rationnel.  Enfin, nous avons un environnement op√©rationnel - des machines qui ex√©cutent du code pour nos clients. <br><br>  L'id√©e est de d√©tecter les erreurs qui ne sont pas apparues lors des tests unitaires et syst√®me.  Par exemple, la diff√©rence d'API entre les syst√®mes demandeur et r√©pondant.  Je pense que dans le cas d'un projet personnel ou d'une petite entreprise, la situation peut √™tre compl√®tement diff√©rente.  Tout le monde n'a pas la possibilit√© de cr√©er sa propre infrastructure.  Cependant, vous pouvez recourir √† des services cloud tels que AWS et Azure. <br><br>  Vous pouvez configurer des clusters individuels pour le d√©veloppement et le fonctionnement.  AWS ECS utilise des images Docker pour se d√©ployer, de sorte que les processus dans diff√©rents environnements seront relativement coh√©rents.  Il existe des nuances en termes d'int√©gration entre les diff√©rents services AWS.  Appelez-vous le bon point de terminaison √† partir du bon environnement? <br><br>  Vous pouvez aller encore plus loin: t√©l√©chargez des images de conteneur alternatives pour d'autres services AWS et configurez un environnement local enti√®rement bas√© sur Docker-Compose.  Cela acc√©l√®re la boucle de r√©troaction.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>6</sup></a> J'acqu√©rirai peut-√™tre plus d'exp√©rience lorsque je cr√©erai et lancerai mon projet parall√®le. <br><br><a name="8"></a><h2>  R√©duction des risques </h2><br>  Quelles mesures pouvez-vous prendre pour r√©duire votre risque de catastrophe?  Si nous parlons d'un nouveau changement radical, comment pouvons-nous v√©rifier la dur√©e minimale des temps d'arr√™t, en cas de probl√®me?  "Nous n'avons pas besoin de d√©ployer compl√®tement le syst√®me √† cause de tous ces nouveaux changements."  Quoi vraiment?  Et pourquoi n'y ai-je pas pens√©! <br><br><a name="9"></a><h2>  L'architecture </h2><br>  Pourquoi parle-t-on d'architecture apr√®s avoir √©crit du code et test√©?  Il peut √™tre install√© en premier, mais si je n'avais pas programm√© et test√© dans l'environnement que j'utilisais, je n'aurais probablement pas r√©ussi √† cr√©er une architecture qui prenne en compte les caract√©ristiques de cet environnement.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><sup>7</sup></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br>  Vous devez beaucoup r√©fl√©chir lors de la cr√©ation d'une architecture. <br><br><ul><li>  Comment les num√©ros seront-ils utilis√©s? <br></li><li>  Combien d'utilisateurs y aura-t-il?  Combien leur nombre peut-il augmenter (le nombre de lignes dans la base de donn√©es en d√©pend)? <br></li><li>  Quels r√©cifs peuvent se rencontrer? <br></li></ul><br>  Je dois transformer cela en une liste de contr√¥le appel√©e ¬´Collection de r√©clamations¬ª.  Pour l'instant je n'ai pas assez d'exp√©rience, j'essaierai de le faire l'ann√©e prochaine chez Bloomberg.  Ce processus est en grande partie contraire √† Agile: combien pouvez-vous concevoir l'architecture avant de passer √† l'impl√©mentation?  Tout est question d'√©quilibre, vous devez choisir quand et ce que vous ferez.  Quand est-il sens√© de se pr√©cipiter et quand - de prendre du recul?  Bien s√ªr, la collecte des exigences ne revient pas √† consid√©rer toutes les questions.  Je pense que cela vaut la peine si nous incluons les processus de d√©veloppement dans la conception.  Par exemple: <br><br><ul><li>  Comment se d√©roulera le d√©veloppement local? <br></li><li>  Comment allons-nous emballer et d√©ployer? <br></li><li>  Comment proc√©derons-nous aux tests de bout en bout? <br></li><li>  Comment effectuerons-nous des tests de r√©sistance du nouveau service? <br></li><li>  Comment garderons-nous des secrets? <br></li><li>  Int√©gration CI / CD? <br></li></ul><br>  Nous avons r√©cemment d√©velopp√© un nouveau moteur de recherche pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BNEF</a> .  C'√©tait merveilleux de travailler dessus, j'ai organis√© un d√©veloppement local et d√©couvert DPG (packages et leur d√©ploiement), levant le d√©ploiement de secrets. <br><br>  Qui aurait pens√© que le d√©ploiement de secrets sur une prod pourrait √™tre si simple: <br><br><ol><li>  Ils ne peuvent pas √™tre plac√©s dans le code, car quelqu'un peut les remarquer <br></li><li>  Les stocker comme variable d'environnement car la sp√©cification propose 12 facteurs d'application?  Pas une mauvaise id√©e, mais comment les mettre l√†?  (Aller √† la prod pour remplir les variables d'environnement √† chaque d√©marrage de la voiture est une douleur) <br></li><li>  Les d√©ployer en tant que fichiers?  Mais d'o√π viendront-ils et comment les remplir? <br></li></ol><br>  Nous ne voulons pas tout faire manuellement. <br><br>  En cons√©quence, nous sommes arriv√©s √† une base de donn√©es avec un contr√¥le d'acc√®s bas√© sur les r√¥les (seuls nous et nos ordinateurs pouvons communiquer avec la base de donn√©es).  Notre code re√ßoit des secrets de la base de donn√©es au d√©marrage.  Cette approche est bien reproduite dans le cadre des environnements de d√©veloppement, de transfert et d'exploitation; les secrets sont stock√©s dans des bases de donn√©es appropri√©es. <br><br>  Encore une fois, avec des services cloud comme AWS, la situation peut √™tre compl√®tement diff√©rente.  Vous n'avez pas besoin de vous occuper des secrets d'une mani√®re ou d'une autre.  Obtenez un compte pour votre r√¥le, entrez les secrets dans l'interface et votre code les trouvera quand ils seront n√©cessaires.  Cela simplifie grandement tout, mais je suis heureux d'avoir acquis de l'exp√©rience, gr√¢ce √† laquelle je peux appr√©cier cette simplicit√©. <br><br><a name="10"></a><h4>  Nous cr√©ons de l'architecture, sans oublier la maintenance </h4><br>  La conception du syst√®me est inspirante.  Et l'escorte?  Pas trop.  Mon voyage dans le monde des escortes m'a conduit √† la question: pourquoi et comment les syst√®mes se d√©gradent-ils?  La premi√®re partie de la r√©ponse n'est pas li√©e au d√©classement de tous obsol√®tes, mais seulement √† l'ajout d'un nouveau.  La tendance √† ajouter plut√¥t qu'√† supprimer (cela ne rappelle-t-il rien?).  La deuxi√®me partie est la conception avec l'objectif ultime √† l'esprit.  Un syst√®me qui, avec le temps, commence √† faire ce √† quoi il n'√©tait pas destin√©, ne fonctionnera pas n√©cessairement aussi bien qu'un syst√®me initialement con√ßu pour les m√™mes t√¢ches.  Il s'agit d'une approche de style pas en arri√®re, pas de trucs et astuces. <br><br>  Je connais au moins trois fa√ßons de r√©duire le taux de d√©gradation. <br><br><ol><li>  Logique m√©tier et infrastructure distinctes: l'infrastructure se d√©grade g√©n√©ralement - la charge augmente, les frameworks deviennent obsol√®tes, des vuln√©rabilit√©s zero-day apparaissent, etc. <br></li><li>  Cr√©ez des processus pour une assistance future.  Appliquez les m√™mes mises √† jour pour les anciens et les nouveaux bits.  Cela √©vitera les diff√©rences entre l'ancien et le nouveau et gardera tout le code dans un √©tat ¬´moderne¬ª. <br></li><li>  Assurez-vous de jeter tout ce qui est inutile et ancien. <br></li></ol><br><a name="11"></a><h2>  D√©ploiement </h2><br>  Vais-je regrouper des fonctionnalit√©s ou les d√©ployer une √† la fois?  Selon le processus en cours, si vous les regroupez, attendez les probl√®mes.  Demandez-vous pourquoi vous souhaitez regrouper des fonctionnalit√©s? <br><br><ul><li>  Le d√©ploiement prend beaucoup de temps? <br></li><li>  La r√©vision de code n'est-elle pas trop amusante? <br></li></ul><br>  Quelle que soit la raison, cette situation doit √™tre corrig√©e.  Je connais au moins deux probl√®mes li√©s √† l'emballage: <br><br><ol><li>  Vous bloquez vous-m√™me toutes les fonctionnalit√©s si l'une d'elles a un bug. <br></li><li>  Vous augmentez le risque de probl√®mes. <br></li></ol><br>  Quel que soit le processus de d√©ploiement que vous choisissez, vous voulez toujours que vos voitures soient comme du b√©tail, pas comme des animaux de compagnie.  Ils ne sont pas uniques.  Vous savez exactement ce qui est ex√©cut√© sur chaque machine, comment les recr√©er en cas de d√©c√®s.  Vous ne serez pas contrari√© si une voiture meurt, vous en prenez une nouvelle.  Vous les faites pa√Ætre, vous ne grandissez pas. <br><br><a name="12"></a><h2>  Quand quelque chose tourne mal </h2><br>  En cas de probl√®me - et c'est le cas - il existe une r√®gle d'or: minimiser l'impact sur les clients.  En cas d'√©checs, mon premier d√©sir a toujours √©t√© de le r√©parer.  Cela ne semble pas √™tre la solution optimale.  Au lieu de r√©parer, m√™me si cela peut √™tre fait sur une seule ligne, vous devez d'abord revenir en arri√®re.  Revenez √† l'√©tat de fonctionnement pr√©c√©dent.  C'est le moyen le plus rapide de ramener les clients √† une version fonctionnelle.  Ce n'est qu'alors que je d√©couvre quel est le probl√®me et le r√®gle. <br><br>  Il en va de m√™me pour la machine ¬´endommag√©e¬ª de votre cluster: √©teignez-la, marquez-la comme inaccessible, avant de d√©couvrir ce qui lui est arriv√©.  Je trouve √©trange combien mon d√©sir naturel et mes instincts contredisent la solution optimale. <br><br>  Je pense que cet instinct a √©galement conduit au fait que j'ai corrig√© les bugs plus longtemps.  Parfois, je me rendais compte que quelque chose ne fonctionnait pas, parce que le code que j'avais √©crit √©tait en quelque sorte faux, et je grimpais dans la nature, en regardant chaque ligne.  Quelque chose comme une recherche ¬´d'abord en profondeur¬ª.  Et quand il s'est av√©r√© que le probl√®me est survenu en raison d'un changement de configuration, c'est-√†-dire que je ne l'ai pas v√©rifi√© en premier lieu, cette situation m'a perturb√©.  J'ai perdu beaucoup de temps √† chercher un bug. <br><br>  Depuis lors, j'ai appris √† chercher ¬´en premier¬ª et donc d√©j√† ¬´en premier¬ª afin d'exclure des raisons de niveau sup√©rieur.  Que puis-je confirmer exactement avec les ressources actuelles? <br><br><ul><li>  La voiture fonctionne-t-elle? <br></li><li>  Le code est-il install√© correctement? <br></li><li>  Y a-t-il une configuration? <br></li><li>  &lt;Configuration sp√©cifique au code&gt;, par exemple si le routage est correctement d√©fini? <br></li><li>  La version du sch√©ma est-elle correcte? <br></li><li>  Et puis je plonge dans le code. <br></li></ul><br><blockquote>  Nous pensions que nginx n'√©tait pas install√© correctement, mais il s'est av√©r√© que la configuration √©tait d√©sactiv√©e </blockquote><br>  Bien s√ªr, je n'ai pas besoin de le faire √† chaque fois.  Parfois, un simple message d'erreur suffit pour passer imm√©diatement au code.  Lorsque je ne peux pas d√©terminer la cause, j'essaie de minimiser le nombre de changements de code afin de trouver la raison.  Moins il y a de changements, plus vite je peux trouver la v√©ritable racine du probl√®me.  De plus, j'ai maintenant un m√©mo pour les bugs qui m'a sauv√© plus d'une heure en pensant "qu'est-ce que j'ai rat√©?"  Parfois, j'oublie les v√©rifications les plus simples, telles que la configuration du routage, le sch√©ma correspondant et les versions de service, etc.  C'est une autre √©tape dans la ma√Ætrise de la pile technologique que j'utilise, et ce que vous gagnez uniquement avec l'exp√©rience, c'est l'intuition pour d√©terminer ce qui ne fonctionne pas exactement. <br><br><a name="13"></a><h4>  V√©lo </h4><br>  Cet article ne peut pas √™tre complet sans histoire.    ,        .      SQLAlchemy.  BNEF   ,     .      .          SQLAlchemy,   ,        Solr.  -   . <br><br>           ¬´MYSQL server has gone away.¬ª     .     ,     ,   . ,      .         ,    .     ,    ? <br><br>  ,      ?     ,      ,       .     ,         ,      <code>__exit__()</code>  <code>session.close()</code> . <br><br>     ,  ,    .             .          .      .    . <br><br> <code>Session.close()</code>  MySQL- SQLAlchemy      ,    NullPool.   . ,      ,           .      :     StackOverflow (,   !)     ,   ,     SQL- .       ,       .  ,        ,     (),     . <br><br>    ¬´¬ª  ,      1   8.   ,   ,       ‚Äî          . <br><br><blockquote>     ,      . </blockquote><br><a name="14"></a><h2>  </h2><br>  ,       .  ,         ,      .    ,      . <br><br>    ,      ,      ,      .     ,      .  ,      . ¬´ <i>  ?!        ,  ?</i> ¬ª. <br><br>  ,      : ,   .   ,   ,  .  ,     ,     .     ,       .     ‚Äî     ? ,   ,   .          .  ,     -,     ,    ,   ,  ,  ..        . <br><br>      .    ,     ,     ?          (,    AWS CloudWatch  Grafana).            . <br><br>        .       ,      ,       50 %,       ‚Äî   .    ?   .     ,    ‚Äî      (, ?). <br><br>        .   ,      ,  ,    ,      ?   ?    ,    ? <br><br>    ,   .      ,    .      ‚Äî    -  . <br><br><a name="15"></a><h2>  Conclusion </h2><br>      .  ,     ,       ,     .   ,      - ! <br><br>        . ,    ! <br><br><blockquote>     ,        .     ,                ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">How to Build Good Software</a> . </blockquote><br><a name="16"></a><h2>      </h2><br>        .       :     !     ,         . <br><br><ol><li>    ? <br></li><li>          ? ,    ?    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,   </a> ? <br></li><li>   .       ,      ?    ? <br></li><li>     (utils) (,     ,   ,  )  ,   ¬´ ¬ª? <br></li><li>         ? <br></li><li>    ,  ,  -  ? <br></li><li>   ‚Äî      API    ,         ? <br></li><li>    ?  ,     . <br></li><li>     ,   ,  .  ,   ,       . <br></li><li>      PR: ¬´      ,    ,     52 ,  , ,  ,     ,   ¬ª.    ? <br></li><li>    .        ? <br></li><li>    ? <br></li><li>     ? <br></li></ol><br><h2>  </h2><br><ol><li><a name="17"></a>     .  ,    ?  - ?    ,    ? <br></li><li><a name="18"></a>    ,        <code>x()</code> , <code>y()</code>  <code>z(),</code>       <code>x()</code> , <code>y()</code>  <code>z()</code> .  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WYSIATI</a> . <br></li><li><a name="19"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> .</a> <br></li><li><a name="20"></a>       .      ,   ? <br></li><li><a name="21"></a>  ,    - ,      ,     .   ,   . <br></li><li><a name="22"></a>     ,    ,       Docker-  AWS. <br></li><li><a name="23"></a>         . <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465561/">https://habr.com/ru/post/fr465561/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465547/index.html">Guide SQL: comment mieux √©crire des requ√™tes (partie 1)</a></li>
<li><a href="../fr465551/index.html">R√©sum√© des √©v√©nements informatiques de septembre (premi√®re partie)</a></li>
<li><a href="../fr465553/index.html">Langage de programmation √ú. Introduction, motivation pour cr√©er, objectifs</a></li>
<li><a href="../fr465555/index.html">12 comp√©tences g√©n√©rales qui rendent les chefs de projet informatiques imparables</a></li>
<li><a href="../fr465557/index.html">D√©lais de d√©veloppement de produits</a></li>
<li><a href="../fr465567/index.html">Test du code SQL Server avec tSQLt</a></li>
<li><a href="../fr465569/index.html">Carte de d√©veloppement des d√©veloppeurs mobiles</a></li>
<li><a href="../fr465571/index.html">Comment vendre des cigarettes aux hommes pour les femmes et prot√©ger les sauvages: des r√©dacteurs qui pourraient</a></li>
<li><a href="../fr465573/index.html">Toute la puissance d'IntelliJ IDEA sur l'exemple d'une langue (en images)</a></li>
<li><a href="../fr465575/index.html">Op√©rations de comparaison en C ++ 20</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>