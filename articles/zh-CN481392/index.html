<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙌 🔥 🚟 当我用PHP编写集中式加密货币时。 （第1部分-基本摘要+快速入门） 🛰️ 🃏 👰🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前言 
 是的，您只需考虑一下，PHP中的集中式加密货币，这是不对的。 但是，尽管如此，我对思想的局限性还是出现了，因此，正如您可能已经猜到的那样，我决定撰写有关它的文章。 在第一部分中，我们将告诉您什么是加密货币，讨论最初的笔记，并创建一个钱包系统。 现在，让我们开始吧。 

 加密货币，它是什么...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>当我用PHP编写集中式加密货币时。 （第1部分-基本摘要+快速入门）</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481392/"><h1> 前言 </h1><br> 是的，您只需考虑一下，PHP中的集中式加密货币，这是不对的。 但是，尽管如此，我对思想的局限性还是出现了，因此，正如您可能已经猜到的那样，我决定撰写有关它的文章。 在第一部分中，我们将告诉您什么是加密货币，讨论最初的笔记，并创建一个钱包系统。 现在，让我们开始吧。 <br><a name="habracut"></a><br><h2> 加密货币，它是什么样的？ </h2><br>  <i>信息来自<a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BB%25D1%258E%25D1%2582%25D0%25B0" rel="nofollow">维基百科</a></i> <br><br><img align="left" src="https://habrastorage.org/webt/tc/tm/td/tctmtd68gowbmixyb4syaphyxm4.jpeg" width="45%" height="50%"> 加密货币是一种数字货币，其内部结算单位的会计由分散支付系统（没有内部或外部管理员或任何类似的模拟系统）确保以全自动模式工作。 <br><br> 加密货币本身没有任何特殊的材料或电子形式-只是一个数字，表示结算单位的数据量，该数字被写入数据传输协议的信息包的相应位置，并且通常甚至没有加密，就像有关交易之间的所有其他信息一样系统地址。 <br><br> 简而言之，加密货币的工作方式如下： <br><br><ol><li> 具有余额的网络用户将交易发送给另一个匿名用户。 </li><li> 交易进入网络。 </li><li> 矿工（或创建块的用户）解决了由特殊算法产生的具有条件的问题（例如，哈希中存在先前的10-30个零，反之亦然）。 </li><li> 当哈希中满足一个或多个条件时，由于这个原因，矿工将一条消息发送到网络，通知创建新区块和进行交易。 </li><li> 接受者收到资金，矿工获得报酬，形式是在任务准备期间计算的佣金形式。 </li></ol><br><h2> 编写集中式加密货币以及使用PHP都有意义吗？ </h2><br> 我认为不是。 但是，请重试。 <br><br><h2> 我们在开发前考虑笔记 </h2><br> 我们将使用使用工作量证明的双重哈希验证系统。 在软件和网络应用程序级别检查哈希值是有意义的。 这是由于优化服务器负载的过程。 因为当我们多次访问服务器检查哈希时，会出现这样的负载。 因此，我建议采用以下方法： <br><br><ol><li> 在软件矿工上，在本地检查哈希以满足条件。 </li><li> 当软件矿工的条件与必要条件一致时，我们在应用程序网络级别（在服务器级别）进行检查。 </li></ol><br> 我认为这是分配负载的最佳方法。 与在服务器上多次发送垃圾邮件相比，在计算机上进行多次本地检查要容易得多。 <br><br> 这个名字-我想出了一个简单的，也许令人难忘的名字-FlyCoin，带有三位数的FLC货币代码。 <br><br> 数据库-我将使用一个简单方便的选项PDO。 <br><br> 加密钱包-将使用GUID和mt_rand生成，并且POSIX时间将用作种子。 <br><br> 您是否懒于拥有哈希检查功能？  -是的，所以我决定从我的朋友Nikita的一个（已经过世的）加密货币Entropy的老矿工那里获取代码。 <br><br><div class="spoiler">  <b class="spoiler_title">我不敢相信他只创造了一种加密货币。</b>  <b class="spoiler_title">还有其他吗？</b> <div class="spoiler_text"> 总的来说，您可以在他的<a href="https://vk.com/hphp_convertation" rel="nofollow">VKontakte</a>小组中找到他的所有创作（有时甚至使用）。 我希望他们也派上用场。 <br></div></div><br><h2> 走吧 </h2><br> 让我们从建立未来系统的框架开始。 让我们从为我们的加密货币开发应用程序API开始。 到目前为止，框架看起来很空。 <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* * The API for FlyCoin */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkHash</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($hash, $exp)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hash</span></span></span><span class="hljs-function"> -     ,  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exp</span></span></span><span class="hljs-function"> - .    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Entropy</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Miner</span></span></span><span class="hljs-function">,   . </span></span>{ $sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    . $len = strlen ($hash); // C  . for ($i = 0; $i &lt; $len; ++$i) $sum += 2 * base_convert ($hash[$i], 16, 10); //        return $sum % 10 == 0 &amp;&amp; substr ($hash, -$exp) === str_repeat ('0', $exp); //  false       true,         . } class Block { public $id; // ID  public $prev_hash; //    public $from; //   public $to; //  public $ammount; //  public $difficult; //   } class API { protected $db; public function __construct () { $dsn = "mysql:host=localhost;dbname=flc"; // DSN   $this-&gt;db = new PDO ($dsn, $username, $password); //     try { return true; //  . } catch (PDOException $exception) { return false; //  . } } }</span></span></code> </pre> <br> 这就是我们奇迹的框架。 首先，我们为钱包实施GUID的注册和生成。 我立即创建了一个空的API函数定义，并在Google中找到了GUID生成函数。 不要忘记种子。 我刚刚找到了一个函数来获取种子，以获得唯一的GUID。 <br><br><pre> <code class="php hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_seed</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PHP</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> ($usec, $sec) = explode (<span class="hljs-string"><span class="hljs-string">' '</span></span>, microtime ()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $sec + $usec * <span class="hljs-number"><span class="hljs-number">1000000</span></span>; } mt_srand (make_seed ());</code> </pre><br> 太好了 相应地，用于为钱包生成GUID的功能如下所示（以及存根本身）： <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //    </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">genGUID4</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> //  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Google</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sprintf (<span class="hljs-string"><span class="hljs-string">'%04x%04x-%04x-%04x-%04x-%04x%04x%04x'</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x0fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x4000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0x3fff</span></span>) | <span class="hljs-number"><span class="hljs-number">0x8000</span></span>, mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>), mt_rand (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0xffff</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//     ,   . }</span></span></code> </pre><br> 由于我们匿名进行所有操作，因此不会存储IP或电子邮件。 没有确认。 我们就足够了。 在大约25分钟内，我编写了一个注册功能。 我们只需要一个密码。  API函数将把钱包退还给我们。 <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">register</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($password)</span></span></span><span class="hljs-function"> //  $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">password</span></span></span><span class="hljs-function"> -    </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $walletId = 'FLC@' . $this-&gt;genGUID4 (); //      $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" INSERT INTO `wallets` (walletId, loginHash, balance) VALUES (:walletId, :hash, :startBalance) "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':startBalance', 0, PDO::PARAM_INT); //    (   ,   0!)   $newUser-&gt;execute (); //  . return ['walletId' =&gt; $walletId]; //     ( ) } else return false; //      . }</span></span></code> </pre><br> 在这里，我简要描述了该行的功能。 <br><br><div class="spoiler">  <b class="spoiler_title">给公平的人和程序员的公平信息。</b> <div class="spoiler_text"> 如果您将您的联系人留在了该网站上（也许该加密货币将位于该网站上），那么他们会向您这样写： <br><br>  “你好，你能帮忙吗？” 我在您的区块链上保留了mani，突然我忘记了密码，请帮助，您会很好--随时拒绝此优惠。 加密货币的本质是安全地存储挖掘的数字。 没有人可以证明自己拥有帐户。 因此， <b>即使没有受害者的参与</b> ，任何攻击者甚至都可以窃取他人的资金<b>！</b> 没关系，尽管此人确实是帐户的所有者，但最好拒绝。 如果您亏损了，则意味着您没有正确存储帐户中的数据。 为了提高安全性，我们将不再实施密码恢复。 <br></div></div><br> 此处显示的哈希函数可以表示如下： <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><mi>p</mi><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>p</mi><mi>w</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="45.321ex" height="2.419ex" viewBox="0 -780.1 19513.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-68" x="1575" y="0"></use><g transform="translate(2152,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-77" x="2981" y="0"></use><g transform="translate(3698,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-70" x="4528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-77" x="5031" y="0"></use><g transform="translate(5748,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMAIN-3D" x="6856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-63" x="7912" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-72" x="8346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-63" x="8797" y="0"></use><g transform="translate(9231,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMAIN-32" x="500" y="0"></use></g><g transform="translate(10232,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-77" x="11061" y="0"></use><g transform="translate(11778,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMAIN-2E" x="12608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-77" x="13053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMAIN-2E" x="13770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-68" x="14215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-6D" x="14791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-61" x="15670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-63" x="16199" y="0"></use><g transform="translate(16633,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-70" x="17463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/481392/&amp;xid=25657,15700022,15700186,15700191,15700259,15700271&amp;usg=ALkJrhg85Q0doFU7K1u3qFB4C6014fFsyQ#MJMATHI-77" x="17966" y="0"></use><g transform="translate(18683,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mi>p</mi><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>=</mo><mi>c</mi><mi>r</mi><mi>c</mi><mn>32</mn><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>.</mo><mi>w</mi><mo>.</mo><mi>h</mi><mi>m</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>p</mi><mi>w</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1"> hash（w，pw）= crc32（w）.w.hmac（pw）</script><br><br> 该函数的工作方式如下： <br><br> 输入密码，我们检查数据库是否已连接： <br><br><div class="spoiler">  <b class="spoiler_title">是的，已连接。</b>  <b class="spoiler_title">（让我们输入密码12345）</b> <div class="spoiler_text"> 我们生成了钱包地址，并输入了$ walletId-我们得到的是这样的内容： <b>FLC @ c1cbe61d-a19d-4c82-ba17-3a577df0aeb5</b> （此GUID是由另一个站点生成的，然后在其<b>前面</b>添加了FLC @前缀）。 <br><br> 我们计算纯文本哈希。 在第一个系列中，我们得到<b>如下：0087196442FLC @ c1cbe61d-a19d-4c82</b> -ba17-3a577df0aeb59ee77779db5a44ef3f60044fcb0e1170218e642cb9adc0789ddd08871ad95c7e1d3b1391c6c79774d319b5141bd3b13b717c3d389206ede659cb280949feac66（很多信件，不要惊讶）。 <br> 在第二个回合中，哈希将变为百分之一百的HMAC： <b>5e43cbb404c81efeb35162e5bba0766f20b340fbabcc66fd5f7a6a1993a8ccd43fc6384ac53f939acca4378681e2bb17912eacf4c65b6d6aaaaa</b>再一次。 <br><br> 我们将其全部写入数据库中。 <br><br> 作为回应，我们写出您可以登录的钱包号码。 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">不，未连接。</b> <div class="spoiler_text"> 在这种情况下，您不必期待任何值得的事情，返回FALSE。 <br></div></div><br> 这就是复杂的注册系统的外观。 实际上，它看起来非常简单。 而且就代码而言-更复杂。 <br><br> 我们将花费更多时间并进行授权。 有了授权，情况就更简单了。 我们正在寻找一个帐户，并尝试登录，但需要了解熟悉的密码哈希生成算法。 然后我们进行验证，如果数据正确，则向客户提供一条重要的行，其中存储数据以供服务器和矿工之间进行通信。 <br><br><div class="spoiler">  <b class="spoiler_title">来自我自己。</b> <div class="spoiler_text"> 听起来我们不是在加密货币，而是服务器上的PHP与使用php.exe的PHP之间的授权系统。 在第二部分中，我们将在“蛋糕”中添加第二个蛋糕，在其中我们将看到与采矿，区块链和交易相关的内容。 <br></div></div><br> 再过15至25分钟，授权功能就准备就绪。 请参见下面的代码： <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($walletId, $password)</span></span></span><span class="hljs-function"> //  </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db) <span class="hljs-comment"><span class="hljs-comment">//    { $hash = crc32 ($walletId) . $walletId . hash_hmac ('sha512', str_rot13 ($password), 'FLC'); //     . $hash = hash_hmac ('sha512', $hash, 'FLC2'); //     . $newUser = $this-&gt;db-&gt;prepare (" SELECT * FROM `wallets` WHERE walletId = :walletId AND loginHash = :hash LIMIT 0, 1 "); //    . $newUser-&gt;bindParam (':walletId', $walletId, PDO::PARAM_STR); //     $newUser-&gt;bindParam (':hash', $hash, PDO::PARAM_STR); //     $newUser-&gt;execute (); //  . $object = $newUser-&gt;fetch_object (); //   ,     if ($object AND hash_equals ($object-&gt;hash, $hash)) //   ,   . { $loginString = new stdClass; //    stdClass $loginString-&gt;hash = $hash; //       . $loginString-&gt;wallet = $walletId; return ['token' =&gt; serialize ($loginString)]; //      ,   . } else return false; //   / . } else return false; //    }</span></span></code> </pre><br> 该代码几乎是注册的，但以相反的算法运行。 与用户的合作已经结束。 <br><br><h2> 后置条件 </h2><br> 在这段有趣的阅读文章期间，我们进行了以下操作： <br><br><ul><li> 我们简要地了解了加密货币，以及如何正确构建它。 </li><li> 他们简短地回答了一个问题“使用PHP进行集中式加密货币有意义吗？” </li><li> 执行此任务之前讨论的笔记 </li><li> 实施了加密账户系统。 </li></ul><br> 现在，您可以阅读盲注背后的内容： <br><br><div class="spoiler">  <b class="spoiler_title">在窗帘下</b> <div class="spoiler_text"> 本文的撰写时间约为4-5小时（所有日落和傍晚）。 在这段时间里，我的写作得到了发展，但是在撰写有关哈布拉哈伯的文章时，实现梦想的愿望并没有消失。 确实，由于OOP的简单概念，它比MySQLi更为容易使用，或更糟糕的是，带有mysql_前缀的普通函数被认为已经过时，不再适合在PHP中进行开发。 <br></div></div><br> 下次我们将做什么： <br><br><ul><li> 让我们进行挖掘。 </li><li> 让我们考虑事务和块的排列方式。 </li><li> 我们将进行交易，并对未使用的Block类有所了解。 </li></ul><br> 感谢您的阅读！ 再见！ 这是我的第一篇文章-我正在等待批评。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481392/">https://habr.com/ru/post/zh-CN481392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481378/index.html">如何优化应用程序开发</a></li>
<li><a href="../zh-CN481382/index.html">Windows本机应用程序和Acronis Active Restore</a></li>
<li><a href="../zh-CN481386/index.html">抖动：噪声信号可以改善它</a></li>
<li><a href="../zh-CN481388/index.html">加密货币交易所如何构建抵抗DeFi的区块链</a></li>
<li><a href="../zh-CN481390/index.html">来自OpenStreetMap 490世界的新闻（12/03/2019-09/12/2019）</a></li>
<li><a href="../zh-CN481394/index.html">在新游戏中重建我们对旧游戏的喜爱</a></li>
<li><a href="../zh-CN481398/index.html">适用于测试人员等的基本Linux命令</a></li>
<li><a href="../zh-CN481402/index.html">遍历QObject类的子级树的惰性实现</a></li>
<li><a href="../zh-CN481406/index.html">深入投入Ilona Mask的投资</a></li>
<li><a href="../zh-CN481416/index.html">宣布在明斯克举行的第二次AWS聚会（02/13/2020）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>