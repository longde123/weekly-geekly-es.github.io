<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìª üó≥Ô∏è üöÅ Einfache Experimente mit dem Mikrocontroller STM32F103 (Blue Tablet) ‚õ∞Ô∏è üí¥ üêµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Viele haben eine ‚Äûblaue Pille‚Äú erworben, um es zu versuchen. Aber aufgrund der Komplexit√§t der Programmierung war dieses Ding bis zu besseren Zeiten i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einfache Experimente mit dem Mikrocontroller STM32F103 (Blue Tablet)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466663/"><img src="https://habrastorage.org/webt/kx/9h/1s/kx9h1synxem3k3qz1dixgibvyqu.jpeg"><br><br>  Viele haben eine ‚Äûblaue Pille‚Äú erworben, um es zu versuchen.  Aber aufgrund der Komplexit√§t der Programmierung war dieses Ding bis zu besseren Zeiten irgendwo im Regal. <br><br>  Wir werden ber√ºcksichtigen, dass die ‚Äûbesten Zeiten‚Äú gekommen sind. <br><a name="habracut"></a><br><h2>  Was ist f√ºr Experimente notwendig: </h2><br><ul><li>  Hardware </li><li>  Software <br></li></ul><br><h3>  Hardware </h3><br>  Alle gebrauchten Teile / Komponenten k√∂nnen auf aliexpress.com erworben werden <br><br><ul><li>  Nat√ºrlich vor allem der Controller selbst. "Blue Tablet" </li><li>  USB-UART-Adapter </li><li>  Micro-USB-Kabel </li><li>  eine Reihe von Dr√§hten zum Verbinden von Komponenten miteinander </li></ul><br>  Es wird empfohlen, den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ST-Link V2-</a> Programmierer zu verwenden, um im Vergleich zu UART das Laden von ‚ÄûFirmware‚Äú und das Debuggen von Programmen zu beschleunigen <br><br><h3>  Software </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32 Flash Loader Demonstrator</a> (UM0462) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32 Virtual COM Port-Treiber</a> (USB VCP) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">STM32 ST-LINK-Dienstprogramm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.embitz.org Entwicklungsumgebung</a> </li><li>  <a href="">MIOC</a> - Programm - Konfigurator, der eine Firmware-Vorlage erstellt. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraterm</a> Terminal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Emulator</a> </li></ul><br><h3>  Was ist ein Modul? </h3><br>  Ein Modul ist eine Kombination aus Hardware und Software.  Der Hardwareteil ist das ‚ÄûTablet‚Äú STM32F103C8T6, der Softwareteil ist die mit dem <a href="">MIOC-</a> Programm erstellte ‚ÄûFirmware-Vorlage‚Äú <a href="">.</a> Dieses Programm ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenSource</a> . <br><br><h3>  Mikrocontroller-Ports </h3><br>  Der Mikrocontroller hat Stifte oder Beine.  Einige von ihnen sind Mikrocontroller-Stromversorgungen, andere haben einen speziellen Zweck (z. B. Zur√ºcksetzen), andere sind Allzweck-Ein- / Ausgabeschnittstellen (englische Allzweck-Ein- / Ausgabe, GPIO). <br><br>  Ports sind gruppiert (A; B; C ...).  Jede Gruppe enth√§lt bis zu 16 Ports, die von 0 bis 15 nummeriert sind. Daher sieht die Portnummerierung wie folgt aus: PA0, PA1, ... <br><br>  Ports werden f√ºr die Kommunikation zwischen den Komponenten des Moduls verwendet, beispielsweise einem Mikroprozessor und verschiedenen Peripherieger√§ten.  Ports k√∂nnen als Eingabe, Ausgabe und bidirektional fungieren. <br><br>  Die Tablet-Karte ist mit Anschl√ºssen gekennzeichnet. <br><br><h3>  GPIO - Allzweck-E / A-Schnittstelle </h3><br>  Im E / A-Modul werden die Haupttypen von Ports in der Tabelle dargestellt: <br><br><img src="https://habrastorage.org/webt/ba/cq/jp/bacqjpfg63onfpm_e7mwbuxzjze.gif"><br><br>  Als Sensoren, Aktoren werden wir verschiedene Ger√§te von Arduino verwenden. <br><br><h3>  MIOC-Programm (Module Input-Output Configurator) </h3><br>  Mit diesem Programm erstellen / konfigurieren wir die Firmware-Vorlage (Projekt f√ºr Embitz; Keil) des IO-Moduls.  Das Installationsprogramm ben√∂tigt nicht.  Herunterladen, ausf√ºhren.  Mit diesem Programm erstellen wir globale Variablen, die wir in unserer Firmware verwenden.  Variablen k√∂nnen Ports zugeordnet werden. <br><br>  Erstes Fenster ausf√ºhren: <br><br><img src="https://habrastorage.org/webt/5n/jn/wx/5njnwxghrgvkrq9yjjxkouggsua.jpeg"><br><br>  Erstellen Sie ein Projekt: <br><br><img src="https://habrastorage.org/webt/lo/dr/qv/lodrqvlrldvd9xihb8zaqwekjeq.jpeg"><br><br>  W√§hlen Sie einen Ordner f√ºr das Projekt.  Ordner, f√ºr das Projekt sollte leer sein! <br><br><img src="https://habrastorage.org/webt/eo/tr/2s/eotr2seugfw0avhcxmcndtpee10.jpeg"><br><br><img src="https://habrastorage.org/webt/qb/1z/t8/qb1zt8kk5zjv8jc4yiyhimcz2qc.jpeg"><br><br><img src="https://habrastorage.org/webt/sm/pn/xb/smpnxb-emshy7udwbo2sbpmqums.jpeg"><br><br><h3>  Das erste Programm - "Hallo Wort" f√ºr den Mikrocontroller </h3><br>  Wir blinken die LED auf der ‚Äûblauen Pille‚Äú.  Diese LED ist mit dem PC13-Port verbunden. <br><br>  Zeile zur Variablentabelle hinzuf√ºgen <br><br><img src="https://habrastorage.org/webt/m9/lq/te/m9lqtesqbqvk4o6kwyxod4ggdcy.jpeg"><br><br><img src="https://habrastorage.org/webt/nw/n-/90/nwn-90xwcb4o5vmmptxcigg62t0.jpeg"><br><br>  BSP-Code generieren (Taste F8) <br><br><img src="https://habrastorage.org/webt/xq/g0/2b/xqg02b2-mticafa2p5rhrxqk6zk.jpeg"><br><br>  Au√üerdem ist jedes Mal nach einem Projektwechsel eine BSP-Generierung erforderlich! <br><br>  √ñffnen Sie das erstellte Projekt in der Entwicklungsumgebung von EmBitz oder Keil.  EmBitz ist immer noch eine Problemumgehung.  Es scheint, dass der Autor dieses Projekt aufgegeben hat.  H√∂chstwahrscheinlich wird das Projekt in Zukunft Code :: Blocks verwenden. <br><br>  Schreiben Sie in die Datei main.c Folgendes: <br><br><img src="https://habrastorage.org/webt/xo/8q/8_/xo8q8_n85hbj-4ykrjc7am3eq0e.jpeg"><br>  <i>(Um das Bild zu vergr√∂√üern, √∂ffnen Sie es in einer neuen Registerkarte.)</i> <br><br>  Dr√ºcken Sie in EmBitz F2, und dr√ºcken Sie F7, nachdem das Informationsfenster angezeigt wurde.  Die Zusammenstellung sollte erfolgen. <br><br>  Durch erneutes Dr√ºcken von F2 werden die Informationslesezeichen ausgeblendet. <br><br><img src="https://habrastorage.org/webt/kh/ba/ca/khbaca7tie6wd77h8eblau1r_he.jpeg"><br><br>  Laden Sie es auf den Mikrocontroller herunter und sehen Sie, wie es funktioniert. <br><br><h3>  Knopf </h3><br>  F√ºgen Sie eine Schaltfl√§che hinzu, zum Beispiel: <br><br><img src="https://habrastorage.org/webt/4r/ka/jo/4rkajoaqqvrg1axdbg7xbkuseo8.jpeg"><br><br>  Schaltplan: <br><br><img src="https://habrastorage.org/webt/r6/dh/nz/r6dhnzxdasck_-f0jbdvdykdpow.jpeg"><br><br>  F√ºgen Sie der Tabelle eine Variable hinzu: <br><br><img src="https://habrastorage.org/webt/g5/jb/o7/g5jbo7sxovbdjuttlxhugp5-q8m.jpeg"><br><br>  Wir generieren BSP. <br><br>  √Ñndern Sie das Programm wie folgt: <br><br><img src="https://habrastorage.org/webt/e-/2y/xm/e-2yxmvestebzsnczhv4yplgl-i.jpeg"><br><br>  Wir erstellen ein neues BSP (F8), kompilieren es und laden es in den Mikrocontroller. <br><br>  Wir dr√ºcken den Knopf - die LED leuchtet auf, lassen los - sie erlischt. <br><br>  Anstelle einer LED kann ein Relais an einen anderen Port angeschlossen werden, zum Beispiel: <br><br><img src="https://habrastorage.org/webt/n6/vo/zd/n6vozderwmz30oa6poco81scyby.jpeg"><br><br>  Und verwalten Sie eine Art Nutzlast. <br><br><h3>  Nachrichten an die Konsole ausgeben </h3><br>  Sie m√ºssen bestimmen, welche Konsole verwendet werden soll. <br><br>  Die Optionen sind: <br><br><ul><li>  USB-UART-Adapter </li><li>  virtueller COM-Anschluss (Micro-USB-Kabel) </li></ul><br>  Wenn UART1 und USB als Konsole gleichzeitig in der Konfiguration ausgew√§hlt sind und USB VCP nicht ausgew√§hlt ist, wird die Konsole nirgendwo zugewiesen.  Das hei√üt,  Die Funktion print_str (oder das Druckmakro) wird nicht beschworen, aber es wird auch keine Ausgabe ausgegeben.  Das gleiche Verhalten tritt auf, wenn Sie keine Schnittstelle oder USB VCP ausw√§hlen, aber weder UART1 noch USB als Konsole ausw√§hlen. <br><br>  Konsolenkonfiguration: <br><br><img src="https://habrastorage.org/webt/y9/qg/ts/y9qgtsdjms0dvksn2oy0g6kjkbm.jpeg"><br><br>  Verbinden Sie TettaTerm mit dem COM-Port (Konsole).  Wenn wir die Firmware √ºber UART1 herunterladen, vergessen Sie nicht, den COM-Port zu trennen / anzuschlie√üen.  In TerraTerm "Hot Buttons" Alt + I;  Alt + N Dies ist f√ºr die Startoption √ºber ST-Link nicht erforderlich. <br><br>  Bearbeiten Sie das Programm: <br><br><img src="https://habrastorage.org/webt/jd/vz/dv/jdvzdv3ysbtb_mw5ljqfhinoubq.jpeg"><br><br>  Nun wird der Status der Schaltfl√§che auf der Konsole angezeigt: <br><br><img src="https://habrastorage.org/webt/ni/ni/jd/ninijd5kgzqc5d7fepqkumdg4fs.jpeg"><br><br><h3>  DS18B20 </h3><br>  Schlie√üen Sie den Temperatursensor DS18B20 an das ‚ÄûTablet‚Äú an. <br><br><img src="https://habrastorage.org/webt/nx/6g/j0/nx6gj0jicce7mzwi4tcq9gjh15s.jpeg"><br><br>  F√ºgen Sie die Variable in die Tabelle ein: <br><br><img src="https://habrastorage.org/webt/di/h5/un/dih5unsvycncq2dlpeuyyzcedxm.jpeg"><br><br>  √Ñndern Sie das Programm wie folgt: <br><br><img src="https://habrastorage.org/webt/vf/9x/nv/vf9xnvbxydmf9yjv9prbiu3fet0.jpeg"><br><br>  Wir erstellen eine neue Konfiguration, kompilieren sie und laden sie in den Mikrocontroller. <br><br>  Die Konsole zeigt die vom Sensor gemessene Temperatur an. <br><br><img src="https://habrastorage.org/webt/8q/bp/va/8qbpva-pp3sshfv601v3mhwgaao.jpeg"><br><br><h3>  ADC </h3><br>  Als Beispiel f√ºr die Arbeit mit dem ADC k√∂nnen Sie das Potentiometer verwenden: <br><br><img src="https://habrastorage.org/webt/ui/wv/18/uiwv18tudkf-usapa7dnxugzblo.jpeg"><br><br>  Oder Bodenfeuchtesensor <br><br><img src="https://habrastorage.org/webt/zi/yr/b9/ziyrb9if07uzocowtawvuh_piua.jpeg"><br><br>  Lassen Sie uns auf den letzten eingehen: <br><br>  Konfigurieren Sie den Port: <br><br><img src="https://habrastorage.org/webt/uc/uq/rh/ucuqrhsqpjsu3gc7uoed5igu3xq.jpeg"><br><br>  Programm bearbeiten: <br><br><img src="https://habrastorage.org/webt/ds/qz/6x/dsqz6xdakkh6brl7fmus3jybjrq.jpeg"><br><br>  Wir kompilieren, laden. <br><br>  In der Konsole beobachten wir: <br><br><img src="https://habrastorage.org/webt/z5/ch/2d/z5ch2dfitfph2j44d61tgfunwim.jpeg"><br><br>  ADC - aktueller ADC-Messwert.  max und min - aufgezeichnete minimale und maximale Sensorwerte, vollst√§ndig trocken (0%) und sehr nass (100%). <br><br>  Sehr nass (100%) - Legen Sie den Sensor in ein Glas Wasser.  Sehr trocken (0%) - liegt im Freien. <br><br>  Tats√§chlich haben wir den Bodenfeuchtesensor von 0 auf 100% kalibriert.  Wir setzen die Maximal- und Minimalwerte in den Programmtext. <br><br><img src="https://habrastorage.org/webt/ie/ra/w_/ieraw_hmrfqtonarnunsy1qm2a8.jpeg"><br><br>  Das Ergebnis der Arbeit.  Der Sensor befindet sich im Boden des Blumentopfs: <br><br><img src="https://habrastorage.org/webt/5w/gy/ls/5wgylsgq8ilhkkderxlso_udjja.jpeg"><br><br>  Dieses Projekt ist eine L√∂sungsvorlage f√ºr die Bew√§sserung von Pflanzen. <br><br>  Das ist alles f√ºr jetzt.  Das MIOC-Programm wird mit zus√§tzlichen Funktionen erg√§nzt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466663/">https://habr.com/ru/post/de466663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466651/index.html">Auswahl zwischen XML und SQL zum Rollen von LiquiBase-Skripten am Beispiel von Java / Spring / H2</a></li>
<li><a href="../de466653/index.html">Debugging-Spiele f√ºr NES: wie es heute passiert</a></li>
<li><a href="../de466657/index.html">Dynamisches Detail: verdeckte Compiler-Spiele, Speicherverlust, Leistungsnuancen</a></li>
<li><a href="../de466659/index.html">Kubecost Bewertung, um Geld f√ºr Kubernetes in den Wolken zu sparen</a></li>
<li><a href="../de466661/index.html">Fernstudium im Ausland: Notizen vor der Arbeit</a></li>
<li><a href="../de466665/index.html">CSS-√úberlauf und Datenverlust</a></li>
<li><a href="../de466667/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 379 (2. - 8. September 2019)</a></li>
<li><a href="../de466669/index.html">Tesla entwickelt Batterien, die 1,6 Millionen km ohne Ersatz laufen k√∂nnen</a></li>
<li><a href="../de466671/index.html">PHP Digest Nr. 164 (27. August - 9. September 2019)</a></li>
<li><a href="../de466673/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 46. OSPF-Leistungspr√ºfung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>