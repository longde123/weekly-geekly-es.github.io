<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•‹ ğŸ•‘ ğŸ± è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚ ç¬¬ä¸€éƒ¨åˆ† ğŸ˜“ ğŸŒ ğŸ‘¨ğŸ½â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨ä½¿ç”¨PostgreSQLçš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»ç§¯ç´¯äº†ä¸€ç™¾å¤šä¸ªç”¨äºå¤„ç†ç³»ç»Ÿç›®å½•çš„å‡½æ•°ï¼špg_classï¼Œpg_attributeï¼Œpg_constraintsç­‰ã€‚ 


 è¯¥æ€ä¹ˆåŠï¼Ÿ å®ƒä»¬ç›¸å¯¹å¾ˆå°‘ä½¿ç”¨ã€‚ åŒ…æ‹¬åœ¨ä»»ä½•é¡¹ç›®ä¸­å—ï¼Ÿ å…‹æ‹‰æ–¯è¯ºäºšå°”æ–¯å…‹å®¢æˆ·ä¸ä¼šä¸ºè¿™ç§â€œåºŸè¯â€ä»˜æ¬¾ã€‚ ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬å¯¹ä½œè€…ä»¥å¤–çš„å…¶ä»–äººæœ‰ç”¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚ ç¬¬ä¸€éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415575/"> åœ¨ä½¿ç”¨PostgreSQLçš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»ç§¯ç´¯äº†ä¸€ç™¾å¤šä¸ªç”¨äºå¤„ç†ç³»ç»Ÿç›®å½•çš„å‡½æ•°ï¼špg_classï¼Œpg_attributeï¼Œpg_constraintsç­‰ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/rx/ta/zcrxta08dnfat5cqpgid4lyq7by.png"></div><br> è¯¥æ€ä¹ˆåŠï¼Ÿ å®ƒä»¬ç›¸å¯¹å¾ˆå°‘ä½¿ç”¨ã€‚ åŒ…æ‹¬åœ¨ä»»ä½•é¡¹ç›®ä¸­å—ï¼Ÿ å…‹æ‹‰æ–¯è¯ºäºšå°”æ–¯å…‹å®¢æˆ·ä¸ä¼šä¸ºè¿™ç§â€œåºŸè¯â€ä»˜æ¬¾ã€‚ ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬å¯¹ä½œè€…ä»¥å¤–çš„å…¶ä»–äººæœ‰ç”¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ ç„¶åï¼Œä»–å†³å®šå°†å®ƒä»¬åƒçœ‹ä¹¦ä¸€æ ·æ”¾ç½®åœ¨å…¬å…±æ©±æŸœä¸­ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚ <br><a name="habracut"></a><br> æœ‰äººæƒ³åœ¨ä»–ä»¬çš„å·¥ä½œä¸­ä½¿ç”¨å®ƒä»¬ã€‚ å’Œå¯¹ç³»ç»Ÿç›®å½•çš„ç»éªŒæ„Ÿå…´è¶£çš„äººã€‚ <br><br> ä½†æ˜¯ä¸ºäº†ä¸ä½¿å‡ºç‰ˆç‰©å˜æˆæ— èŠçš„æšä¸¾ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦åˆ›å»ºè¿™äº›åŠŸèƒ½ï¼Œæˆ‘å†³å®šç€é‡è®¨è®ºé‚£äº›å¯ä»¥å®ç°å…±åŒç›®æ ‡çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œé€‰æ‹©ç”¨äºæ˜¾ç¤ºä»»æ„æ•°æ®åº“è¡¨ç‰¹å¾çš„æ‰©å±•åˆ—è¡¨çš„åŠŸèƒ½ã€‚ <br><br> æ•°æ®åº“è¡¨ç‰¹å¾çš„æ‰©å±•åˆ—è¡¨ç”±<b>admtf_Table_ComplexFeatures</b>å‡½æ•°è¿”å›ï¼Œè¯¥å‡½æ•°åœ¨æœ¬æ–‡ä¸­ç§°ä¸ºheadå‡½æ•°ã€‚ å› æ­¤ï¼Œæœ¬æ–‡å°†é™äºè€ƒè™‘åœ¨æ‰§è¡Œheadå‡½æ•°çš„è¿‡ç¨‹ä¸­è°ƒç”¨çš„å‡½æ•°ã€‚ <br><br> æœ¬æ–‡çš„å‰åŠéƒ¨åˆ†æä¾›äº†æœ‰å…³åŠŸèƒ½å®ç°çš„è¯„è®ºã€‚ ç¬¬äºŒä¸ªæ˜¯å‡½æ•°çš„æºä»£ç ã€‚ å¯¹äºåªå¯¹æºæ–‡æœ¬æ„Ÿå…´è¶£çš„è¯»è€…ï¼Œæˆ‘ä»¬å»ºè®®ç«‹å³ç»§ç»­é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é™„å½•</a> ã€‚ <br><p>  <b>å¦è¯·å‚é˜…</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸‰éƒ¨åˆ†</a> ã€‚</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ€åï¼ˆç¬¬å››éƒ¨åˆ†ï¼‰</a> ã€‚</b> <br></p><br><br><a name="ExpFeatures"></a><br><h3> æˆ‘ä»¬åœ¨è¯´ä»€ä¹ˆé«˜çº§åŠŸèƒ½ï¼Ÿ </h3><br> ä¸ºäº†äº†è§£æ•°æ®åº“è¡¨çš„æ‰©å±•ç‰¹å¾çš„å«ä¹‰ï¼Œæˆ‘ä»¬é¦–å…ˆè€ƒè™‘ä»¥ä¸‹ç‰¹å¾åˆ—è¡¨ã€‚ è¯¥åˆ—è¡¨åŒ…å«<b>admtf_Table_ComplexFeaturesï¼ˆ <i>'public'</i> ï¼Œ <i>'street'</i> ï¼‰</b>è¿”å›çš„Streetæ•°æ®åº“è¡¨çš„ç‰¹å¾ã€‚ <br><p> ä¸‹è¡¨åŒ…å«Streetè¡¨åŠŸèƒ½çš„ç¼©å†™åˆ—è¡¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é™„å½•2çš„è¡¥å……ææ–™ä¸­</a>æä¾›äº†æ­¤è¡¨çš„å®Œæ•´ç‰¹æ€§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€‚</a> <br><br>  <strong>è¡¨1. Streetè¡¨çš„é«˜çº§åŠŸèƒ½ã€‚</strong> <br><img src="https://habrastorage.org/webt/zj/5x/jn/zj5xjnygaeedplccbe_itjr7fpu.png"><br></p><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­è¡¨æ ¼çš„æ–‡æœ¬ç‰ˆæœ¬</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5"> ç±»åˆ«åˆ†ç±» </th><th width="5"> ä¸è¡Œ </th><th width="15"> èŒç§° </th><th width="20"> è¯„æ³¨ </th><th width="20"> ç±»å‹ </th><th width="20"> åŸºæœ¬ç±»å‹ </th><th width="5">  ï¼Ÿ ä¸ä¸ºNULL </th></tr><tr><td width="5">  tbl </td><td width="5">  0 </td><td width="15"> è¡— </td><td width="20"> å®šå±…ç‚¹çš„è¡—é“æ¸…å• </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  att </td><td width="5">  1ä¸ª </td><td width="15">  wcrccode </td><td width="20"> å›½å®¶åŒºå· </td><td width="20">  wcrccode </td><td width="20">  Smallint </td><td width="5">  Å¤ </td></tr><tr><td width="5">  att </td><td width="5">  2 </td><td width="15"> åœ°åŒºæ€§ </td><td width="20"> ç¤¾åŒºID </td><td width="20"> åœ°åŒºæ€§ </td><td width="20"> æ•´æ•° </td><td width="5">  Å¤ </td></tr><tr><td width="5">  att </td><td width="5">  3 </td><td width="15"> è¡—å¤´å°è´© </td><td width="20"> æ‘IDè¡— </td><td width="20"> è¡—å¤´å°è´© </td><td width="20">  Smallint </td><td width="5">  Å¤ </td></tr><tr><td width="5">  att </td><td width="5">  4 </td><td width="15">  streettypeacrm </td><td width="20"> è¡—å¤´ç¼©å†™ </td><td width="20">  streettypeacrm </td><td width="20"> äººç‰©ï¼ˆ8ï¼‰ </td><td width="5">  ËšF </td></tr><tr><td width="5">  att </td><td width="5">  5 </td><td width="15"> è¡—é“å </td><td width="20"> è¡—é“åç§° </td><td width="20">  streettypeacrm </td><td width="20">  varcharï¼ˆ150ï¼‰ </td><td width="5">  Å¤ </td></tr><tr><td width="5">  pk </td><td width="5">  0 </td><td width="15">  xpkstreet </td><td width="20"> è¡—é“è¡¨ä¸»é”® </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  pkatt </td><td width="5">  1ä¸ª </td><td width="15">  wcrccode </td><td width="20"> å›½å®¶åŒºå· </td><td width="20">  wcrccode </td><td width="20">  Smallint </td><td width="5">  Å¤ </td></tr><tr><td width="5">  fk01 </td><td width="5">  1ä¸ª </td><td width="15">  fk_street_locality </td><td width="20"> è¡¨å¤–é”® </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  fk02 </td><td width="5">  2 </td><td width="15">  fk_street_streettype </td><td width="20"> è¡¨å¤–é”® </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx01 </td><td width="5">  1ä¸ª </td><td width="15">  xie1street </td><td width="20"> æŒ‰å±…æ°‘ç‚¹ç±»å‹å’Œè¡—é“åç§°ç¼–åˆ¶çš„ç´¢å¼• </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx02 </td><td width="5">  2 </td><td width="15">  xie2street </td><td width="20"> é‚®é€’åŒºå· </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx03 </td><td width="5">  3 </td><td width="15">  xie3street </td><td width="20"> æ‰€æœ‰å®šå±…ç‚¹çš„è¡—é“åç§°ç´¢å¼• </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5">  idx04 </td><td width="5">  4 </td><td width="15">  xpkstreet </td><td width="20"> è¡—é“è¡¨çš„å”¯ä¸€ï¼ˆä¸»é”®ï¼‰ç´¢å¼• </td><td width="20"></td><td width="20"></td><td width="5"></td></tr></tbody></table><br></div></div><br><p> åˆ—ä¸¾å¯¹è¿™ç»„å­—æ¯å’Œæ•°å­—çš„æ•Œæ„ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ­£åœ¨è°ˆè®ºæ•°æ®åº“è¡¨çš„é€šå¸¸ç‰¹å¾ï¼š </p><br><ul><li> è¡¨åï¼› </li><li> è¡¨å±æ€§åŠå…¶ç±»å‹çš„åˆ—è¡¨ï¼› </li><li> è¡¨çš„ä¸»é”®å’Œå¤–é”®åˆ—è¡¨ï¼Œä»¥åŠç»„æˆå®ƒä»¬çš„è¡¨çš„å±æ€§ï¼› </li><li> è¡¨ç´¢å¼•åˆ—è¡¨ã€‚ </li></ul><br><p> ç‰¹æ€§åˆ—è¡¨ä¸­æ¯ä¸ªæ¡ç›®çš„å”¯ä¸€æ€§ç”±â€œç±»åˆ«â€å­—æ®µçš„å€¼å’Œç‰¹æ€§çš„åºåˆ—å·ï¼ˆâ€œç¼–å·â€ï¼‰ç¡®ä¿ã€‚ </p><br><br>  <strong>è¡¨2.è¡¨ç‰¹å¾çš„ç±»åˆ«ã€‚</strong> <br><img src="https://habrastorage.org/webt/sy/j9/5z/syj95z_zta0nii9_9-n7zaxzq3q.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­è¡¨æ ¼çš„æ–‡æœ¬ç‰ˆæœ¬</b> <div class="spoiler_text"><table><tbody><tr><th> é¦–å­—æ¯ç¼©å†™ </th><th> é¢„çº¦æ—¶é—´ </th></tr><tr><td> å¾…å®š </td><td> è¡¨ç‰¹å¾ </td></tr><tr><td>  att </td><td> è¡¨å±æ€§ç‰¹å¾ </td></tr><tr><td> åºåˆ— </td><td> åºåˆ—ç‰¹å¾ </td></tr><tr><td>  pk </td><td> ä¸»è¦å…³é”®ç‰¹å¾ </td></tr><tr><td>  pkAtt </td><td> ä¸»é”®å±æ€§ç‰¹å¾ </td></tr><tr><td>  fk99 </td><td> å¤–é”®åŠŸèƒ½ </td></tr><tr><td>  fk99att </td><td> å¤–é”®å±æ€§ç‰¹å¾ </td></tr><tr><td>  fk99rtbl </td><td> å¤–é”®å¼•ç”¨è¡¨çš„ç‰¹å¾ </td></tr><tr><td>  fk99ratt </td><td> å¤–é”®å¼•ç”¨çš„è¡¨çš„å±æ€§ç‰¹å¾ </td></tr><tr><td> ç¼–å·99 </td><td> æŒ‡æ ‡ç‰¹å¾ </td></tr><tr><td>  Idx99att </td><td> ç´¢å¼•å±æ€§ç‰¹å¾ </td></tr><tr><td>  Inhtbl99 </td><td> ç”Ÿæˆè¡¨çš„ç‰¹å¾ </td></tr></tbody></table><br></div></div><br><p> ç±»åˆ«å€¼æ˜¯åŒºåˆ†å½¼æ­¤ä¸åŒçš„ç‰¹å¾ç»„æ‰€å¿…éœ€çš„ã€‚ åºåˆ—å·ï¼Œä»¥åŒºåˆ†ç»„å†…çš„ç‰¹å¾ã€‚ </p><br><p> å¯ä»¥åœ¨æ•°æ®åº“è¡¨ä¸­å£°æ˜å‡ ä¸ªå¤–é”®ï¼ˆFOREIGN KEYï¼‰å’Œç´¢å¼•ã€‚ å› æ­¤ï¼Œè¿™äº›ç‰¹å¾åŠå…¶åä»£çš„ç±»åˆ«å€¼åŒ…å«ä¸€ä¸ªåºåˆ—å·ã€‚ ä¾‹å¦‚ï¼Œé”®ä¸ºâ€œ Categoryâ€ = <strong>idx02att</strong>å’Œâ€œ No.â€ = <strong>1</strong>çš„æ¡ç›®è¡¨ç¤ºç¬¬äºŒä¸ªç´¢å¼•çš„ç¬¬ä¸€ä¸ªå±æ€§ã€‚ </p><br><p> åœ¨ä¸Šé¢çš„ç±»åˆ«åˆ—è¡¨ä¸­ï¼Œåºåˆ—å·çš„ä½ç½®è¡¨ç¤ºä¸ºâ€œ 99â€ã€‚ </p><br><p>  <strong>å¤‡æ³¨1</strong> </p><br><img src="https://habrastorage.org/webt/xt/ye/1l/xtye1lr36ssftr4kmvnwedjgnew.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­æ“ä½œå‘˜çš„æºä»£ç </b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> admtf_Table_ComplexFeatures(<span class="hljs-string"><span class="hljs-string">'pg_catalog'</span></span>,<span class="hljs-string"><span class="hljs-string">'pg_class'</span></span>);</code> </pre> <br></div></div><br><br><p> æœ¬æ–‡æä¾›äº†è¡¨ç‰¹æ€§çš„ç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹åœ¨ä¸“é—¨ä¸ºæ¼”ç¤ºåŠŸèƒ½è€Œåˆ›å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„è¾…åŠ©æ–¹æ¡ˆä¸­è¿›è¡Œ</a>äº†ç®€è¦æè¿°ã€‚ ä½†æ˜¯ï¼Œå·²ç»åœ¨æ•°æ®åº“ä¸­åˆ›å»ºäº†è¯¥åŠŸèƒ½çš„è¯»è€…å¯ä»¥å°†å…¶æ–¹æ¡ˆå’Œè¡¨çš„åç§°ç”¨ä½œå‚æ•°ã€‚ è€Œä¸”ï¼Œä¾‹å¦‚ï¼Œå°½ç®¡åœ¨è¿™ç§æƒ…å†µä¸‹å‘å‡ºäº†æœ‰é™æ•°é‡çš„ç‰¹å¾ï¼Œä½†æ˜¯<strong>pg_class</strong>ç›®å½•å¯ä»¥ç”¨ä½œå‚æ•°ã€‚ </p><p></p><p>  <strong>å¤‡æ³¨çš„ç»“å°¾ã€‚</strong> </p><br><a name="tfTableCF_def"></a><br><h3> å¤´åŠŸèƒ½ç»“æ„ </h3><br><img src="https://habrastorage.org/webt/mn/pw/9w/mnpw9welx2ltfhwiqllgqrp6uyc.png"><br>  <strong>å›¾</strong>  <strong>1.å¼•èµ·å¤´éƒ¨åŠŸèƒ½çš„åŠŸèƒ½ã€‚</strong> <br><br>  <strong>è¡¨3.åŠŸèƒ½åˆ†é…ã€‚</strong> <br><img src="https://habrastorage.org/webt/po/yb/et/poybetf0ogfvr0l95pxzdw5m1yq.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­è¡¨æ ¼çš„æ–‡æœ¬ç‰ˆæœ¬</b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5"> ä¸è¡Œ </th><th width="10"> èŒç§° </th><th width="40"> é¢„çº¦æ—¶é—´ </th></tr><tr><td width="5">  1ä¸ª </td><td width="10">  admtf_Table_Features </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨ç‰¹å¾çš„åˆ—è¡¨ </td></tr><tr><td width="5">  2 </td><td width="10">  admtf_Table_Attributes </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨å±æ€§åŠå…¶ç‰¹å¾çš„åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  3 </td><td width="10">  admtf_Table_Constraintes </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨é™åˆ¶åŠå…¶ç‰¹å¾çš„åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  4 </td><td width="10">  admtf_Table_Indexes </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨ç´¢å¼•åŠå…¶ç‰¹å¾çš„åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  5 </td><td width="10">  admtf_Table_InheritanceChildrens </td><td width="40"> è¯¥å‡½æ•°è¿”å›ç”±ï¼ˆIHERITSï¼‰ä»æºæ•°æ®åº“è¡¨ç”Ÿæˆçš„è¡¨çš„åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  6 </td><td width="10">  admtf_Table_Sequences </td><td width="40"> è¯¥å‡½æ•°è¿”å›è¯¥è¡¨æ‰€ä¾èµ–çš„åºåˆ—åˆ—è¡¨ï¼ˆSEQUENCEï¼‰ã€‚ </td></tr><tr><td width="5">  7 </td><td width="10">  admtf_PrimaryKey_ComplexFeatures </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨çš„ä¸»é”®ç‰¹å¾ï¼ˆPRIMARY KEYï¼‰çš„å®Œæ•´ï¼ˆæ‰©å±•ï¼‰åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  8 </td><td width="10">  admtf_ForeignKey_ComplexFeatures </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨çš„å¤–é”®ç‰¹å¾ï¼ˆFOREIGN KEYï¼‰çš„å®Œæ•´ï¼ˆæ‰©å±•ï¼‰åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  9 </td><td width="10">  admtf_Index_ComplexFeatures </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨ç´¢å¼•ç‰¹å¾çš„å®Œæ•´ï¼ˆæ‰©å±•ï¼‰åˆ—è¡¨ã€‚ </td></tr><tr><td width="5">  10 </td><td width="10">  admtf_Table_ComplexFeatures </td><td width="40"> è¯¥å‡½æ•°è¿”å›æ•°æ®åº“è¡¨ç‰¹å¾çš„å®Œæ•´ï¼ˆæ‰©å±•ï¼‰åˆ—è¡¨ã€‚ </td></tr></tbody></table><br></div></div><br><p>  <strong>å¤‡æ³¨2ã€‚</strong> </p><br><p> åŠŸèƒ½æè¿°å°†æŒ‰ä¸Šé¢æ˜¾ç¤ºçš„é¡ºåºæ’åˆ—ã€‚ åŸå› æ˜¯è¯¥æ–‡ç« å°†å¿…é¡»åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ã€‚ å¹¶ä¸”å¯ä»¥ä½¿ç”¨æŒ‰æ­¤é¡ºåºæ’åˆ—çš„åŠŸèƒ½ï¼Œè€Œä¸ç®¡å…¶ä¸­çš„æŸäº›åŠŸèƒ½ä»…åœ¨å‡ºç‰ˆç‰©çš„ä»¥ä¸‹éƒ¨åˆ†ä¸­è¿›è¡Œæè¿°çš„äº‹å®ã€‚ </p><br><p>  <strong>å¤‡æ³¨çš„ç»“å°¾ã€‚</strong> </p><br><br><h3>  admtf_Table_Featureså‡½æ•°åˆ—è¡¨æ•°æ®åº“çš„è¡¨ç‰¹å¾ </h3><br><a name="tfTableF_def"></a><br><br><p>  admtf_Table_Featureså‡½æ•°è¿”å›æ•°æ®åº“è¡¨æœ¬èº«çš„ç‰¹å¾åˆ—è¡¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯ä»¥åœ¨æ­¤å¤„æŸ¥çœ‹å’Œä¸‹è½½æºä»£ç ã€‚</a> </p><br><p> ä½œä¸ºå‚æ•°ï¼Œæ­¤å‡½æ•°é‡‡ç”¨æºè¡¨çš„åç§°<b>ï¼ˆa_TableName</b> ï¼‰å’Œåœ¨å…¶ä¸­åˆ›å»ºè¡¨çš„æ–¹æ¡ˆçš„åç§°ï¼ˆ <b>a_SchemaName</b> ï¼‰ã€‚ </p><br><p> è¯¥å‡½æ•°ä»<b>pg_class</b>ç›®å½•<b>æ¡ç›®ä¸­</b>æå–ä¸»è¦æ•°æ®ï¼Œé™¤è¡¨æ¡ç›®å¤–ï¼Œè¯¥æ¡ç›®è¿˜åŒ…å«æœ‰å…³åºåˆ—ï¼Œè§†å›¾ï¼Œå®ä¾‹åŒ–è§†å›¾å’Œç»„åˆç±»å‹çš„è®°å½•ã€‚ å› æ­¤ï¼Œè¦é€‰æ‹©è¡¨ï¼Œä½¿ç”¨æ¡ä»¶relkind = <b><font color="red">'r'</font></b> ã€‚ </p><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> tbl.relname,dsc.description,tbl.relnatts::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,tbl.relchecks::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::<span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid=dsc.objoid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName);</code> </pre><br><p> å¦å¤–ï¼Œè¯¥å‡½æ•°è®¿é—®ç›®å½•æ•°æ®<b>pg_namespace</b>å’Œ<b>pg_description</b> ã€‚ ç¬¬ä¸€ä¸ªåŒ…å«æ•°æ®åº“æ¨¡å¼çš„åç§°ï¼Œç¬¬äºŒä¸ªåŒ…å«å¯¹æ‰€æœ‰æ•°æ®åº“å¯¹è±¡çš„æ³¨é‡Šã€‚ </p><br><p> é‡è¦çš„æ˜¯è¦æ³¨æ„æ¡ä»¶<b>objsubid = 0</b> ã€‚ å®ƒå®šä¹‰äº†è¡¨çš„æ³¨é‡Šï¼Œå› ä¸ºè¡¨åŠå…¶å±æ€§çš„objoidå­—æ®µçš„å€¼éƒ½ç›¸åŒã€‚ å…³äºè¡¨çš„å±æ€§çš„æ³¨é‡ŠåŒ…å«åœ¨<b>objsubid</b>ä¸è¯¥å±æ€§çš„ç¼–å·åŒ¹é…çš„æ¡ç›®ä¸­ã€‚ </p><br><br>  <strong>è¡¨4.æ‰§è¡Œadmtf_Table_Featureså‡½æ•°ï¼ˆâ€œ publicâ€ï¼Œâ€œ Streetâ€ï¼‰çš„ç»“æœã€‚</strong> <br><br><table width="95" border="1"><tbody><tr><th width="10"> èŒç§° </th><th width="20"> è¯„æ³¨ </th><th width="5"> å±æ€§æ•°é‡ </th><th width="5"> æ£€æŸ¥çº¦æŸæ•° </th><th width="5">  ï¼Ÿ æœ‰ä¸»é”®å— </th><th width="5">  ï¼Ÿ æ˜¯å£°æ˜çš„ç´¢å¼• </th><th width="5">  ï¼Ÿ æœ‰åè£”å— </th><th width="5"> è¡¨ä¸­çš„æ¡ç›®æ•° </th></tr><tr><td width="10"> è¡— </td><td width="20"> å®šå±…ç‚¹çš„è¡—é“æ¸…å• </td><td width="5">  22 </td><td width="5">  0 </td><td width="5">  Å¤ </td><td width="5">  Å¤ </td><td width="5">  ËšF </td><td width="5">  20150 </td></tr></tbody></table><br><p>  <strong>å¤‡æ³¨3</strong> </p><br><p> æ³¨æ„è¡—é“è¡¨å±æ€§çš„æ•°é‡ã€‚ å®ƒä¸è¾…åŠ©æ¨¡å¼ä¸­æŒ‡å®šçš„å±æ€§æ•°é‡æ˜æ˜¾ä¸åŒã€‚ </p><br><p> è¡¨5. Streetè¡¨çš„å…¶ä»–å±æ€§ã€‚ </p><br><table><tbody><tr><th width="10"> å§“å </th><th width="5">  tty </th><th width="5">  Attnum </th><th width="10"> æ³¨æ„äº‹é¡¹ </th></tr><tr><td width="10">  in </td><td width="5">  29æ—¥ </td><td width="5">  -4 </td><td width="10"> ç³»ç»Ÿå±æ€§ </td></tr><tr><td width="10"> æœ€å° </td><td width="5">  28 </td><td width="5">  -3 </td><td width="10"> ç³»ç»Ÿå±æ€§ </td></tr><tr><td width="10">  ctid </td><td width="5">  27 </td><td width="5">  -1 </td><td width="5"> ç³»ç»Ÿå±æ€§ </td></tr><tr><td width="10">  wcrccode </td><td width="5">  795369 </td><td width="5">  1ä¸ª </td><td width="5"> æœ‰æ•ˆå±æ€§ </td></tr><tr><td width="10"> åœ°åŒºæ€§ </td><td width="5">  795352 </td><td width="5">  2 </td><td width="10"> æœ‰æ•ˆå±æ€§ </td></tr><tr><td width="10"> è¡—å¤´å°è´© </td><td width="5">  795364 </td><td width="5">  3 </td><td width="10"> æœ‰æ•ˆå±æ€§ </td></tr><tr><td width="10">  streettypeacrm </td><td width="5">  1919168 </td><td width="5">  4 </td><td width="10"> æœ‰æ•ˆå±æ€§ </td></tr><tr><td width="10"> è¡—é“å </td><td width="5">  1043 </td><td width="5">  5 </td><td width="10"> æœ‰æ•ˆå±æ€§ </td></tr><tr><td width="10">  ..... pg.dropped.6 ........ </td><td width="5">  0 </td><td width="5">  6 </td><td width="10"> è¿œç¨‹å±æ€§ </td></tr><tr><td width="10">  ..... pg.dropped.7 ........ </td><td width="5">  0 </td><td width="5">  7 </td><td width="10"> è¿œç¨‹å±æ€§ </td></tr></tbody></table><br><p> äº‹å®æ˜¯ï¼Œé™¤äº†ä¸»è¦å±æ€§å¤–ï¼ŒPostgreSQLè¿˜è€ƒè™‘äº†å‡ ä¸ªç³»ç»Ÿå±æ€§ï¼Œç”šè‡³åˆ é™¤äº†å±æ€§ã€‚ </p><br><p>  <strong>ç»“æŸè¯­</strong> </p><br><br><h3> æ•°æ®åº“è¡¨å±æ€§åŠå…¶ç‰¹å¾çš„å‡½æ•°admtf_Table_Attributesåˆ—è¡¨ </h3><a name="tfTableA_def"></a><br><p>  <b>admtf_Table_Attributes</b>å‡½æ•°è¿”å›æ•°æ®åº“è¡¨å±æ€§çš„åˆ—è¡¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯ä»¥åœ¨æ­¤å¤„æŸ¥çœ‹å’Œä¸‹è½½æºä»£ç ã€‚</a> </p><br><p> è¯¥å‡½æ•°å°†æºè¡¨çš„åç§°ï¼ˆ <b>a_TableName</b> ï¼‰å’Œåœ¨å…¶ä¸­åˆ›å»ºè¡¨çš„æ–¹æ¡ˆçš„åç§°ï¼ˆ <b>a_SchemaName</b> ï¼‰ä½œä¸ºå‚æ•°ã€‚ </p><br><p> è¯¥å‡½æ•°ä»<b>pg_attribute</b>å’Œ<b>pg_type</b>ç›®å½•<b>æ¡ç›®ä¸­</b>æ£€ç´¢ä¸»è¦æ•°æ®ã€‚ ç¬¬ä¸€ä¸ªè®°å½•åŒ…å«æœ‰å…³è¡¨ï¼Œè§†å›¾ï¼Œå®ä¾‹åŒ–è§†å›¾ï¼Œç»„åˆç±»å‹ç”šè‡³å‡½æ•°çš„å±æ€§çš„æ•°æ®è®°å½•ã€‚ ç¬¬äºŒç‚¹æ˜¯å…³äºå±æ€§ç±»å‹çš„ç‰¹å¾ã€‚ </p><br><p> å¯èƒ½éœ€è¦é€šè¿‡åœ¨å‡½æ•°ä¸­å®šä¹‰ç”¨æˆ·å’ŒåŸºæœ¬ç±»å‹çš„æ–¹å¼è¿›è¡Œä¸€äº›è¯´æ˜ã€‚ </p><br><p> å¦‚æœåœ¨ç›¸åº”çš„<b>pg_type</b>ç›®å½•<b>æ¡ç›®ä¸­</b>çš„<b>typbasetype</b>å­—æ®µ<b>å¤§äº</b> 0ï¼Œåˆ™ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹å£°æ˜è¡¨å±æ€§ï¼Œå¦åˆ™ï¼Œè¯¥å±æ€§ä¸ºåŸºæœ¬ç±»å‹ã€‚ å› æ­¤ï¼Œåœ¨FROMå­å¥ä¸­ä¸¤æ¬¡æ¶‰åŠ<b>pg_type</b>ç›®å½•ã€‚ åœ¨ç¬¬ä¸€ä¸ªç›®å½•æ¡ç›®ä¸­ï¼Œç¡®å®šç”¨æˆ·ç±»å‹çš„å­˜åœ¨ï¼Œå¦‚æœæœªå®šä¹‰ï¼ˆ <b>typebasetype = 0</b> ï¼‰ï¼Œåˆ™ä»è¯¥æ¡ç›®ä¸­ç”ŸæˆåŸºæœ¬ç±»å‹å€¼ã€‚ å¦åˆ™ï¼Œä»btyp.OID = typ.typbasetypeçš„è®°å½•ä¸­ç¡®å®šåŸºæœ¬ç±»å‹ã€‚ </p><br><p> ä½¿ç”¨ç³»ç»Ÿç›®å½•<b>FORMAT_TYPEï¼ˆtype_oidï¼Œtypemodï¼‰</b>çš„åŠŸèƒ½ç›´æ¥å½¢æˆåŸºæœ¬ç±»å‹çš„è¡Œã€‚ å…¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŸºæœ¬ç±»å‹OIDè®°å½•ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŒ…å«å¤§å°çš„ç±»å‹çš„ä¿®é¥°ç¬¦å€¼ã€‚ ä¾‹å¦‚ï¼ŒVARCHARï¼ˆ100ï¼‰æˆ–NUMERICï¼ˆ4,2ï¼‰ï¼ŒDECIMALï¼ˆ4,2ï¼‰ã€‚ å¦‚æœå±æ€§æ˜¯ç”¨æˆ·ç±»å‹ï¼Œåˆ™ä»<b>typ.typtypmodä¸­</b>è·å–<b>typemod</b>å‚æ•°çš„å€¼ï¼Œå¦åˆ™ä»<b>attr.atttypmodä¸­è·å–</b> ï¼Œå³ ç›´æ¥ä»å±æ€§è®°å½•ã€‚ </p><br><img src="https://habrastorage.org/webt/gv/jx/q0/gvjxq0pb7kjjrv6galmsht5s9do.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­æ“ä½œå‘˜çš„æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_class tbl <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.oid = attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_namespace nspc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> tbl.relnamespace = nspc.oid <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>( nspc.nspname)=<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_SchemaName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(tbl.relname) =<span class="hljs-keyword"><span class="hljs-keyword">LOWER</span></span>(a_TableName) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> tbl.relkind=<span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> tbl.relname,attr.attnum;</code> </pre><br></div></div><br><p> å¦å¤–ï¼Œè¯¥å‡½æ•°è®¿é—®ç›®å½•æ•°æ®<b>pg_class</b> ï¼Œ <b>pg_namespace</b>å’Œ<b>pg_description</b> ã€‚ ç¬¬ä¸€å’Œç¬¬äºŒç›®å½•ç”¨äºé€šè¿‡æ¨¡å¼å’Œæ•°æ®åº“è¡¨çš„åç§°æœç´¢å±æ€§ã€‚ <br><br> ç¬¬ä¸‰ä¸ªç›®å½•ç”¨äºæ£€ç´¢è¡¨å±æ€§çš„æ³¨é‡Šã€‚ </p><br><p> å…³äºè¡¨å±æ€§çš„æ³¨é‡Šåœ¨æ¡ç›®ä¸­ï¼Œå…¶ä¸­<b>dsc.objoid</b>åŒ…å«æºè¡¨çš„OIDï¼Œè€Œ<b>dsc.objsubidæ˜¯</b>è¡¨ä¸­å±æ€§<b>çš„</b>åºåˆ—å·ï¼Œå³  <b>attr.attnum</b> ã€‚ </p><br><p> ä¸ºäº†é˜²æ­¢è¯¥å‡½æ•°è¿”å›ç³»ç»Ÿå’Œè¿œç¨‹å±æ€§ï¼ŒWHEREå­å¥å°†æ¡ä»¶è®¾ç½®ä¸º<b>attr.attnum&gt; 0å’Œattr.atttypID&gt; 0</b> ã€‚ </p><br><br>  <strong>è¡¨6.æ‰§è¡Œadmtf_Table_Attributeså‡½æ•°ï¼ˆâ€œ publicâ€ï¼Œâ€œ Streetâ€ï¼‰çš„ç»“æœã€‚</strong> <br><br><table width="95" border="1"><tbody><tr><th width="5"> ä¸è¡Œ </th><th width="10"> èŒç§° </th><th width="20"> è‡ªè®¢ç±»å‹ </th><th width="20"> åŸºæœ¬ç±»å‹ </th><th width="5">  ï¼Ÿ ä¸ä¸ºç©º </th><th width="25"> è¯„æ³¨ </th></tr><tr><td width="5">  1ä¸ª </td><td width="10">  wcrccode </td><td width="20">  wcrccode </td><td width="20">  Smallint </td><td width="5">  Å¤ </td><td width="25"> å›½å®¶åŒºå· </td></tr><tr><td width="5">  2 </td><td width="10"> åœ°åŒºæ€§ </td><td width="20"> åœ°åŒºæ€§ </td><td width="20"> æ•´æ•° </td><td width="5">  Å¤ </td><td width="25"> ç¤¾åŒºID </td></tr><tr><td width="5">  3 </td><td width="10"> è¡—å¤´å°è´© </td><td width="20"> è¡—å¤´å°è´© </td><td width="20">  Smallint </td><td width="5">  Å¤ </td><td width="25"> æ‘IDè¡— </td></tr><tr><td width="5">  4 </td><td width="10">  streettypeacrm </td><td width="20">  streettypeacrm </td><td width="20"> äººç‰©ï¼ˆ8ï¼‰ </td><td width="5">  ËšF </td><td width="25"> è¡—å¤´ç¼©å†™ </td></tr><tr><td width="5">  5 </td><td width="10"> è¡—é“å </td><td width="20"></td><td width="20">  varcharï¼ˆ150ï¼‰ </td><td width="5">  Å¤ </td><td width="25"> å®šå±…ç‚¹çš„è¡—é“åç§° </td></tr></tbody></table><br><h4> ä½¿ç”¨regclassåˆ«åä½œä¸ºoidç±»å‹çš„å‡½æ•°ç‰ˆæœ¬ </h4><br><p>  PostgreSQLå¯¹è±¡æ ‡è¯†ç¬¦ï¼ˆOIDï¼‰ä¸OIDçš„ç±»å‹ç›¸åŒï¼ŒOIDå½“å‰è¢«å®ç°ä¸ºæ— ç¬¦å·çš„å››å­—èŠ‚æ•´æ•°ã€‚ ä½†æ˜¯ç”±äºå­˜åœ¨è¿™ç§åˆ«åï¼Œå› æ­¤å¯ä»¥å°†æ•´æ•°è¡¨ç¤ºä¸ºå¯¹è±¡çš„åç§°ã€‚ åä¹‹äº¦ç„¶-å°†å¯¹è±¡åç§°è½¬æ¢ä¸ºOIDç±»å‹çš„æ•´æ•°ã€‚ </p><br><p> ä½œä¸ºç¤ºä¾‹ï¼Œè¯·çœ‹ä¸‹é¢çš„<b>SELECTè¯­å¥</b> ã€‚ å®ƒä¼šå¼‚å¸¸åœ°æ£€ç´¢å±æ€§è¡¨çš„åç§°åŠå…¶ç±»å‹çš„åç§°-è€Œä¸æ˜¯ä½¿ç”¨è¿™äº›ç‰¹å¾çš„åç§°æ¥è®¿é—®ç›¸åº”çš„ç›®å½•å­—æ®µï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒä»¬ï¼š <br></p><ul><li>  <b>attrelid :: regclassï¼ˆattrelid :: regclassï¼šNAMEï¼‰</b> ï¼Œ </li><li>  <b>atttypid :: regtypeï¼ˆatttypid :: regtypeï¼šNAMEï¼‰</b> </li><li>  <b>typbasetype :: regtypeï¼ˆtypbasetype :: regtypeï¼šNAMEï¼‰</b> ã€‚ </li></ul><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype, typ.typbasetype::regtype,attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'public'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'Street'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br><p> ä»¥ä¸‹æ˜¯æ‰§è¡Œæ­¤æŸ¥è¯¢çš„ç»“æœã€‚ </p><br><img src="https://habrastorage.org/webt/zr/4_/ga/zr4_gal9s-8jnhihyjia7cq0xvs.png"><br><p> åœ¨ä½¿ç”¨OIDç±»å‹çš„åˆ«åè¿›è¡Œè½¬æ¢ä¹‹å‰çš„SELECTè¿ç®—ç¬¦çš„è¾“å‡ºå€¼åˆ—è¡¨ä¸­ï¼Œé™¤å±æ€§åç§°ä¹‹å¤–çš„æ‰€æœ‰å€¼éƒ½æ˜¯æ•°å­—ï¼Œå› æ­¤ï¼Œå°†æ˜¾ç¤ºè¡¨åç§°å’Œå±æ€§ç±»å‹ã€‚ å¯ä»¥åœ¨è¡¨æ ‡é¢˜çš„ç¬¬äºŒè¡Œä¸­è€ƒè™‘è¾“å‡ºå€¼çš„ç±»å‹ã€‚ </p><br><p> å¦å¤–ï¼Œåœ¨è¯¥è¯­å¥çš„WHEREå­å¥ä¸­ï¼Œæ¡ä»¶<b>attr.attrelid =ï¼ˆ'public'||'ã€‚'||'Street'ï¼‰:: regclassä½äº</b> ï¼Œå…¶å·¦ä¾§æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œè€Œå³ä¾§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²è¢«è½¬æ¢ä¸ºå¸¦æœ‰ä½¿ç”¨åˆ«å<b>regclass</b> ã€‚ </p><br><img src="https://habrastorage.org/webt/7v/tl/nh/7vtlnhnhqmr7idtdcebcsffzjik.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­æ“ä½œå‘˜çš„æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attnum, attr.attname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> typ.typname::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ELSE</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>, FORMAT_TYPE(<span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typbasetype,<span class="hljs-number"><span class="hljs-number">0</span></span>),typ.oid), <span class="hljs-keyword"><span class="hljs-keyword">COALESCE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">NULLIF</span></span>(typ.typtypmod,<span class="hljs-number"><span class="hljs-number">-1</span></span>),attr.atttypmod))::<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>), attr.attnotnull, dsc.description <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_description dsc <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dsc.objoid=attr.attrelid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> dsc.objsubid=attr.attnum <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=( a_SchemaName ||<span class="hljs-string"><span class="hljs-string">'.'</span></span>|| a_TableName)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br> ä½¿ç”¨mainè¯­å¥ä¸­çš„åˆ«åregclassï¼Œå¯ä»¥åˆ é™¤ä¸ä¸¤ä¸ªç›®å½•çš„è¿æ¥ã€‚ ä½†æ˜¯è¿™ç§æ”¹è¿›å‡ ä¹å¯¹åŠŸèƒ½çš„æ€§èƒ½æ²¡æœ‰å½±å“-åœ¨ä¸¤ä¸ªç‰ˆæœ¬ä¸­ï¼Œè¯¥åŠŸèƒ½éƒ½åœ¨11æ¯«ç§’å†…æ‰§è¡Œã€‚ å¯èƒ½ç”±äºæµ‹è¯•è¡¨å‡ ä¹æ²¡æœ‰å±æ€§çš„äº‹å®ã€‚ <br>  <b>å¤‡æ³¨4</b> <br><p> å½“æ•°æ®åº“ä¸­å­˜åœ¨å…·æœ‰å¼‚å¸¸åç§°çš„æ¨¡å¼å’Œ/æˆ–è¡¨æ—¶ï¼Œå°±ä¼šè¡¨ç°å‡º<b>attr.attrelid =ï¼ˆa_SchemaName ||'ã€‚'|| a_TableNameï¼‰:: regclass</b>å½¢å¼çš„æ¡ä»¶ä¸­çš„ä¸¥é‡ç¼ºé™·ã€‚ ä¾‹å¦‚ï¼Œ <b>â€œæˆ‘çš„æ¨¡å¼â€</b>å’Œ/æˆ–<b>â€œæˆ‘çš„è¡¨â€</b> ã€‚ æ­¤ç±»å€¼å¿…é¡»ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥æˆ–ä½¿ç”¨QUOTE_IDENTå‡½æ•°è¿›è¡Œä¼ è¾“ï¼Œå¦åˆ™è¯¥å‡½æ•°å°†å› ç³»ç»Ÿé”™è¯¯è€Œå¤±è´¥ã€‚ </p><br><img src="https://habrastorage.org/webt/jt/ak/nv/jtaknvaqwphry4yla4bnlemrdeq.png"><br><div class="spoiler">  <b class="spoiler_title">å›¾ä¸­æ“ä½œå‘˜çš„æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">/*       Â«   Â»*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">' '</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">' '</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum; <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> attr.attname,attr.attrelid::regclass, attr.atttypid::regtype,typ.typbasetype::regtype, attr.attrelid::regclass::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, attr.atttypid::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>,typ.typbasetype::regtype::<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_attribute <span class="hljs-keyword"><span class="hljs-keyword">attr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_type typ <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> attr.atttypid=typ.oid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> attr.attrelid=(<span class="hljs-string"><span class="hljs-string">'" "'</span></span>||<span class="hljs-string"><span class="hljs-string">'.'</span></span>||<span class="hljs-string"><span class="hljs-string">'" "'</span></span>)::regclass <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.attnum&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> attr.atttypID&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> attr.attnum;</code> </pre><br></div></div><br> å› æ­¤ï¼Œæˆ‘æ›´å–œæ¬¢ä½¿ç”¨<b>LOWERï¼ˆnspc.nspnameï¼‰= LOWERï¼ˆa_SchemaNameï¼‰å’ŒLOWERï¼ˆtbl.relnameï¼‰= LOWERï¼ˆa_TableNameï¼‰å½¢å¼çš„æ¡ä»¶</b> ï¼Œè¿™ä¸ä¼šå¯¼è‡´ç³»ç»Ÿé”™è¯¯ã€‚ <br><br>  <b>ç»“æŸè¯­</b> <br><a name="Script1"></a><br><h2> é™„å½•1.è„šæœ¬ </h2><a name="tfTableF"></a><br><h3> åˆ›å»ºadmtf_Table_Featureså‡½æ•° </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³åŠŸèƒ½æºä»£ç çš„æ³¨é‡Šï¼Œè¯·å‚è§æ­¤å¤„ã€‚</a> <br><div class="spoiler">  <b class="spoiler_title">å‡½æ•°æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*     ,   */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Features (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (rs_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,rs_TableDescription <span class="hljs-built_in"><span class="hljs-built_in">TEXT</span></span>,rs_NumberOfAttribute <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_NumberOfChecks <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>,rs_hasPKey <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasIndex <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_hasSubClass <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>,rs_NumberOfRow <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_TableOID OID; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableName NAME; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableDescription TEXT; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> v_TableNumberOfRowCalc INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN SELECT INTO rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex,rs_hasSubClass, rs_NumberOfRow tbl.relname,dsc.description,tbl.relnatts::INTEGER,tbl.relchecks::INTEGER, tbl.relhaspkey,tbl.relhasindex,tbl.relhassubclass,tbl.reltuples::INTEGER FROM pg_class tbl INNER JOIN pg_namespace nspc ON tbl.relnamespace = nspc.oid LEFT OUTER JOIN pg_Description dsc ON tbl.oid=dsc.objoid AND dsc.objsubid=0 WHERE nspc.nspname=LOWER(a_SchemaName) AND tbl.relkind=c_TableKind AND tbl.relname =LOWER(a_TableName); EXECUTE 'SELECT count(*) FROM ' ||LOWER(a_SchemaName) ||'.'||quote_ident(LOWER(a_TableName)) INTO v_TableNumberOfRowCalc; RETURN QUERY SELECT rs_TableName,rs_TableDescription,rs_NumberOfAttribute, rs_NumberOfChecks,rs_hasPKey,rs_hasIndex, rs_hasSubClass,v_TableNumberOfRowCalc AS rs_NumberOfRow; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName NAME,a_TableName NAME) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Features (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*     ,   */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Features (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (rs_TableName VARCHAR(256),rs_TableDescription TEXT,rs_NumberOfAttribute INTEGER,rs_NumberOfChecks INTEGER,rs_hasPKey BOOLEAN,rs_hasIndex BOOLEAN,rs_hasSubClass BOOLEAN,rs_NumberOfRow INTEGER) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_TableOID OID; /*   */ v_TableName VARCHAR(256); /*   */ v_TableDescription TEXT; /*   */ v_TableNumberOfRowCalc INTEGER; /*     */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT tf.rs_TableName::VARCHAR(256), tf.rs_TableDescription::TEXT, tf.rs_NumberOfAttribute::INTEGER, tf.rs_NumberOfChecks::INTEGER, tf.rs_hasPKey::BOOLEAN, tf.rs_hasIndex::BOOLEAN, tf.rs_hasSubClass::BOOLEAN, tf.rs_NumberOfRow::INTEGER FROM admtf_Table_Features(a_SchemaName::NAME,a_TableName::NAME) tf; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Features(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   ,  '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECt * FROM admtf_Table_Features('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECt * FROM admtf_Table_Features('public':: NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="tfTableA"></a><br><h3> åˆ›å»ºadmtf_Table_Attributeså‡½æ•° </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³åŠŸèƒ½æºä»£ç çš„æ³¨é‡Šï¼Œè¯·å‚è§æ­¤å¤„ã€‚</a> <br><div class="spoiler">  <b class="spoiler_title">å‡½æ•°æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_class tbl ON tbl.oid = attr.attrelid INNER JOIN pg_namespace nsp ON tbl.relnamespace=nsp.oid LEFT OUTER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE LOWER(nsp.nspname)=LOWER(a_SchemaName) AND LOWER(tbl.relname)=LOWER(a_TableName) AND tbl.relkind=c_TableKind AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY tbl.relname,attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><h3> ä½¿ç”¨Regclassåˆ«ååˆ›å»ºadmtf_Table_Attributeså‡½æ•° </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ‰å…³åŠŸèƒ½æºä»£ç çš„æ³¨é‡Šï¼Œè¯·å‚è§æ­¤å¤„ã€‚</a> <br><div class="spoiler">  <b class="spoiler_title">å‡½æ•°æºä»£ç </b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRANSACTION</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>); <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-comment"><span class="hljs-comment">/********************************************************************************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> admtf_Table_Attributes (a_SchemaName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'public'</span></span>, <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> a_TableName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">RETURNS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> (r_AttributeNumber <span class="hljs-built_in"><span class="hljs-built_in">SMALLINT</span></span>,r_AttributeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_UserTypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_TypeName <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>,r_isNotNULL <span class="hljs-built_in"><span class="hljs-built_in">BOOLEAN</span></span>, r_Description <span class="hljs-built_in"><span class="hljs-built_in">Text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> $<span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span>$ <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> c_TableKind <span class="hljs-keyword"><span class="hljs-keyword">CONSTANT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>:=<span class="hljs-string"><span class="hljs-string">'r'</span></span>; v_Scale INTEGER; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">--****************************************************************************************************** BEGIN RETURN QUERY SELECT attr.attnum AS r_AttributeNumber, attr.attname::NAME AS r_AttributeName, CASE WHEN COALESCE(typ.typbasetype,0)&gt;0 THEN typ.typname::NAME ELSE ''::NAME END AS r_UserTypeName, FORMAT_TYPE(COALESCE(NULLIF(typ.typbasetype,0),typ.oid), COALESCE(NULLIF(typ.typtypmod,-1),attr.atttypmod))::NAME AS r_TypeName, attr.attnotnull AS r_isNotNULL, dsc.description AS r_Description FROM pg_attribute attr INNER JOIN pg_type typ ON attr.atttypid=typ.oid LEFT OUTER JOIN pg_type btyp ON typ.typbasetype=btyp.oid LEFT OUTER JOIN pg_description dsc ON dsc.objoid=attr.attrelid AND dsc.objsubid=attr.attnum WHERE attr.attrelid=(LOWER(a_SchemaName)||'.'|| LOWER(a_TableName))::regclass AND attr.attnum&gt;0 AND attr.atttypID&gt;0 ORDER BY attr.attnum; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName NAME,a_TableName NAME) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; BEGIN TRANSACTION; DROP FUNCTION IF EXISTS admtf_Table_Attributes (a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)); /********************************************************************************************************/ /*      */ /********************************************************************************************************/ CREATE OR REPLACE FUNCTION admtf_Table_Attributes (a_SchemaName VARCHAR(256) default 'public', /*     */ a_TableName VARCHAR(256) default NULL /*   */ ) RETURNS TABLE (r_AttributeNumber SMALLINT,r_AttributeName VARCHAR(256),r_UserTypeName VARCHAR(256),r_TypeName VARCHAR(256),r_isNotNULL BOOLEAN, r_Description Text) AS $BODY$ DECLARE c_TableKind CONSTANT CHAR:='r'; v_Scale INTEGER; /*   */ --****************************************************************************************************** BEGIN RETURN QUERY SELECT ta.r_AttributeNumber::SMALLINT, ta.r_AttributeName::VARCHAR(256), ta.r_UserTypeName::VARCHAR(256), ta.r_TypeName::VARCHAR(256), ta.r_isNotNULL::BOOLEAN, ta.r_Description::TEXT FROM admtf_Table_Attributes(a_SchemaName::NAME,a_TableName::NAME) ta; RETURN; END $BODY$ LANGUAGE plpgsql; COMMENT ON FUNCTION admtf_Table_Attributes(a_SchemaName VARCHAR(256),a_TableName VARCHAR(256)) IS '   '; --ROLLBACK TRANSACTION; COMMIT TRANSACTION; SELECT * FROM admtf_Table_Attributes('public'::VARCHAR(256),'Street'::VARCHAR(256)); SELECT * FROM admtf_Table_Attributes('public'::NAME,'Street'::NAME);</span></span></code> </pre><br></div></div><br><a name="Apendix2"></a><br><h2> é™„å½•2.å…¶ä»–ææ–™ </h2><br><h3> è¾…åŠ©æ•°æ®åº“æ¶æ„ </h3><br><a name="scheme_for_tests"></a><br><img src="https://habrastorage.org/webt/qi/rb/9q/qirb9qyb5nzkn3hef8v7pvgyvvs.png"><br><br><ul><li>  <b>å›½å®¶</b> -ä¸–ç•Œ<b>å›½å®¶</b>åˆ†ç±»-OKSMï¼ˆä¸–ç•Œå›½å®¶çš„å…¨ä¿„åˆ†ç±»ï¼‰ï¼› </li><li>  <b>HOUSEADDR-</b>å®šå±…ç‚¹è¡—é“ä¸Šçš„é—¨ç‰Œå·ç åˆ—è¡¨ï¼› </li><li>  <b>LCLTYTYPE-</b>ç»“ç®—ç±»å‹ç›®å½•ï¼› </li><li>  <b>åœ°ç‚¹</b> -å’Œè§£æ¸…å•ï¼› </li><li> <b>STREET</b> â€”     ; </li><li> <b>STREETTYPE</b> â€”   ; </li><li> <b>TERRITORY</b> â€”   (, , ,   ..); </li><li> <b>TERRITORYTYPE</b> â€”   . </li></ul><br><br><a name="Street_char"></a><br><h3>    Street () </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">        .</a> <br> <strong> 1.    Street ().</strong> <br><img src="https://habrastorage.org/webt/vw/ze/rp/vwzerpaegckljldqsmbrq22zf_m.png"><br><div class="spoiler"> <b class="spoiler_title">    </b> <div class="spoiler_text"><table width="95" border="1"><tbody><tr><th width="5"> ç±»åˆ«åˆ†ç±» </th><th width="5"> ä¸è¡Œ </th><th width="15"> èŒç§° </th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¯„æ³¨ </font></font></th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç±»å‹ </font></font></th><th width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åŸºæœ¬ç±»å‹ </font></font></th><th width="5">  ï¼Ÿ<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¸ä¸ºç©º </font></font></th></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tbl </font></font></td><td width="5">  0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡— </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å®šå±…ç‚¹çš„è¡—é“æ¸…å• </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å›½å®¶åŒºå· </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç¤¾åŒºID </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ•´æ•° </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  3 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´å°è´© </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ‘IDè¡— </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´å°è´© </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  4 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´ç¼©å†™ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> äººç‰©ï¼ˆ8ï¼‰ </font></font></td><td width="5">  ËšF </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> att </font></font></td><td width="5">  5 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—é“å </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—é“åç§° </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varcharï¼ˆ150ï¼‰ </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pk </font></font></td><td width="5">  0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> xpkstreet </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—é“è¡¨ä¸»é”® </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å›½å®¶åŒºå· </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç¤¾åŒºID </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ•´æ•° </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pkatt </font></font></td><td width="5">  3 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´å°è´© </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ‘IDè¡— </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´å°è´© </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01 </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk_street_locality </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡¨å¤–é”® </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01att </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å›½å®¶åŒºå· </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01att </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç¤¾åŒºID </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ•´æ•° </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01rtbl </font></font></td><td width="5">  0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒº </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å’Œè§£æ¸…å• </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01ratt </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å›½å®¶åŒºå· </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wcrccode </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smallint </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk01ratt </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç¤¾åŒºID </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åœ°åŒºæ€§ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ•´æ•° </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk02 </font></font></td><td width="5">  2 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk_street_streettype </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡¨å¤–é”® </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk02att </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´ç¼©å†™ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> äººç‰©ï¼ˆ8ï¼‰ </font></font></td><td width="5">  ËšF </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk02rtbl </font></font></td><td width="5">  0 </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—é“å‹ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—é“ç±»å‹å‚è€ƒ </font></font></td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fk02ratt </font></font></td><td width="5">  1ä¸ª </td><td width="15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¡—å¤´ç¼©å†™ </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> streettypeacrm </font></font></td><td width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> äººç‰©ï¼ˆ8ï¼‰ </font></font></td><td width="5">  Å¤ </td></tr><tr><td width="5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> idx01 </font></font></td><td width="5">  1ä¸ª </td><td width="15"> xie1street </td><td width="20">         </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx01att </td><td width="5">  1ä¸ª </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx01att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx01att </td><td width="5">  3 </td><td width="15"> streettypeacrm </td><td width="20">    </td><td width="20"> streettypeacrm </td><td width="20"> character(8) </td><td width="5">  ËšF </td></tr><tr><td width="5"> idx01att </td><td width="5">  4 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx02 </td><td width="5">  2 </td><td width="15"> xie2street </td><td width="20">       </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx02att </td><td width="5">  1ä¸ª </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallin </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx02att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx02att </td><td width="5">  3 </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx03 </td><td width="5">  3 </td><td width="15"> xie3street </td><td width="20">        </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx03att </td><td width="5">  1ä¸ª </td><td width="15"> streetname </td><td width="20">     </td><td width="20"></td><td width="20"> varchar(150) </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx04 </td><td width="5">  4 </td><td width="15"> xpkstreet </td><td width="20">   ( )  street </td><td width="20"></td><td width="20"></td><td width="5"></td></tr><tr><td width="5"> idx04att </td><td width="15">  1ä¸ª </td><td width="15"> wcrccode </td><td width="20">   </td><td width="20"> wcrccode </td><td width="20"> smallint </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx04att </td><td width="5">  2 </td><td width="15"> localityid </td><td width="20">    </td><td width="20"> localityid </td><td width="20"> integer </td><td width="5">  Å¤ </td></tr><tr><td width="5"> idx04att </td><td width="5">  3 </td><td width="15"> streetid </td><td width="20">     </td><td width="20"> streetid </td><td width="20"> smallint </td><td width="5">  Å¤ </td></tr></tbody></table><br></div></div><br><h3> å¦è¯·å‚é˜… </h3><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a> ;</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸‰éƒ¨åˆ†</a> ã€‚</b> <br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®°å½•PostgreSQLæ•°æ®åº“çš„åŠŸèƒ½ã€‚</a></b>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ€åï¼ˆç¬¬å››éƒ¨åˆ†ï¼‰</a> ã€‚</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN415575/">https://habr.com/ru/post/zh-CN415575/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN415565/index.html">ä¸ºä»€ä¹ˆï¼ˆä»Šå¤©ï¼‰è¿”å›444å¹¶ä¸æ€»æ˜¯æœ‰ç”¨çš„</a></li>
<li><a href="../zh-CN415567/index.html">å¹¿æ’­h264è§†é¢‘ï¼Œè€Œæ— éœ€ä»Logitech C920æ‘„åƒæœºè¿›è¡Œè½¬ç </a></li>
<li><a href="../zh-CN415569/index.html">å¦‚ä½•è®¾ç½®ubuntu 18.04 sendmail + DKIM + SPF + DMARCæˆ–æˆ‘å¦‚ä½•è®¾æ³•è¿›å…¥Gmailå ¡å’</a></li>
<li><a href="../zh-CN415571/index.html">kaggleï¼šIEEEçš„ç›¸æœºæ¨¡å‹è¯†åˆ«</a></li>
<li><a href="../zh-CN415573/index.html">ä»¥Blenderè½¯ä»¶ä¸ºä¾‹ä¼˜åŒ–3Dæ‰“å°æ¨¡å‹</a></li>
<li><a href="../zh-CN415577/index.html">â€œ DBMSæŠ€æœ¯ä¸å¼€å‘â€è¯¾ç¨‹çš„å¹»ç¯ç‰‡</a></li>
<li><a href="../zh-CN415579/index.html">å­¦ä¹ OpenGLã€‚ ç¬¬5.5è¯¾-æ³•çº¿æ˜ å°„</a></li>
<li><a href="../zh-CN415581/index.html">å›½é™…é‡‘èç§‘æŠ€-æ‘˜è¦ï¼šæœ‰å…³è¯¥è¡Œä¸šæœ€é‡è¦äº‹ç‰©çš„12æ¡æ–°é—»</a></li>
<li><a href="../zh-CN415587/index.html">StereoPi-æˆ‘ä»¬ç”¨äºç ”ç©¶è®¡ç®—æœºè§†è§‰ï¼Œæ— äººæœºå’Œæœºå™¨äººçš„ç¡¬ä»¶</a></li>
<li><a href="../zh-CN415589/index.html">â€œå…³äºPDçš„æ›´å¤šä¿¡æ¯â€ï¼šç¾å›½ç”µè§†å…¬å¸å°†åœæ­¢å‡ºå”®å®¢æˆ·åœ°ç†æ•°æ®</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>