<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔹 🎍 📰 كتابة محاكي الكتابة باللمس باستخدام جافا سكريبت خالص: الجزء 2 ♠️ 🔬 🤶🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="أهلا وسهلا بك! تحسبا لبدء دورة "Fullstack JavaScript Developer" ، قرر أحد مؤلفينا مشاركة تجربته في إنشاء جهاز محاكاة للكتابة باللمس. لكننا بدورنا نريد...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كتابة محاكي الكتابة باللمس باستخدام جافا سكريبت خالص: الجزء 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/481020/" style=";text-align:right;direction:rtl">  <i>أهلا وسهلا بك!</i>  <i>تحسبا لبدء دورة <a href="https://otus.pw/vdqp/">"Fullstack JavaScript Developer" ،</a> قرر أحد مؤلفينا مشاركة تجربته في إنشاء جهاز محاكاة للكتابة باللمس.</i>  <i>لكننا بدورنا نريد أن نعرض هذه المواد لك ونشارك اليوم الجزء الأخير منها.</i> <br><br><img src="https://habrastorage.org/webt/rp/lu/hn/rpluhno5aexsppsfajdqxhtlxr4.png"><br><hr><br>  الجزء الأول يمكن قراءته <a href="https://habr.com/ru/company/otus/blog/480118/">هنا.</a> <br><a name="habracut"></a><br>  مرحبا بالجميع!  نواصل كتابة محاكي كتابة أصلي باستخدام JavaScript أصلي.  في الجزء الأخير ، توصلنا إلى المنطق الرئيسي للتطبيق ، حيث تم تحميل المستوى الأول من 20 حرفًا عن طريق الضغط على مفتاح Enter ، والذي يعد عند دراسة طريقة الطباعة باللمس أحد الأوليات التي تتم دراستها (J ، K ، F ، D).  يمكن الاطلاع على نسخة العمل من الإصدار الأول <a href="https://isakura13.bitbucket.io/playground/">هنا</a> .  ومع ذلك ، لا يزال لدينا بعض المهام لتحسين التطبيق. <br><br><img src="https://habrastorage.org/webt/dz/et/b1/dzetb19x6wir8i2tokhbzqxkpoi.gif"><br><br>  دعونا نصوغ الاختصاصات لفهم ما نريد تحقيقه بالضبط: <br><br>  <i>"في بداية اللعبة ، بعد قيام المستخدم بالضغط على مفتاح Enter الجذاب ، والذي يتحرك بشكل متحرك من اليسار إلى اليمين ، يتم تحميل المستويات الأولى إلى الثالثة بالتسلسل.</i>  <i>بالضغط على الزر الصحيح ، يتم تشغيل إشارة إيجابية للعبة ، في حالة حدوث خطأ ، يتم تشغيل إشارة سلبية للعبة.</i>  <i>يحتوي المستويان الأول والثاني على رموز عادية ، والمستوى الثالث هو المكافأة ، حيث تكون الرموز خاصة للمبرمجين (هزلية إلى حد ما).</i>  <i>في نهاية المستوى ، لدينا نافذة نتائج مكتوبة <code>localStorage</code> من <code>localStorage</code> ، تعرض هذه النافذة عدد أخطاء اللاعبين ووقت انتهاء جلسة اللعبة.</i>  <i>في حالة وجود الكثير من الأخطاء ، يتم تشغيل صوت الخسارة ، في حالة الانتقال الناجح إلى المستوى التالي - لحن كبير ".</i> <br><br>  حسنًا ، الآن لدينا المعارف التقليدية ، لنبدأ البرمجة.  من الواضح أن قاعدة الكود الخاصة بنا سوف تزيد بشكل كبير ، مما يعني أنه من أجل التعامل مع الكثير من الأكواد واستيراد المكتبات اللازمة ، نحتاج إلى <code>webpack</code> .  ولكن لنبدأ بالتخطيط ونرى التغييرات التي حدثت.  لن أعطي محتويات <code>head</code> ، لأن الشيء الوحيد الذي تغير هناك هو أننا الآن <code>dist/code.js</code> javascript من <code>dist/code.js</code> التي تتم معالجتها بواسطة <code>dist/code.js</code> ، لكن كل شيء آخر يبقى كما هو. <br><br>  في نص الصفحة ، أضفت نافذة مشروطة غير مرئية بعد والتي سنكتب فيها نتائج تمرير اللعبة في <code>table</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"has-background-black-bis"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-background has-background-link"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-content has-background-white"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"is-size-4"</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"target_error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-close is-large"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"close"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  بطبيعة الحال ، حقيقة أن لدينا نافذة مشروط على الصفحة مباشرة تسبب الألم الجسدي لمحبي SPA - الأطر (لأنهم يرغبون في تقسيم كل هذا بدقة إلى مكونات).  لكنني لا أريد أن أرسم جيل من هذا المحتوى في JS.  لنلقِ نظرة على الجزء التالي من html: <br><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero is-primary is-large"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-head container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-4 has-text-white promo"</span></span></span><span class="hljs-tag">&gt;</span></span>   3000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-4 has-text-danger has-text-centered name-level"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"error-panel is-hidden"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progress</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progress is-danger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progress</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-body has-background-black-bis main-board"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label is-size-2 has-text-white has-text-centered begin anim-elem"</span></span></span><span class="hljs-tag">&gt;</span></span>Press Enter to Start<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buttons columns is-half is-centered"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--        --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  في الواقع ، تم تغيير ثلاثة أشياء فقط من آخر مرة: الآن يوجد اسم للمستوى الذي سنملؤه من js ، يتم إخفاء لوحة الأخطاء في البداية وتغير اسم التطبيق نفسه. <br><br>  على وشك بدء تشغيل JS ، سأضيف فقط القليل من CSS لإصلاح ما لا يمكنني فعله مع <code>Bulma</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">max-height</span></span>:<span class="hljs-number"><span class="hljs-number">40vh</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.promo</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>; }</code> </pre><br>  حسنا شبيبة.  كتبت أبسط التكوين webpack.  مما هو موجود في الصفحة الأولى من وثائق <code>webpack</code> ، فهو يختلف فقط في وجود تتبع التغييرات في الملفات.  بالنسبة للجزء الأكبر ، أحتاجه من أجل استخدام عمليات الاستيراد في ملف <code>index.js</code> الرئيسي ، وفي النهاية يكون لدي ملف مصغر: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"path"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./js/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'code.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>), }, <span class="hljs-attr"><span class="hljs-attr">watch</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }</code> </pre><br>  عظيم ، والآن يمكننا الانتقال إلى هيكل شبيبة.  بالنسبة للرسوم المتحركة ، قررت استخدام <code>anime.js</code> - على الرغم من أنني أفهم جيدًا أن مقدار الرسوم المتحركة التي نحتاجها يمكن القيام به في css في 10 سطور.  ربما في المستقبل ، سنضيف المزيد من الرسوم المتحركة ، لذلك قمت بسحب <code>anime.es.js</code> بالكامل.  بالإضافة إلى ذلك ، أضفت وظيفة إنشاء ملف عشوائي إلى ملف منفصل - لمجرد الراحة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRandomInt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">max</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(max)); }</code> </pre><br>  بعد ذلك قررت وضع وظيفة <code>showResult</code> في ملف منفصل ، والذي شارك في رسم النتائج بعد أن تمكن المستخدم من متابعة اللعبة بأكملها.  هذه هي وظيفة عالمية جميلة تأخذ الوسيطة الأولى إلى المدخلات التي سيتم بها كتابة المعلومات من <code>localStorage</code> وتلقيها للتو ، والثانية - المعلومات التي يجب كتابتها (في حالتنا ، هذا هو عدد أخطاء المشغل).  بالإضافة إلى ذلك ، قمت بتنفيذ مفاتيح الفرز من <code>localStorage</code> ، بحيث تم فرز البيانات في الجدول حسب وقت إنشائها.  في الجزء الثاني من الوظيفة ، يعرض الجدول بيانات محاولات اللاعب السابقة.  ومع ذلك ، أقل الكلمات ، المزيد من التعليمات البرمجية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target_El, content</span></span></span><span class="hljs-function">)</span></span>{ localStorage.setItem(+<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>, content); (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawOnLoad</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> temp_arr = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; localStorage.length; i++) { temp_arr.push(+localStorage.key(i)); } temp_arr.sort(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt; temp_arr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> item_time = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(temp_arr[i]); target_El.insertAdjacentHTML(<span class="hljs-string"><span class="hljs-string">'afterend'</span></span>, <span class="hljs-string"><span class="hljs-string">`&lt;th&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getDate()}</span></span></span><span class="hljs-string"> / </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getMonth()}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getHours()}</span></span></span><span class="hljs-string"> : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${item_time.getMinutes()}</span></span></span><span class="hljs-string"> &lt;/th&gt; &lt;th&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${localStorage.getItem(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">String</span></span></span></span><span class="hljs-string"><span class="hljs-subst">(temp_arr[i]))}</span></span></span><span class="hljs-string">&lt;/th&gt; `</span></span>); } })(); }</code> </pre><br>  رائع ، مع انتهاء الملفات الإضافية ، يمكننا أخيرًا الانتقال إلى الملف الرئيسي.  أولاً نصنع الواردات: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> anime <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./anime.es"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> getRandomInt <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./random"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> showResult <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./showResult"</span></span>;</code> </pre><br>  المكتبات المستلمة.  لنقم بعمل رسم متحرك لنقشنا الجذاب من البداية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">anime({ <span class="hljs-attr"><span class="hljs-attr">targets</span></span>: <span class="hljs-string"><span class="hljs-string">".anim-elem"</span></span>, <span class="hljs-attr"><span class="hljs-attr">translateX</span></span>: [<span class="hljs-number"><span class="hljs-number">-50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>], <span class="hljs-attr"><span class="hljs-attr">easing</span></span>: <span class="hljs-string"><span class="hljs-string">"linear"</span></span>, <span class="hljs-attr"><span class="hljs-attr">direction</span></span>: <span class="hljs-string"><span class="hljs-string">"alternate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">loop</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre><br>  سوبر!  وأخيرا ، فإن التطبيق نفسه.  قررت تحويل جميع البيانات إلى <code>json</code> أجل تصوير عملية الخادم التي يمكن أن <code>json</code> هذه اللعبة ، على سبيل المثال ، باللغة الهنغارية أو الروسية أو الصينية المبسطة - باختصار ، مع أي مجموعة من الأحرف (ولكن قبل ذلك ، بالطبع ينمو وينمو).  بعد تلقي البيانات على <code>fetch</code> ، تسمى الوظيفة نفسها بشكل غير متزامن ، والتي ستبدأ لعبتنا.  لقد قمت <code>gist.github</code> JSON إلى <code>gist.github</code> (يمكن رؤيته <a href="">هنا</a> ) <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_data</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fetch( <span class="hljs-comment"><span class="hljs-comment">// "    ,   json" ) //     json  -     , //  -       .then(res =&gt; res.json()) .then(data =&gt; { //    ,     read_data(data); }) .catch(err =&gt; { console.warn(" "); console.warn(err.name); //   }); } get_data(); //      , ...      </span></span></code> </pre><br>  كما فهم القارئ بالفعل ، في <code>read_data</code> غير المتزامنة ، <code>read_data</code> جميع الوظائف الأخرى للعبة.  لذلك ، ستذهب بقية الكود بالفعل داخل هذه الوظيفة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">var number_of_level = 0; //        0 var error_sound = new Audio("sounds/error_sound.wav"); var fail_sound = new Audio("sounds/fail_sound.wav"); //    var press_sound = new Audio("sounds/press_sound.wav"); var succes_sound = new Audio("sounds/succes_sound.wav"); //       .        </code> </pre><br>  لقد وجدت أصوات 8 بت في البنوك المجانية على الإنترنت.  الآن دعونا نلقي نظرة على العناصر التي أحصل عليها من شجرة DOM: <br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> modal = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">".modal"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      var target_error = document.querySelector(".target_error"); //          let error_panel = document.querySelector(".error-panel"); //    let begin = document.querySelector(".begin"); //    ,     enter   .      let progress = document.getElementById("prog"); //     let buttons = document.querySelector(".buttons"); //         let name_level = document.querySelector(".name-level"); //       let modal_close = document.querySelector(".modal-close"); // ,                document.addEventListener("keydown", StartGame, { once: true // once           //     ,      });</span></span></code> </pre><br>  التالي يأتي وظيفة بداية اللعبة.  لقد تجاوزتها بعض التغييرات - الآن تصبح لوحة الأخطاء الخاصة بنا مرئية فقط في بداية اللعبة ، يتم تشغيل صوت نقرة ، يتم حذف الكتابة الجذابة ، ولا تخفيها (لقد قمت بذلك من أجل التحسين قليلاً ، لأنه بعد ذلك كنا سنلعب رسمًا متحركًا لعنصر غير مرئي على الصفحة) ، ثم تسمى وظيفة اللعبة الرئيسية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key == <span class="hljs-string"><span class="hljs-string">"Enter"</span></span>) { error_panel.classList.remove(<span class="hljs-string"><span class="hljs-string">"is-hidden"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     press_sound.play(); begin.remove(); //    mainGame(); //    } }</span></span></code> </pre><br>  حسنا ، بعد ذلك يأتي رسم الحروف.  كل الاختلاف عن الإصدار السابق هو أننا نأخذ الآن البيانات من كائن JSON: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> function drawBoard(info) { let str_arr = info.level_info[number_of_level].symbols; //    -     ,      webpack, .... name_level.innerHTML = info.level_info[number_of_level].name_level; let col_arr = info.symbol_colors; for (let i = 0; i &lt; 20; i++) { //    20  let rand = getRandomInt(str_arr.length); buttons.insertAdjacentHTML( "afterbegin", `&lt;button class='game-button button is-large ${col_arr[rand]}' id='${str_arr[rand]}'&gt; ${str_arr[rand]}&lt;/button&gt;` ); } }</code> </pre><br>  بعد ذلك ، نسمي وظيفة اللعبة الرئيسية بمعلومات من JSON ، والتي ما زالت وظيفتنا غير المتزامنة تأخذ حجة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> function mainGame() { drawBoard(information); document.addEventListener("keydown", press);</code> </pre><br>  بعد ذلك ، ستذهب الوظيفة الأخيرة في الكود الخاص بنا ، حيث نحدد الخسارة والفوز.  إذا سجل المستخدم الكثير من الأخطاء ، فأنت بحاجة إلى إخباره بأنه فقد ، ولعب اللحن المسؤول عن "الإخفاق".  تحدث النهاية الناجحة للمستوى إذا <code>count_right</code> المتغير <code>count_right</code> على قيمة مساوية لعدد الأحرف التي <code>count_right</code> (20).  أدرك أنه يمكن إجراء الانتقال إلى المستوى التالي عندما يصبح طول صفيف element_arr مساوياً لـ 0 ، ولكن لدينا حلاً الآن.  إذا كان المستخدم قد أكمل بنجاح جميع المستويات الثلاثة ، يتم عرض لوحة النتائج مع عدد من الأخطاء: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> var errors_count = 0; var count_right = 0; function press(e) { let elements_arr = document.querySelectorAll(".game-button"); //      if (e.key == elements_arr[0].id) { //      querySelector,      elements_arr[0].remove(); count_right++; //    press_sound.play(); } else { errors_count++; //   error_sound.play(); progress.value = errors_count; //     if (errors_count &gt; 20) { //         ,   fail_sound.play(); //    name_level.innerHTML = ' !'; setTimeout(() =&gt; { window.location.reload(); //       }, 2500); } } if (count_right == 20) { count_right = 0; number_of_level++; if (number_of_level == 3) { //     3  modal.classList.add("is-active"); //     showResult(target_error, errors_count); modal_close.onclick = async function() { modal.classList.remove("is-active"); window.location.reload(); //,     ,    }; } succes_sound.play(); mainGame(); } } } //      ,   </code> </pre><br>  هذا هو الجزء الرئيسي من مقالتنا.  إذا كنت مهتمًا بالكود المصدري للتطبيق ، فيمكنك العثور عليه <a href="">هنا</a> .  إذا كنت ترغب في اللعب ومشاهدة تطبيقنا قيد التنفيذ ، فمرحبا بكم <a href="https://isakura13.bitbucket.io/playground2/">هنا</a> .  يرجى كتابة جميع الأخطاء والأسئلة إما في التعليقات أو على الفور في مستودع <code>issues</code> على جيثب. <br><br>  هناك الكثير مما يمكن إضافته إلى التطبيق - هذه بعض الرسوم المتحركة المضحكة للرسائل والموسيقى في الخلفية (أو يمكنك إصدار أصوات مختلفة عند الطباعة لإجبار المستخدم على الطباعة بإيقاع معين).  يمكنك التنقل بين الحروف ووضع السرعة - حتى تتمكن من الطباعة في الوقت المحدد وتسجيل الدقة التي تحققت.  أود أيضًا أن أرى العد التنازلي في بداية المستوى حتى يتمكن اللاعب من وضع يديه بشكل صحيح على لوحة المفاتيح والاستعداد.  باختصار ، هناك الكثير من الأفكار (بالإضافة إلى ترجمة واضحة جدًا لهذا التطبيق إلى React أو Vue) ، وآمل أن ينصح الناس في هابروفسك أيضًا بشيء ما.  شكرا لكم جميعا على اهتمامكم! <br><br>  حسنًا ، نحن ننتظر الجميع في <a href="https://otus.pw/vdqp/">الدورة</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar481020/">https://habr.com/ru/post/ar481020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar481010/index.html">16 نصائح لتطوير android في Kotlin. الجزء 3</a></li>
<li><a href="../ar481012/index.html">ما تعلمته في 10 سنوات على Stack Overflow</a></li>
<li><a href="../ar481014/index.html">أنا / نحن لسنا أيهور استضافة. أو كيفية البصق في مواجهة الصناعة</a></li>
<li><a href="../ar481016/index.html">تجربة VonmoTrade. الجزء 1: التبادلات والتكنولوجيا الحديثة</a></li>
<li><a href="../ar481018/index.html">ومرة أخرى حول حماية البنية التحتية الافتراضية</a></li>
<li><a href="../ar481024/index.html">لماذا تخلت عن Google Maps API</a></li>
<li><a href="../ar481028/index.html">دليل لتنظيم اتصال عن بعد بـ PLC صناعي باستخدام OpenVPN</a></li>
<li><a href="../ar481030/index.html">ما نوع cyberdec الذي أود القيام به بنفسي</a></li>
<li><a href="../ar481032/index.html">لماذا كان من الممكن اختراق؟ ربما لأن المهاجم</a></li>
<li><a href="../ar481034/index.html">توجيه نفق VPN بين أجهزة الكمبيوتر من خلال موفري NAT (بدون VPS ، باستخدام خادم STUN و Yandex.Disk)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>