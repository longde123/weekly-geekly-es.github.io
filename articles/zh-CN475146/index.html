<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥉 🗳️ 🎧 一次数据恢复尝试的痛苦或悠久的历史 😑 🤞🏿 🧒🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在院子里是2019年。 容量为9.1 GB的QUANTUM FIREBALL Plus KA驱动器来到了我们的实验室，这在我们这个时代并不常见。 根据驱动器的所有者的说法，该故障发生在2004年，原因是电源出现故障，该电源抓住了硬盘驱动器和其他PC组件。 然后遍历各种服务，尝试修复驱动器和还原失败的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>一次数据恢复尝试的痛苦或悠久的历史</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475146/"> 在院子里是2019年。 容量为9.1 GB的QUANTUM FIREBALL Plus KA驱动器来到了我们的实验室，这在我们这个时代并不常见。 根据驱动器的所有者的说法，该故障发生在2004年，原因是电源出现故障，该电源抓住了硬盘驱动器和其他PC组件。 然后遍历各种服务，尝试修复驱动器和还原失败的数据。 他们承诺在某个地方便宜，但仍然无法解决问题，在那个地方太贵了，客户不想恢复数据，但最终磁盘通过了许多服务中心。 他已经迷路了几次，但是由于所有者事先要注意记录驱动器上各种贴纸上的信息，因此他设法确保将硬盘驱动器从某些服务中心退回。 电路并没有被忽视，在原始控制器板上有多条焊接痕迹，并且在视觉上也感觉到缺少SMD元件（展望未来，我将说这是该驱动器中最少的问题）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ju/oa/mq/juoamqzpbrmmmvhxyc8-re0-j2m.png"></div><br>  <i>图</i>  <i>1个HDD Quantum Fireball Plus KA 9.1GB</i> <br><a name="habracut"></a><br> 我要做的第一件事是在这样一个古老的双胞胎兄弟的供体档案中搜索，该兄弟带有一个工作的控制器板。 完成此任务后，可以执行详细的诊断措施。 在检查电机绕组是否短路后，确保没有短路，我们从驱动器（施主到驱动器）到患者的位置安装板。 我们通电并听到轴旋转的正常声音，加载了固件后通过了校准测试，几秒钟后，驱动器通过寄存器进行了寄存器登记，表明其已准备好响应来自接口的命令。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-h/57/vy/-h57vy6onwk8kkvcivdtq33ycie.png"></div><br>  <i>图</i>  <i>2个DRD DSC指示器指示准备接受命令。</i> <br><br> 我们保留固件模块的所有副本。 我们检查固件模块的完整性。 阅读模块没有问题，但是对报告的分析表明存在一些奇怪之处。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/do/vc/c3/dovcc3pxy7yje_t9trkxk3twfd4.png"></div><br>  <i>图</i>  <i>3.区域表。</i> <br><br> 我们注意区域分布表，我们注意到汽缸数是13845。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/7a/bk/jj7abkkhaeb-43dxtov1u5ihdnw.png"></div><br>  <i>图</i>  <i>4 P列表（主要列表-生产周期中引入的缺陷列表）。</i> <br><br> 我们要注意的缺陷及其定位太少。 我们查看了隐藏工厂缺陷的模块（60h），发现该模块为空并且不包含任何条目。 基于此，我们可以假定在某些以前的服务中心中，可能已经对驱动器的服务区域进行了某些操作，或者意外或有意记录了其他人的模块，或者清除了原始缺陷列表。 为了验证这一假设，我们在数据提取器中创建了一个任务，并启用了“创建逐个扇区的副本”和“创建虚拟转换器”选项。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3l/jd/hl/3ljdhluum6cv3dmilqwbsltk1lk.png"></div><br>  <i>图</i>  <i>5任务参数。</i> <br><br> 创建任务后，我们查看分区表中零扇区（LBA 0）中的条目 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/jv/mt/gtjvmttab56tlxbz501caz8cpgk.png"></div><br>  <i>图</i>  <i>6主引导记录和分区表。</i> <br><br> 在偏移量0x1BE处，存在一条记录（16个字节）。 分区上的文件系统类型为NTFS，偏移量为0x3F（63）扇区的开头，分区的大小为0x011309A3（18,024,867）扇区。 <br> 在部门编辑器中，打开LBA 63。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/yk/fq/kwykfq8od37sp8g22wtvijdpx1m.png"></div><br>  <i>图</i>  <i>7 NTFS引导扇区</i> <br><br> 根据NTFS引导扇区中的信息，可以说以下内容：卷中采用的扇区大小为512字节（单词0x0200（512）写入偏移量0x0B），群集中的扇区数为8（字节0x08写入偏移量0x0D），群集大小为512x8 = 4096字节，第一个MFT记录位于磁盘起始位置的6,291,519个扇区的偏移处（在偏移量0x30处，四字0x00 00 00 00 00 00 00 00 00 00 00（786 432）是第一个MFT群集的编号。扇区号由以下公式计算：群集号* （分区开始前的簇中的扇区数+移位786 432 * 8 + 63 = 6,291,519）。 <br> 我们传递到部门6 291 519。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/yp/uy/l7ypuym-p2gflba2d5m49belsp8.png"></div><br>  <i>图</i>  <i>8</i> <br><br> 但是，此扇区中包含的数据与MFT记录完全不同。 尽管这表明由于缺陷列表不正确而可能导致广播错误，但不能证明这一事实。 为了进一步验证，我们将相对于6,291,519个扇区从两个方向读取10,000个扇区中的磁盘。 然后，我们将在读取的内容中搜索正则表达式。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gx/sc/py/gxscpyil_-qwpvt8dtsjuoqkwda.png"></div><br>  <i>图</i>  <i>9首MFT纪录</i> <br><br> 在部门6,291,551中，我们找到了第一条MFT记录。 它的位置与计算出的32个扇区不同，然后连续出现一组16条记录（从0到15）。 让我们在移位表中输入扇区6 291 519的位置以前进32个扇区。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/vy/hb/jcvyhbxvibt7si5xcibgz-ysrbg.png"></div><br>  <i>图</i>  <i>10</i> <br><br> 第16号记录的位置应在12 551 431处偏移，但在这里我们找到零，而不是记录MFT。 我们将在附近进行类似的搜索。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/dn/ni/jddnniazvuj5p8foynm9m_zpzjy.png"></div><br>  <i>图</i>  <i>11 MFT记录0x00000011（17）</i> <br><br> 检测到较大的MFT片段，从记录号17开始，其长度为53,646条记录，移动了17个扇区。 对于位置12 155 431，我们将在移动表中移动+17个扇区。 <br> 确定了MFT片段在空间中的位置后，我们可以得出结论，这看起来不像是随机故障和通过不正确的偏移量记录MFT片段。 带有错误翻译器的版本可以被认为是已确认。 <br> 为了进一步确定剪切点，我们设置了最大可能的位移。 为此，我们确定将最终的NTFS分区标记移位了多少（引导扇区的副本）。 在图7中，在偏移量0x28处，第四个字是分区大小0x00 00 00 00 00 01 13 09 A2（18,024,866）扇区的值。 让我们将分区本身从磁盘开始到其长度的偏移量相加；我们将得到最终NTFS标记的偏移量18,024,866 + 63 = 18,024,929，正如预期的那样，不需要引导扇区的副本。 在附近搜索时，相对于MFT的最后一个片段，检测到+12个扇区的偏移增加。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/lu/ha/3fluhair61nbqs6efqtncj0oily.png"></div><br>  <i>图</i>  <i>12复制NTFS引导扇区</i> <br><br> 我们忽略位于偏移量18 041 006处的引导扇区的另一个副本，因为它与我们的部分无关。 根据以前的事件，发现该部分中散布着61个扇区，它们在广播中“弹出”，从而分割了数据。 <br> 我们执行完整的驱动器读取，结果导致34个未读扇区。 不幸的是，不可能可靠地保证所有缺陷都是从P清单中删除的缺陷，但是建议在进一步分析中考虑它们的位置，因为在某些情况下，可以可靠地确定准确的换档点而不是文件的换档点。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/k9/sl/sxk9sldygcuoslhlrbi1bzuu8po.png"></div><br>  <i>图</i>  <i>13磁盘读取统计信息。</i> <br><br> 我们的下一个任务将是确定班次的大概位置（根据其发生的位置）。 为此，我们将扫描所有MFT记录并构建文件位置链（文件片段）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6n/-m/bi/6n-mbihfu_ej_y_ekagijttj7we.png"></div><br>  <i>图</i>  <i>14文件或其片段位置的链。</i> <br><br> 此外，从一个文件移到另一个文件，我们正在寻找在什么地方而不是期望的文件头会有其他数据，并且期望的头将以一定的正位移被检测到。 随着换档点的细化，我们填写了表格。 填充的结果将超过文件的99％，而不会损坏。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/on/ep/01/onep01nw4zpvpu_n3mfwruibbl8.png"></div><br>  <i>图</i>  <i>15用户文件列表（从客户端收到以发布此屏幕截图的同意）</i> <br><br> 要在单个文件中建立点移位，您可以执行其他工作，并且，如果您知道文件结构，请查找与该文件不相关的数据的散布。 但是在这项任务中，这在经济上不可行。 <br><br> 附言：我也想向曾经使用此磁盘的同事发出呼吁。 在进行任何更改之前，使用设备固件和保留服务数据时请小心，并且如果您无法与客户就工作达成共识，也不要故意加剧问题。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">下一篇文章：硬盘驱动器的自我诊断和数据恢复</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上一篇：从希捷ST3000NC002-1DY166光栅硬盘上保存比赛数据或恢复数据</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN475146/">https://habr.com/ru/post/zh-CN475146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN475132/index.html">数控机床上的非锁定螺旋桨</a></li>
<li><a href="../zh-CN475134/index.html">高科技欺诈的另一种方式</a></li>
<li><a href="../zh-CN475138/index.html">有益地使用Raspberry Pi的5种方法 第二部分</a></li>
<li><a href="../zh-CN475142/index.html">睡眠，放松和音乐：专业运动员如何克服疲劳，我们该如何做</a></li>
<li><a href="../zh-CN475144/index.html">将Laravel分为组件</a></li>
<li><a href="../zh-CN475154/index.html">使用IPEYE云监控服务进行内部延时拍摄</a></li>
<li><a href="../zh-CN475158/index.html">Playme P570 Mono评论：简而言之</a></li>
<li><a href="../zh-CN475162/index.html">在现代C ++代码中使用X-Macro</a></li>
<li><a href="../zh-CN475164/index.html">讨论：互联网依赖开源-评论家有哪些论点</a></li>
<li><a href="../zh-CN475170/index.html">在React.JS上创建数据驱动的应用程序的基本模式问题</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>