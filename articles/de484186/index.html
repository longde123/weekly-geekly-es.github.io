<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¢ üí¶ üë∏üèæ LDAP - "Authentifizierung" ist ein Antipattern üåæ üìñ üì∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heutzutage verf√ºgt jede Organisation √ºber ein LDAP-Verzeichnis, das mit Benutzern dieser Organisation gef√ºllt ist. Wenn Sie genau hinsehen, finden Sie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LDAP - "Authentifizierung" ist ein Antipattern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avanpost/blog/484186/"><img src="https://habrastorage.org/webt/z4/t7/pc/z4t7pcdsbu94_dfp79cpkjk88te.png" alt="Bild"><br><br>  Heutzutage verf√ºgt jede Organisation √ºber ein LDAP-Verzeichnis, das mit Benutzern dieser Organisation gef√ºllt ist.  Wenn Sie genau hinsehen, finden Sie eine oder mehrere Anwendungen, die dasselbe Verzeichnis f√ºr die ‚ÄûAuthentifizierung‚Äú verwenden.  Und die Anf√ºhrungszeichen sind hier nicht zuf√§llig, da LDAP ein Verzeichniszugriffsprotokoll ist, das zum Lesen, Schreiben und Durchsuchen des Verzeichnisdienstes entwickelt wurde.  Dies ist kein Authentifizierungsprotokoll.  Der Begriff ‚ÄûLDAP-Authentifizierung‚Äú bezieht sich vielmehr auf den Teil des Protokolls (Bindevorgang), der festlegt, wer Sie sind und welche Zugriffsrechte Sie auf die Verzeichnisinformationen haben. <br><a name="habracut"></a><br>  Im Laufe der Zeit hat sich LDAP zu einem De-facto-Authentifizierungsdienst entwickelt.  Umfassende und kosteng√ºnstige LDAP-Dienste wie Active Directory sind ein Leckerbissen f√ºr Softwareentwickler, die Authentifizierung in ihre Produkte integrieren m√∂chten.  LDAP-Client-Bibliotheken sind f√ºr nahezu jedes Framework verf√ºgbar und die Integration ist relativ einfach zu implementieren. <br><br>  Trotz der Tatsache, dass die Verwendung von LDAP das Problem der Implementierung der Benutzerauthentifizierung in verschiedenen Anwendungen des Unternehmens l√∂sen kann, treten viele Probleme auf.  Im Gegensatz zu speziell entwickelten Authentifizierungsprotokollen f√ºhrt die Verwendung von LDAP zu verschiedenen Sicherheitsl√ºcken in Bezug auf Informationen. <br><br>  Um zu verstehen, wie diese Sicherheitsanf√§lligkeiten aussehen, m√ºssen Sie zun√§chst die Funktionsweise der LDAP-Authentifizierung kennen. <br><br><h2>  Funktionsweise der LDAP-Authentifizierung </h2><br>  Stellen Sie sich die folgende Situation vor (sie ist weit von der Realit√§t entfernt, vermittelt aber die Essenz perfekt). <br><br>  Angenommen, ich platziere eine Bestellung in einem Online-Shop, damit sie in meiner Abwesenheit zu mir nach Hause geliefert wird.  Der Kurier kommt an und hinterl√§sst eine Nachricht unter der T√ºr mit dem Text "Es tut mir leid, wir haben Sie nicht gefunden" und bittet mich, die Bestellung zu einem geeigneten Zeitpunkt an der n√§chsten Abholstelle abzuholen.  An der Abholstelle fragt der Mitarbeiter nach meinem Namen, meiner Adresse und den Schl√ºsseln f√ºr das Haus, um meine Identit√§t zu best√§tigen.  Dann kommt der Lieferservice zu mir nach Hause und √∂ffnet die T√ºr mit meinem Schl√ºssel.  Er geht hinein, um sicherzustellen, dass ich dort lebe, zum Beispiel anhand von Fotos an der Wand oder mit dem Namen des Empf√§ngers auf der Korrespondenz.  Danach kehrt der Mitarbeiter zur Ausgabestelle zur√ºck und teilt mir mit, dass er meine Identit√§t erfolgreich best√§tigt hat und ich mein Paket erhalten kann!  Hurra! <br><br>  Neben logistischen Problemen gibt es in dieser Situation noch viele andere Probleme.  Was ist, wenn ein skrupelloser Pr√ºfer eine Kopie meines Schl√ºssels erstellt hat?  Oder lie√ü er den Schl√ºssel lange Zeit unbeaufsichtigt und tat es jemand anderes?  Was ist, wenn der Tester angegriffen und mein Schl√ºssel abgenommen wurde?  Wenn ich einem Fremden den Schl√ºssel f√ºr meine Wohnung √ºbergebe, kann ich nicht sicher sein, ob er anst√§ndig und sicher ist. <br><br>  Gl√ºcklicherweise verf√ºgen wir in der realen Welt √ºber Ausweispapiere, z. B. einen F√ºhrerschein oder einen Reisepass, die von Regierungsbeh√∂rden ausgestellt werden, und deren Echtheit ist unbestritten.  Ich kann diese Dokumente dem Kurier zur eigenen Identifizierung zur Verf√ºgung stellen, ohne die Schl√ºssel zu √ºbergeben. <br><br>  In der LDAP-Welt m√ºssen wir noch unsere Schl√ºssel √ºbergeben, um die T√ºr f√ºr uns zu √∂ffnen.  Wir geben unser Passwort an Dritte weiter und er versucht, damit in den LDAP-Server einzudringen.  Wenn er Zugriff erh√§lt, k√∂nnen wir nicht sicher sein, dass unsere Anmeldeinformationen nicht gef√§hrdet sind.  In diesem Fall kann der Angreifer nicht nur die LDAP-T√ºr entsperren, sondern auch auf alle Anwendungen zugreifen, die dieselben Anmeldeinformationen verwenden. <br><br>  Zum Gl√ºck haben wir in einer vollst√§ndigeren Welt der Authentifizierung auch P√§sse und F√ºhrerscheine!  Authentifizierungsprotokolle wie Kerberos, SAML und OpenID Connect stellen Token an Dritte aus.  Tokens best√§tigen, dass Sie derjenige sind, f√ºr den Sie sich ausgeben, und dass Sie Ihre Schl√ºssel an niemanden weitergeben m√ºssen.  Da LDAP nie als Authentifizierungsprotokoll konzipiert wurde, fehlen die entsprechenden Mechanismen. <br><br><h2>  Nachteile von LDAP als Authentifizierungssystem </h2><br>  2007 ver√∂ffentlichte Shumon Hack einen Science-Fiction-Artikel ( <a href="https://www.huque.com/talks/2007-10-LDAP-Authn.html">LDAP-Schw√§chen als zentrales Authentifizierungssystem</a> ), in dem er drei spezifische Probleme bei der Verwendung von LDAP als Authentifizierungssystem beschreibt. <br><br><h4>  1. Die Anwendung ist wahrscheinlich nicht sicher genug, um Anmeldeinformationen zu verarbeiten </h4><br>  Der Autor betont, dass das Sch√ºtzen einer kleinen Anzahl von Authentifizierungsservern vor Angriffen viel einfacher ist als das Sch√ºtzen einer gro√üen Anzahl von Anwendungsservern. <br><br>  Authentifizierungsserver werden in der Regel von Spezialisten mit umfangreicher Erfahrung auf dem Gebiet der Informationssicherheit engmaschig √ºberwacht. <br><br>  Andererseits weisen Anwendungsserver ein v√∂llig anderes Sicherheitsniveau auf und sind gef√§hrdeter.  Sie sind weniger sicher, arbeiten mit komplexeren Software-Stacks und weisen mit h√∂herer Wahrscheinlichkeit Schwachstellen auf.  Und h√§ufiger werden sie von Personen verwaltet, die √ºber keine umfassenden Sicherheitskenntnisse verf√ºgen.  Der Aufbau des richtigen Sicherheitssystems ist ein komplizierter Prozess, bei dem es sehr leicht ist, einen Fehler zu machen. <br><br>  Das Problem ist, dass, wenn ein Anwendungsserver kompromittiert wird, alle Anmeldeinformationen, die von ihren Besitzern w√§hrend des Angriffs verwendet werden, ebenfalls kompromittiert werden.  Jedes andere System, das dasselbe LDAP-Verzeichnis f√ºr die Authentifizierung verwendet, ist gef√§hrdet. <br><br><h4>  2. Der LDAP-Server kann den Authentifizierungsmechanismus zum Abrufen von Anmeldeinformationen nicht sichern </h4><br>  Ein LDAP-Server kann die Transaktionssicherheit nicht garantieren.  Obwohl ein LDAP-Server beispielsweise die Bindung √ºber TLS erzwingen kann, um sicherzustellen, dass Anmeldeinformationen nicht im Klartext √ºbertragen werden, hat der Server selbst keine Rolle beim Abrufen von Anmeldeinformationen vom Benutzer gespielt.  Es besteht die Gefahr, dass die Anwendung √ºber einen unsicheren Kanal ein Kennwort erh√§lt. <br><br><h4>  3. Der Benutzer ist gezwungen, sein Authentifizierungsgeheimnis an Dritte weiterzugeben </h4><br>  Benutzerkennwort oder Authentifizierungsgeheimnis m√ºssen geheim bleiben.  Es sollte nur dem Benutzer und dem Authentifizierungssystem bekannt sein.  Bei der Verwendung der LDAP-Authentifizierung muss der Benutzer sein Geheimnis an einen Dritten weitergeben, damit er im Namen des Benutzers mit diesem Geheimnis mit dem LDAP-Verzeichnis interagieren kann. <br><br>  Es ist wichtig zu erw√§hnen, dass bei der Verwendung von speziell entwickelten Authentifizierungsprotokollen wie Kerberos und sogar vom fr√ºheren NTLM das Geheimnis des Benutzers niemals √ºber das Netzwerk √ºbertragen wird.  Das Client-Ger√§t und der Server verwenden kryptografische Operationen, um sich gegenseitig zu beweisen, dass sie dasselbe Geheimnis haben, und das Geheimnis selbst nicht einmal auszutauschen. <br><br>  Zu den Punkten von Shumon Hook werde ich eine Beschreibung einiger Nuancen der LDAP-Authentifizierung hinzuf√ºgen, die auf meinen eigenen Erfahrungen basieren.  Zun√§chst geht es um die Verwendung von Active Directory. <br><br><h4>  4. Viele Entwickler wissen nicht genug √ºber LDAP-Mechanismen Bescheid, um sie korrekt zu verwenden </h4><br>  In einem meiner letzten <a href="https://blog.lithnet.io/">Blog-</a> Beitr√§ge wurde beschrieben, wie anonyme und nicht authentifizierte Bindungen Anwendungsentwickler √ºberlisten und nicht autorisierte Benutzer zum √úberspringen bringen konnten.  Die M√∂glichkeit, einen Bindevorgang ohne Authentifizierung auszuf√ºhren, ist eine der Feinheiten des Protokolls, die selbst den erfahrensten LDAP-Experten nicht bekannt sind. <br><br>  Verzeichnisse sind nicht einfach zu organisieren und k√∂nnen eine gro√üe Menge von Organisationsinformationen speichern und bieten viele anpassbare M√∂glichkeiten, diese zu speichern.  In vielen F√§llen ging der Anwendungsentwickler davon aus, dass eine bestimmte Objektklasse oder ein bestimmtes Attribut vorhanden ist, und als sie nicht erkannt wurden, st√ºrzte die Anwendung ab.  F√ºr die Benutzerauthentifizierung sollte keine Kenntnis der Struktur der im Verzeichnis gespeicherten Daten erforderlich sein und angewendet werden.  Das Authentifizierungsprotokoll sollte von den Details des Objekt-Repositorys auf einer niedrigeren Ebene abstrahiert werden. <br><br><h4>  5. Anwendungsadministratoren konfigurieren LDAP-Clients h√§ufig nicht richtig </h4><br>  Beim Verwalten von Active Directory in einer gro√üen verteilten Umgebung gibt es eine unangenehme Nuance: Es ist schwierig zu bestimmen, welche bestimmten Anwendungen Active Directory als LDAP-Verzeichnis verwenden und wie genau die Anwendungsadministratoren den LDAP-Client konfiguriert haben. <br><br>  Das Folgende sind Beispiele f√ºr die Schrecken der Fehlkonfiguration. <br><br><ul><li>  Festcodieren von DN in Anwendungen oder Verwenden von DN in einem Bindevorgang.  Probleme treten st√§ndig beim Umbenennen oder Verschieben von Objekten innerhalb eines Verzeichnisses auf, und das alles, weil jemand irgendwo einen fest codierten DN hat.  (Hinweis f√ºr Benutzer, die einfache Bindevorg√§nge mit Active Directory ausf√ºhren: Es ist nicht erforderlich, einen DN zu verwenden. Active Directory bietet auch alternative DN-Formate, die zuverl√§ssiger sind als die Verwendung eines herk√∂mmlichen Formats.) </li><li>  F√ºr den Bindevorgang wird kein Dienstkonto verwendet, sondern ein pers√∂nliches Konto des Entwicklers oder Administrators (stellen Sie sich vor, was passiert, wenn der Kontoinhaber das Unternehmen verl√§sst). </li><li>  Senden von Passw√∂rtern im Klartext an Port 389. </li><li>  In einigen Anwendungen ist das Kontrollk√§stchen "Zertifikat validieren" nicht erforderlich, wenn eine Verbindung zu AD √ºber TLS (Port 636) hergestellt wird.  Warum ist das allgemein akzeptabel?  Wie kann ich das Passwort an einen Drittanbieter weitergeben, ohne von seiner Echtheit √ºberzeugt zu sein? </li></ul><br>  Es ist einfach, den LDAP-Client zum Laufen zu bringen.  Aber nur die Tatsache, dass es funktioniert, bedeutet nicht, dass die Konfiguration korrekt ist. <br><br><h4>  6. LDAP-Authentifizierung und moderne Authentifizierungsdienste schlie√üen sich gegenseitig aus </h4><br>  Eine Anwendung, die LDAP zur Authentifizierung verwendet, muss sich immer auf Benutzernamen und Kennw√∂rter verlassen.  Der Versuch, moderne Technologien wie die Multi-Faktor-Authentifizierung und die einmalige Anmeldung zu implementieren, ist fast unm√∂glich (es sei denn, Sie implementieren Ihre eigenen Technologien, was an sich schon eine schlechte Idee ist).  Die FIDO Alliance setzt sich daf√ºr ein, Passw√∂rter zu einem Relikt der Vergangenheit zu machen, und jede Anwendung, die LDAP-Authentifizierung verwendet, wird ein Hindernis f√ºr eine kennwortfreie Richtlinie sein. <br><br><h2>  Welche M√∂glichkeiten gibt es? </h2><br>  Webanwendungen k√∂nnen heutzutage wirklich ohne LDAP-Authentifizierung auskommen.  Es gibt viele hervorragende Webauthentifizierungsprotokolle wie SAML, WS-Federation und OpenID Connect, f√ºr die keine Benutzeranmeldeinformationen erforderlich sind, um mit Anwendungen von Drittanbietern zu arbeiten.  Zahlreiche Produkte bieten diese Dienste an, darunter der Active Directory-Verbunddienst (in Windows Server integriert) oder Dienste von Drittanbietern wie Microsoft Azure AD, Okta, Ping und andere.  Wenn Ihre Organisation nicht √ºber einen Verbund-IDP verf√ºgt, m√ºssen Sie diesen zun√§chst implementieren. <br><br>  Das Wichtigste, auf das Sie bei der Auswahl einer neuen Software achten sollten, ist die Unterst√ºtzung moderner Authentifizierungsprotokolle.  Auch wenn das Unternehmen die Anwendung hier und jetzt ben√∂tigt, sollten Sie sich nicht beeilen, eine L√∂sung auszuw√§hlen, insbesondere, wenn diese Auswahl nur auf Produkte mit LDAP-Authentifizierung beschr√§nkt ist.  Es lohnt sich, dem ausgew√§hlten Anbieter die Notwendigkeit zu vermitteln, das Produkt mit moderneren Authentifizierungsprotokollen zu verfeinern.  Vielleicht h√∂rt er zu und √ºberarbeitet seinen Entwicklungsplan. <br><br>  Die Anzahl der Desktop-Anwendungen mit einem "Thick Client", der moderne Authentifizierungsprotokolle unterst√ºtzt, nimmt zu, und dies ist in der Tat ein erfreulicher Trend.  Diese Anwendungen waren normalerweise eine Hochburg der LDAP-Authentifizierung.  Dank einer wachsenden Anzahl von SDKs, wie der Microsoft Authentication Library (MSAL), k√∂nnen Entwickler ihren mobilen und Desktop-Anwendungen auf einfache Weise Unterst√ºtzung f√ºr moderne Authentifizierungsdienste hinzuf√ºgen. <br><br>  Letztendlich ist es erw√§hnenswert, dass in der heutigen Realit√§t nicht alle Anwendungen moderne Authentifizierungsprotokolle unterst√ºtzen und dies m√∂glicherweise niemals sein wird.  Die Implementierung eines vollst√§ndigen Verbots der LDAP-Authentifizierung ist wahrscheinlich in keiner Organisation m√∂glich.  Die LDAP-Authentifizierung sollte jedoch in keiner Weise innerhalb des Unternehmens gef√∂rdert werden.  Die Verwendung von LDAP sollte nur in Betracht gezogen werden, wenn keine anderen Optionen verf√ºgbar sind. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484186/">https://habr.com/ru/post/de484186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484174/index.html">Castle trinkt unter "extremen" Bedingungen oder wie wir an der "DOZOR" Show teilgenommen haben</a></li>
<li><a href="../de484176/index.html">Implementieren der Statusvorlage in Unity</a></li>
<li><a href="../de484178/index.html">Intelligenter Ethernet-Switch f√ºr Planet Earth</a></li>
<li><a href="../de484180/index.html">Virtuelle Telefonanlage von Rostelecom: Was und wie kann √ºber die API geschehen?</a></li>
<li><a href="../de484182/index.html">Xenobots: Lebende Nanoroboter aus Froschzellen</a></li>
<li><a href="../de484188/index.html">Standards f√ºr das Datenbankdesign</a></li>
<li><a href="../de484192/index.html">Einfache und leicht zu implementierende Anwendungen auf Tarantool Cartridge (Teil 2)</a></li>
<li><a href="../de484194/index.html">Kubernetes √ºbersetzt in Kinder</a></li>
<li><a href="../de484196/index.html">Aufnahme von JS-Ton √ºber ein Mikrofon oder Sprachkommentare</a></li>
<li><a href="../de484198/index.html">R√ºckseite der Medaille: Wer hat beim Wachstum der Tesla-Aktien gewonnen und verloren?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>