<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💄 🧖🏻 🏓 Zork和Z-Machine：开发人员如何将游戏从大型机转移到8位​​家用计算机 ⛴️ 👨🏻‍⚕️ ▶️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="电脑游戏几乎和电脑本身一样存在。 尽管令人难以置信，但Zork文字冒险是那个时代的堡垒。 但是Zork还是更多。 为了便于携带和节省空间，Zork本身是用Zork实现语言（ZIL）编写的，该语言积极地使用了当时面向对象编程的全新概念，并在虚拟机中执行。 所有这一切都发生在1979年。 开发人员使用各...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zork和Z-Machine：开发人员如何将游戏从大型机转移到8位​​家用计算机</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479690/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b96/bd7/6aa/b96bd76aa97a94686224f372a89e18c5.jpg"></div><br> 电脑游戏几乎和电脑本身一样存在。 尽管令人难以置信，但Zork文字冒险是那个时代的堡垒。 但是Zork还是更多。 为了便于携带和节省空间，Zork本身是用Zork实现语言（ZIL）编写的，该语言积极地使用了当时面向对象编程的全新概念，并在虚拟机中执行。 所有这一切都发生在1979年。 开发人员使用各种技巧将尽可能多的Underground Empire装入只有32 KB RAM的计算机中。 但是，Zork不仅是一项技术突破，而且是计算机游戏历史上的一个重要里程碑。 同时，他并非从零开始。 <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cfe/fff/a91/cfefffa91aa4624c85cc92108faa0d35.jpg"></div><br>  <i>DEC PDP-10计算机倒装芯片模块</i> <br><br> 计算机革命始于第二次世界大战，并在50年代和60年代没有停止。 用于公司和大学的越来越多的可访问计算机系统出现在销售中。 麻省理工学院（MIT）计算机科学实验室（LCS）非常幸运，可以与<a href="https://en.wikipedia.org/wiki/Advanced_Research_Projects_Agency">ARPA紧密合作</a> ，后者为LCS和MIT人工智能实验室（以前是<a href="https://en.wikipedia.org/wiki/Project_MAC">MAC项目的</a>一部分）提供了重要的<a href="https://www.filfre.net/2012/01/the-roots-of-infocom/">计算资源</a> ，主要由<a href="https://en.wikipedia.org/wiki/Programmed_Data_Processor">DEC PDP</a>系统提供。 <br><br> 结果，麻省理工学院动态建模小组（LCS部件）的学生可以使用<a href="https://en.wikipedia.org/wiki/PDP-10">PDP-10</a> KA10大型机，这是当时功能最强大的机器。 尽管此特殊的PDP-10是1968年的原始型号，具有离散的<a href="https://en.wikipedia.org/wiki/Flip_Chip_%2528trademark%2529">倒装芯片</a>晶体管模块和环绕式布线，但它进行了<a href="https://github.com/PDP-10/its/issues/181">重大修改</a> ：它增加了对虚拟内存和内存页面的支持，以扩展原始的1,152 KB内核内存。 <br><br> 麻省理工学院开发的运行<a href="https://en.wikipedia.org/wiki/Incompatible_Timesharing_System">不兼容分时系统</a> （ITS）操作系统的计算机是功能强大的多用户系统。 <br><br> 自然，它主要用于玩游戏。 <br><br><h2> 您准备好冒险了吗？ </h2><br>  1977年春季，麻省理工学院出现了一款名为“ <a href="https://en.wikipedia.org/wiki/Colossal_Cave_Adventure">巨大洞穴探险”</a> （简称“冒险”）的游戏。 该游戏是<a href="https://en.wikipedia.org/wiki/Interactive_fiction">互动小说</a>类型中的第一款计算机游戏，允许玩家在大型洞穴系统中进行文字之旅，据传该洞穴中藏有宝藏。 就像在<a href="https://ru.wikipedia.org/wiki/Choose_Your_Own_Adventure">“选择冒险”</a>一书中一样，玩家做出了选择，这使他在洞穴的房间中移动，结果，他发现了宝藏并逃脱了，或者遇见了他过世的死亡。 <br><br> 受此游戏的启发，一群LCS学生意识到他们可以超越斯坦福项目。  Adventure的主要弱点在于它是用FORTRAN编写的，该语言并不以其出色的动态文本功能而著称，尤其是对于交互式小说类型游戏的需求。 本质上，Adventure完全是硬编码的，这限制了灵活性，并使游戏的可扩展性和支持变得复杂。 <br><br> 在Adventure中，每个房间都有一个数字ID，该ID与表中的描述相关联。 另一张桌子问她简短的描述。 在另一个表中，使用数字ID列出了房间相对于其他房间的位置。 这意味着要添加一个房间，您将必须手动编辑所有这些表，并且要小心，以免引起这些更改的问题。 <br><br><h2> 黑客大赛 </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/069/726/fc6/069726fc696c69813d6813f9d4fb660e.png"></div><br>  <a href="https://en.wikipedia.org/wiki/Dave_Lebling">Dave Lebling利用</a>当时在LCS和AI实验室中使用自然语言的经验，首先编写了一个简单的解析器，并为类似于Adventure引擎的游戏引擎奠定了基础。 为此，他使用了<a href="https://en.wikipedia.org/wiki/MDL_%2528programming_language%2529">MDL</a>派生的编程语言LISP。 得益于强大的自然语言处理能力， <a href="https://en.wikipedia.org/wiki/Marc_Blank">马克·布兰克</a> ， <a href="https://en.wikipedia.org/wiki/Bruce_Daniels">布鲁斯·丹尼尔斯</a>和<a href="https://en.wikipedia.org/wiki/Tim_Anderson_%2528Zork%2529">蒂普·安德森</a>根据Lebling的工作， <a href="https://www.filfre.net/2012/01/zork-on-the-pdp-10/">创建</a>了第一款原型游戏，随着时间的流逝，它已成为当今我们称为Zork的游戏。 <br><br>  Zork的革命之处在于，与简单的Adventure命令（LAMP GET和GET LAMP是等效的）不同，由于MDL出色的自然语言处理能力，他可以处理整个句子。 他可以处理完整的句子，甚至可以将几个句子（团队）组合成一个句子。 强大的解析器的存在以及以面向对象的风格在MDL上为新房间建模的便捷性，意味着在编写解析器和游戏引擎之后，世界几乎可以无限扩展。 <br><br> 可以使用以下简单的代码来设置Zork中的房间： <br><br><blockquote><pre> <code class="hljs pgsql">&lt;ROOM "WHOUS" "This is an open field west of a white house, with a boarded front door." "West of House" &lt;<span class="hljs-keyword"><span class="hljs-keyword">EXIT</span></span> "NORTH" "NHOUS" "SOUTH" "SHOUS" "WEST" "FORE1" "EAST" #NEXIT "The door is locked, and there is evidently no key."&gt; (&lt;<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>-OBJ "FDOOR"&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>-OBJ "MAILB"&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">GET</span></span>-OBJ "MAT"&gt;) &lt;&gt; &lt;+ ,RLANDBIT ,RLIGHTBIT ,RNWALLBIT ,RSACREDBIT&gt; (RGLOBAL ,HOUSEBIT)&gt;</code> </pre> </blockquote><br> 这将从游戏开始就设置“白宫”，以及从该房间退出，退出的特殊属性（例如，锁着的门）和房间中的对象。 这样可以确保房间的所有属性，包括其描述，简短描述，属性和标签，都将集中在一个地方。 然后，游戏引擎将能够切换房间的各个标签（位），存储所有房间及其当前状态的中央数据库。 使用游戏名称而不是表格中的数字ID来管理游戏设计创建过程中的房间连接。 <br><br><h2> 大声打 </h2><br> 可以说Zork在大型机上绝对很棒。 应其他感兴趣的游戏玩家的要求，将其移植到用于PDP-10的更常见的DEC <a href="https://en.wikipedia.org/wiki/TOPS-20">TOPS-20</a>操作系统。 尽管Zork开发人员非常慷慨，他们免费提供了该版本，但他们分发了加密的只读版本。 他们甚至将Zork源代码存储在ITS大型机上的安全文件夹中，为此他们必须修补完全开放且不安全的ITS大型机OS。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9aa/785/478/9aa785478947a622f418ac4a053ddb22.jpg"></div><br> 在世界计算机历史的现阶段，仍然有很多。 家用计算机的概念才刚刚出现：1977年出现了<a href="https://en.wikipedia.org/wiki/TRS-80">TRS-80</a>和<a href="https://en.wikipedia.org/wiki/Apple_II">Apple II</a>这样的计算机，但与当时美国学生在玩文字冒险游戏的大型机相比，该系统也受到了极大的限制。 将像Zork这样的游戏（一个1 MB的可执行文件）移植到家用计算机的想法似乎还为时过早。 <br><br> 尽管家用计算机仍然很少见，但向普通消费者销售软件的概念仍然很新。 这是<a href="https://en.wikipedia.org/wiki/Atari_2600">Atari 2600</a>刚刚出现在零售市场上的时候，它推出了第二代游戏机，在该游戏机上，借助插入的墨盒，不仅可以玩一款游戏。 这是一个新的市场，这对麻省理工学院，斯坦福大学和其他教育机构的学生提出了<a href="https://www.filfre.net/2012/01/the-birth-of-infocom/">许多问题</a> ，涉及黑客文化对商业软件世界的反对。 自麻省理工学院的学生时代起，一些人（例如<a href="https://en.wikipedia.org/wiki/Richard_Stallman">Richard Stallman</a> ）就没有改变他们的信念。 <br><br> 当Zork的开发人员离开研究所时， <a href="http://www.csd.uwo.ca/Infocom/Articles/NZT/zorkhist.html">他们意识到</a>游戏的成功掌握在他们手中：他们有机会将其商业化，从而将生活和职业推向相对于原始目标的全新方向。 因此，几乎没有丝毫阻碍，Infocom公司于1979年6月22日成立。 <br><br><h2> 现在我们只需要移植它 </h2><br> 将Zork从PDP-10大型机系统迁移到小型家用计算机上只有一个小警告：当时，Infocom没什么可卖的。 开发人员想出了各种游戏创意，可以将其应用于家用计算机上，但是主要价值是移植Zork。 他们只需要解决将1兆字节的MDL游戏代码转换为具有32 KB RAM（甚至更少）的RAM和微型驱动器的微型计算机的问题。 <br><br> 此外，他们不想将游戏分别移植到TRS-80，Apple II和新系统上。 如果您尝试使用现有的MDL代码怎么办？ 这标志着后来被称为<a href="https://en.wikipedia.org/wiki/Z-machine">Z机</a>的发展的开始。 <br><br> 当然，起初他们想解决Zork与微型计算机的兼容性问题，并通过删除内容来<a href="https://www.filfre.net/2012/01/zil-and-the-z-machine/">减少游戏</a>量。 通过大量削减，他们设法接近了Adventure的规模。 然后他们对MDL进行了类似的操作，删除了Zork不需要的所有功能。 这就是<a href="https://archive.org/details/Learning_ZIL_Steven_Eric_Meretzky_1995">Zork实现语言</a> （ZIL）出现的方式，他们可以轻松地将Zork与MDL移植到其中。 之后，ZIL编译器可以创建比MDL编译器小的可执行文件。 <br><br> 查看ZIL上的Zork黄铜灯笼说明，我们可以发现它比MDL更容易阅读： <br><br><blockquote><pre>  &lt;对象灯笼
 （起居室）
 （SYNONYM灯泡灯笼灯）
 （辅助黄铜）
 （DESC“黄铜灯笼”）
 （国旗TAKEBIT LIGHTBIT）
 （行动灯笼-F）
 （FDESC“奖杯上有电池供电的灯笼
情况。”）
 （LDESC“有一个黄铜灯笼（电池供电）
在这里。”
 （尺寸15）&gt; </pre></blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d91/f13/639/d91f136397bfe7551d69f6553ab2e3f6.gif"></div><br> 这当然很棒，但是仍然不允许在TRS-80上发射Zork。 当然，在此阶段，他们可以为每个平台编写ZIL编译器以及ZIL可执行文件，以在以后花费大量时间在每个目标平台上设置每个游戏。 但相反，他们决定编写一个虚拟机：Z-Machine。 实际上，它是直接支持ZIL二进制文件的基于文本的冒险游戏<a href="http://inform-fiction.org/zmachine/standards/index.html">的理想平台</a> ，并且还实现了许多优化，其中最重要的是将字符打包为5位，类似于<a href="https://en.wikipedia.org/wiki/Baudot_code">Bodo代码</a> 。 <br><br> 由于所有这些优化，虚拟机和自己的编程语言，他们设法将Zork I的截断世界与一个解释器（虚拟机）一起放入77千字节的“历史文件”中。 由于仍然比流行的计算机多32 KB的内存，因此在虚拟机中实现了虚拟内存系统，其中仅将动态数据（变量）加载到RAM中，并在必要时从软盘读取所有静态数据（文本）。 <br><br><h2> 展望未来 </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba5/a04/546/ba5a0454625770fb3c5949051150e9c9.jpg"></div><br>  Apple II软盘的大小为140 KB，TRS-80磁盘的大小为180 KB，即解决了空间问题。 只有解释器必须针对目标平台进行优化，这意味着将来可以在Infocom发行的所有游戏中使用相同的解释器，而无需移植到单独的平台。 从Zork的大型机版本开始，他们还有很多内容。 他们准备好续集了。 <br><br> 继Zork I商业上的成功之后，开发人员继续生产从原始大型机版本切割而来的零件，形式为Zork II和Zork III。 年复一年，Zork I的销售持续增长，它成为必须购买的游戏，通常与新系统捆绑在一起。 开发了新<a href="https://hansprestige.com/inform/zmachine_versions.html%3Ffbclid%3DIwAR30zFGYH8ntJBLUfLnmLa_PjbT_zw7KIOlpXMfBsqS4P5sw9_utAgnErJg">版本的Z-Machine</a> ，其中为更复杂的游戏添加了新功能。 如今， <a href="http://www.ifwiki.org/index.php/Z-machine">我们仍然可以尽情享受</a> Infocom游戏，而不必担心兼容性问题：我们<a href="https://github.com/historicalsource/zork">在MDL上</a>发布了<a href="https://github.com/historicalsource/zork">Zork源代码</a> ，以及<a href="https://github.com/historicalsource%3Ftab%3Drepositories">其他经典Infocom游戏</a>的源代码。 如果您很长时间没有玩过Zork，请尝试然后看一下游戏内部发生的情况。 可以毫不费力地说，一群来自1970年代美国大学的黑客很可能决定视频游戏和交互式故事讲述世界的未来。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN479690/">https://habr.com/ru/post/zh-CN479690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN479680/index.html">如何使癌细胞更容易吸收药物</a></li>
<li><a href="../zh-CN479682/index.html">Sysdig容器使用情况报告2019：新的Kubernetes和安全性详细信息</a></li>
<li><a href="../zh-CN479684/index.html">如何为SEO收集低频密钥：4种简单方法</a></li>
<li><a href="../zh-CN479686/index.html">2020年后IT外包的主要趋势</a></li>
<li><a href="../zh-CN479688/index.html">考虑税收和生活费用，开发商在哪些国家和城市能赚更多钱？</a></li>
<li><a href="../zh-CN479692/index.html">索引数十亿个文本向量</a></li>
<li><a href="../zh-CN479696/index.html">关于Alter Table的几句话，或如何做</a></li>
<li><a href="../zh-CN479700/index.html">CIMON-2 ：（联合国）世界末日，或者IBM Watson如何爬上云层</a></li>
<li><a href="../zh-CN479702/index.html">烤面包机，我的圈子和Freelansim成为Habr的一部分</a></li>
<li><a href="../zh-CN479704/index.html">EA Origin Windows客户端中的特权升级（CVE-2019-19247和CVE-2019-19248）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>