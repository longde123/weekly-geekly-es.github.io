<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüç≥ üìã üßù Simplifiez la migration d'OpenShift 3 vers OpenShift 4 üï† üëµüèº üë®üèæ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C'est ainsi qu'a eu lieu le lancement officiel de la plate-forme Red Hat OpenShift 4. Aujourd'hui, nous vous expliquerons comment y basculer avec la p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Simplifiez la migration d'OpenShift 3 vers OpenShift 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/463763/">  C'est ainsi qu'a eu lieu le lancement officiel de la plate-forme Red Hat OpenShift 4. Aujourd'hui, nous vous expliquerons comment y basculer avec la plate-forme OpenShift Container Platform 3 aussi rapidement et simplement que possible. <br><br><img src="https://habrastorage.org/webt/lg/gb/ho/lggbhohesmckpub0hxttmx20jnw.png" width="100%"><br><br>  Dans le cadre de cet article, nous nous int√©ressons principalement aux nouveaux clusters OpenShift 4 qui utilisent les capacit√©s d'une infrastructure intelligente et immuable (immuable - identique pour tous les environnements de d√©ploiement) bas√©e sur RHEL CoreOS et des outils d'automatisation.  Ci-dessous, nous montrons comment passer √† OpenShift 4 sans trop de probl√®mes. <br><a name="habracut"></a><br>  En savoir plus sur les diff√©rences entre la nouvelle version et l'ancienne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.google.com/url%3Fq%3D">ici</a> . <br><br><h3>  Migration de cluster d'OpenShift 3 vers OpenShift 4 √† l'aide de la plateforme certifi√©e Red Hat Appranix </h3><br>  Appranix et Red Hat ont travaill√© dur pour rationaliser la migration des ressources de cluster d'OpenShift 3 vers OpenShift 4 √† l'aide d'un service sp√©cial ex√©cut√© au-dessus de l'Appranix Site Reliability Automation for Kubernetes. <br><br>  La solution Appranix (pr√©sente dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.google.com/url%3Fq%3D">catalogue de conteneurs Red Hat</a> ) vous permet de cr√©er des sauvegardes de tous les clusters OpenShift 3 et de les restaurer sur OpenShift 4 en quelques clics. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9i/5h/tb/9i5htboul925qibybvlr34nnlhe.png"></div><br><br><h3>  Pourquoi la migration √† l'aide d'Appranix pour OpenShift 4 est bonne </h3><br><ul><li>  D√©marrage rapide.  √âtant donn√© que la solution Appranix est bas√©e sur les principes SaaS, vous n'avez pas besoin de configurer d'infrastructure ni de configurer ou d'utiliser des solutions sp√©cialis√©es distinctes pour la migration. </li><li>  L'√©volutivit√© d'Appranix facilite la migration de grands clusters. </li><li>  La sauvegarde automatique des configurations de cluster complexes d'OpenShift 3 avec le portage ult√©rieur vers OpenShift 4 simplifie le processus de migration lui-m√™me. </li><li>  La possibilit√© de tester le comportement des applications de l'infrastructure d'entreprise OpenShift 3 sur la plate-forme OpenShift 4 dans le cloud AWS. </li><li>  Migration des param√®tres d'acc√®s RBAC avec les ressources du cluster. </li><li>  Migration s√©lective ou compl√®te de tous les projets vers de nouveaux clusters OpenShift 4. </li><li> Facultativement - l'organisation de plusieurs niveaux de tol√©rance aux pannes pour les applications de conteneur avec l'abonnement appropri√©. </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p8/4u/gu/p84ugursz5hvgd2tdjgxy2oqdiu.png"></div><br><br><h3>  R√©silience pour les applications OpenShift </h3><br>  Apr√®s la migration de la 3e √† la 4e version d'OpenShift, Appranix peut √™tre utilis√© pour fournir une r√©silience continue des applications, dans laquelle il existe trois options.  La r√©silience de niveau 1 vous permet de restaurer des applications sans changer la r√©gion et le fournisseur de cloud.  Il peut √™tre utilis√© pour restaurer des applications ou r√©cup√©rer apr√®s une d√©faillance locale au niveau r√©gional, par exemple, dans le cas d'un d√©ploiement d'applications infructueux, ou dans une situation dans laquelle vous devez cr√©er rapidement un environnement de test dans la m√™me r√©gion, mais dans un cluster OpenShift distinct. <br><br>  <b>Le niveau 2</b> vous permet de transf√©rer des applications vers une autre r√©gion sans changer de fournisseur.  Dans le m√™me temps, vous pouvez enregistrer l'infrastructure de donn√©es principale dans la r√©gion principale, mais ex√©cuter des applications dans un autre cluster dans une r√©gion diff√©rente.  Cette option est utile lorsqu'une r√©gion ou une zone cloud tombe en panne ou que vous devez transf√©rer des applications vers une autre r√©gion en raison d'une cyberattaque.  Et enfin, le <b>niveau 3</b> vous permet de changer non seulement la r√©gion, mais aussi le fournisseur de cloud. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l0/xq/r6/l0xqr6hmm_nvlme83-d3b6ft2_m.png"></div><br><br>  <b>Comment fonctionne Appranix SRA</b> <br>  La tol√©rance aux pannes √† plusieurs niveaux des applications OpenShift dans Appranix est obtenue gr√¢ce √† la fonctionnalit√© d'une ¬´machine √† remonter le temps¬ª qui cr√©e automatiquement des copies de l'environnement d'application.  Pour utiliser cette fonctionnalit√© et augmenter la s√©curit√© des applications, ajoutez simplement une ligne de code au pipeline DevOps. <br>  Les services d'infrastructure des fournisseurs de cloud ont √©galement des probl√®mes, donc la possibilit√© de basculer rapidement vers un autre fournisseur est utile afin d'√©viter la d√©pendance √† l'√©gard d'un seul fournisseur de services. <br><br>  <b>Comme le montre la figure ci-dessous</b> , les sauvegardes de l'environnement d'application peuvent √™tre cr√©√©es dans Appranix non seulement automatiquement √† des intervalles sp√©cifi√©s, mais √©galement par commande √† partir du pipeline d'int√©gration continue et de livraison CI / CD.  De plus, la "machine √† remonter le temps" offre: <br><br><ul><li>  Journalisation incr√©mentielle de type GitHub des espaces de noms et des environnements d'application. </li><li>  Restauration simple de l'application. </li><li>  Contr√¥le de version des configurations de cloud et de conteneur. </li><li>  Gestion automatis√©e du cycle de vie des donn√©es. </li><li>  Automatisation de la gestion des infrastructures sous forme de code (IaC). </li><li>  Gestion automatis√©e des √©tats IaC. </li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xd/7h/g3/xd7hg3diolurvskvlbmee9yvpry.png"></div><br><br>  Avec Appranix, vous pouvez organiser la protection et la r√©cup√©ration au niveau de l'application enti√®rement pour des sc√©narios tels que l'ing√©nierie du chaos, la reprise apr√®s sinistre, la protection contre l'extorsion et la continuit√© des activit√©s.  Nous ne nous attarderons pas l√†-dessus en d√©tail et examinerons plus en d√©tail comment utiliser Appranix pour migrer d'OpenShift 3 vers OpenShift 4. <br><br><h3>  Comment migrer OpenShift 3 vers OpenShift 4 √† l'aide de la plateforme de fiabilit√© de site Appranix </h3><br>  Le processus comprend trois √©tapes: <br><br><ol><li>  Nous configurons OpenShift 3 et OpenShift 4 pour d√©tecter automatiquement tous les composants √† migrer. </li><li>  Cr√©ez des strat√©gies et d√©finissez des espaces de noms pour la migration. </li><li>  Restaurez tous les espaces de noms sur OpenShift 4 en un seul clic. </li></ol><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/zu/zn/wkzuzn5osjn_azedy8xs4l52jcg.png"></div><br><br><h3>  Configurer les clusters OpenShift 3 et 4 pour la d√©couverte automatique </h3><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dw/qm/pr/dwqmprsrwpxji6d_-czjhw481hk.png"></div><br><br>  Appranix pense que vous avez d√©j√† des clusters OpenShift 3 et OpenShift 4. Si vous n'avez pas encore de clusters OpenShift 4, cr√©ez-les √† l'aide de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.google.com/url%3Fq%3D">documentation Red Hat sur le d√©ploiement d'OpenShift 4</a> .  La configuration des clusters principal (primaire) et cible (cible) dans Appranix est la m√™me et ne n√©cessite que quelques √©tapes. <br><br><h3>  Installez l'Appranix Controller Agent pour la d√©tection de cluster </h3><br>  Pour d√©tecter les ressources du cluster, vous avez besoin d'un petit agent de contr√¥leur side-car.  Pour le d√©ployer, copiez et collez simplement la commande curl appropri√©e, <b>comme indiqu√© ci-dessous</b> .  Une fois l'agent install√© dans OpenShift 3 et OpenShift 4, Appranix d√©tectera automatiquement toutes les ressources du cluster √† migrer, y compris les espaces de noms, les d√©ploiements, les pods, les services, ainsi que les h√¥tes avec d'autres ressources. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sa/1r/mo/sa1rmoun3xmjxed0m9bwvu4_9aw.png"></div><br><br>  Migration de grandes applications distribu√©es <br>  Nous allons maintenant examiner un exemple de transfert d'une application de microservice SockShop distribu√©e d'OpenShift 3 vers OpenShift 4 sans efforts inutiles (cliquez ici pour une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.google.com/url%3Fq%3D">description d√©taill√©e de cette application et de son architecture de microservice</a> ).  Comme vous pouvez le voir sur la <b>figure ci-dessous</b> , l'architecture SockShop contient de nombreux composants. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5r/yl/tw/5ryltwxb4gxbngdfv-xuyzw3yrg.png"></div><br><br>  Appranix d√©couvre toutes les ressources pour lesquelles il est n√©cessaire d'assurer la protection et la migration vers OpenShift 4, y compris les PoD, les d√©ploiements, les services et les configurations de cluster. <br><br><h3>  OpenShift 3 avec une application SockShop en cours d'ex√©cution </h3><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wm/0s/co/wm0sco2xwpbka7gywsnuxsiy0yc.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cu/j4/nv/cuj4nvhk6pv-o-wldjcntibyqco.png"></div><br><br><h3>  Cr√©er des politiques de protection pour la migration </h3><br>  Les politiques peuvent √™tre d√©finies de mani√®re flexible en fonction de la mani√®re dont la migration doit √™tre effectu√©e.  Par exemple, bas√© sur plusieurs crit√®res ou sauvegarde une fois par heure. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/uy/vx/qcuyvxfrnonakkuq8adjwvuel8m.png"></div><br><br><h3>  Migrer plusieurs clusters OpenShift 3 √† l'aide de plans de protection </h3><br>  Selon les fonctionnalit√©s de l'application ou de l'espace de noms, des strat√©gies peuvent √™tre appliqu√©es aux clusters OpenShift 3 qui sont ex√©cut√©s une fois par heure, une fois par semaine ou m√™me une fois par mois. <br><br>  Appranix vous permet de migrer tous les espaces de noms de cluster vers OpenShift 4, ou uniquement les espaces s√©lectionn√©s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fl/up/ky/flupkycoryo8ss89whw9vc4ikt8.png"></div><br><br><h3>  Migrez vers OpenShift 4 en un clic </h3><br>  La migration est la restauration des espaces de noms s√©lectionn√©s vers le cluster OpenShift 4. Cette op√©ration est effectu√©e en un clic.  Appranix lui-m√™me fait tout le travail de collecte de donn√©es sur la configuration et les ressources de l'environnement source, puis les restaure ind√©pendamment sur la plate-forme OpenShift 4. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/27/w6/ia27w6jpd-bviftdl2q7bxlotbs.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o0/_p/wb/o0_pwbi4bwbmllelf8brs6qodqu.png"></div><br><br><h3>  V√©rification des applications apr√®s la migration vers OpenShift 4 </h3><br>  Connectez-vous au cluster OpenShift 4, mettez √† niveau les projets et v√©rifiez que toutes les applications et tous les espaces de noms sont en ordre.  R√©p√©tez la proc√©dure de migration pour les autres espaces de noms, en cr√©ant de nouveaux plans de protection ou en modifiant ceux existants. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/t3/7l/btt37li4qhn9vuml6hm_7brshc8.png"></div><br><br><h3>  Lancer des applications migr√©es sur OpenShift 4 </h3><br>  Apr√®s avoir migr√© des applications √† l'aide de la proc√©dure de r√©cup√©ration Appranix, il est important de ne pas oublier de configurer les routes - elles doivent indiquer OpenShift 4. Il est possible qu'avant de transf√©rer compl√®tement la production depuis OpenShift 3, vous souhaitiez effectuer un test de r√©cup√©ration.  Lorsque plusieurs applications en cours d'ex√©cution apparaissent dans OpenShift 4 dans leurs espaces de noms respectifs, il devient n√©cessaire de migrer d'autres applications √† l'aide de ce processus. <br><br>  Apr√®s la migration de tous les espaces de noms, vous pouvez prot√©ger tous les clusters OpenShift pour une reprise apr√®s sinistre continue, une protection contre l'extorsion, pour assurer la continuit√© des activit√©s ou pour une migration ult√©rieure, car Appranix Site Reliability Automation se met √† jour automatiquement √† mesure que de nouvelles versions d'OpenShift sont publi√©es. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w1/cj/js/w1cjjsbaz7zet7vsodrawjy1vrg.png"></div><br><br><h3>  Total </h3><br>  OpenShift 4 est un grand pas en avant, principalement en raison de la nouvelle architecture inchang√©e et du mod√®le de plate-forme op√©rateur pour automatiser les configurations complexes d'applications et de plates-formes fonctionnant dans des environnements de cluster.  Appranix offre aux utilisateurs d'OpenShift un moyen simple et pratique de passer √† OpenShift 4 avec leur solution de reprise apr√®s sinistre bas√©e sur le cloud, Site Reliability Platform. <br><br>  <b>Appranix peut √™tre utilis√© directement √† partir du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.google.com/url%3Fq%3D">catalogue de conteneurs Red Hat</a> .</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463763/">https://habr.com/ru/post/fr463763/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463751/index.html">iOS 13: ce dont vous avez besoin et ce que vous n'avez absolument pas besoin de faire lors du d√©veloppement d'un nouvel OS</a></li>
<li><a href="../fr463753/index.html">PVS-Studio visite Apache Hive</a></li>
<li><a href="../fr463755/index.html">La diff√©rence entre ¬´juin¬ª, ¬´moyen¬ª et ¬´senior¬ª. Et que faire pour monter d'un niveau</a></li>
<li><a href="../fr463759/index.html">PVS-Studio visite Apache Hive</a></li>
<li><a href="../fr463761/index.html">Framework de microservice PHP - Swoft</a></li>
<li><a href="../fr463765/index.html">Slurm DevOps: pourquoi nous ne discuterons pas de la philosophie de DevOps et de ce qui se passera √† la place</a></li>
<li><a href="../fr463769/index.html">Mitap Netologii ¬´Carri√®re en science des donn√©es: du d√©butant au interm√©diaire¬ª</a></li>
<li><a href="../fr463771/index.html">[Peter] Rencontre JUG.ru avec Sebastian Dashner - Rendre les tests d'entreprise plus joyeux</a></li>
<li><a href="../fr463773/index.html">Comment la protection des enfants contre les informations est organis√©e - et l'histoire enchanteresse sur l'origine de ces informations (18+)</a></li>
<li><a href="../fr463775/index.html">Qui utilise le protocole d'authentification SAML 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>