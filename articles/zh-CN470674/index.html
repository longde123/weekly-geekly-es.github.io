<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙍🏾 😵 ⛳️ 在JeMalloc内部。 核心数据结构：配对堆和位图树 🥓 👸🏼 👩🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="分配器的主题经常出现在Internet上：的确，分配器是一种基石，是任何应用程序的核心。 在本系列文章中，我想详细讨论一个非常有趣且杰出的分配器-JeMalloc ，该分配器由Facebook支持和开发，并用于仿生[Android] lib C中。 

 在网络上，我找不到任何可以完全揭示此分配器灵...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>在JeMalloc内部。 核心数据结构：配对堆和位图树</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470674/"><img src="https://habrastorage.org/webt/mg/et/eh/mgeteheplu9ypws0y8c22pt-hwa.jpeg" alt="图片"><br><br> 分配器的主题经常出现在Internet上：的确，分配器是一种基石，是任何应用程序的核心。 在本系列文章中，我想详细讨论一个非常有趣且杰出的分配器<b>-JeMalloc</b> ，该分配器由Facebook支持和开发，并用于<b>仿生[Android] lib C中。</b> <br><br> 在网络上，我找不到任何可以完全揭示此分配器灵魂的细节，这最终影响了无法得出有关JeMalloc在解决特定问题中的适用性的任何结论的可能性。 大量材料问世，为了阅读不费力，我建议从以下基础知识开始：JeMalloc中使用的基本数据结构。 <br><br> 在猫之下，我正在谈论的是<b>Pairing Heap</b>和<b>Bitmap Tree</b> ，它们是JeMalloc的基础。 在这个阶段，我还没有涉及<b>多线程</b>和<b>细粒度锁定</b>的主题，但是，继续介绍一系列文章，我肯定会告诉您这些事情，因此，实际上会创建各种Exotics，尤其是以下所述的Exotics。 <br><a name="habracut"></a><br>  <b>Bitmap_s</b>是树状数据结构，可让您： <br><br><ul><li> 快速找到给定位序列中的第一个置位/未置位位。 </li><li> 在给定的位序列中，更改并获取具有索引<b>i</b>的位的值。 </li><li> 该树根据<b>n</b>位序列构建，并具有以下属性： </li><li> 树的基本单位是节点，节点的基本单位是位。 每个节点正好由<b>k</b>位组成。 选择节点的位，以便在给定的计算机上尽可能快速，高效地计算所选位范围上的逻辑运算。 在JeMalloc中，节点由<i>无符号long</i>类型表示。 </li><li> 树的高度是按级别测量的，对于n位序列，H = <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x65E5;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5FD7;</mo></mrow><mi>k</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.311ex" height="2.419ex" viewBox="0 -780.1 7022.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="548" y="0"></use><g transform="translate(1034,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6B" x="675" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="1980" y="0"></use><g transform="translate(2580,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">日</text></g><g transform="translate(3410,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">志</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6B" x="4240" y="0"></use><g transform="translate(4762,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="5592" y="0"></use><g transform="translate(6192,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mo>日</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>志</mo></mrow><mi>k</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ log_ {k} {n}日志k（n）</script> 水平。 </li><li> 树的每个级别由一系列序列表示 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>=</mo><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>g</mi><mi>e</mi><mi>r</mi><mi>C</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>H</mi><mo>&amp;#x2212;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="64.979ex" height="2.901ex" viewBox="0 -987.6 27977.1 1249" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="2092" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="2453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="3217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4E" x="3767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="4656" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-64" x="5141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="5665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="6131" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="6601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="7364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4C" x="7965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="8646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="9113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="9598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="10065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-3D" x="10641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-69" x="11697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="12043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="12643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="13005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-67" x="13471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="13952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="14418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-43" x="14870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="15630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-69" x="16097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="16442" y="0"></use><g transform="translate(16741,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="17821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="18371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-61" x="18823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="19352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="19786" y="0"></use><g transform="translate(20386,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6B" x="0" y="0"></use><g transform="translate(521,421)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-48" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-2212" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="1667" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="2100" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="2673" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="3124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="3576" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="4042" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="4643" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4C" x="5004" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="5686" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="6152" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="6638" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="7104" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-2B" x="7403" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-31" x="8181" y="0"></use></g></g><g transform="translate(27147,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>=</mo><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>g</mi><mi>e</mi><mi>r</mi><mi>C</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow><mrow class="MJX-TeXAtom-ORD"><msup><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>H</mi><mo>−</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> countOfNodesOnLevel = integerCeil（\ frac {n} {{k} ^ {H-currentLevel + 1}}）</script> 节点，相当于一个序列 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>B</mi><mi>i</mi><mi>t</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>=</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>&amp;#x2217;</mo><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="52.56ex" height="2.419ex" viewBox="0 -780.1 22630 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="2092" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="2453" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="3217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-42" x="3767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-69" x="4527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="4872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="5234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="5703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="6467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4C" x="7067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="7749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="8215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="8701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="9167" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-3D" x="9743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="10800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="11233" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="11719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="12291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="12892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="13253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="14017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4E" x="14567" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="15456" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-64" x="15941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="16465" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="16931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="17401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="18164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4C" x="18765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="19446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="19913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="20398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="20865" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-2217" x="21385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6B" x="22108" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>B</mi><mi>i</mi><mi>t</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>=</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi>O</mi><mi>f</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>O</mi><mi>n</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>∗</mo><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> countOfBitsOnLevel = countOfNodesOnLevel * k </script> 一点。 </li><li> 树的最高（根）级别由k位组成，最低的n位组成。 </li><li> 级别L的节点的每个位确定级别L-1的子节点的所有位的状态：如果某个位设置为忙，则子节点的所有位也都设置为忙，否则，子节点的位可能具有“忙”和“免费”状态。 </li></ul><br> 用两个数组表示bitmap_t是合理的：第一个数组的维度等于所有树节点的数量-存储树节点，第二个数组的树高维度-存储每个级别起点在树节点数组中的偏移量。 使用这种指定树的方法，根元素可以先走，然后依次走各层的节点。 但是，JeMalloc作者将根元素存储在数组的最后，并且在其前面是基础树级别的节点。 <br><br> 作为说明性示例，采用92位的序列，并且K = 32。 我们假设状态为“空闲”（用一个比特表示），状态“忙”（为零）。 还假设在原始位序列中，索引为1（从零开始，在图中从右到左）的位被设置为繁忙状态。 这样的位序列的bitmap_t如下图所示： <br><br><img src="https://habrastorage.org/webt/d5/ec/cu/d5eccu4zozzshx1upd47oummmxq.png" alt="图片"><br><br>  <i>从图中我们可以看到，生成的树只有两个级别。</i>  <i>根级别包含3个单位位，它指示相应位的每个子节点中是否存在空闲位和占用位。</i>  <i>在右下角，您可以在两个数组中看到“树”视图：所有树节点和节点数组中每个级别的偏移量。</i> <br><br> 假设bitmap_t由两个数组（一个数据数组和一个数据数组中的树级偏移量数组）表示，我们描述在给定bitmap_t中查找第一最低有效位的操作： <br><br><ul><li> 从根节点开始，我们对节点的第一个最低有效位执行搜索操作：为解决此问题，现代处理器提供了可以大大减少搜索时间的特殊指令。 我们将找到的结果保存在<i>FirstSetedBit</i>变量中。 </li><li> 在算法的每次迭代中，我们将维护找到的位的位置之和：countOfSettedBits + = FirstSetedBit </li><li> 使用上一步的结果，我们转到该节点的第一个最低有效位的子节点，然后重复上一步。 根据以下简单公式进行转换： <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>=</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>D</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy=&quot;false&quot;>[</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mi>O</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>A</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo stretchy=&quot;false&quot;>[</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo stretchy=&quot;false&quot;>]</mo><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mi>O</mi><mi>f</mi><mi>B</mi><mi>i</mi><mi>t</mi><mi>s</mi><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="77.653ex" height="2.66ex" viewBox="0 -832 33434 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="1006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="1457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="1909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="2375" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="2976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4E" x="3337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6F" x="4226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-64" x="4711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="5235" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-3D" x="5979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-62" x="7035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-69" x="7465" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="7810" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6D" x="8172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-61" x="9050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-70" x="9580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-44" x="10083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-61" x="10912" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="11441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-61" x="11803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-5B" x="12332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="12611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="12909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="13376" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="13861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="14328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="14626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="15390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="15940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="16491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="16960" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="17427" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-41" x="17788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="18539" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="18990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-61" x="19442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-79" x="19971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-5B" x="20469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-63" x="20747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="21181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="21753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-72" x="22205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="22656" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6E" x="23123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="23723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4C" x="24085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="24766" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-76" x="25233" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-65" x="25718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6C" x="26185" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-5D" x="26483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-2B" x="26984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="27985" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-75" x="28454" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-6D" x="29027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-4F" x="29905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-66" x="30669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-42" x="31219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-69" x="31979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-74" x="32324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMATHI-73" x="32686" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/470674/&amp;usg=ALkJrhiW2zE_rrS046drBAgPsGiDM1JGdw#MJMAIN-5D" x="33155" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>=</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>p</mi><mi>D</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy="false">[</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mi>O</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>A</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo stretchy="false">[</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>L</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo stretchy="false">]</mo><mo>+</mo><mi>s</mi><mi>u</mi><mi>m</mi><mi>O</mi><mi>f</mi><mi>B</mi><mi>i</mi><mi>t</mi><mi>s</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-4"> currentNode = bitmapData [levelOffsetArray [currentLevel] + sumOfBits] </script></li><li> 该过程一直持续到达到树的最低级别为止。  <i>countOfSettedBits-</i>输入位序列中所需位的数量。 </li></ul><br>  <b>Pairing Heap</b>是类似于堆的树数据结构，使您可以： <br><br><ul><li> 根据实现的不同，插入时间常数为<b>O（1）</b>且摊销成本为<b>O（log N）</b>或<b>O（1）</b>的元素。 </li><li> 至少搜索恒定时间<b>-O（1）</b> </li><li> 合并两个具有恒定时间复杂度的配对堆<b>-O（1）</b>和摊销成本<b>O（log N）</b>或<b>O（1）</b> -取决于实现 </li><li> 删除任意元素（尤其是最小元素），其临时复杂度估计值以<b>O（N）为单位</b> ，摊销的复杂度估计值为<b>O（log N）</b> </li></ul><br> 更正式地讲，配对堆是具有满足堆属性的专用根的任意树（每个顶点的键不小于/不大于其父键）。 <br> 一个典型的配对堆，其中子节点的值小于父节点的值（又名最小配对堆），看起来像这样： <br><br><img src="https://habrastorage.org/webt/zw/z5/vg/zwz5vgr9hqootyk8ox5pflxuehq.png" alt="图片"><br><br> 通常，在计算机内存中，配对堆是以完全不同的方式显示的：树的每个节点存储3个指针： <br><br><ul><li> 指向当前节点最左边的子节点的指针 </li><li> 指向节点左侧同级的指针 </li><li> 指向节点右兄弟的指针 </li></ul><br> 如果缺少任何指示的节点，则将相应的节点指针无效。 <br> 对于上图中显示的堆，我们得到以下表示： <br><br><img src="https://habrastorage.org/webt/cq/gn/ew/cqgnew5fhhsnqd92rsitcdcelh0.png" alt="图片"><br><br>  <i>在这里，指向最左边的子节点的指针由红色虚线箭头指示，指向该节点的右兄弟的指针为蓝色，而指向左兄弟的指针为灰色。</i>  <i>实心箭头以树状形式显示“配对堆”表示形式，这对于人是常见的。</i> <br><br> 请注意以下两个事实： <br><br><ul><li> 在堆的根部始终没有左右兄弟。 </li><li> 如果任何节点U具有指向最左侧子节点的非零指针，则该节点将成为U所有子节点的双向链接列表的“ Head”。此列表称为siblingList。 </li></ul><br> 接下来，我们在<b>Min Pairing-Heap中</b>列出主要运算的算法： <br><br><ul><li>  <b><i>将节点插入配对堆：</i></b> <br><br> 让我们给出一个配对堆，其中有一个根和一个值<b>{R，V_1}</b>以及一个节点<b>{U，V_2}</b> 。 然后，将U节点插入给定的Pairing Heap中时： <br><ul><li> 如果满足条件V_2 &lt;V_1：U成为堆的新根节点，则将根R“挤出”到其左子节点的位置。 同时，节点R的右兄弟成为其最旧的最左节点，并且指向节点R的最左节点的指针变为零。 </li><li> 否则：U成为R的根的最左子节点，而其最老的兄弟成为R的根的最左节点。 </li></ul></li><li>  <b><i>合并两个配对堆：</i></b> <br><br> 给出两个分别具有根和值<b>{R_1，V_1}</b> ， <b>{R_2，V_2}的</b>配对堆。 我们描述了一种将这些堆合并到结果配对堆中的算法： <br><ul><li> 选择根中具有最低值的堆。 让它成为一堆{R_1，V_1}。 </li><li> 从选定的堆中“分离”根R_1：为此，我们只需将其指向最左侧子节点的指针为空即可。 </li><li> 使用指向根R_1最左侧子节点的新指针，使根R_2成为根。 请注意，从现在开始，R_2失去根状态，并且是结果堆中的普通节点。 </li><li> 我们设置节点R_2的右兄弟：使用新值，使旧的指针（在归零之前）指向根R_1的最左子节点，对于R_1，分别更新指向左兄弟的指针。 </li></ul></li></ul><br> 考虑使用特定示例的合并算法： <br><br><img src="https://habrastorage.org/webt/ej/zp/0d/ejzp0df0krukqc15zs45hyzwbmo.png" alt="图片"><br><br>  <i>在这里，根为“ 4”的堆将与根为“ 1”（1 &lt;4）的堆连接起来，成为其最左侧的子节点。</i>  <i>指向节点'4'的右兄弟的指针以及指向节点'8'的左兄弟的指针被更新。</i> <br><br><ul><li>  <b><i>除去根（具有最小值的节点）配对堆：</i></b> <br><br> 有几种用于从配对堆中删除节点的算法，可以保证对O的复杂性进行摊销估计（对数N）。 我们描述了其中一种，称为多遍算法，并在JeMalloc中使用： <br><br><ul><li> 我们删除给定堆的根，仅保留其最左侧的子节点。 </li><li> 最左边的子节点形成父节点的所有子节点的双链表，在我们的例子中是先前删除的根。 我们将始终遍历此列表，直到将节点视为独立Pairing Heap的根，然后执行将列表的当前元素与下一个元素合并的操作，并将结果放入预先准备的FIFO队列中。 </li><li> 现在，FIFO队列已初始化，我们将对其进行迭代，执行将队列的当前元素与下一个元素合并的操作。 合并的结果放在队列的末尾。 </li><li> 我们重复上一步，直到队列中剩下一个元素：生成的配对堆。 </li></ul></li></ul><br> 上述过程的一个很好的例子： <br><br><img src="https://habrastorage.org/webt/fv/qv/u3/fvqvu3fctdbahz6vkm552rn5jwq.png" alt="图片"><br><br><ul><li>  <b><i>删除任意的非根节点配对堆：</i></b> <br><br> 将删除的节点视为原始堆的某些子树的根。 首先，按照前面描述的用于删除配对堆的根的算法，删除该子树的根，然后执行将结果树与原始树合并的过程。 </li><li>  <b><i>获取最小的配对堆元素：</i></b> <br><br> 只需返回堆根的值即可。 </li></ul><br> 但是，我们对Pairing Heap的了解并不止于此：Pairing Heap允许您不立即执行某些操作，而仅在需要时才执行。 换句话说，配对堆使您可以<i>“懒惰地”</i>执行操作，从而降低其中一些操作的摊销成本。 <br> 假设我们在配对堆中进行了K次插入和K次删除。 显然，只有当我们从堆中请求最小元素时，这些操作的结果才是必需的。 <br> 让我们考虑一下先前描述的操作的动作算法在其Lazy实现期间将如何改变： <br><br> 利用Kuchi根至少有两个空指针这一事实，我们将使用它们中的一个来表示插入到堆中的元素的双向链接列表（以下<b>称auxList</b> ）的头部，每个元素都将被视为独立Pairing Heap的根。 然后： <br><br><ul><li>  <b><i>配对堆中的惰性节点插入：</i></b> <br><br> 将指定的U节点插入配对堆{ <b>R_1</b> ， <b>V_1</b> }时，我们将其放在auxList中-列表开头之后： </li></ul><br><br><img src="https://habrastorage.org/webt/yi/tc/bq/yitcbqw5edmooxl351tn-qchd5g.png" alt="图片"><br><br><ul><li>  <b><i>两个配对堆的惰性合并：</i></b> <br><br> 延迟合并两个Pairing Heap，类似于Lazy节点插入，其中插入的节点是其中一个堆的根（双连接auxList的头）。 </li><li>  <b><i>懒惰地获得最小的配对堆元素：</i></b> <br><br> 当要求最小值时，我们通过auxList进入独立Pairing Heap的根列表，将列表中的元素与合并操作成对组合，然后将包含最小元素的根的值返回到结果Pairing Heap之一。 </li><li>  <i><b>延迟删除最小配对堆元素：</b></i> <br><br> 当提示您删除“配对堆”指定的最小元素时，首先我们找到包含最小元素的节点，然后将其从作为根的树中删除，然后将其子树插入主堆的auxList中。 </li><li>  <i><b>延迟删除任意非根配对池节点：</b></i> <br><br> 删除任意非根配对配对节点时，将从堆中删除该节点，并将其子节点插入到主堆的auxList中。 </li></ul><br> 实际上，使用惰性配对堆实现可以降低配对堆中插入和删除任意节点的摊销成本：从O（log N）到O（1）。 <br><br> 就是这样，下面您会找到有用的链接和资源的列表： <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">[0] JeMalloc Github页面</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">[1]配对堆的原始文章</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">[2]有关延迟实现配对堆的原始文章</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">[3]有关代码优化，C ++，Asm，“低级”的电报频道，仅此而已！</a> <br><br> 待续... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470674/">https://habr.com/ru/post/zh-CN470674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470662/index.html">佳能imagePRESS C910：强大的功能现在可以做得更多</a></li>
<li><a href="../zh-CN470664/index.html">英特尔推出了新的Xeon处理器系列。 它们比早期的型号便宜，但仍为14 nm</a></li>
<li><a href="../zh-CN470666/index.html">IT-Hogwarts：程序员学院hh.ru</a></li>
<li><a href="../zh-CN470670/index.html">如何创建智能电动自行车</a></li>
<li><a href="../zh-CN470672/index.html">服务台和CRM的实施。 13个主要的失败原因以及如何避免它们？</a></li>
<li><a href="../zh-CN470676/index.html">解决算法问题：预订酒店的可能性</a></li>
<li><a href="../zh-CN470680/index.html">最佳游戏本地化语言</a></li>
<li><a href="../zh-CN470684/index.html">没有工作经验的简历写什么</a></li>
<li><a href="../zh-CN470686/index.html">智慧城市的技术。 圣彼得堡会成为第一个方便盲人的大都市吗？</a></li>
<li><a href="../zh-CN470688/index.html">关于VMworld 2019的了解</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>