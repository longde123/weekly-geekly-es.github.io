<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇ üë®üèª‚Äçüöí ‚ÜôÔ∏è Automatisierung f√ºr die Kleinsten. Hinweise. RESTful API ü•™ üêò üêò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist einer der versprochenen Kurznotizen in der Artikelserie Automation For The Smallest . 
 Da die Hauptmethode f√ºr die Interaktion mit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisierung f√ºr die Kleinsten. Hinweise. RESTful API</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485618/">  Dieser Artikel ist einer der versprochenen Kurznotizen in der Artikelserie <a href="https://habr.com/ru/search/%3Fq%3D%255B%25D0%25B0%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F%2520%25D0%25B4%25D0%25BB%25D1%258F%2520%25D1%2581%25D0%25B0%25D0%25BC%25D1%258B%25D1%2585%2520%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D1%258C%25D0%25BA%25D0%25B8%25D1%2585%255D%26target_type%3Dposts">Automation For The Smallest</a> . <br>  Da die Hauptmethode f√ºr die Interaktion mit dem IPAM-System die RESTful-API ist, habe ich mich dazu entschlossen, separat dar√ºber zu sprechen. <br><br><hr><br>  Ich preise Architekten der modernen Welt - wir haben standardisierte Schnittstellen.  Ja, es gibt viele von ihnen - das ist ein Minus, aber sie sind es - das ist ein Plus. <br><br>  Diese Schnittstellen haben den Namen API - Application Programming Interface erhalten. <br><br>  Eine dieser Schnittstellen ist die RESTful-API, die f√ºr die Arbeit mit NetBox verwendet wird. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/639/c1e/e86/639c1ee8692aed286b99deeb01796e89.svg" width="800"><br><br>  Wenn es sehr einfach ist, bietet die API dem Client eine Reihe von Tools, mit denen er den Server verwalten kann.  Und der Client kann im Wesentlichen alles sein: ein Webbrowser, eine Befehlskonsole, eine vom Hersteller entwickelte Anwendung oder jede andere Anwendung, die Zugriff auf die API hat. <br><br>  Im Falle von NetBox k√∂nnen Sie dem Ger√§t beispielsweise auf folgende Weise ein neues Ger√§t hinzuf√ºgen: Senden Sie √ºber einen Webbrowser eine Anfrage in der Konsole, verwenden Sie Postman, greifen Sie auf die Anforderungsbibliothek in Python zu, verwenden Sie das Pynetbox-SDK oder rufen Sie Swagger auf. <br><br>  Sobald ein einzelnes Interface geschrieben wurde, muss der Hersteller f√ºr immer nicht mehr mit jedem neuen Client absprechen, wie er es verbindet (obwohl dies nur ein bisschen gerissen ist). <br><a name="habracut"></a><br><h1>  Inhalt </h1><br><ul><li>  REST, RESTful, API </li><li>  HTTP-Nachrichtenstruktur <br><ul><li>  Startzeile </li><li>  √úberschriften </li><li>  Der Hauptteil der HTTP-Nachricht </li></ul><br></li><li>  Methoden <br><ul><li>  HTTP GET </li><li>  HTTP POST </li><li>  HTTP PUT </li><li>  HTTP PATCH </li><li>  HTTP L√ñSCHEN </li></ul><br></li><li>  M√∂glichkeiten zum Arbeiten mit der RESTful-API <br><ul><li>  Curl </li><li>  Brieftr√§ger </li><li>  Python + Anfragen </li><li>  Pynebtbox SDK </li><li>  Prahlerei </li></ul><br></li><li>  Kritik an REST und Alternativen </li><li>  N√ºtzliche Links </li></ul><br><h1>  REST, RESTful, API </h1><br>  Im Folgenden werde ich sehr vereinfacht beschreiben, was REST ist. <br><br>  Zun√§chst ist die <b>RESTful-API</b> genau die REST-basierte Interaktionsschnittstelle, w√§hrend <b>REST</b> ( <b>REpresentational State Transfer</b> ) selbst eine Reihe von Einschr√§nkungen darstellt, die zum Erstellen von WEB-Diensten verwendet werden. <br><br>  Es ist m√∂glich, genau zu lesen, welche Einschr√§nkungen in <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" rel="nofollow">Kapitel 5 der Dissertation von Roy Fielding, Architekturstile und Entwurf netzwerkbasierter Softwarearchitekturen zu finden sind</a> .  Lassen Sie mich nur die drei wichtigsten (aus meiner Sicht) nennen: <br><br><ol><li>  Die REST-Architektur verwendet das Client-Server-Interaktionsmodell. </li><li>  Jede REST-Anforderung enth√§lt alle f√ºr ihre Ausf√ºhrung erforderlichen Informationen.  Das hei√üt, der Server sollte sich an keine fr√ºheren Client-Anforderungen erinnern, die, wie Sie wissen, durch das Wort Stateless gekennzeichnet sind - wir speichern keine Statusinformationen. </li><li>  Einheitliche Schnittstelle.  Die Implementierung der Anwendung unterscheidet sich von dem Dienst, den sie bereitstellt.  Das hei√üt, der Benutzer wei√ü, was er tut und wie er damit umgehen soll, aber wie er es tut, spielt keine Rolle.  Wenn Sie die Anwendung √§ndern, bleibt die Benutzeroberfl√§che unver√§ndert, und die Clients m√ºssen nicht angepasst werden. </li></ol><br>  WEB-Dienste, die alle Prinzipien von REST erf√ºllen, werden als <b>RESTful WEB-Dienste bezeichnet</b> . <br><br>  Die API, die RESTful-WEB-Dienste bereitstellt, wird als RESTful-API bezeichnet. <br><br>  REST ist kein Protokoll, sondern der sogenannte Architekturstil (einer von).  REST wurde mit HTTP von Roy Fielding entwickelt und sollte <b>HTTP 1.1</b> als Transport verwenden. <br><br>  Zieladresse (oder mit anderen Worten - ein Objekt oder auf andere Weise - ein Endpunkt) - dies ist unsere √ºbliche <a href="https://ru.wikipedia.org/wiki/URI" rel="nofollow"><b>URI</b></a> . <br><br>  Das Format der √ºbertragenen Daten ist <b>XML</b> oder <b>JSON</b> . <br><blockquote>  F√ºr diese Artikelserie zu linkmeup wurde eine schreibgesch√ºtzte Bereitstellung bereitgestellt (f√ºr Sie, liebe Leser). NetBox-Installation: <a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru</a> : 45127. <br><br>  Leserechte sind nicht erforderlich. Wenn Sie jedoch versuchen m√∂chten, mit einem Token zu lesen, k√∂nnen Sie <i>Folgendes</i> verwenden: <i>Token-API: 90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8</i> . <br></blockquote>  Lassen Sie uns eine Anfrage zum Spa√ü machen: <br><br><pre><code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN 90a22967d0bc4bdcd8ca47ec490bbf0b0cb2d9c8"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ http://netbox.linkmeup.ru:45127/api/dcim/devices/1/</code> </pre> <br>  Mit dem Dienstprogramm <b>curl</b> <b><a href="http://netbox.linkmeup.ru/" rel="nofollow">erstellen</a></b> wir ein <b>GET-</b> Objekt unter <b><a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru</a> : 45127 / api / dcim / devices / 1 /</b> mit einer Antwort im <b>JSON-Format</b> und einem Einzug von <b>4</b> Leerzeichen. <br><br>  Oder etwas akademischer: GET gibt das typisierte <b>Ger√§teobjekt zur√ºck</b> , das ein Parameter des <b>DCIM-</b> Objekts ist. <br><br>  Diesen Wunsch k√∂nnen Sie auch erf√ºllen - kopieren Sie ihn einfach auf Ihr Terminal. <br><blockquote>  Die URL, auf die wir in der Anfrage verweisen, hei√üt <b>Endpoint</b> .  In gewissem Sinne ist dies das letzte Objekt, mit dem wir interagieren werden. <br>  Im Falle von netbox kann hier beispielsweise eine Liste aller Endpunkte abgerufen <a href="http://netbox.linkmeup.ru:45127/api/docs/" rel="nofollow">werden</a> . <br></blockquote><blockquote>  Und achten Sie auf das <b>/</b> -Zeichen am Ende der URL - es ist <b>erforderlich</b> . <br></blockquote>  Folgendes erhalten wir als Antwort: <br><br><pre> <code class="bash hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg-host-0"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg-host-0"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 4, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-types/4/"</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 4, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/manufacturers/4/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hypermacro"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"hypermacro"</span></span> }, <span class="hljs-string"><span class="hljs-string">"model"</span></span>: <span class="hljs-string"><span class="hljs-string">"Server"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"server"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hypermacro Server"</span></span> }, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/device-roles/1/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Server"</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"server"</span></span> }, <span class="hljs-string"><span class="hljs-string">"tenant"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"serial"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"asset_tag"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 6, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/sites/6/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"slug"</span></span>: <span class="hljs-string"><span class="hljs-string">"mlg"</span></span> }, <span class="hljs-string"><span class="hljs-string">"rack"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru/api/dcim/racks/1/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"A"</span></span> }, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: 41, <span class="hljs-string"><span class="hljs-string">"face"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"front"</span></span>, <span class="hljs-string"><span class="hljs-string">"label"</span></span>: <span class="hljs-string"><span class="hljs-string">"Front"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 0 }, <span class="hljs-string"><span class="hljs-string">"parent_device"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"active"</span></span>, <span class="hljs-string"><span class="hljs-string">"label"</span></span>: <span class="hljs-string"><span class="hljs-string">"Active"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 1 }, <span class="hljs-string"><span class="hljs-string">"primary_ip"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"primary_ip4"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"primary_ip6"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"cluster"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"virtual_chassis"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"vc_position"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"vc_priority"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"comments"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"local_context_data"</span></span>: null, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"custom_fields"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"config_context"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"created"</span></span>: <span class="hljs-string"><span class="hljs-string">"2020-01-14"</span></span>, <span class="hljs-string"><span class="hljs-string">"last_updated"</span></span>: <span class="hljs-string"><span class="hljs-string">"2020-01-14T18:39:01.288081Z"</span></span> }</code> </pre><br>  Dies ist JSON (wie von uns angefordert), das das Ger√§t mit der ID 1 beschreibt: Wie hei√üt es, mit welcher Rolle, welchem ‚Äã‚ÄãModell, wo steht es usw. <br><br>  Dies sieht aus wie eine HTTP-Anfrage: <br><br><pre> <code class="bash hljs"> GET /api/dcim/devices/1/ HTTP/1.1 Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br><br>  So wird die Antwort aussehen: <br><pre> <code class="bash hljs"> HTTP/1.1 200 OK Server: nginx/1.14.0 (Ubuntu) Date: Tue, 21 Jan 2020 15:14:22 GMT Content-Type: application/json Content-Length: 1638 Connection: keep-alive Data</code> </pre> <br>  <a href="http_get_devices.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Lassen Sie uns nun herausfinden, was wir getan haben. <br><br><hr><br><h1>  HTTP-Nachrichtenstruktur </h1><br>  Eine HTTP-Nachricht besteht aus drei Teilen, von denen nur der erste erforderlich ist. <br><br><ul><li>  Startzeile </li><li>  √úberschriften </li><li>  Nachrichtentext </li></ul><br><h2>  Startzeile </h2><br>  Die Startzeilen der HTTP-Anforderung und -Antwort sehen unterschiedlich aus. <br><br><h4>  HTTP-Anfrage </h4><br><pre> <code class="bash hljs">METHOD URI HTTP_VERSION</code> </pre> <br><blockquote>  <b>Die Methode</b> bestimmt, welche Aktion der Client ausf√ºhren m√∂chte: Daten empfangen, ein Objekt erstellen, aktualisieren, l√∂schen. <br>  <b>URI</b> - Die ID der Ressource, auf die der Client zugreift, oder mit anderen Worten, der Pfad zur Ressource / zum Dokument. <br>  <b>HTTP_VERSION</b> ist die jeweilige HTTP-Version.  F√ºr REST ist es heute immer 1.1. <br></blockquote>  Ein Beispiel: <br><br><pre> <code class="bash hljs">GET /api/dcim/devices/1/ HTTP/1.1</code> </pre> <br><br><h4>  HTTP-Antwort </h4><br><pre> <code class="bash hljs">HTTP_VERSION STATUS_CODE REASON_PHRASE</code> </pre> <br><blockquote>  <b>HTTP_VERSION</b> - HTTP-Version (1.1). <br>  <b>STATUS_CODE</b> - drei Ziffern des Statuscodes (200, 404, 502 usw.) <br>  <b>REASON_PHRASE</b> - Erl√§uterung (OK, NOT FOUND, BAD GATEWAY usw.) <br></blockquote><br>  Ein Beispiel: <br><br><pre> <code class="bash hljs">HTTP/1.1 200 OK</code> </pre> <br><h2>  √úberschriften </h2><br>  Die Header √ºbergeben die Parameter f√ºr diese HTTP-Transaktion. <br><br>  Im obigen Beispiel in der HTTP-Anforderung waren dies beispielsweise: <br><br><pre> <code class="bash hljs"> Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br>  Sie zeigen das an <br><br><ol><li>  Wir <b>wenden</b> uns an den Host <b>netbox.linkmeup.ru:45127</b> , </li><li>  Die Anfrage wurde in <b>curl</b> generiert, </li><li>  Und wir akzeptieren Daten im <b>JSON-Format</b> mit einem Einzug von <b>4</b> . </li></ol><br>  Und hier sind die √úberschriften in der HTTP-Antwort: <br><br><pre> <code class="bash hljs"> Server: nginx/1.14.0 (Ubuntu) Date: Tue, 21 Jan 2020 15:14:22 GMT Content-Type: application/json Content-Length: 1638 Connection: keep-alive</code> </pre> <br>  Sie zeigen das an <br><br><ol><li>  Servertyp: <b>nginx unter Ubuntu</b> , </li><li>  Reaktionszeit </li><li>  Antwortdatenformat: <b>JSON</b> </li><li>  Antwortdatenl√§nge: <b>1638 Byte</b> </li><li>  Die Verbindung muss nicht geschlossen werden - es sind noch Daten vorhanden. </li></ol><br>  Wie Sie bereits bemerkt haben, sehen die √úberschriften wie Name: Wert-Paare aus, die durch ein ":" - Zeichen getrennt sind. <br><br>  <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" rel="nofollow">Eine vollst√§ndige Liste der m√∂glichen √úberschriften</a> . <br><br><h2>  Der Hauptteil der HTTP-Nachricht </h2><br>  Der K√∂rper wird verwendet, um die tats√§chlichen Daten zu √ºbertragen. <br><br>  In der HTTP-Antwort kann dies eine HTML-Seite oder in unserem Fall ein JSON-Objekt sein. <br><br>  Zwischen den Headern und dem Body muss mindestens eine Leerzeile sein. <br><br>  Bei Verwendung der GET-Methode in einer HTTP-Anforderung gibt es normalerweise keinen Body, da nichts zu √ºbertragen ist.  Aber der K√∂rper ist in der HTTP-Antwort. <br><br>  Bei POST ist der Body beispielsweise bereits in der Anfrage enthalten.  Sprechen wir √ºber die Methoden und sprechen wir jetzt. <br><br><hr><br><h1>  Methoden </h1><br>  Wie Sie bereits verstanden haben, verwendet HTTP Methoden, um mit WEB-Diensten zu arbeiten.  Gleiches gilt f√ºr die RESTful-API. <br><br>  M√∂gliche reale Szenarien werden durch den Begriff <b>CRUD - Erstellen, Lesen, Aktualisieren, L√∂schen beschrieben</b> . <br>  Hier ist eine Liste der beliebtesten HTTP-Methoden, die CRUD implementieren: <br><br><ul><li>  HTTP GET </li><li>  HTTP POST </li><li>  HTTP PUT </li><li>  HTTP L√ñSCHEN </li><li>  HTTP PATCH </li></ul><br>  Methoden werden auch als <b>Verben bezeichnet</b> , da sie angeben, welche Aktion ausgef√ºhrt wird. <br><br>  <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" rel="nofollow">Vollst√§ndige Liste der Methoden</a> . <br><br>  Schauen wir uns jeden einzelnen anhand des NetBox-Beispiels an. <br><br><h2>  HTTP GET </h2><br>  Dies ist eine Methode, um Informationen zu erhalten. <br><br>  So nehmen wir zum Beispiel die Liste der Ger√§te weg: <br><br><pre> <code class="bash hljs">curl -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ http://netbox.linkmeup.ru:45127/api/dcim/devices/</code> </pre> <br>  Die Methode GET ist <b>sicher,</b> da sie keine Daten √§ndert, sondern nur fragt. <br><br>  Es ist aus der Sicht <b>idempotent,</b> dass dieselbe Abfrage immer dasselbe Ergebnis liefert (bis sich die Daten selbst ge√§ndert haben). <br><br>  Bei GET gibt der Server eine Nachricht mit dem HTTP-Code und dem Antworttext ( <b>Antwortcode</b> und <b>Antworttext</b> ) zur√ºck. <br><br>  Das hei√üt, wenn alles in Ordnung ist, lautet der Antwortcode 200 (OK). <br>  Wird die URL nicht gefunden, 404 (NOT FOUND). <br>  Wenn etwas mit dem Server oder den Komponenten selbst nicht stimmt, kann dies 500 (SERVER ERROR) oder 502 (BAD GATEWAY) sein. <br>  <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="nofollow">Alle m√∂glichen Antwortcodes</a> . <br><br>  Der Body wird im JSON- oder XML-Format zur√ºckgegeben. <br><br>  <a href="http_get_all_devices.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Lassen Sie uns noch ein paar Beispiele nennen.  Nun fordern wir Informationen zu einem bestimmten Ger√§t mit seinem Namen an. <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0"</span></span></code> </pre> <br>  Um die Suchbedingungen in der URI festzulegen, habe ich hier auch den Attribut des Objekts angegeben (den Parameter <b>name</b> und seinen Wert <b>mlg-leaf-0</b> ).  Wie Sie sehen, steht vor der Bedingung und nach dem Schr√§gstrich ein <b>"?"</b>  , und der Name und der Wert werden durch ein <b>"=" getrennt</b> . <br><br>  So sieht die Anfrage aus. <br><br><pre> <code class="bash hljs"> GET /api/dcim/devices/?name=mlg-leaf-0 HTTP/1.1 Host: netbox.linkmeup.ru:45127 User-Agent: curl/7.54.0 Accept: application/json; indent=4</code> </pre> <br>  <a href="http_get_device_by_name.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Wenn Sie einige Bedingungen angeben m√ºssen, sieht die Abfrage folgenderma√üen aus: <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?role=leaf&amp;site=mlg"</span></span></code> </pre> <br>  Hier haben wir alle <b>Blattger√§te</b> angefordert, die sich auf der <b>mlg-</b> Website befinden. <br>  Das hei√üt, die beiden Bedingungen sind durch das Zeichen <b>"&amp;"</b> voneinander getrennt. <br><br>  <a href="http_get_device_with_double_conditions.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Aus dem Neugierigen und Angenehmen - wenn Sie durch "&amp;" zwei Bedingungen mit demselben Namen setzen, dann wird zwischen ihnen tats√§chlich kein logisches "UND", sondern ein logisches "ODER" stehen. <br><br>  Das hei√üt, eine solche Abfrage gibt tats√§chlich zwei Objekte zur√ºck: mlg-leaf-0 und mlg-spine-0 <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?name=mlg-leaf-0&amp;name=mlg-spine-0"</span></span></code> </pre> <br>  <a href="http_get_device_with_or_operand.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Versuchen wir, auf eine nicht vorhandene URL zuzugreifen. <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/IDGAF/"</span></span></code> </pre> <br>  <a href="http_get_not_found.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br><hr><br><h2>  HTTP POST </h2><br>  POST wird verwendet, um ein neues Objekt in einer Sammlung von Objekten zu erstellen.  Oder in einer komplexeren Sprache: um eine neue untergeordnete Ressource zu erstellen. <br><br><blockquote>  Klarstellung von <a href="https://habr.com/ru/users/arthuriantech/" class="user_link">arthuriantech</a> : <br>  Einschlie√ülich, aber nicht beschr√§nkt auf.  Die POST-Methode dient dazu, Daten zur weiteren Verarbeitung auf den Server zu √ºbertragen. Sie wird f√ºr alle Aktionen verwendet, die nicht innerhalb von HTTP standardisiert werden m√ºssen.  Vor <a href="https://tools.ietf.org/html/rfc5789" rel="nofollow">RFC 5789 war</a> dies die einzige rechtliche M√∂glichkeit, teilweise √Ñnderungen vorzunehmen. <br>  <a href="https://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post" rel="nofollow">roy.gbiv.com/untangled/2009/it-is-okay-to-use-post</a> <br>  <a href="https://tools.ietf.org/html/rfc7231" rel="nofollow">tools.ietf.org/html/rfc7231#section-4.3.3</a> </blockquote><br><br>  Wenn also mehrere Ger√§te vorhanden sind, k√∂nnen Sie mit POST ein neues Ger√§teobjekt in Ger√§ten erstellen. <br><br>  W√§hlen Sie denselben Endpunkt aus und erstellen Sie mit POST ein neues Ger√§t. <br><br><pre> <code class="bash hljs">curl -X POST <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span>\ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\"}"</span></span></code> </pre> <br>  Hier wird bereits ein <b>Authorization-</b> Header angezeigt, der ein Token enth√§lt, das die Schreibanforderung autorisiert. Nach der Anweisung <b>-d</b> befindet sich JSON mit den Parametern des erstellten Ger√§ts: <br><br><pre> <code class="bash hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple russian girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: 1, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: 3, <span class="hljs-string"><span class="hljs-string">"rack"</span></span>: 3, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: 5, <span class="hljs-string"><span class="hljs-string">"face"</span></span>: <span class="hljs-string"><span class="hljs-string">"front"</span></span>}</code> </pre> <br><blockquote>  Ihre Anfrage wird nicht funktionieren, da das Token nicht mehr g√ºltig ist. Versuchen Sie nicht, in die NetBox zu schreiben. <br></blockquote>  Die Antwort enth√§lt eine HTTP-Antwort mit dem Code 201 (CREATED) und JSON im Nachrichtentext, wobei der Server alle Parameter zum erstellten Ger√§t zur√ºckgibt. <br><br><pre> <code class="bash hljs"> HTTP/1.1 201 Created Server: nginx/1.14.0 (Ubuntu) Date: Sat, 18 Jan 2020 11:00:22 GMT Content-Type: application/json Content-Length: 1123 Connection: keep-alive JSON</code> </pre> <br>  <a href="http_post_new_device.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br>  Bei einer neuen Anforderung mit der GET-Methode k√∂nnen Sie dies nun in der Ausgabe sehen: <br><br><pre> <code class="bash hljs">curl -X GET -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json; indent=4"</span></span> \ <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?q=russian"</span></span></code> </pre> <br><blockquote>  "Q" in NetBox erm√∂glicht es Ihnen, alle Objekte zu finden, die in ihrem Namen eine Zeile enthalten, die weiter geht. <br></blockquote>  POST ist offensichtlich <b>weder sicher noch idempotent</b> - es √§ndert wahrscheinlich die Daten, und eine doppelt ausgef√ºhrte Anforderung f√ºhrt entweder zur Erstellung des zweiten gleichen Objekts oder zu einem Fehler. <br><br><hr><br><h2>  HTTP PUT </h2><br>  Dies ist eine Methode zum √Ñndern eines vorhandenen Objekts.  Der Endpunkt f√ºr PUT sieht anders aus als f√ºr POST - er enth√§lt jetzt ein bestimmtes Objekt. <br><br>  PUT kann die Codes 201 oder 200 zur√ºckgeben. <br><br>  Ein wichtiger Punkt bei dieser Methode: Sie m√ºssen alle erforderlichen Attribute √ºbergeben, da PUT das alte Objekt ersetzt. <br><br>  Wenn wir also beispielsweise nur versuchen, das Attribut asset_tag zu unserem neuen Ger√§t hinzuzuf√ºgen, erhalten wir eine Fehlermeldung: <br><br><pre> <code class="bash hljs">curl -X PUT <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"asset_tag\": \"12345678\"}"</span></span></code> </pre> <br><pre> <code class="bash hljs">{<span class="hljs-string"><span class="hljs-string">"device_type"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>],<span class="hljs-string"><span class="hljs-string">"device_role"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>],<span class="hljs-string"><span class="hljs-string">"site"</span></span>:[<span class="hljs-string"><span class="hljs-string">"This field is required."</span></span>]}</code> </pre> <br>  Wenn Sie jedoch die fehlenden Felder hinzuf√ºgen, funktioniert alles: <br><br><pre> <code class="bash hljs">curl -X PUT <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"name\": \"just a simple russian girl\", \"device_type\": 1, \"device_role\": 1, \"site\": 3, \"rack\": 3, \"position\": 5, \"face\": \"front\", \"asset_tag\": \"12345678\"}"</span></span></code> </pre> <br>  <a href="http_put_asset_tag.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><blockquote>  Achten Sie hier auf die URL, die jetzt die ID des zu √§ndernden Ger√§ts enth√§lt ( <b>18</b> ). <br></blockquote><br><hr><br><h2>  HTTP PATCH </h2><br>  Diese Methode wird verwendet, um die Ressource teilweise zu √§ndern. <br>  Wat?  Sie fragen, aber was ist mit Put? <br><br>  PUT ist eine Methode, die urspr√ºnglich im Standard existierte und die das vollst√§ndige Ersetzen eines ver√§nderlichen Objekts beinhaltet.  Dementsprechend m√ºssen Sie in der PUT-Methode, wie ich oben geschrieben habe, auch die Attribute des Objekts angeben, die sich nicht √§ndern. <br><br>  Und PATCH wurde sp√§ter hinzugef√ºgt und erm√∂glicht es Ihnen, nur die Attribute anzugeben, die sich wirklich √§ndern. <br><br>  Zum Beispiel: <br><br><pre> <code class="bash hljs">curl -X PATCH <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/18/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">"{ \"serial\": \"BREAKINGBAD\"}"</span></span></code> </pre> <br>  Hier wird auch die Ger√§te-ID in der URL angegeben, es muss jedoch nur ein <b>serielles</b> Attribut ge√§ndert werden. <br><br>  <a href="http_patch_serial.pcapng" rel="nofollow">Sichern Sie die Transaktion</a> . <br><br><hr><br><h2>  HTTP L√ñSCHEN </h2><br>  Offensichtlich l√∂scht das Objekt. <br><br>  Ein Beispiel. <br><br><pre> <code class="bash hljs">curl -X DELETE <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span></code> </pre> <br>  Die DELETE-Methode ist aus der Sicht idempotent, dass eine wiederholte Abfrage nichts mehr in der Ressourcenliste √§ndert (sondern den Code 404 (NOT FOUND) zur√ºckgibt. <br><br><pre> <code class="bash hljs">curl -X DELETE <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/21/"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span></code> </pre> <br><pre> <code class="bash hljs">{<span class="hljs-string"><span class="hljs-string">"detail"</span></span>:<span class="hljs-string"><span class="hljs-string">"Not found."</span></span>}</code> </pre> <br><hr><br><h1>  M√∂glichkeiten zum Arbeiten mit der RESTful-API </h1><br>  Curl ist nat√ºrlich sehr praktisch f√ºr die tapferen CLI-Krieger, aber es gibt bessere Werkzeuge. <br><br><h2>  Brieftr√§ger </h2><br>  Mit Postman k√∂nnen Sie Abfragen in der grafischen Benutzeroberfl√§che erstellen, indem Sie Methoden, √úberschriften und Text ausw√§hlen und das Ergebnis in einer f√ºr Menschen lesbaren Form anzeigen. <br><br>  Dar√ºber hinaus k√∂nnen Abfragen und URIs gespeichert und sp√§ter an sie zur√ºckgegeben werden. <br><br>  <a href="https://www.getpostman.com/downloads/" rel="nofollow">Laden Sie Postman auf der offiziellen Website herunter</a> . <br><br>  Also k√∂nnen wir ein GET machen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b00/869/169/b00869169e3e64b427e224587da49e12.png" width="800"><br>  <i>Hier ist Token nur als Beispiel im GET angegeben.</i> <br><br>  Und so POST: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1b/91f/655/f1b91f655182e7780ee62d44e8e25ae9.png" width="800"><br><br>  Postman darf nur mit der RESTful-API verwendet werden. <br><blockquote>  Versuchen Sie beispielsweise nicht, NETCONF-XML wie zu Beginn meiner Automatisierungskarriere zu senden. <br></blockquote>  Einer der sch√∂nen Vorteile der angegebenen API ist, dass Sie alle Endpunkte und ihre Methoden als Sammlung in Postman importieren k√∂nnen. <br><br>  W√§hlen Sie dazu im Fenster <b>Importieren</b> (Datei-&gt; Importieren) die <a href="http://netbox.linkmeup.ru/" rel="nofollow">Option</a> <b>Aus Link</b> <a href="http://netbox.linkmeup.ru/" rel="nofollow">importieren</a> und f√ºgen Sie sie in das Fenster <a href="http://netbox.linkmeup.ru/" rel="nofollow">netbox.linkmeup.ru ein.</a> URL: 45127 / api / docs /? Format = openapi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9f/48e/2d1/f9f48e2d1923e88995301379e4888b6c.png" width="400"><br><br>  Dar√ºber hinaus finden Sie alles in den Sammlungen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eaa/616/c1a/eaa616c1adfcfacbaf164ea95531fd4e.png" width="200"><br><br><hr><br><br><h2>  Python + Anfragen </h2><br>  Aber selbst √ºber Postman werden Sie Ihre Produktionssysteme h√∂chstwahrscheinlich nicht verwalten.  Sicherlich werden Sie externe Anwendungen haben, die ohne Ihre Teilnahme mit ihnen interagieren m√∂chten. <br><br>  Ein Konfigurationsgenerierungssystem m√∂chte beispielsweise eine Liste der IP-Schnittstellen von NetBox abrufen. <br>  Python verf√ºgt √ºber eine wunderbare Bibliothek von <b>Anforderungen</b> , die die Arbeit √ºber HTTP implementieren. <br>  Ein Beispiel f√ºr das Anfordern einer Liste aller Ger√§te: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests HEADERS = {<span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>} NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> request_url = <span class="hljs-string"><span class="hljs-string">f"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{NB_URL}</span></span></span><span class="hljs-string">/api/dcim/devices/"</span></span> devices = requests.get(request_url, headers = HEADERS) print(devices.json())</code> </pre> <br>  F√ºgen Sie erneut ein neues Ger√§t hinzu: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests API_TOKEN = <span class="hljs-string"><span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> HEADERS = {<span class="hljs-string"><span class="hljs-string">'Authorization'</span></span>: <span class="hljs-string"><span class="hljs-string">f'Token </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{API_TOKEN}</span></span></span><span class="hljs-string">'</span></span>, <span class="hljs-string"><span class="hljs-string">'Content-Type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'Accept'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>} NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> request_url = <span class="hljs-string"><span class="hljs-string">f"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{NB_URL}</span></span></span><span class="hljs-string">/api/dcim/devices/"</span></span> device_parameters = { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple REQUESTS girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, } new_device = requests.post(request_url, headers = HEADERS, json=device_parameters) print(new_device.json())</code> </pre> <br><hr><br><h3>  Python + NetBox SDK </h3><br>  Im Falle von NetBox gibt es auch ein Python SDK - <a href="https://github.com/digitalocean/pynetbox" rel="nofollow">Pynetbox</a> , das alle NetBox-Endpunkte als Objekt und deren Attribute darstellt und die ganze Dirty-Arbeit f√ºr Sie <a href="https://github.com/digitalocean/pynetbox" rel="nofollow">erledigt</a> , URIs zu generieren und die Antwort zu analysieren, obwohl dies nat√ºrlich nicht kostenlos ist. <br><br>  Machen wir zum Beispiel dasselbe wie oben mit pynetbox. <br>  Liste aller Ger√§te: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pynetbox NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> nb = pynetbox.api(NB_URL) devices = nb.dcim.devices.all() print(devices)</code> </pre> <br>  Neues Ger√§t hinzuf√ºgen: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pynetbox API_TOKEN = <span class="hljs-string"><span class="hljs-string">"a9aae70d65c928a554f9a038b9d4703a1583594f"</span></span> NB_URL = <span class="hljs-string"><span class="hljs-string">"http://netbox.linkmeup.ru:45127"</span></span> nb = pynetbox.api(NB_URL, token = API_TOKEN) device_parameters = { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"just a simple PYNETBOX girl"</span></span>, <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"device_role"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"site"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, } new_device = nb.dcim.devices.create(**device_parameters) print(new_device)</code> </pre> <br>  <a href="https://pynetbox.readthedocs.io/en/latest/" rel="nofollow">Pynetbox-Dokumentation</a> <br><br><hr><br><h2>  Prahlerei </h2><br>  Was dank des letzten Jahrzehnts noch wert ist, sind die API-Spezifikationen.  Wenn Sie <a href="http://netbox.linkmeup.ru:45127/api/docs/" rel="nofollow">diesem Pfad</a> folgen, gelangen Sie zur Swagger UI - Netbox API-Dokumentation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5c/ec6/1db/c5cec61db67db108cc2fce2ba0492d3b.png" width="800"><br><br>  Diese Seite listet alle Endpunkte, Methoden zum Arbeiten mit ihnen, m√∂gliche Parameter und Attribute auf und gibt an, welche von ihnen erforderlich sind.  Au√üerdem werden die erwarteten Antworten beschrieben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bc/886/8e6/4bc8868e6cfae94427e648abd0a1cd7b.png" width="800"><br><br>  Auf derselben Seite k√∂nnen Sie interaktive Abfragen durchf√ºhren, indem Sie auf <b>Ausprobieren</b> klicken. <br><blockquote>  Aus irgendeinem Grund verwendet swagger den Namen des Servers ohne Port als Basis-URL, sodass die Funktion "Ausprobieren" in meinen Swagger-Beispielen nicht funktioniert.  Aber Sie k√∂nnen es auf Ihrer eigenen Installation versuchen. <br></blockquote>  Wenn Sie auf "Swagger <b>ausf√ºhren"</b> klicken, generiert die Benutzeroberfl√§che eine Curl-Zeichenfolge, mit der √ºber die Befehlszeile eine √§hnliche Anforderung gestellt werden kann. <br><br>  In der Swagger-Benutzeroberfl√§che k√∂nnen Sie sogar ein Objekt erstellen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47b/311/74f/47b31174f7b1b8564b2aadea91db89bb.png" width="800"><br><br>  Dazu gen√ºgt es, ein autorisierter Benutzer mit den erforderlichen Rechten zu sein. <br><br>  Was wir auf dieser Seite sehen, ist die Swagger-Benutzeroberfl√§che, eine Dokumentation, die basierend auf der API-Spezifikation erstellt wurde. <br><br>  Angesichts der Trends in der Microservice-Architektur wird es immer wichtiger, eine standardisierte API f√ºr die Interaktion zwischen Komponenten zu haben, deren Endpunkte und Methoden f√ºr die Person und die Anwendung leicht zu bestimmen sind, ohne den Quellcode oder die PDF-Dokumentation zu durchsuchen. <br><br>  Daher folgen Entwickler heutzutage zunehmend dem <a href="https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694" rel="nofollow">API-First-</a> Paradigma, wenn sie zuerst √ºber die API nachdenken und erst dann √ºber die Implementierung. <br>  Die API wird zuerst in diesem Entwurf angegeben. Anschlie√üend werden die Dokumentation, die Clientanwendung und der Serverteil daraus <b>generiert</b> , und es sind Tests erforderlich. <br><br>  Swagger ist eine Framework- und Spezifikationssprache (die jetzt in OpenAPI 2.0 umbenannt wurde), mit der Sie diese Aufgabe implementieren k√∂nnen. <br>  Ich werde nicht weiter darauf eingehen. <br><br>  F√ºr mehr Details hier: <br><br><ul><li>  <a href="https://swagger.io/docs/specification/" rel="nofollow">Swagger-Website</a> </li><li>  <a href="https://justcodeit.ru/swagger-docs-dlya-api-na-laravel/" rel="nofollow">Anwendungsbeispiel</a> </li><li>  <a href="https://en.wikipedia.org/wiki/OpenAPI_Specification" rel="nofollow">Wiki √ºber Open API</a> </li></ul><br><hr><br><h1>  Kritik an REST und Alternativen </h1><br>  Da ist einer, ja.  Nicht alles in dieser Welt des Jahres 2000 ist schon so rosig. <br><br>  Da ich kein Experte bin, nehme ich nicht an, das Thema inhaltlich zu offenbaren, aber ich werde einen Link zu einem unbestreitbaren <a href="https://habr.com/ru/post/265845/">Artikel √ºber Habr√© geben</a> . <br><br>  Eine alternative Schnittstelle f√ºr das Zusammenspiel von Systemkomponenten ist heute gRPC.  Er prophezeite auch eine gro√üe Zukunft im Bereich neuer Ans√§tze f√ºr die Arbeit mit Netzwerkger√§ten.  Aber wir werden irgendwann in der Zukunft √ºber ihn sprechen, wenn er an der Reihe ist. <br><br>  Sie k√∂nnen auch einen Blick auf das vielversprechende <a href="https://habr.com/ru/post/326986/">GraphQL werfen</a> , aber auch hier m√ºssen wir <a href="https://habr.com/ru/post/326986/">vorerst</a> nicht damit arbeiten, so dass es f√ºr unabh√§ngige Studien bleibt. <br><br><hr><br><blockquote>  <b>Ist wichtig</b> <br>  Das Token a9aae70d65c928a554f9a038b9d4703a1583594f wurde nur zu Demonstrationszwecken verwendet und funktioniert nicht mehr. <br><br>  Die direkte Angabe von Tokens im Programmcode ist nicht akzeptabel und ich habe hier nur im Interesse der Vereinfachung der Beispiele gemacht. <br></blockquote><br><hr><br><h1>  N√ºtzliche Links </h1><br><ul><li>  <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm" rel="nofollow">Roy Fieldings urspr√ºnglicher Bericht</a> </li><li>  <a href="https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694" rel="nofollow">API zuerst</a> </li><li>  <a href="http-methods/" rel="nofollow">HTTP-Methoden</a> </li><li>  <a href="https://restfulapi.net/rest-architectural-constraints/" rel="nofollow">REST-Prinzipien</a> </li><li>  <a href="https://swagger.io/docs/specification/" rel="nofollow">Swagger-Website</a> </li><li>  <a href="https://justcodeit.ru/swagger-docs-dlya-api-na-laravel/" rel="nofollow">Swagger Beispiel</a> </li><li>  <a href="https://en.wikipedia.org/wiki/OpenAPI_Specification" rel="nofollow">Wiki √ºber OpenAPI</a> </li><li>  <a href="https://habr.com/ru/post/265845/">Kritik an REST</a> </li></ul><br><h1>  Vielen Dank </h1><br><ul><li>  Andrei Panfilov zum Korrekturlesen und Bearbeiten </li><li>  Alexander Fatin zum Korrekturlesen und Redigieren </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de485618/">https://habr.com/ru/post/de485618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de485606/index.html">Treiberfiltervorg√§nge in der Registrierung. √úbe</a></li>
<li><a href="../de485608/index.html">Microservices mit Spring Boot. Teil 4. Verwenden von Ribbon f√ºr den Lastenausgleich</a></li>
<li><a href="../de485610/index.html">Erstellen Sie eine Qt-Anwendung in WebAssembly unter Windows</a></li>
<li><a href="../de485612/index.html">Was hat mir ein Weltraumunfall als Entwickler beigebracht?</a></li>
<li><a href="../de485614/index.html">Rote Unternehmenskultur ist das Hauptproblem des russischen Gesch√§fts (Teil 3)</a></li>
<li><a href="../de485620/index.html">Joschkar-Ola im Allgemeinen eine IT-Stadt?</a></li>
<li><a href="../de485622/index.html">PostgreSQL-Sicherungswerkzeuge. Andrey Salnikov (Datenreiher)</a></li>
<li><a href="../de485624/index.html">Minecraft-Server: Windows vs Linux</a></li>
<li><a href="../de485632/index.html">√úberwachen der Kreditbewertung in Power BI</a></li>
<li><a href="../de485634/index.html">Das Dungeons and Dragons-Dashboard hat mir geholfen, Englisch zu lernen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>