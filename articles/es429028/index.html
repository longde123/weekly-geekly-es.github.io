<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游놄 游뱛游 游뛈 Korolev Medicina para la web 游꿇 游 游댁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace aproximadamente un a침o, se public칩 el art칤culo manifiesto de Nikita Prokopov sobre la decepci칩n en el software. A juzgar por los comentarios posi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Korolev Medicina para la web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429028/"><p>  Hace aproximadamente un a침o, se public칩 el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art칤culo manifiesto de</a> Nikita Prokopov sobre la decepci칩n en el software.  A juzgar por los comentarios positivos, los desarrolladores no son indiferentes a la calidad de sus productos.  쯈uiz치s es hora de comenzar a actuar? </p><br><p>  En este art칤culo quiero hablar sobre mi desarrollo, que, en mi opini칩n, puede curar los principales problemas de rendimiento de la web moderna y hacer que el usuario est칠 un poco m치s feliz.  Los problemas son: c칩digo JS pesado, alto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tiempo para comenzar a trabajar con la p치gina (TTI)</a> , alto consumo de memoria y procesador. </p><a name="habracut"></a><br><p>  Antes de seguir leyendo, siga el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> .  Intenta jugar un par de juegos.  Juega preferiblemente desde el escritorio. </p><br><h2 id="nemnogo-istorii">  Un poco de historia </h2><br><p> Desde el principio, el navegador web fue concebido como un cliente ligero para servidores web.  El navegador muestra las p치ginas de hipertexto que recibi칩 del servidor.  Simple y elegante  Como suele suceder, una hermosa idea se enfrenta a la realidad, y despu칠s de unos a침os, los fabricantes de navegadores han agregado soporte para el lenguaje de secuencias de comandos.  Al principio, solo serv칤a como decoraci칩n, y hasta mediados de la d칠cada de 2000, se consideraba una buena forma de hacer que las p치ginas web funcionaran sin el soporte de JS. </p><br><p>  Un enfoque moderno para el desarrollo de sitios web es el resultado del desarrollo de los requisitos de interactividad de la interfaz de usuario.  Las tareas para mejorar la interactividad recayeron en los hombros de los codificadores.  Esos a menudo no ten칤an las competencias y la autoridad para desarrollar una soluci칩n "de extremo a extremo".  Los dise침adores de dise침o aprendieron a escribir JS y se convirtieron en front-end.  La l칩gica comenz칩 a fluir gradualmente del servidor al cliente.  Es conveniente para el favorito escribir para el navegador, y el back-end es conveniente para no pensar en el usuario (darle mi JSON, y al menos la hierba no crece).  Hace solo dos a침os, hubo un gran inter칠s en la arquitectura sin servidor, donde se sugiri칩 que las aplicaciones JS trabajar칤an directamente con la base de datos y los buses de eventos. </p><br><p>  Actualmente, un "sitio web esf칠rico en el vac칤o" es una aplicaci칩n JS compleja y un servidor API simple con el que se comunica.  La l칩gica principal se ejecuta en un cliente grueso, el lado del servidor degenera en una capa simple de la base de datos. </p><br><p> La necesidad de mantener la l칩gica en el cliente crea problemas.  Si el servicio "despeg칩" y comenz칩 a ganar dinero, adem치s, en t칠rminos de productividad, solo empeorar치.  Los requisitos cambiar치n.  El equipo de desarrollo cambiar치.  Habr치 m치s y m치s c칩digo nuevo, y el c칩digo antiguo no se limpiar치.  La p치gina se hinchar치 de dependencias, cargar치 JSON sobre el prop칩sito del que nadie recuerda, pero da miedo eliminarlo, de repente algo se rompe.  Aparecer치n las tareas de fondo SetInterval, cada una de las cuales se realiza durante varios milisegundos por segundo, lo que despu칠s de un tiempo provocar치 frenos y calentar치 el <em>iPad</em> del desafortunado usuario hasta el punto de que pueda fre칤r huevos fritos en 칠l.  Termina con el hecho de que el front-end <em>quemado</em> llegar치 al gerente con una propuesta para reescribir todo desde cero en un nuevo marco.  El gerente se negar치, y el front-end comenzar치 a usar dos marcos juntos. </p><br><h2 id="kak-rabotaet-korolev">  쮺칩mo funciona Korolev? </h2><br><p>  Entonces, 쯤u칠 pasa si volvemos al punto del informe?  쮼l momento en que a alguien se le ocurri칩 la idea de actualizar el contenido sin volver a cargar la p치gina, y la inevitabilidad hist칩rica dio lugar a AJAX?  쯈u칠 sucede si deja todo en el servidor y crea un cliente ligero?  Los mejores sitios realizan la representaci칩n previa de la p치gina del servidor (SSR) para que el usuario vea la interfaz antes de que JS se cargue y comience.  Puede ir m치s all치 y dejar en el cliente solo el c칩digo responsable del procesamiento de E / S, dados los requisitos actuales de interactividad.  Los pensamientos sobre esto se extendieron al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto Korolev</a> . </p><br><p>  쮺칩mo funciona en el lado del cliente?  El usuario llega a la p치gina.  El servidor proporciona el HTML generado y un peque침o script (~ 6 Kbytes sin compresi칩n) que se conecta al servidor a trav칠s de un socket web.  Cuando un usuario dispara un evento (por ejemplo, un clic), el script lo env칤a al servidor.  Una vez procesado el evento, el servidor genera una lista de comandos de la forma "agregar un nuevo <code>&lt;div&gt;</code> all칤", "agregar una clase a dicho elemento", "eliminar tal y tal elemento".  El cliente aplica la lista de comandos al DOM.  Como tal, el trabajo con HTML no se produce: el script funciona directamente con el DOM, por lo que no debe preocuparse de que se restablezca el contenido del formulario o la posici칩n del desplazamiento. </p><br><p>  쯈u칠 est치 pasando en el servidor?  Cuando una solicitud de una p치gina proviene del navegador, Korolev crea una nueva sesi칩n.  Para la sesi칩n, se realiza el estado inicial, que se almacena en la memoria cach칠.  El HTML se genera a partir de este estado, que se entrega al cliente como respuesta a la solicitud.  Adem치s, el servidor guarda el "DOM virtual" en la sesi칩n.  Despu칠s de solicitar la p치gina, el servidor acepta la solicitud de abrir el socket web.  Korolev asocia un socket web abierto con una sesi칩n.  Cada evento proveniente del cliente puede cambiar el estado asociado con la sesi칩n.  Cada cambio de estado conduce a una llamada a la funci칩n de <code>render</code> , que forma un nuevo "DOM virtual", que se compara con la versi칩n anterior.  La comparaci칩n da como resultado una lista de comandos para enviar al cliente. </p><br><p>  쯈u칠 pasa en el c칩digo y jefe del desarrollador?  Lo anterior podr칤a recordarle a React, con la diferencia de que todo se ejecuta en el servidor.  En t칠rminos de enfoque de desarrollo, tambi칠n tenemos algo similar.  Por lo tanto, si trabaj칩 con React u otro "DOM virtual", el enfoque de la Reina le resultar치 familiar.  Si no est치 familiarizado con React, imagine que tiene datos que inserta en la plantilla.  Imagine que, seg칰n la plantilla, los controladores de eventos est치n dispersos y pueden cambiar los datos (pero no el DOM).  Cambias los datos, la p치gina se cambia a s칤 misma.  A Korolev se le ocurre c칩mo cambiar el DOM. </p><br><h2 id="proizvoditelnost">  Rendimiento </h2><br><p>  Hay dos preguntas populares sobre Korolev: "쯫 si los retrasos son altos" y "esto no cargar치 mi servidor"?  Ambas preguntas son muy razonables.  El programador front-end est치 acostumbrado a que su programa se ejecute en la m치quina local del usuario.  Esto significa que los cambios realizados se aplicar치n tan pronto como la m치quina JS termine de ejecutar el c칩digo y el navegador comience a procesar.  Mostr칠 espec칤ficamente un ejemplo de uso "a la velocidad m치xima" al principio.  Puede observar la demora solo si vino del otro lado del mundo (los servidores est치n ubicados en Mosc칰) o si se sent칩 en Internet a trav칠s de GPRS.  Bueno, o mi pat칠tico servidor virtual con un n칰cleo y 1 GB de RAM no pudo soportar el efecto habr. </p><br><p>  La pregunta sobre la carga del servidor generalmente la hacen los beckenders.  El motor de salida de cambios funciona muy r치pidamente: ~ 10 mil conclusiones por segundo para dos 치rboles arbitrarios de 500 nodos en el macbook junior de 2013.  La representaci칩n est치tica tambi칠n ofrece un resultado bastante bueno: hasta 1 mill칩n de p치ginas por segundo.  Cada "DOM virtual" se almacena y procesa en una forma serializada especial y ocupa 128 KB para una p치gina web promedio.  El proceso de salida est치 especialmente optimizado y no tiene una sobrecarga para la memoria y el GC. </p><br><p>  En cuanto a la velocidad de desarrollo, aqu칤 Korolev ofrece grandes ventajas.  No es necesario escribir una capa adicional entre la base de datos y el servidor.  No es necesario negociar un protocolo entre el cliente y el servidor.  No necesita preocuparse por la modularidad del front-end: el peso JS en el cliente siempre ser치 el mismo.  No es necesario hacer una l칩gica adicional para los eventos del servidor: solo acepte el mensaje de la cola y cambie el estado de la sesi칩n, Korolev lo procesar치 y entregar치. </p><br><h2 id="cena">  Precio </h2><br><p>  Tienes que pagar por los beneficios.  Algunos h치bitos tendr치n que ser abandonados, y algunos nuevos para adquirir.  Por ejemplo, debe abandonar las animaciones JS y estar satisfecho con las animaciones CSS.  Tendr치 que aprender c칩mo hacer que la infraestructura sea inicialmente geo-distribuida si desea servir a los usuarios de diferentes pa칤ses con alta calidad.  Tienes que abandonar JS e ir a Scala. </p><br><p>  Estoy un poco avergonzado (en realidad no) de haber enga침ado al lector y no dije de inmediato que Korolev fue escrito en Scala.  쯇odr칤as leer hasta este punto si inmediatamente hablara sobre esto?  Hablando de la Reina, tengo que superar dos estereotipos.  El primero se debe al hecho de que la representaci칩n del servidor se percibe como algo lento, no interactivo.  El segundo est치 relacionado con el hecho de que Scala es algo complicado.  Y el primer y segundo estereotipo no tienen nada que ver con la realidad.  Adem치s, la programaci칩n en estilo React en Scala es m치s conveniente que en JS.  JS moderno gravita hacia la programaci칩n funcional, Scala lo saca de la caja.  Por ejemplo, cualquier objeto en Scala tiene un m칠todo <code>copy()</code> que le permite copiar un objeto cambiando algunos campos.  Las colecciones inmutables est치n integradas en la biblioteca est치ndar de Scala. </p><br><h2 id="zaklyuchenie">  Conclusi칩n </h2><br><p>  Korolev ha sido desarrollado durante tres a침os por varios desarrolladores y muchos problemas "infantiles" se resuelven en 칠l.  El proyecto est치 bien documentado, toda la funcionalidad est치 cubierta con ejemplos.  Propongo comenzar la implementaci칩n de la Reina con peque침os servicios independientes.  Espero que Korolev ayude a que los programas sean menos decepcionantes. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace al proyecto en github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es429028/">https://habr.com/ru/post/es429028/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es429016/index.html">Volvo y Baidu desarrollar치n veh칤culos no tripulados juntos</a></li>
<li><a href="../es429018/index.html">쯇or qu칠 el nuevo dise침o de Gmail es tan lento?</a></li>
<li><a href="../es429020/index.html">쯈u칠 es un setter fluido?</a></li>
<li><a href="../es429022/index.html">GridGain en Highload: d칩nde hablar sobre DBMS distribuidos, en memoria y de c칩digo abierto</a></li>
<li><a href="../es429024/index.html">Crea GIFs con OpenCV</a></li>
<li><a href="../es429030/index.html">Logomachine hace logotipos gratis por comentario</a></li>
<li><a href="../es429032/index.html">Splunk Essentials para la aplicaci칩n de la industria de servicios financieros, o c칩mo Splunk ingresa al mercado de an치lisis financiero</a></li>
<li><a href="../es429034/index.html">Algunas historias sobre programadores underground</a></li>
<li><a href="../es429036/index.html">Conf칤a en m칤, s칠 lo que estoy haciendo: autoadaptaci칩n de un robot modular al entorno de ejecuci칩n de tareas</a></li>
<li><a href="../es429038/index.html">Rust News # 2 (octubre de 2018)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>