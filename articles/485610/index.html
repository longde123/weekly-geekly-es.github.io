<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÉÔ∏è üí¢ üí™üèø Cree una aplicaci√≥n Qt en WebAssembly en Windows üé´ üë∂üèª üèÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como saben, las aplicaciones escritas en Qt, que es multiplataforma, se ejecutan desde computadoras de escritorio, dispositivos m√≥viles, Internet de l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cree una aplicaci√≥n Qt en WebAssembly en Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485610/"><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br>  Como saben, las aplicaciones escritas en Qt, que es <a href="https://doc.qt.io/qt-5/supported-platforms.html" rel="nofollow">multiplataforma, se</a> ejecutan desde <a href="https://www.qt.io/use-cases" rel="nofollow">computadoras</a> de <a href="https://www.qt.io/use-cases" rel="nofollow">escritorio, dispositivos m√≥viles, Internet de las cosas</a> , hasta <a href="https://www.qt.io/blog/2019/08/21/announcing-qt-mcus" rel="nofollow">microcontroladores</a> . <br><br>  Una opci√≥n es crear una aplicaci√≥n Qt en WebAssembly, que le permite ejecutarla en el navegador de un usuario.  Por lo tanto, actualizar la aplicaci√≥n para el usuario consistir√° en cargar un nuevo archivo wasm en el servidor. <br><br>  Para facilitar la implementaci√≥n de la aplicaci√≥n, como parte de este art√≠culo, ensamblemos la aplicaci√≥n Qt en WebAssembly para Windows en la l√≠nea de comandos. <a name="habracut"></a><br><br>  La versi√≥n de Qt 5.13.2 se us√≥ en el art√≠culo y creo que el usuario tiene el entorno Qt instalado, configurado y recopila aplicaciones para escritorio en Windows. <br><br>  Ejecute la utilidad MaintenanceTool.exe y seleccione "Agregar o quitar componentes" y marque la casilla de WebAssembly y espere a que se complete la instalaci√≥n. <br><br><img src="https://habrastorage.org/webt/ed/s9/sa/eds9saafk20p2aq8icyhkz567fa.png"><br><br>  Cree un proyecto vac√≠o, por ejemplo en Qt Creator (Qt Stack-view) y gu√°rdelo. <br><br>  Vamos a la p√°gina oficial de documentaci√≥n de Qt <a href="https://doc.qt.io/qt-5/wasm.html" rel="nofollow">WASM</a> . <br><br>  Comenzamos a instalar esmdk.  Descargue <a href="https://github.com/emscripten-core/emscripten" rel="nofollow">emscripten</a> y descomprima, por ejemplo, en c: \ wasm <br><br>  Iniciamos la l√≠nea de comando (comenzamos a ejecutar cmd) e intentamos instalarla: <br><br><pre><code class="plaintext hljs">cd c:\emsdk emsdk.bat install sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Aqu√≠ no pasa nada.  Y el cursor ya est√° en la siguiente l√≠nea.  Que podria pasar  A ver por qu√©?  Abra el archivo con el bloc de notas y vea: <br><br><img src="https://habrastorage.org/webt/zf/em/7g/zfem7g3qowujeln8bnqprb3g2uu.png"><br><br>  ¬øNecesitamos una pit√≥n?  Cheque?  Escribimos en la linea de comando <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version "python"      ,     .</code> </pre> <br>  Bueno, entonces a√∫n necesitamos instalar Python.  <a href="https://www.python.org/downloads/windows/" rel="nofollow">Desc√°rguelo</a> e inst√°lelo.  Recuerde agregar una marca de verificaci√≥n al instalar "Agregar Python 3.8 a la RUTA" <br><br><img src="https://habrastorage.org/webt/zh/sq/dg/zhsqdg097xt83hk9pd9bjycvjia.png"><br><br>  Despu√©s de descargar e instalar, cierre la l√≠nea de comando y ejecute CMD nuevamente.  Comprobamos: <br><br><pre> <code class="plaintext hljs">c:\emsdk&gt;python --version Python 3.8.1</code> </pre><br>  Instale emsdk y active el entorno de compilaci√≥n: <br><br><pre> <code class="plaintext hljs">emsdk.bat install sdk-fastcomp-1.38.27-64bit emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Comprobamos: <br><br><pre> <code class="plaintext hljs">em++</code> </pre> <br>  El compilador est√° listo.  Es hora de comenzar a construir nuestra aplicaci√≥n.  Veamos la carpeta donde est√° instalado Qt wasm: en mi caso, se encuentra en C: \ Qt \ 5.13.2 \ wasm_32 <br><br>  Ejecute la l√≠nea de comando con el entorno para construir Mingw: Inicie mingw - seleccione Qt 5.13.2 (MinGW 7.3.0 32-bit) <br><br>  Activamos nuestro emsdk en √©l: <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit</code> </pre> <br>  Entramos en la carpeta con la aplicaci√≥n de prueba e intentamos recopilar: <br><br><pre> <code class="plaintext hljs">cd c:\Project\test-wasm qmake "qmake"      ,     .</code> </pre> <br><br>  ¬øAlgo sali√≥ mal?  ¬øDe alguna manera no activ√© correctamente la cadena y el entorno para el ensamblaje?  Cierre la l√≠nea de comando y ejec√∫tela nuevamente: comience mingw - seleccione Qt 5.13.2 (MinGW 7.3.0 32-bit) y verifique que tengamos qmake: <br><br><pre> <code class="plaintext hljs">Setting up environment for Qt usage... C:\Qt\5.13.2\mingw73_32&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/mingw73_32/lib</code> </pre> <br>  Todo est√° bien, el entorno Qt est√° activado y qmake es funcional.  Intentamos activar emsdk nuevamente y obtenemos el mismo error. <br><br>  Bueno, pens√©, es posible hacer el de un amigo: primero ejecute emsdk y luego active el entorno mingw; para esto, debemos mirar el acceso directo de inicio de la consola con el entorno mingw32 (iniciar mingw - hacer clic con el bot√≥n derecho en la ubicaci√≥n del archivo abierto - hacer clic con el bot√≥n derecho en "Qt 5.13.2 (MinGW 7.3.0 32-bit) ‚Äù- propiedades. <br><br><img src="https://habrastorage.org/webt/9s/5p/j2/9s5pj2xg81ww4yavpaocmchv1ti.png"><br><br>  En el objeto, estamos interesados ‚Äã‚Äãen la ruta para iniciar el archivo bat.  En mi caso es C: \ Qt \ 5.13.2 \ mingw73_32 \ bin \ qtenv2.bat <br><br>  Entonces, comenzamos de nuevo.  Comience a ejecutar cmd <br><br><pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit C:\Qt\5.13.2\mingw73_32\bin\qtenv2.bat qmake --version</code> </pre> <br>  funciona ... ve a la carpeta con el c√≥digo fuente del proyecto <br><br><pre> <code class="plaintext hljs">qmake make "make"      ,     .</code> </pre> <br>  Recordamos que usamos mingw y el comando para construirlo es diferente: <br>  <b>mingw32-make.exe</b> <br><br><pre> <code class="plaintext hljs">mingw32-make</code> </pre> <br>  La aplicaci√≥n se ha ensamblado, pero comprueba que se haya utilizado: <br><br><pre> <code class="plaintext hljs">g++ -Wl,-s -Wl,-subsystem,windows -mthreads -o release\test-wasm.exe release/main.o release/qrc_qml.o C:\Qt\5.13.2\mingw73_32\lib\libQt5Quick.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Gui.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Qml.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Network.a C:\Qt\5.13.2\mingw73_32\lib\libQt5Core.a -lmingw32 C:\Qt\5.13.2\mingw73_32\lib\libqtmain.a -LC:\openssl\lib -LC:\Utils\my_sql\mysql-5.7.25-win32\lib -LC:\Utils\postgresql\pgsql\lib -lshell32 mingw32-make.exe[1]: Leaving directory 'c:/Project/test-wasm'</code> </pre> <br><br>  Entonces  Para  ¬øQu√© hemos recogido? <br><br>  <b>Creamos</b> <b>la aplicaci√≥n</b> habitual de 32 bits para <b>escritorio</b> (x86) porque usamos el ensamblado <u>C: \ Qt \ 5.13.2 \ mingw73_32</u> <br><br>  Y necesit√°bamos construir WASM.  Ajustemos el entorno PATH para que tome primero la ruta y qmake de la carpeta wasm: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH%</code> </pre> <br>  Limpiamos la carpeta de los archivos recopilados. <br><br><pre> <code class="plaintext hljs">mingw32-make.exe clean del .qmake.stash</code> </pre> <br>  Comenzamos el montaje <br><br><pre> <code class="plaintext hljs">qmake</code> </pre> <br><img src="https://habrastorage.org/webt/cz/nx/3s/cznx3sfjy_1b4svadrdfr2uac9m.png"><br><br>  Que es  ¬øOtra vez un error?  ¬øQu√© tipo de dll necesitamos?  Vamos a buscarlo en la carpeta donde est√° instalado Qt: <br>  ¬øC√≥mo puede ser esto?  ¬øWASM compilado de 32 bits (c: \ Qt \ 5.13.2 \ wasm_32 \ bin) utiliza una biblioteca de MINGW de 64 bits? <br><br><img src="https://habrastorage.org/webt/kd/k_/my/kdk_mydgdcxxqogigkfjbt157wo.png"><br><br>  Bueno, suponga que puede arriesgarse, agregue la ruta a esta biblioteca de 64 bits: <br><br><pre> <code class="plaintext hljs">set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% mingw32-make.exe clean qmake mingw32-make.exe</code> </pre><br>  y ... muchos errores <br><br><div class="spoiler">  <b class="spoiler_title">mas detalles</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">release/main.o:main.cpp:(.text+0x1bc): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x1c6): undefined reference to `_imp___ZN11QMetaObject10ConnectionD1Ev' release/main.o:main.cpp:(.text+0x1d7): undefined reference to `_imp___ZN21QQmlApplicationEngine4loadERK4QUrl' release/main.o:main.cpp:(.text+0x1e0): undefined reference to `_imp___ZN15QGuiApplication4execEv' release/main.o:main.cpp:(.text+0x1ef): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x1f8): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x225): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x249): undefined reference to `_imp___ZN21QQmlApplicationEngineD1Ev' release/main.o:main.cpp:(.text+0x252): undefined reference to `_imp___ZN15QGuiApplicationD1Ev' release/main.o:main.cpp:(.text+0x276): undefined reference to `_imp___ZN10QArrayData10deallocateEPS_jj' release/main.o:main.cpp:(.text+0x28f): undefined reference to `_imp___ZN4QUrlD1Ev' release/main.o:main.cpp:(.text+0x2aa): undefined reference to `_imp___ZN4QUrlD1Ev' release/qrc_qml.o:qrc_qml.cpp:(.text+0x23): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x53): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text+0x83): undefined reference to `qUnregisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)' release/qrc_qml.o:qrc_qml.cpp:(.text.startup+0x23): undefined reference to `qRegisterResourceData(int, unsigned char const*, unsigned char const*, unsigned char const*)'</code> </pre> <br></div></div><br><pre> <code class="plaintext hljs">C:/Qt/Tools/mingw730_32/bin/../lib/gcc/i686-w64-mingw32/7.3.0/../../../../i686-w64-mingw32/lib/../lib/libmingw32.a(lib32_libmingw32_a-crt0_c.o):crt0_c.c:(.text.startup+0x39): undefined reference to `WinMain@16' collect2.exe: error: ld returned 1 exit status mingw32-make[1]: *** [Makefile.Release:66: release/test-wasm.exe] Error 1 mingw32-make[1]: Leaving directory 'c:/Project/test-wasm' mingw32-make: *** [Makefile:38: release] Error 2</code> </pre><br>  ¬øPor qu√© tantos errores?  ¬øPor qu√© no lo hiciste?  Limpi√© los archivos temporales, comenc√© la compilaci√≥n y obtuve muchos errores. <br><br>  Entonces, debes pensar, sirve una taza de t√© / caf√© ... <br><br>  Derecho!  La idea!  Porque  aparentemente escribimos la √∫ltima ruta a las bibliotecas de 64 bits como la √∫ltima, luego, al construir un WASM de 32 bits, no entendi√≥ c√≥mo y qu√© vincular, e intent√≥ usar la ruta a la biblioteca de 64 bits, lo que significa que tuve que especificar la ruta a la biblioteca de 32 bits antes que antes 64 bit.  Intentar√© arreglarlo: <br><br>  Cierra la consola.  Abrimos mingw 32 bits nuevamente y aqu√≠ el pensamiento me visita:  Ya lanzamos la l√≠nea de comando para mingw de 32 bits, luego reemplazamos la ruta de acceso a las bibliotecas por 64 bits, nuevamente tendremos prioridad al construir el entorno de escritorio Qt en componentes de 64 bits, y necesitamos una viceversa (porque PATH se usar√° primero hasta 64 bits, y luego hasta 32 bibliotecas en total).  Pues bien, nuestro algoritmo final ser√° as√≠: <br><br><pre> <code class="plaintext hljs">cmd c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/qt/5.13.2/mingw73_64/lib</code> </pre> <br>  agregue la ruta al wasm y vaya a recolectar: <br><br><pre> <code class="plaintext hljs">set PATH=c:\Qt\5.13.2\wasm_32\bin;%PATH% cd c:\Project\test-wasm c:\Project\test-wasm&gt;qmake --version QMake version 3.1 Using Qt version 5.13.2 in C:/Qt/5.13.2/wasm_32/lib qmake mingw32-make "mingw32-make"      ,     .</code> </pre> <br>  25 de nuevo!  Ahora que me pasa?  ¬øD√≥nde est√° este archivo?  A donde  Las b√∫squedas en Explorer dicen que est√° en <u>C: \ Qt \ Tools \ mingw730_32 \ bin</u> <br><br>  Bueno, mingw32-make.exe ahora definitivamente se encontrar√° con nosotros: <br><br><pre> <code class="plaintext hljs">set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Comenzamos a recolectar: <br><br><pre> <code class="plaintext hljs">c:\Project\test-wasm&gt;mingw32-make c:\Qt\5.13.2\wasm_32\bin\qmake.exe -o Makefile test-wasm.pro Info: creating stash file C:\Project\test-wasm\.qmake.stash sed -es/@APPNAME@/test-wasm/g C:/Qt/5.13.2/wasm_32/plugins/platforms/wasm_shell.html &gt; C:/Project/test-wasm/test-wasm.html "sed"      ,     . mingw32-make: *** [Makefile:424: apphtml] Error 1</code> </pre> <br>  <b>sed</b> ??  Esto no es Linux, Mac, * nix, * BSD.  ¬øD√≥nde conseguirlo?  Buscar (sed.exe)? .. Y no lo encontramos. <br><br>  Tomamos Internet, buscamos (ventanas de descarga sed) y encontramos que se puede descargar para <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">Windows</a> : <br><br>  Descargue binarios Zip, descompr√≠malos de la carpeta bin / sed.exe y ejecute: <br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br><img src="https://habrastorage.org/webt/p1/bu/lg/p1bulgzwobzdf8i6d65rdpqdelc.png"><br><br>  Dos errores en componentes dll faltantes.  ¬øTodav√≠a necesitamos sed para recolectar de la fuente o buscar estos dlls faltantes?  No, no me gustar√≠a hacer esto ... Una vez m√°s, miramos cuidadosamente el sitio web de <a href="http://gnuwin32.sourceforge.net/packages/sed.htm" rel="nofollow">GNU</a> y lo vemos en Descargas: <b>‚Ä¢ Paquete completo, excepto la configuraci√≥n de las fuentes</b> <br><br>  Descargar, descomprimir e instalar.  Intenta correr: <br><br><pre> <code class="plaintext hljs">"c:\Program Files (x86)\GnuWin32\bin\sed.exe"</code> </pre> <br>  Funciona !!!  Queda por agregarlo nuevamente a la ruta: <br><br><pre> <code class="plaintext hljs">set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% mingw32-make</code> </pre> <br>  El procesador se ha iniciado, el ensamblaje ha comenzado.  Bueno, ¬°espero que ahora tengamos √©xito! <br><br>  Tard√≥ ... minutos <br><br><pre> <code class="plaintext hljs">emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv() emcc: warning: cannot represent a NaN literal '0x22748a2c570' with custom bit pattern in NaN-canonicalizing JS engines (eg Firefox and Safari) without erasing bits! in ret double 0x7FF4000000000000 in _ZL7qt_snanv.30589() c:\Project\test-wasm&gt;dir ... 25.01.2020 17:42 2 922 test-wasm.html 25.01.2020 17:55 355 725 test-wasm.js 25.01.2020 14:59 461 test-wasm.js_plugin_import.cpp 25.01.2020 16:23 4 384 test-wasm.js_plugin_import.obj 25.01.2020 15:49 601 test-wasm.js_qml_plugin_import.cpp 25.01.2020 16:23 4 668 test-wasm.js_qml_plugin_import.obj 25.01.2020 14:52 1 099 test-wasm.pro 25.01.2020 15:25 22 523 test-wasm.pro.user 25.01.2020 17:55 20 759 738 test-wasm.wasm</code> </pre><br>  ¬°Hurra!  Result√≥  Nuestra aplicaci√≥n de prueba est√° ensamblada.  Wasm binar toma 20 MB.  No un poco  Intentemos abrir nuestro archivo test-wasm.htm en un navegador y ... <br><br><img src="https://habrastorage.org/webt/2v/ru/wl/2vruwlzn5xvqonnbrju4xfdatfs.png"><br><br><h2>  Para resumir c√≥mo construir una aplicaci√≥n Qt para 5.13.2 en Windows: </h2><br><br>  1. Necesita instalar Python.  GNU SED e instale ensamblados binarios WebAssembly a trav√©s de Qt instalado en l√≠nea <br><br>  2) <pre> <code class="plaintext hljs">c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit set PATH="c:\Program Files (x86)\GnuWin32\bin";%PATH% set PATH=c:\qt\5.13.2\mingw73_64\bin;%PATH% set PATH=C:\Qt\Tools\mingw730_32\bin;%PATH%</code> </pre> <br>  Pero Habr no ser√≠a Habr si no hubiera intentado <b>compilar</b> la aplicaci√≥n <b>WebAssembly a</b> partir de la √∫ltima versi√≥n de Qt, que actualmente es <b>5.14.0</b> .  Espero no esperar exactamente la misma b√∫squeda desde el final que al construir en la versi√≥n 5.13.2. <br><br>  A trav√©s del instalador en l√≠nea (MaintenanceTool.exe) instalamos Qt WebAssembly para la versi√≥n 5.14.0.  Configuramos el entorno y ejecutamos el ensamblaje. <br><br>  El proceso contin√∫a y ... <br><br><img src="https://habrastorage.org/webt/zt/zh/b0/ztzhb07vfti-eekm3krpb5v-u1q.png"><br><br>  Nada esta claro.  Como es eso  Para la versi√≥n 5.13.2, despu√©s de bailar con una pandereta, pude armar la aplicaci√≥n, pero para 5.14.0 no funcion√≥.  ¬øPero c√≥mo entonces (Qt) lo ensamblaron? <br><br>  ... ¬øPero tambi√©n podemos construir WASM Qt 5.14.0 desde la fuente?  Y porque no.  Para hacer esto, necesitamos mucho espacio en el disco duro, as√≠ como una buena carga / carga para el procesador: <br><br><pre> <code class="plaintext hljs">echo PATH=c:\qtwasm514\bin;"C:\Program Files (x86)\GnuWin32\bin";c:\qt\Tools\mingw730_32\bin;%PATH% c:\emsdk\emsdk.bat activate --embedded sdk-fastcomp-1.38.27-64bit cd c:\Qt\5.14.0\Src configure.bat -no-warnings-are-errors -xplatform wasm-emscripten -platform win32-g++ -nomake examples -prefix c:\qtwasm</code> </pre><br>  En este caso, despu√©s del ensamblaje, tendremos wasm instalado en la carpeta c: \ qtwasm y, sin embargo, no necesitamos recopilar ejemplos. <br><br><div class="spoiler">  <b class="spoiler_title">Salida de configuraci√≥n</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Building on: win32-g++ (i386, CPU features: none) Building for: wasm-emscripten (wasm, CPU features: none) Target compiler: clang 6.0.1 Configuration: cross_compile largefile release c++11 no-pkg-config reduce_exports static stl Build options: Mode ................................... release Optimize release build for size ........ no Building shared libraries .............. no Using C standard ....................... C11 Using C++ standard ..................... C++11 Using ccache ........................... no Using precompiled headers .............. no Using LTCG ............................. no Target compiler supports: Build parts ............................ libs Qt modules and options: Qt Concurrent .......................... no Qt D-Bus ............................... no Qt D-Bus directly linked to libdbus .... no Qt Gui ................................. yes Qt Network ............................. yes Qt Sql ................................. no Qt Testlib ............................. yes Qt Widgets ............................. yes Qt Xml ................................. yes Support enabled for: Using pkg-config ....................... no udev ................................... no Using system zlib ...................... no Zstandard support ...................... no Qt Core: DoubleConversion ....................... yes Using system DoubleConversion ........ no GLib ................................... no iconv .................................. yes ICU .................................... no Built-in copy of the MIME database ..... yes Tracing backend ........................ none Logging backends: journald ............................. no syslog ............................... no slog2 ................................ no Using system PCRE2 ..................... no Qt Network: getifaddrs() ........................... no IPv6 ifname ............................ no libproxy ............................... no OpenSSL ................................ no Qt directly linked to OpenSSL ........ no OpenSSL 1.1 ............................ no DTLS ................................... no OCSP-stapling .......................... no SCTP ................................... no Use system proxies ..................... yes Qt Gui: Accessibility .......................... yes FreeType ............................... yes Using system FreeType ................ no HarfBuzz ............................... yes Using system HarfBuzz ................ no Fontconfig ............................. no Image formats: GIF .................................. yes ICO .................................. yes JPEG ................................. yes Using system libjpeg ............... no PNG .................................. yes Using system libpng ................ no EGL .................................... yes OpenVG ................................. no OpenGL: Desktop OpenGL ....................... no OpenGL ES 2.0 ........................ yes OpenGL ES 3.0 ........................ no OpenGL ES 3.1 ........................ no OpenGL ES 3.2 ........................ no Vulkan ................................. no Session Management ..................... yes Features used by QPA backends: evdev .................................. no libinput ............................... no INTEGRITY HID .......................... no mtdev .................................. no tslib .................................. no xkbcommon .............................. no X11 specific: XLib ................................. no XCB Xlib ............................. no EGL on X11 ........................... no QPA backends: DirectFB ............................... no EGLFS .................................. no LinuxFB ................................ no VNC .................................... yes Mir client ............................. no Qt Sql: SQL item models ........................ yes Qt Widgets: GTK+ ................................... no Styles ................................. Fusion Windows Qt PrintSupport: CUPS ................................... no Qt Sql Drivers: DB2 (IBM) .............................. no InterBase .............................. no MySql .................................. no OCI (Oracle) ........................... no ODBC ................................... no PostgreSQL ............................. no SQLite2 ................................ no SQLite ................................. yes Using system provided SQLite ......... no TDS (Sybase) ........................... no Qt Testlib: Tester for item models ................. yes Qt SerialBus: Socket CAN ............................. no Socket CAN FD .......................... no SerialPort Support ..................... no Further Image Formats: JasPer ................................. no MNG .................................... no TIFF ................................... yes Using system libtiff ................. no WEBP ................................... yes Using system libwebp ................. no Qt QML: QML network support .................... yes QML debugging and profiling support .... yes QML tracing JIT support ................ no QML sequence object .................... yes QML list model ......................... yes QML XML http request ................... yes QML Locale ............................. yes QML delegate model ..................... yes Qt Quick: Direct3D 12 ............................ no AnimatedImage item ..................... yes Canvas item ............................ yes Support for Qt Quick Designer .......... yes Flipable item .......................... yes GridView item .......................... yes ListView item .......................... yes TableView item ......................... yes Path support ........................... yes PathView item .......................... yes Positioner items ....................... yes Repeater item .......................... yes ShaderEffect item ...................... yes Sprite item ............................ yes Qt Scxml: ECMAScript data model for QtScxml ...... yes Qt Gamepad: SDL2 ................................... no Qt 3D GeometryLoaders: Autodesk FBX ........................... no Qt Wayland Client ........................ no Qt Wayland Compositor .................... no Qt Bluetooth: BlueZ .................................. no BlueZ Low Energy ....................... no Linux Crypto API ....................... no WinRT Bluetooth API (desktop &amp; UWP) .... no WinRT advanced bluetooth low energy API (desktop &amp; UWP) . no Qt Sensors: sensorfw ............................... no Qt Quick Controls 2: Styles ................................. Default Fusion Imagine Material Universal Qt Quick Templates 2: Hover support .......................... yes Multi-touch support .................... yes Qt Positioning: Gypsy GPS Daemon ....................... no WinRT Geolocation API .................. no Qt Location: Qt.labs.location experimental QML plugin . yes Geoservice plugins: OpenStreetMap ........................ no HERE ................................. yes Esri ................................. yes Mapbox ............................... yes MapboxGL ............................. no Itemsoverlay ......................... yes QtXmlPatterns: XML schema support ..................... yes Qt Multimedia: ALSA ................................... no GStreamer 1.0 .......................... no GStreamer 0.10 ......................... no Video for Linux ........................ no OpenAL ................................. no PulseAudio ............................. no Resource Policy (libresourceqt5) ....... no Windows Audio Services ................. no DirectShow ............................. no Windows Media Foundation ............... no Qt Tools: QDoc ................................... no Qt WebEngineCore: Qt WebEngine Widgets ................... yes Qt WebEngine Qml ....................... yes Embedded build ......................... yes Full debug information ................. no Pepper Plugins ......................... no Printing and PDF ....................... no Proprietary Codecs ..................... no Spellchecker ........................... yes Native Spellchecker .................... no WebRTC ................................. no Use System Ninja ....................... no Geolocation ............................ yes WebChannel support ..................... yes Use v8 snapshot ........................ yes Kerberos Authentication ................ no Extensions ............................. no Support qpa-xcb ........................ no Building v8 snapshot supported ......... yes Use ALSA ............................... no Use PulseAudio ......................... no Optional system libraries used: re2 .................................. no icu .................................. no libwebp, libwebpmux and libwebpdemux . no opus ................................. no ffmpeg ............................... no libvpx ............................... no snappy ............................... no glib ................................. no zlib ................................. no minizip .............................. no libevent ............................. no jsoncpp .............................. no protobuf ............................. no libxml2 and libxslt .................. no lcms2 ................................ no png .................................. no JPEG ................................. no harfbuzz ............................. no freetype ............................. no Required system libraries: fontconfig ........................... no dbus ................................. no nss .................................. no khr .................................. no glibc ................................ no Required system libraries for qpa-xcb: x11 .................................. no libdrm ............................... no xcomposite ........................... no xcursor .............................. no xi ................................... no xtst ................................. no Qt WebEngineQml: UI Delegates ........................... yes Test Support ........................... no Note: Using static linking will disable the use of dynamically loaded plugins. Make sure to import all needed static plugins, or compile needed modules into the library. Note: No wayland-egl support detected. Cross-toolkit compatibility disabled. Note: The following modules are not being compiled in this configuration: serialport 3dcore 3drender WARNING: QDoc will not be compiled, probably because libclang could not be located. This means that you cannot build the Qt documentation. Either ensure that llvm-config is in your PATH environment variable, or set LLVM_INSTALL_DIR to the location of your llvm installation. On Linux systems, you may be able to install libclang by installing the libclang-dev or libclang-devel package, depending on your distribution. On macOS, you can use Homebrew's llvm package. On Windows, you must set LLVM_INSTALL_DIR to the installation path. WARNING: host pkg-config not found Qt is now configured for building. Just run 'mingw32-make'. Once everything is built, you must run 'mingw32-make install'. Qt will be installed into 'c:\qtwasm'. Prior to reconfiguration, make sure you remove any leftovers from the previous build.</code> </pre> <br></div></div><br>  Montamos e instalamos: <br><br><pre> <code class="plaintext hljs">mingw32-make mingw32-make install</code> </pre> <br>  Despu√©s de reconstruir WASM Qt 5.14.0 e instalar c: \ qtwasm en la carpeta y usar esta ruta, pude construir WebAssembly a partir de la versi√≥n 5.14.0 de Qt. <br><br><h2>  Conclusi√≥n 2. </h2><br>  Si desea utilizar Qt 5.14.0 WebAssembly, deber√° reconstruirlo desde las fuentes y utilizar la versi√≥n que ya ha creado. <br><br><h2>  Conclusi√≥n </h2><br>  Qt WebAssembly es una tecnolog√≠a bastante interesante que ha aparecido en Qt desde la versi√≥n <a href="https://www.qt.io/blog/2018/11/19/getting-started-qt-webassembly" rel="nofollow">5.12</a> . <br><br>  Los <a href="https://www.qt.io/blog/2018/05/22/qt-for-webassembly-examples" rel="nofollow">ejemplos de</a> WebAssembly se pueden ver en <a href="https://www.qt.io/qt-examples-for-webassembly" rel="nofollow">l√≠nea</a> en el sitio web de Qt. <br><br>  Sin embargo, al intentar construir mi propio proyecto, recib√≠ errores: <br><br><img src="https://habrastorage.org/webt/gl/in/tm/glintm9_aahtojefsodha0ntaz4.png"><br><br>  Por lo tanto, cuando se utiliza esta tecnolog√≠a, es necesario estudiar sus <a href="https://wiki.qt.io/Qt_for_WebAssembly" rel="nofollow">limitaciones</a> . <br><br>  M√≥dulos no soportados actualmente: qtmultimedia, qtwebview. <br><br>  Actualmente, WebAssembly funciona principalmente en navegadores de escritorio, y no se conoce cu√°ndo aparece el soporte completo en dispositivos m√≥viles. <br><br>  Para aquellos que han le√≠do este art√≠culo hasta el final, pero nunca han probado Qt, pueden descargar el <a href="https://www.qt.io/download" rel="nofollow">instalador en l√≠nea</a> , seleccionar las opciones de MinGW y la versi√≥n requerida de Qt WebAssmbly.  <a href="https://www.qt.io/development-tools" rel="nofollow">QtCreator se</a> instalar√° de manera predeterminada y puede crear su primera aplicaci√≥n. <br><br>  Al final de este art√≠culo, me gustar√≠a recomendar que los usuarios intenten recopilar ejemplos de fuentes Qt, de la carpeta Src \ qtcharts \ examples y ejecutarlos en un navegador. <br><br>  Para iniciar el servidor web, puede usar Python y ejecutar: <br>  <code>python -m http.server 8000 --bind 192.168.0.10</code> si tiene una direcci√≥n en la red local de la computadora 192.168.0.10.  Adem√°s, no olvide abrir el puerto en el Firewall, y luego puede intentar abrir la aplicaci√≥n a trav√©s de un navegador desde otra computadora / dispositivo / tel√©fono inteligente. <br><br>  Vota y da tus ejemplos de uso del mejor marco GUI para C ++ Qt en los comentarios. <br><br>  <i><b>¬°Buena suerte con tu creatividad y tus nuevos logros!</b></i> </div></div><p>Source: <a href="https://habr.com/ru/post/485610/">https://habr.com/ru/post/485610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485596/index.html">Entrevistas de algoritmos: teor√≠a vs. practicar</a></li>
<li><a href="../485598/index.html">Eventos digitales en Mosc√∫ del 27 de enero al 2 de febrero</a></li>
<li><a href="../485600/index.html">Eventos digitales en San Petersburgo del 27 de enero al 2 de febrero</a></li>
<li><a href="../485606/index.html">Operaciones de filtro de controladores en el registro. Practica</a></li>
<li><a href="../485608/index.html">Microservicios con Spring Boot. Parte 4. Uso de la cinta para equilibrar la carga</a></li>
<li><a href="../485612/index.html">¬øQu√© me ense√±√≥ un accidente espacial como desarrollador?</a></li>
<li><a href="../485614/index.html">La cultura corporativa roja es el principal problema de los negocios rusos (Parte 3)</a></li>
<li><a href="../485618/index.html">Automatizaci√≥n para los m√°s peque√±os. Notas API RESTful</a></li>
<li><a href="../485620/index.html">¬øYoshkar-Ola, en general, una ciudad de TI?</a></li>
<li><a href="../485622/index.html">Herramientas de respaldo de PostgreSQL. Andrey Salnikov (Garceta de datos)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>