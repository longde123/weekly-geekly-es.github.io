<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ  ğŸŒµ ğŸ™‡ Python3ã€‚ å¤šä¾›åº”å•†ç½‘ç»œè®¾å¤‡é…ç½®è‡ªåŠ¨åŒ– ğŸ›ŒğŸ¾ ğŸ‘©ğŸ½â€ğŸ’» ğŸ’›</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‰è¨€ 
 ç¥å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©ï¼ 

 æˆ‘æ˜¯ä¸€å®¶å¤§å‹ç”µä¿¡è¿è¥å•†çš„ç½‘ç»œå·¥ç¨‹å¸ˆï¼Œåœ¨æˆ‘çš„æ§åˆ¶ä¸‹ï¼Œæ•´ä¸ªåŠ¨ç‰©å›­éå¸ƒå„ç§ç½‘ç»œè®¾å¤‡ï¼Œä½†æˆ‘ä»¬å°†è®¨è®ºæ¥å…¥äº¤æ¢æœºã€‚ 

 æœ¬æ–‡ä¸æ˜¯è¡ŒåŠ¨æŒ‡å—ï¼Œä¹Ÿä¸æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”æ˜¾ç„¶ä¹Ÿä¸å‡è£…æ˜¯å¹´åº¦æåçš„å‰§æœ¬ï¼Œä½†æˆ‘æƒ³åˆ†äº«è¿™ä¸ªåˆ›æ„ï¼Œä¹Ÿè®¸å¯¹æŸäººæœ‰ç”¨ã€‚ 

 æœ¬æ–‡å°†åœ¨æ‰°æµæ¿ä¸‹æä¾›ä¸€ä¸ªä»£ç å—ï¼Œå¹¶...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python3ã€‚ å¤šä¾›åº”å•†ç½‘ç»œè®¾å¤‡é…ç½®è‡ªåŠ¨åŒ–</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415453/"><h4> å‰è¨€ </h4><br> ç¥å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©ï¼ <br><br> æˆ‘æ˜¯ä¸€å®¶å¤§å‹ç”µä¿¡è¿è¥å•†çš„ç½‘ç»œå·¥ç¨‹å¸ˆï¼Œåœ¨æˆ‘çš„æ§åˆ¶ä¸‹ï¼Œæ•´ä¸ªåŠ¨ç‰©å›­éå¸ƒå„ç§ç½‘ç»œè®¾å¤‡ï¼Œä½†æˆ‘ä»¬å°†è®¨è®ºæ¥å…¥äº¤æ¢æœºã€‚ <br><br> æœ¬æ–‡ä¸æ˜¯è¡ŒåŠ¨æŒ‡å—ï¼Œä¹Ÿä¸æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”æ˜¾ç„¶ä¹Ÿä¸å‡è£…æ˜¯å¹´åº¦æåçš„å‰§æœ¬ï¼Œä½†æˆ‘æƒ³åˆ†äº«è¿™ä¸ªåˆ›æ„ï¼Œä¹Ÿè®¸å¯¹æŸäººæœ‰ç”¨ã€‚ <br><br> æœ¬æ–‡å°†åœ¨æ‰°æµæ¿ä¸‹æä¾›ä¸€ä¸ªä»£ç å—ï¼Œå¹¶åœ¨ä¸‹é¢è¿›è¡Œå‰ªè¾‘å’Œè¯´æ˜ï¼Œå¹¶è¯´æ˜å…¶åŸå› å’Œç”¨é€”ã€‚ <br><br><h4> æŒ‘æˆ˜èµ› </h4><br> ä¸“é—¨ä½¿ç”¨python3ã€‚ è¯¥è„šæœ¬åº”è¯¥èƒ½å¤Ÿä»åˆ—è¡¨ä¸­è½¬åˆ°äº¤æ¢æœºï¼Œç¡®å®šå“ªç§ä¾›åº”å•†ï¼Œç»™å‡ºæ‰€éœ€çš„å‘½ä»¤ï¼Œè¿›è¡Œæ—¥å¿—ã€‚ <br><br><h4> å…¶å®æˆ‘æ€ä¹ˆæ¥çš„ </h4><br> é¢å¯¹åœ¨å¤§é‡äº¤æ¢æœºä¸Šæ›´æ”¹é…ç½®çš„å°é—®é¢˜ï¼Œæˆ‘å°†ç«‹å³å¯¹æˆ‘ä»¬æ‹¥æœ‰çš„ç½‘ç»œè®¾å¤‡çš„é›†ä¸­ç®¡ç†ç³»ç»Ÿä¿ç•™ä¸€ä¸‹ï¼Œæˆ‘çš„åŒäº‹ä¹Ÿæœ‰è®¸å¤šä»¥è„šæœ¬å½¢å¼è¿›è¡Œå¼€å‘ä»¥æ–¹ä¾¿æ‰‹åŠ¨å·¥ä½œçš„å·¥å…·ï¼Œä¸»è¦æ˜¯bashï¼Œperlã€‚ <br><br> ä½†æ˜¯å¯¹æˆ‘æ¥è¯´ï¼Œåšç‚¹ä¸åŒçš„äº‹æƒ…å¾ˆé‡è¦ï¼Œå› ä¸º æˆ‘æœ€è¿‘å¼€å§‹å­¦ä¹ pythonï¼Œæˆ‘éœ€è¦æé«˜ç¼–ç¨‹æŠ€èƒ½ï¼Œå¹¶ä¸”æˆ‘çš„å·¥å…·åº”è¯¥çœ‹èµ·æ¥åƒé”¤å­ï¼ˆæ˜“äºä½¿ç”¨ä¸”æ˜“äºç»´æŠ¤ï¼‰ã€‚ å¦‚æœä»ç„¶æœ‰å…´è¶£ï¼Œé‚£ä¹ˆæˆ‘è¦çŒ«ã€‚ <br><a name="habracut"></a><br> è°·æ­Œæœç´¢å¹¶æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼ˆå¥½åƒåœ¨è®ºå›ä¸Šæå‡ºäº†è¿™ä¸ªé—®é¢˜ï¼Œä½†é‚£é‡Œä¸€åˆ‡éƒ½é”™äº†ï¼‰ï¼Œæˆ‘å†³å®šå¼€å§‹ç¼–å†™è‡ªå·±çš„è„šæœ¬ã€‚ <br><br> æˆ‘ä»¬æœ‰ä»¥ä¸‹å¼€å…³ï¼š <br><br><ul><li>  Raisecom </li><li>  Qtechç‰ˆæœ¬  1.0 </li><li>  Qtechç‰ˆæœ¬  2.0ï¼ˆè¯­æ³•å·®å¼‚ï¼‰ </li><li>  Eltex </li><li>  Dé“¾æ¥ </li><li> ç”¨Qtechç‰ˆæœ¬1.0çš„æªå£äº§ç”Ÿå¼—å…°è‚¯æ–¯å¦å¼€å…³ï¼Œè€ŒRaisecomçš„é“æ†æˆ‘ä»¬ç§°ä¹‹ä¸ºROS </li></ul><br> é¦–å…ˆï¼Œå¯¼å…¥æ‰€éœ€çš„åº“ï¼š <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> telnetlib <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> getpass <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pexpect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> telnetlib <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Telnet <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess</code> </pre> <br> æœ€åˆï¼Œæˆ‘ä»¬æè¿°ä¾›åº”å•†å®šä¹‰åŠŸèƒ½ï¼Œå› ä¸º å†³å®šä½¿ç”¨ä¸¤ç§æ–¹æ³•ï¼š <br><br>  1ï¼‰å‡è®¾å®ƒæ˜¯å“ªç§ç±»å‹çš„ä¾›åº”å•†ï¼ˆåº”é‚€è¾“å…¥ç™»å½•åï¼‰ï¼Œå› ä¸ºæˆ‘æ³¨æ„åˆ°æ¯ä¸ªäººéƒ½ä¸åŒï¼šQtechï¼ˆç™»å½•:)ï¼ŒRaisecomå’ŒROSï¼ˆç™»å½•:)ï¼ŒEltexï¼ˆç”¨æˆ·å:)ï¼ŒD-linkï¼ˆç”¨æˆ·åï¼‰ã€‚ <br><br>  2ï¼‰ç™»å½•å-ç¡®ä¿ç¬¬ä¸€é¡¹å‡å·²æ­£ç¡®å®Œæˆï¼Œå¹¶èƒ½æ›´å¥½åœ°è¯†åˆ«æˆ‘ä»¬æ‰€å¤„çš„å¼€å…³ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">åŠŸèƒ½ä»‹ç»</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">who_is</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   global ver_status global sab_versus global versus sab_versus='' ver_status='' versus='' #  a = 'Serial No.:1405' # #qtech rev1 d = 'Command: show switch' # #d-link f = 'Raisecom Operating System Software' # #raisecom h = 'QOS' # #raisecom-qtech j = 'MES1124M' # #eltex k = 'eltex' # #eltex n = 'Build245' #qtech2.0 parser=open('servers_&amp;_log/ver.txt', 'r') #  for line in parser.readlines(): line1 = line.find(a) line4 = line.find(d) line5 = line.find(f) line6 = line.find(h) line7 = line.find(j) line8 = line.find(k) line10 = line.find(n) if line1 != -1: ver_status='qtech_rev_1.0' if line4 != -1: ver_status='d-link' if line5 != -1: ver_status='raisecom' if line6 != -1: ver_status='raisecom-qtech' sab_versus=1 if line7 !=-1: ver_status='eltex' if line8 !=-1: ver_status='eltex' if line10 != -1: ver_status = 'qtech_rev_2.0' time.sleep(0.1) parser.close() os.remove('servers_&amp;_log/ver.txt') return ver_status,sab_versus</span></span></code> </pre> <br></div></div><br> æ•´ä¸ªåŠŸèƒ½åœ¨æ‰°æµæ¿ä¹‹ä¸‹ã€‚ æˆ‘ä»¬å£°æ˜å¯¹æ•´ä¸ªè„šæœ¬å¯è§çš„å…¨å±€å˜é‡ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">global</span></span> ver_status <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> sab_versus <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> versus</code> </pre> <br> å˜é‡aï¼Œdï¼Œfï¼Œhï¼Œjï¼Œkï¼Œnå­˜å‚¨å…³é”®å­—ï¼Œé€šè¿‡è¿™äº›å…³é”®å­—æˆ‘ä»¬éšåå°†ç¡®å®šå¼€å…³çš„æ¨¡å‹ã€‚ <br><br><pre> <code class="python hljs">a = <span class="hljs-string"><span class="hljs-string">'Serial No.:1405'</span></span> <span class="hljs-comment"><span class="hljs-comment"># #qtech rev1 d = 'Command: show switch' # #d-link f = 'Raisecom Operating System Software' # #raisecom h = 'QOS' # #raisecom-qtech j = 'MES1124M' # #eltex k = 'eltex' # #eltex n = 'Build245' #qtech2.0</span></span></code> </pre> <br> æ‰“å¼€ver.txtæ–‡ä»¶åï¼Œæˆ‘ä»¬é€è¡Œè¯»å–å¹¶æ£€æŸ¥å…³é”®å­—è¾“å…¥ï¼Œå› ä¸º å¦‚æœæ­¤ç»“æœä¸ºè´Ÿï¼Œåˆ™findï¼ˆï¼‰å‡½æ•°è¿”å›-1ï¼Œæˆ‘ä»¬å°†å»ºç«‹åˆ†æ”¯ã€‚ <br><br><pre> <code class="python hljs">parser=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/ver.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">'r'</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  for line in parser.readlines(): line1 = line.find(a) line4 = line.find(d) line5 = line.find(f) line6 = line.find(h) line7 = line.find(j) line8 = line.find(k) line10 = line.find(n) if line1 != -1: ver_status='qtech_rev_1.0'</span></span></code> </pre> <br>  ... <br><br> æˆ‘ç»™å‡ºäº†ä»£ç çš„ç¤ºä¾‹éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†åœ¨ä¸Šé¢çš„æ‰°æµå™¨ä¸‹ã€‚ <br><br> è¯¥æ–‡ä»¶çš„å†…å®¹å°†åœ¨ä¸‹é¢æè¿°ã€‚ åœ¨å®Œæˆæ‰€æœ‰æ“ä½œå¹¶å®šä¹‰äº†ä¾›åº”å•†ä¹‹åï¼Œåˆ é™¤ver.txtæ–‡ä»¶ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸»å˜é‡å£°æ˜ï¼Œä¸»å¾ªç¯ä¸»ä½“</b> <div class="spoiler_text"><pre> <code class="python hljs">user=<span class="hljs-string"><span class="hljs-string">'user'</span></span> password=<span class="hljs-string"><span class="hljs-string">'password'</span></span> komm=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/komm.txt'</span></span>) log=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/log.txt'</span></span>,<span class="hljs-string"><span class="hljs-string">'a'</span></span>) <span class="hljs-comment"><span class="hljs-comment">######### counter_komm=0 counter_dlink=0 counter_qtech=0 counter_eltex=0 counter_raisecom=0 counter_ROS=0 counter_qtech1_0=0 counter_qtech2_0=0 ########## for host in komm.readlines(): print('connect....',host) vend = '' response = os.system('ping -c 1 ' + host) verinfo = open('servers_&amp;_log/ver.txt', 'w') ver_status = '' sab_versus = '' if response == 0: telnet = pexpect.spawn('telnet ' + host,timeout=40) vend = telnet.expect(['login:', 'Login:', 'User Name:', 'Username']) telnet.close() tn = Telnet(host.replace('\n', ''), 23,30) try: print('Ok'+'\n') tn.read_until(b':') tn.write((user +'\n').encode('ascii')) tn.read_until(b':') tn.write((password + '\n').encode('ascii')) time.sleep(3) tn.read_until(b'#',timeout=20) except: print('connection refused' + '\n') f = open('servers_&amp;_log/log.txt', 'a') print(host, 'connection refused', file=log) print('#' * 100, host, file=log) ###   ######################################################### if vend == 0:#    Qtech tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is() ...</span></span></code> </pre> <br></div></div><br> æˆ‘å†³å®šä¸æ‰“æ‰°ï¼Œå¹¶åœ¨æ­£æ–‡ä¸­ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è®¾ç½®å˜é‡ï¼Œæˆ‘çŸ¥é“è¿™ä¸æ˜¯å®‰å…¨çš„ï¼Œæˆ‘æ­£åœ¨åŠªåŠ›ã€‚ <br><br> æ‰“å¼€æ—¥å¿—æ–‡ä»¶å’Œå¼€å…³åˆ—è¡¨ <br><br><pre> <code class="python hljs">komm=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/komm.txt'</span></span>) log=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/log.txt'</span></span>,<span class="hljs-string"><span class="hljs-string">'a'</span></span>)</code> </pre> <br> åœ¨ä½¿ç”¨forå¾ªç¯ä¹‹åï¼Œè¯»å–å¸¦æœ‰äº¤æ¢æœºipåœ°å€çš„è¡Œ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> host <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> komm.readlines(): print(<span class="hljs-string"><span class="hljs-string">'connect....'</span></span>,host) vend = <span class="hljs-string"><span class="hljs-string">''</span></span></code> </pre><br> æˆ‘ä»¬æ£€æŸ¥å®ƒçš„å¯ç”¨æ€§ <br><br><pre> <code class="python hljs">response = os.system(<span class="hljs-string"><span class="hljs-string">'ping -c 1 '</span></span> + host)</code> </pre> <br> å¦‚æœå¯ä»¥ä½¿ç”¨pexpectåº“è®¿é—®å®ƒï¼Œæˆ‘ä»¬å°†åœ¨æ­¤è¿­ä»£ä¸­å°è¯•é€šè¿‡telnetè¿›è¡Œè¿æ¥ï¼Œå¹¶åœ¨é‚€è¯·æ—¶è¿›è¡Œç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼Œè¿™æ˜¯æˆ‘åœ¨å¼€å§‹æ—¶å†™åˆ°çš„ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> response == <span class="hljs-number"><span class="hljs-number">0</span></span>: telnet = pexpect.spawn(<span class="hljs-string"><span class="hljs-string">'telnet '</span></span> + host,timeout=<span class="hljs-number"><span class="hljs-number">40</span></span>) vend = telnet.expect([<span class="hljs-string"><span class="hljs-string">'login:'</span></span>, <span class="hljs-string"><span class="hljs-string">'Login:'</span></span>, <span class="hljs-string"><span class="hljs-string">'User Name:'</span></span>, <span class="hljs-string"><span class="hljs-string">'Username'</span></span>]) telnet.close() tn = Telnet(host.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-number"><span class="hljs-number">23</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre><br>  vendå˜é‡çš„å€¼å°†ä»‹äº0åˆ°3ä¹‹é—´ï¼ˆå«0å’Œ3ï¼‰ï¼Œå¹¶ä¸”æ ¹æ®çœ‹åˆ°çš„ç™»å½•æç¤ºï¼Œå°†å½¢æˆå¦ä¸€ä¸ªåˆ†æ”¯ã€‚ <br><br> ä»è¿™æ®µä»£ç ä¸­ï¼Œç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘æ­£åœ¨ä¸äº¤æ¢æœºå»ºç«‹è¿æ¥å¹¶ç«‹å³å…³é—­è¿æ¥ï¼Œè¿™å¹¶éæ²¡æœ‰é“ç†ã€‚ æˆ‘å°è¯•ä»…ä½¿ç”¨telnetlibåº“ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡æµ‹è¯•ä¸­ï¼Œè¯¥è„šæœ¬ä¼šå®šæœŸå¡ä½ï¼Œå¹¶å› è¶…æ—¶è€Œæ‰è½ï¼Œè¿™å¯¹æˆ‘ä»¬å¾ˆæœ‰å¸®åŠ©ã€‚ <br><br> å…³é—­è¿æ¥åï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨telnetlibåº“è¿›è¡Œé‡æ–°è¿æ¥ã€‚ <br><br> ä¸ºäº†é¿å…å‡ºé”™ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢æ£€æŸ¥äº†è¯¥å¼€å…³æ˜¯å¦å¯è®¿é—®ï¼Œå¹¶æ’é™¤äº†ç”±äºä¸€ä¸ªç©ºé—²å¼€å…³è€Œåœ¨æ“â€‹â€‹ä½œæœŸé—´å¯¼è‡´è„šæœ¬ä¸­æ–­çš„é—®é¢˜ï¼Œè¯·å°è¯•å°†æ‰€æœ‰å†…å®¹åŒ…è£…åœ¨tryé™¤å—ä¹‹å¤–ã€‚ <br><br> åå¤å‡ºç°çš„æƒ…å†µæ˜¯ï¼Œåœ¨100å°äº¤æ¢æœºä¸­ï¼Œæœ‰1å°ä¸è®©è‡ªå·±è¿›å…¥ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: print(<span class="hljs-string"><span class="hljs-string">'Ok'</span></span>+<span class="hljs-string"><span class="hljs-string">'\n'</span></span>) tn.read_until(<span class="hljs-string"><span class="hljs-string">b':'</span></span>) tn.write((user +<span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) tn.read_until(<span class="hljs-string"><span class="hljs-string">b':'</span></span>) tn.write((password + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) time.sleep(<span class="hljs-number"><span class="hljs-number">3</span></span>) tn.read_until(<span class="hljs-string"><span class="hljs-string">b'#'</span></span>,timeout=<span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: print(<span class="hljs-string"><span class="hljs-string">'connection refused'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f = open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/log.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>) print(host, <span class="hljs-string"><span class="hljs-string">'connection refused'</span></span>, file=log) print(<span class="hljs-string"><span class="hljs-string">'#'</span></span> * <span class="hljs-number"><span class="hljs-number">100</span></span>, host, file=log)</code> </pre> <br>  ... <br> å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå¹¶ä¸”æˆ‘ä»¬å·²å»ºç«‹è¿æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œ <br> æˆ‘ä»¬è‚¯å®šçŸ¥é“ä»»ä½•å†’å·æç¤ºéƒ½ä½¿ç”¨å†’å·ã€‚ <br><br> æ‰€ä»¥æˆ‘ä»¬åœ¨ç­‰ä»– <br><br><pre> <code class="python hljs">tn.read_until(<span class="hljs-string"><span class="hljs-string">b':'</span></span>)</code> </pre> <br> è¾“å…¥ç™»å½•åå <br><br><pre> <code class="python hljs">tn.write((user +<span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>))</code> </pre> <br> ç­‰å¾…å¯†ç å†’å· <br><br><pre> <code class="python hljs">tn.read_until(<span class="hljs-string"><span class="hljs-string">b':'</span></span>)</code> </pre> <br> è¾“å…¥å¯†ç  <br><br><pre> <code class="python hljs">tn.write((password + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>))</code> </pre> <br> ç„¶åæˆ‘ä»¬ç­‰å¾…3ç§’ï¼ˆå°½ç®¡å¦‚æ­¤ï¼Œå¦åˆ™æˆ‘ä»¬åšäº†å¾ˆå¤šå·¥ä½œï¼‰ <br><br><pre> <code class="python hljs">time.sleep(<span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br> ç­‰å¾…é‚€è¯·å <br><br><pre> <code class="python hljs">tn.read_until(<span class="hljs-string"><span class="hljs-string">b'#'</span></span>,timeout=<span class="hljs-number"><span class="hljs-number">20</span></span>)</code> </pre> <br> åœ¨æ­¤é˜¶æ®µï¼Œæˆ‘ä»¬è¿›å…¥ç¬¬äºŒçº§ä»¥æ£€æŸ¥ä¾›åº”å•†ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> vend == <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-comment"><span class="hljs-comment">#    Qtech tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is()</span></span></code> </pre> <br> å› ä¸º æˆ‘ä»¬ä»¥ä¸ºæˆ‘ä»¬åˆ°è¾¾äº†Qtechï¼Œå¦‚æœæ‚¨ä»”ç»†é˜…è¯»ï¼Œåˆ™åœ¨æˆ‘ä»¬çš„åŠ¨ç‰©å›­ä¸­æœ‰ä¸¤ç§ç‰ˆæœ¬çš„qtechè¯­æ³•ä¸åŒï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦è°ƒå’Œã€‚ <br><br> å› æ­¤ï¼Œæˆ‘ä»¬ç»™å‡ºshow verå‘½ä»¤ï¼Œå°†æ‰€æœ‰è¾“å‡ºæ”¾å…¥ver.txtæ–‡ä»¶ <br> å¹¶è°ƒç”¨å¦‚ä¸Šæ‰€è¿°çš„who_isï¼ˆï¼‰è¿‡ç¨‹ã€‚ è¡¨æ¼”å›¢é˜Ÿå¯¹æ‰€æœ‰Qtechï¼ŒRaisecomï¼ŒEltexï¼Œ <br><br> ä¸å¹¸çš„æ˜¯ï¼ŒD-linkå¹¶ä¸ç†è§£ï¼Œä»–éœ€è¦è¯´ç‚¹swichï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆèªæ˜ï¼Œå¹¶æ²¡æœ‰ç™½è´¹åŠ›æ°”åœ°ä½¿ç”¨å‡å®šçš„ä¾›åº”å•†å®šä¹‰è¿›è¡Œè¿­ä»£ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> vend == <span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-comment"><span class="hljs-comment">#   D-link tn.write(('show sw' + '\n').encode('ascii')) tn.write(('a' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is()</span></span></code> </pre><br> å› æ­¤ï¼Œç«‹å³åœ¨è¾“å…¥show swichåæ‰“äº†ä¸€ä¸ªå°å­—ï¼Œè¯¥å¼€å…³æ˜¾ç¤ºä¸å®Œæ•´çš„ä¿¡æ¯ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·æŒ‰ä»»æ„é”®ä»¥è¿›ä¸€æ­¥è¾“å‡ºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç„¶åå‘é€â€œ aâ€å­—ç¬¦ä»¥æ˜¾ç¤ºå®Œæ•´çš„ä¿¡æ¯ã€‚ <br><br><pre> <code class="python hljs">tn.write((<span class="hljs-string"><span class="hljs-string">'a'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>))</code> </pre> <br> ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥å…³é—­clipadding <br><br> è¿™æ˜¯ä¾›åº”å•†éªŒè¯ç»“æŸçš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥99ï¼…çš„æ¦‚ç‡å‡å®šæˆ‘ä»¬å·²ç»æ­£ç¡®è¯†åˆ«äº†äº¤æ¢æœºçš„å‹å·ï¼Œç„¶åå¯ä»¥ç»§ç»­è¿›è¡Œé…ç½®ã€‚ <br><br> å¯¹äºæ¯ä¸ªå¼€å…³ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ç»„å‘½ä»¤ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">é…ç½®å—</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span><span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> ver_status == <span class="hljs-string"><span class="hljs-string">'qtech_rev_1.0'</span></span>: tn.write((<span class="hljs-string"><span class="hljs-string">'show ver'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) print((tn.read_until(<span class="hljs-string"><span class="hljs-string">b'#'</span></span>).decode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)), file=log) counter_qtech1_0+=<span class="hljs-number"><span class="hljs-number">1</span></span> komand_qtech1_0=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/komand_qtech_ver1.0.txt'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> kommand <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> komand_qtech1_0.readlines(): tn.write((kommand.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) tn.write((<span class="hljs-string"><span class="hljs-string">'exit'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) print(tn.read_all().decode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>), file=log) print(<span class="hljs-string"><span class="hljs-string">'   qtech1.0'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Qtech rev1.0 '</span></span> + host, file=log) print(<span class="hljs-string"><span class="hljs-string">'#'</span></span> * <span class="hljs-number"><span class="hljs-number">100</span></span>, file=log) <span class="hljs-comment"><span class="hljs-comment">################################################################################ elif ver_status == 'qtech_rev_2.0': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) counter_qtech2_0+=1 komand_qtech2_0=open('servers_&amp;_log/komand_qtech_ver2.0.txt') print('   qtech2.0') for kommand in komand_qtech2_0.readlines(): tn.write((kommand.replace('\n', '') + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) print('Qtech rev2.0 ' + host, file=log) print('#' * 100, file=log) ...</span></span></code> </pre><br></div></div><br> å‡½æ•°è®¡ç®—å®Œå¹¶è¿”å›ver_statuså˜é‡åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›è¡Œåˆ†æ”¯å·¥ä½œï¼Œå› ä¸º æˆ‘ä»¬ç¡®åˆ‡çŸ¥é“å½“å‰æ­£åœ¨ä½¿ç”¨å“ªä¸ªå¼€å…³ã€‚ <br> é¦–å…ˆï¼Œæˆ‘ä»¬ç»™switchå‘½ä»¤show verï¼Œå¹¶å°†è¾“å‡ºå†™å…¥æ—¥å¿—ï¼ˆå…³äºd-linkï¼Œè®°ä½æˆ‘ä»¬ç»™å®ƒå‘½ä»¤sh swï¼‰ <br><br><pre> <code class="python hljs">tn.write((<span class="hljs-string"><span class="hljs-string">'show ver'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)) print((tn.read_until(<span class="hljs-string"><span class="hljs-string">b'#'</span></span>).decode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>)), file=log)</code> </pre> <br> ç¡®ä¿ä¿ç•™è®¡æ•°å™¨ä»¥è¯†åˆ«ä¸ç¬¦åˆé¡¹ã€‚ <br><pre> <code class="python hljs">counter_qtech1_0+=<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br> æˆ‘ä»¬ç”¨å‘½ä»¤æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ <br><pre> <code class="python hljs">komand_qtech1_0=open(<span class="hljs-string"><span class="hljs-string">'servers_&amp;_log/komand_qtech_ver1.0.txt'</span></span>)</code> </pre> <br> æ–‡ä»¶ä¸­å‘½ä»¤çš„é¡ºåºå¿…é¡»ä¸ç®¡ç†å‘˜æ‰‹åŠ¨è¾“å…¥çš„é¡ºåºç›¸åŒ <br><br> ä¸€ä¸ªä¾‹å­ï¼š <br><br> <code>conf <br> vlan 2525 <br> name SPD <br> int ethe 1/1 <br> sw mode access <br> sw acc vl 2525 <br> exit <br> exit <br> save <br> y <br></code> <br> ç„¶åä¸€åˆ‡éƒ½å–å†³äºåœºæ™¯-æˆ‘ä»¬è¯»å–æ–‡ä»¶ç›´åˆ°è¡Œç»“æŸå¹¶æ‰§è¡Œå®ƒä»¬ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> kommand <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> komand_qtech1_0.readlines(): tn.write((kommand.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>).encode(<span class="hljs-string"><span class="hljs-string">'ascii'</span></span>))</code> </pre> <br> é€€å‡ºå¾ªç¯åï¼Œæˆ‘ä»¬å‘Šè¯‰äº¤æ¢æœºé€€å‡ºå¹¶å°†æ‰€æœ‰è¾“å‡ºè¯»å–åˆ°æ–‡ä»¶ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä»…ä½¿ç”¨qtech1.0ï¼Œå› ä¸º æœ‰æ—¶ï¼Œè„šæœ¬ä¼šé¢„æ–™åˆ°æŸäº›äº‹æƒ…ï¼Œå¹¶ä¸”è¿™ç§åˆ‡æ¢å°±æ˜¯è¿™æ ·ï¼Œä»¥å…å¤§æƒŠå°æ€ªï¼Œè¿™ç§è§£å†³æ–¹æ¡ˆåœ¨æˆ‘çœ‹æ¥ä¼¼ä¹æ›´ä¼˜é›…ã€‚ <br><br> é…ç½®å®Œäº¤æ¢æœºåï¼Œæˆ‘ä»¬å°†æ€»è®¡æ•°å™¨å¢åŠ ä¸€ã€‚ <br><br><pre> <code class="python hljs">counter_komm+=<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br> ç„¶åï¼Œæˆ‘ä»¬é‡æ–°å¼€å§‹ï¼Œä½¿ç”¨å¼€å…³ä»æ–‡ä»¶ä¸­è¯»å–ä¸‹ä¸€è¡Œï¼Œç¡®å®šæ¨¡å‹å¹¶è¿›è¡Œé…ç½®ã€‚ <br><br> é€€å‡ºä¸»è¦å‘¨æœŸåï¼Œæ‚¨éœ€è¦æ€»ç»“å·²å®Œæˆçš„å·¥ä½œï¼Œ <br> åœ¨æ—¥å¿—æœ«å°¾ï¼Œæˆ‘ä»¬è¾“å…¥æ‰€æœ‰å¤„ç†è¿‡çš„æ¨¡å‹ï¼Œå¹¶ä¸”æ—¥æœŸæ˜¯å¿…å¡«é¡¹ï¼Œé‚£ä¹ˆï¼Œå¦‚æœæ²¡æœ‰æ—¥æœŸï¼Œè¯¥æ€ä¹ˆåŠã€‚ <br><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">'\n\n\n : '</span></span>, counter_komm,file=log) print(<span class="hljs-string"><span class="hljs-string">'\n\nD-link:'</span></span>, counter_dlink,<span class="hljs-string"><span class="hljs-string">'\nQtech ver1.0:'</span></span>, counter_qtech1_0,<span class="hljs-string"><span class="hljs-string">'\nROS:'</span></span>, counter_ROS,<span class="hljs-string"><span class="hljs-string">'\nRaisecom:'</span></span>,counter_raisecom,<span class="hljs-string"><span class="hljs-string">'\nEltex:'</span></span>, counter_eltex,<span class="hljs-string"><span class="hljs-string">'\nQtech ver2.0 :'</span></span>, counter_qtech2_0,file=log) print(<span class="hljs-string"><span class="hljs-string">'\n: '</span></span>, datetime.datetime.now().isoformat(),<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">'#'</span></span>*<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-string"><span class="hljs-string">'\n\n\n\n\n'</span></span>,file=log) verinfo.close() log.close()</code> </pre> <br> è¯¥è„šæœ¬å·²è¢«é‡å¤å¤„ç†ï¼Œå¹¶ä¸”è¯¥è¿‡ç¨‹ä¸ä¼šåœ¨é‚£é‡Œåœæ­¢ã€‚ <br> è°¢è°¢å¤§å®¶çš„å…³æ³¨ã€‚ æ¬¢è¿è¿›è¡Œå»ºè®¾æ€§çš„æ‰¹è¯„ã€‚ <br><br> æ‰€æœ‰ä»£ç éƒ½åœ¨æ‰°æµå™¨ä¸‹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 #22/06/2017 17:17 import telnetlib import time import os import sys import getpass import pexpect from telnetlib import Telnet import datetime import subprocess def who_is(): #     ,      . global ver_status global sab_versus global versus sab_versus='' ver_status='' versus='' a = 'Serial No.:1405' # #qtech rev1 #b = 'Serial No.:3922' # #qtech rev2 #c = 'Serial No.:5436' # #qtech rev2 #l = 'Serial No.:16101' # #qtech rev2 d = 'Command: show switch' # #d-link f = 'Raisecom Operating System Software' # #raisecom h = 'QOS' # #raisecom-qtech j = 'MES1124M' # #eltex k = 'eltex' # #eltex n = 'Build245' #qtech2.0 parser=open('servers_&amp;_log/ver.txt', 'r') for line in parser.readlines(): line1 = line.find(a) #line2 = line.find(b) #line3 = line.find(c) line4 = line.find(d) line5 = line.find(f) line6 = line.find(h) line7 = line.find(j) line8 = line.find(k) #line9 = line.find(l) line10 = line.find(n) if line1 != -1: ver_status='qtech_rev_1.0' #if line2 != -1 or line3 != -1 or line9 !=-1: #ver_status='qtech_rev_2.0' if line4 != -1: ver_status='d-link' if line5 != -1: ver_status='raisecom' if line6 != -1: ver_status='raisecom-qtech' sab_versus=1 if line7 !=-1: ver_status='eltex' if line8 !=-1: ver_status='eltex' if line10 != -1: ver_status = 'qtech_rev_2.0' time.sleep(0.1) parser.close() os.remove('servers_&amp;_log/ver.txt') return ver_status,sab_versus user='user' password='password' komm=open('servers_&amp;_log/komm.txt') log=open('servers_&amp;_log/log.txt','a') counter_komm=0 counter_dlink=0 counter_qtech=0 counter_eltex=0 counter_raisecom=0 counter_ROS=0 # counter_qtech1_0=0 counter_qtech2_0=0 for host in komm.readlines(): print('connect....',host) vend = '' #tn = Telnet(host.replace('\n', ''), 23, 20) response = os.system('ping -c 1 ' + host) verinfo = open('servers_&amp;_log/ver.txt', 'w') ver_status = '' sab_versus = '' if response == 0: telnet = pexpect.spawn('telnet ' + host,timeout=40) vend = telnet.expect(['login:', 'Login:', 'User Name:', 'Username']) telnet.close() tn = Telnet(host.replace('\n', ''), 23,30) try: print('Ok'+'\n') tn.read_until(b':') tn.write((user +'\n').encode('ascii')) tn.read_until(b':') tn.write((password + '\n').encode('ascii')) time.sleep(3) tn.read_until(b'#',timeout=20) except: print('connection refused' + '\n') f = open('servers_&amp;_log/log.txt', 'a') print(host, 'connection refused', file=log) print('#' * 100, host, file=log) ###   ################################################################################ if vend == 0:#    Qtech tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is() ################################################################################ if vend == 1: #   Raisecom,Raisecom-Qtech tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is() ################################################################################ if vend == 2:#   Eltex tn.write(('show system' + '\n').encode('ascii')) tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is() ################################################################################ if vend == 3:#   D-link tn.write(('show sw' + '\n').encode('ascii')) tn.write(('a' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=verinfo) verinfo.close() who_is() # ###  # ################################################################################ if ver_status == 'd-link': tn.read_until(b'#', timeout=20) tn.write(('show sw' + '\n').encode('ascii')) tn.write(('a' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) print('D-link ' + host,file=log) print('#'*100,file=log) counter_dlink+=1 ################################################################################ elif ver_status == 'qtech_rev_1.0': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) counter_qtech1_0+=1 komand_qtech1_0=open('servers_&amp;_log/komand_qtech_ver1.0.txt') for kommand in komand_qtech1_0.readlines(): tn.write((kommand.replace('\n', '') + '\n').encode('ascii')) #print((tn.read_until(b'#').decode('ascii')), file=log) tn.write(('exit' + '\n').encode('ascii')) print(tn.read_all().decode('ascii'), file=log) print('Qtech rev1.0 ' + host, file=log) print('#' * 100, file=log) ################################################################################ elif ver_status == 'qtech_rev_2.0': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) counter_qtech2_0+=1 komand_qtech2_0=open('servers_&amp;_log/komand_qtech_ver2.0.txt') for kommand in komand_qtech2_0.readlines(): tn.write((kommand.replace('\n', '') + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) time.sleep(1) print('Qtech rev2.0 ' + host, file=log) print('#' * 100, file=log) ################################################################################ elif ver_status == 'raisecom-qtech': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) raisecom_command = open('servers_&amp;_log/komand_raisecom.txt') for komand in raisecom_command.readlines(): tn.write((komand.replace('\n', '') + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) print('ROS '+ host,file=log) print('#'*100,file=log) counter_ROS+=1 ################################################################################ elif ver_status == 'raisecom': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) counter_raisecom+=1 raisecom_command = open('servers_&amp;_log/komand_raisecom.txt') for komand in raisecom_command.readlines(): tn.write((komand.replace('\n', '') + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) print(host, ':', 'RAISECOM', file=log) print('#' * 100, host, file=log) ################################################################################ elif ver_status == 'eltex': tn.write(('show ver' + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) eltex_command=open('servers_&amp;_log/komand_eltex.txt') for komand in eltex_command.readlines(): tn.write((komand.replace('\n', '') + '\n').encode('ascii')) print((tn.read_until(b'#').decode('ascii')), file=log) print('Eltex ' + host, file=log) print('#' * 100, file=log) counter_eltex+=1 else: print('no ping') counter_komm+=1 print('\n\n\n : ', counter_komm,file=log) print('\n\nD-link:', counter_dlink,'\nQtech ver1.0:', counter_qtech1_0,'\nROS:', counter_ROS,'\nRaisecom:',counter_raisecom,'\nEltex:', counter_eltex,'\nQtech ver2.0 :', counter_qtech2_0,file=log) print('\n: ', datetime.datetime.now().isoformat(),'\n', '#'*100,'\n\n\n\n\n',file=log) verinfo.close() log.close()</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN415453/">https://habr.com/ru/post/zh-CN415453/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN415441/index.html">åœ¨ç¾å›½ï¼Œå¯¹æ”¿åºœæœºæ„çš„å‹’ç´¢è½¯ä»¶æ”»å‡»è¶Šæ¥è¶Šå¤š</a></li>
<li><a href="../zh-CN415443/index.html">MDGå’ŒITMOå¤§å­¦é‚€è¯·å‚åŠ æœºå™¨å­¦ä¹ æš‘æœŸå­¦æ ¡</a></li>
<li><a href="../zh-CN415445/index.html">2018å¹´7æœˆITé¢†åŸŸäººåŠ›èµ„æºä¸“ä¸šäººå‘˜çš„äº‹ä»¶æ‘˜è¦</a></li>
<li><a href="../zh-CN415447/index.html">å®ç”¨ç¨‹åºä»¤ç‰Œå‘è¡Œæ˜¯æ­»èƒ¡åŒ</a></li>
<li><a href="../zh-CN415451/index.html">Biostar Racing P1ï¼šä»ç®€å•åˆ°å¤æ‚</a></li>
<li><a href="../zh-CN415455/index.html">é—®ä¼Šæ£®ï¼šæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå¤ªé˜³èƒ½å±æ¥åº”å¯¹æ°”å€™å˜åŒ–å—ï¼Ÿ</a></li>
<li><a href="../zh-CN415457/index.html">æ‰¾åˆ°å­˜åœ¨æ–°çš„åŸºæœ¬ç²’å­çš„è¯æ®</a></li>
<li><a href="../zh-CN415459/index.html">ä¸­å›½äººæœ‰è¿·ä¿¡å—ï¼Ÿ</a></li>
<li><a href="../zh-CN415461/index.html">OpenAIåœ¨Dota 2ä¸­å–å¾—è¿›æ­¥ï¼šåŠä¸“ä¸šå›¢é˜Ÿè¢«å‡»è´¥</a></li>
<li><a href="../zh-CN415463/index.html">HPE Superdome Flexï¼šæ€§èƒ½å’Œæ‰©å±•çš„æ–°æ°´å¹³</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>