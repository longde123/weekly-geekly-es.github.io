<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👵🏾 😗 🈲 Smart Lock Dooris ☮️ 👨‍🔧 🧢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a deux ans, après avoir effectué des réparations majeures dans mon appartement, j'ai décidé d'installer une serrure intelligente sur la nouvelle ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Lock Dooris</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405869/"><img src="https://habrastorage.org/web/ddd/57d/7e3/ddd57d7e3fa747bfa281cb59a767895e.jpg"><br>  Il y a deux ans, après avoir effectué des réparations majeures dans mon appartement, j'ai décidé d'installer une serrure intelligente sur la nouvelle porte d'entrée.  Il est rapidement devenu évident qu'aucun des modèles disponibles à l'époque ne convenait à ma porte métallique tout à fait ordinaire.  Après avoir discuté de cette «découverte» avec l'un de mes camarades, nous avons décidé de corriger cette faille fatale et - comme il se doit dans de tels cas - de créer une autre serrure intelligente. <a name="habracut"></a><br><br>  Avant de passer à l'histoire de notre création, il ne sera pas hors de propos d'expliquer ce qui est si inhabituel dans les portes russes, mais en même temps d'attirer votre attention sur d'autres points que vous devez connaître lors du choix d'une serrure intelligente.  Et nous commencerons par répondre à la question principale. <br><br><h2>  À quoi sert un verrou intelligent? </h2><br>  Il semble que la réponse à cette question soit évidente: se débarrasser des clés.  C'est du moins ce que cela nous a semblé lorsque nous avons commencé à développer notre appareil.  Mais les tout premiers tests ont montré que si vous remplacez simplement les clés par un smartphone, il y aura peu d'avantages: être à côté de la porte, il est beaucoup plus facile de le déverrouiller ou de le verrouiller avec une clé que d'appuyer sur le bouton dans une application mobile qui doit encore être lancée après le déverrouillage du smartphone.  Bien sûr, la possibilité de contrôler à distance la porte en soi peut être très utile (par exemple, pour déverrouiller la porte de votre belle-mère bien-aimée sans vous lever du canapé), mais vous ne pourrez probablement pas l'utiliser. <br><br>  Pour devenir un appareil vraiment utile, une serrure intelligente devrait vous éviter la plupart des manipulations manuelles quotidiennes des portes.  Autrement dit, une «serrure intelligente» vraiment intelligente doit - comme un portier dans un hôtel décent - verrouiller la porte derrière vous lorsque vous quittez la maison et la déverrouiller vous-même lorsque vous revenez. <br><br><h2>  Clever Keyswitch </h2><br>  Malgré son nom, une serrure intelligente typique n'est pas une serrure.  Très souvent, ce n'est qu'une «garniture», qui est installée à l'intérieur de la porte sur le plateau tournant ou la clé d'une serrure de porte conventionnelle.  Une telle superposition ne contient pas de mécanisme de verrouillage, mais ne peut faire tourner qu'une clé ou un moulinet dans une serrure de porte conventionnelle.  Bien sûr, il existe des modèles qui sont des verrous à part entière (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Samsung SHP-DP728</a> ), mais comme les dimensions de la partie mortaise des serrures de porte ne sont pas standardisées, vous ne réussirez probablement pas à remplacer votre serrure de porte habituelle par une serrure intelligente - les trous ne correspondront tout simplement pas.  Mais l'intelligent «interrupteur à clé» peut théoriquement être installé sur presque toutes les portes, bien qu'en réalité tout soit un peu plus compliqué. <br><br><h2>  Pêne dormant américain </h2><br>  Si vous vivez en Russie, alors, très probablement, deux serrures sont installées dans votre porte avant - serrures à cylindre et à levier - chacune étant verrouillée / déverrouillée lorsque la clé est tournée de deux ou même trois tours.  Et la plupart des serrures intelligentes sont uniquement compatibles avec les serrures de porte de type Deadbolt.  Le pêne dormant est un diable qui se déverrouille et se verrouille avec une clé de l'extérieur et un moulinet de l'intérieur.  Un tel verrou est entièrement déployé / rétracté lorsque le plateau tournant tourne de 90 à 180 °. <br><br>  Les serrures telles que Deadbolt sont courantes aux États-Unis, dont le marché est très probablement principalement ciblé par les créateurs de gadgets intelligents.  En conséquence, de nombreux «interrupteurs à clé» (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Sesame</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Lockitron</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">August</a> ) ne sont tout simplement pas en mesure de tourner la clé ou la roulette plus d'un tour, ou sont si profondément intégrés aux mécanismes à pêne dormant (tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Schlage Sense</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Kevo</a> ) qu'ils ne peuvent plus être appelez "superpositions" et il est presque impossible à utiliser avec d'autres types de serrures de porte. <br><br><h2>  Gestion via BLE et Internet </h2><br>  En règle générale, les serrures de porte intelligentes sont contrôlées via Bluetooth Low Energy (BLE) à l'aide d'une application mobile.  On trouve également des appareils qui prennent en charge le WiFi, ZigBee et Z-Wave (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">RemoteLock</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Yale</a> ), mais BLE est toujours le leader par une large marge.  Il y a une explication très simple à cela: la plupart des smartphones modernes n'ont pas de support intégré pour ZigBee ou Z-Wave, et ils n'utilisent pas de WiFi énergivore car les verrous intelligents sont principalement alimentés par des batteries. <br><br>  De nombreux fabricants de serrures intelligentes vous permettent de contrôler leurs appareils non seulement via BLE, mais également via Internet.  Cela nécessite généralement l'achat d'un «pont» spécial, qui est simultanément connecté à la fois à la serrure intelligente (via BLE) et à votre réseau domestique (généralement via WiFi).  Un exemple d'un tel «pont» est le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">pont Nuki</a> , qui «internetise» la serrure intelligente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Nuki</a> (c'est d'ailleurs l'un des rares «interrupteurs à clé» pouvant être installés sur la plupart de nos portes sans problème). <br><br><h2>  Batteries longue durée </h2><br>  Comme nous l'avons déjà dit, toutes les serrures intelligentes que nous connaissons sont alimentées par des piles.  Il y a deux raisons à cela.  La première est la facilité d'installation: pas besoin de réfléchir à la façon de poser le câble pour alimenter la serrure intelligente.  La seconde est la durabilité des piles: en règle générale, elles ne doivent être changées qu'une ou deux fois par an.En outre, tout verrou intelligent décent avertira son propriétaire de la nécessité de remplacer les piles à l'avance.  Néanmoins, beaucoup craignent toujours de ne pas avoir à ouvrir la porte avec un «broyeur» en cas de problème.  Et il faut l'avouer: ils craignent pour une bonne raison. <br><br><h2>  Éventualités </h2><br>  Que votre serrure intelligente soit alimentée par des piles ou à partir d'un réseau avec une source d'alimentation de secours, vous pouvez vous retrouver dans une situation où, étant à l'extérieur d'une porte verrouillée, vous ne pouvez pas l'ouvrir avec un smartphone, par exemple, parce que sa batterie est morte, ou parce que le verrou est en panne, ou, enfin, simplement parce que vous avez perdu votre smartphone. <br><br>  Pour éviter un remplacement imprévu de la porte, il est recommandé d'installer une serrure intelligente uniquement afin qu'il reste possible de déverrouiller la porte avec une clé dans toute situation d'urgence.  La clé elle-même ne doit pas toujours être avec vous, mais comme pour la perte de la clé dans une serrure ordinaire, la clé de rechange doit être quelque part à proximité (avec des voisins ou des parents ou des amis vivant à proximité).  Pour les mêmes raisons, une serrure intelligente conçue pour une serrure de type pêne dormant n'est catégoriquement pas recommandée pour être installée sur un loquet oscillant de nuit qui ne peut pas être ouvert avec une clé de l'extérieur. <br><br><h2>  Ma maison est mon château </h2><br>  Les serrures intelligentes sont installées non pas pour augmenter la résistance à l'effraction de la porte (il existe, pour cela, une classe distincte d'appareils - les potences électroniques encastrées, par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">titane</a> ), mais pour rendre la maison plus confortable.  Vous devez sacrifier la sécurité pour le confort: toute serrure intelligente contrôlée par les airs est toujours un autre vecteur d'attaque potentiel qu'un attaquant peut essayer d'utiliser pour ouvrir la porte.  Qu'il réussisse ou non dépend de la façon dont les créateurs du château s'en sont occupés.  Bien sûr, tous les verrous intelligents utilisent l'authentification et l'autorisation et chiffrent tout le trafic transmis, mais comme le montre la pratique, des vulnérabilités dans les appareils intelligents sont toujours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">trouvées</a> de temps en temps. <br><br>  Nous devrions également parler de la sécurité du BLE lui-même, qui, nous le rappelons, est le moyen le plus courant de gérer les verrous intelligents.  Malheureusement, tous les modes de sécurité «appropriés» proposés par la norme BLE jusqu'à la version 4.1 incluse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">présentent des vulnérabilités</a> .  Par conséquent, de nombreux fabricants d'appareils intelligents mettent en œuvre seuls les protocoles et algorithmes nécessaires pour protéger les connexions sans fil. <br><br>  Les autres fabricants sont limités à la prise en charge des connexions sécurisées BLE - Comparaison numérique.  Il s'agit d'un nouveau mode de sécurité standard dans lequel toutes les données sont cryptées avec l'algorithme AES-128, et la clé de cryptage est générée à l'aide de l'algorithme ECDH, vérifiée via un canal indépendant (les conversations secrètes dans le messager Telegram sont protégées de manière similaire).  Ce mode est apparu dans BLE 4.2, et pour le moment il n'y a aucune vulnérabilité trouvée. <br><br><h2>  Smart Lock Dooris </h2><br>  Maintenant que vous savez presque tout sur les serrures intelligentes, il est temps de vous présenter notre création - la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">serrure intelligente Dooris</a> .  Doris est un interrupteur à clé typique pour une serrure à cylindre.  À l'aide d'une pince à vis spéciale, il est fixé directement sur le cylindre de verrouillage et, si nécessaire, est retiré sans laisser de trace.  Dooris peut tourner la clé ou le plateau tournant autant de tours que nécessaire pour déverrouiller et verrouiller votre porte.  La serrure intelligente est alimentée par deux piles CR123A.  Ils suffiront pendant environ un an, si en moyenne vous quittez la maison 3 fois par jour (et, en conséquence, revenez le même nombre de fois).  Le verrouillage est contrôlé via BLE 4.2 en mode Connexions sécurisées - Comparaison numérique à l'aide d'une application mobile pour iOS ou Android. <br><br>  Le cerveau de Dooris est le SoC nRF52832, auquel plusieurs capteurs sont connectés: des capteurs magnétiques vous permettent de déterminer la position de la platine avec une précision de 90 °, un accéléromètre - le fait d'ouvrir et de fermer la porte, et des capteurs de courant et de tension - pour contrôler la consommation du moteur et la décharge de la batterie. <br><br>  Il y a deux moteurs dans notre serrure: l'un déverrouille et verrouille la porte, et le second engage et désengage les engrenages de la boîte de vitesses du premier.  Cela est nécessaire pour que vous puissiez à tout moment utiliser la clé ou le moulinet sans aucune gêne, c'est-à-dire sans avoir à surmonter la résistance de la boîte de vitesses.  Tous les engrenages sont en métal et le boîtier est en plastique ABS.  Pour éviter le frottement des nœuds en plastique les uns contre les autres, un roulement est prévu dans la serrure. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/CKOaixTRIYw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Lors du tournage de la vidéo, nous avons contrôlé Dooris manuellement, mais comme cela a été dit au début, il est préférable d'utiliser le «mode portier», dans lequel la serrure intelligente verrouille / déverrouille la porte elle-même.  Nous allons maintenant vous expliquer comment fonctionne ce mode. <br><br>  En quittant la maison, vous déverrouillez la porte avec un plateau tournant.  Dès que vous sortez et claquez la porte, Dooris s'en rendra compte à l'aide d'un accéléromètre et verrouillera la porte quelques secondes après l'avoir claquée.  Le délai est nécessaire afin de vous donner la possibilité de vous assurer que le smartphone est avec vous. <br><br>  Si, en quittant votre domicile, vous vous trouvez à plus de 30 mètres de la porte (déterminé par la surveillance des geofences), alors au retour, l'application mobile ouvrira la porte dès qu'elle recevra un signal iBeacon d'une serrure intelligente.  Cela se produira à environ 10 mètres de la porte, et lorsque vous vous en approcherez, il vous suffira de l'ouvrir.  Dès que vous entrez et claquez la porte, elle se verrouille automatiquement (la même que lorsque vous quittez la maison). <br><br>  Je dois admettre qu'en réalité le «mode portier» ne fonctionne pas toujours aussi bien.  Par exemple, en raison des fonctionnalités du scanner iBeacon dans les smartphones, il peut arriver que lorsque vous allez à la porte, vous devez encore attendre un peu avant que votre smartphone «entende» le signal iBeacon et chauffe la porte.  Une porte peut également verrouiller par erreur une porte lorsqu'elle est ouverte, si vous la faites pivoter d'une certaine manière tout en la touchant. <br><br>  Nous avons essayé de prendre en compte tous ces moments, et au moins d'exclure les situations où, en raison d'une erreur, la porte est restée ouverte.  Mais même si nous avons manqué quelque chose ou si nous ne l'avons pas fait assez bien, vous pouvez toujours le corriger si vous le souhaitez - le code source du logiciel Dooris sera ouvert (nous publierons le code source dès que le premier lot de nos serrures intelligentes sera prêt). <br><br><h2>  * * * </h2><br>  Nous voulons lancer Dooris dans la production de masse, mais nous devons d'abord comprendre quelle demande notre produit va utiliser, et qui, sinon vous, chers lecteurs de Geektimes, pouvez le mieux nous aider à cet égard.  Que dites-vous: achèteriez-vous une serrure intelligente Dooris pour 9 400 roubles?  Si c'est le cas, nous nous réjouissons de vos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">précommandes</a> (nous n'avons pas besoin d'argent à l'avance).  Dans tous les cas, nous serons heureux de connaître votre opinion sur notre création et de répondre à vos questions. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr405869/">https://habr.com/ru/post/fr405869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr405857/index.html">Une attaque contre un modèle d'apprentissage automatique fait tomber des voitures robotisées</a></li>
<li><a href="../fr405859/index.html">Iron History: il y a 40 ans, l'ordinateur personnel TRS-80 est en vente</a></li>
<li><a href="../fr405861/index.html">Centre de données des navires de croisière</a></li>
<li><a href="../fr405863/index.html">Maintenir l'ordre: Data Center 2 de Beyond.pl</a></li>
<li><a href="../fr405867/index.html">Une semaine après le fork: Bitcoin fait mieux que jamais</a></li>
<li><a href="../fr405871/index.html">Nous comprenons la physique des particules: 6) les champs</a></li>
<li><a href="../fr405873/index.html">Golden Age of Disclaimer</a></li>
<li><a href="../fr405875/index.html">54% des passagers refusent de piloter un avion sans homme aux commandes</a></li>
<li><a href="../fr405877/index.html">Facebook Messenger peut-il devenir un projet indépendant</a></li>
<li><a href="../fr405879/index.html">La "taxe sur les disques" est retournée. À risque - Montres intelligentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>