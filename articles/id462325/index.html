<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’š ğŸ“† ğŸ§– Pekerja Web lebih mudah dari yang Anda kira ğŸ§•ğŸ» ğŸ‰ ğŸ”‹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel ini, metode <em>eval</em> KOTOR, tidak aman, tidak stabil, dan menakutkan akan dijelaskan. Jadi, jika Anda tidak nyaman dengan itu, berh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pekerja Web lebih mudah dari yang Anda kira</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/waves/blog/462325/"><p><img src="https://habrastorage.org/webt/ve/ti/ox/vetioxg-vqohhdt25j7qmzayvww.jpeg" alt="Pekerja Web lebih mudah dari yang Anda kira"></p><br><p> Dalam artikel ini, metode <code>&lt;em&gt;eval&lt;/em&gt;</code> KOTOR, tidak aman, tidak stabil, dan menakutkan akan dijelaskan.  Jadi, jika Anda tidak nyaman dengan itu, berhentilah membaca sekarang. </p><br><p>  Pertama, beberapa masalah dengan kenyamanan tetap tidak terselesaikan: dalam kode yang dikirim ke pekerja web web, penutupan tidak dapat digunakan. </p><br><hr><br><p>  Kita semua menyukai teknologi baru, dan kita semua menyukai teknologi baru agar nyaman digunakan.  Namun, tidak demikian halnya dengan pekerja web.  pekerja web menerima file atau tautan ke file, yang tidak nyaman.  Akan lebih baik untuk dapat menempatkan tugas apa pun ke pekerja web, bukan hanya kode yang direncanakan secara khusus. </p><br><p>  Apa yang kita butuhkan untuk membuat pekerja web lebih nyaman untuk beroperasi?  Saya percaya, berikut ini: </p><br><ul><li>  Kemungkinan untuk meluncurkan kode apa pun pada pekerja web kapan saja </li><li>  Kemungkinan untuk mengirim data rumit kepada pekerja web (instance kelas, fungsi) </li><li>  Kemungkinan untuk menerima janji dengan balasan dari pekerja web. </li></ul><a name="habracut"></a><br><p>  Mari kita coba menulisnya.  Sebagai permulaan, kita akan memerlukan protokol komunikasi antara pekerja web dan jendela utama.  Secara umum, protokol hanyalah struktur dan jenis data yang digunakan untuk komunikasi antara jendela browser dan pekerja web.  Cukup mudah.  Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> atau menulis versi Anda sendiri.  Setiap pesan akan memiliki ID dan data tipikal dari tipe pesan tertentu.  Awalnya, kami akan memiliki dua jenis pesan untuk pekerja web: </p><br><ul><li>  Menambahkan perpustakaan / file ke pekerja web </li><li>  Luncurkan. </li></ul><br><h2 id="a-file-that-will-be-inside-a-web-worker">  File yang akan berada di dalam pekerja web </h2><br><p>  Sebelum menulis pekerja web, kita perlu menjelaskan file yang akan ada di dalamnya, mendukung protokol yang dijelaskan di atas.  Saya suka pemrograman berorientasi objek (OOP), jadi ini akan menjadi kelas bernama workerBody.  Kelas ini harus berlangganan ke suatu acara dari jendela induk. </p><br><pre> <code class="javascript hljs">self.onmessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onMessage(message.data); };</code> </pre><br><p>  Sekarang kita dapat mendengarkan acara dari jendela induk.  Kami memiliki dua jenis acara: peristiwa yang menyiratkan balasan dan yang lainnya.  Mari kita lakukan acara: \ <br>  Perpustakaan dan file ditambahkan ke pekerja web menggunakan API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">imporScripts</a> . </p><br><p>  Dan sekarang bagian yang paling menakutkan: untuk meluncurkan fungsi acak, kita akan menggunakan <em>eval</em> . </p><br><pre> <code class="javascript hljs">... onMessage(message) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (message.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MESSAGE_TYPE.ADD_LIBS: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addLibs(message.libs); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MESSAGE_TYPE.WORK: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.doWork(message); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } doWork(message) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processor = <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(message.job); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> params = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._parser.parse(message.params); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = processor(params); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result &amp;&amp; result.then &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> result.then === <span class="hljs-string"><span class="hljs-string">'function'</span></span>) { result.then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.send({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: message.id, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: data }); }, (error) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>) { error = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(error); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.send({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: message.id, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: error }); }); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.send({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: message.id, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: result }); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.send({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: message.id, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(e) }); } } send(data) { data.body = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._serializer.serialize(data.body); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { self.postMessage(data); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> toSet = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: data.id, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(e) }; self.postMessage(toSet); } }</code> </pre> <br><p>  Metode <em>onMessage</em> bertanggung jawab untuk menerima pesan dan memilih penangan, <em>doWork</em> meluncurkan fungsi terkirim dan <em>mengirim</em> mengirim balasan ke jendela induk. </p><br><h2 id="parser-and-serializer">  Parser dan serializer </h2><br><p>  Sekarang kita memiliki konten pekerja web, kita perlu belajar membuat cerita bersambung dan menguraikan data apa pun, sehingga data tersebut dapat dikirim ke pekerja web.  Mari kita mulai dengan serializer.  Kami ingin dapat mengirim data apa pun kepada pekerja web, termasuk instance kelas, kelas, dan fungsi, sementara kapasitas asli pekerja web memungkinkan pengiriman hanya data seperti JSON.  Untuk mengatasinya, kita perlu _ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">eval</a> _.  Kami akan membungkus semua data yang JSON tidak dapat terima ke dalam struktur sengatan yang sesuai dan meluncurkannya di sisi lain.  Untuk menjaga keabadian, data yang diterima akan dikloning dengan cepat, menggantikan apa pun yang tidak dapat diserialisasi dengan metode biasa dengan objek layanan, yang akan diganti kembali di sisi lain oleh parser.  Pada pandangan pertama, tugas ini tidak sulit, tetapi ada banyak jebakan.  Keterbatasan paling menakutkan dari pendekatan ini adalah ketidakmampuan untuk menggunakan penutupan, yang mengarah ke gaya penulisan kode yang sedikit berbeda.  Mari kita mulai dengan bagian yang paling mudah, fungsinya.  Pertama, kita perlu belajar membedakan fungsi dari konstruktor kelas.  Ayo lakukan itu: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> isFunction(Factory){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Factory.prototype) { <span class="hljs-comment"><span class="hljs-comment">// Arrow function has no prototype return true; } const prototypePropsLength = Object.getOwnPropertyNames(Factory.prototype) .filter(item =&gt; item !== 'constructor') .length; return prototypePropsLength === 0 &amp;&amp; Serializer.getClassParents(Factory).length === 1; } static getClassParents(Factory) { const result = [Factory]; let tmp = Factory; let item = Object.getPrototypeOf(tmp); while (item.prototype) { result.push(item); tmp = item; item = Object.getPrototypeOf(tmp); } return result.reverse(); }</span></span></code> </pre><br><p>  Pertama, kami akan memeriksa apakah fungsi tersebut memiliki prototipe.  Jika tidak, ini jelas sebuah fungsi.  Kemudian, kita melihat jumlah fitur prototipe.  Jika hanya memiliki konstruktor dan fungsinya bukan penerus kelas lain, kami menganggapnya sebagai fungsi. </p><br><p>  Ketika kami menemukan suatu fungsi, kami hanya menggantinya dengan objek layanan dengan bidang __type = "serialized-function" dan templat bersesuaian dengan templat fungsi ini (func.toString ()). </p><br><p>  Untuk saat ini, kami akan melewati kelas dan melihat instance kelas.  Kemudian, kita perlu membedakan antara objek reguler dan instance kelas. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> isInstance(some) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> = some.<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>; if (!<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !Serializer.isNative(<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>); } static isNative(data) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-regexp"><span class="hljs-regexp">/function .*?\(\) \{ \[native code\] \}/</span></span>.test(data.toString()); }</code> </pre> <br><p>  Kami percaya bahwa suatu objek adalah teratur jika tidak memiliki konstruktor atau konstruktornya adalah fungsi asli.  Setelah kami menemukan instance kelas, kami akan menggantinya dengan objek layanan dengan bidang berikut: </p><br><ul><li>  __type: 'serialized-instance' </li><li>  data adalah data yang terkandung dalam instance </li><li>  indeks adalah indeks kelas dari instance ini pada daftar kelas layanan. </li></ul><br><p>  Untuk mengirim data, kita harus membuat bidang tambahan, di mana kita akan menyimpan daftar kelas unik yang kita kirim.  Namun, ada tantangan: menemukan kelas, kita tidak hanya perlu mengambil templatnya, tetapi juga templat dari semua kelas induk dan menyimpannya sebagai kelas independen, sehingga setiap kelas induk hanya dikirim satu kali, juga menyimpan instanceof bukti.  Menemukan kelas itu mudah: ini adalah fungsi yang gagal pada bukti Serializer.isFungsi kami.  Saat menambahkan kelas, kami memeriksa keberadaan kelas itu pada daftar data berseri dan hanya menambahkan kelas unik.  Kode yang merakit kelas menjadi templat cukup besar dan tersedia di <a href="">sini</a> . </p><br><p>  Di parser, kami awalnya memeriksa semua kelas yang dikirimkan kepada kami dan mengkompilasinya jika belum dikirim.  Kemudian, kami secara rekursif memeriksa setiap bidang data dan mengganti objek layanan dengan data yang dikompilasi.  Bagian yang paling menarik adalah instance kelas.  Kami memiliki kelas dan data yang ada dalam instance-nya, tetapi kami tidak bisa hanya membuat instance karena permintaan konstruktor mungkin memerlukan parameter yang tidak kami miliki.  Kami mendapatkannya dari metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Object.create yang</a> hampir terlupakan, yang menciptakan objek dengan prototipe yang ditetapkan.  Dengan cara ini, kami menghindari meminta konstruktor, mendapatkan instance kelas dan hanya menyalin properti ke instance. </p><br><h2 id="creating-a-web-worker">  Menciptakan pekerja web </h2><br><p>  Agar pekerja web dapat beroperasi dengan sukses, kami membutuhkan parser dan serializer di dalam pekerja web dan di luar.  Jadi kami mengambil serializer dan mengubahnya, parser dan badan pekerja web menjadi templat.  Dari templat, kami membuat gumpalan dan membuat tautan unduhan melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">URL.createObjectURL</a> (metode ini mungkin tidak berfungsi untuk beberapa â€œKebijakan Keamanan Kontenâ€).  Metode ini juga baik untuk meluncurkan kode acak dari sebuah string. </p><br><pre> <code class="javascript hljs">_createworker(customworker) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = <span class="hljs-string"><span class="hljs-string">`var Myworker = </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">._createTemplate(customworker)}</span></span></span><span class="hljs-string">;`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> blob = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Blob([template], { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'application/javascript'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> worker(URL.createObjectURL(blob)); } _createTemplate(workerBody) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Name = Serializer.getFnName(workerBody); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Name) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Unnamed worker Body class! Please add name to worker Body class!'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'(function () {'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._getFullClassTemplate(Serializer, <span class="hljs-string"><span class="hljs-string">'Serializer'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._getFullClassTemplate(Parser, <span class="hljs-string"><span class="hljs-string">'Parser'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._getFullClassTemplate(workerBody, <span class="hljs-string"><span class="hljs-string">'workerBody'</span></span>), <span class="hljs-string"><span class="hljs-string">`return new workerBody(Serializer, Parser)})();`</span></span> ].join(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>); }</code> </pre><br><h2 id="outcome">  Hasil </h2><br><p>  Jadi, kami memiliki pustaka sederhana yang dapat digunakan yang dapat mengirim kode apa pun ke pekerja web.  Ini mendukung kelas-kelas TypeScript, misalnya: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = workerWrapper.create(); wrapper.process(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">params</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// This code in worker. Cannot use closure! // do some hard work return 100; // or return Promise.resolve(100) }, params).then((result) =&gt; { // result = 100; }); wrapper.terminate() // terminate for kill worker process</span></span></code> </pre> <br><h2 id="future-development">  Perkembangan masa depan </h2><br><p>  Sayangnya, perpustakaan ini jauh dari ideal.  Kita perlu menambahkan dukungan setter dan getter untuk kelas, objek, prototipe, dan fitur statis.  Juga, kita perlu menambahkan caching, peluncuran skrip alternatif tanpa <em>eval</em> , menggunakan <code>URL.createObjectURL</code> sebagai gantinya.  Akhirnya, file dengan konten pekerja web perlu ditambahkan ke majelis (jika penciptaan on-the-fly tidak tersedia) dll.  Kunjungi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori</a> ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id462325/">https://habr.com/ru/post/id462325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id462313/index.html">Kiat dan trik dari saluran Telegram saya @pythonetc, Juli 2019</a></li>
<li><a href="../id462315/index.html">Efisiensi energi kantor: bagaimana cara mengurangi konsumsi energi nyata?</a></li>
<li><a href="../id462317/index.html">Kiat untuk mengoptimalkan arsitektur Laravel Anda dengan AWS</a></li>
<li><a href="../id462321/index.html">SEO Internasional | Faktor peringkat SEO internasional</a></li>
<li><a href="../id462323/index.html">Obesitas - Santai dan Libatkan</a></li>
<li><a href="../id462327/index.html">Mencicit tumor kanker: para ilmuwan dari NUST "MISiS" telah mengembangkan USG laser untuk diagnosis kanker</a></li>
<li><a href="../id462329/index.html">Memindahkan catu daya ke bagian depan sasis</a></li>
<li><a href="../id462331/index.html">GAZ-66 mainan di panel kontrol. Bagian 2</a></li>
<li><a href="../id462333/index.html">Membuat chatbot percakapan sederhana dengan python</a></li>
<li><a href="../id462335/index.html">Jangan membaca, baca kembali</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>