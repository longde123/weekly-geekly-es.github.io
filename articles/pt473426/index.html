<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìú üë©‚Äçüíª üëéüèø Automa√ß√£o de testes de ponta a ponta de um sistema de informa√ß√£o integrado. Parte 1. Organizacional üìö ‚ôëÔ∏è üîû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com este artigo, estamos abrindo uma s√©rie de publica√ß√µes sobre como automatizamos o processo de teste manual de um grande sistema de informa√ß√£o em um...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automa√ß√£o de testes de ponta a ponta de um sistema de informa√ß√£o integrado. Parte 1. Organizacional</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/473426/">  Com este artigo, estamos abrindo uma s√©rie de publica√ß√µes sobre como automatizamos o processo de teste manual de um grande sistema de informa√ß√£o em um dos principais projetos da LANIT e o que aconteceu com ele. <br><br>  <i>A primeira parte - organizacional e gerencial - deve ser √∫til principalmente para os respons√°veis ‚Äã‚Äãpor testar a automa√ß√£o e criar esses sistemas como um todo.</i>  <i>Os gerentes de projeto, l√≠deres de grupo e propriet√°rios de servi√ßos de teste funcional e autom√°tico, <b>todos que se preocupam com a quest√£o ‚Äúcomo criar um teste econ√¥mico de ponta a ponta do sistema de TI‚Äù encontrar√£o aqui um plano e uma metodologia concretos.</b></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f3/664/45f/8f366445ff952429d3a43ff7911ef34d.jpg"></div>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a></i> <br><a name="habracut"></a><br><h1>  Parte 1 - Organizacional e gerencial.  Por que precisamos de automa√ß√£o.  Organiza√ß√£o do processo de desenvolvimento e gerenciamento.  Organiza√ß√£o de uso </h1><br>  Inicialmente, no in√≠cio, havia um sistema de informa√ß√µes grande e complexo (que chamaremos de "Sistema") com v√°rios cen√°rios de neg√≥cios complexos, longos e interconectados.  Todos os scripts foram testados como E2E por meio de interfaces da Web exclusivamente no modo manual (havia mais de um milh√£o e meio de cen√°rios desse tipo, apenas da prioridade mais cr√≠tica).  Al√©m disso, todos esses cen√°rios precisavam ser conclu√≠dos pelo menos uma vez durante a regress√£o de cada nova vers√£o ou hotfix antes da pr√≥xima atualiza√ß√£o de implanta√ß√£o do produto. <br><br>  Em um determinado momento, quando se tornou completamente insuport√°vel clicar com o mouse no modo manual, decidimos automatizar tudo.  Isso foi o que eles fizeram atrav√©s do desenvolvimento de um servi√ßo separado baseado em java + sel√™nio + seleneto + selenoide, que tamb√©m √© chamado de <b>"estrutura de teste"</b> ou simplesmente <b>"autoteste"</b> . <br><br>  Historicamente, o c√≥digo da estrutura de teste foi desenvolvido por duas equipes.  Primeiro, a primeira equipe criou um prot√≥tipo com algumas dezenas de cen√°rios.  Em seguida, a segunda equipe por um ano escalou o prot√≥tipo em profundidade (n√∫mero de testes) e em profundidade (foram introduzidos padr√µes t√≠picos de codifica√ß√£o e implementa√ß√£o). <br><br>  Sou o l√≠der de equipe e de equipe da segunda equipe, que adotou a estrutura de prot√≥tipo para dimensionamento (em maio de 2018). <br><br>  No momento da reda√ß√£o deste artigo, a tarefa definida h√° um ano foi conclu√≠da e a equipe do projeto recebeu um <u><b>servi√ßo de</b></u> automa√ß√£o est√°vel.  N√£o foi em v√£o que enfatizei o <u><b>servi√ßo</b></u> , porque, inicialmente, a tarefa n√£o era definida como o desenvolvimento de um aplicativo, mas como um servi√ßo de servi√ßo para testar a automa√ß√£o a um grupo de "testes funcionais".  E esse recurso posteriormente influenciou bastante a organiza√ß√£o do desenvolvimento e a arquitetura da estrutura de teste. <br><br><blockquote><h2>  Sum√°rio </h2><br>  Cerca de 1.500 cen√°rios de teste foram automatizados: em cada teste, de 200 a 2000 opera√ß√µes de usu√°rio. <br><br>  A capacidade total do servi√ßo √© de at√© 60 navegadores trabalhando simultaneamente, e esse n√£o √© o limite (o n√∫mero pode ser aumentado em 5 vezes devido √†s m√°quinas virtuais). <br>  A dura√ß√£o total de uma regress√£o completa n√£o √© superior a 3 horas e o teste PreQA √© inferior a uma hora. <br><br>  Uma ampla gama de recursos foi implementada: <br><br><ul><li>  uso local (execu√ß√£o em tempo real) e remoto (via planos Bamboo); </li><li>  limitando a composi√ß√£o dos testes em execu√ß√£o por filtro; </li><li>  um relat√≥rio detalhado com os resultados de cada etapa do cen√°rio de teste (atrav√©s da estrutura Allure); </li><li>  baixar e carregar arquivos de / para o navegador, seguido pela verifica√ß√£o dos resultados de seu processamento em termos de formato e conte√∫do dos arquivos; </li><li>  contabilidade e controle da natureza ass√≠ncrona da interface angular.  Incluindo o controle de solicita√ß√µes suspensas (solicita√ß√£o pendente) entre os servi√ßos Angular e REST; </li><li>  controle de logs do navegador; </li><li>  grava√ß√£o de teste de v√≠deo; </li><li>  remo√ß√£o do instant√¢neo da p√°gina no ponto de "queda" do teste; </li><li>  transmiss√£o de eventos no ELK; </li><li>  muito mais sobre as pequenas coisas ... </li></ul><br></blockquote><br><h1>  Por que tudo isso era necess√°rio? </h1><br>  No in√≠cio, o objetivo do sistema era bastante simples e claro. <br><br>  Imagine que voc√™ possui um grande sistema de registro para gerenciar uma extensa gama de documentos e seu ciclo de vida, o que fornece algumas centenas de processos de neg√≥cios.  Al√©m disso, existem milh√µes de pessoas, fornecedores - dezenas de milhares, servi√ßos - milhares, documentos complexos, incluindo estrutura e modelo, e o fornecimento de processos de neg√≥cios s√£o fornecidos de centenas de maneiras diferentes ... <br><br>  Tudo isso se transforma em mil e meio cen√°rios de teste, e essa √© apenas a prioridade mais alta e apenas positiva. <br><br>  No processo de automa√ß√£o, foram reveladas v√°rias nuances que exigiam o uso de v√°rias solu√ß√µes. <br><br>  Por exemplo, um script pode conter at√© centenas de opera√ß√µes separadas, incluindo aquelas interessantes como: ‚ÄúFa√ßa o download de um arquivo EXCEL com dados e verifique se o sistema processa cada registro do arquivo‚Äù (para resolver esse problema, foram necess√°rias v√°rias etapas para preparar os dados e verificar o resultado do carregamento no Sistema).  E agora adicionamos a limita√ß√£o de reutiliza√ß√£o dos dados de teste: os dados de teste para a conclus√£o bem-sucedida da maioria dos cen√°rios de teste devem ser "atualizados" e n√£o usados ‚Äã‚Äãanteriormente em cen√°rios semelhantes (durante os testes, o estado dos dados no Sistema √© alterado, para que n√£o possam ser reutilizados as mesmas verifica√ß√µes). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/242/0a7/ccc/2420a7ccc161bb7ee6537a73cd6bd33a.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a> <br><br>  Em algum momento, o teste manual do sistema como parte da regress√£o deixou de parecer econ√¥mico e r√°pido o suficiente e eles decidiram automatiz√°-lo por meio da interface do usu√°rio da web. <br><br>  Em outras palavras, o grupo de teste funcional abre a ‚Äúp√°gina‚Äù, seleciona o ‚Äúgrupo de teste‚Äù, pressiona o bot√£o ‚Äúexecutar‚Äù (usamos o Bamboo).  Em seguida, os Autotestes (doravante denominados Autotestes. Designam o produto criado para testes em geral) emulam automaticamente as a√ß√µes dos usu√°rios no Sistema atrav√©s do navegador ("pressione" os bot√µes necess√°rios, insira valores nos campos, etc.), ap√≥s a conclus√£o, exiba um relat√≥rio detalhado sobre todos os etapas e a√ß√µes e resultados conclu√≠dos da verifica√ß√£o (correspond√™ncia da rea√ß√£o esperada do Sistema ao seu comportamento real). <br><br>  Total, o objetivo dos Autotestes √© a automa√ß√£o do teste E2E manual.  Este √© um sistema "externo" que n√£o participa do processo de desenvolvimento do sistema em teste e n√£o est√° de forma alguma conectado aos testes de unidade ou integra√ß√£o usados ‚Äã‚Äãpelos desenvolvedores. <br><br><h2>  Objetivos </h2><br>  Foi necess√°rio reduzir significativamente os custos de m√£o-de-obra da realiza√ß√£o dos testes de ponta a ponta e aumentar a velocidade de regress√µes completas e reduzidas em termos de volume. <br><br><div class="spoiler">  <b class="spoiler_title">Objetivos adicionais</b> <div class="spoiler_text"><ul><li>  garantir alta velocidade de desenvolvimento de autotestes com alto n√≠vel de autonomia (a necessidade de preenchimento preliminar com dados de teste dos estandes do sistema / configura√ß√£o de autotestes para execu√ß√£o em cada estande deve ser minimizada); </li><li>  otimizar despesas (tempo e financeiras) para comunica√ß√µes entre equipes de automa√ß√£o, testes funcionais e desenvolvimento de sistemas; </li><li>  minimizar o risco de discrep√¢ncias entre os autotestes realmente implementados e as expectativas iniciais da equipe de teste funcional (a equipe de teste funcional deve confiar incondicionalmente nos resultados dos AutoTestes). </li></ul></div></div><br><h2>  As tarefas </h2><br>  A principal tarefa do desenvolvimento foi formulada com muita simplicidade - para automatizar nos pr√≥ximos 6 meses 1000 cen√°rios de teste da mais alta prioridade. <br><br>  O n√∫mero previsto de a√ß√µes b√°sicas de teste variou de 100 a 300, o que nos deu cerca de 200 mil m√©todos de teste com 10 a 20 linhas de c√≥digo, sem levar em considera√ß√£o as classes gerais e auxiliares de auxiliares, provedores de dados e modelos de dados. <br><br>  Dessa forma, verificou-se que, considerando as restri√ß√µes de tempo (130 dias √∫teis), era necess√°rio realizar pelo menos 10 testes por dia e, ao mesmo tempo, garantir a relev√¢ncia dos autotestes implementados, levando em considera√ß√£o as altera√ß√µes ocorridas no sistema (o sistema est√° em desenvolvimento ativo). <br><br>  Segundo estimativas de especialistas, o trabalho necess√°rio para desenvolver um autoteste foi de 4-8 horas.  Portanto, temos pelo menos uma equipe de 5 pessoas (na realidade, no auge do desenvolvimento de autotestes, a equipe tinha mais de 10 engenheiros de automa√ß√£o). <br><br>  As tarefas que precisavam ser resolvidas tamb√©m eram compreens√≠veis. <br><br><ul><li>  <b>Configure processos e comandos:</b> </li><li>  definir o processo de intera√ß√£o com o cliente (grupo de teste funcional), corrigir o formato de descri√ß√£o do caso de teste como entrada para a equipe de automa√ß√£o; </li><li>  organizar o processo de desenvolvimento e manuten√ß√£o; </li><li>  formar uma equipe. <br></li><li>  <b>Desenvolva autotestes com os seguintes recursos:</b> </li><li>  clique automaticamente nos bot√µes do navegador com uma verifica√ß√£o preliminar da presen√ßa de elementos e das informa√ß√µes necess√°rias na p√°gina; </li><li>  fornecer trabalho com elementos complexos, como Yandex.Map; </li><li>  garantir o carregamento de arquivos gerados automaticamente no sistema, garantir o download de arquivos do sistema com verifica√ß√£o de seu formato e conte√∫do. </li><li>  Forne√ßa um registro das capturas de tela do navegador, v√≠deos e logs internos. </li><li>  Para fornecer a capacidade de integra√ß√£o com sistemas externos, como um servidor de correio, sistema de rastreamento de tarefas (JIRA) para verificar os processos de integra√ß√£o entre o sistema testado e os sistemas externos. </li><li>  Forne√ßa um relat√≥rio documentado sobre todas as a√ß√µes tomadas, incluindo uma exibi√ß√£o dos valores inseridos e verificados, bem como todos os investimentos necess√°rios. </li><li>  Execute testes no volume necess√°rio no modo paralelo. </li><li>  Implante autotestes na infraestrutura existente. </li><li>  Refine os scripts de teste j√° automatizados do conceito de destino consoante (velocidade de refinamento - cerca de 50 testes por sprint semanal). </li></ul><br>  Como mencionei na introdu√ß√£o, no in√≠cio t√≠nhamos um prot√≥tipo de MVP em funcionamento implementado por outra equipe, que tinha que ser aumentado de 20 testes para 1000, adicionando novos recursos ao longo do caminho e garantindo escalabilidade e flexibilidade aceit√°veis ‚Äã‚Äãpara fazer altera√ß√µes. <br><br>  A presen√ßa de um prot√≥tipo de trabalho adicionalmente na entrada nos deu uma pilha tecnol√≥gica, que inclu√≠a: Java SE8, JUnit4, Selenium + Selenide + Selenoid, Bamboo como um "corredor" de testes e um "construtor" de relat√≥rios Allure.  Como o prot√≥tipo funcionou bem e forneceu a funcionalidade b√°sica necess√°ria, decidimos n√£o alterar a pilha tecnol√≥gica, mas focar no desenvolvimento da escalabilidade da solu√ß√£o, aumentar a estabilidade e desenvolver os recursos necess√°rios ausentes. <br><br>  Basicamente, tudo parecia vi√°vel e otimista.  Al√©m disso, lidamos completamente com as tarefas em um determinado momento. <br><br>  A seguir, s√£o descritos os aspectos tecnol√≥gicos e de processo individuais do desenvolvimento de Autotestes. <br><br><h1>  Descri√ß√£o dos autotestes.  Hist√≥rias e recursos do usu√°rio </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/345/e52/429/345e524291244a67e411a344257eafa8.png"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a> <br><br>  Os autotestes implementam o seguinte conjunto de hist√≥rias de usu√°rios no contexto de seu uso pelo grupo de teste: <br><br><ul><li>  automa√ß√£o de teste manual; </li><li>  regress√£o completa autom√°tica; </li><li>  controle de qualidade de montagens na cadeia CI \ CD. </li></ul><br>  Os detalhes da implementa√ß√£o e as decis√µes de arquitetura ser√£o discutidos na <b>Parte 2 - T√©cnico.</b>  <b>Arquitetura e pilha t√©cnica.</b>  <b>Detalhes de implementa√ß√£o e surpresas t√©cnicas</b> . <br><br><h2>  Teste autom√°tico e manual (hist√≥rias de usu√°rios) </h2><br>  Como testador, desejo executar o teste E2E de destino, que ser√° executado sem a minha participa√ß√£o direta (no modo autom√°tico) e fornecer√° um relat√≥rio detalhado no contexto das etapas executadas, incluindo os dados inseridos e os resultados obtidos, bem como: <br><br><ul><li>  Deve ser poss√≠vel selecionar diferentes posi√ß√µes de alvo antes de iniciar o teste; </li><li>  deve ser capaz de gerenciar a composi√ß√£o dos testes em execu√ß√£o de todos os implementados; </li><li>  no final do teste, voc√™ precisa obter um v√≠deo do teste na tela do navegador; </li><li>  quando o teste falha, √© necess√°rio obter uma captura de tela da janela ativa do navegador. </li></ul><br><h2>  Regress√£o completa autom√°tica </h2><br>  Como grupo de testes, desejo executar todos os testes todas as noites em um banco de testes espec√≠fico no modo autom√°tico, incluindo todos os recursos do "Teste manual autom√°tico". <br><br><h2>  Controle de qualidade de montagem na cadeia CI \ CD </h2><br>  Como grupo de testes, desejo realizar testes autom√°ticos de atualiza√ß√µes implantadas do Sistema em um suporte de pr√©-QA dedicado antes de atualizar os suportes de est√°gio de teste funcional de destino, que foram posteriormente utilizados para testes funcionais. <br><br><h1>  Recursos b√°sicos implementados </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/347/92c/432/34792c43244275202d123378b2b6b72e.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a> <br><br>  Aqui est√° um breve conjunto das principais fun√ß√µes implementadas dos AutoTests, que acabaram sendo vitais ou simplesmente √∫teis.  Detalhes da implementa√ß√£o de algumas fun√ß√µes interessantes estar√£o na segunda parte do artigo. <br><br><h2>  Uso local e remoto </h2><br>  A fun√ß√£o ofereceu duas op√ß√µes para executar Autotests - local e remoto. <br><br>  No modo local, o testador executou o autoteste necess√°rio em seu local de trabalho e, ao mesmo tempo, p√¥de observar o que estava acontecendo no navegador.  O lan√ßamento foi realizado atrav√©s do "tri√¢ngulo verde" no IntelliJ IIDEA -).  A fun√ß√£o foi muito √∫til no in√≠cio do projeto para depura√ß√£o e demonstra√ß√µes, mas agora √© usada apenas pelos desenvolvedores dos autotestes. <br><br>  No modo remoto, o testador inicia o autoteste usando a interface do plano Bamboo com os par√¢metros da composi√ß√£o dos testes em execu√ß√£o, um suporte e alguns outros par√¢metros. <br><br>  <i>A fun√ß√£o foi implementada usando a vari√°vel de ambiente MODE = REMOTE | LOCAL, dependendo de qual navegador da Web local ou remoto foi inicializado na nuvem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Selenoid</a> .</i> <br><br><h2>  Limitando a composi√ß√£o dos testes em execu√ß√£o por filtro </h2><br>  A fun√ß√£o possibilita limitar a composi√ß√£o dos testes em execu√ß√£o no modo de uso remoto para conveni√™ncia dos usu√°rios e reduzir o tempo de teste.  √â usada filtra√ß√£o em duas etapas.  A primeira etapa bloqueia a execu√ß√£o de testes com base na vari√°vel FILTER_BLOCK e √© usada principalmente para excluir a execu√ß√£o de grandes grupos de testes.  O segundo passo "pula" apenas os testes que correspondem √† vari√°vel FILTER. <br><br>  O valor dos filtros √© especificado como um conjunto de express√µes regulares REGEXP1, ..., REGEXPN, aplicado pelo princ√≠pio de "OR". <br><br>  Ao iniciar no modo manual, o testador foi solicitado a definir uma vari√°vel de ambiente especial como uma lista de express√µes regulares aplic√°veis ‚Äã‚Äã√† anota√ß√£o especial @ Filter (String value), que anotou todos os m√©todos de teste nas classes de teste.  Para cada teste, essa anota√ß√£o √© exclusiva e √© constru√≠da com base em um conjunto de tags separadas por um sublinhado.  Usamos o seguinte modelo m√≠nimo SUBSYSTEM_FUNCTION_TEST-ID_ {DEFAULT}, em que a tag DEFAULT √© para testes inclu√≠dos na regress√£o noturna autom√°tica. <br><br>  <i>A fun√ß√£o √© implementada por meio de uma extens√£o personalizada da classe org.junit.runners.BlockJUnit4ClassRunner (os detalhes ser√£o fornecidos na Parte 2-1 da continua√ß√£o deste artigo)</i> <br><br><h2>  Documentando o relat√≥rio com os resultados para todas as etapas </h2><br>  Os resultados do teste s√£o exibidos para todas as a√ß√µes de teste (etapas) com todas as informa√ß√µes necess√°rias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dispon√≠veis</a> no Allure Framework.  List√°-los n√£o faz sentido.  H√° informa√ß√µes suficientes no site oficial e na Internet como um todo.  N√£o houve surpresas ao usar o Allure Framework e, em geral, eu o recomendo. <br><br>  As principais fun√ß√µes utilizadas s√£o: <br><br><ul><li>  exibi√ß√£o de cada etapa do teste (o nome da etapa corresponde ao seu nome na especifica√ß√£o do teste - script de teste); </li><li>  exibir par√¢metros de etapa em uma forma leg√≠vel por humanos (atrav√©s da implementa√ß√£o necess√°ria do m√©todo toString de todos os valores transmitidos); </li><li>  Anexar capturas de tela, v√≠deos e v√°rios arquivos adicionais ao relat√≥rio; </li><li>  classifica√ß√£o de testes por tipos e subsistemas, bem como a vincula√ß√£o do autoteste √† especifica√ß√£o de teste no sistema de gerenciamento de link de teste Test Link atrav√©s do uso de anota√ß√µes especializadas. </li></ul><br><h2>  Baixe e fa√ßa o upload de arquivos de / para o navegador com a verifica√ß√£o e an√°lise subsequentes </h2><br>  Trabalhar com arquivos √© um aspecto extremamente importante dos scripts de teste.  Era necess√°rio fornecer o upload de v√°rios arquivos e o download. <br><br>  <b>O download de arquivos</b> implica, em primeiro lugar, o carregamento de arquivos EXCEL gerados dinamicamente no Sistema, de acordo com o contexto de execu√ß√£o do script de teste.  O download foi implementado usando m√©todos padr√£o fornecidos pelas ferramentas sel√™nio. <br><br>  <b>O upload de arquivos</b> implicava o download de arquivos pressionando o "bot√£o" no navegador para um diret√≥rio local com a subsequente "transfer√™ncia" desse arquivo para o servidor em que os AutoTests foram executados (o servidor no qual o agente Bamboo remoto foi instalado).  Al√©m disso, esse arquivo foi analisado e analisado em termos de formato e conte√∫do.  Os principais tipos de arquivo foram arquivos EXCEL e PDF. <br><br>  A implementa√ß√£o dessa fun√ß√£o acabou sendo uma tarefa n√£o trivial, principalmente devido √† falta de recursos padr√£o de manipula√ß√£o de arquivos: no momento, a fun√ß√£o √© implementada apenas para o navegador Chrome por meio da p√°gina de servi√ßo "chrome: // downloads /". <br><br>  Vou falar detalhadamente sobre os detalhes da implementa√ß√£o na segunda parte. <br><br><h2>  Contabilidade e controle da natureza ass√≠ncrona da interface Angular.  Controle de solicita√ß√£o pendente entre os servi√ßos Angular e REST </h2><br>  Como o objeto do nosso teste foi baseado no Angular, tivemos que aprender a "lutar" com a natureza ass√≠ncrona do frontend e dos tempos limite. <br><br>  Em geral, al√©m de org.openqa.selenium.support.ui.FluentWait, usamos um m√©todo de espera especialmente projetado que verifica atrav√©s de Javascript intera√ß√µes "incompletas" com servi√ßos REST de front-end e, com base nesse tempo limite din√¢mico, os testes obt√™m informa√ß√µes sobre a seguinte ent√£o espere um pouco mais. <br><br>  Do ponto de vista da funcionalidade, fomos capazes de reduzir significativamente o tempo necess√°rio para concluir os testes devido √† rejei√ß√£o de expectativas est√°ticas, onde n√£o h√° como determinar diferentemente a conclus√£o da opera√ß√£o.  Al√©m disso, isso nos permitiu definir servi√ßos REST "suspensos" com problemas de desempenho.  Por exemplo, eles capturaram um servi√ßo REST para o qual o n√∫mero de registros exibidos na p√°gina foi definido para 10.000 elementos. <br><br>  As informa√ß√µes sobre o servi√ßo REST "congelado" com todos os par√¢metros de sua chamada, devido ao qual o teste "cai" devido a raz√µes de infraestrutura, s√£o adicionadas aos resultados do teste eliminado e tamb√©m s√£o transmitidas como um evento no ELK.  Isso permite transferir imediatamente os problemas identificados para as equipes de desenvolvimento apropriadas do sistema. <br><br><h2>  Controle de Log do Navegador </h2><br>  A fun√ß√£o de controle de log do navegador foi adicionada para controlar erros nas p√°ginas no n√≠vel SEVERE para receber informa√ß√µes adicionais para testes eliminados, por exemplo, para monitorar erros como "... Falha ao carregar o recurso: o servidor respondeu com um status de 500 (Erro Interno do Servidor)". <br><br>  A composi√ß√£o dos erros de processamento de p√°gina no navegador √© aplicada a cada resultado do teste e tamb√©m √© descarregada adicionalmente como eventos no ELK. <br><br><h2>  Grava√ß√£o de v√≠deo do teste e remo√ß√£o do instant√¢neo da p√°gina no ponto de "queda" do teste </h2><br>  Fun√ß√µes s√£o implementadas para a conveni√™ncia de diagnosticar e analisar testes eliminados. <br><br>  A grava√ß√£o de v√≠deo √© ativada separadamente para o modo de execu√ß√£o de teste remoto selecionado.  O v√≠deo √© anexado como um anexo aos resultados no relat√≥rio Allure. <br>  Uma captura de tela √© feita automaticamente quando o teste falha e os resultados tamb√©m s√£o aplicados ao relat√≥rio Allure. <br><br><h2>  Passando eventos para ELK </h2><br>  A fun√ß√£o de enviar eventos para o ELK √© implementada para permitir a an√°lise estat√≠stica do comportamento geral dos AutoTestes e a estabilidade do objeto de teste.  No momento, foram enviados eventos para concluir os testes com resultados e dura√ß√£o, al√©m de erros do navegador no n√≠vel SEVERE e servi√ßos REST "congelados" fixos. <br><br><h1>  Organiza√ß√£o de Desenvolvimento </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ee/a24/368/2eea243683bc7a87f0453db38b6c7947.jpg"></div>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a> <br><br><h2>  Equipe de desenvolvimento </h2><br>  Ent√£o, precis√°vamos de pelo menos 5 desenvolvedores.  Adicione outra pessoa para compensar aus√™ncias n√£o planejadas.  Temos 6. Al√©m disso, um l√≠der de equipe, respons√°vel pela funcionalidade transversal e pela revis√£o de c√≥digo. <br><br>  Portanto, tivemos que levar 6 desenvolvedores de Java (na realidade, no auge do desenvolvimento de autotestes, a equipe excedeu 10 engenheiros de automa√ß√£o). <br><br>  Dado o estado geral do mercado e uma pilha tecnol√≥gica bastante simples, a equipe era formada principalmente por estagi√°rios, a maioria deles rec√©m-formados em universidades ou no √∫ltimo ano.  Na verdade, est√°vamos procurando pessoas com um conhecimento b√°sico de Java.  Foi dada prefer√™ncia a especialistas em testes manuais que gostariam de se tornar programadores e a candidatos motivados com alguma experi√™ncia de desenvolvimento (insignificante) que no futuro desejavam se tornar programadores. <br><br>             ,           (    <b> 2 ‚Äì .    .     </b> ). <br><br>    ,           ,             .        CodeRush .    . <br><br><h2>   </h2><br>       . ,    , ¬´¬ª        . <br><br>           () .    code review   merge request ( GitLab).   code review   ¬´¬ª    (  )       . <br><br>     ‚Äì           .           /   ,         . <br><br> ode review   , ,      ()   -   ,    . ode review  . <br><br>     code review         ,        . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08f/c89/1c7/08fc891c7ccd91d6e6c2235c06149a69.jpg" align="left" width="300">  :     ,      ,      ,     ,         .        ,     ,    ,    / . <br><br>      ¬´ ¬ª,      -   -.         -. <br><br>                   ,               .    sprint retrospective event. <br><br><h2>     </h2><br>         - ( )    ,      stakeholder  . <br><br>        ‚Äì    .   ,            ,          .   ,      -    .       . <br><br>        - ( ,      . .),          .     () ,       ¬´ ¬ª / ¬´ ¬ª ( ,      ,            ). <br><br>  -             -   ( :    -  ‚Äì ,   - ,   ‚Äî ,    ).  ,       -       /  :    ¬´ -      (  )¬ª. <br><br>      -  ,     - (-)      - (¬´¬ª ).     ¬´¬ª -          -  ¬´     X¬ª ( ,       -). <br><br><h2>   </h2><br>     ,    .      master,    -. -   -         code review. <br><br>     ,        ‚Äì     ,        . <br><br> : <br><br> <b>(+)</b>        ; <br> <b>(+)</b>              ; <br> <b>(+)</b>  ¬´¬ª      ; <br> <b>(-)</b>      (); <br> <b>(-)</b>       hotfix . <br><br>       . <br><br> <b></b> <br><br><ul><li>      MASTER. </li><li>  . </li><li>      FEATURE . </li><li>           ,   ¬´   ¬ª  rebase. </li><li> <b>     Gitlab   merge request    .  merge request- :</b> </li><li>  ‚Äî       ¬´Jira¬ª; </li><li>  ‚Äî       Bamboo. </li></ul><br> <b>GateKeeper ( )</b> <br><br><ul><li>         Bamboo. </li><li>          . </li><li>  (merge) FEATURE  DEVELOP,            . </li><li>    . </li></ul><br><hr><br> <i><b>          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">kotalesssk</a> . <br><br>    1,      , .         2.</b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda parte - a t√©cnica - √© focada principalmente nos l√≠deres dos grupos de automa√ß√£o de testes de interface do usu√°rio de ponta a ponta e na automa√ß√£o de teste l√≠der. </font><font style="vertical-align: inherit;">Aqui eles encontrar√£o receitas espec√≠ficas para a organiza√ß√£o arquitet√¥nica de c√≥digo e implanta√ß√£o, que suporta o desenvolvimento paralelo em massa de grandes grupos de testes em face da constante variabilidade das especifica√ß√µes de teste. </font><font style="vertical-align: inherit;">Al√©m disso, voc√™ pode encontrar na segunda parte a lista completa de fun√ß√µes necess√°rias para testes de interface do usu√°rio com alguns detalhes de implementa√ß√£o. </font><font style="vertical-align: inherit;">E uma lista de surpresas que voc√™ tamb√©m pode encontrar.</font></font></i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473426/">https://habr.com/ru/post/pt473426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473412/index.html">Criando um Plug-in para o Clang Static Analyzer para Procurar Estouros Inteiros</a></li>
<li><a href="../pt473416/index.html">Programa da Confer√™ncia ZeroNights 2019</a></li>
<li><a href="../pt473418/index.html">OSCP - Seguran√ßa Ofensiva</a></li>
<li><a href="../pt473420/index.html">Abrimos a temporada de encontros com PHP em Nizhny Novgorod em 2 de novembro</a></li>
<li><a href="../pt473424/index.html">A ARM anunciou as solu√ß√µes gr√°ficas Mali-G57 Valhall e Mali-D37, neuroprocessadores Ethos-N57 e N37</a></li>
<li><a href="../pt473428/index.html">RCS substitui o SMS. O progresso t√£o esperado, ou um passo √† frente dois para tr√°s?</a></li>
<li><a href="../pt473430/index.html">Perguntas frequentes sobre o trabalho do motorista assistente</a></li>
<li><a href="../pt473432/index.html">Tr√™s melhores relat√≥rios Saint TeamLead Conf</a></li>
<li><a href="../pt473434/index.html">Uma abordagem sistem√°tica em tons de turquesa ao integrar o junho</a></li>
<li><a href="../pt473436/index.html">Transforma√ß√£o Gest√£o como compet√™ncia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>