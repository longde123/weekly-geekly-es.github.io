<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚷 🕷️ 💱 Caractéristiques d'une application d'entreprise R robuste 🚧 🤲🏻 👩🏾‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ceux qui travaillent avec R savent très bien que le langage a été initialement conçu comme un outil de travail interactif. Naturellement, les méthodes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Caractéristiques d'une application d'entreprise R robuste</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413865/"><p>  Ceux qui travaillent avec R savent très bien que le langage a été initialement conçu comme un outil de travail interactif.  Naturellement, les méthodes pratiques pour une application étape par étape sur console par une personne qui est au fond du sujet se révèlent inadaptées à la création d'une application pour l'utilisateur final.  La possibilité d'obtenir des diagnostics détaillés immédiatement en cas d'erreur, de parcourir toutes les variables et traces, d'exécuter manuellement des éléments de code (éventuellement en modifiant partiellement les variables) - tout cela ne sera pas disponible lorsque l'application R est hors ligne dans un environnement d'entreprise.  (nous disons R, nous voulons dire essentiellement des applications Web Shiny). </p><br><p>  Cependant, tout n'est pas si mauvais.  L'environnement R (packages et approches) a tellement évolué qu'un certain nombre de trucs très simples peuvent résoudre avec élégance le problème de la stabilité et de la fiabilité des applications utilisateur.  Un certain nombre d'entre eux seront décrits ci-dessous. </p><br><p>  Il s'agit d'une continuation des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publications précédentes</a> . <a name="habracut"></a></p><br><h1 id="v-chem-slozhnost-zadachi">  Quelle est la difficulté de la tâche? </h1><br><p> Le principal éventail de tâches pour lesquelles R est souvent utilisé est le traitement diversifié des données.  Et même un algorithme entièrement débogué, présenté de tous côtés par des tests et entièrement documenté, peut facilement se décomposer et donner un non-sens si des données courbes sont glissées dans son entrée. </p><br><p>  Les données peuvent être entrées à partir d'autres systèmes d'information ainsi que des utilisateurs.  Et, si dans le premier cas il est possible d'exiger le respect de l'API et d'imposer des restrictions très strictes sur la stabilité du flux d'informations, alors dans le second cas il n'y a pas d'échappatoire aux surprises.  Une personne peut faire une erreur et glisser le mauvais fichier, l'écrire mal.  99% des utilisateurs utilisent Excel dans leur travail et préfèrent abandonner le système avec lui, beaucoup de pages, avec un formatage astucieux.  Dans ce cas, la tâche devient encore plus compliquée.  Même un document visuellement valide peut sembler complètement insensé du point de vue de la machine.  Les dates sont dispersées (la très célèbre histoire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Le designer d'Excel pensait que 1900 était une année bissextile, mais ce n'était pas le cas"</a> ).  Les valeurs numériques sont stockées sous forme de texte et de composition.  Cellules invisibles et formules cachées ... Et bien plus encore.  En principe, il est impossible de prévoir tous les râteaux possibles - il n'y a pas assez d'imagination.  Qu'est-ce que cela vaut que de doubler les enregistrements dans diverses jointures avec des sources courbes. </p><br><p>  Comme considération supplémentaire, nous prendrons ce qui suit: </p><br><ol><li><p>  L'excellent document <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Une introduction au nettoyage des données avec R»</a> décrit le processus de préparation préliminaire des données.  Pour les étapes suivantes, nous distinguons la présence de deux phases de validation: technique et logique. </p><br><ul><li>  La validation technique consiste à vérifier l'exactitude de la source de données.  Structure, types, indicateurs quantitatifs. </li><li>  La validation logique peut être en plusieurs étapes, réalisée au cours des calculs, et consiste à vérifier la conformité de certains éléments de données ou de leurs combinaisons à différentes exigences logiques. </li></ul><br></li><li>  L'une des règles de base dans le développement des interfaces utilisateur est la formation des diagnostics les plus complets en cas d'erreur utilisateur.  Autrement dit, si l'utilisateur a déjà téléchargé le fichier, il est nécessaire de vérifier l'exactitude autant que possible et de donner un résumé complet de toutes les erreurs (il est également conseillé d'expliquer ce qui ne va pas), et de ne pas planter au tout premier problème avec un message comme «Entrée incorrecte valeur @ ligne 528493, pos 17 ”et nécessite le téléchargement d'un nouveau fichier avec cette erreur corrigée.  Cette approche vous permet de réduire considérablement le nombre d'itérations pour former la source correcte et d'améliorer la qualité du résultat final. </li></ol><br><h1 id="tehnologii-i-metody-validacii">  Technologies et méthodes de validation </h1><br><p>  Allons de la fin.  Il existe un certain nombre de packages pour la validation logique.  Dans notre pratique, nous avons opté pour les approches suivantes. </p><br><ol><li> Déjà un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>dplyr</code></a> classique.  Dans les cas simples, il est pratique de dessiner simplement un tuyau avec une série de vérifications et d'analyse du résultat final. </li><li>  Le package de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>validate</code></a> pour vérifier la conformité des objets techniquement corrects avec les règles données. </li></ol><br><p>  Pour la validation technique, nous nous sommes concentrés sur les approches suivantes: </p><br><ol><li>  Pack <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>checkmate</code></a> avec une large gamme de fonctions rapides pour effectuer une variété de contrôles techniques. </li><li>  Travail explicite avec exceptions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Advanced R. Debugging, condition handling, and defensive programming»</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Advanced R. Beyond Exception Handling: Conditions and Restarts» à la</a> fois pour effectuer la validation complète en une seule étape et pour garantir la stabilité de l'application. </li><li>  Utilisez des emballages de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>purr</code></a> pour les exceptions.  Très utile lorsqu'il est utilisé à l'intérieur d'un tuyau. </li></ol><br><p>  Dans le code décomposé en fonctions, un élément important de la programmation défensive est de vérifier les paramètres d'entrée et de sortie des fonctions.  Dans le cas des langues avec typage dynamique, la vérification de type doit être effectuée indépendamment.  Pour les types de base, le package <code>qtest</code> est idéal, en particulier ses fonctions <code>qtest</code> \ <code>qassert</code> .  Pour vérifier <code>data.frame</code> arrêtés sur la construction suivante (vérification des noms et des types).  L'astuce avec la fusion du nom et du type réduit le nombre de lignes dans le chèque. </p><br><pre> <code class="hljs pgsql">ff &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(dataframe1, dataframe2){ #        calledFun &lt;- deparse(<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.list(sys.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span>())[[<span class="hljs-number"><span class="hljs-number">1</span></span>]]) tic("Calculating XYZ") #       (<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>,   typeof,  <span class="hljs-type"><span class="hljs-type">Date</span></span> ) list(dataframe1=c("name :: character", "val :: numeric", "ship_date :: Date"), dataframe2=c("out :: character", "label :: character")) %&gt;% purrr::iwalk(~{ flog.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>(glue::glue("Function {calledFun}: checking '{.y}' parameter with expected structure '{collapse(.x, sep=', ')}'")) rlang::eval_bare(rlang::sym(.y)) %&gt;% assertDataFrame(min.<span class="hljs-keyword"><span class="hljs-keyword">rows</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>, min.cols=length(.x)) %&gt;% {assertSetEqual(.x, stri_join(names(.), map_chr(., <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>), sep=" :: "), .var.name=.y)} # {assertSubset(.x, stri_join(names(.), map_chr(., typeof), sep=" :: "))} }) … }</code> </pre> <br><p>  Dans le cadre de la fonction de vérification de type, vous pouvez choisir une méthode à votre goût, en fonction des données attendues.  <code>class</code> été choisie car c'est elle qui donne la date comme <code>Date</code> , et non comme un nombre (représentation interne).  La question de la détermination des types de données est discutée en détail dans le dialogue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Une étude complète des types de choses dans R. 'mode' et 'class' et 'typeof' est insuffisante</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"</a> </p><br><p>  <code>assertSetEqual</code> ou <code>assertSubset</code> sont sélectionnés pour des raisons de colonnes de correspondance claires ou du minimum suffisant. </p><br><p>  Pour les tâches pratiques, un si petit ensemble couvre complètement la plupart des besoins. </p><br><p>  Article précédent - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R comme bouée de sauvetage pour un administrateur système</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413865/">https://habr.com/ru/post/fr413865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413853/index.html">Aperçu des méthodes de gradient dans les problèmes d'optimisation mathématique</a></li>
<li><a href="../fr413855/index.html">L'algorithme de détermination des bots et des offres sur Vkontakte</a></li>
<li><a href="../fr413857/index.html">Biostar Racing P1: échappement à froid</a></li>
<li><a href="../fr413859/index.html">Révéler les secrets d'un extraterrestre interplanétaire</a></li>
<li><a href="../fr413861/index.html">L'Europe reproduit l'approche de réutilisabilité de SpaceX</a></li>
<li><a href="../fr413867/index.html">AI a fait son premier film et c'est un film d'horreur</a></li>
<li><a href="../fr413871/index.html">Meilleures pratiques agiles et pratiques pour les équipes techniques et non techniques</a></li>
<li><a href="../fr413873/index.html">Les données récupérées de la mission Apollo ont aidé à résoudre le mystère du «chauffage de la lune»</a></li>
<li><a href="../fr413875/index.html">SpaceX développera un "centre spatial du futur"</a></li>
<li><a href="../fr413877/index.html">Vous donnez juste une raison. Ou sous quel prétexte peuvent-ils vous voler maintenant?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>