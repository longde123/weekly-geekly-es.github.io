<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì£ üë®üèæ‚Äçüé® üë©üèº‚Äçüé§ Wie werden Sie nicht verwendeten CSS-Code los? Teil 2 üññüèø ‚õÖÔ∏è üêò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute ver√∂ffentlichen wir den zweiten Teil der √úbersetzung von Material zum Kampf gegen nicht verwendeten CSS-Code. 

  

 ‚Üí Der erste Teil 

 CSS-Nac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie werden Sie nicht verwendeten CSS-Code los? Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/477276/">  Heute ver√∂ffentlichen wir den zweiten Teil der √úbersetzung von Material zum Kampf gegen nicht verwendeten CSS-Code. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/477276/"><img src="https://habrastorage.org/webt/vw/sy/lo/vwsylop4f7fowarmknm_4fifpso.jpeg"></a> <br><br>  ‚Üí <a href="https://habr.com/ru/company/ruvds/blog/477274/">Der erste Teil</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">CSS-Nachbearbeitung</font> </h2><br>  Angenommen, in einigen Projekten wird CSS mit Less oder Sass geschrieben, und dann wird ein Postprozessor verwendet, um den vorhandenen Code in regul√§res CSS zu kompilieren.  In einem solchen Projekt gibt es wahrscheinlich ein automatisches System zum Entfernen von nicht verwendetem CSS, das nach der CSS-Vorverarbeitung gestartet wird.  Das k√∂nnte so aussehen: <br><br><ol><li>  Sass. </li><li>  PostCSS / automatisches Pr√§fixsystem. </li><li>  Unbenutztes CSS entfernen. </li><li>  CSS-Code f√ºr die Produktion bereit. </li></ol><br>  Das macht einerseits Sinn und andererseits - es sieht in meinen Augen etwas seltsam aus.  Der Punkt ist, dass bei diesem Ansatz der Quellcode, der Stilisierungsbefehle enth√§lt, nicht korrigiert wird, basierend auf dem der endg√ºltige CSS-Code erstellt wird, der nicht verwendetes CSS enth√§lt.  Stattdessen wird unn√∂tiges CSS am Ende des Erstellungsprozesses einfach entfernt.  Ich vermute, dass in JavaScript bei der Implementierung des Tree-Shaking-Algorithmus seit einiger Zeit etwas √Ñhnliches getan wird.  Das hei√üt, ein derartiger Umgang mit CSS ist √ºberhaupt nicht neu.  Aber f√ºr mich scheint das trotzdem falsch zu sein, da die CSS-Codebasis etwas ist, von dem man sagen kann, dass es auf der Oberfl√§che von Webprojekten liegt.  Ein solcher Ansatz veranlasst Entwickler fast, unachtsam CSS zu schreiben, um sicherzustellen, dass alles in den Quell-CSS-Code geschrieben wird.  Und die Wahrheit ist, dass das System unn√∂tiges CSS automatisch entfernt.  Dies entzieht den Entwicklern jedoch den Wunsch, genau zu verstehen, wie ihre Designs gestaltet sind und wie genau CSS in ihnen verwendet wird. <br><br><h2>  <font color="#3AC1EF">Purgecss</font> </h2><br>  <a href="https://www.purgecss.com/">PurgeCSS</a> ist ein weiteres Projekt zur Bek√§mpfung von nicht verwendetem CSS.  Obwohl dies nicht direkt mit den F√§higkeiten dieses Projekts zusammenh√§ngt, gef√§llt es mir, weil die Dokumentation die <a href="https://www.purgecss.com/comparison">Unterschiede zu den</a> Mitbewerbern klar erkl√§rt.  Oben haben wir bereits ein Fragment eines Vergleichs zwischen PurgeCSS und PurifyCSS angegeben.  Und hier ist ein weiterer Auszug aus der PurgeCSS-Dokumentation, die PurifyCSS gewidmet ist.  Der Punkt ist, dass das Hauptproblem bei PurifyCSS die geringe Modularit√§t dieses Projekts ist.  Dies ist jedoch die Hauptst√§rke von PurifyCSS.  Wie bereits erw√§hnt, betrachtet PurifyCSS CSS-W√∂rter als alle W√∂rter, die es in Dateien findet.  Dieser Ansatz ist mit Fehlern behaftet.  PurifyCSS l√∂st dieses Problem jedoch, indem es die Erstellung von Extraktorfunktionen erm√∂glicht.  Eine solche Funktion nimmt den Inhalt einer Datei und extrahiert daraus eine Liste der darin verwendeten CSS-Selektoren.  Auf diese Weise k√∂nnen Sie das Problem, nicht verwendeten CSS-Code loszuwerden, sehr gut l√∂sen. <br><br>  Das PurgeCSS-Projekt sieht jetzt aus wie ein wichtiger Akteur auf dem Markt f√ºr die Bereinigung von CSS-Code.  Viele benutzen es, viele schreiben dar√ºber. <br><br><ul><li>  <a href="https://medium.com/dwarves-foundation/remove-unused-css-styles-from-bootstrap-using-purgecss-88395a2c5772">Hier finden Sie</a> Informationen zur Verwendung von PurgeCSS, insbesondere bei der Arbeit mit Bootstrap. </li><li> In <a href="https://www.viget.com/articles/a-better-approach-for-using-purgecss-with-tailwind/">diesem</a> Artikel erfahren Sie, dass PurgeCSS Selektoren unter ungew√∂hnlichen Umst√§nden nicht mithilfe von Whitelists entfernt. </li><li>  <a href="https://flaviocopes.com/tailwind-setup/">Hier</a> erfahren Sie, wie PurgeCSS in Verbindung mit npm-Skripten und mit PostCSS verwendet wird. </li><li>  <a href="https://frontstuff.io/how-i-dropped-250-kb-of-dead-css-weight-with-purgecss">Es geht</a> darum, wie PurgeCSS mit Tailwind zusammenarbeitet. </li></ul><br>  Obwohl PurgeCSS f√ºr die Arbeit mit Tailwind ein spezielles Tuning ben√∂tigt, scheinen diese beiden Tools perfekt miteinander kombiniert zu sein.  Selbst in der <a href="https://tailwindcss.com/docs/controlling-file-size/">Dokumentation zu</a> Tailwind finden Sie eine Empfehlung f√ºr die gemeinsame Nutzung.  Und PurgeCSS verf√ºgt √ºber <a href="https://www.purgecss.com/cli">ein Befehlszeilentool,</a> mit dem es beim Erstellen von Projekten angewendet werden kann. <br><br>  Ich denke, das Wesentliche dabei ist Folgendes: Tailwind erstellt eine gro√üe CSS-Datei voller Hilfsselektoren.  Es wird jedoch nicht davon ausgegangen, dass alle diese Selektoren im Projekt verwendet werden.  Der Entwickler verwendet sie, um alle Probleme beim Stylen seines HTML-Codes zu l√∂sen. Anschlie√üend analysiert PurgeCSS diesen HTML-Code und entfernt unn√∂tige Selektoren, wodurch CSS f√ºr die Produktion vorbereitet wird. <br><br>  Richtig, PurgeCSS muss immer noch √ºber jede auf der Site verwendete HTML- und JavaScript-Datei informiert werden.  Mit anderen Worten, Sie m√ºssen alles, was sich auf externe Ressourcen bezieht, unabh√§ngig konfigurieren und ber√ºcksichtigen, dass die aus bestimmten Speichern in das Projekt eingehenden Daten w√§hrend der Zusammenstellung des Projekts m√∂glicherweise nicht analysiert werden.  Infolgedessen ist die Verwendung von PurgeCSS bei der Zusammenstellung von Projekten mit einem erheblichen manuellen Aufwand verbunden. <br><br><h2>  <font color="#3AC1EF">Mein Lieblingsansatz, um unbenutztes CSS loszuwerden</font> </h2><br>  Was mir am besten gef√§llt, ist der folgende Ansatz, um unn√∂tiges CSS zu entfernen.  Dies bedeutet, dass es jemanden im Projektentwicklungsteam gibt, der mit dem CSS-Code dieses Projekts sehr vertraut ist.  Diese Person sollte aktuelle Probleme mit Stilen kennen und diese schrittweise l√∂sen.  Vielleicht ist dies eine veraltete Ansicht der Situation, die einer Person geh√∂rt, die mit der Zeit Schritt halten sollte.  Aber f√ºr mich scheint es auf jeden Fall der praktischste Ansatz zu sein.  In Anbetracht der Tatsache, dass die Aufgabe, die wir uns √ºberlegen, so schwer zu l√∂sen ist, kann die Antwort auf die Herausforderung, die diese Aufgabe f√ºr Entwickler darstellt, harte Arbeit sein.  Die Antwort ist ein Verst√§ndnis des Problems und seiner schrittweisen L√∂sung.  Ein Front-End-Entwickler, der mit dem Projekt vertraut ist und wei√ü, was darin verwendet wird und was nicht, kann dieses Problem l√∂sen. <br><br>  Ich habe einen extremen Ansatz gesehen, um herauszufinden, ob ein Site Selector verwendet wird.  Der CSS-Block verwendete ein Design wie <code>background-image: url(/is-this-being-used.gif?selector);</code>  .  Nach der Anwendung wurden die Serverprotokolle regelm√§√üig √ºberpr√ºft, um festzustellen, ob eine Anforderung zum Empfang des entsprechenden Abbilds gestellt wurde.  Wenn es eine solche Anfrage gab, wird der zu untersuchende CSS-Block verwendet.  Wenn dies nicht der Fall ist, wird es nicht verwendet. <br><br>  Aber vielleicht ist mein Lieblingswerkzeug im unbenutzten CSS-Explorer-Toolkit dasjenige, das im n√§chsten Abschnitt besprochen wird. <br><br><h2>  <font color="#3AC1EF">Untersuchung von Projekten durch visuelle Regression</font> </h2><br>  Diese Methode besteht darin, dass der Entwickler so viele Screenshots der Site wie m√∂glich macht.  Sie erstellen Kopien der Bildschirme der wichtigsten Seiten und der Seiten, deren Erscheinungsbild vom Status der Anwendung abh√§ngt.  Screenshots werden in verschiedenen Browsern mit unterschiedlichen Bildschirmgr√∂√üen aufgenommen.  Diese Screenshots werden basierend auf Materialien aus dem Hauptzweig des Projektarchivs erstellt. <br><br>  Vor dem Zusammenf√ºhren eines anderen Zweigs mit dem Hauptzweig werden dann neue Screenshots auf der Grundlage der Materialien des neuen Zweigs erstellt und mit den f√ºr den Hauptzweig erstellten verglichen.  Dies geschieht nat√ºrlich nicht manuell, sondern programmgesteuert. <br><br>  Genau genommen ist <a href="https://youtu.be/Vbg81kc56FU">hier ein</a> Video, in dem es gezeigt wird. <br><br>  Es ist anzumerken, dass bereits viel zum Thema Tools f√ºr das Studium der visuellen Regression gesagt wurde, aber der <a href="https://percy.io/">Autor</a> dieses Videos ist die einzige Person, die alles sehr verst√§ndlich erkl√§rt.  Sie m√ºssen nicht nur Screenshots machen.  Sie m√ºssen sie vergleichen und nach Unterschieden zwischen ihnen suchen.  Man muss nicht nur Unterschiede finden;  Sie m√ºssen sie akzeptieren oder ablehnen.  Dar√ºber hinaus ist es erforderlich, dass die √úbernahme oder Genehmigung von √Ñnderungen den Prozess der Zusammenf√ºhrung von Zweigen in Repositorys beeinflusst.  Dar√ºber hinaus sollte der Entwickler in der Lage sein, den Browser vor dem Erstellen einer Bildschirmkopie zu konfigurieren und die Arbeit mit den aufgenommenen Screenshots zu automatisieren. <br><br><h2>  <font color="#3AC1EF">Atomic CSS und CSS-in-JS</font> </h2><br>  Ich bin sicher, dass viele Leser dieses Materials sagen k√∂nnen: "Ich habe kein unbenutztes CSS, da die von mir verwendeten Tools genau den Code generieren, den ich ben√∂tige, und nichts weiter." <br><br>  Wenn ja, dann ist das einfach wunderbar. <br><br>  Vielleicht sprechen wir √ºber <a href="https://acss.io/guides/atomizer.html">Atomizer</a> .  M√∂glicherweise handelt es sich um ein <a href="https://tachyons.io/">Tachyonen-</a> Tool, dessen Ergebnisse √ºber <a href="https://github.com/uncss/uncss">UnCSS √ºbermittelt werden</a> und das vorsichtig ist.  Vielleicht - dies ist eine Kombination aus <a href="https://www.purgecss.com/">R√ºckenwind</a> + <a href="https://www.purgecss.com/">PurgeCSS</a> , die mittlerweile <a href="https://www.purgecss.com/">weit verbreitet</a> ist. <br><br>  Vielleicht - sie arbeiten immer noch irgendwie mit Stilen.  Wenn jemand JavaScript-Komponenten und -Stile eng miteinander verkn√ºpft, z. B. bei der Verwendung von React and Emotion, oder einfach CSS-Module mit irgendetwas anwendet, verringert sich unter den Vorteilen solcher CSS-in-JS-Ans√§tze das Volumen nicht verwendeter CSS in fertigen Projekten.  Da viele JavaScript-basierte Projekte den Tree-Shaking-Algorithmus und Codetrennungstechniken verwenden, werden solche Projekte nicht nur weniger unn√∂tiges CSS enthalten.  Im Laufe ihrer Arbeit wird nur das geladen, was in der jeweiligen Situation ben√∂tigt wird.  Es <a href="https://css-tricks.com/the-differing-perspectives-on-css-in-js/">gibt</a> jedoch nat√ºrlich <a href="https://css-tricks.com/the-differing-perspectives-on-css-in-js/">Nachteile</a> bei solchen Ans√§tzen f√ºr die Arbeit mit CSS. <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Lassen Sie uns nun dar√ºber nachdenken, wie Sie das Auftreten von unn√∂tigem CSS-Code in zuk√ºnftigen Projekten vermeiden k√∂nnen.  Ich glaube, dass die Zukunft des Stils die Trennung zwischen globalen Stilen und Stilen ist, die auf einzelne Komponenten angewendet werden.  Die meisten Stile sind auf den Umfang der Komponenten beschr√§nkt, es gibt jedoch globale Stile, mit denen die Kaskadierbarkeit von CSS ausgenutzt werden kann.  Beispielsweise kann es sich um globale typografische Standardeinstellungen handeln. <br><br>  Wenn die meisten Stile durch den Umfang der Komponenten begrenzt sind, ist es meiner Meinung nach weniger wahrscheinlich, dass nicht ben√∂tigte Stile in fertige Projekte eindringen, da ein Entwickler die Beziehungen zwischen kleinen und eng verwandten HTML- und CSS-Fragmenten leichter untersuchen kann.  Und wenn die Komponente aus dem Projekt entfernt oder entwickelt wird, verl√§sst die Stilisierung das Projekt oder entwickelt sich mit ihm.  Infolgedessen werden CSS-Assemblys basierend auf den tats√§chlich im Projekt verwendeten Komponenten erstellt. <br><br>  Die CSS-in-JS-Technologie bewegt sich ganz nat√ºrlich in diese Richtung.  Bei der Anwendung solcher Technologien werden Stile an Komponenten gebunden.  Und das ist in diesem Fall das Wichtigste.  Das Binden von Stilen an Komponenten ist jedoch optional.  Ich mag den universellen Ansatz, der die Verwendung von <a href="https://github.com/css-modules/css-modules">CSS-Modulen beinhaltet</a> .  Es zielt fast vollst√§ndig darauf ab, den Bereich der Stile zu trennen, und zwingt den Entwickler nicht, ein bestimmtes JavaScript-Framework zu verwenden. <br><br>  Vielleicht scheint Ihnen all das theoretisch oder weit von den tats√§chlichen Bed√ºrfnissen der Webentwickler entfernt zu sein.  Sie haben nur eine Site, die Bootstrap verwendet, und m√∂chten die CSS-Gr√∂√üe reduzieren, die Benutzer dieser Site laden.  In diesem Fall empfehle ich Ihnen, den Bootstrap-Quellcode anstelle des Standardbuilds zu verwenden.  Dieser Quellcode wird mit SCSS geschrieben und besteht aus vielen Plug-Ins.  Das hei√üt, wenn Sie einige Teile von Bootstrap nicht ben√∂tigen, k√∂nnen Sie die entsprechenden Module einfach deaktivieren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/169/779/0bc/1697790bc12ac9c8b11b053e3aeff6ee.png"></div><br>  <i><font color="#999999">Entfernen von Dropdown-, Badge- und Breadcrumb-Modulen aus Bootstrap, bevor ein Projekt erstellt wird</font></i> <br><br>  Ich w√ºnsche Ihnen allen viel Gl√ºck im schwierigen Kampf mit unn√∂tigem CSS-Code. <br><br>  <b>Sehr geehrte Leser!</b>  Wie gehen Sie mit nicht verwendetem CSS-Code um, der in die Produktion gelangt? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/vps_start/"><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477276/">https://habr.com/ru/post/de477276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477264/index.html">Der Bagger wurde zu einem autonomen Roboter, der Gr√§ben selbst√§ndig ausheben kann</a></li>
<li><a href="../de477266/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 390 (18.-24. November 2019)</a></li>
<li><a href="../de477268/index.html">Suchl√∂sungsoptimierung auf Github</a></li>
<li><a href="../de477272/index.html">Erste Einf√ºhrung in AssemblyScript</a></li>
<li><a href="../de477274/index.html">Wie werden Sie nicht verwendeten CSS-Code los? Teil 1</a></li>
<li><a href="../de477278/index.html">Frontend-Test</a></li>
<li><a href="../de477282/index.html">Profiling Go-Projektcode und Beheben von Speicherzuordnungsproblemen</a></li>
<li><a href="../de477284/index.html">Warum ist JavaScript im strikten Modus erforderlich?</a></li>
<li><a href="../de477286/index.html">Axios oder Fetch: Was im Jahr 2019 verwenden?</a></li>
<li><a href="../de477288/index.html">John Lewis auf der Undoing Aging Conference 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>