<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎉 👩🏾‍🚒 🌫️ Visão geral e teste comparativo do PC "Elbrus 401 - PC". Parte Três - Ferramentas de Desenvolvimento ⚱️ 🚯 📡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a revisar o novo computador doméstico. Após um breve conhecimento dos recursos da arquitetura Elbrus, consideraremos as ferramentas de des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Visão geral e teste comparativo do PC "Elbrus 401 - PC". Parte Três - Ferramentas de Desenvolvimento</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389927/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuamos a revisar o novo computador doméstico. </font><font style="vertical-align: inherit;">Após um breve conhecimento dos recursos da arquitetura Elbrus, consideraremos as ferramentas de desenvolvimento de software oferecidas a nós.</font></font><br>
<br>
<img src="https://habrastorage.org/files/6c3/e5f/5a6/6c3e5f5a6ffa4c3a84e7513fdeadb231.jpeg" alt="Vista frontal e lateral da unidade do sistema Elbrus 401-PC" title="Elbrus 401-PC.  Unidade do sistema  Vista frontal e lateral" width="288" height="288"><img src="https://habrastorage.org/files/9d3/6bd/204/9d36bd20497345beb64a7062a9362a0b.png" alt="Exemplo de programa de linguagem de máquina E2K" title="Elbrus 401-PC.  Linguagem de máquina E2K.  Exemplo de programa" width="400" height="288"><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre-se da estrutura do artigo:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revisão de hardware</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processo de aquisição;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hardware</font></font></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revisão de software</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lançamento do sistema operacional;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">software regular;</font></font></li>
</ul></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visão geral das ferramentas de desenvolvimento:</font></font></strong><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recursos de arquitetura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linguagem de máquina</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ferramentas de desenvolvimento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desempenho de benchmarking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descrição de computadores rivais</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados de benchmark;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resumindo.</font></font></li>
</ul></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Boa leitura!</font></font><br>
<br>
<h1><a name="arch"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos de arquitetura</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A essência da arquitetura E2K em uma frase pode ser formulada da seguinte maneira: registros de 64 bits, paralelismo explícito da execução de instruções e acesso estritamente controlado à memória. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, processadores de arquitetura x86 ou SPARC capazes de executar mais de uma instrução por ciclo (superescalar) e, às vezes, também fora de ordem, estão </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implícitos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paralelismo: o processador analisa diretamente as dependências entre as instruções em uma pequena seção de código e, se considerar possível, carrega determinados atuadores ao mesmo tempo. Às vezes, ele age muito otimista - especulativamente, descartando o resultado ou revertendo a transação em caso de previsão malsucedida. Às vezes, pelo contrário, é muito pessimista - assumindo dependências entre os valores dos registradores ou partes dos registradores, que na verdade não são do ponto de vista do programa executável. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explícito</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paralelismo (computação explicitamente paralela de instruções, EPIC), a mesma análise ocorre no estágio de compilação e todas as instruções de máquina definidas para execução paralela são escritas em uma palavra de instrução muito grande (VLIW) - e a Elbrus tem o tamanho dessa As “palavras” não são fixas e podem ter de 1 a 8 palavras duplas (neste contexto, uma única palavra tem capacidade para 32 bits).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem dúvida, o compilador tem muito mais oportunidades em termos de quantidade de código coberto, tempo e memória gastos e, ao escrever o código da máquina manualmente, o programador pode realizar uma otimização ainda mais inteligente. Mas isso é na teoria e, na prática, é improvável que você use o assembler, e, portanto, tudo depende de quão bom é o compilador de otimização, e escrever um não é uma tarefa fácil, para dizer o mínimo. Além disso, se, com paralelismo implícito, as instruções "lentas" continuarem funcionando sem bloquear o recebimento das instruções a seguir em outros atuadores, com paralelismo explícito, todo o comando amplo aguardará a conclusão completa. Finalmente, um compilador otimizador ajudará pouco na interpretação de linguagens dinâmicas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo isso é bem entendido no MCST, é claro, e, portanto, a Elbrus também implementa tecnologias de execução especulativa, código e dados pré-carregados e operações computacionais combinadas. </font><font style="vertical-align: inherit;">Portanto, em vez de teorizar e se perguntar infinitamente quantos gigaflops hipotéticos essa ou aquela plataforma podem dar sob um conjunto de circunstâncias bem-sucedidas, na quarta parte do artigo, apenas pegamos e avaliamos o desempenho real de programas reais - aplicados e sintéticos.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLIW: um avanço ou um beco sem saída?</font></font></b><div class="spoiler_text"> ,   VLIW   &nbsp;  : , &nbsp; ‑ Transmeta Crusoe&nbsp;— &nbsp;«».     , &nbsp;        &nbsp; Efficeon (   &nbsp; ) &nbsp;&nbsp;  .  &nbsp;,  &nbsp;   x86- &nbsp; ,  &nbsp;  . ,  &nbsp;Pentium&nbsp;M  &nbsp;,   &nbsp; Pentium&nbsp;4 ,      . &nbsp;&nbsp;   &nbsp;  VIA&nbsp;C3,    x86.<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devido à sua natureza exótica, a tecnologia de execução protegida de programas em linguagens C / C ++, onde o uso de ponteiros oferece uma ampla gama de oportunidades para dar um tiro no pé, não é menos interessante. O conceito de proteção contextual, implementado em conjunto pelo compilador no estágio de montagem e o processador em tempo de execução, bem como o sistema operacional em termos de gerenciamento de memória, não permitirá que o escopo das variáveis ​​seja violado - seja acessando uma variável de classe privada, dados privados de outro módulo, variáveis ​​locais da função de chamada . Quaisquer manipulações com a alteração do nível de acesso são permitidas apenas na direção da redução de direitos. Salvar links para objetos de vida curta em estruturas de vida longa é bloqueado. As tentativas também são impedidas de usar links mortos: se o objeto para o qual o link foi recebido uma vez já tiver sido excluído,mesmo a localização de outra instalação nova no mesmo endereço não será considerada uma desculpa para acessar seu conteúdo. Incentivado a usar dados como um código e transferir o controle para qualquer lugar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, assim que passamos de idiomas de alto nível para indicadores de baixo nível, todas essas áreas de visibilidade acabam sendo nada além de sal sintático. Alguns casos (mais simples) de uso indevido de ponteiros às vezes podem ajudar a capturar analisadores estáticos de código fonte. Mas quando o programa já foi traduzido para as instruções da máquina x86 ou SPARC, nada o impedirá de ler ou gravar o valor da célula de memória ou do tamanho errado, o que levará à falha em um local completamente diferente - e aqui está você, olhando a pilha danificada e você não tem idéia por onde começar a depuração, porque na outra máquina o mesmo código é executado com êxito. E o estouro de pilha e as vulnerabilidades resultantes são apenas o flagelo das plataformas populares. É gratificante que nossos desenvolvedores abordem sistematicamente esses problemas,e não se limitando a organizar cada vez mais muletas, cujo efeito ainda se assemelha a um ancinho. Afinal, ninguém se importa com a rapidez com que seu programa funciona, se não funcionar corretamente. Além disso, um controle mais rígido do compilador obriga a reescrever o código "mau cheiro" e intolerável, o que significa que ele indiretamente aprimora a cultura de programação.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ordem dos bytes ao armazenar números na memória da Elbrus, diferentemente do SPARC, é pouco endian (o byte mais baixo vem primeiro), ou seja, como no x86. </font><font style="vertical-align: inherit;">Da mesma forma, como a plataforma visa oferecer suporte ao código x86, não há restrições no alinhamento de dados na memória.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordem, Alinhamento e Portabilidade</font></font></b><div class="spoiler_text">&nbsp;,    Intel,   ,  &nbsp;    &nbsp; &nbsp; (,  32‑  &nbsp; <em>0x0400000<strong>5</strong></em>)&nbsp;—  &nbsp;  ,   , &nbsp; ,  &nbsp; .    - ,   &nbsp; ,  &nbsp;    &nbsp;,&nbsp;—   ,    &nbsp;  ( &nbsp; ,  UTF‑16),  &nbsp;  ,  , &nbsp;   , &nbsp;&nbsp;    ‑. ,         &nbsp; ,&nbsp;— , SPARC,&nbsp;—    &nbsp; .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode ler mais sobre o design dos computadores MCST nas arquiteturas SPARC e E2K no livro "Microprocessadores e complexos de computação da família Elbrus", </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicado pela Peter Publishing House</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em uma&nbsp; </font><font style="vertical-align: inherit;">tiragem mínima de impressão e vendido há muito tempo, mas está disponível gratuitamente em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formato PDF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 MB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) e por uma pequena taxa no&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No contexto da falta de outras informações detalhadas de domínio público, esta publicação é apenas um depósito de conhecimento. </font><font style="vertical-align: inherit;">Mas o texto está concentrado principalmente no hardware, nos algoritmos de operação de buffers e pipelines, caches e dispositivos lógicos aritméticos - o tópico de escrever programas [eficazes] não é completamente abordado, e até mesmo mencionar as instruções da máquina pode ser contado nos dedos.</font></font><br>
<br>
<h1><a name="asm"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linguagem de máquina</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além de compilar as linguagens de alto nível C, C ++, Fortran, a documentação em todas as oportunidades não esquece de mencionar a possibilidade de escrever programas diretamente no Assembler, mas em nenhum lugar é especificado como exatamente você pode se envolver nessa arte de filigrana, onde pelo menos você pode obter uma referência às instruções da máquina. </font><font style="vertical-align: inherit;">Felizmente, o sistema possui um depurador GDB que pode desmontar o código de programas compilados anteriormente. </font><font style="vertical-align: inherit;">Para não ir além do escopo do artigo, escrevemos uma função aritmética simples que possui uma boa lista de pendências para paralelização.</font></font><br>
<br>
<pre><code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> CalcParallel(
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> a,
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> b,
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> c,
	<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> d,
	<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> e,
	<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> f,
	<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> g,
	<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> h<font></font>
) {<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (a * b) + (c * d) - (e * f) + (g / h);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está o que ele traduz ao compilar no modo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-O3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="hljs perl"><span class="hljs-number"><span class="hljs-number">0x0000000000010490</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;:<font></font>
	muld,<span class="hljs-number"><span class="hljs-number">1</span></span> %dr0, %dr1, %dg20<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>, %r3, %dg19<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">3</span></span> %r6, _f32,_lts2 <span class="hljs-number"><span class="hljs-number">0x2400</span></span>, %g17<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">4</span></span> %r5, _lit32_ref, _lts2 <span class="hljs-number"><span class="hljs-number">0x00002400</span></span>, %g18<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">5</span></span> %r7, _f32,_lts3 <span class="hljs-number"><span class="hljs-number">0x200</span></span>, %g16
	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> %ctpr3<font></font>
	setwd wsz = <span class="hljs-number"><span class="hljs-number">0x5</span></span>, nfx = <span class="hljs-number"><span class="hljs-number">0x1</span></span>
	setbp psz = <span class="hljs-number"><span class="hljs-number">0x0</span></span>
<span class="hljs-number"><span class="hljs-number">0x00000000000104c8</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">56</span></span>&gt;:<font></font>
	nop <span class="hljs-number"><span class="hljs-number">5</span></span>
	muld,<span class="hljs-number"><span class="hljs-number">0</span></span> %dr2, %dg19, %dg18<font></font>
	muls,<span class="hljs-number"><span class="hljs-number">3</span></span> %r4, %g18, %g17<font></font>
	sdivs,<span class="hljs-number"><span class="hljs-number">5</span></span> %g17, %g16, %g16
<span class="hljs-number"><span class="hljs-number">0x00000000000104e0</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">80</span></span>&gt;:<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>, %g17, %dg17<font></font>
	addd,<span class="hljs-number"><span class="hljs-number">1</span></span> %dg20, %dg18, %dg18
<span class="hljs-number"><span class="hljs-number">0x00000000000104f0</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">96</span></span>&gt;:<font></font>
	nop <span class="hljs-number"><span class="hljs-number">5</span></span>
	subd,<span class="hljs-number"><span class="hljs-number">0</span></span> %dg18, %dg17, %dg17
<span class="hljs-number"><span class="hljs-number">0x00000000000104f8</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">104</span></span>&gt;:<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>, %g16, %dg16
<span class="hljs-number"><span class="hljs-number">0x0000000000010500</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">112</span></span>&gt;:<font></font>
	ct %ctpr3<font></font>
	ipd <span class="hljs-number"><span class="hljs-number">3</span></span>
	addd,<span class="hljs-number"><span class="hljs-number">0</span></span> %dg17, %dg16, %dr0
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira coisa que chama sua atenção é que cada comando é decodificado imediatamente em várias instruções executadas em paralelo. A designação mnemônica de instruções é geralmente intuitiva, embora alguns nomes pareçam incomuns após a Intel: por exemplo, uma instrução de extensão não assinada aqui é chamada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sxt</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , não&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">movzx</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O parâmetro de muitos comandos computacionais, além dos próprios operandos, é o número do dispositivo executivo - não é sem razão que o ELBRUS defende o agendamento explícito de utilização de recursos básicos, ou seja, “planejamento explícito para o uso de recursos básicos”. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para acessar o valor completo do registro de 64 bits, o prefixo “ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"; em teoria, também é possível acessar os 16 e 8 bits mais baixos do valor. A designação de registros globais de uso geral, dos quais existem 32 partes, é prefixada com " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">antes do número </font><font style="vertical-align: inherit;">, e o procedimento local é registrado com o prefixo " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". O tamanho da janela dos registros locais solicitados pela instrução </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setwd</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode chegar a 224 e a </font><em><font style="vertical-align: inherit;">bomba é empurrada para a</font></em><font style="vertical-align: inherit;"> pilha automaticamente conforme necessário. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira como você aplica certas instruções é confusa: por exemplo, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retorne</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como você pode imaginar, serve para retornar o controle ao procedimento de chamada, no entanto, em todas as amostras de código estudadas, essa instrução ocorre muito antes do último comando (onde algum tipo de manipulação de contexto também está presente), às vezes até na primeira palavra de comando, como aqui. Embora o livro acima mencionado pague um parágrafo inteiro a esse problema, ainda não ficou claro para nós. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atualização a partir de 9 de fevereiro de 2016:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> os comentários sugerem que a </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrução return</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apenas prepara o caminho para o retorno do subprograma e permite que o processador comece a carregar os próximos comandos do procedimento de chamada, e o próprio controle retorna quando a execução atinge a instrução&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ct</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, “código de fácil leitura” e “código eficiente” estão longe de ser os mesmos quando se trata de instruções da máquina. </font><font style="vertical-align: inherit;">Se você compilar sem otimização, o código será mais consistente e semelhante ao cálculo da testa, mas ao custo de aumentar: em vez de 6 palavras de comando saturadas, 8 esparsas serão geradas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sessão de previsão do futuro com base em café para o sim, vamos terminar antes de fantasiarmos com suposições completamente ridículas. </font><font style="vertical-align: inherit;">Vamos esperar que um dia a referência de comando e o guia de programação e otimização sejam divulgados.</font></font><br>
<br>
<h1><a name="devel"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramentas de desenvolvimento</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O compilador de linguagem C / C ++ padrão no sistema operacional Elbrus é o LCC, um desenvolvimento proprietário da empresa MCST, compatível com o GCC. </font><font style="vertical-align: inherit;">Informações detalhadas sobre a estrutura e os princípios desse compilador não são publicadas, mas de acordo com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uma entrevista com um ex-desenvolvedor de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uma das várias subespécies desenvolvidas do compilador, o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Edison Design Group</font></a><font style="vertical-align: inherit;"> usa um front-end para análise de alto nível dos códigos-fonte&nbsp;</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e a tradução de baixo nível nas instruções da máquina podem ser executadas de diferentes maneiras - sem otimização ou com otimização. </font><font style="vertical-align: inherit;">É o compilador de otimização entregue aos usuários finais, não apenas na plataforma E2K, para a qual simplesmente não existem geradores de código de máquina alternativos, mas também na família de plataformas SPARC, onde também está disponível o GCC habitual como parte do sistema operacional MSVS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considerando os recursos arquiteturais listados acima - simultaneidade óbvia, execução segura de programas - o compilador LCC implementa obviamente muitas soluções únicas dignas dos mais rigorosos estudos e testes na prática. Infelizmente, no momento da redação dessas linhas, o autor não possui qualificações suficientes para isso, nem tempo para tais estudos; Espero que, mais cedo ou mais tarde, essa questão seja abordada por um círculo muito mais amplo de representantes da comunidade de TI, incluindo os mais competentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelo que você percebeu a olho nu ao criar programas para testar o desempenho, o LCC no E2K, com mais freqüência do que outros, alerta sobre possíveis erros, construções analfabetas ou simplesmente lugares suspeitos no código. É verdade que o autor não está tão familiarizado com o GCC para garantir a distinção entre mensagens únicas do LCC em russo e simplesmente traduzidas (além disso, a tradução é seletiva), e não tenho certeza de que um fluxo mais intenso de avisos não seja uma consequência da configuração de montagem concluída automaticamente. Além disso, sem conhecer a semântica de uma seção específica do código, às vezes é difícil entender o quão inteligente o compilador é em encontrar erros ocultos ou acionar um alarme falso. Por exemplo, no código do Postgresql, a mesma construção é encontrada quatro vezes no mesmo arquivo com pequenas variações:</font></font><br>
<br>
<pre><code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>, ptr = cont-&gt;cells; *ptr; i++, ptr++) {<font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">//....//</span></span><font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">/* is string only whitespace? */</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((*ptr)[<span class="hljs-built_in"><span class="hljs-built_in">strspn</span></span>(*ptr, <span class="hljs-string"><span class="hljs-string">" \t"</span></span>)] == <span class="hljs-string"><span class="hljs-string">'\0'</span></span>)
		<span class="hljs-built_in"><span class="hljs-built_in">fputs</span></span>(<span class="hljs-string"><span class="hljs-string">"&amp;nbsp; "</span></span>, fout);
	<span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
		html_escaped_print(*ptr, fout);<font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">//....//</span></span><font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O compilador prevê uma possível saída da matriz unidimensional na cadeia de caracteres com a chamada da função </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strspn</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sob quais circunstâncias isso pode acontecer, o autor não entende (e não houve esse aviso em outras plataformas, embora o modo de verificação seja </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dentro dos limites da garantia)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é padrão para o GCC), no entanto, vale ressaltar que a replicação múltipla do mesmo design não trivial (já que era necessário explicar seu objetivo no comentário), em vez de colocá-lo em uma função separada com um nome eloquente que não requer explicação. Mesmo que o alarme tenha sido falso, detectar um código de mau cheiro é um efeito útil; os autores do analisador estático PVS - Studio ficarão sem trabalho. Mas seriamente, seria divertido e útil comparar quais erros adicionais no código o LCC é realmente capaz de detectar devido aos recursos exclusivos da arquitetura E2K - ao mesmo tempo, o mundo do software livre poderia receber outro lote de relatórios de erros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro resultado de um conhecido curioso com LCC loquaz foi o autor da educação, e então seus colegas mais experientes, sobre o que trigraphs ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trigraphs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) em linguagens C / C ++, e por que eles não são suportados por padrão, felizmente. É assim que você vive e não suspeita que a combinação aparentemente inócua de pontuação em literais ou comentários de texto possa vir a ser uma bomba-relógio - ou um excelente material para um marcador de programa, dependendo do lado da barricada em que você está.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma conseqüência desagradável da auto-suficiência do LCC é que seu formato de mensagem é diferente do GCC e, quando compiladas em um ambiente de desenvolvimento (por exemplo, Qt Creator), essas mensagens caem apenas no log geral de trabalho, mas não na lista de problemas reconhecidos. Talvez isso possa ser personalizado de alguma forma, seja do lado do compilador ou no ambiente de desenvolvimento, mas pelo menos pronto para o uso, ele não se entende.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tradicionalmente agudo para plataformas domésticas, devido ao seu desempenho relativamente baixo, há a questão da compilação cruzada, ou seja, a montagem de programas para a arquitetura de destino e um conjunto específico de bibliotecas de sistemas, usando os recursos de computadores mais poderosos, com arquitetura diferente e outros softwares. </font><font style="vertical-align: inherit;">A julgar pelas linhas de identificação no núcleo do sistema Elbrus e no próprio compilador LCC, elas são montadas no Linux i386, mas este kit de ferramentas para x86, é claro, não está incluído no pacote de distribuição do próprio sistema. </font><font style="vertical-align: inherit;">É interessante, mas é possível fazer o oposto: na Elbrus, para coletar programas para outras plataformas? </font><font style="vertical-align: inherit;">(O autor não teve sucesso além da primeira fase da montagem do GCC para o i386.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versões dos pacotes mais significativos para o desenvolvedor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compiladores: lcc 1.19.18 (compatível com gcc 4.4.0);</font></font></li>
<li>: erlang&nbsp;15.b.1, gawk&nbsp;4.0.2, lua&nbsp;5.1.4, openjdk&nbsp;1.6.0_27 (jvm&nbsp;20.0‑b12), perl&nbsp;5.16.3, php&nbsp;5.4.11, python&nbsp;2.7.3, slang&nbsp;2.2.4, tcl&nbsp;8.6.1;</li>
<li> : autoconf&nbsp;2.69, automake&nbsp;1.13.1, cmake&nbsp;2.8.10.2, distcc&nbsp;3.1, m4&nbsp;1.4.16, make&nbsp;3.81, makedepend&nbsp;1.0.4, pkgtools&nbsp;13.1, pmake&nbsp;1.45;</li>
<li> : binutils&nbsp;2.23.1, elfutils&nbsp;0.153, patchelf&nbsp;0.6;</li>
<li>: boost&nbsp;1.53.0, qt&nbsp;4.8.4, qt&nbsp;5.2.1;</li>
<li>: expat&nbsp;2.1.0, ffi&nbsp;3.0.10, gettext&nbsp;0.18.2, glib&nbsp;2.36.3, glibc&nbsp;2.16.0, gmp&nbsp;4.3.1, gtk+&nbsp;2.24.17, mesa&nbsp;10.0.4, ncurses&nbsp;5.9, opencv&nbsp;2.4.8, pcap&nbsp;1.3.0, popt&nbsp;1.7, protobuf&nbsp;2.4.1, sdl&nbsp;1.2.13, sqlite&nbsp;3.6.13, tk&nbsp;8.6.0, usb&nbsp;1.0.9, wxgtk&nbsp;2.8.12, xml‑parser&nbsp;2.41, zlib&nbsp;1.2.7;</li>
<li>  &nbsp;: cppunit&nbsp;1.12.1, dprof&nbsp;1.3, gdb&nbsp;7.2, perf&nbsp;3.5.7;</li>
<li> : anjuta&nbsp;2.32.1.1, glade&nbsp;2.12.0, glade&nbsp;3.5.1, qt‑creator&nbsp;2.7.1;</li>
<li>  : bzr&nbsp;2.2.4, cvs&nbsp;1.11.22, git&nbsp;1.8.0, patch&nbsp;2.7, subversion&nbsp;1.7.7.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, se você esperava GCC 5, PHP 7 e Java 9, esses são os seus problemas, como diz um jogador famoso. Nesse caso, devo também agradecer que pelo menos não o GCC 3.4.6 (LCC 1.16.12), como nas versões anteriores do sistema Elbrus, ou GCC 3.3.6 na composição do MSVS 3.0; A propósito, o compilador principal no MSVS 3.0 ainda é o GCC 2.95.4 (e por que se surpreender quando há um kernel de uma ramificação 2.4?). Comparado com a situação anterior, quando foi possível encontrar um bug do GCC corrigido no upstream há dez anos, o novo sistema tem condições quase paradisíacas - você pode até deslizá-lo no C ++ 11 se não quiser manter a compatibilidade com versões anteriores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O surgimento do OpenJDK, pelo menos de alguma forma, já pode ser chamado de um grande avanço, porque não gosta de Java e&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mono.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em tais sistemas é conhecido há muito tempo; e essa aversão pode ser entendida quando mesmo os programas nativos mal se movem. Como existem muitos Javistas entre os colegas do autor, devido às circunstâncias acima, forçados a restringir os maravilhosos impulsos da alma, foi decidido dedicar uma série separada de testes de desempenho para dedicar o Java. Olhando para o futuro, observamos que os resultados foram desencorajadores, mesmo em termos relativos: com o mesmo sucesso, você pode escrever scripts interpretados em PHP ou Python, provavelmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O suporte apenas a C e C ++ não se limita à compatibilidade com o GNU Compiler Collection: o sistema ainda possui um tradutor Fortran. Como o autor conhece apenas o professor Fortran, qualquer pessoa interessada pode recomendar o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">tópico de</font></a><font style="vertical-align: inherit;"> dezembro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre "Feito conosco"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, onde os comentários tocam no uso desse idioma como referência. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a sobremesa, estocamos as mais deliciosas: a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">última parte do artigo é</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dedicada ao estudo do desempenho da Elbrus em comparação com uma variedade de plataformas de hardware e software, incluindo as domésticas.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt389927/">https://habr.com/ru/post/pt389927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt389915/index.html">RandomRace.ru - busca de direção para manequins (início)</a></li>
<li><a href="../pt389917/index.html">Unidade multifuncional eletrônica Power-flash</a></li>
<li><a href="../pt389919/index.html">eReader Prestigio: unidade e luta dos opostos de um leitor</a></li>
<li><a href="../pt389921/index.html">Elon Musk se recusou a vender o Modelo X para o cliente depois de criticar</a></li>
<li><a href="../pt389923/index.html">Voo para Marte em 2025, visita ao caminhão ISS e Tesla: o que Elon Musk prometeu no StartmeupHK 2016</a></li>
<li><a href="../pt389929/index.html">Aspirador de pó robô: 10 principais critérios de seleção</a></li>
<li><a href="../pt389931/index.html">Time de futebol americano perdeu porque os tablets Microsoft Surface quebraram</a></li>
<li><a href="../pt389935/index.html">Elon Musk: “A realidade virtual pode reduzir a atividade física”</a></li>
<li><a href="../pt389943/index.html">Revisão de vídeo do scanner 3D avançado RangeVision</a></li>
<li><a href="../pt389945/index.html">Vinil: novo é bem esquecido velho</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>