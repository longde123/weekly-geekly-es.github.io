<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸ–•ğŸ¿ â™’ï¸ Wi-Fiå’Œè®¸å¤šå…¶ä»–ç¼©å†™ã€‚ å¦‚ä½•åœ¨Androidåº”ç”¨ç¨‹åºä¸­çš„Wi-FièŠ‚ç‚¹ä¸Šè·å–æ•°æ®è€Œä¸ä¼šè†¨èƒ€ ğŸ‘©ğŸ¿â€ğŸ’¼ ğŸ‘³ ğŸ’•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸€æ—¦æˆ‘éœ€è¦ä»Androidæ‰«æWi-Fiç½‘ç»œåº”ç”¨ç¨‹åºå¹¶è·å¾—æœ‰å…³æ¥å…¥ç‚¹æ•°æ®çš„è¯¦ç»†è®¡ç®—ã€‚ 

 åœ¨è¿™é‡Œï¼Œæˆ‘ä¸å¾—ä¸é¢å¯¹å‡ ä¸ªå›°éš¾ï¼šåœ¨Androidçš„éæ–‡æ¡£ç‰ˆæœ¬ä¸­ï¼Œè®¸å¤šæè¿°çš„ç±»å·²è¢«å¼ƒç”¨ï¼ˆAPIçº§åˆ«> 26ï¼‰ï¼Œä½†æ²¡æœ‰åæ˜ åœ¨å…¶ä¸­ï¼› æ–‡æ¡£ä¸­å¯¹æŸäº›å†…å®¹çš„æè¿°å¾ˆå°‘ï¼ˆä¾‹å¦‚ï¼Œå°½ç®¡å…¶ä¸­åŒ…å«è®¸å¤šé‡è¦æ•°æ®ï¼Œä½†ä»¥ä»»ä½•æ–¹å¼éƒ½æ²¡æœ‰æè¿°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wi-Fiå’Œè®¸å¤šå…¶ä»–ç¼©å†™ã€‚ å¦‚ä½•åœ¨Androidåº”ç”¨ç¨‹åºä¸­çš„Wi-FièŠ‚ç‚¹ä¸Šè·å–æ•°æ®è€Œä¸ä¼šè†¨èƒ€</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467765/">ä¸€æ—¦æˆ‘éœ€è¦ä»Androidæ‰«æWi-Fiç½‘ç»œåº”ç”¨ç¨‹åºå¹¶è·å¾—æœ‰å…³æ¥å…¥ç‚¹æ•°æ®çš„è¯¦ç»†è®¡ç®—ã€‚ <br><a name="habracut"></a><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä¸å¾—ä¸é¢å¯¹å‡ ä¸ªå›°éš¾ï¼šåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">éæ–‡æ¡£ç‰ˆæœ¬ä¸­ï¼Œ</a>è®¸å¤šæè¿°çš„ç±»å·²è¢«å¼ƒç”¨ï¼ˆAPIçº§åˆ«&gt; 26ï¼‰ï¼Œä½†æ²¡æœ‰åæ˜ åœ¨å…¶ä¸­ï¼› æ–‡æ¡£ä¸­å¯¹æŸäº›å†…å®¹çš„æè¿°å¾ˆå°‘ï¼ˆä¾‹å¦‚ï¼Œå°½ç®¡å…¶ä¸­åŒ…å«è®¸å¤šé‡è¦æ•°æ®ï¼Œä½†ä»¥ä»»ä½•æ–¹å¼éƒ½æ²¡æœ‰æè¿°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ScanResult</a>ç±»çš„åŠŸèƒ½å­—æ®µï¼‰ã€‚ ç¬¬ä¸‰ä¸ªå›°éš¾å¯èƒ½æ˜¯å› ä¸ºä¸Wi-Fiçš„åˆæ¬¡æ¥è§¦ä¸åŒäºé˜…è¯»ç†è®ºå¹¶ä¸ºæœ¬åœ°ä¸»æœºè®¾ç½®è·¯ç”±å™¨ï¼Œå› æ­¤æ‚¨å¿…é¡»å¤„ç†è®¸å¤šä¼¼ä¹å¯ä»¥å•ç‹¬ç†è§£çš„ç¼©å†™ã€‚ ä½†æ˜¯å¦‚ä½•å…³è”å’Œæ„å»ºå®ƒä»¬å¯èƒ½å¹¶ä¸æ˜æ˜¾ï¼ˆåˆ¤æ–­æ˜¯ä¸»è§‚çš„ï¼Œå–å†³äºå…ˆå‰çš„ç»éªŒï¼‰ã€‚ <br><br> æœ¬æ–‡è®¨è®ºäº†å¦‚ä½•åœ¨æ²¡æœ‰NDKå’Œé»‘å®¢çš„æƒ…å†µä¸‹ä»Androidä»£ç è·å–Wi-Fiç¯å¢ƒä¸­çš„å…¨é¢æ•°æ®ï¼Œè€Œä»…ä½¿ç”¨Android APIå¹¶äº†è§£å¦‚ä½•è§£é‡Šå®ƒä»¬ã€‚ <br><br> æˆ‘ä»¬ä¸ä¼šæ‹‰å¹¶å¼€å§‹ç¼–å†™ä»£ç ã€‚ <br><br><h3>  1.åˆ›å»ºä¸€ä¸ªé¡¹ç›® </h3><br> è¯¥æ³¨é‡Šæ˜¯ä¸ºé‚£äº›å¤šæ¬¡åˆ›å»ºAndroidé¡¹ç›®çš„äººè®¾è®¡çš„ï¼Œå› æ­¤æˆ‘ä»¬çœç•¥äº†æ­¤é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ã€‚ ä»¥ä¸‹ä»£ç å°†ä»¥Kotlinè¯­è¨€minSdkVersion = 23å‘ˆç°ã€‚ <br><br><h3>  2.è®¿é—®æƒé™ </h3><br> è¦é€šè¿‡åº”ç”¨ç¨‹åºä½¿ç”¨Wi-Fiï¼Œæ‚¨å°†éœ€è¦ä»ç”¨æˆ·é‚£é‡Œè·å¾—å¤šä¸ªæƒé™ã€‚ æ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a> ï¼Œä¸ºäº†åœ¨OSç‰ˆæœ¬8.0ä»¥åçš„è®¾å¤‡ä¸Šæ‰«æç½‘ç»œï¼Œé™¤äº†å¯ä»¥æŸ¥çœ‹ç½‘ç»œç¯å¢ƒçš„çŠ¶æ€ä¹‹å¤–ï¼Œæ‚¨è¿˜éœ€è¦è®¿é—®ä»¥æ›´æ”¹è®¾å¤‡çš„Wi-Fiæ¨¡å—çš„çŠ¶æ€æˆ–è®¿é—®åæ ‡ï¼ˆè¿‘ä¼¼æˆ–ç²¾ç¡®ï¼‰ã€‚ ä»9.0ç‰ˆå¼€å§‹ï¼Œæ‚¨å¿…é¡»åŒæ—¶è¦æ±‚ç”¨æˆ·æä¾›è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå¹¶åŒæ—¶æ˜ç¡®è¦æ±‚ç”¨æˆ·å¯ç”¨ä½ç½®æœåŠ¡ã€‚ ä¸è¦å¿˜äº†å‘ç”¨æˆ·å¤§èƒ†åœ°è§£é‡Šè¿™æ˜¯Googleçš„ä¸€æ—¶å…´èµ·ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç›‘è§†ä»–çš„æ¬²æœ›:) <br><br> æ€»è®¡ï¼Œåœ¨AndroidManifest.xmlä¸­æ·»åŠ ï¼š <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_WIFI_STATE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.CHANGE_WIFI_STATE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br> åœ¨é“¾æ¥åˆ°å½“å‰æ´»åŠ¨çš„ä»£ç ä¸­ï¼š <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.location.LocationManager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> androidx.core.app.ActivityCompat .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) { ActivityCompat.requestPermissions( activity, arrayOf(Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.CHANGE_WIFI_STATE), <span class="hljs-number"><span class="hljs-number">1</span></span> ) makeEnableLocationServices(activity.applicationContext) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ActivityCompat.requestPermissions( activity, arrayOf(Manifest.permission.CHANGE_WIFI_STATE), <span class="hljs-number"><span class="hljs-number">1</span></span> ) } <span class="hljs-comment"><span class="hljs-comment">/*        */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeEnableLocationServices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">       ,      val lm: LocationManager = context.applicationContext.getSystemService(Context.LOCATION_SERVICE) as LocationManager val gpsEnabled: Boolean = lm.isProviderEnabled(LocationManager.GPS_PROVIDER); val networkEnabled: Boolean = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER); if (!gpsEnabled &amp;&amp; !networkEnabled) { context.startActivity(Intent(ACTION_LOCATION_SOURCE_SETTINGS)); } }</span></span></code> </pre><br><h3>  3.åˆ›å»ºBroadcastReceiverå¹¶è®¢é˜…æœ‰å…³æ‰«æWi-Fiç½‘ç»œç¯å¢ƒçš„æ›´æ–°äº‹ä»¶ </h3><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> wifiManager = context.getSystemService(Context.WIFI_SERVICE) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> WifiManager <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> wifiScanReceiver = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : BroadcastReceiver() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">, intent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Intent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> success = intent.getBooleanExtra(WifiManager.EXTRA_RESULTS_UPDATED, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (success) { scanSuccess() } } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> intentFilter = IntentFilter() <span class="hljs-comment"><span class="hljs-comment">/*         */</span></span> intentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION) context.registerReceiver(wifiScanReceiver, intentFilter) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> success = wifiManager.startScan() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!success) { <span class="hljs-comment"><span class="hljs-comment">/* -     ,    */</span></span> } .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scanSuccess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">/*  ,   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> results: List&lt;ScanResult&gt; = wifiManager.scanResults }</code> </pre><br> æ–‡æ¡£ä¸­çš„WiFiManager.startScanæ–¹æ³•è¢«æ ‡è®°ä¸ºä»APIç‰ˆæœ¬28èµ·å·²ä½¿ç”¨ï¼Œä½†å·²å…³é—­ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æŒ‡å—</a>å»ºè®®ä½¿ç”¨å®ƒã€‚ <br><br> æ€»å…±ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ScanResult</a>å¯¹è±¡çš„åˆ—è¡¨ã€‚ <br><br><h3>  4.æˆ‘ä»¬æŸ¥çœ‹ScanResultå¹¶äº†è§£å…¶æœ¯è¯­ </h3><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯¥ç±»çš„ä¸€äº›å­—æ®µå¹¶æè¿°å®ƒä»¬çš„å«ä¹‰ï¼š <br><br>  <b>SSID-</b>æœåŠ¡é›†æ ‡è¯†ç¬¦æ˜¯ç½‘ç»œçš„åç§°ã€‚ <br><br>  <b>BSSID-</b>åŸºæœ¬æœåŠ¡é›†æ ‡è¯†ç¬¦-ç½‘ç»œé€‚é…å™¨çš„MACåœ°å€ï¼ˆWi-Fiç‚¹ï¼‰ <br><br>  <b>çº§åˆ«</b> -æ¥æ”¶ä¿¡å·å¼ºåº¦æŒ‡ç¤ºå™¨[dBmï¼ˆä¿„ç½—æ–¯dBmï¼‰-åˆ†è´ï¼Œå‚è€ƒåŠŸç‡1 mWã€‚]-æ¥æ”¶ä¿¡å·çš„æ°´å¹³æŒ‡ç¤ºå™¨ã€‚ å®ƒçš„å–å€¼èŒƒå›´æ˜¯0åˆ°-100ï¼Œè·ç¦»0è¶Šè¿œï¼Œä»Wi-Fiç‚¹åˆ°è®¾å¤‡çš„ä¿¡å·æŸè€—å°±è¶Šå¤§ã€‚ å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wikipedia</a>ä¸Šæ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨ï¼Œä½¿ç”¨Androidç±»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WifiManagerï¼Œ</a>æ‚¨å¯ä»¥é€šè¿‡é€‰æ‹©çš„æ­¥éª¤å°†ä¿¡å·ç”µå¹³ä»æå¥½åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æå·®</a>çš„ç­‰çº§è¿›è¡Œæ ¡å‡†ï¼š <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> wifiManager = context.applicationContext.getSystemService(Context.WIFI_SERVICE) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> WifiManager <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numberOfLevels = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> level = WifiManager.calculateSignalLevel(level, numberOfLevels)</code> </pre><br>  <b>é¢‘ç‡</b> -Wi-Fiç‚¹çš„é¢‘ç‡[Hz]ã€‚ é™¤äº†é¢‘ç‡æœ¬èº«ä¹‹å¤–ï¼Œæ‚¨å¯èƒ½è¿˜å¯¹æ‰€è°“çš„é¢‘é“æ„Ÿå…´è¶£ã€‚ æ¯ä¸ªç‚¹éƒ½æœ‰å…¶è‡ªå·±çš„å·¥ä½œæ¸…æ´åº¦ã€‚ åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæœ€å—æ¬¢è¿çš„Wi-Fiç‚¹èŒƒå›´æ˜¯2.4 GHzã€‚ ä½†æ˜¯ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œè¯¥ç‚¹ä»¥æ¥è¿‘å‘½åé¢‘ç‡çš„ç¼–å·é¢‘ç‡å°†ä¿¡æ¯ä¼ è¾“åˆ°æ‚¨çš„æ‰‹æœºã€‚ é€šé“æ•°å’Œç›¸åº”é¢‘ç‡çš„å€¼å·²<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ‡å‡†åŒ–</a> ã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä½¿é™„è¿‘çš„ç‚¹ä»¥ä¸åŒçš„é¢‘ç‡å·¥ä½œï¼Œä»è€Œä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œä¹Ÿä¸ä¼šç›¸äº’é™ä½ä¼ è¾“çš„é€Ÿåº¦å’Œè´¨é‡ã€‚ åŒæ—¶ï¼Œè¿™äº›ç‚¹ä¸åœ¨ç›¸åŒçš„é¢‘ç‡ä¸Šå·¥ä½œï¼Œè€Œæ˜¯åœ¨é¢‘ç‡èŒƒå›´ï¼ˆchannelWidth <b>å‚æ•°</b> ï¼‰ï¼ˆç§°ä¸ºä¿¡é“å®½åº¦ï¼‰ä¸Šå·¥ä½œã€‚ å°±æ˜¯è¯´ï¼Œåœ¨ç›¸é‚»ä¿¡é“ä¸Šè¿è¡Œçš„ç‚¹ï¼ˆä¸ä»…åœ¨ç›¸é‚»ä¿¡é“ä¸Šï¼Œè€Œä¸”ç”šè‡³åœ¨å…¶è‡ªèº«ä¸Šçš„3ä¸ªç‚¹ä¸Šï¼‰éƒ½ç›¸äº’å¹²æ‰°ã€‚ è¿™ä¸ªç®€å•çš„ä»£ç å¯¹æ‚¨å¾ˆæœ‰ç”¨ï¼Œå®ƒä½¿æ‚¨å¯ä»¥é€šè¿‡é¢‘ç‡å€¼ä¸º2.4å’Œ5 Ghzçš„ç‚¹çš„é¢‘ç‡å€¼æ¥è®¡ç®—é€šé“å·ï¼š <br><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> channel: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frequency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">2412</span></span>..<span class="hljs-number"><span class="hljs-number">2484</span></span>) { (frequency - <span class="hljs-number"><span class="hljs-number">2412</span></span>) / <span class="hljs-number"><span class="hljs-number">5</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frequency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">5170</span></span>..<span class="hljs-number"><span class="hljs-number">5825</span></span>) { (frequency - <span class="hljs-number"><span class="hljs-number">5170</span></span>) / <span class="hljs-number"><span class="hljs-number">5</span></span> + <span class="hljs-number"><span class="hljs-number">34</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { -<span class="hljs-number"><span class="hljs-number">1</span></span> } }</code> </pre><br>  <b>åŠŸèƒ½</b>æ˜¯æœ€æœ‰è¶£çš„åˆ†æé¢†åŸŸï¼Œéœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´ã€‚ è¿™é‡Œï¼Œç‚¹çš„â€œåŠŸèƒ½â€è¢«å†™å…¥åˆ°è¡Œä¸­ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æ— æ³•æ‰¾åˆ°æ–‡æ¡£ä¸­å­—ç¬¦ä¸²è§£é‡Šçš„è¯¦ç»†ä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯æ­¤è¡Œå¯èƒ½åŒ…å«çš„ä¸€äº›ç¤ºä¾‹ï¼š <br><br><pre> <code class="bash hljs">[WPA-PSK-TKIP+CCMP][WPA2-PSK-TKIP+CCMP][WPS][ESS] [WPA2-PSK-CCMP][ESS] [WPA2-PSK-CCMP+TKIP][ESS] [WPA-PSK-CCMP+TKIP][WPA2-PSK-CCMP+TKIP][ESS] [ESS][WPS]</code> </pre><br><h3>  5.äº†è§£ç¼©å†™å’ŒparsimåŠŸèƒ½ </h3><br> å€¼å¾—ä¸€æçš„æ˜¯android.net.wifiåŒ…çš„ç±»*åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åå°</a>ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">wpa_supplicant</a> linuxå®ç”¨ç¨‹åºï¼Œå¹¶ä¸”åŠŸèƒ½å­—æ®µä¸­çš„è¾“å‡ºæ˜¯æ‰«æè¿‡ç¨‹ä¸­flagså­—æ®µçš„å‰¯æœ¬ã€‚ <br><br> æˆ‘ä»¬å°†æŒ‰é¡ºåºé‡‡å–è¡ŒåŠ¨ã€‚ é¦–å…ˆï¼Œè€ƒè™‘ä»¥ä¸‹æ ¼å¼çš„è¾“å‡ºï¼Œå…¶ä¸­æ‹¬å·å†…çš„å…ƒç´ ç”¨â€œ-â€åˆ†éš”ï¼š <br><br><pre> <code class="bash hljs">[WPA-PSK-TKIP+CCMP] [WPA2-PSK-CCMP]</code> </pre><br> ç¬¬ä¸€ä¸ªå€¼æè¿°äº†æ‰€è°“çš„  <b>è®¤è¯æ–¹å¼</b> ä¹Ÿå°±æ˜¯è¯´ï¼Œè®¾å¤‡å’Œæ¥å…¥ç‚¹å¿…é¡»æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œåºåˆ—ï¼Œä»¥ä¾¿æ¥å…¥ç‚¹å…è®¸å…¶è‡ªèº«è¢«ä½¿ç”¨ä»¥åŠå¦‚ä½•åŠ å¯†æœ‰æ•ˆè´Ÿè½½ã€‚ åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæœ€å¸¸è§çš„é€‰æ‹©æ˜¯WPAå’ŒWPA2ï¼Œå…¶ä¸­æ¯ä¸ªç›´æ¥è¿æ¥çš„è®¾å¤‡æˆ–é€šè¿‡æ‰€è°“çš„è¿æ¥çš„è®¾å¤‡ã€‚  RADIUSæœåŠ¡å™¨ï¼ˆWPA-Enterpriceï¼‰é€šè¿‡åŠ å¯†é€šé“æä¾›å¯†ç ã€‚ æ¥å…¥ç‚¹å¾ˆå¯èƒ½åœ¨æ‚¨çš„å®¶ä¸­æ ¹æ®æ­¤æ–¹æ¡ˆæä¾›è¿æ¥ã€‚ ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œå®ƒå…·æœ‰æ›´å¼ºå¤§çš„å¯†ç ï¼šé’ˆå¯¹ä¸å®‰å…¨TKIPçš„AESã€‚ æ›´å¤æ‚ï¼Œæ›´é«˜çº§çš„WPA3ä¹Ÿæ­£åœ¨é€æ­¥å¼•å…¥ã€‚ ä»ç†è®ºä¸Šè®²ï¼ŒCCKMï¼ˆæ€ç§‘é›†ä¸­å¼å¯†é’¥ç®¡ç†ï¼‰enterpriceè§£å†³æ–¹æ¡ˆå¯èƒ½æœ‰ä¸€ä¸ªé€‰æ‹©ï¼Œä½†æˆ‘ä»æœªè§è¿‡ã€‚ <br><br> å¯ä»¥å°†æ¥å…¥ç‚¹é…ç½®ä¸ºé€šè¿‡MACåœ°å€è¿›è¡Œèº«ä»½éªŒè¯ã€‚ æˆ–è€…ï¼Œå¦‚æœè®¿é—®ç‚¹ä½¿ç”¨è¿‡æ—¶çš„WEPç®—æ³•æä¾›æ•°æ®ï¼Œåˆ™å®é™…ä¸Šæ²¡æœ‰èº«ä»½éªŒè¯ï¼ˆæ­¤å¤„çš„ç§˜å¯†å¯†é’¥æ˜¯åŠ å¯†å¯†é’¥ï¼‰ã€‚ è¿™äº›é€‰é¡¹è¢«åˆ†ç±»ä¸ºå…¶ä»–ã€‚ <br> åœ¨å…¬å…±wi-fiä¸­ï¼Œè¿˜æœ‰ä¸€ç§æœ€å–œæ¬¢çš„æ–¹æ³•æ˜¯å¸¦æœ‰éšè—çš„å¼ºåˆ¶é—¨æˆ·æ£€æµ‹-é€šè¿‡æµè§ˆå™¨è¿›è¡Œèº«ä»½éªŒè¯çš„è¯·æ±‚ã€‚ è¿™æ ·çš„è®¿é—®ç‚¹çœ‹èµ·æ¥å¯¹æ‰«æä»ªæ˜¯å¼€æ”¾çš„ï¼ˆä»ç‰©ç†è¿æ¥çš„è§’åº¦æ¥çœ‹ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†å®ƒä»¬åˆ†ç±»ä¸ºOPENã€‚ <br><br> ç¬¬äºŒä¸ªå€¼å¯ä»¥æŒ‡å®šä¸º<b>å¯†é’¥ç®¡ç†ç®—æ³•</b> ã€‚ å®ƒæ˜¯ä¸Šè¿°è®¤è¯æ–¹æ³•çš„å‚æ•°ã€‚ è®¨è®ºåŠ å¯†å¯†é’¥çš„äº¤æ¢æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ è®©æˆ‘ä»¬è€ƒè™‘å¯èƒ½çš„é€‰é¡¹ã€‚  EAP-åœ¨ä¸Šè¿°WPA-Enterpriceä¸­ä½¿ç”¨ï¼Œå®ƒä½¿ç”¨æ•°æ®åº“æ¥éªŒè¯è¾“å…¥çš„èº«ä»½éªŒè¯æ•°æ®ã€‚  SAE-ç”¨äºé«˜çº§WPA3ä¸­ï¼Œæ›´è€ç ´åã€‚  PSKæ˜¯æœ€å¸¸è§çš„é€‰é¡¹ï¼Œå®ƒæ¶‰åŠè¾“å…¥å¯†ç å¹¶ä»¥åŠ å¯†å½¢å¼è¿›è¡Œä¼ è¾“ã€‚  IEEE8021X-æ ¹æ®å›½é™…æ ‡å‡†ï¼ˆä¸å—WPAç³»åˆ—æ”¯æŒï¼‰ã€‚  OWEï¼ˆæœºä¼šæ— çº¿åŠ å¯†ï¼‰æ˜¯IEEE 802.11æ ‡å‡†çš„æ‰©å±•ï¼Œé’ˆå¯¹æˆ‘ä»¬å½’ç±»ä¸ºOPENçš„å‡ ç‚¹ã€‚  OWEé€šè¿‡åŠ å¯†æ¥ç¡®ä¿é€šè¿‡ä¸å®‰å…¨ç½‘ç»œä¼ è¾“çš„æ•°æ®çš„å®‰å…¨æ€§ã€‚ å½“æ²¡æœ‰è®¿é—®é”®æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ç§å˜ä½“ï¼›æˆ‘ä»¬å°†æ­¤é€‰é¡¹ç§°ä¸ºNONEã€‚ <br><br> ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æ‰€è°“çš„  <b>åŠ å¯†æ–¹æ³•ï¼ˆåŠ å¯†æ–¹æ¡ˆï¼‰</b> -ç”¨äºä¿æŠ¤ä¼ è¾“æ•°æ®çš„å¯†ç çš„ç²¾ç¡®ç¨‹åº¦ã€‚ æˆ‘ä»¬åˆ—å‡ºäº†è¿™äº›é€‰é¡¹ã€‚  WEP-ä½¿ç”¨RC4æµå¯†ç ï¼Œç§˜å¯†å¯†é’¥æ˜¯åŠ å¯†å¯†é’¥ï¼Œåœ¨ç°ä»£å¯†ç å­¦é¢†åŸŸè¢«è®¤ä¸ºæ˜¯ä¸å¯æ¥å—çš„ã€‚  TKIP-ç”¨äºWPAï¼ŒCKIP-ç”¨äºWPA2ã€‚  TKIP + CKIP-å¯ä»¥åœ¨æ”¯æŒWPAå’ŒWPA2çš„ç‚¹ä¸ŠæŒ‡å®šï¼Œä»¥å®ç°å‘åå…¼å®¹ã€‚ <br><br> é™¤äº†ä¸‰ä¸ªå…ƒç´ ï¼Œæ‚¨è¿˜å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå•ç‹¬çš„WEPæ ‡è®°ï¼š <br><br><pre> <code class="bash hljs">[WEP]</code> </pre><br> æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æ‰€è®¨è®ºçš„ï¼Œè¿™è¶³ä»¥æŒ‡å®šä¸ä½¿ç”¨å¯†é’¥çš„ç®—æ³•ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸ä½¿ç”¨å¯†é’¥ï¼‰å’ŒåŠ å¯†æ–¹æ³•ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸ºä¸€ç§ï¼‰ã€‚ <br><br> ç°åœ¨è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªæ”¯æ¶ï¼š <br><br><pre> <code class="bash hljs">[ESS]</code> </pre><br> è¿™æ˜¯<b>Wi-Fiæ“ä½œæ¨¡å¼</b>æˆ–<b>Wi-Fiç½‘ç»œ</b>çš„<b>æ‹“æ‰‘</b> ã€‚ æ‚¨å¯èƒ½ä¼šé‡åˆ°BSSï¼ˆåŸºæœ¬æœåŠ¡é›†ï¼‰æ¨¡å¼-å½“å­˜åœ¨ä¸€ä¸ªè¿æ¥çš„è®¾å¤‡é€šè¿‡å…¶è¿›è¡Œé€šä¿¡çš„è®¿é—®ç‚¹æ—¶ã€‚ å¯ä»¥åœ¨æœ¬åœ°ç½‘ç»œä¸Šæ‰¾åˆ°ã€‚ é€šå¸¸ï¼Œéœ€è¦æ¥å…¥ç‚¹æ‰èƒ½è¿æ¥æ¥è‡ªä¸åŒæœ¬åœ°ç½‘ç»œçš„è®¾å¤‡ï¼Œå› æ­¤å®ƒä»¬æ˜¯æ‰©å±•æœåŠ¡é›†-ESSçš„ä¸€éƒ¨åˆ†ã€‚  IBSSï¼ˆç‹¬ç«‹åŸºæœ¬æœåŠ¡é›†ï¼‰çš„ç±»å‹æŒ‡ç¤ºè¯¥è®¾å¤‡æ˜¯å¯¹ç­‰ç½‘ç»œçš„ä¸€éƒ¨åˆ†ã€‚ <br><br>  WPSæ ‡å¿—ä¹Ÿå¯èƒ½ä¼šä¸‹é™ï¼š <br><br><pre> <code class="bash hljs">[WPS]</code> </pre><br>  WPSï¼ˆWi-Fiä¿æŠ¤è®¾ç½®ï¼‰-Wi-Fiç½‘ç»œçš„åŠè‡ªåŠ¨åˆå§‹åŒ–åè®®ã€‚ è¦åˆå§‹åŒ–ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥8ä¸ªå­—ç¬¦çš„å¯†ç æˆ–åœ¨è·¯ç”±å™¨ä¸ŠæŒ‰ä¸€ä¸ªæŒ‰é’®ã€‚ å¦‚æœæ‚¨çš„è®¿é—®ç‚¹æ˜¯ç¬¬ä¸€ç§ç±»å‹ï¼Œå¹¶ä¸”æ­¤æ ‡è®°åœ¨è®¿é—®ç‚¹åç§°çš„æ—è¾¹çªå‡ºæ˜¾ç¤ºï¼Œåˆ™å¼ºçƒˆå»ºè®®æ‚¨è½¬åˆ°ç®¡ç†é¢æ¿å¹¶ç¦ç”¨é€šè¿‡WPSçš„è®¿é—®ã€‚ äº‹å®æ˜¯ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡MACåœ°å€è¯†åˆ«8ä½PINï¼Œæˆ–è€…åœ¨å¯é¢„è§çš„æ—¶é—´å†…æ•´ç†å‡º8ä½PINï¼Œè¿™æ ·ä¸€äº›ä¸å¹²å‡€çš„äººå°±å¯ä»¥åˆ©ç”¨ã€‚ <br><br><h3>  6.åˆ›å»ºä¸€ä¸ªè§£ææ¨¡å‹å’Œå‡½æ•° </h3><br> åŸºäºä¸Šé¢çš„å‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°æ®ç±»æè¿°å‘ç”Ÿäº†ä»€ä¹ˆï¼š <br><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthMethod</span></span></span><span class="hljs-class"> </span></span>{ WPA3, WPA2, WPA, <span class="hljs-comment"><span class="hljs-comment">// Wi-Fi Protected Access OTHER, //    Shared Key Authentication  .  mac-address-based  WEP CCKM, // Cisco OPEN // Open Authentication.     Captive Portal Detection -     } /*    */ enum class KeyManagementAlgorithm { IEEE8021X, //   EAP, // Extensible Authentication Protocol,    PSK, // Pre-Shared Key â€”         WEP, //  WEP     (No auth key) SAE, // Simultaneous Authentication of Equals -    WPA3 OWE, // Opportunistic Wireless Encryption -    ,    OPEN NONE //      OPEN, OTHER } /*   */ enum class CipherMethod { WEP, // Wired Equivalent Privacy,       TKIP, // Temporal Key Integrity Protocol CCMP, // Counter Mode with Cipher Block Chaining Message Authentication Code Protocol, //              //   AES NONE //      OPEN, OTHER } /*     ,      */ data class Capability( var authScheme: AuthMethod? = null, var keyManagementAlgorithm: KeyManagementAlgorithm? = null, var cipherMethod: CipherMethod? = null ) /*   WiFi (   WiFi) */ enum class TopologyMode { IBSS, //   (Ad-Hoc  IBSS â€“ Independent Basic Service Set). BSS, //    Basic Service Set (BSS)  Infrastructure Mode. ESS //    ESS â€“ Extended Service Set. }</span></span></code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªå°†è§£æåŠŸèƒ½å­—æ®µçš„å‡½æ•°ï¼š <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseCapabilities</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capabilitiesString: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List &lt; Capability &gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> capabilities: List &lt; Capability &gt; = capabilitiesString .splitByBrackets() .filter { !it.isTopology() &amp;&amp; !it.isWps() } .flatMap { parseCapability(it) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!capabilities.isEmpty()) { capabilities } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { listOf(Capability(AuthMethod.OPEN, KeyManagementAlgorithm.NONE, CipherMethod.NONE)) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseCapability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(part: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List &lt; Capability &gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (part.contains(<span class="hljs-string"><span class="hljs-string">"WEP"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> listOf(Capability( AuthMethod.OTHER, KeyManagementAlgorithm.WEP, CipherMethod.WEP )) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> authScheme = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { part.contains(<span class="hljs-string"><span class="hljs-string">"WPA3"</span></span>) - &gt; AuthMethod.WPA3 part.contains(<span class="hljs-string"><span class="hljs-string">"WPA2"</span></span>) - &gt; AuthMethod.WPA2 part.contains(<span class="hljs-string"><span class="hljs-string">"WPA"</span></span>) - &gt; AuthMethod.WPA <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> - &gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> keyManagementAlgorithm = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { part.contains(<span class="hljs-string"><span class="hljs-string">"OWE"</span></span>) - &gt; KeyManagementAlgorithm.OWE part.contains(<span class="hljs-string"><span class="hljs-string">"SAE"</span></span>) - &gt; KeyManagementAlgorithm.SAE part.contains(<span class="hljs-string"><span class="hljs-string">"IEEE802.1X"</span></span>) - &gt; KeyManagementAlgorithm.IEEE8021X part.contains(<span class="hljs-string"><span class="hljs-string">"EAP"</span></span>) - &gt; KeyManagementAlgorithm.EAP part.contains(<span class="hljs-string"><span class="hljs-string">"PSK"</span></span>) - &gt; KeyManagementAlgorithm.PSK <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> - &gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> capabilities = ArrayList &lt; Capability &gt; () <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (part.contains(<span class="hljs-string"><span class="hljs-string">"TKIP"</span></span>) || part.contains(<span class="hljs-string"><span class="hljs-string">"CCMP"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (part.contains(<span class="hljs-string"><span class="hljs-string">"TKIP"</span></span>)) { capabilities.add(Capability( authScheme ? : AuthMethod.OPEN, keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE, CipherMethod.TKIP )) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (part.contains(<span class="hljs-string"><span class="hljs-string">"CCMP"</span></span>)) { capabilities.add(Capability( authScheme ? : AuthMethod.OPEN, keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE, CipherMethod.CCMP )) } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (authScheme != <span class="hljs-literal"><span class="hljs-literal">null</span></span> || keyManagementAlgorithm != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { capabilities.add(Capability( authScheme ? : AuthMethod.OPEN, keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE, CipherMethod.NONE )) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> capabilities } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseTopologyMode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capabilitiesString: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: TopologyMode ? { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> capabilitiesString .splitByBrackets() .mapNotNull { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { it.contains(<span class="hljs-string"><span class="hljs-string">"ESS"</span></span>) - &gt; TopologyMode.ESS it.contains(<span class="hljs-string"><span class="hljs-string">"BSS"</span></span>) - &gt; TopologyMode.BSS it.contains(<span class="hljs-string"><span class="hljs-string">"IBSS"</span></span>) - &gt; TopologyMode.IBSS <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> - &gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } } .firstOrNull() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseWPSAvailable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capabilitiesString: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> capabilitiesString .splitByBrackets() .any { it.isWps() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> String.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">splitByBrackets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List &lt; String &gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> m = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"\\[(.*?)\\]"</span></span>).matcher(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> parts = ArrayList &lt; String &gt; () <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (m.find()) { parts.add(m.group().replace(<span class="hljs-string"><span class="hljs-string">"["</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>).replace(<span class="hljs-string"><span class="hljs-string">"]"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> parts } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> String.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isTopology</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TopologyMode.values().any { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == it.name } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> String.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isWps</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == <span class="hljs-string"><span class="hljs-string">"WPS"</span></span> }</code> </pre><br><h3>  8.æˆ‘ä»¬çœ‹ç»“æœ </h3><br> æˆ‘å°†æ‰«æç½‘ç»œå¹¶æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆã€‚ æ˜¾ç¤ºé€šè¿‡Log.dè¿›è¡Œç®€å•è¾“å‡ºçš„ç»“æœï¼š <br><br><pre> <code class="plaintext hljs">Capability of Home-Home [WPA2-PSK-CCMP][ESS][WPS] ... capabilities=[Capability(authScheme=WPA2, keyManagementAlgorithm=PSK, cipherMethod=CCMP)], topologyMode=ESS, availableWps=true</code> </pre><br> ä»åº”ç”¨ç¨‹åºä»£ç è¿æ¥åˆ°ç½‘ç»œçš„é—®é¢˜ä»ç„¶æ²¡æœ‰è§£å†³ã€‚ æˆ‘åªèƒ½è¯´ï¼Œä¸ºäº†è¯»å–ä¿å­˜çš„ç§»åŠ¨è®¾å¤‡çš„OSå¯†ç ï¼Œæ‚¨éœ€è¦rootæƒé™å¹¶æ„¿æ„é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç¿»é˜…ä»¥è¯»å–wpa_supplicant.confã€‚ å¦‚æœåº”ç”¨ç¨‹åºé€»è¾‘æ¶‰åŠä»å¤–éƒ¨è¾“å…¥å¯†ç ï¼Œåˆ™å¯ä»¥é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">android.net.wifi.WifiManager</a>ç±»è¿›è¡Œè¿æ¥ã€‚ <br><br> æ„Ÿè°¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Egor Ponomarev</a>çš„å®è´µè¡¥å……ã€‚ <br><br> å¦‚æœæ‚¨è®¤ä¸ºéœ€è¦æ·»åŠ æˆ–ä¿®å¤æŸäº›å†…å®¹ï¼Œè¯·åœ¨è¯„è®ºä¸­å†™:) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN467765/">https://habr.com/ru/post/zh-CN467765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN467753/index.html">æ— çº¿æ•°æ®ä¼ è¾“çš„ä¸–ç•Œçºªå½•ï¼šæ¯11å…¬é‡Œ40 Gb / s</a></li>
<li><a href="../zh-CN467755/index.html">ionsç—…æ¯’ï¼Œé’™ï¼Œå¾®ç”Ÿç‰©ç¾¤ï¼Œé£Ÿç‰©æ¿€ç´ å’Œé˜¿å°”èŒ¨æµ·é»˜æ°ç—‡</a></li>
<li><a href="../zh-CN467759/index.html">ç±»ä¼¼äºUnixçš„OSè®¾è®¡-è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆ6ï¼‰</a></li>
<li><a href="../zh-CN467761/index.html">èƒ½æºï¼Œçƒ­å’Œæ°´çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ”¶éŸ³æœº</a></li>
<li><a href="../zh-CN467763/index.html">å…³äºRTOSçš„å…¨éƒ¨çœŸç›¸ã€‚ ç¬¬ä¸‰åä¸‰æ¡ ä½¿ç”¨Nucleus SEå®æ—¶æ“ä½œç³»ç»Ÿ</a></li>
<li><a href="../zh-CN467767/index.html">JSON-RPCå…³æ³¨è€…çš„æ›´å¤šä¾¿åˆ©è®¾æ–½</a></li>
<li><a href="../zh-CN467769/index.html">åœ¨åŒ…å«äººå£ä¿¡æ¯çš„å•ä¸€è”é‚¦ä¿¡æ¯èµ„æºä¸Š</a></li>
<li><a href="../zh-CN467771/index.html">å°±åƒç»¿è‰²çš„åˆçº§è‡ªåŠ¨é‡æ–°åŠ è½½å™¨ä¸€æ ·ï¼Œä»–å†™äº†<s> hot </ s>ã€‚ ç¬¬2éƒ¨åˆ†ã€‚CSS</a></li>
<li><a href="../zh-CN467773/index.html">é‡‡è´­å¼‚å¸¸èµ„æºå¹¶è¿›è¡Œé¦–æ¬¡è”ç³»</a></li>
<li><a href="../zh-CN467779/index.html">å…³äºGodotï¼ŒGLSLå’ŒWebGLï¼Œè¿·ä½ æ¸¸æˆä¸­ä½¿ç”¨çš„ç€è‰²å™¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>