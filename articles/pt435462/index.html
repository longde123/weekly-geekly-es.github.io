<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∞ ü¶Ñ üìì Testando projetos Node.js. Parte 1. Anatomia e tipos de teste üïõ ü§öüèæ üö§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O autor do material, a primeira parte da tradu√ß√£o que publicamos hoje, diz que, como consultor independente do Node.js, analisa mais de 10 projetos po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testando projetos Node.js. Parte 1. Anatomia e tipos de teste</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/435462/">  O autor do material, a primeira parte da tradu√ß√£o que publicamos hoje, diz que, como consultor independente do Node.js, analisa mais de 10 projetos por ano.  Seus clientes, o que √© bastante justificado, pedem que ele preste aten√ß√£o especial aos testes.  Alguns meses atr√°s, ele come√ßou a fazer anota√ß√µes sobre t√©cnicas valiosas de teste e os erros que encontrou.  O resultado foi um material contendo tr√™s dezenas de recomenda√ß√µes para testes. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/f16/1a0/3e2/f161a03e2b08ae35b31f718a083a39a0.jpg" alt="imagem"></a> <br><br>  Em particular, ele se concentrar√° na sele√ß√£o de tipos de teste adequados para uma situa√ß√£o espec√≠fica, no design adequado, na avalia√ß√£o de sua efic√°cia e onde exatamente nas cadeias de CI / CD voc√™ precisar√° coloc√°-los.  Alguns dos exemplos aqui s√£o ilustrados usando Jest, outros usando Mocha.  Este material √© focado principalmente n√£o em ferramentas, mas em metodologia de teste. <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Testando projetos Node.js.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2. Avalia√ß√£o do desempenho do teste, integra√ß√£o cont√≠nua e an√°lise da qualidade do c√≥digo</a> <br><a name="habracut"></a><br><h3>  <font color="#3AC1EF">‚ñç0.</font>  <font color="#3AC1EF">Regra de ouro: os testes devem ser muito simples e diretos</font> </h3><br>  Voc√™ conhece algu√©m - um amigo, um membro da fam√≠lia, o her√≥i do filme, que est√° sempre carregado de bom humor e sempre pronto para oferecer uma m√£ozinha sem exigir nada em troca?  √â assim que bons testes devem ser projetados.  Eles devem ser simples, devem ser ben√©ficos e evocam emo√ß√µes positivas.  Isso pode ser alcan√ßado pela sele√ß√£o cuidadosa de m√©todos, ferramentas e objetivos de teste.  Aqueles cujo uso justifica o tempo e o esfor√ßo despendidos na prepara√ß√£o e realiza√ß√£o de testes e, ao mesmo tempo, produz bons resultados.  Voc√™ s√≥ precisa testar o que precisa ser testado, deve se esfor√ßar para garantir que os testes sejam simples e flex√≠veis e, √†s vezes, pode recusar alguns testes, sacrificando significativamente a confiabilidade do projeto por sua simplicidade e velocidade de desenvolvimento. <br><br>  Os testes n√£o devem ser considerados como c√≥digo de aplicativo normal.  O fato √© que uma equipe t√≠pica envolvida no desenvolvimento de um projeto, em qualquer caso, faz todo o poss√≠vel para mant√™-lo em condi√ß√µes de trabalho, ou seja, se esfor√ßa para, digamos, um produto comercial para funcionar como seus usu√°rios esperam.  Como resultado, essa equipe pode n√£o estar muito feliz por ter que apoiar mais um "projeto" complexo, representado por um conjunto de testes.  Se os testes do c√≥digo principal crescerem, chamando cada vez mais aten√ß√£o para si mesmos e se tornando motivo de preocupa√ß√£o constante, ent√£o o trabalho neles ser√° abandonado ou, tentando manter um n√≠vel decente, fornecer√° tanto tempo e energia que isso retardar√° o trabalho no projeto principal. <br><br>  Portanto, o c√≥digo de teste deve ser o mais simples poss√≠vel, com um n√∫mero m√≠nimo de depend√™ncias e n√≠veis de abstra√ß√£o.  Os testes devem ter uma apar√™ncia para que possam ser entendidos rapidamente.  A maioria das recomenda√ß√µes que consideraremos aqui decorre desse princ√≠pio. <br><br><h2>  <font color="#3AC1EF">Se√ß√£o 1. Anatomia dos testes</font> </h2><br><h3>  <font color="#3AC1EF">‚ñç1</font>  <font color="#3AC1EF">Crie seus testes para que o relat√≥rio informe o que est√° sendo testado, em que cen√°rio e o que √© esperado dos testes</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  O relat√≥rio de teste deve indicar se a vers√£o atual do aplicativo atende a seus requisitos.  Isso deve ser feito de uma forma que seja compreens√≠vel para aqueles que n√£o precisam estar familiarizados com o c√≥digo do aplicativo.  Pode ser um testador, um especialista em DevOps que est√° implantando o projeto ou o pr√≥prio desenvolvedor, que analisou o projeto algum tempo depois de escrever seu c√≥digo.  Isso pode ser alcan√ßado se, ao escrever testes, se concentrar nos requisitos do produto.  Com essa abordagem, a estrutura do teste pode ser imaginada consistindo em tr√™s partes: <br><br><ol><li> O que exatamente est√° sendo testado?  Por exemplo, o m√©todo <code>ProductsService.addNewProduct</code> . </li><li>  Em que cen√°rio e em que circunst√¢ncias o teste √© realizado?  Por exemplo, a rea√ß√£o do sistema √© verificada em uma situa√ß√£o em que o pre√ßo das mercadorias n√£o foi repassado ao m√©todo. </li><li>  Quais s√£o os resultados esperados do teste?  Por exemplo, em uma situa√ß√£o semelhante, o sistema se recusa a confirmar a adi√ß√£o de um novo produto a ele. </li></ol><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Suponha que o sistema n√£o possa ser implantado e, a partir do relat√≥rio de teste, voc√™ pode descobrir apenas que ele n√£o passou no teste chamado <code>Add product</code> , que verifica a adi√ß√£o de um determinado produto a ele.  Isso fornecer√° informa√ß√µes sobre o que exatamente deu errado? <br><br><h4>  Abordagem correta </h4><br>  As informa√ß√µes de teste consistem em tr√™s informa√ß√µes. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//1.   describe('Products Service', function() { //2.  describe('Add new product', function() {   // 3. ,       it('When no price is specified, then the product status is pending approval', ()=&gt; {     const newProduct = new ProductService().add(...);     expect(newProduct.status).to.equal('pendingApproval');   }); }); });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>  O relat√≥rio de teste √© semelhante a um documento que cont√©m uma declara√ß√£o de requisitos do produto. <br><br>  Veja como fica em diferentes n√≠veis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f3/172/8fb/1f31728fba16acd94c79d10fbcbb6c02.jpg"></div><br>  <i><font color="#999999">Documento de Requisitos do Produto, Nomea√ß√£o de Teste, Resultados do Teste</font></i> <br><br><ol><li>  Um documento com requisitos do produto pode ser, de fato, um documento especial ou pode existir na forma de algo como um email. </li><li>  Ao nomear testes, descrevendo o objetivo dos testes, seu cen√°rio e os resultados esperados, voc√™ precisa aderir ao idioma usado para formular os requisitos do produto.  Isso o ajudar√° a comparar o c√≥digo de teste e os requisitos do produto. </li><li>  Os resultados dos testes devem ser claros, mesmo para aqueles que n√£o est√£o familiarizados com o c√≥digo do aplicativo ou que o esqueceram completamente.  Esses s√£o testadores, especialistas em DevOps, desenvolvedores voltando a trabalhar com o c√≥digo alguns meses depois de escrev√™-lo. </li></ol><br><h3>  <font color="#3AC1EF">¬ß 2</font>  <font color="#3AC1EF">Descreva o que voc√™ espera dos testes no idioma do produto: use instru√ß√µes no estilo BDD</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  O desenvolvimento de testes em estilo declarativo permite que aqueles que trabalham com eles compreendam instantaneamente sua ess√™ncia.  Se os testes s√£o escritos usando uma abordagem imperativa, eles s√£o preenchidos com constru√ß√µes condicionais que complicam bastante sua compreens√£o.  Seguindo esse princ√≠pio, as expectativas devem ser descritas em uma linguagem pr√≥xima do comum.  O estilo declarativo do BDD usa constru√ß√µes <code>expect</code> or <code>should</code> , em vez de algum c√≥digo especial de seu pr√≥prio design.  Se n√£o h√° instru√ß√µes necess√°rias no Chai ou no Jest, e acontece que tais declara√ß√µes geralmente s√£o necess√°rias, considere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">adicionar novas "verifica√ß√µes" ao Jest</a> ou escrever seus pr√≥prios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plugins para o Chai</a> . <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Se voc√™ n√£o seguir as recomenda√ß√µes descritas acima, isso acabar√° com o fato de que os membros da equipe de desenvolvimento escrever√£o menos testes e ignorar√£o as verifica√ß√µes irritantes usando o m√©todo <code>.skip()</code> . <br><br><h4>  Abordagem incorreta </h4><br>  O leitor deste teste ter√° que revisar completamente o c√≥digo imperativo bastante longo apenas para entender o que exatamente est√° sendo testado no teste. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When asking for an admin, ensure only ordered admins in results"</span></span> , ()={   <span class="hljs-comment"><span class="hljs-comment">//,       ‚Äî "admin1"  "admin2",   "user1"   const allAdmins = getUsers({adminOnly:true});   const admin1Found, adming2Found = false;   allAdmins.forEach(aSingleUser =&gt; {       if(aSingleUser === "user1"){           assert.notEqual(aSingleUser, "user1", "A user was found and not admin");       }       if(aSingleUser==="admin1"){           admin1Found = true;       }       if(aSingleUser==="admin2"){           admin2Found = true;       }   });   if(!admin1Found || !admin2Found ){       throw new Error("Not all admins were returned");   } });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>  Voc√™ pode literalmente entender esse teste rapidamente. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When asking for an admin, ensure only ordered admins in results"</span></span> , ()={   <span class="hljs-comment"><span class="hljs-comment">//,        const allAdmins = getUsers({adminOnly:true});     expect(allAdmins).to.include.ordered.members(["admin1" , "admin2"]) .but.not.include.ordered.members(["user1"]); });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç3</font>  <font color="#3AC1EF">Realize testes de c√≥digo de teste usando plug-ins especiais</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  H√° um conjunto de plug-ins para ESLint projetado especificamente para analisar o c√≥digo de teste e para encontrar problemas nesse c√≥digo.  Por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-in eslint-plugin-mocha</a> emitir√° avisos se o teste for escrito no n√≠vel global (e n√£o for um descendente de <code>describe()</code> ), ou se os testes forem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ignorados</a> , o que pode dar falsas esperan√ßas de que todos os testes sejam aprovados.  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plugin eslint-plugin-jest</a> funciona de maneira semelhante, por exemplo, alertando sobre testes que n√£o possuem instru√ß√µes, ou seja, sobre aqueles que n√£o verificam nada. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  O desenvolvedor ficar√° feliz em ver que o c√≥digo √© coberto em 90% nos testes e 100% dos testes passam com √™xito.  No entanto, ele permanecer√° nesse estado apenas at√© que muitos testes, de fato, n√£o verifiquem nada e alguns scripts de teste sejam simplesmente ignorados.  S√≥ podemos esperar que ningu√©m implante projetos que sejam "testados" dessa maneira na produ√ß√£o. <br><br><h4>  Abordagem incorreta </h4><br>  O cen√°rio de teste est√° cheio de erros que, felizmente, podem ser detectados usando o linter. <br><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">"Too short description"</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userToken = userService.getDefaultToken() <span class="hljs-comment"><span class="hljs-comment">// *error:no-setup-in-describe, use hooks (sparingly) instead it("Some description", () =&gt; {});//* error: valid-test-description. Must include the word "Should" + at least 5 words }); it.skip("Test name", () =&gt; {// *error:no-skipped-tests, error:error:no-global-tests. Put tests only under describe or suite expect("somevalue"); // error:no-assert }); it("Test name", () =&gt; {*//error:no-identical-title. Assign unique titles to tests });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç4</font>  <font color="#3AC1EF">Atenha-se ao m√©todo da caixa preta - teste apenas m√©todos p√∫blicos</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  Testar alguns mecanismos de c√≥digo interno significa um aumento significativo na carga dos desenvolvedores e quase n√£o traz benef√≠cios.  Se uma determinada API produz os resultados corretos, vale a pena gastar v√°rias horas testando seus mecanismos internos e, em seguida, ainda dando suporte a esses testes, que facilmente quebram, atualizados?  Ao testar m√©todos publicamente dispon√≠veis, sua implementa√ß√£o interna, embora implicitamente, tamb√©m √© verificada.  Esse teste causar√° um erro se surgir um problema no sistema, o que resulta na emiss√£o de dados incorretos.  Essa abordagem tamb√©m √© chamada de "teste comportamental".  Por outro lado, testando os mecanismos internos de uma determinada API (ou seja, usando a t√©cnica de "caixa branca"), o desenvolvedor se concentra nos pequenos detalhes da implementa√ß√£o e n√£o no resultado final do c√≥digo.  Testes que verificam tais sutilezas podem come√ßar a gerar erros, por exemplo, ap√≥s uma pequena refatora√ß√£o de c√≥digo, mesmo que o sistema continue produzindo resultados corretos.  Como resultado, essa abordagem aumenta significativamente a carga no programador associado ao suporte ao c√≥digo de teste. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Os testes que tentam capturar os mecanismos internos de um determinado sistema se comportam como um pastor de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√°bula</a> que chamava camponeses com gritos de ‚ÄúSocorro!  Lobo! ‚ÄùQuando n√£o havia lobo por perto.  As pessoas correram para o aux√≠lio apenas para descobrir que haviam sido enganadas.  E quando o lobo realmente apareceu, ningu√©m veio em socorro.  Esses testes produzem resultados falsos positivos, por exemplo, nos casos em que os nomes de algumas vari√°veis ‚Äã‚Äãinternas mudam.  Como resultado, n√£o √© de surpreender que quem realiza esses testes logo comece a ignorar seus "gritos", o que, em √∫ltima an√°lise, leva ao fato de que uma vez que um erro realmente s√©rio pode passar despercebido. <br><br><h4>  Abordagem incorreta </h4><br>  Este teste testa os mecanismos internos de uma classe sem motivo espec√≠fico para essas verifica√ß√µes. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      //     ,      calculateVAT(priceWithoutVAT){   return {finalPrice: priceWithoutVAT * 1.2};   //           } //  getPrice(productId){   const desiredProduct= DB.getProduct(productId);   finalPrice = this.calculateVATAdd(desiredProduct.price).finalPrice; } } it("White-box test: When the internal methods get 0 vat, it return 0 response", async () =&gt; {   //       VAT,      .  ,   ,        expect(new ProductService().calculateVATAdd(0).finalPrice).to.equal(0); });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç5.</font>  <font color="#3AC1EF">Escolha os objetos de backup apropriados: evite mobs, preferindo stubs e spies</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  O uso do teste dobra quando o teste √© um mal necess√°rio, pois eles est√£o associados aos mecanismos internos do aplicativo.  Sem alguns deles, √© simplesmente imposs√≠vel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√°</a> um material √∫til sobre este t√≥pico.  No entanto, v√°rias abordagens para o uso de tais objetos n√£o podem ser chamadas de equivalentes.  Portanto, alguns deles - stubs (stub) e spies (espi√µes), visam testar os requisitos do produto, mas, como um efeito colateral inevit√°vel, s√£o for√ßados a afetar levemente os mecanismos internos desse produto.  As zombarias, por outro lado, t√™m como objetivo testar os mecanismos internos do projeto.  Portanto, seu uso leva a uma carga desnecess√°ria enorme nos programadores, sobre os quais falamos acima, oferecendo ader√™ncia √† metodologia da "caixa preta" ao escrever testes. <br><br>  Antes de usar objetos duplicados, fa√ßa uma pergunta simples: ‚ÄúEu os uso para testar a funcionalidade descrita ou ela pode ser descrita nos requisitos t√©cnicos do projeto?‚Äù.  Se a resposta a esta pergunta for negativa, isso pode significar que voc√™ testar√° o produto usando a abordagem de "caixa branca", sobre a qual j√° falamos sobre as defici√™ncias. <br><br>  Por exemplo, se voc√™ deseja descobrir se seu aplicativo funciona corretamente em uma situa√ß√£o em que um servi√ßo de pagamento n√£o est√° dispon√≠vel, voc√™ pode interromper esse servi√ßo e fazer com que o aplicativo receba algo indicando que n√£o h√° resposta.  Isso permitir√° que voc√™ verifique a rea√ß√£o do sistema a uma situa√ß√£o semelhante, para descobrir se ele se comporta corretamente.  No decorrer desse teste, √© feita uma verifica√ß√£o do comportamento, resposta ou resultado da aplica√ß√£o em determinadas condi√ß√µes.  Nessa situa√ß√£o, voc√™ pode usar o espi√£o para verificar se, ao detectar uma queda no servi√ßo de pagamento, um determinado email foi enviado.  Isso, novamente, ser√° uma verifica√ß√£o do comportamento do sistema em uma determinada situa√ß√£o, que, com certeza, est√° registrada nos requisitos t√©cnicos, por exemplo, da seguinte forma: "Envie um email ao administrador se o pagamento n√£o for aprovado".  Por outro lado, se voc√™ usar um objeto simulado para representar um servi√ßo de pagamento e verificar o trabalho ao acess√°-lo com a transfer√™ncia do que ele espera dele, falaremos sobre o teste de mecanismos internos que n√£o est√£o diretamente relacionados √† funcionalidade do aplicativo e, bastante talvez possa mudar com frequ√™ncia. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Com qualquer refatora√ß√£o de c√≥digo, voc√™ ter√° que procurar todos os moki, refatora√ß√£o e seu c√≥digo.  Como resultado, o suporte a testes se tornar√° um fardo pesado, tornando-os inimigos do desenvolvedor, n√£o de seus amigos. <br><br><h4>  Abordagem incorreta </h4><br>  Este exemplo mostra um objeto simulado focado em testar os mecanismos internos do aplicativo. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When a valid product is about to be deleted, ensure data access DAL was called once, with the right product and right config"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; {   <span class="hljs-comment"><span class="hljs-comment">//,        const dataAccessMock = sinon.mock(DAL);   // ,           dataAccessMock.expects("deleteProduct").once().withArgs(DBConfig, theProductWeJustAdded, true, false);   new ProductService().deletePrice(theProductWeJustAdded);   mock.verify(); });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>  Os espi√µes t√™m como objetivo testar os sistemas quanto √† conformidade com seus requisitos, mas, como efeito colateral, inevitavelmente afetam os mecanismos internos dos sistemas. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When a valid product is about to be deleted, ensure an email is sent"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; {   <span class="hljs-comment"><span class="hljs-comment">//,        const spy = sinon.spy(Emailer.prototype, "sendEmail");   new ProductService().deletePrice(theProductWeJustAdded);   //  .       ? ,               (  ) });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">¬ß 6</font>  <font color="#3AC1EF">Durante o teste, use dados realistas, n√£o limitados a algo como "foo"</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  Muitas vezes, os erros de produ√ß√£o se manifestam em uma combina√ß√£o de circunst√¢ncias muito espec√≠fica e at√© surpreendente.  E isso significa que, quanto mais pr√≥ximos da realidade dos dados de entrada usados ‚Äã‚Äãdurante o teste, maior a probabilidade de detec√ß√£o precoce de erros.  Use para gerar dados semelhantes a bibliotecas especializadas reais, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Faker</a> .  Por exemplo, essas bibliotecas geram n√∫meros de telefone aleat√≥rios, mas realistas, nomes de usu√°rios, n√∫meros de cart√µes banc√°rios, nomes de empresas e at√© textos de "lorem ipsum".  Al√©m disso, considere usar dados de ambientes de produ√ß√£o em testes.  Se voc√™ deseja levar esses testes para um n√≠vel ainda mais alto, consulte nossa pr√≥xima recomenda√ß√£o sobre testes baseados em propriedades. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Ao testar um projeto durante o seu desenvolvimento, todos os testes podem ser aprovados somente se forem realizados usando dados irreais, como as linhas "foo".  Mas, na produ√ß√£o, o sistema falhar√° em uma situa√ß√£o em que o hacker fornece algo como <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code> <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code>  <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code> . <br><br><h4>  Abordagem incorreta </h4><br>  O sistema passa com √™xito nesses testes apenas porque eles usam dados irrealistas. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addProduct = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, price</span></span></span><span class="hljs-function">) =&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> productNameRegexNoSpace = <span class="hljs-regexp"><span class="hljs-regexp">/^\S*$/</span></span>;<span class="hljs-comment"><span class="hljs-comment">//  if(!productNameRegexNoSpace.test(name))   return false;// , -   ,  .     //  -    return true; }; it("Wrong: When adding new product with valid properties, get successful confirmation", async () =&gt; {   // "Foo",    ,    ,    false   const addProductResult = addProduct("Foo", 5);   expect(addProductResult).to.be.true;   // :     - ,     //         });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>  Ele usa dados aleat√≥rios semelhantes aos dados reais. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"Better: When adding new valid product, get successful confirmation"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addProductResult = addProduct(faker.commerce.productName(), faker.random.number());   <span class="hljs-comment"><span class="hljs-comment">//   : {'Sleek Cotton Computer',  85481}   expect(addProductResult).to.be.true;   //  ,         ,    .   //     ,    ! });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç 7.</font>  <font color="#3AC1EF">Sistemas de teste usando v√°rias combina√ß√µes de entradas usando testes baseados em propriedades</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  Normalmente, os testes usam pequenos conjuntos de dados de entrada.  Mesmo que se assemelhem a dados reais (falamos sobre isso na se√ß√£o anterior), esses testes abrangem apenas um n√∫mero muito limitado de combina√ß√µes poss√≠veis de entradas da entidade investigada.  Por exemplo, pode ser assim: <code>(method('', true, 1), method("string" , false" , 0))</code> . O problema √© que, na API de produ√ß√£o, chamada com cinco par√¢metros, √© poss√≠vel obter a entrada de milhares de variantes diferentes de suas combina√ß√µes, uma das quais pode levar a uma falha (seria apropriado recordar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">difus√£o aqui</a> ). E se voc√™ pudesse escrever um √∫nico teste que verifique automaticamente um determinado m√©todo para 1000 combina√ß√µes de suas entradas e descubra qual O m√©todo responde incorretamente? O teste com base na verifica√ß√£o de propriedades √© exatamente o que  -nos em tal situa√ß√£o √© √∫til. Ou seja, no curso deste m√≥dulo de teste verifica, chamando-o com todas as combina√ß√µes poss√≠veis de dados de entrada, o que aumenta a probabilidade de encontrar alguns bugs. Suponha que temos um m√©todo <code>addNewProduct(id, name, isDiscount)</code> e Biblioteca realizando testes, chama-o com muitas combina√ß√µes de par√¢metros de tipo num√©rico, string e l√≥gico, por exemplo - <code>(1, "iPhone", false)</code> , <code>(2, "Galaxy", true)</code> .  √â poss√≠vel realizar testes com base na verifica√ß√£o de propriedades usando o ambiente de execu√ß√£o de testes usual (Mocha, Jest etc.) e usando bibliotecas especializadas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">js-verifica</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">testcheck</a> (esta biblioteca possui uma documenta√ß√£o muito boa). <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  Inconscientemente, o desenvolvedor seleciona esses dados de teste que cobrem apenas as partes do c√≥digo que funcionam corretamente.  Infelizmente, isso reduz a efic√°cia dos testes como forma de detectar erros. <br><br><h4>  Abordagem correta </h4><br>  Testando muitas op√ß√µes de entrada usando a biblioteca mocha-testcheck. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mocha-testcheck'</span></span>).install(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {expect} = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'chai'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> faker = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'faker'</span></span>); describe(<span class="hljs-string"><span class="hljs-string">'Product service'</span></span>, () =&gt; { describe(<span class="hljs-string"><span class="hljs-string">'Adding new'</span></span>, () =&gt; {   <span class="hljs-comment"><span class="hljs-comment">//  100         check.it('Add new product with random yet valid properties, always successful',     gen.int, gen.string, (id, name) =&gt; {       expect(addNewProduct(id, name).status).to.equal('approved');     }); }) });</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç8.</font>  <font color="#3AC1EF">Esforce-se para que o c√≥digo de teste seja auto-suficiente, minimizando aux√≠lios externos e abstra√ß√µes</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  Provavelmente agora √© √≥bvio que estou comprometido com testes extremamente simples.  O fato √© que, caso contr√°rio, a equipe de desenvolvimento de um determinado projeto, de fato, precisa lidar com outro projeto.  Para entender seu c√≥digo, eles precisam gastar um tempo valioso, o que n√£o tem muito.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Est√°</a> muito bem escrito sobre esse fen√¥meno: ‚ÄúUm c√≥digo de produ√ß√£o de alta qualidade √© um c√≥digo bem pensado e um c√≥digo de teste de alta qualidade √© um c√≥digo completamente compreens√≠vel ... Ao escrever um teste, pense em quem ver√° a mensagem de erro exibida por ele.  Essa pessoa n√£o gostaria, para entender as causas do erro, ler o c√≥digo de todo o conjunto de testes ou o c√≥digo da √°rvore de heran√ßa dos utilit√°rios usados ‚Äã‚Äãpara o teste. " <br><br>  Para que o leitor entenda o teste sem deixar seu c√≥digo, minimize o uso de utilit√°rios, ganchos ou quaisquer mecanismos externos ao executar o teste.  Se, para fazer isso, voc√™ precisa recorrer e colar c√≥digos com muita frequ√™ncia, pode parar em um mecanismo auxiliar externo, cuja utiliza√ß√£o n√£o violar√° a compreensibilidade do teste.  Por√©m, se o n√∫mero desses mecanismos aumentar, o c√≥digo de teste perder√° a compreens√£o. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  ,      4  , 2      ,         ?  !         ,           ,        . <br><br><h4>   </h4><br>       .           ? <br><br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">"When getting orders report, get the existing orders"</span></span>, () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> queryObject = QueryHelpers.getQueryObject(config.DBInstanceURL);   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reportConfiguration = ReportHelpers.getReportConfig();<span class="hljs-comment"><span class="hljs-comment">//   ?        userHelpers.prepareQueryPermissions(reportConfiguration);//  ?         const result = queryObject.query(reportConfiguration);   assertThatReportIsValid();//  ,           -    expect(result).to.be.an('array').that.does.include({id:1, productd:2, orderStatus:"approved"});   //      ?        })</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>   ,        . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When getting orders report, get the existing orders"</span></span>, () =&gt; {   <span class="hljs-comment"><span class="hljs-comment">// ,           const orderWeJustAdded = ordersTestHelpers.addRandomNewOrder();   const queryObject = newQueryObject(config.DBInstanceURL, queryOptions.deep, useCache:false);   const result = queryObject.query(config.adminUserToken, reports.orders, pageSize:200);   expect(result).to.be.an('array').that.does.include(orderWeJustAdded); })</span></span></code> </pre> <br><h3> <font color="#3AC1EF">‚ñç9.        :      </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>     ,      ,    , ,           .               .       ,        (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> )    .   ‚Äî  ,     (  ,      ).      ‚Äî    ,     ,   , ,   .    ,    ,                    .       ‚Äî     , ,   ,       ,      (   , , ,        ). <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br> ,    .   .          .       .     ,     ,            ,       . <br><br><h4>   </h4><br>       .      ,    . <br><br><pre> <code class="javascript hljs">before(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       .   ? - ,  -   json-. await DB.AddSeedDataFromJson('seed.json'); }); it("When updating site name, get successful confirmation", async () =&gt; { // ,  ,  "Portal", ,           const siteToUpdate = await SiteService.getSiteByName("Portal"); const updateNameResult = await SiteService.changeName(siteToUpdate, "newName"); expect(updateNameResult).to.be(true); }); it("When querying by site name, get the right site", async () =&gt; { // ,  ,  "Portal", ,           const siteToCheck = await SiteService.getSiteByName("Portal"); expect(siteToCheck.name).to.be.equal("Portal"); //!      :[ });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>      ,   ,         . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When updating site name, get successful confirmation"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//           const siteUnderTest = await SiteService.addSite({   name: "siteForUpdateTest" }); const updateNameResult = await SiteService.changeName(siteUnderTest, "newName"); expect(updateNameResult).to.be(true); });</span></span></code> </pre> <br><h3> <font color="#3AC1EF">‚ñç10.     ,   .      expect</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>         ,  ,      <code>try-catch-finally</code>         <code>catch</code> .   ,  ,         ,         . <br><br>            Chai,    <code>expect(method).to.throw</code> .     Jest: <code>expect(method).toThrow()</code> .         ,    .   ,     ,          . <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>     ,   , ,             . <br><br><h4>   </h4><br>    ,            <code>try-catch</code> . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When no product name, it throws error 400"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> errorWeExceptFor = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> addNewProduct({<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'nest'</span></span>});} <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { expect(error.code).to.equal(<span class="hljs-string"><span class="hljs-string">'InvalidInput'</span></span>); errorWeExceptFor = error; } expect(errorWeExceptFor).not.to.be.null; <span class="hljs-comment"><span class="hljs-comment">//    ,         //  ,     null,       });</span></span></code> </pre> <br><h4>  Abordagem correta </h4><br>     <code>expect</code>   ,      ,      . <br><br><pre> <code class="javascript hljs">it.only(<span class="hljs-string"><span class="hljs-string">"When no product name, it throws error 400"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>() =&gt; { expect(addNewProduct)).to.eventually.throw(AppError).with.property(<span class="hljs-string"><span class="hljs-string">'code'</span></span>, <span class="hljs-string"><span class="hljs-string">"InvalidInput"</span></span>); });</code> </pre> <br><h3> <font color="#3AC1EF">‚ñç11.   ,    </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>       . ,        (smoke test),      -,    ,      .           -  .  ,        ,       ,      <code>#cold</code> , <code>#api</code> , <code>#sanity</code> .                    . ,  Mocha      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> <code>-g</code> ( <code>--grep</code> ). <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>   ,   ,       ,   ,         ,  ,       .        . <br><br><h4>  Abordagem correta </h4><br>  <code>#cold-test</code>         ,       .        ,         -,  ,      ‚Äî      . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    ( ,    ),     // ,        //   describe('Order service', function() { describe('Add new order #cold-test #sanity', function() {   it('Scenario - no currency was supplied. Expectation - Use the default currency #sanity', function() {     //-    }); }); });</span></span></code> </pre> <br><h3> <font color="#3AC1EF">‚ñç12.        </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>       ,   Node.js-.    ,  ,    Node.js  . <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TDD</a> ‚Äî      ,     ,          .     ,       .       ,    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Red-Green-Refactor</a> .   ,      - ,       , ,   ,     ,         .  ,            .        ( ‚Äî   ,  ,   ). <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>    ‚Äî    ,       .      . <br><br><h2> <font color="#3AC1EF"> 2.  </font> </h2><br><h3> <font color="#3AC1EF">‚ñç13.      ,        </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>  ,    ,      10 ,     .     ,   .    ,         .   ,         (,    ),  ,    ,   ,     ?        - ? <br><br> ,    . ,  2019 ,  , TDD,   ‚Äî          ,     . ,        ,    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>    . ,   IoT-, ,   ,    -  Kafka  RabbitMQ,      .      - , ,  ,       .     ,   ,      ,     ,       ?     (,   ,     Alexa)    ,   ,        . <br><br>       ,      (    ).    , ,           , ,   ,   ,     . ,  ,  -    API   ‚Äî     Consumer-Driven Contracts    .   ,     , ,  ,    .  ,  ,       ,  ,    ,  .    ,  ,     . <br><br>    ,    TDD       .  ,  TDD     ,      .         ,  ,       ,  . <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>          ‚Äî       ( ),       . <br><br><h4>  Abordagem correta </h4><br>       .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  , ,   Node.js,      . <br><br><h3> <font color="#3AC1EF">‚ñç14. ,       </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>        .      ‚Äî  .    ,       ,        .  ,     ,    - ,   ,   -    ?    ,   .      ,          :       TDD,   ‚Äî       . <br><br>      ¬´¬ª.    API,   -      ,    (,        , ,   ,   ,    ). ,  ,    ,      (,      ).  ,    ,   ,    ,   ,  ,   . <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>    , ,      , ,        20. <br><br><h4>  Abordagem correta </h4><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">supertest</a> ,    API,    Express,         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/286/bd8/02d/286bd802d29e7f6eb475567c97c9429d.png"></div><br> <i><font color="#999999"> API,   Express</font></i> <br><br><h3> <font color="#3AC1EF">‚ñç15.       ,        API,   Consumer-Driven Contracts</font> </h3><br><h4>  Recomenda√ß√µes </h4><br> ,      ,  ,   ,        .  ,   ,  - ,    ,    ,  -    .  ¬´-22¬ª  :       .   ,     ,       .        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Consumer-Driven Contracts   PACT</a> . <br><br>       .       .  PACT        ,     (  ¬´¬ª).           ,   ,    PACT,    ,   ,      .        ,    ,   ,    ,       . <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>             . <br><br><h4>  Abordagem correta </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c39/0ef/dcd/c390efdcd01b24f5089bf7160fd5c5c6.png"></div><br> <i><font color="#999999"> Consumer-Driven Contracts</font></i> <br><br>     ,  ,   B  ,     .  B         . <br><br><h3> <font color="#3AC1EF">‚ñç16.     </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>       (middleware) - ,        ,  - ,      Express-.        .   ,    ,         .    ,     ,   JS-  <code>{req,res}</code> .      ,      ¬´¬ª (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sinon</a> )  ,      <code>{req,res}</code> .  ,    ,    ,   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.npmjs.com/package/node-mocks-">node-mock-http</a>   , ,      ,         . ,     ,    HTTP-,   -. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>      Express       . <br><br><h4>  Abordagem correta </h4><br>                 Express-. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ,     const unitUnderTest = require('./middleware') const httpMocks = require('node-mocks-http'); //  Jest,     Mocha    describe()  it() test('A request without authentication header, should return http status 403', () =&gt; { const request = httpMocks.createRequest({   method: 'GET',   url: '/user/42',   headers: {     authentication: ''   } }); const response = httpMocks.createResponse(); unitUnderTest(request, response); expect(response.statusCode).toBe(403); });</span></span></code> </pre> <br><h3> <font color="#3AC1EF">‚ñç17.         </font> </h3><br><h4>  Recomenda√ß√µes </h4><br>         ,        , ,      , ,  ,  .     ,        ,      - .    ,     ,   ,           ( , ,   ),    ,        ( ‚Äî   )      .       ,    : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SonarQube</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2600</a>   GitHub)  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Code Climate</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1500</a> ). <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>  ,     ,   .      .          ,         . <br><br><h4>  Abordagem correta </h4><br>         Code Climate. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cae/1fe/d5c/cae1fed5caf16576b4001dfe0235820c.png"></div><br> <i><font color="#999999">  Code Climate</font></i> <br><br><h3> <font color="#3AC1EF">‚ñç18.     ,      Node.js</font> </h3><br><h4>  Recomenda√ß√µes </h4><br>        ,  ,     .    ,  ,    ,  -  ,   . ,    -      ,  ,  ,  ,  ?  ,  ,    ?   ,    API    ? <br><br>           Netflix   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> -</a> .    ,        ,    ,  ,              . ,      - ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Monkey</a> .     ,        ,       ,       .      Kubernetes ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kube-monkey</a> .         ,                Node.js? ,         ,   ,     V8   1.7  .            .          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">node-chaos</a> ,     -. <br><br><h4>  Consequ√™ncias do desvio das recomenda√ß√µes </h4><br>      , ,     ,         . <br><br><h4>  Abordagem correta </h4><br>   npm- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chaos-monkey</a> ,            Node.js. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d24/162/bdb/d24162bdb8c2c430f9163a7eda8c6c32.png"></div><br> <i><font color="#999999"> chaos-monkey</font></i> <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>         ,   Node.js-.  ,         .             . <br><br>  <b>Caros leitores!</b>     -    ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435462/">https://habr.com/ru/post/pt435462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435450/index.html">Feliz Ano Novo, Feliz Novo MQTT / UDP</a></li>
<li><a href="../pt435452/index.html">Teste de ponta a ponta de microsservi√ßos com o Catcher</a></li>
<li><a href="../pt435454/index.html">AOP vs Recursos</a></li>
<li><a href="../pt435456/index.html">√â prejudicial deixar um smartphone ao seu lado √† noite?</a></li>
<li><a href="../pt435460/index.html">Excurs√£o fotogr√°fica Coworkidea Coworking (Barcelona)</a></li>
<li><a href="../pt435464/index.html">Testando projetos Node.js. Parte 2. Avalia√ß√£o do desempenho do teste, integra√ß√£o cont√≠nua e an√°lise da qualidade do c√≥digo</a></li>
<li><a href="../pt435466/index.html">Tutorial Reagir Parte 6: Alguns recursos do curso, JSX e JavaScript</a></li>
<li><a href="../pt435468/index.html">Tutorial Reagir Parte 7: Estilos embutidos</a></li>
<li><a href="../pt435470/index.html">Tutorial React, Parte 8: Continuando o trabalho em um aplicativo TODO, apresentando propriedades de componentes</a></li>
<li><a href="../pt435476/index.html">Mkcert: certificados HTTPS v√°lidos para localhost</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>