<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🎤 🙅🏻 👨🏾‍🔧 Mon expérience de développement sur Playcanvas 💝 🤲🏾 👨🏽‍🤝‍👨🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Y a-t-il des gens parmi les lecteurs qui ont au moins entendu de leurs oreilles qu'il existe un certain moteur 3D pour développer des applications Web...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mon expérience de développement sur Playcanvas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465849/"><p>  Y a-t-il des gens parmi les lecteurs qui ont au moins entendu de leurs oreilles qu'il existe un certain moteur 3D pour développer des applications WebGL avec un éditeur similaire à Unity uniquement dans le navigateur?  Le sujet est extrêmement impopulaire, mais je suis devenu l'une de ces personnes il y a presque 2 ans.  Et maintenant, je voulais partager mon expérience, plutôt même mes déceptions.  L'article discutera des problèmes que vous rencontrerez si vous commencez à utiliser cet éditeur.  Je ferai tout de suite une réservation que je ne comparerai pas avec d'autres moteurs 3D existants comme Three.js ou Babylon.js, je ne toucherai qu'à l'éditeur et à l'API de script. </p><a name="habracut"></a><br><h4 id="vsyo-onlayn">  Tout en ligne </h4><br><p>  Lorsque vous entendez que plusieurs personnes peuvent travailler sur scène et que tous les changements en temps réel sont visibles pour le reste des participants au projet, la première pensée qui vient à l'esprit: "wow, cool!". </p><br><p>  En fait, il s'avère que différentes personnes travaillent sur différentes tâches et que tout le monde a besoin de sa propre caméra pour le débogage.  Votre perspective à partir de laquelle vous souhaitez tester la scène.  Et c'est super gênant.  Sur le forum, quelqu'un a suggéré de créer un mode hors ligne, mais les développeurs pensent que c'est la pierre angulaire de l'éditeur et que toutes les modifications sont instantanément enregistrées sur le serveur, afin que vous puissiez revenir au projet à tout moment depuis n'importe quel appareil.  Oui, c'est pratique.  Lorsque vous travaillez seul sur un projet.  Eh bien, sans Internet, aussi, ne peut pas fonctionner. </p><br><p>  En général, l'éditeur est <em>totalement inadapté</em> au travail d'équipe. </p><br><p>  Je ne vois toujours pas de solution à ce problème. </p><br><h4 id="istoriya-izmeneniy">  Changer l'historique </h4><br><p>  Jusqu'à récemment, je souffrais beaucoup du fait que vous ne pouvez pas connecter le projet à n'importe quel git.  Une fois que cela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pouvait être fait</a> (uniquement pour les scripts), mais maintenant cette fonction est considérée comme héritée, car  les gars ont réécrit l'API de script à un moment donné. </p><br><p>  Cependant!  Encore une fois, en appuyant sur Ctrl-S dans l'éditeur, j'ai vu cette image: </p><br><p><img src="https://habrastorage.org/webt/_u/x4/ws/_ux4wscp02kfvr7gffjbpluc6kq.png"><br>  <em>Wow, est-ce la bonne façon de faire?</em> </p><br><p>  D'accord, un problème semble être résolu.  Cela fonctionne toujours ainsi, mais au moins vous pouvez revenir en arrière, ce qui est important.  Et même créer des brunchs.  Je vais devoir m'y habituer, en général. </p><br><h4 id="sheydery">  Shaders </h4><br><p>  Il n'y a pas d'éditeur de shader dans Playcanvas.  Pas de texte, pas de nœud - non.  Mais il y a la seule mention des shaders dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tutoriel</a> est un script régulier où les fichiers de shaders sont transférés via les attributs.  Eh bien, même ainsi.  Mais c'est super gênant.  Cependant, j'ai préparé une démonstration de son apparence réelle. </p><br><p>  Tout d'abord, vous devez prendre soin de compiler le shader à l'avance, sinon la première fois que le matériau apparaît sur la scène, une frise désagréable se produira. </p><br><p>  Deuxièmement, tirer des paramètres dans l'éditeur est toute une histoire.  Vous devez les déclarer dans au moins 3 endroits et vous abonner aux changements de chacun d'eux pour les transférer dans le shader. </p><br><p>  Troisièmement, les shaders ne sont pas visibles dans l'éditeur. </p><br><p>  En général, il n'y a que 2 matériaux dans l'éditeur: PBR standard et Phong.  De l'agréable - vous pouvez choisir l'éblouissement du pipeline entre métal et spéculaire. </p><br><p>  Voici comment je vois la solution au problème: </p><br><p><img src="https://habrastorage.org/webt/6p/sg/pz/6psgpz9ycigaulxagumzyiheoe0.png"></p><br><p>  ici, vous pouvez ajouter la troisième option personnalisée, où vous pouvez télécharger des fichiers avec du code de shader, que vous pouvez simplement analyser et extraire toutes les variables uniformes et les transférer automatiquement vers le shader lors du changement.  C'est aussi simple que ça!  La seule chose à penser est que vec3 / vec4 n'est pas seulement un vecteur, mais aussi une couleur. </p><br><p>  Il est possible que les développeurs préparent leur propre éditeur de noeud, dans lequel vous pouvez collecter votre propre matériel, donc aucun travail sur ce sujet n'a été fait jusqu'à présent.  Cependant, je n'ai pas trouvé un seul jalon. </p><br><h4 id="skripty">  Scripts </h4><br><p>  Je comprends pourquoi l'éditeur a un ensemble de fonctionnalités maigres.  Mais cela pourrait être résolu par des scripts exécutables dans l'éditeur.  Il suffit d'ajouter une coche, qui inclura l'utilisation du script dans l'éditeur.  Il est également écrit sur le moteur playcanvas, pourquoi pas? </p><br><p>  Un exemple tiré de la vie. </p><br><p>  J'avais en quelque sorte besoin de générer un terrain à partir d'une carte de hauteur comme celle-ci </p><br><p><img src="https://habrastorage.org/webt/ez/5h/5d/ez5h5djugdmlbb8oqjhy6wcvw5a.png"></p><br><p>  D'accord, tout le monde n'a pas besoin d'une telle fonction dans l'éditeur, j'ai compris comment manipuler les sommets d'une plaque ordinaire au niveau du processeur (c'est-à-dire en utilisant JS, pas le vertex shader) et j'ai écrit un script qui accepte une carte et produit un terrain valide.  Mais dans l'éditeur, ce n'est pas visible!  Comment y mettre des maisons et des arbres?  C'est le premier exemple qui me vient à l'esprit. </p><br><h4 id="redaktor-koda">  Éditeur de code </h4><br><p>  Au moment de la rédaction, vous ne pouvez modifier le code qu'en ligne et la version <a href="">5.19.0 de CodeMirror est</a> sélectionnée comme éditeur.  Je ne sais pas quelle était la version il y a 2 ans, mais on a l'impression qu'elle n'a jamais été mise à jour.  Après tout, c'est la version de septembre 2016. </p><br><p>  N'attendez rien d'elle de surnaturel.  Nous devons abandonner le Sublime-Atom-VSCode habituel.  Il existe quelques raccourcis clavier et une prise en charge multicurseurs, mais c'est tout.  Même dans les fichiers shader, vous ne pouvez pas commenter une ligne à l'aide de Ctrl- /.  En général, il n'y a absolument aucune commodité pour GLSL.  Tristesse. </p><br><h4 id="modeli">  Les modèles </h4><br><p>  L'éditeur ne prend en charge que 3 types de modèles, à en juger par la documentation: </p><br><blockquote>  Modèles par exemple FBX, COLLADA, obj </blockquote><p>  Mais!  Pour une raison quelconque, glTF ne peut pas être chargé dans l'éditeur, bien qu'il existe depuis longtemps un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chargeur prêt à l'emploi</a> , en plus, des développeurs de l'éditeur eux-mêmes.  Et oui, vous pouvez l'utiliser avec le moteur si vous <del>  masochiste </del>  aimer Three.js. </p><br><h2 id="oop">  OOP </h2><br><p>  Mauvaise nouvelle. </p><br><p>  Eh bien, dans l'ordre: </p><br><h4 id="es6">  ES6 </h4><br><p>  Pour empêcher l'éditeur de jurer, vous devez ajouter ce qui suit au début du fichier: </p><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// jshint esversion: 6</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Mais l'éditeur jure encore</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ew/nb/s0/ewnbs0ocfuou-xe-iztrjz0lvry.png"><br>  <em>Pourquoi diable?</em> </p></div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lors du forum, les</a> développeurs indiquent clairement que le support de classe n'est même <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas prévu</a> .  Bien que ce soit la 16-17ème année, alors c'était vraiment pertinent.  J'espère que quelque chose change dans l'esprit des développeurs. </p><br><h4 id="fayly">  Fichiers </h4><br><p>  ... en analysant un à la fois.  Cela signifie qu'en définissant la classe de base dans un fichier et en l'héritant dans un autre, vous obtenez une erreur: </p><br><p><img src="https://habrastorage.org/webt/ll/ap/-g/llap-g4qjsvwqnpz3vcom6sp6sy.png"></p><br><p>  En même temps, la scène elle-même fonctionne bien.  Pas étonnant, car le navigateur prend en compte tous les fichiers, contrairement à l'analyseur de script ... </p><br><p>  D'accord, j'ai accepté l'idée de stocker toute la chaîne de classe dans un fichier.  Mais l'éditeur est toujours mécontent: </p><br><p><img src="https://habrastorage.org/webt/kf/ek/f9/kfekf9ncx_6svaqx3lvbzdzq6ia.png"></p><br><p>  J'ai essayé de remplacer le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ScriptType de</a> base pour créer des scripts qui en héritent.  J'abandonne, c'est complètement inutile.  Si vous creusez plus profondément et voyez comment l'analyseur de script est organisé dans l'éditeur, vous pouvez trouver une fausse méthode pour déterminer les attributs: </p><br><div class="spoiler">  <b class="spoiler_title">Spoiler</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/a_/hn/eo/a_hneo0gg69tb6wlqfzdmlitlwi.png"><br>  <em>et des trucs comme ça</em> </p></div></div><br><p>  Mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet de démonstration</a> présente des exemples de code avec héritage et un shader d'incendie personnalisé un peu plus compliqué que dans le tutoriel.  Celui qui comprend cela peut voir par lui-même à quel point le mauvais code doit être écrit. </p><br><h2 id="itog">  Résumé </h2><br><p>  En général, l'éditeur a suffisamment de problèmes et ils sont assez sérieux.  Je le recommande fortement pour le développement commercial.  Mais quand même, je l'aimerai, car il n'y a pas d'alternative. <br>  J'ai même essayé d'écrire mon éditeur hors ligne basé sur Electron et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">playcanvas / moteur</a> ouvert, mais l'enthousiasme n'était suffisant que pour un mois de travail.  Peut-être qu'un jour je continuerai, car chaque fois que je reviens sur ce moteur, je veux le prendre et le faire à ma façon. </p><br><p>  PS: En quoi le sujet est-il intéressant?  Avez-vous besoin de tutoriels sur le moteur, sur les shaders, sur les scripts ..?  Peut-être quelque chose à dire sur VR / AR sur ce moteur? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465849/">https://habr.com/ru/post/fr465849/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465835/index.html">Usine abstraite sur les doigts</a></li>
<li><a href="../fr465839/index.html">Tout ce que vous devez savoir sur la marge CSS</a></li>
<li><a href="../fr465841/index.html">Tracker GPS BOXY</a></li>
<li><a href="../fr465843/index.html">Nickel pour l'huile</a></li>
<li><a href="../fr465845/index.html">À propos de la modélisation structurelle du changement organisationnel</a></li>
<li><a href="../fr465853/index.html">Lien d'aide utile pour travailler avec des données</a></li>
<li><a href="../fr465855/index.html">Les 9 meilleures trouvailles open source pour août 2019</a></li>
<li><a href="../fr465857/index.html">Anti-googlers: les internautes prennent des mesures radicales pour protéger leurs données</a></li>
<li><a href="../fr465859/index.html">Traduction automatique de neurones durables</a></li>
<li><a href="../fr465861/index.html">"Cloud" confidentiel. Nous recherchons une alternative aux solutions ouvertes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>