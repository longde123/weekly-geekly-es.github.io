<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÄ üÖ±Ô∏è üå∞ Das Ger√§t zur Ausgabe von Cookies "Cook 3000" üîó üêö üë®üèΩ‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Ich arbeite f√ºr ein Unternehmen, das Ger√§te zur √úberwachung von √ñlplattformen, Bergbaubetrieben, Dieselaggregaten und anderen langwe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Das Ger√§t zur Ausgabe von Cookies "Cook 3000"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/420831/"><img src="https://habrastorage.org/webt/kh/e9/2m/khe92mi1t6q68vhqpcgle2f50cw.jpeg"><br><br>  Hallo allerseits!  Ich arbeite f√ºr ein Unternehmen, das Ger√§te zur √úberwachung von √ñlplattformen, Bergbaubetrieben, Dieselaggregaten und anderen langweiligen Dingen entwickelt.  Aber diesmal haben wir etwas anderes automatisiert.  Treffen Sie sich also: "Cook 3000" - der Apparat zum Ausgeben von Cookies an die besten Mitarbeiter. <br><br>  Das Ger√§t ist eine Konstruktion aus PVC und einigen Teilen: <br>  Eine Spirale mit einem Antrieb (dient zur Lieferung von Waren), einem Bildschirm, einem M√ºnzpr√ºfer und dem Gehirn der gesamten Struktur - Wiren Board 6-Controller. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/td/5c/ss/td5csslpot3ey_uuzx0yvirjd90.gif" width="720"><br><br> <a href=""><img src="https://habrastorage.org/webt/cc/39/cu/cc39cuim2tu0o8nine6dmo9r0ok.jpeg" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <a href=""><img src="https://habrastorage.org/webt/zc/ll/vn/zcllvnbavuzknmcx-vkecvjlp9m.jpeg" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br> <a href=""><img src="https://habrastorage.org/webt/mw/3p/w0/mw3pw0garxwkyjp8orka5ymrcqo.jpeg" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <a href=""><img src="https://habrastorage.org/webt/pb/tc/kx/pbtckxlynifmqbzfun4heex-4m0.jpeg" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br><h2>  Bildschirm <br></h2><br>  Als Bildschirm f√ºr <abbr title="Drahtplatine 6">WB6 verwende</abbr> ich das Nextion-Bildschirmmodul (NEXTION ENHANCED NX4832K035). <br><img src="https://habrastorage.org/webt/hw/6j/9d/hw6j9dvuwg6wqxkr9kwp3cp9upk.jpeg" width="450"><br>  Das Modul ist mit einem AVR-Prozessor ausgestattet.  Verf√ºgt √ºber ein 3,5-Zoll-TFT-Display mit einer Aufl√∂sung von 480 * 320, 32 MB internem Speicher, 1024-Byte-EEPROM und 8192-Byte-RAM. <br><br>  Dieses Ger√§t speichert und zeigt Grafiken an, animiert Oberfl√§chenelemente und verarbeitet Klicks.  √úber UART werden nur Ereigniscodes an die Steuerung √ºbertragen, wodurch Schnittstellen unterschiedlicher Komplexit√§t einfach konfiguriert werden k√∂nnen. <br><br>  Um die erforderlichen Einstellungen und Grafiken in das Bildschirmmodul zu laden, wird ein visueller Editor der Nextion Editor-Schnittstellen bereitgestellt.  Sie k√∂nnen es auf der offiziellen itead-Website herunterladen. <br><br> <a href=""><img src="https://habrastorage.org/webt/x6/u_/eb/x6u_ebycvwunndp6nshvmcqizki.png" width="450" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Beim Erstellen eines neuen Projekts m√ºssen Sie das Modell, die Bildschirmposition und die Zeichenkodierung angeben.  W√§hlen Sie f√ºr die korrekte Anzeige des kyrillischen Alphabets iso-8859-5. <br><br> <a href=""><img src="https://habrastorage.org/webt/nh/sw/m1/nhswm1fhm3dfn99dll_kzqsr4iq.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <a href=""><img src="https://habrastorage.org/webt/qt/fe/q-/qtfeq-bai9ghnfgimb4ucysox8y.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Links befindet sich eine Symbolleiste.  Hier finden Sie die wichtigsten Elemente zum Erstellen einer Schnittstelle. <br><br> <a href=""><img src="https://habrastorage.org/webt/7u/ef/da/7uefdanvxiu9o4ebff_cxuedhia.png" width="150" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild." align="left"></a> <br><br>  Klicken wir auf die Schaltfl√§che.  Im Bearbeitungsfeld wird eine bedingte Schaltfl√§che angezeigt.  Dehnen Sie es, bearbeiten Sie den Text und den Titel.  Um Text anzuzeigen, m√ºssen Sie eine Schriftart hinzuf√ºgen.  Wir werden das Font Creator-Tool auf der Registerkarte Tools verwenden.  In das Feld "Ereignis" m√ºssen Sie den Code schreiben, der auf den Ereignissen abgespielt wird. <br><br>  Wenn Sie beispielsweise "Drucktaste \ r" in die Registerkarte "Ereignis dr√ºcken" schreiben, wird das Ger√§t beim Klicken auf die Schaltfl√§che an UART gesendet: Taste gedr√ºckt und das Zeilenvorschubzeichen. <br><br> <a href=""><img src="https://habrastorage.org/webt/zm/te/k_/zmtek_kvf6e-mb8cxxoddkt6a6m.png" width="350" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Beschreibung und Beispiele f√ºr Codes finden Sie in der Dokumentation zum Bildschirm.  Zum Debuggen k√∂nnen Sie die Debug-Funktion verwenden.  In diesem Fenster k√∂nnen Sie alle Firmware-Funktionen testen, bevor Sie den Bildschirm selbst ausf√ºllen. <br><br> <a href=""><img src="https://habrastorage.org/webt/aa/gj/6a/aagj6ajoz26f2oiswoxpdxr0_ce.png" width="550" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Wenn alles in Ordnung ist, k√∂nnen Sie das Display √ºber den USB / UART-Adapter an den Computer anschlie√üen und die Firmware durch Klicken auf die Schaltfl√§che ‚ÄûUpload‚Äú eingeben. <br><br> <a href=""><img src="https://habrastorage.org/webt/oi/lf/mk/oilfmkojzwprppfkk5yza0lrpk4.png" width="150" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild." align="left"></a> <br>  Aber wie k√∂nnen wir uns jetzt mit WB6 anfreunden? <br>  Sie k√∂nnen den Bildschirm entweder √ºber denselben USB \ UART-Adapter an einen der USB-Anschl√ºsse des Controllers oder direkt an einen der Erweiterungssteckpl√§tze auf der Controller-Karte anschlie√üen. <br>  Wir interessieren uns f√ºr die Pins TX, RX, 5V und GND. <br><br> <a href=""><img src="https://habrastorage.org/webt/jy/zz/tm/jyzztmnldc_my-wqwjvo4tgwavk.jpeg" width="450" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Nach dem Anschlie√üen des Bildschirms an die Steuerung erhalten wir Ereignisdaten direkt an die serielle Schnittstelle. <br><br>  Um auf diese Ereignisse irgendwie zu reagieren, schreiben wir ein kleines Skript, das alle Daten zu den Ereignissen an das MQTT-Thema sendet.  Erstellen Sie zun√§chst eine Datei im Stammordner des Controllers und nennen Sie sie serial.sh <br><br><div class="spoiler">  <b class="spoiler_title">serial.sh</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #  /dev/ttyMOD3 stty -F /dev/ttyMOD3 ospeed 9600 ispeed 9600 raw clocal -parenb -echo cs8 CR="$(echo -e '\r')" exec 4&lt;&gt; /dev/ttyMOD3 cat &lt;&amp;4 | while : do IFS="$CR" read -r line case "$line" in quit*) break ;; *) if [[ -n "$line" ]]; then echo $line #    MQTT mosquitto_pub -t /devices/screen/controls/raw/meta/type -r -m text mosquitto_pub -t /devices/screen/controls/raw/on -r -m "$line" fi ;; esac done</span></span></code> </pre> <br></div></div><br>  Wenn Sie alles richtig gemacht haben, sehen Sie nach dem Ausf√ºhren des Skripts beim Klicken auf die Schaltfl√§che in der Weboberfl√§che des Controllers ein Thema mit den Daten, die das Bildschirmmodul sendet. <br><br>  Auf den Wiren Board-Controllern wird ein Regelsystem bereitgestellt - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wb-Regeln</a> .  Regeln werden √ºber eine Weboberfl√§che erstellt und in einer einfachen Javascript-√§hnlichen Sprache geschrieben. <br><br>  Gehen Sie in der WB6-Weboberfl√§che zur Registerkarte "Skripte" und erstellen Sie ein neues Skript, indem Sie auf die Schaltfl√§che "Neu ..." klicken und es "screen_button.js" oder etwas anderes nennen.  Als n√§chstes schreiben wir eine Regel: Beim √Ñndern des Bildschirms / Rohthemas (an ihn senden wir Daten vom Bildschirm) werden bestimmte Aktionen ausgef√ºhrt.  In diesem Fall wird beim Klicken auf den Bildschirm die Meldung "Taste gedr√ºckt" im Debug-Fenster der Weboberfl√§che angezeigt: <br><br><div class="spoiler">  <b class="spoiler_title">screen_button.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs">defineVirtualDevice(<span class="hljs-string"><span class="hljs-string">"screen"</span></span>, { <span class="hljs-comment"><span class="hljs-comment">//    title: "nextion screen", cells: { raw: { type: "text", value: "" }, } }); defineRule("screen_button", { whenChanged: "screen/raw", then: function(newValue, devName, cellName) { log(newValue); if (newValue == "button pressed") { //     ¬´button pressed¬ª log(" "); //     . } else if (newValue == "button released") { log("  "); } dev["screen"]["raw"] = ""; // . } });</span></span></code> </pre><br></div></div><br>  Gro√üartig.  Um Klicks auf dem Bildschirm zu verarbeiten, haben wir es herausgefunden.  Lassen Sie uns nun dar√ºber sprechen, wie wir den Bildschirm mit WB6 steuern.  √Ñndern Sie beispielsweise den Schaltfl√§chentext.  Der Bildschirm akzeptiert UART-Befehle.  Eine Liste und Beschreibung der Befehle finden Sie in der Dokumentation zum Bildschirm. <br><br>  Um das Ende des Befehls zu bestimmen, wartet der Bildschirm auf drei Sonderzeichen (\ xff \ xff \ xff).  So vereinfachen Sie die Aufgabe in Zukunft: Erstellen Sie ein Skript im Stammordner bash.  Nennen wir es text.sh: <br><br><div class="spoiler">  <b class="spoiler_title">text.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash TEXT=""; UNIT=""; while [ -n "$1" ] do case "$1" in -a) UNIT=$2;; -b) TEXT=$2;; esac shift done echo -en "$UNIT.txt=\"$TEXT\"\xff\xff\xff" &gt; /dev/ttyMOD3 exit 0</span></span></code> </pre><br></div></div><br><br>  Um den Schaltfl√§chentext zu √§ndern, m√ºssen wir nur das Skript mit den folgenden Argumenten aufrufen: <br> <code>bash /mnt/data/root/text.sh -a b0 -b 'Some Text'</code> <br>  Dabei ist b0 der Name der Schaltfl√§che auf dem Bildschirm und Some Text der gew√ºnschte Text. <br><br>  Ein Beispiel f√ºr die Verwendung der WB6-Regelengine: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> txt1 = <span class="hljs-string"><span class="hljs-string">"some text"</span></span>; runShellCommand(<span class="hljs-string"><span class="hljs-string">"bash /mnt/data/root/text.sh -a b0 -b '"</span></span> + txt1+ <span class="hljs-string"><span class="hljs-string">"'"</span></span>);</code> </pre><br><br>  Ebenso k√∂nnen Sie die aktuell angezeigte Seite auf dem Bildschirm, den Text f√ºr verschiedene Elemente, Variablen und andere Parameter √§ndern.  Ich werde hier nicht alle Funktionen des Bildschirmmoduls malen.  Die oben bereits geschriebenen Informationen reichen f√ºr unser Projekt v√∂llig aus. <br><br><h2>  M√ºnzpr√ºfer </h2><br>  Als M√ºnzpr√ºfer verwende ich die chinesische Version, die auf den Weiten von Aliexpress f√ºr 400 Rubel zu finden ist. <br><br>  Mit der Verbindung ist alles einfach.  +12 V und ein Impulsausgang zum Anschluss an das Dry Contact-Erweiterungsmodul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WBE2-DI-DR-3</a> .  Um die M√ºnze zu bestimmen, m√ºssen wir nur die Impulse z√§hlen.  Erstellen Sie dazu ein neues Skript in der Regelengine: <br><br><div class="spoiler">  <b class="spoiler_title">money.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeout_ms = <span class="hljs-number"><span class="hljs-number">1</span></span> * <span class="hljs-number"><span class="hljs-number">200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer_id = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timerTime = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timerLast = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> countMoney = <span class="hljs-number"><span class="hljs-number">0</span></span>; defineRule(<span class="hljs-string"><span class="hljs-string">"money"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">whenChanged</span></span>: <span class="hljs-string"><span class="hljs-string">"wb-gpio/MOD1_IN2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">then</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newValue, devName, cellName</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newValue) { timerLast = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((timerLast - timerTime) &gt;= <span class="hljs-number"><span class="hljs-number">500</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ? timerTime = Date.now(); countMoney = 1; } else { timerTime = Date.now(); //     countMoney++; } if (timer_id) { clearTimeout(timer_id); } timer_id = setTimeout(function() { //       if (countMoney == 5) { log("10 ") } else if (countMoney == 4) { log("5 ") } else if (countMoney == 3) { log("2 ") } else if (countMoney == 2) { log("1 ") } timer_id = null; }, timeout_ms); } } });</span></span></code> </pre><br></div></div><br>  Ziemlich einfache Regel.  Vielleicht nicht die genaueste. <br><br><h2>  Bitrix24 </h2><br>  Nun, wahrscheinlich das interessanteste.  Versuchen wir herauszufinden, wie der Ausdruck "Gut gemacht" √ºbersetzt werden kann.  Nimm einen Keks aus einem Regal. ‚Äú  Unser Unternehmen nutzt das Bitrix24-System als CRM.  Die Idee ist, dass der Mitarbeiter f√ºr jede erledigte Aufgabe (Aufgabe) in der Bitrix einige elektronische Punkte erh√§lt.  Dieselben Punkte k√∂nnen als W√§hrung f√ºr unser Ger√§t verwendet werden.  Lassen Sie uns herausfinden, wie Sie eine Verbindung zu Bitrix24 herstellen und den Erfolg der Mitarbeiter √ºberwachen k√∂nnen. <br><br> <a href=""><img src="https://habrastorage.org/webt/m3/tt/yk/m3ttykeum6-qm1pjvbqxa2golh0.png" width="350" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Wir werden bitrix24-python-sdk als Basis verwenden. <br>  Installieren Sie das SDK mit dem Befehl auf dem Controller <br> <code>pip install bitrix24-python-sdk</code> <br> <br>  Erstellen Sie als N√§chstes ein Python-Skript im Stammordner und nennen Sie es bitrix.py: <br><br><div class="spoiler">  <b class="spoiler_title">bitrix.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 import pprint from bitrix24 import bitrix24 import sys import subprocess b24_webhook_key = 'some_key' #   ,    . b24_webhook_user = 1 # ID  -    . b24_domain = 'some_domain' #  . page = 1 user_id = [16, 10, 6, 55, 8, 14, 67, 20] #  ,     ord_status = 5 # 5 -   order_list = 0 total_orders = 0 bx24 = bitrix24.Bitrix24(b24_domain, webhook_key=b24_webhook_key, webhook_user=b24_webhook_user) def get_order_list_len(_user_id): result_ = bx24.call( 'task.item.list', {'ORDER': {'DEADLINE': 'desc'}}, {'FILTER': {'RESPONSIBLE_ID': _user_id,'REAL_STATUS': ord_status}}, {'PARAMS': {'NAV_PARAMS': {'nPageSize': 50, 'iNumPage': page}}} ) if result_: return (len(result_['result'])) for user in user_id: while True: order_list = get_order_list_len(user) total_orders = total_orders + order_list page = page + 1 if(order_list &lt; 50): subprocess.call("mosquitto_pub -t /devices/%s/controls/orders_finished/on -r -m %s" % (user, total_orders), shell=True) #    MQTT. page = 1 total_orders = 0 break</span></span></code> </pre><br></div></div><br>  Dieses Skript fordert alle abgeschlossenen Aufgaben einer bestimmten Benutzerliste an, ber√ºcksichtigt sie und sendet die Nummer an Themen in mqtt.  Als n√§chstes k√∂nnen wir nur den erhaltenen Betrag mit den vorherigen Werten vergleichen. Wenn die neuen Daten gr√∂√üer sind, f√ºgen Sie dem Mitarbeiter Punkte f√ºr die geleistete Arbeit hinzu. <br><br><h2>  Bluetooth </h2><br>  Zum Scannen von BLE-Ger√§ten verwende ich Bluez.  Das Programm ist bereits auf dem Controller installiert.  Geben Sie zum Scannen von Ger√§ten einfach einige Befehle in die Konsole ein: <br><br><pre> <code class="hljs pgsql">hciconfig hci0 up hcitool lescan <span class="hljs-comment"><span class="hljs-comment">--duplicates</span></span></code> </pre> <br>  Dies reicht uns jedoch nicht aus.  Es ist ratsam, den Signalpegel zu sehen.  Installieren Sie dazu das zus√§tzliche Dienstprogramm hcidump: <br><br><pre> <code class="hljs powershell">apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install bluez<span class="hljs-literal"><span class="hljs-literal">-hcidump</span></span></code> </pre> <br>  Und erg√§nzen Sie unser Team: <br><br><pre> <code class="hljs powershell">hciconfig hci0 up hcitool lescan -<span class="hljs-literal"><span class="hljs-literal">-duplicates</span></span> | hcidump <span class="hljs-literal"><span class="hljs-literal">-a</span></span> | grep <span class="hljs-literal"><span class="hljs-literal">-E</span></span> <span class="hljs-string"><span class="hljs-string">'bdaddr|RSSI'</span></span></code> </pre> <br>  Am Ausgang erhalten wir MAC-Adressen und RSSI-Bluetooth-Ger√§te in der N√§he. <br><br> <a href=""><img src="https://habrastorage.org/webt/eg/st/ar/egstarnarzrsym0nfutrfwhawhc.png" width="650" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Diese beiden Zeilen k√∂nnen wundersch√∂n in ein Bash-Skript eingeschlossen und die Ausgabe an MQTT gesendet werden. <br>  Der zweite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weg ist aioblescan</a> script <br>  Es erfordert Python 3, vorzugsweise 3.5.  Der Vorteil dieses Skripts besteht darin, dass Sie bestimmte MAC-Adressen √ºberwachen k√∂nnen und nicht alle Smartwatches und Smartphones, die am Fenster vorbeigehen.  Die Skriptausgabe wird auch an MQTT umgeleitet, um die Arbeit mit der Regelengine zu vereinfachen. <br><br> <a href=""><img src="https://habrastorage.org/webt/co/bk/cl/cobkcltejo3kbwvhpk-rduxlgxk.png" width="400" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Jetzt wissen wir, wie man mit WB6 √ºber das Bildschirmmodul interagiert. Wir k√∂nnen M√ºnzen z√§hlen, den Erfolg von Mitarbeitern in Bitrix √ºberwachen, Ger√§te scannen und deren Signalpegel.  Es bleibt, dies auf einem Haufen zu sammeln und eine Art Logik vorzuschreiben.  Ich werde nicht alle Skripte f√ºr dieses Projekt malen.  Alles wird √ºber den Link gemeinfrei verf√ºgbar sein.  Vielleicht findet einer von Ihnen eine n√ºtzlichere und kl√ºgere Anwendung daf√ºr. <br><br><h2>  Geh√§use </h2><br>  Der K√∂rper besteht aus 10 mm gesch√§umtem PVC.  Solcher Kunststoff wird in Platten verkauft.  M√§√üig weich.  Sie k√∂nnen mit einer B√ºgels√§ge oder mit einem normalen Schreibmesser auf einem Lineal schneiden. <br><br> <a href=""><img src="https://habrastorage.org/webt/jx/nc/7e/jxnc7ef0lwmeow3j4fhlyz4--gs.jpeg" width="400" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br>  Als Befestigungselement wurden ein Kindersatz aus Metallteilen ‚ÄûKonstruktor‚Äú und kurze selbstschneidende Schrauben verwendet.  In diesem Kit wurde fast alles ben√∂tigt, um den Koffer zusammenzubauen. <br><br> <a href=""><img src="https://habrastorage.org/webt/h0/5m/jl/h05mjlqrtr82bk4krmbjkeyetzq.jpeg" width="400" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br><h2>  Fahren </h2><br>  Die Spirale und das Laufwerk wurden im Online-Shop B \ U App gekauft.  Teile f√ºr Verkaufsautomaten.  Angetrieben von einem 24V Netzteil.  Der Anschluss erfolgt √ºber das Relais des Erweiterungsmoduls <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WBE2-DO-R6C-1</a> . <br><br> <a href=""><img src="https://habrastorage.org/webt/es/fa/ar/esfaaryqjf8rslpblwesr3fcrgm.png" width="200" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <a href=""><img src="https://habrastorage.org/webt/be/oa/kt/beoaktz2glv7ksdvod0n4ehkn5e.png" width="200" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <a href=""><img src="https://habrastorage.org/webt/v7/bn/0p/v7bn0pxipe6w-bi328ugegtuh3e.png" width="200" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."></a> <br><br><h2>  Funktionell </h2><br>  Funktionell √§hnlich wie ein normaler Verkaufsautomat.  Gibt Cookies f√ºr Geld aus und nicht nur. <br><img src="https://habrastorage.org/webt/oy/kw/vh/oykwvhvrnx0sscx1kktd6fhcej8.gif"><br><br>  Wenn das Ger√§t gestartet wird, wird auf dem Bildschirm ein Begr√º√üungsbildschirm mit einem Logo angezeigt. Anschlie√üend wird zum Hauptbildschirm gewechselt, auf dem wir entweder Cookies kaufen oder ein Spiel spielen k√∂nnen. <br><br>  Das Spiel f√ºr den Benutzer ist kostenlos, aber Sie k√∂nnen einen kleinen Motivationspreis festlegen.  Die Regeln sind einfach.  Dem Spieler wird angeboten, drei einfache Probleme zu l√∂sen.  Wenn er drei richtige Antworten gibt, erh√§lt er einen Preis in Form von Cookies.  Vielleicht ist dies alles, was Sie √ºber diesen Artikel wissen m√ºssen.  Kehren wir zum Hauptmen√º zur√ºck und klicken Sie auf "Cookies kaufen". <br><br>  Als n√§chstes werden Sie vom System aufgefordert, eine Zahlungsmethode auszuw√§hlen.  Bei Auswahl der Zahlungsmethode "F√ºr Geld" erscheint auf dem Bildschirm ein Fenster mit dem Preis und dem gezahlten Betrag, der sich erh√∂ht, wenn Sie Geld auf den M√ºnzpr√ºfer einzahlen. <br><br>  Sobald der Betrag ausreicht, um einen Kauf zu t√§tigen, schlie√üt das Ger√§t dieses Fenster automatisch und gibt die Ware aus. <br><br>  Wie ich bereits sagte, wird jedoch auch eine andere W√§hrung bereitgestellt - dies sind Punkte, die f√ºr den Erfolg der Mitarbeiter im Bitrix24-System erhalten wurden.  Wenn ein Mitarbeiter eine ihm zugewiesene Aufgabe schlie√üt, werden ihm Punkte gutgeschrieben.  F√ºr besonders gute Ergebnisse k√∂nnen dem Chef auch Punkte verliehen werden. <br><br><img src="https://habrastorage.org/webt/cm/ng/ox/cmngoxpzdzbmt3hxh9xc9l9whac.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."><img src="https://habrastorage.org/webt/p6/bw/yr/p6bwyraqciiu2v0tu371qypzfxq.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."><br><img src="https://habrastorage.org/webt/kk/df/7d/kkdf7dnz548knhk5p17_21zj6nu.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."><img src="https://habrastorage.org/webt/wg/9w/cl/wg9wcltq4yk9ogjh-jik8kt0ogc.png" width="360" alt="Klicken Sie f√ºr ein gr√∂√üeres Bild."><br><br>  Um die Punkte auszuzahlen, muss der Mitarbeiter den Punkt "F√ºr Punkte kaufen" ausw√§hlen. Anschlie√üend versucht das Ger√§t festzustellen, wer davor steht.  Zu diesem Zweck scannt er die Bluetooth-Ger√§te um sich herum. Wenn er die MAC-Adresse des Ger√§ts des Mitarbeiters sieht und in die Datenbank eingibt und der Signalpegel stark genug ist, um anzunehmen, dass er in der N√§he steht, werden die Daten zum Kontostatus des Mitarbeiters auf dem Bildschirm angezeigt Name und Angebot, Cookies mit Punkten zu bezahlen. <br><br>  Wenn das System kein einzelnes bekanntes Ger√§t ermitteln konnte, gibt es eine Warnung aus und bietet an, Ihren Namen aus der Liste auszuw√§hlen und dann Ihren PIN-Code einzugeben. <br><br>  Bei korrekter Eingabe √∂ffnet sich das gleiche Fenster mit Daten zum Status des Benutzerkontos und den Kosten des Produkts.  Wenn ein Kauf best√§tigt wird, wird die erforderliche Anzahl von Punkten vom Benutzerkonto abgebucht und das Ger√§t gibt die Ware aus. <br><br>  Das ist alles  Dieses Projekt wurde ausschlie√ülich zu Bildungszwecken erstellt, um zu zeigen, dass die Anwendungen des Wiren Board-Controllers nur durch Vorstellungskraft begrenzt sind.  Alle Dateien und Skripte finden Sie unter dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420831/">https://habr.com/ru/post/de420831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420819/index.html">Top 10 Python-Tools f√ºr maschinelles Lernen und Datenwissenschaft</a></li>
<li><a href="../de420821/index.html">Regel 10: 1 beim Programmieren und Schreiben</a></li>
<li><a href="../de420825/index.html">Heute ist das erste Spiel zwischen OpenAI- und Dota 2-Profis (Menschen haben gewonnen). Wir verstehen, wie der Bot funktioniert</a></li>
<li><a href="../de420827/index.html">Erstellen Sie ein einfaches Maven-Projekt mit Java EE + WildFly10 + JPA (Ruhezustand) + Postgresql + EJB + IntelliJ IDEA</a></li>
<li><a href="../de420829/index.html">Jobsystem. √úbersicht von der anderen Seite</a></li>
<li><a href="../de420833/index.html">Wichtige Monetarisierungsfehler bei Anwendungen [und wie man sie behebt]</a></li>
<li><a href="../de420837/index.html">Testen von Software-RAID-Arrays f√ºr NVMe-Ger√§te mithilfe der SNIA-Methode</a></li>
<li><a href="../de420841/index.html">Hotfix vor dem Krankenhaus oder ‚ÄûHey Swagger! Wo sind meine Fehler? "</a></li>
<li><a href="../de420843/index.html">7. September, Jekaterinburg - ein Treffen f√ºr .NET-Entwickler</a></li>
<li><a href="../de420845/index.html">Die Z√§hmung des Hartn√§ckigen mit einer Kr√ºcke: das Loch des WLAN-Adapters WF2190 (Realtek8812AU Wireless LAN 802.11ac USB)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>