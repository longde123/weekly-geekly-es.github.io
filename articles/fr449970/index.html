<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë• ü§© üë¶üèª Publier sous le drapeau noir, ou comme je n'ai pas mis votre cours vid√©o sur le tracker üå¨Ô∏è ‚óÄÔ∏è üèôÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Dans les moments difficiles, nous vivons, n'est-ce pas? Les gens sont √©go√Østes, ne reconnaissent pas la valeur des ≈ìuvres des autres, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Publier sous le drapeau noir, ou comme je n'ai pas mis votre cours vid√©o sur le tracker</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449970/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gd/zm/dn/gdzmdnntaat9zilg5nsvqcto5yg.jpeg" alt="captain_flint.jpg"></div><br>  Bonjour, Habr!  Dans les moments difficiles, nous vivons, n'est-ce pas?  Les gens sont √©go√Østes, ne reconnaissent pas la valeur des ≈ìuvres des autres, aiment venir √† tout pr√™t √† la fois.  La propri√©t√© intellectuelle pour beaucoup ne ressemble en g√©n√©ral qu‚Äô√† une plaisanterie bureaucratique: ¬´Comment se fait-il que les informations soient gratuites, car c‚Äôest IN-FOR-MA-QI-I !!! 11¬ª.  Je suis d'accord, id√©alement c'est le cas.  Ces anarchies, les humeurs et les philosophies rebelles des pirates / pirates clandestins, qui gardent les droits des gens ordinaires, ne me sont pas √©trang√®res.  Mais le paradoxe est que la vraie justice consiste √©galement √† rembourser chacun pour son travail et ses m√©rites, de sorte que dans la plupart des cas, le piratage est une entreprise antagoniste.  Mais ici, la politique de prestation de services pour la protection de la propri√©t√© intellectuelle, propos√©e par un merveilleux vendeur comme InfoProtector, m'a provoqu√© une col√®re juste. <br><br>  Sous la coupe, l'histoire de la fa√ßon dont j'ai achet√© un cours vid√©o payant est tomb√©e pr√©cipit√©e apr√®s avoir r√©alis√© que je ne pouvais pas en sauvegarder les vid√©os pour les revoir √† l'avenir, je me suis f√¢ch√© contre ceux qui avaient cach√© ce logiciel quasi protecteur (qui, entre autres, est impitoyable tra√Æne et mange beaucoup de ressources machine) et a d√©cid√© de r√©tablir un peu la justice ... Sans enfreindre la loi, bien s√ªr.  Amen. <br><a name="habracut"></a><blockquote>  <b>AVIS DE NON-RESPONSABILIT√â.</b>  Tout ce qui suit a √©t√© publi√© √† des fins de recherche et est destin√© √† remplir une fonction exclusivement √©ducative.  L'auteur n'est pas responsable de l'utilisation ill√©gale des informations de ce poste et en aucun cas ne demande instamment de le percevoir comme un "guide d'action". </blockquote><br><h3>  <font color="#4682b4">Comment c'√©tait</font> </h3><br>  C'√©tait un week-end gratuit, et j'ai d√©cid√© de pr√©senter le XXXX p honn√™tement gagn√©.  √† un cours vid√©o de cinq heures.  Nous l'appellerons le ¬´cours de recyclage pour le travailleur de la restauration¬ª afin qu'il n'y ait pas de parall√®les.  En g√©n√©ral, je ne suis pas partisan de la perception de l'information par le biais de cours vid√©o (oh, tr√®s contre-productif), mais je n'ai pas pu y r√©sister directement - j'ai √©t√© victime de banni√®res publicitaires color√©es. <br><br>  J'ai pay√©, une lettre s'est envol√©e dans le courrier contenant des liens pour t√©l√©charger des documents invent√©s (liens) par le randomiseur InfoProtector et a √©t√© envoy√©e √† un CDN √† proximit√©.  Dans le corps de la lettre se trouve la gratitude de l'auteur pour l'achat et la cl√© d'enregistrement, qui a propos√© d'activer l'achat. <br><br>  T√©l√©chargez l'archive.  Le dossier d'archives.  Le fichier ex√©cutable se trouve dans le dossier.  <s>Dans le fichier ex√©cutable se trouve un ≈ìuf.</s>  Je lance exe'shnik - c'est ici qu'ils m'ont expos√© toute la v√©rit√©, qui dans un r√©cit gratuit sonne quelque chose comme √ßa (lu d'une voix nasillarde): <br><blockquote>  <i>InfoProtector, un m√©canisme de protection des informations num√©riques, a √©t√© appliqu√© √† ce cours vid√©o;</i>  <i>pour le premier lancement</i> (lire ¬´activation du produit¬ª), <i>vous avez besoin d'un acc√®s Internet;</i>  <i>regarder des vid√©os n'est possible qu'√† partir de notre programme, de notre lecteur;</i>  <i>l'installation du cours vid√©o n'est possible que sur deux ordinateurs</i> (le cours vid√©o est li√© √† la configuration de l'environnement OS / mat√©riel, comme il s'av√®re plus tard). </blockquote><br>  √Ä ce stade, j'√©tais un peu contrari√©.  Autrement dit, non seulement ils m'ont appel√© d√®s la porte une personne malhonn√™te qui ne serait priv√©e que du travail de mon√©tisation de quelqu'un d'autre, mais aussi le taux pour lequel j'ai pay√© un montant d√©cent ne serait disponible que jusqu'√† la r√©installation du syst√®me. <br><br>  ¬´√áa ne marchera pas¬ª, ai-je d√©cid√© et j'ai commenc√© une s√©rie d'exp√©riences. <br><br><h3>  <font color="#4682b4">Restrictions d'InfoProtector</font> </h3><br>  Afin de ne pas perdre de temps en vain, je me suis d'abord tourn√© vers le World Wide Web pour d√©couvrir que les gens avaient d√©j√† compris le m√©canisme de protection de ces gars (toutes les subtilit√©s du travail de protection, bien s√ªr, n'ont pas √©t√© r√©v√©l√©es). <br><br>  Ce que j'ai r√©ussi √† d√©couvrir: <br><br><ol><li>  La cl√© d'activation est g√©n√©r√©e de mani√®re al√©atoire lors du paiement du cours et est utilis√©e pour √™tre un serveur authentifi√© qui, en cas de succ√®s, envoie au client une cl√© AES pour d√©chiffrer le mat√©riel vid√©o disponible √† partir du lecteur personnalis√© de l'entreprise.  L'inversion de l'application est longue et longue (c'est-√†-dire peu pratique pour ce type de t√¢che), j'ai donc d√©cid√© de quitter ce chemin. </li><li>  L'utilisation des outils d'enregistrement d'√©cran est impitoyablement bloqu√©e de plusieurs fa√ßons: vous ne pouvez pas lancer simultan√©ment le lecteur et n'importe quel capture d'√©cran sur le m√™me h√¥te, car le programme d√©tecte les processus en cours avec leurs m√©tadonn√©es: noms des titres des fen√™tres;  description des fichiers ex√©cutables;  noms des fournisseurs cousus dans les applications de capture d'exe'shniki;  m√™me un navigateur ouvert sur une page dont le nom contient le mot "Fraps", par exemple, fait √©galement l'objet d'une alerte et d'un arr√™t du lecteur. </li><li>  Les bacs √† sable, les machines virtuelles et le contenu en streaming √† partir de connexions √† distance (rdesktop, RAdmin, TeamViewer) ne sont √©galement pas une option - un logiciel intelligent peut les d√©tecter au fil des ans, se tuant √† chaque occasion. </li></ol><br>  Mais malgr√© les deux derniers points, le vecteur d'attaque le plus r√©el reste l'enregistrement d'√©cran, qui peut √™tre impl√©ment√© de plusieurs mani√®res: <br><br><ol><li>  Trouvez un programme de capture qui ne contient pas de balises dans son nom / producteur / description qu'InfoProtector ne conna√Æt pas et que, par cons√©quent, ce dernier ne d√©clenchera pas.  Inconv√©nients: long, ennuyeux et non un fait, ce qui est en principe r√©alisable. </li><li>  Trouvez un produit open source avec les fonctionnalit√©s n√©cessaires et compilez votre version de la capture d'√©cran, en rempla√ßant dans la source tout ce qui peut sembler suspect √† la protection InfoProtector en th√©orie.  Inconv√©nients: longs, ennuyeux, longs (g√©n√©ralement de tels projets sont plut√¥t encombrants, se composent de centaines (?) De fichiers et ont des tas de d√©pendances dans les sources, donc juste <i>Ctrl-H</i> ne fonctionne pas, vous n'avez pas besoin de le modifier afin que mimikatz ne coupe pas Windows Defender). </li><li>  √âcrivez votre d√©cision sur quelque chose de script afin de ne pas risquer avec un fichier ex√©cutable compil√© de nature inconnue (on ne sait pas ce que cette infection dira) qui impl√©mente la fonctionnalit√© triviale de prendre rapidement des captures d'√©cran d'une zone s√©lectionn√©e de l'√©cran (heureusement, InfoProtector le permet) et l'√©crire s√©par√©ment piste sonore, qui s'est √©galement av√©r√©e l√©gitime et aussi simple que possible. </li></ol><br>  Les inconv√©nients du troisi√®me paragraphe sont introuvables, vous pouvez donc continuer. <br><br><h3>  <font color="#4682b4">Capture d'√©cran de la plan√®te!</font> </h3><br>  Tout d'abord: voyons comment automatiser le processus de cr√©ation d'un nuage de captures d'√©cran √† l'aide d'un script.  Bien s√ªr, ce sont: Python, et plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenCV</a> , et plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MSS</a> , et plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PIL</a> . <br><br>  Le processus est extr√™mement simple: <br><br><ol><li>  D√©finissez la taille de la fen√™tre du lecteur √©gale √† la r√©solution de la vid√©o de sortie que nous aimerions avoir (il est logique de prendre en compte l'emplacement des commandes de script - une fen√™tre avec un terminal, par exemple, qui ne devrait pas tomber dans la zone d'enregistrement).  Cela peut √™tre fait avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> logiciel aussi merveilleux. </li><li>  Nous positionnons la fen√™tre du lecteur de mani√®re √† trouver celle qu'il serait le plus facile d'expliquer au script - le coin inf√©rieur droit de l'√©cran (je pense que le syst√®me de r√©f√©rence associ√© aux bordures de l'√©cran est l'option la plus pratique). </li><li>  D√©finissons un script d√©j√† √©crit (qui sera un peu plus bas) pour prendre des captures d'√©cran de cette zone. </li><li>  Nous ne touchons pas √† ce syst√®me g√™nant pendant toute la lecture vid√©o. </li></ol><br>  Script sous le spoiler: <br><br><div class="spoiler">  <b class="spoiler_title">fckInfoprotector.py</b> <div class="spoiler_text"><pre><code class="python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# Usage: python3 fckInfoprotector.py &lt;WIDTH&gt; &lt;HEIGHT&gt;

import sys

import numpy as np
import cv2
from mss.windows import MSS as mss
from PIL import Image


class Capturer:

	def __init__(self, w, h, resolution='1080p', fps=24.975):
		if resolution == '1080p':
			self.monitor = {
				'top': 1080 - h,
				'left': 1920 - w,
				'width': w,
				'height': h
			}

		elif resolution == '1440p':
			self.monitor = {
				'top': 1440 - h,
				'left': 2560 - w,
				'width': w,
				'height': h
			}

		else:
			raise ValueError('Unsupported monitor resolution')

		self.sct = mss()

		self.vid = cv2.VideoWriter(
			'output.avi',
			cv2.VideoWriter_fourcc(*'XVID'),
			fps=fps,
			frameSize=(
				self.monitor['width'],
				self.monitor['height']
			)
		)

	def mainloop(self):
		while True:
			sct_img = self.sct.grab(self.monitor)
			sct_img_size = (sct_img.width, sct_img.height)

			img = Image.frombytes(
				'RGB',
				sct_img_size,
				sct_img.rgb
			)

			frame = cv2.cvtColor(
				np.array(img),
				cv2.COLOR_BGR2RGB
			)

			self.vid.write(frame)


if __name__ == '__main__':
	if len(sys.argv) != 3:
		print(f'Usage: {sys.argv[0]} &lt;WIDTH&gt; &lt;HEIGHT&gt;')
		sys.exit()

	w, h = (int(x) for x in sys.argv[1:3])
	capturer = Capturer(w, h, fps=50.0)

	try:
		capturer.mainloop()
	except KeyboardInterrupt:
		print('Interrupted')
</code></pre><br>
</div></div><br>
<h3><font color="#4682b4"> </font></h3><br>
   : Windows     .<br>
<br>
 Windows 7:  -&gt;   -&gt;    -&gt;  -&gt;  -&gt;      ¬´ ¬ª:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qm/z6/4u/qmz64unk8ocgkiwkfy2pd0ga83m.png" alt="1.png"></div><br>
              ,     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/fz/-d/gtfz-df-ay4lb9qjvq7sr5a5jwg.png" alt="2.png"></div><br>
<br>
<h3><font color="#4682b4">   </font></h3><br>
 ,      ,    .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VirtualDub</a>.<br>
<br>
 :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/te/zg/ks/tezgksjfonqkw5vxiqi74xjjcqq.png" alt="3.png"></div><br>
 :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e0/sd/cw/e0sdcw5kzwmzmh6xywxjmdk8i3w.png" alt="4.png"></div><br>
  , . .      . ,          ,     50- (    ,  )  <math></math><img src="https://habrastorage.org/getpro/habr/formulas/6d6/a4f/78f/6d6a4f78fbacd6edecc018ce8ad3e364.svg" alt="$X$" data-tex="inline">,  <math></math><img src="https://habrastorage.org/getpro/habr/formulas/6d6/a4f/78f/6d6a4f78fbacd6edecc018ce8ad3e364.svg" alt="$X$" data-tex="inline">   :<br>
<p></p><p><math></math><img src="https://habrastorage.org/getpro/habr/formulas/9f5/fe9/789/9f5fe97891d9d8647560c647cf31cec0.svg" alt="$X=captured\_video\_duration\times 50\div original\_video\_duration$" data-tex="display"></p><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/r4/ji/gr/r4jigrpjbl-pcvb1ixet7dwq2qg.png" alt="5.png"></div><br>
,          ,    .<br>
<br>
      <b>F7</b>!    .<br>
<br>
<h3><font color="#4682b4"> </font></h3><br>
     ?  .<br>
<br>
-,          ,          .              -,     ,             . ,     .<br>
<br>
-,      :       (     NVIDIA,     !),    ,  ,      ,    ,     ¬´¬ª,      ?<br>
<br>
-,  : ¬´  DVD-     !¬ª. ,  .        ,    ,    ( ),       ,      .<br>
<br>
     :    ,       ,          -,         (,  ),  ,      . ,       ().<br>
<br>
      ,         ,    ‚Äì .<br>
<br>
-,  !</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr449970/">https://habr.com/ru/post/fr449970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr449960/index.html">Sources d'inspiration lors du d√©veloppement pour UDB</a></li>
<li><a href="../fr449962/index.html">Routeurs industriels 4G SmartMotion</a></li>
<li><a href="../fr449964/index.html">Essai routier nanoCAD SPDS Chantier de construction 8. Partie 2</a></li>
<li><a href="../fr449966/index.html">Tableaux dans Figma. Conception d'une grille de donn√©es par un composant</a></li>
<li><a href="../fr449968/index.html">Redmadrobot discute d'AppsConf 2019: vid√©o</a></li>
<li><a href="../fr449972/index.html">Comment injecter rapidement des piscines en amont?</a></li>
<li><a href="../fr449974/index.html">Netramesh - solution de maillage de service l√©ger</a></li>
<li><a href="../fr449976/index.html">Conteneurs associatifs multithread en C ++. Rapport Yandex</a></li>
<li><a href="../fr449978/index.html">Igor Antarov de Moscou Tesla Club se d√©bat avec 20 mythes sur Tesla et les voitures √©lectriques</a></li>
<li><a href="../fr449984/index.html">Google Actualit√©s et Leo Tolstoy: visualisation des incorporations de mots Word2Vec √† l'aide de t-SNE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>