<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¥ ü§ù üè§ Transformaci√≥n de procesos de desarrollo y entrega para una aplicaci√≥n heredada üèÅ üçê üì™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuestro equipo es responsable de la operaci√≥n y desarrollo de un gran producto corporativo. 
 A principios de 2017, tomando un descanso de una impleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transformaci√≥n de procesos de desarrollo y entrega para una aplicaci√≥n heredada</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427111/"><p>  Nuestro equipo es responsable de la operaci√≥n y desarrollo de un gran producto corporativo. <br>  A principios de 2017, tomando un descanso de una implementaci√≥n importante y releyendo las "lecciones aprendidas", decidimos firmemente revisar el desarrollo y la entrega de nuestra aplicaci√≥n.  Nos preocupaba la baja velocidad y la calidad de la entrega, lo que no nos permit√≠a proporcionar el nivel de servicio que los clientes esperan de nosotros. </p><br><p>  Era hora de pasar de las palabras a los hechos, a cambiar los procesos. </p><br><p>  Este art√≠culo hablar√° brevemente sobre d√≥nde comenzamos, qu√© hicimos, cu√°l es la situaci√≥n ahora, qu√© dificultades hemos encontrado, qu√© tenemos que dejar atr√°s, qu√© m√°s planeamos hacer. </p><a name="habracut"></a><br><h1 id="nachalo">  Inicio </h1><br><h3 id="nemnogo-o-sisteme">  Un poco sobre el sistema. </h3><br><p>  La aplicaci√≥n es un ejemplo cl√°sico de una aplicaci√≥n empresarial monol√≠tica del "derrame arquitect√≥nico de la d√©cada de 2000": </p><br><ul><li>  Operado y desarrollado durante 15 a√±os. </li><li>  Es un conjunto de una docena y media de WinForms, servicios de Windows y aplicaciones ASP .Net vinculadas a una sola base de datos MS SQL. </li><li>  Tama√±o de la base de c√≥digo: ~ 1MLOC para C #, ~ 9000 objetos de base de datos.  Gran parte de la l√≥gica empresarial se ejecuta en el lado de la base de datos. </li><li>  La aplicaci√≥n consta de ~ 250 + soluciones para crear un cliente win / web (una soluci√≥n por grupo de formularios relacionados).  Este es un legado del proceso de desarrollo anterior y la arquitectura del cliente. </li><li>  La aplicaci√≥n admite varios tipos de procesos (clientes) al cambiar la configuraci√≥n interna: establecer procesos, permisos, campos flexibles, etc., en las tablas de configuraci√≥n de la base de datos del sistema.  Al mismo tiempo, la base del c√≥digo de la aplicaci√≥n es la misma para todos los clientes. </li><li>  La aplicaci√≥n se implementa y admite en m√°s de 25 sitios (cada sitio es una instancia independiente del sistema) y sirve a un total de varios miles de usuarios finales en diferentes zonas horarias. </li></ul><br><h3 id="process-dostavki-do-transformacii">  Proceso de entrega antes de la transformaci√≥n. </h3><br><ol><li>  El desarrollo y montaje de la aplicaci√≥n terminada y sus componentes es realizada por el contratista. </li><li>  el c√≥digo se almacen√≥ en el lado del contratista (versi√≥n local de MS TFS).  El c√≥digo se transmite mensualmente al cliente en forma de archivo de la versi√≥n actual de la rama del repositorio principal. </li><li>  la entrega se llev√≥ a cabo mediante la entrega de "actualizaciones delta": para la aplicaci√≥n (conjunto de dll, exe, etc.) y componentes de la base de datos (conjunto de scripts sql create / alter).  La aplicaci√≥n fue construida y los paquetes delta preparados por el contratista. </li><li>  El proceso de despliegue fue apoyado por el sistema de transporte, los cambios se aplicaron autom√°ticamente. </li></ol><br><p>  La entrega se lleva a cabo como parte de los lanzamientos mensuales (como lo he arreglado, te lo dije anteriormente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ). </p><br><h3 id="suschestvovavshie-problemy">  Problemas existentes </h3><br><p>  <em>Falta de control</em> </p><br><ul><li>  A pesar de la propiedad formal del c√≥digo, el montaje real de la aplicaci√≥n por parte del cliente fue imposible. </li><li>  Como resultado, es imposible verificar la operatividad del c√≥digo transmitido al cliente. </li><li>  cambios en el c√≥digo, no transparentes para el cliente.  No es posible hacer coincidir los cambios solicitados y reales en el producto. </li><li>  El an√°lisis de c√≥digo es dif√≠cil para SQL e imposible para los componentes de C # </li></ul><br><p>  <em>Aporte laboral y errores</em> </p><br><ul><li>  La preparaci√≥n de "paquetes delta" es un procedimiento que lleva mucho tiempo para el desarrollo, una fuente de errores y ciertos costos del proyecto. </li><li>  La implementaci√≥n de una aplicaci√≥n Delta Packet requiere el seguimiento del orden de los paquetes.  Un error de paquete fuera de servicio es un importante problema de implementaci√≥n y una fuente importante de incidentes. </li><li>  Las regresiones ocurren regularmente: los errores que parecen haber sido reparados y las correcciones implementadas en el producto aparecieron nuevamente. </li></ul><br><p>  <em>Limitaciones</em> </p><br><ul><li>  La capacidad de restaurar el estado del sistema en un momento anterior (cambios de retroceso) est√° pr√°cticamente ausente. </li><li>  La capacidad de escalar eficazmente los recursos de desarrollo y prueba temprana mediante la atracci√≥n de empleados clientes est√° pr√°cticamente ausente. </li></ul><br><h3 id="ozhidaemye-rezultaty">  Resultados esperados </h3><br><p>  Al comienzo del proyecto, establecimos objetivos obvios para resolver los problemas identificados anteriormente. </p><br><ul><li>  Transfiera el repositorio de c√≥digo al control del cliente </li><li>  Mueva el proceso de compilaci√≥n de la aplicaci√≥n al lado del cliente </li><li>  Modificar el proceso de distribuci√≥n de cambios, abandonando el "delta de cambios" en favor de una actualizaci√≥n completa </li></ul><br><p>  Adem√°s, utilizando las soluciones obtenidas cuando se lograron los dos primeros objetivos, calculamos: </p><br><ul><li>  Mejore la calidad t√©cnica de las soluciones resultantes a trav√©s del control de c√≥digo </li><li>  Aumente el compromiso de prueba y la usabilidad al proporcionar implementaci√≥n de autoservicio. </li></ul><br><h1 id="etapy-bolshogo-puti">  Etapas de un largo camino </h1><br><h3 id="analiz-tekuschego-sostoyaniya-processov-razrabotki">  An√°lisis del estado actual de los procesos de desarrollo. </h3><br><p>  Primer paso: analizar el proceso de desarrollo del contratista existente.  Esto ayud√≥ a planificar los cambios para que, si es posible, no interrumpa el trabajo. </p><br><p>  Desafortunadamente, el conocimiento del proceso de desarrollo mostr√≥ que, en la comprensi√≥n de la industria de TI en la actualidad, el proceso estaba ausente. </p><br><ol><li>  El c√≥digo de la base de datos y la l√≥gica comercial no se mantuvieron actualizados en el repositorio.  La raz√≥n principal: la falta de herramientas que implementan el ensamblaje desde el c√≥digo en el repositorio y la implementaci√≥n del resultado.  Entonces, el c√≥digo en el repositorio es solo documentaci√≥n. </li><li>  La versi√≥n "real" del c√≥digo de la base de datos se encuentra en la "base de datos de desarrollo" com√∫n, en la que trabajan docenas de desarrolladores. </li><li>  El c√≥digo de la aplicaci√≥n del cliente (C #, ASP.NET) se mantuvo en el repositorio, pero no se garantiz√≥ la calidad y la puntualidad de las confirmaciones. </li><li>  Los componentes (no toda la aplicaci√≥n) se ensamblaron en las estaciones del desarrollador.  No est√° del todo claro c√≥mo se actualiz√≥ el c√≥digo antes del ensamblaje.  El componente ensamblado se present√≥ en una carpeta compartida compartida.  A partir de ah√≠, se form√≥ un "paquete delta" para el cliente. </li><li>  La completa falta de pr√°ctica de mantener ramas de desarrollo.  Por signos indirectos, sospechamos esto durante mucho tiempo, pero despu√©s de sumergirnos en el proceso, todo se hizo evidente. </li></ol><br><h3 id="perehod-na-novyy-repozitoriy-i-sistemu-kontrolya-versiy">  Cambiar a un nuevo repositorio y sistema de control de versiones </h3><br><p>  La dependencia de las plataformas de MS y los est√°ndares corporativos determinaron la elecci√≥n del entorno de desarrollo: Team Foundation Server. <br>  Sin embargo, cuando comenzamos el proyecto directamente (abril de 2017), la versi√≥n de Visual Studio Team Services acaba de ser lanzada.  El producto parec√≠a muy interesante, fue designado como una direcci√≥n estrat√©gica para MS, ofreci√≥ repositorios git, ensamblaje e implementaci√≥n para on-prem y cloud. </p><br><p>  El TFS corporativo en la empresa se qued√≥ atr√°s de la versi√≥n y la funcionalidad de VSTS, la migraci√≥n a la nueva versi√≥n solo estaba en proceso de discusi√≥n.  No quisimos esperar.  Decidimos cambiar inmediatamente a VSTS, ya que esto redujo nuestros costos generales para soportar la plataforma y nos proporcion√≥ un control total sobre c√≥mo y qu√© hacemos. </p><br><p>  En el momento del comienzo de los cambios, el equipo de desarrollo ten√≠a experiencia con TFSVC, el c√≥digo de la aplicaci√≥n se almacenaba en dicho repositorio.  Por otro lado, GIT se ha convertido desde hace mucho tiempo en el est√°ndar para la comunidad de TI: el cliente y los consultores externos recomendaron cambiar a este sistema. <br>  Quer√≠amos que el equipo de desarrollo participara en la decisi√≥n de un nuevo sistema de control de versiones y que tomara una decisi√≥n informada. </p><br><p>  Implementamos dos proyectos en VSTS con diferentes repositorios: TFSVC y GIT.  Se defini√≥ un conjunto de escenarios, que se propuso para probar y evaluar la usabilidad en cada uno de los sistemas. </p><br><p>  Entre los escenarios evaluados estaban: </p><br><ul><li>  Crear y fusionar sucursales </li><li>  Organizaci√≥n del trabajo conjunto (en una o diferentes ramas) </li><li>  Cambiar operaciones de cadena (commit, deshacer) </li><li>  Integraci√≥n de terceros </li><li>  La capacidad de continuar trabajando cuando el servidor no est√° disponible. </li></ul><br><p>  Como resultado, como se esperaba, se eligi√≥ GIT, y hasta ahora nadie se ha arrepentido. </p><br><p>  Como proceso, comenzamos a usar GitFlow.  Este proceso proporcion√≥ suficiente control sobre los cambios y permiti√≥ la entrega de versiones, como estamos acostumbrados. </p><br><ol><li>  Defendimos la rama de desarrollo con una pol√≠tica que exig√≠a que todos los cambios pasaran por solicitudes de extracci√≥n. </li><li>  Intentamos adherirnos a la pr√°ctica de "un ticket: una solicitud de extracci√≥n".  Los cambios de diferentes boletos nunca se combinan en un solo cambio.  Intentamos hacer nuestro mejor esfuerzo para probar la rama de caracter√≠sticas para evitar la situaci√≥n con correcciones en los posteriores requakes de extracci√≥n. </li><li>  Cuando se fusiona con el desarrollo, todos los cambios se fusionan en una sola confirmaci√≥n (squash). </li><li>  Las ramas de lanzamiento se crean a partir del desarrollo. </li><li>  Si es necesario, en la rama de lanzamiento, puede agregar los √∫ltimos cambios de forma selectiva (selecci√≥n de cereza) o todos (rebase).  No realizamos la correcci√≥n directamente en la rama de lanzamiento. </li><li>  Despu√©s de implementar la √∫ltima versi√≥n en el producto, pasa al master a trav√©s de la fuerza de empuje (solo unas pocas personas tienen este derecho) </li></ol><br><h3 id="avtomatizaciya-sborki-produkta">  Automatizaci√≥n del montaje del producto. </h3><br><p>  La aplicaci√≥n fue una gran cantidad de ensamblajes, cientos de soluciones.  Como result√≥ durante la auditor√≠a del proceso, todo esto se recopil√≥ por separado y "manualmente". <br>  En la primera etapa, decidimos no rehacer todo desde cero (para no detener la entrega existente), sino "envolver" el ensamblado en un conjunto de scripts de msbuild: un script por componente. <br>  Por lo tanto, r√°pidamente obtuvimos scripts que llevaron a cabo todos los artefactos intermedios necesarios y, al final, el producto terminado. </p><br><p>  Una historia separada es un dise√±o de base de datos.  Desafortunadamente, el sistema contiene varios componentes CLR que no estaban bien estructurados.  Las dependencias no permiten una base de implementaci√≥n simple con contenido.  Por el momento, esto se est√° resolviendo mediante un script previo a la implementaci√≥n. <br>  Adem√°s, debido al panorama desigual del sistema (las versiones de SQL Server 2008 y 2014 se instalaron en diferentes puntos), fue necesario organizar el ensamblaje del proyecto base para .Net versiones 2.0 y 4.0. </p><br><p>  Despu√©s de que todos los scripts estaban listos y probados, se usaron en el script de compilaci√≥n VSTS. </p><br><p>  Inmediatamente antes del inicio del ensamblaje, las versiones de todos los productos se actualizaron a un n√∫mero est√°ndar com√∫n, incluido el n√∫mero de compilaci√≥n.  El mismo n√∫mero se almacen√≥ en el script posterior a la implementaci√≥n.  Por lo tanto, todos los componentes, la base de datos y todas las aplicaciones cliente, salieron consistentes e igualmente numerados. </p><br><h3 id="razvertyvaniya-na-testovyy-stend">  Despliegue al banco de pruebas </h3><br><p>  Una vez que se complet√≥ la versi√≥n inicial del proceso de compilaci√≥n, continuamos con la preparaci√≥n del script de implementaci√≥n. </p><br><p>  Se espera que la base de datos sea la m√°s problem√°tica. </p><br><p>  La implementaci√≥n de una copia "superior" de una base de datos real revel√≥ muchos conflictos entre el ensamblaje y el estado de los sistemas reales: </p><br><ul><li>  Versiones inconsistentes en GIT y en el sistema real </li><li>  Esquemas de bases de datos propiedad de usuarios que se planearon eliminar. </li></ul><br><h3 id="stabilizaciya-processa-razrabotki">  Estabilizaci√≥n del proceso de desarrollo. </h3><br><p>  Por supuesto, es extra√±o hablar de esto, y a√∫n m√°s escribir aqu√≠, pero el cambio m√°s serio para los desarrolladores fue la introducci√≥n del principio "si esto no est√° en git, esto no existe".  Anteriormente, el c√≥digo se compromet√≠a "para informar al cliente".  Ahora, sin esto, es imposible entregar nada. </p><br><p>  Lo m√°s dif√≠cil fue con el c√≥digo de la base de datos.  Despu√©s de cambiar a implementar la base de datos desde el repositorio, a trav√©s del ensamblaje y la implementaci√≥n utilizando sqlpackage, el enfoque "delta" fue reemplazado por el enfoque "estado deseado".  Los paquetes eran cosa del pasado; todo ten√≠a que implementarse autom√°ticamente. </p><br><p>  Pero!  Hasta la transici√≥n completa al nuevo proceso de implementaci√≥n, a√∫n era necesario entregar los cambios.  Y era necesario hacer esto a la antigua usanza: "actualizaciones delta". </p><br><p>  Nos enfrentamos a la tarea de garantizar la coherencia completa y constante del estado del sistema al entregar paquetes delta y el contenido del repositorio. </p><br><p>  Para hacer esto, organizamos el siguiente proceso: </p><br><ol><li>  Regularmente, el c√≥digo del repositorio se recopilaba y desplegaba en una base de datos "modelo" vac√≠a. </li><li>  Sobre la base de la base "modelo", se estaba preparando un autotest especial.  Para cada objeto de la base de datos "modelo", se calcularon las sumas de verificaci√≥n.  La prueba autom√°tica contiene todas estas sumas de verificaci√≥n y al inicio calcula las sumas de verificaci√≥n de los objetos correspondientes de la base de datos "verificada".  Cualquier discrepancia en la composici√≥n de los objetos o sus sumas de verificaci√≥n conduce a una ca√≠da en la prueba. </li><li>  La prueba de "ca√≠da" prohibi√≥ autom√°ticamente la transferencia de paquetes desde el entorno de prueba m√°s abajo en el paisaje.  Dicha integraci√≥n ya se ha implementado en el sistema de transporte anterior. </li></ol><br><p>  Por lo tanto, usando el control autom√°tico, fue posible actualizar relativamente r√°pido el c√≥digo de la base de datos del producto en git y mantenerlo sin esfuerzo adicional por parte del equipo del proyecto.  Al mismo tiempo, los desarrolladores comenzaron a acostumbrarse a la necesidad de confirmar el c√≥digo de manera correcta y oportuna en el repositorio. </p><br><h3 id="razvertyvanie-produkta-na-okruzheniya-integracionnyh-testov">  Despliegue de productos en entornos de prueba de integraci√≥n </h3><br><p>  Despu√©s de completar la etapa anterior, pasamos directamente a implementar la aplicaci√≥n en un entorno de prueba.  Dejamos completamente de aplicar paquetes delta a los sistemas de prueba y pasamos a la implementaci√≥n autom√°tica mediante VSTS. </p><br><p>  A partir de ese momento, todo el equipo comenz√≥ a recibir los primeros frutos de los esfuerzos realizados anteriormente: el despliegue se llev√≥ a cabo sin ning√∫n esfuerzo adicional.  El c√≥digo personalizado se recopil√≥, implement√≥ y prob√≥ autom√°ticamente. </p><br><p>  Desafortunadamente, como lo entendimos m√°s tarde, la "alineaci√≥n del repositorio" llev√≥ al hecho de que ten√≠amos una versi√≥n de la versi√≥n estable de "desarrollo", pero la versi√≥n de "producci√≥n" todav√≠a no estaba disponible.  Y por lo tanto, no hab√≠a nada que ir m√°s all√° del entorno de prueba con QAS y PRD. </p><br><p>  El c√≥digo de la aplicaci√≥n en el lado de la base de datos podr√≠a compararse con el productivo y comprender las diferencias.  No hab√≠a nada con lo que comparar las aplicaciones del cliente: solo hab√≠a una versi√≥n productiva actualizada en forma de un conjunto de archivos ejecutables, y de la que se compilaron era imposible decirlo con certeza. </p><br><h3 id="testirovanie-produkta-kak-rezultata-avtomaticheskoy-sborki">  Probar el producto como resultado del ensamblaje autom√°tico </h3><br><p>  Despu√©s de cambiar el enfoque de ensamblaje, el producto tuvo que someterse a extensas pruebas de regresi√≥n.  Era necesario asegurarse de que la aplicaci√≥n funcionara y que no se perdiera nada. <br>  Durante las pruebas, result√≥ ser m√°s f√°cil con la funcionalidad ubicada en el costado de la base de datos.  Afortunadamente, hemos desarrollado un conjunto significativo de pruebas autom√°ticas que cubren √°reas cr√≠ticas. </p><br><p>  Pero no hubo pruebas para C #, por lo tanto, todo se verific√≥ a mano.  Esta fue una cantidad significativa de trabajo, y la verificaci√≥n tom√≥ algo de tiempo. </p><br><h3 id="pryzhok-very---pilotnoe-razvertyvanie-na-produktiv">  Salto de fe: implementaci√≥n productiva piloto </h3><br><p>  A pesar de las pruebas, la implementaci√≥n en un producto por primera vez fue aterradora. </p><br><p>  Tuvimos suerte: hab√≠amos planeado el pr√≥ximo despliegue del sistema en un nuevo sitio.  Y decidimos usar esta oportunidad para una implementaci√≥n piloto. <br>  Los usuarios no vieron, los posibles errores del nuevo ensamblaje fueron f√°ciles de solucionar, el trabajo productivo real a√∫n no ha comenzado. </p><br><p>  Implementamos el sistema, y ‚Äã‚Äãdurante varias semanas estuvo en el modo de uso preproductivo (baja carga, un cierto patr√≥n de uso que se puede omitir en el producto).  Durante este tiempo, se revelaron varios defectos que se perdieron durante las pruebas.  Se corrigieron a medida que se encontraban, y la nueva versi√≥n se lanz√≥ inmediatamente para su verificaci√≥n. </p><br><p>  Despu√©s del lanzamiento oficial y una semana de soporte posterior al lanzamiento, anunciamos que esta es la primera copia ensamblada y entregada "de una nueva manera". </p><br><p>  Esta versi√≥n del ensamblado se convirti√≥ en la primera versi√≥n estable de la rama maestra, se colg√≥ con etiquetas fisrt_deployment (no pedimos iconos con un hash de la confirmaci√≥n). </p><br><h3 id="masshtabirovanie-razvertyvaniya-na-ves-produktivnyy-landshaft">  Despliegue a escala en todo un paisaje productivo </h3><br><p>  Como dijo James Bond: "La segunda vez es mucho m√°s simple".  Despu√©s del √©xito de la implementaci√≥n piloto, conectamos r√°pidamente las instancias restantes de sistemas de un tipo similar. </p><br><p>  Pero el sistema tiene varios tipos de uso: una funcionalidad se puede usar para un tipo y no en otros casos.  En consecuencia, la funcionalidad probada en la implementaci√≥n del primer tipo no garantiza necesariamente el √©xito para otros casos. </p><br><p>  Para probar la funcionalidad de los tipos de uso restantes, comenzamos a usar proyectos activos que estaban en desarrollo.  La idea era similar y la primera implementaci√≥n: comenzamos a usar ensamblajes autom√°ticos, "desliz√°ndolos" a los usuarios junto con la funcionalidad de dise√±o.  Por lo tanto, los usuarios, trabajando con la versi√≥n "proyecto" del producto, al mismo tiempo verificaron la funcionalidad anterior. </p><br><p>  El escalado en s√≠ revel√≥ problemas t√©cnicos inesperados: </p><br><p>  <em>Paisaje del sistema no homog√©neo</em> <br>  Adem√°s de implementar directamente la aplicaci√≥n, primero tuvimos que asegurarnos de que todo fuera igual en todas partes: versiones .Net, Powershell y m√≥dulos.  Todo tom√≥ una buena cantidad de tiempo. </p><br><p>  <em>Conexi√≥n de red</em> <br>  En algunos sitios, la conexi√≥n de red simplemente no permit√≠a bombear todos los componentes del ensamblaje.  Hubo tiempos de espera, da√±os durante la transferencia.  Verificamos y probamos muchas cosas, no con mucho √©xito. </p><br><p>  Tuve que pensar en la siguiente soluci√≥n: el script de ensamblaje se finaliz√≥ para que todos los resultados se empaquetaran en un gran archivo, que luego se cort√≥ en peque√±os fragmentos (2 mb cada uno).  Finalizamos el escenario de implementaci√≥n para eliminar la concurrencia al descargar artefactos, aceptamos los fragmentos de 2 megabytes y restauramos de ellos lo que ya se puede expandir. </p><br><p>  <em>Conflicto con antivirus</em> <br>  Otro problema extra√±o que encontramos es un conflicto entre el software antivirus y uno de los pasos de implementaci√≥n: cuando todo tipo de archivos "sospechosos", como .js, .dll, se extraen de los archivos de artefactos, el antivirus comienza a mirarlos de cerca.  Y lo m√°s extra√±o es que el antivirus comienza a apresurarse al archivo antes del final del desempaquetado y el proceso de desempaquetado cae con el mensaje "el archivo est√° ocupado por otro proceso".  Si bien estamos luchando con esto, excluir la carpeta local con artefactos del escaneo, no es muy bueno, pero no se nos ocurri√≥ nada m√°s. </p><br><h3 id="uluchshenie-processov">  Mejora de proceso </h3><br><p>      ,    "   " ‚Äî   . </p><br><ul><li>        (service-now.com)  VSTS      Work Items.     develop ‚Äî       . </li><li>  CI   feature .      ‚Äî        </li><li>            "self-service"      </li><li>         ‚Äî     .        ,            . </li><li>      :    , CI/CD        ,      </li><li>         (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> ) </li><li>   -    (   )     .        ‚Äî    ,      . </li><li>     VSTS     ,        ,     . </li></ul><br><h1 id="itogi">  Resumen </h1><br><h3 id="tekuschaya-situaciya">   </h3><br><ul><li>        MS VisualStudio Team Services (   ‚Äî Azure Devops)  .    ‚Äî GIT </li><li>          (/) </li><li>    git / GitFlow    . </li><li>   code review    . </li><li>     CI.       ,    feature ,     . </li><li>          . ,           . </li><li>          (  )    ‚Äî     . -      . </li><li>  -      1 .      -  . </li><li>   ""     . </li></ul><br><h3 id="vremya-po-etapam">    </h3><br><table><thead><tr><th>  No </th><th>   </th><th>  </th></tr></thead><tbody><tr><td>  1 </td><td>    ‚Äî     ,        </td><td> 6  </td></tr><tr><td>  2 </td><td>       ‚Äî       </td><td> 3  </td></tr><tr><td>  3 </td><td>      ‚Äî       </td><td> 5  </td></tr></tbody></table><br><p>   ‚Äî 14  </p><br><p> ,    ,    ,     . </p><br><h3 id="trudozatraty">  </h3><br><p>           ,    ‚Äî  250  * . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427111/">https://habr.com/ru/post/es427111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427097/index.html">La aplicaci√≥n m√≥vil ayuda a detectar la depresi√≥n y otros problemas psicol√≥gicos en las primeras etapas.</a></li>
<li><a href="../es427101/index.html">Google planea cobrar a los fabricantes de dispositivos m√≥viles hasta $ 40 por cada dispositivo vendido</a></li>
<li><a href="../es427105/index.html">Aprender a aprender: la educaci√≥n continua es la clave para la competitividad en la era de la econom√≠a digital</a></li>
<li><a href="../es427107/index.html">Parsim X12 "en la rodilla"</a></li>
<li><a href="../es427109/index.html">Pirater√≠a en el espacio - El delicioso Delta-V y los Steamboats Stealth de hidr√≥geno - Parte 1</a></li>
<li><a href="../es427113/index.html">Matrices de puertas programables: c√≥mo ayudan a las redes 5G</a></li>
<li><a href="../es427117/index.html">Salas de reuniones basadas en asterisco</a></li>
<li><a href="../es427123/index.html">Juego de Turing</a></li>
<li><a href="../es427129/index.html">Inteligencia de amenazas: un enfoque moderno para la seguridad de la informaci√≥n</a></li>
<li><a href="../es427131/index.html">Conocimiento de Audioman√≠a: 15 materiales tem√°ticos sobre producci√≥n, dise√±o, oficinas y negocios.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>