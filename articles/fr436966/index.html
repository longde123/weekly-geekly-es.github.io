<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèæ üöÆ ü¶â Optimisation du site Web pour GooglePage Speed ‚Äã‚Äã(toutes les fonctionnalit√©s sont prises en compte apr√®s sa mise √† jour) Partie 1 üè∑Ô∏è üë≠ ü§±üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article sera int√©ressant pour tous ceux qui ont rencontr√© toutes sortes de probl√®mes apr√®s la mise √† jour de Google PageSpeed ‚Äã‚Äãet les r√©clamation...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation du site Web pour GooglePage Speed ‚Äã‚Äã(toutes les fonctionnalit√©s sont prises en compte apr√®s sa mise √† jour) Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436966/">  Cet article sera int√©ressant pour tous ceux qui ont rencontr√© toutes sortes de probl√®mes apr√®s la mise √† jour de Google PageSpeed ‚Äã‚Äãet les r√©clamations des clients ou du patron, pourquoi la balle est tomb√©e ou il y a eu tellement de commentaires.  Et aussi √† ceux qui font de l'optimisation du site. <br>  Tout d'abord, il convient de mentionner que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet article</a> , √† mon avis, tout est peint de mani√®re tr√®s comp√©tente et accessible. <br><br>  J'ajouterai moi-m√™me plus de conseils <i>pratiques</i> , et il sera √©galement int√©ressant d'√©couter votre point de vue et de voir vos bonnes pratiques. <a name="habracut"></a><br><br>  Je vais √©num√©rer ce dont je vais parler dans cet article: <br><br><ol><li>  CSS et JS <br><ul><li>  connexion de fichier </li><li>  chargement de biblioth√®ques </li><li>  astuces </li></ul><br></li><li>  Les polices <br><ul><li>  connexion de police </li><li>  afficher les polices pendant le chargement de la page </li></ul><br></li><li>  Les images <br><ul><li>  diff√©rents formats (jpg, png, webp, base64) </li><li>  sprite </li></ul></li></ol><br>  Et si vous √™tes rest√© sur cet article jusqu'√† ce moment, alors vous √™tes probablement int√©ress√© (ou le bouton "retour" s'est √©teint pour vous) Ci-dessous est plus d√©taill√© sur chaque article. <br><br><h3>  CSS et JS </h3><br>  <b>Js</b> <br><br><ol><li>  La propri√©t√© <b>async</b> pour les scripts de plug-in (sauf jQuery) sera requise.  Cela vous √©vitera certainement les commentaires de GPSpeed ‚Äã‚Äãsur le chargement de scripts asynchrones. </li><li>  Le conseil est courant, mais il est tr√®s judicieux - essayez d'utiliser au minimum des biblioth√®ques complexes et massives. </li><li>  Il est pr√©f√©rable de t√©l√©charger vos param√®tres de biblioth√®que js (slick, fancybox) ou de petits morceaux de code qui effectuent diff√©rentes t√¢ches sur le serveur avec un seul fichier.  Dans mon cas, le script pour l'envoi de courrier et le masque pour la saisie et l'animation et tout se trouvent dans le m√™me fichier build.js (auquel j'ai √©galement d√©fini <b>async</b> . </li><li>  Ces conseils sont situationnels, c'est-√†-dire, regardez la situation.  Si vous avez une sorte de script en cours d'ex√©cution juste apr√®s avoir ouvert la page sur son premier √©cran, alors il sera plus correct de la connecter s√©par√©ment et de ne pas la donner <b>asynchrone</b> </li></ol><br>  <b>CSS</b> <br><br><ol><li>  Ici un peu plus compliqu√©.  Vous devrez ajouter une telle propri√©t√© √† la balise de <b>lien</b> . <br><br><pre><code class="css hljs">&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">link</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">media</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">none</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">onload</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">if</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">media</span></span>!="<span class="hljs-selector-tag"><span class="hljs-selector-tag">all</span></span>") <span class="hljs-selector-tag"><span class="hljs-selector-tag">media</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">all</span></span>"" <span class="hljs-selector-tag"><span class="hljs-selector-tag">rel</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">stylesheet</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">type</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">text</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">css</span></span>", <span class="hljs-selector-tag"><span class="hljs-selector-tag">href</span></span>= <span class="hljs-selector-tag"><span class="hljs-selector-tag">main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.css</span></span>&gt;</code> </pre> <br>  C'est sous cette forme que vos fichiers css ne seront connect√©s qu'apr√®s l'arborescence DOM.  En gros, c'est la m√™me <b>async</b> pour .css uniquement </li><li>  Des conseils tr√®s importants et efficaces!  Il ajoute 5 √† 10 points garantis.  Vous devez <b>diviser votre main.css en deux fichiers</b> .  Dans le premier, seuls les styles sont charg√©s pour le contenu visible imm√©diatement apr√®s l'ouverture de la page.  Il s'agit de la barre sup√©rieure, de l'en-t√™te, de la premi√®re image, du premier formulaire, etc.  En g√©n√©ral, ce que vous mettez sur le "visage" de votre site.  Dans le second, tout le reste est d√©j√†. </li></ol><br><h3>  Les polices </h3><br>  J'ai d√©couvert une nouvelle propri√©t√© css pour les polices <br><br><pre> <code class="xml hljs">font-display</code> </pre> <br>  Plus pr√©cis√©ment, son param√®tre <b>swap</b> , qui, sans attendre le chargement de votre belle et lourde police, affiche le texte dans le navigateur en utilisant la police int√©gr√©e au m√™me navigateur (par exemple, sans-serif).  Cela supprime imm√©diatement l'une des erreurs de GPSpeed. <br><br>  Cela ressemblera √† ceci <br><br><pre> <code class="xml hljs"> @font-face { font-family: 'FontName'; src: local('FontName'), url('FontName.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; }</code> </pre> <br>  Il existe √©galement un tel script (vous devez connecter fontfaceobserver.js pour son fonctionnement): <br><br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> html = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.documentElement; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sessionStorage.fontsLoaded) { html.classList.add(<span class="hljs-string"><span class="hljs-string">"fonts-loaded"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); script.src = <span class="hljs-string"><span class="hljs-string">"../js/fontfaceobserver.js"</span></span>; script.async = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; script.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> regular = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FontFaceObserver(<span class="hljs-string"><span class="hljs-string">"FontName"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bold = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FontFaceObserver(<span class="hljs-string"><span class="hljs-string">"FontName"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">weight</span></span>: <span class="hljs-string"><span class="hljs-string">"bold"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> light = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FontFaceObserver(<span class="hljs-string"><span class="hljs-string">"FontName"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">weight</span></span>: <span class="hljs-string"><span class="hljs-string">"300"</span></span> }); <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([ regular.load(), bold.load(), light.load() ]).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ html.classList.add(<span class="hljs-string"><span class="hljs-string">"fonts-loaded"</span></span>); sessionStorage.fontsLoaded = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }); }; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  Personnellement, je n'ai pas vraiment aid√©, mais vous essayez, peut-√™tre pouvez-vous mieux le contr√¥ler.  Apr√®s tout, je l'ai trouv√© dans le vaste, et les gens ont dit que cela aide vraiment. <br><br><h3>  Connexion de police </h3><br><ol><li>  Fondamentalement, il existe deux types de connexion - en utilisant un lien (par exemple, pour les polices google, ou localement, sur le serveur. Donc, en ce qui concerne la deuxi√®me m√©thode, elle peut √©galement √™tre divis√©e en 2: un fichier css distinct (en utilisant un lien, nous connectons fonts.css ) et directement via le code (via votre style.css). <br>  Et puisque maintenant nous parlons d'optimiser le site pour GPSpeed, j'√©tais convaincu qu'il valait mieux connecter les polices via votre fichier css principal. </li><li>  Et une autre astuce qui aide est de mettre les fichiers de police (woff, ttf, etc.) √† c√¥t√© de votre fichier css qui le demande.  J'avais auparavant un dossier s√©par√© sur le serveur pour les polices, mais j'ai ensuite d√©plac√© leur vitesse de t√©l√©chargement de polices de 2 fois.  (selon GPSpeed, il m'a fallu 180 ms pour connecter la police Muller auparavant, maintenant 70 √† 90 ms) </li></ol><br><h3>  Images, photos, etc. </h3><br>  Je garantis pour les 2 conseils suivants, ils m'ont aid√© non seulement moi, mais tout le bureau et m√™me mes amis travaillant √† distance. <br><br>  1. T√©l√©chargez absolument toutes les images <b>&lt;img</b> &gt; en utilisant le lazyloading.  Cela ressemblera √† ceci <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yourClass lazy"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../images/image.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Et n'oubliez pas de connecter <b>lazyload.min.js</b> <br><br>  2. Si vous avez de nombreux √©l√©ments svg sur la page, il est pr√©f√©rable de les ajouter <b>avec du code propre</b> , sans utilisation inutile de la balise img.  De plus, svg doit √™tre press√©, par exemple, en utilisant ce site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jakearchibald.github.io/svgomg</a> (pas de publicit√©). <br><br>  3. Trite, mais n'oubliez pas de presser TOUTES les images sur le site.  M√™me ceux qui p√®sent 5 Ko.  Bien que ces 3 ko que vous gagnez n'affecteront en rien la vitesse de t√©l√©chargement, vous vous d√©barrasserez de l'erreur sur GPSpeed ‚Äã‚Äãet vous ajouterez jusqu'√† 10 points. <br><br>  <b>!</b>  Maintenant, le probl√®me est les formats d'image.  √Ä savoir, nous sommes pr√©occup√©s par <i>webp, JPEG 2000, JPEG XR</i> .  En effet, c'est maintenant l'une des extensions GPSpeed ‚Äã‚Äãrecommand√©es.  Comme vous le savez, ils ne sont toujours pas pris en charge par certains navigateurs, dont le tr√®s populaire Mozila Firefox.  Bien qu'ils aient annonc√© qu'en <b>mars,</b> ce format <b>sera enti√®rement pris en charge</b> , nous devons encore attendre un an avant que tous les utilisateurs de ce navigateur soient mis √† jour vers la derni√®re version ... J'ai fouill√© √† travers un tas de sites, un tas de scripts, mais je n'ai rien trouv√© de raisonnable.  Alors maintenant, il est temps que je vous pose une question: utilisez-vous le format webp ou tout autre nouveau format d'image?  Et comment tu fais? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436966/">https://habr.com/ru/post/fr436966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436956/index.html">Sur la question des changements, des signes et de la vitesse MK</a></li>
<li><a href="../fr436958/index.html">Le bot de poker strat√©gique Libratus adapt√© aux simulations militaires</a></li>
<li><a href="../fr436960/index.html">Testez-moi si vous le pouvez. Les d√©veloppeurs YML r√™vent-ils de tester ansible?</a></li>
<li><a href="../fr436962/index.html">Open source populaire - premi√®re partie: 3 outils pour travailler avec des donn√©es</a></li>
<li><a href="../fr436964/index.html">¬´Rostelecom. DataTalks "- un cours de conf√©rences gratuites sur l'ing√©nierie et la gestion des donn√©es</a></li>
<li><a href="../fr436968/index.html">Plan Daimler-BMW. Naturellement, pas sans Tesla</a></li>
<li><a href="../fr436970/index.html">√Ä quoi servent les achats et √† quoi cela ressemble-t-il du point de vue informatique?</a></li>
<li><a href="../fr436972/index.html">Comportements - machine d'√©tat sans maux de t√™te</a></li>
<li><a href="../fr436974/index.html">N'achetez pas de smartphones 5G - au moins dans un avenir proche</a></li>
<li><a href="../fr436976/index.html">Int√©gration de la v√©rification du mot de passe KeePass avec la base de donn√©es des fuites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>