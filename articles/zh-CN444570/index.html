<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👴🏾 🤳🏼 👩🏽‍🌾 2018年C ++项目中的十大错误 📻 🐱 ↗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="自2018年结束以来已经过去了三个月。 对于许多人来说，它几乎是难以察觉的飞行，但是对于我们PVS-Studio的开发人员来说，它却变得非常饱和。 我们努力工作，为扩大静态分析的发展而进行了无所畏惧的斗争，并在用C，C ++，C＃和Java编写的开源项目中寻找新的错误。 我们在本文中为您收集了其中十...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>2018年C ++项目中的十大错误</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/444570/"> 自2018年结束以来已经过去了三个月。 对于许多人来说，它几乎是难以察觉的飞行，但是对于我们PVS-Studio的开发人员来说，它却变得非常饱和。 我们努力工作，为扩大静态分析的发展而进行了无所畏惧的斗争，并在用C，C ++，C＃和Java编写的开源项目中寻找新的错误。 我们在本文中为您收集了其中十个最有趣的内容！ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f7b/72a/054/f7b72a054c744397f8c8c1830253ae2a.png"></div><br><a name="habracut"></a><br> 我们使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio</a>静态代码分析器寻找有趣的地方。 它可以检测以上述语言编写的代码中的错误和潜在漏洞。 <br><br> 如果您想自己寻找错误，可以随时下载并尝试使用我们的分析仪。 我们为学生和热心的程序员提供了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">免费的</a>分析仪<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">版本，</a>为开源项目的开发人员提供了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">免费许可证</a> ，还为所有人提供了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">试用版</a> 。 谁知道，也许到明年您可以跻身前十？  :) <br><br>  <b>注意：我</b>建议读者检查一下自己，并在查看分析仪警告之前，尝试自己识别异常情况。 您会发现多少错误？ <br><br><h2> 第十名 </h2><br> 来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">再次进入太空：独角兽恒星如何造访</a> <br><br> 检查Stellarium虚拟天文馆时发现此错误。 <br><br> 上面的代码片段虽然很小，但充满了一个相当棘手的错误： <br><br><pre><code class="cpp hljs">Plane::Plane(Vec3f &amp;v1, Vec3f &amp;v2, Vec3f &amp;v3) : distance(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>), sDistance(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>) { Plane(v1, v2, v3, SPolygon::CCW); }</code> </pre> <br> 找到了吗 <br><br>  <b>PVS-Studio警告：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V603</a>已创建对象，但未使用该对象。 如果要调用构造函数，则应使用“ this-&gt; Plane :: Plane（....）”。 平面cpp 29 <br><br> 该代码的作者希望使用嵌套在主对象中的另一个构造函数来初始化对象的部分字段。 的确，他只设法创建了一个临时对象，该对象在离开可见区域时会被破坏。 因此，对象的几个字段将保持未初始化。 <br><br> 不应使用嵌套的构造函数调用，而应使用C ++ 11中引入的委托构造函数。 例如，您可以这样做： <br><br><pre> <code class="cpp hljs">Plane::Plane(Vec3f&amp; v1, Vec3f&amp; v2, Vec3f&amp; v3) : Plane(v1, v2, v3, SPolygon::CCW) { distance = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; sDistance = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; }</code> </pre> <br> 然后，所有必填字段都将正确初始化。 这不是很好吗？ <br><br><h2> 第九名 </h2><br> 来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Perl 5：如何隐藏宏错误</a> <br><br> 在第9位标榜Perl 5源代码中的一个值得注意的宏。 <br><br> 为了收集撰写本文的错误，我的同事Svyatoslav遇到了分析器发出的有关使用宏的警告。 这是： <br><br><pre> <code class="cpp hljs">PP(pp_match) { .... MgBYTEPOS_set(mg, TARG, truebase, RXp_OFFS(prog)[<span class="hljs-number"><span class="hljs-number">0</span></span>].end); .... }</code> </pre> <br> 为了找出问题所在，Svyatoslav进行了更深入的挖掘。 他打开了宏定义，发现它包含更多嵌套的宏，其中一些还具有嵌套的宏。 很难弄清楚，我不得不使用预处理文件。 但是，a，这没有帮助。 代替上一行代码，Svyatoslav发现了这一点： <br><br><pre> <code class="cpp hljs">(((targ)-&gt;sv_flags &amp; <span class="hljs-number"><span class="hljs-number">0x00000400</span></span>) &amp;&amp; (!((targ)-&gt;sv_flags &amp; <span class="hljs-number"><span class="hljs-number">0x00200000</span></span>) || S_sv_only_taint_gmagic(targ)) ? (mg)-&gt;mg_len = ((prog-&gt;offs)[<span class="hljs-number"><span class="hljs-number">0</span></span>].end), (mg)-&gt;mg_flags |= <span class="hljs-number"><span class="hljs-number">0x40</span></span> : ((mg)-&gt;mg_len = (((targ)-&gt;sv_flags &amp; <span class="hljs-number"><span class="hljs-number">0x20000000</span></span>) &amp;&amp; !__builtin_expect(((((PL_curcop)-&gt;cop_hints + <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x00000008</span></span>) ? (<span class="hljs-keyword"><span class="hljs-keyword">_Bool</span></span>)<span class="hljs-number"><span class="hljs-number">1</span></span> :(<span class="hljs-keyword"><span class="hljs-keyword">_Bool</span></span>)<span class="hljs-number"><span class="hljs-number">0</span></span>),(<span class="hljs-number"><span class="hljs-number">0</span></span>))) ? (<span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span>)Perl_utf8_length( (U8 *)(truebase), (U8 *)(truebase)+((prog-&gt;offs)[<span class="hljs-number"><span class="hljs-number">0</span></span>].end)) : (<span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span>)((prog-&gt;offs)[<span class="hljs-number"><span class="hljs-number">0</span></span>].end), (mg)-&gt;mg_flags &amp;= ~<span class="hljs-number"><span class="hljs-number">0x40</span></span>));</code> </pre> <br>  <b>警告PVS-Studio：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V502</a>也许“？：”操作符的工作方式与预期的不同。  '？：'运算符的优先级低于'&amp;&amp;'运算符。  pp_hot.c 3036 <br><br> 我认为用我的眼睛很难发现这样的错误。 老实说，我们对代码进行了长时间的思考，得出的结论是实际上这里没有错误。 但是，无论如何，这是不可读代码的一个相当有趣的示例。 <br><br> 宏被认为是邪恶的。 当然，有时候它们是必不可少的，但是如果您可以将宏替换为函数，则一定要这样做。 <br><br> 嵌套宏特别令人生厌。 不仅因为它们难以理解，而且还因为它们会带来不可预测的结果。 如果宏的创建者不小心在该宏中犯了一个错误，则比在函数中查找它要困难得多。 <br><br><h2> 第八名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">铬：其他错误</a> <br><br> 以下示例摘自有关Chromium项目分析的一系列文章。 她在WebRTC库中报道自己。 <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;SdpVideoFormat&gt; StereoDecoderFactory::GetSupportedFormats() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;SdpVideoFormat&gt; formats = ....; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; format : formats) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cricket::CodecNamesEq(....)) { .... formats.push_back(stereo_format); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> formats; }</code> </pre> <br>  <b>PVS-Studio警告：</b>在基于范围的for循环中使用的'formats'容器的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V789</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-672</a>迭代器在调用'push_back'函数时变得无效。  stereocodecfactory.cc 89 <br><br> 错误是<i>格式</i>向量的大小在基于范围的for循环内更改。 基于范围的循环基于迭代器，因此在此类循环中调整容器大小可能会导致这些迭代器无效。 <br><br> 如果使用显式迭代器重写循环，则该错误将继续存在。 因此，为清楚起见，您可以提供以下代码： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> format = begin(formats), __end = end(formats); format != __end; ++format) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cricket::CodecNamesEq(....)) { .... formats.push_back(stereo_format); } }</code> </pre> <br> 例如，当使用<i>push_back</i>方法时，可以释放向量-然后迭代器将指向无效的内存区域。 <br><br> 为避免此类错误，您应遵守以下规则：切勿在循环内调整容器的大小，循环的条件与该容器相关。 这适用于基于范围的循环和使用迭代器的循环。 您可以在有关StackOverflow的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">讨论中</a>了解哪些操作可能导致迭代器失效。 <br><br><h2> 第七名 </h2><br> 来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Godot：定期使用静态代码分析器</a> <br><br> 视频游戏行业的第一个示例将是我们在Godot游戏引擎中发现的代码片段。 您可能需要大汗淋漓才能用眼睛发现错误，但是我确信我们经验丰富的读者可以解决这个问题： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AnimationNodeBlendSpace1D::add_blend_point( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Ref&lt;AnimationRootNode&gt; &amp;p_node, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> p_position, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_at_index) { ERR_FAIL_COND(blend_points_used &gt;= MAX_BLEND_POINTS); ERR_FAIL_COND(p_node.is_null()); ERR_FAIL_COND(p_at_index &lt; <span class="hljs-number"><span class="hljs-number">-1</span></span> || p_at_index &gt; blend_points_used); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_at_index == <span class="hljs-number"><span class="hljs-number">-1</span></span> || p_at_index == blend_points_used) { p_at_index = blend_points_used; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = blend_points_used - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt; p_at_index; i++) { blend_points[i] = blend_points[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]; } } .... }</code> </pre> <br>  <b>PVS-Studio警告：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V621</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-835</a>考虑检查“ for”操作员。 循环有可能执行不正确或根本不执行。  animation_blend_space_1d.cpp 113 <br><br> 让我们更详细地考虑循环的条件。 计数器变量使用值<i>blend_points_used-1</i>初始化。 同时，根据前两次检查（在<i>ERR_FAIL_COND</i>和<i>if中</i> ），可以清楚地看到，在执行循环时， <i>blend_points_used</i>将始终大于<i>p_at_index</i> 。 因此，循环条件将始终为真，否则将根本不会执行循环。 <br><br> 如果<i>blend_points_used为1 == p_at_index</i> ，则不执行循环。 <br><br> 在所有其他情况下，校验<i>i&gt; p_at_index</i>将始终为true，因为计数器<i>i</i>在循环的每次迭代中都会增加。 <br><br> 似乎周期将永远持续下去，但事实并非如此。 <br><br> 首先，变量<i>i</i>会出现整数溢出，这是未定义的行为。 因此，仅仅依靠它是不值得的。 <br><br> 如果<i>我</i>的类型为<i>unsigned int</i> ，则在计数器达到最大可能值之后， <i>i ++</i>运算符会将其变为<i>0</i> 。 此行为由标准定义，称为“无符号包装”。 但是，您应该意识到，使用这种机制<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">也不是一个好主意</a> 。 <br><br> 那是第一，但是第二！ 事实是它甚至不会达到整数溢出。 阵列出国之前在哪里。 这意味着将尝试访问为该阵列分配的块之外的存储区域。 这也是模糊的行为。 经典示例：） <br><br> 为了更容易避免此类错误，我只能提出几点建议： <br><br><ol><li> 编写更简单，更直观的代码 </li><li> 进行更彻底的代码审查，并为新编写的代码编写更多的测试 </li><li> 使用静态分析仪；） </li></ol><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e24/4d8/f8b/e244d8f8b0062e5c822e3630b50b26bc.png"></div><br><h2> 第六名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">亚马逊伐木场：灵魂的呼唤</a> <br><br> 来自gamedev行业的另一个示例，即来自Amazon Lumberyard AAA引擎的源代码。 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TranslateVariableNameByOperandType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Igor: yet another Qualcomm's special case // GLSL compiler thinks that -2147483648 is // an integer overflow which is not if (*((int*)(&amp;psOperand-&gt;afImmediates[0])) == 2147483648) { bformata(glsl, "-2147483647-1"); } else { // Igor: this is expected to fix // paranoid compiler checks such as Qualcomm's if (*((unsigned int*)(&amp;psOperand-&gt;afImmediates[0])) &gt;= 2147483648) { bformata(glsl, "%d", *((int*)(&amp;psOperand-&gt;afImmediates[0]))); } else { bformata(glsl, "%d", *((int*)(&amp;psOperand-&gt;afImmediates[0]))); } } bcatcstr(glsl, ")"); .... }</span></span></code> </pre> <br>  <b>PVS-Studio警告：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V523'then</a> '语句等效于'else'语句。  toglsloperand.c 700 <br><br>  Amazon Lumberyard正在开发为跨平台引擎。 因此，开发人员正在尝试支持尽可能多的编译器。 正如评论所告知，程序员Igor遇到了Qualcomm编译器。 <br><br> 不知道Igor是否能够完成他的任务并应对编译器的“偏执”检查，但是他留下了一个非常奇怪的代码。 奇怪的是， <i>if语句的</i> <i>then-</i>和<i>else-</i>分支都包含完全相同的代码。 这种错误很可能是由于草率复制粘贴而造成的。 <br><br> 我什至不知道这里有什么建议。 因此，我只希望Amazon Lumberyard开发人员能够成功解决错误，并祝程序员Igor一切顺利！ <br><br><h2> 第五名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio分析仪再一次比一个人更专注</a> <br><br> 以下示例发生了一个有趣的故事。 我的同事Andrei Karpov正在准备有关Qt框架的下一个测试的文章。 在编写值得注意的错误的过程中，他遇到了分析仪警告，他认为这是错误的。 以下是相关的代码段和警告： <br><br><pre> <code class="cpp hljs">QWindowsCursor::CursorState QWindowsCursor::cursorState() { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> { cursorShowing = <span class="hljs-number"><span class="hljs-number">0x1</span></span>, cursorSuppressed = <span class="hljs-number"><span class="hljs-number">0x2</span></span> }; CURSORINFO cursorInfo; cursorInfo.cbSize = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(CURSORINFO); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GetCursorInfo(&amp;cursorInfo)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cursorInfo.flags &amp; CursorShowing) <span class="hljs-comment"><span class="hljs-comment">// &lt;= V616 .... }</span></span></code> </pre> <br>  <b>PVS-Studio警告：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V616</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-480</a>在按位操作中使用名为“ CursorShowing”的常量，值为0。  qwindowscursor.cpp 669 <br><br> 也就是说，PVS-Studio在一个显然没有错误的地方发誓！  <i>CursorShowing</i>常量不能为<i>0</i> ，因为从字面上看，它上面的几行已初始化为<i>1</i> 。 <br><br> 由于使用了不稳定版本的分析仪进行验证，Andrei怀疑警告的正确性。 他多次仔细检查了这段代码，但仍然没有发现错误。 结果，他将这种误报写入Bugtracker，以便其他同事可以纠正这种情况。 <br><br> 只有经过详细的分析，才能清楚地看到PVS-Studio再次比一个人更专注。 将值<i>0x1</i>分配给命名常量<i>cursorShowing</i> ，并且位常量操作“和”涉及命名常量<i>CursorShowing</i> 。 这些是完全不同的常数，因为第一个以小写字母开头，第二个以大写字母开头。 <br><br> 该代码编译成功，因为<i>QWindowsCursor</i>类确实包含一个具有该名称的常量。 这是她的定义： <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QWindowsCursor</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QPlatformCursor { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CursorState { CursorShowing, CursorHidden, CursorSuppressed }; .... }</code> </pre> <br> 如果未显式分配命名的枚举常量，则默认情况下将对其进行初始化。 由于<i>CursorShowing</i>是枚举的第一个元素，因此它将被设置为<i>0</i> 。 <br><br> 为了防止此类错误，您不应给实体命名太相似的名称。 如果这些实体属于同一类型或可以隐式地彼此转换，则应特别遵循此规则。 确实，在这种情况下，几乎不可能通过肉眼检测到错误，并且错误的代码将成功编译并愉快地存在于您的项目中。 <br><br><h2> 第四名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们脚踏实地，处理输入数据</a> <br><br> 我们正在进入决赛前三名，接下来是来自FreeSWITCH项目的错误。 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">basic_gets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *cnt)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = getchar(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fgets(command_buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(command_buf) - <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>) != command_buf) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } command_buf[<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(command_buf)<span class="hljs-number"><span class="hljs-number">-1</span></span>] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* remove endline */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } .... }</code> </pre> <br>  <b>PVS-Studio警告：</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V1010</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-20</a>索引：“ strlen（command_buf）”中使用了未经检查的污染数据。 <br><br> 分析器警告表达式<i>strlen（command_buf）-1</i>使用未经验证的数据。 确实是这样：如果从C语言字符串（包含单个字符-'\ 0'）的角度来看， <i>command_buf</i>变为空，则<i>strlen（command_buf）</i>将返回<i>0</i> 。 在这种情况下，将<i>调用command_buf [-1]</i> ，它表示未定义的行为。 麻烦了！ <br><br> 错误的根本<b>原因</b>甚至不是错误发生的<b>原因</b> ，而是错误的发生方式。 该错误是您可以自己“触摸”并重现的那些令人愉快的示例之一。 您可以启动FreeSwitch，执行一些操作以导致执行上述代码部分，并向程序传递空行以供输入。 <br><br> 结果，一挥手腕，一个工作程序就变成了（不，不是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">优雅的短裤</a> ）不工作的程序！ 有关如何重现此错误的详细信息，可以在上面的链接的源文章中找到，但现在我将给出明确的结果： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jSYJirPIK8E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> 请记住，输入可以是任何内容，您应该始终对其进行检查。 这样分析仪就不会发誓，程序将更加可靠。 <br><br> 现在是时候与赢家打交道了：我们正在进入决赛！ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c7/d5f/39e/2c7d5f39edfa5e07639ef95520889b09.png"></div><br><br><h2> 第三名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NCBI基因组工作台：濒危研究</a> <br><br> 这三个获奖者将通过NCBI Genome Workbench项目中的一段代码揭晓，该项目是研究和分析基因数据的一组工具。 尽管没有必要成为转基因的超人来在这里发现错误，但仍有很多人意识到这种可能性。 <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Crypt a given password using schema required for NTLMv1 authentication * @param passwd clear text domain password * @param challenge challenge data given by server * @param flags NTLM flags from server side * @param answer buffer where to store crypted password */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tds_answer_challenge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ntlm_v == <span class="hljs-number"><span class="hljs-number">1</span></span>) { .... <span class="hljs-comment"><span class="hljs-comment">/* with security is best be pedantic */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(hash, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(hash)); <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(passwd_buf, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(passwd_buf)); ... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... } }</code> </pre> <br>  <b>PVS-Studio警告：</b> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V597</a>编译器可以删除“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">内存集</a> ”函数调用，该函数调用用于刷新“哈希”缓冲区。  memset_s（）函数应用于擦除私有数据。  Challenge.c 365 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V597</a>编译器可以删除“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">内存集</a> ”函数调用，该函数调用用于刷新“ passwd_buf”缓冲区。  memset_s（）函数应用于擦除私有数据。 第366章 </li></ul><br> 设法找到一个错误？ 如果是这样，那么您-做得好！..还是仍然是转基因超人。 <br><br> 事实是，现代的优化编译器可以做很多事情来使汇编程序更快地工作。 特别是，编译器能够跟踪传递给<i>memset</i>的缓冲区在其他任何地方都没有使用。 <br><br> 在这种情况下，他们可以删除“不必要的” <i>内存集</i>调用，并有权这样做。 然后，可以将存储重要数据的缓冲区保留在内存中，使攻击者感到高兴。 <br><br> 在这种背景下，“安全有学问的知识”评论看起来更有趣。 从针对该项目发出的警告数量很少来看，开发人员非常努力地谨慎并编写安全的代码。 但是，如我们所见，跳过此安全漏洞非常简单。 根据“普通弱点枚举”，缺陷分类为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CWE-14</a> ：编译器清除代码以清除缓冲区。 <br><br> 要清除内存清除，请使用<i>memset_s（）</i>函数。 它不仅比<i>memset（）</i>安全，而且不能被编译器“忽略”。 <br><br><h2> 第二名 </h2><br> 资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PVS-Studio如何比三位半程序员更专心</a> <br><br> 我们的一位客户将这顶银牌获得者送给了我们。 他确信分析仪会产生错误的警告。 <br><br> 尤金收到了这封信，对其进行了简短的扫描，然后将其发送给了斯维亚托斯拉夫。  Svyatoslav深思熟虑地查看了客户端发送的代码部分，并认为：“分析器会如此公然错误吗？” 因此，他去了安德烈咨询。 他还检查了该站点并决定：实际上，分析仪给出了误报。 <br><br> 您能做什么，您需要修复它。 而且只有当Svyatoslav开始制作综合示例以使该任务正式成为Bugtracker时，他才意识到发生了什么。 <br><br> 错误确实存在于代码中，但是没有一个程序员可以检测到它们。 老实说，本文的作者也没有成功。 <br><br> 而且尽管分析仪清楚地在错误的地方发出警告！ <br><br> 你能找到一个狡猾的错误吗？ 测试自己的警惕性和专心程度。 <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/002/b12/75b/002b1275be55e7c96131de9f44d02ef7.png"></div><br>  <b>PVS-Studio警告：</b> <ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a>条件表达式的一部分始终为false：（ch&gt; = 0x0FF21）。 解码w.cpp 525 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a>条件表达式的一部分始终为true：（ch &lt;= 0x0FF3A）。 解码w.cpp 525 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a>条件表达式的一部分始终为false：（ch&gt; = 0x0FF41）。 解码w.cpp 525 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a>条件表达式的一部分始终为true：（ch &lt;= 0x0FF5A）。 解码w.cpp 525 </li></ul><br> 如果成功，您将不会得到我的尊重！ <br><br> 错误在于以下事实：逻辑否定运算符（！）不适用于整个条件，而仅适用于其第一个子表达式： <br><br><pre> <code class="cpp hljs">!((ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span>) &amp;&amp; (ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>))</code> </pre> <br> 如果满足此条件，则变量<i>ch</i>的值位于间隔[0x0FF10 ... 0x0FF19]中。 因此，这四个进一步的比较不再有意义：它们将始终为真或假。 <br><br> 为避免此类错误，值得遵循一些规则。 首先，将代码与表格对齐非常方便和清晰。 其次，不要用括号重载表达式。 例如，此代码可以这样重写： <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isLetterOrDigit = (ch &gt;= <span class="hljs-number"><span class="hljs-number">0x0FF10</span></span> &amp;&amp; ch &lt;= <span class="hljs-number"><span class="hljs-number">0x0FF19</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 0..9 || (ch &gt;= 0x0FF21 &amp;&amp; ch &lt;= 0x0FF3A) // A..Z || (ch &gt;= 0x0FF41 &amp;&amp; ch &lt;= 0x0FF5A); // a..z if (!isLetterOrDigit)</span></span></code> </pre> <br> 然后，首先，括号的数量变得更小，其次，增加了“捕捉”眼睛犯下的错误的可能性。 <br><br> 而现在-樱桃：我们正迈向第一！ <br><br><h2> 第一名 </h2><br> 来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">System in shock：传说中的System Shock源代码中有趣的错误</a> <br><br> 因此，我们今天的冠军入围者是传奇的System Shock的一个错误！ 这款于1994年发行的游戏成为了Dead Space，BioShock和Deus Ex等标志性游戏的起源和启发。 <br><br> 但是首先，我必须承认一些事情。 我现在向您显示的内容不包含任何错误。 总的来说，它甚至都不是代码片段，但我忍不住不与您分享！ <br><br> 事实是，在分析游戏源代码的过程中，我的同事Victoria发现了许多有趣的评论。 突然间到处都是在开玩笑和讽刺的话，甚至是经文： <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// I'll give you fish, I'll give you candy, // I'll give you, everything I have in my hand // that kid from the wrong side came over my house again, // decapitated all my dolls // and if you bore me, you lose your soul to me // - "Gepetto", Belly, _Star_ // And here, ladies and gentlemen, // is a celebration of C and C++ and their untamed passion... // ================== TerrainData terrain_info; // Now the actual stuff... // ======================= // this is all outrageously horrible, as we dont know what // we really need to deal with here // And if you thought the hack for papers was bad, // wait until you see the one for datas... - X // Returns whether or not in the humble opinion of the // sound system, the sample should be politely obliterated // out of existence // it's a wonderful world, with a lot of strange men // who are standing around, and they all wearing towels</span></span></code> </pre><br> 对于我们说俄语的读者，我做了大约免费的翻译： <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,    , //    ,       //      //      //     //     ,      // - "Gepetto", Belly, _Star_ //  ,   , //    C  C++     // ================== TerrainData terrain_info; //    ... // ======================= //    ,     , //         //    ,          //      ,      ... - X //       , //         //   ,     //   ,    </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些评论是在90年代初由游戏开发人员留下的。顺便说一句，System Shock的首席设计师Doug Church也在编写代码。谁知道，也许其中任何评论都是他本人亲自写的？我希望关于毛巾的男人-这不是他的事:)</font></font><br><br><h2> 结论 </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，我要感谢</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我的同事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寻找新的错误并撰写有关这些错误的文章。谢谢大家！没有你，这篇文章不会变得那么有趣。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我还想谈一谈我们的成就，因为整整一年，我们从事的不仅仅是发现错误。我们还开发并改进了分析仪，因此它发生了重大变化。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，我们增加了对几个新编译器的支持，并扩展了诊断规则的列表。我们还为</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MISRA C和MISRA C ++标准</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了初步支持</font><font style="vertical-align: inherit;">。最重要且最耗时的创新是对新语言的支持。是的，现在我们可以分析</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码了</font><font style="vertical-align: inherit;">！我们已经</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新了图标</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另外，我还要感谢我们的读者。</font><font style="vertical-align: inherit;">感谢您阅读我们的文章并写信给我们！</font><font style="vertical-align: inherit;">您的反馈意见对我们非常重要。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此基础上，我们结束了2018年的十大C ++错误。</font><font style="vertical-align: inherit;">您最喜欢哪个地方，为什么？</font><font style="vertical-align: inherit;">您在2018年遇到过有趣的例子吗？</font><font style="vertical-align: inherit;">在评论中告诉我们！</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直到下一次！</font></font><br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想与讲英语的读者分享这篇文章，请使用翻译链接：George Gribkov。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018年发现的C ++项目的十大bug</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN444570/">https://habr.com/ru/post/zh-CN444570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN444560/index.html">我们邀请您参加“云。 Fashion Trends” 2019年3月26日</a></li>
<li><a href="../zh-CN444562/index.html">GHIDRA的现代化。 朗姆Sega Mega Drive装载机</a></li>
<li><a href="../zh-CN444564/index.html">具有心理模型的数字产品开发</a></li>
<li><a href="../zh-CN444566/index.html">西科斯基与一名男子一起进行了无人直升机的演示</a></li>
<li><a href="../zh-CN444568/index.html">2018年发现的C ++项目的十大bug</a></li>
<li><a href="../zh-CN444572/index.html">LED闪烁</a></li>
<li><a href="../zh-CN444574/index.html">微型Macintosh Plus</a></li>
<li><a href="../zh-CN444576/index.html">类型系统如何改善您的JavaScript代码</a></li>
<li><a href="../zh-CN444578/index.html">演讲嘉宾2019顶级3D博览会：3dbio的Yousef Hesuani-器官和组织的3D打印</a></li>
<li><a href="../zh-CN444580/index.html">基础设施FBO谢列梅捷沃：轻型飞机如何准备飞行</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>