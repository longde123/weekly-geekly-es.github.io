<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÄ üêΩ üëù Reduzca las copias de seguridad en un 99.5% con hashget ü§µüèº üå∫ üëπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="hashget es un deduplicador gratuito basado en opera, una utilidad similar a un archivador, que puede reducir significativamente el tama√±o de las copia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reduzca las copias de seguridad en un 99.5% con hashget</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454826/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hashget</a> es un <em>deduplicador</em> gratuito basado en opera, una utilidad similar a un archivador, que puede reducir significativamente el tama√±o de las copias de seguridad, as√≠ como organizar esquemas de copia de seguridad incrementales y diferenciales y m√°s. </p><br><p>  Este es un art√≠culo de revisi√≥n para describir las caracter√≠sticas.  El uso del propio hashget (bastante simple) se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">README</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wiki</a> del proyecto. </p><br><h1 id="sravnenie">  Comparaci√≥n </h1><br><p>  De acuerdo con la ley del g√©nero, comenzar√© de inmediato con la intriga, comparando los resultados: </p><br><div class="scrollable-table"><table><thead><tr><th>  Muestra de datos </th><th>  tama√±o desempaquetado </th><th>  .tar.gz </th><th>  hashget .tar.gz </th></tr></thead><tbody><tr><td>  Wordpress-5.1.1 </td><td>  43 Mb </td><td>  11 Mb (26%) </td><td>  155 Kb ( <strong>0.3%</strong> ) </td></tr><tr><td>  Kernel de Linux 5.0.4 </td><td>  934 Mb </td><td>  161 Mb (20%) </td><td>  4,7 Mb ( <strong>0,5%</strong> ) </td></tr><tr><td>  Debian 9 (LAMP) LXC VM </td><td>  724 Mb </td><td>  165 Mb (23%) </td><td>  4,1 Mb ( <strong>0,5%</strong> ) </td></tr></tbody></table></div><br><h1 id="predystoriya-kakim-dolzhen-byt-idealnyy-i-effektivnyy-bekap">  Antecedentes de lo que deber√≠a ser una copia de seguridad ideal y efectiva </h1><br><p>  Cada vez que hac√≠a una copia de seguridad de una m√°quina virtual reci√©n creada, me persegu√≠a la sensaci√≥n de que estaba haciendo algo mal.  ¬øPor qu√© obtengo una copia de seguridad pesada de un sistema en el que mi invaluable creatividad imperecedera es un index.html de una sola l√≠nea con el texto "Hola mundo"? </p><a name="habracut"></a><br><p>  ¬øPor qu√© hay 16 megabytes / usr / sbin / mysqld en mi copia de seguridad?  ¬øEs realmente en este mundo que tengo el honor de almacenar este archivo importante, y si no puedo hacerlo, se perder√° para la humanidad?  Lo m√°s probable es que no.  Se almacena en servidores Debian altamente confiables (cuya confiabilidad y continuidad no se pueden comparar con lo que puedo proporcionar), as√≠ como en copias de seguridad (millones de ellas) de otros administradores.  ¬øRealmente necesitamos crear m√°s de 10,000,000 de la primera copia de este importante archivo para aumentar la confiabilidad? </p><br><p> En general, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hashget</a> resuelve este problema.  Al empacar, crea una copia de seguridad muy peque√±a.  Al desempacar: un sistema completamente desempaquetado, similar al que ser√≠a con <code>tar -c</code> / <code>tar -x</code> .  (En otras palabras, este es un embalaje sin p√©rdidas) </p><br><h1 id="kak-rabotaet-hashget">  C√≥mo funciona el hashget </h1><br><p>  Hashget tiene los conceptos de paquete y HashPackage, con su ayuda realiza deduplicaci√≥n. </p><br><p>  <em>Paquete</em>  Un archivo (generalmente un archivo .deb o .tar.gz) que se puede descargar de manera confiable desde la red y del que se pueden obtener uno o m√°s archivos. </p><br><p>  <em>HashPackage</em> es un peque√±o archivo JSON que representa el paquete, que incluye la URL del paquete y la suma hash (sha256) de los archivos que contiene.  Por ejemplo, para el paquete mariadb-server-core de 5 megabytes de tama√±o, el tama√±o del paquete hash es de solo 6 kilobytes.  Unas mil veces m√°s peque√±o. </p><br><p>  <em>Deduplicaci√≥n</em> : creaci√≥n de un archivo sin archivos duplicados (si el deduplicador sabe d√≥nde se puede descargar el paquete original, reduce los duplicados del archivo). </p><br><h2 id="zapakovka">  Embalaje </h2><br><p>  Al empaquetar, se ven todos los archivos del directorio empaquetado, se consideran sus sumas hash y, si la suma se encuentra en uno de los HashPackage conocidos, los metadatos del archivo (nombre, hash, permisos, etc.) se guardan en un archivo especial .hashget-restore.json, que tambi√©n se incluir√° en el archivo. </p><br><p>  El empaque en s√≠ en el caso m√°s simple no parece m√°s complicado que el alquitr√°n: </p><br><pre> <code class="plaintext hljs">hashget -zf /tmp/mybackup.tar.gz --pack /path/to/data</code> </pre> <br><h2 id="raspakovka">  Desempacando </h2><br><p>  El desempaque se realiza en dos etapas.  Primero, el desempaque de alquitr√°n habitual: </p><br><pre> <code class="plaintext hljs">tar -xf mybackup.tar.gz -C /path/to/data</code> </pre> <br><p>  luego restaurar desde la red: </p><br><pre> <code class="plaintext hljs">hashget -u /path/to/data</code> </pre> <br><p>  Al recuperarse, el hashget lee el archivo .hashget-restore.json, descarga los paquetes necesarios, los descomprime y extrae los archivos necesarios, configur√°ndolos en las rutas correctas, con el propietario / grupo / permisos necesarios. </p><br><h1 id="bolee-slozhnye-veschi">  Cosas m√°s complicadas </h1><br><p>  Lo que se describe arriba ya es suficiente para aquellos que "quieren como alquitr√°n, pero para empacar mi Debian en 4 megabytes".  M√°s adelante veremos cosas m√°s dif√≠ciles. </p><br><h2 id="indeksirovanie">  Indexaci√≥n </h2><br><p>  Si un hashget no ten√≠a un solo HashPackage, entonces simplemente no podr√≠a deduplicar nada. </p><br><p>  Tambi√©n puede crear un HashPackage manualmente (simplemente: <code>hashget --submit https://wordpress.org/wordpress-5.1.1.zip -p my</code> ), pero hay una manera m√°s conveniente. </p><br><p>  Para obtener el hashpackage que necesita, hay un paso de <em>indexaci√≥n</em> (se realiza autom√°ticamente cuando se <code>--pack</code> comando <code>--pack</code> ) y <em>heur√≠stica</em> .  Al indexar, el hashget "alimenta" cada archivo encontrado a todas las heur√≠sticas existentes que le interesan.  La heur√≠stica puede indexar cualquier paquete para crear un HashPackage. </p><br><p>  Por ejemplo, una heur√≠stica de Debian adora el archivo / var / lib / dpkg / status y detecta los paquetes debian instalados, y si no est√°n indexados (HashPackage no se ha creado para ellos), los descarga e indexa.  El resultado es un efecto muy agradable: el hashget siempre deduplicar√° efectivamente los sistemas operativos Debian, incluso si tienen los paquetes m√°s recientes. </p><br><h2 id="fayly-podskazki-hinty">  Archivos de sugerencias </h2><br><p>  Si su red utiliza alg√∫n tipo de paquete propietario o un paquete p√∫blico que no est√° incluido en la heur√≠stica de hashget, puede agregarle un simple archivo de sugerencia hashget-hint.json de la siguiente manera: </p><br><pre> <code class="plaintext hljs">{ "project": "wordpress.org", "url": "https://ru.wordpress.org/wordpress-5.1.1-ru_RU.zip" }</code> </pre> <br><p>  Adem√°s, cada vez que se crea el archivo, el paquete se indexar√° (si no es as√≠ anteriormente) y los archivos del paquete se deduplicar√°n del archivo.  No se necesita programaci√≥n, todo se puede hacer desde vim y guardar en cada copia de seguridad.  Tenga en cuenta que, gracias al enfoque mediante hashes, si algunos archivos del paquete se cambian localmente (por ejemplo, se cambia el archivo de configuraci√≥n), los archivos modificados se guardar√°n en el archivo "tal cual" y no se reducir√°n. </p><br><p>  Si algunos de sus propios paquetes se actualizan peri√≥dicamente, pero los cambios no son muy grandes, solo puede insinuar las versiones principales.  Por ejemplo, en la versi√≥n 1.0 hicieron una pista indicando mypackage-1.0.tar.gz, y ser√° completamente deduplicada, luego lanzaron la versi√≥n 1.1, que es ligeramente diferente, pero no actualizaron la pista.  Nada de qu√© preocuparse.  Solo se deduplican los archivos que coinciden (que se pueden restaurar) con la versi√≥n 1.0. </p><br><p>  Una heur√≠stica que procesa un archivo de pistas es un buen ejemplo para comprender el mecanismo interno de la heur√≠stica.  Solo procesa archivos hashget-hint.json (o .hashget-hint.json con un punto) e ignora a todos los dem√°s.  Al usar este archivo, determina qu√© URL del paquete debe indexarse ‚Äã‚Äãy hashget lo indexa (si esto no se ha hecho antes) </p><br><h2 id="hashserver">  Hashver </h2><br><p>  Ser√≠a bastante lento realizar una indexaci√≥n completa al crear copias de seguridad.  Para hacer esto, debe descargar cada paquete, descomprimir, indexar.  Por lo tanto, el hashget usa un esquema con un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HashServer</a> .  Si se instala un paquete Debian, si no se encuentra en el HashPackage local, primero se intenta descargar el HashPackage del servidor hash.  Y solo si esto no funciona: el propio hashget descarga y procesa el paquete (y lo carga en el servidor hash, de modo que el servidor hash lo proporcione m√°s adelante). </p><br><p>  HashServer: un elemento opcional del esquema, no cr√≠tico, se usa exclusivamente para acelerar y reducir la carga en los repositorios.  Se desconecta f√°cilmente (con la opci√≥n <code>--hashserver</code> sin par√°metros).  Adem√°s, puede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">crear</a> f√°cilmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">su propio servidor hash</a> . </p><br><h2 id="inkrementalnye-i-differencialnye-bekapy-zaplanirovannoe-ustarevanie">  Copias de seguridad incrementales y diferenciales, obsolescencia planificada </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El hashget</a> hace que sea muy simple hacer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">copias de seguridad incrementales y diferenciales</a> .  ¬øPor qu√© no indexamos nuestra copia de seguridad (con todos nuestros archivos √∫nicos)?  Un equipo: ¬° <code>--submit</code> y listo!  La pr√≥xima copia de seguridad que crear√° el hashget no incluir√° archivos de este archivo. </p><br><p>  Pero este no es un enfoque muy bueno, porque puede resultar que durante la recuperaci√≥n tendremos que eliminar todas las copias de seguridad de hashget para todo el historial (si cada una tiene al menos un archivo √∫nico).  Hay un mecanismo para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la obsolescencia de la copia de seguridad programada</a> para esto.  Al indexar, puede especificar la fecha de vencimiento de HashPackage - <code>--expires 2019-06-01</code> , y en esta fecha (desde las 00:00), no se utilizar√°.  El archivo en s√≠ no se puede eliminar despu√©s de esta fecha (aunque el hashget puede mostrar convenientemente las URL de todas las copias de seguridad que tenemos podridas en ese momento o en cualquier fecha). </p><br><p>  Por ejemplo, si realiza una copia de seguridad completa el primer d√≠a y la indexa con una vida √∫til antes de fin de mes, obtendremos un esquema de copia de seguridad diferencial. </p><br><p>  Si tambi√©n indexamos nuevas copias de seguridad, habr√° un esquema de copias de seguridad incrementales. </p><br><p>  A diferencia de los esquemas tradicionales, el hashget le permite usar varias fuentes b√°sicas.  La copia de seguridad se reducir√° debido a la reducci√≥n de los archivos de las copias de seguridad anteriores (si corresponde) y debido a los archivos p√∫blicos (lo que se puede descargar). </p><br><p>  Si por alguna raz√≥n no confiamos en la confiabilidad de los recursos de Debian ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://snapshot.debian.org/</a> ) o usamos otra distribuci√≥n, podemos hacer una copia de seguridad completa con todos los paquetes una vez y luego confiar en ella ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">deshabilitando la heur√≠stica</a> )  Ahora, si todos los servidores de nuestras distribuciones resultan inaccesibles para nosotros (en la Internet de recuerdo o durante el apocalipsis zombie), pero nuestras copias de seguridad est√°n en orden, podemos recuperarnos de cualquier copia de seguridad de diferencia breve que se base solo en nuestras copias de seguridad anteriores. </p><br><blockquote>  Hashget se basa √∫nicamente en fuentes confiables de recuperaci√≥n a su discreci√≥n.  Lo que consideras confiable: se usar√°n. </blockquote><br><h2 id="filepool-i-glacier">  FilePool y Glacier </h2><br><p>  El mecanismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FilePool le</a> permite no acceder constantemente a servidores externos para descargar paquetes, sino usar paquetes de un directorio local o servidor corporativo, por ejemplo: </p><br><pre> <code class="plaintext hljs">$ hashget -u . --pool /tmp/pool</code> </pre> <br><p>  o </p><br><pre> <code class="plaintext hljs">$ hashget -u . --pool http://myhashdb.example.com/</code> </pre> <br><p>  Para crear un grupo en un directorio local, simplemente cree un directorio y cargue archivos en √©l, el hashget encontrar√° lo que necesita por hash.  Para hacer que el grupo sea accesible a trav√©s de HTTP, debe crear enlaces simb√≥licos de una manera especial, esto se hace con un comando ( <code>hashget-admin --build /var/www/html/hashdb/ --pool /tmp/pool</code> ).  HTTP FilePool es un archivo est√°tico, por lo que cualquier servidor web simple puede servirlo, la carga en el servidor es casi cero. </p><br><p>  Gracias a FilePool, no solo los recursos http (s) se pueden usar como recursos b√°sicos, sino tambi√©n, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">por ejemplo</a> , Amazon Glacier. </p><br><p>  Despu√©s de la carga de respaldo al glaciar, obtenemos su ID de carga y la usamos como una URL.  Por ejemplo: </p><br><pre> <code class="plaintext hljs">hashget --submit Glacier_Upload_ID --file /tmp/my-glacier-backup.tar.gz --project glacier --hashserver --expires 2019-09-01</code> </pre> <br><p>  Ahora las nuevas copias de seguridad (diferenciales) depender√°n de esta copia de seguridad y ser√°n m√°s cortas.  Despu√©s de desempacar el tar, podemos ver en qu√© recursos se basa: </p><br><pre> <code class="plaintext hljs">hashget --info /tmp/unpacked/ list</code> </pre> <br><p>  y simplemente use el script de shell para descargar todos estos archivos del glaciar en el grupo y ejecute la recuperaci√≥n habitual: hashget -u / tmp / unpacked --pool / tmp / pool </p><br><h3 id="stoit-li-ovchinka-vydelki">  ¬øVale la pena el juego? </h3><br><p>  En el caso m√°s simple, simplemente pagar√° menos por las copias de seguridad (si las almacena en alg√∫n lugar de la nube por dinero).  Quiz√°s, mucho, mucho menos. </p><br><p>  Pero este no es el √∫nico.  La cantidad entra en calidad.  Puede usar esto para obtener una actualizaci√≥n del esquema de copia de seguridad de alta calidad.  Por ejemplo, dado que nuestras copias de seguridad ahora son m√°s cortas, no puede hacer una copia de seguridad mensual, sino diaria.  Gu√°rdelos no seis meses, como antes, sino 5 a√±os.  Anteriormente, se almacenaban en un almacenamiento "fr√≠o" lento pero barato (Glacier), ahora puede almacenar en caliente, desde donde siempre puede descargar r√°pidamente una copia de seguridad y recuperarla en minutos, no en un d√≠a. </p><br><p>  Puede aumentar la confiabilidad del almacenamiento de respaldo.  Si ahora los almacenamos en una tienda, al reducir el volumen de las copias de seguridad, podemos almacenar en 2-3 tiendas y sobrevivir de forma segura si una de ellas se da√±a. </p><br><h3 id="kak-poprobovat-i-nachat-polzovatsya">  ¬øC√≥mo probar y empezar a usar? </h3><br><p>  Vamos a la p√°gina de gitlab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://gitlab.com/yaroslaff/hashget</a> , lo instalamos con un comando ( <code>pip3 install hashget[plugins]</code> ) y simplemente leemos y ejecutamos el inicio r√°pido.  Creo que todas las cosas simples que hacer: tomar√° 10-15 minutos.  Luego, puede intentar sacudir sus m√°quinas virtuales, crear archivos de sugerencias si es necesario, apretar m√°s, jugar con grupos, una base de datos de hash local y un servidor de hash, si es interesante, y al d√≠a siguiente ver cu√°l ser√° el tama√±o de la copia de seguridad incremental de ayer. </p><br><h3 id="restic--hashget">  Restic + HashGet </h3><br><p>  <em>(Este cap√≠tulo se agreg√≥ m√°s tarde. Gracias a los comentaristas por sus cr√≠ticas y motivaci√≥n).</em> </p><br><p>  Existe una buena herramienta conveniente para las copias de seguridad: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">restic</a> .  Tambi√©n puede realizar deduplicaci√≥n, pero solo dentro del repositorio, no puede deduplicaci√≥n externa, lo que el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hashget</a> hace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">f√°cilmente</a> .  ¬°Pero en combinaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">restic + hashget</a> , logramos usar las ventajas de ambos enfoques! </p><br><p>  Preparaci√≥n (descomprimir wordpress e indexarlo): </p><br><pre> <code class="plaintext hljs"># wget -q https://wordpress.org/wordpress-5.2.2.tar.gz # hashget --submit https://wordpress.org/wordpress-5.2.2.tar.gz -p my --file wordpress-5.2.2.tar.gz --hashserver # tar -xf wordpress-5.2.2.tar.gz # du -sh wordpress 46M wordpress</code> </pre> <br><p>  Agregar instant√°nea a restic v√≠a </p><br><pre> <code class="plaintext hljs"># hashget -X exclude-list --prepack wordpress --hashserver Saved: 1468 files, 1 pkgs, size: 40.5M. Download: 10.7M # restic --exclude-file exclude-list backup wordpress password is correct scan [/tmp/wp/wordpress] scanned 193 directories, 367 files in 0:02 [0:04] 100.00% 700.829 KiB / 700.829 KiB 560 / 560 items 0 errors ETA 0:00 duration: 0:04 snapshot 76b54230 saved # du -sh /tmp/restic-repo/ 2,1M /tmp/restic-repo/</code> </pre> <br><p>  En esta etapa, agregamos una instant√°nea del cat√°logo (m√°s de 40 Mb), y el tama√±o del repositorio aument√≥ solo 1 Mb. </p><br><p>  La recuperaci√≥n se realiza mediante dos comandos: </p><br><pre> <code class="plaintext hljs"># restic restore 76b54230 -t unpacked password is correct restoring &lt;Snapshot 76b54230 of [/tmp/wp/wordpress] at 2019-06-19 04:30:55.760618336 +0700 +07 by root@braconnier&gt; to unpacked # hashget -u unpacked/wordpress/ --hashserver Recovered 1468/1468 files 40.5M bytes (0 downloaded, 0 from pool, 10.7M cached) in 1.56s</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454826/">https://habr.com/ru/post/454826/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454810/index.html">Aire fresco en Marte: doble una mol√©cula de CO2 y obtenga ox√≠geno</a></li>
<li><a href="../454816/index.html">Configuraci√≥n del paquete php-fpm + nginx en WSL</a></li>
<li><a href="../454818/index.html">Rekko Challenge: c√≥mo ocupar el segundo lugar en la competencia para la creaci√≥n de sistemas de recomendaci√≥n</a></li>
<li><a href="../454820/index.html">B√∫squeda de Azure</a></li>
<li><a href="../454824/index.html">El amplificador operacional m√°s simple en elementos discretos</a></li>
<li><a href="../454828/index.html">Crear una imagen de mosaico</a></li>
<li><a href="../454830/index.html">3 cualidades clave para un gerente de producto exitoso: Alexander Belyaev</a></li>
<li><a href="../454832/index.html">¬øPor qu√© una semana laboral de cuatro d√≠as es una mala historia?</a></li>
<li><a href="../454834/index.html">Los t√©rminos reales del estudio de la escritura t√°ctil con baja motivaci√≥n.</a></li>
<li><a href="../454840/index.html">Cuidado de mudarse a los Pa√≠ses Bajos con su esposa e hipoteca. Parte 2: preparar documentos y mudarse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>