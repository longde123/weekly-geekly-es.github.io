<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎸 🚶🏽 ✌🏽 Composants communs par différentes équipes. Rapport Yandex 🧛🏿 🙇🏿 🔑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La création et la maintenance de composants communs est un processus dans lequel de nombreuses équipes doivent être engagées. Le chef du service de co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composants communs par différentes équipes. Rapport Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/460811/"> La création et la maintenance de composants communs est un processus dans lequel de nombreuses équipes doivent être engagées.  Le chef du service de composants partagés de Yandex Vladimir Grinenko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">tadatuta a</a> expliqué comment leur développement dépassait l'équipe dédiée de Lego, comment nous avons créé un mono-référentiel basé sur GitHub en utilisant Lerna et mis en place des versions Canary avec la mise en œuvre de services directement dans CI, ce qui était nécessaire et ce qui était nécessaire. être encore. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/zv/o-/0b/zvo-0b7pajia8d3pnm4rbpm72hw.jpeg"></a> <br><br>  "Heureux de vous accueillir tous."  Mon nom est Vladimir, je fais des choses courantes dans les interfaces Yandex.  Je veux en parler.  Probablement, si vous n'utilisez pas nos services très profondément, vous pouvez avoir une question: que composons-nous tous?  Qu'y a-t-il à composer? <br><br><a name="habracut"></a><img src="https://habrastorage.org/webt/o3/ip/sx/o3ipsxj2wxuhbnfeq23rfk0ucuc.jpeg"><br><br><img src="https://habrastorage.org/webt/wq/kx/y0/wqkxy0_ta9qyzi3vnbryhxqpwy4.jpeg"><br><br>  Il y a une liste de réponses dans les résultats de recherche, parfois il y a une colonne à droite.  Chacun de vous s'en sortira probablement en une journée.  Si vous vous souvenez qu'il existe différents navigateurs et ainsi de suite, nous ajoutons un autre jour pour corriger les bugs, puis tout le monde y fera face. <br><br><img src="https://habrastorage.org/webt/gc/f5/i8/gcf5i8mqymopdqairky09odo00k.jpeg"><br><br>  Quelqu'un se rappellera qu'il existe encore une telle interface.  Tenant compte de toutes les petites choses que vous pouvez lui donner une autre semaine et allez-y.  Et Dima vient de nous dire qu'il y a tellement d'entre nous que nous avons besoin de notre propre école.  Et tous ces gens composent des pages tout le temps.  Chaque jour, ils viennent travailler et composer, imaginez?  Il y a clairement autre chose. <br><br><img src="https://habrastorage.org/webt/iv/3d/et/iv3detsvcvujieb_-ho8nqmvvuu.jpeg"><br><br>  En fait, les services de Yandex sont bien plus.  Et il y a même un peu plus que sur cette diapositive.  Derrière chaque lien, il y a un tas d'interfaces différentes avec une grande variabilité.  Ils sont pour différents appareils, dans différentes langues.  Ils travaillent parfois même dans des voitures et d'autres choses étranges. <br><br><img src="https://habrastorage.org/webt/0w/mz/98/0wmz98pcjwflkkhflu4i_vwgtjo.jpeg"><br><br>  Aujourd'hui, Yandex n'est pas seulement le Web, pas seulement des marchandises différentes avec des entrepôts, la livraison et tout ça.  Voitures jaunes roulent.  Et pas seulement ce que vous pouvez manger, et pas seulement des morceaux de fer.  Et pas seulement toutes sortes d'intelligences automatiques.  Mais tout ce qui précède est uni par le fait que pour chaque élément, des interfaces sont nécessaires.  Souvent - très riche.  Yandex est des centaines de services énormes différents.  Nous créons constamment quelque chose de nouveau chaque jour.  Nous comptons des milliers d'employés, dont des centaines de développeurs front-end et de développeurs d'interfaces.  Ces personnes travaillent dans différents bureaux, vivent dans des fuseaux horaires différents, de nouveaux types viennent constamment travailler. <br><br>  Dans le même temps, nous, dans la mesure où nous avons suffisamment de force, essayons de le rendre monotone, uniforme pour les utilisateurs. <br><br><img src="https://habrastorage.org/webt/dz/vn/uz/dzvnuzxrodwkt2oi0tbemkn4lne.gif"><br><br>  Il s'agit de la recherche de documents sur Internet.  Mais si nous passons à l'émission d'images, l'en-tête correspond, malgré le fait qu'il s'agit d'un référentiel séparé, qui est engagé dans une équipe complètement distincte, peut-être même sur d'autres technologies.  Il semblerait qu'il y ait compliqué?  Eh bien, ils ont fait un chapeau deux fois, comme une chose simple.  Chaque bouton de la casquette a également son propre monde intérieur riche et distinct.  Quelques popups apparaissent ici, quelque chose peut également y être poussé.  Tout cela est traduit dans différentes langues, fonctionne sur différentes plateformes.  Et ici on passe des photos, par exemple, à la vidéo, et c'est encore une fois un nouveau service, une autre équipe.  Encore un autre référentiel.  Mais toujours le même chapeau, bien qu'il y ait des différences.  Et tout cela doit rester uniforme. <br><br>  Qu'est-ce que ça vaut, de basculer comme ça sur les diapositives, pour être sûr que rien ne soit allé nulle part sur le pixel?  Nous essayons d'empêcher que cela se produise. <br><br><img src="https://habrastorage.org/webt/_u/9b/2r/_u9b2ralx_p1qvev6q_k1jsr7ys.jpeg"><br><br>  Pour montrer l'échelle un peu plus, j'ai pris une capture d'écran du référentiel, qui ne stocke que le code frontal pour les nouveaux navigateurs - uniquement la sortie des documents, sans images ni vidéos.  Il y a des dizaines de milliers de commits et près de 400 contributeurs.  Ce n'est que dans la mise en page, un seul projet.  Voici une liste de liens bleus que vous avez l'habitude de voir. <br><br>  Sergey Berezhnoy, mon chef, aime beaucoup cette histoire, puisque nous nous sommes tellement rassemblés dans l'entreprise, je veux que notre interaction fonctionne ensemble comme si en JavaScript: un plus un est plus de deux. <br><br><img src="https://habrastorage.org/webt/qq/kn/-q/qqkn-qr0bqavfyeum_ocif9gycs.jpeg"><br><br>  Et nous essayons d'obtenir tout ce que nous pouvons de l'interaction.  La première chose qui vient à l'esprit dans de telles conditions est la réutilisation.  Ici, par exemple, un extrait vidéo sur un service dans les résultats de recherche pour une vidéo.  Il s'agit d'une sorte de photo avec une signature et d'autres éléments différents. <br><br><img src="https://habrastorage.org/webt/j5/rj/pr/j5rjprkjwcplnephmm-dxciv1l4.jpeg"><br><br>  Si vous regardez plus loin, voici la délivrance habituelle des documents.  Mais ici aussi, il y a exactement le même extrait. <br><br><img src="https://habrastorage.org/webt/cr/3k/t4/cr3kt4p_iys_uplw7yi7ltsntn4.jpeg"><br><br>  Ou, disons, il existe un service Yandex.Air distinct, qui se compose un peu moins que complètement d'extraits similaires. <br><br><img src="https://habrastorage.org/webt/qt/91/ii/qt91iipkwlqktjjqpnwhmfxapzs.jpeg"><br><br>  Ou, disons, l'extrait vidéo dans le notifiant, qui se trouve sur différentes pages du portail. <br><br><img src="https://habrastorage.org/webt/az/w9/2i/azw92ih1mulgzijr1gdgbenx8k0.jpeg"><br><br>  Ou voici un extrait de vidéo lorsque vous l'ajoutez à vos favoris, puis le regardez dans vos collections. <br><br><img src="https://habrastorage.org/webt/ub/ge/yd/ubgeydeso0lwyy4t67ejiz7uh6w.jpeg"><br><br>  Sonne comme?  Évidemment, semble-t-il.  Et alors?  Si nous permettons vraiment aux services d'intégrer facilement nos composants finis dans d'autres services de portail, alors évidemment ce service, du fait que les utilisateurs peuvent interagir avec leurs données sur différentes plateformes, obtiendra plus d'utilisateurs.  C'est super.  Les utilisateurs en bénéficieront également.  Ils verront les mêmes choses également.  Ils se comporteront comme d'habitude.  Autrement dit, il n'est pas nécessaire de deviner encore et encore ce que le concepteur avait en tête ici et comment interagir avec lui. <br><br>  Et enfin, l'entreprise en tirera des économies évidentes.  De plus, il semble juste - qu'y a-t-il pour constituer un aperçu vidéo et une sorte de signature / En fait, pour l'obtenir comme ça, vous devez mener beaucoup d'expériences différentes, tester différentes hypothèses, choisir les tailles, les couleurs, les retraits.  Ajoutez des éléments, peut-être, puis supprimez-les, car ils n'ont pas volé.  Et ce qui s'est passé, ce qui fonctionne vraiment, est le résultat d'un très long processus.  Et si à chaque fois dans chaque nouvel endroit de le faire à nouveau, c'est un énorme effort. <br><br>  Imaginez maintenant.  Disons que nous avons quelque chose qui fonctionne bien.  Partout, partout, ils l'ont mis en œuvre, puis ils ont mené une nouvelle expérience et réalisé ce qui pouvait être amélioré.  Et encore une fois, nous devons répéter toute cette chaîne de mise en œuvre.  Cher <br><br><img src="https://habrastorage.org/webt/ex/8c/1_/ex8c1_tlclflyej-krijb8m20fk.jpeg"><br><br>  D'accord, il semble évident de bien réutiliser.  Mais maintenant, nous devons résoudre un certain nombre de nouveaux problèmes.  Vous devez comprendre où stocker ce nouveau code.  D'une part, cela semble logique.  Ici nous avons un extrait vidéo, il est réalisé par l'équipe vidéo, ils ont un référentiel avec leur projet.  Il faudrait probablement y mettre.  Mais comment alors le distribuer à d'autres référentiels de tous les autres gars?  Et si d'autres gars veulent apporter quelque chose à eux dans cet extrait?  Encore une fois pas clair. <br><br>  Il est nécessaire de le versionner d'une manière ou d'une autre.  Vous ne pouvez rien changer, et donc, le tour est joué, tout se déroule soudainement.  Quelque chose doit être testé.  De plus, nous l'avons par exemple testé sur le service de la vidéo elle-même.  Mais que se passe-t-il si, lorsqu'il est intégré à un autre service, quelque chose se casse?  Encore une fois pas clair. <br><br>  En fin de compte, il est en quelque sorte nécessaire d'assurer en quelque sorte une livraison assez rapide à différents services, car ce sera étrange si nous avons quelque part la version précédente, quelque part de nouveau.  L'utilisateur semble cliquer sur la même chose et le comportement est différent.  Et nous devons en quelque sorte offrir aux développeurs de différentes équipes la possibilité d'apporter des modifications à ce code commun.  Nous devons en quelque sorte leur apprendre à tout utiliser.  Nous avons un long chemin à parcourir pour que la réutilisation des interfaces soit pratique. <br><br><img src="https://habrastorage.org/webt/gu/a8/en/gua8ensfq4qkfjd9hwgrf3dpeko.jpeg"><br><br>  Nous avons commencé dans des temps immémoriaux, de retour dans SVN, et c'était comme une lampe et pratique: un papa avec HTML, tout comme dans Bootstrap.  Vous le copiez pour vous.  À côté de papa avec des styles, une sorte de JS là-bas, qui a ensuite su simplement montrer / cacher quelque chose.  Et c'est tout. <br><br><img src="https://habrastorage.org/webt/tg/xu/sx/tgxusxowszje9vwtdvxf4yy4_os.jpeg"><br><br>  D'une certaine manière, la liste des composants ressemblait à ceci.  Le b-domeg, qui était responsable de l'autorisation, est mis en évidence ici.  Peut-être vous souvenez-vous encore, sur Yandex, en effet, il y avait un tel formulaire de connexion et de mot de passe, avec un toit.  Nous avons appelé la "maison", même si elle faisait allusion à l'enveloppe du courrier, car ils entraient généralement dans le courrier. <br><br>  Ensuite, nous avons mis au point une méthodologie complète pour pouvoir prendre en charge des interfaces communes. <br><br><img src="https://habrastorage.org/webt/tu/7h/08/tu7h08reemfp5mrp8rib5a3ib9q.jpeg"><br><br>  La bibliothèque elle-même au sein de l'entreprise a acquis son propre site Web avec une recherche et toute taxonomie. <br><br><img src="https://habrastorage.org/webt/fv/pa/jn/fvpajnegfm13z-q1fzb1edglvn0.jpeg"><br><br>  Le référentiel ressemble maintenant à ceci.  Vous voyez, aussi près de 10 000 commits et plus de 100 contributeurs. <br><br><img src="https://habrastorage.org/webt/h2/9r/ur/h29ruri7jkqnzacvu9dedijcjgu.jpeg"><br><br>  Mais c'est le dossier de la maison très b dans la nouvelle réincarnation.  Maintenant, elle ressemble à ça.  Il y a déjà plus de vos propres dossiers à l'intérieur que la moitié d'un écran. <br><br><img src="https://habrastorage.org/webt/lu/u9/62/luu962u_j91qtinyg3gn-1-efwg.jpeg"><br><br>  Et donc le site a l'air aujourd'hui. <br><br><img src="https://habrastorage.org/webt/xj/ko/g-/xjkog-2xy19nuayhuliti4urgoy.jpeg"><br><br>  En conséquence, la bibliothèque partagée est utilisée dans plus de 360 ​​référentiels à l'intérieur de Yandex.  Et il y a différentes implémentations, un cycle de mise au point débogué, etc. Il semblerait qu'ici, nous avons une bibliothèque commune, utilisons-la maintenant partout, et tout est super.  Le problème de l'introduction de trucs communs partout résolu.  Pas vraiment. <br><br><img src="https://habrastorage.org/webt/rj/e5/0_/rje50_8ba6axvribhiogqzzxer8.jpeg"><br><br>  Essayer de résoudre le problème de la réutilisation au stade où vous avez déjà du code prêt à l'emploi est trop tard.  Cela signifie qu'à partir du moment où le concepteur a dessiné la disposition des services, les a distribués aux services, et en particulier à l'équipe qui s'occupe des composants communs, un certain temps s'est écoulé.  Très probablement, à ce moment-là, il se révélera que sur chaque service distinct, ou au moins sur plusieurs d'entre eux, ce même élément d'interface a également été constitué.  Ils se sont arrangés à leur manière. <br><br>  Et même si une solution générale est apparue plus tard dans la bibliothèque partagée, il s'avère que vous devrez maintenant réimplémenter tout ce que vous avez réussi à terminer sur chaque service.  Et c'est encore un problème.  C'est très difficile à justifier.  Voici l'équipe.  Elle a ses propres objectifs, tout fonctionne déjà bien.  Et nous disons de telles choses - regardez, enfin nous avons une petite chose commune, prenez-la.  Mais l'équipe est comme ça - nous avons déjà assez de travail.  Pourquoi en avons-nous besoin?  D'ailleurs, tout à coup quelque chose ne nous conviendra pas là-bas?  Nous ne voulons pas. <br><br>  Le deuxième gros problème est, en fait, la diffusion d'informations sur ce que sont ces nouveaux composants sympas.  Tout simplement parce qu'il y a tellement de développeurs, ils sont occupés avec leurs tâches quotidiennes.  Et ils ont la possibilité de s'asseoir et d'étudier ce qui se passe là-bas dans le domaine du commun, peu importe ce que cela signifie, en fait, non plus. <br><br>  Et le plus gros problème est qu'il est fondamentalement impossible de résoudre les problèmes communs à tous les services avec une seule équipe dédiée.  Autrement dit, lorsque nous avons une équipe qui s'occupe de la vidéo et qu'elle crée son propre extrait avec la vidéo, il est clair que nous serons d'accord avec eux et ferons cet extrait dans une sorte de bibliothèque centralisée.  Mais il existe directement des milliers d'exemples de ce type sur différents services.  Et ici, certainement, aucune main ne suffit.  Par conséquent, la seule solution est que tout le monde traite constamment les composants généraux. <br><br><img src="https://habrastorage.org/webt/y7/ay/9p/y7ay9pqgaxomogw-xz4x7hdlgb4.jpeg"><br><br>  Et vous devez commencer, assez étrangement, non pas avec des développeurs d'interfaces, mais avec des concepteurs.  Ils le comprennent aussi.  Nous avons plusieurs tentatives simultanées à l'intérieur pour que ce processus converge.  Les concepteurs créent des systèmes de conception.  J'espère vraiment que tôt ou tard il sera possible de les réduire en un seul système commun prenant en compte tous les besoins. <br><br><img src="https://habrastorage.org/webt/be/vd/yd/bevdyd-kpziztd5yxc6qp98xgqy.jpeg"><br><br>  Maintenant, il y en a plusieurs.  Étonnamment, les tâches sont exactement les mêmes: accélérer le processus de développement, résoudre le problème de cohérence, ne pas réinventer la roue et ne pas dupliquer le travail effectué. <br><br><img src="https://habrastorage.org/webt/0z/xd/ci/0zxdcimwdz-s1d8oaiu3dinhxce.jpeg"><br><br>  Et une façon de résoudre le problème de la communication d'informations est de permettre aux développeurs de connaître d'autres équipes, dont une qui s'occupe des composants d'interface courants.  Nous le résolvons de ce côté par le fait que nous avons un bootcamp, qui, lorsqu'un développeur apparaît sur Yandex, lui permet tout d'abord d'aller dans différentes équipes pendant huit semaines, voir comment ça marche, puis faire un choix où ça va marcher .  Mais pendant ce temps, ses horizons s'élargiront considérablement.  Il sera guidé là où c'est. <br><br>  Nous avons parlé de choses communes.  Voyons maintenant comment tout cela se rapproche du processus de développement.  Disons que nous avons une bibliothèque commune appelée Lego.  Et nous voulons implémenter une nouvelle fonctionnalité ou faire une sorte de révision.  Nous avons corrigé le code et publié la version. <br><br>  Nous devons publier cette version dans npm, puis aller dans le référentiel d'un projet où la bibliothèque est utilisée et implémenter cette version.  Très probablement, cela corrigera un certain nombre dans package.json, redémarrez l'assembly.  Peut-être même régénérer le package-lock, créer une demande d'extraction, voir comment les tests réussissent.  Et que verrons-nous? <br><br><img src="https://habrastorage.org/webt/ri/ft/dz/riftdzizz3nhvcxu4ivi1gtnzxy.jpeg"><br><br>  Très probablement, nous verrons qu'un bogue s'est produit.  Parce qu'il est très difficile de prévoir toutes les façons d'utiliser le composant sur différents services.  Et si cela arrivait, quelle est notre issue?  Nous avons donc réalisé que cela ne s'emboîtait pas.  Nous continuons à refaire.  Nous retournons au référentiel avec une bibliothèque partagée, corrigeons le bogue, publions la nouvelle version, l'envoyons à npm, déployons, exécutons les tests, et qu'est-ce que c'est?  Très probablement, un bug se reproduira. <br><br>  Et c'est toujours bon quand nous l'implémentons dans un seul service, et là, tout s'est cassé tout de suite.  C'était beaucoup plus triste quand nous avons fait tout cela, mis en œuvre dans dix services différents.  Rien ne s'est cassé là.  Nous sommes déjà allés préparer un smoothie, ou tout ce qui est nécessaire.  À l'heure actuelle, la version est introduite dans le 11e projet, ou dans le 25e.  Et il y a un bug.  Nous revenons tout au long de la chaîne, faisons un patch et l'implémentons dans les 20 services précédents.  De plus, ce patch peut exploser dans l'un des précédents.  Eh bien et ainsi de suite.  Amusez-vous. <br><br>  Il semble que la seule solution consiste à écrire beaucoup de code très rapidement.  Tôt ou tard, si nous courons très, très vite, très probablement, nous parviendrons à avoir le temps de mettre en production une version dans laquelle il n'y a pas encore de bug.  Mais alors une nouvelle fonctionnalité apparaîtra, et rien ne nous sauvera. <br><br>  D'accord.  En fait, le schéma peut ressembler à ce qui suit.  L'automatisation nous aidera.  Il s'agit de cela, en général, de toute l'histoire, en fait.  Nous avons eu l'idée qu'un référentiel avec une bibliothèque commune puisse être construit selon le schéma de mono-référentiel.  Vous l'avez probablement rencontré, il existe maintenant de nombreux projets de ce type, en particulier des projets d'infrastructure.  Toutes sortes de Babel, et des choses comme ça, vivent comme des mono-référentiels quand il y a beaucoup de packages npm différents à l'intérieur.  Ils peuvent être en quelque sorte connectés les uns aux autres.  Et ils sont gérés, par exemple, via Lerna, de sorte qu'il est pratique de publier tout cela, compte tenu des dépendances. <br><br>  Selon ce schéma, il est possible d'organiser un projet où tout en commun est stocké pour toute l'entreprise.  Il peut y avoir une bibliothèque, qui est engagée dans une équipe distincte.  Et, notamment, il peut y avoir des packages que chaque service individuel développe, mais qu'il souhaite partager avec d'autres. <br><br><img src="https://habrastorage.org/webt/qb/tx/ck/qbtxckwz4xeknxszl3zkfftpkjo.jpeg"><br><br>  Ensuite, le circuit ressemble à ceci.  Le début n'est pas différent.  D'une manière ou d'une autre, nous devons apporter des modifications au code commun.  Et puis, avec l'aide de l'automatisation, d'un seul coup, nous voulons exécuter des tests non seulement à côté de ce code, mais immédiatement dans tous les projets où ce code commun est intégré.  Et voyez leur résultat agrégé. <br><br>  Ensuite, même si un bogue s'est produit là-bas, nous n'avons toujours pas réussi à publier de version, nous ne l'avons pas publiée dans les npm, nous ne l'avons pas implémentée spécifiquement de nos mains, nous n'avons pas fait tous ces efforts supplémentaires.  Nous avons vu un bogue, l'avons immédiatement corrigé localement, avons de nouveau exécuté des tests généraux, et c'est tout en production. <br><br><img src="https://habrastorage.org/webt/lo/8-/7d/lo8-7d5hg38lvxpsswq05l2vipm.jpeg"><br><br>  À quoi cela ressemble-t-il dans la pratique?  Voici une demande d'extraction avec un correctif.  Ici, vous pouvez voir que l'automatisation a appelé les réviseurs nécessaires pour vérifier que tout va bien dans le code.  En effet, les examinateurs sont venus et ont convenu que tout allait bien.  Et à ce moment, le développeur écrit simplement une commande spéciale / canary, directement dans la demande de tirage. <br><br>  Un robot vient et dit - d'accord, j'ai créé une tâche pour que le prochain miracle se produise.  Le miracle est qu'une version canari avec ces modifications a été publiée et qu'elle a été implémentée automatiquement dans tous les référentiels où ce composant est utilisé.  Des autotests y ont été lancés, comme dans ce référentiel.  Ici, vous pouvez voir qu'un tas de contrôles ont été lancés. <br><br>  Derrière chaque test, il y a une centaine de tests différents.  Mais il est important qu'en plus des tests locaux que nous pourrions écrire séparément sur le composant, nous avons également lancé des tests pour chaque projet où il a été implémenté.  Des tests d'intégration y ont déjà été lancés: on vérifie que ce composant fonctionne normalement dans l'environnement dans lequel il est conçu sur le service.  Cela nous garantit déjà vraiment que nous n'avons rien oublié, que nous n'avons rien cassé à personne.  Si tout va bien ici, alors nous pouvons vraiment publier une version en toute sécurité.  Et si quelque chose ne va pas ici, nous allons le réparer ici. <br><br>  Il semble que cela devrait nous aider.  Si votre entreprise a quelque chose de similaire, vous voyez qu'il y a des pièces que vous pourriez potentiellement réutiliser, mais pour l'instant vous devez les réorganiser car il n'y a pas d'automatisation, je vous recommande de trouver une solution similaire. <br><br><img src="https://habrastorage.org/webt/lu/vp/jp/luvpjp0a5tof1v56lwn7uq_nwiq.jpeg"><br><br>  Qu'avons-nous obtenu?  Le monorepositaire général dans lequel les linters sont reconstruits.  Autrement dit, tout le monde écrit le code de la même manière, il a toutes sortes de tests.  Toute équipe peut venir, mettre son composant et le vérifier avec des tests unitaires JS, le couvrir de captures d'écran, etc. Tout sera déjà sorti de la boîte.  L'examen de code intelligent que j'ai mentionné.  Grâce à de riches outils internes, c'est vraiment intelligent ici. <br><br>  Le développeur est-il en vacances maintenant?  L'appeler dans une demande de pull est inutile; le système en tiendra compte.  Le développeur est-il malade?  Le système en tiendra également compte.  Si les deux conditions ne sont pas remplies et que le développeur semble être libre, il recevra une notification dans l'un de ses messagers de son choix.  Et il est comme ça: non, maintenant je suis occupé par quelque chose d'urgence ou lors d'une réunion.  Il peut y venir et simplement écrire la commande / busy.  Le système comprendra automatiquement que vous devez attribuer le suivant à la liste. <br><br>  L'étape suivante consiste à publier la même version canari.  Autrement dit, avec tout changement de code, nous devons publier un ensemble de services que nous pouvons vérifier sur différents services.  Ensuite, nous devons exécuter des tests lors du déploiement sur tous ces services.  Et quand tout s'est réuni - lancez les versions. <br><br>  Si une modification affecte une partie statique qui doit être chargée à partir du CDN, vous devez la publier automatiquement séparément.     .    , ,  ,  ,  .     ,     , ,  changelog     - . <br><br>  ,       ,     ,        ,   .       ,   ,      . <br><br>   ,        .       . , ,  :          ,       ?  .         ,            .      .     , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460811/">https://habr.com/ru/post/fr460811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460799/index.html">Demande de paiement API de navigateur standard</a></li>
<li><a href="../fr460801/index.html">27 outils VS Code géniaux pour les développeurs JavaScript modernes</a></li>
<li><a href="../fr460803/index.html">Lire pour l'été: des livres pour les techniciens</a></li>
<li><a href="../fr460805/index.html">Comment transférer des données entre microcontrôleurs à 100 Mbps</a></li>
<li><a href="../fr460807/index.html">Mesurer sept fois, une fois implémenter l'outil BI</a></li>
<li><a href="../fr460813/index.html">Comment utiliser les diagrammes de Voronoi pour contrôler l'IA</a></li>
<li><a href="../fr460815/index.html">Inventer la bibliothèque vusb</a></li>
<li><a href="../fr460819/index.html">WorldSkills: avis du participant de l'Olympiade</a></li>
<li><a href="../fr460821/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 307 (du 15 au 21 juillet)</a></li>
<li><a href="../fr460823/index.html">Événements numériques à Moscou du 22 juillet au 28 juillet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>