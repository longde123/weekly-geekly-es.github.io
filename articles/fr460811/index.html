<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∏ üö∂üèΩ ‚úåüèΩ Composants communs par diff√©rentes √©quipes. Rapport Yandex üßõüèø üôáüèø üîë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La cr√©ation et la maintenance de composants communs est un processus dans lequel de nombreuses √©quipes doivent √™tre engag√©es. Le chef du service de co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composants communs par diff√©rentes √©quipes. Rapport Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/460811/"> La cr√©ation et la maintenance de composants communs est un processus dans lequel de nombreuses √©quipes doivent √™tre engag√©es.  Le chef du service de composants partag√©s de Yandex Vladimir Grinenko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">tadatuta a</a> expliqu√© comment leur d√©veloppement d√©passait l'√©quipe d√©di√©e de Lego, comment nous avons cr√©√© un mono-r√©f√©rentiel bas√© sur GitHub en utilisant Lerna et mis en place des versions Canary avec la mise en ≈ìuvre de services directement dans CI, ce qui √©tait n√©cessaire et ce qui √©tait n√©cessaire. √™tre encore. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/zv/o-/0b/zvo-0b7pajia8d3pnm4rbpm72hw.jpeg"></a> <br><br>  "Heureux de vous accueillir tous."  Mon nom est Vladimir, je fais des choses courantes dans les interfaces Yandex.  Je veux en parler.  Probablement, si vous n'utilisez pas nos services tr√®s profond√©ment, vous pouvez avoir une question: que composons-nous tous?  Qu'y a-t-il √† composer? <br><br><a name="habracut"></a><img src="https://habrastorage.org/webt/o3/ip/sx/o3ipsxj2wxuhbnfeq23rfk0ucuc.jpeg"><br><br><img src="https://habrastorage.org/webt/wq/kx/y0/wqkxy0_ta9qyzi3vnbryhxqpwy4.jpeg"><br><br>  Il y a une liste de r√©ponses dans les r√©sultats de recherche, parfois il y a une colonne √† droite.  Chacun de vous s'en sortira probablement en une journ√©e.  Si vous vous souvenez qu'il existe diff√©rents navigateurs et ainsi de suite, nous ajoutons un autre jour pour corriger les bugs, puis tout le monde y fera face. <br><br><img src="https://habrastorage.org/webt/gc/f5/i8/gcf5i8mqymopdqairky09odo00k.jpeg"><br><br>  Quelqu'un se rappellera qu'il existe encore une telle interface.  Tenant compte de toutes les petites choses que vous pouvez lui donner une autre semaine et allez-y.  Et Dima vient de nous dire qu'il y a tellement d'entre nous que nous avons besoin de notre propre √©cole.  Et tous ces gens composent des pages tout le temps.  Chaque jour, ils viennent travailler et composer, imaginez?  Il y a clairement autre chose. <br><br><img src="https://habrastorage.org/webt/iv/3d/et/iv3detsvcvujieb_-ho8nqmvvuu.jpeg"><br><br>  En fait, les services de Yandex sont bien plus.  Et il y a m√™me un peu plus que sur cette diapositive.  Derri√®re chaque lien, il y a un tas d'interfaces diff√©rentes avec une grande variabilit√©.  Ils sont pour diff√©rents appareils, dans diff√©rentes langues.  Ils travaillent parfois m√™me dans des voitures et d'autres choses √©tranges. <br><br><img src="https://habrastorage.org/webt/0w/mz/98/0wmz98pcjwflkkhflu4i_vwgtjo.jpeg"><br><br>  Aujourd'hui, Yandex n'est pas seulement le Web, pas seulement des marchandises diff√©rentes avec des entrep√¥ts, la livraison et tout √ßa.  Voitures jaunes roulent.  Et pas seulement ce que vous pouvez manger, et pas seulement des morceaux de fer.  Et pas seulement toutes sortes d'intelligences automatiques.  Mais tout ce qui pr√©c√®de est uni par le fait que pour chaque √©l√©ment, des interfaces sont n√©cessaires.  Souvent - tr√®s riche.  Yandex est des centaines de services √©normes diff√©rents.  Nous cr√©ons constamment quelque chose de nouveau chaque jour.  Nous comptons des milliers d'employ√©s, dont des centaines de d√©veloppeurs front-end et de d√©veloppeurs d'interfaces.  Ces personnes travaillent dans diff√©rents bureaux, vivent dans des fuseaux horaires diff√©rents, de nouveaux types viennent constamment travailler. <br><br>  Dans le m√™me temps, nous, dans la mesure o√π nous avons suffisamment de force, essayons de le rendre monotone, uniforme pour les utilisateurs. <br><br><img src="https://habrastorage.org/webt/dz/vn/uz/dzvnuzxrodwkt2oi0tbemkn4lne.gif"><br><br>  Il s'agit de la recherche de documents sur Internet.  Mais si nous passons √† l'√©mission d'images, l'en-t√™te correspond, malgr√© le fait qu'il s'agit d'un r√©f√©rentiel s√©par√©, qui est engag√© dans une √©quipe compl√®tement distincte, peut-√™tre m√™me sur d'autres technologies.  Il semblerait qu'il y ait compliqu√©?  Eh bien, ils ont fait un chapeau deux fois, comme une chose simple.  Chaque bouton de la casquette a √©galement son propre monde int√©rieur riche et distinct.  Quelques popups apparaissent ici, quelque chose peut √©galement y √™tre pouss√©.  Tout cela est traduit dans diff√©rentes langues, fonctionne sur diff√©rentes plateformes.  Et ici on passe des photos, par exemple, √† la vid√©o, et c'est encore une fois un nouveau service, une autre √©quipe.  Encore un autre r√©f√©rentiel.  Mais toujours le m√™me chapeau, bien qu'il y ait des diff√©rences.  Et tout cela doit rester uniforme. <br><br>  Qu'est-ce que √ßa vaut, de basculer comme √ßa sur les diapositives, pour √™tre s√ªr que rien ne soit all√© nulle part sur le pixel?  Nous essayons d'emp√™cher que cela se produise. <br><br><img src="https://habrastorage.org/webt/_u/9b/2r/_u9b2ralx_p1qvev6q_k1jsr7ys.jpeg"><br><br>  Pour montrer l'√©chelle un peu plus, j'ai pris une capture d'√©cran du r√©f√©rentiel, qui ne stocke que le code frontal pour les nouveaux navigateurs - uniquement la sortie des documents, sans images ni vid√©os.  Il y a des dizaines de milliers de commits et pr√®s de 400 contributeurs.  Ce n'est que dans la mise en page, un seul projet.  Voici une liste de liens bleus que vous avez l'habitude de voir. <br><br>  Sergey Berezhnoy, mon chef, aime beaucoup cette histoire, puisque nous nous sommes tellement rassembl√©s dans l'entreprise, je veux que notre interaction fonctionne ensemble comme si en JavaScript: un plus un est plus de deux. <br><br><img src="https://habrastorage.org/webt/qq/kn/-q/qqkn-qr0bqavfyeum_ocif9gycs.jpeg"><br><br>  Et nous essayons d'obtenir tout ce que nous pouvons de l'interaction.  La premi√®re chose qui vient √† l'esprit dans de telles conditions est la r√©utilisation.  Ici, par exemple, un extrait vid√©o sur un service dans les r√©sultats de recherche pour une vid√©o.  Il s'agit d'une sorte de photo avec une signature et d'autres √©l√©ments diff√©rents. <br><br><img src="https://habrastorage.org/webt/j5/rj/pr/j5rjprkjwcplnephmm-dxciv1l4.jpeg"><br><br>  Si vous regardez plus loin, voici la d√©livrance habituelle des documents.  Mais ici aussi, il y a exactement le m√™me extrait. <br><br><img src="https://habrastorage.org/webt/cr/3k/t4/cr3kt4p_iys_uplw7yi7ltsntn4.jpeg"><br><br>  Ou, disons, il existe un service Yandex.Air distinct, qui se compose un peu moins que compl√®tement d'extraits similaires. <br><br><img src="https://habrastorage.org/webt/qt/91/ii/qt91iipkwlqktjjqpnwhmfxapzs.jpeg"><br><br>  Ou, disons, l'extrait vid√©o dans le notifiant, qui se trouve sur diff√©rentes pages du portail. <br><br><img src="https://habrastorage.org/webt/az/w9/2i/azw92ih1mulgzijr1gdgbenx8k0.jpeg"><br><br>  Ou voici un extrait de vid√©o lorsque vous l'ajoutez √† vos favoris, puis le regardez dans vos collections. <br><br><img src="https://habrastorage.org/webt/ub/ge/yd/ubgeydeso0lwyy4t67ejiz7uh6w.jpeg"><br><br>  Sonne comme?  √âvidemment, semble-t-il.  Et alors?  Si nous permettons vraiment aux services d'int√©grer facilement nos composants finis dans d'autres services de portail, alors √©videmment ce service, du fait que les utilisateurs peuvent interagir avec leurs donn√©es sur diff√©rentes plateformes, obtiendra plus d'utilisateurs.  C'est super.  Les utilisateurs en b√©n√©ficieront √©galement.  Ils verront les m√™mes choses √©galement.  Ils se comporteront comme d'habitude.  Autrement dit, il n'est pas n√©cessaire de deviner encore et encore ce que le concepteur avait en t√™te ici et comment interagir avec lui. <br><br>  Et enfin, l'entreprise en tirera des √©conomies √©videntes.  De plus, il semble juste - qu'y a-t-il pour constituer un aper√ßu vid√©o et une sorte de signature / En fait, pour l'obtenir comme √ßa, vous devez mener beaucoup d'exp√©riences diff√©rentes, tester diff√©rentes hypoth√®ses, choisir les tailles, les couleurs, les retraits.  Ajoutez des √©l√©ments, peut-√™tre, puis supprimez-les, car ils n'ont pas vol√©.  Et ce qui s'est pass√©, ce qui fonctionne vraiment, est le r√©sultat d'un tr√®s long processus.  Et si √† chaque fois dans chaque nouvel endroit de le faire √† nouveau, c'est un √©norme effort. <br><br>  Imaginez maintenant.  Disons que nous avons quelque chose qui fonctionne bien.  Partout, partout, ils l'ont mis en ≈ìuvre, puis ils ont men√© une nouvelle exp√©rience et r√©alis√© ce qui pouvait √™tre am√©lior√©.  Et encore une fois, nous devons r√©p√©ter toute cette cha√Æne de mise en ≈ìuvre.  Cher <br><br><img src="https://habrastorage.org/webt/ex/8c/1_/ex8c1_tlclflyej-krijb8m20fk.jpeg"><br><br>  D'accord, il semble √©vident de bien r√©utiliser.  Mais maintenant, nous devons r√©soudre un certain nombre de nouveaux probl√®mes.  Vous devez comprendre o√π stocker ce nouveau code.  D'une part, cela semble logique.  Ici nous avons un extrait vid√©o, il est r√©alis√© par l'√©quipe vid√©o, ils ont un r√©f√©rentiel avec leur projet.  Il faudrait probablement y mettre.  Mais comment alors le distribuer √† d'autres r√©f√©rentiels de tous les autres gars?  Et si d'autres gars veulent apporter quelque chose √† eux dans cet extrait?  Encore une fois pas clair. <br><br>  Il est n√©cessaire de le versionner d'une mani√®re ou d'une autre.  Vous ne pouvez rien changer, et donc, le tour est jou√©, tout se d√©roule soudainement.  Quelque chose doit √™tre test√©.  De plus, nous l'avons par exemple test√© sur le service de la vid√©o elle-m√™me.  Mais que se passe-t-il si, lorsqu'il est int√©gr√© √† un autre service, quelque chose se casse?  Encore une fois pas clair. <br><br>  En fin de compte, il est en quelque sorte n√©cessaire d'assurer en quelque sorte une livraison assez rapide √† diff√©rents services, car ce sera √©trange si nous avons quelque part la version pr√©c√©dente, quelque part de nouveau.  L'utilisateur semble cliquer sur la m√™me chose et le comportement est diff√©rent.  Et nous devons en quelque sorte offrir aux d√©veloppeurs de diff√©rentes √©quipes la possibilit√© d'apporter des modifications √† ce code commun.  Nous devons en quelque sorte leur apprendre √† tout utiliser.  Nous avons un long chemin √† parcourir pour que la r√©utilisation des interfaces soit pratique. <br><br><img src="https://habrastorage.org/webt/gu/a8/en/gua8ensfq4qkfjd9hwgrf3dpeko.jpeg"><br><br>  Nous avons commenc√© dans des temps imm√©moriaux, de retour dans SVN, et c'√©tait comme une lampe et pratique: un papa avec HTML, tout comme dans Bootstrap.  Vous le copiez pour vous.  √Ä c√¥t√© de papa avec des styles, une sorte de JS l√†-bas, qui a ensuite su simplement montrer / cacher quelque chose.  Et c'est tout. <br><br><img src="https://habrastorage.org/webt/tg/xu/sx/tgxusxowszje9vwtdvxf4yy4_os.jpeg"><br><br>  D'une certaine mani√®re, la liste des composants ressemblait √† ceci.  Le b-domeg, qui √©tait responsable de l'autorisation, est mis en √©vidence ici.  Peut-√™tre vous souvenez-vous encore, sur Yandex, en effet, il y avait un tel formulaire de connexion et de mot de passe, avec un toit.  Nous avons appel√© la "maison", m√™me si elle faisait allusion √† l'enveloppe du courrier, car ils entraient g√©n√©ralement dans le courrier. <br><br>  Ensuite, nous avons mis au point une m√©thodologie compl√®te pour pouvoir prendre en charge des interfaces communes. <br><br><img src="https://habrastorage.org/webt/tu/7h/08/tu7h08reemfp5mrp8rib5a3ib9q.jpeg"><br><br>  La biblioth√®que elle-m√™me au sein de l'entreprise a acquis son propre site Web avec une recherche et toute taxonomie. <br><br><img src="https://habrastorage.org/webt/fv/pa/jn/fvpajnegfm13z-q1fzb1edglvn0.jpeg"><br><br>  Le r√©f√©rentiel ressemble maintenant √† ceci.  Vous voyez, aussi pr√®s de 10 000 commits et plus de 100 contributeurs. <br><br><img src="https://habrastorage.org/webt/h2/9r/ur/h29ruri7jkqnzacvu9dedijcjgu.jpeg"><br><br>  Mais c'est le dossier de la maison tr√®s b dans la nouvelle r√©incarnation.  Maintenant, elle ressemble √† √ßa.  Il y a d√©j√† plus de vos propres dossiers √† l'int√©rieur que la moiti√© d'un √©cran. <br><br><img src="https://habrastorage.org/webt/lu/u9/62/luu962u_j91qtinyg3gn-1-efwg.jpeg"><br><br>  Et donc le site a l'air aujourd'hui. <br><br><img src="https://habrastorage.org/webt/xj/ko/g-/xjkog-2xy19nuayhuliti4urgoy.jpeg"><br><br>  En cons√©quence, la biblioth√®que partag√©e est utilis√©e dans plus de 360 ‚Äã‚Äãr√©f√©rentiels √† l'int√©rieur de Yandex.  Et il y a diff√©rentes impl√©mentations, un cycle de mise au point d√©bogu√©, etc. Il semblerait qu'ici, nous avons une biblioth√®que commune, utilisons-la maintenant partout, et tout est super.  Le probl√®me de l'introduction de trucs communs partout r√©solu.  Pas vraiment. <br><br><img src="https://habrastorage.org/webt/rj/e5/0_/rje50_8ba6axvribhiogqzzxer8.jpeg"><br><br>  Essayer de r√©soudre le probl√®me de la r√©utilisation au stade o√π vous avez d√©j√† du code pr√™t √† l'emploi est trop tard.  Cela signifie qu'√† partir du moment o√π le concepteur a dessin√© la disposition des services, les a distribu√©s aux services, et en particulier √† l'√©quipe qui s'occupe des composants communs, un certain temps s'est √©coul√©.  Tr√®s probablement, √† ce moment-l√†, il se r√©v√©lera que sur chaque service distinct, ou au moins sur plusieurs d'entre eux, ce m√™me √©l√©ment d'interface a √©galement √©t√© constitu√©.  Ils se sont arrang√©s √† leur mani√®re. <br><br>  Et m√™me si une solution g√©n√©rale est apparue plus tard dans la biblioth√®que partag√©e, il s'av√®re que vous devrez maintenant r√©impl√©menter tout ce que vous avez r√©ussi √† terminer sur chaque service.  Et c'est encore un probl√®me.  C'est tr√®s difficile √† justifier.  Voici l'√©quipe.  Elle a ses propres objectifs, tout fonctionne d√©j√† bien.  Et nous disons de telles choses - regardez, enfin nous avons une petite chose commune, prenez-la.  Mais l'√©quipe est comme √ßa - nous avons d√©j√† assez de travail.  Pourquoi en avons-nous besoin?  D'ailleurs, tout √† coup quelque chose ne nous conviendra pas l√†-bas?  Nous ne voulons pas. <br><br>  Le deuxi√®me gros probl√®me est, en fait, la diffusion d'informations sur ce que sont ces nouveaux composants sympas.  Tout simplement parce qu'il y a tellement de d√©veloppeurs, ils sont occup√©s avec leurs t√¢ches quotidiennes.  Et ils ont la possibilit√© de s'asseoir et d'√©tudier ce qui se passe l√†-bas dans le domaine du commun, peu importe ce que cela signifie, en fait, non plus. <br><br>  Et le plus gros probl√®me est qu'il est fondamentalement impossible de r√©soudre les probl√®mes communs √† tous les services avec une seule √©quipe d√©di√©e.  Autrement dit, lorsque nous avons une √©quipe qui s'occupe de la vid√©o et qu'elle cr√©e son propre extrait avec la vid√©o, il est clair que nous serons d'accord avec eux et ferons cet extrait dans une sorte de biblioth√®que centralis√©e.  Mais il existe directement des milliers d'exemples de ce type sur diff√©rents services.  Et ici, certainement, aucune main ne suffit.  Par cons√©quent, la seule solution est que tout le monde traite constamment les composants g√©n√©raux. <br><br><img src="https://habrastorage.org/webt/y7/ay/9p/y7ay9pqgaxomogw-xz4x7hdlgb4.jpeg"><br><br>  Et vous devez commencer, assez √©trangement, non pas avec des d√©veloppeurs d'interfaces, mais avec des concepteurs.  Ils le comprennent aussi.  Nous avons plusieurs tentatives simultan√©es √† l'int√©rieur pour que ce processus converge.  Les concepteurs cr√©ent des syst√®mes de conception.  J'esp√®re vraiment que t√¥t ou tard il sera possible de les r√©duire en un seul syst√®me commun prenant en compte tous les besoins. <br><br><img src="https://habrastorage.org/webt/be/vd/yd/bevdyd-kpziztd5yxc6qp98xgqy.jpeg"><br><br>  Maintenant, il y en a plusieurs.  √âtonnamment, les t√¢ches sont exactement les m√™mes: acc√©l√©rer le processus de d√©veloppement, r√©soudre le probl√®me de coh√©rence, ne pas r√©inventer la roue et ne pas dupliquer le travail effectu√©. <br><br><img src="https://habrastorage.org/webt/0z/xd/ci/0zxdcimwdz-s1d8oaiu3dinhxce.jpeg"><br><br>  Et une fa√ßon de r√©soudre le probl√®me de la communication d'informations est de permettre aux d√©veloppeurs de conna√Ætre d'autres √©quipes, dont une qui s'occupe des composants d'interface courants.  Nous le r√©solvons de ce c√¥t√© par le fait que nous avons un bootcamp, qui, lorsqu'un d√©veloppeur appara√Æt sur Yandex, lui permet tout d'abord d'aller dans diff√©rentes √©quipes pendant huit semaines, voir comment √ßa marche, puis faire un choix o√π √ßa va marcher .  Mais pendant ce temps, ses horizons s'√©largiront consid√©rablement.  Il sera guid√© l√† o√π c'est. <br><br>  Nous avons parl√© de choses communes.  Voyons maintenant comment tout cela se rapproche du processus de d√©veloppement.  Disons que nous avons une biblioth√®que commune appel√©e Lego.  Et nous voulons impl√©menter une nouvelle fonctionnalit√© ou faire une sorte de r√©vision.  Nous avons corrig√© le code et publi√© la version. <br><br>  Nous devons publier cette version dans npm, puis aller dans le r√©f√©rentiel d'un projet o√π la biblioth√®que est utilis√©e et impl√©menter cette version.  Tr√®s probablement, cela corrigera un certain nombre dans package.json, red√©marrez l'assembly.  Peut-√™tre m√™me r√©g√©n√©rer le package-lock, cr√©er une demande d'extraction, voir comment les tests r√©ussissent.  Et que verrons-nous? <br><br><img src="https://habrastorage.org/webt/ri/ft/dz/riftdzizz3nhvcxu4ivi1gtnzxy.jpeg"><br><br>  Tr√®s probablement, nous verrons qu'un bogue s'est produit.  Parce qu'il est tr√®s difficile de pr√©voir toutes les fa√ßons d'utiliser le composant sur diff√©rents services.  Et si cela arrivait, quelle est notre issue?  Nous avons donc r√©alis√© que cela ne s'embo√Ætait pas.  Nous continuons √† refaire.  Nous retournons au r√©f√©rentiel avec une biblioth√®que partag√©e, corrigeons le bogue, publions la nouvelle version, l'envoyons √† npm, d√©ployons, ex√©cutons les tests, et qu'est-ce que c'est?  Tr√®s probablement, un bug se reproduira. <br><br>  Et c'est toujours bon quand nous l'impl√©mentons dans un seul service, et l√†, tout s'est cass√© tout de suite.  C'√©tait beaucoup plus triste quand nous avons fait tout cela, mis en ≈ìuvre dans dix services diff√©rents.  Rien ne s'est cass√© l√†.  Nous sommes d√©j√† all√©s pr√©parer un smoothie, ou tout ce qui est n√©cessaire.  √Ä l'heure actuelle, la version est introduite dans le 11e projet, ou dans le 25e.  Et il y a un bug.  Nous revenons tout au long de la cha√Æne, faisons un patch et l'impl√©mentons dans les 20 services pr√©c√©dents.  De plus, ce patch peut exploser dans l'un des pr√©c√©dents.  Eh bien et ainsi de suite.  Amusez-vous. <br><br>  Il semble que la seule solution consiste √† √©crire beaucoup de code tr√®s rapidement.  T√¥t ou tard, si nous courons tr√®s, tr√®s vite, tr√®s probablement, nous parviendrons √† avoir le temps de mettre en production une version dans laquelle il n'y a pas encore de bug.  Mais alors une nouvelle fonctionnalit√© appara√Ætra, et rien ne nous sauvera. <br><br>  D'accord.  En fait, le sch√©ma peut ressembler √† ce qui suit.  L'automatisation nous aidera.  Il s'agit de cela, en g√©n√©ral, de toute l'histoire, en fait.  Nous avons eu l'id√©e qu'un r√©f√©rentiel avec une biblioth√®que commune puisse √™tre construit selon le sch√©ma de mono-r√©f√©rentiel.  Vous l'avez probablement rencontr√©, il existe maintenant de nombreux projets de ce type, en particulier des projets d'infrastructure.  Toutes sortes de Babel, et des choses comme √ßa, vivent comme des mono-r√©f√©rentiels quand il y a beaucoup de packages npm diff√©rents √† l'int√©rieur.  Ils peuvent √™tre en quelque sorte connect√©s les uns aux autres.  Et ils sont g√©r√©s, par exemple, via Lerna, de sorte qu'il est pratique de publier tout cela, compte tenu des d√©pendances. <br><br>  Selon ce sch√©ma, il est possible d'organiser un projet o√π tout en commun est stock√© pour toute l'entreprise.  Il peut y avoir une biblioth√®que, qui est engag√©e dans une √©quipe distincte.  Et, notamment, il peut y avoir des packages que chaque service individuel d√©veloppe, mais qu'il souhaite partager avec d'autres. <br><br><img src="https://habrastorage.org/webt/qb/tx/ck/qbtxckwz4xeknxszl3zkfftpkjo.jpeg"><br><br>  Ensuite, le circuit ressemble √† ceci.  Le d√©but n'est pas diff√©rent.  D'une mani√®re ou d'une autre, nous devons apporter des modifications au code commun.  Et puis, avec l'aide de l'automatisation, d'un seul coup, nous voulons ex√©cuter des tests non seulement √† c√¥t√© de ce code, mais imm√©diatement dans tous les projets o√π ce code commun est int√©gr√©.  Et voyez leur r√©sultat agr√©g√©. <br><br>  Ensuite, m√™me si un bogue s'est produit l√†-bas, nous n'avons toujours pas r√©ussi √† publier de version, nous ne l'avons pas publi√©e dans les npm, nous ne l'avons pas impl√©ment√©e sp√©cifiquement de nos mains, nous n'avons pas fait tous ces efforts suppl√©mentaires.  Nous avons vu un bogue, l'avons imm√©diatement corrig√© localement, avons de nouveau ex√©cut√© des tests g√©n√©raux, et c'est tout en production. <br><br><img src="https://habrastorage.org/webt/lo/8-/7d/lo8-7d5hg38lvxpsswq05l2vipm.jpeg"><br><br>  √Ä quoi cela ressemble-t-il dans la pratique?  Voici une demande d'extraction avec un correctif.  Ici, vous pouvez voir que l'automatisation a appel√© les r√©viseurs n√©cessaires pour v√©rifier que tout va bien dans le code.  En effet, les examinateurs sont venus et ont convenu que tout allait bien.  Et √† ce moment, le d√©veloppeur √©crit simplement une commande sp√©ciale / canary, directement dans la demande de tirage. <br><br>  Un robot vient et dit - d'accord, j'ai cr√©√© une t√¢che pour que le prochain miracle se produise.  Le miracle est qu'une version canari avec ces modifications a √©t√© publi√©e et qu'elle a √©t√© impl√©ment√©e automatiquement dans tous les r√©f√©rentiels o√π ce composant est utilis√©.  Des autotests y ont √©t√© lanc√©s, comme dans ce r√©f√©rentiel.  Ici, vous pouvez voir qu'un tas de contr√¥les ont √©t√© lanc√©s. <br><br>  Derri√®re chaque test, il y a une centaine de tests diff√©rents.  Mais il est important qu'en plus des tests locaux que nous pourrions √©crire s√©par√©ment sur le composant, nous avons √©galement lanc√© des tests pour chaque projet o√π il a √©t√© impl√©ment√©.  Des tests d'int√©gration y ont d√©j√† √©t√© lanc√©s: on v√©rifie que ce composant fonctionne normalement dans l'environnement dans lequel il est con√ßu sur le service.  Cela nous garantit d√©j√† vraiment que nous n'avons rien oubli√©, que nous n'avons rien cass√© √† personne.  Si tout va bien ici, alors nous pouvons vraiment publier une version en toute s√©curit√©.  Et si quelque chose ne va pas ici, nous allons le r√©parer ici. <br><br>  Il semble que cela devrait nous aider.  Si votre entreprise a quelque chose de similaire, vous voyez qu'il y a des pi√®ces que vous pourriez potentiellement r√©utiliser, mais pour l'instant vous devez les r√©organiser car il n'y a pas d'automatisation, je vous recommande de trouver une solution similaire. <br><br><img src="https://habrastorage.org/webt/lu/vp/jp/luvpjp0a5tof1v56lwn7uq_nwiq.jpeg"><br><br>  Qu'avons-nous obtenu?  Le monorepositaire g√©n√©ral dans lequel les linters sont reconstruits.  Autrement dit, tout le monde √©crit le code de la m√™me mani√®re, il a toutes sortes de tests.  Toute √©quipe peut venir, mettre son composant et le v√©rifier avec des tests unitaires JS, le couvrir de captures d'√©cran, etc. Tout sera d√©j√† sorti de la bo√Æte.  L'examen de code intelligent que j'ai mentionn√©.  Gr√¢ce √† de riches outils internes, c'est vraiment intelligent ici. <br><br>  Le d√©veloppeur est-il en vacances maintenant?  L'appeler dans une demande de pull est inutile; le syst√®me en tiendra compte.  Le d√©veloppeur est-il malade?  Le syst√®me en tiendra √©galement compte.  Si les deux conditions ne sont pas remplies et que le d√©veloppeur semble √™tre libre, il recevra une notification dans l'un de ses messagers de son choix.  Et il est comme √ßa: non, maintenant je suis occup√© par quelque chose d'urgence ou lors d'une r√©union.  Il peut y venir et simplement √©crire la commande / busy.  Le syst√®me comprendra automatiquement que vous devez attribuer le suivant √† la liste. <br><br>  L'√©tape suivante consiste √† publier la m√™me version canari.  Autrement dit, avec tout changement de code, nous devons publier un ensemble de services que nous pouvons v√©rifier sur diff√©rents services.  Ensuite, nous devons ex√©cuter des tests lors du d√©ploiement sur tous ces services.  Et quand tout s'est r√©uni - lancez les versions. <br><br>  Si une modification affecte une partie statique qui doit √™tre charg√©e √† partir du CDN, vous devez la publier automatiquement s√©par√©ment.     .    , ,  ,  ,  .     ,     , ,  changelog     - . <br><br>  ,       ,     ,        ,   .       ,   ,      . <br><br>   ,        .       . , ,  :          ,       ?  .         ,            .      .     , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460811/">https://habr.com/ru/post/fr460811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460799/index.html">Demande de paiement API de navigateur standard</a></li>
<li><a href="../fr460801/index.html">27 outils VS Code g√©niaux pour les d√©veloppeurs JavaScript modernes</a></li>
<li><a href="../fr460803/index.html">Lire pour l'√©t√©: des livres pour les techniciens</a></li>
<li><a href="../fr460805/index.html">Comment transf√©rer des donn√©es entre microcontr√¥leurs √† 100 Mbps</a></li>
<li><a href="../fr460807/index.html">Mesurer sept fois, une fois impl√©menter l'outil BI</a></li>
<li><a href="../fr460813/index.html">Comment utiliser les diagrammes de Voronoi pour contr√¥ler l'IA</a></li>
<li><a href="../fr460815/index.html">Inventer la biblioth√®que vusb</a></li>
<li><a href="../fr460819/index.html">WorldSkills: avis du participant de l'Olympiade</a></li>
<li><a href="../fr460821/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 307 (du 15 au 21 juillet)</a></li>
<li><a href="../fr460823/index.html">√âv√©nements num√©riques √† Moscou du 22 juillet au 28 juillet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>