<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏼 📉 🔀 Active Restore: dapatkah pemulihan bencana lebih cepat? Jauh lebih cepat? 🍸 🧔 🧜🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mencadangkan data penting itu baik. Tetapi bagaimana jika pekerjaan itu perlu dilanjutkan segera, dan setiap menit diperhitungkan? Kami di Acronis mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Active Restore: dapatkah pemulihan bencana lebih cepat? Jauh lebih cepat?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acronis/blog/477658/">  Mencadangkan data penting itu baik.  Tetapi bagaimana jika pekerjaan itu perlu dilanjutkan segera, dan setiap menit diperhitungkan?  Kami di Acronis memutuskan untuk memeriksa seberapa mungkin menyelesaikan tugas memulai sistem secepat mungkin.  Dan ini adalah posting pertama dalam seri Active Restore di mana saya akan memberi tahu Anda bagaimana kami memulai proyek dengan Innopolis University, solusi apa yang kami temukan, dan apa yang kami kerjakan hari ini.  Detail - di bawah potongan. <br><br><img src="https://shydyrond.ru/backend/uploads/Kak%20uvelichit%27%20skorost%27%20raboty%20komp%27yutera/kak-uvelichit-skorost-raboty-kompyutera.jpg" alt="gambar"><br><a name="habracut"></a><br>  Hai  Nama saya Daulet Tumbaev, dan hari ini saya ingin berbagi dengan Anda pengalaman saya dalam mengembangkan sistem yang mempercepat pemulihan bencana.  Untuk berbicara tentang seluruh jalur pengembangan proyek, mari kita mulai sedikit dari jauh.  Saat ini saya bekerja di Acronis, tetapi saya juga lulusan Universitas Innopolis, yang saya lulus dalam Program Magister Manajemen Pengembangan Perangkat Lunak (dikenal sebagai MSIT-SE).  Innopolis adalah universitas muda, dan kurikulumnya bahkan lebih muda.  Tapi kemudian dibangun di atas kurikulum Universitas Carnegie Mellon (Universitas Carnegie Mellon), yang dalam pencapaiannya ada topik seperti proyek industri. <br><br>  Tujuan dari proyek industri adalah untuk membenamkan siswa dalam pengembangan nyata dan mengkonsolidasikan pengetahuan yang diperoleh dalam praktik.  Untuk ini, universitas bekerja sama dengan perusahaan seperti Yandex, Acronis, MTC dan banyak lainnya (secara total, universitas memiliki 144 mitra untuk 2018).  Dalam rangka kerjasama, perusahaan menawarkan arahan kerja mereka ke universitas, dan siswa memilih salah satu proyek yang lebih dekat dengan mereka dalam minat dan tingkat pelatihan mereka.  Hanya dua tahun yang lalu, saya masih "di sisi lain dari barikade" dan bekerja sebagai mahasiswa di proyek Acronis lainnya.  Tapi kali ini, saya menjadi konsultan teknis untuk siswa dari perusahaan dan mengusulkan proyek Active Restore ke Innopolis.  Gagasan Active Restore dirumuskan oleh tim Kernel di Acronis, tetapi pengembangan solusi dimulai dengan Universitas Innopolis. <br><br><h3>  Active Restore - mengapa ini diperlukan? </h3><br>  Secara tradisional, pemulihan bencana bekerja sesuai dengan skema standar.  Setelah mengalami masalah dengan komputer, Anda pergi ke antarmuka web beberapa sistem cadangan, misalnya, Acronis True Image, dan klik tombol "restore" yang besar.  Selanjutnya, Anda perlu menunggu N menit, dan hanya setelah itu Anda dapat terus bekerja. <br><br><img src="https://habrastorage.org/webt/lr/qz/at/lrqzata7ct47-wrmeeiqxvrnoq8.jpeg"><br><br>  Masalahnya adalah bahwa angka N ini, juga dikenal sebagai RTO (sasaran waktu pemulihan), waktu pemulihan yang diizinkan, bisa sangat mengesankan, yang tergantung pada kecepatan koneksi (jika pemulihan dari cloud terjadi), pada volume hard drive komputer Anda dan sejumlah faktor lainnya.  Bisakah itu dikurangi?  Ya, Anda bisa, karena untuk melanjutkan pekerjaan Anda tidak selalu memerlukan disk komputer lengkap.  Foto dan video yang sama tidak memengaruhi fungsionalitas perangkat dan dapat ditarik kemudian di latar belakang. <br><br><h3>  Pengemudi dibutuhkan ... </h3><br>  Sistem operasi mengharapkan untuk memulai dengan disk yang sudah selesai.  Oleh karena itu, Windows melakukan serangkaian pemeriksaan untuk integritas disk.  Sistem tidak akan memungkinkan permulaan yang normal dengan tidak adanya atau kerusakan beberapa file yang diharapkan oleh OS.  Untuk mengatasi masalah ini, diputuskan untuk meletakkan di disk apa yang disebut file redirector yang kami buat, yang menggantikan file yang hilang atau rusak, tetapi sebenarnya adalah boneka.  Untuk membuat pengalihan seperti itu tidak lama, karena sebenarnya mereka tidak memiliki konten. <br><br>  Pemulihan lebih lanjut terjadi sebagai berikut.  Proses latar belakang, bersamaan dengan pengoperasian sistem operasi, “boneka” diisi dengan data.  Proses pemulihan latar belakang memperhitungkan beban pada disk dan tidak melebihi batas yang ditentukan.  Namun, pengguna atau sistem operasi itu sendiri mungkin tiba-tiba meminta file yang belum ada.  Di sinilah mode pemulihan kedua berperan.  Prioritas file yang diminta ditingkatkan ke maksimum, dan proses pemulihan segera mengunggah file ke disk.  Sistem operasi menerima file yang diinginkan, walaupun dengan sedikit penundaan. <br><br>  Ini terlihat seperti gambar yang sempurna.  Namun, di dunia nyata, ada sejumlah besar jebakan dan potensi kebuntuan.  Bersama dengan mahasiswa sarjana Innopolis, kami memutuskan untuk menyelidiki skenario pemulihan ini, mengevaluasi perolehan dalam RTO, dan memahami apakah pendekatan ini layak?  Memang, keputusan seperti itu di pasar sama sekali tidak ada pada waktu itu. <br><br>  Dan jika saya memutuskan untuk memberikan komponen layanan kepada orang-orang dari Innopolis, maka di dalam pekerjaan Acronis dimulai pada <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/ifs/file-system-minifilter-drivers">driver sistem file mini-filter</a> .  Ini dilakukan oleh tim Kernel Windows.  Rencananya adalah ini: <br><br><ul><li>  Jalankan driver pada tahap awal memulai OS, </li><li>  Selama operasi, ketika <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode">ruang pengguna</a> sepenuhnya siap, unduh layanan </li><li>  Layanan ini memproses permintaan pengemudi dan mengoordinasikan pekerjaan selanjutnya. </li></ul><br><img src="https://habrastorage.org/webt/2a/vl/qf/2avlqfvl30ekh3xdix5xjwjggdu.jpeg"><br><h3>  Seluk-beluk rekayasa pengemudi </h3><br>  Jika kolega saya akan berbicara tentang layanan di pos lain, maka dalam teks ini kami akan mengungkapkan seluk beluk pengembangan driver.  Mini-filter driver yang sudah dikembangkan memiliki dua mode operasi - ketika sistem mulai dalam mode normal, dan ketika sistem baru saja mengalami kegagalan dan pemulihannya terjadi.  Sebelum memuat pustaka pengguna dan aplikasi, dan karena itu layanan kami, driver berperilaku sama.  Dia tidak tahu keadaan sistem saat ini.  Akibatnya, setiap membuat, membaca dan menulis dicatat, semua meta-data dicatat.  Dan ketika layanan online, pengemudi memberikan informasi ini ke layanan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x4/x0/0c/x4x00ccpfivzeboam8r6zdvx4re.png"></div><br>  Dalam hal start normal, layanan mentransmisikan sinyal "Santai" ke pengemudi sehingga "santai" dan tidak lagi mencatat semua data dengan cermat.  Dalam kasus ini, driver beralih ke pendataan hanya perubahan pada disk dan melaporkannya ke layanan, yang dengan bantuan alat Acronis lainnya mempertahankan cadangan disk dalam kondisi terbaru di media yang ditentukan pengguna.  Ini bisa berupa cloud, remote, bertahap, atau cadangan malam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/34/he/x1/34hex17zyywzzuv7rlivamn46e0.png"></div><br>  Jika mode pemulihan diaktifkan, layanan memberi tahu pengemudi bahwa ia perlu bekerja dalam mode "Pemulihan".  Sistem baru saja pulih setelah kegagalan, dan segera setelah memberikan permintaan untuk membuka file pada disk, mini-filter harus mencegat operasi ini, membuat permintaan ini sendiri, memeriksa apakah ada file pada disk dan apakah itu dapat dibuka. <br><br>  Jika tidak ada file, filter mini mentransfer informasi ini ke layanan, yang meningkatkan prioritas pemulihan file (selama ini, pemulihan sedang berlangsung).  Ternyata file ini baru saja melompat ke awal antrian.  Setelah itu, layanan itu sendiri (atau oleh alat Acronis lainnya) mengembalikan file ini dan memberi tahu driver bahwa semuanya baik-baik saja, sekarang sistem operasi dapat mengaksesnya dan driver "melepaskan" permintaan asli, dari sistem ke disk. <br><br>  Jika pemulihan tidak memungkinkan, layanan memberi tahu pengemudi bahwa tidak ada file di cadangan juga.  Pengandar filter mini kami hanya melewatkan permintaan sistem lebih lanjut dan pemohon asli (OS itu sendiri atau aplikasi) menerima kesalahan "file tidak ditemukan".  Namun, ini cukup normal jika file tersebut benar-benar tidak ada di disk dan di cadangan. <br><br><img src="https://habrastorage.org/webt/yv/8w/qe/yv8wqetbjrg3kq2hkr2vosj8dve.png"><br><br>  Tentu saja, sistem operasi akan bekerja lebih lambat, karena membaca file atau pustaka apa pun terjadi dalam beberapa tahap, dan mungkin dengan akses ke sumber daya jarak jauh.  Tetapi kemudian pengguna dapat mulai bekerja sesegera mungkin saat pemulihan masih berlangsung. <br><br><h3>  Perlu lebih rendah, bahkan lebih rendah ... </h3><br>  Prototipe telah membuktikan nilainya.  Tetapi kami juga menemukan kebutuhan untuk melanjutkan, karena dalam beberapa kasus kebuntuan masih terjadi.  Misalnya, sistem operasi dapat meminta berbagai pustaka di beberapa utas, yang mengarah pada penutupan layanan kami. <br><br>  Masalah yang saya kerjakan sekarang adalah meningkatkan kecepatan Active Restore dan meningkatkan tingkat keamanan sistem.  Misalkan sistem tidak memerlukan seluruh file, hanya sebagian saja yang diperlukan.  Untuk ini, driver lain dikembangkan - driver filter disk.  Tidak lagi berfungsi pada file, tetapi pada level blok.  Prinsip operasi serupa: dalam operasi normal, pengemudi hanya mencatat blok yang diubah pada disk, dan dalam mode pemulihan, ia mencoba membaca blok sendiri, jika terjadi kegagalan, ia meminta layanan untuk meningkatkan prioritas.  Namun, semua bagian lain dari sistem tetap sama.  Misalnya, layanan tingkat OS bahkan tidak curiga sedang ditawarkan untuk berkomunikasi dengan driver lain, karena tugas utamanya adalah menyediakan OS dengan data yang diperlukan untuk berfungsi.  Arah ini memerlukan peningkatan yang signifikan, jika saja karena layanan masih tidak tahu bagaimana berpikir di tingkat blok. <br><br>  Langkah selanjutnya, saya memutuskan untuk menjalankan driver lebih dalam dan lebih awal, turun ke level driver UEFI dan aplikasi Windows Asli daripada layanan.  Untuk ini, <a href="https://edk2-docs.gitbooks.io/edk-ii-uefi-driver-writer-s-guide/3_foundation/37_uefi_images/372_drivers.html">driver boot UEFI</a> (atau driver DXE) dikembangkan, yang dimulai dan mati sebelum OS dimulai.  Tapi "sejarah" driver UEFI, detail tentang perakitan dan instalasi, serta spesifik aplikasi Windows Native, kami akan pertimbangkan di posting berikutnya.  Jadi berlangganan ke blog kami, dan untuk saat ini saya akan menyiapkan cerita tentang tahap kerja selanjutnya.  Saya akan senang atas komentar dan saran Anda. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id477658/">https://habr.com/ru/post/id477658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id477646/index.html">Matematikawan memotong bentuk untuk mencari bagian persamaan</a></li>
<li><a href="../id477648/index.html">MVCC dalam PostgreSQL-3. Versi baris</a></li>
<li><a href="../id477650/index.html">Enkripsi lalu lintas TLS menurut algoritma GOST-2012 dengan Stunnel</a></li>
<li><a href="../id477654/index.html">Mencoba instans operator yang ditingkatkan di Jawa 14</a></li>
<li><a href="../id477656/index.html">Jadi tetap saja, mengapa Anda perlu membuatnya?</a></li>
<li><a href="../id477662/index.html">Akses ke Redd Ban di Jembatan FTDI</a></li>
<li><a href="../id477668/index.html">29 November, 6 malam - devleads-mitap</a></li>
<li><a href="../id477670/index.html">Apa yang memberi otomatisasi pengujian</a></li>
<li><a href="../id477672/index.html">Hak dan kewajiban anggota tim: aspek hukum dan budaya</a></li>
<li><a href="../id477674/index.html">Apakah AI berarti cinta?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>