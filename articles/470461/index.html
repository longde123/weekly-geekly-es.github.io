<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèæ üìÄ üë©‚Äçüíº C√≥mo trasplantamos a todo el equipo a otro idioma en un d√≠a (en realidad no) üç≥ üçÇ ‚ûø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comienzo de una plantilla para una "puesta a tierra" r√°pida de desarrolladores PHP en Go 

 Durante 15 a√±os hemos estado haciendo un back-end en PHP. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo trasplantamos a todo el equipo a otro idioma en un d√≠a (en realidad no)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tuturu/blog/470461/"><img src="https://habrastorage.org/webt/zn/jh/no/znjhnorp0e_1yxm68q7zvx02eoi.jpeg"><br>  <i>Comienzo de una plantilla para una "puesta a tierra" r√°pida de desarrolladores PHP en Go</i> <br><br>  Durante 15 a√±os hemos estado haciendo un back-end en PHP.  Y una vez que se tom√≥ una decisi√≥n estrat√©gica: primero, reescriba los lugares m√°s cargados en Go y luego desarrolle nuevos servicios en √©l. <br><br>  Imag√≠nese: desea hablar sobre un nuevo lenguaje a un equipo de 40 desarrolladores que preparan PHP tan bien que crearon un sistema de alta disponibilidad y en tiempo real multiproceso.  <b>En el peor de los casos, te quemar√°n, en el mejor de los casos te escuchar√°n, pero continuar√°n haciendo lo mismo que antes.</b>  Esto es si ingresas el idioma por la fuerza. <br><br>  Por lo tanto, decidimos organizar primero un hackathon y luego invitar a todos al lado oscuro.  Si al menos diez personas los hubieran reclutado, con el tiempo les habr√≠an mostrado a todos los dem√°s un ejemplo personal de lo genial que es esto. <br><br>  Te dir√© paso a paso c√≥mo repetir esa experiencia contigo.  Y sobre los resultados de nuestra implementaci√≥n.  Y sobre lo que sucede en la cabeza de un desarrollador de PHP cuando ve un nuevo lenguaje. <br><br>  Comenzamos con la preparaci√≥n de la plantilla y el CI / CD, que le permite cerrar en 15 segundos.  Para escribirlo usted mismo, necesita alrededor de dos semanas.  Lo hicimos de antemano. <a name="habracut"></a><br><br><h3>  Paso 1. Habla sobre Golang </h3><br>  A menudo tenemos muchos seminarios internos.  Alguien quiere contar algo, escribe un anuncio, re√∫ne personas y cuenta.  Sucede que se trata especialmente de la regulaci√≥n del tr√°fico a√©reo en Rusia, sucede que es una historia sobre viajes, pero m√°s a menudo se trata de alguna tecnolog√≠a o caracter√≠stica que se ha implementado.  Y puede ser √∫til para alguien m√°s.  Entonces, organizamos un seminario interno sobre Go, donde hablamos sobre los beneficios del lenguaje.  R√°pido (compilado sin pandereta: PHP tambi√©n se puede compilar, pero m√°s dif√≠cil), multiproceso listo para usar, simplemente soportado, puede escribir sin un marco directamente en un cuaderno, es decir, no hay hemorroides con dependencias de tercer nivel que el marco desarrollado arrastra junto con √©l.  Implementar en 15 segundos.  Y parece que ni siquiera hay defectos obvios en nuestra situaci√≥n.  Sugerimos probar.  Era como una historia sobre otro mundo: aqu√≠ est√° el lenguaje, mira c√≥mo difiere, el pr√≥ximo fin de semana habr√° un hackathon para aquellos que est√©n interesados. <br><br><h3>  Paso 2. Documentaci√≥n </h3><br>  Tres d√≠as antes del hackathon, enviamos un enlace a un curso introductorio de media hora sobre sintaxis, tipos de datos b√°sicos y funcionalidad.  Y documentaci√≥n b√°sica.  Esto es lo que obtuvieron los desarrolladores: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">golang.org/doc</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tour.golang.org</a> <br><br>  Adem√°s de contactos Go-senior en el interior. <br><br><h3>  Paso 3. Grupos </h3><br>  Adem√°s, propusimos dividirnos en grupos y llevar las tareas que nos gustar√≠a implementar aqu√≠ y ahora en un nuevo idioma.  Inmediatamente advirtieron que el hackathon estar√≠a en la oficina despu√©s de horas (el s√°bado), el asunto era voluntario, pero ser√≠a posible resolver la tarea de combate y aprender en la pr√°ctica en modo casi en pareja con una persona que conoce los matices del idioma.  Esto interes√≥ a 40 personas, y comenzaron a luchar en grupos y reclutar tareas.  No todos tuvieron √©xito con los grupos: muchos vinieron con la tarea de uno solo, los grupos eran dos, con menos frecuencia, tres personas.  Las tareas mismas estaban en la cima de los retrasos o estaban relacionadas con la duplicaci√≥n de alg√∫n tipo de lugar inhibitorio. <br><br>  El objetivo final era hacer una tarea en el hackathon, que luego se puede enrollar un poco y "vender" al propietario del producto (gerente de direcci√≥n).  En el esp√≠ritu: "Mira, funcion√≥ antes de 40 segundos, y ahora hace todo en dos".  Esta parte es la m√°s importante para el √©xito estrat√©gico de introducir el lenguaje en equipos: se necesita una peque√±a victoria desde el principio. <br><br><h3>  Paso 4. Trabajo invisible </h3><br>  Preparamos una plantilla, de la que habl√© anteriormente, para nuestra infraestructura, que nos permitir√≠a correr inmediatamente sin bailar para construir y conectar todo lo que necesita.  Esta plantilla reemplaza el marco.  Difundirlo no tiene mucho sentido: repito, est√° muy encarcelado solo para nosotros. <br><br>  Enumerar√© solo la funcionalidad establecida en la plantilla: <br><br><ul><li>  Integraci√≥n con k8s. </li><li>  Exportar m√©tricas a prometeo. </li><li>  Configuraci√≥n a trav√©s de variables de entorno. </li><li>  Servidor HTTP. </li><li>  Opentracing. </li><li>  Registrador </li></ul><br>  Llevamos mucho tiempo trabajando en el estudio de Kubernetes y, como soluci√≥n, elegimos OpenShift, que ofrec√≠a grandes oportunidades para personalizar y configurar CI / CD.  Entonces afilamos la plantilla inmediatamente debajo de k8s.  La aplicaci√≥n creada en OpenShift crea un repositorio, recopila el esqueleto de la aplicaci√≥n, el servicio en k8s, aplica pol√≠ticas de seguridad, recopila el binario, se implementa en k8s y en menos de un minuto el servicio est√° disponible en la red.  Entonces, el hackathon tambi√©n se convirti√≥ en un evento donde los desarrolladores se presentaron a nuestro futuro PaaS. <br><br>  Tambi√©n preparamos un tablero en Grafana con m√©tricas b√°sicas, configuramos registros de exportaci√≥n para Kibana y agentes para Jaeger.  Para cada servicio, se generan enlaces a servicios, en los que puede obtener de inmediato toda la informaci√≥n necesaria. <br><br>  Luego, fue necesario acordar el acceso a las bases de datos que son necesarias para resolver los problemas de los participantes del hackathon.  Esto est√° mal, pero nos conectamos a las bases militares en solo lectura durante la duraci√≥n del trabajo.  Esta es otra raz√≥n por la cual el s√°bado es la carga m√°s peque√±a en este d√≠a. <br><br>  Le advirtieron a la cocina (le recuerdo que la tenemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gratis para bocadillos</a> , frutas de reques√≥n, pero no para comida caliente) sobre el evento.  Trajeron comida a la oficina para que no nos distraj√°ramos. <br><br><h3>  Paso 5. Hackathon mismo </h3><br>  Por razones obvias (familia, relajaci√≥n), algunos fallaron el s√°bado, por lo que dividimos a 15 personas en llamadas. <br><br>  Hablaron sobre nuestra plataforma PaaS, c√≥mo crear una aplicaci√≥n a partir de una plantilla, c√≥mo usar una plantilla.  Este marco, en el que hay contenedores para recopilar m√©tricas, comprobaciones de estado y m√©tricas, conectarse a una base de datos, etc., mostr√≥ c√≥mo conectar todo tipo de cosas diferentes.  Fue posible eliminar todo en su lugar o por adelantado (la plantilla tambi√©n se distribuy√≥ al hackathon).  Esta es una aplicaci√≥n lista para usar que debe ampliarse. <br><br>  Hablaron sobre las caracter√≠sticas de implementaci√≥n y desarrollo de Kubernetes (configuraci√≥n, registro, m√©tricas, trabajo con muestras listas, asignaci√≥n de recursos para el procesador y la memoria, etc.).  Intentaron desplegar "¬°Hola, mundo!". <br><br><img src="https://habrastorage.org/webt/ct/j5/ma/ctj5maql1tuvo1pwz3nurqi6x5c.png"><br><br>  Los chicos mismos crearon los servicios.  Me sorprendi√≥ gratamente la simplicidad y facilidad de uso de la plantilla.  Alguien ya tuvo tiempo de practicar en Golang, alguien solo hoje√≥ la documentaci√≥n. <br><br><img src="https://habrastorage.org/webt/ya/xq/2s/yaxq2spzorirno6pu2s5nyxg_e0.png"><br><br>  No ten√≠amos el objetivo de mostrar c√≥mo escribir bien, era necesario obtener un c√≥digo funcional aproximado y mostrar c√≥mo todo puede ir r√°pidamente al preprod, c√≥mo funciona todo r√°pidamente y lo f√°cil que es realizar ediciones. <br><br>  El plan era este: los equipos escriben, si tiene preguntas, nosotros respondemos.  Luego, una sesi√≥n de revisi√≥n y ayuda sobre c√≥mo hacer algo m√°s correcto en arquitectura en Golang. <br><br>  De las distorsiones cognitivas de PHP medio, vale la pena se√±alar la forma "antigua" de pensar en un hilo.  Go tiene un buen modelo competitivo incorporado y multihilo listo para usar, que no estaba en PHP.  El c√≥digo resulta ser muy legible, lo que muy pocos esperaban. <br><br>  En la pr√°ctica, no siempre usamos multihilo.  Depende de la tarea.  Pero debajo del cap√≥, ella tambi√©n lo est√° y, cuando es necesario, la velocidad aumenta debido a ella.  Por ejemplo, se crea un goroutine separado para cualquier solicitud REST entrante.  Golang puede procesar varias solicitudes al mismo tiempo, cuando la mayor√≠a de los otros lenguajes (incluido PHP), de forma predeterminada, los pone en cola y los procesa en un hilo para cada trabajador. <br><br>  La segunda caracter√≠stica es un gran dolor con la devoluci√≥n de errores.  Si el subprocesamiento m√∫ltiple es solo una arquitectura diferente y es f√°cil acostumbrarse a ella en una o dos horas, en el caso de errores al cambiar de PHP, este es un cambio en todo el modelo de pensamiento.  Devolver errores de funciones es el paradigma principal en Go.  En PHP, try-catch generalmente envuelve las cosas.  Y aqu√≠ se requiere procesar expl√≠citamente en el cuerpo de la funci√≥n.  Algunas personas fueron brutalmente bombardeadas por esta "desaceleraci√≥n", se resistieron activamente.  Esto se debe a que el enfoque est√° bastante cerca de TDD, y TDD requiere paciencia al escribir c√≥digo, pero es f√°cil de depurar.  Esto aumenta el c√≥digo l√≠nea por l√≠nea "si - un error", pero una vez que escribe y no regresa.  Esto es muy importante en la arquitectura de los microservicios, porque los microservicios crecen como hongos y un desarrollador puede escribir docenas de microservicios.  El cambio constante de contextos y errores de depuraci√≥n es muy costoso e ineficiente.  Si todo se hace correctamente, la aplicaci√≥n funcionar√° durante a√±os, tan efectivamente como durante el desarrollo.  Y en PHP en la misma situaci√≥n, es probable que si el c√≥digo se escribe incorrectamente, aparecer√°n nuevos errores constantemente, despu√©s de lo cual ser√° necesario depurar todo nuevamente. <br><br>  Result√≥ pa√±os de pie en principal.  Cuando se lanz√≥ la parte funcional, ya descubrieron la mejor manera de dividirla en paquetes.  Luego hubo una revisi√≥n.  Cuando Go-senior te ayuda, es muy √∫til de inmediato.  Le mostraron a alguien c√≥mo reemplazar las visitas constantes a la base con un cach√© en RAM.  Se ayud√≥ a alguien a reescribir el c√≥digo en ejecuci√≥n paralela.  En alg√∫n lugar hab√≠a peque√±os enchufes, como el hecho de que el servidor HTTP en PHP tradicionalmente se eleva y muere, pero aqu√≠ queda para colgar. <br><br><h3>  Paso 6. Repositorio </h3><br>  Al final del hackathon, el c√≥digo se pleg√≥ en el repositorio, donde todos pod√≠an ver el c√≥digo de los equipos vecinos y enviar una solicitud de extracci√≥n.  Esto tambi√©n es parte de la capacitaci√≥n, y durante la semana estas solicitudes fueron bastante activas. <br><br><h3>  Resumen </h3><br>  Ocho horas de hackathon en dos transmisiones de m√°s o menos 15 personas (les recuerdo que de 70 desarrolladores, 40 quer√≠an probar Go y recibieron documentaci√≥n y una plantilla, pero no todos pudieron participar en un d√≠a o quisieron participar f√≠sicamente). <br><br>  Una cuarta parte de los servicios dio el resultado esperado de inmediato.  Otra parte requer√≠a largas modificaciones por parte del monolito PHP, o simplemente ten√≠a m√°s de ocho horas de ancho.  Aproximadamente la mitad de los servicios se completaron antes de la venta posterior. <br><br>  Como resultado, todos se familiarizaron con el lenguaje, la plataforma OpenShift, c√≥mo casarlos, etc.  Vimos la plantilla de la aplicaci√≥n y el nuevo CI / CD, obtuvimos todo el conjunto de herramientas para resolver a√∫n m√°s nuestros problemas en Go. <br><br>  Luego, las caracter√≠sticas se "vendieron" a los propietarios de los productos.  Respondimos preguntas de arquitectura de los l√≠deres de equipo. <br><br>  Durante el mes siguiente, casi todos juntos agregaron una plantilla (que es un mini marco) a las necesidades de los departamentos.  Como resultado, se hizo m√°s grande.  S√≠, otra caracter√≠stica de la plantilla: la configuraci√≥n completa, a trav√©s de variables de entorno, es decir, con el desarrollo local y al cambiar a preprod-prod, todo funciona perfectamente por igual.  Docker es bueno. <br><br>  No solo Go pas√≥ del hackat√≥n a las masas.  Las plantillas aparecieron en la plataforma PaaS para PHP y Node.js, pero de todos modos, ceteris paribus, los desarrolladores a menudo eligen Ir como el lenguaje para el microservicio.  Como resultado, en la pr√°ctica, todos los microservicios de venta nuevos escritos despu√©s del hackathon se escriben espec√≠ficamente en Go.  Es decir, cortamos el monolito e inmediatamente escribimos todo nuevo bajo Kubernetes.  A finales de a√±o nos trasladaremos all√≠ casi por completo. <br><br>  Los que no vinieron preguntaron a sus colegas qu√© era.  Luego se acercaron y pidieron el idioma, realizaron varias tareas en segundo plano (para el trabajo principal), luego colocaron el c√≥digo en el repositorio y recibieron solicitudes de extracci√≥n de otros desarrolladores reci√©n capacitados y de especialistas en Go.  Interesado en libros.  Es decir, todav√≠a ten√≠amos unas pocas semanas de soporte t√©cnico de la segunda l√≠nea. <br><br>  Para aquellos que quer√≠an continuar sus estudios, crearon un grupo en Telegram con libros y m√°s.  Tambi√©n organizamos un gremio de desarrolladores de Golang, donde discutimos semanalmente los problemas emergentes en el trabajo, desarrollamos componentes comunes y compartimos buenas pr√°cticas.  Cualquier desarrollador puede ingresar. <br><br>  La mayor consecuencia es que despu√©s de un mes reescribimos una de las secciones m√°s concurridas, y comenz√≥ a funcionar unas seis mil veces m√°s r√°pido en la producci√≥n.  Pero mejor hablar√© de esto por separado: no solo hay caracter√≠sticas del lenguaje, sino tambi√©n la implementaci√≥n de subprocesos m√∫ltiples, un par de mejoras arquitect√≥nicas y un poco de chamanismo.  Lo m√°s importante es nuestra experiencia de aprender el idioma, y ‚Äã‚Äãgeneralmente es f√°cil repetirlo con usted si tiene al menos un especialista Go que pasar√° un par de semanas aprendiendo. <br><br>  Otras publicaciones sobre nuestro desarrollo: la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">historia del monolito de 15 a√±os</a> , un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">acercamiento a la cocina</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lo que el desarrollador debe saber sobre el negocio</a> , y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">especialmente el regreso de los boletos a√©reos</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/470461/">https://habr.com/ru/post/470461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../470447/index.html">Anatom√≠a de los hablantes: verdad y ficci√≥n sobre los emisores NXT</a></li>
<li><a href="../470449/index.html">Habilidades principales que necesitar√° para ser un desarrollador front-end</a></li>
<li><a href="../470451/index.html">C√≥mo el joven verde se meti√≥ en TI</a></li>
<li><a href="../470453/index.html">Motos de TI para minoristas: como era hace 12 a√±os</a></li>
<li><a href="../470457/index.html">Movimiento browniano fraccional</a></li>
<li><a href="../470471/index.html">¬°Enfr√≠e el vino r√°pidamente! (Adem√°s)</a></li>
<li><a href="../470473/index.html">Importar cr√≥nicas: una revisi√≥n de MyOffice</a></li>
<li><a href="../470477/index.html">Transformers Universe Lakhta Center. Episodio 1: arriba y abajo</a></li>
<li><a href="../470479/index.html">¬øPor qu√© es peligroso rastrear las cookies si realmente no tienes nada que ocultar?</a></li>
<li><a href="../470487/index.html">Concursos tecnol√≥gicos Radiofest-2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>