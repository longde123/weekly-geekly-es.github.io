<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👩🏼 👩🏾‍⚖️ 🐰 Peta interaktif untuk aplikasi web dalam beberapa jam 🧕 👨🏽‍💻 ⏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya, saya secara singkat berbicara tentang kemampuan kepler.gl, alat Open Source baru untuk memvisualisasikan dan menganalisis ge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Peta interaktif untuk aplikasi web dalam beberapa jam</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422759/"><p>  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya,</a> saya secara singkat berbicara tentang kemampuan kepler.gl, alat Open Source baru untuk memvisualisasikan dan menganalisis geo-dataset besar. </p><br><p><img src="https://habrastorage.org/webt/j7/wr/ug/j7wrugptpbwykcqm4quq-lrk72s.png" alt="Opsi untuk peta yang dibuat dengan kepler.gl"><br>  <em>Gambar 1. Opsi untuk peta yang dibuat menggunakan kepler.gl (oleh Uber)</em> </p><br><p> Aplikasi web ini memungkinkan Anda untuk membuat peta interaktif berwarna-warni yang informatif, dan yang paling penting, berdasarkan kumpulan data geografis yang sewenang-wenang dalam hitungan menit.  Namun, timbul pertanyaan apa yang harus dilakukan selanjutnya?  Bagaimana cara berbagi hasil dengan kolega, teman atau pelanggan? </p><a name="habracut"></a><br><h3 id="sravnivaem-alternativnye-varianty">  Bandingkan alternatif </h3><br><p>  Semua "keajaiban" kepler.gl terjadi pada klien, sehingga aplikasi hanya menawarkan 2 cara untuk berbagi hasil Anda dengan orang lain: </p><br><ul><li>  simpan visualisasi sebagai gambar statis (sambil kehilangan kemampuan untuk berinteraksi dengan peta) </li><li>  ekspor konfigurasi dan data yang dibuat sebagai file dan kirimkan ke semua pihak yang berkepentingan dengan instruksi untuk mengunduh data yang diterima ke kepler.gl untuk melihat peta yang dibuat </li></ul><br><p>  Untungnya, kepler.gl tidak hanya alat web, tetapi juga komponen Bereaksi, yang dengannya Anda dapat dengan cepat membuat situs demo dengan visualisasi Anda atau mengintegrasikannya ke dalam aplikasi web yang ada. </p><br><p>  <em><strong>Catatan</strong></em>  <em>Mengolah dan mengagregasi data dengan cepat, kepler.gl sering membutuhkan banyak sumber daya.</em>  <em>Karena itu, Anda harus sangat berhati-hati ketika mengintegrasikannya ke dalam aplikasi yang dirancang untuk ponsel.</em> </p><br><p>  Kasing penggunaan ini untuk kepler.gl akan memungkinkan: </p><br><ul><li>  tidak menyulitkan proses visualisasi tampilan (cukup kirim tautan ke aplikasi Anda) </li><li>  jangan memberikan akses ke set data asli dalam bentuk eksplisit (seperti yang dipersyaratkan oleh 2 kasus dasar) </li><li>  membatasi format yang dapat diakses pengguna untuk berinteraksi dengan visualisasi (misalnya, melarang penyetelan sendiri filter atau metode tampilan data) </li><li>  simpan semua format yang diinginkan untuk berinteraksi dengan kartu (tooltip, zoom, alihkan mode peta, dll.) </li></ul><br><p>  Opsi terakhir yang dipertimbangkan akan membutuhkan upaya tambahan dari pencipta geo-visualisasi dan Anda tidak akan dapat melakukannya tanpa pemrograman.  Namun, seperti yang akan segera Anda lihat, tidak sulit untuk mengimplementasikannya juga. </p><br><h3 id="sozdaem-demo-prilozhenie">  Buat aplikasi demo </h3><br><p>  Saatnya beralih dari teori ke praktik.  Untuk memperkenalkan Anda pada langkah-langkah dasar mengintegrasikan kepler.gl ke dalam kode Anda, saya membuat aplikasi demo kecil. </p><br><p>  Hal ini memungkinkan pengguna untuk melihat informasi tentang tempat parkir Moskow berbayar di salah satu dari dua mode - umum atau agregat.  Pada saat yang sama, aplikasi hanya memungkinkan untuk melihat visualisasi yang kami buat, beralih di antara mereka dan bekerja dengan peta dalam mode read-only.  Semua kode sumber dan versi langsung tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . </p><br><p><img src="https://habrastorage.org/webt/sh/hb/qa/shhbqaimmmrciwal58iquhxiy08.png" alt="Aplikasi demo untuk parkir berbayar di Moskow"><br>  <em>Gambar 2. Dua mode tampilan peta yang disediakan oleh aplikasi demo</em> </p><br><p>  Untuk membuat demo ini, saya menggunakan template proyek saya sendiri.  Namun, jika Anda memutuskan untuk bermain dengan kepler.gl sendiri, tetapi Anda masih tidak memiliki preferensi pribadi, saya sarankan Anda menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aplikasi create-react-app</a> , yang secara signifikan akan mengurangi waktu yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diperlukan</a> untuk membuat fondasi aplikasi masa depan Anda. </p><br><h3 id="dobavlyaem-keplergl-v-proekt">  Tambahkan kepler.gl ke proyek </h3><br><p>  Kepler.gl adalah komponen Bereaksi yang menggunakan Redux untuk menyimpan dan mengelola negaranya.  Untuk menambahkannya ke proyek, cukup instal paket npm yang sesuai: </p><br><pre><code class="bash hljs">npm install --save kepler.gl</code> </pre> <br><p>  Paket npm ini meliputi: </p><br><ul><li>  satu set komponen UI dan pabrik yang memungkinkan mereka untuk didefinisikan ulang dengan komponen mereka sendiri </li><li>  metode yang telah ditentukan sebelumnya untuk menambah / mengubah data yang digunakan dan cara menampilkannya </li><li>  Redux reducer diperlukan untuk pekerjaan mereka </li></ul><br><h3 id="nastraivaem-redux-hranilische-dlya-raboty-keplergl">  Mengkonfigurasi penyimpanan Redux untuk kepler.gl </h3><br><p>  Kepler.gl menggunakan Redux untuk mengelola negaranya dalam proses membuat dan memperbarui peta.  Karena itu, sebelum menggunakan komponen KeplerGl, kita perlu menambahkan peredam yang sesuai ke peredam aplikasi. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { combineReducers } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> keplerGlReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/reducers'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> appReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./appReducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducers = combineReducers({ <span class="hljs-attr"><span class="hljs-attr">keplerGl</span></span>: mapReducer, <span class="hljs-attr"><span class="hljs-attr">app</span></span>: appReducer, }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> reducers;</code> </pre> <br><p>  Penting untuk diingat bahwa secara default, komponen KeplerGl akan memberi pengguna semua opsi yang tersedia untuk mengedit, mengunduh, memperbarui, dan memfilter data.  Untuk membatasi serangkaian tindakan yang diizinkan bagi pengguna, Anda perlu mentransfer informasi tentang mode peta (untuk membaca atau mengedit) dan kontrol peta yang tersedia di parameter status awal: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapReducer = keplerGlReducer .initialState({ <span class="hljs-attr"><span class="hljs-attr">uiState</span></span>: { <span class="hljs-attr"><span class="hljs-attr">readOnly</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">mapControls</span></span>: { <span class="hljs-attr"><span class="hljs-attr">visibleLayers</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">toggle3d</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">splitMap</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">mapLegend</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } } });</code> </pre> <br><p>  Kita juga perlu menginstal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">react-palm</a> , yang digunakan kepler.gl untuk mengontrol efek samping dan menambahkan taskMiddleware dari paket npm ini ke repositori Redux dari aplikasinya: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {createStore, applyMiddleware, compose} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {taskMiddleware} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-palm'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reducers <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reducers'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> middlewares = [ taskMiddleware ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> enhancers = [applyMiddleware(...middlewares)]; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> createStore( reducers, initialState, compose(...enhancers) );</code> </pre> <br><p>  <em><strong>Catatan</strong></em>  <em>Saat ini, tim Teknik Uber secara aktif bekerja pada versi baru kepler.gl yang tidak akan bergantung pada palm-react.</em> </p><br><p>  Secara default, kepler.gl mengharapkan objek negaranya berada di tingkat atas dari seluruh aplikasi dan dapat diakses dengan nama keplerGl.  Jika konfigurasi repositori Redux berbeda dari yang diharapkan, maka untuk operasi yang benar dari komponen Bereaksi yang sesuai, cukup untuk menentukan lokasi statusnya dalam hierarki menggunakan properti getState. </p><br><h3 id="vstraivaem-react-komponent-keplergl">  Sematkan Komponen Bereaksi KeplerGl </h3><br><p>  Untuk perenderan peta yang cepat dengan sejumlah besar elemen yang ditampilkan (hingga jutaan titik geografis!) Kepler.gl menggunakan desk.gl - kerangka kerja WebGL untuk visualisasi data, dan geo-platform MapBox - Open Source, yang menyediakan API yang nyaman dan berbagai kemungkinan untuk menyesuaikan peta yang dibuat .  Oleh karena itu, salah satu parameter yang diperlukan diteruskan ke komponen KeplerGl adalah token API untuk mengakses layanan MapBox. </p><br><p>  Untuk menerima token, Anda harus mendaftar di situs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.mapbox.com</a> .  MapBox menyediakan pilihan beberapa paket tarif yang berbeda, tetapi untuk aplikasi kecil, versi gratis dengan 50.000 tampilan per bulan sudah cukup. </p><br><p>  Setelah membuat akun, Anda harus pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagian token</a> dan menghasilkan kunci publik untuk mengakses layanan. </p><br><p>  Setel token yang diterima ke variabel lingkungan yang sesuai: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MapboxAccessToken=&lt;your_mapBox_token&gt;</code> </pre> <br><p>  Sekarang Anda dapat beralih ke membuat komponen Bereaksi untuk menampilkan informasi tentang tempat parkir berbayar.  Dalam kasus kami, ini akan menjadi pembungkus komponen KeplerGl, yang mengambil dimensi peta sebagai parameter: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> KeplerGl <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapboxAccessToken = process.env.MapboxAccessToken; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ParkingMap = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">KeplerGl</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"parking_map"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mapboxApiAccessToken</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{mapboxAccessToken}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.width</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.height</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> ); export default ParkingMap;</span></span></code> </pre> <br><p>  Tambahkan ParkingMap ke aplikasi.  Pada tahap ini, alih-alih informasi parkir, peta hanya ditampilkan tanpa informasi apa pun, karena kami belum mengirimkan data berdasarkan dasar visualisasi kami. </p><br><h3 id="zagruzhaem-dannye-i-konfiguracii-karty">  Unduh data dan konfigurasi peta </h3><br><p>  Untuk menampilkan data Anda di peta, Anda perlu mentransfer ke KeplerGl set data berdasarkan peta yang akan dibuat, dan konfigurasi visualisasi akhir yang diinginkan.  Ini dapat dilakukan dengan menggunakan salah satu dari dua metode - addDataToMap atau updateVisData. </p><br><p>  Metode pertama memungkinkan Anda untuk tidak hanya mengunduh kumpulan data yang diperlukan dan sepenuhnya mengatur / memperbarui konfigurasi instance yang sesuai dari komponen KeplerGl, termasuk pengaturan visualisasi (visState) dan peta (mapState), serta gaya peta yang digunakan (mapStyle). </p><br><p>  AddDataToMap menerima objek yang berisi informasi berikut sebagai parameter untuk metode: </p><br><ul><li>  set data yang digunakan untuk membangun visualisasi </li><li>  parameter konfigurasi tambahan (opsi) </li><li>  data konfigurasi termasuk mapState, mapStyle, visState <br><pre> <code class="javascript hljs">addDataToMap({ <span class="hljs-attr"><span class="hljs-attr">datasets</span></span>: { … } options: { … } config: { mapState { … }, mapStyle { … }, <span class="hljs-attr"><span class="hljs-attr">visState</span></span>: { … } } });</code> </pre> </li></ul><br><p>  <em><strong>Catatan</strong></em>  <em>Data dari objek konfigurasi selalu lebih diutamakan daripada pengaturan yang diteruskan dalam objek opsi.</em> </p><br><p>  Metode updateVisData memungkinkan memperbarui hanya dataset yang digunakan tanpa sepenuhnya mengubah konfigurasi komponen yang digunakan.  Sebagai parameter, itu, seperti metode pertama, mengambil objek yang berisi informasi tentang set baru atau set data dan parameter "opsi" untuk memperbarui beberapa pengaturan tampilan peta. </p><br><p>  <strong>Inisialisasi peta</strong> </p><br><p>  Jadi, untuk pemuatan data awal, kita memerlukan metode addDataToMap.  Dalam aplikasi demo yang sedang dibuat, database parkir berbayar di Moskow dimuat ketika aplikasi pertama kali diakses oleh permintaan terpisah.  Sumber data yang dihasilkan harus disiapkan untuk diunggah ke KeplerGl.  Untuk ini, dalam kebanyakan kasus, salah satu prosesor yang telah ditetapkan yang mem-port data csv / json ke format data yang didukung oleh kepler.gl sudah cukup. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadParkingData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mapMode</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch( requestParkingData() ); fetch(demoDataUrl) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.text()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source</span></span></span><span class="hljs-function"> =&gt;</span></span> { dispatch( getParkingData() ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = Processors.processCsvData(source); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = getMapConfig(mapMode); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datasets = [{ info, data }]; dispatch( wrapTo(<span class="hljs-string"><span class="hljs-string">'parking_map'</span></span>, addDataToMap({ datasets, config }) )); }); }; }</code> </pre> <br><p>  <strong>Beralih di antara mode</strong> </p><br><p>  Untuk beralih di antara mode tampilan peta, kita perlu mendefinisikan fungsi tindakan lainnya.  Karena dalam versi KeplerGl saat ini tidak ada cara mudah untuk mengubah hanya konfigurasi peta tanpa mempengaruhi data, metode addDataToMap juga akan menjadi metode yang paling cocok untuk beralih antar mode: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggleMapMode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mode</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch, getState</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = getMapConfig( mode ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datasets = getDatasets(getState()); dispatch( wrapTo(<span class="hljs-string"><span class="hljs-string">'parking_map'</span></span>, addDataToMap({ datasets, config }) )); dispatch( setMapMode(mode) ); }; }</code> </pre> <br><p>  Parameter dataset diperlukan, oleh karena itu, setiap kali kami mengganti mode tampilan peta, kami akan mengirimkan kembali set data asli yang dimuat saat startup aplikasi.  Informasi konfigurasi kartu akan diperbarui setiap saat.  Dalam artikel ini saya tidak akan membahas bagaimana metode penolong getMapConfig dan getDatasets diimplementasikan, kode sumber yang dapat Anda biasakan sendiri di GitHub. </p><br><p>  <em><strong>Catatan</strong></em>  <em>Saat ini, API KeplerGl sangat terbatas dan dirancang untuk kasus-kasus paling mendasar (menambah dan memperbarui data).</em>  <em>Pada saat yang sama, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengembang</a> sendiri <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengakui</a> bahwa versi saat ini tidak menyediakan metode yang efektif untuk memperbarui konfigurasi saja atau untuk pembaruan data waktu nyata.</em>  <em>Namun, jangan lupa bahwa proyek ini sedang dalam pengembangan aktif dan ada harapan untuk perluasan awal fungsinya.</em> </p><br><h3 id="kastomiziruem-elementy-karty">  Kustomisasi elemen peta </h3><br><p>  KeplerGl tidak hanya mencakup wadah dengan geo-visualisasi, tetapi juga kontrol peta, tooltip, panel samping untuk mengelola data yang ditampilkan, kotak dialog untuk memuat data dalam format csv, json atau geojson, dll.  Pada saat yang sama, masing-masing komponen yang terdaftar dapat dengan mudah diganti dengan versinya sendiri menggunakan sistem injeksi ketergantungan. </p><br><p>  Untuk mengganti komponen dasar dengan versi yang disesuaikan, itu sudah cukup: </p><br><ul><li>  impor pabrik komponen default </li><li>  tentukan pabrik baru yang mengembalikan komponen khusus </li><li>  embed pabrik baru menggunakan metode injectComponents </li></ul><br><p>  Di aplikasi demo yang kami buat, kami tidak ingin memberi pengguna kesempatan untuk mengonfigurasi mode tampilan secara mandiri, memfilter yang ada, atau memuat data baru. </p><br><p>  Secara teori, untuk ini cukup untuk menunjukkan bahwa komponen KeplerGl dalam mode hanya baca, yang hanya muncul di versi 0.0.27. Namun, bahkan dalam versi ini, semua kontrol masih ditampilkan kepada pengguna untuk beberapa saat pertama sebelum memuat peta, dan hanya kemudian bersembunyi.  Untuk menghindari ini, kita dapat secara eksplisit mengganti komponen yang tidak diinginkan dengan komponen nol menggunakan metode injectComponents: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { injectComponents, ModalContainerFactory, SidePanelFactory, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/components'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// define null factory to don not render any unnecessary components const NullComponent = () =&gt; null; const nullComponentFactory = () =&gt; NullComponent; const KeplerGl = injectComponents([ [ModalContainerFactory, nullComponentFactory], [SidePanelFactory, nullComponentFactory], ]); export default KeplerGl;</span></span></code> </pre> <br><p>  Dengan mudah, KeplerGl tidak hanya memungkinkan Anda untuk mengganti komponen dasar dengan yang dikustomisasi, tetapi menggunakan metode withState memungkinkan Anda untuk menambahkan tindakan tambahan dan menyatakan parameter untuk komponen baru. </p><br><h3 id="kak-ispolzovat-neskolko-kart-odnovremenno">  Cara menggunakan beberapa kartu sekaligus </h3><br><p>  Jika Anda berencana untuk menggunakan beberapa komponen KeplerGL yang berbeda dalam aplikasi yang sama, maka masing-masing komponen tersebut harus diatur dalam parameter dengan id unik yang diperlukan untuk menambah / memperbarui data dan konfigurasi masing-masing kartu: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapToParking = wrapTo(<span class="hljs-string"><span class="hljs-string">' parking_map'</span></span>); dispatch( wrapToParking( addDataToMap({ datasets, config }) ));</code> </pre> <br><p>  Alternatifnya adalah dengan menggunakan fungsi koneksi dari Redux dan fungsi forwardTo dari kepler.gl.  Dalam hal ini, cukup sederhana untuk fungsi operator yang sesuai untuk menentukan id kartu yang sesuai: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> KeplerGl <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { forwardTo, toggleFullScreen } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {connect} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MapContainer = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ( &lt;div&gt; &lt;button onClick=() =&gt; props.keplerGlDispatch(toggleFullScreen())/&gt; &lt;KeplerGl id="foo" /&gt; &lt;/div&gt; ) const mapStateToProps = state =&gt; state const mapDispatchToProps = (dispatch, props) =&gt; ({ dispatch, keplerGlDispatch: forwardTo('foo', dispatch) });</code> </pre> <br><h3 id="zaklyuchenie">  Kesimpulan </h3><br><p>  KeplerGl memungkinkan Anda untuk menambahkan peta interaktif berwarna-warni ke aplikasi web berbasis React Anda.  Berkat penggunaan framework komponen desk.gl, ia dapat dengan mudah menampilkan jutaan geo-point dalam format yang nyaman untuk dilihat dan dianalisis. </p><br><p>  Kemungkinan luas untuk menyesuaikan tidak hanya membuat visualisasi, tetapi juga gaya peta, serta format interaksi pengguna, membuat KeplerGl alat yang sangat menarik untuk membuat visualisasi dan dashboard kartografi yang kompleks. </p><br><p>  Namun, hanya dibatasi oleh skenario API dasar, pemrosesan data pada klien, serta penggunaan MapBox tanpa kemampuan untuk memilih sumber peta lain, mengurangi jumlah proyek yang dapat digunakan alat ini. </p><br><p>  Tetapi jangan lupa bahwa saat ini proyek ini masih sangat muda dan sedang dalam fase aktif pengembangan, sehingga banyak dari kekurangan ini mungkin menjadi tidak relevan dalam waktu dekat. </p><br><h3 id="poleznye-ssylki">  Tautan yang bermanfaat </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode demo lengkap</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel pengantar tentang Kepler.Gl tentang Habr</a> </li><li>  <a href="">Repositori Kepler.gl di github</a> </li><li>  <a href="">Dokumentasi resmi untuk kepler.gl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tutorial Kepler.gl di Vis.Academy [en]</a> </li></ol><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422759/">https://habr.com/ru/post/id422759/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422747/index.html">Posisi Dukungan Enkripsi Kuat Resmi IEEE</a></li>
<li><a href="../id422751/index.html">10 alat diagnostik SSL / TLS gratis untuk webmaster</a></li>
<li><a href="../id422753/index.html">Memahami partisi di PostgreSQL 9</a></li>
<li><a href="../id422755/index.html">Akankah portofolio melindungi dari penurunan muka kripto?</a></li>
<li><a href="../id422757/index.html">Tidak ada politik. Bagaimana mengubah protes jalanan secara permanen menggunakan aplikasi seluler?</a></li>
<li><a href="../id422761/index.html">Empat cara dari Sekolah Analisis Data Yandex</a></li>
<li><a href="../id422763/index.html">Acara digital di Moskow dari 10 hingga 16 September</a></li>
<li><a href="../id422765/index.html">OpenID Connect 1.0 On Fingers</a></li>
<li><a href="../id422767/index.html">Konferensi DEFCON 16. Fedor, Peretas InSecure.org. NMAP Memindai Online</a></li>
<li><a href="../id422769/index.html">Pemenang Startup Battlefield TechCrunch Disrupt San Francisco 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>