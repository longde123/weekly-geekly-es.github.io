<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฒ๐ผ ๐ง๐ฝ ๐ช๐ป ููุฏุณุฉ ุงูููุถู ุ ุงูุฌุฒุก 3: ุงูุฃุณุงููุจ ูุงูุฃุฏูุงุช ๐ฅก ๐จ๐พโ๐ ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุตุจุญ ูุง ูุฑุงู. ุฃููุงู ูููู ุจุชุดููู ุงูุฃุฏูุงุช ุ ุซู ุชููู ุงูุฃุฏูุงุช ุจุชุดููููุง. 

 ูุงุฑุดุงู ูุงููููุงู 

 ุฃูุฏ ุฃู ุฃุนุฑุจ ุนู ุฎุงูุต ุงูุดูุฑ ูุงูุชุนุจูุฑ ุนู ุงูุชูุงูู ูุตุฏููู ุงูุนุฒูุฒ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุฏุณุฉ ุงูููุถู ุ ุงูุฌุฒุก 3: ุงูุฃุณุงููุจ ูุงูุฃุฏูุงุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/480802/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bj/bo/hr/bjbohri48f3n_qtsbswegzbyw5y.jpeg"></p><br><blockquote style=";text-align:right;direction:rtl">  ูุตุจุญ ูุง ูุฑุงู.  ุฃููุงู ูููู ุจุชุดููู ุงูุฃุฏูุงุช ุ ุซู ุชููู ุงูุฃุฏูุงุช ุจุชุดููููุง. <br><br>  ูุงุฑุดุงู ูุงููููุงู </blockquote><p style=";text-align:right;direction:rtl"> <em>ุฃูุฏ ุฃู ุฃุนุฑุจ ุนู ุฎุงูุต ุงูุดูุฑ ูุงูุชุนุจูุฑ ุนู ุงูุชูุงูู ูุตุฏููู ุงูุนุฒูุฒ <a href="https://medium.com/%40094459">ุฑููุงุฑุฏู ุณููุฑุงุณ</a> ุนูู ูุฑุงุฌุนุชู ููุณุงููุชู ูุนุฏู ุงูุณูุงุญ ูู ุจูุบุงุฏุฑุฉ ูุฐุง ุงูููุงู.</em>  <em>ุฑููุงุฑุฏู ุ ุฃูุช ูุฌุฑุฏ ุฃุณุทูุฑุฉ!</em> </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููู ุฃู ุชุชุฐูุฑ ุฃู ููุฏุณุฉ ุงูููุถู ููุณุช ุนูุฏ ุฅุทูุงู ุงููุฑูุฏ ูุฅุฏุฎุงู ุญุงูุงุช ุงููุดู ุจุดูู ุนุดูุงุฆู.  ููุฏุณุฉ ุงูููุถู ูู <a href="https://en.wikipedia.org/wiki/Scientific_method">ุชูููุฉ</a> ุชุฌุฑูุจูุฉ ูุญุฏุฏุฉ ุจุดูู ุฌูุฏ. </p><a name="habracut"></a><br><blockquote style=";text-align:right;direction:rtl">  "ุชูุทูู ููุฏุณุฉ ุงูููุถู ุนูู ุงูููุงุญุธุฉ ุงูุฏูููุฉ ูุงูุดู ุงูุดุฏูุฏ ูููุง ูุชุนูู ุจููุถูุน ุงูููุงุญุธุฉ ุ ูุฃู ุงูุงูุชุฑุงุถุงุช ุงููุนุฑููุฉ ุชุดูู ุชูุณูุฑ ุงููุชุงุฆุฌ. ุชุชุถูู ูุฐู ุงูุชูููุฉ ุตูุงุบุฉ ุงููุฑุถูุงุช ูู ุฎูุงู ุงูุงุณุชูุฑุงุก ุงุณุชูุงุฏูุง ุฅูู ููุงุญุธุงุช ููุงุซูุฉ ุ ุงูุงุฎุชุจุงุฑ ุงูุชุฌุฑูุจู ูุงููุงุฆู ุนูู ุงูุงุณุชูุชุงุฌุงุช ุงูููุฏูุฉ ูู ูุฑุถูุงุช ููุงุซูุฉ ุ ุงูุชุนุฏูู ุฃู ุฑูุถ ุงููุฑุถูุงุช ุนูู ุฃุณุงุณ ุงููุชุงุฆุฌ ุงูุชุฌุฑูุจูุฉ " <br><br>  -Wikipedia </blockquote><p style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ููุฏุณุฉ ุงูููุถู ุจููู ุงูุญุงูุฉ ุงููุณุชูุฑุฉ ูููุธุงู ุงูุฐู ุชุชุนุงูู ูุนู ุ ูุงูุตูุงุบุฉ ุงููุงุญูุฉ ูููุฑุถูุฉ ุ ูุฃุฎูุฑุง ุงูุชุฌุฑุจุฉ ุงูุชู ุชุคูุฏ ุฐูู ุ ููุง ูุณุงุนุฏ ุนูู ุฒูุงุฏุฉ ูุงูุด ุฃูุงู ุงููุธุงู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gq/yq/jc/gqyqjcysfguozpispkjletc21ik.png"><br>  <em>ูุฑุงุญู ููุฏุณุฉ ุงูููุถู</em> </p><br><p style=";text-align:right;direction:rtl">  ูู <a href="https://medium.com/%40adhorn/chaos-engineering-ab0cc9fbd12a">ุงูุฌุฒุก ุงูุฃูู ูู ุณูุณูุฉ ูู ุงูููุงูุงุช ุ</a> ููุช ุจุชูุฏูู ููุฏุณุฉ ุงูููุถู ููุงูุดุช ูู ุฎุทูุฉ ูู ุงููููุฌูุฉ ุงููุฐููุฑุฉ ุฃุนูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูู <a href="https://medium.com/%40adhorn/chaos-engineering-part-2-b9c78a9f3dde">ุงูุฌุฒุก ุงูุซุงูู</a> ุ ูุธุฑุช ุฅูู ุงููุฌุงูุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูุงุณุชุซูุงุฑ ูููุง ุนูุฏ ุชุตููู ุงูุชุฌุงุฑุจ ุนูู ููุฏุณุฉ ุงูููุถู ุ ูููููุฉ ุงุฎุชูุงุฑ ุงููุฑุถูุงุช ุงูุตุญูุญุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูุฌุฒุก ุงูุซุงูุซ ุ ุณุฃุฑูุฒ ุนูู ุงูุชุฌุฑุจุฉ ููุณูุง ูุณุฃูุฏู ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูุฃุฏูุงุช ูุงูุฃุณุงููุจ ุงูุชู ุชุบุทู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุญุงูุงุช ุงููุดู. </p><br><p style=";text-align:right;direction:rtl">  ุงููุงุฆูุฉ ููุณุช ุดุงููุฉ ุ ูููู ุจุงุฏุฆ ุฐู ุจุฏุก ุ ููุชูุฏูู ุงูุบุฐุงุก ููุชูููุฑ ุ ููุจุบู ุฃู ุชููู ูุงููุฉ. </p><br><h2 id="vvedenie-otkaza---chto-eto-i-dlya-chego-nuzhno" style=";text-align:right;direction:rtl">  ููุฏูุฉ ูู ุงููุดู - ูุง ูู ููุง ููุ </h2><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ุงููุดู ููุชุญูู ูู ุฃู ุงุณุชุฌุงุจุฉ ุงููุธุงู ุชูุจู ุงูููุงุตูุงุช ูู ุธู ุธุฑูู ุงูุชุญููู ุงูุนุงุฏูุฉ.  ูุฃูู ูุฑุฉ ุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุชูููุฉ ุนูุฏูุง <a href="https://ieeexplore.ieee.org/document/780999/">ุชู ุนุฑุถ ุญุงูุงุช ุงููุดู ุนูุฏ ูุณุชูู "ุงูุญุฏูุฏ"</a> - ุนูู ูุณุชูู ุงูุงุชุตุงูุงุช ุ ุนู ุทุฑูู ุชุบููุฑ ุงูุฅุดุงุฑุงุช ุงูููุฑุจุงุฆูุฉ ุนูู ุงูุฃุฌูุฒุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฑูุฌุฉ ุ ูุณุงุนุฏ ุฅุฏุฎุงู ุงูุฅุฎูุงูุงุช ุนูู ุชุญุณูู ุซุจุงุช ูุธุงู ุงูุจุฑูุฌูุงุช ููุณูุญ ูู ุจุชุตุญูุญ ุฃูุฌู ุงููุตูุฑ ูู ููุงููุฉ ุงูุฅุฎูุงูุงุช ุงููุญุชููุฉ ูู ุงููุธุงู.  ููุฐุง ูุง ูุณูู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง.  ููุง ุฃูู ูุณุงุนุฏ ูู ุชูููู ุงูุฃุถุฑุงุฑ ุงููุงุฌูุฉ ุนู ุงููุดู - ุฃู  ูุตู ูุทุฑ ุงูุถุฑุฑ ุ ุญุชู ูุจู ุญุฏูุซ ุงููุดู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ.  ููุฐุง ูุง ูุณูู ุฎุทุฃ ุงูุชูุจุค. </p><br><p style=";text-align:right;direction:rtl">  ููุทูู ุชูุฏูู ุงูุฅุฎูุงูุงุช ุนูู ุงูุนุฏูุฏ ูู ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ ุ ููุง ูุณุงุนุฏ ุนูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููู ูููุงุฑุณุฉ ุงูุงุณุชุฌุงุจุงุช ููุญูุงุฏุซ ูุงูุญูุงุฏุซ. </li><li style=";text-align:right;direction:rtl">  ููู ุขุซุงุฑ ุงููุดู ุงูุญูููู. </li><li style=";text-align:right;direction:rtl">  ููู ูุนุงููุฉ ููููุฏ ุขููุงุช ุงูุชุณุงูุญ ูุน ุงูุฎุทุฃ. </li><li style=";text-align:right;direction:rtl">  ุงููุถุงุก ุนูู ุฃุฎุทุงุก ุงูุชุตููู ูุงูุชุดุงู ููุงุท ุงููุดู ุงูุดุงุฆุนุฉ. </li><li style=";text-align:right;direction:rtl">  ููู ูุชุญุณูู ูุธุงู ุงูููุงุญุธุฉ. </li><li style=";text-align:right;direction:rtl">  ููู ูุตู ูุทุฑ ูุดู ุงููุดู ูุชุถููู ุนููู. </li><li style=";text-align:right;direction:rtl">  ููู ุงูุชุดุงุฑ ุงูุฎุทุฃ ุจูู ููููุงุช ุงููุธุงู. </li></ul><br><h3 id="kategorii-vvedeniya-otkazov" style=";text-align:right;direction:rtl">  ูุฆุงุช ุงููุดู </h3><br><p style=";text-align:right;direction:rtl">  ููุงู 5 ูุฆุงุช ูุฅุฏุฎุงู ุงููุดู: ุนูู ูุณุชูู (1) ููุฑุฏ ุ  (2) ุงูุดุจูุฉ ูุงูุชุจุนูุงุช ุ  (3) ุงูุชุทุจูู ุ ุงูุนูููุฉ ุ ูุงูุฎุฏูุฉ ุ  (4) ุงูุจููุฉ ุงูุชุญุชูุฉ ุ  ู (5) ุงููุณุชูู ุงูุจุดุฑู **. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณุฃููู ุจุฏุฑุงุณุฉ ูู ูุฆุฉ ูู ุงููุฆุงุช ูุฃุนุทู ูุซุงูุงู ุนูู ุชูุฏูู ุฅุฎูุงูุงุช ููู ูููุง.  ุณุฃุฏุฑุณ ุฃูุถูุง ูุซุงููุง ูุฅุฏุฎุงู ุงูุฅุฎูุงูุงุช ูุฃุฏูุงุช ุชุฒุงูู ุงููู ูู ูุงุญุฏ. </p><br><blockquote style=";text-align:right;direction:rtl">  ** ููู!  ูู ูุฐุง ุงูููุดูุฑ ุ ูุง ุฃุชุทุฑู ุฅูู ุฅุฏุฎุงู ุงูุฅุฎูุงูุงุช ุนูู ุงููุณุชูู ุงูุฅูุณุงูู ุ ููููู ุณูู ุฃููุฑ ูู ุงูุฃูุฑ ูููุง ููู. </blockquote><br><h2 id="1---vvedenie-otkaza-na-urovne-resursa-aka-nehvatka-resursov" style=";text-align:right;direction:rtl">  1 - ููุฏูุฉ ูู ุงููุดู ุนูู ูุณุชูู ุงูููุงุฑุฏ ุ ููุนุฑู ุฃูุถุง ุจุงุณู ููุต ุงูููุงุฑุฏ. </h2><br><p style=";text-align:right;direction:rtl">  ูุนู ุ ููุฏ ุนููุชูุง ุชูููุงุช ุงูุญูุณุจุฉ ุงูุณุญุงุจูุฉ ุฃู ุงูููุงุฑุฏ ุบูุฑ ูุญุฏูุฏุฉ ุชูุฑูุจูุง ุ ููููู ุฃุณุงุฑุน ุฅูู ุฎูุจุฉ ุฃููู: ููู ููุณุช ุจูุง ุญุฏูุฏ.  ูุซูู ุ ุญุงููุฉ ุ ูุธููุฉ ุ ุฅูุฎ.  - ุจุบุถ ุงููุธุฑ ุนู ุงูุชุฌุฑูุฏ ุ ุชูุชูู ุงูููุงุฑุฏ ูู ุงูููุงูุฉ.  ูุณูู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู ุงููุณููุญ ุจู ูุงุณุชููุงุฏ ุงูููุงุฑุฏ ุจุงูุฅููุงุฏ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ri/54/nn/ri54nnmprlvjvug3f395w6ohofk.png"></p><br><p style=";text-align:right;direction:rtl">  ููุฉ ุงูููุงุฑุฏ ุชุญุงูู ูุฌูู <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack">ุฑูุถ ุงูุฎุฏูุฉ</a> ุ ูููู ููุณ ุงููุฌูู ุงููุนุชุงุฏ ุ ููุชุณูู ุฅูู ุงูุฎุงุฏู ุงูููุตูุฏ.  ูุฏ ุชููู ููุฏูุฉ ุญุงูุงุช ุงููุดู ูุฐู ูุงุณุนุฉ ุงูุงูุชุดุงุฑ ุ ูุฃูู ุ ุนูู ุงูุฃุฑุฌุญ ุ ููุณ ูู ุงูุตุนุจ ุงุณุชุฎุฏุงููุง. </p><br><h3 id="istoschaya-resursy-cpu-pamyati-i-vvodavyvoda" style=";text-align:right;direction:rtl">  ููุงุฏ ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฐุงูุฑุฉ ูููุงุฑุฏ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูุงุญุฏุฉ ูู ุฃุฏูุงุชู ุงูููุถูุฉ ูู <a href="https://www.mankier.com/1/stress-ng">ุงูุฅุฌูุงุฏ ุ</a> ูุฑุงุณูุงุช <a href="https://directory.fsf.org/wiki/Stress">ุฃุฏุงุฉ ุงุฎุชุจุงุฑ ุงูุฅุฌูุงุฏ</a> ุงูุฃุตููุฉ <a href="https://directory.fsf.org/wiki/Stress">ุ ุชุฃููู Amos Waterland</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุน ุงูุฅุฌูุงุฏ-ูุงููุบุฑุงู ุ ูููู ุฅุฏุฎุงู ุงูุฃุฎุทุงุก ุนู ุทุฑูู ุชุญููู ูุฎุชูู ุงููุธู ุงููุฑุนูุฉ ุงููุงุฏูุฉ ููููุจููุชุฑ ุ ููุฐูู ุงูุชุญูู ูู ูุงุฌูุงุช ุฌููุฑ ุงููุธุงู ุจุงุณุชุฎุฏุงู ุงุฎุชุจุงุฑุงุช ุงูุฅุฌูุงุฏ.  ุชุชููุฑ ุงุฎุชุจุงุฑุงุช ุงูุฅุฌูุงุฏ ุงูุชุงููุฉ: ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุงูุฌูุงุฒ ุ ู I / O ุ ูุงูููุงุทุนุฉ ุ ููุธุงู ุงููููุงุช ุ ูุงูุฐุงูุฑุฉ ุ ูุงูุดุจูุฉ ุ ููุธุงู ุงูุชุดุบูู ุ ูุฎุท ุงูุฃูุงุจูุจ ุ ูุงูุฌุฏููุฉ ุ ู VM.  ุชุชุถูู <a href="https://www.mankier.com/1/stress-ng">ุตูุญุงุช ุงูุฑุฌู</a> ูุตููุง ูุงููุงู ูุฌููุน ุงุฎุชุจุงุฑุงุช ุงูุฅุฌูุงุฏ ุงููุชุงุญุฉ ุ ููุง ููุฌุฏ ุณูู 220 ูููุง! </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุจุนุถ ุงูุฃูุซูุฉ ุงูุนูููุฉ ูููููุฉ ุงุณุชุฎุฏุงู ุงูุฅุฌูุงุฏ- ng: </p><br><p style=";text-align:right;direction:rtl"> ูููุฑ ุงูุญูู ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ <code>matrixprod</code> ุงููุฒูุฌ ุงูุตุญูุญ ูู ุงูุนูููุงุช ูุน ุงูุฐุงูุฑุฉ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุงูููุทุฉ ุงูุนุงุฆูุฉ.  ูุฐุง ุฑุจูุง.  ุฃูุถู ุทุฑููุฉ ูุชุณุฎูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุจุดูู ุฌูุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ stress-ng โ-cpu 0 --cpu-method matrixprod -t 60s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญููู <code>iomix-bytes</code> ููุชุจ N ุจุงูุช ููู <code>iomix</code> ูุนุงูุฌ <code>iomix</code> ุ  ุงูุงูุชุฑุงุถู ูู 1 ุบูุบุงุจุงูุช ููุนุชุจุฑ ูุซุงูููุง ูุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุฅุฌูุงุฏ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ.  ูู ูุฐุง ุงููุซุงู ุ ุณุฃููู ุจุชุนููู 80ูช ูู ุงููุณุงุญุฉ ุงูุญุฑุฉ ุนูู ูุธุงู ุงููููุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ stress-ng --iomix 1 --iomix-bytes 80% -t 60s</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>vm-bytes</code> ุนุธูู ูุงุฎุชุจุงุฑุงุช ุงูุฅุฌูุงุฏ ุงูุฐุงูุฑุฉ.  ูู ูุฐุง ุงููุซุงู ุ ูููู ุงูุฅุฌูุงุฏ ng ุจุฅุฌุฑุงุก 9 ุงุฎุชุจุงุฑุงุช ุฅุฌูุงุฏ ููุฐุงูุฑุฉ ุงูุธุงูุฑูุฉ ุ ูุงูุชู ุชุณุชููู ูุนูุง 90ูช ูู ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ ูู ุงูุณุงุนุฉ.  ูุจุงูุชุงูู ุ ูุณุชููู ูู ุงุฎุชุจุงุฑ tress 10ูช ูู ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ stress-ng --vm 9 --vm-bytes 90% -t 60s</code> </pre> <br><h3 id="nehvatka-diskovogo-prostranstva-na-zhestkih-diskah" style=";text-align:right;direction:rtl">  ููุงุฏ ูุณุงุญุฉ ุงููุฑุต ุนูู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ </h3><br><p style=";text-align:right;direction:rtl">  <code>dd</code> ูู ุฃุฏุงุฉ ูุณุงุนุฏุฉ ูุณุทุฑ ุงูุฃูุงูุฑ ุชู ุชุฌููุนูุง ูุชุญููู ุงููููุงุช ููุณุฎูุง.  ููุน ุฐูู ุ ูููู ูู <code>dd</code> ุงููุฑุงุกุฉ ู / ุฃู ุงููุชุงุจุฉ ูู ูููุงุช ุงูุฃุฌูุฒุฉ ุงูุฎุงุตุฉ ูุซู <code>/dev/zero</code> ู <code>/dev/random</code> ูููุงู ูุซู ุงููุณุฎ ุงูุงุญุชูุงุทู ููุทุงุน ุงูุชูููุฏ ูููุฑุต ุงูุตูุจ ูุงูุญุตูู ุนูู ูููุฉ ุซุงุจุชุฉ ูู ุงูุจูุงูุงุช ุงูุนุดูุงุฆูุฉ.  ูุจุงูุชุงูู ุ ูููู ุงุณุชุฎุฏุงูู ูุฅุฏุฎุงู ุญุงูุงุช ุงููุดู ุนูู ุงูุฎุงุฏู ููุญุงูุงุฉ ุชุฌุงูุฒ ุณุนุฉ ุงููุฑุต.  ูู ุชุฌุงูุฒุช ูููุงุช ุงูุณุฌู ุงูุฎุงุฏู ุงูุฎุงุต ุจู ูุฃุณูุทุช ุงูุชุทุจููุ  ูุฐูู ุ ุณูู ูุณุงุนุฏ <code>dd</code> - ูุณูู ูุถุฑ! </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงุณุชุฎุฏู <code>dd</code> ุจุนูุงูุฉ ูุงุฆูุฉ.</strong>  <strong>ุฃุฏุฎู ุงูุฃูุฑ ุบูุฑ ุตุญูุญ - ูุณูุชู ูุณุญ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงููุฑุต ุงูุตูุจ ุฃู ุฅุชูุงููุง ุฃู ุงููุชุงุจุฉ ุนูููุง!</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ dd if=/dev/urandom of=/burn bs=1M count=65536 iflag=fullblock &amp;</code> </pre> <br><h3 id="podtormazhivanie-api-prilozheniy" style=";text-align:right;direction:rtl">  ุชุทุจูู API Slowdown </h3><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุฃุฏุงุก ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API) ููุฏุฑุชูุง ุนูู ุงูุชูุณุน ููุงุจููุชูุง ููุชุทููุฑ ูู ุงูุฃููุฑ ุงููููุฉ.  ุชุนุฏ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุถุฑูุฑูุฉ ูุจูุงุก ุงูุชุทุจููุงุช ูุชูููุฉ ุฃุนูุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูุนุชุจุฑ ุงุฎุชุจุงุฑ ุงูุชุญููู ุทุฑููุฉ ุฑุงุฆุนุฉ ูุงุฎุชุจุงุฑ ุงูุชุทุจูู ุงูุฎุงุต ุจู ูุจู ุจุฏุก ุงูุฅูุชุงุฌ.  ูุฐู ุฃูุถูุง ุทุฑููุฉ ุฑุงุฆุนุฉ ูุชุญููู ุงูุฅุฌูุงุฏ ุ ูุฃููุง ุชูุดู ุบุงูุจูุง ุนู ุงุณุชุซูุงุกุงุช ููููุฏ ุ ูู ุธู ุธุฑูู ุฃุฎุฑู ุ ูุงูุช ุณุชุธู ุบูุฑ ูุฑุฆูุฉ ูุจู ุงูุงุฌุชูุงุน ุจุญุฑูุฉ ูุฑูุฑ ุญููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://github.com/wg/wrk"><code>wrk</code></a> ูู ุฃุฏุงุฉ ููุงุณ HTTP ุงูุชู ุชุถุน ุถุบุทูุง ูุจูุฑูุง ุนูู ุงูุฃูุธูุฉ.  ุฃูุฏ ุจุดูู ุฎุงุต ุงุฎุชุจุงุฑ ุงุฎุชุจุงุฑุงุช ุฅููุงููุฉ ุงููุตูู ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุ ุฎุงุตุฉู ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ <a href="https://medium.com/%40adhorn/patterns-for-resilient-architecture-part-3-16e8601c488e">ุจูุญูุตุงุช ุงูุฃุฏุงุก</a> ุ ูุฃููุง ุชูุดู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููุชุนููุฉ ุจูุฑุงุฑุงุช ุงูุชุตููู ุนูู ูุณุชูู ุฑูุฒ ุงููุทูุฑ: ููู ูุชู ุชูููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุชุ  ููู ูุชู ุชุทุจูู ุงูุญุฏ ุงูุฃูุตู ููุณุฑุนุฉุ  ูู ูุนุทู ุงููุธุงู ุงูุฃููููุฉ ูููุญูุตุงุช ุงูุตุญูุฉ ุงููุชุนููุฉ ุจููุงุฒูุงุช ุงูุชุญูููุ </p><br><p style=";text-align:right;direction:rtl">  ุฅููู ูู ุฃูู ุชุจุฏุฃ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ wrk -t12 -c400 -d20s http://127.0.0.1/api/health</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏุฃ ูุฐุง ุงูุฃูุฑ ูู ุชุดุบูู 12 ูุคุดุฑ ุชุฑุงุจุท ููุจูู 400 ุงุชุตุงู HTTP ููุชูุญุฉ ููุฏุฉ 20 ุซุงููุฉ. </p><br><h2 id="2---vvedenie-otkazov-na-urovne-seti-i-zavisimostey" style=";text-align:right;direction:rtl">  2 - ุชูุฏูู ุงูุฃุนุทุงู ูุงูุชุจุนูุงุช ุนูู ูุณุชูู ุงูุดุจูุฉ </h2><br><p style=";text-align:right;direction:rtl">  <a href="http://wiki.c2.com/%3FPeterDeutsch">ูุนุฏ</a> ูุชุงุจ <a href="http://wiki.c2.com/%3FPeterDeutsch">Peter Deutsch</a> ุ <a href="http://eightfallaciesofdistributedcomputing/">The Eight Fallies of Computing Computing ุ</a> ูุฌููุนุฉ ูู ุงูุงูุชุฑุงุถุงุช ุงูุชู ูุถุนูุง ุงููุทูุฑูู ุนูุฏ ุชุตููู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ.  ุซู ูุทูุฑ ุงูุฌูุงุจ ูู ุดูู ุนุฏู ุฅููุงููุฉ ุงููุตูู ุ ูุนููู ุฅุนุงุฏุฉ ูู ุดูุก.  ูุฐู ุงูุงูุชุฑุงุถุงุช ุงูุฎุงุทุฆุฉ ูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุดุจูุฉ ููุซููุฉ. </li><li style=";text-align:right;direction:rtl">  ุงูุชุฃุฎูุฑ ูู 0. </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูุง ููุงูุฉ ููุง. </li><li style=";text-align:right;direction:rtl">  ุงูุดุจูุฉ ุขููุฉ. </li><li style=";text-align:right;direction:rtl">  ุทูุจูููุฌูุง ูุง ูุชุบูุฑ. </li><li style=";text-align:right;direction:rtl">  ููุงู ูุณุคูู ูุงุญุฏ ููุท. </li><li style=";text-align:right;direction:rtl">  ุชูููุฉ ุงูููู 0. </li><li style=";text-align:right;direction:rtl">  ุงูุดุจูุฉ ูุชุฌุงูุณุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุชุนุฏ ูุฐู ุงููุงุฆูุฉ ููุทุฉ ุงูุทูุงู ุฌูุฏุฉ ูุงุฎุชูุงุฑ ุชุฌุงูุฒ ุงููุดู ุฅุฐุง ููุช ุชููู ุจุงุฎุชุจุงุฑ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงููุธุงู ุงูููุฒุน ููููู ูุนุงูุฌุฉ ูุดู ุงูุดุจูุฉ. <br>  ุชูุฏูู ุงููููู ุงูุดุจูุฉ ุ ูุงูุฎุณุงุฑุฉ ูุงููุทุงุน </p><br><h3 id="vvedenie-zaderzhki-poteri-ili-obryva-seti" style=";text-align:right;direction:rtl">  ุชูุฏูู ุงุณุชุชุงุฑ ุงูุดุจูุฉ ุฃู ููุฏูุง ุฃู ุงููุทุงุนูุง </h3><br><p style=";text-align:right;direction:rtl">  <code>tc</code> ( <a href="http://tldp.org/HOWTO/Traffic-Control-HOWTO/intro.html">ุงูุชุญูู ูู ุญุฑูุฉ ุงููุฑูุฑ</a> ) ูู ุฃุฏุงุฉ ุณุทุฑ ุฃูุงูุฑ Linux ุชุณุชุฎุฏู ูุชูููู ุฌุฏููุฉ ุฏูุนุงุช kernel Linux.  ุฅูู ูุญุฏุฏ ููููุฉ ูุถุน ุงูุญุฒู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุฅุฑุณุงู ูุงูุงุณุชูุจุงู ูู ูุงุฌูุฉ ุงูุดุจูุฉ.  ุชุชุถูู ุงูุนูููุงุช ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุชุนุฑูู ุงูุณูุงุณุฉ ูุงูุชุตููู ูุงูุชุฎุทูุท ูุงูุชุดููู ูุงูุฎุณุงุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงุณุชุฎุฏุงู <code>tc</code> ููุญุงูุงุฉ ุงูุชุฃุฎูุฑ ูููุฏุงู ุงูุญุฒูุฉ ูุชุทุจููุงุช UDP ุฃู TCP ุฃู ููุญุฏ ูู ุงุณุชุฎุฏุงู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูุฎุฏูุฉ ูุนููุฉ - ููุญุงูุงุฉ ุธุฑูู ุญุฑูุฉ ูุฑูุฑ ุงูุฅูุชุฑูุช. </p><br><p style=";text-align:right;direction:rtl">  <strong>- ุชูุฏูู ุชุฃุฎูุฑ ูุฏุฑู 100 ูููู ุซุงููุฉ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start โฏ tc qdisc add dev etho root netem delay 100ms #Stop โฏ tc qdisc del dev etho root netem delay 100ms</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ุฅุฏุฎุงู ุชุฃุฎูุฑ ูุฏุฑู 100 ูููู ุซุงููุฉ ูุน ุฏูุชุง ูุฏุฑูุง 50 ูููู ุซุงููุฉ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start โฏ tc qdisc add dev eth0 root netem delay 100ms 50ms #Stop โฏ tc qdisc del dev eth0 root netem delay 100ms 50ms</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ุงูุฃุถุฑุงุฑ ุงูุชู ูุญูุช 5 ูช ูู ุญุฒู ุงูุดุจูุฉ</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start โฏ tc qdisc add dev eth0 root netem corrupt 5% #Stop โฏ tc qdisc del dev eth0 root netem corrupt 5%</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ููุฏุงู ุงูุญุฒูุฉ ุจูุณุจุฉ 7ูช ูุน ุงุฑุชุจุงุท ุจูุณุจุฉ 25ูช</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start โฏ tc qdisc add dev eth0 root netem loss 7% 25% #Stop โฏ tc qdisc del dev eth0 root netem loss 7% 25%</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  <strong>! ุงูููู</strong>  7ูช ูุงูู ููู ูุง ูุณูุท ุชุทุจูู TCP. </blockquote><br><h3 id="igraya-s-etchosts---staticheskoy-tablicey-poiska-dlya-imen-uzlov" style=";text-align:right;direction:rtl">  ุงููุนุจ ุจุงุณุชุฎุฏุงู "/ etc / hosts" - ุฌุฏูู ุจุญุซ ุซุงุจุช ูุฃุณูุงุก ุงููุถูููู </h3><br><p style=";text-align:right;direction:rtl">  <code>/etc/hosts</code> ูู ููู ูุตู ุจุณูุท ูุฑุจุท ุนูุงููู IP ุจุฃุณูุงุก ุงููุถูููู ุ ุณุทุฑ ูุงุญุฏ ูู ุงููุฑุฉ ุงููุงุญุฏุฉ.  ุชุชุทูุจ ูู ุนูุฏุฉ ุณุทุฑูุง ูุงุญุฏูุง ูุญุชูู ุนูู ุงููุนูููุงุช ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">IP_address canonical_hostname [aliases...]</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mx/po/lo/mxpoloqghh2ou_bphgifo69ydba.png"></p><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ููู hosts ุฃุญุฏ ุงูุฃูุธูุฉ ุงูุนุฏูุฏุฉ ุงูุชู ุชุตู ุฅูู ุนูุฏ ุงูุดุจูุฉ ุนูู ุดุจูุฉ ุงูููุจููุชุฑ ูุชุฑุฌูุฉ ุฃุณูุงุก ุงููุถูููู ุงูุชู ูููููุง ุงููุงุณ ุฅูู ุนูุงููู IP.  ููุนู ุ ููุฏ ุฎููุช ุงูุฃูุฑ: ูู ุงููุฑูุญ ุฎุฏุงุน ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุจูุถููุง.  ูููุง ููู ุจุนุถ ุงูุฃูุซูุฉ: </p><br><p style=";text-align:right;direction:rtl">  <strong>- ููุน ุงููุตูู ุฅูู DynamoDB API ููุซูู EC2</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start # make copy of /etc/hosts to /etc/host.back โฏ cp /etc/hosts /etc/hosts.back โฏ echo "127.0.0.1 dynamodb.us-east-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 dynamodb.us-east-2.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 dynamodb.us-west-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 dynamodb.us-west-2.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 dynamodb.eu-west-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 dynamodb.eu-north-1.amazonaws.com" &gt;&gt; /etc/hosts #Stop # copy back the old version /etc/hosts โฏ cp /etc/hosts.back /etc/hosts</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ููุน ุงููุตูู ุฅูู EC2 API ูู ูุซูู EC2</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start # make copy of /etc/hosts to /etc/host.back โฏ cp /etc/hosts /etc/hosts.back โฏ echo "127.0.0.1 ec2.us-east-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 ec2.us-east-2.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 ec2.us-west-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 ec2.us-west-2.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 ec2.eu-west-1.amazonaws.com" &gt;&gt; /etc/hosts โฏ echo "127.0.0.1 ec2.eu-north-1.amazonaws.com" &gt;&gt; /etc/hosts #Stop # copy back the old version /etc/hosts โฏ cp /etc/hosts.back /etc/hosts</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุดุงูุฏ ุงูุจุซ ุงููุจุงุดุฑ: ุฃููุงู ุ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช EC2 ูุชููุฑุฉ <code>ec2 describe-instances</code> ุจูุฌุงุญ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/f9/oy/bc/f9oybcnf8l9s8ov4m7bzulyx6as.png"></p><br><p style=";text-align:right;direction:rtl">  ุจูุฌุฑุฏ ุฃู ุฃุถูุช <code>127.0.01 ec2.eu-west-1.amazonaws.com</code> ุฅูู <code>/etc/hosts</code> ุ <code>127.0.01 ec2.eu-west-1.amazonaws.com</code> ููุงููุฉ API EC2. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/lj/6v/_y/lj6v_y8w7yfhnk9h8izd2gtj2aw.png"></p><br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ูุฐุง ูุนูู ูุฌููุน ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช AWS. </p><br><h2 id="rasskazal-by-ya-vam-anekdot-pro-dns" style=";text-align:right;direction:rtl">  ุฃูุฏ ุฃู ุฃููู ูู ูุฒุญุฉ ุญูู DNS ... </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/dq/mo/ps/dqmopsts1wl0pfntxgvwoqgcwby.gif"></p><br><h3 id="no-boyus-do-vas-doydet-tolko-na-vtorye-sutki-v-smysle-cherez-24-chasa" style=";text-align:right;direction:rtl">  ... ูููู ุ ุฃุฎุดู ุ ูู ูุตู ุฅููู ุฅูุง ูู ุงูููู ุงูุซุงูู.  ูุนูู ุจุนุฏ 24 ุณุงุนุฉ. </h3><br><p style=";text-align:right;direction:rtl">  ูู 21 ุฃูุชูุจุฑ 2016 ุ ุจุณุจุจ <a href="https://en.wikipedia.org/wiki/2016_Dyn_cyberattack">ูุฌูู DDoS Dyn ุ</a> ูู ููู ููุงู ุนุฏุฏ ูุจูุฑ ูู ุงูููุตุงุช ูุงูุฎุฏูุงุช ูู ุฃูุฑูุจุง ูุฃูุฑููุง ุงูุดูุงููุฉ.  ููููุง <a href="https://www.thousandeyes.com/resources/2018-global-dns-performance-benchmark-report">ูุชูุฑูุฑ ThousandEyes ุญูู ุฃุฏุงุก DNS ูู ุฌููุน ุฃูุญุงุก ุงูุนุงูู ูู ุนุงู 2018</a> ุ ูุฅู 60ูช ูู ุงูุดุฑูุงุช ููููุฑู SaaS ูุง ุฒุงููุง ูุนุชูุฏูู ุนูู ูุฒูุฏ DNS ูุตุฏุฑ ูุงุญุฏ ุ ูุจุงูุชุงูู ูุตุจุญูู ุนุฑุถุฉ ููุดู DNS.  ูุจูุง ุฃูู ูู ูููู ููุงู ุฅูุชุฑูุช ุจุฏูู DNS ุ ุณูููู ูู ุงูุฑุงุฆุน ูุญุงูุงุฉ ูุดู DNS ูู ุชูููู ูุฑููุชู ููุดู DNS ุงูุชุงูู. </p><br><p style=";text-align:right;direction:rtl">  <strong>Blackholing</strong> ูู ุงูุทุฑููุฉ ุงูุชู ุชูููุฏูุง ุชูููุต ุงูุฃุถุฑุงุฑ ุงููุงุฌูุฉ ุนู <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack">ูุฌูู DDoS</a> .  ูุชู ุชูุฌูู ุญุฑูุฉ ูุฑูุฑ ุงูุดุจูุฉ ุบูุฑ ุงูุตุญูุญุฉ ุฅูู ุงูุซูุจ ุงูุฃุณูุฏ ูุฅููุงุฆูุง ูู ุงููุฑุงุบ.  ุฅุตุฏุงุฑ <code>/dev/null</code> ููุนูู ุนูู ุงูุดุจูุฉ :-) ููููู ุงุณุชุฎุฏุงูู ููุญุงูุงุฉ ููุฏุงู ุญุฑูุฉ ูุฑูุฑ ุงูุดุจูุฉ ุฃู ุงูุจุฑูุชูููู ุ ููุง ูููู <a href="https://en.wikipedia.org/wiki/Domain_Name_System">DNS</a> ููุณู. </p><br><p style=";text-align:right;direction:rtl">  ููุฐู ุงููููุฉ ุ ุชุญุชุงุฌ ุฅูู ุฃุฏุงุฉ <a href="https://linux.die.net/man/8/iptables"><code>iptables</code></a> ุ ูุงูุชู ุชูุณุชุฎุฏู ูุชูููู ุญุฒูุฉ IP ูุตูุงูุชูุง ูุงูุชุญูู ูููุง ูู ููุงุฉ Linux. </p><br><p style=";text-align:right;direction:rtl">  ููุญุตูู ุนูู ุญุฑูุฉ ูุฑูุฑ DNS ุนุจุฑ blackhole ุ ุฌุฑูุจ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#Start โฏ iptables -A INPUT -p tcp -m tcp --dport 53 -j DROP โฏ iptables -A INPUT -p udp -m udp --dport 53 -j DROP #Stop โฏ iptables -D INPUT -p tcp -m tcp --dport 53 -j DROP โฏ iptables -D INPUT -p udp -m udp --dport 53 -j DROP</code> </pre> <br><h3 id="vvedenie-otkazov-s-ispolzovaniem-toxiproxy" style=";text-align:right;direction:rtl">  ููุฏูุฉ ูู ุงููุดู ุจุงุณุชุฎุฏุงู Toxiproxy. </h3><br><p style=";text-align:right;direction:rtl">  ุฃุฏูุงุช Linux ูุซู <code>tc</code> ู <code>iptables</code> ูุดููุฉ ูุงุญุฏุฉ - ูููู ููุณุช ุงููุดููุฉ ุงููุญูุฏุฉ.  ุฃููุง ุชุชุทูุจ ุฅุฐู ุงูุฌุฐุฑ ูุชุดุบูู ุ ููุฐุง ูุฎูู ูุดุงูู ูุจุนุถ ุงูููุธูุงุช ูุงูุจูุฆุงุช.  ูุฑุฌู ุงูุญุจ ูุตุงูุญ - <strong>Toxiproxy</strong> ! </p><br><p style=";text-align:right;direction:rtl">  <a href="https://github.com/shopify/toxiproxy">Toxiproxy</a> ูู ูููู TCP ููุชูุญ ุงููุตุฏุฑ ุชู ุชุทููุฑู <a href="https://engineering.shopify.com/">ุจูุงุณุทุฉ ูุฑูู Shopify ูู ุงููููุฏุณูู</a> .  ูุณุงุนุฏ ูู ูุญุงูุงุฉ ุธุฑูู ุงูุดุจูุฉ ูุงููุธุงู ุงูููุถูู ุฃู ุงูุฃูุธูุฉ ุงูุญููููุฉ.  ุถุนู ุจูู ุงูููููุงุช ุงููุฎุชููุฉ ููููุฏุณุฉ ุงููุนูุงุฑูุฉ ููุง ูู ููุถุญ ุฃุฏูุงู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9u/k6/w-/9uk6w-tyk0jk6n1jgdg8awf0oyo.png"></p><br><p style=";text-align:right;direction:rtl">  ุชู ุฅูุดุงุคู ุฎุตูุตูุง ููุงุฎุชุจุงุฑ ุ ูุจูุฆุงุช CI ุ ูุจูุฆุงุช ุงูุชุทููุฑ ุ ูููุฏู ุชุดููุดูุง ูุญุฏุฏูุง ูุณุจููุง ุฃู ุนุดูุงุฆููุง ูุชู ุงูุชุญูู ููู ูู ุฎูุงู ุงูุฅุนุฏุงุฏุงุช.  ูุณุชุฎุฏู Toxiproxy ููุงุฏ <a href="https://github.com/shopify/toxiproxy"><strong>ุณุงูุฉ</strong></a> ููุนุงูุฌุฉ ุงูุนูุงูุฉ ุจูู ุงูุนููู ูุฑูุฒ ุงููุทูุฑ ุ ููููู ุชููุฆุชู ูู ุฎูุงู <a href="&amp;xid=17259,15700022,15700186,15700190,15700259,15700271&amp;usg=ALkJrhgMp3IQGHCL06dgvDlk9ekNVmAumQ#">ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช HTTP</a> .  ููู ูู ุงููุฌููุนุฉ ููุงู ูุง ูููู ูู ุงูููุงุฏ ุงูุณุงูุฉ ููุจุฏุก. </p><br><p style=";text-align:right;direction:rtl">  ููุถุญ ุงููุซุงู ุงูุชุงูู ููู ูุนูู Toxiproxy ูุน ุฑูุฒ ุนููู ุงูููุงุฏ ุงูุณููุฉ ุนู ุทุฑูู ุฅุฏุฎุงู ุชุฃุฎูุฑ ูุฏุฑู 1000 ูููู ุซุงููุฉ ูู ุงูุงุชุตุงู ุจูู ุนููู Redis ุงูุฎุงุต ุจู ู redis-cli ู Redis ููุณู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vg/zg/gf/vgzggft6l5n0eywx2gn__njbc08.png"></p><br><p style=";text-align:right;direction:rtl">  ุชู ุงุณุชุฎุฏุงู Toxiproxy ุจูุฌุงุญ ุจูุงุณุทุฉ Shopify ูู ุฌููุน ุจูุฆุงุช ุงูุฅูุชุงุฌ ูุงูุชุทููุฑ ููุฐ ุฃูุชูุจุฑ 2014.  ูุฒูุฏ ูู ุงููุนูููุงุช ุนูู <a href="https://shopifyengineering.myshopify.com/blogs/engineering/building-and-testing-resilient-ruby-on-rails-applications">ุจููู</a> . </p><br><h2 id="3---vvedenie-otkazov-na-urovne-prilozheniya-processa-i-servisa" style=";text-align:right;direction:rtl">  3 - ููุฏูุฉ ูู ุงููุดู ูู ุงูุชุทุจูู ุ ุงูุนูููุฉ ููุณุชูู ุงูุฎุฏูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุจุฑูุงูุฌ ูุณูุท.  ูุฐู ุญูููุฉ.  ููุงุฐุง ุชูุนูุ  ูู ูุฌุจ ุนูู ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ SSH ุนูู ุงูุฎุงุฏู ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุฉ ุงููุงุดูุฉุ  ุชููุฑ ุฃูุธูุฉ ุงูุชุญูู ูู ุงูุนูููุงุช ูุธุงุฆู ุงูุชุญูู ูู ุงูุญุงูุฉ ุฃู ุชุบููุฑ ุงูุญุงูุฉ ูููุน ุงูุจุฏุก ุฃู ุงูุฅููุงู ุฃู ุฅุนุงุฏุฉ ุงูุชุดุบูู.  ุนุงุฏุฉ ูุง ุชุณุชุฎุฏู ุฃูุธูุฉ ุงูุชุญูู ูุถูุงู ุชุญูู ุนูููุฉ ูุณุชูุฑ.  <a href="https://en.wikipedia.org/wiki/Systemd"><code>systemd</code></a> ูู ูุฌุฑุฏ ูุซู ูุฐู ุงูุฃุฏุงุฉ ุ ุญูุซ ูููุฑ ูุจูุงุช ุงูุชุญูู ูู ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ ููุธุงู Linux.  ูููุฑ <a href="http://supervisord.org/introduction.html"><code>Supervisord</code></a> ุงูุชุญูู ูู ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ุนูู ุฃูุธูุฉ ุงูุชุดุบูู ูุซู UNIX. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุดุฑ ุงูุชุทุจูู ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ูุฐู ุงูุฃุฏูุงุช.  ุฅููุง ุจุงูุชุฃููุฏ ููุงุฑุณุฉ ุฌูุฏุฉ ูุงุฎุชุจุงุฑ ุงูุฃุถุฑุงุฑ ุงููุงุฌูุฉ ุนู ูุชู ุงูุนูููุงุช ุงูุญุฑุฌุฉ.  ุชุฃูุฏ ูู ุชููู ุงูุชูุจููุงุช ููู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุฉ ุชููุงุฆููุง. </p><br><p style=";text-align:right;direction:rtl">  <strong>- ูุชู ุนูููุงุช ุฌุงูุง</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ pkill -KILL -f java #Alternative โฏ pkill -f 'java -jar'</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ูุชู ุนูููุงุช ุจุงูุซูู</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ pkill -KILL -f python</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ููููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>pkill</code> ููุชู ุนุฏุฏ ูููู ูู ุงูุนูููุงุช ุงูุฃุฎุฑู ุงูุชู ุชุนูู ุนูู ุงููุธุงู. </p><br><h2 id="vvedenie-otkazov-bazy-dannyh" style=";text-align:right;direction:rtl">  ุชูุฏูู ูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ููุงู ุฑุณุงุฆู ูุดู ูุง ูุฑุบุจ ุงููุดุบููู ูู ุชููููุง ุ ููุฐู ูู ุงูุฑุณุงุฆู ุงููุชุนููุฉ ุจูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ุงูุจูุงูุงุช ุชุณุชุญู ุซูููุง ูู ุงูุฐูุจ ุ ูุจุงูุชุงูู ุ ูููุง ุชุนุทูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุฒุฏุงุฏ ุฎุทุฑ ููุฏุงู ุจูุงูุงุช ุงูุนููู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3c/lz/ye/3clzye5agj95ocxbo0vyorq2opc.png"><br>  <em>ุณูููู ูุฌุฑุฏ ุตูุงูุฉ ุณููุฉ.</em>  <em>ู- ู- ู- ู- ูููุฐุง ... ุณูุท ูู ุดูุก</em> </p><br><p style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุฃุญูุงู ุ ุชุญุฏุฏ ุงููุฏุฑุฉ ุนูู ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูุฌุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุญุงูุฉ ุตุงูุญุฉ ููุนูู ูู ุฃุณุฑุน ููุช ูููู ูุณุชูุจู ุงูุดุฑูุฉ.  ูุณูุก ุงูุญุธ ุ ููุณ ูู ุงูุณูู ุฏุงุฆููุง ุงูุชุญุถูุฑ ูุฃููุงุท ูุฎุชููุฉ ูู ูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช - ูุณูุธูุฑ ุงููุซูุฑ ูููุง ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ ููุท. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ุฅุฐุง ููุช ุชุณุชุฎุฏู <a href="https://aws.amazon.com/rds/aurora/">Amazon Aurora</a> ุ ูููููู ุงุฎุชุจุงุฑ ูุฑููุฉ ูุฌููุนุฉ ูุงุนุฏุฉ ุจูุงูุงุช Amazon Aurora ูู ุญุงูุงุช <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Managing.FaultInjectionQueries.html">ุงููุดู ูู</a> ุงุณุชุฎุฏุงู <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Managing.FaultInjectionQueries.html">ุทูุจุงุช ุชุฌุงูุฒ ุงููุดู</a> . </p><br><h3 id="vvedenie-otkaza-amazon-aurora" style=";text-align:right;direction:rtl">  ุงูุฃูุงุฒูู ุฃูุฑูุฑุง ุชุญุทู ููุฏูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุชู ุฅุตุฏุงุฑ ุทูุจุงุช ุงููุดู ูุฃูุงูุฑ SQL ููุซูู Amazon Aurora ูุชุณูุญ ูู ุจุฌุฏููุฉ ูุญุงูุงุฉ ูุฃุญุฏ ุงูุฃุญุฏุงุซ ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุดู ูู ุงููุชุงุจุฉ DB ูุซูู. </li><li style=";text-align:right;direction:rtl">  ูุดู ุฃูุฑูุฑุง ุงููููุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ูุดู ุงููุฑุต. </li><li style=";text-align:right;direction:rtl">  ุงููุฑุต ุงูุฒุงุฆุฏ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุฅุฑุณุงู ุทูุจ ูููุดู ุ ูุฌุจ ุนููู ุฃูุถูุง ุชุญุฏูุฏ ููุฏุงุฑ ุงูููุช ุงูุฐู ุณูุชู ุฎูุงูู ูุญุงูุงุฉ ุญุฏุซ ุงููุดู. </p><br><p style=";text-align:right;direction:rtl">  <strong>- ุชุณุจุจ ูุดู ูุซูู Amazon Aurora:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ALTER SYSTEM CRASH [ INSTANCE | DISPATCHER | NODE ];</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ูุญุงูุงุฉ ูุดู ูุณุฎุฉ ุฃูุฑูุฑุง:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ALTER SYSTEM SIMULATE percentage PERCENT READ REPLICA FAILURE [ TO ALL | TO "replica name" ] FOR INTERVAL quantity { YEAR | QUARTER | MONTH | WEEK | DAY | HOUR | MINUTE | SECOND };</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ูุญุงูุงุฉ ูุดู ุงููุฑุต ููุฌููุนุฉ ูุงุนุฏุฉ ุจูุงูุงุช Aurora:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ALTER SYSTEM SIMULATE percentage PERCENT DISK FAILURE [ IN DISK index | NODE index ] FOR INTERVAL quantity { YEAR | QUARTER | MONTH | WEEK | DAY | HOUR | MINUTE | SECOND };</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ูุญุงูุงุฉ ูุดู ุงููุฑุต ููุฌููุนุฉ ูุงุนุฏุฉ ุจูุงูุงุช Aurora:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ALTER SYSTEM SIMULATE percentage PERCENT DISK CONGESTION BETWEEN minimum AND maximum MILLISECONDS [ IN DISK index | NODE index ] FOR INTERVAL quantity { YEAR | QUARTER | MONTH | WEEK | DAY | HOUR | MINUTE | SECOND };</code> </pre> <br><h2 id="otkazy-v-mire-besservernyh-prilozheniy" style=";text-align:right;direction:rtl">  ุชุญุทู ูู ุนุงูู ุงูุชุทุจููุงุช ุงูุฎูุงุฏู </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูููู ุงููุดู ุชุญุฏููุง ุญูููููุง ุฅุฐุง ููุช ุชุณุชุฎุฏู ููููุงุช ุจุฏูู ุฎุงุฏู ุ ูุฃู ุงูุฎุฏูุงุช ุจุฏูู ุฎุงุฏู ูุซู AWS Lambda ูุง ุชุฏุนู ุงููุดู ุจุดูู ุฃุตูู. </p><br><h3 id="vvedenie-otkazov-v-funkcii-lambda" style=";text-align:right;direction:rtl">  ุชูุฏูู ูุดู ูุงูุฏุง </h3><br><p style=";text-align:right;direction:rtl">  ูููู ูุฐู ุงููุดููุฉ ุ ูุชุจุช <a href="https://github.com/adhorn/aws-lambda-chaos-injection">ููุชุจุฉ ุจูุซูู ุตุบูุฑุฉ</a> <a href="https://github.com/adhorn/aws-lambda-layer-chaos-injection">ูุทุจูุฉ ูุงูุฏุง</a> - ูุฅุฏุฎุงู ุงูุฅุฎูุงูุงุช ูู <a href="https://aws.amazon.com/lambda/">AWS Lambda</a> .  ุญุงูููุง ุ ูุฏุนู ูู ูู ุงูุชุฃุฎูุฑ ูุงูุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช ูุฅุฏุฎุงู ุฑูุฒ ุฎุทุฃ HTTP.  ูุชุญูู ุงููุดู ูู ุฎูุงู ุชูููู <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS SSM Parameter Store ุนูู</a> ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ "isEnabled": true, "delay": 400, "error_code": 404, "exception_msg": "I really failed seriously", "rate": 1 }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฅุถุงูุฉ ูุตูู ุจูุซูู ููุธููุฉ ุงููุนุงูุฌ ูุฅุฎูุงู. </p><br><p style=";text-align:right;direction:rtl">  <strong>- ุฑูู ุงุณุชุซูุงุก:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@inject_exception def handler_with_exception(event, context): return { 'statusCode': 200, 'body': 'Hello from Lambda!' } &gt;&gt;&gt; handler_with_exception('foo', 'bar') Injecting exception_type &lt;class "Exception"&gt; with message I really failed seriously a rate of 1 corrupting now Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt; File "/.../chaos_lambda.py", line 316, in wrapper raise _exception_type(_exception_msg) Exception: I really failed seriously</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ุฃุฏุฎู ุฑูุฒ ุงูุฎุทุฃ "HTTP ุบูุฑ ุตุงูุญ":</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@inject_statuscode def handler_with_statuscode(event, context): return { 'statusCode': 200, 'body': 'Hello from Lambda!' } &gt;&gt;&gt; handler_with_statuscode('foo', 'bar') Injecting Error 404 at a rate of 1 corrupting now {'statusCode': 404, 'body': 'Hello from Lambda!'}</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>- ุฃุฏุฎู ุชุฃุฎูุฑ:</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@inject_delay def handler_with_delay(event, context): return { 'statusCode': 200, 'body': 'Hello from Lambda!' } &gt;&gt;&gt; handler_with_delay('foo', 'bar') Injecting 400 of delay with a rate of 1 Added 402.20ms to handler_with_delay {'statusCode': 200, 'body': 'Hello from Lambda!'}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุฑ <a href="https://github.com/adhorn/aws-lambda-chaos-injection">ููุง</a> ููุนุฑูุฉ ุงููุฒูุฏ ุนู ููุชุจุฉ ุจุงูุซูู. </p><br><h3 id="vvedenie-otkaza-v-ispolnenie-lambda-cherez-ogranichenie-parallelizma" style=";text-align:right;direction:rtl">  ุชูุฏูู ูุดู ูุงูุฏุง ูู ุฎูุงู ูููุฏ ุงูุชุฒุงูู </h3><br><p style=";text-align:right;direction:rtl">  ูููู Lambda ุจุดูู ุงูุชุฑุงุถู ุ ูุฃุณุจุงุจ ุฃูููุฉ ุ ุจุถุจุท ุงูุชูููุฐ ุงูููุงุฒู ูุฌููุน ุงููุธุงุฆู ูู ููุทูุฉ ูุญุฏุฏุฉ ููู ุญุณุงุจ.  ุชุดูุฑ ุนูููุงุช ุงูุชูููุฐ ุงููุชูุงุฒูุฉ ุฅูู ุนุฏุฉ ุนูููุงุช ุชูููุฐ ูุฑูุฒ ุฏุงูุฉ ุชุญุฏุซ ูู ุฃู ูุญุธุฉ ูู ุงูุฒูู.  ูุชู ุงุณุชุฎุฏุงููุง ูุชูุณูุน ูุทุงู ุงุณุชุฏุนุงุก ุฏุงูุฉ ูุทูุจ ูุงุฑุฏ.  ูููู ูููู ุฃู ุชุฎุฏู ุงูุบุฑุถ ุงููุนุงูุณ: ููู ุชูููุฐ ูุงูุฏุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ aws lambda put-function-concurrency --function-name &lt;value&gt; --reserved-concurrent-executions 0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูููู ูุฐุง ุงูุฃูุฑ ุงูุชุฒุงูู ุฅูู ุงูุตูุฑ ุ ููุง ูุคุฏู ุฅูู ูุดู ุงูุงุณุชุนูุงู ูุน ูุฌูุฏ ุฎุทุฃ ูุซู "ุงููุจุญ" - DTC <code>429</code> . </p><br><h3 id="thundra---trassirovka-besservernyh-peredach" style=";text-align:right;direction:rtl">  Thundra - ุชุชุจุน ุงูุชูุงู serverless </h3><br><p style=";text-align:right;direction:rtl">  <a href="https://www.thundra.io/"><strong>Thundra</strong></a> ูู ุฃุฏุงุฉ ูุฑุงูุจุฉ ููุชุทุจููุงุช <a href="https://www.thundra.io/"><strong>ุจุฏูู ุฎุงุฏู</strong></a> ููุฏููุง ูุฏุฑุฉ ูุฏูุฌุฉ ูุญูู ุงููุดู ูู ุงูุชุทุจููุงุช <a href="https://www.thundra.io/"><strong>ุงูุฎุงููุฉ ูู ุงูุฎูุงุฏู</strong></a> .  ุฅูู ูุตูุน <a href="https://docs.thundra.io/docs/python-span-listeners">ูุนุงูุฌุงุช</a> ูุฌููุนุงุช ูุฅุฏุฎุงู ุฅุฎูุงูุงุช ูุซู "ูุง ููุฌุฏ ูุนุงูุฌ ุฎุทุฃ" ููุนูููุงุช ูุน DynamoDB ุ ุฃู "ุนุฏู ุชุญููุฏ ุงูุฃุฎุทุงุก" ููุตุฏุฑ ุงูุจูุงูุงุช ุ ุฃู "ูุง ูููุฉ ูู ุทูุจุงุช HTTP ุงูุตุงุฏุฑุฉ".  ูู ุฃุญุงูู ุฐูู ุจููุณู ุ ููู ูู ูุฐุง ุงูููุดูุฑ ูู ุฃุฌู ุชุฃููู <a href="https://twitter.com/theburningmonk">ูุงู ุชุดูู</a> ููู ูุฐุง <a href="https://www.youtube.com/watch%3Fv%3DTpoN1wm2bok">ุงูููุฏูู ุงูุฑุงุฆุน</a> <a href="https://twitter.com/mavi888uy">ููุงุฑุดุง ูููุงูุจุง ุ</a> ุชู ูุตู ุงูุนูููุฉ ุฌูุฏูุง.  ูุจุฏู ูุงุนุฏุง. </p><br><p style=";text-align:right;direction:rtl">  ููู ุฎุชุงู ุงููุณู ุงูุฎุงุต ุจุงูุชุทุจููุงุช ุจุฏูู ุฎุงุฏู ุ ุณุฃููู ุฅู Yan Chui ูุฏูู <a href="https://hackernoon.com/how-can-we-apply-the-principles-of-chaos-engineering-to-aws-lambda-80f87e3237e2">ููุงูุฉ ููุชุงุฒุฉ</a> ุญูู ุตุนูุจุงุช ููุฏุณุฉ ุงูููุถู ูููุง ูุชุนูู ุจุงูุชุทุจููุงุช ุจุฏูู ุฎุงุฏู.  ุฃูุตู ุงูุฌููุน ุจูุฑุงุกุชู. </p><br><h2 id="4---vvedenie-otkazov-na-urovne-infrastruktury" style=";text-align:right;direction:rtl">  4 - ููุฏูุฉ ูู ุงููุดู ุนูู ูุณุชูู ุงูุจููุฉ ุงูุชุญุชูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุจุฏุฃ ูู ุดูุก ุจุฅุฏุฎุงู ุงูุฅุฎูุงูุงุช ุนูู ูุณุชูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ - ููู ูู <a href="https://medium.com/%40adhorn/chaos-engineering-ab0cc9fbd12a">Amazon ู Netflix.</a>  ูู ุงููุญุชูู ุฃู ูููู ุชุทุจูู ุงูุฅุฎูุงูุงุช ุนูู ูุณุชูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ - ูู ูุตู ูุฑูุฒ ุจูุงูุงุช ุจุฃูููู ุฅูู ุญุงูุงุช ุงูุชููู ุงูุนุดูุงุฆู - ูู ุงูุฃุณูู ูู ุงูุชูููุฐ. </p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุทุจุน ุ ูุฅู ูุซุงู " <a href="https://github.com/Netflix/chaosmonkey">ูุฑุฏ ุงูููุถู</a> " ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ุฃููุงู. </p><br><h3 id="ostanovka-instansov-ec2-vybrannyh-sluchayno-v-nekotoroy-zone-dostupnosti" style=";text-align:right;direction:rtl">  ุฅููุงู ูุซููุงุช EC2 ุงูุชู ุชู ุงุฎุชูุงุฑูุง ุนุดูุงุฆููุง ูู ููุทูุฉ ุชููุฑ ูุนููุฉ. </h3><br><p style=";text-align:right;direction:rtl">  ูู ุจุฏุงูุชูุง ุ ุฃุฑุงุฏ Netflix ุชูุฏูู ููุงุนุฏ ูุนูุงุฑูุฉ ุตุงุฑูุฉ.  ูุงู ุจูุดุฑ "ูุฑุฏ ุงูููุถู" ูุฃุญุฏ ุชุทุจููุงุช AWS ุงูุฃููู ูุชุซุจูุช ุฎุฏูุงุช micros ุนุฏููู ุงูุฌูุณูุฉ autoscale - ุจูุนูู ุฃูู ูููู ุชุฏููุฑ ุฃู ูุซูู ุฃู ุงุณุชุจุฏุงูู ุชููุงุฆููุง ุฏูู ุงูุชุณุจุจ ูู ุฃู ููุฏุงู ููุญุงูุฉ ุนูู ุงูุฅุทูุงู.  ุญุฑุต ูุฑุฏ ุงูููุถู ุนูู ุนุฏู ุงูุชูุงู ุฃู ุดุฎุต ููุฐู ุงููุงุนุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุณููุงุฑูู ุงูุชุงูู - ูุดุจู "ูุฑุฏ ุงูููุถู" - ูู ุฅููุงู ุฃู ูุซูู ุจุดูู ุนุดูุงุฆู ุ ูู ููุทูุฉ ุชููุฑ ูุนููุฉ ุฏุงุฎู ููุณ ุงูููุทูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ stop_random_instance(az="eu-west-1a", tag_name="chaos", tag_value="chaos-ready", region="eu-west-1")</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import boto3 import random REGION = 'eu-west-1' def stop_random_instance(az, tag_name, tag_value, region=REGION): ''' &gt;&gt;&gt; stop_random_instance(az="eu-west-1a", tag_name='chaos', tag_value="chaos-ready", region='eu-west-1') ['i-0ddce3c81bc836560'] ''' ec2 = boto3.client("ec2", region_name=region) paginator = ec2.get_paginator('describe_instances') pages = paginator.paginate( Filters=[ { "Name": "availability-zone", "Values": [ az ] }, { "Name": "tag:" + tag_name, "Values": [ tag_value ] } ] ) instance_list = [] for page in pages: for reservation in page['Reservations']: for instance in reservation['Instances']: instance_list.append(instance['InstanceId']) print("Going to stop any of these instances", instance_list) selected_instance = random.choice(instance_list) print("Randomly selected", selected_instance) response = ec2.stop_instances(InstanceIds=[selected_instance]) return response</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู <code>tag_name</code> <code>tag_value</code> <code>tag_name</code> ู <code>tag_value</code> ุ  ูุซู ูุฐู ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ ุณุชููุน ูุดู ุงูุญุงูุงุช ุงูุฎุงุทุฆุฉ.  #lessonlearned </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fj/a3/uq/fja3uq8zoomlzrr4zomp1ycnh3k.jpeg"><br>  <em>ููุนู ... ุฅุนุงุฏุฉ ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุฃุญุณูุช [ุนููุงู ุ ูููุณ ูุฐุง ุงููุซุงู]</em> </p><br><h2 id="5---vvedenie-otkazov-i-instrumenty-orkestracii-tipa-vse-v-odnom" style=";text-align:right;direction:rtl">  5 - ุงููุดู ูู ุชูุฏูู ูุฃุฏูุงุช ุชุฒุงูู ุงููู ูู ูุงุญุฏ </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงููุญุชูู ุฃู ุชุถูุน ูู ุงูุนุฏูุฏ ูู ุงูุฃุฏูุงุช.  ูุญุณู ุงูุญุธ ุ ููุงู ุจุนุถ ููุฏูุงุช ุงูุฑูุถ ูุฃุฏูุงุช ุงูุชูุณูู ุงูุชู ุชุชุถูู ูุนุธููุง ูุณููุฉ ุงูุงุณุชุฎุฏุงู. </p><br><h3 id="chaos-toolkit" style=";text-align:right;direction:rtl">  ูุฌููุนุฉ ุฃุฏูุงุช ุงูููุถู </h3><br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุฃุฏูุงุชู ุงูููุถูุฉ ูู <a href="https://github.com/chaostoolkit">Chaos Toolkit</a> ุ ููู ุนุจุงุฑุฉ ุนู ููุตุฉ ููุฏุณุฉ ููุชูุญุฉ ุงููุตุฏุฑ ูุฏุนููุฉ ุชุฌุงุฑูุงู ูู ูุจู ูุฑูู <a href="https://chaosiq.io/">ChaosIQ</a> ุงูุฑุงุฆุน.  ูููุง ููู ุนุฏุฏ ูููู ูููู: <a href="https://twitter.com/russmiles">ุฑูุณ ูุงููุฒ</a> ุ <a href="https://twitter.com/lawouach">ุณูููุงู ููููุฌูุงุฑุด</a> <a href="https://twitter.com/mperrien">ููุงุฑู ุจุฑูู</a> . </p><br><p style=";text-align:right;direction:rtl">  ุชูุนุฑูู ูุฌููุนุฉ ุฃุฏูุงุช Chaos Tool ูุงุฌูุฉ ุชุนุจูุฑูุฉ ููุงุจูุฉ ููุชูุณุนุฉ ูุฅุฌุฑุงุก ุชุฌุฑุจุฉ ููุฏุณุฉ ุงูููุถู ุจุดูู ููุงุฆู.  ููุดูู ุฐูู ุจุฑุงูุฌ ุชุดุบูู AWS ู Google Cloud Engine ู Microsoft Azure ู Cloud Foundry ู Humino ู Prometheus ู Gremlin. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฅุถุงูุงุช ูู ูุฌููุนุฉ ูู ุงูุงุฎุชุจุงุฑุงุช ูุงูุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏูุฉ ููุชุฌุงุฑุจ ุนูู ุงููุญู ุงูุชุงูู: ูููู ูุซูููุง ุชู ุงุฎุชูุงุฑู ุนุดูุงุฆููุง ูู ููุทูุฉ ุชููุฑ ูุญุฏุฏุฉ ุฅุฐุง ูุงู <code>tag-key</code> ูุญุชูู <code>chaos-ready</code> ูููุฉ <code>chaos-ready</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ "version": "1.0.0", "title": "What is the impact of randomly terminating an instance in an AZ", "description": "terminating EC2 instance at random should not impact my app from running", "tags": ["ec2"], "configuration": { "aws_region": "eu-west-1" }, "steady-state-hypothesis": { "title": "more than 0 instance in region", "probes": [ { "provider": { "module": "chaosaws.ec2.probes", "type": "python", "func": "count_instances", "arguments": { "filters": [ { "Name": "availability-zone", "Values": ["eu-west-1c"] } ] } }, "type": "probe", "name": "count-instances", "tolerance": [0, 1] } ] }, "method": [ { "type": "action", "name": "stop-random-instance", "provider": { "type": "python", "module": "chaosaws.ec2.actions", "func": "stop_instance", "arguments": { "az": "eu-west-1c" }, "filters": [ { "Name": "tag-key", "Values": ["chaos-ready"] } ] }, "pauses": { "after": 60 } } ], "rollbacks": [ { "type": "action", "name": "start-all-instances", "provider": { "type": "python", "module": "chaosaws.ec2.actions", "func": "start_instances", "arguments": { "az": "eu-west-1c" }, "filters": [ { "Name": "tag-key", "Values": ["chaos-ready"] } ] } } ] }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฌุฑุงุก ุงูุชุฌุฑุจุฉ ุฃุนูุงู ุจุณูุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">โฏ chaos run experiment_aws_random_instance.json</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/0l/tb/qz/0ltbqz2b-ppule8qm6xxn0jb6p4.png"></p><br><p style=";text-align:right;direction:rtl">  ุชููู ููุฉ ูุฌููุนุฉ ุฃุฏูุงุช Chaos Toolkit ุ ุฃููุงู ุ ูู ุฃููุง ููุชูุญุฉ ุงููุตุฏุฑ ููููู ุชูููููุง ุญุณุจ ุงุญุชูุงุฌุงุชู.  ุซุงููุงู ุ ุฅูู ููุงุณุจ ุชูุงููุง ูุฎุท ุฃูุงุจูุจ CI / CD ููุฏุนู ุงุฎุชุจุงุฑ ุงูููุถู ุงููุณุชูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฌุงูุจ ุงูุณูุจู ููุฌููุนุฉ ุฃุฏูุงุช ุงูููุถู ูู ุฃู ุงูุฃูุฑ ูุชุทูุจ ุจุนุถ ุงูููุช ูุฅุชูุงููุง.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ุชูุฌุฏ ุชุฌุงุฑุจ ุฌุงูุฒุฉ ูููุง ุ ูุฐูู ุนููู ุฃู ุชูุชุจูุง ุจููุณู.  ููุน ุฐูู ุ ุฃูุง ุนูู ุฏุฑุงูุฉ ุจุงููุฑูู ูู ChaosIQ ุ ุงูุฐู ูุนูู ุจูุง ููู ุ ูููู ูุฐู ุงููููุฉ. </p><br><h3 id="gremlin" style=";text-align:right;direction:rtl">  ุดุจุญ </h3><br><p style=";text-align:right;direction:rtl">  ููุถู ุขุฎุฑ ูู ูู ุงููุฑูููู.  ุฃูู ูุญุชูู ุนูู ูุฌููุนุฉ ุดุงููุฉ ูู ูุณุงุฆุท ูุฅุฏุฎุงู ุงููุดู ูู ุฃุฏุงุฉ ุจุณูุทุฉ ูุน ูุงุฌูุฉ ูุณุชุฎุฏู ุจุฏูููุฉ.  ูุซู ูุฐู ุงูููุถู ูุฎุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏุนู Gremlin ุชูุฏูู ุงูุฅุฎูุงูุงุช ุนูู ูุณุชูู <a href="https://www.gremlin.com/docs/infrastructure-layer/attacks/">ุงูููุงุฑุฏ ูุงูุดุจูุฉ ูุงูุงุณุชุนูุงู</a> ุ ููุง ูุชูุญ ูู ุชุฌุฑุจุฉ ุงููุธุงู ุจุฃูููู ุจุณุฑุนุฉ ุ ุจูุง ูู ุฐูู  ูุน ุงูุฃุฌูุฒุฉ ุ ูููุฏูู ุงูุฎุฏูุงุช ุงูุณุญุงุจูุฉ ุงููุฎุชููุฉ ุ ูุงูุจูุฆุงุช ุงููุนุจุฃุฉ ูู ุญุงููุงุช ุ ุจูุง ูู ุฐูู Kubernetes ุ ูุงูุชุทุจููุงุช ุ ูุฅูู ุญุฏ ูุง ุ ุงูุชุทุจููุงุช ุจุฏูู ุฎุงุฏู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุงูููุงูุฃุฉ - ุงูุฑุฌุงู ูู <a href="https://twitter.com/GremlinInc">Gremlin ูู</a> ุฒููุงุก ุฑุงุฆุนูู ููุชุจูู ูุญุชูู ุฑุงุฆุนูุง <a href="https://www.gremlin.com/blog/">ูููุฏููุฉ</a> ููุณุชุนุฏูู ุฏุงุฆููุง ูููุณุงุนุฏุฉ!  ุฅูููู ุงูุจุนุถ ูููู: <a href="https://twitter.com/callmeforni">ูุงุซูู</a> ุ <a href="https://twitter.com/KoltonAndrus">ูููุชูู</a> ุ <a href="https://twitter.com/tammybutow">ุชุงูู</a> ุ <a href="https://twitter.com/richburroughs">ุฑูุชุด</a> ุ <a href="https://twitter.com/Ana_M_Medina">ุขูุง</a> ู <a href="https://twitter.com/HoReaL">HML</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ููุงู ูุงุณุชุฎุฏุงู Gremlin: </p><br><p style=";text-align:right;direction:rtl">  ุฃุฏุฎู ุฃููุงู ุชุทุจูู Gremlin ูุญุฏุฏ "ุฅูุดุงุก ูุฌูู". </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xw/cv/m9/xwcvm9psqdr8uottkvc2nt4kexi.png"></p><br><p style=";text-align:right;direction:rtl">  ุชุนููู ูุฏู - ุงููุซุงู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/v_/2v/u7/v_2vu75wvlrzgdem88t2ml0rggu.png"></p><br><p style=";text-align:right;direction:rtl">  ุญุฏุฏ ููุน ุงููุดู ุงูุฐู ุชุฑูุฏ ุชูุฏููู ุ ููุฏ ุชุจุฏุฃ ุงูููุถู! </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bx/oq/ox/bxoqoxv4vvxlayqtbtwpgkxd_yw.png"></p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุฃุนุชุฑู ุฃููู ุฃุญุจุจุช ุฏูููุง Gremlin: ูุน ุฐูู ุ ูุฅู ุงูุชุฌุงุฑุจ ุนูู ููุฏุณุฉ ุงูููุถู ุจุณูุทุฉ ุจุดูู ุญุฏุณู. </p><br><p style=";text-align:right;direction:rtl">   <a href="https://www.gremlin.com/pricing/"> </a> โ    ,          .      .  , Gremlin-  daemon    ,   ,      . </p><br><h3 id="run-command-ot-aws-system-manager" style=";text-align:right;direction:rtl"> Run Command  AWS System Manager </h3><br><p style=";text-align:right;direction:rtl">  <a href="https://aws.amazon.com/blogs/aws/new-ec2-run-command-remote-instance-management-at-scale/">Run command    EC2</a> ,   2015 ,       .           โ   2,      <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-managedinstances.html"> </a> .       ,       ,   Systems Manager. </p><br><p style=";text-align:right;direction:rtl"> Run Command    DevOps   ad-hoc  ,      . </p><br><p style=";text-align:right;direction:rtl">   ,  Run Command            ,        Windows,       -. </p><br><p style=";text-align:right;direction:rtl">       <a href="https://medium.com/%40adhorn/injecting-chaos-to-amazon-ec2-using-amazon-system-manager-ca95ee7878f5">    AWS System Manager</a>   <a href="https://github.com/adhorn/chaos-ssm-documents">  </a>    .  โ ! </p><br><h2 id="zakruglyaemsya" style=";text-align:right;direction:rtl"> ! </h2><br><p style=";text-align:right;direction:rtl">     ,          . </p><br><p style=";text-align:right;direction:rtl"> 1 โ - โ    ,     -   .  .          โ    , โ     , ,    .   ,     !    <a href="https://twitter.com/ovhall"> </a> : </p><br><blockquote style=";text-align:right;direction:rtl"> "  .      ". <br> โ ,    - Amazon Prime Video </blockquote><p style=";text-align:right;direction:rtl"> 2 โ    , ,        .                ,        -. </p><br><p style=";text-align:right;direction:rtl"> 3 โ        ,        ,    . </p><br><p style=";text-align:right;direction:rtl"> 4 โ , , ,     . ,  - โ        ,     . </p><br><p style=";text-align:right;direction:rtl">    , , ,    . ,    . ,     ,       :-) </p><br><p style=";text-align:right;direction:rtl"> โ  </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480802/">https://habr.com/ru/post/ar480802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480790/index.html">"ููุงุกุฉ ุงููุตูุน". ุงูุนุซูุฑ ุนูู ุนูู ุงูุฒุฌุงุฌุฉ ูุชุทุจูู ูุธุงู ุงูุณุญุจ ูุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ</a></li>
<li><a href="../ar480792/index.html">ููุฏุณุฉ ุงููุฏุงูุง</a></li>
<li><a href="../ar480794/index.html">ููููุง ุนู ุญุงูุฉ ุฎุงุตุฉ ูุชูููุฐ ุฎูุงุฑุฒููุงุช ุงูุจุญุซ ุงูุจุงุจ ุงูููุชูุญ</a></li>
<li><a href="../ar480796/index.html">ูุจุฑูุฌูู ุดุฑูุฏูุบุฑ ุ ุฏูููุฒ ูุงููุทุท</a></li>
<li><a href="../ar480798/index.html">C ++ ุฑูุณูุง ุจูุชุฑ 2019 ุชูุงุฑูุฑ ุงูุงุณุชุนุฑุงุถ</a></li>
<li><a href="../ar480806/index.html">ุฃูู 5 ุฃุณุจุงุจ ููุงุฐุง ุฃุญุจ ุฎุตุงุฆุต CSS ุงููุฎุตุตุฉ</a></li>
<li><a href="../ar480812/index.html">Nvidia RTX - ุชุธูุฑ ุชูููุฉ ุชุชุจุน ุงูุฃุดุนุฉ ูู ุงูููุช ุงูุญูููู ุฃุฎูุฑูุง ูู SOLIDWORKS Visualize</a></li>
<li><a href="../ar480814/index.html">NX Analyst Meetup # 1: "ุชุญููู ุงูุงุณุชุฑุงุชูุฌูุฉ. ููุท ูู ูุง ููุจุฏุนู ุงูููุชุฌุงุช. ููู ุชุฃุชู ุงูุฃููุงุฑุ "</a></li>
<li><a href="../ar480816/index.html">Dynamics 365 ู Power Platform Meetup ูู Lamoda - ุฅุนูุงู</a></li>
<li><a href="../ar480820/index.html">ูููู ุฃู ุชุญู ุทุฑููุฉ ุจุฏููุฉ ููุชุซุจูุช ุนุจุฑ ุงููู ุฃู ูุงููุฑุฌุงุฑ ูุญู ุฌูุงุฒ ุงูุฃุดุนุฉ ุงูุณูููุฉ ุจุฃูููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>