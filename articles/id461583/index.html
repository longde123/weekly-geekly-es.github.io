<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌲 🌂 🚶 Python untuk membantu menguji produk struktural 🧜🏿 🎅🏿 🤲🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terinspirasi oleh iklan produk struktural di Habré , mengadaptasi skrip python untuk pengujian independen mereka. Gagasan utamanya adalah bahwa produk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python untuk membantu menguji produk struktural</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461583/">  Terinspirasi oleh iklan produk struktural di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Habré</a> , mengadaptasi skrip python untuk pengujian independen mereka.  Gagasan utamanya adalah bahwa produk-produk ini menawarkan perlindungan modal 100%.  Dan mengingat 10 tahun pasar banteng, kinerja historis dari produk-produk seperti itu memukau dengan surga bebas risiko. <br><br>  Artikel ini akan menarik bagi programmer python pemula yang tertarik untuk mengelola uang mereka.  Bagi sebagian orang, alat ini berguna untuk membangun strategi sendiri.  Tapi hati-hati, broker menulis bahwa ini bukan untuk semua orang. <br><br>  Kode diposting di GitHub sebagai notepad Jupyter.  Ayo pergi! <br><a name="habracut"></a><br><h2>  Beberapa kata untuk diperkenalkan </h2><br>  Saya akan menguji pada saham Amerika dan hasilnya akan lebih rendah daripada di rubel.  Pasar Rusia secara absolut pada grafik lebih menarik, tetapi ada lebih banyak risiko di dalamnya.  Esensi dari tes tidak berubah dari ini. <br><br>  Kami mengambil data dari Alpha Advantages gratis, tempat Anda pertama kali perlu mendapatkan kunci dengan berbagi alamat email.  Instruksi singkat dalam buku catatan.  Anda dapat mengambil kutipan dari sekuritas Rusia di Finam. <br><br><h2>  Karisma Produk Struktural </h2><br>  Secara singkat, modal Anda aman, dan hasilnya lebih tinggi dari setoran bank (obligasi pemerintah).  Berikut adalah beberapa elemen dari persamaan yang hilang: <br><br><ul><li>  Selalu ada pendapatan pada setoran bank, tetapi ada risiko bermain nol; </li><li>  Anda akan mendapat untung, tetapi broker mengklaim potongan kue yang signifikan; </li><li>  Ada batasan penggunaan uang yang diinvestasikan; </li><li>  Pialang secara praktis tidak menanggung risiko apa pun, dan hanya berpartisipasi dalam keuntungan. </li></ul><br><h2>  Strategi </h2><br>  Pertimbangkan strategi paling sederhana: <br><br><ul><li>  Kami membeli 90% dari obligasi jangka pendek modal; </li><li>  Untuk sisanya, kami membeli aset berisiko tinggi; </li><li>  Kami berhenti di 10% dari harga pada awal periode. </li></ul><br>  Inti dari strategi: obligasi treasuri memberikan 1-3% per tahun, praktis tidak termasuk penarikan (jika ada hasil).  10% dari penarikan aset yang dibeli dengan modal 10% akan menjadi risiko yang akan ditanggung oleh obligasi.  Selama periode pasar bullish, beberapa saham dapat tumbuh beberapa kali, yang akan memberi kita kebahagiaan. <br><br>  Untuk mengulangi strategi ini secara manual, Anda harus melakukan langkah-langkah berikut: <br><br><ul><li>  Beli obligasi.  Misalnya dalam bentuk ETF. </li><li>  Beli saham. </li><li>  Lakukan stop order. </li></ul><br><h2>  Cara menguji </h2><br>  Saya akan menjelaskan secara singkat beberapa solusi dengan kutipan kode yang membuat pengujian cukup fleksibel dan nyaman. <br><br><h3>  Jadwalkan </h3><br>  Anda dapat menyeimbangkan kembali dalam periode berikut: minggu, bulan, tahun.  Dan juga pada hari apa pun dalam periode: yang pertama, ke-N, terakhir.  Kelas `Schedule ()` bertanggung jawab untuk ini: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#         df = pd.DataFrame([], index=pd.date_range(start, end, freq='B')) # ... #      ,   df = df[df.index.isin(dates)].copy() # ... #    # ... elif freq == 'week': groupby = ['year', 'week'] elif freq == 'month': groupby = ['year', 'month'] elif freq == 'year': groupby = ['year'] #      grouped = df.groupby(groupby) for idx, grp in grouped: if len(grp) &gt;= abs(day): df.loc[grp.iloc[day].name, 'allow'] = True</span></span></code> </pre> <br><h3>  Siklus data </h3><br><pre> <code class="python hljs">StructuredProductMill().run()</code> </pre> <br>  Seperti yang dijelaskan dalam salah satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> , kami hanya dapat mem-bypass tanggal penyeimbangan dalam satu siklus dan melewati semua hari lainnya.  Tapi kemudian kita kehilangan statistik perubahan aset dalam periode itu, kita tidak akan melihat profitabilitas dan penarikan untuk setiap hari.  Skrip ini, yang merugikan kecepatan, berputar setiap hari, yang memungkinkan Anda untuk melihat nilai pasar dari posisi terbuka dan menerapkan pemeriksaan stop order. <br><br><h3>  Penyeimbangan ulang </h3><br><pre> <code class="python hljs">StructuredProductMill().rebalance()</code> </pre> <br>  Di sini, aset yang dapat dibuka dialokasikan ke modal yang tersedia.  Setelah membandingkan perhitungan dengan posisi terbuka, transaksi dilakukan untuk angka yang diperlukan: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  :       balance = self._cash + self.position_balance(day) #         df = day.merge(self._positions[['quantity']], how='left', left_index=True, right_index=True) # ... #              day.loc[is_allow, 'size_order'] = day[is_allow]['size'] / day[is_allow]['size'].sum() #        day['position_to'] = (balance * day['size_order']) // day['open'] #     day['order'] = day['position_to'] - day['position'] # ... #   for symbol, row in day[fltr].iterrows(): self.trade(row['dt'], symbol, row.order, row.open, 'O' if row.order &gt; 0 else 'C')</span></span></code> </pre><br><h3>  Penawaran </h3><br><pre> <code class="python hljs">StructuredProductMill().trade()</code> </pre> <br>  Dan di sini, untuk kecepatan, Anda dapat mengorbankan detail dan hanya mengontrol perubahan dalam profitabilitas setiap posisi.  Tetapi skrip memperhitungkan komisi akun dan nilai aset, dan juga menyimpan riwayat transaksi, yang memungkinkan Anda untuk menghitung transaksi dan menjalankan stop order pada setiap hari pengujian.  Metode ini memperbarui posisi dan ukuran cache gratis. <br><br><h3>  Luncurkan </h3><br>  Untuk menjalankan, Anda harus menentukan satu set aset dengan saham dan parameter pengujian.  Kami akan menguji produk struktural untuk tahun kalender: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   portfolio = {'MINT': 0.9, 'AAPL': 0.1,} #   SYMBOLS = list(portfolio.keys()) df = prices(SYMBOLS) params = { 'benchmark': 'SPY', #     'balance': 100_000, #   'portfolio': portfolio, 'rebalance_day': -1, #      'freq': 'year', #    'stop_loss': 0.1, # -  10% #          'reset_position_prices': True, 'allow_method': allow_default, 'start': pd.to_datetime('2011-01-01'), #   } #  ,      pm = StructuredProductMill(params, prices=prices(SYMBOLS + [params['benchmark']]), show_progress=True) pm.check_params().prepare() #   pm.run() #   pm.print_results(); #   pm.charts()</span></span></code> </pre><br>  Di bagian bawah notebook ada grafik dengan profitabilitas dan drawdown pada tanggal rebalance (pada akhir tahun), yang menegaskan drawdown modal yang sangat rendah pada saat laporan dan terus meningkatkan profitabilitas.  Meskipun profitabilitas ini turun ke indeks luas perusahaan Amerika S&amp;P 500. <br><br><h2>  Hasil </h2><br>  Tes tersebut melibatkan instrumen Amerika yang diperdagangkan bebas sejak 2011: <br><br><ul><li>  BIL - ETF untuk obligasi jangka pendek dengan imbal hasil 2% per tahun pada saat penulisan.  Ingatlah bahwa pada periode 2009 hingga 2017, harga mendekati nol.  Alternatifnya adalah dengan menggunakan MINT (dana untuk instrumen pendapatan tetap jangka pendek). </li><li>  AAPL - Stok Apple. </li><li>  MSFT - Microsoft stock. </li><li>  TSLA - Tesla membagikan. </li></ul><br><h3>  Aapl </h3><br>  Desain ini menghasilkan pendapatan 8 tahun 24% (rata-rata tahunan 2,6%) dengan drawdown antara -6%.  Tetapi pada pergantian tahun, penarikannya adalah sekitar nol.  Berhenti tidak tersentuh, pasar dengan 180% dari pendapatan kehilangan pesanan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3b/02c/db5/f3b02cdb51ee00dee623838a20da0ed5.png" alt="Profitabilitas dan drawdown untuk setiap hari"><br><br>  Profitabilitas dan drawdown untuk setiap hari (profitabilitas di sebelah kiri, drawdown di sebelah kanan). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf3/606/497/cf36064972efc96716ca5ce9b0408a9e.png" alt="Profitabilitas dan drawdown pada pergantian tahun"><br><br>  Profitabilitas dan drawdown pada persimpangan tahun (profitabilitas di sebelah kiri, drawdown di sebelah kanan). <br><br><h3>  Msft </h3><br>  Desain ini menghasilkan pendapatan 8 tahun sebesar 26% (rata-rata tahunan 2,75%) dengan drawdown antar -2%.  Di persimpangan tahun, tidak ada drawdown. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f8/3cd/506/2f83cd5067fa388a85102ae73c8ac3f4.png" alt="Profitabilitas dan drawdown untuk setiap hari"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a6/c36/4d5/4a6c364d5fd322ff88688a8a2e63ed14.png" alt="Profitabilitas dan drawdown pada pergantian tahun"><br><br><h3>  TSLA </h3><br>  Desain ini menghasilkan pendapatan 8 tahun sebesar 45% (rata-rata tahunan 4,6%) dengan drawdown antara rebalances sebanyak -15%.  Namun semua ini pada tahun 2013, ketika Tesla tumbuh hampir 5 kali lipat.  Pada pergantian tahun, drawdown -2%.  Penumpang paling sibuk, tetapi juga menguntungkan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1c/e12/0c0/f1ce120c0f705d3346be336bc7b48cc8.png" alt="Profitabilitas dan drawdown untuk setiap hari"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f10/0e4/f6a/f100e4f6acf5154e8999ffe3a5ca6a4c.png" alt="Profitabilitas dan drawdown pada pergantian tahun"><br><br><h2>  Kesimpulan </h2><br>  Notepad memungkinkan Anda menguji komposisi portofolio apa pun.  Ini bisa berupa dana yang hina atau beberapa perusahaan.  Meski umumnya tanpa aset pelindung. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori GitHub</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461583/">https://habr.com/ru/post/id461583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461569/index.html">Catatan untuk front-end: apa yang harus diperiksa sebelum pengujian</a></li>
<li><a href="../id461571/index.html">SVG dalam kehidupan nyata. Laporan Yandex</a></li>
<li><a href="../id461575/index.html">Membuat PBX berbasis cloud 3CX pada sembarang hosting yang kompatibel dengan Openstack</a></li>
<li><a href="../id461577/index.html">Bagian 5/2 Bldg. 1: Persimpangan RocketChip Avenue dan jalur instrumentasi yang licin</a></li>
<li><a href="../id461579/index.html">WebMoney memperkenalkan dompet WMP baru dan mengubah aturan permainan</a></li>
<li><a href="../id461587/index.html">Lokalisasi aplikasi dalam 10 langkah</a></li>
<li><a href="../id461589/index.html">Tic Tac Toe: Siklus Konten</a></li>
<li><a href="../id461593/index.html">API di F #. Modul Aplikasi Berbasis Peran Akses</a></li>
<li><a href="../id461595/index.html">Dari teori ke praktek: bagaimana mahasiswa fakultas fotonics dan optoinformatika belajar dan bekerja</a></li>
<li><a href="../id461601/index.html">Apa yang harus diketahui oleh pendiri non-teknis tentang pengembangan perangkat lunak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>