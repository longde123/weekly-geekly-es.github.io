<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòª ‚ÜïÔ∏è üïú Utilisation des fuseaux horaires en JavaScript üïî üöï üë≥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R√©cemment, je travaillais sur la t√¢che d'ajouter des fuseaux horaires √† la biblioth√®que de calendriers JS maintenue par mon √©quipe. J'√©tais bien consc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation des fuseaux horaires en JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/438286/"><img src="https://habrastorage.org/getpro/habr/post_images/540/5d5/588/5405d55887909032bc8016afe3f65796.jpg"><br><br>  R√©cemment, je travaillais sur la t√¢che d'ajouter des fuseaux horaires √† la biblioth√®que de calendriers JS maintenue par mon √©quipe.  J'√©tais bien conscient de la prise en charge inutile des fuseaux horaires dans JavaScript, mais j'esp√©rais que l'abstrait des objets de donn√©es existants permettrait de r√©soudre facilement la plupart des difficult√©s. <br><br>  Cependant, mes r√™ves se sont transform√©s en poussi√®re.  Quand je me suis plong√© dans la t√¢che, j'ai r√©alis√© qu'il est vraiment difficile de travailler avec des fuseaux horaires dans cette langue.  Il √©tait extr√™mement difficile de mettre en ≈ìuvre quelque chose de plus compliqu√© que de simplement formater l'affichage de l'heure et de calculer la date √† l'aide d'op√©rations complexes (fonctions de calendrier).  J'ai acquis une exp√©rience pr√©cieuse dans la r√©solution de ce probl√®me, ce qui a entra√Æn√© de nouvelles difficult√©s. <br><br>  Dans cet article, je veux discuter de ce que j'ai rencontr√© et comment cela a √©t√© r√©solu.  Pendant que j'√©crivais le texte, j'ai r√©alis√© que la raison de toutes les difficult√©s √©tait ma mauvaise compr√©hension du sujet des fuseaux horaires.  √Ä la lumi√®re de cette prise de conscience, je propose d'abord de parler en d√©tail de la d√©finition et des normes, puis de passer ensuite √† JavaScript. <br><a name="habracut"></a><br><h2>  Qu'est-ce qu'un fuseau horaire? </h2><br>  Un fuseau horaire est une r√©gion g√©ographique qui utilise la m√™me heure locale d√©finie par le gouvernement.  De nombreux pays sont enti√®rement li√©s √† des fuseaux horaires sp√©cifiques, et sur les territoires de grands √âtats, comme la Russie et les √âtats-Unis, plusieurs fuseaux horaires sont utilis√©s.  Il est curieux que, bien que la Chine soit √©galement suffisamment grande, elle n'accepte qu'un seul fuseau horaire.  Parfois, cela conduit √† des situations √©tranges lorsque le lever du soleil dans la partie ouest du pays commence vers 10 heures du matin. <br><br><h2>  GMT, UTC et Offset </h2><br><h4>  GMT </h4><br>  L'heure locale sud-cor√©enne est d√©sign√©e comme <code>GMT+09:00</code> .  GMT signifie Greenwich Mean Time (GMT), c'est-√†-dire cette fois sur l'horloge de l'Observatoire royal de Greenwich, au Royaume-Uni.  Il est situ√© sur le m√©ridien principal.  Le signal radio du syst√®me GMT a commenc√© √† √©mettre le 5 f√©vrier 1924 et il est devenu lui-m√™me une norme mondiale le 1er janvier 1972. <br><br><h4>  UTC </h4><br>  Beaucoup de gens pensent que GMT et UTC sont la m√™me chose, les utilisant souvent comme syst√®mes interchangeables.  Mais c'est une erreur.  Le syst√®me UTC est apparu en 1972 comme un moyen de compenser l'effet de la rotation de la Terre.  Le syst√®me est bas√© sur le temps atomique international, calcul√© par la fr√©quence des vibrations √©lectromagn√©tiques des atomes de c√©sium.  En d'autres termes, l'UTC est un remplacement plus pr√©cis du GMT.  Bien que la diff√©rence en temps r√©el entre les deux syst√®mes soit tr√®s faible, il est pr√©f√©rable pour les d√©veloppeurs de logiciels de s'appuyer sur l'UTC. <br><br>  Un fait int√©ressant: lorsque l'UTC √©tait encore en cours de d√©veloppement, il a √©t√© sugg√©r√© dans les pays anglophones de l'appeler CUT (temps universel coordonn√©), et dans les pays francophones - TUC (Temps Universal Coordonn).  Cependant, aucun des camps n'a pu gagner, et ils ont accept√© d'appeler le syst√®me UTC, √©pelant les deux options propos√©es (C, T et U). <br><br><h4>  D√©calage </h4><br>  <code>+09:00</code> en <code>UTC+09:00</code> signifie que l'heure locale a 9 heures d'avance sur l'heure UTC standard.  Autrement dit, quand il est 21 heures en Cor√©e du Sud, il est midi dans la r√©gion UTC.  La diff√©rence entre l'heure UTC standard et l'heure locale est appel√©e ¬´d√©calage¬ª, qui s'exprime en valeurs positives ou n√©gatives: <code>+09:00</code> , <code>-03:00</code> , etc. <br><br>  Dans de nombreux pays, il est habituel de donner √† vos fuseaux horaires des noms uniques.  Par exemple, le fuseau horaire de la Cor√©e du Sud est appel√© KST (Korea Standard Time), son d√©calage est exprim√© comme <code>KST = UTC+09:00</code> .  Cependant, le d√©calage <code>+09:00</code> utilis√© non seulement par la Cor√©e du Sud, mais aussi par le Japon, l'Indon√©sie et de nombreux autres pays, par cons√©quent, la relation entre les d√©calages et les courroies est exprim√©e non pas comme 1: 1, mais comme 1: N.  Une liste des pays avec un d√©calage de <code>+09:00</code> est pr√©sent√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Certains d√©calages fonctionnent non seulement pendant des heures.  Par exemple, en Cor√©e du Nord, l'heure standard est <code>+08:30</code> , tandis qu'en Australie dans certaines r√©gions, <code>+8:45</code> , <code>+09:30</code> et <code>+10:30</code> . <br><br>  Une liste compl√®te des d√©calages UTC est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  Fuseau horaire! == d√©calage? </h2><br>  Comme je l'ai dit, nous utilisons des noms de fuseaux horaires (KST, JST) avec des d√©calages comme interchangeables, sans les distinguer.  Mais il sera erron√© de consid√©rer √† la fois le temps et le d√©placement d'une r√©gion particuli√®re.  Il y a plusieurs raisons: <br><br><h4>  Heure d'√©t√© (DST) </h4><br>  Dans certains pays, ce terme est inconnu, mais dans de nombreux √âtats, l'heure d'√©t√© est pratiqu√©e, principalement en Europe.  Pour cela, le terme international DST est adopt√© - Daylight Saving Time.  Cela signifie d√©placer l'horloge en √©t√© pendant une heure avant l'heure standard relative. <br><br>  Par exemple, la Californie utilise PST (Pacific Standard Time) en hiver et PDT (Pacific Daylight Time, <code>UTC-07:00</code> ) en hiver.  Aux √âtats-Unis et au Canada, le terme heure du Pacifique (PT, heure du Pacifique) est utilis√© pour les r√©gions qui utilisent deux fuseaux horaires. <br><br>  Quand commence et se termine l'heure d'√©t√©?  Tout d√©pend du pays.  Par exemple, aux √âtats-Unis et au Canada jusqu'en 2006, l'heure d'√©t√© √©tait utilis√©e de 2 heures du matin le premier dimanche d'avril √† 12 heures le dernier dimanche d'octobre.  Et √† partir de 2007, l'heure d'√©t√© a commenc√© √† compter de 2 nuits le deuxi√®me dimanche de mars √† 2 nuits le premier dimanche de novembre.  En Europe, diff√©rents pays pratiquent l'utilisation progressive de l'heure d'√©t√© en fonction de chaque fuseau horaire. <br><br><h4>  Les fuseaux horaires changent-ils? </h4><br>  Chaque pays d√©termine lui-m√™me les fuseaux horaires √† utiliser, de sorte que l'heure locale peut changer pour des raisons politiques et / ou √©conomiques.  Aux √âtats-Unis, par exemple, les fronti√®res de l'heure d'√©t√© ont √©t√© modifi√©es en 2007 parce que George W. Bush a lanc√© la politique √©nerg√©tique en 2005.  L'√âgypte et la Russie passaient √† l'heure d'√©t√©, mais l'ont abandonn√©e depuis 2011. <br><br>  Dans certains cas, le gouvernement peut modifier non seulement l'heure d'√©t√©, mais √©galement l'heure standard.  Par exemple, les Samoa ant√©rieures utilisaient la compensation <code>UTC-10:00</code> , mais elles sont ensuite pass√©es √† <code>UTC+14:00</code> pour r√©duire les pertes commerciales en raison du d√©calage horaire avec l'Australie et la Nouvelle-Z√©lande.  Cette d√©cision a entra√Æn√© la mort du pays toute une journ√©e - le 30 d√©cembre 2011, comme l'ont rapport√© les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">journaux du monde entier</a> . <br><br>  Aux Pays-Bas, un d√©calage de <code>+0:19:32.13</code> utilis√© depuis 1909, depuis 1937 le pays est pass√© √† <code>+00:20</code> et de 1940 √† <code>+01:00</code> , depuis lors, l'heure principale n'a pas chang√©. <br><br><h2>  Fuseau horaire 1: d√©calage N </h2><br>  Ainsi, le fuseau horaire peut avoir un ou plusieurs d√©calages.  Le d√©lai accept√© comme standard d√©pend des raisons politiques et / ou √©conomiques actuelles dans un pays particulier. <br><br>  Dans la vie de tous les jours, cela ne pose pas de probl√®me tant que vous n'essayez pas de syst√©matiser ces donn√©es sur la base de certaines r√®gles.  Imaginez que vous souhaitez d√©finir l'heure standard sur votre smartphone en utilisant une sorte de biais.  Si vous vivez dans une r√©gion o√π l'heure d'√©t√© est pratiqu√©e, votre smartphone devrait savoir exactement quand aller et venir.  Autrement dit, vous devez √©tablir la relation entre l'heure standard et l'heure d'√©t√© dans un fuseau horaire (par exemple, heure du Pacifique). <br><br>  Mais cela ne peut pas √™tre fait avec quelques r√®gles simples.  Par exemple, aux √âtats-Unis en 2007, le d√©but et la fin de l'heure d'√©t√© ont √©t√© modifi√©s, le 31 mai 2006, il √©tait cens√© utiliser l'heure d'√©t√© ( <code>-07:00</code> ) comme heure standard, et le 31 mars 2007 - PST ( <code>-08:00</code> ).  Il s'av√®re que pour faire r√©f√©rence √† un fuseau horaire sp√©cifique, vous devez conna√Ætre l'historique complet du changement de fuseau horaire ou la date de changement des r√®gles d'heure d'√©t√©. <br><br>  Vous pouvez dire: "Le fuseau horaire de New York est PST ( <code>-08:00</code> )."  Cependant, il doit √™tre clarifi√©: "Le fuseau horaire actuel √† New York est PST."  De plus, pour une impl√©mentation pr√©cise du syst√®me, vous devez utiliser une expression encore plus pr√©cise.  Oubliez le terme ¬´fuseau horaire¬ª.  Vous devez dire: "Maintenant √† New York, l'heure d'√©t√© est utilis√©e comme heure standard." <br><br>  Alors, que devons-nous utiliser au lieu du d√©calage pour d√©terminer le fuseau horaire d'une r√©gion particuli√®re?  Le nom de cette r√©gion.  Plus pr√©cis√©ment, vous devez regrouper dans un seul fuseau horaire les r√©gions dans lesquelles elles passent √©galement √† l'heure d'√©t√© et √† l'heure standard.  Vous pouvez utiliser des noms comme PT (Pacific Time), mais ils combinent uniquement l'heure standard actuelle et l'heure d'√©t√©, et ne prennent pas n√©cessairement en compte tous les changements historiques.  De plus, comme PT n'est en circulation qu'aux √âtats-Unis et au Canada, vous devez vous fier aux normes √©tablies d'organisations r√©put√©es pour garantir l'universalit√© de votre logiciel. <br><br><h2>  Base de donn√©es des fuseaux horaires IANA </h2><br>  Je dois admettre que les informations sur les fuseaux horaires sont plut√¥t une base de donn√©es, pas un ensemble de r√®gles, car ces informations doivent contenir toutes les modifications historiques pertinentes.  Il existe plusieurs bases de donn√©es standard con√ßues pour r√©soudre les t√¢ches li√©es aux fuseaux horaires.  Le plus souvent, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base de donn√©es de fuseaux horaires IANA est utilis√©e</a> , et elle est g√©n√©ralement appel√©e base de donn√©es tz (ou tzdata).  La base de donn√©es contient des donn√©es historiques sur les changements d'heure standard et d'heure d'√©t√© dans le monde.  De plus, il est organis√© de sorte qu'il est possible de v√©rifier toutes les donn√©es historiques et de s'assurer que l'heure est exacte √† partir de l'heure Unix ( <code>1970.01/01 00:00:00</code> ).  Bien que vous puissiez trouver des informations dans la base de donn√©es avant 1970, leur exactitude n'est pas garantie. <br><br>  La convention de d√©nomination utilise la r√®gle r√©gion / lieu.  Le nom du continent ou de l'oc√©an (Asie, Am√©rique, oc√©an Pacifique) est g√©n√©ralement utilis√© comme r√©gion, et les noms des principales villes (S√©oul, New York) comme lieu.  La raison en est que les villes durent g√©n√©ralement plus longtemps que les pays.  Par exemple, le fuseau horaire de la Cor√©e du Sud est <code>Asia/Seoul</code> et <code>Asia/Tokyo</code> .  Bien que les deux pays utilisent le m√™me d√©calage <code>UTC+09:00</code> , leur heure locale a chang√© diff√©remment, ils ont donc √©t√© divis√©s en diff√©rents fuseaux horaires. <br><br>  La base IANA est g√©r√©e par de nombreuses communaut√©s de d√©veloppeurs et d'historiens.  Des donn√©es historiques fra√Æchement trouv√©es y sont imm√©diatement saisies et les politiques actuelles sont mises √† jour, de sorte que la base de donn√©es peut aujourd'hui √™tre consid√©r√©e comme la source la plus fiable.  De plus, il est utilis√© sous le capot par de nombreux syst√®mes Unix, y compris Linux et MacOS, ainsi que par un certain nombre de langages de programmation populaires, dont Java et PHP. <br><br>  Veuillez noter que Windows utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la base de donn√©es Microsoft</a> .  Cependant, il est inexact en termes de donn√©es historiques et n'est pris en charge que par Microsoft lui-m√™me.  Par cons√©quent, la base est moins fiable que la base IANA. <br><br><h2>  JavaScript et IANA </h2><br>  La fonctionnalit√© li√©e au fuseau horaire est impl√©ment√©e en JavaScript √† l'improviste.  Par d√©faut, la langue utilise la ceinture de r√©gion actuelle (plus pr√©cis√©ment, la ceinture s√©lectionn√©e lors de l'installation du syst√®me d'exploitation), et il n'y a aucun moyen de la changer.  De plus, m√™me les sp√©cifications de la norme de base de donn√©es en JavaScript sont vagues, et vous le comprendrez vous-m√™me si vous d√©cidez de traiter la sp√©cification pour ES2015.  √Ä propos du fuseau horaire local et de la disponibilit√© de l'heure d'√©t√©, il n'y a que quelques d√©clarations vagues.  Par exemple, l'heure d'√©t√© est d√©finie comme suit: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ECMAScript 2015 - R√©glage de l'heure d'√©t√©</a> . <br><br><blockquote>  Il s'agit d'un algorithme d√©pendant de l'impl√©mentation qui utilise les meilleures informations de fuseau horaire disponibles pour d√©terminer le param√®tre d'heure d'√©t√© locale DaylightSavingTA (t), qui est calcul√© en millisecondes.  Une impl√©mentation ECMAScript devrait vous aider √† mieux d√©terminer votre param√®tre d'heure d'√©t√© local. </blockquote><br>  On dirait qu'ils disent juste: "Mec, essayez de faire en sorte que cela fonctionne."  Entre autres, vous devez r√©soudre le probl√®me de compatibilit√© avec diff√©rents navigateurs.  Vous dites: "Quel g√¢chis!" Et puis lisez la ligne suivante: <br><br><blockquote>  Remarque: nous vous recommandons d'utiliser les informations de la base de donn√©es de fuseaux horaires IANA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://www.iana.org/time-zones/</a> dans vos impl√©mentations. </blockquote><br>  Oui  Les sp√©cifications de l'ECMA vous donnent le ballon avec une recommandation sans pr√©tention d'utiliser la base de donn√©es IANA, car JavaScript n'a pas de base de donn√©es standard sp√©ciale.  Par cons√©quent, diff√©rents navigateurs utilisent leurs propres op√©rations avec des fuseaux horaires, qui sont souvent incompatibles entre eux, pour calculer l'heure.  Plus tard, dans ECMA, pour l'API internationale, l'option d'utiliser les donn√©es IANA au format ECMA-402 <code>Intl.DateTimeFormat</code> a √©t√© <code>Intl.DateTimeFormat</code> .  Mais cette option est beaucoup moins fiable que les analogues d'autres langages de programmation. <br><br><h2>  Fuseau horaire dans un environnement serveur-client </h2><br>  Prenons un sc√©nario simple: nous devons d√©terminer le fuseau horaire.  Supposons que nous cr√©ons un calendrier qui traitera les informations de temps.  Lorsqu'un utilisateur dans l'environnement client entre une date et une heure dans la fen√™tre d'enregistrement, la date est transf√©r√©e au serveur et stock√©e dans la base de donn√©es.  Le client re√ßoit alors du serveur la date enregistr√©e dans le planning pour affichage sur l'√©cran. <br><br>  Ici, vous devez d√©cider quelque chose.  Que faire si certains des clients acc√©dant au serveur sont dans des fuseaux horaires diff√©rents?  L'√©v√©nement dans le calendrier, qui a √©t√© enregistr√© √† S√©oul le 10 mars 2017 √† 23h30, √† New York devrait √™tre affich√© comme le 10 mars 2017 √† 9h30.  Pour que le serveur serve des clients de diff√©rents fuseaux horaires, la planification qui y est stock√©e doit contenir des valeurs absolues qui ne d√©pendent pas de la zone.  Chaque serveur a sa propre fa√ßon de stocker ces valeurs, cette question d√©passe le cadre de l'article, car tout d√©pend d'un serveur ou d'une base de donn√©es sp√©cifique.  En g√©n√©ral, la date et l'heure transmises du client au serveur doivent √™tre pr√©sent√©es soit sous forme de valeurs bas√©es sur un seul d√©calage (g√©n√©ralement UTC), soit sous forme de valeurs contenant des informations sur le fuseau horaire de l'environnement client. <br><br>  En r√®gle g√©n√©rale, ces donn√©es sont transmises au format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unix</a> au format UTC ou selon la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">norme ISO-8601</a> avec des informations de d√©calage.  Si dans notre exemple nous convertissons S√©oul 21.30 le 10 mars 2017 en heure Unix, alors nous obtenons la valeur enti√®re <code>1489113000</code> .  Et au format ISO-8601, la valeur de cha√Æne est <code>2017‚Äì03‚Äì10T11:30:00+09:00</code> . <br><br>  Si vous utilisez JavaScript dans un environnement de navigateur, vous devez convertir la valeur entr√©e comme d√©crit ci-dessus, puis la reconvertir pour qu'elle corresponde au fuseau horaire de l'utilisateur.  Il est n√©cessaire de r√©soudre ces deux probl√®mes.  Du point de vue du langage de programmation, la premi√®re op√©ration est appel√©e "analyse", et la seconde est "mise en forme".  Voyons maintenant comment cela se fait en JavaScript. <br><br>  M√™me lorsque vous travaillez avec JS dans un environnement de serveur utilisant Node.js, vous devrez peut-√™tre analyser les donn√©es re√ßues du client.  Mais comme les fuseaux horaires des serveurs et des bases de donn√©es sont g√©n√©ralement synchronis√©s et que le formatage est attribu√© aux clients, dans un environnement de navigateur, vous devez d√©cider de plusieurs facteurs.  Plus loin, je vais expliquer en relation avec l'environnement du navigateur. <br><br><h2>  Objet de date JavaScript </h2><br>  Les t√¢ches impliquant un travail avec une heure ou une heure donn√©e sont r√©solues √† l'aide de l'objet <code>Date</code> .  Il s'agit d'un objet natif d√©fini dans ECMAScript, comme <code>Array</code> ou <code>Function</code> .  Autrement dit, il est, pour la plupart, impl√©ment√© en utilisant du code natif comme C ++.  L'API est bien d√©crite dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation MDN</a> .  La classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">java.util.Date</a> de Java a eu un grand impact sur l'objet, elle a donc h√©rit√© de certaines propri√©t√©s ind√©sirables, telles que les caract√©ristiques des donn√©es mutables et un mois √† partir de z√©ro. <br><br>  Sous le capot, un objet <code>Date</code> JavaScript fonctionne avec le temps en utilisant des valeurs absolues au format Unix-time.  Mais les constructeurs et les m√©thodes comme les fonctions <code>parse()</code> , <code>getHour()</code> , <code>setHour()</code> et d'autres sont affect√©s par le fuseau horaire du client (plus pr√©cis√©ment, la ceinture sp√©cifi√©e dans le syst√®me d'exploitation dans lequel le navigateur s'ex√©cute).  Donc, si vous cr√©ez un objet <code>Date</code> directement √† l'aide de donn√©es saisies par l'utilisateur, le fuseau horaire local du client sera refl√©t√© dans ces donn√©es. <br><br>  Comme je l'ai mentionn√©, JavaScript ne fournit aucun moyen de modifier arbitrairement le fuseau horaire.  Par cons√©quent, nous supposons que nous pouvons utiliser directement la valeur de fuseau horaire sp√©cifi√©e dans le navigateur. <br><br><h2>  Cr√©ation d'un objet de date √† l'aide d'une entr√©e utilisateur </h2><br>  Revenons au premier exemple.  Supposons que l'utilisateur ait entr√© l'heure de S√©oul sur son appareil √† 11h30 le 11 mars 2017. Ces donn√©es sont enregistr√©es sous cinq chiffres: 2017, 2, 11, 11 et 30 - ann√©e, mois, jour, heures et minutes, respectivement (puisque le mois commence √† 0, il la valeur doit √™tre 3‚Äì1 = 2).  En utilisant le constructeur, vous pouvez facilement cr√©er un objet <code>Date</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); d1.toString(); <span class="hljs-comment"><span class="hljs-comment">// Sat Mar 11 2017 11:30:00 GMT+0900 (KST)</span></span></code> </pre> <br>  Si vous regardez la valeur retourn√©e par <code>d1.toString()</code> , vous verrez que la valeur absolue de l'objet cr√©√© est 11h00 le 11 mars 2017, elle a √©t√© calcul√©e en utilisant le m√©lange <code>+09:00</code> (KST). <br><br>  Vous pouvez utiliser des donn√©es de cha√Æne dans le constructeur.  Si vous les appliquez √† <code>Date</code> , l'objet appelle en interne <code>Date.parse()</code> et <code>Date.parse()</code> valeur correcte.  Cette fonction prend en charge les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cifications RFC2888</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ISO-8601</a> .  Mais la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation MDN pour Date.parse ()</a> indique que la valeur renvoy√©e par cette m√©thode d√©pend du navigateur et que le format du type de cha√Æne peut affecter la valeur finale exacte.  Par cons√©quent, il est pr√©f√©rable de ne pas utiliser cette m√©thode.  Par exemple, dans Safari et Internet Explorer, une valeur de cha√Æne comme <code>2015‚Äì10‚Äì12 12:00:00</code> renvoie <code>NaN</code> , tandis que dans Chrome et Firefox, elle renvoie le fuseau horaire local.  Dans certaines situations, une valeur bas√©e sur UTC est renvoy√©e. <br><br><h2>  Cr√©ation d'un objet de date √† l'aide des donn√©es du serveur </h2><br>  Supposons que vous souhaitiez recevoir des donn√©es d'un serveur.  S'ils sont sous la forme d'une heure num√©rique Unix, vous pouvez simplement utiliser le constructeur pour cr√©er un objet <code>Date</code> .  Je n'ai pas encore mentionn√© que lorsque le constructeur <code>Date</code> re√ßoit une seule valeur en tant que param√®tre unique, il calcule la valeur de temps Unix en millisecondes (remarque: JS traite le temps Unix en millisecondes. Cela signifie que la deuxi√®me valeur doit √™tre multipli√©e par 1000).  Lors de l'ex√©cution du code suivant, nous obtenons la m√™me valeur que dans l'exemple pr√©c√©dent: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span>); d1.toString(); <span class="hljs-comment"><span class="hljs-comment">// Sat Mar 11 2017 11:30:00 GMT+0900 (KST)</span></span></code> </pre> <br>  Et si, au lieu de l'heure Unix, utilisez le type de cha√Æne ISO-8601?  Comme je l'ai expliqu√© ci-dessus, la m√©thode <code>Date.parse()</code> devient alors peu fiable et il vaut mieux ne pas l'utiliser.  Cependant, √† partir d'ECMAScript 5, vous pouvez utiliser des constructions de cha√Ænes au format ISO-8601 dans le constructeur <code>Date</code> dans Internet Explorer 9.0 et sup√©rieur. <br><br>  Si vous n'utilisez pas le dernier navigateur, assurez-vous que le <code>Z</code> √† la fin des valeurs.  Sans cela, votre ancien navigateur peut interpr√©ter la valeur en fonction de l'heure locale et non de l'UTC.  Voici un exemple d'utilisation dans Internet Explorer 10: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-string"><span class="hljs-string">'2017-03-11T11:30:00'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-string"><span class="hljs-string">'2017-03-11T11:30:00Z'</span></span>); d1.toString(); <span class="hljs-comment"><span class="hljs-comment">// "Sat Mar 11 11:30:00 UTC+0900 2017" d2.toString(); // "Sat Mar 11 20:30:00 UTC+0900 2017"</span></span></code> </pre> <br>  Selon la sp√©cification, dans les deux cas, la m√™me valeur doit √™tre obtenue.  Mais ils sont diff√©rents.  Dans un navigateur ult√©rieur, les valeurs seront les m√™mes.  Pour √©viter ce probl√®me, ajoutez toujours <code>Z</code> √† la fin de la ligne si les informations de fuseau horaire ne sont pas disponibles. <br><br><h2>  Cr√©ation d'une date √† transmettre au serveur </h2><br>  Vous pouvez maintenant utiliser la date pr√©c√©demment cr√©√©e, r√©cup√©rer ou ajouter librement l'heure en fonction des fuseaux horaires locaux.  Seulement √† la fin du traitement, n'oubliez pas de convertir les donn√©es au format pr√©c√©dent avant de les renvoyer au serveur. <br><br>  S'il s'agit de l'heure Unix, vous pouvez utiliser la m√©thode <code>getTime()</code> (n'oubliez pas les millisecondes). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); d1.getTime(); <span class="hljs-comment"><span class="hljs-comment">// 1489199400000</span></span></code> </pre> <br>  Qu'en est-il d'une valeur de cha√Æne au format ISO-8601?  Comme je l'ai dit, Internet Explorer 9.0 et sup√©rieur prend en charge ECMAScript 5 et les versions ult√©rieures prennent en charge ISO-8601.  Par cons√©quent, en utilisant les <code>toISOString()</code> ou <code>toJSON()</code> , vous pouvez cr√©er une cha√Æne en ISO-8601 ( <code>toJSON()</code> peut √™tre utilis√© pour les appels r√©cursifs avec <code>JSON.stringify()</code> et autres).  Les deux m√©thodes donnent le m√™me r√©sultat, sauf lors du traitement de donn√©es non valides: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); d1.toISOString(); <span class="hljs-comment"><span class="hljs-comment">// "2017-03-11T02:30:00.000Z" d1.toJSON(); // "2017-03-11T02:30:00.000Z" const d2 = new Date('Hello'); d2.toISOString(); // Error: Invalid Date d2.toJSON(); // null</span></span></code> </pre> <br>  Vous pouvez utiliser les <code>toGMTString()</code> ou <code>toUTCString()</code> pour cr√©er une cha√Æne UTC.  Cela se traduira par une valeur conforme √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RFC-1123</a> . <br><br>  L'objet <code>Date</code> inclut <code>toString()</code> , <code>toLocaleString()</code> et leurs m√©thodes d'extension.  Mais ils sont peu utiles, car ils sont principalement utilis√©s pour renvoyer des cha√Ænes en fonction du fuseau horaire local, et les valeurs renvoy√©es d√©pendent du navigateur et du syst√®me d'exploitation. <br><br><h2>  Changer votre fuseau horaire local </h2><br>  Comme vous pouvez le voir, il existe une sorte de prise en charge des fuseaux horaires dans JS.              ?           ?      , JS       .         ,         .   .  ,   . <br><br>      .       .     11.30 11  2017       - .     Unix-    ,  -   <code>-05:00</code> .    ,       . <br><br>       <code>getTimeZoneOffset()</code> .   API  JavaScript,        .        : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> seoul = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span>); seoul.getTimeZoneOffset(); <span class="hljs-comment"><span class="hljs-comment">// -540</span></span></code> </pre> <br>  <code>-540</code> ,     540   .    ,      ( <code>+09:00</code> ).  , ,    .          -,   <code>60 * 5 = 300</code> .   <code>840</code>       <code>Date</code> .     <code>getXX</code>       .       : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatDate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> date.getFullYear() + <span class="hljs-string"><span class="hljs-string">'/'</span></span> + (date.getMonth() + <span class="hljs-number"><span class="hljs-number">1</span></span>) + <span class="hljs-string"><span class="hljs-string">'/'</span></span> + date.getDate() + <span class="hljs-string"><span class="hljs-string">' '</span></span> + date.getHours() + <span class="hljs-string"><span class="hljs-string">':'</span></span> + date.getMinutes(); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> seoul = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ny = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span> - (<span class="hljs-number"><span class="hljs-number">840</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>)); formatDate(seoul); <span class="hljs-comment"><span class="hljs-comment">// 2017/3/11 11:30 formatDate(ny); // 2017/3/10 21:30</span></span></code> </pre> <br> <code>formatDate()</code>              -. ,    .        ,      ?  , .   ,      ‚Äî   ,     .                ( ). <br><br><h2>      </h2><br>       ,     . ,       -,      11  15 .    <code>setDate()</code>   <code>Date</code> ,    ,    . <br><br><pre> <code class="javascript hljs">ny.setDate(<span class="hljs-number"><span class="hljs-number">15</span></span>); formatDate(ny); <span class="hljs-comment"><span class="hljs-comment">// 2017/3/15 21:30</span></span></code> </pre> <br>  ,    .  ,      ?   ,       <code>getTime()</code>  <code>getISOString()</code> .     ,      . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> time = ny.getTime() + (<span class="hljs-number"><span class="hljs-number">840</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 1489631400000</span></span></code> </pre> <br>   ,      ,         .             <code>Date</code>   ?  Non.    <code>Date</code>        11-  15-,   4  ( <code>24 * 4 * 60 * 60 * 1000</code> ).      -     10-  15-,    5  ( <code>24* 5 * 60 * 60 * 1000</code> ).             . <br><br>     .     ,     .   -     12 ,   15  2017  <code>-04:00</code> ,   <code>-05:00</code> .      ,    780 ,   60  ,   . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> time = ny.getTime() + (<span class="hljs-number"><span class="hljs-number">780</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 1489627800000</span></span></code> </pre> <br>   ,        -      ,         . <br><br>  ,                .    ,    ,   ,       .       ,     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> IANA</a> . <br><br>         ,         <code>Date</code>      ,        .  ,   .         ,        .    .        JS    .     . <br><br><h2> Moment Timezone </h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moment</a> ‚Äî  JavaScript-,   .    API     ,        .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moment Timezone</a> ,     .     IANA        API,         . <br><br>           .  ,         .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br> ,  Moment Timezone: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> seoul = moment(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span>).tz(<span class="hljs-string"><span class="hljs-string">'Asia/Seoul'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ny = moment(<span class="hljs-number"><span class="hljs-number">1489199400000</span></span>).tz(<span class="hljs-string"><span class="hljs-string">'America/New_York'</span></span>); seoul.format(); <span class="hljs-comment"><span class="hljs-comment">// 2017-03-11T11:30:00+09:00 ny.format(); // 2017-03-10T21:30:00-05:00 seoul.date(15).format(); // 2017-03-15T11:30:00+09:00 ny.date(15).format(); // 2017-03-15T21:30:00-04:00</span></span></code> </pre> <br>  <code>seoul</code>  ,   <code>ny</code>   <code>-05:00</code>  <code>-04:00</code> .     <code>format()</code> ,      ISO-8601,     .       . <br><br><h2>  Conclusion </h2><br>   API  ,   JavaScript,     .          ,         API,   Internet Explorer 9  .     ,     .                  ,     <code>getTimezoneOffset()</code> .        ,     .     Moment Timezone. <br><br>     ,   ,   .      :  .   ,    ,    ,   .      ,      JavaScript    .   ,      . <br><br><h2>   </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pluralsight: Date and Time Fundamentals</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia: timezone</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia: DST</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia: Unix Time</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia: ISO-8601</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IANA timezone Database</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microsoft Daylight Saving Time &amp; Time Zone Blog</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MDN: Date API</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">java.util.Date API</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moment Timezone</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RFC-1123</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RFC2888</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438286/">https://habr.com/ru/post/fr438286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438270/index.html">Love Kubernetes chez Mail.ru Group: 14 f√©vrier</a></li>
<li><a href="../fr438272/index.html">Comment nous avons envoy√© des SMS depuis la grotte</a></li>
<li><a href="../fr438274/index.html">D√©finition de la ¬´personnalit√© toxique¬ª en informatique</a></li>
<li><a href="../fr438278/index.html">Apprendre aux enfants √† programmer</a></li>
<li><a href="../fr438280/index.html">"Supprimer" des objets dans Django</a></li>
<li><a href="../fr438288/index.html">Protection sans peur. S√©curit√© de la m√©moire dans Rust</a></li>
<li><a href="../fr438290/index.html">Post-mortem avec GGJ-2019: comment obtenir des bosses, mais toujours faire le jeu</a></li>
<li><a href="../fr438292/index.html">Automatisation d'appartement avec HomePod, Raspberry Pi et Node.js</a></li>
<li><a href="../fr438294/index.html">Recherche de streamers Twitch dans une correspondance PUBG</a></li>
<li><a href="../fr438296/index.html">OpenSceneGraph: Syst√®me de plugins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>