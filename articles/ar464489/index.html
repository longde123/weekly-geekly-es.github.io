<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‡ ğŸ›… â˜•ï¸ Buildbot ÙÙŠ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ğŸ‘¸ ğŸ·ï¸ ğŸ•š</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ù…Ù„ÙŠØ© ØªØ¬Ù…ÙŠØ¹ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø­Ø²Ù… Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ù…Ù† Ù…Ø³ØªÙˆØ¯Ø¹ Git Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙˆØ¨Ø¹Ø¯ Ø£Ù† Ø±Ø£ÙŠØª ØŒ Ù…Ù†Ø° ÙˆÙ‚Øª Ù„ÙŠØ³ Ø¨Ø¨Ø¹ÙŠØ¯ ØŒ Ù‡Ù†Ø§ Ø¹Ù„Ù‰ Habr ØŒ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† buildbot (Ø§Ù„Ø±Ø§Ø¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buildbot ÙÙŠ Ø§Ù„Ø£Ù…Ø«Ù„Ø©</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464489/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ù…Ù„ÙŠØ© ØªØ¬Ù…ÙŠØ¹ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø­Ø²Ù… Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ù…Ù† Ù…Ø³ØªÙˆØ¯Ø¹ Git Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹.  ÙˆØ¨Ø¹Ø¯ Ø£Ù† Ø±Ø£ÙŠØª ØŒ Ù…Ù†Ø° ÙˆÙ‚Øª Ù„ÙŠØ³ Ø¨Ø¨Ø¹ÙŠØ¯ ØŒ Ù‡Ù†Ø§ Ø¹Ù„Ù‰ Habr ØŒ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† buildbot (Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©) Ù‚Ø±Ø±Øª ØªØ¬Ø±Ø¨ØªÙ‡Ø§ ÙˆØ§Ù„ØªÙ‚Ø¯Ù… Ø¨Ø·Ù„Ø¨ Ù„Ø°Ù„Ùƒ. </p><br><p style=";text-align:right;direction:rtl">  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù† buildbot Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ù…ÙˆØ²Ø¹ ØŒ ÙØ³ÙŠÙƒÙˆÙ† Ù…Ù† Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ Ù„ÙƒÙ„ Ù‡Ù†Ø¯Ø³Ø© ÙˆÙ†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¶ÙŠÙ ØªØ¬Ù…ÙŠØ¹ Ù…Ù†ÙØµÙ„.  ÙÙŠ Ø­Ø§Ù„ØªÙ†Ø§ ØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø­Ø§ÙˆÙŠØ§Øª LXC (ÙÙŠ Ø­Ø§Ù„Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ linux) Ùˆ qemu (ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª): </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  vm-srv-build1 - centos 7 ØŒ Ø³ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø³ÙŠØ¯ buildbot ÙˆÙˆØ§Ø­Ø¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ø§Ù„ </li><li style=";text-align:right;direction:rtl">  vm-srv-build2 - Ø¯Ø¨ÙŠØ§Ù† 10 ØŒ Ù„Ø¨Ù†Ø§Ø¡ Ø­Ø²Ù… DEB </li><li style=";text-align:right;direction:rtl">  vm-srv-build3 - windows 10 ØŒ Ù„Ù„ØªØ¬Ù…ÙŠØ¹ ØŒ Ø£Ù†Øª Ù†ÙØ³Ùƒ ØªÙÙ‡Ù… Ù…Ø§ </li></ul><br><p style=";text-align:right;direction:rtl">  Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø¬Ù…Ø¹ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Rac GUI</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙˆØ§Ø¬Ù‡Ø©</a> Ø±Ø³ÙˆÙ…ÙŠØ© Ù„Ù€ 1C rac Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø®ÙˆØ§Ø¯Ù….  Ø¶Ù…Ù† Linux ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© Ù„ÙƒÙ„ Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ ØŒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙˆÙŠØªÙ…</a> Ø§Ø³ØªØ®Ø¯Ø§Ù… <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">freewrap</a> Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù exe Ù„Ù„Ù†ÙˆØ§ÙØ° Ù…Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù†ØµÙŠ tcl. </p><a name="habracut"></a><br><h3 id="ustanovka" style=";text-align:right;direction:rtl">  ØªØ±ÙƒÙŠØ¨ </h3><br><h4 id="gnulinux" style=";text-align:right;direction:rtl">  Ø¬Ù†Ùˆ / Ù„ÙŠÙ†ÙƒØ³ </h4><br><p style=";text-align:right;direction:rtl">  Ù„Ù„ØªØ«Ø¨ÙŠØª ØŒ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ© ØªÙƒÙÙŠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1</a> ØŒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2</a> .  ÙˆÙ„Ø§ ÙŠØ³Ø¨Ø¨ Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„ Ø®Ø§ØµØ©: <br>  Ù„Ù„Ø³ÙŠØ¯: </p><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">pip3 install buildbot pip3 install twisted pip3 install autobahn pip3 install pysqlite3 pip3 install sqlalchemy sqlalchemy-migrate pip3 install buildbot-www buildbot-grid-view buildbot-console-view buildbot-waterfall-view pip3 install python-dateutil</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ù‰ "Ø§Ù„Ø¹Ù…Ø§Ù„" ØŒ Ù‡Ø°Ø§ ÙŠÙƒÙÙŠ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">pip3 install buildbot-worker</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ù„Ø·Ø¨Ø¹ ØŒ Ø³ÙŠÙƒÙˆÙ† Ù…Ù† Ø§Ù„Ø£ØµØ­ Ø¬Ù…Ø¹ Ø§Ù„Ø­Ø²Ù… Ù„ÙƒÙ„ Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ ØŒ ÙˆÙ„ÙƒÙ† Ù‡Ø°Ø§ ÙŠØªØ¬Ø§ÙˆØ² Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ù‚Ø§Ù„Ø©.  Ù„Ù‚Ø¯ Ø£ØºÙÙ„Ù†Ø§ Ø£ÙŠØ¶Ù‹Ø§ ÙˆØµÙ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ù„Ù„Ø¹Ù…Ù„ ØŒ ÙˆØ£Ù„Ø§Ø­Ø¸ ÙÙ‚Ø· Ø£Ù†Ù†ÙŠ Ø£Ø³ØªØ®Ø¯Ù… ProxMox VE.  ÙˆØªØ­ØªØ§Ø¬ Ø£ÙŠØ¶Ù‹Ø§ Ø¥Ù„Ù‰ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù… Ù„ÙƒÙ„ Ù…Ø­ÙˆØ± Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„ØªØ¬Ù…ÙŠØ¹ (centos: rpmdevtools ØŒ ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ Ø› Ø¯Ø¨ÙŠØ§Ù†: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ ØŒ Ùˆ dh-make ØŒ Ùˆ pbuilder ØŒ ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ) </p><br><p style=";text-align:right;direction:rtl">  Ø³ÙŠØªÙ… Ø¥Ø·Ù„Ø§Ù‚ Ø®Ø¯Ù…Ø§Øª ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ùˆ buildbot Ù†ÙŠØ§Ø¨Ø© Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø­ØªØ±Ù… ØŒ Ù„Ø°Ù„Ùƒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¦Ù‡ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">adduser buildbot</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ ØŒ Ù‚Ù… Ø¨ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø®Ø¯Ù…Ø§Øª ØŒ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ ØŒ Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù† Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† (Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª): </p><br><p style=";text-align:right;direction:rtl">  ÙˆØ­Ø¯Ø© Systemd Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">touch /etc/systemd/buildbot-master.service [Unit] Description=BuildBot master service After=network.target [Service] User=buildbot Group=buildbot WorkingDirectory=/home/buildbot/master ExecStart=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/buildbot start --nodaemon ExecReload=/bin/<span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> -HUP <span class="hljs-variable"><span class="hljs-variable">$MAINPID</span></span> [Install] WantedBy=multi-user.target</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ùˆ "Ø§Ù„Ø¹Ø§Ù…Ù„" </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">touch /etc/systemd/buildbot-worker.service [Unit] Description=BuildBot worker service After=network.target [Service]master User=buildbot Group=buildbot WorkingDirectory=/home/buildbot/worker ExecStart=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/buildbot-worker start --nodaemon [Install] WantedBy=buildbot-master.service</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠØ© (ÙÙŠ Ø­Ø§Ù„ØªÙ†Ø§) Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ / usr / local / ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø³Ø§Ø± Ø¥Ù„ÙŠÙ‡Ø§ ÙÙŠ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">nano /root/.bash_profile PATH=<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span>:<span class="hljs-variable"><span class="hljs-variable">$HOME</span></span>/.<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$HOME</span></span>/bin:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ù†ÙŠØ© ØªØ­ØªÙŠØ© Ù„Ù„Ø¯Ù„ÙŠÙ„ Ù„Ù€ "Ø§Ù„Ø¹Ù…Ø§Ù„" (Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ†) ØŒ Ù„Ù‡Ø°Ø§ ØŒ Ù‚Ù… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØªØ­Øª Ù…Ø³ØªØ®Ø¯Ù… buildbot ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠØ©: </p><br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ø£ÙˆÙ„ ØŒ vm-srv-build1: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">su - buildbot mkdir /home/buildbot/worker <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ buildbot-worker create-worker --<span class="hljs-built_in"><span class="hljs-built_in">umask</span></span>=0o22 --keepalive=60 worker vm-srv-build1:4000 CentOS 123456</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ø«Ø§Ù†ÙŠ ØŒ vm-srv-build2: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">su - buildbot mkdir /home/buildbot/worker <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ buildbot-worker create-worker --<span class="hljs-built_in"><span class="hljs-built_in">umask</span></span>=0o22 --keepalive=60 worker vm-srv-build1:4000 Debian-10 123456</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† ØŒ ÙŠÙ…ÙƒÙ† Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø®Ø¯Ù…Ø© buildbot-worker </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">systemctl start buildbot-worker</code> </pre> <br><h4 id="ms-windows" style=";text-align:right;direction:rtl">  Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª ÙˆÙŠÙ†Ø¯ÙˆØ² </h4><br><p style=";text-align:right;direction:rtl">  ÙƒØ¥Ù†Ø´Ø§Ø¡ "Ø§Ù„Ø¹Ù…Ù„" Ù„Ù„Ù†ÙˆØ§ÙØ° ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠ Ù…Ø¹ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø± Win10. <br>  Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø°ÙŠ ØªØ­ØªØ§Ø¬Ù‡: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ø«Ø¹Ø¨Ø§Ù†</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PyWIN</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¨ÙˆØ§Ø¨Ø©</a> </li><li style=";text-align:right;direction:rtl">  Ù„ØªØ«Ø¨ÙŠØª Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ÙÙŠ Ø¨ÙŠØ«ÙˆÙ† ØŒ ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© Ù„ØªÙ†Ø²ÙŠÙ„ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Build Tools Ù„Ù€ Visual Studio 2019</a> </li><li style=";text-align:right;direction:rtl">  7ZIP </li></ul><br><p style=";text-align:right;direction:rtl">  Ø¨Ø¹Ø¯ ØªØ«Ø¨ÙŠØª ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚ ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ«Ø¨ÙŠØª buildbot Ù†ÙØ³Ù‡: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">pip install buildbot-worker</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">md c:\worker</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆØ§Ù„Ø±ÙƒØ¶ </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">buildbot-worker start c:\worker</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ ÙƒØ§Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ (Ø±Ø§Ø¬Ø¹ Ø³Ø¬Ù„ c: \ worker \ twistd.log) ØŒ ÙÙŠÙ…ÙƒÙ†Ùƒ ØªØ³Ø¬ÙŠÙ„ "Ø§Ù„Ø¹Ø§Ù…Ù„" Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ ÙƒØ®Ø¯Ù…Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„ (ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± ÙÙŠ Ø¨ÙˆÙˆÙŠØ±Ø´ÙŠÙ„ ÙŠØ¹Ù…Ù„ ÙƒÙ…Ø³Ø¤ÙˆÙ„): </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">buildbot_worker_windows_service.exe --user VM-SRV-BUILD3\buildbot --password 123456 --startup auto install New-ItemProperty -path Registry::HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BuildBot\Parameters -Name directories -PropertyType String -Value c:\worker</code> </pre><br><p style=";text-align:right;direction:rtl">  ÙˆÙŠÙ…ÙƒÙ†Ùƒ ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Start-Service buildbot</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ø¹ "Ø§Ù„Ø¹Ù…Ø§Ù„" ØŒ Ø«Ù… Ù„Ù† ØªØ¶Ø·Ø± Ø¥Ù„Ù‰ Ù„Ù…Ø³Ù‡Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø¢Ù† ØŒ ÙÙƒÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªÙ†ØªÙ‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…. </p><br><h3 id="nastroyka-mastera" style=";text-align:right;direction:rtl">  Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ </h3><br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ø¯Ø¦ Ø°ÙŠ Ø¨Ø¯Ø¡ ØŒ Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬ (Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) ØŒ Ù„Ù‡Ø°Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØªØ­Øª Ù…Ø³ØªØ®Ø¯Ù… buildbot ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠØ©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">su - buildbot mkdir /home/buildbot/master <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ buildbot create-master master</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ù„Ø­Ø²Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ØŒ Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù†ÙŠØ§Øª </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">mkdir /home/buildbot/builds</code> </pre> <br><p style=";text-align:right;direction:rtl">  ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù master.cfg ÙÙŠ Ø§Ù„Ø¯Ù„ÙŠÙ„ / home / buildbot / master /.  Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ù‡Ùˆ Ø±Ù…Ø² Ø¨ÙŠØ«ÙˆÙ† ÙˆÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙˆØµÙ Ù„Ø¬Ù…ÙŠØ¹ Ø¢Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ØŒ ÙˆØ³ÙˆÙ Ù†Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹Ù‡Ø§. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">nano /home/buildbot/master/master.cfg</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, re <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> steps, util, schedulers, worker, changes, reporters c= BuildmasterConfig ={} <span class="hljs-comment"><span class="hljs-comment">#   . c['workers'] = [ worker.Worker('CentOS', '123456'), worker.Worker('Debian-10', '123456'), worker.Worker('Windows-10', '123456')] c['protocols'] = {'pb': {'port': 4000}} #      c['change_source'] = [] c['change_source'].append(changes.GitPoller( repourl = 'https://bitbucket.org/svk28/rac-gui.git', project = 'Rac-GUI', branches = True, pollInterval = 60 ) ) #    c['schedulers'] = [] c['schedulers'].append(schedulers.SingleBranchScheduler( name="Rac-GUI-schedulers", change_filter=util.ChangeFilter(branch='master'), builderNames=["Rac-GUI-RPM-builder", "Rac-GUI-DEB-builder", "Rac-GUI-WIN-builder"], properties = {'owner': 'admin'} ) ) @util.renderer ######################################3 #  RPM- rac_gui_build_RPM = util.BuildFactory() rac_gui_build_RPM.addStep(steps.Git( repourl = 'https://bitbucket.org/svk28/rac-gui.git', workdir = 'rac-gui', haltOnFailure = True, submodules = True, mode='full', progress = True) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ø£ØªÙ…ØªØ© ØªØ¬Ù…ÙŠØ¹ Ø­Ø²Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ØŒ Ø¨Ø­ÙŠØ« Ù„Ø§ ØªØ¶Ø·Ø± Ø¥Ù„Ù‰ Ø§Ù„ØµØ¹ÙˆØ¯ Ø¥Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ù…Ù„Ù master.cfg ØŒ ÙÙŠ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ rac_gui.tcl ÙÙŠ Ø§Ù„Ø±Ø£Ø³ ØŒ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø·Ø± Ø¨Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">###################################################### # Rac GUI ... # version: 1.0.3 # release: 1</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆØ§Ø³ØªÙ†Ø§Ø¯Ø§ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ· ØŒ Ø³ÙˆÙ ÙŠÙ‚ÙˆÙ… buildbot Ø¨ØªØ±Ù‚ÙŠÙ… Ø§Ù„Ø­Ø²Ù….  Ù„Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… grep.  ÙÙŠ buildbot ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¨Ø¨Ø³Ø§Ø·Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù€ "Ø§Ù„Ø¹Ù…Ø§Ù„" (Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„ ØŒ Ù„Ù… Ø£Ø¬Ø¯ ÙƒÙŠÙ).  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®ØµØ§Ø¦Øµ.  Ø£ÙŠ  ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ¬Ù…ÙŠØ¹ ØŒ Ø£Ø¶Ù Ø§Ù„Ø®Ø·ÙˆØ§Øª Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø± ØŒ ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ØŒ Ù‚Ù… Ø¨ØªØ¹ÙŠÙŠÙ† Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø±.  ÙŠÙ…ÙƒÙ† Ø¶Ø¨Ø· Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø¨Ø¹Ø¯Ø© Ø·Ø±Ù‚ ØŒ ÙˆÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø© ØŒ ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø£Ù…Ø± ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       rac_gui_build_RPM.addStep( steps.SetPropertyFromCommand( command="grep version ../rac-gui/rac_gui.tcl | grep -oE '\\b[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}\\b'", property="version" ) ) #       rac_gui_build_RPM.addStep( steps.SetPropertyFromCommand( command="grep release ../rac-gui/rac_gui.tcl | grep -oE '\\b[0-9]{1,3}\\b'", property="release" ) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªÙŠ ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ util.Interpolate (). </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   rac_gui_build_RPM.addStep( steps.ShellCommand( command=["tar", "czf", util.Interpolate("/home/buildbot/rpmbuild/SOURCES/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"), "../rac-gui"] ) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ØªØ¬Ø¯Ø± Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø£Ù†Ù‡ Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¶ÙŠÙ Ù„Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ù„Ù„Ø­Ø²Ù… ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ¬Ù…ÙŠØ¹ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  spec rac_gui_build_RPM.addStep(steps.ShellCommand( command=["cp", "../rac-gui/rac_gui.spec", "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"]))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„ØªØ¹ÙŠÙŠÙ† Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­Ø© ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ sed Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ ØŒ Ø£ÙŠ  ÙŠØ³ØªØ¨Ø¯Ù„ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¯Ø§Ø®Ù„ Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø¨Ø§Ù„Ø¶Ø±Ø± </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   rac_gui_build_RPM.addStep(steps.ShellCommand( command=["sed", "-i", util.Interpolate("s/.*Version:.*/Version:\t%(prop:version)s/"), "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"])) #   rac_gui_build_RPM.addStep(steps.ShellCommand( command=["sed", "-i", util.Interpolate("s/.*Release:.*/Release:\t%(prop:release)s/"), "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"])) #    rac_gui_build_RPM.addStep(steps.RpmBuild( specfile="/home/buildbot/rpmbuild/SPECS/rac_gui.spec", dist='.el5', topdir='/home/buildbot/rpmbuild', builddir='/home/buildbot/rpmbuild/build', rpmdir='/home/buildbot/rpmbuild/RPMS', sourcedir='/home/buildbot/rpmbuild/SOURCES' ) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ù‚ÙˆÙ… Ø¨Ù†Ø³Ø® Ø§Ù„Ø­Ø²Ù…Ø© Ø§Ù„ØªÙŠ ØªÙ… ØªØ¬Ù…ÙŠØ¹Ù‡Ø§ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© ÙˆØ§Ù„Ø£Ø±Ø´ÙØ© Ù…Ø¹ Ø±Ù…ÙˆØ² Ø§Ù„Ù…ØµØ¯Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ.  ÙˆÙ„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± Ù†Ø³Ø® Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆØ¯Ø¹Ùƒ Ø£Ùˆ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     rac_gui_build_RPM.addStep( steps.FileUpload( workersrc=util.Interpolate("/home/buildbot/rpmbuild/RPMS/noarch/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm") ) ) rac_gui_build_RPM.addStep( steps.FileUpload( workersrc=util.Interpolate("/home/buildbot/rpmbuild/SOURCES/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz") ) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ ØŒ Ù†Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ù†Ø³Ø® Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø¬Ù…Ø¹Ø© Ø¥Ù„Ù‰ Ø§Ø³ØªØ¶Ø§ÙØ© FTP.  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ Ø§Ø³ØªØ®Ø¯Ù… <a href="">Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ</a> tcl. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">rac_gui_build_RPM.addStep( steps.MasterShellCommand( command=[<span class="hljs-string"><span class="hljs-string">"/usr/local/bin/deploy-ftp.tcl"</span></span>, util.Interpolate(<span class="hljs-string"><span class="hljs-string">"--local-file=/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm"</span></span>), util.Interpolate(<span class="hljs-string"><span class="hljs-string">"--remote-file=uploads/rac-gui/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm"</span></span>)] ) ) rac_gui_build_RPM.addStep( steps.MasterShellCommand( command=[<span class="hljs-string"><span class="hljs-string">"/usr/local/bin/deploy-ftp.tcl"</span></span>, util.Interpolate(<span class="hljs-string"><span class="hljs-string">"--local-file=/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"</span></span>), util.Interpolate(<span class="hljs-string"><span class="hljs-string">"--remote-file=uploads/rac-gui/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"</span></span>)] ) )</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ù…Ø¹ RPM Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.  Ø§Ù„Ø¢Ù† Ù„Ù†Ø¨Ø¯Ø£ ÙÙŠ ÙˆØµÙ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„ØªØ¬Ù…ÙŠØ¹ Ù„Ø­Ø²Ù…Ø© DEB.  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù† Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø­Ø²Ù… Ù„Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù…Ø³ØªÙ‚Ù„Ø© Ø¹Ù† Ø¨Ø¹Ø¶Ù‡Ø§ Ø§Ù„Ø¨Ø¹Ø¶ ØŒ ÙØ³ÙŠØªÙ… ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®Ø·ÙˆØ§Øª. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">rac_gui_build_DEB = util.BuildFactory() rac_gui_build_DEB.addStep(steps.Git( repourl = <span class="hljs-string"><span class="hljs-string">'https://bitbucket.org/svk28/rac-gui.git'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, submodules = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'build'</span></span>, progress = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ) <span class="hljs-comment"><span class="hljs-comment">#       rac_gui_build_DEB.addStep( steps.SetPropertyFromCommand( command="grep version rac_gui.tcl | grep -oE '\\b[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}\\b'", property="version" ) ) #       rac_gui_build_DEB.addStep( steps.SetPropertyFromCommand( command="grep release rac_gui.tcl | grep -oE '\\b[0-9]{1,3}\\b'", property="release" ) ) #    rac_gui_build_DEB.addStep(steps.ShellCommand( command=["mv", "rac_gui.tcl", "racgui"]))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø­Ø²Ù…Ø© RPM ØŒ ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨ÙˆØ§Ø³Ø·Ø© rpm Ù†ÙØ³Ù‡Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¬Ù…ÙŠØ¹ ÙˆÙŠØªÙ… ÙˆØµÙÙ‡Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª ØŒ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ù‰ Ø¯Ø¨ÙŠØ§Ù† ØŒ ÙŠØªØ¹ÙŠÙ† Ø¹Ù„ÙŠÙƒ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ Ù‡Ù†Ø§: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     rac_gui_build_DEB.addStep(steps.ShellCommand( command=["sed", "-i", "s+^set\ dir(lib)+set\ dir(lib)\ /usr/share/rac-gui/lib ;#+g", "racgui"])) #     rac_gui_build_DEB.addStep(steps.ShellCommand( command=["sed", "-i", "s+\[pwd\]+/usr/share/rac-gui+g", "racgui"])) #   rac_gui_build_DEB.addStep(steps.ShellCommand( command=["tar", "czf", util.Interpolate("../rac-gui_%(prop:version)s.orig.tar.gz"), "."])) #   rac_gui_build_DEB.addStep(steps.ShellCommand( command=["dpkg-buildpackage"])) #     rac_gui_build_DEB.addStep( steps.FileUpload( workersrc=util.Interpolate("../rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb") ) ) rac_gui_build_DEB.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb")] ) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆÙŠØªÙ… DEB ØŒ ÙˆØ§Ù„Ø¢Ù† Ø§Ù„Ù†ÙˆØ§ÙØ°! </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">rac_gui_build_WIN = util.BuildFactory() rac_gui_build_WIN.addStep(steps.Git( repourl = <span class="hljs-string"><span class="hljs-string">'https://bitbucket.org/svk28/rac-gui.git'</span></span>, haltOnFailure = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, submodules = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, mode=<span class="hljs-string"><span class="hljs-string">'full'</span></span>, workdir=<span class="hljs-string"><span class="hljs-string">'build'</span></span>, progress = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) )</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù† windows Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ grep Ùˆ sed (Ø£Ùˆ Ù‡Ù„ Ù‡Ù†Ø§ÙƒØŸ) ØŒ ÙØ³Ù†Ø³ØªØ®Ø¯Ù… Ø¨ÙˆÙˆÙŠØ±Ø´ÙŠÙ„ </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       rac_gui_build_WIN.addStep( steps.SetPropertyFromCommand( command="powershell -command \"((Get-Content .\\rac_gui.tcl | Select-String -Pattern 'version:') -split '\\s')[2]", property="version" ) ) #       rac_gui_build_WIN.addStep( steps.SetPropertyFromCommand( command="powershell -command \"((Get-Content .\\rac_gui.tcl | Select-String -Pattern 'release:') -split '\\s')[2]", property="release" ) ) #    rac_gui_build_WIN.addStep(steps.ShellCommand( command=["c:\\bin\\freewrap.exe", "rac_gui.tcl"])) #  ,   rac_gui_build_WIN.addStep(steps.ShellCommand( command=["c:\\Program Files\\7-zip\\7z.exe", "a", "-r", util.Interpolate("..\\rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), "..\\build"])) #    rac_gui_build_WIN.addStep( steps.FileUpload( workersrc=util.Interpolate("..\\rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s.win.zip") ) ) #     rac_gui_build_WIN.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui_%(prop:version)s-%(prop:release)s.win.zip")] ) ) #        c['builders'] = [ util.BuilderConfig(name="Rac-GUI-RPM-builder", workername='CentOS', factory=rac_gui_build_RPM), util.BuilderConfig(name="Rac-GUI-DEB-builder", workername='Debian-10', factory=rac_gui_build_DEB), util.BuilderConfig(name="Rac-GUI-WIN-builder", workername='Windows-10', factory=rac_gui_build_WIN), ]</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø­Ø§Ù„Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ¬Ù…ÙŠØ¹ ØŒ Ø³Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>] = [] template=<span class="hljs-string"><span class="hljs-string">u'''\ &lt;h4&gt;Build status: {{ summary }}&lt;/h4&gt; &lt;p&gt; Worker used: {{ workername }}&lt;/p&gt; {% for step in build['steps'] %} &lt;p&gt; {{ step['name'] }}: {{ step['result'] }}&lt;/p&gt; {% endfor %} &lt;p&gt;&lt;b&gt; -- The Buildbot&lt;/b&gt;&lt;/p&gt; '''</span></span> mailNotifier = reporters.MailNotifier(fromaddr=<span class="hljs-string"><span class="hljs-string">"builder@domain.ru"</span></span>, sendToInterestedUsers=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, mode=(<span class="hljs-string"><span class="hljs-string">'all'</span></span>), extraRecipients=[<span class="hljs-string"><span class="hljs-string">"admin@domain.ru"</span></span>], relayhost=<span class="hljs-string"><span class="hljs-string">"mail.domain.ru"</span></span>, smtpPort=<span class="hljs-number"><span class="hljs-number">587</span></span>, smtpUser=<span class="hljs-string"><span class="hljs-string">"builder@domain.ru"</span></span>, smtpPassword=<span class="hljs-string"><span class="hljs-string">"******"</span></span>, messageFormatter=reporters.MessageFormatter( template=template, template_type=<span class="hljs-string"><span class="hljs-string">'html'</span></span>, wantProperties=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, wantSteps=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)) c[<span class="hljs-string"><span class="hljs-string">'services'</span></span>].append(mailNotifier) <span class="hljs-comment"><span class="hljs-comment">#    c['title'] = "The process of bulding" c['titleURL'] = "http://vm-srv-build1:80/" c['buildbotURL'] = "http://vm-srv-build1/" c['www'] = dict(port=80, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c['db'] = { 'db_url' : "sqlite:///state.sqlite" }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ù‚ÙˆÙ… Ø¨Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">systemctl restart buildbot-master</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ ØŒ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ØªÙƒÙˆÙŠÙ† ÙˆØ£Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ ÙƒØ§Ù„Ù…Ø¹ØªØ§Ø¯.  ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…ÙˆØ¸ÙÙŠÙ†Ø§ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¢Ù† ØŒ ÙƒÙ…Ø§ Ø³ÙŠØªÙ… Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¨Ø³Ø¹Ø§Ø¯Ø© ÙÙŠ Ø³Ø¬Ù„ '' '' '' '/ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© / Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Ù…Ø§Ø³ØªØ± / twistd.log' '' '' Ø§Ù„Ø³Ø¬Ù„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> 2019-07-24 16:50:35+0300 [-] Loading buildbot.tac... 2019-07-24 16:50:35+0300 [-] Loaded. 2019-07-24 16:50:35+0300 [-] twistd 19.2.1 (/usr/bin/python3.6 3.6.8) starting up. 2019-07-24 16:50:35+0300 [-] reactor class: twisted.internet.epollreactor.EPollReactor. 2019-07-24 16:50:35+0300 [-] Starting BuildMaster -- buildbot.version: 2.3.1 2019-07-24 16:50:35+0300 [-] Loading configuration from '/home/buildbot/master/master.cfg' 2019-07-24 16:50:36+0300 [-] /usr/local/lib/python3.6/site-packages/buildbot/config.py:90: buildbot.config.ConfigWarning: [0.9.0 and later] `buildbotNetUsageData` is not configured and defaults to basic. This parameter helps the buildbot development team to understand the installation base. No personal information is collected. Only installation software version info and plugin usage is sent. You can `opt-out` by setting this variable to None. Or `opt-in` for more information by setting it to "full". 2019-07-24 16:50:36+0300 [-] Setting up database with URL 'sqlite:/state.sqlite' 2019-07-24 16:50:36+0300 [-] setting database journal mode to 'wal' 2019-07-24 16:50:36+0300 [-] adding 1 new services, removing 0 2019-07-24 16:50:36+0300 [-] adding 1 new change_sources, removing 0 2019-07-24 16:50:36+0300 [-] gitpoller: using workdir '/home/buildbot/master/gitpoller-work' 2019-07-24 16:50:36+0300 [-] adding 3 new builders, removing 0 2019-07-24 16:50:36+0300 [-] adding 1 new schedulers, removing 0 2019-07-24 16:50:36+0300 [-] initializing www plugin 'waterfall_view' 2019-07-24 16:50:36+0300 [-] initializing www plugin 'console_view' 2019-07-24 16:50:36+0300 [-] initializing www plugin 'grid_view' 2019-07-24 16:50:36+0300 [-] NOTE: www plugin 'sitenav' is installed but not configured 2019-07-24 16:50:36+0300 [-] initializing www plugin 'waterfall_view' 2019-07-24 16:50:36+0300 [-] initializing www plugin 'console_view' 2019-07-24 16:50:36+0300 [-] initializing www plugin 'grid_view' 2019-07-24 16:50:36+0300 [-] NOTE: www plugin 'sitenav' is installed but not configured 2019-07-24 16:50:36+0300 [-] BuildbotSite starting on 80 2019-07-24 16:50:36+0300 [-] Starting factory &lt;buildbot.www.service.BuildbotSite object at 0x7fe31c2657b8&gt; 2019-07-24 16:50:36+0300 [-] adding 3 new workers, removing 0 2019-07-24 16:50:36+0300 [-] PBServerFactory starting on 4000 2019-07-24 16:50:36+0300 [-] Starting factory &lt;twisted.spread.pb.PBServerFactory object at 0x7fe31c147470&gt; 2019-07-24 16:50:37+0300 [-] BuildMaster is running 2019-07-24 16:50:37+0300 [-] buildbotNetUsageData: sending {'installid': 'b6193b126b96689351d2fe95787c5a03fc0879f9', 'versions': {'Python': '3.6.8', 'Buildbot': '2.3.1', 'Twisted': '19.2.1'}, 'platform': {'platform': 'Linux-4.15.18-10- pve-x86_64-with-centos-7.6.1810-Core', 'system': 'Linux', 'machine': 'x86_64', 'processor': 'x86_64', 'python_implementation': 'CPython', 'version': '#1 SMP PVE 4.15.18-32', 'distro': 'centos:7'}, 'plugins': {'buildbot/worker/base/Worker': 3, 'buildbot/config/BuilderConfig': 3, 'buildbot/schedulers/basic/SingleBranchScheduler': 1, 'buildbot/reporters/mail/MailNotifier': 1, 'buildbot/changes/gitpoller/GitPoller': 1, 'buildbot/steps/worker/MakeDirectory': 1, 'buildbot/steps/source/git/Git': 3, 'buildbot/steps/shell/ShellCommand': 9, 'buildbot/steps/package/rpm/rpmbuild/RpmBuild': 1}, 'db': 'sqlite', 'mq': 'simple', 'www_plugins': ['waterfall_view', 'console_view', 'grid_view']} 2019-07-24 16:50:37+0300 [Broker,0,127.0.0.1] worker 'CentOS' attaching from IPv4Address(type='TCP', host='127.0.0.1', port=37332) 2019-07-24 16:50:37+0300 [Broker,0,127.0.0.1] Got workerinfo from 'CentOS' 2019-07-24 16:50:37+0300 [-] bot attached 2019-07-24 16:50:37+0300 [Broker,0,127.0.0.1] Worker CentOS attached to Rac-GUI-RPM-builder 2019-07-24 16:50:37+0300 [-] buildbotNetUsageData: buildbot.net said: ok 2019-07-24 16:50:39+0300 [Broker,1,192.168.55.15] worker 'Windows-10' attaching from IPv4Address(type='TCP', host='192.168.5.145', port=49831) 2019-07-24 16:50:39+0300 [Broker,1,192.168.55.15] Got workerinfo from 'Windows-10' 2019-07-24 16:50:40+0300 [-] bot attached 2019-07-24 16:50:40+0300 [Broker,1,192.168.55.15] Worker Windows-10 attached to Rac-GUI-WIN-builder 2019-07-24 16:50:41+0300 [Broker,2,192.168.55.99] worker 'Debian-10' attaching from IPv4Address(type='TCP', host='192.168.5.9', port=44430) 2019-07-24 16:50:41+0300 [Broker,2,192.168.55.99] Got workerinfo from 'Debian-10' 2019-07-24 16:50:41+0300 [-] bot attached 2019-07-24 16:50:41+0300 [Broker,2,192.168.55.99] Worker Debian-10 attached to Rac-GUI-DEB-builder</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‡Ø°Ø§ ÙŠÙƒÙ…Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯.  ÙŠÙ…ÙƒÙ†Ùƒ Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø®Ù„Ø§Ù„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆÙŠØ¨.  Ø­ÙŠØ« ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø±Ø¤ÙŠØ© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªØ¬Ù…ÙŠØ¹ ØŒ ÙˆØ§Ù„Ø´Ø±ÙˆØ¹ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ù…Ø¬Ù…Ø¯Ø© Ø¥Ø°Ø§ Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§ ØŒ Ø¥Ù„Ø®. </p><br><p style=";text-align:right;direction:rtl">  Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø¥Ø·Ù„Ø§Ù‚ Ø¹Ù…Ø§Ù„Ù†Ø§ Ø§Ù„Ø´Ø§Ù‚ÙŠÙ† ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ±Ù‰ Ù…Ù† Ø®Ù„Ø§Ù„ Ù‚Ø§Ø¦Ù…Ø© "Builds" -&gt; "Ø§Ù„Ø¹Ù…Ø§Ù„" </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/425/92a/182/42592a182ecbe305bea2bff87c28755e.png" alt="ØµÙˆØ±Ø©"></p><br><p style=";text-align:right;direction:rtl">  Ø¨Ø¹Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø£ÙŠ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ù…Ø³ØªÙˆØ¯Ø¹ Git) ØŒ Ø³ØªØ¸Ù‡Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/614/d81/2a1/614d812a145d9f25d7267d71de13c678.png" alt="ØµÙˆØ±Ø©"></p><br><p style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø§ÙˆØ³ ÙÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡ ØŒ ÙŠØªÙ… ÙØªØ­ ØµÙØ­Ø© Ø¨Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ù…Ù„ÙŠØ© ØŒ Ø­ÙŠØ« ÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¤ÙŠØ© Ù…Ø§ ÙŠØ­Ø¯Ø« ØŒ ÙˆÙ…Ø§ Ù‡ÙŠ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØŒ ÙˆÙ…Ø§ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/aeb/945/d73/aeb945d73a63cb5b3ead878ebf6fe774.png" alt="ØµÙˆØ±Ø©"></p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ£Ø®Ø° Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¨Ø£ÙƒÙ…Ù„Ù‡ Ù‡Ù†Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, re <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> buildbot.plugins <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> steps, util, schedulers, worker, changes, reporters c= BuildmasterConfig ={} c[<span class="hljs-string"><span class="hljs-string">'workers'</span></span>] = [ worker.Worker(<span class="hljs-string"><span class="hljs-string">'CentOS'</span></span>, <span class="hljs-string"><span class="hljs-string">'123456'</span></span>), worker.Worker(<span class="hljs-string"><span class="hljs-string">'Debian-10'</span></span>, <span class="hljs-string"><span class="hljs-string">'123456'</span></span>), worker.Worker(<span class="hljs-string"><span class="hljs-string">'Windows-10'</span></span>, <span class="hljs-string"><span class="hljs-string">'123456'</span></span>)] c[<span class="hljs-string"><span class="hljs-string">'protocols'</span></span>] = {<span class="hljs-string"><span class="hljs-string">'pb'</span></span>: {<span class="hljs-string"><span class="hljs-string">'port'</span></span>: <span class="hljs-number"><span class="hljs-number">4000</span></span>}} c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>] = [] c[<span class="hljs-string"><span class="hljs-string">'change_source'</span></span>].append(changes.GitPoller( repourl = <span class="hljs-string"><span class="hljs-string">'https://bitbucket.org/svk28/rac-gui.git'</span></span>, project = <span class="hljs-string"><span class="hljs-string">'Rac-GUI'</span></span>, branches = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, pollInterval = <span class="hljs-number"><span class="hljs-number">600</span></span> )) <span class="hljs-comment"><span class="hljs-comment">#    c['schedulers'] = [] c['schedulers'].append(schedulers.SingleBranchScheduler( name="Rac-GUI-schedulers", change_filter=util.ChangeFilter(branch='master'), builderNames=["Rac-GUI-RPM-builder", "Rac-GUI-DEB-builder", "Rac-GUI-WIN-builder"], properties = {'owner': 'admin'} )) @util.renderer def get_name_version_release(props): prog_name = "rac-gui" prog_version = "1.0.3" prog_release = "3" return { "prog_name": prog_name #"prog_version": prog_version, #"prog_release": prog_release } rac_gui_build_RPM = util.BuildFactory() rac_gui_build_RPM.addStep(steps.Git( repourl = 'https://bitbucket.org/svk28/rac-gui.git', workdir = 'rac-gui', haltOnFailure = True, submodules = True, mode='full', progress = True) ) #       rac_gui_build_RPM.addStep( steps.SetPropertyFromCommand( command="grep version ../rac-gui/rac_gui.tcl | grep -oE '\\b[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}\\b'", property="version" ) ) #       rac_gui_build_RPM.addStep( steps.SetPropertyFromCommand( command="grep release ../rac-gui/rac_gui.tcl | grep -oE '\\b[0-9]{1,3}\\b'", property="release" ) ) rac_gui_build_RPM.addStep(steps.ShellCommand( command=["tar", "czf", util.Interpolate("/home/buildbot/rpmbuild/SOURCES/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"), "../rac-gui"])) rac_gui_build_RPM.addStep(steps.ShellCommand( command=["cp", "../rac-gui/rac_gui.spec", "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"])) rac_gui_build_RPM.addStep(steps.ShellCommand( command=["sed", "-i", util.Interpolate("s/.*Version:.*/Version:\t%(prop:version)s/"), "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"])) rac_gui_build_RPM.addStep(steps.ShellCommand( command=["sed", "-i", util.Interpolate("s/.*Release:.*/Release:\t%(prop:release)s/"), "/home/buildbot/rpmbuild/SPECS/rac_gui.spec"])) rac_gui_build_RPM.addStep(steps.RpmBuild( specfile="/home/buildbot/rpmbuild/SPECS/rac_gui.spec", dist='.el5', topdir='/home/buildbot/rpmbuild', builddir='/home/buildbot/rpmbuild/build', rpmdir='/home/buildbot/rpmbuild/RPMS', sourcedir='/home/buildbot/rpmbuild/SOURCES' )) #     rac_gui_build_RPM.addStep( steps.FileUpload( workersrc=util.Interpolate("/home/buildbot/rpmbuild/RPMS/noarch/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm") ) ) rac_gui_build_RPM.addStep( steps.FileUpload( workersrc=util.Interpolate("/home/buildbot/rpmbuild/SOURCES/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz") ) ) rac_gui_build_RPM.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui-%(prop:version)s-%(prop:release)s.noarch.rpm")] ) ) rac_gui_build_RPM.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui-%(prop:version)s-%(prop:release)s.tar.gz")] ) ) #################################### ## DEB #################################### rac_gui_build_DEB = util.BuildFactory() rac_gui_build_DEB.addStep(steps.Git( repourl = 'https://bitbucket.org/svk28/rac-gui.git', haltOnFailure = True, submodules = True, mode='full', workdir='build', progress = True) ) #       rac_gui_build_DEB.addStep( steps.SetPropertyFromCommand( command="grep version rac_gui.tcl | grep -oE '\\b[0-9]{1,2}\\.[0-9]{1,2}\\.[0-9]{1,2}\\b'", property="version" ) ) #       rac_gui_build_DEB.addStep( steps.SetPropertyFromCommand( command="grep release rac_gui.tcl | grep -oE '\\b[0-9]{1,3}\\b'", property="release" ) ) #    rac_gui_build_DEB.addStep(steps.ShellCommand( command=["mv", "rac_gui.tcl", "racgui"])) #     rac_gui_build_DEB.addStep(steps.ShellCommand( command=["sed", "-i", "s+^set\ dir(lib)+set\ dir(lib)\ /usr/share/rac-gui/lib ;#+g", "racgui"])) #     rac_gui_build_DEB.addStep(steps.ShellCommand( command=["sed", "-i", "s+\[pwd\]+/usr/share/rac-gui+g", "racgui"])) #   rac_gui_build_DEB.addStep(steps.ShellCommand( command=["tar", "czf", util.Interpolate("../rac-gui_%(prop:version)s.orig.tar.gz"), "."])) #   rac_gui_build_DEB.addStep(steps.ShellCommand( command=["dpkg-buildpackage"])) #     rac_gui_build_DEB.addStep( steps.FileUpload( workersrc=util.Interpolate("../rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb") ) ) rac_gui_build_DEB.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui_%(prop:version)s-%(prop:release)s_amd64.deb")] ) ) ############################################ # WIN ############################################ rac_gui_build_WIN = util.BuildFactory() rac_gui_build_WIN.addStep(steps.Git( repourl = 'https://bitbucket.org/svk28/rac-gui.git', haltOnFailure = True, submodules = True, mode='full', workdir='build', progress = True) ) #       rac_gui_build_WIN.addStep( steps.SetPropertyFromCommand( command="powershell -command \"((Get-Content .\\rac_gui.tcl | Select-String -Pattern 'version:') -split '\\s')[2]", property="version" ) ) #       rac_gui_build_WIN.addStep( steps.SetPropertyFromCommand( command="powershell -command \"((Get-Content .\\rac_gui.tcl | Select-String -Pattern 'release:') -split '\\s')[2]", property="release" ) ) #    rac_gui_build_WIN.addStep(steps.ShellCommand( command=["c:\\bin\\freewrap.exe", "rac_gui.tcl"])) #  ,   rac_gui_build_WIN.addStep(steps.ShellCommand( command=["c:\\Program Files\\7-zip\\7z.exe", "a", "-r", util.Interpolate("..\\rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), "..\\build"])) #    rac_gui_build_WIN.addStep( steps.FileUpload( workersrc=util.Interpolate("..\\rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), masterdest=util.Interpolate("/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s.win.zip") ) ) #     rac_gui_build_WIN.addStep( steps.MasterShellCommand( command=["/usr/local/bin/deploy-ftp.tcl", util.Interpolate("--local-file=/home/buildbot/builds/rac-gui_%(prop:version)s-%(prop:release)s.win.zip"), util.Interpolate("--remote-file=uploads/rac-gui/rac-gui_%(prop:version)s-%(prop:release)s.win.zip")] ) ) c['builders'] = [ util.BuilderConfig(name="Rac-GUI-RPM-builder", workername='CentOS', factory=rac_gui_build_RPM), util.BuilderConfig(name="Rac-GUI-DEB-builder", workername='Debian-10', factory=rac_gui_build_DEB), util.BuilderConfig(name="Rac-GUI-WIN-builder", workername='Windows-10', factory=rac_gui_build_WIN), ] c['services'] = [] template=u'''\ &lt;h4&gt;Build status: {{ summary }}&lt;/h4&gt; &lt;p&gt; Worker used: {{ workername }}&lt;/p&gt; {% for step in build['steps'] %} &lt;p&gt; {{ step['name'] }}: {{ step['result'] }}&lt;/p&gt; {% endfor %} &lt;p&gt;&lt;b&gt; -- The Buildbot&lt;/b&gt;&lt;/p&gt; ''' mailNotifier = reporters.MailNotifier(fromaddr="112@icvibor.ru", sendToInterestedUsers=False, mode=('all'), extraRecipients=["my@domain.local"], relayhost="mail.domain.local", smtpPort=587, smtpUser="buildbot@domain.local", smtpPassword="**********", messageFormatter=reporters.MessageFormatter( template=template, template_type='html', wantProperties=True, wantSteps=True)) c['services'].append(mailNotifier) c['title'] = "The process of bulding" c['titleURL'] = "http://vm-srv-build1:80/" c['buildbotURL'] = "http://vm-srv-build1/" c['www'] = dict(port=80, plugins=dict(waterfall_view={}, console_view={}, grid_view={})) c['db'] = { 'db_url' : "sqlite:///state.sqlite" }</span></span></code> </pre> </div></div><br><h3 id="materialy" style=";text-align:right;direction:rtl">  </h3><br><p style=";text-align:right;direction:rtl">      : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  Continuous Integration   BuildBot</a> </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Buildbot:         </a> </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    Buildbot  Ubuntu 16.04</a> </li><li style=";text-align:right;direction:rtl">      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Buildbot Tutorial</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464489/">https://habr.com/ru/post/ar464489/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464471/index.html">snmp Ø±ØµØ¯ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© ÙÙŠ Ø§Ù„Ù…ØªØ£Ù†Ù‚</a></li>
<li><a href="../ar464479/index.html">"Ø¨ÙŠØ§Ù† Ù…Ù† Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† Ù…Ù† Ø§Ù„ØªØ®ØµØµØ§Øª Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©" Ø£Ùˆ ÙƒÙŠÙ Ø¬Ø¦Øª Ø¥Ù„Ù‰ Ù…Ø«Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø­ÙŠØ§Ø©</a></li>
<li><a href="../ar464481/index.html">ÙƒÙŠÙ Ø¨Ù†ÙŠÙ†Ø§ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªØ­ÙÙŠØ² ÙÙŠ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ</a></li>
<li><a href="../ar464485/index.html">ShIoTiny: ØªÙ‡ÙˆÙŠØ© Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø±Ø·Ø¨Ø© (Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)</a></li>
<li><a href="../ar464487/index.html">Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ ÙˆØ§Ø¬Ù‡Ø© Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</a></li>
<li><a href="../ar464491/index.html">ÙÙŠÙØ§Ù„Ø¯ÙŠ 2.7 - Ø­ÙŠØ§Ø© Ù…ÙƒØ«ÙØ© ÙÙŠ ØµÙ…Øª</a></li>
<li><a href="../ar464495/index.html">ØªØ·ÙˆÙŠØ± ÙØ±ÙŠÙ‚ ÙˆØ§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚</a></li>
<li><a href="../ar464497/index.html">Ø¬ÙŠØ±Ø§ ÙƒØ¹Ù„Ø§Ø¬ Ù„Ù„Ø£Ø±Ù‚ ÙˆØ§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹ØµØ¨ÙŠØ©</a></li>
<li><a href="../ar464499/index.html">"Ù…Ø§Øª. Ù†Ù…ÙˆØ°Ø¬ ÙˆÙˆÙ„ Ø³ØªØ±ÙŠØª "Ø£Ùˆ Ù…Ø­Ø§ÙˆÙ„Ø© Ù„ØªØ­Ø³ÙŠÙ† ØªÙƒÙ„ÙØ© Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</a></li>
<li><a href="../ar464503/index.html">Ù…Ø·Ø§Ø¨Ù‚Ø© ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Wi-Fi Ù…Ø¹ aircrack-ng</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>