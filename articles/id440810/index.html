<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✌🏿 🖐🏽 🧝 Talos - “Distribusi Linux Modern untuk Kubernetes” Diperkenalkan 👨🏿‍🔧 🧀 👩🏻‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suatu hari, insinyur Amerika Andrew Rynhard mempresentasikan proyek yang menarik: distribusi Linux kompak yang dirancang khusus untuk menjalankan klus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Talos - “Distribusi Linux Modern untuk Kubernetes” Diperkenalkan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440810/"><img src="https://habrastorage.org/webt/t-/z1/j4/t-z1j4yey3nifrww_gvguiuw1kk.png"><br><br>  Suatu hari, insinyur Amerika Andrew Rynhard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mempresentasikan</a> proyek yang menarik: distribusi Linux kompak yang dirancang khusus untuk menjalankan kluster Kubernetes.  Itu menerima nama dari mitologi Yunani kuno - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Talos</a> . <a name="habracut"></a><br><br>  Proyek ini muncul terinspirasi oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tweet Kelsey Hightower</a> pada tahun 2015, di mana ia mengatakan bahwa kami hanya harus menunggu KubeOS bersyarat muncul (setelah itu kehidupan lingkungan yang berawan akhirnya akan indah): <br><br><img src="https://habrastorage.org/webt/ct/ve/hu/ctvehuwa-3w4mimsjrdkig-ick4.png"><br><br>  <i>Ngomong-ngomong, dengan munculnya Talos, cerita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini berlanjut</a> : seseorang menjawab tweet historis bahwa sistem semacam itu sudah muncul, dan penulis Talos mengatakan bahwa dia akan senang jika Kelsey melihat proyek tersebut.</i>  <i>Reaksi yang terakhir, bagaimanapun, belum diikuti.</i> <br><br>  Rupanya, pengembangan Talos dilakukan oleh satu orang <i>(mewakili dirinya dalam seluruh perusahaan - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Otonomi</a> )</i> - butuh lebih dari satu tahun.  Dan sekarang, ketika status ketersediaan minimum tercapai, penulis berharap bahwa perwakilan lain dari komunitas asli Kubernet / cloud akan bergabung dengannya.  Jadi apa inti dari proyek ini? <br><br><h2>  Prinsip dan Fitur Talos </h2><br>  Talos diposisikan sebagai distribusi Linux modern yang dibuat khusus (dan eksklusif!) Untuk Kubernetes.  Untuk mencapai tujuan dalam implementasinya, patuhi pendekatan berikut: <br><br><h3>  Minimalisme </h3><br>  Minimalisme di mana-mana adalah salah satu pilar arsitektur Talos.  Salah satu contoh mencolok di sini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layanan inisialisasi yang</a> digunakan, yang (bertentangan dengan tren modern di bidang ini) mengikuti filosofi UNIX bahwa "setiap program melakukan satu hal, tetapi baik": <br><br><blockquote>  Kami ingin membuat init fokus pada satu tugas - meluncurkan Kubernetes.  Ini sama sekali tidak memiliki mekanisme untuk tindakan lain. </blockquote><br>  Para pengembang melangkah lebih jauh dan merampas sistem operasi mereka dari akses pengguna ke host yang akrab dengan administrator sistem: <b>Talos tidak memiliki shell perintah, atau daemon SSH, atau bahkan kemampuan untuk memulai prosesnya sendiri</b> pada host.  Dan sungguh: mengapa semua ini jika Anda perlu menjalankan Kubernetes dan banyak lagi?  Hampir semua proses di Talos beroperasi dalam wadah. <br><br>  Namun, karena dunia tidak begitu sempurna (untuk OS berfungsi penuh "dengan sendirinya"), masih ada alat untuk mengoperasikan OS: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">osd</a> daemon, diimplementasikan pada prinsip menyediakan hak minimum yang diperlukan (Prinsip Least Privilege) dan menawarkan API (berdasarkan gRPC) untuk mengelola node; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Utilitas osctl</a> CLI memungkinkan Anda untuk berkomunikasi dengan layanan osd, yang berjalan pada setiap node. </li></ul><br>  Jadi, satu set kemampuan operasi dasar telah diimplementasikan: me-reboot layanan dan node cluster, menerima log kernel (dmesg) dan dari kontainer, memasukkan data ke file konfigurasi node, dll. <br><br>  Semua komponen ini (init, osd, osctl ...), serta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">beberapa yang lain</a> dalam kit distribusi, <b>ditulis dalam Go</b> .  Ngomong-ngomong, semua kode sumber didistribusikan di bawah ketentuan Open Source-license Mozilla Public License 2.0. <br><br><h3>  Keamanan </h3><br>  Pendekatan minimalis yang diuraikan di atas (semua yang diperlukan <b>hanya</b> untuk meluncurkan Kubernetes) + prinsip mengeluarkan hanya sedikit hak istimewa dengan sendirinya mengurangi permukaan serangan potensial.  Juga di Talos: <br><br><ul><li>  kernel yang disertakan dikonfigurasikan sesuai dengan rekomendasi Proyek Kernel Self Protection ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">KSSP</a> ), yang berfokus pada kemampuan kernel untuk secara independen melindungi terhadap potensi bug dan kerentanan (alih-alih menggunakan utilitas userspace untuk tujuan yang sama); </li><li>  sistem file root dipasang di read-only, yang - dikombinasikan dengan tidak adanya shell / SSH - membuat sistem tidak dapat diubah; </li><li>  menggunakan TLS dua arah (mTLS) untuk berinteraksi dengan API; </li><li>  Pengaturan dan konfigurasi Kubernetes diterapkan sesuai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pedoman CIS</a> (Pusat Keamanan Internet). </li></ul><br>  Keuntungan tambahan yang timbul dari minimalisme dan fokus pada kekekalan adalah <b>prediktabilitas</b> sistem dalam perilaku (karena jumlah faktor yang mempengaruhi lingkungan berkurang). <br><br><h3>  Relevansi </h3><br>  Para penulis berjanji untuk mendasarkan Talos pada rilis hulu dari Kubernet kedua dari belakang (namun, K8 1.13.3 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">didukung</a> saat ini) dan rilis kernel LTS Linux terbaru yang tersedia (sekarang menggunakan 4.19.10). <br><br><h3>  Komponen sistem </h3><br>  Komponen utama dari distribusi (selain utilitas kernel dan "proprietary") adalah: <br><br><ul><li>  musl-libc - sebagai pustaka C standar; </li><li>  golang - untuk <code>init</code> dan alat lainnya; </li><li>  gRPC - untuk API; </li><li>  containerd - untuk memulai layanan sistem dalam wadah (digunakan dengan plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CRI</a> untuk Kubernetes); </li><li>  kubeadm - untuk menyebarkan cluster. </li></ul><br><h2>  Bekerja dengan Talos </h2><br>  Contoh penggunaan talos untuk penyebaran AWS, KVM, dan Xen disediakan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi proyek</a> .  Untuk menggambarkan dengan cepat bagaimana ini terlihat, berikut adalah algoritma instalasi untuk mesin virtual Linux KVM: <br><br>  1. Menginstal master node pada host: <br><br><pre> <code class="bash hljs">docker run --rm --privileged --volume /dev:/dev \ autonomy/talos:latest image -b /dev/sdb -f -p bare-metal \ -u http://<span class="hljs-variable"><span class="hljs-variable">${IP}</span></span>:8080/master.yaml</code> </pre> <br>  2. Membuat VM: <br><br><pre> <code class="bash hljs">virt-install -n master --description <span class="hljs-string"><span class="hljs-string">"Kubernetes master node."</span></span> \ --os-type=Linux --os-variant=generic --virt-type=kvm --cpu=host \ --vcpus=2 --ram=4096 --disk path=/dev/sdb \ --network bridge=br0,model=e1000,mac=52:54:00:A8:4C:E1 \ --graphics none --boot hd --rng /dev/random</code> </pre> <br>  3. Tindakan serupa untuk membuat simpul kerja: <br><br><pre> <code class="bash hljs">docker run --rm --privileged --volume /dev:/dev \ autonomy/talos:latest image -b /dev/sdc -f -p bare-metal \ -u http://<span class="hljs-variable"><span class="hljs-variable">${IP}</span></span>:8080/worker.yaml virt-install -n master --description <span class="hljs-string"><span class="hljs-string">"Kubernetes worker node."</span></span> \ --os-type=Linux --os-variant=generic --virt-type=kvm --cpu=host \ --vcpus=2 --ram=4096 --disk path=/dev/sdc \ --network bridge=br0,model=e1000,mac=52:54:00:B9:5D:F2 \ --graphics none --boot hd --rng /dev/random</code> </pre> <br>  Konfigurasi interaksi antara osd dan osctl pada dasarnya bermuara pada menghasilkan kunci untuk otentikasi mereka (sudah disebutkan mTLS) dan dijelaskan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Pekerjaan lebih lanjut dengan mereka datang ke perintah-perintah seperti <code>osctl reboot</code> <code>osctl stats</code> , <code>osctl stats</code> <code>osctl logs</code> dan <code>osctl logs</code> .  Demonstrasi output kontainer di namespace <code>k8s.io</code> : <br><br><pre> <code class="bash hljs">$ osctl ps -k NAMESPACE ID IMAGE PID STATUS k8s.io 0ca1… sha256:da86… 2341 RUNNING k8s.io 356f… sha256:da86… 2342 RUNNING … k8s.io e42e… sha256:4ff8… 2508 RUNNING k8s.io kubelet k8s.gcr.io/… 2068 RUNNING</code> </pre> <br>  Proses mengkonfigurasi cluster Kubernetes dengan Talos tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> (mater node) dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> (pekerja). <br><br><h2>  Status dan Prospek </h2><br>  Proyek ini dalam tahap versi alfa (rilis terbaru adalah <a href="">v0.1.0-alpha.18</a> ) dan, tentu saja, pada tahap ini terlihat lebih seperti percobaan yang menarik daripada apa pun yang benar-benar dekat dengan produksi. <br><br>  Namun, gelombang minat pada Talos setelah pengumumannya baru-baru ini (sudah lebih dari 600 bintang di GitHub) dan panggilan satu-satunya penulis untuk kreativitas bersama dapat berfungsi sebagai insentif yang sangat baik untuk pengembangannya. <br><br><img src="https://habrastorage.org/webt/gw/tz/l2/gwtzl2ri3yoyt-1rculmaeloxxe.png"><br>  <i>Aktivitas proyek talos dalam beberapa hari terakhir</i> <br><br>  Paling tidak, distribusi berisi ide-ide asli cloud yang relevan dengan dunia, implementasi kualitas yang merupakan masalah waktu. <br><br><h2>  PS </h2><br>  Baca juga di blog kami: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AWS memperkenalkan Firecracker - virtualisasi mikro untuk Linux</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masa Lalu, Sekarang, dan Masa Depan Docker dan Lingkungan Kontainer Eksekusi Lainnya di Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Red Hat menggantikan Docker dengan Podman</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Distribusi Linux dari awal untuk membangun gambar Docker adalah pengalaman kami dengan dappdeps</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440810/">https://habr.com/ru/post/id440810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440800/index.html">Kali Linux 2019.1 dirilis</a></li>
<li><a href="../id440802/index.html">WearMouse, mouse udara untuk jam tangan Wear OS</a></li>
<li><a href="../id440804/index.html">Opsi kloning DB untuk pengembangan / pengujian</a></li>
<li><a href="../id440806/index.html">Dark Mobile on CodeFest: fungsional Swift, kesalahpahaman, Clean Architecture, dan #Of courseZheKotlin</a></li>
<li><a href="../id440808/index.html">TDE di Apache Ignite: Kisah Fitur Utama dalam Proyek Open Source Besar</a></li>
<li><a href="../id440814/index.html">Sovereign LPWAN, Bagian 1: Perizinan dan Operasi Jaringan LPWAN di Rusia - Persyaratan Negara Baru Lama</a></li>
<li><a href="../id440816/index.html">Git dan pengembangan tim (untuk boneka)</a></li>
<li><a href="../id440818/index.html">Kami melakukan audit kesalahan</a></li>
<li><a href="../id440820/index.html">Kontrol dan kontrol lagi: perubahan arah magnetik karena tegangan pada Fe / BaTiO3</a></li>
<li><a href="../id440822/index.html">AI dalam bidang kedokteran: ilmu kehidupan dan penemuan obat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>