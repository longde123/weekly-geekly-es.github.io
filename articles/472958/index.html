<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äç‚öñÔ∏è ü§ó ü§∞üèæ C√≥mo crear programas de Windows en Arduino üòú üí§ üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una vez tuve la loca idea de traer 500 punteros l√°ser en un solo lugar . Pas√© mucho tiempo y lo hice. Result√≥ espectacular e in√∫til, pero me gust√≥. Ha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo crear programas de Windows en Arduino</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472958/"><img src="https://habrastorage.org/webt/h0/18/5r/h0185rgz8yxisaplqy5xszepqz4.jpeg"><br><br>  Una vez tuve la loca idea de traer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">500 punteros l√°ser en un solo lugar</a> .  Pas√© mucho tiempo y lo hice.  Result√≥ espectacular e in√∫til, pero me gust√≥.  Hace seis meses, se me ocurri√≥ otra idea loca.  Esta vez para nada espectacular, pero mucho m√°s √∫til.  Tambi√©n pas√© mucho tiempo en eso.  Y en este art√≠culo presento una versi√≥n beta de mi segunda idea loca. <br><a name="habracut"></a><br>  Llam√© al proyecto Nanonyam (Nanonyam) e incluso se me ocurri√≥ un logotipo (pint√© durante 5 minutos). <br><br><img src="https://habrastorage.org/webt/yv/nl/qq/yvnlqqsmhoywclwxrllblttqlg0.png"><br><br>  Para aquellos que piensan en t√©rminos de Arduino, podemos decir que Nanonyam es un escudo virtual de arduino para administrar Windows. <br><br>  En otras palabras, Nanonyam es una m√°quina virtual que utiliza firmware para el microcontrolador AVR como c√≥digo de bytes (se recomienda ATMEGA2560).  Dentro de esta m√°quina virtual est√° el simulador de kernel AVR, pero en lugar de dispositivos perif√©ricos ubicados en direcciones SRAM de 0x0060 a 0x01FF, hay una interfaz especial para funciones virtuales (incluidas las funciones API de Windows).  Y aqu√≠ es muy importante comprender de inmediato: el c√≥digo para Nanonyam no debe tener acceso al rango de memoria especificado, para no llamar accidentalmente, por ejemplo, la funci√≥n de eliminar archivos o formatear el disco.  El resto del rango de memoria SRAM de 0x0200 a 0xFFFF (esto es m√°s que en un microcontrolador real) est√° disponible para el usuario para cualquier prop√≥sito.  Noto de inmediato que existe una protecci√≥n especial contra el inicio accidental del firmware de un microcontrolador real (o firmware de una arquitectura diferente): antes de activar las funciones "peligrosas", debe llamar a una funci√≥n virtual dif√≠cil especial.  Hay algunas otras caracter√≠sticas de seguridad. <br><br>  Para crear programas para Nanonyam, debe utilizar bibliotecas especiales que implementen todas las funciones virtuales disponibles actualmente.  Puede descargar la m√°quina virtual Nanonyam y sus bibliotecas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Y aqu√≠ est√° la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√°gina para describir funciones virtuales</a> .  Y s√≠, mi sitio es muy primitivo y no est√° adaptado para dispositivos m√≥viles. <br><br>  <b>Nanonyam es gratuito para uso dom√©stico y comercial.</b>  <b>Nanonyam est√° "tal cual".</b>  <b>C√≥digo fuente no proporcionado.</b> <br><br>  Por el momento, el programa se encuentra en la fase de prueba.  Se han implementado unas 200 funciones virtuales que le permiten crear programas simples para Windows. <br>  Obviamente, crear algo complicado en una m√°quina virtual de este tipo no funcionar√°, ya que la memoria para el c√≥digo es de solo 256 kB.  Los datos se pueden almacenar en archivos separados, un b√∫fer para la parte gr√°fica se implementa externamente.  Todas las funciones est√°n simplificadas y adaptadas para la arquitectura de 8 bits. <br><br>  ¬øQu√© se puede hacer en Nanonyam?  Se me ocurrieron varias tareas. <br><br><h4>  Desarrollo de bloques de programa. </h4><br>  Una vez que necesitaba desarrollar un men√∫ complejo para una pantalla gr√°fica de 128x64 puntos.  Realmente no quer√≠a descargar constantemente el firmware en un microcontrolador real para ver c√≥mo se ven los p√≠xeles.  Entonces naci√≥ la idea de Nanonyam.  En la figura siguiente, la imagen de la pantalla OLED real de uno de los elementos de ese men√∫.  Ahora puedo resolverlo sin un dispositivo real. <br><br><img src="https://habrastorage.org/webt/e3/-d/he/e3-dhe9tty9m3qpt1ysa1d9_qxq.jpeg"><br><br>  Nanonyam (en su idea final) es una buena herramienta para resolver bloques de software para microcontroladores, ya que existen funciones para trabajar con gr√°ficos (puede simular pantallas e indicadores), con archivos (puede hacer registros, leer datos de prueba), con un teclado (puede leer hasta 10 botones al mismo tiempo), con puertos COM (aqu√≠ hay un elemento separado). <br><br><h4>  Crea programas r√°pidos </h4><br>  Por ejemplo, necesita procesar r√°pidamente 100,500 archivos de texto.  Todos deben abrirse, cambiarse ligeramente de acuerdo con alg√∫n algoritmo simple, guardarse y cerrarse.  Si eres un maestro de Python, te felicito, lo tienes todo.  Pero si usted es un trabajador arduino empedernido (y hay muchos de ellos), entonces Nanonyam lo ayudar√° a resolver este problema.  Este es exactamente mi segundo objetivo en Nanonyam: agregar muchas funciones √∫tiles, como procesamiento de textos, crear capturas de pantalla o simular pulsaciones de teclas en el sistema (esto, por cierto, ya existe), as√≠ como muchas otras funciones para resolver tareas rutinarias. <br><br><h4>  Prueba de gl√°ndulas a trav√©s del puerto COM </h4><br>  Nanonyam puede actuar como un terminal que funciona de acuerdo con su algoritmo.  Puede dibujar un peque√±o men√∫ para controlar el dispositivo y mostrar los datos recibidos desde el puerto.  Puede guardar y leer datos de archivos para su an√°lisis.  Una herramienta conveniente para la depuraci√≥n y calibraci√≥n simples de gl√°ndulas, as√≠ como para crear paneles de control de instrumentos virtuales simples.  Para estudiantes y j√≥venes cient√≠ficos, este proyecto puede ser muy √∫til. <br><br><h4>  Entrenamiento de programaci√≥n </h4><br>  Sin embargo, como con todo el proyecto Arduino, la utilidad principal de Nanonyam es la simplificaci√≥n de sus funciones, interfaz y gestor de arranque.  Por lo tanto, este proyecto deber√≠a ser de inter√©s para los programadores novatos y aquellos que est√°n satisfechos con el nivel de arduino.  Por cierto, yo todav√≠a no he estudiado arduino en detalle, ya que siempre us√© WinAVR o AVR Studio, pero comenc√© con el ensamblador.  Por lo tanto, el siguiente programa de ejemplo estar√° un poco mal, pero funcionar√° bastante. <br><br><h4>  Hola Habr! </h4><br>  Es hora de conocer algunas de las caracter√≠sticas de Nanonyam y escribir un programa simple.  Escribiremos en Arduino, pero no de la forma habitual, sino de la forma en que puedo hacerlo ahora (ya he dicho que no he tratado muy bien este entorno).  Primero, cree un nuevo boceto y seleccione el tablero Mega2560. <br><br><img src="https://habrastorage.org/webt/p8/oo/fd/p8oofdpzzycecncztkxkxtza7ku.jpeg"><br><br>  Guarde el boceto en un archivo y copie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la biblioteca Nanonyam cercana</a> .  Ser√≠a correcto incluir los encabezados de la biblioteca, pero no s√© c√≥mo escribir una compilaci√≥n de archivos individuales en Arduino, as√≠ que por ahora solo encienda las bibliotecas directamente (y todo a la vez): <br><br><pre><code class="plaintext hljs">#include &lt;stdio.h&gt; #include "Nanonyam\nN_System_lib.c" #include "Nanonyam\nN_Keyboard_lib.c" #include "Nanonyam\nN_File_lib.c" #include "Nanonyam\nN_Math_lib.c" #include "Nanonyam\nN_Text_lib.c" #include "Nanonyam\nN_Graphics_lib.c" #include "Nanonyam\nN_RS232_lib.c"</code> </pre> <br>  Ser√≠a a√∫n m√°s correcto hacer un m√≥dulo especial "Nanonyam for Arduino", que se puede instalar directamente desde Arduino.  Tan pronto como me ocupe de esto, lo har√©, pero por ahora solo mostrar√© la esencia de trabajar con una m√°quina virtual.  Escribimos el siguiente c√≥digo: <br><br><pre> <code class="plaintext hljs">//       void setup() { sys_Nanonyam();//    g_SetScreenSize(400,200);//   400200  sys_WindowSetText("Example");//  g_ConfigExternalFont(0,60,1,0,0,0,"Arial");//  Windows    0 g_SetExternalFont(0);//   0    g_SetBackRGB(0,0,255);//   g_SetTextRGB(255,255,0);//   g_ClearAll();//  (  ) g_DrawTextCenterX(0,400,70,"Hello, Habr!");//  g_Update();//     } //    void loop() { sys_Delay(100);//    }</code> </pre> <br>  Un boceto con este programa <a href="">se puede descargar aqu√≠</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Busque una</a> descripci√≥n detallada de las funciones <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el sitio</a> .  Espero que los comentarios en este c√≥digo sean suficientes para entender el punto.  Aqu√≠, la funci√≥n <b>sys_Nanonyam ()</b> desempe√±a el papel de una "contrase√±a" para la m√°quina virtual, lo que elimina las restricciones sobre las funciones virtuales.  Sin esta funci√≥n, el programa se cerrar√° despu√©s de 3 segundos de operaci√≥n. <br><br>  Haga clic en el bot√≥n "Verificar" y no deber√≠a haber errores. <br><br><img src="https://habrastorage.org/webt/oe/yj/ui/oeyjui5vz5oxhuss5oanfav0_me.jpeg"><br><br>  Ahora necesita obtener el archivo binario (firmware).  Seleccione el men√∫ " <i>Boceto &gt;&gt; Exportar archivo binario (CTRL + ALT + S)</i> ". <br><br><img src="https://habrastorage.org/webt/11/ny/wi/11nywi0-b49tetx7vnwrjkd3fvu.jpeg"><br><br>  En este caso, se copiar√°n dos archivos HEX a la carpeta con el boceto.  <b>Tomamos solo el archivo sin el prefijo "with_bootloader.mega".</b> <br><br>  Hay varias formas de especificar un archivo HEX para una m√°quina virtual Nanonyam, todas las cuales se describen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en esta p√°gina</a> .  Sugiero crear el archivo <i>Nanonyam.path</i> junto al archivo <i>Nanonyam.exe</i> , en el que escribir la ruta completa a nuestro archivo HEX.  Entonces puede ejecutar <i>Nanonyam.exe</i> .  Recibimos una ventana con nuestra inscripci√≥n. <br><br><img src="https://habrastorage.org/webt/xn/6z/m5/xn6zm55x-pcyccyim_vfljxl40w.jpeg"><br><br>  Del mismo modo, puede crear programas en otros entornos, por ejemplo, en AVR Studio o WinAVR. <br><br>  Aqu√≠ es donde terminamos el conocimiento de Nanonyam.  La idea b√°sica debe ser clara.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√°s ejemplos est√°n en el sitio</a> .  Si hay suficientes personas que desean utilizar este proyecto, har√© m√°s ejemplos y continuar√© "completando" las bibliotecas de funciones virtuales.  Se aceptan ideas concretas para el desarrollo del proyecto e informes sobre mal funcionamiento, errores y errores.  Es recomendable enviarlos a los contactos que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">figuran en el sitio</a> .  Una discusi√≥n es bienvenida en los comentarios. <br><br>  ¬°Gracias a todos por su atenci√≥n y buena programaci√≥n! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472958/">https://habr.com/ru/post/472958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472946/index.html">Un buen desarrollador es sabio, no brillante</a></li>
<li><a href="../472948/index.html">C√≥mo funciona FaceID en iPhone X: Algoritmo de Python</a></li>
<li><a href="../472950/index.html">10 formas de proteger la propiedad intelectual de una startup de TI</a></li>
<li><a href="../472954/index.html">Diagrama de Gantt vs tablero Kanban</a></li>
<li><a href="../472956/index.html">La historia de la construcci√≥n de un robot oruga</a></li>
<li><a href="../472960/index.html">La mejor lente de calidad / precio de Sony</a></li>
<li><a href="../472962/index.html">Publicaci√≥n de video: experimentos como una forma de visualizaci√≥n cient√≠fica</a></li>
<li><a href="../472964/index.html">Situaci√≥n: cada vez m√°s empresas de c√≥digo abierto est√°n cambiando las licencias: discutimos opiniones de expertos</a></li>
<li><a href="../472966/index.html">C√≥mo se ve el archivo zip y qu√© podemos hacer con √©l. Parte 2 - Descriptor de datos y compresi√≥n</a></li>
<li><a href="../472970/index.html">Cr√≠ticas al protocolo de Telegram y enfoques organizacionales. Parte 1, t√©cnica: la experiencia de escribir un cliente desde cero - TL, MT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>