<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßü üë©üèº‚Äçü§ù‚Äçüë®üèæ üï• Utilisation de passwordstore.org - Gestionnaire de mots de passe de style KISS üéè üçñ üêï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Dans cet article, je voudrais partager mon exp√©rience dans la configuration et l'utilisation d'un gestionnaire de mots de passe pour L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisation de passwordstore.org - Gestionnaire de mots de passe de style KISS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479540/"><p>  Bonjour √† tous.  Dans cet article, je voudrais partager mon exp√©rience dans la configuration et l'utilisation d'un gestionnaire de mots de passe pour Linux, et pas seulement pour sa simplicit√©, en utilisant les outils d√©j√† pr√©sents dans le syst√®me et la possibilit√© de travailler exclusivement √† partir de la console.  Plus pr√©cis√©ment, les probl√®mes li√©s √† la g√©n√©ration et au stockage de la cl√© secr√®te gpg, ainsi que la configuration de la collaboration entre pass, gpg, git, github et le navigateur, seront affect√©s.  Tout est sous Linux, Windows et Android. </p><a name="habracut"></a><br><h1 id="chto-eto-takoe-i-kak-ono-rabotaet">  Qu'est-ce que c'est et comment √ßa marche </h1><br><p>  Techniquement, pass est une liaison tr√®s simple sur GnuPG et git √©crite en bash.  Chaque mot de passe (et les informations associ√©es, telles que la connexion) sont stock√©s dans un fichier crypt√©.  La recherche du mot de passe souhait√© est effectu√©e par le nom du fichier, le cryptage - en utilisant GnuPG, la synchronisation entre les appareils - en utilisant git. </p><br><p>  En plus de la passe d'origine, il existe deux projets plus populaires compatibles avec celle-ci, ex√©cut√©s sous Windows: </p><br><ol><li>  <a href="https://github.com/IJHack/QtPass">QtPass</a> .  Une application graphique √©crite, comme vous pouvez le deviner, en Qt. </li><li>  <a href="https://github.com/gopasspw/gopass">Gopass</a> .  Une application en ligne de commande √©crite en go.  Sous Windows, je l'utilise.  Cependant, √† mon avis, les d√©veloppeurs ont commenc√© √† y ajouter trop de fonctionnalit√©s suppl√©mentaires, tout en abandonnant leur intuitivit√©. </li></ol><br><blockquote>  Le d√©veloppeur du pass est Jason Donenfeld, qui est √©galement l'auteur de WireGuard (impl√©mentations VPN bas√©es sur des normes de cryptographie modernes, "≈ìuvre d'art par rapport √† OpenVPN et IPSec" selon Linus Torvalds, qui <a href="http://lkml.iu.edu/hypermail/linux/kernel/1911.3/04056.html">est susceptible d'</a> appara√Ætre dans le noyau Linux 5.6). </blockquote><br><h1 id="sozdanie-sekretnogo-klyucha">  Cr√©ation de cl√© secr√®te </h1><br><p>  GnuPG - un syst√®me de cryptage et de signatures √©lectroniques.  Malgr√© les d√©fauts (par exemple, <a href="https://habr.com/ru/post/460827/">un article</a> critiquant le gpg), c'est la norme de facto depuis plus de 20 ans.  M√™me l'article sur le lien a du mal √† nommer un outil alternatif pour crypter les fichiers. </p><br><p>  Le processus de cr√©ation d'une cl√© secr√®te dans la console est d√©crit par exemple <a href="https://habr.com/ru/post/358182/">sur habr</a> , mais pourquoi ne pas le faire dans l'interface graphique?  Dans le projet KDE, ils ont cr√©√© une interface pour le GPG appel√©e <a href="https://kde.org/applications/utilities/org.kde.kleopatra">Kleopatra</a> .  Les utilisateurs de Linux le trouveront dans les d√©p√¥ts, et dans gpg4win, Kleopatra est pr√™t √† l'emploi. </p><br><p> Dans le menu, s√©lectionnez <code>File</code> - <code>New Key Pair</code> - <code>Create a personal OpenPGP key pair</code> . </p><br><p>  Saisissez le nom et l'e-mail.  Pas besoin de vous inqui√©ter de les changer √† l'avenir.  GPG vous permet d'ajouter librement un nouvel uid √† la cl√© et de supprimer ceux existants.  Si vous souhaitez signer vos validations git avec la cl√© cr√©√©e et voir les cases √† cocher "V√©rifi√©" en face d'eux, vous devez sp√©cifier un v√©ritable e-mail ayant le statut "confirm√©" dans votre compte github. </p><br><p>  Ensuite, cliquez sur <code>Advanced Settings</code> pour configurer les param√®tres cl√©s. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/73/_t/sf/73_tsfmk36_soxx0wybhhpmmlpa.png"></div><br><p>  Dans la section <code>Key Material</code> , s√©lectionnez <code>ECDSA/EdDSA</code> + <code>ECDH</code> .  Je pr√©f√®re ne pas utiliser l'algorithme RSA classique, mais bas√© sur les courbes elliptiques ed25519 / cv25519.  Leur principal avantage par rapport √† RSA du point de vue de l'utilisateur final est la plus petite taille de cl√© avec la m√™me puissance cryptographique.  Il est avanc√© que la cl√© ed25519 256 bits est √† peu pr√®s aussi puissante que la cl√© RSA 3072 bits.  Le seul avantage de ce dernier est sa forte pr√©valence, notamment dans les syst√®mes mat√©riels. </p><br><p>  Vous pouvez √©galement s√©lectionner les familles de courbes Brainpool et NIST dans le menu.  Cependant, ces derniers sont soup√ßonn√©s d'avoir une porte d√©rob√©e de la NSA, et les premiers ont √©galement des plaintes mineures.  Par cons√©quent, ed25519 et cv25519 propos√©s par le c√©l√®bre cryptographe Daniel Bernstein sont le meilleur choix. </p><br><blockquote>  Un fait int√©ressant: dans la norme d'authentification FIDO U2F (dont Google a activement particip√© au d√©veloppement), ce sont les courbes NIST qui sont utilis√©es.  De plus, par exemple, Android Keystore a son support, mais il n'y a pas de support pour ed25519.  Pourquoi est-ce arriv√©? </blockquote><p>  En cons√©quence, 2 sous-cl√©s sur les courbes elliptiques seront cr√©√©es.  L'un pour les signatures, l'autre pour le chiffrement, ce dont nous avons besoin.  GPG ne permet pas d'utiliser une sous-cl√© pour les deux, malgr√© le fait que cela soit algorithmiquement possible (il existe des fonctions correspondantes, par exemple, dans la biblioth√®que <code>libsodium</code> ). </p><br><p>  Si vous pr√©voyez d'utiliser cette cl√© pour travailler avec git, dans la section <code>Certificate Usage</code> du <code>Certificate Usage</code> , v√©rifiez les √©l√©ments de <code>Signing</code> et d' <code>Authentication</code> . </p><br><p>  √Ä l'√©tape suivante, il est propos√© de trouver un mot de passe avec lequel la cl√© sera prot√©g√©e.  √âtant donn√© que la cl√© sera utilis√©e pour crypter toutes les donn√©es du stockage, ce mot de passe est un mot de passe principal.  Il vaut la peine d'aborder son choix avec une p√©danterie particuli√®re. </p><br><h2 id="generaciya-master-parolya">  G√©n√©ration de mot de passe principal </h2><br><p>  Bien s√ªr, vous pouvez toujours g√©n√©rer une cha√Æne al√©atoire √† partir d'un nombre suffisant (par exemple 20) de caract√®res.  Cependant, il est presque impossible de se souvenir et difficile d'entrer sans erreurs, en particulier sur un smartphone.  Par cons√©quent, l'EFF recommande d'utiliser des phrases secr√®tes √† la place dans votre <a href="https://ssd.eff.org/en/module/creating-strong-passwords">guide</a> . </p><br><p>  La m√©thode fonctionne comme ceci: prenez un dictionnaire suffisamment grand (EFF propose plusieurs dictionnaires, par exemple <a href="https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt">celui-ci</a> ) et s√©lectionnez-en au moins 6 mots al√©atoires.  Vous pouvez choisir √† votre guise, m√™me sans ordinateur, en utilisant un d√© ou une pi√®ce.  Cette m√©thode est appel√©e <a href="http://world.std.com/~reinhold/diceware.html">diceware</a> .  Je n'ai pas encore atteint les d√©s et les pi√®ces, donc je vais simplement utiliser l'utilitaire <code>shuf</code> inclus avec GNU coreutils: </p><br><pre> <code class="plaintext hljs">$ shuf --random-source=/dev/random -n 6 ./eff_large_wordlist.txt 51345 rendering 24564 edging 65652 vivacious 31343 footprint 55261 snore 24436 earache</code> </pre> <br><p>  Nous enregistrons cette phrase secr√®te dans un endroit s√ªr en dehors de l'ordinateur. </p><br><p>  En cons√©quence, une cl√© secr√®te sera cr√©√©e.  Lorsque vous travaillez dans la console, vous devez souvent indiquer son empreinte digitale, il vaut la peine d'√©crire ce num√©ro. </p><br><p>  Vous pouvez maintenant configurer l'int√©gration de gpg et git. </p><br><h1 id="integraciya-gpg-git-i-github">  Int√©gration Gpg, Git et Github </h1><br><blockquote>  √Ä strictement parler, cet article est facultatif.  Le passe de stockage de mot de passe est juste un r√©pertoire avec des fichiers crypt√©s, ce qui signifie qu'il peut √™tre synchronis√© comme vous le souhaitez.  Google Drive, Yandex.Disk, etc.  etc.  Si vous ne souhaitez pas utiliser git, je vous conseille de faire attention √† <a href="https://github.com/syncthing/syncthing">Syncthing</a> .  Il s'agit d'un programme open source qui n√©cessite un minimum de param√®tres et transf√®re les fichiers directement entre les appareils sans les stocker sur des serveurs tiers. </blockquote><p>  En tant qu'h√©bergement git, personne ne prend la peine d'√©lever son propre serveur en mettant <a href="https://github.com/go-gitea/gitea">Gitea</a> , par exemple, cependant cela signifie le co√ªt de son support et ne garantit pas n√©cessairement une grande s√©curit√© et fiabilit√©.  Par cons√©quent, moi, ne d√©daignant pas d'utiliser les produits Microsoft, j'ai simplement cr√©√© un r√©f√©rentiel priv√© sur github. </p><br><p>  Le m√©canisme d'authentification standard dans git est via SSH.  Il est g√©n√©ralement entendu que cela n√©cessite une cl√© ssh sp√©ciale.  Cependant, il est possible, sans g√©n√©rer d'entit√©s inutiles, d'utiliser la cl√© gpg cr√©√©e √† l'√©tape pr√©c√©dente.  Pour que la cl√© gpg (plus pr√©cis√©ment, la sous-cl√©) soit utilis√©e par ssh, deux conditions doivent √™tre remplies: </p><br><ol><li>  il doit avoir le drapeau <code>A</code> - Authenticate d√©fini; </li><li>  son clavier doit √™tre √©crit dans le <code>~/.gnupg/sshcontrol</code> . </li></ol><br><p>  Le premier √©l√©ment est d√©j√† termin√©, et vous pouvez obtenir le clavier avec la commande </p><br><pre> <code class="plaintext hljs">gpg --list-secret-keys --with-keygrip 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7</code> </pre> <br><p>  Dans la sortie gpg, nous nous int√©ressons au clavier de la sous-cl√© <code>05B6641E23D720E87EE6A26020BAB214B842F2B7</code> ( <code>05B6641E23D720E87EE6A26020BAB214B842F2B7</code> ). </p><br><p>  Vous pouvez maintenant t√©l√©charger la cl√© publique sur github.  Acc√©dez √† la section <code>SSH and GPG keys</code> dans le <a href="https://github.com/settings/keys">profil</a> et s√©lectionnez <code>New SSH key</code> .  Dans la console, nous tapons </p><br><pre> <code class="plaintext hljs">$ gpg --export-ssh-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPfj81nennAoujvw1fLzGx9iED34zk5oDMYKuUcBq5wv openpgp:0x54068AC7</code> </pre> <br><p>  et copiez la cl√© ssh publique r√©sultante. </p><br><p>  Git peut signer des commits en utilisant gpg, et github le supporte.  Je pense que c'est une fonctionnalit√© utile pour la s√©curit√©.  Exporter la commande gpg de la cl√© publique </p><br><pre> <code class="plaintext hljs">$ gpg --export --armor 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 -----BEGIN PGP PUBLIC KEY BLOCK----- mDMEXcrHrBYJKwYBBAHaRw8BAQdA9+PzWd6ecCi6O/DV8vMbH2IQPfjOTmgMxgq5 RwGrnC+0G0hlbGxvIEhhYnIgPGZha2VAZW1haWwuY29tPoiQBBMWCAA4BQsJCAcC BhUKCQgLAgQWAgMBAh4BAheAFiEEBgnJ3+8aorON7brcwFRLVVQGiscFAl3WO2wC GyMACgkQwFRLVVQGiscg5AEAkh0a6OQS2CPiXq9bWB+wULHUGT6NYZhwZ3eUQCfH Zq0A/iFBJQkAZIFdqH84ksFbvv6K/LQy72NRJzK0tho6qFwHuDgEXcrHrBIKKwYB BAGXVQEFAQEHQEs6UVOtj5yMGxvRcMU577miH/Bh5kZWMJKHxsDBcXV4AwEIB4h4 BBgWCAAgFiEEBgnJ3+8aorON7brcwFRLVVQGiscFAl3Kx6wCGwwACgkQwFRLVVQG isea8wD/X5JSJW0PMu/KucytUZZo8obHa86/TUwH/8+xQ3+djuEBALugbQRmCIr5 /JYO7x5PNA0QYqhh7LIZ9nKYp0mhqpcO =dc89 -----END PGP PUBLIC KEY BLOCK-----</code> </pre> <br><p>  et copiez ce qui est arriv√© au <code>New GPG key</code> formulaire de <code>New GPG key</code> . <br>  Les autres actions sont sp√©cifiques √† votre syst√®me d'exploitation. </p><br><h2 id="integraciya-gpg-i-git-linux">  Int√©gration de gpg et git (linux) </h2><br><p>  Le client OpenSSH utilis√© par git peut recevoir des cl√©s de deux mani√®res: depuis le <code>~/.ssh</code> et via le socket cr√©√© par le d√©mon <code>ssh-agent</code> .  Ce dernier peut √™tre <code>gpg-agent</code> , que nous utiliserons.  Dans le fichier <code>~/.gnupg/gpg-agent.conf</code> vous devez √©crire la ligne <code>enable-ssh-support</code> . </p><br><p>  Red√©marrez gpg-agent avec la commande </p><br><pre> <code class="plaintext hljs">gpg-connect-agent reloadagent /bye</code> </pre> <br><p>  Apr√®s cela, il cr√©era un socket √† </p><br><pre> <code class="plaintext hljs">${XDG_RUNTIME_DIR}/gnupg/S.gpg-agent.ssh</code> </pre> <br><p>  Ce chemin (cela peut d√©pendre de la distribution) doit √™tre √©crit dans la variable d'environnement <code>$SSH_AUTH_SOCK</code> , et ssh le r√©cup√©rera.  On tape la commande dans la console </p><br><pre> <code class="plaintext hljs">ssh -T git@github.com</code> </pre> <br><p>  et si tout s'est bien pass√©, apr√®s avoir entr√© le mot de passe principal, un message sur l'authentification r√©ussie appara√Ætra. </p><br><h2 id="integraciya-gpg-i-git-windows">  Int√©gration de gpg et git (Windows) </h2><br><p>  Plus r√©cemment, Microsoft a ajout√© OpenSSH au nombre de composants Windows disponibles pour l'installation et a √©galement impl√©ment√© la prise en charge de sockets tels que <code>AF_UNIX</code> , tels que le m√™me <code>SSH_AUTH_SOCK</code> .  Cependant, Win32-OpenSSH n'est pas en mesure d'interagir avec gpg4win, car il n'utilise toujours que des canaux nomm√©s. </p><br><p>  Par cons√©quent, vous devez installer le Evergreen Putty.  Nous √©crivons dans le fichier </p><br><pre> <code class="plaintext hljs">~/AppData/Roaming/gnupg/gpg-agent.conf</code> </pre> <br><p>  <code>enable-putty-support</code> et red√©marrez gpg-agent.  Apr√®s cela, il commencera √† faire semblant d'√™tre Pageant - le d√©mon des cl√©s.  Le fichier <code>sshcontrol</code> doit se trouver dans le m√™me dossier. </p><br><p>  Pour que le client git commence √† utiliser putty, vous devez cr√©er la <code>GIT_SSH</code> environnement <code>GIT_SSH</code> avec le chemin d'acc√®s √† <code>plink.exe</code> .  Par exemple, j'ai cette </p><br><pre> <code class="plaintext hljs">C:\ProgramData\chocolatey\bin\PLINK.EXE</code> </pre> <br><blockquote>  √Ä propos de git.  Le client <code>git for windows</code> habituellement install√© contient beaucoup de inutiles (au moins inutiles pour que gopass fonctionne), par exemple, sa propre impl√©mentation d'OpenSSH.  Cependant, ses d√©veloppeurs font des versions plus l√©g√®res qui peuvent √™tre t√©l√©charg√©es <a href="https://github.com/git-for-windows/git/releases">sur github</a> .  Par exemple, le MinGit est 2 fois plus petit et les personnes √† risque peuvent essayer MinGit-busybox.  La version busybox est n√©e du d√©sir des d√©veloppeurs de cr√©er un client git en utilisant l'API Win32 sans couches comme MSYS2.  Cependant, selon leurs propres critiques, mingit-busybox contient encore beaucoup de bugs.  Vous pouvez en savoir plus sur ces efforts dans le <a href="https://github.com/git-for-windows/git/issues/1439">ticket</a> . </blockquote><p>  Assurez-vous que gpg-agent est en cours d'ex√©cution ( <code>gpg-connect-agent /bye</code> ) et v√©rifiez la connexion √† github: </p><br><pre> <code class="plaintext hljs">plink git@github.com</code> </pre> <br><h2 id="nastroyka-git">  Configuration de Git </h2><br><p>  Rien d'inhabituel ici.  Je pense que les commandes peuvent √™tre donn√©es sans commentaire: </p><br><pre> <code class="plaintext hljs">git config --global user.name "Hello Habr" git config --global user.email fake@email.com git config --global user.signingKey 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 git config --global gpg.program /usr/bin/gpg git config --global commit.gpgSign true</code> </pre> <br><p>  L'√©l√©ment <code>gpg.program</code> n√©cessaire si gpg n'est pas dans le <code>PATH</code> . </p><br><h1 id="bekap-sekretnogo-klyucha">  Sauvegarde de cl√© secr√®te </h1><br><p>  La cl√© secr√®te doit √™tre stock√©e de mani√®re aussi s√©curis√©e que la phrase secr√®te, c'est-√†-dire √† l'ext√©rieur de l'ordinateur.  Vous pouvez simplement imprimer une longue s√©quence de chiffres, mais la reconna√Ætre ou saisir √† partir du clavier - ce n'est pas pour les faibles de c≈ìur.  Par cons√©quent, je pr√©f√®re g√©n√©rer un code QR facile √† num√©riser avec n'importe quel smartphone.  Il existe un programme <code>qrencode</code> sp√©cial pour <code>qrencode</code> .  Une image de code QR est g√©n√©r√©e comme suit: </p><br><pre> <code class="plaintext hljs">gpg --export-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 | qrencode --8bit --output secret-key.qr.png</code> </pre> <br><p>  Bien s√ªr, moins il y a d'informations inutiles dans la sauvegarde, mieux c'est.  Ici, une tr√®s petite taille de cl√© est ed25519.  Merci √† Daniel Bernstein! </p><br><p>  Il existe un utilitaire <a href="http://www.jabberwocky.com/software/paperkey/">paperkey</a> sp√©cial qui vous permet de r√©duire la quantit√© de donn√©es √† la limite.  Le prix de la r√©duction est que la cl√© secr√®te d'une telle sauvegarde ne peut √™tre restaur√©e que si elle est publique.  L'√©cosyst√®me GPG dispose de serveurs sp√©ciaux pour le stockage des cl√©s publiques; vous pouvez les lire et pas seulement dans l'article <a href="https://eax.me/gpg/">https://eax.me/gpg/</a> . </p><br><p>  Une sauvegarde paperkey est cr√©√©e comme suit: </p><br><pre> <code class="plaintext hljs">gpg --export-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 &gt; pubkey.asc gpg --export-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7 | paperkey --output-type raw | qrencode --8bit --output secret-key.qr.png</code> </pre> <br><p>  La deuxi√®me r√®gle de la sauvegarde: la sauvegarde n'existe pas tant que la capacit√© de restaurer des donn√©es √† partir de celle-ci n'est pas confirm√©e.  Par cons√©quent, nous effectuons un test de r√©sistance.  Supprimez la cl√© secr√®te avec la commande </p><br><pre> <code class="plaintext hljs">gpg --delete-secret-key 0609C9DFEF1AA2B38DEDBADCC0544B5554068AC7</code> </pre> <br><p>  Ensuite, nous scannons le code QR et r√©importons la cl√© dans le GPG.  En tant que scanner de code QR pour Android, j'aime <a href="https://github.com/markusfisch/BinaryEye">BinaryEye</a> , un programme gratuit avec une interface conviviale.  Dans l'image ci-dessous - sauvegarde de la cl√© secr√®te de cet article. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ej/xv/un/ejxvunen3dhkjbktvla6clwajjm.png"></div><br><pre> <code class="plaintext hljs">paperkey --pubring pubkey.asc --secrets from_qr.asc &gt; secretkey.asc gpg --import ./secretkey.asc</code> </pre> <br><p>  J'esp√®re que vous n'utiliserez cette cl√© nulle part.  Il est cr√©√© √† des fins d'illustration uniquement. </p><br><p>  Si tout fonctionne, vous pouvez continuer. </p><br><h1 id="ispolzovanie-gopass">  Utiliser (go) pass </h1><br><p>  Maintenant que nous avons une cl√© priv√©e stock√©e et s√©curis√©e, ainsi qu'une int√©gration fonctionnelle avec git, nous pouvons commencer √† utiliser le pass lui-m√™me.  Je pr√©f√®re le gopass, car cette liaison alternative fonctionne sous Windows. <br>  Initialiser le stockage des mots de passe avec la commande </p><br><pre> <code class="plaintext hljs">gopass init</code> </pre> <br><p>  et s√©lectionnez la cl√© secr√®te souhait√©e dans la liste. </p><br><p>  Travailler avec git se fait de la m√™me mani√®re que dans le cas d'un r√©f√©rentiel normal, seule la ligne de commande doit ajouter <code>(go)pass</code> .  Nous initialisons le r√©f√©rentiel et y ajoutons l'origine souhait√©e: </p><br><pre> <code class="plaintext hljs">gopass git init gopass git remote add origin git@github.com:xxx/taisho-secrets.git</code> </pre> <br><p>  L'adresse peut √™tre trouv√©e sur la page du r√©f√©rentiel sur github en cliquant sur le bouton <code>Clone or download</code> . </p><br><p>  Gopass a une commande sp√©cifique </p><br><pre> <code class="plaintext hljs">gopass sync</code> </pre> <br><p>  effectuer √† la fois <code>git pull</code> et <code>git push</code> , c'est-√†-dire une synchronisation compl√®te. </p><br><p>  Le stockage par d√©faut est cr√©√© dans le dossier <code>~/.password-store</code> , mais vous pouvez √©galement sp√©cifier votre propre chemin. <br>  Pour travailler avec des mots de passe, la console prend en charge les commandes ls, cp, mv, search, create, etc.  Vous pouvez obtenir la liste compl√®te en tapant <code>gopass --help</code> , mais personnellement, je n'utilise pas la console, mais le plugin du navigateur 95% du temps. </p><br><h2 id="integraciya-s-brauzerom">  Int√©gration du navigateur </h2><br><p>  Le plugin du navigateur s'appelle <a href="https://github.com/gopasspw/gopassbridge">gopass bridge</a> , il peut √™tre trouv√© dans la boutique Chrome et Firefox (voir lien). </p><br><p>  Pour connecter le plugin avec gopass lui-m√™me, vous aurez besoin d'un script auxiliaire et d'un manifeste pour la messagerie native.  Ils sont cr√©√©s par l'√©quipe. </p><br><pre> <code class="plaintext hljs">gopass jsonapi configure</code> </pre> <br><p>  qui nous proposera de choisir un navigateur et un emplacement de script. </p><br><p>  V√©rifiez comment tout fonctionne.  Cr√©ez un nouveau mot de passe: </p><br><pre> <code class="plaintext hljs">gopass new habr</code> </pre> <br><p>  Nous r√©pondons √† toutes les questions et √©conomisons.  GPG vous demandera d'entrer un mot de passe principal pour travailler avec la cl√© priv√©e. </p><br><p>  Maintenant, nous ouvrons le menu du plugin avec un gopher bleu caract√©ristique, et si tout s'est bien pass√©, nous pouvons y trouver notre mot de passe. </p><br><h2 id="totp-klyuchi">  Cl√©s TOTP </h2><br><p>  Personnellement, j'utilise <a href="https://freeotp.github.io/">FreeOTP</a> , cependant, vous pouvez travailler avec ces cl√©s en utilisant pass.  Les utilisateurs de la passe d'origine doivent installer l' <a href="https://github.com/tadfisher/pass-otp">extension pass-otp</a> , et dans gopass et APS (voir ci-dessous) les fonctions n√©cessaires sont pr√™tes √† l'emploi. </p><br><p>  Pour ajouter une cl√© TOTP au magasin de mots de passe √† l'aide de pass-otp, nous obtenons l'URL (commen√ßant par <code>otpauth://</code> ) et <code>otpauth://</code> la commande </p><br><pre> <code class="plaintext hljs">pass otp insert totp-secret</code> </pre> <br><p>  Que l'authentification r√©sultante puisse √™tre appel√©e √† deux facteurs est un point discutable.  Les d√©veloppeurs de KeePassXC recommandent de stocker les cl√©s TOTP dans une base de donn√©es distincte prot√©g√©e par un mot de passe diff√©rent.  Au passage, cela peut aussi se faire. </p><br><h1 id="integraciya-s-android">  Int√©gration Android </h1><br><p>  L'impl√©mentation de GnuPG pour Android s'appelle <a href="https://github.com/open-keychain/open-keychain">OpenKeychain</a> .  Pour le configurer, il suffit d'aller dans le menu "gestion des cl√©s" et d'importer la cl√© secr√®te pr√©c√©demment cr√©√©e.  Le seul inconv√©nient d'OpenKeychain pour moi personnellement est qu'il n'y a pas de d√©verrouillage par empreinte digitale. </p><br><p>  L'impl√©mentation du pass pour Android est appel√©e <a href="https://github.com/android-password-store/Android-Password-Store">android-password-store</a> , ou simplement APS. </p><br><p>  Installez et ex√©cutez APS.  Avant de synchroniser le stockage des mots de passe, allez dans le menu "Param√®tres".  L√†, nous aurons besoin des √©l√©ments suivants: </p><br><ol><li>  <code>  git</code> .  L'URL r√©sultante doit √™tre la m√™me que celle sp√©cifi√©e sur la page du r√©f√©rentiel sur github.  Type d'autorisation - <code>OpenKeychain</code> . </li><li>  <code>Git utils</code> .  Dans cette section, sp√©cifiez le nom d'utilisateur et l'adresse e-mail √† partir de la cl√© gpg. </li><li>  <code> OpenPGP</code> .  S√©lectionnez <code>OpenKeychain</code> . </li><li>  <code></code>  Cette fonctionnalit√© apparue le plus r√©cemment comprend le remplissage des mots de passe dans les applications sur Android 8.0+. </li></ol><br><blockquote>  Remarque pour les utilisateurs de smartphones Huawei et tout le monde √©galement: OpenKeychain, APS, BinaryEye, FreeOTP, ainsi que Syncthing, Telegram, Tachiyomi, KDE Connect, et bien plus encore sont disponibles dans <a href="https://f-droid.org/">F-Droid</a> .  Les utilisateurs de Google Play devraient l'appr√©cier: un catalogue de logiciels sans publicit√©, rootkits ou simplement logiciel ind√©sirable du <a href="https://habr.com/ru/post/423889/">c√©l√®bre article tonsky</a> . <br><br>  Avant la saisie semi-automatique dans APS, j'ai utilis√© <a href="https://github.com/PhilippC/keepass2android">keepass2android</a> .  Il n'est pas dans F-Droid pour la raison d'origine: il est √©crit en Xamarin, mais les responsables de F-Droid <a href="https://gitlab.com/fdroid/fdroiddata/issues/1529">n'ont</a> pas pu installer ce framework sur leur serveur de build <a href="https://gitlab.com/fdroid/fdroiddata/issues/1529">depuis 9 mois maintenant</a> .  Quelqu'un fait quelque chose. </blockquote><p>  Vous pouvez maintenant cloner.  Sur l'√©cran principal, s√©lectionnez "cloner √† partir du serveur", sp√©cifiez l'emplacement souhait√© du r√©f√©rentiel, v√©rifiez les param√®tres git. </p><br><p>  Si une tentative de travailler avec git entra√Æne une erreur (c'√©tait probablement dans les versions pr√©c√©dentes d'APS en raison de l'utilisation d'une version obsol√®te de la biblioth√®que <code>jgit</code> du projet Eclipse), alors il y a toujours Syncthing. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Bien s√ªr, pass n'est pas si facile √† configurer.  Cependant, pour ce prix, vous pouvez √™tre s√ªr que les outils que nous utilisons (ainsi que des personnes comme Linus Torvalds ou Edward Snowden) ne seront pas obsol√®tes √† un moment donn√©, ne changeront pas le format des donn√©es et ne seront pas sans support.  Et s'ils le font, l'architecture modulaire simple de pass encourage la cr√©ation de clients et d'extensions alternatifs. </p><br><p>  Si vous d√©cidez de ne pas utiliser pass, j'esp√®re que certains des programmes mentionn√©s dans l'article vous seront utiles par eux-m√™mes. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr479540/">https://habr.com/ru/post/fr479540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr479524/index.html">Service pour Active Restore ou l'histoire d'un projet industriel √† Innopolis</a></li>
<li><a href="../fr479530/index.html">Syst√®me de coordonn√©es ultrasonique 2.0</a></li>
<li><a href="../fr479534/index.html">Kubernetes 1.17 - Comment mettre √† niveau et ne pas d√©penser tout le budget d'erreur</a></li>
<li><a href="../fr479536/index.html">√âquilibrage de charge dans Zimbra Open-Source Edition avec HAProxy</a></li>
<li><a href="../fr479538/index.html">La technologie entra√Æne le d√©clin de l'humanit√©. Il est temps de changer quelque chose</a></li>
<li><a href="../fr479542/index.html">Comment √©crire votre propre translitt√©rateur</a></li>
<li><a href="../fr479548/index.html">Le chemin des stages aux performances √† HighLoad 2019</a></li>
<li><a href="../fr479550/index.html">MVC dans Unity avec des objets scriptables. 3e partie</a></li>
<li><a href="../fr479552/index.html">Les ing√©nieurs DevOps n'existent pas. Qui existe alors et que faire √† ce sujet?</a></li>
<li><a href="../fr479554/index.html">Contre tout le monde: assistants vocaux int√©gr√©s √† l'application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>