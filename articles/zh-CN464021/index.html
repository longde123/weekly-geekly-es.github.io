<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙅🏿 👩🏻 👘 什么是功能切换？如何摆脱繁琐的海象和寿命长的分支？ 💵 ☪️ 👩🏼‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="假设您想开发一个新功能，但是不确定用户是否会喜欢它，那么您需要一种可以轻松隐藏它的方法。 或者假设您正在开发一项新的重要功能，并且希望避免怪物犯下的罪行。 或者，您只想使网站的行为易于配置。 我该如何解决所有这些问题，请仔细阅读。 

 问题 
 想象一下，您的团队的开发周期持续了两个星期，而实施一...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>什么是功能切换？如何摆脱繁琐的海象和寿命长的分支？</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464021/"> 假设您想开发一个新功能，但是不确定用户是否会喜欢它，那么您需要一种可以轻松隐藏它的方法。 或者假设您正在开发一项新的重要功能，并且希望避免怪物犯下的罪行。 或者，您只想使网站的行为易于配置。 我该如何解决所有这些问题，请仔细阅读。 <br><a name="habracut"></a><br><h3> 问题 </h3><br> 想象一下，您的团队的开发周期持续了两个星期，而实施一项新功能将需要团队进行3个月的开发。 乍看之下，有两种可能的行动方案： <br><br><ul><li> 创建一个单独的分支，并在其中进行所有工作三个月，并定期从父分支进行拉动 <br></li><li> 使用持续集成的概念（简称<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Continuous Integration或CI</a> ）：分解任务并将代码分成小部分冻结 <br></li></ul><br> 这两种方法都有其明显的优缺点： <br><br><div class="scrollable-table"><table><tbody><tr><th></th><th> 优势优势 </th><th> 缺点 <img src="https://habrastorage.org/webt/rm/hk/at/rmhkatlixr1hxispxenca2gtihc.png" width="30" height="30"></th></tr><tr><th> 长寿的分支 </th><td> 您未准备好的功能的代码将不在父分支中，并且不会为其他开发人员所困扰 </td><td><ul><li> 您需要解决的永久合并冲突 </li><li> 可怕的请求不适合进行代码审查 </li></ul><br></td></tr><tr><th> 来自分支机构的许多短命提交 </th><td> 任务可以很好地分解和冻结；无需解决合并冲突 </td><td> 您未准备好的功能将使其他开发人员感到不安，并可能在UI上引起第三方影响 </td></tr></tbody></table></div><br><h3> 使用功能切换器解决问题 </h3><br> 这个问题在开发中很常见，并且有一个优雅的解决方案，使您可以从上述方法中最好地使用- <b>功能切换</b>或<b>功能切换器</b> 。 <br><br> 本质上，功能切换器是一个布尔标志，它存储在数据库中，并包含有关是否应启用功能的信息。 可以通过键从数据库中检索此标志的值。 使用功能切换器的方便之处在于，企业用户可以在运行时通过管理面板轻松更改功能切换器，而不必重新部署应用程序。 <br><br> 以下是在Java中使用功能切换的示例： <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (configurationManager.getParameter(<span class="hljs-string"><span class="hljs-string">"is.some.functionality.enabled"</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">// do some stuff } else { // do default logic }</span></span></code> </pre> <br> 在上面的示例中， <i>configurationManager</i>是一个类，该类使您可以通过其键从数据库中检索特定功能切换器的值。 <br><br> 另外，借助功能切换器，您可以在前端显示/隐藏某些元素。 为此，您需要将标志值放入Model并将其传递给View，如下所示： <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ModelAttribute</span></span>(<span class="hljs-string"><span class="hljs-string">"isSomeFunctionalityEnabled"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isSomeFunctionalityEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> configurationManager.getParameter(<span class="hljs-string"><span class="hljs-string">"is.some.functionality.enabled"</span></span>); }</code> </pre><br> 然后使用传递的值来呈现此或该HTML代码： <br><br><pre> <code class="plaintext hljs">&lt;c:choose&gt; &lt;c:when test="${isSomeFunctionalityEnabled}"&gt; &lt;!-- Render some stuff --&gt; &lt;/c:when&gt; &lt;c:otherwise&gt; &lt;!-- Render some other stuff --&gt; &lt;/c:otherwise&gt; &lt;/c:choose&gt;</code> </pre><br><h3> 功能切换器的类型 </h3><br> 所描述的使用功能切换器的概念仅仅是一种可能的用例，这种功能切换器称为释放触发器。 总共可以区分3种不同类型的功能切换器： <br><br><ul><li>  <b>发行切换</b> -允许您在开发过程中隐藏未<b>完全</b>实现的功能 </li><li>  <b>实验</b>开关-用于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">A / B测试的</a>开关 </li><li>  <b>许可切换</b> -各种用户组的<b>开</b> /关<b>功能</b> </li></ul><br> 因此，使用功能切换器，可以使用不同的数据库和不同的功能切换器集，在同一代码库上构建站点的两个不同版本。 例如，在一个欧洲站点上，包括与GDPR相关的所有功能是有意义的，但是在俄语站点上，您不能这样做。 <br><br><img src="https://habrastorage.org/webt/jv/bb/y7/jvbby79ujnc1jaovvj-890zmmgo.png"><br><br><h2> 使用功能切换时出现问题 </h2><br> 由于我从事的项目积极使用功能切换，因此除了使用它们的明显优势外，我开始注意到与之相关的问题： <br><br><ul><li>  <b>测试复杂性</b> ：发布新版本时，质量检查工程师会测试其中包含的所有功能，并尝试使用功能切换器将其打开和关闭。 这需要很多额外的时间，因为建议测试所有类型的标志组合 </li><li> 无效<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a>的出现</b> ：许多功能切换的值不会长时间更改或完全不更改，因此为不同标志值编写的代码实际上变为“无效” </li><li>  <b>意外的站点故障</b> ：许多过时的功能切换器具有不幸的特性，即在更改其值时会破坏某些内容（因为没有人长期以来一直在验证它们是否起作用）。 由于功能切换器存储在数据库中，并且可由业务用户从管理面板轻松更改，因此，由于其值的更改，经常会发生故障。 长期未使用的功能切换器的性能应首先在测试环境中进行检查 </li></ul><br><h3> 解决上述某些问题的方法 </h3><br> 以下操作可以帮助解决上述问题： <br><br><ul><li>  <b>可用功能切换器的文档：</b>为了了解特定功能切换的效果以及通过什么键在数据库中搜索它，您应该创建描述所有功能切换器的详细文档。 </li><li>  <b>定期修订功能切换器：</b>为避免出现无效代码，请定期删除过时的功能切换器和相关代码 </li></ul><br><h3> 总结 </h3><br>  <b>功能切换器</b>是一种非常简单且功能强大的机制，可让您避免使用巨大的提交，轻松更改应用程序行为或使用不同的功能切换配置在同一代码库上组装多个不同的应用程序。 <br><br> 但是，还应该记住，这种开发模式具有一些缺点，导致难以阅读和难以维护的代码，因此，应避免过度使用该模式，并定期记录功能切换器和修订版以删除未使用的功能切换器和修订版，结果，从“死”代码中清除项目。 <br><br><h3> 有用的链接 </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">马丁·福勒的博客</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">皮特·霍奇森的文章</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">没有维基百科的地方</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN464021/">https://habr.com/ru/post/zh-CN464021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN464011/index.html">我如何将IT留给心理学</a></li>
<li><a href="../zh-CN464013/index.html">HeadHunter API常见问题解答（职位发布）</a></li>
<li><a href="../zh-CN464015/index.html">在Windows上安装OpenCV + CUDA</a></li>
<li><a href="../zh-CN464017/index.html">基于PKCS＃11令牌的加密工作站。 获得EGAIS的证书。 第4部分</a></li>
<li><a href="../zh-CN464019/index.html">开源：图形卡开发人员透露了Linux驱动程序文档</a></li>
<li><a href="../zh-CN464023/index.html">设置免费课程的“编程基础”，并提供JavaScript示例</a></li>
<li><a href="../zh-CN464027/index.html">信息爆炸时代如何生存内容</a></li>
<li><a href="../zh-CN464031/index.html">“有声人的发现”：声卡可让您跳入陌生城市的氛围</a></li>
<li><a href="../zh-CN464037/index.html">来自OpenStreetMap 472世界的新闻（07/30/2019-05.08.2019）</a></li>
<li><a href="../zh-CN464039/index.html">神经网络和深度学习：在线教程，第6章，第2部分：图像识别的最新进展</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>