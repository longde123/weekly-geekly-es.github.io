<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÜ üë©üèæ‚Äçüî¨ üßïüèΩ Punto de referencia como base para decidir sobre un cambio de c√≥digo ‚§µÔ∏è üçü üßôüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bill Kennedy dijo en una conferencia sobre su maravilloso curso de programaci√≥n Ultimate Go : 
 Muchos desarrolladores buscan optimizar su c√≥digo. Tom...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Punto de referencia como base para decidir sobre un cambio de c√≥digo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438446/">  Bill Kennedy dijo en una conferencia sobre su maravilloso curso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">programaci√≥n Ultimate Go</a> : <br><blockquote>  Muchos desarrolladores buscan optimizar su c√≥digo.  Toman una l√≠nea y la reescriben, diciendo que esto ser√° m√°s r√°pido.  Necesito parar  Decir que este o aquel c√≥digo es m√°s r√°pido es posible solo despu√©s de que se perfila y se hacen puntos de referencia.  La adivinaci√≥n no es el enfoque correcto para escribir c√≥digo. </blockquote>  Hace tiempo que quer√≠a demostrar con un ejemplo pr√°ctico c√≥mo puede funcionar esto.  Y el otro d√≠a, me llam√≥ la atenci√≥n el siguiente c√≥digo, que podr√≠a usarse como ejemplo: <br><a name="habracut"></a><br><pre><code class="go hljs">builds := store.Instance.GetBuildsFromNumberToNumber(stageBuild.BuildNumber, lastBuild.BuildNumber) tempList := model.BuildsList{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(builds) - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i-- { b := builds[i] b.PatchURLs = b.ReversePatchURLs b.ExtractedSize = b.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(tempList, b) }</code> </pre> <br>  Aqu√≠, en todos los elementos del segmento de <i>compilaciones</i> devueltos desde la base de datos, <i>PatchURLs</i> se reemplaza por <i>ReversePatchURLs</i> , <i>ExtractedSize</i> por <i>RPatchExtractedSize</i> y se realiza el reverso: el orden de los elementos cambia para que el √∫ltimo elemento se convierta en el primero y el primero en el √∫ltimo. <br><br>  En mi opini√≥n, el c√≥digo fuente es un poco complicado de leer y puede optimizarse.  Este c√≥digo realiza un algoritmo simple que consta de dos partes l√≥gicas: cambiar elementos de corte y ordenar.  Pero para que el programador a√≠sle estos dos componentes, llevar√° tiempo. <br><br>  A pesar de que ambas partes son importantes, el c√≥digo inverso no est√° tan enfatizado como nos gustar√≠a.  Se dispersa a lo largo de tres l√≠neas separadas: inicializando una nueva divisi√≥n, iterando una divisi√≥n existente en orden inverso, agregando un elemento al final de una nueva divisi√≥n.  Sin embargo, uno no puede ignorar las ventajas indudables de este c√≥digo: el c√≥digo est√° funcionando y probado, y hablando objetivamente, es bastante adecuado.  La percepci√≥n subjetiva del c√≥digo por parte de un desarrollador individual no puede ser una excusa para reescribirlo.  Desafortunadamente o afortunadamente, no reescribimos el c√≥digo solo porque simplemente no nos gusta (o, como suele suceder, simplemente porque no es nuestro, ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fallo fatal</a> ). <br><br>  Pero, ¬øqu√© sucede si logramos no solo mejorar la percepci√≥n del c√≥digo, sino tambi√©n acelerarlo significativamente?  Este es un asunto completamente diferente.  Puede ofrecer varios algoritmos alternativos que realizan la funcionalidad integrada en el c√≥digo. <br><br>  Primera opci√≥n: iterar sobre todos los elementos en un bucle de <i>rango</i> ;  Para invertir el corte original en cada iteraci√≥n, agregue un elemento al principio de la matriz final.  Por lo tanto, podr√≠amos deshacernos de lo engorroso <i>de la</i> variable <i>i</i> , usar la funci√≥n <i>len</i> , es dif√≠cil percibir iterar sobre los elementos desde el final, y tambi√©n reducir la cantidad de c√≥digo en dos l√≠neas (de siete l√≠neas a cinco), y cuanto m√°s peque√±o sea el c√≥digo, menos probabilidades hay de permitirlo un error <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList []*store.Build <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>([]*store.Build{build}, tempList...) }</code> </pre><br>  Despu√©s de haber eliminado la enumeraci√≥n del segmento desde el final, distinguimos claramente entre las operaciones de cambio de elementos (tercera fila) y el reverso de la matriz original (cuarta fila). <br><br>  La idea principal de la segunda opci√≥n es explotar a√∫n m√°s la variaci√≥n de elementos y la clasificaci√≥n.  Primero, clasificamos los elementos y los cambiamos, y luego clasificamos el segmento por una operaci√≥n separada.  Este m√©todo requerir√° una implementaci√≥n adicional de la interfaz de clasificaci√≥n para el segmento, pero aumentar√° la legibilidad y separar√° por completo y aislar√° el reverso de los elementos cambiantes, y el m√©todo <i>Reverso</i> definitivamente le indicar√° al lector el resultado deseado. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList []*store.Build <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Sort(sort.Reverse(sort.IntSlice(keys)))</code> </pre><br>  La tercera opci√≥n es casi una repetici√≥n de la segunda, pero <i>sort.Slice se</i> usa para ordenar, lo que aumenta la cantidad de c√≥digo en una l√≠nea, pero evita la implementaci√≥n adicional de la interfaz de clasificaci√≥n. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Slice(builds, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds[i].Id &gt; builds[j].Id })</code> </pre><br>  A primera vista, en t√©rminos de complejidad interna, el n√∫mero de iteraciones, las funciones aplicadas, el c√≥digo inicial y el primer algoritmo est√°n cerca;  La segunda y la tercera opci√≥n pueden parecer m√°s dif√≠ciles, pero es imposible decir inequ√≠vocamente cu√°l de las cuatro opciones es la √≥ptima. <br><br>  Por lo tanto, nos prohibimos tomar decisiones basadas en suposiciones no respaldadas por evidencia, pero es obvio que lo m√°s interesante aqu√≠ es c√≥mo se comporta la funci√≥n append cuando se agrega un elemento al final y al comienzo del segmento.  Despu√©s de todo, de hecho, esta funci√≥n no es tan simple como parece. <br><br>  <i>Append</i> funciona de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">siguiente manera</a> : agrega un nuevo elemento al segmento existente si su capacidad es mayor que la longitud total, o reserva en la memoria un lugar para un nuevo segmento, copiando los datos del primer segmento, agregando los datos del segundo y devolviendo uno nuevo como resultado rebanada <br><br>  El matiz m√°s interesante en el trabajo de esta funci√≥n es el algoritmo utilizado para reservar memoria para una nueva matriz.  Dado que la operaci√≥n m√°s costosa es asignar una nueva pieza de memoria, los desarrolladores de Go hicieron un peque√±o truco para hacer que la operaci√≥n de <i>agregar sea</i> m√°s barata.  Al principio, para no volver a reservar la memoria cada vez que se agrega un elemento, la cantidad de memoria se asigna con un cierto margen, dos veces el original, pero despu√©s de un cierto n√∫mero de elementos, el tama√±o de la secci√≥n de memoria reci√©n reservada se convierte en no m√°s de dos veces, sino en un 25%. <br><br>  Dada la nueva comprensi√≥n de la funci√≥n <i>append, la</i> respuesta a la pregunta: "¬øQu√© ser√° m√°s r√°pido: agregar un elemento al final de un segmento existente o agregar un segmento existente a un segmento de un elemento?"  - Ya m√°s transparente.  Se puede suponer que en el segundo caso, en comparaci√≥n con el primero, habr√° m√°s asignaciones de memoria, lo que afectar√° directamente la velocidad del trabajo. <br><br>  As√≠ que nos acercamos sin problemas a los puntos de referencia.  Con la ayuda de puntos de referencia, puede evaluar la carga del algoritmo en los recursos m√°s cr√≠ticos, como el tiempo de ejecuci√≥n y la RAM. <br><br>  Escribamos un punto de referencia para evaluar nuestros cuatro algoritmos, al mismo tiempo evaluaremos qu√© crecimiento puede darnos el rechazo de la clasificaci√≥n (para comprender cu√°nto tiempo total se dedica a clasificar exactamente).  C√≥digo de referencia: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> services <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"testing"</span></span> <span class="hljs-string"><span class="hljs-string">"sort"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Build <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ExtractedSize <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PatchUrls <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ReversePatchUrls <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> RPatchExtractedSize <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Builds []*Build <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(a) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Swap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { a[i], a[j] = a[j], a[i] } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Builds)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Less</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a[i].Id &lt; a[j].Id } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Builds</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builds Builds <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100000</span></span>; i++ { builds = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(builds, &amp;Build{Id: i}) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList Builds <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(builds) - <span class="hljs-number"><span class="hljs-number">1</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i-- { b := builds[i] b.PatchUrls, b.ExtractedSize = b.ReversePatchUrls, b.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(tempList, b) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tempList Builds <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize tempList = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>([]*Build{build}, tempList...) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Sort(sort.Reverse(builds)) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF4</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } sort.Slice(builds, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, j </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builds[i].Id &gt; builds[j].Id }) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkF5</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *testing.B)</span></span></span></span> { data := prepare() builds := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(Builds, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data)) b.ResetTimer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bN; i++ { <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span>(builds, data) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, build := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> builds { build.PatchUrls, build.ExtractedSize = build.ReversePatchUrls, build.RPatchExtractedSize } } }</code> </pre><br>  Inicie el punto de referencia con el comando <i>go test -bench =.</i>  <i>-benchmem</i> . <br><br>  Los resultados de c√°lculo para los segmentos 10, 100, 1000, 10 000 y 100 000 elementos se presentan en el gr√°fico a continuaci√≥n, donde F1 es el algoritmo inicial, F2 es la adici√≥n del elemento al comienzo de la matriz, F3 es el uso de <i>sort.Reverse</i> to sort, F4 es el uso de <i>sort.Slice</i> , F5 - rechazo de la clasificaci√≥n. <br><br>  <i>Tiempo de operaci√≥n</i> <br><br><img src="https://habrastorage.org/webt/f_/i2/qp/f_i2qp8xvo7iqoj0k1noa9x1fii.png" alt="Tiempo de operaci√≥n"><br><br>  <i>N√∫mero de asignaciones de memoria</i> <br><br><img src="https://habrastorage.org/webt/vh/fk/lu/vhfkluqv8_spb0-hnd482kgxigm.png"><br><br>  Como puede ver en el gr√°fico, puede aumentar la matriz, pero el resultado final ya se puede distinguir en principio en una porci√≥n de 10 elementos.  <b>Ninguno de los algoritmos alternativos propuestos (F2, F3, F4) podr√≠a exceder el algoritmo original (F1) en velocidad.</b>  Incluso a pesar del hecho de que todos menos F2 tienen menos asignaciones de memoria que el original.  El primer algoritmo (F2) con la adici√≥n de un elemento al comienzo del segmento result√≥ ser el m√°s ineficiente: como se esperaba, tiene demasiadas asignaciones de memoria, tanto que es absolutamente imposible usarlo en el desarrollo de productos.  Un algoritmo que utiliza la funci√≥n de clasificaci√≥n inversa incorporada (F3) es significativamente m√°s lento que el original.  Y solo ordenar. El <i>algoritmo de</i> clasificaci√≥n de <i>corte</i> es comparable en velocidad al algoritmo original, pero es ligeramente inferior. <br><br>  Tambi√©n puede notar que negarse a ordenar (F5) da una aceleraci√≥n significativa.  Por lo tanto, si realmente desea reescribir el c√≥digo, puede ir en esta direcci√≥n, por ejemplo, elevando el segmento de <i>compilaciones</i> iniciales de la base de datos, utilice la clasificaci√≥n por ID DESC en lugar de ASC en la solicitud.  Pero al mismo tiempo, nos vemos obligados a ir m√°s all√° de los l√≠mites de la secci√≥n de c√≥digo considerada, lo que conlleva el riesgo de introducir m√∫ltiples cambios. <br><br><h3>  Conclusiones </h3><br>  Escribe puntos de referencia. <br><br>  Tiene poco sentido gastar su tiempo pensando si un c√≥digo en particular ser√° m√°s r√°pido.  La informaci√≥n de Internet, las opiniones de colegas y otras personas, sin importar cu√°n autorizadas puedan ser, pueden servir como argumentos auxiliares, pero el papel del juez principal, al decidir si es o no un nuevo algoritmo, debe permanecer con los puntos de referencia. <br><br>  Go es solo a primera vista un lenguaje bastante simple.  La regla integral de 80‚ÅÑ20 se aplica aqu√≠.  Este 20% representa las sutilezas de la estructura interna del lenguaje, cuyo conocimiento distingue al principiante del desarrollador experimentado.  La pr√°ctica de escribir puntos de referencia para resolver sus preguntas es una de las formas m√°s econ√≥micas y efectivas de obtener una respuesta y una comprensi√≥n m√°s profunda de la estructura interna y los principios del lenguaje Go. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/438446/">https://habr.com/ru/post/438446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../438430/index.html">Estoy atascado! O c√≥mo superar el efecto de meseta en el aprendizaje del ingl√©s</a></li>
<li><a href="../438434/index.html">Hacker Lab: P1. Bypass de autenticaci√≥n Libssh</a></li>
<li><a href="../438436/index.html">La idea de c√≥mo proporcionar a los empleados acceso temporal a los recursos del cliente sin volver a usar contrase√±as.</a></li>
<li><a href="../438438/index.html">Alimento para loros Bitrix. Probamos el rendimiento, seleccionamos hierro</a></li>
<li><a href="../438442/index.html">Reenv√≠o de solicitudes de Apache a Payara Server 5 en Ubuntu</a></li>
<li><a href="../438448/index.html">¬øQu√© PC Speaker es capaz de hacer?</a></li>
<li><a href="../438450/index.html">¬øPor qu√© la plantilla de pol√≠tica de privacidad no es adecuada para usted?</a></li>
<li><a href="../438454/index.html">OpenSceneGraph: Niveles de detalle (LOD) y carga de fondo de objetos</a></li>
<li><a href="../438456/index.html">Configuraci√≥n de inicio de sesi√≥n √∫nico en Zimbra Collaboration Suite</a></li>
<li><a href="../438458/index.html">La Conferencia DUMP 2019 se llevar√° a cabo el 19 de abril. Te invitamos a hablar en las secciones de Frontend, Backend y Ciencia.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>