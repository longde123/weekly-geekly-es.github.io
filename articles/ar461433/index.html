<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๏ธ ๐ฉ๐ผโโ๏ธ ๐ธ๐ผ ุจุงุณุชุฎุฏุงู ุฎุงุฏู ุงููููุฉ 4 ูู ุตุงูู ููุฑ 3.0 ๐ต๐พ ๐ซ ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 


 ูุงุฌู ุฃุญุฏ ูุดุงุฑูุนู ุงููุฏุนููุฉ ูุคุฎุฑูุง ูููุฉ ุชุญููู ุฅููุงููุฉ ุงูุชุฑุญูู ูู .NET Framework 4.5 ุฅูู .Net Core ูู ุญุงูุฉ ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุจูุงุก ูุชุฌููุน ูููุฉ ูุจ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุจุงุณุชุฎุฏุงู ุฎุงุฏู ุงููููุฉ 4 ูู ุตุงูู ููุฑ 3.0</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461433/" style=";text-align:right;direction:rtl"><h2 id="vvedenie" style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุงุฌู ุฃุญุฏ ูุดุงุฑูุนู ุงููุฏุนููุฉ ูุคุฎุฑูุง ูููุฉ ุชุญููู ุฅููุงููุฉ ุงูุชุฑุญูู ูู .NET Framework 4.5 ุฅูู .Net Core ูู ุญุงูุฉ ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุจูุงุก ูุชุฌููุน ูููุฉ ูุจูุฑุฉ ูู ุงูุฏููู ุงููููุฉ ุงููุชุฑุงููุฉ.  ููุน ุงูุงุฎุชูุงุฑ ุนูู ุงููุธุงู ุงูุฃุณุงุณู ุงููุฏู .NET Core 3.0 ุ ูุฃูู ููููุง ููุทูุฑู Microsoft ุ ูุน ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ 3.0 ุ ุณุชูุฎูุถ ุงูุฎุทูุงุช ุงููุงุฒูุฉ ูุชุฑุญูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุฏููุฉ ุนุฏุฉ ูุฑุงุช.  ุฎุงุตุฉ ุงูุฌุฐุจุช ุฅูููุง ุฎุทุท ุงูุฎุฑูุฌ ูุจุฑูุงูุฌ EntityFramework 6.3 ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">.Net Core</a> ุฃู  ูููู ุชุฑู ูุนุธู ุงูููุฏ ุงููุจูู ุนูู 6.2 EF "ููุง ูู" ูู ูุดุฑูุน ุชู ุชุฑุญููู ุนูู net core. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ูุง ูุจุฏู ุ ูุน ูุณุชูู ุงูุจูุงูุงุช ุ ุฃุตุจุญ ูู ุงููุงุถุญ ุ ูุน ุฐูู ุ ูุงู ุฌุฒุก ูุจูุฑ ุขุฎุฑ ูู ุชุฑููุฉ ุงูููุฏ ูู ูุณุชูู ุงูุฃูุงู ุ ูุงูุฐู ุ ูุณูุก ุงูุญุธ ุ ุจุนุฏ ุงููุฑุงุฌุนุฉ ุงูุณุฑูุนุฉ ุ ุณูุชุนูู ุนููู ุงูุชุฎูุต ููู ุจุงููุงูู ูุฅุนุงุฏุฉ ูุชุงุจุชู ูู ููุทุฉ ุงูุตูุฑ.  ูุญุณู ุงูุญุธ ุ ุงุณุชุฎุฏู ุงููุดุฑูุน ุจุงููุนู ุฌุฒุกูุง ูู ASP NET Identity ุ ูู ุดูู ุชุฎุฒูู ุงููุณุชุฎุฏููู ู "ุงูุฏุฑุงุฌุงุช" ุงูุฃุฎุฑู ุงููุฑููุฉ ุจุงูุฌุงูุจ. </p><br><p style=";text-align:right;direction:rtl">  ูุซูุฑ ูุฐุง ุงูุณุคุงู ุงูููุทูู: ุฅุฐุง ูุงู ุนูู ุฌุฒุก ุงูุฃูุงู ุฅุฌุฑุงุก ุงููุซูุฑ ูู ุงูุชุบููุฑุงุช ุ ูููุงุฐุง ูุง ูููู ุนูู ุงูููุฑ ุจุชูููุฐ ุงูููุฌ ุงูููุตู ุจูุง ูู ุดูู ูุนุงููุฑ ุงูุตูุงุนุฉ ุ ููู: ุฅุญุถุงุฑ ุงูุชุทุจูู ูุงุณุชุฎุฏุงู Open ID connect ู OAuth ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">IdentityServer4</a> Framework. </p><a name="habracut"></a><br><h2 id="problemy-i-puti-resheniya" style=";text-align:right;direction:rtl">  ุงููุดุงูู ูุงูุญููู </h2><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ููุฏ ุญุตููุง ุนูู: ููุฌุฏ ุชุทุจูู JavaScript ูู Angular (ุงูุนููู ูู ุดุฑูุท IS4) ุ ููุณุชุฎุฏู ูุฌููุนุฉ ูุฑุนูุฉ ูุนููุฉ ูู WebAPI (ุงูููุงุฑุฏ) ุ ูููุงู ุฃูุถูุง ูุงุนุฏุฉ ุจูุงูุงุช ููููุฉ ASP NET ุงููุฏููุฉ ูุน ุชุณุฌููุงุช ุฏุฎูู ุงููุณุชุฎุฏู ุงูุชู ูุฌุจ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ุจุนุฏ ุงูุชุญุฏูุซ (ุญุชู ูุง ูุชู ุจุฏุก ุชุดุบูู ุฃู ุดุฎุต ุขุฎุฑ ูุฑุงุช) ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃูู ูู ุจุนุถ ุงูุญุงูุงุช ุ ูู ุงูุถุฑูุฑู ุฅุนุทุงุก ุงููุฑุตุฉ ูุชุณุฌูู ุงูุฏุฎูู ุฅูู ุงููุธุงู ูู ุฎูุงู ูุตุงุฏูุฉ Windows ุนูู ุฌุงูุจ IdentityServer4.  ุฃู  ููุงู ุฃููุงุช ุนูุฏูุง ูุนูู ุงููุณุชุฎุฏููู ูู ุฎูุงู ุดุจูุฉ ูุญููุฉ ูู ูุฌุงู ActiveDirectory. </p><br><p style=";text-align:right;direction:rtl">  ุงูุญู ุงูุฑุฆูุณู ูุชุฑุญูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ูุชุงุจุฉ (ุฃู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุขููุฉ) ูุฏูููุง ุณููุงุฑูู ุชุฑุญูู ุจูู ูุฎุทุท ุจูุงูุงุช ุงููููุฉ ุงููุฏูู ูุงูุฌุฏูุฏ.  ุจุฏูุฑู ุ ุงุณุชุฎุฏููุง ุชุทุจูู ููุงุฑูุฉ ูุฎุทุท ุงูุจูุงูุงุช ุงูุชููุงุฆู ููููุง ุจุฅูุดุงุก ุจุฑูุงูุฌ ูุตู SQL ุ ุงุณุชูุงุฏูุง ุฅูู ุฅุตุฏุงุฑ ุงููููุฉ ุ ุณูุญุชูู ุงูุจุฑูุงูุฌ ุงููุตู ููุชุฑุญูู ุงููุฏู ุนูู ุชุนูููุงุช ุชุญุฏูุซ ูุฎุชููุฉ.  ุงูุดูุก ุงูุฑุฆูุณู ููุง ูู ุนุฏู ูุณูุงู ุชูุณูู ุฌุฏูู EFMigrationsHistory ุ ุฅุฐุง ุชู ุงุณุชุฎุฏุงู EF ูู ูุจู ููู ุงููุฎุทุท ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุชูุณูุน ููุงู IdentityUser ุฅูู ุญููู ุฅุถุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุขู ููููุฉ ุชูููู IdentityServer4 ุจุดูู ุตุญูุญ ูุชููููู ูุน ุญุณุงุจุงุช Windows ุณูุชู ุดุฑุญูุง ุฃุฏูุงู. </p><br><h2 id="plan-realizacii" style=";text-align:right;direction:rtl">  ุฎุทุฉ ุงูุชูููุฐ </h2><br><p style=";text-align:right;direction:rtl">  ูุฃุณุจุงุจ NDA ุ ูู ุฃุตู ููู ุชูููุง ูู ุชูููุฐ IS4 ูู ูุดุฑูุนูุง ุ ููุน ุฐูู ุ ูู ูุฐู ุงูููุงูุฉ ุณูู ุฃุฑูู ูู ูููุน ASP.NET Core ุจุณูุท ุชู ุฅูุดุงุคู ูู ุงูุตูุฑ ุงูุฎุทูุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุงุชุฎุงุฐูุง ููุญุตูู ุนูู ุชุทุจูู ูููุฃ ุจุงููุงูู ูุณุชุฎุฏู IdentityServer4 ูุฃุบุฑุงุถ ุงูุชุฎููู ูุงููุตุงุฏูุฉ. <br>  ูุฅุฏุฑุงู ุงูุณููู ุงููุฑุบูุจ ุ ูุชุนูู ุนูููุง ุงุชุฎุงุฐ ุงูุฎุทูุงุช ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑูุน ASP.Net Core ูุงุฑุบ ูุชูููู ูุงุณุชุฎุฏุงู IdentityServer4. </li><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุนููู ูุชุทุจูู ุงูุฒุงูู. </li><li style=";text-align:right;direction:rtl">  ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ุฌูุฌู ูุชุญ ูุนุฑู ุงููููุฉ </li><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุฎูุงุฑ ูุตุงุฏูุฉ Windows </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฃุณุจุงุจ ุงูุฅูุฌุงุฒ ุ ุณุชููู ุงูููููุงุช ุงูุซูุงุซุฉ (IdentityServer ู WebAPI ู Angular client) ูู ููุณ ุงููุดุฑูุน.  ููุน ุงูุชูุงุนู ุงููุญุฏุฏ ุจูู ุงูุนููู ู IdentityServer (GrantType) ูู ุงูุชุฏูู ุงูุถููู ุ ุนูุฏ ุชูุฑูุฑ access_token ุฅูู ุฌุงูุจ ุงูุชุทุจูู ูู ุงููุณุชุนุฑุถ ุ ุซู ุงุณุชุฎุฏุงูู ุนูุฏ ุงูุชูุงุนู ูุน WebAPI.  <em>ุฃูุฑุจ ุฅูู ุงูุฅุตุฏุงุฑ ุ ูุน ูุฑุงุนุงุฉ ุงูุชุบููุฑุงุช ูู ูุณุชูุฏุน ASP.NET Core ุ ุณูุชู ุงุณุชุจุฏุงู ุงูุชุฏูู ุงูุถููู ุจูุงุณุทุฉ ุฑูุฒ ุงูุชุฎููู + PKCE.)</em> </p><br><p style=";text-align:right;direction:rtl">  ูู ุนูููุฉ ุฅูุดุงุก ุงูุชุทุจูู ูุชุนุฏููู ุ ุณูุชู ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุณุทุฑ ุฃูุงูุฑ .NET Core ุนูู ูุทุงู ูุงุณุน ุ ููุฌุจ ุชุซุจูุชูุง ุนูู ุงููุธุงู ูู ุงูููุงู ูุน ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู ุงููุนุงููุฉ Core 3.0 (ูู ููุช ูุชุงุจุฉ ุงูููุงู 3.0.100-preview7-012821). </p><br><h2 id="sozdanie-i-konfigurirovanie-web-proekta" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุชูููู ูุดุฑูุน ุงูููุจ </h2><br><p style=";text-align:right;direction:rtl">  ุชู ุชูููุฒ ุฅุตุฏุงุฑ IdentityServer ุงูุฅุตุฏุงุฑ 4 ุนู ุทุฑูู ุงูุงุณุชุบูุงุก ุงูุชุงู ุนู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ูุฐุง ุงูุฅุทุงุฑ.  ุงูุขู ูููุทูุฑูู ุงูุญู ุงููุงูู ูู ุชุญุฏูุฏ ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ ูุฎุงุฏู ุงูุชุฎููู ุจุฃููุณูู.  ููุงู ุนุฏุฉ ุทุฑู.  ูุงุญุฏุฉ ูู ุชูู ุงูุดุนุจูุฉ ูู ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุญุฒูุฉ QuickStart UI ุ ูุงูุชู ูููู ุงูุนุซูุฑ ุนูููุง ูู ุงููุณุชูุฏุน ุงูุฑุณูู ุนูู <a href="">ุฌูุซุจ</a> . </p><br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุฃุฎุฑู ุ ูุง ุชูู ููุงุกูุฉ ุ ููู ุงูุชูุงูู ูุน ูุงุฌูุฉ ูุณุชุฎุฏู NET NET Identity UI ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุงููุทูุฑ ุฅูู ุชูููู ุงููุณูุทุฉ ุงูููุงุจูุฉ ูู ุงููุดุฑูุน ุจุดูู ุตุญูุญ.  ุณูุชู ูุตู ูุฐู ุงูุทุฑููุฉ ูุงุญููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุฅูุดุงุก ูุดุฑูุน ููุจ ุจุณูุท ุ ููููุงู ุจุฐูู ุ ูู ุจุชูููุฐ ุงูุชุนูููุงุช ุงูุชุงููุฉ ูู ุณุทุฑ ุงูุฃูุงูุฑ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">dotnet new webapp -n IdentityServer4WebApp</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุชูููุฐ ุ ุณูููู ุงูุฅุฎุฑุงุฌ ุจูุซุงุจุฉ ุฅุทุงุฑ ูุชุทุจูู ุงูููุจ ุ ูุงูุฐู ุณูุชู ูููู ุชุฏุฑูุฌูุงู ุฅูู ุงูุญุงูุฉ ุงูุชู ูุญุชุงุฌ ุฅูููุง.  ููุง ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุญุฌุฒ ูุณุชุฎุฏู .Net Core 3.0 ูู Identity ุงููุฒูุฏ ูู RazorPages ุฎูููุฉ ุงููุฒู ุ ุนูู ุนูุณ MVC ูููุฒู ุงูุซููู. <br>  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุฅุถุงูุฉ ุฏุนู IdentityServer ุฅูู ูุดุฑูุนูุง.  ููููุงู ุจุฐูู ุ ูู ุจุชุซุจูุช ุงูุญุฒู ุงููุงุฒูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet add package Microsoft.AspNetCore.ApiAuthorization.IdentityServer -v 3.0.0-preview7.19365.7 dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore -v 3.0.0-preview7.19365.7 dotnet add package Microsoft.EntityFrameworkCore.Tools -v 3.0.0-preview7.19362.6 dotnet add package Microsoft.EntityFrameworkCore.Sqlite -v 3.0.0-preview7.19362.6</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุงุฑุชุจุงุทุงุช ุญุฒู ุฎุงุฏู ุงูุชุฎููู ุ ูููุง ุจุฅุถุงูุฉ ุฏุนู Entity Framework ูุชุฎุฒูู ูุนูููุงุช ุงููุณุชุฎุฏู ูู ูุธุงู ุงููููุฉ ุงูุจูุฆู.  ููุจุณุงุทุฉ ุ ุณูู ูุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช SQLite. </p><br><p style=";text-align:right;direction:rtl">  ูุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูู ุจุฅูุดุงุก ูููุฐุฌ ุงููุณุชุฎุฏู ูุณูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุต ุจูุง ุ ููุฐุง ูุนูู ุนู ูุฆุชู <em>ApplicationUser</em> ุ <em>ุงูููุฑูุซุชูู</em> ูู <em>IdentityUser</em> ูู ูุฌูุฏ ุงูุทุฑุงุฒุงุช ู <em>ApplicationDbContext</em> ุ <em>ุงูููุฑูุซุชูู</em> ูู: <em>ApiAuthorizationDbContext ูู ูุฌูุฏ ุงูุจูุงูุงุช.</em> <br></p><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชูููู ุงุณุชุฎุฏุงู ุณูุงู EntityFramework ูุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ููููุงู ุจุฐูู ุ ููุชุจ ุงูุณูุงู ูู ุทุฑููุฉ <em>ConfigureServices</em> ููุฆุฉ ุจุฏุก ุงูุชุดุบูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddDbContext&lt;ApplicationDbContext&gt;(options =&gt;options.UseSqlite(Configuration.GetConnectionString(<span class="hljs-string"><span class="hljs-string">"DefaultConnection"</span></span>))); services.AddRazorPages(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฃุถู ุณูุณูุฉ ุงูุงุชุตุงู ุฅูู <em>appsettings.json</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"ConnectionStrings"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"DefaultConnection"</span></span>: <span class="hljs-string"><span class="hljs-string">"Data Source=data.db"</span></span> },</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ููููู ุฅูุดุงุก ุงูุชุฑุญูู ุงูุฃููู ูุชููุฆุฉ ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงูุฃุฏุงุฉ ุงููุซุจุชุฉ ูู ef ุงูุฃุณุงุณูุฉ ูุทููุจุฉ (ูููุนุงููุฉ ูู ุงูุณุคุงู ุ ุงูุฅุตุฏุงุฑ 3.0.0- ูุนุงููุฉ 19.19362.6). </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet ef migrations add Init dotnet ef database update</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุฅููุงู ุฌููุน ุงูุฎุทูุงุช ุงูุณุงุจูุฉ ุฏูู ุฃุฎุทุงุก ุ ูุฌุจ ุฃู ูุธูุฑ ููู ุงูุจูุงูุงุช SQLite data.db ูู ูุดุฑูุนู. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุฑุญูุฉ ุ ูููููุง ุชูููู ูุงุฎุชุจุงุฑ ุงููุฏุฑุฉ ุงููุงููุฉ ูุงุณุชุฎุฏุงู Asp.Net Core Identity ุจุงููุงูู.  ููููุงู ุจุฐูู ุ ูู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุฃุณุงููุจ <em>ุจุฏุก ุงูุชุดุบูู.</em>  <em>ุชูููู</em> ู <em>Startup.ConfigureServices</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//Startup.ConfigureServices: services.AddDefaultIdentity&lt;ApplicationUser&gt;() .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;(); //Startup. Configure: app.UseAuthentication(); app.UseAuthorization(); app.UseEndpoints(endpoints =&gt; { endpoints.MapRazorPages(); });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ูุฐู ุงูุฎุทูุท ุ ูููุง ุจุชุถููู ุฅููุงููุฉ ุงููุตุงุฏูุฉ ูุงูุชุฑุฎูุต ูู ุฎุท ุฃูุงุจูุจ ูุนุงูุฌุฉ ุงูุทูุจุงุช.  ูุฃุถู ุฃูุถูุง ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุงูุชุฑุงุถูุฉ ูููููุฉ. <br>  ูุจูู ููุท ูุฅุตูุงุญ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ุฃุถู ุฅูู ุตูุญุงุช \ ุงููุดุชุฑูุฉ ุทุฑููุฉ ุนุฑุถ ุญูุงูุฉ ุฌุฏูุฏุฉ ุจุงุณู <em>_LoginPartial.cshtml</em> ูุงููุญุชููุงุช ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml">@using IdentityServer4WebApp.Models @using Microsoft.AspNetCore.Identity @inject SignInManager<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApplicationUser</span></span></span><span class="hljs-tag">&gt;</span></span> SignInManager @inject UserManager<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ApplicationUser</span></span></span><span class="hljs-tag">&gt;</span></span> UserManager <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"navbar-nav"</span></span></span><span class="hljs-tag">&gt;</span></span> @if (SignInManager.IsSignedIn(User)) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Identity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Account/Manage/Index"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Manage"</span></span></span><span class="hljs-tag">&gt;</span></span>Hello @User.Identity.Name!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-inline"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Identity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Account/Logout"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-route-returnUrl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link btn btn-link text-dark"</span></span></span><span class="hljs-tag">&gt;</span></span>Logout<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> } else { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Identity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Account/Register"</span></span></span><span class="hljs-tag">&gt;</span></span>Register<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Identity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Account/Login"</span></span></span><span class="hljs-tag">&gt;</span></span>Login<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> } <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุถูู ุฑูุฒ ุงูุนุฑุถ ุงูุชูุฏููู ุฃุนูุงู ุฑูุงุจุท ุฅูู ููุทูุฉ ูุงุฌูุฉ ุงููููุฉ ูุน ุนูุงุตุฑ ุชุญูู ูุณุชุฎุฏู ูุฏูุฌุฉ ูู ููุญุฉ ุงูุชููู (ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ ุ ุงูุชุณุฌูู ุ ุฅูุฎ.) </p><br><p style=";text-align:right;direction:rtl">  ูุชุญููู ุนุฑุถ ุนูุงุตุฑ ูุงุฆูุฉ ุฌุฏูุฏุฉ ุ ูููู ุจุจุณุงุทุฉ <em>ุจุชุนุฏูู</em> ููู <em>_Layout.cshtml</em> ุนู ุทุฑูู ุฅุถุงูุฉ ุนุฑุถ ุทุฑููุฉ ุงูุนุฑุถ ุงูุฌุฒุฆูุฉ ูุฐู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"navbar-nav flex-grow-1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Index"</span></span></span><span class="hljs-tag">&gt;</span></span>Home<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-area</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-page</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Privacy"</span></span></span><span class="hljs-tag">&gt;</span></span>Privacy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">partial</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_LoginPartial"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">!โโโโ</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ูุงูุขู ุฏุนููุง ูุญุงูู ุชุดุบูู ุชุทุจูููุง ูุงูููุฑ ุนูู ุงูุฑูุงุจุท ุงูุชู ุชุธูุฑ ูู ุงูุฑุฃุณ <br>  ุงููุงุฆูุฉ ุ ูุฌุจ ุฃู ูุฑู ุงููุณุชุฎุฏู ุตูุญุฉ ูุน ุชุฑุญูุจ ูุทูุจ <br>  ุฃุฏุฎู ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ.  ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู - ุงููู <br>  ูุฌุจ ุฃู ุชุนูู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yl/a2/yl/yla2yln6zflkftldetnacko8trm.png"></p><br><p style=";text-align:right;direction:rtl">  ูุงู ูุทูุฑู IdentityServer4 ุจุนูู ููุชุงุฒ ูุชุญุณูู ุชูุงูู ASP.NET Identity ูุฅุทุงุฑ ุนูู ุงูุฎุงุฏู ููุณู.  ูุฅุถุงูุฉ ุงููุฏุฑุฉ ุนูู ุงุณุชุฎุฏุงู ุฑููุฒ OAuth2 ุ ุชุญุชุงุฌ ุฅูู ุงุณุชููุงู ูุดุฑูุนูุง ุจุจุนุถ ุงูุชุนูููุงุช ุงูุฌุฏูุฏุฉ ูู ุงูููุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุณุทุฑ ูุจู ุงูุฃุฎูุฑ ูู ุฃุณููุจ <em>Startup.ConfigureServices ุ</em> ุฃุถู ุชูููู ุงุตุทูุงุญุงุช IS4 ุนุจุฑ ูููุฉ ASP.NET ุงูุฃุณุงุณูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">services.AddIdentityServer() .AddApiAuthorization&lt;ApplicationUser, ApplicationDbContext&gt;();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุดุฏ ุฃุณููุจ AddApiAuthorization ุฅุทุงุฑ ุงูุนูู ูุงุณุชุฎุฏุงู ุชูููู ูุฏุนูู ูุญุฏุฏ ุ ุจุดูู ุฑุฆูุณู ูู ุฎูุงู ููู appsettings.json.  ูู ุงูููุช ุงูุญุงูู ุ ูุฅู ุฅููุงูุงุช ุฅุฏุงุฑุฉ IS4 ุงููุฏูุฌุฉ ููุณุช ูุฑูุฉ ุฌุฏูุง ููุฌุจ ุงุนุชุจุงุฑูุง ููุทุฉ ุงูุทูุงู ูุฅูุดุงุก ุชุทุจููุงุชู.  ูู ุฃู ุญุงู ุ ููููู ุงุณุชุฎุฏุงู ุงูุฅุตุฏุงุฑ ุงูุฒุงุฆุฏ ูู ูุฐู ุงูุทุฑููุฉ ูุชูููู ุงููุนููุงุช ุจูุฒูุฏ ูู ุงูุชูุงุตูู ูู ุฎูุงู ุฑุฏ ุงูุงุชุตุงู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุณูู ุทุฑููุฉ ุงููุณุงุนุฏ ุ ุงูุชู ุชููู ุจุชูููู ุงูุชุทุจูู ููุชุญูู ูู ุงูุฑููุฒ ุงููููุฒุฉ JWT ุงูุตุงุฏุฑุฉ ุนู ุงูุฅุทุงุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">services.AddAuthentication() .AddIdentityServerJwt();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูู ุทุฑููุฉ <em>Startup.Configure ุ</em> ุฃุถู ุงููุณูุทุฉ ูู <br>  ุชูููุฑ ูุนุฑู ููุงูุฉ ุฑุจุท ููุงุท ุงูููุงูุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">app.UseAuthentication(); app.UseAuthorization(); app.UseIdentityServer();<span class="hljs-comment"><span class="hljs-comment">//&lt;-</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุฐูุฑ ุฃุนูุงู ุ ุทุฑู ุงููุณุงุนุฏ ุงููุณุชุฎุฏูุฉ ูุฑุงุกุฉ ุงูุชูููู ูู <br>  ููู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู <em>appsettings.json</em> ุ ูุงูุฐู ูุฌุจ ุฃู ูุถูู ุฌุฏูุฏุฉ <br>  ูุณู ุฎุฏูุงุช <em>ุงููููุฉ</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"IdentityServer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"Clients"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"TestIdentityAngular"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"Profile"</span></span>: <span class="hljs-string"><span class="hljs-string">"IdentityServerSPA"</span></span> } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุณู ุ ูุชู ุชุนุฑูู ุงูุนููู ุจุงุณู TestIdentityAngular ุ ูุงูุฐู ุณูููู ุจุชุนูููู ูุนููู ุงููุณุชุนุฑุถ ุงููุณุชูุจูู ูููู ุชุนุฑูู ุชูููู ูุญุฏุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูููุงุช ุชุนุฑูู ุงูุชุทุจูู ูู ุฃุฏุงุฉ ุชูููู IdentityServer ุฌุฏูุฏุฉ ุชููุฑ ุงูุนุฏูุฏ ูู ุงูุชููููุงุช ุงููุนุฑูุฉ ูุณุจููุง ูุน ุฅููุงููุฉ ุชุญุณูู ูุนููุงุช ูุนููุฉ.  ุณูุณุชุฎุฏู ููู ุงูุชุนุฑูู <em>IdentityServerSPA</em> ุ ุงููุตูู ููุญุงูุงุช ุนูุฏูุง ูููู ุนููู ุงููุณุชุนุฑุถ ูุงูุฅุทุงุฑ ูู ููุณ ุงููุดุฑูุน ููุฏููุง ุงููุนููุงุช ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุนููู ุงูููุฑุฏ redirect_uri ุฅูู <em>/ ุงููุตุงุฏูุฉ / ุชุณุฌูู ุงูุฏุฎูู ุฑุฏ ุงูุงุชุตุงู</em> . </li><li style=";text-align:right;direction:rtl">  ููุฑุฏ post_logout_redirect_uri ุ ุชุนููู ุฅูู <em>/ ุงููุตุงุฏูุฉ / ุชุณุฌูู ุงูุฎุฑูุฌ ุฑุฏ ุงูุงุชุตุงู.</em> </li><li style=";text-align:right;direction:rtl">  ุชุชุถูู ูุฌููุนุฉ ุงูููุงุทู openid ุ ููู ุชุนุฑูู ุ ููู ููุฑุฏ API ููุชุทุจูู. </li><li style=";text-align:right;direction:rtl">  ูุฌููุนุฉ ูู ุฃููุงุน ุงุณุชุฌุงุจุฉ OIDC ุงููุณููุญ ุจูุง - ุงูุฑูุฒ ุงููููุฒ id_token </li><li style=";text-align:right;direction:rtl">  GrantType ููุนููู - ุถููู </li></ul><br><p style=";text-align:right;direction:rtl">  ูููุงุช ุงูุชุนุฑูู ุงููุญุชููุฉ ุงูุฃุฎุฑู ูู <em>SPA</em> (ุชุทุจูู ุจุฏูู IS4) ุ <em>IdentityServerJwt</em> (API ูุดุชุฑู ูุน IS4) ุ <em>API</em> (API ูููุตู). </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุณุฌู ุงูุชูููู ุงูููุงุฑุฏ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ApiResources: ููุฑุฏ API ูุงุญุฏ ูุณูู &lt;&lt; appname &gt;&gt; API ูุน ุฎุตุงุฆุต ูุฌููุน ุงูุนููุงุก (*). </li><li style=";text-align:right;direction:rtl">  IdentityServerResources: <em>IdentityResources.OpenId ()</em> ู <em>IdentityResources.Profile ()</em> </li></ul><br><p style=";text-align:right;direction:rtl">  ููุง ุชุนูู ุ ูุณุชุฎุฏู IdentityServer ุดูุงุฏุงุช ูุชูููุน ุงูุฑููุฒ ุ ููููู ุฃูุถูุง ุชุนููู ุงููุนููุงุช ูู ููู ุงูุชูููู ุ ูุฐูู ูู ููุช ุงูุงุฎุชุจุงุฑ ูููููุง ุงุณุชุฎุฏุงู <br>  ุดูุงุฏุฉ ุงุฎุชุจุงุฑ x509 ุ ููุฐุง ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏูุง ูู ูุณู "ุงูููุชุงุญ" ูู ููู <em>appsettings.Development.json</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"IdentityServer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"Key"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"Type"</span></span>: <span class="hljs-string"><span class="hljs-string">"Development"</span></span> } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููุง ุฃู ูููู ุฃู ุงูุฎูููุฉ ุงูุชู ุชุณูุญ ูู ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">IdentityServer ุฌุงูุฒุฉ</a> ูููููู ุงูุจุฏุก ูู ุชุทุจูู ุชุทุจูู ุงููุชุตูุญ. </p><br><h2 id="realizaciya-klienta-na-angular" style=";text-align:right;direction:rtl">  ุชุทุจูู ุงูุนููู ุงูุฒุงูู </h2><br><p style=";text-align:right;direction:rtl">  ุณูุชู ูุชุงุจุฉ SPA ุงูุฐู ูุณุชูุฏ ุฅูู ุงููุณุชุนุฑุถ ุงูุฎุงุต ุจูุง ุนูู ุงููุธุงู ุงูุฃุณุงุณู Angular.  ุณูุญุชูู ุงูุชุทุจูู ุนูู ุตูุญุชูู ุ ูุงุญุฏุฉ ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู ูุงูุฃุฎุฑู ูููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู.  ุชุณุชุฎุฏู ุงูุฃูุซูุฉ ุงูุฅุตุฏุงุฑ 8.1.2 </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูู ุจุฅูุดุงุก ุงูุฅุทุงุฑ ุงููุณุชูุจูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ng new ClientApp</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุนูููุฉ ุงูุฅูุดุงุก ุ ุชุญุชุงุฌ ุฅูู ุฅุฌุงุจุฉ "ูุนู" ุนูู ุงูุชุฑุงุญ ุงุณุชุฎุฏุงู ุงูุชูุฌูู.  ูุณุฑุนุงู ูุง ุฃุณุฑู ุงูุตูุญุฉ ูู ุฎูุงู ููุชุจุฉ bootstrap: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cd ClientApp ng add bootstrap</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฏุนู ุงุณุชุถุงูุฉ SPA ุฅูู ุชุทุจูููุง ุงูุฑุฆูุณู.  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุฅุตูุงุญ ูุดุฑูุน csproj - ุฅุถุงูุฉ ูุนูููุงุช ุญูู ุชุทุจูู ุงููุชุตูุญ ุงูุฎุงุต ุจูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp3.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptCompileBlocked</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptCompileBlocked</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptToolsVersion</span></span></span><span class="hljs-tag">&gt;</span></span>Latest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptToolsVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IsPackable</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IsPackable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SpaRoot</span></span></span><span class="hljs-tag">&gt;</span></span>ClientApp\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">SpaRoot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefaultItemExcludes</span></span></span><span class="hljs-tag">&gt;</span></span>$(DefaultItemExcludes);$(SpaRoot)node_modules\**<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefaultItemExcludes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BuildServerSideRenderer</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BuildServerSideRenderer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> โฆ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Remove</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(SpaRoot)**"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">None</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Remove</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(SpaRoot)**"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">None</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(SpaRoot)**"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Exclude</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(SpaRoot)node_modules\**"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Target</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DebugEnsureNodeEnv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BeforeTargets</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Build"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)' == 'Debug' And !Exists('$(SpaRoot)node_modules') "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"node --version"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ContinueOnError</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Output</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TaskParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ExitCode"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PropertyName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ErrorCode"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Error</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'$(ErrorCode)' != '0'"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Node.js is required to build and run this project. To continue, please install Node.js from https://nodejs.org/, and then restart your command prompt or IDE."</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Message</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Importance</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"high"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Restoring dependencies using 'npm'. This may take several minutes..."</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Exec</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">WorkingDirectory</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(SpaRoot)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"npm install"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Target</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูู ุจุชุซุจูุช ุญุฒูุฉ nuget ุงูุฎุงุตุฉ ูุฏุนู ุชุทุจููุงุช ุงููุชุตูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet add package Microsoft.AspNetCore.SpaServices.Extensions -v 3.0.0-preview7.19365.7</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุญู ูุณุชุฎุฏู ุทุฑููุง ุงููุณุงุนุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//Startup. ConfigureServices: services.AddSpaStaticFiles(configuration =&gt; { configuration.RootPath = "ClientApp/dist"; }); //Startup. Configure: app.UseSpa(spa =&gt; { spa.Options.SourcePath = "ClientApp"; if (env.IsDevelopment()) { spa.UseAngularCliServer(npmScript: "start"); } });</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุงุณุชุฏุนุงุก ุฃุณุงููุจ ุฌุฏูุฏุฉ ุ ูุฌุจ ุนููู ุญุฐู <em>ุตูุญุงุช</em> Razor <em>Index.chtml</em> ู <em>_ViewStart.chtml</em> ุญุชู ุชููุฑ ุฎุฏูุงุช SPA ุงููุญุชูู ุงูุขู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุชูููุฐ ูู ุดูุก ููููุง ููุชุนูููุงุช ุ ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู ุ ุณุชุธูุฑ ุงูุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ ุนูู ุงูุดุงุดุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mv/lv/j6/mvlvj6_2aqcutz9t0_9eozhoxk8.png"></p><br><p style=";text-align:right;direction:rtl">  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุชูููู ุงูุชูุฌูู ุ ููุฐุง ูุถููู ุฅูู ุงููุดุฑูุน 2 <br>  ุงูููููุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ng generate component Home -t=true -s=true --skipTests=true ng generate component Data -t=true -s=true --skipTests=true</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชุจูุง ูู ุฌุฏูู ุงูุชูุฌูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">const routes: Routes = [ { path: '', component: HomeComponent, pathMatch: 'full' }, { path: 'data', component: DataComponent } ];</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุจุชุนุฏูู ููู app.component.html ูุนุฑุถ ุนูุงุตุฑ ุงููุงุฆูุฉ ุจุดูู ุตุญูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"navbar-brand"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLink</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["/"]'</span></span></span><span class="hljs-tag">&gt;</span></span>Client App<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngClass</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{"show": isExpanded}'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"navbar-nav flex-grow"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLinkActive</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["link-active"]'</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLinkActiveOptions</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'{ exact: true }'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLink</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["/"]'</span></span></span><span class="hljs-tag">&gt;</span></span>Home<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLinkActive</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["link-active"]'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLink</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["/data"]'</span></span></span><span class="hljs-tag">&gt;</span></span>Web api data<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-align:center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> Welcome to {{ title }}! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"router-outlet"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">router-outlet</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">router-outlet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุฎุทูุฉ ุ ููููู ุฅููุงู ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู ูุฅุทุงุฑ ุงูุชุทุจูู ูุชูููุฐ ุงูุชูุงุนู ูู ุฎูุงู ุงูุฑููุฒ ุงููููุฒุฉ ุงูุตุงุฏุฑุฉ ุนู IdentityServer. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงุณุชุฏุนุงุก ุงููุฑุญูุฉ ุงูุญุงููุฉ ูู ุฅุนุฏุงุฏ ุฅุทุงุฑ SPA ูุฏููุง ุ ูุงูุขู ูุฌุจ ุฃู ูุจุฏุฃ ูู ุชูููุฐ ุงููุญุฏุฉ ุงููุณุคููุฉ ุนู ุงูุชูุงุนู ูุน ุฌุฒุก ุงูุฎุงุฏู ุจุงุณุชุฎุฏุงู ุจุฑูุชููููุงุช OpenID Connect ู OAuth.  ูุญุณู ุงูุญุธ ุ ูุงู ุงููุทูุฑูู ูู Microsoft ุจุงููุนู ุจุชุทุจูู ูุฐู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุงูุขู ููููู ุจุจุณุงุทุฉ ุงุณุชุนุงุฑุฉ ูุฐู ุงููุญุฏุฉ ูููู.  ูุธุฑูุง ูุฃู ููุงูุชู ููุชูุจุฉ ุนูู ุฃุณุงุณ ูุง ูุจู ุงูุฅุตุฏุงุฑ 7 ูู ASP.NET Core 3.0 ุ ูุณูุฃุฎุฐ ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ุนูุงูุฉ ุงูุฅุตุฏุงุฑ "v3.0.0-preview7.19365.7" ุนูู <a href="">ุฌูุซุจ</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุจู ุงุณุชูุฑุงุฏ ุงูุฑูุฒ ุ ูุฌุจ ุนููู ุชุซุจูุช ููุชุจุฉ <em>ุนููู oidc</em> ุ ูุงูุชู <br>  ูููุฑ ุงูุนุฏูุฏ ูู ูุงุฌูุงุช ูุชุทุจููุงุช ุงููุชุตูุญ ุ ููุฐูู <br>  ูุฏุนู ุฅุฏุงุฑุฉ ุฌูุณุงุช ุงููุณุชุฎุฏู ูุงููุตูู ุฅูู ุงูุฑููุฒ.  ุฅูู <br>  ูุจุฏุก ุงูุนูู ูุนูุง ุ ุชุญุชุงุฌ ุฅูู ุชุซุจูุช ุงูุญุฒูุฉ ุงูููุงุณุจุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">npm install oidc-client@1.8.0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู SPA ูุฏููุง ุ ูู ุงูุถุฑูุฑู ุชุทุจูู ูุญุฏุฉ ุชุญุชูู ุนูู ุชูุงุนู ูุงูู ููููุง ููุจุฑูุชููููุงุช ุงููุทููุจุฉ.  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฃุฎุฐ ูุญุฏุฉ ApiAuthorizationModule ุจุฃููููุง ูู ููุตู ูุณุชูุฏุน ASP.NET Core ุฃุนูุงู ูุฅุถุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌููุน ูููุงุชู</a> ุฅูู ุงูุชุทุจูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุงุณุชูุฑุงุฏู ุฅูู ุงููุญุฏุฉ ุงูุฑุฆูุณูุฉ ูุชุทุจูู AppModule: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">@NgModule({ declarations: [ AppComponent, HomeComponent, DataComponent ], imports: [ BrowserModule, HttpClientModule, ApiAuthorizationModule,//&lt;- AppRoutingModule ], providers: [], bootstrap: [AppComponent] }) export class AppModule { }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุฑุถ ุนูุงุตุฑ ูุงุฆูุฉ ุฌุฏูุฏุฉ ูู ุงููุญุฏุฉ ุงูููุทูุฉ ุงูุชู ุชู ุงุณุชูุฑุงุฏูุง ุ ููุงู ูููู <em>ูุงุฆูุฉ ุงูุชุทุจูู ุชุณุฌูู ุงูุฏุฎูู</em> ุ <br>  ูููู ุชุบููุฑู ุจุงููุงูู ูููุงุณุจ ุงุญุชูุงุฌุงุชู ููุถูููุง <br>  ุฑุงุจุท ุฅูููุง ูู ูุณู ุงูุชููู ูู <em>ุนุฑุถ app.component.html</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชุณุชุฎุฏู ูุญุฏุฉ ุชุฑุฎูุต API ูุชูููู ุงุชุตุงู OpenID ูุนููู SPA ููุทุฉ ููุงูุฉ ุฎุงุตุฉ ูู ุงููุงุฌูุฉ ุงูุฎูููุฉ ููุชุทุจูู ุ ููุชูููุฐูุง <br>  ูุฌุจ ุฃู ุชุชุจุน ูุฐู ุงูุฎุทูุงุช: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชุตุญูุญ ูุนุฑู ุงูุนููู ููููุง ููุง ูููุง ุจุชุนูููู ูู appettings.json ูููู ุงูุชูููู ูู ูุณู IdentityServer: Clients ุ ูู ุญุงูุชูุง ูู TestIdentityAngular ุ ูุชู ูุชุงุจุชู ูู ุงูุณุทุฑ ุงูุฃูู ูู ูุฌููุนุฉ api-Authorization.constants.ts ุงูุซุงุจุชุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ูุญุฏุฉ ุชุญูู OidcConfigurationController ุงูุชู ุณุชุนูุฏ ุงูุชูููู ูุจุงุดุฑุฉ ุฅูู ุชุทุจูู ุงููุณุชุนุฑุถ </li></ol><br><p style=";text-align:right;direction:rtl">  ููุฑุฏ ุฑูุฒ ูุญุฏุฉ ุงูุชุญูู ุงูุชู ุชู ุฅูุดุงุคูุง ุฃุฏูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">ApiController</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">OidcConfigurationController</span></span>: <span class="hljs-title"><span class="hljs-title">ControllerBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IClientRequestParametersProvider _clientRequestParametersProvider; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OidcConfigurationController</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IClientRequestParametersProvider clientRequestParametersProvider</span></span></span><span class="hljs-function">)</span></span> { _clientRequestParametersProvider = clientRequestParametersProvider; } [HttpGet(<span class="hljs-string"><span class="hljs-string">"_configuration/{clientId}"</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetClientRequestParameters</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[FromRoute]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> clientId</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameters = _clientRequestParametersProvider.GetClientParameters(HttpContext, clientId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Ok(parameters); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุชูููู ุฏุนู ููุทุฉ API ููุชุทุจูู ุงูุฎููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//Startup.ConfigureServices: services.AddControllers();//&lt;-  services.AddRazorPages(); //Startup. Configure: app.UseEndpoints(endpoints =&gt; { endpoints.MapRazorPages(); endpoints.MapControllers(); });</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุญุงู ุงูููุช ูุจุฏุก ุงูุชุทุจูู.  ูุฌุจ ุฃู ูุธูุฑ ุนูุตุฑูู ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูู ุงููุงุฆูุฉ ุงูุนููุง - <em>ุชุณุฌูู ุงูุฏุฎูู</em> <em>ูุงูุชุณุฌูู</em> .  ุฃูุถูุง ุ ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ุณุชุทูุจ ูุญุฏุฉ ุงูุชุฑุฎูุต ุงููุณุชูุฑุฏุฉ ูู ุฌุงูุจ ุงูุฎุงุฏู ุชูููู ุงูุนููู ุ ูุงูุฐู ุณูุชู ุฃุฎุฐู ูู ุงูุงุนุชุจุงุฑ ูุงุญููุง ูู ุงูุจุฑูุชูููู.  ูุชู ุนุฑุถ ูุซุงู ุชูููู ุงูุฅุฎุฑุงุฌ ุฃุฏูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"authority"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://localhost:44367"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"client_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestIdentityAngular"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"redirect_uri"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://localhost:44367/authentication/login-callback"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"post_logout_redirect_uri"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://localhost:44367/authentication/logout-callback"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"response_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"id_token token"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scope"</span></span>: <span class="hljs-string"><span class="hljs-string">"IdentityServer4WebAppAPI openid profile"</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุชููุน ุงูุนููู ุฃุซูุงุก ุงูุชูุงุนู ุฃู ูุชููู ุงูุฑูุฒ ุงููููุฒ ูููุนุฑู ูุฑูุฒ ุงููุตูู ุ ููุง ุฃูู ูุฏ ุชู ุชููุฆุชู ูููุทูุฉ ุงููุตูู ุฅูู API ุงูุฎุงุตุฉ ุจูุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฅุฐุง ุญุฏุฏูุง ุนูุตุฑ ูุงุฆูุฉ <em>ุชุณุฌูู ุงูุฏุฎูู</em> ุ ููุฌุจ ุฅุนุงุฏุฉ ุชูุฌูููุง ุฅูู ุตูุญุฉ IdentityServer4 ุงูุฎุงุตุฉ ุจูุง ุ ูููุง ูููููุง ุฅุฏุฎุงู ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ ุ ูุฅุฐุง ูุงูุช ุตุญูุญุฉ ุ ูุณูู ูุชู ููููุง ุนูู ุงูููุฑ ุฅูู ุชุทุจูู ุงููุชุตูุญ ุ ูุงูุฐู ุจุฏูุฑู ุณูุชููู <em>id_token</em> ู <em>access_token</em> .  ููุง ุชุฑูู ุฃุฏูุงู ุ ูุฑุฑ ูููู ูุงุฆูุฉ ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุงูุชุทุจูู ููุณู ุฃู ุงูุชูููุถ ุฃููู ุจูุฌุงุญ ูุนุฑุถ "ุชุญูุฉ" ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฒุฑ ูุชุณุฌูู <em>ุงูุฎุฑูุฌ</em> . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cr/l-/aa/crl-aa3ehwgdjybwkmb7nbg92pk.png"></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชูุชุญ "ุฃุฏูุงุช ุงููุทูุฑ" ูู ุงููุชุตูุญ ุ ููููู ุฃู ุชุฑู ูู ููุงููุณ ูู ุงูุชูุงุนู ุจุงุณุชุฎุฏุงู ุจุฑูุชูููู OIDC / OAuth.  ูุฐุง ูู ุงูุญุตูู ุนูู ูุนูููุงุช ุฎุงุฏู ุงูุชุฎููู <br>  ุนุจุฑ ููุทุฉ ููุงูุฉ. <em>ูุดุงุท ุฌูุณุฉ ุนูู ูุนุฑูู / ููุชูุญ /</em> ุชุฌููุน ูู ุฎูุงู ููุทุฉ ูุตูู ุงูุงุชุตุงู / checkession.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุชู ุชูููู ูุญุฏุฉ ุงูุชุฎููู ูู ุฃุฌู ุขููุฉ "ุงูุชุญุฏูุซ ุงูุตุงูุช ููุฑููุฒ" ุ ุนูุฏูุง ุชูุชูู ุตูุงุญูุฉ ุฑูุฒ ุงููุตูู ุ ูููู ุงููุธุงู ุจุชูุฑูุฑ ุฎุทูุงุช ุงูุชุฑุฎูุต ุจุดูู ูุณุชูู ูู ุฅุทุงุฑ iframe ุฎูู.  ููููู ุชุนุทูู ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ ุงูุฑูุฒูุฉ ูู ุฎูุงู ุชุนููู ูููุฉ ุงููุนููุฉ <em>includeIdTokenInSilentRenew</em> ุฅูู "false" ูู ููู <em>Authorize.service.ts</em> . </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ููููู ุงูุชุนุงูู ูุน ุชูููุฏ ุงููุตูู ุฅูู ุงููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู ูู ููููุงุช ุชุทุจูู SPA ุ ููุฐูู ุจุนุถ ูุญุฏุงุช ุงูุชุญูู API ุนูู ุงูุธูุฑ.  ูุฅุธูุงุฑ ุจุนุถ API ุ ุณูููู ุจุฅูุดุงุก ูุฆุฉ <em>ExchangeRateItem</em> ูู ูุฌูุฏ ุงูุทุฑุงุฒุงุช <em>ุ</em> ููุฐูู ูุญุฏุฉ ุชุญูู ูู ุงููุฌูุฏ Controller ุชููู ุจุฅุฑุฌุงุน ุจุนุถ ุงูุจูุงูุงุช ุงูุนุดูุงุฆูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//Controller: [ApiController] public class ExchangeRateController { private static readonly string[] Currencies = new[] { "EUR", "USD", "BGN", "AUD", "CNY", "TWD", "NZD", "TND", "UAH", "UYU", "MAD" }; [HttpGet("api/rates")] public IEnumerable&lt;ExchangeRateItem&gt; Get() { var rng = new Random(); return Enumerable.Range(1, 5).Select(index =&gt; new ExchangeRateItem { FromCurrency = "RUR", ToCurrency = Currencies[rng.Next(Currencies.Length)], Value = Math.Round(1.0+ 1.0/rng.Next(1, 100),2) }) .ToArray(); } } //Models: public class ExchangeRateItem { public string FromCurrency { get; set; } public string ToCurrency { get; set; } public double Value { get; set; } }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุนูู ุงูุฌุงูุจ ุงูุฃูุงูู ุ ูู ุจุฅูุดุงุก ูููู ุฌุฏูุฏ ุณูุชููู <br>  ูุนุฑุถ ุงูุจูุงูุงุช ุนูู ุฃุณุนุงุฑ ุงูุตุฑู ูู ูุญุฏุฉ ุงูุชุญูู ุงูุชู ุชู ุฅูุดุงุคูุง ููุชู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ng generate component ExchangeRate -t=true -s=true --skipTests=true</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุจุฏู ูุญุชูู ุงููููู ููุง ููู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import { Component, OnInit, Input } from '@angular/core'; import { HttpClient } from '@angular/common/http'; import { Observable, of, Subject } from 'rxjs'; import { catchError } from 'rxjs/operators'; @Component({ selector: 'app-exchange-rate', template: ` &lt;div class="alert alert-danger" *ngIf="errorMessage | async as msg"&gt; {{msg}} &lt;/div&gt; &lt;table class='table table-striped'&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;From currency&lt;/th&gt; &lt;th&gt;To currency&lt;/th&gt; &lt;th&gt;Rate&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr *ngFor="let rate of rates | async"&gt; &lt;td&gt;{{ rate.fromCurrency }} &lt;/td&gt; &lt;td&gt;{{ rate.toCurrency }}&lt;/td&gt; &lt;td&gt;{{ rate.value }}&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; `, styles: [] }) export class ExchangeRateComponent implements OnInit { public rates: Observable&lt;ExchangeRateItem[]&gt;; public errorMessage: Subject&lt;string&gt;; @Input() public apiUrl: string; constructor(private http: HttpClient) { this.errorMessage = new Subject&lt;string&gt;(); } ngOnInit() { this.rates = this.http.get&lt;ExchangeRateItem[]&gt;("/api/"+this.apiUrl).pipe(catchError(this.handleError(this.errorMessage)) ); } private handleError(subject: Subject&lt;string&gt;): (te:any) =&gt; Observable&lt;ExchangeRateItem[]&gt; { return (error) =&gt; { let message = ''; if (error.error instanceof ErrorEvent) { message = `Error: ${error.error.message}`; } else { message = `Error Code: ${error.status}\nMessage: ${error.message}`; } subject.next(message); let emptyResult: ExchangeRateItem[] = []; return of(emptyResult); } } } interface ExchangeRateItem { fromCurrency: string; toCurrency: string; value: number; }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจูู ุงูุจุฏุก ูู ุงุณุชุฎุฏุงูู ูู ุตูุญุฉ ุจูุงูุงุช ุงูุชุทุจูู ุ ุจุจุณุงุทุฉ ูู ุงููุงูุจ ุนู ุทุฑูู ูุชุงุจุฉ ุงูุณุทุฑ &lt;app-exchange-rate apiUrl = "rates"&gt; &lt;/app-exchange-rate&gt; ูููููู ุงูุจุฏุก ูู ุงููุดุฑูุน ูุฑุฉ ุฃุฎุฑู.  ุนูุฏูุง ูุชููู ุนูู ุทูู ุงููุณุงุฑ ุงููุณุชูุฏู ุ ุณูุฑู ุฃู ุงููููู ูุฏ ุชููู ุงูุจูุงูุงุช ูุนุฑุถูุง ูู ุดูู ุฌุฏูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณูุญุงูู ุฅุถุงูุฉ ุทูุจ ููุญุตูู ุนูู ุฅุฐู ุจุงููุตูู ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุฌูุงุฒ ุงูุชุญูู ุ ูููููุงู ุจุฐูู ุ ุฃุถู ุงูุณูุฉ <em>[Authorize]</em> ูู ูุฆุฉ <em>ExchangeRateController</em> ูุฃุนุฏ ุชุดุบูู SPA ูุฑุฉ ุฃุฎุฑู ุ ุจุนุฏ ุฃู ูุนูุฏ ูุฑุฉ ุฃุฎุฑู ุฅูู ุงููููู ุงูุฐู ูุณุชุฏุนู API ุ ุณูุฑู ุฎุทุฃ ุ ูุดูุฑ ุฅูู ุฑุคูุณ ุงูุชุฎููู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fo/kv/ov/fokvovvxneeouxy0k30wuvlwj4u.png"></p><br><p style=";text-align:right;direction:rtl">  ูุฅุถุงูุฉ ุฑูุฒ ุงูุชูููุถ ุจุดูู ุตุญูุญ ููุทูุจุงุช ุงูุตุงุฏุฑุฉ ุ ููููู <br>  ุฅุดุฑุงู ุขููุฉ ุงุนุชุฑุงุถูุฉ ุงูุฒุงูู ุงุนุชุฑุงุถูุฉ.  ูุญุณู ุงูุญุธ ุ ุงููุญุฏุฉ ุงูููุทูุฉ ุงููุณุชูุฑุฏุฉ ุชุญุชูู ุจุงููุนู ุนูู ุงูููุน ุงูุถุฑูุฑู ุ ูุญุชุงุฌ ููุท ุฅูู ุชุณุฌููู ูู ุงููุญุฏุฉ ุงูุฃุณุงุณูุฉ ููุชุทุจูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">providers: [ { provide: HTTP_INTERCEPTORS, useClass: AuthorizeInterceptor, multi: true } ],</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูุฐู ุงูุฎุทูุงุช ุ ูุฌุจ ุฃู ูุนูู ูู ุดูุก ุจุดูู ุตุญูุญ.  ุฅุฐุง ูุธุฑุช ุฅูู ุฃุฏูุงุช ูุทูุฑ ุงูุจุฑุงูุฌ ูุฑุฉ ุฃุฎุฑู ุ ูุณูู ูุฑู ุงููุณุชุนุฑุถ ุฑุฃุณ ุชุฑุฎูุต Bearer access_token ุงูุฌุฏูุฏ.  ุนูู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุ ุณูุชู ุงูุชุญูู ูู ุตุญุฉ ูุฐุง ุงูุฑูุฒ ุงููููุฒ ุจูุงุณุทุฉ IdentityServer ุ ูุณูููุญ ุงูุฅุฐู ุฃูุถูุง ููุงุชุตุงู ุจููุทุฉ API ุขููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ููุงูุฉ ูุซุงู ุงูุชูุงูู ูุน ุฎุงุฏู ุงูุชุฎููู ุ ููููู ูุถุน Activation Guard ุนูู ุงูุทุฑูู ุจุจูุงูุงุช ุณุนุฑ ุงูุตุฑู ูู SPA ุ ููุง ุณูููุน ุงููุณุชุฎุฏููู ูู ุงูุชุจุฏูู ุฅูู ุงูุตูุญุฉ ุฅุฐุง ูู ุชูู ูุตุฑุญ ููู ุญุงูููุง.  ูุชู ุชูุฏูู ูุฐุง ุงูุญุงูู ุฃูุถูุง ูู ุงููุญุฏุฉ ุงูููุทูุฉ ุงููุณุชูุฑุฏุฉ ูุณุจููุง ุ ูุง ุนููู ุณูู ุชุนูููู ุนูู ุงููุณุงุฑ ุงููุณุชูุฏู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ path: 'data', component: DataComponent, canActivate: [AuthorizeGuard] }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูู ุญุงูุฉ ุนุฏู ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู ุฅูู ุงูุชุทุจูู ูุชุญุฏูุฏ ุฑุงุจุท ูููููู ุงููุญูู ุงูุฎุงุต ุจูุง ุ ุณูุชู ุฅุนุงุฏุฉ ุชูุฌููู ููุฑูุง ุฅูู ุตูุญุฉ ุงูุชูููุถ ูุน ุทูุจ ุฅุฏุฎุงู ุงุณู ูุณุชุฎุฏู ููููุฉ ูุฑูุฑ.  ุงูููุฏ ุงููุงุชุฌ ูุชุงุญ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> . </p><br><h2 id="podklyuchenie-vneshnego-vhoda-v-sistemu-cherez-postavschika-google" style=";text-align:right;direction:rtl">  ุฑุจุท ุชุณุฌูู ุฏุฎูู ุฎุงุฑุฌู ูู ุฎูุงู ูุฒูุฏ ุฌูุฌู </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ุญุฒูุฉ Microsoft.AspNetCore.Authentication.Google Nuget ูููุตูุฉ ูุชูุตูู ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ ุญุณุงุจุงุช Google ูู ASP.NET core 1.1 / 2.0 + ุ ููุน ุฐูู ุ ูุธุฑูุง ููุชุบูุฑุงุช ูู ุณูุงุณุฉ ุงูุดุฑูุฉ ููุณูุง ุ ูุฏู Microsoft ุฎุทุท ูู ASP.NET Core 3.0+ ุงูุชุนุฑู ุนููู ููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูุง ุนูููุง ุงูุฒูู</a> .  ูุงูุขู ููุตู ุจุงูุงุชุตุงู ูู ุฎูุงู ุงูุฃุณููุจ ุงูุฅุถุงูู <em>OpenIdConnectExtensions</em> ู <em>AddOpenIdConnect</em> ุ ูุงูุฐู <em>ุณูุณุชุฎุฏูู</em> ูู ูุฐู ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุซุจูุช ููุญู OpenIdConnect: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet add package Microsoft.AspNetCore.Authentication.OpenIdConnect -v 3.0.0-preview7.19365.7</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุจุฏุก ุ ูุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ูููุชูู ุฃุณุงุณูุชูู ูู Google - Id Client ู Client Secret ุ ูููุฐุง ูููุชุฑุญ ุชูููุฐ ุงูุฎุทูุงุช ุงูุชุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุชุจุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุงุจุท</a> ูุงุฎุชุฑ ุฒุฑ "CONFIGURE A PROJECT". </li><li style=";text-align:right;direction:rtl">  ูู ูุฑุจุน ุงูุญูุงุฑ ุงูุฐู ูุธูุฑ ุ ุญุฏุฏ ุฎุงุฏู ุงูููุจ. </li><li style=";text-align:right;direction:rtl">     ยซAuthorized redirect URIยป           Google (..      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://localhost:44301/</a> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://localhost:44301/signin-google</a> ) </li><li style=";text-align:right;direction:rtl">      ClientID  Client Secret. </li><li style=";text-align:right;direction:rtl">         ,   ,   URL    . </li></ul><br><p style=";text-align:right;direction:rtl">         <a href="">Secret Manager</a> .       ,    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet user-secrets init dotnet user-secrets set "Authentication:Google:ClientId" "  ClientID" dotnet user-secrets set "Authentication:Google:ClientSecret" "  ClientSecret"</code> </pre> <br><p style=";text-align:right;direction:rtl">           Google. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">services.AddAuthentication() .AddOpenIdConnect(<span class="hljs-string"><span class="hljs-string">"Google"</span></span>, <span class="hljs-string"><span class="hljs-string">"Google"</span></span>, o =&gt; { IConfigurationSection googleAuthNSection = Configuration.GetSection(<span class="hljs-string"><span class="hljs-string">"Authentication:Google"</span></span>); o.ClientId = googleAuthNSection[<span class="hljs-string"><span class="hljs-string">"ClientId"</span></span>]; o.ClientSecret = googleAuthNSection[<span class="hljs-string"><span class="hljs-string">"ClientSecret"</span></span>]; o.Authority = <span class="hljs-string"><span class="hljs-string">"https://accounts.google.com"</span></span>; o.ResponseType = OpenIdConnectResponseType.Code; o.CallbackPath = <span class="hljs-string"><span class="hljs-string">"/signin-google"</span></span>; }) .AddIdentityServerJwt();</code> </pre> <br><p style=";text-align:right;direction:rtl">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>     ,    <br>      Google.     ,    ,       SPA          . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xi/rl/5h/xirl5hobkgfaukb4wzp5sibosj4.png"></p><br><p style=";text-align:right;direction:rtl">  ,  ,     OAuth ,       .   Nuget        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . </p><br><h2 id="dorabotka-vozmozhnosti-vhoda-pod-polzovatelyami-windows" style=";text-align:right;direction:rtl">      Windows </h2><br><p style=";text-align:right;direction:rtl">   ,  SPA           Microsoft,       ActiveDirectory.  ,       Html    ASP.NET, WebForms  ..,      Windows        WindowsIdentity, ,       .     Identity Server,         Windows,              claims <em>id_token</em>  <em>access_token</em> .  ,  IS4    ,        ,    <br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github</a> . ,             ASP.NET Core Identity 3.0. </p><br><p style=";text-align:right;direction:rtl">          Identity,    Razor  <em>Login</em>  <em>ExternalLogin</em>    ( CLI aspnet-codegenerator    ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">dotnet add package Microsoft.EntityFrameworkCore.SqlServer dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design dotnet aspnet-codegenerator identity -dc IdentityServer4WebApp.Data.ApplicationDbContext --files "Account.Login;Account.ExternalLogin"</code> </pre> <br><p style=";text-align:right;direction:rtl">    ,     Area   <em>Identity</em>    ,          . </p><br><p style=";text-align:right;direction:rtl">         ,       .   ,  Identity      I <em>AuthenticationSchemeProvider. GetAllSchemesAsync()</em>   DisplayName != null,    Windows   DisplayName = null.     LoginModel    <em>OnGetAsync</em>   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">ExternalLogins = (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _signInManager.GetExternalAuthenticationSchemesAsync()).ToList(); <span class="hljs-comment"><span class="hljs-comment">// &lt;&lt; &gt;&gt; ExternalLogins =(await _schemeProvider.GetAllSchemesAsync()).Where(x =&gt; x.DisplayName != null ||(x.Name.Equals(IISDefaults.AuthenticationScheme,StringComparison.OrdinalIgnoreCase))).ToList();</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">         <em>private readonly</em> <em>AuthenticationSchemeProvider _schemeProvider</em> .    View         <em>Login.cshtml</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"provider"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@provider.Name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Log in using your @provider.DisplayName account"</span></span></span><span class="hljs-tag">&gt;</span></span>@provider.DisplayName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;&lt; &gt;</span></span>&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"provider"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@provider.Name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Log in using your @(provider.DisplayName ??provider.Name) account"</span></span></span><span class="hljs-tag">&gt;</span></span>@(provider.DisplayName ??provider.Name)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,  windows      <em>launchSettings.json</em> <br> (   IIS,       <em>web.config</em> ). </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"iisSettings"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"windowsAuthentication"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"anonymousAuthentication"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iisExpress"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"applicationUrl"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:15479"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sslPort"</span></span>: <span class="hljs-number"><span class="hljs-number">44301</span></span> } },</code> </pre> <br><p style=";text-align:right;direction:rtl">        ยซWindowsยป    . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/e_/6s/-m/e_6s-m8ot5h52dv6dgvid8bgpky.png"></p><br><p style=";text-align:right;direction:rtl">     SPA      IdentityServer     .    ยซยป    <em>[AllowAnonymous]</em>    <em>LoginModel</em>   <em>[Authorize(AuthenticationSchemes = "Windows")]</em> ,     ,       WindowsIdentity. </p><br><p style=";text-align:right;direction:rtl">    <em>ExternalLogin</em> ,   Identity    Windows .      <em>ProcessWindowsLoginAsync</em> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessWindowsLoginAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> returnUrl</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> HttpContext.AuthenticateAsync(IISDefaults.AuthenticationScheme); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result?.Principal <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> WindowsPrincipal wp) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> redirectUrl = Url.Page(<span class="hljs-string"><span class="hljs-string">"./ExternalLogin"</span></span>, pageHandler: <span class="hljs-string"><span class="hljs-string">"Callback"</span></span>, values: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { returnUrl }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> props = _signInManager.ConfigureExternalAuthenticationProperties(IISDefaults.AuthenticationScheme, redirectUrl); props.Items[<span class="hljs-string"><span class="hljs-string">"scheme"</span></span>] = IISDefaults.AuthenticationScheme; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClaimsIdentity(IISDefaults.AuthenticationScheme); id.AddClaim(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Claim(JwtClaimTypes.Subject, wp.Identity.Name)); id.AddClaim(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Claim(JwtClaimTypes.Name, wp.Identity.Name)); id.AddClaim(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Claim(ClaimTypes.NameIdentifier, wp.Identity.Name)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wi = wp.Identity <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> WindowsIdentity; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> groups = wi.Groups.Translate(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(NTAccount)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hasUsersGroup = groups.Any(i =&gt; i.Value.Contains(<span class="hljs-string"><span class="hljs-string">@"BUILTIN\Users"</span></span>, StringComparison.OrdinalIgnoreCase)); id.AddClaim(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Claim(<span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span>, hasUsersGroup.ToString())); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> HttpContext.SignInAsync(IdentityConstants.ExternalScheme, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClaimsPrincipal(id), props); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Redirect(props.RedirectUri); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Challenge(IISDefaults.AuthenticationScheme); }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">       ,             . </p><br><p style=";text-align:right;direction:rtl">    <em>ExternalLoginModel.OnPost</em>          : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if (IISDefaults.AuthenticationScheme == provider) { return await ProcessWindowsLoginAsync(returnUrl); }</code> </pre> <br><p style=";text-align:right;direction:rtl">    Claim  Windows      Claim ยซhasUsersGroupยป,       ID  access,    .      ASP.NET Identity     UserClaims.        <em>ExternalLoginModel</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateClaims</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExternalLoginInfo info, ApplicationUser user, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] claimTypes</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (claimTypes == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> claimTypesHash = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(claimTypes); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> claims = (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _userManager.GetClaimsAsync(user)).Where(c =&gt; claimTypesHash.Contains(c.Type)).ToList(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _userManager.RemoveClaimsAsync(user, claims); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> claimType <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> claimTypes) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.Principal.HasClaim(c =&gt; c.Type == claimType)) { claims = info.Principal.FindAll(claimType).ToList(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _userManager.AddClaimsAsync(user, claims); } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">       <em>OnPostConfirmationAsync</em> (    <br>     ). </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _userManager.AddLoginAsync(user, info); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.Succeeded) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _signInManager.SignInAsync(user, isPersistent: <span class="hljs-literal"><span class="hljs-literal">false</span></span>); _logger.LogInformation(<span class="hljs-string"><span class="hljs-string">"User created an account using {Name} provider."</span></span>, info.LoginProvider); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> UpdateClaims(info, user, <span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span>);<span class="hljs-comment"><span class="hljs-comment">// return LocalRedirect(returnUrl); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">    <em>OnGetCallbackAsync</em> ,      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _signInManager.ExternalLoginSignInAsync(info.LoginProvider, info.ProviderKey, isPersistent: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, bypassTwoFactor : <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.Succeeded) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _userManager.FindByLoginAsync(info.LoginProvider, info.ProviderKey); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> UpdateClaims(info, user, <span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span>);<span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,        WebAPI   <br>  ยซhasUsersGroupยป.      ยซShouldHasUsersGroupยป </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">services.AddAuthorization(options =&gt; { options.AddPolicy(<span class="hljs-string"><span class="hljs-string">"ShouldHasUsersGroup"</span></span>, policy =&gt; { policy.RequireClaim(<span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span>);}); });</code> </pre> <br><p style=";text-align:right;direction:rtl">    <em>ExchangeRateController</em>       <br>     Policy. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Authorize(Policy = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ShouldHasUsersGroup"</span></span></span><span class="hljs-meta">)</span></span>] [HttpGet(<span class="hljs-string"><span class="hljs-string">"api/internalrates"</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerable&lt;ExchangeRateItem&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInternalRates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get().Select(i=&gt;{i.Value=Math.Round(i.Value<span class="hljs-number"><span class="hljs-number">-0.02</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>);<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i;}); }</code> </pre> <br><p style=";text-align:right;direction:rtl">   view    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ng generate component InternalData -t=true -s=true --skipTests=true</code> </pre> <br><p style=";text-align:right;direction:rtl">    template          . </p><br><pre style=";text-align:right;direction:rtl"> <code class="html hljs xml">//internal-data.component.ts: template: `<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-exchange-rate</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">apiUrl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"internalrates"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-exchange-rate</span></span></span><span class="hljs-tag">&gt;</span></span> `, //app-routing.module.ts: { path: ' internaldata', component: InternalDataComponent, canActivate: [AuthorizeGuard] } //app.component.html: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-item"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLinkActive</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["link-active"]'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav-link text-dark"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">routerLink</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'["/internaldata"]'</span></span></span><span class="hljs-tag">&gt;</span></span>Internal api data<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">             <br> , ,    .   ,  accsee_token    <br>   claim   <em>hasUsersGroup</em> ,       <br>     ApiResources  .  ,    ,        <em>appsettings.json</em> ,           <em>Startup. ConfigureServices</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">services.AddIdentityServer() .AddApiAuthorization&lt;ApplicationUser, ApplicationDbContext&gt;(options =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiResource = options.ApiResources.First(); apiResource.UserClaims = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span> }; });</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,     ,    windows      ,         . </p><br><p style=";text-align:right;direction:rtl">       ,   โ  Guard    claim   ยซhasUsersGroupยป     ยซ  ยป.    Guard  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ng generate guard AuthorizeWindowsGroupGuard --skipTests=true</code> </pre> <br><p style=";text-align:right;direction:rtl">      : </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">import { Injectable } from '@angular/core'; import { Observable } from 'rxjs'; import { map,tap} from 'rxjs/operators'; import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router, UrlTree } from '@angular/router'; import { AuthorizeService } from "./authorize.service"; import { ApplicationPaths, QueryParameterNames } from './api-authorization.constants'; @Injectable({ providedIn: 'root' }) export class AuthorizeWindowsGroupGuardGuard implements CanActivate{ constructor(private authorize: AuthorizeService, private router: Router) {} canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable&lt;boolean | UrlTree&gt; | Promise&lt;boolean | UrlTree&gt; | boolean | UrlTree { return this.authorize.getUser().pipe(map((u: any) =&gt; !!u &amp;&amp; !!u.hasUsersGroup)).pipe(tap((isAuthorized:boolean) =&gt; this.handleAuthorization(isAuthorized, state)));; } private handleAuthorization(isAuthenticated: boolean, state: RouterStateSnapshot) { if (!isAuthenticated) { window.location.href = "/Identity/Account/Login?" + QueryParameterNames.ReturnUrl + "=/"; } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl"> , ,         . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ path: 'internaldata', component: InternalDataComponent, canActivate: [AuthorizeWindowsGroupGuardGuard]</code> </pre> <br><p style=";text-align:right;direction:rtl">     IdentityServer,      claims ( <em>sub</em> , <em>profile</em> ),     ยซhasUsersGroupยป.      IdentityResource, -        IdentityResources          <em>Startup.ConfigureServices</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> identityResource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IdentityResource { Name = <span class="hljs-string"><span class="hljs-string">"customprofile"</span></span>, DisplayName = <span class="hljs-string"><span class="hljs-string">"Custom profile"</span></span>, UserClaims = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-string"><span class="hljs-string">"hasUsersGroup"</span></span> }, }; identityResource.Properties.Add(ApplicationProfilesPropertyNames.Clients, <span class="hljs-string"><span class="hljs-string">"*"</span></span>); options.IdentityResources.Add(identityResource);</code> </pre> <br><p style=";text-align:right;direction:rtl"> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>   ,         windows    ยซ ยป   SPA โ   ,     ,    Guard    . </p><br><h2 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br><p style=";text-align:right;direction:rtl"> ,  ASP.NET Core 3.0            IdentityServer4,         .      preview ,       .   ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github</a>   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar461433/">https://habr.com/ru/post/ar461433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar461417/index.html">ููู ุฑูุถุช db4o ูู ุงููุธุงู ุงูุตูุงุนู</a></li>
<li><a href="../ar461421/index.html">ููู ุชุคูู ููุณู ุถุฏ ุงูุฎุณุงุฆุฑ ุงููุญุชููุฉ ุนูุฏ ุงูุงุณุชุซูุงุฑ ูู ุงูุจูุฑุตุฉ: ุงูููุชุฌุงุช ุงููููููุฉ</a></li>
<li><a href="../ar461423/index.html">11 ูุตูุญุฉ: ููููุฉ ุชูุฏูู ุนูู UI / UX ุฅูู "ุบูุฑ ุงููุตูููู"</a></li>
<li><a href="../ar461425/index.html">ููู ุชุตุจุญ ูุฏูุฑ ููุชุฌ ูุชููู ุฃูุซุฑ</a></li>
<li><a href="../ar461431/index.html">"ูุญุจ ูููุฑู": DNS ุนุจุฑ HTTPS</a></li>
<li><a href="../ar461435/index.html">ุงูุชุนุฑู ุนูู ุงููุดุงุนุฑ ุจุงุณุชุฎุฏุงู ุดุจูุฉ ุนุตุจูุฉ ุชูุงููููุฉ</a></li>
<li><a href="../ar461437/index.html">370 ุงููุตุงุจูุญ ุงูููุฑุจุงุฆูุฉ</a></li>
<li><a href="../ar461439/index.html">ุจุฏุก ุชุดุบูู ููุชุจุฉ ูููู React ู TypeScript</a></li>
<li><a href="../ar461441/index.html">ุชูุงุฑูุฑ ุนู ุญุงูุฉ ุงูุชุฎุฒูู ุจุงุณุชุฎุฏุงู R. Parallel computing ุ ุงูุฑุณูู ุงูุจูุงููุฉ ุ xlsx ุ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููู ูุฐุง</a></li>
<li><a href="../ar461443/index.html">ุจุนุฏ ุงูุชุญููู: ูุง ูู ูุนุฑูู ุนู ุงููุฌูู ุงูุฃุฎูุฑ ุนูู ุดุจูุฉ ุฎุงุฏู ููุชุงุญ ุชุดููุฑ SKS Keyserver</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>