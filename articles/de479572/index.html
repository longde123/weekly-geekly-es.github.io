<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèΩ üñêÔ∏è ü§ûüèª Wie Netflix Microservices mit Pub-Sub-Daten umgehen ‚ÄºÔ∏è üë≤üèΩ üë®üèø‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die √úbersetzung des Artikels wurde speziell f√ºr Studierende des Kurses ‚ÄûHigh Load Architect‚Äú erstellt . 
 



 Einleitung 
 In der Netflix-Microservic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie Netflix Microservices mit Pub-Sub-Daten umgehen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/479572/">  <i>Die √úbersetzung des Artikels wurde speziell f√ºr Studierende des Kurses <a href="https://otus.pw/RCke/">‚ÄûHigh Load Architect‚Äú erstellt</a> .</i> <i><br></i> <br><br><img src="https://habrastorage.org/webt/ro/7u/1i/ro7u1is2mtzuzuuuzpdm07pgzc8.png"><br><hr><br><h3>  Einleitung </h3><br>  In der Netflix-Microservice-Architektur kann die √úbertragung von Datens√§tzen von einem zu mehreren Endpunkten √§u√üerst schwierig sein.  Diese Datens√§tze k√∂nnen alles von einer Servicekonfiguration bis hin zu Batch-Verarbeitungsergebnissen enthalten.  Um den Zugriff zu optimieren, ist h√§ufig eine residente Datenbank erforderlich, und √Ñnderungen m√ºssen sofort nach der Aktualisierung der Daten gesendet werden. <br><br>  Ein Beispiel, das die Notwendigkeit einer verteilten Verteilung eines Datensatzes widerspiegelt, sieht folgenderma√üen aus: Netflix f√ºhrt zu einem bestimmten Zeitpunkt eine gro√üe Anzahl von A / B-Tests durch.  Diese Tests decken mehrere Dienste und Befehle ab, und die Testbetreiber sollten in der Lage sein, sich im laufenden Betrieb neu zu konfigurieren.  Es erfordert auch die F√§higkeit, Knoten zu erkennen, die nicht die neueste Testkonfiguration erhalten konnten, und die F√§higkeit, ein Rollback auf √§ltere Versionen durchzuf√ºhren, falls etwas schief geht. <a name="habracut"></a><br><br>  Ein weiteres Beispiel f√ºr einen Datensatz, der verteilt werden muss, ist die Ausgabesequenz eines maschinellen Lernmodells: Die Ergebnisse seiner Arbeit k√∂nnen von mehreren Teams verwendet werden. ML-Teams sind jedoch nicht unbedingt daran interessiert, ununterbrochene Zugriffsdienste im Notfall zu unterst√ºtzen.  Anstelle der Situation, in der jedes Team Backups erstellen muss, um ein kurzes Rollback durchf√ºhren zu k√∂nnen, wird besonderes Augenmerk darauf gelegt, dass mehrere Teams die Ergebnisse eines einzigen Teams verwenden k√∂nnen. <br><br>  Ohne Unterst√ºtzung auf Infrastrukturebene versucht jedes Team letztendlich, seine eigene L√∂sung zu implementieren, aber es kommt zu unterschiedlichen Teams mit unterschiedlichem Erfolg.  Die Datens√§tze selbst sind unterschiedlich gro√ü, von einigen Bytes bis zu einigen Gigabytes.  Es ist wichtig, die F√§higkeit zu schaffen, die Leistung von Prozessen zu √ºberwachen und Fehlfunktionen mit speziellen Tools zu erkennen, damit Bediener schnell √Ñnderungen vornehmen k√∂nnen, ohne ihre eigene L√∂sung erstellen zu m√ºssen. <br><br><img src="https://habrastorage.org/webt/96/wa/uw/96wauwyjpxs3xx0kljnxvxcmk2i.png"><br>  <i>Datenverbreitung</i> <br><br>  Bei Netflix verwenden wir ein internes Pub / Sub-Datensystem namens Gutenberg.  Mit Gutenberg k√∂nnen Sie Datens√§tze mit Versionsverwaltung verteilen. Empf√§nger abonnieren die Daten und erhalten ihre neuesten Versionen, wenn sie ver√∂ffentlicht werden.  Jede Version des Datensatzes bleibt unver√§ndert und enth√§lt eine vollst√§ndige Darstellung der Daten, dh es besteht keine Abh√§ngigkeit von fr√ºheren Versionen.  Mit Gutenberg k√∂nnen Sie alte Versionen von Daten anzeigen, falls Sie beispielsweise ein Debugging, eine schnelle L√∂sung eines Datenproblems oder eine Umschulung eines maschinellen Lernmodells ben√∂tigen.  In diesem Artikel werden wir √ºber die Architektur auf hoher Ebene von Gutenberg sprechen. <br><br><h4>  Datenmodell </h4><br><img src="https://habrastorage.org/webt/7g/7z/b6/7g7zb66okgkinf1xxzvlyxk-60w.png"><br>  <i>1 Thema -&gt; viele Versionen</i> <br><br>  Gutenbergs Top-Design ist das Thema.  Der Herausgeber ver√∂ffentlicht Daten innerhalb des Themas und die Empf√§nger extrahieren sie daraus.  Die Ver√∂ffentlichung im Thema wird als separate Version hinzugef√ºgt.  Diese zeichnen sich durch eine spezifische Speicherrichtlinie aus, die die Anzahl der Versionen abh√§ngig vom Anwendungsfall bestimmt.  Beispielsweise k√∂nnen Sie ein Design so konfigurieren, dass 10 Versionen oder Versionen der letzten 10 Tage gespeichert werden. <br><br>  Jede Version enth√§lt Metadaten (Schl√ºssel und Werte) und einen Datenzeiger.  Der Datenzeiger kann als spezielle Metadaten betrachtet werden, die angeben, wo die ver√∂ffentlichten Daten tats√§chlich gespeichert sind.  Heute unterst√ºtzt Gutenberg direkte Datenzeiger (wenn die Nutzdaten in den Wert des Datenzeigers selbst geschrieben sind) und S3-Datenzeiger (wenn die Nutzdaten in S3 gespeichert sind).  Direkte Datenzeiger werden normalerweise verwendet, wenn die Datenmenge gering ist (weniger als 1 MB), und S3 wird als Sicherungsspeicher verwendet, wenn das Datenvolumen gro√ü ist. <br><br><img src="https://habrastorage.org/webt/z7/we/mp/z7wemphye670skkx23aemtfkdyi.png"><br>  <i>1 Thema -&gt; viele ver√∂ffentlichte Sets</i> <br><br>  Gutenberg bietet die M√∂glichkeit, eine Ver√∂ffentlichung an eine bestimmte Gruppe von Empf√§ngerbenutzern zu senden. Beispielsweise kann eine Gruppe nach einer bestimmten Region, Anwendung oder einem bestimmten Cluster gruppiert werden.  Dies kann verwendet werden, um die Qualit√§t von Daten√§nderungen zu steuern oder den Datensatz zu begrenzen, sodass eine Teilmenge von Anwendungen ihn abonnieren kann.  Publisher bestimmen den Ver√∂ffentlichungsbereich einer bestimmten Version der Daten und k√∂nnen Bereiche zu zuvor ver√∂ffentlichten Daten hinzuf√ºgen.  Beachten Sie, dass dies bedeutet, dass das Konzept der neuesten Version der Daten von einem bestimmten Bereich abh√§ngt. Je nach dem vom Herausgeber festgelegten Ver√∂ffentlichungsbereich erhalten die beiden Anwendungen m√∂glicherweise die neuesten unterschiedlichen Versionen der Daten.  Der Gutenberg-Dienst ordnet Empf√§ngeranwendungen Ver√∂ffentlichungsbereichen zu, bevor entschieden wird, was als neueste Version gesendet werden soll. <br><br><h3>  Anwendungsf√§lle </h3><br>  Der h√§ufigste Anwendungsfall f√ºr Gutenberg ist die Verteilung von Daten unterschiedlicher Gr√∂√üe von einem Verlag an mehrere Empf√§nger.  H√§ufig werden die Daten im Speicher des Empf√§ngers gespeichert und als "gemeinsamer Cache" verwendet, in dem sie w√§hrend der Ausf√ºhrung des Empf√§ngercodes immer verf√ºgbar bleiben und bei Bedarf atomar unter der Haube ausgetauscht werden.  Viele dieser Anwendungsf√§lle k√∂nnen in ‚ÄûKonfigurationen‚Äú gruppiert werden, z. B. die <a href="https://medium.com/netflix-techblog/distributing-content-to-open-connect-3e3e391d4dc9">Open Connect Appliance-</a> Cache-Konfiguration, unterst√ºtzte Ger√§tetyp-IDs, unterst√ºtzte Zahlungsmethoden-Metadaten und A / B-Testkonfigurationen.  Gutenberg bietet eine Abstraktion zwischen dem Ver√∂ffentlichen und Empfangen dieser Daten, sodass Verlage ihre Anwendung frei durchlaufen k√∂nnen, ohne die nachgeschalteten Empf√§nger zu beeintr√§chtigen.  In einigen F√§llen erfolgt die Ver√∂ffentlichung √ºber eine von Gutenberg verwaltete Benutzeroberfl√§che, und die Teams m√ºssen ihre eigene Ver√∂ffentlichungsanwendung √ºberhaupt nicht ber√ºhren. <br><br>  Eine weitere Verwendung des Gutenberg-Systems ist die Speicherung versionierter Daten.  Dies ist n√ºtzlich f√ºr Anwendungen f√ºr maschinelles Lernen, bei denen Teams Modelle auf der Grundlage von Verlaufsdaten erstellen und trainieren, deren zeitliche Ver√§nderung beobachten, dann bestimmte Parameter √§ndern und die Anwendung erneut ausf√ºhren.  Am h√§ufigsten wird Gutenberg bei Stapelberechnungen verwendet, um die Ergebnisse dieser Berechnungen als verschiedene Versionen von Datens√§tzen zu speichern und zu verteilen.  In Online-Anwendungsf√§llen werden Themen abonniert, um Echtzeitdaten aus den neuesten Versionss√§tzen bereitzustellen, w√§hrend autonome Systeme Verlaufsdaten aus denselben Themen verwenden k√∂nnen, um beispielsweise ein Modell f√ºr maschinelles Lernen zu vermitteln. <br><br>  Es ist wichtig zu beachten, dass Gutenberg nicht als Ereignissystem konzipiert ist, sondern ausschlie√ülich zur Versionskontrolle und Datenverteilung dient.  Insbesondere bedeuten h√§ufige Ver√∂ffentlichungen nicht, dass der Abonnent jede Version erhalten muss.  Wenn er ein Update anfordert, erh√§lt er die neueste Version, auch wenn seine aktuelle Version derzeit weit hinter der aktuellen Version zur√ºckliegt.  Herk√∂mmliche Pub-Sub- oder Ereignissysteme eignen sich eher f√ºr kleine Nachrichten, die nacheinander gesendet werden.  Das hei√üt, Empf√§nger k√∂nnen eine Idee f√ºr den gesamten Datensatz erstellen, indem sie den gesamten (komprimierten) Ereignisstrom verwenden.  Gutenberg beabsichtigt jedoch, eine vollst√§ndige, unver√§nderliche Darstellung eines Datensatzes zu ver√∂ffentlichen und zu verwenden. <br><br><h3>  Entwicklung und Architektur </h3><br>  Gutenberg besteht aus einem gRPC-Service und einer REST-API sowie einer Java-Client-Bibliothek, die die gRPC-API verwendet. <br><br><img src="https://habrastorage.org/webt/lw/bz/m_/lwbzm_dd871-cgpebuwlmorejd4.png"><br>  <i>Hochwertige Architektur</i> <br><br><h3>  Kunde </h3><br>  Die Gutenberg-Clientbibliothek verarbeitet Aufgaben wie das Verwalten eines Abonnements, das Laden / Entladen von S3, <a href="https://github.com/Netflix/atlas">Atlas-</a> Metriken und Parameter, die mithilfe der <a href="https://github.com/Netflix/archaius">Archaius-</a> Eigenschaften konfiguriert werden k√∂nnen.  Sie interagiert mit dem Gutenberg-Service √ºber gRPC und nutzt <a href="https://github.com/Netflix/eureka">Eureka</a> , um Services zu ermitteln. <br><br><h3>  Posten </h3><br>  Verleger verwenden in der Regel APIs auf hoher Ebene, um Zeichenfolgen, Dateien und Bytearrays zu ver√∂ffentlichen.  Abh√§ngig von der Gr√∂√üe der Daten k√∂nnen sie als direkter Zeiger auf die Daten ver√∂ffentlicht oder in S3 hochgeladen und dann als Datenzeiger S3 ver√∂ffentlicht werden.  Der Client kann die Nutzdaten im Namen des Publishers auf S3 hochladen oder nur die in S3 bereits vorhandenen Nutzdaten-Metadaten ver√∂ffentlichen. <br><br>  Direkte Datenzeiger werden automatisch global repliziert.  In S3 ver√∂ffentlichte Daten werden standardm√§√üig vom Herausgeber in mehreren Bereichen hochgeladen, k√∂nnen jedoch auch angepasst werden. <br><br><h3>  Abonnementverwaltung </h3><br>  Die Clientbibliothek bietet die Verwaltung von Empf√§ngerabonnements.  Auf diese Weise k√∂nnen Benutzer Abonnements f√ºr bestimmte Themen erstellen, aus denen die Bibliothek Daten extrahiert (z. B. aus S3), um diese an den vom Benutzer festgelegten Empf√§nger zu √ºbertragen.  Abonnements funktionieren nach dem Umfragemodell. Sie fordern alle 30 Sekunden ein neues Update vom Service an und senden die Version, die sie zuletzt erhalten haben.  Abonnierte Kunden verwenden keine √§ltere Version der Daten als die, √ºber die sie derzeit verf√ºgen, wenn sie nicht behoben sind (siehe "Fehlertoleranz" weiter unten).  Die Logik f√ºr wiederholte Anforderungen ist verkabelt und konfigurierbar.  Beispielsweise k√∂nnen Benutzer Gutenberg so konfigurieren, dass √§ltere Versionen der Daten verwendet werden, wenn der Downloadvorgang unterbrochen wird, oder dass die neueste Version der Daten beim Start verarbeitet wird, meistens, um mit Daten√§nderungen zu arbeiten, die nicht mit Feedback kompatibel sind.  Gutenberg bietet auch ein vorkonfiguriertes Abonnement an, in dem die neuesten Daten gespeichert und automatisch aktualisiert werden, wenn √Ñnderungen eintreffen.  Dies trifft auf die meisten Abonnement-Anwendungsf√§lle zu, in denen Abonnenten zu einem bestimmten Zeitpunkt nur den aktuellen Wert ber√ºcksichtigen, sodass Benutzer einen Standardwert angeben k√∂nnen, z. B. f√ºr ein Thema, das noch nie zuvor ver√∂ffentlicht wurde (z. B. wenn das Thema f√ºr die Konfiguration verwendet wird), oder Wenn je nach Thema ein Fehler auftritt (um zu vermeiden, dass der Start des Dienstes blockiert wird, wenn ein g√ºltiger Standardwert vorliegt). <br><br><h3>  Empf√§nger-API </h3><br>  Gutenberg stellt auch Client-APIs auf hoher Ebene bereit, die unter der Haube √ºber gRPC-APIs auf niedriger Ebene verf√ºgen und zus√§tzliche Funktionen und Transparenz bei der Ausf√ºhrung von Abfragen bieten.  Ein Beispiel ist das Herunterladen von Daten f√ºr ein bestimmtes Thema und eine bestimmte Version, die h√§ufig von mit <a href="https://github.com/Netflix/hollow">Netflix Hollow</a> verbundenen Komponenten verwendet werden.  Ein weiteres Beispiel ist der Empfang der neuesten Version eines Themas zu einem bestimmten Zeitpunkt - ein g√§ngiger Anwendungsfall zum Debuggen oder Lehren von Modellen f√ºr maschinelles Lernen. <br><br><h3>  Nachhaltigkeit und "Transparenz" des Kunden </h3><br>  Gutenberg wurde mit dem Ziel entwickelt, den Empf√§ngerservices einen erfolgreichen Start zu erm√∂glichen, anstatt zu gew√§hrleisten, dass sie mit den aktuellsten Daten beginnen.  Aus diesem Grund wurde die Clientbibliothek mit Sicherungslogik erstellt, um Zust√§nde zu verarbeiten, bei denen keine Interaktion mit dem Gutenberg-Dienst m√∂glich ist.  Wenn die HTTP-Anforderungen fehlschlagen, l√§dt der Client den Backup-Metadaten-Cache des ver√∂ffentlichten Themas aus S3 und arbeitet damit.  Dieser Cache enth√§lt alle Informationen, um zu entscheiden, ob das Update angewendet werden soll und wo die Daten abgerufen werden sollen (entweder aus den Publikationsmetadaten selbst oder aus S3).  Auf diese Weise k√∂nnen Kunden Daten abrufen (die abh√§ngig vom aktuellen Status des Sicherungscaches m√∂glicherweise veraltet sind), ohne den Dienst zu verwenden. <br><br>  Einer der Vorteile der Bereitstellung einer Clientbibliothek besteht in der M√∂glichkeit, Metriken abzurufen, mit denen Infrastrukturprobleme im Allgemeinen und Fehler in bestimmten Anwendungen gemeldet werden k√∂nnen.  Heute werden diese Metriken vom Gutenberg-Team verwendet, um die SLI-Verteilung von Ver√∂ffentlichungen und Warnungen bei typischen Problemen zu √ºberwachen.  Einige Kunden verwenden diese Metriken auch, um bestimmte anwendungsspezifische Fehler zu melden, z. B. einzelne Ver√∂ffentlichungsfehler oder eine bestimmte Themenverweigerung. <br><br><h3>  Server </h3><br>  Gutenberg ist eine <a href="https://github.com/Netflix/governator">Governator</a> / Tomcat-Anwendung, die gRPC- und REST-Endpunkte bereitstellt.  Es verwendet den global replizierten Cassandra-Cluster zum Speichern und Verteilen von Publikationsmetadaten in jeder Region.  Instanzen, die Empf√§ngeranforderungen verarbeiten, werden getrennt von Instanzen skaliert, die Ver√∂ffentlichungsanforderungen verarbeiten.  Es gibt ungef√§hr 1.000 Mal mehr Publikationsanfragen als Publikationsanfragen.  Dar√ºber hinaus k√∂nnen Sie auf diese Weise die Abh√§ngigkeit der Ver√∂ffentlichung vom Eingang beseitigen, sodass ein pl√∂tzlicher Anstieg der Ver√∂ffentlichungen sich nicht auf den Eingang auswirkt und umgekehrt. <br><br>  Jede Instanz im Empf√§ngeranforderungscluster verarbeitet ihren eigenen speicherinternen Cache der letzten Ver√∂ffentlichungen und ruft ihn alle paar Sekunden von Cassandra ab.  Dies ist erforderlich, um eine gro√üe Anzahl von Empfangsanforderungen von signierten Clients zu verarbeiten, ohne Datenverkehr an den Cassandra-Cluster zu √ºbertragen.  Dar√ºber hinaus sch√ºtzen Caches mit einem kleinen TTL-Anforderungspool vor Abfragespitzen, die Cassandra m√∂glicherweise so stark verlangsamen, dass sie die gesamte Region betreffen.  Wir hatten Situationen, in denen pl√∂tzliche Fehler, die mit der Umverteilung gro√üer Cluster zusammenfielen, zu Unterbrechungen im Gutenberg-Dienst f√ºhrten.  Dar√ºber hinaus verwenden wir den adaptiven <a href="https://github.com/Netflix/concurrency-limits">Parallelit√§tsbegrenzer</a> der urspr√ºnglichen Anwendung, um Anwendungen mit falschem Verhalten zu unterdr√ºcken, ohne andere zu beeinflussen. <br><br>  In F√§llen, in denen Daten in S3 in mehreren Regionen ver√∂ffentlicht werden, entscheidet der Server, welches Segment zum Herunterladen an den Client zur√ºckgesendet wird, je nachdem, wo sich der Client befindet.  Au√üerdem kann der Dienst dem Client ein Segment in der n√§chstgelegenen Region bereitstellen oder den Client zwingen, in eine andere Region zu wechseln, wenn die aktuelle Region aus dem einen oder anderen Grund getrennt wird. <br><br>  Bevor Gutenberg die Abonnementdaten an die Empf√§nger zur√ºcksendet, √ºberpr√ºft es zun√§chst die Daten auf Konsistenz.  Wenn die √úberpr√ºfung fehlschl√§gt und der Abonnent bereits einige Daten erhalten hat, gibt der Dienst nichts zur√ºck, was bedeutet, dass das Update nicht verf√ºgbar ist.  Wenn der Abonnenten-Client noch keine Daten erhalten hat (dies bedeutet normalerweise, dass er gerade gestartet wurde), fordert der Dienst den Verlauf des Themas an und gibt den letzten Wert zur√ºck, der die Konsistenzpr√ºfung besteht.  Dies ist auf die Tatsache zur√ºckzuf√ºhren, dass es auf Cassandra-Ebene zu episodischen Replikationsverz√∂gerungen kommt, bei denen die Metadaten der zuletzt ver√∂ffentlichten Version nur teilweise repliziert wurden, bis Abonnenten neue Daten anfordern.  Dies kann dazu f√ºhren, dass der Client unvollst√§ndige Daten empf√§ngt, was dann zu Datenanforderungsfehlern oder Fehlern in der Gesch√§ftslogik f√ºhrt.  Das Durchf√ºhren solcher Konsistenzpr√ºfungen auf dem Server sch√ºtzt die Empf√§nger vor Warnungen √ºber m√∂gliche Konsistenz, die mit der Auswahl eines Data Warehouse-Dienstes einhergehen. <br><br>  Die M√∂glichkeit, Ver√∂ffentlichungen von Themen und Sites zu √ºberwachen, auf denen diese Themen verwendet werden, ist eine wichtige Funktion f√ºr die Pr√ºfung und Erfassung von Nutzungsinformationen.  Um diese Daten zu erfassen, f√§ngt der Dienst Anforderungen von Publishern und Empf√§ngern ab (sowohl Anforderungen zum Aktualisieren von Daten von Abonnenten als auch von anderen) und indiziert sie mithilfe der <a href="https://medium.com/netflix-techblog/keystone-real-time-stream-processing-platform-a3ee651812a">Keystone-</a> Daten- <a href="https://medium.com/netflix-techblog/keystone-real-time-stream-processing-platform-a3ee651812a">Pipeline</a> in Elasticsearch.  So haben wir die M√∂glichkeit, Daten f√ºr die √úberwachung von Themen zu erhalten, die verwendet werden und nicht mehr vorhanden sind.  Wir ver√∂ffentlichen ausf√ºhrliche Links zum Kibana-Dashboard √ºber die interne Benutzeroberfl√§che, damit Themenbesitzer ihre Abonnenten unabh√§ngig verwalten k√∂nnen. <br><br>  Neben Clustern, die Herausgeber- und Empf√§ngeranforderungen verarbeiten, startet der Gutenberg-Dienst einen weiteren Cluster, der periodische Anforderungen verarbeitet.  Insbesondere l√∂st er zwei Probleme: <br><br><ol><li>  Alle paar Minuten werden die neuesten Ver√∂ffentlichungen und Metadaten gesammelt und an S3 gesendet.  Dies initiiert den Start des Sicherungscaches, der vom Client wie oben beschrieben verwendet wird. </li><li>  Der Garbage Collector l√∂scht Versionen von Themen, die ihren Aufbewahrungsrichtlinien nicht entsprechen.  Au√üerdem werden damit verkn√ºpfte Daten (z. B. S3-Objekte) gel√∂scht, und es wird ein klar definierter Datenlebenszyklus sichergestellt. </li></ol><br><h3>  Fehlertoleranz </h3><br><h4>  Snap </h4><br>  In der Welt der Anwendungsentwicklung treten erfolglose Bereitstellungen auf, und Rollbacks auf fr√ºhere Versionen sind eine g√§ngige Strategie zur Behebung solcher Probleme.  Die datengesteuerte Architektur verkompliziert die Situation, da das Verhalten von Daten bestimmt wird, die sich mit der Zeit √§ndern. <br><br>  Die von Gutenberg verteilten Daten beeinflussen und steuern in vielen F√§llen das Verhalten des Systems.  Das hei√üt, wenn etwas schief geht, m√ºssen Sie einen Rollback auf eine nachgewiesene gute Version der Daten durchf√ºhren.  Um die Situation zu entsch√§rfen, erm√∂glicht es Gutenberg, das Thema mit einer bestimmten Version zu "verkn√ºpfen".  Die Pins √ºberschreiben die neueste Version der Daten und zwingen den Client, auf diese Version zu aktualisieren. Auf diese Weise k√∂nnen Sie eine kritische Situation schnell beheben, anstatt herauszufinden, wie die neueste Arbeitsversion ver√∂ffentlicht werden soll.  Sie k√∂nnen sogar eine Bindung auf den Ver√∂ffentlichungsbereich anwenden, sodass nur Empf√§nger aus diesem Bereich die Daten verwenden k√∂nnen.  Die Stifte √ºberschreiben auch die Daten, die w√§hrend der aktiven Bindung ver√∂ffentlicht wurden. Wenn der Stift gel√∂scht wird, erhalten Clients jedoch die neueste Version. Dies kann die neueste angeheftete Version oder eine neue Version sein, die ver√∂ffentlicht wurde, w√§hrend die alte angeheftet wurde. <br><br><h3>  Sequentielle Bereitstellung </h3><br>  Beim Bereitstellen von neuem Code wird h√§ufig empfohlen, neue Assemblys mit einer Teilmenge des Datenverkehrs zu erstellen, diese schrittweise bereitzustellen oder auf andere Weise das Bereitstellungsrisiko zu verringern und es zu verlangsamen.  In F√§llen, in denen Daten das Verhalten steuern, sollte ein √§hnliches Prinzip angewendet werden. <br><br>   ,   Gutenberg, ‚Äî         <a href="https://medium.com/netflix-techblog/global-continuous-delivery-with-spinnaker-2a6896c23ba7">Spinnaker</a> .       ,         .      ,            .     , ,       ,      ,      ,    . ,           AWS-  . <br><br><h4>  </h4><br> Gutenberg   Netflix     .    Gutenberg       ,              6 .      ‚Äì           ,        1-2   ,        12 . <br><br>    24-    ,      ,     .   ,         200,          7.    -    ,      ,      Hollow.     ,       ,      ,     ‚Äì 60,     ‚Äì 4. <br><br><h4>   </h4><br>   ,      Gutenberg: <br><br><ul><li> <b>  </b> :    Gutenberg   Java-,        Node.JS  Python-.       ,   REST API Gutenberg   .     ,       Node.JS  Python. </li><li> <b>   </b> :     Gutenberg               .        Gutenberg. </li><li> <b>  </b> :            ,     . ,                  . </li><li> <b> </b> : ,   Gutenberg,    Gutenberg     .            ,        . </li><li> <b> </b> :      ,     ,            .           ,   Elasticsearch. </li><li> <b>  </b> :   Netflix ‚Äì       .           ,    Gutenberg  ,           . </li></ul><br>  <i>Das ist alles.</i> <i>    <a href="https://otus.pw/RCke/"></a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479572/">https://habr.com/ru/post/de479572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479562/index.html">Erstellen Sie die Struktur eines einfachen Multi-Plattform-Bot</a></li>
<li><a href="../de479564/index.html">ClickHouse + Graphite: So reduzieren Sie den Speicherplatzbedarf erheblich</a></li>
<li><a href="../de479566/index.html">Unterdr√ºckungssystem oder Reverse Engineering der Matrix + Nachweis der Simultanzeit</a></li>
<li><a href="../de479568/index.html">Ich arbeite als Programmierer in einer Firma, aber ich m√∂chte meine 50 Jahre anders kennenlernen</a></li>
<li><a href="../de479570/index.html">Python-Einstiegspunkte</a></li>
<li><a href="../de479574/index.html">4 Aspekte des ITIL-Service-Managements</a></li>
<li><a href="../de479578/index.html">Print-Outsourcing: So stellen Sie sicher, dass der Auftragnehmer keine Rechnungsbetr√§ge berechnet</a></li>
<li><a href="../de479580/index.html">Golden Canon Grid: Horrorgeschichte f√ºr das Frontend</a></li>
<li><a href="../de479584/index.html">Allgemeine Einbruchsicherungs- und -verh√ºtungssysteme</a></li>
<li><a href="../de479586/index.html">Der Efros Config Inspector bietet auch denjenigen Vorteile, die ihn nicht verwenden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>