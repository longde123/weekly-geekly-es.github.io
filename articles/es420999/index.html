<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏üèΩ üìì üõÄüèª Kivy Xamarin Reaccionar nativo. Tres marcos: un experimento (parte 2) ‚óΩÔ∏è üîç üëàüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este es el segundo art√≠culo de una serie en el que comparamos Kivy, Xamarin.Forms y React Native. En √©l, intentar√© escribir el mismo programador de ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kivy Xamarin Reaccionar nativo. Tres marcos: un experimento (parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devexpress/blog/420999/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gx/n_/ry/gxn_rykvsvbib9patx2rd4pnyho.png"></div><br>  Este es el segundo art√≠culo de una serie en el que comparamos Kivy, Xamarin.Forms y React Native.  En √©l, intentar√© escribir el mismo programador de tareas, pero usando Xamarin.Forms.  Ver√© c√≥mo lo hago y lo que tengo que enfrentar. <br><br>  No repetir√© TK; se puede ver en el primer art√≠culo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kivy.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Xamarin</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reaccionar nativo.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tres marcos: un experimento</a> <br><br>  La tercera parte trata sobre React Native: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kivy.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Xamarin</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reaccionar nativo.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tres marcos: un experimento (parte 3)</a> <br><a name="habracut"></a><br>  Para comenzar, dir√© algunas palabras sobre la plataforma Xamarin.Forms y c√≥mo abordar√© la soluci√≥n de la tarea.  Xamarin.Forms es un complemento para Xamarin.iOs y Xamarin.Android.  Despu√©s del ensamblaje, la parte general se "implementa" en los controles nativos est√°ndar, por lo que, en esencia, se obtienen aplicaciones completamente nativas para todas las plataformas compatibles. <br><br>  La sintaxis de Xamarin.Forms est√° muy cerca de la sintaxis de WPF, y la parte general est√° escrita en .NET Standard.  Como resultado, tiene la oportunidad de utilizar el enfoque MVVM al desarrollar la aplicaci√≥n, as√≠ como acceder a una gran cantidad de bibliotecas de terceros escritas para .NET Standard y ya en NuGet, que puede usar de forma segura en sus aplicaciones Xamarin.Forms. <br><br>  El c√≥digo fuente de la aplicaci√≥n aqu√≠ est√° disponible en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><br>  Entonces, creemos una aplicaci√≥n Xamarin.Forms vac√≠a y comencemos.  Tendremos un modelo de datos simple, con solo dos clases de Nota y Proyecto: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Note</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> UserIconPath { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> UserName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime EditTime { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Project</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObservableCollection&lt;Note&gt; Notes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Project</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Notes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservableCollection&lt;Note&gt;(); } }</code> </pre> <br>  Intentar√© adherirme al enfoque MVVM, pero no usar√© ninguna biblioteca especial, para no complicar el c√≥digo.  Todas las clases de modelos y modelos de vista implementar√°n la interfaz INotifyPropertyChanged.  Eliminar√© su implementaci√≥n en los ejemplos de c√≥digo dados por brevedad. <br><br>  La primera pantalla ser√° una lista de proyectos con la capacidad de crear uno nuevo o eliminar el actual.  Hagamos un modelo para √©l: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObservableCollection&lt;Project&gt; Projects { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Projects = Project.GetTestProjects(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddNewProject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { Project project = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Project() { Name = name }; Projects.Add(project); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeleteProject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Project project</span></span></span><span class="hljs-function">)</span></span> { Projects.Remove(project); } }</code> </pre><br>  C√≥digo de pantalla en s√≠: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://xamarin.com/schemas/2014/forms"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2009/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.View"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TodoList.View.ProjectsPage"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolbarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddNew_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"plus.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Projects}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTapped</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"List_ItemTapped"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TextColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Black"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  El dise√±o es bastante simple, lo √∫nico en lo que quiero detenerme es en la implementaci√≥n de botones deslizantes para eliminar proyectos.  En ListView existe el concepto de ContextActions, si lo configura, en iOS se implementar√° mediante deslizar, en Android, a trav√©s de un toque prolongado.  Este enfoque se implementa en Xamarin.Forms, porque es nativo para cada plataforma.  Sin embargo, si queremos deslizar el dedo en el Android, tendremos que implementarlo con nuestras manos en la parte nativa del Android.  No tengo la tarea de dedicar mucho tiempo a esto, as√≠ que me qued√© satisfecho con el enfoque est√°ndar :) Como resultado, deslizar en iOS y el men√∫ contextual en Android se implementan de manera bastante simple: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Sustituyendo los datos de prueba, obtenemos la siguiente lista: <br><br><img src="https://habrastorage.org/webt/n0/p5/-b/n0p5-bq3joxvrfbimbndtqucyga.png"><br><br>  Ahora pasemos al controlador de eventos.  Comencemos con un simple: eliminar un proyecto: <br><br><pre> <code class="cs hljs">MainViewModel ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BindingContext <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MainViewModel; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DeleteItem_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> { MenuItem menuItem = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MenuItem; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (menuItem == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; Project project = menuItem.CommandParameter <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Project; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (project == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> answer = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DisplayAlert(<span class="hljs-string"><span class="hljs-string">"Are you sure?"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Would you like to remove the {0} project"</span></span>, project.Name), <span class="hljs-string"><span class="hljs-string">"Yes"</span></span>, <span class="hljs-string"><span class="hljs-string">"No"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(answer) ViewModel.DeleteProject(project); }</code> </pre><br>  No es bueno eliminar algo sin preguntarle al usuario, y en Xamarin.Forms es f√°cil hacerlo usando el m√©todo est√°ndar DisplayAlert.  Despu√©s de llamarlo, aparecer√° la siguiente ventana: <br><br><img src="https://habrastorage.org/webt/l3/tt/n0/l3ttn0euz7uze7sr2blh3fwckbk.png"><br><br>  Esta ventana es de iOs.  Android tendr√° su propia versi√≥n de una ventana similar. <br><br>  A continuaci√≥n implementaremos la adici√≥n de un nuevo proyecto.  Parecer√≠a que esto se hace por analog√≠a, pero en Xamarin.Forms no hay implementaci√≥n de un di√°logo similar al que confirme la eliminaci√≥n, pero que le permite ingresar texto.  Hay dos posibles soluciones: <br><br><ul><li>  escriba su propio servicio que genere di√°logos nativos; </li><li>  implementar alg√∫n tipo de soluci√≥n alternativa al lado de Xamarin.Forms. </li></ul><br>  No quer√≠a perder el tiempo elevando el di√°logo a trav√©s del nativo, y decid√≠ usar el segundo enfoque, cuya implementaci√≥n tom√© del hilo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øC√≥mo hacer un simple di√°logo de InputBox?</a>  , a saber, el m√©todo Task InputBox (navegaci√≥n INavigation). <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddNew_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> InputBox(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Navigation); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; ViewModel.AddNewProject(result); }</code> </pre><br>  Ahora procesaremos toque por fila para abrir el proyecto: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">List_ItemTapped</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, Xamarin.Forms.ItemTappedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Project project = e.Item <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Project; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (project == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Navigation.PushAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotesPage() { BindingContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProjectViewModel(project) }); }</code> </pre><br>  Como puede ver en el c√≥digo anterior, para ir a la ventana del proyecto, necesitamos su modelo de vista y el objeto de p√°gina de la ventana. <br><br>  Me gustar√≠a decir algunas palabras sobre la navegaci√≥n.  La propiedad de navegaci√≥n se define en la clase VisualElement y le permite trabajar con el panel de navegaci√≥n en cualquier vista de su aplicaci√≥n sin tener que desplazarla con las manos.  Sin embargo, para que este enfoque funcione, a√∫n necesita crear este panel usted mismo.  Por lo tanto, en App.xaml.cs escribimos: <br><br><pre> <code class="cs hljs">NavigationPage navigation = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NavigationPage(); navigation.PushAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.ProjectsPage() { BindingContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainViewModel() }); MainPage = navigation;</code> </pre><br>  Donde ProjectsPage es exactamente la ventana que ahora estoy describiendo. <br><br>  La ventana con notas es muy similar a la ventana con proyectos, por lo que no la describir√© en detalle, me centrar√© solo en matices interesantes. <br><br>  El dise√±o de esta ventana result√≥ ser m√°s complicado, porque cada l√≠nea deber√≠a mostrar m√°s informaci√≥n: <br><br><div class="spoiler">  <b class="spoiler_title">Vista de notas</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://xamarin.com/schemas/2014/forms"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2009/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TodoList.View.NotesPage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.View"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:utils</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clr-namespace:TodoList.Utils"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Project.Name}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.Resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ResourceDictionary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">utils:PathToImageConverter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PathToImageConverter"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ResourceDictionary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.Resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToolbarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddNew_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"plus.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage.ToolbarItems</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Project.Notes}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTapped</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"List_ItemTapped"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HasUnevenRows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Image</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding UserIconPath, Converter={StaticResource PathToImageConverter}}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding UserName}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontAttributes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Bold"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding EditTime}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BackgroundColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalOptions</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FillAndExpand"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RowMenu_Clicked"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyLabel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0,10,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.ColumnSpan</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Text}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">local:MyCellGrid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DeleteItem_Clicked"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsDestructive</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding .}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Delete"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell.ContextActions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ViewCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DataTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView.ItemTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentPage</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  En el contenido de la ventana, nuevamente tenemos un ListView, adjunto a la colecci√≥n de notas.  Sin embargo, queremos la altura de las celdas en el contenido, pero no m√°s de 150, para esto configuramos HasUnevenRows = "True" para que ListView permita que las celdas ocupen tanto espacio como lo soliciten.  Pero en esta situaci√≥n, las filas pueden solicitar una altura de m√°s de 150 y el ListView les permitir√° mostrarse as√≠.  Para evitar esto en la celda, utilic√© a mi heredero del panel Grid: MyCellGrid.  Este panel en la operaci√≥n de medici√≥n solicita la altura de los elementos internos y la devuelve 150 si es mayor: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyCellGrid</span></span> : <span class="hljs-title"><span class="hljs-title">Grid</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> SizeRequest </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMeasure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> widthConstraint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> heightConstraint</span></span></span><span class="hljs-function">)</span></span> { SizeRequest sizeRequest = <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnMeasure(widthConstraint, heightConstraint); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sizeRequest.Request.Height &lt;= <span class="hljs-number"><span class="hljs-number">150</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sizeRequest; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SizeRequest(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size() { Width = sizeRequest.Request.Width, Height = <span class="hljs-number"><span class="hljs-number">150</span></span> }); } }</code> </pre><br>  Dado que, de acuerdo con los TOR, debemos poder editar y eliminar, adem√°s de tocar y deslizar, tambi√©n el men√∫ que se abre al hacer clic en el bot√≥n en la esquina de la l√≠nea, agregaremos este bot√≥n a la plantilla de celda y nos suscribiremos al toque.  En este caso, si el usuario hace clic en el bot√≥n, intercepta el gesto y no recibiremos eventos de hacer clic en la l√≠nea. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BackgroundColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalOptions</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FillAndExpand"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clicked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RowMenu_Clicked"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Con los datos de prueba, nuestro formulario se ve as√≠: <br><br><img src="https://habrastorage.org/webt/tm/mq/g6/tmmqg6ubrpian_argfz2dmn2dve.png"><br><br>  El procesamiento de las acciones del usuario en este formulario es completamente an√°logo al que se escribi√≥ para la ventana de la lista de proyectos.  Quiero detenerme solo en el men√∫ contextual con nuestro bot√≥n en la esquina de la l√≠nea.  Al principio, pens√© que lo har√≠a en el nivel de Xamarin.Forms sin ning√∫n problema. <br><br>  De hecho, solo necesitamos crear una vista de algo como esto: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄùEdit‚Äù/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄùDelete‚Äù/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Y mu√©stralo al lado del bot√≥n.  Sin embargo, el problema es que no podemos saber exactamente d√≥nde est√° "al lado del bot√≥n".  Este men√∫ contextual debe ubicarse en la parte superior de ListView y, cuando se abre, colocarse en las coordenadas de la ventana.  Para hacer esto, debe conocer las coordenadas del bot√≥n presionado en relaci√≥n con la ventana.  Podemos obtener las coordenadas del bot√≥n solo en relaci√≥n con el ScrollView interno ubicado en el ListView.  Entonces, cuando las l√≠neas no se desplazan, entonces todo est√° bien, pero cuando las l√≠neas se desplazan, debemos tener en cuenta cu√°nto se produjo el desplazamiento al calcular las coordenadas.  ListView no nos da el valor de desplazamiento.  Por lo tanto, debe ser sacado del nativo, lo que realmente no quer√≠a hacer.  Por lo tanto, decid√≠ tomar el camino hacia uno m√°s simple y est√°ndar: mostrar el men√∫ contextual del sistema est√°ndar.  Como resultado, el controlador de clic de bot√≥n tendr√° el siguiente resultado: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RowMenu_Clicked</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, System.EventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> action = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DisplayActionSheet(<span class="hljs-string"><span class="hljs-string">"Note action:"</span></span>, <span class="hljs-string"><span class="hljs-string">"Cancel"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Edit"</span></span>, <span class="hljs-string"><span class="hljs-string">"Delete"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; BindableObject bindableSender = sender <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BindableObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bindableSender != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Note note = bindableSender.BindingContext <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Note; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action == <span class="hljs-string"><span class="hljs-string">"Edit"</span></span>) { EditNote(note); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(action == <span class="hljs-string"><span class="hljs-string">"Delete"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> DeleteNote(note); } } }</code> </pre><br>  Llamar al m√©todo DisplayActionSheet solo muestra el men√∫ contextual normal: <br><br><img src="https://habrastorage.org/webt/nr/hn/fi/nrhnfiz1y02p8izy6nczaxaiks4.png"><br><br>  Si observa, el texto de la nota se muestra en mi control MyLabel y no en la etiqueta normal.  Esto se hace para qu√©.  Cuando el usuario cambia el texto de la nota, se activan las carpetas y el texto nuevo llega autom√°ticamente a la etiqueta.  Sin embargo, Xamarin.Forms no vuelve a calcular el tama√±o de celda al mismo tiempo.  Los desarrolladores de Xamarin afirman que esta es una operaci√≥n bastante costosa.  S√≠, y ListView en s√≠ no tiene ning√∫n m√©todo que lo haga contar su tama√±o, InvalidateLayout tampoco ayuda.  Lo √∫nico que tienen para esto es el m√©todo ForceUpdateSize del objeto Cell.  Por lo tanto, para llegar a √©l y tirar en el momento adecuado, escrib√≠ mi heredero de Label y extraigo este m√©todo para cada cambio de texto: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyLabel</span></span> : <span class="hljs-title"><span class="hljs-title">Label</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[CallerMemberName] </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnPropertyChanged(propertyName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (propertyName == <span class="hljs-string"><span class="hljs-string">"Text"</span></span>) { ((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Parent <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MyCellGrid).Parent <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Cell).ForceUpdateSize(); } } }</code> </pre><br>  Ahora, despu√©s de editar una nota, ListView ajustar√° autom√°ticamente el tama√±o de la celda para que se ajuste al nuevo texto. <br><br>  Al editar o crear una nueva nota, se abre una ventana con el Editor en el contenido y el bot√≥n Guardar en la barra de herramientas: <br><br><img src="https://habrastorage.org/webt/a6/ps/4z/a6ps4z8waexmy7quhxvm4og3jak.png"><br><br>  Esta ventana es ligeramente diferente de lo que tenemos en el TK: la falta de un bot√≥n redondo en la parte inferior.  Si lo coloca simplemente encima del editor, el teclado que lo abandona lo bloquear√°.  Al mismo tiempo, no encontr√© una soluci√≥n hermosa para moverlo y no entrar en el nativo con una b√∫squeda r√°pida.  Por lo tanto, lo elimin√© y dej√© solo el bot√≥n Guardar en el panel superior.  Esta ventana en s√≠ es muy simple, por lo que omitir√© su descripci√≥n. <br><br>  Lo que quiero decir al final. <br><br>  Xamarin.Forms es muy adecuado para aquellos que est√°n familiarizados con la infraestructura .NET y han estado trabajando con ella durante mucho tiempo.  No tendr√°n que actualizarse a nuevos IDEs y marcos.  Como puede ver, el c√≥digo de la aplicaci√≥n no es muy diferente del c√≥digo de cualquier otra aplicaci√≥n basada en XAML.  Adem√°s, Xamarin le permite desarrollar y construir aplicaciones iOS en Visual Studio para Windows.  Cuando desarrolle la aplicaci√≥n final para probarla y compilarla, necesitar√° conectarse a una m√°quina MacOS.  Y las bibliotecas se pueden hacer sin √©l. <br><br>  Para comenzar a escribir aplicaciones en Xamarin.Forms, no necesita ojos rojos con la consola.  Simplemente instale Visual Studio y escriba aplicaciones.  Todo lo dem√°s ya se ha ocupado de ti.  Al mismo tiempo, no importa c√≥mo se asocie Microsoft con los productos pagos, Xamarin es gratuito y hay versiones gratuitas de Visual Studio. <br><br>  El hecho de que Xamarin.Forms use el est√°ndar .NET bajo el cap√≥ le da acceso a un mont√≥n de bibliotecas ya escritas para √©l que le facilitar√°n la vida al desarrollar sus aplicaciones. <br><br>  Xamarin.Forms le permite agregar f√°cilmente algo en las partes nativas de su aplicaci√≥n, si desea implementar algo espec√≠fico de la plataforma.  All√≠ obtienes el mismo C #, pero la API es nativa de cada plataforma. <br><br>  Sin embargo, por supuesto, hubo algunas deficiencias. <br><br>  La API, disponible en la parte general, es bastante escasa, porque contiene solo lo que es com√∫n a todas las plataformas.  Por ejemplo, como se puede ver en mi ejemplo, todas las plataformas contienen mensajes de alerta y men√∫s contextuales, y esto est√° disponible en Xamarin.Forms.  Sin embargo, el men√∫ est√°ndar que le permite ingresar texto est√° disponible solo en iOS, por lo que en Xamarin.Forms no lo est√°. <br><br>  Se encuentran restricciones similares en el uso de componentes.  Se puede hacer algo, algo es imposible.  El mismo deslizamiento para eliminar un proyecto o nota solo funciona en iOS.  En Android, esta acci√≥n contextual se presentar√° como un men√∫ que aparece con un toque prolongado.  Y si desea deslizar el dedo en el Android, bienvenido a la parte de Android y escr√≠balo con las manos. <br><br>  Y, por supuesto, el rendimiento.  La velocidad de la aplicaci√≥n en Xamarin.Forms ser√°, en cualquier caso, inferior a la velocidad de la aplicaci√≥n nativa.  Por lo tanto, Microsoft dice que si necesita una aplicaci√≥n sin lujos en t√©rminos de dise√±o y requisitos de rendimiento, entonces Xamarin.Forms es para usted.  Si necesitas belleza o velocidad, entonces ya deber√≠as ir a lo nativo.  Afortunadamente, Xamarin tambi√©n tiene versiones nativas que ya operan inmediatamente con sus API de plataforma nativas y funcionan m√°s r√°pido que los formularios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420999/">https://habr.com/ru/post/es420999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486164/index.html">Coronavirus 2019-nCoV. FAQ zu Atemschutz und Desinfektion</a></li>
<li><a href="../de486174/index.html">Ich habe keinen Umsatz</a></li>
<li><a href="../es420993/index.html">5 pasos simples para crear un servidor para probar solicitudes REST de Android</a></li>
<li><a href="../es420995/index.html">Seleccionamos la contrase√±a para el TIN indio en dos segundos, o por qu√© las matem√°ticas de fuerza bruta</a></li>
<li><a href="../es420997/index.html">KDD 2018, d√≠a cuatro, realiza el premio Nobel</a></li>
<li><a href="../es421001/index.html">RPC: una ocasi√≥n para probar nuevos en C ++ 14/17</a></li>
<li><a href="../es421005/index.html">RESTO-asegurado: consejos √∫tiles</a></li>
<li><a href="../es421007/index.html">Grabadora de cinta: una herramienta para grabar autotests</a></li>
<li><a href="../es421009/index.html">25 y 26 de agosto: conferencia en l√≠nea sobre gesti√≥n operativa</a></li>
<li><a href="../es421011/index.html">Preguntas en la entrevista que crees que son est√∫pidas. Pero no realmente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>