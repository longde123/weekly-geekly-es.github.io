<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👱 👨🏽‍🤝‍👨🏻 👃🏻 Schulung Cisco 200-125 CCNA v3.0. Tag 41. DHCP-Snooping und nicht standardmäßiges natives VLAN 🏣 👩🏼‍⚖️ 🖐🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werden wir uns zwei wichtige Themen ansehen: DHCP-Snooping und das "nicht standardmäßige" native VLAN. Bevor Sie mit der Lektion fortfahren, lad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schulung Cisco 200-125 CCNA v3.0. Tag 41. DHCP-Snooping und nicht standardmäßiges natives VLAN</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/466433/"> Heute werden wir uns zwei wichtige Themen ansehen: DHCP-Snooping und das "nicht standardmäßige" native VLAN.  Bevor Sie mit der Lektion fortfahren, lade ich Sie ein, unseren anderen YouTube-Kanal zu besuchen, auf dem Sie ein Video zur Verbesserung Ihres Gedächtnisses ansehen können.  Ich empfehle Ihnen, diesen Kanal zu abonnieren, da wir dort viele nützliche Tipps zur Selbstverbesserung veröffentlichen. <br><br>  Diese Lektion ist dem Studium der Unterabschnitte 1.7b und 1.7c von ICND2 gewidmet.  Bevor wir mit DHCP-Snooping beginnen, möchten wir uns an einige Punkte aus früheren Lektionen erinnern.  Wenn ich mich nicht irre, haben wir DHCP in den Lektionen „Tag 6“ und „Tag 24“ studiert.  Es wurden wichtige Fragen bezüglich der Zuweisung von IP-Adressen durch einen DHCP-Server und des Austauschs relevanter Nachrichten erörtert. <br><br><img src="https://habrastorage.org/webt/ig/xq/yw/igxqywxycvbn3tiihxjlh2jbfss.jpeg"><br><br>  Wenn ein Endbenutzer ein Netzwerk betritt, sendet er normalerweise eine Broadcast-Anforderung an das Netzwerk, die alle Netzwerkgeräte „hören“.  Wenn es direkt mit dem DHCP-Server verbunden ist, geht die Anforderung direkt an den Server.  Wenn das Netzwerk über Übertragungsgeräte verfügt - Router und Switches - wird diese von der Anforderung an den Server weitergeleitet.  Nach Erhalt der Anfrage antwortet der DHCP-Server dem Benutzer, er sendet ihm eine Anfrage nach einer IP-Adresse, wonach der Server eine solche Adresse an das Gerät des Benutzers ausgibt.  Auf diese Weise erfolgt das Abrufen einer IP-Adresse unter normalen Bedingungen.  Gemäß dem Beispiel im Diagramm erhält der Endbenutzer die Adresse 192.168.10.10 und die Gateway-Adresse 192.168.10.1.  Danach kann der Benutzer über dieses Gateway auf das Internet zugreifen oder mit anderen Netzwerkgeräten kommunizieren. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/yg/yq/mb/ygyqmbrwgew-qdpojfbc8u--dbs.jpeg"><br><br>  Angenommen, zusätzlich zu einem echten DHCP-Server befindet sich im Netzwerk ein betrügerischer DHCP-Server, dh ein Angreifer installiert einfach einen DHCP-Server auf seinem Computer.  In diesem Fall sendet der Benutzer, der das Netzwerk betreten hat, die Broadcast-Nachricht auf dieselbe Weise, die der Router und der Switch an den realen Server weiterleiten. <br><br>  Der betrügerische Server „hört“ jedoch auch auf das Netzwerk und antwortet dem Benutzer nach Erhalt einer Broadcast-Nachricht anstelle eines echten DHCP-Servers mit seinem Angebot.  Nach Erhalt gibt der Benutzer seine Zustimmung, wodurch er die IP-Adresse vom Angreifer 192.168.10.2 und die Gateway-Adresse 192.168.10.95 erhält. <br><br>  Der Prozess zum Abrufen einer IP-Adresse wird als DORA abgekürzt und besteht aus vier Schritten: Ermittlung, Angebot, Anforderung und Bestätigung.  Wie Sie sehen können, gibt der Angreifer dem Gerät eine zulässige IP-Adresse, die im verfügbaren Bereich von Netzwerkadressen liegt. Anstelle der tatsächlichen Gateway-Adresse 192.168.10.1 wird jedoch die gefälschte Adresse 192.168.10.95, dh die Adresse seines eigenen Computers, "verschoben". <br><br><img src="https://habrastorage.org/webt/h2/3k/eu/h23keuq-gahjj6psl6a_wrxou2k.jpeg"><br><br>  Danach wird der gesamte an das Internet gerichtete Endbenutzerverkehr über den Computer des Angreifers geleitet.  Ein Angreifer leitet ihn weiter und der Benutzer spürt keinen Unterschied zu dieser Kommunikationsmethode, da er weiterhin auf das Internet zugreifen kann. <br><br><img src="https://habrastorage.org/webt/hi/0i/zi/hi0izijnkpstr0jmxmxve1630py.jpeg"><br><br>  Auf die gleiche Weise gelangt der umgekehrte Datenverkehr aus dem Internet über den Computer des Angreifers zum Benutzer.  Dies wird allgemein als MiM-Angriff (Man in the Middle) bezeichnet - der „Mann in der Mitte“.  Der gesamte Benutzerverkehr wird über den Computer des Hackers geleitet, der alles lesen kann, was er sendet oder empfängt.  Dies ist eine Art von Angriff, der in DHCP-Netzwerken stattfinden kann. <br><br>  Die zweite Art von Angriff wird als Denial of Service (DoS) oder Denial of Service bezeichnet.  Was passiert damit?  Der Computer des Hackers fungiert nicht mehr als DHCP-Server, sondern ist nur noch ein angreifendes Gerät.  Es sendet eine Erkennungsanforderung an den realen DHCP-Server und empfängt als Antwort eine Angebotsnachricht, sendet dann den Anforderungsserver und empfängt eine IP-Adresse von diesem.  Der Computer des Angreifers führt dies alle paar Millisekunden durch und erhält jedes Mal eine neue IP-Adresse. <br><br><img src="https://habrastorage.org/webt/om/x1/wc/omx1wczcyb33a5otygwqv3o1yu4.jpeg"><br><br>  Abhängig von den Einstellungen verfügt ein echter DHCP-Server über einen Pool von Hunderten oder mehreren Hundert freien IP-Adressen.  Der Hacker-Computer erhält die IP-Adressen .1, .2, .3 usw., bis der Adresspool vollständig erschöpft ist.  Danach kann der DHCP-Server neuen Netzwerkclients keine IP-Adressen mehr bereitstellen.  Wenn ein neuer Benutzer das Netzwerk betritt, kann er keine kostenlose IP-Adresse erhalten.  Dies ist die Bedeutung des DoS-Angriffs auf den DHCP-Server: um ihm die Möglichkeit zu nehmen, neuen Benutzern IP-Adressen zu erteilen. <br><br>  Das DHCP-Snooping-Konzept wird verwendet, um solchen Angriffen entgegenzuwirken.  Dies ist eine OSI-Funktion der zweiten Ebene, die sich wie eine ACL verhält und nur auf Switches funktioniert.  Um DHCP-Snooping zu verstehen, müssen Sie zwei Konzepte berücksichtigen: Vertrauenswürdige Switch-Ports und nicht vertrauenswürdige nicht vertrauenswürdige Ports für andere Netzwerkgeräte. <br><br>  Vertrauenswürdige Ports lassen jede Art von DHCP-Nachricht durch.  Nicht vertrauenswürdige Ports sind die Ports, mit denen Clients verbunden sind, und DHCP-Snooping stellt sicher, dass alle von diesen Ports kommenden DHCP-Nachrichten verworfen werden. <br><br>  Wenn wir uns an den DORA-Prozess erinnern, kommt die Nachricht D vom Client zum Server und die Nachricht O - vom Server zum Client.  Als nächstes wird eine Nachricht R vom Client an den Server gesendet, und der Server sendet die Nachricht A an den Client. <br><br><img src="https://habrastorage.org/webt/rn/gu/3g/rngu3g_3vyaxkqhiy5pso4wqkig.jpeg"><br><br>  Nachrichten D und R von unsicheren Ports werden empfangen und Nachrichten vom Typ O und A werden verworfen.  Wenn DHCP-Snooping aktiviert ist, werden standardmäßig alle Switch-Ports als unsicher eingestuft.  Diese Funktion kann sowohl für den Switch als auch für einzelne VLANs als Ganzes verwendet werden.  Wenn beispielsweise VLAN10 mit einem Port verbunden ist, können Sie diese Funktion nur für VLAN10 aktivieren. Der Port wird dann unzuverlässig. <br><br>  Wenn Sie DHCP-Snooping aktivieren, müssen Sie als Systemadministrator die Switch-Einstellungen aufrufen und die Ports so konfigurieren, dass nur Ports, die mit dem Server ähnlichen Geräten verbunden sind, als unzuverlässig gelten.  Dies bezieht sich auf jeden Servertyp, nicht nur auf DHCP. <br>  Wenn beispielsweise ein anderer Switch, Router oder ein echter DHCP-Server mit dem Port verbunden ist, wird dieser Port als vertrauenswürdig konfiguriert.  Die verbleibenden Switch-Ports, an die Endbenutzergeräte oder drahtlose Zugriffspunkte angeschlossen sind, müssen als unsicher konfiguriert werden.  Daher ist jedes Gerät, z. B. ein Zugangspunkt, zu dem Benutzer eine Verbindung herstellen, über einen nicht vertrauenswürdigen Port mit dem Switch verbunden. <br><br>  Wenn der Computer des Angreifers die Switch-Nachrichten vom Typ O und A sendet, werden sie blockiert, dh, dieser Datenverkehr kann nicht über einen unzuverlässigen Port geleitet werden.  Auf diese Weise verhindert DHCP-Snooping die oben beschriebenen Arten von Angriffen. <br><br><img src="https://habrastorage.org/webt/ez/uc/ve/ezucvehi3j9qamkgong0qmlxrke.jpeg"><br><br>  Darüber hinaus erstellt DHCP-Snooping DHCP-Bindungstabellen.  Nachdem der Client eine IP-Adresse vom Server erhalten hat, wird diese Adresse zusammen mit der MAC-Adresse des Geräts, das sie empfangen hat, in die DHCP-Snooping-Tabelle eingegeben.  Ein unsicherer Port, mit dem der Client verbunden ist, ist an diese beiden Merkmale gebunden. <br><br><img src="https://habrastorage.org/webt/qm/5u/28/qm5u28s_xup1hiioaa1_zrrjh8s.jpeg"><br><br>  Dies hilft beispielsweise, einen DoS-Angriff zu verhindern.  Wenn ein Client mit dieser MAC-Adresse bereits eine IP-Adresse erhalten hat, warum sollte er dann eine neue IP-Adresse benötigen?  In diesem Fall wird jeder Versuch einer solchen Aktivität sofort nach Überprüfung des Eintrags in der Tabelle verhindert. <br>  Das nächste, was wir diskutieren müssen, ist Nondefault oder das "nicht standardmäßige" native VLAN.  Wir haben wiederholt das Thema VLAN angesprochen und diesen Netzwerken 4 Video-Tutorials gewidmet.  Wenn Sie vergessen haben, was es ist, empfehle ich Ihnen, diese Lektionen zu überprüfen. <br><br>  Wir wissen, dass in Cisco-Switches das standardmäßige native VLAN VLAN1 ist.  Es gibt Angriffe namens VLAN Hopping.  Angenommen, der Computer im Diagramm ist standardmäßig mit dem ersten Switch verbunden, natives VLAN1, und der letzte Switch ist über VLAN10 mit dem Computer verbunden.  Zwischen den Schaltern ist die Amtsleitung organisiert. <br><br>  Wenn der Datenverkehr vom ersten Computer zum Switch geleitet wird, weiß er normalerweise, dass der Port, an den dieser Computer angeschlossen ist, Teil von VLAN1 ist.  Dann wird dieser Datenverkehr zum Trunk zwischen den beiden Switches geleitet, während der erste Switch folgendermaßen denkt: "Dieser Datenverkehr stammt aus dem nativen VLAN, sodass ich ihn nicht kennzeichnen muss", und leitet den nicht getaggten Datenverkehr weiter, der zum zweiten Switch entlang des Trunks geleitet wird. <br><br><img src="https://habrastorage.org/webt/y6/go/am/y6goamm4qvq9vu_zealxkc6ujsu.jpeg"><br><br>  Switch 2, der Datenverkehr ohne Tags empfangen hat, denkt folgendermaßen: "Da dieser Datenverkehr ohne Tag ist, bedeutet dies, dass er zu VLAN1 gehört, sodass ich ihn nicht über VLAN10 senden kann."  Infolgedessen kann der vom ersten Computer gesendete Datenverkehr den zweiten Computer nicht erreichen. <br><br>  Genau das sollte passieren - VLAN1-Verkehr sollte nicht in VLAN10 gelangen.  Stellen wir uns nun vor, ein Angreifer befindet sich hinter dem ersten Computer, der einen Frame mit dem VLAN10-Tag erstellt und an den Switch sendet.  Wenn Sie sich daran erinnern, wie VLAN funktioniert, wissen Sie, dass der markierte Datenverkehr, wenn er den Switch erreicht, nichts mit dem Frame tut, sondern ihn einfach weiter entlang des Trunks weiterleitet.  Infolgedessen empfängt der zweite Switch Datenverkehr mit einem vom Angreifer erstellten Tag und nicht mit dem ersten Switch. <br><br><img src="https://habrastorage.org/webt/p3/p6/lt/p3p6ltqsy5pf8lld_sgmxrqt5eu.jpeg"><br><br>  Dies bedeutet, dass Sie das native VLAN durch etwas anderes als VLAN1 ersetzen. <br><br>  Da der zweite Switch nicht weiß, wer das VLAN10-Tag erstellt hat, sendet er einfach Datenverkehr an den zweiten Computer.  Auf diese Weise tritt ein VLAN-Hopping-Angriff auf, wenn ein Angreifer in ein Netzwerk eindringt, auf das er ursprünglich nicht zugreifen konnte. <br><br>  Um solche Angriffe zu verhindern, müssen Sie zufällige VLANs oder zufällige VLANs erstellen, z. B. VLAN999, VLAN666, VLAN777 usw., die von einem Angreifer überhaupt nicht verwendet werden können.  Gleichzeitig wechseln wir zu den Trunk-Ports der Switches und konfigurieren sie so, dass sie beispielsweise mit Native VLAN666 funktionieren.  In diesem Fall ändern wir das native VLAN für Trunk-Ports von VLAN1 auf VLAN666, dh wir verwenden ein anderes Netzwerk als VLAN1 als natives VLAN. <br><br>  Die Ports auf beiden Seiten des Trunks müssen im selben VLAN konfiguriert werden. Andernfalls wird ein Fehler bei der Nichtübereinstimmung der VLAN-Nummer angezeigt. <br><br><img src="https://habrastorage.org/webt/ii/l_/t-/iil_t--e0nnopquzjgcjjgofioo.jpeg"><br><br>  Wenn sich der Hacker nach dieser Konfiguration für einen VLAN-Hopping-Angriff entscheidet, ist er nicht erfolgreich, da natives VLAN1 keinem der Trunk-Ports der Switches zugewiesen ist.  Dies ist die Methode zum Schutz vor Angriffen, indem nicht standardmäßige native VLANs erstellt werden. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ggwdarNLVbk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% für Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2,6 GHz 14C 64 GB DDR4 4 x 960 GB SSD 1 Gbit / s 100 TV von 199 US-Dollar</a> in den Niederlanden!</b>  <b><b>Dell R420 - 2x E5-2430 2,2 GHz 6C 128 GB DDR3 2x960 GB SSD 1 Gbit / s 100 TB - ab 99 US-Dollar!</b></b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466433/">https://habr.com/ru/post/de466433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466423/index.html">Das mysteriöse LyX-Programm. Teil 1</a></li>
<li><a href="../de466425/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 37. STP: Root Bridge-Auswahl, PortFast- und BPDU-Schutzfunktionen. Teil 2</a></li>
<li><a href="../de466427/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 38. EtherChannel-Protokoll für OSI Layer 2</a></li>
<li><a href="../de466429/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 39. Stapel und Aggregation von Switch-Chassis</a></li>
<li><a href="../de466431/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 40. 802.1X Standard- und AAA-Protokollfamilie</a></li>
<li><a href="../de466435/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 42. Inter-VLAN-Routing und SVI</a></li>
<li><a href="../de466437/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 43. Routing-Protokolle Distanzvektor und Verbindungsstatus</a></li>
<li><a href="../de466439/index.html">Überprüfen Sie selbst: Wie viele Fragen können Sie ChGK beantworten?</a></li>
<li><a href="../de466441/index.html">Python-Buggy-Code: 10 häufigste Fehler, die Entwickler machen</a></li>
<li><a href="../de466443/index.html">ShIoTiny und die Welt: Analoge Sensoren oder ADCs für die Kleinsten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>