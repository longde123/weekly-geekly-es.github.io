<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💏 🕵🏽 💈 Bezaubernder Bildschirmschoner für Kodi 🛳️ 👩🏼‍🤝‍👨🏾 🤜🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kodi einen Bildschirmschoner zuweisen 
 Das Projekt wurde entwickelt, um einen "bezaubernden" Bildschirmschoner mit einer minimalen Menge an Quellcode...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bezaubernder Bildschirmschoner für Kodi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466067/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/ao/xp/obaoxpyes3hokgu9-el2ra488ya.png" alt="Bild alt"></div><br><h2>  Kodi einen Bildschirmschoner zuweisen </h2><br>  Das Projekt wurde entwickelt, um einen <strong>"bezaubernden"</strong> Bildschirmschoner mit einer minimalen Menge an Quellcode in Python zu erstellen.  Das Projekt ist das einfachste Plugin für das Multimedia Center Kodi. <br><br>  Das Projekt zeigt, wie Sie einen sehr schönen Bildschirmschoner erstellen können, der vollständig auf der Arbeit der "OpenSource" -Community basiert.  Als Integrationsprojekt ist dies ein Beispiel für das Schreiben von zwei unabhängigen Komponenten, von denen jede etwa 80 Codezeilen benötigt.  Die erste Komponente ist ein Inhaltsgenerator, ein Shell-Skript, die zweite Komponente ist ein Kodi Multimedia Center-Plugin, das für die Anzeige von Inhalten verantwortlich ist. <br><br>  Und schließlich können Sie als Programmierer und mit dem Git-Versionskontrollsystem Ihre Arbeit visualisieren, in eine Videodatei schreiben und das Ergebnis auf einem Fernseher oder Computerbildschirm genießen, indem Sie sich mit einer Tasse Kaffee in Ihrem Stuhl zurücklehnen.  Und an kühlen Herbstabenden können Sie beruhigend unter Ihrem Bildschirmschoner schlafen, ohne zu vergessen, den Timer des Geräts in Kodi auszuschalten. <br><a name="habracut"></a><br><h2>  Präambel </h2><br>  <strong>Sie können drei Dinge endlos betrachten:</strong> <strong><br></strong>  <strong>wie Feuer brennt, wie Wasser fließt und wie andere Menschen arbeiten.</strong> <br><br>  Da das Plugin für das „Kodi Multimedia Center“ geschrieben wurde, werde ich die Arbeit des Superteams der „Kodi Programmers“ visualisieren. <br><br><h2>  Verwenden von Plugins in Kodi </h2><br>  Das Kodi Multimedia Center ist ein sehr leistungsfähiges und flexibles Programm, das in Verbindung mit der externen Bibliothek ffmpeg Audio- und Videodateien dekodiert. <br><br>  Um eine Drittanbieteranwendung zu erstellen, verwendet Kodi den Erweiterungsmechanismus „Addons“ oder einfach Plug-Ins.  Um mein eigenes Plugin zu erstellen, benötige ich einige Kenntnisse und ein wenig Kenntnisse der Programmiersprache Python. <br><br>  Der Kodi-Plugin-Mechanismus ist äußerst flexibel und bequem.  Python ist eine interpretierte Sprache, was bedeutet, dass ich nichts kompilieren, in ein separates Softwarepaket kompilieren, unter Build-Dateien wie "Makefile" usw. leiden muss. <br><br>  Für die endgültige Verteilung des Kodi-Plugins packen Sie es einfach in das Zip-Archiv und beachten Sie dabei einige Regeln für die Verzeichnisstruktur.  Mit dem endgültigen Zip-Archiv kann es auf jedem Gerät installiert werden, auf dem Kodi arbeitet: einem Computer, einem Tablet und schließlich einem Fernseher (dh einer Reihe von Fernsehern + Einzelplatten), wobei das Archiv als Plug-In-Quelle angegeben wird. <br><br><h2>  Kodi Plugin Struktur </h2><br><pre> └── screenaver.kodi.universe
     ├── README.md
     ├── addon.xml
     ├── changelog.txt
     ├── create.sh
     ├── fanart.jpg
     ├── icon.png
     ├── Ressourcen
     │ ├ Sprache
     │ │ ├ Englisch
     │ │ │ └ strings.po
     │ │ └ Russisch
     │ │ └ strings.po
     │ ├ settings.xml
     │ └ Skins
     │ └ Standard
     │ ├ 720p
     │ │ └ kodi-universe.xml
     │ ├ 1080i
     │ │ └ kodi-universe.xml
     │ └ Medien
     │ ├ black.jpg
     │ ├ buran.jpg
     │ └ kodi-Universe.mkv
     └── Bildschirmschoner.py
</pre><br><br><ul><li>  README.md - optionale Datei, enthält eine Beschreibung des Projekts für github.com </li><li>  addon.xml - Eine Datei mit einer Beschreibung des Plugins, die den Plugin-Typ, die Codierung, die Version, die Abhängigkeiten, den Autorennamen usw. enthält. </li><li>  changelog.txt - eine optionale Datei mit einer Liste von Projektänderungen </li><li>  create.sh ist eine optionale Datei. Ein Bash-Skript dient zum Erstellen eines Bildschirmschoners für das Zip-Archiv (a) und zum Generieren einer Videodatei aus dem Git-Verlauf mit dem Gource-Tool. Die Datei hat keine Beziehung zum Kodi-Plugin selbst. Sie ist für die bequeme Verteilung des Plugins erforderlich.  Es ist vollständig autonom, d.h.  Wenn Sie nur diese Datei haben, können Sie jederzeit ein vollständiges Zip-Archiv des Plugins erstellen (wenn Sie über eine Internetverbindung verfügen). </li><li>  fanart.jpg - Plugin Hintergrundbild </li><li>  icon.png - das Hauptsymbol </li><li>  resources - Verzeichnis mit Plugin-Ressourcen </li><li>  screenaver.py - Die Hauptdatei des Plugins enthält den gesamten Quellcode für das Plugin in Python. Der Dateiname kann beliebig sein. Hauptsache, dieser Name wird in die Datei addon.xml geschrieben </li></ul><br><h3>  Beschreibung der Plugin-Ressourcen </h3><br>  Das Ressourcenverzeichnis enthält die folgenden Dateien: <br><br><ul><li>  language / English / strings.po - Original-Plugin-Interface-Strings in Englisch </li><li>  language / Russian / strings.po - Übersetzung ins Russische, die Datei ist im Kodi-Standardmechanismus für die Übersetzung von Inhalten in die Landessprachen enthalten, der Anfang der Datei enthält einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehrzeiligen</a> Standardtext-Header (ein Beispiel finden Sie auf der Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kodi.wiki</a> , Abschnitt Plugins). Dann gibt es Zeilenvorschübe, die aus drei Feldern bestehen: <br><br><ul><li>  <strong>msgctxt</strong> - Link zu einer eindeutigen Zeilennummer </li><li>  <strong>msgid</strong> - Original-Textzeichenfolgen- <strong>ID</strong> in Englisch </li><li>  <strong>msgstr</strong> - Übersetzung des <strong>msgid-</strong> Werts in die Landessprache, in diesem Fall ins Russische (russisches Verzeichnis) </li></ul><br></li><li>  settings.xml - Die Hauptdatei der Plugin-Einstellungen beschreibt das grafische Menü der Plugin-Eigenschaften, deren Zeichenfolgenparameter geändert werden können, wobei: <br><br><ul><li>  <strong>id</strong> - Kennung der Textressource </li><li>  <strong>label</strong> - eine eindeutige numerische Bezeichnung für das Textfeld (entspricht dem msgctxt-Feld in der Datei strings.po der Übersetzungen) </li><li>  <strong>Typ</strong> - Ein vordefinierter Ressourcentyp (alle möglichen Typen sind auf der Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kodi.wiki</a> , Abschnitt Plugins, beschrieben.) </li><li>  <strong>Standard</strong> - Der <strong>Standardwert</strong> des Parameters (Sie können den Parameter über das gleichnamige Kodi-Menü auf diesen Wert zurücksetzen.) </li></ul><br></li><li>  resources / skins / default / 1080i / kodi-universe.xml - XML-Konfigurationsdatei </li><li>  resources / skins / default / 720p / kodi-universe.xml - XML-Konfigurationsdatei, die den Speicherort der Plug-In-Steuerelemente (Steuerelemente), ihre Geometrie, Gesamtgrößen, Position der Elemente, Art der Sichtbarkeit usw. beschreibt.  Der Konfigurationsname wird abhängig vom Modus des Videoadapters festgelegt (z. B. 1080i oder 720p). <br></li></ul><br><div class="spoiler">  <b class="spoiler_title">Inhalt von Russian / strings.po</b> <div class="spoiler_text"><pre><code class="xml hljs"># Kodi Media Center language file # Addon Name: Screensaver Kodi Universe # Addon id: screensaver.kodi.universe # Addon Provider: berserktv msgid "" msgstr "" "Project-Id-Version: Kodi Addons\n" "Report-Msgid-Bugs-To: alanwww1@kodi.org\n" "POT-Creation-Date: YEAR-MO-DA HO:MI+ZONE\n" "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" "Last-Translator: Kodi Translation Team\n" "Language-Team: English \ (http://www.transifex.com/projects/p/xbmc-addons/language/en/)\n" "MIME-Version: 1.0\n" "Content-Type: text/plain; charset=UTF-8\n" "Content-Transfer-Encoding: 8bit\n" "Language: en\n" "Plural-Forms: nplurals=2; plural=(n != 1);\n" msgctxt "#32001" msgid "Screensaver" msgstr " " msgctxt "#32002" msgid "Video file" msgstr "" msgctxt "#32003" msgid "Not Video" msgstr "  "</code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Inhalt von settings.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"800"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32001"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videofile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32002"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setting</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"not-video"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bool"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"32003"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  <strong>Medienressourcen des Plugins:</strong> <br><br><ul><li>  resources / skins / default / media / black.jpg - schwarzer Hintergrund, der den Bildschirm ausfüllt, bevor das Video gestartet wird </li><li>  resources / skins / default / media / buran.jpg - futuristisches Bild des Raumschiffs "Buran, auf den Flügeln eines Traums" </li><li>  resources / skins / default / media / kodi-Universe.mkv - die Hauptvideodatei, die vom Plugin bis zum Aufwecken zyklisch abgespielt wird </li></ul><br><h2>  Plugin-Stammkonfigurationsdatei - addon.xml </h2><br>  Addon.xml - ist die Hauptkonfigurationsdatei des Plugins, aus der Kodi alle erforderlichen Informationen entnimmt, um das Plugin zu starten und in das Multimedia Center zu integrieren. <br><br><div class="spoiler">  <b class="spoiler_title">addon.xml Inhalt</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.kodi.universe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Kodi Universe"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.1.2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserktv"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.7"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.ui.screensaver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screensaver.py"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/berserktv/screensaver.kodi.universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Kodi Universe<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Screensaver - Kodi Universe <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span>  -  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span>GNU GENERAL PUBLIC LICENSE. Version 2, June 1991<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">license</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Die Hauptparameter des Plugins sind: <br><br><ul><li>  <strong>Addon Abschnitt</strong> <br><ul><li>  <strong>id</strong> - eindeutige Textkennung des Plugins </li><li>  <strong>name</strong> - Name des Plugins </li><li>  <strong>version</strong> - Plugin Version </li><li>  <strong>Anbietername</strong> - Name des Anbieters des Plugins </li></ul><br></li><li>  <strong>Benötigt Abschnittsabhängigkeiten</strong> <br>  In diesem Abschnitt werden die Module beschrieben, von denen der Betrieb dieses Plug-Ins abhängt <br></li><li>  Erweiterungsabschnitt - Erweiterungen <br>  In diesem Abschnitt (es kann mehrere geben) wird der Typ des Plugins angegeben. <br>  Haupteinstiegspunkt zum Plugin: <br>  point = "xbmc.ui.screensaver" library = "screenaver.py" <br><br>  In unserem Fall ist das Plugin der „Bildschirmschoner“, an den es übertragen wird <br>  Steuerung durch Aufrufen eines Python-Skripts mit dem Namen "screenaver.py" <br><br>  point = "xbmc.addon.metadata" kann auch im Abschnitt "Erweiterungen" angegeben werden <br>  mit der Art der Plattform, auf der das Plugin arbeiten kann, dem Namen und der Beschreibung des Plugins <br>  in einer bestimmten Sprache / Sprachen sowie der Art des LIZENZ-Plugins <br>  Die Gesamtmenge an Metadaten, die in diesem Erweiterungsabschnitt angegeben werden kann, kann sein <br>  Auf der Website finden Sie ausreichend große und detailliertere Informationen <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kodi.tv</a> <br></li></ul><br><h2>  Plugin Implementierung </h2><br>  Da das Plugin extrem einfach und unkompliziert sein sollte, beschränke ich mich bei seiner Implementierung auf eine Hauptquelldatei screenaver.py im Stammverzeichnis von screenaver (a) <br><br>  Damit das Python-Skript aufgerufen werden kann, habe ich es in der Datei addon.xml registriert (siehe Abschnitt oben) <br><br>  Die Programmiersprache Python ist sehr flexibel. Sie ermöglicht es Ihnen, dieselbe Aktion auf verschiedene Arten auszuführen. Aus Gründen der Übersichtlichkeit werde ich den objektorientierten Ansatz für Klassen verwenden. <br><br><div class="spoiler">  <b class="spoiler_title">Bildschirmschoner.py Inhalt</b> <div class="spoiler_text"><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Plugin for Kodi mediacenter # Kodi Universe - Very Simple Screensaver # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 import os import sys import xbmc import urllib import xbmcgui import xbmcaddon __id__ = 'screensaver.kodi.universe' __addon__ = xbmcaddon.Addon(id=__id__) __path__ = __addon__.getAddonInfo('path') def_video_url = __path__+'/resources/skins/default/media/kodi-universe.mkv' class BsPlaylist: def __init__(self,): pass def getPlaylist(self,): try: xbmc.PlayList(1).clear() except: pass self.playlist = xbmc.PlayList(1) item = xbmcgui.ListItem("item1") self.playlist.add(__addon__.getSetting("videofile"),item) return self.playlist class BsPlayer(xbmc.Player): def __init__(self,): pass def onPlayBackStarted(self): xbmc.executebuiltin("PlayerControl(RepeatAll)") def onPlayBackStopped(self): return class Screensaver(xbmcgui.WindowXMLDialog): def __init__( self, *args, **kwargs ): pass def onInit(self): video_url = __addon__.getSetting("videofile") if (video_url == ""): video_url = def_video_url __addon__.setSetting("videofile", video_url) if (__addon__.getSetting("not-video") == "true" \ or not os.path.isfile(video_url) ): return li = BsPlaylist() self.vpl = li.getPlaylist() if self.vpl: xbmc.sleep(2000) self.getControl(1).setImage("black.jpg") self.player = BsPlayer() if not xbmc.getCondVisibility("Player.HasMedia"): self.player.play(self.vpl,windowed=True) def onAction(self,action): try: xbmc.PlayList(1).clear() except: pass try: xbmc.Player().stop() except: pass try: self.close() except: pass if __name__ == '__main__': scr = Screensaver( 'kodi-universe.xml', __path__, 'default', '', ) scr.doModal() del scr</span></span></code> </pre><br></div></div><br><h4>  Klasse Bildschirmschoner (xbmcgui.WindowXMLDialog) </h4><br>  Die Hauptklasse des Bildschirmschoners <br><br>  Die Python Kodi-API enthält mehrere Kernmodule: <strong>xbmc, xbmcgui, xbmcplugin, xbmcaddon und xbmcvfs</strong> .  Um mit der Kodi-Benutzeroberfläche zu arbeiten, verwende ich das xbmcgui-Modul.  Dieses Modul enthält Klassen, die für verschiedene Schnittstellenelemente verantwortlich sind. <br><br>  Um ein Plugin-Dialogfeld mit der in der XML-Konfigurationsdatei beschriebenen Schnittstelle zu erstellen, wird die Klasse <strong>xbmcgui verwendet. WindowsXMLDialog</strong> <br><br><div class="spoiler">  <b class="spoiler_title">kodi-universe.xml Inhalt</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"window"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Background image<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span>FF555555<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">colordiffuse</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">scalediffuse</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aligny</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag">&gt;</span></span>scale<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aspectratio</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span>buran.jpg<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">texture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"videowindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>VideoWindow<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posx</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">posy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span>1920<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">width</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span>1080<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">height</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">visible</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">control</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">controls</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">window</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Die Konfigurations-XML-Datei beschreibt zwei Steuerelemente: <br><br>  Das erste mit der Kennung - <strong>1</strong> ist ein Hintergrundbild - "Schneesturm auf den Flügeln eines Traums" in bestimmten Größen, ausgerichtet auf die Mitte des Bildschirms. <br><br>  Das zweite Element mit der Kennung - <strong>2</strong> ist ein Fenster zum Abspielen des Videos mit einem Zeichen der Sichtbarkeit und bestimmten geometrischen Abmessungen. <br><br>  Die Screensaver-Klasse erbt von der WindowXMLDialog-Klasse und verfügt über drei Methoden: <br><br><ul><li>  Die Konstruktormethode <strong>__init__</strong> wird beim <strong>Erstellen</strong> des Objekts automatisch aufgerufen </li><li>  <strong>OnInit</strong> - grafische Initialisierungsmethode, die vor der ersten Fensteranzeige aufgerufen wird </li><li>  Die <strong>onAction-</strong> Methode ist eine Ereignisverarbeitungsmethode, die aufgerufen wird, wenn bestimmte Ereignisse auftreten, in diesem Fall, wenn ein Aufweckereignis auftritt, d. H.  Klicken Sie mit der Maustaste, der Tastatur, dem Bewegen des Mauszeigers oder dem Eintreffen eines Ereignisses über das Bedienfeld. </li></ul><br>  Die Bildschirmschoner-Klasse verwendet zwei Hilfsklassen: <br><br><ul><li>  Klasse <strong>BsPlayer</strong> - Die Klasse wurde von der Standard-XBMC-Video-Player-Klasse <strong>xbmc.Player geerbt</strong> und enthält drei Methoden: <br><ol><li>  Die Konstruktormethode <strong>__init__</strong> wird beim <strong>Erstellen</strong> des Objekts automatisch aufgerufen </li><li>  Überschreiben der <strong>Videostartmethode onPlayBackStarted</strong> </li><li>  Überschreiben der <strong>onPlayBackStopped-</strong> Videoendmethode <br><br>  Hinweis: Da ich die Methode zum Stoppen der Wiedergabe neu definiert habe und sie leer ist, <br>  dann funktioniert die Regel: Hör nicht auf, lass uns gehen <br></li></ol><br></li><li>  Klasse <strong>BsPlaylist</strong> - Eine <strong>Listenklasse, die</strong> ein <strong>xbmc.PlayList-</strong> Objekt <strong>zurückgibt</strong> <br>  Die Klasse enthält zwei Methoden: <br><br><ol><li>  Die Konstruktormethode <strong>__init__</strong> wird beim <strong>Erstellen</strong> des Objekts automatisch aufgerufen </li><li>  Die Methode <strong>getPlaylist</strong> zum Definieren einer Wiedergabeliste mithilfe der Standard-XBMC-Liste - xbmc.PlayList </li></ol></li></ul><br>  Der allgemeine Algorithmus von Screensaver (a) lautet wie folgt: <br><br><ol><li>  Wenn das Screensaver-Aufrufereignis eintritt (a) - die Inaktivität des Benutzers für die angegebene Anzahl von Minuten und das Fehlen einer aktiven Video- / Audiowiedergabe - überträgt Kodi die Steuerung an das Skript screenaver.py </li><li>  Basierend auf der XML-Konfigurationsdatei wird das Hauptgrafikfenster des Plugins erstellt.  Wenn das grafische Fenster initialisiert wird, werden die Zeichenfolgenressourcen der Plugin-Einstellungen geladen (das Menü lautet "Einstellungen"). </li></ol><br>  Wenn die Videodatei nicht angegeben ist <br>  <strong>__addon __. getSetting ("Videofile")</strong> <br><br>  Es wird mit einem Standardparameter gefüllt <br>  <strong>video_url = def_video_url</strong> <br>  <strong>__addon __. setSetting ("videofile", video_url)</strong> <br><br>  Wenn es kein Flag gibt - "Videowiedergabe deaktivieren" <br>  <strong>__addon __. getSetting ("Nicht-Video")</strong> <br><br>  Das futuristische Bild „Schneesturm auf den Flügeln des Traums“ wird zwei Sekunden lang gezeigt <br>  <strong>xbmc.sleep (2000)</strong> <br><br>  ferner wird durch die Kennung von Steuerung 1 ein schwarzes Hintergrundbild eingestellt <br>  <strong>self.getControl (1) .setImage ("black.jpg")</strong> <br><br>  Anschließend startet der XBMC-Videoplayer mit einer Wiedergabeliste mit nur einer Datei <br>  <strong>self.player.play (self.vpl, windowed = True)</strong> <br><br>  Die Videodatei wird bis zu dem Moment im Kreis abgespielt <br>  Wachereignis, d.h.  jede aktive Benutzeraktion <br><br><h2>  Erstellen von Visualisierungen für das Kodi-Plugin in Ubuntu </h2><br>  <strong>Hinweis:</strong> <strong><br></strong>  <strong>Alle unten beschriebenen Anweisungen werden unter dem Linux-Betriebssystem ausgeführt, nämlich der Ubuntu-Distribution</strong> <br><br>  Es ist auch möglich, die unten beschriebenen Schritte in einem Debian-kompatiblen Betriebssystem auszuführen - die Hauptbedingung für den Start ist das Vorhandensein des <strong>Apt-</strong> Paketmanagers im System, d. H.  Ein Manager, mit dem Sie <strong>Deb-</strong> Software im System installieren können.  Natürlich können Sie die folgenden Schritte auf jedem Linux-System ausführen, dies erfordert jedoch zusätzliche Schritte, und die Reihenfolge einiger Befehle kann sich ändern (Beispiel: Installieren von RPM-Paketen anstelle von Deb usw.) <br><br>  Gource ist ein sehr interessantes und faszinierendes Projekt.  <strong>Die Quelle</strong> ist nach der Quelle benannt, d.h.  Quellcode + G (Grafik).  Mit dieser Anwendung können Sie den Änderungsverlauf im Versionskontrollsystem visualisieren.  Gource versteht Git von Haus aus. Für andere Systeme wie SVN und Mercurial gibt es Konverter, mit denen Sie die Speicherbasis in das Git-Format konvertieren können. <br><br>  <strong>Gource</strong> - <strong>macht</strong> mit OpenGL unglaublich schön und hat eine große Anzahl von Parametern für seine Arbeit.  Dieses unglaublich leistungsstarke Tool zum Generieren einer "bezaubernden" Visualisierung werde ich verwenden. <br><br>  Um eine Visualisierung zu erstellen, benötige ich eine Folge von Befehlen, die in einem <strong>Bash-</strong> Skript beschrieben sind <br><br>  Um das Video zu generieren, benötige ich zwei Hauptprogramme: <br>  <strong>Gource</strong> - um die <strong>Quellvideodatei</strong> für den Git-Verlauf eines bestimmten Projekts zu erstellen <br>  <strong>FFmpeg</strong> - eine Bibliothek zum Codieren und Decodieren von Video und Audio <br><br><h2>  Skript zum Generieren einer Plugin-Videodatei </h2><br><div class="spoiler">  <b class="spoiler_title">create.sh Inhalt</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # This is script of the generation video from "Gource". # # project: Screensaver Kodi Universe (https://berserk.tv) # This script creates a ZIP archive of a Kodi screensaver. # GNU GENERAL PUBLIC LICENSE. Version 2, June 1991 # #     , #        # git zip ffmpeg gource    sudo OUT_DIR="output" OUT="kodi-universe.mkv" NAME_PROJ="screensaver.kodi.universe" MEDIA_PATH="${NAME_PROJ}/resources/skins/default/media" NAME_REP="https://github.com/berserktv/${NAME_PROJ}.git" GSFILE="output.ppm" SECONDS_PER_DAY="1" GOURCE_FRAME_RATE="30" RESOLUTION="-1920x1080" CODEC_OUT_FRAME_RATE="25" # -vcodec -     , # libx264         (h.264) # -profile -    (baseline, main, high, # high10, high422, high444) # -pix_fmt -    (yuv420p, yuv422p, yuv444p) FFPARAM="-vcodec libx264 -profile:v high422 -pix_fmt yuv420p" GSPARAM1="--camera-mode track ${RESOLUTION} --stop-position 1.0 \ --seconds-per-day ${SECONDS_PER_DAY}" GSPARAM2="--git-branch origin/master --multi-sampling \ --stop-at-end --hide-filenames" GSPARAM3="--highlight-users --file-idle-time 13 --max-files 0 --hide date" GSPARAM4="--title Kodi --bloom-multiplier 1.0 --bloom-intensity 1.0" VIS="visualize" # GIT         GIT_REP="https://github.com/xbmc/xbmc.git" # arg1 -   git , #         # example: ./create.sh "https://github.com/facebook/react.git" if [ -n "$1" ]; then GIT_REP="$1"; fi #   git zip ffmpeg  gource packages="git zip ffmpeg gource" for i in $packages; do if ! dpkg -s $i | grep -q "install ok installed"; then sudo apt-get install -y $i; fi done #    test -d ${OUT_DIR} &amp;&amp; rm -rf ${OUT_DIR} test -d ${OUT_DIR} || mkdir -p ${OUT_DIR} cd ${OUT_DIR} #  Screensaver  GIT ,   if ! git clone ${NAME_REP} ${NAME_PROJ}; then echo "Error, not load ${NAME_REP}, exit ..."; exit 1; fi if ! git clone ${GIT_REP} ${VIS}; then echo "Error, not load ${GIT_REP}, exit ..."; exit 2; fi #    Screensaver(a) gource ${VIS} ${GSPARAM1} ${GSPARAM2} ${GSPARAM3} ${GSPARAM4} \ --output-framerate ${GOURCE_FRAME_RATE} --output-ppm-stream ${GSFILE} ffmpeg -y -r ${GOURCE_FRAME_RATE} -f image2pipe -vcodec ppm \ -i ${GSFILE} ${FFPARAM} -r ${CODEC_OUT_FRAME_RATE} ${OUT} &amp;&amp; sync mv -f ${OUT} ${MEDIA_PATH} rm -f ${GSFILE} #     #   GIT    screensaver() test -d ${NAME_PROJ}/.git &amp;&amp; rm -fr ${NAME_PROJ}/.git zip -r ${NAME_PROJ}.zip ${NAME_PROJ}</span></span></code> </pre><br></div></div><br>  Das Skript sollte als normaler Benutzer ausgeführt werden, aber während des Starts erfordert das Skript die Installation der folgenden <strong>git zip ffmpeg-Quellprogramme</strong> <br><br>  Wenn sie fehlen, versucht das Skript, sie mit dem Höhenbefehl <strong>sudo</strong> zu installieren. <br><br>  Kurz gesagt, das Skript führt Folgendes aus: <br><br><ul><li>  Mit Github werden zwei Projekte aus dem Internet heruntergeladen. <br>  Das erste Projekt ist Screensaver selbst <br>  Zweites Projekt - XBMC (Kodi) <br><br>  Wenn Sie in der Befehlszeile ein Argument angeben, das einen Git-Pfad darstellt, können Sie jedes Git-Projekt zur Visualisierung laden. Ein Beispiel für das Laden eines anderen Git-Projekts: <br><br><pre> <code class="bash hljs">./create.sh https://github.com/facebook/react.git</code> </pre> <br>  In diesem Fall nehme ich die bekannte Facebook-Engine zur Visualisierung - React <br></li><li>  <strong>Führt</strong> das <strong>Gource-</strong> Programm mit Befehlszeilenargumenten aus, um Videofragmente im unkomprimierten PPM-Format zu generieren. <br>  Das Video wird generiert, bis der Benutzer das Gource-Fenster mit der Maus schließt (auf das Kreuz klicken) oder bis der Benutzer die <strong>ESC-</strong> Taste drückt <br><br><div class="spoiler">  <b class="spoiler_title">Hinweis:</b> <div class="spoiler_text"><blockquote>  Ich empfehle nicht, ein Video zu erstellen, das länger als <strong>drei Minuten dauert</strong> , da dies sehr lange dauern kann und Sie mehr als <strong>30 GB</strong> freien Speicherplatz auf Ihrer Festplatte speichern müssen.  Eine Minute Bilder mit einer Auflösung von 1920 × 1080 (FullHD) und einer Frequenz von 30 Bildern pro Sekunde erfordert etwa 10 GB Festplattenspeicher.  Dies ist eine temporäre Datei. Nach dem Generieren des richtigen MKV-Videocontainers (h.264-Codec) mit FFmpeg wird diese Datei gelöscht und die resultierende Datei bleibt erhalten. Für eine Minute FullHD-Video mit 25 Bildern pro Sekunde werden 20 MB benötigt. <br><br>  Mit den vom Skript verwendeten Gource-Einstellungen haben Sie die Möglichkeit, einen beliebigen Zeitabschnitt vom Beginn des Projekts bis zur Gegenwart auszuwählen. Die lineare Skala am unteren Rand des Gource-Fensters ist dafür verantwortlich.  Sie können jederzeit mit der Maus auswählen, und die Visualisierung beginnt ab diesem Moment, d. H.  Alle vorherigen Objekte auf dem Bildschirm verschwinden, wodurch das Video dynamischer wird. <br></blockquote><br></div></div><br></li><li>  Startet das FFmpeg-Programm mit einer Liste von Argumenten zum Erstellen eines MKV-Containers aus dem ursprünglichen Gource-Image-Set. </li><li>  Erstellt das endgültige Zip-Archiv mit dem Bildschirmschoner-Projekt (a) und der generierten Videodatei. </li></ul><br><h2>  Quellenoptionen </h2><br><ul><li>  01 - <strong>Kameramodus Track-</strong> Kameramodus <br>  (verfolgt aktuell aktive Benutzer) <br></li><li>  02 - <strong>Stoppposition 1.0</strong> Endposition <br>  (Legt die Endposition für die Wiedergabe fest und reicht von 0,0 bis 1,0) <br></li><li>  03 - <strong>Sekunden pro Tag 1</strong> Anzahl Tage pro Sekunde Video <br>  (Der Parameter bestimmt, wie viel Arbeit Sie im Intervall von einer Sekunde des Videos sehen werden.) <br></li><li>  04 <strong>--git-branch origin / master</strong> project work branch </li><li>  05 - <strong>Stopp am Ende</strong> nach <strong>Beendigung des</strong> Git-Protokolls </li><li>  06 - <strong>Multi-Sampling-</strong> Glättungsfreigabe </li><li>  07 <strong>--hide-filenames</strong> entfernt Dateinamen </li><li>  08 <strong>--highlight-Benutzer</strong> markieren Benutzernamen </li><li>  09 <strong>--Datei-Leerlaufzeit 13</strong> Ausfallzeit für Datei <br>  (die Zeitspanne, nach der der Dateiname von der Anzeige entfernt wird) <br></li><li>  10 <strong>--max-files 0</strong> maximale Anzahl von Dateien <br>  (Der Wert 0 hebt die Begrenzung der Anzahl der angezeigten Dateinamen auf.) <br></li><li>  11 <strong>- Datum ausblenden</strong> Entfernen Sie das Datum, für das der aktuelle Frame angezeigt wird </li><li>  12 - <strong>Titel Kodi der</strong> Name, <strong>der</strong> in der unteren linken Ecke des Videos <strong>angezeigt wird</strong> </li><li>  13 <strong>--bloom-multiplier 1.0</strong> steuert den Effekt der " <strong>Lichtblüte</strong> " anhand des Radius. </li><li>  14 - <strong>Blütenintensität 1.0</strong> steuert den Effekt der "Lichtblüte" unter Verwendung der Intensität. </li><li>  15 - <strong>Ausgabe-Framerate 30</strong> Ausgabebilder pro Sekunde </li><li>  16 <strong>--output-ppm-stream name Name der</strong> Ausgabedatei im PPM-Format </li></ul><br>  Hinweis: Einige Parameter können sich gegenseitig ausschließen. <br>  Eine vollständige Liste der Parameter finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h4>  Kurzes Video-Tutorial für Screensaver (a) </h4><br><br><div class="spoiler">  <b class="spoiler_title">1) Laden Sie das Projekt von github herunter:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/berserktv/screensaver.kodi.universe.git</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2) Generiere ein Video und erstelle ein Zip-Archiv des Plugins:</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> screensaver.kodi.universe chmod u+x create.sh ./create.sh</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3) Zeit für die Videoerzeugung und Nutzung des freien Speicherplatzes:</b> <div class="spoiler_text"><pre> <code class="bash hljs">      .           -    20      Gource (PPM)   MKV      FFmpeg. (  h.264)  ,   Git  XBMC (Kodi)   700            .       PPM   10     ( FullHD, 30   ).</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">4) Installieren Sie den Bildschirmschoner in Kodi</b> <div class="spoiler_text"><pre> <code class="bash hljs">    <span class="hljs-string"><span class="hljs-string">""</span></span>   Kodi (        )   Kodi - <span class="hljs-string"><span class="hljs-string">""</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">" Zip "</span></span>   ,     Kodi Universe    Screensaver(),     .  Settings ( ) =&gt; <span class="hljs-string"><span class="hljs-string">" "</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466067/">https://habr.com/ru/post/de466067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466049/index.html">Vom Kopieren und Einfügen zu Komponenten: Wiederverwendung von Code in verschiedenen Anwendungen</a></li>
<li><a href="../de466051/index.html">Automatisieren Sie die Profilerstellung für Java Meetup 10/09</a></li>
<li><a href="../de466053/index.html">Vertretung russischer IT-Unternehmen in Singapur: Warum nicht?</a></li>
<li><a href="../de466059/index.html">Buch „Design Thinking. Vom Einblick zu neuen Produkten und Märkten “</a></li>
<li><a href="../de466065/index.html">PostgreSQL News Digest. Ausgabe Nr. 17</a></li>
<li><a href="../de466069/index.html">So bringen Sie das Team dazu, nach produktiveren Ideen zu suchen</a></li>
<li><a href="../de466071/index.html">10,3 Sekunden pro Hash: Mining auf dem Bordsteuerungscomputer des Apollo-Raumfahrzeugs</a></li>
<li><a href="../de466075/index.html">Wie ich die Grundlagenforschung in einem Startup verlassen habe</a></li>
<li><a href="../de466077/index.html">Broadcast Techdir Day in St. Petersburg</a></li>
<li><a href="../de466081/index.html">3. September</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>