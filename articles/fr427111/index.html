<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìä ‚Ü©Ô∏è üöÆ Transformation des processus de d√©veloppement et de livraison d'une application h√©rit√©e üè≥Ô∏è‚Äçüåà ü•ü üë®üèæ‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Notre √©quipe est responsable de l'exploitation et du d√©veloppement d'un grand produit d'entreprise. 
 D√©but 2017, prenant une pause dans une impl√©ment...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transformation des processus de d√©veloppement et de livraison d'une application h√©rit√©e</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427111/"><p>  Notre √©quipe est responsable de l'exploitation et du d√©veloppement d'un grand produit d'entreprise. <br>  D√©but 2017, prenant une pause dans une impl√©mentation majeure et relisant les ¬´le√ßons apprises¬ª, nous avons fermement d√©cid√© de revoir le d√©veloppement et la livraison de notre application.  Nous √©tions inquiets de la faible vitesse et de la qualit√© de livraison, ne nous permettant pas de fournir le niveau de service que les clients attendent de nous. </p><br><p>  Il √©tait temps de passer des paroles aux actes - de changer les processus. </p><br><p>  Cet article parlera bri√®vement de l'endroit o√π nous avons commenc√©, de ce que nous avons fait, de la situation actuelle, des difficult√©s que nous avons rencontr√©es, de ce que nous devons laisser derri√®re nous, de ce que nous pr√©voyons de faire d'autre. </p><a name="habracut"></a><br><h1 id="nachalo">  Commencer </h1><br><h3 id="nemnogo-o-sisteme">  Un peu sur le syst√®me </h3><br><p>  L'application est un exemple classique d'une application d'entreprise monolithique du ¬´d√©versement architectural des ann√©es 2000¬ª: </p><br><ul><li>  Exploit√© et d√©velopp√© sur 15 ans. </li><li>  Il s'agit d'un ensemble d'une demi-douzaine de WinForms, de services Windows et d'applications ASP .Net li√©s √† une seule base de donn√©es MS SQL. </li><li>  Taille de la base de code: ~ 1MLOC pour C #, ~ 9000 objets de base de donn√©es.  Une grande partie de la logique m√©tier s'ex√©cute c√¥t√© base de donn√©es. </li><li>  L'application se compose de ~ 250 + solutions pour cr√©er un client win / web (une solution par groupe de formulaires associ√©s).  Il s'agit d'un h√©ritage du processus de d√©veloppement et de l'architecture client pr√©c√©dents. </li><li>  L'application prend en charge plusieurs types de processus (clients) en modifiant la configuration interne: d√©finition des processus, autorisations, champs flexibles, etc. dans les tables de configuration de la base de donn√©es syst√®me.  Dans le m√™me temps, la base de code d'application est la m√™me pour tous les clients. </li><li>  L'application est d√©ploy√©e et prise en charge sur plus de 25 sites (chaque site est une instance ind√©pendante du syst√®me) et dessert un total de plusieurs milliers d'utilisateurs finaux dans diff√©rents fuseaux horaires. </li></ul><br><h3 id="process-dostavki-do-transformacii">  Processus de livraison avant transformation </h3><br><ol><li>  Le d√©veloppement et l'assemblage de l'application finie et de ses composants sont effectu√©s par l'entrepreneur. </li><li>  le code a √©t√© stock√© du c√¥t√© de l'entrepreneur (version locale de MS TFS).  Le code est transmis au client sur une base mensuelle sous la forme d'une archive de la version actuelle de la branche du r√©f√©rentiel principal. </li><li>  la livraison a √©t√© effectu√©e par la livraison de "mises √† jour delta": pour l'application (ensemble de dll, exe, etc.) et les composants de la base de donn√©es (ensemble de scripts sql create / alter).  L'application a √©t√© construite et les packages delta pr√©par√©s par l'entrepreneur. </li><li>  le processus de d√©ploiement a √©t√© pris en charge par le syst√®me de transport, les modifications ont √©t√© appliqu√©es automatiquement. </li></ol><br><p>  La livraison est effectu√©e dans le cadre de sorties mensuelles (comme je l'ai arrang√©, je vous l'ai dit plus t√¥t <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). </p><br><h3 id="suschestvovavshie-problemy">  Probl√®mes existants </h3><br><p>  <em>Manque de contr√¥le</em> </p><br><ul><li>  Malgr√© la propri√©t√© officielle du code, l'assemblage r√©el de l'application par le client √©tait impossible. </li><li>  de ce fait, il est impossible de v√©rifier l'op√©rabilit√© du code transmis au client. </li><li>  changements dans le code - pas transparent pour le client.  Il n'est pas possible de faire correspondre les modifications demand√©es et r√©elles du produit. </li><li>  l'analyse de code est difficile pour SQL et impossible pour les composants C # </li></ul><br><p>  <em>Entr√©e de main-d'≈ìuvre et erreurs</em> </p><br><ul><li>  la pr√©paration de "packages delta" est une proc√©dure de d√©veloppement longue, source d'erreurs et de certains co√ªts de projet. </li><li>  Le d√©ploiement d'une application Delta Packet n√©cessite de suivre l'ordre des packages.  Une erreur de panne de paquet est un probl√®me de d√©ploiement majeur et une source importante d'incidents. </li><li>  Des r√©gressions se produisent r√©guli√®rement: des erreurs qui semblent avoir √©t√© r√©par√©es et des corrections apport√©es au produit sont r√©apparues. </li></ul><br><p>  <em>Limitations</em> </p><br><ul><li>  la possibilit√© de restaurer l'√©tat du syst√®me √† un moment dans le pass√© (changements de restauration) est pratiquement absente. </li><li>  la capacit√© de faire √©voluer efficacement les ressources de d√©veloppement et de test pr√©coce en attirant les employ√©s des clients est pratiquement absente. </li></ul><br><h3 id="ozhidaemye-rezultaty">  R√©sultats attendus </h3><br><p>  Au d√©but du projet, nous nous sommes fix√©s des objectifs √©vidents pour r√©soudre les probl√®mes identifi√©s ci-dessus. </p><br><ul><li>  Transf√©rer le r√©f√©rentiel de codes vers le contr√¥le client </li><li>  D√©placer le processus de cr√©ation d'application du c√¥t√© client </li><li>  Modifier le processus de distribution des changements, abandonner le ¬´delta des changements¬ª au profit d'une mise √† jour compl√®te </li></ul><br><p>  De plus, en utilisant les solutions obtenues lorsque les deux premiers objectifs ont √©t√© atteints, nous avons calcul√©: </p><br><ul><li>  Am√©liorez la qualit√© technique des solutions obtenues gr√¢ce au contr√¥le du code </li><li>  Augmentez l'engagement et la convivialit√© des tests en fournissant un d√©ploiement en libre-service. </li></ul><br><h1 id="etapy-bolshogo-puti">  √âtapes d'un long chemin </h1><br><h3 id="analiz-tekuschego-sostoyaniya-processov-razrabotki">  Analyse de l'√©tat actuel des processus de d√©veloppement </h3><br><p>  Premi√®re √©tape: analyser le processus de d√©veloppement de l'entrepreneur existant.  Cela a aid√© √† planifier les changements afin que, si possible, ne pas interrompre le travail. </p><br><p>  Malheureusement, la connaissance du processus de d√©veloppement a montr√© que, dans la compr√©hension de l'industrie informatique √† l'heure actuelle, le processus √©tait absent. </p><br><ol><li>  Le code de la base de donn√©es et sa logique m√©tier n'√©taient pas mis √† jour dans le r√©f√©rentiel.  La raison principale: le manque d'outils qui impl√©mentent l'assembly √† partir du code dans le r√©f√©rentiel et le d√©ploiement du r√©sultat.  Ainsi, le code dans le r√©f√©rentiel n'est que de la documentation. </li><li>  La "vraie" version du code de la base de donn√©es se trouve dans la "base de donn√©es de d√©veloppement" commune, sur laquelle travaillent des dizaines de d√©veloppeurs. </li><li>  Le code d'application client (C #, ASP.NET) a √©t√© conserv√© dans le r√©f√©rentiel, mais la qualit√© et la rapidit√© des validations n'√©taient pas garanties. </li><li>  L'assemblage des composants (pas la totalit√© de l'application) a √©t√© r√©alis√© dans les stations du d√©veloppeur.  Il n'est pas enti√®rement clair comment le code a √©t√© mis √† jour avant l'assemblage.  Le composant assembl√© a √©t√© dispos√© sur un dossier partag√© partag√©.  De l√†, un ¬´paquet delta¬ª a √©t√© form√© pour le client. </li><li>  L'absence totale de pratique de maintien des branches de d√©veloppement.  Par des signes indirects, nous le soup√ßonnions depuis longtemps - mais apr√®s avoir plong√© dans le processus, tout est devenu √©vident. </li></ol><br><h3 id="perehod-na-novyy-repozitoriy-i-sistemu-kontrolya-versiy">  Passer √† un nouveau r√©f√©rentiel et √† un nouveau syst√®me de contr√¥le de version </h3><br><p>  La d√©pendance √† l'√©gard des plates-formes MS et des normes d'entreprise a d√©termin√© le choix de l'environnement de d√©veloppement - Team Foundation Server. <br>  Cependant, au moment o√π nous avons d√©marr√© le projet directement (avril 2017), la version de Visual Studio Team Services venait d'√™tre publi√©e.  Le produit semblait tr√®s int√©ressant, il √©tait d√©sign√© comme une orientation strat√©gique pour MS, il offrait des r√©f√©rentiels git, l'assemblage et le d√©ploiement sur site et dans le cloud. </p><br><p>  Le TFS d'entreprise sur site √©tait √† la tra√Æne par rapport √† la version et aux fonctionnalit√©s de VSTS, la migration vers la nouvelle version n'√©tait qu'en cours de discussion.  Nous ne voulions pas attendre.  Nous avons d√©cid√© de passer imm√©diatement √† VSTS, car cela r√©duisait nos frais g√©n√©raux pour la prise en charge de la plate-forme et nous donnait un contr√¥le total sur la fa√ßon et ce que nous faisons. </p><br><p>  Au moment du d√©but des changements, l'√©quipe de d√©veloppement avait de l'exp√©rience avec TFSVC, le code de l'application √©tait stock√© dans un tel r√©f√©rentiel.  D'un autre c√¥t√©, GIT est depuis longtemps devenu la norme pour la communaut√© informatique - les clients et les consultants tiers ont recommand√© de passer √† ce syst√®me. <br>  Nous voulions que l'√©quipe de d√©veloppement soit impliqu√©e dans la d√©cision d'un nouveau syst√®me de contr√¥le de version et fasse un choix √©clair√©. </p><br><p>  Nous avons d√©ploy√© deux projets dans VSTS avec diff√©rents r√©f√©rentiels - TFSVC et GIT.  Un ensemble de sc√©narios a √©t√© d√©fini, qui a √©t√© propos√© pour tester et √©valuer l'utilisabilit√© dans chacun des syst√®mes. </p><br><p>  Parmi les sc√©narios √©valu√©s figuraient: </p><br><ul><li>  Cr√©er et fusionner des branches </li><li>  Organisation de travaux communs (sur une ou plusieurs branches) </li><li>  Modifier les op√©rations de la cha√Æne (validation, annulation) </li><li>  Int√©gration tierce </li><li>  La possibilit√© de continuer √† travailler lorsque le serveur n'est pas disponible. </li></ul><br><p>  En cons√©quence, comme pr√©vu, GIT a √©t√© choisi, et jusqu'√† pr√©sent, personne ne l'a regrett√©. </p><br><p>  En tant que processus, nous avons commenc√© √† utiliser GitFlow.  Ce processus a fourni suffisamment de contr√¥le sur les modifications et a permis la livraison des versions, comme nous en avons l'habitude. </p><br><ol><li>  Nous avons d√©fendu la branche de d√©veloppement avec une politique qui exigeait que tous les changements passent par des demandes de tirage. </li><li>  Nous essayons d'adh√©rer √† la pratique de "un ticket - une demande de retrait".  Les changements de diff√©rents billets ne sont jamais combin√©s en un seul changement.  Nous essayons de faire de notre mieux pour tester sur la branche de fonctionnalit√© afin d'√©viter la situation avec des corrections dans les requakes de pull suivants. </li><li>  Lors de la fusion en d√©veloppement, toutes les modifications sont fusionn√©es en un seul commit (squash). </li><li>  Les branches de version sont cr√©√©es √† partir de develop. </li><li>  Si n√©cessaire, dans la branche de publication, vous pouvez ajouter les derni√®res modifications de mani√®re s√©lective (cerise sur le g√¢teau) ou toutes (rebase).  Nous n'effectuons pas la correction directement dans la branche de publication. </li><li>  Apr√®s avoir d√©ploy√© la derni√®re version du produit, il passe au master via push force (seules quelques personnes ont ce droit) </li></ol><br><h3 id="avtomatizaciya-sborki-produkta">  Automatisation de l'assemblage des produits </h3><br><p>  L'application √©tait un grand nombre d'assemblages, des centaines de solutions.  Comme il s'est av√©r√© lors de l'audit du processus, tout cela a √©t√© collect√© s√©par√©ment et ¬´manuellement¬ª. <br>  √Ä la premi√®re √©tape, nous avons d√©cid√© de ne pas tout refaire √† partir de z√©ro (afin de ne pas arr√™ter la livraison existante), mais de "boucler" l'assemblage dans un ensemble de scripts msbuild - un script par composant. <br>  Ainsi, nous avons rapidement obtenu des scripts qui ex√©cutaient tous les artefacts interm√©diaires n√©cessaires, et finalement - le produit fini. </p><br><p>  Une histoire distincte est une conception de base de donn√©es.  Malheureusement, le syst√®me contient plusieurs composants CLR qui n'√©taient pas bien structur√©s.  Les d√©pendances ne permettent pas une base de d√©ploiement simple avec du contenu.  Pour le moment, cela est r√©solu par un script de pr√©-d√©ploiement. <br>  De plus, en raison du paysage syst√®me in√©gal (les versions SQL Server 2008 et 2014 ont √©t√© install√©es √† diff√©rents points), il √©tait n√©cessaire d'organiser l'assemblage du projet de base pour les versions .Net 2.0 et 4.0. </p><br><p>  Une fois tous les scripts pr√™ts et test√©s, ils ont √©t√© utilis√©s dans le script de construction VSTS. </p><br><p>  Imm√©diatement avant le d√©but de l'assemblage, les versions de tous les produits ont √©t√© mises √† jour vers un num√©ro standard commun, y compris le num√©ro de build-through de la build.  Le m√™me num√©ro a √©t√© stock√© dans le script de post-d√©ploiement.  Ainsi, tous les composants - la base de donn√©es et toutes les applications clientes - sont sortis coh√©rents et num√©rot√©s √©galement. </p><br><h3 id="razvertyvaniya-na-testovyy-stend">  D√©ploiement sur banc d'essai </h3><br><p>  Une fois la version initiale du processus de g√©n√©ration termin√©e, nous avons proc√©d√© √† la pr√©paration du script de d√©ploiement. </p><br><p>  On s'attend √† ce que la base de donn√©es soit la plus g√™nante. </p><br><p>  Le d√©ploiement d'une copie ¬´top¬ª d'une vraie base de donn√©es a r√©v√©l√© de nombreux conflits entre l'assemblage et l'√©tat des syst√®mes r√©els: </p><br><ul><li>  Versions incoh√©rentes dans GIT et dans le syst√®me r√©el </li><li>  Sch√©mas de base de donn√©es appartenant √† des utilisateurs dont la suppression √©tait pr√©vue. </li></ul><br><h3 id="stabilizaciya-processa-razrabotki">  Stabilisation du processus de d√©veloppement </h3><br><p>  Bien s√ªr, il est √©trange d'en parler, et plus encore d'√©crire ici, mais le changement le plus s√©rieux pour les d√©veloppeurs a √©t√© l'introduction du principe "si ce n'est pas dans git, cela n'existe pas".  Auparavant, le code √©tait valid√© ¬´pour avoir fait rapport au client¬ª.  Maintenant - sans cela, il est impossible de livrer quoi que ce soit. </p><br><p>  Le plus dur, c'√©tait avec le code de la base de donn√©es.  Apr√®s avoir bascul√© vers le d√©ploiement de la base de donn√©es √† partir du r√©f√©rentiel, via l'assemblage et le d√©ploiement √† l'aide de sqlpackage, l'approche "delta" a √©t√© remplac√©e par l'approche "√©tat souhait√©".  Les packages appartenaient au pass√©, tout devait √™tre d√©ploy√© automatiquement. </p><br><p>  Mais!  Jusqu'√† la transition compl√®te vers le nouveau processus de d√©ploiement, les modifications devaient encore √™tre apport√©es.  Et il √©tait n√©cessaire de le faire √† l'ancienne - les ¬´mises √† jour delta¬ª. </p><br><p>  Nous avons √©t√© confront√©s √† la t√¢che d'assurer une coh√©rence compl√®te et constante de l'√©tat du syst√®me lors de la livraison des paquets delta et du contenu du r√©f√©rentiel. </p><br><p>  Pour ce faire, nous avons organis√© le processus suivant: </p><br><ol><li>  R√©guli√®rement, le code du r√©f√©rentiel a √©t√© collect√© et d√©ploy√© dans une base de donn√©es "mod√®le" vide. </li><li>  Sur la base de la base ¬´mod√®le¬ª, un autotest sp√©cial √©tait en pr√©paration.  Pour chaque objet de la base de donn√©es ¬´mod√®le¬ª, des sommes de contr√¥le ont √©t√© calcul√©es.  L'autotest contient toutes ces sommes de contr√¥le et au d√©marrage, il calcule les sommes de contr√¥le des objets correspondants de la base de donn√©es "v√©rifi√©e".  Toute divergence dans la composition des objets ou leurs sommes de contr√¥le entra√Æne une baisse du test. </li><li>  Le test de ¬´chute¬ª a automatiquement interdit le transfert de colis depuis l'environnement de test plus bas dans le paysage.  Cette int√©gration a d√©j√† √©t√© mise en ≈ìuvre dans le syst√®me de transport pr√©c√©dent. </li></ol><br><p>  Ainsi, gr√¢ce au contr√¥le automatique, il a √©t√© possible de mettre √† jour relativement rapidement le code de la base de donn√©es produits dans git et de le maintenir sans effort suppl√©mentaire de la part de l'√©quipe projet.  Dans le m√™me temps, les d√©veloppeurs ont commenc√© √† s'habituer √† la n√©cessit√© de valider correctement et en temps opportun le code dans le r√©f√©rentiel. </p><br><h3 id="razvertyvanie-produkta-na-okruzheniya-integracionnyh-testov">  D√©ploiement de produits sur des environnements de test d'int√©gration </h3><br><p>  Apr√®s avoir termin√© l'√©tape pr√©c√©dente, nous avons proc√©d√© directement au d√©ploiement de l'application sur un environnement de test.  Nous avons compl√®tement arr√™t√© d'appliquer les packages delta aux syst√®mes de test et sommes pass√©s au d√©ploiement automatique √† l'aide de VSTS. </p><br><p>  √Ä partir de ce moment, toute l'√©quipe a commenc√© √† recevoir les premiers fruits des efforts d√©ploy√©s plus t√¥t: le d√©ploiement s'est d√©roul√© sans efforts suppl√©mentaires.  Le code personnalis√© a √©t√© automatiquement collect√©, d√©ploy√© et test√©. </p><br><p>  Malheureusement, comme nous l'avons compris plus tard, ¬´l'alignement du r√©f√©rentiel¬ª a conduit au fait que nous avions une version de la version stable de ¬´develop¬ª, mais la version de ¬´production¬ª n'√©tait toujours pas disponible.  Et donc, il n'y avait rien pour aller au-del√† de l'environnement de test avec QAS et PRD. </p><br><p>  Le code d'application c√¥t√© base de donn√©es peut √™tre compar√© √† celui productif et comprendre les diff√©rences.  Il n'y avait rien √† comparer avec les applications clientes - il n'y avait qu'une version productive √† jour sous la forme d'un ensemble de fichiers ex√©cutables, et √† partir de laquelle ils ont √©t√© compil√©s, il √©tait impossible de le dire avec certitude. </p><br><h3 id="testirovanie-produkta-kak-rezultata-avtomaticheskoy-sborki">  Test du produit suite √† un assemblage automatique </h3><br><p>  Apr√®s avoir chang√© l'approche de l'assemblage, le produit a d√ª subir des tests de r√©gression approfondis.  Il fallait s'assurer que l'application fonctionnait et que rien n'√©tait perdu. <br>  Lors des tests, il s'est av√©r√© √™tre plus facile avec la fonctionnalit√© situ√©e sur le c√¥t√© de la base de donn√©es.  Heureusement, nous avons d√©velopp√© un ensemble important d'autotests couvrant des zones critiques. </p><br><p>  Mais il n'y avait aucun test pour C # - par cons√©quent, tout a √©t√© v√©rifi√© √† la main.  Il s'agissait d'un travail consid√©rable et la v√©rification a pris du temps. </p><br><h3 id="pryzhok-very---pilotnoe-razvertyvanie-na-produktiv">  Saut de foi - D√©ploiement productif pilote </h3><br><p>  Malgr√© les tests, le d√©ploiement sur un produit pour la premi√®re fois √©tait effrayant. </p><br><p>  Nous avons eu de la chance - nous venions de planifier le prochain d√©ploiement du syst√®me sur un nouveau site.  Et nous avons d√©cid√© d'utiliser cette chance pour un d√©ploiement pilote. <br>  Les utilisateurs n'ont pas vu, les √©ventuelles erreurs du nouvel assemblage √©taient simples √† corriger, le vrai travail productif n'a pas encore commenc√©. </p><br><p>  Nous avons d√©ploy√© le syst√®me, et pendant plusieurs semaines il √©tait en mode d'utilisation pr√©-productive (faible charge, un certain sch√©ma d'utilisation qui peut √™tre saut√© dans le produit).  Pendant ce temps, plusieurs d√©fauts manquants lors des tests ont √©t√© r√©v√©l√©s.  Ils ont corrig√© au fur et √† mesure de leur d√©couverte, et la nouvelle version a imm√©diatement √©t√© d√©ploy√©e pour v√©rification. </p><br><p>  Apr√®s le lancement officiel et une semaine de soutien apr√®s le lancement, nous avons annonc√© qu'il s'agissait du premier exemplaire assembl√© et livr√© "d'une mani√®re nouvelle". </p><br><p>  Cette version de l'assemblage est devenue la premi√®re version stable de la branche principale, elle a √©t√© accroch√©e avec des balises fisrt_deployment (nous n'avons pas command√© d'ic√¥nes avec un hachage de la validation). </p><br><h3 id="masshtabirovanie-razvertyvaniya-na-ves-produktivnyy-landshaft">  D√©ploiement √† l'√©chelle sur un paysage productif complet </h3><br><p>  Comme James Bond l'a dit: "La deuxi√®me fois, c'est beaucoup plus simple."  Apr√®s le succ√®s du d√©ploiement pilote, nous avons rapidement connect√© les instances restantes de syst√®mes de type similaire. </p><br><p>  Mais le syst√®me a plusieurs types d'utilisation - une fonctionnalit√© peut √™tre utilis√©e pour un type et non utilis√©e dans d'autres cas.  En cons√©quence, la fonctionnalit√© test√©e sur la mise en ≈ìuvre du premier type ne garantissait pas n√©cessairement le succ√®s pour d'autres cas. </p><br><p>  Pour tester la fonctionnalit√© des types d'utilisation restants, nous avons commenc√© √† utiliser des projets actifs en cours de d√©veloppement.  L'id√©e √©tait similaire et le premier d√©ploiement - nous avons commenc√© √† utiliser des assemblages automatiques, en les ¬´glissant¬ª aux utilisateurs avec la fonctionnalit√© de conception.  Ainsi, les utilisateurs, travaillant avec la version "projet" du produit, ont en m√™me temps v√©rifi√© l'ancienne fonctionnalit√©. </p><br><p>  La mise √† l'√©chelle elle-m√™me a r√©v√©l√© des probl√®mes techniques inattendus: </p><br><p>  <em>Paysage de syst√®me inhomog√®ne</em> <br>  En plus de d√©ployer directement l'application, nous devions d'abord nous assurer que tout √©tait identique partout - versions .Net, Powershell et modules.  Tout cela a pris pas mal de temps. </p><br><p>  <em>Connexion r√©seau</em> <br>  Sur certains sites, la connexion r√©seau ne permettait tout simplement pas de pomper tous les composants de l'ensemble.  Il y a eu des d√©lais d'attente, des d√©g√¢ts pendant le transfert.  Nous avons v√©rifi√© et essay√© beaucoup de choses - pas tr√®s bien. </p><br><p>  Je devais m'attarder sur la solution suivante: le script de construction a √©t√© finalis√© afin que tous les r√©sultats soient regroup√©s dans une grande archive, qui a ensuite √©t√© coup√©e en petits fragments (2 Mo chacun).  Nous avons finalis√© le sc√©nario de d√©ploiement pour √©liminer la concurrence lors du t√©l√©chargement des artefacts, accept√© les 2 fragments de 2 m√©gaoctets et restaur√© √† partir d'eux ce qui peut d√©j√† √™tre √©tendu. </p><br><p>  <em>Conflit avec un antivirus</em> <br>  Un autre probl√®me √©trange que nous avons rencontr√© est un conflit entre un logiciel antivirus et l'une des √©tapes de d√©ploiement: lorsque toutes sortes de fichiers "suspects", tels que .js, .dll, sont extraits des archives d'artefacts, l'antivirus commence √† les examiner de pr√®s.  Et le plus √©trange est que l'antivirus commence √† se pr√©cipiter sur le fichier avant la fin du d√©ballage et que le processus de d√©ballage tombe avec le message ¬´le fichier est occup√© par un autre processus¬ª.  Bien que nous ayons du mal √† cela, √† l'exclusion du dossier local contenant des artefacts de l'analyse, ce n'est pas tr√®s bon, mais nous n'avons rien trouv√© d'autre. </p><br><h3 id="uluchshenie-processov">  Am√©lioration des processus </h3><br><p>      ,    "   " ‚Äî   . </p><br><ul><li>        (service-now.com)  VSTS      Work Items.     develop ‚Äî       . </li><li>  CI   feature .      ‚Äî        </li><li>            "self-service"      </li><li>         ‚Äî     .        ,            . </li><li>      :    , CI/CD        ,      </li><li>         (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ) </li><li>   -    (   )     .        ‚Äî    ,      . </li><li>     VSTS     ,        ,     . </li></ul><br><h1 id="itogi">  R√©sum√© </h1><br><h3 id="tekuschaya-situaciya">   </h3><br><ul><li>        MS VisualStudio Team Services (   ‚Äî Azure Devops)  .    ‚Äî GIT </li><li>          (/) </li><li>    git / GitFlow    . </li><li>   code review    . </li><li>     CI.       ,    feature ,     . </li><li>          . ,           . </li><li>          (  )    ‚Äî     . -      . </li><li>  -      1 .      -  . </li><li>   ""     . </li></ul><br><h3 id="vremya-po-etapam">    </h3><br><table><thead><tr><th>  Non. </th><th>   </th><th>  </th></tr></thead><tbody><tr><td>  1 </td><td>    ‚Äî     ,        </td><td> 6  </td></tr><tr><td>  2 </td><td>       ‚Äî       </td><td> 3  </td></tr><tr><td>  3 </td><td>      ‚Äî       </td><td>  5 mois </td></tr></tbody></table><br><p>   ‚Äî 14  </p><br><p> ,    ,    ,     . </p><br><h3 id="trudozatraty">  </h3><br><p>           ,    ‚Äî  250  * . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427111/">https://habr.com/ru/post/fr427111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427097/index.html">L'application mobile permet de d√©tecter la d√©pression et d'autres probl√®mes psychologiques d√®s les premiers stades.</a></li>
<li><a href="../fr427101/index.html">Google pr√©voit de facturer aux fabricants d'appareils mobiles jusqu'√† 40 $ pour chaque appareil vendu</a></li>
<li><a href="../fr427105/index.html">Apprendre √† apprendre: la formation continue est la cl√© de la comp√©titivit√© √† l'√®re de l'√©conomie num√©rique</a></li>
<li><a href="../fr427107/index.html">Parsim X12 "sur le genou"</a></li>
<li><a href="../fr427109/index.html">Piraterie dans l'espace - Le d√©licieux Delta-V et les bateaux √† vapeur furtifs √† l'hydrog√®ne - Partie 1</a></li>
<li><a href="../fr427113/index.html">Tableaux de portes programmables: comment ils aident les r√©seaux 5G</a></li>
<li><a href="../fr427117/index.html">Salles de r√©union bas√©es sur Asterisk</a></li>
<li><a href="../fr427123/index.html">Jeu de Turing</a></li>
<li><a href="../fr427129/index.html">Threat Intelligence - une approche moderne de la s√©curit√© de l'information</a></li>
<li><a href="../fr427131/index.html">Connaissance d'Audiomania: 15 supports th√©matiques sur la production, le design, les bureaux et les affaires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>