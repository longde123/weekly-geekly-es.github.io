<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßñüèº üßñüèΩ ‚ú¥Ô∏è Was ist MISRA und wie kocht man es? ü§öüèº üí† üö∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vielleicht hat jeder Entwickler von Programmen f√ºr Mikrocontroller mindestens einmal von speziellen Codierungsstandards geh√∂rt, die dazu beitragen sol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was ist MISRA und wie kocht man es?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/482490/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/5bc/021/cf95bc0219fd9e34f03d5cfc316f7e71.png" alt="Abbildung 1"></div><br><br>  Vielleicht hat jeder Entwickler von Programmen f√ºr Mikrocontroller mindestens einmal von speziellen Codierungsstandards geh√∂rt, die dazu beitragen sollen, die Sicherheit und Portabilit√§t Ihres Codes zu erh√∂hen.  Ein solcher Standard ist MISRA.  In diesem Artikel werden wir detaillierter untersuchen, was dieser Standard ist, was seine Philosophie ist und wie er in Ihren Projekten verwendet wird. <br><a name="habracut"></a><br>  Viele unserer Leser haben geh√∂rt, dass PVS-Studio die Klassifizierung ihrer Alarme nach dem MISRA-Standard unterst√ºtzt.  Derzeit <a href="https://www.viva64.com/ru/misra/">deckt</a> PVS-Studio mehr als 100 MISRA C: 2012- und MISRA C ++: 2008-Regeln ab. <br><br>  Dieser Artikel zielt darauf ab, drei Fliegen mit einer Klappe zu schlagen: <br><br><ol><li>  Sagen Sie, was MISRA f√ºr diejenigen ist, die mit diesem Standard nicht vertraut sind. </li><li>  Erinnern Sie die eingebettete Welt an das, wozu wir f√§hig sind; </li><li>  Unterst√ºtzung bei der Vertiefung des Gesch√§ftsverlaufs f√ºr neue Mitarbeiter, die auch unseren MISRA-Analysator weiterentwickeln werden; </li></ol><br>  Ich hoffe ich kann es interessant machen.  Also fangen wir an! <br><br><h2>  MISRA Geschichte </h2><br>  Die Geschichte von MISRA begann vor langer Zeit.  In den fr√ºhen 90er Jahren stellte das britische Regierungsprogramm unter dem indikativen Namen "Safe IT" Mittel f√ºr verschiedene Projekte zur Verf√ºgung, die sich auf die eine oder andere Weise auf die Sicherheit elektronischer Systeme bezogen.  Das MISRA-Projekt (Motor Industry Software Reliability Association) wurde gegr√ºndet, um einen Leitfaden f√ºr die Entwicklung von Software f√ºr Mikrocontroller in Landfahrzeugen zu erstellen - in Autos im Allgemeinen. <br><br>  Das vom Staat finanzierte MISRA-Team machte sich an die Arbeit und ver√∂ffentlichte im November 1994 seinen ersten Leitfaden: " <a href="https://pdfs.semanticscholar.org/f7ab/6319c0ab1fb546e406a3f65463cd0e5d2f0c.pdf">Entwicklungsrichtlinien f√ºr fahrzeugbasierte Software</a> ".  Dieser Leitfaden ist noch nicht an eine bestimmte Sprache gebunden, aber ich muss zugeben: Die Arbeit war beeindruckend und betraf wahrscheinlich alle denkbaren Aspekte der Entwicklung eingebetteter Software.  √úbrigens haben die Entwickler dieses Handbuchs k√ºrzlich <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">das 25-j√§hrige Jubil√§um</a> eines f√ºr sie so wichtigen Termins <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">gefeiert</a> . <br><br>  Als die Finanzierung durch den Staat endete, beschlossen die Mitglieder der MISRA, weiterhin informell zusammenzuarbeiten - dies dauert bis heute an.  Tats√§chlich ist MISRA (als Organisation) eine Gemeinschaft von Interessenvertretern aus verschiedenen Branchen des Automobil- und Flugzeugbaus.  Nun sind diese Parteien: <br><br><ul><li>  Bentley-Kraftfahrzeuge </li><li>  Ford Motor Company </li><li>  Jaguar Land Rover </li><li> Delphi-Dieselsysteme </li><li>  HORIBA MIRA </li><li>  Protean elektrisch </li><li>  Ingenieurdienstleistungen von Visteon </li><li>  Die Universit√§t von Leeds </li><li>  Ricardo uk </li><li>  ZF TRW </li></ul><br>  Sehr starke Marktteilnehmer, nicht wahr?  Es ist nicht √ºberraschend, dass ihr erster sprachbezogener Standard, MISRA C, unter unternehmenskritischen Embedded-Entwicklern breite Akzeptanz gefunden hat.  MISRA C ++ erschien etwas sp√§ter.  Allm√§hlich wurden die Versionen der Standards aktualisiert und verfeinert, um die neuen Funktionen der Sprachen abzudecken.  Zum Zeitpunkt dieses Schreibens sind die aktuellen Versionen MISRA C: 2012 und MISRA C ++: 2008. <br><br><h2>  Philosophie und Regelbeispiele </h2><br>  Das Besondere an MISRA ist die unglaubliche Liebe zum Detail und die √§u√üerste Sorgfalt bei der Gew√§hrleistung der Sicherheit.  Die Autoren haben nicht nur alle ‚ÄûL√∂cher‚Äú in C und C ++, die ihnen in den Sinn kamen (wie zum Beispiel die Autoren von CERT), an einer Stelle gesammelt, sondern die internationalen Standards dieser Sprachen sorgf√§ltig ausgearbeitet und alle denkbaren und undenkbaren Fehler aufgeschrieben.  Und dann haben sie die Regeln zur Lesbarkeit von Code von oben √ºbernommen und hinzugef√ºgt - dies soll es schwieriger machen, einen neuen Fehler in bereits sauberen Code einzuf√ºgen. <br><br>  Um das Ausma√ü des Ernstes zu verstehen, sollten Sie einige Regeln ber√ºcksichtigen, die der Norm entnommen sind. <br><br>  Einerseits gibt es viele gute, geeignete Regeln, die immer befolgt werden sollten, unabh√§ngig davon, wof√ºr Ihr Projekt bestimmt ist.  Zum gr√∂√üten Teil sollen sie undefiniertes / nicht angegebenes / implementierungsabh√§ngiges Verhalten beseitigen.  Zum Beispiel: <br><br><ul><li>  Verwenden Sie nicht den Wert einer nicht initialisierten Variablen </li><li>  Verwenden Sie den FILE-Zeiger nicht, nachdem Sie den Stream geschlossen haben </li><li>  Alle nicht leeren Funktionen m√ºssen einen Wert zur√ºckgeben. </li><li>  Der Schleifenz√§hler darf keinen Gleitkomma-Typ haben </li><li>  ‚Ä¶ usw. </li></ul><br>  Auf der anderen Seite gibt es Regeln, deren Nutzen an der Oberfl√§che liegt, die aber (aus Sicht gew√∂hnlicher Projekte) nicht so s√ºndig sind, dass sie brechen: <br><br><ul><li>  Verwenden Sie nicht goto und longjmp </li><li>  Jeder Switch sollte mit der Standardeinstellung enden </li><li>  Schreiben Sie keinen nicht erreichbaren Code </li><li>  Verwenden Sie keine variablen Funktionen </li><li>  Verwenden Sie keine Adressarithmetik (au√üer <i>[]</i> und <i>++</i> ) </li><li>  ... </li></ul><br>  Solche Regeln sind auch nicht schlecht und bieten in Kombination mit den vorherigen bereits eine sp√ºrbare Erh√∂hung der Sicherheit. Aber reicht dies f√ºr hochverantwortliche eingebettete Systeme aus?  Sie werden nicht nur in der Automobilindustrie, sondern auch im Flugzeugbau, in der Luft- und Raumfahrt, im Milit√§r und in der Medizintechnik eingesetzt. <br><br>  Wir m√∂chten nicht, dass einige <a href="https://www.viva64.com/ru/b/0438/">Patienten</a> aufgrund eines Softwarefehlers <a href="https://www.viva64.com/ru/b/0438/">mit einem</a> R√∂ntgenger√§t <a href="https://www.viva64.com/ru/b/0438/">mit einer Dosis von 20.000 Rad bestrahlt</a> werden. Daher reichen die √ºblichen ‚Äûallt√§glichen‚Äú Regeln nicht mehr aus.  Auf dem Spiel stehen Menschenleben und riesige Geldsummen, und Sorgfalt muss einbezogen werden.  Hier gehen die restlichen MISRA-Regeln auf die B√ºhne: <br><ul><li>  Das Suffix 'L' im Literal sollte immer in Gro√übuchstaben geschrieben werden (das kleine 'l' kann mit der Einheit verwechselt werden) </li><li>  Verwenden Sie nicht den Komma-Operator (dies erh√∂ht die Wahrscheinlichkeit, einen Fehler zu machen) </li><li>  Keine Rekursion verwenden (ein kleiner Mikrocontroller-Stack kann leicht √ºberlaufen) </li><li>  Die K√∂rper der <i>Anweisungen</i> <i>if</i> , <i>else</i> <i>for</i> , <i>while</i> , <i>do</i> , <i>switch</i> m√ºssen in geschweifte Klammern eingeschlossen werden (Sie k√∂nnen m√∂glicherweise einen Fehler machen, wenn der <a href="https://www.viva64.com/ru/w/v2507/">Code nicht richtig ausgerichtet ist</a> ). </li><li>  Verwenden Sie keinen dynamischen Speicher (da insbesondere bei Mikrocontrollern die M√∂glichkeit besteht, dass die Zuordnung vom Heap nicht erfolgreich durchgef√ºhrt wird). </li><li>  ... und viele, viele solcher Regeln. </li></ul><br>  Menschen, die auf MISRA sto√üen, sind oft der Meinung, dass die Philosophie des Standards darin besteht, "dies zu verbieten und dies zu verbieten".  In der Tat ist dies so, aber nur zum Teil. <br><br>  Ja, der Standard hat viele √§hnliche Regeln, aber sein Zweck ist es nicht, alles M√∂gliche zu verbieten, sondern alle M√∂glichkeiten aufzulisten, um die Sicherheit des Codes irgendwie zu verletzen.  Bei den meisten Regeln entscheiden Sie, ob Sie sie befolgen m√∂chten oder nicht.  Ich werde dies genauer erkl√§ren. <br><br>  In MISRA C lassen sich Regeln in drei Hauptkategorien einteilen: Obligatorisch, Erforderlich und Beratung.  Obligatorisch - das sind Regeln, die unter keinem Vorwand verletzt werden d√ºrfen.  Beispielsweise enth√§lt dieser Abschnitt die Regel "Verwenden Sie nicht den Wert einer nicht initialisierten Variablen".  Die vorgeschriebenen Regeln sind weniger streng: Sie sehen die M√∂glichkeit der Ablehnung vor, jedoch nur, wenn diese Abweichungen sorgf√§ltig dokumentiert und schriftlich begr√ºndet werden.  Die √ºbrigen Regeln sind in der Kategorie "Beratung" enthalten. Hierbei handelt es sich um Regeln, die nicht befolgt werden m√ºssen. <br><br>  MISRA C ++ ist etwas anders: Dort fehlt die obligatorische Kategorie, und die meisten Regeln geh√∂ren zur Kategorie Erforderlich.  Daher haben Sie in der Tat das Recht, gegen eine Regel zu versto√üen - denken Sie nur daran, die Abweichungen zu dokumentieren.  Es gibt auch eine Kategorie Dokument - dies sind verbindliche Regeln (Abweichungen sind nicht zul√§ssig), die mit g√§ngigen Vorgehensweisen wie ‚ÄûJede Verwendung von Assembler sollte dokumentiert werden‚Äú oder ‚ÄûDie Plug-in-Bibliothek muss MISRA C ++ entsprechen‚Äú verkn√ºpft sind. <br><br><h2>  Was gibt es sonst noch? </h2><br>  Tats√§chlich besteht MISRA nicht nur aus einem Regelwerk.  In der Tat ist dies ein Handbuch zum Schreiben von sicherem Code f√ºr Mikrocontroller, und daher steckt es voller allerlei N√ºtzlichkeiten.  Schauen wir sie uns genauer an. <br><br>  Erstens enth√§lt der Standard eine ziemlich gr√ºndliche Beschreibung des Hintergrunds: Um zu verstehen, was der Standard geschaffen hat, warum C oder C ++ gew√§hlt wurde, welche Vor- und Nachteile diese Sprachen haben. <br><br>  Wir sind uns der Tugenden dieser Sprachen bewusst.  Ja, und √ºber die M√§ngel im Allgemeinen auch :) Was sind die hohe Komplexit√§t, die unvollst√§ndige Spezifikation des Standards und die Syntax, die es sehr leicht machen, Fehler zu machen und dann lange nach Fehlern zu suchen?  Sie k√∂nnten beispielsweise versehentlich Folgendes schreiben: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i); { do_something(); }</code> </pre> <br>  Dennoch besteht die M√∂glichkeit, dass eine Person kein <a href="https://www.viva64.com/ru/w/v529/">zus√§tzliches Semikolon</a> bemerkt, oder?  Sie k√∂nnen auch so schreiben: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpendTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> doWantToKillPeople)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doWantToKillPeople = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { StartNuclearWar(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { PlayComputerGames(); } }</code> </pre> <br>  Es ist gut, dass der <a href="https://www.viva64.com/ru/w/v2507/">erste</a> und der <a href="https://www.viva64.com/ru/w/v2561/">zweite</a> Fall leicht von den MISRA-Regeln erfasst werden (der erste ist MISRA C: 13.4 / MISRA C ++: 6.2.1, der zweite ist MISRA C: 13.4 / MISRA C ++: 6.2.1). <br><br>  Der Standard beschreibt nicht nur die Probleme, sondern enth√§lt auch eine Vielzahl von Tipps, die Sie vor dem Start ben√∂tigen: Informationen zum Einrichten des MISRA-Entwicklungsprozesses, zur Verwendung statischer Analyseger√§te zur √úberpr√ºfung des Codes auf Konformit√§t, zu welchen Dokumenten Sie welche Dokumente aufbewahren m√ºssen und wie f√ºllen und so weiter und so fort. <br><br>  Au√üerdem gibt es am Ende Anwendungen, die Folgendes enthalten: eine kurze Liste und eine √úbersichtstabelle mit Regeln, eine kleine Liste mit C / C ++ - Schwachstellen, ein Beispiel f√ºr die Dokumentation von Abweichungen von der Regel sowie mehrere Checklisten, mit denen Sie sich nicht in der gesamten B√ºrokratie verlaufen k√∂nnen. <br><br>  Wie Sie sehen, ist MISRA nicht nur ein Regelwerk, sondern fast eine gesamte Infrastruktur zum Schreiben von sicherem Code f√ºr eingebettete Systeme. <br><br><h2>  Verwenden Sie in Ihren Projekten </h2><br>  Stellen Sie sich eine Situation vor: Sie werden ein Programm f√ºr ein sehr notwendiges und verantwortungsbewusstes Embedded-System schreiben.  Oder Sie haben bereits ein Programm, m√ºssen es jedoch an MISRA ‚Äû√ºbertragen‚Äú.  Wie k√∂nnen Sie Ihren Code auf √úbereinstimmung mit dem Standard √ºberpr√ºfen?  M√ºssen Sie es wirklich manuell machen? <br><br>  Die manuelle Code√ºberpr√ºfung ist keine einfache und m√∂glicherweise unm√∂gliche Aufgabe.  Jeder Rezensent m√ºsste nicht nur jede Codezeile sorgf√§ltig durchsehen, sondern auch den Standard auswendig kennen.  Horror! <br><br>  MISRA-Entwicklern wird daher empfohlen, statische Analysen zum Testen des Codes zu verwenden.  Tats√§chlich ist die statische Analyse ein automatisierter Code√ºberpr√ºfungsprozess.  Sie f√ºhren den Analyzer einfach mit Ihrem Programm aus und in wenigen Minuten erhalten Sie einen Bericht √ºber m√∂gliche Verst√∂√üe gegen den Standard.  Was brauchst du, richtig?  Sie m√ºssen nur das Protokoll anzeigen und die Antwort korrigieren. <br><br>  N√§chste Frage: Ab wann setzen Sie MISRA ein?  Die Antwort ist einfach: Je fr√ºher, desto besser.  Idealerweise, bevor Sie √ºberhaupt mit dem Schreiben von Code beginnen, da MISRA davon ausgeht, dass Sie den Standard w√§hrend der gesamten Lebensdauer Ihres Codes einhalten. <br><br>  Nat√ºrlich ist es nicht immer m√∂glich, MISRA von Anfang an zu schreiben.  Beispielsweise kommt es h√§ufig vor, dass ein Projekt bereits teilweise oder vollst√§ndig umgesetzt wurde, der Kunde jedoch w√ºnschte, dass das Projekt dem Standard entspricht.  In diesem Fall m√ºssen Sie den vorhandenen Code gr√ºndlich √ºberarbeiten. <br><br>  Hier taucht die Falle auf.  Ich w√ºrde sogar sagen, dass ein Unterwasser-Felsbrocken auftaucht.  Was passiert, wenn Sie einen statischen Analysator nehmen und das ‚Äûnormale‚Äú Projekt auf √úbereinstimmung mit dem MISRA-Standard pr√ºfen?  Spoiler: Sie k√∂nnen Angst bekommen. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44e/2b7/7d9/44e2b77d90cd9804e1ec0a5a38f166a2.png" alt="Abbildung 5"></div><br><br>  Das abgebildete Beispiel ist nat√ºrlich √ºbertrieben.  Hier sehen Sie das Ergebnis der √úberpr√ºfung eines ausreichend gro√üen Projekts, an das bei der Arbeit an Mikrocontrollern eigentlich nie gedacht wurde.  Wenn Sie jedoch einen vorhandenen Code √ºberpr√ºfen, sehen Sie m√∂glicherweise einen, zwei, f√ºnf oder sogar zehntausend Analysevorg√§nge.  Und in diesem ganzen Haufen gehen neue Operationen verloren, die f√ºr den gerade geschriebenen oder ge√§nderten Code ausgegeben wurden. <br><br>  Was ist dagegen zu tun?  Ist es wirklich notwendig, alle Dinge beiseite zu legen und sich zu setzen, um alle alten Positiven zu beheben? <br><br>  Wir wissen, dass beim erstmaligen √úberpr√ºfen eines Projekts h√§ufig positive Ergebnisse auftreten und haben eine L√∂sung entwickelt, mit der Sie den Nutzen des Analyseger√§ts sofort erzielen k√∂nnen, ohne die Arbeit zu unterbrechen.  Diese L√∂sung wird als "Unterdr√ºckungsbasis" bezeichnet. <br><br>  Suppress-Bases ist der PVS-Studio-Mechanismus, mit dem Analysatormeldungen massiv unterdr√ºckt werden k√∂nnen.  Wenn Sie ein Projekt zum ersten Mal √ºberpr√ºfen und dort mehrere tausend positive Ergebnisse feststellen, f√ºgen Sie diese einfach der Unterdr√ºckungsdatenbank hinzu. Wenn Sie den Analyzer das n√§chste Mal ausf√ºhren, erhalten Sie keine Warnungen. <br><br>  Auf diese Weise k√∂nnen Sie den Code wie gewohnt weiter schreiben und √§ndern. Gleichzeitig werden nur Warnungen zu den Fehlern angezeigt, die gerade in das Projekt eingef√ºgt wurden.  Gleichzeitig k√∂nnen Sie hier und jetzt den gr√∂√ütm√∂glichen Nutzen aus dem Analyseger√§t ziehen, ohne von alten Fehlern abgelenkt zu werden.  Ein paar Klicks - und der Analyzer ist implementiert!  Eine ausf√ºhrliche Anleitung dazu finden Sie <a href="https://www.viva64.com/ru/m/0032/">hier</a> . <br><br>  Vielleicht fragen Sie sich: ‚ÄûWarten Sie, was tun mit versteckten Antworten?‚Äú Die Antwort ist ganz einfach: Vergessen Sie sie nicht und korrigieren Sie sie leise.  Sie k√∂nnen beispielsweise die Unterdr√ºckungsbasis im Versionskontrollsystem verlegen und nur die Festschreibungen zulassen, die die Anzahl der Vorg√§nge nicht erh√∂hen.  So wird Ihr "Unterwasser-Boulder" fr√ºher oder sp√§ter nach und nach abgelassen und es gibt keine Spur davon. <br><br>  Okay, der Analyzer ist implementiert und jetzt k√∂nnen wir weitermachen.  Was ist als n√§chstes zu tun?  Klares Gesch√§ft - um mit dem Code zu arbeiten.  Aber was ist erforderlich, um die Konformit√§t mit der Norm zu erkl√§ren?  Wie k√∂nnen Sie nachweisen, dass Ihr Projekt MISRA-konform ist? <br><br>  Tatsache ist, dass es kein spezielles ‚ÄûZertifikat‚Äú gibt, dass Ihr Code MISRA entspricht.  Wie der Standard selbst vorschreibt, sollte die Verfolgung des Compliance-Codes von zwei Parteien durchgef√ºhrt werden: dem Software-Kunden und dem Software-Anbieter.  Der Lieferant entwickelt standardkonforme Software und f√ºllt die erforderlichen Unterlagen aus.  Der Kunde seinerseits hat daf√ºr Sorge zu tragen, dass die Angaben aus diesen Unterlagen zutreffend sind. <br><br>  Wenn Sie selbst Kunde und Entwickler Ihrer eigenen Software sind, liegt die Verantwortung f√ºr die Einhaltung des Standards nur bei Ihnen :) <br><br>  Um die Konformit√§t Ihres Projekts nachzuweisen, ben√∂tigen Sie im Allgemeinen Nachweise.  Die Liste der Dokumente, die Projektentwickler vorbereiten sollten, kann variieren, MISRA bietet jedoch einige als Referenz an.  Lassen Sie uns diese Menge genauer betrachten. <br><br>  Um die Konformit√§t mit dem Standard zu behaupten, ben√∂tigen Sie ein paar Dinge: <br><br><ul><li>  Eigentlich ein Projekt, dessen Code den obligatorischen und erforderlichen Regeln entspricht </li><li>  F√ºhrungsdurchsetzungsplan </li><li>  Dokumentation aller Compiler- und Static-Analyzer-Warnungen </li><li>  Dokumentation aller Abweichungen von den geforderten Regeln </li><li>  Richtlinien-Compliance-Zusammenfassung </li></ul><br>  Der erste ist ein Compliance-Plan.  Dies ist Ihr wichtigster Tisch, und er wird den Pr√ºfer zu allen anderen Dokumenten schicken.  In der ersten Spalte finden Sie eine Liste der MISRA-Regeln. Im √úbrigen wird vermerkt, ob Abweichungen von diesen Regeln festgestellt wurden.  Diese Tabelle sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/341/643/231/3416432314b7841327af4659356de62c.png" alt="Abbildung 8"></div><br>  Der Standard empfiehlt, Ihr Projekt mit mehreren Compilern zu erstellen und zwei oder mehr statische Analysatoren zu verwenden, um den Code auf Konformit√§t zu √ºberpr√ºfen.  Wenn der Compiler oder Analysator eine mit der Regel verkn√ºpfte Warnung generiert, sollten Sie dies in der Tabelle und im Dokument vermerken: Warum kann die Operation nicht beseitigt werden, ob sie falsch ist usw. <br><br>  Wenn eine der Regeln nicht mit einem statischen Analyseger√§t √ºberpr√ºft werden kann, m√ºssen Sie die Code√ºberpr√ºfung durchf√ºhren.  Dieses Verfahren sollte ebenfalls dokumentiert werden. Anschlie√üend sollte ein Link zu dieser Dokumentation zum Compliance-Plan hinzugef√ºgt werden. <br><br>  Wenn sich der Compiler oder der statische Analysator als richtig herausstellt oder wenn w√§hrend des Code√ºberpr√ºfungsprozesses tats√§chliche Codeverletzungen festgestellt wurden, m√ºssen Sie diese entweder korrigieren oder dokumentieren.  Wieder durch Anh√§ngen eines Links zur Dokumentation in der Tabelle. <br><br>  Ein Compliance-Plan ist somit ein Dokument, anhand dessen Sie die Dokumentation f√ºr jede in Ihrem Code festgestellte Abweichung finden k√∂nnen. <br><br>  Nun ein wenig zur Dokumentation von Regelabweichungen.  Wie ich bereits erw√§hnt habe, ist eine solche Dokumentation nur f√ºr die erforderlichen Regeln erforderlich, da Sie nicht gegen Regeln der obligatorischen Ebene versto√üen k√∂nnen und die Beratungsregeln nicht ohne Dokumentation befolgt werden k√∂nnen. <br><br>  Wenn Sie sich entscheiden, von der Regel abzuweichen, sollte die Dokumentation Folgendes enthalten: <br><br><ul><li>  Nummer der gebrochenen Regel </li><li>  Genaue Abweichungsstelle </li><li>  Die G√ºltigkeit der Abweichung </li><li>  Der Nachweis, dass Abweichungen die Sicherheit nicht beeintr√§chtigen </li><li>  M√∂gliche Auswirkungen auf den Benutzer </li></ul><br>  Wie Sie sehen, l√§sst dieser Dokumentationsansatz Sie ernsthaft dar√ºber nachdenken, ob sich der Versto√ü lohnt.  Dies geschah speziell, um die Required-Regeln zu verletzen war nicht gut :) <br><br>  Nun zur Zusammenfassung der Einhaltung der Regeln.  Dieses Papier ist vielleicht am einfachsten auszuf√ºllen: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3d/77e/e05/f3d77ee05c3639efdc6df19706d60450.png" alt="Abbildung 2"></div><br>  Die mittlere Spalte wird gef√ºllt, bevor Sie mit der Arbeit mit dem Code beginnen, und die Spalte ganz rechts befindet sich, nachdem Ihr Projekt fertig ist. <br><br>  Es ist durchaus sinnvoll, eine Frage zu stellen: Warum m√ºssen Sie Kategorien von Regeln angeben, wenn diese bereits in der Norm selbst festgelegt sind?  Tatsache ist, dass der Standard die "Erh√∂hung" der Regel in einer strengeren Kategorie erlaubt.  Beispielsweise kann ein Kunde Sie auffordern, eine Beratungsregel in eine Kategorie zu verschieben.  Eine solche ‚ÄûErh√∂hung‚Äú muss vorgenommen werden, bevor mit dem Code gearbeitet wird, und eine Zusammenfassung der Einhaltung der Regeln erm√∂glicht es, dies klar zu vermerken. <br><br>  Bei der letzten Spalte ist alles einfach: Es reicht aus, nur zu notieren, ob die Regel verwendet wird, und wenn ja, gibt es Abweichungen davon. <br><br>  Diese ganze Tabelle wird ben√∂tigt, damit Sie schnell sehen k√∂nnen, welche Priorit√§ten die Regeln haben und ob der Code mit ihnen √ºbereinstimmt.  Wenn Sie pl√∂tzlich Interesse daran haben, den genauen Grund f√ºr die Ablehnung zu erfahren, k√∂nnen Sie jederzeit auf den Compliance-Plan verweisen und die ben√∂tigten Unterlagen finden. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b4/c84/ca8/5b4c84ca873358cbb9b5dd6349330da4.png" alt="Abbildung 3"></div><br>  Sie haben den Code also sorgf√§ltig gem√§√ü den MISRA-Regeln geschrieben.  Sie haben einen Compliance-Plan erstellt, alles dokumentiert und eine Compliance-Zusammenfassung ausgef√ºllt.  Wenn dies zutrifft, haben Sie sehr sauberen, sehr lesbaren und sehr zuverl√§ssigen Code erhalten, den Sie jetzt hassen :) <br><br>  Wo wird dein Programm jetzt leben?  In einem MRT-Ger√§t?  In einem gew√∂hnlichen Geschwindigkeitssensor oder im Autopilotsystem eines Weltraumsatelliten?  Ja, Sie sind einen ernsthaften b√ºrokratischen Weg gegangen, aber das sind Kleinigkeiten.  Wie kann man nicht akribisch sein, wenn es um echte Menschenleben geht? <br><br>  Wenn Sie es geschafft haben und es geschafft haben, ein siegreiches Ende zu erreichen, dann gratuliere ich Ihnen ganz herzlich: Sie schreiben hochwertigen, sicheren Code.  Vielen Dank! <br><br><h2>  Die Zukunft der Standards </h2><br>  Abschlie√üend m√∂chte ich ein wenig √ºber die Zukunft der Normen sprechen. <br><br>  MISRA lebt und entwickelt sich derzeit.  Beispielsweise wurde Anfang 2019 ‚ÄûDie dritte Ausgabe von MISRA C: 2012 (Erste √úberarbeitung)‚Äú angek√ºndigt - eine aktualisierte und durch neue Regeln 2012 erg√§nzte Norm.  Gleichzeitig k√ºndigten sie die bevorstehende Ver√∂ffentlichung von MISRA C: 2012, √Ñnderung 2 - C11 Core, dem 2012er Standard, an, in dem Regeln hinzugef√ºgt werden, die zum ersten Mal die Versionen der C-Sprache f√ºr 2011 und 2018 abdecken. <br><br>  Steht nicht still und MISRA C ++.  Wie Sie wissen, stammt der neueste MISRA C ++ - Standard aus dem Jahr 2008, sodass die √§lteste Version der Sprache, die er abdeckt, C ++ 03 ist.  Aus diesem Grund gibt es einen anderen Standard, der MISRA √§hnelt und AUTOSAR C ++ hei√üt.  Es war urspr√ºnglich als Fortsetzung von MISRA C ++ konzipiert und sollte sp√§tere Sprachversionen abdecken.  Im Gegensatz zu seinem Mastermind wird AUTOSAR C ++ zweimal im Jahr aktualisiert und unterst√ºtzt derzeit C ++ 14.  Ein weiteres Upgrade auf C ++ 17, dann C ++ 20 usw. ist geplant. <br><br>  Was habe ich mit einem anderen Standard angefangen?  Tatsache ist, dass beide Organisationen vor etwas weniger als einem Jahr die Vereinheitlichung ihrer Standards in einem angek√ºndigt haben.  Jetzt werden MISRA C ++ und AUTOSAR C ++ zu einem einzigen Standard, und jetzt werden sie gemeinsam entwickelt.  Ich denke, dies sind gro√üartige Neuigkeiten f√ºr Entwickler, die unter C ++ - Mikrocontrollern schreiben, und nicht weniger gro√üartige Neuigkeiten f√ºr Entwickler von statischen Analysatoren.  Vor uns liegt noch viel Lieblingsarbeit!  :) <br><br><h2>  Fazit </h2><br>  Heute haben wir viel √ºber MISRA gelernt: Wir haben die Geschichte seines Auftretens gelesen, Beispiele f√ºr Regeln und die Philosophie des Standards studiert, alles in Betracht gezogen, was Sie f√ºr die Verwendung von MISRA in Ihren Projekten ben√∂tigen, und sogar ein wenig in die Zukunft geschaut.  Ich hoffe, Sie verstehen jetzt besser, was MISRA ist und wie man es kocht! <br><br>  Nach alter Tradition werde ich hier einen Link zu unserem PVS-Studio Static Analyzer hinterlassen.  Es kann nicht nur Abweichungen vom MISRA-Standard feststellen, sondern auch eine <a href="https://www.viva64.com/ru/examples/">Vielzahl von</a> Fehlern und Schwachstellen.  Wenn Sie PVS-Studio selbst ausprobieren m√∂chten, <a href="https://www.viva64.com/ru/pvs-studio-download/">laden Sie die</a> Demoversion <a href="https://www.viva64.com/ru/pvs-studio-download/">herunter</a> und √ºberpr√ºfen Sie Ihr Projekt. <br><br>  Damit ist mein Artikel abgeschlossen.  Ich w√ºnsche allen Lesern ein frohes neues Jahr und ein frohes neues Jahr! <br><br><h2>  Sitelinks </h2><br><ol><li>  Georgy Gribkov - " <a href="http://0x1.tv/%25D0%2591%25D0%25B5%25D0%25B7%25D0%25BE%25D0%25BF%25D0%25B0%25D1%2581%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25BD%25D0%25B0_%25D0%25BC%25D0%25B0%25D0%25BA%25D1%2581%25D0%25B8%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25BA%25D0%25B0%25D1%2585_%25E2%2580%2594_%25D0%25BA%25D0%25B0%25D0%25BA_%25D0%25BF%25D0%25B8%25D1%2581%25D0%25B0%25D1%2582%25D1%258C_%25D0%25BD%25D0%25B0%25D0%25B4%25D0%25B5%25D0%25B6%25D0%25BD%25D1%258B%25D0%25B9_C/C%252B%252B_%25D0%25BA%25D0%25BE%25D0%25B4_%25D0%25B4%25D0%25BB%25D1%258F_%25D0%25B2%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25B5%25D0%25BC%25D1%258B%25D1%2585_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC_(%25D0%2593%25D0%25B5%25D0%25BE%25D1%2580%25D0%25B3%25D0%25B8%25D0%25B9_%25D0%2593%25D1%2580%25D0%25B8%25D0%25B1%25D0%25BA%25D0%25BE%25D0%25B2,_SECR-2019)">Sicherheit mit maximaler Geschwindigkeit - wie man zuverl√§ssigen C / C ++ - Code f√ºr eingebettete Systeme schreibt</a> ." </li><li>  <a href="https://youtu.be/c5sJd4Abr8c">PVS-Studio ist ein statischer Code-Analysator</a> . </li><li>  <a href="https://youtu.be/9h7yObKAADU">PVS-Studio &amp; KEIL 5 Zusammenarbeit</a> . </li></ol><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/482486/"><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Wenn Sie diesen Artikel mit einem englischsprachigen Publikum teilen m√∂chten, verwenden Sie bitte den Link zur √úbersetzung: George Gribkov.  <a href="https://habr.com/en/company/pvs-studio/blog/482486/">Was ist MISRA und wie kocht man es?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482490/">https://habr.com/ru/post/de482490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482478/index.html">Iteraptor: Bibliothek f√ºr Deep Transparent Map Redus</a></li>
<li><a href="../de482480/index.html">Kosmische Ber√ºhrungen des ausgehenden Jahres</a></li>
<li><a href="../de482482/index.html">Rollenspiele</a></li>
<li><a href="../de482484/index.html">So steigern Sie die Entwicklungseffizienz mithilfe der Constraints-Theorie</a></li>
<li><a href="../de482486/index.html">Was ist Misra und wie man es kocht</a></li>
<li><a href="../de482492/index.html">Permafrost-Auftauen und Treibhausgasemissionen</a></li>
<li><a href="../de482494/index.html">Umfrageergebnisse aktualisieren</a></li>
<li><a href="../de482496/index.html">Ergebnisse: 9 gro√üe technologische Durchbr√ºche von 2019</a></li>
<li><a href="../de482498/index.html">Entwicklungsgeschichte der Schnittstellen in Java</a></li>
<li><a href="../de482502/index.html">5,8 Millionen IOPS: warum so viele?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>