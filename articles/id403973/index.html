<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🚀 🎆 🎐 Rumah pintar, bagaimana saya sampai ini. Bagian 4 🛰️ 🚵🏿 👃🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam tiga bagian pertama saya memberi tahu bagaimana saya memiliki gagasan (keharusan) membangun "rumah pintar" dan bagaimana saya mempraktikkannya. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rumah pintar, bagaimana saya sampai ini. Bagian 4</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403973/"><img src="https://habrastorage.org/web/673/c21/49a/673c2149a8f545a489d87fdc79f93d38.png" align="right">  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tiga</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagian</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama</a> saya memberi tahu bagaimana saya memiliki gagasan (keharusan) membangun "rumah pintar" dan bagaimana saya mempraktikkannya. <br><br>  Pada bagian ini saya akan memberi tahu Anda apa kekurangan yang diidentifikasi selama empat tahun pengoperasian sistem dan hal-hal berguna apa lagi yang berhasil saya implementasikan. <br><br>  Nah, spoiler kecil: di bawah potongan akan menjadi deskripsi singkat "kerajinan lain di esp8266 dengan preferensi dan pelacur." <br><a name="habracut"></a><br>  Jadi, empat tahun telah berlalu (sejak modul pertama beroperasi enam secara umum) .Secara keseluruhan, sistem bekerja dengan baik, tetapi dua kekurangan muncul, namun, mereka sangat diharapkan. <br><br>  <b>Yang pertama</b> adalah sentralisasi.  Ya, ini buruk, ya, saya tahu tentang itu, tetapi tidak ada pengalaman dalam pembuatan perangkat akhir yang berdiri sendiri, dan protokol 1-kawat yang dipilih sebagai protokol utama tidak memberikan kesempatan seperti itu. <br><br>  Dengan demikian, server pusat telah menjadi hambatan.  Lima kali karena kesalahan "besi" seluruh sistem tidak bekerja lebih dari satu hari (atau bahkan dua atau tiga) dan harus menggunakan cadangan (nyalakan lampu dengan sakelar pisau di perisai, lakukan tanpa lantai yang dipanaskan, ventilasi, meter air kalibrasi ulang, dll. d.). <br><br>  Ditambah lagi, rumah menjadi lebih sering kasus pemadaman listrik selama lebih dari satu jam.  UPS kehabisan daya dan server melakukan shutdown darurat, atau, lebih tepatnya, dipangkas secara kasar.  Setelah itu, kenaikannya tidak selalu berjalan dengan lancar, terutama karena MySQL tidak terlalu menyukai sikap kasar seperti itu.  Memulihkan tabel (dan seluruh cerita untuk semua sensor selama bertahun-tahun) kadang-kadang membutuhkan waktu berjam-jam dan tidak selalu ia bisa melakukan ini tanpa campur tangan pihak luar.  Ya, masalah ini, secara teoritis, dapat diselesaikan dengan membeli UPS yang lebih cerdas, menghubungkannya ke server dan mengajarkan server untuk mematikan dengan benar ketika daya terputus.  Tapi UPS saya saat ini masih orang tua yang cukup segar, dan motherboard server, untuk beberapa alasan tidak ingin bekerja secara normal dalam mode, secara otomatis dihidupkan setelah daya diberikan, jika sudah dimatikan sebelum itu. <br><br>  <b>Yang kedua</b> adalah pembatasan topologi bus 1-Wire + pengalaman saya. <br><br>  Ya, saya membaca bahwa harus ada batang utama dan hanya cabang-cabang kecil, banyak yang telah ditulis tentang ini.  Tetapi proyek ini berkembang sangat tidak terduga dan pada saat yang sama semuanya tampak berhasil.  Dan kemudian, pada satu momen "luar biasa", itu berhenti bekerja.  Artinya, Anda mematikan beberapa perangkat, semuanya baik-baik saja, hidupkan lagi dan sinyal mulai "mengambang".  Saya mengganti bagian dari jalur utama dengan yang terlindung, cabang-cabang yang diperkecil, tetapi tidak ada lagi kesempatan untuk membuat ban tunggal penuh tanpa pukulan dan kerusakan signifikan pada bagian akhir.  Akibatnya, ia memecah jaringan menjadi dua segmen, membawanya ke dua pengontrol terpisah, tetapi, bagaimanapun, setiap dua bulan sekali ada masalah lagi ketika perangkat mulai keluar dari jaringan.  Ini hanya membantu penutupan total seluruh sistem dengan inklusi berikutnya, dan prosedur ini tidak terlalu sepele, dan tanpa saya pekerjaan rumah saya tidak dapat melaksanakannya. <br><br>  Sementara itu, sekitar dua tahun yang lalu, saya menemukan sebuah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> dan saya punya ide untuk membuat semacam hadiah ulang tahun untuk ayah saya.  Dia gemar membiakkan berbagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tanaman eksotis</a> di lahan dan dia membutuhkan kontrol suhu konstan di zona iklim yang berbeda di kebunnya.  Sebenarnya, sebelum pengenalan sistem, ini dilakukan melewati termometer alkohol analog sepenuhnya (hangat) :) dua kali sehari.  Saya menetas ide ini selama beberapa bulan, kemudian memesan komponen yang diperlukan di salah satu toko online China yang terkenal (yang masih hanya dalam lingkaran sempit), membuat papan, menulis firmware.  Secara umum, ternyata entah bagaimana seperti ini: <br><br>  Seluruh sistem ditempatkan dalam jack telepon standar. <br><br><img src="https://habrastorage.org/web/23e/c8b/463/23ec8b463f9b422690f0450114e8f8bd.jpg"><br><br>  Pengkabelan kabel telepon empat kawat. <br><br><img src="https://habrastorage.org/web/867/69b/f6a/86769bf6a95c4874b79c0fcef21d21e2.jpg"><br><br>  Kekuasaan bersifat pasif.  Saya memesan versi sensor tahan air untuk kolam renang. <br><br><img src="https://habrastorage.org/web/a02/cfb/1d2/a02cfb1d2afe484fb4152487770ddf49.jpg"><br><br>  Sekarang ayah sedang menonton suhu di komputer. <br><br>  Seperti ini: <br><br><img src="https://habrastorage.org/web/bf8/cc2/ac2/bf8cc2ac299d46828efdde149450e16c.png"><br><br>  Nah, dengan grafik: <br><br><img src="https://habrastorage.org/web/e80/81a/b51/e8081ab518b642d981f137d36f8dd63c.png"><br><br><div class="spoiler">  <b class="spoiler_title">Diagram modul</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/527/063/d86/527063d865224257a0972905e113a78e.png"></div></div><br>  Dalam proses pengembangan, saya sangat menyukai modul ini dan saya mulai berpikir tentang cara menerapkannya di sistem saya, dan kemudian masalah yang dijelaskan di awal artikel jatuh pada saya.  Setelah beberapa percobaan dengan chip ini, saya mulai mengembangkan papan yang sekarang telah berhasil menggantikan sistem lama di tiga zona rumah sederhana saya. <br><br>  Jadi, "esp07_4PIO_6S v2" disajikan untuk perhatian Anda. <br><br>  Tampilan atas: <br><br><img src="https://habrastorage.org/web/bc6/355/f9e/bc6355f9e1d0428dbe96062bfc45255e.jpg"><br><br>  Tampak bawah: <br><br><img src="https://habrastorage.org/web/994/af8/090/994af809019345c4825d343ae62f7bee.jpg"><br><br>  Terakhir kali masalah besar adalah pemilihan tubuh, jadi kali ini saya menari dari tubuh.  Karena ada kasus dari model lama pemutar media Dune, pilihan jatuh pada mereka.  Setelah selesai dengan file (bukaan untuk input dan output media player sedikit berbeda, saya tidak bisa mendapatkan 220v ke konektor HDMI :)) sangat cocok.  Hanya sensor suhu yang harus dilakukan di luar, karena di dalam mengisi memanaskan udara. <br><br>  Input dan output 220v <br><br><img src="https://habrastorage.org/web/ff9/e7e/811/ff9e7e8111054a59b12bf901b3d55b00.jpg"><br><br>  Input dan output pada 5v dan 12v <br><br><img src="https://habrastorage.org/web/58b/8a0/634/58b8a063416c4c31ab6032f6f04acdcc.jpg"><br><br>  Apa yang bisa dilakukan modul ini dan mengapa lebih baik dari sistem yang lama? <br><br><ul><li>  Tidak diperlukan kabel tambahan untuk pemasangan.  Ini didukung dari jaringan yang sama yang dikontrolnya. </li><li>  Ketika server pusat atau Wi-Fi terputus atau tidak dapat diakses, server akan offline dan melakukan kontrol sesuai dengan skrip otonom (skrip untuk setiap zona dapat berbeda) </li><li>  Membawa data tentang suhu / kelembaban / penerangan di dalam ruangan. </li><li>  Ini mengontrol 4 perangkat 220, membaca data dari 6 sensor kontak kering. </li><li>  Mampu mengirim data secara mandiri ke thingspeak.com dan sistem serupa. </li><li>  Bereaksi lebih cepat daripada sistem yang lama (bukan bahwa ini adalah masalah, tetapi sebelum setiap sensor diinterogasi dua kali per detik, yang dapat memberikan jeda total lebih dari satu detik).  Sistem ini bekerja dengan gangguan. </li><li>  Mampu memperbarui firmware “over the air”. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Skema</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/eb8/0e5/be6/eb80e5be61aa4ca48208f5a3d37d5ee5.png"></div></div><br>  Tidak mungkin memisahkan papan seperti itu dalam satu lapisan, jadi saya harus menguasai LUT dua sisi: <br><br><div class="spoiler">  <b class="spoiler_title">Biaya</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/aca/fde/89f/acafde89f1d74d9bb695ee3b2bcc39f2.png"></div></div><br>  Pengalaman operasional telah lebih dari setengah tahun, direncanakan untuk mengganti semua bagian kontrol sistem dengan modul ini, hanya menyisakan pemantauan pada 1-Wire. <br><br>  Mengingat keinginan untuk artikel sebelumnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">skema</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode</a> tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> .  Yang lama ada di sana juga, tiba-tiba mereka berguna. <br><br>  Sesuatu seperti itu.  Suka dan berlangganan video baru :) Ini lelucon, toh artikel baru, jika ya, maka dalam beberapa tahun, Chukchi bukan penulis: P <br><br>  Meskipun, jika Anda memiliki pertanyaan tentang firmware dan arsitektur esp07_4PIO_6S, saya akan menulis artikel terperinci tentang kerajinan ini, menurut saya ada beberapa solusi menarik. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id403973/">https://habr.com/ru/post/id403973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id403963/index.html">Pencetakan 4D: bahan baru yang mengubah karakteristik dan bentuk</a></li>
<li><a href="../id403965/index.html">Tidak lebih: review dari pemain HiFiMan MegaMini</a></li>
<li><a href="../id403967/index.html">DataArt Flag Over Elbrus</a></li>
<li><a href="../id403969/index.html">Lokakarya praktis baru pada 20 Mei</a></li>
<li><a href="../id403971/index.html">Konferensi blockchain internasional Genesis Moscow Conference akan diadakan di Moskow pada 26 Mei</a></li>
<li><a href="../id403975/index.html">Benarkah dunia menjadi tempat yang lebih berbahaya bagi anak-anak daripada sebelumnya?</a></li>
<li><a href="../id403977/index.html">Satire dengan otak: di Moskow untuk pertama kalinya akan ada festival teori ilmiah gila "Yah, juga sains"</a></li>
<li><a href="../id403979/index.html">Pencetakan ovarium 3D membantu melahirkan tikus yang steril</a></li>
<li><a href="../id403981/index.html">Yogi Universal. Tinjau transformer laptop Lenovo Yoga 720</a></li>
<li><a href="../id403983/index.html">Lampu LED Brawex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>