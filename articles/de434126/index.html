<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👄 🎽 🔴 Spielen Sie Medien mit der VLCj-Bibliothek ab 🐇 🤜🏼 🏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hintergrund 
 (Sie können sofort überspringen und zum nächsten Element gehen) 

 Als ich Java lernte, unmittelbar nachdem ich Swing beherrschte, wurde...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Spielen Sie Medien mit der VLCj-Bibliothek ab</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434126/"><h3>  Hintergrund </h3><br>  (Sie können sofort überspringen und zum nächsten Element gehen) <br><br>  Als ich Java lernte, unmittelbar nachdem ich Swing beherrschte, wurde es interessant: „Aber wie spielt man Audio oder Video ab?“.  Ich habe lange in Google gestöbert und dort mehrere Bibliotheken ausgegraben, die mir theoretisch genau das geben sollten, was ich will.  Wie die Praxis gezeigt hat, lesen die meisten dieser Bibliotheken eine sehr kleine Anzahl von Formaten und sind nicht sehr bequem zu verwenden.  Ich kramte noch ein paar Tage und fand schließlich etwas, das mir theoretisch bei der Lösung des Problems helfen sollte.  Die VLCj-Bibliothek nimmt Codecs vom VLC Media Player und spielt Dateien mit ihnen ab.  Ein weiterer Tag des Leidens mit einem Tutorial auf der offiziellen Website und schließlich gelang es, die Videodatei in JFrame abzuspielen. <br><a name="habracut"></a><br><h3>  Kommen wir zur Sache: </h3><br>  1. Laden Sie die Bibliothek selbst herunter (es ist besser, die neueste Version zu verwenden, da Kompatibilitätsprobleme auftreten) <br><br>  2. Wenn Sie den VLC Media Player noch nicht installiert haben, müssen Sie ihn herunterladen und installieren.  Sie können es auf der offiziellen VideoLan-Website herunterladen (es ist besser, die neueste Version zu verwenden, sie enthält mehr Codecs). <br><br>  3. IDE, ich benutze Eclipse. <br><cut><br>  Erstellen Sie zunächst ein neues Projekt und nennen Sie es beispielsweise "MediaPlayer". <br><br>  Öffnen Sie nun den MediaPlayer-Ordner in Ihrem Eclipse-Arbeitsbereich und entpacken Sie das heruntergeladene Archiv mit der Bibliothek in diesen Ordner. <br><br>  Klicken Sie in Eclipse in den Einstellungen Ihres Projekts auf „Externe JARs hinzufügen“ und suchen Sie im folgenden Fenster die Datei vlcj-3.0.1.jar und wählen Sie sie aus.  Wähle <b>IHN UND NUR IHN</b> . <br><br>  Die Bibliothek war also mit dem Projekt verbunden.  Als nächstes müssen wir eine Instanz der Klasse erstellen.  Erstellen Sie beispielsweise Test.java (ich hoffe, dieser Prozess muss niemandem erklärt werden). <br><br>  Wir haben eine leere Klasse mit ungefähr folgendem Inhalt: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Als nächstes müssen wir einen JFrame erstellen, in dem wir unser Video anzeigen möchten.  Wir erstellen auch ein JPanel und legen die Leinwand hinein, die wir als Oberfläche für unseren Videoplayer verwenden. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ JFrame f=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JFrame(); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f.setVisible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); f.setBounds(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>); Canvas c=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(); c.setBackground(Color.black); JPanel p=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPanel(); p.setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BorderLayout()); p.add(c); f.add(p); } }</code> </pre> <br>  Der visuelle Teil ist also fertig.  Als nächstes wenden wir uns direkt der Bibliothek und dem VLC-Player zu.  Und tatsächlich erstellen Sie den Player selbst in unserem Rahmen. <br><br><pre> <code class="java hljs">NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\VideoLAN\VLC"</span></span>); Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); MediaPlayerFactory mpf= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaPlayerFactory(); EmbeddedMediaPlayer emp= mpf.newEmbeddedMediaPlayer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Win32FullScreenStrategy(f)); emp.setVideoSurface(mpf.newVideoSurface(c)); emp.setEnableMouseInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); emp.setEnableKeyInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); String file=<span class="hljs-string"><span class="hljs-string">"C:\\Users\Admin\eclipse-workspace\MediaPlayer/video.avi"</span></span>; emp.prepareMedia(file); emp.play();</code> </pre> <br>  Hier haben wir den Pfad zum VLC-Player angegeben (genauer gesagt die Dateien libvlc.dll, libvlccore.dll und den Plugins-Ordner).  Wir haben einen erweiterten Media Player erstellt (er verfügt über mehr Funktionen als nur einen "Media Player"), ihm eine Oberfläche zugewiesen, den Pfad zur Videodatei angegeben, die Datei für die Wiedergabe vorbereitet und sie tatsächlich wiedergegeben. <br><br>  Infolgedessen sieht Ihr Code ungefähr so ​​aus: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.BorderLayout; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.Canvas; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.Color; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JFrame; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JPanel; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.sun.jna.Native; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.sun.jna.NativeLibrary; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.binding.LibVlc; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.MediaPlayerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.embedded.EmbeddedMediaPlayer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.embedded.windows.Win32FullScreenStrategy; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.runtime.RuntimeUtil; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ JFrame f=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JFrame(); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f.setVisible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); f.setBounds(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>); Canvas c=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(); c.setBackground(Color.black); JPanel p=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPanel(); p.setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BorderLayout()); p.add(c); f.add(p); NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), <span class="hljs-string"><span class="hljs-string">"C:\\Program Files/VideoLAN/VLC"</span></span>); Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); MediaPlayerFactory mpf= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaPlayerFactory(); EmbeddedMediaPlayer emp= mpf.newEmbeddedMediaPlayer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Win32FullScreenStrategy(f)); emp.setVideoSurface(mpf.newVideoSurface(c)); emp.setEnableMouseInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); emp.setEnableKeyInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); String file=<span class="hljs-string"><span class="hljs-string">"C:\\Users\Admin\eclipse-workspace\MediaPlayer/video.avi"</span></span>; emp.prepareMedia(file); emp.play(); } }</code> </pre> <br>  Beachten Sie Folgendes: <br>  - Ihr Pfad zum VLC Media Player kann abweichen. <br>  - Der Pfad zu Ihrem Video kann variieren. <br><br>  Zur Vereinfachung können Sie die erforderlichen Dateien vom VLC Media Player in Ihr Projekt kopieren.  Dadurch entfällt auch die Notwendigkeit, VLC auf Computern zu installieren, auf denen Ihr Programm funktioniert. <br><br>  Zuerst hatte ich Schwierigkeiten, Dateien abzuspielen, deren Name oder Pfad Kyrillisch enthält.  Wenn Sie auf dieselben Schwierigkeiten stoßen, klicken Sie mit der rechten Maustaste auf Ihre Klasseninstanz, gehen Sie zu deren Einstellungen und ändern Sie die Codierung in UTF-8 </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de434126/">https://habr.com/ru/post/de434126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de434116/index.html">Die Geschichte der unglaublichen Leichtigkeit, moderne Softwareentwicklungsinfrastruktur zu hacken</a></li>
<li><a href="../de434118/index.html">React Tutorial Teil 4: Übergeordnete und untergeordnete Komponenten</a></li>
<li><a href="../de434120/index.html">React Tutorial, Teil 5: Erste Schritte mit einer TODO-Anwendung, Grundlagen des Stylings</a></li>
<li><a href="../de434122/index.html">Drehbuch - Kein Seitenobjekt</a></li>
<li><a href="../de434124/index.html">Aktivieren Sie die GPU-Beschleunigung in Photoshop unter Wine</a></li>
<li><a href="../de434128/index.html">PHP Digest Nr. 146 (10. - 24. Dezember 2018) + 2018 Ergebnisse</a></li>
<li><a href="../de434130/index.html">Reaktive Schnittstelle. Vortrag von Artyom Belov auf den FrontTalks 2018</a></li>
<li><a href="../de434132/index.html">Kaufen Sie einen Fernseher und rollen Sie ihn auf: LG plant, im kommenden Jahr mit dem Verkauf flexibler Fernseher zu beginnen</a></li>
<li><a href="../de434134/index.html">Analyse der Ergebnisse der Kaggle ML & DS-Umfrage 2018</a></li>
<li><a href="../de434136/index.html">Unternehmensanatomie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>