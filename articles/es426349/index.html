<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞ ‚è¨ üßìüèª Creamos una estaci√≥n de radio por Internet simple, compacta y econ√≥mica üíÇüèº üôéüèæ üÜî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Linux ser√° la plataforma de software, por simplicidad es mejor usar algo com√∫n, con mucha informaci√≥n en Internet, si algo sale mal. Iron para una est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Creamos una estaci√≥n de radio por Internet simple, compacta y econ√≥mica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426349/"> Linux ser√° la plataforma de software, por simplicidad es mejor usar algo com√∫n, con mucha informaci√≥n en Internet, si algo sale mal.  Iron para una estaci√≥n de radio por Internet puede ser cualquier cosa, un servidor completo con sus proyectos, una computadora port√°til vieja o una netbook, queremos barato y no necesitamos un rendimiento especial de iron. <br><br>  Si no tiene nada a mano, o si necesitamos un servidor completamente silencioso, ¬øpor qu√© no intentar usar una mini computadora? <br><br>  Algo as√≠ como la Raspberry Pi 3? <br><br>  No, queremos m√°s barato, por lo que necesitamos algo como Orange Pi.  Encontr√© un modelo Orange Pi Pc Plus con 1GB DDR3 RAM y 8GB EMMC Flash. <br><br><img src="https://habrastorage.org/webt/ew/ry/mf/ewrymf0vj-86hqfa2v8e7rrmjks.png"><a name="habracut"></a><br><br>  UPD: Ayer, todos de alguna manera tomaron el art√≠culo demasiado en serio, pero de hecho el experimento se realiz√≥ por el bien del fan√°tico, para ver si funciona o no.  Naturalmente, no se habla de ning√∫n uso "industrial", es como intentar sonar el estadio con un centro de m√∫sica ordinario. <br><br>  ¬øQu√© m√°s podemos necesitar? <br><br>  Quiero intentar configurar todo de una manera simple, por lo que a√∫n necesitar√© un cable de par trenzado para el enrutador y una tarjeta de memoria Micro SD, ya que no puedo instalar el sistema operativo directamente en la micro computadora.  Encontr√© una tarjeta de memoria para 8 gigabytes, esta cantidad es suficiente. <br><br>  Entonces, antes que nada, debe escribir la imagen del sistema operativo en la tarjeta de memoria. <br>  Para los servidores, prefiero usar el Debian probado en el tiempo (s√≠, la generaci√≥n m√°s joven probablemente prefiere CentOS, pero los de barba gris estar√°n de acuerdo conmigo en que Debian sigue siendo muy bueno). <br><br>  En general, hay muchas im√°genes preparadas para Orange Pi en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.orangepi.org/downloadresources</a> , pero a√∫n voy a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.armbian.com/download</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descargo el</a> archivo torrent de armbian desde dl.armbian.com/orangepipcplus (en el m√≠o caso de Debian_stretch_next.7z). <br><br>  Tengo Orange Pi Pc Plus, puedes tener cualquier otra mini computadora, as√≠ que busca la imagen adecuada. <br><br>  Despu√©s de descargar, desempaquete el archivo y vea la imagen en formato img.  Cualquiera que quiera con qu√© llenan la imagen, personalmente prefiero Etcher (https://etcher.io).  Insertamos una tarjeta de memoria, la seleccionamos si tiene varios medios conectados, haga clic en el bot√≥n de costura e ingrese la contrase√±a si tambi√©n tiene Linux en su computadora de escritorio o port√°til. <br><br><img src="https://habrastorage.org/webt/lq/3w/3y/lq3w3yteie6cz8jage7vau5zssw.png"><br><br>  La tarjeta con la imagen est√° lista, puede comenzar a conectar todo. <br>  ¬øQu√© necesitamos para comenzar y configurar nuestro servidor? <br>  La mini computadora en s√≠, Internet a trav√©s de cable Ethernet y fuente de alimentaci√≥n. <br>  Y eso es todo. <br><br>  No, por supuesto, puede confundirse, conectar el monitor y el teclado y configurar todo directamente, pero me gusta m√°s el teclado de mi computadora port√°til, por lo que configurar√© mi mini computadora de forma remota, a trav√©s de SSH. <br><br>  Entonces, comencemos, pegamos el cable Ethernet, una tarjeta Micro SD con una imagen de Armbian. <br>  Solo queda suministrar energ√≠a a la mini computadora. <br><br>  Pero con el poder del Orange Pi, todo es muy triste.  ¬øQu√© hay en una mini computadora normal?  As√≠ es, Micro-USB, pero ¬øc√≥mo puedo alimentar el Orange Pi?  Solo 5V a trav√©s de un conector pin, que se compra por separado. <br><br>  Un adaptador de corriente con un conector adecuado cuesta m√°s que un simple cable con USB est√°ndar al final, por lo que puede tomarlo. <br><br>  Si no hay una fuente de alimentaci√≥n gratuita con USB (y no la necesitamos de ninguna manera, sino por 2 amperios), entonces buscamos en nuestra caja cables, adaptadores y placas para computadoras (tiene una caja as√≠, ¬øverdad?) Y encuentre un adaptador adecuado de algunos viejos, rotos por una tableta infantil, suelden el cable y la alimentaci√≥n de nuestro servidor est√° lista. <br><br>  Bueno, o simplemente tome el cargador del viejo reproductor de mp3 de disco iRiver (solo tiene 4.7 voltios y 1.2 amperios, pero tambi√©n funciona). <br><br>  Estamos sirviendo comida y estamos listos para pasar, de hecho, a aquel para el que todo fue concebido, a la creaci√≥n de una estaci√≥n de radio por Internet. <br><br>  Si, como yo, tiene la intenci√≥n de sobrevivir con un m√≠nimo de perif√©ricos, entonces necesitamos averiguar qu√© direcci√≥n IP recibi√≥ nuestra mini computadora.  La forma m√°s f√°cil de averiguarlo es ir a su enrutador y ver qu√© direcci√≥n IP le dio el enrutador a nuestro servidor (su enrutador puede hacer DHCP, ¬øverdad?). <br><br>  Ahora puede iniciar sesi√≥n a trav√©s de SSH en nuestro servidor.  Quien use el cliente SSH es el que debe usar (nunca tiene Windows, pero no s√© qu√© hacen los clientes SSH). <br>  En mi caso, solo escribo en la consola ssh root@192.168.0.88, acepto agregar la clave ECDSA, la contrase√±a predeterminada para root se establece en "1234", despu√©s de iniciar sesi√≥n, nos encontramos en la consola del microordenador, lo que sugiere inmediatamente cambiar la contrase√±a de root. <br><br><img src="https://habrastorage.org/webt/gu/nz/c0/gunzc0ewl71jcxyhwrvoeegqpvc.png"><br><br>  Despu√©s de eso, se propone crear una cuenta de usuario sin privilegios, la creamos. <br>  En comparaci√≥n con las versiones anteriores del sistema operativo, la versi√≥n actual est√° algo simplificada en t√©rminos de configuraci√≥n y muchas cosas ya est√°n configuradas autom√°ticamente. <br><br>  Armbian tiene una herramienta de configuraci√≥n muy conveniente: <code>armbian-config</code> copia el comando a la consola y mira lo que puede ser √∫til. <br><br><img src="https://habrastorage.org/webt/ow/nr/yi/ownryigiv-au8gowgrfhvcetduk.png"><br><br>  Todav√≠a no necesitamos la configuraci√≥n del sistema, pero es posible que la necesite m√°s tarde, por ejemplo, para transferir el sistema configurado de Micro SD a la memoria flash EMMC de 8GB incorporada de una mini computadora. <br><br>  La secci√≥n Red nos ser√° √∫til, pero ser√≠a bueno tener una direcci√≥n IP est√°tica para el servidor.  Nuestra estaci√≥n de radio por Internet se puede conectar a la red incluso a trav√©s de Wi-Fi.  Todos establecen el nivel de perversidad por s√≠ mismos, pero si construyes la radio de Internet solo para ti y no hay planes para m√°s de 10 oyentes al mismo tiempo, ¬øpor qu√© no conectas nuestro servidor a Wi-Fi?  En casos extremos, puede enchufar un cable Ethernet en cualquier momento. <br><br>  Entonces, decidimos el tipo de conexi√≥n, ahora necesitamos configurar una direcci√≥n IP est√°tica, para esto vamos a la configuraci√≥n de IP y seleccionamos la interfaz de red deseada, despu√©s de lo cual decimos que queremos una direcci√≥n est√°tica, iniciarla y guardar la configuraci√≥n.  No es necesario cambiar la m√°scara y la puerta de enlace, ya que se reciben de su enrutador a trav√©s de DHCP. <br><br><img src="https://habrastorage.org/webt/b0/gp/qv/b0gpqvib6trft_pkir827aj8d3m.png"><br><br>  Despu√©s de ingresar una nueva direcci√≥n IP y presionar Enter, su sesi√≥n SSH se congelar√° inmediatamente, ya que el dispositivo tendr√° inmediatamente una nueva direcci√≥n IP.  Por lo tanto, simplemente cerramos la ventana con el terminal y vamos a nuestra mini computadora a trav√©s de SSH usando la nueva direcci√≥n IP. <br><br>  Por cierto, dado que todas las funciones que tenemos ser√°n de naturaleza administrativa, para no escribir constantemente antes de cada comando sudo, solo inicio sesi√≥n en la mini computadora como root. <br><br>  Al ejecutar <code>armbian-config</code> nuevamente, ¬øpodemos ver qu√© m√°s se puede configurar?  En la secci√≥n Personal, podemos configurar la zona horaria, la configuraci√≥n regional y el nombre del host.  Agregu√© la configuraci√≥n regional ru_RU.UTF-8 UTF-8, que ser√° √∫til. <br><br>  Para que se aplique la configuraci√≥n, debe salir de la utilidad de configuraci√≥n, cerrar sesi√≥n e iniciar sesi√≥n nuevamente o reiniciar el servidor con el comando reiniciar. <br><br>  Utilic√© el comando de reinicio para asegurarme de que la configuraci√≥n se guard√≥ y que el servidor comenz√≥ con √©xito. <br><br>  Se ha realizado la configuraci√≥n b√°sica del servidor y ¬øpor qu√© no instalar el sistema operativo con el sistema operativo MicroSD en la memoria flash interna de EMMC?  Por supuesto, si su mini computadora tiene esta memoria a bordo. <br><br>  Para hacer esto, vaya a <code>armbian-config</code> - System - Install, seleccione la unidad disponible, presione Enter, obtenga saludos del pasado, acepte y seleccione el tipo de sistema de archivos ext4. <br><br><img src="https://habrastorage.org/webt/yt/g4/ut/ytg4utinyttwtqoftarwnu-btv8.png"><br><br>  Ahora podemos sentarnos y esperar hasta que el sistema operativo se transfiera al almacenamiento interno de la mini computadora. <br><br><img src="https://habrastorage.org/webt/es/rz/0x/esrz0x4sqck7jn3sggbx6bba_yi.png"><br><br>  Una vez completada la copia, elija apagar la unidad.  Esperamos un par de segundos hasta que el LED de la mini computadora se apague, desconecte la alimentaci√≥n, retire la tarjeta microSD, vuelva a enchufar la alimentaci√≥n y encienda la computadora. <br><br>  S√≠, si no tiene memoria interna y no le transfiri√≥ el sistema operativo, probablemente no sea una buena idea sacar un MicroSD. <br><br>  Despu√©s de iniciar sesi√≥n en nuestra mini computadora a trav√©s de SSH y asegurarse de que todo funciona, puede comenzar a sintonizar la estaci√≥n de radio. <br><br>  En primer lugar, actualizamos la informaci√≥n del paquete mediante la <code>apt update</code> en la consola del servidor. <br><br>  S√≠, me encanta la comodidad, as√≠ que instalo mc con el comando <code>apt install mc</code> . <br>  Me gusta hacer todo desde debajo de mc, y si necesito ver la consola, solo presiono ctrl + o. <br><br>  Primero, instale el reproductor de m√∫sica demonio: <code>apt install mpd</code> . <br>  Se instalar√°n un mont√≥n de dependencias con √©l. <br><br>  Pasemos a la configuraci√≥n.  El archivo /etc/mpd.conf es responsable de la configuraci√≥n del demonio, √°bralo con el <code>nano /etc/mpd.conf</code> . <br><br>  Mi nombre de usuario no tiene privilegios hzs, y mi archivo de configuraci√≥n se ve as√≠: <br><br><pre> <code class="php hljs">music_directory <span class="hljs-string"><span class="hljs-string">"/home/hzs/music"</span></span> playlist_directory <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/playlists"</span></span> db_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/tag_cache"</span></span> log_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd.log"</span></span> pid_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/pid"</span></span> state_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/state"</span></span> sticker_file <span class="hljs-string"><span class="hljs-string">"/var/lib/mpd/sticker.sql"</span></span> user <span class="hljs-string"><span class="hljs-string">"hzs"</span></span> bind_to_address <span class="hljs-string"><span class="hljs-string">"localhost"</span></span> restore_paused <span class="hljs-string"><span class="hljs-string">"yes"</span></span> metadata_to_use <span class="hljs-string"><span class="hljs-string">"artist,title"</span></span> auto_update <span class="hljs-string"><span class="hljs-string">"yes"</span></span> audio_output { type <span class="hljs-string"><span class="hljs-string">"httpd"</span></span> name <span class="hljs-string"><span class="hljs-string">"My New Internet Radio Station!!!"</span></span> encoder <span class="hljs-string"><span class="hljs-string">"lame"</span></span> <span class="hljs-comment"><span class="hljs-comment"># optional, vorbis or lame port "8000" bind_to_address "0.0.0.0" # optional, IPv4 or IPv6 bitrate "256" # do not define if quality is defined format "44100:16:2" } volume_normalization "yes" filesystem_charset "UTF-8" id3v1_encoding "UTF-8"</span></span></code> </pre> <br>  Aqu√≠ todo est√° claro y sin comentarios especiales. <br><br>  Para trabajar, debe crear una estructura de directorio desde la parte superior de la configuraci√≥n.  Tenga en cuenta que el propietario de estos directorios debe ser un usuario sin privilegios, de quien todo funcionar√°, en mi caso hzs. <br><br>  Desde la ra√≠z, ejecute los siguientes comandos: <br><br> <code>chown -cR hzs:hzs /home/hzs/music</code> <br> <code>chown -cR hzs:hzs /home/hzs/.mpd</code> <br> <br>  Es hora de subir m√∫sica, tenemos SSH en el servidor, para que podamos conectar nuestro cliente FTP favorito a nuestro servidor. <br><br>  Sabemos que la direcci√≥n IP, el puerto 22, el nombre de usuario y la contrase√±a son los que especific√≥ al crear el usuario sin privilegios, el tipo de conexi√≥n SSH.  Vierta un poco de m√∫sica para la prueba en el directorio de m√∫sica especificada en la configuraci√≥n. <br><br><img src="https://habrastorage.org/webt/hs/x6/wy/hsx6wyhf98bmwv5bvy5kkpdvogi.png"><br><br>  Ahora el reproductor se inicia con la configuraci√≥n incorrecta, por lo que detenemos el demonio y lo iniciamos nuevamente: <br><br> <code>service mpd stop</code> <br> <code>service mpd start</code> <br> <br>  Para el control m√°s simple del demonio, <code>apt install mpc</code> utilidad de consola <code>apt install mpc</code> usando el comando <code>apt install mpc</code> . <br><br>  Despu√©s de la instalaci√≥n, configuraremos un poco el reproductor: <br><br> <code>mpc random on</code> <br> <code>mpc repeat on</code> <br> <br>  Ahora necesita agregar pistas y una lista de reproducci√≥n, en la consola es algo gimmorro, pero no se puede hacer nada. <br><br>  Observamos los archivos disponibles, que podemos agregar a la lista de reproducci√≥n: <br><br> <code>mpc ls</code> <br> <br>  Para agregar un archivo a la lista de reproducci√≥n, en el comando <code>mpc add</code> debemos especificar el nombre completo del archivo a agregar, la selecci√≥n por m√°scara no funciona: <br><br> <code>mpc add "01 Lost in Your Eyes.mp3"</code> <br> <br>  Vemos la lista de reproducci√≥n resultante: <br><br> <code>mpc playlist</code> <br> <br>  Es hora de lanzar nuestra estaci√≥n de radio: <br><br> <code>mpc play</code> <br> <br><img src="https://habrastorage.org/webt/8p/gc/j5/8pgcj5ce-fqssnegu8svkdjqxwu.png"><br><br>  Intentemos escuchar, para esto, en cualquier reproductor de audio, abra la transmisi√≥n de audio de nuestra estaci√≥n de radio.  Para hacer esto, ingrese la direcci√≥n de la transmisi√≥n <code>http://ip:port</code> , la tengo <code>http://192.168.0.90:8000</code> . <br><br>  Audacious jug√≥ de forma intermitente, hubo un problema con el almacenamiento en cach√©, pero SMPlayer y VLC no sintieron ning√∫n problema. <br><br><img src="https://habrastorage.org/webt/do/y_/e8/doy_e8rrunt7km5_eqddovxtp0c.png"><br><br><img src="https://habrastorage.org/webt/pl/dc/ec/pldcecft-jdoram8ixgsqbupi7o.png"><br><br><img src="https://habrastorage.org/webt/ff/j4/np/ffj4nptgv3ma90bakt63oyciqys.png"><br><br>  En principio, en esta etapa, nuestra estaci√≥n de radio por Internet ya est√° funcionando, debe agregar m√∫sica a la lista de reproducci√≥n y reenviar los puertos del enrutador para que nuestra estaci√≥n de radio por Internet se convierta en una estaci√≥n de radio por Internet y no en una radio en la red local. <br><br>  Tengo varios dominios, as√≠ que lo primero que hago en la configuraci√≥n de DNS es crear un registro "A" con testradio y la direcci√≥n IP externa est√°tica de mi enrutador en casa.  No tienes que hacer esto. <br><br>  Luego, en mi enrutador, configuro el reenv√≠o de puertos. <br><br>  Como ya tengo mi propia estaci√≥n de radio en un servidor grande, especifico el puerto fuente externo 9000 y el puerto local interno 8000, por lo que desde afuera la radio transmitir√° a trav√©s de <code>http://_ip:9000</code> . <br><br><img src="https://habrastorage.org/webt/z5/h5/vf/z5h5vf6bgcfm0k1t464-y9e1dlq.png"><br><br>  Eso es todo, ahora tenemos una estaci√≥n de radio por Internet "real". <br><br>  Si no quieres detenerte all√≠, ve m√°s all√°. <br><br>  No transmitimos la voz del DJ, pero si es necesario se puede implementar, pero lo que realmente se necesita es una interfaz de administraci√≥n de listas de reproducci√≥n conveniente. <br><br>  Hay toneladas de consolas de administraci√≥n, algunas se pueden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ver aqu√≠</a> , pero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">usar√©</a> el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pitchfork MPD Client</a> . <br><br>  Este es un bozal web completo, y s√≠, dispararemos con un arma a los gorriones y levantaremos un servidor http completo en una mini computadora con nuestra estaci√≥n de radio: <br><br> <code>apt install apache2</code> <br> <br>  Tambi√©n necesitaremos PHP: <br><br> <code>apt-get install php</code> <br> <br>  Todav√≠a necesito <br><br> <code>apt install php7.0-xml</code> <br> <br>  y <br><br> <code>apt install php-pear</code> <br> <br>  Creamos el directorio / home / hzs / wwwroot / pf en la carpeta de inicio y desempaquetamos en √©l el Cliente Pitchfork MPD previamente cargado a trav√©s de SSH. <br><br><img src="https://habrastorage.org/webt/vt/3j/wh/vt3jwhnfoip8vuciat5mtbjja44.png"><br><br>  En el archivo de configuraci√≥n del servidor web apache2 /etc/apache2/sites-available/000-default.conf <br> <code>nano /etc/apache2/sites-available/000-default.conf</code> <br>  cortamos todo y escribimos (no olvide cambiar "hzs" a su nombre de usuario): <br><br><pre> <code class="php hljs">&lt;VirtualHost *:<span class="hljs-number"><span class="hljs-number">80</span></span>&gt; ServerName localhost ServerAdmin webmaster@localhost DocumentRoot /home/hzs/wwwroot &lt;Directory /home/hzs/wwwroot/&gt; Options All AllowOverride All DirectoryIndex index.php index.html index.htm Order Allow,Deny Allow from All <span class="hljs-keyword"><span class="hljs-keyword">Require</span></span> all granted &lt;/Directory&gt; &lt;/VirtualHost&gt;</code> </pre> <br>  Luego reiniciamos el servidor http <br><br> <code>service apache2 restart</code> <br> <br>  Accediendo a la direcci√≥n de su servidor IP / pf (en mi caso: <code>http://192.168.0.90/pf</code> ) <br><br>  Veremos el panel de control: <br><br><img src="https://habrastorage.org/webt/wf/ch/a-/wfcha-qsfl5kbftdhelmpue4a0s.png"><br><br>  Todo es bastante simple e intuitivo. <br><br>  A continuaci√≥n, haga clic en el icono de la carpeta a la derecha y en la pesta√±a Sistema de archivos. <br><br>  Para actualizar la lista de archivos, haga clic en el bot√≥n Actualizar DB, luego seleccione los archivos restantes que a√∫n no tenemos en la lista de reproducci√≥n y haga clic en el bot√≥n Agregar un poco m√°s abajo. <br><br>  Actualizamos la p√°gina y vemos que todos los archivos que hemos agregado a la lista de reproducci√≥n: <br><br><img src="https://habrastorage.org/webt/d4/iz/vm/d4izvmjxin4-aapy4fxwvelnbxk.png"><br><br>  Si necesita ocultar el control del reproductor con una contrase√±a, puede editar el archivo de configuraci√≥n: <br><br> <code>nano /home/hzs/wwwroot/pf/config/config.xml</code> <br> <br>  Hay una estructura de configuraciones completamente comprensible. <br><br>  Entonces, tenemos un servidor de servidor de radio por Internet completo que mide 10 * 7 * 3 cent√≠metros.  Por supuesto, el servidor de baja potencia usado no atraer√° a cientos de oyentes, pero al menos no te dejar√° sin tu m√∫sica favorita donde sea que est√©s, si hay Internet cerca. <br><br>  En principio, no puede continuar leyendo, pero para aquellos que son especialmente persistentes, continuamos. <br>  Tenemos un servidor web completo, por qu√© ... <br>  Bueno, ya lo entiendes. <br><br>  Cree el directorio testradio en la ra√≠z de nuestro servidor web, cree el archivo <code>"index.php"</code> en √©l: <br><br><pre> <code class="php hljs">&lt;!DOCTYPE html&gt; &lt;html xmlns=<span class="hljs-string"><span class="hljs-string">"https://www.w3.org/1999/xhtml"</span></span> xml:lang=<span class="hljs-string"><span class="hljs-string">"ru-ru"</span></span> lang=<span class="hljs-string"><span class="hljs-string">"ru-ru"</span></span> dir=<span class="hljs-string"><span class="hljs-string">"ltr"</span></span>&gt; &lt;head&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"content-type"</span></span> content=<span class="hljs-string"><span class="hljs-string">"text/html; charset=utf-8"</span></span> /&gt; &lt;title&gt;My Test Radio&lt;/title&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"jquery-3.3.1.min.js"</span></span>&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;My Test Radio&lt;/h1&gt; &lt;div id=<span class="hljs-string"><span class="hljs-string">"song"</span></span>&gt; now playing:&lt;br&gt; &lt;div id=<span class="hljs-string"><span class="hljs-string">"title"</span></span>&gt;now playing&lt;/div&gt; &lt;br&gt; &lt;div&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"play"</span></span> type=<span class="hljs-string"><span class="hljs-string">"button"</span></span>&gt;Play&lt;/span&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"pause"</span></span> type=<span class="hljs-string"><span class="hljs-string">"button"</span></span>&gt;Pause&lt;/span&gt; &lt;/div&gt; &lt;br&gt; &lt;div&gt; vol:&lt;br&gt; &lt;input id=<span class="hljs-string"><span class="hljs-string">"volume"</span></span> type=<span class="hljs-string"><span class="hljs-string">"range"</span></span> min=<span class="hljs-string"><span class="hljs-string">"0"</span></span> max=<span class="hljs-string"><span class="hljs-string">"10"</span></span> value=<span class="hljs-string"><span class="hljs-string">"5"</span></span> /&gt; &lt;/div&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"duration"</span></span>&gt;&lt;/span&gt; &lt;br&gt; &lt;div&gt;<span class="hljs-number"><span class="hljs-number">256</span></span> kbps&lt;/div&gt; &lt;/div&gt; &lt;script language=<span class="hljs-string"><span class="hljs-string">"JavaScript"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> audio = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Audio(<span class="hljs-string"><span class="hljs-string">'http://testradio.nisel.ru:9000'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> play = document.getElementById(<span class="hljs-string"><span class="hljs-string">'play'</span></span>); play.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ audio.play(); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pause = document.getElementById(<span class="hljs-string"><span class="hljs-string">'pause'</span></span>); pause.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ audio.pause(); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> volume = document.getElementById(<span class="hljs-string"><span class="hljs-string">'volume'</span></span>); volume.addEventListener(<span class="hljs-string"><span class="hljs-string">'change'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ audio.volume = parseFloat(this.value / <span class="hljs-number"><span class="hljs-number">10</span></span>); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); audio.addEventListener(<span class="hljs-string"><span class="hljs-string">"timeupdate"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> duration = document.getElementById(<span class="hljs-string"><span class="hljs-string">'duration'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = parseInt(audio.currentTime % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = parseInt((audio.currentTime / <span class="hljs-number"><span class="hljs-number">60</span></span>) % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> h = parseInt((audio.currentTime / <span class="hljs-number"><span class="hljs-number">3600</span></span>) % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) s = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + s; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) m = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + m; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) h = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + h; duration.innerHTML = h + <span class="hljs-string"><span class="hljs-string">':'</span></span> + m + <span class="hljs-string"><span class="hljs-string">':'</span></span> + s; }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); &lt;/script&gt; &lt;script language=<span class="hljs-string"><span class="hljs-string">"JavaScript"</span></span>&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $.ajax({ url: <span class="hljs-string"><span class="hljs-string">"trackname.php"</span></span>, cache: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, success: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(html)</span></span></span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#title"</span></span>).html(html); } }); } $(document).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ show(); setInterval(<span class="hljs-string"><span class="hljs-string">'show()'</span></span>,<span class="hljs-number"><span class="hljs-number">5000</span></span>); }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  Este es el ejemplo m√°s simple de crear un reproductor para un sitio, tambi√©n puede mostrar el nombre de la composici√≥n actual, actualizada con ajax cada 5 segundos. <br><br>  La apariencia se puede terminar al gusto usando CSS. <br><br>  El c√≥digo muestra que la transmisi√≥n de audio ya va a la direcci√≥n especificada en el DNS de mi dominio. <br>  No olvides soltar el archivo jquery en el directorio (en mi caso jquery-3.3.1.min.js).  En general, por supuesto, jquery es demasiado aqu√≠ y uno podr√≠a hacer una solicitud de Ajax sin √©l, pero result√≥ ser demasiado vago para pensar y utilic√© un c√≥digo listo. <br><br>  A continuaci√≥n, cree el archivo <code>"trackname.php"</code> : <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> file_get_contents(<span class="hljs-string"><span class="hljs-string">'http://192.168.0.90/mpc'</span></span>);<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Tambi√©n en la ra√≠z del servidor web creamos el directorio "mpc" y el archivo <code>"index.php"</code> en √©l: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> exec(<span class="hljs-string"><span class="hljs-string">'mpc current'</span></span>);<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Por qu√© algunos pueden pedir esas muletas, el hecho es que en mi estaci√≥n de radio militar el servidor del jugador est√° en el mismo servidor, y la cara web del sitio est√° en un servidor web f√≠sicamente diferente. <br><br><img src="https://habrastorage.org/webt/sl/mg/eq/slmgeqlpij1qqccf75z2yfurvy4.png"><br><br>  Como debe interrogar la pista que se est√° reproduciendo directamente en el servidor con el reproductor, el directorio del servidor web mpc debe estar en √©l, y el archivo <code>"trackname.php"</code> est√° en el servidor web del sitio y carga el archivo con la descripci√≥n de la pista desde otro servidor a su direcci√≥n IP. <br><br>  El reproductor en s√≠ y el sitio de la estaci√≥n de radio pueden estar muy separados y comunicarse tanto en direcciones IP externas como en direcciones obstruidas con DNS.  Para que todo funcione, solo necesita reenviar los puertos correctamente. <br><br>  Puedes modificar el proyecto a tu gusto, bueno, tuve un agradable s√°bado por la tarde. <br>  ¬°Todos los experimentos exitosos! <br><br>  <b>UPD2: Un experimento de una semana lleg√≥ a su conclusi√≥n l√≥gica y apagu√© mi mini servidor con una estaci√≥n de radio.</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426349/">https://habr.com/ru/post/es426349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426339/index.html">25 de octubre de 2018 Reuni√≥n del grupo de usuarios de Atlassian en Raiffeisenbank</a></li>
<li><a href="../es426341/index.html">Memorizaci√≥n de kwarg predeterminado en Python</a></li>
<li><a href="../es426343/index.html">Reglas de comportamiento caballeroso en TI: la historia de ITIL</a></li>
<li><a href="../es426345/index.html">Interesantes acertijos de entrevistas t√©cnicas</a></li>
<li><a href="../es426347/index.html">ITMO University Digest: nuevos estudios, experiencia de antiguos alumnos y proyectos internacionales</a></li>
<li><a href="../es426351/index.html">Cambios en las certificaciones y ex√°menes de Microsoft</a></li>
<li><a href="../es426355/index.html">Funci√≥n Math.Sin (doble) para GPU</a></li>
<li><a href="../es426357/index.html">Unidad y Vive: Tutorial</a></li>
<li><a href="../es426359/index.html">Iniciativa contra la pirater√≠a Yandex no aprobada por los titulares de derechos de autor</a></li>
<li><a href="../es426361/index.html">Sobre la maravilla de la abeja y c√≥mo la matamos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>