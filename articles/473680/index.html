<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê£ üëãüèº üïπÔ∏è Aire acondicionado IT. Parte II ü§ûüèª üë®üèº‚Äçüåæ üßöüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En esta parte, le dir√© la opci√≥n de integraci√≥n "simple" de un aire acondicionado (y, en general, de casi cualquier dispositivo controlado a trav√©s de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aire acondicionado IT. Parte II</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473680/"><img src="https://habrastorage.org/webt/y_/r9/qi/y_r9qi_etxishykvysm5-e6gqem.jpeg" align="left" title="Peque√±o higo negro">  En esta parte, le dir√© la opci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">integraci√≥n</a> "simple" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de un aire acondicionado</a> (y, en general, de casi cualquier dispositivo controlado a trav√©s de IR) usando una puerta de enlace WiFi &lt;=&gt; IR. <br><br>  Para hacerlo m√°s interesante, eleg√≠ una puerta de enlace popular (por cierto, Yandex la usa para su Alice).  Puedes comprar uno en Ali, el precio es de aproximadamente 1200 rublos (Yandex es m√°s caro). <br><br>  El dispositivo es bastante compacto (cabe f√°cilmente en la palma de su mano), desde los √≥rganos visibles hay un peque√±o LED azul discreto y un bot√≥n para emparejar.  Todo lo dem√°s est√° oculto detr√°s de una carcasa transparente infrarroja negra.  Puede utilizar cualquier puerto USB disponible (fuente de alimentaci√≥n, computadora, etc.) como fuente de alimentaci√≥n.  La puerta de enlace se conecta a ella mediante un cable microUSB (suministrado o de cualquier manera conveniente). <br><br>  La peculiaridad de este dispositivo es que est√° construido sobre el esp8266 "conocido en c√≠rculos estrechos", lo que significa que puede ser "domesticado" con bastante facilidad. <br><a name="habracut"></a><br><h2>  Opci√≥n "para los m√°s peque√±os" </h2><br>  Antes de cambiar el dispositivo, intent√© usarlo en modo normal: instal√© la aplicaci√≥n TuyaSmart en el tel√©fono (hay versiones para Android y iPhone), y luego todo es simple: <br><br><ul><li>  registrarse en la aplicaci√≥n, </li><li>  pasaremos por un peque√±o asistente para conectar un nuevo dispositivo (para esto, la puerta de enlace debe estar conectada a la alimentaci√≥n y entrar en el modo de "emparejamiento" con un solo bot√≥n, </li><li>  despu√©s de que la puerta de enlace aparece en la aplicaci√≥n, creamos un nuevo "panel de control": otro peque√±o asistente donde selecciona el tipo de dispositivo (en mi caso, aire acondicionado), luego se selecciona el fabricante (no hay Electrolux en la aplicaci√≥n, pero funcion√≥ muy bien al elegir Midea).  Inmediatamente se nos ocurre el "nombre" de la nueva consola (eleg√≠ "Mr. White"). </li></ul><br>  Eso es todo  Despu√©s de eso, aparece el siguiente control remoto en el tel√©fono: <br><br><img src="https://habrastorage.org/webt/e5/ue/u_/e5ueu_qvxtkqvtt6itcpst7gpke.jpeg" align="right">  Con √©l, puede controlar las funciones b√°sicas b√°sicas: <br><br><ul><li>  encendido / apagado </li><li>  ajuste de temperatura </li><li>  selecci√≥n del modo de funcionamiento ("Auto", "Refrigeraci√≥n", "Calefacci√≥n", "Ventilador"), </li><li>  selecci√≥n de velocidad del ventilador ("Auto", "Bajo", "Medio", "Alto"). </li></ul><br>  En general, ya es posible usarlo para el control remoto, pero ¬ød√≥nde est√° la "casa inteligente" y la integraci√≥n? <br><br>  Dado que esta es una manera simple, es malo con una casa inteligente, pero con la integraci√≥n es algo mejor. <br><br>  Primero, la mosca en la pomada: no hay integraci√≥n con Apple HomeKit, por lo que Siri a√∫n no est√° disponible, pero con otras plataformas de la competencia, todo es mucho m√°s divertido: <br><br><ul><li>  Para Amazon Alexa, hay una habilidad Tuya Smart.  Es suficiente para activarlo e indicar en √©l su cuenta, que ingres√≥ durante el registro en la aplicaci√≥n; puede controlar por voz el aire acondicionado. </li><li>  Del mismo modo, puede conectar Tuya Smart al Asistente de Google. </li></ul><br>  En ambos casos, el idioma ruso no es compatible, pero la voz se controla de manera f√°cil y sencilla.  Encontr√© los siguientes comandos: <br>  - Alexa, enciende al Sr. White <br>  - Hola, Google, pon al Sr. White a 24 grados <br>  - Alexa, apaga al Sr.Blanco <br><br>  Perm√≠tame recordarle que he implementado el control de voz usando Amazon Echo Dot y Google Home Mini: ambos dispositivos trabajan los comandos de manera id√©ntica. <br><br>  Por cierto, qu√© comandos de voz puede controlar el modo de operaci√≥n y la velocidad del flujo de aire, no lo encontr√©.  Si alguien me lo dice, te lo agradecer√©. <br><br>  Y luego se hizo la integraci√≥n "semiautom√°tica" con UD: cuando la temperatura en la habitaci√≥n sube por encima del umbral, el controlador UD env√≠a un mensaje pidiendo encender el aire acondicionado, y yo, remotamente, usando la aplicaci√≥n TuyaSmart, encend√≠ el aire acondicionado en el modo requerido. <br><br>  La soluci√≥n es "regular", por supuesto, pero al menos de alguna manera puedes usarla. <br><br>  Pero este no es nuestro camino, seguimos adelante: <br><br><h2>  Camino Jedi </h2><br><h3>  Autopsia y preparaci√≥n </h3><br>  Hay una opci√≥n para flashear el dispositivo sin abrirlo, el m√©todo se describe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Este m√©todo me pareci√≥ innecesariamente complicado (tantos movimientos, cuando el firmware requiere solo 4 cables para soldar), y fue interesante mirar dentro. <br><br>  Desafortunadamente, en el proceso me dej√© llevar y olvid√© tomar una foto, as√≠ que mostrar√© las fotos de otras personas: <br><br><img src="https://habrastorage.org/webt/di/wv/bx/diwvbx4obuman2fxbcx9ncpxlhe.jpeg" width="360"><img src="https://habrastorage.org/webt/e3/dv/xd/e3dvxdmwrqauy1rhoqmdzlyolsu.jpeg" width="360"><br>  M√°s fotos se pueden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ver aqu√≠</a> . <br><br>  La foto muestra claramente que se utiliza el m√≥dulo TYWE3S (la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hoja</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">datos</a> en la cual es muy simple en Google). <br><br>  Ahora necesitas flashear el m√≥dulo.  El firmware original se sobrescribe y no se puede restaurar. <br><br>  El firmware se realiza de manera muy simple: tomamos el entorno Arduino (o Atom, o algo m√°s, elija a su gusto).  Descargue el boceto con el firmware de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tasmota</a> en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entorno de desarrollo</a> .  Luego nos conectamos en un m√≥dulo TYWE3S RX, TX, GND, VCC desde cualquier serie usb (no se mezcle; necesita 3.3V de potencia y los niveles de se√±al correspondientes, si hay 5V, tendr√° que pedir una nueva puerta de enlace).  Antes de aplicar energ√≠a, no olvide cerrar (de cualquier manera conveniente) el GPIO0 del m√≥dulo a tierra, poniendo as√≠ el m√≥dulo en modo firmware.  Firmware <br><br>  No es necesario configurar el firmware: todo se puede dejar en el c√≥digo "tal cual", solo necesitamos "domar" el m√≥dulo. <br><br>  Si todo se hace correctamente (despu√©s de desconectar los cables del firmware, por supuesto), encienda la puerta de enlace.  En su tel√©fono o computadora, active la b√∫squeda de redes WiFi: debe aparecer una nueva red con el nombre sonoff-xxxx (donde xxxx son n√∫meros), que nuestro dispositivo recoge. <br><br>  Nos conectamos a esta red y vamos a la direcci√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">192.168.4.1</a> : esta es la interfaz web de nuestra puerta de enlace. <br><br>  Primero, en la configuraci√≥n de la puerta de enlace, especifique la red WiFi dom√©stica y la contrase√±a (el dispositivo se reiniciar√° y se conectar√° a la red dom√©stica).  Adem√°s, todas las acciones son m√°s f√°ciles de hacer en √©l.  Naturalmente, debe averiguar de manera conveniente qu√© direcci√≥n recibi√≥ la puerta de enlace en la red dom√©stica. <br><br>  Vamos a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√°gina con las versiones de firmware de Tasmota</a> .  Descargue dos archivos: sonoff-minimal.bin y sonoff-ir.bin <br><br>  Ahora, usando la interfaz web de la puerta de enlace, actualizamos el firmware en dos etapas: primero cosimos la versi√≥n "m√≠nima" y el segundo paso es sonoff-ir. <br><br>  Despu√©s de todas estas acciones simples, ya tendremos un m√≥dulo con la versi√≥n de firmware actual en nuestras manos, solo queda configurarlo de la siguiente manera: <br><br><img src="https://habrastorage.org/webt/mr/ti/wh/mrtiwhec5gh-ggeret8rsschi9a.png" align="left" width="350"><br><br>  En realidad, esta es la configuraci√≥n m√≠nima necesaria: en el ejemplo descrito interactuaremos con el m√≥dulo utilizando solicitudes GET (aunque tambi√©n es posible a trav√©s de MQTT). <br><br>  Puede verificar el funcionamiento del m√≥dulo y, al mismo tiempo, descubrir algo √∫til en su consola (hay un enlace disponible desde la p√°gina principal de la interfaz web).  Abra la consola y vea c√≥mo "vive" el m√≥dulo. <br><br>  Ahora puede comenzar a aprender la interfaz de control del aire acondicionado.  Para hacer esto, tome el control remoto est√°ndar del aire acondicionado y presione el bot√≥n de encendido.  Si todo est√° bien, entonces una l√≠nea como: <br><br><pre><code class="plaintext hljs">19:24:09 MQT: tele/IRbridge/RESULT = {"IrReceived":{"Protocol":"COOLIX","Bits":24,"Data":"0xB29F70","DataLSB":"0x4DF90E","Repeat":0,"IRHVAC":{"Vendor":"COOLIX","Model":-1,"Power":"on","Mode":"cool","Celsius":"on","Temp":22,"FanSpeed":"min","SwingV":"off","SwingH":"off","Quiet":"off","Turbo":"off","Econo":"off","Light":"on","Filter":"off","Clean":"on","Beep":"off","Sleep":-1}}}</code> </pre> <br>  El m√≥dulo recibi√≥ y "analiz√≥" el comando IR del control remoto.  Es decir  de la consola se deduce inmediatamente qu√© protocolo (en mi caso es COOLIX) es utilizado por la unidad de aire acondicionado normal y qu√© par√°metros est√°n codificados en el paquete. <br><br>  Genial, ahora ya puedes controlar el aire acondicionado.  Para hacer esto de manera significativa, es mejor familiarizarse con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta</a> descripci√≥n de los comandos. <br><br>  Para verificar a trav√©s de la consola de la puerta de enlace, le enviaremos, por ejemplo, este comando (le dar√© todos los comandos para mi aire acondicionado, puede que tenga un protocolo de control diferente): <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"Cool","FanSpeed":"min","Temp":22}</code> </pre> <br>  Milagrosamente, el aire acondicionado se enciende inmediatamente y en el modo requerido.  Milagro! <br><br>  Apague el aire acondicionado con el siguiente comando: <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"Off"}</code> </pre> <br>  En general, el m√≥dulo est√° preparado y probado. <br><br>  Ir a la integraci√≥n! <br><br><h3>  Aire acondicionado + Domoticz = ¬°amistad para siempre! </h3><br>  Utilizo Domoticz como el sistema de automatizaci√≥n principal, por lo que seremos "amigos" de este sistema en particular. <br><br>  El plan de trabajo es el siguiente: <br><br><ol><li>  Cree varios dispositivos virtuales: un interruptor, dos selectores (para seleccionar modos y caudal de aire) y un termostato. </li><li>  Agregue algunos scripts que, mediante acciones con dispositivos virtuales, enviar√°n comandos a la puerta de enlace. </li><li>  Verifique que todo se gestione como deber√≠a. </li></ol><br><h4>  Dispositivos virtuales </h4><br>  Al crear dispositivos, debe especificar sus nombres.  Traigo el m√≠o, puedes elegir cualquier otro, solo recuerda arreglar los scripts para ellos m√°s tarde. <br><br>  Cree un interruptor regular (escriba "Switch") con el nombre "HVAC".  Este interruptor se usar√° para encender / apagar un bot√≥n. <br><br>  Para seleccionar los modos de funcionamiento del aire acondicionado, agregue un interruptor virtual "Modo HVAC" (tipo "Interruptor selector") con las siguientes caracter√≠sticas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t9/fe/dn/t9fednom5tcyxsgs-htc4vi2pkq.png"></div><br>  Tenga en cuenta que aqu√≠ cre√© solo dos modos: "calentamiento" y "enfriamiento".  Aunque el aire acondicionado todav√≠a tiene los modos "Autom√°tico" y "Ventilador", son in√∫tiles para m√≠: el primero funciona de alguna manera extra√±o e inc√≥modo para los hogares, y el segundo nunca fue necesario.  Si usa estos modos, simplemente puede agregarlos al selector. <br><br>  Del mismo modo, cree el selector "HVAC-FanSpeed": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xj/lj/3x/xjlj3x3mjwt9wtxyh0ve4ucljse.png"></div><br>  Ahora solo queda crear el termostato HVAC-Temp (el tipo de dispositivo es el punto de ajuste del termostato). <br><br><h4>  Guiones </h4><br>  De alguna manera estoy m√°s cerca de los scripts de Domoticz en Lua (Dispositivos), por lo que estoy haciendo lo que es m√°s conveniente para m√≠. <br><br>  Para mayor claridad: la direcci√≥n IP de la puerta de enlace IR en mi red dom√©stica es 10.40.20.254 y esta direcci√≥n aparece en uno de los scripts, deber√° fijarla en la direcci√≥n de su puerta de enlace. <br><br>  Crea los siguientes tres guiones. <br><br>  HVACauto: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(deviceValue) &lt; <span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(otherdevices_temperature[<span class="hljs-string"><span class="hljs-string">''</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 10'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end commandArray['HVAC'] = "On" end end return commandArray</span></span></code> </pre> <br>  Este script compara la temperatura establecida del acondicionador de aire y la temperatura del sensor de "Habitaci√≥n" para seleccionar el modo correcto: "enfriamiento" o "calefacci√≥n". <br><br>  HVACpower: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName == <span class="hljs-string"><span class="hljs-string">'HVAC'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> deviceValue == <span class="hljs-string"><span class="hljs-string">"Off"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">'  '</span></span>) commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 0'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Off" else if (tonumber(otherdevices['HVAC-Temp']) &lt; tonumber(otherdevices_temperature[''])) then commandArray['HVAC-Mode'] = 'Set Level: 10' --"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end end end end return commandArray</span></span></code> </pre> <br>  Este script monitorea el estado del interruptor "general" del aire acondicionado y selecciona el modo de operaci√≥n deseado al encender o apagar el aire acondicionado. <br><br>  Y el √∫ltimo script HVACmain: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> cmnd <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]==<span class="hljs-string"><span class="hljs-string">'Off'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"Off"}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","FanSpeed":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","Temp":'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>]..<span class="hljs-string"><span class="hljs-string">'}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(cmnd) <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">execute</span></span>(<span class="hljs-string"><span class="hljs-string">"wget '"</span></span>..cmnd..<span class="hljs-string"><span class="hljs-string">"'"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commandArray</code> </pre> <br>  Pero este gui√≥n es el m√°s importante.  Genera los comandos correctos con los par√°metros necesarios e implementa una solicitud GET a la puerta de enlace.  No olvide corregir la direcci√≥n IP de su puerta de enlace. <br><br>  En realidad, eso es todo.  Puede cambiar la interfaz de Domoticz a las pesta√±as correspondientes y "presionar botones" para controlar el aire acondicionado.  Si todo se hace correctamente, el sistema de aire acondicionado se controlar√° seg√∫n lo necesite. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5r/g0/yn/5rg0yn1zdupf6esyisywno0xck0.png" width="600"></div><br><h4>  Caracteristicas </h4><br>  Esta opci√≥n a trav√©s de una puerta de enlace IR tiene un inconveniente: la falta de comentarios.  Es decir  Si alguien usa un control remoto est√°ndar, los estados en Domoticz no cambiar√°n y mostrar√°n informaci√≥n que ya no es relevante. <br><br>  En general, esto realmente no interfiere (especialmente si no usa el control remoto IR, sino que usa solo las capacidades del UD). <br><br>  Por supuesto, puede monitorear con la puerta de enlace IR qu√© comandos se env√≠an a trav√©s de IR (la puerta de enlace transmite esta informaci√≥n a trav√©s de MQTT) y programar un poco m√°s para que incluso cuando se usa el control remoto est√°ndar, los estados y par√°metros actuales se establezcan en el sistema DD. <br><br>  Pero aunque no tengo tiempo para esto, y tampoco tengo una necesidad especial (es m√°s f√°cil "mirar" en el sistema de video vigilancia y ver si el aire acondicionado est√° encendido). <br><br><h2>  Y entonces? </h2><br>  Naturalmente, no nos detenemos all√≠. <br><br>  Como m√≠nimo, la implementaci√≥n de gesti√≥n actual ya es mucho m√°s funcional que la opci√≥n "para los m√°s peque√±os". <br><br>  Despu√©s de "reenviar" el aire acondicionado en Domoticz, tambi√©n hice el control con Siri: <br><br><img src="https://habrastorage.org/webt/xb/ks/rh/xbksrht6x7oixacm704aq57tixs.png" align="left" width="350">  Despu√©s de que apareci√≥ la oportunidad de controlar el sistema UD (y especialmente, la voz a trav√©s de Siri), desapareci√≥ la necesidad de usar un control remoto IR est√°ndar. <br><br>  En un futuro cercano, escribiremos un gui√≥n de "invierno" que, en ausencia de los propietarios y a una temperatura "exterior" de al menos -10, utilice los recursos del aire acondicionado para calentar la casa (es m√°s eficiente en energ√≠a en este modo que los pisos con calefacci√≥n el√©ctrica, pero menos c√≥modo), y Cuando los propietarios regresan, cambian nuevamente a calefacci√≥n por suelo radiante. <br><br>  Por supuesto, habr√° un script de "verano" que activar√° autom√°ticamente el modo de enfriamiento y mantendr√° la temperatura establecida de la casa. <br><br>  Naturalmente, todos los casos de uso posibles est√°n limitados solo por la imaginaci√≥n.  No te detengas;) <br><br><h2>  Parte III? </h2><br>  Por el momento, el m√≥dulo WiFi anunciado para controlar el aire acondicionado no ha aparecido a la venta. <br><br>  Si hay tiempo (largas noches de invierno), adoptar√© otro enfoque para el m√≥dulo de interfaz del aire acondicionado e intentar√© "captar" los comandos internos del aire acondicionado. <br><br>  Entonces ... ¬°estad atentos! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473680/">https://habr.com/ru/post/473680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473668/index.html">Por qu√© Bitrix - Bitrix</a></li>
<li><a href="../473670/index.html">Stoloto: como presentar un m√≥vil a la loter√≠a</a></li>
<li><a href="../473672/index.html">¬øPor qu√©, Bitrix? O el mundo de las hadas 1C</a></li>
<li><a href="../473676/index.html">La vulnerabilidad de backport en RouterOS compromete cientos de miles de dispositivos</a></li>
<li><a href="../473678/index.html">Sistema para recibir una copia de la memoria en dispositivos con Android a trav√©s de canales inal√°mbricos</a></li>
<li><a href="../473684/index.html">Desde la man√≠a de los tulipanes hasta el comercio electr√≥nico: qu√© opciones hay y c√≥mo las usan los inversores hoy en d√≠a</a></li>
<li><a href="../473692/index.html">Ennoble Phicomm K3C Router Wi-Fi</a></li>
<li><a href="../473694/index.html">Rusia es un centro global de desarrollo CAD. ¬øSab√≠as esto?</a></li>
<li><a href="../473702/index.html">¬øQu√© se est√° fragmentando en la cadena de bloques terahash?</a></li>
<li><a href="../473704/index.html">Bro vs. no hermano</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>