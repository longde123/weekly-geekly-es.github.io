<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äç‚öñÔ∏è üçê üö∂üèº Diez personas en 90 mil sitios: c√≥mo no volverse loco üö¥üèº üë©üèº‚Äç‚úàÔ∏è üêá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola, me llamo Vera Sivakova. Trabajo con socios clave de Yandex.Kassi: conecto grandes tiendas y servicios, lanzo proyectos y viajo a reuniones en to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Diez personas en 90 mil sitios: c√≥mo no volverse loco</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/426583/"><p>  Hola, me llamo Vera Sivakova.  Trabajo con socios clave de Yandex.Kassi: conecto grandes tiendas y servicios, lanzo proyectos y viajo a reuniones en todo el mundo.  En general, sigo que todo estaba bien. </p><br><p>  Cada empleado de Yandex.Money puede cambiar su ocupaci√≥n una vez al a√±o: elija un departamento y trabaje all√≠ durante varios d√≠as.  Por lo tanto, hace un mes, me sent√© en Sapsan y llegu√© a San Petersburgo.  All√≠ funciona un departamento de monitoreo, que tambi√©n monitorea que 90,000 sitios conectados a la taquilla est√°n funcionando bien, y decidimos unir fuerzas. </p><br><p><img src="https://habrastorage.org/webt/nk/aw/gc/nkawgcaslqu2prxrf2i8t4rp0qy.png"><br>  <em>¬øC√≥mo no volverse loco?</em>  <em>No es exactamente lo mismo</em> (fuente: reddit.com) </p><br><p>  Esta es una historia sobre c√≥mo funciona nuestro monitoreo y lo que aprend√≠ en un par de d√≠as en otro departamento. </p><a name="habracut"></a><br><p>  Cada segundo, alrededor de 600 transacciones pasan por el servicio y todo esto debe ser monitoreado en tiempo real, pero ¬øa qu√© hora exacta es hora de hacer sonar la alarma si sucede algo?  Necesitamos una mirada sistem√°tica a casi todo. </p><br><p>  Es una buena pr√°ctica analizar el sistema desde un punto de vista t√©cnico y no olvidarse de las m√©tricas comerciales: la cantidad de pagos, la rotaci√≥n y otros par√°metros. </p><br><p>  En sistemas peque√±os, el buen aspecto del administrador principal (a menudo el √∫nico) es suficiente.  Pero cuando hay muchos procesos, los empleados no pueden monitorear todo manualmente, por lo que la mejor estrategia ser√° la automatizaci√≥n m√°xima.  Nada funcionar√° sin el conocimiento experto y los esfuerzos del equipo, ya que el monitoreo es la mejora continua, el an√°lisis y la capacidad de elegir m√©tricas y desencadenantes competentes.  Funcionar√°n en caso de desviaci√≥n de las condiciones dadas e informar√°n una anomal√≠a. </p><br><p>  Distinguimos tres niveles de monitoreo, cada uno de los cuales tiene sus propios indicadores importantes: el nivel del sistema, el nivel de l√≥gica de negocios y el nivel de las contrapartes. </p><br><h2 id="uroven-sistemy">  Nivel del sistema </h2><br><p>  Lo m√°s importante aqu√≠ es el monitoreo continuo de la infraestructura.  De las herramientas que utilizamos Zabbix para recopilar datos en tiempo real, notifica sobre el funcionamiento de servidores y centros de datos, la calidad de la red, la disponibilidad de componentes y fuentes de datos. </p><br><p>  El monitoreo de la infraestructura de TI es un trabajo muy responsable, ya que la falla en este nivel est√° plagada de inoperancia del sistema y medidas desesperadas.  Por lo tanto, es importante no solo responder a los problemas "intermitentes", sino tambi√©n analizar las tendencias y los datos hist√≥ricos; esto permitir√° una advertencia oportuna de posibles puntos de falla y predecir√° la necesidad de escalar.  La regla funciona para todos los indicadores y niveles de monitoreo, incluidos los negocios. </p><br><p>  Para puntos cr√≠ticos, los umbrales de activaci√≥n deben seleccionarse a continuaci√≥n.  Por ejemplo, si el tiempo de respuesta de un enrutador aumenta, transferimos el tr√°fico a otro y eliminamos la causa en el primero.  Esto activ√≥ un activador de advertencia, que le permite recibir notificaciones de problemas potenciales muy temprano, lo que le da una reserva de tiempo para la respuesta, la capacidad de predecir cambios y evitar desastres. </p><br><h2 id="uroven-biznes-logiki">  Nivel de l√≥gica de negocios </h2><br><p>  Cada equipo define los procesos que necesitan ser rastreados, su prioridad y m√©tricas personales.  Por ejemplo, el equipo del Cajero tiene docenas de procesos comerciales, como el pago por cada m√©todo disponible: tarjetas, billeteras electr√≥nicas, a trav√©s de bancos y terminales en l√≠nea, comercio m√≥vil, env√≠o de registros, etc.  Como la herramienta principal para recopilar y mostrar datos sobre el trabajo de la l√≥gica empresarial, utilizamos Graphite junto con Grafana. </p><br><p>  En este nivel, es importante adherirse a un enfoque sistem√°tico y tratar de alejarse del binario y no informativo "funciona / no funciona". </p><br><p>  Por ejemplo, hay una m√©trica "N√∫mero de pagos con tarjeta exitosos".  Si comienza a parpadear, significa que el flujo de trabajo ha disminuido.  En este caso, debe comprender cu√°l es exactamente el motivo y tener en cuenta todos los componentes que intervienen en este proceso.  En el caso de una disminuci√≥n en el n√∫mero de transacciones, puede pensar inmediatamente en el hecho de que existen dificultades por parte del banco adquirente.  Pero los gr√°ficos muestran que con la disponibilidad de los bancos, todo est√° bien.  Luego debe investigar m√°s y, al final, resulta, por ejemplo, que todas las preguntas est√°n en el dise√±o: por alguna raz√≥n, el bot√≥n "Pagar" ha desaparecido o se ha vuelto inactivo. </p><br><h2 id="uroven-kontragentov">  Nivel de contraparte </h2><br><p>  Aqu√≠ estamos hablando de contrapartes espec√≠ficas, por ejemplo, la adquisici√≥n de bancos y comerciantes. </p><br><p>  Hemos seleccionado cronogramas y disparadores separados para los adquirentes, cuya disponibilidad debemos rastrear todo el tiempo.  Para nosotros, como servicio de pago, la estabilidad es muy importante, por lo tanto, en caso de quiebra de uno de los bancos, transferimos inmediatamente el flujo a la reserva. </p><br><p><img src="https://habrastorage.org/webt/go/_c/2e/go_c2eclhtetnklaej4ohkk04qy.png"><br>  <em>Un banco fall√≥, pero otro se conect√≥ autom√°ticamente</em> </p><br><p>  Aprendimos a redirigir el flujo de trabajo bastante bien y de manera oportuna si comenzaron los errores. </p><br><p><img src="https://habrastorage.org/webt/fe/kz/hn/fekzhnwwc8rkqb0hf7ms_-cfwjo.png"><br>  <em>Uno de los bancos registr√≥ un aumento en los errores de pago.</em> </p><br><p><img src="https://habrastorage.org/webt/13/vf/f-/13vff-8knq05k4j59kovhms8yvs.png"><br>  <em>Traducido - y todo est√° en orden.</em>  <em>Los valores del eje Y no son proporcionales</em> </p><br><p>  Los adquirentes pueden fallar por una variedad de razones en los niveles ya descritos: sistemas y l√≥gica de negocios.  Nadie es inmune a problemas imprevistos y no puede garantizar el 100% de disponibilidad.  Tambi√©n vale la pena recordar sobre el trabajo t√©cnico planificado y los lanzamientos, cuando necesite monitorear de cerca el progreso de los asuntos.  El tema de la redundancia y el cambio autom√°tico es cr√≠tico, ya que simple significa suspender los pagos para el negocio. </p><br><p>  Trabajamos con varios bancos a la vez para minimizar los riesgos de tiempo de inactividad y optimizar los pagos con tarjeta SR.  SR (tasa de √©xito) o la conversi√≥n es una m√©trica comercial que se calcula como la relaci√≥n entre la cantidad de pagos exitosos y la cantidad total de transacciones.  Diferentes compa√±√≠as miden la conversi√≥n a su manera: por ejemplo, alguien comienza a medir desde la p√°gina de pago, otras despu√©s de hacer clic en el bot√≥n "Pagar".  Pero, en general, SR est√° influenciado por muchos factores diferentes: MCC, si hay 3D-Secure en el pago, la geograf√≠a de los pagadores, pagos recurrentes o no.  El SR ‚Äúpromedio hospitalario‚Äù es imposible de determinar y no necesita saberlo; en cada caso ser√° su propio valor, que debe optimizarse. </p><br><p>  Toda la variedad de errores se puede dividir en dos grandes grupos. </p><br><ol><li>  <strong>Errores que pueden evitarse</strong> , por ejemplo, el pago desde este pa√≠s est√° prohibido.  Si est√° seguro de que este no es un ataque fraudulento y tiene usuarios en todo el mundo, entonces en este caso es necesario conectar la posibilidad de pago con tarjetas de cualquier emisor.  Esto, por cierto, se puede hacer en la cuenta personal del cajero de Yandex. </li><li>  <strong>Errores que no pueden ser influenciados</strong> , por ejemplo, la tarjeta est√° bloqueada.  Aqu√≠ solo ser√° √∫til volver a emitir o intentar repetir el pago con otra tarjeta como parte de una nueva transacci√≥n. </li></ol><br><p>  Muchos eligen un proveedor de pago a una tarifa.  De hecho, la tasa no es el √∫nico valor que debe tenerse en cuenta.  Tambi√©n debe observar el porcentaje de pagos exitosos (SR), porque nadie tiene una conversi√≥n del 100% y este valor var√≠a mucho de un banco a otro.  Tambi√©n es necesario considerar c√≥mo se ve el escenario de usuario en general: cu√°ntos pasos debe seguir antes de pagar, si la interfaz es clara, etc. </p><br><h2 id="kak-konversiya-vliyaet-na-pribyl">  C√≥mo la conversi√≥n afecta las ganancias </h2><br><p><img src="https://habrastorage.org/webt/vy/8x/7m/vy8x7myw1csu5qa3vnrdmusryv8.png"><br>  <em>En el segundo caso, la comisi√≥n por los servicios es mayor, pero la conversi√≥n tambi√©n es mayor, porque se utilizan la reserva y la configuraci√≥n adecuada de la puerta de enlace.</em> </p><br><p>  Como se puede ver en el ejemplo, una mejor soluci√≥n para el negocio ser√≠a tomar un mejor servicio y, a pesar del hecho de que la comisi√≥n es mayor debido a la diferencia en la calidad de la adquisici√≥n, al final tenemos 3 538 080 - 2 847 000 = 691 080 rublos de diferencia por mes.  Y esto es 8 millones al a√±o, lo que es mucho dinero para los negocios. </p><br><p>  La conversi√≥n, la rotaci√≥n y las tarifas son arbitrarias, pero el ejemplo demuestra que lo principal en el servicio es su estabilidad y calidad.  Y esto ya implica una mayor conversi√≥n y, como resultado, una mayor rotaci√≥n para el comerciante. </p><br><h2 id="kak-podklyuchaetsya-merchant">  C√≥mo se conecta el comerciante </h2><br><p>  Como se mencion√≥ anteriormente, tratamos de cubrir todo con m√©tricas y disparadores que se activan autom√°ticamente en un evento.  Veamos c√≥mo sucede todo en el ejemplo de monitorear a uno de los comerciantes. </p><br><p>  Despu√©s de conectarse al Cajero, el comerciante, si es necesario, es monitoreado.  Construimos un gr√°fico en Grafana y configuramos las m√©tricas mediante las cuales se activan alertas autom√°ticas en caso de desviaci√≥n de los valores "normales" dados. </p><br><p>  Utilizamos Moira para enviar notificaciones al chat del grupo de monitoreo, que verificar√° r√°pidamente los detalles.  La notificaci√≥n contiene un enlace al cronograma y detalles del incidente. </p><br><p><img src="https://habrastorage.org/webt/kr/g-/ef/krg-efr_0h_ou3yxyz0-aqwgdcy.png"><br>  <em>Absolutamente un ejemplo real de un mensaje de un bot</em> </p><br><p>  Despu√©s de analizar el gr√°fico, el especialista del equipo de monitoreo utiliza con mayor frecuencia Kibana para ver los registros.  Aqu√≠ la situaci√≥n puede ser prosaica, y luego, en los registros, obviamente, se ver√° un error o se requerir√° la participaci√≥n adicional de analistas para analizar las causas de la falla. </p><br><p>  En el futuro, queremos configurar una notificaci√≥n autom√°tica de los comerciantes sobre los errores de su lado, por ejemplo, sobre la inaccesibilidad del servidor o las respuestas que no son de protocolo.  Esto le permitir√° responder r√°pidamente a una falla y brindar informaci√≥n a las contrapartes para eliminar las causas. </p><br><p>  Adem√°s del aspecto t√©cnico, tambi√©n supervisamos cuidadosamente las m√©tricas comerciales, como la rotaci√≥n, los ingresos y la salida, pero este parece ser el tema de las siguientes historias. </p><br><h3 id="samoe-glavnoe">  Lo mas importante </h3><br><p>  Mi "d√≠a de desobediencia" (que es lo que llamamos una transici√≥n temporal a otro departamento) termin√≥ y regres√© a Mosc√∫.  Durante 2 d√≠as en el departamento de monitoreo, aprend√≠ mucho y agilic√© el conocimiento actual. </p><br><ul><li>  La tarea de monitoreo es proporcionar informaci√≥n relevante sobre el estado del sistema en todos los niveles; </li><li>  Elija m√©tricas y disparadores competentes: 90% de √©xito; </li><li>  En los servicios de pago, la conversi√≥n alcanza la oferta; </li><li>  Debe seguir la t√©cnica y recordar las m√©tricas comerciales; </li><li>  Necesitamos una visi√≥n sistem√°tica de los procesos y la capacidad de analizar relaciones; </li></ul><br><p>  Y sin embargo, se agradecido.  Monitoreando chicos, gracias! </p><br><hr><br><p>  <em>Eso es todo</em>  <em>Haz preguntas, suscr√≠bete a nuestro blog y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ven</a> a visitarnos.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es426583/">https://habr.com/ru/post/es426583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es426571/index.html">Un enfoque sistem√°tico de la velocidad: mediciones en l√≠nea en el front end</a></li>
<li><a href="../es426573/index.html">ZeroNights 2018. Recargar</a></li>
<li><a href="../es426575/index.html">Informe del Club de Roma 2018, Cap√≠tulo 1.12: "De un mundo vac√≠o a un mundo completo"</a></li>
<li><a href="../es426579/index.html">Engie y Ledger desarrollan una soluci√≥n de blockchain de hardware para almacenar datos generados por fuentes de energ√≠a verde</a></li>
<li><a href="../es426581/index.html">Lecci√≥n abierta "Descripci√≥n general de las caracter√≠sticas de Node.js"</a></li>
<li><a href="../es426585/index.html">Bajo presi√≥n de Instagram y Facebook: por qu√© Snapchat puede abandonar el intercambio y por qu√© es necesario</a></li>
<li><a href="../es426587/index.html">Problemas algor√≠tmicos en la interfaz. Yandex ejemplos y competencia</a></li>
<li><a href="../es426591/index.html">Posture Master: Stay Alive</a></li>
<li><a href="../es426593/index.html">DJI Phantom 4 RTK: mapeo de pr√≥xima generaci√≥n</a></li>
<li><a href="../es426595/index.html">Richard Hamming "Cap√≠tulo inexistente": como sabemos lo que sabemos (1-10 minutos de 40)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>