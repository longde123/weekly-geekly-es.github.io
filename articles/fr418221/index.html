<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖼️ 🖇️ 📽️ Cours MIT "Sécurité des systèmes informatiques". Conférence 6: «Opportunités», partie 3 🕙 😠 👨🏿‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Institut de technologie du Massachusetts. Cours magistral # 6.858. "Sécurité des systèmes informatiques." Nikolai Zeldovich, James Mickens. 2014 année...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cours MIT "Sécurité des systèmes informatiques". Conférence 6: «Opportunités», partie 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418221/"><h3>  Institut de technologie du Massachusetts.  Cours magistral # 6.858.  "Sécurité des systèmes informatiques."  Nikolai Zeldovich, James Mickens.  2014 année </h3><br>  Computer Systems Security est un cours sur le développement et la mise en œuvre de systèmes informatiques sécurisés.  Les conférences couvrent les modèles de menace, les attaques qui compromettent la sécurité et les techniques de sécurité basées sur des travaux scientifiques récents.  Les sujets incluent la sécurité du système d'exploitation (OS), les fonctionnalités, la gestion du flux d'informations, la sécurité des langues, les protocoles réseau, la sécurité matérielle et la sécurité des applications Web. <br><br>  Cours 1: «Introduction: modèles de menace» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 2: «Contrôle des attaques de pirates» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 3: «Débordements de tampon: exploits et protection» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 4: «Séparation des privilèges» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 5: «D'où viennent les systèmes de sécurité?» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> <br>  Conférence 6: «Opportunités» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <a name="habracut"></a><br><br>  <b>Public:</b> si cet <b>UID</b> fournit un accès en lecture seule à ce fichier et que vous avez également un descripteur de fichier, alors si vous perdez l' <b>UID</b> , pouvez-vous toujours obtenir l'autorisation de lire ce fichier? <br><br>  <b>Professeur:</b> oui, car il apparaîtra dans les catalogues.  Parce que dès que vous ajoutez la fonctionnalité au fichier, c'est tout.  Il vous est ouvert avec des privilèges spéciaux et ainsi de suite.  Mais le problème est qu'ils ont cette conception hybride. <br><br>  Autrement dit, disent-ils - vous pouvez vraiment ajouter des fonctionnalités aux répertoires et vous pouvez ouvrir un nouveau fichier, car vous travaillez en parallèle.  Il se peut que vous ajoutiez la fonctionnalité à un répertoire, tel que <b>/ etc</b> , mais vous n'avez pas un accès obligatoire à tous les fichiers du répertoire <b>/ etc.</b>  Mais dès que vous entrez dans le mode fonctionnalités, vous pouvez essayer d'ouvrir ces fichiers, sachant que vous avez accès au répertoire <b>/ etc.</b>  Après tout, il est déjà ouvert, alors pourquoi ne me donnez-vous pas un fichier appelé <b>«mot de passe»</b> situé dans ce répertoire? <br><br><img src="https://habrastorage.org/webt/8y/ew/2d/8yew2dwzcw7lpgl31ttm1ayzj6g.jpeg"><br><br>  Et puis le noyau doit décider s'il vous autorise à ouvrir le fichier dans ce répertoire en mode lecture ou écriture, ou ce que vous avez.  Je pense donc que c'est le seul endroit où vous avez encore besoin de ce privilège externe, car ils ont essayé de créer un design compatible, où ils ont utilisé une sémantique pas trop naturelle pour décrire le fonctionnement des répertoires.  Cela semble être le seul endroit où les principes de configuration d'un <b>système de</b> fichiers <b>Unix</b> restent. <br><br>  <b>Public:</b> existe-t-il d'autres lieux de ce type? <br><br>  <b>Professeur:</b> bonne question.  Je pense que je devrai obtenir leur code source précédent pour comprendre ce qui se passe, mais la plupart des autres situations ne nécessitent pas vraiment de vérification <b>UID</b> .  Parce que, par exemple, il n'est pas utilisé pour les réseaux.  Ce sont probablement les opérations habituelles du système de fichiers - si vous avez un segment de mémoire partagée, il vous suffit de l'ouvrir et c'est tout. <br><br>  <b>Public:</b> Pourriez-vous expliquer à nouveau quel est exactement l'ID utilisateur, si vous disposez de la fonctionnalité de <b>capacité</b> ? <br><br>  <b>Professeur:</b> c'est important lorsque vous avez la possibilité de cataloguer.  La question est, que vous offre cette opportunité?  Prenons une interprétation, par exemple, l'état des capacités d'un système propre, pas <b>Capsicum</b> .  Si dans un tel système vous avez la possibilité d'avoir un répertoire, vous avez alors un accès inconditionnel à tous les fichiers de ce répertoire. <br><br>  Sous <b>Unix,</b> ce n'est généralement pas le cas.  Vous pouvez ouvrir le répertoire sous <b>/ etc</b> , mais il contient de nombreux fichiers système dans lesquels des informations confidentielles peuvent être stockées, par exemple, la clé privée du serveur.  Et le fait que vous puissiez ouvrir et faire défiler ce répertoire ne signifie pas que vous ne pouvez pas ouvrir de fichiers dans ce répertoire.  Autrement dit, en ayant accès au répertoire, vous avez accès aux fichiers. <br><br>  Dans <b>Capsicum</b> , si vous ouvrez le répertoire <b>/ etc</b> , puis passez en mode fonctionnalité, les événements suivants se produisent.  Vous dites: «Je ne sais pas ce qu'est ce répertoire.  J'ajoute juste un descripteur de fichier. "  Il existe un fichier appelé "clé".  Pourquoi n'ouvrez-vous pas ce fichier <b>"clé"</b> ?  Tout simplement parce qu'à ce moment-là, vous ne voulez probablement pas que ce processus basé sur les fonctionnalités ouvre ce fichier, car vous n'en avez pas besoin.  Bien que cela vous permette de contourner <b>les</b> autorisations <b>Unix</b> pour le fichier. <br><br>  Par conséquent, je pense que les auteurs de cet article ont soigneusement abordé le développement d'un système qui ne violerait pas les mécanismes de sécurité existants. <br><br>  <b>Public:</b> c'est-à-dire que vous dites que dans certains cas, vous pouvez utiliser une combinaison de ces deux facteurs de sécurité?  Autrement dit, bien que l'utilisateur puisse modifier le fichier dans le répertoire, à quels fichiers accède-t-il en fonction de son ID utilisateur? <br><br>  <b>Professeur:</b> oui, exactement.  En pratique, dans <b>Capsicum</b> , avant de passer en mode fonctionnalités, vous devez deviner les fichiers dont vous aurez besoin ultérieurement.  Vous pouvez avoir besoin de bibliothèques partagées, de fichiers texte, de modèles, de connexions réseau, etc.  Par conséquent, vous ouvrez tout cela à l'avance.  Et il n'est pas toujours nécessaire de savoir de quel fichier vous avez besoin.  Ces gars ont donc fait en sorte que vous puissiez simplement ouvrir le descripteur de fichier du répertoire et afficher les fichiers dont vous avez besoin plus tard.  Cependant, il se peut que ces fichiers n'aient pas les mêmes autorisations que vous.  C'est précisément pour cette raison qu'une combinaison de deux facteurs de sécurité est utilisée - la vérification des capacités et de l' <b>uid</b> utilisateur.  Cela fait donc partie du mécanisme du noyau. <br><br><img src="https://habrastorage.org/webt/xk/zu/ea/xkzueav2oq8qjqezg3f7hrzvemc.jpeg"><br><br>  Pourquoi ont-ils besoin d'une bibliothèque comme <b>libcapsicum</b> ?  Je pense qu'il y a deux choses principales qu'ils prennent en charge dans cette bibliothèque. <br><br>  L'un d'eux est qu'ils implémentent une fonction appelée <b>lch_start</b> , que vous devez utiliser à la place de la fonction <b>cap_enter</b> .  Une autre fonction <b>fournie</b> par <b>libcapsicum</b> est le concept de listes fd, qui est utilisé pour passer des descripteurs de fichiers par des nombres.  Le but de ces <b>listes fd est</b> facile à expliquer.  Il s'agit essentiellement d'une généralisation de la façon dont <b>Unix</b> gère et transmet les descripteurs de fichiers entre les processus.  Sous <b>Unix</b> et <b>Linux</b> traditionnel, que vous utilisez aujourd'hui, certains descripteurs de fichiers lui sont transmis au démarrage du processus.  Vous ouvrez simplement certains descripteurs de fichiers avec des valeurs entières de cette table et démarrez le processus enfant dont vous avez besoin.  Ou vous exécutez un binaire spécifique, et il hérite de tous ces emplacements ouverts dans la table <b>fd</b> .  Cependant, il n'y a pas d'autre bonne façon de nommer ces choses que d'utiliser des nombres comme noms. <br><br>  Prenons un exemple dans lequel l'emplacement 0 sera utilisé pour l'entrée, l'emplacement 1 pour la sortie, l'emplacement 2 pour l'impression des messages d'erreur.  Voilà comment cela fonctionne sur <b>Unix</b> .  Et cela fonctionne très bien si vous transférez simplement ces trois fichiers ou trois flux de données vers le processus. <br><br><img src="https://habrastorage.org/webt/bn/kq/yt/bnkqytvftq_0clyfqaqlqmwlfbs.jpeg"><br><br>  Mais dans <b>Capsicum, il</b> arrive que vous «parcouriez» beaucoup plus de descripteurs de fichiers sur votre chemin.  Ainsi, lorsque vous transmettez un descripteur de fichier pour certains fichiers, vous passez par un descripteur de fichier pour une connexion réseau, un descripteur pour une bibliothèque partagée que vous possédez, etc.  La gestion de tous ces chiffres est assez fastidieuse.  Par conséquent, en fait, <b>libcapsicum</b> offre la possibilité d' <b>extraire</b> du nom de ces descripteurs de fichiers passés entre les processus en utilisant un nom hiérarchique utilisé à la place de ces entiers obscurs. <br>  C'est l'une des choses simples qu'ils fournissent dans leur bibliothèque.  Je peux donc passer le descripteur de fichier au processus et lui donner un nom, peu importe le numéro indiqué.  Cette méthode est beaucoup plus simple. <br><br>  Ils ont encore un autre mécanisme de lancement de sandbox plus complexe.  Il s'agit de <b>lch</b> , l' <b>API</b> hôte sandbox qui est utilisée au lieu de simplement entrer dans le mode des fonctionnalités de <b>capacité</b> .  Pourquoi avaient-ils besoin de quelque chose de plus qu'une simple entrée dans un mode opportunité?  Qu'est-ce qui vous dérange généralement lors de la création d'un bac à sable? <br><br>  <b>Public:</b> probablement, <b>lch</b> efface toutes les choses héritées afin d'assurer un démarrage "propre" du système. <br><br>  <b>Professeur:</b> oui.  Je pense qu'ils sont inquiets d'essayer de prendre en compte tout ce à quoi le bac à sable a accès.  Le fait est que si vous appelez simplement <b>cap_enter</b> , techniquement, au niveau du mécanisme du noyau, cela fonctionnera.  Non?  Cela vous empêche simplement de découvrir de nouvelles opportunités. <br><br>  Mais le problème est qu'il peut y avoir de nombreuses choses existantes auxquelles le processus a déjà accès. <br><br>  Par conséquent, je pense que l'exemple le plus simple est la présence de descripteurs de fichiers ouverts que vous avez oubliés, et ils seront simplement hérités par ce processus. <br><br><img src="https://habrastorage.org/webt/td/yv/dd/tdyvddlujfmx8gudizztmw9n5gm.jpeg"><br><br>  Par exemple, ils ont envisagé <b>tcpdump</b> .  Tout d'abord, ils ont changé <b>tcpdump</b> en appelant simplement <b>cap_enter</b> avant même qu'ils ne soient sur le point d'analyser toutes les connexions réseau entrantes.  D'une certaine manière, cela fonctionne bien car vous ne pouvez pas obtenir plus de fonctionnalités de <b>capacité</b> .  Mais ensuite, en regardant le descripteur de fichier ouvert, ils ont réalisé que vous avez un accès complet au terminal utilisateur, car vous avez un descripteur de fichier ouvert pour lui.  Pour que vous puissiez intercepter toutes les frappes que l'utilisateur effectue, etc.  Ce n'est donc probablement pas un bon plan pour <b>tcpdump</b> .  Parce que vous ne voulez pas que quelqu'un intercepte votre activité au clavier. <br><br>  Par conséquent, dans le cas de <b>tcpdump,</b> ils ont modifié manuellement les descripteurs de fichiers et y ont ajouté quelques bits de fonctionnalités pour limiter les types d'opérations que vous pouvez effectuer.  Si vous vous souvenez, dans <b>Capsicum, la</b> fonctionnalité a également ces bits supplémentaires indiquant la classe d'opérations qui peuvent être effectuées pour un descripteur de fichier donné.  Ainsi, ils supposent essentiellement que le descripteur de fichier est 0. Il pointe vers le <b>terminal</b> utilisateur tty.  Au départ, c'était juste un pointeur direct sur la structure <b>tty</b> dans le noyau.  Afin de limiter le type d'opérations pouvant être effectuées pour ce descripteur, ils ont introduit une structure bêta intermédiaire de capacités au milieu.  Ainsi, le descripteur de fichier pointe vers cette structure de capacités, et il pointe déjà vers le vrai fichier auquel vous essayez d'accéder.  Et cette structure de capacités contient des bits ou des autorisations restrictives pour un objet descripteur de fichier qui peut être implémenté. <br><br>  Ainsi, avec la saisie de données standard dans <b>tcpdump,</b> vous ne pouvez rien faire avec.  Vous pouvez juste voir qu'il existe, et c'est tout.  Pour le descripteur de fichier de sortie, ils ont fourni une opportunité lorsque vous pouvez y écrire quelque chose, mais ne pouvez pas modifier l'enregistrement, c'est-à-dire que vous ne pouvez pas annuler les modifications apportées. <br><br><img src="https://habrastorage.org/webt/cg/-4/p5/cg-4p5ivw8r8yde-rotszxgxn2a.jpeg"><br><br>  Alors, quoi d'autre pourriez-vous vous soucier du lancement <b>du bac à sable</b> ?  Je pense à l'état du descripteur de fichier.  Y a-t-il autre chose qui compte?  Je pense que sur <b>Unix</b> ce sont des descripteurs de fichiers et de la mémoire. <br><br>  Une autre chose est que ces gars-là craignent que dans votre espace d'adressage, des données confidentielles ne soient attribuées plus tôt.  Et le processus que vous allez isoler dans le bac à sable peut lire toute la mémoire disponible.  Donc, s'il y a une sorte de mot de passe que vous avez vérifié plus tôt, lorsque l'utilisateur se connecte et que vous n'avez pas encore effacé la mémoire, ce processus pourra le lire et faire quelque chose d '«intéressant». <br><br>  Ils ont résolu ce problème de cette façon: dans <b>lch_start,</b> vous devez exécuter un programme "frais".  Vous prenez le programme et vous y mettez tous les arguments, tous les descripteurs de fichiers que vous voulez lui fournir.  Ensuite, vous démarrez un nouveau processus ou lancez l'opération de réinitialisation de l'intégralité de l'espace mémoire virtuelle.  Et puis, il ne fait aucun doute que ce processus ne recevra aucun privilège supplémentaire pour affecter l'ensemble des données confidentielles.  C'est exactement ce que vous avez transmis à la fonction <b>lch_start</b> , en termes de noms binaires, d'arguments et de capacités de programme. <br><br>  <b>Public:</b> que se passe-t-il si le processus que vous démarrez contient <b>setuid</b> binaire <b>= 0</b> ? <br><br>  <b>Professeur:</b> Je pense que ces gars-là n'utilisent pas de «binaires» <b>setuid</b> en mode fonctionnalité pour éviter certaines interactions étranges qui peuvent apparaître.  Ils implémentent cette règle: vous pouvez avoir un programme <b>setuid</b> qui obtient ses privilèges du binaire <b>setuid</b> , puis il peut appeler <b>cap_enter</b> ou <b>lch_start</b> .  Mais une fois que vous êtes en mode fonctionnalités, vous ne pouvez pas restaurer de préférences supplémentaires. <br><br>  En principe, cela pourrait fonctionner, mais ce serait très étrange.  Parce que, si vous vous en souvenez, la seule chose où l' <b>UID</b> compte lorsque vous êtes en mode fonctionnalité est d'ouvrir des fichiers dans un répertoire.  Par conséquent, il n'est pas clair si c'est vraiment un excellent plan pour des privilèges supplémentaires ou s'il y a des défauts. <br><br>  <b>Public:</b> Plus tôt, nous avons expliqué pourquoi la bibliothèque ne prend pas vraiment en charge une séparation stricte entre les deux facteurs de sécurité.  Mais nous n'avons pas besoin d'utiliser <b>lch_start</b> ? <br><br>  <b>Professeur:</b> c'est vrai.  Supposons que vous ayez quelque chose comme <b>tcpdump</b> ou <b>gzip</b> - c'est une autre chose avec laquelle ils travaillent.  Vous supposez que l'application n'est probablement pas compromise, et il existe une fonction de base de l'application, et vous vous souciez de la façon dont elle se comporte dans le bac à sable.  Dans le cas de <b>tcpdump,</b> il s'agit d'une analyse des paquets provenant du réseau, dans le cas de <b>gzip,</b> il s'agit de décompresser les fichiers.  Et jusqu'à un certain point, vous supposez que le processus fait tout correctement et qu'il n'y aura pas de vulnérabilités.  Par conséquent, vous lui faites confiance pour exécuter <b>lch_start</b> et <b>pensez</b> qu'il créera correctement l'image, configurera correctement toutes les fonctionnalités, puis se limitera à tout autre appel système en dehors du mode capacités. <br><br>  Et puis vous lancez des choses dangereuses.  Mais à ce moment-là, l'installation était correcte et vous n'avez aucun moyen de sortir de ce bac à sable.  Donc, je pense que vous devez voir comment vous pouvez réellement utiliser le mode fonctionnalité pour les applications sandbox. <br><br>  Nous avons donc parlé un peu de <b>tcpdump</b> .  Comment isolez-vous ce processus?  Un autre exemple intéressant est le programme <b>gzip</b> , qui compresse et décompresse les fichiers.  Alors pourquoi s'inquiètent-ils du bac à sable?  Je pense qu'ils craignent que le code de décompression ne soit potentiellement bogué, ou qu'il puisse y avoir des erreurs dans la gestion de la mémoire, la gestion du tampon pendant la décompression, etc. <br><br><img src="https://habrastorage.org/webt/rg/0p/fj/rg0pfjhm0nsvzqfxtmemlhvwoq8.jpeg"><br><br>  Une autre question intéressante est pourquoi les changements pour <b>gzip</b> semblent beaucoup plus compliqués que pour <b>tcpdump</b> ?  Je pense que cela est dû à la façon dont l'application est structurée en interne, non?  Par conséquent, si vous avez une application qui a simplement compressé un fichier ou décompressé un fichier, il est normal de simplement la lancer sans la changer en mode fonctionnalités.  Vous lui donnez simplement une nouvelle norme pour décompresser quelque chose, et la norme fournit des données décompressées à la sortie, et cela fonctionnera bien. <br><br>  Le problème, comme cela arrive presque toujours avec de telles méthodes sandbox, est que l'application a en fait une logique de processus beaucoup plus complexe.  Par exemple, <b>gzip</b> peut compresser plusieurs fichiers à la fois, etc.  Et dans ce cas, vous avez une sorte de processus principal à la tête de l'application, qui a en fait des droits supplémentaires pour ouvrir plusieurs fichiers, les emballer, etc.  Et la logique de base doit souvent être un autre processus de support.  Dans le cas de <b>gzip, l'</b> application n'était pas structurée de sorte que la compression et la décompression agissaient comme des processus distincts.  Par conséquent, ils ont dû changer l'implémentation du noyau <b>gzip</b> et une certaine structure de l'application elle-même afin qu'en plus de simplement transférer des données vers la fonction de décompression, elles soient envoyées via un appel <b>RPC</b> ou écrites dans une sorte de descripteur de fichier.  Cela visait à empêcher les problèmes de tiers de se produire et à déballer sans pratiquement aucun privilège.  La seule chose que <b>gzip</b> pouvait faire en même temps était de renvoyer les données décompressées ou compressées au processus qui les appelait. <br><br>  Une autre chose à faire est de savoir comment utiliser <b>Capsicum</b> dans <b>OKWS</b> ?  Qu'en pensez-vous?  Serait-ce utile?  <b>Les</b> gars <b>OKWS seraient-ils</b> heureux de passer à <b>FreeBSD</b> parce qu'il est tellement plus facile à utiliser?  Comment utiliseriez-vous <b>Capsicum</b> sur <b>FreeBSD</b> ? <br><br>  <b>Public: On</b> pourrait se débarrasser de certaines restrictions strictes. <br><br>  <b>Professeur:</b> oui, c'est vrai, on pourrait les remplacer complètement par la présence d'un répertoire de descripteurs de fichiers et de capacités.  Vous n'auriez pas besoin de configurer un <b>chroot</b> déroutant.  Au lieu d'utiliser <b>chroot</b> avec beaucoup de petites choses, vous pouvez simplement définir soigneusement les autorisations.  Vous pouvez simplement ouvrir les fichiers dont vous avez besoin.  Cela semble donc être un gros plus. <br><br>  Ensuite, dans <b>OKWS</b> , vous avez le service de lancement <b>OK</b> , qui devrait démarrer tous les processus parents.  Dès qu'ils meurent, le signal revient à <b>okld</b> pour redémarrer le processus "mort".  Et cette chose devrait être exécutée en <b>root</b> , car elle devait isoler les processus dans le bac à sable.  Mais il y a un certain nombre de choses dans <b>OKWS</b> qui pourraient être améliorées avec <b>Capsicum</b> . <br><br>  Par exemple, vous pouvez accorder à <b>okld</b> beaucoup moins de privilèges.  Parce que, par exemple, pour obtenir le port 80, vous avez besoin des privilèges root.  Mais après cela, vous pouvez mettre tout le reste en toute sécurité dans le bac à sable, car les droits root ne sont plus nécessaires.  C'est donc plutôt cool.  Vous pouvez peut-être même déléguer au processus le droit de répondre aux demandes de quelqu'un d'autre, par exemple, un processus de surveillance du système qui n'a que ce descripteur de processus ou descripteur de processus pour le processus enfant et chaque fois qu'un tel processus se bloque, il en démarre un nouveau.  Par conséquent, je pense que la possibilité de créer un sandbox sans privilèges root est très utile. <br><br>  <b>Public:</b> vous pouvez attribuer à chaque processus un descripteur de fichier qui vous permet d'ajouter uniquement des entrées au journal. <br><br>  <b>Professeur:</b> oui, et c'est plutôt cool.  Comme nous l'avons dit la dernière fois, <b>oklogd</b> peut "gâcher" le fichier journal.  Et qui sait ce que le noyau lui permettra de faire quand il aura le descripteur de fichier du fichier journal lui-même.  Cependant, nous pouvons déterminer plus précisément les capacités du descripteur de fichier en lui donnant un fichier journal et en indiquant qu'il ne peut qu'écrire mais pas rechercher quoi que ce soit.  Ainsi, nous obtenons la fonction d'ajout uniquement si vous n'êtes qu'un «écrivain» pour ce fichier.  C'est très pratique.  Vous pouvez donner au processus les autorisations pour écrire dans le fichier, mais pas le lire, ce qui est très difficile à faire uniquement en utilisant <b>les</b> autorisations <b>Unix</b> . <br><br>         <b>Capsicum</b> ? <br><br> <b>:</b>  , ,   ,        .     ,       ,  ,       . <br><br> : ,  .   <b>Capsicum</b> ,   ,      .           . <br><br> <b>:</b> ,     ,  okld      .      ,    . <br><br> <b>:</b>  ,      .   .     ,    ,   <b>Capability</b>      ,       .   ,     ,   ,   , ,        . <br>   ,         <b>OKWS</b> .               . , ,        ,    .    . <br><br> ,      ,   «».     ,       .  ,  ,         ,    ,       .        . <br> :    «»   ,      ,   ? <br><br> : ,   <b>FreeBSD</b>   .   ,     -   ,     .  <b>FreeBSD</b>     <b>Casper</b> ,    ,   <b>Capability</b> .            ,   «». <br><br>      - ,    ,  ,  - ,        ,  <b>Casper</b>    . <br><br><img src="https://habrastorage.org/webt/pj/hd/aw/pjhdaw8gumxqioaoawbwert89ks.jpeg"><br><br>      ,    «»     .   . ,     ,     ,   <b>Casper</b>     - . <br><br>   ,         ,       -  .    ,   <b>Unix</b>         <b>FD</b> .      ,      .  ,        ,    . <br><br>  ,       <b>FreeBSD</b> ,      <b>DNS</b> .       <b>DNS</b> -,   «».    ,    <b>tcpdump</b> .    tcpdump   ,        IP-.   ,   ,     <b>DNS</b> -. <br><br>  , ,     DNS-      DNS-,    .    <b>Casper</b> ,      DNS-. <br><br>  ,     ,   ,     Capsicum?    ?       ?       ,   ,    .         <b>Capsicum</b> ,    ? <br><br>     tcpdump  <b>GZIP</b> ,  ,   .            ? <br><br><img src="https://habrastorage.org/webt/yn/u5/ov/ynu5ovmtuqxeqgmma5p7hnhhwrg.jpeg"><br><br> <b>:</b> ,    ,   ,  . ,      <b>Capability</b> . <br><br> <b>:</b> ,  .      <b>Capsicum</b>  ,    ,    .  ,    ,        .  ,   ,   ,    ,    <b>Capsicum</b> ,   . <br><br>     ,          «». ,  <b>TCP — helper</b> , ,  , ,    .    ,  ,  ,    . <br><br> <b>:</b>  ,             . <br><br> <b>:</b> , .        . ,          .    <b>lth_start</b> ,      .  ,   ,      ,     - . <br><br>  ,   ,  Capsicum        .    ,       ,   ,             .    Unix    -    ,      . <br><br>          ,     . ,               .  ,          ,    .   ,    . <br><br> ,   Chrome      .  ,     ,       ,        Unix,  -,     <b>Unix</b> . <br><br> ,      ? <br><br> <b>:</b>            . <br><br> <b>:</b> .       .    ,    .      ,       , ,                 ,     . <br><br>     <b>Unix</b>     ,      .  ,        .    ,              .        .      ,     . <br><br>     .  <b>Linux</b>  ,  <b>setcall</b> ,     ,    .  ,    <b>Capsicum</b> ,        ,  <b>Capsicum</b>     ,     .   <b>Linux</b>  <b>setcall</b>     ,   .    ,   ,      <b>Linux</b> . <br><br> ,    —    , ,      ,     ,        .   ,      -  ,     «//»,       .        <b>Capsicum</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> où vous pouvez démarrer le processus pour un fichier spécifique, et non pour l'ensemble du répertoire personnel. </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La version complète du cours est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des matériaux plus intéressants?  Soutenez-nous en passant une commande ou en le recommandant à vos amis, une <b>réduction de 30% pour les utilisateurs Habr sur un analogue unique de serveurs d'entrée de gamme que nous avons inventés pour vous:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toute la vérité sur VPS (KVM) E5-2650 v4 (6 cœurs) 10 Go DDR4 240 Go SSD 1 Gbps à partir de 20 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'à 24 cœurs et jusqu'à 40 Go de DDR4). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 mois gratuits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors du paiement d'un nouveau Dell R630 pour une période de six mois - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel Deca-Core Xeon E5-2630 v4 / 128GB DDR4 / 4x1TB HDD ou 2x240GB SSD / 1Gbps 10 TB - à partir de 99,33 $ par mois</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uniquement jusqu'à fin août, commandez peut être </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV à partir de 249 $</a> aux Pays-Bas et aux États-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">création d'un bâtiment d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 coûtant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418221/">https://habr.com/ru/post/fr418221/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418211/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 4: «Partager les privilèges», partie 3</a></li>
<li><a href="../fr418213/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 5: «D'où viennent les systèmes de sécurité», partie 1</a></li>
<li><a href="../fr418215/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 5: «D'où viennent les erreurs du système de sécurité», partie 2</a></li>
<li><a href="../fr418217/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 6: «Opportunités», partie 1</a></li>
<li><a href="../fr418219/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 6: Opportunités, partie 2</a></li>
<li><a href="../fr418223/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 7: Le Sandbox Native Client, Partie 1</a></li>
<li><a href="../fr418225/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 7: Native Client Sandbox Part 2</a></li>
<li><a href="../fr418227/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 7: Le Sandbox Native Client, Partie 3</a></li>
<li><a href="../fr418229/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 8: Modèle de sécurité réseau, partie 1</a></li>
<li><a href="../fr418233/index.html">Les mnémoniques BMW pour trouver les valeurs limites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>