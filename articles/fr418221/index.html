<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñºÔ∏è üñáÔ∏è üìΩÔ∏è Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 6: ¬´Opportunit√©s¬ª, partie 3 üïô üò† üë®üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Institut de technologie du Massachusetts. Cours magistral # 6.858. "S√©curit√© des syst√®mes informatiques." Nikolai Zeldovich, James Mickens. 2014 ann√©e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 6: ¬´Opportunit√©s¬ª, partie 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418221/"><h3>  Institut de technologie du Massachusetts.  Cours magistral # 6.858.  "S√©curit√© des syst√®mes informatiques."  Nikolai Zeldovich, James Mickens.  2014 ann√©e </h3><br>  Computer Systems Security est un cours sur le d√©veloppement et la mise en ≈ìuvre de syst√®mes informatiques s√©curis√©s.  Les conf√©rences couvrent les mod√®les de menace, les attaques qui compromettent la s√©curit√© et les techniques de s√©curit√© bas√©es sur des travaux scientifiques r√©cents.  Les sujets incluent la s√©curit√© du syst√®me d'exploitation (OS), les fonctionnalit√©s, la gestion du flux d'informations, la s√©curit√© des langues, les protocoles r√©seau, la s√©curit√© mat√©rielle et la s√©curit√© des applications Web. <br><br>  Cours 1: ¬´Introduction: mod√®les de menace¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conf√©rence 2: ¬´Contr√¥le des attaques de pirates¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conf√©rence 3: ¬´D√©bordements de tampon: exploits et protection¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conf√©rence 4: ¬´S√©paration des privil√®ges¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conf√©rence 5: ¬´D'o√π viennent les syst√®mes de s√©curit√©?¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> <br>  Conf√©rence 6: ¬´Opportunit√©s¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <a name="habracut"></a><br><br>  <b>Public:</b> si cet <b>UID</b> fournit un acc√®s en lecture seule √† ce fichier et que vous avez √©galement un descripteur de fichier, alors si vous perdez l' <b>UID</b> , pouvez-vous toujours obtenir l'autorisation de lire ce fichier? <br><br>  <b>Professeur:</b> oui, car il appara√Ætra dans les catalogues.  Parce que d√®s que vous ajoutez la fonctionnalit√© au fichier, c'est tout.  Il vous est ouvert avec des privil√®ges sp√©ciaux et ainsi de suite.  Mais le probl√®me est qu'ils ont cette conception hybride. <br><br>  Autrement dit, disent-ils - vous pouvez vraiment ajouter des fonctionnalit√©s aux r√©pertoires et vous pouvez ouvrir un nouveau fichier, car vous travaillez en parall√®le.  Il se peut que vous ajoutiez la fonctionnalit√© √† un r√©pertoire, tel que <b>/ etc</b> , mais vous n'avez pas un acc√®s obligatoire √† tous les fichiers du r√©pertoire <b>/ etc.</b>  Mais d√®s que vous entrez dans le mode fonctionnalit√©s, vous pouvez essayer d'ouvrir ces fichiers, sachant que vous avez acc√®s au r√©pertoire <b>/ etc.</b>  Apr√®s tout, il est d√©j√† ouvert, alors pourquoi ne me donnez-vous pas un fichier appel√© <b>¬´mot de passe¬ª</b> situ√© dans ce r√©pertoire? <br><br><img src="https://habrastorage.org/webt/8y/ew/2d/8yew2dwzcw7lpgl31ttm1ayzj6g.jpeg"><br><br>  Et puis le noyau doit d√©cider s'il vous autorise √† ouvrir le fichier dans ce r√©pertoire en mode lecture ou √©criture, ou ce que vous avez.  Je pense donc que c'est le seul endroit o√π vous avez encore besoin de ce privil√®ge externe, car ils ont essay√© de cr√©er un design compatible, o√π ils ont utilis√© une s√©mantique pas trop naturelle pour d√©crire le fonctionnement des r√©pertoires.  Cela semble √™tre le seul endroit o√π les principes de configuration d'un <b>syst√®me de</b> fichiers <b>Unix</b> restent. <br><br>  <b>Public:</b> existe-t-il d'autres lieux de ce type? <br><br>  <b>Professeur:</b> bonne question.  Je pense que je devrai obtenir leur code source pr√©c√©dent pour comprendre ce qui se passe, mais la plupart des autres situations ne n√©cessitent pas vraiment de v√©rification <b>UID</b> .  Parce que, par exemple, il n'est pas utilis√© pour les r√©seaux.  Ce sont probablement les op√©rations habituelles du syst√®me de fichiers - si vous avez un segment de m√©moire partag√©e, il vous suffit de l'ouvrir et c'est tout. <br><br>  <b>Public:</b> Pourriez-vous expliquer √† nouveau quel est exactement l'ID utilisateur, si vous disposez de la fonctionnalit√© de <b>capacit√©</b> ? <br><br>  <b>Professeur:</b> c'est important lorsque vous avez la possibilit√© de cataloguer.  La question est, que vous offre cette opportunit√©?  Prenons une interpr√©tation, par exemple, l'√©tat des capacit√©s d'un syst√®me propre, pas <b>Capsicum</b> .  Si dans un tel syst√®me vous avez la possibilit√© d'avoir un r√©pertoire, vous avez alors un acc√®s inconditionnel √† tous les fichiers de ce r√©pertoire. <br><br>  Sous <b>Unix,</b> ce n'est g√©n√©ralement pas le cas.  Vous pouvez ouvrir le r√©pertoire sous <b>/ etc</b> , mais il contient de nombreux fichiers syst√®me dans lesquels des informations confidentielles peuvent √™tre stock√©es, par exemple, la cl√© priv√©e du serveur.  Et le fait que vous puissiez ouvrir et faire d√©filer ce r√©pertoire ne signifie pas que vous ne pouvez pas ouvrir de fichiers dans ce r√©pertoire.  Autrement dit, en ayant acc√®s au r√©pertoire, vous avez acc√®s aux fichiers. <br><br>  Dans <b>Capsicum</b> , si vous ouvrez le r√©pertoire <b>/ etc</b> , puis passez en mode fonctionnalit√©, les √©v√©nements suivants se produisent.  Vous dites: ¬´Je ne sais pas ce qu'est ce r√©pertoire.  J'ajoute juste un descripteur de fichier. "  Il existe un fichier appel√© "cl√©".  Pourquoi n'ouvrez-vous pas ce fichier <b>"cl√©"</b> ?  Tout simplement parce qu'√† ce moment-l√†, vous ne voulez probablement pas que ce processus bas√© sur les fonctionnalit√©s ouvre ce fichier, car vous n'en avez pas besoin.  Bien que cela vous permette de contourner <b>les</b> autorisations <b>Unix</b> pour le fichier. <br><br>  Par cons√©quent, je pense que les auteurs de cet article ont soigneusement abord√© le d√©veloppement d'un syst√®me qui ne violerait pas les m√©canismes de s√©curit√© existants. <br><br>  <b>Public:</b> c'est-√†-dire que vous dites que dans certains cas, vous pouvez utiliser une combinaison de ces deux facteurs de s√©curit√©?  Autrement dit, bien que l'utilisateur puisse modifier le fichier dans le r√©pertoire, √† quels fichiers acc√®de-t-il en fonction de son ID utilisateur? <br><br>  <b>Professeur:</b> oui, exactement.  En pratique, dans <b>Capsicum</b> , avant de passer en mode fonctionnalit√©s, vous devez deviner les fichiers dont vous aurez besoin ult√©rieurement.  Vous pouvez avoir besoin de biblioth√®ques partag√©es, de fichiers texte, de mod√®les, de connexions r√©seau, etc.  Par cons√©quent, vous ouvrez tout cela √† l'avance.  Et il n'est pas toujours n√©cessaire de savoir de quel fichier vous avez besoin.  Ces gars ont donc fait en sorte que vous puissiez simplement ouvrir le descripteur de fichier du r√©pertoire et afficher les fichiers dont vous avez besoin plus tard.  Cependant, il se peut que ces fichiers n'aient pas les m√™mes autorisations que vous.  C'est pr√©cis√©ment pour cette raison qu'une combinaison de deux facteurs de s√©curit√© est utilis√©e - la v√©rification des capacit√©s et de l' <b>uid</b> utilisateur.  Cela fait donc partie du m√©canisme du noyau. <br><br><img src="https://habrastorage.org/webt/xk/zu/ea/xkzueav2oq8qjqezg3f7hrzvemc.jpeg"><br><br>  Pourquoi ont-ils besoin d'une biblioth√®que comme <b>libcapsicum</b> ?  Je pense qu'il y a deux choses principales qu'ils prennent en charge dans cette biblioth√®que. <br><br>  L'un d'eux est qu'ils impl√©mentent une fonction appel√©e <b>lch_start</b> , que vous devez utiliser √† la place de la fonction <b>cap_enter</b> .  Une autre fonction <b>fournie</b> par <b>libcapsicum</b> est le concept de listes fd, qui est utilis√© pour passer des descripteurs de fichiers par des nombres.  Le but de ces <b>listes fd est</b> facile √† expliquer.  Il s'agit essentiellement d'une g√©n√©ralisation de la fa√ßon dont <b>Unix</b> g√®re et transmet les descripteurs de fichiers entre les processus.  Sous <b>Unix</b> et <b>Linux</b> traditionnel, que vous utilisez aujourd'hui, certains descripteurs de fichiers lui sont transmis au d√©marrage du processus.  Vous ouvrez simplement certains descripteurs de fichiers avec des valeurs enti√®res de cette table et d√©marrez le processus enfant dont vous avez besoin.  Ou vous ex√©cutez un binaire sp√©cifique, et il h√©rite de tous ces emplacements ouverts dans la table <b>fd</b> .  Cependant, il n'y a pas d'autre bonne fa√ßon de nommer ces choses que d'utiliser des nombres comme noms. <br><br>  Prenons un exemple dans lequel l'emplacement 0 sera utilis√© pour l'entr√©e, l'emplacement 1 pour la sortie, l'emplacement 2 pour l'impression des messages d'erreur.  Voil√† comment cela fonctionne sur <b>Unix</b> .  Et cela fonctionne tr√®s bien si vous transf√©rez simplement ces trois fichiers ou trois flux de donn√©es vers le processus. <br><br><img src="https://habrastorage.org/webt/bn/kq/yt/bnkqytvftq_0clyfqaqlqmwlfbs.jpeg"><br><br>  Mais dans <b>Capsicum, il</b> arrive que vous ¬´parcouriez¬ª beaucoup plus de descripteurs de fichiers sur votre chemin.  Ainsi, lorsque vous transmettez un descripteur de fichier pour certains fichiers, vous passez par un descripteur de fichier pour une connexion r√©seau, un descripteur pour une biblioth√®que partag√©e que vous poss√©dez, etc.  La gestion de tous ces chiffres est assez fastidieuse.  Par cons√©quent, en fait, <b>libcapsicum</b> offre la possibilit√© d' <b>extraire</b> du nom de ces descripteurs de fichiers pass√©s entre les processus en utilisant un nom hi√©rarchique utilis√© √† la place de ces entiers obscurs. <br>  C'est l'une des choses simples qu'ils fournissent dans leur biblioth√®que.  Je peux donc passer le descripteur de fichier au processus et lui donner un nom, peu importe le num√©ro indiqu√©.  Cette m√©thode est beaucoup plus simple. <br><br>  Ils ont encore un autre m√©canisme de lancement de sandbox plus complexe.  Il s'agit de <b>lch</b> , l' <b>API</b> h√¥te sandbox qui est utilis√©e au lieu de simplement entrer dans le mode des fonctionnalit√©s de <b>capacit√©</b> .  Pourquoi avaient-ils besoin de quelque chose de plus qu'une simple entr√©e dans un mode opportunit√©?  Qu'est-ce qui vous d√©range g√©n√©ralement lors de la cr√©ation d'un bac √† sable? <br><br>  <b>Public:</b> probablement, <b>lch</b> efface toutes les choses h√©rit√©es afin d'assurer un d√©marrage "propre" du syst√®me. <br><br>  <b>Professeur:</b> oui.  Je pense qu'ils sont inquiets d'essayer de prendre en compte tout ce √† quoi le bac √† sable a acc√®s.  Le fait est que si vous appelez simplement <b>cap_enter</b> , techniquement, au niveau du m√©canisme du noyau, cela fonctionnera.  Non?  Cela vous emp√™che simplement de d√©couvrir de nouvelles opportunit√©s. <br><br>  Mais le probl√®me est qu'il peut y avoir de nombreuses choses existantes auxquelles le processus a d√©j√† acc√®s. <br><br>  Par cons√©quent, je pense que l'exemple le plus simple est la pr√©sence de descripteurs de fichiers ouverts que vous avez oubli√©s, et ils seront simplement h√©rit√©s par ce processus. <br><br><img src="https://habrastorage.org/webt/td/yv/dd/tdyvddlujfmx8gudizztmw9n5gm.jpeg"><br><br>  Par exemple, ils ont envisag√© <b>tcpdump</b> .  Tout d'abord, ils ont chang√© <b>tcpdump</b> en appelant simplement <b>cap_enter</b> avant m√™me qu'ils ne soient sur le point d'analyser toutes les connexions r√©seau entrantes.  D'une certaine mani√®re, cela fonctionne bien car vous ne pouvez pas obtenir plus de fonctionnalit√©s de <b>capacit√©</b> .  Mais ensuite, en regardant le descripteur de fichier ouvert, ils ont r√©alis√© que vous avez un acc√®s complet au terminal utilisateur, car vous avez un descripteur de fichier ouvert pour lui.  Pour que vous puissiez intercepter toutes les frappes que l'utilisateur effectue, etc.  Ce n'est donc probablement pas un bon plan pour <b>tcpdump</b> .  Parce que vous ne voulez pas que quelqu'un intercepte votre activit√© au clavier. <br><br>  Par cons√©quent, dans le cas de <b>tcpdump,</b> ils ont modifi√© manuellement les descripteurs de fichiers et y ont ajout√© quelques bits de fonctionnalit√©s pour limiter les types d'op√©rations que vous pouvez effectuer.  Si vous vous souvenez, dans <b>Capsicum, la</b> fonctionnalit√© a √©galement ces bits suppl√©mentaires indiquant la classe d'op√©rations qui peuvent √™tre effectu√©es pour un descripteur de fichier donn√©.  Ainsi, ils supposent essentiellement que le descripteur de fichier est 0. Il pointe vers le <b>terminal</b> utilisateur tty.  Au d√©part, c'√©tait juste un pointeur direct sur la structure <b>tty</b> dans le noyau.  Afin de limiter le type d'op√©rations pouvant √™tre effectu√©es pour ce descripteur, ils ont introduit une structure b√™ta interm√©diaire de capacit√©s au milieu.  Ainsi, le descripteur de fichier pointe vers cette structure de capacit√©s, et il pointe d√©j√† vers le vrai fichier auquel vous essayez d'acc√©der.  Et cette structure de capacit√©s contient des bits ou des autorisations restrictives pour un objet descripteur de fichier qui peut √™tre impl√©ment√©. <br><br>  Ainsi, avec la saisie de donn√©es standard dans <b>tcpdump,</b> vous ne pouvez rien faire avec.  Vous pouvez juste voir qu'il existe, et c'est tout.  Pour le descripteur de fichier de sortie, ils ont fourni une opportunit√© lorsque vous pouvez y √©crire quelque chose, mais ne pouvez pas modifier l'enregistrement, c'est-√†-dire que vous ne pouvez pas annuler les modifications apport√©es. <br><br><img src="https://habrastorage.org/webt/cg/-4/p5/cg-4p5ivw8r8yde-rotszxgxn2a.jpeg"><br><br>  Alors, quoi d'autre pourriez-vous vous soucier du lancement <b>du bac √† sable</b> ?  Je pense √† l'√©tat du descripteur de fichier.  Y a-t-il autre chose qui compte?  Je pense que sur <b>Unix</b> ce sont des descripteurs de fichiers et de la m√©moire. <br><br>  Une autre chose est que ces gars-l√† craignent que dans votre espace d'adressage, des donn√©es confidentielles ne soient attribu√©es plus t√¥t.  Et le processus que vous allez isoler dans le bac √† sable peut lire toute la m√©moire disponible.  Donc, s'il y a une sorte de mot de passe que vous avez v√©rifi√© plus t√¥t, lorsque l'utilisateur se connecte et que vous n'avez pas encore effac√© la m√©moire, ce processus pourra le lire et faire quelque chose d '¬´int√©ressant¬ª. <br><br>  Ils ont r√©solu ce probl√®me de cette fa√ßon: dans <b>lch_start,</b> vous devez ex√©cuter un programme "frais".  Vous prenez le programme et vous y mettez tous les arguments, tous les descripteurs de fichiers que vous voulez lui fournir.  Ensuite, vous d√©marrez un nouveau processus ou lancez l'op√©ration de r√©initialisation de l'int√©gralit√© de l'espace m√©moire virtuelle.  Et puis, il ne fait aucun doute que ce processus ne recevra aucun privil√®ge suppl√©mentaire pour affecter l'ensemble des donn√©es confidentielles.  C'est exactement ce que vous avez transmis √† la fonction <b>lch_start</b> , en termes de noms binaires, d'arguments et de capacit√©s de programme. <br><br>  <b>Public:</b> que se passe-t-il si le processus que vous d√©marrez contient <b>setuid</b> binaire <b>= 0</b> ? <br><br>  <b>Professeur:</b> Je pense que ces gars-l√† n'utilisent pas de ¬´binaires¬ª <b>setuid</b> en mode fonctionnalit√© pour √©viter certaines interactions √©tranges qui peuvent appara√Ætre.  Ils impl√©mentent cette r√®gle: vous pouvez avoir un programme <b>setuid</b> qui obtient ses privil√®ges du binaire <b>setuid</b> , puis il peut appeler <b>cap_enter</b> ou <b>lch_start</b> .  Mais une fois que vous √™tes en mode fonctionnalit√©s, vous ne pouvez pas restaurer de pr√©f√©rences suppl√©mentaires. <br><br>  En principe, cela pourrait fonctionner, mais ce serait tr√®s √©trange.  Parce que, si vous vous en souvenez, la seule chose o√π l' <b>UID</b> compte lorsque vous √™tes en mode fonctionnalit√© est d'ouvrir des fichiers dans un r√©pertoire.  Par cons√©quent, il n'est pas clair si c'est vraiment un excellent plan pour des privil√®ges suppl√©mentaires ou s'il y a des d√©fauts. <br><br>  <b>Public:</b> Plus t√¥t, nous avons expliqu√© pourquoi la biblioth√®que ne prend pas vraiment en charge une s√©paration stricte entre les deux facteurs de s√©curit√©.  Mais nous n'avons pas besoin d'utiliser <b>lch_start</b> ? <br><br>  <b>Professeur:</b> c'est vrai.  Supposons que vous ayez quelque chose comme <b>tcpdump</b> ou <b>gzip</b> - c'est une autre chose avec laquelle ils travaillent.  Vous supposez que l'application n'est probablement pas compromise, et il existe une fonction de base de l'application, et vous vous souciez de la fa√ßon dont elle se comporte dans le bac √† sable.  Dans le cas de <b>tcpdump,</b> il s'agit d'une analyse des paquets provenant du r√©seau, dans le cas de <b>gzip,</b> il s'agit de d√©compresser les fichiers.  Et jusqu'√† un certain point, vous supposez que le processus fait tout correctement et qu'il n'y aura pas de vuln√©rabilit√©s.  Par cons√©quent, vous lui faites confiance pour ex√©cuter <b>lch_start</b> et <b>pensez</b> qu'il cr√©era correctement l'image, configurera correctement toutes les fonctionnalit√©s, puis se limitera √† tout autre appel syst√®me en dehors du mode capacit√©s. <br><br>  Et puis vous lancez des choses dangereuses.  Mais √† ce moment-l√†, l'installation √©tait correcte et vous n'avez aucun moyen de sortir de ce bac √† sable.  Donc, je pense que vous devez voir comment vous pouvez r√©ellement utiliser le mode fonctionnalit√© pour les applications sandbox. <br><br>  Nous avons donc parl√© un peu de <b>tcpdump</b> .  Comment isolez-vous ce processus?  Un autre exemple int√©ressant est le programme <b>gzip</b> , qui compresse et d√©compresse les fichiers.  Alors pourquoi s'inqui√®tent-ils du bac √† sable?  Je pense qu'ils craignent que le code de d√©compression ne soit potentiellement bogu√©, ou qu'il puisse y avoir des erreurs dans la gestion de la m√©moire, la gestion du tampon pendant la d√©compression, etc. <br><br><img src="https://habrastorage.org/webt/rg/0p/fj/rg0pfjhm0nsvzqfxtmemlhvwoq8.jpeg"><br><br>  Une autre question int√©ressante est pourquoi les changements pour <b>gzip</b> semblent beaucoup plus compliqu√©s que pour <b>tcpdump</b> ?  Je pense que cela est d√ª √† la fa√ßon dont l'application est structur√©e en interne, non?  Par cons√©quent, si vous avez une application qui a simplement compress√© un fichier ou d√©compress√© un fichier, il est normal de simplement la lancer sans la changer en mode fonctionnalit√©s.  Vous lui donnez simplement une nouvelle norme pour d√©compresser quelque chose, et la norme fournit des donn√©es d√©compress√©es √† la sortie, et cela fonctionnera bien. <br><br>  Le probl√®me, comme cela arrive presque toujours avec de telles m√©thodes sandbox, est que l'application a en fait une logique de processus beaucoup plus complexe.  Par exemple, <b>gzip</b> peut compresser plusieurs fichiers √† la fois, etc.  Et dans ce cas, vous avez une sorte de processus principal √† la t√™te de l'application, qui a en fait des droits suppl√©mentaires pour ouvrir plusieurs fichiers, les emballer, etc.  Et la logique de base doit souvent √™tre un autre processus de support.  Dans le cas de <b>gzip, l'</b> application n'√©tait pas structur√©e de sorte que la compression et la d√©compression agissaient comme des processus distincts.  Par cons√©quent, ils ont d√ª changer l'impl√©mentation du noyau <b>gzip</b> et une certaine structure de l'application elle-m√™me afin qu'en plus de simplement transf√©rer des donn√©es vers la fonction de d√©compression, elles soient envoy√©es via un appel <b>RPC</b> ou √©crites dans une sorte de descripteur de fichier.  Cela visait √† emp√™cher les probl√®mes de tiers de se produire et √† d√©baller sans pratiquement aucun privil√®ge.  La seule chose que <b>gzip</b> pouvait faire en m√™me temps √©tait de renvoyer les donn√©es d√©compress√©es ou compress√©es au processus qui les appelait. <br><br>  Une autre chose √† faire est de savoir comment utiliser <b>Capsicum</b> dans <b>OKWS</b> ?  Qu'en pensez-vous?  Serait-ce utile?  <b>Les</b> gars <b>OKWS seraient-ils</b> heureux de passer √† <b>FreeBSD</b> parce qu'il est tellement plus facile √† utiliser?  Comment utiliseriez-vous <b>Capsicum</b> sur <b>FreeBSD</b> ? <br><br>  <b>Public: On</b> pourrait se d√©barrasser de certaines restrictions strictes. <br><br>  <b>Professeur:</b> oui, c'est vrai, on pourrait les remplacer compl√®tement par la pr√©sence d'un r√©pertoire de descripteurs de fichiers et de capacit√©s.  Vous n'auriez pas besoin de configurer un <b>chroot</b> d√©routant.  Au lieu d'utiliser <b>chroot</b> avec beaucoup de petites choses, vous pouvez simplement d√©finir soigneusement les autorisations.  Vous pouvez simplement ouvrir les fichiers dont vous avez besoin.  Cela semble donc √™tre un gros plus. <br><br>  Ensuite, dans <b>OKWS</b> , vous avez le service de lancement <b>OK</b> , qui devrait d√©marrer tous les processus parents.  D√®s qu'ils meurent, le signal revient √† <b>okld</b> pour red√©marrer le processus "mort".  Et cette chose devrait √™tre ex√©cut√©e en <b>root</b> , car elle devait isoler les processus dans le bac √† sable.  Mais il y a un certain nombre de choses dans <b>OKWS</b> qui pourraient √™tre am√©lior√©es avec <b>Capsicum</b> . <br><br>  Par exemple, vous pouvez accorder √† <b>okld</b> beaucoup moins de privil√®ges.  Parce que, par exemple, pour obtenir le port 80, vous avez besoin des privil√®ges root.  Mais apr√®s cela, vous pouvez mettre tout le reste en toute s√©curit√© dans le bac √† sable, car les droits root ne sont plus n√©cessaires.  C'est donc plut√¥t cool.  Vous pouvez peut-√™tre m√™me d√©l√©guer au processus le droit de r√©pondre aux demandes de quelqu'un d'autre, par exemple, un processus de surveillance du syst√®me qui n'a que ce descripteur de processus ou descripteur de processus pour le processus enfant et chaque fois qu'un tel processus se bloque, il en d√©marre un nouveau.  Par cons√©quent, je pense que la possibilit√© de cr√©er un sandbox sans privil√®ges root est tr√®s utile. <br><br>  <b>Public:</b> vous pouvez attribuer √† chaque processus un descripteur de fichier qui vous permet d'ajouter uniquement des entr√©es au journal. <br><br>  <b>Professeur:</b> oui, et c'est plut√¥t cool.  Comme nous l'avons dit la derni√®re fois, <b>oklogd</b> peut "g√¢cher" le fichier journal.  Et qui sait ce que le noyau lui permettra de faire quand il aura le descripteur de fichier du fichier journal lui-m√™me.  Cependant, nous pouvons d√©terminer plus pr√©cis√©ment les capacit√©s du descripteur de fichier en lui donnant un fichier journal et en indiquant qu'il ne peut qu'√©crire mais pas rechercher quoi que ce soit.  Ainsi, nous obtenons la fonction d'ajout uniquement si vous n'√™tes qu'un ¬´√©crivain¬ª pour ce fichier.  C'est tr√®s pratique.  Vous pouvez donner au processus les autorisations pour √©crire dans le fichier, mais pas le lire, ce qui est tr√®s difficile √† faire uniquement en utilisant <b>les</b> autorisations <b>Unix</b> . <br><br>         <b>Capsicum</b> ? <br><br> <b>:</b>  , ,   ,        .     ,       ,  ,       . <br><br> : ,  .   <b>Capsicum</b> ,   ,      .           . <br><br> <b>:</b> ,     ,  okld      .      ,    . <br><br> <b>:</b>  ,      .   .     ,    ,   <b>Capability</b>      ,       .   ,     ,   ,   , ,        . <br>   ,         <b>OKWS</b> .               . , ,        ,    .    . <br><br> ,      ,   ¬´¬ª.     ,       .  ,  ,         ,    ,       .        . <br> :    ¬´¬ª   ,      ,   ? <br><br> : ,   <b>FreeBSD</b>   .   ,     -   ,     .  <b>FreeBSD</b>     <b>Casper</b> ,    ,   <b>Capability</b> .            ,   ¬´¬ª. <br><br>      - ,    ,  ,  - ,        ,  <b>Casper</b>    . <br><br><img src="https://habrastorage.org/webt/pj/hd/aw/pjhdaw8gumxqioaoawbwert89ks.jpeg"><br><br>      ,    ¬´¬ª     .   . ,     ,     ,   <b>Casper</b>     - . <br><br>   ,         ,       -  .    ,   <b>Unix</b>         <b>FD</b> .      ,      .  ,        ,    . <br><br>  ,       <b>FreeBSD</b> ,      <b>DNS</b> .       <b>DNS</b> -,   ¬´¬ª.    ,    <b>tcpdump</b> .    tcpdump   ,        IP-.   ,   ,     <b>DNS</b> -. <br><br>  , ,     DNS-      DNS-,    .    <b>Casper</b> ,      DNS-. <br><br>  ,     ,   ,     Capsicum?    ?       ?       ,   ,    .         <b>Capsicum</b> ,    ? <br><br>     tcpdump  <b>GZIP</b> ,  ,   .            ? <br><br><img src="https://habrastorage.org/webt/yn/u5/ov/ynu5ovmtuqxeqgmma5p7hnhhwrg.jpeg"><br><br> <b>:</b> ,    ,   ,  . ,      <b>Capability</b> . <br><br> <b>:</b> ,  .      <b>Capsicum</b>  ,    ,    .  ,    ,        .  ,   ,   ,    ,    <b>Capsicum</b> ,   . <br><br>     ,          ¬´¬ª. ,  <b>TCP ‚Äî helper</b> , ,  , ,    .    ,  ,  ,    . <br><br> <b>:</b>  ,             . <br><br> <b>:</b> , .        . ,          .    <b>lth_start</b> ,      .  ,   ,      ,     - . <br><br>  ,   ,  Capsicum        .    ,       ,   ,             .    Unix    -    ,      . <br><br>          ,     . ,               .  ,          ,    .   ,    . <br><br> ,   Chrome      .  ,     ,       ,        Unix,  -,     <b>Unix</b> . <br><br> ,      ? <br><br> <b>:</b>            . <br><br> <b>:</b> .       .    ,    .      ,       , ,                 ,     . <br><br>     <b>Unix</b>     ,      .  ,        .    ,              .        .      ,     . <br><br>     .  <b>Linux</b>  ,  <b>setcall</b> ,     ,    .  ,    <b>Capsicum</b> ,        ,  <b>Capsicum</b>     ,     .   <b>Linux</b>  <b>setcall</b>     ,   .    ,   ,      <b>Linux</b> . <br><br> ,    ‚Äî    , ,      ,     ,        .   ,      -  ,     ¬´//¬ª,       .        <b>Capsicum</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o√π vous pouvez d√©marrer le processus pour un fichier sp√©cifique, et non pour l'ensemble du r√©pertoire personnel. </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La version compl√®te du cours est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des mat√©riaux plus int√©ressants?  Soutenez-nous en passant une commande ou en le recommandant √† vos amis, une <b>r√©duction de 30% pour les utilisateurs Habr sur un analogue unique de serveurs d'entr√©e de gamme que nous avons invent√©s pour vous:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toute la v√©rit√© sur VPS (KVM) E5-2650 v4 (6 c≈ìurs) 10 Go DDR4 240 Go SSD 1 Gbps √† partir de 20 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'√† 24 c≈ìurs et jusqu'√† 40 Go de DDR4). <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 mois gratuits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors du paiement d'un nouveau Dell R630 pour une p√©riode de six mois - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel Deca-Core Xeon E5-2630 v4 / 128GB DDR4 / 4x1TB HDD ou 2x240GB SSD / 1Gbps 10 TB - √† partir de 99,33 $ par mois</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uniquement jusqu'√† fin ao√ªt, commandez peut √™tre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV √† partir de 249 $</a> aux Pays-Bas et aux √âtats-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©ation d'un b√¢timent d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418221/">https://habr.com/ru/post/fr418221/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418211/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 4: ¬´Partager les privil√®ges¬ª, partie 3</a></li>
<li><a href="../fr418213/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 5: ¬´D'o√π viennent les syst√®mes de s√©curit√©¬ª, partie 1</a></li>
<li><a href="../fr418215/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 5: ¬´D'o√π viennent les erreurs du syst√®me de s√©curit√©¬ª, partie 2</a></li>
<li><a href="../fr418217/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 6: ¬´Opportunit√©s¬ª, partie 1</a></li>
<li><a href="../fr418219/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 6: Opportunit√©s, partie 2</a></li>
<li><a href="../fr418223/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 7: Le Sandbox Native Client, Partie 1</a></li>
<li><a href="../fr418225/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 7: Native Client Sandbox Part 2</a></li>
<li><a href="../fr418227/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 7: Le Sandbox Native Client, Partie 3</a></li>
<li><a href="../fr418229/index.html">Cours MIT "S√©curit√© des syst√®mes informatiques". Conf√©rence 8: Mod√®le de s√©curit√© r√©seau, partie 1</a></li>
<li><a href="../fr418233/index.html">Les mn√©moniques BMW pour trouver les valeurs limites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>