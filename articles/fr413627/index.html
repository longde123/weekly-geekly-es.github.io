<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöΩ ‚ùé üë©üèæ‚Äçü§ù‚Äçüë©üèº G√©n√©ration de cl√©s hi√©rarchiques üâê üë©üèΩ‚Äçü§ù‚Äçüë®üèæ üö¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous parlerons des portefeuilles d√©terministes, de la g√©n√©ration de cl√©s hi√©rarchiques et de la fa√ßon dont cela fonctionne math√©mati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©ration de cl√©s hi√©rarchiques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/413627/">  Dans cet article, nous parlerons des portefeuilles d√©terministes, de la g√©n√©ration de cl√©s hi√©rarchiques et de la fa√ßon dont cela fonctionne math√©matiquement et dans quels cas il est pratique de les mettre en pratique.  Ce mat√©riel sera utile aux sp√©cialistes dont les activit√©s sont li√©es aux passerelles de paiement, aux portefeuilles Bitcoin et √† d'autres magasins de pi√®ces.  En outre, le mat√©riel sera int√©ressant pour ceux qui sont int√©ress√©s par les sch√©mas de d√©ploiement de cl√©s de cryptographie elliptique et de signature √©lectronique. <br><a name="habracut"></a><br><h2>  <b>Portefeuille d√©terministe</b> </h2><br>  Tout d'abord, d√©finissons ce qu'est un portefeuille d√©terministe.  Lorsque nous parlons de g√©n√©ration de cl√©s, nous utilisons souvent le mot ¬´portefeuille¬ª, car dans le contexte des crypto-monnaies, la possession d'une cl√© priv√©e est la preuve de la propri√©t√© des pi√®ces, et dans ce cas, le portefeuille et la cl√© ont une signification similaire. <br><br>  Le portefeuille d√©terministe est un portefeuille dans lequel toutes les cl√©s priv√©es utilis√©es ont √©t√© g√©n√©r√©es √† partir d'un secret partag√© par toutes les cl√©s.  La particularit√© est qu'il est possible √† partir d'un secret de g√©n√©rer un nombre quelconque de paires de cl√©s pour la signature √©lectronique.  Vous pouvez utiliser de nouvelles adresses pour chaque paiement et modification entrants. <br><br>  De mani√®re pratique, les cl√©s d'un tel portefeuille peuvent √™tre facilement transf√©r√©es vers un autre appareil, faites une copie de sauvegarde puis restaur√©es, car en fait, vous n'avez besoin de r√©server qu'un seul secret principal.  De plus, toutes les cl√©s priv√©es g√©n√©r√©es √† partir du secret principal ne sont pas connect√©es les unes aux autres.  Il est impossible de tracer la connexion entre les adresses g√©n√©r√©es (pour d√©terminer qu'elles appartiennent toutes √† un utilisateur) et, ayant la cl√© priv√©e g√©n√©r√©e, vous ne pouvez pas restaurer le secret partag√©. <br><br><h3>  Encodage secret de base </h3><br>  Parlons maintenant de l'encodage du secret principal.  Il existe une approche standardis√©e d√©finie dans le BIP39.  Il s'agit de l'encodage Check Encoding du secret principal en une phrase mn√©monique - un ensemble de mots faciles √† √©crire sur papier et, si n√©cessaire, √† retenir.  Lors de la saisie, il est possible de v√©rifier la somme de contr√¥le, c'est-√†-dire d'identifier une erreur, le cas √©ch√©ant, avec une probabilit√© assez √©lev√©e. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00e/c02/e0f/00ec02e0fe0b361673229ecc9fa59e14.png" alt="image"><br><br>  Comment √ßa marche?  En fait, vous avez le secret principal (Entropie) - les donn√©es √† partir desquelles toutes les cl√©s personnelles du portefeuille sont d√©velopp√©es.  Ce secret peut avoir diff√©rentes longueurs.  En ce qui concerne la somme de contr√¥le: pour chaque 32 bits d'entropie, il y a 1 bit de la somme de contr√¥le, c'est-√†-dire que la somme de contr√¥le est calcul√©e par la formule comme la longueur de l'entropie en bits divis√©e par 32. <br><br>  L'entropie concat√®ne avec une somme de contr√¥le, qui est calcul√©e comme un double hachage SHA-256 (SHA-2 sur une longueur de 256 bits), apr√®s quoi le nombre requis de bits est coup√©.  Les donn√©es concat√©n√©es sont transf√©r√©es vers un autre syst√®me num√©rique: du binaire au syst√®me num√©rique sur la base de 2048 (comme vous pouvez le voir, 2048 est <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2 ^ {11} </script>  )  Et si vous ajoutez la longueur des bits d'entropie et la somme de contr√¥le, vous obtenez un multiple de 11.  Ainsi, nous obtenons le nombre de mots dans la phrase mn√©monique de sortie. <br><br>  En fait, les donn√©es sont ¬´d√©coup√©es¬ª en parties de 11 bits.  Il existe un dictionnaire de 2048 mots ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-2"> 2 ^ {11} </script>  ) auxquels s'appliquent certaines exigences.  La langue par d√©faut du dictionnaire est l'anglais, mais n'importe qui peut √™tre utilis√©.  Les mots ne doivent pas d√©passer une certaine longueur (g√©n√©ralement une limite de 7 caract√®res maximum).  Tous doivent √™tre encod√©s en UTF-8 avec une certaine normalisation de tous les caract√®res.  Obligatoire est l'unicit√© de chaque mot dans les quatre premiers caract√®res. <br><br>  Les quatre premiers caract√®res identifient de mani√®re unique le mot dans le dictionnaire, et les caract√®res restants sont utilis√©s pour compl√©ter ce mot sous une forme pratique pour la lecture, la m√©morisation, etc. Ainsi, chaque donn√©e compos√©e de 11 bits re√ßoit une correspondance non ambigu√´ sous la forme d'un mot de dictionnaire.  Si l'entropie de votre secret est de 256 bits, alors les donn√©es pour l'encodage seront de 264 bits, et votre phrase mn√©monique contiendra 24 mots.  Il s'agit de l'approche principale pour chiffrer les secrets de portefeuille dans BIP39, qui est le plus souvent utilis√©e dans la pratique. <br><br>  Afin de faire une copie de sauvegarde √† l'avenir et de l'utiliser, vous √™tes invit√© √† √©crire cette phrase sur un support externe.  Le papier que vous stockerez dans un endroit s√ªr est le meilleur.  Ainsi, vous pouvez restaurer un acc√®s complet √† toutes vos cl√©s. <br><br><h3>  Types de portefeuilles d√©terministes </h3><br>  Les portefeuilles d√©terministes sont de deux types.  Consid√©rez leurs principales diff√©rences. <br><br>  Le premier est le plus simple.  Le secret principal ici est concat√©n√© avec l'index de la cl√© enfant que nous voulons obtenir, apr√®s quoi les donn√©es concat√©n√©es sont hach√©es.  Le plus souvent, cela se produit en utilisant la fonction de hachage SHA-256. <br><br>  Le deuxi√®me type comprend les portefeuilles d√©terministes hi√©rarchiques, les portefeuilles HD, dont les principes sont d√©finis dans BIP32, et constituent une approche tr√®s courante de la g√©n√©ration de cl√©s hi√©rarchiques. <br><br><h3>  G√©n√©ration d√©terministe </h3><br>  Consid√©rez les diff√©rences entre ces types de portefeuilles dans le diagramme. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/271/a5a/477/271a5a47790684700751178bcee9d340.png" alt="image"><br><br>  Un portefeuille d√©terministe ordinaire a des graines, √† partir desquelles un grand nombre de cl√©s priv√©es sont directement g√©n√©r√©es.  Leur nombre ne peut √™tre limit√© que par la dimension de l'index, qui concat√®ne au secret avant hachage.  Habituellement, il est de 4 octets, c'est-√†-dire que l'espace des options possibles permet environ 4 milliards de cl√©s de portefeuille d√©terministes uniques.  En pratique, cela devrait √™tre suffisant pour toute situation. <br><br><h3>  G√©n√©ration d√©terministe hi√©rarchique </h3><br>  Passons maintenant √† un portefeuille d√©terministe hi√©rarchique, dont le sch√©ma de d√©ploiement cl√© est pr√©sent√© jusqu'√† pr√©sent sous une forme simplifi√©e.  Il existe une graine √† partir de laquelle une paire de cl√©s principales est directement obtenue.  Si dans un portefeuille d√©terministe ordinaire, nous obtenons une cl√© priv√©e, alors nous obtenons ici une paire de cl√©s.  De plus, il existe des niveaux de hi√©rarchie, √† chacun desquels nous calculons l'index pour g√©n√©rer la cl√© enfant.  Nous pouvons √©galement cr√©er des branches de cl√© publique et des branches de cl√© priv√©e. <br><br><h3>  Niveaux de hi√©rarchie </h3><br>  En ce qui concerne les portefeuilles HD, il convient de noter que selon les r√®gles BIP32 √† chaque niveau de la hi√©rarchie, un n≈ìud de g√©n√©ration a trois objets: une cl√© priv√©e, une cl√© publique et un code de cha√Æne utilis√© pour g√©n√©rer le niveau de hi√©rarchie suivant. <br><br><h3>  Sch√©ma de g√©n√©ration hi√©rarchique </h3><br>  Examinons plus en d√©tail le sch√©ma de g√©n√©ration de cl√©s pour BIP32. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/685/e79/e3e/685e79e3eae45b867f3033aad03f1743.png" alt="image"><br><br>  Tout commence par la graine, elle est √©galement appel√©e graine principale, √† partir de laquelle le niveau z√©ro de la hi√©rarchie est calcul√© - une paire de cl√©s principales et un code de cha√Æne. <br><br>  Un grand nombre de paires de cl√©s avec des indices sp√©cifiques peuvent √™tre g√©n√©r√©es √† partir d'une paire de cl√©s principales.  Un nouveau niveau de hi√©rarchie est en cours de formation, qui est utilis√© pour g√©n√©rer des comptes.  Supposons qu'un utilisateur ait une graine et souhaite cr√©er plusieurs adresses qui seront diff√©rentes les unes des autres.  Les pi√®ces de ces adresses ne seront pas m√©lang√©es, ne seront pas publi√©es ensemble et dans les transactions termin√©es entre elles, il ne sera pas possible de trouver une connexion.  Ces cl√©s seront utilis√©es compl√®tement s√©par√©ment les unes des autres.  Dans l'un des comptes, le groupe cl√© sera utilis√© pour le budget de travail, dans l'autre pour le budget personnel et un autre compte pour la comptabilit√© noire.  Les pi√®ces ne se m√©langeront pas entre elles. <br><br>  Le niveau de hi√©rarchie suivant d√©finit diff√©rentes cha√Ænes de g√©n√©ration de cl√©s.  Le plus souvent, des cha√Ænes avec les indices 0 et 1. Une cha√Æne avec l'index 0 g√©n√©rera les cl√©s finales pour former une adresse pour les paiements entrants, et une cha√Æne avec l'index 1 g√©n√©rera des portefeuilles pour les pi√®ces envoy√©es par l'utilisateur √† lui-m√™me, c'est-√†-dire le changement.  Cela est n√©cessaire pour que le portefeuille au niveau du programme distingue les paiements envoy√©s de l'ext√©rieur du changement, calcule les changements dans le solde de chaque transaction et compile une liste visuelle avec l'historique de tous les paiements.  Cela simplifie le d√©veloppement du portefeuille et son utilisation pour les paiements quotidiens. <br><br><h3>  Code d'authentification de message bas√© sur le hachage </h3><br>  Passons maintenant √† la composante math√©matique des processus de g√©n√©ration de cl√©s hi√©rarchiques.  Pour commencer, consid√©rez le code d'authentification de message bas√© sur le hachage.  Il s'agit d'une classe diff√©rente pour le calcul des fonctions de hachage.  Il diff√®re en ce qu'il prend deux valeurs √† l'entr√©e, et non une.  La premi√®re valeur est la cl√© priv√©e et la seconde est le message lui-m√™me. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mi>M</mi><mi>A</mi><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>K</mi><mo>,</mo><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><msup><mi>K</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mi>K</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.281ex" height="3.021ex" viewBox="0 -987.6 19065.2 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-4D" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-41" x="1940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-43" x="2690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-28" x="3451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-4B" x="3840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-2C" x="4730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6D" x="5175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-29" x="6053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-3D" x="6720" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-48" x="7777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-28" x="8665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-28" x="9055" y="0"></use><g transform="translate(9444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-4B" x="0" y="0"></use><g transform="translate(901,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-70" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-61" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-64" x="1518" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-29" x="11890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-7C" x="12279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-7C" x="12558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-48" x="12836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-28" x="13725" y="0"></use><g transform="translate(14114,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-4B" x="0" y="0"></use><g transform="translate(901,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-70" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-61" x="849" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-64" x="1378" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-29" x="16461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-7C" x="16850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-7C" x="17129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6D" x="17407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-29" x="18286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-29" x="18675" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mi>M</mi><mi>A</mi><mi>C</mi><mo stretchy="false">(</mo><mi>K</mi><mo>,</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msup><mi>K</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>H</mi><mo stretchy="false">(</mo><msup><mi>K</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> HMAC (K, m) = H ((K ^ {opad}) || H (K ^ {ipad}) || m)) </script></p><br><br>  K est la cl√© <br>  m - message <br>  opad, ipad - certaines valeurs constantes n√©cessaires pour g√©n√©rer des cl√©s diff√©rentes les unes des autres √† diff√©rents stades de hachage. <br>  En tant que fonction de hachage, SHA-512 est utilis√©. <br><br>  La particularit√© est que pour utiliser HMAC, vous devez poss√©der une cl√© secr√®te afin d'obtenir la valeur de hachage correcte du message. <br><br>  Ainsi, pour calculer la valeur de hachage HMAC, la valeur de la cl√© XOR est avec la valeur constante ipad, apr√®s quoi le r√©sultat est hach√©.  Un message est concat√©n√© √† cette valeur, apr√®s quoi la cl√© XOR est calcul√©e avec une valeur constante, concat√©n√©e avec une valeur de hachage, puis hach√©e √† nouveau.  En cons√©quence, nous obtenons 512 bits de la valeur de hachage. <br><br><h3>  Fonctions de d√©rivation </h3><br>  Examinons quelques fonctions utilis√©es dans le calcul des cl√©s hi√©rarchiques. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96e/f47/b41/96ef47b4141a2060395a9933dd56c52f.png" alt="image"><br><br>  Tout d'abord, nous souhaitons convertir la graine ma√Ætre en une paire de cl√©s ma√Ætresse.  Apr√®s cela, vous devez obtenir la cl√© priv√©e enfant et la cl√© publique enfant de la cl√© parent personnelle.  Dans le deuxi√®me cas, la m√™me fonction exacte est utilis√©e que dans le premier, mais la multiplication du nombre par le point de base est ajout√©e, elle ne sera donc pas consid√©r√©e s√©par√©ment.  L'√©tape suivante consiste √† obtenir le public enfant √† partir de la cl√© parent publique.  Il convient de noter qu'il n'est pas possible d'obtenir un enfant personnel √† partir de la cl√© publique parent.  Cette limitation est due √† certaines propri√©t√©s inh√©rentes aux portefeuilles HD, que nous examinerons plus loin. <br><br>  Passons donc en revue chacune des fonctions de g√©n√©ration s√©par√©ment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/736/372/31c/73637231c62a14b4bf5f8e7a5d498d01.png" alt="image"><br><br>  Pour obtenir la cl√© principale du sid ma√Ætre, la fonction HMAC est utilis√©e, o√π la cha√Æne constante "Bitcoin seed" est transmise comme cl√© et les donn√©es secr√®tes principales elles-m√™mes comme message.  Ainsi, une valeur de hachage de 512 bits est obtenue, que nous consid√©rons comme deux parties: gauche et droite.  Le c√¥t√© gauche est la cl√© priv√©e principale et le c√¥t√© droit sera le code de cha√Æne.  De plus, ces valeurs seront utilis√©es pour g√©n√©rer des niveaux ult√©rieurs de cl√©s enfants. <br><br>  Pour obtenir le ma√Ætre public, multipliez simplement la valeur du point de base par la valeur de la cl√© priv√©e principale.  Comme vous pouvez le voir, cela se produit par analogie avec des touches ordinaires dans un groupe de points sur une courbe elliptique. <br><br>  Voyons maintenant comment la cl√© priv√©e enfant provient du parent priv√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a6f/eeb/022/a6feeb0227ea2d2ba18ed42ce4d47d01.png" alt="image"><br><br>  Nous utiliserons √† nouveau la fonction HMAC.  En tant que cl√©, nous transmettons le code de cha√Æne du niveau de hi√©rarchie actuel, et en tant que message, la concat√©nation, o√π la premi√®re partie sera la cl√© parent personnelle multipli√©e par le point de base.  En fait, il s'agit d'une conversion en un point et d'une s√©rialisation de ce point.  La concat√©nation se produit avec l'index de la cl√© enfant que nous voulons recevoir, s√©rialis√© √† 32 bits, soit 4 octets. <br><br>  Sur la base du r√©sultat de la fonction HMAC, nous obtenons la valeur I, et encore une fois nous la consid√©rons s√©par√©ment: les parties gauche et droite des valeurs de sortie sont de 256 bits.  Ensuite, la cl√© priv√©e enfant <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.011ex" height="2.419ex" viewBox="0 -780.1 865.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-69" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> k_i </script>  nous calculons en ajoutant √† la valeur de sortie gauche <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>l</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.746ex" height="2.419ex" viewBox="0 -780.1 751.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6C" x="622" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>l</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> I_l </script>  valeurs de la cl√© priv√©e parent.  L'addition se fait modulo n, o√π n est l'ordre du point de base de la courbe elliptique, afin de ne pas d√©passer la valeur maximale de la cl√© priv√©e.  Ainsi, nous avons re√ßu une cl√© priv√©e enfant. <br><br>  En cons√©quence, le code de cha√Æne enfant sera √©gal √† la valeur de sortie droite de la fonction HMAC, c'est-√†-dire <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>R</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.503ex" height="2.419ex" viewBox="0 -780.1 1077.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-52" x="622" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>R</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> I_R </script>  .  Si nous voulons trouver la cl√© publique enfant √† partir de la cl√© parent personnelle, nous multiplions la valeur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.011ex" height="2.419ex" viewBox="0 -780.1 865.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-69" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> k_i </script>  par la valeur du point de base sur la courbe elliptique.  Nous obtenons donc la cl√© publique <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.773ex" height="2.419ex" viewBox="0 -780.1 1193.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMATHI-69" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-8"> K_i </script>  . <br><br>  Comment calculer la cl√© publique enfant √† partir de la cl√© parent publique? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/39a/bbe/e55/39abbee5560b44abbe7a271a88153198.png" alt="image"><br><br>  Ici, le calcul sera un peu diff√©rent.  Nous transmettons la hi√©rarchie de cha√Æne du niveau de hi√©rarchie actuel sous forme de cl√© dans la fonction HMAC, apr√®s quoi nous s√©rialisons la cl√© publique parent et la concat√©nons avec l'index souhait√© s√©rialis√© √† 32 bits.  Les donn√©es d'entr√©e sont obtenues exactement de la m√™me mani√®re que dans le cas pr√©c√©dent.  Pour calculer la cl√© publique, nous prenons le c√¥t√© gauche de la valeur de sortie de la fonction HMAC, et la consid√©rons comme 256 bits pris modulo l'ordre du point de base, l'amener √† un point sur la courbe elliptique, c'est-√†-dire, multiplier par le point de base, puis ajouter le r√©sultat avec la cl√© publique parent .  Le r√©sultat de l'ajout sera √©galement un point, et ce sera une cl√© enfant publique.  Le code de cha√Æne pour cette cl√© sera le c√¥t√© droit de la valeur de sortie de la fonction HMAC. <br><br><h3>  Associer les cl√©s les unes aux autres </h3><br>  Cela peut soulever une question logique quant √† la correspondance entre les cl√©s priv√©es et publiques obtenues de diff√©rentes mani√®res.  Est-il vraiment possible d'obtenir exactement la m√™me valeur √† partir d'une cl√© publique g√©n√©r√©e par une voie publique en prenant une cl√© priv√©e obtenue d'une autre mani√®re et en la multipliant par un point de base?  C'est facile √† v√©rifier. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e44/ac2/851/e44ac28516cc2774373bc76d94d0c244.png" alt="image"><br><br>  Si nous nous souvenons de la fa√ßon dont nous avons calcul√© la cl√© enfant personnelle et la multiplions par le point de base, c'est-√†-dire conduisons √† la fonction point, puis rappelons le calcul de la cl√© publique enfant et comparons ces calculs, nous verrons que si nous consid√©rons la cl√© publique parent comme un produit du parent personnel cl√© du point de base, alors nous verrons que les m√™mes calculs ont √©t√© effectu√©s, juste dans un ordre diff√©rent. <br><br>  Dans un cas, nous avons ajout√© les cl√©s priv√©es et multipli√© par le point de base, et dans le second cas, nous avons d'abord multipli√© les valeurs par le point de base, puis nous les avons ajout√©es et nous avons obtenu le r√©sultat.  Sur la base du fait que l'op√©ration d'ajout de points sur une courbe elliptique est additive, nous pouvons dire que ces deux valeurs sont √©gales - nous obtiendrons la m√™me cl√© publique calcul√©e de deux mani√®res. <br><br><h3>  Exemple de cl√© publique </h3><br>  Par souci d'int√©r√™t, nous pouvons regarder un exemple de cl√© publique qui a √©t√© obtenue pour les valeurs de test et les calculs BIP32.  Si notre entropie se composait de 128 bits, alors dans le syst√®me num√©rique hexad√©cimal, cela ressemblera √† l'image ci-dessous. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/64c/ca1/01a/64cca101a12268bda803fd8f447c719e.png" alt="image"><br><br>  La m√™me valeur encod√©e dans la phrase mn√©monique BIP39 ressemblera aux 12 mots affich√©s.  Si vous utilisez cette phrase mn√©monique comme graine principale pour la g√©n√©ration de cl√©s hi√©rarchiques, vous obtiendrez une telle cl√© priv√©e principale avec le code de cha√Æne 256 bits correspondant. <br><br><h3>  Touches √©tendues </h3><br>  Il existe √©galement des concepts tels que cl√© publique √©tendue et cl√© priv√©e √©tendue.  Comment est-il utilis√©?  Pour mieux comprendre, nous d√©crivons la situation visuelle. <br><br>  Disons que nous avons un utilisateur sp√©cifique et un service.  Un service transf√®re des paiements, par exemple en bitcoins, √† un utilisateur avec une certaine fr√©quence.  L'utilisateur et le service sont int√©ress√©s √† utiliser une nouvelle adresse pour chaque paiement, afin de rendre difficile pour un observateur externe d'√©tablir un fait et de confondre l'historique des interactions entre eux. <br><br>  Dans le cas le plus simple, cela ressemblerait √† ceci: l'utilisateur pour chaque paiement entrant g√©n√®re une nouvelle paire de cl√©s, calcule l'adresse qu'il transmet au service, apr√®s quoi le service peut g√©n√©rer une transaction et effectuer le paiement.  Cependant, cela n'est pas pratique pour l'une ou l'autre des parties si l'intensit√© de ces paiements est √©lev√©e. <br><br><h3>  Cl√© publique √©tendue </h3><br>  Dans une situation similaire, la cl√© publique √©tendue (xPubKey) permet de se d√©barrasser des inconv√©nients.  L'utilisateur peut activer un service tiers pour g√©n√©rer des adresses au lieu d'elles-m√™mes qui seront connues du service, mais seul l'utilisateur aura des cl√©s priv√©es.  Le service peut g√©n√©rer n'importe quel nombre d'adresses √† l'insu de l'utilisateur et leur envoyer des fonds, et l'utilisateur peut, √† sa convenance, d√©ployer des cl√©s priv√©es et acc√©der √† l'une de ces adresses. <br><br>  Comment √ßa marche?  L'utilisateur doit g√©n√©rer un nouveau compte au deuxi√®me niveau de la hi√©rarchie de cl√©s, calculer pour lui la cl√© publique et le code de cha√Æne pour le niveau actuel.  Apr√®s cela, vous devez transf√©rer √† la fois la cl√© publique et le code de cha√Æne au service.  Pour plus de commodit√©, l'encodage Base58Check a √©t√© introduit, dont nous avons parl√© (il existe une version sp√©ciale ici).  Ensuite, la cl√© publique, le code de cha√Æne et la somme de contr√¥le sont concat√©n√©s.  Tout cela est cod√© dans le syst√®me num√©rique de base 58 et nous obtenons une cl√© √©tendue publique d√©j√† cod√©e selon une certaine norme.  Il commence par les caract√®res ¬´xpub¬ª, qui sont facilement reconnaissables.  Il ressemblera √† l'image. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c61/aae/082/c61aae082f6a423d35712fcf63246f68.png" alt="image"><br><br>  Un service peut accepter une telle cl√© et d√©ployer des cl√©s publiques pour l'utilisateur via BIP32, en recevoir des adresses et les payer.  Cependant, seul l'utilisateur peut calculer les cl√©s priv√©es correspondantes. <br><br><h3>  D√©rivation renforc√©e </h3><br>  Dans la g√©n√©ration hi√©rarchique des cl√©s, il existe une d√©rivation renforc√©e.  Il s'agit d'une approche qui ne permet pas le calcul des cl√©s publiques enfants √† partir de la cl√© publique parent correspondante.  Cela diff√®re de la g√©n√©ration normale en ce que nous utilisons la concat√©nation du point s√©rialis√© comme cl√© publique parent comme message √† la fonction HMAC, et dans la d√©rivation renforc√©e, nous utilisons la s√©rialisation de la cl√© priv√©e parent. <br><br>  De plus, le calcul de l'indice est diff√©rent.  L'index en g√©n√©ration normale est directement s√©rialis√© en 32 bits, et en d√©rivation renforc√©e il est l√©g√®rement converti: une valeur constante lui est ajout√©e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>31</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>31</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-9"> 2 ^ {31} </script>  qui met le bit le plus significatif √† 1 (il devient facile de distinguer les types de d√©rivation).  En cons√©quence, l'espace des variantes de cl√©s possibles est le m√™me pour la g√©n√©ration normale et la d√©rivation renforc√©e, et est √©gal √† <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>31</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhiMkLxQxQkx8zJGHd1jVroNlKqm8g#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>31</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-10"> 2 ^ {31} </script>  . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cea/160/ab3/cea160ab30c57ea702407dd53893d25e.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainsi, ayant une cl√© publique parent et une d√©rivation renforc√©e, il n'est pas possible de calculer des cl√©s publiques enfant. </font><font style="vertical-align: inherit;">Si l'attaquant re√ßoit la cl√© publique parent, il ne pourra pas calculer les cl√©s enfants. </font><font style="vertical-align: inherit;">Par cons√©quent, il ne pourra pas calculer les adresses et leur relation avec la cl√© parent re√ßue. </font><font style="vertical-align: inherit;">Dans le cas d'une d√©rivation normale, c'est-√†-dire, comme d'habitude, une telle fonction peut √™tre utilis√©e et tracer la relation des adresses entre elles.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chemins de g√©n√©ration </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parlons de la fa√ßon dont les cl√©s peuvent √™tre g√©n√©r√©es. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7d/0bc/006/c7d0bc0061acf64d206c73d305de73c4.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä chaque niveau de la hi√©rarchie, il existe un index sp√©cifique qui d√©finit les aspects de la g√©n√©ration de cl√©s. Le chemin de la cl√© principale √† la cl√© finale peut √™tre √©crit par des barres obliques sous forme d'index. Si nous parlons d'une cl√© priv√©e, alors l'enregistrement commence par un petit ¬´m¬ª, et si nous parlons de g√©n√©rer une cl√© publique, alors avec un grand ¬´M¬ª. Si l'index est indiqu√© par une apostrophe, alors il faut comprendre que nous parlons de d√©rivation renforc√©e, sans apostrophe - d√©rivation normale. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consid√©rez l'un des chemins de g√©n√©ration de cl√©s populaires utilis√©s dans BIP32, o√π les cl√©s hi√©rarchiques ont √©t√© d√©finies.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ab/564/b7c/1ab564b7cbe935bfbe5aa2075c1fce31.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il utilise un chemin o√π la cl√© principale est le niveau z√©ro de la hi√©rarchie. Voici les index des comptes qui d√©signent le m√™me utilisateur, suivis des cha√Ænes o√π il peut y avoir des cha√Ænes d'adresses publi√©es √† l'ext√©rieur pour accepter les paiements entrants, et avec l'index 1, ces cha√Ænes seront cr√©√©es auxquelles l'utilisateur s'envoie des paiements (le plus souvent tout cela est de la reddition). L'index final sera utilis√© pour g√©n√©rer les cl√©s √† partir desquelles les adresses seront calcul√©es. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afin de calculer la toute premi√®re cl√© avec indice 0 selon la norme BIP32, nous aurons m, 0 avec la g√©n√©ration de cha√Æne durcie - 0, indice - 0 (m / 0 '/ 0/0). Nous obtenons donc le chemin de la premi√®re cl√© g√©n√©r√©e hi√©rarchiquement.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a une proposition pour am√©liorer Bitcoin, il s'appelle BIP43, ce qui implique d'√©crire au premier niveau de la hi√©rarchie le num√©ro d'am√©lioration, qui offre un nouveau chemin d'apparition (m / bip_number '/ *). </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/68c/652/61f/68c65261f576ac3e75c412c2de9b50b5.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainsi, le BIP44 est apparu, qui utilisait la caract√©ristique de la phrase pr√©c√©dente, c'est-√†-dire que l'index 44 est √©crit pour le premier niveau de hi√©rarchie, et a propos√© les am√©liorations suivantes: dans l'index du deuxi√®me niveau de hi√©rarchie, enregistrez une certaine valeur qui correspondra au type de pi√®ce que nous utilisons pour ce portefeuille. D√©sormais, les cl√©s de diff√©rentes devises peuvent √™tre d√©ploy√©es et utilis√©es dans un seul portefeuille.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/23b/739/3bd/23b7393bd44abf5568d476c03d0a8bf8.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour Bitcoin, le chemin ressemblera √† "m / 44 '/ 0' / 0 '/ 0/0", pour Bitcoin testnet - "m / 44' / 1 '/ 0' / 0/0", pour Litecoin - "m / 44 '/ 2' / 0 '/ 0/0 ‚Äù, pour Dash -‚Äú m / 44' / 5 '/ 0' / 0/0 ‚Äù. Fait int√©ressant, Ethereum utilise exactement la m√™me courbe elliptique pour calculer les cl√©s et signer num√©riquement et pour son portefeuille, le chemin ressemblera √† ¬´m / 44 '/ 60' / 0 '/ 0/0¬ª. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a une autre am√©lioration - BIP45. L'am√©lioration vise √† d√©terminer les r√®gles de g√©n√©ration de cl√©s en cas d'utilisation dans des portefeuilles multisignatures et de formation d'adresses √† l'aide de BIP16, c'est-√†-dire P2SH. Il comprend la phrase BIP43 et indique l'index 45 au premier niveau de la hi√©rarchie; au deuxi√®me niveau de la hi√©rarchie, il n√©cessite l'indication d'un signataire (cosignataire).</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bc/2c8/fd1/4bc2c8fd1c785ef5c9deb48417db9c53.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, il existe une r√®gle de multi-signature 3 sur 5. Par cons√©quent, il y a 5 signataires, mais pour d√©penser des pi√®ces, vous avez besoin d'au moins 3 signatures. Ainsi, chacun des signataires aura un portefeuille HD avec sa propre graine ma√Ætre, et indiquera son num√©ro de s√©rie sur son chemin. Il peut √™tre calcul√© comme un index lors du tri des cl√©s g√©n√©r√©es au premier niveau de la hi√©rarchie de chaque utilisateur. Supposons qu'au premier niveau, chaque utilisateur g√©n√®re des cl√©s, qu'il √©change les uns avec les autres, trie et d√©couvre qui a quel index pour le deuxi√®me niveau de la hi√©rarchie. Ceci est n√©cessaire afin d'√©liminer davantage la n√©cessit√© d'interagir de cette mani√®re et de g√©n√©rer imm√©diatement correctement des adresses et de conna√Ætre votre num√©ro de s√©rie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autrement dit, vous pouvez √©changer une fois la cl√© publique √©tendue afin de pouvoir ind√©pendamment, ind√©pendamment des autres membres du groupe, former des adresses multisignatures et accepter des paiements sur celles-ci.</font></font><br><br><h3>  Des questions </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passons aux questions fr√©quemment pos√©es. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Comment les graines de ma√Ætre diff√®rent-elles dans diff√©rentes pi√®ces?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Seed est un nombre g√©n√©r√© al√©atoirement, une s√©quence de bits, ou c'est une phrase mn√©monique g√©n√©r√©e, par exemple, selon BIP39, qui est utilis√©e pour g√©n√©rer des cl√©s. Il peut √™tre utilis√© √† la fois pour une pi√®ce et pour toute autre - il n'est pas n√©cessaire d'utiliser des phrases mn√©moniques diff√©rentes pour diff√©rentes devises. De plus, il y a le BIP44, qui d√©finit les r√®gles de g√©n√©ration de cl√©s pour diff√©rentes devises √† partir de la m√™me phrase mn√©monique. Ces cl√©s priv√©es ne se recouperont pas, mais seront utilis√©es pour diff√©rentes adresses de diff√©rentes devises. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dictionnaire du BIP39, o√π 2048 mots pour une phrase mn√©monique sont standardis√©s? Puis-je l'utiliser dans tous les portefeuilles et applications?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fait est que cette norme est d√©crite pour le BIP39. C'est pour BIP39 qu'il existe des dictionnaires: anglais, deux japonais, chinois, italien, russe, ukrainien, etc. C'est-√†-dire que si une application pr√©tend qu'elle utilise BIP39 et permet d'importer et d'exporter une phrase mn√©monique, cela signifie qu'elle utilise √©galement un ensemble de mots pareil. Cependant, il existe des portefeuilles qui n'utilisent pas le BIP39, mais leur propre modification. Vous devez regarder la description du portefeuille et utiliser soit standardis√©, soit votre propre d√©veloppement, soit le d√©veloppement du service offert par le portefeuille. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Sur les √©changes et les stockages centralis√©s comme Coinbase, les cl√©s de portefeuille pour tous les utilisateurs sont-elles g√©n√©r√©es √† partir de la m√™me phrase commune pour tous ou non?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est difficile √† dire car ils n'ouvrent pas leur structure interne, mais les nouveaux services qui apparaissent peuvent soit g√©n√©rer des cl√©s s√©par√©ment, soit utiliser la norme BIP32, soit utiliser sa version modifi√©e. Les services qui existaient avant les normes de g√©n√©ration de cl√©s hi√©rarchiques sont apparus, tr√®s probablement, continuent de g√©n√©rer uniquement des cl√©s priv√©es distinctes. C'est peut-√™tre ainsi qu'ils sont plus faciles √† g√©rer s'il y a un grand roulement de toutes les cl√©s. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"La cl√© est-elle un point sur la courbe elliptique, c'est-√†-dire deux tr√®s grands nombres X et Y?"</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La cl√© publique - oui, c'est un point sur la courbe elliptique, et la cl√© priv√©e est un nombre naturel qui montre combien de fois vous devez ajouter le point de base avec vous-m√™me. La cl√© publique elle-m√™me se compose de deux valeurs - ce sont les coordonn√©es X et Y, chacune ayant une taille de 256 bits. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Qu'est-ce que le ¬´cast to point¬ª et la s√©rialisation du point et de l'index?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La r√©duction √† un point signifie qu'il existe un nombre naturel, que nous consid√©rons comme une cl√© priv√©e. Nous ajoutons le point de base avec nous-m√™mes tant de fois, c'est-√†-dire que dans le groupe de points sur la courbe elliptique, seule l'op√©ration d'addition est d√©finie, puis nous pouvons multiplier le point par un nombre naturel. La s√©rialisation d'un point signifie enregistrer d'une certaine mani√®re deux coordonn√©es. Il peut s'agir d'un enregistrement compress√©, mais pas n√©cessaire. Comprim√© en ce sens que l'une des coordonn√©es, √† savoir Y est convertie en signe, les donn√©es sont alors substitu√©es dans l'√©quation et regardent o√π se trouve le point: au-dessus ou au-dessous. Dans le cas de la s√©rialisation d'index, vous devez comprendre qu'un nombre r√©gulier, qui, selon la taille, peut √™tre √©crit en octets ou en bits. Plus le nombre est √©lev√©, plus il faudra de donn√©es. Dans le cas des calculs que nous avons examin√©s,un certain nombre d'une certaine longueur est requis. Vous devez le s√©rialiser √† une longueur sp√©cifique - 4 octets. Par cons√©quent, cela fait r√©f√©rence √† la conversion de l'index en un nombre √† 4 octets. Si les valeurs seniors y restent vides, elles seront alors nulles.</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Qui a propos√© ces calculs pour les fonctions de d√©rivation des portefeuilles HD? Pourquoi de telles formules o√π il y a des justifications et o√π vous pouvez en savoir plus √† ce sujet?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vous pouvez en savoir plus sur BIP32, si vous √™tes int√©ress√© par une phrase mn√©monique, puis sur BIP39, etc. Vous pouvez ouvrir GitHub et trouver un utilisateur sous le surnom de Bitcoin. Il a un r√©f√©rentiel Bitcoin o√π le code source Bitcoin est stock√©, et il a un r√©f√©rentiel BIPs (source principale), o√π toutes les suggestions pour am√©liorer Bitcoin sont enregistr√©es.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ils ont eu l'id√©e de faire des calculs de cette fa√ßon, car ils sont li√©s √† un groupe de points d'une courbe elliptique. Lorsque vous vouliez obtenir une telle fonctionnalit√© qui vous permet de calculer s√©par√©ment les branches des cl√©s publiques et priv√©es, tout en conservant leur correspondance, c'√©tait l'option d'impl√©mentation la plus simple. En fait, les d√©veloppeurs ont utilis√© l'option la plus simple, ce qui vous permet d'obtenir des propri√©t√©s int√©ressantes en utilisant la cryptographie qui a √©t√© test√©e par le temps. Les auteurs des am√©liorations propos√©es sont nombreux. La communaut√© Bitcoin, dont les participants offrent une sorte de d√©veloppement d'am√©liorations et de transformations math√©matiques, est assez importante. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- La d√©rivation renforc√©e n'est toujours qu'au deuxi√®me niveau de la hi√©rarchie?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout d√©pend de la situation. Dans le cas de la g√©n√©ration de cl√©s pour la multi-signature, il est logique de faire une d√©rivation renforc√©e uniquement au premier niveau de la hi√©rarchie. Dans le BIP44, une d√©rivation renforc√©e est appliqu√©e aux trois premiers niveaux: au premier niveau est le num√©ro du BIP lui-m√™me, au deuxi√®me est le num√©ro de compte o√π il est pertinent, au troisi√®me est le num√©ro de devise, o√π il a √©galement un sens. Supposez que vous ne l'aimerez probablement pas si vous publiez la cl√© publique, et gr√¢ce √† elle, les gens peuvent suivre toutes vos adresses en Bitcoin. Si vous utilisez un compte pour recevoir des paiements de certains services, vous pouvez divulguer cette cl√© et vous n'avez pas besoin d'une d√©rivation renforc√©e ici. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- O√π est-il possible d'appliquer la g√©n√©ration de cl√© hi√©rarchique?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez l'appliquer lorsque vous travaillez avec l'√©change afin que l'√©change vous paie toujours √† diff√©rentes adresses. </font><font style="vertical-align: inherit;">Bien que dans ce cas, il vaut mieux organiser tout cela manuellement. </font><font style="vertical-align: inherit;">C'est le plus pertinent pour les portefeuilles num√©riques de tous les jours, car ici, il s'agit d'un processus tr√®s simple pour cr√©er une sauvegarde de cl√©s priv√©es et restaurer un portefeuille. </font><font style="vertical-align: inherit;">La g√©n√©ration de cl√©s pour diff√©rentes devises est √©galement prise en charge, et la norme elle-m√™me est d√©j√† utilis√©e dans diff√©rentes impl√©mentations de portefeuilles num√©riques. </font><font style="vertical-align: inherit;">Les cl√©s entre ces portefeuilles sont pratiques √† transf√©rer en utilisant la m√™me phrase mn√©monique. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce sujet est trait√© dans l'une des conf√©rences du cours en ligne sur la blockchain ¬´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G√©n√©ration de cl√©s hi√©rarchiques</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬ª.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413627/">https://habr.com/ru/post/fr413627/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413615/index.html">Le virus VPNFilter, qui a infect√© 500 000 routeurs, s'est av√©r√© encore plus dangereux qu'on ne le pensait</a></li>
<li><a href="../fr413617/index.html">Modification de 30% du mandat et d√©passement √† deux reprises du plan: comment VTB a automatis√© les rapports</a></li>
<li><a href="../fr413619/index.html">De nouvelles informations sur VPNFilter: mener une attaque sur les appareils des utilisateurs, √©largi la liste des √©quipements r√©seau</a></li>
<li><a href="../fr413621/index.html">Vivez-le. Meurs. Ressusciter. R√©p√©ter</a></li>
<li><a href="../fr413623/index.html">Comment faire parler Omega 2 ou la l√©gende d'I2S</a></li>
<li><a href="../fr413631/index.html">Cryptage de jeton de certificat sur un jeton sous Linux en utilisant l'exemple de JaCarta, Debian et le client de messagerie Evolution</a></li>
<li><a href="../fr413633/index.html">Comment je ma√Ætrise l'anglais</a></li>
<li><a href="../fr413635/index.html">Nous concevons une ferme d'√©levage. Et utiliser nanoCAD VK?</a></li>
<li><a href="../fr413637/index.html">Google a publi√© 7 principes d'√©thique de l'IA</a></li>
<li><a href="../fr413639/index.html">Smartphones prot√©g√©s: qui en a besoin et en quoi diff√®rent-ils les uns des autres?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>