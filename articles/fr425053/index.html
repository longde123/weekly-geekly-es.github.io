<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëäüèº üç¶ üö¥üèº SSR: quand, pourquoi et pour quoi. Sur l'exemple de Vue üò® ü§õüèª üç©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="( Illustration ) 

 Il √©tait une fois Il y a quelques ann√©es, alors que je commen√ßais √† peine √† travailler avec le Web en Java, nous travaillions avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SSR: quand, pourquoi et pour quoi. Sur l'exemple de Vue</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/umbrellaitcom/blog/425053/"><img src="https://habrastorage.org/webt/z6/-s/xn/z6-sxnzaykiuoi2zdllbnvkdjba.png"><br>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>Illustration</i></a> ) <br><br>  <s>Il √©tait une fois</s> Il y a quelques ann√©es, alors que je commen√ßais √† peine √† travailler avec le Web en Java, nous travaillions avec JSP.  La page enti√®re a √©t√© g√©n√©r√©e sur le serveur et envoy√©e au client.  Mais la question s'est alors pos√©e que la r√©ponse est venue trop longtemps ... <a name="habracut"></a><br><br>  Nous avons commenc√© √† utiliser une approche dans laquelle un mod√®le de page vide est donn√©, et toutes les donn√©es sont d√©j√† progressivement charg√©es par Ajax.  Tout le monde √©tait content, montraient les pages.  Nous n'avons pas r√©alis√© ce que nous avons fait pour nous-m√™mes, car la RSE affecte n√©gativement l'optimisation des moteurs de recherche et les performances sur les appareils mobiles.  Mais j'ai de nouveau entendu parler du support SSR avec les frameworks JS. <br><br>  <b>Et que se passe-t-il, l'histoire se r√©p√®te?</b> <br><br>  <b>Quels sont les principes de fonctionnement de la RSS?</b> <br><br>  1. Pr√©-rendu.  Dans le cas le plus simple, N fichiers HTML sont g√©n√©r√©s, qui sont plac√©s sur le serveur et retourn√©s tels quels - c'est-√†-dire que statique est retourn√©, nous ne g√©n√©rons rien pendant la requ√™te. <br><br><img src="https://habrastorage.org/webt/ok/vx/hw/okvxhww46qyk6xmdoxuvdktggaq.png"><br><br>  2. Comme dans le cas de JSP, le serveur g√©n√®re du HTML complet avec tout le contenu et le renvoie au client.  Mais, afin de ne pas g√©n√©rer de page pour chaque requ√™te (il peut y en avoir un million et notre serveur va se plier), ajoutons un cache proxy.  Par exemple, vernis. <br><br><img src="https://habrastorage.org/webt/li/51/fb/li51fbf6_zodiuwdmbkg_d2fykk.png"><br><br>  <b>Quand chacune de ces m√©thodes peut-elle s'appliquer:</b> <br><br>  1. Quand est-il judicieux de g√©n√©rer un tas de fichiers HTML?  √âvidemment, lorsque les donn√©es du site changent un peu moins que jamais.  Par exemple, le site Web de l'entreprise d'un stand de r√©paration de chaussures, qui est au coin de la rue (oui, l'oncle qui change de talon dans un d√©crochage de 2x2 m√®tres, voulait √©galement le site Web de l'entreprise - et, bien s√ªr, avec la page de mission de l'entreprise).  Pour un tel site, vous n'avez m√™me pas √† vous soucier des frameworks, SSR et autres sifflets, mais ceci est un exemple sph√©rique.  Et si nous avons un blog avec 1 000 articles?  Parfois, nous les mettons √† jour, parfois nous en ajoutons de nouveaux.  G√©n√©rez 1k + fichiers statiques ... Quelque chose ne va pas.  Et si nous changeons la publication, nous devons r√©g√©n√©rer un certain fichier.  Hmm ... <br><br>  2. Et ici, la deuxi√®me m√©thode nous convient.  O√π nous g√©n√©rons la premi√®re fois √† la vol√©e, puis mettons en cache la r√©ponse dans le service proxy.  Le temps de mise en cache peut √™tre d'une heure / deux / jour - peu importe.  Si nous avons 10 000 appels par heure et par poste (incroyable, non?), Alors seule la premi√®re demande parviendra au serveur.  Le reste recevra une copie en cache en r√©ponse, et notre serveur est plus susceptible de vivre.  En cas de mise √† jour d'une publication, il suffit de r√©initialiser l'enregistrement mis en cache afin que la page suivante g√©n√®re une page r√©elle. <br><br><h1>  Des mots √† l'action: </h1><br>  Bonjour repo mondial. <br><br>  0) g√©n√©rez bonjour le monde <br><br>  Pour un d√©marrage rapide, la communaut√© Nuxt a pr√©par√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des mod√®les de base</a> , vous pouvez installer l'un d'eux avec la commande: <br><br><pre><code class="javascript hljs">$ vue init &lt;template-name&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">project-name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Par d√©faut, un mod√®le d√©marr√© est propos√©, et nous le prendrons pour notre exemple.  Bien que dans une application r√©elle, nous avons choisi un mod√®le express.  Appelons le projet simple: <br><br><pre> <code class="javascript hljs">$ vue init nuxt-community/starter-template habr-nuxt-example $ cd habr-nuxt-example $ yarn #  npm install,    $ yarn dev</code> </pre><br>  <s>D'accord</s> , nous avons g√©n√©r√© bonjour le monde.  En parcourant l'url, vous pouvez voir la page g√©n√©r√©e: <br>  1) Webpack et peluches <br><br>  Nuxt pr√™t √† l'emploi a configur√© des webpacks avec prise en charge d'ES6 (babel-loader), des composants √† fichier unique Vue (vue-loader), ainsi que SCSS, JSX et plus encore. <br><br>  Si ces capacit√©s ne sont pas suffisantes, la configuration du webpack peut √™tre √©tendue.  Nous allons √† nuxt.config.js, et dans build.extend nous avons la possibilit√© de modifier la configuration. <br><br>  Par exemple, nous ajouterons une doublure de style par analogie avec le linting de code - un point important, √† notre avis, pour maintenir une base de code uniforme.  C'est une bonne habitude qui permettra d'√©viter de nombreux pi√®ges. <br><br>  Un exemple d'extension de configuration (connexion d'un fichier de configuration pour une femme de chambre bas√©e sur une variable d'environnement): <br><br><pre> <code class="javascript hljs">config.plugins.push( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StylelintPlugin({ <span class="hljs-attr"><span class="hljs-attr">files</span></span>: [ <span class="hljs-string"><span class="hljs-string">'**/*.vue'</span></span>, <span class="hljs-string"><span class="hljs-string">'assets/scss/**/*.scss'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">configFile</span></span>: <span class="hljs-string"><span class="hljs-string">'./.stylelintrc.dev.js'</span></span> }) )</code> </pre><br>  D'autres modifications peuvent √™tre consult√©es dans le r√©f√©rentiel par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tag</a> , ces modifications nous aideront √† garder les styles en ordre. <br><br>  Et un exemple de fichier de configuration linter: nous utilisons Standard JS, comme solution g√©n√©ralement accept√©e dans Vue / Nuxt: <br><br><pre> <code class="javascript hljs">... extends: [ - <span class="hljs-string"><span class="hljs-string">'plugin:vue/essential'</span></span> + <span class="hljs-string"><span class="hljs-string">'standard'</span></span>, + <span class="hljs-string"><span class="hljs-string">'plugin:vue/recommended'</span></span> ], ‚Ä¶</code> </pre><br>  2) Pour un exemple de travail avec des donn√©es, nous utiliserons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette API</a> : <br><br>  Connectez Axios en tant que plugin, cr√©ez un nouveau fichier dans le r√©pertoire des plugins: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> options = {} <span class="hljs-comment"><span class="hljs-comment">// The server-side needs a full url to works if (process.server) { options.baseURL = `http://${process.env.HOST || 'localhost'}:${process.env.PORT || 3000}` } export default axios.create(options)</span></span></code> </pre><br>  Et un exemple d'utilisation: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'~/plugins/axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> asyncData ({ params }) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { data } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios.get(<span class="hljs-string"><span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { data } } }</code> </pre><br>  Sinon en navet par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tiquette</a> . <br><br>  Num√©ros de t√©l√©chargement: <br><br>  1) SSR + vernis <br><br>  Premi√®re demande: <br><br><img src="https://habrastorage.org/webt/cj/ck/as/cjckas8xnf9qfvginu1tokegloq.png"><br><br>  Deuxi√®mement: <br><br><img src="https://habrastorage.org/webt/ig/2t/z-/ig2tz-0oko6jayjm7ydpzlc44iq.png"><br><br>  2) Sans SSR <br><br><img src="https://habrastorage.org/webt/gx/dg/nc/gxdgnc2qmpfeymwix1a3i2zfd6g.png"><br><br>  La deuxi√®me demande de fastley <br><br><img src="https://habrastorage.org/webt/hs/sg/im/hssgim7opatn6_sge1morb77r0w.png"><br><br>  Une page vierge est arriv√©e rapidement, mais il a fallu 2 secondes pour g√©n√©rer du contenu dessus. <br><br><h1>  Conclusion </h1><br>  Quel est le r√©sultat?  Nous avons compris comment obtenir une application SSR de d√©marrage √† configuration minimale.  Ils ont ajout√© Linting pour pr√©server le style de code d√®s le d√©but de la vie du projet et ont √©galement d√©crit l'architecture g√©n√©rale.  Vous pouvez √©crire votre googol. <br><img src="https://habrastorage.org/webt/ue/pd/fk/uepdfk1mc5_pjrtor4q7wypmqy8.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425053/">https://habr.com/ru/post/fr425053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425039/index.html">Semaine de la s√©curit√© 37: Facebook, Twitter et bogues gonflables</a></li>
<li><a href="../fr425041/index.html">Quel est le probl√®me avec GraphQL</a></li>
<li><a href="../fr425043/index.html">Introduction au d√©veloppement d'une solution Open Source typique</a></li>
<li><a href="../fr425047/index.html">Comment fonctionne le robo-conseil dans les investissements. Spoiler: simple</a></li>
<li><a href="../fr425051/index.html">Courte critique du PC portable Dell XPS 13 9370: l√©ger, beau et rapide</a></li>
<li><a href="../fr425055/index.html">Qu√™te Oculus</a></li>
<li><a href="../fr425057/index.html">Pr√™t pr√©f√©rentiel pour l'√©ducation pour tous les programmes GeekUniversity de GeekBrains et Alfa Bank</a></li>
<li><a href="../fr425059/index.html">Hackathon n ¬∞ 1 sur Tinkoff.ru</a></li>
<li><a href="../fr425061/index.html">CodeRainbow: apprentissage interactif du code et documentation</a></li>
<li><a href="../fr425063/index.html">Migration d'un sch√©ma de base de donn√©es sans interruption pour postgresql en utilisant django comme exemple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>