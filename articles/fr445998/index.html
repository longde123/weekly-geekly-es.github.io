<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèΩ üôéüèΩ üë®‚Äç‚úàÔ∏è Comment se faire des amis Progress OpenEdge et Oracle DBMS üë®‚Äçüî¨ üçè ü§üüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depuis 1999, notre banque utilise le syst√®me bancaire int√©gr√© BISKVIT sur la plate-forme Progress OpenEdge pour desservir le back-office, largement ut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment se faire des amis Progress OpenEdge et Oracle DBMS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/445998/">  Depuis 1999, notre banque utilise le syst√®me bancaire int√©gr√© BISKVIT sur la plate-forme Progress OpenEdge pour desservir le back-office, largement utilis√© dans le monde, y compris dans le secteur financier.  Les performances de ce SGBD vous permettent de lire jusqu'√† un million ou plus d'enregistrements par seconde dans une base de donn√©es (DB).  Notre Progress OpenEdge sert environ 1,5 million de d√©p√¥ts de particuliers et environ 22,2 millions de contrats pour des produits actifs (pr√™ts automobiles et hypoth√®ques), et est √©galement responsable de tous les r√®glements avec le r√©gulateur (CB) et SWIFT. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/307/c1d/98d/307c1d98db920948d240ad6101acc1e1.png"><br><br>  En utilisant Progress OpenEdge, nous sommes confront√©s au fait que nous devons nous lier d'amiti√© avec Oracle DBMS.  Au d√©part, cet ensemble constituait le ¬´goulot d'√©tranglement¬ª de notre infrastructure - jusqu'√† ce que nous installions et configurions Pro2 CDC - un produit Progress qui vous permet d'envoyer des donn√©es des SGBD Progress aux SGBD Oracle directement, en ligne.  Dans cet article, nous expliquerons en d√©tail, avec tous les pi√®ges, comment se lier efficacement avec OpenEdge et Oracle. <br><a name="habracut"></a><br>
<h2>  Comment c'√©tait: t√©l√©charger des donn√©es sur QCD via le partage de fichiers </h2><br>  Tout d'abord, quelques faits sur notre infrastructure.  Le nombre d'utilisateurs actifs de la base de donn√©es est d'environ 15 000.  Le volume de toutes les bases de donn√©es productives, y compris les r√©pliques et les unit√©s de secours, est de 600 To, la plus grande base de donn√©es est de 16,5 To.  Dans le m√™me temps, les bases de donn√©es sont constamment r√©approvisionn√©es: rien que l'ann√©e derni√®re, environ 120 To de donn√©es productives ont √©t√© ajout√©es.  Le syst√®me fournit 150 serveurs frontaux sur la plate-forme x86.  Les bases de donn√©es sont h√©berg√©es sur 21 serveurs de plateforme IBM. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a9/f39/b08/1a9f39b085135d52cace5abb4f3f6dce.png"><br>  Les syst√®mes frontaux, divers ABS et services bancaires sont int√©gr√©s √† OpenEdge Progress (IBS BISQUIT) via le bus Sonic ESB.  Les donn√©es sont t√©l√©charg√©es sur QCD par √©change de fichiers.  Une telle solution, jusqu'√† un certain point dans le temps, a imm√©diatement rencontr√© deux gros probl√®mes - les faibles performances de t√©l√©chargement des informations vers l'entrep√¥t de donn√©es de l'entreprise (QCD) et le temps n√©cessaire pour r√©concilier les donn√©es (r√©conciliation) avec d'autres syst√®mes. <br><img src="https://habrastorage.org/getpro/habr/post_images/5ed/b9b/7dc/5edb9b7dc0c77268d2a3d535f5593d80.png"><br>  Par cons√©quent, nous avons commenc√© √† chercher un outil qui pourrait acc√©l√©rer ces processus.  La solution √† ces deux probl√®mes √©tait pr√©cis√©ment le nouveau produit Progress OpenEdge - Pro2 CDC (Change Data Capture).  Commen√ßons donc. <br><br><h2>  Installez Progress OpenEdge et Pro2Oracle </h2><br>  Pour ex√©cuter Pro2 Oracle sur l'ordinateur Windows d'un administrateur, il vous suffit d'installer le Progress OpenEdge Developer Kit Classroom Edition, qui peut √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charg√©</a> gratuitement.  R√©pertoires d'installation par d√©faut d'OpenEdge: <br><br>  <i>DLC: C: \ Progress \ OpenEdge</i> <i><br></i>  <i>WRK: C: \ OpenEdge \ WRK</i> <br><br>  Les processus ETL n√©cessitent des licences Progress OpenEdge version 11.7+ - √† savoir OE DataServer pour Oracle et 4GL Development System.  Ces licences sont incluses avec Pro2.  Pour un fonctionnement complet de DataServer pour Oracle avec une base de donn√©es Oracle distante, Full Oracle Client est install√©. <br><br>  Sur le serveur Oracle, vous devez installer la version d'Oracle Database 12+, cr√©er une base de donn√©es vide et ajouter l'utilisateur (appelons-le <i>cdc</i> ). <br><br>  Pour installer Pro2Oracle, t√©l√©chargez le dernier package de distribution √† partir du centre de t√©l√©chargement de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Progress Software</a> .  D√©compressez l'archive dans le r√©pertoire <i>C: \ Pro2</i> (le m√™me kit de distribution est utilis√© pour configurer Pro2 sous Unix et les m√™mes principes de configuration sont appliqu√©s). <br><br><h2>  Cr√©ation d'une base de donn√©es de r√©plication cdc </h2><br>  La base de donn√©es de r√©plication <i>cdc (repl)</i> est utilis√©e par Pro2 pour stocker les informations de configuration, y compris la carte de r√©plication, les noms des bases de donn√©es r√©pliqu√©es et leurs tables.  Il contient √©galement une file d'attente de r√©plication compos√©e de notes sur le fait que la ligne de table dans la base de donn√©es source a chang√©.  Les donn√©es de la file d'attente de r√©plication sont utilis√©es par les processus ETL pour identifier les lignes qui doivent √™tre copi√©es dans Oracle √† partir de la base de donn√©es source. <br><br>  Cr√©ez une base de donn√©es cdc distincte. <br><br><div class="spoiler">  <b class="spoiler_title">Proc√©dure de cr√©ation d'une base de donn√©es</b> <div class="spoiler_text"><ol><li>  Sur le serveur de base de donn√©es, cr√©ez un r√©pertoire pour la base de donn√©es cdc - par exemple, sur <i>/ database / cdc /</i> server. <br></li><li>  Cr√©er un mannequin pour la base cdc: <i>procopy $ DLC / cdc vide</i> <br></li><li>  Activer le support des fichiers volumineux: <i>proutil cdc -C EnableLargeFiles</i> <br></li><li>  Nous pr√©parons le script pour d√©marrer la base de donn√©es cdc.  Les param√®tres de d√©marrage doivent √™tre similaires aux param√®tres de d√©marrage de la base de donn√©es r√©pliqu√©e. <br></li><li>  Nous d√©marrons la base de donn√©es cdc. <br></li><li>  Nous nous connectons √† la base de donn√©es cdc et chargeons le diagramme Pro2 √† partir du fichier <i>cdc.df</i> , qui est inclus avec le package Pro2. <br></li><li>  Dans la base de donn√©es cdc, cr√©ez les utilisateurs suivants: <br></li></ol><br>  <i>pro2adm - pour la connexion √† partir du panneau d'administration Pro2;</i> <i><br></i>  <i>pro2etl - pour connecter les processus ETL (ReplBatch);</i> <i><br></i>  <i>pro2cdc - pour connecter les processus CDC (CDCBatch);</i> <br></div></div><br><br><h2>  Activer OpenEdge Change Data Capture </h2><br>  Passons maintenant au m√©canisme CDC lui-m√™me, gr√¢ce auquel les donn√©es seront r√©pliqu√©es dans un domaine technologique suppl√©mentaire.  Dans chaque base de donn√©es source Progress OpenEdge, vous devez ajouter des zones de stockage distinctes dans lesquelles les donn√©es source seront dupliqu√©es et activer le m√©canisme lui-m√™me √† l'aide de la <i>commande proutil</i> . <br><br><div class="spoiler">  <b class="spoiler_title">Exemple de proc√©dure pour la base de donn√©es bisquit</b> <div class="spoiler_text"><ol><li>  Copiez le fichier <i>cdcadd.st du</i> r√©pertoire <i>C: \ Pro2 \ db</i> vers le <i>r√©pertoire</i> de la base de donn√©es source <i>bisquit</i> . <br></li><li>  Nous d√©crivons dans <i>cdcadd.st des</i> extensions √† extension fixe pour <i>les</i> <i>zones</i> <i>ReplCDCArea</i> et <i>ReplCDCArea_IDX</i> .  Vous pouvez ajouter de nouvelles zones de stockage en ligne: <i>prostrct addonline bisquit cdcadd.st</i> <br></li><li>  Activez OpenEdge CDC: <br>  <i>proutil bisquit -C zone enablecdc "ReplCDCArea" indexarea "ReplCDCArea_IDX"</i> <br></li><li>  Les utilisateurs suivants doivent √™tre cr√©√©s dans la base de donn√©es source pour identifier les processus en cours d'ex√©cution: <br>  <i>a.</i>  <i>pro2adm - pour la connexion √† partir du panneau d'administration Pro2.</i> <i><br></i>  <i>b.</i>  <i>pro2etl - pour connecter les processus ETL (ReplBatch).</i> <i><br></i>  <i>c.</i>  <i>pro2cdc - pour connecter les processus CDC (CDCBatch).</i> <br></li></ol><br></div></div><br><br><h2>  Cr√©ation d'un support de sch√©ma pour DataServer pour Oracle </h2><br>  Ensuite, nous devons cr√©er le support de sch√©ma de base de donn√©es sur le serveur o√π les donn√©es du SGBD de progression vers le SGBD Oracle seront r√©pliqu√©es.  DataServer Schema Holder est une base de donn√©es Progress OpenEdge vide sans utilisateurs ni donn√©es d'application, contenant une carte de correspondance entre les tables source et les tables Oracle externes. <br><br>  La base de donn√©es des titulaires de sch√©ma pour Progress OpenEdge DataServer pour Oracle pour Pro2 doit √™tre situ√©e sur le serveur de processus ETL; elle est cr√©√©e s√©par√©ment pour chaque branche. <br><br><div class="spoiler">  <b class="spoiler_title">Comment cr√©er un porte-sch√©ma</b> <div class="spoiler_text"><ol><li>  D√©compressez la distribution Pro2 dans le <i>r√©pertoire / pro2</i> <br></li><li>  Cr√©ez et acc√©dez au <i>r√©pertoire / pro2 / dbsh</i> <br></li><li>  Cr√©ez la base de donn√©es du <i>support de</i> sch√©ma √† l'aide de la commande <i>procopy $ DLC / empty bisquitsh</i> <br></li><li>  Nous convertissons <i>bisquitsh</i> en l'encodage n√©cessaire - par exemple, en UTF-8 si les bases de donn√©es Oracle sont encod√©es en UTF-8: <i>proutil bisquitsh -C convchar convert UTF-8</i> <br></li><li>  Apr√®s avoir cr√©√© une base de donn√©es <i>bisquitsh</i> vide, <i>nous nous y</i> connectons en mode mono-utilisateur: <i>pro bisquitsh</i> <br></li><li>  Acc√©dez au dictionnaire de donn√©es: <i>Outils -&gt; Dictionnaire de donn√©es -&gt; DataServer -&gt; Utilitaires ORACLE -&gt; Cr√©er un sch√©ma DataServer</i> <br></li><li>  Lancer le support de sch√©ma <br></li><li>  Configurer le courtier Oracle DataServer: <br>  <i>a.</i>  <i>D√©marrez AdminServer.</i> <i><br></i>  <i>proadsv -start</i> <i><br></i>  <i>b.</i>  <i>D√©marrage du courtier Oracle DataServer</i> <i><br></i>  <i>oraman -name orabroker1 -start</i> <br></li></ol><br></div></div><br><br><h2>  Configurer le panneau d'administration et le sch√©ma de r√©plication </h2><br>  Le panneau d'administration Pro2 configure les param√®tres Pro2, y compris la configuration du sch√©ma de r√©plication et la g√©n√©ration de programmes de processus ETL (Processor Library), de programmes de synchronisation principaux (Bulk-Copy Processor), de d√©clencheurs de r√©plication et de strat√©gies CDC OpenEdge.  Il existe √©galement des outils principaux pour surveiller et g√©rer les processus ETL et CDC.  Tout d'abord, nous configurons les fichiers de param√®tres. <br><br><div class="spoiler">  <b class="spoiler_title">Comment configurer les fichiers de param√®tres</b> <div class="spoiler_text"><ol><li>  Acc√©dez au r√©pertoire <i>C: \ Pro2 \ bprepl \ Scripts</i> <br></li><li>  Ouvrez le fichier <i>replProc.pf</i> pour le modifier <br></li><li>  Ajoutez les param√®tres de connexion √† la base de donn√©es de r√©plication cdc: <br>  <i># Base de donn√©es de r√©plication</i> <i><br></i>  <i>-db cdc -ld repl -H &lt;nom d'h√¥te de la base de donn√©es principale&gt; -S &lt;port du courtier de base de donn√©es cdc&gt;</i> <i><br></i>  <i>-U pro2admin -P &lt;mot de passe&gt;</i> <br></li><li>  Ajoutez les param√®tres de connexion aux bases de donn√©es source et au <i>support de</i> sch√©ma sous forme de fichiers de param√®tres √† <i>replProc.pf</i> .  Le nom du fichier de param√®tres doit correspondre au nom de la base de donn√©es source √† connecter. <br>  <i># Connectez-vous √† toutes les sources r√©pliqu√©es BISQUIT</i> <i><br></i>  <i>-pf bprepl \ scripts \ bisquit.pf</i> <br></li><li>  Ajoutez les param√®tres de connexion au support de sch√©ma dans replProc.pf. <br>  <i>#Target Pro DB Schema Holder</i> <i><br></i>  <i>-db bisquitsh -ld bisquitsh</i> <i><br></i>  <i>-H &lt;nom d'h√¥te des processus ETL&gt;</i> <i><br></i>  <i>-S &lt;port de courtage biskuitsh&gt;</i> <i><br></i>  <i>-db bisquitsql</i> <i><br></i>  <i>-ld bisquitsql</i> <i><br></i>  <i>-dt ORACLE</i> <i><br></i>  <i>-S 5162 -H &lt;nom d'h√¥te du courtier Oracle&gt;</i> <i><br></i>  <i>-DataService orabroker1</i> <br></li><li>  Enregistrez le <i>fichier de</i> param√®tres <i>replProc.pf</i> <br></li><li>  Ensuite, vous devez cr√©er et ouvrir pour modifier les fichiers de param√®tres de chaque base de donn√©es source connect√©e dans le <i>r√©pertoire C: \ Pro2 \ bprepl \ Scripts: bisquit.pf</i> .  Chaque fichier pf contient des param√®tres de connexion √† la base de donn√©es correspondante, par exemple: <br>  <i>-db bisquit -ld bisquit -H &lt;nom d'h√¥te&gt; -S &lt;port du courtier&gt;</i> <i><br></i>  <i>-U pro2admin -P &lt;mot de passe&gt;</i> <br></li></ol><br></div></div><br><br>  Pour configurer les raccourcis Windows, acc√©dez au <i>r√©pertoire C: \ Pro2 \ bprepl \ Scripts</i> et modifiez le raccourci ¬´Pro2 - Administration¬ª.  Pour ce faire, ouvrez les propri√©t√©s du raccourci et dans la ligne <i>D√©marrer dans</i> indiquez le r√©pertoire d'installation Pro2.  Une op√©ration similaire doit √™tre effectu√©e pour les √©tiquettes ¬´Pro2 - Editor¬ª et ¬´RunBulkLoader¬ª. <br><br><h2>  Configurer l'administration Pro2: t√©l√©charger la configuration principale </h2><br>  Nous lan√ßons la console. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b82/639/717/b82639717e154bdb889038e56ca41d90.png"><br><br>  Acc√©dez √† la ¬´DB Map¬ª. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ec/623/ae9/8ec623ae9f617ae630a42fa1d1b599c6.png"><br><br>  Pour lier les bases de donn√©es dans Pro2 - Administration, acc√©dez √† l'onglet <i>DB Map</i> .  Nous ajoutons la cartographie des bases de donn√©es sources - <i>Schema Holder - Oracle</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d23/db6/d6c/d23db6d6c53ea7e7d47aa2b6a71b2cde.png"><br><br>  Acc√©dez √† l'onglet <i>Mappage</i> .  Dans la liste <i>Base de donn√©es source</i> , la premi√®re base de donn√©es source connect√©e est s√©lectionn√©e par d√©faut.  √Ä la droite de la liste doit figurer <i>Toutes les bases de donn√©es connect√©es</i> - les bases de donn√©es s√©lectionn√©es sont connect√©es.  Une liste des tableaux de progression de bisquit devrait √™tre visible ci-dessous √† gauche.  √Ä droite, une liste des tables de la base de donn√©es Oracle. <br><br><h2>  Cr√©ation de sch√©mas SQL et de bases de donn√©es dans Oracle </h2><br>  Pour cr√©er une carte de r√©plication, vous devez d'abord g√©n√©rer le <i>sch√©ma SQL</i> dans Oracle.  Dans Administration Pro2, ex√©cutez l'√©l√©ment de menu <i>Outils -&gt; G√©n√©rer du code -&gt; Sch√©ma cible</i> , puis dans la bo√Æte de dialogue <i>S√©lectionner</i> une base de donn√©es, <i>s√©lectionnez</i> une ou plusieurs bases de donn√©es source et transf√©rez-les vers la droite. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a15/d6b/ca5/a15d6bca502084aea7c24faace6494f3.png"><br><br>  Cliquez sur OK et s√©lectionnez le r√©pertoire pour enregistrer les sch√©mas SQL. <br><br>  Ensuite, nous cr√©ons la base.  Cela peut √™tre fait, par exemple, via <i>Oracle SQL Developer</i> .  Pour ce faire, connectez-vous √† la base de donn√©es Oracle et chargez le sch√©ma pour ajouter des tables.  Apr√®s avoir modifi√© la composition des tables Oracle, vous devez mettre √† jour les sch√©mas SQL dans le porte-sch√©ma. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a21/86f/d8d/a2186fd8d269e13120ce1ff2c87467d3.png"><br><br>  Une fois le t√©l√©chargement termin√©, quittez la base de donn√©es bisquitsh et ouvrez le panneau d'administration Pro2.  Les tables de la base de donn√©es Oracle doivent appara√Ætre dans l'onglet Mappage √† droite. <br><br><h2>  Tables de cartographie </h2><br>  Pour cr√©er une carte de r√©plication dans le panneau d'administration Pro2, acc√©dez √† l'onglet Mappage, s√©lectionnez la base de donn√©es source.  Nous cliquons sur Map Tables, s√©lectionnons √† gauche les tables Select Changes qui doivent √™tre r√©pliqu√©es dans Oracle, les transf√©rons vers la droite et confirmons la s√©lection.  Une carte sera cr√©√©e automatiquement pour les tables s√©lectionn√©es.  R√©p√©tez l'op√©ration pour cr√©er une carte de r√©plication pour d'autres bases de donn√©es source. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/455/9f9/1fe/4559f91fe85a7e724bf015f13873cbc3.png"><br><br><h2>  G√©n√©ration de la biblioth√®que du processeur de r√©plication Pro2 et des programmes du processeur de copie en bloc </h2><br><br>  La biblioth√®que de processeurs est con√ßue pour les processus de r√©plication sp√©ciaux (ETL) qui traitent la file d'attente de r√©plication Pro2 et transmettent les modifications √† la base de donn√©es Oracle.  Apr√®s la g√©n√©ration, les programmes de la biblioth√®que du processeur de r√©plication sont automatiquement enregistr√©s dans le <i>r√©pertoire bprepl / repl_proc (param√®tre PROC_DIRECTORY)</i> .  Pour g√©n√©rer la biblioth√®que du processeur de r√©plication, acc√©dez √† <i>Outils -&gt; G√©n√©rer du code -&gt; Biblioth√®que du processeur.</i>  Une fois la g√©n√©ration termin√©e, les programmes appara√Ætront dans le <i>r√©pertoire bprepl / repl_proc</i> . <br><br>  Les programmes de traitement en bloc sont utilis√©s pour synchroniser les bases de donn√©es de progression source avec la base de donn√©es Oracle cible sur la base du langage de programmation Progress ABL (4GL).  Pour les g√©n√©rer, acc√©dez √† l'√©l√©ment de menu <i>Outils -&gt; G√©n√©rer du code -&gt; Processeur de copie en bloc</i> .  Dans la bo√Æte de dialogue S√©lectionner une base de donn√©es, s√©lectionnez la base de donn√©es source, transf√©rez-la sur le c√¥t√© droit de la fen√™tre et cliquez sur <i>OK</i> .  Une fois la g√©n√©ration termin√©e, les programmes appara√Ætront dans le <i>r√©pertoire bprepl \ repl_mproc</i> . <br><br><h2>  Configuration des processus de r√©plication dans Pro2 </h2><br>  La division des tables en ensembles desservis par un thread de r√©plication distinct peut am√©liorer les performances et l'efficacit√© d'Oracle Pro2.  Par d√©faut, toutes les connexions cr√©√©es dans la mappe de r√©plication pour les nouvelles tables de r√©plication sont li√©es au flux num√©ro 1. Il est recommand√© de diviser les tables en diff√©rents flux. <br><br>  Des informations sur l'√©tat des flux de r√©plication s'affichent sur l'√©cran Administration de Pro2 dans l'onglet Moniteur de la section √âtat de la r√©plication.  Une description d√©taill√©e des valeurs des param√®tres se trouve dans la documentation Pro2 (r√©pertoire C: \ Pro2 \ Docs). <br><br><h2>  Cr√©er et activer des politiques CDC </h2><br>  Les politiques sont un ensemble de r√®gles pour le m√©canisme OpenEdge CDC, selon lesquelles les modifications des tables sont suivies.  Au moment de la r√©daction, Pro2 ne prend en charge que les strat√©gies CDC de niveau 0, c'est-√†-dire que seul le fait d' <i>une modification d'enregistrement</i> est suivi. <br><br>  Pour cr√©er une strat√©gie CDC sur le panneau d'administration, acc√©dez √† l'onglet Mappage, s√©lectionnez la base de donn√©es source et cliquez sur le bouton Ajouter / Supprimer des strat√©gies.  Dans la fen√™tre S√©lectionner les modifications qui s'ouvre, s√©lectionnez sur le c√¥t√© gauche et transf√©rez vers la table de droite pour laquelle vous devez cr√©er ou supprimer une strat√©gie CDC. <br><br>  Pour l'activer, ouvrez √† nouveau l'onglet Mappage, s√©lectionnez la base de donn√©es source et cliquez sur le bouton <i>(In) Activer les strat√©gies</i> .  S√©lectionnez et transf√©rez vers le c√¥t√© droit du tableau les strat√©gies que vous devez activer, cliquez sur OK.  Apr√®s cela, ils sont marqu√©s en vert.  En utilisant <i>(In) Activer les strat√©gies</i> , vous pouvez √©galement d√©sactiver les strat√©gies CDC.  Toutes les op√©rations sont effectu√©es en ligne. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/0ef/770/5180ef7709ef906a1541bb7e71b8b5ba.png"><br><br>  Apr√®s avoir activ√© la strat√©gie CDC, les notes sur les enregistrements modifi√©s sont enregistr√©es dans la zone de stockage <i>¬´ReplCDCArea¬ª</i> conform√©ment √† la base de donn√©es d'origine.  Ces notes seront trait√©es par un processus <i>CDCBatch</i> sp√©cial qui, sur leur base, cr√©era des notes dans la file d'attente de r√©plication Pro2 de la base de donn√©es <i>cdc (repl)</i> . <br><br>  Ainsi, nous avons deux files d'attente pour la r√©plication.  La premi√®re √©tape est CDCBatch: √† partir de la base de donn√©es d'origine, les donn√©es vont d'abord √† la base de donn√©es CDC interm√©diaire.  La deuxi√®me √©tape consiste √† transf√©rer les donn√©es de la base de donn√©es CDC vers Oracle.  Il s'agit d'une caract√©ristique de l'architecture actuelle et du produit lui-m√™me, alors que les d√©veloppeurs n'ont pas pu √©tablir de r√©plication directe. <br><br><h2>  Synchronisation principale </h2><br>  Apr√®s avoir activ√© le m√©canisme CDC et configur√© le serveur de r√©plication Pro2, nous devons d√©marrer la synchronisation principale.  Commande de d√©marrage de la synchronisation principale: <br><br>  <i>/pro2/bprepl/Script/replLoad.sh nom-table bisquit</i> <br><br>  Une fois la synchronisation initiale termin√©e, les processus de r√©plication peuvent √™tre d√©marr√©s. <br><br><h2>  D√©marrer les processus de r√©plication </h2><br>  Pour d√©marrer les processus de r√©plication, vous devez ex√©cuter le script <i>replbatch.sh</i> .  Avant de commencer, assurez-vous qu'il existe des scripts de r√©plication pour tous les threads - replbatch1, replbatch2, etc.  Si tout est en place, ouvrez la ligne de commande (par exemple, <i>proenv)</i> , acc√©dez au <i>r√©pertoire / bprepl / scripts</i> et d√©marrez le script.  Dans le panneau d'administration, nous v√©rifions que le processus correspondant a re√ßu le statut RUNNING. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7f/e36/d10/f7fe36d10541f356f26d18f220a241cc.png"><br><br><h2>  R√©sultats </h2><br><img src="https://habrastorage.org/webt/96/tx/ic/96txicmq_eawginnc244qddkqww.png"><br>  Apr√®s la mise en ≈ìuvre, nous avons consid√©rablement acc√©l√©r√© le t√©l√©chargement des informations vers l'entrep√¥t de donn√©es de l'entreprise.  Les donn√©es elles-m√™mes sont transmises √† Oracle en ligne.  Pas besoin de passer du temps sur certaines requ√™tes de longue dur√©e pour collecter des donn√©es √† partir de diff√©rents syst√®mes.  De plus, dans cette solution, le processus de r√©plication peut compresser les donn√©es, ce qui a √©galement un effet positif sur la vitesse.  Maintenant, la r√©conciliation quotidienne du syst√®me BISKVIT avec d'autres syst√®mes a commenc√© √† prendre 15-20 minutes au lieu de 2-2,5 heures, et une r√©conciliation compl√®te - plusieurs heures au lieu de deux jours. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445998/">https://habr.com/ru/post/fr445998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445980/index.html">Nous programmons le contr√¥le vocal d'un h√©licopt√®re en utilisant Node.js et ARDrone</a></li>
<li><a href="../fr445984/index.html">Pacsafe Pickpocket Orage</a></li>
<li><a href="../fr445986/index.html">Le d√©veloppement client comme philosophie de vie</a></li>
<li><a href="../fr445988/index.html">Propre courrier temporaire: t√©l√©gramme bot</a></li>
<li><a href="../fr445992/index.html">Nauchpop au minimum: illusions d'optique</a></li>
<li><a href="../fr446000/index.html">Quel est le probl√®me avec Yandex.Music? Analyse UX / UI</a></li>
<li><a href="../fr446006/index.html">Intel - un son nouveau</a></li>
<li><a href="../fr446008/index.html">Outil open source pour la validation de la qualit√© de la recherche bas√©e sur l'intention</a></li>
<li><a href="../fr446022/index.html">Comment je n'ai PAS analys√© Internet bi√©lorusse</a></li>
<li><a href="../fr446024/index.html">Installer et configurer un n≈ìud Ripple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>