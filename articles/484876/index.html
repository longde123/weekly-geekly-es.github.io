<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∏üèΩ üëéüèø ü§ôüèæ Reparaci√≥n, pirateo, excavaci√≥n. Resolviendo la misi√≥n en l√≠nea Droid Mission üóÑÔ∏è üå¶Ô∏è üôåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El a√±o pasado, realizamos una b√∫squeda en l√≠nea para desarrolladores m√≥viles: Droid Mission. En un mes, los participantes tuvieron que resolver tantos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reparaci√≥n, pirateo, excavaci√≥n. Resolviendo la misi√≥n en l√≠nea Droid Mission</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/484876/"><img src="https://habrastorage.org/webt/r_/ys/qs/r_ysqsq8esvuaug1phjeithvpji.png"><br><br>  El a√±o pasado, realizamos una b√∫squeda en l√≠nea para desarrolladores m√≥viles: Droid Mission.  En un mes, los participantes tuvieron que resolver tantos problemas como sea posible en tres direcciones: ¬°arr√©glenlo!  (b√∫squeda de errores e investigaci√≥n de c√≥digo), ¬°c√≥rtalo!  (ingenier√≠a inversa) y cavarlo!  (aprendiendo las caracter√≠sticas de Android).  En total, la b√∫squeda tuvo 23 tareas: son muy similares a las que los especialistas de Android encuentran en el trabajo real.  En la publicaci√≥n mostraremos todas las condiciones y las soluciones correctas. <br><a name="habracut"></a><a name="start"></a><br><ul><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">Buscar errores e investigar c√≥digos</a> </li><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">Ingenier√≠a inversa</a> </li><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">Sistema Android</a> </li></ul><br><a name="fix"></a><h1>  Buscar errores e investigar c√≥digos </h1><br><h3>  arreglarlo!  # 1 </h3>  <sup><i>Autor: Anastasia Laushkina</i></sup> <br><br>  En un tranquilo viernes por la noche, dos agentes se quedan despiertos hasta tarde y lideran una disputa insoluble.  Se les indic√≥ que almacenaran una gran cantidad de datos secretos en una base de datos Sqlite con una clave de clave entera. <br><br>  El Agente A crea una tabla con una consulta de la forma: CREATE TABLE t (key INT PRIMARY KEY, secret_value_1, secret_value_2), y el agente B con una consulta de la forma CREATE TABLE t (key INTEGER PRIMARY KEY ASC, secret_value_1, secret_value_2). <br><br>  El Agente A est√° absolutamente seguro de que no hay error en su solicitud, sin embargo, el Agente B tiene un argumento en contra de esto: afirma que la integridad de los datos durante el acercamiento del Agente A puede ser violada. <br><br>  Enumere con una coma: la columna o columnas que son responsables de la integridad del Agente B, pero no son responsables del Agente A;  as√≠ como la estructura de datos, en ruso, por lo que la solicitud del agente B ser√° m√°s r√°pida. <br><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Formato de respuesta: [nombre de columna 1], [nombre de columna N], [nombre de estructura] (sin corchetes, con una letra min√∫scula) <br><br>  Ejemplo de respuesta: x, y, matriz </div></div><br>  <b>Soluci√≥n</b> <br><br>  Se trata de rowId y su relaci√≥n con la clave primaria. <br><br>  En el caso de "CREATE TABLE t (key INTEGER PRIMARY KEY ASC, secret_value_1, secret_value_2)" la clave es un alias para rowId.  En el caso de "CREATE TABLE t (key INT PRIMARY KEY, secret_value_1, secret_value_2)" - no.  El motivo se puede encontrar <a href="https://www.sqlite.org/lang_createtable.html">en la documentaci√≥n</a> . <br><br>  Por lo tanto, en ausencia de una relaci√≥n clave con rowId, se ejecutar√° con √©xito una solicitud del formulario "INSERTAR EN LOS VALORES (" algunos "," y "," z ")", lo que podr√≠a violar la integridad de los datos.  Si existe tal conexi√≥n, se producir√° un error de discordancia de tipo de datos. <br><br>  La respuesta se tom√≥ como un par de clave, rowId y key / rowId por separado (porque si hay una conexi√≥n, se refieren a la misma columna). <br><br>  La velocidad se logra mediante el almacenamiento en forma de un √°rbol de b√∫squeda. <br><br><h3>  arreglarlo!  # 2 </h3>  <sup><i>Autor: Anastasia Laushkina</i></sup> <br>  <a href="https://yadi.sk/d/CnFymdL9o6ib3A">Archivo binario</a> <br><br>  Para detectar enemigos r√°pidamente, el Agente Kew est√° desarrollando una aplicaci√≥n con una lista de criminales conocidos.  Se las arregl√≥ para mostrar f√°cilmente esta lista en la aplicaci√≥n, pero sobre esto decide que esa informaci√≥n importante deber√≠a estar en la pantalla principal. <br><br>  Para hacer esto, necesita un widget.  Un problema: por alguna raz√≥n, el widget no muestra una lista.  Un instinto le dice al agente que el problema est√° solo en una l√≠nea. <br><br>  N√≥mbrelo con una coma, as√≠ como la l√≠nea por la que necesita reemplazarlo, para obtener la soluci√≥n m√°s √≥ptima. <br><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Formato de respuesta: [l√≠nea 1], [l√≠nea 2] (sin corchetes) <br><br>  Ejemplo de respuesta: FrameLayout, ScrollView </div></div><br>  <b>Soluci√≥n</b> <br><br>  1. Estamos buscando el archivo de dise√±o para el widget, vemos un elemento ConstraintLayout no v√°lido en √©l (consulte <a href="https://developer.android.com/guide/topics/appwidgets">developer.android.com/guide/topics/appwidgets#CreatingLayout</a> ). <br>  2. C√°mbielo a lo aceptable y √≥ptimo: LinearLayout / FrameLayout. <br><br>  A pesar de que el uso de FrameLayout rompi√≥ el dise√±o de los elementos en el widget, todav√≠a se acept√≥ como respuesta. <br><br><h3>  arreglarlo!  # 3 </h3>  <sup><i>Autor: Artyom Viter</i></sup> <br>  <a href="https://yadi.sk/d/uzV_9MS2CyCXgg">Archivo binario</a> <br><br>  Los probadores notaron un aumento anormal en el consumo de RAM.  Existe la sospecha de que hay una fuga en alguna parte. <br><br>  Tienes que investigar y localizar el problema.  En la respuesta, indique el nombre del m√©todo de la clase de aplicaci√≥n y el lugar de su llamada, lo que conduce a una p√©rdida de memoria.  Si encuentra varios problemas, enumere todos. <br><br>  Formato de respuesta: [Nombre de la clase en la que se llama el m√©todo]: [n√∫mero de l√≠nea en este archivo]: [nombre del m√©todo] (sin corchetes) <br><br>  Indique varias respuestas en orden lexicogr√°fico, separadas por un #. <br><br>  Un ejemplo: <br><br>  Si cree que hay una p√©rdida de memoria en el archivo ExampleFileName.java, <br><br><pre><code class="plaintext hljs">class ExampleFileName {   public problemMethodName(Sting arg) {}   public test(Sting arg) {     problemMethodName(arg); //  8   ExampleFileName.java   } }</code> </pre> <br>  Ejemplo de respuesta: ExampleFileName: 8: problemMethodName <br><br>  <b>Soluci√≥n</b> <br><br>  La primera forma es el an√°lisis de c√≥digo. <br><br><ol><li>  Estudiamos el c√≥digo de la aplicaci√≥n. </li><li>  La primera fuga es obvia.  Este es un registro de BroadCastReceiver en la clase SecondActivity.  Se puede ver un mensaje sobre este problema en logcat si ejecuta la aplicaci√≥n. </li><li>  Si presta atenci√≥n al m√©todo startTimer (), notar√° que la clase CountDownTimer agrega un cierre al controlador principal de hilos con un enlace a textView.  Y antes de que se destruya la actividad, la clase instancia (CountDownTimer) no llama al m√©todo cancel ().  Esta es la segunda p√©rdida de memoria. </li></ol><br>  La segunda forma son las herramientas.  Puede implementar la biblioteca de <a href="https://github.com/square/leakcanary">fugas</a> en la aplicaci√≥n, obtener un volcado de pila a trav√©s de adb o Android Profiler y analizar los informes recibidos.  Eclipse Memory Analyzer (MAT) puede ayudar con el an√°lisis.  Para abrir heapdump en MAT, debe convertirlo a un formato comprensible para MAT utilizando la utilidad hprof-convd. <br><br><h3>  arreglarlo!  # 4 </h3>  <sup><i>Publicado por: Vali Ibragimov</i></sup> <br>  <a href="https://yadi.sk/d/X8HgqWEhCGUAvw">Archivo binario</a> <br><br>  Ivan tiene su primer d√≠a en una sala de cine en l√≠nea.  Como es un desarrollador genial, se le pidi√≥ de inmediato que arreglara el bloqueo cuando ve√≠a una pel√≠cula.  Decidi√≥ al mismo tiempo refactorizar.  El c√≥digo se ha vuelto m√°s conciso y limpio, el error ha dejado de reproducirse. <br><br>  Sin embargo, m√°s tarde result√≥ que la posici√≥n actual de la pel√≠cula no se envi√≥ al backend.  Ayuda a Ivan a entender qu√© clase mezcl√≥. <br><br>  La respuesta es el nombre de la clase que debe usar. <br><br>  <b>Soluci√≥n</b> <br><br>  Para enviar una posici√≥n de visualizaci√≥n cada cinco segundos e ir a la red, se utiliza ExecutorService.  Ivan pens√≥ en crear un ScheduledThreadPoolExecutor para una tarea peri√≥dica: ¬øpor qu√© no usarlo para ir a la red?  Despu√©s de todo, ScheduledThreadPoolExecutor es el descendiente de ThreadPoolExecutor.  Ivan ni siquiera sospechaba que ScheduledThreadPoolExecutor usa solo un hilo, y cuando vaya a la red, deber√° esperar a que se complete la tarea peri√≥dica. <br><br><pre> <code class="plaintext hljs">scheduleFuture = scheduledExecutorService.scheduleAtFixedRate(() -&gt; {                    try {                        timingsApi.sendTiming(filmId, player.getContentPosition()).get();                    } catch (Exception e) {                        e.printStackTrace();                    }                },                0, PERIOD_SECONDS, TimeUnit.SECONDS);</code> </pre> <br>  La soluci√≥n al problema se complic√≥ a√∫n m√°s por el hecho de que no est√°bamos accediendo a ExoPlayer en el hilo de la interfaz de usuario, y en la nueva versi√≥n 2.9. * ExoPlayer comenz√≥ a escribir advertencias sobre esto en los registros.  Pero ahora esto es solo una advertencia, y no un error cometido por Ivan. <br><br><h3>  arreglarlo!  # 5 </h3>  <sup><i>Autor: Alexander Tsybin</i></sup> <br>  <a href="https://yadi.sk/d/GCLtHa4mKTK7YQ">Archivo binario</a> <br><br>  Una compa√±√≠a estaba desarrollando un juego de Farmer Simulator. <br><br>  En este juego, solo un jugador podr√≠a moverse libremente.  Todos los dem√°s objetos estaban inm√≥viles o ten√≠an una trayectoria de movimiento claramente definida.  En alg√∫n momento, decidieron agregar enemigos al juego que se convertir√≠an en un obst√°culo para el jugador. <br><br>  El desarrollador Vasya recibi√≥ instrucciones de darse cuenta de los enemigos.  Durante la implementaci√≥n, Vasya encontr√≥ un problema de rendimiento.  Decidi√≥ arreglarlo debido a subprocesos m√∫ltiples.  Como Vasya no estaba familiarizado con el subprocesamiento m√∫ltiple, aprovech√≥ las soluciones de stackoverflow.  Entonces se deshizo de los problemas de rendimiento. <br><br>  Sin embargo, en la etapa de prueba, se descubri√≥ que a veces el juego se congela.  Ayuda a Vasya a encontrar la raz√≥n. <br><br>  Como respuesta, ingrese los n√∫meros de las l√≠neas de c√≥digo problem√°ticas, separadas por comas, en orden ascendente y sin espacios.  As√≠: 1,17,42 <br><br>  <b>Soluci√≥n</b> <br><br>  Los tipos primitivos de boxeo (por ejemplo, int en Integer) son operaciones costosas.  Para fines de optimizaci√≥n, las m√°quinas Java a veces reutilizan dichos objetos.  Las l√≠neas no son la excepci√≥n. <br><br>  Las l√≠neas ENEMY_LOCK y DECISIONS_LOCK se usan en el c√≥digo para la sincronizaci√≥n.  Entonces, si hay lugares en el proyecto con sincronizaci√≥n en las mismas l√≠neas, puede ocurrir un punto muerto. <br><br>  En general, no puede usar String / Integer, etc., para la sincronizaci√≥n. <br><br>  Respuesta: 7.8 <br><br><h3>  arreglarlo!  # 6 </h3>  <sup><i>Autor: Ivan Pukhov</i></sup> <br>  <a href="https://yadi.sk/d/qR6iYnUBvB9n2w">Archivo binario</a> <br><br>  El equipo de procesamiento de im√°genes ha lanzado una nueva biblioteca nativa, debe probarla y se√±alar los problemas, si los hay. <br><br>  <b>Soluci√≥n</b> <br><br>  Esta es una tarea f√°cil de calentar.  En los recursos se encuentra la biblioteca en s√≠ y el archivo de encabezado correspondiente.  En el encabezado, la √∫nica funci√≥n que devuelve un objeto de trabajo. <br><br>  ¬°No queda nada por hacer sino crear un proyecto de prueba (instalando NDK) y llamarlo!  Una llamada a la funci√≥n en el hilo principal arrojar√° una excepci√≥n pidiendo no llamarlo de esta manera.  Transferimos la ejecuci√≥n a otro hilo de cualquier manera, y todo funciona. <br><br>  Ahora vale la pena verificar el objeto devuelto. ¬øEs realmente un mapa de bits?  La forma m√°s f√°cil es mostrarlo inmediatamente en un ImageView.  Veremos una imagen con una cadena de texto, y la tarea requiere una respuesta tambi√©n en forma de cadena.  Esto probablemente no sea solo una coincidencia.  :) <br><br><h3>  arreglarlo!  # 7 </h3>  <sup><i>Autor: Dmitry Zaitsev</i></sup> <br>  <a href="https://yadi.sk/d/sqQgkbbjDu1UNw">Archivo binario</a> <br><br>  Hay una aplicaci√≥n con c√≥digos donde se enmarca el c√≥digo deseado.  Desafortunadamente, el dise√±o se rompi√≥ y necesita ser restaurado para encontrar el c√≥digo. <br><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Despu√©s de corregir el c√≥digo, el marco pasar√° por exactamente 22 caracteres que deben enumerarse en sentido antihorario, comenzando desde la esquina superior izquierda del marco. <br><br>  Ejemplo de respuesta: ScQG1jxbazmjbcARefbRMo </div></div><br>  <b>Soluci√≥n</b> <br><br>  Ahora Dagger se ha convertido en el est√°ndar de facto en el desarrollo de Android.  Cuando la DI ya est√° configurada, es muy simple escribir Inyectar delante del constructor y entregarle el resto del trabajo a Dagger.  Es tan f√°cil que luego puede dejar de pensar en c√≥mo se proporcionan las dependencias.  Tambi√©n en Android, a menudo tiene que trabajar con la clase Context y sus descendientes: Aplicaci√≥n y Actividad.  La aplicaci√≥n est√° vinculada al ciclo de vida de la aplicaci√≥n, y la Actividad est√° vinculada al ciclo de vida de la pantalla.  Por lo tanto, al trabajar con estas clases, es importante observar muchas caracter√≠sticas.  La tarea se basa precisamente en el uso del contexto incorrecto, y todo esto se disfraza con DI. <br><br>  Para resolver, puede realizar los siguientes pasos: <br><br><ol><li>  Examine los archivos del proyecto y observe que ItemStyle se aplica a todas las vistas de texto. </li><li>  Ver que el estilo no se aplica realmente.  Esto deber√≠a llevar a la idea de que el problema est√° relacionado con el tema y, por lo tanto, con el contexto de la Actividad. </li><li>  Comprenda el gr√°fico de dependencia y comprenda que el contexto de la aplicaci√≥n se proporciona en el adaptador. </li><li>  En el ContestAdapter, cambie el tipo de contexto a Actividad. </li></ol><br><h3>  arreglarlo!  # 8 </h3>  <sup><i>Publicado por: Vali Ibragimov</i></sup> <br>  <a href="https://yadi.sk/d/mgEetgsZNwtvRA">Archivo binario</a> <br><br>  Ivan recibi√≥ la tarea de refactorizar la aplicaci√≥n para obtener una lista de tareas a trav√©s de ContentProvider usando DI.  Refactoriz√≥ la aplicaci√≥n usando Dagger, y cuando comenz√≥, la aplicaci√≥n comenz√≥ a fallar. <br><br>  Ayuda a Ivan a entender la raz√≥n: <br><br><ol><li>  Especifique el n√∫mero de l√≠nea con el nombre de la clase que desea transferir a otra clase. </li><li>  Proporcione un enlace a la documentaci√≥n con un ancla a un lugar que lo ayudar√° a comprender por qu√© la aplicaci√≥n falla. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Formato de respuesta: [Nombre de clase]: [N√∫mero de l√≠nea] -&gt; [Nombre de clase]: [N√∫mero de l√≠nea], [Enlace] <br><br>  Ejemplo de respuesta: <br><br>  FirstCLass: 12-&gt; SecondClass: 45, https: //developer.android.com/reference/android/app/Activity#activity-lifecycle </div></div><br>  <b>Soluci√≥n</b> <br><br>  La tarea constaba de dos partes: <br><br>  1. Comprenda y proporcione una soluci√≥n de bloqueo en ContentProvider al acceder al componente DI.  La soluci√≥n correcta era transferir la inicializaci√≥n del componente DI al ContentProvider. <br><br><img src="https://habrastorage.org/webt/fu/nr/n_/funrn_gbeansq3bwonjrrsaknoc.png" width="800"><br><br>  El m√©todo onCreate en ContentProvider se llama antes que en la Aplicaci√≥n.  Esto es f√°cil de verificar si examina el c√≥digo de inicio de la aplicaci√≥n en la clase ActivityThread y el m√©todo handleBindApplication. <br><br><img src="https://habrastorage.org/webt/r9/xk/vr/r9xkvrg0kjjiefi0xtruxlvnhwm.png" width="620"><br><br>  2. Proporcione un enlace que describa que onCreate para ContentProvider se llama antes que para la Aplicaci√≥n.  Google no menciona esto en la p√°gina de documentaci√≥n de ContentProvider.  Pero aqu√≠ hay un extracto de la descripci√≥n del m√©todo de aplicaci√≥n onCreate: <br><br><blockquote>  Se llama cuando se inicia la aplicaci√≥n, antes de que se haya creado cualquier actividad, servicio u objeto receptor (excluyendo proveedores de contenido). </blockquote><br><h3>  arreglarlo!  # 9 </h3>  <sup><i>Autor: Alexander Tsybin</i></sup> <br>  <a href="https://yadi.sk/d/-V1nSeMxB3K6aw">Archivo binario</a> <br><br>  El desarrollador recibi√≥ la tarea de implementar la Vista para alguna lista de elementos.  En TK hab√≠a un requisito importante: desplazar la lista al primer y √∫ltimo elemento para que estos elementos aparezcan en el centro de la pantalla.  El desarrollador implement√≥ la funcionalidad, pero al probarlo result√≥ que a veces el centrado no funciona.  Ayude al desarrollador a encontrar las l√≠neas problem√°ticas en el c√≥digo. <br><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Formato de respuesta: <br><br>  &lt;Nombre de archivo sin extensi√≥n&gt;: &lt;N√∫meros de l√≠nea separados por comas&gt; <br><br>  &lt;Nombre de archivo sin extensi√≥n&gt;: &lt;N√∫meros de l√≠nea separados por comas&gt; <br><br>  Las l√≠neas deben clasificarse en orden lexicogr√°fico.  Los n√∫meros de l√≠nea deben clasificarse en orden ascendente. <br><br>  Ejemplo de respuesta: <br><br>  BarFoo: 1 <br><br>  FooBar: 12,13,14,99 </div></div><br>  <b>Soluci√≥n</b> <br><br>  Hay dos problemas en el c√≥digo: <br><br>  1. A juzgar por el c√≥digo, se supone que la llamada a onViewDetachedFromWindow siempre ocurrir√° despu√©s de onBindViewHolder, pero esto no es as√≠.  El m√©todo gemelo para onViewDetachedFromWindow es onViewAttachedToWindow.  Como resultado, se llama a holder.view.reset () y el centrado desaparece si el desplazamiento es lento. <br><br>  2. En Android anterior a la versi√≥n 7, addView (rootView, params) no funciona como se esperaba. <br><br>  Cuando agrega una Vista, se genera un LayoutParam, que se ve as√≠: <br><br>  Marshmallow - <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/marshmallow-release/core/java/android/widget/FrameLayout.java#L403</a> <br>  Turr√≥n - <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/widget/FrameLayout.java#L384</a> <br><br>  FrameLayout.LayoutParams tiene dos constructores, uno de los cuales acepta ViewGroup.MarginLayoutParams y copia los m√°rgenes en s√≠ mismo: <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/view/ViewGroup.java#L14</a> <br><br>  El segundo constructor acepta ViewGroup.LayoutParams e ignora los m√°rgenes: <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/view/ViewGroup.java#L7328</a> <br><br>  Como resultado, el centrado no funciona en Android hasta la versi√≥n 7. <br><br>  La respuesta es: <br>  Vista de art√≠culo: 35 <br>  Actividad principal: 53 <br><br><a name="hack"></a><h1>  Ingenier√≠a inversa </h1><br><h3>  hackearlo!  # 1 </h3>  <sup><i>Autor: Valentin Baryshev</i></sup> <br>  <a href="https://yadi.sk/d/7SXNXpKzadxR9A">Archivo binario</a> <br><br>  Un desarrollador se apresur√≥ y ni siquiera prob√≥ el .apk final antes de enviarlo al concurso. <br><br>  Result√≥ que mezcl√≥ un grupo de vistas en activity_main.xml.  Adem√°s, coloc√≥ cada letra de la llave en una vista de texto separada.  Como resultado, todas las vistas en el dise√±o se separaron y hay una indignaci√≥n total en la pantalla. <br><br>  Intente determinar qu√© grupo de vista debe estar en lugar de los actuales. <br><br>  La respuesta al problema es el c√≥digo que aparece en la pantalla despu√©s de sustituir el grupo de visualizaci√≥n correcto. <br><br>  <b>Soluci√≥n</b> <br><br>  Es necesario descompilar .apk de cualquier forma disponible (por ejemplo, mediante descompiladores en l√≠nea) y recrear el proyecto por c√≥digo. <br><br>  Si analizamos main_layout, entonces podemos adivinar a partir de los atributos que el grupo de vista ra√≠z deber√≠a ser ConstraintLayout. <br><br>  Respuesta: tniartsnoc <br><br><h3>  hackearlo!  # 2 </h3>  <sup><i>Autor: Alexander Tsybin</i></sup> <br>  <a href="https://yadi.sk/d/PAuLY9-7Is5iYg">Archivo binario</a> <br><br>  Un usuario experimentado bloque√≥ la aplicaci√≥n.  No se sorprendi√≥, abri√≥ los registros, encontr√≥ la l√≠nea que caus√≥ el error: N72XbphDx5NnFl6CKMNl8w == y lo envi√≥ al soporte t√©cnico. <br><br>  Result√≥ que estaba usando una versi√≥n desactualizada de la aplicaci√≥n, que hab√≠a sido desarrollada antes de usar repositorios de c√≥digo, por lo que se perdi√≥ el c√≥digo de descifrado.  Sin embargo, fue posible encontrar .apk de la versi√≥n anterior de la aplicaci√≥n. <br><br>  Ayuda a descifrar el mensaje. <br><br>  <b>Soluci√≥n</b> <br><br>  Es necesario descompilar .apk de cualquier forma disponible (por ejemplo, mediante descompiladores en l√≠nea) y recrear el proyecto por c√≥digo. <br><br>  El c√≥digo en s√≠ contiene tanto la funci√≥n de cifrado como la funci√≥n de descifrado, a las que puede dar la cadena cifrada y obtener una respuesta. <br><br>  La respuesta es: <br>  TF: ¬°Buen trabajo! <br><br><h3>  hackearlo!  # 3 </h3>  <sup><i>Autor: Valentin Baryshev</i></sup> <br>  <a href="https://yadi.sk/d/hRZM_Yc8hf5FOg">Archivo binario</a> <br><br>  ¬øQu√© tan bien conoce el ciclo de vida de una aplicaci√≥n de Android? <br><br>  ¬øSab√≠a que en algunos casos el sistema puede matar el proceso de solicitud? <br><br>  Simule esta situaci√≥n en la aplicaci√≥n. <br><br>  Ver√° la respuesta despu√©s de restaurar la aplicaci√≥n, en forma de c√≥digo. <br><br>  <b>Soluci√≥n</b> <br><br>  Fue suficiente para instalar .apk en el tel√©fono, ejecutar y obtener el caso cuando el sistema descarga la aplicaci√≥n, pero al mismo tiempo permanece en la cortina. <br><br>  Una opci√≥n es instalar la aplicaci√≥n, iniciarla y minimizarla (o simplemente cambiar a otra aplicaci√≥n).  Luego nos conectamos v√≠a adb a la computadora.  En Android Studio, seleccione la pesta√±a Logcat, seleccione el proceso de esta aplicaci√≥n y haga clic en el icono de detenci√≥n rojo.  Luego abra la aplicaci√≥n previamente minimizada desde la cortina.  La pantalla mostrar√° la respuesta: sss2384gxcxxX. <br><br><h3>  hackearlo!  # 4 </h3>  <sup><i>Autor: Ivan Pukhov</i></sup> <br>  <a href="https://yadi.sk/d/RwxPtc4Z-EwCLg">Archivo binario</a> <br><br>  Un colega de front-end public√≥ una demostraci√≥n del nuevo m√≥dulo, pero olvid√≥ enviar especificaciones.  Ahora duerme en una zona horaria diferente, y una demostraci√≥n debe hacerse en unos minutos.  De una conversaci√≥n con un colega, recuerdas su frase "S√≠, es f√°cil all√≠, solo necesitas escribir talones y funcionar√°". <br><br>  Descargue el archivo e intente hacer frente sin un colega. <br><br>  <b>Soluci√≥n</b> <br><br>  Esta es una tarea simple, pero requiere cierta curiosidad y perseverancia. <br><br>  Descargue el archivo, cargue su contenido en el servidor de prueba local, cree un proyecto con WebView y ejec√∫telo.  Despu√©s de un breve tiempo de espera, vemos el mensaje "Calibrar orientaci√≥n".  Y eso es todo.  ¬øPero el mensaje sugiere que tal vez deber√≠as girar el tel√©fono en tus manos?  Despu√©s de eso, se mostrar√° un mensaje sospechoso sobre la excepci√≥n lanzada, con una llamada para verificar la salida de la consola. <br><br>  Abrimos la consola y vemos una llamada a un m√©todo inexistente en el objeto API.  Agregamos un objeto a WebView para implementar la API JS y nuevamente intentamos probar la aplicaci√≥n. <br><br>  Aparentemente, vale la pena agregar un valor de retorno.  Seleccionamos, agregamos, funciona.  Pero no hay una l√≠nea con la respuesta en ninguna parte.  Vuelva a encender el tel√©fono: se llama a un nuevo m√©todo.  A√±√°delo tambi√©n.  Despu√©s de varias iteraciones, recibimos la llamada finalizeCalibrating y luego storeResult, en el que llegar√° nuestra l√≠nea. <br><br>  Al descargar la fuente, es posible que no desee resolver nada, pero √°bralos y extraiga la respuesta.  Este m√©todo funciona, pero un par de peque√±os rastrillos te esperan en el camino. <br><br><h3>  hackearlo!  # 5 </h3>  <sup><i>Autor: Ivan Pukhov</i></sup> <br><br>  El ensamblaje de desarrollo de la nueva versi√≥n de Android se filtr√≥ a la red, en la cual el nuevo mecanismo de firma de aplicaciones se depur√≥ directamente en el dispositivo.  En este ensamblaje, la clave privada para firmar se cose en el c√≥digo fuente del sistema, y ‚Äã‚Äãlos desarrolladores dejaron partes de la interfaz de usuario para recibirla.  Encuentra la llave. <br><br><div class="spoiler">  <b class="spoiler_title">Notas</b> <div class="spoiler_text">  Formato de respuesta: cadena de 32 caracteres <br><br>  <a href="https://yadi.sk/d/vnDrXgDqJd8v7g">Descargar condici√≥n de tarea (Mac OS X)</a> <br><br>  <a href="https://yadi.sk/d/ZuE2fORiMbbG7A">Descargar la condici√≥n de la tarea (Windows)</a> <br><br>  <a href="https://yadi.sk/d/WxiBCxrVeIzIrg">Descargar condici√≥n de tarea (Linux)</a> </div></div><br>  <b>Soluci√≥n</b> <br><br>  1. Cuando ejecute el emulador, notar√° la aplicaci√≥n SecretActivity.  Si lo abres, aparece un brindis que ofrece ver los registros.  Como se trata de un ensamblaje de depuraci√≥n, hay muchos registros; deben filtrarse por el nombre de la aplicaci√≥n. <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'SecretActivity'</span></span></code> </pre> <br> <code>1898 1898 E SecretActivity: Try broadcast ZggwxXsaQ9SapPKyHpnwnYmALHazVFWX</code> <br> <br>  2. Intentamos lanzar difusi√≥n con acci√≥n desde el registro: <br><br><pre> <code class="bash hljs">adb shell am broadcast -a ZggwxXsaQ9SapPKyHpnwnYmALHazVFWX</code> </pre> <br>  3. Aparecer√° un brindis en la pantalla con una propuesta para ver los registros con la etiqueta SecretReceiver. <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'SecretReceiver'</span></span></code> </pre> <br> <code>1898 1898 E SecretReceiver: ISecretService.aidl <br> 1898 1898 E SecretReceiver: package android.app; <br> 1898 1898 E SecretReceiver: interface ISecretService { <br> 1898 1898 E SecretReceiver: String getSecret(); <br> 1898 1898 E SecretReceiver: } <br> 1898 1898 E SecretReceiver: See global settings to bind SecretService</code> <br> <br>  4. Observamos la configuraci√≥n global para encontrar una acci√≥n para conectarnos a SecretService. <br><br><pre> <code class="bash hljs">adb shell settings list global</code> </pre> <br> <code>... <br> bind_secret_service_action=g8mNyGQZR8aHLTXNWcjdwJJYZ85Ewx83 <br> ...</code> <br> <br>  5. Estamos escribiendo un cliente para el servicio ISecretService utilizando esta interfaz de ayuda. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(); intent.setAction(<span class="hljs-string"><span class="hljs-string">"g8mNyGQZR8aHLTXNWcjdwJJYZ85Ewx83"</span></span>); PackageManager pm = getPackageManager(); List&lt;ResolveInfo&gt; resolveInfoList = pm.queryIntentServices(intent, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolveInfoList == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || resolveInfoList.size() != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } ResolveInfo serviceInfo = resolveInfoList.get(<span class="hljs-number"><span class="hljs-number">0</span></span>); ComponentName component = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ComponentName(serviceInfo.serviceInfo.packageName, serviceInfo.serviceInfo.name); Intent explicitIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(intent); explicitIntent.setComponent(component); bindService(explicitIntent, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ServiceConnection() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceConnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name, IBinder service)</span></span></span><span class="hljs-function"> </span></span>{ ISecretService secretService = ISecretService.Stub.asInterface(service); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Log.d(<span class="hljs-string"><span class="hljs-string">"MainActivity"</span></span>, secretService.getSecret()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(<span class="hljs-string"><span class="hljs-string">"MainActivity"</span></span>, <span class="hljs-string"><span class="hljs-string">"RemoteException"</span></span>, e); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceDisconnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name)</span></span></span><span class="hljs-function"> </span></span>{ } }, Context.BIND_AUTO_CREATE); } }</code> </pre> <br>  6. Ejecutar, en los registros obtenemos la respuesta: <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'MainActivity'</span></span></code> </pre> <br> <code>1898 1898 E MainActivity: VENHz=qWr7y!t3ZhP!8Skw!!kcTkt7V%</code> <br> <br><h3>  hackearlo!  # 6 </h3>  <sup><i>Autor: Pavel Vorobkalov</i></sup> <br>  <a href="https://yadi.sk/d/V1ipafbw9EJjQA">Archivo binario</a> <br><br>  El Sr. Tupper escribi√≥ una aplicaci√≥n de Android que env√≠a mensajes. <br><br>  Descifra el mensaje y sigue adelante. <br><br>  Formato de respuesta: cadena como enlace. <br><br>  <b>Soluci√≥n</b> <br><br>  Instala y ejecuta la aplicaci√≥n en el dispositivo.  Vemos dos botones: Enviar mensaje y Enviar f√≥rmula.  Cuando haces clic en ellos, no sucede nada visible.  Debe averiguar c√≥mo y d√≥nde la aplicaci√≥n env√≠a algo. <br><br><img src="https://habrastorage.org/webt/d7/1k/ea/d71kea2oipwhydwmurf5hroelpy.png" width="300"><br><br>  Abrimos aplicaciones .apk usando algunos medios para la ingenier√≠a inversa y miramos la Actividad principal.  All√≠ puede ver los m√©todos onSendMessageClick y onSendFormulaClick.  Crean un Intent con la acci√≥n "com.yandex.tupper.action.NEW_MESSAGE" y extra con la clave "com.yandex.tupper.message" y lo env√≠an a las aplicaciones desde la lista (utilizando el m√©todo general).  Obtienen la lista llamando a PackageManager.queryBroadcastReceivers. <br><br>  Puede continuar utilizando herramientas de ingenier√≠a inversa para estudiar el mensaje extray√©ndolo del c√≥digo de la aplicaci√≥n.  Pero este camino es intencionalmente (aunque ligeramente) complicado por el cifrado RSA adicional. <br><br>  Hay otra forma que coincide mejor con la programaci√≥n de Android.  Debe escribir una aplicaci√≥n que maneje esta intenci√≥n de transmisi√≥n.  Creamos nuestra aplicaci√≥n, en el receptor de registro manifiesto: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".TupperMessageReceiver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:exported</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.yandex.tupper.action.NEW_MESSAGE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  En el controlador, recibimos el mensaje de extra y ejecutamos nuestra propia Actividad, en la que mostraremos el resultado del procesamiento: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TupperMessageReceiver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BroadcastReceiver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Intent activityIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(context, MainActivity.class); activityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); activityIntent.putExtra(MainActivity.EXTRA_MESSAGE, message); context.startActivity(activityIntent); } }</code> </pre> <br>  Ahora tratemos con el descifrado del mensaje en s√≠.  Si busca en Yandex el "mensaje de Tupper", puede encontrar <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D0%25BC%25D1%2583%25D0%25BB%25D0%25B0_%25D0%25A2%25D0%25B0%25D0%25BF%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0">un art√≠culo</a> sobre la f√≥rmula de Tupper de Wupper.  Tiene un ejemplo de una f√≥rmula codificada en forma de n√∫mero: <br><br><div class="spoiler">  <b class="spoiler_title">48584 ...</b> <div class="spoiler_text"><pre><code class="plaintext hljs">4858450636189713423582095962494202044581400587983244549483093085061934704708809928450644769865524364849997247024915119110411605739177407856919754326571855442057210445735883681829823754139634338225199452191651284348332905131193199953502413758765239264874613394906870130562295813219481113685339535565290850023875092856892694555974281546386510730049106723058933586052544096664351265349363643957125565695936815184334857605266940161251266951421550539554519153785457525756590740540157929001765967965480064427829131488548259914721248506352686630476300</code></pre></div></div><br>  Este n√∫mero se env√≠a como mensaje haciendo clic en el bot√≥n Enviar f√≥rmula.  El resultado de decodificar el n√∫mero tambi√©n se encuentra en el art√≠culo de Wikipedia.  Se puede usar para depurar su implementaci√≥n del algoritmo de decodificaci√≥n. <br><br>  Implementamos el algoritmo de decodificaci√≥n en Java y, por razones de belleza, convertimos el n√∫mero binario resultante en un mapa de bits monocromo: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TupperCodec</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TUPPER_R = <span class="hljs-number"><span class="hljs-number">17</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TupperCodec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> BigInteger </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decodeFromDecString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String decString)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NumberFormatException </span></span>{ BigInteger data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BigInteger(decString, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data.divide(BigInteger.valueOf(TUPPER_R)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNumberAsBinImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BigInteger number)</span></span></span><span class="hljs-function"> </span></span>{ String binString = number.toString(<span class="hljs-number"><span class="hljs-number">2</span></span>); StringBuffer result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuffer(binString.length()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; binString.length(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((i % TUPPER_R) == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { result.append(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>); } result.append(binString.charAt(binString.length() - <span class="hljs-number"><span class="hljs-number">1</span></span> - i)); } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numberOfRows = (binString.length() + TUPPER_R - <span class="hljs-number"><span class="hljs-number">1</span></span>) / TUPPER_R; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; i &lt; numberOfRows * TUPPER_R; i++) { result.append(~_~quot&amp;#<span class="hljs-number"><span class="hljs-number">0</span></span>;quot~_~); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.toString(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBinImageAsBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String binImage)</span></span></span><span class="hljs-function"> </span></span>{ String[] lines = binImage.split(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] colors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[lines.length * TUPPER_R]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; lines.length; i++) { String line = lines[i]; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> line.length() == TUPPER_R; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; line.length(); j++) { colors[i * TUPPER_R + j] = line.charAt(j) == <span class="hljs-string"><span class="hljs-string">'0'</span></span> ? Color.WHITE : Color.BLACK; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Bitmap.createBitmap(colors, TUPPER_R, lines.length, Bitmap.Config.ARGB_8888); } }</code> </pre> <br>  En Actividad, llame a la decodificaci√≥n y muestre el resultado como un mapa de bits en ImageView: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String EXTRA_MESSAGE = <span class="hljs-string"><span class="hljs-string">"com.yandex.tupper.message"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); Intent intent = getIntent(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (intent != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; intent.hasExtra(MainActivity.EXTRA_MESSAGE)) { String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { BigInteger data = TupperCodec.decodeFromDecString(message); String binImage = TupperCodec.getNumberAsBinImage(data); Bitmap bitmap = TupperCodec.getBinImageAsBitmap(binImage); ImageView imageView = findViewById(R.id.message_image); imageView.setImageBitmap(bitmap); CharSequence toastText = TextUtils.ellipsize(message, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextPaint(), <span class="hljs-number"><span class="hljs-number">400</span></span>, TextUtils.TruncateAt.END); Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toastText, Toast.LENGTH_SHORT).show(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NumberFormatException ex) { Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, getString(R.string.invalid_message), Toast.LENGTH_LONG).show(); } } } }</code> </pre> <br><img src="https://habrastorage.org/webt/zf/ji/7b/zfji7bvxc9uz3avkrwqz65hc7lo.png" width="300"><br> <b><sup><sub>  </sub></sup></b> <br><br>  ‚Äî <a href="https://clck.ru/FevR5">clck.ru/FevR5</a> . <br><br><h3> hack it! #7 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/YlXQWIwlo8VGmw"> </a> <br><br>       . <br><br>     .    ,           ,    . <br><br>  :      -    . <br><br> <b></b> <br><br>  .apk  zip-     classes.dex ‚Äî  Java-  .         , ,  dex2jar  Android Studio. dex2jar  Java-,    Android Studio        class-.     ,   . <br><br>    ,     proguard ( android.support.*  androidx.*,    ), ‚Äî  com.yandex.contest.keygenme.MainActivity, Activity  . ,       : MainActivity.a#doInBackground   bbaab   b     ,   . <br><br><img src="https://habrastorage.org/webt/6d/sa/vb/6dsavb2ct67ou-f8hknj6c7twpy.png"><br><br>   c  d.        N-    œÄ ( --),        .     ,  œÄ <sub>hexed</sub> [c[i] + key[i]] = d[i], i = 0..11.    ,     .            50  hex-  œÄ.  : 537306089144.         key_2056BE33E064. <br><br>            ,    ,       ‚Äî  .     doInBackground: <br><br><img src="https://habrastorage.org/webt/4o/io/62/4oio62zqs03jzqonptpka1tb_rs.png"><br><br> ,       ,       if (var12[0] == var8) {‚Ä¶ }.  var7    ‚Äî  i-   .    ,   var7      0  9           .    .    ,    .apk (      JVM)   . <br><br><h3> hack it! #8 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/rRQuDjMq7f6Z_A"> </a> <br><br>      N   ,        .    :   Android  4.4,    1200 √ó 600,        FM-.    ,       ,  FM-    .     FM-        ,      . <br><br>          ,        FM-.            . <br><br>       ,     : <br><br> 1.     106.00  <br> 2.  (seek)    <br> 3. ,    <br><br>  ,    . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text">  :            .        . <br><br>  : ,   a(106.00)     106.00 ,  b(true)   ,   c()  ,     a(106.00);b(true);c() </div></div><br> <b></b> <br><br>  :  ,   FM-  .    .apk   dex-.       Java.  ,   ,    ‚Äî jadx. <br><br>   .apk,     .      MainActivity.   : fragment_holder   RadioFullFragment   .    .      RadioFullPresenter,  ChangeRadioFrequencyUsecase,       RadioRepo.   . <br><br>     ¬´implements RadioRepo¬ª.  : RadioRepoImpl.  ,      b. ServiceConnection ‚Äî    . ,   b    lambda$new$0$RadioRepoImpl. ,   $$Lambda$RadioRepoImpl$FYTR9gAgZEGvrLjkbkpAIup7OKw,     serviceConnection  IRadioService radioService.  ,    RadioService. <br><br>  :  onServiceConnected   ¬´b radioManager = Stub.asInterface(service)¬ª.  ,     .    ¬´bindService¬ª.  bindService   ¬´com.some_company.help_service¬ª.      ,      com.some_company.carradio.FmUtils.  , ,     . , : j  ,    : 8880  88.00 .        8800.      a. ,    . <br><br>   .  : k  z.         RadioRepoImpl,    enableRadio()  disableRadio()   k.    z(boolean isForwardDirection),     ¬´ (seek)   ¬ª. <br><br>      : a(10600);z(true);j(). <br><br><h3> hack it! #9 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/RqpIQYikuNBwcA"> </a> <br><br>    flatbuffers      .      GPX  .    .      ,  . <br><br>  FlatBuffers   : <br><br><pre> <code class="plaintext hljs">namespace ru.yandex.android.task; struct GeoPoint { latitude:double; longitude:double; } table Points { items:[GeoPoint]; } root_type Points;</code> </pre> <br>  : ,     sha256.      . <br><br> <b></b> <br><br>   ,   FlatBuffers. <br><br> 1.   fbs-         . <br> 2.    Java-.   JVM-    ,    Gradle   flatbuffers. <br> 3.        fbs-. <br> 4.      fbs-,     -     ‚Äî    .    ,          FlatBuffers. <br> 5.      ,   .  structs  ,           struct  table.     . <br> 6.            Kotlin.            FlatBuffers. <br><br>      fbs     ,        .     FlatBufferBuilder      input.    input   : <br><br><pre> <code class="plaintext hljs">val pointsList = Points.getRootAsPoints(buffer) val restoredPoints = (0 until pointsList.itemsLength()) .mapNotNull(pointsList::items)</code> </pre> <br>  c    ,          (lat, long).       as-is    GPX-. <br><br>    GPX- (   )   .    GPX   XML.  ,       XML-   .  XML-   GPX-track-.  XML-   MAP-          .     ¬´yandroid¬ª. <br><br> ,      .      CLI-: <br><br><pre> <code class="plaintext hljs">echo "yandroid" | shasum -a 256</code> </pre> <br>      . <br><br><a name="dig"></a><h1>  Android </h1><br><h3> dig it! #1 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/WNgNI_n2ydszrg"> </a> <br><br> QA-    . <br><br>  : <br><br> ‚Äî   (  'Screen 1') <br> ‚Äî   GO NEXT (  'Screen 2') <br> ‚Äî   GO BACK <br> ‚Äî     GO NEXT,   <br> ‚Äî  5‚Äì10  <br><br>  :   'Screen 2'. <br><br>  :  ,   ¬´  ¬ª. <br><br>     .apk . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"> <b> </b> <br><br> C   stack trace,     . <br><br>  <b>Ejemplo</b> <br><br>  stack trace     ‚Ä¶ <br><br><pre> <code class="plaintext hljs">at android.os.MessageQueue.nativePollOnce(Native method) at android.os.MessageQueue.next(MessageQueue.java:326) at android.os.Looper.loop(Looper.java:160) at com.android.server.SystemServer.run(SystemServer.java:454) at com.android.server.SystemServer.main(SystemServer.java:294) at java.lang.reÔ¨Çect.Method.invoke(Native method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)</code> </pre> <br> ‚Ä¶   ,     RuntimeInit.java,   493,   : <br><br><pre> <code class="plaintext hljs">com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)</code> </pre> </div></div><br> <b></b> <br><br>   , ,     ¬´  ¬ª. <br><br>       /data/anr/traces.txt  /data/anr/anr_* (https://developer.android.com/topic/performance/vitals/anr#pull_a_traces_file).      adb-: <br><br><pre> <code class="plaintext hljs">adb root adb shell ls /data/anr adb pull /data/anr/&lt;filename&gt;</code> </pre> <br> (   adb root  ,     Google API.) <br><br>  stack trace   .  ‚Äî     stack trace,     : <br><br><pre> <code class="plaintext hljs">com.droid.mission.anrapk.MainActivity$2.onClick(MainActivity.java:43)</code> </pre> <br><img src="https://habrastorage.org/webt/ww/ae/yf/wwaeyflqgvj5ahgbw0ldeui2vo0.png"><br><br><h3> dig it! #2 </h3> <sup><i>:  </i></sup> <br><br>     Android Studio,        ,     MultiDex. -,    apk-     .dex-   (65536).   /     apk   Andorid Studio    .dex-. <br><br>  ‚Äî    dex-  ,    dex- ( ,    )      .    dex- . <br><br> : multidex , android gradle plugin  3.0.0 ‚Äì 3.1.4 <br><br>    . <br><br>         ? <br><br> <b></b> <br><br>         ,      dex-.       Gradle ‚Äî  ,     ,   .apk. <br><br>     Java-  dex-    ART/Dalvik: transformClassesWithDexBuilderForDebug.     dex-,   .       Android Gradle plugin (AGP)     Gradle  .  ,  ‚Äî  , Gradle             . ,        .        AGP,   ‚Äî   DSL- Gradle      build.gradle. <br><br>    3.1.*     minimal-main-dex.    ,      . <br><br><h3> dig it! #3 </h3> <sup><i>:  </i></sup> <br>  ‚Äî     -           . <br><br>       ? <br><br>  :  ‚Äî    . <br><br> <b></b> <br><br>    ,        .    Android   WindowManager. <a href="https://developer.android.com/reference/android/view/WindowManager.html"></a>        .  ,  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">WindowManager.LayoutParams</a> .    ,        ,   <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_APPLICATION</a> . <br><br>    ,  ,      .       ,  ,    - . <br><br> ,   Android SDK,   ,        . ,     <a href="">WindowManager</a>  AOSP.     ,    ,   ,            . <br><br> ,       ,   <a href="http://androidxref.com/9.0.0_r3/search%3Fq%3DTYPE_BOOT_PROGRESS%26defs%3D%26refs%3D%26path%3D%26hist%3D%26project%3Dframeworks">TYPE_BOOT_PROGRESS</a> .       getWindowLayerFromTypeLw  WindowManagerPolicy.  Javadoc : <br><br><blockquote> Returns the layer assignment for the window type. Allows you to control how different kinds of windows are ordered on-screen </blockquote><br> ,   ,  .    switch-case   ,   layer ‚Äî  TYPE_POINTER,  2018.    . <br><br><h3> dig it! #4 </h3> <sup><i>:  </i></sup> <br><br>    ,      -        ,     . <br><br>        .   ,   ,   ,     . <br><br>    Android  ,          ? <br><br> <b></b> <br><br>       ,   ,     Android SDK,  . <br><br>     <a href="">startActivity  Context</a> .     Context  Activity ‚Äî ,      <a href="">startActivity</a> .        startActivityForResult.     ,    Activity  <a href="">mInstrumentation.execStartActivity</a> . <br><br>      <a href=""></a> ?    startActivity  ActivityManagerService,    ServiceManager.getService(Context.ACTIVITY_SERVICE). <br><br>      <a href="">ActivityManagerService</a> .   startActivityAsUser,    startActivity,  ActivityStarter     execute. ,    <a href=""></a> . <br><br> C         <a href="">startActivity</a> .      ,     <a href="">abort</a> ,     true    START_ABORTED     Activity. <br><br>  ,    ,      mService.mIntentFirewall.checkStartActivity. , <a href="">   </a> .   : <br><br><blockquote> This is called from ActivityManager to check if a start activity intent should be allowed. </blockquote><br>   ,  IntentFirewall  .        <a href="">RULES_DIR</a> . : ifw. <br><br><h3> dig it! #5 </h3> <sup><i>:  </i></sup> <br><br>     . ,        (, ) ‚Äî 8800.  ,  ,        (+8800). ,   8800  +8800 ,   /     ,    . <br><br>            .    .   ,   +8800  8800 . <br><br>          ,     (java/c/c++).   ,    . <br><br>      : <a href="https://source.android.com/">source.android.com</a> <br>   ‚Äî : <a href="http://androidxref.com/">androidxref.com</a> <br><br> <b></b> <br><br>     Dialer ,         ,    URI  <code>authorities = "content://com.android.contacts"</code> . <br><br>  ContentProvider.        URI   ContactsPoviider.  : ,    SQL-      .    : <br><br><pre> <code class="plaintext hljs">sb.append("PHONE_NUMBERS_EQUAL(" + Tables.DATA + "." + Phone.NUMBER + ", ");</code> </pre> <br> PHONE_NUMBERS_EQUAL ‚Äî   SQL-.   sqlite    . <br><br>    sqlite,  ,        .   ContactsProvider  ,      config_use_strict_phone_number_comparation,     . : <br><br><pre> <code class="plaintext hljs">&lt;bool name="config_use_strict_phone_number_comparation"&gt;true&lt;/bool&gt;</code> </pre> </div></div><p>Source: <a href="https://habr.com/ru/post/484876/">https://habr.com/ru/post/484876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484862/index.html">Migraci√≥n de AngularJS a Angular7 a trav√©s de una aplicaci√≥n h√≠brida</a></li>
<li><a href="../484866/index.html">Uso de Astra Linux en una computadora integrada ARM</a></li>
<li><a href="../484868/index.html">¬øC√≥mo medir la mejora del equipo? Parte 2</a></li>
<li><a href="../484870/index.html">C√≥mo los ingleses han cambiado a Ilona Mask durante 20 a√±os</a></li>
<li><a href="../484874/index.html">"Su especialista en TI est√° roto, traiga uno nuevo": c√≥mo construir una carrera en TI y no volverse loco</a></li>
<li><a href="../484878/index.html">Conceptos b√°sicos de dise√±o de niveles: efecto de flujo o c√≥mo no dejar que el jugador se aburra</a></li>
<li><a href="../484882/index.html">Windows Terminal Preview v0.8 lanzado</a></li>
<li><a href="../484884/index.html">HIPEC A√±os de vida en lugar de meses con tumores malignos de la cavidad abdominal.</a></li>
<li><a href="../484886/index.html">RTL Styling 101 - Una gu√≠a detallada para el estilo CSS RTL</a></li>
<li><a href="../484890/index.html">Restringir el acceso a los atributos de dimensi√≥n en el modelo tabular SSAS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>