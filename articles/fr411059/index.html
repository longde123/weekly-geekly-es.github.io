<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💓 🚩 📕 Comment devenir magicien (partie 2). Coulisses techniques 👩🏿‍🚀 🥤 🚵🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geektimes, bonjour! Comme promis, c'est la suite du dernier article sur notre petit monde de magie. Aujourd'hui, je vais vous parler des coulisses des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment devenir magicien (partie 2). Coulisses techniques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/411059/"><p>  Geektimes, bonjour!  Comme promis, c'est la suite du dernier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> sur notre petit monde de magie.  Aujourd'hui, je vais vous parler des coulisses des quêtes magiques, des décisions qui ont été prises et de la façon dont nous sommes arrivés à la conclusion que la quête a un tel scénario et une telle apparence. </p><br><p>  Parce que  Jusqu'à la construction de la quête, j'aimais l'électronique, en particulier la programmation des microcontrôleurs AVR en C, il a été décidé d'essayer de maximiser ce potentiel, ce qui permettrait d'ajouter un maximum d'interactivité, d'intérêt et d'excitation à la quête!  De plus, je ne voulais vraiment pas que la quête ressemble à des dizaines d'autres (travaillant à l'époque dans notre ville). </p><br><p>  En réfléchissant au nouveau scénario, nous avons clairement décidé que nous n'aurions ni serrures, ni clés, ni tâches standard, en général, allumez l'électronique au maximum de nos capacités! </p><br><p>  Examinons de plus près la partie technique, et maintenant je vais vous dire comment rendre l'électronique aussi <s>collective</s> que possible. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/dn/vy/th/dnvythtcndsal3tgxf_ia1s_yxk.jpeg"></a> </p><a name="habracut"></a><br><h2>  Revue générale </h2><br><p>  Nous allons omettre la mise en œuvre initiale de la quête (peut-être que j'en parlerai plus tard) et nous concentrer sur le moment de l'achèvement (après quoi la quête a la forme finale). </p><br><p>  Après avoir discuté de notre nouvelle vision de la quête, j'ai réalisé que la puissance d'un microcontrôleur est déjà petite et que vous devez connecter un ordinateur, combinant tous les appareils en un seul système.  Pour comprendre l'intégrité de l'image, un diagramme de tous les appareils et de leurs interactions a été compilé: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wh/ef/vm/whefvmw6i3ss9jkjumnxju_veiw.jpeg" width="550"></div><br><p>  D'après le diagramme, vous pourriez penser que l'ordinateur est le principal, mais ce n'est pas tout à fait vrai, il assumera le rôle de gestion et de lecture des pistes audio, ce que, comme vous l'avez déjà remarqué dans l'article précédent, nous en avons beaucoup. </p><br><p>  Le microcontrôleur Atmega16 est devenu le cœur de l'ensemble du système (le seul critère de sélection était un nombre suffisant de GPIO), qui, via UART, communique avec le programme sur l'ordinateur.  Tous les autres appareils sont fabriqués sur le microcontrôleur Atmega8 (il est excellent en termes de nombre de GPIO et a un prix abordable). </p><br><p>  La plupart des cartes sont soudées sur les plaques d'essai bilatérales les plus cool, respectivement, tous les détails dans les boîtiers DIP.  Certaines planches sont restées dès le début de la quête. </p><br><div class="spoiler">  <b class="spoiler_title">Programme pour ordinateur</b> <div class="spoiler_text"><p>  La fenêtre principale du programme: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jy/ym/8o/jyym8oqes1h3jybzjf1x-ipqloo.jpeg" width="500"></div><br><p>  Fenêtre élargie pour les situations d'urgence: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/gz/is/lpgzisvnnrzbjmd544mjapcd-eg.jpeg" width="500"></div><br><p>  Fenêtre d'erreur: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zc/_y/x-/zc_yx-mgwz-s08u-leuj7zh5oso.jpeg" width="500"></div></div></div><br><p>  La carte principale ne reçoit (!) Que des signaux discrets d'autres appareils (via les optocoupleurs visibles sur la photo), communique avec l'ordinateur, contrôle la LED dans le bol mémoire. </p><br><div class="spoiler">  <b class="spoiler_title">Photo du tableau</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/tw/uy/ax/twuyaxztwv4q95ghdpey2fjojfo.jpeg" width="300"><img src="https://habrastorage.org/webt/l_/6e/jz/l_6ejzxjegptdieidedh4w3lq_g.jpeg" width="300"></p></div></div><br><p>  <strong>Canon magique principal: baguette</strong> </p><br><p>  Une baguette magique est un peu magique, un aimant en néodyme est intégré à sa pointe.  Il a fait d'elle un bon grand-père-tourneur de bois pour seulement 2 $.  Le principal problème était de pousser un aimant de diamètre maximum, en gardant la pointe aussi mince que possible. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/pu/t5/ouput5svy1t_kylawmvy4z-psf8.jpeg" height="100"></div><br><p>  Examinons maintenant de plus près chaque appareil. </p><br><p>  <strong>Branche rouge</strong> </p><br><p>  <em>Le livre</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jg/wm/5n/jgwm5nqowqi-snfpqeea6qygdbs.jpeg" width="500"></div><br><p>  L'événement audio du livre est déclenché par la remorque, qui est montée dans une étagère.  Il est initialement fermé et pour l'ouvrir, vous devez apporter une baguette avec un aimant.  Le livre est comme un mini-coffre-fort: il a des piles (Li-ion 3S), un interrupteur à lames et une clé à transistor qui contrôle le verrou électromécanique (afin de ne pas laisser tout le courant passer par l'interrupteur à lames. En même temps, vous pouvez voir une belle lueur à l'intérieur de l'interrupteur à lames, mais cela ne durera pas longtemps et la probabilité de «coller» des contacts).  Tout est simple ici - la baguette est relevée, le commutateur à lames passe le courant, le transistor est ouvert et le pêne est rétracté.  L'intérieur du coffre aux orteils ressemble à ceci: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4p/a3/cs/4pa3csv5uafgtxobfj8ufadhdi8.jpeg" width="500"></div><br><p>  Et la vue finale: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cv/3n/vq/cv3nvqxj-m6f1ciowre3bxc3vjk.jpeg" width="500"></div><br><p>  <em>Dobby</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gh/ra/7q/ghra7qobwrgesiu4rcqtj9mtxay.jpeg" width="500"></div><br><p>  Parce que  la tâche était de réagir le plus interactivement pour apporter la chaussette à Dobby, le choix s'est porté sur la technologie RFID.  Pour ce faire, j'ai dû coudre un petit porte-clés dans ma chaussette (comme dans un interphone à l'entrée) et mettre sur la chaussette le même signe que Dobby dans la paume de sa main.  Derrière l'image de Dobby se trouve le module RFID. </p><br><p>  L'appareil est basé sur le microcontrôleur Atmega8 et le module RFID RC522 populaire.  Après avoir remonté la chaussette (un rayon de réponse allant jusqu'à 4 cm est tout simplement parfait), le transistor à effet de champ ouvre le verrou électromagnétique dans la boîte et à l'aide d'un ressort, le couvercle est soulevé, un signal est envoyé à la carte principale et un voyant rouge s'allume dans le bol de mémoire. </p><br><div class="spoiler">  <b class="spoiler_title">Frais</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jq/ql/_7/jqql_7jfi3w6lis3u58ylar3mwi.png" width="450"></div></div></div><br><p>  <strong>Branche bleue</strong> </p><br><p>  <em>Cheminée</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6w/b0/ej/6wb0ejy-xmt10rrvvknd2emkp_8.jpeg" height="450"></div><br><p>  La cheminée est naturellement fausse.  Fait de profil et de cloison sèche collés avec des tuiles de brique. </p><br><p>  Electronique montée sur Atmega8.  Une remorque est montée dans chaque brique et une bande LED bleue est connectée.  Les briques elles-mêmes reposent sur un côté des rideaux, et de l'autre un guide primitif avec un ressort de rappel est fait.  Lorsque vous cliquez pour la première fois sur une brique, tous les boutons-poussoirs (il y en a 7) sont allumés pendant 100 ms et l'œil est retiré de l'image à l'aide d'un moteur pas à pas, le signal ira à la carte principale, la mémoire s'allumera et la lumière bleue dans le bol mémoire. </p><br><p>  Le moteur pas à pas et la bande LED sont contrôlés à l'aide du transistor Darlington ULN2003 (pour les curieux, la partie théorique peut être lue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ). </p><br><p>  Maintenant, chaque clic sur une brique inverse son état (un clic - on, le suivant - éteint et ainsi de suite), la première fois que vous cliquez sur une brique, le capteur infrarouge est caché dans l'image: la LED IR est allumée, le rayonnement bat loin du joueur qui approche et c'est à un transistor IR qui utilisant <del>  ferme collective </del>  des ajustements précis par des résistances donnent un signal discret 0 ou 1 à la sortie. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j7/vo/vs/j7vovsqzvpecwnnta4ryuuicqzo.jpeg" width="500"></div><br><p>  Il existe également une solution contre les éclairages parasites (particulièrement si les utilisateurs commencent à faire briller une lampe sur la cheminée), un autre (masqué) est inclus dans le circuit ouvert du transistor IR principal, qui, lorsqu'il est exposé à la lumière, désactive simplement la réaction du microcontrôleur. </p><br><p>  Dès que le capteur IR est déclenché, le microcontrôleur active également le clignotement de la combinaison souhaitée qui doit être pressée (surbrillance) et, en passant, la séquence de pressage joue également un rôle.  Le clignotement de la combinaison souhaitée désactive toutes les briques précédemment pressées. </p><br><p>  Lorsque la bonne combinaison a été pressée, l'image s'ouvre à l'aide d'un verrou électromécanique plus grand que dans les cercueils.  Pour ce faire, j'ai même dû mettre un transformateur assez gros uniquement pour ce loquet. </p><br><p>  (En général, ces verrous sont très faibles, bien qu'ils consomment beaucoup de courant au pic. Vous devez être très prudent avec leur contrôle, si vous lui donnez du courant pendant plus de 5 secondes, il peut simplement brûler, c'est comme ça que j'ai brûlé un verrou) </p><br><div class="spoiler">  <b class="spoiler_title">Accès aux nœuds techniques et à la carte</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/3w/d_/3f3wd_pzwkiwc0akv-9gke8ycoy.jpeg" height="450"></div><br><p><img src="https://habrastorage.org/webt/19/y2/z1/19y2z1m4vdnzoakm9r3uurh638u.jpeg" width="350"><img src="https://habrastorage.org/webt/uf/xn/wv/ufxnwv1yklo_njv1hi_q6tf7doy.jpeg" width="350"></p></div></div><br><p>  <strong>Branche verte</strong> </p><br><p>  <em>Coffret</em> </p><br><p>  Sur la table, il y a un pot discret sur la remorque, si vous le soulevez, le voyant vert dans le chaudron s'allume et le cercueil s'ouvre, dans lequel il y a un indice pour la porte. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/bp/g3/dgbpg30xa87pu3vkc8hsuyk_muo.jpeg" width="550"></div><br><p>  (C'est le même pot qui est nécessaire pour l'oeuf de Pâques avec les blagues de Dobby, qui est décrit dans le premier article) </p><br><p>  <em>La porte</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yj/s4/n1/yjs4n1lzj_ouxjypnurgsiu_vsm.jpeg" width="350"></div><br><p>  Lorsque vous appuyez pour la première fois complètement sur la poignée (pour cela, vous avez dû mettre 2 interrupteurs de fin de course à l'arrière de la porte afin de répondre à une pression complète sur la poignée), l'œil du serpent sur la porte commence à clignoter. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/gs/yq/kigsyq4bpjrb41m3wkeacow0liw.jpeg" width="300"></div><br><p>  L'algorithme d'ouverture de porte correct peut être compris à partir de l'invite: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jw/rt/nv/jwrtnvq9y7fhpzfylrovjdse5xw.jpeg" height="400"></div><br><div class="spoiler">  <b class="spoiler_title">Plus tard, il s'est avéré que cet indice est assez compliqué pour les joueurs.</b>  <b class="spoiler_title">Par la suite, il a été remplacé par un</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/sr/v8/hlsrv8spyrijvnve2rz6fjmqfyi.jpeg" width="500"></div></div></div><br><p>  Pendant les pauses (5s), le microcontrôleur se bloque simplement en retard, et pendant l'appui, la variable est incrémentée.  Par conséquent, si vous appuyez longuement et fortement sur la poignée, elle s'ouvrira de toute façon, d'ailleurs, certaines personnes ont ouvert la porte de cette façon, sans comprendre comment elles l'ont fait.  Afin de ne pas fabriquer une nouvelle carte avec un microcontrôleur séparé pour cette entreprise simple, plusieurs broches libres ont été trouvées sur la carte labyrinthe et tout y était connecté. </p><br><p>  <em>Miroir de poitrine</em> </p><br><p>  Sur le couvercle de la poitrine, 10 symboles magiques sont appliqués et à l'intérieur de l'anche sont collés sous eux. <br>  L'utilisateur doit apporter la baguette aux 3 caractères corrects (la séquence n'a pas d'importance. La photo est marquée de coches), cependant, d'autres figures ont également des interrupteurs à lames, tenant la baguette à laquelle annule les clics précédents, même si elles étaient correctes (de sorte qu'il était impossible d'ouvrir la poitrine en tenant la baguette pour tous les caractères dans une rangée).  Avec le bon choix de symboles, l'électroaimant dans la poitrine s'ouvre (les Atmega8 et ULN2003 préférés sont dans la poitrine).  À ce stade, un signal est envoyé à la carte de numérotation du labyrinthe (une unité courante de la broche d'un MK à la broche d'un autre via une clé à transistor) et les tourbillons commencent à tourner dans le labyrinthe. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y4/mg/va/y4mgva5jwu7of5x1_zt4mtlgaem.jpeg" width="550"></div><br><p>  <em>Labyrinthe</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1w/lx/9c/1wlx9czlf4vl6-k_kolx6nrfile.jpeg" width="550"></div><br><p>  Nous avons sous-estimé cette énorme conception.  Elle a pris beaucoup de temps et d'efforts pour créer, mais le résultat en valait la peine.  Pour le travail du «gros objet noir sur le mur», beaucoup de GPIO était nécessaire (tout a été fait de la manière la plus primitive - pas de multiplexeurs / démultiplexeurs, seulement hardcore!), J'ai donc dû briser l'appareil en unités fonctionnelles - le cadran et le labyrinthe lui-même.  Chaque nœud est réalisé sur le même Atmega8. </p><br><div class="spoiler">  <b class="spoiler_title">Processus d'assemblage</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ha/kd/n7/hakdn7tbv9q7-3pjscovb9_pgok.gif" width="550"></div></div></div><br><p>  Dans le labyrinthe, le principe est simple (même si cela ne semblait pas assez simple :)).  De nombreux problèmes ont été causés par la présence d'une balle à la fin de sa trajectoire.  Des interférences aléatoires interféraient constamment avec le fonctionnement d'un optocoupleur ouvert. </p><br><div class="spoiler">  <b class="spoiler_title">Photo du tableau</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/bv/16/pu/bv16pucrojx_6qpbaq5wmszmfrq.jpeg" width="550"></div></div></div><br><p>  Ce sont ces condensateurs jaunes qui ont permis de résoudre le problème du fonctionnement aléatoire des optocoupleurs. </p><br><p>  Suite au passage du labyrinthe, l'accès à la sphère verte s'ouvre.  Le système permettant d'y accéder est verrouillé depuis les portières de la voiture.  (En termes de prix / force de rétraction, c'est un monstre!). </p><br><p>  Au départ, il n'était pas prévu de donner 1 balle pour le jeu, mais j'ai dû faire des ajustements dès la phase finale, car  dans les boules magnétiques, elles peuvent «coller ensemble» et les séparer est très problématique, donc, afin d'exclure cette probabilité autant que possible dans le jeu, il a été décidé d'émettre des boules à leur tour.  L'alimentation est réalisée à l'aide d'un moteur pas à pas et d'un volet improvisé d'une vieille canne à lancer. </p><br><div class="spoiler">  <b class="spoiler_title">Photo du mécanisme</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f0/bu/-p/f0bu-pdwg9bcxbnswdtufo-xgwk.jpeg" width="350"></div></div></div><br><p>  <strong>Unir nos forces</strong> </p><br><p>  <em>Echecs</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/li/sv/bj/lisvbj67_f4538jcwsngoz-6ule.jpeg" width="500"></div><br><p>  Après de longues délibérations, une tâche avec un seul algorithme a été pensée (sous certaines conditions, que les joueurs réservent).  Il ne restait plus qu'à mettre en place un système de mouvement d'échecs et de réaction aux actions des joueurs :) </p><br><div class="spoiler">  <b class="spoiler_title">Avec le soutien de la production agricole collective, la conception trrrresh suivante a été mise en œuvre:</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/cb/3n/dc/cb3ndck2a4ge9y2aud1mskzqdyq.jpeg" width="350"><img src="https://habrastorage.org/webt/yz/tx/bj/yztxbjncm7oilb359bslvcvsuvk.jpeg" width="350"></p></div></div><br><p>  Le mécanisme est composé de goujons et d'écrous M8, de roulements chinois et de bois.  Un aimant est monté sur chaque figure à l'aide de laquelle le mécanisme les déplace.  Le couplage entre le moteur et le goujon est constitué d'un composant du pistolet à colle, dont nous avions des consommables, en raison de la consommation considérablement accrue de colle silicone. </p><br><div class="spoiler">  <b class="spoiler_title">Photo du tableau</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jw/hh/ad/jwhhadki6ctudi0tz4dxd_i3cpk.jpeg" width="350"><img src="https://habrastorage.org/webt/g6/yd/rf/g6ydrfrphcnvrigm4uuqf3th5hc.jpeg" width="350"></p></div></div><br><p>  Qui sait, nous avons pris les pièces du jeu d'échecs Harry Potter, elles font toujours des sons différents, brillent, etc.  Je ne pouvais pas laisser ces caractéristiques comme ça, j'ai déplacé ces châles sous la planche et il s'est avéré que quand ils montent à cheval - il hennit, et à la fin, vous pouvez entendre le son du roi déchu. <br>  Après une victoire aux échecs, la porte de l'armoire s'ouvre (elle s'ouvre rapidement à l'aide d'un rail à gaz pour meubles). </p><br><p>  Avant de passer au plus intéressant, je veux parler d'un chaudron (un bol de souvenirs) et d'un interphone pour la communication entre l'administrateur et les visiteurs pendant le match. </p><br><p>  <em>Bol de souvenirs</em> </p><br><p>  Pour commencer, ce chaudron en aluminium de dix litres a été trouvé par mon grand-père dans un garage comme un attribut de la cuisine soviétique :) L'idée de faire un bol de souvenirs d'où la fumée soufflerait (et en fait de la vapeur) restait longtemps dans les pensées, mais nous sommes arrivés à une mise en œuvre compétente un peu plus tard. </p><br><p>  Les humidificateurs à ultrasons d'une quantité de 6 (!!!) pièces et d'une puissance totale d'environ 100 watts sont devenus l'agent de buée! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4s/rf/yf/4srfyfxjqghpglwjkvin8-fnvdu.png" width="350"></div><br><p>  Hélas, la photo n'a pas été conservée, mais l'appareil est très simple, réalisé selon le schéma: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/ly/cz/telycz1hm-xsihi9bstgrn7amiw.png" width="350"></div><br><p>  Des dimensions ont été faites pour s'adapter parfaitement à ce système sur la table (espace pour les tiroirs). </p><br><p>  <em>Interphone</em> </p><br><p>  Ma maigre connaissance des circuits analogiques n'a pas permis de résoudre rapidement ce problème.  Après de longues tentatives infructueuses (mais comme il s'est avéré plus tard, la solution était proche de Chetrov!), J'ai demandé à mon ami de Kherson de me fabriquer un tel appareil. </p><br><div class="spoiler">  <b class="spoiler_title">Et après un certain temps, j'ai eu un tel appareil</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/wp/3l/gj/wp3lgj8lyrudgr3qay6jwyz9dzq.jpeg" height="350"><img src="https://habrastorage.org/webt/nl/fd/od/nlfdod5gxhlk0yqneatdm7qxye8.jpeg" height="350"></p></div></div><br><p>  Le préamplificateur est fabriqué sur un amplificateur opérationnel à faible bruit NE5532, après quoi il coûte TDA2006. </p><br><div class="spoiler">  <b class="spoiler_title">Circuit de préampli</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/bs/c8/zrbsc8-3bnuu6vmscl3pvhvpugg.jpeg" width="400"></div></div></div><br><p>  Enfin, nous passons à l'un des systèmes les plus complexes de la salle - la bataille finale avec le Seigneur des Ténèbres! </p><br><p>  <strong><em>Combattre</em></strong> </p><br><p>  L'idée était de réaliser au moins une «bataille» à peu près similaire du joueur (Harry Potter) avec Voldemort.  Pour plus d'effet, du vent a été ajouté (2 ventilateurs).  Nous avons réfléchi à beaucoup d'options, puis un ami m'a parlé des LED WS2812 adressables.  Maintenant, même les pilotes Arduino les plus paresseux parlent de ce qu'ils ont fait de cool, mais WS2812 était moins connu, mais ils sont devenus notre salut!  Sans eux, il était tout simplement irréaliste de réaliser notre idée! </p><br><p>  La bande LED de 5 m a été pliée en deux et un fil pour un interrupteur à lames a été étiré à l'intérieur.  Les premières bandes de 5 m ont été gravées en toute sécurité dans le but d'économiser sur l'alimentation pour la même bande :) </p><br><p>  Nous avons commencé le développement en définissant les horaires: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x4/qo/wh/x4qowhnqimvp4m5c-sdratsqzws.jpeg" width="500"></div><br><p>  Certains problèmes ont ajouté l'inclusion de fans.  Si vous apportez / retirez souvent la baguette, puis le relais (au départ, j'ai essayé d'activer les ventilateurs via le relais), le microcontrôleur a simplement démoli la tour.  En conséquence, j'ai appris la capacité de contrôler une charge de 220 V via une opto-simmistor.  Après ça je n'utilise pas de relais :) </p><br><p>  Il convient également de mentionner qu'une grande puissance de calcul (à l'échelle Atmega8) était nécessaire pour consacrer au contrôle de la bande LED.  Au début, le travail de la bande était très accroché, nous avons souffert longtemps, nous ne pouvions pas comprendre pourquoi.  En conséquence, j'ai dû trouver sur Internet la personne qui a écrit la bibliothèque de cette cassette et lui demander de l'aide.  La raison était simple: le MK n'a pas eu le temps d'exécuter le code dans le gestionnaire d'interruption, et dès que nous l'avons corrigé, tout fonctionnait parfaitement! </p><br><div class="spoiler">  <b class="spoiler_title">Photo du tableau</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nh/iw/cp/nhiwcpjsdozd8dqie-ur6wk49uk.jpeg" width="350"><img src="https://habrastorage.org/webt/fb/ld/va/fbldvaxsykqrxfhbw3i0c7htiaw.jpeg" width="350"></p></div></div><br><p>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programmes pour microcontrôleurs</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programme pour ordinateur</a> </p><br><p>  Selon notre idée, cela devrait être le dernier article, mais nous voulons toujours vous dire beaucoup de choses intéressantes, donc je veux annoncer la publication de deux autres articles sur la façon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de faire de véritables Poudlard (1)</a> et de se débarrasser des idées non réalisées (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">du bureau</a> . </p><br><p>  Ce sera intéressant! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr411059/">https://habr.com/ru/post/fr411059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr411045/index.html">Stick: le héros méconnu de l'évolution humaine</a></li>
<li><a href="../fr411049/index.html">Que lire. Articles de fiction et blogs non connus et gelés</a></li>
<li><a href="../fr411051/index.html">Les satellites de Dauria Aerospace n'entrent pas en contact (malheureusement, suite)</a></li>
<li><a href="../fr411055/index.html">Experts: un conducteur humain sur le site du pilote automatique Uber pourrait éviter une collision mortelle</a></li>
<li><a href="../fr411057/index.html">Space X et ULA signent des contrats de 650 millions de dollars avec le Pentagone</a></li>
<li><a href="../fr411061/index.html">Système d'exploitation réel pour un ancien PC ou netbook</a></li>
<li><a href="../fr411063/index.html">Apprendre l'éléphant (partie 2)</a></li>
<li><a href="../fr411065/index.html">"Profiter du silence": quels sont les avantages et les inconvénients des endroits les plus calmes de la planète</a></li>
<li><a href="../fr411067/index.html">Le premier univers 1. Cosmologie de l'inflation: notre univers fait-il partie du multivers? Partie 1</a></li>
<li><a href="../fr411069/index.html">"Cyborgs et espace"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>